var b3=Object.defineProperty;var n_=e=>{throw TypeError(e)};var w3=(e,t,n)=>t in e?b3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var us=(e,t,n)=>w3(e,typeof t!="symbol"?t+"":t,n),Dg=(e,t,n)=>t.has(e)||n_("Cannot "+n);var Pe=(e,t,n)=>(Dg(e,t,"read from private field"),n?n.call(e):t.get(e)),Ft=(e,t,n)=>t.has(e)?n_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),wt=(e,t,n,r)=>(Dg(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ln=(e,t,n)=>(Dg(e,t,"access private method"),n);var Fh=(e,t,n,r)=>({set _(a){wt(e,t,a,n)},get _(){return Pe(e,t,r)}});function j3(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Gm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var H2={exports:{}},Km={},W2={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu=Symbol.for("react.element"),_3=Symbol.for("react.portal"),N3=Symbol.for("react.fragment"),S3=Symbol.for("react.strict_mode"),k3=Symbol.for("react.profiler"),C3=Symbol.for("react.provider"),P3=Symbol.for("react.context"),E3=Symbol.for("react.forward_ref"),T3=Symbol.for("react.suspense"),A3=Symbol.for("react.memo"),O3=Symbol.for("react.lazy"),r_=Symbol.iterator;function R3(e){return e===null||typeof e!="object"?null:(e=r_&&e[r_]||e["@@iterator"],typeof e=="function"?e:null)}var Z2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G2=Object.assign,K2={};function Vc(e,t,n){this.props=e,this.context=t,this.refs=K2,this.updater=n||Z2}Vc.prototype.isReactComponent={};Vc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Y2(){}Y2.prototype=Vc.prototype;function x0(e,t,n){this.props=e,this.context=t,this.refs=K2,this.updater=n||Z2}var v0=x0.prototype=new Y2;v0.constructor=x0;G2(v0,Vc.prototype);v0.isPureReactComponent=!0;var a_=Array.isArray,X2=Object.prototype.hasOwnProperty,y0={current:null},J2={key:!0,ref:!0,__self:!0,__source:!0};function Q2(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)X2.call(t,r)&&!J2.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){for(var d=Array(c),h=0;h<c;h++)d[h]=arguments[h+2];a.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)a[r]===void 0&&(a[r]=c[r]);return{$$typeof:Qu,type:e,key:i,ref:o,props:a,_owner:y0.current}}function L3(e,t){return{$$typeof:Qu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function b0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qu}function M3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var i_=/\/+/g;function Fg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?M3(""+e.key):t.toString(36)}function xf(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Qu:case _3:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Fg(o,0):r,a_(a)?(n="",e!=null&&(n=e.replace(i_,"$&/")+"/"),xf(a,t,n,"",function(h){return h})):a!=null&&(b0(a)&&(a=L3(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(i_,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",a_(e))for(var c=0;c<e.length;c++){i=e[c];var d=r+Fg(i,c);o+=xf(i,t,n,d,a)}else if(d=R3(e),typeof d=="function")for(e=d.call(e),c=0;!(i=e.next()).done;)i=i.value,d=r+Fg(i,c++),o+=xf(i,t,n,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function $h(e,t,n){if(e==null)return e;var r=[],a=0;return xf(e,r,"","",function(i){return t.call(n,i,a++)}),r}function I3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var An={current:null},vf={transition:null},D3={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:vf,ReactCurrentOwner:y0};function ek(){throw Error("act(...) is not supported in production builds of React.")}At.Children={map:$h,forEach:function(e,t,n){$h(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $h(e,function(){t++}),t},toArray:function(e){return $h(e,function(t){return t})||[]},only:function(e){if(!b0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};At.Component=Vc;At.Fragment=N3;At.Profiler=k3;At.PureComponent=x0;At.StrictMode=S3;At.Suspense=T3;At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D3;At.act=ek;At.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=G2({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=y0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)X2.call(t,d)&&!J2.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:Qu,type:e.type,key:a,ref:i,props:r,_owner:o}};At.createContext=function(e){return e={$$typeof:P3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:C3,_context:e},e.Consumer=e};At.createElement=Q2;At.createFactory=function(e){var t=Q2.bind(null,e);return t.type=e,t};At.createRef=function(){return{current:null}};At.forwardRef=function(e){return{$$typeof:E3,render:e}};At.isValidElement=b0;At.lazy=function(e){return{$$typeof:O3,_payload:{_status:-1,_result:e},_init:I3}};At.memo=function(e,t){return{$$typeof:A3,type:e,compare:t===void 0?null:t}};At.startTransition=function(e){var t=vf.transition;vf.transition={};try{e()}finally{vf.transition=t}};At.unstable_act=ek;At.useCallback=function(e,t){return An.current.useCallback(e,t)};At.useContext=function(e){return An.current.useContext(e)};At.useDebugValue=function(){};At.useDeferredValue=function(e){return An.current.useDeferredValue(e)};At.useEffect=function(e,t){return An.current.useEffect(e,t)};At.useId=function(){return An.current.useId()};At.useImperativeHandle=function(e,t,n){return An.current.useImperativeHandle(e,t,n)};At.useInsertionEffect=function(e,t){return An.current.useInsertionEffect(e,t)};At.useLayoutEffect=function(e,t){return An.current.useLayoutEffect(e,t)};At.useMemo=function(e,t){return An.current.useMemo(e,t)};At.useReducer=function(e,t,n){return An.current.useReducer(e,t,n)};At.useRef=function(e){return An.current.useRef(e)};At.useState=function(e){return An.current.useState(e)};At.useSyncExternalStore=function(e,t,n){return An.current.useSyncExternalStore(e,t,n)};At.useTransition=function(){return An.current.useTransition()};At.version="18.3.1";W2.exports=At;var j=W2.exports;const Ce=Gm(j),w0=j3({__proto__:null,default:Ce},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F3=j,$3=Symbol.for("react.element"),z3=Symbol.for("react.fragment"),B3=Object.prototype.hasOwnProperty,V3=F3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U3={key:!0,ref:!0,__self:!0,__source:!0};function tk(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)B3.call(t,r)&&!U3.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:$3,type:e,key:i,ref:o,props:a,_owner:V3.current}}Km.Fragment=z3;Km.jsx=tk;Km.jsxs=tk;H2.exports=Km;var s=H2.exports,sk={exports:{}},ir={},nk={exports:{}},rk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(G,F){var I=G.length;G.push(F);e:for(;0<I;){var V=I-1>>>1,H=G[V];if(0<a(H,F))G[V]=F,G[I]=H,I=V;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var F=G[0],I=G.pop();if(I!==F){G[0]=I;e:for(var V=0,H=G.length,U=H>>>1;V<U;){var q=2*(V+1)-1,K=G[q],B=q+1,W=G[B];if(0>a(K,I))B<H&&0>a(W,K)?(G[V]=W,G[B]=I,V=B):(G[V]=K,G[q]=I,V=q);else if(B<H&&0>a(W,I))G[V]=W,G[B]=I,V=B;else break e}}return F}function a(G,F){var I=G.sortIndex-F.sortIndex;return I!==0?I:G.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],h=[],m=1,u=null,f=3,p=!1,x=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(G){for(var F=n(h);F!==null;){if(F.callback===null)r(h);else if(F.startTime<=G)r(h),F.sortIndex=F.expirationTime,t(d,F);else break;F=n(h)}}function N(G){if(v=!1,_(G),!x)if(n(d)!==null)x=!0,Y(k);else{var F=n(h);F!==null&&J(N,F.startTime-G)}}function k(G,F){x=!1,v&&(v=!1,w(R),R=-1),p=!0;var I=f;try{for(_(F),u=n(d);u!==null&&(!(u.expirationTime>F)||G&&!A());){var V=u.callback;if(typeof V=="function"){u.callback=null,f=u.priorityLevel;var H=V(u.expirationTime<=F);F=e.unstable_now(),typeof H=="function"?u.callback=H:u===n(d)&&r(d),_(F)}else r(d);u=n(d)}if(u!==null)var U=!0;else{var q=n(h);q!==null&&J(N,q.startTime-F),U=!1}return U}finally{u=null,f=I,p=!1}}var E=!1,T=null,R=-1,$=5,M=-1;function A(){return!(e.unstable_now()-M<$)}function C(){if(T!==null){var G=e.unstable_now();M=G;var F=!0;try{F=T(!0,G)}finally{F?z():(E=!1,T=null)}}else E=!1}var z;if(typeof b=="function")z=function(){b(C)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,O=P.port2;P.port1.onmessage=C,z=function(){O.postMessage(null)}}else z=function(){y(C,0)};function Y(G){T=G,E||(E=!0,z())}function J(G,F){R=y(function(){G(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,Y(k))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(G){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var I=f;f=F;try{return G()}finally{f=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,F){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var I=f;f=G;try{return F()}finally{f=I}},e.unstable_scheduleCallback=function(G,F,I){var V=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?V+I:V):I=V,G){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=I+H,G={id:m++,callback:F,priorityLevel:G,startTime:I,expirationTime:H,sortIndex:-1},I>V?(G.sortIndex=I,t(h,G),n(d)===null&&G===n(h)&&(v?(w(R),R=-1):v=!0,J(N,I-V))):(G.sortIndex=H,t(d,G),x||p||(x=!0,Y(k))),G},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(G){var F=f;return function(){var I=f;f=F;try{return G.apply(this,arguments)}finally{f=I}}}})(rk);nk.exports=rk;var q3=nk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H3=j,ar=q3;function Me(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ak=new Set,pu={};function ll(e,t){vc(e,t),vc(e+"Capture",t)}function vc(e,t){for(pu[e]=t,e=0;e<t.length;e++)ak.add(t[e])}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jx=Object.prototype.hasOwnProperty,W3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o_={},l_={};function Z3(e){return Jx.call(l_,e)?!0:Jx.call(o_,e)?!1:W3.test(e)?l_[e]=!0:(o_[e]=!0,!1)}function G3(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function K3(e,t,n,r){if(t===null||typeof t>"u"||G3(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function On(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rn[e]=new On(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rn[t]=new On(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rn[e]=new On(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rn[e]=new On(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rn[e]=new On(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rn[e]=new On(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rn[e]=new On(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rn[e]=new On(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rn[e]=new On(e,5,!1,e.toLowerCase(),null,!1,!1)});var j0=/[\-:]([a-z])/g;function _0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(j0,_0);rn[t]=new On(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(j0,_0);rn[t]=new On(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(j0,_0);rn[t]=new On(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rn[e]=new On(e,1,!1,e.toLowerCase(),null,!1,!1)});rn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rn[e]=new On(e,1,!1,e.toLowerCase(),null,!0,!0)});function N0(e,t,n,r){var a=rn.hasOwnProperty(t)?rn[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(K3(t,n,a,r)&&(n=null),r||a===null?Z3(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mi=H3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zh=Symbol.for("react.element"),Tl=Symbol.for("react.portal"),Al=Symbol.for("react.fragment"),S0=Symbol.for("react.strict_mode"),Qx=Symbol.for("react.profiler"),ik=Symbol.for("react.provider"),ok=Symbol.for("react.context"),k0=Symbol.for("react.forward_ref"),ev=Symbol.for("react.suspense"),tv=Symbol.for("react.suspense_list"),C0=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),lk=Symbol.for("react.offscreen"),c_=Symbol.iterator;function _d(e){return e===null||typeof e!="object"?null:(e=c_&&e[c_]||e["@@iterator"],typeof e=="function"?e:null)}var ps=Object.assign,$g;function Bd(e){if($g===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$g=t&&t[1]||""}return`
`+$g+e}var zg=!1;function Bg(e,t){if(!e||zg)return"";zg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,c=i.length-1;1<=o&&0<=c&&a[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==i[c]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{zg=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Bd(e):""}function Y3(e){switch(e.tag){case 5:return Bd(e.type);case 16:return Bd("Lazy");case 13:return Bd("Suspense");case 19:return Bd("SuspenseList");case 0:case 2:case 15:return e=Bg(e.type,!1),e;case 11:return e=Bg(e.type.render,!1),e;case 1:return e=Bg(e.type,!0),e;default:return""}}function sv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Al:return"Fragment";case Tl:return"Portal";case Qx:return"Profiler";case S0:return"StrictMode";case ev:return"Suspense";case tv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ok:return(e.displayName||"Context")+".Consumer";case ik:return(e._context.displayName||"Context")+".Provider";case k0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case C0:return t=e.displayName||null,t!==null?t:sv(e.type)||"Memo";case Si:t=e._payload,e=e._init;try{return sv(e(t))}catch{}}return null}function X3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sv(t);case 8:return t===S0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ck(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function J3(e){var t=ck(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bh(e){e._valueTracker||(e._valueTracker=J3(e))}function dk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ck(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nv(e,t){var n=t.checked;return ps({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function d_(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Gi(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uk(e,t){t=t.checked,t!=null&&N0(e,"checked",t,!1)}function rv(e,t){uk(e,t);var n=Gi(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?av(e,t.type,n):t.hasOwnProperty("defaultValue")&&av(e,t.type,Gi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function u_(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function av(e,t,n){(t!=="number"||Bf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vd=Array.isArray;function Kl(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Gi(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function iv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Me(91));return ps({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function h_(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Me(92));if(Vd(n)){if(1<n.length)throw Error(Me(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Gi(n)}}function hk(e,t){var n=Gi(t.value),r=Gi(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function f_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ov(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vh,mk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vh=Vh||document.createElement("div"),Vh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Kd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q3=["Webkit","ms","Moz","O"];Object.keys(Kd).forEach(function(e){Q3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kd[t]=Kd[e]})});function pk(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Kd.hasOwnProperty(e)&&Kd[e]?(""+t).trim():t+"px"}function gk(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=pk(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var eM=ps({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lv(e,t){if(t){if(eM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Me(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Me(62))}}function cv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dv=null;function P0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var uv=null,Yl=null,Xl=null;function m_(e){if(e=sh(e)){if(typeof uv!="function")throw Error(Me(280));var t=e.stateNode;t&&(t=ep(t),uv(e.stateNode,e.type,t))}}function xk(e){Yl?Xl?Xl.push(e):Xl=[e]:Yl=e}function vk(){if(Yl){var e=Yl,t=Xl;if(Xl=Yl=null,m_(e),t)for(e=0;e<t.length;e++)m_(t[e])}}function yk(e,t){return e(t)}function bk(){}var Vg=!1;function wk(e,t,n){if(Vg)return e(t,n);Vg=!0;try{return yk(e,t,n)}finally{Vg=!1,(Yl!==null||Xl!==null)&&(bk(),vk())}}function xu(e,t){var n=e.stateNode;if(n===null)return null;var r=ep(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Me(231,t,typeof n));return n}var hv=!1;if(si)try{var Nd={};Object.defineProperty(Nd,"passive",{get:function(){hv=!0}}),window.addEventListener("test",Nd,Nd),window.removeEventListener("test",Nd,Nd)}catch{hv=!1}function tM(e,t,n,r,a,i,o,c,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(m){this.onError(m)}}var Yd=!1,Vf=null,Uf=!1,fv=null,sM={onError:function(e){Yd=!0,Vf=e}};function nM(e,t,n,r,a,i,o,c,d){Yd=!1,Vf=null,tM.apply(sM,arguments)}function rM(e,t,n,r,a,i,o,c,d){if(nM.apply(this,arguments),Yd){if(Yd){var h=Vf;Yd=!1,Vf=null}else throw Error(Me(198));Uf||(Uf=!0,fv=h)}}function cl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p_(e){if(cl(e)!==e)throw Error(Me(188))}function aM(e){var t=e.alternate;if(!t){if(t=cl(e),t===null)throw Error(Me(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return p_(a),e;if(i===r)return p_(a),t;i=i.sibling}throw Error(Me(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o)throw Error(Me(189))}}if(n.alternate!==r)throw Error(Me(190))}if(n.tag!==3)throw Error(Me(188));return n.stateNode.current===n?e:t}function _k(e){return e=aM(e),e!==null?Nk(e):null}function Nk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nk(e);if(t!==null)return t;e=e.sibling}return null}var Sk=ar.unstable_scheduleCallback,g_=ar.unstable_cancelCallback,iM=ar.unstable_shouldYield,oM=ar.unstable_requestPaint,Cs=ar.unstable_now,lM=ar.unstable_getCurrentPriorityLevel,E0=ar.unstable_ImmediatePriority,kk=ar.unstable_UserBlockingPriority,qf=ar.unstable_NormalPriority,cM=ar.unstable_LowPriority,Ck=ar.unstable_IdlePriority,Ym=null,ba=null;function dM(e){if(ba&&typeof ba.onCommitFiberRoot=="function")try{ba.onCommitFiberRoot(Ym,e,void 0,(e.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:fM,uM=Math.log,hM=Math.LN2;function fM(e){return e>>>=0,e===0?32:31-(uM(e)/hM|0)|0}var Uh=64,qh=4194304;function Ud(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~a;c!==0?r=Ud(c):(i&=o,i!==0&&(r=Ud(i)))}else o=n&~a,o!==0?r=Ud(o):i!==0&&(r=Ud(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-qr(t),a=1<<n,r|=e[n],t&=~a;return r}function mM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pM(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-qr(i),c=1<<o,d=a[o];d===-1?(!(c&n)||c&r)&&(a[o]=mM(c,t)):d<=t&&(e.expiredLanes|=c),i&=~c}}function mv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pk(){var e=Uh;return Uh<<=1,!(Uh&4194240)&&(Uh=64),e}function Ug(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function eh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qr(t),e[t]=n}function gM(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-qr(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function T0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qr(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Kt=0;function Ek(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Tk,A0,Ak,Ok,Rk,pv=!1,Hh=[],Fi=null,$i=null,zi=null,vu=new Map,yu=new Map,Pi=[],xM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x_(e,t){switch(e){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":vu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(t.pointerId)}}function Sd(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=sh(t),t!==null&&A0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function vM(e,t,n,r,a){switch(t){case"focusin":return Fi=Sd(Fi,e,t,n,r,a),!0;case"dragenter":return $i=Sd($i,e,t,n,r,a),!0;case"mouseover":return zi=Sd(zi,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return vu.set(i,Sd(vu.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,yu.set(i,Sd(yu.get(i)||null,e,t,n,r,a)),!0}return!1}function Lk(e){var t=Po(e.target);if(t!==null){var n=cl(t);if(n!==null){if(t=n.tag,t===13){if(t=jk(n),t!==null){e.blockedOn=t,Rk(e.priority,function(){Ak(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);dv=r,n.target.dispatchEvent(r),dv=null}else return t=sh(n),t!==null&&A0(t),e.blockedOn=n,!1;t.shift()}return!0}function v_(e,t,n){yf(e)&&n.delete(t)}function yM(){pv=!1,Fi!==null&&yf(Fi)&&(Fi=null),$i!==null&&yf($i)&&($i=null),zi!==null&&yf(zi)&&(zi=null),vu.forEach(v_),yu.forEach(v_)}function kd(e,t){e.blockedOn===t&&(e.blockedOn=null,pv||(pv=!0,ar.unstable_scheduleCallback(ar.unstable_NormalPriority,yM)))}function bu(e){function t(a){return kd(a,e)}if(0<Hh.length){kd(Hh[0],e);for(var n=1;n<Hh.length;n++){var r=Hh[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Fi!==null&&kd(Fi,e),$i!==null&&kd($i,e),zi!==null&&kd(zi,e),vu.forEach(t),yu.forEach(t),n=0;n<Pi.length;n++)r=Pi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pi.length&&(n=Pi[0],n.blockedOn===null);)Lk(n),n.blockedOn===null&&Pi.shift()}var Jl=mi.ReactCurrentBatchConfig,Wf=!0;function bM(e,t,n,r){var a=Kt,i=Jl.transition;Jl.transition=null;try{Kt=1,O0(e,t,n,r)}finally{Kt=a,Jl.transition=i}}function wM(e,t,n,r){var a=Kt,i=Jl.transition;Jl.transition=null;try{Kt=4,O0(e,t,n,r)}finally{Kt=a,Jl.transition=i}}function O0(e,t,n,r){if(Wf){var a=gv(e,t,n,r);if(a===null)Qg(e,t,r,Zf,n),x_(e,r);else if(vM(a,e,t,n,r))r.stopPropagation();else if(x_(e,r),t&4&&-1<xM.indexOf(e)){for(;a!==null;){var i=sh(a);if(i!==null&&Tk(i),i=gv(e,t,n,r),i===null&&Qg(e,t,r,Zf,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else Qg(e,t,r,null,n)}}var Zf=null;function gv(e,t,n,r){if(Zf=null,e=P0(r),e=Po(e),e!==null)if(t=cl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=jk(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zf=e,null}function Mk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lM()){case E0:return 1;case kk:return 4;case qf:case cM:return 16;case Ck:return 536870912;default:return 16}default:return 16}}var Mi=null,R0=null,bf=null;function Ik(){if(bf)return bf;var e,t=R0,n=t.length,r,a="value"in Mi?Mi.value:Mi.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return bf=a.slice(e,1<r?1-r:void 0)}function wf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wh(){return!0}function y_(){return!1}function or(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wh:y_,this.isPropagationStopped=y_,this}return ps(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wh)},persist:function(){},isPersistent:Wh}),t}var Uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L0=or(Uc),th=ps({},Uc,{view:0,detail:0}),jM=or(th),qg,Hg,Cd,Xm=ps({},th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:M0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cd&&(Cd&&e.type==="mousemove"?(qg=e.screenX-Cd.screenX,Hg=e.screenY-Cd.screenY):Hg=qg=0,Cd=e),qg)},movementY:function(e){return"movementY"in e?e.movementY:Hg}}),b_=or(Xm),_M=ps({},Xm,{dataTransfer:0}),NM=or(_M),SM=ps({},th,{relatedTarget:0}),Wg=or(SM),kM=ps({},Uc,{animationName:0,elapsedTime:0,pseudoElement:0}),CM=or(kM),PM=ps({},Uc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),EM=or(PM),TM=ps({},Uc,{data:0}),w_=or(TM),AM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RM[e])?!!t[e]:!1}function M0(){return LM}var MM=ps({},th,{key:function(e){if(e.key){var t=AM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?OM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:M0,charCode:function(e){return e.type==="keypress"?wf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),IM=or(MM),DM=ps({},Xm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j_=or(DM),FM=ps({},th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:M0}),$M=or(FM),zM=ps({},Uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),BM=or(zM),VM=ps({},Xm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),UM=or(VM),qM=[9,13,27,32],I0=si&&"CompositionEvent"in window,Xd=null;si&&"documentMode"in document&&(Xd=document.documentMode);var HM=si&&"TextEvent"in window&&!Xd,Dk=si&&(!I0||Xd&&8<Xd&&11>=Xd),__=" ",N_=!1;function Fk(e,t){switch(e){case"keyup":return qM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $k(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ol=!1;function WM(e,t){switch(e){case"compositionend":return $k(t);case"keypress":return t.which!==32?null:(N_=!0,__);case"textInput":return e=t.data,e===__&&N_?null:e;default:return null}}function ZM(e,t){if(Ol)return e==="compositionend"||!I0&&Fk(e,t)?(e=Ik(),bf=R0=Mi=null,Ol=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dk&&t.locale!=="ko"?null:t.data;default:return null}}var GM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!GM[e.type]:t==="textarea"}function zk(e,t,n,r){xk(r),t=Gf(t,"onChange"),0<t.length&&(n=new L0("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jd=null,wu=null;function KM(e){Xk(e,0)}function Jm(e){var t=Ml(e);if(dk(t))return e}function YM(e,t){if(e==="change")return t}var Bk=!1;if(si){var Zg;if(si){var Gg="oninput"in document;if(!Gg){var k_=document.createElement("div");k_.setAttribute("oninput","return;"),Gg=typeof k_.oninput=="function"}Zg=Gg}else Zg=!1;Bk=Zg&&(!document.documentMode||9<document.documentMode)}function C_(){Jd&&(Jd.detachEvent("onpropertychange",Vk),wu=Jd=null)}function Vk(e){if(e.propertyName==="value"&&Jm(wu)){var t=[];zk(t,wu,e,P0(e)),wk(KM,t)}}function XM(e,t,n){e==="focusin"?(C_(),Jd=t,wu=n,Jd.attachEvent("onpropertychange",Vk)):e==="focusout"&&C_()}function JM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jm(wu)}function QM(e,t){if(e==="click")return Jm(t)}function eI(e,t){if(e==="input"||e==="change")return Jm(t)}function tI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gr=typeof Object.is=="function"?Object.is:tI;function ju(e,t){if(Gr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Jx.call(t,a)||!Gr(e[a],t[a]))return!1}return!0}function P_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function E_(e,t){var n=P_(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=P_(n)}}function Uk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qk(){for(var e=window,t=Bf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bf(e.document)}return t}function D0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function sI(e){var t=qk(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Uk(n.ownerDocument.documentElement,n)){if(r!==null&&D0(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=E_(n,i);var o=E_(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nI=si&&"documentMode"in document&&11>=document.documentMode,Rl=null,xv=null,Qd=null,vv=!1;function T_(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vv||Rl==null||Rl!==Bf(r)||(r=Rl,"selectionStart"in r&&D0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qd&&ju(Qd,r)||(Qd=r,r=Gf(xv,"onSelect"),0<r.length&&(t=new L0("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Rl)))}function Zh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ll={animationend:Zh("Animation","AnimationEnd"),animationiteration:Zh("Animation","AnimationIteration"),animationstart:Zh("Animation","AnimationStart"),transitionend:Zh("Transition","TransitionEnd")},Kg={},Hk={};si&&(Hk=document.createElement("div").style,"AnimationEvent"in window||(delete Ll.animationend.animation,delete Ll.animationiteration.animation,delete Ll.animationstart.animation),"TransitionEvent"in window||delete Ll.transitionend.transition);function Qm(e){if(Kg[e])return Kg[e];if(!Ll[e])return e;var t=Ll[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Hk)return Kg[e]=t[n];return e}var Wk=Qm("animationend"),Zk=Qm("animationiteration"),Gk=Qm("animationstart"),Kk=Qm("transitionend"),Yk=new Map,A_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ro(e,t){Yk.set(e,t),ll(t,[e])}for(var Yg=0;Yg<A_.length;Yg++){var Xg=A_[Yg],rI=Xg.toLowerCase(),aI=Xg[0].toUpperCase()+Xg.slice(1);ro(rI,"on"+aI)}ro(Wk,"onAnimationEnd");ro(Zk,"onAnimationIteration");ro(Gk,"onAnimationStart");ro("dblclick","onDoubleClick");ro("focusin","onFocus");ro("focusout","onBlur");ro(Kk,"onTransitionEnd");vc("onMouseEnter",["mouseout","mouseover"]);vc("onMouseLeave",["mouseout","mouseover"]);vc("onPointerEnter",["pointerout","pointerover"]);vc("onPointerLeave",["pointerout","pointerover"]);ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ll("onBeforeInput",["compositionend","keypress","textInput","paste"]);ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iI=new Set("cancel close invalid load scroll toggle".split(" ").concat(qd));function O_(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,rM(r,t,void 0,e),e.currentTarget=null}function Xk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],d=c.instance,h=c.currentTarget;if(c=c.listener,d!==i&&a.isPropagationStopped())break e;O_(a,c,h),i=d}else for(o=0;o<r.length;o++){if(c=r[o],d=c.instance,h=c.currentTarget,c=c.listener,d!==i&&a.isPropagationStopped())break e;O_(a,c,h),i=d}}}if(Uf)throw e=fv,Uf=!1,fv=null,e}function ss(e,t){var n=t[_v];n===void 0&&(n=t[_v]=new Set);var r=e+"__bubble";n.has(r)||(Jk(t,e,2,!1),n.add(r))}function Jg(e,t,n){var r=0;t&&(r|=4),Jk(n,e,r,t)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function _u(e){if(!e[Gh]){e[Gh]=!0,ak.forEach(function(n){n!=="selectionchange"&&(iI.has(n)||Jg(n,!1,e),Jg(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gh]||(t[Gh]=!0,Jg("selectionchange",!1,t))}}function Jk(e,t,n,r){switch(Mk(t)){case 1:var a=bM;break;case 4:a=wM;break;default:a=O0}n=a.bind(null,t,n,e),a=void 0,!hv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Qg(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;c!==null;){if(o=Po(c),o===null)return;if(d=o.tag,d===5||d===6){r=i=o;continue e}c=c.parentNode}}r=r.return}wk(function(){var h=i,m=P0(n),u=[];e:{var f=Yk.get(e);if(f!==void 0){var p=L0,x=e;switch(e){case"keypress":if(wf(n)===0)break e;case"keydown":case"keyup":p=IM;break;case"focusin":x="focus",p=Wg;break;case"focusout":x="blur",p=Wg;break;case"beforeblur":case"afterblur":p=Wg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=b_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=NM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=$M;break;case Wk:case Zk:case Gk:p=CM;break;case Kk:p=BM;break;case"scroll":p=jM;break;case"wheel":p=UM;break;case"copy":case"cut":case"paste":p=EM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=j_}var v=(t&4)!==0,y=!v&&e==="scroll",w=v?f!==null?f+"Capture":null:f;v=[];for(var b=h,_;b!==null;){_=b;var N=_.stateNode;if(_.tag===5&&N!==null&&(_=N,w!==null&&(N=xu(b,w),N!=null&&v.push(Nu(b,N,_)))),y)break;b=b.return}0<v.length&&(f=new p(f,x,null,n,m),u.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==dv&&(x=n.relatedTarget||n.fromElement)&&(Po(x)||x[ni]))break e;if((p||f)&&(f=m.window===m?m:(f=m.ownerDocument)?f.defaultView||f.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=h,x=x?Po(x):null,x!==null&&(y=cl(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=h),p!==x)){if(v=b_,N="onMouseLeave",w="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=j_,N="onPointerLeave",w="onPointerEnter",b="pointer"),y=p==null?f:Ml(p),_=x==null?f:Ml(x),f=new v(N,b+"leave",p,n,m),f.target=y,f.relatedTarget=_,N=null,Po(m)===h&&(v=new v(w,b+"enter",x,n,m),v.target=_,v.relatedTarget=y,N=v),y=N,p&&x)t:{for(v=p,w=x,b=0,_=v;_;_=jl(_))b++;for(_=0,N=w;N;N=jl(N))_++;for(;0<b-_;)v=jl(v),b--;for(;0<_-b;)w=jl(w),_--;for(;b--;){if(v===w||w!==null&&v===w.alternate)break t;v=jl(v),w=jl(w)}v=null}else v=null;p!==null&&R_(u,f,p,v,!1),x!==null&&y!==null&&R_(u,y,x,v,!0)}}e:{if(f=h?Ml(h):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=YM;else if(S_(f))if(Bk)k=eI;else{k=JM;var E=XM}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=QM);if(k&&(k=k(e,h))){zk(u,k,n,m);break e}E&&E(e,f,h),e==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&av(f,"number",f.value)}switch(E=h?Ml(h):window,e){case"focusin":(S_(E)||E.contentEditable==="true")&&(Rl=E,xv=h,Qd=null);break;case"focusout":Qd=xv=Rl=null;break;case"mousedown":vv=!0;break;case"contextmenu":case"mouseup":case"dragend":vv=!1,T_(u,n,m);break;case"selectionchange":if(nI)break;case"keydown":case"keyup":T_(u,n,m)}var T;if(I0)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ol?Fk(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Dk&&n.locale!=="ko"&&(Ol||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ol&&(T=Ik()):(Mi=m,R0="value"in Mi?Mi.value:Mi.textContent,Ol=!0)),E=Gf(h,R),0<E.length&&(R=new w_(R,e,null,n,m),u.push({event:R,listeners:E}),T?R.data=T:(T=$k(n),T!==null&&(R.data=T)))),(T=HM?WM(e,n):ZM(e,n))&&(h=Gf(h,"onBeforeInput"),0<h.length&&(m=new w_("onBeforeInput","beforeinput",null,n,m),u.push({event:m,listeners:h}),m.data=T))}Xk(u,t)})}function Nu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gf(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=xu(e,n),i!=null&&r.unshift(Nu(e,i,a)),i=xu(e,t),i!=null&&r.push(Nu(e,i,a))),e=e.return}return r}function jl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function R_(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var c=n,d=c.alternate,h=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&h!==null&&(c=h,a?(d=xu(n,i),d!=null&&o.unshift(Nu(n,d,c))):a||(d=xu(n,i),d!=null&&o.push(Nu(n,d,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var oI=/\r\n?/g,lI=/\u0000|\uFFFD/g;function L_(e){return(typeof e=="string"?e:""+e).replace(oI,`
`).replace(lI,"")}function Kh(e,t,n){if(t=L_(t),L_(e)!==t&&n)throw Error(Me(425))}function Kf(){}var yv=null,bv=null;function wv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jv=typeof setTimeout=="function"?setTimeout:void 0,cI=typeof clearTimeout=="function"?clearTimeout:void 0,M_=typeof Promise=="function"?Promise:void 0,dI=typeof queueMicrotask=="function"?queueMicrotask:typeof M_<"u"?function(e){return M_.resolve(null).then(e).catch(uI)}:jv;function uI(e){setTimeout(function(){throw e})}function ex(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),bu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);bu(t)}function Bi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function I_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var qc=Math.random().toString(36).slice(2),fa="__reactFiber$"+qc,Su="__reactProps$"+qc,ni="__reactContainer$"+qc,_v="__reactEvents$"+qc,hI="__reactListeners$"+qc,fI="__reactHandles$"+qc;function Po(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ni]||n[fa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=I_(e);e!==null;){if(n=e[fa])return n;e=I_(e)}return t}e=n,n=e.parentNode}return null}function sh(e){return e=e[fa]||e[ni],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ml(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Me(33))}function ep(e){return e[Su]||null}var Nv=[],Il=-1;function ao(e){return{current:e}}function as(e){0>Il||(e.current=Nv[Il],Nv[Il]=null,Il--)}function Qt(e,t){Il++,Nv[Il]=e.current,e.current=t}var Ki={},pn=ao(Ki),Un=ao(!1),Ko=Ki;function yc(e,t){var n=e.type.contextTypes;if(!n)return Ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function qn(e){return e=e.childContextTypes,e!=null}function Yf(){as(Un),as(pn)}function D_(e,t,n){if(pn.current!==Ki)throw Error(Me(168));Qt(pn,t),Qt(Un,n)}function Qk(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Me(108,X3(e)||"Unknown",a));return ps({},n,r)}function Xf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ki,Ko=pn.current,Qt(pn,e),Qt(Un,Un.current),!0}function F_(e,t,n){var r=e.stateNode;if(!r)throw Error(Me(169));n?(e=Qk(e,t,Ko),r.__reactInternalMemoizedMergedChildContext=e,as(Un),as(pn),Qt(pn,e)):as(Un),Qt(Un,n)}var Ka=null,tp=!1,tx=!1;function eC(e){Ka===null?Ka=[e]:Ka.push(e)}function mI(e){tp=!0,eC(e)}function io(){if(!tx&&Ka!==null){tx=!0;var e=0,t=Kt;try{var n=Ka;for(Kt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ka=null,tp=!1}catch(a){throw Ka!==null&&(Ka=Ka.slice(e+1)),Sk(E0,io),a}finally{Kt=t,tx=!1}}return null}var Dl=[],Fl=0,Jf=null,Qf=0,pr=[],gr=0,Yo=null,Ja=1,Qa="";function wo(e,t){Dl[Fl++]=Qf,Dl[Fl++]=Jf,Jf=e,Qf=t}function tC(e,t,n){pr[gr++]=Ja,pr[gr++]=Qa,pr[gr++]=Yo,Yo=e;var r=Ja;e=Qa;var a=32-qr(r)-1;r&=~(1<<a),n+=1;var i=32-qr(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ja=1<<32-qr(t)+a|n<<a|r,Qa=i+e}else Ja=1<<i|n<<a|r,Qa=e}function F0(e){e.return!==null&&(wo(e,1),tC(e,1,0))}function $0(e){for(;e===Jf;)Jf=Dl[--Fl],Dl[Fl]=null,Qf=Dl[--Fl],Dl[Fl]=null;for(;e===Yo;)Yo=pr[--gr],pr[gr]=null,Qa=pr[--gr],pr[gr]=null,Ja=pr[--gr],pr[gr]=null}var nr=null,sr=null,ls=!1,Fr=null;function sC(e,t){var n=xr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function $_(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nr=e,sr=Bi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nr=e,sr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yo!==null?{id:Ja,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,nr=e,sr=null,!0):!1;default:return!1}}function Sv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function kv(e){if(ls){var t=sr;if(t){var n=t;if(!$_(e,t)){if(Sv(e))throw Error(Me(418));t=Bi(n.nextSibling);var r=nr;t&&$_(e,t)?sC(r,n):(e.flags=e.flags&-4097|2,ls=!1,nr=e)}}else{if(Sv(e))throw Error(Me(418));e.flags=e.flags&-4097|2,ls=!1,nr=e}}}function z_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nr=e}function Yh(e){if(e!==nr)return!1;if(!ls)return z_(e),ls=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wv(e.type,e.memoizedProps)),t&&(t=sr)){if(Sv(e))throw nC(),Error(Me(418));for(;t;)sC(e,t),t=Bi(t.nextSibling)}if(z_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Me(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){sr=Bi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}sr=null}}else sr=nr?Bi(e.stateNode.nextSibling):null;return!0}function nC(){for(var e=sr;e;)e=Bi(e.nextSibling)}function bc(){sr=nr=null,ls=!1}function z0(e){Fr===null?Fr=[e]:Fr.push(e)}var pI=mi.ReactCurrentBatchConfig;function Pd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Me(309));var r=n.stateNode}if(!r)throw Error(Me(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var c=a.refs;o===null?delete c[i]:c[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Me(284));if(!n._owner)throw Error(Me(290,e))}return e}function Xh(e,t){throw e=Object.prototype.toString.call(t),Error(Me(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function B_(e){var t=e._init;return t(e._payload)}function rC(e){function t(w,b){if(e){var _=w.deletions;_===null?(w.deletions=[b],w.flags|=16):_.push(b)}}function n(w,b){if(!e)return null;for(;b!==null;)t(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function a(w,b){return w=Hi(w,b),w.index=0,w.sibling=null,w}function i(w,b,_){return w.index=_,e?(_=w.alternate,_!==null?(_=_.index,_<b?(w.flags|=2,b):_):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function c(w,b,_,N){return b===null||b.tag!==6?(b=lx(_,w.mode,N),b.return=w,b):(b=a(b,_),b.return=w,b)}function d(w,b,_,N){var k=_.type;return k===Al?m(w,b,_.props.children,N,_.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Si&&B_(k)===b.type)?(N=a(b,_.props),N.ref=Pd(w,b,_),N.return=w,N):(N=Pf(_.type,_.key,_.props,null,w.mode,N),N.ref=Pd(w,b,_),N.return=w,N)}function h(w,b,_,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=cx(_,w.mode,N),b.return=w,b):(b=a(b,_.children||[]),b.return=w,b)}function m(w,b,_,N,k){return b===null||b.tag!==7?(b=Bo(_,w.mode,N,k),b.return=w,b):(b=a(b,_),b.return=w,b)}function u(w,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=lx(""+b,w.mode,_),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zh:return _=Pf(b.type,b.key,b.props,null,w.mode,_),_.ref=Pd(w,null,b),_.return=w,_;case Tl:return b=cx(b,w.mode,_),b.return=w,b;case Si:var N=b._init;return u(w,N(b._payload),_)}if(Vd(b)||_d(b))return b=Bo(b,w.mode,_,null),b.return=w,b;Xh(w,b)}return null}function f(w,b,_,N){var k=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:c(w,b,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zh:return _.key===k?d(w,b,_,N):null;case Tl:return _.key===k?h(w,b,_,N):null;case Si:return k=_._init,f(w,b,k(_._payload),N)}if(Vd(_)||_d(_))return k!==null?null:m(w,b,_,N,null);Xh(w,_)}return null}function p(w,b,_,N,k){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(_)||null,c(b,w,""+N,k);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case zh:return w=w.get(N.key===null?_:N.key)||null,d(b,w,N,k);case Tl:return w=w.get(N.key===null?_:N.key)||null,h(b,w,N,k);case Si:var E=N._init;return p(w,b,_,E(N._payload),k)}if(Vd(N)||_d(N))return w=w.get(_)||null,m(b,w,N,k,null);Xh(b,N)}return null}function x(w,b,_,N){for(var k=null,E=null,T=b,R=b=0,$=null;T!==null&&R<_.length;R++){T.index>R?($=T,T=null):$=T.sibling;var M=f(w,T,_[R],N);if(M===null){T===null&&(T=$);break}e&&T&&M.alternate===null&&t(w,T),b=i(M,b,R),E===null?k=M:E.sibling=M,E=M,T=$}if(R===_.length)return n(w,T),ls&&wo(w,R),k;if(T===null){for(;R<_.length;R++)T=u(w,_[R],N),T!==null&&(b=i(T,b,R),E===null?k=T:E.sibling=T,E=T);return ls&&wo(w,R),k}for(T=r(w,T);R<_.length;R++)$=p(T,w,R,_[R],N),$!==null&&(e&&$.alternate!==null&&T.delete($.key===null?R:$.key),b=i($,b,R),E===null?k=$:E.sibling=$,E=$);return e&&T.forEach(function(A){return t(w,A)}),ls&&wo(w,R),k}function v(w,b,_,N){var k=_d(_);if(typeof k!="function")throw Error(Me(150));if(_=k.call(_),_==null)throw Error(Me(151));for(var E=k=null,T=b,R=b=0,$=null,M=_.next();T!==null&&!M.done;R++,M=_.next()){T.index>R?($=T,T=null):$=T.sibling;var A=f(w,T,M.value,N);if(A===null){T===null&&(T=$);break}e&&T&&A.alternate===null&&t(w,T),b=i(A,b,R),E===null?k=A:E.sibling=A,E=A,T=$}if(M.done)return n(w,T),ls&&wo(w,R),k;if(T===null){for(;!M.done;R++,M=_.next())M=u(w,M.value,N),M!==null&&(b=i(M,b,R),E===null?k=M:E.sibling=M,E=M);return ls&&wo(w,R),k}for(T=r(w,T);!M.done;R++,M=_.next())M=p(T,w,R,M.value,N),M!==null&&(e&&M.alternate!==null&&T.delete(M.key===null?R:M.key),b=i(M,b,R),E===null?k=M:E.sibling=M,E=M);return e&&T.forEach(function(C){return t(w,C)}),ls&&wo(w,R),k}function y(w,b,_,N){if(typeof _=="object"&&_!==null&&_.type===Al&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case zh:e:{for(var k=_.key,E=b;E!==null;){if(E.key===k){if(k=_.type,k===Al){if(E.tag===7){n(w,E.sibling),b=a(E,_.props.children),b.return=w,w=b;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Si&&B_(k)===E.type){n(w,E.sibling),b=a(E,_.props),b.ref=Pd(w,E,_),b.return=w,w=b;break e}n(w,E);break}else t(w,E);E=E.sibling}_.type===Al?(b=Bo(_.props.children,w.mode,N,_.key),b.return=w,w=b):(N=Pf(_.type,_.key,_.props,null,w.mode,N),N.ref=Pd(w,b,_),N.return=w,w=N)}return o(w);case Tl:e:{for(E=_.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(w,b.sibling),b=a(b,_.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else t(w,b);b=b.sibling}b=cx(_,w.mode,N),b.return=w,w=b}return o(w);case Si:return E=_._init,y(w,b,E(_._payload),N)}if(Vd(_))return x(w,b,_,N);if(_d(_))return v(w,b,_,N);Xh(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(n(w,b.sibling),b=a(b,_),b.return=w,w=b):(n(w,b),b=lx(_,w.mode,N),b.return=w,w=b),o(w)):n(w,b)}return y}var wc=rC(!0),aC=rC(!1),em=ao(null),tm=null,$l=null,B0=null;function V0(){B0=$l=tm=null}function U0(e){var t=em.current;as(em),e._currentValue=t}function Cv(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ql(e,t){tm=e,B0=$l=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($n=!0),e.firstContext=null)}function jr(e){var t=e._currentValue;if(B0!==e)if(e={context:e,memoizedValue:t,next:null},$l===null){if(tm===null)throw Error(Me(308));$l=e,tm.dependencies={lanes:0,firstContext:e}}else $l=$l.next=e;return t}var Eo=null;function q0(e){Eo===null?Eo=[e]:Eo.push(e)}function iC(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,q0(t)):(n.next=a.next,a.next=n),t.interleaved=n,ri(e,r)}function ri(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ki=!1;function H0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ti(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,It&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,ri(e,n)}return a=r.interleaved,a===null?(t.next=t,q0(r)):(t.next=a.next,a.next=t),r.interleaved=t,ri(e,n)}function jf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,T0(e,n)}}function V_(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sm(e,t,n,r){var a=e.updateQueue;ki=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var d=c,h=d.next;d.next=null,o===null?i=h:o.next=h,o=d;var m=e.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=d))}if(i!==null){var u=a.baseState;o=0,m=h=d=null,c=i;do{var f=c.lane,p=c.eventTime;if((r&f)===f){m!==null&&(m=m.next={eventTime:p,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var x=e,v=c;switch(f=t,p=n,v.tag){case 1:if(x=v.payload,typeof x=="function"){u=x.call(p,u,f);break e}u=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,f=typeof x=="function"?x.call(p,u,f):x,f==null)break e;u=ps({},u,f);break e;case 2:ki=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[c]:f.push(c))}else p={eventTime:p,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(h=m=p,d=u):m=m.next=p,o|=f;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;f=c,c=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(m===null&&(d=u),a.baseState=d,a.firstBaseUpdate=h,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Jo|=o,e.lanes=o,e.memoizedState=u}}function U_(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Me(191,a));a.call(r)}}}var nh={},wa=ao(nh),ku=ao(nh),Cu=ao(nh);function To(e){if(e===nh)throw Error(Me(174));return e}function W0(e,t){switch(Qt(Cu,t),Qt(ku,e),Qt(wa,nh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ov(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ov(t,e)}as(wa),Qt(wa,t)}function jc(){as(wa),as(ku),as(Cu)}function lC(e){To(Cu.current);var t=To(wa.current),n=ov(t,e.type);t!==n&&(Qt(ku,e),Qt(wa,n))}function Z0(e){ku.current===e&&(as(wa),as(ku))}var hs=ao(0);function nm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sx=[];function G0(){for(var e=0;e<sx.length;e++)sx[e]._workInProgressVersionPrimary=null;sx.length=0}var _f=mi.ReactCurrentDispatcher,nx=mi.ReactCurrentBatchConfig,Xo=0,ms=null,Vs=null,Ks=null,rm=!1,eu=!1,Pu=0,gI=0;function cn(){throw Error(Me(321))}function K0(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gr(e[n],t[n]))return!1;return!0}function Y0(e,t,n,r,a,i){if(Xo=i,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_f.current=e===null||e.memoizedState===null?bI:wI,e=n(r,a),eu){i=0;do{if(eu=!1,Pu=0,25<=i)throw Error(Me(301));i+=1,Ks=Vs=null,t.updateQueue=null,_f.current=jI,e=n(r,a)}while(eu)}if(_f.current=am,t=Vs!==null&&Vs.next!==null,Xo=0,Ks=Vs=ms=null,rm=!1,t)throw Error(Me(300));return e}function X0(){var e=Pu!==0;return Pu=0,e}function ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ks===null?ms.memoizedState=Ks=e:Ks=Ks.next=e,Ks}function _r(){if(Vs===null){var e=ms.alternate;e=e!==null?e.memoizedState:null}else e=Vs.next;var t=Ks===null?ms.memoizedState:Ks.next;if(t!==null)Ks=t,Vs=e;else{if(e===null)throw Error(Me(310));Vs=e,e={memoizedState:Vs.memoizedState,baseState:Vs.baseState,baseQueue:Vs.baseQueue,queue:Vs.queue,next:null},Ks===null?ms.memoizedState=Ks=e:Ks=Ks.next=e}return Ks}function Eu(e,t){return typeof t=="function"?t(e):t}function rx(e){var t=_r(),n=t.queue;if(n===null)throw Error(Me(311));n.lastRenderedReducer=e;var r=Vs,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var c=o=null,d=null,h=i;do{var m=h.lane;if((Xo&m)===m)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var u={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(c=d=u,o=r):d=d.next=u,ms.lanes|=m,Jo|=m}h=h.next}while(h!==null&&h!==i);d===null?o=r:d.next=c,Gr(r,t.memoizedState)||($n=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,ms.lanes|=i,Jo|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ax(e){var t=_r(),n=t.queue;if(n===null)throw Error(Me(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Gr(i,t.memoizedState)||($n=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function cC(){}function dC(e,t){var n=ms,r=_r(),a=t(),i=!Gr(r.memoizedState,a);if(i&&(r.memoizedState=a,$n=!0),r=r.queue,J0(fC.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ks!==null&&Ks.memoizedState.tag&1){if(n.flags|=2048,Tu(9,hC.bind(null,n,r,a,t),void 0,null),Xs===null)throw Error(Me(349));Xo&30||uC(n,t,a)}return a}function uC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ms.updateQueue,t===null?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function hC(e,t,n,r){t.value=n,t.getSnapshot=r,mC(t)&&pC(e)}function fC(e,t,n){return n(function(){mC(t)&&pC(e)})}function mC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gr(e,n)}catch{return!0}}function pC(e){var t=ri(e,1);t!==null&&Hr(t,e,1,-1)}function q_(e){var t=ca();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eu,lastRenderedState:e},t.queue=e,e=e.dispatch=yI.bind(null,ms,e),[t.memoizedState,e]}function Tu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ms.updateQueue,t===null?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function gC(){return _r().memoizedState}function Nf(e,t,n,r){var a=ca();ms.flags|=e,a.memoizedState=Tu(1|t,n,void 0,r===void 0?null:r)}function sp(e,t,n,r){var a=_r();r=r===void 0?null:r;var i=void 0;if(Vs!==null){var o=Vs.memoizedState;if(i=o.destroy,r!==null&&K0(r,o.deps)){a.memoizedState=Tu(t,n,i,r);return}}ms.flags|=e,a.memoizedState=Tu(1|t,n,i,r)}function H_(e,t){return Nf(8390656,8,e,t)}function J0(e,t){return sp(2048,8,e,t)}function xC(e,t){return sp(4,2,e,t)}function vC(e,t){return sp(4,4,e,t)}function yC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bC(e,t,n){return n=n!=null?n.concat([e]):null,sp(4,4,yC.bind(null,t,e),n)}function Q0(){}function wC(e,t){var n=_r();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&K0(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jC(e,t){var n=_r();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&K0(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _C(e,t,n){return Xo&21?(Gr(n,t)||(n=Pk(),ms.lanes|=n,Jo|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$n=!0),e.memoizedState=n)}function xI(e,t){var n=Kt;Kt=n!==0&&4>n?n:4,e(!0);var r=nx.transition;nx.transition={};try{e(!1),t()}finally{Kt=n,nx.transition=r}}function NC(){return _r().memoizedState}function vI(e,t,n){var r=qi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},SC(e))kC(t,n);else if(n=iC(e,t,n,r),n!==null){var a=En();Hr(n,e,r,a),CC(n,t,r)}}function yI(e,t,n){var r=qi(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(SC(e))kC(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,c=i(o,n);if(a.hasEagerState=!0,a.eagerState=c,Gr(c,o)){var d=t.interleaved;d===null?(a.next=a,q0(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}n=iC(e,t,a,r),n!==null&&(a=En(),Hr(n,e,r,a),CC(n,t,r))}}function SC(e){var t=e.alternate;return e===ms||t!==null&&t===ms}function kC(e,t){eu=rm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function CC(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,T0(e,n)}}var am={readContext:jr,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},bI={readContext:jr,useCallback:function(e,t){return ca().memoizedState=[e,t===void 0?null:t],e},useContext:jr,useEffect:H_,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Nf(4194308,4,yC.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Nf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Nf(4,2,e,t)},useMemo:function(e,t){var n=ca();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ca();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vI.bind(null,ms,e),[r.memoizedState,e]},useRef:function(e){var t=ca();return e={current:e},t.memoizedState=e},useState:q_,useDebugValue:Q0,useDeferredValue:function(e){return ca().memoizedState=e},useTransition:function(){var e=q_(!1),t=e[0];return e=xI.bind(null,e[1]),ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ms,a=ca();if(ls){if(n===void 0)throw Error(Me(407));n=n()}else{if(n=t(),Xs===null)throw Error(Me(349));Xo&30||uC(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,H_(fC.bind(null,r,i,e),[e]),r.flags|=2048,Tu(9,hC.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=ca(),t=Xs.identifierPrefix;if(ls){var n=Qa,r=Ja;n=(r&~(1<<32-qr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Pu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gI++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wI={readContext:jr,useCallback:wC,useContext:jr,useEffect:J0,useImperativeHandle:bC,useInsertionEffect:xC,useLayoutEffect:vC,useMemo:jC,useReducer:rx,useRef:gC,useState:function(){return rx(Eu)},useDebugValue:Q0,useDeferredValue:function(e){var t=_r();return _C(t,Vs.memoizedState,e)},useTransition:function(){var e=rx(Eu)[0],t=_r().memoizedState;return[e,t]},useMutableSource:cC,useSyncExternalStore:dC,useId:NC,unstable_isNewReconciler:!1},jI={readContext:jr,useCallback:wC,useContext:jr,useEffect:J0,useImperativeHandle:bC,useInsertionEffect:xC,useLayoutEffect:vC,useMemo:jC,useReducer:ax,useRef:gC,useState:function(){return ax(Eu)},useDebugValue:Q0,useDeferredValue:function(e){var t=_r();return Vs===null?t.memoizedState=e:_C(t,Vs.memoizedState,e)},useTransition:function(){var e=ax(Eu)[0],t=_r().memoizedState;return[e,t]},useMutableSource:cC,useSyncExternalStore:dC,useId:NC,unstable_isNewReconciler:!1};function Rr(e,t){if(e&&e.defaultProps){t=ps({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Pv(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ps({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var np={isMounted:function(e){return(e=e._reactInternals)?cl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=En(),a=qi(e),i=ti(r,a);i.payload=t,n!=null&&(i.callback=n),t=Vi(e,i,a),t!==null&&(Hr(t,e,a,r),jf(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=En(),a=qi(e),i=ti(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Vi(e,i,a),t!==null&&(Hr(t,e,a,r),jf(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=En(),r=qi(e),a=ti(n,r);a.tag=2,t!=null&&(a.callback=t),t=Vi(e,a,r),t!==null&&(Hr(t,e,r,n),jf(t,e,r))}};function W_(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!ju(n,r)||!ju(a,i):!0}function PC(e,t,n){var r=!1,a=Ki,i=t.contextType;return typeof i=="object"&&i!==null?i=jr(i):(a=qn(t)?Ko:pn.current,r=t.contextTypes,i=(r=r!=null)?yc(e,a):Ki),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=np,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Z_(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&np.enqueueReplaceState(t,t.state,null)}function Ev(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},H0(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=jr(i):(i=qn(t)?Ko:pn.current,a.context=yc(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Pv(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&np.enqueueReplaceState(a,a.state,null),sm(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function _c(e,t){try{var n="",r=t;do n+=Y3(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function ix(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Tv(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var _I=typeof WeakMap=="function"?WeakMap:Map;function EC(e,t,n){n=ti(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){om||(om=!0,zv=r),Tv(e,t)},n}function TC(e,t,n){n=ti(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Tv(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Tv(e,t),typeof r!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function G_(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new _I;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=DI.bind(null,e,t,n),t.then(e,e))}function K_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Y_(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ti(-1,1),t.tag=2,Vi(n,t,1))),n.lanes|=1),e)}var NI=mi.ReactCurrentOwner,$n=!1;function wn(e,t,n,r){t.child=e===null?aC(t,null,n,r):wc(t,e.child,n,r)}function X_(e,t,n,r,a){n=n.render;var i=t.ref;return Ql(t,a),r=Y0(e,t,n,r,i,a),n=X0(),e!==null&&!$n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ai(e,t,a)):(ls&&n&&F0(t),t.flags|=1,wn(e,t,r,a),t.child)}function J_(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!ob(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,AC(e,t,i,r,a)):(e=Pf(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ju,n(o,r)&&e.ref===t.ref)return ai(e,t,a)}return t.flags|=1,e=Hi(i,r),e.ref=t.ref,e.return=t,t.child=e}function AC(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(ju(i,r)&&e.ref===t.ref)if($n=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&($n=!0);else return t.lanes=e.lanes,ai(e,t,a)}return Av(e,t,n,r,a)}function OC(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Bl,Jn),Jn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Qt(Bl,Jn),Jn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Qt(Bl,Jn),Jn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Qt(Bl,Jn),Jn|=r;return wn(e,t,a,n),t.child}function RC(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Av(e,t,n,r,a){var i=qn(n)?Ko:pn.current;return i=yc(t,i),Ql(t,a),n=Y0(e,t,n,r,i,a),r=X0(),e!==null&&!$n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ai(e,t,a)):(ls&&r&&F0(t),t.flags|=1,wn(e,t,n,a),t.child)}function Q_(e,t,n,r,a){if(qn(n)){var i=!0;Xf(t)}else i=!1;if(Ql(t,a),t.stateNode===null)Sf(e,t),PC(t,n,r),Ev(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=jr(h):(h=qn(n)?Ko:pn.current,h=yc(t,h));var m=n.getDerivedStateFromProps,u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||d!==h)&&Z_(t,o,r,h),ki=!1;var f=t.memoizedState;o.state=f,sm(t,r,o,a),d=t.memoizedState,c!==r||f!==d||Un.current||ki?(typeof m=="function"&&(Pv(t,n,m,r),d=t.memoizedState),(c=ki||W_(t,n,c,r,f,d,h))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=h,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,oC(e,t),c=t.memoizedProps,h=t.type===t.elementType?c:Rr(t.type,c),o.props=h,u=t.pendingProps,f=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=jr(d):(d=qn(n)?Ko:pn.current,d=yc(t,d));var p=n.getDerivedStateFromProps;(m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==u||f!==d)&&Z_(t,o,r,d),ki=!1,f=t.memoizedState,o.state=f,sm(t,r,o,a);var x=t.memoizedState;c!==u||f!==x||Un.current||ki?(typeof p=="function"&&(Pv(t,n,p,r),x=t.memoizedState),(h=ki||W_(t,n,h,r,f,x,d)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=d,r=h):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ov(e,t,n,r,i,a)}function Ov(e,t,n,r,a,i){RC(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&F_(t,n,!1),ai(e,t,i);r=t.stateNode,NI.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=wc(t,e.child,null,i),t.child=wc(t,null,c,i)):wn(e,t,c,i),t.memoizedState=r.state,a&&F_(t,n,!0),t.child}function LC(e){var t=e.stateNode;t.pendingContext?D_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&D_(e,t.context,!1),W0(e,t.containerInfo)}function eN(e,t,n,r,a){return bc(),z0(a),t.flags|=256,wn(e,t,n,r),t.child}var Rv={dehydrated:null,treeContext:null,retryLane:0};function Lv(e){return{baseLanes:e,cachePool:null,transitions:null}}function MC(e,t,n){var r=t.pendingProps,a=hs.current,i=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Qt(hs,a&1),e===null)return kv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ip(o,r,0,null),e=Bo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Lv(n),t.memoizedState=Rv,e):eb(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return SI(e,t,o,r,c,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,c=a.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Hi(a,d),r.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=Hi(c,i):(i=Bo(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Lv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Rv,r}return i=e.child,e=i.sibling,r=Hi(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function eb(e,t){return t=ip({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jh(e,t,n,r){return r!==null&&z0(r),wc(t,e.child,null,n),e=eb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function SI(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=ix(Error(Me(422))),Jh(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=ip({mode:"visible",children:r.children},a,0,null),i=Bo(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&wc(t,e.child,null,o),t.child.memoizedState=Lv(o),t.memoizedState=Rv,i);if(!(t.mode&1))return Jh(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(Me(419)),r=ix(i,r,void 0),Jh(e,t,o,r)}if(c=(o&e.childLanes)!==0,$n||c){if(r=Xs,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ri(e,a),Hr(r,e,a,-1))}return ib(),r=ix(Error(Me(421))),Jh(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=FI.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,sr=Bi(a.nextSibling),nr=t,ls=!0,Fr=null,e!==null&&(pr[gr++]=Ja,pr[gr++]=Qa,pr[gr++]=Yo,Ja=e.id,Qa=e.overflow,Yo=t),t=eb(t,r.children),t.flags|=4096,t)}function tN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Cv(e.return,t,n)}function ox(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function IC(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(wn(e,t,r.children,n),r=hs.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tN(e,n,t);else if(e.tag===19)tN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Qt(hs,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&nm(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),ox(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&nm(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}ox(t,!0,n,null,i);break;case"together":ox(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ai(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jo|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Me(153));if(t.child!==null){for(e=t.child,n=Hi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function kI(e,t,n){switch(t.tag){case 3:LC(t),bc();break;case 5:lC(t);break;case 1:qn(t.type)&&Xf(t);break;case 4:W0(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Qt(em,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Qt(hs,hs.current&1),t.flags|=128,null):n&t.child.childLanes?MC(e,t,n):(Qt(hs,hs.current&1),e=ai(e,t,n),e!==null?e.sibling:null);Qt(hs,hs.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return IC(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Qt(hs,hs.current),r)break;return null;case 22:case 23:return t.lanes=0,OC(e,t,n)}return ai(e,t,n)}var DC,Mv,FC,$C;DC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mv=function(){};FC=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,To(wa.current);var i=null;switch(n){case"input":a=nv(e,a),r=nv(e,r),i=[];break;case"select":a=ps({},a,{value:void 0}),r=ps({},r,{value:void 0}),i=[];break;case"textarea":a=iv(e,a),r=iv(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Kf)}lv(n,r);var o;n=null;for(h in a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var c=a[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(pu.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var d=r[h];if(c=a!=null?a[h]:void 0,r.hasOwnProperty(h)&&d!==c&&(d!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(i||(i=[]),i.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(i=i||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(pu.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&ss("scroll",e),i||c===d||(i=[])):(i=i||[]).push(h,d))}n&&(i=i||[]).push("style",n);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};$C=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ed(e,t){if(!ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function CI(e,t,n){var r=t.pendingProps;switch($0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(t),null;case 1:return qn(t.type)&&Yf(),dn(t),null;case 3:return r=t.stateNode,jc(),as(Un),as(pn),G0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Yh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fr!==null&&(Uv(Fr),Fr=null))),Mv(e,t),dn(t),null;case 5:Z0(t);var a=To(Cu.current);if(n=t.type,e!==null&&t.stateNode!=null)FC(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Me(166));return dn(t),null}if(e=To(wa.current),Yh(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[fa]=t,r[Su]=i,e=(t.mode&1)!==0,n){case"dialog":ss("cancel",r),ss("close",r);break;case"iframe":case"object":case"embed":ss("load",r);break;case"video":case"audio":for(a=0;a<qd.length;a++)ss(qd[a],r);break;case"source":ss("error",r);break;case"img":case"image":case"link":ss("error",r),ss("load",r);break;case"details":ss("toggle",r);break;case"input":d_(r,i),ss("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ss("invalid",r);break;case"textarea":h_(r,i),ss("invalid",r)}lv(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Kh(r.textContent,c,e),a=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Kh(r.textContent,c,e),a=["children",""+c]):pu.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ss("scroll",r)}switch(n){case"input":Bh(r),u_(r,i,!0);break;case"textarea":Bh(r),f_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Kf)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fk(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[fa]=t,e[Su]=r,DC(e,t,!1,!1),t.stateNode=e;e:{switch(o=cv(n,r),n){case"dialog":ss("cancel",e),ss("close",e),a=r;break;case"iframe":case"object":case"embed":ss("load",e),a=r;break;case"video":case"audio":for(a=0;a<qd.length;a++)ss(qd[a],e);a=r;break;case"source":ss("error",e),a=r;break;case"img":case"image":case"link":ss("error",e),ss("load",e),a=r;break;case"details":ss("toggle",e),a=r;break;case"input":d_(e,r),a=nv(e,r),ss("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=ps({},r,{value:void 0}),ss("invalid",e);break;case"textarea":h_(e,r),a=iv(e,r),ss("invalid",e);break;default:a=r}lv(n,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var d=c[i];i==="style"?gk(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&mk(e,d)):i==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&gu(e,d):typeof d=="number"&&gu(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pu.hasOwnProperty(i)?d!=null&&i==="onScroll"&&ss("scroll",e):d!=null&&N0(e,i,d,o))}switch(n){case"input":Bh(e),u_(e,r,!1);break;case"textarea":Bh(e),f_(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Gi(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Kl(e,!!r.multiple,i,!1):r.defaultValue!=null&&Kl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Kf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dn(t),null;case 6:if(e&&t.stateNode!=null)$C(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Me(166));if(n=To(Cu.current),To(wa.current),Yh(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(i=r.nodeValue!==n)&&(e=nr,e!==null))switch(e.tag){case 3:Kh(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Kh(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fa]=t,t.stateNode=r}return dn(t),null;case 13:if(as(hs),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ls&&sr!==null&&t.mode&1&&!(t.flags&128))nC(),bc(),t.flags|=98560,i=!1;else if(i=Yh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Me(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Me(317));i[fa]=t}else bc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dn(t),i=!1}else Fr!==null&&(Uv(Fr),Fr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||hs.current&1?qs===0&&(qs=3):ib())),t.updateQueue!==null&&(t.flags|=4),dn(t),null);case 4:return jc(),Mv(e,t),e===null&&_u(t.stateNode.containerInfo),dn(t),null;case 10:return U0(t.type._context),dn(t),null;case 17:return qn(t.type)&&Yf(),dn(t),null;case 19:if(as(hs),i=t.memoizedState,i===null)return dn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Ed(i,!1);else{if(qs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=nm(e),o!==null){for(t.flags|=128,Ed(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Qt(hs,hs.current&1|2),t.child}e=e.sibling}i.tail!==null&&Cs()>Nc&&(t.flags|=128,r=!0,Ed(i,!1),t.lanes=4194304)}else{if(!r)if(e=nm(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ed(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ls)return dn(t),null}else 2*Cs()-i.renderingStartTime>Nc&&n!==1073741824&&(t.flags|=128,r=!0,Ed(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Cs(),t.sibling=null,n=hs.current,Qt(hs,r?n&1|2:n&1),t):(dn(t),null);case 22:case 23:return ab(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Jn&1073741824&&(dn(t),t.subtreeFlags&6&&(t.flags|=8192)):dn(t),null;case 24:return null;case 25:return null}throw Error(Me(156,t.tag))}function PI(e,t){switch($0(t),t.tag){case 1:return qn(t.type)&&Yf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jc(),as(Un),as(pn),G0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Z0(t),null;case 13:if(as(hs),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Me(340));bc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return as(hs),null;case 4:return jc(),null;case 10:return U0(t.type._context),null;case 22:case 23:return ab(),null;case 24:return null;default:return null}}var Qh=!1,hn=!1,EI=typeof WeakSet=="function"?WeakSet:Set,Je=null;function zl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bs(e,t,r)}else n.current=null}function Iv(e,t,n){try{n()}catch(r){bs(e,t,r)}}var sN=!1;function TI(e,t){if(yv=Wf,e=qk(),D0(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,d=-1,h=0,m=0,u=e,f=null;t:for(;;){for(var p;u!==n||a!==0&&u.nodeType!==3||(c=o+a),u!==i||r!==0&&u.nodeType!==3||(d=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(p=u.firstChild)!==null;)f=u,u=p;for(;;){if(u===e)break t;if(f===n&&++h===a&&(c=o),f===i&&++m===r&&(d=o),(p=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=p}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(bv={focusedElem:e,selectionRange:n},Wf=!1,Je=t;Je!==null;)if(t=Je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Je=e;else for(;Je!==null;){t=Je;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,y=x.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?v:Rr(t.type,v),y);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Me(163))}}catch(N){bs(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Je=e;break}Je=t.return}return x=sN,sN=!1,x}function tu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Iv(t,n,i)}a=a.next}while(a!==r)}}function rp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Dv(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zC(e){var t=e.alternate;t!==null&&(e.alternate=null,zC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fa],delete t[Su],delete t[_v],delete t[hI],delete t[fI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function BC(e){return e.tag===5||e.tag===3||e.tag===4}function nN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||BC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fv(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Kf));else if(r!==4&&(e=e.child,e!==null))for(Fv(e,t,n),e=e.sibling;e!==null;)Fv(e,t,n),e=e.sibling}function $v(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($v(e,t,n),e=e.sibling;e!==null;)$v(e,t,n),e=e.sibling}var Qs=null,Dr=!1;function vi(e,t,n){for(n=n.child;n!==null;)VC(e,t,n),n=n.sibling}function VC(e,t,n){if(ba&&typeof ba.onCommitFiberUnmount=="function")try{ba.onCommitFiberUnmount(Ym,n)}catch{}switch(n.tag){case 5:hn||zl(n,t);case 6:var r=Qs,a=Dr;Qs=null,vi(e,t,n),Qs=r,Dr=a,Qs!==null&&(Dr?(e=Qs,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qs.removeChild(n.stateNode));break;case 18:Qs!==null&&(Dr?(e=Qs,n=n.stateNode,e.nodeType===8?ex(e.parentNode,n):e.nodeType===1&&ex(e,n),bu(e)):ex(Qs,n.stateNode));break;case 4:r=Qs,a=Dr,Qs=n.stateNode.containerInfo,Dr=!0,vi(e,t,n),Qs=r,Dr=a;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Iv(n,t,o),a=a.next}while(a!==r)}vi(e,t,n);break;case 1:if(!hn&&(zl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){bs(n,t,c)}vi(e,t,n);break;case 21:vi(e,t,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,vi(e,t,n),hn=r):vi(e,t,n);break;default:vi(e,t,n)}}function rN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new EI),t.forEach(function(r){var a=$I.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Er(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Qs=c.stateNode,Dr=!1;break e;case 3:Qs=c.stateNode.containerInfo,Dr=!0;break e;case 4:Qs=c.stateNode.containerInfo,Dr=!0;break e}c=c.return}if(Qs===null)throw Error(Me(160));VC(i,o,a),Qs=null,Dr=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(h){bs(a,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)UC(t,e),t=t.sibling}function UC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Er(t,e),aa(e),r&4){try{tu(3,e,e.return),rp(3,e)}catch(v){bs(e,e.return,v)}try{tu(5,e,e.return)}catch(v){bs(e,e.return,v)}}break;case 1:Er(t,e),aa(e),r&512&&n!==null&&zl(n,n.return);break;case 5:if(Er(t,e),aa(e),r&512&&n!==null&&zl(n,n.return),e.flags&32){var a=e.stateNode;try{gu(a,"")}catch(v){bs(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&uk(a,i),cv(c,o);var h=cv(c,i);for(o=0;o<d.length;o+=2){var m=d[o],u=d[o+1];m==="style"?gk(a,u):m==="dangerouslySetInnerHTML"?mk(a,u):m==="children"?gu(a,u):N0(a,m,u,h)}switch(c){case"input":rv(a,i);break;case"textarea":hk(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Kl(a,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Kl(a,!!i.multiple,i.defaultValue,!0):Kl(a,!!i.multiple,i.multiple?[]:"",!1))}a[Su]=i}catch(v){bs(e,e.return,v)}}break;case 6:if(Er(t,e),aa(e),r&4){if(e.stateNode===null)throw Error(Me(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){bs(e,e.return,v)}}break;case 3:if(Er(t,e),aa(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bu(t.containerInfo)}catch(v){bs(e,e.return,v)}break;case 4:Er(t,e),aa(e);break;case 13:Er(t,e),aa(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(nb=Cs())),r&4&&rN(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(hn=(h=hn)||m,Er(t,e),hn=h):Er(t,e),aa(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!m&&e.mode&1)for(Je=e,m=e.child;m!==null;){for(u=Je=m;Je!==null;){switch(f=Je,p=f.child,f.tag){case 0:case 11:case 14:case 15:tu(4,f,f.return);break;case 1:zl(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(v){bs(r,n,v)}}break;case 5:zl(f,f.return);break;case 22:if(f.memoizedState!==null){iN(u);continue}}p!==null?(p.return=f,Je=p):iN(u)}m=m.sibling}e:for(m=null,u=e;;){if(u.tag===5){if(m===null){m=u;try{a=u.stateNode,h?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=u.stateNode,d=u.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=pk("display",o))}catch(v){bs(e,e.return,v)}}}else if(u.tag===6){if(m===null)try{u.stateNode.nodeValue=h?"":u.memoizedProps}catch(v){bs(e,e.return,v)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Er(t,e),aa(e),r&4&&rN(e);break;case 21:break;default:Er(t,e),aa(e)}}function aa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(BC(n)){var r=n;break e}n=n.return}throw Error(Me(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(gu(a,""),r.flags&=-33);var i=nN(e);$v(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,c=nN(e);Fv(e,c,o);break;default:throw Error(Me(161))}}catch(d){bs(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function AI(e,t,n){Je=e,qC(e)}function qC(e,t,n){for(var r=(e.mode&1)!==0;Je!==null;){var a=Je,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Qh;if(!o){var c=a.alternate,d=c!==null&&c.memoizedState!==null||hn;c=Qh;var h=hn;if(Qh=o,(hn=d)&&!h)for(Je=a;Je!==null;)o=Je,d=o.child,o.tag===22&&o.memoizedState!==null?oN(a):d!==null?(d.return=o,Je=d):oN(a);for(;i!==null;)Je=i,qC(i),i=i.sibling;Je=a,Qh=c,hn=h}aN(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Je=i):aN(e)}}function aN(e){for(;Je!==null;){var t=Je;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hn||rp(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!hn)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Rr(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&U_(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}U_(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var u=m.dehydrated;u!==null&&bu(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Me(163))}hn||t.flags&512&&Dv(t)}catch(f){bs(t,t.return,f)}}if(t===e){Je=null;break}if(n=t.sibling,n!==null){n.return=t.return,Je=n;break}Je=t.return}}function iN(e){for(;Je!==null;){var t=Je;if(t===e){Je=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Je=n;break}Je=t.return}}function oN(e){for(;Je!==null;){var t=Je;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rp(4,t)}catch(d){bs(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(d){bs(t,a,d)}}var i=t.return;try{Dv(t)}catch(d){bs(t,i,d)}break;case 5:var o=t.return;try{Dv(t)}catch(d){bs(t,o,d)}}}catch(d){bs(t,t.return,d)}if(t===e){Je=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Je=c;break}Je=t.return}}var OI=Math.ceil,im=mi.ReactCurrentDispatcher,tb=mi.ReactCurrentOwner,vr=mi.ReactCurrentBatchConfig,It=0,Xs=null,Fs=null,sn=0,Jn=0,Bl=ao(0),qs=0,Au=null,Jo=0,ap=0,sb=0,su=null,Fn=null,nb=0,Nc=1/0,Ga=null,om=!1,zv=null,Ui=null,ef=!1,Ii=null,lm=0,nu=0,Bv=null,kf=-1,Cf=0;function En(){return It&6?Cs():kf!==-1?kf:kf=Cs()}function qi(e){return e.mode&1?It&2&&sn!==0?sn&-sn:pI.transition!==null?(Cf===0&&(Cf=Pk()),Cf):(e=Kt,e!==0||(e=window.event,e=e===void 0?16:Mk(e.type)),e):1}function Hr(e,t,n,r){if(50<nu)throw nu=0,Bv=null,Error(Me(185));eh(e,n,r),(!(It&2)||e!==Xs)&&(e===Xs&&(!(It&2)&&(ap|=n),qs===4&&Ei(e,sn)),Hn(e,r),n===1&&It===0&&!(t.mode&1)&&(Nc=Cs()+500,tp&&io()))}function Hn(e,t){var n=e.callbackNode;pM(e,t);var r=Hf(e,e===Xs?sn:0);if(r===0)n!==null&&g_(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&g_(n),t===1)e.tag===0?mI(lN.bind(null,e)):eC(lN.bind(null,e)),dI(function(){!(It&6)&&io()}),n=null;else{switch(Ek(r)){case 1:n=E0;break;case 4:n=kk;break;case 16:n=qf;break;case 536870912:n=Ck;break;default:n=qf}n=JC(n,HC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function HC(e,t){if(kf=-1,Cf=0,It&6)throw Error(Me(327));var n=e.callbackNode;if(ec()&&e.callbackNode!==n)return null;var r=Hf(e,e===Xs?sn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=cm(e,r);else{t=r;var a=It;It|=2;var i=ZC();(Xs!==e||sn!==t)&&(Ga=null,Nc=Cs()+500,zo(e,t));do try{MI();break}catch(c){WC(e,c)}while(!0);V0(),im.current=i,It=a,Fs!==null?t=0:(Xs=null,sn=0,t=qs)}if(t!==0){if(t===2&&(a=mv(e),a!==0&&(r=a,t=Vv(e,a))),t===1)throw n=Au,zo(e,0),Ei(e,r),Hn(e,Cs()),n;if(t===6)Ei(e,r);else{if(a=e.current.alternate,!(r&30)&&!RI(a)&&(t=cm(e,r),t===2&&(i=mv(e),i!==0&&(r=i,t=Vv(e,i))),t===1))throw n=Au,zo(e,0),Ei(e,r),Hn(e,Cs()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Me(345));case 2:jo(e,Fn,Ga);break;case 3:if(Ei(e,r),(r&130023424)===r&&(t=nb+500-Cs(),10<t)){if(Hf(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){En(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=jv(jo.bind(null,e,Fn,Ga),t);break}jo(e,Fn,Ga);break;case 4:if(Ei(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-qr(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=Cs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OI(r/1960))-r,10<r){e.timeoutHandle=jv(jo.bind(null,e,Fn,Ga),r);break}jo(e,Fn,Ga);break;case 5:jo(e,Fn,Ga);break;default:throw Error(Me(329))}}}return Hn(e,Cs()),e.callbackNode===n?HC.bind(null,e):null}function Vv(e,t){var n=su;return e.current.memoizedState.isDehydrated&&(zo(e,t).flags|=256),e=cm(e,t),e!==2&&(t=Fn,Fn=n,t!==null&&Uv(t)),e}function Uv(e){Fn===null?Fn=e:Fn.push.apply(Fn,e)}function RI(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Gr(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ei(e,t){for(t&=~sb,t&=~ap,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qr(t),r=1<<n;e[n]=-1,t&=~r}}function lN(e){if(It&6)throw Error(Me(327));ec();var t=Hf(e,0);if(!(t&1))return Hn(e,Cs()),null;var n=cm(e,t);if(e.tag!==0&&n===2){var r=mv(e);r!==0&&(t=r,n=Vv(e,r))}if(n===1)throw n=Au,zo(e,0),Ei(e,t),Hn(e,Cs()),n;if(n===6)throw Error(Me(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jo(e,Fn,Ga),Hn(e,Cs()),null}function rb(e,t){var n=It;It|=1;try{return e(t)}finally{It=n,It===0&&(Nc=Cs()+500,tp&&io())}}function Qo(e){Ii!==null&&Ii.tag===0&&!(It&6)&&ec();var t=It;It|=1;var n=vr.transition,r=Kt;try{if(vr.transition=null,Kt=1,e)return e()}finally{Kt=r,vr.transition=n,It=t,!(It&6)&&io()}}function ab(){Jn=Bl.current,as(Bl)}function zo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cI(n)),Fs!==null)for(n=Fs.return;n!==null;){var r=n;switch($0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yf();break;case 3:jc(),as(Un),as(pn),G0();break;case 5:Z0(r);break;case 4:jc();break;case 13:as(hs);break;case 19:as(hs);break;case 10:U0(r.type._context);break;case 22:case 23:ab()}n=n.return}if(Xs=e,Fs=e=Hi(e.current,null),sn=Jn=t,qs=0,Au=null,sb=ap=Jo=0,Fn=su=null,Eo!==null){for(t=0;t<Eo.length;t++)if(n=Eo[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}Eo=null}return e}function WC(e,t){do{var n=Fs;try{if(V0(),_f.current=am,rm){for(var r=ms.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}rm=!1}if(Xo=0,Ks=Vs=ms=null,eu=!1,Pu=0,tb.current=null,n===null||n.return===null){qs=1,Au=t,Fs=null;break}e:{var i=e,o=n.return,c=n,d=t;if(t=sn,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,m=c,u=m.tag;if(!(m.mode&1)&&(u===0||u===11||u===15)){var f=m.alternate;f?(m.updateQueue=f.updateQueue,m.memoizedState=f.memoizedState,m.lanes=f.lanes):(m.updateQueue=null,m.memoizedState=null)}var p=K_(o);if(p!==null){p.flags&=-257,Y_(p,o,c,i,t),p.mode&1&&G_(i,h,t),t=p,d=h;var x=t.updateQueue;if(x===null){var v=new Set;v.add(d),t.updateQueue=v}else x.add(d);break e}else{if(!(t&1)){G_(i,h,t),ib();break e}d=Error(Me(426))}}else if(ls&&c.mode&1){var y=K_(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Y_(y,o,c,i,t),z0(_c(d,c));break e}}i=d=_c(d,c),qs!==4&&(qs=2),su===null?su=[i]:su.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=EC(i,d,t);V_(i,w);break e;case 1:c=d;var b=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ui===null||!Ui.has(_)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=TC(i,c,t);V_(i,N);break e}}i=i.return}while(i!==null)}KC(n)}catch(k){t=k,Fs===n&&n!==null&&(Fs=n=n.return);continue}break}while(!0)}function ZC(){var e=im.current;return im.current=am,e===null?am:e}function ib(){(qs===0||qs===3||qs===2)&&(qs=4),Xs===null||!(Jo&268435455)&&!(ap&268435455)||Ei(Xs,sn)}function cm(e,t){var n=It;It|=2;var r=ZC();(Xs!==e||sn!==t)&&(Ga=null,zo(e,t));do try{LI();break}catch(a){WC(e,a)}while(!0);if(V0(),It=n,im.current=r,Fs!==null)throw Error(Me(261));return Xs=null,sn=0,qs}function LI(){for(;Fs!==null;)GC(Fs)}function MI(){for(;Fs!==null&&!iM();)GC(Fs)}function GC(e){var t=XC(e.alternate,e,Jn);e.memoizedProps=e.pendingProps,t===null?KC(e):Fs=t,tb.current=null}function KC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=PI(n,t),n!==null){n.flags&=32767,Fs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qs=6,Fs=null;return}}else if(n=CI(n,t,Jn),n!==null){Fs=n;return}if(t=t.sibling,t!==null){Fs=t;return}Fs=t=e}while(t!==null);qs===0&&(qs=5)}function jo(e,t,n){var r=Kt,a=vr.transition;try{vr.transition=null,Kt=1,II(e,t,n,r)}finally{vr.transition=a,Kt=r}return null}function II(e,t,n,r){do ec();while(Ii!==null);if(It&6)throw Error(Me(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Me(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(gM(e,i),e===Xs&&(Fs=Xs=null,sn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ef||(ef=!0,JC(qf,function(){return ec(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vr.transition,vr.transition=null;var o=Kt;Kt=1;var c=It;It|=4,tb.current=null,TI(e,n),UC(n,e),sI(bv),Wf=!!yv,bv=yv=null,e.current=n,AI(n),oM(),It=c,Kt=o,vr.transition=i}else e.current=n;if(ef&&(ef=!1,Ii=e,lm=a),i=e.pendingLanes,i===0&&(Ui=null),dM(n.stateNode),Hn(e,Cs()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(om)throw om=!1,e=zv,zv=null,e;return lm&1&&e.tag!==0&&ec(),i=e.pendingLanes,i&1?e===Bv?nu++:(nu=0,Bv=e):nu=0,io(),null}function ec(){if(Ii!==null){var e=Ek(lm),t=vr.transition,n=Kt;try{if(vr.transition=null,Kt=16>e?16:e,Ii===null)var r=!1;else{if(e=Ii,Ii=null,lm=0,It&6)throw Error(Me(331));var a=It;for(It|=4,Je=e.current;Je!==null;){var i=Je,o=i.child;if(Je.flags&16){var c=i.deletions;if(c!==null){for(var d=0;d<c.length;d++){var h=c[d];for(Je=h;Je!==null;){var m=Je;switch(m.tag){case 0:case 11:case 15:tu(8,m,i)}var u=m.child;if(u!==null)u.return=m,Je=u;else for(;Je!==null;){m=Je;var f=m.sibling,p=m.return;if(zC(m),m===h){Je=null;break}if(f!==null){f.return=p,Je=f;break}Je=p}}}var x=i.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}Je=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Je=o;else e:for(;Je!==null;){if(i=Je,i.flags&2048)switch(i.tag){case 0:case 11:case 15:tu(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Je=w;break e}Je=i.return}}var b=e.current;for(Je=b;Je!==null;){o=Je;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Je=_;else e:for(o=b;Je!==null;){if(c=Je,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:rp(9,c)}}catch(k){bs(c,c.return,k)}if(c===o){Je=null;break e}var N=c.sibling;if(N!==null){N.return=c.return,Je=N;break e}Je=c.return}}if(It=a,io(),ba&&typeof ba.onPostCommitFiberRoot=="function")try{ba.onPostCommitFiberRoot(Ym,e)}catch{}r=!0}return r}finally{Kt=n,vr.transition=t}}return!1}function cN(e,t,n){t=_c(n,t),t=EC(e,t,1),e=Vi(e,t,1),t=En(),e!==null&&(eh(e,1,t),Hn(e,t))}function bs(e,t,n){if(e.tag===3)cN(e,e,n);else for(;t!==null;){if(t.tag===3){cN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ui===null||!Ui.has(r))){e=_c(n,e),e=TC(t,e,1),t=Vi(t,e,1),e=En(),t!==null&&(eh(t,1,e),Hn(t,e));break}}t=t.return}}function DI(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=En(),e.pingedLanes|=e.suspendedLanes&n,Xs===e&&(sn&n)===n&&(qs===4||qs===3&&(sn&130023424)===sn&&500>Cs()-nb?zo(e,0):sb|=n),Hn(e,t)}function YC(e,t){t===0&&(e.mode&1?(t=qh,qh<<=1,!(qh&130023424)&&(qh=4194304)):t=1);var n=En();e=ri(e,t),e!==null&&(eh(e,t,n),Hn(e,n))}function FI(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),YC(e,n)}function $I(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Me(314))}r!==null&&r.delete(t),YC(e,n)}var XC;XC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Un.current)$n=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $n=!1,kI(e,t,n);$n=!!(e.flags&131072)}else $n=!1,ls&&t.flags&1048576&&tC(t,Qf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Sf(e,t),e=t.pendingProps;var a=yc(t,pn.current);Ql(t,n),a=Y0(null,t,r,e,a,n);var i=X0();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qn(r)?(i=!0,Xf(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,H0(t),a.updater=np,t.stateNode=a,a._reactInternals=t,Ev(t,r,e,n),t=Ov(null,t,r,!0,i,n)):(t.tag=0,ls&&i&&F0(t),wn(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Sf(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=BI(r),e=Rr(r,e),a){case 0:t=Av(null,t,r,e,n);break e;case 1:t=Q_(null,t,r,e,n);break e;case 11:t=X_(null,t,r,e,n);break e;case 14:t=J_(null,t,r,Rr(r.type,e),n);break e}throw Error(Me(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Rr(r,a),Av(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Rr(r,a),Q_(e,t,r,a,n);case 3:e:{if(LC(t),e===null)throw Error(Me(387));r=t.pendingProps,i=t.memoizedState,a=i.element,oC(e,t),sm(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=_c(Error(Me(423)),t),t=eN(e,t,r,n,a);break e}else if(r!==a){a=_c(Error(Me(424)),t),t=eN(e,t,r,n,a);break e}else for(sr=Bi(t.stateNode.containerInfo.firstChild),nr=t,ls=!0,Fr=null,n=aC(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bc(),r===a){t=ai(e,t,n);break e}wn(e,t,r,n)}t=t.child}return t;case 5:return lC(t),e===null&&kv(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,wv(r,a)?o=null:i!==null&&wv(r,i)&&(t.flags|=32),RC(e,t),wn(e,t,o,n),t.child;case 6:return e===null&&kv(t),null;case 13:return MC(e,t,n);case 4:return W0(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wc(t,null,r,n):wn(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Rr(r,a),X_(e,t,r,a,n);case 7:return wn(e,t,t.pendingProps,n),t.child;case 8:return wn(e,t,t.pendingProps.children,n),t.child;case 12:return wn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Qt(em,r._currentValue),r._currentValue=o,i!==null)if(Gr(i.value,o)){if(i.children===a.children&&!Un.current){t=ai(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(i.tag===1){d=ti(-1,n&-n),d.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?d.next=d:(d.next=m.next,m.next=d),h.pending=d}}i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),Cv(i.return,n,t),c.lanes|=n;break}d=d.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Me(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Cv(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wn(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ql(t,n),a=jr(a),r=r(a),t.flags|=1,wn(e,t,r,n),t.child;case 14:return r=t.type,a=Rr(r,t.pendingProps),a=Rr(r.type,a),J_(e,t,r,a,n);case 15:return AC(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Rr(r,a),Sf(e,t),t.tag=1,qn(r)?(e=!0,Xf(t)):e=!1,Ql(t,n),PC(t,r,a),Ev(t,r,a,n),Ov(null,t,r,!0,e,n);case 19:return IC(e,t,n);case 22:return OC(e,t,n)}throw Error(Me(156,t.tag))};function JC(e,t){return Sk(e,t)}function zI(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(e,t,n,r){return new zI(e,t,n,r)}function ob(e){return e=e.prototype,!(!e||!e.isReactComponent)}function BI(e){if(typeof e=="function")return ob(e)?1:0;if(e!=null){if(e=e.$$typeof,e===k0)return 11;if(e===C0)return 14}return 2}function Hi(e,t){var n=e.alternate;return n===null?(n=xr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pf(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")ob(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Al:return Bo(n.children,a,i,t);case S0:o=8,a|=8;break;case Qx:return e=xr(12,n,t,a|2),e.elementType=Qx,e.lanes=i,e;case ev:return e=xr(13,n,t,a),e.elementType=ev,e.lanes=i,e;case tv:return e=xr(19,n,t,a),e.elementType=tv,e.lanes=i,e;case lk:return ip(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ik:o=10;break e;case ok:o=9;break e;case k0:o=11;break e;case C0:o=14;break e;case Si:o=16,r=null;break e}throw Error(Me(130,e==null?e:typeof e,""))}return t=xr(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Bo(e,t,n,r){return e=xr(7,e,r,t),e.lanes=n,e}function ip(e,t,n,r){return e=xr(22,e,r,t),e.elementType=lk,e.lanes=n,e.stateNode={isHidden:!1},e}function lx(e,t,n){return e=xr(6,e,null,t),e.lanes=n,e}function cx(e,t,n){return t=xr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function VI(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ug(0),this.expirationTimes=Ug(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ug(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function lb(e,t,n,r,a,i,o,c,d){return e=new VI(e,t,n,c,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},H0(i),e}function UI(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function QC(e){if(!e)return Ki;e=e._reactInternals;e:{if(cl(e)!==e||e.tag!==1)throw Error(Me(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Me(171))}if(e.tag===1){var n=e.type;if(qn(n))return Qk(e,n,t)}return t}function eP(e,t,n,r,a,i,o,c,d){return e=lb(n,r,!0,e,a,i,o,c,d),e.context=QC(null),n=e.current,r=En(),a=qi(n),i=ti(r,a),i.callback=t??null,Vi(n,i,a),e.current.lanes=a,eh(e,a,r),Hn(e,r),e}function op(e,t,n,r){var a=t.current,i=En(),o=qi(a);return n=QC(n),t.context===null?t.context=n:t.pendingContext=n,t=ti(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vi(a,t,o),e!==null&&(Hr(e,a,o,i),jf(e,a,o)),o}function dm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function cb(e,t){dN(e,t),(e=e.alternate)&&dN(e,t)}function qI(){return null}var tP=typeof reportError=="function"?reportError:function(e){console.error(e)};function db(e){this._internalRoot=e}lp.prototype.render=db.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Me(409));op(e,t,null,null)};lp.prototype.unmount=db.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qo(function(){op(null,e,null,null)}),t[ni]=null}};function lp(e){this._internalRoot=e}lp.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ok();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pi.length&&t!==0&&t<Pi[n].priority;n++);Pi.splice(n,0,e),n===0&&Lk(e)}};function ub(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uN(){}function HI(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var h=dm(o);i.call(h)}}var o=eP(t,r,e,0,null,!1,!1,"",uN);return e._reactRootContainer=o,e[ni]=o.current,_u(e.nodeType===8?e.parentNode:e),Qo(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var c=r;r=function(){var h=dm(d);c.call(h)}}var d=lb(e,0,!1,null,null,!1,!1,"",uN);return e._reactRootContainer=d,e[ni]=d.current,_u(e.nodeType===8?e.parentNode:e),Qo(function(){op(t,d,n,r)}),d}function dp(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var c=a;a=function(){var d=dm(o);c.call(d)}}op(t,o,e,a)}else o=HI(n,t,e,a,r);return dm(o)}Tk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ud(t.pendingLanes);n!==0&&(T0(t,n|1),Hn(t,Cs()),!(It&6)&&(Nc=Cs()+500,io()))}break;case 13:Qo(function(){var r=ri(e,1);if(r!==null){var a=En();Hr(r,e,1,a)}}),cb(e,1)}};A0=function(e){if(e.tag===13){var t=ri(e,134217728);if(t!==null){var n=En();Hr(t,e,134217728,n)}cb(e,134217728)}};Ak=function(e){if(e.tag===13){var t=qi(e),n=ri(e,t);if(n!==null){var r=En();Hr(n,e,t,r)}cb(e,t)}};Ok=function(){return Kt};Rk=function(e,t){var n=Kt;try{return Kt=e,t()}finally{Kt=n}};uv=function(e,t,n){switch(t){case"input":if(rv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ep(r);if(!a)throw Error(Me(90));dk(r),rv(r,a)}}}break;case"textarea":hk(e,n);break;case"select":t=n.value,t!=null&&Kl(e,!!n.multiple,t,!1)}};yk=rb;bk=Qo;var WI={usingClientEntryPoint:!1,Events:[sh,Ml,ep,xk,vk,rb]},Td={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZI={bundleType:Td.bundleType,version:Td.version,rendererPackageName:Td.rendererPackageName,rendererConfig:Td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_k(e),e===null?null:e.stateNode},findFiberByHostInstance:Td.findFiberByHostInstance||qI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{Ym=tf.inject(ZI),ba=tf}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WI;ir.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ub(t))throw Error(Me(200));return UI(e,t,null,n)};ir.createRoot=function(e,t){if(!ub(e))throw Error(Me(299));var n=!1,r="",a=tP;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=lb(e,1,!1,null,null,n,!1,r,a),e[ni]=t.current,_u(e.nodeType===8?e.parentNode:e),new db(t)};ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Me(188)):(e=Object.keys(e).join(","),Error(Me(268,e)));return e=_k(t),e=e===null?null:e.stateNode,e};ir.flushSync=function(e){return Qo(e)};ir.hydrate=function(e,t,n){if(!cp(t))throw Error(Me(200));return dp(null,e,t,!0,n)};ir.hydrateRoot=function(e,t,n){if(!ub(e))throw Error(Me(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=tP;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=eP(t,null,e,1,n??null,a,!1,i,o),e[ni]=t.current,_u(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new lp(t)};ir.render=function(e,t,n){if(!cp(t))throw Error(Me(200));return dp(null,e,t,!1,n)};ir.unmountComponentAtNode=function(e){if(!cp(e))throw Error(Me(40));return e._reactRootContainer?(Qo(function(){dp(null,null,e,!1,function(){e._reactRootContainer=null,e[ni]=null})}),!0):!1};ir.unstable_batchedUpdates=rb;ir.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!cp(n))throw Error(Me(200));if(e==null||e._reactInternals===void 0)throw Error(Me(38));return dp(e,t,n,!1,r)};ir.version="18.3.1-next-f1338f8080-20240426";function sP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sP)}catch(e){console.error(e)}}sP(),sk.exports=ir;var oo=sk.exports;const nP=Gm(oo);var rP,hN=oo;rP=hN.createRoot,hN.hydrateRoot;const GI=1,KI=1e6;let dx=0;function YI(){return dx=(dx+1)%Number.MAX_SAFE_INTEGER,dx.toString()}const ux=new Map,fN=e=>{if(ux.has(e))return;const t=setTimeout(()=>{ux.delete(e),ru({type:"REMOVE_TOAST",toastId:e})},KI);ux.set(e,t)},aP=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,GI)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?fN(n):e.toasts.forEach(r=>{fN(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Ef=[];let Tf={toasts:[]};function ru(e){Tf=aP(Tf,e),Ef.forEach(t=>{t(Tf)})}function au({...e}){const t=YI(),n=a=>ru({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>ru({type:"DISMISS_TOAST",toastId:t});return ru({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function es(){const[e,t]=j.useState(Tf);return j.useEffect(()=>(Ef.push(t),()=>{const n=Ef.indexOf(t);n>-1&&Ef.splice(n,1)}),[e]),{...e,toast:au,dismiss:n=>ru({type:"DISMISS_TOAST",toastId:n})}}const mN=Object.freeze(Object.defineProperty({__proto__:null,reducer:aP,toast:au,useToast:es},Symbol.toStringTag,{value:"Module"}));function $e(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function pN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function up(...e){return t=>{let n=!1;const r=e.map(a=>{const i=pN(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():pN(e[a],null)}}}}function bt(...e){return j.useCallback(up(...e),e)}function XI(e,t){const n=j.createContext(t),r=i=>{const{children:o,...c}=i,d=j.useMemo(()=>c,Object.values(c));return s.jsx(n.Provider,{value:d,children:o})};r.displayName=e+"Provider";function a(i){const o=j.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function gn(e,t=[]){let n=[];function r(i,o){const c=j.createContext(o),d=n.length;n=[...n,o];const h=u=>{var w;const{scope:f,children:p,...x}=u,v=((w=f==null?void 0:f[e])==null?void 0:w[d])||c,y=j.useMemo(()=>x,Object.values(x));return s.jsx(v.Provider,{value:y,children:p})};h.displayName=i+"Provider";function m(u,f){var v;const p=((v=f==null?void 0:f[e])==null?void 0:v[d])||c,x=j.useContext(p);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return[h,m]}const a=()=>{const i=n.map(o=>j.createContext(o));return function(c){const d=(c==null?void 0:c[e])||i;return j.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return a.scopeName=e,[r,JI(a,...t)]}function JI(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((c,{useScope:d,scopeName:h})=>{const u=d(i)[`__scope${h}`];return{...c,...u}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function el(e){const t=eD(e),n=j.forwardRef((r,a)=>{const{children:i,...o}=r,c=j.Children.toArray(i),d=c.find(sD);if(d){const h=d.props.children,m=c.map(u=>u===d?j.Children.count(h)>1?j.Children.only(null):j.isValidElement(h)?h.props.children:null:u);return s.jsx(t,{...o,ref:a,children:j.isValidElement(h)?j.cloneElement(h,void 0,m):null})}return s.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var QI=el("Slot");function eD(e){const t=j.forwardRef((n,r)=>{const{children:a,...i}=n;if(j.isValidElement(a)){const o=rD(a),c=nD(i,a.props);return a.type!==j.Fragment&&(c.ref=r?up(r,o):o),j.cloneElement(a,c)}return j.Children.count(a)>1?j.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var iP=Symbol("radix.slottable");function tD(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=iP,t}function sD(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===iP}function nD(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...c)=>{const d=i(...c);return a(...c),d}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function rD(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function hp(e){const t=e+"CollectionProvider",[n,r]=gn(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:y,children:w}=v,b=Ce.useRef(null),_=Ce.useRef(new Map).current;return s.jsx(a,{scope:y,itemMap:_,collectionRef:b,children:w})};o.displayName=t;const c=e+"CollectionSlot",d=el(c),h=Ce.forwardRef((v,y)=>{const{scope:w,children:b}=v,_=i(c,w),N=bt(y,_.collectionRef);return s.jsx(d,{ref:N,children:b})});h.displayName=c;const m=e+"CollectionItemSlot",u="data-radix-collection-item",f=el(m),p=Ce.forwardRef((v,y)=>{const{scope:w,children:b,..._}=v,N=Ce.useRef(null),k=bt(y,N),E=i(m,w);return Ce.useEffect(()=>(E.itemMap.set(N,{ref:N,..._}),()=>void E.itemMap.delete(N))),s.jsx(f,{[u]:"",ref:k,children:b})});p.displayName=m;function x(v){const y=i(e+"CollectionConsumer",v);return Ce.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(y.itemMap.values()).sort((E,T)=>_.indexOf(E.ref.current)-_.indexOf(T.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:h,ItemSlot:p},x,r]}var aD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],st=aD.reduce((e,t)=>{const n=el(`Primitive.${t}`),r=j.forwardRef((a,i)=>{const{asChild:o,...c}=a,d=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...c,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function hb(e,t){e&&oo.flushSync(()=>e.dispatchEvent(t))}function ws(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function iD(e,t=globalThis==null?void 0:globalThis.document){const n=ws(e);j.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var oD="DismissableLayer",qv="dismissableLayer.update",lD="dismissableLayer.pointerDownOutside",cD="dismissableLayer.focusOutside",gN,oP=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Hc=j.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...d}=e,h=j.useContext(oP),[m,u]=j.useState(null),f=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=j.useState({}),x=bt(t,T=>u(T)),v=Array.from(h.layers),[y]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(y),b=m?v.indexOf(m):-1,_=h.layersWithOutsidePointerEventsDisabled.size>0,N=b>=w,k=uD(T=>{const R=T.target,$=[...h.branches].some(M=>M.contains(R));!N||$||(a==null||a(T),o==null||o(T),T.defaultPrevented||c==null||c())},f),E=hD(T=>{const R=T.target;[...h.branches].some(M=>M.contains(R))||(i==null||i(T),o==null||o(T),T.defaultPrevented||c==null||c())},f);return iD(T=>{b===h.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&c&&(T.preventDefault(),c()))},f),j.useEffect(()=>{if(m)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(gN=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(m)),h.layers.add(m),xN(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=gN)}},[m,f,n,h]),j.useEffect(()=>()=>{m&&(h.layers.delete(m),h.layersWithOutsidePointerEventsDisabled.delete(m),xN())},[m,h]),j.useEffect(()=>{const T=()=>p({});return document.addEventListener(qv,T),()=>document.removeEventListener(qv,T)},[]),s.jsx(st.div,{...d,ref:x,style:{pointerEvents:_?N?"auto":"none":void 0,...e.style},onFocusCapture:$e(e.onFocusCapture,E.onFocusCapture),onBlurCapture:$e(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:$e(e.onPointerDownCapture,k.onPointerDownCapture)})});Hc.displayName=oD;var dD="DismissableLayerBranch",lP=j.forwardRef((e,t)=>{const n=j.useContext(oP),r=j.useRef(null),a=bt(t,r);return j.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),s.jsx(st.div,{...e,ref:a})});lP.displayName=dD;function uD(e,t=globalThis==null?void 0:globalThis.document){const n=ws(e),r=j.useRef(!1),a=j.useRef(()=>{});return j.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let d=function(){cP(lD,n,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function hD(e,t=globalThis==null?void 0:globalThis.document){const n=ws(e),r=j.useRef(!1);return j.useEffect(()=>{const a=i=>{i.target&&!r.current&&cP(cD,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xN(){const e=new CustomEvent(qv);document.dispatchEvent(e)}function cP(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?hb(a,i):a.dispatchEvent(i)}var fD=Hc,mD=lP,As=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},pD="Portal",rh=j.forwardRef((e,t)=>{var c;const{container:n,...r}=e,[a,i]=j.useState(!1);As(()=>i(!0),[]);const o=n||a&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?nP.createPortal(s.jsx(st.div,{...r,ref:t}),o):null});rh.displayName=pD;function gD(e,t){return j.useReducer((n,r)=>t[n][r]??n,e)}var an=e=>{const{present:t,children:n}=e,r=xD(t),a=typeof n=="function"?n({present:r.isPresent}):j.Children.only(n),i=bt(r.ref,vD(a));return typeof n=="function"||r.isPresent?j.cloneElement(a,{ref:i}):null};an.displayName="Presence";function xD(e){const[t,n]=j.useState(),r=j.useRef(null),a=j.useRef(e),i=j.useRef("none"),o=e?"mounted":"unmounted",[c,d]=gD(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const h=sf(r.current);i.current=c==="mounted"?h:"none"},[c]),As(()=>{const h=r.current,m=a.current;if(m!==e){const f=i.current,p=sf(h);e?d("MOUNT"):p==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(m&&f!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,d]),As(()=>{if(t){let h;const m=t.ownerDocument.defaultView??window,u=p=>{const v=sf(r.current).includes(p.animationName);if(p.target===t&&v&&(d("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",h=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=p=>{p.target===t&&(i.current=sf(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{m.clearTimeout(h),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:j.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function sf(e){return(e==null?void 0:e.animationName)||"none"}function vD(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var yD=w0[" useInsertionEffect ".trim().toString()]||As;function Kr({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=bD({defaultProp:t,onChange:n}),c=e!==void 0,d=c?e:a;{const m=j.useRef(e!==void 0);j.useEffect(()=>{const u=m.current;u!==c&&console.warn(`${r} is changing from ${u?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const h=j.useCallback(m=>{var u;if(c){const f=wD(m)?m(e):m;f!==e&&((u=o.current)==null||u.call(o,f))}else i(m)},[c,e,i,o]);return[d,h]}function bD({defaultProp:e,onChange:t}){const[n,r]=j.useState(e),a=j.useRef(n),i=j.useRef(t);return yD(()=>{i.current=t},[t]),j.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function wD(e){return typeof e=="function"}var dP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jD="VisuallyHidden",fp=j.forwardRef((e,t)=>s.jsx(st.span,{...e,ref:t,style:{...dP,...e.style}}));fp.displayName=jD;var _D=fp,fb="ToastProvider",[mb,ND,SD]=hp("Toast"),[uP,yre]=gn("Toast",[SD]),[kD,mp]=uP(fb),hP=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[c,d]=j.useState(null),[h,m]=j.useState(0),u=j.useRef(!1),f=j.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${fb}\`. Expected non-empty \`string\`.`),s.jsx(mb.Provider,{scope:t,children:s.jsx(kD,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:h,viewport:c,onViewportChange:d,onToastAdd:j.useCallback(()=>m(p=>p+1),[]),onToastRemove:j.useCallback(()=>m(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:f,children:o})})};hP.displayName=fb;var fP="ToastViewport",CD=["F8"],Hv="toast.viewportPause",Wv="toast.viewportResume",mP=j.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=CD,label:a="Notifications ({hotkey})",...i}=e,o=mp(fP,n),c=ND(n),d=j.useRef(null),h=j.useRef(null),m=j.useRef(null),u=j.useRef(null),f=bt(t,u,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;j.useEffect(()=>{const y=w=>{var _;r.length!==0&&r.every(N=>w[N]||w.code===N)&&((_=u.current)==null||_.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),j.useEffect(()=>{const y=d.current,w=u.current;if(x&&y&&w){const b=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(Hv);w.dispatchEvent(E),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(Wv);w.dispatchEvent(E),o.isClosePausedRef.current=!1}},N=E=>{!y.contains(E.relatedTarget)&&_()},k=()=>{y.contains(document.activeElement)||_()};return y.addEventListener("focusin",b),y.addEventListener("focusout",N),y.addEventListener("pointermove",b),y.addEventListener("pointerleave",k),window.addEventListener("blur",b),window.addEventListener("focus",_),()=>{y.removeEventListener("focusin",b),y.removeEventListener("focusout",N),y.removeEventListener("pointermove",b),y.removeEventListener("pointerleave",k),window.removeEventListener("blur",b),window.removeEventListener("focus",_)}}},[x,o.isClosePausedRef]);const v=j.useCallback(({tabbingDirection:y})=>{const b=c().map(_=>{const N=_.ref.current,k=[N,...zD(N)];return y==="forwards"?k:k.reverse()});return(y==="forwards"?b.reverse():b).flat()},[c]);return j.useEffect(()=>{const y=u.current;if(y){const w=b=>{var k,E,T;const _=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!_){const R=document.activeElement,$=b.shiftKey;if(b.target===y&&$){(k=h.current)==null||k.focus();return}const C=v({tabbingDirection:$?"backwards":"forwards"}),z=C.findIndex(P=>P===R);hx(C.slice(z+1))?b.preventDefault():$?(E=h.current)==null||E.focus():(T=m.current)==null||T.focus()}};return y.addEventListener("keydown",w),()=>y.removeEventListener("keydown",w)}},[c,v]),s.jsxs(mD,{ref:d,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&s.jsx(Zv,{ref:h,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"forwards"});hx(y)}}),s.jsx(mb.Slot,{scope:n,children:s.jsx(st.ol,{tabIndex:-1,...i,ref:f})}),x&&s.jsx(Zv,{ref:m,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"backwards"});hx(y)}})]})});mP.displayName=fP;var pP="ToastFocusProxy",Zv=j.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=mp(pP,n);return s.jsx(fp,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var h;const c=o.relatedTarget;!((h=i.viewport)!=null&&h.contains(c))&&r()}})});Zv.displayName=pP;var ah="Toast",PD="toast.swipeStart",ED="toast.swipeMove",TD="toast.swipeCancel",AD="toast.swipeEnd",gP=j.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...o}=e,[c,d]=Kr({prop:r,defaultProp:a??!0,onChange:i,caller:ah});return s.jsx(an,{present:n||c,children:s.jsx(LD,{open:c,...o,ref:t,onClose:()=>d(!1),onPause:ws(e.onPause),onResume:ws(e.onResume),onSwipeStart:$e(e.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$e(e.onSwipeMove,h=>{const{x:m,y:u}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:$e(e.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$e(e.onSwipeEnd,h=>{const{x:m,y:u}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),d(!1)})})})});gP.displayName=ah;var[OD,RD]=uP(ah,{onClose(){}}),LD=j.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:c,onPause:d,onResume:h,onSwipeStart:m,onSwipeMove:u,onSwipeCancel:f,onSwipeEnd:p,...x}=e,v=mp(ah,n),[y,w]=j.useState(null),b=bt(t,P=>w(P)),_=j.useRef(null),N=j.useRef(null),k=a||v.duration,E=j.useRef(0),T=j.useRef(k),R=j.useRef(0),{onToastAdd:$,onToastRemove:M}=v,A=ws(()=>{var O;(y==null?void 0:y.contains(document.activeElement))&&((O=v.viewport)==null||O.focus()),o()}),C=j.useCallback(P=>{!P||P===1/0||(window.clearTimeout(R.current),E.current=new Date().getTime(),R.current=window.setTimeout(A,P))},[A]);j.useEffect(()=>{const P=v.viewport;if(P){const O=()=>{C(T.current),h==null||h()},Y=()=>{const J=new Date().getTime()-E.current;T.current=T.current-J,window.clearTimeout(R.current),d==null||d()};return P.addEventListener(Hv,Y),P.addEventListener(Wv,O),()=>{P.removeEventListener(Hv,Y),P.removeEventListener(Wv,O)}}},[v.viewport,k,d,h,C]),j.useEffect(()=>{i&&!v.isClosePausedRef.current&&C(k)},[i,k,v.isClosePausedRef,C]),j.useEffect(()=>($(),()=>M()),[$,M]);const z=j.useMemo(()=>y?_P(y):null,[y]);return v.viewport?s.jsxs(s.Fragment,{children:[z&&s.jsx(MD,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),s.jsx(OD,{scope:n,onClose:A,children:oo.createPortal(s.jsx(mb.ItemSlot,{scope:n,children:s.jsx(fD,{asChild:!0,onEscapeKeyDown:$e(c,()=>{v.isFocusedToastEscapeKeyDownRef.current||A(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(st.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:$e(e.onKeyDown,P=>{P.key==="Escape"&&(c==null||c(P.nativeEvent),P.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:$e(e.onPointerDown,P=>{P.button===0&&(_.current={x:P.clientX,y:P.clientY})}),onPointerMove:$e(e.onPointerMove,P=>{if(!_.current)return;const O=P.clientX-_.current.x,Y=P.clientY-_.current.y,J=!!N.current,G=["left","right"].includes(v.swipeDirection),F=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,I=G?F(0,O):0,V=G?0:F(0,Y),H=P.pointerType==="touch"?10:2,U={x:I,y:V},q={originalEvent:P,delta:U};J?(N.current=U,nf(ED,u,q,{discrete:!1})):vN(U,v.swipeDirection,H)?(N.current=U,nf(PD,m,q,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(O)>H||Math.abs(Y)>H)&&(_.current=null)}),onPointerUp:$e(e.onPointerUp,P=>{const O=N.current,Y=P.target;if(Y.hasPointerCapture(P.pointerId)&&Y.releasePointerCapture(P.pointerId),N.current=null,_.current=null,O){const J=P.currentTarget,G={originalEvent:P,delta:O};vN(O,v.swipeDirection,v.swipeThreshold)?nf(AD,p,G,{discrete:!0}):nf(TD,f,G,{discrete:!0}),J.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),MD=e=>{const{__scopeToast:t,children:n,...r}=e,a=mp(ah,t),[i,o]=j.useState(!1),[c,d]=j.useState(!1);return FD(()=>o(!0)),j.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),c?null:s.jsx(rh,{asChild:!0,children:s.jsx(fp,{...r,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},ID="ToastTitle",xP=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(st.div,{...r,ref:t})});xP.displayName=ID;var DD="ToastDescription",vP=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(st.div,{...r,ref:t})});vP.displayName=DD;var yP="ToastAction",bP=j.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(jP,{altText:n,asChild:!0,children:s.jsx(pb,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${yP}\`. Expected non-empty \`string\`.`),null)});bP.displayName=yP;var wP="ToastClose",pb=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=RD(wP,n);return s.jsx(jP,{asChild:!0,children:s.jsx(st.button,{type:"button",...r,ref:t,onClick:$e(e.onClick,a.onClose)})})});pb.displayName=wP;var jP=j.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(st.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function _P(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),$D(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(..._P(r))}}),t}function nf(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?hb(a,i):a.dispatchEvent(i)}var vN=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return t==="left"||t==="right"?i&&r>n:!i&&a>n};function FD(e=()=>{}){const t=ws(e);As(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function $D(e){return e.nodeType===e.ELEMENT_NODE}function zD(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function hx(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var BD=hP,NP=mP,SP=gP,kP=xP,CP=vP,PP=bP,EP=pb;function TP(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=TP(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function AP(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=TP(e))&&(r&&(r+=" "),r+=t);return r}const yN=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,bN=AP,ih=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return bN(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(h=>{const m=n==null?void 0:n[h],u=i==null?void 0:i[h];if(m===null)return null;const f=yN(m)||yN(u);return a[h][f]}),c=n&&Object.entries(n).reduce((h,m)=>{let[u,f]=m;return f===void 0||(h[u]=f),h},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,m)=>{let{class:u,className:f,...p}=m;return Object.entries(p).every(x=>{let[v,y]=x;return Array.isArray(y)?y.includes({...i,...c}[v]):{...i,...c}[v]===y})?[...h,u,f]:h},[]);return bN(e,o,d,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OP=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...c},d)=>j.createElement("svg",{ref:d,...UD,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:OP("lucide",a),...c},[...o.map(([h,m])=>j.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=(e,t)=>{const n=j.forwardRef(({className:r,...a},i)=>j.createElement(qD,{ref:i,iconNode:t,className:OP(`lucide-${VD(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=Ve("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=Ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=Ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Ve("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=Ve("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=Ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=Ve("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=Ve("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=Ve("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=Ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=Ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=Ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=Ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=Ve("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=Ve("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=Ve("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=Ve("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=Ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=Ve("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=Ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=Ve("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=Ve("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Ve("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=Ve("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Ve("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=Ve("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=Ve("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=Ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=Ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=Ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=Ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=Ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Ve("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=Ve("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=Ve("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=Ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=Ve("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=Ve("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=Ve("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Ve("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=Ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=Ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=Ve("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=Ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Ve("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=Ve("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=Ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=Ve("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=Ve("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Ve("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=Ve("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=Ve("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Ve("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=Ve("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Ve("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Ve("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=Ve("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=Ve("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Ve("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Ve("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=Ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=Ve("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=Ve("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=Ve("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),_b="-",l6=e=>{const t=d6(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const c=o.split(_b);return c[0]===""&&c.length!==1&&c.shift(),VP(c,t)||c6(o)},getConflictingClassGroupIds:(o,c)=>{const d=n[o]||[];return c&&r[o]?[...d,...r[o]]:d}}},VP=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?VP(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(_b);return(o=t.validators.find(({validator:c})=>c(i)))==null?void 0:o.classGroupId},SN=/^\[(.+)\]$/,c6=e=>{if(SN.test(e)){const t=SN.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},d6=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return h6(Object.entries(e.classGroups),n).forEach(([i,o])=>{Kv(o,r,i,t)}),r},Kv=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:kN(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(u6(a)){Kv(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{Kv(o,kN(t,i),n,r)})})},kN=(e,t)=>{let n=e;return t.split(_b).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},u6=e=>e.isThemeGetter,h6=(e,t)=>t?e.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,c])=>[t+o,c])):i);return[n,a]}):e,f6=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},UP="!",m6=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],i=t.length,o=c=>{const d=[];let h=0,m=0,u;for(let y=0;y<c.length;y++){let w=c[y];if(h===0){if(w===a&&(r||c.slice(y,y+i)===t)){d.push(c.slice(m,y)),m=y+i;continue}if(w==="/"){u=y;continue}}w==="["?h++:w==="]"&&h--}const f=d.length===0?c:c.substring(m),p=f.startsWith(UP),x=p?f.substring(1):f,v=u&&u>m?u-m:void 0;return{modifiers:d,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:v}};return n?c=>n({className:c,parseClassName:o}):o},p6=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},g6=e=>({cache:f6(e.cacheSize),parseClassName:m6(e),...l6(e)}),x6=/\s+/,v6=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(x6);let c="";for(let d=o.length-1;d>=0;d-=1){const h=o[d],{modifiers:m,hasImportantModifier:u,baseClassName:f,maybePostfixModifierPosition:p}=n(h);let x=!!p,v=r(x?f.substring(0,p):f);if(!v){if(!x){c=h+(c.length>0?" "+c:c);continue}if(v=r(f),!v){c=h+(c.length>0?" "+c:c);continue}x=!1}const y=p6(m).join(":"),w=u?y+UP:y,b=w+v;if(i.includes(b))continue;i.push(b);const _=a(v,x);for(let N=0;N<_.length;++N){const k=_[N];i.push(w+k)}c=h+(c.length>0?" "+c:c)}return c};function y6(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=qP(t))&&(r&&(r+=" "),r+=n);return r}const qP=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=qP(e[r]))&&(n&&(n+=" "),n+=t);return n};function b6(e,...t){let n,r,a,i=o;function o(d){const h=t.reduce((m,u)=>u(m),e());return n=g6(h),r=n.cache.get,a=n.cache.set,i=c,c(d)}function c(d){const h=r(d);if(h)return h;const m=v6(d,n);return a(d,m),m}return function(){return i(y6.apply(null,arguments))}}const ts=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},HP=/^\[(?:([a-z-]+):)?(.+)\]$/i,w6=/^\d+\/\d+$/,j6=new Set(["px","full","screen"]),_6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,N6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,k6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,C6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ua=e=>sc(e)||j6.has(e)||w6.test(e),yi=e=>Zc(e,"length",M6),sc=e=>!!e&&!Number.isNaN(Number(e)),fx=e=>Zc(e,"number",sc),Ad=e=>!!e&&Number.isInteger(Number(e)),P6=e=>e.endsWith("%")&&sc(e.slice(0,-1)),_t=e=>HP.test(e),bi=e=>_6.test(e),E6=new Set(["length","size","percentage"]),T6=e=>Zc(e,E6,WP),A6=e=>Zc(e,"position",WP),O6=new Set(["image","url"]),R6=e=>Zc(e,O6,D6),L6=e=>Zc(e,"",I6),Od=()=>!0,Zc=(e,t,n)=>{const r=HP.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},M6=e=>N6.test(e)&&!S6.test(e),WP=()=>!1,I6=e=>k6.test(e),D6=e=>C6.test(e),F6=()=>{const e=ts("colors"),t=ts("spacing"),n=ts("blur"),r=ts("brightness"),a=ts("borderColor"),i=ts("borderRadius"),o=ts("borderSpacing"),c=ts("borderWidth"),d=ts("contrast"),h=ts("grayscale"),m=ts("hueRotate"),u=ts("invert"),f=ts("gap"),p=ts("gradientColorStops"),x=ts("gradientColorStopPositions"),v=ts("inset"),y=ts("margin"),w=ts("opacity"),b=ts("padding"),_=ts("saturate"),N=ts("scale"),k=ts("sepia"),E=ts("skew"),T=ts("space"),R=ts("translate"),$=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",_t,t],C=()=>[_t,t],z=()=>["",Ua,yi],P=()=>["auto",sc,_t],O=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",_t],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[sc,_t];return{cacheSize:500,separator:":",theme:{colors:[Od],spacing:[Ua,yi],blur:["none","",bi,_t],brightness:V(),borderColor:[e],borderRadius:["none","","full",bi,_t],borderSpacing:C(),borderWidth:z(),contrast:V(),grayscale:F(),hueRotate:V(),invert:F(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[P6,yi],inset:A(),margin:A(),opacity:V(),padding:C(),saturate:V(),scale:V(),sepia:F(),skew:V(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",_t]}],container:["container"],columns:[{columns:[bi]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...O(),_t]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ad,_t]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_t]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Ad,_t]}],"grid-cols":[{"grid-cols":[Od]}],"col-start-end":[{col:["auto",{span:["full",Ad,_t]},_t]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Od]}],"row-start-end":[{row:["auto",{span:[Ad,_t]},_t]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_t]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_t]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_t,t]}],"min-w":[{"min-w":[_t,t,"min","max","fit"]}],"max-w":[{"max-w":[_t,t,"none","full","min","max","fit","prose",{screen:[bi]},bi]}],h:[{h:[_t,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_t,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_t,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_t,t,"auto","min","max","fit"]}],"font-size":[{text:["base",bi,yi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fx]}],"font-family":[{font:[Od]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_t]}],"line-clamp":[{"line-clamp":["none",sc,fx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ua,_t]}],"list-image":[{"list-image":["none",_t]}],"list-style-type":[{list:["none","disc","decimal",_t]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ua,yi]}],"underline-offset":[{"underline-offset":["auto",Ua,_t]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...O(),A6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",T6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},R6]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:Y()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Ua,_t]}],"outline-w":[{outline:[Ua,yi]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Ua,yi]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",bi,L6]}],"shadow-color":[{shadow:[Od]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",bi,_t]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[u]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_t]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",_t]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",_t]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Ad,_t]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_t]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_t]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_t]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ua,yi,fx]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$6=b6(F6);function Ye(...e){return $6(AP(e))}const z6=BD,ZP=j.forwardRef(({className:e,...t},n)=>s.jsx(NP,{ref:n,className:Ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ZP.displayName=NP.displayName;const B6=ih("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),GP=j.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(SP,{ref:r,className:Ye(B6({variant:t}),e),...n}));GP.displayName=SP.displayName;const V6=j.forwardRef(({className:e,...t},n)=>s.jsx(PP,{ref:n,className:Ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));V6.displayName=PP.displayName;const KP=j.forwardRef(({className:e,...t},n)=>s.jsx(EP,{ref:n,className:Ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Ys,{className:"h-4 w-4"})}));KP.displayName=EP.displayName;const YP=j.forwardRef(({className:e,...t},n)=>s.jsx(kP,{ref:n,className:Ye("text-sm font-semibold",e),...t}));YP.displayName=kP.displayName;const XP=j.forwardRef(({className:e,...t},n)=>s.jsx(CP,{ref:n,className:Ye("text-sm opacity-90",e),...t}));XP.displayName=CP.displayName;function U6(){const{toasts:e}=es();return s.jsxs(z6,{children:[e.map(function({id:t,title:n,description:r,action:a,...i}){return s.jsxs(GP,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(YP,{children:n}),r&&s.jsx(XP,{children:r})]}),a,s.jsx(KP,{})]},t)}),s.jsx(ZP,{})]})}var CN=["light","dark"],q6="(prefers-color-scheme: dark)",H6=j.createContext(void 0),W6={setTheme:e=>{},themes:[]},Z6=()=>{var e;return(e=j.useContext(H6))!=null?e:W6};j.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,attrs:c,nonce:d})=>{let h=i==="system",m=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,u=a?CN.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(x,v=!1,y=!0)=>{let w=o?o[x]:x,b=v?x+"|| ''":`'${w}'`,_="";return a&&y&&!v&&CN.includes(x)&&(_+=`d.style.colorScheme = '${x}';`),n==="class"?v||w?_+=`c.add(${b})`:_+="null":w&&(_+=`d[s](n,${b})`),_},p=e?`!function(){${m}${f(e)}}()`:r?`!function(){try{${m}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${h})){var t='${q6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${h?"":"else{"+f(i,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${u}}catch(t){}}();`;return j.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:p}})});var G6=e=>{switch(e){case"success":return X6;case"info":return Q6;case"warning":return J6;case"error":return eF;default:return null}},K6=Array(12).fill(0),Y6=({visible:e,className:t})=>Ce.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ce.createElement("div",{className:"sonner-spinner"},K6.map((n,r)=>Ce.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),X6=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),J6=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Q6=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),eF=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ce.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),tF=Ce.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ce.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ce.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),sF=()=>{let[e,t]=Ce.useState(document.hidden);return Ce.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Yv=1,nF=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Yv++,i=this.toasts.find(c=>c.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(c=>c.id===a?(this.publish({...c,...e,id:a,title:n}),{...c,...e,id:a,dismissible:o,title:n}):c):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,i,o=r.then(async d=>{if(i=["resolve",d],Ce.isValidElement(d))a=!1,this.create({id:n,type:"default",message:d});else if(aF(d)&&!d.ok){a=!1;let h=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description;this.create({id:n,type:"error",message:h,description:m})}else if(t.success!==void 0){a=!1;let h=typeof t.success=="function"?await t.success(d):t.success,m=typeof t.description=="function"?await t.description(d):t.description;this.create({id:n,type:"success",message:h,description:m})}}).catch(async d=>{if(i=["reject",d],t.error!==void 0){a=!1;let h=typeof t.error=="function"?await t.error(d):t.error,m=typeof t.description=="function"?await t.description(d):t.description;this.create({id:n,type:"error",message:h,description:m})}}).finally(()=>{var d;a&&(this.dismiss(n),n=void 0),(d=t.finally)==null||d.call(t)}),c=()=>new Promise((d,h)=>o.then(()=>i[0]==="reject"?h(i[1]):d(i[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Yv++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Dn=new nF,rF=(e,t)=>{let n=(t==null?void 0:t.id)||Yv++;return Dn.addToast({title:e,...t,id:n}),n},aF=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",iF=rF,oF=()=>Dn.toasts,lF=()=>Dn.getActiveToasts(),en=Object.assign(iF,{success:Dn.success,info:Dn.info,warning:Dn.warning,error:Dn.error,custom:Dn.custom,message:Dn.message,promise:Dn.promise,dismiss:Dn.dismiss,loading:Dn.loading},{getHistory:oF,getToasts:lF});function cF(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}cF(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function rf(e){return e.label!==void 0}var dF=3,uF="32px",hF="16px",PN=4e3,fF=356,mF=14,pF=20,gF=200;function Tr(...e){return e.filter(Boolean).join(" ")}function xF(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var vF=e=>{var t,n,r,a,i,o,c,d,h,m,u;let{invert:f,toast:p,unstyled:x,interacting:v,setHeights:y,visibleToasts:w,heights:b,index:_,toasts:N,expanded:k,removeToast:E,defaultRichColors:T,closeButton:R,style:$,cancelButtonStyle:M,actionButtonStyle:A,className:C="",descriptionClassName:z="",duration:P,position:O,gap:Y,loadingIcon:J,expandByDefault:G,classNames:F,icons:I,closeButtonAriaLabel:V="Close toast",pauseWhenPageIsHidden:H}=e,[U,q]=Ce.useState(null),[K,B]=Ce.useState(null),[W,oe]=Ce.useState(!1),[X,re]=Ce.useState(!1),[ue,me]=Ce.useState(!1),[we,be]=Ce.useState(!1),[ae,ee]=Ce.useState(!1),[ye,le]=Ce.useState(0),[de,Q]=Ce.useState(0),se=Ce.useRef(p.duration||P||PN),ne=Ce.useRef(null),ve=Ce.useRef(null),pe=_===0,ge=_+1<=w,ke=p.type,Be=p.dismissible!==!1,qe=p.className||"",gt=p.descriptionClassName||"",ct=Ce.useMemo(()=>b.findIndex(Le=>Le.toastId===p.id)||0,[b,p.id]),Xe=Ce.useMemo(()=>{var Le;return(Le=p.closeButton)!=null?Le:R},[p.closeButton,R]),ce=Ce.useMemo(()=>p.duration||P||PN,[p.duration,P]),Te=Ce.useRef(0),Ue=Ce.useRef(0),mt=Ce.useRef(0),Ie=Ce.useRef(null),[ht,gs]=O.split("-"),Os=Ce.useMemo(()=>b.reduce((Le,Ze,at)=>at>=ct?Le:Le+Ze.height,0),[b,ct]),xn=sF(),vn=p.invert||f,Fa=ke==="loading";Ue.current=Ce.useMemo(()=>ct*Y+Os,[ct,Os]),Ce.useEffect(()=>{se.current=ce},[ce]),Ce.useEffect(()=>{oe(!0)},[]),Ce.useEffect(()=>{let Le=ve.current;if(Le){let Ze=Le.getBoundingClientRect().height;return Q(Ze),y(at=>[{toastId:p.id,height:Ze,position:p.position},...at]),()=>y(at=>at.filter(et=>et.toastId!==p.id))}},[y,p.id]),Ce.useLayoutEffect(()=>{if(!W)return;let Le=ve.current,Ze=Le.style.height;Le.style.height="auto";let at=Le.getBoundingClientRect().height;Le.style.height=Ze,Q(at),y(et=>et.find(kt=>kt.toastId===p.id)?et.map(kt=>kt.toastId===p.id?{...kt,height:at}:kt):[{toastId:p.id,height:at,position:p.position},...et])},[W,p.title,p.description,y,p.id]);let he=Ce.useCallback(()=>{re(!0),le(Ue.current),y(Le=>Le.filter(Ze=>Ze.toastId!==p.id)),setTimeout(()=>{E(p)},gF)},[p,E,y,Ue]);Ce.useEffect(()=>{if(p.promise&&ke==="loading"||p.duration===1/0||p.type==="loading")return;let Le;return k||v||H&&xn?(()=>{if(mt.current<Te.current){let Ze=new Date().getTime()-Te.current;se.current=se.current-Ze}mt.current=new Date().getTime()})():se.current!==1/0&&(Te.current=new Date().getTime(),Le=setTimeout(()=>{var Ze;(Ze=p.onAutoClose)==null||Ze.call(p,p),he()},se.current)),()=>clearTimeout(Le)},[k,v,p,ke,H,xn,he]),Ce.useEffect(()=>{p.delete&&he()},[he,p.delete]);function rt(){var Le,Ze,at;return I!=null&&I.loading?Ce.createElement("div",{className:Tr(F==null?void 0:F.loader,(Le=p==null?void 0:p.classNames)==null?void 0:Le.loader,"sonner-loader"),"data-visible":ke==="loading"},I.loading):J?Ce.createElement("div",{className:Tr(F==null?void 0:F.loader,(Ze=p==null?void 0:p.classNames)==null?void 0:Ze.loader,"sonner-loader"),"data-visible":ke==="loading"},J):Ce.createElement(Y6,{className:Tr(F==null?void 0:F.loader,(at=p==null?void 0:p.classNames)==null?void 0:at.loader),visible:ke==="loading"})}return Ce.createElement("li",{tabIndex:0,ref:ve,className:Tr(C,qe,F==null?void 0:F.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,F==null?void 0:F.default,F==null?void 0:F[ke],(n=p==null?void 0:p.classNames)==null?void 0:n[ke]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:T,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":W,"data-promise":!!p.promise,"data-swiped":ae,"data-removed":X,"data-visible":ge,"data-y-position":ht,"data-x-position":gs,"data-index":_,"data-front":pe,"data-swiping":ue,"data-dismissible":Be,"data-type":ke,"data-invert":vn,"data-swipe-out":we,"data-swipe-direction":K,"data-expanded":!!(k||G&&W),style:{"--index":_,"--toasts-before":_,"--z-index":N.length-_,"--offset":`${X?ye:Ue.current}px`,"--initial-height":G?"auto":`${de}px`,...$,...p.style},onDragEnd:()=>{me(!1),q(null),Ie.current=null},onPointerDown:Le=>{Fa||!Be||(ne.current=new Date,le(Ue.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(me(!0),Ie.current={x:Le.clientX,y:Le.clientY}))},onPointerUp:()=>{var Le,Ze,at,et;if(we||!Be)return;Ie.current=null;let kt=Number(((Le=ve.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Wt=Number(((Ze=ve.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Rs=new Date().getTime()-((at=ne.current)==null?void 0:at.getTime()),is=U==="x"?kt:Wt,zs=Math.abs(is)/Rs;if(Math.abs(is)>=pF||zs>.11){le(Ue.current),(et=p.onDismiss)==null||et.call(p,p),B(U==="x"?kt>0?"right":"left":Wt>0?"down":"up"),he(),be(!0),ee(!1);return}me(!1),q(null)},onPointerMove:Le=>{var Ze,at,et,kt;if(!Ie.current||!Be||((Ze=window.getSelection())==null?void 0:Ze.toString().length)>0)return;let Wt=Le.clientY-Ie.current.y,Rs=Le.clientX-Ie.current.x,is=(at=e.swipeDirections)!=null?at:xF(O);!U&&(Math.abs(Rs)>1||Math.abs(Wt)>1)&&q(Math.abs(Rs)>Math.abs(Wt)?"x":"y");let zs={x:0,y:0};U==="y"?(is.includes("top")||is.includes("bottom"))&&(is.includes("top")&&Wt<0||is.includes("bottom")&&Wt>0)&&(zs.y=Wt):U==="x"&&(is.includes("left")||is.includes("right"))&&(is.includes("left")&&Rs<0||is.includes("right")&&Rs>0)&&(zs.x=Rs),(Math.abs(zs.x)>0||Math.abs(zs.y)>0)&&ee(!0),(et=ve.current)==null||et.style.setProperty("--swipe-amount-x",`${zs.x}px`),(kt=ve.current)==null||kt.style.setProperty("--swipe-amount-y",`${zs.y}px`)}},Xe&&!p.jsx?Ce.createElement("button",{"aria-label":V,"data-disabled":Fa,"data-close-button":!0,onClick:Fa||!Be?()=>{}:()=>{var Le;he(),(Le=p.onDismiss)==null||Le.call(p,p)},className:Tr(F==null?void 0:F.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=I==null?void 0:I.close)!=null?i:tF):null,p.jsx||j.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:Ce.createElement(Ce.Fragment,null,ke||p.icon||p.promise?Ce.createElement("div",{"data-icon":"",className:Tr(F==null?void 0:F.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||rt():null,p.type!=="loading"?p.icon||(I==null?void 0:I[ke])||G6(ke):null):null,Ce.createElement("div",{"data-content":"",className:Tr(F==null?void 0:F.content,(c=p==null?void 0:p.classNames)==null?void 0:c.content)},Ce.createElement("div",{"data-title":"",className:Tr(F==null?void 0:F.title,(d=p==null?void 0:p.classNames)==null?void 0:d.title)},typeof p.title=="function"?p.title():p.title),p.description?Ce.createElement("div",{"data-description":"",className:Tr(z,gt,F==null?void 0:F.description,(h=p==null?void 0:p.classNames)==null?void 0:h.description)},typeof p.description=="function"?p.description():p.description):null),j.isValidElement(p.cancel)?p.cancel:p.cancel&&rf(p.cancel)?Ce.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||M,onClick:Le=>{var Ze,at;rf(p.cancel)&&Be&&((at=(Ze=p.cancel).onClick)==null||at.call(Ze,Le),he())},className:Tr(F==null?void 0:F.cancelButton,(m=p==null?void 0:p.classNames)==null?void 0:m.cancelButton)},p.cancel.label):null,j.isValidElement(p.action)?p.action:p.action&&rf(p.action)?Ce.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||A,onClick:Le=>{var Ze,at;rf(p.action)&&((at=(Ze=p.action).onClick)==null||at.call(Ze,Le),!Le.defaultPrevented&&he())},className:Tr(F==null?void 0:F.actionButton,(u=p==null?void 0:p.classNames)==null?void 0:u.actionButton)},p.action.label):null))};function EN(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function yF(e,t){let n={};return[e,t].forEach((r,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",c=i?hF:uF;function d(h){["top","right","bottom","left"].forEach(m=>{n[`${o}-${m}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${o}-${h}`]=c:n[`${o}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(c)}),n}var bF=j.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:c,offset:d,mobileOffset:h,theme:m="light",richColors:u,duration:f,style:p,visibleToasts:x=dF,toastOptions:v,dir:y=EN(),gap:w=mF,loadingIcon:b,icons:_,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:k}=e,[E,T]=Ce.useState([]),R=Ce.useMemo(()=>Array.from(new Set([r].concat(E.filter(H=>H.position).map(H=>H.position)))),[E,r]),[$,M]=Ce.useState([]),[A,C]=Ce.useState(!1),[z,P]=Ce.useState(!1),[O,Y]=Ce.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=Ce.useRef(null),G=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=Ce.useRef(null),I=Ce.useRef(!1),V=Ce.useCallback(H=>{T(U=>{var q;return(q=U.find(K=>K.id===H.id))!=null&&q.delete||Dn.dismiss(H.id),U.filter(({id:K})=>K!==H.id)})},[]);return Ce.useEffect(()=>Dn.subscribe(H=>{if(H.dismiss){T(U=>U.map(q=>q.id===H.id?{...q,delete:!0}:q));return}setTimeout(()=>{nP.flushSync(()=>{T(U=>{let q=U.findIndex(K=>K.id===H.id);return q!==-1?[...U.slice(0,q),{...U[q],...H},...U.slice(q+1)]:[H,...U]})})})}),[]),Ce.useEffect(()=>{if(m!=="system"){Y(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:U})=>{Y(U?"dark":"light")})}catch{H.addListener(({matches:q})=>{try{Y(q?"dark":"light")}catch(K){console.error(K)}})}},[m]),Ce.useEffect(()=>{E.length<=1&&C(!1)},[E]),Ce.useEffect(()=>{let H=U=>{var q,K;a.every(B=>U[B]||U.code===B)&&(C(!0),(q=J.current)==null||q.focus()),U.code==="Escape"&&(document.activeElement===J.current||(K=J.current)!=null&&K.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[a]),Ce.useEffect(()=>{if(J.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,I.current=!1)}},[J.current]),Ce.createElement("section",{ref:t,"aria-label":`${N} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((H,U)=>{var q;let[K,B]=H.split("-");return E.length?Ce.createElement("ol",{key:H,dir:y==="auto"?EN():y,tabIndex:-1,ref:J,className:c,"data-sonner-toaster":!0,"data-theme":O,"data-y-position":K,"data-lifted":A&&E.length>1&&!i,"data-x-position":B,style:{"--front-toast-height":`${((q=$[0])==null?void 0:q.height)||0}px`,"--width":`${fF}px`,"--gap":`${w}px`,...p,...yF(d,h)},onBlur:W=>{I.current&&!W.currentTarget.contains(W.relatedTarget)&&(I.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||I.current||(I.current=!0,F.current=W.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{z||C(!1)},onDragEnd:()=>C(!1),onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},E.filter(W=>!W.position&&U===0||W.position===H).map((W,oe)=>{var X,re;return Ce.createElement(vF,{key:W.id,icons:_,index:oe,toast:W,defaultRichColors:u,duration:(X=v==null?void 0:v.duration)!=null?X:f,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:x,closeButton:(re=v==null?void 0:v.closeButton)!=null?re:o,interacting:z,position:H,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:V,toasts:E.filter(ue=>ue.position==W.position),heights:$.filter(ue=>ue.position==W.position),setHeights:M,expandByDefault:i,gap:w,loadingIcon:b,expanded:A,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});const wF=({...e})=>{const{theme:t="system"}=Z6();return s.jsx(bF,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var jF=w0[" useId ".trim().toString()]||(()=>{}),_F=0;function Zr(e){const[t,n]=j.useState(jF());return As(()=>{e||n(r=>r??String(_F++))},[e]),e||(t?`radix-${t}`:"")}const NF=["top","right","bottom","left"],Xi=Math.min,er=Math.max,fm=Math.round,af=Math.floor,Na=e=>({x:e,y:e}),SF={left:"right",right:"left",bottom:"top",top:"bottom"},kF={start:"end",end:"start"};function Xv(e,t,n){return er(e,Xi(t,n))}function ii(e,t){return typeof e=="function"?e(t):e}function oi(e){return e.split("-")[0]}function Gc(e){return e.split("-")[1]}function Nb(e){return e==="x"?"y":"x"}function Sb(e){return e==="y"?"height":"width"}const CF=new Set(["top","bottom"]);function va(e){return CF.has(oi(e))?"y":"x"}function kb(e){return Nb(va(e))}function PF(e,t,n){n===void 0&&(n=!1);const r=Gc(e),a=kb(e),i=Sb(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=mm(o)),[o,mm(o)]}function EF(e){const t=mm(e);return[Jv(e),t,Jv(t)]}function Jv(e){return e.replace(/start|end/g,t=>kF[t])}const TN=["left","right"],AN=["right","left"],TF=["top","bottom"],AF=["bottom","top"];function OF(e,t,n){switch(e){case"top":case"bottom":return n?t?AN:TN:t?TN:AN;case"left":case"right":return t?TF:AF;default:return[]}}function RF(e,t,n,r){const a=Gc(e);let i=OF(oi(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Jv)))),i}function mm(e){return e.replace(/left|right|bottom|top/g,t=>SF[t])}function LF(e){return{top:0,right:0,bottom:0,left:0,...e}}function JP(e){return typeof e!="number"?LF(e):{top:e,right:e,bottom:e,left:e}}function pm(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function ON(e,t,n){let{reference:r,floating:a}=e;const i=va(t),o=kb(t),c=Sb(o),d=oi(t),h=i==="y",m=r.x+r.width/2-a.width/2,u=r.y+r.height/2-a.height/2,f=r[c]/2-a[c]/2;let p;switch(d){case"top":p={x:m,y:r.y-a.height};break;case"bottom":p={x:m,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:u};break;case"left":p={x:r.x-a.width,y:u};break;default:p={x:r.x,y:r.y}}switch(Gc(t)){case"start":p[o]-=f*(n&&h?-1:1);break;case"end":p[o]+=f*(n&&h?-1:1);break}return p}const MF=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,c=i.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:m,y:u}=ON(h,r,d),f=r,p={},x=0;for(let v=0;v<c.length;v++){const{name:y,fn:w}=c[v],{x:b,y:_,data:N,reset:k}=await w({x:m,y:u,initialPlacement:r,placement:f,strategy:a,middlewareData:p,rects:h,platform:o,elements:{reference:e,floating:t}});m=b??m,u=_??u,p={...p,[y]:{...p[y],...N}},k&&x<=50&&(x++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(h=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:m,y:u}=ON(h,f,d)),v=-1)}return{x:m,y:u,placement:f,strategy:a,middlewareData:p}};async function Mu(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:c,strategy:d}=e,{boundary:h="clippingAncestors",rootBoundary:m="viewport",elementContext:u="floating",altBoundary:f=!1,padding:p=0}=ii(t,e),x=JP(p),y=c[f?u==="floating"?"reference":"floating":u],w=pm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(y)))==null||n?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:h,rootBoundary:m,strategy:d})),b=u==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),N=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},k=pm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:_,strategy:d}):b);return{top:(w.top-k.top+x.top)/N.y,bottom:(k.bottom-w.bottom+x.bottom)/N.y,left:(w.left-k.left+x.left)/N.x,right:(k.right-w.right+x.right)/N.x}}const IF=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:c,middlewareData:d}=t,{element:h,padding:m=0}=ii(e,t)||{};if(h==null)return{};const u=JP(m),f={x:n,y:r},p=kb(a),x=Sb(p),v=await o.getDimensions(h),y=p==="y",w=y?"top":"left",b=y?"bottom":"right",_=y?"clientHeight":"clientWidth",N=i.reference[x]+i.reference[p]-f[p]-i.floating[x],k=f[p]-i.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let T=E?E[_]:0;(!T||!await(o.isElement==null?void 0:o.isElement(E)))&&(T=c.floating[_]||i.floating[x]);const R=N/2-k/2,$=T/2-v[x]/2-1,M=Xi(u[w],$),A=Xi(u[b],$),C=M,z=T-v[x]-A,P=T/2-v[x]/2+R,O=Xv(C,P,z),Y=!d.arrow&&Gc(a)!=null&&P!==O&&i.reference[x]/2-(P<C?M:A)-v[x]/2<0,J=Y?P<C?P-C:P-z:0;return{[p]:f[p]+J,data:{[p]:O,centerOffset:P-O-J,...Y&&{alignmentOffset:J}},reset:Y}}}),DF=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:c,platform:d,elements:h}=t,{mainAxis:m=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...y}=ii(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=oi(a),b=va(c),_=oi(c)===c,N=await(d.isRTL==null?void 0:d.isRTL(h.floating)),k=f||(_||!v?[mm(c)]:EF(c)),E=x!=="none";!f&&E&&k.push(...RF(c,v,x,N));const T=[c,...k],R=await Mu(t,y),$=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(m&&$.push(R[w]),u){const P=PF(a,o,N);$.push(R[P[0]],R[P[1]])}if(M=[...M,{placement:a,overflows:$}],!$.every(P=>P<=0)){var A,C;const P=(((A=i.flip)==null?void 0:A.index)||0)+1,O=T[P];if(O&&(!(u==="alignment"?b!==va(O):!1)||M.every(G=>G.overflows[0]>0&&va(G.placement)===b)))return{data:{index:P,overflows:M},reset:{placement:O}};let Y=(C=M.filter(J=>J.overflows[0]<=0).sort((J,G)=>J.overflows[1]-G.overflows[1])[0])==null?void 0:C.placement;if(!Y)switch(p){case"bestFit":{var z;const J=(z=M.filter(G=>{if(E){const F=va(G.placement);return F===b||F==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(F=>F>0).reduce((F,I)=>F+I,0)]).sort((G,F)=>G[1]-F[1])[0])==null?void 0:z[0];J&&(Y=J);break}case"initialPlacement":Y=c;break}if(a!==Y)return{reset:{placement:Y}}}return{}}}};function RN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function LN(e){return NF.some(t=>e[t]>=0)}const FF=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=ii(e,t);switch(r){case"referenceHidden":{const i=await Mu(t,{...a,elementContext:"reference"}),o=RN(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:LN(o)}}}case"escaped":{const i=await Mu(t,{...a,altBoundary:!0}),o=RN(i,n.floating);return{data:{escapedOffsets:o,escaped:LN(o)}}}default:return{}}}}},QP=new Set(["left","top"]);async function $F(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=oi(n),c=Gc(n),d=va(n)==="y",h=QP.has(o)?-1:1,m=i&&d?-1:1,u=ii(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:x}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return c&&typeof x=="number"&&(p=c==="end"?x*-1:x),d?{x:p*m,y:f*h}:{x:f*h,y:p*m}}const zF=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:c}=t,d=await $F(t,e);return o===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:a+d.x,y:i+d.y,data:{...d,placement:o}}}}},BF=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:c={fn:y=>{let{x:w,y:b}=y;return{x:w,y:b}}},...d}=ii(e,t),h={x:n,y:r},m=await Mu(t,d),u=va(oi(a)),f=Nb(u);let p=h[f],x=h[u];if(i){const y=f==="y"?"top":"left",w=f==="y"?"bottom":"right",b=p+m[y],_=p-m[w];p=Xv(b,p,_)}if(o){const y=u==="y"?"top":"left",w=u==="y"?"bottom":"right",b=x+m[y],_=x-m[w];x=Xv(b,x,_)}const v=c.fn({...t,[f]:p,[u]:x});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[f]:i,[u]:o}}}}}},VF=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=ii(e,t),m={x:n,y:r},u=va(a),f=Nb(u);let p=m[f],x=m[u];const v=ii(c,t),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(d){const _=f==="y"?"height":"width",N=i.reference[f]-i.floating[_]+y.mainAxis,k=i.reference[f]+i.reference[_]-y.mainAxis;p<N?p=N:p>k&&(p=k)}if(h){var w,b;const _=f==="y"?"width":"height",N=QP.has(oi(a)),k=i.reference[u]-i.floating[_]+(N&&((w=o.offset)==null?void 0:w[u])||0)+(N?0:y.crossAxis),E=i.reference[u]+i.reference[_]+(N?0:((b=o.offset)==null?void 0:b[u])||0)-(N?y.crossAxis:0);x<k?x=k:x>E&&(x=E)}return{[f]:p,[u]:x}}}},UF=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:c}=t,{apply:d=()=>{},...h}=ii(e,t),m=await Mu(t,h),u=oi(a),f=Gc(a),p=va(a)==="y",{width:x,height:v}=i.floating;let y,w;u==="top"||u==="bottom"?(y=u,w=f===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(w=u,y=f==="end"?"top":"bottom");const b=v-m.top-m.bottom,_=x-m.left-m.right,N=Xi(v-m[y],b),k=Xi(x-m[w],_),E=!t.middlewareData.shift;let T=N,R=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(R=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(T=b),E&&!f){const M=er(m.left,0),A=er(m.right,0),C=er(m.top,0),z=er(m.bottom,0);p?R=x-2*(M!==0||A!==0?M+A:er(m.left,m.right)):T=v-2*(C!==0||z!==0?C+z:er(m.top,m.bottom))}await d({...t,availableWidth:R,availableHeight:T});const $=await o.getDimensions(c.floating);return x!==$.width||v!==$.height?{reset:{rects:!0}}:{}}}};function vp(){return typeof window<"u"}function Kc(e){return eE(e)?(e.nodeName||"").toLowerCase():"#document"}function rr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ma(e){var t;return(t=(eE(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function eE(e){return vp()?e instanceof Node||e instanceof rr(e).Node:!1}function Xr(e){return vp()?e instanceof Element||e instanceof rr(e).Element:!1}function Oa(e){return vp()?e instanceof HTMLElement||e instanceof rr(e).HTMLElement:!1}function MN(e){return!vp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rr(e).ShadowRoot}const qF=new Set(["inline","contents"]);function dh(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Jr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!qF.has(a)}const HF=new Set(["table","td","th"]);function WF(e){return HF.has(Kc(e))}const ZF=[":popover-open",":modal"];function yp(e){return ZF.some(t=>{try{return e.matches(t)}catch{return!1}})}const GF=["transform","translate","scale","rotate","perspective"],KF=["transform","translate","scale","rotate","perspective","filter"],YF=["paint","layout","strict","content"];function Cb(e){const t=Pb(),n=Xr(e)?Jr(e):e;return GF.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||KF.some(r=>(n.willChange||"").includes(r))||YF.some(r=>(n.contain||"").includes(r))}function XF(e){let t=Ji(e);for(;Oa(t)&&!kc(t);){if(Cb(t))return t;if(yp(t))return null;t=Ji(t)}return null}function Pb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const JF=new Set(["html","body","#document"]);function kc(e){return JF.has(Kc(e))}function Jr(e){return rr(e).getComputedStyle(e)}function bp(e){return Xr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ji(e){if(Kc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||MN(e)&&e.host||Ma(e);return MN(t)?t.host:t}function tE(e){const t=Ji(e);return kc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Oa(t)&&dh(t)?t:tE(t)}function Iu(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=tE(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=rr(a);if(i){const c=Qv(o);return t.concat(o,o.visualViewport||[],dh(a)?a:[],c&&n?Iu(c):[])}return t.concat(a,Iu(a,[],n))}function Qv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function sE(e){const t=Jr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Oa(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,c=fm(n)!==i||fm(r)!==o;return c&&(n=i,r=o),{width:n,height:r,$:c}}function Eb(e){return Xr(e)?e:e.contextElement}function nc(e){const t=Eb(e);if(!Oa(t))return Na(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=sE(t);let o=(i?fm(n.width):n.width)/r,c=(i?fm(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const QF=Na(0);function nE(e){const t=rr(e);return!Pb()||!t.visualViewport?QF:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function e8(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==rr(e)?!1:t}function sl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=Eb(e);let o=Na(1);t&&(r?Xr(r)&&(o=nc(r)):o=nc(e));const c=e8(i,n,r)?nE(i):Na(0);let d=(a.left+c.x)/o.x,h=(a.top+c.y)/o.y,m=a.width/o.x,u=a.height/o.y;if(i){const f=rr(i),p=r&&Xr(r)?rr(r):r;let x=f,v=Qv(x);for(;v&&r&&p!==x;){const y=nc(v),w=v.getBoundingClientRect(),b=Jr(v),_=w.left+(v.clientLeft+parseFloat(b.paddingLeft))*y.x,N=w.top+(v.clientTop+parseFloat(b.paddingTop))*y.y;d*=y.x,h*=y.y,m*=y.x,u*=y.y,d+=_,h+=N,x=rr(v),v=Qv(x)}}return pm({width:m,height:u,x:d,y:h})}function Tb(e,t){const n=bp(e).scrollLeft;return t?t.left+n:sl(Ma(e)).left+n}function rE(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:Tb(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function t8(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Ma(r),c=t?yp(t.floating):!1;if(r===o||c&&i)return n;let d={scrollLeft:0,scrollTop:0},h=Na(1);const m=Na(0),u=Oa(r);if((u||!u&&!i)&&((Kc(r)!=="body"||dh(o))&&(d=bp(r)),Oa(r))){const p=sl(r);h=nc(r),m.x=p.x+r.clientLeft,m.y=p.y+r.clientTop}const f=o&&!u&&!i?rE(o,d,!0):Na(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+m.x+f.x,y:n.y*h.y-d.scrollTop*h.y+m.y+f.y}}function s8(e){return Array.from(e.getClientRects())}function n8(e){const t=Ma(e),n=bp(e),r=e.ownerDocument.body,a=er(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=er(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Tb(e);const c=-n.scrollTop;return Jr(r).direction==="rtl"&&(o+=er(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:c}}function r8(e,t){const n=rr(e),r=Ma(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,c=0,d=0;if(a){i=a.width,o=a.height;const h=Pb();(!h||h&&t==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}return{width:i,height:o,x:c,y:d}}const a8=new Set(["absolute","fixed"]);function i8(e,t){const n=sl(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Oa(e)?nc(e):Na(1),o=e.clientWidth*i.x,c=e.clientHeight*i.y,d=a*i.x,h=r*i.y;return{width:o,height:c,x:d,y:h}}function IN(e,t,n){let r;if(t==="viewport")r=r8(e,n);else if(t==="document")r=n8(Ma(e));else if(Xr(t))r=i8(t,n);else{const a=nE(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return pm(r)}function aE(e,t){const n=Ji(e);return n===t||!Xr(n)||kc(n)?!1:Jr(n).position==="fixed"||aE(n,t)}function o8(e,t){const n=t.get(e);if(n)return n;let r=Iu(e,[],!1).filter(c=>Xr(c)&&Kc(c)!=="body"),a=null;const i=Jr(e).position==="fixed";let o=i?Ji(e):e;for(;Xr(o)&&!kc(o);){const c=Jr(o),d=Cb(o);!d&&c.position==="fixed"&&(a=null),(i?!d&&!a:!d&&c.position==="static"&&!!a&&a8.has(a.position)||dh(o)&&!d&&aE(e,o))?r=r.filter(m=>m!==o):a=c,o=Ji(o)}return t.set(e,r),r}function l8(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?yp(t)?[]:o8(t,this._c):[].concat(n),r],c=o[0],d=o.reduce((h,m)=>{const u=IN(t,m,a);return h.top=er(u.top,h.top),h.right=Xi(u.right,h.right),h.bottom=Xi(u.bottom,h.bottom),h.left=er(u.left,h.left),h},IN(t,c,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function c8(e){const{width:t,height:n}=sE(e);return{width:t,height:n}}function d8(e,t,n){const r=Oa(t),a=Ma(t),i=n==="fixed",o=sl(e,!0,i,t);let c={scrollLeft:0,scrollTop:0};const d=Na(0);function h(){d.x=Tb(a)}if(r||!r&&!i)if((Kc(t)!=="body"||dh(a))&&(c=bp(t)),r){const p=sl(t,!0,i,t);d.x=p.x+t.clientLeft,d.y=p.y+t.clientTop}else a&&h();i&&!r&&a&&h();const m=a&&!r&&!i?rE(a,c):Na(0),u=o.left+c.scrollLeft-d.x-m.x,f=o.top+c.scrollTop-d.y-m.y;return{x:u,y:f,width:o.width,height:o.height}}function mx(e){return Jr(e).position==="static"}function DN(e,t){if(!Oa(e)||Jr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ma(e)===n&&(n=n.ownerDocument.body),n}function iE(e,t){const n=rr(e);if(yp(e))return n;if(!Oa(e)){let a=Ji(e);for(;a&&!kc(a);){if(Xr(a)&&!mx(a))return a;a=Ji(a)}return n}let r=DN(e,t);for(;r&&WF(r)&&mx(r);)r=DN(r,t);return r&&kc(r)&&mx(r)&&!Cb(r)?n:r||XF(e)||n}const u8=async function(e){const t=this.getOffsetParent||iE,n=this.getDimensions,r=await n(e.floating);return{reference:d8(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function h8(e){return Jr(e).direction==="rtl"}const f8={convertOffsetParentRelativeRectToViewportRelativeRect:t8,getDocumentElement:Ma,getClippingRect:l8,getOffsetParent:iE,getElementRects:u8,getClientRects:s8,getDimensions:c8,getScale:nc,isElement:Xr,isRTL:h8};function oE(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function m8(e,t){let n=null,r;const a=Ma(e);function i(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),i();const h=e.getBoundingClientRect(),{left:m,top:u,width:f,height:p}=h;if(c||t(),!f||!p)return;const x=af(u),v=af(a.clientWidth-(m+f)),y=af(a.clientHeight-(u+p)),w=af(m),_={rootMargin:-x+"px "+-v+"px "+-y+"px "+-w+"px",threshold:er(0,Xi(1,d))||1};let N=!0;function k(E){const T=E[0].intersectionRatio;if(T!==d){if(!N)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!oE(h,e.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(k,{..._,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,_)}n.observe(e)}return o(!0),i}function p8(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=Eb(e),m=a||i?[...h?Iu(h):[],...Iu(t)]:[];m.forEach(w=>{a&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const u=h&&c?m8(h,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(w=>{let[b]=w;b&&b.target===h&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),n()}),h&&!d&&p.observe(h),p.observe(t));let x,v=d?sl(e):null;d&&y();function y(){const w=sl(e);v&&!oE(v,w)&&n(),v=w,x=requestAnimationFrame(y)}return n(),()=>{var w;m.forEach(b=>{a&&b.removeEventListener("scroll",n),i&&b.removeEventListener("resize",n)}),u==null||u(),(w=p)==null||w.disconnect(),p=null,d&&cancelAnimationFrame(x)}}const g8=zF,x8=BF,v8=DF,y8=UF,b8=FF,FN=IF,w8=VF,j8=(e,t,n)=>{const r=new Map,a={platform:f8,...n},i={...a.platform,_c:r};return MF(e,t,{...a,platform:i})};var _8=typeof document<"u",N8=function(){},Of=_8?j.useLayoutEffect:N8;function gm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!gm(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!gm(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function lE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $N(e,t){const n=lE(e);return Math.round(t*n)/n}function px(e){const t=j.useRef(e);return Of(()=>{t.current=e}),t}function S8(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:c=!0,whileElementsMounted:d,open:h}=e,[m,u]=j.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=j.useState(r);gm(f,r)||p(r);const[x,v]=j.useState(null),[y,w]=j.useState(null),b=j.useCallback(G=>{G!==E.current&&(E.current=G,v(G))},[]),_=j.useCallback(G=>{G!==T.current&&(T.current=G,w(G))},[]),N=i||x,k=o||y,E=j.useRef(null),T=j.useRef(null),R=j.useRef(m),$=d!=null,M=px(d),A=px(a),C=px(h),z=j.useCallback(()=>{if(!E.current||!T.current)return;const G={placement:t,strategy:n,middleware:f};A.current&&(G.platform=A.current),j8(E.current,T.current,G).then(F=>{const I={...F,isPositioned:C.current!==!1};P.current&&!gm(R.current,I)&&(R.current=I,oo.flushSync(()=>{u(I)}))})},[f,t,n,A,C]);Of(()=>{h===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,u(G=>({...G,isPositioned:!1})))},[h]);const P=j.useRef(!1);Of(()=>(P.current=!0,()=>{P.current=!1}),[]),Of(()=>{if(N&&(E.current=N),k&&(T.current=k),N&&k){if(M.current)return M.current(N,k,z);z()}},[N,k,z,M,$]);const O=j.useMemo(()=>({reference:E,floating:T,setReference:b,setFloating:_}),[b,_]),Y=j.useMemo(()=>({reference:N,floating:k}),[N,k]),J=j.useMemo(()=>{const G={position:n,left:0,top:0};if(!Y.floating)return G;const F=$N(Y.floating,m.x),I=$N(Y.floating,m.y);return c?{...G,transform:"translate("+F+"px, "+I+"px)",...lE(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:I}},[n,c,Y.floating,m.x,m.y]);return j.useMemo(()=>({...m,update:z,refs:O,elements:Y,floatingStyles:J}),[m,z,O,Y,J])}const k8=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?FN({element:r.current,padding:a}).fn(n):{}:r?FN({element:r,padding:a}).fn(n):{}}}},C8=(e,t)=>({...g8(e),options:[e,t]}),P8=(e,t)=>({...x8(e),options:[e,t]}),E8=(e,t)=>({...w8(e),options:[e,t]}),T8=(e,t)=>({...v8(e),options:[e,t]}),A8=(e,t)=>({...y8(e),options:[e,t]}),O8=(e,t)=>({...b8(e),options:[e,t]}),R8=(e,t)=>({...k8(e),options:[e,t]});var L8="Arrow",cE=j.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return s.jsx(st.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});cE.displayName=L8;var M8=cE;function wp(e){const[t,n]=j.useState(void 0);return As(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,c;if("borderBoxSize"in i){const d=i.borderBoxSize,h=Array.isArray(d)?d[0]:d;o=h.inlineSize,c=h.blockSize}else o=e.offsetWidth,c=e.offsetHeight;n({width:o,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Ab="Popper",[dE,Yc]=gn(Ab),[I8,uE]=dE(Ab),hE=e=>{const{__scopePopper:t,children:n}=e,[r,a]=j.useState(null);return s.jsx(I8,{scope:t,anchor:r,onAnchorChange:a,children:n})};hE.displayName=Ab;var fE="PopperAnchor",mE=j.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=uE(fE,n),o=j.useRef(null),c=bt(t,o);return j.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(st.div,{...a,ref:c})});mE.displayName=fE;var Ob="PopperContent",[D8,F8]=dE(Ob),pE=j.forwardRef((e,t)=>{var W,oe,X,re,ue,me;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:m=0,sticky:u="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:x,...v}=e,y=uE(Ob,n),[w,b]=j.useState(null),_=bt(t,we=>b(we)),[N,k]=j.useState(null),E=wp(N),T=(E==null?void 0:E.width)??0,R=(E==null?void 0:E.height)??0,$=r+(i!=="center"?"-"+i:""),M=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},A=Array.isArray(h)?h:[h],C=A.length>0,z={padding:M,boundary:A.filter(z8),altBoundary:C},{refs:P,floatingStyles:O,placement:Y,isPositioned:J,middlewareData:G}=S8({strategy:"fixed",placement:$,whileElementsMounted:(...we)=>p8(...we,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[C8({mainAxis:a+R,alignmentAxis:o}),d&&P8({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?E8():void 0,...z}),d&&T8({...z}),A8({...z,apply:({elements:we,rects:be,availableWidth:ae,availableHeight:ee})=>{const{width:ye,height:le}=be.reference,de=we.floating.style;de.setProperty("--radix-popper-available-width",`${ae}px`),de.setProperty("--radix-popper-available-height",`${ee}px`),de.setProperty("--radix-popper-anchor-width",`${ye}px`),de.setProperty("--radix-popper-anchor-height",`${le}px`)}}),N&&R8({element:N,padding:c}),B8({arrowWidth:T,arrowHeight:R}),f&&O8({strategy:"referenceHidden",...z})]}),[F,I]=vE(Y),V=ws(x);As(()=>{J&&(V==null||V())},[J,V]);const H=(W=G.arrow)==null?void 0:W.x,U=(oe=G.arrow)==null?void 0:oe.y,q=((X=G.arrow)==null?void 0:X.centerOffset)!==0,[K,B]=j.useState();return As(()=>{w&&B(window.getComputedStyle(w).zIndex)},[w]),s.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...O,transform:J?O.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(re=G.transformOrigin)==null?void 0:re.x,(ue=G.transformOrigin)==null?void 0:ue.y].join(" "),...((me=G.hide)==null?void 0:me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(D8,{scope:n,placedSide:F,onArrowChange:k,arrowX:H,arrowY:U,shouldHideArrow:q,children:s.jsx(st.div,{"data-side":F,"data-align":I,...v,ref:_,style:{...v.style,animation:J?void 0:"none"}})})})});pE.displayName=Ob;var gE="PopperArrow",$8={top:"bottom",right:"left",bottom:"top",left:"right"},xE=j.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=F8(gE,r),o=$8[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(M8,{...a,ref:n,style:{...a.style,display:"block"}})})});xE.displayName=gE;function z8(e){return e!==null}var B8=e=>({name:"transformOrigin",options:e,fn(t){var y,w,b;const{placement:n,rects:r,middlewareData:a}=t,o=((y=a.arrow)==null?void 0:y.centerOffset)!==0,c=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[h,m]=vE(n),u={start:"0%",center:"50%",end:"100%"}[m],f=(((w=a.arrow)==null?void 0:w.x)??0)+c/2,p=(((b=a.arrow)==null?void 0:b.y)??0)+d/2;let x="",v="";return h==="bottom"?(x=o?u:`${f}px`,v=`${-d}px`):h==="top"?(x=o?u:`${f}px`,v=`${r.floating.height+d}px`):h==="right"?(x=`${-d}px`,v=o?u:`${p}px`):h==="left"&&(x=`${r.floating.width+d}px`,v=o?u:`${p}px`),{data:{x,y:v}}}});function vE(e){const[t,n="center"]=e.split("-");return[t,n]}var Rb=hE,Lb=mE,Mb=pE,Ib=xE,[jp,bre]=gn("Tooltip",[Yc]),_p=Yc(),yE="TooltipProvider",V8=700,ey="tooltip.open",[U8,Db]=jp(yE),bE=e=>{const{__scopeTooltip:t,delayDuration:n=V8,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=j.useRef(!0),c=j.useRef(!1),d=j.useRef(0);return j.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),s.jsx(U8,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:j.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:j.useCallback(h=>{c.current=h},[]),disableHoverableContent:a,children:i})};bE.displayName=yE;var Du="Tooltip",[q8,Np]=jp(Du),wE=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:c}=e,d=Db(Du,e.__scopeTooltip),h=_p(t),[m,u]=j.useState(null),f=Zr(),p=j.useRef(0),x=o??d.disableHoverableContent,v=c??d.delayDuration,y=j.useRef(!1),[w,b]=Kr({prop:r,defaultProp:a??!1,onChange:T=>{T?(d.onOpen(),document.dispatchEvent(new CustomEvent(ey))):d.onClose(),i==null||i(T)},caller:Du}),_=j.useMemo(()=>w?y.current?"delayed-open":"instant-open":"closed",[w]),N=j.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y.current=!1,b(!0)},[b]),k=j.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),E=j.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{y.current=!0,b(!0),p.current=0},v)},[v,b]);return j.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),s.jsx(Rb,{...h,children:s.jsx(q8,{scope:t,contentId:f,open:w,stateAttribute:_,trigger:m,onTriggerChange:u,onTriggerEnter:j.useCallback(()=>{d.isOpenDelayedRef.current?E():N()},[d.isOpenDelayedRef,E,N]),onTriggerLeave:j.useCallback(()=>{x?k():(window.clearTimeout(p.current),p.current=0)},[k,x]),onOpen:N,onClose:k,disableHoverableContent:x,children:n})})};wE.displayName=Du;var ty="TooltipTrigger",jE=j.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Np(ty,n),i=Db(ty,n),o=_p(n),c=j.useRef(null),d=bt(t,c,a.onTriggerChange),h=j.useRef(!1),m=j.useRef(!1),u=j.useCallback(()=>h.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),s.jsx(Lb,{asChild:!0,...o,children:s.jsx(st.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:d,onPointerMove:$e(e.onPointerMove,f=>{f.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),m.current=!0)}),onPointerLeave:$e(e.onPointerLeave,()=>{a.onTriggerLeave(),m.current=!1}),onPointerDown:$e(e.onPointerDown,()=>{a.open&&a.onClose(),h.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:$e(e.onFocus,()=>{h.current||a.onOpen()}),onBlur:$e(e.onBlur,a.onClose),onClick:$e(e.onClick,a.onClose)})})});jE.displayName=ty;var H8="TooltipPortal",[wre,W8]=jp(H8,{forceMount:void 0}),Cc="TooltipContent",_E=j.forwardRef((e,t)=>{const n=W8(Cc,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=Np(Cc,e.__scopeTooltip);return s.jsx(an,{present:r||o.open,children:o.disableHoverableContent?s.jsx(NE,{side:a,...i,ref:t}):s.jsx(Z8,{side:a,...i,ref:t})})}),Z8=j.forwardRef((e,t)=>{const n=Np(Cc,e.__scopeTooltip),r=Db(Cc,e.__scopeTooltip),a=j.useRef(null),i=bt(t,a),[o,c]=j.useState(null),{trigger:d,onClose:h}=n,m=a.current,{onPointerInTransitChange:u}=r,f=j.useCallback(()=>{c(null),u(!1)},[u]),p=j.useCallback((x,v)=>{const y=x.currentTarget,w={x:x.clientX,y:x.clientY},b=J8(w,y.getBoundingClientRect()),_=Q8(w,b),N=e$(v.getBoundingClientRect()),k=s$([..._,...N]);c(k),u(!0)},[u]);return j.useEffect(()=>()=>f(),[f]),j.useEffect(()=>{if(d&&m){const x=y=>p(y,m),v=y=>p(y,d);return d.addEventListener("pointerleave",x),m.addEventListener("pointerleave",v),()=>{d.removeEventListener("pointerleave",x),m.removeEventListener("pointerleave",v)}}},[d,m,p,f]),j.useEffect(()=>{if(o){const x=v=>{const y=v.target,w={x:v.clientX,y:v.clientY},b=(d==null?void 0:d.contains(y))||(m==null?void 0:m.contains(y)),_=!t$(w,o);b?f():_&&(f(),h())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[d,m,o,h,f]),s.jsx(NE,{...e,ref:i})}),[G8,K8]=jp(Du,{isInside:!1}),Y8=tD("TooltipContent"),NE=j.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...c}=e,d=Np(Cc,n),h=_p(n),{onClose:m}=d;return j.useEffect(()=>(document.addEventListener(ey,m),()=>document.removeEventListener(ey,m)),[m]),j.useEffect(()=>{if(d.trigger){const u=f=>{const p=f.target;p!=null&&p.contains(d.trigger)&&m()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[d.trigger,m]),s.jsx(Hc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:u=>u.preventDefault(),onDismiss:m,children:s.jsxs(Mb,{"data-state":d.stateAttribute,...h,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(Y8,{children:r}),s.jsx(G8,{scope:n,isInside:!0,children:s.jsx(_D,{id:d.contentId,role:"tooltip",children:a||r})})]})})});_E.displayName=Cc;var SE="TooltipArrow",X8=j.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=_p(n);return K8(SE,n).isInside?null:s.jsx(Ib,{...a,...r,ref:t})});X8.displayName=SE;function J8(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Q8(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function e$(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function t$(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const c=t[i],d=t[o],h=c.x,m=c.y,u=d.x,f=d.y;m>r!=f>r&&n<(u-h)*(r-m)/(f-m)+h&&(a=!a)}return a}function s$(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),n$(t)}function n$(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var r$=bE,a$=wE,i$=jE,kE=_E;const o$=r$,gx=a$,xx=i$,Rf=j.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(kE,{ref:r,sideOffset:t,className:Ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));Rf.displayName=kE.displayName;var Sp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},kp=typeof window>"u"||"Deno"in globalThis;function Lr(){}function l$(e,t){return typeof e=="function"?e(t):e}function c$(e){return typeof e=="number"&&e>=0&&e!==1/0}function d$(e,t){return Math.max(e+(t||0)-Date.now(),0)}function sy(e,t){return typeof e=="function"?e(t):e}function u$(e,t){return typeof e=="function"?e(t):e}function zN(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:c}=e;if(o){if(r){if(t.queryHash!==Fb(o,t.options))return!1}else if(!$u(t.queryKey,o))return!1}if(n!=="all"){const d=t.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||a&&a!==t.state.fetchStatus||i&&!i(t))}function BN(e,t){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Fu(t.options.mutationKey)!==Fu(i))return!1}else if(!$u(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function Fb(e,t){return((t==null?void 0:t.queryKeyHashFn)||Fu)(e)}function Fu(e){return JSON.stringify(e,(t,n)=>ny(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function $u(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>$u(e[n],t[n])):!1}function CE(e,t){if(e===t)return e;const n=VN(e)&&VN(t);if(n||ny(e)&&ny(t)){const r=n?e:Object.keys(e),a=r.length,i=n?t:Object.keys(t),o=i.length,c=n?[]:{},d=new Set(r);let h=0;for(let m=0;m<o;m++){const u=n?m:i[m];(!n&&d.has(u)||n)&&e[u]===void 0&&t[u]===void 0?(c[u]=void 0,h++):(c[u]=CE(e[u],t[u]),c[u]===e[u]&&e[u]!==void 0&&h++)}return a===o&&h===a?e:c}return t}function VN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ny(e){if(!UN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!UN(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function UN(e){return Object.prototype.toString.call(e)==="[object Object]"}function h$(e){return new Promise(t=>{setTimeout(t,e)})}function f$(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?CE(e,t):t}function m$(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function p$(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var $b=Symbol();function PE(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===$b?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Lo,Ti,dc,D2,g$=(D2=class extends Sp{constructor(){super();Ft(this,Lo);Ft(this,Ti);Ft(this,dc);wt(this,dc,t=>{if(!kp&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Pe(this,Ti)||this.setEventListener(Pe(this,dc))}onUnsubscribe(){var t;this.hasListeners()||((t=Pe(this,Ti))==null||t.call(this),wt(this,Ti,void 0))}setEventListener(t){var n;wt(this,dc,t),(n=Pe(this,Ti))==null||n.call(this),wt(this,Ti,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Pe(this,Lo)!==t&&(wt(this,Lo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Pe(this,Lo)=="boolean"?Pe(this,Lo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Lo=new WeakMap,Ti=new WeakMap,dc=new WeakMap,D2),EE=new g$,uc,Ai,hc,F2,x$=(F2=class extends Sp{constructor(){super();Ft(this,uc,!0);Ft(this,Ai);Ft(this,hc);wt(this,hc,t=>{if(!kp&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Pe(this,Ai)||this.setEventListener(Pe(this,hc))}onUnsubscribe(){var t;this.hasListeners()||((t=Pe(this,Ai))==null||t.call(this),wt(this,Ai,void 0))}setEventListener(t){var n;wt(this,hc,t),(n=Pe(this,Ai))==null||n.call(this),wt(this,Ai,t(this.setOnline.bind(this)))}setOnline(t){Pe(this,uc)!==t&&(wt(this,uc,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Pe(this,uc)}},uc=new WeakMap,Ai=new WeakMap,hc=new WeakMap,F2),xm=new x$;function v$(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function y$(e){return Math.min(1e3*2**e,3e4)}function TE(e){return(e??"online")==="online"?xm.isOnline():!0}var AE=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function vx(e){return e instanceof AE}function OE(e){let t=!1,n=0,r=!1,a;const i=v$(),o=v=>{var y;r||(f(new AE(v)),(y=e.abort)==null||y.call(e))},c=()=>{t=!0},d=()=>{t=!1},h=()=>EE.isFocused()&&(e.networkMode==="always"||xm.isOnline())&&e.canRun(),m=()=>TE(e.networkMode)&&e.canRun(),u=v=>{var y;r||(r=!0,(y=e.onSuccess)==null||y.call(e,v),a==null||a(),i.resolve(v))},f=v=>{var y;r||(r=!0,(y=e.onError)==null||y.call(e,v),a==null||a(),i.reject(v))},p=()=>new Promise(v=>{var y;a=w=>{(r||h())&&v(w)},(y=e.onPause)==null||y.call(e)}).then(()=>{var v;a=void 0,r||(v=e.onContinue)==null||v.call(e)}),x=()=>{if(r)return;let v;const y=n===0?e.initialPromise:void 0;try{v=y??e.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(u).catch(w=>{var E;if(r)return;const b=e.retry??(kp?0:3),_=e.retryDelay??y$,N=typeof _=="function"?_(n,w):_,k=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,w);if(t||!k){f(w);return}n++,(E=e.onFail)==null||E.call(e,n,w),h$(N).then(()=>h()?void 0:p()).then(()=>{t?f(w):x()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:c,continueRetry:d,canStart:m,start:()=>(m()?x():p().then(x),i)}}var b$=e=>setTimeout(e,0);function w$(){let e=[],t=0,n=c=>{c()},r=c=>{c()},a=b$;const i=c=>{t?e.push(c):a(()=>{n(c)})},o=()=>{const c=e;e=[],c.length&&a(()=>{r(()=>{c.forEach(d=>{n(d)})})})};return{batch:c=>{let d;t++;try{d=c()}finally{t--,t||o()}return d},batchCalls:c=>(...d)=>{i(()=>{c(...d)})},schedule:i,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{a=c}}}var _n=w$(),Mo,$2,RE=($2=class{constructor(){Ft(this,Mo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),c$(this.gcTime)&&wt(this,Mo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(kp?1/0:5*60*1e3))}clearGcTimeout(){Pe(this,Mo)&&(clearTimeout(Pe(this,Mo)),wt(this,Mo,void 0))}},Mo=new WeakMap,$2),fc,Io,mr,Do,un,Xu,Fo,Mr,Ha,z2,j$=(z2=class extends RE{constructor(t){super();Ft(this,Mr);Ft(this,fc);Ft(this,Io);Ft(this,mr);Ft(this,Do);Ft(this,un);Ft(this,Xu);Ft(this,Fo);wt(this,Fo,!1),wt(this,Xu,t.defaultOptions),this.setOptions(t.options),this.observers=[],wt(this,Do,t.client),wt(this,mr,Pe(this,Do).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,wt(this,fc,N$(this.options)),this.state=t.state??Pe(this,fc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Pe(this,un))==null?void 0:t.promise}setOptions(t){this.options={...Pe(this,Xu),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Pe(this,mr).remove(this)}setData(t,n){const r=f$(this.state.data,t,this.options);return ln(this,Mr,Ha).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ln(this,Mr,Ha).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=Pe(this,un))==null?void 0:r.promise;return(a=Pe(this,un))==null||a.cancel(t),n?n.then(Lr).catch(Lr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Pe(this,fc))}isActive(){return this.observers.some(t=>u$(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$b||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>sy(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!d$(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Pe(this,un))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Pe(this,un))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Pe(this,mr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Pe(this,un)&&(Pe(this,Fo)?Pe(this,un).cancel({revert:!0}):Pe(this,un).cancelRetry()),this.scheduleGc()),Pe(this,mr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ln(this,Mr,Ha).call(this,{type:"invalidate"})}fetch(t,n){var h,m,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Pe(this,un))return Pe(this,un).continueRetry(),Pe(this,un).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,a=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(wt(this,Fo,!0),r.signal)})},i=()=>{const f=PE(this.options,n),x=(()=>{const v={client:Pe(this,Do),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return wt(this,Fo,!1),this.options.persister?this.options.persister(f,x,this):f(x)},c=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Pe(this,Do),state:this.state,fetchFn:i};return a(f),f})();(h=this.options.behavior)==null||h.onFetch(c,this),wt(this,Io,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=c.fetchOptions)==null?void 0:m.meta))&&ln(this,Mr,Ha).call(this,{type:"fetch",meta:(u=c.fetchOptions)==null?void 0:u.meta});const d=f=>{var p,x,v,y;vx(f)&&f.silent||ln(this,Mr,Ha).call(this,{type:"error",error:f}),vx(f)||((x=(p=Pe(this,mr).config).onError)==null||x.call(p,f,this),(y=(v=Pe(this,mr).config).onSettled)==null||y.call(v,this.state.data,f,this)),this.scheduleGc()};return wt(this,un,OE({initialPromise:n==null?void 0:n.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,x,v,y;if(f===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(w){d(w);return}(x=(p=Pe(this,mr).config).onSuccess)==null||x.call(p,f,this),(y=(v=Pe(this,mr).config).onSettled)==null||y.call(v,f,this.state.error,this),this.scheduleGc()},onError:d,onFail:(f,p)=>{ln(this,Mr,Ha).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{ln(this,Mr,Ha).call(this,{type:"pause"})},onContinue:()=>{ln(this,Mr,Ha).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),Pe(this,un).start()}},fc=new WeakMap,Io=new WeakMap,mr=new WeakMap,Do=new WeakMap,un=new WeakMap,Xu=new WeakMap,Fo=new WeakMap,Mr=new WeakSet,Ha=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,..._$(r.data,this.options),fetchMeta:t.meta??null};case"success":return wt(this,Io,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return vx(a)&&a.revert&&Pe(this,Io)?{...Pe(this,Io),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),_n.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Pe(this,mr).notify({query:this,type:"updated",action:t})})},z2);function _$(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:TE(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function N$(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var da,B2,S$=(B2=class extends Sp{constructor(t={}){super();Ft(this,da);this.config=t,wt(this,da,new Map)}build(t,n,r){const a=n.queryKey,i=n.queryHash??Fb(a,n);let o=this.get(i);return o||(o=new j$({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Pe(this,da).has(t.queryHash)||(Pe(this,da).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Pe(this,da).get(t.queryHash);n&&(t.destroy(),n===t&&Pe(this,da).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){_n.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Pe(this,da).get(t)}getAll(){return[...Pe(this,da).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>zN(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>zN(t,r)):n}notify(t){_n.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){_n.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){_n.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},da=new WeakMap,B2),ua,bn,$o,ha,ji,V2,k$=(V2=class extends RE{constructor(t){super();Ft(this,ha);Ft(this,ua);Ft(this,bn);Ft(this,$o);this.mutationId=t.mutationId,wt(this,bn,t.mutationCache),wt(this,ua,[]),this.state=t.state||C$(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Pe(this,ua).includes(t)||(Pe(this,ua).push(t),this.clearGcTimeout(),Pe(this,bn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){wt(this,ua,Pe(this,ua).filter(n=>n!==t)),this.scheduleGc(),Pe(this,bn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Pe(this,ua).length||(this.state.status==="pending"?this.scheduleGc():Pe(this,bn).remove(this))}continue(){var t;return((t=Pe(this,$o))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,c,d,h,m,u,f,p,x,v,y,w,b,_,N,k,E,T,R;const n=()=>{ln(this,ha,ji).call(this,{type:"continue"})};wt(this,$o,OE({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:($,M)=>{ln(this,ha,ji).call(this,{type:"failed",failureCount:$,error:M})},onPause:()=>{ln(this,ha,ji).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Pe(this,bn).canRun(this)}));const r=this.state.status==="pending",a=!Pe(this,$o).canStart();try{if(r)n();else{ln(this,ha,ji).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=Pe(this,bn).config).onMutate)==null?void 0:o.call(i,t,this));const M=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t));M!==this.state.context&&ln(this,ha,ji).call(this,{type:"pending",context:M,variables:t,isPaused:a})}const $=await Pe(this,$o).start();return await((m=(h=Pe(this,bn).config).onSuccess)==null?void 0:m.call(h,$,t,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,$,t,this.state.context)),await((x=(p=Pe(this,bn).config).onSettled)==null?void 0:x.call(p,$,null,this.state.variables,this.state.context,this)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,$,null,t,this.state.context)),ln(this,ha,ji).call(this,{type:"success",data:$}),$}catch($){try{throw await((b=(w=Pe(this,bn).config).onError)==null?void 0:b.call(w,$,t,this.state.context,this)),await((N=(_=this.options).onError)==null?void 0:N.call(_,$,t,this.state.context)),await((E=(k=Pe(this,bn).config).onSettled)==null?void 0:E.call(k,void 0,$,this.state.variables,this.state.context,this)),await((R=(T=this.options).onSettled)==null?void 0:R.call(T,void 0,$,t,this.state.context)),$}finally{ln(this,ha,ji).call(this,{type:"error",error:$})}}finally{Pe(this,bn).runNext(this)}}},ua=new WeakMap,bn=new WeakMap,$o=new WeakMap,ha=new WeakSet,ji=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),_n.batch(()=>{Pe(this,ua).forEach(r=>{r.onMutationUpdate(t)}),Pe(this,bn).notify({mutation:this,type:"updated",action:t})})},V2);function C$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ya,Ir,Ju,U2,P$=(U2=class extends Sp{constructor(t={}){super();Ft(this,Ya);Ft(this,Ir);Ft(this,Ju);this.config=t,wt(this,Ya,new Set),wt(this,Ir,new Map),wt(this,Ju,0)}build(t,n,r){const a=new k$({mutationCache:this,mutationId:++Fh(this,Ju)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){Pe(this,Ya).add(t);const n=of(t);if(typeof n=="string"){const r=Pe(this,Ir).get(n);r?r.push(t):Pe(this,Ir).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Pe(this,Ya).delete(t)){const n=of(t);if(typeof n=="string"){const r=Pe(this,Ir).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&Pe(this,Ir).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=of(t);if(typeof n=="string"){const r=Pe(this,Ir).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=of(t);if(typeof n=="string"){const a=(r=Pe(this,Ir).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_n.batch(()=>{Pe(this,Ya).forEach(t=>{this.notify({type:"removed",mutation:t})}),Pe(this,Ya).clear(),Pe(this,Ir).clear()})}getAll(){return Array.from(Pe(this,Ya))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>BN(n,r))}findAll(t={}){return this.getAll().filter(n=>BN(t,n))}notify(t){_n.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return _n.batch(()=>Promise.all(t.map(n=>n.continue().catch(Lr))))}},Ya=new WeakMap,Ir=new WeakMap,Ju=new WeakMap,U2);function of(e){var t;return(t=e.options.scope)==null?void 0:t.id}function qN(e){return{onFetch:(t,n)=>{var m,u,f,p,x;const r=t.options,a=(f=(u=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:u.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const h=async()=>{let v=!1;const y=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},w=PE(t.options,t.fetchOptions),b=async(_,N,k)=>{if(v)return Promise.reject();if(N==null&&_.pages.length)return Promise.resolve(_);const T=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:N,direction:k?"backward":"forward",meta:t.options.meta};return y(A),A})(),R=await w(T),{maxPages:$}=t.options,M=k?p$:m$;return{pages:M(_.pages,R,$),pageParams:M(_.pageParams,N,$)}};if(a&&i.length){const _=a==="backward",N=_?E$:HN,k={pages:i,pageParams:o},E=N(r,k);c=await b(k,E,_)}else{const _=e??i.length;do{const N=d===0?o[0]??r.initialPageParam:HN(r,c);if(d>0&&N==null)break;c=await b(c,N),d++}while(d<_)}return c};t.options.persister?t.fetchFn=()=>{var v,y;return(y=(v=t.options).persister)==null?void 0:y.call(v,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function HN(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function E$(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var xs,Oi,Ri,mc,pc,Li,gc,xc,q2,T$=(q2=class{constructor(e={}){Ft(this,xs);Ft(this,Oi);Ft(this,Ri);Ft(this,mc);Ft(this,pc);Ft(this,Li);Ft(this,gc);Ft(this,xc);wt(this,xs,e.queryCache||new S$),wt(this,Oi,e.mutationCache||new P$),wt(this,Ri,e.defaultOptions||{}),wt(this,mc,new Map),wt(this,pc,new Map),wt(this,Li,0)}mount(){Fh(this,Li)._++,Pe(this,Li)===1&&(wt(this,gc,EE.subscribe(async e=>{e&&(await this.resumePausedMutations(),Pe(this,xs).onFocus())})),wt(this,xc,xm.subscribe(async e=>{e&&(await this.resumePausedMutations(),Pe(this,xs).onOnline())})))}unmount(){var e,t;Fh(this,Li)._--,Pe(this,Li)===0&&((e=Pe(this,gc))==null||e.call(this),wt(this,gc,void 0),(t=Pe(this,xc))==null||t.call(this),wt(this,xc,void 0))}isFetching(e){return Pe(this,xs).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Pe(this,Oi).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Pe(this,xs).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Pe(this,xs).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(sy(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Pe(this,xs).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=Pe(this,xs).get(r.queryHash),i=a==null?void 0:a.state.data,o=l$(t,i);if(o!==void 0)return Pe(this,xs).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return _n.batch(()=>Pe(this,xs).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Pe(this,xs).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Pe(this,xs);_n.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Pe(this,xs);return _n.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=_n.batch(()=>Pe(this,xs).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Lr).catch(Lr)}invalidateQueries(e,t={}){return _n.batch(()=>(Pe(this,xs).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=_n.batch(()=>Pe(this,xs).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(Lr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Lr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Pe(this,xs).build(this,t);return n.isStaleByTime(sy(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Lr).catch(Lr)}fetchInfiniteQuery(e){return e.behavior=qN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Lr).catch(Lr)}ensureInfiniteQueryData(e){return e.behavior=qN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xm.isOnline()?Pe(this,Oi).resumePausedMutations():Promise.resolve()}getQueryCache(){return Pe(this,xs)}getMutationCache(){return Pe(this,Oi)}getDefaultOptions(){return Pe(this,Ri)}setDefaultOptions(e){wt(this,Ri,e)}setQueryDefaults(e,t){Pe(this,mc).set(Fu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Pe(this,mc).values()],n={};return t.forEach(r=>{$u(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Pe(this,pc).set(Fu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Pe(this,pc).values()],n={};return t.forEach(r=>{$u(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Pe(this,Ri).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Fb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===$b&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Pe(this,Ri).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Pe(this,xs).clear(),Pe(this,Oi).clear()}},xs=new WeakMap,Oi=new WeakMap,Ri=new WeakMap,mc=new WeakMap,pc=new WeakMap,Li=new WeakMap,gc=new WeakMap,xc=new WeakMap,q2),A$=j.createContext(void 0),O$=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(A$.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zu(){return zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zu.apply(this,arguments)}var Di;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Di||(Di={}));const WN="popstate";function R$(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:c}=r.location;return ry("",{pathname:i,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:ME(a)}return M$(t,n,null,e)}function Hs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function LE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function L$(){return Math.random().toString(36).substr(2,8)}function ZN(e,t){return{usr:e.state,key:e.key,idx:t}}function ry(e,t,n,r){return n===void 0&&(n=null),zu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Xc(t):t,{state:n,key:t&&t.key||r||L$()})}function ME(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Xc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function M$(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,c=Di.Pop,d=null,h=m();h==null&&(h=0,o.replaceState(zu({},o.state,{idx:h}),""));function m(){return(o.state||{idx:null}).idx}function u(){c=Di.Pop;let y=m(),w=y==null?null:y-h;h=y,d&&d({action:c,location:v.location,delta:w})}function f(y,w){c=Di.Push;let b=ry(v.location,y,w);h=m()+1;let _=ZN(b,h),N=v.createHref(b);try{o.pushState(_,"",N)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(N)}i&&d&&d({action:c,location:v.location,delta:1})}function p(y,w){c=Di.Replace;let b=ry(v.location,y,w);h=m();let _=ZN(b,h),N=v.createHref(b);o.replaceState(_,"",N),i&&d&&d({action:c,location:v.location,delta:0})}function x(y){let w=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof y=="string"?y:ME(y);return b=b.replace(/ $/,"%20"),Hs(w,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,w)}let v={get action(){return c},get location(){return e(a,o)},listen(y){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(WN,u),d=y,()=>{a.removeEventListener(WN,u),d=null}},createHref(y){return t(a,y)},createURL:x,encodeLocation(y){let w=x(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:p,go(y){return o.go(y)}};return v}var GN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(GN||(GN={}));function I$(e,t,n){return n===void 0&&(n="/"),D$(e,t,n,!1)}function D$(e,t,n,r){let a=typeof t=="string"?Xc(t):t,i=FE(a.pathname||"/",n);if(i==null)return null;let o=IE(e);F$(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let h=K$(i);c=Z$(o[d],h,r)}return c}function IE(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(Hs(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=Uo([r,d.relativePath]),m=n.concat(d);i.children&&i.children.length>0&&(Hs(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),IE(i.children,t,m,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:H$(h,i.index),routesMeta:m})};return e.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))a(i,o);else for(let d of DE(i.path))a(i,o,d)}),t}function DE(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=DE(r.join("/")),c=[];return c.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function F$(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:W$(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $$=/^:[\w-]+$/,z$=3,B$=2,V$=1,U$=10,q$=-2,KN=e=>e==="*";function H$(e,t){let n=e.split("/"),r=n.length;return n.some(KN)&&(r+=q$),t&&(r+=B$),n.filter(a=>!KN(a)).reduce((a,i)=>a+($$.test(i)?z$:i===""?V$:U$),r)}function W$(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function Z$(e,t,n){let{routesMeta:r}=e,a={},i="/",o=[];for(let c=0;c<r.length;++c){let d=r[c],h=c===r.length-1,m=i==="/"?t:t.slice(i.length)||"/",u=YN({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),f=d.route;if(!u&&h&&n&&!r[r.length-1].route.index&&(u=YN({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:Uo([i,u.pathname]),pathnameBase:tz(Uo([i,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(i=Uo([i,u.pathnameBase]))}return o}function YN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=G$(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((h,m,u)=>{let{paramName:f,isOptional:p}=m;if(f==="*"){let v=c[u]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=c[u];return p&&!x?h[f]=void 0:h[f]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:e}}function G$(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),LE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function K$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return LE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function FE(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Y$(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Xc(e):e;return{pathname:n?n.startsWith("/")?n:X$(n,t):t,search:sz(r),hash:nz(a)}}function X$(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function yx(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J$(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Q$(e,t){let n=J$(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ez(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Xc(e):(a=zu({},e),Hs(!a.pathname||!a.pathname.includes("?"),yx("?","pathname","search",a)),Hs(!a.pathname||!a.pathname.includes("#"),yx("#","pathname","hash",a)),Hs(!a.search||!a.search.includes("#"),yx("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,c;if(o==null)c=n;else{let u=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),u-=1;a.pathname=f.join("/")}c=u>=0?t[u]:"/"}let d=Y$(a,c),h=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}const Uo=e=>e.join("/").replace(/\/\/+/g,"/"),tz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,nz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function rz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $E=["post","put","patch","delete"];new Set($E);const az=["get",...$E];new Set(az);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bu(){return Bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bu.apply(this,arguments)}const zb=j.createContext(null),iz=j.createContext(null),Cp=j.createContext(null),Pp=j.createContext(null),dl=j.createContext({outlet:null,matches:[],isDataRoute:!1}),zE=j.createContext(null);function Ep(){return j.useContext(Pp)!=null}function Zn(){return Ep()||Hs(!1),j.useContext(Pp).location}function BE(e){j.useContext(Cp).static||j.useLayoutEffect(e)}function nt(){let{isDataRoute:e}=j.useContext(dl);return e?yz():oz()}function oz(){Ep()||Hs(!1);let e=j.useContext(zb),{basename:t,future:n,navigator:r}=j.useContext(Cp),{matches:a}=j.useContext(dl),{pathname:i}=Zn(),o=JSON.stringify(Q$(a,n.v7_relativeSplatPath)),c=j.useRef(!1);return BE(()=>{c.current=!0}),j.useCallback(function(h,m){if(m===void 0&&(m={}),!c.current)return;if(typeof h=="number"){r.go(h);return}let u=ez(h,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Uo([t,u.pathname])),(m.replace?r.replace:r.push)(u,m.state,m)},[t,r,o,i,e])}function Tp(){let{matches:e}=j.useContext(dl),t=e[e.length-1];return t?t.params:{}}function lz(e,t){return cz(e,t)}function cz(e,t,n,r){Ep()||Hs(!1);let{navigator:a}=j.useContext(Cp),{matches:i}=j.useContext(dl),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let h=Zn(),m;if(t){var u;let y=typeof t=="string"?Xc(t):t;d==="/"||(u=y.pathname)!=null&&u.startsWith(d)||Hs(!1),m=y}else m=h;let f=m.pathname||"/",p=f;if(d!=="/"){let y=d.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let x=I$(e,{pathname:p}),v=mz(x&&x.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:Uo([d,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:Uo([d,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return t&&v?j.createElement(Pp.Provider,{value:{location:Bu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Di.Pop}},v):v}function dz(){let e=vz(),t=rz(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:a},n):null,null)}const uz=j.createElement(dz,null);class hz extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?j.createElement(dl.Provider,{value:this.props.routeContext},j.createElement(zE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fz(e){let{routeContext:t,match:n,children:r}=e,a=j.useContext(zb);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(dl.Provider,{value:t},r)}function mz(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(a=n)==null?void 0:a.errors;if(c!=null){let m=o.findIndex(u=>u.route.id&&(c==null?void 0:c[u.route.id])!==void 0);m>=0||Hs(!1),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let u=o[m];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(h=m),u.route.id){let{loaderData:f,errors:p}=n,x=u.route.loader&&f[u.route.id]===void 0&&(!p||p[u.route.id]===void 0);if(u.route.lazy||x){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((m,u,f)=>{let p,x=!1,v=null,y=null;n&&(p=c&&u.route.id?c[u.route.id]:void 0,v=u.route.errorElement||uz,d&&(h<0&&f===0?(x=!0,y=null):h===f&&(x=!0,y=u.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,f+1)),b=()=>{let _;return p?_=v:x?_=y:u.route.Component?_=j.createElement(u.route.Component,null):u.route.element?_=u.route.element:_=m,j.createElement(fz,{match:u,routeContext:{outlet:m,matches:w,isDataRoute:n!=null},children:_})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?j.createElement(hz,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}var VE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(VE||{}),vm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(vm||{});function pz(e){let t=j.useContext(zb);return t||Hs(!1),t}function gz(e){let t=j.useContext(iz);return t||Hs(!1),t}function xz(e){let t=j.useContext(dl);return t||Hs(!1),t}function UE(e){let t=xz(),n=t.matches[t.matches.length-1];return n.route.id||Hs(!1),n.route.id}function vz(){var e;let t=j.useContext(zE),n=gz(vm.UseRouteError),r=UE(vm.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function yz(){let{router:e}=pz(VE.UseNavigateStable),t=UE(vm.UseNavigateStable),n=j.useRef(!1);return BE(()=>{n.current=!0}),j.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Bu({fromRouteId:t},i)))},[e,t])}function bz(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function lt(e){Hs(!1)}function wz(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Di.Pop,navigator:i,static:o=!1,future:c}=e;Ep()&&Hs(!1);let d=t.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:d,navigator:i,static:o,future:Bu({v7_relativeSplatPath:!1},c)}),[d,c,i,o]);typeof r=="string"&&(r=Xc(r));let{pathname:m="/",search:u="",hash:f="",state:p=null,key:x="default"}=r,v=j.useMemo(()=>{let y=FE(m,d);return y==null?null:{location:{pathname:y,search:u,hash:f,state:p,key:x},navigationType:a}},[d,m,u,f,p,x,a]);return v==null?null:j.createElement(Cp.Provider,{value:h},j.createElement(Pp.Provider,{children:n,value:v}))}function jz(e){let{children:t,location:n}=e;return lz(ay(t),n)}new Promise(()=>{});function ay(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(r,a)=>{if(!j.isValidElement(r))return;let i=[...t,a];if(r.type===j.Fragment){n.push.apply(n,ay(r.props.children,i));return}r.type!==lt&&Hs(!1),!r.props.index||!r.props.children||Hs(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ay(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iy(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function _z(e,t){let n=iy(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const Nz="6";try{window.__reactRouterVersion=Nz}catch{}const Sz="startTransition",XN=w0[Sz];function kz(e){let{basename:t,children:n,future:r,window:a}=e,i=j.useRef();i.current==null&&(i.current=R$({window:a,v5Compat:!0}));let o=i.current,[c,d]=j.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},m=j.useCallback(u=>{h&&XN?XN(()=>d(u)):d(u)},[d,h]);return j.useLayoutEffect(()=>o.listen(m),[o,m]),j.useEffect(()=>bz(r),[r]),j.createElement(wz,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}var JN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(JN||(JN={}));var QN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(QN||(QN={}));function Bb(e){let t=j.useRef(iy(e)),n=j.useRef(!1),r=Zn(),a=j.useMemo(()=>_z(r.search,n.current?null:t.current),[r.search]),i=nt(),o=j.useCallback((c,d)=>{const h=iy(typeof c=="function"?c(a):c);n.current=!0,i("?"+h,d)},[i,a]);return[a,o]}const Cz="modulepreload",Pz=function(e){return"/"+e},e1={},ze=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(d=>{if(d=Pz(d),d in e1)return;e1[d]=!0;const h=d.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":Cz,h||(u.as="script"),u.crossOrigin="",u.href=d,c&&u.setAttribute("nonce",c),document.head.appendChild(u),h)return new Promise((f,p)=>{u.addEventListener("load",f),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Pc;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Pc||(Pc={}));class rc extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const Ez=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Tz=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},a=()=>t!==null?t.name:Ez(e),i=()=>a()!=="web",o=u=>{const f=h.get(u);return!!(f!=null&&f.platforms.has(a())||c(u))},c=u=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===u)},d=u=>e.console.error(u),h=new Map,m=(u,f={})=>{const p=h.get(u);if(p)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),p.proxy;const x=a(),v=c(u);let y;const w=async()=>(!y&&x in f?y=typeof f[x]=="function"?y=await f[x]():y=f[x]:t!==null&&!y&&"web"in f&&(y=typeof f.web=="function"?y=await f.web():y=f.web),y),b=(R,$)=>{var M,A;if(v){const C=v==null?void 0:v.methods.find(z=>$===z.name);if(C)return C.rtype==="promise"?z=>n.nativePromise(u,$.toString(),z):(z,P)=>n.nativeCallback(u,$.toString(),z,P);if(R)return(M=R[$])===null||M===void 0?void 0:M.bind(R)}else{if(R)return(A=R[$])===null||A===void 0?void 0:A.bind(R);throw new rc(`"${u}" plugin is not implemented on ${x}`,Pc.Unimplemented)}},_=R=>{let $;const M=(...A)=>{const C=w().then(z=>{const P=b(z,R);if(P){const O=P(...A);return $=O==null?void 0:O.remove,O}else throw new rc(`"${u}.${R}()" is not implemented on ${x}`,Pc.Unimplemented)});return R==="addListener"&&(C.remove=async()=>$()),C};return M.toString=()=>`${R.toString()}() { [capacitor code] }`,Object.defineProperty(M,"name",{value:R,writable:!1,configurable:!1}),M},N=_("addListener"),k=_("removeListener"),E=(R,$)=>{const M=N({eventName:R},$),A=async()=>{const z=await M;k({eventName:R,callbackId:z},$)},C=new Promise(z=>M.then(()=>z({remove:A})));return C.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await A()},C},T=new Proxy({},{get(R,$){switch($){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?E:N;case"removeListener":return k;default:return _($)}}});return r[u]=T,h.set(u,{name:u,proxy:T,platforms:new Set([...Object.keys(f),...v?[x]:[]])}),T};return n.convertFileSrc||(n.convertFileSrc=u=>u),n.getPlatform=a,n.handleError=d,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=m,n.Exception=rc,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Az=e=>e.Capacitor=Tz(e),Nt=Az(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}),co=Nt.registerPlugin;class Vb{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const a=this.listeners[t];if(!a){if(r){let i=this.retainedEventArguments[t];i||(i=[]),i.push(n),this.retainedEventArguments[t]=i}return}a.forEach(i=>i(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new Nt.Exception(t,Pc.Unimplemented)}unavailable(t="not available"){return new Nt.Exception(t,Pc.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const a=r.indexOf(n);this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const t1=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),s1=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Oz extends Vb{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[a,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=s1(a).trim(),i=s1(i).trim(),n[a]=i}),n}async setCookie(t){try{const n=t1(t.key),r=t1(t.value),a=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${a}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}co("CapacitorCookies",{web:()=>new Oz});const Rz=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const a=r.result;t(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>n(a),r.readAsDataURL(e)}),Lz=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(a=>a.toLocaleLowerCase()).reduce((a,i,o)=>(a[i]=e[t[o]],a),{})},Mz=(e,t=!0)=>e?Object.entries(e).reduce((r,a)=>{const[i,o]=a;let c,d;return Array.isArray(o)?(d="",o.forEach(h=>{c=t?encodeURIComponent(h):h,d+=`${i}=${c}&`}),d.slice(0,-1)):(c=t?encodeURIComponent(o):o,d=`${i}=${c}`),`${r}&${d}`},"").substr(1):null,Iz=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),a=Lz(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,c]of Object.entries(e.data||{}))i.set(o,c);n.body=i.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((c,d)=>{i.append(d,c)});else for(const c of Object.keys(e.data))i.append(c,e.data[c]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(a.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class Dz extends Vb{async request(t){const n=Iz(t,t.webFetchExtra),r=Mz(t.params,t.shouldEncodeUrlParams),a=r?`${t.url}?${r}`:t.url,i=await fetch(a,n),o=i.headers.get("content-type")||"";let{responseType:c="text"}=i.ok?t:{};o.includes("application/json")&&(c="json");let d,h;switch(c){case"arraybuffer":case"blob":h=await i.blob(),d=await Rz(h);break;case"json":d=await i.json();break;case"document":case"text":default:d=await i.text()}const m={};return i.headers.forEach((u,f)=>{m[f]=u}),{data:d,headers:m,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}co("CapacitorHttp",{web:()=>new Dz});function Fz(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,n){return new Proxy({},{get(r,a){return(i,o,c)=>{const d=e.Capacitor.Plugins[n];if(d===void 0){c(new Error(`Capacitor plugin ${n} not found`));return}if(typeof d[a]!="function"){c(new Error(`Method ${a} not found in Capacitor plugin ${n}`));return}(async()=>{try{const h=await d[a](i);o(h)}catch(h){c(h)}})()}}})}})}function $z(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,n){return e.cordova.plugins[n]}})}function zz(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?Fz(window):window.cordova!==void 0&&$z(window))}const bx=co("Geolocation",{web:()=>ze(()=>import("./web-CX4VgJyI.js"),[]).then(e=>new e.GeolocationWeb)});zz();var Vl;(function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"})(Vl||(Vl={}));var iu;(function(e){e.Rear="REAR",e.Front="FRONT"})(iu||(iu={}));var n1;(function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"})(n1||(n1={}));class Bz extends Vb{async getPhoto(t){return new Promise(async(n,r)=>{if(t.webUseInput||t.source===Vl.Photos)this.fileInputExperience(t,n,r);else if(t.source===Vl.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=t.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",async i=>{i.detail===0?this.fileInputExperience(t,n,r):this.cameraExperience(t,n,r)})}else this.cameraExperience(t,n,r)})}async pickImages(t){return new Promise(async(n,r)=>{this.multipleFileInputExperience(n,r)})}async cameraExperience(t,n,r){if(customElements.get("pwa-camera-modal")){const a=document.createElement("pwa-camera-modal");a.facingMode=t.direction===iu.Front?"user":"environment",document.body.appendChild(a);try{await a.componentOnReady(),a.addEventListener("onPhoto",async i=>{const o=i.detail;o===null?r(new rc("User cancelled photos app")):o instanceof Error?r(o):n(await this._getCameraPhoto(o,t)),a.dismiss(),document.body.removeChild(a)}),a.present()}catch{this.fileInputExperience(t,n,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,n,r)}fileInputExperience(t,n,r){let a=document.querySelector("#_capacitor-camera-input");const i=()=>{var o;(o=a.parentNode)===null||o===void 0||o.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",o=>{const c=a.files[0];let d="jpeg";if(c.type==="image/png"?d="png":c.type==="image/gif"&&(d="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){const h=new FileReader;h.addEventListener("load",()=>{if(t.resultType==="dataUrl")n({dataUrl:h.result,format:d});else if(t.resultType==="base64"){const m=h.result.split(",")[1];n({base64String:m,format:d})}i()}),h.readAsDataURL(c)}else n({webPath:URL.createObjectURL(c),format:d}),i()}),a.addEventListener("cancel",o=>{r(new rc("User cancelled photos app")),i()})),a.accept="image/*",a.capture=!0,t.source===Vl.Photos||t.source===Vl.Prompt?a.removeAttribute("capture"):t.direction===iu.Front?a.capture="user":t.direction===iu.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(t,n){let r=document.querySelector("#_capacitor-camera-input-multiple");const a=()=>{var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",i=>{const o=[];for(let c=0;c<r.files.length;c++){const d=r.files[c];let h="jpeg";d.type==="image/png"?h="png":d.type==="image/gif"&&(h="gif"),o.push({webPath:URL.createObjectURL(d),format:h})}t({photos:o}),a()}),r.addEventListener("cancel",i=>{n(new rc("User cancelled photos app")),a()})),r.accept="image/*",r.click()}_getCameraPhoto(t,n){return new Promise((r,a)=>{const i=new FileReader,o=t.type.split("/")[1];n.resultType==="uri"?r({webPath:URL.createObjectURL(t),format:o,saved:!1}):(i.readAsDataURL(t),i.onloadend=()=>{const c=i.result;n.resultType==="dataUrl"?r({dataUrl:c,format:o,saved:!1}):r({base64String:c.split(",")[1],format:o,saved:!1})},i.onerror=c=>{a(c)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const Vz=co("Camera",{web:()=>new Bz}),Uz=co("Device",{web:()=>ze(()=>import("./web-NV3umBtK.js"),[]).then(e=>new e.DeviceWeb)});class qz{static async requestAllPermissions(){if(!Nt.isNativePlatform()){console.log("Running in web, skipping native permissions");return}try{await this.requestLocationPermission(),await this.requestCameraPermission(),console.log("Microphone permissions handled through camera plugin")}catch(t){console.error("Error requesting permissions:",t)}}static async requestLocationPermission(){try{const t=await bx.requestPermissions();return console.log("Location permissions:",t),t}catch(t){throw console.error("Location permission error:",t),t}}static async requestCameraPermission(){try{const t=await Vz.requestPermissions();return console.log("Camera permissions:",t),t}catch(t){throw console.error("Camera permission error:",t),t}}static async checkLocationPermission(){try{return(await bx.checkPermissions()).location==="granted"}catch(t){return console.error("Check location permission error:",t),!1}}static async getCurrentLocation(){try{return await this.checkLocationPermission()||await this.requestLocationPermission(),await bx.getCurrentPosition()}catch(t){throw console.error("Get location error:",t),t}}static async getDeviceInfo(){try{const t=await Uz.getInfo();return console.log("Device info:",t),t}catch(t){return console.error("Device info error:",t),null}}}class Hz{constructor(){us(this,"location",null);us(this,"intervalId",null);us(this,"listeners",[]);this.loadFromStorage()}loadFromStorage(){const t=localStorage.getItem("userLocation");if(t)try{const n=JSON.parse(t),r=localStorage.getItem("userLocationTimestamp");r&&Date.now()-parseInt(r)<10*60*1e3&&(this.location=n)}catch(n){console.error("Error loading location from storage:",n)}}saveToStorage(){this.location&&(localStorage.setItem("userLocation",JSON.stringify(this.location)),localStorage.setItem("userLocationTimestamp",Date.now().toString()))}updateLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{this.location={latitude:t.coords.latitude,longitude:t.coords.longitude},this.saveToStorage(),this.notifyListeners()},t=>console.error("Location error:",t),{enableHighAccuracy:!1,timeout:1e4,maximumAge:18e4})}notifyListeners(){this.listeners.forEach(t=>t(this.location))}startTracking(){this.updateLocation(),this.intervalId||(this.intervalId=setInterval(()=>{this.updateLocation()},3*60*1e3))}stopTracking(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}getLocation(){return this.location}subscribe(t){return this.listeners.push(t),t(this.location),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}}const dt=new Hz,Gs=co("Preferences",{web:()=>ze(()=>import("./web-CnaC4Bwc.js"),[]).then(e=>new e.PreferencesWeb)}),jre=Object.freeze(Object.defineProperty({__proto__:null,Preferences:Gs},Symbol.toStringTag,{value:"Module"}));class Wz{constructor(){us(this,"isNative",Nt.isNativePlatform())}async setAuth(t,n){this.isNative?(await Gs.set({key:"auth_token",value:t}),await Gs.set({key:"auth_user",value:JSON.stringify(n)}),await Gs.set({key:"last_activity",value:Date.now().toString()})):(localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("lastActivity",Date.now().toString()))}async getToken(){return this.isNative?(await Gs.get({key:"auth_token"})).value:localStorage.getItem("token")}async getUser(){if(this.isNative){const t=await Gs.get({key:"auth_user"});return t.value?JSON.parse(t.value):null}else{const t=localStorage.getItem("user");return t?JSON.parse(t):null}}async isAuthenticated(){const t=await this.getToken(),n=await this.getUser();return!!(t&&n)}async updateActivity(){this.isNative?await Gs.set({key:"last_activity",value:Date.now().toString()}):localStorage.setItem("lastActivity",Date.now().toString())}async getLastActivity(){if(this.isNative){const t=await Gs.get({key:"last_activity"});return t.value?parseInt(t.value):null}else{const t=localStorage.getItem("lastActivity");return t?parseInt(t):null}}async clearAuth(){console.log(" clearAuth() called - Stack trace:"),console.trace(),this.isNative?(console.log(" Clearing native storage (Capacitor Preferences)"),await Gs.remove({key:"auth_token"}),await Gs.remove({key:"auth_user"}),await Gs.remove({key:"last_activity"}),await Gs.remove({key:"cart"}),await Gs.remove({key:"wishlist"})):(console.log(" Clearing web storage (localStorage)"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("lastActivity"),localStorage.removeItem("cart"),localStorage.removeItem("wishlist"),localStorage.removeItem("userLocation"),localStorage.removeItem("userLocationTimestamp")),console.log(" Auth cleared successfully")}async setCart(t){this.isNative?await Gs.set({key:"cart",value:JSON.stringify(t)}):localStorage.setItem("cart",JSON.stringify(t))}async getCart(){if(this.isNative){const t=await Gs.get({key:"cart"});return t.value?JSON.parse(t.value):[]}else{const t=localStorage.getItem("cart");return t?JSON.parse(t):[]}}async setWishlist(t){this.isNative?await Gs.set({key:"wishlist",value:JSON.stringify(t)}):localStorage.setItem("wishlist",JSON.stringify(t))}async getWishlist(){if(this.isNative){const t=await Gs.get({key:"wishlist"});return t.value?JSON.parse(t.value):[]}else{const t=localStorage.getItem("wishlist");return t?JSON.parse(t):[]}}async isSessionValid(){const t=await this.getLastActivity();if(!t)return!1;const n=this.isNative?7*24*60*60*1e3:24*60*60*1e3;return Date.now()-t<=n}async autoLogin(){const t=await this.getToken(),n=await this.getUser();if(t&&n&&n.user_type==="vendor"){if(await this.isSessionValid())return await this.updateActivity(),console.log(" Auto-login successful for vendor:",n.username),!0;try{const{simplePersistentAuth:a}=await ze(async()=>{const{simplePersistentAuth:o}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:o}},[]),i=await a.getVendorAuth();if(i!=null&&i.token&&(i!=null&&i.user))return console.log(" Main auth expired but vendor auth valid, syncing..."),await this.setAuth(i.token,i.user),!0}catch(a){console.error("Failed to check vendor auth:",a)}console.log(" Session expired, clearing auth"),await this.clearAuth()}return!1}async keepAlive(){await this.isAuthenticated()&&await this.updateActivity()}async updateUser(t){this.isNative?await Gs.set({key:"auth_user",value:JSON.stringify(t)}):localStorage.setItem("user",JSON.stringify(t))}}const Se=new Wz,Qi=Object.freeze(Object.defineProperty({__proto__:null,authService:Se},Symbol.toStringTag,{value:"Module"})),Zz={user:null,cart:[],wishlist:[],searchQuery:"",isLoading:!1,error:null,isAuthenticated:!1};function Gz(e,t){switch(t.type){case"SET_USER":return{...e,user:t.payload,isAuthenticated:!!t.payload};case"UPDATE_USER":return{...e,user:e.user?{...e.user,...t.payload}:null};case"ADD_TO_CART":return e.cart.find(r=>r.id===t.payload.id)?{...e,cart:e.cart.map(r=>r.id===t.payload.id?{...r,quantity:r.quantity+1}:r)}:{...e,cart:[...e.cart,{...t.payload,quantity:1}]};case"REMOVE_FROM_CART":return{...e,cart:e.cart.filter(n=>n.id!==t.payload)};case"UPDATE_CART_QUANTITY":return{...e,cart:e.cart.map(n=>n.id===t.payload.id?{...n,quantity:Math.max(0,t.payload.quantity)}:n).filter(n=>n.quantity>0)};case"CLEAR_CART":return{...e,cart:[]};case"ADD_TO_WISHLIST":return e.wishlist.find(r=>r.id===t.payload.id)?e:{...e,wishlist:[...e.wishlist,t.payload]};case"REMOVE_FROM_WISHLIST":return{...e,wishlist:e.wishlist.filter(n=>n.id!==t.payload)};case"SET_SEARCH_QUERY":return{...e,searchQuery:t.payload};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload};case"LOAD_FROM_STORAGE":return e;default:return e}}const qE=j.createContext(void 0);function Kz({children:e}){const[t,n]=j.useReducer(Gz,Zz);j.useEffect(()=>{(async()=>{try{const[v,y,w,b]=await Promise.all([Se.getCart(),Se.getWishlist(),Se.getUser(),Se.isAuthenticated()]);b&&w&&(await Se.isSessionValid()?n({type:"SET_USER",payload:{...w,isLoggedIn:!0}}):await Se.clearAuth()),t.cart=v,t.wishlist=y,n({type:"SET_LOADING",payload:!1})}catch(v){console.error("Failed to load stored data:",v)}})()},[]),j.useEffect(()=>{(async()=>{try{await Promise.all([Se.setCart(t.cart),Se.setWishlist(t.wishlist)]),t.user&&await Se.updateActivity()}catch(v){console.error("Failed to save data:",v)}})()},[t.cart,t.wishlist,t.user]);const p={state:t,dispatch:n,addToCart:x=>{n({type:"ADD_TO_CART",payload:x})},removeFromCart:x=>{n({type:"REMOVE_FROM_CART",payload:x})},updateCartQuantity:(x,v)=>{n({type:"UPDATE_CART_QUANTITY",payload:{id:x,quantity:v}})},clearCart:()=>{n({type:"CLEAR_CART"})},addToWishlist:x=>{n({type:"ADD_TO_WISHLIST",payload:x})},removeFromWishlist:x=>{n({type:"REMOVE_FROM_WISHLIST",payload:x})},setSearchQuery:x=>{n({type:"SET_SEARCH_QUERY",payload:x})},login:async(x,v)=>{try{n({type:"SET_USER",payload:{...x,isLoggedIn:!0}}),await Se.setAuth(v,x),dt.startTracking(),console.log("Login completed, user authenticated:",!!x)}catch(y){console.error("Failed to save login data:",y)}},logout:async()=>{try{await Se.clearAuth(),n({type:"SET_USER",payload:null}),n({type:"CLEAR_CART"}),dt.stopTracking()}catch(x){console.error("Failed to clear auth data:",x)}},updateUser:async x=>{try{if(n({type:"UPDATE_USER",payload:x}),t.user){const v={...t.user,...x};await Se.updateUser(v)}}catch(v){console.error("Failed to update user:",v)}},user:t.user};return s.jsx(qE.Provider,{value:p,children:e})}function Rn(){const e=j.useContext(qE);if(e===void 0)throw new Error("useApp must be used within an AppProvider");return e}const Yz=()=>{const{state:e,dispatch:t}=Rn(),n=j.useCallback(async()=>{e.user&&await Se.updateActivity()},[e.user]),r=j.useCallback(async()=>{e.user&&await Promise.all([Se.setCart(e.cart),Se.setWishlist(e.wishlist),Se.updateActivity()])},[e.user,e.cart,e.wishlist]);return j.useCallback(async()=>{},[t]),j.useEffect(()=>{},[]),j.useEffect(()=>{},[]),j.useEffect(()=>{const a=()=>{r().catch(console.error)};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[r]),{extendSession:n,saveState:r}},Xz=()=>window.location.protocol==="capacitor:"||window.location.protocol==="ionic:"||window.navigator.userAgent.includes("Capacitor"),Jz=()=>"https://ezeyway.com/api",oy=["http://localhost:8000","http://10.0.2.2:8000","http://192.168.1.100:8000"],Qz=()=>"wss://ezeyway.com",mn={BASE_URL:Jz(),WS_BASE_URL:Qz()};console.log("API Config Debug:",{isMobile:Xz(),protocol:window.location.protocol,userAgent:window.navigator.userAgent,baseUrl:mn.BASE_URL,wsUrl:mn.WS_BASE_URL});const Ub=(e="")=>{const t=`${mn.BASE_URL}${e.startsWith("/")?e:`/${e}`}`,n=t.includes("?")?"&":"?";return`${t}${n}_cb=${Date.now()}`},HE=e=>{let t=e;return t.startsWith("/api/")&&(t=t.substring(4)),t.startsWith("/")?t:`/${t}`},Qe=`${mn.BASE_URL}/`,eB=Object.freeze(Object.defineProperty({__proto__:null,API_BASE:Qe,API_CONFIG:mn,FALLBACK_URLS:oy,getApiUrl:Ub,normalizeEndpoint:HE},Symbol.toStringTag,{value:"Module"}));class tB{constructor(){us(this,"CART_STORAGE_KEY","temp_cart")}async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Se.getToken()}`,"ngrok-skip-browser-warning":"true"}}getStoredCart(){const t=localStorage.getItem(this.CART_STORAGE_KEY);if(t)try{return JSON.parse(t)}catch(n){console.error("Error parsing stored cart:",n)}return{id:1,items:[],total_items:0,subtotal:0}}saveCart(t){localStorage.setItem(this.CART_STORAGE_KEY,JSON.stringify(t))}async fetchProductDetails(t){var n,r,a;try{const c=(n=(await(await fetch(`${Qe}search/products/?search=${t}`,{headers:{"ngrok-skip-browser-warning":"true"}})).json()).results)==null?void 0:n.find(d=>d.id===t);if(c){const d=((r=c.images)==null?void 0:r.find(h=>h.is_primary))||((a=c.images)==null?void 0:a[0]);return{id:c.id,name:c.name,price:parseFloat(c.price),images:c.images||[],vendor_name:c.vendor_name||"Unknown Vendor",vendor_id:c.vendor_id,free_delivery:c.free_delivery,custom_delivery_fee_enabled:c.custom_delivery_fee_enabled,custom_delivery_fee:c.custom_delivery_fee}}}catch(i){console.error("Failed to fetch product details:",i)}return{id:t,name:`Product ${t}`,price:0,images:[],vendor_name:"Unknown Vendor",vendor_id:null,free_delivery:!1,custom_delivery_fee_enabled:!1,custom_delivery_fee:null}}async getCart(){if(!await Se.getToken())throw new Error("User not authenticated");return this.getStoredCart()}async addToCart(t,n=1){if(!await Se.getToken())throw new Error("User not authenticated");const a=this.getStoredCart(),i=a.items.find(o=>o.product.id===t);if(i)i.quantity+=n,i.total_price=i.product.price*i.quantity;else{const o=await this.fetchProductDetails(t),c={id:Date.now(),product:o,quantity:n,total_price:o.price*n};a.items.push(c)}return a.total_items=a.items.reduce((o,c)=>o+c.quantity,0),a.subtotal=a.items.reduce((o,c)=>o+c.total_price,0),this.saveCart(a),a}async updateCartItem(t,n){const r=this.getStoredCart(),a=r.items.find(i=>i.id===t);return a&&(a.quantity=n,a.total_price=a.product.price*n,r.total_items=r.items.reduce((i,o)=>i+o.quantity,0),r.subtotal=r.items.reduce((i,o)=>i+o.total_price,0),this.saveCart(r)),r}async removeFromCart(t){const n=this.getStoredCart();return n.items=n.items.filter(r=>r.id!==t),n.total_items=n.items.reduce((r,a)=>r+a.quantity,0),n.subtotal=n.items.reduce((r,a)=>r+a.total_price,0),this.saveCart(n),n}async clearCart(){localStorage.removeItem(this.CART_STORAGE_KEY)}}const ia=new tB;class sB{async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Se.getToken()}`,"ngrok-skip-browser-warning":"true"}}async getCart(){if(!await Se.getToken())throw new Error("User not authenticated");try{console.log("Fetching cart from:",`${Qe}cart/`);const n=await fetch(`${Qe}cart/`,{headers:await this.getAuthHeaders()});console.log("Cart response status:",n.status);const r=await n.json();if(console.log("Cart response data:",r),r.message&&r.message.includes("Welcome to Ezeyway Django API"))return console.log("Cart endpoints not implemented, using temporary cart service"),await ia.getCart();if(!n.ok)throw new Error(`Failed to fetch cart: ${n.status} - ${JSON.stringify(r)}`);return r}catch(n){return console.log("Cart API failed, using temporary cart service:",n),await ia.getCart()}}async addToCart(t,n=1){try{console.log("Adding to cart:",{productId:t,quantity:n}),console.log("Add to cart URL:",`${Qe}cart/add/`);const r=await fetch(`${Qe}cart/add/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({product_id:t,quantity:n})});console.log("Add to cart response status:",r.status);const a=await r.json();if(console.log("Add to cart response data:",a),a.message&&a.message.includes("Welcome to Ezeyway Django API"))return console.log("Cart endpoints not implemented, using temporary cart service"),await ia.addToCart(t,n);if(!r.ok)throw new Error(`Failed to add item to cart: ${r.status} - ${JSON.stringify(a)}`);return a.cart||a}catch(r){return console.log("Cart API failed, using temporary cart service:",r),await ia.addToCart(t,n)}}async updateCartItem(t,n){try{const r=await fetch(`${Qe}cart/items/${t}/update/`,{method:"PUT",headers:await this.getAuthHeaders(),body:JSON.stringify({quantity:n})}),a=await r.json();if(a.message&&a.message.includes("Welcome to Ezeyway Django API"))return await ia.updateCartItem(t,n);if(!r.ok)throw new Error("Failed to update cart item");return a.cart}catch{return await ia.updateCartItem(t,n)}}async removeFromCart(t){try{const n=await fetch(`${Qe}cart/items/${t}/remove/`,{method:"DELETE",headers:await this.getAuthHeaders()}),r=await n.json();if(r.message&&r.message.includes("Welcome to Ezeyway Django API"))return await ia.removeFromCart(t);if(!n.ok)throw new Error("Failed to remove item from cart");return r.cart}catch{return await ia.removeFromCart(t)}}async clearCart(){try{const t=await fetch(`${Qe}cart/clear/`,{method:"DELETE",headers:await this.getAuthHeaders()}),n=await t.json();if(n.message&&n.message.includes("Welcome to Ezeyway Django API"))return await ia.clearCart();if(!t.ok)throw new Error("Failed to clear cart")}catch{return await ia.clearCart()}}}const Cl=new sB,WE=Object.freeze(Object.defineProperty({__proto__:null,cartService:Cl},Symbol.toStringTag,{value:"Module"})),ZE=j.createContext(void 0),nB=({children:e})=>{const[t,n]=j.useState(null),[r,a]=j.useState(!1),{toast:i}=es(),o=async()=>{var u,f;try{if(!await Se.getToken()){n(null);return}a(!0);const x=await Cl.getCart();n(x)}catch(p){(u=p.message)!=null&&u.includes("401")||(f=p.message)!=null&&f.includes("Unauthorized")?n(null):console.error("Failed to fetch cart:",p)}finally{a(!1)}},c=async(u,f=1)=>{try{if(!await Se.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:u,quantity:f},path:"/cart",timestamp:Date.now()})),window.location.href="/login";return}const x=await Cl.addToCart(u,f);n(x),await o(),i({title:"Success",description:"Item added to cart"})}catch(p){console.error("Add to cart error:",p),i({title:"Error",description:"Failed to add item to cart",variant:"destructive"})}},d=async(u,f)=>{try{const p=await Cl.updateCartItem(u,f);n(p)}catch{i({title:"Error",description:"Failed to update item quantity",variant:"destructive"})}},h=async u=>{try{const f=await Cl.removeFromCart(u);n(f),i({title:"Success",description:"Item removed from cart"})}catch{i({title:"Error",description:"Failed to remove item",variant:"destructive"})}},m=async()=>{try{await Cl.clearCart(),n({...t,items:[],total_items:0,subtotal:0}),i({title:"Success",description:"Cart cleared"})}catch{i({title:"Error",description:"Failed to clear cart",variant:"destructive"})}};return j.useEffect(()=>{(async()=>{await Se.getToken()?o():n(null)})();const f=p=>{p.detail?n(p.detail):o()};return window.addEventListener("cartUpdated",f),()=>{window.removeEventListener("cartUpdated",f)}},[]),s.jsx(ZE.Provider,{value:{cart:t,loading:r,addToCart:c,updateCartItem:d,removeFromCart:h,clearCart:m,fetchCart:o},children:e})},Gn=()=>{const e=j.useContext(ZE);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e},GE=j.createContext(void 0),rB=({children:e})=>{const[t,n]=j.useState(!1),r=a=>{n(a)};return s.jsx(GE.Provider,{value:{isHomeDataLoaded:t,setHomeDataLoaded:r},children:e})},aB=()=>{const e=j.useContext(GE);if(!e)throw new Error("useAppLoading must be used within AppLoadingProvider");return e},iB=({children:e})=>{const{dispatch:t}=Rn(),[n,r]=j.useState(!1);return j.useEffect(()=>{(async()=>{try{await Se.isAuthenticated()&&(await Se.isSessionValid()||await Se.clearAuth())}catch(i){console.error("Auth initialization failed:",i)}finally{r(!0)}})()},[t]),n?s.jsx(s.Fragment,{children:e}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})},oa=({children:e})=>{const t=nt(),[n,r]=j.useState(!0),[a,i]=j.useState(!1),{state:o}=Rn();return j.useEffect(()=>{(async()=>{try{if(o.user){console.log("ProtectedRoute: Using context user:",o.user.user_type),i(!0),r(!1);return}if(!await Se.isAuthenticated()){console.log("ProtectedRoute: Not authenticated, redirecting to login"),t("/login");return}const h=await Se.getUser();if(!h){console.log("ProtectedRoute: No user data, redirecting to login"),t("/login");return}console.log("ProtectedRoute: Access granted for user:",h.user_type),i(!0)}catch(d){console.error("ProtectedRoute auth check failed:",d),t("/login")}finally{r(!1)}})()},[t,o.user]),n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a?s.jsx(s.Fragment,{children:e}):null},oB="/assets/tihar.gif",lB=({onComplete:e})=>{const[t,n]=j.useState(!0);return j.useEffect(()=>{const r=setTimeout(()=>{n(!1),setTimeout(e,300)},3e3);return()=>clearTimeout(r)},[e]),t?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white",children:s.jsx("img",{src:oB,alt:"Loading...",className:"max-w-full max-h-full object-contain"})}):null};class cB{constructor(){us(this,"hasTrackedCurrentPage",!1)}async trackPageVisit(t,n){try{if(this.hasTrackedCurrentPage)return;const r=t||window.location.href,a=n||document.title,i=await fetch(`${mn.BASE_URL}/analytics/track/`,{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},credentials:"include",body:JSON.stringify({page_url:r,page_title:a,referrer:document.referrer,timestamp:new Date().toISOString()})});if(i.ok){const o=await i.json();return console.log("Analytics tracked:",o),this.hasTrackedCurrentPage=!0,setTimeout(()=>{this.hasTrackedCurrentPage=!1},1e3),o}}catch(r){console.error("Analytics tracking failed:",r)}}trackRouteChange(t){this.hasTrackedCurrentPage=!1,this.trackPageVisit(window.location.origin+t)}}const Rd=new cB,dB=()=>{const e=Zn();return j.useEffect(()=>{Rd.trackPageVisit()},[e.pathname]),{trackPageVisit:Rd.trackPageVisit.bind(Rd),trackRouteChange:Rd.trackRouteChange.bind(Rd)}},li="/assets/ezeywaylogo.png";function uB(){const e=nt();return j.useEffect(()=>{(async()=>{try{const{simplePersistentAuth:n}=await ze(async()=>{const{simplePersistentAuth:c}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:c}},[]);if(await n.isVendorLoggedIn()){console.log(" Vendor already logged in, redirecting to dashboard"),e("/vendor/dashboard");return}const{authService:a}=await ze(async()=>{const{authService:c}=await Promise.resolve().then(()=>Qi);return{authService:c}},void 0),i=await a.isAuthenticated(),o=await a.getUser();if(i&&o&&o.user_type==="customer"){console.log(" Customer already logged in, redirecting to home"),e("/home");return}console.log(" No authentication found, redirecting to home"),e("/home")}catch(n){console.error("Error checking authentication:",n),e("/home")}})()},[e]),s.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:li,alt:"ezeyway",className:"w-32 h-32 mx-auto animate-pulse object-contain"}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"flex justify-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})}const hB=ih("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"gradient-primary text-primary-foreground font-semibold shadow-brand hover:scale-105 transition-bounce",accent:"gradient-accent text-accent-foreground font-semibold shadow-brand hover:scale-105 transition-bounce",premium:"bg-primary-dark text-primary-foreground border border-primary-light/20 shadow-lg hover:bg-primary hover:shadow-brand transition-smooth"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ie=j.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?QI:"button";return s.jsx(o,{className:Ye(hB({variant:t,size:n,className:e})),ref:i,...a})});ie.displayName="Button";const je=j.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:Ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));je.displayName="Input";const KE=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",fB=()=>{if(!KE())return;const e=document.createElement("div");e.innerHTML=`
    <div style="
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #f59e0b;
      color: white;
      padding: 8px 16px;
      text-align: center;
      z-index: 9999;
      font-size: 14px;
      font-weight: 500;
    ">
       Backend server not running on localhost:8000. Please start your Django server.
      <button onclick="this.parentElement.parentElement.remove()" style="
        background: none;
        border: none;
        color: white;
        margin-left: 16px;
        cursor: pointer;
        font-size: 16px;
      "></button>
    </div>
  `,document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},1e4)};let r1=!1,Ld=!1;const ym=async(e=!0,t=!1,n="")=>{const r={"ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"};if(t||(r["Content-Type"]="application/json"),e){let a=await Se.getToken();console.log(" Main token for",n,":",a?`${a.substring(0,10)}...`:"NO TOKEN");const i=n.includes("vendor"),o=window.location.pathname.startsWith("/vendor");if(i&&o&&!a)try{const{simplePersistentAuth:c}=await ze(async()=>{const{simplePersistentAuth:h}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:h}},[]),d=await c.getVendorAuth();d!=null&&d.token?(a=d.token,console.log(" Using vendor token for:",n,`${a.substring(0,10)}...`),await Se.setAuth(d.token,d.user),console.log(" Synced vendor token to main auth")):console.log(" No vendor token available for vendor endpoint")}catch(c){console.error("Failed to get vendor token:",c)}a?r.Authorization=`Token ${a}`:console.log(" No token available for:",n)}return r},Re=async(e,t={},n=!0)=>{var c,d,h,m,u;let r=HE(e);if(r.includes("/vendors/settings")||r.includes("/vendor-profiles/settings"))return console.log(" BLOCKED: Removing call to non-existent endpoint:",e),Promise.resolve({response:{ok:!0,status:200,json:()=>Promise.resolve({}),headers:new Headers({"content-type":"application/json"})},data:{results:[]}});r.includes("/vendor/orders")&&(!t.method||t.method==="GET")&&(r="/orders/",console.log(" Mapped vendor/orders to orders:",e,"->",r));const a=`${mn.BASE_URL}${r}`,i=t.body instanceof FormData,o={headers:await ym(n,i,e),...t};if(console.log(" API Request:",e,"Auth:",n),console.log(" Full URL:",a),e.includes("accept")&&(console.log(" ORDER ACCEPT REQUEST DETECTED!"),console.log(" Original endpoint:",e),console.log(" Normalized endpoint:",r),console.log(" API_CONFIG.BASE_URL:",mn.BASE_URL),console.log(" Final URL:",a)),e.includes("switch-role")||e.includes("switch")){console.log(" SWITCH ROLE REQUEST DETECTED!"),console.log(" Full URL:",a),console.log(" Include Auth:",n),console.log(" Request Headers:",JSON.stringify(o.headers,null,2));const{authService:f}=await ze(async()=>{const{authService:y}=await Promise.resolve().then(()=>Qi);return{authService:y}},void 0),p=await f.getToken();console.log(" Token from authService:",p?`${p.substring(0,10)}...`:"NO TOKEN");const x=typeof localStorage<"u"?localStorage.getItem("token"):"NO LOCALSTORAGE";console.log(" localStorage token:",x?`${x.substring(0,10)}...`:"NO TOKEN IN LOCALSTORAGE");const v=((c=o.headers)==null?void 0:c.Authorization)||((d=o.headers)==null?void 0:d.authorization);console.log(" Authorization header:",v?`${v.substring(0,15)}...`:"NO AUTH HEADER")}t.headers&&(o.headers={...o.headers,...t.headers},i&&o.headers["Content-Type"]&&delete o.headers["Content-Type"]);try{const f=await fetch(a,o);if(f.status===401&&n&&!Ld){Ld=!0,console.log(" 401 error, attempting token refresh...");try{const v=e.includes("vendor"),y=window.location.pathname.startsWith("/vendor");if(v&&y){const{simplePersistentAuth:w}=await ze(async()=>{const{simplePersistentAuth:_}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:_}},[]),b=await w.getVendorAuth();if(b!=null&&b.token){console.log(" Found vendor auth, attempting refresh with vendor token"),await Se.setAuth(b.token,b.user);const _=await ym(!0,i,e),N=await fetch(a,{...o,headers:_});if(N.ok){console.log(" Token refresh successful"),Ld=!1;const k=N.clone(),E=N.headers.get("content-type");if(E&&E.includes("application/json")){const T=await N.json();return{response:k,data:T}}return{response:k,data:null}}else console.log(" Retry with vendor token also failed:",N.status),await w.clearVendorAuth()}else console.log(" No vendor auth available for token refresh")}else console.log(" Not a vendor endpoint, skipping vendor auth refresh");return console.log(" Token refresh failed"),Ld=!1,{response:f,data:{error:"Authentication required"}}}catch(v){return console.error("Token refresh error:",v),Ld=!1,{response:f,data:{error:"Authentication required"}}}}const p=f.clone(),x=f.headers.get("content-type");if(x&&x.includes("application/json"))try{const v=await f.json();return{response:p,data:v}}catch(v){return console.warn("Failed to parse JSON response:",v),{response:p,data:null}}else return console.warn("API returned non-JSON response:",f.status,f.statusText),{response:p,data:null}}catch(f){if(console.error("API request failed:",f),KE()&&!r1&&((h=f.message)!=null&&h.includes("fetch"))&&(r1=!0,fB()),a.includes("ngrok-free.app")&&((m=f.message)!=null&&m.includes("Unable to resolve host")||(u=f.message)!=null&&u.includes("UnknownHostException"))){console.log("Ngrok failed, trying fallback URLs...");for(let p=1;p<oy.length;p++){const v=`${oy[p]}${normalizedEndpoint}`;try{console.log(`Trying fallback URL: ${v}`);const y=await fetch(v,{...o,headers:{...o.headers,"ngrok-skip-browser-warning":void 0,"x-ngrok-skip-browser-warning":void 0}}),w=y.clone(),b=y.headers.get("content-type");if(b&&b.includes("application/json"))try{const _=await y.json();return console.log(`Fallback URL ${v} succeeded`),{response:w,data:_}}catch{return console.log(`Fallback URL ${v} succeeded (non-JSON)`),{response:w,data:null}}else return console.log(`Fallback URL ${v} succeeded (non-JSON)`),{response:w,data:null}}catch(y){console.error(`Fallback URL ${v} failed:`,y);continue}}}throw f}},os=Object.freeze(Object.defineProperty({__proto__:null,apiRequest:Re,createApiHeaders:ym},Symbol.toStringTag,{value:"Module"}));class mB{constructor(){us(this,"pendingAction",null)}setPendingAction(t){this.pendingAction=t,localStorage.setItem("pendingAction",JSON.stringify(t))}getPendingAction(){if(this.pendingAction)return this.pendingAction;const t=localStorage.getItem("pendingAction");if(t)try{return this.pendingAction=JSON.parse(t),this.pendingAction}catch(n){console.error("Error parsing pending action:",n)}return null}clearPendingAction(){this.pendingAction=null,localStorage.removeItem("pendingAction")}async executePendingAction(){const t=this.getPendingAction();if(!t)return console.log("No pending action to execute"),!1;const{authService:n}=await ze(async()=>{const{authService:a}=await Promise.resolve().then(()=>Qi);return{authService:a}},void 0),r=await n.getToken();if(!r)return console.log("No token found, clearing pending action"),this.clearPendingAction(),!1;console.log("Executing pending action:",t);try{switch(t.type){case"add_to_cart":if(t.data){console.log("Executing add_to_cart action:",t.data);const{cartService:a}=await ze(async()=>{const{cartService:i}=await Promise.resolve().then(()=>WE);return{cartService:i}},void 0);try{const i=await a.addToCart(t.data.productId,t.data.quantity||1);console.log("Added to cart successfully:",i),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:i}));try{const{toast:o}=await ze(async()=>{const{toast:c}=await Promise.resolve().then(()=>mN);return{toast:c}},void 0);o({title:"Added to Cart",description:"Product added successfully"})}catch{console.log("Toast not available, but item added successfully")}return this.clearPendingAction(),window.location.href=t.path||"/cart",!0}catch(i){return console.error("Failed to add to cart:",i),this.clearPendingAction(),!1}}break;case"buy_now":if(t.data){localStorage.setItem("buyNowProduct",JSON.stringify(t.data)),this.clearPendingAction();const a=new URL("/checkout",window.location.origin);return a.searchParams.set("directBuy","true"),window.location.href=a.toString(),!0}break;case"toggleFavorite":if(t.data){console.log("Executing toggleFavorite action:",t.data);try{const a=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${r}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:t.data.productId})});if(a.ok){const i=await a.json();console.log("Favorite toggled successfully:",i);try{const{toast:o}=await ze(async()=>{const{toast:c}=await Promise.resolve().then(()=>mN);return{toast:c}},void 0);o({title:i.is_favorite?"Added to Favorites":"Removed from Favorites",description:i.message})}catch{console.log("Toast not available, but favorite toggled successfully")}return this.clearPendingAction(),window.location.href=t.path||"/wishlist",!0}else console.error("Failed to toggle favorite:",a.status)}catch(a){console.error("Failed to toggle favorite:",a)}return this.clearPendingAction(),!1}break;case"view_orders":return window.location.href="/orders",this.clearPendingAction(),!0;case"view_profile":return window.location.href="/profile",this.clearPendingAction(),!0;case"navigate":if(t.path)return window.location.href=t.path,this.clearPendingAction(),!0;break}}catch(a){console.error("Error executing pending action:",a),this.clearPendingAction()}return this.clearPendingAction(),!1}redirectToLogin(t){const n=t||window.location.pathname+window.location.search;window.location.href=`/login?returnTo=${encodeURIComponent(n)}`}}const ou=new mB;function YE({currentType:e}){const t=nt(),n=Zn(),r=()=>{t(e==="customer"?"/vendor/login":"/login",{state:n.state})};return s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors underline",children:e==="customer"?s.jsxs(s.Fragment,{children:[s.jsx(Nn,{className:"h-4 w-4"}),"Vendor Login"]}):s.jsxs(s.Fragment,{children:[s.jsx(Vr,{className:"h-4 w-4"}),"Customer Login"]})})})}class pB{constructor(){us(this,"isInitialized",!1);us(this,"clientId","413898594267-m6kiake3vs83slgvp3e3uk6kcchlssf5.apps.googleusercontent.com");us(this,"isDevelopment",!1)}async setupPassword(t){try{const{response:n,data:r}=await Re("/setup-password/",{method:"POST",body:JSON.stringify({password:t})});return n.ok&&r.success?{success:!0}:{success:!1,error:r.error||"Failed to setup password"}}catch(n){return{success:!1,error:n.message||"Network error during password setup"}}}async initialize(){if(!this.isInitialized)return this.isDevelopment&&this.clientId==="YOUR_GOOGLE_CLIENT_ID"?(console.warn("Google Auth: Using development mode - replace with real client ID"),this.isInitialized=!0,Promise.resolve(!0)):new Promise((t,n)=>{const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{window.google?(window.google.accounts.id.initialize({client_id:this.clientId,callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0,ux_mode:"popup"}),this.isInitialized=!0,t(!0)):n(new Error("Google Identity Services failed to load"))},r.onerror=()=>{n(new Error("Failed to load Google Identity Services"))},document.head.appendChild(r)})}handleCredentialResponse(t){console.log("Google credential response:",t)}async signIn(){try{return await this.initialize(),this.showPopup()}catch(t){return{success:!1,error:t.message}}}async showPopup(){return new Promise(t=>{window.google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:"email profile",ux_mode:"popup",callback:async r=>{if(r.access_token)try{const a=await this.getUserInfo(r.access_token),i=await this.authenticateWithBackend(a);t(i)}catch(a){t({success:!1,error:a.message})}else r.error?t({success:!1,error:r.error}):t({success:!1,error:"No access token received"})}}).requestAccessToken()})}async getUserInfo(t){const n=await fetch(`https://www.googleapis.com/oauth2/v2/userinfo?access_token=${t}`);if(!n.ok)throw new Error("Failed to get user info from Google");return n.json()}async verifyGoogleToken(t){try{const{response:n,data:r}=await Re("/auth/google/",{method:"POST",body:JSON.stringify({credential:t})},!1);return n.ok?{success:!0,user:r.user,token:r.token}:{success:!1,error:r.error||"Google authentication failed"}}catch(n){return{success:!1,error:n.message||"Network error during Google authentication"}}}async authenticateWithBackend(t){try{const{response:n,data:r}=await Re("/auth/google/",{method:"POST",body:JSON.stringify({user_info:{email:t.email,name:t.name,google_id:t.id,picture:t.picture}})},!1);return n.ok&&r.success?{success:!0,user:{...r.user,available_roles:r.available_roles,profile_exists:r.profile_exists,is_approved:r.is_approved,is_rejected:r.is_rejected,rejection_reason:r.rejection_reason,rejection_date:r.rejection_date,user_created:r.user_created,needs_password_setup:r.needs_password_setup,google_login:r.google_login},token:r.token}:n.ok&&r.needs_privacy_agreement?{success:!1,needs_privacy_agreement:!0,user_id:r.user_id,user_type:r.user_type,has_vendor_profile:r.has_vendor_profile,error:r.message}:{success:!1,error:r.error||"Backend authentication failed"}}catch(n){return{success:!1,error:n.message||"Network error during backend authentication"}}}renderButton(t,n="outline",r="large"){if(!this.isInitialized){console.warn("Google Auth not initialized");return}window.google.accounts.id.renderButton(document.getElementById(t),{theme:n,size:r,type:"standard",shape:"rectangular",text:"continue_with",logo_alignment:"left",width:320})}}const Ec=new pB;class gB{constructor(){us(this,"isInitialized",!1);us(this,"appId","650860981240776");us(this,"isDevelopment",window.location.hostname==="localhost")}async initialize(){if(!this.isInitialized)return new Promise((t,n)=>{const r=document.createElement("script");r.src="https://connect.facebook.net/en_US/sdk.js",r.async=!0,r.defer=!0,r.onload=()=>{window.FB.init({appId:this.appId,cookie:!0,xfbml:!0,version:"v18.0"}),this.isInitialized=!0,t(!0)},r.onerror=()=>{n(new Error("Failed to load Facebook SDK"))},document.head.appendChild(r)})}async signIn(){try{return await this.initialize(),window.location.protocol==="http:"&&window.location.hostname!=="localhost"?{success:!1,error:"Facebook login requires HTTPS. Please use the ngrok URL: https://61229baf5ec0.ngrok-free.app"}:new Promise(t=>{window.FB.login(n=>{n.authResponse?this.getUserInfo().then(r=>this.authenticateWithBackend(r)).then(r=>t(r)).catch(r=>t({success:!1,error:r.message})):t({success:!1,error:"Facebook login cancelled"})},{scope:"email,public_profile"})})}catch(t){return{success:!1,error:t.message}}}async getUserInfo(){return new Promise((t,n)=>{window.FB.api("/me",{fields:"id,name,email,picture"},r=>{r&&!r.error?t(r):n(new Error("Failed to get user info from Facebook"))})})}async authenticateWithBackend(t){var n,r;try{const{response:a,data:i}=await Re("/auth/facebook/",{method:"POST",body:JSON.stringify({user_info:{email:t.email,name:t.name,facebook_id:t.id,picture:(r=(n=t.picture)==null?void 0:n.data)==null?void 0:r.url}})},!1);return a.ok&&i.success?{success:!0,user:{...i.user,available_roles:i.available_roles,profile_exists:i.profile_exists,is_approved:i.is_approved,is_rejected:i.is_rejected,rejection_reason:i.rejection_reason,rejection_date:i.rejection_date,user_created:i.user_created,needs_password_setup:i.needs_password_setup,facebook_login:i.facebook_login},token:i.token}:{success:!1,error:i.error||"Backend authentication failed"}}catch(a){return{success:!1,error:a.message||"Network error during backend authentication"}}}}const XE=new gB;function JE({user:e,onComplete:t,onSkip:n}){const{updateUser:r}=Rn(),[a,i]=j.useState({phone_number:e.phone_number||"",address:e.address||"",password:"",confirmPassword:""}),[o,c]=j.useState(!1),[d,h]=j.useState(!1),[m,u]=j.useState(""),[f,p]=j.useState(1),x=b=>{const{name:_,value:N}=b.target;i(k=>({...k,[_]:N}))},v=async()=>{if(u(""),!a.phone_number){u("Phone number is required");return}if(a.phone_number.length<10){u("Please enter a valid phone number");return}h(!0);try{const{response:b,data:_}=await Re("/profile/update/",{method:"PUT",body:JSON.stringify({phone_number:a.phone_number,address:a.address})});b.ok?(await r({...e,phone_number:a.phone_number,address:a.address}),p(2)):u(_.error||"Failed to update profile")}catch{u("Failed to update profile. Please try again.")}finally{h(!1)}},y=async()=>{if(u(""),a.password){if(a.password.length<6){u("Password must be at least 6 characters long");return}if(a.password!==a.confirmPassword){u("Passwords do not match");return}}h(!0);try{if(a.password){const b=await Ec.setupPassword(a.password);if(!b.success){u(b.error||"Failed to setup password"),h(!1);return}}t()}catch{u("Failed to setup password. Please try again.")}finally{h(!1)}},w=()=>{t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:f===1?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Complete Your Profile"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Please provide some additional information to complete your account setup."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx(je,{type:"email",value:e.email,disabled:!0,className:"bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),s.jsx(je,{type:"tel",name:"phone_number",value:a.phone_number,onChange:x,placeholder:"Enter your phone number",className:"focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),s.jsx(je,{type:"text",name:"address",value:a.address,onChange:x,placeholder:"Enter your address",className:"focus:ring-2 focus:ring-blue-500"})]}),m&&s.jsx("p",{className:"text-red-600 text-sm text-center",children:m}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(ie,{onClick:n,variant:"outline",className:"flex-1",disabled:d,children:"Skip for now"}),s.jsx(ie,{onClick:v,disabled:!a.phone_number||d,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:d?"Saving...":"Continue"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Set Up Password (Optional)"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Create a password to login with email and password in the future."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password (Optional)"}),s.jsx(je,{type:o?"text":"password",name:"password",value:a.password,onChange:x,placeholder:"Enter password (min 6 characters)",className:"pr-10 focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 flex items-center pr-3 mt-6",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),a.password&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),s.jsx(je,{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:x,placeholder:"Confirm password",className:"focus:ring-2 focus:ring-blue-500"})]}),m&&s.jsx("p",{className:"text-red-600 text-sm text-center",children:m}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(ie,{onClick:w,variant:"outline",className:"flex-1",disabled:d,children:"Skip password"}),s.jsx(ie,{onClick:y,disabled:d||a.password&&!a.confirmPassword,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:d?"Setting up...":"Complete Setup"})]})]}),s.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"You can always set up a password later from your profile settings."})]})})})}function Ap(e){const t=j.useRef({value:e,previous:e});return j.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Op="Checkbox",[xB,_re]=gn(Op),[vB,qb]=xB(Op);function yB(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:i,form:o,name:c,onCheckedChange:d,required:h,value:m="on",internal_do_not_use_render:u}=e,[f,p]=Kr({prop:n,defaultProp:a??!1,onChange:d,caller:Op}),[x,v]=j.useState(null),[y,w]=j.useState(null),b=j.useRef(!1),_=x?!!o||!!x.closest("form"):!0,N={checked:f,disabled:i,setChecked:p,control:x,setControl:v,name:c,form:o,value:m,hasConsumerStoppedPropagationRef:b,required:h,defaultChecked:Wi(a)?!1:a,isFormControl:_,bubbleInput:y,setBubbleInput:w};return s.jsx(vB,{scope:t,...N,children:bB(u)?u(N):r})}var QE="CheckboxTrigger",eT=j.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:i,value:o,disabled:c,checked:d,required:h,setControl:m,setChecked:u,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:x}=qb(QE,e),v=bt(a,m),y=j.useRef(d);return j.useEffect(()=>{const w=i==null?void 0:i.form;if(w){const b=()=>u(y.current);return w.addEventListener("reset",b),()=>w.removeEventListener("reset",b)}},[i,u]),s.jsx(st.button,{type:"button",role:"checkbox","aria-checked":Wi(d)?"mixed":d,"aria-required":h,"data-state":aT(d),"data-disabled":c?"":void 0,disabled:c,value:o,...r,ref:v,onKeyDown:$e(t,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:$e(n,w=>{u(b=>Wi(b)?!0:!b),x&&p&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})})});eT.displayName=QE;var Hb=j.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:c,value:d,onCheckedChange:h,form:m,...u}=e;return s.jsx(yB,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:c,required:o,onCheckedChange:h,name:r,form:m,value:d,internal_do_not_use_render:({isFormControl:f})=>s.jsxs(s.Fragment,{children:[s.jsx(eT,{...u,ref:t,__scopeCheckbox:n}),f&&s.jsx(rT,{__scopeCheckbox:n})]})})});Hb.displayName=Op;var tT="CheckboxIndicator",sT=j.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=qb(tT,n);return s.jsx(an,{present:r||Wi(i.checked)||i.checked===!0,children:s.jsx(st.span,{"data-state":aT(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});sT.displayName=tT;var nT="CheckboxBubbleInput",rT=j.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:c,disabled:d,name:h,value:m,form:u,bubbleInput:f,setBubbleInput:p}=qb(nT,e),x=bt(n,p),v=Ap(i),y=wp(r);j.useEffect(()=>{const b=f;if(!b)return;const _=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(_,"checked").set,E=!a.current;if(v!==i&&k){const T=new Event("click",{bubbles:E});b.indeterminate=Wi(i),k.call(b,Wi(i)?!1:i),b.dispatchEvent(T)}},[f,v,i,a]);const w=j.useRef(Wi(i)?!1:i);return s.jsx(st.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:c,disabled:d,name:h,value:m,form:u,...t,tabIndex:-1,ref:x,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});rT.displayName=nT;function bB(e){return typeof e=="function"}function Wi(e){return e==="indeterminate"}function aT(e){return Wi(e)?"indeterminate":e?"checked":"unchecked"}const bm=j.forwardRef(({className:e,...t},n)=>s.jsx(Hb,{ref:n,className:Ye("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(sT,{className:Ye("flex items-center justify-center text-current"),children:s.jsx(pp,{className:"h-4 w-4"})})}));bm.displayName=Hb.displayName;function iT({userId:e,userType:t,hasVendorProfile:n,onComplete:r,onCancel:a}){const[i,o]=j.useState(!1),[c,d]=j.useState(!1),[h,m]=j.useState(""),{login:u}=Rn(),f=nt(),p=Zn();j.useEffect(()=>{const y=sessionStorage.getItem("privacyAgreementState");y&&JSON.parse(y).returnUrl===window.location.pathname&&sessionStorage.removeItem("privacyAgreementState")},[]);const x=async()=>{if(!i){m("You must agree to the privacy policy to continue");return}d(!0),m("");try{const{response:y,data:w}=await Re("/agree-privacy-policy/",{method:"POST",body:JSON.stringify({user_id:e,agreed:!0})},!1);if(!y.ok)throw new Error((w==null?void 0:w.error)||"Failed to agree to privacy policy");if(w.success&&w.user&&w.token){const b={...w.user,available_roles:w.available_roles||["customer"],user_type:w.user.user_type||"customer",current_role:w.user.user_type||"customer"};await u(b,w.token),r(b,w.token),setTimeout(async()=>{var N,k;if(!await ou.executePendingAction()){const R=new URLSearchParams(window.location.search).get("returnTo")||((k=(N=p.state)==null?void 0:N.from)==null?void 0:k.pathname)||"/home";f(R,{replace:!0})}},100)}else throw new Error("Invalid response from server")}catch(y){m(y.message)}finally{d(!1)}},v=()=>{a?a():f("/login")};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Privacy Policy Agreement"}),s.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[s.jsx("p",{className:"mb-2",children:"Before you can continue, please read and agree to our privacy policy."}),n&&s.jsx("p",{className:"mb-2 text-blue-600 font-medium",children:"As a vendor, you need to agree to our privacy policy to access vendor features."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 max-h-48 overflow-y-auto text-sm",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Privacy Policy Summary"}),s.jsxs("div",{className:"space-y-2 text-gray-700",children:[s.jsx("p",{children:" We collect and process your personal information to provide our services"}),s.jsx("p",{children:" Your data is used to facilitate transactions between customers and vendors"}),s.jsx("p",{children:" We implement security measures to protect your information"}),s.jsx("p",{children:" You have rights regarding your personal data"}),s.jsx("p",{children:" We may share information as required by law or to provide services"}),s.jsx("p",{children:" Cookies and similar technologies are used to improve user experience"})]}),s.jsx("div",{className:"mt-3",children:s.jsx("button",{onClick:()=>{sessionStorage.setItem("privacyAgreementState",JSON.stringify({userId:e,userType:t,hasVendorProfile:n,returnUrl:window.location.pathname})),f("/privacy-policy")},className:"text-blue-600 hover:text-blue-700 text-sm underline",children:"Read Full Privacy Policy"})})]}),s.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[s.jsx(bm,{id:"privacy-agreement",checked:i,onCheckedChange:y=>o(y),className:"mt-1"}),s.jsxs("label",{htmlFor:"privacy-agreement",className:"text-sm text-gray-700 cursor-pointer",children:["I have read and agree to the"," ",s.jsx("button",{onClick:()=>{sessionStorage.setItem("privacyAgreementState",JSON.stringify({userId:e,userType:t,hasVendorProfile:n,returnUrl:window.location.pathname})),f("/privacy-policy")},className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})]})]}),h&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-red-600 text-sm",children:h})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(ie,{onClick:v,variant:"outline",className:"flex-1",disabled:c,children:"Cancel"}),s.jsx(ie,{onClick:x,disabled:!i||c,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:c?"Processing...":"Agree & Continue"})]})]})})})}function wB(){const e=nt(),t=Zn(),{login:n}=Rn(),[r,a]=j.useState("password"),[i,o]=j.useState(""),[c,d]=j.useState(""),[h,m]=j.useState(""),[u,f]=j.useState(!1),[p,x]=j.useState(!1),[v,y]=j.useState(!1),[w,b]=j.useState(""),[_,N]=j.useState(!1),[k,E]=j.useState(!1);j.useState(!1);const[T,R]=j.useState(!1),[$,M]=j.useState(null),[A,C]=j.useState(!1),[z,P]=j.useState(null);j.useEffect(()=>{const K=sessionStorage.getItem("privacyAgreementState");if(K){const W=JSON.parse(K);P({userId:W.userId,userType:W.userType,hasVendorProfile:W.hasVendorProfile}),C(!0),sessionStorage.removeItem("privacyAgreementState");return}(async()=>{try{const W=localStorage.getItem("rememberedCredentials");if(W){const{phone:X,rememberMe:re}=JSON.parse(W);re&&(o(X),N(!0))}await Se.isAuthenticated()&&(await Se.isSessionValid()||await Se.clearAuth())}catch(W){console.error("Session check failed:",W)}})(),Ec.initialize().catch(console.error),XE.initialize().catch(console.error)},[]);const O=async()=>{y(!0),b("");try{await Se.clearAuth();const{response:K,data:B}=await Re("/login/",{method:"POST",body:JSON.stringify({username:i,password:c})},!1);if(!K.ok)throw new Error((B==null?void 0:B.error)||"Login failed");if(B.needs_privacy_agreement){P({userId:B.user_id,userType:B.user_type,hasVendorProfile:B.has_vendor_profile}),C(!0);return}if(B.user&&B.token){const W={...B.user,available_roles:B.available_roles||["customer"],user_type:B.user.user_type||"customer",current_role:B.user.user_type||"customer"};await n(W,B.token),_?localStorage.setItem("rememberedCredentials",JSON.stringify({phone:i,rememberMe:!0})):localStorage.removeItem("rememberedCredentials"),setTimeout(async()=>{var X,re;if(!await ou.executePendingAction()){const ue=new URLSearchParams(window.location.search),me=ue.get("redirect"),we=ue.get("returnTo"),be=me||we||((re=(X=t.state)==null?void 0:X.from)==null?void 0:re.pathname)||"/home";e(be,{replace:!0})}},100)}else throw new Error("Invalid login response")}catch(K){b(K.message)}finally{y(!1)}},Y=async()=>{y(!0),b("");try{const{response:K,data:B}=await Re("/send-otp/",{method:"POST",body:JSON.stringify({email:i})},!1);if(!K.ok)throw new Error((B==null?void 0:B.error)||"Failed to send OTP");x(!0),b("OTP sent successfully")}catch(K){b(K.message)}finally{y(!1)}},J=async()=>{y(!0),b("");try{const{response:K,data:B}=await Re("/verify-otp/",{method:"POST",body:JSON.stringify({email:i,otp:h})},!1);if(!K.ok)throw new Error((B==null?void 0:B.error)||"OTP verification failed");if(B.needs_privacy_agreement){P({userId:B.user_id,userType:B.user_type,hasVendorProfile:B.has_vendor_profile}),C(!0);return}if(B.user&&B.token){const W={...B.user,available_roles:B.available_roles||["customer"],user_type:B.user.user_type||"customer",current_role:B.user.user_type||"customer"};await n(W,B.token)}setTimeout(async()=>{var oe,X;if(!await ou.executePendingAction()){const re=new URLSearchParams(window.location.search),ue=re.get("redirect"),me=re.get("returnTo"),we=ue||me||((X=(oe=t.state)==null?void 0:oe.from)==null?void 0:X.pathname)||"/home";e(we,{replace:!0})}},100)}catch(K){b(K.message)}finally{y(!1)}},G=()=>{e("/signup")},F=async()=>{E(!0),b("");try{const K=await Ec.signIn();if(K.success&&K.user&&K.token){const B={...K.user,available_roles:K.user.available_roles||["customer"],user_type:K.user.user_type||"customer",current_role:K.user.current_role||K.user.user_type||"customer"};await n(B,K.token),await Se.setAuth(K.token,B),_&&localStorage.setItem("rememberedCredentials",JSON.stringify({phone:K.user.email,rememberMe:!0})),K.user.user_created||!K.user.phone_number?(M({userData:B,token:K.token}),R(!0)):I()}else K.needs_privacy_agreement?(P({userId:K.user_id,userType:K.user_type,hasVendorProfile:K.has_vendor_profile}),C(!0)):b(K.error||"Google login failed")}catch{b("Google login failed. Please try again.")}finally{E(!1)}},I=()=>{setTimeout(async()=>{var B,W;if(!await ou.executePendingAction()){const oe=new URLSearchParams(window.location.search),X=oe.get("redirect"),re=oe.get("returnTo"),ue=X||re||((W=(B=t.state)==null?void 0:B.from)==null?void 0:W.pathname)||"/home";e(ue,{replace:!0})}},100)},V=()=>{R(!1),I()},H=()=>{R(!1),I()},U=(K,B)=>{C(!1),P(null)},q=()=>{C(!1),P(null),b("Privacy policy agreement is required to login")};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[s.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 left-4 w-8 h-8 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors z-10",children:s.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),s.jsx(YE,{currentType:"customer"}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("div",{className:"w-full max-w-80 mx-auto px-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsx("img",{src:li,alt:"ezeyway",className:"w-16 h-16 mx-auto mb-6"})}),s.jsx("div",{className:"text-center mb-4",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 bg-blue-50 px-3 py-1 rounded-full",children:"Customer Login"})}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"flex space-x-8",children:[s.jsx("button",{onClick:()=>a("password"),className:`pb-2 text-sm font-medium transition-colors ${r==="password"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Password"}),s.jsx("button",{onClick:()=>a("otp"),className:`pb-2 text-sm font-medium transition-colors ${r==="otp"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"OTP"})]})}),r==="password"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:i,onChange:K=>o(K.target.value),placeholder:"Phone Number or Email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"relative",children:[s.jsx(je,{type:u?"text":"password",value:c,onChange:K=>d(K.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"rememberMe",checked:_,onChange:K=>N(K.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),s.jsx("label",{htmlFor:"rememberMe",className:"text-sm text-gray-700",children:"Remember my email"})]}),w&&s.jsx("p",{className:"text-red-600 text-center",children:w}),s.jsx(ie,{onClick:O,disabled:!i||!c||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Logging in...":"Login"})]}),r==="otp"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:i,onChange:K=>o(K.target.value),placeholder:"Enter your phone number or email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),w&&s.jsx("p",{className:"text-red-600 text-center",children:w}),p?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(je,{type:"text",value:h,onChange:K=>m(K.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),s.jsx(ie,{onClick:J,disabled:h.length!==6||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Verifying...":"Verify & Login"}),s.jsx("button",{onClick:Y,disabled:v,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}):s.jsx(ie,{onClick:Y,disabled:!i||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Sending...":"Send OTP"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 to-indigo-100 text-gray-500",children:"or"})})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:F,disabled:k,className:"w-12 h-12 bg-white hover:bg-gray-50 border border-gray-300 rounded-full flex items-center justify-center transition-colors shadow-sm",children:k?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):s.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})})})]}),s.jsxs("div",{className:"text-center space-y-3 mt-6",children:[s.jsx("button",{onClick:G,className:"text-blue-600 hover:text-blue-700 text-sm font-medium block mx-auto",children:"Don't have an account? Sign up"}),s.jsx("button",{onClick:()=>e("/privacy-policy"),className:"text-gray-500 hover:text-gray-700 text-sm block mx-auto",children:"Privacy Policy"})]})]})})}),T&&$&&s.jsx(JE,{user:$.userData,onComplete:V,onSkip:H}),A&&z&&s.jsx(iT,{userId:z.userId,userType:z.userType,hasVendorProfile:z.hasVendorProfile,onComplete:U,onCancel:q})]})}const jB=ih("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Fe({className:e,variant:t,...n}){return s.jsx("div",{className:Ye(jB({variant:t}),e),...n})}let wx=null;const _B=async()=>{if(!wx){const{notificationService:e}=await ze(async()=>{const{notificationService:t}=await Promise.resolve().then(()=>oT);return{notificationService:t}},void 0);wx=e}return wx};class NB{async getConversations(){try{const{response:t,data:n}=await Re("messaging/conversations/");return t.ok?Array.isArray(n)?n:(n==null?void 0:n.results)||[]:[]}catch{return[]}}async getMessages(t){try{const{response:n,data:r}=await Re(`messaging/conversations/${t}/messages/`);return n.ok?(console.log("Messages API response:",r),Array.isArray(r)?r:(r==null?void 0:r.results)||[]):(console.error(`Messages API error: ${n.status}`),[])}catch(n){return console.error("Messages API error:",n),[]}}async sendMessage(t){try{const n=new FormData;t.conversation_id&&n.append("conversation_id",t.conversation_id.toString()),t.recipient_id&&n.append("recipient_id",t.recipient_id.toString()),n.append("message_type",t.message_type),t.content&&n.append("content",t.content),t.file&&n.append("file",t.file);const{response:r,data:a}=await Re("/messaging/messages/send/",{method:"POST",body:n});if(!r.ok)throw console.error(`Message send failed: ${r.status}`),new Error(`HTTP ${r.status}`);return console.log("Message sent successfully:",a),a}catch{console.warn("Backend not available, simulating message send");const r=await Se.getUser();return{message:{id:Date.now(),sender:{id:(r==null?void 0:r.id)||0,username:(r==null?void 0:r.username)||"You"},message_type:t.message_type,content:t.content,status:"sent",is_pinned:!1,created_at:new Date().toISOString(),is_read:!1}}}}async handleIncomingMessage(t,n){try{(await _B()).showBrowserNotification(`New message from ${n}`,{body:t.content||"New message received",tag:`message-${t.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/messages"}}),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("newMessage",{detail:{message:t,senderName:n}}))}catch(r){console.error("Failed to handle incoming message notification:",r)}}async getOrCreateConversation(t){try{const{response:n,data:r}=await Re(`messaging/conversations/user/${t}/`);if(!n.ok)throw new Error(`HTTP ${n.status}`);return r||this.createMockConversation(t)}catch{return console.warn("Backend not available, creating mock conversation"),this.createMockConversation(t)}}createMockConversation(t){return{id:t,participants:[],last_message:void 0,unread_count:0,other_participant:{id:t,username:t===1?"EzzeYway Support":`User ${t}`,profile_picture:void 0}}}}const tr=new NB;typeof window<"u"&&window.addEventListener("message",async e=>{var t,n;if(((t=e.data)==null?void 0:t.type)==="new_message"){const{message:r}=e.data;await tr.handleIncomingMessage(r,((n=r.sender)==null?void 0:n.username)||"Unknown")}});class SB{constructor(){us(this,"audio",null);us(this,"isInitialized",!1)}async initialize(){if(!this.isInitialized){if(this.audio=null,"serviceWorker"in navigator&&!Nt.isNativePlatform())try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered successfully"),navigator.serviceWorker.addEventListener("message",n=>{n.data&&n.data.type==="SHOW_ORDER_MODAL"&&window.dispatchEvent(new CustomEvent("showOrderModal",{detail:n.data.data}))}),document.addEventListener("visibilitychange",()=>{navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"VISIBILITY_CHANGE",hidden:document.hidden})}),"sync"in window.ServiceWorkerRegistration.prototype&&t.sync.register("background-sync-orders")}catch(t){console.error("Service Worker registration failed:",t)}!Nt.isNativePlatform()&&"Notification"in window&&(Notification.permission==="default"?await Notification.requestPermission()==="granted"?(console.log("Notification permission granted"),this.showTestNotification()):console.warn("Notification permission denied"):Notification.permission==="granted"&&console.log("Notification permission already granted")),console.log("Notification service initialized for:",Nt.isNativePlatform()?"mobile":"web"),this.isInitialized=!0}}async initializeMobileNotifications(){try{if(Nt.isNativePlatform()){const{LocalNotifications:t}=await ze(async()=>{const{LocalNotifications:i}=await import("./index-tKG7S0_p.js");return{LocalNotifications:i}},[]),{PushNotifications:n}=await ze(async()=>{const{PushNotifications:i}=await Promise.resolve().then(()=>u5);return{PushNotifications:i}},void 0),{Haptics:r,ImpactStyle:a}=await ze(async()=>{const{Haptics:i,ImpactStyle:o}=await import("./index-CKDabajI.js");return{Haptics:i,ImpactStyle:o}},[]);await t.requestPermissions(),await n.requestPermissions(),await n.register(),n.addListener("pushNotificationReceived",async i=>{console.log("Push notification received:",i),await this.handleMobileOrderNotification(i.data)}),n.addListener("pushNotificationActionPerformed",async i=>{console.log("Push notification tapped:",i);const o=i.notification.data;(o==null?void 0:o.type)==="order"&&(await r.impact({style:a.Heavy}),this.openOrderModal(o))}),t.addListener("localNotificationActionPerformed",async i=>{console.log("Local notification tapped:",i);const o=i.notification.extra;(o==null?void 0:o.type)==="order"&&(await r.impact({style:a.Heavy}),this.openOrderModal(o))})}}catch(t){console.error("Failed to initialize mobile notifications:",t)}}async playNotificationSound(){this.createBeepSound()}createBeepSound(){try{const t=new(window.AudioContext||window.webkitAudioContext);this.playBeep(t,523,.2,.3),setTimeout(()=>this.playBeep(t,659,.2,.3),200),setTimeout(()=>this.playBeep(t,784,.3,.4),400)}catch(t){console.warn("Web Audio API not supported:",t)}}playBeep(t,n,r,a){const i=t.createOscillator(),o=t.createGain();i.connect(o),o.connect(t.destination),i.frequency.value=n,i.type="sine",o.gain.setValueAtTime(0,t.currentTime),o.gain.linearRampToValueAtTime(a,t.currentTime+.05),o.gain.exponentialRampToValueAtTime(.01,t.currentTime+r),i.start(t.currentTime),i.stop(t.currentTime+r)}async showTestNotification(){if(!Nt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const t=new Notification("Notifications Enabled!",{body:"You will now receive order notifications even when the app is in the background.",icon:"/favicon.ico",badge:"/favicon.ico",tag:"test-notification",requireInteraction:!1});setTimeout(()=>t.close(),3e3)}}async showOrderNotification(t,n,r){if(!Nt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const a=new Notification(" New Order Received!",{body:`Order #${t} - ${n}
Tap to view and respond`,icon:"/favicon.ico",tag:`order-${r}`,requireInteraction:!0});a.onclick=()=>{window.focus(),this.openOrderModal({orderId:r,orderNumber:t,amount:n}),a.close()},setTimeout(()=>a.close(),15e3)}Nt.isNativePlatform()&&("vibrate"in navigator&&navigator.vibrate([300,100,300,100,500]),this.openOrderModal({orderId:r,orderNumber:t,amount:n}))}async showBrowserNotification(t,n,r,a){if(!Nt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const i=new Notification(t,{body:n,icon:"/favicon.ico",badge:"/favicon.ico",tag:`message-${r}`,requireInteraction:!0,data:{conversationId:r,userType:a}});i.onclick=()=>{window.focus(),this.navigateToConversation(r,a),i.close()},setTimeout(()=>i.close(),1e4)}}async showMobileOrderNotification(t,n,r){if(Nt.isNativePlatform())try{const{LocalNotifications:a}=await ze(async()=>{const{LocalNotifications:c}=await import("./index-tKG7S0_p.js");return{LocalNotifications:c}},[]),{Haptics:i,ImpactStyle:o}=await ze(async()=>{const{Haptics:c,ImpactStyle:d}=await import("./index-CKDabajI.js");return{Haptics:c,ImpactStyle:d}},[]);await i.impact({style:o.Heavy}),await a.schedule({notifications:[{title:" New Order Received!",body:`Order #${t} - ${n}
Tap to accept/reject`,id:Date.now(),sound:"default",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF6B35",actionTypeId:"OPEN_ORDER",extra:{type:"order",orderId:r,orderNumber:t,amount:n,autoOpen:!0}}]})}catch(a){console.error("Failed to show mobile order notification:",a)}}async showMobileNotification(t,n,r,a){if(Nt.isNativePlatform())try{const{LocalNotifications:i}=await ze(async()=>{const{LocalNotifications:o}=await import("./index-tKG7S0_p.js");return{LocalNotifications:o}},[]);await i.schedule({notifications:[{title:t,body:n,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",attachments:[],actionTypeId:"OPEN_MESSAGE",extra:{conversationId:r,userType:a}}]})}catch(i){console.error("Failed to show mobile notification:",i)}}openOrderModal(t){if(window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t})),Nt.isNativePlatform()){const n=window.location.pathname;!n.includes("/vendor/home")&&!n.includes("/vendor/dashboard")&&(window.location.href="/vendor/home")}}async handleMobileOrderNotification(t){try{const{Haptics:n,ImpactStyle:r}=await ze(async()=>{const{Haptics:a,ImpactStyle:i}=await import("./index-CKDabajI.js");return{Haptics:a,ImpactStyle:i}},[]);await n.impact({style:r.Heavy}),await this.playNotificationSound(),this.openOrderModal(t)}catch(n){console.error("Error handling mobile order notification:",n)}}navigateToConversation(t,n){const a={vendor:`/vendor/messages/${t}`,customer:`/messages/${t}`,superadmin:`/accounts/superadmin/messages/${t}/`}[n];a&&(window.location.href=a)}async notifyNewMessage(t,n,r,a){await this.initialize();const i=`New message from ${t}`,o=n.length>50?n.substring(0,50)+"...":n;await this.playNotificationSound(),await this.showBrowserNotification(i,o,r,a),await this.showMobileNotification(i,o,r,a)}async requestPermissions(){return await this.initialize(),!Nt.isNativePlatform()&&"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":!Nt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"}async requestPermission(){return this.requestPermissions()}async getNotifications(){try{const{apiRequest:t}=await ze(async()=>{const{apiRequest:a}=await Promise.resolve().then(()=>os);return{apiRequest:a}},void 0),{response:n,data:r}=await t("/vendor-notifications/");return n.ok&&r?r.results||r||[]:[]}catch(t){return console.warn("Notifications API not available:",t.message),[]}}async getUnreadCount(){try{return(await this.getNotifications()).filter(n=>!n.read).length}catch(t){return console.warn("Failed to get unread count:",t.message),0}}async markAsRead(t){try{const{apiRequest:n}=await ze(async()=>{const{apiRequest:a}=await Promise.resolve().then(()=>os);return{apiRequest:a}},void 0),{response:r}=await n(`/notifications/${t}/read/`,{method:"POST"});r.ok&&console.log("Notification marked as read:",t)}catch(n){console.error("Failed to mark notification as read:",n)}}async markAllAsRead(){try{const{apiRequest:t}=await ze(async()=>{const{apiRequest:r}=await Promise.resolve().then(()=>os);return{apiRequest:r}},void 0),{response:n}=await t("/notifications/mark-all-read/",{method:"POST"});n.ok&&console.log("All notifications marked as read")}catch(t){console.error("Failed to mark all notifications as read:",t)}}async showBrowserNotificationCompat(t,n){if(await this.playNotificationSound(),!Nt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const r=new Notification(t,{body:n.body,icon:"/favicon.ico",badge:"/favicon.ico",tag:n.tag,requireInteraction:n.requireInteraction,data:n.data,silent:!1});r.onclick=()=>{var a;window.focus(),(a=n.data)!=null&&a.actionUrl&&(window.location.href=n.data.actionUrl),r.close()},setTimeout(()=>r.close(),1e4)}}}const rs=new SB,oT=Object.freeze(Object.defineProperty({__proto__:null,notificationService:rs},Symbol.toStringTag,{value:"Module"}));function lT(){const[e,t]=j.useState([]),[n,r]=j.useState(0),[a,i]=j.useState(!1),o=async()=>{var h,m;try{const{authService:u}=await ze(async()=>{const{authService:v}=await Promise.resolve().then(()=>Qi);return{authService:v}},void 0);if(!await u.getToken())return;i(!0);const[p,x]=await Promise.all([rs.getNotifications(),rs.getUnreadCount()]);t(p),r(x)}catch(u){(h=u.message)!=null&&h.includes("401")||(m=u.message)!=null&&m.includes("Unauthorized")?(t([]),r(0)):console.error("Failed to load notifications:",u)}finally{i(!1)}},c=async h=>{try{await rs.markAsRead(h),r(m=>Math.max(0,m-1)),t(m=>m.map(u=>u.id===h?{...u,read:!0}:u))}catch(m){console.error("Failed to mark notification as read:",m)}},d=async()=>{try{await rs.markAllAsRead(),r(0),t(h=>h.map(m=>({...m,read:!0})))}catch(h){console.error("Failed to mark all notifications as read:",h)}};return j.useEffect(()=>{o();const h=setInterval(o,1e4);return()=>clearInterval(h)},[]),j.useEffect(()=>{rs.requestPermission()},[]),{notifications:e,unreadCount:n,isLoading:a,markAsRead:c,markAllAsRead:d,refreshNotifications:o}}const uo=()=>{const e=nt(),{user:t,state:n}=Rn(),r=async(c,d)=>{if(!(t&&n.isAuthenticated)){console.log("User not authenticated, redirecting to login"),d&&ou.setPendingAction(d);const m=window.location.pathname+window.location.search;e(`/login?returnTo=${encodeURIComponent(m)}`);return}console.log("User authenticated, executing action");try{await c()}catch(m){console.error("Error executing authenticated action:",m)}};return{executeWithAuth:r,addToCartWithAuth:(c,d=1)=>r(async()=>{const{cartService:h}=await ze(async()=>{const{cartService:m}=await Promise.resolve().then(()=>WE);return{cartService:m}},void 0);await h.addToCart(c,d)},{type:"add_to_cart",data:{productId:c,quantity:d}}),buyNowWithAuth:c=>r(async()=>{console.log("useAuthAction - Setting buyNowProduct in localStorage:",c),localStorage.setItem("buyNowProduct",JSON.stringify(c)),console.log("useAuthAction - Navigating to checkout with directBuy=true"),e("/checkout?directBuy=true")},{type:"buy_now",data:c}),navigateWithAuth:c=>r(()=>e(c),{type:"navigate",path:c}),isAuthenticated:!!(t&&n.isAuthenticated)}};var kB=j.createContext(void 0);function Jc(e){const t=j.useContext(kB);return e||t||"ltr"}var jx=0;function Wb(){j.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??a1()),document.body.insertAdjacentElement("beforeend",e[1]??a1()),jx++,()=>{jx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),jx--}},[])}function a1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var _x="focusScope.autoFocusOnMount",Nx="focusScope.autoFocusOnUnmount",i1={bubbles:!1,cancelable:!0},CB="FocusScope",Rp=j.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[c,d]=j.useState(null),h=ws(a),m=ws(i),u=j.useRef(null),f=bt(t,v=>d(v)),p=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(r){let v=function(_){if(p.paused||!c)return;const N=_.target;c.contains(N)?u.current=N:_i(u.current,{select:!0})},y=function(_){if(p.paused||!c)return;const N=_.relatedTarget;N!==null&&(c.contains(N)||_i(u.current,{select:!0}))},w=function(_){if(document.activeElement===document.body)for(const k of _)k.removedNodes.length>0&&_i(c)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const b=new MutationObserver(w);return c&&b.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),b.disconnect()}}},[r,c,p.paused]),j.useEffect(()=>{if(c){l1.add(p);const v=document.activeElement;if(!c.contains(v)){const w=new CustomEvent(_x,i1);c.addEventListener(_x,h),c.dispatchEvent(w),w.defaultPrevented||(PB(RB(cT(c)),{select:!0}),document.activeElement===v&&_i(c))}return()=>{c.removeEventListener(_x,h),setTimeout(()=>{const w=new CustomEvent(Nx,i1);c.addEventListener(Nx,m),c.dispatchEvent(w),w.defaultPrevented||_i(v??document.body,{select:!0}),c.removeEventListener(Nx,m),l1.remove(p)},0)}}},[c,h,m,p]);const x=j.useCallback(v=>{if(!n&&!r||p.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,w=document.activeElement;if(y&&w){const b=v.currentTarget,[_,N]=EB(b);_&&N?!v.shiftKey&&w===N?(v.preventDefault(),n&&_i(_,{select:!0})):v.shiftKey&&w===_&&(v.preventDefault(),n&&_i(N,{select:!0})):w===b&&v.preventDefault()}},[n,r,p.paused]);return s.jsx(st.div,{tabIndex:-1,...o,ref:f,onKeyDown:x})});Rp.displayName=CB;function PB(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(_i(r,{select:t}),document.activeElement!==n)return}function EB(e){const t=cT(e),n=o1(t,e),r=o1(t.reverse(),e);return[n,r]}function cT(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function o1(e,t){for(const n of e)if(!TB(n,{upTo:t}))return n}function TB(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function AB(e){return e instanceof HTMLInputElement&&"select"in e}function _i(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&AB(e)&&t&&e.select()}}var l1=OB();function OB(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=c1(e,t),e.unshift(t)},remove(t){var n;e=c1(e,t),(n=e[0])==null||n.resume()}}}function c1(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function RB(e){return e.filter(t=>t.tagName!=="A")}var Sx="rovingFocusGroup.onEntryFocus",LB={bubbles:!1,cancelable:!0},uh="RovingFocusGroup",[ly,dT,MB]=hp(uh),[IB,Qc]=gn(uh,[MB]),[DB,FB]=IB(uh),uT=j.forwardRef((e,t)=>s.jsx(ly.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(ly.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx($B,{...e,ref:t})})}));uT.displayName=uh;var $B=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,...u}=e,f=j.useRef(null),p=bt(t,f),x=Jc(i),[v,y]=Kr({prop:o,defaultProp:c??null,onChange:d,caller:uh}),[w,b]=j.useState(!1),_=ws(h),N=dT(n),k=j.useRef(!1),[E,T]=j.useState(0);return j.useEffect(()=>{const R=f.current;if(R)return R.addEventListener(Sx,_),()=>R.removeEventListener(Sx,_)},[_]),s.jsx(DB,{scope:n,orientation:r,dir:x,loop:a,currentTabStopId:v,onItemFocus:j.useCallback(R=>y(R),[y]),onItemShiftTab:j.useCallback(()=>b(!0),[]),onFocusableItemAdd:j.useCallback(()=>T(R=>R+1),[]),onFocusableItemRemove:j.useCallback(()=>T(R=>R-1),[]),children:s.jsx(st.div,{tabIndex:w||E===0?-1:0,"data-orientation":r,...u,ref:p,style:{outline:"none",...e.style},onMouseDown:$e(e.onMouseDown,()=>{k.current=!0}),onFocus:$e(e.onFocus,R=>{const $=!k.current;if(R.target===R.currentTarget&&$&&!w){const M=new CustomEvent(Sx,LB);if(R.currentTarget.dispatchEvent(M),!M.defaultPrevented){const A=N().filter(Y=>Y.focusable),C=A.find(Y=>Y.active),z=A.find(Y=>Y.id===v),O=[C,z,...A].filter(Boolean).map(Y=>Y.ref.current);mT(O,m)}}k.current=!1}),onBlur:$e(e.onBlur,()=>b(!1))})})}),hT="RovingFocusGroupItem",fT=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...c}=e,d=Zr(),h=i||d,m=FB(hT,n),u=m.currentTabStopId===h,f=dT(n),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:v}=m;return j.useEffect(()=>{if(r)return p(),()=>x()},[r,p,x]),s.jsx(ly.ItemSlot,{scope:n,id:h,focusable:r,active:a,children:s.jsx(st.span,{tabIndex:u?0:-1,"data-orientation":m.orientation,...c,ref:t,onMouseDown:$e(e.onMouseDown,y=>{r?m.onItemFocus(h):y.preventDefault()}),onFocus:$e(e.onFocus,()=>m.onItemFocus(h)),onKeyDown:$e(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){m.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const w=VB(y,m.orientation,m.dir);if(w!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let _=f().filter(N=>N.focusable).map(N=>N.ref.current);if(w==="last")_.reverse();else if(w==="prev"||w==="next"){w==="prev"&&_.reverse();const N=_.indexOf(y.currentTarget);_=m.loop?UB(_,N+1):_.slice(N+1)}setTimeout(()=>mT(_))}}),children:typeof o=="function"?o({isCurrentTabStop:u,hasTabStop:v!=null}):o})})});fT.displayName=hT;var zB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function BB(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function VB(e,t,n){const r=BB(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return zB[r]}function mT(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function UB(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Zb=uT,Gb=fT,qB=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},_l=new WeakMap,lf=new WeakMap,cf={},kx=0,pT=function(e){return e&&(e.host||pT(e.parentNode))},HB=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=pT(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},WB=function(e,t,n,r){var a=HB(t,Array.isArray(e)?e:[e]);cf[n]||(cf[n]=new WeakMap);var i=cf[n],o=[],c=new Set,d=new Set(a),h=function(u){!u||c.has(u)||(c.add(u),h(u.parentNode))};a.forEach(h);var m=function(u){!u||d.has(u)||Array.prototype.forEach.call(u.children,function(f){if(c.has(f))m(f);else try{var p=f.getAttribute(r),x=p!==null&&p!=="false",v=(_l.get(f)||0)+1,y=(i.get(f)||0)+1;_l.set(f,v),i.set(f,y),o.push(f),v===1&&x&&lf.set(f,!0),y===1&&f.setAttribute(n,"true"),x||f.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return m(t),c.clear(),kx++,function(){o.forEach(function(u){var f=_l.get(u)-1,p=i.get(u)-1;_l.set(u,f),i.set(u,p),f||(lf.has(u)||u.removeAttribute(r),lf.delete(u)),p||u.removeAttribute(n)}),kx--,kx||(_l=new WeakMap,_l=new WeakMap,lf=new WeakMap,cf={})}},Kb=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=qB(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),WB(r,a,n,"aria-hidden")):function(){return null}},pa=function(){return pa=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pa.apply(this,arguments)};function gT(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function ZB(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Lf="right-scroll-bar-position",Mf="width-before-scroll-bar",GB="with-scroll-bars-hidden",KB="--removed-body-scroll-bar-size";function Cx(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function YB(e,t){var n=j.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var XB=typeof window<"u"?j.useLayoutEffect:j.useEffect,d1=new WeakMap;function JB(e,t){var n=YB(null,function(r){return e.forEach(function(a){return Cx(a,r)})});return XB(function(){var r=d1.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(c){i.has(c)||Cx(c,null)}),i.forEach(function(c){a.has(c)||Cx(c,o)})}d1.set(n,e)},[e]),n}function QB(e){return e}function e7(e,t){t===void 0&&(t=QB);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(c){return c!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(c){return i(c)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var c=n;n=[],c.forEach(i),o=n}var d=function(){var m=o;o=[],m.forEach(i)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(m){o.push(m),h()},filter:function(m){return o=o.filter(m),n}}}};return a}function t7(e){e===void 0&&(e={});var t=e7(null);return t.options=pa({async:!0,ssr:!1},e),t}var xT=function(e){var t=e.sideCar,n=gT(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return j.createElement(r,pa({},n))};xT.isSideCarExport=!0;function s7(e,t){return e.useMedium(t),xT}var vT=t7(),Px=function(){},Lp=j.forwardRef(function(e,t){var n=j.useRef(null),r=j.useState({onScrollCapture:Px,onWheelCapture:Px,onTouchMoveCapture:Px}),a=r[0],i=r[1],o=e.forwardProps,c=e.children,d=e.className,h=e.removeScrollBar,m=e.enabled,u=e.shards,f=e.sideCar,p=e.noRelative,x=e.noIsolation,v=e.inert,y=e.allowPinchZoom,w=e.as,b=w===void 0?"div":w,_=e.gapMode,N=gT(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,E=JB([n,t]),T=pa(pa({},N),a);return j.createElement(j.Fragment,null,m&&j.createElement(k,{sideCar:vT,removeScrollBar:h,shards:u,noRelative:p,noIsolation:x,inert:v,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:_}),o?j.cloneElement(j.Children.only(c),pa(pa({},T),{ref:E})):j.createElement(b,pa({},T,{className:d,ref:E}),c))});Lp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Lp.classNames={fullWidth:Mf,zeroRight:Lf};var n7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function r7(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=n7();return t&&e.setAttribute("nonce",t),e}function a7(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function i7(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var o7=function(){var e=0,t=null;return{add:function(n){e==0&&(t=r7())&&(a7(t,n),i7(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},l7=function(){var e=o7();return function(t,n){j.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},yT=function(){var e=l7(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},c7={left:0,top:0,right:0,gap:0},Ex=function(e){return parseInt(e||"",10)||0},d7=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Ex(n),Ex(r),Ex(a)]},u7=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return c7;var t=d7(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},h7=yT(),ac="data-scroll-locked",f7=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,c=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(GB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(ac,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Lf,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Mf,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Lf," .").concat(Lf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Mf," .").concat(Mf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ac,`] {
    `).concat(KB,": ").concat(c,`px;
  }
`)},u1=function(){var e=parseInt(document.body.getAttribute(ac)||"0",10);return isFinite(e)?e:0},m7=function(){j.useEffect(function(){return document.body.setAttribute(ac,(u1()+1).toString()),function(){var e=u1()-1;e<=0?document.body.removeAttribute(ac):document.body.setAttribute(ac,e.toString())}},[])},p7=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;m7();var i=j.useMemo(function(){return u7(a)},[a]);return j.createElement(h7,{styles:f7(i,!t,a,n?"":"!important")})},cy=!1;if(typeof window<"u")try{var df=Object.defineProperty({},"passive",{get:function(){return cy=!0,!0}});window.addEventListener("test",df,df),window.removeEventListener("test",df,df)}catch{cy=!1}var Nl=cy?{passive:!1}:!1,g7=function(e){return e.tagName==="TEXTAREA"},bT=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!g7(e)&&n[t]==="visible")},x7=function(e){return bT(e,"overflowY")},v7=function(e){return bT(e,"overflowX")},h1=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=wT(e,r);if(a){var i=jT(e,r),o=i[1],c=i[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},y7=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},b7=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},wT=function(e,t){return e==="v"?x7(t):v7(t)},jT=function(e,t){return e==="v"?y7(t):b7(t)},w7=function(e,t){return e==="h"&&t==="rtl"?-1:1},j7=function(e,t,n,r,a){var i=w7(e,window.getComputedStyle(t).direction),o=i*r,c=n.target,d=t.contains(c),h=!1,m=o>0,u=0,f=0;do{if(!c)break;var p=jT(e,c),x=p[0],v=p[1],y=p[2],w=v-y-i*x;(x||w)&&wT(e,c)&&(u+=w,f+=x);var b=c.parentNode;c=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return(m&&(Math.abs(u)<1||!a)||!m&&(Math.abs(f)<1||!a))&&(h=!0),h},uf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},f1=function(e){return[e.deltaX,e.deltaY]},m1=function(e){return e&&"current"in e?e.current:e},_7=function(e,t){return e[0]===t[0]&&e[1]===t[1]},N7=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},S7=0,Sl=[];function k7(e){var t=j.useRef([]),n=j.useRef([0,0]),r=j.useRef(),a=j.useState(S7++)[0],i=j.useState(yT)[0],o=j.useRef(e);j.useEffect(function(){o.current=e},[e]),j.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=ZB([e.lockRef.current],(e.shards||[]).map(m1),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var c=j.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var w=uf(v),b=n.current,_="deltaX"in v?v.deltaX:b[0]-w[0],N="deltaY"in v?v.deltaY:b[1]-w[1],k,E=v.target,T=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in v&&T==="h"&&E.type==="range")return!1;var R=h1(T,E);if(!R)return!0;if(R?k=T:(k=T==="v"?"h":"v",R=h1(T,E)),!R)return!1;if(!r.current&&"changedTouches"in v&&(_||N)&&(r.current=k),!k)return!0;var $=r.current||k;return j7($,y,v,$==="h"?_:N,!0)},[]),d=j.useCallback(function(v){var y=v;if(!(!Sl.length||Sl[Sl.length-1]!==i)){var w="deltaY"in y?f1(y):uf(y),b=t.current.filter(function(k){return k.name===y.type&&(k.target===y.target||y.target===k.shadowParent)&&_7(k.delta,w)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var _=(o.current.shards||[]).map(m1).filter(Boolean).filter(function(k){return k.contains(y.target)}),N=_.length>0?c(y,_[0]):!o.current.noIsolation;N&&y.cancelable&&y.preventDefault()}}},[]),h=j.useCallback(function(v,y,w,b){var _={name:v,delta:y,target:w,should:b,shadowParent:C7(w)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(N){return N!==_})},1)},[]),m=j.useCallback(function(v){n.current=uf(v),r.current=void 0},[]),u=j.useCallback(function(v){h(v.type,f1(v),v.target,c(v,e.lockRef.current))},[]),f=j.useCallback(function(v){h(v.type,uf(v),v.target,c(v,e.lockRef.current))},[]);j.useEffect(function(){return Sl.push(i),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:f}),document.addEventListener("wheel",d,Nl),document.addEventListener("touchmove",d,Nl),document.addEventListener("touchstart",m,Nl),function(){Sl=Sl.filter(function(v){return v!==i}),document.removeEventListener("wheel",d,Nl),document.removeEventListener("touchmove",d,Nl),document.removeEventListener("touchstart",m,Nl)}},[]);var p=e.removeScrollBar,x=e.inert;return j.createElement(j.Fragment,null,x?j.createElement(i,{styles:N7(a)}):null,p?j.createElement(p7,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function C7(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const P7=s7(vT,k7);var Mp=j.forwardRef(function(e,t){return j.createElement(Lp,pa({},e,{ref:t,sideCar:P7}))});Mp.classNames=Lp.classNames;var dy=["Enter"," "],E7=["ArrowDown","PageUp","Home"],_T=["ArrowUp","PageDown","End"],T7=[...E7,..._T],A7={ltr:[...dy,"ArrowRight"],rtl:[...dy,"ArrowLeft"]},O7={ltr:["ArrowLeft"],rtl:["ArrowRight"]},hh="Menu",[Vu,R7,L7]=hp(hh),[ul,NT]=gn(hh,[L7,Yc,Qc]),Ip=Yc(),ST=Qc(),[M7,hl]=ul(hh),[I7,fh]=ul(hh),kT=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,c=Ip(t),[d,h]=j.useState(null),m=j.useRef(!1),u=ws(i),f=Jc(a);return j.useEffect(()=>{const p=()=>{m.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>m.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),s.jsx(Rb,{...c,children:s.jsx(M7,{scope:t,open:n,onOpenChange:u,content:d,onContentChange:h,children:s.jsx(I7,{scope:t,onClose:j.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:m,dir:f,modal:o,children:r})})})};kT.displayName=hh;var D7="MenuAnchor",Yb=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Ip(n);return s.jsx(Lb,{...a,...r,ref:t})});Yb.displayName=D7;var Xb="MenuPortal",[F7,CT]=ul(Xb,{forceMount:void 0}),PT=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=hl(Xb,t);return s.jsx(F7,{scope:t,forceMount:n,children:s.jsx(an,{present:n||i.open,children:s.jsx(rh,{asChild:!0,container:a,children:r})})})};PT.displayName=Xb;var br="MenuContent",[$7,Jb]=ul(br),ET=j.forwardRef((e,t)=>{const n=CT(br,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=hl(br,e.__scopeMenu),o=fh(br,e.__scopeMenu);return s.jsx(Vu.Provider,{scope:e.__scopeMenu,children:s.jsx(an,{present:r||i.open,children:s.jsx(Vu.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(z7,{...a,ref:t}):s.jsx(B7,{...a,ref:t})})})})}),z7=j.forwardRef((e,t)=>{const n=hl(br,e.__scopeMenu),r=j.useRef(null),a=bt(t,r);return j.useEffect(()=>{const i=r.current;if(i)return Kb(i)},[]),s.jsx(Qb,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:$e(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),B7=j.forwardRef((e,t)=>{const n=hl(br,e.__scopeMenu);return s.jsx(Qb,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),V7=el("MenuContent.ScrollLock"),Qb=j.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:u,onInteractOutside:f,onDismiss:p,disableOutsideScroll:x,...v}=e,y=hl(br,n),w=fh(br,n),b=Ip(n),_=ST(n),N=R7(n),[k,E]=j.useState(null),T=j.useRef(null),R=bt(t,T,y.onContentChange),$=j.useRef(0),M=j.useRef(""),A=j.useRef(0),C=j.useRef(null),z=j.useRef("right"),P=j.useRef(0),O=x?Mp:j.Fragment,Y=x?{as:V7,allowPinchZoom:!0}:void 0,J=F=>{var W,oe;const I=M.current+F,V=N().filter(X=>!X.disabled),H=document.activeElement,U=(W=V.find(X=>X.ref.current===H))==null?void 0:W.textValue,q=V.map(X=>X.textValue),K=eV(q,I,U),B=(oe=V.find(X=>X.textValue===K))==null?void 0:oe.ref.current;(function X(re){M.current=re,window.clearTimeout($.current),re!==""&&($.current=window.setTimeout(()=>X(""),1e3))})(I),B&&setTimeout(()=>B.focus())};j.useEffect(()=>()=>window.clearTimeout($.current),[]),Wb();const G=j.useCallback(F=>{var V,H;return z.current===((V=C.current)==null?void 0:V.side)&&sV(F,(H=C.current)==null?void 0:H.area)},[]);return s.jsx($7,{scope:n,searchRef:M,onItemEnter:j.useCallback(F=>{G(F)&&F.preventDefault()},[G]),onItemLeave:j.useCallback(F=>{var I;G(F)||((I=T.current)==null||I.focus(),E(null))},[G]),onTriggerLeave:j.useCallback(F=>{G(F)&&F.preventDefault()},[G]),pointerGraceTimerRef:A,onPointerGraceIntentChange:j.useCallback(F=>{C.current=F},[]),children:s.jsx(O,{...Y,children:s.jsx(Rp,{asChild:!0,trapped:a,onMountAutoFocus:$e(i,F=>{var I;F.preventDefault(),(I=T.current)==null||I.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Hc,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:u,onInteractOutside:f,onDismiss:p,children:s.jsx(Zb,{asChild:!0,..._,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:E,onEntryFocus:$e(d,F=>{w.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Mb,{role:"menu","aria-orientation":"vertical","data-state":HT(y.open),"data-radix-menu-content":"",dir:w.dir,...b,...v,ref:R,style:{outline:"none",...v.style},onKeyDown:$e(v.onKeyDown,F=>{const V=F.target.closest("[data-radix-menu-content]")===F.currentTarget,H=F.ctrlKey||F.altKey||F.metaKey,U=F.key.length===1;V&&(F.key==="Tab"&&F.preventDefault(),!H&&U&&J(F.key));const q=T.current;if(F.target!==q||!T7.includes(F.key))return;F.preventDefault();const B=N().filter(W=>!W.disabled).map(W=>W.ref.current);_T.includes(F.key)&&B.reverse(),J7(B)}),onBlur:$e(e.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout($.current),M.current="")}),onPointerMove:$e(e.onPointerMove,Uu(F=>{const I=F.target,V=P.current!==F.clientX;if(F.currentTarget.contains(I)&&V){const H=F.clientX>P.current?"right":"left";z.current=H,P.current=F.clientX}}))})})})})})})});ET.displayName=br;var U7="MenuGroup",ew=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(st.div,{role:"group",...r,ref:t})});ew.displayName=U7;var q7="MenuLabel",TT=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(st.div,{...r,ref:t})});TT.displayName=q7;var wm="MenuItem",p1="menu.itemSelect",Dp=j.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=j.useRef(null),o=fh(wm,e.__scopeMenu),c=Jb(wm,e.__scopeMenu),d=bt(t,i),h=j.useRef(!1),m=()=>{const u=i.current;if(!n&&u){const f=new CustomEvent(p1,{bubbles:!0,cancelable:!0});u.addEventListener(p1,p=>r==null?void 0:r(p),{once:!0}),hb(u,f),f.defaultPrevented?h.current=!1:o.onClose()}};return s.jsx(AT,{...a,ref:d,disabled:n,onClick:$e(e.onClick,m),onPointerDown:u=>{var f;(f=e.onPointerDown)==null||f.call(e,u),h.current=!0},onPointerUp:$e(e.onPointerUp,u=>{var f;h.current||(f=u.currentTarget)==null||f.click()}),onKeyDown:$e(e.onKeyDown,u=>{const f=c.searchRef.current!=="";n||f&&u.key===" "||dy.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});Dp.displayName=wm;var AT=j.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=Jb(wm,n),c=ST(n),d=j.useRef(null),h=bt(t,d),[m,u]=j.useState(!1),[f,p]=j.useState("");return j.useEffect(()=>{const x=d.current;x&&p((x.textContent??"").trim())},[i.children]),s.jsx(Vu.ItemSlot,{scope:n,disabled:r,textValue:a??f,children:s.jsx(Gb,{asChild:!0,...c,focusable:!r,children:s.jsx(st.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:h,onPointerMove:$e(e.onPointerMove,Uu(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$e(e.onPointerLeave,Uu(x=>o.onItemLeave(x))),onFocus:$e(e.onFocus,()=>u(!0)),onBlur:$e(e.onBlur,()=>u(!1))})})})}),H7="MenuCheckboxItem",OT=j.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return s.jsx(DT,{scope:e.__scopeMenu,checked:n,children:s.jsx(Dp,{role:"menuitemcheckbox","aria-checked":jm(n)?"mixed":n,...a,ref:t,"data-state":sw(n),onSelect:$e(a.onSelect,()=>r==null?void 0:r(jm(n)?!0:!n),{checkForDefaultPrevented:!1})})})});OT.displayName=H7;var RT="MenuRadioGroup",[W7,Z7]=ul(RT,{value:void 0,onValueChange:()=>{}}),LT=j.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=ws(r);return s.jsx(W7,{scope:e.__scopeMenu,value:n,onValueChange:i,children:s.jsx(ew,{...a,ref:t})})});LT.displayName=RT;var MT="MenuRadioItem",IT=j.forwardRef((e,t)=>{const{value:n,...r}=e,a=Z7(MT,e.__scopeMenu),i=n===a.value;return s.jsx(DT,{scope:e.__scopeMenu,checked:i,children:s.jsx(Dp,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":sw(i),onSelect:$e(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});IT.displayName=MT;var tw="MenuItemIndicator",[DT,G7]=ul(tw,{checked:!1}),FT=j.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=G7(tw,n);return s.jsx(an,{present:r||jm(i.checked)||i.checked===!0,children:s.jsx(st.span,{...a,ref:t,"data-state":sw(i.checked)})})});FT.displayName=tw;var K7="MenuSeparator",$T=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(st.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});$T.displayName=K7;var Y7="MenuArrow",zT=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Ip(n);return s.jsx(Ib,{...a,...r,ref:t})});zT.displayName=Y7;var X7="MenuSub",[Nre,BT]=ul(X7),Hd="MenuSubTrigger",VT=j.forwardRef((e,t)=>{const n=hl(Hd,e.__scopeMenu),r=fh(Hd,e.__scopeMenu),a=BT(Hd,e.__scopeMenu),i=Jb(Hd,e.__scopeMenu),o=j.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=i,h={__scopeMenu:e.__scopeMenu},m=j.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return j.useEffect(()=>m,[m]),j.useEffect(()=>{const u=c.current;return()=>{window.clearTimeout(u),d(null)}},[c,d]),s.jsx(Yb,{asChild:!0,...h,children:s.jsx(AT,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":HT(n.open),...e,ref:up(t,a.onTriggerChange),onClick:u=>{var f;(f=e.onClick)==null||f.call(e,u),!(e.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:$e(e.onPointerMove,Uu(u=>{i.onItemEnter(u),!u.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),m()},100))})),onPointerLeave:$e(e.onPointerLeave,Uu(u=>{var p,x;m();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const v=(x=n.content)==null?void 0:x.dataset.side,y=v==="right",w=y?-5:5,b=f[y?"left":"right"],_=f[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:u.clientX+w,y:u.clientY},{x:b,y:f.top},{x:_,y:f.top},{x:_,y:f.bottom},{x:b,y:f.bottom}],side:v}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(u),u.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:$e(e.onKeyDown,u=>{var p;const f=i.searchRef.current!=="";e.disabled||f&&u.key===" "||A7[r.dir].includes(u.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),u.preventDefault())})})})});VT.displayName=Hd;var UT="MenuSubContent",qT=j.forwardRef((e,t)=>{const n=CT(br,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=hl(br,e.__scopeMenu),o=fh(br,e.__scopeMenu),c=BT(UT,e.__scopeMenu),d=j.useRef(null),h=bt(t,d);return s.jsx(Vu.Provider,{scope:e.__scopeMenu,children:s.jsx(an,{present:r||i.open,children:s.jsx(Vu.Slot,{scope:e.__scopeMenu,children:s.jsx(Qb,{id:c.contentId,"aria-labelledby":c.triggerId,...a,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var u;o.isUsingKeyboardRef.current&&((u=d.current)==null||u.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:$e(e.onFocusOutside,m=>{m.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:$e(e.onEscapeKeyDown,m=>{o.onClose(),m.preventDefault()}),onKeyDown:$e(e.onKeyDown,m=>{var p;const u=m.currentTarget.contains(m.target),f=O7[o.dir].includes(m.key);u&&f&&(i.onOpenChange(!1),(p=c.trigger)==null||p.focus(),m.preventDefault())})})})})})});qT.displayName=UT;function HT(e){return e?"open":"closed"}function jm(e){return e==="indeterminate"}function sw(e){return jm(e)?"indeterminate":e?"checked":"unchecked"}function J7(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Q7(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function eV(e,t,n){const a=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Q7(e,Math.max(i,0));a.length===1&&(o=o.filter(h=>h!==n));const d=o.find(h=>h.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function tV(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const c=t[i],d=t[o],h=c.x,m=c.y,u=d.x,f=d.y;m>r!=f>r&&n<(u-h)*(r-m)/(f-m)+h&&(a=!a)}return a}function sV(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return tV(n,t)}function Uu(e){return t=>t.pointerType==="mouse"?e(t):void 0}var nV=kT,rV=Yb,aV=PT,iV=ET,oV=ew,lV=TT,cV=Dp,dV=OT,uV=LT,hV=IT,fV=FT,mV=$T,pV=zT,gV=VT,xV=qT,Fp="DropdownMenu",[vV,Sre]=gn(Fp,[NT]),Ln=NT(),[yV,WT]=vV(Fp),ZT=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:c=!0}=e,d=Ln(t),h=j.useRef(null),[m,u]=Kr({prop:a,defaultProp:i??!1,onChange:o,caller:Fp});return s.jsx(yV,{scope:t,triggerId:Zr(),triggerRef:h,contentId:Zr(),open:m,onOpenChange:u,onOpenToggle:j.useCallback(()=>u(f=>!f),[u]),modal:c,children:s.jsx(nV,{...d,open:m,onOpenChange:u,dir:r,modal:c,children:n})})};ZT.displayName=Fp;var GT="DropdownMenuTrigger",KT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=WT(GT,n),o=Ln(n);return s.jsx(rV,{asChild:!0,...o,children:s.jsx(st.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:up(t,i.triggerRef),onPointerDown:$e(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:$e(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});KT.displayName=GT;var bV="DropdownMenuPortal",YT=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Ln(t);return s.jsx(aV,{...r,...n})};YT.displayName=bV;var XT="DropdownMenuContent",JT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=WT(XT,n),i=Ln(n),o=j.useRef(!1);return s.jsx(iV,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:$e(e.onCloseAutoFocus,c=>{var d;o.current||(d=a.triggerRef.current)==null||d.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:$e(e.onInteractOutside,c=>{const d=c.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,m=d.button===2||h;(!a.modal||m)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});JT.displayName=XT;var wV="DropdownMenuGroup",jV=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(oV,{...a,...r,ref:t})});jV.displayName=wV;var _V="DropdownMenuLabel",QT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(lV,{...a,...r,ref:t})});QT.displayName=_V;var NV="DropdownMenuItem",eA=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(cV,{...a,...r,ref:t})});eA.displayName=NV;var SV="DropdownMenuCheckboxItem",tA=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(dV,{...a,...r,ref:t})});tA.displayName=SV;var kV="DropdownMenuRadioGroup",CV=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(uV,{...a,...r,ref:t})});CV.displayName=kV;var PV="DropdownMenuRadioItem",sA=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(hV,{...a,...r,ref:t})});sA.displayName=PV;var EV="DropdownMenuItemIndicator",nA=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(fV,{...a,...r,ref:t})});nA.displayName=EV;var TV="DropdownMenuSeparator",rA=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(mV,{...a,...r,ref:t})});rA.displayName=TV;var AV="DropdownMenuArrow",OV=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(pV,{...a,...r,ref:t})});OV.displayName=AV;var RV="DropdownMenuSubTrigger",aA=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(gV,{...a,...r,ref:t})});aA.displayName=RV;var LV="DropdownMenuSubContent",iA=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ln(n);return s.jsx(xV,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});iA.displayName=LV;var MV=ZT,IV=KT,DV=YT,oA=JT,lA=QT,cA=eA,dA=tA,uA=sA,hA=nA,fA=rA,mA=aA,pA=iA;const Tc=MV,Ac=IV,FV=j.forwardRef(({className:e,inset:t,children:n,...r},a)=>s.jsxs(mA,{ref:a,className:Ye("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(Sc,{className:"ml-auto h-4 w-4"})]}));FV.displayName=mA.displayName;const $V=j.forwardRef(({className:e,...t},n)=>s.jsx(pA,{ref:n,className:Ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));$V.displayName=pA.displayName;const nl=j.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(DV,{children:s.jsx(oA,{ref:r,sideOffset:t,className:Ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));nl.displayName=oA.displayName;const _o=j.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(cA,{ref:r,className:Ye("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));_o.displayName=cA.displayName;const zV=j.forwardRef(({className:e,children:t,checked:n,...r},a)=>s.jsxs(dA,{ref:a,className:Ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(hA,{children:s.jsx(pp,{className:"h-4 w-4"})})}),t]}));zV.displayName=dA.displayName;const BV=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(uA,{ref:r,className:Ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(hA,{children:s.jsx(DP,{className:"h-2 w-2 fill-current"})})}),t]}));BV.displayName=uA.displayName;const VV=j.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(lA,{ref:r,className:Ye("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));VV.displayName=lA.displayName;const UV=j.forwardRef(({className:e,...t},n)=>s.jsx(fA,{ref:n,className:Ye("-mx-1 my-1 h-px bg-muted",e),...t}));UV.displayName=fA.displayName;var gA={exports:{}},xA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oc=j;function qV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var HV=typeof Object.is=="function"?Object.is:qV,WV=Oc.useState,ZV=Oc.useEffect,GV=Oc.useLayoutEffect,KV=Oc.useDebugValue;function YV(e,t){var n=t(),r=WV({inst:{value:n,getSnapshot:t}}),a=r[0].inst,i=r[1];return GV(function(){a.value=n,a.getSnapshot=t,Tx(a)&&i({inst:a})},[e,n,t]),ZV(function(){return Tx(a)&&i({inst:a}),e(function(){Tx(a)&&i({inst:a})})},[e]),KV(n),n}function Tx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!HV(e,n)}catch{return!0}}function XV(e,t){return t()}var JV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?XV:YV;xA.useSyncExternalStore=Oc.useSyncExternalStore!==void 0?Oc.useSyncExternalStore:JV;gA.exports=xA;var QV=gA.exports;function e9(){return QV.useSyncExternalStore(t9,()=>!0,()=>!1)}function t9(){return()=>{}}var nw="Avatar",[s9,kre]=gn(nw),[n9,vA]=s9(nw),yA=j.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,i]=j.useState("idle");return s.jsx(n9,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(st.span,{...r,ref:t})})});yA.displayName=nw;var bA="AvatarImage",wA=j.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=e,o=vA(bA,n),c=r9(r,i),d=ws(h=>{a(h),o.onImageLoadingStatusChange(h)});return As(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?s.jsx(st.img,{...i,ref:t,src:r}):null});wA.displayName=bA;var jA="AvatarFallback",_A=j.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,i=vA(jA,n),[o,c]=j.useState(r===void 0);return j.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(st.span,{...a,ref:t}):null});_A.displayName=jA;function g1(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function r9(e,{referrerPolicy:t,crossOrigin:n}){const r=e9(),a=j.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[o,c]=j.useState(()=>g1(i,e));return As(()=>{c(g1(i,e))},[i,e]),As(()=>{const d=u=>()=>{c(u)};if(!i)return;const h=d("loaded"),m=d("error");return i.addEventListener("load",h),i.addEventListener("error",m),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",h),i.removeEventListener("error",m)}},[i,n,t]),o}var NA=yA,SA=wA,kA=_A;const ci=j.forwardRef(({className:e,...t},n)=>s.jsx(NA,{ref:n,className:Ye("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ci.displayName=NA.displayName;const Ur=j.forwardRef(({className:e,...t},n)=>s.jsx(SA,{ref:n,className:Ye("aspect-square h-full w-full",e),...t}));Ur.displayName=SA.displayName;const di=j.forwardRef(({className:e,...t},n)=>s.jsx(kA,{ref:n,className:Ye("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));di.displayName=kA.displayName;function a9(){nt();const{navigateWithAuth:e}=uo(),[t,n]=j.useState({city:"Getting location...",area:"Please wait"}),[r,a]=j.useState([]),[i,o]=j.useState(0),{notifications:c,unreadCount:d,markAsRead:h,markAllAsRead:m}=lT();j.useEffect(()=>{const x=async()=>{if(await Se.isAuthenticated()){u();const y=setInterval(u,5e3);return()=>clearInterval(y)}};p(),x()},[]);const u=async()=>{var x,v;try{if(!await Se.getToken())return;const w=await tr.getConversations(),b=Array.isArray(w)?w:(w==null?void 0:w.results)||[];r.length>0&&b.forEach(N=>{var E,T;const k=r.find(R=>R.id===N.id);k&&N.unread_count>k.unread_count&&f(`New message from ${(E=N.other_participant)==null?void 0:E.username}`,((T=N.last_message)==null?void 0:T.content)||"New message received")}),a(b);const _=b.reduce((N,k)=>N+(k.unread_count||0),0);o(_)}catch(y){(x=y.message)!=null&&x.includes("401")||(v=y.message)!=null&&v.includes("Unauthorized")?(a([]),o(0)):console.error("Failed to load conversations:",y)}},f=(x,v)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(x,{body:v,icon:"/favicon.ico"})},p=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async x=>{const{latitude:v,longitude:y}=x.coords;try{const b=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${v}&lon=${y}&addressdetails=1`)).json();if(b.address){const _=b.address.road||b.address.neighbourhood,N=b.address.neighbourhood||b.address.suburb||b.address.city||b.address.town||b.address.village||b.address.county;n({city:_||N||"Unknown City",area:`${b.address.neighbourhood||b.address.suburb||b.address.city||b.address.town||b.address.state||""}${b.address.city_district?`, ${b.address.city_district}`:""}`})}else n({city:"Location found",area:`${v.toFixed(4)}, ${y.toFixed(4)}`})}catch{n({city:"Location unavailable",area:"Service error"})}},x=>{n({city:"Location denied",area:"Enable location access"})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):n({city:"Location not supported",area:"Browser not compatible"})};return s.jsxs("div",{className:"sticky top-0 z-50 flex items-center justify-between px-3 py-1 bg-card/95 backdrop-blur-sm border-b border-border/30 min-h-[45px]",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("img",{src:li,alt:"Ezeyway",className:"h-24 w-24 md:h-16 md:w-28 object-contain"})}),s.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer text-center",onClick:p,children:[s.jsx(Gt,{className:"h-3 w-3 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-foreground",children:t.city}),s.jsx("p",{className:"text-[10px] text-muted-foreground",children:t.area})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Tc,{children:[s.jsx(Ac,{asChild:!0,children:s.jsxs("button",{className:"p-1.5 hover:bg-muted rounded-lg transition-smooth relative",children:[s.jsx(_a,{className:"h-5 w-5 text-foreground"}),i>0&&s.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-white font-bold",children:i>9?"9+":i})})]})}),s.jsxs(nl,{align:"end",className:"w-80",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Messages"}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e("/messages"),className:"text-xs",children:"View all"})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No messages"}):r.slice(0,5).map(x=>{var v,y,w,b,_,N;return s.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${x.unread_count>0?"bg-blue-50/50":""}`,onClick:()=>e(`/messages?conversation=${x.id}`),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(ci,{className:"h-8 w-8",children:[s.jsx(Ur,{src:(v=x.other_participant)==null?void 0:v.profile_picture}),s.jsx(di,{children:(w=(y=x.other_participant)==null?void 0:y.username)==null?void 0:w.charAt(0)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:(b=x.other_participant)==null?void 0:b.username}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((_=x.last_message)==null?void 0:_.content)||((N=x.last_message)==null?void 0:N.file_name)||"No messages"})]}),x.unread_count>0&&s.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-white font-bold",children:x.unread_count})})]})},x.id)})})]})]}),s.jsxs(Tc,{children:[s.jsx(Ac,{asChild:!0,children:s.jsxs("button",{className:"relative p-1.5 hover:bg-muted rounded-lg transition-smooth",children:[s.jsx(zn,{className:"h-5 w-5 text-foreground"}),d>0&&s.jsx(Fe,{className:"absolute -top-0.5 -right-0.5 h-4 w-4 rounded-full p-0 text-[10px] flex items-center justify-center min-w-[16px] bg-destructive text-destructive-foreground",children:d>9?"9+":d})]})}),s.jsxs(nl,{align:"end",className:"w-80",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Notifications"}),s.jsxs("div",{className:"flex gap-2",children:[d>0&&s.jsx(ie,{variant:"ghost",size:"sm",onClick:m,className:"text-xs",children:"Mark all read"}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e("/notifications"),className:"text-xs",children:"View all"})]})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:c.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):c.slice(0,5).map(x=>s.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${x.read?"":"bg-blue-50/50"}`,onClick:()=>{h(x.id),x.action_url&&e(x.action_url)},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${x.read?"bg-transparent":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-medium ${x.read?"text-gray-700":"text-gray-900"}`,children:x.title}),s.jsx("p",{className:`text-sm ${x.read?"text-gray-600":"text-gray-700"}`,children:x.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(x.created_at).toLocaleString()})]}),s.jsx(Fe,{variant:"outline",className:`text-xs ${x.type==="order"?"border-green-200 text-green-700":x.type==="payment"?"border-blue-200 text-blue-700":x.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:x.type})]})},x.id))})]})]})]})]})}const i9=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function o9(){const[e,t]=j.useState(""),[n,r]=j.useState([]),[a,i]=j.useState(!1),[o,c]=j.useState(!1),d=nt();es();const h=j.useRef(null),m=j.useRef(null);j.useEffect(()=>{const w=b=>{h.current&&!h.current.contains(b.target)&&m.current&&!m.current.contains(b.target)&&i(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),j.useEffect(()=>{e.trim().length>1?u(e.trim()):(r([]),i(!1))},[e]);const u=async w=>{c(!0);try{const b=await Se.getToken(),_=b?{Authorization:`Token ${b}`}:{},N=dt.getLocation(),k=new URLSearchParams({search:w,page_size:"5"});N&&(k.append("latitude",N.latitude.toString()),k.append("longitude",N.longitude.toString()));const T=await(await fetch(`${Qe}search/products/?${k}`,{headers:_})).json(),R=f(T.results||[]);r(R),i(!0)}catch(b){console.error("Search error:",b)}finally{c(!1)}},f=w=>{const b=dt.getLocation();return w.map(_=>{var E,T;const N=((E=_.images)==null?void 0:E.find(R=>R.is_primary))||((T=_.images)==null?void 0:T[0]);let k="N/A";return b&&_.vendor_latitude&&_.vendor_longitude&&(k=`${i9(b.latitude,b.longitude,_.vendor_latitude,_.vendor_longitude).toFixed(1)} km`),{id:_.id,name:_.name,vendor:_.vendor_name||"Unknown Vendor",price:`${_.price}`,image:(N==null?void 0:N.image_url)||"/placeholder-product.jpg",distance:k,category:_.category}})},p=w=>{w.preventDefault(),e.trim()&&(d(`/search?q=${encodeURIComponent(e.trim())}`),i(!1))},x=w=>{t(w.target.value)},v=w=>{d(`/product/${w}`),i(!1),t("")},y=()=>{e.trim()&&(d(`/search?q=${encodeURIComponent(e.trim())}`),i(!1))};return s.jsxs("div",{className:"px-3 py-2 bg-background relative",children:[s.jsx("form",{onSubmit:p,className:"flex gap-2",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Vo,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx("input",{ref:m,type:"text",placeholder:"Search products, vendors...",value:e,onChange:x,className:"w-full pl-9 pr-3 py-2.5 bg-muted/50 border border-border/50 rounded-lg text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth"})]})}),a&&s.jsx("div",{ref:h,className:"absolute top-full left-3 right-3 mt-1 bg-white border border-border rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",children:o?s.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Searching..."}):n.length>0?s.jsxs(s.Fragment,{children:[n.map(w=>s.jsxs("div",{onClick:()=>v(w.id),className:"flex items-center gap-3 p-3 hover:bg-muted/50 cursor-pointer border-b border-border/50 last:border-b-0",children:[s.jsx("img",{src:w.image,alt:w.name,className:"w-10 h-10 object-cover rounded",onError:b=>{b.target.src="/placeholder-product.jpg"}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-sm truncate",children:w.name}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:w.vendor}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"text-xs font-medium text-primary",children:w.price}),s.jsx("span",{className:"text-xs text-muted-foreground",children:w.distance})]})]})]},w.id)),s.jsx("div",{className:"p-3 border-t border-border",children:s.jsxs("button",{onClick:y,className:"w-full text-center text-sm text-primary hover:text-primary/80 font-medium",children:['View all results for "',e,'"']})})]}):e.trim().length>1?s.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:['No results found for "',e,'"']}):null})]})}const x1={Electronics:"",Fashion:"",Food:"",Home:"",Books:"",Sports:"",Beauty:"",Toys:"",Jewelry:"",Furniture:"",Automotive:"",Health:"","Pet Supplies":"",Stationery:"",Garden:"",Kids:"",Appliances:"",Hardware:"",Crafts:"",Travel:"",Grocery:"",Vegetables:"",Fruits:"",Dairy:"",Meat:"",Bakery:"",Beverages:"",Snacks:"",Organic:""};function l9(){const[e,t]=j.useState([]),[n,r]=j.useState(!0),a=nt();return j.useEffect(()=>{(async()=>{try{const o=await fetch(Qe+"categories/");if(!o.ok)throw new Error(`HTTP ${o.status}`);const c=await o.json();if(c.categories){const d=c.categories.map((h,m)=>({id:h.id||m+1,name:h.name,icon:h.icon_url||x1[h.name]||"",hasImage:!!h.icon_url}));t(d)}else t([])}catch(o){console.error("Error fetching categories:",o),t([])}finally{r(!1)}})()},[]),n?s.jsx("div",{className:"px-2 py-2 bg-gray-50",children:s.jsx("div",{className:"flex gap-3 overflow-x-auto",children:[...Array(6)].map((i,o)=>s.jsx("div",{className:"flex-none w-16",children:s.jsxs("div",{className:"w-full p-1 rounded-xl bg-gray-200 animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-300 rounded mb-1"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded"})]})},o))})}):e.length===0?s.jsx("div",{className:"px-2 py-2 bg-gray-50",children:s.jsx("div",{className:"text-center text-gray-500 text-sm py-4",children:"No categories available"})}):s.jsx("div",{className:"px-2 py-2 bg-gray-50",children:s.jsx("div",{className:"flex gap-3 overflow-x-auto overflow-y-hidden pb-2",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:e.map(i=>s.jsxs("button",{className:"flex-none px-3 py-1 rounded-xl font-medium text-center transition-all duration-200 bg-white text-gray-800 hover:bg-gray-100 active:scale-95 focus:outline-none min-w-16 touch-manipulation",onClick:()=>a(`/category/${encodeURIComponent(i.name)}`),children:[s.jsxs("div",{className:"mb-1 flex items-center justify-center h-8",children:[i.hasImage?s.jsx("img",{src:i.icon,alt:i.name,className:"w-8 h-8 object-contain",onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="block"}}):s.jsx("div",{className:"text-2xl",children:i.icon}),i.hasImage&&s.jsx("div",{className:"text-2xl",style:{display:"none"},children:x1[i.name]||""})]}),s.jsx("div",{className:"text-xs font-semibold whitespace-nowrap",children:i.name})]},i.id))})})}const c9="/assets/banner-grocery.jpg",d9="/assets/banner-electronics.jpg",u9="/assets/banner-food.jpg",h9=[{id:1,image:c9,title:"Fresh Groceries",subtitle:"Same day delivery"},{id:2,image:d9,title:"Electronics & Gadgets",subtitle:"Best prices guaranteed"},{id:3,image:u9,title:"Traditional Food",subtitle:"Authentic Nepali cuisine"}];function f9(){const[e,t]=j.useState(1),[n,r]=j.useState(!1),[a,i]=j.useState(0),[o,c]=j.useState(0),[d,h]=j.useState([]),[m,u]=j.useState(!0),[f,p]=j.useState(!0),x=j.useRef(null),v=d.length>0?d.map(E=>({id:E.id,image:E.image_url,title:E.title,subtitle:E.description||"",link_url:E.link_url})):h9,y=v.length>0?[v[v.length-1],...v,v[0]]:[],w=E=>{r(!0),i(E.touches[0].clientX),c(E.touches[0].clientX)},b=E=>{n&&c(E.touches[0].clientX)},_=()=>{if(!n)return;const E=a-o;Math.abs(E)>50&&(E>0&&e<v.length?t(R=>R+1):E<0&&e>1&&t(R=>R-1)),r(!1),c(0)},N=E=>{E.link_url&&window.open(E.link_url,"_blank")};j.useEffect(()=>{if(v.length>0){const E=setInterval(()=>{t(T=>T+1)},4e3);return()=>clearInterval(E)}},[v.length]),j.useEffect(()=>{v.length>0&&(e===y.length-1?setTimeout(()=>{p(!1),t(1),setTimeout(()=>p(!0),50)},500):e===0&&setTimeout(()=>{p(!1),t(v.length),setTimeout(()=>p(!0),50)},500))},[e,v.length]),j.useEffect(()=>{(async()=>{try{const{API_BASE:T}=await ze(async()=>{const{API_BASE:C}=await Promise.resolve().then(()=>eB);return{API_BASE:C}},void 0);let R="customer";window.location.pathname.startsWith("/vendor")&&(R="vendor"),console.log(` Fetching banners for user type: ${R}`);const M=await fetch(`${T}sliders/?user_type=${R}`),A=await M.json();if(console.log(" BannerCarousel API Response:",A),M.ok&&A&&A.sliders){console.log(" All sliders from API:",A.sliders),console.log(" Current userType:",R);const C=A.sliders.filter(z=>{const P=z.visibility||"both",O=P===R||P==="both";return console.log(` Slider "${z.title}": visibility="${P}", userType="${R}", shouldShow=${O}`),O});console.log(` BEFORE filtering: ${A.sliders.length} sliders`),console.log(` AFTER filtering: ${C.length} sliders for userType="${R}"`),console.log(" Filtered sliders:",C),h(C),C.length>0&&t(1)}else console.log(" No sliders data or API error"),h([])}catch(T){console.error("Error fetching sliders:",T),h([])}finally{u(!1)}})()},[]);const k=()=>{var T;if(window.innerWidth<768){if(n){const R=o-a,$=100,M=R/(((T=x.current)==null?void 0:T.offsetWidth)||1)*100,A=Math.max(-$,Math.min($,M));return`translateX(calc(-${e*100}% + ${A}px))`}return`translateX(-${e*100}%)`}else return`translateX(calc(-${e*50}% + 25%))`};return m?s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"relative overflow-hidden rounded-2xl shadow-brand h-48 bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[s.jsx($s,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Loading banners..."})]})})}):s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative md:overflow-visible overflow-hidden md:px-8",children:[s.jsx("div",{ref:x,className:`flex ${f?"transition-transform duration-500 ease-in-out":""}`,style:{transform:k()},onTouchStart:w,onTouchMove:b,onTouchEnd:_,children:(y.length>0?y:v).map((E,T)=>{const R=window.innerWidth<768,$=!R&&T===e;return s.jsx("div",{className:`flex-shrink-0 relative cursor-pointer transition-all duration-300 ${R?"w-full rounded-2xl shadow-brand overflow-hidden":`${$?"scale-100 opacity-100 z-10":"scale-75 opacity-60 z-0"} rounded-lg overflow-hidden`}`,style:R?{}:{width:"50%"},onClick:()=>N(E),children:s.jsx("img",{src:E.image,alt:E.title,className:"w-full h-48 md:h-auto md:max-h-64 object-cover md:object-contain",onError:M=>{M.target.style.display="none",M.target.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}})},`${E.id}-${T}`)})}),v.length>1&&s.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-1",children:v.map((E,T)=>s.jsx("button",{onClick:()=>t(T+1),className:`w-2 h-2 rounded-full transition-colors ${T===(e-1+v.length)%v.length?"bg-blue-500":"bg-gray-300"}`},T))})]})})}const rw=j.createContext({});function aw(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const iw=typeof window<"u",CA=iw?j.useLayoutEffect:j.useEffect,$p=j.createContext(null);function ow(e,t){e.indexOf(t)===-1&&e.push(t)}function lw(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ui=(e,t,n)=>n>t?t:n<e?e:n;let _m=()=>{};const hi={},PA=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function EA(e){return typeof e=="object"&&e!==null}const TA=e=>/^0[^.\s]+$/u.test(e);function cw(e){let t;return()=>(t===void 0&&(t=e()),t)}const wr=e=>e,m9=(e,t)=>n=>t(e(n)),mh=(...e)=>e.reduce(m9),qu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class dw{constructor(){this.subscriptions=[]}add(t){return ow(this.subscriptions,t),()=>lw(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Sa=e=>e*1e3,ka=e=>e/1e3;function AA(e,t){return t?e*(1e3/t):0}const OA=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,p9=1e-7,g9=12;function x9(e,t,n,r,a){let i,o,c=0;do o=t+(n-t)/2,i=OA(o,r,a)-e,i>0?n=o:t=o;while(Math.abs(i)>p9&&++c<g9);return o}function ph(e,t,n,r){if(e===t&&n===r)return wr;const a=i=>x9(i,0,1,e,n);return i=>i===0||i===1?i:OA(a(i),t,r)}const RA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,LA=e=>t=>1-e(1-t),MA=ph(.33,1.53,.69,.99),uw=LA(MA),IA=RA(uw),DA=e=>(e*=2)<1?.5*uw(e):.5*(2-Math.pow(2,-10*(e-1))),hw=e=>1-Math.sin(Math.acos(e)),FA=LA(hw),$A=RA(hw),v9=ph(.42,0,1,1),y9=ph(0,0,.58,1),zA=ph(.42,0,.58,1),b9=e=>Array.isArray(e)&&typeof e[0]!="number",BA=e=>Array.isArray(e)&&typeof e[0]=="number",v1={linear:wr,easeIn:v9,easeInOut:zA,easeOut:y9,circIn:hw,circInOut:$A,circOut:FA,backIn:uw,backInOut:IA,backOut:MA,anticipate:DA},w9=e=>typeof e=="string",y1=e=>{if(BA(e)){_m(e.length===4);const[t,n,r,a]=e;return ph(t,n,r,a)}else if(w9(e))return _m(v1[e]!==void 0),v1[e];return e},hf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],b1={value:null,addProjectionMetrics:null};function j9(e,t){let n=new Set,r=new Set,a=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function h(u){o.has(u)&&(m.schedule(u),e()),d++,u(c)}const m={schedule:(u,f=!1,p=!1)=>{const v=p&&a?n:r;return f&&o.add(u),v.has(u)||v.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(c=u,a){i=!0;return}a=!0,[n,r]=[r,n],n.forEach(h),t&&b1.value&&b1.value.frameloop[t].push(d),d=0,n.clear(),a=!1,i&&(i=!1,m.process(u))}};return m}const _9=40;function VA(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=hf.reduce((_,N)=>(_[N]=j9(i,t?N:void 0),_),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:m,update:u,preRender:f,render:p,postRender:x}=o,v=()=>{const _=hi.useManualTiming?a.timestamp:performance.now();n=!1,hi.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(_-a.timestamp,_9),1)),a.timestamp=_,a.isProcessing=!0,c.process(a),d.process(a),h.process(a),m.process(a),u.process(a),f.process(a),p.process(a),x.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(v))},y=()=>{n=!0,r=!0,a.isProcessing||e(v)};return{schedule:hf.reduce((_,N)=>{const k=o[N];return _[N]=(E,T=!1,R=!1)=>(n||y(),k.schedule(E,T,R)),_},{}),cancel:_=>{for(let N=0;N<hf.length;N++)o[hf[N]].cancel(_)},state:a,steps:o}}const{schedule:cs,cancel:eo,state:tn,steps:Ax}=VA(typeof requestAnimationFrame<"u"?requestAnimationFrame:wr,!0);let If;function N9(){If=void 0}const Bn={now:()=>(If===void 0&&Bn.set(tn.isProcessing||hi.useManualTiming?tn.timestamp:performance.now()),If),set:e=>{If=e,queueMicrotask(N9)}},UA=e=>t=>typeof t=="string"&&t.startsWith(e),fw=UA("--"),S9=UA("var(--"),mw=e=>S9(e)?k9.test(e.split("/*")[0].trim()):!1,k9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ed={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Hu={...ed,transform:e=>ui(0,1,e)},ff={...ed,default:1},lu=e=>Math.round(e*1e5)/1e5,pw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function C9(e){return e==null}const P9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gw=(e,t)=>n=>!!(typeof n=="string"&&P9.test(n)&&n.startsWith(e)||t&&!C9(n)&&Object.prototype.hasOwnProperty.call(n,t)),qA=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,i,o,c]=r.match(pw);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},E9=e=>ui(0,255,e),Ox={...ed,transform:e=>Math.round(E9(e))},Ao={test:gw("rgb","red"),parse:qA("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Ox.transform(e)+", "+Ox.transform(t)+", "+Ox.transform(n)+", "+lu(Hu.transform(r))+")"};function T9(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const uy={test:gw("#"),parse:T9,transform:Ao.transform},gh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ni=gh("deg"),Ca=gh("%"),pt=gh("px"),A9=gh("vh"),O9=gh("vw"),w1={...Ca,parse:e=>Ca.parse(e)/100,transform:e=>Ca.transform(e*100)},Ul={test:gw("hsl","hue"),parse:qA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ca.transform(lu(t))+", "+Ca.transform(lu(n))+", "+lu(Hu.transform(r))+")"},Ds={test:e=>Ao.test(e)||uy.test(e)||Ul.test(e),parse:e=>Ao.test(e)?Ao.parse(e):Ul.test(e)?Ul.parse(e):uy.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ao.transform(e):Ul.transform(e),getAnimatableNone:e=>{const t=Ds.parse(e);return t.alpha=0,Ds.transform(t)}},R9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function L9(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(pw))==null?void 0:t.length)||0)+(((n=e.match(R9))==null?void 0:n.length)||0)>0}const HA="number",WA="color",M9="var",I9="var(",j1="${}",D9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const c=t.replace(D9,d=>(Ds.test(d)?(r.color.push(i),a.push(WA),n.push(Ds.parse(d))):d.startsWith(I9)?(r.var.push(i),a.push(M9),n.push(d)):(r.number.push(i),a.push(HA),n.push(parseFloat(d))),++i,j1)).split(j1);return{values:n,split:c,indexes:r,types:a}}function ZA(e){return Wu(e).values}function GA(e){const{split:t,types:n}=Wu(e),r=t.length;return a=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],a[o]!==void 0){const c=n[o];c===HA?i+=lu(a[o]):c===WA?i+=Ds.transform(a[o]):i+=a[o]}return i}}const F9=e=>typeof e=="number"?0:Ds.test(e)?Ds.getAnimatableNone(e):e;function $9(e){const t=ZA(e);return GA(e)(t.map(F9))}const to={test:L9,parse:ZA,createTransformer:GA,getAnimatableNone:$9};function Rx(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function z9({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,i=0,o=0;if(!t)a=i=o=n;else{const c=n<.5?n*(1+t):n+t-n*t,d=2*n-c;a=Rx(d,c,e+1/3),i=Rx(d,c,e),o=Rx(d,c,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Nm(e,t){return n=>n>0?t:e}const fs=(e,t,n)=>e+(t-e)*n,Lx=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},B9=[uy,Ao,Ul],V9=e=>B9.find(t=>t.test(e));function _1(e){const t=V9(e);if(!t)return!1;let n=t.parse(e);return t===Ul&&(n=z9(n)),n}const N1=(e,t)=>{const n=_1(e),r=_1(t);if(!n||!r)return Nm(e,t);const a={...n};return i=>(a.red=Lx(n.red,r.red,i),a.green=Lx(n.green,r.green,i),a.blue=Lx(n.blue,r.blue,i),a.alpha=fs(n.alpha,r.alpha,i),Ao.transform(a))},hy=new Set(["none","hidden"]);function U9(e,t){return hy.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function q9(e,t){return n=>fs(e,t,n)}function xw(e){return typeof e=="number"?q9:typeof e=="string"?mw(e)?Nm:Ds.test(e)?N1:Z9:Array.isArray(e)?KA:typeof e=="object"?Ds.test(e)?N1:H9:Nm}function KA(e,t){const n=[...e],r=n.length,a=e.map((i,o)=>xw(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=a[o](i);return n}}function H9(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=xw(e[a])(e[a],t[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function W9(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][r[i]],c=e.values[o]??0;n[a]=c,r[i]++}return n}const Z9=(e,t)=>{const n=to.createTransformer(t),r=Wu(e),a=Wu(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?hy.has(e)&&!a.values.length||hy.has(t)&&!r.values.length?U9(e,t):mh(KA(W9(r,a),a.values),n):Nm(e,t)};function YA(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?fs(e,t,n):xw(e)(e,t)}const G9=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>cs.update(t,n),stop:()=>eo(t),now:()=>tn.isProcessing?tn.timestamp:Bn.now()}},XA=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=Math.round(e(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Sm=2e4;function vw(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Sm;)t+=n,r=e.next(t);return t>=Sm?1/0:t}function K9(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(vw(r),Sm);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:ka(a)}}const Y9=5;function JA(e,t,n){const r=Math.max(t-Y9,0);return AA(n-e(r),t-r)}const vs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Mx=.001;function X9({duration:e=vs.duration,bounce:t=vs.bounce,velocity:n=vs.velocity,mass:r=vs.mass}){let a,i,o=1-t;o=ui(vs.minDamping,vs.maxDamping,o),e=ui(vs.minDuration,vs.maxDuration,ka(e)),o<1?(a=h=>{const m=h*o,u=m*e,f=m-n,p=fy(h,o),x=Math.exp(-u);return Mx-f/p*x},i=h=>{const u=h*o*e,f=u*n+n,p=Math.pow(o,2)*Math.pow(h,2)*e,x=Math.exp(-u),v=fy(Math.pow(h,2),o);return(-a(h)+Mx>0?-1:1)*((f-p)*x)/v}):(a=h=>{const m=Math.exp(-h*e),u=(h-n)*e+1;return-Mx+m*u},i=h=>{const m=Math.exp(-h*e),u=(n-h)*(e*e);return m*u});const c=5/e,d=Q9(a,i,c);if(e=Sa(e),isNaN(d))return{stiffness:vs.stiffness,damping:vs.damping,duration:e};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:e}}}const J9=12;function Q9(e,t,n){let r=n;for(let a=1;a<J9;a++)r=r-e(r)/t(r);return r}function fy(e,t){return e*Math.sqrt(1-t*t)}const eU=["duration","bounce"],tU=["stiffness","damping","mass"];function S1(e,t){return t.some(n=>e[n]!==void 0)}function sU(e){let t={velocity:vs.velocity,stiffness:vs.stiffness,damping:vs.damping,mass:vs.mass,isResolvedFromDuration:!1,...e};if(!S1(e,tU)&&S1(e,eU))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*ui(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:vs.mass,stiffness:a,damping:i}}else{const n=X9(e);t={...t,...n,mass:vs.mass},t.isResolvedFromDuration=!0}return t}function km(e=vs.visualDuration,t=vs.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:i},{stiffness:d,damping:h,mass:m,duration:u,velocity:f,isResolvedFromDuration:p}=sU({...n,velocity:-ka(n.velocity||0)}),x=f||0,v=h/(2*Math.sqrt(d*m)),y=o-i,w=ka(Math.sqrt(d/m)),b=Math.abs(y)<5;r||(r=b?vs.restSpeed.granular:vs.restSpeed.default),a||(a=b?vs.restDelta.granular:vs.restDelta.default);let _;if(v<1){const k=fy(w,v);_=E=>{const T=Math.exp(-v*w*E);return o-T*((x+v*w*y)/k*Math.sin(k*E)+y*Math.cos(k*E))}}else if(v===1)_=k=>o-Math.exp(-w*k)*(y+(x+w*y)*k);else{const k=w*Math.sqrt(v*v-1);_=E=>{const T=Math.exp(-v*w*E),R=Math.min(k*E,300);return o-T*((x+v*w*y)*Math.sinh(R)+k*y*Math.cosh(R))/k}}const N={calculatedDuration:p&&u||null,next:k=>{const E=_(k);if(p)c.done=k>=u;else{let T=k===0?x:0;v<1&&(T=k===0?Sa(x):JA(_,k,E));const R=Math.abs(T)<=r,$=Math.abs(o-E)<=a;c.done=R&&$}return c.value=c.done?o:E,c},toString:()=>{const k=Math.min(vw(N),Sm),E=XA(T=>N.next(k*T).value,k,30);return k+"ms "+E},toTransition:()=>{}};return N}km.applyToOptions=e=>{const t=K9(e,100,km);return e.ease=t.ease,e.duration=Sa(t.duration),e.type="keyframes",e};function my({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:c,max:d,restDelta:h=.5,restSpeed:m}){const u=e[0],f={done:!1,value:u},p=R=>c!==void 0&&R<c||d!==void 0&&R>d,x=R=>c===void 0?d:d===void 0||Math.abs(c-R)<Math.abs(d-R)?c:d;let v=n*t;const y=u+v,w=o===void 0?y:o(y);w!==y&&(v=w-u);const b=R=>-v*Math.exp(-R/r),_=R=>w+b(R),N=R=>{const $=b(R),M=_(R);f.done=Math.abs($)<=h,f.value=f.done?w:M};let k,E;const T=R=>{p(f.value)&&(k=R,E=km({keyframes:[f.value,x(f.value)],velocity:JA(_,R,f.value),damping:a,stiffness:i,restDelta:h,restSpeed:m}))};return T(0),{calculatedDuration:null,next:R=>{let $=!1;return!E&&k===void 0&&($=!0,N(R),T(R)),k!==void 0&&R>=k?E.next(R-k):(!$&&N(R),f)}}}function nU(e,t,n){const r=[],a=n||hi.mix||YA,i=e.length-1;for(let o=0;o<i;o++){let c=a(e[o],e[o+1]);if(t){const d=Array.isArray(t)?t[o]||wr:t;c=mh(d,c)}r.push(c)}return r}function rU(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(_m(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=nU(t,r,a),d=c.length,h=m=>{if(o&&m<e[0])return t[0];let u=0;if(d>1)for(;u<e.length-2&&!(m<e[u+1]);u++);const f=qu(e[u],e[u+1],m);return c[u](f)};return n?m=>h(ui(e[0],e[i-1],m)):h}function aU(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=qu(0,t,r);e.push(fs(n,1,a))}}function iU(e){const t=[0];return aU(t,e.length-1),t}function oU(e,t){return e.map(n=>n*t)}function lU(e,t){return e.map(()=>t||zA).splice(0,e.length-1)}function cu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=b9(r)?r.map(y1):y1(r),i={done:!1,value:t[0]},o=oU(n&&n.length===t.length?n:iU(t),e),c=rU(o,t,{ease:Array.isArray(a)?a:lU(t,a)});return{calculatedDuration:e,next:d=>(i.value=c(d),i.done=d>=e,i)}}const cU=e=>e!==null;function yw(e,{repeat:t,repeatType:n="loop"},r,a=1){const i=e.filter(cU),c=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!c||r===void 0?i[c]:r}const dU={decay:my,inertia:my,tween:cu,keyframes:cu,spring:km};function QA(e){typeof e.type=="string"&&(e.type=dU[e.type])}class bw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const uU=e=>e/100;class ww extends bw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:n}=this.options;n&&n.updatedAt!==Bn.now()&&this.tick(Bn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;QA(t);const{type:n=cu,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=t;let{keyframes:c}=t;const d=n||cu;d!==cu&&typeof c[0]!="number"&&(this.mixKeyframes=mh(uU,YA(c[0],c[1])),c=[0,100]);const h=d({...t,keyframes:c});i==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=vw(h));const{calculatedDuration:m}=h;this.calculatedDuration=m,this.resolvedDuration=m+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=h}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:m,repeat:u,repeatType:f,repeatDelay:p,type:x,onUpdate:v,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const w=this.currentTime-h*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?w<0:w>a;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let _=this.currentTime,N=r;if(u){const R=Math.min(this.currentTime,a)/c;let $=Math.floor(R),M=R%1;!M&&R>=1&&(M=1),M===1&&$--,$=Math.min($,u+1),!!($%2)&&(f==="reverse"?(M=1-M,p&&(M-=p/c)):f==="mirror"&&(N=o)),_=ui(0,1,M)*c}const k=b?{done:!1,value:m[0]}:N.next(_);i&&(k.value=i(k.value));let{done:E}=k;!b&&d!==null&&(E=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return T&&x!==my&&(k.value=yw(m,this.options,y,this.speed)),v&&v(k.value),T&&this.finish(),k}then(t,n){return this.finished.then(t,n)}get duration(){return ka(this.calculatedDuration)}get time(){return ka(this.currentTime)}set time(t){var n;t=Sa(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Bn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ka(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:t=G9,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Bn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function hU(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Oo=e=>e*180/Math.PI,py=e=>{const t=Oo(Math.atan2(e[1],e[0]));return gy(t)},fU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:py,rotateZ:py,skewX:e=>Oo(Math.atan(e[1])),skewY:e=>Oo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},gy=e=>(e=e%360,e<0&&(e+=360),e),k1=py,C1=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),P1=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),mU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:C1,scaleY:P1,scale:e=>(C1(e)+P1(e))/2,rotateX:e=>gy(Oo(Math.atan2(e[6],e[5]))),rotateY:e=>gy(Oo(Math.atan2(-e[2],e[0]))),rotateZ:k1,rotate:k1,skewX:e=>Oo(Math.atan(e[4])),skewY:e=>Oo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function xy(e){return e.includes("scale")?1:0}function vy(e,t){if(!e||e==="none")return xy(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=mU,a=n;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=fU,a=c}if(!a)return xy(t);const i=r[t],o=a[1].split(",").map(gU);return typeof i=="function"?i(o):o[i]}const pU=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return vy(n,t)};function gU(e){return parseFloat(e.trim())}const td=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sd=new Set(td),E1=e=>e===ed||e===pt,xU=new Set(["x","y","z"]),vU=td.filter(e=>!xU.has(e));function yU(e){const t=[];return vU.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const qo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>vy(t,"x"),y:(e,{transform:t})=>vy(t,"y")};qo.translateX=qo.x;qo.translateY=qo.y;const Ho=new Set;let yy=!1,by=!1,wy=!1;function eO(){if(by){const e=Array.from(Ho).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=yU(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,o])=>{var c;(c=r.getValue(i))==null||c.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}by=!1,yy=!1,Ho.forEach(e=>e.complete(wy)),Ho.clear()}function tO(){Ho.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(by=!0)})}function bU(){wy=!0,tO(),eO(),wy=!1}class jw{constructor(t,n,r,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ho.add(this),yy||(yy=!0,cs.read(tO),cs.resolveKeyframes(eO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const i=a==null?void 0:a.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const c=r.readValue(n,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),a&&i===void 0&&a.set(t[0])}hU(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ho.delete(this)}cancel(){this.state==="scheduled"&&(Ho.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const wU=e=>e.startsWith("--");function jU(e,t,n){wU(t)?e.style.setProperty(t,n):e.style[t]=n}const _U=cw(()=>window.ScrollTimeline!==void 0),NU={};function SU(e,t){const n=cw(e);return()=>NU[t]??n()}const sO=SU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wd=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,T1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wd([0,.65,.55,1]),circOut:Wd([.55,0,1,.45]),backIn:Wd([.31,.01,.66,-.59]),backOut:Wd([.33,1.53,.69,.99])};function nO(e,t){if(e)return typeof e=="function"?sO()?XA(e,t):"ease-out":BA(e)?Wd(e):Array.isArray(e)?e.map(n=>nO(n,t)||T1.easeOut):T1[e]}function kU(e,t,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:c="easeOut",times:d}={},h=void 0){const m={[t]:n};d&&(m.offset=d);const u=nO(c,a);Array.isArray(u)&&(m.easing=u);const f={delay:r,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return h&&(f.pseudoElement=h),e.animate(m,f)}function rO(e){return typeof e=="function"&&"applyToOptions"in e}function CU({type:e,...t}){return rO(e)&&sO()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class PU extends bw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,_m(typeof t.type!="string");const h=CU(t);this.animation=kU(n,r,a,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const m=yw(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):jU(n,r,m),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ka(Number(t))}get time(){return ka(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Sa(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&_U()?(this.animation.timeline=t,wr):n(this)}}const aO={anticipate:DA,backInOut:IA,circInOut:$A};function EU(e){return e in aO}function TU(e){typeof e.ease=="string"&&EU(e.ease)&&(e.ease=aO[e.ease])}const A1=10;class AU extends PU{constructor(t){TU(t),QA(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const c=new ww({...o,autoplay:!1}),d=Sa(this.finishedTime??this.time);n.setWithVelocity(c.sample(d-A1).value,c.sample(d).value,A1),c.stop()}}const O1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(to.test(e)||e==="0")&&!e.startsWith("url("));function OU(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function RU(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=O1(a,t),c=O1(i,t);return!o||!c?!1:OU(e)||(n==="spring"||rO(n))&&r}function jy(e){e.duration=0,e.type}const LU=new Set(["opacity","clipPath","filter","transform"]),MU=cw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function IU(e){var m;const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:i,type:o}=e;if(!(((m=t==null?void 0:t.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=t.owner.getProps();return MU()&&n&&LU.has(n)&&(n!=="transform"||!h)&&!d&&!r&&a!=="mirror"&&i!==0&&o!=="inertia"}const DU=40;class FU extends bw{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:c,name:d,motionValue:h,element:m,...u}){var x;super(),this.stop=()=>{var v,y;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=Bn.now();const f={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:o,name:d,motionValue:h,element:m,...u},p=(m==null?void 0:m.KeyframeResolver)||jw;this.keyframeResolver=new p(c,(v,y,w)=>this.onKeyframesResolved(v,y,f,!w),d,h,m),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:c,delay:d,isHandoff:h,onUpdate:m}=r;this.resolvedAt=Bn.now(),RU(t,i,o,c)||((hi.instantAnimations||!d)&&(m==null||m(yw(t,r,n))),t[0]=t[t.length-1],jy(r),r.repeat=0);const f={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>DU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!h&&IU(f)?new AU({...f,element:f.motionValue.owner.current}):new ww(f);p.finished.then(()=>this.notifyFinished()).catch(wr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),bU()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const $U=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zU(e){const t=$U.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function iO(e,t,n=1){const[r,a]=zU(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return PA(o)?parseFloat(o):o}return mw(a)?iO(a,t,n+1):a}function _w(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const oO=new Set(["width","height","top","left","right","bottom",...td]),BU={test:e=>e==="auto",parse:e=>e},lO=e=>t=>t.test(e),cO=[ed,pt,Ca,Ni,O9,A9,BU],R1=e=>cO.find(lO(e));function VU(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||TA(e):!0}const UU=new Set(["brightness","contrast","saturate","opacity"]);function qU(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(pw)||[];if(!r)return e;const a=n.replace(r,"");let i=UU.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const HU=/\b([a-z-]*)\(.*?\)/gu,_y={...to,getAnimatableNone:e=>{const t=e.match(HU);return t?t.map(qU).join(" "):e}},L1={...ed,transform:Math.round},WU={rotate:Ni,rotateX:Ni,rotateY:Ni,rotateZ:Ni,scale:ff,scaleX:ff,scaleY:ff,scaleZ:ff,skew:Ni,skewX:Ni,skewY:Ni,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:Hu,originX:w1,originY:w1,originZ:pt},Nw={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,backgroundPositionX:pt,backgroundPositionY:pt,...WU,zIndex:L1,fillOpacity:Hu,strokeOpacity:Hu,numOctaves:L1},ZU={...Nw,color:Ds,backgroundColor:Ds,outlineColor:Ds,fill:Ds,stroke:Ds,borderColor:Ds,borderTopColor:Ds,borderRightColor:Ds,borderBottomColor:Ds,borderLeftColor:Ds,filter:_y,WebkitFilter:_y},dO=e=>ZU[e];function uO(e,t){let n=dO(e);return n!==_y&&(n=to),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const GU=new Set(["auto","none","0"]);function KU(e,t,n){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!GU.has(i)&&Wu(i).values.length&&(a=e[r]),r++}if(a&&n)for(const i of t)e[i]=uO(n,a)}class YU extends jw{constructor(t,n,r,a,i){super(t,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let h=t[d];if(typeof h=="string"&&(h=h.trim(),mw(h))){const m=iO(h,n.current);m!==void 0&&(t[d]=m),d===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!oO.has(r)||t.length!==2)return;const[a,i]=t,o=R1(a),c=R1(i);if(o!==c)if(E1(o)&&E1(c))for(let d=0;d<t.length;d++){const h=t[d];typeof h=="string"&&(t[d]=parseFloat(h))}else qo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||VU(t[a]))&&r.push(a);r.length&&KU(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var c;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=qo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,h])=>{t.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function XU(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const a=document.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const hO=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function fO(e){return EA(e)&&"offsetHeight"in e}const M1=30,JU=e=>!isNaN(parseFloat(e));class QU{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const a=Bn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Bn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=JU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new dw);const r=this.events[t].add(n);return t==="change"?()=>{r(),cs.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>M1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,M1);return AA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rc(e,t){return new QU(e,t)}const{schedule:Sw,cancel:Cre}=VA(queueMicrotask,!1),Ar={x:!1,y:!1};function mO(){return Ar.x||Ar.y}function eq(e){return e==="x"||e==="y"?Ar[e]?null:(Ar[e]=!0,()=>{Ar[e]=!1}):Ar.x||Ar.y?null:(Ar.x=Ar.y=!0,()=>{Ar.x=Ar.y=!1})}function pO(e,t){const n=XU(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function I1(e){return!(e.pointerType==="touch"||mO())}function tq(e,t,n={}){const[r,a,i]=pO(e,n),o=c=>{if(!I1(c))return;const{target:d}=c,h=t(d,c);if(typeof h!="function"||!d)return;const m=u=>{I1(u)&&(h(u),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,a)};return r.forEach(c=>{c.addEventListener("pointerenter",o,a)}),i}const gO=(e,t)=>t?e===t?!0:gO(e,t.parentElement):!1,kw=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,sq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nq(e){return sq.has(e.tagName)||e.tabIndex!==-1}const Df=new WeakSet;function D1(e){return t=>{t.key==="Enter"&&e(t)}}function Ix(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const rq=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=D1(()=>{if(Df.has(n))return;Ix(n,"down");const a=D1(()=>{Ix(n,"up")}),i=()=>Ix(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function F1(e){return kw(e)&&!mO()}function aq(e,t,n={}){const[r,a,i]=pO(e,n),o=c=>{const d=c.currentTarget;if(!F1(c))return;Df.add(d);const h=t(d,c),m=(p,x)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",f),Df.has(d)&&Df.delete(d),F1(p)&&typeof h=="function"&&h(p,{success:x})},u=p=>{m(p,d===window||d===document||n.useGlobalTarget||gO(d,p.target))},f=p=>{m(p,!1)};window.addEventListener("pointerup",u,a),window.addEventListener("pointercancel",f,a)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",o,a),fO(c)&&(c.addEventListener("focus",h=>rq(h,a)),!nq(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function xO(e){return EA(e)&&"ownerSVGElement"in e}function iq(e){return xO(e)&&e.tagName==="svg"}const fn=e=>!!(e&&e.getVelocity),oq=[...cO,Ds,to],lq=e=>oq.find(lO(e)),Cw=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class cq extends j.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,a=fO(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dq({children:e,isPresent:t,anchorX:n,root:r}){const a=j.useId(),i=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=j.useContext(Cw);return j.useInsertionEffect(()=>{const{width:d,height:h,top:m,left:u,right:f}=o.current;if(t||!i.current||!d||!h)return;const p=n==="left"?`left: ${u}`:`right: ${f}`;i.current.dataset.motionPopId=a;const x=document.createElement("style");c&&(x.nonce=c);const v=r??document.head;return v.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${p}px !important;
            top: ${m}px !important;
          }
        `),()=>{v.contains(x)&&v.removeChild(x)}},[t]),s.jsx(cq,{isPresent:t,childRef:i,sizeRef:o,children:j.cloneElement(e,{ref:i})})}const uq=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:o,anchorX:c,root:d})=>{const h=aw(hq),m=j.useId();let u=!0,f=j.useMemo(()=>(u=!1,{id:m,initial:t,isPresent:n,custom:a,onExitComplete:p=>{h.set(p,!0);for(const x of h.values())if(!x)return;r&&r()},register:p=>(h.set(p,!1),()=>h.delete(p))}),[n,h,r]);return i&&u&&(f={...f}),j.useMemo(()=>{h.forEach((p,x)=>h.set(x,!1))},[n]),j.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),o==="popLayout"&&(e=s.jsx(dq,{isPresent:n,anchorX:c,root:d,children:e})),s.jsx($p.Provider,{value:f,children:e})};function hq(){return new Map}function vO(e=!0){const t=j.useContext($p);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=j.useId();j.useEffect(()=>{if(e)return a(i)},[e]);const o=j.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const mf=e=>e.key||"";function $1(e){const t=[];return j.Children.forEach(e,n=>{j.isValidElement(n)&&t.push(n)}),t}const z1=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:c="left",root:d})=>{const[h,m]=vO(o),u=j.useMemo(()=>$1(e),[e]),f=o&&!h?[]:u.map(mf),p=j.useRef(!0),x=j.useRef(u),v=aw(()=>new Map),[y,w]=j.useState(u),[b,_]=j.useState(u);CA(()=>{p.current=!1,x.current=u;for(let E=0;E<b.length;E++){const T=mf(b[E]);f.includes(T)?v.delete(T):v.get(T)!==!0&&v.set(T,!1)}},[b,f.length,f.join("-")]);const N=[];if(u!==y){let E=[...u];for(let T=0;T<b.length;T++){const R=b[T],$=mf(R);f.includes($)||(E.splice(T,0,R),N.push(R))}return i==="wait"&&N.length&&(E=N),_($1(E)),w(u),null}const{forceRender:k}=j.useContext(rw);return s.jsx(s.Fragment,{children:b.map(E=>{const T=mf(E),R=o&&!h?!1:u===b||f.includes(T),$=()=>{if(v.has(T))v.set(T,!0);else return;let M=!0;v.forEach(A=>{A||(M=!1)}),M&&(k==null||k(),_(x.current),o&&(m==null||m()),r&&r())};return s.jsx(uq,{isPresent:R,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,root:d,onExitComplete:R?void 0:$,anchorX:c,children:E},T)})})},yO=j.createContext({strict:!1}),B1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lc={};for(const e in B1)Lc[e]={isEnabled:t=>B1[e].some(n=>!!t[n])};function fq(e){for(const t in e)Lc[t]={...Lc[t],...e[t]}}const mq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cm(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||mq.has(e)}let bO=e=>!Cm(e);function pq(e){typeof e=="function"&&(bO=t=>t.startsWith("on")?!Cm(t):e(t))}try{pq(require("@emotion/is-prop-valid").default)}catch{}function gq(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(bO(a)||n===!0&&Cm(a)||!t&&!Cm(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}const zp=j.createContext({});function Bp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Zu(e){return typeof e=="string"||Array.isArray(e)}const Pw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ew=["initial",...Pw];function Vp(e){return Bp(e.animate)||Ew.some(t=>Zu(e[t]))}function wO(e){return!!(Vp(e)||e.variants)}function xq(e,t){if(Vp(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Zu(n)?n:void 0,animate:Zu(r)?r:void 0}}return e.inherit!==!1?t:{}}function vq(e){const{initial:t,animate:n}=xq(e,j.useContext(zp));return j.useMemo(()=>({initial:t,animate:n}),[V1(t),V1(n)])}function V1(e){return Array.isArray(e)?e.join(" "):e}const Gu={};function yq(e){for(const t in e)Gu[t]=e[t],fw(t)&&(Gu[t].isCSSVariable=!0)}function jO(e,{layout:t,layoutId:n}){return sd.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Gu[e]||e==="opacity")}const bq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wq=td.length;function jq(e,t,n){let r="",a=!0;for(let i=0;i<wq;i++){const o=td[i],c=e[o];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(o.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||n){const h=hO(c,Nw[o]);if(!d){a=!1;const m=bq[o]||o;r+=`${m}(${h}) `}n&&(t[o]=h)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function Tw(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let o=!1,c=!1;for(const d in t){const h=t[d];if(sd.has(d)){o=!0;continue}else if(fw(d)){a[d]=h;continue}else{const m=hO(h,Nw[d]);d.startsWith("origin")?(c=!0,i[d]=m):r[d]=m}}if(t.transform||(o||n?r.transform=jq(t,e.transform,n):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:m=0}=i;r.transformOrigin=`${d} ${h} ${m}`}}const Aw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _O(e,t,n){for(const r in t)!fn(t[r])&&!jO(r,n)&&(e[r]=t[r])}function _q({transformTemplate:e},t){return j.useMemo(()=>{const n=Aw();return Tw(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Nq(e,t){const n=e.style||{},r={};return _O(r,n,e),Object.assign(r,_q(e,t)),r}function Sq(e,t){const n={},r=Nq(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const kq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Cq={offset:"strokeDashoffset",array:"strokeDasharray"};function Pq(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?kq:Cq;e[i.offset]=pt.transform(-r);const o=pt.transform(t),c=pt.transform(n);e[i.array]=`${o} ${c}`}function NO(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...c},d,h,m){if(Tw(e,c,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:u,style:f}=e;u.transform&&(f.transform=u.transform,delete u.transform),(f.transform||u.transformOrigin)&&(f.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),f.transform&&(f.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete u.transformBox),t!==void 0&&(u.x=t),n!==void 0&&(u.y=n),r!==void 0&&(u.scale=r),a!==void 0&&Pq(u,a,i,o,!1)}const SO=()=>({...Aw(),attrs:{}}),kO=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Eq(e,t,n,r){const a=j.useMemo(()=>{const i=SO();return NO(i,t,kO(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};_O(i,e.style,e),a.style={...i,...a.style}}return a}const Tq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ow(e){return typeof e!="string"||e.includes("-")?!1:!!(Tq.indexOf(e)>-1||/[A-Z]/u.test(e))}function Aq(e,t,n,{latestValues:r},a,i=!1){const c=(Ow(e)?Eq:Sq)(t,r,a,e),d=gq(t,typeof e=="string",i),h=e!==j.Fragment?{...d,...c,ref:n}:{},{children:m}=t,u=j.useMemo(()=>fn(m)?m.get():m,[m]);return j.createElement(e,{...h,children:u})}function U1(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Rw(e,t,n,r){if(typeof t=="function"){const[a,i]=U1(r);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=U1(r);t=t(n!==void 0?n:e.custom,a,i)}return t}function Ff(e){return fn(e)?e.get():e}function Oq({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:Rq(n,r,a,e),renderState:t()}}function Rq(e,t,n,r){const a={},i=r(e,{});for(const f in i)a[f]=Ff(i[f]);let{initial:o,animate:c}=e;const d=Vp(e),h=wO(e);t&&h&&!d&&e.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let m=n?n.initial===!1:!1;m=m||o===!1;const u=m?c:o;if(u&&typeof u!="boolean"&&!Bp(u)){const f=Array.isArray(u)?u:[u];for(let p=0;p<f.length;p++){const x=Rw(e,f[p]);if(x){const{transitionEnd:v,transition:y,...w}=x;for(const b in w){let _=w[b];if(Array.isArray(_)){const N=m?_.length-1:0;_=_[N]}_!==null&&(a[b]=_)}for(const b in v)a[b]=v[b]}}}return a}const CO=e=>(t,n)=>{const r=j.useContext(zp),a=j.useContext($p),i=()=>Oq(e,t,r,a);return n?i():aw(i)};function Lw(e,t,n){var i;const{style:r}=e,a={};for(const o in r)(fn(r[o])||t.style&&fn(t.style[o])||jO(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(a[o]=r[o]);return a}const Lq=CO({scrapeMotionValuesFromProps:Lw,createRenderState:Aw});function PO(e,t,n){const r=Lw(e,t,n);for(const a in e)if(fn(e[a])||fn(t[a])){const i=td.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}const Mq=CO({scrapeMotionValuesFromProps:PO,createRenderState:SO}),Iq=Symbol.for("motionComponentSymbol");function ql(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Dq(e,t,n){return j.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ql(n)&&(n.current=r))},[t])}const Mw=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Fq="framerAppearId",EO="data-"+Mw(Fq),TO=j.createContext({});function $q(e,t,n,r,a){var v,y;const{visualElement:i}=j.useContext(zp),o=j.useContext(yO),c=j.useContext($p),d=j.useContext(Cw).reducedMotion,h=j.useRef(null);r=r||o.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:i,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=h.current,u=j.useContext(TO);m&&!m.projection&&a&&(m.type==="html"||m.type==="svg")&&zq(h.current,n,a,u);const f=j.useRef(!1);j.useInsertionEffect(()=>{m&&f.current&&m.update(n,c)});const p=n[EO],x=j.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,p)));return CA(()=>{m&&(f.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),x.current&&m.animationState&&m.animationState.animateChanges())}),j.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,p)}),x.current=!1),m.enteringChildren=void 0)}),m}function zq(e,t,n,r){const{layoutId:a,layout:i,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:m}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:AO(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||c&&ql(c),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:h})}function AO(e){if(e)return e.options.allowProjection!==!1?e.projection:AO(e.parent)}function Dx(e,{forwardMotionProps:t=!1}={},n,r){n&&fq(n);const a=Ow(e)?Mq:Lq;function i(c,d){let h;const m={...j.useContext(Cw),...c,layoutId:Bq(c)},{isStatic:u}=m,f=vq(c),p=a(c,u);if(!u&&iw){Vq();const x=Uq(m);h=x.MeasureLayout,f.visualElement=$q(e,p,m,r,x.ProjectionNode)}return s.jsxs(zp.Provider,{value:f,children:[h&&f.visualElement?s.jsx(h,{visualElement:f.visualElement,...m}):null,Aq(e,c,Dq(p,f.visualElement,d),p,u,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=j.forwardRef(i);return o[Iq]=e,o}function Bq({layoutId:e}){const t=j.useContext(rw).id;return t&&e!==void 0?t+"-"+e:e}function Vq(e,t){j.useContext(yO).strict}function Uq(e){const{drag:t,layout:n}=Lc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function qq(e,t){if(typeof Proxy>"u")return Dx;const n=new Map,r=(i,o)=>Dx(i,o,e,t),a=(i,o)=>r(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,Dx(o,void 0,e,t)),n.get(o))})}function OO({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Hq({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Wq(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Fx(e){return e===void 0||e===1}function Ny({scale:e,scaleX:t,scaleY:n}){return!Fx(e)||!Fx(t)||!Fx(n)}function No(e){return Ny(e)||RO(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function RO(e){return q1(e.x)||q1(e.y)}function q1(e){return e&&e!=="0%"}function Pm(e,t,n){const r=e-n,a=t*r;return n+a}function H1(e,t,n,r,a){return a!==void 0&&(e=Pm(e,a,r)),Pm(e,n,r)+t}function Sy(e,t=0,n=1,r,a){e.min=H1(e.min,t,n,r,a),e.max=H1(e.max,t,n,r,a)}function LO(e,{x:t,y:n}){Sy(e.x,t.translate,t.scale,t.originPoint),Sy(e.y,n.translate,n.scale,n.originPoint)}const W1=.999999999999,Z1=1.0000000000001;function Zq(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,o;for(let c=0;c<a;c++){i=n[c],o=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Wl(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,LO(e,o)),r&&No(i.latestValues)&&Wl(e,i.latestValues))}t.x<Z1&&t.x>W1&&(t.x=1),t.y<Z1&&t.y>W1&&(t.y=1)}function Hl(e,t){e.min=e.min+t,e.max=e.max+t}function G1(e,t,n,r,a=.5){const i=fs(e.min,e.max,a);Sy(e,t,n,i,r)}function Wl(e,t){G1(e.x,t.x,t.scaleX,t.scale,t.originX),G1(e.y,t.y,t.scaleY,t.scale,t.originY)}function MO(e,t){return OO(Wq(e.getBoundingClientRect(),t))}function Gq(e,t,n){const r=MO(e,n),{scroll:a}=t;return a&&(Hl(r.x,a.offset.x),Hl(r.y,a.offset.y)),r}const K1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zl=()=>({x:K1(),y:K1()}),Y1=()=>({min:0,max:0}),Ns=()=>({x:Y1(),y:Y1()}),ky={current:null},IO={current:!1};function Kq(){if(IO.current=!0,!!iw)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ky.current=e.matches;e.addEventListener("change",t),t()}else ky.current=!1}const Yq=new WeakMap;function Xq(e,t,n){for(const r in t){const a=t[r],i=n[r];if(fn(a))e.addValue(r,a);else if(fn(i))e.addValue(r,Rc(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(r);e.addValue(r,Rc(o!==void 0?o:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const X1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jq{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Bn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,cs.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=Vp(n),this.isVariantNode=wO(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in u){const p=u[f];d[f]!==void 0&&fn(p)&&p.set(d[f])}}mount(t){var n;this.current=t,Yq.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),IO.current||Kq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ky.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),eo(this.notifyUpdate),eo(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=sd.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&cs.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Lc){const n=Lc[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ns()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<X1.length;r++){const a=X1[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=Xq(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Rc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(PA(r)||TA(r))?r=parseFloat(r):!lq(r)&&to.test(n)&&(r=uO(t,n)),this.setBaseTarget(t,fn(r)?r.get():r)),fn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Rw(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!fn(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new dw),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){Sw.render(this.render)}}class DO extends Jq{constructor(){super(...arguments),this.KeyframeResolver=YU}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;fn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function FO(e,{style:t,vars:n},r,a){const i=e.style;let o;for(o in t)i[o]=t[o];a==null||a.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function Qq(e){return window.getComputedStyle(e)}class eH extends DO{constructor(){super(...arguments),this.type="html",this.renderInstance=FO}readValueFromInstance(t,n){var r;if(sd.has(n))return(r=this.projection)!=null&&r.isProjecting?xy(n):pU(t,n);{const a=Qq(t),i=(fw(n)?a.getPropertyValue(n):a[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return MO(t,n)}build(t,n,r){Tw(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Lw(t,n,r)}}const $O=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function tH(e,t,n,r){FO(e,t,void 0,r);for(const a in t.attrs)e.setAttribute($O.has(a)?a:Mw(a),t.attrs[a])}class sH extends DO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ns}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(sd.has(n)){const r=dO(n);return r&&r.default||0}return n=$O.has(n)?n:Mw(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return PO(t,n,r)}build(t,n,r){NO(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){tH(t,n,r,a)}mount(t){this.isSVGTag=kO(t.tagName),super.mount(t)}}const nH=(e,t)=>Ow(e)?new sH(t):new eH(t,{allowProjection:e!==j.Fragment});function ic(e,t,n){const r=e.getProps();return Rw(r,t,n!==void 0?n:r.custom,e)}const Cy=e=>Array.isArray(e);function rH(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Rc(n))}function aH(e){return Cy(e)?e[e.length-1]||0:e}function iH(e,t){const n=ic(e,t);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const o in i){const c=aH(i[o]);rH(e,o,c)}}function oH(e){return!!(fn(e)&&e.add)}function Py(e,t){const n=e.getValue("willChange");if(oH(n))return n.add(t);if(!n&&hi.WillChange){const r=new hi.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function zO(e){return e.props[EO]}const lH=e=>e!==null;function cH(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(lH),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return!i||r===void 0?a[i]:r}const dH={type:"spring",stiffness:500,damping:25,restSpeed:10},uH=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),hH={type:"keyframes",duration:.8},fH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mH=(e,{keyframes:t})=>t.length>2?hH:sd.has(e)?e.startsWith("scale")?uH(t[1]):dH:fH;function pH({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:c,from:d,elapsed:h,...m}){return!!Object.keys(m).length}const Iw=(e,t,n,r={},a,i)=>o=>{const c=_w(r,e)||{},d=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Sa(d);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:f=>{t.set(f),c.onUpdate&&c.onUpdate(f)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:i?void 0:a};pH(c)||Object.assign(m,mH(e,m)),m.duration&&(m.duration=Sa(m.duration)),m.repeatDelay&&(m.repeatDelay=Sa(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let u=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(jy(m),m.delay===0&&(u=!0)),(hi.instantAnimations||hi.skipAnimations)&&(u=!0,jy(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,u&&!i&&t.get()!==void 0){const f=cH(m.keyframes,c);if(f!==void 0){cs.update(()=>{m.onUpdate(f),m.onComplete()});return}}return c.isSync?new ww(m):new FU(m)};function gH({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function BO(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...c}=t;r&&(i=r);const d=[],h=a&&e.animationState&&e.animationState.getState()[a];for(const m in c){const u=e.getValue(m,e.latestValues[m]??null),f=c[m];if(f===void 0||h&&gH(h,m))continue;const p={delay:n,..._w(i||{},m)},x=u.get();if(x!==void 0&&!u.isAnimating&&!Array.isArray(f)&&f===x&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const w=zO(e);if(w){const b=window.MotionHandoffAnimation(w,m,cs);b!==null&&(p.startTime=b,v=!0)}}Py(e,m),u.start(Iw(m,u,f,e.shouldReduceMotion&&oO.has(m)?{type:!1}:p,e,v));const y=u.animation;y&&d.push(y)}return o&&Promise.all(d).then(()=>{cs.update(()=>{o&&iH(e,o)})}),d}function VO(e,t,n,r=0,a=1){const i=Array.from(e).sort((h,m)=>h.sortNodePosition(m)).indexOf(t),o=e.size,c=(o-1)*r;return typeof n=="function"?n(i,o):a===1?i*r:c-i*r}function Ey(e,t,n={}){var d;const r=ic(e,t,n.type==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(BO(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:u,staggerDirection:f}=a;return xH(e,t,h,m,u,f,n)}:()=>Promise.resolve(),{when:c}=a;if(c){const[h,m]=c==="beforeChildren"?[i,o]:[o,i];return h().then(()=>m())}else return Promise.all([i(),o(n.delay)])}function xH(e,t,n=0,r=0,a=0,i=1,o){const c=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),c.push(Ey(d,t,{...o,delay:n+(typeof r=="function"?0:r)+VO(e.variantChildren,d,r,a,i)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(c)}function vH(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>Ey(e,i,n));r=Promise.all(a)}else if(typeof t=="string")r=Ey(e,t,n);else{const a=typeof t=="function"?ic(e,t,n.custom):t;r=Promise.all(BO(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function UO(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const yH=Ew.length;function qO(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?qO(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<yH;n++){const r=Ew[n],a=e.props[r];(Zu(a)||a===!1)&&(t[r]=a)}return t}const bH=[...Pw].reverse(),wH=Pw.length;function jH(e){return t=>Promise.all(t.map(({animation:n,options:r})=>vH(e,n,r)))}function _H(e){let t=jH(e),n=J1(),r=!0;const a=d=>(h,m)=>{var f;const u=ic(e,m,d==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(u){const{transition:p,transitionEnd:x,...v}=u;h={...h,...v,...x}}return h};function i(d){t=d(e)}function o(d){const{props:h}=e,m=qO(e.parent)||{},u=[],f=new Set;let p={},x=1/0;for(let y=0;y<wH;y++){const w=bH[y],b=n[w],_=h[w]!==void 0?h[w]:m[w],N=Zu(_),k=w===d?b.isActive:null;k===!1&&(x=y);let E=_===m[w]&&_!==h[w]&&N;if(E&&r&&e.manuallyAnimateOnMount&&(E=!1),b.protectedKeys={...p},!b.isActive&&k===null||!_&&!b.prevProp||Bp(_)||typeof _=="boolean")continue;const T=NH(b.prevProp,_);let R=T||w===d&&b.isActive&&!E&&N||y>x&&N,$=!1;const M=Array.isArray(_)?_:[_];let A=M.reduce(a(w),{});k===!1&&(A={});const{prevResolvedValues:C={}}=b,z={...C,...A},P=J=>{R=!0,f.has(J)&&($=!0,f.delete(J)),b.needsAnimating[J]=!0;const G=e.getValue(J);G&&(G.liveStyle=!1)};for(const J in z){const G=A[J],F=C[J];if(p.hasOwnProperty(J))continue;let I=!1;Cy(G)&&Cy(F)?I=!UO(G,F):I=G!==F,I?G!=null?P(J):f.add(J):G!==void 0&&f.has(J)?P(J):b.protectedKeys[J]=!0}b.prevProp=_,b.prevResolvedValues=A,b.isActive&&(p={...p,...A}),r&&e.blockInitialAnimation&&(R=!1);const O=E&&T;R&&(!O||$)&&u.push(...M.map(J=>{const G={type:w};if(typeof J=="string"&&r&&!O&&e.manuallyAnimateOnMount&&e.parent){const{parent:F}=e,I=ic(F,J);if(F.enteringChildren&&I){const{delayChildren:V}=I.transition||{};G.delay=VO(F.enteringChildren,e,V)}}return{animation:J,options:G}}))}if(f.size){const y={};if(typeof h.initial!="boolean"){const w=ic(e,Array.isArray(h.initial)?h.initial[0]:h.initial);w&&w.transition&&(y.transition=w.transition)}f.forEach(w=>{const b=e.getBaseTarget(w),_=e.getValue(w);_&&(_.liveStyle=!0),y[w]=b??null}),u.push({animation:y})}let v=!!u.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(u):Promise.resolve()}function c(d,h){var u;if(n[d].isActive===h)return Promise.resolve();(u=e.variantChildren)==null||u.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(d,h)}),n[d].isActive=h;const m=o(d);for(const f in n)n[f].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:i,getState:()=>n,reset:()=>{n=J1(),r=!0}}}function NH(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!UO(t,e):!1}function bo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function J1(){return{animate:bo(!0),whileInView:bo(),whileHover:bo(),whileTap:bo(),whileDrag:bo(),whileFocus:bo(),exit:bo()}}class ho{constructor(t){this.isMounted=!1,this.node=t}update(){}}class SH extends ho{constructor(t){super(t),t.animationState||(t.animationState=_H(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Bp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let kH=0;class CH extends ho{constructor(){super(...arguments),this.id=kH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const PH={animation:{Feature:SH},exit:{Feature:CH}};function Ku(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function xh(e){return{point:{x:e.pageX,y:e.pageY}}}const EH=e=>t=>kw(t)&&e(t,xh(t));function du(e,t,n,r){return Ku(e,t,EH(n),r)}const HO=1e-4,TH=1-HO,AH=1+HO,WO=.01,OH=0-WO,RH=0+WO;function Sn(e){return e.max-e.min}function LH(e,t,n){return Math.abs(e-t)<=n}function Q1(e,t,n,r=.5){e.origin=r,e.originPoint=fs(t.min,t.max,e.origin),e.scale=Sn(n)/Sn(t),e.translate=fs(n.min,n.max,e.origin)-e.originPoint,(e.scale>=TH&&e.scale<=AH||isNaN(e.scale))&&(e.scale=1),(e.translate>=OH&&e.translate<=RH||isNaN(e.translate))&&(e.translate=0)}function uu(e,t,n,r){Q1(e.x,t.x,n.x,r?r.originX:void 0),Q1(e.y,t.y,n.y,r?r.originY:void 0)}function eS(e,t,n){e.min=n.min+t.min,e.max=e.min+Sn(t)}function MH(e,t,n){eS(e.x,t.x,n.x),eS(e.y,t.y,n.y)}function tS(e,t,n){e.min=t.min-n.min,e.max=e.min+Sn(t)}function hu(e,t,n){tS(e.x,t.x,n.x),tS(e.y,t.y,n.y)}function fr(e){return[e("x"),e("y")]}const ZO=({current:e})=>e?e.ownerDocument.defaultView:null,sS=(e,t)=>Math.abs(e-t);function IH(e,t){const n=sS(e.x,t.x),r=sS(e.y,t.y);return Math.sqrt(n**2+r**2)}class GO{constructor(t,n,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=zx(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=IH(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!x)return;const{point:v}=f,{timestamp:y}=tn;this.history.push({...v,timestamp:y});const{onStart:w,onMove:b}=this.handlers;p||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=$x(p,this.transformPagePoint),cs.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:x,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=zx(f.type==="pointercancel"?this.lastMoveEventInfo:$x(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(f,w),v&&v(f,w)},!kw(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=a||window;const c=xh(t),d=$x(c,this.transformPagePoint),{point:h}=d,{timestamp:m}=tn;this.history=[{...h,timestamp:m}];const{onSessionStart:u}=n;u&&u(t,zx(d,this.history)),this.removeListeners=mh(du(this.contextWindow,"pointermove",this.handlePointerMove),du(this.contextWindow,"pointerup",this.handlePointerUp),du(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),eo(this.updatePoint)}}function $x(e,t){return t?{point:t(e.point)}:e}function nS(e,t){return{x:e.x-t.x,y:e.y-t.y}}function zx({point:e},t){return{point:e,delta:nS(e,KO(t)),offset:nS(e,DH(t)),velocity:FH(t,.1)}}function DH(e){return e[0]}function KO(e){return e[e.length-1]}function FH(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=KO(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>Sa(t)));)n--;if(!r)return{x:0,y:0};const i=ka(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function $H(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?fs(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?fs(n,e,r.max):Math.min(e,n)),e}function rS(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function zH(e,{top:t,left:n,bottom:r,right:a}){return{x:rS(e.x,n,a),y:rS(e.y,t,r)}}function aS(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function BH(e,t){return{x:aS(e.x,t.x),y:aS(e.y,t.y)}}function VH(e,t){let n=.5;const r=Sn(e),a=Sn(t);return a>r?n=qu(t.min,t.max-r,e.min):r>a&&(n=qu(e.min,e.max-a,t.min)),ui(0,1,n)}function UH(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Ty=.35;function qH(e=Ty){return e===!1?e=0:e===!0&&(e=Ty),{x:iS(e,"left","right"),y:iS(e,"top","bottom")}}function iS(e,t,n){return{min:oS(e,t),max:oS(e,n)}}function oS(e,t){return typeof e=="number"?e:e[t]||0}const HH=new WeakMap;class WH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ns(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xh(u).point)},o=(u,f)=>{const{drag:p,dragPropagation:x,onDragStart:v}=this.getProps();if(p&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eq(p),!this.openDragLock))return;this.latestPointerEvent=u,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fr(w=>{let b=this.getAxisMotionValue(w).get()||0;if(Ca.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const N=_.layout.layoutBox[w];N&&(b=Sn(N)*(parseFloat(b)/100))}}this.originPoint[w]=b}),v&&cs.postRender(()=>v(u,f)),Py(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},c=(u,f)=>{this.latestPointerEvent=u,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:v,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:w}=f;if(x&&this.currentDirection===null){this.currentDirection=ZH(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),y&&y(u,f)},d=(u,f)=>{this.latestPointerEvent=u,this.latestPanInfo=f,this.stop(u,f),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>fr(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)==null?void 0:f.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new GO(t,{onSessionStart:i,onStart:o,onMove:c,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:ZO(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,a=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!r)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&cs.postRender(()=>c(r,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!pf(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=$H(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;t&&ql(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=zH(r.layoutBox,t):this.constraints=!1,this.elastic=qH(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&fr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=UH(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ql(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=Gq(r,a.root,this.visualElement.getTransformPagePoint());let o=BH(a.layout.layoutBox,i);if(n){const c=n(Hq(o));this.hasMutatedConstraints=!!c,c&&(o=OO(c))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=fr(m=>{if(!pf(m,n,this.currentDirection))return;let u=d&&d[m]||{};o&&(u={min:0,max:0});const f=a?200:1e6,p=a?40:1e7,x={type:"inertia",velocity:r?t[m]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...u};return this.startAxisValueAnimation(m,x)});return Promise.all(h).then(c)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Py(this.visualElement,t),r.start(Iw(t,r,0,n,this.visualElement,!1))}stopAnimation(){fr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fr(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){fr(n=>{const{drag:r}=this.getProps();if(!pf(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:o,max:c}=a.layout.layoutBox[n];i.set(t[n]-fs(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ql(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};fr(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();a[o]=VH({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fr(o=>{if(!pf(o,t,null))return;const c=this.getAxisMotionValue(o),{min:d,max:h}=this.constraints[o];c.set(fs(d,h,a[o]))})}addListeners(){if(!this.visualElement.current)return;HH.set(this.visualElement,this);const t=this.visualElement.current,n=du(t,"pointerdown",d=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();ql(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),cs.read(r);const o=Ku(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(fr(m=>{const u=this.getAxisMotionValue(m);u&&(this.originPoint[m]+=d[m].translate,u.set(u.get()+d[m].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Ty,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:c}}}function pf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function ZH(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class GH extends ho{constructor(t){super(t),this.removeGroupControls=wr,this.removeListeners=wr,this.controls=new WH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wr}unmount(){this.removeGroupControls(),this.removeListeners()}}const lS=e=>(t,n)=>{e&&cs.postRender(()=>e(t,n))};class KH extends ho{constructor(){super(...arguments),this.removePointerDownListener=wr}onPointerDown(t){this.session=new GO(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZO(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:lS(t),onStart:lS(n),onMove:r,onEnd:(i,o)=>{delete this.session,a&&cs.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=du(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $f={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Md={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(pt.test(e))e=parseFloat(e);else return e;const n=cS(e,t.target.x),r=cS(e,t.target.y);return`${n}% ${r}%`}},YH={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=to.parse(e);if(a.length>5)return r;const i=to.createTransformer(e),o=typeof a[0]!="number"?1:0,c=n.x.scale*t.x,d=n.y.scale*t.y;a[0+o]/=c,a[1+o]/=d;const h=fs(c,d,.5);return typeof a[2+o]=="number"&&(a[2+o]/=h),typeof a[3+o]=="number"&&(a[3+o]/=h),i(a)}};let Bx=!1;class XH extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;yq(JH),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),Bx&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),$f.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,Bx=!0,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||cs.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Sw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;Bx=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function YO(e){const[t,n]=vO(),r=j.useContext(rw);return s.jsx(XH,{...e,layoutGroup:r,switchLayoutGroup:j.useContext(TO),isPresent:t,safeToRemove:n})}const JH={borderRadius:{...Md,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Md,borderTopRightRadius:Md,borderBottomLeftRadius:Md,borderBottomRightRadius:Md,boxShadow:YH};function QH(e,t,n){const r=fn(e)?e:Rc(e);return r.start(Iw("",r,t,n)),r.animation}const eW=(e,t)=>e.depth-t.depth;class tW{constructor(){this.children=[],this.isDirty=!1}add(t){ow(this.children,t),this.isDirty=!0}remove(t){lw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(eW),this.isDirty=!1,this.children.forEach(t)}}function sW(e,t){const n=Bn.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(eo(r),e(i-t))};return cs.setup(r,!0),()=>eo(r)}const XO=["TopLeft","TopRight","BottomLeft","BottomRight"],nW=XO.length,dS=e=>typeof e=="string"?parseFloat(e):e,uS=e=>typeof e=="number"||pt.test(e);function rW(e,t,n,r,a,i){a?(e.opacity=fs(0,n.opacity??1,aW(r)),e.opacityExit=fs(t.opacity??1,0,iW(r))):i&&(e.opacity=fs(t.opacity??1,n.opacity??1,r));for(let o=0;o<nW;o++){const c=`border${XO[o]}Radius`;let d=hS(t,c),h=hS(n,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||uS(d)===uS(h)?(e[c]=Math.max(fs(dS(d),dS(h),r),0),(Ca.test(h)||Ca.test(d))&&(e[c]+="%")):e[c]=h}(t.rotate||n.rotate)&&(e.rotate=fs(t.rotate||0,n.rotate||0,r))}function hS(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const aW=JO(0,.5,FA),iW=JO(.5,.95,wr);function JO(e,t,n){return r=>r<e?0:r>t?1:n(qu(e,t,r))}function fS(e,t){e.min=t.min,e.max=t.max}function hr(e,t){fS(e.x,t.x),fS(e.y,t.y)}function mS(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function pS(e,t,n,r,a){return e-=t,e=Pm(e,1/n,r),a!==void 0&&(e=Pm(e,1/a,r)),e}function oW(e,t=0,n=1,r=.5,a,i=e,o=e){if(Ca.test(t)&&(t=parseFloat(t),t=fs(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=fs(i.min,i.max,r);e===i&&(c-=t),e.min=pS(e.min,t,n,c,a),e.max=pS(e.max,t,n,c,a)}function gS(e,t,[n,r,a],i,o){oW(e,t[n],t[r],t[a],t.scale,i,o)}const lW=["x","scaleX","originX"],cW=["y","scaleY","originY"];function xS(e,t,n,r){gS(e.x,t,lW,n?n.x:void 0,r?r.x:void 0),gS(e.y,t,cW,n?n.y:void 0,r?r.y:void 0)}function vS(e){return e.translate===0&&e.scale===1}function QO(e){return vS(e.x)&&vS(e.y)}function yS(e,t){return e.min===t.min&&e.max===t.max}function dW(e,t){return yS(e.x,t.x)&&yS(e.y,t.y)}function bS(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function eR(e,t){return bS(e.x,t.x)&&bS(e.y,t.y)}function wS(e){return Sn(e.x)/Sn(e.y)}function jS(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class uW{constructor(){this.members=[]}add(t){ow(this.members,t),t.scheduleRender()}remove(t){if(lw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hW(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((a||i||o)&&(r=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:u,rotateY:f,skewX:p,skewY:x}=n;h&&(r=`perspective(${h}px) ${r}`),m&&(r+=`rotate(${m}deg) `),u&&(r+=`rotateX(${u}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),x&&(r+=`skewY(${x}deg) `)}const c=e.x.scale*t.x,d=e.y.scale*t.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const Vx=["","X","Y","Z"],fW=1e3;let mW=0;function Ux(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function tR(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=zO(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",cs,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&tR(r)}function sR({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},c=t==null?void 0:t()){this.id=mW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(xW),this.nodes.forEach(wW),this.nodes.forEach(jW),this.nodes.forEach(vW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new tW)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new dw),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=xO(o)&&!iq(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),e){let m,u=0;const f=()=>this.root.updateBlockedByResize=!1;cs.read(()=>{u=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==u&&(u=p,this.root.updateBlockedByResize=!0,m&&m(),m=sW(f,250),$f.hasAnimatedSinceResize&&($f.hasAnimatedSinceResize=!1,this.nodes.forEach(SS)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:u,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||CW,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=h.getProps(),w=!this.targetLayout||!eR(this.targetLayout,p),b=!u&&f;if(this.options.layoutRoot||this.resumeFrom||b||u&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={..._w(x,"layout"),onPlay:v,onComplete:y};(h.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(m,b)}else u||SS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),eo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_W),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&tR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const u=this.path[m];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_S);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(NS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(bW),this.nodes.forEach(pW),this.nodes.forEach(gW)):this.nodes.forEach(NS),this.clearAllSnapshots();const c=Bn.now();tn.delta=ui(0,1e3/60,c-tn.timestamp),tn.timestamp=c,tn.isProcessing=!0,Ax.update.process(tn),Ax.preRender.process(tn),Ax.render.process(tn),tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yW),this.sharedNodes.forEach(NW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,cs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){cs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Sn(this.snapshot.measuredBox.x)&&!Sn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ns(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!QO(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||No(this.latestValues)||m)&&(a(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),PW(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:o}=this.options;if(!o)return Ns();const c=o.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(EW))){const{scroll:m}=this.root;m&&(Hl(c.x,m.offset.x),Hl(c.y,m.offset.y))}return c}removeElementScroll(o){var d;const c=Ns();if(hr(c,o),(d=this.scroll)!=null&&d.wasRoot)return c;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:u,options:f}=m;m!==this.root&&u&&f.layoutScroll&&(u.wasRoot&&hr(c,o),Hl(c.x,u.offset.x),Hl(c.y,u.offset.y))}return c}applyTransform(o,c=!1){const d=Ns();hr(d,o);for(let h=0;h<this.path.length;h++){const m=this.path[h];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Wl(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),No(m.latestValues)&&Wl(d,m.latestValues)}return No(this.latestValues)&&Wl(d,this.latestValues),d}removeTransform(o){const c=Ns();hr(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!No(h.latestValues))continue;Ny(h.latestValues)&&h.updateSnapshot();const m=Ns(),u=h.measurePageBox();hr(m,u),xS(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return No(this.latestValues)&&xS(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:u}=this.options;if(!(!this.layout||!(m||u))){if(this.resolvedRelativeTargetAt=tn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ns(),this.relativeTargetOrigin=Ns(),hu(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ns(),this.targetWithTransforms=Ns()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hr(this.target,this.layout.layoutBox),LO(this.target,this.targetDelta)):hr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ns(),this.relativeTargetOrigin=Ns(),hu(this.relativeTargetOrigin,this.target,p.target),hr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ny(this.parent.latestValues)||RO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===tn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||m))return;hr(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,f=this.treeScale.y;Zq(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ns());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mS(this.prevProjectionDelta.x,this.projectionDelta.x),mS(this.prevProjectionDelta.y,this.projectionDelta.y)),uu(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==u||this.treeScale.y!==f||!jS(this.projectionDelta.x,this.prevProjectionDelta.x)||!jS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zl(),this.projectionDelta=Zl(),this.projectionDeltaWithTransform=Zl()}setAnimationOrigin(o,c=!1){const d=this.snapshot,h=d?d.latestValues:{},m={...this.latestValues},u=Zl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const f=Ns(),p=d?d.source:void 0,x=this.layout?this.layout.source:void 0,v=p!==x,y=this.getStack(),w=!y||y.members.length<=1,b=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(kW));this.animationProgress=0;let _;this.mixTargetDelta=N=>{const k=N/1e3;kS(u.x,o.x,k),kS(u.y,o.y,k),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hu(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SW(this.relativeTarget,this.relativeTargetOrigin,f,k),_&&dW(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Ns()),hr(_,this.relativeTarget)),v&&(this.animationValues=m,rW(m,h,this.latestValues,k,b,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,d,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(h=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||h.stop(),this.pendingAnimation&&(eo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=cs.update(()=>{$f.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Rc(0)),this.currentAnimation=QH(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),o.onUpdate&&o.onUpdate(m)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:m}=o;if(!(!c||!d||!h)){if(this!==o&&this.layout&&h&&nR(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Ns();const u=Sn(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+u;const f=Sn(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+f}hr(c,d),Wl(c,m),uu(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new uW),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&Ux("z",o,h,this.animationValues);for(let m=0;m<Vx.length;m++)Ux(`rotate${Vx[m]}`,o,h,this.animationValues),Ux(`skew${Vx[m]}`,o,h,this.animationValues);o.render();for(const m in h)o.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Ff(c==null?void 0:c.pointerEvents)||"",o.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Ff(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!No(this.latestValues)&&(o.transform=d?d({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=h.animationValues||h.latestValues;this.applyTransformsToTarget();let u=hW(this.projectionDeltaWithTransform,this.treeScale,m);d&&(u=d(m,u)),o.transform=u;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,h.animationValues?o.opacity=h===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in Gu){if(m[x]===void 0)continue;const{correct:v,applyTo:y,isCSSVariable:w}=Gu[x],b=u==="none"?m[x]:v(m[x],h);if(y){const _=y.length;for(let N=0;N<_;N++)o[y[N]]=b}else w?this.options.visualElement.renderState.vars[x]=b:o[x]=b}this.options.layoutId&&(o.pointerEvents=h===this?Ff(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(_S),this.root.sharedNodes.clear()}}}function pW(e){e.updateLayout()}function gW(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?fr(u=>{const f=o?t.measuredBox[u]:t.layoutBox[u],p=Sn(f);f.min=r[u].min,f.max=f.min+p}):nR(i,t.layoutBox,r)&&fr(u=>{const f=o?t.measuredBox[u]:t.layoutBox[u],p=Sn(r[u]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+p)});const c=Zl();uu(c,r,t.layoutBox);const d=Zl();o?uu(d,e.applyTransform(a,!0),t.measuredBox):uu(d,r,t.layoutBox);const h=!QO(c);let m=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:p}=u;if(f&&p){const x=Ns();hu(x,t.layoutBox,f.layoutBox);const v=Ns();hu(v,r,p.layoutBox),eR(x,v)||(m=!0),u.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=x,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:m})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function xW(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function vW(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function yW(e){e.clearSnapshot()}function _S(e){e.clearMeasurements()}function NS(e){e.isLayoutDirty=!1}function bW(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function SS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function wW(e){e.resolveTargetDelta()}function jW(e){e.calcProjection()}function _W(e){e.resetSkewAndRotation()}function NW(e){e.removeLeadSnapshot()}function kS(e,t,n){e.translate=fs(t.translate,0,n),e.scale=fs(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function CS(e,t,n,r){e.min=fs(t.min,n.min,r),e.max=fs(t.max,n.max,r)}function SW(e,t,n,r){CS(e.x,t.x,n.x,r),CS(e.y,t.y,n.y,r)}function kW(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const CW={duration:.45,ease:[.4,0,.1,1]},PS=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ES=PS("applewebkit/")&&!PS("chrome/")?Math.round:wr;function TS(e){e.min=ES(e.min),e.max=ES(e.max)}function PW(e){TS(e.x),TS(e.y)}function nR(e,t,n){return e==="position"||e==="preserve-aspect"&&!LH(wS(t),wS(n),.2)}function EW(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const TW=sR({attachResizeListener:(e,t)=>Ku(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qx={current:void 0},rR=sR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!qx.current){const e=new TW({});e.mount(window),e.setOptions({layoutScroll:!0}),qx.current=e}return qx.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),AW={pan:{Feature:KH},drag:{Feature:GH,ProjectionNode:rR,MeasureLayout:YO}};function AS(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&cs.postRender(()=>i(t,xh(t)))}class OW extends ho{mount(){const{current:t}=this.node;t&&(this.unmount=tq(t,(n,r)=>(AS(this.node,r,"Start"),a=>AS(this.node,a,"End"))))}unmount(){}}class RW extends ho{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mh(Ku(this.node.current,"focus",()=>this.onFocus()),Ku(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function OS(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&cs.postRender(()=>i(t,xh(t)))}class LW extends ho{mount(){const{current:t}=this.node;t&&(this.unmount=aq(t,(n,r)=>(OS(this.node,r,"Start"),(a,{success:i})=>OS(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ay=new WeakMap,Hx=new WeakMap,MW=e=>{const t=Ay.get(e.target);t&&t(e)},IW=e=>{e.forEach(MW)};function DW({root:e,...t}){const n=e||document;Hx.has(n)||Hx.set(n,{});const r=Hx.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(IW,{root:e,...t})),r[a]}function FW(e,t,n){const r=DW(t);return Ay.set(e,n),r.observe(e),()=>{Ay.delete(e),r.unobserve(e)}}const $W={some:0,all:1};class zW extends ho{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:$W[a]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:u}=this.node.getProps(),f=h?m:u;f&&f(d)};return FW(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(BW(t,n))&&this.startObserver()}unmount(){}}function BW({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const VW={inView:{Feature:zW},tap:{Feature:LW},focus:{Feature:RW},hover:{Feature:OW}},UW={layout:{ProjectionNode:rR,MeasureLayout:YO}},qW={...PH,...VW,...AW,...UW},oc=qq(qW,nH),nd=(e,t)=>e.free_delivery?{isFreeDelivery:!0,deliveryFee:0,displayText:"Free Delivery",badgeColor:"bg-green-100 text-green-800"}:e.custom_delivery_fee_enabled&&e.custom_delivery_fee!==null&&e.custom_delivery_fee!==void 0?{isFreeDelivery:!1,deliveryFee:e.custom_delivery_fee,displayText:`${e.custom_delivery_fee} delivery`,badgeColor:"bg-blue-100 text-blue-800"}:{isFreeDelivery:!1,deliveryFee:null,displayText:"Delivery at checkout",badgeColor:"bg-orange-100 text-orange-800"},Up=async e=>{var t,n;try{const r=await Se.getUser();if(!r||!((t=r.available_roles)!=null&&t.includes("vendor")))return e;const{response:a,data:i}=await Re("/vendor-profiles/");if(!a.ok||!((n=i==null?void 0:i.results)!=null&&n.length))return e;const c=i.results[0].id;return e.filter(d=>d.vendor_id!==c)}catch(r){return console.error("Error filtering own products:",r),e}},HW=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function WW(e){const t=Math.floor(e),n=e%1>=.5,r=5-t-(n?1:0);return s.jsxs(s.Fragment,{children:[Array.from({length:t}).map((a,i)=>s.jsx(js,{className:"h-2.5 w-2.5 fill-yellow-400 text-yellow-400"},`full-${i}`)),n&&s.jsx(js,{className:"h-2.5 w-2.5 fill-yellow-400 text-yellow-400",style:{clipPath:"inset(0 50% 0 0)"}},"half"),Array.from({length:r}).map((a,i)=>s.jsx(js,{className:"h-2.5 w-2.5 stroke-yellow-400 text-transparent"},`empty-${i}`))]})}function ZW({onDataLoaded:e}={}){const t=nt();Gn();const{toast:n}=es(),{addToCartWithAuth:r}=uo(),[a,i]=j.useState([]),[o,c]=j.useState(!0),[d,h]=j.useState(dt.getLocation());j.useEffect(()=>{const x=dt.subscribe(h);if(dt.startTracking(),dt.getLocation())m();else{const y=setTimeout(()=>{dt.getLocation()||(console.log(" No location available, fetching products without location filter"),m())},3e3);return()=>{clearTimeout(y),x()}}return x},[]),j.useEffect(()=>{d&&m()},[d]);const m=async()=>{try{c(!0);const x={"ngrok-skip-browser-warning":"true"},v=dt.getLocation(),y=new URLSearchParams({page_size:"20"});v&&(y.append("latitude",v.latitude.toString()),y.append("longitude",v.longitude.toString()));const w=await fetch(`${Qe}search/products/?${y}`,{headers:x});if(!w.ok)throw new Error(`HTTP ${w.status}`);const b=await w.json(),_=await Up(b.results||[]),N=u(_);i(N)}catch(x){console.error("Error fetching trending items:",x),i([])}finally{c(!1),e==null||e()}},u=x=>{const v=dt.getLocation(),y=10;let w=x.map(b=>{var T,R;const _=((T=b.images)==null?void 0:T.find($=>$.is_primary))||((R=b.images)==null?void 0:R[0]);let N="N/A",k=1/0;v&&b.vendor_latitude&&b.vendor_longitude&&(k=HW(v.latitude,v.longitude,b.vendor_latitude,b.vendor_longitude),N=`${k.toFixed(1)} km`);const E=nd(b,b.vendor_delivery_fee);return{id:b.id,name:b.name,vendor:b.vendor_name||"Unknown Vendor",vendor_id:b.vendor_id,distance:N,distanceValue:k,rating:4.5,price:`${b.price}`,priceValue:parseFloat(b.price),image:(_==null?void 0:_.image_url)||"/placeholder-product.jpg",inStock:b.quantity>0,category:b.category,totalSold:b.total_sold||0,deliveryInfo:E,vendorOnline:b.vendor_online!==!1,deliveryRadius:b.delivery_radius||y,free_delivery:b.free_delivery,custom_delivery_fee_enabled:b.custom_delivery_fee_enabled,custom_delivery_fee:b.custom_delivery_fee}}).filter(b=>b.vendorOnline&&(b.distanceValue===1/0||b.distanceValue<=b.deliveryRadius));return w.sort((b,_)=>_.rating-b.rating),w.slice(0,6)},f=x=>{t(`/product/${x}`)},p=async(x,v)=>{v.stopPropagation();const y=a.find(w=>w.id===x.id);t("/checkout",{state:{directBuy:!0,product:{id:x.id,name:x.name,price:x.price.replace("",""),quantity:1,vendor_name:x.vendor,vendor_id:y==null?void 0:y.vendor_id,images:[{image_url:x.image}],free_delivery:y==null?void 0:y.free_delivery,custom_delivery_fee_enabled:y==null?void 0:y.custom_delivery_fee_enabled,custom_delivery_fee:y==null?void 0:y.custom_delivery_fee}}})};return o?s.jsxs("section",{className:"px-4 sm:px-6 md:px-8 mb-6 lg:mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-foreground tracking-tight",children:"Trending Now "}),s.jsx(ie,{variant:"outline",size:"sm",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},className:"rounded-full hover:bg-[#856043] hover:text-white text-sm",onClick:()=>t("/trending-items"),children:"View All"})]}),s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx($s,{className:"h-8 w-8 animate-spin"})})]}):s.jsxs("section",{className:"px-4 sm:px-6 md:px-8 mb-6 lg:mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground tracking-tight",children:"Trending Now "}),s.jsx(ie,{variant:"ghost",size:"sm",className:"text-sm text-gray-600 hover:text-gray-800",onClick:()=>t("/trending-items"),children:"View All"})]}),s.jsx("div",{className:"flex gap-3 sm:gap-4 overflow-x-auto custom-scrollbar pb-3 snap-x snap-mandatory",children:a.map((x,v)=>s.jsxs(oc.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,delay:v*.08,ease:"easeOut"},whileHover:{scale:1.03,boxShadow:"0 12px 24px rgba(0,0,0,0.15)"},whileTap:{scale:.97},className:"relative min-w-[130px] sm:min-w-[150px] md:min-w-[130px] bg-gradient-to-br from-card/90 to-card rounded-xl p-3 shadow-lg border border-border/20 hover:shadow-xl hover:border-primary/40 transition-all duration-300 cursor-pointer group snap-start",onClick:()=>f(x.id),"aria-label":`View ${x.name} from ${x.vendor}`,children:[s.jsxs(gx,{children:[s.jsx(xx,{asChild:!0,children:s.jsx("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-full p-1 shadow-md group-hover:animate-bounce",children:s.jsx(e6,{className:"h-3 w-3"})})}),s.jsx(Rf,{side:"top",className:"text-xs",children:"Hot Item!"})]}),s.jsx("div",{className:"w-full h-20 mb-2 overflow-hidden rounded-md",children:s.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ease-in-out",onError:y=>{y.target.src="/placeholder-product.jpg"}})}),s.jsx("h3",{className:"font-semibold text-xs mb-1 text-foreground line-clamp-1",children:x.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-1 truncate",children:x.vendor}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("div",{className:"flex gap-0.5",children:WW(x.rating)}),s.jsxs(gx,{children:[s.jsx(xx,{asChild:!0,children:s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Gt,{className:"h-3 w-3"}),s.jsx("span",{className:"text-xs",children:x.distance})]})}),s.jsx(Rf,{side:"bottom",className:"text-xs",children:"Distance from you"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-primary text-sm",children:x.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[x.totalSold||0," sold"]})]}),s.jsxs(gx,{children:[s.jsx(xx,{asChild:!0,children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${x.deliveryInfo.isFreeDelivery?"bg-green-100 text-green-700":x.deliveryInfo.deliveryFee===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:x.deliveryInfo.isFreeDelivery?"Free":x.deliveryInfo.deliveryFee===null?"TBD":`${x.deliveryInfo.deliveryFee}`})]})}),s.jsx(Rf,{side:"bottom",className:"text-xs",children:x.deliveryInfo.isFreeDelivery?"Free Delivery":x.deliveryInfo.deliveryFee===null?"Delivery fee determined at checkout":`Delivery: ${x.deliveryInfo.deliveryFee}`})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ie,{variant:"outline",size:"sm",className:"w-6 h-6 p-0 border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white",disabled:!x.inStock,onClick:async y=>{if(y.stopPropagation(),!await Se.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:x.id,quantity:1},path:"/cart",timestamp:Date.now()})),t("/login");return}try{await r(x.id.toString(),1),n({title:"Added to Cart",description:`${x.name} added to your cart`}),t("/cart")}catch(b){console.error("Error adding to cart:",b)}},children:s.jsx(nn,{className:"h-3 w-3"})}),s.jsx(ie,{variant:"default",size:"sm",className:"flex-1 h-6 text-[10px] bg-green-600 hover:bg-green-700 text-white",disabled:!x.inStock,onClick:async y=>{if(y.stopPropagation(),!await Se.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:{id:x.id,name:x.name,price:x.price.replace("",""),quantity:1,vendor_name:x.vendor,vendor_id:x.vendor_id,images:[{image_url:x.image}],free_delivery:x.free_delivery,custom_delivery_fee_enabled:x.custom_delivery_fee_enabled,custom_delivery_fee:x.custom_delivery_fee},path:"/checkout",timestamp:Date.now()})),t("/login");return}p(x,y)},children:"Buy"})]})]})]},x.id))})]})}const GW=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function KW({onDataLoaded:e}={}){const t=nt();Gn();const{toast:n}=es(),{addToCartWithAuth:r}=uo(),[a,i]=j.useState([]),[o,c]=j.useState(!0),[d,h]=j.useState(dt.getLocation());j.useEffect(()=>{const x=dt.subscribe(h);if(dt.startTracking(),dt.getLocation())m();else{const y=setTimeout(()=>{dt.getLocation()||(console.log(" No location available, fetching products without location filter"),m())},3e3);return()=>{clearTimeout(y),x()}}return x},[]),j.useEffect(()=>{d&&m()},[d]);const m=async()=>{try{c(!0);const x={"ngrok-skip-browser-warning":"true"},v=dt.getLocation(),y=new URLSearchParams({page_size:"20"});v&&(y.append("latitude",v.latitude.toString()),y.append("longitude",v.longitude.toString()));const b=await(await fetch(`${Qe}search/products/?${y}`,{headers:x})).json(),_=await Up(b.results||[]),N=u(_);i(N)}catch(x){console.error("Error fetching featured products:",x)}finally{c(!1),e==null||e()}},u=x=>{const v=dt.getLocation(),y=10;let b=x.filter(_=>_.featured===!0).map(_=>{var R,$;const N=((R=_.images)==null?void 0:R.find(M=>M.is_primary))||(($=_.images)==null?void 0:$[0]);let k="N/A",E=1/0;v&&_.vendor_latitude&&_.vendor_longitude&&(E=GW(v.latitude,v.longitude,_.vendor_latitude,_.vendor_longitude),k=`${E.toFixed(1)} km`);const T=nd(_,_.vendor_delivery_fee);return{id:_.id,name:_.name,vendor:_.vendor_name||"Unknown Vendor",distance:k,distanceValue:E,rating:4.5,price:`${_.price}`,priceValue:parseFloat(_.price),image:(N==null?void 0:N.image_url)||"/placeholder-product.jpg",inStock:_.quantity>0,category:_.category,featured:_.featured,totalSold:_.total_sold||0,deliveryInfo:T,vendorOnline:_.vendor_online!==!1,deliveryRadius:_.delivery_radius||y}}).filter(_=>_.vendorOnline&&(_.distanceValue===1/0||_.distanceValue<=_.deliveryRadius));return b.sort((_,N)=>N.rating-_.rating),b.slice(0,6)},f=x=>{t(`/product/${x}`)},p=async x=>{try{await r(x.id.toString(),1),n({title:"Added to Cart",description:`${x.name} added to your cart`}),t("/cart")}catch(v){console.error("Error adding to cart:",v)}};return o?s.jsxs("section",{className:"px-4 py-3 mb-8 bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h2",{className:"text-xl md:text-2xl font-semibold tracking-tight text-black",children:"Featured Products"})}),s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx($s,{className:"h-8 w-8 animate-spin"})})]}):s.jsxs("section",{className:"px-4 py-3 mb-8 bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold tracking-tight text-black",children:"Featured Products"}),s.jsx(ie,{variant:"ghost",size:"sm",className:"text-sm text-gray-600 hover:text-gray-800",onClick:()=>t("/featured-items"),children:"View All"})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-3 md:grid md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 md:overflow-visible md:pb-0",children:a.map((x,v)=>s.jsxs(oc.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:v*.1,duration:.3},whileHover:{scale:1.02,rotate:.5},className:"relative flex-shrink-0 w-36 md:w-auto rounded-lg bg-white border border-gray-200 hover:border-[#856043] shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-300 overflow-hidden group cursor-pointer",onClick:()=>f(x.id),children:[s.jsx(oc.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:v*.1+.2,duration:.2},className:"absolute top-2 left-2 bg-emerald-600 text-white text-xs px-2 py-0.5 rounded-full font-semibold shadow-sm",children:"Featured"}),s.jsx("div",{className:"w-full h-28 overflow-hidden",children:s.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:y=>{y.target.src="/placeholder-product.jpg"}})}),s.jsxs("div",{className:"p-3 flex flex-col justify-between h-36",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-sm text-gray-800 mb-1 line-clamp-2 leading-tight",children:x.name}),s.jsx("p",{className:"text-xs text-gray-600 mb-1 truncate",children:x.vendor})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"space-y-1 mb-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-sm text-[#856043]",children:x.price}),s.jsxs("span",{className:"text-xs font-medium text-green-600",children:[x.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(Gt,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:x.distance})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${x.deliveryInfo.isFreeDelivery?"bg-green-100 text-green-700":x.deliveryInfo.deliveryFee===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:x.deliveryInfo.isFreeDelivery?"Free":x.deliveryInfo.deliveryFee===null?"TBD":`${x.deliveryInfo.deliveryFee}`})]})]}),s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[Array.from({length:5}).map((y,w)=>s.jsx("span",{className:`text-xs ${w<Math.floor(x.rating)?"text-amber-400":"text-gray-300"}`,children:""},w)),s.jsx("span",{className:"text-xs text-gray-500 ml-1",children:x.rating.toFixed(1)})]}),s.jsx("div",{className:"flex gap-1",children:x.inStock?s.jsxs(s.Fragment,{children:[s.jsx(ie,{variant:"outline",size:"sm",className:"w-7 h-7 p-0 border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white",onClick:async y=>{y.stopPropagation();try{await r(x.id.toString(),1),n({title:"Added to Cart",description:`${x.name} added to your cart`})}catch(w){console.error("Error adding to cart:",w)}},children:s.jsx(nn,{className:"h-3 w-3"})}),s.jsx(ie,{variant:"default",className:"flex-1 text-xs py-1.5 shadow-sm h-7 bg-green-600 hover:bg-green-700 text-white",onClick:y=>{y.stopPropagation(),p(x)},children:"Buy"})]}):s.jsx(ie,{disabled:!0,className:"w-full bg-gray-200 text-gray-500 cursor-not-allowed text-xs py-1.5 shadow-sm h-7",children:"Out of Stock"})})]})]})]},x.id))}),a.length===0&&!o&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No featured products"}),s.jsx("p",{className:"text-muted-foreground",children:"Featured products will appear here when available"})]})]})}const YW=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function XW({onDataLoaded:e}={}){const t=nt();Gn();const{toast:n}=es(),{addToCartWithAuth:r}=uo(),[a,i]=j.useState([]),[o,c]=j.useState(!0),[d,h]=j.useState(dt.getLocation());j.useEffect(()=>{const x=dt.subscribe(h);if(dt.startTracking(),dt.getLocation())m();else{const y=setTimeout(()=>{dt.getLocation()||(console.log(" No location available, fetching products without location filter"),m())},3e3);return()=>{clearTimeout(y),x()}}return x},[]),j.useEffect(()=>{d&&m()},[d]);const m=async()=>{try{c(!0);const x={"ngrok-skip-browser-warning":"true"},v=dt.getLocation(),y=new URLSearchParams({page_size:"40"});v&&(y.append("latitude",v.latitude.toString()),y.append("longitude",v.longitude.toString()));const b=await(await fetch(`${Qe}search/products/?${y}`,{headers:x})).json(),_=await Up(b.results||[]),N=u(_);i(N)}catch(x){console.error("Error fetching latest products:",x)}finally{c(!1),e==null||e()}},u=x=>{const v=dt.getLocation(),y=10;let w=x.map(b=>{var T,R;const _=((T=b.images)==null?void 0:T.find($=>$.is_primary))||((R=b.images)==null?void 0:R[0]);let N="N/A",k=1/0;v&&b.vendor_latitude&&b.vendor_longitude&&(k=YW(v.latitude,v.longitude,b.vendor_latitude,b.vendor_longitude),N=`${k.toFixed(1)} km`);const E=nd(b,b.vendor_delivery_fee);return{id:b.id,name:b.name,vendor:b.vendor_name||"Unknown Vendor",vendor_id:b.vendor_id,distance:N,distanceValue:k,rating:4.5,price:`${b.price}`,priceValue:parseFloat(b.price),image:(_==null?void 0:_.image_url)||"/placeholder-product.jpg",inStock:b.quantity>0,category:b.category,totalSold:b.total_sold||0,deliveryInfo:E,createdAt:b.created_at,vendorOnline:b.vendor_online!==!1,deliveryRadius:b.delivery_radius||y,free_delivery:b.free_delivery,custom_delivery_fee_enabled:b.custom_delivery_fee_enabled,custom_delivery_fee:b.custom_delivery_fee}}).filter(b=>b.vendorOnline&&(b.distanceValue===1/0||b.distanceValue<=b.deliveryRadius));return w.sort((b,_)=>new Date(_.createdAt)-new Date(b.createdAt)),w.slice(0,40)},f=x=>{t(`/product/${x}`)},p=async(x,v)=>{v.stopPropagation();try{await r(x.id.toString(),1),n({title:"Added to Cart",description:`${x.name} added to your cart`})}catch(y){console.error("Error adding to cart:",y)}};return o?s.jsxs("section",{className:"px-4 py-3 mb-8",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h2",{className:"text-lg font-semibold text-black",children:"Latest Products"})}),s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx($s,{className:"h-8 w-8 animate-spin"})})]}):s.jsxs("section",{className:"px-4 py-3 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-black",children:"Latest Products"}),s.jsx(ie,{variant:"ghost",size:"sm",className:"text-sm text-gray-600 hover:text-gray-800",onClick:()=>t("/latest-products"),children:"View All"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 lg:grid-cols-8 gap-2",children:a.map(x=>s.jsxs("div",{className:"bg-white rounded-lg p-2 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>f(x.id),children:[s.jsx("div",{className:"w-full aspect-square overflow-hidden rounded-lg mb-2",children:s.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover",onError:v=>{v.target.src="/placeholder-product.jpg"}})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-xs text-gray-900 line-clamp-2 mb-1",children:x.name}),s.jsx("p",{className:"text-[10px] text-gray-600 mb-1 truncate",children:x.vendor}),s.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[s.jsx(js,{className:"h-2 w-2 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:x.rating})]}),s.jsxs("span",{className:"text-green-600 font-medium",children:[x.totalSold," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[s.jsx(Gt,{className:"h-2 w-2"}),s.jsx("span",{className:"font-medium",children:x.distance})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-xs text-green-600",children:x.price}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yr,{className:"h-2 w-2 text-gray-400"}),s.jsx("span",{className:`text-[10px] px-1 py-0.5 rounded-full ${x.deliveryInfo.isFreeDelivery?"bg-green-100 text-green-700":x.deliveryInfo.deliveryFee===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:x.deliveryInfo.isFreeDelivery?"Free":x.deliveryInfo.deliveryFee===null?"TBD":`${x.deliveryInfo.deliveryFee}`})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ie,{size:"sm",variant:"outline",className:"w-6 h-6 p-0 border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white",disabled:!x.inStock,onClick:v=>p(x,v),children:s.jsx(nn,{className:"h-2 w-2"})}),s.jsx(ie,{size:"sm",className:"flex-1 h-6 text-[10px] bg-green-600 hover:bg-green-700 text-white",disabled:!x.inStock,onClick:v=>{v.stopPropagation(),t("/checkout",{state:{directBuy:!0,product:{id:x.id,name:x.name,price:x.price.replace("",""),quantity:1,vendor_name:x.vendor,vendor_id:x.vendor_id,images:[{image_url:x.image}],free_delivery:x.free_delivery,custom_delivery_fee_enabled:x.custom_delivery_fee_enabled,custom_delivery_fee:x.custom_delivery_fee}}})},children:"Buy"})]})]})]})]},x.id))}),a.length===0&&!o&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No products yet"}),s.jsx("p",{className:"text-gray-600",children:"Latest products will appear here"})]})]})}const JW=e=>[{icon:vb,label:"Home",id:"home",path:"/home"},{icon:Mt,label:"Product",id:"search",path:"/search"},{icon:nn,label:"Cart",id:"cart",path:"/cart",badge:e>0?e:void 0},{icon:XD,label:"Orders",id:"orders",path:"/orders"},{icon:Vr,label:"Profile",id:"profile",path:"/profile"}];function Kn(){const[e,t]=j.useState("home"),n=nt(),r=Zn(),{cart:a}=Gn(),i=JW((a==null?void 0:a.total_items)||0);j.useEffect(()=>{const c=r.pathname,d=i.find(h=>h.path===c);d&&t(d.id)},[r.pathname]);const o=(c,d)=>{t(c),n(d)};return s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-200/50 z-50 shadow-[0_-2px_8px_rgba(0,0,0,0.05)]",children:[s.jsx("div",{className:"flex justify-around items-center h-20 md:h-14 max-w-lg mx-auto py-2 md:py-1",children:i.map(c=>{const d=e===c.id;return s.jsxs("button",{onClick:()=>o(c.id,c.path),className:`relative flex flex-col items-center justify-center p-4 md:p-2 transition-all duration-300 ease-in-out group ${d?"text-black":"text-gray-500 hover:text-black/80"}`,children:[s.jsxs("div",{className:"relative flex items-center justify-center",children:[s.jsx(c.icon,{className:`h-6 w-6 md:h-5 md:w-5 transition-all duration-300 ease-in-out ${d?"scale-110 drop-shadow-[0_0_6px_rgba(0,0,0,0.2)]":"group-hover:scale-105 group-hover:drop-shadow-[0_0_4px_rgba(0,0,0,0.1)]"}`}),c.badge&&s.jsx("span",{className:"absolute -top-2 -right-3 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold animate-bounce",children:c.badge})]}),s.jsx("span",{className:"text-xs font-semibold tracking-wide mt-1.5 font-sans",children:c.label}),d&&s.jsx("div",{className:"absolute bottom-0 w-10 h-1 bg-black rounded-full shadow-[0_0_6px_rgba(0,0,0,0.3)] animate-scale-in"}),s.jsx("div",{className:`absolute inset-0 rounded-full bg-black/5 transition-all duration-300 ${d?"opacity-10 scale-105":"opacity-0 group-hover:opacity-10 group-hover:scale-100"}`})]},c.id)})}),s.jsx("style",{children:`
        .animate-scale-in {
          animation: scale-in 0.3s ease-in-out;
        }
        @keyframes scale-in {
          from {
            transform: scaleX(0);
          }
          to {
            transform: scaleX(1);
          }
        }
        .animate-bounce {
          animation: bounce 1.8s ease-in-out infinite;
        }
        @keyframes bounce {
          0%, 100% {
            transform: translateY(-20%);
            animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
          }
          50% {
            transform: translateY(0);
            animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
          }
        }
      `})]})}function QW(){const e=nt();return s.jsx("footer",{className:"bg-gray-900 text-white py-8 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Download Our App"}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsxs(ie,{variant:"outline",className:"bg-black text-white border-gray-600 hover:bg-gray-800 flex items-center gap-2",onClick:()=>window.open("#","_blank"),children:[s.jsx(NN,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-xs",children:"Download on"}),s.jsx("div",{className:"text-sm font-semibold",children:"Google Play"})]})]}),s.jsxs(ie,{variant:"outline",className:"bg-black text-white border-gray-600 hover:bg-gray-800 flex items-center gap-2",onClick:()=>window.open("#","_blank"),children:[s.jsx(NN,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-xs",children:"Download on"}),s.jsx("div",{className:"text-sm font-semibold",children:"App Store"})]})]})]})]}),s.jsx("div",{className:"flex justify-center mb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:"font-semibold mb-3",children:"Quick Links"}),s.jsx("ul",{className:"space-y-2 text-sm text-gray-400",children:s.jsx("li",{children:s.jsxs("button",{onClick:()=>e("/privacy-policy"),className:"hover:text-white flex items-center gap-2 justify-center cursor-pointer",children:[s.jsx(Wn,{className:"h-3 w-3"}),"Privacy Policy"]})})})]})}),s.jsx("div",{className:"border-t border-gray-800 pt-4 text-center text-sm text-gray-400",children:s.jsx("p",{children:" 2024 Ezeyway. All rights reserved."})})]})})}function Dw(){const e=nt(),[t,n]=j.useState(!1),[r,a]=j.useState([]),[i,o]=j.useState(""),[c,d]=j.useState(!1),[h,m]=j.useState(!1),[u,f]=j.useState(null),p=j.useRef(null),x=()=>{var _;(_=p.current)==null||_.scrollIntoView({behavior:"smooth"})};j.useEffect(()=>{x()},[r]),j.useEffect(()=>{v()},[]),j.useEffect(()=>{t&&h&&y()},[t,h]);const v=async()=>{const _=await Se.isAuthenticated();m(_)},y=async()=>{try{const{response:_,data:N}=await Re("/messaging/conversations/");if(_.ok&&(N!=null&&N.results)){const k=N.results.find(E=>{var T;return(T=E.participants)==null?void 0:T.some(R=>R.user_type==="superadmin")});if(k){f(k.id);const{response:E,data:T}=await Re(`/messaging/conversations/${k.id}/messages/`);E.ok&&(T!=null&&T.results)&&a(T.results.reverse())}}}catch(_){console.error("Failed to load messages:",_)}},w=async()=>{if(i.trim()){if(!h){e("/login?redirect="+encodeURIComponent(window.location.pathname));return}d(!0);try{let _=u;if(_)await Re(`/messaging/conversations/${_}/messages/`,{method:"POST",body:JSON.stringify({message:i.trim()})});else{const{response:N,data:k}=await Re("/messaging/conversations/",{method:"POST",body:JSON.stringify({recipient_type:"superadmin",message:i.trim()})});N.ok&&k&&(_=k.conversation_id,f(_))}a(N=>[...N,{id:Date.now(),message:i.trim(),sender:{user_type:"customer"},created_at:new Date().toISOString()}]),o(""),setTimeout(()=>y(),1e3)}catch(_){console.error("Failed to send message:",_)}finally{d(!1)}}},b=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),w())};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed bottom-24 right-4 z-50",children:s.jsx(ie,{onClick:()=>{if(!h){e("/login?redirect="+encodeURIComponent(window.location.pathname));return}n(!t)},className:"w-10 h-10 rounded-full bg-yellow-500 hover:bg-yellow-600 shadow-lg border-2 border-black",children:t?s.jsx(Ys,{className:"h-4 w-4 text-black"}):s.jsx(_a,{className:"h-4 w-4 text-black"})})}),t&&s.jsxs("div",{className:"fixed bottom-32 right-4 w-80 h-96 bg-white rounded-lg shadow-xl border-2 border-black z-50 flex flex-col",children:[s.jsxs("div",{className:"bg-yellow-500 text-black p-3 rounded-t-lg border-2 border-black border-b-0",children:[s.jsx("h3",{className:"font-semibold",children:"Chat with Support"}),s.jsx("p",{className:"text-xs opacity-75",children:"EzeyWay Customer Service"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[h?r.length===0?s.jsxs("div",{className:"text-center text-gray-500 text-sm mt-8",children:[s.jsx(_a,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"Start a conversation with our support team"})]}):r.map(_=>{var N,k;return s.jsx("div",{className:`flex ${((N=_.sender)==null?void 0:N.user_type)==="customer"?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`max-w-xs px-3 py-2 rounded-lg text-sm border ${((k=_.sender)==null?void 0:k.user_type)==="customer"?"bg-yellow-500 text-black border-black":"bg-gray-100 text-gray-800 border-gray-300"}`,children:_.message})},_.id)}):s.jsxs("div",{className:"text-center text-gray-500 text-sm mt-8",children:[s.jsx(_a,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"mb-4",children:"Sign in to chat with support"}),s.jsx(ie,{size:"sm",className:"bg-yellow-500 hover:bg-yellow-600 text-black border border-black",onClick:()=>e("/login?redirect="+encodeURIComponent(window.location.pathname)),children:"Sign In"})]}),s.jsx("div",{ref:p})]}),h&&s.jsxs("div",{className:"p-3 border-t flex gap-2",children:[s.jsx(je,{value:i,onChange:_=>o(_.target.value),onKeyPress:b,placeholder:"Type your message...",className:"flex-1",disabled:c}),s.jsx(ie,{onClick:w,disabled:!i.trim()||c,size:"sm",className:"bg-yellow-500 hover:bg-yellow-600 text-black border border-black",children:s.jsx(jb,{className:"h-4 w-4"})})]})]})]})}const RS=()=>{const{setHomeDataLoaded:e}=aB(),[t,n]=j.useState(!1),[r,a]=j.useState(!1),[i,o]=j.useState(!1);return j.useEffect(()=>{t&&r&&i&&e(!0)},[t,r,i,e]),s.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[s.jsx(a9,{}),s.jsx(o9,{}),s.jsx(l9,{}),s.jsx(f9,{}),s.jsx(ZW,{onDataLoaded:()=>n(!0)}),s.jsx(KW,{onDataLoaded:()=>a(!0)}),s.jsx(XW,{onDataLoaded:()=>o(!0)}),s.jsx(QW,{}),s.jsx(Dw,{}),s.jsx(Kn,{})]})},Us=e=>{if(!e)return"/placeholder-product.jpg";if(e.includes("ngrok-free.app")){const r=new URL(e);return r.searchParams.set("ngrok-skip-browser-warning","true"),r.toString()}if(e.startsWith("/media/")||e.startsWith("media/")){const r=`${mn.BASE_URL}${e.startsWith("/")?e:`/${e}`}`,a=new URL(r);return a.searchParams.set("ngrok-skip-browser-warning","true"),a.toString()}if(e.startsWith("http"))return e;const t=`${mn.BASE_URL}/media/${e}`,n=new URL(t);return n.searchParams.set("ngrok-skip-browser-warning","true"),n.toString()};function eZ(){var I,V,H;const e=nt(),{id:t}=Tp();Gn();const{toast:n}=es(),{addToCartWithAuth:r,buyNowWithAuth:a}=uo(),[i,o]=j.useState(1),[c,d]=j.useState(!1),[h,m]=j.useState(!1),[u,f]=j.useState(null),[p,x]=j.useState(!0),[v,y]=j.useState(""),[w,b]=j.useState(0),[_,N]=j.useState([]);j.useEffect(()=>(t&&C(),dt.subscribe(E)),[t]);const[k,E]=j.useState(dt.getLocation());j.useEffect(()=>{u&&T()},[u]);const T=async()=>{var U;if(u)try{const q=await fetch(`${Qe}search/products/?page_size=50`,{headers:{"ngrok-skip-browser-warning":"true"}});if(q.ok){const B=((U=(await q.json()).results)==null?void 0:U.filter(X=>X.id!==u.id&&X.category===u.category&&X.quantity>0))||[],W=await Up(B),oe=R(W);N(oe.slice(0,8))}}catch(q){console.error("Error fetching related products:",q)}},R=U=>{const q=dt.getLocation(),K=10;return U.map(B=>{var re,ue;const W=((re=B.images)==null?void 0:re.find(me=>me.is_primary))||((ue=B.images)==null?void 0:ue[0]);let oe="N/A",X=1/0;return q&&B.vendor_latitude&&B.vendor_longitude&&(X=$(q.latitude,q.longitude,B.vendor_latitude,B.vendor_longitude),oe=`${X.toFixed(1)} km`),{id:B.id,name:B.name,vendor_name:B.vendor_name,price:`${B.price}`,image:(W==null?void 0:W.image_url)||"/placeholder-product.jpg",inStock:B.quantity>0,totalSold:B.total_sold||0,distance:oe,distanceValue:X,vendorOnline:B.vendor_online!==!1,deliveryRadius:B.delivery_radius||K}}).filter(B=>B.vendorOnline&&(B.distanceValue===1/0||B.distanceValue<=B.deliveryRadius)).sort((B,W)=>B.distanceValue-W.distanceValue)},$=(U,q,K,B)=>{const oe=(K-U)*Math.PI/180,X=(B-q)*Math.PI/180,re=Math.sin(oe/2)*Math.sin(oe/2)+Math.cos(U*Math.PI/180)*Math.cos(K*Math.PI/180)*Math.sin(X/2)*Math.sin(X/2);return 6371*(2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re)))},M=U=>{e(`/product/${U}`)},A=async(U,q)=>{q.stopPropagation();try{await r(U.toString(),1)}catch(K){console.error("Error adding to cart:",K)}},C=async()=>{var U,q;try{x(!0);const K=await fetch(`${Qe}search/products/?page_size=1000`,{headers:{"ngrok-skip-browser-warning":"true"}});if(!K.ok)throw new Error("Failed to fetch products");const W=(U=(await K.json()).results)==null?void 0:U.find(X=>X.id===parseInt(t));if(!W)throw new Error("Product not found");f(W);const oe=await Se.getToken();if(oe)try{const X=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${oe}`,"ngrok-skip-browser-warning":"true"}});if(X.ok){const ue=(q=(await X.json()).results)==null?void 0:q.some(me=>me.product.id===W.id);d(ue||!1)}}catch(X){console.log("Could not fetch favorites:",X)}}catch(K){console.error("Error fetching product:",K),y("Failed to load product details")}finally{x(!1)}},z=U=>{o(Math.max(1,i+U))},P=async()=>{if(u){m(!0);try{await r(u.id.toString(),i),n({title:"Added to Cart",description:`${u.name} added to your cart`})}catch(U){console.error("Error adding to cart:",U),n({title:"Error",description:"Failed to add product to cart",variant:"destructive"})}finally{m(!1)}}},O=async()=>{if(!u)return;console.log("ProductDetail - Original product data:",u);const U={id:u.id,name:u.name,price:u.price,quantity:i,vendor_name:u.vendor_name,vendor_id:u.vendor_id,images:u.images,free_delivery:u.free_delivery,custom_delivery_fee_enabled:u.custom_delivery_fee_enabled,custom_delivery_fee:u.custom_delivery_fee};console.log("ProductDetail - Prepared product data for buy now:",U),await a(U)},Y=async()=>{if(!u)return;const U=await Se.getToken();if(!U){localStorage.setItem("pendingAction",JSON.stringify({type:"toggleFavorite",data:{productId:u.id},path:"/wishlist",timestamp:Date.now()})),e("/login");return}try{const q=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${U}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:u.id})});if(!q.ok)throw new Error("Failed to toggle favorite");const K=await q.json();d(K.is_favorite),n({title:K.is_favorite?"Added to Favorites":"Removed from Favorites",description:K.message}),K.is_favorite&&e("/wishlist")}catch(q){console.error("Error toggling favorite:",q),n({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},J=async()=>{if(!u)return;const U={title:u.name,text:`Check out ${u.name} - ${u.price}`,url:window.location.href};try{navigator.share?await navigator.share(U):(await navigator.clipboard.writeText(window.location.href),n({title:"Link Copied",description:"Product link copied to clipboard"}))}catch(q){console.error("Error sharing:",q),n({title:"Error",description:"Failed to share product",variant:"destructive"})}};if(p)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx($s,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading product details..."})]})});if(v||!u)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:v||"Product not found"}),s.jsx(ie,{onClick:()=>e(-1),children:"Go Back"})]})});const G=((I=u.images)==null?void 0:I.find(U=>U.is_primary))||((V=u.images)==null?void 0:V[0]),F=((H=u.images)==null?void 0:H[w])||G;return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[s.jsx(ie,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full hover:bg-gray-100",children:s.jsx(Yt,{className:"h-5 w-5 text-gray-800"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ie,{variant:"ghost",size:"icon",onClick:Y,className:"rounded-full hover:bg-gray-100",children:s.jsx(Nr,{className:`h-5 w-5 ${c?"fill-red-500 text-red-500":"text-gray-800"}`})}),s.jsx(ie,{variant:"ghost",size:"icon",onClick:J,className:"rounded-full hover:bg-gray-100",children:s.jsx(a6,{className:"h-5 w-5 text-gray-800"})})]})]})}),s.jsxs("div",{className:"relative bg-white p-4",children:[s.jsxs("div",{className:"md:hidden",children:[s.jsx("div",{className:"aspect-square max-w-md mx-auto mb-4 border-t-2 border-b-2 border-gray-100",children:s.jsx("img",{src:Us(F==null?void 0:F.image_url),alt:u.name,className:"w-full h-full object-cover",onError:U=>{U.target.src="/placeholder-product.jpg"}})}),u.images&&u.images.length>1&&s.jsx("div",{className:"border-t border-b border-gray-200 py-3",children:s.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-md mx-auto",children:u.images.slice(0,4).map((U,q)=>s.jsx("button",{onClick:()=>b(q),className:`aspect-square overflow-hidden border-2 transition-all duration-200 ${w===q?"border-blue-500 shadow-md scale-105":"border-gray-300 hover:border-gray-400"}`,children:s.jsx("img",{src:Us(U.image_url),alt:`${u.name} ${q+1}`,className:"w-full h-full object-cover",onError:K=>{K.target.src="/placeholder-product.jpg"}})},U.id))})})]}),s.jsxs("div",{className:"hidden md:flex max-w-4xl mx-auto gap-6",children:[u.images&&u.images.length>1&&s.jsx("div",{className:"flex flex-col gap-3 w-20",children:u.images.slice(0,6).map((U,q)=>s.jsx("button",{onClick:()=>b(q),className:`aspect-square overflow-hidden border-2 transition-all duration-200 ${w===q?"border-blue-500 shadow-md":"border-gray-300 hover:border-gray-400"}`,children:s.jsx("img",{src:Us(U.image_url),alt:`${u.name} ${q+1}`,className:"w-full h-full object-cover",onError:K=>{K.target.src="/placeholder-product.jpg"}})},U.id))}),s.jsx("div",{className:"flex-1 aspect-square max-w-lg",children:s.jsx("img",{src:Us(F==null?void 0:F.image_url),alt:u.name,className:"w-full h-full object-cover border border-gray-200",onError:U=>{U.target.src="/placeholder-product.jpg"}})})]})]}),s.jsx("div",{className:"bg-white px-4 py-6 space-y-4 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4",children:u.name}),s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsxs("span",{className:"text-3xl md:text-4xl font-bold text-green-600",children:["",u.price]})})}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Fe,{variant:"secondary",className:"bg-blue-100 text-blue-800 capitalize text-sm px-3 py-1",children:u.category}),u.quantity>0?s.jsxs(Fe,{variant:"secondary",className:"bg-green-100 text-green-800 text-sm px-3 py-1",children:["In Stock (",u.quantity," available)"]}):s.jsx(Fe,{variant:"destructive",className:"text-sm px-3 py-1",children:"Out of Stock"}),(()=>{const U=nd(u,u.vendor_delivery_fee);return s.jsxs(Fe,{variant:"secondary",className:`flex items-center gap-1 text-sm px-3 py-1 ${U.isFreeDelivery?"bg-green-100 text-green-800":U.deliveryFee===null?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:[s.jsx(yr,{className:"h-4 w-4"}),U.displayText]})})(),s.jsxs(Fe,{variant:"secondary",className:"bg-gray-100 text-gray-800 text-sm px-3 py-1",children:[u.total_sold||0," sold"]})]})]})}),s.jsx("div",{className:"bg-white px-4 py-6 space-y-4 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-3",children:"Product Description"}),u.short_description&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Quick Summary"}),s.jsx("p",{className:"text-blue-800 text-sm leading-relaxed",children:u.short_description})]}),s.jsx("div",{className:"text-gray-700 leading-relaxed prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:u.description}})]})}),u.dynamic_fields&&Object.keys(u.dynamic_fields).length>0&&s.jsx("div",{className:"bg-white px-4 py-6 space-y-3 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-3",children:"Product Details"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(u.dynamic_fields).map(([U,q])=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-1",children:U.replace("_"," ")}),s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Array.isArray(q)?q.join(", "):typeof q=="boolean"?q?"Yes":"No":String(q)})]},U))})]})}),u.tags&&u.tags.length>0&&s.jsx("div",{className:"bg-white px-4 py-6 space-y-3 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-3",children:"Product Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((U,q)=>s.jsxs(Fe,{variant:"outline",className:"text-sm border-gray-300 text-gray-700 px-3 py-1 hover:bg-gray-50",children:["#",U]},q))})]})}),s.jsx("div",{className:"mx-4 my-4 bg-white shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e(`/vendor/${u.vendor_id}`),children:s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center text-3xl rounded-lg",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:u.vendor_name}),s.jsx(Wn,{className:"h-5 w-5 text-green-600"}),s.jsx(Fe,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs",children:"Active"})]}),s.jsx("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("span",{children:["Category: ",u.category]})})})]})]})})}),_.length>0&&s.jsx("div",{className:"bg-white px-4 py-6 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("h3",{className:"font-semibold text-lg text-gray-900 mb-4",children:["Similar Products in ",u.category]}),s.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:_.map(U=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>M(U.id),children:[s.jsx("div",{className:"aspect-square overflow-hidden rounded-t-lg",children:s.jsx("img",{src:Us(U.image),alt:U.name,className:"w-full h-full object-cover",onError:q=>{q.currentTarget.src="/placeholder-product.jpg"}})}),s.jsxs("div",{className:"p-2",children:[s.jsx("h4",{className:"font-medium text-xs text-gray-900 line-clamp-2 mb-1",children:U.name}),s.jsx("p",{className:"text-[10px] text-gray-600 mb-1 truncate",children:U.vendor_name}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-bold text-green-600 text-xs",children:U.price}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[U.totalSold," sold"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-[10px] text-blue-600 flex items-center gap-1",children:[s.jsx(Gt,{className:"h-2 w-2"}),U.distance]}),s.jsxs(ie,{size:"sm",variant:"outline",className:"h-5 text-[10px] px-1",disabled:!U.inStock,onClick:q=>A(U.id,q),children:[s.jsx(nn,{className:"h-2 w-2 mr-1"}),"Add"]})]})]})]},U.id))})]})}),s.jsx("div",{className:"bg-white px-4 py-6 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:"Select Quantity"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(ie,{variant:"outline",size:"icon",onClick:()=>z(-1),className:"h-10 w-10 rounded-full border-2",children:s.jsx(n6,{className:"h-5 w-5"})}),s.jsx("span",{className:"font-bold text-xl w-12 text-center bg-gray-50 py-2 rounded-lg",children:i}),s.jsx(ie,{variant:"outline",size:"icon",onClick:()=>z(1),className:"h-10 w-10 rounded-full border-2",children:s.jsx(Es,{className:"h-5 w-5"})})]})]})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[s.jsx(ie,{variant:"outline",className:"flex-1 h-12 rounded-lg text-gray-800 font-semibold",onClick:P,disabled:h||u.quantity===0,children:h?"Adding...":"Add to Cart"}),s.jsx(ie,{className:"flex-1 h-12 rounded-lg bg-green-600 hover:bg-green-700 text-white font-semibold",onClick:O,disabled:h||u.quantity===0,children:h?"Processing...":"Buy Now"})]})})]})}const Ee=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ye("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ee.displayName="Card";const St=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ye("flex flex-col space-y-1.5 p-6",e),...t}));St.displayName="CardHeader";const Pt=j.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:Ye("text-2xl font-semibold leading-none tracking-tight",e),...t}));Pt.displayName="CardTitle";const tZ=j.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:Ye("text-sm text-muted-foreground",e),...t}));tZ.displayName="CardDescription";const Oe=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ye("p-6 pt-0",e),...t}));Oe.displayName="CardContent";const sZ=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ye("flex items-center p-6 pt-0",e),...t}));sZ.displayName="CardFooter";var qp="Tabs",[nZ,Ere]=gn(qp,[Qc]),aR=Qc(),[rZ,Fw]=nZ(qp),iR=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:c,activationMode:d="automatic",...h}=e,m=Jc(c),[u,f]=Kr({prop:r,onChange:a,defaultProp:i??"",caller:qp});return s.jsx(rZ,{scope:n,baseId:Zr(),value:u,onValueChange:f,orientation:o,dir:m,activationMode:d,children:s.jsx(st.div,{dir:m,"data-orientation":o,...h,ref:t})})});iR.displayName=qp;var oR="TabsList",lR=j.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=Fw(oR,n),o=aR(n);return s.jsx(Zb,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:s.jsx(st.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});lR.displayName=oR;var cR="TabsTrigger",dR=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=Fw(cR,n),c=aR(n),d=fR(o.baseId,r),h=mR(o.baseId,r),m=r===o.value;return s.jsx(Gb,{asChild:!0,...c,focusable:!a,active:m,children:s.jsx(st.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...i,ref:t,onMouseDown:$e(e.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?o.onValueChange(r):u.preventDefault()}),onKeyDown:$e(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(r)}),onFocus:$e(e.onFocus,()=>{const u=o.activationMode!=="manual";!m&&!a&&u&&o.onValueChange(r)})})})});dR.displayName=cR;var uR="TabsContent",hR=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,c=Fw(uR,n),d=fR(c.baseId,r),h=mR(c.baseId,r),m=r===c.value,u=j.useRef(m);return j.useEffect(()=>{const f=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(f)},[]),s.jsx(an,{present:a||m,children:({present:f})=>s.jsx(st.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!f,id:h,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:f&&i})})});hR.displayName=uR;function fR(e,t){return`${e}-trigger-${t}`}function mR(e,t){return`${e}-content-${t}`}var aZ=iR,pR=lR,gR=dR,xR=hR;const Ia=aZ,Qr=j.forwardRef(({className:e,...t},n)=>s.jsx(pR,{ref:n,className:Ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Qr.displayName=pR.displayName;const Ot=j.forwardRef(({className:e,...t},n)=>s.jsx(gR,{ref:n,className:Ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ot.displayName=gR.displayName;const xt=j.forwardRef(({className:e,...t},n)=>s.jsx(xR,{ref:n,className:Ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));xt.displayName=xR.displayName;const iZ=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function oZ(){var N;const e=nt(),{vendorId:t}=Tp(),[n,r]=j.useState(!1),[a,i]=j.useState(null),[o,c]=j.useState([]),[d,h]=j.useState(!0),[m,u]=j.useState(null),[f,p]=j.useState(dt.getLocation()),[x,v]=j.useState("N/A"),{toast:y}=es(),{addToCart:w}=Gn();j.useEffect(()=>{const k=dt.subscribe(p);return dt.startTracking(),k},[]),j.useEffect(()=>{t&&b()},[t]);const b=async()=>{var k;try{h(!0),u(null);const{response:E,data:T}=await Re(`vendor-profiles/${t}/`);if(!E.ok)throw E.status===404?new Error("Vendor not found"):E.status===500?new Error("Server error - vendor profile unavailable"):new Error("Failed to fetch vendor profile");if(!T)throw new Error("No vendor data received");i(T);const R=dt.getLocation();if(R&&T.latitude&&T.longitude){const $=iZ(R.latitude,R.longitude,T.latitude,T.longitude);v(`${$.toFixed(1)} km`)}try{const{response:$,data:M}=await Re(`search/products/?search=${encodeURIComponent(T.business_name)}`);if($.ok&&M){const A=((k=M.results)==null?void 0:k.filter(C=>C.vendor_name===T.business_name))||[];c(A)}}catch($){console.error("Error fetching products:",$),c([])}}catch(E){console.error("Error fetching vendor profile:",E),u(E.message),y({title:"Error",description:E.message||"Failed to load vendor profile",variant:"destructive"})}finally{h(!1)}},_=k=>{const E=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],T=[];for(const R of E){const $=`${R}_open`,M=`${R}_close`,A=`${R}_closed`;!k[A]&&k[$]&&k[M]&&T.push(`${R.charAt(0).toUpperCase()+R.slice(1)}: ${k[$]} - ${k[M]}`)}return T.length>0?T.join(", "):"Hours not specified"};return d?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx($s,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading vendor profile..."})]})}):m||!a?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold",children:"Vendor Not Found"}),s.jsx("div",{className:"w-10"})]})}),s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Nn,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vendor Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"The vendor you're looking for doesn't exist or is not available."}),s.jsx(ie,{onClick:()=>e("/search"),children:"Browse Vendors"})]})})]}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold truncate",children:a.business_name}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>r(!n),className:"p-2",children:s.jsx(Nr,{className:`h-5 w-5 ${n?"fill-red-500 text-red-500":""}`})})]})}),s.jsx("div",{className:"p-4 bg-gradient-subtle",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:(N=a.user_info)!=null&&N.profile_picture?s.jsx("img",{src:Us(a.user_info.profile_picture),alt:a.business_name,className:"w-full h-full object-cover",onError:k=>{k.target.src="/placeholder-vendor.jpg"}}):s.jsx(Nn,{className:"h-8 w-8 text-gray-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h2",{className:"text-lg font-bold",children:a.business_name}),a.is_approved&&s.jsx(Wn,{className:"h-5 w-5 text-green-500"}),s.jsx(Fe,{variant:a.is_active?"default":"destructive",className:"text-xs",children:a.is_active?"Open":"Closed"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(js,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"font-medium",children:"4.5"}),s.jsx("span",{children:"(Reviews coming soon)"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gt,{className:"h-4 w-4"}),s.jsx("span",{children:x})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.categories&&a.categories.map((k,E)=>s.jsx(Fe,{variant:"secondary",className:"text-xs",children:k},E))})]})]})}),s.jsx("div",{className:"px-4 py-3 bg-card border-b border-border/50",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx(Wr,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery"}),s.jsx("p",{className:"text-sm font-medium",children:a.estimated_delivery_time||"30-45 mins"})]}),s.jsxs("div",{children:[s.jsx(Nn,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Min Order"}),s.jsxs("p",{className:"text-sm font-medium",children:["",a.min_order_amount||"0"]})]}),s.jsxs("div",{children:[s.jsx(Gt,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Type"}),s.jsx("p",{className:"text-sm font-medium capitalize",children:a.business_type})]})]})}),s.jsxs("div",{className:"px-4 py-3 flex gap-3",children:[s.jsxs(ie,{variant:"brand",className:"flex-1 h-10",onClick:()=>e(`/messages?vendor=${a.user}`),children:[s.jsx(_a,{className:"h-4 w-4 mr-2"}),"Message"]}),s.jsxs(ie,{variant:"outline",className:"flex-1 h-10",onClick:()=>{if(a.latitude&&a.longitude&&f){const k=`https://www.google.com/maps/dir/${f.latitude},${f.longitude}/${a.latitude},${a.longitude}`;window.open(k,"_blank")}else if(a.latitude&&a.longitude){const k=`https://www.google.com/maps/place/${a.latitude},${a.longitude}`;window.open(k,"_blank")}},children:[s.jsx(Gt,{className:"h-4 w-4 mr-2"}),"View in Map"]})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Ia,{defaultValue:"products",className:"w-full",children:[s.jsxs(Qr,{className:"grid w-full grid-cols-3 mx-4",children:[s.jsx(Ot,{value:"products",children:"Products"}),s.jsx(Ot,{value:"about",children:"About"}),s.jsx(Ot,{value:"reviews",children:"Reviews"})]}),s.jsx(xt,{value:"products",className:"p-4 space-y-3",children:o.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.map(k=>{var T,R;const E=((T=k.images)==null?void 0:T.find($=>$.is_primary))||((R=k.images)==null?void 0:R[0]);return s.jsx(Ee,{className:"p-3 cursor-pointer hover:shadow-md transition-smooth",onClick:()=>e(`/product/${k.id}`),children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"aspect-square mb-2 bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:Us(E==null?void 0:E.image_url),alt:k.name,className:"w-full h-full object-cover",onError:$=>{$.target.src="/placeholder-product.jpg"}})}),s.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:k.name}),s.jsxs("p",{className:"font-semibold text-primary text-sm mb-2",children:["",k.price]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ie,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",disabled:k.quantity===0,onClick:$=>{$.stopPropagation(),w(k.id,1)},children:s.jsx(nn,{className:"h-3 w-3"})}),s.jsxs(ie,{size:"sm",className:"flex-1 h-7 text-xs bg-green-600 hover:bg-green-700",disabled:k.quantity===0,onClick:$=>{$.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:k.id,name:k.name,price:k.price,quantity:1,vendor_name:k.vendor_name,images:k.images}}})},children:[s.jsx(Es,{className:"h-3 w-3"}),"Buy"]})]})]})},k.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Nn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold mb-2",children:"No Products Available"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"This vendor hasn't added any products yet."})]})}),s.jsxs(xt,{value:"about",className:"p-4 space-y-4",children:[a.description&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),s.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:a.description})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Business Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nn,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Owner:"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:a.owner_name})]}),a.business_email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_a,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Email:"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:a.business_email})]}),a.business_phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_a,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Phone:"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:a.business_phone})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Location"}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Gt,{className:"h-4 w-4 text-primary mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:a.business_address}),a.location_address&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.location_address}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.city,", ",a.state," - ",a.pincode]})]})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Operating Hours"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:_(a)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Services"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.home_delivery&&s.jsx(Fe,{variant:"secondary",children:"Home Delivery"}),a.pickup_service&&s.jsx(Fe,{variant:"secondary",children:"Pickup Service"}),a.online_ordering&&s.jsx(Fe,{variant:"secondary",children:"Online Ordering"}),a.bulk_orders&&s.jsx(Fe,{variant:"secondary",children:"Bulk Orders"}),a.subscription_service&&s.jsx(Fe,{variant:"secondary",children:"Subscription"}),a.loyalty_program&&s.jsx(Fe,{variant:"secondary",children:"Loyalty Program"})]})]})]}),s.jsx(xt,{value:"reviews",className:"p-4",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(js,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"Reviews coming soon"})]})})]})})]})}function lZ(){const e=nt();return j.useEffect(()=>{const t=setTimeout(()=>{e("/home")},2e3);return()=>clearTimeout(t)},[e]),s.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:li,alt:"ezeyway",className:"w-20 h-20 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Page Not Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Redirecting to home..."}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})})}const cZ=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3},LS=()=>{const[e,t]=j.useState([]),[n,r]=j.useState(!0),{addToCart:a}=Gn(),i=nt();j.useEffect(()=>{o()},[]);const o=async()=>{try{const c={"ngrok-skip-browser-warning":"true"},d=dt.getLocation(),h=new URLSearchParams({page_size:"6"});d&&(h.append("latitude",d.latitude.toString()),h.append("longitude",d.longitude.toString()));const f=((await(await fetch(`${Qe}search/products/?${h}`,{headers:c})).json()).results||[]).map(p=>{var b,_;const x=((b=p.images)==null?void 0:b.find(N=>N.is_primary))||((_=p.images)==null?void 0:_[0]),v=10;let y="N/A",w=1/0;return d&&p.vendor_latitude&&p.vendor_longitude&&(w=cZ(d.latitude,d.longitude,p.vendor_latitude,p.vendor_longitude),y=`${w.toFixed(1)} km`),{id:p.id,name:p.name,vendor:p.vendor_name||"Unknown Vendor",price:p.price,image:(x==null?void 0:x.image_url)||"/placeholder-product.jpg",distance:y,distanceValue:w,inStock:p.quantity>0,vendorOnline:p.vendor_online!==!1,deliveryRadius:p.delivery_radius||v}}).filter(p=>p.vendorOnline&&(p.distanceValue===1/0||p.distanceValue<=p.deliveryRadius));t(f.slice(0,6))}catch(c){console.error("Failed to fetch products:",c)}finally{r(!1)}};return n?s.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 md:grid-cols-3 md:gap-3",children:[...Array(6)].map((c,d)=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden animate-pulse",children:[s.jsx("div",{className:"h-24 bg-gray-200"}),s.jsxs("div",{className:"p-2 space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded"}),s.jsx("div",{className:"h-2 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},d))}):s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3 px-2",children:"Products Near You"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 md:grid-cols-3 md:gap-3",children:e.map(c=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:border-[#856043]/30 overflow-hidden shadow-sm",children:[s.jsx("div",{className:"relative h-24 overflow-hidden bg-gray-100 cursor-pointer",onClick:()=>i(`/product/${c.id}`),children:s.jsx("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:d=>{d.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),s.jsxs("div",{className:"p-2 space-y-1",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2 leading-tight",children:c.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:c.vendor}),s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500",children:[s.jsx(Gt,{className:"h-2 w-2"}),s.jsx("span",{children:c.distance})]}),s.jsxs("p",{className:"text-xs font-bold text-[#856043]",children:["",c.price]}),s.jsxs(ie,{variant:"outline",size:"sm",className:"w-full border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white rounded-md text-[10px] py-1",disabled:!c.inStock,onClick:()=>a(c.id,1),children:[s.jsx(nn,{className:"w-2 h-2 mr-1"}),"Add to Cart"]})]})]},c.id))})]})};function dZ(){const{toast:e}=es(),{cart:t,loading:n,updateCartItem:r,removeFromCart:a,fetchCart:i}=Gn();j.useState("");const[o,c]=j.useState(0),[d,h]=j.useState([]),m=nt();j.useEffect(()=>{i()},[]);const u=[];j.useEffect(()=>{t!=null&&t.items&&h([])},[t]);const f=(t==null?void 0:t.items)||[],p=f.filter(A=>d.includes(A.id)),x=d.length===f.length&&f.length>0,v=A=>{h(A?f.map(C=>C.id):[])},y=A=>{h(C=>C.includes(A)?C.filter(z=>z!==A):[...C,A])},w=async(A,C)=>{const z=f.find(P=>P.id===A);if(z){const P=z.quantity+C;P>0&&await r(A,P)}},b=async A=>{await a(A)},_=async()=>{if(d.length!==0){for(const A of d)await a(A);h([])}},N=A=>{b(A.id),e({title:"Feature Coming Soon",description:"Save for later feature will be available soon"})},k=A=>{e({title:"Feature Coming Soon",description:"Move to cart feature will be available soon"})},T=p.reduce((A,C)=>A+parseFloat(C.total_price.toString()),0),R=T*.05,$=T*o,M=T+R-$;return n?s.jsx("div",{className:"min-h-screen bg-gray-50 font-sans flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(nn,{className:"mx-auto h-10 w-10 text-[#856043] mb-2 animate-pulse"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading cart..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-sm border-b py-2 px-3",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-2",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(nn,{className:"w-4 h-4 mr-1 text-[#856043]"}),"(",f.length,")"]}),s.jsx(ie,{variant:"outline",className:"border-[#856043] text-[#856043] hover:bg-[#856043]/10 hover:text-[#856043] rounded-md text-xs font-medium py-1 px-2",onClick:()=>m("/search"),children:"Continue Shopping"})]})}),s.jsx("main",{className:"max-w-7xl mx-auto px-3 py-4 pb-52 overflow-y-auto",style:{height:"calc(100vh - 120px)"},children:f.length===0?s.jsxs("div",{children:[s.jsxs("div",{className:"text-center py-6",children:[s.jsx(nn,{className:"mx-auto h-10 w-10 text-[#856043] mb-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Your Cart is Empty"}),s.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Discover products near you"})]}),s.jsx(LS,{})]}):s.jsxs("div",{className:"md:flex md:gap-4 space-y-2 md:space-y-0",children:[s.jsxs("div",{className:"md:w-1/2 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(bm,{id:"select-all",checked:x,onCheckedChange:v,className:"data-[state=checked]:bg-[#856043] data-[state=checked]:border-[#856043]"}),s.jsxs("label",{htmlFor:"select-all",className:"text-sm font-medium text-gray-700 cursor-pointer",children:["Select all (",f.length,")"]})]}),s.jsxs(ie,{variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-xs px-3 py-1 rounded-md",onClick:_,disabled:d.length===0,children:[s.jsx(Yi,{className:"w-3 h-3 mr-1"}),"Delete (",d.length,")"]})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(z1,{children:f.map((A,C)=>{var z,P;return s.jsxs(oc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:C*.1},className:"bg-white p-3 flex items-center gap-3 rounded-lg border border-gray-200 shadow-sm hover:bg-gray-50 transition-colors",children:[s.jsx(bm,{checked:d.includes(A.id),onCheckedChange:()=>y(A.id),className:"data-[state=checked]:bg-[#856043] data-[state=checked]:border-[#856043] flex-shrink-0"}),s.jsx("div",{className:"w-12 h-12 flex-shrink-0 overflow-hidden rounded",children:s.jsx("img",{src:((P=(z=A.product.images)==null?void 0:z[0])==null?void 0:P.image_url)||"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200",alt:A.product.name,className:"w-full h-full object-cover",onError:O=>{O.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-xs font-medium text-gray-900 truncate",children:A.product.name}),s.jsxs("p",{className:"text-[10px] text-gray-500 truncate",children:["Sold by ",A.product.vendor_name]}),s.jsx("div",{className:"flex items-center gap-1 mt-1",children:s.jsxs("p",{className:"text-xs font-bold text-[#856043]",children:["",A.product.price]})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ie,{variant:"outline",size:"sm",className:"h-5 w-5 p-0 text-gray-600 border-gray-300 hover:border-[#856043] hover:text-[#856043]",onClick:()=>w(A.id,-1),children:"-"}),s.jsx("span",{className:"text-xs min-w-[1rem] text-center",children:A.quantity}),s.jsx(ie,{variant:"outline",size:"sm",className:"h-5 w-5 p-0 text-gray-600 border-gray-300 hover:border-[#856043] hover:text-[#856043]",onClick:()=>w(A.id,1),children:"+"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ie,{variant:"ghost",size:"sm",className:"p-1 text-[#856043] hover:text-[#856043]/90 hover:bg-[#856043]/5",onClick:()=>N(A),children:s.jsx(Nr,{className:"w-3 h-3"})}),s.jsx(ie,{variant:"ghost",size:"sm",className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>b(A.id),children:s.jsx(Yi,{className:"w-3 h-3"})})]})]},A.id)})})}),u.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2 px-2",children:"Saved for Later"}),s.jsx(z1,{children:u.map((A,C)=>s.jsxs(oc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:C*.1},className:"bg-white p-2 flex items-center gap-2 border-b border-gray-300 hover:bg-gray-50",children:[s.jsx("div",{className:"w-12 h-12 flex-shrink-0 overflow-hidden rounded",children:s.jsx("img",{src:A.image,alt:A.name,className:"w-full h-full object-cover",onError:z=>{z.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-xs font-medium text-gray-900 truncate",children:A.name}),s.jsxs("p",{className:"text-[10px] text-gray-500 truncate",children:["Sold by ",A.vendor]}),s.jsx("p",{className:"text-xs font-bold text-[#856043] mt-1",children:A.price})]}),s.jsx(ie,{variant:"outline",size:"sm",className:"border-[#856043] text-[#856043] hover:bg-[#856043]/10 text-[10px] px-2 py-1",onClick:()=>k(),children:"Move to Cart"})]},A.id))})]})]}),s.jsx("div",{className:"md:w-1/2",children:s.jsx(LS,{})})]})}),f.length>0&&s.jsx(oc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"fixed bottom-20 left-0 right-0 bg-white border-t border-gray-300 z-40",children:s.jsx("div",{className:"max-w-7xl mx-auto px-3",children:s.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"30vh"},children:s.jsx("div",{className:"py-2",children:s.jsxs("div",{className:"md:flex md:items-center md:justify-between md:gap-6",children:[s.jsxs("div",{className:"md:flex-1",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-xs mb-4 md:mb-0",children:[s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsxs("span",{children:["Subtotal (",p.length," items)"]}),s.jsxs("span",{className:"font-medium",children:["",T.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Taxes (5%)"}),s.jsxs("span",{className:"font-medium",children:["",R.toFixed(2)]})]}),s.jsx("hr",{className:"border-gray-300 my-2"}),s.jsxs("div",{className:"flex justify-between font-bold text-sm text-gray-900",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["",M.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-600 mt-2",children:[s.jsx(yr,{className:"w-3 h-3"}),s.jsx("span",{className:"text-xs font-semibold",children:"Estimated delivery: 50-60"})]})]})]}),s.jsx(ie,{size:"lg",className:"w-full md:w-auto md:px-8 rounded-md bg-[#856043] text-white hover:bg-[#856043]/90 py-3 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed mb-2 md:mb-0",disabled:p.length===0,onClick:()=>m("/checkout",{state:{selectedItems:p}}),children:"Proceed to Checkout"})]})})})})}),s.jsx(Kn,{})]})}const Oy=({hasMore:e,isLoading:t,onLoadMore:n,threshold:r=200})=>{const a=j.useRef(null),i=j.useCallback(()=>{if(!e||t)return;const{scrollTop:o,scrollHeight:c,clientHeight:d}=document.documentElement;o+d>=c-r&&n()},[e,t,n,r]);return j.useEffect(()=>{const o=new IntersectionObserver(c=>{const[d]=c;d.isIntersecting&&e&&!t&&n()},{threshold:.1,rootMargin:`${r}px`});return a.current&&o.observe(a.current),window.addEventListener("scroll",i,{passive:!0}),()=>{o.disconnect(),window.removeEventListener("scroll",i)}},[e,t,n,i,r]),{sentinelRef:a}},Co=class Co{constructor(){us(this,"metrics",new Map)}static getInstance(){return Co.instance||(Co.instance=new Co),Co.instance}startTimer(t){this.metrics.set(t,performance.now())}endTimer(t){const n=this.metrics.get(t);if(!n)return console.warn(`Timer '${t}' was not started`),0;const r=performance.now()-n;return console.log(` ${t}: ${r.toFixed(2)}ms`),this.metrics.delete(t),r}measureAsync(t,n){return this.startTimer(t),n().finally(()=>{this.endTimer(t)})}measureSync(t,n){this.startTimer(t);try{return n()}finally{this.endTimer(t)}}logMemoryUsage(){if("memory"in performance){const t=performance.memory;console.log(" Memory Usage:",{used:`${(t.usedJSHeapSize/1024/1024).toFixed(2)} MB`,total:`${(t.totalJSHeapSize/1024/1024).toFixed(2)} MB`,limit:`${(t.jsHeapSizeLimit/1024/1024).toFixed(2)} MB`})}}logRenderMetrics(){if("getEntriesByType"in performance){performance.getEntriesByType("paint").forEach(r=>{console.log(` ${r.name}: ${r.startTime.toFixed(2)}ms`)});const n=performance.getEntriesByType("navigation");if(n.length>0){const r=n[0];console.log(" Navigation Timing:",{domContentLoaded:`${(r.domContentLoadedEventEnd-r.navigationStart).toFixed(2)}ms`,loadComplete:`${(r.loadEventEnd-r.navigationStart).toFixed(2)}ms`,firstByte:`${(r.responseStart-r.navigationStart).toFixed(2)}ms`})}}}};us(Co,"instance");let Ry=Co;function uZ(e,t,n){let r=null;return function(...i){const o=()=>{r=null,e(...i)};r&&clearTimeout(r),r=setTimeout(o,t)}}class hZ{constructor(){us(this,"cache",new Set)}preload(t){const n=t.map(r=>this.cache.has(r)?Promise.resolve():new Promise((a,i)=>{const o=new Image;o.onload=()=>{this.cache.add(r),a()},o.onerror=i,o.src=r}));return Promise.all(n)}isPreloaded(t){return this.cache.has(t)}}const wi=Ry.getInstance(),fZ=new hZ,vR=j.lazy(()=>ze(()=>import("./LazyImage-BtW21R4D.js"),[])),MS=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3},mZ=j.memo(({product:e,onProductClick:t,onToggleFavorite:n,onAddToCart:r,onBuyNow:a,isFavorite:i})=>{var o,c,d,h,m;return s.jsxs(Ee,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>t(e.id),children:[s.jsxs("div",{className:"aspect-square md:aspect-[4/3] relative",children:[s.jsx(j.Suspense,{fallback:s.jsx("div",{className:"w-full h-full bg-gray-200 animate-pulse"}),children:s.jsx(vR,{src:e.image,alt:e.name,className:"w-full h-full object-cover",fallback:"/placeholder-product.jpg"})}),s.jsx(ie,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:u=>n(e.id,u),children:s.jsx(Nr,{className:`h-4 w-4 ${i?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Fe,{variant:e.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:e.inStock?"In Stock":"Out of Stock"})]}),s.jsxs(Oe,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:e.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:e.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(js,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:e.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gt,{className:"h-3 w-3"}),s.jsx("span",{children:e.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:e.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${(o=e.deliveryInfo)!=null&&o.isFreeDelivery?"bg-green-100 text-green-700":((c=e.deliveryInfo)==null?void 0:c.deliveryFee)===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(d=e.deliveryInfo)!=null&&d.isFreeDelivery?"Free":((h=e.deliveryInfo)==null?void 0:h.deliveryFee)===null?"TBD":`${(m=e.deliveryInfo)==null?void 0:m.deliveryFee}`})]})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(ie,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!e.inStock,onClick:u=>{u.stopPropagation(),r(e.id,1)},children:[s.jsx(nn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(ie,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!e.inStock,onClick:u=>a(u,e),children:[s.jsx(Es,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]})}),pZ=j.memo(({vendor:e,onVendorClick:t})=>s.jsx(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t(e),children:s.jsx(Oe,{className:"p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(j.Suspense,{fallback:s.jsx("div",{className:"w-16 h-16 bg-gray-200 animate-pulse rounded-full"}),children:s.jsx(vR,{src:e.image,alt:e.name,className:"w-16 h-16 object-cover rounded-full",fallback:"/placeholder-vendor.jpg"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-base mb-1",children:e.name}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(js,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:e.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gt,{className:"h-3 w-3"}),s.jsx("span",{children:e.distance})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Wr,{className:"h-3 w-3"}),s.jsx("span",{children:e.deliveryTime})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:e.categories.map((n,r)=>s.jsx(Fe,{variant:"secondary",className:"text-xs",children:n},r))})]})]})})}));function gZ(){const e=nt(),[t,n]=Bb(),[r,a]=j.useState(t.get("q")||""),[i,o]=j.useState({products:[],vendors:[]}),[c,d]=j.useState("all"),[h,m]=j.useState(!1),[u,f]=j.useState(!1),[p,x]=j.useState(dt.getLocation()),[v,y]=j.useState({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),[w,b]=j.useState(new Set),[_,N]=j.useState(!1),[k,E]=j.useState(""),[T,R]=j.useState([]),{toast:$}=es(),{addToCart:M}=Gn();j.useEffect(()=>{(async()=>{const re=localStorage.getItem("pendingAction");if(re)try{const ue=JSON.parse(re),me=await Se.getToken();if(me&&ue.timestamp>Date.now()-3e5){if(ue.type==="add_to_cart")await M(ue.data.productId,ue.data.quantity||1),$({title:"Added to Cart",description:"Product added successfully"}),e("/cart");else if(ue.type==="buy_now")e("/checkout",{state:{directBuy:!0,product:ue.data}});else if(ue.type==="toggleFavorite"){const we=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${me}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:ue.productId})});if(we.ok){const be=await we.json(),ae=new Set(w);be.is_favorite?ae.add(ue.productId):ae.delete(ue.productId),b(ae),$({title:be.is_favorite?"Added to Favorites":"Removed from Favorites",description:be.message})}}localStorage.removeItem("pendingAction")}else localStorage.removeItem("pendingAction")}catch(ue){console.error("Failed to execute pending action:",ue),localStorage.removeItem("pendingAction")}})()},[M,w,$]);const[A,C]=j.useState([]),z=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}],P=j.useCallback(async(X=1,re="",ue="both")=>{const me=X===1,we=`fetch-${ue}-page-${X}`;wi.startTimer(we),me?m(!0):f(!0);try{const be={"ngrok-skip-browser-warning":"true"},ae=dt.getLocation(),ee=Q=>{const se=new URLSearchParams({page:Q.toString(),page_size:"20"});return re&&se.append("search",re),k&&se.append("sort",k),T.length>0&&se.append("categories",T.join(",")),ae&&(se.append("latitude",ae.latitude.toString()),se.append("longitude",ae.longitude.toString())),se},ye=[];if(ue==="both"||ue==="products"){const Q=ue==="products"?X:v.products.page;ye.push(fetch(`${Qe}search/products/?${ee(Q)}`,{headers:be}).then(se=>se.json()).then(se=>({type:"products",data:se,page:Q})))}if(ue==="both"||ue==="vendors"){const Q=ue==="vendors"?X:v.vendors.page;ye.push(fetch(`${Qe}search/vendors/?${ee(Q)}`,{headers:be}).then(se=>se.json()).then(se=>({type:"vendors",data:se,page:Q})))}const le=await wi.measureAsync("api-requests",()=>Promise.all(ye)),de=[];le.forEach(({type:Q,data:se,page:ne})=>{var ve;if(Q==="products"){const pe=O(se.results||[]);if(me){const ge=[...new Set(((ve=se.results)==null?void 0:ve.map(ke=>ke.category).filter(Boolean))||[])];C(ge)}pe.forEach(ge=>{ge.image&&!de.includes(ge.image)&&de.push(ge.image)}),o(ge=>({...ge,products:ne===1?pe:[...ge.products,...pe]})),y(ge=>({...ge,products:{page:ne,hasMore:se.next!==null,total:se.count||0}}))}else if(Q==="vendors"){const pe=Y(se.results||[]);pe.forEach(ge=>{ge.image&&!de.includes(ge.image)&&de.push(ge.image)}),o(ge=>({...ge,vendors:ne===1?pe:[...ge.vendors,...pe]})),y(ge=>({...ge,vendors:{page:ne,hasMore:se.next!==null,total:se.count||0}}))}}),de.length>0&&fZ.preload(de.slice(0,10)).catch(Q=>console.warn("Image preload failed:",Q))}catch(be){console.error("Fetch error:",be),$({title:"Error",description:"Failed to load search results",variant:"destructive"})}finally{m(!1),f(!1),wi.endTimer(we)}},[k,T,$]);j.useEffect(()=>{wi.startTimer("initial-load");const X=dt.subscribe(x);return dt.startTracking(),P(),K(),wi.endTimer("initial-load"),setTimeout(()=>{wi.logRenderMetrics()},1e3),X},[]),j.useEffect(()=>{uZ(()=>{wi.startTimer("search-query"),n(r?{q:r}:{}),y({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),P(1,r),wi.endTimer("search-query")},300)()},[r,n]),j.useEffect(()=>{y({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),P(1,r)},[k,T]),j.useEffect(()=>{p&&(y({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),P(1,r))},[p]);const O=j.useCallback(X=>{const re=dt.getLocation(),ue=10;return X.map(me=>{var ye,le;const we=((ye=me.images)==null?void 0:ye.find(de=>de.is_primary))||((le=me.images)==null?void 0:le[0]);let be="N/A",ae=1/0;re&&me.vendor_latitude&&me.vendor_longitude&&(ae=MS(re.latitude,re.longitude,me.vendor_latitude,me.vendor_longitude),be=`${ae.toFixed(1)} km`);const ee=nd(me,me.vendor_delivery_fee);return{id:me.id,name:me.name,vendor:me.vendor_name||"Unknown Vendor",vendor_id:me.vendor_id,price:`${me.price}`,priceValue:parseFloat(me.price),image:(we==null?void 0:we.image_url)||"/placeholder-product.jpg",rating:4.5,distance:be,distanceValue:ae,deliveryTime:"30-45 mins",inStock:me.quantity>0,category:me.category,totalSold:me.total_sold||0,deliveryInfo:ee,vendorOnline:me.vendor_online!==!1,deliveryRadius:me.delivery_radius||ue,free_delivery:me.free_delivery,custom_delivery_fee_enabled:me.custom_delivery_fee_enabled,custom_delivery_fee:me.custom_delivery_fee}}).filter(me=>me.vendorOnline&&(me.distanceValue===1/0||me.distanceValue<=me.deliveryRadius))},[]),Y=j.useCallback(X=>{const re=dt.getLocation(),ue=10;return X.map(me=>{var ae;let we="N/A",be=1/0;return re&&me.latitude&&me.longitude&&(be=MS(re.latitude,re.longitude,me.latitude,me.longitude),we=`${be.toFixed(1)} km`),{id:me.id,name:me.business_name,image:((ae=me.user_info)==null?void 0:ae.profile_picture)||"/placeholder-vendor.jpg",rating:4.5,distance:we,distanceValue:be,deliveryTime:"30-45 mins",categories:me.categories||[],isOnline:me.is_online!==!1,deliveryRadius:me.delivery_radius||ue}}).filter(me=>me.isOnline&&(me.distanceValue===1/0||me.distanceValue<=me.deliveryRadius)).sort((me,we)=>me.distanceValue-we.distanceValue)},[]),J=j.useCallback(()=>{!u&&v.products.hasMore&&P(v.products.page+1,r,"products")},[u,v.products.hasMore,v.products.page,r]),G=j.useCallback(()=>{!u&&v.vendors.hasMore&&P(v.vendors.page+1,r,"vendors")},[u,v.vendors.hasMore,v.vendors.page,r]),{sentinelRef:F}=Oy({hasMore:v.products.hasMore,isLoading:u,onLoadMore:J,threshold:300}),{sentinelRef:I}=Oy({hasMore:v.vendors.hasMore,isLoading:u,onLoadMore:G,threshold:300});j.useEffect(()=>{const X=()=>{const{scrollTop:re,scrollHeight:ue,clientHeight:me}=document.documentElement;re+me>=ue-200&&((c==="products"||c==="all")&&v.products.hasMore&&!u&&J(),(c==="vendors"||c==="all")&&v.vendors.hasMore&&!u&&G())};return window.addEventListener("scroll",X,{passive:!0}),()=>window.removeEventListener("scroll",X)},[c,v.products.hasMore,v.vendors.hasMore,u,J,G]),j.useEffect(()=>{const X=Math.max(5,Math.floor(i.products.length*.8));if(i.products.length>=X&&v.products.hasMore&&!u&&(c==="products"||c==="all")){const re=setTimeout(()=>{J()},1e3);return()=>clearTimeout(re)}},[i.products.length,v.products.hasMore,u,c,J]);const V=j.useCallback(X=>{e(`/product/${X}`)},[e]),H=j.useCallback(X=>{e(`/vendor/${X.id}`)},[e]),U=j.useCallback(async(X,re=1)=>{if(!await Se.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:X,quantity:re},path:"/cart",timestamp:Date.now()})),e("/login",{state:{from:window.location.pathname}});return}try{await M(X,re),$({title:"Added to Cart",description:"Product added successfully"}),e("/cart")}catch{$({title:"Error",description:"Failed to add product to cart",variant:"destructive"})}},[M,e,$]),q=j.useCallback(async(X,re)=>{if(X.stopPropagation(),!await Se.getToken()){const me={id:re.id,name:re.name,price:re.price.replace("",""),quantity:1,vendor_name:re.vendor,vendor_id:re.vendor_id,images:[{image_url:re.image}],free_delivery:re.free_delivery,custom_delivery_fee_enabled:re.custom_delivery_fee_enabled,custom_delivery_fee:re.custom_delivery_fee};console.log("Search Buy Now - Product data:",me),console.log("Search Buy Now - Delivery info:",re.deliveryInfo),localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:me,path:"/checkout",timestamp:Date.now()})),e("/login",{state:{from:window.location.pathname}});return}e("/checkout",{state:{directBuy:!0,product:{id:re.id,name:re.name,price:re.price.replace("",""),quantity:1,vendor_name:re.vendor,vendor_id:re.vendor_id,images:[{image_url:re.image}],free_delivery:re.free_delivery,custom_delivery_fee_enabled:re.custom_delivery_fee_enabled,custom_delivery_fee:re.custom_delivery_fee}}})},[e]),K=async()=>{var re;const X=await Se.getToken();if(X)try{const ue=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${X}`,"ngrok-skip-browser-warning":"true"}});if(ue.ok){const me=await ue.json(),we=new Set(((re=me.results)==null?void 0:re.map(be=>be.product.id))||[]);b(we)}}catch(ue){console.error("Failed to fetch favorites:",ue)}},B=async(X,re)=>{re.stopPropagation();const ue=await Se.getToken();if(!ue){localStorage.setItem("pendingAction",JSON.stringify({type:"toggleFavorite",productId:X,timestamp:Date.now()})),e("/login",{state:{from:"/search"}});return}try{const me=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${ue}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:X})});if(me.ok){const we=await me.json(),be=new Set(w);we.is_favorite?be.add(X):be.delete(X),b(be),$({title:we.is_favorite?"Added to Favorites":"Removed from Favorites",description:we.message})}}catch{$({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},W=j.useMemo(()=>i.products.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6",children:i.products.map((X,re)=>s.jsx(mZ,{product:X,onProductClick:V,onToggleFavorite:B,onAddToCart:U,onBuyNow:q,isFavorite:w.has(X.id)},`${X.id}-${re}`))}),v.products.hasMore&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{ref:F,className:"h-4"}),u&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx($s,{className:"h-6 w-6 animate-spin mr-2"}),s.jsx("span",{children:"Loading more products..."})]})]})]}),[i.products,V,B,M,q,w,v.products.hasMore,u,F]),oe=j.useMemo(()=>i.vendors.length===0?null:s.jsxs("div",{className:"space-y-3",children:[i.vendors.map((X,re)=>s.jsx(pZ,{vendor:X,onVendorClick:H},`${X.id}-${re}`)),v.vendors.hasMore&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{ref:I,className:"h-4"}),u&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx($s,{className:"h-6 w-6 animate-spin mr-2"}),s.jsx("span",{children:"Loading more vendors..."})]})]})]}),[i.vendors,H,v.vendors.hasMore,u,I]);return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Vo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(je,{placeholder:"Search products, vendors...",value:r,onChange:X=>a(X.target.value),className:"pl-10 pr-4 py-2"})]}),s.jsx(ie,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>N(!0),children:s.jsx(La,{className:"h-5 w-5"})})]})}),s.jsx("div",{className:"px-4 py-3 border-b border-border/50",children:s.jsx("div",{className:"flex gap-2",children:[{id:"all",label:"All"},{id:"products",label:"Products"},{id:"vendors",label:"Vendors"}].map(X=>s.jsx(ie,{variant:c===X.id?"default":"ghost",size:"sm",onClick:()=>d(X.id),className:"flex-1",children:X.label},X.id))})}),s.jsxs("div",{className:"p-4 pb-20",children:[r&&s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:[c==="all"&&`Found ${v.products.total} products and ${v.vendors.total} vendors`,c==="products"&&`Found ${v.products.total} products`,c==="vendors"&&`Found ${v.vendors.total} vendors`,r&&" for ",s.jsxs("span",{className:"font-medium",children:['"',r,'"']})]}),(c==="all"||c==="products")&&s.jsx("div",{className:"mb-6",children:i.products.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Products"}),W]})}),(c==="all"||c==="vendors")&&s.jsx("div",{children:i.vendors.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Vendors"}),oe]})}),r&&i.products.length===0&&i.vendors.length===0&&!h&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Vo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No results found"}),s.jsx("p",{className:"text-muted-foreground",children:"Try searching for products or vendors with different keywords"})]}),!r&&!h&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Vo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Search for anything"}),s.jsx("p",{className:"text-muted-foreground",children:"Find products, vendors, and more in your area"})]}),h&&i.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx($s,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),_&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>N(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:X=>X.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>N(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:z.map(X=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:X.value,checked:k===X.value,onChange:re=>E(re.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:X.label})]},X.value))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Categories"}),s.jsx("div",{className:"space-y-2",children:A.map(X=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:T.includes(X),onChange:re=>{re.target.checked?R([...T,X]):R(T.filter(ue=>ue!==X))},className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:X})]},X))})]}),s.jsx(ie,{variant:"outline",className:"w-full",onClick:()=>{E(""),R([])},children:"Clear All Filters"})]})]})}),s.jsx(Dw,{}),s.jsx(Kn,{})]})}const IS=mn.BASE_URL;class xZ{async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Se.getToken()}`,"ngrok-skip-browser-warning":"true"}}async getFavorites(){try{const t=await fetch(`${IS}/favorites/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch favorites");const n=await t.json();return n.results||n}catch(t){throw console.error("Error fetching favorites:",t),t}}async toggleFavorite(t){try{const n=await fetch(`${IS}/favorites/toggle/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({product_id:t})});if(!n.ok)throw new Error("Failed to toggle favorite");return await n.json()}catch(n){throw console.error("Error toggling favorite:",n),n}}}const DS=new xZ,vZ=()=>{const e=nt();Rn();const{addToCart:t}=Gn(),{toast:n}=es(),[r,a]=j.useState([]),[i,o]=j.useState(!0),[c,d]=j.useState([]),[h,m]=j.useState(dt.getLocation());j.useEffect(()=>(f(),dt.subscribe(m)),[]),j.useEffect(()=>{r.length>0&&p()},[r,h]);const u=(E,T,R,$)=>{const A=G=>G*(Math.PI/180),C=A(R-E),z=A($-T),P=A(E),O=A(R),Y=Math.sin(C/2)*Math.sin(C/2)+Math.cos(P)*Math.cos(O)*Math.sin(z/2)*Math.sin(z/2);return 6371*(2*Math.atan2(Math.sqrt(Y),Math.sqrt(1-Y)))},f=async()=>{if(!await Se.getToken()){o(!1);return}try{const T=await DS.getFavorites();a(T)}catch(T){console.error("Error fetching favorites:",T),n({title:"Error",description:"Failed to load favorites",variant:"destructive"})}finally{o(!1)}},p=async()=>{try{const E=[...new Set(r.map(z=>z.product.category).filter(Boolean))];if(E.length===0)return;const T=await Se.getToken(),R=T?{Authorization:`Token ${T}`}:{},$=new URLSearchParams({page_size:"12"});h&&($.append("latitude",h.latitude.toString()),$.append("longitude",h.longitude.toString()));const C=((await(await fetch(Ub(`/search/products/?${$}`),{headers:R})).json()).results||[]).filter(z=>E.includes(z.category)).map(z=>{var J,G;const P=((J=z.images)==null?void 0:J.find(F=>F.is_primary))||((G=z.images)==null?void 0:G[0]);let O="N/A",Y=1/0;return h&&z.vendor_latitude&&z.vendor_longitude&&(Y=u(h.latitude,h.longitude,z.vendor_latitude,z.vendor_longitude),O=`${Y.toFixed(1)} km`),{id:z.id,name:z.name,vendor:z.vendor_name||"Unknown Vendor",price:z.price,image:(P==null?void 0:P.image_url)||"/placeholder-product.jpg",distance:O,distanceValue:Y,inStock:z.quantity>0,category:z.category}}).sort((z,P)=>z.distanceValue-P.distanceValue).slice(0,8);d(C)}catch(E){console.error("Error fetching related products:",E)}},x=async E=>{try{await DS.toggleFavorite(E),a(T=>T.filter(R=>R.product.id!==E)),n({title:"Removed from Wishlist",description:"Item has been removed from your wishlist"})}catch{n({title:"Error",description:"Failed to remove from wishlist",variant:"destructive"})}},v=async(E,T)=>{T==null||T.stopPropagation();try{await t(E.product.id,1),n({title:"Added to Cart",description:`${E.product.name} has been added to your cart`})}catch{n({title:"Error",description:"Failed to add to cart",variant:"destructive"})}},y=async(E,T)=>{T==null||T.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:E.product.id,name:E.product.name,price:E.product.price,quantity:1,vendor_name:E.product.vendor_name,vendor_id:E.product.vendor_id,images:E.product.images}}})},w=E=>{e(`/product/${E}`)},[b,_]=j.useState(!1),[N,k]=j.useState(!0);return j.useEffect(()=>{(async()=>{const T=await Se.getToken();_(!!T),k(!1)})()},[]),N?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):b?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),s.jsx("div",{}),s.jsxs("span",{className:"bg-red-100 text-red-800 text-sm font-medium px-3 py-1 rounded-full",children:[r.length," items"]})]})}),s.jsxs("div",{className:"p-4 max-w-3xl mx-auto",children:[i?s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):r.length>0?s.jsx("div",{className:"space-y-4",children:r.map(E=>{var T,R;return s.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl border p-4 flex items-center transition-all duration-300 cursor-pointer hover:bg-gray-50",onClick:()=>w(E.product.id),children:[s.jsx("div",{className:"flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden bg-gray-100",children:s.jsx("img",{src:((R=(T=E.product.images)==null?void 0:T[0])==null?void 0:R.image_url)||"/placeholder-product.jpg",alt:E.product.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"ml-6 flex-1",children:[s.jsx("h3",{className:"font-semibold text-xl text-gray-900 truncate",children:E.product.name}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:E.product.vendor_name}),s.jsxs("p",{className:"font-bold text-2xl text-emerald-600 mt-1",children:["",parseFloat(E.product.price).toFixed(2)]}),s.jsx("div",{className:"flex items-center mt-2",children:E.product.quantity>0?s.jsx("span",{className:"text-green-600 text-sm font-medium bg-green-50 px-2 py-1 rounded-full",children:"In Stock"}):s.jsx("span",{className:"text-red-600 text-sm font-medium bg-red-50 px-2 py-1 rounded-full",children:"Out of Stock"})})]}),s.jsxs("div",{className:"flex flex-col justify-between items-end space-y-2",children:[s.jsx(ie,{variant:"ghost",size:"icon",onClick:$=>{$.stopPropagation(),x(E.product.id)},className:"text-gray-500 hover:text-red-600 hover:bg-red-100 rounded-full",children:s.jsx(Yi,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ie,{size:"sm",disabled:E.product.quantity<=0,onClick:$=>v(E,$),className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-full disabled:bg-gray-300 disabled:text-gray-500",children:s.jsx(nn,{className:"h-3 w-3 mr-1"})}),s.jsxs(ie,{size:"sm",disabled:E.product.quantity<=0,onClick:$=>y(E,$),className:"bg-orange-600 hover:bg-orange-700 text-white rounded-full disabled:bg-gray-300 disabled:text-gray-500",children:[s.jsx(o6,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]})]},E.id)})}):s.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-lg border",children:[s.jsx(Nr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your wishlist is empty"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start adding items you love!"}),s.jsx(ie,{className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-full px-6 py-2",onClick:()=>e("/"),children:"Browse Products"})]}),c.length>0&&s.jsxs("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Products Near You"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:c.map(E=>s.jsx(Ee,{className:"p-3 cursor-pointer hover:shadow-md transition-smooth",onClick:()=>e(`/product/${E.id}`),children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"aspect-square mb-2 bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:E.image,alt:E.name,className:"w-full h-full object-cover",onError:T=>{T.target.src="/placeholder-product.jpg"}})}),s.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:E.name}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:E.vendor}),s.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-500 mb-2",children:[s.jsx(Gt,{className:"h-3 w-3"}),s.jsx("span",{children:E.distance})]}),s.jsxs("p",{className:"font-semibold text-emerald-600 text-sm mb-2",children:["",E.price]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ie,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",disabled:!E.inStock,onClick:T=>{T.stopPropagation(),t(E.id,1)},children:s.jsx(nn,{className:"h-3 w-3"})}),s.jsxs(ie,{size:"sm",className:"flex-1 h-7 text-xs bg-green-600 hover:bg-green-700",disabled:!E.inStock,onClick:T=>{T.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:E.id,name:E.name,price:E.price,quantity:1,vendor_name:E.vendor,images:[{image_url:E.image}]}}})},children:[s.jsx(Es,{className:"h-3 w-3"}),"Buy"]})]})]})},E.id))})]})]}),s.jsx(Kn,{})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Nr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Please Login"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"You need to login to view your wishlist"}),s.jsx(ie,{onClick:()=>e("/login"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Login"})]})})},yZ=async e=>{var t;try{const n=await Se.getUser();return n?n.user_type===e?{success:!0}:(t=n.available_roles)!=null&&t.includes(e)?e==="vendor"?await $w():await yR():{success:!1,roleNotAvailable:!0}:{success:!1,needsLogin:!0}}catch(n){return console.error("Role ensure error:",n),{success:!1,error:n.message}}},$w=async()=>{var e;try{const t=await Se.getUser();if(!((e=t==null?void 0:t.available_roles)!=null&&e.includes("vendor")))throw new Error("Vendor role not available");if(t.user_type==="vendor")return console.log(" Already in vendor role"),{success:!0,message:"Already in vendor role"};console.log(" Switching to vendor role...");const{response:n,data:r}=await Re("/switch-role/",{method:"POST",body:JSON.stringify({role:"vendor"})});if(n.ok){console.log(" Role switch API call successful");const a=(r==null?void 0:r.token)||await Se.getToken(),i={...t,user_type:"vendor",current_role:"vendor"};console.log(" Updating auth services with vendor role..."),await Se.setAuth(a,i);const{simplePersistentAuth:o}=await ze(async()=>{const{simplePersistentAuth:c}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:c}},[]);await o.saveVendorLogin(a,i),console.log(" Auth services updated successfully");try{const{response:c}=await Re("/vendor-profiles/");if(c.ok){const d=await c.json();(!d.results||d.results.length===0)&&(console.log(" Creating vendor profile..."),await wZ(t))}}catch(c){console.log("Profile check failed, will create on first access:",c)}return{success:!0,message:"Switched to vendor role",user:i}}else throw console.error(" Role switch API failed:",n.status,r),new Error((r==null?void 0:r.error)||"Role switch failed")}catch(t){return console.error(" Role switch error:",t),{success:!1,error:t.message}}},yR=async()=>{var e;try{const t=await Se.getUser();if(!((e=t==null?void 0:t.available_roles)!=null&&e.includes("customer")))throw new Error("Customer role not available");if(t.user_type==="customer")return console.log(" Already in customer role"),{success:!0,message:"Already in customer role"};console.log(" Switching to customer role...");const{response:n,data:r}=await Re("/switch-role/",{method:"POST",body:JSON.stringify({role:"customer"})});if(n.ok){console.log(" Role switch API call successful");const a=(r==null?void 0:r.token)||await Se.getToken(),i={...t,user_type:"customer",current_role:"customer"};return console.log(" Updating auth services with customer role..."),await Se.setAuth(a,i),console.log(" Auth services updated successfully"),{success:!0,message:"Switched to customer role",user:i}}else throw console.error(" Role switch API failed:",n.status,r),new Error((r==null?void 0:r.error)||"Role switch failed")}catch(t){return console.error(" Role switch error:",t),{success:!1,error:t.message}}},bZ=async()=>{var e;try{const t=await Se.getUser();return t?((e=t.available_roles)==null?void 0:e.includes("vendor"))?t.user_type==="customer"?{hasAccess:!0,needsRoleSwitch:!0}:{hasAccess:!0,needsRoleSwitch:!1}:{hasAccess:!1,needsOnboarding:!0}:{hasAccess:!1,needsLogin:!0}}catch(t){return console.error("Vendor access check error:",t),{hasAccess:!1,needsLogin:!0}}},wZ=async e=>{try{const t={business_name:e.username||"My Business",owner_name:e.username||"Owner",business_email:e.email||"",business_phone:e.phone_number||"",business_address:"",city:"",state:"",pincode:"",business_type:"retailer",categories:[],description:"",is_active:!0},{response:n}=await Re("/vendor-profiles/",{method:"POST",body:JSON.stringify(t)});n.ok&&console.log("Vendor profile created successfully")}catch(t){console.error("Failed to create vendor profile:",t)}};function bR(){var c,d,h,m,u,f,p,x,v,y,w,b,_,N,k,E;const{state:e,login:t}=Rn(),n=nt();console.log(" RoleSwitcher rendered, user:",e.user),console.log(" Available roles:",(c=e.user)==null?void 0:c.available_roles),console.log(" Available roles length:",(h=(d=e.user)==null?void 0:d.available_roles)==null?void 0:h.length),console.log(" Current role:",((m=e.user)==null?void 0:m.current_role)||((u=e.user)==null?void 0:u.user_type)),console.log(" User type:",(f=e.user)==null?void 0:f.user_type),console.log(" Roles check condition:",!((p=e.user)!=null&&p.available_roles)||e.user.available_roles.length<=1);const r=async T=>{var R,$;console.log(" handleRoleSwitch called with role:",T);try{if(T==="vendor")if(($=(R=e.user)==null?void 0:R.available_roles)!=null&&$.includes("vendor")){console.log(" User has vendor role, switching...");const M=await $w();if(M.success){console.log(" Vendor role switch successful");const A=M.user||{...e.user,user_type:"vendor",current_role:"vendor"},C=await Se.getToken();await t(A,C);const{simplePersistentAuth:z}=await ze(async()=>{const{simplePersistentAuth:P}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:P}},[]);await z.saveVendorLogin(C,A),setTimeout(()=>{console.log(" Navigating to vendor dashboard"),n("/vendor/dashboard")},100)}else console.error(" Vendor role switch failed:",M.error)}else console.log(" Starting vendor onboarding for customer"),n("/vendor/onboarding");else{console.log(" Switching to customer role...");const M=await yR();if(M.success){console.log(" Customer role switch successful");const A=M.user||{...e.user,user_type:"customer",current_role:"customer"},C=await Se.getToken();await t(A,C),setTimeout(()=>{console.log(" Navigating to customer home"),n("/home")},100)}else console.error(" Customer role switch failed:",M.error)}}catch(M){console.error(" Role switch error:",M)}};if(!((x=e.user)!=null&&x.available_roles)||e.user.available_roles.length<=1)return((v=e.user)==null?void 0:v.user_type)==="customer"&&!((w=(y=e.user)==null?void 0:y.available_roles)!=null&&w.includes("vendor"))?s.jsx("button",{onClick:()=>r("vendor"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium w-full",children:"Become a Vendor"}):(console.log(" RoleSwitcher: Not showing button - insufficient roles"),console.log("Available roles:",(b=e.user)==null?void 0:b.available_roles),s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Role switching not available"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current role: ",((_=e.user)==null?void 0:_.current_role)||((N=e.user)==null?void 0:N.user_type)||"Unknown"]})]}));const a=window.location.pathname.startsWith("/vendor"),i=a?"vendor":"customer",o=i==="vendor"?"customer":"vendor";return console.log(" Current page context:",{isOnVendorPage:a,currentRole:i,otherRole:o}),o?(console.log(" RoleSwitcher: Showing button for role switch to:",o),s.jsx("button",{onClick:()=>r(o),className:"px-6 py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white rounded-xl hover:from-indigo-600 hover:via-purple-600 hover:to-pink-600 transition-all duration-300 text-sm font-semibold w-full shadow-lg hover:shadow-xl transform hover:scale-105 border border-white/20 backdrop-blur-sm",children:s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Switch to ",o==="customer"?"Customer":"Vendor"]})})):(console.log(" RoleSwitcher: No other role found"),s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"No other roles available"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current role: ",((k=e.user)==null?void 0:k.current_role)||((E=e.user)==null?void 0:E.user_type)||"Unknown"]})]}))}function jZ(){const[e,t]=j.useState(""),[n,r]=j.useState(""),[a,i]=j.useState(!1),[o,c]=j.useState(!1),[d,h]=j.useState(""),[m,u]=j.useState(""),[f,p]=j.useState(!1),[x,v]=j.useState(!1);j.useEffect(()=>{y()},[]);const y=async()=>{p(!1),v(!1)},w=async()=>{if(h(""),u(""),e.length<6){h("Password must be at least 6 characters long");return}if(e!==n){h("Passwords do not match");return}c(!0);try{const b=await Ec.setupPassword(e);b.success?(u("Password set successfully! You can now login with email and password."),p(!1),t(""),r("")):h(b.error||"Failed to setup password")}catch{h("Failed to setup password. Please try again.")}finally{c(!1)}};return!f||!x?null:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Set Up Password for Traditional Login"}),s.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"You signed up with Google. Set up a password to also login with email and password."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(je,{type:a?"text":"password",value:e,onChange:b=>t(b.target.value),placeholder:"Enter password (min 6 characters)",className:"pr-10 bg-white",size:"sm"}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsx(je,{type:"password",value:n,onChange:b=>r(b.target.value),placeholder:"Confirm password",className:"bg-white",size:"sm"}),d&&s.jsx("p",{className:"text-red-600 text-sm",children:d}),m&&s.jsx("p",{className:"text-green-600 text-sm",children:m}),s.jsx(ie,{onClick:w,disabled:!e||!n||o,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:o?"Setting up...":"Set Password"})]})]})]})})}const _Z=[{icon:zP,label:"My Orders",path:"/orders"},{icon:Nr,label:"Wishlist",path:"/wishlist"},{icon:Vr,label:"Personal Information",path:"/profile-edit"},{icon:Wn,label:"Privacy & Security",path:"/privacy"}],NZ=()=>{const e=nt(),{logout:t,state:n,login:r}=Rn(),{navigateWithAuth:a}=uo(),[i,o]=j.useState(null),[c,d]=j.useState(!0),[h,m]=j.useState("");j.useEffect(()=>{u()},[]);const u=async()=>{try{if(!await Se.getToken()){a("/profile");return}const{response:v,data:y}=await Re("/profile/");if(!v.ok&&y&&console.log("Profile API response:",y),v.status===401){console.log("Profile endpoint returned 401, using stored user data");const w=await Se.getUser();if(w){o({email:w.email||w.username||"User",avatar:"/placeholder-avatar.jpg"});return}else{a("/profile");return}}if(!v.ok)throw new Error("Failed to fetch profile");if(n.user){const w={...n.user,available_roles:y.available_roles||n.user.available_roles,user_type:y.user_type||n.user.user_type},b=await Se.getToken();await r(w,b)}o({email:y.email,avatar:y.profile_picture?y.profile_picture.startsWith("http")?y.profile_picture:`${Qe}media/${y.profile_picture}`:"/placeholder-avatar.jpg"})}catch(x){m(x.message),console.error("Error fetching profile:",x)}finally{d(!1)}},f=async()=>{try{await Re("/logout/",{method:"POST"})}catch(x){console.error("Logout error:",x)}finally{await t(),e("/login")}},p=async x=>{if(x)try{const v=new FormData;v.append("profile_picture",x);const{response:y,data:w}=await Re("/profile/upload-picture/",{method:"POST",body:v});y.ok&&w&&o(b=>({...b,avatar:w.profile_picture}))}catch(v){console.error("Profile image upload error:",v)}};return c?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):h||!i?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:h||"Failed to load profile"}),s.jsx(ie,{onClick:()=>e("/login"),children:"Go to Login"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex flex-col items-center pt-6 pb-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden mb-3 cursor-pointer hover:bg-gray-300 transition-colors",onClick:()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=v=>{var w;const y=(w=v.target.files)==null?void 0:w[0];y&&p(y)},x.click()},children:i.avatar&&i.avatar!=="/placeholder-avatar.jpg"?s.jsx("img",{src:i.avatar,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-600 font-semibold text-lg",children:i.email?i.email.charAt(0).toUpperCase():"U"})}),s.jsx(ie,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=v=>{var w;const y=(w=v.target.files)==null?void 0:w[0];y&&p(y)},x.click()},children:s.jsx(ja,{className:"h-3 w-3"})})]}),s.jsx("p",{className:"text-gray-800 text-base font-medium",children:i.email})]})}),s.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-100 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-1",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Account Type"]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Switch between your Customer and Vendor accounts"}),s.jsx(bR,{})]}),s.jsxs(ie,{variant:"outline",className:"w-full flex items-center justify-center py-4 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:f,children:[s.jsx(yb,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium",children:"Logout"})]})]}),s.jsx(jZ,{}),s.jsxs(Ee,{children:[s.jsx(St,{className:"pb-3",children:s.jsx(Pt,{className:"text-base",children:"Account"})}),s.jsx(Oe,{className:"space-y-1",children:_Z.map((x,v)=>{const y=x.icon;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>a(x.path),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:s.jsx(y,{className:"h-4 w-4 text-primary"})}),s.jsx("span",{className:"font-medium text-sm",children:x.label})]}),s.jsx("div",{className:"text-gray-400",children:""})]},v)})})]})]}),s.jsx(Dw,{}),s.jsx(Kn,{})]})};var SZ="Label",wR=j.forwardRef((e,t)=>s.jsx(st.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));wR.displayName=SZ;var jR=wR;const kZ=ih("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xe=j.forwardRef(({className:e,...t},n)=>s.jsx(jR,{ref:n,className:Ye(kZ(),e),...t}));xe.displayName=jR.displayName;const Ws=j.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:Ye("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Ws.displayName="Textarea";const CZ=()=>{const e=nt(),{toast:t}=es(),[n,r]=j.useState(!1),[a,i]=j.useState(!0),[o,c]=j.useState(!1),[d,h]=j.useState({username:"",email:"",phone_number:"",address:"",date_of_birth:"",profile_picture:null});j.useEffect(()=>{m()},[]);const m=async()=>{try{const x=await Se.getToken();if(!x){e("/login");return}const v=await fetch(Qe+"profile/",{headers:{Authorization:`Token ${x}`,"ngrok-skip-browser-warning":"true"}});if(!v.ok)throw new Error("Failed to fetch profile");const y=await v.json();h({username:y.username||"",email:y.email||"",phone_number:y.phone_number||"",address:y.address||"",date_of_birth:y.date_of_birth||"",profile_picture:y.profile_picture?y.profile_picture.startsWith("http")?y.profile_picture:`${Qe}media/${y.profile_picture}`:null})}catch(x){console.error("Error fetching profile:",x),t({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{i(!1)}},u=async()=>{c(!0);try{const x=await Se.getToken();if(!x)return;if((await fetch(Qe+"profile/update/",{method:"PUT",headers:{Authorization:`Token ${x}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({username:d.username,phone_number:d.phone_number,address:d.address,date_of_birth:d.date_of_birth||null})})).ok)r(!1),t({title:"Success",description:"Profile updated successfully!"});else throw new Error("Failed to update profile")}catch(x){console.error("Error saving profile:",x),t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}finally{c(!1)}},f=async x=>{if(x)try{const v=await Se.getToken();if(!v)return;const y=new FormData;y.append("profile_picture",x);const w=await fetch(Qe+"profile/upload-picture/",{method:"POST",headers:{Authorization:`Token ${v}`,"ngrok-skip-browser-warning":"true"},body:y});if(w.ok){const b=await w.json();h(_=>({..._,profile_picture:b.profile_picture})),t({title:"Success",description:"Profile picture updated successfully!"})}else throw new Error("Failed to upload image")}catch(v){console.error("Profile image upload error:",v),t({title:"Error",description:"Failed to upload profile picture",variant:"destructive"})}},p=(x,v)=>{h(y=>({...y,[x]:v}))};return a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-100 sticky top-0 z-30",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e("/profile"),className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsx("h1",{className:"text-lg font-semibold",children:"Personal Information"})]}),s.jsx(ie,{onClick:()=>n?u():r(!0),size:"sm",className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:n?s.jsxs(s.Fragment,{children:[s.jsx(Wc,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save"]}):s.jsxs(s.Fragment,{children:[s.jsx(lh,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),s.jsx("div",{className:"p-4 pb-20",children:s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs(Pt,{className:"flex items-center gap-2",children:[s.jsx(Vr,{className:"h-5 w-5"}),"Profile Information"]})}),s.jsxs(Oe,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden ${n?"cursor-pointer hover:bg-gray-200":""}`,onClick:n?()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=v=>{var w;const y=(w=v.target.files)==null?void 0:w[0];y&&f(y)},x.click()}:void 0,children:d.profile_picture?s.jsx("img",{src:d.profile_picture,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-600 font-semibold text-2xl",children:d.username?d.username.charAt(0).toUpperCase():"U"})}),n&&s.jsx(ie,{size:"sm",className:"absolute -bottom-1 -right-1 w-8 h-8 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=v=>{var w;const y=(w=v.target.files)==null?void 0:w[0];y&&f(y)},x.click()},children:s.jsx(ja,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n?"Click to change profile picture":"Profile Picture"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"username",children:"Username"}),s.jsx(je,{id:"username",value:d.username,onChange:x=>p("username",x.target.value),disabled:!n,className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"email",children:"Email"}),s.jsx(je,{id:"email",type:"email",value:d.email,disabled:!0,className:"mt-1 bg-gray-50"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"phone",children:"Phone Number"}),s.jsx(je,{id:"phone",value:d.phone_number,onChange:x=>p("phone_number",x.target.value),disabled:!n,className:"mt-1",placeholder:"Enter your phone number"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"address",children:"Address"}),s.jsx(Ws,{id:"address",value:d.address,onChange:x=>p("address",x.target.value),disabled:!n,className:"mt-1",placeholder:"Enter your address",rows:3})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"dob",children:"Date of Birth"}),s.jsx(je,{id:"dob",type:"date",value:d.date_of_birth||"",onChange:x=>p("date_of_birth",x.target.value||null),disabled:!n,className:"mt-1"})]})]})]})]})}),s.jsx(Kn,{})]})},PZ=()=>{const e=nt(),{toast:t}=es(),[n,r]=j.useState(!0),[a,i]=j.useState(""),[o,c]=j.useState(!1),[d,h]=j.useState(""),[m,u]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const x=await Se.getToken();if(!x){e("/login");return}const v=await fetch(Qe+"profile/",{headers:{Authorization:`Token ${x}`,"ngrok-skip-browser-warning":"true"}});if(!v.ok)throw new Error("Failed to fetch profile");const y=await v.json(),w=(y==null?void 0:y.plain_password)||"";i(w)}catch(x){console.error(x)}})()},[]);const f=async()=>{if(!d){t({title:"Error",description:"New password is required",variant:"destructive"});return}u(!0);try{const p=await Se.getToken();if(!p){t({title:"Error",description:"You are not authenticated. Please log in.",variant:"destructive"}),e("/login");return}const x=await fetch(Qe+"change-password/simple/",{method:"POST",headers:{Authorization:`Token ${p}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({new_password:d})});if(!x.ok){const y=await x.json();throw new Error(y.error||"Failed to change password")}const v=await x.json();await Se.setAuth(v.token,await Se.getUser()),t({title:"Success",description:"Password changed successfully"}),i(d),h(""),c(!1)}catch(p){t({title:"Error",description:p instanceof Error?p.message:"Failed to change password",variant:"destructive"})}finally{u(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center gap-3 p-4",children:[s.jsx(ie,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Privacy & Security"})]})}),s.jsx("div",{className:"p-4 space-y-6 pb-20",children:s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Wn,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"font-semibold",children:"Password"})]}),o?s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{children:"New Password"}),s.jsx(je,{type:"text",value:d,onChange:p=>h(p.target.value),placeholder:"Enter new password"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ie,{onClick:f,disabled:m,children:m?"Saving...":"Save"}),s.jsx(ie,{variant:"outline",onClick:()=>{c(!1),h("")},disabled:m,children:"Cancel"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{children:"Your Password"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(je,{type:n?"text":"password",value:a,disabled:!0,className:"bg-gray-100"}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>r(!n),children:n?s.jsx(xb,{className:"h-4 w-4"}):s.jsx(Ps,{className:"h-4 w-4"})})]}),s.jsx(ie,{onClick:()=>c(!0),disabled:m,children:"Change Password"})]})]})}),s.jsx(Kn,{})]})};function EZ(){const e=nt();return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 max-w-4xl mx-auto",children:[s.jsx(ie,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full hover:bg-gray-100",children:s.jsx(Yt,{className:"h-5 w-5 text-gray-800"})}),s.jsxs("h1",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(Wn,{className:"h-5 w-5 text-blue-600"}),"Privacy Policy"]}),s.jsx("div",{className:"w-10"})]})}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[s.jsxs(Ee,{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx(Wn,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Privacy Policy"}),s.jsxs("p",{className:"text-gray-600",children:["Last updated: ",new Date().toLocaleDateString()]})]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"At Ezeyway, we are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our marketplace platform and services."})})]}),s.jsxs(Ee,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(Ps,{className:"h-5 w-5 text-blue-600"}),"Information We Collect"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Personal Information"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 ml-4",children:[s.jsx("li",{children:"Name, email address, phone number"}),s.jsx("li",{children:"Delivery address and billing information"}),s.jsx("li",{children:"Profile picture and account preferences"}),s.jsx("li",{children:"Payment information (processed securely by third-party providers)"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Usage Information"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 ml-4",children:[s.jsx("li",{children:"Device information and IP address"}),s.jsx("li",{children:"Location data (with your permission)"}),s.jsx("li",{children:"App usage patterns and preferences"}),s.jsx("li",{children:"Search queries and product interactions"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Vendor Information"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 ml-4",children:[s.jsx("li",{children:"Business name, registration details, and tax information"}),s.jsx("li",{children:"Product listings, descriptions, and images"}),s.jsx("li",{children:"Bank account details for payments"}),s.jsx("li",{children:"Business location and operating hours"})]})]})]})]}),s.jsxs(Ee,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(xp,{className:"h-5 w-5 text-blue-600"}),"How We Use Your Information"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Service Provision"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Process orders and payments"}),s.jsx("li",{children:"Facilitate delivery services"}),s.jsx("li",{children:"Provide customer support"}),s.jsx("li",{children:"Manage user accounts"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Platform Improvement"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Analyze usage patterns"}),s.jsx("li",{children:"Improve app functionality"}),s.jsx("li",{children:"Personalize user experience"}),s.jsx("li",{children:"Develop new features"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Communication"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Send order updates"}),s.jsx("li",{children:"Notify about promotions"}),s.jsx("li",{children:"Provide important announcements"}),s.jsx("li",{children:"Respond to inquiries"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Legal Compliance"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Comply with regulations"}),s.jsx("li",{children:"Prevent fraud and abuse"}),s.jsx("li",{children:"Resolve disputes"}),s.jsx("li",{children:"Enforce terms of service"})]})]})]})]}),s.jsxs(Ee,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(_N,{className:"h-5 w-5 text-blue-600"}),"Information Sharing and Disclosure"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-blue-800 font-medium mb-2",children:"We do not sell your personal information to third parties."}),s.jsx("p",{className:"text-blue-700 text-sm",children:"We may share information only in the following circumstances:"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"With Vendors"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Order details and delivery information to fulfill your purchases"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Service Providers"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Payment processors, delivery partners, and technical service providers"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Legal Requirements"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"When required by law, court order, or government regulations"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Business Transfers"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"In case of merger, acquisition, or sale of business assets"})]})]})]})]}),s.jsxs(Ee,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(_N,{className:"h-5 w-5 text-green-600"}),"Data Security"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Technical Safeguards"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"SSL/TLS encryption for data transmission"}),s.jsx("li",{children:"Secure data storage with encryption"}),s.jsx("li",{children:"Regular security audits and updates"}),s.jsx("li",{children:"Access controls and authentication"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Operational Safeguards"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Limited employee access to personal data"}),s.jsx("li",{children:"Regular staff training on privacy"}),s.jsx("li",{children:"Incident response procedures"}),s.jsx("li",{children:"Data backup and recovery systems"})]})]})]})]}),s.jsxs(Ee,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(xa,{className:"h-5 w-5 text-purple-600"}),"Your Privacy Rights"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Access & Control"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"View your personal information"}),s.jsx("li",{children:"Update or correct your data"}),s.jsx("li",{children:"Delete your account"}),s.jsx("li",{children:"Export your data"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Communication Preferences"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Opt-out of marketing emails"}),s.jsx("li",{children:"Manage push notifications"}),s.jsx("li",{children:"Control location sharing"}),s.jsx("li",{children:"Adjust privacy settings"})]})]})]})]})]})]})}function TZ(){const e=nt(),[t,n]=j.useState(1),[r,a]=j.useState(""),[i,o]=j.useState(""),[c,d]=j.useState(""),[h,m]=j.useState(""),[u,f]=j.useState(""),[p,x]=j.useState(""),[v,y]=j.useState(!1),[w,b]=j.useState(!1),[_,N]=j.useState(""),[k,E]=j.useState(!1),T=async()=>{var C,z,P;if(h!==u){N("Passwords do not match");return}b(!0),N("");try{const O=await fetch(Qe+"register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,email:c,password:h,user_type:"customer",phone_number:i})}),Y=await O.json();if(!O.ok){const J=((C=Y.username)==null?void 0:C[0])||((z=Y.email)==null?void 0:z[0])||Y.message||((P=Object.values(Y)[0])==null?void 0:P[0])||"Registration failed";throw new Error(J)}n(2)}catch(O){N(O.message)}finally{b(!1)}},R=C=>{x(C),C.length===6&&$(C)},$=async C=>{b(!0),N("");try{const z=await fetch(Qe+"verify-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,otp:C})}),P=await z.json();if(!z.ok)throw new Error(P.error||"Verification failed");localStorage.setItem("token",P.token),e("/home")}catch(z){N(z.message)}finally{b(!1)}},M=async()=>{b(!0),N("");try{const C=await fetch(Qe+"send-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c})}),z=await C.json();if(!C.ok)throw new Error(z.error||"Failed to resend OTP");N("OTP resent successfully")}catch(C){N(C.message)}finally{b(!1)}},A=()=>{e("/login")};return s.jsx("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"w-full max-w-80 mx-auto px-4",children:[t===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:li,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customer Signup"})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:r,onChange:C=>a(C.target.value),placeholder:"Full Name",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(je,{type:"tel",value:i,onChange:C=>o(C.target.value),placeholder:"Phone Number",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(je,{type:"email",value:c,onChange:C=>d(C.target.value),placeholder:"Email Address",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"relative",children:[s.jsx(je,{type:v?"text":"password",value:h,onChange:C=>m(C.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>y(!v),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsx(je,{type:"password",value:u,onChange:C=>f(C.target.value),placeholder:"Confirm Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"flex items-start space-x-2 w-80",children:[s.jsx("input",{type:"checkbox",id:"agreeToTerms",checked:k,onChange:C=>E(C.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 mt-1"}),s.jsxs("label",{htmlFor:"agreeToTerms",className:"text-sm text-gray-700",children:["I agree to the"," ",s.jsx("button",{type:"button",onClick:()=>e("/privacy-policy"),className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})," ","and Terms & Conditions"]})]}),_&&s.jsx("p",{className:"text-red-600 text-center",children:_}),s.jsx(ie,{onClick:T,disabled:!r||!i||!c||!h||!u||h!==u||!k||w,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:w?"Creating Account...":"Sign Up"})]}),s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:A,className:"text-blue-600 hover:text-blue-700 text-sm",children:"Already have an account? Login"})})]}),t===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:li,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Email"}),s.jsxs("p",{className:"text-gray-600 mt-2",children:["Code sent to ",c]})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:p,onChange:C=>R(C.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest w-80"}),w&&s.jsx("div",{className:"text-center text-blue-600",children:"Verifying..."}),_&&s.jsx("p",{className:"text-red-600 text-center",children:_}),s.jsx("button",{onClick:()=>n(1),className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Change details"}),s.jsx("button",{onClick:M,disabled:w,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend code"})]})]})]})})})}function AZ(){const e=nt(),[t,n]=j.useState(""),r=o=>{o.preventDefault(),e("/login")},a=()=>{e("/login")},i=()=>{console.log("Resend link clicked")};return s.jsx("div",{className:"min-h-screen flex items-end justify-center bg-cover bg-center bg-no-repeat p-4 pb-12",style:{backgroundImage:"url(/images/forgot.png)"},children:s.jsxs("div",{className:"w-full max-w-sm bg-white rounded-lg shadow-lg p-4",style:{backgroundColor:"#856043"},children:[s.jsx("h2",{className:"text-xl font-bold text-white text-center mb-5",children:"Forgot Password"}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"email",className:"text-white font-medium",children:"Email or Phone Number"}),s.jsx(je,{id:"email",type:"text",value:t,onChange:o=>n(o.target.value),placeholder:"Enter your email or phone",className:"mt-1 w-full rounded-md border-gray-300 focus:border-white focus:ring-white text-gray-900"})]}),s.jsx(ie,{onClick:r,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Submit"}),s.jsx(ie,{onClick:i,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Resend Link"}),s.jsx(ie,{onClick:a,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Back to Login"})]})]})})}var zw="Radio",[OZ,_R]=gn(zw),[RZ,LZ]=OZ(zw),NR=j.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:a=!1,required:i,disabled:o,value:c="on",onCheck:d,form:h,...m}=e,[u,f]=j.useState(null),p=bt(t,y=>f(y)),x=j.useRef(!1),v=u?h||!!u.closest("form"):!0;return s.jsxs(RZ,{scope:n,checked:a,disabled:o,children:[s.jsx(st.button,{type:"button",role:"radio","aria-checked":a,"data-state":PR(a),"data-disabled":o?"":void 0,disabled:o,value:c,...m,ref:p,onClick:$e(e.onClick,y=>{a||d==null||d(),v&&(x.current=y.isPropagationStopped(),x.current||y.stopPropagation())})}),v&&s.jsx(CR,{control:u,bubbles:!x.current,name:r,value:c,checked:a,required:i,disabled:o,form:h,style:{transform:"translateX(-100%)"}})]})});NR.displayName=zw;var SR="RadioIndicator",kR=j.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...a}=e,i=LZ(SR,n);return s.jsx(an,{present:r||i.checked,children:s.jsx(st.span,{"data-state":PR(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});kR.displayName=SR;var MZ="RadioBubbleInput",CR=j.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=j.useRef(null),c=bt(o,i),d=Ap(n),h=wp(t);return j.useEffect(()=>{const m=o.current;if(!m)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(d!==n&&p){const x=new Event("click",{bubbles:r});p.call(m,n),m.dispatchEvent(x)}},[d,n,r]),s.jsx(st.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:c,style:{...a.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});CR.displayName=MZ;function PR(e){return e?"checked":"unchecked"}var IZ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Hp="RadioGroup",[DZ,Tre]=gn(Hp,[Qc,_R]),ER=Qc(),TR=_R(),[FZ,$Z]=DZ(Hp),AR=j.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:i,required:o=!1,disabled:c=!1,orientation:d,dir:h,loop:m=!0,onValueChange:u,...f}=e,p=ER(n),x=Jc(h),[v,y]=Kr({prop:i,defaultProp:a??null,onChange:u,caller:Hp});return s.jsx(FZ,{scope:n,name:r,required:o,disabled:c,value:v,onValueChange:y,children:s.jsx(Zb,{asChild:!0,...p,orientation:d,dir:x,loop:m,children:s.jsx(st.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":c?"":void 0,dir:x,...f,ref:t})})})});AR.displayName=Hp;var OR="RadioGroupItem",RR=j.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...a}=e,i=$Z(OR,n),o=i.disabled||r,c=ER(n),d=TR(n),h=j.useRef(null),m=bt(t,h),u=i.value===a.value,f=j.useRef(!1);return j.useEffect(()=>{const p=v=>{IZ.includes(v.key)&&(f.current=!0)},x=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",x)}},[]),s.jsx(Gb,{asChild:!0,...c,focusable:!o,active:u,children:s.jsx(NR,{disabled:o,required:i.required,checked:u,...d,...a,name:i.name,ref:m,onCheck:()=>i.onValueChange(a.value),onKeyDown:$e(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:$e(a.onFocus,()=>{var p;f.current&&((p=h.current)==null||p.click())})})})});RR.displayName=OR;var zZ="RadioGroupIndicator",LR=j.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,a=TR(n);return s.jsx(kR,{...a,...r,ref:t})});LR.displayName=zZ;var MR=AR,IR=RR,BZ=LR;const DR=j.forwardRef(({className:e,...t},n)=>s.jsx(MR,{className:Ye("grid gap-2",e),...t,ref:n}));DR.displayName=MR.displayName;const Ly=j.forwardRef(({className:e,...t},n)=>s.jsx(IR,{ref:n,className:Ye("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(BZ,{className:"flex items-center justify-center",children:s.jsx(DP,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ly.displayName=IR.displayName;var VZ="Separator",FS="horizontal",UZ=["horizontal","vertical"],FR=j.forwardRef((e,t)=>{const{decorative:n,orientation:r=FS,...a}=e,i=qZ(r)?r:FS,c=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(st.div,{"data-orientation":i,...c,...a,ref:t})});FR.displayName=VZ;function qZ(e){return UZ.includes(e)}var $R=FR;const Pa=j.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>s.jsx($R,{ref:a,decorative:n,orientation:t,className:Ye("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Pa.displayName=$R.displayName;function HZ(e,t){const n=j.useRef(t);j.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function WZ(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const ZZ=1;function GZ(e){return Object.freeze({__version:ZZ,map:e})}function zR(e,t){return Object.freeze({...e,...t})}const BR=j.createContext(null),VR=BR.Provider;function Bw(){const e=j.useContext(BR);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function UR(e){function t(n,r){const{instance:a,context:i}=e(n).current;return j.useImperativeHandle(r,()=>a),n.children==null?null:Ce.createElement(VR,{value:i},n.children)}return j.forwardRef(t)}function KZ(e){function t(n,r){const{instance:a}=e(n).current;return j.useImperativeHandle(r,()=>a),null}return j.forwardRef(t)}function qR(e,t){const n=j.useRef();j.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Vw(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}var My={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(Ta,function(n){var r="1.9.4";function a(l){var g,S,D,Z;for(S=1,D=arguments.length;S<D;S++){Z=arguments[S];for(g in Z)l[g]=Z[g]}return l}var i=Object.create||function(){function l(){}return function(g){return l.prototype=g,new l}}();function o(l,g){var S=Array.prototype.slice;if(l.bind)return l.bind.apply(l,S.call(arguments,1));var D=S.call(arguments,2);return function(){return l.apply(g,D.length?D.concat(S.call(arguments)):arguments)}}var c=0;function d(l){return"_leaflet_id"in l||(l._leaflet_id=++c),l._leaflet_id}function h(l,g,S){var D,Z,te,fe;return fe=function(){D=!1,Z&&(te.apply(S,Z),Z=!1)},te=function(){D?Z=arguments:(l.apply(S,arguments),setTimeout(fe,g),D=!0)},te}function m(l,g,S){var D=g[1],Z=g[0],te=D-Z;return l===D&&S?l:((l-Z)%te+te)%te+Z}function u(){return!1}function f(l,g){if(g===!1)return l;var S=Math.pow(10,g===void 0?6:g);return Math.round(l*S)/S}function p(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function x(l){return p(l).split(/\s+/)}function v(l,g){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?i(l.options):{});for(var S in g)l.options[S]=g[S];return l.options}function y(l,g,S){var D=[];for(var Z in l)D.push(encodeURIComponent(S?Z.toUpperCase():Z)+"="+encodeURIComponent(l[Z]));return(!g||g.indexOf("?")===-1?"?":"&")+D.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function b(l,g){return l.replace(w,function(S,D){var Z=g[D];if(Z===void 0)throw new Error("No value provided for variable "+S);return typeof Z=="function"&&(Z=Z(g)),Z})}var _=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function N(l,g){for(var S=0;S<l.length;S++)if(l[S]===g)return S;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var T=0;function R(l){var g=+new Date,S=Math.max(0,16-(g-T));return T=g+S,window.setTimeout(l,S)}var $=window.requestAnimationFrame||E("RequestAnimationFrame")||R,M=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function A(l,g,S){if(S&&$===R)l.call(g);else return $.call(window,o(l,g))}function C(l){l&&M.call(window,l)}var z={__proto__:null,extend:a,create:i,bind:o,get lastId(){return c},stamp:d,throttle:h,wrapNum:m,falseFn:u,formatNum:f,trim:p,splitWords:x,setOptions:v,getParamString:y,template:b,isArray:_,indexOf:N,emptyImageUrl:k,requestFn:$,cancelFn:M,requestAnimFrame:A,cancelAnimFrame:C};function P(){}P.extend=function(l){var g=function(){v(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=g.__super__=this.prototype,D=i(S);D.constructor=g,g.prototype=D;for(var Z in this)Object.prototype.hasOwnProperty.call(this,Z)&&Z!=="prototype"&&Z!=="__super__"&&(g[Z]=this[Z]);return l.statics&&a(g,l.statics),l.includes&&(O(l.includes),a.apply(null,[D].concat(l.includes))),a(D,l),delete D.statics,delete D.includes,D.options&&(D.options=S.options?i(S.options):{},a(D.options,l.options)),D._initHooks=[],D.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var te=0,fe=D._initHooks.length;te<fe;te++)D._initHooks[te].call(this)}},g},P.include=function(l){var g=this.prototype.options;return a(this.prototype,l),l.options&&(this.prototype.options=g,this.mergeOptions(l.options)),this},P.mergeOptions=function(l){return a(this.prototype.options,l),this},P.addInitHook=function(l){var g=Array.prototype.slice.call(arguments,1),S=typeof l=="function"?l:function(){this[l].apply(this,g)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function O(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=_(l)?l:[l];for(var g=0;g<l.length;g++)l[g]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Y={on:function(l,g,S){if(typeof l=="object")for(var D in l)this._on(D,l[D],g);else{l=x(l);for(var Z=0,te=l.length;Z<te;Z++)this._on(l[Z],g,S)}return this},off:function(l,g,S){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var D in l)this._off(D,l[D],g);else{l=x(l);for(var Z=arguments.length===1,te=0,fe=l.length;te<fe;te++)Z?this._off(l[te]):this._off(l[te],g,S)}return this},_on:function(l,g,S,D){if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}if(this._listens(l,g,S)===!1){S===this&&(S=void 0);var Z={fn:g,ctx:S};D&&(Z.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(Z)}},_off:function(l,g,S){var D,Z,te;if(this._events&&(D=this._events[l],!!D)){if(arguments.length===1){if(this._firingCount)for(Z=0,te=D.length;Z<te;Z++)D[Z].fn=u;delete this._events[l];return}if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}var fe=this._listens(l,g,S);if(fe!==!1){var _e=D[fe];this._firingCount&&(_e.fn=u,this._events[l]=D=D.slice()),D.splice(fe,1)}}},fire:function(l,g,S){if(!this.listens(l,S))return this;var D=a({},g,{type:l,target:this,sourceTarget:g&&g.sourceTarget||this});if(this._events){var Z=this._events[l];if(Z){this._firingCount=this._firingCount+1||1;for(var te=0,fe=Z.length;te<fe;te++){var _e=Z[te],Ne=_e.fn;_e.once&&this.off(l,Ne,_e.ctx),Ne.call(_e.ctx||this,D)}this._firingCount--}}return S&&this._propagateEvent(D),this},listens:function(l,g,S,D){typeof l!="string"&&console.warn('"string" type argument expected');var Z=g;typeof g!="function"&&(D=!!g,Z=void 0,S=void 0);var te=this._events&&this._events[l];if(te&&te.length&&this._listens(l,Z,S)!==!1)return!0;if(D){for(var fe in this._eventParents)if(this._eventParents[fe].listens(l,g,S,D))return!0}return!1},_listens:function(l,g,S){if(!this._events)return!1;var D=this._events[l]||[];if(!g)return!!D.length;S===this&&(S=void 0);for(var Z=0,te=D.length;Z<te;Z++)if(D[Z].fn===g&&D[Z].ctx===S)return Z;return!1},once:function(l,g,S){if(typeof l=="object")for(var D in l)this._on(D,l[D],g,!0);else{l=x(l);for(var Z=0,te=l.length;Z<te;Z++)this._on(l[Z],g,S,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[d(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[d(l)],this},_propagateEvent:function(l){for(var g in this._eventParents)this._eventParents[g].fire(l.type,a({layer:l.target,propagatedFrom:l.target},l),!0)}};Y.addEventListener=Y.on,Y.removeEventListener=Y.clearAllEventListeners=Y.off,Y.addOneTimeEventListener=Y.once,Y.fireEvent=Y.fire,Y.hasEventListeners=Y.listens;var J=P.extend(Y);function G(l,g,S){this.x=S?Math.round(l):l,this.y=S?Math.round(g):g}var F=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(l){return this.clone()._add(I(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(I(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new G(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new G(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=F(this.x),this.y=F(this.y),this},distanceTo:function(l){l=I(l);var g=l.x-this.x,S=l.y-this.y;return Math.sqrt(g*g+S*S)},equals:function(l){return l=I(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=I(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+f(this.x)+", "+f(this.y)+")"}};function I(l,g,S){return l instanceof G?l:_(l)?new G(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new G(l.x,l.y):new G(l,g,S)}function V(l,g){if(l)for(var S=g?[l,g]:l,D=0,Z=S.length;D<Z;D++)this.extend(S[D])}V.prototype={extend:function(l){var g,S;if(!l)return this;if(l instanceof G||typeof l[0]=="number"||"x"in l)g=S=I(l);else if(l=H(l),g=l.min,S=l.max,!g||!S)return this;return!this.min&&!this.max?(this.min=g.clone(),this.max=S.clone()):(this.min.x=Math.min(g.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(g.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(l){return I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return I(this.min.x,this.max.y)},getTopRight:function(){return I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var g,S;return typeof l[0]=="number"||l instanceof G?l=I(l):l=H(l),l instanceof V?(g=l.min,S=l.max):g=S=l,g.x>=this.min.x&&S.x<=this.max.x&&g.y>=this.min.y&&S.y<=this.max.y},intersects:function(l){l=H(l);var g=this.min,S=this.max,D=l.min,Z=l.max,te=Z.x>=g.x&&D.x<=S.x,fe=Z.y>=g.y&&D.y<=S.y;return te&&fe},overlaps:function(l){l=H(l);var g=this.min,S=this.max,D=l.min,Z=l.max,te=Z.x>g.x&&D.x<S.x,fe=Z.y>g.y&&D.y<S.y;return te&&fe},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var g=this.min,S=this.max,D=Math.abs(g.x-S.x)*l,Z=Math.abs(g.y-S.y)*l;return H(I(g.x-D,g.y-Z),I(S.x+D,S.y+Z))},equals:function(l){return l?(l=H(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function H(l,g){return!l||l instanceof V?l:new V(l,g)}function U(l,g){if(l)for(var S=g?[l,g]:l,D=0,Z=S.length;D<Z;D++)this.extend(S[D])}U.prototype={extend:function(l){var g=this._southWest,S=this._northEast,D,Z;if(l instanceof K)D=l,Z=l;else if(l instanceof U){if(D=l._southWest,Z=l._northEast,!D||!Z)return this}else return l?this.extend(B(l)||q(l)):this;return!g&&!S?(this._southWest=new K(D.lat,D.lng),this._northEast=new K(Z.lat,Z.lng)):(g.lat=Math.min(D.lat,g.lat),g.lng=Math.min(D.lng,g.lng),S.lat=Math.max(Z.lat,S.lat),S.lng=Math.max(Z.lng,S.lng)),this},pad:function(l){var g=this._southWest,S=this._northEast,D=Math.abs(g.lat-S.lat)*l,Z=Math.abs(g.lng-S.lng)*l;return new U(new K(g.lat-D,g.lng-Z),new K(S.lat+D,S.lng+Z))},getCenter:function(){return new K((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new K(this.getNorth(),this.getWest())},getSouthEast:function(){return new K(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof K||"lat"in l?l=B(l):l=q(l);var g=this._southWest,S=this._northEast,D,Z;return l instanceof U?(D=l.getSouthWest(),Z=l.getNorthEast()):D=Z=l,D.lat>=g.lat&&Z.lat<=S.lat&&D.lng>=g.lng&&Z.lng<=S.lng},intersects:function(l){l=q(l);var g=this._southWest,S=this._northEast,D=l.getSouthWest(),Z=l.getNorthEast(),te=Z.lat>=g.lat&&D.lat<=S.lat,fe=Z.lng>=g.lng&&D.lng<=S.lng;return te&&fe},overlaps:function(l){l=q(l);var g=this._southWest,S=this._northEast,D=l.getSouthWest(),Z=l.getNorthEast(),te=Z.lat>g.lat&&D.lat<S.lat,fe=Z.lng>g.lng&&D.lng<S.lng;return te&&fe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,g){return l?(l=q(l),this._southWest.equals(l.getSouthWest(),g)&&this._northEast.equals(l.getNorthEast(),g)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function q(l,g){return l instanceof U?l:new U(l,g)}function K(l,g,S){if(isNaN(l)||isNaN(g))throw new Error("Invalid LatLng object: ("+l+", "+g+")");this.lat=+l,this.lng=+g,S!==void 0&&(this.alt=+S)}K.prototype={equals:function(l,g){if(!l)return!1;l=B(l);var S=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return S<=(g===void 0?1e-9:g)},toString:function(l){return"LatLng("+f(this.lat,l)+", "+f(this.lng,l)+")"},distanceTo:function(l){return oe.distance(this,B(l))},wrap:function(){return oe.wrapLatLng(this)},toBounds:function(l){var g=180*l/40075017,S=g/Math.cos(Math.PI/180*this.lat);return q([this.lat-g,this.lng-S],[this.lat+g,this.lng+S])},clone:function(){return new K(this.lat,this.lng,this.alt)}};function B(l,g,S){return l instanceof K?l:_(l)&&typeof l[0]!="object"?l.length===3?new K(l[0],l[1],l[2]):l.length===2?new K(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new K(l.lat,"lng"in l?l.lng:l.lon,l.alt):g===void 0?null:new K(l,g,S)}var W={latLngToPoint:function(l,g){var S=this.projection.project(l),D=this.scale(g);return this.transformation._transform(S,D)},pointToLatLng:function(l,g){var S=this.scale(g),D=this.transformation.untransform(l,S);return this.projection.unproject(D)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var g=this.projection.bounds,S=this.scale(l),D=this.transformation.transform(g.min,S),Z=this.transformation.transform(g.max,S);return new V(D,Z)},infinite:!1,wrapLatLng:function(l){var g=this.wrapLng?m(l.lng,this.wrapLng,!0):l.lng,S=this.wrapLat?m(l.lat,this.wrapLat,!0):l.lat,D=l.alt;return new K(S,g,D)},wrapLatLngBounds:function(l){var g=l.getCenter(),S=this.wrapLatLng(g),D=g.lat-S.lat,Z=g.lng-S.lng;if(D===0&&Z===0)return l;var te=l.getSouthWest(),fe=l.getNorthEast(),_e=new K(te.lat-D,te.lng-Z),Ne=new K(fe.lat-D,fe.lng-Z);return new U(_e,Ne)}},oe=a({},W,{wrapLng:[-180,180],R:6371e3,distance:function(l,g){var S=Math.PI/180,D=l.lat*S,Z=g.lat*S,te=Math.sin((g.lat-l.lat)*S/2),fe=Math.sin((g.lng-l.lng)*S/2),_e=te*te+Math.cos(D)*Math.cos(Z)*fe*fe,Ne=2*Math.atan2(Math.sqrt(_e),Math.sqrt(1-_e));return this.R*Ne}}),X=6378137,re={R:X,MAX_LATITUDE:85.0511287798,project:function(l){var g=Math.PI/180,S=this.MAX_LATITUDE,D=Math.max(Math.min(S,l.lat),-S),Z=Math.sin(D*g);return new G(this.R*l.lng*g,this.R*Math.log((1+Z)/(1-Z))/2)},unproject:function(l){var g=180/Math.PI;return new K((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*g,l.x*g/this.R)},bounds:function(){var l=X*Math.PI;return new V([-l,-l],[l,l])}()};function ue(l,g,S,D){if(_(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=g,this._c=S,this._d=D}ue.prototype={transform:function(l,g){return this._transform(l.clone(),g)},_transform:function(l,g){return g=g||1,l.x=g*(this._a*l.x+this._b),l.y=g*(this._c*l.y+this._d),l},untransform:function(l,g){return g=g||1,new G((l.x/g-this._b)/this._a,(l.y/g-this._d)/this._c)}};function me(l,g,S,D){return new ue(l,g,S,D)}var we=a({},oe,{code:"EPSG:3857",projection:re,transformation:function(){var l=.5/(Math.PI*re.R);return me(l,.5,-l,.5)}()}),be=a({},we,{code:"EPSG:900913"});function ae(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function ee(l,g){var S="",D,Z,te,fe,_e,Ne;for(D=0,te=l.length;D<te;D++){for(_e=l[D],Z=0,fe=_e.length;Z<fe;Z++)Ne=_e[Z],S+=(Z?"L":"M")+Ne.x+" "+Ne.y;S+=g?it.svg?"z":"x":""}return S||"M0 0"}var ye=document.documentElement.style,le="ActiveXObject"in window,de=le&&!document.addEventListener,Q="msLaunchUri"in navigator&&!("documentMode"in document),se=on("webkit"),ne=on("android"),ve=on("android 2")||on("android 3"),pe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ge=ne&&on("Google")&&pe<537&&!("AudioNode"in window),ke=!!window.opera,Be=!Q&&on("chrome"),qe=on("gecko")&&!se&&!ke&&!le,gt=!Be&&on("safari"),ct=on("phantom"),Xe="OTransition"in ye,ce=navigator.platform.indexOf("Win")===0,Te=le&&"transition"in ye,Ue="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ve,mt="MozPerspective"in ye,Ie=!window.L_DISABLE_3D&&(Te||Ue||mt)&&!Xe&&!ct,ht=typeof orientation<"u"||on("mobile"),gs=ht&&se,Os=ht&&Ue,xn=!window.PointerEvent&&window.MSPointerEvent,vn=!!(window.PointerEvent||xn),Fa="ontouchstart"in window||!!window.TouchEvent,he=!window.L_NO_TOUCH&&(Fa||vn),rt=ht&&ke,Le=ht&&qe,Ze=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,at=function(){var l=!1;try{var g=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",u,g),window.removeEventListener("testPassiveEventSupport",u,g)}catch{}return l}(),et=function(){return!!document.createElement("canvas").getContext}(),kt=!!(document.createElementNS&&ae("svg").createSVGRect),Wt=!!kt&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Rs=!kt&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var g=l.firstChild;return g.style.behavior="url(#default#VML)",g&&typeof g.adj=="object"}catch{return!1}}(),is=navigator.platform.indexOf("Mac")===0,zs=navigator.platform.indexOf("Linux")===0;function on(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var it={ie:le,ielt9:de,edge:Q,webkit:se,android:ne,android23:ve,androidStock:ge,opera:ke,chrome:Be,gecko:qe,safari:gt,phantom:ct,opera12:Xe,win:ce,ie3d:Te,webkit3d:Ue,gecko3d:mt,any3d:Ie,mobile:ht,mobileWebkit:gs,mobileWebkit3d:Os,msPointer:xn,pointer:vn,touch:he,touchNative:Fa,mobileOpera:rt,mobileGecko:Le,retina:Ze,passiveEvents:at,canvas:et,svg:kt,vml:Rs,inlineSvg:Wt,mac:is,linux:zs},Ut=it.msPointer?"MSPointerDown":"pointerdown",Yn=it.msPointer?"MSPointerMove":"pointermove",lr=it.msPointer?"MSPointerUp":"pointerup",ta=it.msPointer?"MSPointerCancel":"pointercancel",Xn={touchstart:Ut,touchmove:Yn,touchend:lr,touchcancel:ta},hj={touchstart:b5,touchmove:bh,touchend:bh,touchcancel:bh},fl={},fj=!1;function p5(l,g,S){return g==="touchstart"&&y5(),hj[g]?(S=hj[g].bind(this,S),l.addEventListener(Xn[g],S,!1),S):(console.warn("wrong event specified:",g),u)}function g5(l,g,S){if(!Xn[g]){console.warn("wrong event specified:",g);return}l.removeEventListener(Xn[g],S,!1)}function x5(l){fl[l.pointerId]=l}function v5(l){fl[l.pointerId]&&(fl[l.pointerId]=l)}function mj(l){delete fl[l.pointerId]}function y5(){fj||(document.addEventListener(Ut,x5,!0),document.addEventListener(Yn,v5,!0),document.addEventListener(lr,mj,!0),document.addEventListener(ta,mj,!0),fj=!0)}function bh(l,g){if(g.pointerType!==(g.MSPOINTER_TYPE_MOUSE||"mouse")){g.touches=[];for(var S in fl)g.touches.push(fl[S]);g.changedTouches=[g],l(g)}}function b5(l,g){g.MSPOINTER_TYPE_TOUCH&&g.pointerType===g.MSPOINTER_TYPE_TOUCH&&Js(g),bh(l,g)}function w5(l){var g={},S,D;for(D in l)S=l[D],g[D]=S&&S.bind?S.bind(l):S;return l=g,g.type="dblclick",g.detail=2,g.isTrusted=!1,g._simulated=!0,g}var j5=200;function _5(l,g){l.addEventListener("dblclick",g);var S=0,D;function Z(te){if(te.detail!==1){D=te.detail;return}if(!(te.pointerType==="mouse"||te.sourceCapabilities&&!te.sourceCapabilities.firesTouchEvents)){var fe=yj(te);if(!(fe.some(function(Ne){return Ne instanceof HTMLLabelElement&&Ne.attributes.for})&&!fe.some(function(Ne){return Ne instanceof HTMLInputElement||Ne instanceof HTMLSelectElement}))){var _e=Date.now();_e-S<=j5?(D++,D===2&&g(w5(te))):D=1,S=_e}}}return l.addEventListener("click",Z),{dblclick:g,simDblclick:Z}}function N5(l,g){l.removeEventListener("dblclick",g.dblclick),l.removeEventListener("click",g.simDblclick)}var hg=_h(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ud=_h(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pj=ud==="webkitTransition"||ud==="OTransition"?ud+"End":"transitionend";function gj(l){return typeof l=="string"?document.getElementById(l):l}function hd(l,g){var S=l.style[g]||l.currentStyle&&l.currentStyle[g];if((!S||S==="auto")&&document.defaultView){var D=document.defaultView.getComputedStyle(l,null);S=D?D[g]:null}return S==="auto"?null:S}function Dt(l,g,S){var D=document.createElement(l);return D.className=g||"",S&&S.appendChild(D),D}function ds(l){var g=l.parentNode;g&&g.removeChild(l)}function wh(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function ml(l){var g=l.parentNode;g&&g.lastChild!==l&&g.appendChild(l)}function pl(l){var g=l.parentNode;g&&g.firstChild!==l&&g.insertBefore(l,g.firstChild)}function fg(l,g){if(l.classList!==void 0)return l.classList.contains(g);var S=jh(l);return S.length>0&&new RegExp("(^|\\s)"+g+"(\\s|$)").test(S)}function Ct(l,g){if(l.classList!==void 0)for(var S=x(g),D=0,Z=S.length;D<Z;D++)l.classList.add(S[D]);else if(!fg(l,g)){var te=jh(l);mg(l,(te?te+" ":"")+g)}}function _s(l,g){l.classList!==void 0?l.classList.remove(g):mg(l,p((" "+jh(l)+" ").replace(" "+g+" "," ")))}function mg(l,g){l.className.baseVal===void 0?l.className=g:l.className.baseVal=g}function jh(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function cr(l,g){"opacity"in l.style?l.style.opacity=g:"filter"in l.style&&S5(l,g)}function S5(l,g){var S=!1,D="DXImageTransform.Microsoft.Alpha";try{S=l.filters.item(D)}catch{if(g===1)return}g=Math.round(g*100),S?(S.Enabled=g!==100,S.Opacity=g):l.style.filter+=" progid:"+D+"(opacity="+g+")"}function _h(l){for(var g=document.documentElement.style,S=0;S<l.length;S++)if(l[S]in g)return l[S];return!1}function po(l,g,S){var D=g||new G(0,0);l.style[hg]=(it.ie3d?"translate("+D.x+"px,"+D.y+"px)":"translate3d("+D.x+"px,"+D.y+"px,0)")+(S?" scale("+S+")":"")}function Ls(l,g){l._leaflet_pos=g,it.any3d?po(l,g):(l.style.left=g.x+"px",l.style.top=g.y+"px")}function go(l){return l._leaflet_pos||new G(0,0)}var fd,md,pg;if("onselectstart"in document)fd=function(){jt(window,"selectstart",Js)},md=function(){Jt(window,"selectstart",Js)};else{var pd=_h(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);fd=function(){if(pd){var l=document.documentElement.style;pg=l[pd],l[pd]="none"}},md=function(){pd&&(document.documentElement.style[pd]=pg,pg=void 0)}}function gg(){jt(window,"dragstart",Js)}function xg(){Jt(window,"dragstart",Js)}var Nh,vg;function yg(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(Sh(),Nh=l,vg=l.style.outlineStyle,l.style.outlineStyle="none",jt(window,"keydown",Sh))}function Sh(){Nh&&(Nh.style.outlineStyle=vg,Nh=void 0,vg=void 0,Jt(window,"keydown",Sh))}function xj(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function bg(l){var g=l.getBoundingClientRect();return{x:g.width/l.offsetWidth||1,y:g.height/l.offsetHeight||1,boundingClientRect:g}}var k5={__proto__:null,TRANSFORM:hg,TRANSITION:ud,TRANSITION_END:pj,get:gj,getStyle:hd,create:Dt,remove:ds,empty:wh,toFront:ml,toBack:pl,hasClass:fg,addClass:Ct,removeClass:_s,setClass:mg,getClass:jh,setOpacity:cr,testProp:_h,setTransform:po,setPosition:Ls,getPosition:go,get disableTextSelection(){return fd},get enableTextSelection(){return md},disableImageDrag:gg,enableImageDrag:xg,preventOutline:yg,restoreOutline:Sh,getSizedParentNode:xj,getScale:bg};function jt(l,g,S,D){if(g&&typeof g=="object")for(var Z in g)jg(l,Z,g[Z],S);else{g=x(g);for(var te=0,fe=g.length;te<fe;te++)jg(l,g[te],S,D)}return this}var sa="_leaflet_events";function Jt(l,g,S,D){if(arguments.length===1)vj(l),delete l[sa];else if(g&&typeof g=="object")for(var Z in g)_g(l,Z,g[Z],S);else if(g=x(g),arguments.length===2)vj(l,function(_e){return N(g,_e)!==-1});else for(var te=0,fe=g.length;te<fe;te++)_g(l,g[te],S,D);return this}function vj(l,g){for(var S in l[sa]){var D=S.split(/\d/)[0];(!g||g(D))&&_g(l,D,null,null,S)}}var wg={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function jg(l,g,S,D){var Z=g+d(S)+(D?"_"+d(D):"");if(l[sa]&&l[sa][Z])return this;var te=function(_e){return S.call(D||l,_e||window.event)},fe=te;!it.touchNative&&it.pointer&&g.indexOf("touch")===0?te=p5(l,g,te):it.touch&&g==="dblclick"?te=_5(l,te):"addEventListener"in l?g==="touchstart"||g==="touchmove"||g==="wheel"||g==="mousewheel"?l.addEventListener(wg[g]||g,te,it.passiveEvents?{passive:!1}:!1):g==="mouseenter"||g==="mouseleave"?(te=function(_e){_e=_e||window.event,Sg(l,_e)&&fe(_e)},l.addEventListener(wg[g],te,!1)):l.addEventListener(g,fe,!1):l.attachEvent("on"+g,te),l[sa]=l[sa]||{},l[sa][Z]=te}function _g(l,g,S,D,Z){Z=Z||g+d(S)+(D?"_"+d(D):"");var te=l[sa]&&l[sa][Z];if(!te)return this;!it.touchNative&&it.pointer&&g.indexOf("touch")===0?g5(l,g,te):it.touch&&g==="dblclick"?N5(l,te):"removeEventListener"in l?l.removeEventListener(wg[g]||g,te,!1):l.detachEvent("on"+g,te),l[sa][Z]=null}function xo(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function Ng(l){return jg(l,"wheel",xo),this}function gd(l){return jt(l,"mousedown touchstart dblclick contextmenu",xo),l._leaflet_disable_click=!0,this}function Js(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function vo(l){return Js(l),xo(l),this}function yj(l){if(l.composedPath)return l.composedPath();for(var g=[],S=l.target;S;)g.push(S),S=S.parentNode;return g}function bj(l,g){if(!g)return new G(l.clientX,l.clientY);var S=bg(g),D=S.boundingClientRect;return new G((l.clientX-D.left)/S.x-g.clientLeft,(l.clientY-D.top)/S.y-g.clientTop)}var C5=it.linux&&it.chrome?window.devicePixelRatio:it.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function wj(l){return it.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/C5:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Sg(l,g){var S=g.relatedTarget;if(!S)return!0;try{for(;S&&S!==l;)S=S.parentNode}catch{return!1}return S!==l}var P5={__proto__:null,on:jt,off:Jt,stopPropagation:xo,disableScrollPropagation:Ng,disableClickPropagation:gd,preventDefault:Js,stop:vo,getPropagationPath:yj,getMousePosition:bj,getWheelDelta:wj,isExternalTarget:Sg,addListener:jt,removeListener:Jt},jj=J.extend({run:function(l,g,S,D){this.stop(),this._el=l,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(D||.5,.2),this._startPos=go(l),this._offset=g.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=A(this._animate,this),this._step()},_step:function(l){var g=+new Date-this._startTime,S=this._duration*1e3;g<S?this._runFrame(this._easeOut(g/S),l):(this._runFrame(1),this._complete())},_runFrame:function(l,g){var S=this._startPos.add(this._offset.multiplyBy(l));g&&S._round(),Ls(this._el,S),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Lt=J.extend({options:{crs:we,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,g){g=v(this,g),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),g.maxBounds&&this.setMaxBounds(g.maxBounds),g.zoom!==void 0&&(this._zoom=this._limitZoom(g.zoom)),g.center&&g.zoom!==void 0&&this.setView(B(g.center),g.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ud&&it.any3d&&!it.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),jt(this._proxy,pj,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,g,S){if(g=g===void 0?this._zoom:this._limitZoom(g),l=this._limitCenter(B(l),g,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=a({animate:S.animate},S.zoom),S.pan=a({animate:S.animate,duration:S.duration},S.pan));var D=this._zoom!==g?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,g,S.zoom):this._tryAnimatedPan(l,S.pan);if(D)return clearTimeout(this._sizeTimer),this}return this._resetView(l,g,S.pan&&S.pan.noMoveStart),this},setZoom:function(l,g){return this._loaded?this.setView(this.getCenter(),l,{zoom:g}):(this._zoom=l,this)},zoomIn:function(l,g){return l=l||(it.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,g)},zoomOut:function(l,g){return l=l||(it.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,g)},setZoomAround:function(l,g,S){var D=this.getZoomScale(g),Z=this.getSize().divideBy(2),te=l instanceof G?l:this.latLngToContainerPoint(l),fe=te.subtract(Z).multiplyBy(1-1/D),_e=this.containerPointToLatLng(Z.add(fe));return this.setView(_e,g,{zoom:S})},_getBoundsCenterZoom:function(l,g){g=g||{},l=l.getBounds?l.getBounds():q(l);var S=I(g.paddingTopLeft||g.padding||[0,0]),D=I(g.paddingBottomRight||g.padding||[0,0]),Z=this.getBoundsZoom(l,!1,S.add(D));if(Z=typeof g.maxZoom=="number"?Math.min(g.maxZoom,Z):Z,Z===1/0)return{center:l.getCenter(),zoom:Z};var te=D.subtract(S).divideBy(2),fe=this.project(l.getSouthWest(),Z),_e=this.project(l.getNorthEast(),Z),Ne=this.unproject(fe.add(_e).divideBy(2).add(te),Z);return{center:Ne,zoom:Z}},fitBounds:function(l,g){if(l=q(l),!l.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(l,g);return this.setView(S.center,S.zoom,g)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,g){return this.setView(l,this._zoom,{pan:g})},panBy:function(l,g){if(l=I(l).round(),g=g||{},!l.x&&!l.y)return this.fire("moveend");if(g.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jj,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),g.noMoveStart||this.fire("movestart"),g.animate!==!1){Ct(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,S,g.duration||.25,g.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,g,S){if(S=S||{},S.animate===!1||!it.any3d)return this.setView(l,g,S);this._stop();var D=this.project(this.getCenter()),Z=this.project(l),te=this.getSize(),fe=this._zoom;l=B(l),g=g===void 0?fe:g;var _e=Math.max(te.x,te.y),Ne=_e*this.getZoomScale(fe,g),Ae=Z.distanceTo(D)||1,Ke=1.42,ft=Ke*Ke;function Tt(Ms){var Dh=Ms?-1:1,g3=Ms?Ne:_e,x3=Ne*Ne-_e*_e+Dh*ft*ft*Ae*Ae,v3=2*g3*ft*Ae,Ig=x3/v3,s_=Math.sqrt(Ig*Ig+1)-Ig,y3=s_<1e-9?-18:Math.log(s_);return y3}function yn(Ms){return(Math.exp(Ms)-Math.exp(-Ms))/2}function Zs(Ms){return(Math.exp(Ms)+Math.exp(-Ms))/2}function ur(Ms){return yn(Ms)/Zs(Ms)}var Mn=Tt(0);function wl(Ms){return _e*(Zs(Mn)/Zs(Mn+Ke*Ms))}function h3(Ms){return _e*(Zs(Mn)*ur(Mn+Ke*Ms)-yn(Mn))/ft}function f3(Ms){return 1-Math.pow(1-Ms,1.5)}var m3=Date.now(),e_=(Tt(1)-Mn)/Ke,p3=S.duration?1e3*S.duration:1e3*e_*.8;function t_(){var Ms=(Date.now()-m3)/p3,Dh=f3(Ms)*e_;Ms<=1?(this._flyToFrame=A(t_,this),this._move(this.unproject(D.add(Z.subtract(D).multiplyBy(h3(Dh)/Ae)),fe),this.getScaleZoom(_e/wl(Dh),fe),{flyTo:!0})):this._move(l,g)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),t_.call(this),this},flyToBounds:function(l,g){var S=this._getBoundsCenterZoom(l,g);return this.flyTo(S.center,S.zoom,g)},setMaxBounds:function(l){return l=q(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var g=this.options.minZoom;return this.options.minZoom=l,this._loaded&&g!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var g=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&g!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,g){this._enforcingBounds=!0;var S=this.getCenter(),D=this._limitCenter(S,this._zoom,q(l));return S.equals(D)||this.panTo(D,g),this._enforcingBounds=!1,this},panInside:function(l,g){g=g||{};var S=I(g.paddingTopLeft||g.padding||[0,0]),D=I(g.paddingBottomRight||g.padding||[0,0]),Z=this.project(this.getCenter()),te=this.project(l),fe=this.getPixelBounds(),_e=H([fe.min.add(S),fe.max.subtract(D)]),Ne=_e.getSize();if(!_e.contains(te)){this._enforcingBounds=!0;var Ae=te.subtract(_e.getCenter()),Ke=_e.extend(te).getSize().subtract(Ne);Z.x+=Ae.x<0?-Ke.x:Ke.x,Z.y+=Ae.y<0?-Ke.y:Ke.y,this.panTo(this.unproject(Z),g),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=a({animate:!1,pan:!0},l===!0?{animate:!0}:l);var g=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),D=g.divideBy(2).round(),Z=S.divideBy(2).round(),te=D.subtract(Z);return!te.x&&!te.y?this:(l.animate&&l.pan?this.panBy(te):(l.pan&&this._rawPanBy(te),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:g,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=a({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var g=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(g,S,l):navigator.geolocation.getCurrentPosition(g,S,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var g=l.code,S=l.message||(g===1?"permission denied":g===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:g,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var g=l.coords.latitude,S=l.coords.longitude,D=new K(g,S),Z=D.toBounds(l.coords.accuracy*2),te=this._locateOptions;if(te.setView){var fe=this.getBoundsZoom(Z);this.setView(D,te.maxZoom?Math.min(fe,te.maxZoom):fe)}var _e={latlng:D,bounds:Z,timestamp:l.timestamp};for(var Ne in l.coords)typeof l.coords[Ne]=="number"&&(_e[Ne]=l.coords[Ne]);this.fire("locationfound",_e)}},addHandler:function(l,g){if(!g)return this;var S=this[l]=new g(this);return this._handlers.push(S),this.options[l]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ds(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)ds(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,g){var S="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),D=Dt("div",S,g||this._mapPane);return l&&(this._panes[l]=D),D},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),g=this.unproject(l.getBottomLeft()),S=this.unproject(l.getTopRight());return new U(g,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,g,S){l=q(l),S=I(S||[0,0]);var D=this.getZoom()||0,Z=this.getMinZoom(),te=this.getMaxZoom(),fe=l.getNorthWest(),_e=l.getSouthEast(),Ne=this.getSize().subtract(S),Ae=H(this.project(_e,D),this.project(fe,D)).getSize(),Ke=it.any3d?this.options.zoomSnap:1,ft=Ne.x/Ae.x,Tt=Ne.y/Ae.y,yn=g?Math.max(ft,Tt):Math.min(ft,Tt);return D=this.getScaleZoom(yn,D),Ke&&(D=Math.round(D/(Ke/100))*(Ke/100),D=g?Math.ceil(D/Ke)*Ke:Math.floor(D/Ke)*Ke),Math.max(Z,Math.min(te,D))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,g){var S=this._getTopLeftPoint(l,g);return new V(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,g){var S=this.options.crs;return g=g===void 0?this._zoom:g,S.scale(l)/S.scale(g)},getScaleZoom:function(l,g){var S=this.options.crs;g=g===void 0?this._zoom:g;var D=S.zoom(l*S.scale(g));return isNaN(D)?1/0:D},project:function(l,g){return g=g===void 0?this._zoom:g,this.options.crs.latLngToPoint(B(l),g)},unproject:function(l,g){return g=g===void 0?this._zoom:g,this.options.crs.pointToLatLng(I(l),g)},layerPointToLatLng:function(l){var g=I(l).add(this.getPixelOrigin());return this.unproject(g)},latLngToLayerPoint:function(l){var g=this.project(B(l))._round();return g._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(B(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(q(l))},distance:function(l,g){return this.options.crs.distance(B(l),B(g))},containerPointToLayerPoint:function(l){return I(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return I(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var g=this.containerPointToLayerPoint(I(l));return this.layerPointToLatLng(g)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(l)))},mouseEventToContainerPoint:function(l){return bj(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var g=this._container=gj(l);if(g){if(g._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");jt(g,"scroll",this._onScroll,this),this._containerId=d(g)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&it.any3d,Ct(l,"leaflet-container"+(it.touch?" leaflet-touch":"")+(it.retina?" leaflet-retina":"")+(it.ielt9?" leaflet-oldie":"")+(it.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var g=hd(l,"position");g!=="absolute"&&g!=="relative"&&g!=="fixed"&&g!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ls(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ct(l.markerPane,"leaflet-zoom-hide"),Ct(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,g,S){Ls(this._mapPane,new G(0,0));var D=!this._loaded;this._loaded=!0,g=this._limitZoom(g),this.fire("viewprereset");var Z=this._zoom!==g;this._moveStart(Z,S)._move(l,g)._moveEnd(Z),this.fire("viewreset"),D&&this.fire("load")},_moveStart:function(l,g){return l&&this.fire("zoomstart"),g||this.fire("movestart"),this},_move:function(l,g,S,D){g===void 0&&(g=this._zoom);var Z=this._zoom!==g;return this._zoom=g,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),D?S&&S.pinch&&this.fire("zoom",S):((Z||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){Ls(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[d(this._container)]=this;var g=l?Jt:jt;g(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&g(window,"resize",this._onResize,this),it.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=A(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,g){for(var S=[],D,Z=g==="mouseout"||g==="mouseover",te=l.target||l.srcElement,fe=!1;te;){if(D=this._targets[d(te)],D&&(g==="click"||g==="preclick")&&this._draggableMoved(D)){fe=!0;break}if(D&&D.listens(g,!0)&&(Z&&!Sg(te,l)||(S.push(D),Z))||te===this._container)break;te=te.parentNode}return!S.length&&!fe&&!Z&&this.listens(g,!0)&&(S=[this]),S},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var g=l.target||l.srcElement;if(!(!this._loaded||g._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(g))){var S=l.type;S==="mousedown"&&yg(g),this._fireDOMEvent(l,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,g,S){if(l.type==="click"){var D=a({},l);D.type="preclick",this._fireDOMEvent(D,D.type,S)}var Z=this._findEventTargets(l,g);if(S){for(var te=[],fe=0;fe<S.length;fe++)S[fe].listens(g,!0)&&te.push(S[fe]);Z=te.concat(Z)}if(Z.length){g==="contextmenu"&&Js(l);var _e=Z[0],Ne={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Ae=_e.getLatLng&&(!_e._radius||_e._radius<=10);Ne.containerPoint=Ae?this.latLngToContainerPoint(_e.getLatLng()):this.mouseEventToContainerPoint(l),Ne.layerPoint=this.containerPointToLayerPoint(Ne.containerPoint),Ne.latlng=Ae?_e.getLatLng():this.layerPointToLatLng(Ne.layerPoint)}for(fe=0;fe<Z.length;fe++)if(Z[fe].fire(g,Ne,!0),Ne.originalEvent._stopped||Z[fe].options.bubblingMouseEvents===!1&&N(this._mouseEvents,g)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,g=this._handlers.length;l<g;l++)this._handlers[l].disable()},whenReady:function(l,g){return this._loaded?l.call(g||this,{target:this}):this.on("load",l,g),this},_getMapPanePos:function(){return go(this._mapPane)||new G(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,g){var S=l&&g!==void 0?this._getNewPixelOrigin(l,g):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,g){var S=this.getSize()._divideBy(2);return this.project(l,g)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,g,S){var D=this._getNewPixelOrigin(S,g);return this.project(l,g)._subtract(D)},_latLngBoundsToNewLayerBounds:function(l,g,S){var D=this._getNewPixelOrigin(S,g);return H([this.project(l.getSouthWest(),g)._subtract(D),this.project(l.getNorthWest(),g)._subtract(D),this.project(l.getSouthEast(),g)._subtract(D),this.project(l.getNorthEast(),g)._subtract(D)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,g,S){if(!S)return l;var D=this.project(l,g),Z=this.getSize().divideBy(2),te=new V(D.subtract(Z),D.add(Z)),fe=this._getBoundsOffset(te,S,g);return Math.abs(fe.x)<=1&&Math.abs(fe.y)<=1?l:this.unproject(D.add(fe),g)},_limitOffset:function(l,g){if(!g)return l;var S=this.getPixelBounds(),D=new V(S.min.add(l),S.max.add(l));return l.add(this._getBoundsOffset(D,g))},_getBoundsOffset:function(l,g,S){var D=H(this.project(g.getNorthEast(),S),this.project(g.getSouthWest(),S)),Z=D.min.subtract(l.min),te=D.max.subtract(l.max),fe=this._rebound(Z.x,-te.x),_e=this._rebound(Z.y,-te.y);return new G(fe,_e)},_rebound:function(l,g){return l+g>0?Math.round(l-g)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(g))},_limitZoom:function(l){var g=this.getMinZoom(),S=this.getMaxZoom(),D=it.any3d?this.options.zoomSnap:1;return D&&(l=Math.round(l/D)*D),Math.max(g,Math.min(S,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){_s(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,g){var S=this._getCenterOffset(l)._trunc();return(g&&g.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,g),!0)},_createAnimProxy:function(){var l=this._proxy=Dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(g){var S=hg,D=this._proxy.style[S];po(this._proxy,this.project(g.center,g.zoom),this.getZoomScale(g.zoom,1)),D===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ds(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),g=this.getZoom();po(this._proxy,this.project(l,g),this.getZoomScale(g,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,g,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(g-this._zoom)>this.options.zoomAnimationThreshold)return!1;var D=this.getZoomScale(g),Z=this._getCenterOffset(l)._divideBy(1-1/D);return S.animate!==!0&&!this.getSize().contains(Z)?!1:(A(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(l,g,!0)},this),!0)},_animateZoom:function(l,g,S,D){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=g,Ct(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:g,noUpdate:D}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&_s(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function E5(l,g){return new Lt(l,g)}var Cr=P.extend({options:{position:"topright"},initialize:function(l){v(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var g=this._map;return g&&g.removeControl(this),this.options.position=l,g&&g.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var g=this._container=this.onAdd(l),S=this.getPosition(),D=l._controlCorners[S];return Ct(g,"leaflet-control"),S.indexOf("bottom")!==-1?D.insertBefore(g,D.firstChild):D.appendChild(g),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ds(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),xd=function(l){return new Cr(l)};Lt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},g="leaflet-",S=this._controlContainer=Dt("div",g+"control-container",this._container);function D(Z,te){var fe=g+Z+" "+g+te;l[Z+te]=Dt("div",fe,S)}D("top","left"),D("top","right"),D("bottom","left"),D("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)ds(this._controlCorners[l]);ds(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _j=Cr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,g,S,D){return S<D?-1:D<S?1:0}},initialize:function(l,g,S){v(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var D in l)this._addLayer(l[D],D);for(D in g)this._addLayer(g[D],D,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return Cr.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,g){return this._addLayer(l,g),this._map?this._update():this},addOverlay:function(l,g){return this._addLayer(l,g,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var g=this._getLayer(d(l));return g&&this._layers.splice(this._layers.indexOf(g),1),this._map?this._update():this},expand:function(){Ct(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Ct(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):_s(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return _s(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",g=this._container=Dt("div",l),S=this.options.collapsed;g.setAttribute("aria-haspopup",!0),gd(g),Ng(g);var D=this._section=Dt("section",l+"-list");S&&(this._map.on("click",this.collapse,this),jt(g,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var Z=this._layersLink=Dt("a",l+"-toggle",g);Z.href="#",Z.title="Layers",Z.setAttribute("role","button"),jt(Z,{keydown:function(te){te.keyCode===13&&this._expandSafely()},click:function(te){Js(te),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=Dt("div",l+"-base",D),this._separator=Dt("div",l+"-separator",D),this._overlaysList=Dt("div",l+"-overlays",D),g.appendChild(D)},_getLayer:function(l){for(var g=0;g<this._layers.length;g++)if(this._layers[g]&&d(this._layers[g].layer)===l)return this._layers[g]},_addLayer:function(l,g,S){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:g,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(D,Z){return this.options.sortFunction(D.layer,Z.layer,D.name,Z.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;wh(this._baseLayersList),wh(this._overlaysList),this._layerControlInputs=[];var l,g,S,D,Z=0;for(S=0;S<this._layers.length;S++)D=this._layers[S],this._addItem(D),g=g||D.overlay,l=l||!D.overlay,Z+=D.overlay?0:1;return this.options.hideSingleBase&&(l=l&&Z>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=g&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var g=this._getLayer(d(l.target)),S=g.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;S&&this._map.fire(S,g)},_createRadioElement:function(l,g){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(g?' checked="checked"':"")+"/>",D=document.createElement("div");return D.innerHTML=S,D.firstChild},_addItem:function(l){var g=document.createElement("label"),S=this._map.hasLayer(l.layer),D;l.overlay?(D=document.createElement("input"),D.type="checkbox",D.className="leaflet-control-layers-selector",D.defaultChecked=S):D=this._createRadioElement("leaflet-base-layers_"+d(this),S),this._layerControlInputs.push(D),D.layerId=d(l.layer),jt(D,"click",this._onInputClick,this);var Z=document.createElement("span");Z.innerHTML=" "+l.name;var te=document.createElement("span");g.appendChild(te),te.appendChild(D),te.appendChild(Z);var fe=l.overlay?this._overlaysList:this._baseLayersList;return fe.appendChild(g),this._checkDisabledLayers(),g},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,g,S,D=[],Z=[];this._handlingClick=!0;for(var te=l.length-1;te>=0;te--)g=l[te],S=this._getLayer(g.layerId).layer,g.checked?D.push(S):g.checked||Z.push(S);for(te=0;te<Z.length;te++)this._map.hasLayer(Z[te])&&this._map.removeLayer(Z[te]);for(te=0;te<D.length;te++)this._map.hasLayer(D[te])||this._map.addLayer(D[te]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,g,S,D=this._map.getZoom(),Z=l.length-1;Z>=0;Z--)g=l[Z],S=this._getLayer(g.layerId).layer,g.disabled=S.options.minZoom!==void 0&&D<S.options.minZoom||S.options.maxZoom!==void 0&&D>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,jt(l,"click",Js),this.expand();var g=this;setTimeout(function(){Jt(l,"click",Js),g._preventClick=!1})}}),T5=function(l,g,S){return new _j(l,g,S)},kg=Cr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var g="leaflet-control-zoom",S=Dt("div",g+" leaflet-bar"),D=this.options;return this._zoomInButton=this._createButton(D.zoomInText,D.zoomInTitle,g+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(D.zoomOutText,D.zoomOutTitle,g+"-out",S,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,g,S,D,Z){var te=Dt("a",S,D);return te.innerHTML=l,te.href="#",te.title=g,te.setAttribute("role","button"),te.setAttribute("aria-label",g),gd(te),jt(te,"click",vo),jt(te,"click",Z,this),jt(te,"click",this._refocusOnMap,this),te},_updateDisabled:function(){var l=this._map,g="leaflet-disabled";_s(this._zoomInButton,g),_s(this._zoomOutButton,g),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Ct(this._zoomOutButton,g),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Ct(this._zoomInButton,g),this._zoomInButton.setAttribute("aria-disabled","true"))}});Lt.mergeOptions({zoomControl:!0}),Lt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new kg,this.addControl(this.zoomControl))});var A5=function(l){return new kg(l)},Nj=Cr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var g="leaflet-control-scale",S=Dt("div",g),D=this.options;return this._addScales(D,g+"-line",S),l.on(D.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),S},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,g,S){l.metric&&(this._mScale=Dt("div",g,S)),l.imperial&&(this._iScale=Dt("div",g,S))},_update:function(){var l=this._map,g=l.getSize().y/2,S=l.distance(l.containerPointToLatLng([0,g]),l.containerPointToLatLng([this.options.maxWidth,g]));this._updateScales(S)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var g=this._getRoundNum(l),S=g<1e3?g+" m":g/1e3+" km";this._updateScale(this._mScale,S,g/l)},_updateImperial:function(l){var g=l*3.2808399,S,D,Z;g>5280?(S=g/5280,D=this._getRoundNum(S),this._updateScale(this._iScale,D+" mi",D/S)):(Z=this._getRoundNum(g),this._updateScale(this._iScale,Z+" ft",Z/g))},_updateScale:function(l,g,S){l.style.width=Math.round(this.options.maxWidth*S)+"px",l.innerHTML=g},_getRoundNum:function(l){var g=Math.pow(10,(Math.floor(l)+"").length-1),S=l/g;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,g*S}}),O5=function(l){return new Nj(l)},R5='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Cg=Cr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(it.inlineSvg?R5+" ":"")+"Leaflet</a>"},initialize:function(l){v(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Dt("div","leaflet-control-attribution"),gd(this._container);for(var g in l._layers)l._layers[g].getAttribution&&this.addAttribution(l._layers[g].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var g in this._attributions)this._attributions[g]&&l.push(g);var S=[];this.options.prefix&&S.push(this.options.prefix),l.length&&S.push(l.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Lt.mergeOptions({attributionControl:!0}),Lt.addInitHook(function(){this.options.attributionControl&&new Cg().addTo(this)});var L5=function(l){return new Cg(l)};Cr.Layers=_j,Cr.Zoom=kg,Cr.Scale=Nj,Cr.Attribution=Cg,xd.layers=T5,xd.zoom=A5,xd.scale=O5,xd.attribution=L5;var na=P.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});na.addTo=function(l,g){return l.addHandler(g,this),this};var M5={Events:Y},Sj=it.touch?"touchstart mousedown":"mousedown",gi=J.extend({options:{clickTolerance:3},initialize:function(l,g,S,D){v(this,D),this._element=l,this._dragStartTarget=g||l,this._preventOutline=S},enable:function(){this._enabled||(jt(this._dragStartTarget,Sj,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(gi._dragging===this&&this.finishDrag(!0),Jt(this._dragStartTarget,Sj,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!fg(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){gi._dragging===this&&this.finishDrag();return}if(!(gi._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(gi._dragging=this,this._preventOutline&&yg(this._element),gg(),fd(),!this._moving)){this.fire("down");var g=l.touches?l.touches[0]:l,S=xj(this._element);this._startPoint=new G(g.clientX,g.clientY),this._startPos=go(this._element),this._parentScale=bg(S);var D=l.type==="mousedown";jt(document,D?"mousemove":"touchmove",this._onMove,this),jt(document,D?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var g=l.touches&&l.touches.length===1?l.touches[0]:l,S=new G(g.clientX,g.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,Js(l),this._moved||(this.fire("dragstart"),this._moved=!0,Ct(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ct(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),Ls(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){_s(document.body,"leaflet-dragging"),this._lastTarget&&(_s(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Jt(document,"mousemove touchmove",this._onMove,this),Jt(document,"mouseup touchend touchcancel",this._onUp,this),xg(),md();var g=this._moved&&this._moving;this._moving=!1,gi._dragging=!1,g&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function kj(l,g,S){var D,Z=[1,4,2,8],te,fe,_e,Ne,Ae,Ke,ft,Tt;for(te=0,Ke=l.length;te<Ke;te++)l[te]._code=yo(l[te],g);for(_e=0;_e<4;_e++){for(ft=Z[_e],D=[],te=0,Ke=l.length,fe=Ke-1;te<Ke;fe=te++)Ne=l[te],Ae=l[fe],Ne._code&ft?Ae._code&ft||(Tt=kh(Ae,Ne,ft,g,S),Tt._code=yo(Tt,g),D.push(Tt)):(Ae._code&ft&&(Tt=kh(Ae,Ne,ft,g,S),Tt._code=yo(Tt,g),D.push(Tt)),D.push(Ne));l=D}return l}function Cj(l,g){var S,D,Z,te,fe,_e,Ne,Ae,Ke;if(!l||l.length===0)throw new Error("latlngs not passed");dr(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ft=B([0,0]),Tt=q(l),yn=Tt.getNorthWest().distanceTo(Tt.getSouthWest())*Tt.getNorthEast().distanceTo(Tt.getNorthWest());yn<1700&&(ft=Pg(l));var Zs=l.length,ur=[];for(S=0;S<Zs;S++){var Mn=B(l[S]);ur.push(g.project(B([Mn.lat-ft.lat,Mn.lng-ft.lng])))}for(_e=Ne=Ae=0,S=0,D=Zs-1;S<Zs;D=S++)Z=ur[S],te=ur[D],fe=Z.y*te.x-te.y*Z.x,Ne+=(Z.x+te.x)*fe,Ae+=(Z.y+te.y)*fe,_e+=fe*3;_e===0?Ke=ur[0]:Ke=[Ne/_e,Ae/_e];var wl=g.unproject(I(Ke));return B([wl.lat+ft.lat,wl.lng+ft.lng])}function Pg(l){for(var g=0,S=0,D=0,Z=0;Z<l.length;Z++){var te=B(l[Z]);g+=te.lat,S+=te.lng,D++}return B([g/D,S/D])}var I5={__proto__:null,clipPolygon:kj,polygonCenter:Cj,centroid:Pg};function Pj(l,g){if(!g||!l.length)return l.slice();var S=g*g;return l=$5(l,S),l=F5(l,S),l}function Ej(l,g,S){return Math.sqrt(vd(l,g,S,!0))}function D5(l,g,S){return vd(l,g,S)}function F5(l,g){var S=l.length,D=typeof Uint8Array<"u"?Uint8Array:Array,Z=new D(S);Z[0]=Z[S-1]=1,Eg(l,Z,g,0,S-1);var te,fe=[];for(te=0;te<S;te++)Z[te]&&fe.push(l[te]);return fe}function Eg(l,g,S,D,Z){var te=0,fe,_e,Ne;for(_e=D+1;_e<=Z-1;_e++)Ne=vd(l[_e],l[D],l[Z],!0),Ne>te&&(fe=_e,te=Ne);te>S&&(g[fe]=1,Eg(l,g,S,D,fe),Eg(l,g,S,fe,Z))}function $5(l,g){for(var S=[l[0]],D=1,Z=0,te=l.length;D<te;D++)z5(l[D],l[Z])>g&&(S.push(l[D]),Z=D);return Z<te-1&&S.push(l[te-1]),S}var Tj;function Aj(l,g,S,D,Z){var te=D?Tj:yo(l,S),fe=yo(g,S),_e,Ne,Ae;for(Tj=fe;;){if(!(te|fe))return[l,g];if(te&fe)return!1;_e=te||fe,Ne=kh(l,g,_e,S,Z),Ae=yo(Ne,S),_e===te?(l=Ne,te=Ae):(g=Ne,fe=Ae)}}function kh(l,g,S,D,Z){var te=g.x-l.x,fe=g.y-l.y,_e=D.min,Ne=D.max,Ae,Ke;return S&8?(Ae=l.x+te*(Ne.y-l.y)/fe,Ke=Ne.y):S&4?(Ae=l.x+te*(_e.y-l.y)/fe,Ke=_e.y):S&2?(Ae=Ne.x,Ke=l.y+fe*(Ne.x-l.x)/te):S&1&&(Ae=_e.x,Ke=l.y+fe*(_e.x-l.x)/te),new G(Ae,Ke,Z)}function yo(l,g){var S=0;return l.x<g.min.x?S|=1:l.x>g.max.x&&(S|=2),l.y<g.min.y?S|=4:l.y>g.max.y&&(S|=8),S}function z5(l,g){var S=g.x-l.x,D=g.y-l.y;return S*S+D*D}function vd(l,g,S,D){var Z=g.x,te=g.y,fe=S.x-Z,_e=S.y-te,Ne=fe*fe+_e*_e,Ae;return Ne>0&&(Ae=((l.x-Z)*fe+(l.y-te)*_e)/Ne,Ae>1?(Z=S.x,te=S.y):Ae>0&&(Z+=fe*Ae,te+=_e*Ae)),fe=l.x-Z,_e=l.y-te,D?fe*fe+_e*_e:new G(Z,te)}function dr(l){return!_(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Oj(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),dr(l)}function Rj(l,g){var S,D,Z,te,fe,_e,Ne,Ae;if(!l||l.length===0)throw new Error("latlngs not passed");dr(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ke=B([0,0]),ft=q(l),Tt=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Tt<1700&&(Ke=Pg(l));var yn=l.length,Zs=[];for(S=0;S<yn;S++){var ur=B(l[S]);Zs.push(g.project(B([ur.lat-Ke.lat,ur.lng-Ke.lng])))}for(S=0,D=0;S<yn-1;S++)D+=Zs[S].distanceTo(Zs[S+1])/2;if(D===0)Ae=Zs[0];else for(S=0,te=0;S<yn-1;S++)if(fe=Zs[S],_e=Zs[S+1],Z=fe.distanceTo(_e),te+=Z,te>D){Ne=(te-D)/Z,Ae=[_e.x-Ne*(_e.x-fe.x),_e.y-Ne*(_e.y-fe.y)];break}var Mn=g.unproject(I(Ae));return B([Mn.lat+Ke.lat,Mn.lng+Ke.lng])}var B5={__proto__:null,simplify:Pj,pointToSegmentDistance:Ej,closestPointOnSegment:D5,clipSegment:Aj,_getEdgeIntersection:kh,_getBitCode:yo,_sqClosestPointOnSegment:vd,isFlat:dr,_flat:Oj,polylineCenter:Rj},Tg={project:function(l){return new G(l.lng,l.lat)},unproject:function(l){return new K(l.y,l.x)},bounds:new V([-180,-90],[180,90])},Ag={R:6378137,R_MINOR:6356752314245179e-9,bounds:new V([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var g=Math.PI/180,S=this.R,D=l.lat*g,Z=this.R_MINOR/S,te=Math.sqrt(1-Z*Z),fe=te*Math.sin(D),_e=Math.tan(Math.PI/4-D/2)/Math.pow((1-fe)/(1+fe),te/2);return D=-S*Math.log(Math.max(_e,1e-10)),new G(l.lng*g*S,D)},unproject:function(l){for(var g=180/Math.PI,S=this.R,D=this.R_MINOR/S,Z=Math.sqrt(1-D*D),te=Math.exp(-l.y/S),fe=Math.PI/2-2*Math.atan(te),_e=0,Ne=.1,Ae;_e<15&&Math.abs(Ne)>1e-7;_e++)Ae=Z*Math.sin(fe),Ae=Math.pow((1-Ae)/(1+Ae),Z/2),Ne=Math.PI/2-2*Math.atan(te*Ae)-fe,fe+=Ne;return new K(fe*g,l.x*g/S)}},V5={__proto__:null,LonLat:Tg,Mercator:Ag,SphericalMercator:re},U5=a({},oe,{code:"EPSG:3395",projection:Ag,transformation:function(){var l=.5/(Math.PI*Ag.R);return me(l,.5,-l,.5)}()}),Lj=a({},oe,{code:"EPSG:4326",projection:Tg,transformation:me(1/180,1,-1/180,.5)}),q5=a({},W,{projection:Tg,transformation:me(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,g){var S=g.lng-l.lng,D=g.lat-l.lat;return Math.sqrt(S*S+D*D)},infinite:!0});W.Earth=oe,W.EPSG3395=U5,W.EPSG3857=we,W.EPSG900913=be,W.EPSG4326=Lj,W.Simple=q5;var Pr=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[d(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[d(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var g=l.target;if(g.hasLayer(this)){if(this._map=g,this._zoomAnimated=g._zoomAnimated,this.getEvents){var S=this.getEvents();g.on(S,this),this.once("remove",function(){g.off(S,this)},this)}this.onAdd(g),this.fire("add"),g.fire("layeradd",{layer:this})}}});Lt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var g=d(l);return this._layers[g]?this:(this._layers[g]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var g=d(l);return this._layers[g]?(this._loaded&&l.onRemove(this),delete this._layers[g],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return d(l)in this._layers},eachLayer:function(l,g){for(var S in this._layers)l.call(g,this._layers[S]);return this},_addLayers:function(l){l=l?_(l)?l:[l]:[];for(var g=0,S=l.length;g<S;g++)this.addLayer(l[g])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[d(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var g=d(l);this._zoomBoundLayers[g]&&(delete this._zoomBoundLayers[g],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,g=-1/0,S=this._getZoomSpan();for(var D in this._zoomBoundLayers){var Z=this._zoomBoundLayers[D].options;l=Z.minZoom===void 0?l:Math.min(l,Z.minZoom),g=Z.maxZoom===void 0?g:Math.max(g,Z.maxZoom)}this._layersMaxZoom=g===-1/0?void 0:g,this._layersMinZoom=l===1/0?void 0:l,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gl=Pr.extend({initialize:function(l,g){v(this,g),this._layers={};var S,D;if(l)for(S=0,D=l.length;S<D;S++)this.addLayer(l[S])},addLayer:function(l){var g=this.getLayerId(l);return this._layers[g]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var g=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[g]&&this._map.removeLayer(this._layers[g]),delete this._layers[g],this},hasLayer:function(l){var g=typeof l=="number"?l:this.getLayerId(l);return g in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var g=Array.prototype.slice.call(arguments,1),S,D;for(S in this._layers)D=this._layers[S],D[l]&&D[l].apply(D,g);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,g){for(var S in this._layers)l.call(g,this._layers[S]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return d(l)}}),H5=function(l,g){return new gl(l,g)},$a=gl.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),gl.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),gl.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new U;for(var g in this._layers){var S=this._layers[g];l.extend(S.getBounds?S.getBounds():S.getLatLng())}return l}}),W5=function(l,g){return new $a(l,g)},xl=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){v(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,g){var S=this._getIconUrl(l);if(!S){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var D=this._createImg(S,g&&g.tagName==="IMG"?g:null);return this._setIconStyles(D,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),D},_setIconStyles:function(l,g){var S=this.options,D=S[g+"Size"];typeof D=="number"&&(D=[D,D]);var Z=I(D),te=I(g==="shadow"&&S.shadowAnchor||S.iconAnchor||Z&&Z.divideBy(2,!0));l.className="leaflet-marker-"+g+" "+(S.className||""),te&&(l.style.marginLeft=-te.x+"px",l.style.marginTop=-te.y+"px"),Z&&(l.style.width=Z.x+"px",l.style.height=Z.y+"px")},_createImg:function(l,g){return g=g||document.createElement("img"),g.src=l,g},_getIconUrl:function(l){return it.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function Z5(l){return new xl(l)}var yd=xl.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof yd.imagePath!="string"&&(yd.imagePath=this._detectIconPath()),(this.options.imagePath||yd.imagePath)+xl.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var g=function(S,D,Z){var te=D.exec(S);return te&&te[Z]};return l=g(l,/^url\((['"])?(.+)\1\)$/,2),l&&g(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Dt("div","leaflet-default-icon-path",document.body),g=hd(l,"background-image")||hd(l,"backgroundImage");if(document.body.removeChild(l),g=this._stripUrl(g),g)return g;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),Mj=na.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new gi(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ct(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&_s(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var g=this._marker,S=g._map,D=this._marker.options.autoPanSpeed,Z=this._marker.options.autoPanPadding,te=go(g._icon),fe=S.getPixelBounds(),_e=S.getPixelOrigin(),Ne=H(fe.min._subtract(_e).add(Z),fe.max._subtract(_e).subtract(Z));if(!Ne.contains(te)){var Ae=I((Math.max(Ne.max.x,te.x)-Ne.max.x)/(fe.max.x-Ne.max.x)-(Math.min(Ne.min.x,te.x)-Ne.min.x)/(fe.min.x-Ne.min.x),(Math.max(Ne.max.y,te.y)-Ne.max.y)/(fe.max.y-Ne.max.y)-(Math.min(Ne.min.y,te.y)-Ne.min.y)/(fe.min.y-Ne.min.y)).multiplyBy(D);S.panBy(Ae,{animate:!1}),this._draggable._newPos._add(Ae),this._draggable._startPos._add(Ae),Ls(g._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=A(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=A(this._adjustPan.bind(this,l)))},_onDrag:function(l){var g=this._marker,S=g._shadow,D=go(g._icon),Z=g._map.layerPointToLatLng(D);S&&Ls(S,D),g._latlng=Z,l.latlng=Z,l.oldLatLng=this._oldLatLng,g.fire("move",l).fire("drag",l)},_onDragEnd:function(l){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Ch=Pr.extend({options:{icon:new yd,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,g){v(this,g),this._latlng=B(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var g=this._latlng;return this._latlng=B(l),this.update(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,g="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=l.icon.createIcon(this._icon),D=!1;S!==this._icon&&(this._icon&&this._removeIcon(),D=!0,l.title&&(S.title=l.title),S.tagName==="IMG"&&(S.alt=l.alt||"")),Ct(S,g),l.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&jt(S,"focus",this._panOnFocus,this);var Z=l.icon.createShadow(this._shadow),te=!1;Z!==this._shadow&&(this._removeShadow(),te=!0),Z&&(Ct(Z,g),Z.alt=""),this._shadow=Z,l.opacity<1&&this._updateOpacity(),D&&this.getPane().appendChild(this._icon),this._initInteraction(),Z&&te&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Jt(this._icon,"focus",this._panOnFocus,this),ds(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ds(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&Ls(this._icon,l),this._shadow&&Ls(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var g=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(g)},_initInteraction:function(){if(this.options.interactive&&(Ct(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mj)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mj(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&cr(this._icon,l),this._shadow&&cr(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var g=this.options.icon.options,S=g.iconSize?I(g.iconSize):I(0,0),D=g.iconAnchor?I(g.iconAnchor):I(0,0);l.panInside(this._latlng,{paddingTopLeft:D,paddingBottomRight:S.subtract(D)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function G5(l,g){return new Ch(l,g)}var xi=Pr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return v(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ph=xi.extend({options:{fill:!0,radius:10},initialize:function(l,g){v(this,g),this._latlng=B(l),this._radius=this.options.radius},setLatLng:function(l){var g=this._latlng;return this._latlng=B(l),this.redraw(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var g=l&&l.radius||this._radius;return xi.prototype.setStyle.call(this,l),this.setRadius(g),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,g=this._radiusY||l,S=this._clickTolerance(),D=[l+S,g+S];this._pxBounds=new V(this._point.subtract(D),this._point.add(D))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function K5(l,g){return new Ph(l,g)}var Og=Ph.extend({initialize:function(l,g,S){if(typeof g=="number"&&(g=a({},S,{radius:g})),v(this,g),this._latlng=B(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new U(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:xi.prototype.setStyle,_project:function(){var l=this._latlng.lng,g=this._latlng.lat,S=this._map,D=S.options.crs;if(D.distance===oe.distance){var Z=Math.PI/180,te=this._mRadius/oe.R/Z,fe=S.project([g+te,l]),_e=S.project([g-te,l]),Ne=fe.add(_e).divideBy(2),Ae=S.unproject(Ne).lat,Ke=Math.acos((Math.cos(te*Z)-Math.sin(g*Z)*Math.sin(Ae*Z))/(Math.cos(g*Z)*Math.cos(Ae*Z)))/Z;(isNaN(Ke)||Ke===0)&&(Ke=te/Math.cos(Math.PI/180*g)),this._point=Ne.subtract(S.getPixelOrigin()),this._radius=isNaN(Ke)?0:Ne.x-S.project([Ae,l-Ke]).x,this._radiusY=Ne.y-fe.y}else{var ft=D.unproject(D.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(ft).x}this._updateBounds()}});function Y5(l,g,S){return new Og(l,g,S)}var za=xi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,g){v(this,g),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var g=1/0,S=null,D=vd,Z,te,fe=0,_e=this._parts.length;fe<_e;fe++)for(var Ne=this._parts[fe],Ae=1,Ke=Ne.length;Ae<Ke;Ae++){Z=Ne[Ae-1],te=Ne[Ae];var ft=D(l,Z,te,!0);ft<g&&(g=ft,S=D(l,Z,te))}return S&&(S.distance=Math.sqrt(g)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rj(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,g){return g=g||this._defaultShape(),l=B(l),g.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new U,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return dr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var g=[],S=dr(l),D=0,Z=l.length;D<Z;D++)S?(g[D]=B(l[D]),this._bounds.extend(g[D])):g[D]=this._convertLatLngs(l[D]);return g},_project:function(){var l=new V;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),g=new G(l,l);this._rawPxBounds&&(this._pxBounds=new V([this._rawPxBounds.min.subtract(g),this._rawPxBounds.max.add(g)]))},_projectLatlngs:function(l,g,S){var D=l[0]instanceof K,Z=l.length,te,fe;if(D){for(fe=[],te=0;te<Z;te++)fe[te]=this._map.latLngToLayerPoint(l[te]),S.extend(fe[te]);g.push(fe)}else for(te=0;te<Z;te++)this._projectLatlngs(l[te],g,S)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var g=this._parts,S,D,Z,te,fe,_e,Ne;for(S=0,Z=0,te=this._rings.length;S<te;S++)for(Ne=this._rings[S],D=0,fe=Ne.length;D<fe-1;D++)_e=Aj(Ne[D],Ne[D+1],l,D,!0),_e&&(g[Z]=g[Z]||[],g[Z].push(_e[0]),(_e[1]!==Ne[D+1]||D===fe-2)&&(g[Z].push(_e[1]),Z++))}},_simplifyPoints:function(){for(var l=this._parts,g=this.options.smoothFactor,S=0,D=l.length;S<D;S++)l[S]=Pj(l[S],g)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,g){var S,D,Z,te,fe,_e,Ne=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(S=0,te=this._parts.length;S<te;S++)for(_e=this._parts[S],D=0,fe=_e.length,Z=fe-1;D<fe;Z=D++)if(!(!g&&D===0)&&Ej(l,_e[Z],_e[D])<=Ne)return!0;return!1}});function X5(l,g){return new za(l,g)}za._flat=Oj;var vl=za.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cj(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var g=za.prototype._convertLatLngs.call(this,l),S=g.length;return S>=2&&g[0]instanceof K&&g[0].equals(g[S-1])&&g.pop(),g},_setLatLngs:function(l){za.prototype._setLatLngs.call(this,l),dr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return dr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,g=this.options.weight,S=new G(g,g);if(l=new V(l.min.subtract(S),l.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var D=0,Z=this._rings.length,te;D<Z;D++)te=kj(this._rings[D],l,!0),te.length&&this._parts.push(te)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var g=!1,S,D,Z,te,fe,_e,Ne,Ae;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(te=0,Ne=this._parts.length;te<Ne;te++)for(S=this._parts[te],fe=0,Ae=S.length,_e=Ae-1;fe<Ae;_e=fe++)D=S[fe],Z=S[_e],D.y>l.y!=Z.y>l.y&&l.x<(Z.x-D.x)*(l.y-D.y)/(Z.y-D.y)+D.x&&(g=!g);return g||za.prototype._containsPoint.call(this,l,!0)}});function J5(l,g){return new vl(l,g)}var Ba=$a.extend({initialize:function(l,g){v(this,g),this._layers={},l&&this.addData(l)},addData:function(l){var g=_(l)?l:l.features,S,D,Z;if(g){for(S=0,D=g.length;S<D;S++)Z=g[S],(Z.geometries||Z.geometry||Z.features||Z.coordinates)&&this.addData(Z);return this}var te=this.options;if(te.filter&&!te.filter(l))return this;var fe=Eh(l,te);return fe?(fe.feature=Oh(l),fe.defaultOptions=fe.options,this.resetStyle(fe),te.onEachFeature&&te.onEachFeature(l,fe),this.addLayer(fe)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=a({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(g){this._setLayerStyle(g,l)},this)},_setLayerStyle:function(l,g){l.setStyle&&(typeof g=="function"&&(g=g(l.feature)),l.setStyle(g))}});function Eh(l,g){var S=l.type==="Feature"?l.geometry:l,D=S?S.coordinates:null,Z=[],te=g&&g.pointToLayer,fe=g&&g.coordsToLatLng||Rg,_e,Ne,Ae,Ke;if(!D&&!S)return null;switch(S.type){case"Point":return _e=fe(D),Ij(te,l,_e,g);case"MultiPoint":for(Ae=0,Ke=D.length;Ae<Ke;Ae++)_e=fe(D[Ae]),Z.push(Ij(te,l,_e,g));return new $a(Z);case"LineString":case"MultiLineString":return Ne=Th(D,S.type==="LineString"?0:1,fe),new za(Ne,g);case"Polygon":case"MultiPolygon":return Ne=Th(D,S.type==="Polygon"?1:2,fe),new vl(Ne,g);case"GeometryCollection":for(Ae=0,Ke=S.geometries.length;Ae<Ke;Ae++){var ft=Eh({geometry:S.geometries[Ae],type:"Feature",properties:l.properties},g);ft&&Z.push(ft)}return new $a(Z);case"FeatureCollection":for(Ae=0,Ke=S.features.length;Ae<Ke;Ae++){var Tt=Eh(S.features[Ae],g);Tt&&Z.push(Tt)}return new $a(Z);default:throw new Error("Invalid GeoJSON object.")}}function Ij(l,g,S,D){return l?l(g,S):new Ch(S,D&&D.markersInheritOptions&&D)}function Rg(l){return new K(l[1],l[0],l[2])}function Th(l,g,S){for(var D=[],Z=0,te=l.length,fe;Z<te;Z++)fe=g?Th(l[Z],g-1,S):(S||Rg)(l[Z]),D.push(fe);return D}function Lg(l,g){return l=B(l),l.alt!==void 0?[f(l.lng,g),f(l.lat,g),f(l.alt,g)]:[f(l.lng,g),f(l.lat,g)]}function Ah(l,g,S,D){for(var Z=[],te=0,fe=l.length;te<fe;te++)Z.push(g?Ah(l[te],dr(l[te])?0:g-1,S,D):Lg(l[te],D));return!g&&S&&Z.length>0&&Z.push(Z[0].slice()),Z}function yl(l,g){return l.feature?a({},l.feature,{geometry:g}):Oh(g)}function Oh(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Mg={toGeoJSON:function(l){return yl(this,{type:"Point",coordinates:Lg(this.getLatLng(),l)})}};Ch.include(Mg),Og.include(Mg),Ph.include(Mg),za.include({toGeoJSON:function(l){var g=!dr(this._latlngs),S=Ah(this._latlngs,g?1:0,!1,l);return yl(this,{type:(g?"Multi":"")+"LineString",coordinates:S})}}),vl.include({toGeoJSON:function(l){var g=!dr(this._latlngs),S=g&&!dr(this._latlngs[0]),D=Ah(this._latlngs,S?2:g?1:0,!0,l);return g||(D=[D]),yl(this,{type:(S?"Multi":"")+"Polygon",coordinates:D})}}),gl.include({toMultiPoint:function(l){var g=[];return this.eachLayer(function(S){g.push(S.toGeoJSON(l).geometry.coordinates)}),yl(this,{type:"MultiPoint",coordinates:g})},toGeoJSON:function(l){var g=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(g==="MultiPoint")return this.toMultiPoint(l);var S=g==="GeometryCollection",D=[];return this.eachLayer(function(Z){if(Z.toGeoJSON){var te=Z.toGeoJSON(l);if(S)D.push(te.geometry);else{var fe=Oh(te);fe.type==="FeatureCollection"?D.push.apply(D,fe.features):D.push(fe)}}}),S?yl(this,{geometries:D,type:"GeometryCollection"}):{type:"FeatureCollection",features:D}}});function Dj(l,g){return new Ba(l,g)}var Q5=Dj,Rh=Pr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,g,S){this._url=l,this._bounds=q(g),v(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ct(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ds(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&ml(this._image),this},bringToBack:function(){return this._map&&pl(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=q(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",g=this._image=l?this._url:Dt("img");if(Ct(g,"leaflet-image-layer"),this._zoomAnimated&&Ct(g,"leaflet-zoom-animated"),this.options.className&&Ct(g,this.options.className),g.onselectstart=u,g.onmousemove=u,g.onload=o(this.fire,this,"load"),g.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=g.src;return}g.src=this._url,g.alt=this.options.alt},_animateZoom:function(l){var g=this._map.getZoomScale(l.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;po(this._image,S,g)},_reset:function(){var l=this._image,g=new V(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=g.getSize();Ls(l,g.min),l.style.width=S.x+"px",l.style.height=S.y+"px"},_updateOpacity:function(){cr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),e3=function(l,g,S){return new Rh(l,g,S)},Fj=Rh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",g=this._image=l?this._url:Dt("video");if(Ct(g,"leaflet-image-layer"),this._zoomAnimated&&Ct(g,"leaflet-zoom-animated"),this.options.className&&Ct(g,this.options.className),g.onselectstart=u,g.onmousemove=u,g.onloadeddata=o(this.fire,this,"load"),l){for(var S=g.getElementsByTagName("source"),D=[],Z=0;Z<S.length;Z++)D.push(S[Z].src);this._url=S.length>0?D:[g.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(g.style,"objectFit")&&(g.style.objectFit="fill"),g.autoplay=!!this.options.autoplay,g.loop=!!this.options.loop,g.muted=!!this.options.muted,g.playsInline=!!this.options.playsInline;for(var te=0;te<this._url.length;te++){var fe=Dt("source");fe.src=this._url[te],g.appendChild(fe)}}});function t3(l,g,S){return new Fj(l,g,S)}var $j=Rh.extend({_initImage:function(){var l=this._image=this._url;Ct(l,"leaflet-image-layer"),this._zoomAnimated&&Ct(l,"leaflet-zoom-animated"),this.options.className&&Ct(l,this.options.className),l.onselectstart=u,l.onmousemove=u}});function s3(l,g,S){return new $j(l,g,S)}var ra=Pr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,g){l&&(l instanceof K||_(l))?(this._latlng=B(l),v(this,g)):(v(this,l),this._source=g),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&cr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&cr(this._container,1),this.bringToFront(),this.options.interactive&&(Ct(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(cr(this._container,0),this._removeTimeout=setTimeout(o(ds,void 0,this._container),200)):ds(this._container),this.options.interactive&&(_s(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=B(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ml(this._container),this},bringToBack:function(){return this._map&&pl(this._container),this},_prepareOpen:function(l){var g=this._source;if(!g._map)return!1;if(g instanceof $a){g=null;var S=this._source._layers;for(var D in S)if(S[D]._map){g=S[D];break}if(!g)return!1;this._source=g}if(!l)if(g.getCenter)l=g.getCenter();else if(g.getLatLng)l=g.getLatLng();else if(g.getBounds)l=g.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,g=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof g=="string")l.innerHTML=g;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(g)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),g=I(this.options.offset),S=this._getAnchor();this._zoomAnimated?Ls(this._container,l.add(S)):g=g.add(l).add(S);var D=this._containerBottom=-g.y,Z=this._containerLeft=-Math.round(this._containerWidth/2)+g.x;this._container.style.bottom=D+"px",this._container.style.left=Z+"px"}},_getAnchor:function(){return[0,0]}});Lt.include({_initOverlay:function(l,g,S,D){var Z=g;return Z instanceof l||(Z=new l(D).setContent(g)),S&&Z.setLatLng(S),Z}}),Pr.include({_initOverlay:function(l,g,S,D){var Z=S;return Z instanceof l?(v(Z,D),Z._source=this):(Z=g&&!D?g:new l(D,this),Z.setContent(S)),Z}});var Lh=ra.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,ra.prototype.openOn.call(this,l)},onAdd:function(l){ra.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xi||this._source.on("preclick",xo))},onRemove:function(l){ra.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xi||this._source.off("preclick",xo))},getEvents:function(){var l=ra.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",g=this._container=Dt("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=Dt("div",l+"-content-wrapper",g);if(this._contentNode=Dt("div",l+"-content",S),gd(g),Ng(this._contentNode),jt(g,"contextmenu",xo),this._tipContainer=Dt("div",l+"-tip-container",g),this._tip=Dt("div",l+"-tip",this._tipContainer),this.options.closeButton){var D=this._closeButton=Dt("a",l+"-close-button",g);D.setAttribute("role","button"),D.setAttribute("aria-label","Close popup"),D.href="#close",D.innerHTML='<span aria-hidden="true">&#215;</span>',jt(D,"click",function(Z){Js(Z),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,g=l.style;g.width="",g.whiteSpace="nowrap";var S=l.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),g.width=S+1+"px",g.whiteSpace="",g.height="";var D=l.offsetHeight,Z=this.options.maxHeight,te="leaflet-popup-scrolled";Z&&D>Z?(g.height=Z+"px",Ct(l,te)):_s(l,te),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var g=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),S=this._getAnchor();Ls(this._container,g.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,g=parseInt(hd(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+g,D=this._containerWidth,Z=new G(this._containerLeft,-S-this._containerBottom);Z._add(go(this._container));var te=l.layerPointToContainerPoint(Z),fe=I(this.options.autoPanPadding),_e=I(this.options.autoPanPaddingTopLeft||fe),Ne=I(this.options.autoPanPaddingBottomRight||fe),Ae=l.getSize(),Ke=0,ft=0;te.x+D+Ne.x>Ae.x&&(Ke=te.x+D-Ae.x+Ne.x),te.x-Ke-_e.x<0&&(Ke=te.x-_e.x),te.y+S+Ne.y>Ae.y&&(ft=te.y+S-Ae.y+Ne.y),te.y-ft-_e.y<0&&(ft=te.y-_e.y),(Ke||ft)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Ke,ft]))}},_getAnchor:function(){return I(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),n3=function(l,g){return new Lh(l,g)};Lt.mergeOptions({closePopupOnClick:!0}),Lt.include({openPopup:function(l,g,S){return this._initOverlay(Lh,l,g,S).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Pr.include({bindPopup:function(l,g){return this._popup=this._initOverlay(Lh,this._popup,l,g),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof $a||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){vo(l);var g=l.layer||l.target;if(this._popup._source===g&&!(g instanceof xi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=g,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Mh=ra.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){ra.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){ra.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=ra.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",g=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Dt("div",g),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var g,S,D=this._map,Z=this._container,te=D.latLngToContainerPoint(D.getCenter()),fe=D.layerPointToContainerPoint(l),_e=this.options.direction,Ne=Z.offsetWidth,Ae=Z.offsetHeight,Ke=I(this.options.offset),ft=this._getAnchor();_e==="top"?(g=Ne/2,S=Ae):_e==="bottom"?(g=Ne/2,S=0):_e==="center"?(g=Ne/2,S=Ae/2):_e==="right"?(g=0,S=Ae/2):_e==="left"?(g=Ne,S=Ae/2):fe.x<te.x?(_e="right",g=0,S=Ae/2):(_e="left",g=Ne+(Ke.x+ft.x)*2,S=Ae/2),l=l.subtract(I(g,S,!0)).add(Ke).add(ft),_s(Z,"leaflet-tooltip-right"),_s(Z,"leaflet-tooltip-left"),_s(Z,"leaflet-tooltip-top"),_s(Z,"leaflet-tooltip-bottom"),Ct(Z,"leaflet-tooltip-"+_e),Ls(Z,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&cr(this._container,l)},_animateZoom:function(l){var g=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(g)},_getAnchor:function(){return I(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),r3=function(l,g){return new Mh(l,g)};Lt.include({openTooltip:function(l,g,S){return this._initOverlay(Mh,l,g,S).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Pr.include({bindTooltip:function(l,g){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Mh,this._tooltip,l,g),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var g=l?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[g](S),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof $a||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var g=typeof l.getElement=="function"&&l.getElement();g&&(jt(g,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),jt(g,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var g=typeof l.getElement=="function"&&l.getElement();g&&g.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var g=this;this._map.once("moveend",function(){g._openOnceFlag=!1,g._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var g=l.latlng,S,D;this._tooltip.options.sticky&&l.originalEvent&&(S=this._map.mouseEventToContainerPoint(l.originalEvent),D=this._map.containerPointToLayerPoint(S),g=this._map.layerPointToLatLng(D)),this._tooltip.setLatLng(g)}});var zj=xl.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var g=l&&l.tagName==="DIV"?l:document.createElement("div"),S=this.options;if(S.html instanceof Element?(wh(g),g.appendChild(S.html)):g.innerHTML=S.html!==!1?S.html:"",S.bgPos){var D=I(S.bgPos);g.style.backgroundPosition=-D.x+"px "+-D.y+"px"}return this._setIconStyles(g,"icon"),g},createShadow:function(){return null}});function a3(l){return new zj(l)}xl.Default=yd;var bd=Pr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:it.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){v(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),ds(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ml(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pl(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof G?l:new G(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var g=this.getPane().children,S=-l(-1/0,1/0),D=0,Z=g.length,te;D<Z;D++)te=g[D].style.zIndex,g[D]!==this._container&&te&&(S=l(S,+te));isFinite(S)&&(this.options.zIndex=S+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!it.ielt9){cr(this._container,this.options.opacity);var l=+new Date,g=!1,S=!1;for(var D in this._tiles){var Z=this._tiles[D];if(!(!Z.current||!Z.loaded)){var te=Math.min(1,(l-Z.loaded)/200);cr(Z.el,te),te<1?g=!0:(Z.active?S=!0:this._onOpaqueTile(Z),Z.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),g&&(C(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=Dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,g=this.options.maxZoom;if(l!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===l?(this._levels[S].el.style.zIndex=g-Math.abs(l-S),this._onUpdateLevel(S)):(ds(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var D=this._levels[l],Z=this._map;return D||(D=this._levels[l]={},D.el=Dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),D.el.style.zIndex=g,D.origin=Z.project(Z.unproject(Z.getPixelOrigin()),l).round(),D.zoom=l,this._setZoomTransform(D,Z.getCenter(),Z.getZoom()),u(D.el.offsetWidth),this._onCreateLevel(D)),this._level=D,D}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var l,g,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)g=this._tiles[l],g.retain=g.current;for(l in this._tiles)if(g=this._tiles[l],g.current&&!g.active){var D=g.coords;this._retainParent(D.x,D.y,D.z,D.z-5)||this._retainChildren(D.x,D.y,D.z,D.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var g in this._tiles)this._tiles[g].coords.z===l&&this._removeTile(g)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)ds(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,g,S,D){var Z=Math.floor(l/2),te=Math.floor(g/2),fe=S-1,_e=new G(+Z,+te);_e.z=+fe;var Ne=this._tileCoordsToKey(_e),Ae=this._tiles[Ne];return Ae&&Ae.active?(Ae.retain=!0,!0):(Ae&&Ae.loaded&&(Ae.retain=!0),fe>D?this._retainParent(Z,te,fe,D):!1)},_retainChildren:function(l,g,S,D){for(var Z=2*l;Z<2*l+2;Z++)for(var te=2*g;te<2*g+2;te++){var fe=new G(Z,te);fe.z=S+1;var _e=this._tileCoordsToKey(fe),Ne=this._tiles[_e];if(Ne&&Ne.active){Ne.retain=!0;continue}else Ne&&Ne.loaded&&(Ne.retain=!0);S+1<D&&this._retainChildren(Z,te,S+1,D)}},_resetView:function(l){var g=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),g,g)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var g=this.options;return g.minNativeZoom!==void 0&&l<g.minNativeZoom?g.minNativeZoom:g.maxNativeZoom!==void 0&&g.maxNativeZoom<l?g.maxNativeZoom:l},_setView:function(l,g,S,D){var Z=Math.round(g);this.options.maxZoom!==void 0&&Z>this.options.maxZoom||this.options.minZoom!==void 0&&Z<this.options.minZoom?Z=void 0:Z=this._clampZoom(Z);var te=this.options.updateWhenZooming&&Z!==this._tileZoom;(!D||te)&&(this._tileZoom=Z,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),Z!==void 0&&this._update(l),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(l,g)},_setZoomTransforms:function(l,g){for(var S in this._levels)this._setZoomTransform(this._levels[S],l,g)},_setZoomTransform:function(l,g,S){var D=this._map.getZoomScale(S,l.zoom),Z=l.origin.multiplyBy(D).subtract(this._map._getNewPixelOrigin(g,S)).round();it.any3d?po(l.el,Z,D):Ls(l.el,Z)},_resetGrid:function(){var l=this._map,g=l.options.crs,S=this._tileSize=this.getTileSize(),D=this._tileZoom,Z=this._map.getPixelWorldBounds(this._tileZoom);Z&&(this._globalTileRange=this._pxBoundsToTileRange(Z)),this._wrapX=g.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,g.wrapLng[0]],D).x/S.x),Math.ceil(l.project([0,g.wrapLng[1]],D).x/S.y)],this._wrapY=g.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([g.wrapLat[0],0],D).y/S.x),Math.ceil(l.project([g.wrapLat[1],0],D).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var g=this._map,S=g._animatingZoom?Math.max(g._animateToZoom,g.getZoom()):g.getZoom(),D=g.getZoomScale(S,this._tileZoom),Z=g.project(l,this._tileZoom).floor(),te=g.getSize().divideBy(D*2);return new V(Z.subtract(te),Z.add(te))},_update:function(l){var g=this._map;if(g){var S=this._clampZoom(g.getZoom());if(l===void 0&&(l=g.getCenter()),this._tileZoom!==void 0){var D=this._getTiledPixelBounds(l),Z=this._pxBoundsToTileRange(D),te=Z.getCenter(),fe=[],_e=this.options.keepBuffer,Ne=new V(Z.getBottomLeft().subtract([_e,-_e]),Z.getTopRight().add([_e,-_e]));if(!(isFinite(Z.min.x)&&isFinite(Z.min.y)&&isFinite(Z.max.x)&&isFinite(Z.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ae in this._tiles){var Ke=this._tiles[Ae].coords;(Ke.z!==this._tileZoom||!Ne.contains(new G(Ke.x,Ke.y)))&&(this._tiles[Ae].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(l,S);return}for(var ft=Z.min.y;ft<=Z.max.y;ft++)for(var Tt=Z.min.x;Tt<=Z.max.x;Tt++){var yn=new G(Tt,ft);if(yn.z=this._tileZoom,!!this._isValidTile(yn)){var Zs=this._tiles[this._tileCoordsToKey(yn)];Zs?Zs.current=!0:fe.push(yn)}}if(fe.sort(function(Mn,wl){return Mn.distanceTo(te)-wl.distanceTo(te)}),fe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ur=document.createDocumentFragment();for(Tt=0;Tt<fe.length;Tt++)this._addTile(fe[Tt],ur);this._level.el.appendChild(ur)}}}},_isValidTile:function(l){var g=this._map.options.crs;if(!g.infinite){var S=this._globalTileRange;if(!g.wrapLng&&(l.x<S.min.x||l.x>S.max.x)||!g.wrapLat&&(l.y<S.min.y||l.y>S.max.y))return!1}if(!this.options.bounds)return!0;var D=this._tileCoordsToBounds(l);return q(this.options.bounds).overlaps(D)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var g=this._map,S=this.getTileSize(),D=l.scaleBy(S),Z=D.add(S),te=g.unproject(D,l.z),fe=g.unproject(Z,l.z);return[te,fe]},_tileCoordsToBounds:function(l){var g=this._tileCoordsToNwSe(l),S=new U(g[0],g[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var g=l.split(":"),S=new G(+g[0],+g[1]);return S.z=+g[2],S},_removeTile:function(l){var g=this._tiles[l];g&&(ds(g.el),delete this._tiles[l],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Ct(l,"leaflet-tile");var g=this.getTileSize();l.style.width=g.x+"px",l.style.height=g.y+"px",l.onselectstart=u,l.onmousemove=u,it.ielt9&&this.options.opacity<1&&cr(l,this.options.opacity)},_addTile:function(l,g){var S=this._getTilePos(l),D=this._tileCoordsToKey(l),Z=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(Z),this.createTile.length<2&&A(o(this._tileReady,this,l,null,Z)),Ls(Z,S),this._tiles[D]={el:Z,coords:l,current:!0},g.appendChild(Z),this.fire("tileloadstart",{tile:Z,coords:l})},_tileReady:function(l,g,S){g&&this.fire("tileerror",{error:g,tile:S,coords:l});var D=this._tileCoordsToKey(l);S=this._tiles[D],S&&(S.loaded=+new Date,this._map._fadeAnimated?(cr(S.el,0),C(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),g||(Ct(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),it.ielt9||!this._map._fadeAnimated?A(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var g=new G(this._wrapX?m(l.x,this._wrapX):l.x,this._wrapY?m(l.y,this._wrapY):l.y);return g.z=l.z,g},_pxBoundsToTileRange:function(l){var g=this.getTileSize();return new V(l.min.unscaleBy(g).floor(),l.max.unscaleBy(g).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function i3(l){return new bd(l)}var bl=bd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,g){this._url=l,g=v(this,g),g.detectRetina&&it.retina&&g.maxZoom>0?(g.tileSize=Math.floor(g.tileSize/2),g.zoomReverse?(g.zoomOffset--,g.minZoom=Math.min(g.maxZoom,g.minZoom+1)):(g.zoomOffset++,g.maxZoom=Math.max(g.minZoom,g.maxZoom-1)),g.minZoom=Math.max(0,g.minZoom)):g.zoomReverse?g.minZoom=Math.min(g.maxZoom,g.minZoom):g.maxZoom=Math.max(g.minZoom,g.maxZoom),typeof g.subdomains=="string"&&(g.subdomains=g.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,g){return this._url===l&&g===void 0&&(g=!0),this._url=l,g||this.redraw(),this},createTile:function(l,g){var S=document.createElement("img");return jt(S,"load",o(this._tileOnLoad,this,g,S)),jt(S,"error",o(this._tileOnError,this,g,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(l),S},getTileUrl:function(l){var g={r:it.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-l.y;this.options.tms&&(g.y=S),g["-y"]=S}return b(this._url,a(g,this.options))},_tileOnLoad:function(l,g){it.ielt9?setTimeout(o(l,this,null,g),0):l(null,g)},_tileOnError:function(l,g,S){var D=this.options.errorTileUrl;D&&g.getAttribute("src")!==D&&(g.src=D),l(S,g)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,g=this.options.maxZoom,S=this.options.zoomReverse,D=this.options.zoomOffset;return S&&(l=g-l),l+D},_getSubdomain:function(l){var g=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[g]},_abortLoading:function(){var l,g;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(g=this._tiles[l].el,g.onload=u,g.onerror=u,!g.complete)){g.src=k;var S=this._tiles[l].coords;ds(g),delete this._tiles[l],this.fire("tileabort",{tile:g,coords:S})}},_removeTile:function(l){var g=this._tiles[l];if(g)return g.el.setAttribute("src",k),bd.prototype._removeTile.call(this,l)},_tileReady:function(l,g,S){if(!(!this._map||S&&S.getAttribute("src")===k))return bd.prototype._tileReady.call(this,l,g,S)}});function Bj(l,g){return new bl(l,g)}var Vj=bl.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,g){this._url=l;var S=a({},this.defaultWmsParams);for(var D in g)D in this.options||(S[D]=g[D]);g=v(this,g);var Z=g.detectRetina&&it.retina?2:1,te=this.getTileSize();S.width=te.x*Z,S.height=te.y*Z,this.wmsParams=S},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var g=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[g]=this._crs.code,bl.prototype.onAdd.call(this,l)},getTileUrl:function(l){var g=this._tileCoordsToNwSe(l),S=this._crs,D=H(S.project(g[0]),S.project(g[1])),Z=D.min,te=D.max,fe=(this._wmsVersion>=1.3&&this._crs===Lj?[Z.y,Z.x,te.y,te.x]:[Z.x,Z.y,te.x,te.y]).join(","),_e=bl.prototype.getTileUrl.call(this,l);return _e+y(this.wmsParams,_e,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+fe},setParams:function(l,g){return a(this.wmsParams,l),g||this.redraw(),this}});function o3(l,g){return new Vj(l,g)}bl.WMS=Vj,Bj.wms=o3;var Va=Pr.extend({options:{padding:.1},initialize:function(l){v(this,l),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ct(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,g){var S=this._map.getZoomScale(g,this._zoom),D=this._map.getSize().multiplyBy(.5+this.options.padding),Z=this._map.project(this._center,g),te=D.multiplyBy(-S).add(Z).subtract(this._map._getNewPixelOrigin(l,g));it.any3d?po(this._container,te,S):Ls(this._container,te)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,g=this._map.getSize(),S=this._map.containerPointToLayerPoint(g.multiplyBy(-l)).round();this._bounds=new V(S,S.add(g.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Uj=Va.extend({options:{tolerance:0},getEvents:function(){var l=Va.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Va.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");jt(l,"mousemove",this._onMouseMove,this),jt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),jt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,ds(this._container),Jt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var g in this._layers)l=this._layers[g],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Va.prototype._update.call(this);var l=this._bounds,g=this._container,S=l.getSize(),D=it.retina?2:1;Ls(g,l.min),g.width=D*S.x,g.height=D*S.y,g.style.width=S.x+"px",g.style.height=S.y+"px",it.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Va.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[d(l)]=l;var g=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=g),this._drawLast=g,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var g=l._order,S=g.next,D=g.prev;S?S.prev=D:this._drawLast=D,D?D.next=S:this._drawFirst=S,delete l._order,delete this._layers[d(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var g=l.options.dashArray.split(/[, ]+/),S=[],D,Z;for(Z=0;Z<g.length;Z++){if(D=Number(g[Z]),isNaN(D))return;S.push(D)}l.options._dashArray=S}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||A(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var g=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new V,this._redrawBounds.extend(l._pxBounds.min.subtract([g,g])),this._redrawBounds.extend(l._pxBounds.max.add([g,g]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var g=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,g.x,g.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,g=this._redrawBounds;if(this._ctx.save(),g){var S=g.getSize();this._ctx.beginPath(),this._ctx.rect(g.min.x,g.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var D=this._drawFirst;D;D=D.next)l=D.layer,(!g||l._pxBounds&&l._pxBounds.intersects(g))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,g){if(this._drawing){var S,D,Z,te,fe=l._parts,_e=fe.length,Ne=this._ctx;if(_e){for(Ne.beginPath(),S=0;S<_e;S++){for(D=0,Z=fe[S].length;D<Z;D++)te=fe[S][D],Ne[D?"lineTo":"moveTo"](te.x,te.y);g&&Ne.closePath()}this._fillStroke(Ne,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var g=l._point,S=this._ctx,D=Math.max(Math.round(l._radius),1),Z=(Math.max(Math.round(l._radiusY),1)||D)/D;Z!==1&&(S.save(),S.scale(1,Z)),S.beginPath(),S.arc(g.x,g.y/Z,D,0,Math.PI*2,!1),Z!==1&&S.restore(),this._fillStroke(S,l)}},_fillStroke:function(l,g){var S=g.options;S.fill&&(l.globalAlpha=S.fillOpacity,l.fillStyle=S.fillColor||S.color,l.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(l.setLineDash&&l.setLineDash(g.options&&g.options._dashArray||[]),l.globalAlpha=S.opacity,l.lineWidth=S.weight,l.strokeStyle=S.color,l.lineCap=S.lineCap,l.lineJoin=S.lineJoin,l.stroke())},_onClick:function(l){for(var g=this._map.mouseEventToLayerPoint(l),S,D,Z=this._drawFirst;Z;Z=Z.next)S=Z.layer,S.options.interactive&&S._containsPoint(g)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(S))&&(D=S);this._fireEvent(D?[D]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var g=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,g)}},_handleMouseOut:function(l){var g=this._hoveredLayer;g&&(_s(this._container,"leaflet-interactive"),this._fireEvent([g],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,g){if(!this._mouseHoverThrottled){for(var S,D,Z=this._drawFirst;Z;Z=Z.next)S=Z.layer,S.options.interactive&&S._containsPoint(g)&&(D=S);D!==this._hoveredLayer&&(this._handleMouseOut(l),D&&(Ct(this._container,"leaflet-interactive"),this._fireEvent([D],l,"mouseover"),this._hoveredLayer=D)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,g,S){this._map._fireDOMEvent(g,S||g.type,l)},_bringToFront:function(l){var g=l._order;if(g){var S=g.next,D=g.prev;if(S)S.prev=D;else return;D?D.next=S:S&&(this._drawFirst=S),g.prev=this._drawLast,this._drawLast.next=g,g.next=null,this._drawLast=g,this._requestRedraw(l)}},_bringToBack:function(l){var g=l._order;if(g){var S=g.next,D=g.prev;if(D)D.next=S;else return;S?S.prev=D:D&&(this._drawLast=D),g.prev=null,g.next=this._drawFirst,this._drawFirst.prev=g,this._drawFirst=g,this._requestRedraw(l)}}});function qj(l){return it.canvas?new Uj(l):null}var wd=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),l3={_initContainer:function(){this._container=Dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Va.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var g=l._container=wd("shape");Ct(g,"leaflet-vml-shape "+(this.options.className||"")),g.coordsize="1 1",l._path=wd("path"),g.appendChild(l._path),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){var g=l._container;this._container.appendChild(g),l.options.interactive&&l.addInteractiveTarget(g)},_removePath:function(l){var g=l._container;ds(g),l.removeInteractiveTarget(g),delete this._layers[d(l)]},_updateStyle:function(l){var g=l._stroke,S=l._fill,D=l.options,Z=l._container;Z.stroked=!!D.stroke,Z.filled=!!D.fill,D.stroke?(g||(g=l._stroke=wd("stroke")),Z.appendChild(g),g.weight=D.weight+"px",g.color=D.color,g.opacity=D.opacity,D.dashArray?g.dashStyle=_(D.dashArray)?D.dashArray.join(" "):D.dashArray.replace(/( *, *)/g," "):g.dashStyle="",g.endcap=D.lineCap.replace("butt","flat"),g.joinstyle=D.lineJoin):g&&(Z.removeChild(g),l._stroke=null),D.fill?(S||(S=l._fill=wd("fill")),Z.appendChild(S),S.color=D.fillColor||D.color,S.opacity=D.fillOpacity):S&&(Z.removeChild(S),l._fill=null)},_updateCircle:function(l){var g=l._point.round(),S=Math.round(l._radius),D=Math.round(l._radiusY||S);this._setPath(l,l._empty()?"M0 0":"AL "+g.x+","+g.y+" "+S+","+D+" 0,"+65535*360)},_setPath:function(l,g){l._path.v=g},_bringToFront:function(l){ml(l._container)},_bringToBack:function(l){pl(l._container)}},Ih=it.vml?wd:ae,jd=Va.extend({_initContainer:function(){this._container=Ih("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ih("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ds(this._container),Jt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Va.prototype._update.call(this);var l=this._bounds,g=l.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(g))&&(this._svgSize=g,S.setAttribute("width",g.x),S.setAttribute("height",g.y)),Ls(S,l.min),S.setAttribute("viewBox",[l.min.x,l.min.y,g.x,g.y].join(" ")),this.fire("update")}},_initPath:function(l){var g=l._path=Ih("path");l.options.className&&Ct(g,l.options.className),l.options.interactive&&Ct(g,"leaflet-interactive"),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){ds(l._path),l.removeInteractiveTarget(l._path),delete this._layers[d(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var g=l._path,S=l.options;g&&(S.stroke?(g.setAttribute("stroke",S.color),g.setAttribute("stroke-opacity",S.opacity),g.setAttribute("stroke-width",S.weight),g.setAttribute("stroke-linecap",S.lineCap),g.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?g.setAttribute("stroke-dasharray",S.dashArray):g.removeAttribute("stroke-dasharray"),S.dashOffset?g.setAttribute("stroke-dashoffset",S.dashOffset):g.removeAttribute("stroke-dashoffset")):g.setAttribute("stroke","none"),S.fill?(g.setAttribute("fill",S.fillColor||S.color),g.setAttribute("fill-opacity",S.fillOpacity),g.setAttribute("fill-rule",S.fillRule||"evenodd")):g.setAttribute("fill","none"))},_updatePoly:function(l,g){this._setPath(l,ee(l._parts,g))},_updateCircle:function(l){var g=l._point,S=Math.max(Math.round(l._radius),1),D=Math.max(Math.round(l._radiusY),1)||S,Z="a"+S+","+D+" 0 1,0 ",te=l._empty()?"M0 0":"M"+(g.x-S)+","+g.y+Z+S*2+",0 "+Z+-S*2+",0 ";this._setPath(l,te)},_setPath:function(l,g){l._path.setAttribute("d",g)},_bringToFront:function(l){ml(l._path)},_bringToBack:function(l){pl(l._path)}});it.vml&&jd.include(l3);function Hj(l){return it.svg||it.vml?new jd(l):null}Lt.include({getRenderer:function(l){var g=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return g||(g=this._renderer=this._createRenderer()),this.hasLayer(g)||this.addLayer(g),g},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var g=this._paneRenderers[l];return g===void 0&&(g=this._createRenderer({pane:l}),this._paneRenderers[l]=g),g},_createRenderer:function(l){return this.options.preferCanvas&&qj(l)||Hj(l)}});var Wj=vl.extend({initialize:function(l,g){vl.prototype.initialize.call(this,this._boundsToLatLngs(l),g)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=q(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function c3(l,g){return new Wj(l,g)}jd.create=Ih,jd.pointsToPath=ee,Ba.geometryToLayer=Eh,Ba.coordsToLatLng=Rg,Ba.coordsToLatLngs=Th,Ba.latLngToCoords=Lg,Ba.latLngsToCoords=Ah,Ba.getFeature=yl,Ba.asFeature=Oh,Lt.mergeOptions({boxZoom:!0});var Zj=na.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){jt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Jt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ds(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),fd(),gg(),this._startPoint=this._map.mouseEventToContainerPoint(l),jt(document,{contextmenu:vo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Dt("div","leaflet-zoom-box",this._container),Ct(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var g=new V(this._point,this._startPoint),S=g.getSize();Ls(this._box,g.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(ds(this._box),_s(this._container,"leaflet-crosshair")),md(),xg(),Jt(document,{contextmenu:vo,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var g=new U(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(g).fire("boxzoomend",{boxZoomBounds:g})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Lt.addInitHook("addHandler","boxZoom",Zj),Lt.mergeOptions({doubleClickZoom:!0});var Gj=na.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var g=this._map,S=g.getZoom(),D=g.options.zoomDelta,Z=l.originalEvent.shiftKey?S-D:S+D;g.options.doubleClickZoom==="center"?g.setZoom(Z):g.setZoomAround(l.containerPoint,Z)}});Lt.addInitHook("addHandler","doubleClickZoom",Gj),Lt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Kj=na.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new gi(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Ct(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){_s(this._map._container,"leaflet-grab"),_s(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var g=q(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(g.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(g.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var g=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(g),this._prunePositions(g)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),g=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=g.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,g){return l-(l-g)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),g=this._offsetLimit;l.x<g.min.x&&(l.x=this._viscousLimit(l.x,g.min.x)),l.y<g.min.y&&(l.y=this._viscousLimit(l.y,g.min.y)),l.x>g.max.x&&(l.x=this._viscousLimit(l.x,g.max.x)),l.y>g.max.y&&(l.y=this._viscousLimit(l.y,g.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,g=Math.round(l/2),S=this._initialWorldOffset,D=this._draggable._newPos.x,Z=(D-g+S)%l+g-S,te=(D+g+S)%l-g-S,fe=Math.abs(Z+S)<Math.abs(te+S)?Z:te;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=fe},_onDragEnd:function(l){var g=this._map,S=g.options,D=!S.inertia||l.noInertia||this._times.length<2;if(g.fire("dragend",l),D)g.fire("moveend");else{this._prunePositions(+new Date);var Z=this._lastPos.subtract(this._positions[0]),te=(this._lastTime-this._times[0])/1e3,fe=S.easeLinearity,_e=Z.multiplyBy(fe/te),Ne=_e.distanceTo([0,0]),Ae=Math.min(S.inertiaMaxSpeed,Ne),Ke=_e.multiplyBy(Ae/Ne),ft=Ae/(S.inertiaDeceleration*fe),Tt=Ke.multiplyBy(-ft/2).round();!Tt.x&&!Tt.y?g.fire("moveend"):(Tt=g._limitOffset(Tt,g.options.maxBounds),A(function(){g.panBy(Tt,{duration:ft,easeLinearity:fe,noMoveStart:!0,animate:!0})}))}}});Lt.addInitHook("addHandler","dragging",Kj),Lt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Yj=na.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),jt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Jt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,g=document.documentElement,S=l.scrollTop||g.scrollTop,D=l.scrollLeft||g.scrollLeft;this._map._container.focus(),window.scrollTo(D,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var g=this._panKeys={},S=this.keyCodes,D,Z;for(D=0,Z=S.left.length;D<Z;D++)g[S.left[D]]=[-1*l,0];for(D=0,Z=S.right.length;D<Z;D++)g[S.right[D]]=[l,0];for(D=0,Z=S.down.length;D<Z;D++)g[S.down[D]]=[0,l];for(D=0,Z=S.up.length;D<Z;D++)g[S.up[D]]=[0,-1*l]},_setZoomDelta:function(l){var g=this._zoomKeys={},S=this.keyCodes,D,Z;for(D=0,Z=S.zoomIn.length;D<Z;D++)g[S.zoomIn[D]]=l;for(D=0,Z=S.zoomOut.length;D<Z;D++)g[S.zoomOut[D]]=-l},_addHooks:function(){jt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Jt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var g=l.keyCode,S=this._map,D;if(g in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(D=this._panKeys[g],l.shiftKey&&(D=I(D).multiplyBy(3)),S.options.maxBounds&&(D=S._limitOffset(I(D),S.options.maxBounds)),S.options.worldCopyJump){var Z=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(D)));S.panTo(Z)}else S.panBy(D)}else if(g in this._zoomKeys)S.setZoom(S.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[g]);else if(g===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;vo(l)}}});Lt.addInitHook("addHandler","keyboard",Yj),Lt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xj=na.extend({addHooks:function(){jt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Jt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var g=wj(l),S=this._map.options.wheelDebounceTime;this._delta+=g,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var D=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),D),vo(l)},_performZoom:function(){var l=this._map,g=l.getZoom(),S=this._map.options.zoomSnap||0;l._stop();var D=this._delta/(this._map.options.wheelPxPerZoomLevel*4),Z=4*Math.log(2/(1+Math.exp(-Math.abs(D))))/Math.LN2,te=S?Math.ceil(Z/S)*S:Z,fe=l._limitZoom(g+(this._delta>0?te:-te))-g;this._delta=0,this._startTime=null,fe&&(l.options.scrollWheelZoom==="center"?l.setZoom(g+fe):l.setZoomAround(this._lastMousePos,g+fe))}});Lt.addInitHook("addHandler","scrollWheelZoom",Xj);var d3=600;Lt.mergeOptions({tapHold:it.touchNative&&it.safari&&it.mobile,tapTolerance:15});var Jj=na.extend({addHooks:function(){jt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Jt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var g=l.touches[0];this._startPos=this._newPos=new G(g.clientX,g.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(jt(document,"touchend",Js),jt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",g))},this),d3),jt(document,"touchend touchcancel contextmenu",this._cancel,this),jt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Jt(document,"touchend",Js),Jt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Jt(document,"touchend touchcancel contextmenu",this._cancel,this),Jt(document,"touchmove",this._onMove,this)},_onMove:function(l){var g=l.touches[0];this._newPos=new G(g.clientX,g.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,g){var S=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY});S._simulated=!0,g.target.dispatchEvent(S)}});Lt.addInitHook("addHandler","tapHold",Jj),Lt.mergeOptions({touchZoom:it.touch,bounceAtZoomLimits:!0});var Qj=na.extend({addHooks:function(){Ct(this._map._container,"leaflet-touch-zoom"),jt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){_s(this._map._container,"leaflet-touch-zoom"),Jt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var g=this._map;if(!(!l.touches||l.touches.length!==2||g._animatingZoom||this._zooming)){var S=g.mouseEventToContainerPoint(l.touches[0]),D=g.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=g.getSize()._divideBy(2),this._startLatLng=g.containerPointToLatLng(this._centerPoint),g.options.touchZoom!=="center"&&(this._pinchStartLatLng=g.containerPointToLatLng(S.add(D)._divideBy(2))),this._startDist=S.distanceTo(D),this._startZoom=g.getZoom(),this._moved=!1,this._zooming=!0,g._stop(),jt(document,"touchmove",this._onTouchMove,this),jt(document,"touchend touchcancel",this._onTouchEnd,this),Js(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var g=this._map,S=g.mouseEventToContainerPoint(l.touches[0]),D=g.mouseEventToContainerPoint(l.touches[1]),Z=S.distanceTo(D)/this._startDist;if(this._zoom=g.getScaleZoom(Z,this._startZoom),!g.options.bounceAtZoomLimits&&(this._zoom<g.getMinZoom()&&Z<1||this._zoom>g.getMaxZoom()&&Z>1)&&(this._zoom=g._limitZoom(this._zoom)),g.options.touchZoom==="center"){if(this._center=this._startLatLng,Z===1)return}else{var te=S._add(D)._divideBy(2)._subtract(this._centerPoint);if(Z===1&&te.x===0&&te.y===0)return;this._center=g.unproject(g.project(this._pinchStartLatLng,this._zoom).subtract(te),this._zoom)}this._moved||(g._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var fe=o(g._move,g,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=A(fe,this,!0),Js(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,C(this._animRequest),Jt(document,"touchmove",this._onTouchMove,this),Jt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Lt.addInitHook("addHandler","touchZoom",Qj),Lt.BoxZoom=Zj,Lt.DoubleClickZoom=Gj,Lt.Drag=Kj,Lt.Keyboard=Yj,Lt.ScrollWheelZoom=Xj,Lt.TapHold=Jj,Lt.TouchZoom=Qj,n.Bounds=V,n.Browser=it,n.CRS=W,n.Canvas=Uj,n.Circle=Og,n.CircleMarker=Ph,n.Class=P,n.Control=Cr,n.DivIcon=zj,n.DivOverlay=ra,n.DomEvent=P5,n.DomUtil=k5,n.Draggable=gi,n.Evented=J,n.FeatureGroup=$a,n.GeoJSON=Ba,n.GridLayer=bd,n.Handler=na,n.Icon=xl,n.ImageOverlay=Rh,n.LatLng=K,n.LatLngBounds=U,n.Layer=Pr,n.LayerGroup=gl,n.LineUtil=B5,n.Map=Lt,n.Marker=Ch,n.Mixin=M5,n.Path=xi,n.Point=G,n.PolyUtil=I5,n.Polygon=vl,n.Polyline=za,n.Popup=Lh,n.PosAnimation=jj,n.Projection=V5,n.Rectangle=Wj,n.Renderer=Va,n.SVG=jd,n.SVGOverlay=$j,n.TileLayer=bl,n.Tooltip=Mh,n.Transformation=ue,n.Util=z,n.VideoOverlay=Fj,n.bind=o,n.bounds=H,n.canvas=qj,n.circle=Y5,n.circleMarker=K5,n.control=xd,n.divIcon=a3,n.extend=a,n.featureGroup=W5,n.geoJSON=Dj,n.geoJson=Q5,n.gridLayer=i3,n.icon=Z5,n.imageOverlay=e3,n.latLng=B,n.latLngBounds=q,n.layerGroup=H5,n.map=E5,n.marker=G5,n.point=I,n.polygon=J5,n.polyline=X5,n.popup=n3,n.rectangle=c3,n.setOptions=v,n.stamp=d,n.svg=Hj,n.svgOverlay=s3,n.tileLayer=Bj,n.tooltip=r3,n.transformation=me,n.version=r,n.videoOverlay=t3;var u3=window.L;n.noConflict=function(){return window.L=u3,this},window.L=n})})(My,My.exports);var vh=My.exports;const Uw=Gm(vh);function qw(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Hw(e,t){return t==null?function(r,a){const i=j.useRef();return i.current||(i.current=e(r,a)),i}:function(r,a){const i=j.useRef();i.current||(i.current=e(r,a));const o=j.useRef(r),{instance:c}=i.current;return j.useEffect(function(){o.current!==r&&(t(c,r,o.current),o.current=r)},[c,r,a]),i}}function HR(e,t){j.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var i;(i=t.layerContainer)==null||i.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function WR(e){return function(n){const r=Bw(),a=e(Vw(n,r),r);return HZ(r.map,n.attribution),qR(a.current,n.eventHandlers),HR(a.current,r),a}}function YZ(e,t){const n=j.useRef();j.useEffect(function(){if(t.pathOptions!==n.current){const a=t.pathOptions??{};e.instance.setStyle(a),n.current=a}},[e,t])}function XZ(e){return function(n){const r=Bw(),a=e(Vw(n,r),r);return qR(a.current,n.eventHandlers),HR(a.current,r),YZ(a.current,n),a}}function JZ(e,t){const n=Hw(e,t),r=WR(n);return UR(r)}function QZ(e,t){const n=Hw(e,t),r=XZ(n);return UR(r)}function eG(e,t){const n=Hw(e,t),r=WR(n);return KZ(r)}function tG(e,t,n){const{opacity:r,zIndex:a}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),a!=null&&a!==n.zIndex&&e.setZIndex(a)}function ZR(){return Bw().map}function GR(e){const t=ZR();return j.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const sG=QZ(function({center:t,children:n,...r},a){const i=new vh.Circle(t,r);return qw(i,zR(a,{overlayContainer:i}))},WZ);function Iy(){return Iy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iy.apply(this,arguments)}function nG({bounds:e,boundsOptions:t,center:n,children:r,className:a,id:i,placeholder:o,style:c,whenReady:d,zoom:h,...m},u){const[f]=j.useState({className:a,id:i,style:c}),[p,x]=j.useState(null);j.useImperativeHandle(u,()=>(p==null?void 0:p.map)??null,[p]);const v=j.useCallback(w=>{if(w!==null&&p===null){const b=new vh.Map(w,m);n!=null&&h!=null?b.setView(n,h):e!=null&&b.fitBounds(e,t),d!=null&&b.whenReady(d),x(GZ(b))}},[]);j.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const y=p?Ce.createElement(VR,{value:p},r):o??null;return Ce.createElement("div",Iy({},f,{ref:v}),y)}const KR=j.forwardRef(nG),Dy=JZ(function({position:t,...n},r){const a=new vh.Marker(t,n);return qw(a,zR(r,{overlayContainer:a}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),YR=eG(function({url:t,...n},r){const a=new vh.TileLayer(t,Vw(n,r));return qw(a,r)},function(t,n,r){tG(t,n,r);const{url:a}=n;a!=null&&a!==r.url&&t.setUrl(a)}),rG=Uw.divIcon({className:"custom-marker",html:'<div style="background-color: #ef4444; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]}),aG=Uw.divIcon({className:"vendor-marker",html:'<div style="background-color: #10b981; width: 24px; height: 24px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 0 8px rgba(0,0,0,0.3);"></div>',iconSize:[24,24],iconAnchor:[12,12]}),iG=({onLocationSelect:e,onClose:t,vendorLocation:n,maxRadius:r=10,vendorName:a="Vendor"})=>{const[i,o]=j.useState(null),[c,d]=j.useState(""),[h,m]=j.useState([]),[u,f]=j.useState(!0),[p,x]=j.useState(""),[v,y]=j.useState([27.7172,85.324]),w=()=>(GR({click($){const{lat:M,lng:A}=$.latlng;N(M,A),b(M,A)}}),null),b=async($,M)=>{try{const C=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${$}&lon=${M}&addressdetails=1`)).json();if(C.address){const z=C.address.road||C.address.neighbourhood,P=C.address.neighbourhood||C.address.suburb||C.address.city||C.address.town,O=`${z||P||"Unknown Location"}, ${C.address.city||C.address.town||C.address.state||""}`;x(O)}}catch(A){console.error("Error fetching address:",A),x(`${$.toFixed(4)}, ${M.toFixed(4)}`)}};j.useEffect(()=>{n&&y([n.lat,n.lng])},[n]);const _=($,M,A,C)=>{const P=(A-$)*Math.PI/180,O=(C-M)*Math.PI/180,Y=Math.sin(P/2)*Math.sin(P/2)+Math.cos($*Math.PI/180)*Math.cos(A*Math.PI/180)*Math.sin(O/2)*Math.sin(O/2);return 6371*(2*Math.atan2(Math.sqrt(Y),Math.sqrt(1-Y)))},N=($,M)=>{if(o({lat:$,lng:M}),n){const A=_($,M,n.lat,n.lng);f(A<=r)}},k=()=>{i&&u&&e(i.lat,i.lng,p||`${i.lat.toFixed(4)}, ${i.lng.toFixed(4)}`)};j.useEffect(()=>{const $=setTimeout(()=>{c.trim()?E():m([])},300);return()=>clearTimeout($)},[c]);const E=async()=>{if(!c.trim()){m([]);return}try{const M=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}&limit=5&addressdetails=1`)).json();m(M)}catch($){console.error("Geocoding error:",$),m([])}},T=$=>{const M=parseFloat($.lat),A=parseFloat($.lon);y([M,A]),N(M,A),x($.display_name),m([]),d("")},R=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition($=>{const{latitude:M,longitude:A}=$.coords;y([M,A]),N(M,A),b(M,A)},$=>{console.error("Geolocation error:",$)})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[95vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Select Delivery Location"}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(Ys,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(je,{placeholder:"Search for an address...",value:c,onChange:$=>d($.target.value)}),h.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-10 max-h-32 overflow-y-auto",children:h.map(($,M)=>s.jsx("div",{className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>T($),children:s.jsx("p",{className:"text-xs font-medium text-gray-900",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:$.display_name})},M))})]}),s.jsx(ie,{onClick:R,size:"sm",variant:"outline",children:s.jsx($P,{className:"h-4 w-4"})})]})}),s.jsx("div",{className:"h-64 rounded-lg overflow-hidden border",children:s.jsxs(KR,{center:v,zoom:13,style:{height:"100%",width:"100%"},children:[s.jsx(YR,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),n&&s.jsxs(s.Fragment,{children:[s.jsx(Dy,{position:[n.lat,n.lng],icon:aG}),s.jsx(sG,{center:[n.lat,n.lng],radius:r*1e3,pathOptions:{color:"#10b981",fillColor:"#10b981",fillOpacity:.1,weight:2}})]}),i&&s.jsx(Dy,{position:[i.lat,i.lng],icon:rG}),s.jsx(w,{})]},`${v[0]}-${v[1]}`)}),i&&s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Selected Location:"}),s.jsx("p",{className:"text-sm text-gray-600",children:p}),n&&s.jsxs("p",{className:`text-sm mt-2 ${u?"text-green-600":"text-red-600"}`,children:["Distance from ",a,": ",_(i.lat,i.lng,n.lat,n.lng).toFixed(1),"km",!u&&` (exceeds ${r}km delivery limit)`]})]})]}),s.jsxs("div",{className:"flex gap-2 p-4 border-t flex-shrink-0",children:[s.jsx(ie,{variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),s.jsx(ie,{onClick:k,disabled:!i||!u,className:"flex-1",children:"Confirm Location"})]})]})})};class oG{async getAuthHeaders(){var r;const t=await Se.getToken(),n=await Se.getUser();return(n==null?void 0:n.user_type)==="vendor"&&((r=n==null?void 0:n.available_roles)!=null&&r.includes("customer"))?{"Content-Type":"application/json","ngrok-skip-browser-warning":"true",...t&&{Authorization:`Token ${t}`}}:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true",...t&&{Authorization:`Token ${t}`}}}async createOrder(t){const n=await fetch(`${Qe}orders/create/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to create order")}const r=await n.json();return this.notifyVendorOfNewOrder(r.order),r}notifyVendorOfNewOrder(t){window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderCreated",{detail:{order:t}}))}async getOrders(){const t=await fetch(`${Qe}orders/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch orders");const n=await t.json();return n.results||n}async getOrdersPaginated(t=1,n=10){if(!await Se.isAuthenticated())return{results:[],next:null,count:0};const a=new URLSearchParams({page:t.toString(),page_size:n.toString()}),i=await fetch(`${Qe}orders/?${a}`,{headers:await this.getAuthHeaders()});if(!i.ok){if(i.status===401)return{results:[],next:null,count:0};throw new Error("Failed to fetch orders")}return i.json()}async getOrder(t){const n=await fetch(`${Qe}orders/${t}/`,{headers:await this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch order");return n.json()}async cancelOrder(t,n="Cancelled by customer"){const r=await fetch(`${Qe}orders/${t}/cancel/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({reason:n})});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to cancel order")}return r.json()}async createReview(t,n){const r=await fetch(`${Qe}orders/${t}/review/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to create review")}return r.json()}async requestRefund(t,n){const r=await fetch(`${Qe}orders/${t}/refund/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to request refund")}return r.json()}async getPendingOrders(){const t=await fetch(`${Qe}orders/vendor/pending/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending orders");return t.json()}async acceptOrder(t){const n=await fetch(`${Qe}orders/${t}/accept/`,{method:"POST",headers:await this.getAuthHeaders()});if(!n.ok){const a=await n.json();throw new Error(a.error||"Failed to accept order")}const r=await n.json();return this.notifyCustomerOfOrderUpdate(r.order,"accepted"),r}notifyCustomerOfOrderUpdate(t,n){window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{order:t,status:n}}))}async rejectOrder(t,n="Rejected by vendor"){const r=await fetch(`${Qe}orders/${t}/reject/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({reason:n})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to reject order")}const a=await r.json();return this.notifyCustomerOfOrderUpdate(a.order,"rejected"),a}}const Em=new oG,lG=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function cG(){var Q,se;const e=nt(),{cart:t}=Gn();Rn();const{toast:n}=es(),[r,a]=j.useState("cash_on_delivery"),[i,o]=j.useState("current"),[c,d]=j.useState(null),[h,m]=j.useState("Detecting location..."),[u,f]=j.useState({lat:null,lng:null,address:""}),[p,x]=j.useState(!1),[v,y]=j.useState(null),[w,b]=j.useState({phone:"",instructions:""}),[_,N]=j.useState(null),[k,E]=j.useState("delivery"),[T,R]=j.useState(""),[$,M]=j.useState([]),[A,C]=j.useState(!1);j.useEffect(()=>{var pe;const ne=dt.getLocation();if(ne)d(ne),P(ne.latitude,ne.longitude).then(m);else return dt.startTracking(),dt.subscribe(async ke=>{if(ke){d(ke);const Be=await P(ke.latitude,ke.longitude);m(Be)}});((pe=t==null?void 0:t.items)==null?void 0:pe.length)>0&&O(t.items[0].product.vendor_id),(async()=>{await Se.getToken()&&z()})()},[t]);const z=async()=>{try{const ne=await Se.getToken(),ve=await fetch(`${Qe}profile/`,{headers:{Authorization:`Token ${ne}`,"ngrok-skip-browser-warning":"true"}});if(ve.ok){const pe=await ve.json();N(pe),b(ge=>({...ge,phone:pe.phone_number||""}))}}catch(ne){console.error("Failed to fetch user info:",ne)}},P=async(ne,ve)=>{try{const ge=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${ne}&lon=${ve}&addressdetails=1`)).json();if(ge.address){const ke=ge.address.road||ge.address.neighbourhood,Be=ge.address.neighbourhood||ge.address.suburb||ge.address.city||ge.address.town;return`${ke||Be||"Unknown Location"}, ${ge.address.city||ge.address.town||ge.address.state||""}`}return`${ne.toFixed(4)}, ${ve.toFixed(4)}`}catch{return`${ne.toFixed(4)}, ${ve.toFixed(4)}`}},O=async ne=>{try{const ve=await fetch(`${Qe}vendors/${ne}/`,{headers:{"ngrok-skip-browser-warning":"true"}});if(ve.ok){const pe=await ve.json();y(pe)}}catch(ve){console.error("Failed to fetch vendor info:",ve)}},Y=Zn(),G=new URLSearchParams(window.location.search).get("directBuy")==="true",F=G?JSON.parse(localStorage.getItem("buyNowProduct")||"null"):null,I=(Q=Y.state)!=null&&Q.directBuy?Y.state:G&&F?{directBuy:!0,product:F}:null,V=(se=Y.state)==null?void 0:se.selectedItems;console.log("Checkout - Location state:",Y.state),console.log("Checkout - URL params directBuy:",G),console.log("Checkout - buyNowProduct from localStorage:",F),console.log("Checkout - Final directBuyData:",I);const H=I?[{id:Date.now(),product:{id:I.product.id,name:I.product.name,price:I.product.price,vendor_name:I.product.vendor_name,vendor_id:I.product.vendor_id,images:I.product.images,free_delivery:I.product.free_delivery,custom_delivery_fee_enabled:I.product.custom_delivery_fee_enabled,custom_delivery_fee:I.product.custom_delivery_fee},quantity:I.product.quantity,total_price:(parseFloat(I.product.price)*I.product.quantity).toString()}]:V||(t==null?void 0:t.items)||[];console.log("Checkout - Cart items:",H),console.log("Checkout - Direct buy data:",I),console.log("Checkout - Buy now product from localStorage:",F);const U=H.reduce((ne,ve)=>{const pe=parseFloat(ve.product.price||ve.total_price||0);return console.log(`Checkout - Item: ${ve.product.name}, Price: ${ve.product.price}, Total: ${ve.total_price}, Calculated: ${pe}, Quantity: ${ve.quantity}`),ne+pe*ve.quantity},0),K=(()=>{let ne=0,ve=!1;return console.log("Checkout - Calculating delivery fee for items:",H),H.forEach(pe=>{const ge=pe.product;if(console.log("Checkout - Processing item:",{name:ge.name,free_delivery:ge.free_delivery,custom_delivery_fee_enabled:ge.custom_delivery_fee_enabled,custom_delivery_fee:ge.custom_delivery_fee}),ge.free_delivery===!0){console.log("Checkout - Free delivery for:",ge.name);return}else if(ge.custom_delivery_fee_enabled===!0&&ge.custom_delivery_fee!==null&&ge.custom_delivery_fee!==void 0){const ke=parseFloat(ge.custom_delivery_fee.toString());console.log("Checkout - Custom delivery fee for:",ge.name,"Fee:",ke),ne+=ke}else console.log("Checkout - Undetermined delivery fee for:",ge.name),ve=!0}),console.log("Checkout - Final delivery calculation:",{fee:ne,hasUndetermined:ve}),{fee:ne,hasUndetermined:ve}})(),B=K.fee,W=K.hasUndetermined,oe=U+B,X=ne=>/^(98|97)\d{8}$/.test(ne.replace(/\s+/g,"")),re=(ne,ve)=>{if(ne==="phone"){const pe=ve.replace(/[^0-9]/g,"");pe.length<=10&&b(ge=>({...ge,[ne]:pe}))}else b(pe=>({...pe,[ne]:ve}))},ue=(ne,ve)=>{if(!v||!v.latitude||!v.longitude||!v.delivery_radius)return{valid:!0,distance:0};const pe=lG(ne,ve,v.latitude,v.longitude);return{valid:pe<=v.delivery_radius,distance:pe,maxRadius:v.delivery_radius}},me=ne=>{o(ne),ne==="custom"&&v?x(!0):ne==="custom"&&!v&&n({title:"Vendor Information Loading",description:"Please wait for vendor information to load before selecting map location",variant:"destructive"})},we=(ne,ve,pe)=>{const ge=ue(ne,ve);if(!ge.valid){n({title:"Location Out of Range",description:`This location is ${ge.distance.toFixed(1)}km away. Maximum delivery range is ${ge.maxRadius}km.`,variant:"destructive"});return}f({lat:ne,lng:ve,address:pe}),x(!1),n({title:"Location Selected",description:`Delivery location set (${ge.distance.toFixed(1)}km from vendor)`})},be=()=>{const ne=i==="current"?c:u.lat,ve=(_==null?void 0:_.phone_number)||w.phone,pe=ve&&X(ve);return ne&&pe},ae=async()=>{if(!await Se.getToken()){n({title:"Login Required",description:"Please login to place an order",variant:"destructive"}),e("/login");return}if(!be()){n({title:"Missing Information",description:"Please complete delivery information",variant:"destructive"}),E("delivery");return}const ve=i==="current"?c:u;if(!ve||!ve.latitude&&!ve.lat){n({title:"Location Required",description:"Please select a delivery location",variant:"destructive"});return}const pe=ve.latitude||ve.lat,ge=ve.longitude||ve.lng,ke=ue(pe,ge);if(!ke.valid){n({title:"Delivery Not Available",description:`Selected location is outside delivery range (${ke.distance.toFixed(1)}km > ${ke.maxRadius}km)`,variant:"destructive"});return}try{if(console.log("Checkout - About to create order with cartItems:",H),!H||H.length===0){n({title:"No Items",description:"No items found to place order. Please add items to cart first.",variant:"destructive"});return}const Be={items:H.map(Xe=>({product_id:Xe.product.id,quantity:Xe.quantity,price:parseFloat(Xe.product.price||Xe.total_price||0),delivery_fee:Xe.product.free_delivery===!0?0:Xe.product.custom_delivery_fee_enabled===!0&&Xe.product.custom_delivery_fee!==null&&Xe.product.custom_delivery_fee!==void 0?parseFloat(Xe.product.custom_delivery_fee.toString()):0})),delivery_name:(_==null?void 0:_.username)||(_==null?void 0:_.first_name)||"Customer",delivery_phone:(_==null?void 0:_.phone_number)||w.phone,delivery_address:i==="current"?h:u.address,delivery_latitude:pe,delivery_longitude:ge,delivery_instructions:w.instructions,payment_method:r,total_amount:oe,subtotal:U,delivery_fee:B,notes:`Distance: ${ke.distance.toFixed(1)}km from vendor. Items: ${H.map(Xe=>`${Xe.product.name} (${Xe.quantity}x)`).join(", ")}`},qe=await Em.createOrder(Be),gt=qe.orders||[qe.order],ct=qe.total_orders||gt.length;if(n({title:"Order Placed Successfully!",description:ct>1?`${ct} orders created for different vendors`:`Order #${gt[0].order_number} has been placed.`}),"Notification"in window&&Notification.permission==="granted"){const Xe=gt[0];new Notification("New Order Placed!",{body:ct>1?`${ct} orders created for ${gt.reduce((ce,Te)=>ce+parseFloat(Te.total_amount),0).toFixed(2)}`:`Order #${Xe.order_number} for ${Xe.total_amount}`,icon:"/favicon.ico",tag:`order-${Xe.id}`,requireInteraction:!0})}if(window.dispatchEvent&&gt.forEach(Xe=>{window.dispatchEvent(new CustomEvent("orderCreated",{detail:{order:Xe}}))}),I&&G&&localStorage.removeItem("buyNowProduct"),!I&&V){const Xe=await Se.getToken();for(const ce of V)try{await fetch(`${Qe}cart/items/${ce.id}/remove/`,{method:"DELETE",headers:{Authorization:`Token ${Xe}`,"ngrok-skip-browser-warning":"true"}})}catch(Te){console.error("Error removing cart item:",Te)}}ct===1?e(`/order-confirmation/${gt[0].id}`,{state:{order:gt[0]}}):e("/orders",{state:{message:`${ct} orders created successfully`,newOrders:gt}})}catch(Be){console.error("Order creation error:",Be),n({title:"Order Failed",description:Be.message||"Network error. Please try again.",variant:"destructive"})}},ee=()=>c?h:"Detecting location...",ye=()=>u.lat?u.address||`Custom Location (${u.lat.toFixed(4)}, ${u.lng.toFixed(4)})`:"Select on map",le=async ne=>{if(!ne.trim()){M([]),C(!1);return}try{const pe=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(ne)}&limit=5&addressdetails=1`)).json();M(pe),C(!0)}catch(ve){console.error("Location search error:",ve),M([]),C(!1)}},de=async ne=>{const ve=parseFloat(ne.lat),pe=parseFloat(ne.lon),ge=ne.display_name,ke=ue(ve,pe);if(!ke.valid){n({title:"Location Out of Range",description:`This location is ${ke.distance.toFixed(1)}km away. Maximum delivery range is ${ke.maxRadius}km.`,variant:"destructive"});return}f({lat:ve,lng:pe,address:ge}),o("custom"),R(""),M([]),C(!1),n({title:"Location Selected",description:`Delivery location set (${ke.distance.toFixed(1)}km from vendor)`})};return j.useEffect(()=>{const ne=setTimeout(()=>{T.trim()?le(T):(M([]),C(!1))},300);return()=>clearTimeout(ne)},[T]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 font-sans",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-all",children:s.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Checkout"}),s.jsx("div",{className:"w-6"})," "]})}),s.jsx("main",{className:"max-w-4xl mx-auto p-6 pb-32",children:s.jsxs(Ia,{value:k,onValueChange:E,className:"space-y-6",children:[s.jsxs(Qr,{className:"grid w-full grid-cols-2",children:[s.jsxs(Ot,{value:"delivery",className:"flex items-center gap-2",children:[be()&&s.jsx(pp,{className:"h-4 w-4"}),"Delivery"]}),s.jsx(Ot,{value:"summary",disabled:!be(),children:"Summary"})]}),s.jsx(xt,{value:"delivery",className:"space-y-6",children:s.jsxs(Ee,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[s.jsx(St,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsxs(Pt,{className:"flex items-center gap-3 text-xl font-semibold text-gray-800",children:[s.jsx(Gt,{className:"h-6 w-6 text-emerald-600"}),"Delivery Location"]})}),s.jsxs(Oe,{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Gt,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Delivery Location"}),s.jsx("p",{className:"text-base font-semibold text-gray-800",children:i==="current"?ee():ye()}),(i==="current"&&c||i==="custom"&&u.lat)&&v&&s.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[i==="current"?ue(c.latitude,c.longitude).distance.toFixed(1):ue(u.lat,u.lng).distance.toFixed(1),"km from ",v.business_name]})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Search Location"}),s.jsxs("div",{className:"relative",children:[s.jsx(je,{placeholder:"Search for an address...",value:T,onChange:ne=>R(ne.target.value),onFocus:()=>T&&C(!0),className:"border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl"}),A&&$.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-xl shadow-lg z-10 max-h-48 overflow-y-auto mt-1",children:$.map((ne,ve)=>s.jsx("div",{className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 first:rounded-t-xl last:rounded-b-xl",onMouseDown:pe=>pe.preventDefault(),onClick:()=>de(ne),children:s.jsx("p",{className:"text-sm font-medium text-gray-900",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:ne.display_name})},ve))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Choose Delivery Location *"}),s.jsxs(DR,{value:i,onValueChange:me,className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all cursor-pointer",children:[s.jsx(Ly,{value:"current",id:"current",className:"text-emerald-600 border-gray-300"}),s.jsxs(xe,{htmlFor:"current",className:"flex items-center gap-3 flex-1 cursor-pointer",children:[s.jsx($P,{className:"h-5 w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-base font-medium text-gray-800",children:"Use Current Location"}),s.jsx("p",{className:"text-sm text-gray-500",children:ee()}),c&&v&&s.jsxs("p",{className:"text-xs text-emerald-600",children:[ue(c.latitude,c.longitude).distance.toFixed(1),"km from vendor"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all cursor-pointer",children:[s.jsx(Ly,{value:"custom",id:"custom",className:"text-emerald-600 border-gray-300"}),s.jsxs(xe,{htmlFor:"custom",className:"flex items-center gap-3 flex-1 cursor-pointer",children:[s.jsx(s6,{className:"h-5 w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-base font-medium text-gray-800",children:"Choose on Map"}),s.jsx("p",{className:"text-sm text-gray-500",children:ye()}),u.lat&&v&&s.jsxs("p",{className:"text-xs text-emerald-600",children:[ue(u.lat,u.lng).distance.toFixed(1),"km from vendor"]})]})]})]}),i==="custom"&&!u.lat&&s.jsx("div",{className:"ml-8",children:s.jsx(ie,{onClick:()=>v?x(!0):null,disabled:!v,variant:"outline",className:"text-sm px-4 py-2 rounded-lg",children:v?"Open Map":"Loading vendor info..."})})]})]}),!(_!=null&&_.phone_number)&&s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"Phone Number *"}),s.jsx(je,{id:"phone",placeholder:"98XXXXXXXX or 97XXXXXXXX",value:w.phone,onChange:ne=>re("phone",ne.target.value),className:`mt-1 border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl transition-all ${w.phone&&!X(w.phone)?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`}),w.phone&&!X(w.phone)&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a valid Nepali mobile number (98XXXXXXXX or 97XXXXXXXX)"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"instructions",className:"text-sm font-medium text-gray-700",children:"Delivery Instructions (Optional)"}),s.jsx(Ws,{id:"instructions",placeholder:"Any special instructions for delivery",value:w.instructions,onChange:ne=>re("instructions",ne.target.value),rows:3,className:"mt-1 border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl transition-all"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ie,{onClick:()=>E("summary"),disabled:!be(),className:"px-8 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl",children:"Continue to Summary"})})]})]})}),s.jsx(xt,{value:"summary",className:"space-y-6",children:s.jsxs(Ee,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[s.jsx(St,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Pt,{className:"text-xl font-semibold text-gray-800",children:"Order Summary"})}),s.jsxs(Oe,{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Gt,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Delivery Location"}),s.jsx("p",{className:"text-base font-semibold text-gray-800",children:i==="current"?ee():ye()}),(i==="current"&&c||i==="custom"&&u.lat)&&v&&s.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[i==="current"?ue(c.latitude,c.longitude).distance.toFixed(1):ue(u.lat,u.lng).distance.toFixed(1),"km from ",v.business_name]})]})]})}),s.jsx(Pa,{className:"my-4 bg-gray-200"}),H.map(ne=>{var ve,pe;return s.jsxs("div",{className:"flex items-center gap-4 py-4 border-b border-gray-100",children:[s.jsx("img",{src:Us((pe=(ve=ne.product.images)==null?void 0:ve[0])==null?void 0:pe.image_url),alt:ne.product.name,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 shadow-sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-lg text-gray-800",children:ne.product.name}),s.jsx("p",{className:"text-sm text-gray-500",children:ne.product.vendor_name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Quantity: ",ne.quantity]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Price: ",parseFloat(ne.product.price||ne.total_price||0).toFixed(2)," each"]}),ne.product.free_delivery===!0&&s.jsx("p",{className:"text-xs text-green-600 font-medium",children:" Free Delivery"}),ne.product.custom_delivery_fee_enabled===!0&&ne.product.custom_delivery_fee!==null&&ne.product.custom_delivery_fee!==void 0&&ne.product.free_delivery!==!0&&s.jsxs("p",{className:"text-xs text-orange-600",children:["Delivery: ",parseFloat(ne.product.custom_delivery_fee.toString()).toFixed(2)]}),ne.product.free_delivery!==!0&&(ne.product.custom_delivery_fee_enabled!==!0||ne.product.custom_delivery_fee===null||ne.product.custom_delivery_fee===void 0)&&s.jsx("p",{className:"text-xs text-orange-600",children:"Delivery: To be determined"})]}),s.jsxs("p",{className:"font-semibold text-lg text-gray-800",children:["",(parseFloat(ne.product.price||ne.total_price||0)*ne.quantity).toFixed(2)]})]},ne.id)}),s.jsx(Pa,{className:"my-4 bg-gray-200"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[s.jsx("h4",{className:"font-semibold text-emerald-800 mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-base text-gray-700",children:[s.jsxs("span",{children:["Subtotal (",H.reduce((ne,ve)=>ne+ve.quantity,0)," items)"]}),s.jsxs("span",{className:"font-semibold",children:["",U.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-base text-gray-700",children:[s.jsx("span",{children:"Delivery Fee"}),s.jsx("span",{className:"font-semibold",children:B===0&&!W?s.jsx("span",{className:"text-green-600",children:"Free"}):W?s.jsx("span",{className:"text-orange-600",children:"To be determined"}):`${B.toFixed(2)}`})]}),(B>0||W)&&s.jsx("p",{className:"text-xs text-gray-500",children:W?"Delivery fee will be determined based on your location":"Delivery fees are set by individual vendors"})]})]}),s.jsx(Pa,{className:"my-2 bg-gray-200"}),s.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-800",children:[s.jsx("span",{children:"Total Amount"}),s.jsxs("span",{children:["",oe.toFixed(2)]})]})]}),s.jsx("div",{className:"flex justify-between",children:s.jsx(ie,{variant:"outline",onClick:()=>E("delivery"),className:"px-8 py-2 rounded-xl",children:"Back to Delivery"})})]})]})})]})}),k==="summary"&&s.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-2xl py-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:["",oe.toFixed(2)]})]}),s.jsx(ie,{onClick:ae,disabled:!be(),className:"px-10 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-bold text-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Place Order"})]})}),p&&v&&s.jsx(iG,{onLocationSelect:we,onClose:()=>x(!1),vendorLocation:{lat:v.latitude,lng:v.longitude},maxRadius:v.delivery_radius,vendorName:v.business_name})]})}function dG(){var u,f;const e=nt(),{orderId:t}=Tp(),n=Zn(),{toast:r}=es(),[a,i]=j.useState(((u=n.state)==null?void 0:u.order)||null),[o,c]=j.useState(!a);j.useEffect(()=>{!a&&t&&d()},[t,a]);const d=async()=>{try{const p=await Em.getOrder(parseInt(t));i(p)}catch(p){console.error("Error fetching order:",p),r({title:"Error",description:p.message||"Failed to load order details",variant:"destructive"}),e("/")}finally{c(!1)}},h=p=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",out_for_delivery:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[p]||"bg-gray-100 text-gray-800",m=p=>({pending:"Order Placed",confirmed:"Confirmed",preparing:"Preparing",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"})[p]||p;return o?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})}):a?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Order Confirmation"}),s.jsx("div",{className:"w-6"})]})}),s.jsxs("main",{className:"max-w-4xl mx-auto p-6 pb-32",children:[s.jsx(Ee,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:s.jsxs(Oe,{className:"p-8 text-center",children:[s.jsx(oh,{className:"h-16 w-16 mx-auto mb-4 text-emerald-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Order Placed Successfully!"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Your order #",a.order_number," has been placed and is being processed."]}),s.jsx(Fe,{className:`${h(a.status)} px-4 py-2 text-sm font-medium`,children:m(a.status)})]})}),s.jsxs(Ee,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:[s.jsx(St,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Pt,{className:"text-xl font-semibold text-gray-800",children:"Order Details"})}),s.jsx(Oe,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Order Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Number:"}),s.jsxs("span",{className:"font-medium",children:["#",a.order_number]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Date:"}),s.jsx("span",{className:"font-medium",children:new Date(a.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),s.jsx("span",{className:"font-medium capitalize",children:a.payment_method})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),s.jsxs("span",{className:"font-bold text-emerald-600",children:["",parseFloat(a.total_amount).toFixed(2)]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Delivery Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Gt,{className:"h-4 w-4 text-emerald-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:a.delivery_name}),s.jsx("p",{className:"text-gray-600",children:a.delivery_address})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ch,{className:"h-4 w-4 text-emerald-600"}),s.jsx("span",{className:"text-gray-600",children:a.delivery_phone})]}),a.delivery_instructions&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Wr,{className:"h-4 w-4 text-emerald-600 mt-0.5"}),s.jsx("p",{className:"text-gray-600 text-xs",children:a.delivery_instructions})]})]})]})]})})]}),s.jsxs(Ee,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:[s.jsx(St,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Pt,{className:"text-xl font-semibold text-gray-800",children:"Order Items"})}),s.jsxs(Oe,{className:"p-6",children:[s.jsx("div",{className:"space-y-4",children:(f=a.items)==null?void 0:f.map(p=>{var x,v,y;return s.jsxs("div",{className:"flex items-center gap-4 py-4 border-b border-gray-100 last:border-b-0",children:[s.jsx("img",{src:((y=(v=(x=p.product_details)==null?void 0:x.images)==null?void 0:v[0])==null?void 0:y.image_url)||"/placeholder-product.jpg",alt:p.product_name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:p.product_name}),s.jsx("p",{className:"text-sm text-gray-600",children:p.vendor_name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",p.quantity]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-gray-800",children:["",parseFloat(p.total_price).toFixed(2)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["",parseFloat(p.unit_price).toFixed(2)," each"]})]})]},p.id)})}),s.jsx(Pa,{className:"my-4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[s.jsxs("h4",{className:"font-semibold text-emerald-800 mb-2",children:["Bill Amount (Paid via ",a.payment_method,")"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsxs("span",{className:"font-medium",children:["",parseFloat(a.subtotal).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Tax:"}),s.jsxs("span",{className:"font-medium",children:["",parseFloat(a.tax_amount).toFixed(2)]})]}),s.jsx(Pa,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between text-base font-bold",children:[s.jsx("span",{children:"Bill Total (Paid):"}),s.jsxs("span",{className:"text-emerald-600",children:["",(parseFloat(a.subtotal)+parseFloat(a.tax_amount)).toFixed(2)]})]})]})]}),s.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-orange-800 text-lg",children:"Delivery Fee"}),s.jsx("p",{className:"text-sm text-orange-700",children:"Pay on delivery"})]}),s.jsxs("span",{className:"font-bold text-xl text-orange-600",children:["",parseFloat(a.delivery_fee).toFixed(2)]})]})}),s.jsx(Pa,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"Grand Total:"}),s.jsxs("span",{className:"text-gray-800",children:["",parseFloat(a.total_amount).toFixed(2)]})]})]})]})]}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx(ie,{variant:"outline",onClick:()=>e("/orders"),className:"px-8 py-3 rounded-xl",children:"View All Orders"}),s.jsx(ie,{onClick:()=>e("/search"),className:"px-8 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700",children:"Continue Shopping"})]})]})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Mt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Order not found"}),s.jsx(ie,{onClick:()=>e("/home"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Go Home"})]})})}var Wp="Dialog",[XR,Are]=gn(Wp),[uG,ea]=XR(Wp),JR=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,c=j.useRef(null),d=j.useRef(null),[h,m]=Kr({prop:r,defaultProp:a??!1,onChange:i,caller:Wp});return s.jsx(uG,{scope:t,triggerRef:c,contentRef:d,contentId:Zr(),titleId:Zr(),descriptionId:Zr(),open:h,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(u=>!u),[m]),modal:o,children:n})};JR.displayName=Wp;var QR="DialogTrigger",e4=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ea(QR,n),i=bt(t,a.triggerRef);return s.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Gw(a.open),...r,ref:i,onClick:$e(e.onClick,a.onOpenToggle)})});e4.displayName=QR;var Ww="DialogPortal",[hG,t4]=XR(Ww,{forceMount:void 0}),s4=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=ea(Ww,t);return s.jsx(hG,{scope:t,forceMount:n,children:j.Children.map(r,o=>s.jsx(an,{present:n||i.open,children:s.jsx(rh,{asChild:!0,container:a,children:o})}))})};s4.displayName=Ww;var Tm="DialogOverlay",n4=j.forwardRef((e,t)=>{const n=t4(Tm,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=ea(Tm,e.__scopeDialog);return i.modal?s.jsx(an,{present:r||i.open,children:s.jsx(mG,{...a,ref:t})}):null});n4.displayName=Tm;var fG=el("DialogOverlay.RemoveScroll"),mG=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ea(Tm,n);return s.jsx(Mp,{as:fG,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(st.div,{"data-state":Gw(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),rl="DialogContent",r4=j.forwardRef((e,t)=>{const n=t4(rl,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=ea(rl,e.__scopeDialog);return s.jsx(an,{present:r||i.open,children:i.modal?s.jsx(pG,{...a,ref:t}):s.jsx(gG,{...a,ref:t})})});r4.displayName=rl;var pG=j.forwardRef((e,t)=>{const n=ea(rl,e.__scopeDialog),r=j.useRef(null),a=bt(t,n.contentRef,r);return j.useEffect(()=>{const i=r.current;if(i)return Kb(i)},[]),s.jsx(a4,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$e(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:$e(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&i.preventDefault()}),onFocusOutside:$e(e.onFocusOutside,i=>i.preventDefault())})}),gG=j.forwardRef((e,t)=>{const n=ea(rl,e.__scopeDialog),r=j.useRef(!1),a=j.useRef(!1);return s.jsx(a4,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,c;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var d,h;(d=e.onInteractOutside)==null||d.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),a4=j.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,c=ea(rl,n),d=j.useRef(null),h=bt(t,d);return Wb(),s.jsxs(s.Fragment,{children:[s.jsx(Rp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Hc,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Gw(c.open),...o,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(xG,{titleId:c.titleId}),s.jsx(yG,{contentRef:d,descriptionId:c.descriptionId})]})]})}),Zw="DialogTitle",i4=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ea(Zw,n);return s.jsx(st.h2,{id:a.titleId,...r,ref:t})});i4.displayName=Zw;var o4="DialogDescription",l4=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ea(o4,n);return s.jsx(st.p,{id:a.descriptionId,...r,ref:t})});l4.displayName=o4;var c4="DialogClose",d4=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ea(c4,n);return s.jsx(st.button,{type:"button",...r,ref:t,onClick:$e(e.onClick,()=>a.onOpenChange(!1))})});d4.displayName=c4;function Gw(e){return e?"open":"closed"}var u4="DialogTitleWarning",[Ore,h4]=XI(u4,{contentName:rl,titleName:Zw,docsSlug:"dialog"}),xG=({titleId:e})=>{const t=h4(u4),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return j.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},vG="DialogDescriptionWarning",yG=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${h4(vG).contentName}}.`;return j.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},f4=JR,m4=e4,p4=s4,Zp=n4,Gp=r4,Kp=i4,Yp=l4,g4=d4;const lc=f4,x4=m4,bG=p4,v4=j.forwardRef(({className:e,...t},n)=>s.jsx(Zp,{ref:n,className:Ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));v4.displayName=Zp.displayName;const Wo=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(bG,{children:[s.jsx(v4,{}),s.jsxs(Gp,{ref:r,className:Ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(g4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Ys,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wo.displayName=Gp.displayName;const Zo=({className:e,...t})=>s.jsx("div",{className:Ye("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Zo.displayName="DialogHeader";const Go=j.forwardRef(({className:e,...t},n)=>s.jsx(Kp,{ref:n,className:Ye("text-lg font-semibold leading-none tracking-tight",e),...t}));Go.displayName=Kp.displayName;const y4=j.forwardRef(({className:e,...t},n)=>s.jsx(Yp,{ref:n,className:Ye("text-sm text-muted-foreground",e),...t}));y4.displayName=Yp.displayName;const Vn=f4,wG=m4,jG=p4,b4=j.forwardRef(({className:e,...t},n)=>s.jsx(Zp,{className:Ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));b4.displayName=Zp.displayName;const _G=ih("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),kn=j.forwardRef(({side:e="right",className:t,children:n,...r},a)=>s.jsxs(jG,{children:[s.jsx(b4,{}),s.jsxs(Gp,{ref:a,className:Ye(_G({side:e}),t),...r,children:[n,s.jsxs(g4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(Ys,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));kn.displayName=Gp.displayName;const Cn=({className:e,...t})=>s.jsx("div",{className:Ye("flex flex-col space-y-2 text-center sm:text-left",e),...t});Cn.displayName="SheetHeader";const Pn=j.forwardRef(({className:e,...t},n)=>s.jsx(Kp,{ref:n,className:Ye("text-lg font-semibold text-foreground",e),...t}));Pn.displayName=Kp.displayName;const NG=j.forwardRef(({className:e,...t},n)=>s.jsx(Yp,{ref:n,className:Ye("text-sm text-muted-foreground",e),...t}));NG.displayName=Yp.displayName;function Fy(e,[t,n]){return Math.min(n,Math.max(t,e))}var SG=[" ","Enter","ArrowUp","ArrowDown"],kG=[" ","Enter"],al="Select",[Xp,Jp,CG]=hp(al),[rd,Rre]=gn(al,[CG,Yc]),Qp=Yc(),[PG,fo]=rd(al),[EG,TG]=rd(al),w4=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:c,onValueChange:d,dir:h,name:m,autoComplete:u,disabled:f,required:p,form:x}=e,v=Qp(t),[y,w]=j.useState(null),[b,_]=j.useState(null),[N,k]=j.useState(!1),E=Jc(h),[T,R]=Kr({prop:r,defaultProp:a??!1,onChange:i,caller:al}),[$,M]=Kr({prop:o,defaultProp:c,onChange:d,caller:al}),A=j.useRef(null),C=y?x||!!y.closest("form"):!0,[z,P]=j.useState(new Set),O=Array.from(z).map(Y=>Y.props.value).join(";");return s.jsx(Rb,{...v,children:s.jsxs(PG,{required:p,scope:t,trigger:y,onTriggerChange:w,valueNode:b,onValueNodeChange:_,valueNodeHasChildren:N,onValueNodeHasChildrenChange:k,contentId:Zr(),value:$,onValueChange:M,open:T,onOpenChange:R,dir:E,triggerPointerDownPosRef:A,disabled:f,children:[s.jsx(Xp.Provider,{scope:t,children:s.jsx(EG,{scope:e.__scopeSelect,onNativeOptionAdd:j.useCallback(Y=>{P(J=>new Set(J).add(Y))},[]),onNativeOptionRemove:j.useCallback(Y=>{P(J=>{const G=new Set(J);return G.delete(Y),G})},[]),children:n})}),C?s.jsxs(H4,{"aria-hidden":!0,required:p,tabIndex:-1,name:m,autoComplete:u,value:$,onChange:Y=>M(Y.target.value),disabled:f,form:x,children:[$===void 0?s.jsx("option",{value:""}):null,Array.from(z)]},O):null]})})};w4.displayName=al;var j4="SelectTrigger",_4=j.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=Qp(n),o=fo(j4,n),c=o.disabled||r,d=bt(t,o.onTriggerChange),h=Jp(n),m=j.useRef("touch"),[u,f,p]=Z4(v=>{const y=h().filter(_=>!_.disabled),w=y.find(_=>_.value===o.value),b=G4(y,v,w);b!==void 0&&o.onValueChange(b.value)}),x=v=>{c||(o.onOpenChange(!0),p()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return s.jsx(Lb,{asChild:!0,...i,children:s.jsx(st.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":W4(o.value)?"":void 0,...a,ref:d,onClick:$e(a.onClick,v=>{v.currentTarget.focus(),m.current!=="mouse"&&x(v)}),onPointerDown:$e(a.onPointerDown,v=>{m.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:$e(a.onKeyDown,v=>{const y=u.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&f(v.key),!(y&&v.key===" ")&&SG.includes(v.key)&&(x(),v.preventDefault())})})})});_4.displayName=j4;var N4="SelectValue",S4=j.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...c}=e,d=fo(N4,n),{onValueNodeHasChildrenChange:h}=d,m=i!==void 0,u=bt(t,d.onValueNodeChange);return As(()=>{h(m)},[h,m]),s.jsx(st.span,{...c,ref:u,style:{pointerEvents:"none"},children:W4(d.value)?s.jsx(s.Fragment,{children:o}):i})});S4.displayName=N4;var AG="SelectIcon",k4=j.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(st.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});k4.displayName=AG;var OG="SelectPortal",C4=e=>s.jsx(rh,{asChild:!0,...e});C4.displayName=OG;var il="SelectContent",P4=j.forwardRef((e,t)=>{const n=fo(il,e.__scopeSelect),[r,a]=j.useState();if(As(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?oo.createPortal(s.jsx(E4,{scope:e.__scopeSelect,children:s.jsx(Xp.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(T4,{...e,ref:t})});P4.displayName=il;var Or=10,[E4,mo]=rd(il),RG="SelectContentImpl",LG=el("SelectContent.RemoveScroll"),T4=j.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:c,sideOffset:d,align:h,alignOffset:m,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:x,hideWhenDetached:v,avoidCollisions:y,...w}=e,b=fo(il,n),[_,N]=j.useState(null),[k,E]=j.useState(null),T=bt(t,W=>N(W)),[R,$]=j.useState(null),[M,A]=j.useState(null),C=Jp(n),[z,P]=j.useState(!1),O=j.useRef(!1);j.useEffect(()=>{if(_)return Kb(_)},[_]),Wb();const Y=j.useCallback(W=>{const[oe,...X]=C().map(me=>me.ref.current),[re]=X.slice(-1),ue=document.activeElement;for(const me of W)if(me===ue||(me==null||me.scrollIntoView({block:"nearest"}),me===oe&&k&&(k.scrollTop=0),me===re&&k&&(k.scrollTop=k.scrollHeight),me==null||me.focus(),document.activeElement!==ue))return},[C,k]),J=j.useCallback(()=>Y([R,_]),[Y,R,_]);j.useEffect(()=>{z&&J()},[z,J]);const{onOpenChange:G,triggerPointerDownPosRef:F}=b;j.useEffect(()=>{if(_){let W={x:0,y:0};const oe=re=>{var ue,me;W={x:Math.abs(Math.round(re.pageX)-(((ue=F.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(re.pageY)-(((me=F.current)==null?void 0:me.y)??0))}},X=re=>{W.x<=10&&W.y<=10?re.preventDefault():_.contains(re.target)||G(!1),document.removeEventListener("pointermove",oe),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",oe),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",oe),document.removeEventListener("pointerup",X,{capture:!0})}}},[_,G,F]),j.useEffect(()=>{const W=()=>G(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[G]);const[I,V]=Z4(W=>{const oe=C().filter(ue=>!ue.disabled),X=oe.find(ue=>ue.ref.current===document.activeElement),re=G4(oe,W,X);re&&setTimeout(()=>re.ref.current.focus())}),H=j.useCallback((W,oe,X)=>{const re=!O.current&&!X;(b.value!==void 0&&b.value===oe||re)&&($(W),re&&(O.current=!0))},[b.value]),U=j.useCallback(()=>_==null?void 0:_.focus(),[_]),q=j.useCallback((W,oe,X)=>{const re=!O.current&&!X;(b.value!==void 0&&b.value===oe||re)&&A(W)},[b.value]),K=r==="popper"?$y:A4,B=K===$y?{side:c,sideOffset:d,align:h,alignOffset:m,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:x,hideWhenDetached:v,avoidCollisions:y}:{};return s.jsx(E4,{scope:n,content:_,viewport:k,onViewportChange:E,itemRefCallback:H,selectedItem:R,onItemLeave:U,itemTextRefCallback:q,focusSelectedItem:J,selectedItemText:M,position:r,isPositioned:z,searchRef:I,children:s.jsx(Mp,{as:LG,allowPinchZoom:!0,children:s.jsx(Rp,{asChild:!0,trapped:b.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:$e(a,W=>{var oe;(oe=b.trigger)==null||oe.focus({preventScroll:!0}),W.preventDefault()}),children:s.jsx(Hc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(K,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:W=>W.preventDefault(),...w,...B,onPlaced:()=>P(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:$e(w.onKeyDown,W=>{const oe=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!oe&&W.key.length===1&&V(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let re=C().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(W.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const ue=W.target,me=re.indexOf(ue);re=re.slice(me+1)}setTimeout(()=>Y(re)),W.preventDefault()}})})})})})})});T4.displayName=RG;var MG="SelectItemAlignedPosition",A4=j.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=fo(il,n),o=mo(il,n),[c,d]=j.useState(null),[h,m]=j.useState(null),u=bt(t,T=>m(T)),f=Jp(n),p=j.useRef(!1),x=j.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:w,focusSelectedItem:b}=o,_=j.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&h&&v&&y&&w){const T=i.trigger.getBoundingClientRect(),R=h.getBoundingClientRect(),$=i.valueNode.getBoundingClientRect(),M=w.getBoundingClientRect();if(i.dir!=="rtl"){const ue=M.left-R.left,me=$.left-ue,we=T.left-me,be=T.width+we,ae=Math.max(be,R.width),ee=window.innerWidth-Or,ye=Fy(me,[Or,Math.max(Or,ee-ae)]);c.style.minWidth=be+"px",c.style.left=ye+"px"}else{const ue=R.right-M.right,me=window.innerWidth-$.right-ue,we=window.innerWidth-T.right-me,be=T.width+we,ae=Math.max(be,R.width),ee=window.innerWidth-Or,ye=Fy(me,[Or,Math.max(Or,ee-ae)]);c.style.minWidth=be+"px",c.style.right=ye+"px"}const A=f(),C=window.innerHeight-Or*2,z=v.scrollHeight,P=window.getComputedStyle(h),O=parseInt(P.borderTopWidth,10),Y=parseInt(P.paddingTop,10),J=parseInt(P.borderBottomWidth,10),G=parseInt(P.paddingBottom,10),F=O+Y+z+G+J,I=Math.min(y.offsetHeight*5,F),V=window.getComputedStyle(v),H=parseInt(V.paddingTop,10),U=parseInt(V.paddingBottom,10),q=T.top+T.height/2-Or,K=C-q,B=y.offsetHeight/2,W=y.offsetTop+B,oe=O+Y+W,X=F-oe;if(oe<=q){const ue=A.length>0&&y===A[A.length-1].ref.current;c.style.bottom="0px";const me=h.clientHeight-v.offsetTop-v.offsetHeight,we=Math.max(K,B+(ue?U:0)+me+J),be=oe+we;c.style.height=be+"px"}else{const ue=A.length>0&&y===A[0].ref.current;c.style.top="0px";const we=Math.max(q,O+v.offsetTop+(ue?H:0)+B)+X;c.style.height=we+"px",v.scrollTop=oe-q+v.offsetTop}c.style.margin=`${Or}px 0`,c.style.minHeight=I+"px",c.style.maxHeight=C+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,c,h,v,y,w,i.dir,r]);As(()=>_(),[_]);const[N,k]=j.useState();As(()=>{h&&k(window.getComputedStyle(h).zIndex)},[h]);const E=j.useCallback(T=>{T&&x.current===!0&&(_(),b==null||b(),x.current=!1)},[_,b]);return s.jsx(DG,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:s.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(st.div,{...a,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});A4.displayName=MG;var IG="SelectPopperPosition",$y=j.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Or,...i}=e,o=Qp(n);return s.jsx(Mb,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$y.displayName=IG;var[DG,Kw]=rd(il,{}),zy="SelectViewport",O4=j.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=mo(zy,n),o=Kw(zy,n),c=bt(t,i.onViewportChange),d=j.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Xp.Slot,{scope:n,children:s.jsx(st.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:$e(a.onScroll,h=>{const m=h.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&u){const p=Math.abs(d.current-m.scrollTop);if(p>0){const x=window.innerHeight-Or*2,v=parseFloat(u.style.minHeight),y=parseFloat(u.style.height),w=Math.max(v,y);if(w<x){const b=w+p,_=Math.min(x,b),N=b-_;u.style.height=_+"px",u.style.bottom==="0px"&&(m.scrollTop=N>0?N:0,u.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});O4.displayName=zy;var R4="SelectGroup",[FG,$G]=rd(R4),zG=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Zr();return s.jsx(FG,{scope:n,id:a,children:s.jsx(st.div,{role:"group","aria-labelledby":a,...r,ref:t})})});zG.displayName=R4;var L4="SelectLabel",M4=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=$G(L4,n);return s.jsx(st.div,{id:a.id,...r,ref:t})});M4.displayName=L4;var Am="SelectItem",[BG,I4]=rd(Am),D4=j.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,c=fo(Am,n),d=mo(Am,n),h=c.value===r,[m,u]=j.useState(i??""),[f,p]=j.useState(!1),x=bt(t,b=>{var _;return(_=d.itemRefCallback)==null?void 0:_.call(d,b,r,a)}),v=Zr(),y=j.useRef("touch"),w=()=>{a||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(BG,{scope:n,value:r,disabled:a,textId:v,isSelected:h,onItemTextChange:j.useCallback(b=>{u(_=>_||((b==null?void 0:b.textContent)??"").trim())},[]),children:s.jsx(Xp.ItemSlot,{scope:n,value:r,disabled:a,textValue:m,children:s.jsx(st.div,{role:"option","aria-labelledby":v,"data-highlighted":f?"":void 0,"aria-selected":h&&f,"data-state":h?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:x,onFocus:$e(o.onFocus,()=>p(!0)),onBlur:$e(o.onBlur,()=>p(!1)),onClick:$e(o.onClick,()=>{y.current!=="mouse"&&w()}),onPointerUp:$e(o.onPointerUp,()=>{y.current==="mouse"&&w()}),onPointerDown:$e(o.onPointerDown,b=>{y.current=b.pointerType}),onPointerMove:$e(o.onPointerMove,b=>{var _;y.current=b.pointerType,a?(_=d.onItemLeave)==null||_.call(d):y.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(o.onPointerLeave,b=>{var _;b.currentTarget===document.activeElement&&((_=d.onItemLeave)==null||_.call(d))}),onKeyDown:$e(o.onKeyDown,b=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&b.key===" "||(kG.includes(b.key)&&w(),b.key===" "&&b.preventDefault())})})})})});D4.displayName=Am;var Zd="SelectItemText",F4=j.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=fo(Zd,n),c=mo(Zd,n),d=I4(Zd,n),h=TG(Zd,n),[m,u]=j.useState(null),f=bt(t,w=>u(w),d.onItemTextChange,w=>{var b;return(b=c.itemTextRefCallback)==null?void 0:b.call(c,w,d.value,d.disabled)}),p=m==null?void 0:m.textContent,x=j.useMemo(()=>s.jsx("option",{value:d.value,disabled:d.disabled,children:p},d.value),[d.disabled,d.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=h;return As(()=>(v(x),()=>y(x)),[v,y,x]),s.jsxs(s.Fragment,{children:[s.jsx(st.span,{id:d.textId,...i,ref:f}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?oo.createPortal(i.children,o.valueNode):null]})});F4.displayName=Zd;var $4="SelectItemIndicator",z4=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return I4($4,n).isSelected?s.jsx(st.span,{"aria-hidden":!0,...r,ref:t}):null});z4.displayName=$4;var By="SelectScrollUpButton",B4=j.forwardRef((e,t)=>{const n=mo(By,e.__scopeSelect),r=Kw(By,e.__scopeSelect),[a,i]=j.useState(!1),o=bt(t,r.onScrollButtonChange);return As(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=d.scrollTop>0;i(h)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?s.jsx(U4,{...e,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});B4.displayName=By;var Vy="SelectScrollDownButton",V4=j.forwardRef((e,t)=>{const n=mo(Vy,e.__scopeSelect),r=Kw(Vy,e.__scopeSelect),[a,i]=j.useState(!1),o=bt(t,r.onScrollButtonChange);return As(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<h;i(m)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?s.jsx(U4,{...e,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});V4.displayName=Vy;var U4=j.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=mo("SelectScrollButton",n),o=j.useRef(null),c=Jp(n),d=j.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return j.useEffect(()=>()=>d(),[d]),As(()=>{var m;const h=c().find(u=>u.ref.current===document.activeElement);(m=h==null?void 0:h.ref.current)==null||m.scrollIntoView({block:"nearest"})},[c]),s.jsx(st.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:$e(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:$e(a.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:$e(a.onPointerLeave,()=>{d()})})}),VG="SelectSeparator",q4=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(st.div,{"aria-hidden":!0,...r,ref:t})});q4.displayName=VG;var Uy="SelectArrow",UG=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Qp(n),i=fo(Uy,n),o=mo(Uy,n);return i.open&&o.position==="popper"?s.jsx(Ib,{...a,...r,ref:t}):null});UG.displayName=Uy;var qG="SelectBubbleInput",H4=j.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=j.useRef(null),i=bt(r,a),o=Ap(t);return j.useEffect(()=>{const c=a.current;if(!c)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&m){const u=new Event("change",{bubbles:!0});m.call(c,t),c.dispatchEvent(u)}},[o,t]),s.jsx(st.select,{...n,style:{...dP,...n.style},ref:i,defaultValue:t})});H4.displayName=qG;function W4(e){return e===""||e===void 0}function Z4(e){const t=ws(e),n=j.useRef(""),r=j.useRef(0),a=j.useCallback(o=>{const c=n.current+o;t(c),function d(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(c)},[t]),i=j.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function G4(e,t,n){const a=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=HG(e,Math.max(i,0));a.length===1&&(o=o.filter(h=>h!==n));const d=o.find(h=>h.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function HG(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var WG=w4,K4=_4,ZG=S4,GG=k4,KG=C4,Y4=P4,YG=O4,X4=M4,J4=D4,XG=F4,JG=z4,Q4=B4,eL=V4,tL=q4;const qt=WG,Ht=ZG,Bt=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(K4,{ref:r,className:Ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(GG,{asChild:!0,children:s.jsx(MP,{className:"h-4 w-4 opacity-50"})})]}));Bt.displayName=K4.displayName;const sL=j.forwardRef(({className:e,...t},n)=>s.jsx(Q4,{ref:n,className:Ye("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(KD,{className:"h-4 w-4"})}));sL.displayName=Q4.displayName;const nL=j.forwardRef(({className:e,...t},n)=>s.jsx(eL,{ref:n,className:Ye("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(MP,{className:"h-4 w-4"})}));nL.displayName=eL.displayName;const Vt=j.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(KG,{children:s.jsxs(Y4,{ref:a,className:Ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(sL,{}),s.jsx(YG,{className:Ye("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(nL,{})]})}));Vt.displayName=Y4.displayName;const QG=j.forwardRef(({className:e,...t},n)=>s.jsx(X4,{ref:n,className:Ye("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));QG.displayName=X4.displayName;const We=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(J4,{ref:r,className:Ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(JG,{children:s.jsx(pp,{className:"h-4 w-4"})})}),s.jsx(XG,{children:t})]}));We.displayName=J4.displayName;const eK=j.forwardRef(({className:e,...t},n)=>s.jsx(tL,{ref:n,className:Ye("-mx-1 my-1 h-px bg-muted",e),...t}));eK.displayName=tL.displayName;function tK(e,t){return j.useReducer((n,r)=>t[n][r]??n,e)}var Yw="ScrollArea",[rL,Lre]=gn(Yw),[sK,Sr]=rL(Yw),aL=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[c,d]=j.useState(null),[h,m]=j.useState(null),[u,f]=j.useState(null),[p,x]=j.useState(null),[v,y]=j.useState(null),[w,b]=j.useState(0),[_,N]=j.useState(0),[k,E]=j.useState(!1),[T,R]=j.useState(!1),$=bt(t,A=>d(A)),M=Jc(a);return s.jsx(sK,{scope:n,type:r,dir:M,scrollHideDelay:i,scrollArea:c,viewport:h,onViewportChange:m,content:u,onContentChange:f,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:k,onScrollbarXEnabledChange:E,scrollbarY:v,onScrollbarYChange:y,scrollbarYEnabled:T,onScrollbarYEnabledChange:R,onCornerWidthChange:b,onCornerHeightChange:N,children:s.jsx(st.div,{dir:M,...o,ref:$,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});aL.displayName=Yw;var iL="ScrollAreaViewport",oL=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=Sr(iL,n),c=j.useRef(null),d=bt(t,c,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(st.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});oL.displayName=iL;var Da="ScrollAreaScrollbar",Xw=j.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Sr(Da,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,c=e.orientation==="horizontal";return j.useEffect(()=>(c?i(!0):o(!0),()=>{c?i(!1):o(!1)}),[c,i,o]),a.type==="hover"?s.jsx(nK,{...r,ref:t,forceMount:n}):a.type==="scroll"?s.jsx(rK,{...r,ref:t,forceMount:n}):a.type==="auto"?s.jsx(lL,{...r,ref:t,forceMount:n}):a.type==="always"?s.jsx(Jw,{...r,ref:t}):null});Xw.displayName=Da;var nK=j.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Sr(Da,e.__scopeScrollArea),[i,o]=j.useState(!1);return j.useEffect(()=>{const c=a.scrollArea;let d=0;if(c){const h=()=>{window.clearTimeout(d),o(!0)},m=()=>{d=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",m)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(an,{present:n||i,children:s.jsx(lL,{"data-state":i?"visible":"hidden",...r,ref:t})})}),rK=j.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Sr(Da,e.__scopeScrollArea),i=e.orientation==="horizontal",o=tg(()=>d("SCROLL_END"),100),[c,d]=tK("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return j.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,a.scrollHideDelay,d]),j.useEffect(()=>{const h=a.viewport,m=i?"scrollLeft":"scrollTop";if(h){let u=h[m];const f=()=>{const p=h[m];u!==p&&(d("SCROLL"),o()),u=p};return h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,i,d,o]),s.jsx(an,{present:n||c!=="hidden",children:s.jsx(Jw,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:$e(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:$e(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),lL=j.forwardRef((e,t)=>{const n=Sr(Da,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=j.useState(!1),c=e.orientation==="horizontal",d=tg(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,m=n.viewport.offsetHeight<n.viewport.scrollHeight;o(c?h:m)}},10);return Mc(n.viewport,d),Mc(n.content,d),s.jsx(an,{present:r||i,children:s.jsx(Jw,{"data-state":i?"visible":"hidden",...a,ref:t})})}),Jw=j.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Sr(Da,e.__scopeScrollArea),i=j.useRef(null),o=j.useRef(0),[c,d]=j.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=fL(c.viewport,c.content),m={...r,sizes:c,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function u(f,p){return dK(f,o.current,c,p)}return n==="horizontal"?s.jsx(aK,{...m,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollLeft,p=$S(f,c,a.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollLeft=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollLeft=u(f,a.dir))}}):n==="vertical"?s.jsx(iK,{...m,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollTop,p=$S(f,c);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollTop=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollTop=u(f))}}):null}),aK=j.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Sr(Da,e.__scopeScrollArea),[o,c]=j.useState(),d=j.useRef(null),h=bt(t,d,i.onScrollbarXChange);return j.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),s.jsx(dL,{"data-orientation":"horizontal",...a,ref:h,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":eg(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,u)=>{if(i.viewport){const f=i.viewport.scrollLeft+m.deltaX;e.onWheelScroll(f),pL(f,u)&&m.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Rm(o.paddingLeft),paddingEnd:Rm(o.paddingRight)}})}})}),iK=j.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Sr(Da,e.__scopeScrollArea),[o,c]=j.useState(),d=j.useRef(null),h=bt(t,d,i.onScrollbarYChange);return j.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),s.jsx(dL,{"data-orientation":"vertical",...a,ref:h,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":eg(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,u)=>{if(i.viewport){const f=i.viewport.scrollTop+m.deltaY;e.onWheelScroll(f),pL(f,u)&&m.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Rm(o.paddingTop),paddingEnd:Rm(o.paddingBottom)}})}})}),[oK,cL]=rL(Da),dL=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:m,onResize:u,...f}=e,p=Sr(Da,n),[x,v]=j.useState(null),y=bt(t,$=>v($)),w=j.useRef(null),b=j.useRef(""),_=p.viewport,N=r.content-r.viewport,k=ws(m),E=ws(d),T=tg(u,10);function R($){if(w.current){const M=$.clientX-w.current.left,A=$.clientY-w.current.top;h({x:M,y:A})}}return j.useEffect(()=>{const $=M=>{const A=M.target;(x==null?void 0:x.contains(A))&&k(M,N)};return document.addEventListener("wheel",$,{passive:!1}),()=>document.removeEventListener("wheel",$,{passive:!1})},[_,x,N,k]),j.useEffect(E,[r,E]),Mc(x,T),Mc(p.content,T),s.jsx(oK,{scope:n,scrollbar:x,hasThumb:a,onThumbChange:ws(i),onThumbPointerUp:ws(o),onThumbPositionChange:E,onThumbPointerDown:ws(c),children:s.jsx(st.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:$e(e.onPointerDown,$=>{$.button===0&&($.target.setPointerCapture($.pointerId),w.current=x.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),R($))}),onPointerMove:$e(e.onPointerMove,R),onPointerUp:$e(e.onPointerUp,$=>{const M=$.target;M.hasPointerCapture($.pointerId)&&M.releasePointerCapture($.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),w.current=null})})})}),Om="ScrollAreaThumb",uL=j.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=cL(Om,e.__scopeScrollArea);return s.jsx(an,{present:n||a.hasThumb,children:s.jsx(lK,{ref:t,...r})})}),lK=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Sr(Om,n),o=cL(Om,n),{onThumbPositionChange:c}=o,d=bt(t,u=>o.onThumbChange(u)),h=j.useRef(void 0),m=tg(()=>{h.current&&(h.current(),h.current=void 0)},100);return j.useEffect(()=>{const u=i.viewport;if(u){const f=()=>{if(m(),!h.current){const p=uK(u,c);h.current=p,c()}};return c(),u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,m,c]),s.jsx(st.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:$e(e.onPointerDownCapture,u=>{const p=u.target.getBoundingClientRect(),x=u.clientX-p.left,v=u.clientY-p.top;o.onThumbPointerDown({x,y:v})}),onPointerUp:$e(e.onPointerUp,o.onThumbPointerUp)})});uL.displayName=Om;var Qw="ScrollAreaCorner",hL=j.forwardRef((e,t)=>{const n=Sr(Qw,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(cK,{...e,ref:t}):null});hL.displayName=Qw;var cK=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Sr(Qw,n),[i,o]=j.useState(0),[c,d]=j.useState(0),h=!!(i&&c);return Mc(a.scrollbarX,()=>{var u;const m=((u=a.scrollbarX)==null?void 0:u.offsetHeight)||0;a.onCornerHeightChange(m),d(m)}),Mc(a.scrollbarY,()=>{var u;const m=((u=a.scrollbarY)==null?void 0:u.offsetWidth)||0;a.onCornerWidthChange(m),o(m)}),h?s.jsx(st.div,{...r,ref:t,style:{width:i,height:c,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Rm(e){return e?parseInt(e,10):0}function fL(e,t){const n=e/t;return isNaN(n)?0:n}function eg(e){const t=fL(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function dK(e,t,n,r="ltr"){const a=eg(n),i=a/2,o=t||i,c=a-o,d=n.scrollbar.paddingStart+o,h=n.scrollbar.size-n.scrollbar.paddingEnd-c,m=n.content-n.viewport,u=r==="ltr"?[0,m]:[m*-1,0];return mL([d,h],u)(e)}function $S(e,t,n="ltr"){const r=eg(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,c=i-r,d=n==="ltr"?[0,o]:[o*-1,0],h=Fy(e,d);return mL([0,o],[0,c])(h)}function mL(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function pL(e,t){return e>0&&e<t}var uK=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,c=n.top!==i.top;(o||c)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function tg(e,t){const n=ws(e),r=j.useRef(0);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),j.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Mc(e,t){const n=ws(t);As(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var gL=aL,hK=oL,fK=hL;const ej=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(gL,{ref:r,className:Ye("relative overflow-hidden",e),...n,children:[s.jsx(hK,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(xL,{}),s.jsx(fK,{})]}));ej.displayName=gL.displayName;const xL=j.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(Xw,{ref:r,orientation:t,className:Ye("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(uL,{className:"relative flex-1 rounded-full bg-border"})}));xL.displayName=Xw.displayName;class mK{constructor(){us(this,"fcmToken",null)}async initialize(){if(Nt.isNativePlatform())try{const{PushNotifications:t}=await ze(async()=>{const{PushNotifications:a}=await Promise.resolve().then(()=>u5);return{PushNotifications:a}},void 0),{App:n}=await ze(async()=>{const{App:a}=await import("./index-CDTVOiNY.js");return{App:a}},[]);if((await t.requestPermissions()).receive!=="granted"){console.warn("Push notification permission denied");return}await t.register(),t.addListener("registration",a=>{console.log(" FCM Token:",a.value),this.fcmToken=a.value,this.sendTokenToBackend(a.value)}),t.addListener("pushNotificationReceived",a=>{var i;console.log(" Push received:",a),(i=a.data)!=null&&i.orderId&&window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(a.data.orderId),orderNumber:a.data.orderNumber,amount:a.data.amount,fromPush:!0}}))}),t.addListener("pushNotificationActionPerformed",a=>{var o;console.log(" Push notification tapped - app opening:",a);const i=(o=a.notification.data)==null?void 0:o.orderId;i&&(window.location.href="/vendor/home",setTimeout(()=>{var c,d;window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(i),orderNumber:(c=a.notification.data)==null?void 0:c.orderNumber,amount:(d=a.notification.data)==null?void 0:d.amount,autoOpened:!0,fromPush:!0}}))},1500))}),n.addListener("appStateChange",({isActive:a})=>{a&&(console.log(" App resumed from push notification"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))}),console.log(" Real push notifications initialized")}catch(t){console.error(" Push notifications setup failed:",t)}}async sendTokenToBackend(t){try{(await fetch("/api/vendor/fcm-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fcmToken:t,vendorId:localStorage.getItem("vendor_id")})})).ok&&console.log(" FCM token sent to backend")}catch(n){console.warn("Failed to send FCM token:",n)}}getFCMToken(){return this.fcmToken}}const pK=new mK;class gK{constructor(){us(this,"persistentIntervals",new Map);this.setupNotificationHandlers(),this.initializePushNotifications()}async initializePushNotifications(){Nt.isNativePlatform()&&await pK.initialize()}async setupNotificationHandlers(){if(Nt.isNativePlatform())try{const{LocalNotifications:t}=await ze(async()=>{const{LocalNotifications:r}=await import("./index-tKG7S0_p.js");return{LocalNotifications:r}},[]),{App:n}=await ze(async()=>{const{App:r}=await import("./index-CDTVOiNY.js");return{App:r}},[]);t.addListener("localNotificationActionPerformed",async r=>{var a;console.log(" NOTIFICATION TAPPED - AUTO OPENING APP:",r);try{const{App:i}=await ze(async()=>{const{App:d}=await import("./index-CDTVOiNY.js");return{App:d}},[]),o=await i.getState();if(console.log(" Current app state:",o),!o.isActive){console.log(" App was in background - bringing to foreground"),window.focus(),document.body.click();try{await i.minimizeApp(),setTimeout(()=>{window.focus()},100)}catch{console.log("Minimize/restore not available")}}const c=parseInt(((a=r.notification.extra)==null?void 0:a.orderId)||"0");c&&(console.log(" Opening order:",c),window.location.href="/vendor/home",setTimeout(()=>{var d,h;window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:c,orderNumber:(d=r.notification.extra)==null?void 0:d.orderNumber,amount:(h=r.notification.extra)==null?void 0:h.amount,autoOpened:!0,fromNotification:!0}}))},1500))}catch(i){console.error(" Failed to open app:",i),window.location.href="/vendor/home"}}),n.addListener("appStateChange",({isActive:r})=>{r&&(console.log(" App resumed - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))})}catch(t){console.warn("Could not setup notification handlers:",t)}}async showOrderNotification(t,n,r){console.log(" Using FCM push notifications for order:",t);const{pushNotificationService:a}=await ze(async()=>{const{pushNotificationService:i}=await import("./pushNotificationService-DnccNrJD.js");return{pushNotificationService:i}},[]);await a.showOrderNotification(t,n,r),this.playBeepSound(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n}}))}async requestBackendPushNotification(t,n,r){try{(await fetch("/api/vendor/send-order-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendorId:localStorage.getItem("vendor_id"),orderId:r,orderNumber:t,amount:n,title:" NEW ORDER RECEIVED",body:`Order #${t} - ${n}`,data:{orderId:r.toString(),orderNumber:t,amount:n,action:"openOrder"}})})).ok?console.log(" Backend push notification requested"):console.warn(" Backend push notification failed")}catch(a){console.warn("Backend push notification error:",a)}}async showPushNotification(t,n,r){try{console.log(" Simulating push notification for auto-opening")}catch(a){console.warn("Push notification failed, using local fallback:",a)}}async showLocalNotification(t,n,r){try{const{LocalNotifications:a}=await ze(async()=>{const{LocalNotifications:o}=await import("./index-tKG7S0_p.js");return{LocalNotifications:o}},[]);if((await a.requestPermissions()).display!=="granted"){console.warn("Notification permission not granted");return}await a.schedule({notifications:[{title:" NEW ORDER - TAP TO OPEN APP",body:`Order #${t} - ${n}
 TAP HERE TO OPEN`,id:r,schedule:{at:new Date(Date.now()+100)},sound:"default",attachments:void 0,actionTypeId:"OPEN_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF0000",channelId:"order-alerts",summaryText:"Tap to open app",extra:{orderId:r.toString(),orderNumber:t,amount:n,autoOpen:!0,action:"openApp",deepLink:"vendor://order/"+r}}]}),console.log(" Local notification scheduled for order:",r)}catch(a){console.warn("Local notifications not available:",a)}}showWebNotification(t,n,r){if("Notification"in window&&Notification.permission==="granted"){const a=new Notification(" New Order!",{body:`Order #${t} - ${n}`,icon:"/favicon.ico",tag:`order-${r}`,requireInteraction:!0});a.onclick=()=>{window.focus(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n}})),a.close()},setTimeout(()=>a.close(),3e4)}}startPersistentAlert(t,n,r){this.stopPersistentAlert(r);const a=setInterval(()=>{console.log(" Persistent alert for order:",t),"vibrate"in navigator&&navigator.vibrate([1e3,300,1e3,300,1e3]),this.playMobileSound()},5e3);this.persistentIntervals.set(r,a),setTimeout(()=>{this.stopPersistentAlert(r)},3e5)}stopPersistentAlert(t){const n=this.persistentIntervals.get(t);n&&(clearInterval(n),this.persistentIntervals.delete(t),console.log(" Stopped persistent alert for order:",t))}async clearNotification(t){if(this.stopPersistentAlert(t),Nt.isNativePlatform())try{const{LocalNotifications:n}=await ze(async()=>{const{LocalNotifications:r}=await import("./index-tKG7S0_p.js");return{LocalNotifications:r}},[]);await n.cancel({notifications:[{id:t}]}),console.log(" Cleared background notification for order:",t)}catch(n){console.warn("Could not clear notification:",n)}}async requestPermissions(){if(Nt.isNativePlatform())try{const{LocalNotifications:t}=await ze(async()=>{const{LocalNotifications:r}=await import("./index-tKG7S0_p.js");return{LocalNotifications:r}},[]),n=await t.requestPermissions();console.log(" Notification permissions:",n);try{await t.createChannel({id:"order-alerts",name:"Order Alerts",description:"High priority notifications for new orders",sound:"default",importance:5,visibility:1,lights:!0,vibration:!0}),console.log(" High priority notification channel created")}catch(r){console.warn("Could not create notification channel:",r)}return n.display==="granted"}catch(t){return console.warn("Local notifications not available:",t),!1}return"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":"Notification"in window&&Notification.permission==="granted"}playBeepSound(){try{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value=800,n.type="square",r.gain.setValueAtTime(.3,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.3),n.start(t.currentTime),n.stop(t.currentTime+.3),console.log(" Beep sound played")}catch(t){console.warn("Audio not available:",t)}}playMobileSound(){try{const t=new(window.AudioContext||window.webkitAudioContext);for(let n=0;n<3;n++)setTimeout(()=>{const r=t.createOscillator(),a=t.createGain();r.connect(a),a.connect(t.destination),r.frequency.value=1e3+n*200,r.type="sine",a.gain.setValueAtTime(.5,t.currentTime),a.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),r.start(t.currentTime),r.stop(t.currentTime+.2)},n*300);console.log(" Mobile sound sequence played")}catch(t){console.warn("Mobile audio not available:",t)}}}const Gl=new gK,Wx=Object.freeze(Object.defineProperty({__proto__:null,simpleNotificationService:Gl},Symbol.toStringTag,{value:"Module"}));function sg(){const[e,t]=j.useState([]),[n,r]=j.useState(!1),[a,i]=j.useState(0),o=j.useRef(null),c=j.useRef(null);j.useRef(0),j.useEffect(()=>{Gl.requestPermissions()},[]);const d=async()=>{let p=await Se.getToken();if(p||(p=localStorage.getItem("token")),!p){console.warn("No authentication token found for WebSocket connection");return}const x=window.location.href;if(x.includes("ngrok")||x.includes("ngrok-free.app")){console.log("Ngrok detected - using HTTP polling instead of WebSocket"),h();return}console.log("Using HTTP polling for notifications"),h()},h=()=>{r(!0),console.log("Notification polling disabled")};return j.useEffect(()=>((async()=>{setTimeout(async()=>{await d()},1e3)})(),()=>{c.current&&clearInterval(c.current),o.current&&o.current.close(1e3,"Component unmounting")}),[]),j.useEffect(()=>{console.log("Initial notification fetch disabled")},[]),{notifications:e,unreadCount:a,isConnected:n,markAsRead:async p=>{console.log("Mark as read:",p),i(x=>Math.max(0,x-1))},markAllAsRead:async()=>{console.log("Mark all as read"),i(0)},clearNotifications:()=>{t([]),i(0)}}}function zS({className:e=""}){nt();const{navigateWithAuth:t}=uo(),{notifications:n,unreadCount:r,markAsRead:a,markAllAsRead:i,clearNotifications:o,isConnected:c}=sg(),[d,h]=j.useState(!1),m=x=>{switch(x){case"order":return s.jsx(Mt,{className:"h-4 w-4 text-blue-600"});case"payment":return s.jsx(lo,{className:"h-4 w-4 text-green-600"});case"system":return s.jsx(Lu,{className:"h-4 w-4 text-orange-600"});default:return s.jsx(zn,{className:"h-4 w-4 text-gray-600"})}},u=x=>{switch(x){case"order":return"border-l-blue-500 bg-blue-50";case"payment":return"border-l-green-500 bg-green-50";case"system":return"border-l-orange-500 bg-orange-50";default:return"border-l-gray-500 bg-gray-50"}},f=x=>{x.read||a(x.id),x.action_url&&(t(x.action_url),h(!1))},p=x=>{const v=new Date(x),w=Math.floor((new Date().getTime()-v.getTime())/(1e3*60));return w<1?"Just now":w<60?`${w}m ago`:w<1440?`${Math.floor(w/60)}h ago`:v.toLocaleDateString()};return s.jsxs(Vn,{open:d,onOpenChange:h,children:[s.jsx(wG,{asChild:!0,children:s.jsxs(ie,{variant:"ghost",size:"sm",className:`relative p-2 hover:bg-gray-100 rounded-full ${e}`,children:[s.jsx(zn,{className:`h-5 w-5 ${c?"text-gray-700":"text-gray-400"}`}),r>0&&s.jsx(Fe,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:r>99?"99+":r}),!c&&s.jsx("div",{className:"absolute -bottom-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})]})}),s.jsxs(kn,{side:"right",className:"w-full sm:w-96",children:[s.jsxs(Cn,{className:"pb-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Pn,{className:"flex items-center gap-2",children:[s.jsx(zn,{className:"h-5 w-5"}),"Notifications",r>0&&s.jsxs(Fe,{variant:"secondary",className:"ml-2",children:[r," new"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!c&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[s.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full animate-pulse"}),"Offline"]}),n.length>0&&s.jsx(ie,{variant:"ghost",size:"sm",onClick:o,className:"text-xs",children:"Clear All"})]})]}),r>0&&s.jsxs(ie,{variant:"outline",size:"sm",onClick:i,className:"w-full",children:[s.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Mark All as Read"]})]}),s.jsx(ej,{className:"h-[calc(100vh-120px)]",children:n.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(zn,{className:"h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"You're all caught up! New notifications will appear here."})]}):s.jsx("div",{className:"space-y-2",children:n.map(x=>s.jsx("div",{onClick:()=>f(x),className:`
                    p-4 rounded-lg border-l-4 cursor-pointer transition-all hover:shadow-md
                    ${u(x.type)}
                    ${x.read?"opacity-75":"ring-2 ring-blue-100"}
                  `,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:m(x.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:x.title}),!x.read&&s.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full flex-shrink-0 ml-2"})]}),s.jsx("p",{className:"text-sm text-gray-700 mb-2 line-clamp-2",children:x.message}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(Wr,{className:"h-3 w-3"}),p(x.timestamp||new Date().toISOString())]}),x.action_url&&s.jsx(ie,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-blue-600 hover:text-blue-800",onClick:v=>{v.stopPropagation(),f(x)},children:"View"})]})]})]})},x.id))})}),s.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:s.jsxs("div",{className:`
            flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-xs
            ${c?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}
          `,children:[s.jsx("div",{className:`h-2 w-2 rounded-full ${c?"bg-green-500":"bg-red-500 animate-pulse"}`}),c?"Connected to notification service":"Reconnecting..."]})})]})]})}function xK({children:e,redirectTo:t="/login"}){const[n,r]=j.useState(!0),[a,i]=j.useState(!1);nt();const{state:o}=Rn();j.useEffect(()=>{c()},[o.user]);const c=async()=>{var d,h;try{const m=o.user;if(m){if(!((d=m.available_roles)!=null&&d.includes("customer"))){console.log("CustomerAuthGuard: Customer role not available, user type:",m.user_type),i(!1);return}console.log("CustomerAuthGuard: Access granted for user:",m.user_type),i(!0);return}if(!await Se.isAuthenticated()){console.log("CustomerAuthGuard: Not authenticated"),i(!1);return}const f=await Se.getUser();if(!f){console.log("CustomerAuthGuard: No user data"),i(!1);return}if(!((h=f.available_roles)!=null&&h.includes("customer"))){console.log("CustomerAuthGuard: Customer role not available, user type:",f.user_type),i(!1);return}console.log("CustomerAuthGuard: Access granted for user:",f.user_type),i(!0)}catch(m){console.error("Customer auth guard error:",m),i(!1)}finally{r(!1)}};return n?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600 mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Checking authentication..."})]}):s.jsx(s.Fragment,{children:e})}function vK(){var vn,Fa;const e=nt(),{toast:t}=es(),{navigateWithAuth:n}=uo(),[r,a]=j.useState(!1),[i,o]=j.useState([]),[c,d]=j.useState(!0),[h,m]=j.useState(!1),[u,f]=j.useState({page:1,hasMore:!0,total:0}),[p,x]=j.useState("all"),[v,y]=j.useState("");j.useState("");const[w,b]=j.useState(!1),[_,N]=j.useState(null),[k,E]=j.useState({}),[T,R]=j.useState(!1),[$,M]=j.useState(null),[A,C]=j.useState(0),[z,P]=j.useState(""),[O,Y]=j.useState(!1),[J,G]=j.useState(!1),[F,I]=j.useState(null),[V,H]=j.useState(""),[U,q]=j.useState(""),[K,B]=j.useState(""),[W,oe]=j.useState(""),[X,re]=j.useState(""),[ue,me]=j.useState(""),[we,be]=j.useState(""),[ae,ee]=j.useState(""),[ye,le]=j.useState([]),[de,Q]=j.useState(!1),[se,ne]=j.useState(null),[ve,pe]=j.useState(!1),[ge,ke]=j.useState("");sg();const Be=j.useRef(null),qe=j.useCallback(async(he=1,rt=!1)=>{try{if(!await Se.isAuthenticated()){d(!1),m(!1);return}he===1?d(!0):m(!0);const Ze=await Em.getOrdersPaginated(he,10);o(rt||he===1?Ze.results||[]:kt=>[...kt,...Ze.results||[]]),f({page:he,hasMore:!!Ze.next,total:Ze.count||0});const at={},et=[...new Set((Ze.results||[]).map(kt=>{var Wt,Rs,is;return(is=(Rs=(Wt=kt.items)==null?void 0:Wt[0])==null?void 0:Rs.product_details)==null?void 0:is.vendor_name}).filter(Boolean))];for(const kt of et)at[kt]=await Ue(kt);E(kt=>({...kt,...at}))}catch(Le){console.error("Error fetching orders:",Le),await Se.getToken()&&t({title:"Error",description:Le.message||"Failed to load orders",variant:"destructive"})}finally{d(!1),m(!1)}},[n,t]);j.useEffect(()=>{(async()=>{const Ze=await Se.isAuthenticated();a(Ze),Ze?Ie.current(1,!0):d(!1)})();const rt=Ze=>{Ze.detail.type==="order"&&!document.hidden&&(Be.current&&clearTimeout(Be.current),Be.current=setTimeout(()=>{document.hidden||Ie.current(1,!0)},2e3))},Le=()=>{document.hidden||Ie.current(1,!0)};return window.addEventListener("newNotification",rt),document.addEventListener("visibilitychange",Le),()=>{window.removeEventListener("newNotification",rt),document.removeEventListener("visibilitychange",Le),Be.current&&clearTimeout(Be.current)}},[]);const gt=he=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",out_for_delivery:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[he]||"bg-gray-100 text-gray-800",ct=he=>({pending:"Order Placed",confirmed:"Confirmed",preparing:"Preparing",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"})[he]||he,Xe=he=>he==="all"?i:i.filter(rt=>rt.status===he),ce=async()=>{if(!v.trim()){t({title:"Reason Required",description:"Please provide a valid reason for cancellation",variant:"destructive"});return}try{await Em.cancelOrder(_,v),t({title:"Order Cancelled",description:"Your order has been cancelled successfully."}),b(!1),y(""),Ie.current(1,!0)}catch(he){console.error("Error cancelling order:",he),t({title:"Cancellation Failed",description:he.message||"Failed to cancel order",variant:"destructive"})}},Te=j.useRef(new Map),Ue=j.useCallback(async he=>{var rt;if(Te.current.has(he)){const Le=Te.current.get(he);if(Date.now()-Le.timestamp<3e5)return Le.status}try{const{response:Le,data:Ze}=await Re(`search/vendors/?search=${encodeURIComponent(he)}`);if(!Le.ok)return!1;const at=(rt=Ze==null?void 0:Ze.results)==null?void 0:rt.find(kt=>kt.business_name===he),et=(at==null?void 0:at.is_active)||!1;return Te.current.set(he,{status:et,timestamp:Date.now()}),et}catch(Le){return console.error("Error checking vendor status:",Le),!1}},[]),mt=async he=>{var rt,Le,Ze;try{const at=(Ze=(Le=(rt=he.items)==null?void 0:rt[0])==null?void 0:Le.product_details)==null?void 0:Ze.vendor_name;if(at&&!await Ue(at)){t({title:"Vendor Offline",description:"This vendor is currently offline. Cannot reorder at this time.",variant:"destructive"});return}for(const et of he.items);t({title:"Items Added",description:"Order items added to cart"}),e("/cart")}catch{t({title:"Reorder Failed",description:"Failed to add items to cart",variant:"destructive"})}},Ie=j.useRef(qe);Ie.current=qe;const ht=j.useCallback(()=>{!h&&u.hasMore&&Ie.current(u.page+1)},[h,u.hasMore,u.page]),{sentinelRef:gs}=Oy({hasMore:u.hasMore,isLoading:h,onLoadMore:ht,threshold:300}),Os=j.memo(({order:he})=>{var rt,Le,Ze,at,et,kt,Wt,Rs,is,zs,on,it;return s.jsxs(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow mb-4",onClick:()=>{ne(he),Q(!0)},children:[s.jsx(St,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs(Pt,{className:"text-lg",children:["Order #",he.order_number]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(he.created_at).toLocaleDateString()})]}),s.jsx(Fe,{className:`${gt(he.status)} px-3 py-1`,children:ct(he.status)})]})}),s.jsx(Oe,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2",children:[(rt=he.items)==null?void 0:rt.length," item",((Le=he.items)==null?void 0:Le.length)!==1?"s":""]}),s.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[(Ze=he.items)==null?void 0:Ze.slice(0,3).map(Ut=>{var Yn,lr,ta,Xn;return s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("img",{src:Us((ta=(lr=(Yn=Ut.product_details)==null?void 0:Yn.images)==null?void 0:lr[0])==null?void 0:ta.image_url),alt:Ut.product_name,className:"w-12 h-12 object-cover rounded-lg border"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:Ut.product_name}),s.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:(Xn=Ut.product_details)==null?void 0:Xn.category})]})]},Ut.id)}),((at=he.items)==null?void 0:at.length)>3&&s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center flex-shrink-0",children:s.jsxs("span",{className:"text-xs text-gray-600",children:["+",he.items.length-3]})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[s.jsx(Nn,{className:"h-4 w-4"}),s.jsx("button",{onClick:Ut=>{var lr,ta,Xn;Ut.stopPropagation();const Yn=(Xn=(ta=(lr=he.items)==null?void 0:lr[0])==null?void 0:ta.product_details)==null?void 0:Xn.vendor_id;Yn&&e(`/vendor/${Yn}`)},className:"text-blue-600 hover:underline text-xs font-medium truncate",children:((Wt=(kt=(et=he.items)==null?void 0:et[0])==null?void 0:kt.product_details)==null?void 0:Wt.vendor_name)||"Vendor"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Gt,{className:"h-4 w-4"}),s.jsx("span",{className:"truncate",children:he.delivery_address})]}),he.status==="out_for_delivery"&&s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yr,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium text-blue-800",children:"Shipping Details"})]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Vehicle:"})," ",he.vehicle_number||"TBA"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Vehicle Color:"})," ",he.vehicle_color||"N/A"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Driver Phone:"})," ",he.delivery_boy_phone||"TBA"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"ETA:"})," ",he.estimated_delivery_time||"TBA"]}),he.delivery_fee>0&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Fee:"})," ",parseFloat(he.delivery_fee).toFixed(2)]})]})]}),he.status==="cancelled"&&he.cancel_reason&&s.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ys,{className:"h-4 w-4 text-red-600"}),s.jsx("span",{className:"font-medium text-red-800",children:"Cancellation Reason"})]}),s.jsx("p",{className:"text-sm text-red-700",children:he.cancel_reason}),he.refund_status&&s.jsxs("p",{className:"text-sm text-red-600 mt-1",children:[s.jsx("span",{className:"font-medium",children:"Refund:"})," ",he.refund_status]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(he.total_amount).toFixed(2)]}),s.jsxs("div",{className:"flex gap-2",children:[he.status==="out_for_delivery"&&s.jsx(ie,{variant:"outline",size:"sm",onClick:async Ut=>{Ut.stopPropagation();try{const Yn=await Se.getToken(),{response:lr}=await Re(`/api/orders/${he.id}/status/`,{method:"POST",body:JSON.stringify({status:"delivered",notes:"Marked as received by customer"})});lr.ok&&o(ta=>ta.map(Xn=>Xn.id===he.id?{...Xn,status:"delivered",delivered_at:new Date().toISOString()}:Xn))}catch(Yn){console.error("Error marking as received:",Yn)}},className:"text-green-600 border-green-200 hover:bg-green-50",children:"Received"}),(he.status==="cancelled"||he.status==="pending"||he.status==="delivered")&&k[(zs=(is=(Rs=he.items)==null?void 0:Rs[0])==null?void 0:is.product_details)==null?void 0:zs.vendor_name]&&s.jsx(ie,{variant:"outline",size:"sm",onClick:Ut=>{Ut.stopPropagation(),mt(he)},className:"text-green-600 border-green-200 hover:bg-green-50",children:s.jsx(ma,{className:"h-4 w-4"})}),he.status==="pending"&&s.jsx(ie,{variant:"outline",size:"sm",onClick:Ut=>{Ut.stopPropagation(),N(he.id),b(!0)},className:"text-red-600 border-red-200 hover:bg-red-50",children:"Cancel"}),he.status==="delivered"&&!((on=he.refunds)!=null&&on.some(Ut=>["requested","approved","rejected","appeal","processed","completed"].includes(Ut.status)))&&(()=>{const Ut=new Date(he.delivered_at);return(new Date-Ut)/(1e3*60*60)<=24})()&&s.jsx(ie,{variant:"outline",size:"sm",onClick:Ut=>{Ut.stopPropagation(),I(he),G(!0)},className:"text-orange-600 border-orange-200 hover:bg-orange-50",children:"Return"}),he.status==="delivered"&&!((it=he.refunds)!=null&&it.some(Ut=>["requested","approved","rejected","appeal","processed","completed"].includes(Ut.status)))&&(()=>{const Ut=new Date(he.delivered_at);return(new Date-Ut)/(1e3*60*60)>24})()&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Return window expired"}),he.status==="delivered"&&!he.review&&s.jsx(ie,{variant:"outline",size:"sm",onClick:Ut=>{Ut.stopPropagation(),M(he),C(0),P(""),Y(!1),R(!0)},className:"text-emerald-600 border-emerald-200 hover:bg-emerald-50",children:s.jsx(js,{className:"h-4 w-4"})}),he.status==="delivered"&&he.review&&s.jsx(ie,{variant:"outline",size:"sm",onClick:Ut=>{Ut.stopPropagation(),M(he),C(he.review.overall_rating),P(he.review.review_text||""),Y(!0),R(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Edit Review"})]})]})]})})]},he.id)}),xn=()=>s.jsxs(Ee,{className:"mb-4",children:[s.jsx(St,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse w-32"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"})]}),s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-20"})]})}),s.jsx(Oe,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg animate-pulse"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-1/2"})]})]}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-full"}),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-20"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-16"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-16"})]})]})]})})]});return c&&i.length===0?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Orders"}),s.jsx(zS,{})]})}),s.jsx("main",{className:"max-w-4xl mx-auto p-4 pt-2",children:s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((he,rt)=>s.jsx(xn,{},rt))})})]}):s.jsx(xK,{children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Orders"}),s.jsx(zS,{})]})}),s.jsx("main",{className:"max-w-4xl mx-auto p-4 pt-2",children:i.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Mt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No orders yet"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start shopping to see your orders here"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(ie,{onClick:()=>e("/"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Start Shopping"}),!r&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Need to sign in?"}),s.jsx(ie,{variant:"outline",onClick:()=>e("/login?redirect=/orders"),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Sign In"})]})]})]}):s.jsxs(Ia,{value:p,onValueChange:x,className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:u.total>0&&s.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Showing ",i.length," of ",u.total," orders"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Qr,{className:"flex w-max min-w-full gap-1",children:[s.jsxs(Ot,{value:"all",className:"flex-shrink-0 px-2",children:["All ",s.jsxs("span",{className:"font-bold",children:["(",i.length,")"]})]}),s.jsxs(Ot,{value:"pending",className:"flex-shrink-0 px-2",children:["Pending ",s.jsxs("span",{className:"font-bold",children:["(",Xe("pending").length,")"]})]}),s.jsxs(Ot,{value:"confirmed",className:"flex-shrink-0 px-2",children:["Confirmed ",s.jsxs("span",{className:"font-bold",children:["(",Xe("confirmed").concat(Xe("preparing")).length,")"]})]}),s.jsxs(Ot,{value:"shipped",className:"flex-shrink-0 px-2",children:["Shipped ",s.jsxs("span",{className:"font-bold",children:["(",Xe("out_for_delivery").length,")"]})]}),s.jsxs(Ot,{value:"delivered",className:"flex-shrink-0 px-2",children:["Delivered ",s.jsxs("span",{className:"font-bold",children:["(",Xe("delivered").length,")"]})]}),s.jsxs(Ot,{value:"returns",className:"flex-shrink-0 px-2",children:["Returns ",s.jsxs("span",{className:"font-bold",children:["(",i.filter(he=>{var rt;return((rt=he.refunds)==null?void 0:rt.length)>0}).length,")"]})]}),s.jsxs(Ot,{value:"reviewed",className:"flex-shrink-0 px-2",children:["Reviewed ",s.jsxs("span",{className:"font-bold",children:["(",i.filter(he=>he.review).length,")"]})]}),s.jsxs(Ot,{value:"cancelled",className:"flex-shrink-0 px-2",children:["Cancelled ",s.jsxs("span",{className:"font-bold",children:["(",Xe("cancelled").length,")"]})]})]})}),s.jsxs(xt,{value:"all",className:"space-y-4",children:[i.map(he=>s.jsx(Os,{order:he},he.id)),u.hasMore&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{ref:gs,className:"h-4"}),h&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-600 mr-2"}),s.jsx("span",{className:"text-gray-600",children:"Loading more orders..."})]})]})]}),s.jsx(xt,{value:"pending",className:"space-y-4",children:Xe("pending").map(he=>s.jsx(Os,{order:he},he.id))}),s.jsx(xt,{value:"confirmed",className:"space-y-4",children:Xe("confirmed").concat(Xe("preparing")).map(he=>s.jsx(Os,{order:he},he.id))}),s.jsx(xt,{value:"shipped",className:"space-y-4",children:Xe("out_for_delivery").map(he=>s.jsx(Os,{order:he},he.id))}),s.jsx(xt,{value:"delivered",className:"space-y-4",children:Xe("delivered").map(he=>s.jsxs("div",{children:[s.jsx(Os,{order:he}),he.status==="delivered"&&he.delivered_at&&s.jsx("div",{className:"mt-2 px-4 py-2 bg-gray-50 rounded text-xs text-gray-600",children:(()=>{var et;const rt=new Date(he.delivered_at),at=24-(new Date-rt)/(1e3*60*60);return(et=he.refunds)!=null&&et.some(kt=>["requested","approved","rejected","appeal","processed","completed"].includes(kt.status))?"Return request already submitted":at>0?`Return available for ${Math.floor(at)} hours ${Math.floor(at%1*60)} minutes`:"Return window expired (24 hours after delivery)"})()})]},he.id))}),s.jsx(xt,{value:"returns",className:"space-y-4",children:i.filter(he=>{var rt;return((rt=he.refunds)==null?void 0:rt.length)>0}).length>0?i.filter(he=>{var rt;return((rt=he.refunds)==null?void 0:rt.length)>0}).map(he=>{var rt,Le,Ze,at;return s.jsx("div",{className:"bg-white rounded-lg border",children:s.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>{ne(he),Q(!0)},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("h3",{className:"font-semibold text-sm text-gray-900",children:["Order #",he.order_number]})}),s.jsxs(Fe,{className:"bg-orange-100 text-orange-800 flex items-center gap-1 text-xs px-2 py-1",children:[s.jsx(ma,{className:"h-3 w-3"}),"Return Request"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Nn,{className:"h-4 w-4"}),s.jsx("span",{className:"truncate",children:((Ze=(Le=(rt=he.items)==null?void 0:rt[0])==null?void 0:Le.product_details)==null?void 0:Ze.vendor_name)||"Vendor"})]}),(at=he.refunds)==null?void 0:at.map(et=>{var kt;return s.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Return Reason:"}),s.jsx(Fe,{className:`text-xs ${et.status==="requested"?"bg-yellow-100 text-yellow-800":et.status==="approved"?"bg-green-100 text-green-800":et.status==="rejected"?"bg-red-100 text-red-800":et.status==="appeal"?"bg-purple-100 text-purple-800":et.status==="processed"?"bg-blue-100 text-blue-800":et.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:et.status.charAt(0).toUpperCase()+et.status.slice(1)})]}),s.jsx("p",{className:"text-xs text-gray-700 capitalize",children:et.reason.replace("_"," ")}),et.customer_notes&&s.jsxs("p",{className:"text-xs text-gray-600",children:['"',et.customer_notes,'"']}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Amount:"})," ",et.requested_amount]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Method:"})," ",et.refund_method]}),((kt=et.evidence_photos)==null?void 0:kt.length)>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium mb-1",children:"Evidence Documents:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:et.evidence_photos.map((Wt,Rs)=>{var on;const is=(on=Wt.filename)==null?void 0:on.match(/\.(jpg|jpeg|png|gif|webp)$/i);let zs;return Wt.filename.startsWith("http")?zs=Wt.filename:Wt.filename.startsWith("/media/")?zs=`${mn.BASE_URL}${Wt.filename}`:zs=`${mn.BASE_URL}/media/${Wt.filename}`,s.jsxs("div",{className:"bg-blue-100 p-2 rounded text-xs cursor-pointer hover:bg-blue-200 transition-colors flex items-center gap-1",onClick:it=>{it.stopPropagation(),is?(ke(zs),pe(!0)):window.open(zs,"_blank")},children:[is?s.jsx(Ps,{className:"h-3 w-3 text-blue-600"}):s.jsx(Mt,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"text-blue-800",children:Wt.filename||`Document ${Rs+1}`})]},Rs)})})]}),et.status==="completed"&&s.jsx("div",{className:"bg-emerald-50 border border-emerald-200 rounded p-2 mt-2",children:s.jsx("p",{className:"text-xs text-emerald-800 font-medium",children:" Refund Completed"})}),et.status==="processed"&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mt-2",children:s.jsx("p",{className:"text-xs text-blue-800 font-medium",children:" Money Transferred"})}),et.admin_notes&&s.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[s.jsx("span",{className:"font-medium",children:"Response:"})," ",et.admin_notes]}),et.status==="rejected"&&s.jsx(ie,{size:"sm",variant:"outline",className:"w-full mt-2",onClick:async Wt=>{Wt.stopPropagation();try{const Rs=await Se.getToken(),{response:is}=await Re(`/api/refunds/${et.id}/appeal/`,{method:"POST",body:JSON.stringify({customer_notes:"Appealing the rejection decision"})});is.ok&&(t({title:"Appeal Submitted",description:"Your appeal has been submitted for review."}),qe(1,!0))}catch{t({title:"Error",description:"Failed to submit appeal.",variant:"destructive"})}},children:"Appeal Decision"})]},et.id)}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(he.total_amount).toFixed(2)]}),s.jsxs(ie,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:et=>{et.stopPropagation(),ne(he),Q(!0)},children:[s.jsx(Ps,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]})]})},he.id)}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(ma,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No returns yet"}),s.jsx("p",{className:"text-gray-500",children:"Your return requests will appear here"})]})}),s.jsx(xt,{value:"reviewed",className:"space-y-4",children:i.filter(he=>he.review).length>0?i.filter(he=>he.review).map(he=>{var rt;return s.jsx(Ee,{className:"mb-4",children:s.jsxs(Oe,{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg",children:["Order #",he.order_number]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(he.created_at).toLocaleDateString()})]}),s.jsx(Fe,{className:"bg-green-100 text-green-800 px-3 py-1",children:"Reviewed"})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"flex gap-3 overflow-x-auto",children:(rt=he.items)==null?void 0:rt.slice(0,3).map(Le=>{var Ze,at,et,kt;return s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("img",{src:((et=(at=(Ze=Le.product_details)==null?void 0:Ze.images)==null?void 0:at[0])==null?void 0:et.image_url)||"/placeholder-product.jpg",alt:Le.product_name,className:"w-12 h-12 object-cover rounded-lg border"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:Le.product_name}),s.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:(kt=Le.product_details)==null?void 0:kt.category})]})]},Le.id)})})}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Your Review"}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(Le=>s.jsx(js,{className:`h-4 w-4 ${Le<=he.review.overall_rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},Le))})]}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>{M(he),C(he.review.overall_rating),P(he.review.review_text||""),Y(!0),R(!0)},className:"h-7 text-xs",children:"Edit"})]}),he.review.review_text&&s.jsx("p",{className:"text-sm text-gray-700",children:he.review.review_text}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed on ",new Date(he.review.created_at).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t mt-3",children:[s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(he.total_amount).toFixed(2)]}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>{ne(he),Q(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"View Details"})]})]})},he.id)}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(js,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No reviews yet"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Complete your orders and share your experience"})]})}),s.jsx(xt,{value:"cancelled",className:"space-y-4",children:Xe("cancelled").map(he=>s.jsx(Os,{order:he},he.id))})]})}),s.jsx(Kn,{}),s.jsx(lc,{open:w,onOpenChange:b,children:s.jsxs(Wo,{className:"sm:max-w-md",children:[s.jsx(Zo,{children:s.jsx(Go,{children:"Cancel Order"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"reason",children:"Reason for Cancellation *"}),s.jsxs(qt,{value:v,onValueChange:y,children:[s.jsx(Bt,{children:s.jsx(Ht,{placeholder:"Select a reason"})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"changed_mind",children:"Changed my mind"}),s.jsx(We,{value:"found_better_price",children:"Found better price elsewhere"}),s.jsx(We,{value:"delivery_too_long",children:"Delivery time too long"}),s.jsx(We,{value:"ordered_by_mistake",children:"Ordered by mistake"}),s.jsx(We,{value:"payment_issues",children:"Payment issues"}),s.jsx(We,{value:"other",children:"Other reason"})]})]})]}),v==="other"&&s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"custom_reason",children:"Please specify"}),s.jsx(Ws,{id:"custom_reason",placeholder:"Enter your reason...",value:v,onChange:he=>y(he.target.value)})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(ie,{variant:"outline",onClick:()=>b(!1),className:"flex-1",children:"Keep Order"}),s.jsx(ie,{onClick:ce,className:"flex-1 bg-red-600 hover:bg-red-700",disabled:!v,children:"Cancel Order"})]})]})]})}),s.jsx(lc,{open:T,onOpenChange:R,children:s.jsxs(Wo,{className:"sm:max-w-md",children:[s.jsx(Zo,{children:s.jsx(Go,{children:O?"Edit Review":"Rate & Review Order"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Rating *"}),s.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,3,4,5].map(he=>s.jsx("button",{onClick:()=>C(he),className:`text-2xl ${he<=A?"text-yellow-400":"text-gray-300"}`,children:""},he))})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"review",children:"Review (Optional)"}),s.jsx(Ws,{id:"review",placeholder:"Share your experience...",value:z,onChange:he=>P(he.target.value),rows:3})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(ie,{variant:"outline",onClick:()=>{R(!1),C(0),P(""),Y(!1)},className:"flex-1",children:"Cancel"}),s.jsx(ie,{onClick:async()=>{if(A)try{const he=await Se.getToken(),rt="POST",{response:Le,data:Ze}=await Re(`/api/orders/${$.id}/review/`,{method:rt,body:JSON.stringify({overall_rating:A,review_text:z})});Le.ok&&Ze&&(o(at=>at.map(et=>et.id===$.id?{...et,review:Ze.review}:et)),R(!1),C(0),P(""),Y(!1),t({title:O?"Review Updated":"Review Submitted",description:"Thank you for your feedback!"}))}catch(he){console.error("Error submitting review:",he),t({title:"Error",description:"Failed to submit review. Please try again.",variant:"destructive"})}},className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:!A,children:O?"Update Review":"Submit Review"})]})]})]})}),s.jsx(Vn,{open:J,onOpenChange:G,children:s.jsxs(kn,{side:"bottom",className:"h-[80vh] rounded-t-xl",children:[s.jsx(Cn,{className:"pb-4",children:s.jsxs(Pn,{className:"text-left flex items-center gap-2",children:[s.jsx(ma,{className:"h-5 w-5"}),"Return Order #",F==null?void 0:F.order_number]})}),s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Return Reason *"}),s.jsxs(qt,{value:V,onValueChange:H,children:[s.jsx(Bt,{children:s.jsx(Ht,{placeholder:"Select reason for return"})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"defective_product",children:"Defective/Damaged Product"}),s.jsx(We,{value:"wrong_item",children:"Wrong Item Delivered"}),s.jsx(We,{value:"quality_issue",children:"Quality Issue"}),s.jsx(We,{value:"not_as_described",children:"Not as Described"}),s.jsx(We,{value:"expired_product",children:"Expired Product"}),s.jsx(We,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Additional Notes"}),s.jsx(Ws,{placeholder:"Describe the issue in detail...",value:U,onChange:he=>q(he.target.value),rows:3})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Evidence Photos/Documents *"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Please provide evidence to support your return request"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[s.jsx(gp,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload photos or documents as proof"}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:he=>le(Array.from(he.target.files)),className:"hidden",id:"evidence-upload"}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>document.getElementById("evidence-upload").click(),className:"mt-2",children:"Choose Files"})]}),ye.length>0&&s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[ye.length," file(s) selected:"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:ye.map((he,rt)=>s.jsxs("div",{className:"bg-gray-50 p-2 rounded text-xs flex items-center justify-between",children:[s.jsx("span",{className:"truncate",children:he.name}),s.jsx("button",{onClick:()=>le(Le=>Le.filter((Ze,at)=>at!==rt)),className:"text-red-500 hover:text-red-700 ml-2",children:""})]},rt))})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Refund Method *"}),s.jsxs(qt,{value:K,onValueChange:B,children:[s.jsx(Bt,{children:s.jsx(Ht,{placeholder:"Select refund method"})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"esewa",children:"eSewa"}),s.jsx(We,{value:"khalti",children:"Khalti"}),s.jsx(We,{value:"bank",children:"Bank Transfer"})]})]})]}),K==="esewa"&&s.jsxs("div",{children:[s.jsx(xe,{children:"eSewa Number *"}),s.jsx(je,{placeholder:"98XXXXXXXX",value:W,onChange:he=>oe(he.target.value)})]}),K==="khalti"&&s.jsxs("div",{children:[s.jsx(xe,{children:"Khalti Number *"}),s.jsx(je,{placeholder:"98XXXXXXXX",value:X,onChange:he=>re(he.target.value)})]}),K==="bank"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Account Holder Name *"}),s.jsx(je,{placeholder:"Full name as per bank account",value:ue,onChange:he=>me(he.target.value)})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Account Number *"}),s.jsx(je,{placeholder:"Bank account number",value:we,onChange:he=>be(he.target.value)})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Bank Branch *"}),s.jsx(je,{placeholder:"Branch name",value:ae,onChange:he=>ee(he.target.value)})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Lu,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Return Policy"}),s.jsxs("ul",{className:"text-xs space-y-1",children:[s.jsx("li",{children:" Returns are processed within 3-5 business days"}),s.jsx("li",{children:" Refund will be processed after vendor approval"}),s.jsx("li",{children:" You can appeal if your return is rejected"})]})]})]})})]}),s.jsxs("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:[s.jsx(ie,{variant:"outline",className:"flex-1",onClick:()=>{G(!1),H(""),q(""),B(""),oe(""),re(""),me(""),be(""),ee(""),le([])},children:"Cancel"}),s.jsx(ie,{className:"flex-1 bg-orange-600 hover:bg-orange-700",disabled:!V||!K||ye.length===0||K==="esewa"&&!W||K==="khalti"&&!X||K==="bank"&&(!ue||!we||!ae),onClick:async()=>{try{const he=await Se.getToken(),rt=new FormData;rt.append("reason",V),rt.append("customer_notes",U),rt.append("refund_method",K),rt.append("requested_amount",F.total_amount),K==="esewa"&&rt.append("esewa_number",W),K==="khalti"&&rt.append("khalti_number",X),K==="bank"&&(rt.append("bank_account_name",ue),rt.append("bank_account_number",we),rt.append("bank_branch",ae)),ye.forEach((Ze,at)=>{rt.append(`evidence_${at}`,Ze)}),(await fetch(`${mn.BASE_URL}/api/orders/${F.id}/return/`,{method:"POST",headers:{Authorization:`Token ${he}`,"ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"},body:rt})).ok&&(t({title:"Return Requested",description:"Your return request has been submitted successfully."}),G(!1),qe(1,!0))}catch{t({title:"Error",description:"Failed to submit return request.",variant:"destructive"})}},children:"Submit Return Request"})]})]})}),s.jsx(Vn,{open:de,onOpenChange:Q,children:s.jsxs(kn,{side:"bottom",className:"h-[90vh] rounded-t-xl",children:[s.jsx(Cn,{className:"pb-4",children:s.jsxs(Pn,{className:"text-left",children:["Order Details - #",se==null?void 0:se.order_number]})}),se&&s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Order Items"}),s.jsx("div",{className:"space-y-2",children:((vn=se.items)==null?void 0:vn.map((he,rt)=>{var Le,Ze,at;return s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:((at=(Ze=(Le=he.product_details)==null?void 0:Le.images)==null?void 0:Ze[0])==null?void 0:at.image_url)||"/placeholder-product.jpg",alt:he.product_name,className:"w-8 h-8 object-cover rounded"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:he.product_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",he.quantity]})]})]}),s.jsxs("p",{className:"text-sm font-semibold",children:["",he.total_price]})]},rt)}))||[]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Delivery Information"}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Address:"})," ",se.delivery_address]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",se.delivery_phone]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Name:"})," ",se.delivery_name]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-3",children:"Payment Details"}),s.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200 mb-3",children:[s.jsxs("h4",{className:"font-semibold text-emerald-800 text-sm mb-2",children:["Bill Amount (Paid via ",se.payment_method,")"]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["",se.subtotal]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax:"}),s.jsxs("span",{children:["",se.tax_amount]})]}),s.jsx("hr",{className:"my-1"}),s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx("span",{children:"Bill Total (Paid):"}),s.jsxs("span",{className:"text-emerald-600",children:["",(parseFloat(se.subtotal)+parseFloat(se.tax_amount)).toFixed(2)]})]})]})]}),s.jsx("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200 mb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-orange-800 text-base",children:"Delivery Fee"}),s.jsx("p",{className:"text-xs text-orange-700",children:se.status==="delivered"?"Paid on delivery":"Pay on delivery"})]}),s.jsxs("span",{className:"font-bold text-lg text-orange-600",children:["",parseFloat(se.delivery_fee).toFixed(2)]})]})}),s.jsx("hr",{className:"my-2"}),s.jsxs("div",{className:"flex justify-between font-semibold text-sm",children:[s.jsx("span",{children:"Grand Total:"}),s.jsxs("span",{children:["",se.total_amount]})]}),s.jsxs("div",{className:"mt-3 pt-2 border-t space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Payment Method:"}),s.jsx("span",{className:"capitalize",children:se.payment_method})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Payment Status:"}),s.jsx(Fe,{variant:se.payment_status==="paid"?"default":"secondary",className:"text-xs",children:se.payment_status})]})]})]}),((Fa=se.refunds)==null?void 0:Fa.map(he=>{var rt;return s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[s.jsx(ma,{className:"h-4 w-4"}),"Return/Refund Details"]}),s.jsxs("div",{className:"space-y-3 text-xs",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Status:"}),s.jsx(Fe,{className:`text-xs ${he.status==="requested"?"bg-yellow-100 text-yellow-800":he.status==="approved"?"bg-green-100 text-green-800":he.status==="rejected"?"bg-red-100 text-red-800":he.status==="appeal"?"bg-purple-100 text-purple-800":he.status==="processed"?"bg-blue-100 text-blue-800":he.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:he.status.charAt(0).toUpperCase()+he.status.slice(1)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),s.jsx("p",{className:"text-gray-600 capitalize",children:he.reason.replace("_"," ")})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Requested Amount:"}),s.jsxs("p",{className:"text-gray-600",children:["",he.requested_amount]})]}),he.approved_amount&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Approved Amount:"}),s.jsxs("p",{className:"text-gray-600",children:["",he.approved_amount]})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[s.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Your Refund Details:"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Method:"})," ",he.refund_method]}),he.refund_method==="esewa"&&he.esewa_number&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"eSewa Number:"})," ",he.esewa_number]}),he.refund_method==="khalti"&&he.khalti_number&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Khalti Number:"})," ",he.khalti_number]}),he.refund_method==="bank"&&s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Account Name:"})," ",he.bank_account_name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Account Number:"})," ",he.bank_account_number]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Branch:"})," ",he.bank_branch]})]})]})]}),he.customer_notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Your Notes:"}),s.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:he.customer_notes})]}),he.admin_notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Vendor Response:"}),s.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:he.admin_notes})]}),((rt=he.evidence_photos)==null?void 0:rt.length)>0&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Evidence Documents:"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:he.evidence_photos.map((Le,Ze)=>{var kt;const at=(kt=Le.filename)==null?void 0:kt.match(/\.(jpg|jpeg|png|gif|webp)$/i);let et;return Le.filename.startsWith("http")?et=Le.filename:et=Us(Le.filename),s.jsxs("div",{className:"bg-white p-2 rounded border hover:shadow-md transition-shadow",children:[at?s.jsxs("div",{className:"cursor-pointer mb-2 group",onClick:()=>{ke(et),pe(!0)},children:[s.jsxs("div",{className:"relative overflow-hidden rounded",children:[s.jsx("img",{src:et,alt:Le.filename,className:"w-full h-20 object-cover rounded mb-1 group-hover:scale-105 transition-transform",onError:Wt=>{Wt.currentTarget.src="/placeholder-image.svg",Wt.currentTarget.alt="Image not found"}}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center",children:s.jsx(Ps,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),s.jsx("p",{className:"text-xs text-blue-600 font-medium",children:" Click to enlarge"})]}):s.jsx("div",{className:"w-full h-20 bg-gray-100 rounded mb-2 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>{window.open(et,"_blank")},children:s.jsxs("div",{className:"text-center",children:[s.jsx(Mt,{className:"h-6 w-6 text-gray-400 mx-auto mb-1"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Document"})]})}),s.jsx("p",{className:"font-medium text-xs truncate",title:Le.filename,children:Le.filename||`Document ${Ze+1}`}),s.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",Le.uploaded_by]}),s.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",new Date(Le.uploaded_at).toLocaleDateString()]})]},Ze)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500 border-t pt-2",children:[s.jsx("div",{children:s.jsxs("p",{children:["Requested: ",new Date(he.requested_at).toLocaleDateString()]})}),he.approved_at&&s.jsx("div",{children:s.jsxs("p",{children:["Approved: ",new Date(he.approved_at).toLocaleDateString()]})}),he.processed_at&&s.jsx("div",{children:s.jsxs("p",{children:["Processed: ",new Date(he.processed_at).toLocaleDateString()]})}),he.completed_at&&s.jsx("div",{children:s.jsxs("p",{children:["Completed: ",new Date(he.completed_at).toLocaleDateString()]})}),he.appeal_at&&s.jsx("div",{children:s.jsxs("p",{children:["Appealed: ",new Date(he.appeal_at).toLocaleDateString()]})})]})]})]},he.id)}))||[]]})]})}),s.jsx(lc,{open:ve,onOpenChange:pe,children:s.jsxs(Wo,{className:"max-w-5xl max-h-[95vh] p-4",children:[s.jsx(Zo,{className:"pb-4",children:s.jsxs(Go,{className:"flex items-center gap-2",children:[s.jsx(Ps,{className:"h-5 w-5"}),"Evidence Document Preview"]})}),s.jsx("div",{className:"flex justify-center items-center bg-gray-50 rounded-lg p-4",children:s.jsx("img",{src:ge,alt:"Evidence Preview",className:"max-w-full max-h-[75vh] object-contain rounded shadow-lg",onError:he=>{he.currentTarget.src="/placeholder-image.svg",he.currentTarget.alt="Image not found"}})}),s.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[s.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>window.open(ge,"_blank"),children:[s.jsx(tl,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),s.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>{const he=document.createElement("a");he.href=ge,he.download="evidence-document",he.click()},children:[s.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})})]})})}const yK=[{id:1,type:"home",label:"Home",name:"John Doe",phone:"+977 9841234567",address:"123 Thamel Street, Thamel",city:"Kathmandu",landmark:"Near Durbar Square",isDefault:!0},{id:2,type:"work",label:"Office",name:"John Doe",phone:"+977 9841234567",address:"456 Lazimpat Road, Lazimpat",city:"Kathmandu",landmark:"Opposite British Embassy",isDefault:!1}],bK=e=>{switch(e){case"home":return s.jsx(vb,{className:"h-5 w-5"});case"work":return s.jsx(HD,{className:"h-5 w-5"});case"other":return s.jsx(Nr,{className:"h-5 w-5"});default:return s.jsx(Gt,{className:"h-5 w-5"})}};function wK(){const e=nt(),[t,n]=j.useState(yK),r=()=>{console.log("Add new address")},a=c=>{console.log("Edit address",c)},i=c=>{n(t.filter(d=>d.id!==c))},o=c=>{n(t.map(d=>({...d,isDefault:d.id===c})))};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"My Addresses"}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:s.jsx(Es,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[t.length>0?t.map(c=>s.jsxs(Ee,{className:"hover:shadow-md transition-shadow",children:[s.jsx(St,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:bK(c.type)}),s.jsx("div",{children:s.jsxs(Pt,{className:"text-base flex items-center gap-2",children:[c.label,c.isDefault&&s.jsx(Fe,{variant:"secondary",className:"text-xs",children:"Default"})]})})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>a(c.id),className:"p-2",children:s.jsx(lh,{className:"h-4 w-4"})}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>i(c.id),className:"p-2 text-red-600 hover:text-red-700",children:s.jsx(Yi,{className:"h-4 w-4"})})]})]})}),s.jsxs(Oe,{className:"space-y-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:c.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:c.phone}),s.jsx("p",{className:"text-sm",children:c.address}),s.jsx("p",{className:"text-sm",children:c.city}),c.landmark&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Landmark: ",c.landmark]})]}),!c.isDefault&&s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>o(c.id),className:"w-full mt-3",children:"Set as Default"})]})]},c.id)):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No addresses found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your delivery addresses to make ordering faster"}),s.jsxs(ie,{onClick:r,children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Add New Address"]})]}),t.length>0&&s.jsx(Ee,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:s.jsx(Oe,{className:"p-6 text-center",children:s.jsxs(ie,{variant:"ghost",onClick:r,className:"w-full h-16 flex flex-col items-center gap-2",children:[s.jsx(Es,{className:"h-6 w-6"}),s.jsx("span",{children:"Add New Address"})]})})})]}),s.jsx(Kn,{})]})}const jK=[{id:1,type:"card",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2026,isDefault:!0,cardholderName:"John Doe"},{id:2,type:"card",last4:"8888",brand:"Mastercard",expiryMonth:8,expiryYear:2025,isDefault:!1,cardholderName:"John Doe"}],_K=e=>s.jsx(lo,{className:"h-5 w-5"}),NK=e=>`   ${e}`;function SK(){const e=nt(),[t,n]=j.useState(jK),r=()=>{console.log("Add new payment method")},a=c=>{console.log("Edit payment method",c)},i=c=>{n(t.filter(d=>d.id!==c))},o=c=>{n(t.map(d=>({...d,isDefault:d.id===c})))};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Payment Methods"}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:s.jsx(Es,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[t.length>0?t.map(c=>s.jsxs(Ee,{className:"hover:shadow-md transition-shadow",children:[s.jsx(St,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:_K(c.brand)}),s.jsxs("div",{children:[s.jsxs(Pt,{className:"text-base flex items-center gap-2",children:[c.brand," ",NK(c.last4),c.isDefault&&s.jsx(Fe,{variant:"secondary",className:"text-xs",children:"Default"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires ",String(c.expiryMonth).padStart(2,"0"),"/",c.expiryYear]})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>a(c.id),className:"p-2",children:s.jsx(lh,{className:"h-4 w-4"})}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>i(c.id),className:"p-2 text-red-600 hover:text-red-700",children:s.jsx(Yi,{className:"h-4 w-4"})})]})]})}),s.jsxs(Oe,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Wn,{className:"h-4 w-4"}),s.jsx("span",{children:"Secured with 256-bit SSL encryption"})]}),!c.isDefault&&s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>o(c.id),className:"w-full",children:"Set as Default"})]})]},c.id)):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(lo,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No payment methods"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Add a payment method to make checkout faster"}),s.jsxs(ie,{onClick:r,children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Add Payment Method"]})]}),t.length>0&&s.jsx(Ee,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:s.jsx(Oe,{className:"p-6 text-center",children:s.jsxs(ie,{variant:"ghost",onClick:r,className:"w-full h-16 flex flex-col items-center gap-2",children:[s.jsx(Es,{className:"h-6 w-6"}),s.jsx("span",{children:"Add New Payment Method"})]})})}),s.jsx(Ee,{className:"bg-green-50 border-green-200",children:s.jsx(Oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Wn,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-800 text-sm",children:"Secure Payments"}),s.jsx("p",{className:"text-green-700 text-xs",children:"All payment information is encrypted and secure"})]})]})})})]}),s.jsx(Kn,{})]})}const kK=[{id:"orders",title:"Orders & Delivery",icon:Wr,description:"Track orders, delivery issues, cancellations",articles:["How to track my order?","Delivery time and charges","Cancel or modify order","Refund policy"]},{id:"payment",title:"Payment & Billing",icon:js,description:"Payment methods, billing, refunds",articles:["Payment methods accepted","Failed payment issues","Refund process","Billing disputes"]},{id:"account",title:"Account & Profile",icon:YD,description:"Account settings, profile management",articles:["Update profile information","Change password","Manage addresses","Privacy settings"]},{id:"technical",title:"Technical Support",icon:ch,description:"App issues, login problems, bugs",articles:["App not working","Login issues","Payment errors","Report a bug"]}],CK=[{icon:_a,title:"Live Chat",description:"Chat with our support team",action:"Start Chat",available:!0},{icon:ch,title:"Phone Support",description:"Call us for immediate help",action:"Call Now",available:!0},{icon:t6,title:"Email Support",description:"Send us an email",action:"Send Email",available:!0}];function PK(){const e=nt(),[t,n]=j.useState(""),r=i=>{switch(i){case"Start Chat":console.log("Starting live chat");break;case"Call Now":window.open("tel:+977-1-234567");break;case"Send Email":window.open("mailto:support@kathsnap.com");break}},a=kK.filter(i=>i.title.toLowerCase().includes(t.toLowerCase())||i.description.toLowerCase().includes(t.toLowerCase())||i.articles.some(o=>o.toLowerCase().includes(t.toLowerCase())));return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Help & Support"}),s.jsx("div",{className:"w-10"})," "]})}),s.jsx("div",{className:"p-4 bg-white border-b",children:s.jsxs("div",{className:"relative",children:[s.jsx(Vo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(je,{placeholder:"Search help articles...",value:t,onChange:i=>n(i.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[a.map(i=>{const o=i.icon;return s.jsxs(Ee,{className:"hover:shadow-md transition-shadow",children:[s.jsx(St,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:s.jsx(o,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Pt,{className:"text-base",children:i.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]}),s.jsx(Sc,{className:"h-5 w-5 text-muted-foreground"})]})}),s.jsx(Oe,{children:s.jsxs("div",{className:"space-y-2",children:[i.articles.slice(0,2).map((c,d)=>s.jsxs("div",{className:"text-sm text-muted-foreground hover:text-primary cursor-pointer",children:[" ",c]},d)),i.articles.length>2&&s.jsxs("div",{className:"text-sm text-primary font-medium cursor-pointer",children:["View all ",i.articles.length," articles"]})]})})]},i.id)}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{className:"text-base",children:"Contact Support"})}),s.jsx(Oe,{className:"space-y-3",children:CK.map((i,o)=>{const c=i.icon;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(i.action),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:s.jsx(c,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:i.title}),s.jsx("div",{className:"text-xs text-muted-foreground",children:i.description})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[i.available&&s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx(Sc,{className:"h-4 w-4 text-muted-foreground"})]})]},o)})})]}),s.jsx(Ee,{className:"bg-primary/5 border-primary/20",children:s.jsx(Oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Wr,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-primary text-sm",children:"Support Hours"}),s.jsx("p",{className:"text-primary/80 text-xs",children:"Monday - Sunday: 6:00 AM - 10:00 PM"})]})]})})})]}),s.jsx(Kn,{})]})}const BS=()=>{var F,I,V,H;const e=nt(),[t]=Bb(),n=t.get("vendor"),r=t.get("conversation");j.useEffect(()=>{(async()=>{if(!await Se.getToken()){const K=window.location.pathname+window.location.search;e(`/login?redirect=${encodeURIComponent(K)}`)}})()},[e]);const[a,i]=j.useState(null),[o,c]=j.useState([]),[d,h]=j.useState([]),[m,u]=j.useState(""),[f,p]=j.useState(!0),[x,v]=j.useState(1),[y,w]=j.useState(!1),[b,_]=j.useState(!1),[N,k]=j.useState(null),[E,T]=j.useState(0),R=j.useRef(null),$=j.useRef(null);j.useEffect(()=>{(async()=>{await M(),await A(),rs.initialize(),n&&Y(parseInt(n)),r&&J(parseInt(r))})();const q=K=>{if(K.key==="newMessage"&&K.newValue){const B=JSON.parse(K.newValue);B.sender!==(N==null?void 0:N.username)&&rs.notifyNewMessage(B.sender,B.content,B.conversationId.toString(),"customer")}};return window.addEventListener("storage",q),()=>window.removeEventListener("storage",q)},[n,r]);const M=async()=>{try{if(!await Se.getToken())return;const{response:q,data:K}=await Re("/profile/");q.ok&&K&&k(K)}catch(U){console.error("Failed to fetch current user:",U)}};j.useEffect(()=>{a&&z(a.id)},[a]),j.useEffect(()=>{if(!a)return;const U=async()=>{if(!document.hidden)try{const q=await tr.getMessages(a.id);let K=[];Array.isArray(q)?K=q.reverse():q!=null&&q.results&&Array.isArray(q.results)&&(K=q.results.reverse()),h(K),T(K.length)}catch(q){console.error("Failed to refresh messages:",q)}};return document.addEventListener("visibilitychange",U),()=>document.removeEventListener("visibilitychange",U)},[a]);const A=async(U=1,q=!1)=>{try{const{response:K,data:B}=await Re(`messaging/conversations/?page=${U}&page_size=20`);if(!K.ok)throw new Error("Failed to fetch conversations");let W=(B==null?void 0:B.results)||[];U===1&&(W.some(X=>{var re,ue;return((re=X.other_participant)==null?void 0:re.username)==="admin"||((ue=X.other_participant)==null?void 0:ue.id)===1})||(W=[{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}},...W])),c(q?oe=>[...oe,...W]:W),w(!!(B!=null&&B.next)),v(U)}catch(K){console.error("Failed to load conversations:",K),U===1&&c([{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}}])}finally{p(!1),_(!1)}},C=async()=>{b||!y||(_(!0),await A(x+1,!0))},z=async U=>{try{const q=await tr.getMessages(U);let K=[];Array.isArray(q)?K=q.reverse():q!=null&&q.results&&Array.isArray(q.results)&&(K=q.results.reverse()),h(K),T(K.length)}catch(q){console.error("Failed to load messages:",q),h([]),T(0)}},P=async()=>{if(!(!m.trim()||!a))try{const U=await tr.sendMessage({conversation_id:a.id,message_type:"text",content:m});h(K=>[...K,U.message]);const q={conversationId:a.id,sender:(N==null?void 0:N.username)||"Unknown",content:m,timestamp:new Date().toISOString()};localStorage.setItem("newMessage",JSON.stringify(q)),setTimeout(()=>localStorage.removeItem("newMessage"),100);try{await fetch("http://localhost:8000/api/broadcast/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:(N==null?void 0:N.username)||"Unknown",content:m,conversation_id:a.id})})}catch(K){console.log("Cross-domain broadcast failed:",K)}u("")}catch(U){console.error("Failed to send message:",U)}},O=async U=>{var K;const q=(K=U.target.files)==null?void 0:K[0];if(!(!q||!a))try{const B=await tr.sendMessage({conversation_id:a.id,message_type:q.type.startsWith("image/")?"image":"file",file:q});h(W=>[...W,B.message])}catch(B){console.error("Failed to send file:",B)}},Y=async U=>{try{const q=await tr.getOrCreateConversation(U);i(q)}catch(q){console.error("Failed to create conversation:",q)}},J=async U=>{try{await new Promise(K=>{const B=()=>{o.length>0||!f?K(!0):setTimeout(B,100)};B()});const q=o.find(K=>K.id===U);q&&i(q)}catch(q){console.error("Failed to open conversation:",q)}},G=()=>{var U;(U=R.current)==null||U.scrollIntoView({behavior:"smooth"})};return j.useEffect(()=>{G()},[d]),f?s.jsx("div",{className:"h-screen bg-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),s.jsx("p",{children:"Loading conversations..."})]})}):a?s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>{i(null),e("/messages",{replace:!0})},children:s.jsx(Yt,{className:"h-4 w-4"})}),s.jsxs(ci,{className:"h-10 w-10",children:[s.jsx(Ur,{src:Us((F=a.other_participant)==null?void 0:F.profile_picture)}),s.jsx(di,{children:(V=(I=a.other_participant)==null?void 0:I.username)==null?void 0:V.charAt(0)})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-sm",children:(H=a.other_participant)==null?void 0:H.username}),s.jsx("p",{className:"text-xs text-gray-500",children:"Online"})]}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>z(a.id),className:"p-2",children:s.jsx(Aa,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.map(U=>{const q=N&&U.sender.id===N.id;return s.jsx("div",{className:`w-full flex ${q?"justify-end":"justify-start"} mb-2`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow ${q?"bg-blue-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[U.message_type==="text"&&s.jsx("p",{className:"text-sm",children:U.content}),U.message_type==="image"&&s.jsx("div",{className:"space-y-2",children:s.jsx("img",{src:Us(U.file_url),alt:"Shared image",className:"rounded max-w-full h-auto"})}),U.message_type==="file"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gv,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:U.file_name})]}),s.jsxs("div",{className:"flex items-center justify-end mt-1 gap-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(U.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),q&&s.jsx("span",{className:`text-xs ${U.is_read?"text-blue-500":"text-gray-400"}`,children:U.is_read?"":""})]})]})},U.id)}),s.jsx("div",{ref:R})]}),s.jsxs("div",{className:"bg-white border-t p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>{var U;return(U=$.current)==null?void 0:U.click()},children:s.jsx(Gv,{className:"h-4 w-4"})}),s.jsx(je,{value:m,onChange:U=>u(U.target.value),placeholder:"Type a message...",className:"flex-1",onKeyPress:U=>U.key==="Enter"&&P()}),s.jsx(ie,{onClick:P,disabled:!m.trim(),children:s.jsx(jb,{className:"h-4 w-4"})})]}),s.jsx("input",{ref:$,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:O,className:"hidden"})]})]}):s.jsxs("div",{className:"h-screen bg-white flex flex-col",children:[s.jsx("div",{className:"border-b p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e("/home"),children:s.jsx(Yt,{className:"h-4 w-4"})}),s.jsx("h2",{className:"text-lg font-semibold",children:"Messages"})]})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(bb,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No conversations yet"}),s.jsx("p",{className:"text-sm",children:"Start messaging with vendors!"})]}):o.map((U,q)=>{var K,B,W,oe,X,re;return s.jsxs("div",{className:"flex items-center gap-3 p-4 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{U.id===0?Y(1):i(U)},children:[s.jsxs("div",{className:"relative",children:[s.jsxs(ci,{className:"h-12 w-12",children:[s.jsx(Ur,{src:Us((K=U.other_participant)==null?void 0:K.profile_picture)}),s.jsx(di,{children:(W=(B=U.other_participant)==null?void 0:B.username)==null?void 0:W.charAt(0)})]}),s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm truncate",children:(oe=U.other_participant)==null?void 0:oe.username}),s.jsx("span",{className:"text-xs text-gray-500",children:U.last_message?new Date(U.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:((X=U.last_message)==null?void 0:X.content)||((re=U.last_message)==null?void 0:re.file_name)||"Start conversation"})]}),U.unread_count>0&&s.jsx(Fe,{className:"bg-blue-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center",children:U.unread_count})]},U.id)}),y&&s.jsx("div",{className:"p-4 text-center",children:s.jsx(ie,{onClick:C,disabled:b,variant:"outline",className:"w-full",children:b?"Loading...":"Load More Conversations"})})]})]})},EK=`
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
`;if(typeof document<"u"){const e=document.createElement("style");e.textContent=EK,document.head.appendChild(e)}const qy=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3},TK=()=>{const e=27.6398805,t=85.3303725,n=27.66424179701499,r=85.3465231243003,a=qy(e,t,n,r);console.log(` Your coordinates test: ${a.toFixed(3)} km (Google shows: 5.1 km)`);const i={lat:40.7128,lon:-74.006},o={lat:34.0522,lon:-118.2437},c=qy(i.lat,i.lon,o.lat,o.lon);console.log(`Test: NYC to LA = ${c.toFixed(2)} km (Google: ~3944 km)`),console.log(` Verify on Google Maps: https://www.google.com/maps/dir/${e},${t}/${n},${r}`)};function AK(){const e=nt(),{categoryName:t}=Tp(),[n,r]=j.useState({products:[]}),[a,i]=j.useState(!1),[o,c]=j.useState(dt.getLocation()),[d,h]=j.useState({page:1,hasMore:!0}),[m,u]=j.useState(new Set),[f,p]=j.useState(!1),[x,v]=j.useState(""),[y,w]=j.useState([]),[b,_]=j.useState(""),{addToCart:N}=Gn(),{toast:k}=es(),E=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const O=dt.subscribe(c);return dt.startTracking(),TK(),R(),C(),T(),O},[t]),j.useEffect(()=>{R(1)},[x,t,b]),j.useEffect(()=>{o&&(console.log(" Location updated, refetching data:",o),R(1))},[o]);const T=async()=>{try{console.log(" Fetching subcategories for:",t);const Y=await(await fetch(`${Qe}categories/`)).json();console.log(" Categories API response:",Y);const G=(Y.categories||Y.results||[]).find(F=>F.name.toLowerCase()===t.toLowerCase());if(console.log(" Found category:",G),G!=null&&G.subcategories)console.log(" Setting subcategories:",G.subcategories),w(G.subcategories);else{console.log(" No subcategories found for category, trying alternative endpoint");const F=await fetch(`${Qe}categories/${t}/subcategories/`);if(F.ok){const I=await F.json();console.log(" Subcategories API response:",I),w(I.subcategories||I.results||I||[])}}}catch(O){console.error("Failed to fetch subcategories:",O)}},R=async(O=1)=>{i(!0);try{const Y=localStorage.getItem("token"),J=Y?{Authorization:`Token ${Y}`}:{},G=dt.getLocation();console.log(" Frontend location check:",{userLocation:o,currentLocation:G});const F=new URLSearchParams({page:O.toString(),page_size:"100"});G?(F.append("latitude",G.latitude.toString()),F.append("longitude",G.longitude.toString()),console.log(" Sending location to API:",G)):console.log(" No location available for API call");const V=await(await fetch(`${Qe}search/products/?${F}`,{headers:J})).json(),H=$(V.results||[]);r(O===1?{products:H}:K=>({products:[...K.products,...H]}));const q=(V.results||[]).filter(K=>{const B=K.category&&K.category.toLowerCase()===t.toLowerCase(),W=!b||K.subcategory&&K.subcategory.toLowerCase()===b.toLowerCase();return B&&W}).length;h({page:O,hasMore:V.next!==null&&q>=10})}catch(Y){console.error("Fetch error:",Y)}finally{i(!1)}},$=O=>{const Y=dt.getLocation(),J=10;let F=O.filter(I=>{const V=I.category&&I.category.toLowerCase()===t.toLowerCase(),H=!b||I.subcategory&&I.subcategory.toLowerCase()===b.toLowerCase();return V&&H}).map(I=>{var K,B;const V=((K=I.images)==null?void 0:K.find(W=>W.is_primary))||((B=I.images)==null?void 0:B[0]);let H="N/A",U=1/0;Y&&I.vendor_latitude&&I.vendor_longitude&&(U=qy(Y.latitude,Y.longitude,I.vendor_latitude,I.vendor_longitude),H=`${U.toFixed(1)} km`);const q=nd(I,I.vendor_delivery_fee);return{id:I.id,name:I.name,vendor:I.vendor_name||"Unknown Vendor",vendor_id:I.vendor_id,price:`${I.price}`,priceValue:parseFloat(I.price),image:(V==null?void 0:V.image_url)||"/placeholder-product.jpg",rating:4.5,distance:H,distanceValue:U,deliveryTime:"30-45 mins",inStock:I.quantity>0,category:I.category,totalSold:I.total_sold||0,deliveryInfo:q,vendorOnline:I.vendor_online!==!1,deliveryRadius:I.delivery_radius||J,free_delivery:I.free_delivery,custom_delivery_fee_enabled:I.custom_delivery_fee_enabled,custom_delivery_fee:I.custom_delivery_fee}}).filter(I=>I.inStock?I.vendorOnline?I.distanceValue!==1/0&&I.distanceValue>I.deliveryRadius?(console.log(` Excluding product ${I.name} - outside delivery radius (${I.distanceValue.toFixed(1)}km > ${I.deliveryRadius}km)`),!1):!0:(console.log(` Excluding product ${I.name} - vendor offline`),!1):(console.log(` Excluding product ${I.name} - out of stock`),!1));return x==="price_low"?F.sort((I,V)=>I.priceValue-V.priceValue):x==="price_high"?F.sort((I,V)=>V.priceValue-I.priceValue):F.sort((I,V)=>I.distanceValue-V.distanceValue),F},M=()=>{!a&&d.hasMore&&R(d.page+1)},A=O=>{e(`/product/${O}`)},C=async()=>{var Y;const O=localStorage.getItem("token");if(O)try{const J=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${O}`}});if(J.ok){const G=await J.json(),F=new Set(((Y=G.results)==null?void 0:Y.map(I=>I.product.id))||[]);u(F)}}catch(J){console.error("Failed to fetch favorites:",J)}},z=async(O,Y)=>{Y.stopPropagation();const J=localStorage.getItem("token");if(!J){k({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const G=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${J}`},body:JSON.stringify({product_id:O})});if(G.ok){const F=await G.json(),I=new Set(m);F.is_favorite?I.add(O):I.delete(O),u(I),k({title:F.is_favorite?"Added to Favorites":"Removed from Favorites",description:F.message})}}catch{k({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},P=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.products.map(O=>{var Y,J,G,F,I;return s.jsxs(Ee,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>A(O.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:O.image,alt:O.name,className:"w-full h-full object-cover",onError:V=>{V.target.src="/placeholder-product.jpg"}}),s.jsx(ie,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:V=>z(O.id,V),children:s.jsx(Nr,{className:`h-4 w-4 ${m.has(O.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Fe,{variant:O.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:O.inStock?"In Stock":"Out of Stock"})]}),s.jsxs(Oe,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:O.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:O.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(js,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:O.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gt,{className:"h-3 w-3"}),s.jsx("span",{children:O.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:O.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[O.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${(Y=O.deliveryInfo)!=null&&Y.isFreeDelivery?"bg-green-100 text-green-700":((J=O.deliveryInfo)==null?void 0:J.deliveryFee)===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(G=O.deliveryInfo)!=null&&G.isFreeDelivery?"Free":((F=O.deliveryInfo)==null?void 0:F.deliveryFee)===null?"TBD":`${(I=O.deliveryInfo)==null?void 0:I.deliveryFee}`})]})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(ie,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!O.inStock,onClick:async V=>{if(V.stopPropagation(),!await Se.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:O.id,quantity:1},path:"/cart",timestamp:Date.now()})),e("/login");return}try{await N(O.id,1),k({title:"Added to Cart",description:`${O.name} added to your cart`}),e("/cart")}catch(U){console.error("Error adding to cart:",U)}},children:[s.jsx(nn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(ie,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!O.inStock,onClick:async V=>{if(V.stopPropagation(),!await Se.getToken()){const U={id:O.id,name:O.name,price:O.price.replace("",""),quantity:1,vendor_name:O.vendor,vendor_id:O.vendor_id,images:[{image_url:O.image}],free_delivery:O.free_delivery,custom_delivery_fee_enabled:O.custom_delivery_fee_enabled,custom_delivery_fee:O.custom_delivery_fee};localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:U,path:"/checkout",timestamp:Date.now()})),e("/login");return}e("/checkout",{state:{directBuy:!0,product:{id:O.id,name:O.name,price:O.price.replace("",""),quantity:1,vendor_name:O.vendor,vendor_id:O.vendor_id,images:[{image_url:O.image}],free_delivery:O.free_delivery,custom_delivery_fee_enabled:O.custom_delivery_fee_enabled,custom_delivery_fee:O.custom_delivery_fee}}})},children:[s.jsx(Es,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},O.id)})}),d.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(ie,{onClick:M,disabled:a,variant:"outline",children:[a?s.jsx($s,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:t}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.products.length," products found"]})]}),s.jsx(ie,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>p(!0),children:s.jsx(La,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-3 pb-3",children:s.jsxs("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide no-scrollbar",children:[s.jsx(ie,{variant:b===""?"default":"outline",size:"sm",className:"whitespace-nowrap h-8 text-xs",onClick:()=>_(""),children:"All"}),Array.isArray(y)&&y.map((O,Y)=>s.jsx(ie,{variant:b===(O.name||O)?"default":"outline",size:"sm",className:"whitespace-nowrap h-8 text-xs",onClick:()=>_(O.name||O),children:O.name||O},O.id||O.name||Y))]})})]}),s.jsxs("div",{className:"p-4 pb-20 pt-32",children:[n.products.length>0&&s.jsx("div",{className:"mb-6",children:P()}),n.products.length===0&&!a&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No products found"}),s.jsxs("p",{className:"text-muted-foreground",children:["No products available in ",t," category"]})]}),a&&n.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx($s,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),f&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>p(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:O=>O.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>p(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:E.map(O=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:O.value,checked:x===O.value,onChange:Y=>v(Y.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:O.label})]},O.value))})]}),s.jsx(ie,{variant:"outline",className:"w-full",onClick:()=>{v("")},children:"Clear All Filters"})]})]})}),s.jsx(Kn,{})]})}const OK=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function RK(){const e=nt(),[t,n]=j.useState({products:[]}),[r,a]=j.useState(!1),[i,o]=j.useState(dt.getLocation()),[c,d]=j.useState({page:1,hasMore:!0}),[h,m]=j.useState(new Set),[u,f]=j.useState(!1),[p,x]=j.useState(""),{addToCart:v}=Gn(),{toast:y}=es(),w=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const $=dt.subscribe(o);return b(),E(),$},[]),j.useEffect(()=>{b(1)},[p]),j.useEffect(()=>{i&&(console.log(" Location updated, refetching data:",i),b(1))},[i]);const b=async($=1)=>{a(!0);try{const M=localStorage.getItem("token"),A=M?{Authorization:`Token ${M}`}:{},C=dt.getLocation();console.log(" Frontend location check:",{userLocation:i,currentLocation:C});const z=new URLSearchParams({page:$.toString(),page_size:"20"});C?(z.append("latitude",C.latitude.toString()),z.append("longitude",C.longitude.toString()),console.log(" Sending location to API:",C)):console.log(" No location available for API call");const O=await(await fetch(`${Qe}search/products/?${z}`,{headers:A})).json(),Y=_(O.results||[]);n($===1?{products:Y}:J=>({products:[...J.products,...Y]})),d({page:$,hasMore:O.next!==null})}catch(M){console.error("Fetch error:",M)}finally{a(!1)}},_=$=>{const M=dt.getLocation();let C=$.filter(z=>z.featured===!0).map(z=>{var J,G;const P=((J=z.images)==null?void 0:J.find(F=>F.is_primary))||((G=z.images)==null?void 0:G[0]);let O="N/A",Y=1/0;return M&&z.vendor_latitude&&z.vendor_longitude&&(Y=OK(M.latitude,M.longitude,z.vendor_latitude,z.vendor_longitude),O=`${Y.toFixed(1)} km`),{id:z.id,name:z.name,vendor:z.vendor_name||"Unknown Vendor",distance:O,distanceValue:Y,rating:4.5,price:`${z.price}`,priceValue:parseFloat(z.price),image:(P==null?void 0:P.image_url)||"/placeholder-product.jpg",inStock:z.quantity>0,category:z.category,featured:z.featured}});return p==="price_low"?C.sort((z,P)=>z.priceValue-P.priceValue):p==="price_high"?C.sort((z,P)=>P.priceValue-z.priceValue):C.sort((z,P)=>z.distanceValue-P.distanceValue),C},N=()=>{!r&&c.hasMore&&b(c.page+1)},k=$=>{e(`/product/${$}`)},E=async()=>{var M;const $=localStorage.getItem("token");if($)try{const A=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${$}`}});if(A.ok){const C=await A.json(),z=new Set(((M=C.results)==null?void 0:M.map(P=>P.product.id))||[]);m(z)}}catch(A){console.error("Failed to fetch favorites:",A)}},T=async($,M)=>{M.stopPropagation();const A=localStorage.getItem("token");if(!A){y({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const C=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${A}`},body:JSON.stringify({product_id:$})});if(C.ok){const z=await C.json(),P=new Set(h);z.is_favorite?P.add($):P.delete($),m(P),y({title:z.is_favorite?"Added to Favorites":"Removed from Favorites",description:z.message})}}catch{y({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},R=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.products.map($=>s.jsxs(Ee,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>k($.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:$.image,alt:$.name,className:"w-full h-full object-cover",onError:M=>{M.target.src="/placeholder-product.jpg"}}),s.jsx(ie,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:M=>T($.id,M),children:s.jsx(Nr,{className:`h-4 w-4 ${h.has($.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Fe,{variant:$.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:$.inStock?"In Stock":"Out of Stock"})]}),s.jsxs(Oe,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:$.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:$.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(js,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:$.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gt,{className:"h-3 w-3"}),s.jsx("span",{children:$.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:$.price}),s.jsx("span",{className:"text-xs text-muted-foreground",children:$.deliveryTime})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(ie,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!$.inStock,onClick:M=>{M.stopPropagation(),v($.id,1)},children:[s.jsx(nn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(ie,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!$.inStock,onClick:M=>{M.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:$.id,name:$.name,price:$.price.replace("",""),quantity:1,vendor_name:$.vendor,images:[{image_url:$.image}]}}})},children:[s.jsx(Es,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},$.id))}),c.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(ie,{onClick:N,disabled:r,variant:"outline",children:[r?s.jsx($s,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Featured Products"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),s.jsx(ie,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>f(!0),children:s.jsx(La,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&s.jsx("div",{className:"mb-6",children:R()}),t.products.length===0&&!r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No featured products"}),s.jsx("p",{className:"text-muted-foreground",children:"Featured products will appear here when available"})]}),r&&t.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx($s,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),u&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>f(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:$=>$.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>f(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:w.map($=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:$.value,checked:p===$.value,onChange:M=>x(M.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:$.label})]},$.value))})]}),s.jsx(ie,{variant:"outline",className:"w-full",onClick:()=>{x("")},children:"Clear All Filters"})]})]})}),s.jsx(Kn,{})]})}const LK=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),c=parseFloat(r),d=6371e3,h=y=>y*(Math.PI/180),m=h(o-a),u=h(c-i),f=h(a),p=h(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(f)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function MK(){const e=nt(),[t,n]=j.useState({products:[]}),[r,a]=j.useState(!1),[i,o]=j.useState(dt.getLocation()),[c,d]=j.useState({page:1,hasMore:!0}),[h,m]=j.useState(new Set),[u,f]=j.useState(!1),[p,x]=j.useState(""),{addToCart:v}=Gn(),{toast:y}=es(),w=[{value:"",label:"Default (Rating)"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const $=dt.subscribe(o);return b(),E(),$},[]),j.useEffect(()=>{b(1)},[p]),j.useEffect(()=>{i&&(console.log(" Location updated, refetching data:",i),b(1))},[i]);const b=async($=1)=>{a(!0);try{const M=localStorage.getItem("token"),A=M?{Authorization:`Token ${M}`,"ngrok-skip-browser-warning":"true"}:{"ngrok-skip-browser-warning":"true"},C=dt.getLocation();console.log(" Frontend location check:",{userLocation:i,currentLocation:C});const z=new URLSearchParams({page:$.toString(),page_size:"20"});C?(z.append("latitude",C.latitude.toString()),z.append("longitude",C.longitude.toString()),console.log(" Sending location to API:",C)):console.log(" No location available for API call");const O=await(await fetch(`${Qe}search/products/?${z}`,{headers:A})).json(),Y=_(O.results||[]);n($===1?{products:Y}:J=>({products:[...J.products,...Y]})),d({page:$,hasMore:O.next!==null})}catch(M){console.error("Fetch error:",M)}finally{a(!1)}},_=$=>{const M=dt.getLocation();let A=$.map(C=>{var Y,J;const z=((Y=C.images)==null?void 0:Y.find(G=>G.is_primary))||((J=C.images)==null?void 0:J[0]);let P="N/A",O=1/0;return M&&C.vendor_latitude&&C.vendor_longitude&&(O=LK(M.latitude,M.longitude,C.vendor_latitude,C.vendor_longitude),P=`${O.toFixed(1)} km`),{id:C.id,name:C.name,vendor:C.vendor_name||"Unknown Vendor",distance:P,distanceValue:O,rating:4.5,price:`${C.price}`,priceValue:parseFloat(C.price),image:(z==null?void 0:z.image_url)||"/placeholder-product.jpg",inStock:C.quantity>0,category:C.category}});return p==="price_low"?A.sort((C,z)=>C.priceValue-z.priceValue):p==="price_high"?A.sort((C,z)=>z.priceValue-C.priceValue):A.sort((C,z)=>z.rating-C.rating),A},N=()=>{!r&&c.hasMore&&b(c.page+1)},k=$=>{e(`/product/${$}`)},E=async()=>{var M;const $=localStorage.getItem("token");if($)try{const A=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${$}`}});if(A.ok){const C=await A.json(),z=new Set(((M=C.results)==null?void 0:M.map(P=>P.product.id))||[]);m(z)}}catch(A){console.error("Failed to fetch favorites:",A)}},T=async($,M)=>{M.stopPropagation();const A=localStorage.getItem("token");if(!A){y({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const C=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${A}`},body:JSON.stringify({product_id:$})});if(C.ok){const z=await C.json(),P=new Set(h);z.is_favorite?P.add($):P.delete($),m(P),y({title:z.is_favorite?"Added to Favorites":"Removed from Favorites",description:z.message})}}catch{y({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},R=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.products.map($=>s.jsxs(Ee,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>k($.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:$.image,alt:$.name,className:"w-full h-full object-cover",onError:M=>{M.target.src="/placeholder-product.jpg"}}),s.jsx(ie,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:M=>T($.id,M),children:s.jsx(Nr,{className:`h-4 w-4 ${h.has($.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Fe,{variant:$.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:$.inStock?"In Stock":"Out of Stock"})]}),s.jsxs(Oe,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:$.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:$.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(js,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:$.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Gt,{className:"h-3 w-3"}),s.jsx("span",{children:$.distance})]})]}),s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsx("span",{className:"font-bold text-primary text-sm",children:$.price})})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(ie,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!$.inStock,onClick:async M=>{if(M.stopPropagation(),!localStorage.getItem("token")){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:$.id,quantity:1},path:"/cart",timestamp:Date.now()})),e("/login");return}v($.id,1)},children:[s.jsx(nn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(ie,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!$.inStock,onClick:async M=>{if(M.stopPropagation(),!localStorage.getItem("token")){const C={id:$.id,name:$.name,price:$.price.replace("",""),quantity:1,vendor_name:$.vendor,images:[{image_url:$.image}]};localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:C,path:"/checkout",timestamp:Date.now()})),e("/login");return}e("/checkout",{state:{directBuy:!0,product:{id:$.id,name:$.name,price:$.price.replace("",""),quantity:1,vendor_name:$.vendor,images:[{image_url:$.image}]}}})},children:[s.jsx(Es,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},$.id))}),c.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(ie,{onClick:N,disabled:r,variant:"outline",children:[r?s.jsx($s,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Trending Products"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),s.jsx(ie,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>f(!0),children:s.jsx(La,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&s.jsx("div",{className:"mb-6",children:R()}),t.products.length===0&&!r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No trending products"}),s.jsx("p",{className:"text-muted-foreground",children:"Trending products will appear here when available"})]}),r&&t.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx($s,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),u&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>f(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:$=>$.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>f(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:w.map($=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:$.value,checked:p===$.value,onChange:M=>x(M.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:$.label})]},$.value))})]}),s.jsx(ie,{variant:"outline",className:"w-full",onClick:()=>{x("")},children:"Clear All Filters"})]})]})}),s.jsx(Kn,{})]})}function IK(){const e=nt(),t=Zn(),{login:n}=Rn(),[r,a]=j.useState("password"),[i,o]=j.useState(""),[c,d]=j.useState(""),[h,m]=j.useState(""),[u,f]=j.useState(""),[p,x]=j.useState(!1),[v,y]=j.useState(!1),[w,b]=j.useState(!1),[_,N]=j.useState(""),[k,E]=j.useState(""),[T,R]=j.useState(!1),[$,M]=j.useState(null),[A,C]=j.useState(!1);j.useState(!1);const[z,P]=j.useState(!1),[O,Y]=j.useState(null),[J,G]=j.useState(!1),[F,I]=j.useState(null);j.useEffect(()=>{var be;const we=sessionStorage.getItem("privacyAgreementState");if(we){const ae=JSON.parse(we);I({userId:ae.userId,userType:ae.userType,hasVendorProfile:ae.hasVendorProfile}),G(!0),sessionStorage.removeItem("privacyAgreementState");return}(be=t.state)!=null&&be.successMessage&&(E(t.state.successMessage),window.history.replaceState({},document.title)),V(),Ec.initialize().catch(console.error),XE.initialize().catch(console.error)},[t.state]);const V=async()=>{var we;try{if(await Se.isAuthenticated()){const ae=await Se.getUser();console.log("Existing user:",ae),(ae==null?void 0:ae.user_type)==="vendor"&&((we=ae==null?void 0:ae.available_roles)!=null&&we.includes("vendor"))&&e("/vendor/dashboard")}}catch(be){console.log("No existing auth or error:",be)}},H=async()=>{var we;b(!0),N("");try{await Se.clearAuth();const{response:be,data:ae}=await Re("/login/",{method:"POST",body:JSON.stringify({username:i,password:c})},!1);if(!be.ok)throw new Error((ae==null?void 0:ae.error)||"Login failed");if(ae.needs_privacy_agreement){I({userId:ae.user_id,userType:ae.user_type,hasVendorProfile:ae.has_vendor_profile}),G(!0);return}if(ae.needs_verification)R(!0),M(ae.user_id),y(!0),N("Email not verified. Please verify your email with the OTP sent.");else{const ee={...ae.user,available_roles:ae.available_roles||["customer"],current_role:ae.user.user_type||"customer"};ee.user_type==="customer"&&ee.available_roles.includes("vendor")&&(ee.user_type="vendor"),await n(ee,ae.token),await Se.setAuth(ae.token,ee),await(await ze(()=>import("./simplePersistentAuth-l-Z-r5cU.js"),[])).simplePersistentAuth.saveVendorLogin(ae.token,ee),console.log("Login response:",ae),console.log("profile_exists:",ae.profile_exists,"is_approved:",ae.is_approved),ae.profile_exists?ae.profile_exists&&ae.is_approved?(console.log("Profile exists and approved, redirecting to dashboard"),e("/vendor/dashboard")):ae.profile_exists&&ae.is_rejected?(console.log("Profile exists but rejected"),e("/vendor/rejection",{state:{rejectionReason:ae.rejection_reason,rejectionDate:ae.rejection_date}})):ae.profile_exists&&!ae.is_approved&&(console.log("Profile exists but not approved"),N("Your vendor application is pending approval. You will be notified once approved."),await Se.clearAuth()):(console.log("No profile exists, redirecting to onboarding"),e("/vendor/onboarding"))}}catch(be){console.error("Vendor login error:",be),(we=be.message)!=null&&we.includes("fetch")?N("Connection failed. Please check if the server is running on localhost:8000"):N(be.message||"Login failed. Please try again.")}finally{b(!1)}},U=async()=>{b(!0),N("");try{const{response:we,data:be}=await Re("/send-otp/",{method:"POST",body:JSON.stringify({email:i})},!1);if(!we.ok)throw new Error((be==null?void 0:be.error)||"Failed to send OTP");y(!0),N("OTP sent successfully")}catch(we){N(we.message)}finally{b(!1)}},q=async()=>{b(!0),N("");try{const{response:we,data:be}=await Re("/verify-otp/",{method:"POST",body:JSON.stringify({email:i,otp:h})},!1);if(!we.ok)throw new Error((be==null?void 0:be.error)||"OTP verification failed");if(be.needs_privacy_agreement){I({userId:be.user_id,userType:be.user_type,hasVendorProfile:be.has_vendor_profile}),G(!0);return}const ae={...be.user||{id:be.user_id,email:i,user_type:"vendor"},available_roles:be.available_roles||["vendor"],user_type:be.user.user_type||"vendor",current_role:be.user.user_type||"vendor"};await n(ae,be.token),await Se.setAuth(be.token,ae),await(await ze(()=>import("./simplePersistentAuth-l-Z-r5cU.js"),[])).simplePersistentAuth.saveVendorLogin(be.token,ae),console.log("OTP verification response:",be),console.log("profile_exists:",be.profile_exists,"is_approved:",be.is_approved),be.profile_exists?be.profile_exists&&be.is_approved?(console.log("Profile exists and approved, redirecting to dashboard"),e("/vendor/dashboard")):be.profile_exists&&be.is_rejected?(console.log("Profile exists but rejected"),e("/vendor/rejection",{state:{rejectionReason:be.rejection_reason,rejectionDate:be.rejection_date}})):be.profile_exists&&!be.is_approved&&(console.log("Profile exists but not approved"),N("Your vendor application is pending approval. You will be notified once approved."),await Se.clearAuth()):(console.log("No profile exists, redirecting to onboarding"),e("/vendor/onboarding"))}catch(we){console.error("Vendor OTP verification error:",we),N(we.message||"OTP verification failed. Please try again.")}finally{b(!1)}},K=async()=>{var we;C(!0),N("");try{const be=await Ec.signIn();if(be.success&&be.user&&be.token){let ae={...be.user,available_roles:be.user.available_roles||["customer"],current_role:be.user.current_role||be.user.user_type||"customer"};if(ae.user_type==="customer"&&ae.available_roles.includes("vendor")&&(ae.user_type="vendor"),await n(ae,be.token),await Se.setAuth(be.token,ae),await n(ae,be.token),(we=ae.available_roles)!=null&&we.includes("vendor")){const{simplePersistentAuth:ee}=await ze(async()=>{const{simplePersistentAuth:ye}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:ye}},[]);await ee.saveVendorLogin(be.token,ae)}be.user.user_created||!be.user.phone_number?(Y({userData:ae,token:be.token,profileData:be.user}),P(!0)):B(be.user)}else be.needs_privacy_agreement?(I({userId:be.user_id,userType:be.user_type,hasVendorProfile:be.has_vendor_profile}),G(!0)):N(be.error||"Google login failed")}catch{N("Google login failed. Please try again.")}finally{C(!1)}},B=we=>{we.profile_exists?we.profile_exists&&we.is_approved?e("/vendor/dashboard"):we.profile_exists&&we.is_rejected?e("/vendor/rejection",{state:{rejectionReason:we.rejection_reason,rejectionDate:we.rejection_date}}):we.profile_exists&&!we.is_approved&&(N("Your vendor application is pending approval. You will be notified once approved."),Se.clearAuth()):e("/vendor/onboarding")},W=()=>{P(!1),O!=null&&O.profileData&&B(O.profileData)},oe=()=>{P(!1),O!=null&&O.profileData&&B(O.profileData)},X=(we,be)=>{G(!1),I(null),B(we)},re=()=>{G(!1),I(null),N("Privacy policy agreement is required to login")},ue=async()=>{b(!0),N("");try{const{response:we,data:be}=await Re("/update-email/",{method:"POST",body:JSON.stringify({email:u,user_id:$})},!1);if(!we.ok)throw new Error((be==null?void 0:be.error)||"Failed to update email");o(u),f(""),y(!0),N("Email updated. OTP sent to new email.")}catch(we){N(we.message)}finally{b(!1)}},me=()=>{e("/vendor/signup")};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[s.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 left-4 w-8 h-8 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors z-10",children:s.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),s.jsx(YE,{currentType:"vendor"}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("div",{className:"w-full max-w-80 mx-auto px-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsx("img",{src:li,alt:"ezeyway",className:"w-16 h-16 mx-auto mb-6"})}),s.jsx("div",{className:"text-center mb-4",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 bg-blue-50 px-3 py-1 rounded-full",children:"Vendor Login"})}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"flex space-x-8",children:[s.jsx("button",{onClick:()=>a("password"),className:`pb-2 text-sm font-medium transition-colors ${r==="password"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Password"}),s.jsx("button",{onClick:()=>a("otp"),className:`pb-2 text-sm font-medium transition-colors ${r==="otp"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"OTP"})]})}),r==="password"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:i,onChange:we=>o(we.target.value),placeholder:"Username or Email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),!T&&s.jsxs("div",{className:"relative",children:[s.jsx(je,{type:p?"text":"password",value:c,onChange:we=>d(we.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>x(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),k&&s.jsx("p",{className:"text-green-600 text-center",children:k}),_&&s.jsx("p",{className:"text-red-600 text-center",children:_}),T&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(je,{type:"email",value:u,onChange:we=>f(we.target.value),placeholder:"Update email if incorrect",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(ie,{onClick:ue,disabled:!u||w,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:w?"Updating...":"Update Email and Resend OTP"}),s.jsx(je,{type:"text",value:h,onChange:we=>m(we.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),s.jsx(ie,{onClick:q,disabled:h.length!==6||w,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:w?"Verifying...":"Verify OTP"}),s.jsx("button",{onClick:U,disabled:w,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}),!T&&s.jsx(ie,{onClick:H,disabled:!i||!c||w,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:w?"Logging in...":"Login"})]}),r==="otp"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"email",value:i,onChange:we=>o(we.target.value),placeholder:"Enter your email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),v?s.jsxs(s.Fragment,{children:[s.jsx(je,{type:"text",value:h,onChange:we=>m(we.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),k&&s.jsx("p",{className:"text-green-600 text-center",children:k}),_&&s.jsx("p",{className:"text-red-600 text-center",children:_}),s.jsx(ie,{onClick:q,disabled:h.length!==6||w,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:w?"Verifying...":"Verify & Login"}),s.jsx("button",{onClick:U,disabled:w,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}):s.jsx(ie,{onClick:U,disabled:!i||w,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:w?"Sending...":"Send OTP"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 to-indigo-100 text-gray-500",children:"or"})})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:K,disabled:A,className:"w-12 h-12 bg-white hover:bg-gray-50 border border-gray-300 rounded-full flex items-center justify-center transition-colors shadow-sm",children:A?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):s.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})})})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("button",{onClick:me,className:"text-blue-600 hover:text-blue-700 text-sm block mx-auto",children:"Don't have an account? Sign up"}),s.jsx("button",{onClick:()=>e("/privacy-policy"),className:"text-gray-500 hover:text-gray-700 text-xs block mx-auto",children:"Privacy Policy"})]})]})})}),z&&O&&s.jsx(JE,{user:O.userData,onComplete:W,onSkip:oe}),J&&F&&s.jsx(iT,{userId:F.userId,userType:F.userType,hasVendorProfile:F.hasVendorProfile,onComplete:X,onCancel:re})]})}function DK(){const e=nt(),[t,n]=j.useState(1),[r,a]=j.useState(""),[i,o]=j.useState(""),[c,d]=j.useState(""),[h,m]=j.useState(""),[u,f]=j.useState(""),[p,x]=j.useState(!1),[v,y]=j.useState(!1),[w,b]=j.useState(""),[_,N]=j.useState(!1),k=async()=>{var M,A,C;y(!0),b("");try{const z=await fetch(Qe+"register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,email:r,password:c,user_type:"vendor"})}),P=await z.json();if(!z.ok){const O=((M=P.username)==null?void 0:M[0])||((A=P.email)==null?void 0:A[0])||P.message||((C=Object.values(P)[0])==null?void 0:C[0])||"Failed to register";throw new Error(O)}n(2)}catch(z){b(z.message)}finally{y(!1)}},E=async M=>{y(!0),b("");try{const A=await fetch(Qe+"verify-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:M})}),C=await A.json();if(!A.ok)throw new Error(C.error||"Verification failed");localStorage.setItem("token",C.token),e("/vendor/onboarding")}catch(A){b(A.message)}finally{y(!1)}},T=M=>{f(M),M.length===6&&E(M)},R=async()=>{y(!0),b("");try{const M=await fetch(Qe+"send-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),A=await M.json();if(!M.ok)throw new Error(A.error||"Failed to resend OTP");b("OTP resent successfully")}catch(M){b(M.message)}finally{y(!1)}},$=()=>{e("/vendor/login")};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[s.jsx("button",{onClick:$,className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition-colors",children:" Back"}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"w-full max-w-80 mx-auto px-4",children:[t===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:li,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Join as Seller"})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"email",value:r,onChange:M=>a(M.target.value),placeholder:"Enter your email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(je,{type:"text",value:i,onChange:M=>o(M.target.value),placeholder:"Choose username",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"relative",children:[s.jsx(je,{type:p?"text":"password",value:c,onChange:M=>d(M.target.value),placeholder:"Create password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>x(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsx(je,{type:"password",value:h,onChange:M=>m(M.target.value),placeholder:"Confirm password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"flex items-start space-x-2 w-80",children:[s.jsx("input",{type:"checkbox",id:"agreeToTerms",checked:_,onChange:M=>N(M.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 mt-1"}),s.jsxs("label",{htmlFor:"agreeToTerms",className:"text-sm text-gray-700",children:["I agree to the"," ",s.jsx("button",{type:"button",onClick:()=>e("/privacy-policy"),className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})," ","and Terms & Conditions"]})]}),w&&s.jsx("p",{className:"text-red-600 text-center",children:w}),s.jsx(ie,{onClick:k,disabled:!r||!i||!c||!h||c!==h||!_||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Creating Account...":"Join as Seller"})]})]}),t===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:li,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Email"}),s.jsxs("p",{className:"text-gray-600 mt-2",children:["Code sent to ",r]})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:u,onChange:M=>T(M.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest w-80"}),v&&s.jsx("div",{className:"text-center text-blue-600",children:"Verifying..."}),w&&s.jsx("p",{className:"text-red-600 text-center",children:w}),s.jsx("button",{onClick:()=>n(1),className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Change details"}),s.jsx("button",{onClick:R,disabled:v,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend code"})]})]})]})})]})}const FK=Uw.divIcon({className:"custom-marker",html:'<div style="background-color: #ff0000; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]});function $K(){var C,z;const e=nt(),n=(C=Zn().state)==null?void 0:C.isUpdate,[r,a]=j.useState(0),[i,o]=j.useState({location:{lat:27.7172,lng:85.324,address:""},shopName:"",ownerName:"",phone:"",email:"",shopAddress:"",city:"",state:"",pincode:"",shopRegDoc:null,citizenshipFront:null,citizenshipBack:null,shopImages:[],existingDocuments:{panReg:null,citizenshipFront:null,citizenshipBack:null},existingShopImages:[],bankAccount:"",accountHolderName:"",bankName:"",ifscCode:"",gstNumber:"",panNumber:"",deliveryRadius:"",minOrderAmount:"",vendorType:"",categories:[],description:"",referralCode:""}),[c,d]=j.useState(""),[h,m]=j.useState(!1),[u,f]=j.useState(""),[p,x]=j.useState(""),[v,y]=j.useState([]),w=["Location","Shop Info","Address","Documents","Shop Images","Payment","Business Type","Categories","Review"],b=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"manufacturer",label:"Manufacturer"},{value:"service_provider",label:"Service Provider"},{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"}];j.useEffect(()=>{const P=async()=>{try{const Y=await fetch(Qe+"categories/"),J=await Y.json();Y.ok&&y(J.categories.map(G=>G.name))}catch(Y){console.error("Error fetching categories:",Y)}},O=async()=>{if(n)try{const Y=localStorage.getItem("token"),J=await fetch(Qe+"vendor-profiles/",{headers:{Authorization:`Token ${Y}`}});if(J.ok){const G=await J.json(),F=G.results&&G.results.length>0?G.results[0]:null;F&&o(I=>{var V,H,U,q;return{...I,shopName:F.business_name||"",ownerName:F.owner_name||"",phone:F.business_phone||"",email:F.business_email||"",shopAddress:F.business_address||"",city:F.city||"",state:F.state||"",pincode:F.pincode||"",panNumber:F.pan_number||"",gstNumber:F.gst_number||"",bankAccount:F.account_number||"",accountHolderName:F.account_holder_name||"",bankName:F.bank_name||"",ifscCode:F.ifsc_code||"",deliveryRadius:F.delivery_radius||"",minOrderAmount:F.min_order_amount||"",vendorType:F.business_type||"",categories:F.categories||[],description:F.description||"",location:{lat:F.latitude||27.7172,lng:F.longitude||85.324,address:F.location_address||""},existingDocuments:{panReg:F.business_license_file_url||null,citizenshipFront:((H=(V=F.documents)==null?void 0:V.find(K=>{var B;return(B=K.document_url)==null?void 0:B.includes("citizenship_front")}))==null?void 0:H.document_url)||null,citizenshipBack:((q=(U=F.documents)==null?void 0:U.find(K=>{var B;return(B=K.document_url)==null?void 0:B.includes("citizenship_back")}))==null?void 0:q.document_url)||null},existingShopImages:F.shop_images||[]}})}}catch(Y){console.error("Error fetching profile:",Y)}};P(),O()},[n]);const _=({lat:P,lng:O})=>(ZR().setView([P,O],13),null),N=()=>(GR({click(P){const{lat:O,lng:Y}=P.latlng;o(J=>({...J,location:{...J.location,lat:O,lng:Y}})),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${O}&lon=${Y}`).then(J=>J.json()).then(J=>{J.display_name&&o(G=>({...G,location:{...G.location,address:J.display_name}}))}).catch(J=>console.error("Error fetching address:",J))}}),null),k=()=>{d(""),navigator.geolocation?navigator.geolocation.getCurrentPosition(P=>{const{latitude:O,longitude:Y}=P.coords;o(J=>({...J,location:{...J.location,lat:O,lng:Y}})),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${O}&lon=${Y}`).then(J=>J.json()).then(J=>{J.display_name&&o(G=>({...G,location:{...G.location,address:J.display_name}}))}).catch(J=>{console.error("Error fetching address:",J),d("Unable to fetch address for this location.")})},P=>{switch(console.error("Geolocation error:",P),P.code){case P.PERMISSION_DENIED:d("Location access denied. Please allow location permissions.");break;case P.POSITION_UNAVAILABLE:d("Location information is unavailable.");break;case P.TIMEOUT:d("The request to get your location timed out.");break;default:d("An unknown error occurred while fetching your location.");break}}):d("Geolocation is not supported by your browser.")},E=()=>{const P=[{field:"shopName",label:"Shop Name"},{field:"ownerName",label:"Owner Name"},{field:"email",label:"Email"},{field:"phone",label:"Phone"},{field:"panNumber",label:"PAN Number"},{field:"shopAddress",label:"Shop Address"},{field:"city",label:"City"},{field:"state",label:"State"},{field:"pincode",label:"PIN Code"},{field:"vendorType",label:"Business Type"}];for(const{field:Y,label:J}of P)if(!i[Y])return f(`${J} is required.`),!1;return i.location.address?i.shopImages.length+(n?i.existingShopImages.length:0)<4?(f("Please ensure you have at least 4 shop images total."),!1):i.panNumber.length!==9?(f("PAN number must be exactly 9 characters."),!1):!0:(f("Location address is required."),!1)},T=()=>{switch(f(""),r){case 0:if(!i.location.address)return f("Please select a location."),!1;break;case 1:if(!i.shopName||!i.ownerName||!i.phone||!i.email||!i.panNumber)return f("Please fill in all required shop information including PAN number."),!1;if(i.panNumber.length!==9)return f("PAN number must be exactly 9 characters."),!1;break;case 2:if(!i.shopAddress||!i.city||!i.state||!i.pincode)return f("Please fill in all address fields."),!1;break;case 4:if(i.shopImages.length+(n?i.existingShopImages.length:0)<4)return f("Please ensure you have at least 4 shop images total."),!1;break;case 6:if(!i.vendorType)return f("Please select a business type."),!1;break;case 7:if(i.categories.length===0)return f("Please select at least one category."),!1;break}return!0},R=async()=>{if(r<w.length-1)T()&&a(r+1);else{if(console.log("Starting form submission..."),!E()){console.log("Validation failed:",u);return}m(!0),f(""),x("");const P=new FormData;P.append("business_name",i.shopName),P.append("owner_name",i.ownerName),P.append("business_email",i.email),P.append("business_phone",i.phone),P.append("business_address",i.shopAddress),P.append("location_address",i.location.address),P.append("city",i.city),P.append("state",i.state),P.append("pincode",i.pincode),P.append("latitude",i.location.lat.toString()),P.append("longitude",i.location.lng.toString()),P.append("business_type",i.vendorType),P.append("categories",JSON.stringify(i.categories)),P.append("description",i.description||""),P.append("account_number",i.bankAccount||""),P.append("account_holder_name",i.accountHolderName||""),P.append("bank_name",i.bankName||""),P.append("ifsc_code",i.ifscCode||""),P.append("gst_number",i.gstNumber||""),P.append("pan_number",i.panNumber||""),P.append("delivery_radius",i.deliveryRadius||""),P.append("min_order_amount",i.minOrderAmount||""),i.referralCode&&P.append("referral_code",i.referralCode),i.shopRegDoc&&P.append("business_license_file",i.shopRegDoc),i.citizenshipFront&&P.append("citizenship_front",i.citizenshipFront),i.citizenshipBack&&P.append("citizenship_back",i.citizenshipBack),i.shopImages.length>0&&i.shopImages.forEach((O,Y)=>{P.append(`shop_image_${Y}`,O)});try{let O=localStorage.getItem("token");console.log(n?"Updating vendor profile...":"Submitting complete vendor onboarding...");const Y="complete-onboarding/";let J=await fetch(Qe+Y,{method:"POST",headers:{Authorization:`Token ${O}`},body:P});if(J.status===401){console.log(" 401 error, attempting token refresh...");try{const{simplePersistentAuth:F}=await ze(async()=>{const{simplePersistentAuth:V}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:V}},[]),I=await F.getVendorAuth();if(I!=null&&I.token)O=I.token,localStorage.setItem("token",O),J=await fetch(Qe+Y,{method:"POST",headers:{Authorization:`Token ${O}`},body:P}),console.log(" Retry with refreshed token successful");else{f("Session expired. Please login again."),setTimeout(()=>e("/vendor/login"),2e3);return}}catch(F){console.error("Token refresh failed:",F),f("Session expired. Please login again."),setTimeout(()=>e("/vendor/login"),2e3);return}}const G=await J.json();if(console.log("Complete onboarding response:",J.status,G),!J.ok){let F="Failed to submit vendor application.";if(G.detail)F=G.detail;else if(G.error)F=G.error;else if(G.user)F=G.user;else if(typeof G=="object"){const I=Object.entries(G).map(([V,H])=>`${V}: ${Array.isArray(H)?H.join(", "):H}`).join("; ");I&&(F=I)}f(F),console.error("Complete onboarding failed:",G);return}console.log(n?"Vendor profile updated successfully":"Vendor onboarding completed successfully"),G.is_approved?(x(n?"Profile updated and approved successfully!":"Vendor profile submitted and approved successfully!"),console.log("Vendor approved. Navigating to dashboard..."),setTimeout(()=>{e("/vendor/dashboard")},3e3)):(x(n?"Your profile has been updated successfully and is pending approval. You will be notified once approved by the admin.":"Your vendor application has been submitted successfully and is pending approval. You will be notified once approved by the admin."),console.log("Vendor not approved yet. Redirecting to login page."),setTimeout(()=>{e("/vendor/login",{state:{successMessage:n?"Profile updated successfully! Pending admin approval.":"Application submitted successfully! Pending admin approval."}})},3e3))}catch(O){console.error("Submission error:",O),f("An unexpected error occurred. Please try again.")}finally{m(!1)}}},$=()=>{r>0&&a(r-1)},M=(P,O)=>{o(Y=>({...Y,[P]:O}))},A=P=>{const O=i.categories.includes(P)?i.categories.filter(Y=>Y!==P):[...i.categories,P];M("categories",O)};return s.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n?"Update Your Application":"Complete Your Setup"}),s.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Step ",r+1," of ",w.length]}),n&&s.jsx("p",{className:"text-orange-600 text-sm mt-1",children:"Update your information and resubmit for approval"})]}),s.jsx("div",{className:"flex overflow-x-auto mb-8 pb-2",children:w.map((P,O)=>s.jsxs("button",{onClick:()=>a(O),className:`flex-shrink-0 px-4 py-2 text-xs font-medium whitespace-nowrap ${O===r?"text-blue-600 border-b-2 border-blue-600":O<r?"text-green-600":"text-gray-400"}`,children:[O<r?"":O+1,". ",P]},P))}),s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[h&&s.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsx("p",{className:"text-blue-600",children:"Submitting your application..."})}),u&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600",children:u})}),p&&s.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsx("p",{className:"text-green-600",children:p})}),r===0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Choose Your Location"}),s.jsx("div",{className:"h-48 rounded-lg",children:s.jsxs(KR,{center:[i.location.lat,i.location.lng],zoom:13,style:{height:"100%",width:"100%",borderRadius:"0.5rem"},children:[s.jsx(YR,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),s.jsx(Dy,{position:[i.location.lat,i.location.lng],icon:FK}),s.jsx(N,{}),s.jsx(_,{lat:i.location.lat,lng:i.location.lng})]})}),s.jsx(ie,{onClick:k,className:"w-full bg-blue-600 hover:bg-blue-700",children:"Use Live Location"}),c&&s.jsx("p",{className:"text-red-500 text-sm",children:c}),s.jsx(je,{placeholder:"Selected address will appear here",value:i.location.address,onChange:P=>M("location",{...i.location,address:P.target.value})})]}),r===1&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Shop Information"}),s.jsx(je,{placeholder:"Shop Name",value:i.shopName,onChange:P=>M("shopName",P.target.value)}),s.jsx(je,{placeholder:"Owner Name",value:i.ownerName,onChange:P=>M("ownerName",P.target.value)}),s.jsx(je,{placeholder:"Phone Number",value:i.phone,onChange:P=>M("phone",P.target.value)}),s.jsx(je,{placeholder:"Email Address",value:i.email,onChange:P=>M("email",P.target.value)}),s.jsx(je,{placeholder:"PAN Number *",value:i.panNumber,onChange:P=>{const O=P.target.value;O.length<=9&&M("panNumber",O)},maxLength:9,required:!0}),s.jsx(je,{placeholder:"Referral Code (Optional)",value:i.referralCode,onChange:P=>M("referralCode",P.target.value.toUpperCase()),maxLength:8}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter a referral code from another vendor to get bonus points"})]}),r===2&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Shop Address"}),s.jsx(je,{placeholder:"Full Shop Address",value:i.shopAddress,onChange:P=>M("shopAddress",P.target.value)}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(je,{placeholder:"City",value:i.city,onChange:P=>M("city",P.target.value)}),s.jsx(je,{placeholder:"State",value:i.state,onChange:P=>M("state",P.target.value)})]}),s.jsx(je,{placeholder:"PIN Code",value:i.pincode,onChange:P=>M("pincode",P.target.value)})]}),r===3&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Upload Documents"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Registration"}),n&&i.existingDocuments.panReg&&!i.shopRegDoc&&s.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),s.jsx("img",{src:i.existingDocuments.panReg,alt:"Current PAN",className:"w-32 h-20 object-cover rounded border mt-1"})]}),s.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:P=>M("shopRegDoc",P.target.files[0])}),!n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document"}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),i.shopRegDoc&&s.jsx("div",{className:"mt-2",children:i.shopRegDoc.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.shopRegDoc),alt:"PAN Registration",className:"w-32 h-20 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-green-700",children:[" ",i.shopRegDoc.name]})})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Citizenship (Front)"}),n&&i.existingDocuments.citizenshipFront&&!i.citizenshipFront&&s.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),s.jsx("img",{src:i.existingDocuments.citizenshipFront,alt:"Current Citizenship Front",className:"w-32 h-20 object-cover rounded border mt-1"})]}),s.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:P=>M("citizenshipFront",P.target.files[0])}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),i.citizenshipFront&&s.jsx("div",{className:"mt-2",children:i.citizenshipFront.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.citizenshipFront),alt:"Citizenship Front",className:"w-32 h-20 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-green-700",children:[" ",i.citizenshipFront.name]})})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Citizenship (Back)"}),n&&i.existingDocuments.citizenshipBack&&!i.citizenshipBack&&s.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),s.jsx("img",{src:i.existingDocuments.citizenshipBack,alt:"Current Citizenship Back",className:"w-32 h-20 object-cover rounded border mt-1"})]}),s.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:P=>M("citizenshipBack",P.target.files[0])}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),i.citizenshipBack&&s.jsx("div",{className:"mt-2",children:i.citizenshipBack.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.citizenshipBack),alt:"Citizenship Back",className:"w-32 h-20 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-green-700",children:[" ",i.citizenshipBack.name]})})})]})]})]}),r===4&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Shop Images"}),s.jsx("p",{className:"text-sm text-gray-600",children:n?"Current images shown below. Upload new images to add more.":"Upload at least 4 images of your shop (interior, exterior, products, etc.)"}),n&&i.existingShopImages.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Current Shop Images (",i.existingShopImages.length,")"]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.existingShopImages.map((P,O)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:P.image_url,alt:`Existing shop image ${O+1}`,className:"w-full h-full object-cover"})}),P.is_primary&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Existing Image"})]},O))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:P=>{const O=Array.from(P.target.files);if(O.length+i.shopImages.length>10){alert("Maximum 10 images allowed");return}M("shopImages",[...i.shopImages,...O])}}),s.jsx(ie,{type:"button",variant:"outline",className:"w-full",onClick:()=>{const P=document.createElement("input");P.type="file",P.accept="image/*",P.capture="environment",P.onchange=O=>{const Y=O.target.files[0];if(Y){if(i.shopImages.length>=10){alert("Maximum 10 images allowed");return}M("shopImages",[...i.shopImages,Y])}},P.click()},children:" Take Photo"})]}),i.shopImages.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[n?"New Images to Add":"Uploaded Images"," (",i.shopImages.length,"/10)"]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.shopImages.map((P,O)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:URL.createObjectURL(P),alt:`Shop image ${O+1}`,className:"w-full h-full object-cover"})}),s.jsx("button",{type:"button",onClick:()=>{const Y=i.shopImages.filter((J,G)=>G!==O);M("shopImages",Y)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:""}),s.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:P.name})]},O))}),!n&&i.shopImages.length<4&&s.jsx("p",{className:"text-sm text-orange-600",children:"Please upload at least 4 images of your shop"}),n&&i.shopImages.length+i.existingShopImages.length<4&&s.jsx("p",{className:"text-sm text-orange-600",children:"Total images (existing + new) should be at least 4"})]})]}),r===5&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Payment Details"}),s.jsx(je,{placeholder:"Bank Account Number",value:i.bankAccount,onChange:P=>M("bankAccount",P.target.value)}),s.jsx(je,{placeholder:"Account Holder/Organization Name",value:i.accountHolderName,onChange:P=>M("accountHolderName",P.target.value)}),s.jsx(je,{placeholder:"Bank Name",value:i.bankName,onChange:P=>M("bankName",P.target.value)}),s.jsx(je,{placeholder:"Minimum Order Amount (Optional)",value:i.minOrderAmount,onChange:P=>M("minOrderAmount",P.target.value)})]}),r===6&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Business Type"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(P=>s.jsx("button",{onClick:()=>M("vendorType",P.value),className:`p-3 text-sm rounded-lg border ${i.vendorType===P.value?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:P.label},P.value))})]}),r===7&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Product Categories"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Select categories you'll sell"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:v.length>0?v.map(P=>s.jsx("button",{onClick:()=>A(P),className:`p-3 text-sm rounded-lg border ${i.categories.includes(P)?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:P},P)):s.jsx("div",{className:"col-span-2 text-center text-gray-500 py-4",children:"No categories available. Please contact admin."})}),s.jsx(je,{placeholder:"Business Description (Optional)",value:i.description,onChange:P=>M("description",P.target.value)})]}),r===8&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Review & Submit"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Shop Information"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Shop Name:"})," ",i.shopName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Owner Name:"})," ",i.ownerName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",i.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",i.email]}),s.jsxs("p",{children:[s.jsx("strong",{children:"PAN Number:"})," ",i.panNumber||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Referral Code:"})," ",i.referralCode||"None"]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Shop Address:"})," ",i.shopAddress]}),s.jsxs("p",{children:[s.jsx("strong",{children:"City:"})," ",i.city]}),s.jsxs("p",{children:[s.jsx("strong",{children:"State:"})," ",i.state]}),s.jsxs("p",{children:[s.jsx("strong",{children:"PIN Code:"})," ",i.pincode]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Location:"})," ",i.location.address]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Documents"}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"PAN Registration:"})," ",i.shopRegDoc||i.existingDocuments.panReg?" Available":" Not uploaded"]}),i.shopRegDoc?s.jsx("div",{className:"mt-2",children:i.shopRegDoc.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.shopRegDoc),alt:"New PAN Registration",className:"w-24 h-16 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:s.jsxs("p",{className:"text-xs text-green-700",children:[" ",i.shopRegDoc.name," (New)"]})})}):i.existingDocuments.panReg?s.jsxs("div",{className:"mt-2",children:[s.jsx("img",{src:i.existingDocuments.panReg,alt:"Current PAN Registration",className:"w-24 h-16 object-cover rounded border"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Citizenship (Front):"})," ",i.citizenshipFront||i.existingDocuments.citizenshipFront?" Available":" Not uploaded"]}),i.citizenshipFront?s.jsx("div",{className:"mt-2",children:i.citizenshipFront.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.citizenshipFront),alt:"New Citizenship Front",className:"w-24 h-16 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:s.jsxs("p",{className:"text-xs text-green-700",children:[" ",i.citizenshipFront.name," (New)"]})})}):i.existingDocuments.citizenshipFront?s.jsxs("div",{className:"mt-2",children:[s.jsx("img",{src:i.existingDocuments.citizenshipFront,alt:"Current Citizenship Front",className:"w-24 h-16 object-cover rounded border"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Citizenship (Back):"})," ",i.citizenshipBack||i.existingDocuments.citizenshipBack?" Available":" Not uploaded"]}),i.citizenshipBack?s.jsx("div",{className:"mt-2",children:i.citizenshipBack.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.citizenshipBack),alt:"New Citizenship Back",className:"w-24 h-16 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:s.jsxs("p",{className:"text-xs text-green-700",children:[" ",i.citizenshipBack.name," (New)"]})})}):i.existingDocuments.citizenshipBack?s.jsxs("div",{className:"mt-2",children:[s.jsx("img",{src:i.existingDocuments.citizenshipBack,alt:"Current Citizenship Back",className:"w-24 h-16 object-cover rounded border"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Shop Images"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Images:"})," ",i.shopImages.length+i.existingShopImages.length,"/10"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Existing:"})," ",i.existingShopImages.length," | ",s.jsx("strong",{children:"New:"})," ",i.shopImages.length]}),i.shopImages.length+i.existingShopImages.length>=4?s.jsx("p",{className:"text-green-600 mb-3",children:" Minimum requirement met"}):s.jsx("p",{className:"text-red-600 mb-3",children:" Need at least 4 images total"}),i.existingShopImages.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-600 mb-2",children:"Current Images:"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.existingShopImages.slice(0,4).map((P,O)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:P.image_url,alt:`Current shop ${O+1}`,className:"w-16 h-16 object-cover rounded border"}),P.is_primary&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"})]},O)),i.existingShopImages.length>4&&s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border flex items-center justify-center",children:s.jsxs("span",{className:"text-xs text-gray-500",children:["+",i.existingShopImages.length-4]})})]})]}),i.shopImages.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-600 mb-2",children:"New Images to Add:"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.shopImages.slice(0,4).map((P,O)=>s.jsx("div",{className:"relative",children:s.jsx("img",{src:URL.createObjectURL(P),alt:`New shop ${O+1}`,className:"w-16 h-16 object-cover rounded border"})},O)),i.shopImages.length>4&&s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border flex items-center justify-center",children:s.jsxs("span",{className:"text-xs text-gray-500",children:["+",i.shopImages.length-4]})})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Payment Details"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Bank Account:"})," ",i.bankAccount||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Account Holder:"})," ",i.accountHolderName||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Bank Name:"})," ",i.bankName||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"IFSC Code:"})," ",i.ifscCode||"N/A"]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Business Details"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Business Type:"})," ",((z=b.find(P=>P.value===i.vendorType))==null?void 0:z.label)||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Categories:"})," ",i.categories.length>0?i.categories.join(", "):"None selected"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Description:"})," ",i.description||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"GST Number:"})," ",i.gstNumber||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Delivery Radius:"})," ",i.deliveryRadius||"N/A"," km"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Minimum Order Amount:"})," ",i.minOrderAmount||"N/A"]})]})]}),s.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800",children:"Your application will be reviewed within 24-48 hours. You'll receive an email notification once approved."})}),u&&s.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:u})})]})]}),s.jsxs("div",{className:"flex justify-between mt-6",children:[s.jsx(ie,{onClick:$,disabled:r===0,variant:"outline",className:"px-6",children:"Previous"}),s.jsx(ie,{onClick:R,disabled:h,className:"px-6 bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:h?"Submitting...":r===w.length-1?"Submit for Approval":"Next"})]})]})})}function zK(){const e=Zn(),t=nt(),{rejectionReason:n,rejectionDate:r}=e.state||{},a=()=>{t("/vendor/onboarding",{state:{isUpdate:!0}})};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:s.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Application Rejected"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your vendor application has been rejected. Please review the feedback below and update your application."})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rejection Details"}),r&&s.jsxs("div",{className:"mb-4",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Rejected on: "}),s.jsx("span",{className:"text-sm text-gray-900",children:new Date(r).toLocaleDateString()})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Reason for rejection:"}),s.jsx("div",{className:"mt-2 p-4 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-sm text-red-800",children:n||"No specific reason provided. Please contact support for more details."})})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"What's next?"}),s.jsx("div",{className:"mt-2 text-sm text-blue-700",children:s.jsx("p",{children:"Please review the rejection reason above and update your application accordingly. You can modify your business information, upload new documents, or make any other necessary changes before resubmitting."})})]})]})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(ie,{onClick:a,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Update Application"}),s.jsx(ie,{onClick:()=>t("/vendor/login"),variant:"outline",className:"flex-1",children:"Back to Login"})]})]})]})})}var yh=e=>e.type==="checkbox",Ro=e=>e instanceof Date,jn=e=>e==null;const vL=e=>typeof e=="object";var Ts=e=>!jn(e)&&!Array.isArray(e)&&vL(e)&&!Ro(e),yL=e=>Ts(e)&&e.target?yh(e.target)?e.target.checked:e.target.value:e,BK=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,bL=(e,t)=>e.has(BK(t)),VK=e=>{const t=e.constructor&&e.constructor.prototype;return Ts(t)&&t.hasOwnProperty("isPrototypeOf")},tj=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Bs(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(tj&&(e instanceof Blob||r))&&(n||Ts(e)))if(t=n?[]:{},!n&&!VK(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Bs(e[a]));else return e;return t}var ng=e=>/^\w*$/.test(e),ks=e=>e===void 0,sj=e=>Array.isArray(e)?e.filter(Boolean):[],nj=e=>sj(e.replace(/["|']|\]/g,"").split(/\.|\[/)),He=(e,t,n)=>{if(!t||!Ts(e))return n;const r=(ng(t)?[t]:nj(t)).reduce((a,i)=>jn(a)?a:a[i],e);return ks(r)||r===e?ks(e[t])?n:e[t]:r},Qn=e=>typeof e=="boolean",Zt=(e,t,n)=>{let r=-1;const a=ng(t)?[t]:nj(t),i=a.length,o=i-1;for(;++r<i;){const c=a[r];let d=n;if(r!==o){const h=e[c];d=Ts(h)||Array.isArray(h)?h:isNaN(+a[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=d,e=e[c]}};const Lm={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},zr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},qa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},wL=Ce.createContext(null);wL.displayName="HookFormContext";const rj=()=>Ce.useContext(wL);var jL=(e,t,n,r=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==zr.all&&(t._proxyFormState[o]=!r||zr.all),n&&(n[o]=!0),e[o]}});return a};const aj=typeof window<"u"?Ce.useLayoutEffect:Ce.useEffect;function UK(e){const t=rj(),{control:n=t.control,disabled:r,name:a,exact:i}=e||{},[o,c]=Ce.useState(n._formState),d=Ce.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return aj(()=>n._subscribe({name:a,formState:d.current,exact:i,callback:h=>{!r&&c({...n._formState,...h})}}),[a,r,i]),Ce.useEffect(()=>{d.current.isValid&&n._setValid(!0)},[n]),Ce.useMemo(()=>jL(o,n,d.current,!1),[o,n])}var ya=e=>typeof e=="string",_L=(e,t,n,r,a)=>ya(e)?(r&&t.watch.add(e),He(n,e,a)):Array.isArray(e)?e.map(i=>(r&&t.watch.add(i),He(n,i))):(r&&(t.watchAll=!0),n),Hy=e=>jn(e)||!vL(e);function Xa(e,t,n=new WeakSet){if(Hy(e)||Hy(t))return e===t;if(Ro(e)&&Ro(t))return e.getTime()===t.getTime();const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of r){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const c=t[i];if(Ro(o)&&Ro(c)||Ts(o)&&Ts(c)||Array.isArray(o)&&Array.isArray(c)?!Xa(o,c,n):o!==c)return!1}}return!0}function qK(e){const t=rj(),{control:n=t.control,name:r,defaultValue:a,disabled:i,exact:o,compute:c}=e||{},d=Ce.useRef(a),h=Ce.useRef(c),m=Ce.useRef(void 0);h.current=c;const u=Ce.useMemo(()=>n._getWatch(r,d.current),[n,r]),[f,p]=Ce.useState(h.current?h.current(u):u);return aj(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:x=>{if(!i){const v=_L(r,n._names,x.values||n._formValues,!1,d.current);if(h.current){const y=h.current(v);Xa(y,m.current)||(p(y),m.current=y)}else p(v)}}}),[n,i,r,o]),Ce.useEffect(()=>n._removeUnmounted()),f}function HK(e){const t=rj(),{name:n,disabled:r,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,c=bL(a._names.array,n),d=Ce.useMemo(()=>He(a._formValues,n,He(a._defaultValues,n,o)),[a,n,o]),h=qK({control:a,name:n,defaultValue:d,exact:!0}),m=UK({control:a,name:n,exact:!0}),u=Ce.useRef(e),f=Ce.useRef(a.register(n,{...e.rules,value:h,...Qn(e.disabled)?{disabled:e.disabled}:{}}));u.current=e;const p=Ce.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!He(m.errors,n)},isDirty:{enumerable:!0,get:()=>!!He(m.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!He(m.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!He(m.validatingFields,n)},error:{enumerable:!0,get:()=>He(m.errors,n)}}),[m,n]),x=Ce.useCallback(b=>f.current.onChange({target:{value:yL(b),name:n},type:Lm.CHANGE}),[n]),v=Ce.useCallback(()=>f.current.onBlur({target:{value:He(a._formValues,n),name:n},type:Lm.BLUR}),[n,a._formValues]),y=Ce.useCallback(b=>{const _=He(a._fields,n);_&&b&&(_._f.ref={focus:()=>b.focus&&b.focus(),select:()=>b.select&&b.select(),setCustomValidity:N=>b.setCustomValidity(N),reportValidity:()=>b.reportValidity()})},[a._fields,n]),w=Ce.useMemo(()=>({name:n,value:h,...Qn(r)||m.disabled?{disabled:m.disabled||r}:{},onChange:x,onBlur:v,ref:y}),[n,r,m.disabled,x,v,y,h]);return Ce.useEffect(()=>{const b=a._options.shouldUnregister||i;a.register(n,{...u.current.rules,...Qn(u.current.disabled)?{disabled:u.current.disabled}:{}});const _=(N,k)=>{const E=He(a._fields,N);E&&E._f&&(E._f.mount=k)};if(_(n,!0),b){const N=Bs(He(a._options.defaultValues,n));Zt(a._defaultValues,n,N),ks(He(a._formValues,n))&&Zt(a._formValues,n,N)}return!c&&a.register(n),()=>{(c?b&&!a._state.action:b)?a.unregister(n):_(n,!1)}},[n,a,c,i]),Ce.useEffect(()=>{a._setDisabledField({disabled:r,name:n})},[r,n,a]),Ce.useMemo(()=>({field:w,formState:m,fieldState:p}),[w,m,p])}const ut=e=>e.render(HK(e));var NL=(e,t,n,r,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:a||!0}}:{},fu=e=>Array.isArray(e)?e:[e],VS=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},In=e=>Ts(e)&&!Object.keys(e).length,ij=e=>e.type==="file",Br=e=>typeof e=="function",Mm=e=>{if(!tj)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},SL=e=>e.type==="select-multiple",oj=e=>e.type==="radio",WK=e=>oj(e)||yh(e),Zx=e=>Mm(e)&&e.isConnected;function ZK(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=ks(e)?r++:e[t[r++]];return e}function GK(e){for(const t in e)if(e.hasOwnProperty(t)&&!ks(e[t]))return!1;return!0}function Is(e,t){const n=Array.isArray(t)?t:ng(t)?[t]:nj(t),r=n.length===1?e:ZK(e,n),a=n.length-1,i=n[a];return r&&delete r[i],a!==0&&(Ts(r)&&In(r)||Array.isArray(r)&&GK(r))&&Is(e,n.slice(0,-1)),e}var kL=e=>{for(const t in e)if(Br(e[t]))return!0;return!1};function Im(e,t={}){const n=Array.isArray(e);if(Ts(e)||n)for(const r in e)Array.isArray(e[r])||Ts(e[r])&&!kL(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Im(e[r],t[r])):jn(e[r])||(t[r]=!0);return t}function CL(e,t,n){const r=Array.isArray(e);if(Ts(e)||r)for(const a in e)Array.isArray(e[a])||Ts(e[a])&&!kL(e[a])?ks(t)||Hy(n[a])?n[a]=Array.isArray(e[a])?Im(e[a],[]):{...Im(e[a])}:CL(e[a],jn(t)?{}:t[a],n[a]):n[a]=!Xa(e[a],t[a]);return n}var Id=(e,t)=>CL(e,t,Im(t));const US={value:!1,isValid:!1},qS={value:!0,isValid:!0};var PL=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ks(e[0].attributes.value)?ks(e[0].value)||e[0].value===""?qS:{value:e[0].value,isValid:!0}:qS:US}return US},EL=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>ks(e)?e:t?e===""?NaN:e&&+e:n&&ya(e)?new Date(e):r?r(e):e;const HS={isValid:!1,value:null};var TL=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,HS):HS;function WS(e){const t=e.ref;return ij(t)?t.files:oj(t)?TL(e.refs).value:SL(t)?[...t.selectedOptions].map(({value:n})=>n):yh(t)?PL(e.refs).value:EL(ks(t.value)?e.ref.value:t.value,e)}var KK=(e,t,n,r)=>{const a={};for(const i of e){const o=He(t,i);o&&Zt(a,i,o._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}},Dm=e=>e instanceof RegExp,Dd=e=>ks(e)?e:Dm(e)?e.source:Ts(e)?Dm(e.value)?e.value.source:e.value:e,ZS=e=>({isOnSubmit:!e||e===zr.onSubmit,isOnBlur:e===zr.onBlur,isOnChange:e===zr.onChange,isOnAll:e===zr.all,isOnTouch:e===zr.onTouched});const GS="AsyncFunction";var YK=e=>!!e&&!!e.validate&&!!(Br(e.validate)&&e.validate.constructor.name===GS||Ts(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===GS)),XK=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),KS=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const mu=(e,t,n,r)=>{for(const a of n||Object.keys(e)){const i=He(e,a);if(i){const{_f:o,...c}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(mu(c,t))break}else if(Ts(c)&&mu(c,t))break}}};function YS(e,t,n){const r=He(e,n);if(r||ng(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const i=a.join("."),o=He(t,i),c=He(e,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(c&&c.type)return{name:i,error:c};if(c&&c.root&&c.root.type)return{name:`${i}.root`,error:c.root};a.pop()}return{name:n}}var JK=(e,t,n,r)=>{n(e);const{name:a,...i}=e;return In(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!r||zr.all))},QK=(e,t,n)=>!e||!t||e===t||fu(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),eY=(e,t,n,r,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(t||e):(n?r.isOnBlur:a.isOnBlur)?!e:(n?r.isOnChange:a.isOnChange)?e:!0,tY=(e,t)=>!sj(He(e,t)).length&&Is(e,t),sY=(e,t,n)=>{const r=fu(He(e,n));return Zt(r,"root",t[n]),Zt(e,n,r),e},zf=e=>ya(e);function XS(e,t,n="validate"){if(zf(e)||Array.isArray(e)&&e.every(zf)||Qn(e)&&!e)return{type:n,message:zf(e)?e:"",ref:t}}var kl=e=>Ts(e)&&!Dm(e)?e:{value:e,message:""},JS=async(e,t,n,r,a,i)=>{const{ref:o,refs:c,required:d,maxLength:h,minLength:m,min:u,max:f,pattern:p,validate:x,name:v,valueAsNumber:y,mount:w}=e._f,b=He(n,v);if(!w||t.has(v))return{};const _=c?c[0]:o,N=C=>{a&&_.reportValidity&&(_.setCustomValidity(Qn(C)?"":C||""),_.reportValidity())},k={},E=oj(o),T=yh(o),R=E||T,$=(y||ij(o))&&ks(o.value)&&ks(b)||Mm(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,M=NL.bind(null,v,r,k),A=(C,z,P,O=qa.maxLength,Y=qa.minLength)=>{const J=C?z:P;k[v]={type:C?O:Y,message:J,ref:o,...M(C?O:Y,J)}};if(i?!Array.isArray(b)||!b.length:d&&(!R&&($||jn(b))||Qn(b)&&!b||T&&!PL(c).isValid||E&&!TL(c).isValid)){const{value:C,message:z}=zf(d)?{value:!!d,message:d}:kl(d);if(C&&(k[v]={type:qa.required,message:z,ref:_,...M(qa.required,z)},!r))return N(z),k}if(!$&&(!jn(u)||!jn(f))){let C,z;const P=kl(f),O=kl(u);if(!jn(b)&&!isNaN(b)){const Y=o.valueAsNumber||b&&+b;jn(P.value)||(C=Y>P.value),jn(O.value)||(z=Y<O.value)}else{const Y=o.valueAsDate||new Date(b),J=I=>new Date(new Date().toDateString()+" "+I),G=o.type=="time",F=o.type=="week";ya(P.value)&&b&&(C=G?J(b)>J(P.value):F?b>P.value:Y>new Date(P.value)),ya(O.value)&&b&&(z=G?J(b)<J(O.value):F?b<O.value:Y<new Date(O.value))}if((C||z)&&(A(!!C,P.message,O.message,qa.max,qa.min),!r))return N(k[v].message),k}if((h||m)&&!$&&(ya(b)||i&&Array.isArray(b))){const C=kl(h),z=kl(m),P=!jn(C.value)&&b.length>+C.value,O=!jn(z.value)&&b.length<+z.value;if((P||O)&&(A(P,C.message,z.message),!r))return N(k[v].message),k}if(p&&!$&&ya(b)){const{value:C,message:z}=kl(p);if(Dm(C)&&!b.match(C)&&(k[v]={type:qa.pattern,message:z,ref:o,...M(qa.pattern,z)},!r))return N(z),k}if(x){if(Br(x)){const C=await x(b,n),z=XS(C,_);if(z&&(k[v]={...z,...M(qa.validate,z.message)},!r))return N(z.message),k}else if(Ts(x)){let C={};for(const z in x){if(!In(C)&&!r)break;const P=XS(await x[z](b,n),_,z);P&&(C={...P,...M(z,P.message)},N(P.message),r&&(k[v]=C))}if(!In(C)&&(k[v]={ref:_,...C},!r))return k}}return N(!0),k};const nY={mode:zr.onSubmit,reValidateMode:zr.onChange,shouldFocusError:!0};function rY(e={}){let t={...nY,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Br(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},a=Ts(t.defaultValues)||Ts(t.values)?Bs(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Bs(a),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...m};const f={array:VS(),state:VS()},p=t.criteriaMode===zr.all,x=Q=>se=>{clearTimeout(h),h=setTimeout(Q,se)},v=async Q=>{if(!t.disabled&&(m.isValid||u.isValid||Q)){const se=t.resolver?In((await T()).errors):await $(r,!0);se!==n.isValid&&f.state.next({isValid:se})}},y=(Q,se)=>{!t.disabled&&(m.isValidating||m.validatingFields||u.isValidating||u.validatingFields)&&((Q||Array.from(c.mount)).forEach(ne=>{ne&&(se?Zt(n.validatingFields,ne,se):Is(n.validatingFields,ne))}),f.state.next({validatingFields:n.validatingFields,isValidating:!In(n.validatingFields)}))},w=(Q,se=[],ne,ve,pe=!0,ge=!0)=>{if(ve&&ne&&!t.disabled){if(o.action=!0,ge&&Array.isArray(He(r,Q))){const ke=ne(He(r,Q),ve.argA,ve.argB);pe&&Zt(r,Q,ke)}if(ge&&Array.isArray(He(n.errors,Q))){const ke=ne(He(n.errors,Q),ve.argA,ve.argB);pe&&Zt(n.errors,Q,ke),tY(n.errors,Q)}if((m.touchedFields||u.touchedFields)&&ge&&Array.isArray(He(n.touchedFields,Q))){const ke=ne(He(n.touchedFields,Q),ve.argA,ve.argB);pe&&Zt(n.touchedFields,Q,ke)}(m.dirtyFields||u.dirtyFields)&&(n.dirtyFields=Id(a,i)),f.state.next({name:Q,isDirty:A(Q,se),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Zt(i,Q,se)},b=(Q,se)=>{Zt(n.errors,Q,se),f.state.next({errors:n.errors})},_=Q=>{n.errors=Q,f.state.next({errors:n.errors,isValid:!1})},N=(Q,se,ne,ve)=>{const pe=He(r,Q);if(pe){const ge=He(i,Q,ks(ne)?He(a,Q):ne);ks(ge)||ve&&ve.defaultChecked||se?Zt(i,Q,se?ge:WS(pe._f)):P(Q,ge),o.mount&&v()}},k=(Q,se,ne,ve,pe)=>{let ge=!1,ke=!1;const Be={name:Q};if(!t.disabled){if(!ne||ve){(m.isDirty||u.isDirty)&&(ke=n.isDirty,n.isDirty=Be.isDirty=A(),ge=ke!==Be.isDirty);const qe=Xa(He(a,Q),se);ke=!!He(n.dirtyFields,Q),qe?Is(n.dirtyFields,Q):Zt(n.dirtyFields,Q,!0),Be.dirtyFields=n.dirtyFields,ge=ge||(m.dirtyFields||u.dirtyFields)&&ke!==!qe}if(ne){const qe=He(n.touchedFields,Q);qe||(Zt(n.touchedFields,Q,ne),Be.touchedFields=n.touchedFields,ge=ge||(m.touchedFields||u.touchedFields)&&qe!==ne)}ge&&pe&&f.state.next(Be)}return ge?Be:{}},E=(Q,se,ne,ve)=>{const pe=He(n.errors,Q),ge=(m.isValid||u.isValid)&&Qn(se)&&n.isValid!==se;if(t.delayError&&ne?(d=x(()=>b(Q,ne)),d(t.delayError)):(clearTimeout(h),d=null,ne?Zt(n.errors,Q,ne):Is(n.errors,Q)),(ne?!Xa(pe,ne):pe)||!In(ve)||ge){const ke={...ve,...ge&&Qn(se)?{isValid:se}:{},errors:n.errors,name:Q};n={...n,...ke},f.state.next(ke)}},T=async Q=>{y(Q,!0);const se=await t.resolver(i,t.context,KK(Q||c.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return y(Q),se},R=async Q=>{const{errors:se}=await T(Q);if(Q)for(const ne of Q){const ve=He(se,ne);ve?Zt(n.errors,ne,ve):Is(n.errors,ne)}else n.errors=se;return se},$=async(Q,se,ne={valid:!0})=>{for(const ve in Q){const pe=Q[ve];if(pe){const{_f:ge,...ke}=pe;if(ge){const Be=c.array.has(ge.name),qe=pe._f&&YK(pe._f);qe&&m.validatingFields&&y([ve],!0);const gt=await JS(pe,c.disabled,i,p,t.shouldUseNativeValidation&&!se,Be);if(qe&&m.validatingFields&&y([ve]),gt[ge.name]&&(ne.valid=!1,se))break;!se&&(He(gt,ge.name)?Be?sY(n.errors,gt,ge.name):Zt(n.errors,ge.name,gt[ge.name]):Is(n.errors,ge.name))}!In(ke)&&await $(ke,se,ne)}}return ne.valid},M=()=>{for(const Q of c.unMount){const se=He(r,Q);se&&(se._f.refs?se._f.refs.every(ne=>!Zx(ne)):!Zx(se._f.ref))&&W(Q)}c.unMount=new Set},A=(Q,se)=>!t.disabled&&(Q&&se&&Zt(i,Q,se),!Xa(I(),a)),C=(Q,se,ne)=>_L(Q,c,{...o.mount?i:ks(se)?a:ya(Q)?{[Q]:se}:se},ne,se),z=Q=>sj(He(o.mount?i:a,Q,t.shouldUnregister?He(a,Q,[]):[])),P=(Q,se,ne={})=>{const ve=He(r,Q);let pe=se;if(ve){const ge=ve._f;ge&&(!ge.disabled&&Zt(i,Q,EL(se,ge)),pe=Mm(ge.ref)&&jn(se)?"":se,SL(ge.ref)?[...ge.ref.options].forEach(ke=>ke.selected=pe.includes(ke.value)):ge.refs?yh(ge.ref)?ge.refs.forEach(ke=>{(!ke.defaultChecked||!ke.disabled)&&(Array.isArray(pe)?ke.checked=!!pe.find(Be=>Be===ke.value):ke.checked=pe===ke.value||!!pe)}):ge.refs.forEach(ke=>ke.checked=ke.value===pe):ij(ge.ref)?ge.ref.value="":(ge.ref.value=pe,ge.ref.type||f.state.next({name:Q,values:Bs(i)})))}(ne.shouldDirty||ne.shouldTouch)&&k(Q,pe,ne.shouldTouch,ne.shouldDirty,!0),ne.shouldValidate&&F(Q)},O=(Q,se,ne)=>{for(const ve in se){if(!se.hasOwnProperty(ve))return;const pe=se[ve],ge=Q+"."+ve,ke=He(r,ge);(c.array.has(Q)||Ts(pe)||ke&&!ke._f)&&!Ro(pe)?O(ge,pe,ne):P(ge,pe,ne)}},Y=(Q,se,ne={})=>{const ve=He(r,Q),pe=c.array.has(Q),ge=Bs(se);Zt(i,Q,ge),pe?(f.array.next({name:Q,values:Bs(i)}),(m.isDirty||m.dirtyFields||u.isDirty||u.dirtyFields)&&ne.shouldDirty&&f.state.next({name:Q,dirtyFields:Id(a,i),isDirty:A(Q,ge)})):ve&&!ve._f&&!jn(ge)?O(Q,ge,ne):P(Q,ge,ne),KS(Q,c)&&f.state.next({...n,name:Q}),f.state.next({name:o.mount?Q:void 0,values:Bs(i)})},J=async Q=>{o.mount=!0;const se=Q.target;let ne=se.name,ve=!0;const pe=He(r,ne),ge=qe=>{ve=Number.isNaN(qe)||Ro(qe)&&isNaN(qe.getTime())||Xa(qe,He(i,ne,qe))},ke=ZS(t.mode),Be=ZS(t.reValidateMode);if(pe){let qe,gt;const ct=se.type?WS(pe._f):yL(Q),Xe=Q.type===Lm.BLUR||Q.type===Lm.FOCUS_OUT,ce=!XK(pe._f)&&!t.resolver&&!He(n.errors,ne)&&!pe._f.deps||eY(Xe,He(n.touchedFields,ne),n.isSubmitted,Be,ke),Te=KS(ne,c,Xe);Zt(i,ne,ct),Xe?(pe._f.onBlur&&pe._f.onBlur(Q),d&&d(0)):pe._f.onChange&&pe._f.onChange(Q);const Ue=k(ne,ct,Xe),mt=!In(Ue)||Te;if(!Xe&&f.state.next({name:ne,type:Q.type,values:Bs(i)}),ce)return(m.isValid||u.isValid)&&(t.mode==="onBlur"?Xe&&v():Xe||v()),mt&&f.state.next({name:ne,...Te?{}:Ue});if(!Xe&&Te&&f.state.next({...n}),t.resolver){const{errors:Ie}=await T([ne]);if(ge(ct),ve){const ht=YS(n.errors,r,ne),gs=YS(Ie,r,ht.name||ne);qe=gs.error,ne=gs.name,gt=In(Ie)}}else y([ne],!0),qe=(await JS(pe,c.disabled,i,p,t.shouldUseNativeValidation))[ne],y([ne]),ge(ct),ve&&(qe?gt=!1:(m.isValid||u.isValid)&&(gt=await $(r,!0)));ve&&(pe._f.deps&&F(pe._f.deps),E(ne,gt,qe,Ue))}},G=(Q,se)=>{if(He(n.errors,se)&&Q.focus)return Q.focus(),1},F=async(Q,se={})=>{let ne,ve;const pe=fu(Q);if(t.resolver){const ge=await R(ks(Q)?Q:pe);ne=In(ge),ve=Q?!pe.some(ke=>He(ge,ke)):ne}else Q?(ve=(await Promise.all(pe.map(async ge=>{const ke=He(r,ge);return await $(ke&&ke._f?{[ge]:ke}:ke)}))).every(Boolean),!(!ve&&!n.isValid)&&v()):ve=ne=await $(r);return f.state.next({...!ya(Q)||(m.isValid||u.isValid)&&ne!==n.isValid?{}:{name:Q},...t.resolver||!Q?{isValid:ne}:{},errors:n.errors}),se.shouldFocus&&!ve&&mu(r,G,Q?pe:c.mount),ve},I=Q=>{const se={...o.mount?i:a};return ks(Q)?se:ya(Q)?He(se,Q):Q.map(ne=>He(se,ne))},V=(Q,se)=>({invalid:!!He((se||n).errors,Q),isDirty:!!He((se||n).dirtyFields,Q),error:He((se||n).errors,Q),isValidating:!!He(n.validatingFields,Q),isTouched:!!He((se||n).touchedFields,Q)}),H=Q=>{Q&&fu(Q).forEach(se=>Is(n.errors,se)),f.state.next({errors:Q?n.errors:{}})},U=(Q,se,ne)=>{const ve=(He(r,Q,{_f:{}})._f||{}).ref,pe=He(n.errors,Q)||{},{ref:ge,message:ke,type:Be,...qe}=pe;Zt(n.errors,Q,{...qe,...se,ref:ve}),f.state.next({name:Q,errors:n.errors,isValid:!1}),ne&&ne.shouldFocus&&ve&&ve.focus&&ve.focus()},q=(Q,se)=>Br(Q)?f.state.subscribe({next:ne=>"values"in ne&&Q(C(void 0,se),ne)}):C(Q,se,!0),K=Q=>f.state.subscribe({next:se=>{QK(Q.name,se.name,Q.exact)&&JK(se,Q.formState||m,ye,Q.reRenderRoot)&&Q.callback({values:{...i},...n,...se,defaultValues:a})}}).unsubscribe,B=Q=>(o.mount=!0,u={...u,...Q.formState},K({...Q,formState:u})),W=(Q,se={})=>{for(const ne of Q?fu(Q):c.mount)c.mount.delete(ne),c.array.delete(ne),se.keepValue||(Is(r,ne),Is(i,ne)),!se.keepError&&Is(n.errors,ne),!se.keepDirty&&Is(n.dirtyFields,ne),!se.keepTouched&&Is(n.touchedFields,ne),!se.keepIsValidating&&Is(n.validatingFields,ne),!t.shouldUnregister&&!se.keepDefaultValue&&Is(a,ne);f.state.next({values:Bs(i)}),f.state.next({...n,...se.keepDirty?{isDirty:A()}:{}}),!se.keepIsValid&&v()},oe=({disabled:Q,name:se})=>{(Qn(Q)&&o.mount||Q||c.disabled.has(se))&&(Q?c.disabled.add(se):c.disabled.delete(se))},X=(Q,se={})=>{let ne=He(r,Q);const ve=Qn(se.disabled)||Qn(t.disabled);return Zt(r,Q,{...ne||{},_f:{...ne&&ne._f?ne._f:{ref:{name:Q}},name:Q,mount:!0,...se}}),c.mount.add(Q),ne?oe({disabled:Qn(se.disabled)?se.disabled:t.disabled,name:Q}):N(Q,!0,se.value),{...ve?{disabled:se.disabled||t.disabled}:{},...t.progressive?{required:!!se.required,min:Dd(se.min),max:Dd(se.max),minLength:Dd(se.minLength),maxLength:Dd(se.maxLength),pattern:Dd(se.pattern)}:{},name:Q,onChange:J,onBlur:J,ref:pe=>{if(pe){X(Q,se),ne=He(r,Q);const ge=ks(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,ke=WK(ge),Be=ne._f.refs||[];if(ke?Be.find(qe=>qe===ge):ge===ne._f.ref)return;Zt(r,Q,{_f:{...ne._f,...ke?{refs:[...Be.filter(Zx),ge,...Array.isArray(He(a,Q))?[{}]:[]],ref:{type:ge.type,name:Q}}:{ref:ge}}}),N(Q,!1,void 0,ge)}else ne=He(r,Q,{}),ne._f&&(ne._f.mount=!1),(t.shouldUnregister||se.shouldUnregister)&&!(bL(c.array,Q)&&o.action)&&c.unMount.add(Q)}}},re=()=>t.shouldFocusError&&mu(r,G,c.mount),ue=Q=>{Qn(Q)&&(f.state.next({disabled:Q}),mu(r,(se,ne)=>{const ve=He(r,ne);ve&&(se.disabled=ve._f.disabled||Q,Array.isArray(ve._f.refs)&&ve._f.refs.forEach(pe=>{pe.disabled=ve._f.disabled||Q}))},0,!1))},me=(Q,se)=>async ne=>{let ve;ne&&(ne.preventDefault&&ne.preventDefault(),ne.persist&&ne.persist());let pe=Bs(i);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:ge,values:ke}=await T();n.errors=ge,pe=Bs(ke)}else await $(r);if(c.disabled.size)for(const ge of c.disabled)Is(pe,ge);if(Is(n.errors,"root"),In(n.errors)){f.state.next({errors:{}});try{await Q(pe,ne)}catch(ge){ve=ge}}else se&&await se({...n.errors},ne),re(),setTimeout(re);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:In(n.errors)&&!ve,submitCount:n.submitCount+1,errors:n.errors}),ve)throw ve},we=(Q,se={})=>{He(r,Q)&&(ks(se.defaultValue)?Y(Q,Bs(He(a,Q))):(Y(Q,se.defaultValue),Zt(a,Q,Bs(se.defaultValue))),se.keepTouched||Is(n.touchedFields,Q),se.keepDirty||(Is(n.dirtyFields,Q),n.isDirty=se.defaultValue?A(Q,Bs(He(a,Q))):A()),se.keepError||(Is(n.errors,Q),m.isValid&&v()),f.state.next({...n}))},be=(Q,se={})=>{const ne=Q?Bs(Q):a,ve=Bs(ne),pe=In(Q),ge=pe?a:ve;if(se.keepDefaultValues||(a=ne),!se.keepValues){if(se.keepDirtyValues){const ke=new Set([...c.mount,...Object.keys(Id(a,i))]);for(const Be of Array.from(ke))He(n.dirtyFields,Be)?Zt(ge,Be,He(i,Be)):Y(Be,He(ge,Be))}else{if(tj&&ks(Q))for(const ke of c.mount){const Be=He(r,ke);if(Be&&Be._f){const qe=Array.isArray(Be._f.refs)?Be._f.refs[0]:Be._f.ref;if(Mm(qe)){const gt=qe.closest("form");if(gt){gt.reset();break}}}}if(se.keepFieldsRef)for(const ke of c.mount)Y(ke,He(ge,ke));else r={}}i=t.shouldUnregister?se.keepDefaultValues?Bs(a):{}:Bs(ge),f.array.next({values:{...ge}}),f.state.next({values:{...ge}})}c={mount:se.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!se.keepIsValid||!!se.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:se.keepSubmitCount?n.submitCount:0,isDirty:pe?!1:se.keepDirty?n.isDirty:!!(se.keepDefaultValues&&!Xa(Q,a)),isSubmitted:se.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:pe?{}:se.keepDirtyValues?se.keepDefaultValues&&i?Id(a,i):n.dirtyFields:se.keepDefaultValues&&Q?Id(a,Q):se.keepDirty?n.dirtyFields:{},touchedFields:se.keepTouched?n.touchedFields:{},errors:se.keepErrors?n.errors:{},isSubmitSuccessful:se.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ae=(Q,se)=>be(Br(Q)?Q(i):Q,se),ee=(Q,se={})=>{const ne=He(r,Q),ve=ne&&ne._f;if(ve){const pe=ve.refs?ve.refs[0]:ve.ref;pe.focus&&(pe.focus(),se.shouldSelect&&Br(pe.select)&&pe.select())}},ye=Q=>{n={...n,...Q}},de={control:{register:X,unregister:W,getFieldState:V,handleSubmit:me,setError:U,_subscribe:K,_runSchema:T,_focusError:re,_getWatch:C,_getDirty:A,_setValid:v,_setFieldArray:w,_setDisabledField:oe,_setErrors:_,_getFieldArray:z,_reset:be,_resetDefaultValues:()=>Br(t.defaultValues)&&t.defaultValues().then(Q=>{ae(Q,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:M,_disableForm:ue,_subjects:f,_proxyFormState:m,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(Q){o=Q},get _defaultValues(){return a},get _names(){return c},set _names(Q){c=Q},get _formState(){return n},get _options(){return t},set _options(Q){t={...t,...Q}}},subscribe:B,trigger:F,register:X,handleSubmit:me,watch:q,setValue:Y,getValues:I,reset:ae,resetField:we,clearErrors:H,unregister:W,setError:U,setFocus:ee,getFieldState:V};return{...de,formControl:de}}function AL(e={}){const t=Ce.useRef(void 0),n=Ce.useRef(void 0),[r,a]=Ce.useState({isDirty:!1,isValidating:!1,isLoading:Br(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Br(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Br(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...c}=rY(e);t.current={...c,formState:r}}const i=t.current.control;return i._options=e,aj(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(c=>({...c,isReady:!0})),i._formState.isReady=!0,o},[i]),Ce.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Ce.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Ce.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Ce.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Ce.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),Ce.useEffect(()=>{e.values&&!Xa(e.values,n.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),Ce.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=jL(r,i),t.current}const QS=(e,t,n)=>{if(e&&"reportValidity"in e){const r=He(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},OL=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?QS(r.ref,n,e):r.refs&&r.refs.forEach(a=>QS(a,n,e))}},aY=(e,t)=>{t.shouldUseNativeValidation&&OL(e,t);const n={};for(const r in e){const a=He(t.fields,r),i=Object.assign(e[r]||{},{ref:a&&a.ref});if(iY(t.names||Object.keys(e),r)){const o=Object.assign({},He(n,r));Zt(o,"root",i),Zt(n,r,o)}else Zt(n,r,i)}return n},iY=(e,t)=>e.some(n=>n.startsWith(t+"."));var oY=function(e,t){for(var n={};e.length;){var r=e[0],a=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];n[o]={message:c.message,type:c.code}}else n[o]={message:i,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(m){return m.errors.forEach(function(u){return e.push(u)})}),t){var d=n[o].types,h=d&&d[r.code];n[o]=NL(o,t,n,a,h?[].concat(h,r.message):r.message)}e.shift()}return n},RL=function(e,t,n){return n===void 0&&(n={}),function(r,a,i){try{return Promise.resolve(function(o,c){try{var d=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(h){return i.shouldUseNativeValidation&&OL({},i),{errors:{},values:n.raw?r:h}})}catch(h){return c(h)}return d&&d.then?d.then(void 0,c):d}(0,function(o){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(o))return{values:{},errors:aY(oY(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},zt;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),o={};for(const c of i)o[c]=a[c];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(zt||(zt={}));var e2;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(e2||(e2={}));const tt=zt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ci=e=>{switch(typeof e){case"undefined":return tt.undefined;case"string":return tt.string;case"number":return Number.isNaN(e)?tt.nan:tt.number;case"boolean":return tt.boolean;case"function":return tt.function;case"bigint":return tt.bigint;case"symbol":return tt.symbol;case"object":return Array.isArray(e)?tt.array:e===null?tt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?tt.promise:typeof Map<"u"&&e instanceof Map?tt.map:typeof Set<"u"&&e instanceof Set?tt.set:typeof Date<"u"&&e instanceof Date?tt.date:tt.object;default:return tt.unknown}},De=zt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class fi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let c=r,d=0;for(;d<o.path.length;){const h=o.path[d];d===o.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(n(o))):c[h]=c[h]||{_errors:[]},c=c[h],d++}}};return a(this),r}static assert(t){if(!(t instanceof fi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,zt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];n[i]=n[i]||[],n[i].push(t(a))}else r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}fi.create=e=>new fi(e);const Wy=(e,t)=>{let n;switch(e.code){case De.invalid_type:e.received===tt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case De.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,zt.jsonStringifyReplacer)}`;break;case De.unrecognized_keys:n=`Unrecognized key(s) in object: ${zt.joinValues(e.keys,", ")}`;break;case De.invalid_union:n="Invalid input";break;case De.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${zt.joinValues(e.options)}`;break;case De.invalid_enum_value:n=`Invalid enum value. Expected ${zt.joinValues(e.options)}, received '${e.received}'`;break;case De.invalid_arguments:n="Invalid function arguments";break;case De.invalid_return_type:n="Invalid function return type";break;case De.invalid_date:n="Invalid date";break;case De.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:zt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case De.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case De.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case De.custom:n="Invalid input";break;case De.invalid_intersection_types:n="Intersection results could not be merged";break;case De.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case De.not_finite:n="Number must be finite";break;default:n=t.defaultError,zt.assertNever(e)}return{message:n}};let lY=Wy;function cY(){return lY}const dY=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let c="";const d=r.filter(h=>!!h).slice().reverse();for(const h of d)c=h(o,{data:t,defaultError:c}).message;return{...a,path:i,message:c}};function Ge(e,t){const n=cY(),r=dY({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Wy?void 0:Wy].filter(a=>!!a)});e.common.issues.push(r)}class Tn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return yt;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Tn.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return yt;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const yt=Object.freeze({status:"aborted"}),Gd=e=>({status:"dirty",value:e}),kr=e=>({status:"valid",value:e}),t2=e=>e.status==="aborted",s2=e=>e.status==="dirty",Ic=e=>e.status==="valid",Fm=e=>typeof Promise<"u"&&e instanceof Promise;var ot;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(ot||(ot={}));class Ra{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const n2=(e,t)=>{if(Ic(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new fi(e.common.issues);return this._error=n,this._error}}};function Et(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,c)=>{const{message:d}=e;return o.code==="invalid_enum_value"?{message:d??c.defaultError}:typeof c.data>"u"?{message:d??r??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:d??n??c.defaultError}},description:a}}class Rt{get description(){return this._def.description}_getType(t){return Ci(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Ci(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Tn,ctx:{common:t.parent.common,data:t.data,parsedType:Ci(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Fm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ci(t)},a=this._parseSync({data:t,path:r.path,parent:r});return n2(r,a)}"~validate"(t){var r,a;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ci(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:n});return Ic(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(a=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(i=>Ic(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ci(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(Fm(a)?a:Promise.resolve(a));return n2(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),c=()=>i.addIssue({code:De.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new no({schema:this,typeName:vt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Zi.create(this,this._def)}nullable(){return Bc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ea.create(this)}promise(){return Vm.create(this,this._def)}or(t){return $m.create([this,t],this._def)}and(t){return zm.create(this,t,this._def)}transform(t){return new no({...Et(this._def),schema:this,typeName:vt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new a0({...Et(this._def),innerType:this,defaultValue:n,typeName:vt.ZodDefault})}brand(){return new RY({typeName:vt.ZodBranded,type:this,...Et(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new i0({...Et(this._def),innerType:this,catchValue:n,typeName:vt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return lj.create(this,t)}readonly(){return l0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const uY=/^c[^\s-]{8,}$/i,hY=/^[0-9a-z]+$/,fY=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pY=/^[a-z0-9_-]{21}$/i,gY=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,xY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,yY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gx;const bY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,jY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,_Y=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,NY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,SY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,LL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",kY=new RegExp(`^${LL}$`);function ML(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function CY(e){return new RegExp(`^${ML(e)}$`)}function PY(e){let t=`${LL}T${ML(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function EY(e,t){return!!((t==="v4"||!t)&&bY.test(e)||(t==="v6"||!t)&&jY.test(e))}function TY(e,t){if(!gY.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function AY(e,t){return!!((t==="v4"||!t)&&wY.test(e)||(t==="v6"||!t)&&_Y.test(e))}class ei extends Rt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==tt.string){const i=this._getOrReturnCtx(t);return Ge(i,{code:De.invalid_type,expected:tt.string,received:i.parsedType}),yt}const r=new Tn;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Ge(a,{code:De.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Ge(a,{code:De.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,c=t.data.length<i.value;(o||c)&&(a=this._getOrReturnCtx(t,a),o?Ge(a,{code:De.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&Ge(a,{code:De.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")vY.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"email",code:De.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Gx||(Gx=new RegExp(yY,"u")),Gx.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"emoji",code:De.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")mY.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"uuid",code:De.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")pY.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"nanoid",code:De.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")uY.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"cuid",code:De.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")hY.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"cuid2",code:De.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")fY.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"ulid",code:De.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Ge(a,{validation:"url",code:De.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"regex",code:De.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Ge(a,{code:De.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Ge(a,{code:De.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Ge(a,{code:De.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?PY(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{code:De.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?kY.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{code:De.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?CY(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{code:De.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?xY.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"duration",code:De.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?EY(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"ip",code:De.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?TY(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"jwt",code:De.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?AY(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"cidr",code:De.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?NY.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"base64",code:De.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?SY.test(t.data)||(a=this._getOrReturnCtx(t,a),Ge(a,{validation:"base64url",code:De.invalid_string,message:i.message}),r.dirty()):zt.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:De.invalid_string,...ot.errToObj(r)})}_addCheck(t){return new ei({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ot.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ot.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ot.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ot.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ot.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ot.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ot.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ot.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ot.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ot.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ot.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ot.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ot.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...ot.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...ot.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...ot.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...ot.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...ot.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...ot.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...ot.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...ot.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...ot.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...ot.errToObj(n)})}nonempty(t){return this.min(1,ot.errToObj(t))}trim(){return new ei({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ei({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ei({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ei.create=e=>new ei({checks:[],typeName:vt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Et(e)});function OY(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class Dc extends Rt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==tt.number){const i=this._getOrReturnCtx(t);return Ge(i,{code:De.invalid_type,expected:tt.number,received:i.parsedType}),yt}let r;const a=new Tn;for(const i of this._def.checks)i.kind==="int"?zt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Ge(r,{code:De.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Ge(r,{code:De.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Ge(r,{code:De.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?OY(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Ge(r,{code:De.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Ge(r,{code:De.not_finite,message:i.message}),a.dirty()):zt.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,ot.toString(n))}gt(t,n){return this.setLimit("min",t,!1,ot.toString(n))}lte(t,n){return this.setLimit("max",t,!0,ot.toString(n))}lt(t,n){return this.setLimit("max",t,!1,ot.toString(n))}setLimit(t,n,r,a){return new Dc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:ot.toString(a)}]})}_addCheck(t){return new Dc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ot.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ot.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ot.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ot.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ot.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:ot.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:ot.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ot.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ot.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&zt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Dc.create=e=>new Dc({checks:[],typeName:vt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Et(e)});class Fc extends Rt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==tt.bigint)return this._getInvalidInput(t);let r;const a=new Tn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Ge(r,{code:De.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Ge(r,{code:De.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Ge(r,{code:De.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):zt.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Ge(n,{code:De.invalid_type,expected:tt.bigint,received:n.parsedType}),yt}gte(t,n){return this.setLimit("min",t,!0,ot.toString(n))}gt(t,n){return this.setLimit("min",t,!1,ot.toString(n))}lte(t,n){return this.setLimit("max",t,!0,ot.toString(n))}lt(t,n){return this.setLimit("max",t,!1,ot.toString(n))}setLimit(t,n,r,a){return new Fc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:ot.toString(a)}]})}_addCheck(t){return new Fc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ot.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ot.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ot.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ot.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:ot.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Fc.create=e=>new Fc({checks:[],typeName:vt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Et(e)});class Zy extends Rt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==tt.boolean){const r=this._getOrReturnCtx(t);return Ge(r,{code:De.invalid_type,expected:tt.boolean,received:r.parsedType}),yt}return kr(t.data)}}Zy.create=e=>new Zy({typeName:vt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Et(e)});class Yu extends Rt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==tt.date){const i=this._getOrReturnCtx(t);return Ge(i,{code:De.invalid_type,expected:tt.date,received:i.parsedType}),yt}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Ge(i,{code:De.invalid_date}),yt}const r=new Tn;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Ge(a,{code:De.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Ge(a,{code:De.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):zt.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Yu({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:ot.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:ot.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Yu.create=e=>new Yu({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:vt.ZodDate,...Et(e)});class Gy extends Rt{_parse(t){if(this._getType(t)!==tt.symbol){const r=this._getOrReturnCtx(t);return Ge(r,{code:De.invalid_type,expected:tt.symbol,received:r.parsedType}),yt}return kr(t.data)}}Gy.create=e=>new Gy({typeName:vt.ZodSymbol,...Et(e)});class Ky extends Rt{_parse(t){if(this._getType(t)!==tt.undefined){const r=this._getOrReturnCtx(t);return Ge(r,{code:De.invalid_type,expected:tt.undefined,received:r.parsedType}),yt}return kr(t.data)}}Ky.create=e=>new Ky({typeName:vt.ZodUndefined,...Et(e)});class Yy extends Rt{_parse(t){if(this._getType(t)!==tt.null){const r=this._getOrReturnCtx(t);return Ge(r,{code:De.invalid_type,expected:tt.null,received:r.parsedType}),yt}return kr(t.data)}}Yy.create=e=>new Yy({typeName:vt.ZodNull,...Et(e)});class Xy extends Rt{constructor(){super(...arguments),this._any=!0}_parse(t){return kr(t.data)}}Xy.create=e=>new Xy({typeName:vt.ZodAny,...Et(e)});class Jy extends Rt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return kr(t.data)}}Jy.create=e=>new Jy({typeName:vt.ZodUnknown,...Et(e)});class so extends Rt{_parse(t){const n=this._getOrReturnCtx(t);return Ge(n,{code:De.invalid_type,expected:tt.never,received:n.parsedType}),yt}}so.create=e=>new so({typeName:vt.ZodNever,...Et(e)});class Qy extends Rt{_parse(t){if(this._getType(t)!==tt.undefined){const r=this._getOrReturnCtx(t);return Ge(r,{code:De.invalid_type,expected:tt.void,received:r.parsedType}),yt}return kr(t.data)}}Qy.create=e=>new Qy({typeName:vt.ZodVoid,...Et(e)});class Ea extends Rt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==tt.array)return Ge(n,{code:De.invalid_type,expected:tt.array,received:n.parsedType}),yt;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,c=n.data.length<a.exactLength.value;(o||c)&&(Ge(n,{code:o?De.too_big:De.too_small,minimum:c?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Ge(n,{code:De.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Ge(n,{code:De.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,c)=>a.type._parseAsync(new Ra(n,o,n.path,c)))).then(o=>Tn.mergeArray(r,o));const i=[...n.data].map((o,c)=>a.type._parseSync(new Ra(n,o,n.path,c)));return Tn.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Ea({...this._def,minLength:{value:t,message:ot.toString(n)}})}max(t,n){return new Ea({...this._def,maxLength:{value:t,message:ot.toString(n)}})}length(t,n){return new Ea({...this._def,exactLength:{value:t,message:ot.toString(n)}})}nonempty(t){return this.min(1,t)}}Ea.create=(e,t)=>new Ea({type:e,minLength:null,maxLength:null,exactLength:null,typeName:vt.ZodArray,...Et(t)});function Pl(e){if(e instanceof ys){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Zi.create(Pl(r))}return new ys({...e._def,shape:()=>t})}else return e instanceof Ea?new Ea({...e._def,type:Pl(e.element)}):e instanceof Zi?Zi.create(Pl(e.unwrap())):e instanceof Bc?Bc.create(Pl(e.unwrap())):e instanceof ol?ol.create(e.items.map(t=>Pl(t))):e}class ys extends Rt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=zt.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==tt.object){const h=this._getOrReturnCtx(t);return Ge(h,{code:De.invalid_type,expected:tt.object,received:h.parsedType}),yt}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof so&&this._def.unknownKeys==="strip"))for(const h in a.data)o.includes(h)||c.push(h);const d=[];for(const h of o){const m=i[h],u=a.data[h];d.push({key:{status:"valid",value:h},value:m._parse(new Ra(a,u,a.path,h)),alwaysSet:h in a.data})}if(this._def.catchall instanceof so){const h=this._def.unknownKeys;if(h==="passthrough")for(const m of c)d.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(h==="strict")c.length>0&&(Ge(a,{code:De.unrecognized_keys,keys:c}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const m of c){const u=a.data[m];d.push({key:{status:"valid",value:m},value:h._parse(new Ra(a,u,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const h=[];for(const m of d){const u=await m.key,f=await m.value;h.push({key:u,value:f,alwaysSet:m.alwaysSet})}return h}).then(h=>Tn.mergeObjectSync(r,h)):Tn.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(t){return ot.errToObj,new ys({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:ot.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new ys({...this._def,unknownKeys:"strip"})}passthrough(){return new ys({...this._def,unknownKeys:"passthrough"})}extend(t){return new ys({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ys({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:vt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new ys({...this._def,catchall:t})}pick(t){const n={};for(const r of zt.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new ys({...this._def,shape:()=>n})}omit(t){const n={};for(const r of zt.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new ys({...this._def,shape:()=>n})}deepPartial(){return Pl(this)}partial(t){const n={};for(const r of zt.objectKeys(this.shape)){const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}return new ys({...this._def,shape:()=>n})}required(t){const n={};for(const r of zt.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Zi;)i=i._def.innerType;n[r]=i}return new ys({...this._def,shape:()=>n})}keyof(){return IL(zt.objectKeys(this.shape))}}ys.create=(e,t)=>new ys({shape:()=>e,unknownKeys:"strip",catchall:so.create(),typeName:vt.ZodObject,...Et(t)});ys.strictCreate=(e,t)=>new ys({shape:()=>e,unknownKeys:"strict",catchall:so.create(),typeName:vt.ZodObject,...Et(t)});ys.lazycreate=(e,t)=>new ys({shape:e,unknownKeys:"strip",catchall:so.create(),typeName:vt.ZodObject,...Et(t)});class $m extends Rt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const c of i)if(c.result.status==="valid")return c.result;for(const c of i)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const o=i.map(c=>new fi(c.ctx.common.issues));return Ge(n,{code:De.invalid_union,unionErrors:o}),yt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const d of r){const h={...n,common:{...n.common,issues:[]},parent:null},m=d._parseSync({data:n.data,path:n.path,parent:h});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const c=o.map(d=>new fi(d));return Ge(n,{code:De.invalid_union,unionErrors:c}),yt}}get options(){return this._def.options}}$m.create=(e,t)=>new $m({options:e,typeName:vt.ZodUnion,...Et(t)});function e0(e,t){const n=Ci(e),r=Ci(t);if(e===t)return{valid:!0,data:e};if(n===tt.object&&r===tt.object){const a=zt.objectKeys(t),i=zt.objectKeys(e).filter(c=>a.indexOf(c)!==-1),o={...e,...t};for(const c of i){const d=e0(e[c],t[c]);if(!d.valid)return{valid:!1};o[c]=d.data}return{valid:!0,data:o}}else if(n===tt.array&&r===tt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],c=t[i],d=e0(o,c);if(!d.valid)return{valid:!1};a.push(d.data)}return{valid:!0,data:a}}else return n===tt.date&&r===tt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class zm extends Rt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(t2(i)||t2(o))return yt;const c=e0(i.value,o.value);return c.valid?((s2(i)||s2(o))&&n.dirty(),{status:n.value,value:c.data}):(Ge(r,{code:De.invalid_intersection_types}),yt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}zm.create=(e,t,n)=>new zm({left:e,right:t,typeName:vt.ZodIntersection,...Et(n)});class ol extends Rt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==tt.array)return Ge(r,{code:De.invalid_type,expected:tt.array,received:r.parsedType}),yt;if(r.data.length<this._def.items.length)return Ge(r,{code:De.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),yt;!this._def.rest&&r.data.length>this._def.items.length&&(Ge(r,{code:De.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new Ra(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Tn.mergeArray(n,o)):Tn.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new ol({...this._def,rest:t})}}ol.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ol({items:e,typeName:vt.ZodTuple,rest:null,...Et(t)})};class Bm extends Rt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==tt.object)return Ge(r,{code:De.invalid_type,expected:tt.object,received:r.parsedType}),yt;const a=[],i=this._def.keyType,o=this._def.valueType;for(const c in r.data)a.push({key:i._parse(new Ra(r,c,r.path,c)),value:o._parse(new Ra(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?Tn.mergeObjectAsync(n,a):Tn.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Rt?new Bm({keyType:t,valueType:n,typeName:vt.ZodRecord,...Et(r)}):new Bm({keyType:ei.create(),valueType:t,typeName:vt.ZodRecord,...Et(n)})}}class t0 extends Rt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==tt.map)return Ge(r,{code:De.invalid_type,expected:tt.map,received:r.parsedType}),yt;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([c,d],h)=>({key:a._parse(new Ra(r,c,r.path,[h,"key"])),value:i._parse(new Ra(r,d,r.path,[h,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const d of o){const h=await d.key,m=await d.value;if(h.status==="aborted"||m.status==="aborted")return yt;(h.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(h.value,m.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const d of o){const h=d.key,m=d.value;if(h.status==="aborted"||m.status==="aborted")return yt;(h.status==="dirty"||m.status==="dirty")&&n.dirty(),c.set(h.value,m.value)}return{status:n.value,value:c}}}}t0.create=(e,t,n)=>new t0({valueType:t,keyType:e,typeName:vt.ZodMap,...Et(n)});class $c extends Rt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==tt.set)return Ge(r,{code:De.invalid_type,expected:tt.set,received:r.parsedType}),yt;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Ge(r,{code:De.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Ge(r,{code:De.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(d){const h=new Set;for(const m of d){if(m.status==="aborted")return yt;m.status==="dirty"&&n.dirty(),h.add(m.value)}return{status:n.value,value:h}}const c=[...r.data.values()].map((d,h)=>i._parse(new Ra(r,d,r.path,h)));return r.common.async?Promise.all(c).then(d=>o(d)):o(c)}min(t,n){return new $c({...this._def,minSize:{value:t,message:ot.toString(n)}})}max(t,n){return new $c({...this._def,maxSize:{value:t,message:ot.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}$c.create=(e,t)=>new $c({valueType:e,minSize:null,maxSize:null,typeName:vt.ZodSet,...Et(t)});class s0 extends Rt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}s0.create=(e,t)=>new s0({getter:e,typeName:vt.ZodLazy,...Et(t)});class n0 extends Rt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Ge(n,{received:n.data,code:De.invalid_literal,expected:this._def.value}),yt}return{status:"valid",value:t.data}}get value(){return this._def.value}}n0.create=(e,t)=>new n0({value:e,typeName:vt.ZodLiteral,...Et(t)});function IL(e,t){return new zc({values:e,typeName:vt.ZodEnum,...Et(t)})}class zc extends Rt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Ge(n,{expected:zt.joinValues(r),received:n.parsedType,code:De.invalid_type}),yt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Ge(n,{received:n.data,code:De.invalid_enum_value,options:r}),yt}return kr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return zc.create(t,{...this._def,...n})}exclude(t,n=this._def){return zc.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}zc.create=IL;class r0 extends Rt{_parse(t){const n=zt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==tt.string&&r.parsedType!==tt.number){const a=zt.objectValues(n);return Ge(r,{expected:zt.joinValues(a),received:r.parsedType,code:De.invalid_type}),yt}if(this._cache||(this._cache=new Set(zt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=zt.objectValues(n);return Ge(r,{received:r.data,code:De.invalid_enum_value,options:a}),yt}return kr(t.data)}get enum(){return this._def.values}}r0.create=(e,t)=>new r0({values:e,typeName:vt.ZodNativeEnum,...Et(t)});class Vm extends Rt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==tt.promise&&n.common.async===!1)return Ge(n,{code:De.invalid_type,expected:tt.promise,received:n.parsedType}),yt;const r=n.parsedType===tt.promise?n.data:Promise.resolve(n.data);return kr(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Vm.create=(e,t)=>new Vm({type:e,typeName:vt.ZodPromise,...Et(t)});class no extends Rt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===vt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Ge(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async c=>{if(n.value==="aborted")return yt;const d=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return d.status==="aborted"?yt:d.status==="dirty"||n.value==="dirty"?Gd(d.value):d});{if(n.value==="aborted")return yt;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?yt:c.status==="dirty"||n.value==="dirty"?Gd(c.value):c}}if(a.type==="refinement"){const o=c=>{const d=a.refinement(c,i);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?yt:(c.status==="dirty"&&n.dirty(),o(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?yt:(c.status==="dirty"&&n.dirty(),o(c.value).then(()=>({status:n.value,value:c.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ic(o))return yt;const c=a.transform(o.value,i);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ic(o)?Promise.resolve(a.transform(o.value,i)).then(c=>({status:n.value,value:c})):yt);zt.assertNever(a)}}no.create=(e,t,n)=>new no({schema:e,typeName:vt.ZodEffects,effect:t,...Et(n)});no.createWithPreprocess=(e,t,n)=>new no({schema:t,effect:{type:"preprocess",transform:e},typeName:vt.ZodEffects,...Et(n)});class Zi extends Rt{_parse(t){return this._getType(t)===tt.undefined?kr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Zi.create=(e,t)=>new Zi({innerType:e,typeName:vt.ZodOptional,...Et(t)});class Bc extends Rt{_parse(t){return this._getType(t)===tt.null?kr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Bc.create=(e,t)=>new Bc({innerType:e,typeName:vt.ZodNullable,...Et(t)});class a0 extends Rt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===tt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}a0.create=(e,t)=>new a0({innerType:e,typeName:vt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Et(t)});class i0 extends Rt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Fm(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new fi(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new fi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}i0.create=(e,t)=>new i0({innerType:e,typeName:vt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Et(t)});class o0 extends Rt{_parse(t){if(this._getType(t)!==tt.nan){const r=this._getOrReturnCtx(t);return Ge(r,{code:De.invalid_type,expected:tt.nan,received:r.parsedType}),yt}return{status:"valid",value:t.data}}}o0.create=e=>new o0({typeName:vt.ZodNaN,...Et(e)});class RY extends Rt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class lj extends Rt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?yt:i.status==="dirty"?(n.dirty(),Gd(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?yt:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new lj({in:t,out:n,typeName:vt.ZodPipeline})}}class l0 extends Rt{_parse(t){const n=this._def.innerType._parse(t),r=a=>(Ic(a)&&(a.value=Object.freeze(a.value)),a);return Fm(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}l0.create=(e,t)=>new l0({innerType:e,typeName:vt.ZodReadonly,...Et(t)});ys.lazycreate;var vt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(vt||(vt={}));const Ss=ei.create,ga=Dc.create;o0.create;Fc.create;const cc=Zy.create;Yu.create;Gy.create;Ky.create;Yy.create;const c0=Xy.create;Jy.create;so.create;Qy.create;const Um=Ea.create,DL=ys.create;ys.strictCreate;$m.create;zm.create;ol.create;const FL=Bm.create;t0.create;$c.create;s0.create;n0.create;const $L=zc.create;r0.create;Vm.create;no.create;Zi.create;Bc.create;no.createWithPreprocess;function LY(){this.__data__=[],this.size=0}var MY=LY;function IY(e,t){return e===t||e!==e&&t!==t}var zL=IY,DY=zL;function FY(e,t){for(var n=e.length;n--;)if(DY(e[n][0],t))return n;return-1}var rg=FY,$Y=rg,zY=Array.prototype,BY=zY.splice;function VY(e){var t=this.__data__,n=$Y(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():BY.call(t,n,1),--this.size,!0}var UY=VY,qY=rg;function HY(e){var t=this.__data__,n=qY(t,e);return n<0?void 0:t[n][1]}var WY=HY,ZY=rg;function GY(e){return ZY(this.__data__,e)>-1}var KY=GY,YY=rg;function XY(e,t){var n=this.__data__,r=YY(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var JY=XY,QY=MY,eX=UY,tX=WY,sX=KY,nX=JY;function ad(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ad.prototype.clear=QY;ad.prototype.delete=eX;ad.prototype.get=tX;ad.prototype.has=sX;ad.prototype.set=nX;var ag=ad,rX=ag;function aX(){this.__data__=new rX,this.size=0}var iX=aX;function oX(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var lX=oX;function cX(e){return this.__data__.get(e)}var dX=cX;function uX(e){return this.__data__.has(e)}var hX=uX,fX=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,BL=fX,mX=BL,pX=typeof self=="object"&&self&&self.Object===Object&&self,gX=mX||pX||Function("return this")(),pi=gX,xX=pi,vX=xX.Symbol,cj=vX,r2=cj,VL=Object.prototype,yX=VL.hasOwnProperty,bX=VL.toString,Fd=r2?r2.toStringTag:void 0;function wX(e){var t=yX.call(e,Fd),n=e[Fd];try{e[Fd]=void 0;var r=!0}catch{}var a=bX.call(e);return r&&(t?e[Fd]=n:delete e[Fd]),a}var jX=wX,_X=Object.prototype,NX=_X.toString;function SX(e){return NX.call(e)}var kX=SX,a2=cj,CX=jX,PX=kX,EX="[object Null]",TX="[object Undefined]",i2=a2?a2.toStringTag:void 0;function AX(e){return e==null?e===void 0?TX:EX:i2&&i2 in Object(e)?CX(e):PX(e)}var ig=AX;function OX(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var UL=OX,RX=ig,LX=UL,MX="[object AsyncFunction]",IX="[object Function]",DX="[object GeneratorFunction]",FX="[object Proxy]";function $X(e){if(!LX(e))return!1;var t=RX(e);return t==IX||t==DX||t==MX||t==FX}var qL=$X,zX=pi,BX=zX["__core-js_shared__"],VX=BX,Kx=VX,o2=function(){var e=/[^.]+$/.exec(Kx&&Kx.keys&&Kx.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function UX(e){return!!o2&&o2 in e}var qX=UX,HX=Function.prototype,WX=HX.toString;function ZX(e){if(e!=null){try{return WX.call(e)}catch{}try{return e+""}catch{}}return""}var HL=ZX,GX=qL,KX=qX,YX=UL,XX=HL,JX=/[\\^$.*+?()[\]{}|]/g,QX=/^\[object .+?Constructor\]$/,eJ=Function.prototype,tJ=Object.prototype,sJ=eJ.toString,nJ=tJ.hasOwnProperty,rJ=RegExp("^"+sJ.call(nJ).replace(JX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function aJ(e){if(!YX(e)||KX(e))return!1;var t=GX(e)?rJ:QX;return t.test(XX(e))}var iJ=aJ;function oJ(e,t){return e==null?void 0:e[t]}var lJ=oJ,cJ=iJ,dJ=lJ;function uJ(e,t){var n=dJ(e,t);return cJ(n)?n:void 0}var id=uJ,hJ=id,fJ=pi,mJ=hJ(fJ,"Map"),dj=mJ,pJ=id,gJ=pJ(Object,"create"),og=gJ,l2=og;function xJ(){this.__data__=l2?l2(null):{},this.size=0}var vJ=xJ;function yJ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var bJ=yJ,wJ=og,jJ="__lodash_hash_undefined__",_J=Object.prototype,NJ=_J.hasOwnProperty;function SJ(e){var t=this.__data__;if(wJ){var n=t[e];return n===jJ?void 0:n}return NJ.call(t,e)?t[e]:void 0}var kJ=SJ,CJ=og,PJ=Object.prototype,EJ=PJ.hasOwnProperty;function TJ(e){var t=this.__data__;return CJ?t[e]!==void 0:EJ.call(t,e)}var AJ=TJ,OJ=og,RJ="__lodash_hash_undefined__";function LJ(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=OJ&&t===void 0?RJ:t,this}var MJ=LJ,IJ=vJ,DJ=bJ,FJ=kJ,$J=AJ,zJ=MJ;function od(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}od.prototype.clear=IJ;od.prototype.delete=DJ;od.prototype.get=FJ;od.prototype.has=$J;od.prototype.set=zJ;var BJ=od,c2=BJ,VJ=ag,UJ=dj;function qJ(){this.size=0,this.__data__={hash:new c2,map:new(UJ||VJ),string:new c2}}var HJ=qJ;function WJ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var ZJ=WJ,GJ=ZJ;function KJ(e,t){var n=e.__data__;return GJ(t)?n[typeof t=="string"?"string":"hash"]:n.map}var lg=KJ,YJ=lg;function XJ(e){var t=YJ(this,e).delete(e);return this.size-=t?1:0,t}var JJ=XJ,QJ=lg;function eQ(e){return QJ(this,e).get(e)}var tQ=eQ,sQ=lg;function nQ(e){return sQ(this,e).has(e)}var rQ=nQ,aQ=lg;function iQ(e,t){var n=aQ(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var oQ=iQ,lQ=HJ,cQ=JJ,dQ=tQ,uQ=rQ,hQ=oQ;function ld(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ld.prototype.clear=lQ;ld.prototype.delete=cQ;ld.prototype.get=dQ;ld.prototype.has=uQ;ld.prototype.set=hQ;var WL=ld,fQ=ag,mQ=dj,pQ=WL,gQ=200;function xQ(e,t){var n=this.__data__;if(n instanceof fQ){var r=n.__data__;if(!mQ||r.length<gQ-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new pQ(r)}return n.set(e,t),this.size=n.size,this}var vQ=xQ,yQ=ag,bQ=iX,wQ=lX,jQ=dX,_Q=hX,NQ=vQ;function cd(e){var t=this.__data__=new yQ(e);this.size=t.size}cd.prototype.clear=bQ;cd.prototype.delete=wQ;cd.prototype.get=jQ;cd.prototype.has=_Q;cd.prototype.set=NQ;var SQ=cd,kQ="__lodash_hash_undefined__";function CQ(e){return this.__data__.set(e,kQ),this}var PQ=CQ;function EQ(e){return this.__data__.has(e)}var TQ=EQ,AQ=WL,OQ=PQ,RQ=TQ;function qm(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new AQ;++t<n;)this.add(e[t])}qm.prototype.add=qm.prototype.push=OQ;qm.prototype.has=RQ;var LQ=qm;function MQ(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var IQ=MQ;function DQ(e,t){return e.has(t)}var FQ=DQ,$Q=LQ,zQ=IQ,BQ=FQ,VQ=1,UQ=2;function qQ(e,t,n,r,a,i){var o=n&VQ,c=e.length,d=t.length;if(c!=d&&!(o&&d>c))return!1;var h=i.get(e),m=i.get(t);if(h&&m)return h==t&&m==e;var u=-1,f=!0,p=n&UQ?new $Q:void 0;for(i.set(e,t),i.set(t,e);++u<c;){var x=e[u],v=t[u];if(r)var y=o?r(v,x,u,t,e,i):r(x,v,u,e,t,i);if(y!==void 0){if(y)continue;f=!1;break}if(p){if(!zQ(t,function(w,b){if(!BQ(p,b)&&(x===w||a(x,w,n,r,i)))return p.push(b)})){f=!1;break}}else if(!(x===v||a(x,v,n,r,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var ZL=qQ,HQ=pi,WQ=HQ.Uint8Array,ZQ=WQ;function GQ(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var KQ=GQ;function YQ(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var XQ=YQ,d2=cj,u2=ZQ,JQ=zL,QQ=ZL,eee=KQ,tee=XQ,see=1,nee=2,ree="[object Boolean]",aee="[object Date]",iee="[object Error]",oee="[object Map]",lee="[object Number]",cee="[object RegExp]",dee="[object Set]",uee="[object String]",hee="[object Symbol]",fee="[object ArrayBuffer]",mee="[object DataView]",h2=d2?d2.prototype:void 0,Yx=h2?h2.valueOf:void 0;function pee(e,t,n,r,a,i,o){switch(n){case mee:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case fee:return!(e.byteLength!=t.byteLength||!i(new u2(e),new u2(t)));case ree:case aee:case lee:return JQ(+e,+t);case iee:return e.name==t.name&&e.message==t.message;case cee:case uee:return e==t+"";case oee:var c=eee;case dee:var d=r&see;if(c||(c=tee),e.size!=t.size&&!d)return!1;var h=o.get(e);if(h)return h==t;r|=nee,o.set(e,t);var m=QQ(c(e),c(t),r,a,i,o);return o.delete(e),m;case hee:if(Yx)return Yx.call(e)==Yx.call(t)}return!1}var gee=pee;function xee(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var vee=xee,yee=Array.isArray,uj=yee,bee=vee,wee=uj;function jee(e,t,n){var r=t(e);return wee(e)?r:bee(r,n(e))}var _ee=jee;function Nee(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var See=Nee;function kee(){return[]}var Cee=kee,Pee=See,Eee=Cee,Tee=Object.prototype,Aee=Tee.propertyIsEnumerable,f2=Object.getOwnPropertySymbols,Oee=f2?function(e){return e==null?[]:(e=Object(e),Pee(f2(e),function(t){return Aee.call(e,t)}))}:Eee,Ree=Oee;function Lee(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Mee=Lee;function Iee(e){return e!=null&&typeof e=="object"}var cg=Iee,Dee=ig,Fee=cg,$ee="[object Arguments]";function zee(e){return Fee(e)&&Dee(e)==$ee}var Bee=zee,m2=Bee,Vee=cg,GL=Object.prototype,Uee=GL.hasOwnProperty,qee=GL.propertyIsEnumerable,Hee=m2(function(){return arguments}())?m2:function(e){return Vee(e)&&Uee.call(e,"callee")&&!qee.call(e,"callee")},Wee=Hee,Hm={exports:{}};function Zee(){return!1}var Gee=Zee;Hm.exports;(function(e,t){var n=pi,r=Gee,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,c=o?n.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||r;e.exports=h})(Hm,Hm.exports);var KL=Hm.exports,Kee=9007199254740991,Yee=/^(?:0|[1-9]\d*)$/;function Xee(e,t){var n=typeof e;return t=t??Kee,!!t&&(n=="number"||n!="symbol"&&Yee.test(e))&&e>-1&&e%1==0&&e<t}var Jee=Xee,Qee=9007199254740991;function ete(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Qee}var YL=ete,tte=ig,ste=YL,nte=cg,rte="[object Arguments]",ate="[object Array]",ite="[object Boolean]",ote="[object Date]",lte="[object Error]",cte="[object Function]",dte="[object Map]",ute="[object Number]",hte="[object Object]",fte="[object RegExp]",mte="[object Set]",pte="[object String]",gte="[object WeakMap]",xte="[object ArrayBuffer]",vte="[object DataView]",yte="[object Float32Array]",bte="[object Float64Array]",wte="[object Int8Array]",jte="[object Int16Array]",_te="[object Int32Array]",Nte="[object Uint8Array]",Ste="[object Uint8ClampedArray]",kte="[object Uint16Array]",Cte="[object Uint32Array]",ns={};ns[yte]=ns[bte]=ns[wte]=ns[jte]=ns[_te]=ns[Nte]=ns[Ste]=ns[kte]=ns[Cte]=!0;ns[rte]=ns[ate]=ns[xte]=ns[ite]=ns[vte]=ns[ote]=ns[lte]=ns[cte]=ns[dte]=ns[ute]=ns[hte]=ns[fte]=ns[mte]=ns[pte]=ns[gte]=!1;function Pte(e){return nte(e)&&ste(e.length)&&!!ns[tte(e)]}var Ete=Pte;function Tte(e){return function(t){return e(t)}}var Ate=Tte,Wm={exports:{}};Wm.exports;(function(e,t){var n=BL,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,c=function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}}();e.exports=c})(Wm,Wm.exports);var Ote=Wm.exports,Rte=Ete,Lte=Ate,p2=Ote,g2=p2&&p2.isTypedArray,Mte=g2?Lte(g2):Rte,XL=Mte,Ite=Mee,Dte=Wee,Fte=uj,$te=KL,zte=Jee,Bte=XL,Vte=Object.prototype,Ute=Vte.hasOwnProperty;function qte(e,t){var n=Fte(e),r=!n&&Dte(e),a=!n&&!r&&$te(e),i=!n&&!r&&!a&&Bte(e),o=n||r||a||i,c=o?Ite(e.length,String):[],d=c.length;for(var h in e)(t||Ute.call(e,h))&&!(o&&(h=="length"||a&&(h=="offset"||h=="parent")||i&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||zte(h,d)))&&c.push(h);return c}var Hte=qte,Wte=Object.prototype;function Zte(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Wte;return e===n}var Gte=Zte;function Kte(e,t){return function(n){return e(t(n))}}var Yte=Kte,Xte=Yte,Jte=Xte(Object.keys,Object),Qte=Jte,ese=Gte,tse=Qte,sse=Object.prototype,nse=sse.hasOwnProperty;function rse(e){if(!ese(e))return tse(e);var t=[];for(var n in Object(e))nse.call(e,n)&&n!="constructor"&&t.push(n);return t}var ase=rse,ise=qL,ose=YL;function lse(e){return e!=null&&ose(e.length)&&!ise(e)}var cse=lse,dse=Hte,use=ase,hse=cse;function fse(e){return hse(e)?dse(e):use(e)}var mse=fse,pse=_ee,gse=Ree,xse=mse;function vse(e){return pse(e,xse,gse)}var yse=vse,x2=yse,bse=1,wse=Object.prototype,jse=wse.hasOwnProperty;function _se(e,t,n,r,a,i){var o=n&bse,c=x2(e),d=c.length,h=x2(t),m=h.length;if(d!=m&&!o)return!1;for(var u=d;u--;){var f=c[u];if(!(o?f in t:jse.call(t,f)))return!1}var p=i.get(e),x=i.get(t);if(p&&x)return p==t&&x==e;var v=!0;i.set(e,t),i.set(t,e);for(var y=o;++u<d;){f=c[u];var w=e[f],b=t[f];if(r)var _=o?r(b,w,f,t,e,i):r(w,b,f,e,t,i);if(!(_===void 0?w===b||a(w,b,n,r,i):_)){v=!1;break}y||(y=f=="constructor")}if(v&&!y){var N=e.constructor,k=t.constructor;N!=k&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof k=="function"&&k instanceof k)&&(v=!1)}return i.delete(e),i.delete(t),v}var Nse=_se,Sse=id,kse=pi,Cse=Sse(kse,"DataView"),Pse=Cse,Ese=id,Tse=pi,Ase=Ese(Tse,"Promise"),Ose=Ase,Rse=id,Lse=pi,Mse=Rse(Lse,"Set"),Ise=Mse,Dse=id,Fse=pi,$se=Dse(Fse,"WeakMap"),zse=$se,d0=Pse,u0=dj,h0=Ose,f0=Ise,m0=zse,JL=ig,dd=HL,v2="[object Map]",Bse="[object Object]",y2="[object Promise]",b2="[object Set]",w2="[object WeakMap]",j2="[object DataView]",Vse=dd(d0),Use=dd(u0),qse=dd(h0),Hse=dd(f0),Wse=dd(m0),So=JL;(d0&&So(new d0(new ArrayBuffer(1)))!=j2||u0&&So(new u0)!=v2||h0&&So(h0.resolve())!=y2||f0&&So(new f0)!=b2||m0&&So(new m0)!=w2)&&(So=function(e){var t=JL(e),n=t==Bse?e.constructor:void 0,r=n?dd(n):"";if(r)switch(r){case Vse:return j2;case Use:return v2;case qse:return y2;case Hse:return b2;case Wse:return w2}return t});var Zse=So,Xx=SQ,Gse=ZL,Kse=gee,Yse=Nse,_2=Zse,N2=uj,S2=KL,Xse=XL,Jse=1,k2="[object Arguments]",C2="[object Array]",gf="[object Object]",Qse=Object.prototype,P2=Qse.hasOwnProperty;function ene(e,t,n,r,a,i){var o=N2(e),c=N2(t),d=o?C2:_2(e),h=c?C2:_2(t);d=d==k2?gf:d,h=h==k2?gf:h;var m=d==gf,u=h==gf,f=d==h;if(f&&S2(e)){if(!S2(t))return!1;o=!0,m=!1}if(f&&!m)return i||(i=new Xx),o||Xse(e)?Gse(e,t,n,r,a,i):Kse(e,t,d,n,r,a,i);if(!(n&Jse)){var p=m&&P2.call(e,"__wrapped__"),x=u&&P2.call(t,"__wrapped__");if(p||x){var v=p?e.value():e,y=x?t.value():t;return i||(i=new Xx),a(v,y,n,r,i)}}return f?(i||(i=new Xx),Yse(e,t,n,r,a,i)):!1}var tne=ene,sne=tne,E2=cg;function QL(e,t,n,r,a){return e===t?!0:e==null||t==null||!E2(e)&&!E2(t)?e!==e&&t!==t:sne(e,t,n,r,QL,a)}var nne=QL,rne=nne;function ane(e,t){return rne(e,t)}var ine=ane,e5={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(r,a){e.exports=a()})(typeof self<"u"?self:Ta,function(){return function(n){var r={};function a(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=n,a.c=r,a.d=function(i,o,c){a.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:c})},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=109)}([function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(17),o=a(18),c=a(19),d=a(45),h=a(46),m=a(47),u=a(48),f=a(49),p=a(12),x=a(32),v=a(33),y=a(31),w=a(1),b={Scope:w.Scope,create:w.create,find:w.find,query:w.query,register:w.register,Container:i.default,Format:o.default,Leaf:c.default,Embed:u.default,Scroll:d.default,Block:m.default,Inline:h.default,Text:f.default,Attributor:{Attribute:p.default,Class:x.default,Style:v.default,Store:y.default}};r.default=b},function(n,r,a){var i=this&&this.__extends||function(){var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,b){w.__proto__=b}||function(w,b){for(var _ in b)b.hasOwnProperty(_)&&(w[_]=b[_])};return function(w,b){y(w,b);function _(){this.constructor=w}w.prototype=b===null?Object.create(b):(_.prototype=b.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(y){i(w,y);function w(b){var _=this;return b="[Parchment] "+b,_=y.call(this,b)||this,_.message=b,_.name=_.constructor.name,_}return w}(Error);r.ParchmentError=o;var c={},d={},h={},m={};r.DATA_KEY="__blot";var u;(function(y){y[y.TYPE=3]="TYPE",y[y.LEVEL=12]="LEVEL",y[y.ATTRIBUTE=13]="ATTRIBUTE",y[y.BLOT=14]="BLOT",y[y.INLINE=7]="INLINE",y[y.BLOCK=11]="BLOCK",y[y.BLOCK_BLOT=10]="BLOCK_BLOT",y[y.INLINE_BLOT=6]="INLINE_BLOT",y[y.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",y[y.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",y[y.ANY=15]="ANY"})(u=r.Scope||(r.Scope={}));function f(y,w){var b=x(y);if(b==null)throw new o("Unable to create "+y+" blot");var _=b,N=y instanceof Node||y.nodeType===Node.TEXT_NODE?y:_.create(w);return new _(N,w)}r.create=f;function p(y,w){return w===void 0&&(w=!1),y==null?null:y[r.DATA_KEY]!=null?y[r.DATA_KEY].blot:w?p(y.parentNode,w):null}r.find=p;function x(y,w){w===void 0&&(w=u.ANY);var b;if(typeof y=="string")b=m[y]||c[y];else if(y instanceof Text||y.nodeType===Node.TEXT_NODE)b=m.text;else if(typeof y=="number")y&u.LEVEL&u.BLOCK?b=m.block:y&u.LEVEL&u.INLINE&&(b=m.inline);else if(y instanceof HTMLElement){var _=(y.getAttribute("class")||"").split(/\s+/);for(var N in _)if(b=d[_[N]],b)break;b=b||h[y.tagName]}return b==null?null:w&u.LEVEL&b.scope&&w&u.TYPE&b.scope?b:null}r.query=x;function v(){for(var y=[],w=0;w<arguments.length;w++)y[w]=arguments[w];if(y.length>1)return y.map(function(N){return v(N)});var b=y[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new o("Invalid definition");if(b.blotName==="abstract")throw new o("Cannot register abstract class");if(m[b.blotName||b.attrName]=b,typeof b.keyName=="string")c[b.keyName]=b;else if(b.className!=null&&(d[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(N){return N.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var _=Array.isArray(b.tagName)?b.tagName:[b.tagName];_.forEach(function(N){(h[N]==null||b.className==null)&&(h[N]=b)})}return b}r.register=v},function(n,r,a){var i=a(51),o=a(11),c=a(3),d=a(20),h="\0",m=function(u){Array.isArray(u)?this.ops=u:u!=null&&Array.isArray(u.ops)?this.ops=u.ops:this.ops=[]};m.prototype.insert=function(u,f){var p={};return u.length===0?this:(p.insert=u,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p))},m.prototype.delete=function(u){return u<=0?this:this.push({delete:u})},m.prototype.retain=function(u,f){if(u<=0)return this;var p={retain:u};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p)},m.prototype.push=function(u){var f=this.ops.length,p=this.ops[f-1];if(u=c(!0,{},u),typeof p=="object"){if(typeof u.delete=="number"&&typeof p.delete=="number")return this.ops[f-1]={delete:p.delete+u.delete},this;if(typeof p.delete=="number"&&u.insert!=null&&(f-=1,p=this.ops[f-1],typeof p!="object"))return this.ops.unshift(u),this;if(o(u.attributes,p.attributes)){if(typeof u.insert=="string"&&typeof p.insert=="string")return this.ops[f-1]={insert:p.insert+u.insert},typeof u.attributes=="object"&&(this.ops[f-1].attributes=u.attributes),this;if(typeof u.retain=="number"&&typeof p.retain=="number")return this.ops[f-1]={retain:p.retain+u.retain},typeof u.attributes=="object"&&(this.ops[f-1].attributes=u.attributes),this}}return f===this.ops.length?this.ops.push(u):this.ops.splice(f,0,u),this},m.prototype.chop=function(){var u=this.ops[this.ops.length-1];return u&&u.retain&&!u.attributes&&this.ops.pop(),this},m.prototype.filter=function(u){return this.ops.filter(u)},m.prototype.forEach=function(u){this.ops.forEach(u)},m.prototype.map=function(u){return this.ops.map(u)},m.prototype.partition=function(u){var f=[],p=[];return this.forEach(function(x){var v=u(x)?f:p;v.push(x)}),[f,p]},m.prototype.reduce=function(u,f){return this.ops.reduce(u,f)},m.prototype.changeLength=function(){return this.reduce(function(u,f){return f.insert?u+d.length(f):f.delete?u-f.delete:u},0)},m.prototype.length=function(){return this.reduce(function(u,f){return u+d.length(f)},0)},m.prototype.slice=function(u,f){u=u||0,typeof f!="number"&&(f=1/0);for(var p=[],x=d.iterator(this.ops),v=0;v<f&&x.hasNext();){var y;v<u?y=x.next(u-v):(y=x.next(f-v),p.push(y)),v+=d.length(y)}return new m(p)},m.prototype.compose=function(u){var f=d.iterator(this.ops),p=d.iterator(u.ops),x=[],v=p.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var y=v.retain;f.peekType()==="insert"&&f.peekLength()<=y;)y-=f.peekLength(),x.push(f.next());v.retain-y>0&&p.next(v.retain-y)}for(var w=new m(x);f.hasNext()||p.hasNext();)if(p.peekType()==="insert")w.push(p.next());else if(f.peekType()==="delete")w.push(f.next());else{var b=Math.min(f.peekLength(),p.peekLength()),_=f.next(b),N=p.next(b);if(typeof N.retain=="number"){var k={};typeof _.retain=="number"?k.retain=b:k.insert=_.insert;var E=d.attributes.compose(_.attributes,N.attributes,typeof _.retain=="number");if(E&&(k.attributes=E),w.push(k),!p.hasNext()&&o(w.ops[w.ops.length-1],k)){var T=new m(f.rest());return w.concat(T).chop()}}else typeof N.delete=="number"&&typeof _.retain=="number"&&w.push(N)}return w.chop()},m.prototype.concat=function(u){var f=new m(this.ops.slice());return u.ops.length>0&&(f.push(u.ops[0]),f.ops=f.ops.concat(u.ops.slice(1))),f},m.prototype.diff=function(u,f){if(this.ops===u.ops)return new m;var p=[this,u].map(function(b){return b.map(function(_){if(_.insert!=null)return typeof _.insert=="string"?_.insert:h;var N=b===u?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),x=new m,v=i(p[0],p[1],f),y=d.iterator(this.ops),w=d.iterator(u.ops);return v.forEach(function(b){for(var _=b[1].length;_>0;){var N=0;switch(b[0]){case i.INSERT:N=Math.min(w.peekLength(),_),x.push(w.next(N));break;case i.DELETE:N=Math.min(_,y.peekLength()),y.next(N),x.delete(N);break;case i.EQUAL:N=Math.min(y.peekLength(),w.peekLength(),_);var k=y.next(N),E=w.next(N);o(k.insert,E.insert)?x.retain(N,d.attributes.diff(k.attributes,E.attributes)):x.push(E).delete(N);break}_-=N}}),x.chop()},m.prototype.eachLine=function(u,f){f=f||`
`;for(var p=d.iterator(this.ops),x=new m,v=0;p.hasNext();){if(p.peekType()!=="insert")return;var y=p.peek(),w=d.length(y)-p.peekLength(),b=typeof y.insert=="string"?y.insert.indexOf(f,w)-w:-1;if(b<0)x.push(p.next());else if(b>0)x.push(p.next(b));else{if(u(x,p.next(1).attributes||{},v)===!1)return;v+=1,x=new m}}x.length()>0&&u(x,{},v)},m.prototype.transform=function(u,f){if(f=!!f,typeof u=="number")return this.transformPosition(u,f);for(var p=d.iterator(this.ops),x=d.iterator(u.ops),v=new m;p.hasNext()||x.hasNext();)if(p.peekType()==="insert"&&(f||x.peekType()!=="insert"))v.retain(d.length(p.next()));else if(x.peekType()==="insert")v.push(x.next());else{var y=Math.min(p.peekLength(),x.peekLength()),w=p.next(y),b=x.next(y);if(w.delete)continue;b.delete?v.push(b):v.retain(y,d.attributes.transform(w.attributes,b.attributes,f))}return v.chop()},m.prototype.transformPosition=function(u,f){f=!!f;for(var p=d.iterator(this.ops),x=0;p.hasNext()&&x<=u;){var v=p.peekLength(),y=p.peekType();if(p.next(),y==="delete"){u-=Math.min(v,u-x);continue}else y==="insert"&&(x<u||!f)&&(u+=v);x+=v}return u},n.exports=m},function(n,r){var a=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=function(p){return typeof Array.isArray=="function"?Array.isArray(p):i.call(p)==="[object Array]"},h=function(p){if(!p||i.call(p)!=="[object Object]")return!1;var x=a.call(p,"constructor"),v=p.constructor&&p.constructor.prototype&&a.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!x&&!v)return!1;var y;for(y in p);return typeof y>"u"||a.call(p,y)},m=function(p,x){o&&x.name==="__proto__"?o(p,x.name,{enumerable:!0,configurable:!0,value:x.newValue,writable:!0}):p[x.name]=x.newValue},u=function(p,x){if(x==="__proto__")if(a.call(p,x)){if(c)return c(p,x).value}else return;return p[x]};n.exports=function f(){var p,x,v,y,w,b,_=arguments[0],N=1,k=arguments.length,E=!1;for(typeof _=="boolean"&&(E=_,_=arguments[1]||{},N=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});N<k;++N)if(p=arguments[N],p!=null)for(x in p)v=u(_,x),y=u(p,x),_!==y&&(E&&y&&(h(y)||(w=d(y)))?(w?(w=!1,b=v&&d(v)?v:[]):b=v&&h(v)?v:{},m(_,{name:x,newValue:f(E,b,y)})):typeof y<"u"&&m(_,{name:x,newValue:y}));return _}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var i=function(){function A(C,z){for(var P=0;P<z.length;P++){var O=z[P];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}return function(C,z,P){return z&&A(C.prototype,z),P&&A(C,P),C}}(),o=function A(C,z,P){C===null&&(C=Function.prototype);var O=Object.getOwnPropertyDescriptor(C,z);if(O===void 0){var Y=Object.getPrototypeOf(C);return Y===null?void 0:A(Y,z,P)}else{if("value"in O)return O.value;var J=O.get;return J===void 0?void 0:J.call(P)}},c=a(3),d=_(c),h=a(2),m=_(h),u=a(0),f=_(u),p=a(16),x=_(p),v=a(6),y=_(v),w=a(7),b=_(w);function _(A){return A&&A.__esModule?A:{default:A}}function N(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function k(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:A}function E(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(A,C):A.__proto__=C)}var T=1,R=function(A){E(C,A);function C(){return N(this,C),k(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return i(C,[{key:"attach",value:function(){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new m.default().insert(this.value(),(0,d.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(P,O){var Y=f.default.query(P,f.default.Scope.BLOCK_ATTRIBUTE);Y!=null&&this.attributes.attribute(Y,O)}},{key:"formatAt",value:function(P,O,Y,J){this.format(Y,J)}},{key:"insertAt",value:function(P,O,Y){if(typeof O=="string"&&O.endsWith(`
`)){var J=f.default.create($.blotName);this.parent.insertBefore(J,P===0?this:this.next),J.insertAt(0,O.slice(0,-1))}else o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,P,O,Y)}}]),C}(f.default.Embed);R.scope=f.default.Scope.BLOCK_BLOT;var $=function(A){E(C,A);function C(z){N(this,C);var P=k(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,z));return P.cache={},P}return i(C,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(P,O){return O.length()===0?P:P.insert(O.value(),M(O))},new m.default).insert(`
`,M(this))),this.cache.delta}},{key:"deleteAt",value:function(P,O){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"deleteAt",this).call(this,P,O),this.cache={}}},{key:"formatAt",value:function(P,O,Y,J){O<=0||(f.default.query(Y,f.default.Scope.BLOCK)?P+O===this.length()&&this.format(Y,J):o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"formatAt",this).call(this,P,Math.min(O,this.length()-P-1),Y,J),this.cache={})}},{key:"insertAt",value:function(P,O,Y){if(Y!=null)return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,P,O,Y);if(O.length!==0){var J=O.split(`
`),G=J.shift();G.length>0&&(P<this.length()-1||this.children.tail==null?o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,Math.min(P,this.length()-1),G):this.children.tail.insertAt(this.children.tail.length(),G),this.cache={});var F=this;J.reduce(function(I,V){return F=F.split(I,!0),F.insertAt(0,V),V.length},P+G.length)}}},{key:"insertBefore",value:function(P,O){var Y=this.children.head;o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,P,O),Y instanceof x.default&&Y.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"length",this).call(this)+T),this.cache.length}},{key:"moveChildren",value:function(P,O){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"moveChildren",this).call(this,P,O),this.cache={}}},{key:"optimize",value:function(P){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,P),this.cache={}}},{key:"path",value:function(P){return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"path",this).call(this,P,!0)}},{key:"removeChild",value:function(P){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"removeChild",this).call(this,P),this.cache={}}},{key:"split",value:function(P){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(O&&(P===0||P>=this.length()-T)){var Y=this.clone();return P===0?(this.parent.insertBefore(Y,this),this):(this.parent.insertBefore(Y,this.next),Y)}else{var J=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"split",this).call(this,P,O);return this.cache={},J}}}]),C}(f.default.Block);$.blotName="block",$.tagName="P",$.defaultChild="break",$.allowedChildren=[y.default,f.default.Embed,b.default];function M(A){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return A==null||(typeof A.formats=="function"&&(C=(0,d.default)(C,A.formats())),A.parent==null||A.parent.blotName=="scroll"||A.parent.statics.scope!==A.statics.scope)?C:M(A.parent,C)}r.bubbleFormats=M,r.BlockEmbed=R,r.default=$},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},o=function(){function F(I,V){var H=[],U=!0,q=!1,K=void 0;try{for(var B=I[Symbol.iterator](),W;!(U=(W=B.next()).done)&&(H.push(W.value),!(V&&H.length===V));U=!0);}catch(oe){q=!0,K=oe}finally{try{!U&&B.return&&B.return()}finally{if(q)throw K}}return H}return function(I,V){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return F(I,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function F(I,V){for(var H=0;H<V.length;H++){var U=V[H];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(I,U.key,U)}}return function(I,V,H){return V&&F(I.prototype,V),H&&F(I,H),I}}();a(50);var d=a(2),h=M(d),m=a(14),u=M(m),f=a(8),p=M(f),x=a(9),v=M(x),y=a(0),w=M(y),b=a(15),_=M(b),N=a(3),k=M(N),E=a(10),T=M(E),R=a(34),$=M(R);function M(F){return F&&F.__esModule?F:{default:F}}function A(F,I,V){return I in F?Object.defineProperty(F,I,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[I]=V,F}function C(F,I){if(!(F instanceof I))throw new TypeError("Cannot call a class as a function")}var z=(0,T.default)("quill"),P=function(){c(F,null,[{key:"debug",value:function(V){V===!0&&(V="log"),T.default.level(V)}},{key:"find",value:function(V){return V.__quill||w.default.find(V)}},{key:"import",value:function(V){return this.imports[V]==null&&z.error("Cannot import "+V+". Are you sure it was registered?"),this.imports[V]}},{key:"register",value:function(V,H){var U=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof V!="string"){var K=V.attrName||V.blotName;typeof K=="string"?this.register("formats/"+K,V,H):Object.keys(V).forEach(function(B){U.register(B,V[B],H)})}else this.imports[V]!=null&&!q&&z.warn("Overwriting "+V+" with",H),this.imports[V]=H,(V.startsWith("blots/")||V.startsWith("formats/"))&&H.blotName!=="abstract"?w.default.register(H):V.startsWith("modules")&&typeof H.register=="function"&&H.register()}}]);function F(I){var V=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(C(this,F),this.options=O(I,H),this.container=this.options.container,this.container==null)return z.error("Invalid Quill container",I);this.options.debug&&F.debug(this.options.debug);var U=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=w.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new u.default(this.scroll),this.selection=new _.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(K){K===p.default.events.TEXT_CHANGE&&V.root.classList.toggle("ql-blank",V.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(K,B){var W=V.selection.lastRange,oe=W&&W.length===0?W.index:void 0;Y.call(V,function(){return V.editor.update(null,B,oe)},K)});var q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+U+"<p><br></p></div>");this.setContents(q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(F,[{key:"addContainer",value:function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof V=="string"){var U=V;V=document.createElement("div"),V.classList.add(U)}return this.container.insertBefore(V,H),V}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(V,H,U){var q=this,K=J(V,H,U),B=o(K,4);return V=B[0],H=B[1],U=B[3],Y.call(this,function(){return q.editor.deleteText(V,H)},U,V,-1*H)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(V),this.container.classList.toggle("ql-disabled",!V)}},{key:"focus",value:function(){var V=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=V,this.scrollIntoView()}},{key:"format",value:function(V,H){var U=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return Y.call(this,function(){var K=U.getSelection(!0),B=new h.default;if(K==null)return B;if(w.default.query(V,w.default.Scope.BLOCK))B=U.editor.formatLine(K.index,K.length,A({},V,H));else{if(K.length===0)return U.selection.format(V,H),B;B=U.editor.formatText(K.index,K.length,A({},V,H))}return U.setSelection(K,p.default.sources.SILENT),B},q)}},{key:"formatLine",value:function(V,H,U,q,K){var B=this,W=void 0,oe=J(V,H,U,q,K),X=o(oe,4);return V=X[0],H=X[1],W=X[2],K=X[3],Y.call(this,function(){return B.editor.formatLine(V,H,W)},K,V,0)}},{key:"formatText",value:function(V,H,U,q,K){var B=this,W=void 0,oe=J(V,H,U,q,K),X=o(oe,4);return V=X[0],H=X[1],W=X[2],K=X[3],Y.call(this,function(){return B.editor.formatText(V,H,W)},K,V,0)}},{key:"getBounds",value:function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=void 0;typeof V=="number"?U=this.selection.getBounds(V,H):U=this.selection.getBounds(V.index,V.length);var q=this.container.getBoundingClientRect();return{bottom:U.bottom-q.top,height:U.height,left:U.left-q.left,right:U.right-q.left,top:U.top-q.top,width:U.width}}},{key:"getContents",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,U=J(V,H),q=o(U,2);return V=q[0],H=q[1],this.editor.getContents(V,H)}},{key:"getFormat",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof V=="number"?this.editor.getFormat(V,H):this.editor.getFormat(V.index,V.length)}},{key:"getIndex",value:function(V){return V.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(V){return this.scroll.leaf(V)}},{key:"getLine",value:function(V){return this.scroll.line(V)}},{key:"getLines",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof V!="number"?this.scroll.lines(V.index,V.length):this.scroll.lines(V,H)}},{key:"getModule",value:function(V){return this.theme.modules[V]}},{key:"getSelection",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return V&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,U=J(V,H),q=o(U,2);return V=q[0],H=q[1],this.editor.getText(V,H)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(V,H,U){var q=this,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:F.sources.API;return Y.call(this,function(){return q.editor.insertEmbed(V,H,U)},K,V)}},{key:"insertText",value:function(V,H,U,q,K){var B=this,W=void 0,oe=J(V,0,U,q,K),X=o(oe,4);return V=X[0],W=X[2],K=X[3],Y.call(this,function(){return B.editor.insertText(V,H,W)},K,V,H.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(V,H,U){this.clipboard.dangerouslyPasteHTML(V,H,U)}},{key:"removeFormat",value:function(V,H,U){var q=this,K=J(V,H,U),B=o(K,4);return V=B[0],H=B[1],U=B[3],Y.call(this,function(){return q.editor.removeFormat(V,H)},U,V)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(V){var H=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Y.call(this,function(){V=new h.default(V);var q=H.getLength(),K=H.editor.deleteText(0,q),B=H.editor.applyDelta(V),W=B.ops[B.ops.length-1];W!=null&&typeof W.insert=="string"&&W.insert[W.insert.length-1]===`
`&&(H.editor.deleteText(H.getLength()-1,1),B.delete(1));var oe=K.compose(B);return oe},U)}},{key:"setSelection",value:function(V,H,U){if(V==null)this.selection.setRange(null,H||F.sources.API);else{var q=J(V,H,U),K=o(q,4);V=K[0],H=K[1],U=K[3],this.selection.setRange(new b.Range(V,H),U),U!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,U=new h.default().insert(V);return this.setContents(U,H)}},{key:"update",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,H=this.scroll.update(V);return this.selection.update(V),H}},{key:"updateContents",value:function(V){var H=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Y.call(this,function(){return V=new h.default(V),H.editor.applyDelta(V,U)},U,!0)}}]),F}();P.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},P.events=p.default.events,P.sources=p.default.sources,P.version="1.3.7",P.imports={delta:h.default,parchment:w.default,"core/module":v.default,"core/theme":$.default};function O(F,I){if(I=(0,k.default)(!0,{container:F,modules:{clipboard:!0,keyboard:!0,history:!0}},I),!I.theme||I.theme===P.DEFAULTS.theme)I.theme=$.default;else if(I.theme=P.import("themes/"+I.theme),I.theme==null)throw new Error("Invalid theme "+I.theme+". Did you register it?");var V=(0,k.default)(!0,{},I.theme.DEFAULTS);[V,I].forEach(function(q){q.modules=q.modules||{},Object.keys(q.modules).forEach(function(K){q.modules[K]===!0&&(q.modules[K]={})})});var H=Object.keys(V.modules).concat(Object.keys(I.modules)),U=H.reduce(function(q,K){var B=P.import("modules/"+K);return B==null?z.error("Cannot load "+K+" module. Are you sure you registered it?"):q[K]=B.DEFAULTS||{},q},{});return I.modules!=null&&I.modules.toolbar&&I.modules.toolbar.constructor!==Object&&(I.modules.toolbar={container:I.modules.toolbar}),I=(0,k.default)(!0,{},P.DEFAULTS,{modules:U},V,I),["bounds","container","scrollingContainer"].forEach(function(q){typeof I[q]=="string"&&(I[q]=document.querySelector(I[q]))}),I.modules=Object.keys(I.modules).reduce(function(q,K){return I.modules[K]&&(q[K]=I.modules[K]),q},{}),I}function Y(F,I,V,H){if(this.options.strict&&!this.isEnabled()&&I===p.default.sources.USER)return new h.default;var U=V==null?null:this.getSelection(),q=this.editor.delta,K=F();if(U!=null&&(V===!0&&(V=U.index),H==null?U=G(U,K,I):H!==0&&(U=G(U,V,H,I)),this.setSelection(U,p.default.sources.SILENT)),K.length()>0){var B,W=[p.default.events.TEXT_CHANGE,K,q,I];if((B=this.emitter).emit.apply(B,[p.default.events.EDITOR_CHANGE].concat(W)),I!==p.default.sources.SILENT){var oe;(oe=this.emitter).emit.apply(oe,W)}}return K}function J(F,I,V,H,U){var q={};return typeof F.index=="number"&&typeof F.length=="number"?typeof I!="number"?(U=H,H=V,V=I,I=F.length,F=F.index):(I=F.length,F=F.index):typeof I!="number"&&(U=H,H=V,V=I,I=0),(typeof V>"u"?"undefined":i(V))==="object"?(q=V,U=H):typeof V=="string"&&(H!=null?q[V]=H:U=V),U=U||p.default.sources.API,[F,I,q,U]}function G(F,I,V,H){if(F==null)return null;var U=void 0,q=void 0;if(I instanceof h.default){var K=[F.index,F.index+F.length].map(function(X){return I.transformPosition(X,H!==p.default.sources.USER)}),B=o(K,2);U=B[0],q=B[1]}else{var W=[F.index,F.index+F.length].map(function(X){return X<I||X===I&&H===p.default.sources.USER?X:V>=0?X+V:Math.max(I,X+V)}),oe=o(W,2);U=oe[0],q=oe[1]}return new b.Range(U,q-U)}r.expandConfig=O,r.overload=J,r.default=P},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function y(w,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,b,_){return b&&y(w.prototype,b),_&&y(w,_),w}}(),o=function y(w,b,_){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,b);if(N===void 0){var k=Object.getPrototypeOf(w);return k===null?void 0:y(k,b,_)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(_)}},c=a(7),d=u(c),h=a(0),m=u(h);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function p(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function x(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var v=function(y){x(w,y);function w(){return f(this,w),p(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"formatAt",value:function(_,N,k,E){if(w.compare(this.statics.blotName,k)<0&&m.default.query(k,m.default.Scope.BLOT)){var T=this.isolate(_,N);E&&T.wrap(k,E)}else o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"formatAt",this).call(this,_,N,k,E)}},{key:"optimize",value:function(_){if(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,_),this.parent instanceof w&&w.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(_,N){var k=w.order.indexOf(_),E=w.order.indexOf(N);return k>=0||E>=0?k-E:_===N?0:_<N?-1:1}}]),w}(m.default.Inline);v.allowedChildren=[v,m.default.Embed,d.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=c(i);function c(f){return f&&f.__esModule?f:{default:f}}function d(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function h(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function m(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var u=function(f){m(p,f);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default.Text);r.default=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function b(_,N){for(var k=0;k<N.length;k++){var E=N[k];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,N,k){return N&&b(_.prototype,N),k&&b(_,k),_}}(),o=function b(_,N,k){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,N);if(E===void 0){var T=Object.getPrototypeOf(_);return T===null?void 0:b(T,N,k)}else{if("value"in E)return E.value;var R=E.get;return R===void 0?void 0:R.call(k)}},c=a(54),d=u(c),h=a(10),m=u(h);function u(b){return b&&b.__esModule?b:{default:b}}function f(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function p(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:b}function x(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}var v=(0,m.default)("quill:events"),y=["selectionchange","mousedown","mouseup","click"];y.forEach(function(b){document.addEventListener(b,function(){for(var _=arguments.length,N=Array(_),k=0;k<_;k++)N[k]=arguments[k];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(E){if(E.__quill&&E.__quill.emitter){var T;(T=E.__quill.emitter).handleDOM.apply(T,N)}})})});var w=function(b){x(_,b);function _(){f(this,_);var N=p(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));return N.listeners={},N.on("error",v.error),N}return i(_,[{key:"emit",value:function(){v.log.apply(v,arguments),o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(k){for(var E=arguments.length,T=Array(E>1?E-1:0),R=1;R<E;R++)T[R-1]=arguments[R];(this.listeners[k.type]||[]).forEach(function($){var M=$.node,A=$.handler;(k.target===M||M.contains(k.target))&&A.apply(void 0,[k].concat(T))})}},{key:"listenDOM",value:function(k,E,T){this.listeners[k]||(this.listeners[k]=[]),this.listeners[k].push({node:E,handler:T})}}]),_}(d.default);w.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},w.sources={API:"api",SILENT:"silent",USER:"user"},r.default=w},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});function i(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function c(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,c),this.quill=d,this.options=h};o.DEFAULTS={},r.default=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function c(h){if(i.indexOf(h)<=i.indexOf(o)){for(var m,u=arguments.length,f=Array(u>1?u-1:0),p=1;p<u;p++)f[p-1]=arguments[p];(m=console)[h].apply(m,f)}}function d(h){return i.reduce(function(m,u){return m[u]=c.bind(console,u,h),m},{})}c.level=d.level=function(h){o=h},r.default=d},function(n,r,a){var i=Array.prototype.slice,o=a(52),c=a(53),d=n.exports=function(f,p,x){return x||(x={}),f===p?!0:f instanceof Date&&p instanceof Date?f.getTime()===p.getTime():!f||!p||typeof f!="object"&&typeof p!="object"?x.strict?f===p:f==p:u(f,p,x)};function h(f){return f==null}function m(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function u(f,p,x){var v,y;if(h(f)||h(p)||f.prototype!==p.prototype)return!1;if(c(f))return c(p)?(f=i.call(f),p=i.call(p),d(f,p,x)):!1;if(m(f)){if(!m(p)||f.length!==p.length)return!1;for(v=0;v<f.length;v++)if(f[v]!==p[v])return!1;return!0}try{var w=o(f),b=o(p)}catch{return!1}if(w.length!=b.length)return!1;for(w.sort(),b.sort(),v=w.length-1;v>=0;v--)if(w[v]!=b[v])return!1;for(v=w.length-1;v>=0;v--)if(y=w[v],!d(f[y],p[y],x))return!1;return typeof f==typeof p}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(1),o=function(){function c(d,h,m){m===void 0&&(m={}),this.attrName=d,this.keyName=h;var u=i.Scope.TYPE&i.Scope.ATTRIBUTE;m.scope!=null?this.scope=m.scope&i.Scope.LEVEL|u:this.scope=i.Scope.ATTRIBUTE,m.whitelist!=null&&(this.whitelist=m.whitelist)}return c.keys=function(d){return[].map.call(d.attributes,function(h){return h.name})},c.prototype.add=function(d,h){return this.canAdd(d,h)?(d.setAttribute(this.keyName,h),!0):!1},c.prototype.canAdd=function(d,h){var m=i.query(d,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return m==null?!1:this.whitelist==null?!0:typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1},c.prototype.remove=function(d){d.removeAttribute(this.keyName)},c.prototype.value=function(d){var h=d.getAttribute(this.keyName);return this.canAdd(d,h)&&h?h:""},c}();r.default=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var i=function(){function R($,M){var A=[],C=!0,z=!1,P=void 0;try{for(var O=$[Symbol.iterator](),Y;!(C=(Y=O.next()).done)&&(A.push(Y.value),!(M&&A.length===M));C=!0);}catch(J){z=!0,P=J}finally{try{!C&&O.return&&O.return()}finally{if(z)throw P}}return A}return function($,M){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return R($,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function R($,M){for(var A=0;A<M.length;A++){var C=M[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty($,C.key,C)}}return function($,M,A){return M&&R($.prototype,M),A&&R($,A),$}}(),c=function R($,M,A){$===null&&($=Function.prototype);var C=Object.getOwnPropertyDescriptor($,M);if(C===void 0){var z=Object.getPrototypeOf($);return z===null?void 0:R(z,M,A)}else{if("value"in C)return C.value;var P=C.get;return P===void 0?void 0:P.call(A)}},d=a(2),h=b(d),m=a(0),u=b(m),f=a(4),p=b(f),x=a(6),v=b(x),y=a(7),w=b(y);function b(R){return R&&R.__esModule?R:{default:R}}function _(R,$){if(!(R instanceof $))throw new TypeError("Cannot call a class as a function")}function N(R,$){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $&&(typeof $=="object"||typeof $=="function")?$:R}function k(R,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof $);R.prototype=Object.create($&&$.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),$&&(Object.setPrototypeOf?Object.setPrototypeOf(R,$):R.__proto__=$)}var E=function(R){k($,R);function $(){return _(this,$),N(this,($.__proto__||Object.getPrototypeOf($)).apply(this,arguments))}return $}(v.default);E.blotName="code",E.tagName="CODE";var T=function(R){k($,R);function $(){return _(this,$),N(this,($.__proto__||Object.getPrototypeOf($)).apply(this,arguments))}return o($,[{key:"delta",value:function(){var A=this,C=this.domNode.textContent;return C.endsWith(`
`)&&(C=C.slice(0,-1)),C.split(`
`).reduce(function(z,P){return z.insert(P).insert(`
`,A.formats())},new h.default)}},{key:"format",value:function(A,C){if(!(A===this.statics.blotName&&C)){var z=this.descendant(w.default,this.length()-1),P=i(z,1),O=P[0];O!=null&&O.deleteAt(O.length()-1,1),c($.prototype.__proto__||Object.getPrototypeOf($.prototype),"format",this).call(this,A,C)}}},{key:"formatAt",value:function(A,C,z,P){if(C!==0&&!(u.default.query(z,u.default.Scope.BLOCK)==null||z===this.statics.blotName&&P===this.statics.formats(this.domNode))){var O=this.newlineIndex(A);if(!(O<0||O>=A+C)){var Y=this.newlineIndex(A,!0)+1,J=O-Y+1,G=this.isolate(Y,J),F=G.next;G.format(z,P),F instanceof $&&F.formatAt(0,A-Y+C-J,z,P)}}}},{key:"insertAt",value:function(A,C,z){if(z==null){var P=this.descendant(w.default,A),O=i(P,2),Y=O[0],J=O[1];Y.insertAt(J,C)}}},{key:"length",value:function(){var A=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?A:A+1}},{key:"newlineIndex",value:function(A){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(C)return this.domNode.textContent.slice(0,A).lastIndexOf(`
`);var z=this.domNode.textContent.slice(A).indexOf(`
`);return z>-1?A+z:-1}},{key:"optimize",value:function(A){this.domNode.textContent.endsWith(`
`)||this.appendChild(u.default.create("text",`
`)),c($.prototype.__proto__||Object.getPrototypeOf($.prototype),"optimize",this).call(this,A);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===C.statics.formats(C.domNode)&&(C.optimize(A),C.moveChildren(this),C.remove())}},{key:"replace",value:function(A){c($.prototype.__proto__||Object.getPrototypeOf($.prototype),"replace",this).call(this,A),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(C){var z=u.default.find(C);z==null?C.parentNode.removeChild(C):z instanceof u.default.Embed?z.remove():z.unwrap()})}}],[{key:"create",value:function(A){var C=c($.__proto__||Object.getPrototypeOf($),"create",this).call(this,A);return C.setAttribute("spellcheck",!1),C}},{key:"formats",value:function(){return!0}}]),$}(p.default);T.blotName="code-block",T.tagName="PRE",T.TAB="  ",r.Code=E,r.default=T},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},o=function(){function F(I,V){var H=[],U=!0,q=!1,K=void 0;try{for(var B=I[Symbol.iterator](),W;!(U=(W=B.next()).done)&&(H.push(W.value),!(V&&H.length===V));U=!0);}catch(oe){q=!0,K=oe}finally{try{!U&&B.return&&B.return()}finally{if(q)throw K}}return H}return function(I,V){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return F(I,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function F(I,V){for(var H=0;H<V.length;H++){var U=V[H];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(I,U.key,U)}}return function(I,V,H){return V&&F(I.prototype,V),H&&F(I,H),I}}(),d=a(2),h=C(d),m=a(20),u=C(m),f=a(0),p=C(f),x=a(13),v=C(x),y=a(24),w=C(y),b=a(4),_=C(b),N=a(16),k=C(N),E=a(21),T=C(E),R=a(11),$=C(R),M=a(3),A=C(M);function C(F){return F&&F.__esModule?F:{default:F}}function z(F,I,V){return I in F?Object.defineProperty(F,I,{value:V,enumerable:!0,configurable:!0,writable:!0}):F[I]=V,F}function P(F,I){if(!(F instanceof I))throw new TypeError("Cannot call a class as a function")}var O=/^[ -~]*$/,Y=function(){function F(I){P(this,F),this.scroll=I,this.delta=this.getDelta()}return c(F,[{key:"applyDelta",value:function(V){var H=this,U=!1;this.scroll.update();var q=this.scroll.length();return this.scroll.batchStart(),V=G(V),V.reduce(function(K,B){var W=B.retain||B.delete||B.insert.length||1,oe=B.attributes||{};if(B.insert!=null){if(typeof B.insert=="string"){var X=B.insert;X.endsWith(`
`)&&U&&(U=!1,X=X.slice(0,-1)),K>=q&&!X.endsWith(`
`)&&(U=!0),H.scroll.insertAt(K,X);var re=H.scroll.line(K),ue=o(re,2),me=ue[0],we=ue[1],be=(0,A.default)({},(0,b.bubbleFormats)(me));if(me instanceof _.default){var ae=me.descendant(p.default.Leaf,we),ee=o(ae,1),ye=ee[0];be=(0,A.default)(be,(0,b.bubbleFormats)(ye))}oe=u.default.attributes.diff(be,oe)||{}}else if(i(B.insert)==="object"){var le=Object.keys(B.insert)[0];if(le==null)return K;H.scroll.insertAt(K,le,B.insert[le])}q+=W}return Object.keys(oe).forEach(function(de){H.scroll.formatAt(K,W,de,oe[de])}),K+W},0),V.reduce(function(K,B){return typeof B.delete=="number"?(H.scroll.deleteAt(K,B.delete),K):K+(B.retain||B.insert.length||1)},0),this.scroll.batchEnd(),this.update(V)}},{key:"deleteText",value:function(V,H){return this.scroll.deleteAt(V,H),this.update(new h.default().retain(V).delete(H))}},{key:"formatLine",value:function(V,H){var U=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(q).forEach(function(K){if(!(U.scroll.whitelist!=null&&!U.scroll.whitelist[K])){var B=U.scroll.lines(V,Math.max(H,1)),W=H;B.forEach(function(oe){var X=oe.length();if(!(oe instanceof v.default))oe.format(K,q[K]);else{var re=V-oe.offset(U.scroll),ue=oe.newlineIndex(re+W)-re+1;oe.formatAt(re,ue,K,q[K])}W-=X})}}),this.scroll.optimize(),this.update(new h.default().retain(V).retain(H,(0,T.default)(q)))}},{key:"formatText",value:function(V,H){var U=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(q).forEach(function(K){U.scroll.formatAt(V,H,K,q[K])}),this.update(new h.default().retain(V).retain(H,(0,T.default)(q)))}},{key:"getContents",value:function(V,H){return this.delta.slice(V,V+H)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(V,H){return V.concat(H.delta())},new h.default)}},{key:"getFormat",value:function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=[],q=[];H===0?this.scroll.path(V).forEach(function(B){var W=o(B,1),oe=W[0];oe instanceof _.default?U.push(oe):oe instanceof p.default.Leaf&&q.push(oe)}):(U=this.scroll.lines(V,H),q=this.scroll.descendants(p.default.Leaf,V,H));var K=[U,q].map(function(B){if(B.length===0)return{};for(var W=(0,b.bubbleFormats)(B.shift());Object.keys(W).length>0;){var oe=B.shift();if(oe==null)return W;W=J((0,b.bubbleFormats)(oe),W)}return W});return A.default.apply(A.default,K)}},{key:"getText",value:function(V,H){return this.getContents(V,H).filter(function(U){return typeof U.insert=="string"}).map(function(U){return U.insert}).join("")}},{key:"insertEmbed",value:function(V,H,U){return this.scroll.insertAt(V,H,U),this.update(new h.default().retain(V).insert(z({},H,U)))}},{key:"insertText",value:function(V,H){var U=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return H=H.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(V,H),Object.keys(q).forEach(function(K){U.scroll.formatAt(V,H.length,K,q[K])}),this.update(new h.default().retain(V).insert(H,(0,T.default)(q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var V=this.scroll.children.head;return V.statics.blotName!==_.default.blotName||V.children.length>1?!1:V.children.head instanceof k.default}},{key:"removeFormat",value:function(V,H){var U=this.getText(V,H),q=this.scroll.line(V+H),K=o(q,2),B=K[0],W=K[1],oe=0,X=new h.default;B!=null&&(B instanceof v.default?oe=B.newlineIndex(W)-W+1:oe=B.length()-W,X=B.delta().slice(W,W+oe-1).insert(`
`));var re=this.getContents(V,H+oe),ue=re.diff(new h.default().insert(U).concat(X)),me=new h.default().retain(V).concat(ue);return this.applyDelta(me)}},{key:"update",value:function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,q=this.delta;if(H.length===1&&H[0].type==="characterData"&&H[0].target.data.match(O)&&p.default.find(H[0].target)){var K=p.default.find(H[0].target),B=(0,b.bubbleFormats)(K),W=K.offset(this.scroll),oe=H[0].oldValue.replace(w.default.CONTENTS,""),X=new h.default().insert(oe),re=new h.default().insert(K.value()),ue=new h.default().retain(W).concat(X.diff(re,U));V=ue.reduce(function(me,we){return we.insert?me.insert(we.insert,B):me.push(we)},new h.default),this.delta=q.compose(V)}else this.delta=this.getDelta(),(!V||!(0,$.default)(q.compose(V),this.delta))&&(V=q.diff(this.delta,U));return V}}]),F}();function J(F,I){return Object.keys(I).reduce(function(V,H){return F[H]==null||(I[H]===F[H]?V[H]=I[H]:Array.isArray(I[H])?I[H].indexOf(F[H])<0&&(V[H]=I[H].concat([F[H]])):V[H]=[I[H],F[H]]),V},{})}function G(F){return F.reduce(function(I,V){if(V.insert===1){var H=(0,T.default)(V.attributes);return delete H.image,I.insert({image:V.attributes.image},H)}if(V.attributes!=null&&(V.attributes.list===!0||V.attributes.bullet===!0)&&(V=(0,T.default)(V),V.attributes.list?V.attributes.list="ordered":(V.attributes.list="bullet",delete V.attributes.bullet)),typeof V.insert=="string"){var U=V.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return I.insert(U,V.attributes)}return I.push(V)},new h.default)}r.default=Y},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var i=function(){function R($,M){var A=[],C=!0,z=!1,P=void 0;try{for(var O=$[Symbol.iterator](),Y;!(C=(Y=O.next()).done)&&(A.push(Y.value),!(M&&A.length===M));C=!0);}catch(J){z=!0,P=J}finally{try{!C&&O.return&&O.return()}finally{if(z)throw P}}return A}return function($,M){if(Array.isArray($))return $;if(Symbol.iterator in Object($))return R($,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function R($,M){for(var A=0;A<M.length;A++){var C=M[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty($,C.key,C)}}return function($,M,A){return M&&R($.prototype,M),A&&R($,A),$}}(),c=a(0),d=w(c),h=a(21),m=w(h),u=a(11),f=w(u),p=a(8),x=w(p),v=a(10),y=w(v);function w(R){return R&&R.__esModule?R:{default:R}}function b(R){if(Array.isArray(R)){for(var $=0,M=Array(R.length);$<R.length;$++)M[$]=R[$];return M}else return Array.from(R)}function _(R,$){if(!(R instanceof $))throw new TypeError("Cannot call a class as a function")}var N=(0,y.default)("quill:selection"),k=function R($){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;_(this,R),this.index=$,this.length=M},E=function(){function R($,M){var A=this;_(this,R),this.emitter=M,this.scroll=$,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=d.default.create("cursor",this),this.lastRange=this.savedRange=new k(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){A.mouseDown||setTimeout(A.update.bind(A,x.default.sources.USER),1)}),this.emitter.on(x.default.events.EDITOR_CHANGE,function(C,z){C===x.default.events.TEXT_CHANGE&&z.length()>0&&A.update(x.default.sources.SILENT)}),this.emitter.on(x.default.events.SCROLL_BEFORE_UPDATE,function(){if(A.hasFocus()){var C=A.getNativeRange();C!=null&&C.start.node!==A.cursor.textNode&&A.emitter.once(x.default.events.SCROLL_UPDATE,function(){try{A.setNativeRange(C.start.node,C.start.offset,C.end.node,C.end.offset)}catch{}})}}),this.emitter.on(x.default.events.SCROLL_OPTIMIZE,function(C,z){if(z.range){var P=z.range,O=P.startNode,Y=P.startOffset,J=P.endNode,G=P.endOffset;A.setNativeRange(O,Y,J,G)}}),this.update(x.default.sources.SILENT)}return o(R,[{key:"handleComposition",value:function(){var M=this;this.root.addEventListener("compositionstart",function(){M.composing=!0}),this.root.addEventListener("compositionend",function(){if(M.composing=!1,M.cursor.parent){var A=M.cursor.restore();if(!A)return;setTimeout(function(){M.setNativeRange(A.startNode,A.startOffset,A.endNode,A.endOffset)},1)}})}},{key:"handleDragging",value:function(){var M=this;this.emitter.listenDOM("mousedown",document.body,function(){M.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){M.mouseDown=!1,M.update(x.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(M,A){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[M])){this.scroll.update();var C=this.getNativeRange();if(!(C==null||!C.native.collapsed||d.default.query(M,d.default.Scope.BLOCK))){if(C.start.node!==this.cursor.textNode){var z=d.default.find(C.start.node,!1);if(z==null)return;if(z instanceof d.default.Leaf){var P=z.split(C.start.offset);z.parent.insertBefore(this.cursor,P)}else z.insertBefore(this.cursor,C.start.node);this.cursor.attach()}this.cursor.format(M,A),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=this.scroll.length();M=Math.min(M,C-1),A=Math.min(M+A,C-1)-M;var z=void 0,P=this.scroll.leaf(M),O=i(P,2),Y=O[0],J=O[1];if(Y==null)return null;var G=Y.position(J,!0),F=i(G,2);z=F[0],J=F[1];var I=document.createRange();if(A>0){I.setStart(z,J);var V=this.scroll.leaf(M+A),H=i(V,2);if(Y=H[0],J=H[1],Y==null)return null;var U=Y.position(J,!0),q=i(U,2);return z=q[0],J=q[1],I.setEnd(z,J),I.getBoundingClientRect()}else{var K="left",B=void 0;return z instanceof Text?(J<z.data.length?(I.setStart(z,J),I.setEnd(z,J+1)):(I.setStart(z,J-1),I.setEnd(z,J),K="right"),B=I.getBoundingClientRect()):(B=Y.domNode.getBoundingClientRect(),J>0&&(K="right")),{bottom:B.top+B.height,height:B.height,left:B[K],right:B[K],top:B.top,width:0}}}},{key:"getNativeRange",value:function(){var M=document.getSelection();if(M==null||M.rangeCount<=0)return null;var A=M.getRangeAt(0);if(A==null)return null;var C=this.normalizeNative(A);return N.info("getNativeRange",C),C}},{key:"getRange",value:function(){var M=this.getNativeRange();if(M==null)return[null,null];var A=this.normalizedToRange(M);return[A,M]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(M){var A=this,C=[[M.start.node,M.start.offset]];M.native.collapsed||C.push([M.end.node,M.end.offset]);var z=C.map(function(Y){var J=i(Y,2),G=J[0],F=J[1],I=d.default.find(G,!0),V=I.offset(A.scroll);return F===0?V:I instanceof d.default.Container?V+I.length():V+I.index(G,F)}),P=Math.min(Math.max.apply(Math,b(z)),this.scroll.length()-1),O=Math.min.apply(Math,[P].concat(b(z)));return new k(O,P-O)}},{key:"normalizeNative",value:function(M){if(!T(this.root,M.startContainer)||!M.collapsed&&!T(this.root,M.endContainer))return null;var A={start:{node:M.startContainer,offset:M.startOffset},end:{node:M.endContainer,offset:M.endOffset},native:M};return[A.start,A.end].forEach(function(C){for(var z=C.node,P=C.offset;!(z instanceof Text)&&z.childNodes.length>0;)if(z.childNodes.length>P)z=z.childNodes[P],P=0;else if(z.childNodes.length===P)z=z.lastChild,P=z instanceof Text?z.data.length:z.childNodes.length+1;else break;C.node=z,C.offset=P}),A}},{key:"rangeToNative",value:function(M){var A=this,C=M.collapsed?[M.index]:[M.index,M.index+M.length],z=[],P=this.scroll.length();return C.forEach(function(O,Y){O=Math.min(P-1,O);var J=void 0,G=A.scroll.leaf(O),F=i(G,2),I=F[0],V=F[1],H=I.position(V,Y!==0),U=i(H,2);J=U[0],V=U[1],z.push(J,V)}),z.length<2&&(z=z.concat(z)),z}},{key:"scrollIntoView",value:function(M){var A=this.lastRange;if(A!=null){var C=this.getBounds(A.index,A.length);if(C!=null){var z=this.scroll.length()-1,P=this.scroll.line(Math.min(A.index,z)),O=i(P,1),Y=O[0],J=Y;if(A.length>0){var G=this.scroll.line(Math.min(A.index+A.length,z)),F=i(G,1);J=F[0]}if(!(Y==null||J==null)){var I=M.getBoundingClientRect();C.top<I.top?M.scrollTop-=I.top-C.top:C.bottom>I.bottom&&(M.scrollTop+=C.bottom-I.bottom)}}}}},{key:"setNativeRange",value:function(M,A){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:A,P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",M,A,C,z),!(M!=null&&(this.root.parentNode==null||M.parentNode==null||C.parentNode==null))){var O=document.getSelection();if(O!=null)if(M!=null){this.hasFocus()||this.root.focus();var Y=(this.getNativeRange()||{}).native;if(Y==null||P||M!==Y.startContainer||A!==Y.startOffset||C!==Y.endContainer||z!==Y.endOffset){M.tagName=="BR"&&(A=[].indexOf.call(M.parentNode.childNodes,M),M=M.parentNode),C.tagName=="BR"&&(z=[].indexOf.call(C.parentNode.childNodes,C),C=C.parentNode);var J=document.createRange();J.setStart(M,A),J.setEnd(C,z),O.removeAllRanges(),O.addRange(J)}}else O.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;if(typeof A=="string"&&(C=A,A=!1),N.info("setRange",M),M!=null){var z=this.rangeToNative(M);this.setNativeRange.apply(this,b(z).concat([A]))}else this.setNativeRange(null);this.update(C)}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.default.sources.USER,A=this.lastRange,C=this.getRange(),z=i(C,2),P=z[0],O=z[1];if(this.lastRange=P,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(A,this.lastRange)){var Y;!this.composing&&O!=null&&O.native.collapsed&&O.start.node!==this.cursor.textNode&&this.cursor.restore();var J=[x.default.events.SELECTION_CHANGE,(0,m.default)(this.lastRange),(0,m.default)(A),M];if((Y=this.emitter).emit.apply(Y,[x.default.events.EDITOR_CHANGE].concat(J)),M!==x.default.sources.SILENT){var G;(G=this.emitter).emit.apply(G,J)}}}}]),R}();function T(R,$){try{$.parentNode}catch{return!1}return $ instanceof Text&&($=$.parentNode),R.contains($)}r.Range=k,r.default=E},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function x(v,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,w){return y&&x(v.prototype,y),w&&x(v,w),v}}(),o=function x(v,y,w){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:x(_,y,w)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(w)}},c=a(0),d=h(c);function h(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function u(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function f(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){f(v,x);function v(){return m(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"insertInto",value:function(w,b){w.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,w,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(d.default.Embed);p.blotName="break",p.tagName="BR",r.default=p},function(n,r,a){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)p.hasOwnProperty(x)&&(f[x]=p[x])};return function(f,p){u(f,p);function x(){this.constructor=f}f.prototype=p===null?Object.create(p):(x.prototype=p.prototype,new x)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(44),c=a(30),d=a(1),h=function(u){i(f,u);function f(p){var x=u.call(this,p)||this;return x.build(),x}return f.prototype.appendChild=function(p){this.insertBefore(p)},f.prototype.attach=function(){u.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},f.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(x){try{var v=m(x);p.insertBefore(v,p.children.head||void 0)}catch(y){if(y instanceof d.ParchmentError)return;throw y}})},f.prototype.deleteAt=function(p,x){if(p===0&&x===this.length())return this.remove();this.children.forEachAt(p,x,function(v,y,w){v.deleteAt(y,w)})},f.prototype.descendant=function(p,x){var v=this.children.find(x),y=v[0],w=v[1];return p.blotName==null&&p(y)||p.blotName!=null&&y instanceof p?[y,w]:y instanceof f?y.descendant(p,w):[null,-1]},f.prototype.descendants=function(p,x,v){x===void 0&&(x=0),v===void 0&&(v=Number.MAX_VALUE);var y=[],w=v;return this.children.forEachAt(x,v,function(b,_,N){(p.blotName==null&&p(b)||p.blotName!=null&&b instanceof p)&&y.push(b),b instanceof f&&(y=y.concat(b.descendants(p,_,w))),w-=N}),y},f.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),u.prototype.detach.call(this)},f.prototype.formatAt=function(p,x,v,y){this.children.forEachAt(p,x,function(w,b,_){w.formatAt(b,_,v,y)})},f.prototype.insertAt=function(p,x,v){var y=this.children.find(p),w=y[0],b=y[1];if(w)w.insertAt(b,x,v);else{var _=v==null?d.create("text",x):d.create(x,v);this.appendChild(_)}},f.prototype.insertBefore=function(p,x){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return p instanceof v}))throw new d.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,x)},f.prototype.length=function(){return this.children.reduce(function(p,x){return p+x.length()},0)},f.prototype.moveChildren=function(p,x){this.children.forEach(function(v){p.insertBefore(v,x)})},f.prototype.optimize=function(p){if(u.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var x=d.create(this.statics.defaultChild);this.appendChild(x),x.optimize(p)}else this.remove()},f.prototype.path=function(p,x){x===void 0&&(x=!1);var v=this.children.find(p,x),y=v[0],w=v[1],b=[[this,p]];return y instanceof f?b.concat(y.path(w,x)):(y!=null&&b.push([y,w]),b)},f.prototype.removeChild=function(p){this.children.remove(p)},f.prototype.replace=function(p){p instanceof f&&p.moveChildren(this),u.prototype.replace.call(this,p)},f.prototype.split=function(p,x){if(x===void 0&&(x=!1),!x){if(p===0)return this;if(p===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(p,this.length(),function(y,w,b){y=y.split(w,x),v.appendChild(y)}),v},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(p,x){var v=this,y=[],w=[];p.forEach(function(b){b.target===v.domNode&&b.type==="childList"&&(y.push.apply(y,b.addedNodes),w.push.apply(w,b.removedNodes))}),w.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var _=d.find(b);_!=null&&(_.domNode.parentNode==null||_.domNode.parentNode===v.domNode)&&_.detach()}}),y.filter(function(b){return b.parentNode==v.domNode}).sort(function(b,_){return b===_?0:b.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var _=null;b.nextSibling!=null&&(_=d.find(b.nextSibling));var N=m(b);(N.next!=_||N.next==null)&&(N.parent!=null&&N.parent.removeChild(v),v.insertBefore(N,_||void 0))})},f}(c.default);function m(u){var f=d.find(u);if(f==null)try{f=d.create(u)}catch{f=d.create(d.Scope.INLINE),[].slice.call(u.childNodes).forEach(function(x){f.domNode.appendChild(x)}),u.parentNode&&u.parentNode.replaceChild(f.domNode,u),f.attach()}return f}r.default=h},function(n,r,a){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)p.hasOwnProperty(x)&&(f[x]=p[x])};return function(f,p){u(f,p);function x(){this.constructor=f}f.prototype=p===null?Object.create(p):(x.prototype=p.prototype,new x)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(12),c=a(31),d=a(17),h=a(1),m=function(u){i(f,u);function f(p){var x=u.call(this,p)||this;return x.attributes=new c.default(x.domNode),x}return f.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},f.prototype.format=function(p,x){var v=h.query(p);v instanceof o.default?this.attributes.attribute(v,x):x&&v!=null&&(p!==this.statics.blotName||this.formats()[p]!==x)&&this.replaceWith(p,x)},f.prototype.formats=function(){var p=this.attributes.values(),x=this.statics.formats(this.domNode);return x!=null&&(p[this.statics.blotName]=x),p},f.prototype.replaceWith=function(p,x){var v=u.prototype.replaceWith.call(this,p,x);return this.attributes.copy(v),v},f.prototype.update=function(p,x){var v=this;u.prototype.update.call(this,p,x),p.some(function(y){return y.target===v.domNode&&y.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(p,x){var v=u.prototype.wrap.call(this,p,x);return v instanceof f&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},f}(d.default);r.default=m},function(n,r,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var f in u)u.hasOwnProperty(f)&&(m[f]=u[f])};return function(m,u){h(m,u);function f(){this.constructor=m}m.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(30),c=a(1),d=function(h){i(m,h);function m(){return h!==null&&h.apply(this,arguments)||this}return m.value=function(u){return!0},m.prototype.index=function(u,f){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},m.prototype.position=function(u,f){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return u>0&&(p+=1),[this.parent.domNode,p]},m.prototype.value=function(){var u;return u={},u[this.statics.blotName]=this.statics.value(this.domNode)||!0,u},m.scope=c.Scope.INLINE_BLOT,m}(o.default);r.default=d},function(n,r,a){var i=a(11),o=a(3),c={attributes:{compose:function(h,m,u){typeof h!="object"&&(h={}),typeof m!="object"&&(m={});var f=o(!0,{},m);u||(f=Object.keys(f).reduce(function(x,v){return f[v]!=null&&(x[v]=f[v]),x},{}));for(var p in h)h[p]!==void 0&&m[p]===void 0&&(f[p]=h[p]);return Object.keys(f).length>0?f:void 0},diff:function(h,m){typeof h!="object"&&(h={}),typeof m!="object"&&(m={});var u=Object.keys(h).concat(Object.keys(m)).reduce(function(f,p){return i(h[p],m[p])||(f[p]=m[p]===void 0?null:m[p]),f},{});return Object.keys(u).length>0?u:void 0},transform:function(h,m,u){if(typeof h!="object")return m;if(typeof m=="object"){if(!u)return m;var f=Object.keys(m).reduce(function(p,x){return h[x]===void 0&&(p[x]=m[x]),p},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(h){return new d(h)},length:function(h){return typeof h.delete=="number"?h.delete:typeof h.retain=="number"?h.retain:typeof h.insert=="string"?h.insert.length:1}};function d(h){this.ops=h,this.index=0,this.offset=0}d.prototype.hasNext=function(){return this.peekLength()<1/0},d.prototype.next=function(h){h||(h=1/0);var m=this.ops[this.index];if(m){var u=this.offset,f=c.length(m);if(h>=f-u?(h=f-u,this.index+=1,this.offset=0):this.offset+=h,typeof m.delete=="number")return{delete:h};var p={};return m.attributes&&(p.attributes=m.attributes),typeof m.retain=="number"?p.retain=h:typeof m.insert=="string"?p.insert=m.insert.substr(u,h):p.insert=m.insert,p}else return{retain:1/0}},d.prototype.peek=function(){return this.ops[this.index]},d.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},d.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},d.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var h=this.offset,m=this.index,u=this.next(),f=this.ops.slice(this.index);return this.offset=h,this.index=m,[u].concat(f)}else return[]},n.exports=c},function(n,r){var a=function(){function i(v,y){return y!=null&&v instanceof y}var o;try{o=Map}catch{o=function(){}}var c;try{c=Set}catch{c=function(){}}var d;try{d=Promise}catch{d=function(){}}function h(v,y,w,b,_){typeof y=="object"&&(w=y.depth,b=y.prototype,_=y.includeNonEnumerable,y=y.circular);var N=[],k=[],E=typeof Buffer<"u";typeof y>"u"&&(y=!0),typeof w>"u"&&(w=1/0);function T(R,$){if(R===null)return null;if($===0)return R;var M,A;if(typeof R!="object")return R;if(i(R,o))M=new o;else if(i(R,c))M=new c;else if(i(R,d))M=new d(function(I,V){R.then(function(H){I(T(H,$-1))},function(H){V(T(H,$-1))})});else if(h.__isArray(R))M=[];else if(h.__isRegExp(R))M=new RegExp(R.source,x(R)),R.lastIndex&&(M.lastIndex=R.lastIndex);else if(h.__isDate(R))M=new Date(R.getTime());else{if(E&&Buffer.isBuffer(R))return Buffer.allocUnsafe?M=Buffer.allocUnsafe(R.length):M=new Buffer(R.length),R.copy(M),M;i(R,Error)?M=Object.create(R):typeof b>"u"?(A=Object.getPrototypeOf(R),M=Object.create(A)):(M=Object.create(b),A=b)}if(y){var C=N.indexOf(R);if(C!=-1)return k[C];N.push(R),k.push(M)}i(R,o)&&R.forEach(function(I,V){var H=T(V,$-1),U=T(I,$-1);M.set(H,U)}),i(R,c)&&R.forEach(function(I){var V=T(I,$-1);M.add(V)});for(var z in R){var P;A&&(P=Object.getOwnPropertyDescriptor(A,z)),!(P&&P.set==null)&&(M[z]=T(R[z],$-1))}if(Object.getOwnPropertySymbols)for(var O=Object.getOwnPropertySymbols(R),z=0;z<O.length;z++){var Y=O[z],J=Object.getOwnPropertyDescriptor(R,Y);J&&!J.enumerable&&!_||(M[Y]=T(R[Y],$-1),J.enumerable||Object.defineProperty(M,Y,{enumerable:!1}))}if(_)for(var G=Object.getOwnPropertyNames(R),z=0;z<G.length;z++){var F=G[z],J=Object.getOwnPropertyDescriptor(R,F);J&&J.enumerable||(M[F]=T(R[F],$-1),Object.defineProperty(M,F,{enumerable:!1}))}return M}return T(v,w)}h.clonePrototype=function(y){if(y===null)return null;var w=function(){};return w.prototype=y,new w};function m(v){return Object.prototype.toString.call(v)}h.__objToStr=m;function u(v){return typeof v=="object"&&m(v)==="[object Date]"}h.__isDate=u;function f(v){return typeof v=="object"&&m(v)==="[object Array]"}h.__isArray=f;function p(v){return typeof v=="object"&&m(v)==="[object RegExp]"}h.__isRegExp=p;function x(v){var y="";return v.global&&(y+="g"),v.ignoreCase&&(y+="i"),v.multiline&&(y+="m"),y}return h.__getRegExpFlags=x,h}();typeof n=="object"&&n.exports&&(n.exports=a)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function M(A,C){var z=[],P=!0,O=!1,Y=void 0;try{for(var J=A[Symbol.iterator](),G;!(P=(G=J.next()).done)&&(z.push(G.value),!(C&&z.length===C));P=!0);}catch(F){O=!0,Y=F}finally{try{!P&&J.return&&J.return()}finally{if(O)throw Y}}return z}return function(A,C){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return M(A,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function M(A,C){for(var z=0;z<C.length;z++){var P=C[z];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(A,P.key,P)}}return function(A,C,z){return C&&M(A.prototype,C),z&&M(A,z),A}}(),c=function M(A,C,z){A===null&&(A=Function.prototype);var P=Object.getOwnPropertyDescriptor(A,C);if(P===void 0){var O=Object.getPrototypeOf(A);return O===null?void 0:M(O,C,z)}else{if("value"in P)return P.value;var Y=P.get;return Y===void 0?void 0:Y.call(z)}},d=a(0),h=N(d),m=a(8),u=N(m),f=a(4),p=N(f),x=a(16),v=N(x),y=a(13),w=N(y),b=a(25),_=N(b);function N(M){return M&&M.__esModule?M:{default:M}}function k(M,A){if(!(M instanceof A))throw new TypeError("Cannot call a class as a function")}function E(M,A){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:M}function T(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);M.prototype=Object.create(A&&A.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(M,A):M.__proto__=A)}function R(M){return M instanceof p.default||M instanceof f.BlockEmbed}var $=function(M){T(A,M);function A(C,z){k(this,A);var P=E(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C));return P.emitter=z.emitter,Array.isArray(z.whitelist)&&(P.whitelist=z.whitelist.reduce(function(O,Y){return O[Y]=!0,O},{})),P.domNode.addEventListener("DOMNodeInserted",function(){}),P.optimize(),P.enable(),P}return o(A,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(z,P){var O=this.line(z),Y=i(O,2),J=Y[0],G=Y[1],F=this.line(z+P),I=i(F,1),V=I[0];if(c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,z,P),V!=null&&J!==V&&G>0){if(J instanceof f.BlockEmbed||V instanceof f.BlockEmbed){this.optimize();return}if(J instanceof w.default){var H=J.newlineIndex(J.length(),!0);if(H>-1&&(J=J.split(H+1),J===V)){this.optimize();return}}else if(V instanceof w.default){var U=V.newlineIndex(0);U>-1&&V.split(U+1)}var q=V.children.head instanceof v.default?null:V.children.head;J.moveChildren(V,q),J.remove()}this.optimize()}},{key:"enable",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",z)}},{key:"formatAt",value:function(z,P,O,Y){this.whitelist!=null&&!this.whitelist[O]||(c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,z,P,O,Y),this.optimize())}},{key:"insertAt",value:function(z,P,O){if(!(O!=null&&this.whitelist!=null&&!this.whitelist[P])){if(z>=this.length())if(O==null||h.default.query(P,h.default.Scope.BLOCK)==null){var Y=h.default.create(this.statics.defaultChild);this.appendChild(Y),O==null&&P.endsWith(`
`)&&(P=P.slice(0,-1)),Y.insertAt(0,P,O)}else{var J=h.default.create(P,O);this.appendChild(J)}else c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,z,P,O);this.optimize()}}},{key:"insertBefore",value:function(z,P){if(z.statics.scope===h.default.Scope.INLINE_BLOT){var O=h.default.create(this.statics.defaultChild);O.appendChild(z),z=O}c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,z,P)}},{key:"leaf",value:function(z){return this.path(z).pop()||[null,-1]}},{key:"line",value:function(z){return z===this.length()?this.line(z-1):this.descendant(R,z)}},{key:"lines",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,O=function Y(J,G,F){var I=[],V=F;return J.children.forEachAt(G,F,function(H,U,q){R(H)?I.push(H):H instanceof h.default.Container&&(I=I.concat(Y(H,U,V))),V-=q}),I};return O(this,z,P)}},{key:"optimize",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,z,P),z.length>0&&this.emitter.emit(u.default.events.SCROLL_OPTIMIZE,z,P))}},{key:"path",value:function(z){return c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,z).slice(1)}},{key:"update",value:function(z){if(this.batch!==!0){var P=u.default.sources.USER;typeof z=="string"&&(P=z),Array.isArray(z)||(z=this.observer.takeRecords()),z.length>0&&this.emitter.emit(u.default.events.SCROLL_BEFORE_UPDATE,P,z),c(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"update",this).call(this,z.concat([])),z.length>0&&this.emitter.emit(u.default.events.SCROLL_UPDATE,P,z)}}}]),A}(h.default.Scroll);$.blotName="scroll",$.className="ql-editor",$.tagName="DIV",$.defaultChild="block",$.allowedChildren=[p.default,f.BlockEmbed,_.default],r.default=$},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},o=function(){function B(W,oe){var X=[],re=!0,ue=!1,me=void 0;try{for(var we=W[Symbol.iterator](),be;!(re=(be=we.next()).done)&&(X.push(be.value),!(oe&&X.length===oe));re=!0);}catch(ae){ue=!0,me=ae}finally{try{!re&&we.return&&we.return()}finally{if(ue)throw me}}return X}return function(W,oe){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return B(W,oe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function B(W,oe){for(var X=0;X<oe.length;X++){var re=oe[X];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(W,re.key,re)}}return function(W,oe,X){return oe&&B(W.prototype,oe),X&&B(W,X),W}}(),d=a(21),h=M(d),m=a(11),u=M(m),f=a(3),p=M(f),x=a(2),v=M(x),y=a(20),w=M(y),b=a(0),_=M(b),N=a(5),k=M(N),E=a(10),T=M(E),R=a(9),$=M(R);function M(B){return B&&B.__esModule?B:{default:B}}function A(B,W,oe){return W in B?Object.defineProperty(B,W,{value:oe,enumerable:!0,configurable:!0,writable:!0}):B[W]=oe,B}function C(B,W){if(!(B instanceof W))throw new TypeError("Cannot call a class as a function")}function z(B,W){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:B}function P(B,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);B.prototype=Object.create(W&&W.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(B,W):B.__proto__=W)}var O=(0,T.default)("quill:keyboard"),Y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",J=function(B){P(W,B),c(W,null,[{key:"match",value:function(X,re){return re=K(re),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ue){return!!re[ue]!==X[ue]&&re[ue]!==null})?!1:re.key===(X.which||X.keyCode)}}]);function W(oe,X){C(this,W);var re=z(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,oe,X));return re.bindings={},Object.keys(re.options.bindings).forEach(function(ue){ue==="list autofill"&&oe.scroll.whitelist!=null&&!oe.scroll.whitelist.list||re.options.bindings[ue]&&re.addBinding(re.options.bindings[ue])}),re.addBinding({key:W.keys.ENTER,shiftKey:null},H),re.addBinding({key:W.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(re.addBinding({key:W.keys.BACKSPACE},{collapsed:!0},F),re.addBinding({key:W.keys.DELETE},{collapsed:!0},I)):(re.addBinding({key:W.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},F),re.addBinding({key:W.keys.DELETE},{collapsed:!0,suffix:/^.?$/},I)),re.addBinding({key:W.keys.BACKSPACE},{collapsed:!1},V),re.addBinding({key:W.keys.DELETE},{collapsed:!1},V),re.addBinding({key:W.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},F),re.listen(),re}return c(W,[{key:"addBinding",value:function(X){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},me=K(X);if(me==null||me.key==null)return O.warn("Attempted to add invalid keyboard binding",me);typeof re=="function"&&(re={handler:re}),typeof ue=="function"&&(ue={handler:ue}),me=(0,p.default)(me,re,ue),this.bindings[me.key]=this.bindings[me.key]||[],this.bindings[me.key].push(me)}},{key:"listen",value:function(){var X=this;this.quill.root.addEventListener("keydown",function(re){if(!re.defaultPrevented){var ue=re.which||re.keyCode,me=(X.bindings[ue]||[]).filter(function(ct){return W.match(re,ct)});if(me.length!==0){var we=X.quill.getSelection();if(!(we==null||!X.quill.hasFocus())){var be=X.quill.getLine(we.index),ae=o(be,2),ee=ae[0],ye=ae[1],le=X.quill.getLeaf(we.index),de=o(le,2),Q=de[0],se=de[1],ne=we.length===0?[Q,se]:X.quill.getLeaf(we.index+we.length),ve=o(ne,2),pe=ve[0],ge=ve[1],ke=Q instanceof _.default.Text?Q.value().slice(0,se):"",Be=pe instanceof _.default.Text?pe.value().slice(ge):"",qe={collapsed:we.length===0,empty:we.length===0&&ee.length()<=1,format:X.quill.getFormat(we),offset:ye,prefix:ke,suffix:Be},gt=me.some(function(ct){if(ct.collapsed!=null&&ct.collapsed!==qe.collapsed||ct.empty!=null&&ct.empty!==qe.empty||ct.offset!=null&&ct.offset!==qe.offset)return!1;if(Array.isArray(ct.format)){if(ct.format.every(function(Xe){return qe.format[Xe]==null}))return!1}else if(i(ct.format)==="object"&&!Object.keys(ct.format).every(function(Xe){return ct.format[Xe]===!0?qe.format[Xe]!=null:ct.format[Xe]===!1?qe.format[Xe]==null:(0,u.default)(ct.format[Xe],qe.format[Xe])}))return!1;return ct.prefix!=null&&!ct.prefix.test(qe.prefix)||ct.suffix!=null&&!ct.suffix.test(qe.suffix)?!1:ct.handler.call(X,we,qe)!==!0});gt&&re.preventDefault()}}}})}}]),W}($.default);J.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},J.DEFAULTS={bindings:{bold:q("bold"),italic:q("italic"),underline:q("underline"),indent:{key:J.keys.TAB,format:["blockquote","indent","list"],handler:function(W,oe){if(oe.collapsed&&oe.offset!==0)return!0;this.quill.format("indent","+1",k.default.sources.USER)}},outdent:{key:J.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(W,oe){if(oe.collapsed&&oe.offset!==0)return!0;this.quill.format("indent","-1",k.default.sources.USER)}},"outdent backspace":{key:J.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(W,oe){oe.format.indent!=null?this.quill.format("indent","-1",k.default.sources.USER):oe.format.list!=null&&this.quill.format("list",!1,k.default.sources.USER)}},"indent code-block":U(!0),"outdent code-block":U(!1),"remove tab":{key:J.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(W){this.quill.deleteText(W.index-1,1,k.default.sources.USER)}},tab:{key:J.keys.TAB,handler:function(W){this.quill.history.cutoff();var oe=new v.default().retain(W.index).delete(W.length).insert("	");this.quill.updateContents(oe,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(W.index+1,k.default.sources.SILENT)}},"list empty enter":{key:J.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(W,oe){this.quill.format("list",!1,k.default.sources.USER),oe.format.indent&&this.quill.format("indent",!1,k.default.sources.USER)}},"checklist enter":{key:J.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(W){var oe=this.quill.getLine(W.index),X=o(oe,2),re=X[0],ue=X[1],me=(0,p.default)({},re.formats(),{list:"checked"}),we=new v.default().retain(W.index).insert(`
`,me).retain(re.length()-ue-1).retain(1,{list:"unchecked"});this.quill.updateContents(we,k.default.sources.USER),this.quill.setSelection(W.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:J.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(W,oe){var X=this.quill.getLine(W.index),re=o(X,2),ue=re[0],me=re[1],we=new v.default().retain(W.index).insert(`
`,oe.format).retain(ue.length()-me-1).retain(1,{header:null});this.quill.updateContents(we,k.default.sources.USER),this.quill.setSelection(W.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(W,oe){var X=oe.prefix.length,re=this.quill.getLine(W.index),ue=o(re,2),me=ue[0],we=ue[1];if(we>X)return!0;var be=void 0;switch(oe.prefix.trim()){case"[]":case"[ ]":be="unchecked";break;case"[x]":be="checked";break;case"-":case"*":be="bullet";break;default:be="ordered"}this.quill.insertText(W.index," ",k.default.sources.USER),this.quill.history.cutoff();var ae=new v.default().retain(W.index-we).delete(X+1).retain(me.length()-2-we).retain(1,{list:be});this.quill.updateContents(ae,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(W.index-X,k.default.sources.SILENT)}},"code exit":{key:J.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(W){var oe=this.quill.getLine(W.index),X=o(oe,2),re=X[0],ue=X[1],me=new v.default().retain(W.index+re.length()-ue-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(me,k.default.sources.USER)}},"embed left":G(J.keys.LEFT,!1),"embed left shift":G(J.keys.LEFT,!0),"embed right":G(J.keys.RIGHT,!1),"embed right shift":G(J.keys.RIGHT,!0)}};function G(B,W){var oe,X=B===J.keys.LEFT?"prefix":"suffix";return oe={key:B,shiftKey:W,altKey:null},A(oe,X,/^$/),A(oe,"handler",function(ue){var me=ue.index;B===J.keys.RIGHT&&(me+=ue.length+1);var we=this.quill.getLeaf(me),be=o(we,1),ae=be[0];return ae instanceof _.default.Embed?(B===J.keys.LEFT?W?this.quill.setSelection(ue.index-1,ue.length+1,k.default.sources.USER):this.quill.setSelection(ue.index-1,k.default.sources.USER):W?this.quill.setSelection(ue.index,ue.length+1,k.default.sources.USER):this.quill.setSelection(ue.index+ue.length+1,k.default.sources.USER),!1):!0}),oe}function F(B,W){if(!(B.index===0||this.quill.getLength()<=1)){var oe=this.quill.getLine(B.index),X=o(oe,1),re=X[0],ue={};if(W.offset===0){var me=this.quill.getLine(B.index-1),we=o(me,1),be=we[0];if(be!=null&&be.length()>1){var ae=re.formats(),ee=this.quill.getFormat(B.index-1,1);ue=w.default.attributes.diff(ae,ee)||{}}}var ye=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(W.prefix)?2:1;this.quill.deleteText(B.index-ye,ye,k.default.sources.USER),Object.keys(ue).length>0&&this.quill.formatLine(B.index-ye,ye,ue,k.default.sources.USER),this.quill.focus()}}function I(B,W){var oe=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(W.suffix)?2:1;if(!(B.index>=this.quill.getLength()-oe)){var X={},re=0,ue=this.quill.getLine(B.index),me=o(ue,1),we=me[0];if(W.offset>=we.length()-1){var be=this.quill.getLine(B.index+1),ae=o(be,1),ee=ae[0];if(ee){var ye=we.formats(),le=this.quill.getFormat(B.index,1);X=w.default.attributes.diff(ye,le)||{},re=ee.length()}}this.quill.deleteText(B.index,oe,k.default.sources.USER),Object.keys(X).length>0&&this.quill.formatLine(B.index+re-1,oe,X,k.default.sources.USER)}}function V(B){var W=this.quill.getLines(B),oe={};if(W.length>1){var X=W[0].formats(),re=W[W.length-1].formats();oe=w.default.attributes.diff(re,X)||{}}this.quill.deleteText(B,k.default.sources.USER),Object.keys(oe).length>0&&this.quill.formatLine(B.index,1,oe,k.default.sources.USER),this.quill.setSelection(B.index,k.default.sources.SILENT),this.quill.focus()}function H(B,W){var oe=this;B.length>0&&this.quill.scroll.deleteAt(B.index,B.length);var X=Object.keys(W.format).reduce(function(re,ue){return _.default.query(ue,_.default.Scope.BLOCK)&&!Array.isArray(W.format[ue])&&(re[ue]=W.format[ue]),re},{});this.quill.insertText(B.index,`
`,X,k.default.sources.USER),this.quill.setSelection(B.index+1,k.default.sources.SILENT),this.quill.focus(),Object.keys(W.format).forEach(function(re){X[re]==null&&(Array.isArray(W.format[re])||re!=="link"&&oe.quill.format(re,W.format[re],k.default.sources.USER))})}function U(B){return{key:J.keys.TAB,shiftKey:!B,format:{"code-block":!0},handler:function(oe){var X=_.default.query("code-block"),re=oe.index,ue=oe.length,me=this.quill.scroll.descendant(X,re),we=o(me,2),be=we[0],ae=we[1];if(be!=null){var ee=this.quill.getIndex(be),ye=be.newlineIndex(ae,!0)+1,le=be.newlineIndex(ee+ae+ue),de=be.domNode.textContent.slice(ye,le).split(`
`);ae=0,de.forEach(function(Q,se){B?(be.insertAt(ye+ae,X.TAB),ae+=X.TAB.length,se===0?re+=X.TAB.length:ue+=X.TAB.length):Q.startsWith(X.TAB)&&(be.deleteAt(ye+ae,X.TAB.length),ae-=X.TAB.length,se===0?re-=X.TAB.length:ue-=X.TAB.length),ae+=Q.length+1}),this.quill.update(k.default.sources.USER),this.quill.setSelection(re,ue,k.default.sources.SILENT)}}}}function q(B){return{key:B[0].toUpperCase(),shortKey:!0,handler:function(oe,X){this.quill.format(B,!X.format[B],k.default.sources.USER)}}}function K(B){if(typeof B=="string"||typeof B=="number")return K({key:B});if((typeof B>"u"?"undefined":i(B))==="object"&&(B=(0,h.default)(B,!1)),typeof B.key=="string")if(J.keys[B.key.toUpperCase()]!=null)B.key=J.keys[B.key.toUpperCase()];else if(B.key.length===1)B.key=B.key.toUpperCase().charCodeAt(0);else return null;return B.shortKey&&(B[Y]=B.shortKey,delete B.shortKey),B}r.default=J,r.SHORTKEY=Y},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function w(b,_){var N=[],k=!0,E=!1,T=void 0;try{for(var R=b[Symbol.iterator](),$;!(k=($=R.next()).done)&&(N.push($.value),!(_&&N.length===_));k=!0);}catch(M){E=!0,T=M}finally{try{!k&&R.return&&R.return()}finally{if(E)throw T}}return N}return function(b,_){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return w(b,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function w(b,_,N){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,_);if(k===void 0){var E=Object.getPrototypeOf(b);return E===null?void 0:w(E,_,N)}else{if("value"in k)return k.value;var T=k.get;return T===void 0?void 0:T.call(N)}},c=function(){function w(b,_){for(var N=0;N<_.length;N++){var k=_[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,_,N){return _&&w(b.prototype,_),N&&w(b,N),b}}(),d=a(0),h=f(d),m=a(7),u=f(m);function f(w){return w&&w.__esModule?w:{default:w}}function p(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function x(w,b){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:w}function v(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(w,b):w.__proto__=b)}var y=function(w){v(b,w),c(b,null,[{key:"value",value:function(){}}]);function b(_,N){p(this,b);var k=x(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,_));return k.selection=N,k.textNode=document.createTextNode(b.CONTENTS),k.domNode.appendChild(k.textNode),k._length=0,k}return c(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,k){if(this._length!==0)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,N,k);for(var E=this,T=0;E!=null&&E.statics.scope!==h.default.Scope.BLOCK_BLOT;)T+=E.offset(E.parent),E=E.parent;E!=null&&(this._length=b.CONTENTS.length,E.optimize(),E.formatAt(T,b.CONTENTS.length,N,k),this._length=0)}},{key:"index",value:function(N,k){return N===this.textNode?0:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,N,k)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,k=this.selection.getNativeRange(),E=void 0,T=void 0,R=void 0;if(k!=null&&k.start.node===N&&k.end.node===N){var $=[N,k.start.offset,k.end.offset];E=$[0],T=$[1],R=$[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var M=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof u.default?(E=this.next.domNode,this.next.insertAt(0,M),this.textNode.data=b.CONTENTS):(this.textNode.data=M,this.parent.insertBefore(h.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),T!=null){var A=[T,R].map(function(z){return Math.max(0,Math.min(E.data.length,z-1))}),C=i(A,2);return T=C[0],R=C[1],{startNode:E,startOffset:T,endNode:E,endOffset:R}}}}},{key:"update",value:function(N,k){var E=this;if(N.some(function(R){return R.type==="characterData"&&R.target===E.textNode})){var T=this.restore();T&&(k.range=T)}}},{key:"value",value:function(){return""}}]),b}(h.default.Embed);y.blotName="cursor",y.className="ql-cursor",y.tagName="span",y.CONTENTS="\uFEFF",r.default=y},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=h(i),c=a(4),d=h(c);function h(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function u(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function f(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){f(v,x);function v(){return m(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(o.default.Container);p.allowedChildren=[d.default,c.BlockEmbed,p],r.default=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var i=function(){function y(w,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,b,_){return b&&y(w.prototype,b),_&&y(w,_),w}}(),o=function y(w,b,_){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,b);if(N===void 0){var k=Object.getPrototypeOf(w);return k===null?void 0:y(k,b,_)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(_)}},c=a(0),d=h(c);function h(y){return y&&y.__esModule?y:{default:y}}function m(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function u(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function f(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var p=function(y){f(w,y);function w(){return m(this,w),u(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"value",value:function(_){var N=o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,_);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(k){return("00"+parseInt(k).toString(16)).slice(-2)}).join("")):N}}]),w}(d.default.Attributor.Style),x=new d.default.Attributor.Class("color","ql-color",{scope:d.default.Scope.INLINE}),v=new p("color","color",{scope:d.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=x,r.ColorStyle=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var i=function(){function v(y,w){for(var b=0;b<w.length;b++){var _=w[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,w,b){return w&&v(y.prototype,w),b&&v(y,b),y}}(),o=function v(y,w,b){y===null&&(y=Function.prototype);var _=Object.getOwnPropertyDescriptor(y,w);if(_===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:v(N,w,b)}else{if("value"in _)return _.value;var k=_.get;return k===void 0?void 0:k.call(b)}},c=a(6),d=h(c);function h(v){return v&&v.__esModule?v:{default:v}}function m(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function u(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function f(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=function(v){f(y,v);function y(){return m(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"format",value:function(b,_){if(b!==this.statics.blotName||!_)return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,b,_);_=this.constructor.sanitize(_),this.domNode.setAttribute("href",_)}}],[{key:"create",value:function(b){var _=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,b);return b=this.sanitize(b),_.setAttribute("href",b),_.setAttribute("rel","noopener noreferrer"),_.setAttribute("target","_blank"),_}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return x(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),y}(d.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function x(v,y){var w=document.createElement("a");w.href=v;var b=w.href.slice(0,w.href.indexOf(":"));return y.indexOf(b)>-1}r.default=p,r.sanitize=x},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},o=function(){function y(w,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,b,_){return b&&y(w.prototype,b),_&&y(w,_),w}}(),c=a(23),d=u(c),h=a(107),m=u(h);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}var p=0;function x(y,w){y.setAttribute(w,y.getAttribute(w)!=="true")}var v=function(){function y(w){var b=this;f(this,y),this.select=w,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(_){switch(_.keyCode){case d.default.keys.ENTER:b.togglePicker();break;case d.default.keys.ESCAPE:b.escape(),_.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(y,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),x(this.label,"aria-expanded"),x(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var _=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),b.hasAttribute("value")&&N.setAttribute("data-value",b.getAttribute("value")),b.textContent&&N.setAttribute("data-label",b.textContent),N.addEventListener("click",function(){_.selectItem(N,!0)}),N.addEventListener("keydown",function(k){switch(k.keyCode){case d.default.keys.ENTER:_.selectItem(N,!0),k.preventDefault();break;case d.default.keys.ESCAPE:_.escape(),k.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=m.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,_=document.createElement("span");_.classList.add("ql-picker-options"),_.setAttribute("aria-hidden","true"),_.tabIndex="-1",_.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",_.id),this.options=_,[].slice.call(this.select.options).forEach(function(N){var k=b.buildItem(N);_.appendChild(k),N.selected===!0&&b.selectItem(k)}),this.container.appendChild(_)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(_){b.container.setAttribute(_.name,_.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(b!==N&&(N!=null&&N.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),_))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var k=document.createEvent("Event");k.initEvent("change",!0,!0),this.select.dispatchEvent(k)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var _=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(_)}else this.selectItem(null);var N=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),y}();r.default=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=O(i),c=a(5),d=O(c),h=a(4),m=O(h),u=a(16),f=O(u),p=a(25),x=O(p),v=a(24),y=O(v),w=a(35),b=O(w),_=a(6),N=O(_),k=a(22),E=O(k),T=a(7),R=O(T),$=a(55),M=O($),A=a(42),C=O(A),z=a(23),P=O(z);function O(Y){return Y&&Y.__esModule?Y:{default:Y}}d.default.register({"blots/block":m.default,"blots/block/embed":h.BlockEmbed,"blots/break":f.default,"blots/container":x.default,"blots/cursor":y.default,"blots/embed":b.default,"blots/inline":N.default,"blots/scroll":E.default,"blots/text":R.default,"modules/clipboard":M.default,"modules/history":C.default,"modules/keyboard":P.default}),o.default.register(m.default,f.default,y.default,N.default,E.default,R.default),r.default=d.default},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(1),o=function(){function c(d){this.domNode=d,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(d){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var h;return Array.isArray(this.tagName)?(typeof d=="string"&&(d=d.toUpperCase(),parseInt(d).toString()===d&&(d=parseInt(d))),typeof d=="number"?h=document.createElement(this.tagName[d-1]):this.tagName.indexOf(d)>-1?h=document.createElement(d):h=document.createElement(this.tagName[0])):h=document.createElement(this.tagName),this.className&&h.classList.add(this.className),h},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var d=this.domNode.cloneNode(!1);return i.create(d)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},c.prototype.deleteAt=function(d,h){var m=this.isolate(d,h);m.remove()},c.prototype.formatAt=function(d,h,m,u){var f=this.isolate(d,h);if(i.query(m,i.Scope.BLOT)!=null&&u)f.wrap(m,u);else if(i.query(m,i.Scope.ATTRIBUTE)!=null){var p=i.create(this.statics.scope);f.wrap(p),p.format(m,u)}},c.prototype.insertAt=function(d,h,m){var u=m==null?i.create("text",h):i.create(h,m),f=this.split(d);this.parent.insertBefore(u,f)},c.prototype.insertInto=function(d,h){h===void 0&&(h=null),this.parent!=null&&this.parent.children.remove(this);var m=null;d.children.insertBefore(this,h),h!=null&&(m=h.domNode),(this.domNode.parentNode!=d.domNode||this.domNode.nextSibling!=m)&&d.domNode.insertBefore(this.domNode,m),this.parent=d,this.attach()},c.prototype.isolate=function(d,h){var m=this.split(d);return m.split(h),m},c.prototype.length=function(){return 1},c.prototype.offset=function(d){return d===void 0&&(d=this.parent),this.parent==null||this==d?0:this.parent.children.offset(this)+this.parent.offset(d)},c.prototype.optimize=function(d){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(d){d.parent!=null&&(d.parent.insertBefore(this,d.next),d.remove())},c.prototype.replaceWith=function(d,h){var m=typeof d=="string"?i.create(d,h):d;return m.replace(this),m},c.prototype.split=function(d,h){return d===0?this:this.next},c.prototype.update=function(d,h){},c.prototype.wrap=function(d,h){var m=typeof d=="string"?i.create(d,h):d;return this.parent!=null&&this.parent.insertBefore(m,this.next),m.appendChild(this),m},c.blotName="abstract",c}();r.default=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(12),o=a(32),c=a(33),d=a(1),h=function(){function m(u){this.attributes={},this.domNode=u,this.build()}return m.prototype.attribute=function(u,f){f?u.add(this.domNode,f)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])},m.prototype.build=function(){var u=this;this.attributes={};var f=i.default.keys(this.domNode),p=o.default.keys(this.domNode),x=c.default.keys(this.domNode);f.concat(p).concat(x).forEach(function(v){var y=d.query(v,d.Scope.ATTRIBUTE);y instanceof i.default&&(u.attributes[y.attrName]=y)})},m.prototype.copy=function(u){var f=this;Object.keys(this.attributes).forEach(function(p){var x=f.attributes[p].value(f.domNode);u.format(p,x)})},m.prototype.move=function(u){var f=this;this.copy(u),Object.keys(this.attributes).forEach(function(p){f.attributes[p].remove(f.domNode)}),this.attributes={}},m.prototype.values=function(){var u=this;return Object.keys(this.attributes).reduce(function(f,p){return f[p]=u.attributes[p].value(u.domNode),f},{})},m}();r.default=h},function(n,r,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var f in u)u.hasOwnProperty(f)&&(m[f]=u[f])};return function(m,u){h(m,u);function f(){this.constructor=m}m.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(12);function c(h,m){var u=h.getAttribute("class")||"";return u.split(/\s+/).filter(function(f){return f.indexOf(m+"-")===0})}var d=function(h){i(m,h);function m(){return h!==null&&h.apply(this,arguments)||this}return m.keys=function(u){return(u.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},m.prototype.add=function(u,f){return this.canAdd(u,f)?(this.remove(u),u.classList.add(this.keyName+"-"+f),!0):!1},m.prototype.remove=function(u){var f=c(u,this.keyName);f.forEach(function(p){u.classList.remove(p)}),u.classList.length===0&&u.removeAttribute("class")},m.prototype.value=function(u){var f=c(u,this.keyName)[0]||"",p=f.slice(this.keyName.length+1);return this.canAdd(u,p)?p:""},m}(o.default);r.default=d},function(n,r,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var f in u)u.hasOwnProperty(f)&&(m[f]=u[f])};return function(m,u){h(m,u);function f(){this.constructor=m}m.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(12);function c(h){var m=h.split("-"),u=m.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return m[0]+u}var d=function(h){i(m,h);function m(){return h!==null&&h.apply(this,arguments)||this}return m.keys=function(u){return(u.getAttribute("style")||"").split(";").map(function(f){var p=f.split(":");return p[0].trim()})},m.prototype.add=function(u,f){return this.canAdd(u,f)?(u.style[c(this.keyName)]=f,!0):!1},m.prototype.remove=function(u){u.style[c(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")},m.prototype.value=function(u){var f=u.style[c(this.keyName)];return this.canAdd(u,f)?f:""},m}(o.default);r.default=d},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function d(h,m){for(var u=0;u<m.length;u++){var f=m[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}return function(h,m,u){return m&&d(h.prototype,m),u&&d(h,u),h}}();function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}var c=function(){function d(h,m){o(this,d),this.quill=h,this.options=m,this.modules={}}return i(d,[{key:"init",value:function(){var m=this;Object.keys(this.options.modules).forEach(function(u){m.modules[u]==null&&m.addModule(u)})}},{key:"addModule",value:function(m){var u=this.quill.constructor.import("modules/"+m);return this.modules[m]=new u(this.quill,this.options.modules[m]||{}),this.modules[m]}}]),d}();c.DEFAULTS={modules:{}},c.themes={default:c},r.default=c},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function w(b,_){for(var N=0;N<_.length;N++){var k=_[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,_,N){return _&&w(b.prototype,_),N&&w(b,N),b}}(),o=function w(b,_,N){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,_);if(k===void 0){var E=Object.getPrototypeOf(b);return E===null?void 0:w(E,_,N)}else{if("value"in k)return k.value;var T=k.get;return T===void 0?void 0:T.call(N)}},c=a(0),d=u(c),h=a(7),m=u(h);function u(w){return w&&w.__esModule?w:{default:w}}function f(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function p(w,b){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:w}function x(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(w,b):w.__proto__=b)}var v="\uFEFF",y=function(w){x(b,w);function b(_){f(this,b);var N=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,_));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(k){N.contentNode.appendChild(k)}),N.leftGuard=document.createTextNode(v),N.rightGuard=document.createTextNode(v),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return i(b,[{key:"index",value:function(N,k){return N===this.leftGuard?0:N===this.rightGuard?1:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,N,k)}},{key:"restore",value:function(N){var k=void 0,E=void 0,T=N.data.split(v).join("");if(N===this.leftGuard)if(this.prev instanceof m.default){var R=this.prev.length();this.prev.insertAt(R,T),k={startNode:this.prev.domNode,startOffset:R+T.length}}else E=document.createTextNode(T),this.parent.insertBefore(d.default.create(E),this),k={startNode:E,startOffset:T.length};else N===this.rightGuard&&(this.next instanceof m.default?(this.next.insertAt(0,T),k={startNode:this.next.domNode,startOffset:T.length}):(E=document.createTextNode(T),this.parent.insertBefore(d.default.create(E),this.next),k={startNode:E,startOffset:T.length}));return N.data=v,k}},{key:"update",value:function(N,k){var E=this;N.forEach(function(T){if(T.type==="characterData"&&(T.target===E.leftGuard||T.target===E.rightGuard)){var R=E.restore(T.target);R&&(k.range=R)}})}}]),b}(d.default.Embed);r.default=y},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var i=a(0),o=c(i);function c(f){return f&&f.__esModule?f:{default:f}}var d={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},h=new o.default.Attributor.Attribute("align","align",d),m=new o.default.Attributor.Class("align","ql-align",d),u=new o.default.Attributor.Style("align","text-align",d);r.AlignAttribute=h,r.AlignClass=m,r.AlignStyle=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var i=a(0),o=d(i),c=a(26);function d(u){return u&&u.__esModule?u:{default:u}}var h=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),m=new c.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=h,r.BackgroundStyle=m},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var i=a(0),o=c(i);function c(f){return f&&f.__esModule?f:{default:f}}var d={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},h=new o.default.Attributor.Attribute("direction","dir",d),m=new o.default.Attributor.Class("direction","ql-direction",d),u=new o.default.Attributor.Style("direction","direction",d);r.DirectionAttribute=h,r.DirectionClass=m,r.DirectionStyle=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var i=function(){function w(b,_){for(var N=0;N<_.length;N++){var k=_[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,_,N){return _&&w(b.prototype,_),N&&w(b,N),b}}(),o=function w(b,_,N){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,_);if(k===void 0){var E=Object.getPrototypeOf(b);return E===null?void 0:w(E,_,N)}else{if("value"in k)return k.value;var T=k.get;return T===void 0?void 0:T.call(N)}},c=a(0),d=h(c);function h(w){return w&&w.__esModule?w:{default:w}}function m(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function u(w,b){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:w}function f(w,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);w.prototype=Object.create(b&&b.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(w,b):w.__proto__=b)}var p={scope:d.default.Scope.INLINE,whitelist:["serif","monospace"]},x=new d.default.Attributor.Class("font","ql-font",p),v=function(w){f(b,w);function b(){return m(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"value",value:function(N){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),b}(d.default.Attributor.Style),y=new v("font","font-family",p);r.FontStyle=y,r.FontClass=x},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var i=a(0),o=c(i);function c(m){return m&&m.__esModule?m:{default:m}}var d=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),h=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=d,r.SizeStyle=h},function(n,r,a){n.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var i=function(){function _(N,k){for(var E=0;E<k.length;E++){var T=k[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(N,T.key,T)}}return function(N,k,E){return k&&_(N.prototype,k),E&&_(N,E),N}}(),o=a(0),c=f(o),d=a(5),h=f(d),m=a(9),u=f(m);function f(_){return _&&_.__esModule?_:{default:_}}function p(_,N){if(!(_ instanceof N))throw new TypeError("Cannot call a class as a function")}function x(_,N){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:_}function v(_,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);_.prototype=Object.create(N&&N.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(_,N):_.__proto__=N)}var y=function(_){v(N,_);function N(k,E){p(this,N);var T=x(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,k,E));return T.lastRecorded=0,T.ignoreChange=!1,T.clear(),T.quill.on(h.default.events.EDITOR_CHANGE,function(R,$,M,A){R!==h.default.events.TEXT_CHANGE||T.ignoreChange||(!T.options.userOnly||A===h.default.sources.USER?T.record($,M):T.transform($))}),T.quill.keyboard.addBinding({key:"Z",shortKey:!0},T.undo.bind(T)),T.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},T.redo.bind(T)),/Win/i.test(navigator.platform)&&T.quill.keyboard.addBinding({key:"Y",shortKey:!0},T.redo.bind(T)),T}return i(N,[{key:"change",value:function(E,T){if(this.stack[E].length!==0){var R=this.stack[E].pop();this.stack[T].push(R),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(R[E],h.default.sources.USER),this.ignoreChange=!1;var $=b(R[E]);this.quill.setSelection($)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(E,T){if(E.ops.length!==0){this.stack.redo=[];var R=this.quill.getContents().diff(T),$=Date.now();if(this.lastRecorded+this.options.delay>$&&this.stack.undo.length>0){var M=this.stack.undo.pop();R=R.compose(M.undo),E=M.redo.compose(E)}else this.lastRecorded=$;this.stack.undo.push({redo:E,undo:R}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(E){this.stack.undo.forEach(function(T){T.undo=E.transform(T.undo,!0),T.redo=E.transform(T.redo,!0)}),this.stack.redo.forEach(function(T){T.undo=E.transform(T.undo,!0),T.redo=E.transform(T.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N}(u.default);y.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function w(_){var N=_.ops[_.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(k){return c.default.query(k,c.default.Scope.BLOCK)!=null}):!1}function b(_){var N=_.reduce(function(E,T){return E+=T.delete||0,E},0),k=_.length()-N;return w(_)&&(k-=1),k}r.default=y,r.getLastChangeIndex=b},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var i=function(){function H(U,q){for(var K=0;K<q.length;K++){var B=q[K];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(U,B.key,B)}}return function(U,q,K){return q&&H(U.prototype,q),K&&H(U,K),U}}(),o=function H(U,q,K){U===null&&(U=Function.prototype);var B=Object.getOwnPropertyDescriptor(U,q);if(B===void 0){var W=Object.getPrototypeOf(U);return W===null?void 0:H(W,q,K)}else{if("value"in B)return B.value;var oe=B.get;return oe===void 0?void 0:oe.call(K)}},c=a(3),d=$(c),h=a(2),m=$(h),u=a(8),f=$(u),p=a(23),x=$(p),v=a(34),y=$(v),w=a(59),b=$(w),_=a(60),N=$(_),k=a(28),E=$(k),T=a(61),R=$(T);function $(H){return H&&H.__esModule?H:{default:H}}function M(H,U){if(!(H instanceof U))throw new TypeError("Cannot call a class as a function")}function A(H,U){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:H}function C(H,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);H.prototype=Object.create(U&&U.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(H,U):H.__proto__=U)}var z=[!1,"center","right","justify"],P=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],O=[!1,"serif","monospace"],Y=["1","2","3",!1],J=["small",!1,"large","huge"],G=function(H){C(U,H);function U(q,K){M(this,U);var B=A(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,q,K)),W=function oe(X){if(!document.body.contains(q.root))return document.body.removeEventListener("click",oe);B.tooltip!=null&&!B.tooltip.root.contains(X.target)&&document.activeElement!==B.tooltip.textbox&&!B.quill.hasFocus()&&B.tooltip.hide(),B.pickers!=null&&B.pickers.forEach(function(re){re.container.contains(X.target)||re.close()})};return q.emitter.listenDOM("click",document.body,W),B}return i(U,[{key:"addModule",value:function(K){var B=o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"addModule",this).call(this,K);return K==="toolbar"&&this.extendToolbar(B),B}},{key:"buildButtons",value:function(K,B){K.forEach(function(W){var oe=W.getAttribute("class")||"";oe.split(/\s+/).forEach(function(X){if(X.startsWith("ql-")&&(X=X.slice(3),B[X]!=null))if(X==="direction")W.innerHTML=B[X][""]+B[X].rtl;else if(typeof B[X]=="string")W.innerHTML=B[X];else{var re=W.value||"";re!=null&&B[X][re]&&(W.innerHTML=B[X][re])}})})}},{key:"buildPickers",value:function(K,B){var W=this;this.pickers=K.map(function(X){if(X.classList.contains("ql-align"))return X.querySelector("option")==null&&V(X,z),new N.default(X,B.align);if(X.classList.contains("ql-background")||X.classList.contains("ql-color")){var re=X.classList.contains("ql-background")?"background":"color";return X.querySelector("option")==null&&V(X,P,re==="background"?"#ffffff":"#000000"),new b.default(X,B[re])}else return X.querySelector("option")==null&&(X.classList.contains("ql-font")?V(X,O):X.classList.contains("ql-header")?V(X,Y):X.classList.contains("ql-size")&&V(X,J)),new E.default(X)});var oe=function(){W.pickers.forEach(function(re){re.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,oe)}}]),U}(y.default);G.DEFAULTS=(0,d.default)(!0,{},y.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var U=this,q=this.container.querySelector("input.ql-image[type=file]");q==null&&(q=document.createElement("input"),q.setAttribute("type","file"),q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),q.classList.add("ql-image"),q.addEventListener("change",function(){if(q.files!=null&&q.files[0]!=null){var K=new FileReader;K.onload=function(B){var W=U.quill.getSelection(!0);U.quill.updateContents(new m.default().retain(W.index).delete(W.length).insert({image:B.target.result}),f.default.sources.USER),U.quill.setSelection(W.index+1,f.default.sources.SILENT),q.value=""},K.readAsDataURL(q.files[0])}}),this.container.appendChild(q)),q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var F=function(H){C(U,H);function U(q,K){M(this,U);var B=A(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,q,K));return B.textbox=B.root.querySelector('input[type="text"]'),B.listen(),B}return i(U,[{key:"listen",value:function(){var K=this;this.textbox.addEventListener("keydown",function(B){x.default.match(B,"enter")?(K.save(),B.preventDefault()):x.default.match(B,"escape")&&(K.cancel(),B.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),B!=null?this.textbox.value=B:K!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+K)||""),this.root.setAttribute("data-mode",K)}},{key:"restoreFocus",value:function(){var K=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=K}},{key:"save",value:function(){var K=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var B=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",K,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",K,f.default.sources.USER)),this.quill.root.scrollTop=B;break}case"video":K=I(K);case"formula":{if(!K)break;var W=this.quill.getSelection(!0);if(W!=null){var oe=W.index+W.length;this.quill.insertEmbed(oe,this.root.getAttribute("data-mode"),K,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(oe+1," ",f.default.sources.USER),this.quill.setSelection(oe+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),U}(R.default);function I(H){var U=H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return U?(U[1]||"https")+"://www.youtube.com/embed/"+U[2]+"?showinfo=0":(U=H.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(U[1]||"https")+"://player.vimeo.com/video/"+U[2]+"/":H}function V(H,U){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;U.forEach(function(K){var B=document.createElement("option");K===q?B.setAttribute("selected","selected"):B.setAttribute("value",K),H.appendChild(B)})}r.BaseTooltip=F,r.default=G},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},o.prototype.contains=function(c){for(var d,h=this.iterator();d=h();)if(d===c)return!0;return!1},o.prototype.insertBefore=function(c,d){c&&(c.next=d,d!=null?(c.prev=d.prev,d.prev!=null&&(d.prev.next=c),d.prev=c,d===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},o.prototype.offset=function(c){for(var d=0,h=this.head;h!=null;){if(h===c)return d;d+=h.length(),h=h.next}return-1},o.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},o.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var d=c;return c!=null&&(c=c.next),d}},o.prototype.find=function(c,d){d===void 0&&(d=!1);for(var h,m=this.iterator();h=m();){var u=h.length();if(c<u||d&&c===u&&(h.next==null||h.next.length()!==0))return[h,c];c-=u}return[null,0]},o.prototype.forEach=function(c){for(var d,h=this.iterator();d=h();)c(d)},o.prototype.forEachAt=function(c,d,h){if(!(d<=0))for(var m=this.find(c),u=m[0],f=m[1],p,x=c-f,v=this.iterator(u);(p=v())&&x<c+d;){var y=p.length();c>x?h(p,c-x,Math.min(d,x+y-c)):h(p,0,Math.min(y,c+d-x)),x+=y}},o.prototype.map=function(c){return this.reduce(function(d,h){return d.push(c(h)),d},[])},o.prototype.reduce=function(c,d){for(var h,m=this.iterator();h=m();)d=c(d,h);return d},o}();r.default=i},function(n,r,a){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var x in p)p.hasOwnProperty(x)&&(f[x]=p[x])};return function(f,p){u(f,p);function x(){this.constructor=f}f.prototype=p===null?Object.create(p):(x.prototype=p.prototype,new x)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(17),c=a(1),d={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},h=100,m=function(u){i(f,u);function f(p){var x=u.call(this,p)||this;return x.scroll=x,x.observer=new MutationObserver(function(v){x.update(v)}),x.observer.observe(x.domNode,d),x.attach(),x}return f.prototype.detach=function(){u.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(p,x){this.update(),p===0&&x===this.length()?this.children.forEach(function(v){v.remove()}):u.prototype.deleteAt.call(this,p,x)},f.prototype.formatAt=function(p,x,v,y){this.update(),u.prototype.formatAt.call(this,p,x,v,y)},f.prototype.insertAt=function(p,x,v){this.update(),u.prototype.insertAt.call(this,p,x,v)},f.prototype.optimize=function(p,x){var v=this;p===void 0&&(p=[]),x===void 0&&(x={}),u.prototype.optimize.call(this,x);for(var y=[].slice.call(this.observer.takeRecords());y.length>0;)p.push(y.pop());for(var w=function(k,E){E===void 0&&(E=!0),!(k==null||k===v)&&k.domNode.parentNode!=null&&(k.domNode[c.DATA_KEY].mutations==null&&(k.domNode[c.DATA_KEY].mutations=[]),E&&w(k.parent))},b=function(k){k.domNode[c.DATA_KEY]==null||k.domNode[c.DATA_KEY].mutations==null||(k instanceof o.default&&k.children.forEach(b),k.optimize(x))},_=p,N=0;_.length>0;N+=1){if(N>=h)throw new Error("[Parchment] Maximum optimize iterations reached");for(_.forEach(function(k){var E=c.find(k.target,!0);E!=null&&(E.domNode===k.target&&(k.type==="childList"?(w(c.find(k.previousSibling,!1)),[].forEach.call(k.addedNodes,function(T){var R=c.find(T,!1);w(R,!1),R instanceof o.default&&R.children.forEach(function($){w($,!1)})})):k.type==="attributes"&&w(E.prev)),w(E))}),this.children.forEach(b),_=[].slice.call(this.observer.takeRecords()),y=_.slice();y.length>0;)p.push(y.pop())}},f.prototype.update=function(p,x){var v=this;x===void 0&&(x={}),p=p||this.observer.takeRecords(),p.map(function(y){var w=c.find(y.target,!0);return w==null?null:w.domNode[c.DATA_KEY].mutations==null?(w.domNode[c.DATA_KEY].mutations=[y],w):(w.domNode[c.DATA_KEY].mutations.push(y),null)}).forEach(function(y){y==null||y===v||y.domNode[c.DATA_KEY]==null||y.update(y.domNode[c.DATA_KEY].mutations||[],x)}),this.domNode[c.DATA_KEY].mutations!=null&&u.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,x),this.optimize(p,x)},f.blotName="scroll",f.defaultChild="block",f.scope=c.Scope.BLOCK_BLOT,f.tagName="DIV",f}(o.default);r.default=m},function(n,r,a){var i=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){m(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(18),c=a(1);function d(m,u){if(Object.keys(m).length!==Object.keys(u).length)return!1;for(var f in m)if(m[f]!==u[f])return!1;return!0}var h=function(m){i(u,m);function u(){return m!==null&&m.apply(this,arguments)||this}return u.formats=function(f){if(f.tagName!==u.tagName)return m.formats.call(this,f)},u.prototype.format=function(f,p){var x=this;f===this.statics.blotName&&!p?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(u.blotName,!0)),x.attributes.copy(v)}),this.unwrap()):m.prototype.format.call(this,f,p)},u.prototype.formatAt=function(f,p,x,v){if(this.formats()[x]!=null||c.query(x,c.Scope.ATTRIBUTE)){var y=this.isolate(f,p);y.format(x,v)}else m.prototype.formatAt.call(this,f,p,x,v)},u.prototype.optimize=function(f){m.prototype.optimize.call(this,f);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var x=this.next;x instanceof u&&x.prev===this&&d(p,x.formats())&&(x.moveChildren(this),x.remove())},u.blotName="inline",u.scope=c.Scope.INLINE_BLOT,u.tagName="SPAN",u}(o.default);r.default=h},function(n,r,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var f in u)u.hasOwnProperty(f)&&(m[f]=u[f])};return function(m,u){h(m,u);function f(){this.constructor=m}m.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(18),c=a(1),d=function(h){i(m,h);function m(){return h!==null&&h.apply(this,arguments)||this}return m.formats=function(u){var f=c.query(m.blotName).tagName;if(u.tagName!==f)return h.formats.call(this,u)},m.prototype.format=function(u,f){c.query(u,c.Scope.BLOCK)!=null&&(u===this.statics.blotName&&!f?this.replaceWith(m.blotName):h.prototype.format.call(this,u,f))},m.prototype.formatAt=function(u,f,p,x){c.query(p,c.Scope.BLOCK)!=null?this.format(p,x):h.prototype.formatAt.call(this,u,f,p,x)},m.prototype.insertAt=function(u,f,p){if(p==null||c.query(f,c.Scope.INLINE)!=null)h.prototype.insertAt.call(this,u,f,p);else{var x=this.split(u),v=c.create(f,p);x.parent.insertBefore(v,x)}},m.prototype.update=function(u,f){navigator.userAgent.match(/Trident/)?this.build():h.prototype.update.call(this,u,f)},m.blotName="block",m.scope=c.Scope.BLOCK_BLOT,m.tagName="P",m}(o.default);r.default=d},function(n,r,a){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var u in m)m.hasOwnProperty(u)&&(h[u]=m[u])};return function(h,m){d(h,m);function u(){this.constructor=h}h.prototype=m===null?Object.create(m):(u.prototype=m.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(19),c=function(d){i(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.formats=function(m){},h.prototype.format=function(m,u){d.prototype.formatAt.call(this,0,this.length(),m,u)},h.prototype.formatAt=function(m,u,f,p){m===0&&u===this.length()?this.format(f,p):d.prototype.formatAt.call(this,m,u,f,p)},h.prototype.formats=function(){return this.statics.formats(this.domNode)},h}(o.default);r.default=c},function(n,r,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var f in u)u.hasOwnProperty(f)&&(m[f]=u[f])};return function(m,u){h(m,u);function f(){this.constructor=m}m.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(19),c=a(1),d=function(h){i(m,h);function m(u){var f=h.call(this,u)||this;return f.text=f.statics.value(f.domNode),f}return m.create=function(u){return document.createTextNode(u)},m.value=function(u){var f=u.data;return f.normalize&&(f=f.normalize()),f},m.prototype.deleteAt=function(u,f){this.domNode.data=this.text=this.text.slice(0,u)+this.text.slice(u+f)},m.prototype.index=function(u,f){return this.domNode===u?f:-1},m.prototype.insertAt=function(u,f,p){p==null?(this.text=this.text.slice(0,u)+f+this.text.slice(u),this.domNode.data=this.text):h.prototype.insertAt.call(this,u,f,p)},m.prototype.length=function(){return this.text.length},m.prototype.optimize=function(u){h.prototype.optimize.call(this,u),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof m&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},m.prototype.position=function(u,f){return[this.domNode,u]},m.prototype.split=function(u,f){if(f===void 0&&(f=!1),!f){if(u===0)return this;if(u===this.length())return this.next}var p=c.create(this.domNode.splitText(u));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},m.prototype.update=function(u,f){var p=this;u.some(function(x){return x.type==="characterData"&&x.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},m.prototype.value=function(){return this.text},m.blotName="text",m.scope=c.Scope.INLINE_BLOT,m}(o.default);r.default=d},function(n,r,a){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,d){return arguments.length>1&&!this.contains(c)==!d?d:o.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,d){return d=d||0,this.substr(d,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,d){var h=this.toString();(typeof d!="number"||!isFinite(d)||Math.floor(d)!==d||d>h.length)&&(d=h.length),d-=c.length;var m=h.indexOf(c,d);return m!==-1&&m===d}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("predicate must be a function");for(var h=Object(this),m=h.length>>>0,u=arguments[1],f,p=0;p<m;p++)if(f=h[p],d.call(u,f,p,h))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var a=-1,i=1,o=0;function c(N,k,E){if(N==k)return N?[[o,N]]:[];(E<0||N.length<E)&&(E=null);var T=u(N,k),R=N.substring(0,T);N=N.substring(T),k=k.substring(T),T=f(N,k);var $=N.substring(N.length-T);N=N.substring(0,N.length-T),k=k.substring(0,k.length-T);var M=d(N,k);return R&&M.unshift([o,R]),$&&M.push([o,$]),x(M),E!=null&&(M=w(M,E)),M=b(M),M}function d(N,k){var E;if(!N)return[[i,k]];if(!k)return[[a,N]];var T=N.length>k.length?N:k,R=N.length>k.length?k:N,$=T.indexOf(R);if($!=-1)return E=[[i,T.substring(0,$)],[o,R],[i,T.substring($+R.length)]],N.length>k.length&&(E[0][0]=E[2][0]=a),E;if(R.length==1)return[[a,N],[i,k]];var M=p(N,k);if(M){var A=M[0],C=M[1],z=M[2],P=M[3],O=M[4],Y=c(A,z),J=c(C,P);return Y.concat([[o,O]],J)}return h(N,k)}function h(N,k){for(var E=N.length,T=k.length,R=Math.ceil((E+T)/2),$=R,M=2*R,A=new Array(M),C=new Array(M),z=0;z<M;z++)A[z]=-1,C[z]=-1;A[$+1]=0,C[$+1]=0;for(var P=E-T,O=P%2!=0,Y=0,J=0,G=0,F=0,I=0;I<R;I++){for(var V=-I+Y;V<=I-J;V+=2){var H=$+V,U;V==-I||V!=I&&A[H-1]<A[H+1]?U=A[H+1]:U=A[H-1]+1;for(var q=U-V;U<E&&q<T&&N.charAt(U)==k.charAt(q);)U++,q++;if(A[H]=U,U>E)J+=2;else if(q>T)Y+=2;else if(O){var K=$+P-V;if(K>=0&&K<M&&C[K]!=-1){var B=E-C[K];if(U>=B)return m(N,k,U,q)}}}for(var W=-I+G;W<=I-F;W+=2){var K=$+W,B;W==-I||W!=I&&C[K-1]<C[K+1]?B=C[K+1]:B=C[K-1]+1;for(var oe=B-W;B<E&&oe<T&&N.charAt(E-B-1)==k.charAt(T-oe-1);)B++,oe++;if(C[K]=B,B>E)F+=2;else if(oe>T)G+=2;else if(!O){var H=$+P-W;if(H>=0&&H<M&&A[H]!=-1){var U=A[H],q=$+U-H;if(B=E-B,U>=B)return m(N,k,U,q)}}}}return[[a,N],[i,k]]}function m(N,k,E,T){var R=N.substring(0,E),$=k.substring(0,T),M=N.substring(E),A=k.substring(T),C=c(R,$),z=c(M,A);return C.concat(z)}function u(N,k){if(!N||!k||N.charAt(0)!=k.charAt(0))return 0;for(var E=0,T=Math.min(N.length,k.length),R=T,$=0;E<R;)N.substring($,R)==k.substring($,R)?(E=R,$=E):T=R,R=Math.floor((T-E)/2+E);return R}function f(N,k){if(!N||!k||N.charAt(N.length-1)!=k.charAt(k.length-1))return 0;for(var E=0,T=Math.min(N.length,k.length),R=T,$=0;E<R;)N.substring(N.length-R,N.length-$)==k.substring(k.length-R,k.length-$)?(E=R,$=E):T=R,R=Math.floor((T-E)/2+E);return R}function p(N,k){var E=N.length>k.length?N:k,T=N.length>k.length?k:N;if(E.length<4||T.length*2<E.length)return null;function R(J,G,F){for(var I=J.substring(F,F+Math.floor(J.length/4)),V=-1,H="",U,q,K,B;(V=G.indexOf(I,V+1))!=-1;){var W=u(J.substring(F),G.substring(V)),oe=f(J.substring(0,F),G.substring(0,V));H.length<oe+W&&(H=G.substring(V-oe,V)+G.substring(V,V+W),U=J.substring(0,F-oe),q=J.substring(F+W),K=G.substring(0,V-oe),B=G.substring(V+W))}return H.length*2>=J.length?[U,q,K,B,H]:null}var $=R(E,T,Math.ceil(E.length/4)),M=R(E,T,Math.ceil(E.length/2)),A;if(!$&&!M)return null;M?$?A=$[4].length>M[4].length?$:M:A=M:A=$;var C,z,P,O;N.length>k.length?(C=A[0],z=A[1],P=A[2],O=A[3]):(P=A[0],O=A[1],C=A[2],z=A[3]);var Y=A[4];return[C,z,P,O,Y]}function x(N){N.push([o,""]);for(var k=0,E=0,T=0,R="",$="",M;k<N.length;)switch(N[k][0]){case i:T++,$+=N[k][1],k++;break;case a:E++,R+=N[k][1],k++;break;case o:E+T>1?(E!==0&&T!==0&&(M=u($,R),M!==0&&(k-E-T>0&&N[k-E-T-1][0]==o?N[k-E-T-1][1]+=$.substring(0,M):(N.splice(0,0,[o,$.substring(0,M)]),k++),$=$.substring(M),R=R.substring(M)),M=f($,R),M!==0&&(N[k][1]=$.substring($.length-M)+N[k][1],$=$.substring(0,$.length-M),R=R.substring(0,R.length-M))),E===0?N.splice(k-T,E+T,[i,$]):T===0?N.splice(k-E,E+T,[a,R]):N.splice(k-E-T,E+T,[a,R],[i,$]),k=k-E-T+(E?1:0)+(T?1:0)+1):k!==0&&N[k-1][0]==o?(N[k-1][1]+=N[k][1],N.splice(k,1)):k++,T=0,E=0,R="",$="";break}N[N.length-1][1]===""&&N.pop();var A=!1;for(k=1;k<N.length-1;)N[k-1][0]==o&&N[k+1][0]==o&&(N[k][1].substring(N[k][1].length-N[k-1][1].length)==N[k-1][1]?(N[k][1]=N[k-1][1]+N[k][1].substring(0,N[k][1].length-N[k-1][1].length),N[k+1][1]=N[k-1][1]+N[k+1][1],N.splice(k-1,1),A=!0):N[k][1].substring(0,N[k+1][1].length)==N[k+1][1]&&(N[k-1][1]+=N[k+1][1],N[k][1]=N[k][1].substring(N[k+1][1].length)+N[k+1][1],N.splice(k+1,1),A=!0)),k++;A&&x(N)}var v=c;v.INSERT=i,v.DELETE=a,v.EQUAL=o,n.exports=v;function y(N,k){if(k===0)return[o,N];for(var E=0,T=0;T<N.length;T++){var R=N[T];if(R[0]===a||R[0]===o){var $=E+R[1].length;if(k===$)return[T+1,N];if(k<$){N=N.slice();var M=k-E,A=[R[0],R[1].slice(0,M)],C=[R[0],R[1].slice(M)];return N.splice(T,1,A,C),[T+1,N]}else E=$}}throw new Error("cursor_pos is out of bounds!")}function w(N,k){var E=y(N,k),T=E[1],R=E[0],$=T[R],M=T[R+1];if($==null)return N;if($[0]!==o)return N;if(M!=null&&$[1]+M[1]===M[1]+$[1])return T.splice(R,2,M,$),_(T,R,2);if(M!=null&&M[1].indexOf($[1])===0){T.splice(R,2,[M[0],$[1]],[0,$[1]]);var A=M[1].slice($[1].length);return A.length>0&&T.splice(R+2,0,[M[0],A]),_(T,R,3)}else return N}function b(N){for(var k=!1,E=function(M){return M.charCodeAt(0)>=56320&&M.charCodeAt(0)<=57343},T=function(M){return M.charCodeAt(M.length-1)>=55296&&M.charCodeAt(M.length-1)<=56319},R=2;R<N.length;R+=1)N[R-2][0]===o&&T(N[R-2][1])&&N[R-1][0]===a&&E(N[R-1][1])&&N[R][0]===i&&E(N[R][1])&&(k=!0,N[R-1][1]=N[R-2][1].slice(-1)+N[R-1][1],N[R][1]=N[R-2][1].slice(-1)+N[R][1],N[R-2][1]=N[R-2][1].slice(0,-1));if(!k)return N;for(var $=[],R=0;R<N.length;R+=1)N[R][1].length>0&&$.push(N[R]);return $}function _(N,k,E){for(var T=k+E-1;T>=0&&T>=k-1;T--)if(T+1<N.length){var R=N[T],$=N[T+1];R[0]===$[1]&&N.splice(T,2,[R[0],R[1]+$[1]])}return N}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:a,r.shim=a;function a(i){var o=[];for(var c in i)o.push(c);return o}},function(n,r){var a=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=a?i:o,r.supported=i;function i(c){return Object.prototype.toString.call(c)=="[object Arguments]"}r.unsupported=o;function o(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}},function(n,r){var a=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function c(h,m,u){this.fn=h,this.context=m,this.once=u||!1}function d(){this._events=new o,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],u,f;if(this._eventsCount===0)return m;for(f in u=this._events)a.call(u,f)&&m.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(u)):m},d.prototype.listeners=function(m,u){var f=i?i+m:m,p=this._events[f];if(u)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var x=0,v=p.length,y=new Array(v);x<v;x++)y[x]=p[x].fn;return y},d.prototype.emit=function(m,u,f,p,x,v){var y=i?i+m:m;if(!this._events[y])return!1;var w=this._events[y],b=arguments.length,_,N;if(w.fn){switch(w.once&&this.removeListener(m,w.fn,void 0,!0),b){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,f),!0;case 4:return w.fn.call(w.context,u,f,p),!0;case 5:return w.fn.call(w.context,u,f,p,x),!0;case 6:return w.fn.call(w.context,u,f,p,x,v),!0}for(N=1,_=new Array(b-1);N<b;N++)_[N-1]=arguments[N];w.fn.apply(w.context,_)}else{var k=w.length,E;for(N=0;N<k;N++)switch(w[N].once&&this.removeListener(m,w[N].fn,void 0,!0),b){case 1:w[N].fn.call(w[N].context);break;case 2:w[N].fn.call(w[N].context,u);break;case 3:w[N].fn.call(w[N].context,u,f);break;case 4:w[N].fn.call(w[N].context,u,f,p);break;default:if(!_)for(E=1,_=new Array(b-1);E<b;E++)_[E-1]=arguments[E];w[N].fn.apply(w[N].context,_)}}return!0},d.prototype.on=function(m,u,f){var p=new c(u,f||this),x=i?i+m:m;return this._events[x]?this._events[x].fn?this._events[x]=[this._events[x],p]:this._events[x].push(p):(this._events[x]=p,this._eventsCount++),this},d.prototype.once=function(m,u,f){var p=new c(u,f||this,!0),x=i?i+m:m;return this._events[x]?this._events[x].fn?this._events[x]=[this._events[x],p]:this._events[x].push(p):(this._events[x]=p,this._eventsCount++),this},d.prototype.removeListener=function(m,u,f,p){var x=i?i+m:m;if(!this._events[x])return this;if(!u)return--this._eventsCount===0?this._events=new o:delete this._events[x],this;var v=this._events[x];if(v.fn)v.fn===u&&(!p||v.once)&&(!f||v.context===f)&&(--this._eventsCount===0?this._events=new o:delete this._events[x]);else{for(var y=0,w=[],b=v.length;y<b;y++)(v[y].fn!==u||p&&!v[y].once||f&&v[y].context!==f)&&w.push(v[y]);w.length?this._events[x]=w.length===1?w[0]:w:--this._eventsCount===0?this._events=new o:delete this._events[x]}return this},d.prototype.removeAllListeners=function(m){var u;return m?(u=i?i+m:m,this._events[u]&&(--this._eventsCount===0?this._events=new o:delete this._events[u])):(this._events=new o,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prototype.setMaxListeners=function(){return this},d.prefixed=i,d.EventEmitter=d,typeof n<"u"&&(n.exports=d)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(le){return typeof le}:function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},o=function(){function le(de,Q){var se=[],ne=!0,ve=!1,pe=void 0;try{for(var ge=de[Symbol.iterator](),ke;!(ne=(ke=ge.next()).done)&&(se.push(ke.value),!(Q&&se.length===Q));ne=!0);}catch(Be){ve=!0,pe=Be}finally{try{!ne&&ge.return&&ge.return()}finally{if(ve)throw pe}}return se}return function(de,Q){if(Array.isArray(de))return de;if(Symbol.iterator in Object(de))return le(de,Q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function le(de,Q){for(var se=0;se<Q.length;se++){var ne=Q[se];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(de,ne.key,ne)}}return function(de,Q,se){return Q&&le(de.prototype,Q),se&&le(de,se),de}}(),d=a(3),h=C(d),m=a(2),u=C(m),f=a(0),p=C(f),x=a(5),v=C(x),y=a(10),w=C(y),b=a(9),_=C(b),N=a(36),k=a(37),E=a(13),T=C(E),R=a(26),$=a(38),M=a(39),A=a(40);function C(le){return le&&le.__esModule?le:{default:le}}function z(le,de,Q){return de in le?Object.defineProperty(le,de,{value:Q,enumerable:!0,configurable:!0,writable:!0}):le[de]=Q,le}function P(le,de){if(!(le instanceof de))throw new TypeError("Cannot call a class as a function")}function O(le,de){if(!le)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:le}function Y(le,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);le.prototype=Object.create(de&&de.prototype,{constructor:{value:le,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(le,de):le.__proto__=de)}var J=(0,w.default)("quill:clipboard"),G="__ql-matcher",F=[[Node.TEXT_NODE,ye],[Node.TEXT_NODE,be],["br",ue],[Node.ELEMENT_NODE,be],[Node.ELEMENT_NODE,re],[Node.ELEMENT_NODE,ae],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,ee],["li",we],["b",oe.bind(oe,"bold")],["i",oe.bind(oe,"italic")],["style",me]],I=[N.AlignAttribute,$.DirectionAttribute].reduce(function(le,de){return le[de.keyName]=de,le},{}),V=[N.AlignStyle,k.BackgroundStyle,R.ColorStyle,$.DirectionStyle,M.FontStyle,A.SizeStyle].reduce(function(le,de){return le[de.keyName]=de,le},{}),H=function(le){Y(de,le);function de(Q,se){P(this,de);var ne=O(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,Q,se));return ne.quill.root.addEventListener("paste",ne.onPaste.bind(ne)),ne.container=ne.quill.addContainer("ql-clipboard"),ne.container.setAttribute("contenteditable",!0),ne.container.setAttribute("tabindex",-1),ne.matchers=[],F.concat(ne.options.matchers).forEach(function(ve){var pe=o(ve,2),ge=pe[0],ke=pe[1];!se.matchVisual&&ke===ae||ne.addMatcher(ge,ke)}),ne}return c(de,[{key:"addMatcher",value:function(se,ne){this.matchers.push([se,ne])}},{key:"convert",value:function(se){if(typeof se=="string")return this.container.innerHTML=se.replace(/\>\r?\n +\</g,"><"),this.convert();var ne=this.quill.getFormat(this.quill.selection.savedRange.index);if(ne[T.default.blotName]){var ve=this.container.innerText;return this.container.innerHTML="",new u.default().insert(ve,z({},T.default.blotName,ne[T.default.blotName]))}var pe=this.prepareMatching(),ge=o(pe,2),ke=ge[0],Be=ge[1],qe=W(this.container,ke,Be);return K(qe,`
`)&&qe.ops[qe.ops.length-1].attributes==null&&(qe=qe.compose(new u.default().retain(qe.length()-1).delete(1))),J.log("convert",this.container.innerHTML,qe),this.container.innerHTML="",qe}},{key:"dangerouslyPasteHTML",value:function(se,ne){var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof se=="string")this.quill.setContents(this.convert(se),ne),this.quill.setSelection(0,v.default.sources.SILENT);else{var pe=this.convert(ne);this.quill.updateContents(new u.default().retain(se).concat(pe),ve),this.quill.setSelection(se+pe.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(se){var ne=this;if(!(se.defaultPrevented||!this.quill.isEnabled())){var ve=this.quill.getSelection(),pe=new u.default().retain(ve.index),ge=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){pe=pe.concat(ne.convert()).delete(ve.length),ne.quill.updateContents(pe,v.default.sources.USER),ne.quill.setSelection(pe.length()-ve.length,v.default.sources.SILENT),ne.quill.scrollingContainer.scrollTop=ge,ne.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var se=this,ne=[],ve=[];return this.matchers.forEach(function(pe){var ge=o(pe,2),ke=ge[0],Be=ge[1];switch(ke){case Node.TEXT_NODE:ve.push(Be);break;case Node.ELEMENT_NODE:ne.push(Be);break;default:[].forEach.call(se.container.querySelectorAll(ke),function(qe){qe[G]=qe[G]||[],qe[G].push(Be)});break}}),[ne,ve]}}]),de}(_.default);H.DEFAULTS={matchers:[],matchVisual:!0};function U(le,de,Q){return(typeof de>"u"?"undefined":i(de))==="object"?Object.keys(de).reduce(function(se,ne){return U(se,ne,de[ne])},le):le.reduce(function(se,ne){return ne.attributes&&ne.attributes[de]?se.push(ne):se.insert(ne.insert,(0,h.default)({},z({},de,Q),ne.attributes))},new u.default)}function q(le){if(le.nodeType!==Node.ELEMENT_NODE)return{};var de="__ql-computed-style";return le[de]||(le[de]=window.getComputedStyle(le))}function K(le,de){for(var Q="",se=le.ops.length-1;se>=0&&Q.length<de.length;--se){var ne=le.ops[se];if(typeof ne.insert!="string")break;Q=ne.insert+Q}return Q.slice(-1*de.length)===de}function B(le){if(le.childNodes.length===0)return!1;var de=q(le);return["block","list-item"].indexOf(de.display)>-1}function W(le,de,Q){return le.nodeType===le.TEXT_NODE?Q.reduce(function(se,ne){return ne(le,se)},new u.default):le.nodeType===le.ELEMENT_NODE?[].reduce.call(le.childNodes||[],function(se,ne){var ve=W(ne,de,Q);return ne.nodeType===le.ELEMENT_NODE&&(ve=de.reduce(function(pe,ge){return ge(ne,pe)},ve),ve=(ne[G]||[]).reduce(function(pe,ge){return ge(ne,pe)},ve)),se.concat(ve)},new u.default):new u.default}function oe(le,de,Q){return U(Q,le,!0)}function X(le,de){var Q=p.default.Attributor.Attribute.keys(le),se=p.default.Attributor.Class.keys(le),ne=p.default.Attributor.Style.keys(le),ve={};return Q.concat(se).concat(ne).forEach(function(pe){var ge=p.default.query(pe,p.default.Scope.ATTRIBUTE);ge!=null&&(ve[ge.attrName]=ge.value(le),ve[ge.attrName])||(ge=I[pe],ge!=null&&(ge.attrName===pe||ge.keyName===pe)&&(ve[ge.attrName]=ge.value(le)||void 0),ge=V[pe],ge!=null&&(ge.attrName===pe||ge.keyName===pe)&&(ge=V[pe],ve[ge.attrName]=ge.value(le)||void 0))}),Object.keys(ve).length>0&&(de=U(de,ve)),de}function re(le,de){var Q=p.default.query(le);if(Q==null)return de;if(Q.prototype instanceof p.default.Embed){var se={},ne=Q.value(le);ne!=null&&(se[Q.blotName]=ne,de=new u.default().insert(se,Q.formats(le)))}else typeof Q.formats=="function"&&(de=U(de,Q.blotName,Q.formats(le)));return de}function ue(le,de){return K(de,`
`)||de.insert(`
`),de}function me(){return new u.default}function we(le,de){var Q=p.default.query(le);if(Q==null||Q.blotName!=="list-item"||!K(de,`
`))return de;for(var se=-1,ne=le.parentNode;!ne.classList.contains("ql-clipboard");)(p.default.query(ne)||{}).blotName==="list"&&(se+=1),ne=ne.parentNode;return se<=0?de:de.compose(new u.default().retain(de.length()-1).retain(1,{indent:se}))}function be(le,de){return K(de,`
`)||(B(le)||de.length()>0&&le.nextSibling&&B(le.nextSibling))&&de.insert(`
`),de}function ae(le,de){if(B(le)&&le.nextElementSibling!=null&&!K(de,`

`)){var Q=le.offsetHeight+parseFloat(q(le).marginTop)+parseFloat(q(le).marginBottom);le.nextElementSibling.offsetTop>le.offsetTop+Q*1.5&&de.insert(`
`)}return de}function ee(le,de){var Q={},se=le.style||{};return se.fontStyle&&q(le).fontStyle==="italic"&&(Q.italic=!0),se.fontWeight&&(q(le).fontWeight.startsWith("bold")||parseInt(q(le).fontWeight)>=700)&&(Q.bold=!0),Object.keys(Q).length>0&&(de=U(de,Q)),parseFloat(se.textIndent||0)>0&&(de=new u.default().insert("	").concat(de)),de}function ye(le,de){var Q=le.data;if(le.parentNode.tagName==="O:P")return de.insert(Q.trim());if(Q.trim().length===0&&le.parentNode.classList.contains("ql-clipboard"))return de;if(!q(le.parentNode).whiteSpace.startsWith("pre")){var se=function(ve,pe){return pe=pe.replace(/[^\u00a0]/g,""),pe.length<1&&ve?" ":pe};Q=Q.replace(/\r\n/g," ").replace(/\n/g," "),Q=Q.replace(/\s\s+/g,se.bind(se,!0)),(le.previousSibling==null&&B(le.parentNode)||le.previousSibling!=null&&B(le.previousSibling))&&(Q=Q.replace(/^\s+/,se.bind(se,!1))),(le.nextSibling==null&&B(le.parentNode)||le.nextSibling!=null&&B(le.nextSibling))&&(Q=Q.replace(/\s+$/,se.bind(se,!1)))}return de.insert(Q)}r.default=H,r.matchAttributor=X,r.matchBlot=re,r.matchNewline=be,r.matchSpacing=ae,r.matchText=ye},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function x(v,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,w){return y&&x(v.prototype,y),w&&x(v,w),v}}(),o=function x(v,y,w){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:x(_,y,w)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(w)}},c=a(6),d=h(c);function h(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function u(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function f(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){f(v,x);function v(){return m(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"optimize",value:function(w){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,w),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(d.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var i=function(){function A(C,z){var P=[],O=!0,Y=!1,J=void 0;try{for(var G=C[Symbol.iterator](),F;!(O=(F=G.next()).done)&&(P.push(F.value),!(z&&P.length===z));O=!0);}catch(I){Y=!0,J=I}finally{try{!O&&G.return&&G.return()}finally{if(Y)throw J}}return P}return function(C,z){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return A(C,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function A(C,z){for(var P=0;P<z.length;P++){var O=z[P];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(C,O.key,O)}}return function(C,z,P){return z&&A(C.prototype,z),P&&A(C,P),C}}(),c=a(2),d=w(c),h=a(0),m=w(h),u=a(5),f=w(u),p=a(10),x=w(p),v=a(9),y=w(v);function w(A){return A&&A.__esModule?A:{default:A}}function b(A,C,z){return C in A?Object.defineProperty(A,C,{value:z,enumerable:!0,configurable:!0,writable:!0}):A[C]=z,A}function _(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function N(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:A}function k(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(A,C):A.__proto__=C)}var E=(0,x.default)("quill:toolbar"),T=function(A){k(C,A);function C(z,P){_(this,C);var O=N(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,z,P));if(Array.isArray(O.options.container)){var Y=document.createElement("div");$(Y,O.options.container),z.container.parentNode.insertBefore(Y,z.container),O.container=Y}else typeof O.options.container=="string"?O.container=document.querySelector(O.options.container):O.container=O.options.container;if(!(O.container instanceof HTMLElement)){var J;return J=E.error("Container required for toolbar",O.options),N(O,J)}return O.container.classList.add("ql-toolbar"),O.controls=[],O.handlers={},Object.keys(O.options.handlers).forEach(function(G){O.addHandler(G,O.options.handlers[G])}),[].forEach.call(O.container.querySelectorAll("button, select"),function(G){O.attach(G)}),O.quill.on(f.default.events.EDITOR_CHANGE,function(G,F){G===f.default.events.SELECTION_CHANGE&&O.update(F)}),O.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var G=O.quill.selection.getRange(),F=i(G,1),I=F[0];O.update(I)}),O}return o(C,[{key:"addHandler",value:function(P,O){this.handlers[P]=O}},{key:"attach",value:function(P){var O=this,Y=[].find.call(P.classList,function(G){return G.indexOf("ql-")===0});if(Y){if(Y=Y.slice(3),P.tagName==="BUTTON"&&P.setAttribute("type","button"),this.handlers[Y]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Y]==null){E.warn("ignoring attaching to disabled format",Y,P);return}if(m.default.query(Y)==null){E.warn("ignoring attaching to nonexistent format",Y,P);return}}var J=P.tagName==="SELECT"?"change":"click";P.addEventListener(J,function(G){var F=void 0;if(P.tagName==="SELECT"){if(P.selectedIndex<0)return;var I=P.options[P.selectedIndex];I.hasAttribute("selected")?F=!1:F=I.value||!1}else P.classList.contains("ql-active")?F=!1:F=P.value||!P.hasAttribute("value"),G.preventDefault();O.quill.focus();var V=O.quill.selection.getRange(),H=i(V,1),U=H[0];if(O.handlers[Y]!=null)O.handlers[Y].call(O,F);else if(m.default.query(Y).prototype instanceof m.default.Embed){if(F=prompt("Enter "+Y),!F)return;O.quill.updateContents(new d.default().retain(U.index).delete(U.length).insert(b({},Y,F)),f.default.sources.USER)}else O.quill.format(Y,F,f.default.sources.USER);O.update(U)}),this.controls.push([Y,P])}}},{key:"update",value:function(P){var O=P==null?{}:this.quill.getFormat(P);this.controls.forEach(function(Y){var J=i(Y,2),G=J[0],F=J[1];if(F.tagName==="SELECT"){var I=void 0;if(P==null)I=null;else if(O[G]==null)I=F.querySelector("option[selected]");else if(!Array.isArray(O[G])){var V=O[G];typeof V=="string"&&(V=V.replace(/\"/g,'\\"')),I=F.querySelector('option[value="'+V+'"]')}I==null?(F.value="",F.selectedIndex=-1):I.selected=!0}else if(P==null)F.classList.remove("ql-active");else if(F.hasAttribute("value")){var H=O[G]===F.getAttribute("value")||O[G]!=null&&O[G].toString()===F.getAttribute("value")||O[G]==null&&!F.getAttribute("value");F.classList.toggle("ql-active",H)}else F.classList.toggle("ql-active",O[G]!=null)})}}]),C}(y.default);T.DEFAULTS={};function R(A,C,z){var P=document.createElement("button");P.setAttribute("type","button"),P.classList.add("ql-"+C),z!=null&&(P.value=z),A.appendChild(P)}function $(A,C){Array.isArray(C[0])||(C=[C]),C.forEach(function(z){var P=document.createElement("span");P.classList.add("ql-formats"),z.forEach(function(O){if(typeof O=="string")R(P,O);else{var Y=Object.keys(O)[0],J=O[Y];Array.isArray(J)?M(P,Y,J):R(P,Y,J)}}),A.appendChild(P)})}function M(A,C,z){var P=document.createElement("select");P.classList.add("ql-"+C),z.forEach(function(O){var Y=document.createElement("option");O!==!1?Y.setAttribute("value",O):Y.setAttribute("selected","selected"),P.appendChild(Y)}),A.appendChild(P)}T.DEFAULTS={container:null,handlers:{clean:function(){var C=this,z=this.quill.getSelection();if(z!=null)if(z.length==0){var P=this.quill.getFormat();Object.keys(P).forEach(function(O){m.default.query(O,m.default.Scope.INLINE)!=null&&C.quill.format(O,!1)})}else this.quill.removeFormat(z,f.default.sources.USER)},direction:function(C){var z=this.quill.getFormat().align;C==="rtl"&&z==null?this.quill.format("align","right",f.default.sources.USER):!C&&z==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",C,f.default.sources.USER)},indent:function(C){var z=this.quill.getSelection(),P=this.quill.getFormat(z),O=parseInt(P.indent||0);if(C==="+1"||C==="-1"){var Y=C==="+1"?1:-1;P.direction==="rtl"&&(Y*=-1),this.quill.format("indent",O+Y,f.default.sources.USER)}},link:function(C){C===!0&&(C=prompt("Enter link URL:")),this.quill.format("link",C,f.default.sources.USER)},list:function(C){var z=this.quill.getSelection(),P=this.quill.getFormat(z);C==="check"?P.list==="checked"||P.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",C,f.default.sources.USER)}}},r.default=T,r.addControls=$},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function x(v,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,w){return y&&x(v.prototype,y),w&&x(v,w),v}}(),o=function x(v,y,w){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:x(_,y,w)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(w)}},c=a(28),d=h(c);function h(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function u(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function f(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){f(v,x);function v(y,w){m(this,v);var b=u(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y));return b.label.innerHTML=w,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(_){_.classList.add("ql-primary")}),b}return i(v,[{key:"buildItem",value:function(w){var b=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,w);return b.style.backgroundColor=w.getAttribute("value")||"",b}},{key:"selectItem",value:function(w,b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,w,b);var _=this.label.querySelector(".ql-color-label"),N=w&&w.getAttribute("data-value")||"";_&&(_.tagName==="line"?_.style.stroke=N:_.style.fill=N)}}]),v}(d.default);r.default=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function x(v,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,w){return y&&x(v.prototype,y),w&&x(v,w),v}}(),o=function x(v,y,w){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:x(_,y,w)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(w)}},c=a(28),d=h(c);function h(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function u(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function f(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){f(v,x);function v(y,w){m(this,v);var b=u(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(_){_.innerHTML=w[_.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return i(v,[{key:"selectItem",value:function(w,b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,w,b),w=w||this.defaultItem,this.label.innerHTML=w.innerHTML}}]),v}(d.default);r.default=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function d(h,m){for(var u=0;u<m.length;u++){var f=m[u];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}return function(h,m,u){return m&&d(h.prototype,m),u&&d(h,u),h}}();function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}var c=function(){function d(h,m){var u=this;o(this,d),this.quill=h,this.boundsContainer=m||document.body,this.root=h.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){u.root.style.marginTop=-1*u.quill.root.scrollTop+"px"}),this.hide()}return i(d,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(m){var u=m.left+m.width/2-this.root.offsetWidth/2,f=m.bottom+this.quill.root.scrollTop;this.root.style.left=u+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),x=this.root.getBoundingClientRect(),v=0;if(x.right>p.right&&(v=p.right-x.right,this.root.style.left=u+v+"px"),x.left<p.left&&(v=p.left-x.left,this.root.style.left=u+v+"px"),x.bottom>p.bottom){var y=x.bottom-x.top,w=m.bottom-m.top+y;this.root.style.top=f-w+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),d}();r.default=c},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function M(A,C){var z=[],P=!0,O=!1,Y=void 0;try{for(var J=A[Symbol.iterator](),G;!(P=(G=J.next()).done)&&(z.push(G.value),!(C&&z.length===C));P=!0);}catch(F){O=!0,Y=F}finally{try{!P&&J.return&&J.return()}finally{if(O)throw Y}}return z}return function(A,C){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return M(A,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function M(A,C,z){A===null&&(A=Function.prototype);var P=Object.getOwnPropertyDescriptor(A,C);if(P===void 0){var O=Object.getPrototypeOf(A);return O===null?void 0:M(O,C,z)}else{if("value"in P)return P.value;var Y=P.get;return Y===void 0?void 0:Y.call(z)}},c=function(){function M(A,C){for(var z=0;z<C.length;z++){var P=C[z];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(A,P.key,P)}}return function(A,C,z){return C&&M(A.prototype,C),z&&M(A,z),A}}(),d=a(3),h=_(d),m=a(8),u=_(m),f=a(43),p=_(f),x=a(27),v=_(x),y=a(15),w=a(41),b=_(w);function _(M){return M&&M.__esModule?M:{default:M}}function N(M,A){if(!(M instanceof A))throw new TypeError("Cannot call a class as a function")}function k(M,A){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:M}function E(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);M.prototype=Object.create(A&&A.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(M,A):M.__proto__=A)}var T=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],R=function(M){E(A,M);function A(C,z){N(this,A),z.modules.toolbar!=null&&z.modules.toolbar.container==null&&(z.modules.toolbar.container=T);var P=k(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,z));return P.quill.container.classList.add("ql-snow"),P}return c(A,[{key:"extendToolbar",value:function(z){z.container.classList.add("ql-snow"),this.buildButtons([].slice.call(z.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(z.container.querySelectorAll("select")),b.default),this.tooltip=new $(this.quill,this.options.bounds),z.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(P,O){z.handlers.link.call(z,!O.format.link)})}}]),A}(p.default);R.DEFAULTS=(0,h.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){if(A){var C=this.quill.getSelection();if(C==null||C.length==0)return;var z=this.quill.getText(C);/^\S+@\S+\.\S+$/.test(z)&&z.indexOf("mailto:")!==0&&(z="mailto:"+z);var P=this.quill.theme.tooltip;P.edit("link",z)}else this.quill.format("link",!1)}}}}});var $=function(M){E(A,M);function A(C,z){N(this,A);var P=k(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,z));return P.preview=P.root.querySelector("a.ql-preview"),P}return c(A,[{key:"listen",value:function(){var z=this;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(P){z.root.classList.contains("ql-editing")?z.save():z.edit("link",z.preview.textContent),P.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(P){if(z.linkRange!=null){var O=z.linkRange;z.restoreFocus(),z.quill.formatText(O,"link",!1,u.default.sources.USER),delete z.linkRange}P.preventDefault(),z.hide()}),this.quill.on(u.default.events.SELECTION_CHANGE,function(P,O,Y){if(P!=null){if(P.length===0&&Y===u.default.sources.USER){var J=z.quill.scroll.descendant(v.default,P.index),G=i(J,2),F=G[0],I=G[1];if(F!=null){z.linkRange=new y.Range(P.index-I,F.length());var V=v.default.formats(F.domNode);z.preview.textContent=V,z.preview.setAttribute("href",V),z.show(),z.position(z.quill.getBounds(z.linkRange));return}}else delete z.linkRange;z.hide()}})}},{key:"show",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),A}(f.BaseTooltip);$.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=R},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(29),o=ne(i),c=a(36),d=a(38),h=a(64),m=a(65),u=ne(m),f=a(66),p=ne(f),x=a(67),v=ne(x),y=a(37),w=a(26),b=a(39),_=a(40),N=a(56),k=ne(N),E=a(68),T=ne(E),R=a(27),$=ne(R),M=a(69),A=ne(M),C=a(70),z=ne(C),P=a(71),O=ne(P),Y=a(72),J=ne(Y),G=a(73),F=ne(G),I=a(13),V=ne(I),H=a(74),U=ne(H),q=a(75),K=ne(q),B=a(57),W=ne(B),oe=a(41),X=ne(oe),re=a(28),ue=ne(re),me=a(59),we=ne(me),be=a(60),ae=ne(be),ee=a(61),ye=ne(ee),le=a(108),de=ne(le),Q=a(62),se=ne(Q);function ne(ve){return ve&&ve.__esModule?ve:{default:ve}}o.default.register({"attributors/attribute/direction":d.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":y.BackgroundClass,"attributors/class/color":w.ColorClass,"attributors/class/direction":d.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":_.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":y.BackgroundStyle,"attributors/style/color":w.ColorStyle,"attributors/style/direction":d.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":_.SizeStyle},!0),o.default.register({"formats/align":c.AlignClass,"formats/direction":d.DirectionClass,"formats/indent":h.IndentClass,"formats/background":y.BackgroundStyle,"formats/color":w.ColorStyle,"formats/font":b.FontClass,"formats/size":_.SizeClass,"formats/blockquote":u.default,"formats/code-block":V.default,"formats/header":p.default,"formats/list":v.default,"formats/bold":k.default,"formats/code":I.Code,"formats/italic":T.default,"formats/link":$.default,"formats/script":A.default,"formats/strike":z.default,"formats/underline":O.default,"formats/image":J.default,"formats/video":F.default,"formats/list/item":x.ListItem,"modules/formula":U.default,"modules/syntax":K.default,"modules/toolbar":W.default,"themes/bubble":de.default,"themes/snow":se.default,"ui/icons":X.default,"ui/picker":ue.default,"ui/icon-picker":ae.default,"ui/color-picker":we.default,"ui/tooltip":ye.default},!0),r.default=o.default},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var i=function(){function v(y,w){for(var b=0;b<w.length;b++){var _=w[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,w,b){return w&&v(y.prototype,w),b&&v(y,b),y}}(),o=function v(y,w,b){y===null&&(y=Function.prototype);var _=Object.getOwnPropertyDescriptor(y,w);if(_===void 0){var N=Object.getPrototypeOf(y);return N===null?void 0:v(N,w,b)}else{if("value"in _)return _.value;var k=_.get;return k===void 0?void 0:k.call(b)}},c=a(0),d=h(c);function h(v){return v&&v.__esModule?v:{default:v}}function m(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function u(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function f(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var p=function(v){f(y,v);function y(){return m(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"add",value:function(b,_){if(_==="+1"||_==="-1"){var N=this.value(b)||0;_=_==="+1"?N+1:N-1}return _===0?(this.remove(b),!0):o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"add",this).call(this,b,_)}},{key:"canAdd",value:function(b,_){return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,b,_)||o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,b,parseInt(_))}},{key:"value",value:function(b){return parseInt(o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,b))||void 0}}]),y}(d.default.Attributor.Class),x=new p("indent","ql-indent",{scope:d.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=x},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(4),o=c(i);function c(f){return f&&f.__esModule?f:{default:f}}function d(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function h(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function m(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var u=function(f){m(p,f);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="blockquote",u.tagName="blockquote",r.default=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function p(x,v){for(var y=0;y<v.length;y++){var w=v[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,v,y){return v&&p(x.prototype,v),y&&p(x,y),x}}(),o=a(4),c=d(o);function d(p){return p&&p.__esModule?p:{default:p}}function h(p,x){if(!(p instanceof x))throw new TypeError("Cannot call a class as a function")}function m(p,x){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:p}function u(p,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);p.prototype=Object.create(x&&x.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(p,x):p.__proto__=x)}var f=function(p){u(x,p);function x(){return h(this,x),m(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,null,[{key:"formats",value:function(y){return this.tagName.indexOf(y.tagName)+1}}]),x}(c.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var i=function(){function N(k,E){for(var T=0;T<E.length;T++){var R=E[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,E,T){return E&&N(k.prototype,E),T&&N(k,T),k}}(),o=function N(k,E,T){k===null&&(k=Function.prototype);var R=Object.getOwnPropertyDescriptor(k,E);if(R===void 0){var $=Object.getPrototypeOf(k);return $===null?void 0:N($,E,T)}else{if("value"in R)return R.value;var M=R.get;return M===void 0?void 0:M.call(T)}},c=a(0),d=p(c),h=a(4),m=p(h),u=a(25),f=p(u);function p(N){return N&&N.__esModule?N:{default:N}}function x(N,k,E){return k in N?Object.defineProperty(N,k,{value:E,enumerable:!0,configurable:!0,writable:!0}):N[k]=E,N}function v(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function y(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function w(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var b=function(N){w(k,N);function k(){return v(this,k),y(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return i(k,[{key:"format",value:function(T,R){T===_.blotName&&!R?this.replaceWith(d.default.create(this.statics.scope)):o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,T,R)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(T,R){return this.parent.isolate(this.offset(this.parent),this.length()),T===this.parent.statics.blotName?(this.parent.replaceWith(T,R),this):(this.parent.unwrap(),o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replaceWith",this).call(this,T,R))}}],[{key:"formats",value:function(T){return T.tagName===this.tagName?void 0:o(k.__proto__||Object.getPrototypeOf(k),"formats",this).call(this,T)}}]),k}(m.default);b.blotName="list-item",b.tagName="LI";var _=function(N){w(k,N),i(k,null,[{key:"create",value:function(T){var R=T==="ordered"?"OL":"UL",$=o(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,R);return(T==="checked"||T==="unchecked")&&$.setAttribute("data-checked",T==="checked"),$}},{key:"formats",value:function(T){if(T.tagName==="OL")return"ordered";if(T.tagName==="UL")return T.hasAttribute("data-checked")?T.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function k(E){v(this,k);var T=y(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,E)),R=function(M){if(M.target.parentNode===E){var A=T.statics.formats(E),C=d.default.find(M.target);A==="checked"?C.format("list","unchecked"):A==="unchecked"&&C.format("list","checked")}};return E.addEventListener("touchstart",R),E.addEventListener("mousedown",R),T}return i(k,[{key:"format",value:function(T,R){this.children.length>0&&this.children.tail.format(T,R)}},{key:"formats",value:function(){return x({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(T,R){if(T instanceof b)o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,T,R);else{var $=R==null?this.length():R.offset(this),M=this.split($);M.parent.insertBefore(T,M)}}},{key:"optimize",value:function(T){o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,T);var R=this.next;R!=null&&R.prev===this&&R.statics.blotName===this.statics.blotName&&R.domNode.tagName===this.domNode.tagName&&R.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(R.moveChildren(this),R.remove())}},{key:"replace",value:function(T){if(T.statics.blotName!==this.statics.blotName){var R=d.default.create(this.statics.defaultChild);T.moveChildren(R),this.appendChild(R)}o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,T)}}]),k}(f.default);_.blotName="list",_.scope=d.default.Scope.BLOCK_BLOT,_.tagName=["OL","UL"],_.defaultChild="list-item",_.allowedChildren=[b],r.ListItem=b,r.default=_},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(56),o=c(i);function c(f){return f&&f.__esModule?f:{default:f}}function d(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function h(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function m(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var u=function(f){m(p,f);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="italic",u.tagName=["EM","I"],r.default=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function x(v,y){for(var w=0;w<y.length;w++){var b=y[w];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,y,w){return y&&x(v.prototype,y),w&&x(v,w),v}}(),o=function x(v,y,w){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,y);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:x(_,y,w)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(w)}},c=a(6),d=h(c);function h(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function u(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function f(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){f(v,x);function v(){return m(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,null,[{key:"create",value:function(w){return w==="super"?document.createElement("sup"):w==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,w)}},{key:"formats",value:function(w){if(w.tagName==="SUB")return"sub";if(w.tagName==="SUP")return"super"}}]),v}(d.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),o=c(i);function c(f){return f&&f.__esModule?f:{default:f}}function d(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function h(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function m(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var u=function(f){m(p,f);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="strike",u.tagName="S",r.default=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),o=c(i);function c(f){return f&&f.__esModule?f:{default:f}}function d(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function h(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function m(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var u=function(f){m(p,f);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="underline",u.tagName="U",r.default=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function y(w,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,b,_){return b&&y(w.prototype,b),_&&y(w,_),w}}(),o=function y(w,b,_){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,b);if(N===void 0){var k=Object.getPrototypeOf(w);return k===null?void 0:y(k,b,_)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(_)}},c=a(0),d=m(c),h=a(27);function m(y){return y&&y.__esModule?y:{default:y}}function u(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function f(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function p(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var x=["alt","height","width"],v=function(y){p(w,y);function w(){return u(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"format",value:function(_,N){x.indexOf(_)>-1?N?this.domNode.setAttribute(_,N):this.domNode.removeAttribute(_):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,_,N)}}],[{key:"create",value:function(_){var N=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,_);return typeof _=="string"&&N.setAttribute("src",this.sanitize(_)),N}},{key:"formats",value:function(_){return x.reduce(function(N,k){return _.hasAttribute(k)&&(N[k]=_.getAttribute(k)),N},{})}},{key:"match",value:function(_){return/\.(jpe?g|gif|png)$/.test(_)||/^data:image\/.+;base64/.test(_)}},{key:"sanitize",value:function(_){return(0,h.sanitize)(_,["http","https","data"])?_:"//:0"}},{key:"value",value:function(_){return _.getAttribute("src")}}]),w}(d.default.Embed);v.blotName="image",v.tagName="IMG",r.default=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function y(w,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,b,_){return b&&y(w.prototype,b),_&&y(w,_),w}}(),o=function y(w,b,_){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,b);if(N===void 0){var k=Object.getPrototypeOf(w);return k===null?void 0:y(k,b,_)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(_)}},c=a(4),d=a(27),h=m(d);function m(y){return y&&y.__esModule?y:{default:y}}function u(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function f(y,w){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:y}function p(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(y,w):y.__proto__=w)}var x=["height","width"],v=function(y){p(w,y);function w(){return u(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"format",value:function(_,N){x.indexOf(_)>-1?N?this.domNode.setAttribute(_,N):this.domNode.removeAttribute(_):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,_,N)}}],[{key:"create",value:function(_){var N=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,_);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(_)),N}},{key:"formats",value:function(_){return x.reduce(function(N,k){return _.hasAttribute(k)&&(N[k]=_.getAttribute(k)),N},{})}},{key:"sanitize",value:function(_){return h.default.sanitize(_)}},{key:"value",value:function(_){return _.getAttribute("src")}}]),w}(c.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",r.default=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var i=function(){function _(N,k){for(var E=0;E<k.length;E++){var T=k[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(N,T.key,T)}}return function(N,k,E){return k&&_(N.prototype,k),E&&_(N,E),N}}(),o=function _(N,k,E){N===null&&(N=Function.prototype);var T=Object.getOwnPropertyDescriptor(N,k);if(T===void 0){var R=Object.getPrototypeOf(N);return R===null?void 0:_(R,k,E)}else{if("value"in T)return T.value;var $=T.get;return $===void 0?void 0:$.call(E)}},c=a(35),d=p(c),h=a(5),m=p(h),u=a(9),f=p(u);function p(_){return _&&_.__esModule?_:{default:_}}function x(_,N){if(!(_ instanceof N))throw new TypeError("Cannot call a class as a function")}function v(_,N){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:_}function y(_,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);_.prototype=Object.create(N&&N.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(_,N):_.__proto__=N)}var w=function(_){y(N,_);function N(){return x(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,null,[{key:"create",value:function(E){var T=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,E);return typeof E=="string"&&(window.katex.render(E,T,{throwOnError:!1,errorColor:"#f00"}),T.setAttribute("data-value",E)),T}},{key:"value",value:function(E){return E.getAttribute("data-value")}}]),N}(d.default);w.blotName="formula",w.className="ql-formula",w.tagName="SPAN";var b=function(_){y(N,_),i(N,null,[{key:"register",value:function(){m.default.register(w,!0)}}]);function N(){x(this,N);var k=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return k}return N}(f.default);r.FormulaBlot=w,r.default=b},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var i=function(){function E(T,R){for(var $=0;$<R.length;$++){var M=R[$];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(T,M.key,M)}}return function(T,R,$){return R&&E(T.prototype,R),$&&E(T,$),T}}(),o=function E(T,R,$){T===null&&(T=Function.prototype);var M=Object.getOwnPropertyDescriptor(T,R);if(M===void 0){var A=Object.getPrototypeOf(T);return A===null?void 0:E(A,R,$)}else{if("value"in M)return M.value;var C=M.get;return C===void 0?void 0:C.call($)}},c=a(0),d=v(c),h=a(5),m=v(h),u=a(9),f=v(u),p=a(13),x=v(p);function v(E){return E&&E.__esModule?E:{default:E}}function y(E,T){if(!(E instanceof T))throw new TypeError("Cannot call a class as a function")}function w(E,T){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:E}function b(E,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);E.prototype=Object.create(T&&T.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(E,T):E.__proto__=T)}var _=function(E){b(T,E);function T(){return y(this,T),w(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return i(T,[{key:"replaceWith",value:function($){this.domNode.textContent=this.domNode.textContent,this.attach(),o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,$)}},{key:"highlight",value:function($){var M=this.domNode.textContent;this.cachedText!==M&&((M.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=$(M),this.domNode.normalize(),this.attach()),this.cachedText=M)}}]),T}(x.default);_.className="ql-syntax";var N=new d.default.Attributor.Class("token","hljs",{scope:d.default.Scope.INLINE}),k=function(E){b(T,E),i(T,null,[{key:"register",value:function(){m.default.register(N,!0),m.default.register(_,!0)}}]);function T(R,$){y(this,T);var M=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,R,$));if(typeof M.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var A=null;return M.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(A),A=setTimeout(function(){M.highlight(),A=null},M.options.interval)}),M.highlight(),M}return i(T,[{key:"highlight",value:function(){var $=this;if(!this.quill.selection.composing){this.quill.update(m.default.sources.USER);var M=this.quill.getSelection();this.quill.scroll.descendants(_).forEach(function(A){A.highlight($.options.highlight)}),this.quill.update(m.default.sources.SILENT),M!=null&&this.quill.setSelection(M,m.default.sources.SILENT)}}}]),T}(f.default);k.DEFAULTS={highlight:function(){return window.hljs==null?null:function(E){var T=window.hljs.highlightAuto(E);return T.value}}(),interval:1e3},r.CodeBlock=_,r.CodeToken=N,r.default=k},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var i=function T(R,$,M){R===null&&(R=Function.prototype);var A=Object.getOwnPropertyDescriptor(R,$);if(A===void 0){var C=Object.getPrototypeOf(R);return C===null?void 0:T(C,$,M)}else{if("value"in A)return A.value;var z=A.get;return z===void 0?void 0:z.call(M)}},o=function(){function T(R,$){for(var M=0;M<$.length;M++){var A=$[M];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,A.key,A)}}return function(R,$,M){return $&&T(R.prototype,$),M&&T(R,M),R}}(),c=a(3),d=y(c),h=a(8),m=y(h),u=a(43),f=y(u),p=a(15),x=a(41),v=y(x);function y(T){return T&&T.__esModule?T:{default:T}}function w(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")}function b(T,R){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:T}function _(T,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);T.prototype=Object.create(R&&R.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(T,R):T.__proto__=R)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],k=function(T){_(R,T);function R($,M){w(this,R),M.modules.toolbar!=null&&M.modules.toolbar.container==null&&(M.modules.toolbar.container=N);var A=b(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,$,M));return A.quill.container.classList.add("ql-bubble"),A}return o(R,[{key:"extendToolbar",value:function(M){this.tooltip=new E(this.quill,this.options.bounds),this.tooltip.root.appendChild(M.container),this.buildButtons([].slice.call(M.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(M.container.querySelectorAll("select")),v.default)}}]),R}(f.default);k.DEFAULTS=(0,d.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){R?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var E=function(T){_(R,T);function R($,M){w(this,R);var A=b(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,$,M));return A.quill.on(m.default.events.EDITOR_CHANGE,function(C,z,P,O){if(C===m.default.events.SELECTION_CHANGE)if(z!=null&&z.length>0&&O===m.default.sources.USER){A.show(),A.root.style.left="0px",A.root.style.width="",A.root.style.width=A.root.offsetWidth+"px";var Y=A.quill.getLines(z.index,z.length);if(Y.length===1)A.position(A.quill.getBounds(z));else{var J=Y[Y.length-1],G=A.quill.getIndex(J),F=Math.min(J.length()-1,z.index+z.length-G),I=A.quill.getBounds(new p.Range(G,F));A.position(I)}}else document.activeElement!==A.textbox&&A.quill.hasFocus()&&A.hide()}),A}return o(R,[{key:"listen",value:function(){var M=this;i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){M.root.classList.remove("ql-editing")}),this.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!M.root.classList.contains("ql-hidden")){var A=M.quill.getSelection();A!=null&&M.position(M.quill.getBounds(A))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(M){var A=i(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"position",this).call(this,M),C=this.root.querySelector(".ql-tooltip-arrow");if(C.style.marginLeft="",A===0)return A;C.style.marginLeft=-1*A-C.offsetWidth/2+"px"}}]),R}(u.BaseTooltip);E.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=E,r.default=k},function(n,r,a){n.exports=a(63)}]).default})})(e5);var one=e5.exports,lne=Ta&&Ta.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zm=Ta&&Ta.__assign||function(){return Zm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Zm.apply(this,arguments)},cne=Ta&&Ta.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var i=arguments[t],o=0,c=i.length;o<c;o++,a++)r[a]=i[o];return r},dg=Ta&&Ta.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},la=dg(j),dne=dg(oo),$d=dg(ine),T2=dg(one),une=function(e){lne(t,e);function t(n){var r=e.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(i,o,c,d){var h,m,u,f;i==="text-change"?(m=(h=r).onEditorChangeText)===null||m===void 0||m.call(h,r.editor.root.innerHTML,o,d,r.unprivilegedEditor):i==="selection-change"&&((f=(u=r).onEditorChangeSelection)===null||f===void 0||f.call(u,o,d,r.unprivilegedEditor))};var a=r.isControlled()?n.value:n.defaultValue;return r.value=a??"",r}return t.prototype.validateProps=function(n){var r;if(la.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(la.default.Children.count(n.children)){var a=la.default.Children.only(n.children);if(((r=a)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(n,r){var a=this,i;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var o=this.getEditorContents(),c=(i=n.value,i??"");this.isEqualValue(c,o)||this.setEditorContents(this.editor,c)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),cne(this.cleanProps,this.dirtyProps).some(function(d){return!$d.default(n[d],a.props[d])})},t.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(a){return!$d.default(n[a],r.props[a])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(n,r){var a=this;if(this.editor&&this.shouldComponentRegenerate(n)){var i=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:i,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var c=this.regenerationSnapshot,i=c.delta,d=c.selection;delete this.regenerationSnapshot,this.instantiateEditor();var h=this.editor;h.setContents(i),A2(function(){return a.setEditorSelection(h,d)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(n,r){var a=new T2.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(a,r.tabIndex),this.hookEditor(a),a},t.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(n){return n&&n.ops},t.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?$d.default(n.ops,r.ops):$d.default(n,r)},t.prototype.setEditorContents=function(n,r){var a=this;this.value=r;var i=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),A2(function(){return a.setEditorSelection(n,i)})},t.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var a=n.getLength();r.index=Math.max(0,Math.min(r.index,a-1)),r.length=Math.max(0,Math.min(r.length,a-1-r.index)),n.setSelection(r)}},t.prototype.setEditorTabIndex=function(n,r){var a,i;!((i=(a=n)===null||a===void 0?void 0:a.scroll)===null||i===void 0)&&i.domNode&&(n.scroll.domNode.tabIndex=r)},t.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},t.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=dne.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},t.prototype.renderEditingArea=function(){var n=this,r=this.props,a=r.children,i=r.preserveWhitespace,o=this.state.generation,c={key:o,ref:function(d){n.editingArea=d}};return la.default.Children.count(a)?la.default.cloneElement(la.default.Children.only(a),c):i?la.default.createElement("pre",Zm({},c)):la.default.createElement("div",Zm({},c))},t.prototype.render=function(){var n;return la.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(n,r,a,i){var o,c;if(this.editor){var d=this.isDelta(this.value)?i.getContents():i.getHTML();d!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=d,(c=(o=this.props).onChange)===null||c===void 0||c.call(o,n,r,a,i))}},t.prototype.onEditorChangeSelection=function(n,r,a){var i,o,c,d,h,m;if(this.editor){var u=this.getEditorSelection(),f=!u&&n,p=u&&!n;$d.default(n,u)||(this.selection=n,(o=(i=this.props).onChangeSelection)===null||o===void 0||o.call(i,n,r,a),f?(d=(c=this.props).onFocus)===null||d===void 0||d.call(c,n,r,a):p&&((m=(h=this.props).onBlur)===null||m===void 0||m.call(h,u,r,a)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=T2.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(la.default.Component);function A2(e){Promise.resolve().then(e)}var hne=une;const t5=Gm(hne);var ug="Switch",[fne,Mre]=gn(ug),[mne,pne]=fne(ug),s5=j.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:c,value:d="on",onCheckedChange:h,form:m,...u}=e,[f,p]=j.useState(null),x=bt(t,_=>p(_)),v=j.useRef(!1),y=f?m||!!f.closest("form"):!0,[w,b]=Kr({prop:a,defaultProp:i??!1,onChange:h,caller:ug});return s.jsxs(mne,{scope:n,checked:w,disabled:c,children:[s.jsx(st.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":i5(w),"data-disabled":c?"":void 0,disabled:c,value:d,...u,ref:x,onClick:$e(e.onClick,_=>{b(N=>!N),y&&(v.current=_.isPropagationStopped(),v.current||_.stopPropagation())})}),y&&s.jsx(a5,{control:f,bubbles:!v.current,name:r,value:d,checked:w,required:o,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});s5.displayName=ug;var n5="SwitchThumb",r5=j.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=pne(n5,n);return s.jsx(st.span,{"data-state":i5(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});r5.displayName=n5;var gne="SwitchBubbleInput",a5=j.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=j.useRef(null),c=bt(o,i),d=Ap(n),h=wp(t);return j.useEffect(()=>{const m=o.current;if(!m)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(d!==n&&p){const x=new Event("click",{bubbles:r});p.call(m,n),m.dispatchEvent(x)}},[d,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:c,style:{...a.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});a5.displayName=gne;function i5(e){return e?"checked":"unchecked"}var o5=s5,xne=r5;const $t=j.forwardRef(({className:e,...t},n)=>s.jsx(o5,{className:Ye("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(xne,{className:Ye("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));$t.displayName=o5.displayName;const l5=({productData:e})=>{const{name:t,category:n,price:r,comparePrice:a,images:i,description:o,tags:c,dynamicFields:d,shortDescription:h,featured:m,status:u}=e,f=a&&r?Math.round((a-r)/a*100):0;return s.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[s.jsx(Ee,{children:s.jsx(Oe,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-4",children:i&&i.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:s.jsx("img",{src:i[0],alt:t,className:"w-full h-full object-cover"})}),i.length>1&&s.jsx("div",{className:"grid grid-cols-4 gap-2",children:i.slice(1,5).map((p,x)=>s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:s.jsx("img",{src:p,alt:`${t} ${x+2}`,className:"w-full h-full object-cover cursor-pointer hover:opacity-80"})},x))})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Fe,{variant:"outline",children:n}),m&&s.jsx(Fe,{className:"bg-yellow-100 text-yellow-800",children:"Featured"}),s.jsx(Fe,{variant:u==="active"?"default":"secondary",children:u})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:t}),h&&s.jsx("p",{className:"text-gray-600 mb-4",children:h})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((p,x)=>s.jsx(js,{className:"h-4 w-4 fill-current"},x))}),s.jsx("span",{className:"text-sm text-gray-600",children:"(4.8) 124 reviews"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["",r==null?void 0:r.toLocaleString()]}),a&&a>r&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["",a.toLocaleString()]}),s.jsxs(Fe,{className:"bg-green-100 text-green-800",children:[f,"% OFF"]})]})]}),s.jsx("p",{className:"text-sm text-green-600",children:"Inclusive of all taxes"})]}),s.jsx(Pa,{}),d&&Object.keys(d).length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Product Details"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(d).map(([p,x])=>x?s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600 capitalize",children:[p.replace(/([A-Z])/g," $1").trim(),":"]}),s.jsx("span",{className:"font-medium",children:Array.isArray(x)?x.join(", "):String(x)})]},p):null)})]}),s.jsx(Pa,{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(ie,{className:"flex-1",children:[s.jsx(nn,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),s.jsx(ie,{variant:"outline",size:"icon",children:s.jsx(Nr,{className:"h-4 w-4"})}),s.jsx(ie,{variant:"outline",size:"icon",children:s.jsx(tl,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(yr,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Free Delivery"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(Wn,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Secure Payment"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(ma,{className:"h-6 w-6 mx-auto mb-1 text-orange-600"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Easy Returns"})]})]})]})]})})}),o&&s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{children:"Product Description"})}),s.jsx(Oe,{children:s.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:o}})})]}),c&&c.length>0&&s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{children:"Tags"})}),s.jsx(Oe,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(p=>s.jsx(Fe,{variant:"secondary",children:p},p))})})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{children:"Similar Products"})}),s.jsx(Oe,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(p=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg"}),s.jsxs("p",{className:"text-sm font-medium",children:["Similar Product ",p]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["",(r*(.8+Math.random()*.4)).toFixed(0)]})]},p))})})]})]})},$r={electronics:{name:"Electronics",description:"Electronic devices and gadgets",icon:"",fields:[{name:"brand",label:"Brand",type:"text",placeholder:"e.g., Samsung, Apple"},{name:"model",label:"Model",type:"text",placeholder:"e.g., Galaxy S24"},{name:"warranty",label:"Warranty",type:"select",options:["No Warranty","6 months","1 year","2 years"]}]},clothing:{name:"Clothing & Fashion",description:"Apparel and fashion accessories",icon:"",fields:[{name:"brand",label:"Brand",type:"text",placeholder:"Brand name"},{name:"size",label:"Sizes",type:"multiselect",options:["XS","S","M","L","XL","XXL"]},{name:"color",label:"Colors",type:"multiselect",options:["Black","White","Red","Blue","Green","Gray","Brown"]},{name:"material",label:"Material",type:"text",placeholder:"e.g., Cotton, Polyester"}]},food:{name:"Food & Beverages",description:"Fresh food and beverages",icon:"",fields:[{name:"cuisine",label:"Cuisine",type:"select",options:["Nepali","Indian","Chinese","Continental","Italian","Other"]},{name:"spiceLevel",label:"Spice Level",type:"select",options:["Mild","Medium","Hot"]},{name:"dietaryInfo",label:"Dietary",type:"multiselect",options:["Vegetarian","Vegan","Gluten-Free"]},{name:"servingSize",label:"Serving Size",type:"text",placeholder:"e.g., 1 plate, 250ml"}]},baby:{name:"Baby & Kids",description:"Products for babies and children",icon:"",fields:[{name:"ageGroup",label:"Age Group",type:"select",options:["0-6 months","6-12 months","1-2 years","2-4 years","4+ years"]},{name:"safetyFeatures",label:"Safety",type:"multiselect",options:["BPA Free","Non-Toxic","Organic"]}]},grocery:{name:"Grocery & Household",description:"Daily essentials and household items",icon:"",fields:[{name:"weight",label:"Weight/Volume",type:"text",placeholder:"e.g., 1kg, 500ml"},{name:"expiryDate",label:"Expiry Date",type:"date"},{name:"organic",label:"Organic",type:"boolean"}]},meat:{name:"Meat & Seafood",description:"Fresh meat and seafood",icon:"",fields:[{name:"cut",label:"Cut Type",type:"select",options:["Whole","Pieces","Minced","Fillet"]},{name:"freshness",label:"Freshness",type:"select",options:["Fresh","Frozen"]}]},medicine:{name:"Medicine & Health",description:"Medicines and health products",icon:"",fields:[{name:"dosage",label:"Dosage",type:"text",placeholder:"e.g., 500mg, 10ml"},{name:"form",label:"Form",type:"select",options:["Tablet","Capsule","Syrup","Injection","Cream","Drops"]},{name:"prescription",label:"Prescription Required",type:"boolean"}]}},vne=()=>Object.entries($r).map(([e,t])=>({value:e,label:t.name,description:t.description,icon:t.icon})),O2=e=>({meat:"kg",grocery:"piece",medicine:"unit",food:"plate",electronics:"piece",clothing:"piece",baby:"piece"})[e]||"piece",yne=DL({name:Ss().min(1,"Product name is required"),category:Ss().min(1,"Category is required"),subcategory:Ss().optional(),price:ga().min(0,"Price must be positive"),comparePrice:ga().optional(),costPrice:ga().optional(),sku:Ss().optional(),barcode:Ss().optional(),trackQuantity:cc().default(!0),quantity:ga().min(0,"Quantity must be positive"),lowStockThreshold:ga().min(0).optional(),description:Ss().min(1,"Description is required"),shortDescription:Ss().optional(),tags:Um(Ss()).default([]),images:Um(Ss()).min(1,"At least one image is required"),status:$L(["active","draft","archived"]).default("active"),featured:cc().default(!1),freeDelivery:cc().default(!1),seoTitle:Ss().optional(),seoDescription:Ss().optional(),dynamicFields:FL(c0()).default({})}),bne=()=>{const[e,t]=j.useState(""),[n,r]=j.useState([]),[a,i]=j.useState([]),[o,c]=j.useState(""),[d,h]=j.useState(!1),[m,u]=j.useState(!1),[f,p]=j.useState([]),[x,v]=j.useState([]),y=AL({resolver:RL(yne),defaultValues:{name:"",category:"",price:0,quantity:0,description:"",tags:[],images:[],status:"active",featured:!1,freeDelivery:!1,trackQuantity:!0,dynamicFields:{}}}),{control:w,handleSubmit:b,watch:_,setValue:N,formState:{errors:k}}=y,E=_("category");j.useEffect(()=>{var O;t(E),E&&((O=$r[E])!=null&&O.subcategories)?v($r[E].subcategories):v([]),N("subcategory","")},[E,N]),j.useEffect(()=>{(async()=>{try{const{response:Y,data:J}=await Re("/vendor-profiles/");if(Y.ok&&J&&J.length>0){const F=J[0].categories||[];p(F)}}catch(Y){console.error("Error fetching vendor profile:",Y)}})()},[N]);const T=O=>{const Y=O.target.files;if(Y){const J=Array.from(Y).map(G=>URL.createObjectURL(G));r(G=>[...G,...J]),N("images",[...n,...J])}},R=O=>{const Y=n.filter((J,G)=>G!==O);r(Y),N("images",Y)},$=()=>{if(o.trim()&&!a.includes(o.trim())){const O=[...a,o.trim()];i(O),N("tags",O),c("")}},M=O=>{const Y=a.filter(J=>J!==O);i(Y),N("tags",Y)},A=O=>{console.log("Product Data:",O)},C=O=>{const Y=`dynamicFields.${O.name}`;switch(O.type){case"text":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:O.name,children:[O.label," ",O.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:Y,control:w,rules:{required:O.required},render:({field:J})=>s.jsx(je,{...J,placeholder:`Enter ${O.label.toLowerCase()}`})})]},O.name);case"number":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:O.name,children:[O.label," ",O.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:Y,control:w,rules:{required:O.required},render:({field:J})=>s.jsx(je,{...J,type:"number",placeholder:`Enter ${O.label.toLowerCase()}`,onChange:G=>J.onChange(Number(G.target.value))})})]},O.name);case"select":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:O.name,children:[O.label," ",O.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:Y,control:w,rules:{required:O.required},render:({field:J})=>{var G;return s.jsxs(qt,{onValueChange:J.onChange,value:J.value,children:[s.jsx(Bt,{children:s.jsx(Ht,{placeholder:`Select ${O.label.toLowerCase()}`})}),s.jsx(Vt,{children:(G=O.options)==null?void 0:G.map(F=>s.jsx(We,{value:F,children:F},F))})]})}})]},O.name);case"multiselect":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:O.name,children:[O.label," ",O.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:Y,control:w,rules:{required:O.required},render:({field:J})=>{var F;const G=J.value||[];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(qt,{onValueChange:I=>{G.includes(I)||J.onChange([...G,I])},children:[s.jsx(Bt,{children:s.jsx(Ht,{placeholder:`Select ${O.label.toLowerCase()}`})}),s.jsx(Vt,{children:(F=O.options)==null?void 0:F.map(I=>s.jsx(We,{value:I,children:I},I))})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:G.map(I=>s.jsxs(Fe,{variant:"secondary",className:"flex items-center gap-1",children:[I,s.jsx(Ys,{className:"h-3 w-3 cursor-pointer",onClick:()=>{J.onChange(G.filter(V=>V!==I))}})]},I))})]})}})]},O.name);case"textarea":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:O.name,children:[O.label," ",O.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:Y,control:w,rules:{required:O.required},render:({field:J})=>s.jsx(Ws,{...J,placeholder:`Enter ${O.label.toLowerCase()}`})})]},O.name);case"boolean":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ut,{name:Y,control:w,render:({field:J})=>s.jsx($t,{checked:J.value,onCheckedChange:J.onChange})}),s.jsx(xe,{htmlFor:O.name,children:O.label})]},O.name);case"date":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:O.name,children:[O.label," ",O.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:Y,control:w,rules:{required:O.required},render:({field:J})=>s.jsx(je,{...J,type:"date"})})]},O.name);default:return null}},z=()=>m?s.jsx(l5,{productData:_()}):s.jsxs("form",{onSubmit:b(A),className:"space-y-6",children:[s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs(Pt,{className:"flex items-center gap-2",children:[s.jsx(Mt,{className:"h-5 w-5"}),"Basic Information"]})}),s.jsxs(Oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"name",children:["Product Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:"name",control:w,render:({field:O})=>s.jsx(je,{...O,placeholder:"Enter product name"})}),k.name&&s.jsx("p",{className:"text-red-500 text-sm",children:k.name.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"category",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:"category",control:w,render:({field:O})=>s.jsxs(qt,{onValueChange:O.onChange,value:O.value,children:[s.jsx(Bt,{children:s.jsx(Ht,{placeholder:"Select category"})}),s.jsx(Vt,{children:f.map(Y=>{const J=vne().find(G=>G.value===Y);return J?s.jsx(We,{value:Y,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:J.icon}),s.jsx("span",{children:J.label})]})},Y):null})})]})}),k.category&&s.jsx("p",{className:"text-red-500 text-sm",children:k.category.message})]}),x.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"subcategory",children:"Subcategory"}),s.jsx(ut,{name:"subcategory",control:w,render:({field:O})=>s.jsxs(qt,{onValueChange:O.onChange,value:O.value,children:[s.jsx(Bt,{children:s.jsx(Ht,{placeholder:"Select subcategory"})}),s.jsx(Vt,{children:x.map(Y=>s.jsx(We,{value:Y,children:Y},Y))})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"shortDescription",children:"Short Description"}),s.jsx(ut,{name:"shortDescription",control:w,render:({field:O})=>s.jsx(Ws,{...O,placeholder:"Brief product description",rows:2})})]})]})]}),e&&$r[e]&&s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs(Pt,{className:"flex items-center gap-2",children:[s.jsx(Af,{className:"h-5 w-5"}),s.jsx("span",{className:"mr-2",children:$r[e].icon}),$r[e].name," Details"]})}),s.jsx(Oe,{className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:$r[e].fields.map(C)})})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{children:"Pricing & Inventory"})}),s.jsxs(Oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"price",children:["Selling Price ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:"price",control:w,render:({field:O})=>s.jsx(je,{...O,type:"number",step:"0.01",placeholder:"0.00",onChange:Y=>O.onChange(Number(Y.target.value))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"comparePrice",children:"Compare Price"}),s.jsx(ut,{name:"comparePrice",control:w,render:({field:O})=>s.jsx(je,{...O,type:"number",step:"0.01",placeholder:"0.00",onChange:Y=>O.onChange(Number(Y.target.value))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"costPrice",children:"Cost Price"}),s.jsx(ut,{name:"costPrice",control:w,render:({field:O})=>s.jsx(je,{...O,type:"number",step:"0.01",placeholder:"0.00",onChange:Y=>O.onChange(Number(Y.target.value))})})]})]}),s.jsx(Pa,{}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ut,{name:"trackQuantity",control:w,render:({field:O})=>s.jsx($t,{checked:O.value,onCheckedChange:O.onChange})}),s.jsx(xe,{children:"Track Quantity"})]}),_("trackQuantity")&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"quantity",children:["Quantity ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:"quantity",control:w,render:({field:O})=>s.jsx(je,{...O,type:"number",placeholder:"0",onChange:Y=>O.onChange(Number(Y.target.value))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"lowStockThreshold",children:"Low Stock Alert"}),s.jsx(ut,{name:"lowStockThreshold",control:w,render:({field:O})=>s.jsx(je,{...O,type:"number",placeholder:"5",onChange:Y=>O.onChange(Number(Y.target.value))})})]})]})]})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs(Pt,{className:"flex items-center gap-2",children:[s.jsx(ja,{className:"h-5 w-5"}),"Product Images"]})}),s.jsxs(Oe,{className:"space-y-4",children:[s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"image-upload"}),s.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[s.jsx(gp,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload images or drag and drop"}),s.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG, GIF up to 10MB"})]})]}),n.length>0&&s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:n.map((O,Y)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:O,alt:`Product ${Y+1}`,className:"w-full h-24 object-cover rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>R(Y),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ys,{className:"h-3 w-3"})}),Y===0&&s.jsx(Fe,{className:"absolute bottom-1 left-1 text-xs",children:"Main"})]},Y))})]})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs(Pt,{className:"flex items-center gap-2",children:[s.jsx(FP,{className:"h-5 w-5"}),"Product Description"]})}),s.jsx(Oe,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"description",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:"description",control:w,render:({field:O})=>s.jsx(t5,{theme:"snow",value:O.value,onChange:O.onChange,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},style:{minHeight:"200px"}})}),k.description&&s.jsx("p",{className:"text-red-500 text-sm",children:k.description.message})]})})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{children:"Product Tags"})}),s.jsxs(Oe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(je,{value:o,onChange:O=>c(O.target.value),placeholder:"Add a tag",onKeyPress:O=>O.key==="Enter"&&(O.preventDefault(),$())}),s.jsx(ie,{type:"button",onClick:$,variant:"outline",children:s.jsx(Es,{className:"h-4 w-4"})})]}),a.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(O=>s.jsxs(Fe,{variant:"secondary",className:"flex items-center gap-1",children:[O,s.jsx(Ys,{className:"h-3 w-3 cursor-pointer",onClick:()=>M(O)})]},O))})]})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{children:"SEO & Settings"})}),s.jsxs(Oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"sku",children:"SKU"}),s.jsx(ut,{name:"sku",control:w,render:({field:O})=>s.jsx(je,{...O,placeholder:"Product SKU"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"barcode",children:"Barcode"}),s.jsx(ut,{name:"barcode",control:w,render:({field:O})=>s.jsx(je,{...O,placeholder:"Product barcode"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"seoTitle",children:"SEO Title"}),s.jsx(ut,{name:"seoTitle",control:w,render:({field:O})=>s.jsx(je,{...O,placeholder:"SEO optimized title"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"seoDescription",children:"SEO Description"}),s.jsx(ut,{name:"seoDescription",control:w,render:({field:O})=>s.jsx(Ws,{...O,placeholder:"SEO meta description",rows:3})})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ut,{name:"featured",control:w,render:({field:O})=>s.jsx($t,{checked:O.value,onCheckedChange:O.onChange})}),s.jsx(xe,{children:"Featured Product"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ut,{name:"freeDelivery",control:w,render:({field:O})=>s.jsx($t,{checked:O.value,onCheckedChange:O.onChange})}),s.jsx(xe,{children:"Free Delivery"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"status",children:"Status"}),s.jsx(ut,{name:"status",control:w,render:({field:O})=>s.jsxs(qt,{onValueChange:O.onChange,value:O.value,children:[s.jsx(Bt,{className:"w-32",children:s.jsx(Ht,{})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"active",children:"Active"}),s.jsx(We,{value:"draft",children:"Draft"}),s.jsx(We,{value:"archived",children:"Archived"})]})]})})]})]})]})]}),s.jsxs("div",{className:"flex gap-4 sticky bottom-4 bg-white p-4 border-t",children:[s.jsxs(ie,{type:"button",variant:"outline",className:"flex-1",onClick:()=>u(!m),children:[s.jsx(Ps,{className:"h-4 w-4 mr-2"}),m?"Edit":"Preview"]}),s.jsx(ie,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{N("status","draft"),b(A)()},children:"Save as Draft"}),s.jsxs(ie,{type:"submit",className:"flex-1",children:[s.jsx(Wc,{className:"h-4 w-4 mr-2"}),"Publish Product"]})]})]});if(d)return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:s.jsx(Yt,{className:"h-4 w-4"})}),s.jsx("h1",{className:"text-xl font-semibold",children:"Add New Product"})]}),s.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>u(!m),children:[s.jsx(Ps,{className:"h-4 w-4 mr-2"}),m?"Edit":"Preview"]})]})}),s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsx(ej,{className:"h-[calc(100vh-80px)]",children:s.jsx(z,{})})})]});const P=nt();return s.jsx("button",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-full shadow-xl flex items-center justify-center transition-all duration-300 hover:scale-110 border-4 border-white","aria-label":"Add Product",onClick:()=>P("/vendor/add-product"),children:s.jsx(Es,{className:"h-7 w-7"})})},R2=[{title:"Home",url:"/vendor/dashboard",icon:vb},{title:"Orders",url:"/vendor/orders",icon:zP},{title:"Products",url:"/vendor/products",icon:Mt},{title:"Settings",url:"/vendor/settings",icon:r6}],wne=({children:e})=>s.jsx(s.Fragment,{children:e}),jne=()=>{const e=Zn(),t=nt();return s.jsxs("div",{className:"fixed bottom-0 left-0 w-full z-50",children:[s.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 -top-6 z-10",children:s.jsx(bne,{})}),s.jsxs("nav",{className:"bg-gradient-to-r from-slate-50 to-white shadow-2xl border-t border-gray-100 relative overflow-hidden backdrop-blur-sm pb-safe-bottom",children:[s.jsx("div",{className:"absolute inset-0 bg-white",style:{clipPath:"polygon(0 0, calc(50% - 32px) 0, calc(50% - 24px) 16px, calc(50% + 24px) 16px, calc(50% + 32px) 0, 100% 0, 100% 100%, 0 100%)"}}),s.jsxs("div",{className:"relative flex justify-around items-center px-safe-x py-1 pt-3 md:py-1 md:pt-2",children:[R2.slice(0,2).map(n=>{const r=n.icon,a=e.pathname===n.url;return s.jsxs("button",{onClick:()=>t(n.url),className:`flex flex-col items-center justify-center p-2 md:p-1 rounded-lg transition-all duration-200 min-w-[60px] ${a?"text-orange-600 bg-orange-50":"text-gray-600 hover:text-orange-500 hover:bg-gray-50"}`,"aria-label":n.title,children:[s.jsx(r,{className:"h-5 w-5 mb-1 md:mb-0"}),s.jsx("span",{className:"text-xs font-medium",children:n.title})]},n.title)}),s.jsx("div",{className:"w-16"}),R2.slice(2).map(n=>{const r=n.icon,a=e.pathname===n.url;return s.jsxs("button",{onClick:()=>t(n.url),className:`flex flex-col items-center justify-center p-2 md:p-1 rounded-lg transition-all duration-200 min-w-[60px] ${a?"text-orange-600 bg-orange-50":"text-gray-600 hover:text-orange-500 hover:bg-gray-50"}`,"aria-label":n.title,children:[s.jsx(r,{className:"h-5 w-5 mb-1 md:mb-0"}),s.jsx("span",{className:"text-xs font-medium",children:n.title})]},n.title)})]})]})]})},_ne=async()=>{console.log(" AUTH DEBUG START");const e=await Se.getToken(),t=await Se.getUser(),n=await Se.isAuthenticated();console.log(" Auth Status:",{hasToken:!!e,tokenLength:(e==null?void 0:e.length)||0,tokenPreview:e?`${e.substring(0,10)}...`:"null",hasUser:!!t,userId:t==null?void 0:t.id,userType:t==null?void 0:t.user_type,isAuthenticated:n});const r=localStorage.getItem("token"),a=localStorage.getItem("user");return console.log(" Direct Storage:",{directToken:r?`${r.substring(0,10)}...`:"null",directUser:a?"exists":"null",allKeys:Object.keys(localStorage)}),console.log(" AUTH DEBUG END"),{token:e,user:t,isAuth:n}};function Nne({title:e,subtitle:t,headerActions:n}){const r=nt(),{toast:a}=es(),[i,o]=j.useState([]),[c,d]=j.useState([]),[h,m]=j.useState(!0),[u,f]=j.useState(null),[p,x]=j.useState(0),[v,y]=j.useState(0),[w,b]=j.useState(!0),_=i.filter(P=>!P.read).length,N=c.reduce((P,O)=>P+(O.unread_count||0),0),k=!1;j.useEffect(()=>{console.log(" VendorHeader initializing..."),$(),M(),R(),E(),T();const P=setInterval(E,3e4),O=setInterval(T,3e4),Y=setInterval(M,6e4),J=H=>{const U=H.detail;o(q=>[U,...q])},G=H=>{const{order:U}=H.detail,q={id:Date.now(),type:"order",title:"New Order Received!",message:`Order #${U.order_number} for ${U.total_amount}`,data:{orderId:U.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(K=>[q,...K]),rs.playNotificationSound(),rs.showBrowserNotificationCompat(q.title,{body:q.message,tag:`order-${U.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/orders"}}),a({title:q.title,description:q.message,duration:5e3})},F=H=>{const{refund:U}=H.detail,q={id:Date.now(),type:"refund_request",title:"Refund Request Received!",message:`Refund request for Order #${U.order_number} - ${U.amount}`,data:{refundId:U.id,orderId:U.order_id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(K=>[q,...K]),rs.playNotificationSound(),rs.showBrowserNotificationCompat(q.title,{body:q.message,tag:`refund-${U.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/orders"}}),a({title:q.title,description:q.message,duration:5e3})},I=H=>{const{product:U}=H.detail,q={id:Date.now(),type:"stock_alert",title:"Low Stock Alert!",message:`${U.name} is running low (${U.stock} left)`,data:{productId:U.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/products"};o(K=>[q,...K]),rs.playNotificationSound(),rs.showBrowserNotificationCompat(q.title,{body:q.message,tag:`stock-${U.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/products"}}),a({title:q.title,description:q.message,duration:5e3})},V=H=>{const{order:U,oldStatus:q,newStatus:K}=H.detail,B={id:Date.now(),type:"order_status",title:"Order Status Updated!",message:`Order #${U.order_number} changed from ${q} to ${K}`,data:{orderId:U.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(W=>[B,...W]),rs.playNotificationSound(),rs.showBrowserNotificationCompat(B.title,{body:B.message,tag:`status-${U.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/orders"}}),a({title:B.title,description:B.message,duration:4e3})};return window.addEventListener("newNotification",J),window.addEventListener("orderCreated",G),window.addEventListener("refundRequest",F),window.addEventListener("stockAlert",I),window.addEventListener("orderStatusChange",V),()=>{clearInterval(P),clearInterval(O),clearInterval(Y),window.removeEventListener("newNotification",J),window.removeEventListener("orderCreated",G),window.removeEventListener("refundRequest",F),window.removeEventListener("stockAlert",I),window.removeEventListener("orderStatusChange",V)}},[]);const E=async()=>{try{const P=await tr.getConversations(),Y=(Array.isArray(P)?P:(P==null?void 0:P.results)||[]).reduce((J,G)=>{var V,H,U;const F=(V=G.other_participant)==null?void 0:V.id;if(!F)return J;const I=J.find(q=>{var K;return((K=q.other_participant)==null?void 0:K.id)===F});if(!I)J.push(G);else{const q=((H=G.last_message)==null?void 0:H.created_at)||G.updated_at,K=((U=I.last_message)==null?void 0:U.created_at)||I.updated_at;if(new Date(q)>new Date(K)){const B=J.findIndex(W=>{var oe;return((oe=W.other_participant)==null?void 0:oe.id)===F});J[B]=G}}return J},[]);c.length>0&&Y.forEach(J=>{var F,I;const G=c.find(V=>{var H,U;return((H=V.other_participant)==null?void 0:H.id)===((U=J.other_participant)==null?void 0:U.id)});G&&J.unread_count>G.unread_count&&rs.showBrowserNotification(`New message from ${(F=J.other_participant)==null?void 0:F.username}`,{body:((I=J.last_message)==null?void 0:I.content)||"New message received",tag:`message-${J.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/messages"}})}),d(Y)}catch(P){console.error("Failed to load conversations:",P)}},T=async()=>{try{const{response:P,data:O}=await Re("/vendor-notifications/");if(P.ok&&O){const Y=Array.isArray(O)?O:O.results||[];i.length>0&&Y.forEach(J=>{if(!i.find(F=>F.id===J.id)){rs.playNotificationSound();let F="/vendor/orders",I=!0;switch(J.type){case"order":F="/vendor/orders";break;case"refund":case"refund_request":F="/vendor/orders";break;case"stock_alert":case"low_stock":F="/vendor/products";break;case"order_status":case"status_change":F="/vendor/orders";break;case"payment":F="/vendor/wallet";break;case"message":F="/vendor/messages",I=!1;break;default:F="/vendor/orders"}rs.showBrowserNotificationCompat(J.title,{body:J.message,tag:`notification-${J.id}`,requireInteraction:I,data:{actionUrl:F}}),a({title:J.title,description:J.message,duration:5e3})}}),o(Y)}}catch(P){console.error("Failed to load notifications:",P),i.length===0&&o([])}},R=async()=>{await rs.requestPermission()},$=async()=>{console.log(" Fetching vendor status...");const P=Date.now();if(P-p<3e4&&u!==null){console.log(" Using cached vendor status");return}try{x(P);const O=await Se.isAuthenticated();if(console.log(" Authentication check for fetch:",O),!O){console.log(" Not authenticated");return}const Y=await Se.getUser(),{response:J,data:G}=await Re("/vendor-profiles/");if(console.log(" Fetch vendor status response:",{status:J.status,statusText:J.statusText,data:G,headers:Object.fromEntries(J.headers.entries())}),J.status===401||J.status===403){console.log(" Authentication error in fetch - user may not have vendor profile"),console.log("User authenticated but no vendor profile found");return}if(J.status!==200&&J.status!==201)throw console.log(" Unexpected status in fetch:",J.status),new Error((G==null?void 0:G.error)||(G==null?void 0:G.message)||"Failed to fetch vendor status");if(G&&G.results&&G.results.length>0){const F=G.results.find(I=>I.user===(Y==null?void 0:Y.id))||G.results[0];console.log(" Profile found:",{id:F.id,user:F.user,is_active:F.is_active}),f(F.id),m(F.is_active||!1)}else console.log(" No profile found in response"),console.log(" User may need to switch to vendor role or complete onboarding")}catch(O){console.error(" Error fetching vendor status:",O),a({title:"Error",description:"Failed to load vendor status",variant:"destructive"})}},M=async()=>{try{const{response:P,data:O}=await Re("/vendor-wallet/");if(P.ok&&O){const Y=O.balance||0,J=v;y(Y),b(Y>=100),Y<100&&h&&(m(!1),localStorage.getItem("lowBalanceWarningShown")||(localStorage.setItem("lowBalanceWarningShown","true"),a({title:"Status Changed",description:"Automatically set to offline due to low wallet balance (< 100 points)",variant:"destructive"}))),Y>=100&&J<100&&!h&&(m(!0),localStorage.removeItem("lowBalanceWarningShown"),a({title:"Status Changed",description:"Automatically set to online - wallet balance restored",variant:"default"}))}}catch(P){console.error("Failed to fetch wallet balance:",P)}},A=async()=>{var P;if(console.log(" Toggle status started"),!h&&v<100){a({title:"Insufficient Balance",description:`Minimum 100 points required to go online. Current balance: ${v}`,variant:"destructive"});return}await _ne();try{const O=await Se.isAuthenticated();if(console.log(" Authentication check:",O),!O){console.log(" Not authenticated");return}if(!u)throw console.log(" No profile ID found"),new Error("Profile ID not found");const Y=!h;console.log(" Toggling status from",h,"to",Y,"for profile",u);const J={is_active:Y};console.log(" Request body:",J);const G=await ym();console.log(" Request headers:",G);const{response:F,data:I}=await Re(`/vendor-profiles/${u}/toggle-status/`,{method:"POST",body:JSON.stringify(J)});if(console.log(" Toggle status response:",{status:F.status,statusText:F.statusText,data:I,headers:Object.fromEntries(F.headers.entries())}),console.log(" Response details:",{ok:F.ok,status:F.status,dataSuccess:I==null?void 0:I.success,dataError:I==null?void 0:I.error,dataMessage:I==null?void 0:I.message}),F.status===400&&((P=I==null?void 0:I.error)!=null&&P.includes("wallet balance"))){m(!1),b(!1),y(I.wallet_balance||0),a({title:"Insufficient Balance",description:I.error,variant:"destructive"});return}if(F.status===401||F.status===403){console.log(" Authentication error - but not clearing auth yet"),a({title:"Permission Error",description:"You don't have permission to perform this action",variant:"destructive"});return}if(F.status===200||F.status===201)if(console.log(" Success response received"),I&&I.success!==!1){const H=I.is_active!==void 0?I.is_active:Y;console.log(" Setting status to:",H),m(H),a({title:"Success",description:I.message||`Status set to ${H?"Online":"Offline"}`}),console.log(" Toggle completed successfully");return}else throw console.log(" API returned success: false"),new Error((I==null?void 0:I.error)||(I==null?void 0:I.message)||"Failed to toggle status");console.log(" Unexpected status code:",F.status);const V=(I==null?void 0:I.error)||(I==null?void 0:I.detail)||(I==null?void 0:I.message)||`Server returned status ${F.status}`;throw new Error(V)}catch(O){console.error(" Error toggling status:",O),a({title:"Error",description:O instanceof Error?O.message:"Failed to toggle status",variant:"destructive"})}},C=async P=>{await rs.markAsRead(P),o(O=>O.map(Y=>Y.id===P?{...Y,read:!0}:Y))},z=async()=>{await rs.markAllAsRead(),o(P=>P.map(O=>({...O,read:!0})))};return s.jsx("header",{className:"fixed top-0 z-50 w-full max-w-full border-b bg-gradient-to-r from-gray-50 to-white shadow-lg overflow-hidden",children:s.jsxs("div",{className:"flex h-14 sm:h-16 items-center px-3 sm:px-4 max-w-full",children:[s.jsx("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:s.jsx("div",{className:"flex items-center gap-2 min-w-0",children:s.jsx("img",{src:"/assets/ezeywaylogo.png",alt:"Ezeyway",className:"h-32 w-32 sm:h-36 sm:w-36 object-contain flex-shrink-0"})})}),s.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 border border-gray-300 rounded-full px-3 py-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-xs font-medium ${h?"text-green-700":"text-gray-700"}`,children:h?"Online":"Offline"}),!w&&s.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Low Balance"}),k]}),s.jsx("button",{onClick:A,disabled:!w&&!h,title:w?"":`Minimum 100 points required. Current: ${v}`,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300 ${!w&&!h?"bg-red-400 cursor-not-allowed opacity-50":h?"bg-green-500":"bg-gray-400"}`,children:s.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform shadow-sm ${h?"translate-x-5":"translate-x-1"}`})})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[s.jsxs(Tc,{children:[s.jsx(Ac,{asChild:!0,children:s.jsxs(ie,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10 text-gray-700 hover:bg-gray-100",children:[s.jsx(_a,{className:"h-4 w-4 sm:h-5 sm:w-5"}),N>0&&s.jsx(Fe,{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 text-[10px] sm:text-xs flex items-center justify-center min-w-[16px] sm:min-w-[20px] bg-red-500 text-white border-2 border-white",children:N>9?"9+":N}),s.jsx("span",{className:"sr-only",children:"Messages"})]})}),s.jsxs(nl,{align:"end",className:"w-72 sm:w-80 mr-2 sm:mr-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Messages"}),s.jsx("div",{className:"flex gap-2",children:s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>r("/vendor/messages"),className:"text-xs",children:"View all"})})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:c.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No messages"}):c.slice(0,5).map(P=>{var O,Y,J,G,F,I;return s.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${P.unread_count>0?"bg-blue-50/50":""}`,onClick:()=>r("/vendor/messages"),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(ci,{className:"h-8 w-8",children:[s.jsx(Ur,{src:(O=P.other_participant)==null?void 0:O.profile_picture}),s.jsx(di,{children:(J=(Y=P.other_participant)==null?void 0:Y.username)==null?void 0:J.charAt(0)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:(G=P.other_participant)==null?void 0:G.username}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((F=P.last_message)==null?void 0:F.content)||((I=P.last_message)==null?void 0:I.file_name)||"No messages"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:P.last_message?new Date(P.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),P.unread_count>0&&s.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-white font-bold",children:P.unread_count})})]})},P.id)})})]})]}),n,!n&&s.jsxs(Tc,{children:[s.jsx(Ac,{asChild:!0,children:s.jsxs(ie,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10 text-gray-700 hover:bg-gray-100",children:[s.jsx(zn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),_>0&&s.jsx(Fe,{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 text-[10px] sm:text-xs flex items-center justify-center min-w-[16px] sm:min-w-[20px] bg-red-500 text-white border-2 border-white",children:_>9?"9+":_}),s.jsx("span",{className:"sr-only",children:"Notifications"})]})}),s.jsxs(nl,{align:"end",className:"w-72 sm:w-80 mr-2 sm:mr-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Notifications"}),_>0&&s.jsx(ie,{variant:"ghost",size:"sm",onClick:z,className:"text-xs",children:"Mark all read"})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):i.map(P=>s.jsx("div",{className:`p-4 border-b last:border-b-0 hover:bg-muted/50 cursor-pointer ${P.read?"":"bg-blue-50/50"}`,onClick:()=>{switch(C(P.id),P.type){case"order":case"refund":case"refund_request":case"order_status":case"status_change":r("/vendor/orders");break;case"stock_alert":case"low_stock":r("/vendor/products");break;case"payment":r("/vendor/wallet");break;case"message":r("/vendor/messages");break;default:r("/vendor/orders")}},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${P.read?"bg-transparent":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-medium ${P.read?"text-gray-700":"text-gray-900"}`,children:P.title}),s.jsx("p",{className:`text-sm ${P.read?"text-gray-600":"text-gray-700"}`,children:P.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(P.created_at).toLocaleString()})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Fe,{variant:"outline",className:`text-xs ${P.type==="order"?"border-green-200 text-green-700":P.type==="refund"||P.type==="refund_request"?"border-red-200 text-red-700":P.type==="stock_alert"||P.type==="low_stock"?"border-orange-200 text-orange-700":P.type==="order_status"||P.type==="status_change"||P.type==="payment"?"border-blue-200 text-blue-700":P.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:P.type==="refund_request"?"refund":P.type==="stock_alert"?"stock":P.type==="order_status"?"status":P.type})})]})},P.id))}),s.jsx("div",{className:"p-2 border-t",children:s.jsx(ie,{variant:"ghost",className:"w-full text-sm",onClick:()=>r("/vendor/notifications"),children:"View all notifications"})})]})]})]})]})})}function Sne({isOpen:e,orders:t,onAccept:n,onReject:r}){const[a,i]=j.useState({}),o=j.useRef(null),{toast:c}=es(),d=j.useRef({});j.useEffect(()=>{if(e&&t.length>0){(async()=>{if(o.current)try{o.current.volume=.8,await o.current.play(),setTimeout(()=>{o.current&&(o.current.pause(),o.current.currentTime=0)},3e3)}catch(x){console.warn("Audio autoplay blocked:",x);try{const v=new(window.AudioContext||window.webkitAudioContext),y=v.createOscillator(),w=v.createGain();y.connect(w),w.connect(v.destination),y.frequency.setValueAtTime(800,v.currentTime),y.type="square",w.gain.setValueAtTime(.3,v.currentTime),w.gain.exponentialRampToValueAtTime(.01,v.currentTime+.5),y.start(v.currentTime),y.stop(v.currentTime+.5)}catch(v){console.warn("Web Audio API also failed:",v)}}})(),"Notification"in window&&Notification.permission==="default"?Notification.requestPermission().then(x=>{x==="granted"&&h()}):"Notification"in window&&Notification.permission==="granted"&&h(),t.forEach(x=>{d.current[x.id]||(d.current[x.id]=new Date(x.created_at))});const p=setInterval(()=>{const x={};t.forEach(v=>{if(d.current[v.id]){const w=Math.floor((new Date().getTime()-d.current[v.id].getTime())/1e3);x[v.id]=w}}),i(x)},1e3);return()=>clearInterval(p)}},[e,t]);const h=()=>{t.forEach(f=>{new Notification("New Order Received!",{body:`Order #${f.order_number} - ${f.total_amount}`,icon:"/favicon.ico",tag:`order-${f.id}`,requireInteraction:!0})})};if(!e||t.length===0)return null;const m=f=>{const p=t.find(x=>x.id===f);n(f),c({title:"Order Accepted",description:`Order #${p==null?void 0:p.order_number} has been accepted`})},u=f=>{const p=t.find(x=>x.id===f);r(f),c({title:"Order Rejected",description:`Order #${p==null?void 0:p.order_number} has been rejected`,variant:"destructive"})};return s.jsxs(s.Fragment,{children:[s.jsx("audio",{ref:o,preload:"auto",loop:!0,children:s.jsx("source",{src:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",type:"audio/wav"})}),s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-end",children:s.jsx("div",{className:"w-full bg-white rounded-t-3xl shadow-2xl animate-in slide-in-from-bottom duration-300",style:{height:"80vh"},children:s.jsxs("div",{className:"p-6 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 bg-red-100 rounded-full flex items-center justify-center animate-pulse",children:s.jsx(zn,{className:"h-3 w-3 text-red-600 animate-bounce"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-bold text-red-900",children:" New Orders Received!"}),s.jsxs("p",{className:"text-xs text-red-600 font-medium",children:[t.length," order",t.length>1?"s":""," waiting for response"]})]})]}),s.jsx("div",{className:"text-xs text-red-600 font-bold animate-pulse",children:"URGENT"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:t.map(f=>{const p=a[f.id]||0;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("p",{className:"text-xs font-bold text-gray-900",children:["#",f.order_number]}),s.jsxs("p",{className:"text-xs font-bold text-green-600",children:["",f.total_amount]}),s.jsxs("p",{className:"text-xs text-blue-600",children:[Math.floor(p/60),":",(p%60).toString().padStart(2,"0")]})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:f.customer_name}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-1",children:[s.jsxs("div",{className:"flex items-start gap-1",children:[s.jsx(Gt,{className:"h-2 w-2 text-gray-500 mt-0.5"}),s.jsx("p",{className:"text-xs text-gray-900",children:f.delivery_address})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ch,{className:"h-2 w-2 text-gray-500"}),s.jsx("p",{className:"text-xs text-gray-900",children:f.delivery_phone})]})]}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("p",{className:"text-xs font-medium text-gray-700 mb-1",children:["Items (",f.items.length,")"]}),s.jsx("div",{className:"space-y-1 max-h-16 overflow-y-auto",children:f.items.map(x=>{var v,y,w;return s.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white rounded",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:s.jsx("img",{src:((w=(y=(v=x.product_details)==null?void 0:v.images)==null?void 0:y[0])==null?void 0:w.image_url)||"/placeholder-product.jpg",alt:x.product_name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:x.product_name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",x.quantity]})]}),s.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["",x.total_price]})]},x.id)})})]}),f.delivery_instructions&&s.jsxs("div",{className:"mb-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Instructions:"}),s.jsx("p",{className:"text-xs text-gray-600 italic",children:f.delivery_instructions})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(ie,{onClick:()=>u(f.id),variant:"outline",size:"sm",className:"flex-1 border-red-200 text-red-600 hover:bg-red-50 text-xs h-6",children:[s.jsx(Ys,{className:"h-2 w-2 mr-1"}),"Reject"]}),s.jsxs(ie,{onClick:()=>m(f.id),size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-xs h-6",children:[s.jsx(oh,{className:"h-2 w-2 mr-1"}),"Accept"]})]})]},f.id)})})]})})})]})}function c5(){const[e,t]=j.useState(!1),[n,r]=j.useState(null);return j.useEffect(()=>{if(!Nt.isNativePlatform())return;const a=i=>{r(i.detail),t(!0),setTimeout(()=>{t(!1)},5e3)};return window.addEventListener("showOrderModal",a),()=>{window.removeEventListener("showOrderModal",a)}},[]),!Nt.isNativePlatform()||!e?null:s.jsx("div",{className:"fixed top-4 left-4 right-4 z-[10000] animate-in slide-in-from-top duration-300",children:s.jsx(Ee,{className:"border-orange-200 bg-orange-50 shadow-lg",children:s.jsx(Oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center animate-pulse",children:s.jsx(zn,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-bold text-orange-900",children:" New Order Received!"}),n&&s.jsxs("p",{className:"text-xs text-orange-700",children:["Order #",n.orderNumber," - ",n.amount]}),s.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Tap anywhere to view and respond"})]})]})})})})}function kne(){const[e,t]=j.useState([]),[n,r]=j.useState(!1),a=j.useRef(null),i=j.useRef(new Set),{notifications:o,unreadCount:c,isConnected:d}=sg();j.useEffect(()=>{const f=p=>{const x=p.detail;x.type==="order"&&x.title.includes("New Order")&&h()};return window.addEventListener("newNotification",f),()=>{window.removeEventListener("newNotification",f)}},[]);const h=async()=>{try{const{authService:f}=await ze(async()=>{const{authService:w}=await Promise.resolve().then(()=>Qi);return{authService:w}},void 0),p=await f.getToken();if(!p){console.log("No token found for pending orders");return}console.log(" Mobile: Fetching pending orders with token:",p?`${p.substring(0,10)}...`:"NO TOKEN"),console.log(" Mobile: API URL:",Ub("orders/vendor/pending/"));const{apiRequest:x}=await ze(async()=>{const{apiRequest:w}=await Promise.resolve().then(()=>os);return{apiRequest:w}},void 0),{response:v,data:y}=await x("orders/vendor/pending/");console.log(" Mobile: Pending orders response:",v.status,v.ok),v.ok&&y?(console.log("Pending orders received:",y.length,y),t(y),r(y.length>0),y.length>0&&(console.log(" Mobile: Showing order notification for",y.length,"orders"),ze(async()=>{const{simpleNotificationService:w}=await Promise.resolve().then(()=>Wx);return{simpleNotificationService:w}},void 0).then(({simpleNotificationService:w})=>{y.forEach(b=>{i.current.has(b.id)||(console.log(" Processing NEW order:",b.order_number,b.total_amount),i.current.add(b.id),w.showOrderNotification(b.order_number,b.total_amount,b.id))})}))):console.error("Failed to fetch pending orders:",v.status,v.statusText)}catch(f){console.error("Error fetching pending orders:",f)}};return j.useEffect(()=>{(async()=>{const{authService:y}=await ze(async()=>{const{authService:b}=await Promise.resolve().then(()=>Qi);return{authService:b}},void 0);await y.getToken()&&h()})();const p=Nt.isNativePlatform()?3e4:6e4;a.current=setInterval(h,p);const x=()=>{document.hidden||h()};document.addEventListener("visibilitychange",x);const v=()=>{console.log("Refreshing pending orders from mobile app resume"),h()};if(window.addEventListener("refreshPendingOrders",v),Nt.isNativePlatform()){const y=()=>{console.log(" App state changed - refreshing orders"),h()};return document.addEventListener("resume",y),document.addEventListener("visibilitychange",y),()=>{a.current&&clearInterval(a.current),document.removeEventListener("visibilitychange",x),window.removeEventListener("refreshPendingOrders",v),document.removeEventListener("resume",y),document.removeEventListener("visibilitychange",y)}}return()=>{a.current&&clearInterval(a.current),document.removeEventListener("visibilitychange",x),window.removeEventListener("refreshPendingOrders",v)}},[]),{pendingOrders:e,isModalOpen:n,acceptOrder:async f=>{try{const{apiRequest:p}=await ze(async()=>{const{apiRequest:v}=await Promise.resolve().then(()=>os);return{apiRequest:v}},void 0),{response:x}=await p(`/orders/${f}/accept/`,{method:"POST"});if(x.ok){const{simpleNotificationService:v}=await ze(async()=>{const{simpleNotificationService:y}=await Promise.resolve().then(()=>Wx);return{simpleNotificationService:y}},void 0);return v.clearNotification(f),i.current.delete(f),t(y=>y.filter(w=>w.id!==f)),e.length<=1&&r(!1),!0}}catch(p){console.error("Error accepting order:",p)}return!1},rejectOrder:async f=>{try{const{apiRequest:p}=await ze(async()=>{const{apiRequest:v}=await Promise.resolve().then(()=>os);return{apiRequest:v}},void 0),{response:x}=await p(`/orders/${f}/reject/`,{method:"POST",body:JSON.stringify({reason:"Rejected by vendor"})});if(x.ok){const{simpleNotificationService:v}=await ze(async()=>{const{simpleNotificationService:y}=await Promise.resolve().then(()=>Wx);return{simpleNotificationService:y}},void 0);return v.clearNotification(f),i.current.delete(f),t(y=>y.filter(w=>w.id!==f)),e.length<=1&&r(!1),!0}}catch(p){console.error("Error rejecting order:",p)}return!1},notifications:o,unreadCount:c,isConnected:d}}const d5=j.createContext(void 0);function Cne({children:e}){const{pendingOrders:t,isModalOpen:n,acceptOrder:r,rejectOrder:a}=kne(),[i,o]=j.useState(!1);j.useEffect(()=>{(async()=>{await Gl.requestPermissions(),console.log("Notification service initialized for platform:",Nt.isNativePlatform()?"mobile":"web")})()},[]),j.useEffect(()=>{o(n)},[n]),j.useEffect(()=>{t.length>0&&t.forEach(h=>{Gl.showOrderNotification(h.order_number,h.total_amount,h.id),Nt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([300,100,300])})},[t]),j.useEffect(()=>{const h=async m=>{console.log("Order modal event received:",m.detail);const u=m.detail;o(!0),(u!=null&&u.startBeeping||u!=null&&u.autoOpened||u!=null&&u.fromPush)&&(console.log(" Starting beeping for auto-opened notification"),await c()),Nt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([200,100,200])};return window.addEventListener("showOrderModal",h),()=>{window.removeEventListener("showOrderModal",h)}},[]);const c=async()=>{try{console.log(" Starting order notification beeping sequence..."),await Gl.playNotificationSound();let h=0;const m=10,u=setInterval(async()=>{h<m&&i?(await Gl.playNotificationSound(),Nt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([150,50,150]),h++,console.log(` Beep ${h}/${m}`)):(clearInterval(u),console.log(" Beeping sequence completed"))},2e3);window.orderBeepInterval=u}catch(h){console.error("Failed to start order beeping:",h)}};j.useEffect(()=>{Nt.isNativePlatform()&&document.addEventListener("visibilitychange",()=>{document.hidden||(console.log("Page visible - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))})},[]);const d=()=>{o(!1),window.orderBeepInterval&&(clearInterval(window.orderBeepInterval),window.orderBeepInterval=null,console.log(" Stopped beeping - modal closed"))};return s.jsxs(d5.Provider,{value:{pendingOrdersCount:t.length,isModalOpen:i,closeModal:d},children:[e,s.jsx(c5,{}),s.jsx(Sne,{isOpen:i,orders:t,onAccept:r,onReject:a})]})}function Pne(){const e=j.useContext(d5);return e===void 0?{pendingOrdersCount:0,isModalOpen:!1,closeModal:()=>{}}:e}function Ene({children:e,title:t,subtitle:n,headerActions:r}){return s.jsx(Cne,{children:s.jsx(wne,{children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 safe-area-inset max-w-full overflow-x-hidden",children:[s.jsx(c5,{}),s.jsx("div",{className:"pt-safe-top",children:s.jsx(Nne,{title:t,subtitle:n,headerActions:r})}),s.jsx("main",{className:"flex-1 pb-20 px-safe-x max-w-full overflow-x-hidden pt-14 sm:pt-16",children:e}),s.jsx(jne,{})]})})})}function Xt({children:e,title:t,subtitle:n,headerActions:r}){return s.jsx(Ene,{title:t,subtitle:n,headerActions:r,children:e})}const Tne=()=>{const[e,t]=j.useState({}),[n,r]=j.useState(!1);return j.useEffect(()=>{(async()=>{try{const i=await Se.getToken(),o=await Se.getUser(),c=await Se.isAuthenticated(),d=await Se.isSessionValid(),h=Nt.isNativePlatform();let m="Not checked",u=null;if(i&&(o==null?void 0:o.user_type)==="vendor")try{const{response:f,data:p}=await Re("/vendor-profiles/");m=`${f.status} - ${f.ok?"Success":"Failed"}`,f.ok||(u=(p==null?void 0:p.error)||f.statusText)}catch(f){m="Error",u=f.message}else i&&(o==null?void 0:o.user_type)!=="vendor"&&(m="Not a vendor user");t({isNative:h,platform:Nt.getPlatform(),token:i?`${i.substring(0,10)}...`:"None",user:o?{id:o.id,user_type:o.user_type,email:o.email}:"None",isAuthenticated:c,isSessionValid:d,vendorProfileStatus:m,vendorProfileError:u,timestamp:new Date().toISOString()})}catch(i){t({error:i.message,timestamp:new Date().toISOString()})}})()},[]),n?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-md w-full max-h-96 overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Vendor Debug Info"}),s.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),s.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(e,null,2)}),s.jsx("button",{onClick:()=>{var a;(a=navigator.clipboard)==null||a.writeText(JSON.stringify(e,null,2)),alert("Debug info copied to clipboard")},className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs w-full",children:"Copy to Clipboard"})]})}):s.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 right-4 bg-red-500 text-white px-3 py-1 rounded text-xs z-50",children:"Debug"})},ko=co("PushNotifications",{}),u5=Object.freeze(Object.defineProperty({__proto__:null,PushNotifications:ko},Symbol.toStringTag,{value:"Module"})),Ane=co("FCM",{web:()=>ze(()=>import("./web-CCj0-ZW1.js"),[]).then(e=>new e.FCMWeb)});class One{constructor(){us(this,"fcmToken",null)}async initialize(){if(!Nt.isNativePlatform()){console.log(" Not on native platform, skipping FCM initialization");return}try{console.log(" Initializing FCM Service..."),this.checkForAutoOpenOrder(),this.setupListeners(),console.log(" Requesting push notification permissions...");const t=await ko.requestPermissions();if(console.log(" Permission result:",t),t.receive!=="granted"){console.warn(" Push notification permission denied");return}console.log(" Registering for push notifications..."),await ko.register();try{await Ane.requestPermissions(),console.log(" FCM Community plugin initialized")}catch(n){console.warn(" FCM Community plugin not available:",n)}await this.getFCMToken(),console.log(" FCM Service initialized successfully")}catch(t){console.error(" FCM initialization failed:",t)}}checkForAutoOpenOrder(){try{const t=localStorage.getItem("autoOpenOrder");if(t){const n=JSON.parse(t);Date.now()-n.timestamp<3e4?(console.log(" AUTO-OPENING ORDER FROM NOTIFICATION:",n),localStorage.removeItem("autoOpenOrder"),this.startOrderBeeping(),setTimeout(()=>{this.showOrderModalImmediately(n)},1e3)):localStorage.removeItem("autoOpenOrder")}window.addEventListener("autoOpenedFromBackground",n=>{console.log(" APP AUTO-OPENED FROM BACKGROUND SERVICE:",n.detail),this.startOrderBeeping(),setTimeout(()=>{this.showOrderModalImmediately(n.detail)},500)})}catch(t){console.error("Error checking for auto-open order:",t)}}async getFCMToken(){try{return Nt.isNativePlatform()?new Promise(t=>{ko.addListener("registration",n=>{this.fcmToken=n.value,console.log(" FCM Token (Native):",n.value),this.sendTokenToBackend(),t(n.value)})}):null}catch(t){return console.error("Failed to get FCM token:",t),null}}setupListeners(){ko.addListener("pushNotificationReceived",t=>{var n,r,a;if(console.log(" Push notification received:",t),console.log(" Notification data:",t.data),((n=t.data)==null?void 0:n.autoOpen)==="true"||((r=t.data)==null?void 0:r.action)==="autoOpenOrder"){console.log(" AGGRESSIVE AUTO-OPENING APP FROM DATA MESSAGE!"),this.forceAppToForeground(),this.startOrderBeeping(),this.showOrderModalImmediately({orderId:parseInt(t.data.orderId),orderNumber:t.data.orderNumber,amount:t.data.amount,autoOpened:!0,fromPush:!0,startBeeping:!0,aggressive:!0}),this.triggerBackgroundAutoOpen(t.data);return}(a=t.data)!=null&&a.orderId?(console.log(` Showing order modal for order: ${t.data.orderId}`),this.startOrderBeeping(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(t.data.orderId),orderNumber:t.data.orderNumber,amount:t.data.amount,fromPush:!0,startBeeping:!0}}))):console.warn(" No orderId in notification data")}),ko.addListener("pushNotificationActionPerformed",t=>{var r,a,i,o,c;console.log(" NOTIFICATION TAPPED - AGGRESSIVE AUTO OPENING LIKE YANGO PRO:",t),console.log(" Notification data:",t.notification.data);const n=(r=t.notification.data)==null?void 0:r.orderId;n?(console.log(` AGGRESSIVE AUTO-OPENING FOR ORDER: ${n}`),this.startOrderBeeping(),localStorage.setItem("autoOpenOrder",JSON.stringify({orderId:parseInt(n),orderNumber:(a=t.notification.data)==null?void 0:a.orderNumber,amount:(i=t.notification.data)==null?void 0:i.amount,autoOpened:!0,fromPush:!0,startBeeping:!0,timestamp:Date.now()})),this.triggerAggressiveAutoOpen({orderId:parseInt(n),orderNumber:(o=t.notification.data)==null?void 0:o.orderNumber,amount:(c=t.notification.data)==null?void 0:c.amount})):(console.warn(" No orderId found in notification data"),this.triggerAggressiveAutoOpen({}))}),ko.addListener("registrationError",t=>{console.error(" Push registration error:",t)}),console.log(" FCM listeners set up successfully")}async sendTokenToBackend(){if(!this.fcmToken){console.warn("No FCM token available to send");return}try{await this.waitForAuth();const{apiRequest:t}=await ze(async()=>{const{apiRequest:r}=await Promise.resolve().then(()=>os);return{apiRequest:r}},void 0),{response:n}=await t("/api/register-fcm-token/",{method:"POST",body:JSON.stringify({fcm_token:this.fcmToken,platform:Nt.getPlatform()})});n.ok?console.log(" FCM token sent to backend successfully"):console.warn(" Failed to register FCM token:",n.status)}catch(t){console.warn(" Failed to send FCM token:",t),setTimeout(()=>this.sendTokenToBackend(),5e3)}}async waitForAuth(t=1e4){const n=Date.now();for(;Date.now()-n<t;){try{const{authService:r}=await ze(async()=>{const{authService:i}=await Promise.resolve().then(()=>Qi);return{authService:i}},void 0);if(r.getToken()){console.log(" Authentication ready for FCM token registration");return}}catch{}await new Promise(r=>setTimeout(r,500))}console.warn(" Authentication not ready, sending FCM token anyway")}showOrderModalImmediately(t){console.log(" SHOWING ORDER MODAL IMMEDIATELY:",t),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t}))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t}))},1500)}async forceAppToForeground(){try{console.log(" FORCING APP TO FOREGROUND..."),window.focus&&window.focus(),document.hidden&&document.dispatchEvent(new Event("visibilitychange")),Object.defineProperty(document,"hidden",{value:!1,writable:!1}),Object.defineProperty(document,"visibilityState",{value:"visible",writable:!1}),window.dispatchEvent(new Event("focus")),document.dispatchEvent(new Event("visibilitychange"))}catch(t){console.warn("Could not force app focus:",t)}}triggerBackgroundAutoOpen(t){try{if(Nt.isNativePlatform()){const n={action:"com.ezeyway.app.AUTO_OPEN_ORDER",extras:{orderId:t.orderId,orderNumber:t.orderNumber,amount:t.amount,autoOpened:!0}};console.log(" Triggering background auto-open:",n)}}catch(n){console.error("Failed to trigger background auto-open:",n)}}async triggerAggressiveAutoOpen(t){try{console.log(" TRIGGERING AGGRESSIVE AUTO-OPEN..."),this.forceAppToForeground(),window.location.replace("/vendor/home");for(let n=0;n<5;n++)setTimeout(()=>{this.showOrderModalImmediately({...t,autoOpened:!0,fromPush:!0,startBeeping:!0,aggressive:!0})},n*500)}catch(n){console.error("Failed to trigger aggressive auto-open:",n)}}async startOrderBeeping(){try{console.log(" Starting order notification beeping...");const{notificationService:t}=await ze(async()=>{const{notificationService:a}=await Promise.resolve().then(()=>oT);return{notificationService:a}},void 0);await t.playNotificationSound();try{const{Haptics:a,ImpactStyle:i}=await ze(async()=>{const{Haptics:d,ImpactStyle:h}=await import("./index-CKDabajI.js");return{Haptics:d,ImpactStyle:h}},[]);await a.impact({style:i.Heavy});let o=0;const c=setInterval(async()=>{o<5?(await a.impact({style:i.Medium}),o++):clearInterval(c)},2e3)}catch(a){console.warn("Haptics not available:",a)}let n=0;const r=setInterval(async()=>{n<5?(await t.playNotificationSound(),n++):clearInterval(r)},3e3)}catch(t){console.error("Failed to start order beeping:",t)}}getFCMTokenValue(){return this.fcmToken}async registerToken(){this.fcmToken?await this.sendTokenToBackend():console.warn("No FCM token available to register")}}const p0=new One,L2=()=>{var B,W,oe;const e=nt(),[t,n]=j.useState(!0),[r,a]=j.useState(!1),{pendingOrdersCount:i,isModalOpen:o}=Pne(),[c,d]=j.useState(null),[h,m]=j.useState(0),[u,f]=j.useState({totalOrders:0,totalRevenue:0,totalProducts:0,totalCustomers:0,monthlyEarnings:0,monthlyGrowth:0,todaysEarnings:0}),[p,x]=j.useState([]),[v,y]=j.useState([]),[w,b]=j.useState([]),[_,N]=j.useState([]),[k,E]=j.useState([0,0,0,0,0,0]),[T,R]=j.useState([]),[$,M]=j.useState(!0),[A,C]=j.useState(1),[z,P]=j.useState(!0),[O,Y]=j.useState(0),[J,G]=j.useState(0),F=T.length>0?[T[T.length-1],...T,T[0]]:[];j.useEffect(()=>{if(T.length>0){const X=setInterval(()=>{C(re=>re+1)},4e3);return()=>clearInterval(X)}},[T.length]),j.useEffect(()=>{T.length>0&&(A===F.length-1?setTimeout(()=>{P(!1),C(1),setTimeout(()=>P(!0),50)},500):A===0&&setTimeout(()=>{P(!1),C(T.length),setTimeout(()=>P(!0),50)},500))},[A,T.length]);const I=X=>{G(0),Y(X.targetTouches[0].clientX)},V=X=>{G(X.targetTouches[0].clientX)},H=()=>{if(!O||!J)return;const X=O-J,re=X>50,ue=X<-50;re&&A<T.length&&C(me=>me+1),ue&&A>1&&C(me=>me-1)};j.useEffect(()=>{a(!0),n(!1),Nt.isNativePlatform()&&p0.initialize().then(()=>{console.log(" FCM Service initialized on vendor home"),setTimeout(()=>{p0.registerToken()},2e3)}).catch(X=>{console.error(" FCM Service initialization failed:",X)}),U(),q()},[]);const U=async()=>{var X;try{const{apiRequest:re}=await ze(async()=>{const{apiRequest:de}=await Promise.resolve().then(()=>os);return{apiRequest:de}},void 0),{response:ue,data:me}=await re("/vendor-profiles/");ue.ok&&((X=me==null?void 0:me.results)!=null&&X[0])&&d(me.results[0]);const{response:we,data:be}=await re("vendor-wallet/");we.ok&&be&&m(parseFloat(be.balance)||0);const{response:ae,data:ee}=await re("/orders/");if(console.log("Orders response:",ae.ok,ee),ae.ok&&ee){const de=ee.results||ee||[];console.log("Orders found:",de.length,de);const Q=de.length,se=de.filter(Ie=>Ie.status==="delivered");console.log("Delivered orders:",se.length,se);const ne=se.reduce((Ie,ht)=>Ie+parseFloat(ht.total_amount||0),0),ve=new Date().toDateString(),pe=de.filter(Ie=>new Date(Ie.created_at).toDateString()===ve),ke=de.filter(Ie=>new Date(Ie.created_at).toDateString()===ve&&Ie.status==="delivered").reduce((Ie,ht)=>Ie+parseFloat(ht.total_amount||0),0);console.log("Today earnings:",ke,"Total revenue:",ne);const Be=new Date().getMonth(),qe=new Date().getFullYear(),ct=de.filter(Ie=>{const ht=new Date(Ie.created_at);return ht.getMonth()===Be&&ht.getFullYear()===qe&&Ie.status==="delivered"}).reduce((Ie,ht)=>Ie+parseFloat(ht.total_amount||0),0),Xe=[];for(let Ie=5;Ie>=0;Ie--){const ht=new Date;ht.setMonth(ht.getMonth()-Ie);const Os=de.filter(xn=>{const vn=new Date(xn.created_at);return vn.getMonth()===ht.getMonth()&&vn.getFullYear()===ht.getFullYear()&&xn.status==="delivered"}).reduce((xn,vn)=>xn+parseFloat(vn.total_amount||0),0);Xe.push(Os)}const ce=new Set;de.forEach(Ie=>{var ht;(ht=Ie.customer_details)!=null&&ht.id?ce.add(Ie.customer_details.id):Ie.delivery_phone&&ce.add(Ie.delivery_phone)});const Te=ce.size;f({totalOrders:Q,totalRevenue:ne,totalProducts:0,totalCustomers:Te,monthlyEarnings:ct,monthlyGrowth:15,todaysEarnings:ke}),E(Xe),x(pe.slice(0,5));const Ue={};se.forEach(Ie=>{var ht;(ht=Ie.items)==null||ht.forEach(gs=>{var xn,vn;const Os=((xn=gs.product_details)==null?void 0:xn.id)||gs.product_name;Ue[Os]||(Ue[Os]={id:Os,name:gs.product_name,price:gs.unit_price,sold:0,rating:4.5,images:((vn=gs.product_details)==null?void 0:vn.images)||[]}),Ue[Os].sold+=parseInt(gs.quantity)||0})});const mt=Object.values(Ue).sort((Ie,ht)=>ht.sold-Ie.sold).slice(0,6);y(mt)}const{response:ye,data:le}=await re("products/");if(ye.ok&&le){const de=le.results||le||[];N(de.slice(0,6)),f(se=>({...se,totalProducts:de.length}));const Q=de.filter(se=>se.featured).slice(0,6);b(Q)}}catch(re){console.warn("Dashboard data fetch error:",re)}},q=async()=>{try{const{apiRequest:X}=await ze(async()=>{const{apiRequest:me}=await Promise.resolve().then(()=>os);return{apiRequest:me}},void 0),{response:re,data:ue}=await X("sliders/?user_type=vendor");if(console.log(" VendorHome API Response:",ue),re.ok&&ue&&ue.sliders){const me=ue.sliders.filter(we=>{const be=we.visibility||"both",ae=be==="vendor"||be==="both";return console.log(` VendorHome Slider "${we.title}": visibility="${be}", shouldShow=${ae}`),ae});console.log(` VendorHome: BEFORE filtering: ${ue.sliders.length} sliders`),console.log(` VendorHome: AFTER filtering: ${me.length} sliders`),R(me),me.length>0&&C(1)}}catch(X){console.warn("Sliders fetch error:",X)}finally{M(!1)}},K=X=>{switch(X){case"pending":return{icon:gb,color:"red",bgColor:"red-50",textColor:"red-600",label:"Action Required"};case"confirmed":case"preparing":return{icon:Wr,color:"orange",bgColor:"orange-50",textColor:"orange-600",label:"Processing"};case"delivered":return{icon:oh,color:"green",bgColor:"green-50",textColor:"green-600",label:"Completed"};default:return{icon:Wr,color:"blue",bgColor:"blue-50",textColor:"blue-600",label:"In Progress"}}};return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx($s,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Verifying your account..."})]})}):r?s.jsxs(s.Fragment,{children:[s.jsx(Tne,{}),o&&s.jsx("div",{className:"fixed inset-0 bg-black/20 z-[9998] pointer-events-none"}),s.jsx(Xt,{title:"Dashboard",children:s.jsxs("div",{className:`space-y-4 pb-16 max-w-full overflow-x-hidden ${o?"pointer-events-none":""}`,children:[s.jsxs("div",{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ci,{className:"h-10 w-10",children:[s.jsx(Ur,{src:(B=c==null?void 0:c.user_info)==null?void 0:B.profile_picture}),s.jsx(di,{className:"bg-[#A98D7E] text-white",children:((W=c==null?void 0:c.business_name)==null?void 0:W[0])||((oe=c==null?void 0:c.owner_name)==null?void 0:oe[0])||"V"})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:(c==null?void 0:c.business_name)||"My Store"}),s.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[s.jsx(hm,{className:"h-3 w-3"})," Rs",(h||0).toFixed(2)," Available"]})]})]}),s.jsxs(ie,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto flex items-center gap-1",onClick:()=>e("/vendor/wallet"),children:[s.jsx(hm,{className:"h-3 w-3"}),"Wallet"]})]}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"grid grid-cols-4 gap-1 sm:gap-2",children:[s.jsx(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=orders"),children:s.jsx(Oe,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(Mt,{className:"h-2.5 w-2.5 text-teal-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Orders"}),s.jsx("p",{className:"text-xs font-bold text-gray-900",children:u.totalOrders})]})})}),s.jsx(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=revenue"),children:s.jsx(Oe,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(Yr,{className:"h-2.5 w-2.5 text-blue-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Revenue"}),s.jsxs("p",{className:"text-xs font-bold text-gray-900",children:["Rs",u.totalRevenue.toFixed(0)]})]})})}),s.jsx(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=products"),children:s.jsx(Oe,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(Nn,{className:"h-2.5 w-2.5 text-purple-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Products"}),s.jsx("p",{className:"text-xs font-bold text-gray-900",children:u.totalProducts})]})})}),s.jsx(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=customers"),children:s.jsx(Oe,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(xp,{className:"h-2.5 w-2.5 text-orange-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Customers"}),s.jsx("p",{className:"text-xs font-bold text-gray-900",children:u.totalCustomers})]})})})]})}),s.jsx("div",{className:"mb-6",children:$?s.jsx("div",{className:"relative overflow-hidden rounded-2xl shadow-lg h-48 bg-gray-100 flex items-center justify-center mx-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[s.jsx($s,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Loading banners..."})]})}):T.length>0?s.jsxs("div",{className:"relative md:overflow-visible overflow-hidden md:px-8 mx-4 md:mx-0",children:[s.jsx("div",{className:`flex ${z?"transition-transform duration-500 ease-in-out":""}`,style:{transform:typeof window<"u"&&window.innerWidth<768?`translateX(calc(-${A*100}% + 100%))`:`translateX(calc(-${A*50}% + 25%))`},onTouchStart:I,onTouchMove:V,onTouchEnd:H,children:F.map((X,re)=>{const ue=typeof window<"u"&&window.innerWidth<768,me=!ue&&re===A;return s.jsx("div",{className:`flex-shrink-0 relative cursor-pointer transition-all duration-300 ${ue?"w-full rounded-2xl shadow-lg overflow-hidden":`${me?"scale-100 opacity-100 z-10":"scale-75 opacity-60 z-0"} rounded-lg overflow-hidden`}`,style:ue?{}:{width:"50%"},onClick:()=>{X.link_url&&window.open(X.link_url,"_blank")},children:s.jsx("div",{className:"relative h-48",children:X.image_url?s.jsx("img",{src:X.image_url,alt:X.title,className:"w-full h-full object-cover md:object-contain",onError:we=>{we.target.style.display="none",we.target.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}):s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/80 to-purple-600/80 flex items-center justify-center",children:s.jsx("h3",{className:"text-white text-lg font-bold text-center px-4",children:X.title})})})},`${X.id}-${re}`)})}),T.length>1&&s.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-1",children:T.map((X,re)=>s.jsx("button",{onClick:()=>C(re+1),className:`w-2 h-2 rounded-full transition-colors ${re===(A-1+T.length)%T.length?"bg-blue-500":"bg-gray-300"}`},re))})]}):s.jsx("div",{className:"h-48 bg-gray-100 rounded-2xl shadow-lg flex items-center justify-center mx-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx(Mt,{className:"h-6 w-6 text-gray-400"})}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No promotional banners available"})]})})}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Earnings"}),s.jsxs(ie,{variant:"outline",className:"text-gray-700 text-sm px-3 py-2 h-auto flex items-center gap-2",onClick:()=>e("/vendor/sales"),children:[s.jsx(Yr,{className:"h-4 w-4"}),"View Transactions",s.jsx(RP,{className:"h-4 w-4"})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Today's Earnings"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rs",(u.todaysEarnings||0).toFixed(2)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Earnings"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["Rs",(u.totalRevenue||0).toFixed(2)]})]})]}),s.jsx(Ee,{children:s.jsx(Oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Earning in ",new Date().toLocaleDateString("en-US",{month:"long"})]}),s.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["Rs",u.monthlyEarnings.toFixed(2)," ",s.jsxs("span",{className:"text-green-600",children:["+",u.monthlyGrowth,"%"]})]})]}),s.jsx("div",{className:"flex items-end gap-1 h-8",children:k.map((X,re)=>{const ue=Math.max(...k,1),me=X>0?Math.max(4,X/ue*24):2,we=re===k.length-1;return s.jsx("div",{className:`w-2 rounded-t ${we?"bg-green-500":X>0?"bg-blue-400":"bg-gray-200"}`,style:{height:`${me}px`}},re)})})]})})})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Orders"}),s.jsx(ie,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",onClick:()=>e("/vendor/orders"),children:"View All"})]}),s.jsx("div",{className:`space-y-3 ${p.length>7?"max-h-96 overflow-y-auto":""}`,children:p.length===0?s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-6 text-center",children:[s.jsx(Mt,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No orders today"})]})}):p.map(X=>{var be;const re=K(X.status),ue=re.icon,me=X.created_at?new Date(X.created_at):new Date,we=Math.floor((Date.now()-me.getTime())/(1e3*60));return s.jsx(Ee,{className:`border-l-4 border-l-${re.color}-500 cursor-pointer hover:shadow-md transition-shadow`,onClick:()=>e(`/vendor/orders?tab=${X.status}&orderId=${X.id}`),children:s.jsxs(Oe,{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ue,{className:`h-4 w-4 text-${re.color}-500`}),s.jsx("span",{className:`text-xs font-medium text-${re.textColor} bg-${re.bgColor} px-2 py-1 rounded-full`,children:re.label})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["#",X.order_number]})]}),s.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:X.status==="pending"?"New order received":X.status==="delivered"?"Order delivered successfully":"Order in progress"}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(X.total_amount||0).toFixed(2),"  ",((be=X.items)==null?void 0:be.length)||0," items  ",we<60?`${we} min ago`:`${Math.floor(we/60)} hours ago`]})]})},X.id)})})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Best Selling Products"}),s.jsx(ie,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",children:"View All"})]}),s.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-3 overflow-x-auto md:overflow-visible",children:s.jsx("div",{className:"flex gap-3 pb-2 md:contents",children:v.map(X=>{var re,ue;return s.jsx(Ee,{className:"w-32 flex-shrink-0 md:w-auto md:flex-shrink",children:s.jsx(Oe,{className:"md:p-2 p-3",children:s.jsxs("div",{className:"md:space-y-1 space-y-2",children:[s.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:((ue=(re=X.images)==null?void 0:re[0])==null?void 0:ue.image_url)||"/api/placeholder/80/80",alt:X.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:X.name}),s.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(X.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between md:text-[10px] text-xs",children:[s.jsxs("span",{className:"text-green-600 font-medium",children:[X.sold," sold"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(js,{className:"md:h-2 md:w-2 h-3 w-3 text-yellow-400 fill-current"}),s.jsx("span",{className:"text-gray-600",children:X.rating})]})]}),s.jsxs("div",{className:"md:text-[10px] text-xs text-gray-500",children:["Stock: ",X.quantity]})]})})},X.id)})})})]}),w.length>0&&s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Featured Products"}),s.jsx(ie,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",children:"View All"})]}),s.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-3 overflow-x-auto md:overflow-visible",children:s.jsx("div",{className:"flex gap-3 pb-2 md:contents",children:w.map(X=>{var re,ue;return s.jsx(Ee,{className:"w-32 flex-shrink-0 relative md:w-auto md:flex-shrink",children:s.jsx(Oe,{className:"md:p-2 p-3",children:s.jsxs("div",{className:"md:space-y-1 space-y-2",children:[s.jsxs("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden relative",children:[s.jsx("img",{src:((ue=(re=X.images)==null?void 0:re[0])==null?void 0:ue.image_url)||"/api/placeholder/80/80",alt:X.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white md:text-[10px] text-xs px-1 py-0.5 rounded-full font-bold shadow-md",children:""})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:X.name}),s.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(X.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between md:text-[10px] text-xs",children:[s.jsxs("span",{className:"text-blue-600 font-medium",children:[X.total_sold||0," sold"]}),s.jsx("span",{className:`px-1 py-0.5 rounded md:text-[10px] text-xs ${X.quantity>10?"bg-green-100 text-green-700":X.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:X.quantity>10?"In Stock":X.quantity>0?"Low":"Out"})]})]})})},X.id)})})})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Products"}),s.jsxs(ie,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto flex items-center gap-1",onClick:()=>e("/vendor/products"),children:[s.jsx(Ps,{className:"h-3 w-3"}),"Manage"]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-w-full",children:_.map(X=>{var re,ue;return s.jsx(Ee,{className:"overflow-hidden",children:s.jsx(Oe,{className:"md:p-2 p-3",children:s.jsxs("div",{className:"md:space-y-1 space-y-2",children:[s.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded overflow-hidden",children:s.jsx("img",{src:((ue=(re=X.images)==null?void 0:re[0])==null?void 0:ue.image_url)||"/api/placeholder/60/60",alt:X.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:X.name}),s.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(X.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"md:text-[10px] text-xs text-gray-500",children:["Stock: ",X.quantity]}),s.jsx("span",{className:`md:text-[10px] text-xs px-2 py-1 rounded-full ${X.quantity>10?"bg-green-100 text-green-700":X.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:X.quantity>10?"Active":X.quantity>0?"Low Stock":"Out of Stock"})]})]})})},X.id)})})]})]})})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Wr,{className:"h-8 w-8 text-yellow-600"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Account Under Review"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Your vendor application is being reviewed by our team. You'll receive an email notification once approved."}),s.jsx(ie,{onClick:()=>e("/vendor/onboarding"),variant:"outline",className:"w-full",children:"Back to Application"})]})})},h5=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:Ye("w-full caption-bottom text-sm",e),...t})}));h5.displayName="Table";const f5=j.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:Ye("[&_tr]:border-b",e),...t}));f5.displayName="TableHeader";const m5=j.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:Ye("[&_tr:last-child]:border-0",e),...t}));m5.displayName="TableBody";const Rne=j.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:Ye("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Rne.displayName="TableFooter";const g0=j.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:Ye("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));g0.displayName="TableRow";const Wa=j.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:Ye("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Wa.displayName="TableHead";const Za=j.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:Ye("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Za.displayName="TableCell";const Lne=j.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:Ye("mt-4 text-sm text-muted-foreground",e),...t}));Lne.displayName="TableCaption";const zd=[{id:"ORD-001",customer:"John Doe",product:"Wireless Headphones",quantity:2,amount:"4,998",status:"Pending",date:"2024-01-15",address:"123 Main St, City"},{id:"ORD-002",customer:"Jane Smith",product:"Smart Watch",quantity:1,amount:"12,999",status:"Processing",date:"2024-01-14",address:"456 Oak Ave, City"},{id:"ORD-003",customer:"Mike Johnson",product:"Laptop Stand",quantity:3,amount:"2,997",status:"Shipped",date:"2024-01-13",address:"789 Pine Rd, City"},{id:"ORD-004",customer:"Sarah Wilson",product:"Bluetooth Speaker",quantity:1,amount:"3,499",status:"Delivered",date:"2024-01-12",address:"321 Elm St, City"}],M2={Pending:"bg-yellow-100 text-yellow-800",Processing:"bg-blue-100 text-blue-800",Shipped:"bg-purple-100 text-purple-800",Delivered:"bg-green-100 text-green-800"};function Mne(){const e=nt(),[t,n]=j.useState(""),[r,a]=j.useState("all"),[i,o]=j.useState(!1),[c,d]=j.useState("Tools"),h=zd.filter(m=>{const u=m.customer.toLowerCase().includes(t.toLowerCase())||m.product.toLowerCase().includes(t.toLowerCase())||m.id.toLowerCase().includes(t.toLowerCase()),f=r==="all"||m.status.toLowerCase()===r.toLowerCase();return u&&f});return s.jsx(Xt,{title:"Tools",children:s.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 pt-1 pb-16",children:[s.jsx("div",{className:"bg-white p-4 border-b mb-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:s.jsx(Es,{className:"h-6 w-6 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Business Tools"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage your products, orders, and business operations"})]})]}),s.jsxs(lc,{open:i,onOpenChange:o,children:[s.jsx(x4,{asChild:!0,children:s.jsxs(ie,{size:"sm",children:[s.jsx(Es,{className:"mr-2 h-4 w-4"})," Create Order"]})}),s.jsxs(Wo,{className:"sm:max-w-[500px] rounded-lg",children:[s.jsxs(Zo,{children:[s.jsx(Go,{className:"text-lg font-semibold",children:"Create New Order"}),s.jsx(y4,{className:"text-sm text-gray-600",children:"Fill in the details below to create a new order for your customer."})]}),s.jsxs("div",{className:"grid gap-3 py-3",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"customer",className:"text-sm font-medium",children:"Customer Name"}),s.jsx(je,{id:"customer",placeholder:"Enter customer name",className:"h-9"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"product",className:"text-sm font-medium",children:"Product"}),s.jsxs(qt,{children:[s.jsx(Bt,{className:"h-9",children:s.jsx(Ht,{placeholder:"Select product"})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"headphones",children:"Wireless Headphones"}),s.jsx(We,{value:"watch",children:"Smart Watch"}),s.jsx(We,{value:"stand",children:"Laptop Stand"}),s.jsx(We,{value:"speaker",children:"Bluetooth Speaker"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"quantity",className:"text-sm font-medium",children:"Quantity"}),s.jsx(je,{id:"quantity",type:"number",placeholder:"1",className:"h-9"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"amount",className:"text-sm font-medium",children:"Amount"}),s.jsx(je,{id:"amount",placeholder:"0.00",className:"h-9"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"address",className:"text-sm font-medium",children:"Delivery Address"}),s.jsx(Ws,{id:"address",placeholder:"Enter delivery address",className:"h-20"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"notes",className:"text-sm font-medium",children:"Notes"}),s.jsx(Ws,{id:"notes",placeholder:"Any special instructions...",className:"h-16"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>o(!1),children:"Cancel"}),s.jsx(ie,{size:"sm",onClick:()=>o(!1),children:"Create Order"})]})]})]})]})}),s.jsxs(Ee,{className:"mb-4 border border-gray-200",children:[s.jsx(St,{className:"bg-gray-50 border-b border-gray-200 p-3",children:s.jsxs(Pt,{className:"flex items-center gap-2 text-base",children:[s.jsx("div",{className:"p-1.5 bg-white rounded-md shadow-sm",children:s.jsx(Es,{className:"h-4 w-4 text-gray-700"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-900 font-bold text-sm",children:"Business Functions"}),s.jsx("p",{className:"text-xs text-gray-600 font-normal mt-0.5",children:"Manage your core business operations"})]})]})}),s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-2",children:[s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/add-products"),children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Add Products"}),s.jsx(Fe,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full text-[10px]",children:"New"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/products"),children:[s.jsx("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-green-200 group-hover:to-green-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Products"}),s.jsx(Fe,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full text-[10px]",children:"New"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/orders"),children:[s.jsx("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-purple-200 group-hover:to-purple-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Orders"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/return-orders"),children:[s.jsx("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-orange-200 group-hover:to-orange-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Return Order"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/reviews"),children:[s.jsx("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-yellow-200 group-hover:to-yellow-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Manage Reviews"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/income"),children:[s.jsx("div",{className:"bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-emerald-200 group-hover:to-emerald-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"My Income"})]})]})})]}),s.jsxs(Ee,{className:"mb-4 rounded-lg border border-gray-200",children:[s.jsx(St,{className:"bg-gray-50 p-3 border-b border-gray-200",children:s.jsx(Pt,{className:"text-base font-semibold text-gray-900",children:"Business Upgrading"})}),s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-lg p-2 flex-shrink-0",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-gray-700 font-medium",children:"Business Advisor"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Get expert guidance"})]}),s.jsx(Fe,{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"New"})]})})]}),s.jsx(Ee,{className:"mb-4 rounded-lg border border-gray-200",children:s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Vo,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),s.jsx(je,{placeholder:"Search orders...",value:t,onChange:m=>n(m.target.value),className:"pl-8 h-9 text-sm"})]})}),s.jsxs(qt,{value:r,onValueChange:a,children:[s.jsxs(Bt,{className:"w-full sm:w-[160px] h-9 text-sm",children:[s.jsx(La,{className:"mr-2 h-3 w-3"}),s.jsx(Ht,{placeholder:"Filter by status"})]}),s.jsxs(Vt,{children:[s.jsx(We,{value:"all",children:"All Status"}),s.jsx(We,{value:"pending",children:"Pending"}),s.jsx(We,{value:"processing",children:"Processing"}),s.jsx(We,{value:"shipped",children:"Shipped"}),s.jsx(We,{value:"delivered",children:"Delivered"})]})]})]})})}),s.jsxs(Ee,{className:"hidden md:block mb-4 rounded-lg border border-gray-200",children:[s.jsx(St,{className:"p-4",children:s.jsx(Pt,{className:"text-base font-semibold",children:"Recent Orders"})}),s.jsx(Oe,{className:"p-4",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(h5,{children:[s.jsx(f5,{children:s.jsxs(g0,{children:[s.jsx(Wa,{className:"text-xs",children:"Order ID"}),s.jsx(Wa,{className:"text-xs",children:"Customer"}),s.jsx(Wa,{className:"text-xs",children:"Product"}),s.jsx(Wa,{className:"text-xs",children:"Qty"}),s.jsx(Wa,{className:"text-xs",children:"Amount"}),s.jsx(Wa,{className:"text-xs",children:"Status"}),s.jsx(Wa,{className:"text-xs",children:"Date"}),s.jsx(Wa,{className:"text-right text-xs",children:"Actions"})]})}),s.jsx(m5,{children:h.slice(0,3).map(m=>s.jsxs(g0,{className:"h-12",children:[s.jsx(Za,{className:"text-sm font-medium",children:m.id}),s.jsx(Za,{className:"text-sm",children:m.customer}),s.jsx(Za,{className:"text-sm",children:m.product}),s.jsx(Za,{className:"text-sm",children:m.quantity}),s.jsx(Za,{className:"text-sm",children:m.amount}),s.jsx(Za,{children:s.jsx(Fe,{className:`${M2[m.status]} text-xs px-2 py-1`,children:m.status})}),s.jsx(Za,{className:"text-sm",children:m.date}),s.jsx(Za,{className:"text-right",children:s.jsxs(Tc,{children:[s.jsx(Ac,{asChild:!0,children:s.jsx(ie,{variant:"ghost",className:"h-6 w-6 p-0",children:s.jsx(jN,{className:"h-3 w-3"})})}),s.jsxs(nl,{align:"end",children:[s.jsxs(_o,{className:"text-xs",children:[s.jsx(um,{className:"mr-2 h-3 w-3"})," Edit"]}),s.jsx(_o,{className:"text-xs",children:"View Details"}),s.jsxs(_o,{className:"text-red-600 text-xs",children:[s.jsx(Yi,{className:"mr-2 h-3 w-3"})," Delete"]})]})]})})]},m.id))})]})})})]}),s.jsxs("div",{className:"md:hidden space-y-3",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Recent Orders"}),h.slice(0,2).map(m=>s.jsxs(Ee,{className:"p-3 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:m.id}),s.jsx("p",{className:"text-xs text-gray-600",children:m.customer})]}),s.jsx(Fe,{className:`${M2[m.status]} text-xs px-2 py-1`,children:m.status})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Product:"}),s.jsx("span",{className:"font-medium",children:m.product})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Qty:"}),s.jsx("span",{className:"font-medium",children:m.quantity})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Amount:"}),s.jsx("span",{className:"font-semibold text-orange-600",children:m.amount})]})]}),s.jsx("div",{className:"flex justify-end mt-3",children:s.jsxs(Tc,{children:[s.jsx(Ac,{asChild:!0,children:s.jsxs(ie,{variant:"outline",size:"sm",className:"h-7 text-xs border-gray-300",children:[s.jsx(jN,{className:"h-3 w-3 mr-1"})," Actions"]})}),s.jsxs(nl,{align:"end",children:[s.jsxs(_o,{className:"text-xs",children:[s.jsx(um,{className:"mr-2 h-3 w-3"})," Edit"]}),s.jsx(_o,{className:"text-xs",children:"View Details"}),s.jsxs(_o,{className:"text-red-600 text-xs",children:[s.jsx(Yi,{className:"mr-2 h-3 w-3"})," Delete"]})]})]})})]},m.id))]}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-4 mb-4",children:[s.jsxs(Ee,{className:"rounded-lg border border-gray-200",children:[s.jsx(St,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Pt,{className:"text-xs font-medium text-gray-900",children:"Total Orders"})}),s.jsxs(Oe,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:zd.length}),s.jsx("p",{className:"text-xs text-gray-600",children:"+2 from yesterday"})]})]}),s.jsxs(Ee,{className:"rounded-lg border border-gray-200",children:[s.jsx(St,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Pt,{className:"text-xs font-medium text-gray-900",children:"Pending"})}),s.jsxs(Oe,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:zd.filter(m=>m.status==="Pending").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Requires attention"})]})]}),s.jsxs(Ee,{className:"rounded-lg border border-gray-200",children:[s.jsx(St,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Pt,{className:"text-xs font-medium text-gray-900",children:"Processing"})}),s.jsxs(Oe,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:zd.filter(m=>m.status==="Processing").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"In progress"})]})]}),s.jsxs(Ee,{className:"rounded-lg border border-gray-200",children:[s.jsx(St,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Pt,{className:"text-xs font-medium text-gray-900",children:"Completed"})}),s.jsxs(Oe,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:zd.filter(m=>m.status==="Delivered").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Successfully delivered"})]})]})]}),s.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 md:hidden flex justify-around items-center p-3 shadow-md",children:[s.jsxs("button",{onClick:()=>d("Home"),className:`flex flex-col items-center text-gray-500 ${c==="Home"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),s.jsxs("button",{onClick:()=>d("Tools"),className:`flex flex-col items-center text-gray-500 ${c==="Tools"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Tools"})]}),s.jsxs("button",{onClick:()=>d("Messages"),className:`flex flex-col items-center text-gray-500 ${c==="Messages"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Messages"})]}),s.jsxs("button",{onClick:()=>d("Me"),className:`flex flex-col items-center text-gray-500 ${c==="Me"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Me"})]})]})]})})}const Ine=()=>{const[e,t]=j.useState([]),[n,r]=j.useState(!0),[a,i]=j.useState("all"),[o,c]=j.useState(!1),[d,h]=j.useState(""),[m,u]=j.useState(""),[f,p]=j.useState(1),[x,v]=j.useState(1),[y,w]=j.useState(0),b=20,[_,N]=j.useState({totalSales:0,totalRefunds:0,netEarnings:0,todaySales:0,monthSales:0});j.useEffect(()=>{E()},[d,m,f]);const k=O=>{p(O)},E=async()=>{try{r(!0);const O=new URLSearchParams({page:f.toString(),page_size:b.toString()});d&&O.append("date_from",d),m&&O.append("date_to",m);const{response:Y,data:J}=await Re(`/vendor/orders/?${O}`);if(Y.ok&&J){const G=J.results||J||[];v(Math.ceil((J.count||G.length)/b)),w(J.count||G.length);const F=[];G.forEach(X=>{var re,ue,me;X.status==="delivered"&&F.push({id:X.id,order_number:X.order_number,customer_name:((re=X.customer_details)==null?void 0:re.username)||X.delivery_name,amount:parseFloat(X.total_amount),type:"sale",status:"completed",created_at:X.created_at,items_count:((ue=X.items)==null?void 0:ue.length)||0}),((me=X.refunds)==null?void 0:me.length)>0&&X.refunds.forEach(we=>{var be,ae;we.status==="completed"&&F.push({id:`refund-${we.id}`,order_number:X.order_number,customer_name:((be=X.customer_details)==null?void 0:be.username)||X.delivery_name,amount:-parseFloat(we.approved_amount||we.requested_amount),type:"refund",status:"completed",created_at:we.completed_at||we.created_at,items_count:((ae=X.items)==null?void 0:ae.length)||0})})}),F.sort((X,re)=>new Date(re.created_at).getTime()-new Date(X.created_at).getTime());let I=F;if(d&&m){const X=new Date(d),re=new Date(m);re.setHours(23,59,59,999),I=F.filter(ue=>{const me=new Date(ue.created_at);return me>=X&&me<=re})}t(I);const V=F.filter(X=>X.type==="sale").reduce((X,re)=>X+re.amount,0),H=Math.abs(F.filter(X=>X.type==="refund").reduce((X,re)=>X+re.amount,0)),U=V-H,q=new Date().toDateString(),K=F.filter(X=>new Date(X.created_at).toDateString()===q&&X.type==="sale").reduce((X,re)=>X+re.amount,0),B=new Date().getMonth(),W=new Date().getFullYear(),oe=F.filter(X=>{const re=new Date(X.created_at);return re.getMonth()===B&&re.getFullYear()===W&&X.type==="sale"}).reduce((X,re)=>X+re.amount,0);N({totalSales:V,totalRefunds:H,netEarnings:U,todaySales:K,monthSales:oe})}}catch(O){console.error("Error fetching sales data:",O)}finally{r(!1)}},T=O=>O==="all"?e:O==="sales"?e.filter(Y=>Y.type==="sale"):O==="refunds"?e.filter(Y=>Y.type==="refund"):e,R=()=>{const O=[["Date","Time","Type","Order Number","Customer","Amount","Status","Items"].join(","),...e.map(F=>[z(F.created_at),P(F.created_at),F.type,F.order_number,`"${F.customer_name}"`,Math.abs(F.amount).toFixed(2),F.status,F.items_count].join(","))].join(`
`),Y=new Blob([O],{type:"text/csv"}),J=window.URL.createObjectURL(Y),G=document.createElement("a");G.href=J,G.download=`sales-report-${d||"all"}-${m||new Date().toISOString().split("T")[0]}.csv`,G.click(),window.URL.revokeObjectURL(J)},$=()=>{const O=new Date().toLocaleDateString(),Y=d&&m?`${d} to ${m}`:"All Time",J=`
===========================================
           SALES & EARNINGS REPORT
===========================================
Generated: ${O}
Period: ${Y}

SUMMARY
-------------------------------------------
Total Sales: Rs${_.totalSales.toFixed(2)}
Total Refunds: Rs${_.totalRefunds.toFixed(2)}
Net Earnings: Rs${_.netEarnings.toFixed(2)}
Today's Sales: Rs${_.todaySales.toFixed(2)}
This Month: Rs${_.monthSales.toFixed(2)}

TRANSACTIONS (${e.length} records)
-------------------------------------------
${e.map(F=>`${z(F.created_at)} ${P(F.created_at)} | ${F.type.toUpperCase().padEnd(6)} | ${F.order_number.padEnd(12)} | Rs${Math.abs(F.amount).toFixed(2).padStart(8)} | ${F.customer_name}`).join(`
`)}

===========================================
    `,G=window.open("","_blank");G==null||G.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${J}</pre>`),G==null||G.print()},M=()=>{const O=`Sales Report

Total Sales: Rs${_.totalSales.toFixed(2)}
Total Refunds: Rs${_.totalRefunds.toFixed(2)}
Net Earnings: Rs${_.netEarnings.toFixed(2)}

Transactions: ${e.length}`;if(navigator.share)navigator.share({title:"Sales Report",text:O});else{const Y=`https://wa.me/?text=${encodeURIComponent(O)}`;window.open(Y,"_blank")}},A=()=>{p(1),E(),c(!1)},C=()=>{h(""),u(""),p(1),E(),c(!1)},z=O=>new Date(O).toLocaleDateString(),P=O=>new Date(O).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return s.jsx(Xt,{title:"Sales & Earnings",children:s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(Ee,{children:s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Yr,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Total Sales"}),s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",_.totalSales.toFixed(2)]})]})]})})}),s.jsx(Ee,{children:s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(BP,{className:"h-4 w-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Total Refunds"}),s.jsxs("p",{className:"text-sm font-bold text-red-600",children:["Rs",_.totalRefunds.toFixed(2)]})]})]})})})]}),s.jsx(Ee,{children:s.jsx(Oe,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Net Earnings"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rs",_.netEarnings.toFixed(2)]}),s.jsxs("div",{className:"flex justify-between mt-3 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Today"}),s.jsxs("p",{className:"font-semibold",children:["Rs",_.todaySales.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"This Month"}),s.jsxs("p",{className:"font-semibold",children:["Rs",_.monthSales.toFixed(2)]})]})]})]})})})]}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sales Transactions"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ie,{variant:"outline",size:"sm",onClick:$,children:s.jsx(wb,{className:"h-4 w-4"})}),s.jsx(ie,{variant:"outline",size:"sm",onClick:R,children:s.jsx(tc,{className:"h-4 w-4"})}),s.jsx(ie,{variant:"outline",size:"sm",onClick:M,children:s.jsx(tl,{className:"h-4 w-4"})}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>c(!0),children:s.jsx(La,{className:"h-4 w-4"})}),s.jsx(ie,{variant:"outline",size:"sm",onClick:E,children:s.jsx(Aa,{className:"h-4 w-4"})})]})]}),s.jsxs(Ia,{value:a,onValueChange:i,className:"w-full",children:[s.jsx("div",{className:"border-b border-gray-100 overflow-x-auto",children:s.jsxs(Qr,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[s.jsxs(Ot,{value:"all",className:"text-xs py-2 px-3",children:["All (",e.length,")"]}),s.jsxs(Ot,{value:"sales",className:"text-xs py-2 px-3",children:["Sales (",e.filter(O=>O.type==="sale").length,")"]}),s.jsxs(Ot,{value:"refunds",className:"text-xs py-2 px-3",children:["Refunds (",e.filter(O=>O.type==="refund").length,")"]})]})}),s.jsx(xt,{value:"all",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:n?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Aa,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading transactions..."})]}):T("all").length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Mt,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No transactions found"})]}):T("all").map(O=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${O.type==="sale"?"bg-green-100":"bg-red-100"}`,children:O.type==="sale"?s.jsx(Ou,{className:"h-5 w-5 text-green-600"}):s.jsx(Ru,{className:"h-5 w-5 text-red-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[O.type==="sale"?"Sale":"Refund"," - ",O.order_number]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[O.customer_name,"  ",O.items_count," items"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[z(O.created_at)," at ",P(O.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:`text-sm font-bold ${O.type==="sale"?"text-green-600":"text-red-600"}`,children:[O.type==="sale"?"+":"","Rs",Math.abs(O.amount).toFixed(2)]}),s.jsx(Fe,{variant:"default",className:"text-xs",children:O.status})]})]})},O.id))})}),s.jsx(xt,{value:"sales",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:T("sales").map(O=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ou,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Sale - ",O.order_number]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[O.customer_name,"  ",O.items_count," items"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[z(O.created_at)," at ",P(O.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+Rs",O.amount.toFixed(2)]}),s.jsx(Fe,{variant:"default",className:"text-xs",children:"completed"})]})]})},O.id))})}),s.jsx(xt,{value:"refunds",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:T("refunds").map(O=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(Ru,{className:"h-5 w-5 text-red-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Refund - ",O.order_number]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[O.customer_name,"  ",O.items_count," items"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[z(O.created_at)," at ",P(O.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-red-600",children:["Rs",Math.abs(O.amount).toFixed(2)]}),s.jsx(Fe,{variant:"secondary",className:"text-xs",children:"refunded"})]})]})},O.id))})})]})]})}),x>1&&s.jsx("div",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(f-1)*b+1," to ",Math.min(f*b,y)," of ",y," transactions"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>k(f-1),disabled:f===1,children:"Previous"}),s.jsxs("span",{className:"text-sm font-medium",children:[f," of ",x]}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>k(f+1),disabled:f===x,children:"Next"})]})]})}),s.jsx(Vn,{open:o,onOpenChange:c,children:s.jsxs(kn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(Cn,{className:"pb-4",children:s.jsx(Pn,{children:"Filter by Date Range"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"From Date"}),s.jsx(je,{type:"date",value:d,onChange:O=>h(O.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"To Date"}),s.jsx(je,{type:"date",value:m,onChange:O=>u(O.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(ie,{onClick:A,className:"flex-1",children:"Apply Filter"}),s.jsx(ie,{variant:"outline",onClick:C,className:"flex-1",children:"Clear"})]}),(d||m)&&s.jsx("div",{className:"pt-4 border-t",children:s.jsx("p",{className:"text-sm text-gray-600",children:d&&m?`Showing: ${d} to ${m}`:d?`From: ${d}`:m?`Until: ${m}`:""})})]})]})})]})})},Dne=async()=>{var e;try{console.log(" Starting authentication verification...");const t=await Se.getToken(),n=await Se.getUser();console.log(" Main Auth Service:",{hasToken:!!t,tokenPreview:t?`${t.substring(0,10)}...`:"NO TOKEN",hasUser:!!n,userType:n==null?void 0:n.user_type,availableRoles:n==null?void 0:n.available_roles});try{const{simplePersistentAuth:r}=await ze(async()=>{const{simplePersistentAuth:i}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:i}},[]),a=await r.getVendorAuth();console.log(" Vendor Persistent Auth:",{hasVendorAuth:!!a,tokenPreview:a!=null&&a.token?`${a.token.substring(0,10)}...`:"NO TOKEN",hasUser:!!(a!=null&&a.user),userType:(e=a==null?void 0:a.user)==null?void 0:e.user_type,isVendorLoggedIn:await r.isVendorLoggedIn()}),t&&(a!=null&&a.token)&&t!==a.token&&(console.log(" TOKEN MISMATCH DETECTED!"),console.log("Main token:",t.substring(0,15)+"..."),console.log("Vendor token:",a.token.substring(0,15)+"..."),window.location.pathname.startsWith("/vendor")&&(console.log(" Syncing main auth with vendor token..."),await Se.setAuth(a.token,a.user)))}catch(r){console.error(" Error checking vendor auth:",r)}if(typeof localStorage<"u"){const r=localStorage.getItem("token"),a=localStorage.getItem("user"),i=localStorage.getItem("vendor_token"),o=localStorage.getItem("vendor_user");console.log(" LocalStorage Direct Check:",{hasLocalToken:!!r,hasLocalUser:!!a,hasVendorToken:!!i,hasVendorUser:!!o,localTokenPreview:r?`${r.substring(0,10)}...`:"NO TOKEN",vendorTokenPreview:i?`${i.substring(0,10)}...`:"NO TOKEN"})}return{mainAuth:{token:t,user:n},isAuthenticated:!!(t&&n)}}catch(t){return console.error(" Authentication verification failed:",t),{mainAuth:{token:null,user:null},isAuthenticated:!1,error:t.message}}},Fne=async()=>{try{console.log(" Attempting to fix authentication issues...");const{simplePersistentAuth:e}=await ze(async()=>{const{simplePersistentAuth:n}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:n}},[]),t=await e.getVendorAuth();return t!=null&&t.token&&(t!=null&&t.user)?(console.log(" Found vendor auth, syncing with main auth..."),await Se.setAuth(t.token,t.user),console.log(" Auth sync completed"),!0):(console.log(" No valid vendor auth found to sync"),!1)}catch(e){return console.error(" Failed to fix authentication issues:",e),!1}},$ne=[{category:"Account",items:[{id:"profile",title:"Profile Management",subtitle:"Complete profile setup and management",icon:Vr,action:"navigate"},{id:"company",title:"Company Information",subtitle:"Business details and verification",icon:Nn,action:"navigate"},{id:"security",title:"Security & Login",subtitle:"Password and authentication",icon:Wn,action:"navigate"}]},{category:"Business",items:[{id:"products",title:"Product Management",subtitle:"Inventory, pricing, and catalog",icon:Mt,action:"navigate"},{id:"analytics",title:"Business Analytics",subtitle:"Sales reports and insights",icon:LP,action:"navigate"}]}];function zne(){const e=nt(),[t,n]=j.useState(null),[r,a]=j.useState(!0),[i,o]=j.useState(""),[c,d]=j.useState({businessName:"",ownerName:"",email:"",phone:"",address:"",description:"",avatar:"/api/placeholder/120/120",isOnline:!0,autoOnlineTime:"09:00",autoOfflineTime:"22:00",totalProducts:0,activeProducts:0,totalSales:0,monthlyRevenue:0});j.useEffect(()=>{h()},[]);const h=async()=>{var p,x;try{console.log(" Verifying authentication before profile fetch..."),await Dne();const{simplePersistentAuth:v}=await ze(async()=>{const{simplePersistentAuth:E}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:E}},[]);if(!await v.isVendorLoggedIn()&&(console.log(" No vendor login found, attempting to fix auth issues..."),!await Fne())){console.log(" Could not fix auth issues, redirecting to login"),e("/vendor/login");return}const w=await v.getVendorAuth();if(w)console.log(" Restoring vendor auth for API calls"),await Se.setAuth(w.token,w.user);else{console.log(" No vendor auth found, redirecting to login"),e("/vendor/login");return}const{response:b,data:_}=await Re("/profile/");if(!b.ok){if(b.status===401){console.log(" Authentication failed, clearing auth and redirecting"),await Se.clearAuth(),await v.clearVendorAuth(),e("/vendor/login");return}throw new Error("Failed to fetch user profile")}const{response:N,data:k}=await Re("/vendor-profiles/");if(N.ok&&k){if(k.results&&k.results.length>0){const E=k.results[0];d({businessName:E.business_name||"N/A",ownerName:E.owner_name||_.username,email:E.business_email||_.email,phone:E.business_phone||_.phone_number||"N/A",address:E.business_address||"N/A",description:E.description||"No description",avatar:_.profile_picture?(_.profile_picture.startsWith("http"),_.profile_picture):"/api/placeholder/120/120",isOnline:!0,autoOnlineTime:"09:00",autoOfflineTime:"22:00",totalProducts:24,activeProducts:22,totalSales:1250,monthlyRevenue:45e3})}}else d(E=>({...E,businessName:_.username,ownerName:_.username,email:_.email,phone:_.phone_number||"N/A",avatar:_.profile_picture?(_.profile_picture.startsWith("http"),_.profile_picture):"/api/placeholder/120/120"}))}catch(v){if(console.error("Error fetching profile:",v),(p=v.message)!=null&&p.includes("Authentication")||(x=v.message)!=null&&x.includes("401")){console.log(" Authentication error, redirecting to login");const{simplePersistentAuth:y}=await ze(async()=>{const{simplePersistentAuth:w}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:w}},[]);await Se.clearAuth(),await y.clearVendorAuth(),e("/vendor/login");return}o("Failed to load profile data")}finally{a(!1)}},[m,u]=j.useState({esewa:{enabled:!1,merchantId:"",secretKey:""},khalti:{enabled:!1,publicKey:"",secretKey:""}}),f=p=>{p==="profile"?e("/vendor/profile"):p==="security"?e("/vendor/security"):p==="company"?e("/vendor/company"):p==="products"?e("/vendor/products"):p==="analytics"?e("/vendor/analytics"):n(p)};return t?s.jsx(Xt,{title:"Settings",children:s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"p-4",children:[s.jsx(ie,{variant:"ghost",onClick:()=>n(null),className:"mb-4",children:" Back to Settings"}),t==="analytics"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Business Analytics"}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Revenue Overview"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",c.monthlyRevenue.toLocaleString()]}),s.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),s.jsx("p",{className:"text-xs text-green-600",children:"+12% from last month"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",(c.monthlyRevenue*.85).toLocaleString()]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Last Month"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Previous period"})]})]})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Sales Metrics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Mt,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Total Orders"})]}),s.jsx("p",{className:"text-xl font-bold",children:c.totalSales}),s.jsx("p",{className:"text-xs text-gray-600",children:"This month"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Yr,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Avg Order Value"})]}),s.jsxs("p",{className:"text-xl font-bold",children:["",Math.round(c.monthlyRevenue/c.totalSales)]}),s.jsx("p",{className:"text-xs text-gray-600",children:"Per order"})]})]})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Product Performance"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Active Products"}),s.jsx("span",{className:"font-semibold",children:c.activeProducts})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Total Products"}),s.jsx("span",{className:"font-semibold",children:c.totalProducts})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Best Seller"}),s.jsx("span",{className:"font-semibold text-green-600",children:"Chicken Momo"})]})]})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Weekly Sales"}),s.jsx("div",{className:"flex items-end justify-between h-32 gap-2",children:[65,45,78,52,89,67,43].map((p,x)=>{const v=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],y=p/100*100;return s.jsxs("div",{className:"flex flex-col items-center flex-1",children:[s.jsx("div",{className:"w-full bg-blue-500 rounded-t mb-1",style:{height:`${y}px`}}),s.jsx("span",{className:"text-xs text-gray-600",children:v[x]})]},x)})})]})})]}),t==="payment"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Payment Settings"}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-green-600 font-bold text-lg",children:"eS"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"eSewa Integration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive payments through eSewa"})]})]}),s.jsx($t,{checked:m.esewa.enabled,onCheckedChange:p=>u(x=>({...x,esewa:{...x.esewa,enabled:p}}))})]}),m.esewa.enabled&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium",children:"Merchant ID"}),s.jsx(je,{placeholder:"Enter your eSewa Merchant ID",value:m.esewa.merchantId,onChange:p=>u(x=>({...x,esewa:{...x.esewa,merchantId:p.target.value}}))})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium",children:"Secret Key"}),s.jsx(je,{type:"password",placeholder:"Enter your eSewa Secret Key",value:m.esewa.secretKey,onChange:p=>u(x=>({...x,esewa:{...x.esewa,secretKey:p.target.value}}))})]}),s.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," You can get your eSewa API credentials from your eSewa merchant dashboard."]})})]})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"K"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Khalti Integration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive payments through Khalti"})]})]}),s.jsx($t,{checked:m.khalti.enabled,onCheckedChange:p=>u(x=>({...x,khalti:{...x.khalti,enabled:p}}))})]}),m.khalti.enabled&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium",children:"Public Key"}),s.jsx(je,{placeholder:"Enter your Khalti Public Key",value:m.khalti.publicKey,onChange:p=>u(x=>({...x,khalti:{...x.khalti,publicKey:p.target.value}}))})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium",children:"Secret Key"}),s.jsx(je,{type:"password",placeholder:"Enter your Khalti Secret Key",value:m.khalti.secretKey,onChange:p=>u(x=>({...x,khalti:{...x.khalti,secretKey:p.target.value}}))})]}),s.jsx("div",{className:"bg-purple-50 p-3 rounded-lg",children:s.jsxs("p",{className:"text-sm text-purple-800",children:[s.jsx("strong",{children:"Note:"})," You can get your Khalti API credentials from your Khalti merchant dashboard."]})})]})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Payment Status"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"eSewa Status"}),s.jsx(Fe,{className:m.esewa.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:m.esewa.enabled?"Active":"Inactive"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Khalti Status"}),s.jsx(Fe,{className:m.khalti.enabled?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800",children:m.khalti.enabled?"Active":"Inactive"})]})]})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(ie,{className:"bg-blue-600 hover:bg-blue-700",children:"Save Payment Settings"})})]}),t==="notifications"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Notification Settings"}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Notification Preferences"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"New Orders"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Get notified when you receive new orders"})]}),s.jsx($t,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Payment Updates"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Notifications for payment confirmations"})]}),s.jsx($t,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Low Stock Alerts"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Alert when products are running low"})]}),s.jsx($t,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"System Updates"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Important system and policy updates"})]}),s.jsx($t,{})]})]})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Delivery Methods"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Push Notifications"}),s.jsx($t,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Email Notifications"}),s.jsx($t,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"SMS Notifications"}),s.jsx($t,{})]})]})]})})]})]})})}):r?s.jsx(Xt,{title:"Settings",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):i?s.jsx(Xt,{title:"Settings",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:i}),s.jsx(ie,{onClick:h,children:"Retry"})]})})}):s.jsx(Xt,{title:"Settings",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b",children:s.jsxs("div",{className:"p-4 flex items-center gap-3",children:[s.jsxs(ci,{className:"h-14 w-14",children:[s.jsx(Ur,{src:c.avatar}),s.jsx(di,{className:"text-lg font-bold",children:c.businessName?c.businessName.charAt(0):"U"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:c.businessName||"Business Name"}),s.jsx("p",{className:"text-gray-500 text-xs",children:c.email})]}),s.jsx(Fe,{className:c.isOnline?"bg-green-100 text-green-800 text-xs":"bg-gray-100 text-gray-800 text-xs",children:c.isOnline?"Online":"Offline"})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Account Type"]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Switch between your Customer and Vendor accounts"})]})}),s.jsx(bR,{})]}),s.jsxs(ie,{variant:"outline",className:"w-full flex items-center justify-center py-4 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:async()=>{const{simplePersistentAuth:p}=await ze(async()=>{const{simplePersistentAuth:x}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:x}},[]);await Se.clearAuth(),await p.clearVendorAuth(),e("/vendor/login")},children:[s.jsx(yb,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium",children:"Logout"})]}),$ne.map(p=>s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b bg-gray-50",children:s.jsx("h2",{className:"font-semibold text-gray-900",children:p.category})}),s.jsx("div",{className:"divide-y",children:p.items.map(x=>{const v=x.icon;return s.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>f(x.id),"data-section":x.id,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(v,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:x.title}),s.jsx("p",{className:"text-sm text-gray-600",children:x.subtitle})]})]}),s.jsx(Sc,{className:"h-5 w-5 text-gray-400"})]})},x.id)})})]},p.category))]})]})})}const I2=()=>{var P,O,Y,J,G;const[e,t]=j.useState(null),[n,r]=j.useState([]),[a,i]=j.useState([]),[o,c]=j.useState(""),[d,h]=j.useState(!0),[m,u]=j.useState(1),[f,p]=j.useState(!1),[x,v]=j.useState(!1),[y,w]=j.useState(null),[b,_]=j.useState(0),N=j.useRef(null),k=j.useRef(null);j.useEffect(()=>{E(),T();const I=new URLSearchParams(window.location.search).get("start_conversation");I&&setTimeout(()=>{C(parseInt(I))},500)},[]);const E=async()=>{try{if(!localStorage.getItem("token"))return;const{response:I,data:V}=await Re("/profile/");I.ok&&V&&w(V)}catch(F){console.error("Failed to fetch current user:",F)}};j.useEffect(()=>{e&&$(e.id)},[e]),j.useEffect(()=>{if(e){const F=setInterval(async()=>{try{const I=await tr.getMessages(e.id),V=Array.isArray(I)?I.reverse():[];i(V),_(V.length)}catch(I){console.error("Failed to fetch messages:",I)}},5e3);return()=>clearInterval(F)}},[e]);const T=async(F=1,I=!1)=>{try{const{response:V,data:H}=await Re(`messaging/conversations/?page=${F}&page_size=20`);if(!V.ok)throw new Error("Failed to fetch conversations");const q=((H==null?void 0:H.results)||[]).filter((K,B,W)=>B===W.findIndex(oe=>{var X,re;return((X=oe.other_participant)==null?void 0:X.id)===((re=K.other_participant)==null?void 0:re.id)}));if(F===1&&!q.some(B=>{var W,oe,X;return((W=B.other_participant)==null?void 0:W.username)==="admin"||((oe=B.other_participant)==null?void 0:oe.id)===1||((X=B.other_participant)==null?void 0:X.username)==="EzzeYway Support"})){const B={id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}};q.unshift(B)}r(I?K=>[...K,...q].filter((W,oe,X)=>oe===X.findIndex(re=>{var ue,me;return((ue=re.other_participant)==null?void 0:ue.id)===((me=W.other_participant)==null?void 0:me.id)})):q),p(!!(H!=null&&H.next)),u(F)}catch(V){console.error("Failed to load conversations:",V),F===1&&r([{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}}])}finally{h(!1),v(!1)}},R=async()=>{x||!f||(v(!0),await T(m+1,!0))},$=async F=>{try{const I=await tr.getMessages(F),V=Array.isArray(I)?I.reverse():[];i(V),_(V.length)}catch(I){console.error("Failed to load messages:",I),i([]),_(0)}},M=async()=>{if(!(!o.trim()||!e))try{const F=await tr.sendMessage({conversation_id:e.id,message_type:"text",content:o});i(I=>[...I,F.message]),c("")}catch(F){console.error("Failed to send message:",F)}},A=async F=>{var V;const I=(V=F.target.files)==null?void 0:V[0];if(!(!I||!e))try{const H=await tr.sendMessage({conversation_id:e.id,message_type:I.type.startsWith("image/")?"image":"file",file:I});i(U=>[...U,H.message])}catch(H){console.error("Failed to send file:",H)}},C=async F=>{try{const I=await tr.getOrCreateConversation(F);t(I);const V=new URL(window.location.href);V.searchParams.delete("start_conversation"),V.searchParams.delete("customer_name"),V.searchParams.delete("order_id"),window.history.replaceState({},"",V.toString())}catch(I){console.error("Failed to create conversation:",I)}},z=()=>{var F;(F=N.current)==null||F.scrollIntoView({behavior:"smooth"})};return j.useEffect(()=>{z()},[a]),d?s.jsx(Xt,{title:"Messages",children:s.jsx("div",{className:"h-screen bg-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),s.jsx("p",{children:"Loading conversations..."})]})})}):e?s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>t(null),children:s.jsx(Yt,{className:"h-4 w-4"})}),s.jsxs(ci,{className:"h-10 w-10",children:[((P=e.other_participant)==null?void 0:P.username)==="EzzeYway Support"?s.jsx(Ur,{src:"/logo.png"}):s.jsx(Ur,{src:Us((O=e.other_participant)==null?void 0:O.profile_picture)}),s.jsx(di,{children:(J=(Y=e.other_participant)==null?void 0:Y.username)==null?void 0:J.charAt(0)})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-sm",children:(G=e.other_participant)==null?void 0:G.username}),s.jsx("p",{className:"text-xs text-gray-500",children:"Online"})]}),s.jsx(ie,{variant:"ghost",size:"sm",children:s.jsx(QD,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(F=>{const I=y&&F.sender.id===y.id;return s.jsx("div",{className:`w-full flex ${I?"justify-end":"justify-start"} mb-2`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow ${I?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[F.message_type==="text"&&s.jsx("p",{className:"text-sm",children:F.content}),F.message_type==="image"&&s.jsx("div",{className:"space-y-2",children:s.jsx("img",{src:Us(F.file_url),alt:"Shared image",className:"rounded max-w-full h-auto"})}),F.message_type==="file"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xa,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:F.file_name})]}),s.jsxs("div",{className:"flex items-center justify-end mt-1 gap-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(F.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),I&&s.jsx("span",{className:`text-xs ${F.is_read?"text-blue-500":"text-gray-400"}`,children:F.is_read?"":""})]})]})},F.id)}),s.jsx("div",{ref:N})]}),s.jsxs("div",{className:"bg-white border-t p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>{var F;return(F=k.current)==null?void 0:F.click()},children:s.jsx(Gv,{className:"h-4 w-4"})}),s.jsx(je,{value:o,onChange:F=>c(F.target.value),placeholder:"Type a message...",className:"flex-1",onKeyPress:F=>F.key==="Enter"&&M()}),s.jsx(ie,{onClick:M,disabled:!o.trim(),children:s.jsx(jb,{className:"h-4 w-4"})})]}),s.jsx("input",{ref:k,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:A,className:"hidden"})]})]}):s.jsx(Xt,{title:"Messages",children:s.jsxs("div",{className:"h-screen bg-white flex flex-col",children:[s.jsx("div",{className:"border-b p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-lg font-semibold",children:"Messages"})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(bb,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No conversations yet"}),s.jsx("p",{className:"text-sm",children:"Customers will message you here!"})]}):n.map(F=>{var I,V,H,U,q,K,B;return s.jsxs("div",{className:"flex items-center gap-3 p-4 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{F.id===0?C(1):t(F)},children:[s.jsxs("div",{className:"relative",children:[s.jsxs(ci,{className:"h-12 w-12",children:[((I=F.other_participant)==null?void 0:I.username)==="EzzeYway Support"?s.jsx(Ur,{src:"/logo.png"}):s.jsx(Ur,{src:Us((V=F.other_participant)==null?void 0:V.profile_picture)}),s.jsx(di,{children:(U=(H=F.other_participant)==null?void 0:H.username)==null?void 0:U.charAt(0)})]}),s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm truncate",children:(q=F.other_participant)==null?void 0:q.username}),s.jsx("span",{className:"text-xs text-gray-500",children:F.last_message?new Date(F.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:((K=F.last_message)==null?void 0:K.content)||((B=F.last_message)!=null&&B.file_name?` ${F.last_message.file_name}`:"")||(F.id===0?"Start conversation":"No messages yet")})]}),F.unread_count>0&&s.jsx(Fe,{className:"bg-blue-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center",children:F.unread_count})]},F.id)}),f&&s.jsx("div",{className:"p-4 text-center",children:s.jsx(ie,{onClick:R,disabled:x,variant:"outline",className:"w-full",children:x?"Loading...":"Load More Conversations"})})]})]})})},Bne=()=>{var X,re,ue,me,we,be,ae;const[e,t]=j.useState(null),[n,r]=j.useState(2),[a,i]=j.useState(!1),[o,c]=j.useState(""),[d,h]=j.useState(""),[m,u]=j.useState(""),[f,p]=j.useState(""),[x,v]=j.useState(""),[y,w]=j.useState(!1),[b,_]=j.useState(""),[N,k]=j.useState("all"),[E,T]=j.useState(1),[R,$]=j.useState([]),M=10,[A,C]=j.useState(!0),[z,P]=j.useState(!1),[O,Y]=j.useState(""),[J,G]=j.useState(!1);sg(),j.useEffect(()=>{const ee=()=>{const ye=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768;G(ye)};return ee(),window.addEventListener("resize",ee),()=>window.removeEventListener("resize",ee)},[]),j.useEffect(()=>{F();const ee=le=>{le.detail.type==="order"&&F()};window.addEventListener("newNotification",ee);let ye;return J||(ye=setInterval(()=>{F()},6e4)),()=>{window.removeEventListener("newNotification",ee),ye&&clearInterval(ye)}},[J]);const F=async()=>{try{C(!0);const{apiRequest:ee}=await ze(async()=>{const{apiRequest:ne}=await Promise.resolve().then(()=>os);return{apiRequest:ne}},void 0),ye=new AbortController,le=setTimeout(()=>ye.abort(),J?8e3:3e4),de=J?"/vendor/orders/?limit=50":"/vendor/orders/",{response:Q,data:se}=await ee(de,{signal:ye.signal});if(clearTimeout(le),Q.ok&&se){const ne=se.results||se||[];console.log(" Orders received:",ne.length,ne),$(ne)}else console.error("Failed to fetch orders:",Q.status,se),$([])}catch(ee){console.error("Error fetching vendor orders:",ee),$([])}finally{C(!1)}};j.useEffect(()=>{if(n>0){const ee=setInterval(()=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`${n} New Order${n>1?"s":""} Waiting!`,{icon:"/favicon.ico",body:"Please check and confirm your orders"})},6e4);return()=>clearInterval(ee)}},[n]),j.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]);const I=ee=>{switch(ee){case"new":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-orange-100 text-orange-800";case"pending":return"bg-yellow-100 text-yellow-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";case"returned":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},V=ee=>{switch(ee){case"new":return s.jsx(zn,{className:"h-3 w-3"});case"confirmed":return s.jsx(Mt,{className:"h-3 w-3"});case"pending":return s.jsx(yr,{className:"h-3 w-3"});case"delivered":return s.jsx(oh,{className:"h-3 w-3"});case"cancelled":return s.jsx(wN,{className:"h-3 w-3"});case"returned":return s.jsx(ma,{className:"h-3 w-3"});default:return s.jsx(Mt,{className:"h-3 w-3"})}},H=ee=>ee==="all"?R:ee==="new"?R.filter(ye=>ye.status==="pending"):ee==="pending"?R.filter(ye=>ye.status==="out_for_delivery"):R.filter(ye=>ye.status===ee),U=(ee,ye,le)=>{$(de=>de.map(Q=>Q.id===ee?{...Q,status:ye,isNew:ye==="new",estimatedTime:"Ready for delivery",...le}:Q))},q=ee=>{const ye=J?15:M;if(N==="new")return J?ee.slice(0,ye):ee;const le=(E-1)*ye,de=le+ye;return ee.slice(le,de)},K=ee=>Math.ceil(ee.length/M),B=ee=>{T(ee)},W=({orders:ee})=>{if(N==="new")return null;const ye=K(ee);return ye<=1?null:s.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(E-1)*M+1,"-",Math.min(E*M,ee.length)," of ",ee.length," orders"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>B(E-1),disabled:E===1,className:"h-7 w-7 p-0",children:s.jsx(IP,{className:"h-3 w-3"})}),s.jsx("div",{className:"flex gap-1",children:Array.from({length:ye},(le,de)=>de+1).map(le=>s.jsx(ie,{variant:E===le?"default":"outline",size:"sm",onClick:()=>B(le),className:"h-7 w-7 p-0 text-xs",children:le},le))}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>B(E+1),disabled:E===ye,className:"h-7 w-7 p-0",children:s.jsx(Sc,{className:"h-3 w-3"})})]})]})},oe=({order:ee})=>{var ye,le,de,Q,se,ne,ve;return s.jsxs("div",{className:`p-4 ${ee.status==="pending"?"bg-blue-50 border-l-4 border-blue-500":((ye=ee.refunds)==null?void 0:ye.length)>0?"bg-orange-50 border-l-4 border-orange-400":"bg-white"} cursor-pointer hover:bg-gray-50 min-h-[120px]`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:ee.order_number}),ee.status==="pending"&&s.jsx(zn,{className:"h-3 w-3 text-blue-500 animate-pulse"})]}),s.jsxs(Fe,{className:`${I(ee.status)} flex items-center gap-1 text-xs px-2 py-1`,children:[V(ee.status),ee.status.charAt(0).toUpperCase()+ee.status.slice(1)]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2",children:[((le=ee.items)==null?void 0:le.length)||0," item",((de=ee.items)==null?void 0:de.length)!==1?"s":""]}),s.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[(Q=ee.items)==null?void 0:Q.slice(0,J?2:3).map((pe,ge)=>{var ke,Be,qe,gt;return s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center overflow-hidden",children:(qe=(Be=(ke=pe.product_details)==null?void 0:ke.images)==null?void 0:Be[0])!=null&&qe.image_url?s.jsx("img",{src:Us(pe.product_details.images[0].image_url),alt:pe.product_name,className:"w-full h-full object-cover",loading:"lazy",onError:ct=>{ct.currentTarget.style.display="none",ct.currentTarget.parentElement.innerHTML='<span class="text-xs text-gray-400"></span>'}}):s.jsx("span",{className:"text-xs text-gray-400",children:""})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:pe.product_name}),s.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:((gt=pe.product_details)==null?void 0:gt.category)||"Item"})]})]},ge)}),((se=ee.items)==null?void 0:se.length)>(J?2:3)&&s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center flex-shrink-0",children:s.jsxs("span",{className:"text-xs text-gray-600",children:["+",ee.items.length-(J?2:3)]})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 flex-1 min-w-0",children:[s.jsx(Vr,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:((ne=ee.customer_details)==null?void 0:ne.username)||ee.delivery_name})]}),s.jsx(ie,{size:"sm",variant:"outline",className:"h-8 w-8 p-0 ml-2 flex-shrink-0",onClick:async pe=>{var ge,ke,Be,qe;pe.stopPropagation();try{const gt=(ge=ee.customer_details)==null?void 0:ge.id;if(gt)window.location.href=`/vendor/messages?start_conversation=${gt}&customer_name=${encodeURIComponent(((ke=ee.customer_details)==null?void 0:ke.username)||ee.delivery_name)}&order_id=${ee.id}`;else{const ct=((Be=ee.customer_details)==null?void 0:Be.phone_number)||ee.delivery_phone,Xe=((qe=ee.customer_details)==null?void 0:qe.username)||ee.delivery_name;window.location.href=`/vendor/messages?customer_phone=${encodeURIComponent(ct)}&customer_name=${encodeURIComponent(Xe)}&order_id=${ee.id}`}}catch(gt){console.error("Error opening conversation:",gt)}},children:s.jsx(_a,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Gt,{className:"h-4 w-4"}),s.jsx("span",{className:"truncate",children:ee.delivery_address})]}),ee.status==="delivered"&&ee.review&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(js,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"}),s.jsxs("span",{className:"text-yellow-600 font-medium text-xs",children:["Rated ",ee.review.overall_rating,"/5"]})]}),((ve=ee.refunds)==null?void 0:ve.length)>0&&s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-2 mt-2",children:ee.refunds.map(pe=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ma,{className:"h-4 w-4 text-orange-500"}),s.jsx("span",{className:"text-orange-700 font-medium text-xs capitalize",children:pe.reason.replace("_"," ")})]}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${pe.status==="requested"?"bg-yellow-100 text-yellow-800":pe.status==="approved"?"bg-green-100 text-green-800":pe.status==="rejected"?"bg-red-100 text-red-800":pe.status==="appeal"?"bg-purple-100 text-purple-800":pe.status==="processed"?"bg-blue-100 text-blue-800":pe.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:pe.status.charAt(0).toUpperCase()+pe.status.slice(1)})]},pe.id))}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(ee.total_amount).toFixed(2)]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ie,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>t(ee),children:[s.jsx(Ps,{className:"h-3 w-3 mr-1"}),"View"]}),ee.status==="pending"&&s.jsx(ie,{size:"sm",className:"h-7 text-xs bg-green-600 hover:bg-green-700",onClick:async pe=>{pe.stopPropagation();try{const{response:ge}=await Re(`/orders/${ee.id}/accept/`,{method:"POST"});ge.ok&&(F(),r(ke=>Math.max(0,ke-1)),window.dispatchEvent(new CustomEvent("walletUpdated")))}catch(ge){console.error("Error accepting order:",ge)}},children:"Accept"}),ee.status==="confirmed"&&s.jsx(ie,{size:"sm",className:"h-7 text-xs bg-blue-600 hover:bg-blue-700",onClick:pe=>{pe.stopPropagation(),t(ee);let ge="",ke="",Be=!1;if(ee.items&&ee.items.length>0)if(ee.items.some(gt=>{var ct;return((ct=gt.product_details)==null?void 0:ct.free_delivery)===!0}))ge="0",ke="Free delivery (set by vendor)",Be=!0;else{const gt=ee.items.find(ct=>{var Xe,ce;return((Xe=ct.product_details)==null?void 0:Xe.custom_delivery_fee_enabled)===!0&&((ce=ct.product_details)==null?void 0:ce.custom_delivery_fee)>0});gt?(ge=gt.product_details.custom_delivery_fee.toString(),ke=`Custom delivery fee (${gt.product_details.custom_delivery_fee})`,Be=!0):(ge="",ke="Enter delivery charge manually",Be=!1)}v(ge),_(ke),w(Be),i(!0)},children:"Ship"}),ee.status==="out_for_delivery"&&s.jsx(ie,{size:"sm",className:"h-7 text-xs bg-green-600 hover:bg-green-700",onClick:async pe=>{pe.stopPropagation();try{const{response:ge}=await Re(`vendor/orders/${ee.id}/status/`,{method:"POST",body:JSON.stringify({status:"delivered",notes:"Marked as delivered by vendor"})});ge.ok&&F()}catch(ge){console.error("Error marking as delivered:",ge)}},children:"Delivered"})]})]})]})]})};return s.jsx(Xt,{title:"Orders",children:s.jsxs("div",{className:"bg-gray-50 min-h-screen pb-20 max-w-full overflow-x-hidden",children:[A?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})]}):R.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Mt,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),s.jsx("p",{className:"text-gray-500",children:"Orders will appear here when customers place them."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"flex gap-3 pb-2",children:[s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center border-l-4 border-blue-500",children:[s.jsx("p",{className:"text-xl font-bold text-blue-600",children:R.filter(ee=>ee.status==="pending").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"New Orders"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-yellow-600",children:R.filter(ee=>ee.status==="out_for_delivery").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Shipped"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-orange-600",children:R.filter(ee=>ee.status==="confirmed").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Confirmed"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-green-600",children:R.filter(ee=>ee.status==="delivered").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Delivered"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-gray-600",children:R.filter(ee=>ee.status==="cancelled").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Cancelled"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-orange-600",children:R.filter(ee=>{var ye;return((ye=ee.refunds)==null?void 0:ye.length)>0}).length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Returns"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-gray-600",children:R.length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Total"})]})]})})}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"})}),s.jsxs(Ia,{value:N,onValueChange:ee=>{k(ee),T(1)},className:"w-full",children:[s.jsx("div",{className:"border-b border-gray-100 overflow-x-auto scrollbar-hide",children:s.jsxs(Qr,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[s.jsxs(Ot,{value:"all",className:"text-xs py-2 px-3 data-[state=active]:bg-gray-50 data-[state=active]:text-gray-600 data-[state=active]:border-b-2 data-[state=active]:border-gray-600 rounded-none whitespace-nowrap flex-shrink-0",children:["All ",s.jsxs("span",{className:"font-bold ml-2",children:["(",R.length,")"]})]}),s.jsxs(Ot,{value:"new",className:"text-xs py-2 px-3 data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 data-[state=active]:border-b-2 data-[state=active]:border-blue-600 rounded-none whitespace-nowrap flex-shrink-0",children:["New ",s.jsxs("span",{className:"font-bold ml-2",children:["(",R.filter(ee=>ee.status==="pending").length,")"]})]}),s.jsxs(Ot,{value:"confirmed",className:"text-xs py-2 px-3 data-[state=active]:bg-orange-50 data-[state=active]:text-orange-600 data-[state=active]:border-b-2 data-[state=active]:border-orange-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Confirmed ",s.jsxs("span",{className:"font-bold ml-2",children:["(",R.filter(ee=>ee.status==="confirmed").length,")"]})]}),s.jsxs(Ot,{value:"pending",className:"text-xs py-2 px-3 data-[state=active]:bg-yellow-50 data-[state=active]:text-yellow-600 data-[state=active]:border-b-2 data-[state=active]:border-yellow-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Shipped ",s.jsxs("span",{className:"font-bold ml-2",children:["(",R.filter(ee=>ee.status==="out_for_delivery").length,")"]})]}),s.jsxs(Ot,{value:"delivered",className:"text-xs py-2 px-3 data-[state=active]:bg-green-50 data-[state=active]:text-green-600 data-[state=active]:border-b-2 data-[state=active]:border-green-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Delivered ",s.jsxs("span",{className:"font-bold ml-2",children:["(",R.filter(ee=>ee.status==="delivered").length,")"]})]}),s.jsxs(Ot,{value:"returns",className:"text-xs py-2 px-3 data-[state=active]:bg-orange-50 data-[state=active]:text-orange-600 data-[state=active]:border-b-2 data-[state=active]:border-orange-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Returns ",s.jsxs("span",{className:"font-bold ml-2",children:["(",R.filter(ee=>{var ye;return((ye=ee.refunds)==null?void 0:ye.length)>0}).length,")"]})]}),s.jsxs(Ot,{value:"cancelled",className:"text-xs py-2 px-3 data-[state=active]:bg-gray-50 data-[state=active]:text-gray-600 data-[state=active]:border-b-2 data-[state=active]:border-gray-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Cancelled ",s.jsxs("span",{className:"font-bold ml-2",children:["(",R.filter(ee=>ee.status==="cancelled").length,")"]})]})]})}),s.jsxs(xt,{value:"all",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:q(R).map(ee=>s.jsx(oe,{order:ee},ee.id))}),s.jsx(W,{orders:R})]}),s.jsxs(xt,{value:"new",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:q(H("new")).map(ee=>s.jsx(oe,{order:ee},ee.id))}),s.jsx(W,{orders:H("new")})]}),s.jsxs(xt,{value:"confirmed",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:q(H("confirmed")).map(ee=>s.jsx(oe,{order:ee},ee.id))}),s.jsx(W,{orders:H("confirmed")})]}),s.jsxs(xt,{value:"pending",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:q(H("pending")).map(ee=>s.jsx(oe,{order:ee},ee.id))}),s.jsx(W,{orders:H("pending")})]}),s.jsxs(xt,{value:"delivered",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:q(H("delivered")).map(ee=>s.jsx(oe,{order:ee},ee.id))}),s.jsx(W,{orders:H("delivered")})]}),s.jsx(xt,{value:"returns",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:R.filter(ee=>{var ye;return((ye=ee.refunds)==null?void 0:ye.length)>0}).map(ee=>{var ye,le;return s.jsxs("div",{className:"p-4 bg-white cursor-pointer hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:ee.order_number})}),s.jsxs(Fe,{className:"bg-orange-100 text-orange-800 flex items-center gap-1 text-xs px-2 py-1",children:[s.jsx(ma,{className:"h-3 w-3"}),"Return Request"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Vr,{className:"h-4 w-4"}),s.jsx("span",{className:"truncate",children:((ye=ee.customer_details)==null?void 0:ye.username)||ee.delivery_name})]}),(le=ee.refunds)==null?void 0:le.map(de=>{var Q;return s.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Return Reason:"}),s.jsx(Fe,{className:`text-xs ${de.status==="requested"?"bg-yellow-100 text-yellow-800":de.status==="approved"?"bg-green-100 text-green-800":de.status==="rejected"?"bg-red-100 text-red-800":de.status==="appeal"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:de.status.charAt(0).toUpperCase()+de.status.slice(1)})]}),s.jsx("p",{className:"text-xs text-gray-700 capitalize",children:de.reason.replace("_"," ")}),de.customer_notes&&s.jsxs("p",{className:"text-xs text-gray-600",children:['"',de.customer_notes,'"']}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Amount:"})," ",de.requested_amount]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Method:"})," ",de.refund_method]}),de.status==="requested"&&s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx(ie,{size:"sm",variant:"outline",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50",onClick:async()=>{const se=prompt("Reason for rejection:");if(se)try{const{response:ne}=await Re(`/admin/refunds/${de.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reject",admin_notes:se})});ne.ok&&F()}catch(ne){console.error("Error rejecting return:",ne)}},children:"Reject"}),s.jsx(ie,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:async()=>{try{const{response:se}=await Re(`/admin/refunds/${de.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"approve",approved_amount:de.requested_amount,admin_notes:"Return approved by vendor"})});se.ok&&F()}catch(se){console.error("Error approving return:",se)}},children:"Approve"})]}),de.status==="approved"&&s.jsxs("div",{className:"bg-green-50 p-2 rounded mt-2",children:[s.jsx("p",{className:"text-xs text-green-800 font-medium mb-2",children:"Return Approved - Process Refund"}),s.jsx(ie,{size:"sm",className:"w-full bg-blue-600 hover:bg-blue-700",onClick:async()=>{try{const{response:se}=await Re(`/admin/refunds/${de.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"process",admin_notes:"Money transferred to customer"})});se.ok&&F()}catch(se){console.error("Error processing refund:",se)}},children:"Process Refund (Transfer Money)"})]}),de.status==="processed"&&s.jsxs("div",{className:"bg-blue-50 p-2 rounded mt-2",children:[s.jsx("p",{className:"text-xs text-blue-800 font-medium mb-2",children:"Money Transferred - Upload Proof"}),s.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:async se=>{const ne=se.target.files[0];if(!ne)return;const ve=new FormData;ve.append("document",ne);try{const{response:pe}=await Re(`/refunds/${de.id}/upload-document/`,{method:"POST",body:ve});pe.ok&&F()}catch(pe){console.error("Error uploading document:",pe)}},className:"w-full text-xs mb-2"}),s.jsx(ie,{size:"sm",className:"w-full bg-green-600 hover:bg-green-700",onClick:async()=>{try{const{response:se}=await Re(`/admin/refunds/${de.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"complete",admin_notes:"Refund completed successfully"})});se.ok&&F()}catch(se){console.error("Error completing refund:",se)}},children:"Mark as Completed"})]}),de.status==="appeal"&&s.jsxs("div",{className:"bg-purple-50 p-2 rounded mt-2",children:[s.jsx("p",{className:"text-xs text-purple-800 font-medium",children:"Customer has appealed this decision"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx(ie,{size:"sm",variant:"outline",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50",onClick:async()=>{try{const{response:se}=await Re(`/admin/refunds/${de.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reject",admin_notes:"Appeal rejected - final decision"})});se.ok&&F()}catch(se){console.error("Error rejecting appeal:",se)}},children:"Reject Appeal"}),s.jsx(ie,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:async()=>{try{const{response:se}=await Re(`/admin/refunds/${de.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"approve",approved_amount:de.requested_amount,admin_notes:"Appeal approved - refund processed"})});se.ok&&F()}catch(se){console.error("Error approving appeal:",se)}},children:"Approve Appeal"})]})]}),((Q=de.evidence_photos)==null?void 0:Q.length)>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium mb-1",children:"Evidence Documents:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:de.evidence_photos.map((se,ne)=>{var ge;const ve=(ge=se.filename)==null?void 0:ge.match(/\.(jpg|jpeg|png|gif|webp)$/i);let pe;return se.filename.startsWith("http")?pe=se.filename:se.filename.startsWith("/media/")?pe=`${mn.BASE_URL}${se.filename}`:pe=`${mn.BASE_URL}/media/${se.filename}`,s.jsxs("div",{className:"bg-blue-100 p-2 rounded text-xs cursor-pointer hover:bg-blue-200 transition-colors flex items-center gap-1",onClick:()=>{ve?(Y(pe),P(!0)):window.open(pe,"_blank")},children:[ve?s.jsx(Ps,{className:"h-3 w-3 text-blue-600"}):s.jsx(Mt,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"text-blue-800",children:se.filename||`Document ${ne+1}`})]},ne)})})]}),de.admin_notes&&s.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[s.jsx("span",{className:"font-medium",children:"Response:"})," ",de.admin_notes]})]},de.id)}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(ee.total_amount).toFixed(2)]}),s.jsxs(ie,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>t(ee),children:[s.jsx(Ps,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]})]},ee.id)})})}),s.jsxs(xt,{value:"cancelled",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:q(H("cancelled")).map(ee=>s.jsx(oe,{order:ee},ee.id))}),s.jsx(W,{orders:H("cancelled")})]})]})]})})]}),s.jsx(Vn,{open:!!e,onOpenChange:()=>t(null),children:s.jsxs(kn,{side:"bottom",className:"h-[90vh] rounded-t-xl",children:[s.jsx(Cn,{className:"pb-4",children:s.jsx(Pn,{className:"text-left",children:(e==null?void 0:e.status)==="confirmed"&&a?"Ship Order":`Order Details - ${e==null?void 0:e.id}`})}),e&&s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[e.status==="confirmed"&&a?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[s.jsx(Vr,{className:"h-4 w-4"}),"Customer Details for Rider"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ie,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{var ye,le,de;const ee=`Order ID: ${e.order_number}

Customer: ${((ye=e.customer_details)==null?void 0:ye.username)||e.delivery_name}

Phone: ${((le=e.customer_details)==null?void 0:le.phone_number)||e.delivery_phone}

Address: ${e.delivery_address}

Map Link: https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}

Total Amount: ${e.total_amount}

Payment: ${e.payment_method} (${e.payment_status})

Items:
${((de=e.items)==null?void 0:de.map(Q=>` ${Q.product_name} x${Q.quantity}`).join(`
`))||""}`;navigator.clipboard.writeText(ee)},children:[s.jsx(JD,{className:"h-3 w-3 mr-1"}),"Copy"]}),s.jsxs(ie,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{var ye,le,de;const ee=`Order ID: ${e.order_number}

Customer: ${((ye=e.customer_details)==null?void 0:ye.username)||e.delivery_name}

Phone: ${((le=e.customer_details)==null?void 0:le.phone_number)||e.delivery_phone}

Address: ${e.delivery_address}

Map Link: https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}

Total Amount: ${e.total_amount}

Payment: ${e.payment_method} (${e.payment_status})

Items:
${((de=e.items)==null?void 0:de.map(Q=>` ${Q.product_name} x${Q.quantity}`).join(`
`))||""}`;if(navigator.share)navigator.share({title:"Delivery Details",text:ee});else{const Q=`https://wa.me/?text=${encodeURIComponent(ee)}`;window.open(Q,"_blank")}},children:[s.jsx(tl,{className:"h-3 w-3 mr-1"}),"Share"]})]})]}),s.jsxs("div",{className:"space-y-2 text-xs bg-white rounded p-3",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Order ID:"})," ",e.order_number]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Customer:"})," ",((X=e.customer_details)==null?void 0:X.username)||e.delivery_name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",((re=e.customer_details)==null?void 0:re.phone_number)||e.delivery_phone]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Address:"})," ",e.delivery_address]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Map Link:"})," ",s.jsx("a",{href:`https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}`,target:"_blank",className:"text-blue-600 underline",children:"Open in Maps"})]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Total Amount:"})," ",e.total_amount]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Payment:"})," ",e.payment_method," (",e.payment_status,")"]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"font-medium",children:"Items:"}),s.jsx("ul",{className:"ml-2 mt-1",children:((ue=e.items)==null?void 0:ue.map((ee,ye)=>s.jsxs("li",{children:[" ",ee.product_name," x",ee.quantity]},ye)))||[]})]})]})]}),s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[s.jsx(yr,{className:"h-4 w-4"}),"Delivery Information"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs(xe,{className:"text-xs font-medium text-gray-700",children:["Rider Phone Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(je,{value:o,onChange:ee=>c(ee.target.value),placeholder:"+977-98XXXXXXXX",className:"h-8 text-xs mt-1"})]}),s.jsxs("div",{children:[s.jsxs(xe,{className:"text-xs font-medium text-gray-700",children:["Vehicle Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(je,{value:d,onChange:ee=>h(ee.target.value),placeholder:"e.g., BA-1-PA-1234",className:"h-8 text-xs mt-1"})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs font-medium text-gray-700",children:"Vehicle Color"}),s.jsx(je,{value:m,onChange:ee=>u(ee.target.value),placeholder:"e.g., Red, Blue, White",className:"h-8 text-xs mt-1"})]}),s.jsxs("div",{children:[s.jsxs(xe,{className:"text-xs font-medium text-gray-700",children:["Estimated Delivery Time ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(je,{value:f,onChange:ee=>p(ee.target.value),placeholder:"e.g., 30-45 mins",className:"h-8 text-xs mt-1"})]}),s.jsxs("div",{children:[s.jsxs(xe,{className:"text-xs font-medium text-gray-700",children:["Delivery Fee ",s.jsx("span",{className:"text-red-500",children:"*"})]}),b&&s.jsx("p",{className:`text-xs mt-1 mb-2 px-2 py-1 rounded ${y?x==="0"?"bg-green-50 text-green-700 border border-green-200":"bg-blue-50 text-blue-700 border border-blue-200":"bg-gray-50 text-gray-600 border border-gray-200"}`,children:b}),s.jsx(je,{type:"number",value:x,onChange:ee=>v(ee.target.value),placeholder:y?"Auto-calculated":"e.g., 50",className:`h-8 text-xs mt-1 ${y?"bg-gray-50 cursor-not-allowed":""}`,readOnly:y,disabled:y}),!y&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" No delivery settings found for products. Enter charge manually."})]})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.jsx(Vr,{className:"h-4 w-4"}),"Customer Information"]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Name:"})," ",((me=e.customer_details)==null?void 0:me.username)||e.delivery_name]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(ch,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:"Phone:"})," ",((we=e.customer_details)==null?void 0:we.phone_number)||e.delivery_phone]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(Gt,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:"Address:"})," ",e.delivery_address]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(Gt,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:"Map:"}),s.jsx("a",{href:`https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}`,target:"_blank",className:"text-blue-600 underline text-xs",children:"View Location"})]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.jsx(Mt,{className:"h-4 w-4"}),"Order Items"]}),s.jsx("div",{className:"space-y-2",children:((be=e.items)==null?void 0:be.map((ee,ye)=>{var le,de,Q;return s.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center overflow-hidden flex-shrink-0",children:(Q=(de=(le=ee.product_details)==null?void 0:le.images)==null?void 0:de[0])!=null&&Q.image_url?s.jsx("img",{src:Us(ee.product_details.images[0].image_url),alt:ee.product_name,className:"w-full h-full object-cover",loading:"lazy",onError:se=>{se.currentTarget.style.display="none",se.currentTarget.parentElement.innerHTML='<span class="text-xs text-gray-400"></span>'}}):s.jsx("span",{className:"text-xs text-gray-400",children:""})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:ee.product_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",ee.quantity]})]})]}),s.jsxs("p",{className:"text-sm font-semibold flex-shrink-0",children:["",ee.total_price]})]},ye)}))||[]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.jsx(lo,{className:"h-4 w-4"}),"Payment Details"]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["",e.subtotal]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Delivery Fee:"}),s.jsxs("span",{children:["",e.delivery_fee]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax:"}),s.jsxs("span",{children:["",e.tax_amount]})]}),s.jsx("hr",{className:"my-1"}),s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["",e.total_amount]})]}),s.jsxs("div",{className:"flex justify-between mt-2",children:[s.jsx("span",{children:"Payment Method:"}),s.jsx("span",{className:"capitalize",children:e.payment_method})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Payment Status:"}),s.jsx(Fe,{variant:e.payment_status==="paid"?"default":"secondary",className:"text-xs",children:e.payment_status})]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.jsx(WD,{className:"h-4 w-4"}),"Order Timeline"]}),s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Ordered:"})," ",new Date(e.created_at).toLocaleDateString()," at ",new Date(e.created_at).toLocaleTimeString()]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Order Number:"})," ",e.order_number]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx(Fe,{className:`${I(e.status)} text-xs`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]})]}),e.status==="delivered"&&e.review&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[s.jsx(js,{className:"h-4 w-4"}),"Customer Review"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(ee=>s.jsx(js,{className:`h-4 w-4 ${ee<=e.review.overall_rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},ee))}),s.jsxs("span",{className:"text-sm font-medium",children:[e.review.overall_rating,"/5"]})]}),e.review.review_text&&s.jsx("div",{className:"bg-white p-2 rounded text-xs",children:s.jsx("p",{className:"text-gray-700",children:e.review.review_text})}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Reviewed on ",new Date(e.review.created_at).toLocaleDateString()]})]})]}),e.status==="cancelled"&&e.cancelReason&&s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[s.jsx(wN,{className:"h-4 w-4"}),"Cancellation Details"]}),s.jsxs("div",{className:"space-y-2 text-xs",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),s.jsx("p",{className:"text-gray-600",children:e.cancelReason})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Cancelled By:"}),s.jsx("p",{className:"text-gray-600 capitalize",children:e.cancelledBy||"System"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Payment Status:"}),s.jsx(Fe,{className:`text-xs ${e.paymentStatus==="Refunded"?"bg-green-100 text-green-800":e.paymentStatus==="Cancelled"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:e.paymentStatus})]})]})]}),((ae=e.refunds)==null?void 0:ae.map(ee=>{var ye;return s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[s.jsx(ma,{className:"h-4 w-4"}),"Return/Refund Details"]}),s.jsxs("div",{className:"space-y-3 text-xs",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Status:"}),s.jsx(Fe,{className:`text-xs ${ee.status==="requested"?"bg-yellow-100 text-yellow-800":ee.status==="approved"?"bg-green-100 text-green-800":ee.status==="rejected"?"bg-red-100 text-red-800":ee.status==="appeal"?"bg-purple-100 text-purple-800":ee.status==="processed"?"bg-blue-100 text-blue-800":ee.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:ee.status.charAt(0).toUpperCase()+ee.status.slice(1)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),s.jsx("p",{className:"text-gray-600 capitalize",children:ee.reason.replace("_"," ")})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Requested Amount:"}),s.jsxs("p",{className:"text-gray-600",children:["",ee.requested_amount]})]}),ee.approved_amount&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Approved Amount:"}),s.jsxs("p",{className:"text-gray-600",children:["",ee.approved_amount]})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[s.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Customer Refund Details:"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Method:"})," ",ee.refund_method]}),ee.refund_method==="esewa"&&ee.esewa_number&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"eSewa Number:"})," ",ee.esewa_number]}),ee.refund_method==="khalti"&&ee.khalti_number&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Khalti Number:"})," ",ee.khalti_number]}),ee.refund_method==="bank"&&s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Account Name:"})," ",ee.bank_account_name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Account Number:"})," ",ee.bank_account_number]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Branch:"})," ",ee.bank_branch]})]})]})]}),ee.customer_notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Customer Notes:"}),s.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:ee.customer_notes})]}),ee.admin_notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Vendor Response:"}),s.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:ee.admin_notes})]}),((ye=ee.evidence_photos)==null?void 0:ye.length)>0&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Evidence Documents:"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:ee.evidence_photos.map((le,de)=>{var ne;const Q=(ne=le.filename)==null?void 0:ne.match(/\.(jpg|jpeg|png|gif|webp)$/i);let se;return le.filename.startsWith("http")?se=le.filename:se=Us(le.filename),s.jsxs("div",{className:"bg-white p-2 rounded border hover:shadow-md transition-shadow",children:[Q?s.jsxs("div",{className:"cursor-pointer mb-2 group",onClick:()=>{Y(se),P(!0)},children:[s.jsxs("div",{className:"relative overflow-hidden rounded",children:[s.jsx("img",{src:se,alt:le.filename,className:"w-full h-20 object-cover rounded mb-1 group-hover:scale-105 transition-transform",onError:ve=>{ve.currentTarget.src="/placeholder-image.svg",ve.currentTarget.alt="Image not found"}}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center",children:s.jsx(Ps,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),s.jsx("p",{className:"text-xs text-blue-600 font-medium",children:" Click to enlarge"})]}):s.jsx("div",{className:"w-full h-20 bg-gray-100 rounded mb-2 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>{window.open(se,"_blank")},children:s.jsxs("div",{className:"text-center",children:[s.jsx(Mt,{className:"h-6 w-6 text-gray-400 mx-auto mb-1"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Document"})]})}),s.jsx("p",{className:"font-medium text-xs truncate",title:le.filename,children:le.filename||`Document ${de+1}`}),s.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",le.uploaded_by]}),s.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",new Date(le.uploaded_at).toLocaleDateString()]})]},de)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500",children:[s.jsx("div",{children:s.jsxs("p",{children:["Requested: ",new Date(ee.requested_at).toLocaleDateString()]})}),ee.approved_at&&s.jsx("div",{children:s.jsxs("p",{children:["Approved: ",new Date(ee.approved_at).toLocaleDateString()]})}),ee.processed_at&&s.jsx("div",{children:s.jsxs("p",{children:["Processed: ",new Date(ee.processed_at).toLocaleDateString()]})}),ee.completed_at&&s.jsx("div",{children:s.jsxs("p",{children:["Completed: ",new Date(ee.completed_at).toLocaleDateString()]})}),ee.appeal_at&&s.jsx("div",{children:s.jsxs("p",{children:["Appealed: ",new Date(ee.appeal_at).toLocaleDateString()]})})]})]})]},ee.id)}))||[]]}),e.status==="new"&&s.jsxs("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:[s.jsx(ie,{variant:"outline",className:"flex-1",onClick:()=>t(null),children:"Reject"}),s.jsx(ie,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>{U(e.id,"confirmed"),r(ee=>Math.max(0,ee-1)),t(null)},children:"Accept Order"})]}),e.status==="confirmed"&&s.jsx("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:a?s.jsxs(s.Fragment,{children:[s.jsx(ie,{variant:"outline",className:"flex-1",onClick:()=>{i(!1),c(""),h(""),u(""),p(""),v(""),_(""),w(!1)},children:"Cancel"}),s.jsx(ie,{className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:!o||!d||!f||!x,onClick:async()=>{try{const{response:ee}=await Re(`vendor/orders/${e.id}/status/`,{method:"POST",body:JSON.stringify({status:"out_for_delivery",delivery_boy_phone:o,vehicle_number:d,vehicle_color:m,estimated_delivery_time:f,delivery_fee:parseFloat(x),notes:"Order shipped with delivery details"})});ee.ok&&(F(),i(!1),c(""),h(""),u(""),p(""),v(""),_(""),w(!1),t(null))}catch(ee){console.error("Error shipping order:",ee)}},children:"Confirm Ship"})]}):s.jsxs(ie,{className:"flex-1 bg-blue-600 hover:bg-blue-700",onClick:()=>{let ee="",ye="",le=!1;if(e.items&&e.items.length>0)if(e.items.some(Q=>{var se;return((se=Q.product_details)==null?void 0:se.free_delivery)===!0}))ee="0",ye="Free delivery (set by vendor)",le=!0;else{const Q=e.items.find(se=>{var ne,ve;return((ne=se.product_details)==null?void 0:ne.custom_delivery_fee_enabled)===!0&&((ve=se.product_details)==null?void 0:ve.custom_delivery_fee)>0});Q?(ee=Q.product_details.custom_delivery_fee.toString(),ye=`Custom delivery fee (${Q.product_details.custom_delivery_fee})`,le=!0):(ee="",ye="Enter delivery charge manually",le=!1)}v(ee),_(ye),w(le),i(!0)},children:[s.jsx(yr,{className:"h-4 w-4 mr-2"}),"Ship Order"]})})]})]})}),s.jsx(lc,{open:z,onOpenChange:P,children:s.jsxs(Wo,{className:"max-w-5xl max-h-[95vh] p-4",children:[s.jsx(Zo,{className:"pb-4",children:s.jsxs(Go,{className:"flex items-center gap-2",children:[s.jsx(Ps,{className:"h-5 w-5"}),"Evidence Document Preview"]})}),s.jsx("div",{className:"flex justify-center items-center bg-gray-50 rounded-lg p-4",children:s.jsx("img",{src:O,alt:"Evidence Preview",className:"max-w-full max-h-[75vh] object-contain rounded shadow-lg",onError:ee=>{ee.currentTarget.src="/placeholder-image.svg",ee.currentTarget.alt="Image not found"}})}),s.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[s.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>window.open(O,"_blank"),children:[s.jsx(tl,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),s.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>{const ee=document.createElement("a");ee.href=O,ee.download="evidence-document",ee.click()},children:[s.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})})]})})},El={getProducts:async()=>{const{response:e,data:t}=await Re("/products/");if(!e.ok)throw new Error("Failed to fetch products");return t},getProduct:async e=>{const{response:t,data:n}=await Re(`/products/${e}/`);if(!t.ok)throw new Error("Failed to fetch product");return n},createProduct:async e=>{const t=new FormData;Object.entries(e).forEach(([a,i])=>{a==="image_files"&&Array.isArray(i)?i.forEach((o,c)=>{o instanceof File&&t.append("image_files",o)}):typeof i=="object"?t.append(a,JSON.stringify(i)):t.append(a,String(i))});const{response:n,data:r}=await Re("/products/",{method:"POST",body:t});if(!n.ok)throw new Error("Failed to create product");return r},updateProduct:async(e,t)=>{const n=new FormData;Object.entries(t).forEach(([i,o])=>{i==="image_files"&&Array.isArray(o)?o.forEach(c=>{c instanceof File&&n.append("image_files",c)}):typeof o=="boolean"?n.append(i,o?"true":"false"):typeof o=="object"&&o!==null?n.append(i,JSON.stringify(o)):o!=null&&n.append(i,String(o))});const{response:r,data:a}=await Re(`/products/${e}/`,{method:"PATCH",body:n});if(!r.ok)throw console.error("Update failed:",r.status),new Error(`Failed to update product: ${r.status}`);return a},deleteProduct:async e=>{const{response:t}=await Re(`/products/${e}/`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete product")}},Vne=({message:e,show:t,onClose:n,duration:r=3e3})=>{const[a,i]=j.useState(!1);return j.useEffect(()=>{if(t){i(!0);const o=setTimeout(()=>{i(!1),setTimeout(n,300)},r);return()=>clearTimeout(o)}},[t,r,n]),!t&&!a?null:s.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-all duration-300 ${a?"opacity-100":"opacity-0"}`,children:[s.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl border border-green-200 p-6 mx-4 max-w-sm w-full pointer-events-auto transform transition-all duration-300 ${a?"scale-100 translate-y-0":"scale-95 translate-y-4"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(oh,{className:"h-6 w-6 text-green-600"})})}),s.jsx("div",{className:"flex-1",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Success!"})})]}),s.jsx("button",{onClick:()=>{i(!1),setTimeout(n,300)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Ys,{className:"h-5 w-5"})})]}),s.jsx("p",{className:"text-gray-600 text-center",children:e}),s.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-1",children:s.jsx("div",{className:"bg-green-500 h-1 rounded-full transition-all duration-300 ease-linear",style:{animation:a?`shrink ${r}ms linear`:"none"}})})]}),s.jsx("style",{jsx:!0,children:`
        @keyframes shrink {
          from { width: 100%; }
          to { width: 0%; }
        }
      `})]})};class Une extends Ce.Component{constructor(n){super(n);us(this,"resetError",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){if(this.state.hasError){if(this.props.fallback){const n=this.props.fallback;return s.jsx(n,{error:this.state.error,resetError:this.resetError})}return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",children:[s.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"We encountered an unexpected error. Please try refreshing the page."}),s.jsx("button",{onClick:this.resetError,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors",children:"Try Again"})]})})}return this.props.children}}const qne=DL({name:Ss().min(1,"Product name is required"),category:Ss().min(1,"Category is required"),subcategory:Ss().optional(),price:ga().min(0,"Price must be positive"),cost_price:ga().nullable().optional().transform(e=>e===void 0?null:e),sku:Ss().optional(),barcode:Ss().optional(),quantity:ga().min(0,"Quantity must be positive"),low_stock_threshold:ga().min(0).optional(),description:Ss().min(1,"Description is required"),short_description:Ss().optional(),tags:Um(Ss()).default([]),image_files:Um(c0()).min(1,"At least one image is required"),status:$L(["active","draft","archived"]).default("active"),featured:cc().default(!1),free_delivery:cc().default(!1),custom_delivery_fee_enabled:cc().default(!1),custom_delivery_fee:ga().min(0).nullable().optional(),seo_title:Ss().optional(),seo_description:Ss().optional(),dynamic_fields:FL(c0()).default({})}).refine(e=>e.free_delivery?!0:!(e.custom_delivery_fee_enabled&&(e.custom_delivery_fee===null||e.custom_delivery_fee===void 0)),{message:"Custom delivery fee is required when custom delivery fee is enabled and free delivery is disabled",path:["custom_delivery_fee"]}),Hne=()=>{const e=nt(),[t,n]=j.useState(""),[r,a]=j.useState([]),[i,o]=j.useState([]),[c,d]=j.useState([]),[h,m]=j.useState(""),[u,f]=j.useState(!1),[p,x]=j.useState(!1),[v,y]=j.useState(""),[w,b]=j.useState([]),[_,N]=j.useState([]),[k,E]=j.useState([]),[T,R]=j.useState(!1),[$,M]=j.useState(!0),[A,C]=j.useState([]),[z,P]=j.useState([]),[O,Y]=j.useState(!1),J=AL({resolver:RL(qne),defaultValues:{name:"",category:"",price:"",cost_price:null,quantity:"",description:"",tags:[],image_files:[],status:"active",featured:!1,free_delivery:!1,custom_delivery_fee_enabled:!1,custom_delivery_fee:void 0,dynamic_fields:{}}}),{control:G,handleSubmit:F,watch:I,setValue:V,formState:{errors:H}}=J,U=I("category");j.useEffect(()=>{n(U),V("subcategory",""),U?(K(U,!1),B(U)):(E([]),C([]))},[U,V]);const q=I("subcategory");j.useEffect(()=>{q?W(q):P([])},[q]);const K=async(ae,ee=!1)=>{try{R(!0);const{apiRequest:ye}=await ze(async()=>{const{apiRequest:Q}=await Promise.resolve().then(()=>os);return{apiRequest:Q}},void 0),{response:le,data:de}=await ye(`categories/${encodeURIComponent(ae)}/subcategories/`);if(le.ok&&de){const se=(de.subcategories||[]).map((ne,ve)=>typeof ne=="string"?{id:ve+1,name:ne}:ne);E(se),ee&&se.length>0&&V("subcategory",se[0].name)}else E([])}catch(ye){console.error("Error fetching subcategories:",ye),E([])}finally{R(!1)}},B=async ae=>{var ee;try{Y(!0);const ye=(ee=_.find(se=>se.name===ae))==null?void 0:ee.id;if(!ye)return;const{apiRequest:le}=await ze(async()=>{const{apiRequest:se}=await Promise.resolve().then(()=>os);return{apiRequest:se}},void 0),{response:de,data:Q}=await le(`/accounts/categories/parameters/?target_id=${ye}&target_type=category`);de.ok&&(Q!=null&&Q.parameters)?C(Q.parameters):C([])}catch(ye){console.error("Error fetching category parameters:",ye),C([])}finally{Y(!1)}},W=async ae=>{try{Y(!0);const ee=k.find(Q=>Q.name===ae);if(!(ee!=null&&ee.id))return;const{apiRequest:ye}=await ze(async()=>{const{apiRequest:Q}=await Promise.resolve().then(()=>os);return{apiRequest:Q}},void 0),{response:le,data:de}=await ye(`/accounts/categories/parameters/?target_id=${ee.id}&target_type=subcategory`);le.ok&&(de!=null&&de.parameters)?P(de.parameters):P([])}catch(ee){console.error("Error fetching subcategory parameters:",ee),P([])}finally{Y(!1)}};j.useEffect(()=>{(async()=>{try{const{apiRequest:ee}=await ze(async()=>{const{apiRequest:se}=await Promise.resolve().then(()=>os);return{apiRequest:se}},void 0),{response:ye,data:le}=await ee("/categories/");ye.ok&&(le!=null&&le.categories)&&N(le.categories);const{response:de,data:Q}=await ee("/vendor-profiles/");if(console.log("Vendor profile response:",{response:de.ok,data:Q}),de.ok&&Q&&Q.results&&Q.results.length>0){const ne=Q.results[0].categories||[];console.log("Vendor categories:",ne),b(ne);const ve=ne.length>0?ne:(le==null?void 0:le.categories)||[];if(ve.length>0){const pe=typeof ve[0]=="string"?ve[0]:ve[0].name;V("category",pe),n(pe),K(pe,!0)}}}catch(ee){console.error("Error fetching data:",ee)}finally{M(!1)}})()},[V]);const oe=ae=>{const ee=ae.target.files;if(ee){const ye=Array.from(ee),le=ye.map(de=>URL.createObjectURL(de));a(de=>[...de,...ye]),o(de=>[...de,...le]),V("image_files",[...r,...ye])}},X=ae=>{URL.revokeObjectURL(i[ae]);const ee=r.filter((le,de)=>de!==ae),ye=i.filter((le,de)=>de!==ae);a(ee),o(ye),V("image_files",ee)},re=()=>{if(h.trim()&&!c.includes(h.trim())){const ae=[...c,h.trim()];d(ae),V("tags",ae),m("")}},ue=ae=>{const ee=c.filter(ye=>ye!==ae);d(ee),V("tags",ee)},me=async ae=>{try{const ee={...ae};(ee.cost_price===null||ee.cost_price===void 0)&&delete ee.cost_price,(ee.free_delivery||!ee.custom_delivery_fee_enabled)&&delete ee.custom_delivery_fee,await El.createProduct(ee),y("Product created successfully!"),x(!0),J.reset(),i.forEach(le=>URL.revokeObjectURL(le)),a([]),o([]),d([]);const ye=w.length>0?w:_;if(ye.length>0){const le=typeof ye[0]=="string"?ye[0]:ye[0].name;V("category",le),n(le)}}catch(ee){en.error("Failed to create product. Please try again."),console.error("Error creating product:",ee)}},we=ae=>{if(!ae||!ae.name||!ae.field_type)return null;const ee=`dynamic_fields.${ae.name}`;switch(ae.field_type){case"text":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.is_required},render:({field:ye})=>s.jsx(je,{...ye,placeholder:ae.placeholder,className:"h-8 text-xs"})})]},ae.name);case"number":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.is_required},render:({field:ye})=>s.jsx(je,{...ye,type:"number",placeholder:ae.placeholder,className:"h-8 text-xs",onChange:le=>ye.onChange(Number(le.target.value))})})]},ae.name);case"select":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.is_required},render:({field:ye})=>{var le;return s.jsxs(qt,{onValueChange:ye.onChange,value:ye.value,children:[s.jsx(Bt,{className:"h-8 text-xs",children:s.jsx(Ht,{placeholder:`Select ${ae.label.toLowerCase()}`})}),s.jsx(Vt,{children:(le=ae.options)==null?void 0:le.map((de,Q)=>s.jsx(We,{value:de,className:"text-xs",children:de},`${ae.name}-${de}-${Q}`))})]})}})]},ae.name);case"multiselect":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.is_required},render:({field:ye})=>{var de;const le=ye.value||[];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(qt,{onValueChange:Q=>{le.includes(Q)||ye.onChange([...le,Q])},children:[s.jsx(Bt,{className:"h-8 text-xs",children:s.jsx(Ht,{placeholder:`Select ${ae.label.toLowerCase()}`})}),s.jsx(Vt,{children:(de=ae.options)==null?void 0:de.map((Q,se)=>s.jsx(We,{value:Q,className:"text-xs",children:Q},`${ae.name}-multiselect-${Q}-${se}`))})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:le.map((Q,se)=>s.jsxs(Fe,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[Q,s.jsx(Ys,{className:"h-2 w-2 cursor-pointer",onClick:()=>{ye.onChange(le.filter(ne=>ne!==Q))}})]},`${ae.name}-badge-${Q}-${se}`))})]})}})]},ae.name);case"textarea":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.is_required},render:({field:ye})=>s.jsx(Ws,{...ye,placeholder:ae.placeholder,className:"text-xs",rows:2})})]},ae.name);case"boolean":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ut,{name:ee,control:G,render:({field:ye})=>s.jsx($t,{checked:ye.value,onCheckedChange:ye.onChange})}),s.jsx(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:ae.label})]},ae.name);case"date":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.is_required},render:({field:ye})=>s.jsx(je,{...ye,type:"date",className:"h-8 text-xs"})})]},ae.name);case"color":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.is_required},render:({field:ye})=>s.jsx(je,{...ye,type:"color",className:"h-8 text-xs"})})]},ae.name);case"range":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.is_required},render:({field:ye})=>s.jsx(je,{...ye,type:"range",min:ae.min_value||0,max:ae.max_value||100,step:ae.step||1,className:"h-8 text-xs"})})]},ae.name);default:return null}},be=ae=>{if(!ae||!ae.name||!ae.type)return null;const ee=`dynamic_fields.${ae.name}`;switch(ae.type){case"text":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.required},render:({field:ye})=>s.jsx(je,{...ye,placeholder:ae.placeholder,className:"h-8 text-xs"})})]},ae.name);case"number":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.required},render:({field:ye})=>s.jsx(je,{...ye,type:"number",placeholder:ae.placeholder,className:"h-8 text-xs",onChange:le=>ye.onChange(Number(le.target.value))})})]},ae.name);case"select":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.required},render:({field:ye})=>{var le;return s.jsxs(qt,{onValueChange:ye.onChange,value:ye.value,children:[s.jsx(Bt,{className:"h-8 text-xs",children:s.jsx(Ht,{placeholder:`Select ${ae.label.toLowerCase()}`})}),s.jsx(Vt,{children:(le=ae.options)==null?void 0:le.filter(de=>de!=null).map((de,Q)=>s.jsx(We,{value:de,className:"text-xs",children:de},`${ae.name}-${de}-${Q}`))})]})}})]},ae.name);case"multiselect":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.required},render:({field:ye})=>{var de;const le=ye.value||[];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(qt,{onValueChange:Q=>{le.includes(Q)||ye.onChange([...le,Q])},children:[s.jsx(Bt,{className:"h-8 text-xs",children:s.jsx(Ht,{placeholder:`Select ${ae.label.toLowerCase()}`})}),s.jsx(Vt,{children:(de=ae.options)==null?void 0:de.filter(Q=>Q!=null).map((Q,se)=>s.jsx(We,{value:Q,className:"text-xs",children:Q},`${ae.name}-multiselect-${Q}-${se}`))})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:le.map((Q,se)=>s.jsxs(Fe,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[Q,s.jsx(Ys,{className:"h-2 w-2 cursor-pointer",onClick:()=>{ye.onChange(le.filter(ne=>ne!==Q))}})]},`${ae.name}-badge-${Q}-${se}`))})]})}})]},ae.name);case"textarea":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.required},render:({field:ye})=>s.jsx(Ws,{...ye,placeholder:ae.placeholder,className:"text-xs",rows:2})})]},ae.name);case"boolean":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ut,{name:ee,control:G,render:({field:ye})=>s.jsx($t,{checked:ye.value,onCheckedChange:ye.onChange})}),s.jsx(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:ae.label})]},ae.name);case"date":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ae.name,className:"text-xs font-medium text-gray-700",children:[ae.label," ",ae.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:ee,control:G,rules:{required:ae.required},render:({field:ye})=>s.jsx(je,{...ye,type:"date",className:"h-8 text-xs"})})]},ae.name);default:return null}};return u?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>f(!1),children:s.jsx(Yt,{className:"h-4 w-4"})}),s.jsx("h1",{className:"text-lg font-semibold",children:"Product Preview"})]}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>f(!1),children:"Edit"})]})}),s.jsx(l5,{productData:I()})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("style",{children:`
        input, textarea, select {
          font-size: 16px !important;
          transform: translateZ(0);
        }
        @media screen and (max-width: 768px) {
          input:focus, textarea:focus, select:focus {
            font-size: 16px !important;
            zoom: 1 !important;
          }
        }
      `}),s.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>e("/vendor/dashboard"),children:s.jsx(Yt,{className:"h-4 w-4"})}),s.jsx("h1",{className:"text-lg font-semibold",children:"Add New Product"})]}),s.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>f(!0),children:[s.jsx(Ps,{className:"h-4 w-4 mr-1"}),"Preview"]})]})}),s.jsx("div",{className:"max-w-2xl mx-auto p-4",children:s.jsxs("form",{onSubmit:F(me),className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Mt,{className:"h-4 w-4 text-blue-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Basic Information"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"col-span-2 space-y-1",children:[s.jsxs(xe,{htmlFor:"name",className:"text-xs font-medium text-gray-700",children:["Product Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:"name",control:G,render:({field:ae})=>s.jsx(je,{...ae,placeholder:"Enter product name",className:"h-8 text-xs"})}),H.name&&s.jsx("p",{className:"text-red-500 text-xs",children:H.name.message})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:"category",className:"text-xs font-medium text-gray-700",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:"category",control:G,render:({field:ae})=>s.jsxs(qt,{onValueChange:ae.onChange,value:ae.value,children:[s.jsx(Bt,{className:"h-8 text-xs",children:s.jsx(Ht,{placeholder:"Select category"})}),s.jsx(Vt,{children:$?s.jsx(We,{value:"loading",disabled:!0,className:"text-xs",children:"Loading..."}):w.length>0?w.map(ee=>s.jsxs(We,{value:ee,className:"text-xs",children:[" ",ee]},ee)):_.map(ee=>s.jsxs(We,{value:ee.name,className:"text-xs",children:[" ",ee.name]},ee.id))})]})}),H.category&&s.jsx("p",{className:"text-red-500 text-xs",children:H.category.message})]}),k.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(xe,{className:"text-xs font-medium text-gray-700",children:"Subcategory"}),s.jsx(ut,{name:"subcategory",control:G,render:({field:ae})=>s.jsxs(qt,{onValueChange:ae.onChange,value:ae.value,disabled:T,children:[s.jsx(Bt,{className:"h-8 text-xs",children:s.jsx(Ht,{placeholder:T?"Loading...":"Select subcategory"})}),s.jsx(Vt,{children:k.map(ee=>s.jsx(We,{value:ee.name,className:"text-xs",children:ee.name},ee.id))})]})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(xe,{className:"text-xs font-medium text-gray-700",children:"Unit"}),s.jsx(je,{value:t?O2(t):"piece",disabled:!0,className:"h-8 text-xs bg-gray-50"})]})]})]}),A.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Af,{className:"h-4 w-4 text-green-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Category Details"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:A.map(we)})]}),z.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Af,{className:"h-4 w-4 text-blue-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Subcategory Details"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:z.map(we)})]}),t&&$r[t]&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Af,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"mr-1",children:$r[t].icon}),s.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:[$r[t].name," Details"]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:$r[t].fields.map(be)})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Pricing & Inventory"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:"price",className:"text-xs font-medium text-gray-700",children:["Selling Price ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:"price",control:G,render:({field:ae})=>s.jsx(je,{...ae,type:"number",step:"0.01",placeholder:"0.00",className:"h-8 text-xs",onChange:ee=>ae.onChange(Number(ee.target.value))})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(xe,{htmlFor:"cost_price",className:"text-xs font-medium text-gray-700",children:"Cost Price"}),s.jsx(ut,{name:"cost_price",control:G,render:({field:ae})=>s.jsx(je,{type:"number",step:"0.01",placeholder:"0.00",className:"h-8 text-xs",value:ae.value??"",onChange:ee=>{const ye=ee.target.value;ae.onChange(ye?Number(ye):null)}})})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:"quantity",className:"text-xs font-medium text-gray-700",children:["Quantity ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:"quantity",control:G,render:({field:ae})=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(je,{type:"number",placeholder:"0",className:"h-8 text-xs flex-1",value:ae.value||"",onChange:ee=>ae.onChange(ee.target.value?Number(ee.target.value):"")}),s.jsx("span",{className:"text-xs text-gray-500 flex items-center px-2",children:t?O2(t):"piece"})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ut,{name:"free_delivery",control:G,render:({field:ae})=>s.jsx($t,{checked:ae.value,onCheckedChange:ee=>{ae.onChange(ee),ee&&(V("custom_delivery_fee_enabled",!1),V("custom_delivery_fee",void 0))}})}),s.jsx(xe,{className:"text-xs font-medium text-gray-700",children:"Free Delivery"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ut,{name:"custom_delivery_fee_enabled",control:G,render:({field:ae})=>s.jsx($t,{checked:ae.value&&!I("free_delivery"),disabled:I("free_delivery"),onCheckedChange:ee=>{ae.onChange(ee),ee||V("custom_delivery_fee",void 0)}})}),s.jsx(xe,{className:"text-xs font-medium text-gray-700",children:"Custom Delivery Fee"})]}),I("custom_delivery_fee_enabled")&&!I("free_delivery")&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(xe,{htmlFor:"custom_delivery_fee",className:"text-xs font-medium text-gray-700",children:"Delivery Fee Amount"}),s.jsx(ut,{name:"custom_delivery_fee",control:G,render:({field:ae})=>s.jsx(je,{type:"number",step:"0.01",placeholder:"Enter delivery fee",className:"h-8 text-xs",value:ae.value||"",onChange:ee=>{const ye=ee.target.value;ae.onChange(ye?Number(ye):void 0)}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ja,{className:"h-4 w-4 text-purple-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Images"})]}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:oe,className:"hidden",id:"image-upload"}),s.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[s.jsx(gp,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Click to upload images"})]})]}),i.length>0&&s.jsx("div",{className:"grid grid-cols-4 gap-2",children:i.map((ae,ee)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:ae,alt:`Product ${ee+1}`,className:"w-full h-12 object-cover rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>X(ee),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ys,{className:"h-3 w-3"})}),ee===0&&s.jsx(Fe,{className:"absolute bottom-0 left-0 text-xs px-1 py-0",children:"Main"})]},ee))})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(FP,{className:"h-4 w-4 text-orange-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Description"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:"description",className:"text-xs font-medium text-gray-700",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(ut,{name:"description",control:G,render:({field:ae})=>{const ee=Ce.useRef(null);return s.jsx(t5,{ref:ee,theme:"snow",value:ae.value,onChange:ae.onChange,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},style:{minHeight:"120px",fontSize:"12px"}})}}),H.description&&s.jsx("p",{className:"text-red-500 text-xs",children:H.description.message})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Tags"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(je,{value:h,onChange:ae=>m(ae.target.value),placeholder:"Add a tag",className:"h-8 text-xs",onKeyPress:ae=>ae.key==="Enter"&&(ae.preventDefault(),re())}),s.jsx(ie,{type:"button",onClick:re,variant:"outline",size:"sm",children:s.jsx(Es,{className:"h-3 w-3"})})]}),c.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:c.map((ae,ee)=>s.jsxs(Fe,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[ae,s.jsx(Ys,{className:"h-2 w-2 cursor-pointer",onClick:()=>ue(ae)})]},`tag-${ae}-${ee}`))})]}),s.jsxs("div",{className:"flex gap-3 sticky bottom-4 bg-white p-3 border border-gray-200 rounded-lg",children:[s.jsx(ie,{type:"button",variant:"outline",className:"flex-1 h-9 text-xs",onClick:()=>{V("status","draft"),F(me)()},children:"Save as Draft"}),s.jsxs(ie,{type:"submit",className:"flex-1 h-9 text-xs",children:[s.jsx(Wc,{className:"h-3 w-3 mr-1"}),"Publish Product"]})]})]})}),s.jsx(Vne,{message:v,show:p,onClose:()=>x(!1),duration:3e3})]})},Wne=()=>s.jsx(Une,{children:s.jsx(Hne,{})}),Zne=()=>{const[e,t]=j.useState(!1),[n,r]=j.useState("khalti"),[a,i]=j.useState(""),[o,c]=j.useState(!0),[d,h]=j.useState("all"),[m,u]=j.useState(""),[f,p]=j.useState(""),[x,v]=j.useState(null),[y,w]=j.useState([]),[b,_]=j.useState(!1),[N,k]=j.useState(!0),[E,T]=j.useState(!1),[R,$]=j.useState(null),[M,A]=j.useState(1),[C,z]=j.useState(1),[P,O]=j.useState(0),Y=20,J=async()=>{try{const{response:W,data:oe}=await Re("vendor-wallet/");W.ok&&oe?v(oe):en.error("Failed to fetch wallet data")}catch(W){console.error("Error fetching wallet data:",W),en.error("Error loading wallet data")}finally{k(!1)}},G=async()=>{try{const W=new URLSearchParams({date_filter:d,page:M.toString(),page_size:Y.toString()});d==="custom"&&m&&f&&(W.append("date_from",m),W.append("date_to",f));const{response:oe,data:X}=await Re(`wallet/transactions/?${W}`);oe.ok&&X?(w(X.transactions),z(X.total_pages),O(X.total_count)):en.error("Failed to fetch transactions")}catch(W){console.error("Error fetching transactions:",W),en.error("Error loading transactions")}};j.useEffect(()=>{J();const W=()=>{J()};return window.addEventListener("walletUpdated",W),()=>{window.removeEventListener("walletUpdated",W)}},[]),j.useEffect(()=>{x&&G()},[x,d,M,m,f]),j.useEffect(()=>{const W=()=>{J(),G()};return window.addEventListener("walletUpdated",W),()=>{window.removeEventListener("walletUpdated",W)}},[]),j.useEffect(()=>{const W=new URLSearchParams(window.location.search);if(W.get("payment_complete")==="1"){const oe=W.get("pidx");oe?F(oe):(en.success("Payment completed successfully!"),J()),window.history.replaceState({},document.title,window.location.pathname)}},[]);const F=async W=>{try{const{response:oe,data:X}=await Re("wallet/khalti-verify/",{method:"POST",body:JSON.stringify({pidx:W})});oe.ok&&X&&X.success?(en.success(`Payment verified! Rs${X.amount} added to wallet`),J()):en.error((X==null?void 0:X.error)||"Payment verification failed")}catch(oe){console.error("Error verifying payment:",oe),en.error("Error verifying payment")}},I=async()=>{if(!n||!a)return;const{simplePersistentAuth:W}=await ze(async()=>{const{simplePersistentAuth:X}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:X}},[]);if(!await W.isVendorLoggedIn()){en.error("Please login to continue");return}if(_(!0),n==="khalti")try{const{response:X,data:re}=await Re("wallet/khalti-payment/",{method:"POST",body:JSON.stringify({amount:parseFloat(a)})});X.ok&&re&&re.success?window.location.href=re.payment_url:(en.error((re==null?void 0:re.error)||"Failed to initiate payment"),_(!1))}catch(X){console.error("Error initiating payment:",X),en.error("Error processing payment"),_(!1)}t(!1),i("")},V=()=>y.filter(W=>W.transaction_type==="credit").reduce((W,oe)=>W+parseFloat(oe.amount),0),H=()=>y.filter(W=>W.transaction_type==="debit").reduce((W,oe)=>W+parseFloat(oe.amount),0),U=W=>new Date(W).toLocaleDateString(),q=W=>new Date(W).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),K=()=>{const oe=`
===========================================
           WALLET TRANSACTION SUMMARY
===========================================
Generated: ${new Date().toLocaleDateString()}
Store: ${(x==null?void 0:x.business_name)||"N/A"}
Period: ${d==="custom"?`${m} to ${f}`:d.toUpperCase()}

BALANCE OVERVIEW
-------------------------------------------
Current Balance: Rs${(x==null?void 0:x.balance)||"0.00"}
Total Credit: Rs${V().toFixed(2)}
Total Debit: Rs${H().toFixed(2)}
Net Amount: Rs${(V()-H()).toFixed(2)}

TRANSACTION DETAILS (${y.length} transactions)
-------------------------------------------
${y.map(re=>`${U(re.created_at)} ${q(re.created_at)} | ${re.transaction_type.toUpperCase().padEnd(6)} | Rs${parseFloat(re.amount).toFixed(2).padStart(8)} | ${re.description}`).join(`
`)}

===========================================
    `,X=window.open("","_blank");X==null||X.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${oe}</pre>`),X==null||X.print()},B=()=>{const W=[["Date","Time","Type","Amount","Description","Method","Status"].join(","),...y.map(ue=>[U(ue.created_at),q(ue.created_at),ue.transaction_type,parseFloat(ue.amount).toFixed(2),`"${ue.description}"`,ue.payment_method||"N/A",ue.status].join(","))].join(`
`),oe=new Blob([W],{type:"text/csv"}),X=window.URL.createObjectURL(oe),re=document.createElement("a");re.href=X,re.download=`wallet-transactions-${d}-${new Date().toISOString().split("T")[0]}.csv`,re.click(),window.URL.revokeObjectURL(X)};return s.jsx(Xt,{title:"Wallet",children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 pb-20",children:[s.jsxs("div",{className:"bg-white border-b p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(hm,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"My Wallet"}),s.jsx("p",{className:"text-gray-600 text-sm",children:(x==null?void 0:x.business_name)||"Loading..."})]})]}),s.jsx(ie,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100",onClick:()=>c(!o),children:o?s.jsx(Ps,{className:"h-4 w-4"}):s.jsx(xb,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Available Balance"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-3",children:o?`${(x==null?void 0:x.balance)||"0.00"}`:"****.**"}),s.jsxs(ie,{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium",onClick:()=>t(!0),disabled:!0,children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Add Money"]})]})]}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(Ee,{className:"bg-white shadow-sm",children:s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Yr,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"This Month"}),s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+",(x==null?void 0:x.total_earned)||"0.00"]})]})]})})}),s.jsx(Ee,{className:"bg-white shadow-sm",children:s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(BP,{className:"h-4 w-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Expenses"}),s.jsxs("p",{className:"text-sm font-bold text-red-600",children:["-",(x==null?void 0:x.total_spent)||"0.00"]})]})]})})})]})}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transactions"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ie,{variant:"outline",size:"sm",onClick:K,children:[s.jsx(wb,{className:"h-4 w-4 mr-1"}),"Print"]}),s.jsxs(ie,{variant:"outline",size:"sm",onClick:B,children:[s.jsx(tc,{className:"h-4 w-4 mr-1"}),"Export"]}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>T(!0),children:s.jsx(La,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{key:"all",label:"All"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"custom",label:"Custom"}].map(W=>s.jsx(ie,{variant:d===W.key?"default":"outline",size:"sm",className:"whitespace-nowrap",onClick:()=>h(W.key),children:W.label},W.key))})]}),s.jsx("div",{className:"px-4 space-y-2",children:N?s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx(Aa,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading transactions..."})]}):y.length>0?y.map(W=>s.jsx(Ee,{className:"bg-white shadow-sm cursor-pointer hover:bg-gray-50",onClick:()=>$(W),children:s.jsx(Oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${W.transaction_type==="credit"?"bg-green-100":"bg-red-100"}`,children:W.transaction_type==="credit"?s.jsx(Ou,{className:"h-5 w-5 text-green-600"}):s.jsx(Ru,{className:"h-5 w-5 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:W.description}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsxs("span",{children:[U(W.created_at)," at ",q(W.created_at)]}),s.jsx(Fe,{variant:W.status==="completed"?"default":"secondary",className:"text-xs",children:W.status})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:`text-sm font-bold ${W.transaction_type==="credit"?"text-green-600":"text-red-600"}`,children:[W.transaction_type==="credit"?"+":"-","",parseFloat(W.amount).toFixed(2)]}),s.jsx("p",{className:"text-xs text-gray-500",children:W.payment_method||"N/A"})]})]})})},W.id)):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(hm,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No transactions found"})]})}),C>1&&s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(M-1)*Y+1,"-",Math.min(M*Y,P)," of ",P," transactions"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>A(M-1),disabled:M===1,className:"h-8 w-8 p-0",children:s.jsx(IP,{className:"h-4 w-4"})}),s.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,C)},(W,oe)=>{const X=M<=3?oe+1:M-2+oe;return X>C?null:s.jsx(ie,{variant:M===X?"default":"outline",size:"sm",onClick:()=>A(X),className:"h-8 w-8 p-0 text-xs",children:X},X)})}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>A(M+1),disabled:M===C,className:"h-8 w-8 p-0",children:s.jsx(Sc,{className:"h-4 w-4"})})]})]})}),s.jsx(Vn,{open:e,onOpenChange:t,children:s.jsxs(kn,{side:"bottom",className:"h-[80vh] rounded-t-3xl",children:[s.jsx(Cn,{className:"pb-6",children:s.jsx(Pn,{className:"text-center text-xl",children:"Add Money to Wallet"})}),s.jsxs("div",{className:"space-y-6 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Enter Amount"}),s.jsx(je,{type:"number",placeholder:" 0.00",value:a,onChange:W=>i(W.target.value),className:"h-12 text-lg text-center"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:[500,1e3,2e3].map(W=>s.jsxs(ie,{variant:"outline",onClick:()=>i(W.toString()),className:"h-10",children:["",W]},W))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Payment Method"}),s.jsx(Ee,{className:"cursor-pointer transition-all ring-2 ring-purple-500 bg-purple-50",onClick:()=>r("khalti"),children:s.jsx(Oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(lo,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Khalti"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Secure digital payment gateway"})]})]})})})]}),s.jsx("div",{className:"fixed bottom-4 left-4 right-4",children:s.jsx(ie,{className:"w-full h-12 text-lg font-medium",disabled:!n||!a||b,onClick:I,children:b?s.jsxs(s.Fragment,{children:[s.jsx(Aa,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Add ${a||"0"}`})})]})]})}),s.jsx(Vn,{open:E,onOpenChange:T,children:s.jsxs(kn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(Cn,{className:"pb-4",children:s.jsxs(Pn,{className:"flex items-center justify-between",children:["Filter Transactions",s.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>T(!1),children:s.jsx(Ys,{className:"h-4 w-4"})})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"Date Range"}),s.jsx("div",{className:"space-y-2",children:[{key:"all",label:"All Time"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"custom",label:"Custom Range"}].map(W=>s.jsx(ie,{variant:d===W.key?"default":"outline",size:"sm",className:"w-full justify-start",onClick:()=>{h(W.key),A(1)},children:W.label},W.key))})]}),d==="custom"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs font-medium",children:"From Date"}),s.jsx(je,{type:"date",value:m,onChange:W=>{u(W.target.value),A(1)},className:"h-9 text-sm mt-1"})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs font-medium",children:"To Date"}),s.jsx(je,{type:"date",value:f,onChange:W=>{p(W.target.value),A(1)},className:"h-9 text-sm mt-1"})]})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:["Total Transactions: ",P]}),s.jsxs("p",{children:["Total Credit: ",V().toFixed(2)]}),s.jsxs("p",{children:["Total Debit: ",H().toFixed(2)]}),s.jsxs("p",{className:"font-medium",children:["Net: ",(V()-H()).toFixed(2)]})]})})]})]})}),s.jsx(Vn,{open:!!R,onOpenChange:()=>$(null),children:s.jsxs(kn,{side:"bottom",className:"h-[70vh] rounded-t-xl",children:[s.jsx(Cn,{className:"pb-4",children:s.jsx(Pn,{className:"text-left",children:"Transaction Details"})}),R&&s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${R.transaction_type==="credit"?"bg-green-100":"bg-red-100"}`,children:R.transaction_type==="credit"?s.jsx(Ou,{className:"h-6 w-6 text-green-600"}):s.jsx(Ru,{className:"h-6 w-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-lg",children:R.description}),s.jsxs("p",{className:`text-xl font-bold ${R.transaction_type==="credit"?"text-green-600":"text-red-600"}`,children:[R.transaction_type==="credit"?"+":"-","",parseFloat(R.amount).toFixed(2)]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Transaction ID"}),s.jsxs("p",{className:"font-medium",children:["TXN-",R.id]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Status"}),s.jsx(Fe,{variant:R.status==="completed"?"default":"secondary",children:R.status})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Date & Time"}),s.jsxs("p",{className:"font-medium",children:[U(R.created_at)," at ",q(R.created_at)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Method"}),s.jsx("p",{className:"font-medium",children:R.payment_method||"N/A"})]})]})]}),(R.order_amount||R.reference_id)&&s.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[s.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[s.jsx(xa,{className:"h-4 w-4"}),"Additional Details"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[R.order_amount&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Amount:"}),s.jsxs("span",{className:"font-medium",children:["",parseFloat(R.order_amount).toFixed(2)]})]}),R.reference_id&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Reference ID:"}),s.jsx("span",{className:"font-medium",children:R.reference_id})]})]})]})]})]})})]})})};function Gne({requiredRole:e,currentPage:t}){const{state:n}=Rn(),r=nt(),a=n.user,i=a==null?void 0:a.user_type,c=((a==null?void 0:a.available_roles)||[]).includes(e);return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs(Ee,{className:"max-w-md w-full",children:[s.jsxs(St,{className:"text-center",children:[s.jsx(gb,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),s.jsx(Pt,{children:"Role Access Required"})]}),s.jsxs(Oe,{className:"space-y-4",children:[s.jsxs("div",{className:"text-center text-gray-600",children:[s.jsxs("p",{children:["You need ",s.jsx("strong",{children:e})," access to view this page."]}),s.jsxs("p",{className:"text-sm mt-2",children:["Current role: ",s.jsx("span",{className:"font-medium",children:i})]})]}),c?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[s.jsx(i6,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Good news!"})]}),s.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["You have ",e," access available. Switch your role to continue."]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[s.jsx("span",{children:i}),s.jsx(RP,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:e})]}),s.jsxs(ie,{onClick:()=>{r(e==="vendor"?"/vendor/onboarding":"/home")},className:"w-full",children:["Switch to ",e==="vendor"?"Vendor":"Customer"]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"bg-orange-50 p-3 rounded-lg",children:s.jsxs("p",{className:"text-sm text-orange-700",children:["You don't have ",e," access yet."]})}),e==="vendor"?s.jsx(ie,{onClick:()=>r("/vendor/onboarding"),className:"w-full",children:"Complete Vendor Onboarding"}):s.jsx(ie,{onClick:()=>r("/home"),className:"w-full",children:"Go to Customer Area"})]}),s.jsx("div",{className:"pt-2 border-t",children:s.jsx(ie,{variant:"outline",onClick:()=>r(-1),className:"w-full",children:"Go Back"})})]})]})})}function Kne({children:e,redirectTo:t="/vendor/login"}){const[n,r]=j.useState(!0),[a,i]=j.useState(!1),o=nt();j.useEffect(()=>{c()},[]);const c=async()=>{try{const d=await yZ("vendor");d.success?i(!0):d.needsLogin?o(t):d.roleNotAvailable?o("/vendor/onboarding"):o(t)}catch(d){console.error("Vendor auth guard error:",d),o(t)}finally{r(!1)}};return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a?s.jsx(s.Fragment,{children:e}):null}const Yne=()=>{var F;const e=nt(),{toast:t}=es(),{logout:n,state:r,login:a}=Rn(),[i,o]=j.useState("personal"),[c,d]=j.useState(!1),[h,m]=j.useState(!0),[u,f]=j.useState("");j.useState(null);const[p,x]=j.useState(null),[v,y]=j.useState(!1),[w,b]=j.useState(""),[_,N]=j.useState(null),[k,E]=j.useState({businessName:"",ownerName:"",email:"",phone:"",address:"",locationAddress:"",city:"",state:"",pincode:"",latitude:null,longitude:null,businessType:"",categories:[],description:"",bankName:"",accountNumber:"",ifscCode:"",accountHolderName:"",gstNumber:"",panNumber:"",businessLicense:null,citizenshipFront:null,citizenshipBack:null,shopImages:[],deliveryRadius:"",minOrderAmount:"",profileImage:null,referralCode:null});j.useEffect(()=>{T(),R(),M()},[]),j.useEffect(()=>{var I;((I=r.user)==null?void 0:I.user_type)==="vendor"&&T()},[(F=r.user)==null?void 0:F.user_type]);const T=async()=>{var I,V,H,U,q,K,B,W,oe,X,re,ue;try{const me=await bZ();if(me.needsLogin){e("/vendor/login");return}if(me.needsOnboarding){f("You don't have access to vendor features. Please complete vendor onboarding first.");return}if(me.needsRoleSwitch){if(!(await $w()).success){f("Failed to switch to vendor role. Please try logging in again.");return}const ee=await Se.getUser();if(ee){const ye=await Se.getToken();await a(ee,ye)}}let{response:we,data:be}=await Re("/vendor-profiles/");if(we.status===401||we.status===403){console.log("Auth error, attempting to refresh and retry...");const ae=await Se.getUser();if(ae&&ae.user_type==="vendor"){const ee=await Re("/vendor-profiles/");we=ee.response,be=ee.data}if(we.status===401||we.status===403){f("You don't have access to vendor features. Please complete vendor onboarding first.");return}}if(!we.ok)throw new Error("Failed to fetch profile data");if(be&&be.results&&be.results.length>0){const ae=be.results[0];E({businessName:ae.business_name||"",ownerName:ae.owner_name||"",email:ae.business_email||"",phone:ae.business_phone||"",address:ae.business_address||"",locationAddress:ae.location_address||"",city:ae.city||"",state:ae.state||"",pincode:ae.pincode||"",latitude:ae.latitude||null,longitude:ae.longitude||null,businessType:ae.business_type||"",categories:Array.isArray(ae.categories)?ae.categories:[],description:ae.description||"",bankName:ae.bank_name||"",accountNumber:ae.account_number||"",ifscCode:ae.ifsc_code||"",accountHolderName:ae.account_holder_name||"",gstNumber:ae.gst_number||"",panNumber:ae.pan_number||"",businessLicense:ae.business_license_file_url?{name:"PAN Registration",url:ae.business_license_file_url}:null,citizenshipFront:(I=ae.documents)!=null&&I.find(ee=>{var ye;return(ye=ee.document_url)==null?void 0:ye.includes("citizenship_front")})?{name:"Citizenship Front",url:ae.documents.find(ee=>{var ye;return(ye=ee.document_url)==null?void 0:ye.includes("citizenship_front")}).document_url}:null,citizenshipBack:(V=ae.documents)!=null&&V.find(ee=>{var ye;return(ye=ee.document_url)==null?void 0:ye.includes("citizenship_back")})?{name:"Citizenship Back",url:ae.documents.find(ee=>{var ye;return(ye=ee.document_url)==null?void 0:ye.includes("citizenship_back")}).document_url}:null,shopImages:ae.shop_images||[],deliveryRadius:((H=ae.delivery_radius)==null?void 0:H.toString())||"",minOrderAmount:ae.min_order_amount||"",profileImage:((U=ae.user_info)==null?void 0:U.profile_picture)||null,referralCode:((q=ae.user_info)==null?void 0:q.referral_code)||null})}else{console.log("No vendor profile found, creating one...");const ae=await Se.getUser();if(ae)if(await $(ae)){const ye=await Re("/vendor-profiles/");if(ye.response.ok&&((B=(K=ye.data)==null?void 0:K.results)==null?void 0:B.length)>0){const le=ye.data.results[0];E({businessName:le.business_name||"",ownerName:le.owner_name||"",email:le.business_email||"",phone:le.business_phone||"",address:le.business_address||"",locationAddress:le.location_address||"",city:le.city||"",state:le.state||"",pincode:le.pincode||"",latitude:le.latitude||null,longitude:le.longitude||null,businessType:le.business_type||"",categories:Array.isArray(le.categories)?le.categories:[],description:le.description||"",bankName:le.bank_name||"",accountNumber:le.account_number||"",ifscCode:le.ifsc_code||"",accountHolderName:le.account_holder_name||"",gstNumber:le.gst_number||"",panNumber:le.pan_number||"",businessLicense:le.business_license_file_url?{name:"PAN Registration",url:le.business_license_file_url}:null,citizenshipFront:(W=le.documents)!=null&&W.find(de=>{var Q;return(Q=de.document_url)==null?void 0:Q.includes("citizenship_front")})?{name:"Citizenship Front",url:le.documents.find(de=>{var Q;return(Q=de.document_url)==null?void 0:Q.includes("citizenship_front")}).document_url}:null,citizenshipBack:(oe=le.documents)!=null&&oe.find(de=>{var Q;return(Q=de.document_url)==null?void 0:Q.includes("citizenship_back")})?{name:"Citizenship Back",url:le.documents.find(de=>{var Q;return(Q=de.document_url)==null?void 0:Q.includes("citizenship_back")}).document_url}:null,shopImages:le.shop_images||[],deliveryRadius:((X=le.delivery_radius)==null?void 0:X.toString())||"",minOrderAmount:le.min_order_amount||"",profileImage:((re=le.user_info)==null?void 0:re.profile_picture)||null,referralCode:((ue=le.user_info)==null?void 0:ue.referral_code)||null})}else E({...k,businessName:ae.username||"My Business",ownerName:ae.username||"Owner",email:ae.email||""})}else f("Failed to create vendor profile");else f("User not found")}}catch(me){console.error("Error fetching profile:",me),f("Failed to load profile data")}finally{m(!1)}},R=async()=>{try{if(!await Se.isAuthenticated())return;const{response:V,data:H}=await Re("/profile/");if(V.ok&&H){const U={...r.user,available_roles:H.available_roles,current_role:H.current_role};console.log("Updated user data:",U)}}catch(I){console.error("Error fetching user profile:",I)}},$=async I=>{try{const V={business_name:I.username||"My Business",owner_name:I.username||"Owner",business_email:I.email||"",business_phone:I.phone_number||"",business_address:"",city:"",state:"",pincode:"",business_type:"retailer",categories:[],description:"",is_active:!0},{response:H}=await Re("/vendor-profiles/",{method:"POST",body:JSON.stringify(V)});return H.ok?(console.log("Vendor profile created successfully"),!0):!1}catch(V){return console.error("Failed to create vendor profile:",V),!1}},M=async()=>{try{const{response:I,data:V}=await Re("/delivery-radius/");I.ok&&V&&N(V.delivery_radius)}catch(I){console.error("Error fetching admin delivery radius:",I)}},A=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"manufacturer",label:"Manufacturer"},{value:"service_provider",label:"Service Provider"},{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"}],C=(I,V)=>{E(H=>({...H,[I]:V}))},z=async I=>{if(I)try{if(!await Se.isAuthenticated())return;const H=new FormData;H.append("profile_picture",I);const{response:U,data:q}=await Re("/profile/upload-picture/",{method:"POST",body:H});if(U.ok&&q)console.log("Upload result:",q),console.log("Profile picture URL:",q.profile_picture),E(K=>({...K,profileImage:q.profile_picture||null})),t({title:"Success",description:"Profile image updated successfully!"}),setTimeout(()=>{T()},500);else{const K=await U.json();throw console.error("Profile image upload error:",K),new Error("Profile image upload failed")}}catch(V){console.error("Profile image upload error:",V),t({title:"Error",description:"Failed to upload profile image. Please try again.",variant:"destructive"})}},P=async(I,V,H)=>{var q;if(!V)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(V.type)){t({title:"Error",description:"Please upload only PDF, JPG, JPEG, or PNG files.",variant:"destructive"});return}if(V.size>5*1024*1024){t({title:"Error",description:"File size must be less than 5MB.",variant:"destructive"});return}x(I);try{if(!await Se.isAuthenticated())return;const B=new FormData;B.append(I,V),B.append("business_name",k.businessName),B.append("business_email",k.email),B.append("business_phone",k.phone),B.append("business_address",k.address),B.append("city",k.city),B.append("state",k.state),B.append("pincode",k.pincode),B.append("business_type",k.businessType);const{response:W,data:oe}=await Re("/vendor-profiles/");if(!W.ok)throw new Error("Failed to get profile");const X=(q=oe.results[0])==null?void 0:q.id;if(!X)throw new Error("Profile not found");const{response:re,data:ue}=await Re(`/vendor-profiles/${X}/`,{method:"PATCH",body:B});if(!re.ok)throw new Error("Upload failed");I==="business_license_file"?C("businessLicense",{name:"Business License",url:ue.business_license_file_url}):I==="gst_certificate"?C("gstCertificate",{name:"GST Certificate",url:ue.gst_certificate_url}):I==="fssai_license"&&C("fssaiLicense",{name:"FSSAI License",url:ue.fssai_license_url}),t({title:"Success",description:"Document uploaded successfully!"}),I==="additionalDocs"&&(y(!1),b(""),T())}catch(K){console.error("Upload error:",K),t({title:"Error",description:"Failed to upload document. Please try again.",variant:"destructive"})}finally{x(null)}},O=({title:I,docType:V,document:H,onUpload:U})=>s.jsxs("div",{children:[s.jsx(xe,{children:I}),s.jsxs("div",{className:"mt-2 p-4 border border-gray-300 rounded-lg bg-gray-50",children:[s.jsx(xa,{className:"h-6 w-6 mx-auto mb-2 text-gray-500"}),H?s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("p",{className:"text-sm text-green-600",children:" Uploaded"}),s.jsxs(lc,{children:[s.jsx(x4,{asChild:!0,children:s.jsxs(ie,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",children:[s.jsx(Ps,{className:"h-3 w-3 mr-1"}),"View"]})}),s.jsxs(Wo,{className:"max-w-4xl w-full h-[80vh]",children:[s.jsx(Zo,{children:s.jsx(Go,{children:I})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("img",{src:H.url,alt:I,className:"w-full h-full object-contain"})})]})]})]}):s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Not uploaded"}),s.jsxs(ie,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",onClick:()=>{const q=H.createElement("input");q.type="file",q.accept=".pdf,.jpg,.jpeg,.png",q.onchange=K=>{var W;const B=(W=K.target.files)==null?void 0:W[0];B&&U(B)},q.click()},disabled:p===V,children:[p===V?s.jsx(Aa,{className:"h-3 w-3 mr-1 animate-spin"}):s.jsx(gp,{className:"h-3 w-3 mr-1"}),"Upload"]})]})]})]}),Y=async()=>{try{if(!await Se.isAuthenticated())return;const V={business_name:k.businessName,owner_name:k.ownerName,business_email:k.email,business_phone:k.phone,business_address:k.address,location_address:k.locationAddress,city:k.city,state:k.state,pincode:k.pincode,latitude:k.latitude,longitude:k.longitude,business_type:k.businessType,categories:k.categories,description:k.description,bank_name:k.bankName,account_number:k.accountNumber,account_holder_name:k.accountHolderName,ifsc_code:k.ifscCode,gst_number:k.gstNumber,pan_number:k.panNumber,delivery_radius:k.deliveryRadius?parseFloat(k.deliveryRadius):null,min_order_amount:k.minOrderAmount},{response:H,data:U}=await Re("/vendor-profiles/");if(H.ok&&U){if(U.results&&U.results.length>0){const q=U.results[0].id,{response:K}=await Re(`/vendor-profiles/${q}/`,{method:"PUT",body:JSON.stringify(V)});if(K.ok)d(!1),t({title:"Success",description:"Profile updated successfully!",variant:"default"}),T();else{const B=await K.json();throw console.error("Update error:",B),new Error("Failed to update profile")}}}else throw new Error("Failed to fetch profile for update")}catch(I){console.error("Error saving profile:",I),t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}},J=async()=>{try{await Se.getToken()&&await Re("/logout/",{method:"POST"})}catch(I){console.error("Logout error:",I)}finally{await n(),e("/vendor/login")}},G=[{id:"personal",label:"Personal",icon:Vr},{id:"business",label:"Business",icon:Nn},{id:"address",label:"Address",icon:Gt},{id:"banking",label:"Banking",icon:lo},{id:"documents",label:"Documents",icon:xa}];return h?s.jsx(Xt,{title:"My Profile",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):u&&u.includes("vendor features")?s.jsx(Gne,{requiredRole:"vendor",currentPage:"vendor-profile"}):u?s.jsx(Xt,{title:"My Profile",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsx(gb,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-600 mb-4",children:u}),s.jsx("div",{className:"space-y-2",children:s.jsx(ie,{onClick:T,variant:"outline",children:"Retry"})})]})})}):s.jsx(Kne,{children:s.jsx(Xt,{title:"My Profile",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-100 fixed top-14 sm:top-16 left-0 right-0 z-30",children:s.jsxs("div",{className:"flex items-center justify-between p-3 mx-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-lg overflow-hidden ${c?"cursor-pointer hover:bg-gray-200":""}`,onClick:c?()=>{const I=document.createElement("input");I.type="file",I.accept="image/*",I.onchange=V=>{var U;const H=(U=V.target.files)==null?void 0:U[0];H&&z(H)},I.click()}:void 0,children:k.profileImage?s.jsx("img",{src:k.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-600 font-semibold",children:k.businessName?k.businessName.charAt(0).toUpperCase():"V"})}),c&&s.jsx(ie,{size:"sm",className:"absolute -bottom-0.5 -right-0.5 w-5 h-5 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const I=document.createElement("input");I.type="file",I.accept="image/*",I.onchange=V=>{var U;const H=(U=V.target.files)==null?void 0:U[0];H&&z(H)},I.click()},children:s.jsx(ja,{className:"h-2.5 w-2.5"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"font-medium text-base truncate",children:k.businessName||"Business Name"}),s.jsx("p",{className:"text-gray-500 text-sm truncate",children:k.ownerName||"Owner Name"})]})]}),s.jsx(ie,{onClick:()=>c?Y():d(!0),size:"sm",className:"bg-green-600 hover:bg-green-700",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Wc,{className:"h-3 w-3 mr-1"}),"Save"]}):s.jsxs(s.Fragment,{children:[s.jsx(lh,{className:"h-3 w-3 mr-1"}),"Edit"]})})]})}),s.jsx("div",{className:"bg-white pt-16",children:s.jsxs(Ia,{value:i,onValueChange:o,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(Qr,{className:"grid grid-cols-5 w-full",children:G.map(I=>s.jsxs(Ot,{value:I.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(I.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:I.label})]},I.id))})}),s.jsx(xt,{value:"personal",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"ownerName",children:"Full Name *"}),s.jsx(je,{id:"ownerName",value:k.ownerName,onChange:I=>C("ownerName",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"email",children:"Email *"}),s.jsx(je,{id:"email",type:"email",value:k.email,onChange:I=>C("email",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"phone",children:"Phone Number *"}),s.jsx(je,{id:"phone",value:k.phone,onChange:I=>C("phone",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"referralCode",children:"My Referral Code"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(je,{id:"referralCode",value:k.referralCode||"Loading...",disabled:!0,className:"bg-gray-50 font-mono text-center text-lg font-semibold text-blue-600"}),s.jsx(ie,{type:"button",variant:"outline",size:"sm",onClick:()=>{k.referralCode&&(navigator.clipboard.writeText(k.referralCode),t({title:"Copied!",description:"Referral code copied to clipboard"}))},disabled:!k.referralCode,children:"Copy"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Share this code with customers to earn referral rewards"})]})]})}),s.jsxs(xt,{value:"business",className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"businessName",children:"Business Name *"}),s.jsx(je,{id:"businessName",value:k.businessName,onChange:I=>C("businessName",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"businessType",children:"Business Type *"}),s.jsxs(qt,{value:k.businessType,onValueChange:I=>C("businessType",I),disabled:!c,children:[s.jsx(Bt,{children:s.jsx(Ht,{})}),s.jsx(Vt,{children:A.map(I=>s.jsx(We,{value:I.value,children:I.label},I.value))})]})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"gstNumber",children:"GST Number"}),s.jsx(je,{id:"gstNumber",value:k.gstNumber,onChange:I=>C("gstNumber",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"panNumber",children:"PAN Number"}),s.jsx(je,{id:"panNumber",value:k.panNumber,onChange:I=>C("panNumber",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"deliveryRadius",children:"Delivery Radius (km)"}),s.jsx(je,{id:"deliveryRadius",value:_?`${_} (Set by Admin)`:k.deliveryRadius,disabled:!0,className:"bg-gray-100 text-gray-600"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Delivery radius is set by the administrator"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"minOrderAmount",children:"Min Order Amount ()"}),s.jsx(je,{id:"minOrderAmount",value:k.minOrderAmount,onChange:I=>C("minOrderAmount",I.target.value),disabled:!c})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(xe,{children:"Selected Categories"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:k.categories.length>0?k.categories.map(I=>s.jsx("span",{className:"px-3 py-1 text-sm bg-blue-50 text-blue-600 border border-blue-200 rounded-lg",children:I},I)):s.jsx("span",{className:"text-sm text-gray-500",children:"No categories selected"})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Categories are set during vendor onboarding and cannot be changed here."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(xe,{htmlFor:"description",children:"Business Description"}),s.jsx(Ws,{id:"description",value:k.description,onChange:I=>C("description",I.target.value),rows:3,disabled:!c})]})]}),s.jsx(xt,{value:"address",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(xe,{htmlFor:"address",children:"Shop Address *"}),s.jsx(Ws,{id:"address",value:k.address,onChange:I=>C("address",I.target.value),disabled:!c,rows:2})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(xe,{htmlFor:"locationAddress",children:"Location Address (from Map)"}),s.jsx(Ws,{id:"locationAddress",value:k.locationAddress,onChange:I=>C("locationAddress",I.target.value),disabled:!c,rows:2})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"city",children:"City *"}),s.jsx(je,{id:"city",value:k.city,onChange:I=>C("city",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"state",children:"State *"}),s.jsx(je,{id:"state",value:k.state,onChange:I=>C("state",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"pincode",children:"Pincode *"}),s.jsx(je,{id:"pincode",value:k.pincode,onChange:I=>C("pincode",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Coordinates"}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Lat: ",k.latitude||"N/A",", Lng: ",k.longitude||"N/A"]})]})]})}),s.jsx(xt,{value:"banking",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"bankName",children:"Bank Name *"}),s.jsx(je,{id:"bankName",value:k.bankName,onChange:I=>C("bankName",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"accountHolderName",children:"Account Holder Name *"}),s.jsx(je,{id:"accountHolderName",value:k.accountHolderName,onChange:I=>C("accountHolderName",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"accountNumber",children:"Account Number *"}),s.jsx(je,{id:"accountNumber",value:k.accountNumber,onChange:I=>C("accountNumber",I.target.value),disabled:!c})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"ifscCode",children:"IFSC Code *"}),s.jsx(je,{id:"ifscCode",value:k.ifscCode,onChange:I=>C("ifscCode",I.target.value),disabled:!c})]})]})}),s.jsx(xt,{value:"documents",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(O,{title:"PAN Registration",docType:"business_license_file",document:k.businessLicense,onUpload:I=>P("business_license_file",I)}),s.jsx(O,{title:"Citizenship (Front)",docType:"citizenship_front",document:k.citizenshipFront,onUpload:I=>P("citizenship_front",I)}),s.jsx(O,{title:"Citizenship (Back)",docType:"citizenship_back",document:k.citizenshipBack,onUpload:I=>P("citizenship_back",I)})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-lg font-medium",children:"Shop Images"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Images of your shop (interior, exterior, products, etc.)"}),k.shopImages.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:k.shopImages.map((I,V)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:I.image_url,alt:`Shop image ${V+1}`,className:"w-full h-full object-cover"})}),I.is_primary&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"})]},V))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(ja,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No shop images uploaded"})]})]})]})})]})}),s.jsx("div",{className:"p-4 pb-20",children:s.jsxs(ie,{variant:"outline",className:"w-full flex items-center justify-center py-6 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:J,children:[s.jsx(yb,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium text-base",children:"Logout"})]})})]})})})},Xne=()=>{const[e,t]=j.useState("basic"),[n,r]=j.useState(!1),[a,i]=j.useState(!1),[o,c]=j.useState(null),[d,h]=j.useState(!0),[m,u]=j.useState(null),[f,p]=j.useState([]),[x,v]=j.useState([]),[y,w]=j.useState({businessName:"Fresh Farm Valley",ownerName:"Ram Sharma",email:"ram@freshfarm.com",phone:"+977 9841234567",whatsapp:"+977 9841234567",avatar:"",businessType:"grocery",description:"Certified organic farm serving Kathmandu Valley for 10+ years. We specialize in fresh vegetables, fruits, and dairy products.",categories:["Vegetables","Fruits","Dairy","Organic"],establishedYear:"2014",gstNumber:"27AABCU9603R1ZX",panNumber:"AABCU9603R",address:"Balkumari, Lalitpur",city:"Kathmandu",state:"Bagmati",pincode:"44700",landmark:"Near Balkumari Temple",deliveryRadius:"5",minOrderAmount:"200",deliveryFee:"50",freeDeliveryAbove:"500",estimatedDeliveryTime:"30-45",isOpen:!0,openingHours:{monday:{open:"06:00",close:"21:00",closed:!1},tuesday:{open:"06:00",close:"21:00",closed:!1},wednesday:{open:"06:00",close:"21:00",closed:!1},thursday:{open:"06:00",close:"21:00",closed:!1},friday:{open:"06:00",close:"21:00",closed:!1},saturday:{open:"06:00",close:"21:00",closed:!1},sunday:{open:"07:00",close:"20:00",closed:!1}},bankName:"Nepal Bank Limited",accountNumber:"1234567890123456",ifscCode:"NBLNPKA",accountHolderName:"Ram Sharma",upiId:"ram@nbl",businessLicense:"",gstCertificate:"",fssaiLicense:"",autoAcceptOrders:!1,notificationSettings:{orderAlerts:!0,messageAlerts:!0,promotionalEmails:!1}}),b=[{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"},{value:"meat",label:"Meat Shop"},{value:"dairy",label:"Dairy Products"}],[_,N]=j.useState([]);j.useEffect(()=>{(async()=>{try{const{response:z,data:P}=await Re("/categories/");z.ok&&P.categories?N(P.categories.map(O=>O.name)):N(["Vegetables","Fruits","Dairy","Meat","Bakery","Beverages","Snacks","Organic","Frozen","Spices","Grains","Oil","Electronics","Decoration"])}catch(z){console.error("Error fetching categories:",z),N(["Vegetables","Fruits","Dairy","Meat","Bakery","Beverages","Snacks","Organic","Frozen","Spices","Grains","Oil","Electronics","Decoration"])}})()},[]);const k=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],E=(C,z)=>{w(P=>({...P,[C]:z}))},T=(C,z,P)=>{w(O=>({...O,[C]:{...O[C],[z]:P}}))};j.useEffect(()=>{R()},[]);const R=async()=>{var C,z,P,O;try{if(h(!0),!localStorage.getItem("token")){u("No authentication token found");return}const{response:J,data:G}=await Re("/vendor-profiles/");if(J.ok&&G)if(console.log("Full API Response:",G),G.results&&G.results.length>0){const F=G.results[0];console.log("Vendor Profile:",F),console.log("Documents:",F.documents),console.log("Shop Images:",F.shop_images),console.log("Categories:",F.categories),p(F.documents||[]),v(F.shop_images||[]),w({businessName:F.business_name||"",ownerName:F.owner_name||"",email:F.business_email||"",phone:F.business_phone||"",whatsapp:F.business_phone||"",avatar:"",businessType:F.business_type||"grocery",description:F.description||"",categories:F.categories||[],establishedYear:F.established_year||"",gstNumber:F.gst_number||"",panNumber:F.pan_number||"",address:F.business_address||"",city:F.city||"",state:F.state||"",pincode:F.pincode||"",landmark:F.landmark||"",deliveryRadius:((C=F.delivery_radius)==null?void 0:C.toString())||"5",minOrderAmount:((z=F.min_order_amount)==null?void 0:z.toString())||"200",deliveryFee:((P=F.delivery_fee)==null?void 0:P.toString())||"50",freeDeliveryAbove:((O=F.free_delivery_above)==null?void 0:O.toString())||"500",estimatedDeliveryTime:F.estimated_delivery_time||"30-45",isOpen:F.is_active||!1,openingHours:{monday:{open:F.monday_open||"06:00",close:F.monday_close||"21:00",closed:F.monday_closed||!1},tuesday:{open:F.tuesday_open||"06:00",close:F.tuesday_close||"21:00",closed:F.tuesday_closed||!1},wednesday:{open:F.wednesday_open||"06:00",close:F.wednesday_close||"21:00",closed:F.wednesday_closed||!1},thursday:{open:F.thursday_open||"06:00",close:F.thursday_close||"21:00",closed:F.thursday_closed||!1},friday:{open:F.friday_open||"06:00",close:F.friday_close||"21:00",closed:F.friday_closed||!1},saturday:{open:F.saturday_open||"06:00",close:F.saturday_close||"21:00",closed:F.saturday_closed||!1},sunday:{open:F.sunday_open||"07:00",close:F.sunday_close||"20:00",closed:F.sunday_closed||!1}},bankName:F.bank_name||"",accountNumber:F.account_number||"",ifscCode:F.ifsc_code||"",accountHolderName:F.account_holder_name||"",upiId:F.upi_id||"",businessLicense:F.business_license_file_url||F.business_license_file||"",gstCertificate:F.gst_certificate_url||F.gst_certificate||"",fssaiLicense:F.fssai_license_url||F.fssai_license||"",autoAcceptOrders:F.auto_accept_orders||!1,notificationSettings:{orderAlerts:!0,messageAlerts:!0,promotionalEmails:!1}})}else i(!0);else throw new Error("Failed to fetch vendor profile")}catch(Y){console.error("Error fetching vendor profile:",Y),u("Failed to load vendor profile")}finally{h(!1)}},$=async()=>{var C,z,P;try{if(!localStorage.getItem("token"))return;const Y={business_name:y.businessName,owner_name:y.ownerName,business_email:y.email,business_phone:y.phone,business_type:y.businessType,description:y.description,categories:y.categories,established_year:y.establishedYear,gst_number:y.gstNumber,pan_number:y.panNumber,business_address:y.address,city:y.city,state:y.state,pincode:y.pincode,landmark:y.landmark,delivery_radius:parseFloat(y.deliveryRadius),min_order_amount:parseFloat(y.minOrderAmount),delivery_fee:parseFloat(y.deliveryFee),free_delivery_above:parseFloat(y.freeDeliveryAbove),estimated_delivery_time:y.estimatedDeliveryTime,is_active:y.isOpen,monday_open:y.openingHours.monday.open,monday_close:y.openingHours.monday.close,monday_closed:y.openingHours.monday.closed,tuesday_open:y.openingHours.tuesday.open,tuesday_close:y.openingHours.tuesday.close,tuesday_closed:y.openingHours.tuesday.closed,wednesday_open:y.openingHours.wednesday.open,wednesday_close:y.openingHours.wednesday.close,wednesday_closed:y.openingHours.wednesday.closed,thursday_open:y.openingHours.thursday.open,thursday_close:y.openingHours.thursday.close,thursday_closed:y.openingHours.thursday.closed,friday_open:y.openingHours.friday.open,friday_close:y.openingHours.friday.close,friday_closed:y.openingHours.friday.closed,saturday_open:y.openingHours.saturday.open,saturday_close:y.openingHours.saturday.close,saturday_closed:y.openingHours.saturday.closed,sunday_open:y.openingHours.sunday.open,sunday_close:y.openingHours.sunday.close,sunday_closed:y.openingHours.sunday.closed,bank_name:y.bankName,account_number:y.accountNumber,ifsc_code:y.ifscCode,account_holder_name:y.accountHolderName,upi_id:y.upiId,auto_accept_orders:y.autoAcceptOrders},J=a?null:(P=(z=(C=(await Re("/vendor-profiles/")).data)==null?void 0:C.results)==null?void 0:z[0])==null?void 0:P.id,G=a?"/vendor-profiles/":`/vendor-profiles/${J}/`,F=a?"POST":"PATCH",{response:I}=await Re(G,{method:F,body:JSON.stringify(Y)});if(I.ok)r(!1),i(!1),alert("Profile saved successfully!");else throw new Error("Failed to save profile")}catch(O){console.error("Error saving profile:",O),alert("Failed to save profile. Please try again.")}},M=async(C,z)=>{var O,Y,J;if(!C)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(C.type)){alert("Please upload only PDF, JPG, JPEG, or PNG files.");return}if(C.size>5*1024*1024){alert("File size must be less than 5MB.");return}c(z);try{const G=new FormData;G.append(z,C);const I=(J=(Y=(O=(await Re("/vendor-profiles/")).data)==null?void 0:O.results)==null?void 0:Y[0])==null?void 0:J.id;if(!I)throw new Error("Vendor profile not found");const{response:V,data:H}=await Re(`/vendor-profiles/${I}/`,{method:"PATCH",body:G});if(!V.ok)throw new Error("Upload failed");const U=H[`${z}_url`]||H[z];E(z,U),alert("Document uploaded successfully!"),await R()}catch(G){console.error("Upload error:",G),alert("Failed to upload document. Please try again.")}finally{c(null)}},A=[{id:"basic",label:"Basic Info",icon:Vr},{id:"business",label:"Business",icon:Nn},{id:"location",label:"Location",icon:Gt},{id:"operations",label:"Operations",icon:Mt},{id:"timing",label:"Timing",icon:Wr},{id:"banking",label:"Banking",icon:lo},{id:"documents",label:"Documents",icon:xa},{id:"debug",label:"Debug",icon:Wn},{id:"settings",label:"Settings",icon:Wn}];return d?s.jsx(Xt,{title:"Profile Management",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):m?s.jsx(Xt,{title:"Profile Management",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:m}),s.jsx(ie,{onClick:R,children:"Retry"})]})})}):s.jsx(Xt,{title:"Profile Management",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",className:"p-2",children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-semibold text-lg",children:"Profile Management"}),a&&s.jsx("p",{className:"text-sm text-gray-600",children:"Complete your profile setup"})]})]}),s.jsx(ie,{onClick:()=>n?$():r(!0),className:"bg-green-600 hover:bg-green-700",children:n?s.jsxs(s.Fragment,{children:[s.jsx(Wc,{className:"h-4 w-4 mr-2"}),"Save"]}):s.jsxs(s.Fragment,{children:[s.jsx(lh,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),s.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl",children:y.avatar}),n&&s.jsx(ie,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full p-0",children:s.jsx(ja,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"font-semibold text-lg",children:y.businessName}),s.jsx("p",{className:"text-gray-600 text-sm",children:y.ownerName}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Fe,{variant:y.isOpen?"default":"destructive",className:"text-xs",children:y.isOpen?"Open":"Closed"}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(js,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:"4.8 (342 reviews)"})]})]})]})]})}),s.jsx("div",{className:"bg-white",children:s.jsxs(Ia,{value:e,onValueChange:t,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(Qr,{className:"grid grid-cols-4 lg:grid-cols-9 w-full min-w-max",children:A.map(C=>s.jsxs(Ot,{value:C.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(C.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:C.label})]},C.id))})}),s.jsx(xt,{value:"basic",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"businessName",children:"Business Name *"}),s.jsx(je,{id:"businessName",value:y.businessName,onChange:C=>E("businessName",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"ownerName",children:"Owner Name *"}),s.jsx(je,{id:"ownerName",value:y.ownerName,onChange:C=>E("ownerName",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"email",children:"Email *"}),s.jsx(je,{id:"email",type:"email",value:y.email,onChange:C=>E("email",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"phone",children:"Phone Number *"}),s.jsx(je,{id:"phone",value:y.phone,onChange:C=>E("phone",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"whatsapp",children:"WhatsApp Number"}),s.jsx(je,{id:"whatsapp",value:y.whatsapp,onChange:C=>E("whatsapp",C.target.value),disabled:!n})]})]})}),s.jsxs(xt,{value:"business",className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"businessType",children:"Business Type *"}),s.jsxs(qt,{value:y.businessType,onValueChange:C=>E("businessType",C),disabled:!n,children:[s.jsx(Bt,{children:s.jsx(Ht,{})}),s.jsx(Vt,{children:b.map(C=>s.jsx(We,{value:C.value,children:C.label},C.value))})]})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"establishedYear",children:"Established Year"}),s.jsx(je,{id:"establishedYear",value:y.establishedYear,onChange:C=>E("establishedYear",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"gstNumber",children:"GST Number"}),s.jsx(je,{id:"gstNumber",value:y.gstNumber,onChange:C=>E("gstNumber",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"panNumber",children:"PAN Number"}),s.jsx(je,{id:"panNumber",value:y.panNumber,onChange:C=>E("panNumber",C.target.value),disabled:!n})]})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"description",children:"Business Description *"}),s.jsx(Ws,{id:"description",value:y.description,onChange:C=>E("description",C.target.value),disabled:!n,rows:3})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Categories"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[y.categories.map(C=>s.jsxs(Fe,{variant:"default",className:"cursor-pointer",onClick:()=>{if(!n)return;const z=y.categories.filter(P=>P!==C);E("categories",z)},children:[C," ",n&&""]},C)),_.filter(C=>!y.categories.includes(C)).map(C=>s.jsx(Fe,{variant:"outline",className:"cursor-pointer",onClick:()=>{if(!n)return;const z=[...y.categories,C];E("categories",z)},children:C},C))]}),y.categories.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"No categories selected"})]})]}),s.jsx(xt,{value:"location",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(xe,{htmlFor:"address",children:"Full Address *"}),s.jsx(Ws,{id:"address",value:y.address,onChange:C=>E("address",C.target.value),disabled:!n,rows:2})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"city",children:"City *"}),s.jsx(je,{id:"city",value:y.city,onChange:C=>E("city",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"state",children:"State *"}),s.jsx(je,{id:"state",value:y.state,onChange:C=>E("state",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"pincode",children:"Pincode *"}),s.jsx(je,{id:"pincode",value:y.pincode,onChange:C=>E("pincode",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"landmark",children:"Landmark"}),s.jsx(je,{id:"landmark",value:y.landmark,onChange:C=>E("landmark",C.target.value),disabled:!n})]})]})}),s.jsx(xt,{value:"operations",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"deliveryRadius",children:"Delivery Radius (km) *"}),s.jsx(je,{id:"deliveryRadius",value:y.deliveryRadius,onChange:C=>E("deliveryRadius",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"minOrderAmount",children:"Minimum Order Amount () *"}),s.jsx(je,{id:"minOrderAmount",value:y.minOrderAmount,onChange:C=>E("minOrderAmount",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"deliveryFee",children:"Delivery Fee () *"}),s.jsx(je,{id:"deliveryFee",value:y.deliveryFee,onChange:C=>E("deliveryFee",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"freeDeliveryAbove",children:"Free Delivery Above ()"}),s.jsx(je,{id:"freeDeliveryAbove",value:y.freeDeliveryAbove,onChange:C=>E("freeDeliveryAbove",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"estimatedDeliveryTime",children:"Estimated Delivery Time (mins) *"}),s.jsx(je,{id:"estimatedDeliveryTime",value:y.estimatedDeliveryTime,onChange:C=>E("estimatedDeliveryTime",C.target.value),disabled:!n})]})]})}),s.jsxs(xt,{value:"timing",className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(xe,{children:"Store Status"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm",children:"Closed"}),s.jsx($t,{checked:y.isOpen,onCheckedChange:C=>E("isOpen",C),disabled:!n}),s.jsx("span",{className:"text-sm",children:"Open"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(xe,{children:"Opening Hours"}),k.map(C=>s.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg",children:[s.jsx("div",{className:"w-20 text-sm font-medium capitalize",children:C}),s.jsx($t,{checked:!y.openingHours[C].closed,onCheckedChange:z=>T("openingHours",C,{...y.openingHours[C],closed:!z}),disabled:!n}),!y.openingHours[C].closed&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(je,{type:"time",value:y.openingHours[C].open,onChange:z=>T("openingHours",C,{...y.openingHours[C],open:z.target.value}),disabled:!n,className:"w-32"}),s.jsx("span",{className:"text-sm",children:"to"}),s.jsx(je,{type:"time",value:y.openingHours[C].close,onChange:z=>T("openingHours",C,{...y.openingHours[C],close:z.target.value}),disabled:!n,className:"w-32"})]}),y.openingHours[C].closed&&s.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},C))]})]}),s.jsx(xt,{value:"banking",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"bankName",children:"Bank Name *"}),s.jsx(je,{id:"bankName",value:y.bankName,onChange:C=>E("bankName",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"accountHolderName",children:"Account Holder Name *"}),s.jsx(je,{id:"accountHolderName",value:y.accountHolderName,onChange:C=>E("accountHolderName",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"accountNumber",children:"Account Number *"}),s.jsx(je,{id:"accountNumber",value:y.accountNumber,onChange:C=>E("accountNumber",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"ifscCode",children:"IFSC Code *"}),s.jsx(je,{id:"ifscCode",value:y.ifscCode,onChange:C=>E("ifscCode",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"upiId",children:"UPI ID"}),s.jsx(je,{id:"upiId",value:y.upiId,onChange:C=>E("upiId",C.target.value),disabled:!n})]})]})}),s.jsxs(xt,{value:"documents",className:"p-4 space-y-4",children:[y.businessName&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Uploaded Documents"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Additional Documents (",f.length,")"]}),s.jsx("div",{className:"space-y-2",children:f.length>0?f.map((C,z)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("span",{className:"text-sm",children:["Document ",z+1]}),s.jsx("a",{href:C.document_url||C.document,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-sm hover:underline",children:"View"})]},C.id||z)):s.jsx("p",{className:"text-sm text-gray-600",children:"No additional documents uploaded"})})]}),s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Shop Images (",x.length,")"]}),s.jsx("div",{className:"space-y-2",children:x.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-2",children:x.map((C,z)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:C.image_url||C.image,alt:`Shop ${z+1}`,className:"w-full h-20 object-cover rounded border",onError:P=>{P.currentTarget.style.display="none"}}),C.is_primary&&s.jsx(Fe,{className:"absolute top-1 left-1 text-xs",children:"Primary"})]},C.id||z))}):s.jsx("p",{className:"text-sm text-gray-600",children:"No shop images uploaded"})})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-base font-medium",children:"Business License"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload your business registration certificate"})]}),s.jsx(Fe,{variant:y.businessLicense?"default":"outline",children:y.businessLicense?"Uploaded":"Required"})]}),y.businessLicense?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"Business License Document"}),n&&s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=z=>{var O;const P=(O=z.target.files)==null?void 0:O[0];P&&M(P,"business_license_file")},C.click()},disabled:o==="business_license_file",children:o==="business_license_file"?"Uploading...":"Replace"})]}):s.jsxs(ie,{variant:"outline",className:"w-full",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=z=>{var O;const P=(O=z.target.files)==null?void 0:O[0];P&&M(P,"business_license_file")},C.click()},disabled:o==="business_license_file",children:[s.jsx(xa,{className:"h-4 w-4 mr-2"}),o==="business_license_file"?"Uploading...":"Upload Business License"]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-base font-medium",children:"GST Certificate"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload your GST registration certificate"})]}),s.jsx(Fe,{variant:y.gstCertificate?"default":"outline",children:y.gstCertificate?"Uploaded":"Optional"})]}),y.gstCertificate?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"GST Certificate Document"}),n&&s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=z=>{var O;const P=(O=z.target.files)==null?void 0:O[0];P&&M(P,"gst_certificate")},C.click()},disabled:o==="gst_certificate",children:o==="gst_certificate"?"Uploading...":"Replace"})]}):s.jsxs(ie,{variant:"outline",className:"w-full",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=z=>{var O;const P=(O=z.target.files)==null?void 0:O[0];P&&M(P,"gst_certificate")},C.click()},disabled:o==="gst_certificate",children:[s.jsx(xa,{className:"h-4 w-4 mr-2"}),o==="gst_certificate"?"Uploading...":"Upload GST Certificate"]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-base font-medium",children:"FSSAI License"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload your food safety license (for food businesses)"})]}),s.jsx(Fe,{variant:y.fssaiLicense?"default":"outline",children:y.fssaiLicense?"Uploaded":"Optional"})]}),y.fssaiLicense?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"FSSAI License Document"}),n&&s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=z=>{var O;const P=(O=z.target.files)==null?void 0:O[0];P&&M(P,"fssai_license")},C.click()},disabled:o==="fssai_license",children:o==="fssai_license"?"Uploading...":"Replace"})]}):s.jsxs(ie,{variant:"outline",className:"w-full",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=z=>{var O;const P=(O=z.target.files)==null?void 0:O[0];P&&M(P,"fssai_license")},C.click()},disabled:o==="fssai_license",children:[s.jsx(xa,{className:"h-4 w-4 mr-2"}),o==="fssai_license"?"Uploading...":"Upload FSSAI License"]})]}),s.jsx("div",{className:"text-center py-2 text-gray-500 text-xs",children:"Supported formats: PDF, JPG, JPEG, PNG (Max 5MB)"})]})]}),s.jsx(xt,{value:"debug",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"API Response Debug"}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-lg overflow-auto max-h-96",children:s.jsx("pre",{className:"text-xs",children:JSON.stringify({documents:f,shopImages:x,categories:y.categories,availableCategories:_},null,2)})})]})}),s.jsx(xt,{value:"settings",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Auto Accept Orders"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Automatically accept new orders"})]}),s.jsx($t,{checked:y.autoAcceptOrders,onCheckedChange:C=>E("autoAcceptOrders",C),disabled:!n})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(xe,{children:"Notification Settings"}),s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Order Alerts"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified for new orders"})]}),s.jsx($t,{checked:y.notificationSettings.orderAlerts,onCheckedChange:C=>T("notificationSettings","orderAlerts",C),disabled:!n})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Message Alerts"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified for new messages"})]}),s.jsx($t,{checked:y.notificationSettings.messageAlerts,onCheckedChange:C=>T("notificationSettings","messageAlerts",C),disabled:!n})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Promotional Emails"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive promotional emails"})]}),s.jsx($t,{checked:y.notificationSettings.promotionalEmails,onCheckedChange:C=>T("notificationSettings","promotionalEmails",C),disabled:!n})]})]})]})})]})}),a&&s.jsxs("div",{className:"fixed bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-lg p-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Profile Completion"}),s.jsx("span",{className:"text-sm text-gray-600",children:"6/8 sections"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"75%"}})}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Complete all sections to activate your store"})]})]})})},Jne=()=>{const e=nt(),[t,n]=j.useState(!0),[r,a]=j.useState(""),[i,o]=j.useState(!1),[c,d]=j.useState(""),[h,m]=j.useState(!1);j.useEffect(()=>{(async()=>{var p;try{if(!await Se.isAuthenticated())return;const v=1,{response:y,data:w}=await Re(`/vendor-profiles/${v}/`);if(!y.ok)throw new Error("Failed to fetch profile");const b=((p=w==null?void 0:w.user_info)==null?void 0:p.plain_password)||"";a(b)}catch(x){console.error(x)}})()},[]);const u=async()=>{if(!c){au.error("New password is required");return}m(!0);try{const{simplePersistentAuth:f}=await ze(async()=>{const{simplePersistentAuth:w}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:w}},[]);if(!await f.isVendorLoggedIn()){e("/vendor/login");return}const x=await f.getVendorAuth();x&&await Se.setAuth(x.token,x.user);const{response:v,data:y}=await Re("/change-password/simple/",{method:"POST",body:JSON.stringify({new_password:c})});if(!v.ok)throw new Error(y.error||"Failed to change password");await Se.setAuth(y.token,await Se.getUser()),au.success("Password changed successfully"),a(c),d(""),o(!1)}catch(f){au.error(f instanceof Error?f.message:"Failed to change password")}finally{m(!1)}};return s.jsx(Xt,{title:"Security & Login",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center gap-3 p-4",children:[s.jsx(ie,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Security & Login"})]})}),s.jsx("div",{className:"p-4 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Wn,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"font-semibold",children:"Password"})]}),i?s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{children:"New Password"}),s.jsx(je,{type:"text",value:c,onChange:f=>d(f.target.value)}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ie,{onClick:u,disabled:h,children:"Save"}),s.jsx(ie,{variant:"outline",onClick:()=>o(!1),disabled:h,children:"Cancel"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{children:"Your Password"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(je,{type:"text",value:r,disabled:!0,className:"bg-gray-100"}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>n(!t),children:t?s.jsx(xb,{className:"h-4 w-4"}):s.jsx(Ps,{className:"h-4 w-4"})})]}),s.jsx(ie,{onClick:()=>o(!0),disabled:h,children:"Change Password"})]})]})})]})})},Qne=()=>{const e=nt(),{toast:t}=es(),[n,r]=j.useState("business"),[a,i]=j.useState(!1),[o,c]=j.useState(!0),[d,h]=j.useState(!1),[m,u]=j.useState(""),[f,p]=j.useState(null),[x,v]=j.useState([]),[y,w]=j.useState({businessName:"Business Name",ownerName:"Owner Name",categories:[],operatingHours:{monday:{open:"06:00",close:"21:00",closed:!1},tuesday:{open:"06:00",close:"21:00",closed:!1},wednesday:{open:"06:00",close:"21:00",closed:!1},thursday:{open:"06:00",close:"21:00",closed:!1},friday:{open:"06:00",close:"21:00",closed:!1},saturday:{open:"06:00",close:"21:00",closed:!1},sunday:{open:"07:00",close:"20:00",closed:!1}},deliverySettings:{deliveryRadius:"5",minOrderAmount:"200"},profileImage:null,isActive:!1,statusOverride:!1}),b=A=>{if(!A)return"";const[C,z]=A.split(":").map(Number),P=C>=12?"PM":"AM";return`${C%12||12}:${z.toString().padStart(2,"0")} ${P}`};j.useEffect(()=>{N(),_()},[]);const _=async()=>{try{const{response:A,data:C}=await Re("/categories/");A.ok&&C.categories&&v(C.categories.map(z=>z.name))}catch(A){console.error("Failed to fetch categories:",A)}},N=async()=>{var A,C,z;try{const{simplePersistentAuth:P}=await ze(async()=>{const{simplePersistentAuth:F}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:F}},[]);if(!await P.isVendorLoggedIn()){e("/vendor/login");return}const Y=await P.getVendorAuth();Y&&await Se.setAuth(Y.token,Y.user);const{response:J,data:G}=await Re("/vendor-profiles/");if(!J.ok)throw new Error("Failed to fetch company data");if(G.results&&G.results.length>0){const F=G.results[0];p(F.id),w({businessName:F.business_name||"Business Name",ownerName:F.owner_name||"Owner Name",categories:Array.isArray(F.categories)?F.categories:typeof F.categories=="string"?JSON.parse(F.categories||"[]"):[],operatingHours:{monday:{open:F.monday_open||"",close:F.monday_close||"",closed:F.monday_closed||!1},tuesday:{open:F.tuesday_open||"",close:F.tuesday_close||"",closed:F.tuesday_closed||!1},wednesday:{open:F.wednesday_open||"",close:F.wednesday_close||"",closed:F.wednesday_closed||!1},thursday:{open:F.thursday_open||"",close:F.thursday_close||"",closed:F.thursday_closed||!1},friday:{open:F.friday_open||"",close:F.friday_close||"",closed:F.friday_closed||!1},saturday:{open:F.saturday_open||"",close:F.saturday_close||"",closed:F.saturday_closed||!1},sunday:{open:F.sunday_open||"",close:F.sunday_close||"",closed:F.sunday_closed||!1}},deliverySettings:{deliveryRadius:((A=F.delivery_radius)==null?void 0:A.toString())||"5",minOrderAmount:((C=F.min_order_amount)==null?void 0:C.toString())||"200"},profileImage:((z=F.user_info)==null?void 0:z.profile_picture)||null,isActive:F.is_active||!1,statusOverride:F.status_override||!1})}}catch(P){console.error("Error fetching company data:",P),u("Failed to load company data")}finally{c(!1)}},k=async()=>{try{h(!0);const{simplePersistentAuth:A}=await ze(async()=>{const{simplePersistentAuth:O}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:O}},[]);if(!await A.isVendorLoggedIn()){e("/vendor/login");return}if(!f)throw new Error("Profile ID not found");const z=new FormData;z.append("business_name",y.businessName),z.append("owner_name",y.ownerName),z.append("categories",JSON.stringify(y.categories)),z.append("delivery_radius",y.deliverySettings.deliveryRadius),z.append("min_order_amount",y.deliverySettings.minOrderAmount);const{response:P}=await Re(`/vendor-profiles/${f}/`,{method:"PUT",body:z});if(!P.ok){const O=await P.json();throw new Error(O.detail||"Failed to update company data")}t({title:"Success",description:"Company information updated successfully!"}),i(!1),N()}catch(A){console.error("Error saving company data:",A),t({title:"Error",description:A instanceof Error?A.message:"Failed to save company data",variant:"destructive"})}finally{h(!1)}},E=async()=>{try{const{simplePersistentAuth:A}=await ze(async()=>{const{simplePersistentAuth:Y}=await import("./simplePersistentAuth-l-Z-r5cU.js");return{simplePersistentAuth:Y}},[]);if(!await A.isVendorLoggedIn()){e("/vendor/login");return}if(!f)throw new Error("Profile ID not found");const z=!y.isActive,{response:P,data:O}=await Re(`/vendor-profiles/${f}/toggle-status/`,{method:"POST",body:JSON.stringify({is_active:z})});if(!P.ok)throw new Error((O==null?void 0:O.error)||"Failed to toggle status");w(Y=>({...Y,isActive:O.vendor.is_active,statusOverride:O.vendor.status_override})),t({title:"Success",description:`Status set to ${z?"Active":"Inactive"}`})}catch(A){console.error("Error toggling status:",A),t({title:"Error",description:A instanceof Error?A.message:"Failed to toggle status",variant:"destructive"})}},T=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],R=[{id:"business",label:"Business Details",icon:Nn},{id:"timing",label:"Timing",icon:Wr}],$=(A,C)=>{w(z=>({...z,[A]:C}))},M=(A,C,z)=>{w(P=>({...P,[A]:{...P[A],[C]:z}}))};return o?s.jsx(Xt,{title:"Company Information",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading company information..."})]})})}):m?s.jsx(Xt,{title:"Company Information",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:m}),s.jsx(ie,{onClick:N,children:"Retry"})]})})}):s.jsx(Xt,{title:"Company Information",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsx("div",{children:s.jsx("h1",{className:"font-semibold text-lg",children:"Company Information"})})]}),s.jsx(ie,{onClick:()=>a?k():i(!0),disabled:d,className:"bg-green-600 hover:bg-green-700",children:d?"Saving...":a?"Save Changes":"Edit"})]})}),s.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"relative",children:y.profileImage?s.jsx("img",{src:y.profileImage||"/images/default-profile.png",alt:"Business Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200",onError:A=>{console.error("Image failed to load:",A.currentTarget.src),A.currentTarget.src="/images/default-profile.png"}}):s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl border-2 border-gray-200",children:""})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"font-semibold text-lg",children:y.businessName}),s.jsx("p",{className:"text-gray-600 text-sm",children:y.ownerName}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(xe,{children:"Status:"}),s.jsx($t,{checked:y.isActive,onCheckedChange:E,disabled:!a}),s.jsxs("span",{className:"text-sm",children:[y.isActive?"Active":"Inactive",y.statusOverride&&" (Overridden)"]})]})]})]})}),s.jsx("div",{className:"bg-white",children:s.jsxs(Ia,{value:n,onValueChange:r,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(Qr,{className:"grid grid-cols-2 w-full min-w-max",children:R.map(A=>s.jsxs(Ot,{value:A.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(A.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:A.label})]},A.id))})}),s.jsxs(xt,{value:"business",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"space-y-4 max-w-3xl",children:[s.jsx(xe,{children:"Business Categories"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:x.map(A=>s.jsx(Fe,{variant:y.categories.includes(A)?"default":"outline",className:"cursor-pointer",onClick:()=>{if(!a)return;const C=y.categories.includes(A)?y.categories.filter(z=>z!==A):[...y.categories,A];$("categories",C)},children:A},A))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Delivery Radius (km) *"}),s.jsx(je,{value:y.deliverySettings.deliveryRadius,onChange:A=>M("deliverySettings","deliveryRadius",A.target.value),disabled:!a,className:"max-w-xs"})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Minimum Order Amount () *"}),s.jsx(je,{value:y.deliverySettings.minOrderAmount,onChange:A=>M("deliverySettings","minOrderAmount",A.target.value),disabled:!a,className:"max-w-xs"})]})]})]}),s.jsx(xt,{value:"timing",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-3 max-w-3xl",children:[s.jsx(xe,{children:"Operating Hours"}),T.map(A=>s.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg flex-wrap",children:[s.jsx("div",{className:"w-20 text-sm font-medium capitalize",children:A}),s.jsx($t,{checked:!y.operatingHours[A].closed,onCheckedChange:C=>M("operatingHours",A,{...y.operatingHours[A],closed:!C}),disabled:!a}),!y.operatingHours[A].closed&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(je,{type:"time",value:b(y.operatingHours[A].open),onChange:C=>M("operatingHours",A,{...y.operatingHours[A],open:C.target.value}),disabled:!a,className:"w-32"}),s.jsx("span",{className:"text-sm",children:"to"}),s.jsx(je,{type:"time",value:b(y.operatingHours[A].close),onChange:C=>M("operatingHours",A,{...y.operatingHours[A],close:C.target.value}),disabled:!a,className:"w-32"})]}),y.operatingHours[A].closed&&s.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},A))]})})]})})]})})},ere=()=>{const[e,t]=j.useState(""),[n,r]=j.useState(!1),[a,i]=j.useState(null),[o,c]=j.useState([]),[d,h]=j.useState(!0),[m,u]=j.useState(!1),[f,p]=j.useState({}),[x,v]=j.useState([]),[y,w]=j.useState([]),[b,_]=j.useState([]),[N,k]=j.useState([]),[E,T]=j.useState([]),[R,$]=j.useState([]),[M,A]=j.useState(!1),[C,z]=j.useState(!1),[P,O]=j.useState(null),[Y,J]=j.useState([]),[G,F]=j.useState(null),[I,V]=j.useState(new Date().toISOString().split("T")[0]),[H,U]=j.useState(!1),[q,K]=j.useState(!1),B=nt(),[W,oe]=j.useState({category:"all",status:"all",stock:"all",sortBy:"name"});j.useEffect(()=>{be(),X()},[]),j.useEffect(()=>{m&&a&&(a.category&&ue(a.category),a.subcategory&&me(a.subcategory))},[m,a]);const X=async()=>{var ce;try{const{apiRequest:Te}=await ze(async()=>{const{apiRequest:mt}=await Promise.resolve().then(()=>os);return{apiRequest:mt}},void 0),{data:Ue}=await Te("/categories/");_(((ce=Ue.categories)==null?void 0:ce.map(mt=>mt.name))||[])}catch(Te){console.error("Failed to fetch categories:",Te)}},re=async ce=>{try{const{apiRequest:Te}=await ze(async()=>{const{apiRequest:ht}=await Promise.resolve().then(()=>os);return{apiRequest:ht}},void 0),{data:Ue}=await Te(`/categories/${ce}/subcategories/`),Ie=(Ue.subcategories||[]).map((ht,gs)=>typeof ht=="string"?{id:gs+1,name:ht}:ht);k(Ie)}catch(Te){console.error("Failed to fetch subcategories:",Te),k([])}},ue=async ce=>{var Te;try{const{apiRequest:Ue}=await ze(async()=>{const{apiRequest:ht}=await Promise.resolve().then(()=>os);return{apiRequest:ht}},void 0),{data:mt}=await Ue("/categories/"),Ie=(Te=mt.categories)==null?void 0:Te.find(ht=>ht.name===ce);if(Ie!=null&&Ie.id){const{data:ht}=await Ue(`/accounts/categories/parameters/?target_id=${Ie.id}&target_type=category`);T(ht.parameters||[])}else T([])}catch(Ue){console.error("Failed to fetch category parameters:",Ue),T([])}},me=async ce=>{var Te;try{const{apiRequest:Ue}=await ze(async()=>{const{apiRequest:gs}=await Promise.resolve().then(()=>os);return{apiRequest:gs}},void 0),mt=f.category||(a==null?void 0:a.category);if(!mt)return;const{data:Ie}=await Ue(`/categories/${mt}/subcategories/`),ht=(Te=Ie.subcategories)==null?void 0:Te.indexOf(ce);if(ht!==-1){const gs=ht+1,{data:Os}=await Ue(`/accounts/categories/parameters/?target_id=${gs}&target_type=subcategory`);$(Os.parameters||[])}else $([])}catch(Ue){console.error("Failed to fetch subcategory parameters:",Ue),$([])}},we=async()=>{try{const{apiRequest:ce}=await ze(async()=>{const{apiRequest:Ue}=await Promise.resolve().then(()=>os);return{apiRequest:Ue}},void 0),{data:Te}=await ce("/featured-packages/");J(Te.packages||[])}catch(ce){console.error("Failed to fetch featured packages:",ce),J([])}},be=async()=>{try{h(!0);const ce=await El.getProducts(),Te=(ce==null?void 0:ce.results)||ce||[];c(Array.isArray(Te)?Te:[])}catch(ce){console.error("Failed to fetch products:",ce),c([])}finally{h(!1)}},ae=async(ce,Te)=>{try{await El.updateProduct(ce,Te),await be()}catch(Ue){console.error("Failed to update product:",Ue)}},ee=async ce=>{if(window.confirm("Are you sure you want to delete this product?"))try{await El.deleteProduct(ce),await be(),i(null)}catch(Te){console.error("Failed to delete product:",Te)}},ye=async ce=>{if(ce.featured)try{const{apiRequest:Te}=await ze(async()=>{const{apiRequest:mt}=await Promise.resolve().then(()=>os);return{apiRequest:mt}},void 0),{data:Ue}=await Te(`/products/${ce.id}/featured-info/`);if(!Ue.can_modify){en.error("Cannot Cancel Featured",{description:"Featured period has already started and cannot be cancelled.",duration:4e3});return}O(ce),z(!0)}catch(Te){console.error("Failed to check featured info:",Te)}else O(ce),await we(),A(!0)},le=ce=>{F(ce)},de=async()=>{if(P)try{K(!0);const{apiRequest:ce}=await ze(async()=>{const{apiRequest:mt}=await Promise.resolve().then(()=>os);return{apiRequest:mt}},void 0),{response:Te,data:Ue}=await ce(`/products/${P.id}/reschedule-featured/`,{method:"POST",body:JSON.stringify({start_date:I})});if(!Te.ok)throw new Error(Ue.error||"Failed to reschedule");await be(),z(!1),O(null),V(new Date().toISOString().split("T")[0]),en.success("Featured Package Rescheduled!",{description:`Start date updated to ${new Date(I).toLocaleDateString()}`,duration:4e3})}catch(ce){console.error("Failed to reschedule featured package:",ce),en.error("Reschedule Failed",{description:ce.message||"Failed to reschedule package",duration:4e3})}finally{K(!1)}},Q=async()=>{if(!(!P||!G))try{U(!0);const{apiRequest:ce}=await ze(async()=>{const{apiRequest:mt}=await Promise.resolve().then(()=>os);return{apiRequest:mt}},void 0),{response:Te,data:Ue}=await ce("/featured-packages/purchase/",{method:"POST",body:JSON.stringify({product_id:P.id,package_id:G.id,start_date:I})});if(!Te.ok)throw new Error(Ue.error||"Failed to purchase package");await be(),A(!1),O(null),F(null),V(new Date().toISOString().split("T")[0]),en.success("Featured Package Purchased!",{description:`${P.name} is now featured until ${new Date(Ue.end_date).toLocaleDateString()}. Wallet balance: ${Ue.new_wallet_balance}`,duration:5e3})}catch(ce){console.error("Failed to purchase featured package:",ce),en.error("Purchase Failed",{description:ce.message||"Failed to purchase package",duration:4e3})}finally{U(!1)}},se=async()=>{if(a!=null&&a.id&&f)try{const ce={...f};x.length>0&&(ce.image_files=x),await ae(a.id,ce),u(!1),p({}),v([]),w([]),i(null)}catch(ce){console.error("Failed to save changes:",ce)}},ne=ce=>{const Te=ce.target.files;if(Te){const Ue=Array.from(Te),mt=Ue.map(Ie=>URL.createObjectURL(Ie));v(Ie=>[...Ie,...Ue]),w(Ie=>[...Ie,...mt])}},ve=ce=>{URL.revokeObjectURL(y[ce]),v(Te=>Te.filter((Ue,mt)=>mt!==ce)),w(Te=>Te.filter((Ue,mt)=>mt!==ce))},pe=async ce=>{if(a!=null&&a.id)try{const{apiRequest:Te}=await ze(async()=>{const{apiRequest:mt}=await Promise.resolve().then(()=>os);return{apiRequest:mt}},void 0);await Te(`/products/${a.id}/images/${ce}/`,{method:"DELETE"}),await be();const Ue=await El.getProduct(a.id);i(Ue)}catch(Te){console.error("Failed to delete image:",Te)}},ge=async ce=>{if(a!=null&&a.id)try{const{apiRequest:Te}=await ze(async()=>{const{apiRequest:mt}=await Promise.resolve().then(()=>os);return{apiRequest:mt}},void 0);await Te(`/products/${a.id}/images/${ce}/set-primary/`,{method:"POST"}),await be();const Ue=await El.getProduct(a.id);i(Ue)}catch(Te){console.error("Failed to set primary image:",Te)}},ke=Array.isArray(o)?o.filter(ce=>{const Te=ce.name.toLowerCase().includes(e.toLowerCase())||ce.sku&&ce.sku.toLowerCase().includes(e.toLowerCase()),Ue=W.category==="all"||ce.category===W.category,mt=W.status==="all"||ce.status===W.status,Ie=W.stock==="all"||W.stock==="low"&&ce.quantity<=5&&ce.quantity>0||W.stock==="out"&&ce.quantity===0||W.stock==="available"&&ce.quantity>0;return Te&&Ue&&mt&&Ie}).sort((ce,Te)=>{switch(W.sortBy){case"price":return Te.price-ce.price;case"stock":return Te.quantity-ce.quantity;default:return ce.name.localeCompare(Te.name)}}):[],Be=ce=>{switch(ce){case"active":return s.jsx("span",{className:"text-xs font-medium text-green-600",children:"Active"});case"draft":return s.jsx("span",{className:"text-xs font-medium text-yellow-600",children:"Draft"});case"archived":return s.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Archived"});default:return s.jsx("span",{className:"text-xs font-medium text-gray-600",children:ce})}},qe=ce=>ce===0?s.jsx("span",{className:"text-xs font-medium text-red-600",children:"Out of Stock"}):ce<=5?s.jsx("span",{className:"text-xs font-medium text-orange-600",children:"Low Stock"}):s.jsx("span",{className:"text-xs font-medium text-green-600",children:"In Stock"}),gt=ce=>{if(!ce)return"";const Te=document.createElement("div");return Te.innerHTML=ce,Te.textContent||Te.innerText||""},ct=ce=>ce.images&&ce.images.length>0?(ce.images.find(Ue=>Ue.is_primary)||ce.images[0]).image_url:null,Xe=ce=>({Vegetables:"",Fruits:"",Dairy:"",Meat:"",Bakery:"",Beverages:"",Snacks:"",Grains:""})[ce]||"";return s.jsx(Xt,{title:"Product Management",children:s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsx(Ee,{className:"",children:s.jsx(Oe,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Mt,{className:"h-4 w-4 mx-auto mb-0.5 text-blue-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Total"})]})})}),s.jsx(Ee,{className:"",children:s.jsx(Oe,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Yr,{className:"h-4 w-4 mx-auto mb-0.5 text-green-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(ce=>ce.status==="active").length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Active"})]})})}),s.jsx(Ee,{className:"",children:s.jsx(Oe,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Lu,{className:"h-4 w-4 mx-auto mb-0.5 text-orange-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(ce=>ce.quantity<=5&&ce.quantity>0).length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Low"})]})})}),s.jsx(Ee,{className:"",children:s.jsx(Oe,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Lu,{className:"h-4 w-4 mx-auto mb-0.5 text-red-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(ce=>ce.quantity===0).length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Out"})]})})})]}),s.jsx(Ee,{children:s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Vo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(je,{placeholder:"Search products...",value:e,onChange:ce=>t(ce.target.value),className:"pl-10"})]}),s.jsx(ie,{variant:"outline",size:"icon",onClick:()=>r(!0),children:s.jsx(La,{className:"h-4 w-4"})})]})})}),s.jsx("div",{children:d?s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx($s,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading products..."})]}):ke.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-2",children:ke.map(ce=>s.jsx(Ee,{className:"overflow-hidden",children:s.jsx(Oe,{className:"p-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-center relative",children:[ct(ce)?s.jsx("img",{src:ct(ce),alt:ce.name,className:"w-12 h-12 mx-auto object-cover rounded"}):s.jsx("div",{className:"text-xl",children:Xe(ce.category)}),ce.featured&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white text-xs px-1 py-0.5 rounded-full font-bold shadow-md",children:"FEATURED"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:ce.name}),s.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",ce.price]}),ce.cost_price&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Cost: ",ce.cost_price]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs text-gray-600",children:["Stock: ",ce.quantity]}),qe(ce.quantity)]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600",children:ce.category}),Be(ce.status)]}),ce.subcategory&&s.jsx("div",{className:"text-xs text-gray-500 truncate",children:ce.subcategory}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Sold: ",ce.total_sold||0]}),s.jsxs("div",{className:"flex gap-1 mt-1",children:[ce.featured&&s.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1 rounded",children:""}),ce.free_delivery&&s.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1 rounded",children:" Free"}),ce.custom_delivery_fee_enabled&&ce.custom_delivery_fee&&s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-1 rounded",children:[" ",ce.custom_delivery_fee]})]})]}),s.jsxs("div",{className:"flex gap-1 pt-1",children:[s.jsx(ie,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>{i(ce),u(!1),p({})},children:s.jsx(Ps,{className:"h-3 w-3"})}),s.jsx(ie,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>{i(ce),u(!0),p({...ce,dynamic_fields:ce.dynamic_fields||{}}),ce.category&&re(ce.category)},children:s.jsx(um,{className:"h-3 w-3"})}),s.jsx(ie,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>ee(ce.id),children:s.jsx(Yi,{className:"h-3 w-3"})})]}),s.jsxs(ie,{variant:ce.featured?"default":"outline",size:"sm",className:"w-full mt-1 p-1",onClick:()=>ye(ce),children:[s.jsx(js,{className:`h-3 w-3 mr-1 ${ce.featured?"fill-current":""}`}),ce.featured?"Reschedule":"Mark Featured"]})]})})},ce.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Mt,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No products found"}),s.jsxs(ie,{className:"mt-4",onClick:()=>B("/vendor/add-product"),children:[s.jsx(Es,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})]})}),s.jsx(Vn,{open:n,onOpenChange:r,children:s.jsxs(kn,{side:"bottom",className:"h-[400px]",children:[s.jsx(Cn,{children:s.jsx(Pn,{children:"Filter Products"})}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Category"}),s.jsxs(qt,{value:W.category,onValueChange:ce=>oe({...W,category:ce}),children:[s.jsx(Bt,{children:s.jsx(Ht,{})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"all",children:"All Categories"}),Array.from(new Set((o||[]).map(ce=>ce.category))).map(ce=>s.jsx(We,{value:ce,children:ce},ce))]})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Status"}),s.jsxs(qt,{value:W.status,onValueChange:ce=>oe({...W,status:ce}),children:[s.jsx(Bt,{children:s.jsx(Ht,{})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"all",children:"All Status"}),s.jsx(We,{value:"active",children:"Active"}),s.jsx(We,{value:"draft",children:"Draft"}),s.jsx(We,{value:"archived",children:"Archived"})]})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Stock Level"}),s.jsxs(qt,{value:W.stock,onValueChange:ce=>oe({...W,stock:ce}),children:[s.jsx(Bt,{children:s.jsx(Ht,{})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"all",children:"All Stock Levels"}),s.jsx(We,{value:"available",children:"In Stock"}),s.jsx(We,{value:"low",children:"Low Stock"}),s.jsx(We,{value:"out",children:"Out of Stock"})]})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Sort By"}),s.jsxs(qt,{value:W.sortBy,onValueChange:ce=>oe({...W,sortBy:ce}),children:[s.jsx(Bt,{children:s.jsx(Ht,{})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"name",children:"Name"}),s.jsx(We,{value:"price",children:"Price"}),s.jsx(We,{value:"stock",children:"Stock"})]})]})]})]})]})}),s.jsx(Vn,{open:M,onOpenChange:ce=>{A(ce),ce||(F(null),V(new Date().toISOString().split("T")[0]))},children:s.jsxs(kn,{side:"bottom",className:"h-[70vh] overflow-y-auto",children:[s.jsx(Cn,{children:s.jsx(Pn,{children:"Choose Featured Package"})}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Select a package to feature your product: ",s.jsx("strong",{children:P==null?void 0:P.name})]}),G?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50",children:[s.jsx("h3",{className:"font-semibold text-blue-900",children:G.name}),s.jsxs("p",{className:"text-sm text-blue-700",children:[G.duration_days," days - ",G.amount]})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"start-date",children:"Start Date"}),s.jsx(je,{id:"start-date",type:"date",value:I,min:new Date().toISOString().split("T")[0],onChange:ce=>V(ce.target.value)}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Featured until: ",new Date(new Date(I).getTime()+G.duration_days*24*60*60*1e3).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ie,{variant:"outline",className:"flex-1",onClick:()=>F(null),disabled:H,children:"Back"}),s.jsx(ie,{className:"flex-1",onClick:Q,disabled:H,children:H?s.jsxs(s.Fragment,{children:[s.jsx($s,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Pay ${G.amount}`})]})]}):Y.length>0?s.jsx("div",{className:"grid grid-cols-1 gap-3",children:Y.map(ce=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:ce.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[ce.duration_days," days"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-bold text-green-600",children:["",ce.amount]}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:ce.package_type})]})]}),ce.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:ce.description}),s.jsx(ie,{className:"w-full",onClick:()=>le(ce),children:"Select This Package"})]},ce.id))}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No featured packages available"})})]})]})}),s.jsx(Vn,{open:C,onOpenChange:ce=>{z(ce),ce||V(new Date().toISOString().split("T")[0])},children:s.jsxs(kn,{side:"bottom",className:"h-[40vh]",children:[s.jsx(Cn,{children:s.jsx(Pn,{children:"Reschedule Featured Package"})}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Update the start date for: ",s.jsx("strong",{children:P==null?void 0:P.name})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"reschedule-date",children:"New Start Date"}),s.jsx(je,{id:"reschedule-date",type:"date",value:I,min:new Date().toISOString().split("T")[0],onChange:ce=>V(ce.target.value)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ie,{variant:"outline",className:"flex-1",onClick:()=>z(!1),disabled:q,children:"Cancel"}),s.jsx(ie,{className:"flex-1",onClick:de,disabled:q,children:q?s.jsxs(s.Fragment,{children:[s.jsx($s,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):"Update Date"})]})]})]})}),s.jsx(Vn,{open:!!a,onOpenChange:()=>{i(null),u(!1),p({}),v([]),w([])},children:s.jsxs(kn,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[s.jsx(Cn,{children:s.jsxs(Pn,{className:"flex items-center justify-between",children:[s.jsx("span",{children:m?"Edit Product":"Product Details"}),s.jsx("div",{className:"flex gap-2",children:m?s.jsxs(s.Fragment,{children:[s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>{u(!1),p({}),v([]),w([])},children:"Cancel"}),s.jsxs(ie,{size:"sm",onClick:se,children:[s.jsx(Wc,{className:"h-4 w-4 mr-1"}),"Save"]})]}):s.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>{u(!0),p({...a,dynamic_fields:(a==null?void 0:a.dynamic_fields)||{}}),a!=null&&a.category&&re(a.category)},children:[s.jsx(um,{className:"h-4 w-4 mr-1"}),"Edit"]})})]})}),a&&s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Product Images"}),a.images&&a.images.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:a.images.map((ce,Te)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:ce.image_url,alt:`Product ${Te+1}`,className:"w-full h-20 object-cover rounded border",onError:Ue=>{var mt;console.log("Image failed to load:",ce.image_url),Ue.currentTarget.style.display="none",(mt=Ue.currentTarget.nextElementSibling)==null||mt.classList.remove("hidden")}}),s.jsx("div",{className:"hidden w-full h-20 bg-gray-100 rounded border flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ja,{className:"h-6 w-6 mx-auto mb-1 text-gray-400"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),m&&s.jsx("button",{type:"button",onClick:Ue=>{Ue.preventDefault(),Ue.stopPropagation(),pe(ce.id)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:s.jsx(Ys,{className:"h-3 w-3"})}),ce.is_primary?s.jsx("div",{className:"absolute top-1 left-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Main"}):m?s.jsx("button",{type:"button",onClick:Ue=>{Ue.preventDefault(),Ue.stopPropagation(),ge(ce.id)},className:"absolute top-1 left-1 bg-gray-500 hover:bg-blue-500 text-white text-xs px-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Set Main"}):null]},`existing-image-${ce.id}`))}):s.jsxs("div",{className:"text-center py-4 text-gray-500",children:[s.jsx(ja,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm",children:"No images uploaded"})]}),y.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"New Images:"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:y.map((ce,Te)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:ce,alt:`New ${Te+1}`,className:"w-full h-20 object-cover rounded border"}),s.jsx("button",{type:"button",onClick:Ue=>{Ue.preventDefault(),Ue.stopPropagation(),ve(Te)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:s.jsx(Ys,{className:"h-3 w-3"})})]},`new-image-${Te}`))})]}),m&&s.jsxs("div",{className:"mt-2",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ne,className:"hidden",id:"image-upload"}),s.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[s.jsx(ja,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Add More Images"})]})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Product Name"}),m?s.jsx(je,{value:f.name||"",onChange:ce=>p({...f,name:ce.target.value})}):s.jsx("p",{className:"text-sm font-medium",children:a.name})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Selling Price"}),m?s.jsx(je,{type:"number",value:f.price||"",onChange:ce=>p({...f,price:Number(ce.target.value)})}):s.jsxs("p",{className:"text-sm font-medium",children:["",a.price]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Stock Quantity"}),m?s.jsx(je,{type:"number",value:f.quantity||"",onChange:ce=>p({...f,quantity:Number(ce.target.value)})}):s.jsx("p",{className:"text-sm font-medium",children:a.quantity})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Category"}),m?s.jsxs(qt,{value:f.category||a.category,onValueChange:ce=>{p({...f,category:ce,subcategory:""}),re(ce),ue(ce),$([])},children:[s.jsx(Bt,{children:s.jsx(Ht,{})}),s.jsx(Vt,{children:b.map(ce=>s.jsx(We,{value:ce,children:ce},ce))})]}):s.jsx("p",{className:"text-sm font-medium",children:a.category})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Subcategory"}),m?s.jsxs(qt,{value:f.subcategory||a.subcategory||"",onValueChange:ce=>{p({...f,subcategory:ce}),me(ce)},children:[s.jsx(Bt,{children:s.jsx(Ht,{placeholder:"Select subcategory"})}),s.jsx(Vt,{children:N.map(ce=>s.jsx(We,{value:ce.name,children:ce.name},ce.id))})]}):s.jsx("p",{className:"text-sm font-medium",children:a.subcategory||"N/A"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Cost Price"}),m?s.jsx(je,{type:"number",value:f.cost_price||"",onChange:ce=>p({...f,cost_price:Number(ce.target.value)||void 0})}):s.jsx("p",{className:"text-sm font-medium",children:a.cost_price?`${a.cost_price}`:"N/A"})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"SKU"}),m?s.jsx(je,{value:f.sku||"",onChange:ce=>p({...f,sku:ce.target.value})}):s.jsx("p",{className:"text-sm font-medium",children:a.sku||"N/A"})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Status"}),m?s.jsxs(qt,{value:f.status||a.status,onValueChange:ce=>p({...f,status:ce}),children:[s.jsx(Bt,{children:s.jsx(Ht,{})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"active",children:"Active"}),s.jsx(We,{value:"draft",children:"Draft"}),s.jsx(We,{value:"archived",children:"Archived"})]})]}):s.jsx("div",{children:Be(a.status)})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Description"}),m?s.jsx(Ws,{value:gt(f.description||""),onChange:ce=>p({...f,description:ce.target.value}),rows:3}):s.jsx("p",{className:"text-sm text-gray-600",children:gt(a.description)})]}),m&&E.length>0&&s.jsxs("div",{children:[s.jsx(xe,{children:"Category Details"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:E.map(ce=>{var Ue,mt;const Te=((Ue=f.dynamic_fields)==null?void 0:Ue[ce.name])||"";return s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs",children:ce.label}),ce.field_type==="text"||ce.field_type==="number"?s.jsx(je,{type:ce.field_type,value:Te,placeholder:ce.placeholder,onChange:Ie=>p({...f,dynamic_fields:{...f.dynamic_fields,[ce.name]:ce.field_type==="number"?Number(Ie.target.value):Ie.target.value}})}):ce.field_type==="select"?s.jsxs(qt,{value:Te,onValueChange:Ie=>p({...f,dynamic_fields:{...f.dynamic_fields,[ce.name]:Ie}}),children:[s.jsx(Bt,{children:s.jsx(Ht,{placeholder:`Select ${ce.label}`})}),s.jsx(Vt,{children:(mt=ce.options)==null?void 0:mt.map(Ie=>s.jsx(We,{value:Ie,children:Ie},Ie))})]}):ce.field_type==="boolean"?s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx($t,{checked:!!Te,onCheckedChange:Ie=>p({...f,dynamic_fields:{...f.dynamic_fields,[ce.name]:Ie}})}),s.jsx(xe,{className:"text-xs",children:ce.label})]}):s.jsx(je,{value:Array.isArray(Te)?Te.join(", "):String(Te),onChange:Ie=>p({...f,dynamic_fields:{...f.dynamic_fields,[ce.name]:Ie.target.value}})})]},ce.name)})})]}),m&&R.length>0&&s.jsxs("div",{children:[s.jsx(xe,{children:"Subcategory Details"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:R.map(ce=>{var Ue,mt;const Te=((Ue=f.dynamic_fields)==null?void 0:Ue[ce.name])||"";return s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs",children:ce.label}),ce.field_type==="text"||ce.field_type==="number"?s.jsx(je,{type:ce.field_type,value:Te,placeholder:ce.placeholder,onChange:Ie=>p({...f,dynamic_fields:{...f.dynamic_fields,[ce.name]:ce.field_type==="number"?Number(Ie.target.value):Ie.target.value}})}):ce.field_type==="select"?s.jsxs(qt,{value:Te,onValueChange:Ie=>p({...f,dynamic_fields:{...f.dynamic_fields,[ce.name]:Ie}}),children:[s.jsx(Bt,{children:s.jsx(Ht,{placeholder:`Select ${ce.label}`})}),s.jsx(Vt,{children:(mt=ce.options)==null?void 0:mt.map(Ie=>s.jsx(We,{value:Ie,children:Ie},Ie))})]}):ce.field_type==="boolean"?s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx($t,{checked:!!Te,onCheckedChange:Ie=>p({...f,dynamic_fields:{...f.dynamic_fields,[ce.name]:Ie}})}),s.jsx(xe,{className:"text-xs",children:ce.label})]}):s.jsx(je,{value:Array.isArray(Te)?Te.join(", "):String(Te),onChange:Ie=>p({...f,dynamic_fields:{...f.dynamic_fields,[ce.name]:Ie.target.value}})})]},ce.name)})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xe,{children:"Free Delivery"}),m?s.jsx($t,{checked:f.free_delivery??a.free_delivery,onCheckedChange:ce=>{p({...f,free_delivery:ce,custom_delivery_fee_enabled:ce?!1:f.custom_delivery_fee_enabled,custom_delivery_fee:ce?null:f.custom_delivery_fee})}}):s.jsx($t,{checked:a.free_delivery,disabled:!0})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xe,{children:"Custom Delivery Fee"}),m?s.jsx($t,{checked:(f.custom_delivery_fee_enabled??a.custom_delivery_fee_enabled)&&!(f.free_delivery??a.free_delivery),disabled:f.free_delivery??a.free_delivery,onCheckedChange:ce=>{p({...f,custom_delivery_fee_enabled:ce,custom_delivery_fee:ce?f.custom_delivery_fee:null})}}):s.jsx($t,{checked:a.custom_delivery_fee_enabled&&!a.free_delivery,disabled:!0})]}),m&&(f.custom_delivery_fee_enabled??a.custom_delivery_fee_enabled)&&!(f.free_delivery??a.free_delivery)&&s.jsxs("div",{children:[s.jsx(xe,{children:"Delivery Fee Amount"}),s.jsx(je,{type:"number",step:"0.01",placeholder:"Enter delivery fee",value:f.custom_delivery_fee??a.custom_delivery_fee??"",onChange:ce=>{const Te=ce.target.value;p({...f,custom_delivery_fee:Te?Number(Te):null})}})]}),!m&&a.custom_delivery_fee_enabled&&a.custom_delivery_fee&&!a.free_delivery&&s.jsxs("div",{children:[s.jsx(xe,{children:"Delivery Fee Amount"}),s.jsxs("p",{className:"text-sm font-medium",children:["",a.custom_delivery_fee]})]})]}),a.dynamic_fields&&Object.keys(a.dynamic_fields).length>0&&s.jsxs("div",{children:[s.jsx(xe,{children:"Product Parameters"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:Object.entries(a.dynamic_fields).map(([ce,Te])=>s.jsxs("div",{className:"border rounded p-2",children:[s.jsx(xe,{className:"text-xs text-gray-600",children:ce.replace("_"," ").toUpperCase()}),s.jsx("p",{className:"text-sm font-medium",children:Array.isArray(Te)?Te.join(", "):typeof Te=="boolean"?Te?"Yes":"No":String(Te)})]},ce))})]}),a.tags&&a.tags.length>0&&s.jsxs("div",{children:[s.jsx(xe,{children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.tags.map((ce,Te)=>s.jsx(Fe,{variant:"secondary",className:"text-xs",children:ce},Te))})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2 border-t",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs text-gray-500",children:"Total Sold"}),s.jsxs("p",{className:"text-sm font-medium",children:[a.total_sold||0," units"]})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs text-gray-500",children:"Created"}),s.jsx("p",{className:"text-xs",children:a.created_at?new Date(a.created_at).toLocaleDateString():"N/A"})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs text-gray-500",children:"Updated"}),s.jsx("p",{className:"text-xs",children:a.updated_at?new Date(a.updated_at).toLocaleDateString():"N/A"})]})]})]})]})]})})]})})},tre=()=>{const e=nt(),{toast:t}=es(),[n,r]=j.useState([]),[a,i]=j.useState(!0);j.useEffect(()=>{o();const u=f=>{const p=f.detail;r(x=>[p,...x])};return window.addEventListener("newNotification",u),()=>{window.removeEventListener("newNotification",u)}},[]);const o=async()=>{try{i(!0);const u=await rs.getNotifications();r(u)}catch(u){console.error("Failed to load notifications:",u),t({title:"Error",description:"Failed to load notifications",variant:"destructive"})}finally{i(!1)}},c=async u=>{if(u.read||(await rs.markAsRead(u.id),r(f=>f.map(p=>p.id===u.id?{...p,read:!0}:p))),u.action_url)e(u.action_url);else switch(u.type){case"order":case"refund":case"refund_request":case"order_status":case"status_change":e("/vendor/orders");break;case"stock_alert":case"low_stock":e("/vendor/products");break;case"payment":e("/vendor/wallet");break;case"message":e("/vendor/messages");break;default:e("/vendor/orders")}},d=async()=>{try{await rs.markAllAsRead(),r(u=>u.map(f=>({...f,read:!0}))),t({title:"Success",description:"All notifications marked as read"})}catch{t({title:"Error",description:"Failed to mark notifications as read",variant:"destructive"})}},h=u=>{switch(u){case"order":return s.jsx(Mt,{className:"h-5 w-5 text-green-600"});case"refund":case"refund_request":return s.jsx(Aa,{className:"h-5 w-5 text-red-600"});case"stock_alert":case"low_stock":return s.jsx(Lu,{className:"h-5 w-5 text-orange-600"});case"order_status":case"status_change":return s.jsx(Yr,{className:"h-5 w-5 text-blue-600"});case"payment":return s.jsx(lo,{className:"h-5 w-5 text-green-600"});case"message":return s.jsx(bb,{className:"h-5 w-5 text-purple-600"});default:return s.jsx(zn,{className:"h-5 w-5 text-gray-600"})}},m=n.filter(u=>!u.read).length;return a?s.jsx(Xt,{title:"Notifications",children:s.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(u=>s.jsx(Ee,{className:"animate-pulse",children:s.jsx(Oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})})},u))})}):s.jsx(Xt,{title:"Notifications",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"All Notifications"}),m>0&&s.jsxs(Fe,{variant:"secondary",children:[m," unread"]})]}),m>0&&s.jsx(ie,{variant:"outline",size:"sm",onClick:d,children:"Mark all as read"})]}),s.jsx("div",{className:"space-y-3",children:n.length===0?s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-8 text-center",children:[s.jsx(zn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-gray-500",children:"You're all caught up! New notifications will appear here."})]})}):n.map(u=>s.jsx(Ee,{className:`cursor-pointer transition-colors hover:bg-gray-50 ${u.read?"":"border-l-4 border-l-blue-500 bg-blue-50"}`,onClick:()=>c(u),children:s.jsx(Oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-1",children:h(u.type)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h3",{className:`font-medium text-sm ${u.read?"text-gray-700":"text-gray-900"}`,children:u.title}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(u.created_at).toLocaleString()})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.message}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx(Fe,{variant:"outline",className:`text-xs ${u.type==="order"?"border-green-200 text-green-700":u.type==="refund"||u.type==="refund_request"?"border-red-200 text-red-700":u.type==="stock_alert"||u.type==="low_stock"?"border-orange-200 text-orange-700":u.type==="order_status"||u.type==="status_change"?"border-blue-200 text-blue-700":u.type==="payment"?"border-green-200 text-green-700":u.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:u.type==="refund_request"?"refund":u.type==="stock_alert"?"stock":u.type==="order_status"?"status":u.type}),!u.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})]})})},u.id))})]})})},sre=()=>{const[e]=Bb();nt();const t=e.get("type")||"orders",[n,r]=j.useState([]),[a,i]=j.useState(!0),[o,c]=j.useState("all"),[d,h]=j.useState(!1),[m,u]=j.useState(""),[f,p]=j.useState(""),[x,v]=j.useState(1),[y,w]=j.useState(1),[b,_]=j.useState(0),N=20,[k,E]=j.useState({total:0,active:0,pending:0,completed:0});j.useEffect(()=>{R()},[t,m,f,x]);const T=V=>{v(V)},R=async()=>{try{if(i(!0),t==="orders"){const V=new URLSearchParams({page:x.toString(),page_size:N.toString()});m&&V.append("date_from",m),f&&V.append("date_to",f);const{response:H,data:U}=await Re(`/vendor/orders/?${V}`);if(H.ok&&U){let q=U.results||U||[];if(w(Math.ceil((U.count||q.length)/N)),_(U.count||q.length),m&&f){const K=new Date(m),B=new Date(f);B.setHours(23,59,59,999),q=q.filter(W=>{const oe=new Date(W.created_at);return oe>=K&&oe<=B})}r(q),E({total:q.length,pending:q.filter(K=>K.status==="pending").length,completed:q.filter(K=>K.status==="delivered").length,active:q.filter(K=>["confirmed","out_for_delivery"].includes(K.status)).length})}}else if(t==="products"){const V=new URLSearchParams({page:x.toString(),page_size:N.toString()}),{response:H,data:U}=await Re(`/products/?${V}`);if(H.ok&&U){const q=U.results||U||[];w(Math.ceil((U.count||q.length)/N)),_(U.count||q.length),r(q),E({total:q.length,active:q.filter(K=>K.quantity>10).length,pending:q.filter(K=>K.quantity>0&&K.quantity<=10).length,completed:q.filter(K=>K.quantity===0).length})}}else if(t==="revenue"){const{response:V,data:H}=await Re("/vendor/orders/");if(V.ok&&H){let U=H.results||H||[];const q=U.filter(B=>B.status==="delivered");if(m&&f){const B=new Date(m),W=new Date(f);W.setHours(23,59,59,999),U=q.filter(oe=>{const X=new Date(oe.created_at);return X>=B&&X<=W})}else U=q;r(U);const K=U.reduce((B,W)=>B+parseFloat(W.total_amount||0),0);E({total:K,active:U.length,pending:K>0?K/U.length:0,completed:U.filter(B=>new Date(B.created_at).getMonth()===new Date().getMonth()).length})}}else if(t==="customers"){const{response:V,data:H}=await Re("/vendor/orders/");if(V.ok&&H){const U=H.results||H||[],q=new Map;U.forEach(B=>{var X,re;const W=((X=B.customer_details)==null?void 0:X.id)||B.delivery_phone;q.has(W)||q.set(W,{id:W,name:((re=B.customer_details)==null?void 0:re.username)||B.delivery_name,phone:B.delivery_phone,orders:0,totalSpent:0,lastOrder:B.created_at});const oe=q.get(W);oe.orders+=1,B.status==="delivered"&&(oe.totalSpent+=parseFloat(B.total_amount||0))});const K=Array.from(q.values());r(K),E({total:K.length,active:K.filter(B=>B.orders>1).length,pending:K.filter(B=>B.orders===1).length,completed:K.filter(B=>B.totalSpent>0).length})}}}catch(V){console.error("Error fetching data:",V)}finally{i(!1)}},$=()=>{switch(t){case"orders":return"Orders Management";case"revenue":return"Revenue Analytics";case"products":return"Products Overview";case"customers":return"Customer Insights";default:return"Summary"}},M=()=>{switch(t){case"orders":return{total:"Total Orders",active:"Processing",pending:"Pending",completed:"Delivered"};case"products":return{total:"Total Products",active:"In Stock",pending:"Low Stock",completed:"Out of Stock"};case"revenue":return{total:"Total Revenue",active:"Orders",pending:"Avg Order",completed:"This Month"};case"customers":return{total:"Total Customers",active:"Repeat Buyers",pending:"New Customers",completed:"Paid Customers"};default:return{total:"Total",active:"Active",pending:"Pending",completed:"Completed"}}},A=(V,H)=>t==="revenue"&&(V==="total"||V==="pending")?`Rs${H.toFixed(2)}`:H.toString(),C=()=>{let V="",H="";t==="orders"?(V=[["Date","Order Number","Customer","Amount","Status","Items"].join(","),...n.map(B=>{var W;return[new Date(B.created_at).toLocaleDateString(),B.order_number,`"${B.delivery_name||"N/A"}"`,parseFloat(B.total_amount||0).toFixed(2),B.status,((W=B.items)==null?void 0:W.length)||0].join(",")})].join(`
`),H="orders-report"):t==="products"?(V=[["Name","Price","Stock","Status","Category"].join(","),...n.map(B=>[`"${B.name}"`,parseFloat(B.price).toFixed(2),B.quantity,B.quantity>10?"In Stock":B.quantity>0?"Low Stock":"Out of Stock",`"${B.category||"N/A"}"`].join(","))].join(`
`),H="products-report"):t==="revenue"?(V=[["Date","Order Number","Customer","Revenue"].join(","),...n.map(B=>[new Date(B.created_at).toLocaleDateString(),B.order_number,`"${B.delivery_name||"N/A"}"`,parseFloat(B.total_amount||0).toFixed(2)].join(","))].join(`
`),H="revenue-report"):t==="customers"&&(V=[["Name","Phone","Orders","Total Spent","Last Order"].join(","),...n.map(B=>[`"${B.name}"`,B.phone,B.orders,B.totalSpent.toFixed(2),new Date(B.lastOrder).toLocaleDateString()].join(","))].join(`
`),H="customers-report");const U=new Blob([V],{type:"text/csv"}),q=window.URL.createObjectURL(U),K=document.createElement("a");K.href=q,K.download=`${H}-${m||"all"}-${f||new Date().toISOString().split("T")[0]}.csv`,K.click(),window.URL.revokeObjectURL(q)},z=()=>{const V=new Date().toLocaleDateString(),H=m&&f?`${m} to ${f}`:"All Time",U=M(),q=`
===========================================
           ${$().toUpperCase()}
===========================================
Generated: ${V}
Period: ${H}

SUMMARY
-------------------------------------------
${U.total}: ${A("total",k.total)}
${U.active}: ${A("active",k.active)}
${U.pending}: ${A("pending",k.pending)}
${U.completed}: ${A("completed",k.completed)}

DETAILS (${n.length} records)
-------------------------------------------
${t==="orders"?n.map(B=>`${new Date(B.created_at).toLocaleDateString()} | ${B.order_number} | ${B.delivery_name} | Rs${parseFloat(B.total_amount||0).toFixed(2)} | ${B.status}`).join(`
`):t==="products"?n.map(B=>`${B.name} | Rs${parseFloat(B.price).toFixed(2)} | Stock: ${B.quantity}`).join(`
`):t==="revenue"?n.map(B=>`${new Date(B.created_at).toLocaleDateString()} | ${B.order_number} | Rs${parseFloat(B.total_amount||0).toFixed(2)}`).join(`
`):n.map(B=>`${B.name} | ${B.phone} | ${B.orders} orders | Rs${B.totalSpent.toFixed(2)}`).join(`
`)}

===========================================
    `,K=window.open("","_blank");K==null||K.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${q}</pre>`),K==null||K.print()},P=()=>{const V=M(),H=`${$()}\\n\\n${V.total}: ${A("total",k.total)}\\n${V.active}: ${A("active",k.active)}\\n${V.pending}: ${A("pending",k.pending)}\\n${V.completed}: ${A("completed",k.completed)}\\n\\nTotal Records: ${n.length}`;if(navigator.share)navigator.share({title:$(),text:H});else{const U=`https://wa.me/?text=${encodeURIComponent(H)}`;window.open(U,"_blank")}},O=()=>{v(1),R(),h(!1)},Y=()=>{u(""),p(""),v(1),R(),h(!1)},J=V=>{if(V==="all")return n;if(t==="orders"){if(V==="pending")return n.filter(H=>H.status==="pending");if(V==="active")return n.filter(H=>["confirmed","out_for_delivery"].includes(H.status));if(V==="completed")return n.filter(H=>H.status==="delivered")}else if(t==="products"){if(V==="active")return n.filter(H=>H.quantity>10);if(V==="pending")return n.filter(H=>H.quantity>0&&H.quantity<=10);if(V==="completed")return n.filter(H=>H.quantity===0)}return n},G=V=>new Date(V).toLocaleDateString(),F=V=>new Date(V).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),I=M();return s.jsx(Xt,{title:$(),children:s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[s.jsx("div",{className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(Ee,{children:s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Yr,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:I.total}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:A("total",k.total)})]})]})})}),s.jsx(Ee,{children:s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ou,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:I.active}),s.jsx("p",{className:"text-sm font-bold text-green-600",children:A("active",k.active)})]})]})})}),s.jsx(Ee,{children:s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx(Ru,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:I.pending}),s.jsx("p",{className:"text-sm font-bold text-orange-600",children:A("pending",k.pending)})]})]})})}),s.jsx(Ee,{children:s.jsx(Oe,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(Mt,{className:"h-4 w-4 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:I.completed}),s.jsx("p",{className:"text-sm font-bold text-purple-600",children:A("completed",k.completed)})]})]})})})]})}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:$()}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ie,{variant:"outline",size:"sm",onClick:z,children:s.jsx(wb,{className:"h-4 w-4"})}),s.jsx(ie,{variant:"outline",size:"sm",onClick:C,children:s.jsx(tc,{className:"h-4 w-4"})}),s.jsx(ie,{variant:"outline",size:"sm",onClick:P,children:s.jsx(tl,{className:"h-4 w-4"})}),(t==="orders"||t==="revenue")&&s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>h(!0),children:s.jsx(La,{className:"h-4 w-4"})}),s.jsx(ie,{variant:"outline",size:"sm",onClick:R,children:s.jsx(Aa,{className:"h-4 w-4"})})]})]}),s.jsxs(Ia,{value:o,onValueChange:c,className:"w-full",children:[s.jsx("div",{className:"border-b border-gray-100 overflow-x-auto",children:s.jsxs(Qr,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[s.jsxs(Ot,{value:"all",className:"text-xs py-2 px-3",children:["All (",n.length,")"]}),t==="orders"&&s.jsxs(s.Fragment,{children:[s.jsxs(Ot,{value:"pending",className:"text-xs py-2 px-3",children:["Pending (",k.pending,")"]}),s.jsxs(Ot,{value:"active",className:"text-xs py-2 px-3",children:["Processing (",k.active,")"]}),s.jsxs(Ot,{value:"completed",className:"text-xs py-2 px-3",children:["Delivered (",k.completed,")"]})]}),t==="products"&&s.jsxs(s.Fragment,{children:[s.jsxs(Ot,{value:"active",className:"text-xs py-2 px-3",children:["In Stock (",k.active,")"]}),s.jsxs(Ot,{value:"pending",className:"text-xs py-2 px-3",children:["Low Stock (",k.pending,")"]}),s.jsxs(Ot,{value:"completed",className:"text-xs py-2 px-3",children:["Out of Stock (",k.completed,")"]})]})]})}),s.jsx(xt,{value:"all",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:a?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Aa,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading data..."})]}):J("all").length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Mt,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No data found"})]}):J("all").map((V,H)=>s.jsxs("div",{className:"p-4",children:[t==="orders"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Mt,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",V.order_number]}),s.jsx("p",{className:"text-xs text-gray-600",children:V.delivery_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[G(V.created_at)," at ",F(V.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(V.total_amount||0).toFixed(2)]}),s.jsx(Fe,{variant:"default",className:"text-xs",children:V.status})]})]}),t==="products"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(Nn,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:V.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(V.price).toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",V.quantity]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx(Fe,{className:`text-xs ${V.quantity>10?"bg-green-100 text-green-800":V.quantity>0?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:V.quantity>10?"In Stock":V.quantity>0?"Low Stock":"Out of Stock"})})]}),t==="revenue"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Yr,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",V.order_number]}),s.jsx("p",{className:"text-xs text-gray-600",children:V.delivery_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[G(V.created_at)," at ",F(V.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(V.total_amount||0).toFixed(2)]}),s.jsx(Fe,{variant:"default",className:"text-xs",children:"revenue"})]})]}),t==="customers"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx(xp,{className:"h-5 w-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:V.name}),s.jsx("p",{className:"text-xs text-gray-600",children:V.phone}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Last order: ",G(V.lastOrder)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",V.totalSpent.toFixed(2)]}),s.jsxs(Fe,{variant:"default",className:"text-xs",children:[V.orders," orders"]})]})]})]},V.id||H))})}),(t==="orders"||t==="products")&&["pending","active","completed"].map(V=>s.jsx(xt,{value:V,className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:J(V).map((H,U)=>s.jsxs("div",{className:"p-4",children:[t==="orders"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Mt,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",H.order_number]}),s.jsx("p",{className:"text-xs text-gray-600",children:H.delivery_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[G(H.created_at)," at ",F(H.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(H.total_amount||0).toFixed(2)]}),s.jsx(Fe,{variant:"default",className:"text-xs",children:H.status})]})]}),t==="products"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(Nn,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:H.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(H.price).toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",H.quantity]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx(Fe,{className:`text-xs ${H.quantity>10?"bg-green-100 text-green-800":H.quantity>0?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:H.quantity>10?"In Stock":H.quantity>0?"Low Stock":"Out of Stock"})})]})]},H.id||U))})},V))]})]})}),y>1&&s.jsx("div",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(x-1)*N+1," to ",Math.min(x*N,b)," of ",b," records"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>T(x-1),disabled:x===1,children:"Previous"}),s.jsxs("span",{className:"text-sm font-medium",children:[x," of ",y]}),s.jsx(ie,{variant:"outline",size:"sm",onClick:()=>T(x+1),disabled:x===y,children:"Next"})]})]})}),s.jsx(Vn,{open:d,onOpenChange:h,children:s.jsxs(kn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(Cn,{className:"pb-4",children:s.jsx(Pn,{children:"Filter by Date Range"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"From Date"}),s.jsx(je,{type:"date",value:m,onChange:V=>u(V.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"To Date"}),s.jsx(je,{type:"date",value:f,onChange:V=>p(V.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(ie,{onClick:O,className:"flex-1",children:"Apply Filter"}),s.jsx(ie,{variant:"outline",onClick:Y,className:"flex-1",children:"Clear"})]}),(m||f)&&s.jsx("div",{className:"pt-4 border-t",children:s.jsx("p",{className:"text-sm text-gray-600",children:m&&f?`Showing: ${m} to ${f}`:m?`From: ${m}`:f?`Until: ${f}`:""})})]})]})})]})})};function nre(){const e=nt(),{toast:t}=es(),[n,r]=j.useState("dashboard"),[a,i]=j.useState(!0),[o,c]=j.useState("30"),[d,h]=j.useState(""),[m,u]=j.useState(""),[f,p]=j.useState("all"),[x,v]=j.useState(!1),[y,w]=j.useState("csv"),[b,_]=j.useState([]),[N,k]=j.useState([]),[E,T]=j.useState([]),[R,$]=j.useState({totalRevenue:0,totalOrders:0,avgOrderValue:0,topProducts:[],revenueChart:[],orderChart:[],productPerformance:[],customerInsights:{totalCustomers:0,returningCustomers:0,newCustomers:0}});j.useEffect(()=>{M()},[o,d,m,f]);const M=async()=>{try{i(!0);const{response:q,data:K}=await Re("/orders/");if(q.ok){const B=K.results||K||[];_(B);const{response:W,data:oe}=await Re("/products/");if(W.ok){const X=oe.results||oe||[];k(X),A(B,X),J(B)}}}catch(q){console.error("Error fetching data:",q),t({title:"Error",description:"Failed to load analytics data",variant:"destructive"})}finally{i(!1)}},A=(q,K)=>{const B=C(q),W=B.filter(ae=>ae.status==="delivered"),oe=W.reduce((ae,ee)=>ae+parseFloat(ee.total_amount||0),0),X=B.length,re=X>0?oe/W.length:0,ue=z(W),me=P(B),we=O(W),be=Y(B);$({totalRevenue:oe,totalOrders:X,avgOrderValue:re,topProducts:we.slice(0,5),revenueChart:ue,orderChart:me,productPerformance:we,customerInsights:be})},C=q=>{let K=q;if(o!=="custom"){const B=parseInt(o),W=new Date;W.setDate(W.getDate()-B),K=q.filter(oe=>new Date(oe.created_at)>=W)}else d&&m&&(K=q.filter(B=>{const W=new Date(B.created_at);return W>=new Date(d)&&W<=new Date(m)}));return f!=="all"&&(K=K.filter(B=>{var W;return(W=B.items)==null?void 0:W.some(oe=>{var X;return((X=oe.product_details)==null?void 0:X.id)===parseInt(f)})})),K},z=q=>{const K=[];for(let B=29;B>=0;B--){const W=new Date;W.setDate(W.getDate()-B);const oe=q.filter(re=>new Date(re.created_at).toDateString()===W.toDateString()),X=oe.reduce((re,ue)=>re+parseFloat(ue.total_amount||0),0);K.push({date:W.toLocaleDateString("en-US",{month:"short",day:"numeric"}),revenue:X,orders:oe.length})}return K},P=q=>{const K={pending:0,confirmed:0,preparing:0,out_for_delivery:0,delivered:0,cancelled:0};return q.forEach(B=>{K.hasOwnProperty(B.status)&&K[B.status]++}),Object.entries(K).map(([B,W])=>({status:B.replace("_"," ").replace(/\b\w/g,oe=>oe.toUpperCase()),count:W,percentage:q.length>0?(W/q.length*100).toFixed(1):0}))},O=(q,K)=>{const B={};return q.forEach(W=>{var oe;(oe=W.items)==null||oe.forEach(X=>{var ue;const re=(ue=X.product_details)==null?void 0:ue.id;re&&(B[re]||(B[re]={id:re,name:X.product_name,totalSold:0,totalRevenue:0,orders:0}),B[re].totalSold+=X.quantity,B[re].totalRevenue+=parseFloat(X.total_price||0),B[re].orders++)})}),Object.values(B).sort((W,oe)=>oe.totalRevenue-W.totalRevenue)},Y=q=>{const K=new Set,B={};q.forEach(oe=>{var re;const X=((re=oe.customer_details)==null?void 0:re.id)||oe.delivery_phone;K.add(X),B[X]||(B[X]=[]),B[X].push(oe)});const W=Object.values(B).filter(oe=>oe.length>1).length;return{totalCustomers:K.size,returningCustomers:W,newCustomers:K.size-W}},J=q=>{const K=[];q.forEach(B=>{var W,oe,X;B.status==="delivered"&&K.push({id:B.id,type:"sale",order_number:B.order_number,customer_name:((W=B.customer_details)==null?void 0:W.username)||B.delivery_name,amount:parseFloat(B.total_amount),date:B.created_at,items:((oe=B.items)==null?void 0:oe.length)||0}),((X=B.refunds)==null?void 0:X.length)>0&&B.refunds.forEach(re=>{var ue,me;re.status==="completed"&&K.push({id:`refund-${re.id}`,type:"refund",order_number:B.order_number,customer_name:((ue=B.customer_details)==null?void 0:ue.username)||B.delivery_name,amount:-parseFloat(re.approved_amount||re.requested_amount),date:re.completed_at||re.created_at,items:((me=B.items)==null?void 0:me.length)||0})})}),T(K.sort((B,W)=>new Date(W.date).getTime()-new Date(B.date).getTime()))},G=()=>{const q={summary:{totalRevenue:R.totalRevenue,totalOrders:R.totalOrders,avgOrderValue:R.avgOrderValue,totalCustomers:R.customerInsights.totalCustomers,dateRange:o==="custom"?`${d} to ${m}`:`Last ${o} days`},transactions:E,products:R.productPerformance,revenueChart:R.revenueChart};y==="csv"?F(q):y==="pdf"?V(q):I(q),v(!1)},F=q=>{const K=[["Analytics Report"],["Generated:",new Date().toLocaleDateString()],["Period:",q.summary.dateRange],[""],["SUMMARY"],["Total Revenue",`Rs${q.summary.totalRevenue.toFixed(2)}`],["Total Orders",q.summary.totalOrders],["Average Order Value",`Rs${q.summary.avgOrderValue.toFixed(2)}`],["Total Customers",q.summary.totalCustomers],[""],["TOP PRODUCTS"],["Product Name","Units Sold","Revenue","Orders"],...q.products.slice(0,10).map(X=>[X.name,X.totalSold,`Rs${X.totalRevenue.toFixed(2)}`,X.orders]),[""],["DAILY REVENUE"],["Date","Revenue","Orders"],...q.revenueChart.map(X=>[X.date,`Rs${X.revenue.toFixed(2)}`,X.orders])].map(X=>X.join(",")).join(`
`),B=new Blob([K],{type:"text/csv"}),W=window.URL.createObjectURL(B),oe=document.createElement("a");oe.href=W,oe.download=`analytics-report-${new Date().toISOString().split("T")[0]}.csv`,oe.click(),window.URL.revokeObjectURL(W)},I=q=>{const K=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),B=window.URL.createObjectURL(K),W=document.createElement("a");W.href=B,W.download=`analytics-data-${new Date().toISOString().split("T")[0]}.json`,W.click(),window.URL.revokeObjectURL(B)},V=q=>{const K=`
===========================================
        BUSINESS ANALYTICS REPORT
===========================================
Generated: ${new Date().toLocaleDateString()}
Period: ${q.summary.dateRange}

SUMMARY
-------------------------------------------
Total Revenue: Rs${q.summary.totalRevenue.toFixed(2)}
Total Orders: ${q.summary.totalOrders}
Average Order Value: Rs${q.summary.avgOrderValue.toFixed(2)}
Total Customers: ${q.summary.totalCustomers}

TOP PRODUCTS
-------------------------------------------
${q.products.slice(0,10).map((W,oe)=>`${oe+1}. ${W.name} - ${W.totalSold} units - Rs${W.totalRevenue.toFixed(2)}`).join(`
`)}

DAILY REVENUE TREND
-------------------------------------------
${q.revenueChart.slice(-14).map(W=>`${W.date}: Rs${W.revenue.toFixed(2)} (${W.orders} orders)`).join(`
`)}

===========================================
    `,B=window.open("","_blank");B==null||B.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${K}</pre>`),B==null||B.print()},H=()=>{var K;const q=`Business Analytics Report

Total Revenue: Rs${R.totalRevenue.toFixed(2)}
Total Orders: ${R.totalOrders}
Average Order Value: Rs${R.avgOrderValue.toFixed(2)}
Total Customers: ${R.customerInsights.totalCustomers}

Top Product: ${((K=R.topProducts[0])==null?void 0:K.name)||"N/A"}`;if(navigator.share)navigator.share({title:"Business Analytics Report",text:q});else{const B=`https://wa.me/?text=${encodeURIComponent(q)}`;window.open(B,"_blank")}},U=[{id:"dashboard",label:"Dashboard",icon:LP},{id:"sales",label:"Sales Report",icon:Yr},{id:"products",label:"Product Analytics",icon:Mt},{id:"customers",label:"Customer Insights",icon:xp},{id:"statements",label:"Statements",icon:xa}];return a?s.jsx(Xt,{title:"Business Analytics",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})})}):s.jsx(Xt,{title:"Business Analytics",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ie,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Yt,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-semibold text-lg",children:"Business Analytics"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive business insights"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[s.jsx(tc,{className:"h-4 w-4 mr-1"}),"Export"]}),s.jsxs(ie,{variant:"outline",size:"sm",onClick:H,children:[s.jsx(tl,{className:"h-4 w-4 mr-1"}),"Share"]}),s.jsx(ie,{variant:"outline",size:"sm",onClick:M,children:s.jsx(Aa,{className:"h-4 w-4"})})]})]})}),s.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(La,{className:"h-4 w-4 text-gray-600"}),s.jsx(xe,{className:"text-sm font-medium",children:"Filters:"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{className:"text-sm",children:"Period:"}),s.jsxs(qt,{value:o,onValueChange:c,children:[s.jsx(Bt,{className:"w-32",children:s.jsx(Ht,{})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"7",children:"Last 7 days"}),s.jsx(We,{value:"30",children:"Last 30 days"}),s.jsx(We,{value:"90",children:"Last 3 months"}),s.jsx(We,{value:"365",children:"Last year"}),s.jsx(We,{value:"custom",children:"Custom"})]})]})]}),o==="custom"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{className:"text-sm",children:"From:"}),s.jsx(je,{type:"date",value:d,onChange:q=>h(q.target.value),className:"w-36"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{className:"text-sm",children:"To:"}),s.jsx(je,{type:"date",value:m,onChange:q=>u(q.target.value),className:"w-36"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{className:"text-sm",children:"Product:"}),s.jsxs(qt,{value:f,onValueChange:p,children:[s.jsx(Bt,{className:"w-40",children:s.jsx(Ht,{})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"all",children:"All Products"}),N.map(q=>s.jsx(We,{value:q.id.toString(),children:q.name},q.id))]})]})]})]})}),s.jsx("div",{className:"bg-white",children:s.jsxs(Ia,{value:n,onValueChange:r,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(Qr,{className:"grid grid-cols-5 w-full min-w-max",children:U.map(q=>s.jsxs(Ot,{value:q.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(q.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:q.label})]},q.id))})}),s.jsxs(xt,{value:"dashboard",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",R.totalRevenue.toFixed(0)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R.totalOrders}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["",R.avgOrderValue.toFixed(0)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Avg Order Value"})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:R.customerInsights.totalCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]})})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs(Pt,{className:"flex items-center gap-2",children:[s.jsx(Yr,{className:"h-5 w-5"}),"Revenue Trend"]})}),s.jsx(Oe,{children:s.jsx("div",{className:"h-64 flex items-end justify-between gap-1",children:R.revenueChart.map((q,K)=>{const B=Math.max(...R.revenueChart.map(oe=>oe.revenue),1),W=q.revenue/B*200;return s.jsxs("div",{className:"flex flex-col items-center flex-1",children:[s.jsx("div",{className:"bg-green-500 rounded-t w-full min-h-[4px] hover:bg-green-600 transition-colors cursor-pointer",style:{height:`${W}px`},title:`${q.date}: ${q.revenue.toFixed(0)}`}),s.jsx("div",{className:"text-xs text-gray-600 mt-1 transform -rotate-45 origin-left",children:q.date})]},K)})})})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs(Pt,{className:"flex items-center gap-2",children:[s.jsx(Mt,{className:"h-5 w-5"}),"Top Performing Products"]})}),s.jsx(Oe,{children:s.jsx("div",{className:"space-y-3",children:R.topProducts.map((q,K)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm font-bold text-blue-600",children:K+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:q.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[q.totalSold," units sold"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-green-600",children:["",q.totalRevenue.toFixed(0)]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[q.orders," orders"]})]})]},q.id))})})]})]}),s.jsx(xt,{value:"sales",className:"p-4 space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{children:"Order Status Distribution"})}),s.jsx(Oe,{children:s.jsx("div",{className:"space-y-3",children:R.orderChart.map(q=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${q.status==="Delivered"?"bg-green-500":q.status==="Pending"?"bg-yellow-500":q.status==="Cancelled"?"bg-red-500":"bg-blue-500"}`}),s.jsx("span",{className:"text-sm",children:q.status})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:q.count}),s.jsxs("span",{className:"text-sm text-gray-600",children:["(",q.percentage,"%)"]})]})]},q.status))})})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{children:"Daily Sales Summary"})}),s.jsx(Oe,{children:s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:R.revenueChart.slice(-7).reverse().map((q,K)=>s.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:q.date}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium",children:["",q.revenue.toFixed(0)]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[q.orders," orders"]})]})]},K))})})]})]})}),s.jsx(xt,{value:"products",className:"p-4 space-y-6",children:s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{children:"Product Performance Report"})}),s.jsx(Oe,{children:s.jsx("div",{className:"space-y-3",children:R.productPerformance.map((q,K)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-bold",children:K+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:q.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[q.totalSold," units  ",q.orders," orders"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-green-600",children:["",q.totalRevenue.toFixed(0)]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["",(q.totalRevenue/q.totalSold).toFixed(0)," per unit"]})]})]},q.id))})})]})}),s.jsxs(xt,{value:"customers",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R.customerInsights.totalCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:R.customerInsights.returningCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"Returning Customers"})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:R.customerInsights.newCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"New Customers"})]})})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsx(Pt,{children:"Customer Insights"})}),s.jsx(Oe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Customer Retention Rate"}),s.jsxs("span",{className:"font-bold text-green-600",children:[R.customerInsights.totalCustomers>0?(R.customerInsights.returningCustomers/R.customerInsights.totalCustomers*100).toFixed(1):0,"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Average Orders per Customer"}),s.jsx("span",{className:"font-bold text-blue-600",children:R.customerInsights.totalCustomers>0?(R.totalOrders/R.customerInsights.totalCustomers).toFixed(1):0})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Average Revenue per Customer"}),s.jsxs("span",{className:"font-bold text-purple-600",children:["",R.customerInsights.totalCustomers>0?(R.totalRevenue/R.customerInsights.totalCustomers).toFixed(0):0]})]})]})})]})]}),s.jsxs(xt,{value:"statements",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs(Pt,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Sales Summary"}),s.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[s.jsx(tc,{className:"h-4 w-4 mr-1"}),"Export"]})]})}),s.jsx(Oe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total Sales"}),s.jsxs("span",{className:"font-bold text-green-600",children:["",R.totalRevenue.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total Orders"}),s.jsx("span",{className:"font-bold text-blue-600",children:R.totalOrders})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Average Order Value"}),s.jsxs("span",{className:"font-bold text-purple-600",children:["",R.avgOrderValue.toFixed(2)]})]})]})})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs(Pt,{className:"flex items-center gap-2",children:[s.jsx(ZD,{className:"h-5 w-5"}),"Order Distribution"]})}),s.jsx(Oe,{children:s.jsx("div",{className:"space-y-3",children:R.orderChart.map((q,K)=>{const B=["bg-green-500","bg-yellow-500","bg-red-500","bg-blue-500","bg-purple-500"];return s.jsxs("div",{className:"flex items-center justify-between p-2 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${B[K%B.length]}`}),s.jsx("span",{className:"text-sm",children:q.status})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"font-medium text-sm",children:q.count}),s.jsxs("span",{className:"text-xs text-gray-600 ml-1",children:["(",q.percentage,"%)"]})]})]},q.status)})})})]})]}),s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs(Pt,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Recent Transactions"}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>e("/vendor/sales"),children:[s.jsx(Ps,{className:"h-4 w-4 mr-1"}),"View All"]})})]})}),s.jsx(Oe,{children:s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:E.slice(0,20).map(q=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${q.type==="sale"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:q.type==="sale"?"":""}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-sm",children:[q.type==="sale"?"Sale":"Refund"," - ",q.order_number]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[q.customer_name,"  ",new Date(q.date).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`font-bold text-sm ${q.type==="sale"?"text-green-600":"text-red-600"}`,children:[q.type==="sale"?"+":"","",Math.abs(q.amount).toFixed(2)]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[q.items," items"]})]})]},q.id))})})]})]})]})}),s.jsx(Vn,{open:x,onOpenChange:v,children:s.jsxs(kn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(Cn,{className:"pb-4",children:s.jsx(Pn,{children:"Export Analytics Report"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"Export Format"}),s.jsxs(qt,{value:y,onValueChange:w,children:[s.jsx(Bt,{children:s.jsx(Ht,{})}),s.jsxs(Vt,{children:[s.jsx(We,{value:"csv",children:"CSV Spreadsheet"}),s.jsx(We,{value:"json",children:"JSON Data"}),s.jsx(We,{value:"pdf",children:"PDF Report"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Report Includes:"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("div",{children:" Sales summary and metrics"}),s.jsx("div",{children:" Top performing products"}),s.jsx("div",{children:" Daily revenue trends"}),s.jsx("div",{children:" Customer insights"}),s.jsx("div",{children:" Order distribution"})]})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsxs(ie,{onClick:G,className:"flex-1",children:[s.jsx(tc,{className:"h-4 w-4 mr-2"}),"Export Report"]}),s.jsx(ie,{variant:"outline",onClick:()=>v(!1),className:"flex-1",children:"Cancel"})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("p",{className:"text-xs text-gray-500",children:["Report will include data for the selected time period: ",o==="custom"?`${d} to ${m}`:`Last ${o} days`]})})]})]})})]})})}function rre(){const e=nt(),{notifications:t,unreadCount:n,markAsRead:r,markAllAsRead:a,refreshNotifications:i}=lT();j.useEffect(()=>{(async()=>{const{authService:m}=await ze(async()=>{const{authService:f}=await Promise.resolve().then(()=>Qi);return{authService:f}},void 0);if(!await m.getToken()){const f=window.location.pathname+window.location.search;e(`/login?redirect=${encodeURIComponent(f)}`)}})()},[e]);const o=h=>{h.read||r(h.id),h.action_url&&e(h.action_url)},c=h=>{switch(h){case"order":return"";case"payment":return"";case"message":return"";default:return""}},d=h=>{switch(h){case"order":return"border-green-200 text-green-700 bg-green-50";case"payment":return"border-blue-200 text-blue-700 bg-blue-50";case"message":return"border-purple-200 text-purple-700 bg-purple-50";default:return"border-gray-200 text-gray-700 bg-gray-50"}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"sticky top-0 z-50 bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsxs(ie,{variant:"ghost",onClick:()=>e(-1),className:"flex items-center gap-2",children:[s.jsx(Yt,{className:"h-4 w-4"}),"Back"]}),s.jsx("h1",{className:"text-lg font-semibold",children:"Notifications"})]}),s.jsx("div",{className:"max-w-4xl mx-auto p-4",children:s.jsxs(Ee,{children:[s.jsx(St,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(zn,{className:"h-6 w-6 text-blue-600"}),s.jsx(Pt,{className:"text-2xl",children:"Notifications"}),n>0&&s.jsxs(Fe,{className:"bg-red-500 text-white",children:[n," unread"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ie,{variant:"outline",size:"sm",onClick:i,children:"Refresh"}),n>0&&s.jsxs(ie,{variant:"outline",size:"sm",onClick:a,className:"flex items-center gap-2",children:[s.jsx(GD,{className:"h-4 w-4"}),"Mark all read"]})]})]})}),s.jsx(Oe,{children:t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(zn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-gray-500",children:"You're all caught up! Check back later for updates."})]}):s.jsx("div",{className:"space-y-3",children:t.map(h=>s.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-all hover:shadow-md ${h.read?"bg-white border-gray-200":"bg-blue-50/50 border-blue-200"}`,onClick:()=>o(h),children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"text-2xl",children:c(h.type)}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`font-medium ${h.read?"text-gray-700":"text-gray-900"}`,children:h.title}),s.jsx("p",{className:`text-sm mt-1 ${h.read?"text-gray-600":"text-gray-700"}`,children:h.message}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(h.created_at).toLocaleString()})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fe,{variant:"outline",className:`text-xs ${d(h.type)}`,children:h.type}),!h.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})})]})},h.id))})})]})})]})}const are=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Compose New Message"}),s.jsx("p",{children:"Coming soon..."})]}),ire=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Customer Management"}),s.jsx("p",{children:"Coming soon..."})]}),ore=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Search Messages"}),s.jsx("p",{children:"Coming soon..."})]}),lre=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Message Settings"}),s.jsx("p",{children:"Coming soon..."})]}),cre=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Products"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Product Statistics"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"24"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Products"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Categories"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"8"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Active Categories"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Approvals"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"3"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Review"})]})]})]}),dre=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Return Order Management"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Return Requests"}),s.jsx("p",{className:"text-3xl font-bold text-red-600",children:"7"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pending review"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Approved Returns"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"12"}),s.jsx("p",{className:"text-sm text-gray-600",children:"This month"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Refund Amount"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"8,450"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Processed"})]})]})]}),ure=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Review Management"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Average Rating"}),s.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:"4.7"}),s.jsx("p",{className:"text-sm text-gray-600",children:""})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Reviews"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"89"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Customer feedback"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Response"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"5"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Need attention"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Positive Reviews"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"76"}),s.jsx("p",{className:"text-sm text-gray-600",children:"85% positive"})]})]})]}),hre=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Income Dashboard"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Today's Earnings"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"2,450"}),s.jsx("p",{className:"text-sm text-gray-600",children:"+12% from yesterday"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"This Week"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"18,320"}),s.jsx("p",{className:"text-sm text-gray-600",children:"7 days total"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"This Month"}),s.jsx("p",{className:"text-3xl font-bold text-purple-600",children:"72,850"}),s.jsx("p",{className:"text-sm text-gray-600",children:"30 days total"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Payout"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"5,200"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Available for withdrawal"})]})]})]}),fre=new T$,mre=()=>(dB(),s.jsxs(jz,{children:[s.jsx(lt,{path:"/",element:s.jsx(RS,{})}),s.jsx(lt,{path:"/splash",element:s.jsx(uB,{})}),s.jsx(lt,{path:"/login",element:s.jsx(wB,{})}),s.jsx(lt,{path:"/home",element:s.jsx(RS,{})}),s.jsx(lt,{path:"/search",element:s.jsx(gZ,{})}),s.jsx(lt,{path:"/cart",element:s.jsx(dZ,{})}),s.jsx(lt,{path:"/wishlist",element:s.jsx(oa,{children:s.jsx(vZ,{})})}),s.jsx(lt,{path:"/profile",element:s.jsx(oa,{children:s.jsx(NZ,{})})}),s.jsx(lt,{path:"/profile-edit",element:s.jsx(oa,{children:s.jsx(CZ,{})})}),s.jsx(lt,{path:"/privacy",element:s.jsx(PZ,{})}),s.jsx(lt,{path:"/privacy-policy",element:s.jsx(EZ,{})}),s.jsx(lt,{path:"/product/:id",element:s.jsx(eZ,{})}),s.jsx(lt,{path:"/vendor/:vendorId",element:s.jsx(oZ,{})}),s.jsx(lt,{path:"/checkout",element:s.jsx(oa,{children:s.jsx(cG,{})})}),s.jsx(lt,{path:"/order-confirmation/:orderId",element:s.jsx(oa,{children:s.jsx(dG,{})})}),s.jsx(lt,{path:"/orders",element:s.jsx(vK,{})}),s.jsx(lt,{path:"/addresses",element:s.jsx(oa,{children:s.jsx(wK,{})})}),s.jsx(lt,{path:"/payments",element:s.jsx(oa,{children:s.jsx(SK,{})})}),s.jsx(lt,{path:"/help",element:s.jsx(PK,{})}),s.jsx(lt,{path:"/messages",element:s.jsx(oa,{children:s.jsx(BS,{})})}),s.jsx(lt,{path:"/order/:orderId/messages",element:s.jsx(oa,{children:s.jsx(BS,{})})}),s.jsx(lt,{path:"/signup",element:s.jsx(TZ,{})}),s.jsx(lt,{path:"/forgot-password",element:s.jsx(AZ,{})}),s.jsx(lt,{path:"/category/:categoryName",element:s.jsx(AK,{})}),s.jsx(lt,{path:"/featured-items",element:s.jsx(RK,{})}),s.jsx(lt,{path:"/trending-items",element:s.jsx(MK,{})}),s.jsx(lt,{path:"/vendor/login",element:s.jsx(IK,{})}),s.jsx(lt,{path:"/vendor/signup",element:s.jsx(DK,{})}),s.jsx(lt,{path:"/vendor/onboarding",element:s.jsx($K,{})}),s.jsx(lt,{path:"/vendor/rejection",element:s.jsx(zK,{})}),s.jsx(lt,{path:"/vendor/dashboard",element:s.jsx(L2,{})}),s.jsx(lt,{path:"/vendor/home",element:s.jsx(L2,{})}),s.jsx(lt,{path:"/vendor/place-order",element:s.jsx(Mne,{})}),s.jsx(lt,{path:"/vendor/sales",element:s.jsx(Ine,{})}),s.jsx(lt,{path:"/vendor/messages",element:s.jsx(I2,{})}),s.jsx(lt,{path:"/vendor/order/:orderId/messages",element:s.jsx(I2,{})}),s.jsx(lt,{path:"/vendor/messages/compose",element:s.jsx(are,{})}),s.jsx(lt,{path:"/vendor/messages/search",element:s.jsx(ore,{})}),s.jsx(lt,{path:"/vendor/messages/settings",element:s.jsx(lre,{})}),s.jsx(lt,{path:"/vendor/customers",element:s.jsx(ire,{})}),s.jsx(lt,{path:"/vendor/add-products",element:s.jsx(cre,{})}),s.jsx(lt,{path:"/vendor/products",element:s.jsx(ere,{})}),s.jsx(lt,{path:"/vendor/add-product",element:s.jsx(Wne,{})}),s.jsx(lt,{path:"/vendor/orders",element:s.jsx(Bne,{})}),s.jsx(lt,{path:"/vendor/return-orders",element:s.jsx(dre,{})}),s.jsx(lt,{path:"/vendor/reviews",element:s.jsx(ure,{})}),s.jsx(lt,{path:"/vendor/income",element:s.jsx(hre,{})}),s.jsx(lt,{path:"/vendor/wallet",element:s.jsx(Zne,{})}),s.jsx(lt,{path:"/vendor/profile",element:s.jsx(Yne,{})}),s.jsx(lt,{path:"/vendor/profile-management",element:s.jsx(Xne,{})}),s.jsx(lt,{path:"/vendor/company",element:s.jsx(Qne,{})}),s.jsx(lt,{path:"/vendor/security",element:s.jsx(Jne,{})}),s.jsx(lt,{path:"/vendor/notifications",element:s.jsx(tre,{})}),s.jsx(lt,{path:"/vendor/settings",element:s.jsx(zne,{})}),s.jsx(lt,{path:"/vendor/summary",element:s.jsx(sre,{})}),s.jsx(lt,{path:"/vendor/analytics",element:s.jsx(nre,{})}),s.jsx(lt,{path:"/notifications",element:s.jsx(oa,{children:s.jsx(rre,{})})}),s.jsx(lt,{path:"*",element:s.jsx(lZ,{})})]})),pre=()=>(Yz(),j.useEffect(()=>{(async()=>{try{await qz.requestAllPermissions(),console.log("All permissions requested successfully")}catch(t){console.error("Failed to request permissions:",t)}})()},[]),s.jsx(kz,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(mre,{})})),gre=()=>{const[e,t]=j.useState(!0),n=()=>{t(!1)};return e?s.jsx(lB,{onComplete:n}):s.jsx(Kz,{children:s.jsx(nB,{children:s.jsx(o$,{children:s.jsxs(iB,{children:[s.jsx(U6,{}),s.jsx(wF,{}),s.jsx(pre,{})]})})})})},xre=()=>s.jsx(O$,{client:fre,children:s.jsx(rB,{children:s.jsx(gre,{})})});Nt.isNativePlatform()&&p0.initialize().then(()=>{console.log(" FCM Service initialized on app startup")}).catch(e=>{console.error(" FCM Service initialization failed:",e)});rP(document.getElementById("root")).render(s.jsx(xre,{}));export{Nt as C,Vb as W,ze as _,j as a,p0 as f,jre as i,s as j,co as r};
