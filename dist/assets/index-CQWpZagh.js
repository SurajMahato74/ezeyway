var r3=Object.defineProperty;var Kj=e=>{throw TypeError(e)};var i3=(e,t,s)=>t in e?r3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var zn=(e,t,s)=>i3(e,typeof t!="symbol"?t+"":t,s),kg=(e,t,s)=>t.has(e)||Kj("Cannot "+s);var Ce=(e,t,s)=>(kg(e,t,"read from private field"),s?s.call(e):t.get(e)),Lt=(e,t,s)=>t.has(e)?Kj("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),mt=(e,t,s,r)=>(kg(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),es=(e,t,s)=>(kg(e,t,"access private method"),s);var Eh=(e,t,s,r)=>({set _(i){mt(e,t,i,s)},get _(){return Ce(e,t,r)}});function a3(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var xi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Fm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var L2={exports:{}},$m={},M2={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qu=Symbol.for("react.element"),o3=Symbol.for("react.portal"),l3=Symbol.for("react.fragment"),c3=Symbol.for("react.strict_mode"),d3=Symbol.for("react.profiler"),u3=Symbol.for("react.provider"),h3=Symbol.for("react.context"),f3=Symbol.for("react.forward_ref"),m3=Symbol.for("react.suspense"),p3=Symbol.for("react.memo"),g3=Symbol.for("react.lazy"),Yj=Symbol.iterator;function v3(e){return e===null||typeof e!="object"?null:(e=Yj&&e[Yj]||e["@@iterator"],typeof e=="function"?e:null)}var I2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D2=Object.assign,F2={};function Oc(e,t,s){this.props=e,this.context=t,this.refs=F2,this.updater=s||I2}Oc.prototype.isReactComponent={};Oc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Oc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $2(){}$2.prototype=Oc.prototype;function i0(e,t,s){this.props=e,this.context=t,this.refs=F2,this.updater=s||I2}var a0=i0.prototype=new $2;a0.constructor=i0;D2(a0,Oc.prototype);a0.isPureReactComponent=!0;var Xj=Array.isArray,z2=Object.prototype.hasOwnProperty,o0={current:null},B2={key:!0,ref:!0,__self:!0,__source:!0};function V2(e,t,s){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)z2.call(t,r)&&!B2.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){for(var d=Array(c),f=0;f<c;f++)d[f]=arguments[f+2];i.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:qu,type:e,key:a,ref:o,props:i,_owner:o0.current}}function x3(e,t){return{$$typeof:qu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function l0(e){return typeof e=="object"&&e!==null&&e.$$typeof===qu}function y3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Qj=/\/+/g;function Cg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?y3(""+e.key):t.toString(36)}function lf(e,t,s,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case qu:case o3:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Cg(o,0):r,Xj(i)?(s="",e!=null&&(s=e.replace(Qj,"$&/")+"/"),lf(i,t,s,"",function(f){return f})):i!=null&&(l0(i)&&(i=x3(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Qj,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Xj(e))for(var c=0;c<e.length;c++){a=e[c];var d=r+Cg(a,c);o+=lf(a,t,s,d,i)}else if(d=v3(e),typeof d=="function")for(e=d.call(e),c=0;!(a=e.next()).done;)a=a.value,d=r+Cg(a,c++),o+=lf(a,t,s,d,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Th(e,t,s){if(e==null)return e;var r=[],i=0;return lf(e,r,"","",function(a){return t.call(s,a,i++)}),r}function b3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _s={current:null},cf={transition:null},w3={ReactCurrentDispatcher:_s,ReactCurrentBatchConfig:cf,ReactCurrentOwner:o0};function U2(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:Th,forEach:function(e,t,s){Th(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Th(e,function(){t++}),t},toArray:function(e){return Th(e,function(t){return t})||[]},only:function(e){if(!l0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};kt.Component=Oc;kt.Fragment=l3;kt.Profiler=d3;kt.PureComponent=i0;kt.StrictMode=c3;kt.Suspense=m3;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w3;kt.act=U2;kt.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=D2({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=o0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)z2.call(t,d)&&!B2.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=s;else if(1<d){c=Array(d);for(var f=0;f<d;f++)c[f]=arguments[f+2];r.children=c}return{$$typeof:qu,type:e.type,key:i,ref:a,props:r,_owner:o}};kt.createContext=function(e){return e={$$typeof:h3,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:u3,_context:e},e.Consumer=e};kt.createElement=V2;kt.createFactory=function(e){var t=V2.bind(null,e);return t.type=e,t};kt.createRef=function(){return{current:null}};kt.forwardRef=function(e){return{$$typeof:f3,render:e}};kt.isValidElement=l0;kt.lazy=function(e){return{$$typeof:g3,_payload:{_status:-1,_result:e},_init:b3}};kt.memo=function(e,t){return{$$typeof:p3,type:e,compare:t===void 0?null:t}};kt.startTransition=function(e){var t=cf.transition;cf.transition={};try{e()}finally{cf.transition=t}};kt.unstable_act=U2;kt.useCallback=function(e,t){return _s.current.useCallback(e,t)};kt.useContext=function(e){return _s.current.useContext(e)};kt.useDebugValue=function(){};kt.useDeferredValue=function(e){return _s.current.useDeferredValue(e)};kt.useEffect=function(e,t){return _s.current.useEffect(e,t)};kt.useId=function(){return _s.current.useId()};kt.useImperativeHandle=function(e,t,s){return _s.current.useImperativeHandle(e,t,s)};kt.useInsertionEffect=function(e,t){return _s.current.useInsertionEffect(e,t)};kt.useLayoutEffect=function(e,t){return _s.current.useLayoutEffect(e,t)};kt.useMemo=function(e,t){return _s.current.useMemo(e,t)};kt.useReducer=function(e,t,s){return _s.current.useReducer(e,t,s)};kt.useRef=function(e){return _s.current.useRef(e)};kt.useState=function(e){return _s.current.useState(e)};kt.useSyncExternalStore=function(e,t,s){return _s.current.useSyncExternalStore(e,t,s)};kt.useTransition=function(){return _s.current.useTransition()};kt.version="18.3.1";M2.exports=kt;var j=M2.exports;const Ne=Fm(j),c0=a3({__proto__:null,default:Ne},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j3=j,_3=Symbol.for("react.element"),N3=Symbol.for("react.fragment"),S3=Object.prototype.hasOwnProperty,k3=j3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C3={key:!0,ref:!0,__self:!0,__source:!0};function q2(e,t,s){var r,i={},a=null,o=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)S3.call(t,r)&&!C3.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:_3,type:e,key:a,ref:o,props:i,_owner:k3.current}}$m.Fragment=N3;$m.jsx=q2;$m.jsxs=q2;L2.exports=$m;var n=L2.exports,H2={exports:{}},Ys={},W2={exports:{}},Z2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,U){var V=Y.length;Y.push(U);e:for(;0<V;){var R=V-1>>>1,F=Y[R];if(0<i(F,U))Y[R]=U,Y[V]=F,V=R;else break e}}function s(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var U=Y[0],V=Y.pop();if(V!==U){Y[0]=V;e:for(var R=0,F=Y.length,q=F>>>1;R<q;){var W=2*(R+1)-1,K=Y[W],B=W+1,Z=Y[B];if(0>i(K,V))B<F&&0>i(Z,K)?(Y[R]=Z,Y[B]=V,R=B):(Y[R]=K,Y[W]=V,R=W);else if(B<F&&0>i(Z,V))Y[R]=Z,Y[B]=V,R=B;else break e}}return U}function i(Y,U){var V=Y.sortIndex-U.sortIndex;return V!==0?V:Y.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],f=[],m=1,h=null,u=3,p=!1,x=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(Y){for(var U=s(f);U!==null;){if(U.callback===null)r(f);else if(U.startTime<=Y)r(f),U.sortIndex=U.expirationTime,t(d,U);else break;U=s(f)}}function N(Y){if(v=!1,_(Y),!x)if(s(d)!==null)x=!0,G(k);else{var U=s(f);U!==null&&X(N,U.startTime-Y)}}function k(Y,U){x=!1,v&&(v=!1,y(T),T=-1),p=!0;var V=u;try{for(_(U),h=s(d);h!==null&&(!(h.expirationTime>U)||Y&&!E());){var R=h.callback;if(typeof R=="function"){h.callback=null,u=h.priorityLevel;var F=R(h.expirationTime<=U);U=e.unstable_now(),typeof F=="function"?h.callback=F:h===s(d)&&r(d),_(U)}else r(d);h=s(d)}if(h!==null)var q=!0;else{var W=s(f);W!==null&&X(N,W.startTime-U),q=!1}return q}finally{h=null,u=V,p=!1}}var I=!1,C=null,T=-1,M=5,P=-1;function E(){return!(e.unstable_now()-P<M)}function A(){if(C!==null){var Y=e.unstable_now();P=Y;var U=!0;try{U=C(!0,Y)}finally{U?z():(I=!1,C=null)}}else I=!1}var z;if(typeof b=="function")z=function(){b(A)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,$=O.port2;O.port1.onmessage=A,z=function(){$.postMessage(null)}}else z=function(){w(A,0)};function G(Y){C=Y,I||(I=!0,z())}function X(Y,U){T=w(function(){Y(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,G(k))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return s(d)},e.unstable_next=function(Y){switch(u){case 1:case 2:case 3:var U=3;break;default:U=u}var V=u;u=U;try{return Y()}finally{u=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,U){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var V=u;u=Y;try{return U()}finally{u=V}},e.unstable_scheduleCallback=function(Y,U,V){var R=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?R+V:R):V=R,Y){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=V+F,Y={id:m++,callback:U,priorityLevel:Y,startTime:V,expirationTime:F,sortIndex:-1},V>R?(Y.sortIndex=V,t(f,Y),s(d)===null&&Y===s(f)&&(v?(y(T),T=-1):v=!0,X(N,V-R))):(Y.sortIndex=F,t(d,Y),x||p||(x=!0,G(k))),Y},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(Y){var U=u;return function(){var V=u;u=U;try{return Y.apply(this,arguments)}finally{u=V}}}})(Z2);W2.exports=Z2;var P3=W2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E3=j,Ks=P3;function Re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G2=new Set,iu={};function Jo(e,t){lc(e,t),lc(e+"Capture",t)}function lc(e,t){for(iu[e]=t,e=0;e<t.length;e++)G2.add(t[e])}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$v=Object.prototype.hasOwnProperty,T3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jj={},e_={};function A3(e){return $v.call(e_,e)?!0:$v.call(Jj,e)?!1:T3.test(e)?e_[e]=!0:(Jj[e]=!0,!1)}function O3(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function R3(e,t,s,r){if(t===null||typeof t>"u"||O3(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ns(e,t,s,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qn[e]=new Ns(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qn[t]=new Ns(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qn[e]=new Ns(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qn[e]=new Ns(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qn[e]=new Ns(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qn[e]=new Ns(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qn[e]=new Ns(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qn[e]=new Ns(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qn[e]=new Ns(e,5,!1,e.toLowerCase(),null,!1,!1)});var d0=/[\-:]([a-z])/g;function u0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(d0,u0);Qn[t]=new Ns(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(d0,u0);Qn[t]=new Ns(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(d0,u0);Qn[t]=new Ns(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qn[e]=new Ns(e,1,!1,e.toLowerCase(),null,!1,!1)});Qn.xlinkHref=new Ns("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qn[e]=new Ns(e,1,!1,e.toLowerCase(),null,!0,!0)});function h0(e,t,s,r){var i=Qn.hasOwnProperty(t)?Qn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(R3(t,s,i,r)&&(s=null),r||i===null?A3(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):i.mustUseProperty?e[i.propertyName]=s===null?i.type===3?!1:"":s:(t=i.attributeName,r=i.attributeNamespace,s===null?e.removeAttribute(t):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var aa=E3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ah=Symbol.for("react.element"),wl=Symbol.for("react.portal"),jl=Symbol.for("react.fragment"),f0=Symbol.for("react.strict_mode"),zv=Symbol.for("react.profiler"),K2=Symbol.for("react.provider"),Y2=Symbol.for("react.context"),m0=Symbol.for("react.forward_ref"),Bv=Symbol.for("react.suspense"),Vv=Symbol.for("react.suspense_list"),p0=Symbol.for("react.memo"),ga=Symbol.for("react.lazy"),X2=Symbol.for("react.offscreen"),t_=Symbol.iterator;function fd(e){return e===null||typeof e!="object"?null:(e=t_&&e[t_]||e["@@iterator"],typeof e=="function"?e:null)}var un=Object.assign,Pg;function Ad(e){if(Pg===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Pg=t&&t[1]||""}return`
`+Pg+e}var Eg=!1;function Tg(e,t){if(!e||Eg)return"";Eg=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var d=`
`+i[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{Eg=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ad(e):""}function L3(e){switch(e.tag){case 5:return Ad(e.type);case 16:return Ad("Lazy");case 13:return Ad("Suspense");case 19:return Ad("SuspenseList");case 0:case 2:case 15:return e=Tg(e.type,!1),e;case 11:return e=Tg(e.type.render,!1),e;case 1:return e=Tg(e.type,!0),e;default:return""}}function Uv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jl:return"Fragment";case wl:return"Portal";case zv:return"Profiler";case f0:return"StrictMode";case Bv:return"Suspense";case Vv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Y2:return(e.displayName||"Context")+".Consumer";case K2:return(e._context.displayName||"Context")+".Provider";case m0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case p0:return t=e.displayName||null,t!==null?t:Uv(e.type)||"Memo";case ga:t=e._payload,e=e._init;try{return Uv(e(t))}catch{}}return null}function M3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uv(t);case 8:return t===f0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Va(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Q2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function I3(e){var t=Q2(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oh(e){e._valueTracker||(e._valueTracker=I3(e))}function J2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=Q2(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function Of(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qv(e,t){var s=t.checked;return un({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function n_(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=Va(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ek(e,t){t=t.checked,t!=null&&h0(e,"checked",t,!1)}function Hv(e,t){ek(e,t);var s=Va(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wv(e,t.type,s):t.hasOwnProperty("defaultValue")&&Wv(e,t.type,Va(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function s_(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Wv(e,t,s){(t!=="number"||Of(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Od=Array.isArray;function zl(e,t,s,r){if(e=e.options,t){t={};for(var i=0;i<s.length;i++)t["$"+s[i]]=!0;for(s=0;s<e.length;s++)i=t.hasOwnProperty("$"+e[s].value),e[s].selected!==i&&(e[s].selected=i),i&&r&&(e[s].defaultSelected=!0)}else{for(s=""+Va(s),t=null,i=0;i<e.length;i++){if(e[i].value===s){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Zv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Re(91));return un({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function r_(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(Re(92));if(Od(s)){if(1<s.length)throw Error(Re(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Va(s)}}function tk(e,t){var s=Va(t.value),r=Va(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function i_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rh,sk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rh=Rh||document.createElement("div"),Rh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function au(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var $d={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D3=["Webkit","ms","Moz","O"];Object.keys($d).forEach(function(e){D3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$d[t]=$d[e]})});function rk(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||$d.hasOwnProperty(e)&&$d[e]?(""+t).trim():t+"px"}function ik(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,i=rk(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,i):e[s]=i}}var F3=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kv(e,t){if(t){if(F3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Re(62))}}function Yv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xv=null;function g0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qv=null,Bl=null,Vl=null;function a_(e){if(e=Zu(e)){if(typeof Qv!="function")throw Error(Re(280));var t=e.stateNode;t&&(t=qm(t),Qv(e.stateNode,e.type,t))}}function ak(e){Bl?Vl?Vl.push(e):Vl=[e]:Bl=e}function ok(){if(Bl){var e=Bl,t=Vl;if(Vl=Bl=null,a_(e),t)for(e=0;e<t.length;e++)a_(t[e])}}function lk(e,t){return e(t)}function ck(){}var Ag=!1;function dk(e,t,s){if(Ag)return e(t,s);Ag=!0;try{return lk(e,t,s)}finally{Ag=!1,(Bl!==null||Vl!==null)&&(ck(),ok())}}function ou(e,t){var s=e.stateNode;if(s===null)return null;var r=qm(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Re(231,t,typeof s));return s}var Jv=!1;if(Gi)try{var md={};Object.defineProperty(md,"passive",{get:function(){Jv=!0}}),window.addEventListener("test",md,md),window.removeEventListener("test",md,md)}catch{Jv=!1}function $3(e,t,s,r,i,a,o,c,d){var f=Array.prototype.slice.call(arguments,3);try{t.apply(s,f)}catch(m){this.onError(m)}}var zd=!1,Rf=null,Lf=!1,ex=null,z3={onError:function(e){zd=!0,Rf=e}};function B3(e,t,s,r,i,a,o,c,d){zd=!1,Rf=null,$3.apply(z3,arguments)}function V3(e,t,s,r,i,a,o,c,d){if(B3.apply(this,arguments),zd){if(zd){var f=Rf;zd=!1,Rf=null}else throw Error(Re(198));Lf||(Lf=!0,ex=f)}}function el(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function uk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function o_(e){if(el(e)!==e)throw Error(Re(188))}function U3(e){var t=e.alternate;if(!t){if(t=el(e),t===null)throw Error(Re(188));return t!==e?null:e}for(var s=e,r=t;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){s=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return o_(i),e;if(a===r)return o_(i),t;a=a.sibling}throw Error(Re(188))}if(s.return!==r.return)s=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===s){o=!0,s=i,r=a;break}if(c===r){o=!0,r=i,s=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===s){o=!0,s=a,r=i;break}if(c===r){o=!0,r=a,s=i;break}c=c.sibling}if(!o)throw Error(Re(189))}}if(s.alternate!==r)throw Error(Re(190))}if(s.tag!==3)throw Error(Re(188));return s.stateNode.current===s?e:t}function hk(e){return e=U3(e),e!==null?fk(e):null}function fk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fk(e);if(t!==null)return t;e=e.sibling}return null}var mk=Ks.unstable_scheduleCallback,l_=Ks.unstable_cancelCallback,q3=Ks.unstable_shouldYield,H3=Ks.unstable_requestPaint,_n=Ks.unstable_now,W3=Ks.unstable_getCurrentPriorityLevel,v0=Ks.unstable_ImmediatePriority,pk=Ks.unstable_UserBlockingPriority,Mf=Ks.unstable_NormalPriority,Z3=Ks.unstable_LowPriority,gk=Ks.unstable_IdlePriority,zm=null,di=null;function G3(e){if(di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(zm,e,void 0,(e.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:X3,K3=Math.log,Y3=Math.LN2;function X3(e){return e>>>=0,e===0?32:31-(K3(e)/Y3|0)|0}var Lh=64,Mh=4194304;function Rd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function If(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=s&268435455;if(o!==0){var c=o&~i;c!==0?r=Rd(c):(a&=o,a!==0&&(r=Rd(a)))}else o=s&~i,o!==0?r=Rd(o):a!==0&&(r=Rd(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-Dr(t),i=1<<s,r|=e[s],t&=~i;return r}function Q3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J3(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Dr(a),c=1<<o,d=i[o];d===-1?(!(c&s)||c&r)&&(i[o]=Q3(c,t)):d<=t&&(e.expiredLanes|=c),a&=~c}}function tx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vk(){var e=Lh;return Lh<<=1,!(Lh&4194240)&&(Lh=64),e}function Og(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Hu(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Dr(t),e[t]=s}function eM(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var i=31-Dr(s),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,s&=~a}}function x0(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-Dr(s),i=1<<r;i&t|e[r]&t&&(e[r]|=t),s&=~i}}var Dt=0;function xk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yk,y0,bk,wk,jk,nx=!1,Ih=[],Ea=null,Ta=null,Aa=null,lu=new Map,cu=new Map,ya=[],tM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c_(e,t){switch(e){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":lu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(t.pointerId)}}function pd(e,t,s,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Zu(t),t!==null&&y0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function nM(e,t,s,r,i){switch(t){case"focusin":return Ea=pd(Ea,e,t,s,r,i),!0;case"dragenter":return Ta=pd(Ta,e,t,s,r,i),!0;case"mouseover":return Aa=pd(Aa,e,t,s,r,i),!0;case"pointerover":var a=i.pointerId;return lu.set(a,pd(lu.get(a)||null,e,t,s,r,i)),!0;case"gotpointercapture":return a=i.pointerId,cu.set(a,pd(cu.get(a)||null,e,t,s,r,i)),!0}return!1}function _k(e){var t=yo(e.target);if(t!==null){var s=el(t);if(s!==null){if(t=s.tag,t===13){if(t=uk(s),t!==null){e.blockedOn=t,jk(e.priority,function(){bk(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function df(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=sx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);Xv=r,s.target.dispatchEvent(r),Xv=null}else return t=Zu(s),t!==null&&y0(t),e.blockedOn=s,!1;t.shift()}return!0}function d_(e,t,s){df(e)&&s.delete(t)}function sM(){nx=!1,Ea!==null&&df(Ea)&&(Ea=null),Ta!==null&&df(Ta)&&(Ta=null),Aa!==null&&df(Aa)&&(Aa=null),lu.forEach(d_),cu.forEach(d_)}function gd(e,t){e.blockedOn===t&&(e.blockedOn=null,nx||(nx=!0,Ks.unstable_scheduleCallback(Ks.unstable_NormalPriority,sM)))}function du(e){function t(i){return gd(i,e)}if(0<Ih.length){gd(Ih[0],e);for(var s=1;s<Ih.length;s++){var r=Ih[s];r.blockedOn===e&&(r.blockedOn=null)}}for(Ea!==null&&gd(Ea,e),Ta!==null&&gd(Ta,e),Aa!==null&&gd(Aa,e),lu.forEach(t),cu.forEach(t),s=0;s<ya.length;s++)r=ya[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<ya.length&&(s=ya[0],s.blockedOn===null);)_k(s),s.blockedOn===null&&ya.shift()}var Ul=aa.ReactCurrentBatchConfig,Df=!0;function rM(e,t,s,r){var i=Dt,a=Ul.transition;Ul.transition=null;try{Dt=1,b0(e,t,s,r)}finally{Dt=i,Ul.transition=a}}function iM(e,t,s,r){var i=Dt,a=Ul.transition;Ul.transition=null;try{Dt=4,b0(e,t,s,r)}finally{Dt=i,Ul.transition=a}}function b0(e,t,s,r){if(Df){var i=sx(e,t,s,r);if(i===null)Vg(e,t,r,Ff,s),c_(e,r);else if(nM(i,e,t,s,r))r.stopPropagation();else if(c_(e,r),t&4&&-1<tM.indexOf(e)){for(;i!==null;){var a=Zu(i);if(a!==null&&yk(a),a=sx(e,t,s,r),a===null&&Vg(e,t,r,Ff,s),a===i)break;i=a}i!==null&&r.stopPropagation()}else Vg(e,t,r,null,s)}}var Ff=null;function sx(e,t,s,r){if(Ff=null,e=g0(r),e=yo(e),e!==null)if(t=el(e),t===null)e=null;else if(s=t.tag,s===13){if(e=uk(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ff=e,null}function Nk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W3()){case v0:return 1;case pk:return 4;case Mf:case Z3:return 16;case gk:return 536870912;default:return 16}default:return 16}}var ka=null,w0=null,uf=null;function Sk(){if(uf)return uf;var e,t=w0,s=t.length,r,i="value"in ka?ka.value:ka.textContent,a=i.length;for(e=0;e<s&&t[e]===i[e];e++);var o=s-e;for(r=1;r<=o&&t[s-r]===i[a-r];r++);return uf=i.slice(e,1<r?1-r:void 0)}function hf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dh(){return!0}function u_(){return!1}function Xs(e){function t(s,r,i,a,o){this._reactName=s,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(s=e[c],this[c]=s?s(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Dh:u_,this.isPropagationStopped=u_,this}return un(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Dh)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Dh)},persist:function(){},isPersistent:Dh}),t}var Rc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j0=Xs(Rc),Wu=un({},Rc,{view:0,detail:0}),aM=Xs(Wu),Rg,Lg,vd,Bm=un({},Wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vd&&(vd&&e.type==="mousemove"?(Rg=e.screenX-vd.screenX,Lg=e.screenY-vd.screenY):Lg=Rg=0,vd=e),Rg)},movementY:function(e){return"movementY"in e?e.movementY:Lg}}),h_=Xs(Bm),oM=un({},Bm,{dataTransfer:0}),lM=Xs(oM),cM=un({},Wu,{relatedTarget:0}),Mg=Xs(cM),dM=un({},Rc,{animationName:0,elapsedTime:0,pseudoElement:0}),uM=Xs(dM),hM=un({},Rc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fM=Xs(hM),mM=un({},Rc,{data:0}),f_=Xs(mM),pM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vM[e])?!!t[e]:!1}function _0(){return xM}var yM=un({},Wu,{key:function(e){if(e.key){var t=pM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_0,charCode:function(e){return e.type==="keypress"?hf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bM=Xs(yM),wM=un({},Bm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m_=Xs(wM),jM=un({},Wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_0}),_M=Xs(jM),NM=un({},Rc,{propertyName:0,elapsedTime:0,pseudoElement:0}),SM=Xs(NM),kM=un({},Bm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CM=Xs(kM),PM=[9,13,27,32],N0=Gi&&"CompositionEvent"in window,Bd=null;Gi&&"documentMode"in document&&(Bd=document.documentMode);var EM=Gi&&"TextEvent"in window&&!Bd,kk=Gi&&(!N0||Bd&&8<Bd&&11>=Bd),p_=" ",g_=!1;function Ck(e,t){switch(e){case"keyup":return PM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _l=!1;function TM(e,t){switch(e){case"compositionend":return Pk(t);case"keypress":return t.which!==32?null:(g_=!0,p_);case"textInput":return e=t.data,e===p_&&g_?null:e;default:return null}}function AM(e,t){if(_l)return e==="compositionend"||!N0&&Ck(e,t)?(e=Sk(),uf=w0=ka=null,_l=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kk&&t.locale!=="ko"?null:t.data;default:return null}}var OM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OM[e.type]:t==="textarea"}function Ek(e,t,s,r){ak(r),t=$f(t,"onChange"),0<t.length&&(s=new j0("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var Vd=null,uu=null;function RM(e){zk(e,0)}function Vm(e){var t=kl(e);if(J2(t))return e}function LM(e,t){if(e==="change")return t}var Tk=!1;if(Gi){var Ig;if(Gi){var Dg="oninput"in document;if(!Dg){var x_=document.createElement("div");x_.setAttribute("oninput","return;"),Dg=typeof x_.oninput=="function"}Ig=Dg}else Ig=!1;Tk=Ig&&(!document.documentMode||9<document.documentMode)}function y_(){Vd&&(Vd.detachEvent("onpropertychange",Ak),uu=Vd=null)}function Ak(e){if(e.propertyName==="value"&&Vm(uu)){var t=[];Ek(t,uu,e,g0(e)),dk(RM,t)}}function MM(e,t,s){e==="focusin"?(y_(),Vd=t,uu=s,Vd.attachEvent("onpropertychange",Ak)):e==="focusout"&&y_()}function IM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vm(uu)}function DM(e,t){if(e==="click")return Vm(t)}function FM(e,t){if(e==="input"||e==="change")return Vm(t)}function $M(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zr=typeof Object.is=="function"?Object.is:$M;function hu(e,t){if(zr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var i=s[r];if(!$v.call(t,i)||!zr(e[i],t[i]))return!1}return!0}function b_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function w_(e,t){var s=b_(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=b_(s)}}function Ok(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ok(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Rk(){for(var e=window,t=Of();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Of(e.document)}return t}function S0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zM(e){var t=Rk(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Ok(s.ownerDocument.documentElement,s)){if(r!==null&&S0(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=s.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=w_(s,a);var o=w_(s,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BM=Gi&&"documentMode"in document&&11>=document.documentMode,Nl=null,rx=null,Ud=null,ix=!1;function j_(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ix||Nl==null||Nl!==Of(r)||(r=Nl,"selectionStart"in r&&S0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ud&&hu(Ud,r)||(Ud=r,r=$f(rx,"onSelect"),0<r.length&&(t=new j0("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=Nl)))}function Fh(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Sl={animationend:Fh("Animation","AnimationEnd"),animationiteration:Fh("Animation","AnimationIteration"),animationstart:Fh("Animation","AnimationStart"),transitionend:Fh("Transition","TransitionEnd")},Fg={},Lk={};Gi&&(Lk=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);function Um(e){if(Fg[e])return Fg[e];if(!Sl[e])return e;var t=Sl[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Lk)return Fg[e]=t[s];return e}var Mk=Um("animationend"),Ik=Um("animationiteration"),Dk=Um("animationstart"),Fk=Um("transitionend"),$k=new Map,__="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xa(e,t){$k.set(e,t),Jo(t,[e])}for(var $g=0;$g<__.length;$g++){var zg=__[$g],VM=zg.toLowerCase(),UM=zg[0].toUpperCase()+zg.slice(1);Xa(VM,"on"+UM)}Xa(Mk,"onAnimationEnd");Xa(Ik,"onAnimationIteration");Xa(Dk,"onAnimationStart");Xa("dblclick","onDoubleClick");Xa("focusin","onFocus");Xa("focusout","onBlur");Xa(Fk,"onTransitionEnd");lc("onMouseEnter",["mouseout","mouseover"]);lc("onMouseLeave",["mouseout","mouseover"]);lc("onPointerEnter",["pointerout","pointerover"]);lc("onPointerLeave",["pointerout","pointerover"]);Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ld="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ld));function N_(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,V3(r,t,void 0,e),e.currentTarget=null}function zk(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],d=c.instance,f=c.currentTarget;if(c=c.listener,d!==a&&i.isPropagationStopped())break e;N_(i,c,f),a=d}else for(o=0;o<r.length;o++){if(c=r[o],d=c.instance,f=c.currentTarget,c=c.listener,d!==a&&i.isPropagationStopped())break e;N_(i,c,f),a=d}}}if(Lf)throw e=ex,Lf=!1,ex=null,e}function Qt(e,t){var s=t[dx];s===void 0&&(s=t[dx]=new Set);var r=e+"__bubble";s.has(r)||(Bk(t,e,2,!1),s.add(r))}function Bg(e,t,s){var r=0;t&&(r|=4),Bk(s,e,r,t)}var $h="_reactListening"+Math.random().toString(36).slice(2);function fu(e){if(!e[$h]){e[$h]=!0,G2.forEach(function(s){s!=="selectionchange"&&(qM.has(s)||Bg(s,!1,e),Bg(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$h]||(t[$h]=!0,Bg("selectionchange",!1,t))}}function Bk(e,t,s,r){switch(Nk(t)){case 1:var i=rM;break;case 4:i=iM;break;default:i=b0}s=i.bind(null,t,s,e),i=void 0,!Jv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,s,{capture:!0,passive:i}):e.addEventListener(t,s,!0):i!==void 0?e.addEventListener(t,s,{passive:i}):e.addEventListener(t,s,!1)}function Vg(e,t,s,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;c!==null;){if(o=yo(c),o===null)return;if(d=o.tag,d===5||d===6){r=a=o;continue e}c=c.parentNode}}r=r.return}dk(function(){var f=a,m=g0(s),h=[];e:{var u=$k.get(e);if(u!==void 0){var p=j0,x=e;switch(e){case"keypress":if(hf(s)===0)break e;case"keydown":case"keyup":p=bM;break;case"focusin":x="focus",p=Mg;break;case"focusout":x="blur",p=Mg;break;case"beforeblur":case"afterblur":p=Mg;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=h_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=lM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=_M;break;case Mk:case Ik:case Dk:p=uM;break;case Fk:p=SM;break;case"scroll":p=aM;break;case"wheel":p=CM;break;case"copy":case"cut":case"paste":p=fM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=m_}var v=(t&4)!==0,w=!v&&e==="scroll",y=v?u!==null?u+"Capture":null:u;v=[];for(var b=f,_;b!==null;){_=b;var N=_.stateNode;if(_.tag===5&&N!==null&&(_=N,y!==null&&(N=ou(b,y),N!=null&&v.push(mu(b,N,_)))),w)break;b=b.return}0<v.length&&(u=new p(u,x,null,s,m),h.push({event:u,listeners:v}))}}if(!(t&7)){e:{if(u=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",u&&s!==Xv&&(x=s.relatedTarget||s.fromElement)&&(yo(x)||x[Ki]))break e;if((p||u)&&(u=m.window===m?m:(u=m.ownerDocument)?u.defaultView||u.parentWindow:window,p?(x=s.relatedTarget||s.toElement,p=f,x=x?yo(x):null,x!==null&&(w=el(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=f),p!==x)){if(v=h_,N="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=m_,N="onPointerLeave",y="onPointerEnter",b="pointer"),w=p==null?u:kl(p),_=x==null?u:kl(x),u=new v(N,b+"leave",p,s,m),u.target=w,u.relatedTarget=_,N=null,yo(m)===f&&(v=new v(y,b+"enter",x,s,m),v.target=_,v.relatedTarget=w,N=v),w=N,p&&x)t:{for(v=p,y=x,b=0,_=v;_;_=fl(_))b++;for(_=0,N=y;N;N=fl(N))_++;for(;0<b-_;)v=fl(v),b--;for(;0<_-b;)y=fl(y),_--;for(;b--;){if(v===y||y!==null&&v===y.alternate)break t;v=fl(v),y=fl(y)}v=null}else v=null;p!==null&&S_(h,u,p,v,!1),x!==null&&w!==null&&S_(h,w,x,v,!0)}}e:{if(u=f?kl(f):window,p=u.nodeName&&u.nodeName.toLowerCase(),p==="select"||p==="input"&&u.type==="file")var k=LM;else if(v_(u))if(Tk)k=FM;else{k=IM;var I=MM}else(p=u.nodeName)&&p.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(k=DM);if(k&&(k=k(e,f))){Ek(h,k,s,m);break e}I&&I(e,u,f),e==="focusout"&&(I=u._wrapperState)&&I.controlled&&u.type==="number"&&Wv(u,"number",u.value)}switch(I=f?kl(f):window,e){case"focusin":(v_(I)||I.contentEditable==="true")&&(Nl=I,rx=f,Ud=null);break;case"focusout":Ud=rx=Nl=null;break;case"mousedown":ix=!0;break;case"contextmenu":case"mouseup":case"dragend":ix=!1,j_(h,s,m);break;case"selectionchange":if(BM)break;case"keydown":case"keyup":j_(h,s,m)}var C;if(N0)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else _l?Ck(e,s)&&(T="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(T="onCompositionStart");T&&(kk&&s.locale!=="ko"&&(_l||T!=="onCompositionStart"?T==="onCompositionEnd"&&_l&&(C=Sk()):(ka=m,w0="value"in ka?ka.value:ka.textContent,_l=!0)),I=$f(f,T),0<I.length&&(T=new f_(T,e,null,s,m),h.push({event:T,listeners:I}),C?T.data=C:(C=Pk(s),C!==null&&(T.data=C)))),(C=EM?TM(e,s):AM(e,s))&&(f=$f(f,"onBeforeInput"),0<f.length&&(m=new f_("onBeforeInput","beforeinput",null,s,m),h.push({event:m,listeners:f}),m.data=C))}zk(h,t)})}function mu(e,t,s){return{instance:e,listener:t,currentTarget:s}}function $f(e,t){for(var s=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ou(e,s),a!=null&&r.unshift(mu(e,a,i)),a=ou(e,t),a!=null&&r.push(mu(e,a,i))),e=e.return}return r}function fl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function S_(e,t,s,r,i){for(var a=t._reactName,o=[];s!==null&&s!==r;){var c=s,d=c.alternate,f=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&f!==null&&(c=f,i?(d=ou(s,a),d!=null&&o.unshift(mu(s,d,c))):i||(d=ou(s,a),d!=null&&o.push(mu(s,d,c)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var HM=/\r\n?/g,WM=/\u0000|\uFFFD/g;function k_(e){return(typeof e=="string"?e:""+e).replace(HM,`
`).replace(WM,"")}function zh(e,t,s){if(t=k_(t),k_(e)!==t&&s)throw Error(Re(425))}function zf(){}var ax=null,ox=null;function lx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cx=typeof setTimeout=="function"?setTimeout:void 0,ZM=typeof clearTimeout=="function"?clearTimeout:void 0,C_=typeof Promise=="function"?Promise:void 0,GM=typeof queueMicrotask=="function"?queueMicrotask:typeof C_<"u"?function(e){return C_.resolve(null).then(e).catch(KM)}:cx;function KM(e){setTimeout(function(){throw e})}function Ug(e,t){var s=t,r=0;do{var i=s.nextSibling;if(e.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(r===0){e.removeChild(i),du(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=i}while(s);du(t)}function Oa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function P_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Lc=Math.random().toString(36).slice(2),ii="__reactFiber$"+Lc,pu="__reactProps$"+Lc,Ki="__reactContainer$"+Lc,dx="__reactEvents$"+Lc,YM="__reactListeners$"+Lc,XM="__reactHandles$"+Lc;function yo(e){var t=e[ii];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ki]||s[ii]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=P_(e);e!==null;){if(s=e[ii])return s;e=P_(e)}return t}e=s,s=e.parentNode}return null}function Zu(e){return e=e[ii]||e[Ki],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Re(33))}function qm(e){return e[pu]||null}var ux=[],Cl=-1;function Qa(e){return{current:e}}function en(e){0>Cl||(e.current=ux[Cl],ux[Cl]=null,Cl--)}function Gt(e,t){Cl++,ux[Cl]=e.current,e.current=t}var Ua={},cs=Qa(Ua),Ls=Qa(!1),$o=Ua;function cc(e,t){var s=e.type.contextTypes;if(!s)return Ua;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ms(e){return e=e.childContextTypes,e!=null}function Bf(){en(Ls),en(cs)}function E_(e,t,s){if(cs.current!==Ua)throw Error(Re(168));Gt(cs,t),Gt(Ls,s)}function Vk(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Re(108,M3(e)||"Unknown",i));return un({},s,r)}function Vf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ua,$o=cs.current,Gt(cs,e),Gt(Ls,Ls.current),!0}function T_(e,t,s){var r=e.stateNode;if(!r)throw Error(Re(169));s?(e=Vk(e,t,$o),r.__reactInternalMemoizedMergedChildContext=e,en(Ls),en(cs),Gt(cs,e)):en(Ls),Gt(Ls,s)}var $i=null,Hm=!1,qg=!1;function Uk(e){$i===null?$i=[e]:$i.push(e)}function QM(e){Hm=!0,Uk(e)}function Ja(){if(!qg&&$i!==null){qg=!0;var e=0,t=Dt;try{var s=$i;for(Dt=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}$i=null,Hm=!1}catch(i){throw $i!==null&&($i=$i.slice(e+1)),mk(v0,Ja),i}finally{Dt=t,qg=!1}}return null}var Pl=[],El=0,Uf=null,qf=0,ir=[],ar=0,zo=null,Ui=1,qi="";function fo(e,t){Pl[El++]=qf,Pl[El++]=Uf,Uf=e,qf=t}function qk(e,t,s){ir[ar++]=Ui,ir[ar++]=qi,ir[ar++]=zo,zo=e;var r=Ui;e=qi;var i=32-Dr(r)-1;r&=~(1<<i),s+=1;var a=32-Dr(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ui=1<<32-Dr(t)+i|s<<i|r,qi=a+e}else Ui=1<<a|s<<i|r,qi=e}function k0(e){e.return!==null&&(fo(e,1),qk(e,1,0))}function C0(e){for(;e===Uf;)Uf=Pl[--El],Pl[El]=null,qf=Pl[--El],Pl[El]=null;for(;e===zo;)zo=ir[--ar],ir[ar]=null,qi=ir[--ar],ir[ar]=null,Ui=ir[--ar],ir[ar]=null}var Zs=null,Ws=null,tn=!1,Tr=null;function Hk(e,t){var s=or(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function A_(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zs=e,Ws=Oa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zs=e,Ws=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=zo!==null?{id:Ui,overflow:qi}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=or(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Zs=e,Ws=null,!0):!1;default:return!1}}function hx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fx(e){if(tn){var t=Ws;if(t){var s=t;if(!A_(e,t)){if(hx(e))throw Error(Re(418));t=Oa(s.nextSibling);var r=Zs;t&&A_(e,t)?Hk(r,s):(e.flags=e.flags&-4097|2,tn=!1,Zs=e)}}else{if(hx(e))throw Error(Re(418));e.flags=e.flags&-4097|2,tn=!1,Zs=e}}}function O_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zs=e}function Bh(e){if(e!==Zs)return!1;if(!tn)return O_(e),tn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!lx(e.type,e.memoizedProps)),t&&(t=Ws)){if(hx(e))throw Wk(),Error(Re(418));for(;t;)Hk(e,t),t=Oa(t.nextSibling)}if(O_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Ws=Oa(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Ws=null}}else Ws=Zs?Oa(e.stateNode.nextSibling):null;return!0}function Wk(){for(var e=Ws;e;)e=Oa(e.nextSibling)}function dc(){Ws=Zs=null,tn=!1}function P0(e){Tr===null?Tr=[e]:Tr.push(e)}var JM=aa.ReactCurrentBatchConfig;function xd(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Re(309));var r=s.stateNode}if(!r)throw Error(Re(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Re(284));if(!s._owner)throw Error(Re(290,e))}return e}function Vh(e,t){throw e=Object.prototype.toString.call(t),Error(Re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function R_(e){var t=e._init;return t(e._payload)}function Zk(e){function t(y,b){if(e){var _=y.deletions;_===null?(y.deletions=[b],y.flags|=16):_.push(b)}}function s(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=Ia(y,b),y.index=0,y.sibling=null,y}function a(y,b,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<b?(y.flags|=2,b):_):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function c(y,b,_,N){return b===null||b.tag!==6?(b=Xg(_,y.mode,N),b.return=y,b):(b=i(b,_),b.return=y,b)}function d(y,b,_,N){var k=_.type;return k===jl?m(y,b,_.props.children,N,_.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ga&&R_(k)===b.type)?(N=i(b,_.props),N.ref=xd(y,b,_),N.return=y,N):(N=yf(_.type,_.key,_.props,null,y.mode,N),N.ref=xd(y,b,_),N.return=y,N)}function f(y,b,_,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=Qg(_,y.mode,N),b.return=y,b):(b=i(b,_.children||[]),b.return=y,b)}function m(y,b,_,N,k){return b===null||b.tag!==7?(b=Oo(_,y.mode,N,k),b.return=y,b):(b=i(b,_),b.return=y,b)}function h(y,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Xg(""+b,y.mode,_),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ah:return _=yf(b.type,b.key,b.props,null,y.mode,_),_.ref=xd(y,null,b),_.return=y,_;case wl:return b=Qg(b,y.mode,_),b.return=y,b;case ga:var N=b._init;return h(y,N(b._payload),_)}if(Od(b)||fd(b))return b=Oo(b,y.mode,_,null),b.return=y,b;Vh(y,b)}return null}function u(y,b,_,N){var k=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:c(y,b,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ah:return _.key===k?d(y,b,_,N):null;case wl:return _.key===k?f(y,b,_,N):null;case ga:return k=_._init,u(y,b,k(_._payload),N)}if(Od(_)||fd(_))return k!==null?null:m(y,b,_,N,null);Vh(y,_)}return null}function p(y,b,_,N,k){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(_)||null,c(b,y,""+N,k);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ah:return y=y.get(N.key===null?_:N.key)||null,d(b,y,N,k);case wl:return y=y.get(N.key===null?_:N.key)||null,f(b,y,N,k);case ga:var I=N._init;return p(y,b,_,I(N._payload),k)}if(Od(N)||fd(N))return y=y.get(_)||null,m(b,y,N,k,null);Vh(b,N)}return null}function x(y,b,_,N){for(var k=null,I=null,C=b,T=b=0,M=null;C!==null&&T<_.length;T++){C.index>T?(M=C,C=null):M=C.sibling;var P=u(y,C,_[T],N);if(P===null){C===null&&(C=M);break}e&&C&&P.alternate===null&&t(y,C),b=a(P,b,T),I===null?k=P:I.sibling=P,I=P,C=M}if(T===_.length)return s(y,C),tn&&fo(y,T),k;if(C===null){for(;T<_.length;T++)C=h(y,_[T],N),C!==null&&(b=a(C,b,T),I===null?k=C:I.sibling=C,I=C);return tn&&fo(y,T),k}for(C=r(y,C);T<_.length;T++)M=p(C,y,T,_[T],N),M!==null&&(e&&M.alternate!==null&&C.delete(M.key===null?T:M.key),b=a(M,b,T),I===null?k=M:I.sibling=M,I=M);return e&&C.forEach(function(E){return t(y,E)}),tn&&fo(y,T),k}function v(y,b,_,N){var k=fd(_);if(typeof k!="function")throw Error(Re(150));if(_=k.call(_),_==null)throw Error(Re(151));for(var I=k=null,C=b,T=b=0,M=null,P=_.next();C!==null&&!P.done;T++,P=_.next()){C.index>T?(M=C,C=null):M=C.sibling;var E=u(y,C,P.value,N);if(E===null){C===null&&(C=M);break}e&&C&&E.alternate===null&&t(y,C),b=a(E,b,T),I===null?k=E:I.sibling=E,I=E,C=M}if(P.done)return s(y,C),tn&&fo(y,T),k;if(C===null){for(;!P.done;T++,P=_.next())P=h(y,P.value,N),P!==null&&(b=a(P,b,T),I===null?k=P:I.sibling=P,I=P);return tn&&fo(y,T),k}for(C=r(y,C);!P.done;T++,P=_.next())P=p(C,y,T,P.value,N),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?T:P.key),b=a(P,b,T),I===null?k=P:I.sibling=P,I=P);return e&&C.forEach(function(A){return t(y,A)}),tn&&fo(y,T),k}function w(y,b,_,N){if(typeof _=="object"&&_!==null&&_.type===jl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ah:e:{for(var k=_.key,I=b;I!==null;){if(I.key===k){if(k=_.type,k===jl){if(I.tag===7){s(y,I.sibling),b=i(I,_.props.children),b.return=y,y=b;break e}}else if(I.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ga&&R_(k)===I.type){s(y,I.sibling),b=i(I,_.props),b.ref=xd(y,I,_),b.return=y,y=b;break e}s(y,I);break}else t(y,I);I=I.sibling}_.type===jl?(b=Oo(_.props.children,y.mode,N,_.key),b.return=y,y=b):(N=yf(_.type,_.key,_.props,null,y.mode,N),N.ref=xd(y,b,_),N.return=y,y=N)}return o(y);case wl:e:{for(I=_.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){s(y,b.sibling),b=i(b,_.children||[]),b.return=y,y=b;break e}else{s(y,b);break}else t(y,b);b=b.sibling}b=Qg(_,y.mode,N),b.return=y,y=b}return o(y);case ga:return I=_._init,w(y,b,I(_._payload),N)}if(Od(_))return x(y,b,_,N);if(fd(_))return v(y,b,_,N);Vh(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(s(y,b.sibling),b=i(b,_),b.return=y,y=b):(s(y,b),b=Xg(_,y.mode,N),b.return=y,y=b),o(y)):s(y,b)}return w}var uc=Zk(!0),Gk=Zk(!1),Hf=Qa(null),Wf=null,Tl=null,E0=null;function T0(){E0=Tl=Wf=null}function A0(e){var t=Hf.current;en(Hf),e._currentValue=t}function mx(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function ql(e,t){Wf=e,E0=Tl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(As=!0),e.firstContext=null)}function fr(e){var t=e._currentValue;if(E0!==e)if(e={context:e,memoizedValue:t,next:null},Tl===null){if(Wf===null)throw Error(Re(308));Tl=e,Wf.dependencies={lanes:0,firstContext:e}}else Tl=Tl.next=e;return t}var bo=null;function O0(e){bo===null?bo=[e]:bo.push(e)}function Kk(e,t,s,r){var i=t.interleaved;return i===null?(s.next=s,O0(t)):(s.next=i.next,i.next=s),t.interleaved=s,Yi(e,r)}function Yi(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var va=!1;function R0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ot&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Yi(e,s)}return i=r.interleaved,i===null?(t.next=t,O0(r)):(t.next=i.next,i.next=t),r.interleaved=t,Yi(e,s)}function ff(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,x0(e,s)}}function L_(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?i=a=t:a=a.next=t}else i=a=t;s={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Zf(e,t,s,r){var i=e.updateQueue;va=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,f=d.next;d.next=null,o===null?a=f:o.next=f,o=d;var m=e.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=d))}if(a!==null){var h=i.baseState;o=0,m=f=d=null,c=a;do{var u=c.lane,p=c.eventTime;if((r&u)===u){m!==null&&(m=m.next={eventTime:p,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var x=e,v=c;switch(u=t,p=s,v.tag){case 1:if(x=v.payload,typeof x=="function"){h=x.call(p,h,u);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,u=typeof x=="function"?x.call(p,h,u):x,u==null)break e;h=un({},h,u);break e;case 2:va=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,u=i.effects,u===null?i.effects=[c]:u.push(c))}else p={eventTime:p,lane:u,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(f=m=p,d=h):m=m.next=p,o|=u;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;u=c,c=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}while(!0);if(m===null&&(d=h),i.baseState=d,i.firstBaseUpdate=f,i.lastBaseUpdate=m,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Vo|=o,e.lanes=o,e.memoizedState=h}}function M_(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=s,typeof i!="function")throw Error(Re(191,i));i.call(r)}}}var Gu={},ui=Qa(Gu),gu=Qa(Gu),vu=Qa(Gu);function wo(e){if(e===Gu)throw Error(Re(174));return e}function L0(e,t){switch(Gt(vu,t),Gt(gu,e),Gt(ui,Gu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gv(t,e)}en(ui),Gt(ui,t)}function hc(){en(ui),en(gu),en(vu)}function Xk(e){wo(vu.current);var t=wo(ui.current),s=Gv(t,e.type);t!==s&&(Gt(gu,e),Gt(ui,s))}function M0(e){gu.current===e&&(en(ui),en(gu))}var on=Qa(0);function Gf(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hg=[];function I0(){for(var e=0;e<Hg.length;e++)Hg[e]._workInProgressVersionPrimary=null;Hg.length=0}var mf=aa.ReactCurrentDispatcher,Wg=aa.ReactCurrentBatchConfig,Bo=0,cn=null,In=null,Vn=null,Kf=!1,qd=!1,xu=0,eI=0;function ts(){throw Error(Re(321))}function D0(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!zr(e[s],t[s]))return!1;return!0}function F0(e,t,s,r,i,a){if(Bo=a,cn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mf.current=e===null||e.memoizedState===null?rI:iI,e=s(r,i),qd){a=0;do{if(qd=!1,xu=0,25<=a)throw Error(Re(301));a+=1,Vn=In=null,t.updateQueue=null,mf.current=aI,e=s(r,i)}while(qd)}if(mf.current=Yf,t=In!==null&&In.next!==null,Bo=0,Vn=In=cn=null,Kf=!1,t)throw Error(Re(300));return e}function $0(){var e=xu!==0;return xu=0,e}function ti(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?cn.memoizedState=Vn=e:Vn=Vn.next=e,Vn}function mr(){if(In===null){var e=cn.alternate;e=e!==null?e.memoizedState:null}else e=In.next;var t=Vn===null?cn.memoizedState:Vn.next;if(t!==null)Vn=t,In=e;else{if(e===null)throw Error(Re(310));In=e,e={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},Vn===null?cn.memoizedState=Vn=e:Vn=Vn.next=e}return Vn}function yu(e,t){return typeof t=="function"?t(e):t}function Zg(e){var t=mr(),s=t.queue;if(s===null)throw Error(Re(311));s.lastRenderedReducer=e;var r=In,i=r.baseQueue,a=s.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=o=null,d=null,f=a;do{var m=f.lane;if((Bo&m)===m)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var h={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(c=d=h,o=r):d=d.next=h,cn.lanes|=m,Vo|=m}f=f.next}while(f!==null&&f!==a);d===null?o=r:d.next=c,zr(r,t.memoizedState)||(As=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=d,s.lastRenderedState=r}if(e=s.interleaved,e!==null){i=e;do a=i.lane,cn.lanes|=a,Vo|=a,i=i.next;while(i!==e)}else i===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Gg(e){var t=mr(),s=t.queue;if(s===null)throw Error(Re(311));s.lastRenderedReducer=e;var r=s.dispatch,i=s.pending,a=t.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);zr(a,t.memoizedState)||(As=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),s.lastRenderedState=a}return[a,r]}function Qk(){}function Jk(e,t){var s=cn,r=mr(),i=t(),a=!zr(r.memoizedState,i);if(a&&(r.memoizedState=i,As=!0),r=r.queue,z0(nC.bind(null,s,r,e),[e]),r.getSnapshot!==t||a||Vn!==null&&Vn.memoizedState.tag&1){if(s.flags|=2048,bu(9,tC.bind(null,s,r,i,t),void 0,null),Un===null)throw Error(Re(349));Bo&30||eC(s,t,i)}return i}function eC(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=cn.updateQueue,t===null?(t={lastEffect:null,stores:null},cn.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function tC(e,t,s,r){t.value=s,t.getSnapshot=r,sC(t)&&rC(e)}function nC(e,t,s){return s(function(){sC(t)&&rC(e)})}function sC(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!zr(e,s)}catch{return!0}}function rC(e){var t=Yi(e,1);t!==null&&Fr(t,e,1,-1)}function I_(e){var t=ti();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yu,lastRenderedState:e},t.queue=e,e=e.dispatch=sI.bind(null,cn,e),[t.memoizedState,e]}function bu(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=cn.updateQueue,t===null?(t={lastEffect:null,stores:null},cn.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function iC(){return mr().memoizedState}function pf(e,t,s,r){var i=ti();cn.flags|=e,i.memoizedState=bu(1|t,s,void 0,r===void 0?null:r)}function Wm(e,t,s,r){var i=mr();r=r===void 0?null:r;var a=void 0;if(In!==null){var o=In.memoizedState;if(a=o.destroy,r!==null&&D0(r,o.deps)){i.memoizedState=bu(t,s,a,r);return}}cn.flags|=e,i.memoizedState=bu(1|t,s,a,r)}function D_(e,t){return pf(8390656,8,e,t)}function z0(e,t){return Wm(2048,8,e,t)}function aC(e,t){return Wm(4,2,e,t)}function oC(e,t){return Wm(4,4,e,t)}function lC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cC(e,t,s){return s=s!=null?s.concat([e]):null,Wm(4,4,lC.bind(null,t,e),s)}function B0(){}function dC(e,t){var s=mr();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&D0(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function uC(e,t){var s=mr();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&D0(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function hC(e,t,s){return Bo&21?(zr(s,t)||(s=vk(),cn.lanes|=s,Vo|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,As=!0),e.memoizedState=s)}function tI(e,t){var s=Dt;Dt=s!==0&&4>s?s:4,e(!0);var r=Wg.transition;Wg.transition={};try{e(!1),t()}finally{Dt=s,Wg.transition=r}}function fC(){return mr().memoizedState}function nI(e,t,s){var r=Ma(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},mC(e))pC(t,s);else if(s=Kk(e,t,s,r),s!==null){var i=ws();Fr(s,e,r,i),gC(s,t,r)}}function sI(e,t,s){var r=Ma(e),i={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(mC(e))pC(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,c=a(o,s);if(i.hasEagerState=!0,i.eagerState=c,zr(c,o)){var d=t.interleaved;d===null?(i.next=i,O0(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}s=Kk(e,t,i,r),s!==null&&(i=ws(),Fr(s,e,r,i),gC(s,t,r))}}function mC(e){var t=e.alternate;return e===cn||t!==null&&t===cn}function pC(e,t){qd=Kf=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function gC(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,x0(e,s)}}var Yf={readContext:fr,useCallback:ts,useContext:ts,useEffect:ts,useImperativeHandle:ts,useInsertionEffect:ts,useLayoutEffect:ts,useMemo:ts,useReducer:ts,useRef:ts,useState:ts,useDebugValue:ts,useDeferredValue:ts,useTransition:ts,useMutableSource:ts,useSyncExternalStore:ts,useId:ts,unstable_isNewReconciler:!1},rI={readContext:fr,useCallback:function(e,t){return ti().memoizedState=[e,t===void 0?null:t],e},useContext:fr,useEffect:D_,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,pf(4194308,4,lC.bind(null,t,e),s)},useLayoutEffect:function(e,t){return pf(4194308,4,e,t)},useInsertionEffect:function(e,t){return pf(4,2,e,t)},useMemo:function(e,t){var s=ti();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=ti();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=nI.bind(null,cn,e),[r.memoizedState,e]},useRef:function(e){var t=ti();return e={current:e},t.memoizedState=e},useState:I_,useDebugValue:B0,useDeferredValue:function(e){return ti().memoizedState=e},useTransition:function(){var e=I_(!1),t=e[0];return e=tI.bind(null,e[1]),ti().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=cn,i=ti();if(tn){if(s===void 0)throw Error(Re(407));s=s()}else{if(s=t(),Un===null)throw Error(Re(349));Bo&30||eC(r,t,s)}i.memoizedState=s;var a={value:s,getSnapshot:t};return i.queue=a,D_(nC.bind(null,r,a,e),[e]),r.flags|=2048,bu(9,tC.bind(null,r,a,s,t),void 0,null),s},useId:function(){var e=ti(),t=Un.identifierPrefix;if(tn){var s=qi,r=Ui;s=(r&~(1<<32-Dr(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=xu++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=eI++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iI={readContext:fr,useCallback:dC,useContext:fr,useEffect:z0,useImperativeHandle:cC,useInsertionEffect:aC,useLayoutEffect:oC,useMemo:uC,useReducer:Zg,useRef:iC,useState:function(){return Zg(yu)},useDebugValue:B0,useDeferredValue:function(e){var t=mr();return hC(t,In.memoizedState,e)},useTransition:function(){var e=Zg(yu)[0],t=mr().memoizedState;return[e,t]},useMutableSource:Qk,useSyncExternalStore:Jk,useId:fC,unstable_isNewReconciler:!1},aI={readContext:fr,useCallback:dC,useContext:fr,useEffect:z0,useImperativeHandle:cC,useInsertionEffect:aC,useLayoutEffect:oC,useMemo:uC,useReducer:Gg,useRef:iC,useState:function(){return Gg(yu)},useDebugValue:B0,useDeferredValue:function(e){var t=mr();return In===null?t.memoizedState=e:hC(t,In.memoizedState,e)},useTransition:function(){var e=Gg(yu)[0],t=mr().memoizedState;return[e,t]},useMutableSource:Qk,useSyncExternalStore:Jk,useId:fC,unstable_isNewReconciler:!1};function Sr(e,t){if(e&&e.defaultProps){t=un({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function px(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:un({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Zm={isMounted:function(e){return(e=e._reactInternals)?el(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=ws(),i=Ma(e),a=Wi(r,i);a.payload=t,s!=null&&(a.callback=s),t=Ra(e,a,i),t!==null&&(Fr(t,e,i,r),ff(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=ws(),i=Ma(e),a=Wi(r,i);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=Ra(e,a,i),t!==null&&(Fr(t,e,i,r),ff(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ws(),r=Ma(e),i=Wi(s,r);i.tag=2,t!=null&&(i.callback=t),t=Ra(e,i,r),t!==null&&(Fr(t,e,r,s),ff(t,e,r))}};function F_(e,t,s,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!hu(s,r)||!hu(i,a):!0}function vC(e,t,s){var r=!1,i=Ua,a=t.contextType;return typeof a=="object"&&a!==null?a=fr(a):(i=Ms(t)?$o:cs.current,r=t.contextTypes,a=(r=r!=null)?cc(e,i):Ua),t=new t(s,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zm,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function $_(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&Zm.enqueueReplaceState(t,t.state,null)}function gx(e,t,s,r){var i=e.stateNode;i.props=s,i.state=e.memoizedState,i.refs={},R0(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=fr(a):(a=Ms(t)?$o:cs.current,i.context=cc(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(px(e,t,a,s),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Zm.enqueueReplaceState(i,i.state,null),Zf(e,s,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function fc(e,t){try{var s="",r=t;do s+=L3(r),r=r.return;while(r);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Kg(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function vx(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var oI=typeof WeakMap=="function"?WeakMap:Map;function xC(e,t,s){s=Wi(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){Qf||(Qf=!0,Cx=r),vx(e,t)},s}function yC(e,t,s){s=Wi(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;s.payload=function(){return r(i)},s.callback=function(){vx(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){vx(e,t),typeof r!="function"&&(La===null?La=new Set([this]):La.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function z_(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new oI;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(s)||(i.add(s),e=wI.bind(null,e,t,s),t.then(e,e))}function B_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function V_(e,t,s,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Wi(-1,1),t.tag=2,Ra(s,t,1))),s.lanes|=1),e)}var lI=aa.ReactCurrentOwner,As=!1;function fs(e,t,s,r){t.child=e===null?Gk(t,null,s,r):uc(t,e.child,s,r)}function U_(e,t,s,r,i){s=s.render;var a=t.ref;return ql(t,i),r=F0(e,t,s,r,a,i),s=$0(),e!==null&&!As?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xi(e,t,i)):(tn&&s&&k0(t),t.flags|=1,fs(e,t,r,i),t.child)}function q_(e,t,s,r,i){if(e===null){var a=s.type;return typeof a=="function"&&!K0(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=a,bC(e,t,a,r,i)):(e=yf(s.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:hu,s(o,r)&&e.ref===t.ref)return Xi(e,t,i)}return t.flags|=1,e=Ia(a,r),e.ref=t.ref,e.return=t,t.child=e}function bC(e,t,s,r,i){if(e!==null){var a=e.memoizedProps;if(hu(a,r)&&e.ref===t.ref)if(As=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(As=!0);else return t.lanes=e.lanes,Xi(e,t,i)}return xx(e,t,s,r,i)}function wC(e,t,s){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(Ol,Vs),Vs|=s;else{if(!(s&1073741824))return e=a!==null?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gt(Ol,Vs),Vs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:s,Gt(Ol,Vs),Vs|=r}else a!==null?(r=a.baseLanes|s,t.memoizedState=null):r=s,Gt(Ol,Vs),Vs|=r;return fs(e,t,i,s),t.child}function jC(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function xx(e,t,s,r,i){var a=Ms(s)?$o:cs.current;return a=cc(t,a),ql(t,i),s=F0(e,t,s,r,a,i),r=$0(),e!==null&&!As?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xi(e,t,i)):(tn&&r&&k0(t),t.flags|=1,fs(e,t,s,i),t.child)}function H_(e,t,s,r,i){if(Ms(s)){var a=!0;Vf(t)}else a=!1;if(ql(t,i),t.stateNode===null)gf(e,t),vC(t,s,r),gx(t,s,r,i),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,f=s.contextType;typeof f=="object"&&f!==null?f=fr(f):(f=Ms(s)?$o:cs.current,f=cc(t,f));var m=s.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||d!==f)&&$_(t,o,r,f),va=!1;var u=t.memoizedState;o.state=u,Zf(t,r,o,i),d=t.memoizedState,c!==r||u!==d||Ls.current||va?(typeof m=="function"&&(px(t,s,m,r),d=t.memoizedState),(c=va||F_(t,s,c,r,u,d,f))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=f,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Yk(e,t),c=t.memoizedProps,f=t.type===t.elementType?c:Sr(t.type,c),o.props=f,h=t.pendingProps,u=o.context,d=s.contextType,typeof d=="object"&&d!==null?d=fr(d):(d=Ms(s)?$o:cs.current,d=cc(t,d));var p=s.getDerivedStateFromProps;(m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==h||u!==d)&&$_(t,o,r,d),va=!1,u=t.memoizedState,o.state=u,Zf(t,r,o,i);var x=t.memoizedState;c!==h||u!==x||Ls.current||va?(typeof p=="function"&&(px(t,s,p,r),x=t.memoizedState),(f=va||F_(t,s,f,r,u,x,d)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=d,r=f):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),r=!1)}return yx(e,t,s,r,a,i)}function yx(e,t,s,r,i,a){jC(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&T_(t,s,!1),Xi(e,t,a);r=t.stateNode,lI.current=t;var c=o&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=uc(t,e.child,null,a),t.child=uc(t,null,c,a)):fs(e,t,c,a),t.memoizedState=r.state,i&&T_(t,s,!0),t.child}function _C(e){var t=e.stateNode;t.pendingContext?E_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&E_(e,t.context,!1),L0(e,t.containerInfo)}function W_(e,t,s,r,i){return dc(),P0(i),t.flags|=256,fs(e,t,s,r),t.child}var bx={dehydrated:null,treeContext:null,retryLane:0};function wx(e){return{baseLanes:e,cachePool:null,transitions:null}}function NC(e,t,s){var r=t.pendingProps,i=on.current,a=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(i&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Gt(on,i&1),e===null)return fx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Ym(o,r,0,null),e=Oo(e,r,s,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=wx(s),t.memoizedState=bx,e):V0(t,o));if(i=e.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return cI(e,t,o,r,c,i,s);if(a){a=r.fallback,o=t.mode,i=e.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Ia(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Ia(c,a):(a=Oo(a,o,s,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?wx(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~s,t.memoizedState=bx,r}return a=e.child,e=a.sibling,r=Ia(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function V0(e,t){return t=Ym({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Uh(e,t,s,r){return r!==null&&P0(r),uc(t,e.child,null,s),e=V0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cI(e,t,s,r,i,a,o){if(s)return t.flags&256?(t.flags&=-257,r=Kg(Error(Re(422))),Uh(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Ym({mode:"visible",children:r.children},i,0,null),a=Oo(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&uc(t,e.child,null,o),t.child.memoizedState=wx(o),t.memoizedState=bx,a);if(!(t.mode&1))return Uh(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(Re(419)),r=Kg(a,r,void 0),Uh(e,t,o,r)}if(c=(o&e.childLanes)!==0,As||c){if(r=Un,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Yi(e,i),Fr(r,e,i,-1))}return G0(),r=Kg(Error(Re(421))),Uh(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=jI.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Ws=Oa(i.nextSibling),Zs=t,tn=!0,Tr=null,e!==null&&(ir[ar++]=Ui,ir[ar++]=qi,ir[ar++]=zo,Ui=e.id,qi=e.overflow,zo=t),t=V0(t,r.children),t.flags|=4096,t)}function Z_(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mx(e.return,t,s)}function Yg(e,t,s,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=s,a.tailMode=i)}function SC(e,t,s){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(fs(e,t,r.children,s),r=on.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Z_(e,s,t);else if(e.tag===19)Z_(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gt(on,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(s=t.child,i=null;s!==null;)e=s.alternate,e!==null&&Gf(e)===null&&(i=s),s=s.sibling;s=i,s===null?(i=t.child,t.child=null):(i=s.sibling,s.sibling=null),Yg(t,!1,i,s,a);break;case"backwards":for(s=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Gf(e)===null){t.child=i;break}e=i.sibling,i.sibling=s,s=i,i=e}Yg(t,!0,s,null,a);break;case"together":Yg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xi(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Vo|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Re(153));if(t.child!==null){for(e=t.child,s=Ia(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Ia(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function dI(e,t,s){switch(t.tag){case 3:_C(t),dc();break;case 5:Xk(t);break;case 1:Ms(t.type)&&Vf(t);break;case 4:L0(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Gt(Hf,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Gt(on,on.current&1),t.flags|=128,null):s&t.child.childLanes?NC(e,t,s):(Gt(on,on.current&1),e=Xi(e,t,s),e!==null?e.sibling:null);Gt(on,on.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return SC(e,t,s);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Gt(on,on.current),r)break;return null;case 22:case 23:return t.lanes=0,wC(e,t,s)}return Xi(e,t,s)}var kC,jx,CC,PC;kC=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};jx=function(){};CC=function(e,t,s,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,wo(ui.current);var a=null;switch(s){case"input":i=qv(e,i),r=qv(e,r),a=[];break;case"select":i=un({},i,{value:void 0}),r=un({},r,{value:void 0}),a=[];break;case"textarea":i=Zv(e,i),r=Zv(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=zf)}Kv(s,r);var o;s=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var c=i[f];for(o in c)c.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(iu.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in r){var d=r[f];if(c=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&d!==c&&(d!=null||c!=null))if(f==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(s||(s={}),s[o]=d[o])}else s||(a||(a=[]),a.push(f,s)),s=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(iu.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&Qt("scroll",e),a||c===d||(a=[])):(a=a||[]).push(f,d))}s&&(a=a||[]).push("style",s);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};PC=function(e,t,s,r){s!==r&&(t.flags|=4)};function yd(e,t){if(!tn)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ns(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var i=e.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function uI(e,t,s){var r=t.pendingProps;switch(C0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ns(t),null;case 1:return Ms(t.type)&&Bf(),ns(t),null;case 3:return r=t.stateNode,hc(),en(Ls),en(cs),I0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tr!==null&&(Tx(Tr),Tr=null))),jx(e,t),ns(t),null;case 5:M0(t);var i=wo(vu.current);if(s=t.type,e!==null&&t.stateNode!=null)CC(e,t,s,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Re(166));return ns(t),null}if(e=wo(ui.current),Bh(t)){r=t.stateNode,s=t.type;var a=t.memoizedProps;switch(r[ii]=t,r[pu]=a,e=(t.mode&1)!==0,s){case"dialog":Qt("cancel",r),Qt("close",r);break;case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(i=0;i<Ld.length;i++)Qt(Ld[i],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"details":Qt("toggle",r);break;case"input":n_(r,a),Qt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qt("invalid",r);break;case"textarea":r_(r,a),Qt("invalid",r)}Kv(s,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&zh(r.textContent,c,e),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&zh(r.textContent,c,e),i=["children",""+c]):iu.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Qt("scroll",r)}switch(s){case"input":Oh(r),s_(r,a,!0);break;case"textarea":Oh(r),i_(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=zf)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nk(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(s,{is:r.is}):(e=o.createElement(s),s==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,s),e[ii]=t,e[pu]=r,kC(e,t,!1,!1),t.stateNode=e;e:{switch(o=Yv(s,r),s){case"dialog":Qt("cancel",e),Qt("close",e),i=r;break;case"iframe":case"object":case"embed":Qt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ld.length;i++)Qt(Ld[i],e);i=r;break;case"source":Qt("error",e),i=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),i=r;break;case"details":Qt("toggle",e),i=r;break;case"input":n_(e,r),i=qv(e,r),Qt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=un({},r,{value:void 0}),Qt("invalid",e);break;case"textarea":r_(e,r),i=Zv(e,r),Qt("invalid",e);break;default:i=r}Kv(s,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?ik(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&sk(e,d)):a==="children"?typeof d=="string"?(s!=="textarea"||d!=="")&&au(e,d):typeof d=="number"&&au(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(iu.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Qt("scroll",e):d!=null&&h0(e,a,d,o))}switch(s){case"input":Oh(e),s_(e,r,!1);break;case"textarea":Oh(e),i_(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Va(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?zl(e,!!r.multiple,a,!1):r.defaultValue!=null&&zl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=zf)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ns(t),null;case 6:if(e&&t.stateNode!=null)PC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Re(166));if(s=wo(vu.current),wo(ui.current),Bh(t)){if(r=t.stateNode,s=t.memoizedProps,r[ii]=t,(a=r.nodeValue!==s)&&(e=Zs,e!==null))switch(e.tag){case 3:zh(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zh(r.nodeValue,s,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[ii]=t,t.stateNode=r}return ns(t),null;case 13:if(en(on),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tn&&Ws!==null&&t.mode&1&&!(t.flags&128))Wk(),dc(),t.flags|=98560,a=!1;else if(a=Bh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(Re(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Re(317));a[ii]=t}else dc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ns(t),a=!1}else Tr!==null&&(Tx(Tr),Tr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||on.current&1?Dn===0&&(Dn=3):G0())),t.updateQueue!==null&&(t.flags|=4),ns(t),null);case 4:return hc(),jx(e,t),e===null&&fu(t.stateNode.containerInfo),ns(t),null;case 10:return A0(t.type._context),ns(t),null;case 17:return Ms(t.type)&&Bf(),ns(t),null;case 19:if(en(on),a=t.memoizedState,a===null)return ns(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)yd(a,!1);else{if(Dn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Gf(e),o!==null){for(t.flags|=128,yd(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)a=s,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Gt(on,on.current&1|2),t.child}e=e.sibling}a.tail!==null&&_n()>mc&&(t.flags|=128,r=!0,yd(a,!1),t.lanes=4194304)}else{if(!r)if(e=Gf(o),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),yd(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!tn)return ns(t),null}else 2*_n()-a.renderingStartTime>mc&&s!==1073741824&&(t.flags|=128,r=!0,yd(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(s=a.last,s!==null?s.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=_n(),t.sibling=null,s=on.current,Gt(on,r?s&1|2:s&1),t):(ns(t),null);case 22:case 23:return Z0(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Vs&1073741824&&(ns(t),t.subtreeFlags&6&&(t.flags|=8192)):ns(t),null;case 24:return null;case 25:return null}throw Error(Re(156,t.tag))}function hI(e,t){switch(C0(t),t.tag){case 1:return Ms(t.type)&&Bf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hc(),en(Ls),en(cs),I0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return M0(t),null;case 13:if(en(on),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Re(340));dc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return en(on),null;case 4:return hc(),null;case 10:return A0(t.type._context),null;case 22:case 23:return Z0(),null;case 24:return null;default:return null}}var qh=!1,rs=!1,fI=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Al(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){gn(e,t,r)}else s.current=null}function _x(e,t,s){try{s()}catch(r){gn(e,t,r)}}var G_=!1;function mI(e,t){if(ax=Df,e=Rk(),S0(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,c=-1,d=-1,f=0,m=0,h=e,u=null;t:for(;;){for(var p;h!==s||i!==0&&h.nodeType!==3||(c=o+i),h!==a||r!==0&&h.nodeType!==3||(d=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)u=h,h=p;for(;;){if(h===e)break t;if(u===s&&++f===i&&(c=o),u===a&&++m===r&&(d=o),(p=h.nextSibling)!==null)break;h=u,u=h.parentNode}h=p}s=c===-1||d===-1?null:{start:c,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(ox={focusedElem:e,selectionRange:s},Df=!1,Ke=t;Ke!==null;)if(t=Ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ke=e;else for(;Ke!==null;){t=Ke;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,w=x.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Sr(t.type,v),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(N){gn(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Ke=e;break}Ke=t.return}return x=G_,G_=!1,x}function Hd(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&_x(t,s,a)}i=i.next}while(i!==r)}}function Gm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function Nx(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function EC(e){var t=e.alternate;t!==null&&(e.alternate=null,EC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ii],delete t[pu],delete t[dx],delete t[YM],delete t[XM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function TC(e){return e.tag===5||e.tag===3||e.tag===4}function K_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||TC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sx(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=zf));else if(r!==4&&(e=e.child,e!==null))for(Sx(e,t,s),e=e.sibling;e!==null;)Sx(e,t,s),e=e.sibling}function kx(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(kx(e,t,s),e=e.sibling;e!==null;)kx(e,t,s),e=e.sibling}var Wn=null,Er=!1;function da(e,t,s){for(s=s.child;s!==null;)AC(e,t,s),s=s.sibling}function AC(e,t,s){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(zm,s)}catch{}switch(s.tag){case 5:rs||Al(s,t);case 6:var r=Wn,i=Er;Wn=null,da(e,t,s),Wn=r,Er=i,Wn!==null&&(Er?(e=Wn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Wn.removeChild(s.stateNode));break;case 18:Wn!==null&&(Er?(e=Wn,s=s.stateNode,e.nodeType===8?Ug(e.parentNode,s):e.nodeType===1&&Ug(e,s),du(e)):Ug(Wn,s.stateNode));break;case 4:r=Wn,i=Er,Wn=s.stateNode.containerInfo,Er=!0,da(e,t,s),Wn=r,Er=i;break;case 0:case 11:case 14:case 15:if(!rs&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&_x(s,t,o),i=i.next}while(i!==r)}da(e,t,s);break;case 1:if(!rs&&(Al(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(c){gn(s,t,c)}da(e,t,s);break;case 21:da(e,t,s);break;case 22:s.mode&1?(rs=(r=rs)||s.memoizedState!==null,da(e,t,s),rs=r):da(e,t,s);break;default:da(e,t,s)}}function Y_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new fI),t.forEach(function(r){var i=_I.bind(null,e,r);s.has(r)||(s.add(r),r.then(i,i))})}}function wr(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var i=s[r];try{var a=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Wn=c.stateNode,Er=!1;break e;case 3:Wn=c.stateNode.containerInfo,Er=!0;break e;case 4:Wn=c.stateNode.containerInfo,Er=!0;break e}c=c.return}if(Wn===null)throw Error(Re(160));AC(a,o,i),Wn=null,Er=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(f){gn(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)OC(t,e),t=t.sibling}function OC(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wr(t,e),Qr(e),r&4){try{Hd(3,e,e.return),Gm(3,e)}catch(v){gn(e,e.return,v)}try{Hd(5,e,e.return)}catch(v){gn(e,e.return,v)}}break;case 1:wr(t,e),Qr(e),r&512&&s!==null&&Al(s,s.return);break;case 5:if(wr(t,e),Qr(e),r&512&&s!==null&&Al(s,s.return),e.flags&32){var i=e.stateNode;try{au(i,"")}catch(v){gn(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=s!==null?s.memoizedProps:a,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&ek(i,a),Yv(c,o);var f=Yv(c,a);for(o=0;o<d.length;o+=2){var m=d[o],h=d[o+1];m==="style"?ik(i,h):m==="dangerouslySetInnerHTML"?sk(i,h):m==="children"?au(i,h):h0(i,m,h,f)}switch(c){case"input":Hv(i,a);break;case"textarea":tk(i,a);break;case"select":var u=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?zl(i,!!a.multiple,p,!1):u!==!!a.multiple&&(a.defaultValue!=null?zl(i,!!a.multiple,a.defaultValue,!0):zl(i,!!a.multiple,a.multiple?[]:"",!1))}i[pu]=a}catch(v){gn(e,e.return,v)}}break;case 6:if(wr(t,e),Qr(e),r&4){if(e.stateNode===null)throw Error(Re(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(v){gn(e,e.return,v)}}break;case 3:if(wr(t,e),Qr(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{du(t.containerInfo)}catch(v){gn(e,e.return,v)}break;case 4:wr(t,e),Qr(e);break;case 13:wr(t,e),Qr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(H0=_n())),r&4&&Y_(e);break;case 22:if(m=s!==null&&s.memoizedState!==null,e.mode&1?(rs=(f=rs)||m,wr(t,e),rs=f):wr(t,e),Qr(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!m&&e.mode&1)for(Ke=e,m=e.child;m!==null;){for(h=Ke=m;Ke!==null;){switch(u=Ke,p=u.child,u.tag){case 0:case 11:case 14:case 15:Hd(4,u,u.return);break;case 1:Al(u,u.return);var x=u.stateNode;if(typeof x.componentWillUnmount=="function"){r=u,s=u.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(v){gn(r,s,v)}}break;case 5:Al(u,u.return);break;case 22:if(u.memoizedState!==null){Q_(h);continue}}p!==null?(p.return=u,Ke=p):Q_(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{i=h.stateNode,f?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=h.stateNode,d=h.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=rk("display",o))}catch(v){gn(e,e.return,v)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(v){gn(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wr(t,e),Qr(e),r&4&&Y_(e);break;case 21:break;default:wr(t,e),Qr(e)}}function Qr(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(TC(s)){var r=s;break e}s=s.return}throw Error(Re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(au(i,""),r.flags&=-33);var a=K_(e);kx(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=K_(e);Sx(e,c,o);break;default:throw Error(Re(161))}}catch(d){gn(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pI(e,t,s){Ke=e,RC(e)}function RC(e,t,s){for(var r=(e.mode&1)!==0;Ke!==null;){var i=Ke,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qh;if(!o){var c=i.alternate,d=c!==null&&c.memoizedState!==null||rs;c=qh;var f=rs;if(qh=o,(rs=d)&&!f)for(Ke=i;Ke!==null;)o=Ke,d=o.child,o.tag===22&&o.memoizedState!==null?J_(i):d!==null?(d.return=o,Ke=d):J_(i);for(;a!==null;)Ke=a,RC(a),a=a.sibling;Ke=i,qh=c,rs=f}X_(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ke=a):X_(e)}}function X_(e){for(;Ke!==null;){var t=Ke;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rs||Gm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rs)if(s===null)r.componentDidMount();else{var i=t.elementType===t.type?s.memoizedProps:Sr(t.type,s.memoizedProps);r.componentDidUpdate(i,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&M_(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}M_(t,o,s)}break;case 5:var c=t.stateNode;if(s===null&&t.flags&4){s=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&du(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}rs||t.flags&512&&Nx(t)}catch(u){gn(t,t.return,u)}}if(t===e){Ke=null;break}if(s=t.sibling,s!==null){s.return=t.return,Ke=s;break}Ke=t.return}}function Q_(e){for(;Ke!==null;){var t=Ke;if(t===e){Ke=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ke=s;break}Ke=t.return}}function J_(e){for(;Ke!==null;){var t=Ke;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Gm(4,t)}catch(d){gn(t,s,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){gn(t,i,d)}}var a=t.return;try{Nx(t)}catch(d){gn(t,a,d)}break;case 5:var o=t.return;try{Nx(t)}catch(d){gn(t,o,d)}}}catch(d){gn(t,t.return,d)}if(t===e){Ke=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Ke=c;break}Ke=t.return}}var gI=Math.ceil,Xf=aa.ReactCurrentDispatcher,U0=aa.ReactCurrentOwner,cr=aa.ReactCurrentBatchConfig,Ot=0,Un=null,Rn=null,Yn=0,Vs=0,Ol=Qa(0),Dn=0,wu=null,Vo=0,Km=0,q0=0,Wd=null,Ts=null,H0=0,mc=1/0,Fi=null,Qf=!1,Cx=null,La=null,Hh=!1,Ca=null,Jf=0,Zd=0,Px=null,vf=-1,xf=0;function ws(){return Ot&6?_n():vf!==-1?vf:vf=_n()}function Ma(e){return e.mode&1?Ot&2&&Yn!==0?Yn&-Yn:JM.transition!==null?(xf===0&&(xf=vk()),xf):(e=Dt,e!==0||(e=window.event,e=e===void 0?16:Nk(e.type)),e):1}function Fr(e,t,s,r){if(50<Zd)throw Zd=0,Px=null,Error(Re(185));Hu(e,s,r),(!(Ot&2)||e!==Un)&&(e===Un&&(!(Ot&2)&&(Km|=s),Dn===4&&ba(e,Yn)),Is(e,r),s===1&&Ot===0&&!(t.mode&1)&&(mc=_n()+500,Hm&&Ja()))}function Is(e,t){var s=e.callbackNode;J3(e,t);var r=If(e,e===Un?Yn:0);if(r===0)s!==null&&l_(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&l_(s),t===1)e.tag===0?QM(e1.bind(null,e)):Uk(e1.bind(null,e)),GM(function(){!(Ot&6)&&Ja()}),s=null;else{switch(xk(r)){case 1:s=v0;break;case 4:s=pk;break;case 16:s=Mf;break;case 536870912:s=gk;break;default:s=Mf}s=BC(s,LC.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function LC(e,t){if(vf=-1,xf=0,Ot&6)throw Error(Re(327));var s=e.callbackNode;if(Hl()&&e.callbackNode!==s)return null;var r=If(e,e===Un?Yn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=em(e,r);else{t=r;var i=Ot;Ot|=2;var a=IC();(Un!==e||Yn!==t)&&(Fi=null,mc=_n()+500,Ao(e,t));do try{yI();break}catch(c){MC(e,c)}while(!0);T0(),Xf.current=a,Ot=i,Rn!==null?t=0:(Un=null,Yn=0,t=Dn)}if(t!==0){if(t===2&&(i=tx(e),i!==0&&(r=i,t=Ex(e,i))),t===1)throw s=wu,Ao(e,0),ba(e,r),Is(e,_n()),s;if(t===6)ba(e,r);else{if(i=e.current.alternate,!(r&30)&&!vI(i)&&(t=em(e,r),t===2&&(a=tx(e),a!==0&&(r=a,t=Ex(e,a))),t===1))throw s=wu,Ao(e,0),ba(e,r),Is(e,_n()),s;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Re(345));case 2:mo(e,Ts,Fi);break;case 3:if(ba(e,r),(r&130023424)===r&&(t=H0+500-_n(),10<t)){if(If(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ws(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=cx(mo.bind(null,e,Ts,Fi),t);break}mo(e,Ts,Fi);break;case 4:if(ba(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Dr(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=_n()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gI(r/1960))-r,10<r){e.timeoutHandle=cx(mo.bind(null,e,Ts,Fi),r);break}mo(e,Ts,Fi);break;case 5:mo(e,Ts,Fi);break;default:throw Error(Re(329))}}}return Is(e,_n()),e.callbackNode===s?LC.bind(null,e):null}function Ex(e,t){var s=Wd;return e.current.memoizedState.isDehydrated&&(Ao(e,t).flags|=256),e=em(e,t),e!==2&&(t=Ts,Ts=s,t!==null&&Tx(t)),e}function Tx(e){Ts===null?Ts=e:Ts.push.apply(Ts,e)}function vI(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var i=s[r],a=i.getSnapshot;i=i.value;try{if(!zr(a(),i))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ba(e,t){for(t&=~q0,t&=~Km,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Dr(t),r=1<<s;e[s]=-1,t&=~r}}function e1(e){if(Ot&6)throw Error(Re(327));Hl();var t=If(e,0);if(!(t&1))return Is(e,_n()),null;var s=em(e,t);if(e.tag!==0&&s===2){var r=tx(e);r!==0&&(t=r,s=Ex(e,r))}if(s===1)throw s=wu,Ao(e,0),ba(e,t),Is(e,_n()),s;if(s===6)throw Error(Re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mo(e,Ts,Fi),Is(e,_n()),null}function W0(e,t){var s=Ot;Ot|=1;try{return e(t)}finally{Ot=s,Ot===0&&(mc=_n()+500,Hm&&Ja())}}function Uo(e){Ca!==null&&Ca.tag===0&&!(Ot&6)&&Hl();var t=Ot;Ot|=1;var s=cr.transition,r=Dt;try{if(cr.transition=null,Dt=1,e)return e()}finally{Dt=r,cr.transition=s,Ot=t,!(Ot&6)&&Ja()}}function Z0(){Vs=Ol.current,en(Ol)}function Ao(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,ZM(s)),Rn!==null)for(s=Rn.return;s!==null;){var r=s;switch(C0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bf();break;case 3:hc(),en(Ls),en(cs),I0();break;case 5:M0(r);break;case 4:hc();break;case 13:en(on);break;case 19:en(on);break;case 10:A0(r.type._context);break;case 22:case 23:Z0()}s=s.return}if(Un=e,Rn=e=Ia(e.current,null),Yn=Vs=t,Dn=0,wu=null,q0=Km=Vo=0,Ts=Wd=null,bo!==null){for(t=0;t<bo.length;t++)if(s=bo[t],r=s.interleaved,r!==null){s.interleaved=null;var i=r.next,a=s.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}s.pending=r}bo=null}return e}function MC(e,t){do{var s=Rn;try{if(T0(),mf.current=Yf,Kf){for(var r=cn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Kf=!1}if(Bo=0,Vn=In=cn=null,qd=!1,xu=0,U0.current=null,s===null||s.return===null){Dn=1,wu=t,Rn=null;break}e:{var a=e,o=s.return,c=s,d=t;if(t=Yn,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,m=c,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var u=m.alternate;u?(m.updateQueue=u.updateQueue,m.memoizedState=u.memoizedState,m.lanes=u.lanes):(m.updateQueue=null,m.memoizedState=null)}var p=B_(o);if(p!==null){p.flags&=-257,V_(p,o,c,a,t),p.mode&1&&z_(a,f,t),t=p,d=f;var x=t.updateQueue;if(x===null){var v=new Set;v.add(d),t.updateQueue=v}else x.add(d);break e}else{if(!(t&1)){z_(a,f,t),G0();break e}d=Error(Re(426))}}else if(tn&&c.mode&1){var w=B_(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),V_(w,o,c,a,t),P0(fc(d,c));break e}}a=d=fc(d,c),Dn!==4&&(Dn=2),Wd===null?Wd=[a]:Wd.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=xC(a,d,t);L_(a,y);break e;case 1:c=d;var b=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(La===null||!La.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=yC(a,c,t);L_(a,N);break e}}a=a.return}while(a!==null)}FC(s)}catch(k){t=k,Rn===s&&s!==null&&(Rn=s=s.return);continue}break}while(!0)}function IC(){var e=Xf.current;return Xf.current=Yf,e===null?Yf:e}function G0(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),Un===null||!(Vo&268435455)&&!(Km&268435455)||ba(Un,Yn)}function em(e,t){var s=Ot;Ot|=2;var r=IC();(Un!==e||Yn!==t)&&(Fi=null,Ao(e,t));do try{xI();break}catch(i){MC(e,i)}while(!0);if(T0(),Ot=s,Xf.current=r,Rn!==null)throw Error(Re(261));return Un=null,Yn=0,Dn}function xI(){for(;Rn!==null;)DC(Rn)}function yI(){for(;Rn!==null&&!q3();)DC(Rn)}function DC(e){var t=zC(e.alternate,e,Vs);e.memoizedProps=e.pendingProps,t===null?FC(e):Rn=t,U0.current=null}function FC(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=hI(s,t),s!==null){s.flags&=32767,Rn=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dn=6,Rn=null;return}}else if(s=uI(s,t,Vs),s!==null){Rn=s;return}if(t=t.sibling,t!==null){Rn=t;return}Rn=t=e}while(t!==null);Dn===0&&(Dn=5)}function mo(e,t,s){var r=Dt,i=cr.transition;try{cr.transition=null,Dt=1,bI(e,t,s,r)}finally{cr.transition=i,Dt=r}return null}function bI(e,t,s,r){do Hl();while(Ca!==null);if(Ot&6)throw Error(Re(327));s=e.finishedWork;var i=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Re(177));e.callbackNode=null,e.callbackPriority=0;var a=s.lanes|s.childLanes;if(eM(e,a),e===Un&&(Rn=Un=null,Yn=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Hh||(Hh=!0,BC(Mf,function(){return Hl(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=cr.transition,cr.transition=null;var o=Dt;Dt=1;var c=Ot;Ot|=4,U0.current=null,mI(e,s),OC(s,e),zM(ox),Df=!!ax,ox=ax=null,e.current=s,pI(s),H3(),Ot=c,Dt=o,cr.transition=a}else e.current=s;if(Hh&&(Hh=!1,Ca=e,Jf=i),a=e.pendingLanes,a===0&&(La=null),G3(s.stateNode),Is(e,_n()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)i=t[s],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qf)throw Qf=!1,e=Cx,Cx=null,e;return Jf&1&&e.tag!==0&&Hl(),a=e.pendingLanes,a&1?e===Px?Zd++:(Zd=0,Px=e):Zd=0,Ja(),null}function Hl(){if(Ca!==null){var e=xk(Jf),t=cr.transition,s=Dt;try{if(cr.transition=null,Dt=16>e?16:e,Ca===null)var r=!1;else{if(e=Ca,Ca=null,Jf=0,Ot&6)throw Error(Re(331));var i=Ot;for(Ot|=4,Ke=e.current;Ke!==null;){var a=Ke,o=a.child;if(Ke.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var f=c[d];for(Ke=f;Ke!==null;){var m=Ke;switch(m.tag){case 0:case 11:case 15:Hd(8,m,a)}var h=m.child;if(h!==null)h.return=m,Ke=h;else for(;Ke!==null;){m=Ke;var u=m.sibling,p=m.return;if(EC(m),m===f){Ke=null;break}if(u!==null){u.return=p,Ke=u;break}Ke=p}}}var x=a.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}Ke=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ke=o;else e:for(;Ke!==null;){if(a=Ke,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Hd(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,Ke=y;break e}Ke=a.return}}var b=e.current;for(Ke=b;Ke!==null;){o=Ke;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ke=_;else e:for(o=b;Ke!==null;){if(c=Ke,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Gm(9,c)}}catch(k){gn(c,c.return,k)}if(c===o){Ke=null;break e}var N=c.sibling;if(N!==null){N.return=c.return,Ke=N;break e}Ke=c.return}}if(Ot=i,Ja(),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(zm,e)}catch{}r=!0}return r}finally{Dt=s,cr.transition=t}}return!1}function t1(e,t,s){t=fc(s,t),t=xC(e,t,1),e=Ra(e,t,1),t=ws(),e!==null&&(Hu(e,1,t),Is(e,t))}function gn(e,t,s){if(e.tag===3)t1(e,e,s);else for(;t!==null;){if(t.tag===3){t1(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(La===null||!La.has(r))){e=fc(s,e),e=yC(t,e,1),t=Ra(t,e,1),e=ws(),t!==null&&(Hu(t,1,e),Is(t,e));break}}t=t.return}}function wI(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=ws(),e.pingedLanes|=e.suspendedLanes&s,Un===e&&(Yn&s)===s&&(Dn===4||Dn===3&&(Yn&130023424)===Yn&&500>_n()-H0?Ao(e,0):q0|=s),Is(e,t)}function $C(e,t){t===0&&(e.mode&1?(t=Mh,Mh<<=1,!(Mh&130023424)&&(Mh=4194304)):t=1);var s=ws();e=Yi(e,t),e!==null&&(Hu(e,t,s),Is(e,s))}function jI(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),$C(e,s)}function _I(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(s=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Re(314))}r!==null&&r.delete(t),$C(e,s)}var zC;zC=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ls.current)As=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return As=!1,dI(e,t,s);As=!!(e.flags&131072)}else As=!1,tn&&t.flags&1048576&&qk(t,qf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;gf(e,t),e=t.pendingProps;var i=cc(t,cs.current);ql(t,s),i=F0(null,t,r,e,i,s);var a=$0();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ms(r)?(a=!0,Vf(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,R0(t),i.updater=Zm,t.stateNode=i,i._reactInternals=t,gx(t,r,e,s),t=yx(null,t,r,!0,a,s)):(t.tag=0,tn&&a&&k0(t),fs(null,t,i,s),t=t.child),t;case 16:r=t.elementType;e:{switch(gf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=SI(r),e=Sr(r,e),i){case 0:t=xx(null,t,r,e,s);break e;case 1:t=H_(null,t,r,e,s);break e;case 11:t=U_(null,t,r,e,s);break e;case 14:t=q_(null,t,r,Sr(r.type,e),s);break e}throw Error(Re(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Sr(r,i),xx(e,t,r,i,s);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Sr(r,i),H_(e,t,r,i,s);case 3:e:{if(_C(t),e===null)throw Error(Re(387));r=t.pendingProps,a=t.memoizedState,i=a.element,Yk(e,t),Zf(t,r,null,s);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=fc(Error(Re(423)),t),t=W_(e,t,r,s,i);break e}else if(r!==i){i=fc(Error(Re(424)),t),t=W_(e,t,r,s,i);break e}else for(Ws=Oa(t.stateNode.containerInfo.firstChild),Zs=t,tn=!0,Tr=null,s=Gk(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(dc(),r===i){t=Xi(e,t,s);break e}fs(e,t,r,s)}t=t.child}return t;case 5:return Xk(t),e===null&&fx(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,lx(r,i)?o=null:a!==null&&lx(r,a)&&(t.flags|=32),jC(e,t),fs(e,t,o,s),t.child;case 6:return e===null&&fx(t),null;case 13:return NC(e,t,s);case 4:return L0(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=uc(t,null,r,s):fs(e,t,r,s),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Sr(r,i),U_(e,t,r,i,s);case 7:return fs(e,t,t.pendingProps,s),t.child;case 8:return fs(e,t,t.pendingProps.children,s),t.child;case 12:return fs(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Gt(Hf,r._currentValue),r._currentValue=o,a!==null)if(zr(a.value,o)){if(a.children===i.children&&!Ls.current){t=Xi(e,t,s);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=Wi(-1,s&-s),d.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?d.next=d:(d.next=m.next,m.next=d),f.pending=d}}a.lanes|=s,d=a.alternate,d!==null&&(d.lanes|=s),mx(a.return,s,t),c.lanes|=s;break}d=d.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Re(341));o.lanes|=s,c=o.alternate,c!==null&&(c.lanes|=s),mx(o,s,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}fs(e,t,i.children,s),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ql(t,s),i=fr(i),r=r(i),t.flags|=1,fs(e,t,r,s),t.child;case 14:return r=t.type,i=Sr(r,t.pendingProps),i=Sr(r.type,i),q_(e,t,r,i,s);case 15:return bC(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Sr(r,i),gf(e,t),t.tag=1,Ms(r)?(e=!0,Vf(t)):e=!1,ql(t,s),vC(t,r,i),gx(t,r,i,s),yx(null,t,r,!0,e,s);case 19:return SC(e,t,s);case 22:return wC(e,t,s)}throw Error(Re(156,t.tag))};function BC(e,t){return mk(e,t)}function NI(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(e,t,s,r){return new NI(e,t,s,r)}function K0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function SI(e){if(typeof e=="function")return K0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===m0)return 11;if(e===p0)return 14}return 2}function Ia(e,t){var s=e.alternate;return s===null?(s=or(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function yf(e,t,s,r,i,a){var o=2;if(r=e,typeof e=="function")K0(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case jl:return Oo(s.children,i,a,t);case f0:o=8,i|=8;break;case zv:return e=or(12,s,t,i|2),e.elementType=zv,e.lanes=a,e;case Bv:return e=or(13,s,t,i),e.elementType=Bv,e.lanes=a,e;case Vv:return e=or(19,s,t,i),e.elementType=Vv,e.lanes=a,e;case X2:return Ym(s,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K2:o=10;break e;case Y2:o=9;break e;case m0:o=11;break e;case p0:o=14;break e;case ga:o=16,r=null;break e}throw Error(Re(130,e==null?e:typeof e,""))}return t=or(o,s,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Oo(e,t,s,r){return e=or(7,e,r,t),e.lanes=s,e}function Ym(e,t,s,r){return e=or(22,e,r,t),e.elementType=X2,e.lanes=s,e.stateNode={isHidden:!1},e}function Xg(e,t,s){return e=or(6,e,null,t),e.lanes=s,e}function Qg(e,t,s){return t=or(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kI(e,t,s,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Og(0),this.expirationTimes=Og(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Og(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Y0(e,t,s,r,i,a,o,c,d){return e=new kI(e,t,s,c,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=or(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},R0(a),e}function CI(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function VC(e){if(!e)return Ua;e=e._reactInternals;e:{if(el(e)!==e||e.tag!==1)throw Error(Re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ms(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Re(171))}if(e.tag===1){var s=e.type;if(Ms(s))return Vk(e,s,t)}return t}function UC(e,t,s,r,i,a,o,c,d){return e=Y0(s,r,!0,e,i,a,o,c,d),e.context=VC(null),s=e.current,r=ws(),i=Ma(s),a=Wi(r,i),a.callback=t??null,Ra(s,a,i),e.current.lanes=i,Hu(e,i,r),Is(e,r),e}function Xm(e,t,s,r){var i=t.current,a=ws(),o=Ma(i);return s=VC(s),t.context===null?t.context=s:t.pendingContext=s,t=Wi(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ra(i,t,o),e!==null&&(Fr(e,i,o,a),ff(e,i,o)),o}function tm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function n1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function X0(e,t){n1(e,t),(e=e.alternate)&&n1(e,t)}function PI(){return null}var qC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Q0(e){this._internalRoot=e}Qm.prototype.render=Q0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Re(409));Xm(e,t,null,null)};Qm.prototype.unmount=Q0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Uo(function(){Xm(null,e,null,null)}),t[Ki]=null}};function Qm(e){this._internalRoot=e}Qm.prototype.unstable_scheduleHydration=function(e){if(e){var t=wk();e={blockedOn:null,target:e,priority:t};for(var s=0;s<ya.length&&t!==0&&t<ya[s].priority;s++);ya.splice(s,0,e),s===0&&_k(e)}};function J0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function s1(){}function EI(e,t,s,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var f=tm(o);a.call(f)}}var o=UC(t,r,e,0,null,!1,!1,"",s1);return e._reactRootContainer=o,e[Ki]=o.current,fu(e.nodeType===8?e.parentNode:e),Uo(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var f=tm(d);c.call(f)}}var d=Y0(e,0,!1,null,null,!1,!1,"",s1);return e._reactRootContainer=d,e[Ki]=d.current,fu(e.nodeType===8?e.parentNode:e),Uo(function(){Xm(t,d,s,r)}),d}function ep(e,t,s,r,i){var a=s._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var d=tm(o);c.call(d)}}Xm(t,o,e,i)}else o=EI(s,t,e,i,r);return tm(o)}yk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Rd(t.pendingLanes);s!==0&&(x0(t,s|1),Is(t,_n()),!(Ot&6)&&(mc=_n()+500,Ja()))}break;case 13:Uo(function(){var r=Yi(e,1);if(r!==null){var i=ws();Fr(r,e,1,i)}}),X0(e,1)}};y0=function(e){if(e.tag===13){var t=Yi(e,134217728);if(t!==null){var s=ws();Fr(t,e,134217728,s)}X0(e,134217728)}};bk=function(e){if(e.tag===13){var t=Ma(e),s=Yi(e,t);if(s!==null){var r=ws();Fr(s,e,t,r)}X0(e,t)}};wk=function(){return Dt};jk=function(e,t){var s=Dt;try{return Dt=e,t()}finally{Dt=s}};Qv=function(e,t,s){switch(t){case"input":if(Hv(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var i=qm(r);if(!i)throw Error(Re(90));J2(r),Hv(r,i)}}}break;case"textarea":tk(e,s);break;case"select":t=s.value,t!=null&&zl(e,!!s.multiple,t,!1)}};lk=W0;ck=Uo;var TI={usingClientEntryPoint:!1,Events:[Zu,kl,qm,ak,ok,W0]},bd={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AI={bundleType:bd.bundleType,version:bd.version,rendererPackageName:bd.rendererPackageName,rendererConfig:bd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:aa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hk(e),e===null?null:e.stateNode},findFiberByHostInstance:bd.findFiberByHostInstance||PI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wh.isDisabled&&Wh.supportsFiber)try{zm=Wh.inject(AI),di=Wh}catch{}}Ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TI;Ys.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J0(t))throw Error(Re(200));return CI(e,t,null,s)};Ys.createRoot=function(e,t){if(!J0(e))throw Error(Re(299));var s=!1,r="",i=qC;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Y0(e,1,!1,null,null,s,!1,r,i),e[Ki]=t.current,fu(e.nodeType===8?e.parentNode:e),new Q0(t)};Ys.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Re(188)):(e=Object.keys(e).join(","),Error(Re(268,e)));return e=hk(t),e=e===null?null:e.stateNode,e};Ys.flushSync=function(e){return Uo(e)};Ys.hydrate=function(e,t,s){if(!Jm(t))throw Error(Re(200));return ep(null,e,t,!0,s)};Ys.hydrateRoot=function(e,t,s){if(!J0(e))throw Error(Re(405));var r=s!=null&&s.hydratedSources||null,i=!1,a="",o=qC;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=UC(t,null,e,1,s??null,i,!1,a,o),e[Ki]=t.current,fu(e),r)for(e=0;e<r.length;e++)s=r[e],i=s._getVersion,i=i(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,i]:t.mutableSourceEagerHydrationData.push(s,i);return new Qm(t)};Ys.render=function(e,t,s){if(!Jm(t))throw Error(Re(200));return ep(null,e,t,!1,s)};Ys.unmountComponentAtNode=function(e){if(!Jm(e))throw Error(Re(40));return e._reactRootContainer?(Uo(function(){ep(null,null,e,!1,function(){e._reactRootContainer=null,e[Ki]=null})}),!0):!1};Ys.unstable_batchedUpdates=W0;Ys.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!Jm(s))throw Error(Re(200));if(e==null||e._reactInternals===void 0)throw Error(Re(38));return ep(e,t,s,!1,r)};Ys.version="18.3.1-next-f1338f8080-20240426";function HC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HC)}catch(e){console.error(e)}}HC(),H2.exports=Ys;var eo=H2.exports;const WC=Fm(eo);var ZC,r1=eo;ZC=r1.createRoot,r1.hydrateRoot;const OI=1,RI=1e6;let Jg=0;function LI(){return Jg=(Jg+1)%Number.MAX_SAFE_INTEGER,Jg.toString()}const ev=new Map,i1=e=>{if(ev.has(e))return;const t=setTimeout(()=>{ev.delete(e),Gd({type:"REMOVE_TOAST",toastId:e})},RI);ev.set(e,t)},MI=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,OI)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?i1(s):e.toasts.forEach(r=>{i1(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)}}},bf=[];let wf={toasts:[]};function Gd(e){wf=MI(wf,e),bf.forEach(t=>{t(wf)})}function jf({...e}){const t=LI(),s=i=>Gd({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>Gd({type:"DISMISS_TOAST",toastId:t});return Gd({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:s}}function hn(){const[e,t]=j.useState(wf);return j.useEffect(()=>(bf.push(t),()=>{const s=bf.indexOf(t);s>-1&&bf.splice(s,1)}),[e]),{...e,toast:jf,dismiss:s=>Gd({type:"DISMISS_TOAST",toastId:s})}}function Me(e,t,{checkForDefaultPrevented:s=!0}={}){return function(i){if(e==null||e(i),s===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function a1(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function tp(...e){return t=>{let s=!1;const r=e.map(i=>{const a=a1(i,t);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():a1(e[i],null)}}}}function ft(...e){return j.useCallback(tp(...e),e)}function II(e,t){const s=j.createContext(t),r=a=>{const{children:o,...c}=a,d=j.useMemo(()=>c,Object.values(c));return n.jsx(s.Provider,{value:d,children:o})};r.displayName=e+"Provider";function i(a){const o=j.useContext(s);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,i]}function ds(e,t=[]){let s=[];function r(a,o){const c=j.createContext(o),d=s.length;s=[...s,o];const f=h=>{var y;const{scope:u,children:p,...x}=h,v=((y=u==null?void 0:u[e])==null?void 0:y[d])||c,w=j.useMemo(()=>x,Object.values(x));return n.jsx(v.Provider,{value:w,children:p})};f.displayName=a+"Provider";function m(h,u){var v;const p=((v=u==null?void 0:u[e])==null?void 0:v[d])||c,x=j.useContext(p);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[f,m]}const i=()=>{const a=s.map(o=>j.createContext(o));return function(c){const d=(c==null?void 0:c[e])||a;return j.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return i.scopeName=e,[r,DI(i,...t)]}function DI(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:d,scopeName:f})=>{const h=d(a)[`__scope${f}`];return{...c,...h}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}function qo(e){const t=$I(e),s=j.forwardRef((r,i)=>{const{children:a,...o}=r,c=j.Children.toArray(a),d=c.find(BI);if(d){const f=d.props.children,m=c.map(h=>h===d?j.Children.count(f)>1?j.Children.only(null):j.isValidElement(f)?f.props.children:null:h);return n.jsx(t,{...o,ref:i,children:j.isValidElement(f)?j.cloneElement(f,void 0,m):null})}return n.jsx(t,{...o,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}var FI=qo("Slot");function $I(e){const t=j.forwardRef((s,r)=>{const{children:i,...a}=s;if(j.isValidElement(i)){const o=UI(i),c=VI(a,i.props);return i.type!==j.Fragment&&(c.ref=r?tp(r,o):o),j.cloneElement(i,c)}return j.Children.count(i)>1?j.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var GC=Symbol("radix.slottable");function zI(e){const t=({children:s})=>n.jsx(n.Fragment,{children:s});return t.displayName=`${e}.Slottable`,t.__radixId=GC,t}function BI(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===GC}function VI(e,t){const s={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function UI(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function np(e){const t=e+"CollectionProvider",[s,r]=ds(t),[i,a]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:w,children:y}=v,b=Ne.useRef(null),_=Ne.useRef(new Map).current;return n.jsx(i,{scope:w,itemMap:_,collectionRef:b,children:y})};o.displayName=t;const c=e+"CollectionSlot",d=qo(c),f=Ne.forwardRef((v,w)=>{const{scope:y,children:b}=v,_=a(c,y),N=ft(w,_.collectionRef);return n.jsx(d,{ref:N,children:b})});f.displayName=c;const m=e+"CollectionItemSlot",h="data-radix-collection-item",u=qo(m),p=Ne.forwardRef((v,w)=>{const{scope:y,children:b,..._}=v,N=Ne.useRef(null),k=ft(w,N),I=a(m,y);return Ne.useEffect(()=>(I.itemMap.set(N,{ref:N,..._}),()=>void I.itemMap.delete(N))),n.jsx(u,{[h]:"",ref:k,children:b})});p.displayName=m;function x(v){const w=a(e+"CollectionConsumer",v);return Ne.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((I,C)=>_.indexOf(I.ref.current)-_.indexOf(C.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:f,ItemSlot:p},x,r]}var qI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xe=qI.reduce((e,t)=>{const s=qo(`Primitive.${t}`),r=j.forwardRef((i,a)=>{const{asChild:o,...c}=i,d=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function eb(e,t){e&&eo.flushSync(()=>e.dispatchEvent(t))}function vn(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...s)=>{var r;return(r=t.current)==null?void 0:r.call(t,...s)},[])}function HI(e,t=globalThis==null?void 0:globalThis.document){const s=vn(e);j.useEffect(()=>{const r=i=>{i.key==="Escape"&&s(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[s,t])}var WI="DismissableLayer",Ax="dismissableLayer.update",ZI="dismissableLayer.pointerDownOutside",GI="dismissableLayer.focusOutside",o1,KC=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mc=j.forwardRef((e,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:c,...d}=e,f=j.useContext(KC),[m,h]=j.useState(null),u=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=j.useState({}),x=ft(t,C=>h(C)),v=Array.from(f.layers),[w]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(w),b=m?v.indexOf(m):-1,_=f.layersWithOutsidePointerEventsDisabled.size>0,N=b>=y,k=YI(C=>{const T=C.target,M=[...f.branches].some(P=>P.contains(T));!N||M||(i==null||i(C),o==null||o(C),C.defaultPrevented||c==null||c())},u),I=XI(C=>{const T=C.target;[...f.branches].some(P=>P.contains(T))||(a==null||a(C),o==null||o(C),C.defaultPrevented||c==null||c())},u);return HI(C=>{b===f.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&c&&(C.preventDefault(),c()))},u),j.useEffect(()=>{if(m)return s&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(o1=u.body.style.pointerEvents,u.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),l1(),()=>{s&&f.layersWithOutsidePointerEventsDisabled.size===1&&(u.body.style.pointerEvents=o1)}},[m,u,s,f]),j.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),l1())},[m,f]),j.useEffect(()=>{const C=()=>p({});return document.addEventListener(Ax,C),()=>document.removeEventListener(Ax,C)},[]),n.jsx(Xe.div,{...d,ref:x,style:{pointerEvents:_?N?"auto":"none":void 0,...e.style},onFocusCapture:Me(e.onFocusCapture,I.onFocusCapture),onBlurCapture:Me(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Me(e.onPointerDownCapture,k.onPointerDownCapture)})});Mc.displayName=WI;var KI="DismissableLayerBranch",YC=j.forwardRef((e,t)=>{const s=j.useContext(KC),r=j.useRef(null),i=ft(t,r);return j.useEffect(()=>{const a=r.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),n.jsx(Xe.div,{...e,ref:i})});YC.displayName=KI;function YI(e,t=globalThis==null?void 0:globalThis.document){const s=vn(e),r=j.useRef(!1),i=j.useRef(()=>{});return j.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let d=function(){XC(ZI,s,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=d,t.addEventListener("click",i.current,{once:!0})):d()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,s]),{onPointerDownCapture:()=>r.current=!0}}function XI(e,t=globalThis==null?void 0:globalThis.document){const s=vn(e),r=j.useRef(!1);return j.useEffect(()=>{const i=a=>{a.target&&!r.current&&XC(GI,s,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function l1(){const e=new CustomEvent(Ax);document.dispatchEvent(e)}function XC(e,t,s,{discrete:r}){const i=s.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&i.addEventListener(e,t,{once:!0}),r?eb(i,a):i.dispatchEvent(a)}var QI=Mc,JI=YC,kn=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},eD="Portal",Ku=j.forwardRef((e,t)=>{var c;const{container:s,...r}=e,[i,a]=j.useState(!1);kn(()=>a(!0),[]);const o=s||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?WC.createPortal(n.jsx(Xe.div,{...r,ref:t}),o):null});Ku.displayName=eD;function tD(e,t){return j.useReducer((s,r)=>t[s][r]??s,e)}var Jn=e=>{const{present:t,children:s}=e,r=nD(t),i=typeof s=="function"?s({present:r.isPresent}):j.Children.only(s),a=ft(r.ref,sD(i));return typeof s=="function"||r.isPresent?j.cloneElement(i,{ref:a}):null};Jn.displayName="Presence";function nD(e){const[t,s]=j.useState(),r=j.useRef(null),i=j.useRef(e),a=j.useRef("none"),o=e?"mounted":"unmounted",[c,d]=tD(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const f=Zh(r.current);a.current=c==="mounted"?f:"none"},[c]),kn(()=>{const f=r.current,m=i.current;if(m!==e){const u=a.current,p=Zh(f);e?d("MOUNT"):p==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(m&&u!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,d]),kn(()=>{if(t){let f;const m=t.ownerDocument.defaultView??window,h=p=>{const v=Zh(r.current).includes(p.animationName);if(p.target===t&&v&&(d("ANIMATION_END"),!i.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",f=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},u=p=>{p.target===t&&(a.current=Zh(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{m.clearTimeout(f),t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:j.useCallback(f=>{r.current=f?getComputedStyle(f):null,s(f)},[])}}function Zh(e){return(e==null?void 0:e.animationName)||"none"}function sD(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var rD=c0[" useInsertionEffect ".trim().toString()]||kn;function Br({prop:e,defaultProp:t,onChange:s=()=>{},caller:r}){const[i,a,o]=iD({defaultProp:t,onChange:s}),c=e!==void 0,d=c?e:i;{const m=j.useRef(e!==void 0);j.useEffect(()=>{const h=m.current;h!==c&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const f=j.useCallback(m=>{var h;if(c){const u=aD(m)?m(e):m;u!==e&&((h=o.current)==null||h.call(o,u))}else a(m)},[c,e,a,o]);return[d,f]}function iD({defaultProp:e,onChange:t}){const[s,r]=j.useState(e),i=j.useRef(s),a=j.useRef(t);return rD(()=>{a.current=t},[t]),j.useEffect(()=>{var o;i.current!==s&&((o=a.current)==null||o.call(a,s),i.current=s)},[s,i]),[s,r,a]}function aD(e){return typeof e=="function"}var QC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),oD="VisuallyHidden",sp=j.forwardRef((e,t)=>n.jsx(Xe.span,{...e,ref:t,style:{...QC,...e.style}}));sp.displayName=oD;var lD=sp,tb="ToastProvider",[nb,cD,dD]=np("Toast"),[JC,Use]=ds("Toast",[dD]),[uD,rp]=JC(tb),eP=e=>{const{__scopeToast:t,label:s="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[c,d]=j.useState(null),[f,m]=j.useState(0),h=j.useRef(!1),u=j.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${tb}\`. Expected non-empty \`string\`.`),n.jsx(nb.Provider,{scope:t,children:n.jsx(uD,{scope:t,label:s,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:f,viewport:c,onViewportChange:d,onToastAdd:j.useCallback(()=>m(p=>p+1),[]),onToastRemove:j.useCallback(()=>m(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:u,children:o})})};eP.displayName=tb;var tP="ToastViewport",hD=["F8"],Ox="toast.viewportPause",Rx="toast.viewportResume",nP=j.forwardRef((e,t)=>{const{__scopeToast:s,hotkey:r=hD,label:i="Notifications ({hotkey})",...a}=e,o=rp(tP,s),c=cD(s),d=j.useRef(null),f=j.useRef(null),m=j.useRef(null),h=j.useRef(null),u=ft(t,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;j.useEffect(()=>{const w=y=>{var _;r.length!==0&&r.every(N=>y[N]||y.code===N)&&((_=h.current)==null||_.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),j.useEffect(()=>{const w=d.current,y=h.current;if(x&&w&&y){const b=()=>{if(!o.isClosePausedRef.current){const I=new CustomEvent(Ox);y.dispatchEvent(I),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const I=new CustomEvent(Rx);y.dispatchEvent(I),o.isClosePausedRef.current=!1}},N=I=>{!w.contains(I.relatedTarget)&&_()},k=()=>{w.contains(document.activeElement)||_()};return w.addEventListener("focusin",b),w.addEventListener("focusout",N),w.addEventListener("pointermove",b),w.addEventListener("pointerleave",k),window.addEventListener("blur",b),window.addEventListener("focus",_),()=>{w.removeEventListener("focusin",b),w.removeEventListener("focusout",N),w.removeEventListener("pointermove",b),w.removeEventListener("pointerleave",k),window.removeEventListener("blur",b),window.removeEventListener("focus",_)}}},[x,o.isClosePausedRef]);const v=j.useCallback(({tabbingDirection:w})=>{const b=c().map(_=>{const N=_.ref.current,k=[N,...SD(N)];return w==="forwards"?k:k.reverse()});return(w==="forwards"?b.reverse():b).flat()},[c]);return j.useEffect(()=>{const w=h.current;if(w){const y=b=>{var k,I,C;const _=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!_){const T=document.activeElement,M=b.shiftKey;if(b.target===w&&M){(k=f.current)==null||k.focus();return}const A=v({tabbingDirection:M?"backwards":"forwards"}),z=A.findIndex(O=>O===T);tv(A.slice(z+1))?b.preventDefault():M?(I=f.current)==null||I.focus():(C=m.current)==null||C.focus()}};return w.addEventListener("keydown",y),()=>w.removeEventListener("keydown",y)}},[c,v]),n.jsxs(JI,{ref:d,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&n.jsx(Lx,{ref:f,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"forwards"});tv(w)}}),n.jsx(nb.Slot,{scope:s,children:n.jsx(Xe.ol,{tabIndex:-1,...a,ref:u})}),x&&n.jsx(Lx,{ref:m,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"backwards"});tv(w)}})]})});nP.displayName=tP;var sP="ToastFocusProxy",Lx=j.forwardRef((e,t)=>{const{__scopeToast:s,onFocusFromOutsideViewport:r,...i}=e,a=rp(sP,s);return n.jsx(sp,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var f;const c=o.relatedTarget;!((f=a.viewport)!=null&&f.contains(c))&&r()}})});Lx.displayName=sP;var Yu="Toast",fD="toast.swipeStart",mD="toast.swipeMove",pD="toast.swipeCancel",gD="toast.swipeEnd",rP=j.forwardRef((e,t)=>{const{forceMount:s,open:r,defaultOpen:i,onOpenChange:a,...o}=e,[c,d]=Br({prop:r,defaultProp:i??!0,onChange:a,caller:Yu});return n.jsx(Jn,{present:s||c,children:n.jsx(yD,{open:c,...o,ref:t,onClose:()=>d(!1),onPause:vn(e.onPause),onResume:vn(e.onResume),onSwipeStart:Me(e.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Me(e.onSwipeMove,f=>{const{x:m,y:h}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Me(e.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Me(e.onSwipeEnd,f=>{const{x:m,y:h}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),d(!1)})})})});rP.displayName=Yu;var[vD,xD]=JC(Yu,{onClose(){}}),yD=j.forwardRef((e,t)=>{const{__scopeToast:s,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:c,onPause:d,onResume:f,onSwipeStart:m,onSwipeMove:h,onSwipeCancel:u,onSwipeEnd:p,...x}=e,v=rp(Yu,s),[w,y]=j.useState(null),b=ft(t,O=>y(O)),_=j.useRef(null),N=j.useRef(null),k=i||v.duration,I=j.useRef(0),C=j.useRef(k),T=j.useRef(0),{onToastAdd:M,onToastRemove:P}=v,E=vn(()=>{var $;(w==null?void 0:w.contains(document.activeElement))&&(($=v.viewport)==null||$.focus()),o()}),A=j.useCallback(O=>{!O||O===1/0||(window.clearTimeout(T.current),I.current=new Date().getTime(),T.current=window.setTimeout(E,O))},[E]);j.useEffect(()=>{const O=v.viewport;if(O){const $=()=>{A(C.current),f==null||f()},G=()=>{const X=new Date().getTime()-I.current;C.current=C.current-X,window.clearTimeout(T.current),d==null||d()};return O.addEventListener(Ox,G),O.addEventListener(Rx,$),()=>{O.removeEventListener(Ox,G),O.removeEventListener(Rx,$)}}},[v.viewport,k,d,f,A]),j.useEffect(()=>{a&&!v.isClosePausedRef.current&&A(k)},[a,k,v.isClosePausedRef,A]),j.useEffect(()=>(M(),()=>P()),[M,P]);const z=j.useMemo(()=>w?uP(w):null,[w]);return v.viewport?n.jsxs(n.Fragment,{children:[z&&n.jsx(bD,{__scopeToast:s,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),n.jsx(vD,{scope:s,onClose:E,children:eo.createPortal(n.jsx(nb.ItemSlot,{scope:s,children:n.jsx(QI,{asChild:!0,onEscapeKeyDown:Me(c,()=>{v.isFocusedToastEscapeKeyDownRef.current||E(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(Xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Me(e.onKeyDown,O=>{O.key==="Escape"&&(c==null||c(O.nativeEvent),O.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:Me(e.onPointerDown,O=>{O.button===0&&(_.current={x:O.clientX,y:O.clientY})}),onPointerMove:Me(e.onPointerMove,O=>{if(!_.current)return;const $=O.clientX-_.current.x,G=O.clientY-_.current.y,X=!!N.current,Y=["left","right"].includes(v.swipeDirection),U=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,V=Y?U(0,$):0,R=Y?0:U(0,G),F=O.pointerType==="touch"?10:2,q={x:V,y:R},W={originalEvent:O,delta:q};X?(N.current=q,Gh(mD,h,W,{discrete:!1})):c1(q,v.swipeDirection,F)?(N.current=q,Gh(fD,m,W,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs($)>F||Math.abs(G)>F)&&(_.current=null)}),onPointerUp:Me(e.onPointerUp,O=>{const $=N.current,G=O.target;if(G.hasPointerCapture(O.pointerId)&&G.releasePointerCapture(O.pointerId),N.current=null,_.current=null,$){const X=O.currentTarget,Y={originalEvent:O,delta:$};c1($,v.swipeDirection,v.swipeThreshold)?Gh(gD,p,Y,{discrete:!0}):Gh(pD,u,Y,{discrete:!0}),X.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),bD=e=>{const{__scopeToast:t,children:s,...r}=e,i=rp(Yu,t),[a,o]=j.useState(!1),[c,d]=j.useState(!1);return _D(()=>o(!0)),j.useEffect(()=>{const f=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(f)},[]),c?null:n.jsx(Ku,{asChild:!0,children:n.jsx(sp,{...r,children:a&&n.jsxs(n.Fragment,{children:[i.label," ",s]})})})},wD="ToastTitle",iP=j.forwardRef((e,t)=>{const{__scopeToast:s,...r}=e;return n.jsx(Xe.div,{...r,ref:t})});iP.displayName=wD;var jD="ToastDescription",aP=j.forwardRef((e,t)=>{const{__scopeToast:s,...r}=e;return n.jsx(Xe.div,{...r,ref:t})});aP.displayName=jD;var oP="ToastAction",lP=j.forwardRef((e,t)=>{const{altText:s,...r}=e;return s.trim()?n.jsx(dP,{altText:s,asChild:!0,children:n.jsx(sb,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${oP}\`. Expected non-empty \`string\`.`),null)});lP.displayName=oP;var cP="ToastClose",sb=j.forwardRef((e,t)=>{const{__scopeToast:s,...r}=e,i=xD(cP,s);return n.jsx(dP,{asChild:!0,children:n.jsx(Xe.button,{type:"button",...r,ref:t,onClick:Me(e.onClick,i.onClose)})})});sb.displayName=cP;var dP=j.forwardRef((e,t)=>{const{__scopeToast:s,altText:r,...i}=e;return n.jsx(Xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function uP(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),ND(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...uP(r))}}),t}function Gh(e,t,s,{discrete:r}){const i=s.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});t&&i.addEventListener(e,t,{once:!0}),r?eb(i,a):i.dispatchEvent(a)}var c1=(e,t,s=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t==="left"||t==="right"?a&&r>s:!a&&i>s};function _D(e=()=>{}){const t=vn(e);kn(()=>{let s=0,r=0;return s=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(r)}},[t])}function ND(e){return e.nodeType===e.ELEMENT_NODE}function SD(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function tv(e){const t=document.activeElement;return e.some(s=>s===t?!0:(s.focus(),document.activeElement!==t))}var kD=eP,hP=nP,fP=rP,mP=iP,pP=aP,gP=lP,vP=sb;function xP(e){var t,s,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(s=xP(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function yP(){for(var e,t,s=0,r="",i=arguments.length;s<i;s++)(e=arguments[s])&&(t=xP(e))&&(r&&(r+=" "),r+=t);return r}const d1=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,u1=yP,Xu=(e,t)=>s=>{var r;if((t==null?void 0:t.variants)==null)return u1(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(f=>{const m=s==null?void 0:s[f],h=a==null?void 0:a[f];if(m===null)return null;const u=d1(m)||d1(h);return i[f][u]}),c=s&&Object.entries(s).reduce((f,m)=>{let[h,u]=m;return u===void 0||(f[h]=u),f},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:h,className:u,...p}=m;return Object.entries(p).every(x=>{let[v,w]=x;return Array.isArray(w)?w.includes({...a,...c}[v]):{...a,...c}[v]===w})?[...f,h,u]:f},[]);return u1(e,o,d,s==null?void 0:s.class,s==null?void 0:s.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bP=(...e)=>e.filter((t,s,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===s).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},d)=>j.createElement("svg",{ref:d,...PD,width:t,height:t,stroke:e,strokeWidth:r?Number(s)*24/Number(t):s,className:bP("lucide",i),...c},[...o.map(([f,m])=>j.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(e,t)=>{const s=j.forwardRef(({className:r,...i},a)=>j.createElement(ED,{ref:a,iconNode:t,className:bP(`lucide-${CD(e)}`,r),...i}));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=Fe("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=Fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=Fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=Fe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=Fe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=Fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=Fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=Fe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=Fe("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=Fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=Fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=Fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=Fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=Fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=Fe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Fe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=Fe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=Fe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=Fe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=Fe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=Fe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Fe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=Fe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=Fe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=Fe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Fe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=Fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=Fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=Fe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Fe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=Fe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=Fe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Fe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=Fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=Fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Fe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=Fe("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Fe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=Fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=Fe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=Fe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=Fe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=Fe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Fe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=Fe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=Fe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=Fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=Fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=Fe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=Fe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=Fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Fe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=Fe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=Fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=Fe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Fe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=Fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=Fe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Fe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=Fe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=Fe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=Fe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=Fe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=Fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=Fe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=Fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=Fe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=Fe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ub="-",WD=e=>{const t=GD(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const c=o.split(ub);return c[0]===""&&c.length!==1&&c.shift(),OP(c,t)||ZD(o)},getConflictingClassGroupIds:(o,c)=>{const d=s[o]||[];return c&&r[o]?[...d,...r[o]]:d}}},OP=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const s=e[0],r=t.nextPart.get(s),i=r?OP(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(ub);return(o=t.validators.find(({validator:c})=>c(a)))==null?void 0:o.classGroupId},m1=/^\[(.+)\]$/,ZD=e=>{if(m1.test(e)){const t=m1.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},GD=e=>{const{theme:t,prefix:s}=e,r={nextPart:new Map,validators:[]};return YD(Object.entries(e.classGroups),s).forEach(([a,o])=>{Ix(o,r,a,t)}),r},Ix=(e,t,s,r)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:p1(t,i);a.classGroupId=s;return}if(typeof i=="function"){if(KD(i)){Ix(i(r),t,s,r);return}t.validators.push({validator:i,classGroupId:s});return}Object.entries(i).forEach(([a,o])=>{Ix(o,p1(t,a),s,r)})})},p1=(e,t)=>{let s=e;return t.split(ub).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},KD=e=>e.isThemeGetter,YD=(e,t)=>t?e.map(([s,r])=>{const i=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,c])=>[t+o,c])):a);return[s,i]}):e,XD=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,r=new Map;const i=(a,o)=>{s.set(a,o),t++,t>e&&(t=0,r=s,s=new Map)};return{get(a){let o=s.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){s.has(a)?s.set(a,o):i(a,o)}}},RP="!",QD=e=>{const{separator:t,experimentalParseClassName:s}=e,r=t.length===1,i=t[0],a=t.length,o=c=>{const d=[];let f=0,m=0,h;for(let w=0;w<c.length;w++){let y=c[w];if(f===0){if(y===i&&(r||c.slice(w,w+a)===t)){d.push(c.slice(m,w)),m=w+a;continue}if(y==="/"){h=w;continue}}y==="["?f++:y==="]"&&f--}const u=d.length===0?c:c.substring(m),p=u.startsWith(RP),x=p?u.substring(1):u,v=h&&h>m?h-m:void 0;return{modifiers:d,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:v}};return s?c=>s({className:c,parseClassName:o}):o},JD=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(r=>{r[0]==="["?(t.push(...s.sort(),r),s=[]):s.push(r)}),t.push(...s.sort()),t},e6=e=>({cache:XD(e.cacheSize),parseClassName:QD(e),...WD(e)}),t6=/\s+/,n6=(e,t)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(t6);let c="";for(let d=o.length-1;d>=0;d-=1){const f=o[d],{modifiers:m,hasImportantModifier:h,baseClassName:u,maybePostfixModifierPosition:p}=s(f);let x=!!p,v=r(x?u.substring(0,p):u);if(!v){if(!x){c=f+(c.length>0?" "+c:c);continue}if(v=r(u),!v){c=f+(c.length>0?" "+c:c);continue}x=!1}const w=JD(m).join(":"),y=h?w+RP:w,b=y+v;if(a.includes(b))continue;a.push(b);const _=i(v,x);for(let N=0;N<_.length;++N){const k=_[N];a.push(y+k)}c=f+(c.length>0?" "+c:c)}return c};function s6(){let e=0,t,s,r="";for(;e<arguments.length;)(t=arguments[e++])&&(s=LP(t))&&(r&&(r+=" "),r+=s);return r}const LP=e=>{if(typeof e=="string")return e;let t,s="";for(let r=0;r<e.length;r++)e[r]&&(t=LP(e[r]))&&(s&&(s+=" "),s+=t);return s};function r6(e,...t){let s,r,i,a=o;function o(d){const f=t.reduce((m,h)=>h(m),e());return s=e6(f),r=s.cache.get,i=s.cache.set,a=c,c(d)}function c(d){const f=r(d);if(f)return f;const m=n6(d,s);return i(d,m),m}return function(){return a(s6.apply(null,arguments))}}const Xt=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},MP=/^\[(?:([a-z-]+):)?(.+)\]$/i,i6=/^\d+\/\d+$/,a6=new Set(["px","full","screen"]),o6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,l6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,c6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,d6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,u6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ri=e=>Gl(e)||a6.has(e)||i6.test(e),ua=e=>Dc(e,"length",y6),Gl=e=>!!e&&!Number.isNaN(Number(e)),nv=e=>Dc(e,"number",Gl),wd=e=>!!e&&Number.isInteger(Number(e)),h6=e=>e.endsWith("%")&&Gl(e.slice(0,-1)),gt=e=>MP.test(e),ha=e=>o6.test(e),f6=new Set(["length","size","percentage"]),m6=e=>Dc(e,f6,IP),p6=e=>Dc(e,"position",IP),g6=new Set(["image","url"]),v6=e=>Dc(e,g6,w6),x6=e=>Dc(e,"",b6),jd=()=>!0,Dc=(e,t,s)=>{const r=MP.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):s(r[2]):!1},y6=e=>l6.test(e)&&!c6.test(e),IP=()=>!1,b6=e=>d6.test(e),w6=e=>u6.test(e),j6=()=>{const e=Xt("colors"),t=Xt("spacing"),s=Xt("blur"),r=Xt("brightness"),i=Xt("borderColor"),a=Xt("borderRadius"),o=Xt("borderSpacing"),c=Xt("borderWidth"),d=Xt("contrast"),f=Xt("grayscale"),m=Xt("hueRotate"),h=Xt("invert"),u=Xt("gap"),p=Xt("gradientColorStops"),x=Xt("gradientColorStopPositions"),v=Xt("inset"),w=Xt("margin"),y=Xt("opacity"),b=Xt("padding"),_=Xt("saturate"),N=Xt("scale"),k=Xt("sepia"),I=Xt("skew"),C=Xt("space"),T=Xt("translate"),M=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto",gt,t],A=()=>[gt,t],z=()=>["",Ri,ua],O=()=>["auto",Gl,gt],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",gt],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>[Gl,gt];return{cacheSize:500,separator:":",theme:{colors:[jd],spacing:[Ri,ua],blur:["none","",ha,gt],brightness:R(),borderColor:[e],borderRadius:["none","","full",ha,gt],borderSpacing:A(),borderWidth:z(),contrast:R(),grayscale:U(),hueRotate:R(),invert:U(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[h6,ua],inset:E(),margin:E(),opacity:R(),padding:A(),saturate:R(),scale:R(),sepia:U(),skew:R(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",gt]}],container:["container"],columns:[{columns:[ha]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),gt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wd,gt]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",gt]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",wd,gt]}],"grid-cols":[{"grid-cols":[jd]}],"col-start-end":[{col:["auto",{span:["full",wd,gt]},gt]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[jd]}],"row-start-end":[{row:["auto",{span:[wd,gt]},gt]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",gt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",gt]}],gap:[{gap:[u]}],"gap-x":[{"gap-x":[u]}],"gap-y":[{"gap-y":[u]}],"justify-content":[{justify:["normal",...Y()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Y(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Y(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",gt,t]}],"min-w":[{"min-w":[gt,t,"min","max","fit"]}],"max-w":[{"max-w":[gt,t,"none","full","min","max","fit","prose",{screen:[ha]},ha]}],h:[{h:[gt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[gt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[gt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[gt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ha,ua]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nv]}],"font-family":[{font:[jd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",gt]}],"line-clamp":[{"line-clamp":["none",Gl,nv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ri,gt]}],"list-image":[{"list-image":["none",gt]}],"list-style-type":[{list:["none","disc","decimal",gt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ri,ua]}],"underline-offset":[{"underline-offset":["auto",Ri,gt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),p6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",m6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},v6]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:G()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[Ri,gt]}],"outline-w":[{outline:[Ri,ua]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ri,ua]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ha,x6]}],"shadow-color":[{shadow:[jd]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",ha,gt]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",gt]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",gt]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",gt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[wd,gt]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",gt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ri,ua,nv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},_6=r6(j6);function Ze(...e){return _6(yP(e))}const N6=kD,DP=j.forwardRef(({className:e,...t},s)=>n.jsx(hP,{ref:s,className:Ze("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));DP.displayName=hP.displayName;const S6=Xu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),FP=j.forwardRef(({className:e,variant:t,...s},r)=>n.jsx(fP,{ref:r,className:Ze(S6({variant:t}),e),...s}));FP.displayName=fP.displayName;const k6=j.forwardRef(({className:e,...t},s)=>n.jsx(gP,{ref:s,className:Ze("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));k6.displayName=gP.displayName;const $P=j.forwardRef(({className:e,...t},s)=>n.jsx(vP,{ref:s,className:Ze("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(as,{className:"h-4 w-4"})}));$P.displayName=vP.displayName;const zP=j.forwardRef(({className:e,...t},s)=>n.jsx(mP,{ref:s,className:Ze("text-sm font-semibold",e),...t}));zP.displayName=mP.displayName;const BP=j.forwardRef(({className:e,...t},s)=>n.jsx(pP,{ref:s,className:Ze("text-sm opacity-90",e),...t}));BP.displayName=pP.displayName;function C6(){const{toasts:e}=hn();return n.jsxs(N6,{children:[e.map(function({id:t,title:s,description:r,action:i,...a}){return n.jsxs(FP,{...a,children:[n.jsxs("div",{className:"grid gap-1",children:[s&&n.jsx(zP,{children:s}),r&&n.jsx(BP,{children:r})]}),i,n.jsx($P,{})]},t)}),n.jsx(DP,{})]})}var g1=["light","dark"],P6="(prefers-color-scheme: dark)",E6=j.createContext(void 0),T6={setTheme:e=>{},themes:[]},A6=()=>{var e;return(e=j.useContext(E6))!=null?e:T6};j.memo(({forcedTheme:e,storageKey:t,attribute:s,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:c,nonce:d})=>{let f=a==="system",m=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,h=i?g1.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",u=(x,v=!1,w=!0)=>{let y=o?o[x]:x,b=v?x+"|| ''":`'${y}'`,_="";return i&&w&&!v&&g1.includes(x)&&(_+=`d.style.colorScheme = '${x}';`),s==="class"?v||y?_+=`c.add(${b})`:_+="null":y&&(_+=`d[s](n,${b})`),_},p=e?`!function(){${m}${u(e)}}()`:r?`!function(){try{${m}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${f})){var t='${P6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${u("dark")}}else{${u("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${u(o?"x[e]":"e",!0)}}${f?"":"else{"+u(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${u(o?"x[e]":"e",!0)}}else{${u(a,!1,!1)};}${h}}catch(t){}}();`;return j.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:p}})});var O6=e=>{switch(e){case"success":return M6;case"info":return D6;case"warning":return I6;case"error":return F6;default:return null}},R6=Array(12).fill(0),L6=({visible:e,className:t})=>Ne.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ne.createElement("div",{className:"sonner-spinner"},R6.map((s,r)=>Ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),M6=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),I6=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),D6=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),F6=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$6=Ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),z6=()=>{let[e,t]=Ne.useState(document.hidden);return Ne.useEffect(()=>{let s=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),e},Dx=1,B6=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:s,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Dx++,a=this.toasts.find(c=>c.id===i),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:s}),{...c,...e,id:i,dismissible:o,title:s}):c):this.addToast({title:s,...r,dismissible:o,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),i=s!==void 0,a,o=r.then(async d=>{if(a=["resolve",d],Ne.isValidElement(d))i=!1,this.create({id:s,type:"default",message:d});else if(U6(d)&&!d.ok){i=!1;let f=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description;this.create({id:s,type:"error",message:f,description:m})}else if(t.success!==void 0){i=!1;let f=typeof t.success=="function"?await t.success(d):t.success,m=typeof t.description=="function"?await t.description(d):t.description;this.create({id:s,type:"success",message:f,description:m})}}).catch(async d=>{if(a=["reject",d],t.error!==void 0){i=!1;let f=typeof t.error=="function"?await t.error(d):t.error,m=typeof t.description=="function"?await t.description(d):t.description;this.create({id:s,type:"error",message:f,description:m})}}).finally(()=>{var d;i&&(this.dismiss(s),s=void 0),(d=t.finally)==null||d.call(t)}),c=()=>new Promise((d,f)=>o.then(()=>a[0]==="reject"?f(a[1]):d(a[1])).catch(f));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(e,t)=>{let s=(t==null?void 0:t.id)||Dx++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Es=new B6,V6=(e,t)=>{let s=(t==null?void 0:t.id)||Dx++;return Es.addToast({title:e,...t,id:s}),s},U6=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",q6=V6,H6=()=>Es.toasts,W6=()=>Es.getActiveToasts(),Zn=Object.assign(q6,{success:Es.success,info:Es.info,warning:Es.warning,error:Es.error,custom:Es.custom,message:Es.message,promise:Es.promise,dismiss:Es.dismiss,loading:Es.loading},{getHistory:H6,getToasts:W6});function Z6(e,{insertAt:t}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Z6(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Kh(e){return e.label!==void 0}var G6=3,K6="32px",Y6="16px",v1=4e3,X6=356,Q6=14,J6=20,eF=200;function jr(...e){return e.filter(Boolean).join(" ")}function tF(e){let[t,s]=e.split("-"),r=[];return t&&r.push(t),s&&r.push(s),r}var nF=e=>{var t,s,r,i,a,o,c,d,f,m,h;let{invert:u,toast:p,unstyled:x,interacting:v,setHeights:w,visibleToasts:y,heights:b,index:_,toasts:N,expanded:k,removeToast:I,defaultRichColors:C,closeButton:T,style:M,cancelButtonStyle:P,actionButtonStyle:E,className:A="",descriptionClassName:z="",duration:O,position:$,gap:G,loadingIcon:X,expandByDefault:Y,classNames:U,icons:V,closeButtonAriaLabel:R="Close toast",pauseWhenPageIsHidden:F}=e,[q,W]=Ne.useState(null),[K,B]=Ne.useState(null),[Z,se]=Ne.useState(!1),[J,ie]=Ne.useState(!1),[le,Q]=Ne.useState(!1),[ue,_e]=Ne.useState(!1),[me,Se]=Ne.useState(!1),[xe,he]=Ne.useState(0),[pe,te]=Ne.useState(0),ae=Ne.useRef(p.duration||O||v1),oe=Ne.useRef(null),be=Ne.useRef(null),je=_===0,we=_+1<=y,re=p.type,Pe=p.dismissible!==!1,Ae=p.className||"",lt=p.descriptionClassName||"",it=Ne.useMemo(()=>b.findIndex(at=>at.toastId===p.id)||0,[b,p.id]),Ft=Ne.useMemo(()=>{var at;return(at=p.closeButton)!=null?at:T},[p.closeButton,T]),zs=Ne.useMemo(()=>p.duration||O||v1,[p.duration,O]),ce=Ne.useRef(0),$e=Ne.useRef(0),Je=Ne.useRef(0),ze=Ne.useRef(null),[He,Ge]=$.split("-"),Bt=Ne.useMemo(()=>b.reduce((at,et,St)=>St>=it?at:at+et.height,0),[b,it]),Et=z6(),Cn=p.invert||u,ks=re==="loading";$e.current=Ne.useMemo(()=>it*G+Bt,[it,Bt]),Ne.useEffect(()=>{ae.current=zs},[zs]),Ne.useEffect(()=>{se(!0)},[]),Ne.useEffect(()=>{let at=be.current;if(at){let et=at.getBoundingClientRect().height;return te(et),w(St=>[{toastId:p.id,height:et,position:p.position},...St]),()=>w(St=>St.filter(sn=>sn.toastId!==p.id))}},[w,p.id]),Ne.useLayoutEffect(()=>{if(!Z)return;let at=be.current,et=at.style.height;at.style.height="auto";let St=at.getBoundingClientRect().height;at.style.height=et,te(St),w(sn=>sn.find(rn=>rn.toastId===p.id)?sn.map(rn=>rn.toastId===p.id?{...rn,height:St}:rn):[{toastId:p.id,height:St,position:p.position},...sn])},[Z,p.title,p.description,w,p.id]);let Ln=Ne.useCallback(()=>{ie(!0),he($e.current),w(at=>at.filter(et=>et.toastId!==p.id)),setTimeout(()=>{I(p)},eF)},[p,I,w,$e]);Ne.useEffect(()=>{if(p.promise&&re==="loading"||p.duration===1/0||p.type==="loading")return;let at;return k||v||F&&Et?(()=>{if(Je.current<ce.current){let et=new Date().getTime()-ce.current;ae.current=ae.current-et}Je.current=new Date().getTime()})():ae.current!==1/0&&(ce.current=new Date().getTime(),at=setTimeout(()=>{var et;(et=p.onAutoClose)==null||et.call(p,p),Ln()},ae.current)),()=>clearTimeout(at)},[k,v,p,re,F,Et,Ln]),Ne.useEffect(()=>{p.delete&&Ln()},[Ln,p.delete]);function Ci(){var at,et,St;return V!=null&&V.loading?Ne.createElement("div",{className:jr(U==null?void 0:U.loader,(at=p==null?void 0:p.classNames)==null?void 0:at.loader,"sonner-loader"),"data-visible":re==="loading"},V.loading):X?Ne.createElement("div",{className:jr(U==null?void 0:U.loader,(et=p==null?void 0:p.classNames)==null?void 0:et.loader,"sonner-loader"),"data-visible":re==="loading"},X):Ne.createElement(L6,{className:jr(U==null?void 0:U.loader,(St=p==null?void 0:p.classNames)==null?void 0:St.loader),visible:re==="loading"})}return Ne.createElement("li",{tabIndex:0,ref:be,className:jr(A,Ae,U==null?void 0:U.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,U==null?void 0:U.default,U==null?void 0:U[re],(s=p==null?void 0:p.classNames)==null?void 0:s[re]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:C,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":Z,"data-promise":!!p.promise,"data-swiped":me,"data-removed":J,"data-visible":we,"data-y-position":He,"data-x-position":Ge,"data-index":_,"data-front":je,"data-swiping":le,"data-dismissible":Pe,"data-type":re,"data-invert":Cn,"data-swipe-out":ue,"data-swipe-direction":K,"data-expanded":!!(k||Y&&Z),style:{"--index":_,"--toasts-before":_,"--z-index":N.length-_,"--offset":`${J?xe:$e.current}px`,"--initial-height":Y?"auto":`${pe}px`,...M,...p.style},onDragEnd:()=>{Q(!1),W(null),ze.current=null},onPointerDown:at=>{ks||!Pe||(oe.current=new Date,he($e.current),at.target.setPointerCapture(at.pointerId),at.target.tagName!=="BUTTON"&&(Q(!0),ze.current={x:at.clientX,y:at.clientY}))},onPointerUp:()=>{var at,et,St,sn;if(ue||!Pe)return;ze.current=null;let rn=Number(((at=be.current)==null?void 0:at.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Pn=Number(((et=be.current)==null?void 0:et.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pi=new Date().getTime()-((St=oe.current)==null?void 0:St.getTime()),Bs=q==="x"?rn:Pn,Zr=Math.abs(Bs)/Pi;if(Math.abs(Bs)>=J6||Zr>.11){he($e.current),(sn=p.onDismiss)==null||sn.call(p,p),B(q==="x"?rn>0?"right":"left":Pn>0?"down":"up"),Ln(),_e(!0),Se(!1);return}Q(!1),W(null)},onPointerMove:at=>{var et,St,sn,rn;if(!ze.current||!Pe||((et=window.getSelection())==null?void 0:et.toString().length)>0)return;let Pn=at.clientY-ze.current.y,Pi=at.clientX-ze.current.x,Bs=(St=e.swipeDirections)!=null?St:tF($);!q&&(Math.abs(Pi)>1||Math.abs(Pn)>1)&&W(Math.abs(Pi)>Math.abs(Pn)?"x":"y");let Zr={x:0,y:0};q==="y"?(Bs.includes("top")||Bs.includes("bottom"))&&(Bs.includes("top")&&Pn<0||Bs.includes("bottom")&&Pn>0)&&(Zr.y=Pn):q==="x"&&(Bs.includes("left")||Bs.includes("right"))&&(Bs.includes("left")&&Pi<0||Bs.includes("right")&&Pi>0)&&(Zr.x=Pi),(Math.abs(Zr.x)>0||Math.abs(Zr.y)>0)&&Se(!0),(sn=be.current)==null||sn.style.setProperty("--swipe-amount-x",`${Zr.x}px`),(rn=be.current)==null||rn.style.setProperty("--swipe-amount-y",`${Zr.y}px`)}},Ft&&!p.jsx?Ne.createElement("button",{"aria-label":R,"data-disabled":ks,"data-close-button":!0,onClick:ks||!Pe?()=>{}:()=>{var at;Ln(),(at=p.onDismiss)==null||at.call(p,p)},className:jr(U==null?void 0:U.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(a=V==null?void 0:V.close)!=null?a:$6):null,p.jsx||j.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:Ne.createElement(Ne.Fragment,null,re||p.icon||p.promise?Ne.createElement("div",{"data-icon":"",className:jr(U==null?void 0:U.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Ci():null,p.type!=="loading"?p.icon||(V==null?void 0:V[re])||O6(re):null):null,Ne.createElement("div",{"data-content":"",className:jr(U==null?void 0:U.content,(c=p==null?void 0:p.classNames)==null?void 0:c.content)},Ne.createElement("div",{"data-title":"",className:jr(U==null?void 0:U.title,(d=p==null?void 0:p.classNames)==null?void 0:d.title)},typeof p.title=="function"?p.title():p.title),p.description?Ne.createElement("div",{"data-description":"",className:jr(z,lt,U==null?void 0:U.description,(f=p==null?void 0:p.classNames)==null?void 0:f.description)},typeof p.description=="function"?p.description():p.description):null),j.isValidElement(p.cancel)?p.cancel:p.cancel&&Kh(p.cancel)?Ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||P,onClick:at=>{var et,St;Kh(p.cancel)&&Pe&&((St=(et=p.cancel).onClick)==null||St.call(et,at),Ln())},className:jr(U==null?void 0:U.cancelButton,(m=p==null?void 0:p.classNames)==null?void 0:m.cancelButton)},p.cancel.label):null,j.isValidElement(p.action)?p.action:p.action&&Kh(p.action)?Ne.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||E,onClick:at=>{var et,St;Kh(p.action)&&((St=(et=p.action).onClick)==null||St.call(et,at),!at.defaultPrevented&&Ln())},className:jr(U==null?void 0:U.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function x1(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function sF(e,t){let s={};return[e,t].forEach((r,i)=>{let a=i===1,o=a?"--mobile-offset":"--offset",c=a?Y6:K6;function d(f){["top","right","bottom","left"].forEach(m=>{s[`${o}-${m}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?s[`${o}-${f}`]=c:s[`${o}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):d(c)}),s}var rF=j.forwardRef(function(e,t){let{invert:s,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:o,className:c,offset:d,mobileOffset:f,theme:m="light",richColors:h,duration:u,style:p,visibleToasts:x=G6,toastOptions:v,dir:w=x1(),gap:y=Q6,loadingIcon:b,icons:_,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:k}=e,[I,C]=Ne.useState([]),T=Ne.useMemo(()=>Array.from(new Set([r].concat(I.filter(F=>F.position).map(F=>F.position)))),[I,r]),[M,P]=Ne.useState([]),[E,A]=Ne.useState(!1),[z,O]=Ne.useState(!1),[$,G]=Ne.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),X=Ne.useRef(null),Y=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=Ne.useRef(null),V=Ne.useRef(!1),R=Ne.useCallback(F=>{C(q=>{var W;return(W=q.find(K=>K.id===F.id))!=null&&W.delete||Es.dismiss(F.id),q.filter(({id:K})=>K!==F.id)})},[]);return Ne.useEffect(()=>Es.subscribe(F=>{if(F.dismiss){C(q=>q.map(W=>W.id===F.id?{...W,delete:!0}:W));return}setTimeout(()=>{WC.flushSync(()=>{C(q=>{let W=q.findIndex(K=>K.id===F.id);return W!==-1?[...q.slice(0,W),{...q[W],...F},...q.slice(W+1)]:[F,...q]})})})}),[]),Ne.useEffect(()=>{if(m!=="system"){G(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;let F=window.matchMedia("(prefers-color-scheme: dark)");try{F.addEventListener("change",({matches:q})=>{G(q?"dark":"light")})}catch{F.addListener(({matches:W})=>{try{G(W?"dark":"light")}catch(K){console.error(K)}})}},[m]),Ne.useEffect(()=>{I.length<=1&&A(!1)},[I]),Ne.useEffect(()=>{let F=q=>{var W,K;i.every(B=>q[B]||q.code===B)&&(A(!0),(W=X.current)==null||W.focus()),q.code==="Escape"&&(document.activeElement===X.current||(K=X.current)!=null&&K.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[i]),Ne.useEffect(()=>{if(X.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,V.current=!1)}},[X.current]),Ne.createElement("section",{ref:t,"aria-label":`${N} ${Y}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((F,q)=>{var W;let[K,B]=F.split("-");return I.length?Ne.createElement("ol",{key:F,dir:w==="auto"?x1():w,tabIndex:-1,ref:X,className:c,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":K,"data-lifted":E&&I.length>1&&!a,"data-x-position":B,style:{"--front-toast-height":`${((W=M[0])==null?void 0:W.height)||0}px`,"--width":`${X6}px`,"--gap":`${y}px`,...p,...sF(d,f)},onBlur:Z=>{V.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(V.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||V.current||(V.current=!0,U.current=Z.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{z||A(!1)},onDragEnd:()=>A(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},I.filter(Z=>!Z.position&&q===0||Z.position===F).map((Z,se)=>{var J,ie;return Ne.createElement(nF,{key:Z.id,icons:_,index:se,toast:Z,defaultRichColors:h,duration:(J=v==null?void 0:v.duration)!=null?J:u,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:s,visibleToasts:x,closeButton:(ie=v==null?void 0:v.closeButton)!=null?ie:o,interacting:z,position:F,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:R,toasts:I.filter(le=>le.position==Z.position),heights:M.filter(le=>le.position==Z.position),setHeights:P,expandByDefault:a,gap:y,loadingIcon:b,expanded:E,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});const iF=({...e})=>{const{theme:t="system"}=A6();return n.jsx(rF,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var aF=c0[" useId ".trim().toString()]||(()=>{}),oF=0;function $r(e){const[t,s]=j.useState(aF());return kn(()=>{e||s(r=>r??String(oF++))},[e]),e||(t?`radix-${t}`:"")}const lF=["top","right","bottom","left"],Ha=Math.min,qs=Math.max,rm=Math.round,Yh=Math.floor,hi=e=>({x:e,y:e}),cF={left:"right",right:"left",bottom:"top",top:"bottom"},dF={start:"end",end:"start"};function Fx(e,t,s){return qs(e,Ha(t,s))}function Qi(e,t){return typeof e=="function"?e(t):e}function Ji(e){return e.split("-")[0]}function Fc(e){return e.split("-")[1]}function hb(e){return e==="x"?"y":"x"}function fb(e){return e==="y"?"height":"width"}const uF=new Set(["top","bottom"]);function li(e){return uF.has(Ji(e))?"y":"x"}function mb(e){return hb(li(e))}function hF(e,t,s){s===void 0&&(s=!1);const r=Fc(e),i=mb(e),a=fb(i);let o=i==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=im(o)),[o,im(o)]}function fF(e){const t=im(e);return[$x(e),t,$x(t)]}function $x(e){return e.replace(/start|end/g,t=>dF[t])}const y1=["left","right"],b1=["right","left"],mF=["top","bottom"],pF=["bottom","top"];function gF(e,t,s){switch(e){case"top":case"bottom":return s?t?b1:y1:t?y1:b1;case"left":case"right":return t?mF:pF;default:return[]}}function vF(e,t,s,r){const i=Fc(e);let a=gF(Ji(e),s==="start",r);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map($x)))),a}function im(e){return e.replace(/left|right|bottom|top/g,t=>cF[t])}function xF(e){return{top:0,right:0,bottom:0,left:0,...e}}function VP(e){return typeof e!="number"?xF(e):{top:e,right:e,bottom:e,left:e}}function am(e){const{x:t,y:s,width:r,height:i}=e;return{width:r,height:i,top:s,left:t,right:t+r,bottom:s+i,x:t,y:s}}function w1(e,t,s){let{reference:r,floating:i}=e;const a=li(t),o=mb(t),c=fb(o),d=Ji(t),f=a==="y",m=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,u=r[c]/2-i[c]/2;let p;switch(d){case"top":p={x:m,y:r.y-i.height};break;case"bottom":p={x:m,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Fc(t)){case"start":p[o]-=u*(s&&f?-1:1);break;case"end":p[o]+=u*(s&&f?-1:1);break}return p}const yF=async(e,t,s)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=s,c=a.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:m,y:h}=w1(f,r,d),u=r,p={},x=0;for(let v=0;v<c.length;v++){const{name:w,fn:y}=c[v],{x:b,y:_,data:N,reset:k}=await y({x:m,y:h,initialPlacement:r,placement:u,strategy:i,middlewareData:p,rects:f,platform:o,elements:{reference:e,floating:t}});m=b??m,h=_??h,p={...p,[w]:{...p[w],...N}},k&&x<=50&&(x++,typeof k=="object"&&(k.placement&&(u=k.placement),k.rects&&(f=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):k.rects),{x:m,y:h}=w1(f,u,d)),v=-1)}return{x:m,y:h,placement:u,strategy:i,middlewareData:p}};async function ku(e,t){var s;t===void 0&&(t={});const{x:r,y:i,platform:a,rects:o,elements:c,strategy:d}=e,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:u=!1,padding:p=0}=Qi(t,e),x=VP(p),w=c[u?h==="floating"?"reference":"floating":h],y=am(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(w)))==null||s?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:f,rootBoundary:m,strategy:d})),b=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),N=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},k=am(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:_,strategy:d}):b);return{top:(y.top-k.top+x.top)/N.y,bottom:(k.bottom-y.bottom+x.bottom)/N.y,left:(y.left-k.left+x.left)/N.x,right:(k.right-y.right+x.right)/N.x}}const bF=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:r,placement:i,rects:a,platform:o,elements:c,middlewareData:d}=t,{element:f,padding:m=0}=Qi(e,t)||{};if(f==null)return{};const h=VP(m),u={x:s,y:r},p=mb(i),x=fb(p),v=await o.getDimensions(f),w=p==="y",y=w?"top":"left",b=w?"bottom":"right",_=w?"clientHeight":"clientWidth",N=a.reference[x]+a.reference[p]-u[p]-a.floating[x],k=u[p]-a.reference[p],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let C=I?I[_]:0;(!C||!await(o.isElement==null?void 0:o.isElement(I)))&&(C=c.floating[_]||a.floating[x]);const T=N/2-k/2,M=C/2-v[x]/2-1,P=Ha(h[y],M),E=Ha(h[b],M),A=P,z=C-v[x]-E,O=C/2-v[x]/2+T,$=Fx(A,O,z),G=!d.arrow&&Fc(i)!=null&&O!==$&&a.reference[x]/2-(O<A?P:E)-v[x]/2<0,X=G?O<A?O-A:O-z:0;return{[p]:u[p]+X,data:{[p]:$,centerOffset:O-$-X,...G&&{alignmentOffset:X}},reset:G}}}),wF=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:c,platform:d,elements:f}=t,{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:u,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...w}=Qi(e,t);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const y=Ji(i),b=li(c),_=Ji(c)===c,N=await(d.isRTL==null?void 0:d.isRTL(f.floating)),k=u||(_||!v?[im(c)]:fF(c)),I=x!=="none";!u&&I&&k.push(...vF(c,v,x,N));const C=[c,...k],T=await ku(t,w),M=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(m&&M.push(T[y]),h){const O=hF(i,o,N);M.push(T[O[0]],T[O[1]])}if(P=[...P,{placement:i,overflows:M}],!M.every(O=>O<=0)){var E,A;const O=(((E=a.flip)==null?void 0:E.index)||0)+1,$=C[O];if($&&(!(h==="alignment"?b!==li($):!1)||P.every(Y=>Y.overflows[0]>0&&li(Y.placement)===b)))return{data:{index:O,overflows:P},reset:{placement:$}};let G=(A=P.filter(X=>X.overflows[0]<=0).sort((X,Y)=>X.overflows[1]-Y.overflows[1])[0])==null?void 0:A.placement;if(!G)switch(p){case"bestFit":{var z;const X=(z=P.filter(Y=>{if(I){const U=li(Y.placement);return U===b||U==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(U=>U>0).reduce((U,V)=>U+V,0)]).sort((Y,U)=>Y[1]-U[1])[0])==null?void 0:z[0];X&&(G=X);break}case"initialPlacement":G=c;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function j1(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function _1(e){return lF.some(t=>e[t]>=0)}const jF=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:r="referenceHidden",...i}=Qi(e,t);switch(r){case"referenceHidden":{const a=await ku(t,{...i,elementContext:"reference"}),o=j1(a,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:_1(o)}}}case"escaped":{const a=await ku(t,{...i,altBoundary:!0}),o=j1(a,s.floating);return{data:{escapedOffsets:o,escaped:_1(o)}}}default:return{}}}}},UP=new Set(["left","top"]);async function _F(e,t){const{placement:s,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ji(s),c=Fc(s),d=li(s)==="y",f=UP.has(o)?-1:1,m=a&&d?-1:1,h=Qi(t,e);let{mainAxis:u,crossAxis:p,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof x=="number"&&(p=c==="end"?x*-1:x),d?{x:p*m,y:u*f}:{x:u*f,y:p*m}}const NF=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,r;const{x:i,y:a,placement:o,middlewareData:c}=t,d=await _F(t,e);return o===((s=c.offset)==null?void 0:s.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:o}}}}},SF=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:c={fn:w=>{let{x:y,y:b}=w;return{x:y,y:b}}},...d}=Qi(e,t),f={x:s,y:r},m=await ku(t,d),h=li(Ji(i)),u=hb(h);let p=f[u],x=f[h];if(a){const w=u==="y"?"top":"left",y=u==="y"?"bottom":"right",b=p+m[w],_=p-m[y];p=Fx(b,p,_)}if(o){const w=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=x+m[w],_=x-m[y];x=Fx(b,x,_)}const v=c.fn({...t,[u]:p,[h]:x});return{...v,data:{x:v.x-s,y:v.y-r,enabled:{[u]:a,[h]:o}}}}}},kF=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:c=0,mainAxis:d=!0,crossAxis:f=!0}=Qi(e,t),m={x:s,y:r},h=li(i),u=hb(h);let p=m[u],x=m[h];const v=Qi(c,t),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(d){const _=u==="y"?"height":"width",N=a.reference[u]-a.floating[_]+w.mainAxis,k=a.reference[u]+a.reference[_]-w.mainAxis;p<N?p=N:p>k&&(p=k)}if(f){var y,b;const _=u==="y"?"width":"height",N=UP.has(Ji(i)),k=a.reference[h]-a.floating[_]+(N&&((y=o.offset)==null?void 0:y[h])||0)+(N?0:w.crossAxis),I=a.reference[h]+a.reference[_]+(N?0:((b=o.offset)==null?void 0:b[h])||0)-(N?w.crossAxis:0);x<k?x=k:x>I&&(x=I)}return{[u]:p,[h]:x}}}},CF=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,r;const{placement:i,rects:a,platform:o,elements:c}=t,{apply:d=()=>{},...f}=Qi(e,t),m=await ku(t,f),h=Ji(i),u=Fc(i),p=li(i)==="y",{width:x,height:v}=a.floating;let w,y;h==="top"||h==="bottom"?(w=h,y=u===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(y=h,w=u==="end"?"top":"bottom");const b=v-m.top-m.bottom,_=x-m.left-m.right,N=Ha(v-m[w],b),k=Ha(x-m[y],_),I=!t.middlewareData.shift;let C=N,T=k;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(T=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=b),I&&!u){const P=qs(m.left,0),E=qs(m.right,0),A=qs(m.top,0),z=qs(m.bottom,0);p?T=x-2*(P!==0||E!==0?P+E:qs(m.left,m.right)):C=v-2*(A!==0||z!==0?A+z:qs(m.top,m.bottom))}await d({...t,availableWidth:T,availableHeight:C});const M=await o.getDimensions(c.floating);return x!==M.width||v!==M.height?{reset:{rects:!0}}:{}}}};function ap(){return typeof window<"u"}function $c(e){return qP(e)?(e.nodeName||"").toLowerCase():"#document"}function Gs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ni(e){var t;return(t=(qP(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function qP(e){return ap()?e instanceof Node||e instanceof Gs(e).Node:!1}function Ur(e){return ap()?e instanceof Element||e instanceof Gs(e).Element:!1}function wi(e){return ap()?e instanceof HTMLElement||e instanceof Gs(e).HTMLElement:!1}function N1(e){return!ap()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gs(e).ShadowRoot}const PF=new Set(["inline","contents"]);function th(e){const{overflow:t,overflowX:s,overflowY:r,display:i}=qr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+s)&&!PF.has(i)}const EF=new Set(["table","td","th"]);function TF(e){return EF.has($c(e))}const AF=[":popover-open",":modal"];function op(e){return AF.some(t=>{try{return e.matches(t)}catch{return!1}})}const OF=["transform","translate","scale","rotate","perspective"],RF=["transform","translate","scale","rotate","perspective","filter"],LF=["paint","layout","strict","content"];function pb(e){const t=gb(),s=Ur(e)?qr(e):e;return OF.some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||RF.some(r=>(s.willChange||"").includes(r))||LF.some(r=>(s.contain||"").includes(r))}function MF(e){let t=Wa(e);for(;wi(t)&&!gc(t);){if(pb(t))return t;if(op(t))return null;t=Wa(t)}return null}function gb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const IF=new Set(["html","body","#document"]);function gc(e){return IF.has($c(e))}function qr(e){return Gs(e).getComputedStyle(e)}function lp(e){return Ur(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Wa(e){if($c(e)==="html")return e;const t=e.assignedSlot||e.parentNode||N1(e)&&e.host||Ni(e);return N1(t)?t.host:t}function HP(e){const t=Wa(e);return gc(t)?e.ownerDocument?e.ownerDocument.body:e.body:wi(t)&&th(t)?t:HP(t)}function Cu(e,t,s){var r;t===void 0&&(t=[]),s===void 0&&(s=!0);const i=HP(e),a=i===((r=e.ownerDocument)==null?void 0:r.body),o=Gs(i);if(a){const c=zx(o);return t.concat(o,o.visualViewport||[],th(i)?i:[],c&&s?Cu(c):[])}return t.concat(i,Cu(i,[],s))}function zx(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function WP(e){const t=qr(e);let s=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=wi(e),a=i?e.offsetWidth:s,o=i?e.offsetHeight:r,c=rm(s)!==a||rm(r)!==o;return c&&(s=a,r=o),{width:s,height:r,$:c}}function vb(e){return Ur(e)?e:e.contextElement}function Kl(e){const t=vb(e);if(!wi(t))return hi(1);const s=t.getBoundingClientRect(),{width:r,height:i,$:a}=WP(t);let o=(a?rm(s.width):s.width)/r,c=(a?rm(s.height):s.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const DF=hi(0);function ZP(e){const t=Gs(e);return!gb()||!t.visualViewport?DF:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function FF(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==Gs(e)?!1:t}function Wo(e,t,s,r){t===void 0&&(t=!1),s===void 0&&(s=!1);const i=e.getBoundingClientRect(),a=vb(e);let o=hi(1);t&&(r?Ur(r)&&(o=Kl(r)):o=Kl(e));const c=FF(a,s,r)?ZP(a):hi(0);let d=(i.left+c.x)/o.x,f=(i.top+c.y)/o.y,m=i.width/o.x,h=i.height/o.y;if(a){const u=Gs(a),p=r&&Ur(r)?Gs(r):r;let x=u,v=zx(x);for(;v&&r&&p!==x;){const w=Kl(v),y=v.getBoundingClientRect(),b=qr(v),_=y.left+(v.clientLeft+parseFloat(b.paddingLeft))*w.x,N=y.top+(v.clientTop+parseFloat(b.paddingTop))*w.y;d*=w.x,f*=w.y,m*=w.x,h*=w.y,d+=_,f+=N,x=Gs(v),v=zx(x)}}return am({width:m,height:h,x:d,y:f})}function xb(e,t){const s=lp(e).scrollLeft;return t?t.left+s:Wo(Ni(e)).left+s}function GP(e,t,s){s===void 0&&(s=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(s?0:xb(e,r)),a=r.top+t.scrollTop;return{x:i,y:a}}function $F(e){let{elements:t,rect:s,offsetParent:r,strategy:i}=e;const a=i==="fixed",o=Ni(r),c=t?op(t.floating):!1;if(r===o||c&&a)return s;let d={scrollLeft:0,scrollTop:0},f=hi(1);const m=hi(0),h=wi(r);if((h||!h&&!a)&&(($c(r)!=="body"||th(o))&&(d=lp(r)),wi(r))){const p=Wo(r);f=Kl(r),m.x=p.x+r.clientLeft,m.y=p.y+r.clientTop}const u=o&&!h&&!a?GP(o,d,!0):hi(0);return{width:s.width*f.x,height:s.height*f.y,x:s.x*f.x-d.scrollLeft*f.x+m.x+u.x,y:s.y*f.y-d.scrollTop*f.y+m.y+u.y}}function zF(e){return Array.from(e.getClientRects())}function BF(e){const t=Ni(e),s=lp(e),r=e.ownerDocument.body,i=qs(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=qs(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-s.scrollLeft+xb(e);const c=-s.scrollTop;return qr(r).direction==="rtl"&&(o+=qs(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:c}}function VF(e,t){const s=Gs(e),r=Ni(e),i=s.visualViewport;let a=r.clientWidth,o=r.clientHeight,c=0,d=0;if(i){a=i.width,o=i.height;const f=gb();(!f||f&&t==="fixed")&&(c=i.offsetLeft,d=i.offsetTop)}return{width:a,height:o,x:c,y:d}}const UF=new Set(["absolute","fixed"]);function qF(e,t){const s=Wo(e,!0,t==="fixed"),r=s.top+e.clientTop,i=s.left+e.clientLeft,a=wi(e)?Kl(e):hi(1),o=e.clientWidth*a.x,c=e.clientHeight*a.y,d=i*a.x,f=r*a.y;return{width:o,height:c,x:d,y:f}}function S1(e,t,s){let r;if(t==="viewport")r=VF(e,s);else if(t==="document")r=BF(Ni(e));else if(Ur(t))r=qF(t,s);else{const i=ZP(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return am(r)}function KP(e,t){const s=Wa(e);return s===t||!Ur(s)||gc(s)?!1:qr(s).position==="fixed"||KP(s,t)}function HF(e,t){const s=t.get(e);if(s)return s;let r=Cu(e,[],!1).filter(c=>Ur(c)&&$c(c)!=="body"),i=null;const a=qr(e).position==="fixed";let o=a?Wa(e):e;for(;Ur(o)&&!gc(o);){const c=qr(o),d=pb(o);!d&&c.position==="fixed"&&(i=null),(a?!d&&!i:!d&&c.position==="static"&&!!i&&UF.has(i.position)||th(o)&&!d&&KP(e,o))?r=r.filter(m=>m!==o):i=c,o=Wa(o)}return t.set(e,r),r}function WF(e){let{element:t,boundary:s,rootBoundary:r,strategy:i}=e;const o=[...s==="clippingAncestors"?op(t)?[]:HF(t,this._c):[].concat(s),r],c=o[0],d=o.reduce((f,m)=>{const h=S1(t,m,i);return f.top=qs(h.top,f.top),f.right=Ha(h.right,f.right),f.bottom=Ha(h.bottom,f.bottom),f.left=qs(h.left,f.left),f},S1(t,c,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function ZF(e){const{width:t,height:s}=WP(e);return{width:t,height:s}}function GF(e,t,s){const r=wi(t),i=Ni(t),a=s==="fixed",o=Wo(e,!0,a,t);let c={scrollLeft:0,scrollTop:0};const d=hi(0);function f(){d.x=xb(i)}if(r||!r&&!a)if(($c(t)!=="body"||th(i))&&(c=lp(t)),r){const p=Wo(t,!0,a,t);d.x=p.x+t.clientLeft,d.y=p.y+t.clientTop}else i&&f();a&&!r&&i&&f();const m=i&&!r&&!a?GP(i,c):hi(0),h=o.left+c.scrollLeft-d.x-m.x,u=o.top+c.scrollTop-d.y-m.y;return{x:h,y:u,width:o.width,height:o.height}}function sv(e){return qr(e).position==="static"}function k1(e,t){if(!wi(e)||qr(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return Ni(e)===s&&(s=s.ownerDocument.body),s}function YP(e,t){const s=Gs(e);if(op(e))return s;if(!wi(e)){let i=Wa(e);for(;i&&!gc(i);){if(Ur(i)&&!sv(i))return i;i=Wa(i)}return s}let r=k1(e,t);for(;r&&TF(r)&&sv(r);)r=k1(r,t);return r&&gc(r)&&sv(r)&&!pb(r)?s:r||MF(e)||s}const KF=async function(e){const t=this.getOffsetParent||YP,s=this.getDimensions,r=await s(e.floating);return{reference:GF(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function YF(e){return qr(e).direction==="rtl"}const XF={convertOffsetParentRelativeRectToViewportRelativeRect:$F,getDocumentElement:Ni,getClippingRect:WF,getOffsetParent:YP,getElementRects:KF,getClientRects:zF,getDimensions:ZF,getScale:Kl,isElement:Ur,isRTL:YF};function XP(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function QF(e,t){let s=null,r;const i=Ni(e);function a(){var c;clearTimeout(r),(c=s)==null||c.disconnect(),s=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),a();const f=e.getBoundingClientRect(),{left:m,top:h,width:u,height:p}=f;if(c||t(),!u||!p)return;const x=Yh(h),v=Yh(i.clientWidth-(m+u)),w=Yh(i.clientHeight-(h+p)),y=Yh(m),_={rootMargin:-x+"px "+-v+"px "+-w+"px "+-y+"px",threshold:qs(0,Ha(1,d))||1};let N=!0;function k(I){const C=I[0].intersectionRatio;if(C!==d){if(!N)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!XP(f,e.getBoundingClientRect())&&o(),N=!1}try{s=new IntersectionObserver(k,{..._,root:i.ownerDocument})}catch{s=new IntersectionObserver(k,_)}s.observe(e)}return o(!0),a}function JF(e,t,s,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,f=vb(e),m=i||a?[...f?Cu(f):[],...Cu(t)]:[];m.forEach(y=>{i&&y.addEventListener("scroll",s,{passive:!0}),a&&y.addEventListener("resize",s)});const h=f&&c?QF(f,s):null;let u=-1,p=null;o&&(p=new ResizeObserver(y=>{let[b]=y;b&&b.target===f&&p&&(p.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),s()}),f&&!d&&p.observe(f),p.observe(t));let x,v=d?Wo(e):null;d&&w();function w(){const y=Wo(e);v&&!XP(v,y)&&s(),v=y,x=requestAnimationFrame(w)}return s(),()=>{var y;m.forEach(b=>{i&&b.removeEventListener("scroll",s),a&&b.removeEventListener("resize",s)}),h==null||h(),(y=p)==null||y.disconnect(),p=null,d&&cancelAnimationFrame(x)}}const e8=NF,t8=SF,n8=wF,s8=CF,r8=jF,C1=bF,i8=kF,a8=(e,t,s)=>{const r=new Map,i={platform:XF,...s},a={...i.platform,_c:r};return yF(e,t,{...i,platform:a})};var o8=typeof document<"u",l8=function(){},_f=o8?j.useLayoutEffect:l8;function om(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(r=s;r--!==0;)if(!om(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),s=i.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=s;r--!==0;){const a=i[r];if(!(a==="_owner"&&e.$$typeof)&&!om(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function QP(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function P1(e,t){const s=QP(e);return Math.round(t*s)/s}function rv(e){const t=j.useRef(e);return _f(()=>{t.current=e}),t}function c8(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:c=!0,whileElementsMounted:d,open:f}=e,[m,h]=j.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[u,p]=j.useState(r);om(u,r)||p(r);const[x,v]=j.useState(null),[w,y]=j.useState(null),b=j.useCallback(Y=>{Y!==I.current&&(I.current=Y,v(Y))},[]),_=j.useCallback(Y=>{Y!==C.current&&(C.current=Y,y(Y))},[]),N=a||x,k=o||w,I=j.useRef(null),C=j.useRef(null),T=j.useRef(m),M=d!=null,P=rv(d),E=rv(i),A=rv(f),z=j.useCallback(()=>{if(!I.current||!C.current)return;const Y={placement:t,strategy:s,middleware:u};E.current&&(Y.platform=E.current),a8(I.current,C.current,Y).then(U=>{const V={...U,isPositioned:A.current!==!1};O.current&&!om(T.current,V)&&(T.current=V,eo.flushSync(()=>{h(V)}))})},[u,t,s,E,A]);_f(()=>{f===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(Y=>({...Y,isPositioned:!1})))},[f]);const O=j.useRef(!1);_f(()=>(O.current=!0,()=>{O.current=!1}),[]),_f(()=>{if(N&&(I.current=N),k&&(C.current=k),N&&k){if(P.current)return P.current(N,k,z);z()}},[N,k,z,P,M]);const $=j.useMemo(()=>({reference:I,floating:C,setReference:b,setFloating:_}),[b,_]),G=j.useMemo(()=>({reference:N,floating:k}),[N,k]),X=j.useMemo(()=>{const Y={position:s,left:0,top:0};if(!G.floating)return Y;const U=P1(G.floating,m.x),V=P1(G.floating,m.y);return c?{...Y,transform:"translate("+U+"px, "+V+"px)",...QP(G.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:U,top:V}},[s,c,G.floating,m.x,m.y]);return j.useMemo(()=>({...m,update:z,refs:$,elements:G,floatingStyles:X}),[m,z,$,G,X])}const d8=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:r,padding:i}=typeof e=="function"?e(s):e;return r&&t(r)?r.current!=null?C1({element:r.current,padding:i}).fn(s):{}:r?C1({element:r,padding:i}).fn(s):{}}}},u8=(e,t)=>({...e8(e),options:[e,t]}),h8=(e,t)=>({...t8(e),options:[e,t]}),f8=(e,t)=>({...i8(e),options:[e,t]}),m8=(e,t)=>({...n8(e),options:[e,t]}),p8=(e,t)=>({...s8(e),options:[e,t]}),g8=(e,t)=>({...r8(e),options:[e,t]}),v8=(e,t)=>({...d8(e),options:[e,t]});var x8="Arrow",JP=j.forwardRef((e,t)=>{const{children:s,width:r=10,height:i=5,...a}=e;return n.jsx(Xe.svg,{...a,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});JP.displayName=x8;var y8=JP;function cp(e){const[t,s]=j.useState(void 0);return kn(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,c;if("borderBoxSize"in a){const d=a.borderBoxSize,f=Array.isArray(d)?d[0]:d;o=f.inlineSize,c=f.blockSize}else o=e.offsetWidth,c=e.offsetHeight;s({width:o,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else s(void 0)},[e]),t}var yb="Popper",[eE,zc]=ds(yb),[b8,tE]=eE(yb),nE=e=>{const{__scopePopper:t,children:s}=e,[r,i]=j.useState(null);return n.jsx(b8,{scope:t,anchor:r,onAnchorChange:i,children:s})};nE.displayName=yb;var sE="PopperAnchor",rE=j.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:r,...i}=e,a=tE(sE,s),o=j.useRef(null),c=ft(t,o);return j.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:n.jsx(Xe.div,{...i,ref:c})});rE.displayName=sE;var bb="PopperContent",[w8,j8]=eE(bb),iE=j.forwardRef((e,t)=>{var Z,se,J,ie,le,Q;const{__scopePopper:s,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:h="partial",hideWhenDetached:u=!1,updatePositionStrategy:p="optimized",onPlaced:x,...v}=e,w=tE(bb,s),[y,b]=j.useState(null),_=ft(t,ue=>b(ue)),[N,k]=j.useState(null),I=cp(N),C=(I==null?void 0:I.width)??0,T=(I==null?void 0:I.height)??0,M=r+(a!=="center"?"-"+a:""),P=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},E=Array.isArray(f)?f:[f],A=E.length>0,z={padding:P,boundary:E.filter(N8),altBoundary:A},{refs:O,floatingStyles:$,placement:G,isPositioned:X,middlewareData:Y}=c8({strategy:"fixed",placement:M,whileElementsMounted:(...ue)=>JF(...ue,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[u8({mainAxis:i+T,alignmentAxis:o}),d&&h8({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?f8():void 0,...z}),d&&m8({...z}),p8({...z,apply:({elements:ue,rects:_e,availableWidth:me,availableHeight:Se})=>{const{width:xe,height:he}=_e.reference,pe=ue.floating.style;pe.setProperty("--radix-popper-available-width",`${me}px`),pe.setProperty("--radix-popper-available-height",`${Se}px`),pe.setProperty("--radix-popper-anchor-width",`${xe}px`),pe.setProperty("--radix-popper-anchor-height",`${he}px`)}}),N&&v8({element:N,padding:c}),S8({arrowWidth:C,arrowHeight:T}),u&&g8({strategy:"referenceHidden",...z})]}),[U,V]=lE(G),R=vn(x);kn(()=>{X&&(R==null||R())},[X,R]);const F=(Z=Y.arrow)==null?void 0:Z.x,q=(se=Y.arrow)==null?void 0:se.y,W=((J=Y.arrow)==null?void 0:J.centerOffset)!==0,[K,B]=j.useState();return kn(()=>{y&&B(window.getComputedStyle(y).zIndex)},[y]),n.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:X?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(ie=Y.transformOrigin)==null?void 0:ie.x,(le=Y.transformOrigin)==null?void 0:le.y].join(" "),...((Q=Y.hide)==null?void 0:Q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(w8,{scope:s,placedSide:U,onArrowChange:k,arrowX:F,arrowY:q,shouldHideArrow:W,children:n.jsx(Xe.div,{"data-side":U,"data-align":V,...v,ref:_,style:{...v.style,animation:X?void 0:"none"}})})})});iE.displayName=bb;var aE="PopperArrow",_8={top:"bottom",right:"left",bottom:"top",left:"right"},oE=j.forwardRef(function(t,s){const{__scopePopper:r,...i}=t,a=j8(aE,r),o=_8[a.placedSide];return n.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:n.jsx(y8,{...i,ref:s,style:{...i.style,display:"block"}})})});oE.displayName=aE;function N8(e){return e!==null}var S8=e=>({name:"transformOrigin",options:e,fn(t){var w,y,b;const{placement:s,rects:r,middlewareData:i}=t,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,c=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[f,m]=lE(s),h={start:"0%",center:"50%",end:"100%"}[m],u=(((y=i.arrow)==null?void 0:y.x)??0)+c/2,p=(((b=i.arrow)==null?void 0:b.y)??0)+d/2;let x="",v="";return f==="bottom"?(x=o?h:`${u}px`,v=`${-d}px`):f==="top"?(x=o?h:`${u}px`,v=`${r.floating.height+d}px`):f==="right"?(x=`${-d}px`,v=o?h:`${p}px`):f==="left"&&(x=`${r.floating.width+d}px`,v=o?h:`${p}px`),{data:{x,y:v}}}});function lE(e){const[t,s="center"]=e.split("-");return[t,s]}var wb=nE,jb=rE,_b=iE,Nb=oE,[dp,qse]=ds("Tooltip",[zc]),up=zc(),cE="TooltipProvider",k8=700,Bx="tooltip.open",[C8,Sb]=dp(cE),dE=e=>{const{__scopeTooltip:t,delayDuration:s=k8,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=e,o=j.useRef(!0),c=j.useRef(!1),d=j.useRef(0);return j.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),n.jsx(C8,{scope:t,isOpenDelayedRef:o,delayDuration:s,onOpen:j.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:j.useCallback(f=>{c.current=f},[]),disableHoverableContent:i,children:a})};dE.displayName=cE;var Pu="Tooltip",[P8,hp]=dp(Pu),uE=e=>{const{__scopeTooltip:t,children:s,open:r,defaultOpen:i,onOpenChange:a,disableHoverableContent:o,delayDuration:c}=e,d=Sb(Pu,e.__scopeTooltip),f=up(t),[m,h]=j.useState(null),u=$r(),p=j.useRef(0),x=o??d.disableHoverableContent,v=c??d.delayDuration,w=j.useRef(!1),[y,b]=Br({prop:r,defaultProp:i??!1,onChange:C=>{C?(d.onOpen(),document.dispatchEvent(new CustomEvent(Bx))):d.onClose(),a==null||a(C)},caller:Pu}),_=j.useMemo(()=>y?w.current?"delayed-open":"instant-open":"closed",[y]),N=j.useCallback(()=>{window.clearTimeout(p.current),p.current=0,w.current=!1,b(!0)},[b]),k=j.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),I=j.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{w.current=!0,b(!0),p.current=0},v)},[v,b]);return j.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),n.jsx(wb,{...f,children:n.jsx(P8,{scope:t,contentId:u,open:y,stateAttribute:_,trigger:m,onTriggerChange:h,onTriggerEnter:j.useCallback(()=>{d.isOpenDelayedRef.current?I():N()},[d.isOpenDelayedRef,I,N]),onTriggerLeave:j.useCallback(()=>{x?k():(window.clearTimeout(p.current),p.current=0)},[k,x]),onOpen:N,onClose:k,disableHoverableContent:x,children:s})})};uE.displayName=Pu;var Vx="TooltipTrigger",hE=j.forwardRef((e,t)=>{const{__scopeTooltip:s,...r}=e,i=hp(Vx,s),a=Sb(Vx,s),o=up(s),c=j.useRef(null),d=ft(t,c,i.onTriggerChange),f=j.useRef(!1),m=j.useRef(!1),h=j.useCallback(()=>f.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),n.jsx(jb,{asChild:!0,...o,children:n.jsx(Xe.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:d,onPointerMove:Me(e.onPointerMove,u=>{u.pointerType!=="touch"&&!m.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),m.current=!0)}),onPointerLeave:Me(e.onPointerLeave,()=>{i.onTriggerLeave(),m.current=!1}),onPointerDown:Me(e.onPointerDown,()=>{i.open&&i.onClose(),f.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Me(e.onFocus,()=>{f.current||i.onOpen()}),onBlur:Me(e.onBlur,i.onClose),onClick:Me(e.onClick,i.onClose)})})});hE.displayName=Vx;var E8="TooltipPortal",[Hse,T8]=dp(E8,{forceMount:void 0}),vc="TooltipContent",fE=j.forwardRef((e,t)=>{const s=T8(vc,e.__scopeTooltip),{forceMount:r=s.forceMount,side:i="top",...a}=e,o=hp(vc,e.__scopeTooltip);return n.jsx(Jn,{present:r||o.open,children:o.disableHoverableContent?n.jsx(mE,{side:i,...a,ref:t}):n.jsx(A8,{side:i,...a,ref:t})})}),A8=j.forwardRef((e,t)=>{const s=hp(vc,e.__scopeTooltip),r=Sb(vc,e.__scopeTooltip),i=j.useRef(null),a=ft(t,i),[o,c]=j.useState(null),{trigger:d,onClose:f}=s,m=i.current,{onPointerInTransitChange:h}=r,u=j.useCallback(()=>{c(null),h(!1)},[h]),p=j.useCallback((x,v)=>{const w=x.currentTarget,y={x:x.clientX,y:x.clientY},b=I8(y,w.getBoundingClientRect()),_=D8(y,b),N=F8(v.getBoundingClientRect()),k=z8([..._,...N]);c(k),h(!0)},[h]);return j.useEffect(()=>()=>u(),[u]),j.useEffect(()=>{if(d&&m){const x=w=>p(w,m),v=w=>p(w,d);return d.addEventListener("pointerleave",x),m.addEventListener("pointerleave",v),()=>{d.removeEventListener("pointerleave",x),m.removeEventListener("pointerleave",v)}}},[d,m,p,u]),j.useEffect(()=>{if(o){const x=v=>{const w=v.target,y={x:v.clientX,y:v.clientY},b=(d==null?void 0:d.contains(w))||(m==null?void 0:m.contains(w)),_=!$8(y,o);b?u():_&&(u(),f())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[d,m,o,f,u]),n.jsx(mE,{...e,ref:a})}),[O8,R8]=dp(Pu,{isInside:!1}),L8=zI("TooltipContent"),mE=j.forwardRef((e,t)=>{const{__scopeTooltip:s,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...c}=e,d=hp(vc,s),f=up(s),{onClose:m}=d;return j.useEffect(()=>(document.addEventListener(Bx,m),()=>document.removeEventListener(Bx,m)),[m]),j.useEffect(()=>{if(d.trigger){const h=u=>{const p=u.target;p!=null&&p.contains(d.trigger)&&m()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[d.trigger,m]),n.jsx(Mc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:m,children:n.jsxs(_b,{"data-state":d.stateAttribute,...f,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(L8,{children:r}),n.jsx(O8,{scope:s,isInside:!0,children:n.jsx(lD,{id:d.contentId,role:"tooltip",children:i||r})})]})})});fE.displayName=vc;var pE="TooltipArrow",M8=j.forwardRef((e,t)=>{const{__scopeTooltip:s,...r}=e,i=up(s);return R8(pE,s).isInside?null:n.jsx(Nb,{...i,...r,ref:t})});M8.displayName=pE;function I8(e,t){const s=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(s,r,i,a)){case a:return"left";case i:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function D8(e,t,s=5){const r=[];switch(t){case"top":r.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":r.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":r.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":r.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return r}function F8(e){const{top:t,right:s,bottom:r,left:i}=e;return[{x:i,y:t},{x:s,y:t},{x:s,y:r},{x:i,y:r}]}function $8(e,t){const{x:s,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const c=t[a],d=t[o],f=c.x,m=c.y,h=d.x,u=d.y;m>r!=u>r&&s<(h-f)*(r-m)/(u-m)+f&&(i=!i)}return i}function z8(e){const t=e.slice();return t.sort((s,r)=>s.x<r.x?-1:s.x>r.x?1:s.y<r.y?-1:s.y>r.y?1:0),B8(t)}function B8(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const s=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;s.length>=2;){const a=s[s.length-1],o=s[s.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))s.pop();else break}s.push(i)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}var V8=dE,U8=uE,q8=hE,gE=fE;const H8=V8,E1=U8,T1=q8,Ux=j.forwardRef(({className:e,sideOffset:t=4,...s},r)=>n.jsx(gE,{ref:r,sideOffset:t,className:Ze("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));Ux.displayName=gE.displayName;var fp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mp=typeof window>"u"||"Deno"in globalThis;function kr(){}function W8(e,t){return typeof e=="function"?e(t):e}function Z8(e){return typeof e=="number"&&e>=0&&e!==1/0}function G8(e,t){return Math.max(e+(t||0)-Date.now(),0)}function qx(e,t){return typeof e=="function"?e(t):e}function K8(e,t){return typeof e=="function"?e(t):e}function A1(e,t){const{type:s="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:c}=e;if(o){if(r){if(t.queryHash!==kb(o,t.options))return!1}else if(!Tu(t.queryKey,o))return!1}if(s!=="all"){const d=t.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||i&&i!==t.state.fetchStatus||a&&!a(t))}function O1(e,t){const{exact:s,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(s){if(Eu(t.options.mutationKey)!==Eu(a))return!1}else if(!Tu(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function kb(e,t){return((t==null?void 0:t.queryKeyHashFn)||Eu)(e)}function Eu(e){return JSON.stringify(e,(t,s)=>Hx(s)?Object.keys(s).sort().reduce((r,i)=>(r[i]=s[i],r),{}):s)}function Tu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>Tu(e[s],t[s])):!1}function vE(e,t){if(e===t)return e;const s=R1(e)&&R1(t);if(s||Hx(e)&&Hx(t)){const r=s?e:Object.keys(e),i=r.length,a=s?t:Object.keys(t),o=a.length,c=s?[]:{},d=new Set(r);let f=0;for(let m=0;m<o;m++){const h=s?m:a[m];(!s&&d.has(h)||s)&&e[h]===void 0&&t[h]===void 0?(c[h]=void 0,f++):(c[h]=vE(e[h],t[h]),c[h]===e[h]&&e[h]!==void 0&&f++)}return i===o&&f===i?e:c}return t}function R1(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Hx(e){if(!L1(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!L1(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function L1(e){return Object.prototype.toString.call(e)==="[object Object]"}function Y8(e){return new Promise(t=>{setTimeout(t,e)})}function X8(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?vE(e,t):t}function Q8(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function J8(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var Cb=Symbol();function xE(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Cb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var So,wa,ec,k2,e$=(k2=class extends fp{constructor(){super();Lt(this,So);Lt(this,wa);Lt(this,ec);mt(this,ec,t=>{if(!mp&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){Ce(this,wa)||this.setEventListener(Ce(this,ec))}onUnsubscribe(){var t;this.hasListeners()||((t=Ce(this,wa))==null||t.call(this),mt(this,wa,void 0))}setEventListener(t){var s;mt(this,ec,t),(s=Ce(this,wa))==null||s.call(this),mt(this,wa,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Ce(this,So)!==t&&(mt(this,So,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof Ce(this,So)=="boolean"?Ce(this,So):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},So=new WeakMap,wa=new WeakMap,ec=new WeakMap,k2),yE=new e$,tc,ja,nc,C2,t$=(C2=class extends fp{constructor(){super();Lt(this,tc,!0);Lt(this,ja);Lt(this,nc);mt(this,nc,t=>{if(!mp&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){Ce(this,ja)||this.setEventListener(Ce(this,nc))}onUnsubscribe(){var t;this.hasListeners()||((t=Ce(this,ja))==null||t.call(this),mt(this,ja,void 0))}setEventListener(t){var s;mt(this,nc,t),(s=Ce(this,ja))==null||s.call(this),mt(this,ja,t(this.setOnline.bind(this)))}setOnline(t){Ce(this,tc)!==t&&(mt(this,tc,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Ce(this,tc)}},tc=new WeakMap,ja=new WeakMap,nc=new WeakMap,C2),lm=new t$;function n$(){let e,t;const s=new Promise((i,a)=>{e=i,t=a});s.status="pending",s.catch(()=>{});function r(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},s.reject=i=>{r({status:"rejected",reason:i}),t(i)},s}function s$(e){return Math.min(1e3*2**e,3e4)}function bE(e){return(e??"online")==="online"?lm.isOnline():!0}var wE=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function iv(e){return e instanceof wE}function jE(e){let t=!1,s=0,r=!1,i;const a=n$(),o=v=>{var w;r||(u(new wE(v)),(w=e.abort)==null||w.call(e))},c=()=>{t=!0},d=()=>{t=!1},f=()=>yE.isFocused()&&(e.networkMode==="always"||lm.isOnline())&&e.canRun(),m=()=>bE(e.networkMode)&&e.canRun(),h=v=>{var w;r||(r=!0,(w=e.onSuccess)==null||w.call(e,v),i==null||i(),a.resolve(v))},u=v=>{var w;r||(r=!0,(w=e.onError)==null||w.call(e,v),i==null||i(),a.reject(v))},p=()=>new Promise(v=>{var w;i=y=>{(r||f())&&v(y)},(w=e.onPause)==null||w.call(e)}).then(()=>{var v;i=void 0,r||(v=e.onContinue)==null||v.call(e)}),x=()=>{if(r)return;let v;const w=s===0?e.initialPromise:void 0;try{v=w??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(h).catch(y=>{var I;if(r)return;const b=e.retry??(mp?0:3),_=e.retryDelay??s$,N=typeof _=="function"?_(s,y):_,k=b===!0||typeof b=="number"&&s<b||typeof b=="function"&&b(s,y);if(t||!k){u(y);return}s++,(I=e.onFail)==null||I.call(e,s,y),Y8(N).then(()=>f()?void 0:p()).then(()=>{t?u(y):x()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:c,continueRetry:d,canStart:m,start:()=>(m()?x():p().then(x),a)}}var r$=e=>setTimeout(e,0);function i$(){let e=[],t=0,s=c=>{c()},r=c=>{c()},i=r$;const a=c=>{t?e.push(c):i(()=>{s(c)})},o=()=>{const c=e;e=[],c.length&&i(()=>{r(()=>{c.forEach(d=>{s(d)})})})};return{batch:c=>{let d;t++;try{d=c()}finally{t--,t||o()}return d},batchCalls:c=>(...d)=>{a(()=>{c(...d)})},schedule:a,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var ps=i$(),ko,P2,_E=(P2=class{constructor(){Lt(this,ko)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Z8(this.gcTime)&&mt(this,ko,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(mp?1/0:5*60*1e3))}clearGcTimeout(){Ce(this,ko)&&(clearTimeout(Ce(this,ko)),mt(this,ko,void 0))}},ko=new WeakMap,P2),sc,Co,rr,Po,ss,Vu,Eo,Cr,Mi,E2,a$=(E2=class extends _E{constructor(t){super();Lt(this,Cr);Lt(this,sc);Lt(this,Co);Lt(this,rr);Lt(this,Po);Lt(this,ss);Lt(this,Vu);Lt(this,Eo);mt(this,Eo,!1),mt(this,Vu,t.defaultOptions),this.setOptions(t.options),this.observers=[],mt(this,Po,t.client),mt(this,rr,Ce(this,Po).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,mt(this,sc,l$(this.options)),this.state=t.state??Ce(this,sc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ce(this,ss))==null?void 0:t.promise}setOptions(t){this.options={...Ce(this,Vu),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ce(this,rr).remove(this)}setData(t,s){const r=X8(this.state.data,t,this.options);return es(this,Cr,Mi).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(t,s){es(this,Cr,Mi).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var r,i;const s=(r=Ce(this,ss))==null?void 0:r.promise;return(i=Ce(this,ss))==null||i.cancel(t),s?s.then(kr).catch(kr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ce(this,sc))}isActive(){return this.observers.some(t=>K8(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>qx(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!G8(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=Ce(this,ss))==null||s.continue()}onOnline(){var s;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=Ce(this,ss))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ce(this,rr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(Ce(this,ss)&&(Ce(this,Eo)?Ce(this,ss).cancel({revert:!0}):Ce(this,ss).cancelRetry()),this.scheduleGc()),Ce(this,rr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||es(this,Cr,Mi).call(this,{type:"invalidate"})}fetch(t,s){var f,m,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(Ce(this,ss))return Ce(this,ss).continueRetry(),Ce(this,ss).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(p=>p.options.queryFn);u&&this.setOptions(u.options)}const r=new AbortController,i=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(mt(this,Eo,!0),r.signal)})},a=()=>{const u=xE(this.options,s),x=(()=>{const v={client:Ce(this,Po),queryKey:this.queryKey,meta:this.meta};return i(v),v})();return mt(this,Eo,!1),this.options.persister?this.options.persister(u,x,this):u(x)},c=(()=>{const u={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:Ce(this,Po),state:this.state,fetchFn:a};return i(u),u})();(f=this.options.behavior)==null||f.onFetch(c,this),mt(this,Co,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=c.fetchOptions)==null?void 0:m.meta))&&es(this,Cr,Mi).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta});const d=u=>{var p,x,v,w;iv(u)&&u.silent||es(this,Cr,Mi).call(this,{type:"error",error:u}),iv(u)||((x=(p=Ce(this,rr).config).onError)==null||x.call(p,u,this),(w=(v=Ce(this,rr).config).onSettled)==null||w.call(v,this.state.data,u,this)),this.scheduleGc()};return mt(this,ss,jE({initialPromise:s==null?void 0:s.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onSuccess:u=>{var p,x,v,w;if(u===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(y){d(y);return}(x=(p=Ce(this,rr).config).onSuccess)==null||x.call(p,u,this),(w=(v=Ce(this,rr).config).onSettled)==null||w.call(v,u,this.state.error,this),this.scheduleGc()},onError:d,onFail:(u,p)=>{es(this,Cr,Mi).call(this,{type:"failed",failureCount:u,error:p})},onPause:()=>{es(this,Cr,Mi).call(this,{type:"pause"})},onContinue:()=>{es(this,Cr,Mi).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),Ce(this,ss).start()}},sc=new WeakMap,Co=new WeakMap,rr=new WeakMap,Po=new WeakMap,ss=new WeakMap,Vu=new WeakMap,Eo=new WeakMap,Cr=new WeakSet,Mi=function(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...o$(r.data,this.options),fetchMeta:t.meta??null};case"success":return mt(this,Co,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return iv(i)&&i.revert&&Ce(this,Co)?{...Ce(this,Co),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),ps.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Ce(this,rr).notify({query:this,type:"updated",action:t})})},E2);function o$(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bE(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function l$(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var ni,T2,c$=(T2=class extends fp{constructor(t={}){super();Lt(this,ni);this.config=t,mt(this,ni,new Map)}build(t,s,r){const i=s.queryKey,a=s.queryHash??kb(i,s);let o=this.get(a);return o||(o=new a$({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){Ce(this,ni).has(t.queryHash)||(Ce(this,ni).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=Ce(this,ni).get(t.queryHash);s&&(t.destroy(),s===t&&Ce(this,ni).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ps.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ce(this,ni).get(t)}getAll(){return[...Ce(this,ni).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>A1(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>A1(t,r)):s}notify(t){ps.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){ps.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ps.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ni=new WeakMap,T2),si,hs,To,ri,fa,A2,d$=(A2=class extends _E{constructor(t){super();Lt(this,ri);Lt(this,si);Lt(this,hs);Lt(this,To);this.mutationId=t.mutationId,mt(this,hs,t.mutationCache),mt(this,si,[]),this.state=t.state||u$(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ce(this,si).includes(t)||(Ce(this,si).push(t),this.clearGcTimeout(),Ce(this,hs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){mt(this,si,Ce(this,si).filter(s=>s!==t)),this.scheduleGc(),Ce(this,hs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ce(this,si).length||(this.state.status==="pending"?this.scheduleGc():Ce(this,hs).remove(this))}continue(){var t;return((t=Ce(this,To))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,c,d,f,m,h,u,p,x,v,w,y,b,_,N,k,I,C,T;const s=()=>{es(this,ri,fa).call(this,{type:"continue"})};mt(this,To,jE({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,P)=>{es(this,ri,fa).call(this,{type:"failed",failureCount:M,error:P})},onPause:()=>{es(this,ri,fa).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ce(this,hs).canRun(this)}));const r=this.state.status==="pending",i=!Ce(this,To).canStart();try{if(r)s();else{es(this,ri,fa).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(a=Ce(this,hs).config).onMutate)==null?void 0:o.call(a,t,this));const P=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t));P!==this.state.context&&es(this,ri,fa).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const M=await Ce(this,To).start();return await((m=(f=Ce(this,hs).config).onSuccess)==null?void 0:m.call(f,M,t,this.state.context,this)),await((u=(h=this.options).onSuccess)==null?void 0:u.call(h,M,t,this.state.context)),await((x=(p=Ce(this,hs).config).onSettled)==null?void 0:x.call(p,M,null,this.state.variables,this.state.context,this)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,M,null,t,this.state.context)),es(this,ri,fa).call(this,{type:"success",data:M}),M}catch(M){try{throw await((b=(y=Ce(this,hs).config).onError)==null?void 0:b.call(y,M,t,this.state.context,this)),await((N=(_=this.options).onError)==null?void 0:N.call(_,M,t,this.state.context)),await((I=(k=Ce(this,hs).config).onSettled)==null?void 0:I.call(k,void 0,M,this.state.variables,this.state.context,this)),await((T=(C=this.options).onSettled)==null?void 0:T.call(C,void 0,M,t,this.state.context)),M}finally{es(this,ri,fa).call(this,{type:"error",error:M})}}finally{Ce(this,hs).runNext(this)}}},si=new WeakMap,hs=new WeakMap,To=new WeakMap,ri=new WeakSet,fa=function(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),ps.batch(()=>{Ce(this,si).forEach(r=>{r.onMutationUpdate(t)}),Ce(this,hs).notify({mutation:this,type:"updated",action:t})})},A2);function u$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zi,Pr,Uu,O2,h$=(O2=class extends fp{constructor(t={}){super();Lt(this,zi);Lt(this,Pr);Lt(this,Uu);this.config=t,mt(this,zi,new Set),mt(this,Pr,new Map),mt(this,Uu,0)}build(t,s,r){const i=new d$({mutationCache:this,mutationId:++Eh(this,Uu)._,options:t.defaultMutationOptions(s),state:r});return this.add(i),i}add(t){Ce(this,zi).add(t);const s=Xh(t);if(typeof s=="string"){const r=Ce(this,Pr).get(s);r?r.push(t):Ce(this,Pr).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ce(this,zi).delete(t)){const s=Xh(t);if(typeof s=="string"){const r=Ce(this,Pr).get(s);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&Ce(this,Pr).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=Xh(t);if(typeof s=="string"){const r=Ce(this,Pr).get(s),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const s=Xh(t);if(typeof s=="string"){const i=(r=Ce(this,Pr).get(s))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ps.batch(()=>{Ce(this,zi).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ce(this,zi).clear(),Ce(this,Pr).clear()})}getAll(){return Array.from(Ce(this,zi))}find(t){const s={exact:!0,...t};return this.getAll().find(r=>O1(s,r))}findAll(t={}){return this.getAll().filter(s=>O1(t,s))}notify(t){ps.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return ps.batch(()=>Promise.all(t.map(s=>s.continue().catch(kr))))}},zi=new WeakMap,Pr=new WeakMap,Uu=new WeakMap,O2);function Xh(e){var t;return(t=e.options.scope)==null?void 0:t.id}function M1(e){return{onFetch:(t,s)=>{var m,h,u,p,x;const r=t.options,i=(u=(h=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:h.fetchMore)==null?void 0:u.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const f=async()=>{let v=!1;const w=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=xE(t.options,t.fetchOptions),b=async(_,N,k)=>{if(v)return Promise.reject();if(N==null&&_.pages.length)return Promise.resolve(_);const C=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:N,direction:k?"backward":"forward",meta:t.options.meta};return w(E),E})(),T=await y(C),{maxPages:M}=t.options,P=k?J8:Q8;return{pages:P(_.pages,T,M),pageParams:P(_.pageParams,N,M)}};if(i&&a.length){const _=i==="backward",N=_?f$:I1,k={pages:a,pageParams:o},I=N(r,k);c=await b(k,I,_)}else{const _=e??a.length;do{const N=d===0?o[0]??r.initialPageParam:I1(r,c);if(d>0&&N==null)break;c=await b(c,N),d++}while(d<_)}return c};t.options.persister?t.fetchFn=()=>{var v,w;return(w=(v=t.options).persister)==null?void 0:w.call(v,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=f}}}function I1(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function f$(e,{pages:t,pageParams:s}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,s[0],s):void 0}var fn,_a,Na,rc,ic,Sa,ac,oc,R2,m$=(R2=class{constructor(e={}){Lt(this,fn);Lt(this,_a);Lt(this,Na);Lt(this,rc);Lt(this,ic);Lt(this,Sa);Lt(this,ac);Lt(this,oc);mt(this,fn,e.queryCache||new c$),mt(this,_a,e.mutationCache||new h$),mt(this,Na,e.defaultOptions||{}),mt(this,rc,new Map),mt(this,ic,new Map),mt(this,Sa,0)}mount(){Eh(this,Sa)._++,Ce(this,Sa)===1&&(mt(this,ac,yE.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ce(this,fn).onFocus())})),mt(this,oc,lm.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ce(this,fn).onOnline())})))}unmount(){var e,t;Eh(this,Sa)._--,Ce(this,Sa)===0&&((e=Ce(this,ac))==null||e.call(this),mt(this,ac,void 0),(t=Ce(this,oc))==null||t.call(this),mt(this,oc,void 0))}isFetching(e){return Ce(this,fn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ce(this,_a).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=Ce(this,fn).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=Ce(this,fn).build(this,t),r=s.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(qx(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Ce(this,fn).findAll(e).map(({queryKey:t,state:s})=>{const r=s.data;return[t,r]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),i=Ce(this,fn).get(r.queryHash),a=i==null?void 0:i.state.data,o=W8(t,a);if(o!==void 0)return Ce(this,fn).build(this,r).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return ps.batch(()=>Ce(this,fn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=Ce(this,fn).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=Ce(this,fn);ps.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=Ce(this,fn);return ps.batch(()=>(s.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},r=ps.batch(()=>Ce(this,fn).findAll(e).map(i=>i.cancel(s)));return Promise.all(r).then(kr).catch(kr)}invalidateQueries(e,t={}){return ps.batch(()=>(Ce(this,fn).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},r=ps.batch(()=>Ce(this,fn).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,s);return s.throwOnError||(a=a.catch(kr)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(kr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=Ce(this,fn).build(this,t);return s.isStaleByTime(qx(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(kr).catch(kr)}fetchInfiniteQuery(e){return e.behavior=M1(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(kr).catch(kr)}ensureInfiniteQueryData(e){return e.behavior=M1(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return lm.isOnline()?Ce(this,_a).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ce(this,fn)}getMutationCache(){return Ce(this,_a)}getDefaultOptions(){return Ce(this,Na)}setDefaultOptions(e){mt(this,Na,e)}setQueryDefaults(e,t){Ce(this,rc).set(Eu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ce(this,rc).values()],s={};return t.forEach(r=>{Tu(e,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(e,t){Ce(this,ic).set(Eu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ce(this,ic).values()],s={};return t.forEach(r=>{Tu(e,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ce(this,Na).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=kb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Cb&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ce(this,Na).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ce(this,fn).clear(),Ce(this,_a).clear()}},fn=new WeakMap,_a=new WeakMap,Na=new WeakMap,rc=new WeakMap,ic=new WeakMap,Sa=new WeakMap,ac=new WeakMap,oc=new WeakMap,R2),p$=j.createContext(void 0),g$=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(p$.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(){return Au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Au.apply(this,arguments)}var Pa;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pa||(Pa={}));const D1="popstate";function v$(e){e===void 0&&(e={});function t(r,i){let{pathname:a,search:o,hash:c}=r.location;return Wx("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(r,i){return typeof i=="string"?i:SE(i)}return y$(t,s,null,e)}function Fn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function NE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function x$(){return Math.random().toString(36).substr(2,8)}function F1(e,t){return{usr:e.state,key:e.key,idx:t}}function Wx(e,t,s,r){return s===void 0&&(s=null),Au({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Bc(t):t,{state:s,key:t&&t.key||r||x$()})}function SE(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Bc(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y$(e,t,s,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c=Pa.Pop,d=null,f=m();f==null&&(f=0,o.replaceState(Au({},o.state,{idx:f}),""));function m(){return(o.state||{idx:null}).idx}function h(){c=Pa.Pop;let w=m(),y=w==null?null:w-f;f=w,d&&d({action:c,location:v.location,delta:y})}function u(w,y){c=Pa.Push;let b=Wx(v.location,w,y);f=m()+1;let _=F1(b,f),N=v.createHref(b);try{o.pushState(_,"",N)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(N)}a&&d&&d({action:c,location:v.location,delta:1})}function p(w,y){c=Pa.Replace;let b=Wx(v.location,w,y);f=m();let _=F1(b,f),N=v.createHref(b);o.replaceState(_,"",N),a&&d&&d({action:c,location:v.location,delta:0})}function x(w){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof w=="string"?w:SE(w);return b=b.replace(/ $/,"%20"),Fn(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let v={get action(){return c},get location(){return e(i,o)},listen(w){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(D1,h),d=w,()=>{i.removeEventListener(D1,h),d=null}},createHref(w){return t(i,w)},createURL:x,encodeLocation(w){let y=x(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:u,replace:p,go(w){return o.go(w)}};return v}var $1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})($1||($1={}));function b$(e,t,s){return s===void 0&&(s="/"),w$(e,t,s,!1)}function w$(e,t,s,r){let i=typeof t=="string"?Bc(t):t,a=PE(i.pathname||"/",s);if(a==null)return null;let o=kE(e);j$(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let f=R$(a);c=A$(o[d],f,r)}return c}function kE(e,t,s,r){t===void 0&&(t=[]),s===void 0&&(s=[]),r===void 0&&(r="");let i=(a,o,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};d.relativePath.startsWith("/")&&(Fn(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let f=Mo([r,d.relativePath]),m=s.concat(d);a.children&&a.children.length>0&&(Fn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),kE(a.children,t,m,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:E$(f,a.index),routesMeta:m})};return e.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let d of CE(a.path))i(a,o,d)}),t}function CE(e){let t=e.split("/");if(t.length===0)return[];let[s,...r]=t,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=CE(r.join("/")),c=[];return c.push(...o.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function j$(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:T$(t.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const _$=/^:[\w-]+$/,N$=3,S$=2,k$=1,C$=10,P$=-2,z1=e=>e==="*";function E$(e,t){let s=e.split("/"),r=s.length;return s.some(z1)&&(r+=P$),t&&(r+=S$),s.filter(i=>!z1(i)).reduce((i,a)=>i+(_$.test(a)?N$:a===""?k$:C$),r)}function T$(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function A$(e,t,s){let{routesMeta:r}=e,i={},a="/",o=[];for(let c=0;c<r.length;++c){let d=r[c],f=c===r.length-1,m=a==="/"?t:t.slice(a.length)||"/",h=B1({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),u=d.route;if(!h&&f&&s&&!r[r.length-1].route.index&&(h=B1({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Mo([a,h.pathname]),pathnameBase:$$(Mo([a,h.pathnameBase])),route:u}),h.pathnameBase!=="/"&&(a=Mo([a,h.pathnameBase]))}return o}function B1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=O$(e.path,e.caseSensitive,e.end),i=t.match(s);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,m,h)=>{let{paramName:u,isOptional:p}=m;if(u==="*"){let v=c[h]||"";o=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const x=c[h];return p&&!x?f[u]=void 0:f[u]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:e}}function O$(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),NE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function R$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return NE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function PE(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&r!=="/"?null:e.slice(s)||"/"}function L$(e,t){t===void 0&&(t="/");let{pathname:s,search:r="",hash:i=""}=typeof e=="string"?Bc(e):e;return{pathname:s?s.startsWith("/")?s:M$(s,t):t,search:z$(r),hash:B$(i)}}function M$(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function av(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function I$(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function D$(e,t){let s=I$(e);return t?s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function F$(e,t,s,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Bc(e):(i=Au({},e),Fn(!i.pathname||!i.pathname.includes("?"),av("?","pathname","search",i)),Fn(!i.pathname||!i.pathname.includes("#"),av("#","pathname","hash",i)),Fn(!i.search||!i.search.includes("#"),av("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=s;else{let h=t.length-1;if(!r&&o.startsWith("..")){let u=o.split("/");for(;u[0]==="..";)u.shift(),h-=1;i.pathname=u.join("/")}c=h>=0?t[h]:"/"}let d=L$(i,c),f=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}const Mo=e=>e.join("/").replace(/\/\/+/g,"/"),$$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,B$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function V$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const EE=["post","put","patch","delete"];new Set(EE);const U$=["get",...EE];new Set(U$);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Ou.apply(this,arguments)}const Pb=j.createContext(null),q$=j.createContext(null),pp=j.createContext(null),gp=j.createContext(null),tl=j.createContext({outlet:null,matches:[],isDataRoute:!1}),TE=j.createContext(null);function vp(){return j.useContext(gp)!=null}function Qs(){return vp()||Fn(!1),j.useContext(gp).location}function AE(e){j.useContext(pp).static||j.useLayoutEffect(e)}function nt(){let{isDataRoute:e}=j.useContext(tl);return e?sz():H$()}function H$(){vp()||Fn(!1);let e=j.useContext(Pb),{basename:t,future:s,navigator:r}=j.useContext(pp),{matches:i}=j.useContext(tl),{pathname:a}=Qs(),o=JSON.stringify(D$(i,s.v7_relativeSplatPath)),c=j.useRef(!1);return AE(()=>{c.current=!0}),j.useCallback(function(f,m){if(m===void 0&&(m={}),!c.current)return;if(typeof f=="number"){r.go(f);return}let h=F$(f,JSON.parse(o),a,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Mo([t,h.pathname])),(m.replace?r.replace:r.push)(h,m.state,m)},[t,r,o,a,e])}function xp(){let{matches:e}=j.useContext(tl),t=e[e.length-1];return t?t.params:{}}function W$(e,t){return Z$(e,t)}function Z$(e,t,s,r){vp()||Fn(!1);let{navigator:i}=j.useContext(pp),{matches:a}=j.useContext(tl),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let f=Qs(),m;if(t){var h;let w=typeof t=="string"?Bc(t):t;d==="/"||(h=w.pathname)!=null&&h.startsWith(d)||Fn(!1),m=w}else m=f;let u=m.pathname||"/",p=u;if(d!=="/"){let w=d.replace(/^\//,"").split("/");p="/"+u.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=b$(e,{pathname:p}),v=Q$(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Mo([d,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Mo([d,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,s,r);return t&&v?j.createElement(gp.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Pa.Pop}},v):v}function G$(){let e=nz(),t=V$(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),s?j.createElement("pre",{style:i},s):null,null)}const K$=j.createElement(G$,null);class Y$ extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?j.createElement(tl.Provider,{value:this.props.routeContext},j.createElement(TE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function X$(e){let{routeContext:t,match:s,children:r}=e,i=j.useContext(Pb);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),j.createElement(tl.Provider,{value:t},r)}function Q$(e,t,s,r){var i;if(t===void 0&&(t=[]),s===void 0&&(s=null),r===void 0&&(r=null),e==null){var a;if(!s)return null;if(s.errors)e=s.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,c=(i=s)==null?void 0:i.errors;if(c!=null){let m=o.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);m>=0||Fn(!1),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,f=-1;if(s&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let h=o[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(f=m),h.route.id){let{loaderData:u,errors:p}=s,x=h.route.loader&&u[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||x){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((m,h,u)=>{let p,x=!1,v=null,w=null;s&&(p=c&&h.route.id?c[h.route.id]:void 0,v=h.route.errorElement||K$,d&&(f<0&&u===0?(x=!0,w=null):f===u&&(x=!0,w=h.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,u+1)),b=()=>{let _;return p?_=v:x?_=w:h.route.Component?_=j.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=m,j.createElement(X$,{match:h,routeContext:{outlet:m,matches:y,isDataRoute:s!=null},children:_})};return s&&(h.route.ErrorBoundary||h.route.errorElement||u===0)?j.createElement(Y$,{location:s.location,revalidation:s.revalidation,component:v,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var OE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(OE||{}),cm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(cm||{});function J$(e){let t=j.useContext(Pb);return t||Fn(!1),t}function ez(e){let t=j.useContext(q$);return t||Fn(!1),t}function tz(e){let t=j.useContext(tl);return t||Fn(!1),t}function RE(e){let t=tz(),s=t.matches[t.matches.length-1];return s.route.id||Fn(!1),s.route.id}function nz(){var e;let t=j.useContext(TE),s=ez(cm.UseRouteError),r=RE(cm.UseRouteError);return t!==void 0?t:(e=s.errors)==null?void 0:e[r]}function sz(){let{router:e}=J$(OE.UseNavigateStable),t=RE(cm.UseNavigateStable),s=j.useRef(!1);return AE(()=>{s.current=!0}),j.useCallback(function(i,a){a===void 0&&(a={}),s.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ou({fromRouteId:t},a)))},[e,t])}function rz(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function tt(e){Fn(!1)}function iz(e){let{basename:t="/",children:s=null,location:r,navigationType:i=Pa.Pop,navigator:a,static:o=!1,future:c}=e;vp()&&Fn(!1);let d=t.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:d,navigator:a,static:o,future:Ou({v7_relativeSplatPath:!1},c)}),[d,c,a,o]);typeof r=="string"&&(r=Bc(r));let{pathname:m="/",search:h="",hash:u="",state:p=null,key:x="default"}=r,v=j.useMemo(()=>{let w=PE(m,d);return w==null?null:{location:{pathname:w,search:h,hash:u,state:p,key:x},navigationType:i}},[d,m,h,u,p,x,i]);return v==null?null:j.createElement(pp.Provider,{value:f},j.createElement(gp.Provider,{children:s,value:v}))}function az(e){let{children:t,location:s}=e;return W$(Zx(t),s)}new Promise(()=>{});function Zx(e,t){t===void 0&&(t=[]);let s=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let a=[...t,i];if(r.type===j.Fragment){s.push.apply(s,Zx(r.props.children,a));return}r.type!==tt&&Fn(!1),!r.props.index||!r.props.children||Fn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Zx(r.props.children,a)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gx(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let r=e[s];return t.concat(Array.isArray(r)?r.map(i=>[s,i]):[[s,r]])},[]))}function oz(e,t){let s=Gx(e);return t&&t.forEach((r,i)=>{s.has(i)||t.getAll(i).forEach(a=>{s.append(i,a)})}),s}const lz="6";try{window.__reactRouterVersion=lz}catch{}const cz="startTransition",V1=c0[cz];function dz(e){let{basename:t,children:s,future:r,window:i}=e,a=j.useRef();a.current==null&&(a.current=v$({window:i,v5Compat:!0}));let o=a.current,[c,d]=j.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},m=j.useCallback(h=>{f&&V1?V1(()=>d(h)):d(h)},[d,f]);return j.useLayoutEffect(()=>o.listen(m),[o,m]),j.useEffect(()=>rz(r),[r]),j.createElement(iz,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:o,future:r})}var U1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(U1||(U1={}));var q1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(q1||(q1={}));function Eb(e){let t=j.useRef(Gx(e)),s=j.useRef(!1),r=Qs(),i=j.useMemo(()=>oz(r.search,s.current?null:t.current),[r.search]),a=nt(),o=j.useCallback((c,d)=>{const f=Gx(typeof c=="function"?c(i):c);s.current=!0,a("?"+f,d)},[a,i]);return[i,o]}const uz="modulepreload",hz=function(e){return"/"+e},H1={},We=function(t,s,r){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(s.map(d=>{if(d=hz(d),d in H1)return;H1[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":uz,f||(h.as="script"),h.crossOrigin="",h.href=d,c&&h.setAttribute("nonce",c),document.head.appendChild(h),f)return new Promise((u,p)=>{h.addEventListener("load",u),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var xc;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(xc||(xc={}));class Yl extends Error{constructor(t,s,r){super(t),this.message=t,this.code=s,this.data=r}}const fz=e=>{var t,s;return e!=null&&e.androidBridge?"android":!((s=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},mz=e=>{const t=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},r=s.Plugins=s.Plugins||{},i=()=>t!==null?t.name:fz(e),a=()=>i()!=="web",o=h=>{const u=f.get(h);return!!(u!=null&&u.platforms.has(i())||c(h))},c=h=>{var u;return(u=s.PluginHeaders)===null||u===void 0?void 0:u.find(p=>p.name===h)},d=h=>e.console.error(h),f=new Map,m=(h,u={})=>{const p=f.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const x=i(),v=c(h);let w;const y=async()=>(!w&&x in u?w=typeof u[x]=="function"?w=await u[x]():w=u[x]:t!==null&&!w&&"web"in u&&(w=typeof u.web=="function"?w=await u.web():w=u.web),w),b=(T,M)=>{var P,E;if(v){const A=v==null?void 0:v.methods.find(z=>M===z.name);if(A)return A.rtype==="promise"?z=>s.nativePromise(h,M.toString(),z):(z,O)=>s.nativeCallback(h,M.toString(),z,O);if(T)return(P=T[M])===null||P===void 0?void 0:P.bind(T)}else{if(T)return(E=T[M])===null||E===void 0?void 0:E.bind(T);throw new Yl(`"${h}" plugin is not implemented on ${x}`,xc.Unimplemented)}},_=T=>{let M;const P=(...E)=>{const A=y().then(z=>{const O=b(z,T);if(O){const $=O(...E);return M=$==null?void 0:$.remove,$}else throw new Yl(`"${h}.${T}()" is not implemented on ${x}`,xc.Unimplemented)});return T==="addListener"&&(A.remove=async()=>M()),A};return P.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:T,writable:!1,configurable:!1}),P},N=_("addListener"),k=_("removeListener"),I=(T,M)=>{const P=N({eventName:T},M),E=async()=>{const z=await P;k({eventName:T,callbackId:z},M)},A=new Promise(z=>P.then(()=>z({remove:E})));return A.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await E()},A},C=new Proxy({},{get(T,M){switch(M){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?I:N;case"removeListener":return k;default:return _(M)}}});return r[h]=C,f.set(h,{name:h,proxy:C,platforms:new Set([...Object.keys(u),...v?[x]:[]])}),C};return s.convertFileSrc||(s.convertFileSrc=h=>h),s.getPlatform=i,s.handleError=d,s.isNativePlatform=a,s.isPluginAvailable=o,s.registerPlugin=m,s.Exception=Yl,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},pz=e=>e.Capacitor=mz(e),vt=pz(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}),no=vt.registerPlugin;class Tb{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,s){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(s);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,s);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,s,r){const i=this.listeners[t];if(!i){if(r){let a=this.retainedEventArguments[t];a||(a=[]),a.push(s),this.retainedEventArguments[t]=a}return}i.forEach(a=>a(s))}hasListeners(t){var s;return!!(!((s=this.listeners[t])===null||s===void 0)&&s.length)}registerWindowListener(t,s){this.windowListeners[s]={registered:!1,windowEventName:t,pluginEventName:s,handler:r=>{this.notifyListeners(s,r)}}}unimplemented(t="not implemented"){return new vt.Exception(t,xc.Unimplemented)}unavailable(t="not available"){return new vt.Exception(t,xc.Unavailable)}async removeListener(t,s){const r=this.listeners[t];if(!r)return;const i=r.indexOf(s);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const s=this.retainedEventArguments[t];s&&(delete this.retainedEventArguments[t],s.forEach(r=>{this.notifyListeners(t,r)}))}}const W1=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Z1=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class gz extends Tb{async getCookies(){const t=document.cookie,s={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[i,a]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=Z1(i).trim(),a=Z1(a).trim(),s[i]=a}),s}async setCookie(t){try{const s=W1(t.key),r=W1(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${s}=${r||""}${i}; path=${a}; ${o};`}catch(s){return Promise.reject(s)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const s of t)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}no("CapacitorCookies",{web:()=>new gz});const vz=async e=>new Promise((t,s)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>s(i),r.readAsDataURL(e)}),xz=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,a,o)=>(i[a]=e[t[o]],i),{})},yz=(e,t=!0)=>e?Object.entries(e).reduce((r,i)=>{const[a,o]=i;let c,d;return Array.isArray(o)?(d="",o.forEach(f=>{c=t?encodeURIComponent(f):f,d+=`${a}=${c}&`}),d.slice(0,-1)):(c=t?encodeURIComponent(o):o,d=`${a}=${c}`),`${r}&${d}`},"").substr(1):null,bz=(e,t={})=>{const s=Object.assign({method:e.method||"GET",headers:e.headers},t),i=xz(e.headers)["content-type"]||"";if(typeof e.data=="string")s.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[o,c]of Object.entries(e.data||{}))a.set(o,c);s.body=a.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const a=new FormData;if(e.data instanceof FormData)e.data.forEach((c,d)=>{a.append(d,c)});else for(const c of Object.keys(e.data))a.append(c,e.data[c]);s.body=a;const o=new Headers(s.headers);o.delete("content-type"),s.headers=o}else(i.includes("application/json")||typeof e.data=="object")&&(s.body=JSON.stringify(e.data));return s};class wz extends Tb{async request(t){const s=bz(t,t.webFetchExtra),r=yz(t.params,t.shouldEncodeUrlParams),i=r?`${t.url}?${r}`:t.url,a=await fetch(i,s),o=a.headers.get("content-type")||"";let{responseType:c="text"}=a.ok?t:{};o.includes("application/json")&&(c="json");let d,f;switch(c){case"arraybuffer":case"blob":f=await a.blob(),d=await vz(f);break;case"json":d=await a.json();break;case"document":case"text":default:d=await a.text()}const m={};return a.headers.forEach((h,u)=>{m[u]=h}),{data:d,headers:m,status:a.status,url:a.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}no("CapacitorHttp",{web:()=>new wz});function jz(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,s){return new Proxy({},{get(r,i){return(a,o,c)=>{const d=e.Capacitor.Plugins[s];if(d===void 0){c(new Error(`Capacitor plugin ${s} not found`));return}if(typeof d[i]!="function"){c(new Error(`Method ${i} not found in Capacitor plugin ${s}`));return}(async()=>{try{const f=await d[i](a);o(f)}catch(f){c(f)}})()}}})}})}function _z(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,s){return e.cordova.plugins[s]}})}function Nz(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?jz(window):window.cordova!==void 0&&_z(window))}const ov=no("Geolocation",{web:()=>We(()=>import("./web-C-EZ_BAf.js"),[]).then(e=>new e.GeolocationWeb)});Nz();var Rl;(function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"})(Rl||(Rl={}));var Kd;(function(e){e.Rear="REAR",e.Front="FRONT"})(Kd||(Kd={}));var G1;(function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"})(G1||(G1={}));class Sz extends Tb{async getPhoto(t){return new Promise(async(s,r)=>{if(t.webUseInput||t.source===Rl.Photos)this.fileInputExperience(t,s,r);else if(t.source===Rl.Prompt){let i=document.querySelector("pwa-action-sheet");i||(i=document.createElement("pwa-action-sheet"),document.body.appendChild(i)),i.header=t.promptLabelHeader||"Photo",i.cancelable=!1,i.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],i.addEventListener("onSelection",async a=>{a.detail===0?this.fileInputExperience(t,s,r):this.cameraExperience(t,s,r)})}else this.cameraExperience(t,s,r)})}async pickImages(t){return new Promise(async(s,r)=>{this.multipleFileInputExperience(s,r)})}async cameraExperience(t,s,r){if(customElements.get("pwa-camera-modal")){const i=document.createElement("pwa-camera-modal");i.facingMode=t.direction===Kd.Front?"user":"environment",document.body.appendChild(i);try{await i.componentOnReady(),i.addEventListener("onPhoto",async a=>{const o=a.detail;o===null?r(new Yl("User cancelled photos app")):o instanceof Error?r(o):s(await this._getCameraPhoto(o,t)),i.dismiss(),document.body.removeChild(i)}),i.present()}catch{this.fileInputExperience(t,s,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,s,r)}fileInputExperience(t,s,r){let i=document.querySelector("#_capacitor-camera-input");const a=()=>{var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input",i.type="file",i.hidden=!0,document.body.appendChild(i),i.addEventListener("change",o=>{const c=i.files[0];let d="jpeg";if(c.type==="image/png"?d="png":c.type==="image/gif"&&(d="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){const f=new FileReader;f.addEventListener("load",()=>{if(t.resultType==="dataUrl")s({dataUrl:f.result,format:d});else if(t.resultType==="base64"){const m=f.result.split(",")[1];s({base64String:m,format:d})}a()}),f.readAsDataURL(c)}else s({webPath:URL.createObjectURL(c),format:d}),a()}),i.addEventListener("cancel",o=>{r(new Yl("User cancelled photos app")),a()})),i.accept="image/*",i.capture=!0,t.source===Rl.Photos||t.source===Rl.Prompt?i.removeAttribute("capture"):t.direction===Kd.Front?i.capture="user":t.direction===Kd.Rear&&(i.capture="environment"),i.click()}multipleFileInputExperience(t,s){let r=document.querySelector("#_capacitor-camera-input-multiple");const i=()=>{var a;(a=r.parentNode)===null||a===void 0||a.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",a=>{const o=[];for(let c=0;c<r.files.length;c++){const d=r.files[c];let f="jpeg";d.type==="image/png"?f="png":d.type==="image/gif"&&(f="gif"),o.push({webPath:URL.createObjectURL(d),format:f})}t({photos:o}),i()}),r.addEventListener("cancel",a=>{s(new Yl("User cancelled photos app")),i()})),r.accept="image/*",r.click()}_getCameraPhoto(t,s){return new Promise((r,i)=>{const a=new FileReader,o=t.type.split("/")[1];s.resultType==="uri"?r({webPath:URL.createObjectURL(t),format:o,saved:!1}):(a.readAsDataURL(t),a.onloadend=()=>{const c=a.result;s.resultType==="dataUrl"?r({dataUrl:c,format:o,saved:!1}):r({base64String:c.split(",")[1],format:o,saved:!1})},a.onerror=c=>{i(c)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const kz=no("Camera",{web:()=>new Sz}),Cz=no("Device",{web:()=>We(()=>import("./web-x4RGHQlU.js"),[]).then(e=>new e.DeviceWeb)});class Pz{static async requestAllPermissions(){if(!vt.isNativePlatform()){console.log("Running in web, skipping native permissions");return}try{await this.requestLocationPermission(),await this.requestCameraPermission(),console.log("Microphone permissions handled through camera plugin")}catch(t){console.error("Error requesting permissions:",t)}}static async requestLocationPermission(){try{const t=await ov.requestPermissions();return console.log("Location permissions:",t),t}catch(t){throw console.error("Location permission error:",t),t}}static async requestCameraPermission(){try{const t=await kz.requestPermissions();return console.log("Camera permissions:",t),t}catch(t){throw console.error("Camera permission error:",t),t}}static async checkLocationPermission(){try{return(await ov.checkPermissions()).location==="granted"}catch(t){return console.error("Check location permission error:",t),!1}}static async getCurrentLocation(){try{return await this.checkLocationPermission()||await this.requestLocationPermission(),await ov.getCurrentPosition()}catch(t){throw console.error("Get location error:",t),t}}static async getDeviceInfo(){try{const t=await Cz.getInfo();return console.log("Device info:",t),t}catch(t){return console.error("Device info error:",t),null}}}class Ez{constructor(){zn(this,"location",null);zn(this,"intervalId",null);zn(this,"listeners",[]);this.loadFromStorage()}loadFromStorage(){const t=localStorage.getItem("userLocation");if(t)try{const s=JSON.parse(t),r=localStorage.getItem("userLocationTimestamp");r&&Date.now()-parseInt(r)<10*60*1e3&&(this.location=s)}catch(s){console.error("Error loading location from storage:",s)}}saveToStorage(){this.location&&(localStorage.setItem("userLocation",JSON.stringify(this.location)),localStorage.setItem("userLocationTimestamp",Date.now().toString()))}updateLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{this.location={latitude:t.coords.latitude,longitude:t.coords.longitude},this.saveToStorage(),this.notifyListeners()},t=>console.error("Location error:",t),{enableHighAccuracy:!1,timeout:1e4,maximumAge:18e4})}notifyListeners(){this.listeners.forEach(t=>t(this.location))}startTracking(){this.updateLocation(),this.intervalId||(this.intervalId=setInterval(()=>{this.updateLocation()},3*60*1e3))}stopTracking(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}getLocation(){return this.location}subscribe(t){return this.listeners.push(t),t(this.location),()=>{this.listeners=this.listeners.filter(s=>s!==t)}}}const xt=new Ez,Bn=no("Preferences",{web:()=>We(()=>import("./web-BjkPnrph.js"),[]).then(e=>new e.PreferencesWeb)}),Wse=Object.freeze(Object.defineProperty({__proto__:null,Preferences:Bn},Symbol.toStringTag,{value:"Module"}));class Tz{constructor(){zn(this,"isNative",vt.isNativePlatform())}async setAuth(t,s){this.isNative?(await Bn.set({key:"auth_token",value:t}),await Bn.set({key:"auth_user",value:JSON.stringify(s)}),await Bn.set({key:"last_activity",value:Date.now().toString()})):(localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("lastActivity",Date.now().toString()))}async getToken(){return this.isNative?(await Bn.get({key:"auth_token"})).value:localStorage.getItem("token")}async getUser(){if(this.isNative){const t=await Bn.get({key:"auth_user"});return t.value?JSON.parse(t.value):null}else{const t=localStorage.getItem("user");return t?JSON.parse(t):null}}async isAuthenticated(){const t=await this.getToken(),s=await this.getUser();return!!(t&&s)}async updateActivity(){this.isNative?await Bn.set({key:"last_activity",value:Date.now().toString()}):localStorage.setItem("lastActivity",Date.now().toString())}async getLastActivity(){if(this.isNative){const t=await Bn.get({key:"last_activity"});return t.value?parseInt(t.value):null}else{const t=localStorage.getItem("lastActivity");return t?parseInt(t):null}}async clearAuth(){console.log(" clearAuth() called - Stack trace:"),console.trace(),this.isNative?(console.log(" Clearing native storage (Capacitor Preferences)"),await Bn.remove({key:"auth_token"}),await Bn.remove({key:"auth_user"}),await Bn.remove({key:"last_activity"}),await Bn.remove({key:"cart"}),await Bn.remove({key:"wishlist"})):(console.log(" Clearing web storage (localStorage)"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("lastActivity"),localStorage.removeItem("cart"),localStorage.removeItem("wishlist"),localStorage.removeItem("userLocation"),localStorage.removeItem("userLocationTimestamp")),console.log(" Auth cleared successfully")}async setCart(t){this.isNative?await Bn.set({key:"cart",value:JSON.stringify(t)}):localStorage.setItem("cart",JSON.stringify(t))}async getCart(){if(this.isNative){const t=await Bn.get({key:"cart"});return t.value?JSON.parse(t.value):[]}else{const t=localStorage.getItem("cart");return t?JSON.parse(t):[]}}async setWishlist(t){this.isNative?await Bn.set({key:"wishlist",value:JSON.stringify(t)}):localStorage.setItem("wishlist",JSON.stringify(t))}async getWishlist(){if(this.isNative){const t=await Bn.get({key:"wishlist"});return t.value?JSON.parse(t.value):[]}else{const t=localStorage.getItem("wishlist");return t?JSON.parse(t):[]}}async isSessionValid(){const t=await this.getLastActivity();if(!t)return!1;const s=this.isNative?7*24*60*60*1e3:24*60*60*1e3;return Date.now()-t<=s}async autoLogin(){const t=await this.getToken(),s=await this.getUser();if(t&&s&&s.user_type==="vendor"){if(await this.isSessionValid())return await this.updateActivity(),console.log(" Auto-login successful for vendor:",s.username),!0;console.log(" Session expired, clearing auth"),await this.clearAuth()}return!1}async keepAlive(){await this.isAuthenticated()&&await this.updateActivity()}async updateUser(t){this.isNative?await Bn.set({key:"auth_user",value:JSON.stringify(t)}):localStorage.setItem("user",JSON.stringify(t))}}const ke=new Tz,Zo=Object.freeze(Object.defineProperty({__proto__:null,authService:ke},Symbol.toStringTag,{value:"Module"})),Az={user:null,cart:[],wishlist:[],searchQuery:"",isLoading:!1,error:null,isAuthenticated:!1};function Oz(e,t){switch(t.type){case"SET_USER":return{...e,user:t.payload,isAuthenticated:!!t.payload};case"UPDATE_USER":return{...e,user:e.user?{...e.user,...t.payload}:null};case"ADD_TO_CART":return e.cart.find(r=>r.id===t.payload.id)?{...e,cart:e.cart.map(r=>r.id===t.payload.id?{...r,quantity:r.quantity+1}:r)}:{...e,cart:[...e.cart,{...t.payload,quantity:1}]};case"REMOVE_FROM_CART":return{...e,cart:e.cart.filter(s=>s.id!==t.payload)};case"UPDATE_CART_QUANTITY":return{...e,cart:e.cart.map(s=>s.id===t.payload.id?{...s,quantity:Math.max(0,t.payload.quantity)}:s).filter(s=>s.quantity>0)};case"CLEAR_CART":return{...e,cart:[]};case"ADD_TO_WISHLIST":return e.wishlist.find(r=>r.id===t.payload.id)?e:{...e,wishlist:[...e.wishlist,t.payload]};case"REMOVE_FROM_WISHLIST":return{...e,wishlist:e.wishlist.filter(s=>s.id!==t.payload)};case"SET_SEARCH_QUERY":return{...e,searchQuery:t.payload};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload};case"LOAD_FROM_STORAGE":return e;default:return e}}const LE=j.createContext(void 0);function Rz({children:e}){const[t,s]=j.useReducer(Oz,Az);j.useEffect(()=>{(async()=>{try{const[v,w,y,b]=await Promise.all([ke.getCart(),ke.getWishlist(),ke.getUser(),ke.isAuthenticated()]);b&&y&&(await ke.isSessionValid()?s({type:"SET_USER",payload:{...y,isLoggedIn:!0}}):await ke.clearAuth()),t.cart=v,t.wishlist=w,s({type:"SET_LOADING",payload:!1})}catch(v){console.error("Failed to load stored data:",v)}})()},[]),j.useEffect(()=>{(async()=>{try{await Promise.all([ke.setCart(t.cart),ke.setWishlist(t.wishlist)]),t.user&&await ke.updateActivity()}catch(v){console.error("Failed to save data:",v)}})()},[t.cart,t.wishlist,t.user]);const p={state:t,dispatch:s,addToCart:x=>{s({type:"ADD_TO_CART",payload:x})},removeFromCart:x=>{s({type:"REMOVE_FROM_CART",payload:x})},updateCartQuantity:(x,v)=>{s({type:"UPDATE_CART_QUANTITY",payload:{id:x,quantity:v}})},clearCart:()=>{s({type:"CLEAR_CART"})},addToWishlist:x=>{s({type:"ADD_TO_WISHLIST",payload:x})},removeFromWishlist:x=>{s({type:"REMOVE_FROM_WISHLIST",payload:x})},setSearchQuery:x=>{s({type:"SET_SEARCH_QUERY",payload:x})},login:async(x,v)=>{try{s({type:"SET_USER",payload:{...x,isLoggedIn:!0}}),await ke.setAuth(v,x),xt.startTracking(),console.log("Login completed, user authenticated:",!!x)}catch(w){console.error("Failed to save login data:",w)}},logout:async()=>{try{await ke.clearAuth(),s({type:"SET_USER",payload:null}),xt.stopTracking()}catch(x){console.error("Failed to clear auth data:",x)}},updateUser:async x=>{try{if(s({type:"UPDATE_USER",payload:x}),t.user){const v={...t.user,...x};await ke.updateUser(v)}}catch(v){console.error("Failed to update user:",v)}},user:t.user};return n.jsx(LE.Provider,{value:p,children:e})}function Fs(){const e=j.useContext(LE);if(e===void 0)throw new Error("useApp must be used within an AppProvider");return e}const Lz=()=>{const{state:e,dispatch:t}=Fs(),s=j.useCallback(async()=>{e.user&&await ke.updateActivity()},[e.user]),r=j.useCallback(async()=>{e.user&&await Promise.all([ke.setCart(e.cart),ke.setWishlist(e.wishlist),ke.updateActivity()])},[e.user,e.cart,e.wishlist]);return j.useCallback(async()=>{},[t]),j.useEffect(()=>{},[]),j.useEffect(()=>{},[]),j.useEffect(()=>{const i=()=>{r().catch(console.error)};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[r]),{extendSession:s,saveState:r}},Mz=()=>window.location.protocol==="capacitor:"||window.location.protocol==="ionic:"||window.navigator.userAgent.includes("Capacitor"),Iz=()=>"http://localhost:8000/api",Kx=["http://localhost:8000","http://10.0.2.2:8000","http://192.168.1.100:8000"],Dz=()=>"ws://localhost:8000",os={BASE_URL:Iz(),WS_BASE_URL:Dz()};console.log("API Config Debug:",{isMobile:Mz(),protocol:window.location.protocol,userAgent:window.navigator.userAgent,baseUrl:os.BASE_URL,wsUrl:os.WS_BASE_URL});const yp=(e="")=>`${os.BASE_URL}${e.startsWith("/")?e:`/${e}`}`,ME=e=>e.startsWith("/")?e:`/${e}`,rt=`${os.BASE_URL}/`,Fz=Object.freeze(Object.defineProperty({__proto__:null,API_BASE:rt,API_CONFIG:os,FALLBACK_URLS:Kx,getApiUrl:yp,normalizeEndpoint:ME},Symbol.toStringTag,{value:"Module"})),_d=yp("");class $z{async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await ke.getToken()}`,"ngrok-skip-browser-warning":"true"}}async getCart(){if(!await ke.getToken())throw new Error("User not authenticated");const s=await fetch(`${_d}cart/`,{headers:await this.getAuthHeaders()});if(!s.ok)throw new Error("Failed to fetch cart");return s.json()}async addToCart(t,s=1){const r=await fetch(`${_d}cart/add/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({product_id:t,quantity:s})});if(!r.ok)throw new Error("Failed to add item to cart");return(await r.json()).cart}async updateCartItem(t,s){const r=await fetch(`${_d}cart/items/${t}/update/`,{method:"PUT",headers:await this.getAuthHeaders(),body:JSON.stringify({quantity:s})});if(!r.ok)throw new Error("Failed to update cart item");return(await r.json()).cart}async removeFromCart(t){const s=await fetch(`${_d}cart/items/${t}/remove/`,{method:"DELETE",headers:await this.getAuthHeaders()});if(!s.ok)throw new Error("Failed to remove item from cart");return(await s.json()).cart}async clearCart(){if(!(await fetch(`${_d}cart/clear/`,{method:"DELETE",headers:await this.getAuthHeaders()})).ok)throw new Error("Failed to clear cart")}}const xl=new $z,IE=Object.freeze(Object.defineProperty({__proto__:null,cartService:xl},Symbol.toStringTag,{value:"Module"})),DE=j.createContext(void 0),zz=({children:e})=>{const[t,s]=j.useState(null),[r,i]=j.useState(!1),{toast:a}=hn(),o=async()=>{var h,u;try{if(!await ke.getToken()){s(null);return}i(!0);const x=await xl.getCart();s(x)}catch(p){(h=p.message)!=null&&h.includes("401")||(u=p.message)!=null&&u.includes("Unauthorized")?s(null):console.error("Failed to fetch cart:",p)}finally{i(!1)}},c=async(h,u=1)=>{try{if(!await ke.getToken()){a({title:"Login Required",description:"Please login to add items to cart",variant:"destructive"});return}const x=await xl.addToCart(h,u);s(x),a({title:"Success",description:"Item added to cart"})}catch{a({title:"Error",description:"Failed to add item to cart",variant:"destructive"})}},d=async(h,u)=>{try{const p=await xl.updateCartItem(h,u);s(p)}catch{a({title:"Error",description:"Failed to update item quantity",variant:"destructive"})}},f=async h=>{try{const u=await xl.removeFromCart(h);s(u),a({title:"Success",description:"Item removed from cart"})}catch{a({title:"Error",description:"Failed to remove item",variant:"destructive"})}},m=async()=>{try{await xl.clearCart(),s({...t,items:[],total_items:0,subtotal:0}),a({title:"Success",description:"Cart cleared"})}catch{a({title:"Error",description:"Failed to clear cart",variant:"destructive"})}};return j.useEffect(()=>{(async()=>{await ke.getToken()&&o()})()},[]),n.jsx(DE.Provider,{value:{cart:t,loading:r,addToCart:c,updateCartItem:d,removeFromCart:f,clearCart:m,fetchCart:o},children:e})},gr=()=>{const e=j.useContext(DE);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e},FE=j.createContext(void 0),Bz=({children:e})=>{const[t,s]=j.useState(!1),r=i=>{s(i)};return n.jsx(FE.Provider,{value:{isHomeDataLoaded:t,setHomeDataLoaded:r},children:e})},Vz=()=>{const e=j.useContext(FE);if(!e)throw new Error("useAppLoading must be used within AppLoadingProvider");return e},Uz=({children:e})=>{const{dispatch:t}=Fs(),[s,r]=j.useState(!1);return j.useEffect(()=>{(async()=>{try{await ke.isAuthenticated()&&(await ke.isSessionValid()||await ke.clearAuth())}catch(a){console.error("Auth initialization failed:",a)}finally{r(!0)}})()},[t]),s?n.jsx(n.Fragment,{children:e}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})},Jr=({children:e})=>{const t=nt(),[s,r]=j.useState(!0),[i,a]=j.useState(!1),{state:o}=Fs();return j.useEffect(()=>{(async()=>{try{if(o.user){console.log("ProtectedRoute: Using context user:",o.user.user_type),a(!0),r(!1);return}if(!await ke.isAuthenticated()){console.log("ProtectedRoute: Not authenticated, redirecting to login"),t("/login");return}const f=await ke.getUser();if(!f){console.log("ProtectedRoute: No user data, redirecting to login"),t("/login");return}console.log("ProtectedRoute: Access granted for user:",f.user_type),a(!0)}catch(d){console.error("ProtectedRoute auth check failed:",d),t("/login")}finally{r(!1)}})()},[t,o.user]),s?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i?n.jsx(n.Fragment,{children:e}):null},qz="/assets/tihar.gif",Hz=({onComplete:e})=>{const[t,s]=j.useState(!0);return j.useEffect(()=>{const r=setTimeout(()=>{s(!1),setTimeout(e,300)},3e3);return()=>clearTimeout(r)},[e]),t?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white",children:n.jsx("img",{src:qz,alt:"Loading...",className:"max-w-full max-h-full object-contain"})}):null};class Wz{constructor(){zn(this,"hasTrackedCurrentPage",!1)}async trackPageVisit(t,s){try{if(this.hasTrackedCurrentPage)return;const r=t||window.location.href,i=s||document.title,a=await fetch(`${os.BASE_URL}/analytics/track/`,{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},credentials:"include",body:JSON.stringify({page_url:r,page_title:i,referrer:document.referrer,timestamp:new Date().toISOString()})});if(a.ok){const o=await a.json();return console.log("Analytics tracked:",o),this.hasTrackedCurrentPage=!0,setTimeout(()=>{this.hasTrackedCurrentPage=!1},1e3),o}}catch(r){console.error("Analytics tracking failed:",r)}}trackRouteChange(t){this.hasTrackedCurrentPage=!1,this.trackPageVisit(window.location.origin+t)}}const Nd=new Wz,Zz=()=>{const e=Qs();return j.useEffect(()=>{Nd.trackPageVisit()},[e.pathname]),{trackPageVisit:Nd.trackPageVisit.bind(Nd),trackRouteChange:Nd.trackRouteChange.bind(Nd)}},ea="/assets/ezeywaylogo.png";function Gz(){const e=nt();return j.useEffect(()=>{(async()=>{try{const{simplePersistentAuth:s}=await We(async()=>{const{simplePersistentAuth:c}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:c}},[]);if(await s.isVendorLoggedIn()){console.log(" Vendor already logged in, redirecting to dashboard"),e("/vendor/dashboard");return}const{authService:i}=await We(async()=>{const{authService:c}=await Promise.resolve().then(()=>Zo);return{authService:c}},void 0),a=await i.isAuthenticated(),o=await i.getUser();if(a&&o&&o.user_type==="customer"){console.log(" Customer already logged in, redirecting to home"),e("/home");return}console.log(" No authentication found, redirecting to home"),e("/home")}catch(s){console.error("Error checking authentication:",s),e("/home")}})()},[e]),n.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:ea,alt:"ezeyway",className:"w-32 h-32 mx-auto animate-pulse object-contain"}),n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:"flex justify-center space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})}const Kz=Xu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"gradient-primary text-primary-foreground font-semibold shadow-brand hover:scale-105 transition-bounce",accent:"gradient-accent text-accent-foreground font-semibold shadow-brand hover:scale-105 transition-bounce",premium:"bg-primary-dark text-primary-foreground border border-primary-light/20 shadow-lg hover:bg-primary hover:shadow-brand transition-smooth"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=j.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...i},a)=>{const o=r?FI:"button";return n.jsx(o,{className:Ze(Kz({variant:t,size:s,className:e})),ref:a,...i})});ne.displayName="Button";const ve=j.forwardRef(({className:e,type:t,...s},r)=>n.jsx("input",{type:t,className:Ze("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...s}));ve.displayName="Input";const $E=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Yz=()=>{if(!$E())return;const e=document.createElement("div");e.innerHTML=`
    <div style="
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #f59e0b;
      color: white;
      padding: 8px 16px;
      text-align: center;
      z-index: 9999;
      font-size: 14px;
      font-weight: 500;
    ">
       Backend server not running on localhost:8000. Please start your Django server.
      <button onclick="this.parentElement.parentElement.remove()" style="
        background: none;
        border: none;
        color: white;
        margin-left: 16px;
        cursor: pointer;
        font-size: 16px;
      "></button>
    </div>
  `,document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},1e4)};let K1=!1;const Ab=async(e=!0,t=!1)=>{const s={"ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"};if(t||(s["Content-Type"]="application/json"),e){const r=await ke.getToken();r&&(s.Authorization=`Token ${r}`)}return s},Ie=async(e,t={},s=!0)=>{var c,d,f,m,h;const r=ME(e),i=`${os.BASE_URL}${r}`,a=t.body instanceof FormData,o={headers:await Ab(s,a),...t};if(console.log(" API Request:",e,"Auth:",s),console.log(" Full URL:",i),e.includes("accept")&&(console.log(" ORDER ACCEPT REQUEST DETECTED!"),console.log(" Original endpoint:",e),console.log(" Normalized endpoint:",r),console.log(" API_CONFIG.BASE_URL:",os.BASE_URL),console.log(" Final URL:",i)),e.includes("switch-role")||e.includes("switch")){console.log(" SWITCH ROLE REQUEST DETECTED!"),console.log(" Full URL:",i),console.log(" Include Auth:",s),console.log(" Request Headers:",JSON.stringify(o.headers,null,2));const{authService:u}=await We(async()=>{const{authService:w}=await Promise.resolve().then(()=>Zo);return{authService:w}},void 0),p=await u.getToken();console.log(" Token from authService:",p?`${p.substring(0,10)}...`:"NO TOKEN");const x=typeof localStorage<"u"?localStorage.getItem("token"):"NO LOCALSTORAGE";console.log(" localStorage token:",x?`${x.substring(0,10)}...`:"NO TOKEN IN LOCALSTORAGE");const v=((c=o.headers)==null?void 0:c.Authorization)||((d=o.headers)==null?void 0:d.authorization);console.log(" Authorization header:",v?`${v.substring(0,15)}...`:"NO AUTH HEADER")}t.headers&&(o.headers={...o.headers,...t.headers},a&&o.headers["Content-Type"]&&delete o.headers["Content-Type"]);try{const u=await fetch(i,o),p=u.clone(),x=u.headers.get("content-type");if(x&&x.includes("application/json"))try{const v=await u.json();return{response:p,data:v}}catch(v){return console.warn("Failed to parse JSON response:",v),{response:p,data:null}}else return console.warn("API returned non-JSON response:",u.status,u.statusText),{response:p,data:null}}catch(u){if(console.error("API request failed:",u),$E()&&!K1&&((f=u.message)!=null&&f.includes("fetch"))&&(K1=!0,Yz()),i.includes("ngrok-free.app")&&((m=u.message)!=null&&m.includes("Unable to resolve host")||(h=u.message)!=null&&h.includes("UnknownHostException"))){console.log("Ngrok failed, trying fallback URLs...");for(let p=1;p<Kx.length;p++){const v=`${Kx[p]}${r}`;try{console.log(`Trying fallback URL: ${v}`);const w=await fetch(v,{...o,headers:{...o.headers,"ngrok-skip-browser-warning":void 0,"x-ngrok-skip-browser-warning":void 0}}),y=w.clone(),b=w.headers.get("content-type");if(b&&b.includes("application/json"))try{const _=await w.json();return console.log(`Fallback URL ${v} succeeded`),{response:y,data:_}}catch{return console.log(`Fallback URL ${v} succeeded (non-JSON)`),{response:y,data:null}}else return console.log(`Fallback URL ${v} succeeded (non-JSON)`),{response:y,data:null}}catch(w){console.error(`Fallback URL ${v} failed:`,w);continue}}}throw u}},Kn=Object.freeze(Object.defineProperty({__proto__:null,apiRequest:Ie,createApiHeaders:Ab},Symbol.toStringTag,{value:"Module"}));class Xz{constructor(){zn(this,"pendingAction",null)}setPendingAction(t){this.pendingAction=t,localStorage.setItem("pendingAction",JSON.stringify(t))}getPendingAction(){if(this.pendingAction)return this.pendingAction;const t=localStorage.getItem("pendingAction");if(t)try{return this.pendingAction=JSON.parse(t),this.pendingAction}catch(s){console.error("Error parsing pending action:",s)}return null}clearPendingAction(){this.pendingAction=null,localStorage.removeItem("pendingAction")}async executePendingAction(){const t=this.getPendingAction();if(!t)return console.log("No pending action to execute"),!1;const{authService:s}=await We(async()=>{const{authService:i}=await Promise.resolve().then(()=>Zo);return{authService:i}},void 0);if(!await s.getToken())return console.log("No token found, clearing pending action"),this.clearPendingAction(),!1;console.log("Executing pending action:",t);try{switch(t.type){case"add_to_cart":if(t.data){const{cartService:i}=await We(async()=>{const{cartService:a}=await Promise.resolve().then(()=>IE);return{cartService:a}},void 0);return await i.addToCart(t.data.productId,t.data.quantity||1),console.log("Added to cart successfully"),this.clearPendingAction(),!0}break;case"buy_now":if(t.data)return localStorage.setItem("buyNowProduct",JSON.stringify(t.data)),window.location.href="/checkout",this.clearPendingAction(),!0;break;case"view_orders":return window.location.href="/orders",this.clearPendingAction(),!0;case"view_profile":return window.location.href="/profile",this.clearPendingAction(),!0;case"navigate":if(t.path)return window.location.href=t.path,this.clearPendingAction(),!0;break}}catch(i){console.error("Error executing pending action:",i),this.clearPendingAction()}return this.clearPendingAction(),!1}redirectToLogin(t){const s=t||window.location.pathname+window.location.search;window.location.href=`/login?returnTo=${encodeURIComponent(s)}`}}const Nf=new Xz;function zE({currentType:e}){const t=nt(),s=Qs(),r=()=>{t(e==="customer"?"/vendor/login":"/login",{state:s.state})};return n.jsx("div",{className:"absolute top-4 right-4",children:n.jsx("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors underline",children:e==="customer"?n.jsxs(n.Fragment,{children:[n.jsx(gs,{className:"h-4 w-4"}),"Vendor Login"]}):n.jsxs(n.Fragment,{children:[n.jsx(Mr,{className:"h-4 w-4"}),"Customer Login"]})})})}class Qz{constructor(){zn(this,"isInitialized",!1);zn(this,"clientId","413898594267-m6kiake3vs83slgvp3e3uk6kcchlssf5.apps.googleusercontent.com");zn(this,"isDevelopment",!1)}async setupPassword(t){try{const{response:s,data:r}=await Ie("/setup-password/",{method:"POST",body:JSON.stringify({password:t})});return s.ok&&r.success?{success:!0}:{success:!1,error:r.error||"Failed to setup password"}}catch(s){return{success:!1,error:s.message||"Network error during password setup"}}}async initialize(){if(!this.isInitialized)return this.isDevelopment&&this.clientId==="YOUR_GOOGLE_CLIENT_ID"?(console.warn("Google Auth: Using development mode - replace with real client ID"),this.isInitialized=!0,Promise.resolve(!0)):new Promise((t,s)=>{const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{window.google?(window.google.accounts.id.initialize({client_id:this.clientId,callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0,ux_mode:"popup"}),this.isInitialized=!0,t(!0)):s(new Error("Google Identity Services failed to load"))},r.onerror=()=>{s(new Error("Failed to load Google Identity Services"))},document.head.appendChild(r)})}handleCredentialResponse(t){console.log("Google credential response:",t)}async signIn(){try{return await this.initialize(),this.showPopup()}catch(t){return{success:!1,error:t.message}}}async showPopup(){return new Promise(t=>{window.google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:"email profile",ux_mode:"popup",callback:async r=>{if(r.access_token)try{const i=await this.getUserInfo(r.access_token),a=await this.authenticateWithBackend(i);t(a)}catch(i){t({success:!1,error:i.message})}else r.error?t({success:!1,error:r.error}):t({success:!1,error:"No access token received"})}}).requestAccessToken()})}async getUserInfo(t){const s=await fetch(`https://www.googleapis.com/oauth2/v2/userinfo?access_token=${t}`);if(!s.ok)throw new Error("Failed to get user info from Google");return s.json()}async verifyGoogleToken(t){try{const{response:s,data:r}=await Ie("/auth/google/",{method:"POST",body:JSON.stringify({credential:t})},!1);return s.ok?{success:!0,user:r.user,token:r.token}:{success:!1,error:r.error||"Google authentication failed"}}catch(s){return{success:!1,error:s.message||"Network error during Google authentication"}}}async authenticateWithBackend(t){try{const{response:s,data:r}=await Ie("/auth/google/",{method:"POST",body:JSON.stringify({user_info:{email:t.email,name:t.name,google_id:t.id,picture:t.picture}})},!1);return s.ok&&r.success?{success:!0,user:{...r.user,available_roles:r.available_roles,profile_exists:r.profile_exists,is_approved:r.is_approved,is_rejected:r.is_rejected,rejection_reason:r.rejection_reason,rejection_date:r.rejection_date,user_created:r.user_created,needs_password_setup:r.needs_password_setup,google_login:r.google_login},token:r.token}:{success:!1,error:r.error||"Backend authentication failed"}}catch(s){return{success:!1,error:s.message||"Network error during backend authentication"}}}renderButton(t,s="outline",r="large"){if(!this.isInitialized){console.warn("Google Auth not initialized");return}window.google.accounts.id.renderButton(document.getElementById(t),{theme:s,size:r,type:"standard",shape:"rectangular",text:"continue_with",logo_alignment:"left",width:320})}}const yc=new Qz;class Jz{constructor(){zn(this,"isInitialized",!1);zn(this,"appId","650860981240776");zn(this,"isDevelopment",window.location.hostname==="localhost")}async initialize(){if(!this.isInitialized)return new Promise((t,s)=>{const r=document.createElement("script");r.src="https://connect.facebook.net/en_US/sdk.js",r.async=!0,r.defer=!0,r.onload=()=>{window.FB.init({appId:this.appId,cookie:!0,xfbml:!0,version:"v18.0"}),this.isInitialized=!0,t(!0)},r.onerror=()=>{s(new Error("Failed to load Facebook SDK"))},document.head.appendChild(r)})}async signIn(){try{return await this.initialize(),window.location.protocol==="http:"&&window.location.hostname!=="localhost"?{success:!1,error:"Facebook login requires HTTPS. Please use the ngrok URL: https://61229baf5ec0.ngrok-free.app"}:new Promise(t=>{window.FB.login(s=>{s.authResponse?this.getUserInfo().then(r=>this.authenticateWithBackend(r)).then(r=>t(r)).catch(r=>t({success:!1,error:r.message})):t({success:!1,error:"Facebook login cancelled"})},{scope:"email,public_profile"})})}catch(t){return{success:!1,error:t.message}}}async getUserInfo(){return new Promise((t,s)=>{window.FB.api("/me",{fields:"id,name,email,picture"},r=>{r&&!r.error?t(r):s(new Error("Failed to get user info from Facebook"))})})}async authenticateWithBackend(t){var s,r;try{const{response:i,data:a}=await Ie("/auth/facebook/",{method:"POST",body:JSON.stringify({user_info:{email:t.email,name:t.name,facebook_id:t.id,picture:(r=(s=t.picture)==null?void 0:s.data)==null?void 0:r.url}})},!1);return i.ok&&a.success?{success:!0,user:{...a.user,available_roles:a.available_roles,profile_exists:a.profile_exists,is_approved:a.is_approved,is_rejected:a.is_rejected,rejection_reason:a.rejection_reason,rejection_date:a.rejection_date,user_created:a.user_created,needs_password_setup:a.needs_password_setup,facebook_login:a.facebook_login},token:a.token}:{success:!1,error:a.error||"Backend authentication failed"}}catch(i){return{success:!1,error:i.message||"Network error during backend authentication"}}}}const dm=new Jz;function BE({user:e,onComplete:t,onSkip:s}){const{updateUser:r}=Fs(),[i,a]=j.useState({phone_number:e.phone_number||"",address:e.address||"",password:"",confirmPassword:""}),[o,c]=j.useState(!1),[d,f]=j.useState(!1),[m,h]=j.useState(""),[u,p]=j.useState(1),x=b=>{const{name:_,value:N}=b.target;a(k=>({...k,[_]:N}))},v=async()=>{if(h(""),!i.phone_number){h("Phone number is required");return}if(i.phone_number.length<10){h("Please enter a valid phone number");return}f(!0);try{const{response:b,data:_}=await Ie("/profile/update/",{method:"PUT",body:JSON.stringify({phone_number:i.phone_number,address:i.address})});b.ok?(await r({...e,phone_number:i.phone_number,address:i.address}),p(2)):h(_.error||"Failed to update profile")}catch{h("Failed to update profile. Please try again.")}finally{f(!1)}},w=async()=>{if(h(""),i.password){if(i.password.length<6){h("Password must be at least 6 characters long");return}if(i.password!==i.confirmPassword){h("Passwords do not match");return}}f(!0);try{if(i.password){const b=await yc.setupPassword(i.password);if(!b.success){h(b.error||"Failed to setup password"),f(!1);return}}t()}catch{h("Failed to setup password. Please try again.")}finally{f(!1)}},y=()=>{t()};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:u===1?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Complete Your Profile"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Please provide some additional information to complete your account setup."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsx(ve,{type:"email",value:e.email,disabled:!0,className:"bg-gray-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),n.jsx(ve,{type:"tel",name:"phone_number",value:i.phone_number,onChange:x,placeholder:"Enter your phone number",className:"focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),n.jsx(ve,{type:"text",name:"address",value:i.address,onChange:x,placeholder:"Enter your address",className:"focus:ring-2 focus:ring-blue-500"})]}),m&&n.jsx("p",{className:"text-red-600 text-sm text-center",children:m}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx(ne,{onClick:s,variant:"outline",className:"flex-1",disabled:d,children:"Skip for now"}),n.jsx(ne,{onClick:v,disabled:!i.phone_number||d,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:d?"Saving...":"Continue"})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Set Up Password (Optional)"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Create a password to login with email and password in the future."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password (Optional)"}),n.jsx(ve,{type:o?"text":"password",name:"password",value:i.password,onChange:x,placeholder:"Enter password (min 6 characters)",className:"pr-10 focus:ring-2 focus:ring-blue-500"}),n.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute inset-y-0 right-0 flex items-center pr-3 mt-6",children:n.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):n.jsxs(n.Fragment,{children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),i.password&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),n.jsx(ve,{type:"password",name:"confirmPassword",value:i.confirmPassword,onChange:x,placeholder:"Confirm password",className:"focus:ring-2 focus:ring-blue-500"})]}),m&&n.jsx("p",{className:"text-red-600 text-sm text-center",children:m}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx(ne,{onClick:y,variant:"outline",className:"flex-1",disabled:d,children:"Skip password"}),n.jsx(ne,{onClick:w,disabled:d||i.password&&!i.confirmPassword,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:d?"Setting up...":"Complete Setup"})]})]}),n.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"You can always set up a password later from your profile settings."})]})})})}function eB(){const e=nt(),t=Qs(),{login:s}=Fs(),[r,i]=j.useState("password"),[a,o]=j.useState(""),[c,d]=j.useState(""),[f,m]=j.useState(""),[h,u]=j.useState(!1),[p,x]=j.useState(!1),[v,w]=j.useState(!1),[y,b]=j.useState(""),[_,N]=j.useState(!1),[k,I]=j.useState(!1),[C,T]=j.useState(!1),[M,P]=j.useState(!1),[E,A]=j.useState(null);j.useEffect(()=>{(async()=>{try{const q=localStorage.getItem("rememberedCredentials");if(q){const{phone:K,rememberMe:B}=JSON.parse(q);B&&(o(K),N(!0))}await ke.isAuthenticated()&&(await ke.isSessionValid()||await ke.clearAuth())}catch(q){console.error("Session check failed:",q)}})(),yc.initialize().catch(console.error),dm.initialize().catch(console.error)},[]);const z=async()=>{w(!0),b("");try{await ke.clearAuth();const{response:F,data:q}=await Ie("/login/",{method:"POST",body:JSON.stringify({username:a,password:c})},!1);if(!F.ok)throw new Error((q==null?void 0:q.error)||"Login failed");if(q.user&&q.token){const W={...q.user,available_roles:q.available_roles||["customer"],user_type:q.user.user_type||"customer",current_role:q.user.user_type||"customer"};await s(W,q.token),_?localStorage.setItem("rememberedCredentials",JSON.stringify({phone:a,rememberMe:!0})):localStorage.removeItem("rememberedCredentials"),setTimeout(async()=>{var B,Z;if(!await Nf.executePendingAction()){const ie=new URLSearchParams(window.location.search).get("returnTo")||((Z=(B=t.state)==null?void 0:B.from)==null?void 0:Z.pathname)||"/home";e(ie,{replace:!0})}},100)}else throw new Error("Invalid login response")}catch(F){b(F.message)}finally{w(!1)}},O=async()=>{w(!0),b("");try{const{response:F,data:q}=await Ie("/send-otp/",{method:"POST",body:JSON.stringify({email:a})},!1);if(!F.ok)throw new Error((q==null?void 0:q.error)||"Failed to send OTP");x(!0),b("OTP sent successfully")}catch(F){b(F.message)}finally{w(!1)}},$=async()=>{w(!0),b("");try{const{response:F,data:q}=await Ie("/verify-otp/",{method:"POST",body:JSON.stringify({email:a,otp:f})},!1);if(!F.ok)throw new Error((q==null?void 0:q.error)||"OTP verification failed");if(q.user&&q.token){const W={...q.user,available_roles:q.available_roles||["customer"],user_type:q.user.user_type||"customer",current_role:q.user.user_type||"customer"};await s(W,q.token)}setTimeout(async()=>{var K,B;if(!await Nf.executePendingAction()){const J=new URLSearchParams(window.location.search).get("returnTo")||((B=(K=t.state)==null?void 0:K.from)==null?void 0:B.pathname)||"/home";e(J,{replace:!0})}},100)}catch(F){b(F.message)}finally{w(!1)}},G=()=>{e("/signup")},X=async()=>{T(!0),b("");try{const F=await dm.signIn();if(F.success&&F.user&&F.token){const q={...F.user,available_roles:F.user.available_roles||["customer"],user_type:F.user.user_type||"customer",current_role:F.user.current_role||F.user.user_type||"customer"};await s(q,F.token),await ke.setAuth(F.token,q),_&&localStorage.setItem("rememberedCredentials",JSON.stringify({phone:F.user.email,rememberMe:!0})),F.user.user_created||!F.user.phone_number?(A({userData:q,token:F.token}),P(!0)):U()}else b(F.error||"Facebook login failed")}catch{b("Facebook login failed. Please try again.")}finally{T(!1)}},Y=async()=>{I(!0),b("");try{const F=await yc.signIn();if(F.success&&F.user&&F.token){const q={...F.user,available_roles:F.user.available_roles||["customer"],user_type:F.user.user_type||"customer",current_role:F.user.current_role||F.user.user_type||"customer"};await s(q,F.token),await ke.setAuth(F.token,q),_&&localStorage.setItem("rememberedCredentials",JSON.stringify({phone:F.user.email,rememberMe:!0})),F.user.user_created||!F.user.phone_number?(A({userData:q,token:F.token}),P(!0)):U()}else b(F.error||"Google login failed")}catch{b("Google login failed. Please try again.")}finally{I(!1)}},U=()=>{setTimeout(async()=>{var q,W;if(!await Nf.executePendingAction()){const Z=new URLSearchParams(window.location.search).get("returnTo")||((W=(q=t.state)==null?void 0:q.from)==null?void 0:W.pathname)||"/home";e(Z,{replace:!0})}},100)},V=()=>{P(!1),U()},R=()=>{P(!1),U()};return n.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[n.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 left-4 w-8 h-8 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors z-10",children:n.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),n.jsx(zE,{currentType:"customer"}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx("div",{className:"w-full max-w-80 mx-auto px-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"text-center",children:n.jsx("img",{src:ea,alt:"ezeyway",className:"w-16 h-16 mx-auto mb-6"})}),n.jsx("div",{className:"text-center mb-4",children:n.jsx("span",{className:"text-sm font-medium text-gray-700 bg-blue-50 px-3 py-1 rounded-full",children:"Customer Login"})}),n.jsx("div",{className:"flex justify-center",children:n.jsxs("div",{className:"flex space-x-8",children:[n.jsx("button",{onClick:()=>i("password"),className:`pb-2 text-sm font-medium transition-colors ${r==="password"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Password"}),n.jsx("button",{onClick:()=>i("otp"),className:`pb-2 text-sm font-medium transition-colors ${r==="otp"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"OTP"})]})}),r==="password"&&n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:a,onChange:F=>o(F.target.value),placeholder:"Phone Number or Email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:h?"text":"password",value:c,onChange:F=>d(F.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),n.jsx("button",{type:"button",onClick:()=>u(!h),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):n.jsxs(n.Fragment,{children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("input",{type:"checkbox",id:"rememberMe",checked:_,onChange:F=>N(F.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),n.jsx("label",{htmlFor:"rememberMe",className:"text-sm text-gray-700",children:"Remember my email"})]}),y&&n.jsx("p",{className:"text-red-600 text-center",children:y}),n.jsx(ne,{onClick:z,disabled:!a||!c||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Logging in...":"Login"})]}),r==="otp"&&n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:a,onChange:F=>o(F.target.value),placeholder:"Enter your phone number or email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),y&&n.jsx("p",{className:"text-red-600 text-center",children:y}),p?n.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[n.jsx(ve,{type:"text",value:f,onChange:F=>m(F.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),n.jsx(ne,{onClick:$,disabled:f.length!==6||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Verifying...":"Verify & Login"}),n.jsx("button",{onClick:O,disabled:v,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}):n.jsx(ne,{onClick:O,disabled:!a||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Sending...":"Send OTP"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-300"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 to-indigo-100 text-gray-500",children:"or"})})]}),n.jsxs("div",{className:"flex justify-center space-x-4",children:[n.jsx("button",{onClick:Y,disabled:k,className:"w-12 h-12 bg-white hover:bg-gray-50 border border-gray-300 rounded-full flex items-center justify-center transition-colors shadow-sm",children:k?n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):n.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),n.jsx("button",{onClick:X,disabled:C,className:"w-12 h-12 bg-white hover:bg-gray-50 border border-gray-300 rounded-full flex items-center justify-center transition-colors shadow-sm",children:C?n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):n.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:n.jsx("path",{fill:"#1877F2",d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})})]})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:G,className:"text-blue-600 hover:text-blue-700 text-sm",children:"Don't have an account? Sign up"})})]})})}),M&&E&&n.jsx(BE,{user:E.userData,onComplete:V,onSkip:R})]})}const tB=Xu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function De({className:e,variant:t,...s}){return n.jsx("div",{className:Ze(tB({variant:t}),e),...s})}let lv=null;const nB=async()=>{if(!lv){const{notificationService:e}=await We(async()=>{const{notificationService:t}=await Promise.resolve().then(()=>VE);return{notificationService:t}},void 0);lv=e}return lv};class sB{async getConversations(){try{const{response:t,data:s}=await Ie("messaging/conversations/");return t.ok?Array.isArray(s)?s:(s==null?void 0:s.results)||[]:[]}catch{return[]}}async getMessages(t){try{const{response:s,data:r}=await Ie(`messaging/conversations/${t}/messages/`);return s.ok?(console.log("Messages API response:",r),Array.isArray(r)?r:(r==null?void 0:r.results)||[]):(console.error(`Messages API error: ${s.status}`),[])}catch(s){return console.error("Messages API error:",s),[]}}async sendMessage(t){try{const s=new FormData;t.conversation_id&&s.append("conversation_id",t.conversation_id.toString()),t.recipient_id&&s.append("recipient_id",t.recipient_id.toString()),s.append("message_type",t.message_type),t.content&&s.append("content",t.content),t.file&&s.append("file",t.file);const{response:r,data:i}=await Ie("/messaging/messages/send/",{method:"POST",body:s});if(!r.ok)throw console.error(`Message send failed: ${r.status}`),new Error(`HTTP ${r.status}`);return console.log("Message sent successfully:",i),i}catch{console.warn("Backend not available, simulating message send");const r=await ke.getUser();return{message:{id:Date.now(),sender:{id:(r==null?void 0:r.id)||0,username:(r==null?void 0:r.username)||"You"},message_type:t.message_type,content:t.content,status:"sent",is_pinned:!1,created_at:new Date().toISOString(),is_read:!1}}}}async handleIncomingMessage(t,s){try{(await nB()).showBrowserNotification(`New message from ${s}`,{body:t.content||"New message received",tag:`message-${t.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/messages"}}),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("newMessage",{detail:{message:t,senderName:s}}))}catch(r){console.error("Failed to handle incoming message notification:",r)}}async getOrCreateConversation(t){try{const{response:s,data:r}=await Ie(`messaging/conversations/user/${t}/`);if(!s.ok)throw new Error(`HTTP ${s.status}`);return r||this.createMockConversation(t)}catch{return console.warn("Backend not available, creating mock conversation"),this.createMockConversation(t)}}createMockConversation(t){return{id:t,participants:[],last_message:void 0,unread_count:0,other_participant:{id:t,username:t===1?"EzzeYway Support":`User ${t}`,profile_picture:void 0}}}}const Hs=new sB;typeof window<"u"&&window.addEventListener("message",async e=>{var t,s;if(((t=e.data)==null?void 0:t.type)==="new_message"){const{message:r}=e.data;await Hs.handleIncomingMessage(r,((s=r.sender)==null?void 0:s.username)||"Unknown")}});class rB{constructor(){zn(this,"audio",null);zn(this,"isInitialized",!1)}async initialize(){if(!this.isInitialized){if(this.audio=null,"serviceWorker"in navigator&&!vt.isNativePlatform())try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered successfully"),navigator.serviceWorker.addEventListener("message",s=>{s.data&&s.data.type==="SHOW_ORDER_MODAL"&&window.dispatchEvent(new CustomEvent("showOrderModal",{detail:s.data.data}))}),document.addEventListener("visibilitychange",()=>{navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"VISIBILITY_CHANGE",hidden:document.hidden})}),"sync"in window.ServiceWorkerRegistration.prototype&&t.sync.register("background-sync-orders")}catch(t){console.error("Service Worker registration failed:",t)}!vt.isNativePlatform()&&"Notification"in window&&(Notification.permission==="default"?await Notification.requestPermission()==="granted"?(console.log("Notification permission granted"),this.showTestNotification()):console.warn("Notification permission denied"):Notification.permission==="granted"&&console.log("Notification permission already granted")),console.log("Notification service initialized for:",vt.isNativePlatform()?"mobile":"web"),this.isInitialized=!0}}async initializeMobileNotifications(){try{if(vt.isNativePlatform()){const{LocalNotifications:t}=await We(async()=>{const{LocalNotifications:a}=await import("./index--sWbVhQe.js");return{LocalNotifications:a}},[]),{PushNotifications:s}=await We(async()=>{const{PushNotifications:a}=await Promise.resolve().then(()=>KL);return{PushNotifications:a}},void 0),{Haptics:r,ImpactStyle:i}=await We(async()=>{const{Haptics:a,ImpactStyle:o}=await import("./index-D5MbxSxR.js");return{Haptics:a,ImpactStyle:o}},[]);await t.requestPermissions(),await s.requestPermissions(),await s.register(),s.addListener("pushNotificationReceived",async a=>{console.log("Push notification received:",a),await this.handleMobileOrderNotification(a.data)}),s.addListener("pushNotificationActionPerformed",async a=>{console.log("Push notification tapped:",a);const o=a.notification.data;(o==null?void 0:o.type)==="order"&&(await r.impact({style:i.Heavy}),this.openOrderModal(o))}),t.addListener("localNotificationActionPerformed",async a=>{console.log("Local notification tapped:",a);const o=a.notification.extra;(o==null?void 0:o.type)==="order"&&(await r.impact({style:i.Heavy}),this.openOrderModal(o))})}}catch(t){console.error("Failed to initialize mobile notifications:",t)}}async playNotificationSound(){this.createBeepSound()}createBeepSound(){try{const t=new(window.AudioContext||window.webkitAudioContext);this.playBeep(t,523,.2,.3),setTimeout(()=>this.playBeep(t,659,.2,.3),200),setTimeout(()=>this.playBeep(t,784,.3,.4),400)}catch(t){console.warn("Web Audio API not supported:",t)}}playBeep(t,s,r,i){const a=t.createOscillator(),o=t.createGain();a.connect(o),o.connect(t.destination),a.frequency.value=s,a.type="sine",o.gain.setValueAtTime(0,t.currentTime),o.gain.linearRampToValueAtTime(i,t.currentTime+.05),o.gain.exponentialRampToValueAtTime(.01,t.currentTime+r),a.start(t.currentTime),a.stop(t.currentTime+r)}async showTestNotification(){if(!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const t=new Notification("Notifications Enabled!",{body:"You will now receive order notifications even when the app is in the background.",icon:"/favicon.ico",badge:"/favicon.ico",tag:"test-notification",requireInteraction:!1});setTimeout(()=>t.close(),3e3)}}async showOrderNotification(t,s,r){if(!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const i=new Notification(" New Order Received!",{body:`Order #${t} - ${s}
Tap to view and respond`,icon:"/favicon.ico",tag:`order-${r}`,requireInteraction:!0});i.onclick=()=>{window.focus(),this.openOrderModal({orderId:r,orderNumber:t,amount:s}),i.close()},setTimeout(()=>i.close(),15e3)}vt.isNativePlatform()&&("vibrate"in navigator&&navigator.vibrate([300,100,300,100,500]),this.openOrderModal({orderId:r,orderNumber:t,amount:s}))}async showBrowserNotification(t,s,r,i){if(!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const a=new Notification(t,{body:s,icon:"/favicon.ico",badge:"/favicon.ico",tag:`message-${r}`,requireInteraction:!0,data:{conversationId:r,userType:i}});a.onclick=()=>{window.focus(),this.navigateToConversation(r,i),a.close()},setTimeout(()=>a.close(),1e4)}}async showMobileOrderNotification(t,s,r){if(vt.isNativePlatform())try{const{LocalNotifications:i}=await We(async()=>{const{LocalNotifications:c}=await import("./index--sWbVhQe.js");return{LocalNotifications:c}},[]),{Haptics:a,ImpactStyle:o}=await We(async()=>{const{Haptics:c,ImpactStyle:d}=await import("./index-D5MbxSxR.js");return{Haptics:c,ImpactStyle:d}},[]);await a.impact({style:o.Heavy}),await i.schedule({notifications:[{title:" New Order Received!",body:`Order #${t} - ${s}
Tap to accept/reject`,id:Date.now(),sound:"default",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF6B35",actionTypeId:"OPEN_ORDER",extra:{type:"order",orderId:r,orderNumber:t,amount:s,autoOpen:!0}}]})}catch(i){console.error("Failed to show mobile order notification:",i)}}async showMobileNotification(t,s,r,i){if(vt.isNativePlatform())try{const{LocalNotifications:a}=await We(async()=>{const{LocalNotifications:o}=await import("./index--sWbVhQe.js");return{LocalNotifications:o}},[]);await a.schedule({notifications:[{title:t,body:s,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",attachments:[],actionTypeId:"OPEN_MESSAGE",extra:{conversationId:r,userType:i}}]})}catch(a){console.error("Failed to show mobile notification:",a)}}openOrderModal(t){if(window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t})),vt.isNativePlatform()){const s=window.location.pathname;!s.includes("/vendor/home")&&!s.includes("/vendor/dashboard")&&(window.location.href="/vendor/home")}}async handleMobileOrderNotification(t){try{const{Haptics:s,ImpactStyle:r}=await We(async()=>{const{Haptics:i,ImpactStyle:a}=await import("./index-D5MbxSxR.js");return{Haptics:i,ImpactStyle:a}},[]);await s.impact({style:r.Heavy}),await this.playNotificationSound(),this.openOrderModal(t)}catch(s){console.error("Error handling mobile order notification:",s)}}navigateToConversation(t,s){const i={vendor:`/vendor/messages/${t}`,customer:`/messages/${t}`,superadmin:`/accounts/superadmin/messages/${t}/`}[s];i&&(window.location.href=i)}async notifyNewMessage(t,s,r,i){await this.initialize();const a=`New message from ${t}`,o=s.length>50?s.substring(0,50)+"...":s;await this.playNotificationSound(),await this.showBrowserNotification(a,o,r,i),await this.showMobileNotification(a,o,r,i)}async requestPermissions(){return await this.initialize(),!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"}async requestPermission(){return this.requestPermissions()}async getNotifications(){try{const t=localStorage.getItem("token");if(!t)return[];const s=await fetch("/api/vendor-notifications/",{headers:{Authorization:`Token ${t}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"}});if(s.ok){const r=s.headers.get("content-type");if(r&&r.includes("application/json"))return(await s.json()).results||[]}return[]}catch(t){return console.warn("Notifications API not available:",t.message),[]}}async getUnreadCount(){try{return(await this.getNotifications()).filter(s=>!s.read).length}catch(t){return console.warn("Failed to get unread count:",t.message),0}}async markAsRead(t){try{(await fetch(`/api/notifications/${t}/read/`,{method:"POST",headers:{Authorization:`Token ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok&&console.log("Notification marked as read:",t)}catch(s){console.error("Failed to mark notification as read:",s)}}async markAllAsRead(){try{(await fetch("/api/notifications/mark-all-read/",{method:"POST",headers:{Authorization:`Token ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok&&console.log("All notifications marked as read")}catch(t){console.error("Failed to mark all notifications as read:",t)}}async showBrowserNotificationCompat(t,s){if(await this.playNotificationSound(),!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const r=new Notification(t,{body:s.body,icon:"/favicon.ico",badge:"/favicon.ico",tag:s.tag,requireInteraction:s.requireInteraction,data:s.data,silent:!1});r.onclick=()=>{var i;window.focus(),(i=s.data)!=null&&i.actionUrl&&(window.location.href=s.data.actionUrl),r.close()},setTimeout(()=>r.close(),1e4)}}}const Wt=new rB,VE=Object.freeze(Object.defineProperty({__proto__:null,notificationService:Wt},Symbol.toStringTag,{value:"Module"}));function iB(){const[e,t]=j.useState([]),[s,r]=j.useState(0),[i,a]=j.useState(!1),o=async()=>{var f,m;try{const{authService:h}=await We(async()=>{const{authService:v}=await Promise.resolve().then(()=>Zo);return{authService:v}},void 0);if(!await h.getToken())return;a(!0);const[p,x]=await Promise.all([Wt.getNotifications(),Wt.getUnreadCount()]);t(p),r(x)}catch(h){(f=h.message)!=null&&f.includes("401")||(m=h.message)!=null&&m.includes("Unauthorized")?(t([]),r(0)):console.error("Failed to load notifications:",h)}finally{a(!1)}},c=async f=>{try{await Wt.markAsRead(f),r(m=>Math.max(0,m-1)),t(m=>m.map(h=>h.id===f?{...h,read:!0}:h))}catch(m){console.error("Failed to mark notification as read:",m)}},d=async()=>{try{await Wt.markAllAsRead(),r(0),t(f=>f.map(m=>({...m,read:!0})))}catch(f){console.error("Failed to mark all notifications as read:",f)}};return j.useEffect(()=>{o();const f=setInterval(o,1e4);return()=>clearInterval(f)},[]),j.useEffect(()=>{Wt.requestPermission()},[]),{notifications:e,unreadCount:s,isLoading:i,markAsRead:c,markAllAsRead:d,refreshNotifications:o}}const Vc=()=>{const e=nt(),{user:t,state:s}=Fs(),r=async(c,d)=>{if(!(t&&s.isAuthenticated)){console.log("User not authenticated, redirecting to login"),d&&Nf.setPendingAction(d);const m=window.location.pathname+window.location.search;e(`/login?returnTo=${encodeURIComponent(m)}`);return}console.log("User authenticated, executing action");try{await c()}catch(m){console.error("Error executing authenticated action:",m)}};return{executeWithAuth:r,addToCartWithAuth:(c,d=1)=>r(async()=>{const{cartService:f}=await We(async()=>{const{cartService:m}=await Promise.resolve().then(()=>IE);return{cartService:m}},void 0);await f.addToCart(c,d)},{type:"add_to_cart",data:{productId:c,quantity:d}}),buyNowWithAuth:c=>r(async()=>{localStorage.setItem("buyNowProduct",JSON.stringify(c)),e("/checkout")},{type:"buy_now",data:c}),navigateWithAuth:c=>r(()=>e(c),{type:"navigate",path:c}),isAuthenticated:!!(t&&s.isAuthenticated)}};var aB=j.createContext(void 0);function Uc(e){const t=j.useContext(aB);return e||t||"ltr"}var cv=0;function Ob(){j.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Y1()),document.body.insertAdjacentElement("beforeend",e[1]??Y1()),cv++,()=>{cv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),cv--}},[])}function Y1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var dv="focusScope.autoFocusOnMount",uv="focusScope.autoFocusOnUnmount",X1={bubbles:!1,cancelable:!0},oB="FocusScope",bp=j.forwardRef((e,t)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[c,d]=j.useState(null),f=vn(i),m=vn(a),h=j.useRef(null),u=ft(t,v=>d(v)),p=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(r){let v=function(_){if(p.paused||!c)return;const N=_.target;c.contains(N)?h.current=N:ma(h.current,{select:!0})},w=function(_){if(p.paused||!c)return;const N=_.relatedTarget;N!==null&&(c.contains(N)||ma(h.current,{select:!0}))},y=function(_){if(document.activeElement===document.body)for(const k of _)k.removedNodes.length>0&&ma(c)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const b=new MutationObserver(y);return c&&b.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),b.disconnect()}}},[r,c,p.paused]),j.useEffect(()=>{if(c){J1.add(p);const v=document.activeElement;if(!c.contains(v)){const y=new CustomEvent(dv,X1);c.addEventListener(dv,f),c.dispatchEvent(y),y.defaultPrevented||(lB(fB(UE(c)),{select:!0}),document.activeElement===v&&ma(c))}return()=>{c.removeEventListener(dv,f),setTimeout(()=>{const y=new CustomEvent(uv,X1);c.addEventListener(uv,m),c.dispatchEvent(y),y.defaultPrevented||ma(v??document.body,{select:!0}),c.removeEventListener(uv,m),J1.remove(p)},0)}}},[c,f,m,p]);const x=j.useCallback(v=>{if(!s&&!r||p.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(w&&y){const b=v.currentTarget,[_,N]=cB(b);_&&N?!v.shiftKey&&y===N?(v.preventDefault(),s&&ma(_,{select:!0})):v.shiftKey&&y===_&&(v.preventDefault(),s&&ma(N,{select:!0})):y===b&&v.preventDefault()}},[s,r,p.paused]);return n.jsx(Xe.div,{tabIndex:-1,...o,ref:u,onKeyDown:x})});bp.displayName=oB;function lB(e,{select:t=!1}={}){const s=document.activeElement;for(const r of e)if(ma(r,{select:t}),document.activeElement!==s)return}function cB(e){const t=UE(e),s=Q1(t,e),r=Q1(t.reverse(),e);return[s,r]}function UE(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Q1(e,t){for(const s of e)if(!dB(s,{upTo:t}))return s}function dB(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function uB(e){return e instanceof HTMLInputElement&&"select"in e}function ma(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&uB(e)&&t&&e.select()}}var J1=hB();function hB(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=eN(e,t),e.unshift(t)},remove(t){var s;e=eN(e,t),(s=e[0])==null||s.resume()}}}function eN(e,t){const s=[...e],r=s.indexOf(t);return r!==-1&&s.splice(r,1),s}function fB(e){return e.filter(t=>t.tagName!=="A")}var hv="rovingFocusGroup.onEntryFocus",mB={bubbles:!1,cancelable:!0},nh="RovingFocusGroup",[Yx,qE,pB]=np(nh),[gB,qc]=ds(nh,[pB]),[vB,xB]=gB(nh),HE=j.forwardRef((e,t)=>n.jsx(Yx.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Yx.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(yB,{...e,ref:t})})}));HE.displayName=nh;var yB=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...h}=e,u=j.useRef(null),p=ft(t,u),x=Uc(a),[v,w]=Br({prop:o,defaultProp:c??null,onChange:d,caller:nh}),[y,b]=j.useState(!1),_=vn(f),N=qE(s),k=j.useRef(!1),[I,C]=j.useState(0);return j.useEffect(()=>{const T=u.current;if(T)return T.addEventListener(hv,_),()=>T.removeEventListener(hv,_)},[_]),n.jsx(vB,{scope:s,orientation:r,dir:x,loop:i,currentTabStopId:v,onItemFocus:j.useCallback(T=>w(T),[w]),onItemShiftTab:j.useCallback(()=>b(!0),[]),onFocusableItemAdd:j.useCallback(()=>C(T=>T+1),[]),onFocusableItemRemove:j.useCallback(()=>C(T=>T-1),[]),children:n.jsx(Xe.div,{tabIndex:y||I===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:Me(e.onMouseDown,()=>{k.current=!0}),onFocus:Me(e.onFocus,T=>{const M=!k.current;if(T.target===T.currentTarget&&M&&!y){const P=new CustomEvent(hv,mB);if(T.currentTarget.dispatchEvent(P),!P.defaultPrevented){const E=N().filter(G=>G.focusable),A=E.find(G=>G.active),z=E.find(G=>G.id===v),$=[A,z,...E].filter(Boolean).map(G=>G.ref.current);GE($,m)}}k.current=!1}),onBlur:Me(e.onBlur,()=>b(!1))})})}),WE="RovingFocusGroupItem",ZE=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...c}=e,d=$r(),f=a||d,m=xB(WE,s),h=m.currentTabStopId===f,u=qE(s),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:v}=m;return j.useEffect(()=>{if(r)return p(),()=>x()},[r,p,x]),n.jsx(Yx.ItemSlot,{scope:s,id:f,focusable:r,active:i,children:n.jsx(Xe.span,{tabIndex:h?0:-1,"data-orientation":m.orientation,...c,ref:t,onMouseDown:Me(e.onMouseDown,w=>{r?m.onItemFocus(f):w.preventDefault()}),onFocus:Me(e.onFocus,()=>m.onItemFocus(f)),onKeyDown:Me(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){m.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const y=jB(w,m.orientation,m.dir);if(y!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let _=u().filter(N=>N.focusable).map(N=>N.ref.current);if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const N=_.indexOf(w.currentTarget);_=m.loop?_B(_,N+1):_.slice(N+1)}setTimeout(()=>GE(_))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o})})});ZE.displayName=WE;var bB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function wB(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function jB(e,t,s){const r=wB(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return bB[r]}function GE(e,t=!1){const s=document.activeElement;for(const r of e)if(r===s||(r.focus({preventScroll:t}),document.activeElement!==s))return}function _B(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var Rb=HE,Lb=ZE,NB=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ml=new WeakMap,Qh=new WeakMap,Jh={},fv=0,KE=function(e){return e&&(e.host||KE(e.parentNode))},SB=function(e,t){return t.map(function(s){if(e.contains(s))return s;var r=KE(s);return r&&e.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},kB=function(e,t,s,r){var i=SB(t,Array.isArray(e)?e:[e]);Jh[s]||(Jh[s]=new WeakMap);var a=Jh[s],o=[],c=new Set,d=new Set(i),f=function(h){!h||c.has(h)||(c.add(h),f(h.parentNode))};i.forEach(f);var m=function(h){!h||d.has(h)||Array.prototype.forEach.call(h.children,function(u){if(c.has(u))m(u);else try{var p=u.getAttribute(r),x=p!==null&&p!=="false",v=(ml.get(u)||0)+1,w=(a.get(u)||0)+1;ml.set(u,v),a.set(u,w),o.push(u),v===1&&x&&Qh.set(u,!0),w===1&&u.setAttribute(s,"true"),x||u.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",u,y)}})};return m(t),c.clear(),fv++,function(){o.forEach(function(h){var u=ml.get(h)-1,p=a.get(h)-1;ml.set(h,u),a.set(h,p),u||(Qh.has(h)||h.removeAttribute(r),Qh.delete(h)),p||h.removeAttribute(s)}),fv--,fv||(ml=new WeakMap,ml=new WeakMap,Qh=new WeakMap,Jh={})}},Mb=function(e,t,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=NB(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),kB(r,i,s,"aria-hidden")):function(){return null}},oi=function(){return oi=Object.assign||function(t){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},oi.apply(this,arguments)};function YE(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]]);return s}function CB(e,t,s){if(s||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Sf="right-scroll-bar-position",kf="width-before-scroll-bar",PB="with-scroll-bars-hidden",EB="--removed-body-scroll-bar-size";function mv(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function TB(e,t){var s=j.useState(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(r){var i=s.value;i!==r&&(s.value=r,s.callback(r,i))}}}})[0];return s.callback=t,s.facade}var AB=typeof window<"u"?j.useLayoutEffect:j.useEffect,tN=new WeakMap;function OB(e,t){var s=TB(null,function(r){return e.forEach(function(i){return mv(i,r)})});return AB(function(){var r=tN.get(s);if(r){var i=new Set(r),a=new Set(e),o=s.current;i.forEach(function(c){a.has(c)||mv(c,null)}),a.forEach(function(c){i.has(c)||mv(c,o)})}tN.set(s,e)},[e]),s}function RB(e){return e}function LB(e,t){t===void 0&&(t=RB);var s=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(a){var o=t(a,r);return s.push(o),function(){s=s.filter(function(c){return c!==o})}},assignSyncMedium:function(a){for(r=!0;s.length;){var o=s;s=[],o.forEach(a)}s={push:function(c){return a(c)},filter:function(){return s}}},assignMedium:function(a){r=!0;var o=[];if(s.length){var c=s;s=[],c.forEach(a),o=s}var d=function(){var m=o;o=[],m.forEach(a)},f=function(){return Promise.resolve().then(d)};f(),s={push:function(m){o.push(m),f()},filter:function(m){return o=o.filter(m),s}}}};return i}function MB(e){e===void 0&&(e={});var t=LB(null);return t.options=oi({async:!0,ssr:!1},e),t}var XE=function(e){var t=e.sideCar,s=YE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return j.createElement(r,oi({},s))};XE.isSideCarExport=!0;function IB(e,t){return e.useMedium(t),XE}var QE=MB(),pv=function(){},wp=j.forwardRef(function(e,t){var s=j.useRef(null),r=j.useState({onScrollCapture:pv,onWheelCapture:pv,onTouchMoveCapture:pv}),i=r[0],a=r[1],o=e.forwardProps,c=e.children,d=e.className,f=e.removeScrollBar,m=e.enabled,h=e.shards,u=e.sideCar,p=e.noRelative,x=e.noIsolation,v=e.inert,w=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,_=e.gapMode,N=YE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=u,I=OB([s,t]),C=oi(oi({},N),i);return j.createElement(j.Fragment,null,m&&j.createElement(k,{sideCar:QE,removeScrollBar:f,shards:h,noRelative:p,noIsolation:x,inert:v,setCallbacks:a,allowPinchZoom:!!w,lockRef:s,gapMode:_}),o?j.cloneElement(j.Children.only(c),oi(oi({},C),{ref:I})):j.createElement(b,oi({},C,{className:d,ref:I}),c))});wp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};wp.classNames={fullWidth:kf,zeroRight:Sf};var DB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function FB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=DB();return t&&e.setAttribute("nonce",t),e}function $B(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function zB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var BB=function(){var e=0,t=null;return{add:function(s){e==0&&(t=FB())&&($B(t,s),zB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},VB=function(){var e=BB();return function(t,s){j.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},JE=function(){var e=VB(),t=function(s){var r=s.styles,i=s.dynamic;return e(r,i),null};return t},UB={left:0,top:0,right:0,gap:0},gv=function(e){return parseInt(e||"",10)||0},qB=function(e){var t=window.getComputedStyle(document.body),s=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[gv(s),gv(r),gv(i)]},HB=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return UB;var t=qB(e),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-s+t[2]-t[0])}},WB=JE(),Xl="data-scroll-locked",ZB=function(e,t,s,r){var i=e.left,a=e.top,o=e.right,c=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(PB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Xl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sf,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(kf,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Sf," .").concat(Sf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(kf," .").concat(kf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Xl,`] {
    `).concat(EB,": ").concat(c,`px;
  }
`)},nN=function(){var e=parseInt(document.body.getAttribute(Xl)||"0",10);return isFinite(e)?e:0},GB=function(){j.useEffect(function(){return document.body.setAttribute(Xl,(nN()+1).toString()),function(){var e=nN()-1;e<=0?document.body.removeAttribute(Xl):document.body.setAttribute(Xl,e.toString())}},[])},KB=function(e){var t=e.noRelative,s=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;GB();var a=j.useMemo(function(){return HB(i)},[i]);return j.createElement(WB,{styles:ZB(a,!t,i,s?"":"!important")})},Xx=!1;if(typeof window<"u")try{var ef=Object.defineProperty({},"passive",{get:function(){return Xx=!0,!0}});window.addEventListener("test",ef,ef),window.removeEventListener("test",ef,ef)}catch{Xx=!1}var pl=Xx?{passive:!1}:!1,YB=function(e){return e.tagName==="TEXTAREA"},eT=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!YB(e)&&s[t]==="visible")},XB=function(e){return eT(e,"overflowY")},QB=function(e){return eT(e,"overflowX")},sN=function(e,t){var s=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=tT(e,r);if(i){var a=nT(e,r),o=a[1],c=a[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},JB=function(e){var t=e.scrollTop,s=e.scrollHeight,r=e.clientHeight;return[t,s,r]},e9=function(e){var t=e.scrollLeft,s=e.scrollWidth,r=e.clientWidth;return[t,s,r]},tT=function(e,t){return e==="v"?XB(t):QB(t)},nT=function(e,t){return e==="v"?JB(t):e9(t)},t9=function(e,t){return e==="h"&&t==="rtl"?-1:1},n9=function(e,t,s,r,i){var a=t9(e,window.getComputedStyle(t).direction),o=a*r,c=s.target,d=t.contains(c),f=!1,m=o>0,h=0,u=0;do{if(!c)break;var p=nT(e,c),x=p[0],v=p[1],w=p[2],y=v-w-a*x;(x||y)&&tT(e,c)&&(h+=y,u+=x);var b=c.parentNode;c=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return(m&&(Math.abs(h)<1||!i)||!m&&(Math.abs(u)<1||!i))&&(f=!0),f},tf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rN=function(e){return[e.deltaX,e.deltaY]},iN=function(e){return e&&"current"in e?e.current:e},s9=function(e,t){return e[0]===t[0]&&e[1]===t[1]},r9=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},i9=0,gl=[];function a9(e){var t=j.useRef([]),s=j.useRef([0,0]),r=j.useRef(),i=j.useState(i9++)[0],a=j.useState(JE)[0],o=j.useRef(e);j.useEffect(function(){o.current=e},[e]),j.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var v=CB([e.lockRef.current],(e.shards||[]).map(iN),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var c=j.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var y=tf(v),b=s.current,_="deltaX"in v?v.deltaX:b[0]-y[0],N="deltaY"in v?v.deltaY:b[1]-y[1],k,I=v.target,C=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in v&&C==="h"&&I.type==="range")return!1;var T=sN(C,I);if(!T)return!0;if(T?k=C:(k=C==="v"?"h":"v",T=sN(C,I)),!T)return!1;if(!r.current&&"changedTouches"in v&&(_||N)&&(r.current=k),!k)return!0;var M=r.current||k;return n9(M,w,v,M==="h"?_:N,!0)},[]),d=j.useCallback(function(v){var w=v;if(!(!gl.length||gl[gl.length-1]!==a)){var y="deltaY"in w?rN(w):tf(w),b=t.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&s9(k.delta,y)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var _=(o.current.shards||[]).map(iN).filter(Boolean).filter(function(k){return k.contains(w.target)}),N=_.length>0?c(w,_[0]):!o.current.noIsolation;N&&w.cancelable&&w.preventDefault()}}},[]),f=j.useCallback(function(v,w,y,b){var _={name:v,delta:w,target:y,should:b,shadowParent:o9(y)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(N){return N!==_})},1)},[]),m=j.useCallback(function(v){s.current=tf(v),r.current=void 0},[]),h=j.useCallback(function(v){f(v.type,rN(v),v.target,c(v,e.lockRef.current))},[]),u=j.useCallback(function(v){f(v.type,tf(v),v.target,c(v,e.lockRef.current))},[]);j.useEffect(function(){return gl.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:u}),document.addEventListener("wheel",d,pl),document.addEventListener("touchmove",d,pl),document.addEventListener("touchstart",m,pl),function(){gl=gl.filter(function(v){return v!==a}),document.removeEventListener("wheel",d,pl),document.removeEventListener("touchmove",d,pl),document.removeEventListener("touchstart",m,pl)}},[]);var p=e.removeScrollBar,x=e.inert;return j.createElement(j.Fragment,null,x?j.createElement(a,{styles:r9(i)}):null,p?j.createElement(KB,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function o9(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const l9=IB(QE,a9);var jp=j.forwardRef(function(e,t){return j.createElement(wp,oi({},e,{ref:t,sideCar:l9}))});jp.classNames=wp.classNames;var Qx=["Enter"," "],c9=["ArrowDown","PageUp","Home"],sT=["ArrowUp","PageDown","End"],d9=[...c9,...sT],u9={ltr:[...Qx,"ArrowRight"],rtl:[...Qx,"ArrowLeft"]},h9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},sh="Menu",[Ru,f9,m9]=np(sh),[nl,rT]=ds(sh,[m9,zc,qc]),_p=zc(),iT=qc(),[p9,sl]=nl(sh),[g9,rh]=nl(sh),aT=e=>{const{__scopeMenu:t,open:s=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=e,c=_p(t),[d,f]=j.useState(null),m=j.useRef(!1),h=vn(a),u=Uc(i);return j.useEffect(()=>{const p=()=>{m.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>m.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),n.jsx(wb,{...c,children:n.jsx(p9,{scope:t,open:s,onOpenChange:h,content:d,onContentChange:f,children:n.jsx(g9,{scope:t,onClose:j.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:m,dir:u,modal:o,children:r})})})};aT.displayName=sh;var v9="MenuAnchor",Ib=j.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e,i=_p(s);return n.jsx(jb,{...i,...r,ref:t})});Ib.displayName=v9;var Db="MenuPortal",[x9,oT]=nl(Db,{forceMount:void 0}),lT=e=>{const{__scopeMenu:t,forceMount:s,children:r,container:i}=e,a=sl(Db,t);return n.jsx(x9,{scope:t,forceMount:s,children:n.jsx(Jn,{present:s||a.open,children:n.jsx(Ku,{asChild:!0,container:i,children:r})})})};lT.displayName=Db;var ur="MenuContent",[y9,Fb]=nl(ur),cT=j.forwardRef((e,t)=>{const s=oT(ur,e.__scopeMenu),{forceMount:r=s.forceMount,...i}=e,a=sl(ur,e.__scopeMenu),o=rh(ur,e.__scopeMenu);return n.jsx(Ru.Provider,{scope:e.__scopeMenu,children:n.jsx(Jn,{present:r||a.open,children:n.jsx(Ru.Slot,{scope:e.__scopeMenu,children:o.modal?n.jsx(b9,{...i,ref:t}):n.jsx(w9,{...i,ref:t})})})})}),b9=j.forwardRef((e,t)=>{const s=sl(ur,e.__scopeMenu),r=j.useRef(null),i=ft(t,r);return j.useEffect(()=>{const a=r.current;if(a)return Mb(a)},[]),n.jsx($b,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:Me(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),w9=j.forwardRef((e,t)=>{const s=sl(ur,e.__scopeMenu);return n.jsx($b,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),j9=qo("MenuContent.ScrollLock"),$b=j.forwardRef((e,t)=>{const{__scopeMenu:s,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:h,onInteractOutside:u,onDismiss:p,disableOutsideScroll:x,...v}=e,w=sl(ur,s),y=rh(ur,s),b=_p(s),_=iT(s),N=f9(s),[k,I]=j.useState(null),C=j.useRef(null),T=ft(t,C,w.onContentChange),M=j.useRef(0),P=j.useRef(""),E=j.useRef(0),A=j.useRef(null),z=j.useRef("right"),O=j.useRef(0),$=x?jp:j.Fragment,G=x?{as:j9,allowPinchZoom:!0}:void 0,X=U=>{var Z,se;const V=P.current+U,R=N().filter(J=>!J.disabled),F=document.activeElement,q=(Z=R.find(J=>J.ref.current===F))==null?void 0:Z.textValue,W=R.map(J=>J.textValue),K=L9(W,V,q),B=(se=R.find(J=>J.textValue===K))==null?void 0:se.ref.current;(function J(ie){P.current=ie,window.clearTimeout(M.current),ie!==""&&(M.current=window.setTimeout(()=>J(""),1e3))})(V),B&&setTimeout(()=>B.focus())};j.useEffect(()=>()=>window.clearTimeout(M.current),[]),Ob();const Y=j.useCallback(U=>{var R,F;return z.current===((R=A.current)==null?void 0:R.side)&&I9(U,(F=A.current)==null?void 0:F.area)},[]);return n.jsx(y9,{scope:s,searchRef:P,onItemEnter:j.useCallback(U=>{Y(U)&&U.preventDefault()},[Y]),onItemLeave:j.useCallback(U=>{var V;Y(U)||((V=C.current)==null||V.focus(),I(null))},[Y]),onTriggerLeave:j.useCallback(U=>{Y(U)&&U.preventDefault()},[Y]),pointerGraceTimerRef:E,onPointerGraceIntentChange:j.useCallback(U=>{A.current=U},[]),children:n.jsx($,{...G,children:n.jsx(bp,{asChild:!0,trapped:i,onMountAutoFocus:Me(a,U=>{var V;U.preventDefault(),(V=C.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:n.jsx(Mc,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:h,onInteractOutside:u,onDismiss:p,children:n.jsx(Rb,{asChild:!0,..._,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:I,onEntryFocus:Me(d,U=>{y.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(_b,{role:"menu","aria-orientation":"vertical","data-state":ST(w.open),"data-radix-menu-content":"",dir:y.dir,...b,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:Me(v.onKeyDown,U=>{const R=U.target.closest("[data-radix-menu-content]")===U.currentTarget,F=U.ctrlKey||U.altKey||U.metaKey,q=U.key.length===1;R&&(U.key==="Tab"&&U.preventDefault(),!F&&q&&X(U.key));const W=C.current;if(U.target!==W||!d9.includes(U.key))return;U.preventDefault();const B=N().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);sT.includes(U.key)&&B.reverse(),O9(B)}),onBlur:Me(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(M.current),P.current="")}),onPointerMove:Me(e.onPointerMove,Lu(U=>{const V=U.target,R=O.current!==U.clientX;if(U.currentTarget.contains(V)&&R){const F=U.clientX>O.current?"right":"left";z.current=F,O.current=U.clientX}}))})})})})})})});cT.displayName=ur;var _9="MenuGroup",zb=j.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(Xe.div,{role:"group",...r,ref:t})});zb.displayName=_9;var N9="MenuLabel",dT=j.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(Xe.div,{...r,ref:t})});dT.displayName=N9;var um="MenuItem",aN="menu.itemSelect",Np=j.forwardRef((e,t)=>{const{disabled:s=!1,onSelect:r,...i}=e,a=j.useRef(null),o=rh(um,e.__scopeMenu),c=Fb(um,e.__scopeMenu),d=ft(t,a),f=j.useRef(!1),m=()=>{const h=a.current;if(!s&&h){const u=new CustomEvent(aN,{bubbles:!0,cancelable:!0});h.addEventListener(aN,p=>r==null?void 0:r(p),{once:!0}),eb(h,u),u.defaultPrevented?f.current=!1:o.onClose()}};return n.jsx(uT,{...i,ref:d,disabled:s,onClick:Me(e.onClick,m),onPointerDown:h=>{var u;(u=e.onPointerDown)==null||u.call(e,h),f.current=!0},onPointerUp:Me(e.onPointerUp,h=>{var u;f.current||(u=h.currentTarget)==null||u.click()}),onKeyDown:Me(e.onKeyDown,h=>{const u=c.searchRef.current!=="";s||u&&h.key===" "||Qx.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Np.displayName=um;var uT=j.forwardRef((e,t)=>{const{__scopeMenu:s,disabled:r=!1,textValue:i,...a}=e,o=Fb(um,s),c=iT(s),d=j.useRef(null),f=ft(t,d),[m,h]=j.useState(!1),[u,p]=j.useState("");return j.useEffect(()=>{const x=d.current;x&&p((x.textContent??"").trim())},[a.children]),n.jsx(Ru.ItemSlot,{scope:s,disabled:r,textValue:i??u,children:n.jsx(Lb,{asChild:!0,...c,focusable:!r,children:n.jsx(Xe.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:f,onPointerMove:Me(e.onPointerMove,Lu(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Me(e.onPointerLeave,Lu(x=>o.onItemLeave(x))),onFocus:Me(e.onFocus,()=>h(!0)),onBlur:Me(e.onBlur,()=>h(!1))})})})}),S9="MenuCheckboxItem",hT=j.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:r,...i}=e;return n.jsx(vT,{scope:e.__scopeMenu,checked:s,children:n.jsx(Np,{role:"menuitemcheckbox","aria-checked":hm(s)?"mixed":s,...i,ref:t,"data-state":Vb(s),onSelect:Me(i.onSelect,()=>r==null?void 0:r(hm(s)?!0:!s),{checkForDefaultPrevented:!1})})})});hT.displayName=S9;var fT="MenuRadioGroup",[k9,C9]=nl(fT,{value:void 0,onValueChange:()=>{}}),mT=j.forwardRef((e,t)=>{const{value:s,onValueChange:r,...i}=e,a=vn(r);return n.jsx(k9,{scope:e.__scopeMenu,value:s,onValueChange:a,children:n.jsx(zb,{...i,ref:t})})});mT.displayName=fT;var pT="MenuRadioItem",gT=j.forwardRef((e,t)=>{const{value:s,...r}=e,i=C9(pT,e.__scopeMenu),a=s===i.value;return n.jsx(vT,{scope:e.__scopeMenu,checked:a,children:n.jsx(Np,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Vb(a),onSelect:Me(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,s)},{checkForDefaultPrevented:!1})})})});gT.displayName=pT;var Bb="MenuItemIndicator",[vT,P9]=nl(Bb,{checked:!1}),xT=j.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:r,...i}=e,a=P9(Bb,s);return n.jsx(Jn,{present:r||hm(a.checked)||a.checked===!0,children:n.jsx(Xe.span,{...i,ref:t,"data-state":Vb(a.checked)})})});xT.displayName=Bb;var E9="MenuSeparator",yT=j.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(Xe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});yT.displayName=E9;var T9="MenuArrow",bT=j.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e,i=_p(s);return n.jsx(Nb,{...i,...r,ref:t})});bT.displayName=T9;var A9="MenuSub",[Zse,wT]=nl(A9),Md="MenuSubTrigger",jT=j.forwardRef((e,t)=>{const s=sl(Md,e.__scopeMenu),r=rh(Md,e.__scopeMenu),i=wT(Md,e.__scopeMenu),a=Fb(Md,e.__scopeMenu),o=j.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=a,f={__scopeMenu:e.__scopeMenu},m=j.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return j.useEffect(()=>m,[m]),j.useEffect(()=>{const h=c.current;return()=>{window.clearTimeout(h),d(null)}},[c,d]),n.jsx(Ib,{asChild:!0,...f,children:n.jsx(uT,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":i.contentId,"data-state":ST(s.open),...e,ref:tp(t,i.onTriggerChange),onClick:h=>{var u;(u=e.onClick)==null||u.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:Me(e.onPointerMove,Lu(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!s.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),m()},100))})),onPointerLeave:Me(e.onPointerLeave,Lu(h=>{var p,x;m();const u=(p=s.content)==null?void 0:p.getBoundingClientRect();if(u){const v=(x=s.content)==null?void 0:x.dataset.side,w=v==="right",y=w?-5:5,b=u[w?"left":"right"],_=u[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:b,y:u.top},{x:_,y:u.top},{x:_,y:u.bottom},{x:b,y:u.bottom}],side:v}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Me(e.onKeyDown,h=>{var p;const u=a.searchRef.current!=="";e.disabled||u&&h.key===" "||u9[r.dir].includes(h.key)&&(s.onOpenChange(!0),(p=s.content)==null||p.focus(),h.preventDefault())})})})});jT.displayName=Md;var _T="MenuSubContent",NT=j.forwardRef((e,t)=>{const s=oT(ur,e.__scopeMenu),{forceMount:r=s.forceMount,...i}=e,a=sl(ur,e.__scopeMenu),o=rh(ur,e.__scopeMenu),c=wT(_T,e.__scopeMenu),d=j.useRef(null),f=ft(t,d);return n.jsx(Ru.Provider,{scope:e.__scopeMenu,children:n.jsx(Jn,{present:r||a.open,children:n.jsx(Ru.Slot,{scope:e.__scopeMenu,children:n.jsx($b,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:f,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var h;o.isUsingKeyboardRef.current&&((h=d.current)==null||h.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Me(e.onFocusOutside,m=>{m.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Me(e.onEscapeKeyDown,m=>{o.onClose(),m.preventDefault()}),onKeyDown:Me(e.onKeyDown,m=>{var p;const h=m.currentTarget.contains(m.target),u=h9[o.dir].includes(m.key);h&&u&&(a.onOpenChange(!1),(p=c.trigger)==null||p.focus(),m.preventDefault())})})})})})});NT.displayName=_T;function ST(e){return e?"open":"closed"}function hm(e){return e==="indeterminate"}function Vb(e){return hm(e)?"indeterminate":e?"checked":"unchecked"}function O9(e){const t=document.activeElement;for(const s of e)if(s===t||(s.focus(),document.activeElement!==t))return}function R9(e,t){return e.map((s,r)=>e[(t+r)%e.length])}function L9(e,t,s){const i=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let o=R9(e,Math.max(a,0));i.length===1&&(o=o.filter(f=>f!==s));const d=o.find(f=>f.toLowerCase().startsWith(i.toLowerCase()));return d!==s?d:void 0}function M9(e,t){const{x:s,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const c=t[a],d=t[o],f=c.x,m=c.y,h=d.x,u=d.y;m>r!=u>r&&s<(h-f)*(r-m)/(u-m)+f&&(i=!i)}return i}function I9(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return M9(s,t)}function Lu(e){return t=>t.pointerType==="mouse"?e(t):void 0}var D9=aT,F9=Ib,$9=lT,z9=cT,B9=zb,V9=dT,U9=Np,q9=hT,H9=mT,W9=gT,Z9=xT,G9=yT,K9=bT,Y9=jT,X9=NT,Sp="DropdownMenu",[Q9,Gse]=ds(Sp,[rT]),Ss=rT(),[J9,kT]=Q9(Sp),CT=e=>{const{__scopeDropdownMenu:t,children:s,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:c=!0}=e,d=Ss(t),f=j.useRef(null),[m,h]=Br({prop:i,defaultProp:a??!1,onChange:o,caller:Sp});return n.jsx(J9,{scope:t,triggerId:$r(),triggerRef:f,contentId:$r(),open:m,onOpenChange:h,onOpenToggle:j.useCallback(()=>h(u=>!u),[h]),modal:c,children:n.jsx(D9,{...d,open:m,onOpenChange:h,dir:r,modal:c,children:s})})};CT.displayName=Sp;var PT="DropdownMenuTrigger",ET=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:r=!1,...i}=e,a=kT(PT,s),o=Ss(s);return n.jsx(F9,{asChild:!0,...o,children:n.jsx(Xe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:tp(t,a.triggerRef),onPointerDown:Me(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Me(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});ET.displayName=PT;var e7="DropdownMenuPortal",TT=e=>{const{__scopeDropdownMenu:t,...s}=e,r=Ss(t);return n.jsx($9,{...r,...s})};TT.displayName=e7;var AT="DropdownMenuContent",OT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=kT(AT,s),a=Ss(s),o=j.useRef(!1);return n.jsx(z9,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:Me(e.onCloseAutoFocus,c=>{var d;o.current||(d=i.triggerRef.current)==null||d.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:Me(e.onInteractOutside,c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,m=d.button===2||f;(!i.modal||m)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});OT.displayName=AT;var t7="DropdownMenuGroup",n7=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(B9,{...i,...r,ref:t})});n7.displayName=t7;var s7="DropdownMenuLabel",RT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(V9,{...i,...r,ref:t})});RT.displayName=s7;var r7="DropdownMenuItem",LT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(U9,{...i,...r,ref:t})});LT.displayName=r7;var i7="DropdownMenuCheckboxItem",MT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(q9,{...i,...r,ref:t})});MT.displayName=i7;var a7="DropdownMenuRadioGroup",o7=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(H9,{...i,...r,ref:t})});o7.displayName=a7;var l7="DropdownMenuRadioItem",IT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(W9,{...i,...r,ref:t})});IT.displayName=l7;var c7="DropdownMenuItemIndicator",DT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(Z9,{...i,...r,ref:t})});DT.displayName=c7;var d7="DropdownMenuSeparator",FT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(G9,{...i,...r,ref:t})});FT.displayName=d7;var u7="DropdownMenuArrow",h7=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(K9,{...i,...r,ref:t})});h7.displayName=u7;var f7="DropdownMenuSubTrigger",$T=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(Y9,{...i,...r,ref:t})});$T.displayName=f7;var m7="DropdownMenuSubContent",zT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ss(s);return n.jsx(X9,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zT.displayName=m7;var p7=CT,g7=ET,v7=TT,BT=OT,VT=RT,UT=LT,qT=MT,HT=IT,WT=DT,ZT=FT,GT=$T,KT=zT;const bc=p7,wc=g7,x7=j.forwardRef(({className:e,inset:t,children:s,...r},i)=>n.jsxs(GT,{ref:i,className:Ze("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[s,n.jsx(pc,{className:"ml-auto h-4 w-4"})]}));x7.displayName=GT.displayName;const y7=j.forwardRef(({className:e,...t},s)=>n.jsx(KT,{ref:s,className:Ze("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));y7.displayName=KT.displayName;const Go=j.forwardRef(({className:e,sideOffset:t=4,...s},r)=>n.jsx(v7,{children:n.jsx(BT,{ref:r,sideOffset:t,className:Ze("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Go.displayName=BT.displayName;const po=j.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(UT,{ref:r,className:Ze("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));po.displayName=UT.displayName;const b7=j.forwardRef(({className:e,children:t,checked:s,...r},i)=>n.jsxs(qT,{ref:i,className:Ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(WT,{children:n.jsx(ip,{className:"h-4 w-4"})})}),t]}));b7.displayName=qT.displayName;const w7=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(HT,{ref:r,className:Ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(WT,{children:n.jsx(SP,{className:"h-2 w-2 fill-current"})})}),t]}));w7.displayName=HT.displayName;const j7=j.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(VT,{ref:r,className:Ze("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));j7.displayName=VT.displayName;const _7=j.forwardRef(({className:e,...t},s)=>n.jsx(ZT,{ref:s,className:Ze("-mx-1 my-1 h-px bg-muted",e),...t}));_7.displayName=ZT.displayName;var YT={exports:{}},XT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jc=j;function N7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var S7=typeof Object.is=="function"?Object.is:N7,k7=jc.useState,C7=jc.useEffect,P7=jc.useLayoutEffect,E7=jc.useDebugValue;function T7(e,t){var s=t(),r=k7({inst:{value:s,getSnapshot:t}}),i=r[0].inst,a=r[1];return P7(function(){i.value=s,i.getSnapshot=t,vv(i)&&a({inst:i})},[e,s,t]),C7(function(){return vv(i)&&a({inst:i}),e(function(){vv(i)&&a({inst:i})})},[e]),E7(s),s}function vv(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!S7(e,s)}catch{return!0}}function A7(e,t){return t()}var O7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?A7:T7;XT.useSyncExternalStore=jc.useSyncExternalStore!==void 0?jc.useSyncExternalStore:O7;YT.exports=XT;var R7=YT.exports;function L7(){return R7.useSyncExternalStore(M7,()=>!0,()=>!1)}function M7(){return()=>{}}var Ub="Avatar",[I7,Kse]=ds(Ub),[D7,QT]=I7(Ub),JT=j.forwardRef((e,t)=>{const{__scopeAvatar:s,...r}=e,[i,a]=j.useState("idle");return n.jsx(D7,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:n.jsx(Xe.span,{...r,ref:t})})});JT.displayName=Ub;var eA="AvatarImage",tA=j.forwardRef((e,t)=>{const{__scopeAvatar:s,src:r,onLoadingStatusChange:i=()=>{},...a}=e,o=QT(eA,s),c=F7(r,a),d=vn(f=>{i(f),o.onImageLoadingStatusChange(f)});return kn(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?n.jsx(Xe.img,{...a,ref:t,src:r}):null});tA.displayName=eA;var nA="AvatarFallback",sA=j.forwardRef((e,t)=>{const{__scopeAvatar:s,delayMs:r,...i}=e,a=QT(nA,s),[o,c]=j.useState(r===void 0);return j.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),o&&a.imageLoadingStatus!=="loaded"?n.jsx(Xe.span,{...i,ref:t}):null});sA.displayName=nA;function oN(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function F7(e,{referrerPolicy:t,crossOrigin:s}){const r=L7(),i=j.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,c]=j.useState(()=>oN(a,e));return kn(()=>{c(oN(a,e))},[a,e]),kn(()=>{const d=h=>()=>{c(h)};if(!a)return;const f=d("loaded"),m=d("error");return a.addEventListener("load",f),a.addEventListener("error",m),t&&(a.referrerPolicy=t),typeof s=="string"&&(a.crossOrigin=s),()=>{a.removeEventListener("load",f),a.removeEventListener("error",m)}},[a,s,t]),o}var rA=JT,iA=tA,aA=sA;const ta=j.forwardRef(({className:e,...t},s)=>n.jsx(rA,{ref:s,className:Ze("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ta.displayName=rA.displayName;const Ir=j.forwardRef(({className:e,...t},s)=>n.jsx(iA,{ref:s,className:Ze("aspect-square h-full w-full",e),...t}));Ir.displayName=iA.displayName;const na=j.forwardRef(({className:e,...t},s)=>n.jsx(aA,{ref:s,className:Ze("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));na.displayName=aA.displayName;function $7(){nt();const{navigateWithAuth:e}=Vc(),[t,s]=j.useState({city:"Getting location...",area:"Please wait"}),[r,i]=j.useState([]),[a,o]=j.useState(0),{notifications:c,unreadCount:d,markAsRead:f,markAllAsRead:m}=iB();j.useEffect(()=>{const x=async()=>{if(await ke.isAuthenticated()){h();const w=setInterval(h,5e3);return()=>clearInterval(w)}};p(),x()},[]);const h=async()=>{var x,v;try{if(!await ke.getToken())return;const y=await Hs.getConversations(),b=Array.isArray(y)?y:(y==null?void 0:y.results)||[];r.length>0&&b.forEach(N=>{var I,C;const k=r.find(T=>T.id===N.id);k&&N.unread_count>k.unread_count&&u(`New message from ${(I=N.other_participant)==null?void 0:I.username}`,((C=N.last_message)==null?void 0:C.content)||"New message received")}),i(b);const _=b.reduce((N,k)=>N+(k.unread_count||0),0);o(_)}catch(w){(x=w.message)!=null&&x.includes("401")||(v=w.message)!=null&&v.includes("Unauthorized")?(i([]),o(0)):console.error("Failed to load conversations:",w)}},u=(x,v)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(x,{body:v,icon:"/favicon.ico"})},p=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async x=>{const{latitude:v,longitude:w}=x.coords;try{const b=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${v}&lon=${w}&addressdetails=1`)).json();if(b.address){const _=b.address.road||b.address.neighbourhood,N=b.address.neighbourhood||b.address.suburb||b.address.city||b.address.town||b.address.village||b.address.county;s({city:_||N||"Unknown City",area:`${b.address.neighbourhood||b.address.suburb||b.address.city||b.address.town||b.address.state||""}${b.address.city_district?`, ${b.address.city_district}`:""}`})}else s({city:"Location found",area:`${v.toFixed(4)}, ${w.toFixed(4)}`})}catch{s({city:"Location unavailable",area:"Service error"})}},x=>{s({city:"Location denied",area:"Enable location access"})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):s({city:"Location not supported",area:"Browser not compatible"})};return n.jsxs("div",{className:"sticky top-0 z-50 flex items-center justify-between px-3 py-2 md:py-1 bg-card/95 backdrop-blur-sm border-b border-border/30 min-h-[60px] md:min-h-[50px]",children:[n.jsx("div",{className:"flex items-center",children:n.jsx("img",{src:ea,alt:"Ezeyway",className:"h-20 w-20 md:h-12 md:w-24 object-contain"})}),n.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer text-center",onClick:p,children:[n.jsx(Kt,{className:"h-3 w-3 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-foreground",children:t.city}),n.jsx("p",{className:"text-[10px] text-muted-foreground",children:t.area})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(bc,{children:[n.jsx(wc,{asChild:!0,children:n.jsxs("button",{className:"p-1.5 hover:bg-muted rounded-lg transition-smooth relative",children:[n.jsx(Ro,{className:"h-5 w-5 text-foreground"}),a>0&&n.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xs text-white font-bold",children:a>9?"9+":a})})]})}),n.jsxs(Go,{align:"end",className:"w-80",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h4",{className:"font-semibold",children:"Messages"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/messages"),className:"text-xs",children:"View all"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No messages"}):r.slice(0,5).map(x=>{var v,w,y,b,_,N;return n.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${x.unread_count>0?"bg-blue-50/50":""}`,onClick:()=>e("/messages"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(ta,{className:"h-8 w-8",children:[n.jsx(Ir,{src:(v=x.other_participant)==null?void 0:v.profile_picture}),n.jsx(na,{children:(y=(w=x.other_participant)==null?void 0:w.username)==null?void 0:y.charAt(0)})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:(b=x.other_participant)==null?void 0:b.username}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((_=x.last_message)==null?void 0:_.content)||((N=x.last_message)==null?void 0:N.file_name)||"No messages"})]}),x.unread_count>0&&n.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xs text-white font-bold",children:x.unread_count})})]})},x.id)})})]})]}),n.jsxs(bc,{children:[n.jsx(wc,{asChild:!0,children:n.jsxs("button",{className:"relative p-1.5 hover:bg-muted rounded-lg transition-smooth",children:[n.jsx(lr,{className:"h-5 w-5 text-foreground"}),d>0&&n.jsx(De,{className:"absolute -top-0.5 -right-0.5 h-4 w-4 rounded-full p-0 text-[10px] flex items-center justify-center min-w-[16px] bg-destructive text-destructive-foreground",children:d>9?"9+":d})]})}),n.jsxs(Go,{align:"end",className:"w-80",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h4",{className:"font-semibold",children:"Notifications"}),n.jsxs("div",{className:"flex gap-2",children:[d>0&&n.jsx(ne,{variant:"ghost",size:"sm",onClick:m,className:"text-xs",children:"Mark all read"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/notifications"),className:"text-xs",children:"View all"})]})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:c.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):c.slice(0,5).map(x=>n.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${x.read?"":"bg-blue-50/50"}`,onClick:()=>{f(x.id),x.action_url&&e(x.action_url)},children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${x.read?"bg-transparent":"bg-blue-500"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm font-medium ${x.read?"text-gray-700":"text-gray-900"}`,children:x.title}),n.jsx("p",{className:`text-sm ${x.read?"text-gray-600":"text-gray-700"}`,children:x.message}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(x.created_at).toLocaleString()})]}),n.jsx(De,{variant:"outline",className:`text-xs ${x.type==="order"?"border-green-200 text-green-700":x.type==="payment"?"border-blue-200 text-blue-700":x.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:x.type})]})},x.id))})]})]})]})]})}const z7=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function B7(){const[e,t]=j.useState(""),[s,r]=j.useState([]),[i,a]=j.useState(!1),[o,c]=j.useState(!1),d=nt();hn();const f=j.useRef(null),m=j.useRef(null);j.useEffect(()=>{const y=b=>{f.current&&!f.current.contains(b.target)&&m.current&&!m.current.contains(b.target)&&a(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),j.useEffect(()=>{e.trim().length>1?h(e.trim()):(r([]),a(!1))},[e]);const h=async y=>{c(!0);try{const b=await ke.getToken(),_=b?{Authorization:`Token ${b}`}:{},N=xt.getLocation(),k=new URLSearchParams({search:y,page_size:"5"});N&&(k.append("latitude",N.latitude.toString()),k.append("longitude",N.longitude.toString()));const C=await(await fetch(`${rt}search/products/?${k}`,{headers:_})).json(),T=u(C.results||[]);r(T),a(!0)}catch(b){console.error("Search error:",b)}finally{c(!1)}},u=y=>{const b=xt.getLocation();return y.map(_=>{var I,C;const N=((I=_.images)==null?void 0:I.find(T=>T.is_primary))||((C=_.images)==null?void 0:C[0]);let k="N/A";return b&&_.vendor_latitude&&_.vendor_longitude&&(k=`${z7(b.latitude,b.longitude,_.vendor_latitude,_.vendor_longitude).toFixed(1)} km`),{id:_.id,name:_.name,vendor:_.vendor_name||"Unknown Vendor",price:`${_.price}`,image:(N==null?void 0:N.image_url)||"/placeholder-product.jpg",distance:k,category:_.category}})},p=y=>{y.preventDefault(),e.trim()&&(d(`/search?q=${encodeURIComponent(e.trim())}`),a(!1))},x=y=>{t(y.target.value)},v=y=>{d(`/product/${y}`),a(!1),t("")},w=()=>{e.trim()&&(d(`/search?q=${encodeURIComponent(e.trim())}`),a(!1))};return n.jsxs("div",{className:"px-3 py-2 bg-background relative",children:[n.jsx("form",{onSubmit:p,className:"flex gap-2",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Lo,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx("input",{ref:m,type:"text",placeholder:"Search products, vendors...",value:e,onChange:x,className:"w-full pl-9 pr-3 py-2.5 bg-muted/50 border border-border/50 rounded-lg text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth"})]})}),i&&n.jsx("div",{ref:f,className:"absolute top-full left-3 right-3 mt-1 bg-white border border-border rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",children:o?n.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Searching..."}):s.length>0?n.jsxs(n.Fragment,{children:[s.map(y=>n.jsxs("div",{onClick:()=>v(y.id),className:"flex items-center gap-3 p-3 hover:bg-muted/50 cursor-pointer border-b border-border/50 last:border-b-0",children:[n.jsx("img",{src:y.image,alt:y.name,className:"w-10 h-10 object-cover rounded",onError:b=>{b.target.src="/placeholder-product.jpg"}}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-sm truncate",children:y.name}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.vendor}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"text-xs font-medium text-primary",children:y.price}),n.jsx("span",{className:"text-xs text-muted-foreground",children:y.distance})]})]})]},y.id)),n.jsx("div",{className:"p-3 border-t border-border",children:n.jsxs("button",{onClick:w,className:"w-full text-center text-sm text-primary hover:text-primary/80 font-medium",children:['View all results for "',e,'"']})})]}):e.trim().length>1?n.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:['No results found for "',e,'"']}):null})]})}const lN={Electronics:"",Fashion:"",Food:"",Home:"",Books:"",Sports:"",Beauty:"",Toys:"",Jewelry:"",Furniture:"",Automotive:"",Health:"","Pet Supplies":"",Stationery:"",Garden:"",Kids:"",Appliances:"",Hardware:"",Crafts:"",Travel:"",Grocery:"",Vegetables:"",Fruits:"",Dairy:"",Meat:"",Bakery:"",Beverages:"",Snacks:"",Organic:""};function V7(){const[e,t]=j.useState([]),[s,r]=j.useState(!0),i=nt();return j.useEffect(()=>{(async()=>{try{const o=await fetch(rt+"categories/");if(!o.ok)throw new Error(`HTTP ${o.status}`);const c=await o.json();if(c.categories){const d=c.categories.map((f,m)=>({id:f.id||m+1,name:f.name,icon:f.icon_url||lN[f.name]||"",hasImage:!!f.icon_url}));t(d)}else t([])}catch(o){console.error("Error fetching categories:",o),t([])}finally{r(!1)}})()},[]),s?n.jsx("div",{className:"px-2 py-2 bg-gray-50",children:n.jsx("div",{className:"flex gap-3 overflow-x-auto",children:[...Array(6)].map((a,o)=>n.jsx("div",{className:"flex-none w-16",children:n.jsxs("div",{className:"w-full p-1 rounded-xl bg-gray-200 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-300 rounded mb-1"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded"})]})},o))})}):e.length===0?n.jsx("div",{className:"px-2 py-2 bg-gray-50",children:n.jsx("div",{className:"text-center text-gray-500 text-sm py-4",children:"No categories available"})}):n.jsx("div",{className:"px-2 py-2 bg-gray-50",children:n.jsx("div",{className:"flex gap-3 overflow-x-auto overflow-y-hidden pb-2",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:e.map(a=>n.jsxs("button",{className:"flex-none px-3 py-1 rounded-xl font-medium text-center transition-all duration-200 bg-white text-gray-800 hover:bg-gray-100 active:scale-95 focus:outline-none min-w-16 touch-manipulation",onClick:()=>i(`/category/${encodeURIComponent(a.name)}`),children:[n.jsxs("div",{className:"mb-1 flex items-center justify-center h-8",children:[a.hasImage?n.jsx("img",{src:a.icon,alt:a.name,className:"w-8 h-8 object-contain",onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="block"}}):n.jsx("div",{className:"text-2xl",children:a.icon}),a.hasImage&&n.jsx("div",{className:"text-2xl",style:{display:"none"},children:lN[a.name]||""})]}),n.jsx("div",{className:"text-xs font-semibold whitespace-nowrap",children:a.name})]},a.id))})})}const U7="/assets/banner-grocery.jpg",q7="/assets/banner-electronics.jpg",H7="/assets/banner-food.jpg",W7=[{id:1,image:U7,title:"Fresh Groceries",subtitle:"Same day delivery"},{id:2,image:q7,title:"Electronics & Gadgets",subtitle:"Best prices guaranteed"},{id:3,image:H7,title:"Traditional Food",subtitle:"Authentic Nepali cuisine"}];function Z7(){const[e,t]=j.useState(1),[s,r]=j.useState(!1),[i,a]=j.useState(0),[o,c]=j.useState(0),[d,f]=j.useState([]),[m,h]=j.useState(!0),[u,p]=j.useState(!0),x=j.useRef(null),v=d.length>0?d.map(I=>({id:I.id,image:I.image_url,title:I.title,subtitle:I.description||"",link_url:I.link_url})):W7,w=v.length>0?[v[v.length-1],...v,v[0]]:[],y=I=>{r(!0),a(I.touches[0].clientX),c(I.touches[0].clientX)},b=I=>{s&&c(I.touches[0].clientX)},_=()=>{if(!s)return;const I=i-o;Math.abs(I)>50&&(I>0&&e<v.length?t(T=>T+1):I<0&&e>1&&t(T=>T-1)),r(!1),c(0)},N=I=>{I.link_url&&window.open(I.link_url,"_blank")};j.useEffect(()=>{if(v.length>0){const I=setInterval(()=>{t(C=>C+1)},4e3);return()=>clearInterval(I)}},[v.length]),j.useEffect(()=>{v.length>0&&(e===w.length-1?setTimeout(()=>{p(!1),t(1),setTimeout(()=>p(!0),50)},500):e===0&&setTimeout(()=>{p(!1),t(v.length),setTimeout(()=>p(!0),50)},500))},[e,v.length]),j.useEffect(()=>{(async()=>{try{const{API_BASE:C}=await We(async()=>{const{API_BASE:P}=await Promise.resolve().then(()=>Fz);return{API_BASE:P}},void 0),T=await fetch(C+"sliders/?user_type=customer"),M=await T.json();T.ok&&M&&M.sliders?(f(M.sliders),t(1)):f([])}catch(C){console.error("Error fetching sliders:",C),f([])}finally{h(!1)}})()},[]);const k=()=>{var C;if(window.innerWidth<768){if(s){const T=o-i,M=100,P=T/(((C=x.current)==null?void 0:C.offsetWidth)||1)*100,E=Math.max(-M,Math.min(M,P));return`translateX(calc(-${e*100}% + ${E}px))`}return`translateX(-${e*100}%)`}else return`translateX(calc(-${e*50}% + 25%))`};return m?n.jsx("div",{className:"mb-6",children:n.jsx("div",{className:"relative overflow-hidden rounded-2xl shadow-brand h-48 bg-gray-100 flex items-center justify-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[n.jsx(qn,{className:"h-5 w-5 animate-spin"}),n.jsx("span",{children:"Loading banners..."})]})})}):n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative md:overflow-visible overflow-hidden md:px-8",children:[n.jsx("div",{ref:x,className:`flex ${u?"transition-transform duration-500 ease-in-out":""}`,style:{transform:k()},onTouchStart:y,onTouchMove:b,onTouchEnd:_,children:(w.length>0?w:v).map((I,C)=>{const T=window.innerWidth<768,M=!T&&C===e;return n.jsx("div",{className:`flex-shrink-0 relative cursor-pointer transition-all duration-300 ${T?"w-full rounded-2xl shadow-brand overflow-hidden":`${M?"scale-100 opacity-100 z-10":"scale-75 opacity-60 z-0"} rounded-lg overflow-hidden`}`,style:T?{}:{width:"50%"},onClick:()=>N(I),children:n.jsx("img",{src:I.image,alt:I.title,className:"w-full h-48 md:h-auto md:max-h-64 object-cover md:object-contain",onError:P=>{P.target.style.display="none",P.target.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}})},`${I.id}-${C}`)})}),v.length>1&&n.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-1",children:v.map((I,C)=>n.jsx("button",{onClick:()=>t(C+1),className:`w-2 h-2 rounded-full transition-colors ${C===(e-1+v.length)%v.length?"bg-blue-500":"bg-gray-300"}`},C))})]})})}const qb=j.createContext({});function Hb(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const Wb=typeof window<"u",oA=Wb?j.useLayoutEffect:j.useEffect,kp=j.createContext(null);function Zb(e,t){e.indexOf(t)===-1&&e.push(t)}function Gb(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const sa=(e,t,s)=>s>t?t:s<e?e:s;let fm=()=>{};const ra={},lA=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function cA(e){return typeof e=="object"&&e!==null}const dA=e=>/^0[^.\s]+$/u.test(e);function Kb(e){let t;return()=>(t===void 0&&(t=e()),t)}const hr=e=>e,G7=(e,t)=>s=>t(e(s)),ih=(...e)=>e.reduce(G7),Mu=(e,t,s)=>{const r=t-e;return r===0?1:(s-e)/r};class Yb{constructor(){this.subscriptions=[]}add(t){return Zb(this.subscriptions,t),()=>Gb(this.subscriptions,t)}notify(t,s,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,s,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fi=e=>e*1e3,mi=e=>e/1e3;function uA(e,t){return t?e*(1e3/t):0}const hA=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,K7=1e-7,Y7=12;function X7(e,t,s,r,i){let a,o,c=0;do o=t+(s-t)/2,a=hA(o,r,i)-e,a>0?s=o:t=o;while(Math.abs(a)>K7&&++c<Y7);return o}function ah(e,t,s,r){if(e===t&&s===r)return hr;const i=a=>X7(a,0,1,e,s);return a=>a===0||a===1?a:hA(i(a),t,r)}const fA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,mA=e=>t=>1-e(1-t),pA=ah(.33,1.53,.69,.99),Xb=mA(pA),gA=fA(Xb),vA=e=>(e*=2)<1?.5*Xb(e):.5*(2-Math.pow(2,-10*(e-1))),Qb=e=>1-Math.sin(Math.acos(e)),xA=mA(Qb),yA=fA(Qb),Q7=ah(.42,0,1,1),J7=ah(0,0,.58,1),bA=ah(.42,0,.58,1),eV=e=>Array.isArray(e)&&typeof e[0]!="number",wA=e=>Array.isArray(e)&&typeof e[0]=="number",cN={linear:hr,easeIn:Q7,easeInOut:bA,easeOut:J7,circIn:Qb,circInOut:yA,circOut:xA,backIn:Xb,backInOut:gA,backOut:pA,anticipate:vA},tV=e=>typeof e=="string",dN=e=>{if(wA(e)){fm(e.length===4);const[t,s,r,i]=e;return ah(t,s,r,i)}else if(tV(e))return fm(cN[e]!==void 0),cN[e];return e},nf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],uN={value:null,addProjectionMetrics:null};function nV(e,t){let s=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function f(h){o.has(h)&&(m.schedule(h),e()),d++,h(c)}const m={schedule:(h,u=!1,p=!1)=>{const v=p&&i?s:r;return u&&o.add(h),v.has(h)||v.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[s,r]=[r,s],s.forEach(f),t&&uN.value&&uN.value.frameloop[t].push(d),d=0,s.clear(),i=!1,a&&(a=!1,m.process(h))}};return m}const sV=40;function jA(e,t){let s=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,o=nf.reduce((_,N)=>(_[N]=nV(a,t?N:void 0),_),{}),{setup:c,read:d,resolveKeyframes:f,preUpdate:m,update:h,preRender:u,render:p,postRender:x}=o,v=()=>{const _=ra.useManualTiming?i.timestamp:performance.now();s=!1,ra.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,sV),1)),i.timestamp=_,i.isProcessing=!0,c.process(i),d.process(i),f.process(i),m.process(i),h.process(i),u.process(i),p.process(i),x.process(i),i.isProcessing=!1,s&&t&&(r=!1,e(v))},w=()=>{s=!0,r=!0,i.isProcessing||e(v)};return{schedule:nf.reduce((_,N)=>{const k=o[N];return _[N]=(I,C=!1,T=!1)=>(s||w(),k.schedule(I,C,T)),_},{}),cancel:_=>{for(let N=0;N<nf.length;N++)o[nf[N]].cancel(_)},state:i,steps:o}}const{schedule:nn,cancel:Za,state:Gn,steps:xv}=jA(typeof requestAnimationFrame<"u"?requestAnimationFrame:hr,!0);let Cf;function rV(){Cf=void 0}const Os={now:()=>(Cf===void 0&&Os.set(Gn.isProcessing||ra.useManualTiming?Gn.timestamp:performance.now()),Cf),set:e=>{Cf=e,queueMicrotask(rV)}},_A=e=>t=>typeof t=="string"&&t.startsWith(e),Jb=_A("--"),iV=_A("var(--"),ew=e=>iV(e)?aV.test(e.split("/*")[0].trim()):!1,aV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Hc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Iu={...Hc,transform:e=>sa(0,1,e)},sf={...Hc,default:1},Yd=e=>Math.round(e*1e5)/1e5,tw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oV(e){return e==null}const lV=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nw=(e,t)=>s=>!!(typeof s=="string"&&lV.test(s)&&s.startsWith(e)||t&&!oV(s)&&Object.prototype.hasOwnProperty.call(s,t)),NA=(e,t,s)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(tw);return{[e]:parseFloat(i),[t]:parseFloat(a),[s]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},cV=e=>sa(0,255,e),yv={...Hc,transform:e=>Math.round(cV(e))},jo={test:nw("rgb","red"),parse:NA("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:r=1})=>"rgba("+yv.transform(e)+", "+yv.transform(t)+", "+yv.transform(s)+", "+Yd(Iu.transform(r))+")"};function dV(e){let t="",s="",r="",i="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,s+=s,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Jx={test:nw("#"),parse:dV,transform:jo.transform},oh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),pa=oh("deg"),pi=oh("%"),ct=oh("px"),uV=oh("vh"),hV=oh("vw"),hN={...pi,parse:e=>pi.parse(e)/100,transform:e=>pi.transform(e*100)},Ll={test:nw("hsl","hue"),parse:NA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+pi.transform(Yd(t))+", "+pi.transform(Yd(s))+", "+Yd(Iu.transform(r))+")"},On={test:e=>jo.test(e)||Jx.test(e)||Ll.test(e),parse:e=>jo.test(e)?jo.parse(e):Ll.test(e)?Ll.parse(e):Jx.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?jo.transform(e):Ll.transform(e),getAnimatableNone:e=>{const t=On.parse(e);return t.alpha=0,On.transform(t)}},fV=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mV(e){var t,s;return isNaN(e)&&typeof e=="string"&&(((t=e.match(tw))==null?void 0:t.length)||0)+(((s=e.match(fV))==null?void 0:s.length)||0)>0}const SA="number",kA="color",pV="var",gV="var(",fN="${}",vV=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Du(e){const t=e.toString(),s=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=t.replace(vV,d=>(On.test(d)?(r.color.push(a),i.push(kA),s.push(On.parse(d))):d.startsWith(gV)?(r.var.push(a),i.push(pV),s.push(d)):(r.number.push(a),i.push(SA),s.push(parseFloat(d))),++a,fN)).split(fN);return{values:s,split:c,indexes:r,types:i}}function CA(e){return Du(e).values}function PA(e){const{split:t,types:s}=Du(e),r=t.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],i[o]!==void 0){const c=s[o];c===SA?a+=Yd(i[o]):c===kA?a+=On.transform(i[o]):a+=i[o]}return a}}const xV=e=>typeof e=="number"?0:On.test(e)?On.getAnimatableNone(e):e;function yV(e){const t=CA(e);return PA(e)(t.map(xV))}const Ga={test:mV,parse:CA,createTransformer:PA,getAnimatableNone:yV};function bv(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function bV({hue:e,saturation:t,lightness:s,alpha:r}){e/=360,t/=100,s/=100;let i=0,a=0,o=0;if(!t)i=a=o=s;else{const c=s<.5?s*(1+t):s+t-s*t,d=2*s-c;i=bv(d,c,e+1/3),a=bv(d,c,e),o=bv(d,c,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function mm(e,t){return s=>s>0?t:e}const ln=(e,t,s)=>e+(t-e)*s,wv=(e,t,s)=>{const r=e*e,i=s*(t*t-r)+r;return i<0?0:Math.sqrt(i)},wV=[Jx,jo,Ll],jV=e=>wV.find(t=>t.test(e));function mN(e){const t=jV(e);if(!t)return!1;let s=t.parse(e);return t===Ll&&(s=bV(s)),s}const pN=(e,t)=>{const s=mN(e),r=mN(t);if(!s||!r)return mm(e,t);const i={...s};return a=>(i.red=wv(s.red,r.red,a),i.green=wv(s.green,r.green,a),i.blue=wv(s.blue,r.blue,a),i.alpha=ln(s.alpha,r.alpha,a),jo.transform(i))},ey=new Set(["none","hidden"]);function _V(e,t){return ey.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function NV(e,t){return s=>ln(e,t,s)}function sw(e){return typeof e=="number"?NV:typeof e=="string"?ew(e)?mm:On.test(e)?pN:CV:Array.isArray(e)?EA:typeof e=="object"?On.test(e)?pN:SV:mm}function EA(e,t){const s=[...e],r=s.length,i=e.map((a,o)=>sw(a)(a,t[o]));return a=>{for(let o=0;o<r;o++)s[o]=i[o](a);return s}}function SV(e,t){const s={...e,...t},r={};for(const i in s)e[i]!==void 0&&t[i]!==void 0&&(r[i]=sw(e[i])(e[i],t[i]));return i=>{for(const a in r)s[a]=r[a](i);return s}}function kV(e,t){const s=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],o=e.indexes[a][r[a]],c=e.values[o]??0;s[i]=c,r[a]++}return s}const CV=(e,t)=>{const s=Ga.createTransformer(t),r=Du(e),i=Du(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ey.has(e)&&!i.values.length||ey.has(t)&&!r.values.length?_V(e,t):ih(EA(kV(r,i),i.values),s):mm(e,t)};function TA(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?ln(e,t,s):sw(e)(e,t)}const PV=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>nn.update(t,s),stop:()=>Za(t),now:()=>Gn.isProcessing?Gn.timestamp:Os.now()}},AA=(e,t,s=10)=>{let r="";const i=Math.max(Math.round(t/s),2);for(let a=0;a<i;a++)r+=Math.round(e(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},pm=2e4;function rw(e){let t=0;const s=50;let r=e.next(t);for(;!r.done&&t<pm;)t+=s,r=e.next(t);return t>=pm?1/0:t}function EV(e,t=100,s){const r=s({...e,keyframes:[0,t]}),i=Math.min(rw(r),pm);return{type:"keyframes",ease:a=>r.next(i*a).value/t,duration:mi(i)}}const TV=5;function OA(e,t,s){const r=Math.max(t-TV,0);return uA(s-e(r),t-r)}const mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jv=.001;function AV({duration:e=mn.duration,bounce:t=mn.bounce,velocity:s=mn.velocity,mass:r=mn.mass}){let i,a,o=1-t;o=sa(mn.minDamping,mn.maxDamping,o),e=sa(mn.minDuration,mn.maxDuration,mi(e)),o<1?(i=f=>{const m=f*o,h=m*e,u=m-s,p=ty(f,o),x=Math.exp(-h);return jv-u/p*x},a=f=>{const h=f*o*e,u=h*s+s,p=Math.pow(o,2)*Math.pow(f,2)*e,x=Math.exp(-h),v=ty(Math.pow(f,2),o);return(-i(f)+jv>0?-1:1)*((u-p)*x)/v}):(i=f=>{const m=Math.exp(-f*e),h=(f-s)*e+1;return-jv+m*h},a=f=>{const m=Math.exp(-f*e),h=(s-f)*(e*e);return m*h});const c=5/e,d=RV(i,a,c);if(e=fi(e),isNaN(d))return{stiffness:mn.stiffness,damping:mn.damping,duration:e};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:o*2*Math.sqrt(r*f),duration:e}}}const OV=12;function RV(e,t,s){let r=s;for(let i=1;i<OV;i++)r=r-e(r)/t(r);return r}function ty(e,t){return e*Math.sqrt(1-t*t)}const LV=["duration","bounce"],MV=["stiffness","damping","mass"];function gN(e,t){return t.some(s=>e[s]!==void 0)}function IV(e){let t={velocity:mn.velocity,stiffness:mn.stiffness,damping:mn.damping,mass:mn.mass,isResolvedFromDuration:!1,...e};if(!gN(e,MV)&&gN(e,LV))if(e.visualDuration){const s=e.visualDuration,r=2*Math.PI/(s*1.2),i=r*r,a=2*sa(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:mn.mass,stiffness:i,damping:a}}else{const s=AV(e);t={...t,...s,mass:mn.mass},t.isResolvedFromDuration=!0}return t}function gm(e=mn.visualDuration,t=mn.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=s;const a=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],c={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:h,velocity:u,isResolvedFromDuration:p}=IV({...s,velocity:-mi(s.velocity||0)}),x=u||0,v=f/(2*Math.sqrt(d*m)),w=o-a,y=mi(Math.sqrt(d/m)),b=Math.abs(w)<5;r||(r=b?mn.restSpeed.granular:mn.restSpeed.default),i||(i=b?mn.restDelta.granular:mn.restDelta.default);let _;if(v<1){const k=ty(y,v);_=I=>{const C=Math.exp(-v*y*I);return o-C*((x+v*y*w)/k*Math.sin(k*I)+w*Math.cos(k*I))}}else if(v===1)_=k=>o-Math.exp(-y*k)*(w+(x+y*w)*k);else{const k=y*Math.sqrt(v*v-1);_=I=>{const C=Math.exp(-v*y*I),T=Math.min(k*I,300);return o-C*((x+v*y*w)*Math.sinh(T)+k*w*Math.cosh(T))/k}}const N={calculatedDuration:p&&h||null,next:k=>{const I=_(k);if(p)c.done=k>=h;else{let C=k===0?x:0;v<1&&(C=k===0?fi(x):OA(_,k,I));const T=Math.abs(C)<=r,M=Math.abs(o-I)<=i;c.done=T&&M}return c.value=c.done?o:I,c},toString:()=>{const k=Math.min(rw(N),pm),I=AA(C=>N.next(k*C).value,k,30);return k+"ms "+I},toTransition:()=>{}};return N}gm.applyToOptions=e=>{const t=EV(e,100,gm);return e.ease=t.ease,e.duration=fi(t.duration),e.type="keyframes",e};function ny({keyframes:e,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:d,restDelta:f=.5,restSpeed:m}){const h=e[0],u={done:!1,value:h},p=T=>c!==void 0&&T<c||d!==void 0&&T>d,x=T=>c===void 0?d:d===void 0||Math.abs(c-T)<Math.abs(d-T)?c:d;let v=s*t;const w=h+v,y=o===void 0?w:o(w);y!==w&&(v=y-h);const b=T=>-v*Math.exp(-T/r),_=T=>y+b(T),N=T=>{const M=b(T),P=_(T);u.done=Math.abs(M)<=f,u.value=u.done?y:P};let k,I;const C=T=>{p(u.value)&&(k=T,I=gm({keyframes:[u.value,x(u.value)],velocity:OA(_,T,u.value),damping:i,stiffness:a,restDelta:f,restSpeed:m}))};return C(0),{calculatedDuration:null,next:T=>{let M=!1;return!I&&k===void 0&&(M=!0,N(T),C(T)),k!==void 0&&T>=k?I.next(T-k):(!M&&N(T),u)}}}function DV(e,t,s){const r=[],i=s||ra.mix||TA,a=e.length-1;for(let o=0;o<a;o++){let c=i(e[o],e[o+1]);if(t){const d=Array.isArray(t)?t[o]||hr:t;c=ih(d,c)}r.push(c)}return r}function FV(e,t,{clamp:s=!0,ease:r,mixer:i}={}){const a=e.length;if(fm(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=DV(t,r,i),d=c.length,f=m=>{if(o&&m<e[0])return t[0];let h=0;if(d>1)for(;h<e.length-2&&!(m<e[h+1]);h++);const u=Mu(e[h],e[h+1],m);return c[h](u)};return s?m=>f(sa(e[0],e[a-1],m)):f}function $V(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const i=Mu(0,t,r);e.push(ln(s,1,i))}}function zV(e){const t=[0];return $V(t,e.length-1),t}function BV(e,t){return e.map(s=>s*t)}function VV(e,t){return e.map(()=>t||bA).splice(0,e.length-1)}function Xd({duration:e=300,keyframes:t,times:s,ease:r="easeInOut"}){const i=eV(r)?r.map(dN):dN(r),a={done:!1,value:t[0]},o=BV(s&&s.length===t.length?s:zV(t),e),c=FV(o,t,{ease:Array.isArray(i)?i:VV(t,i)});return{calculatedDuration:e,next:d=>(a.value=c(d),a.done=d>=e,a)}}const UV=e=>e!==null;function iw(e,{repeat:t,repeatType:s="loop"},r,i=1){const a=e.filter(UV),c=i<0||t&&s!=="loop"&&t%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const qV={decay:ny,inertia:ny,tween:Xd,keyframes:Xd,spring:gm};function RA(e){typeof e.type=="string"&&(e.type=qV[e.type])}class aw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const HV=e=>e/100;class ow extends aw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:s}=this.options;s&&s.updatedAt!==Os.now()&&this.tick(Os.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;RA(t);const{type:s=Xd,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=t;let{keyframes:c}=t;const d=s||Xd;d!==Xd&&typeof c[0]!="number"&&(this.mixKeyframes=ih(HV,TA(c[0],c[1])),c=[0,100]);const f=d({...t,keyframes:c});a==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=rw(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:m,repeat:h,repeatType:u,repeatDelay:p,type:x,onUpdate:v,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const y=this.currentTime-f*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?y<0:y>i;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,N=r;if(h){const T=Math.min(this.currentTime,i)/c;let M=Math.floor(T),P=T%1;!P&&T>=1&&(P=1),P===1&&M--,M=Math.min(M,h+1),!!(M%2)&&(u==="reverse"?(P=1-P,p&&(P-=p/c)):u==="mirror"&&(N=o)),_=sa(0,1,P)*c}const k=b?{done:!1,value:m[0]}:N.next(_);a&&(k.value=a(k.value));let{done:I}=k;!b&&d!==null&&(I=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return C&&x!==ny&&(k.value=iw(m,this.options,w,this.speed)),v&&v(k.value),C&&this.finish(),k}then(t,s){return this.finished.then(t,s)}get duration(){return mi(this.calculatedDuration)}get time(){return mi(this.currentTime)}set time(t){var s;t=fi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Os.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=mi(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:t=PV,startTime:s}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Os.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(t=this.options).onComplete)==null||s.call(t)}cancel(){var t,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(t=this.options).onCancel)==null||s.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),t.observe(this)}}function WV(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const _o=e=>e*180/Math.PI,sy=e=>{const t=_o(Math.atan2(e[1],e[0]));return ry(t)},ZV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:sy,rotateZ:sy,skewX:e=>_o(Math.atan(e[1])),skewY:e=>_o(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ry=e=>(e=e%360,e<0&&(e+=360),e),vN=sy,xN=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),yN=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),GV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:xN,scaleY:yN,scale:e=>(xN(e)+yN(e))/2,rotateX:e=>ry(_o(Math.atan2(e[6],e[5]))),rotateY:e=>ry(_o(Math.atan2(-e[2],e[0]))),rotateZ:vN,rotate:vN,skewX:e=>_o(Math.atan(e[4])),skewY:e=>_o(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function iy(e){return e.includes("scale")?1:0}function ay(e,t){if(!e||e==="none")return iy(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(s)r=GV,i=s;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=ZV,i=c}if(!i)return iy(t);const a=r[t],o=i[1].split(",").map(YV);return typeof a=="function"?a(o):o[a]}const KV=(e,t)=>{const{transform:s="none"}=getComputedStyle(e);return ay(s,t)};function YV(e){return parseFloat(e.trim())}const Wc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zc=new Set(Wc),bN=e=>e===Hc||e===ct,XV=new Set(["x","y","z"]),QV=Wc.filter(e=>!XV.has(e));function JV(e){const t=[];return QV.forEach(s=>{const r=e.getValue(s);r!==void 0&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t}const Io={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ay(t,"x"),y:(e,{transform:t})=>ay(t,"y")};Io.translateX=Io.x;Io.translateY=Io.y;const Do=new Set;let oy=!1,ly=!1,cy=!1;function LA(){if(ly){const e=Array.from(Do).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),s=new Map;t.forEach(r=>{const i=JV(r);i.length&&(s.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=s.get(r);i&&i.forEach(([a,o])=>{var c;(c=r.getValue(a))==null||c.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ly=!1,oy=!1,Do.forEach(e=>e.complete(cy)),Do.clear()}function MA(){Do.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ly=!0)})}function eU(){cy=!0,MA(),LA(),cy=!1}class lw{constructor(t,s,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Do.add(this),oy||(oy=!0,nn.read(MA),nn.resolveKeyframes(LA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:r,motionValue:i}=this;if(t[0]===null){const a=i==null?void 0:i.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&s){const c=r.readValue(s,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}WV(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Do.delete(this)}cancel(){this.state==="scheduled"&&(Do.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const tU=e=>e.startsWith("--");function nU(e,t,s){tU(t)?e.style.setProperty(t,s):e.style[t]=s}const sU=Kb(()=>window.ScrollTimeline!==void 0),rU={};function iU(e,t){const s=Kb(e);return()=>rU[t]??s()}const IA=iU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Id=([e,t,s,r])=>`cubic-bezier(${e}, ${t}, ${s}, ${r})`,wN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Id([0,.65,.55,1]),circOut:Id([.55,0,1,.45]),backIn:Id([.31,.01,.66,-.59]),backOut:Id([.33,1.53,.69,.99])};function DA(e,t){if(e)return typeof e=="function"?IA()?AA(e,t):"ease-out":wA(e)?Id(e):Array.isArray(e)?e.map(s=>DA(s,t)||wN.easeOut):wN[e]}function aU(e,t,s,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:d}={},f=void 0){const m={[t]:s};d&&(m.offset=d);const h=DA(c,i);Array.isArray(h)&&(m.easing=h);const u={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return f&&(u.pseudoElement=f),e.animate(m,u)}function FA(e){return typeof e=="function"&&"applyToOptions"in e}function oU({type:e,...t}){return FA(e)&&IA()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class lU extends aw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=t,fm(typeof t.type!="string");const f=oU(t);this.animation=aU(s,r,i,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=iw(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):nU(s,r,m),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,s;(s=(t=this.animation).finish)==null||s.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,s;this.isPseudoElement||(s=(t=this.animation).commitStyles)==null||s.call(t)}get duration(){var s,r;const t=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return mi(Number(t))}get time(){return mi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=fi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&sU()?(this.animation.timeline=t,hr):s(this)}}const $A={anticipate:vA,backInOut:gA,circInOut:yA};function cU(e){return e in $A}function dU(e){typeof e.ease=="string"&&cU(e.ease)&&(e.ease=$A[e.ease])}const jN=10;class uU extends lU{constructor(t){dU(t),RA(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const c=new ow({...o,autoplay:!1}),d=fi(this.finishedTime??this.time);s.setWithVelocity(c.sample(d-jN).value,c.sample(d).value,jN),c.stop()}}const _N=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ga.test(e)||e==="0")&&!e.startsWith("url("));function hU(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function fU(e,t,s,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=_N(i,t),c=_N(a,t);return!o||!c?!1:hU(e)||(s==="spring"||FA(s))&&r}function dy(e){e.duration=0,e.type}const mU=new Set(["opacity","clipPath","filter","transform"]),pU=Kb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function gU(e){var m;const{motionValue:t,name:s,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!(((m=t==null?void 0:t.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=t.owner.getProps();return pU()&&s&&mU.has(s)&&(s!=="transform"||!f)&&!d&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const vU=40;class xU extends aw{constructor({autoplay:t=!0,delay:s=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:d,motionValue:f,element:m,...h}){var x;super(),this.stop=()=>{var v,w;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Os.now();const u={autoplay:t,delay:s,type:r,repeat:i,repeatDelay:a,repeatType:o,name:d,motionValue:f,element:m,...h},p=(m==null?void 0:m.KeyframeResolver)||lw;this.keyframeResolver=new p(c,(v,w,y)=>this.onKeyframesResolved(v,w,u,!y),d,f,m),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(t,s,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:d,isHandoff:f,onUpdate:m}=r;this.resolvedAt=Os.now(),fU(t,a,o,c)||((ra.instantAnimations||!d)&&(m==null||m(iw(t,r,s))),t[0]=t[t.length-1],dy(r),r.repeat=0);const u={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>vU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:t},p=!f&&gU(u)?new uU({...u,element:u.motionValue.owner.current}):new ow(u);p.finished.then(()=>this.notifyFinished()).catch(hr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),eU()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const yU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bU(e){const t=yU.exec(e);if(!t)return[,];const[,s,r,i]=t;return[`--${s??r}`,i]}function zA(e,t,s=1){const[r,i]=bU(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const o=a.trim();return lA(o)?parseFloat(o):o}return ew(i)?zA(i,t,s+1):i}function cw(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const BA=new Set(["width","height","top","left","right","bottom",...Wc]),wU={test:e=>e==="auto",parse:e=>e},VA=e=>t=>t.test(e),UA=[Hc,ct,pi,pa,hV,uV,wU],NN=e=>UA.find(VA(e));function jU(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||dA(e):!0}const _U=new Set(["brightness","contrast","saturate","opacity"]);function NU(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=s.match(tw)||[];if(!r)return e;const i=s.replace(r,"");let a=_U.has(t)?1:0;return r!==s&&(a*=100),t+"("+a+i+")"}const SU=/\b([a-z-]*)\(.*?\)/gu,uy={...Ga,getAnimatableNone:e=>{const t=e.match(SU);return t?t.map(NU).join(" "):e}},SN={...Hc,transform:Math.round},kU={rotate:pa,rotateX:pa,rotateY:pa,rotateZ:pa,scale:sf,scaleX:sf,scaleY:sf,scaleZ:sf,skew:pa,skewX:pa,skewY:pa,distance:ct,translateX:ct,translateY:ct,translateZ:ct,x:ct,y:ct,z:ct,perspective:ct,transformPerspective:ct,opacity:Iu,originX:hN,originY:hN,originZ:ct},dw={borderWidth:ct,borderTopWidth:ct,borderRightWidth:ct,borderBottomWidth:ct,borderLeftWidth:ct,borderRadius:ct,radius:ct,borderTopLeftRadius:ct,borderTopRightRadius:ct,borderBottomRightRadius:ct,borderBottomLeftRadius:ct,width:ct,maxWidth:ct,height:ct,maxHeight:ct,top:ct,right:ct,bottom:ct,left:ct,padding:ct,paddingTop:ct,paddingRight:ct,paddingBottom:ct,paddingLeft:ct,margin:ct,marginTop:ct,marginRight:ct,marginBottom:ct,marginLeft:ct,backgroundPositionX:ct,backgroundPositionY:ct,...kU,zIndex:SN,fillOpacity:Iu,strokeOpacity:Iu,numOctaves:SN},CU={...dw,color:On,backgroundColor:On,outlineColor:On,fill:On,stroke:On,borderColor:On,borderTopColor:On,borderRightColor:On,borderBottomColor:On,borderLeftColor:On,filter:uy,WebkitFilter:uy},qA=e=>CU[e];function HA(e,t){let s=qA(e);return s!==uy&&(s=Ga),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const PU=new Set(["auto","none","0"]);function EU(e,t,s){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!PU.has(a)&&Du(a).values.length&&(i=e[r]),r++}if(i&&s)for(const a of t)e[a]=HA(s,i)}class TU extends lw{constructor(t,s,r,i,a){super(t,s,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),ew(f))){const m=zA(f,s.current);m!==void 0&&(t[d]=m),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!BA.has(r)||t.length!==2)return;const[i,a]=t,o=NN(i),c=NN(a);if(o!==c)if(bN(o)&&bN(c))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else Io[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||jU(t[i]))&&r.push(i);r.length&&EU(t,r,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Io[r](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var c;const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(s);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Io[s](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,f])=>{t.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function AU(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const i=document.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const WA=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function ZA(e){return cA(e)&&"offsetHeight"in e}const kN=30,OU=e=>!isNaN(parseFloat(e));class RU{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const i=Os.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=Os.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=OU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Yb);const r=this.events[t].add(s);return t==="change"?()=>{r(),nn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Os.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>kN)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,kN);return uA(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,s;(t=this.dependents)==null||t.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _c(e,t){return new RU(e,t)}const{schedule:uw,cancel:Yse}=jA(queueMicrotask,!1),_r={x:!1,y:!1};function GA(){return _r.x||_r.y}function LU(e){return e==="x"||e==="y"?_r[e]?null:(_r[e]=!0,()=>{_r[e]=!1}):_r.x||_r.y?null:(_r.x=_r.y=!0,()=>{_r.x=_r.y=!1})}function KA(e,t){const s=AU(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[s,i,()=>r.abort()]}function CN(e){return!(e.pointerType==="touch"||GA())}function MU(e,t,s={}){const[r,i,a]=KA(e,s),o=c=>{if(!CN(c))return;const{target:d}=c,f=t(d,c);if(typeof f!="function"||!d)return;const m=h=>{CN(h)&&(f(h),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const YA=(e,t)=>t?e===t?!0:YA(e,t.parentElement):!1,hw=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,IU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function DU(e){return IU.has(e.tagName)||e.tabIndex!==-1}const Pf=new WeakSet;function PN(e){return t=>{t.key==="Enter"&&e(t)}}function _v(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const FU=(e,t)=>{const s=e.currentTarget;if(!s)return;const r=PN(()=>{if(Pf.has(s))return;_v(s,"down");const i=PN(()=>{_v(s,"up")}),a=()=>_v(s,"cancel");s.addEventListener("keyup",i,t),s.addEventListener("blur",a,t)});s.addEventListener("keydown",r,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),t)};function EN(e){return hw(e)&&!GA()}function $U(e,t,s={}){const[r,i,a]=KA(e,s),o=c=>{const d=c.currentTarget;if(!EN(c))return;Pf.add(d);const f=t(d,c),m=(p,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",u),Pf.has(d)&&Pf.delete(d),EN(p)&&typeof f=="function"&&f(p,{success:x})},h=p=>{m(p,d===window||d===document||s.useGlobalTarget||YA(d,p.target))},u=p=>{m(p,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",u,i)};return r.forEach(c=>{(s.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),ZA(c)&&(c.addEventListener("focus",f=>FU(f,i)),!DU(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function XA(e){return cA(e)&&"ownerSVGElement"in e}function zU(e){return XA(e)&&e.tagName==="svg"}const is=e=>!!(e&&e.getVelocity),BU=[...UA,On,Ga],VU=e=>BU.find(VA(e)),fw=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class UU extends j.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const r=s.offsetParent,i=ZA(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=s.offsetHeight||0,a.width=s.offsetWidth||0,a.top=s.offsetTop,a.left=s.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function qU({children:e,isPresent:t,anchorX:s,root:r}){const i=j.useId(),a=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=j.useContext(fw);return j.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:h,right:u}=o.current;if(t||!a.current||!d||!f)return;const p=s==="left"?`left: ${h}`:`right: ${u}`;a.current.dataset.motionPopId=i;const x=document.createElement("style");c&&(x.nonce=c);const v=r??document.head;return v.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${p}px !important;
            top: ${m}px !important;
          }
        `),()=>{v.contains(x)&&v.removeChild(x)}},[t]),n.jsx(UU,{isPresent:t,childRef:a,sizeRef:o,children:j.cloneElement(e,{ref:a})})}const HU=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:d})=>{const f=Hb(WU),m=j.useId();let h=!0,u=j.useMemo(()=>(h=!1,{id:m,initial:t,isPresent:s,custom:i,onExitComplete:p=>{f.set(p,!0);for(const x of f.values())if(!x)return;r&&r()},register:p=>(f.set(p,!1),()=>f.delete(p))}),[s,f,r]);return a&&h&&(u={...u}),j.useMemo(()=>{f.forEach((p,x)=>f.set(x,!1))},[s]),j.useEffect(()=>{!s&&!f.size&&r&&r()},[s]),o==="popLayout"&&(e=n.jsx(qU,{isPresent:s,anchorX:c,root:d,children:e})),n.jsx(kp.Provider,{value:u,children:e})};function WU(){return new Map}function QA(e=!0){const t=j.useContext(kp);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:i}=t,a=j.useId();j.useEffect(()=>{if(e)return i(a)},[e]);const o=j.useCallback(()=>e&&r&&r(a),[a,r,e]);return!s&&r?[!1,o]:[!0]}const rf=e=>e.key||"";function TN(e){const t=[];return j.Children.forEach(e,s=>{j.isValidElement(s)&&t.push(s)}),t}const AN=({children:e,custom:t,initial:s=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:d})=>{const[f,m]=QA(o),h=j.useMemo(()=>TN(e),[e]),u=o&&!f?[]:h.map(rf),p=j.useRef(!0),x=j.useRef(h),v=Hb(()=>new Map),[w,y]=j.useState(h),[b,_]=j.useState(h);oA(()=>{p.current=!1,x.current=h;for(let I=0;I<b.length;I++){const C=rf(b[I]);u.includes(C)?v.delete(C):v.get(C)!==!0&&v.set(C,!1)}},[b,u.length,u.join("-")]);const N=[];if(h!==w){let I=[...h];for(let C=0;C<b.length;C++){const T=b[C],M=rf(T);u.includes(M)||(I.splice(C,0,T),N.push(T))}return a==="wait"&&N.length&&(I=N),_(TN(I)),y(h),null}const{forceRender:k}=j.useContext(qb);return n.jsx(n.Fragment,{children:b.map(I=>{const C=rf(I),T=o&&!f?!1:h===b||u.includes(C),M=()=>{if(v.has(C))v.set(C,!0);else return;let P=!0;v.forEach(E=>{E||(P=!1)}),P&&(k==null||k(),_(x.current),o&&(m==null||m()),r&&r())};return n.jsx(HU,{isPresent:T,initial:!p.current||s?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:d,onExitComplete:T?void 0:M,anchorX:c,children:I},C)})})},JA=j.createContext({strict:!1}),ON={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nc={};for(const e in ON)Nc[e]={isEnabled:t=>ON[e].some(s=>!!t[s])};function ZU(e){for(const t in e)Nc[t]={...Nc[t],...e[t]}}const GU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vm(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||GU.has(e)}let eO=e=>!vm(e);function KU(e){typeof e=="function"&&(eO=t=>t.startsWith("on")?!vm(t):e(t))}try{KU(require("@emotion/is-prop-valid").default)}catch{}function YU(e,t,s){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(eO(i)||s===!0&&vm(i)||!t&&!vm(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Cp=j.createContext({});function Pp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Fu(e){return typeof e=="string"||Array.isArray(e)}const mw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pw=["initial",...mw];function Ep(e){return Pp(e.animate)||pw.some(t=>Fu(e[t]))}function tO(e){return!!(Ep(e)||e.variants)}function XU(e,t){if(Ep(e)){const{initial:s,animate:r}=e;return{initial:s===!1||Fu(s)?s:void 0,animate:Fu(r)?r:void 0}}return e.inherit!==!1?t:{}}function QU(e){const{initial:t,animate:s}=XU(e,j.useContext(Cp));return j.useMemo(()=>({initial:t,animate:s}),[RN(t),RN(s)])}function RN(e){return Array.isArray(e)?e.join(" "):e}const $u={};function JU(e){for(const t in e)$u[t]=e[t],Jb(t)&&($u[t].isCSSVariable=!0)}function nO(e,{layout:t,layoutId:s}){return Zc.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!$u[e]||e==="opacity")}const eq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tq=Wc.length;function nq(e,t,s){let r="",i=!0;for(let a=0;a<tq;a++){const o=Wc[a],c=e[o];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(o.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||s){const f=WA(c,dw[o]);if(!d){i=!1;const m=eq[o]||o;r+=`${m}(${f}) `}s&&(t[o]=f)}}return r=r.trim(),s?r=s(t,i?"":r):i&&(r="none"),r}function gw(e,t,s){const{style:r,vars:i,transformOrigin:a}=e;let o=!1,c=!1;for(const d in t){const f=t[d];if(Zc.has(d)){o=!0;continue}else if(Jb(d)){i[d]=f;continue}else{const m=WA(f,dw[d]);d.startsWith("origin")?(c=!0,a[d]=m):r[d]=m}}if(t.transform||(o||s?r.transform=nq(t,e.transform,s):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${f} ${m}`}}const vw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function sO(e,t,s){for(const r in t)!is(t[r])&&!nO(r,s)&&(e[r]=t[r])}function sq({transformTemplate:e},t){return j.useMemo(()=>{const s=vw();return gw(s,t,e),Object.assign({},s.vars,s.style)},[t])}function rq(e,t){const s=e.style||{},r={};return sO(r,s,e),Object.assign(r,sq(e,t)),r}function iq(e,t){const s={},r=rq(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const aq={offset:"stroke-dashoffset",array:"stroke-dasharray"},oq={offset:"strokeDashoffset",array:"strokeDasharray"};function lq(e,t,s=1,r=0,i=!0){e.pathLength=1;const a=i?aq:oq;e[a.offset]=ct.transform(-r);const o=ct.transform(t),c=ct.transform(s);e[a.array]=`${o} ${c}`}function rO(e,{attrX:t,attrY:s,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},d,f,m){if(gw(e,c,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:u}=e;h.transform&&(u.transform=h.transform,delete h.transform),(u.transform||h.transformOrigin)&&(u.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),u.transform&&(u.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),s!==void 0&&(h.y=s),r!==void 0&&(h.scale=r),i!==void 0&&lq(h,i,a,o,!1)}const iO=()=>({...vw(),attrs:{}}),aO=e=>typeof e=="string"&&e.toLowerCase()==="svg";function cq(e,t,s,r){const i=j.useMemo(()=>{const a=iO();return rO(a,t,aO(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};sO(a,e.style,e),i.style={...a,...i.style}}return i}const dq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xw(e){return typeof e!="string"||e.includes("-")?!1:!!(dq.indexOf(e)>-1||/[A-Z]/u.test(e))}function uq(e,t,s,{latestValues:r},i,a=!1){const c=(xw(e)?cq:iq)(t,r,i,e),d=YU(t,typeof e=="string",a),f=e!==j.Fragment?{...d,...c,ref:s}:{},{children:m}=t,h=j.useMemo(()=>is(m)?m.get():m,[m]);return j.createElement(e,{...f,children:h})}function LN(e){const t=[{},{}];return e==null||e.values.forEach((s,r)=>{t[0][r]=s.get(),t[1][r]=s.getVelocity()}),t}function yw(e,t,s,r){if(typeof t=="function"){const[i,a]=LN(r);t=t(s!==void 0?s:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=LN(r);t=t(s!==void 0?s:e.custom,i,a)}return t}function Ef(e){return is(e)?e.get():e}function hq({scrapeMotionValuesFromProps:e,createRenderState:t},s,r,i){return{latestValues:fq(s,r,i,e),renderState:t()}}function fq(e,t,s,r){const i={},a=r(e,{});for(const u in a)i[u]=Ef(a[u]);let{initial:o,animate:c}=e;const d=Ep(e),f=tO(e);t&&f&&!d&&e.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let m=s?s.initial===!1:!1;m=m||o===!1;const h=m?c:o;if(h&&typeof h!="boolean"&&!Pp(h)){const u=Array.isArray(h)?h:[h];for(let p=0;p<u.length;p++){const x=yw(e,u[p]);if(x){const{transitionEnd:v,transition:w,...y}=x;for(const b in y){let _=y[b];if(Array.isArray(_)){const N=m?_.length-1:0;_=_[N]}_!==null&&(i[b]=_)}for(const b in v)i[b]=v[b]}}}return i}const oO=e=>(t,s)=>{const r=j.useContext(Cp),i=j.useContext(kp),a=()=>hq(e,t,r,i);return s?a():Hb(a)};function bw(e,t,s){var a;const{style:r}=e,i={};for(const o in r)(is(r[o])||t.style&&is(t.style[o])||nO(o,e)||((a=s==null?void 0:s.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const mq=oO({scrapeMotionValuesFromProps:bw,createRenderState:vw});function lO(e,t,s){const r=bw(e,t,s);for(const i in e)if(is(e[i])||is(t[i])){const a=Wc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}const pq=oO({scrapeMotionValuesFromProps:lO,createRenderState:iO}),gq=Symbol.for("motionComponentSymbol");function Ml(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function vq(e,t,s){return j.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),s&&(typeof s=="function"?s(r):Ml(s)&&(s.current=r))},[t])}const ww=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xq="framerAppearId",cO="data-"+ww(xq),dO=j.createContext({});function yq(e,t,s,r,i){var v,w;const{visualElement:a}=j.useContext(Cp),o=j.useContext(JA),c=j.useContext(kp),d=j.useContext(fw).reducedMotion,f=j.useRef(null);r=r||o.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:a,props:s,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=f.current,h=j.useContext(dO);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&bq(f.current,s,i,h);const u=j.useRef(!1);j.useInsertionEffect(()=>{m&&u.current&&m.update(s,c)});const p=s[cO],x=j.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,p)));return oA(()=>{m&&(u.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),x.current&&m.animationState&&m.animationState.animateChanges())}),j.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,p)}),x.current=!1),m.enteringChildren=void 0)}),m}function bq(e,t,s,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:uO(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&Ml(c),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:f})}function uO(e){if(e)return e.options.allowProjection!==!1?e.projection:uO(e.parent)}function Nv(e,{forwardMotionProps:t=!1}={},s,r){s&&ZU(s);const i=xw(e)?pq:mq;function a(c,d){let f;const m={...j.useContext(fw),...c,layoutId:wq(c)},{isStatic:h}=m,u=QU(c),p=i(c,h);if(!h&&Wb){jq();const x=_q(m);f=x.MeasureLayout,u.visualElement=yq(e,p,m,r,x.ProjectionNode)}return n.jsxs(Cp.Provider,{value:u,children:[f&&u.visualElement?n.jsx(f,{visualElement:u.visualElement,...m}):null,uq(e,c,vq(p,u.visualElement,d),p,h,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=j.forwardRef(a);return o[gq]=e,o}function wq({layoutId:e}){const t=j.useContext(qb).id;return t&&e!==void 0?t+"-"+e:e}function jq(e,t){j.useContext(JA).strict}function _q(e){const{drag:t,layout:s}=Nc;if(!t&&!s)return{};const r={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(e)||s!=null&&s.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Nq(e,t){if(typeof Proxy>"u")return Nv;const s=new Map,r=(a,o)=>Nv(a,o,e,t),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(s.has(o)||s.set(o,Nv(o,void 0,e,t)),s.get(o))})}function hO({top:e,left:t,right:s,bottom:r}){return{x:{min:t,max:s},y:{min:e,max:r}}}function Sq({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function kq(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function Sv(e){return e===void 0||e===1}function hy({scale:e,scaleX:t,scaleY:s}){return!Sv(e)||!Sv(t)||!Sv(s)}function go(e){return hy(e)||fO(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function fO(e){return MN(e.x)||MN(e.y)}function MN(e){return e&&e!=="0%"}function xm(e,t,s){const r=e-s,i=t*r;return s+i}function IN(e,t,s,r,i){return i!==void 0&&(e=xm(e,i,r)),xm(e,s,r)+t}function fy(e,t=0,s=1,r,i){e.min=IN(e.min,t,s,r,i),e.max=IN(e.max,t,s,r,i)}function mO(e,{x:t,y:s}){fy(e.x,t.translate,t.scale,t.originPoint),fy(e.y,s.translate,s.scale,s.originPoint)}const DN=.999999999999,FN=1.0000000000001;function Cq(e,t,s,r=!1){const i=s.length;if(!i)return;t.x=t.y=1;let a,o;for(let c=0;c<i;c++){a=s[c],o=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Dl(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,mO(e,o)),r&&go(a.latestValues)&&Dl(e,a.latestValues))}t.x<FN&&t.x>DN&&(t.x=1),t.y<FN&&t.y>DN&&(t.y=1)}function Il(e,t){e.min=e.min+t,e.max=e.max+t}function $N(e,t,s,r,i=.5){const a=ln(e.min,e.max,i);fy(e,t,s,a,r)}function Dl(e,t){$N(e.x,t.x,t.scaleX,t.scale,t.originX),$N(e.y,t.y,t.scaleY,t.scale,t.originY)}function pO(e,t){return hO(kq(e.getBoundingClientRect(),t))}function Pq(e,t,s){const r=pO(e,s),{scroll:i}=t;return i&&(Il(r.x,i.offset.x),Il(r.y,i.offset.y)),r}const zN=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fl=()=>({x:zN(),y:zN()}),BN=()=>({min:0,max:0}),bn=()=>({x:BN(),y:BN()}),my={current:null},gO={current:!1};function Eq(){if(gO.current=!0,!!Wb)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>my.current=e.matches;e.addEventListener("change",t),t()}else my.current=!1}const Tq=new WeakMap;function Aq(e,t,s){for(const r in t){const i=t[r],a=s[r];if(is(i))e.addValue(r,i);else if(is(a))e.addValue(r,_c(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,_c(o!==void 0?o:i,{owner:e}))}}for(const r in s)t[r]===void 0&&e.removeValue(r);return t}const VN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Oq{scrapeMotionValuesFromProps(t,s,r){return{}}constructor({parent:t,props:s,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const u=Os.now();this.renderScheduledAt<u&&(this.renderScheduledAt=u,nn.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=s.initial?{...d}:{},this.renderState=f,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Ep(s),this.isVariantNode=tO(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const u in h){const p=h[u];d[u]!==void 0&&is(p)&&p.set(d[u])}}mount(t){var s;this.current=t,Tq.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),gO.current||Eq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:my.current,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Za(this.notifyUpdate),Za(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const r=this.features[s];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Zc.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&nn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{i(),a&&a(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Nc){const s=Nc[t];if(!s)continue;const{isEnabled:r,Feature:i}=s;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<VN.length;r++){const i=VN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=t[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Aq(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const r=this.values.get(t);s!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&s!==void 0&&(r=_c(s===null?void 0:s,{owner:this}),this.addValue(t,r)),r}readValue(t,s){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(lA(r)||dA(r))?r=parseFloat(r):!VU(r)&&Ga.test(s)&&(r=HA(t,s)),this.setBaseTarget(t,is(r)?r.get():r)),is(r)?r.get():r}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var a;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const o=yw(this.props,s,(a=this.presenceContext)==null?void 0:a.custom);o&&(r=o[t])}if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!is(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Yb),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){uw.render(this.render)}}class vO extends Oq{constructor(){super(...arguments),this.KeyframeResolver=TU}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:r}){delete s[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;is(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function xO(e,{style:t,vars:s},r,i){const a=e.style;let o;for(o in t)a[o]=t[o];i==null||i.applyProjectionStyles(a,r);for(o in s)a.setProperty(o,s[o])}function Rq(e){return window.getComputedStyle(e)}class Lq extends vO{constructor(){super(...arguments),this.type="html",this.renderInstance=xO}readValueFromInstance(t,s){var r;if(Zc.has(s))return(r=this.projection)!=null&&r.isProjecting?iy(s):KV(t,s);{const i=Rq(t),a=(Jb(s)?i.getPropertyValue(s):i[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return pO(t,s)}build(t,s,r){gw(t,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,s,r){return bw(t,s,r)}}const yO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Mq(e,t,s,r){xO(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(yO.has(i)?i:ww(i),t.attrs[i])}class Iq extends vO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bn}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Zc.has(s)){const r=qA(s);return r&&r.default||0}return s=yO.has(s)?s:ww(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,r){return lO(t,s,r)}build(t,s,r){rO(t,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,s,r,i){Mq(t,s,r,i)}mount(t){this.isSVGTag=aO(t.tagName),super.mount(t)}}const Dq=(e,t)=>xw(e)?new Iq(t):new Lq(t,{allowProjection:e!==j.Fragment});function Ql(e,t,s){const r=e.getProps();return yw(r,t,s!==void 0?s:r.custom,e)}const py=e=>Array.isArray(e);function Fq(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,_c(s))}function $q(e){return py(e)?e[e.length-1]||0:e}function zq(e,t){const s=Ql(e,t);let{transitionEnd:r={},transition:i={},...a}=s||{};a={...a,...r};for(const o in a){const c=$q(a[o]);Fq(e,o,c)}}function Bq(e){return!!(is(e)&&e.add)}function gy(e,t){const s=e.getValue("willChange");if(Bq(s))return s.add(t);if(!s&&ra.WillChange){const r=new ra.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function bO(e){return e.props[cO]}const Vq=e=>e!==null;function Uq(e,{repeat:t,repeatType:s="loop"},r){const i=e.filter(Vq),a=t&&s!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const qq={type:"spring",stiffness:500,damping:25,restSpeed:10},Hq=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Wq={type:"keyframes",duration:.8},Zq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Gq=(e,{keyframes:t})=>t.length>2?Wq:Zc.has(e)?e.startsWith("scale")?Hq(t[1]):qq:Zq;function Kq({when:e,delay:t,delayChildren:s,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const jw=(e,t,s,r={},i,a)=>o=>{const c=cw(r,e)||{},d=c.delay||r.delay||0;let{elapsed:f=0}=r;f=f-fi(d);const m={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-f,onUpdate:u=>{t.set(u),c.onUpdate&&c.onUpdate(u)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:a?void 0:i};Kq(c)||Object.assign(m,Gq(e,m)),m.duration&&(m.duration=fi(m.duration)),m.repeatDelay&&(m.repeatDelay=fi(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let h=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(dy(m),m.delay===0&&(h=!0)),(ra.instantAnimations||ra.skipAnimations)&&(h=!0,dy(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,h&&!a&&t.get()!==void 0){const u=Uq(m.keyframes,c);if(u!==void 0){nn.update(()=>{m.onUpdate(u),m.onComplete()});return}}return c.isSync?new ow(m):new xU(m)};function Yq({protectedKeys:e,needsAnimating:t},s){const r=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,r}function wO(e,t,{delay:s=0,transitionOverride:r,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...c}=t;r&&(a=r);const d=[],f=i&&e.animationState&&e.animationState.getState()[i];for(const m in c){const h=e.getValue(m,e.latestValues[m]??null),u=c[m];if(u===void 0||f&&Yq(f,m))continue;const p={delay:s,...cw(a||{},m)},x=h.get();if(x!==void 0&&!h.isAnimating&&!Array.isArray(u)&&u===x&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const y=bO(e);if(y){const b=window.MotionHandoffAnimation(y,m,nn);b!==null&&(p.startTime=b,v=!0)}}gy(e,m),h.start(jw(m,h,u,e.shouldReduceMotion&&BA.has(m)?{type:!1}:p,e,v));const w=h.animation;w&&d.push(w)}return o&&Promise.all(d).then(()=>{nn.update(()=>{o&&zq(e,o)})}),d}function jO(e,t,s,r=0,i=1){const a=Array.from(e).sort((f,m)=>f.sortNodePosition(m)).indexOf(t),o=e.size,c=(o-1)*r;return typeof s=="function"?s(a,o):i===1?a*r:c-a*r}function vy(e,t,s={}){var d;const r=Ql(e,t,s.type==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(i=s.transitionOverride);const a=r?()=>Promise.all(wO(e,r,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:h,staggerDirection:u}=i;return Xq(e,t,f,m,h,u,s)}:()=>Promise.resolve(),{when:c}=i;if(c){const[f,m]=c==="beforeChildren"?[a,o]:[o,a];return f().then(()=>m())}else return Promise.all([a(),o(s.delay)])}function Xq(e,t,s=0,r=0,i=0,a=1,o){const c=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),c.push(vy(d,t,{...o,delay:s+(typeof r=="function"?0:r)+jO(e.variantChildren,d,r,i,a)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(c)}function Qq(e,t,s={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>vy(e,a,s));r=Promise.all(i)}else if(typeof t=="string")r=vy(e,t,s);else{const i=typeof t=="function"?Ql(e,t,s.custom):t;r=Promise.all(wO(e,i,s))}return r.then(()=>{e.notify("AnimationComplete",t)})}function _O(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(t[r]!==e[r])return!1;return!0}const Jq=pw.length;function NO(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?NO(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<Jq;s++){const r=pw[s],i=e.props[r];(Fu(i)||i===!1)&&(t[r]=i)}return t}const eH=[...mw].reverse(),tH=mw.length;function nH(e){return t=>Promise.all(t.map(({animation:s,options:r})=>Qq(e,s,r)))}function sH(e){let t=nH(e),s=UN(),r=!0;const i=d=>(f,m)=>{var u;const h=Ql(e,m,d==="exit"?(u=e.presenceContext)==null?void 0:u.custom:void 0);if(h){const{transition:p,transitionEnd:x,...v}=h;f={...f,...v,...x}}return f};function a(d){t=d(e)}function o(d){const{props:f}=e,m=NO(e.parent)||{},h=[],u=new Set;let p={},x=1/0;for(let w=0;w<tH;w++){const y=eH[w],b=s[y],_=f[y]!==void 0?f[y]:m[y],N=Fu(_),k=y===d?b.isActive:null;k===!1&&(x=w);let I=_===m[y]&&_!==f[y]&&N;if(I&&r&&e.manuallyAnimateOnMount&&(I=!1),b.protectedKeys={...p},!b.isActive&&k===null||!_&&!b.prevProp||Pp(_)||typeof _=="boolean")continue;const C=rH(b.prevProp,_);let T=C||y===d&&b.isActive&&!I&&N||w>x&&N,M=!1;const P=Array.isArray(_)?_:[_];let E=P.reduce(i(y),{});k===!1&&(E={});const{prevResolvedValues:A={}}=b,z={...A,...E},O=X=>{T=!0,u.has(X)&&(M=!0,u.delete(X)),b.needsAnimating[X]=!0;const Y=e.getValue(X);Y&&(Y.liveStyle=!1)};for(const X in z){const Y=E[X],U=A[X];if(p.hasOwnProperty(X))continue;let V=!1;py(Y)&&py(U)?V=!_O(Y,U):V=Y!==U,V?Y!=null?O(X):u.add(X):Y!==void 0&&u.has(X)?O(X):b.protectedKeys[X]=!0}b.prevProp=_,b.prevResolvedValues=E,b.isActive&&(p={...p,...E}),r&&e.blockInitialAnimation&&(T=!1);const $=I&&C;T&&(!$||M)&&h.push(...P.map(X=>{const Y={type:y};if(typeof X=="string"&&r&&!$&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,V=Ql(U,X);if(U.enteringChildren&&V){const{delayChildren:R}=V.transition||{};Y.delay=jO(U.enteringChildren,e,R)}}return{animation:X,options:Y}}))}if(u.size){const w={};if(typeof f.initial!="boolean"){const y=Ql(e,Array.isArray(f.initial)?f.initial[0]:f.initial);y&&y.transition&&(w.transition=y.transition)}u.forEach(y=>{const b=e.getBaseTarget(y),_=e.getValue(y);_&&(_.liveStyle=!0),w[y]=b??null}),h.push({animation:w})}let v=!!h.length;return r&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(h):Promise.resolve()}function c(d,f){var h;if(s[d].isActive===f)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(u=>{var p;return(p=u.animationState)==null?void 0:p.setActive(d,f)}),s[d].isActive=f;const m=o(d);for(const u in s)s[u].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>s,reset:()=>{s=UN(),r=!0}}}function rH(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!_O(t,e):!1}function ho(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function UN(){return{animate:ho(!0),whileInView:ho(),whileHover:ho(),whileTap:ho(),whileDrag:ho(),whileFocus:ho(),exit:ho()}}class so{constructor(t){this.isMounted=!1,this.node=t}update(){}}class iH extends so{constructor(t){super(t),t.animationState||(t.animationState=sH(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Pp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let aH=0;class oH extends so{constructor(){super(...arguments),this.id=aH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);s&&!t&&i.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const lH={animation:{Feature:iH},exit:{Feature:oH}};function zu(e,t,s,r={passive:!0}){return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s)}function lh(e){return{point:{x:e.pageX,y:e.pageY}}}const cH=e=>t=>hw(t)&&e(t,lh(t));function Qd(e,t,s,r){return zu(e,t,cH(s),r)}const SO=1e-4,dH=1-SO,uH=1+SO,kO=.01,hH=0-kO,fH=0+kO;function vs(e){return e.max-e.min}function mH(e,t,s){return Math.abs(e-t)<=s}function qN(e,t,s,r=.5){e.origin=r,e.originPoint=ln(t.min,t.max,e.origin),e.scale=vs(s)/vs(t),e.translate=ln(s.min,s.max,e.origin)-e.originPoint,(e.scale>=dH&&e.scale<=uH||isNaN(e.scale))&&(e.scale=1),(e.translate>=hH&&e.translate<=fH||isNaN(e.translate))&&(e.translate=0)}function Jd(e,t,s,r){qN(e.x,t.x,s.x,r?r.originX:void 0),qN(e.y,t.y,s.y,r?r.originY:void 0)}function HN(e,t,s){e.min=s.min+t.min,e.max=e.min+vs(t)}function pH(e,t,s){HN(e.x,t.x,s.x),HN(e.y,t.y,s.y)}function WN(e,t,s){e.min=t.min-s.min,e.max=e.min+vs(t)}function eu(e,t,s){WN(e.x,t.x,s.x),WN(e.y,t.y,s.y)}function sr(e){return[e("x"),e("y")]}const CO=({current:e})=>e?e.ownerDocument.defaultView:null,ZN=(e,t)=>Math.abs(e-t);function gH(e,t){const s=ZN(e.x,t.x),r=ZN(e.y,t.y);return Math.sqrt(s**2+r**2)}class PO{constructor(t,s,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Cv(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=gH(u.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!x)return;const{point:v}=u,{timestamp:w}=Gn;this.history.push({...v,timestamp:w});const{onStart:y,onMove:b}=this.handlers;p||(y&&y(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,u)},this.handlePointerMove=(u,p)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=kv(p,this.transformPagePoint),nn.update(this.updatePoint,!0)},this.handlePointerUp=(u,p)=>{this.end();const{onEnd:x,onSessionEnd:v,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Cv(u.type==="pointercancel"?this.lastMoveEventInfo:kv(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(u,y),v&&v(u,y)},!hw(t))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=lh(t),d=kv(c,this.transformPagePoint),{point:f}=d,{timestamp:m}=Gn;this.history=[{...f,timestamp:m}];const{onSessionStart:h}=s;h&&h(t,Cv(d,this.history)),this.removeListeners=ih(Qd(this.contextWindow,"pointermove",this.handlePointerMove),Qd(this.contextWindow,"pointerup",this.handlePointerUp),Qd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Za(this.updatePoint)}}function kv(e,t){return t?{point:t(e.point)}:e}function GN(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Cv({point:e},t){return{point:e,delta:GN(e,EO(t)),offset:GN(e,vH(t)),velocity:xH(t,.1)}}function vH(e){return e[0]}function EO(e){return e[e.length-1]}function xH(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const i=EO(e);for(;s>=0&&(r=e[s],!(i.timestamp-r.timestamp>fi(t)));)s--;if(!r)return{x:0,y:0};const a=mi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function yH(e,{min:t,max:s},r){return t!==void 0&&e<t?e=r?ln(t,e,r.min):Math.max(e,t):s!==void 0&&e>s&&(e=r?ln(s,e,r.max):Math.min(e,s)),e}function KN(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function bH(e,{top:t,left:s,bottom:r,right:i}){return{x:KN(e.x,s,i),y:KN(e.y,t,r)}}function YN(e,t){let s=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}function wH(e,t){return{x:YN(e.x,t.x),y:YN(e.y,t.y)}}function jH(e,t){let s=.5;const r=vs(e),i=vs(t);return i>r?s=Mu(t.min,t.max-r,e.min):r>i&&(s=Mu(e.min,e.max-i,t.min)),sa(0,1,s)}function _H(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const xy=.35;function NH(e=xy){return e===!1?e=0:e===!0&&(e=xy),{x:XN(e,"left","right"),y:XN(e,"top","bottom")}}function XN(e,t,s){return{min:QN(e,t),max:QN(e,s)}}function QN(e,t){return typeof e=="number"?e:e[t]||0}const SH=new WeakMap;class kH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(lh(h).point)},o=(h,u)=>{const{drag:p,dragPropagation:x,onDragStart:v}=this.getProps();if(p&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=LU(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=u,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sr(y=>{let b=this.getAxisMotionValue(y).get()||0;if(pi.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const N=_.layout.layoutBox[y];N&&(b=vs(N)*(parseFloat(b)/100))}}this.originPoint[y]=b}),v&&nn.postRender(()=>v(h,u)),gy(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},c=(h,u)=>{this.latestPointerEvent=h,this.latestPanInfo=u;const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:v,onDrag:w}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:y}=u;if(x&&this.currentDirection===null){this.currentDirection=CH(y),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",u.point,y),this.updateAxis("y",u.point,y),this.visualElement.render(),w&&w(h,u)},d=(h,u)=>{this.latestPointerEvent=h,this.latestPanInfo=u,this.stop(h,u),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>sr(h=>{var u;return this.getAnimationState(h)==="paused"&&((u=this.getAxisMotionValue(h).animation)==null?void 0:u.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new PO(t,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:CO(this.visualElement)})}stop(t,s){const r=t||this.latestPointerEvent,i=s||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&nn.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,r){const{drag:i}=this.getProps();if(!r||!af(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=yH(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;t&&Ml(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=bH(r.layoutBox,t):this.constraints=!1,this.elastic=NH(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=_H(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Ml(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Pq(r,i.root,this.visualElement.getTransformPagePoint());let o=wH(i.layout.layoutBox,a);if(s){const c=s(Sq(o));this.hasMutatedConstraints=!!c,c&&(o=hO(c))}return o}startAnimation(t){const{drag:s,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=sr(m=>{if(!af(m,s,this.currentDirection))return;let h=d&&d[m]||{};o&&(h={min:0,max:0});const u=i?200:1e6,p=i?40:1e7,x={type:"inertia",velocity:r?t[m]:0,bounceStiffness:u,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(m,x)});return Promise.all(f).then(c)}startAxisValueAnimation(t,s){const r=this.getAxisMotionValue(t);return gy(this.visualElement,t),r.start(jw(t,r,0,s,this.visualElement,!1))}stopAnimation(){sr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){sr(t=>{var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[s];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){sr(s=>{const{drag:r}=this.getProps();if(!af(s,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(s);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[s];a.set(t[s]-ln(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Ml(s)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};sr(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();i[o]=jH({min:d,max:d},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sr(o=>{if(!af(o,t,null))return;const c=this.getAxisMotionValue(o),{min:d,max:f}=this.constraints[o];c.set(ln(d,f,i[o]))})}addListeners(){if(!this.visualElement.current)return;SH.set(this.visualElement,this);const t=this.visualElement.current,s=Qd(t,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Ml(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),nn.read(r);const o=zu(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(sr(m=>{const h=this.getAxisMotionValue(m);h&&(this.originPoint[m]+=d[m].translate,h.set(h.get()+d[m].translate))}),this.visualElement.render())});return()=>{o(),s(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=xy,dragMomentum:c=!0}=t;return{...t,drag:s,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function af(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function CH(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class PH extends so{constructor(t){super(t),this.removeGroupControls=hr,this.removeListeners=hr,this.controls=new kH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hr}unmount(){this.removeGroupControls(),this.removeListeners()}}const JN=e=>(t,s)=>{e&&nn.postRender(()=>e(t,s))};class EH extends so{constructor(){super(...arguments),this.removePointerDownListener=hr}onPointerDown(t){this.session=new PO(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CO(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:JN(t),onStart:JN(s),onMove:r,onEnd:(a,o)=>{delete this.session,i&&nn.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Qd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function eS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Sd={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ct.test(e))e=parseFloat(e);else return e;const s=eS(e,t.target.x),r=eS(e,t.target.y);return`${s}% ${r}%`}},TH={correct:(e,{treeScale:t,projectionDelta:s})=>{const r=e,i=Ga.parse(e);if(i.length>5)return r;const a=Ga.createTransformer(e),o=typeof i[0]!="number"?1:0,c=s.x.scale*t.x,d=s.y.scale*t.y;i[0+o]/=c,i[1+o]/=d;const f=ln(c,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=f),typeof i[3+o]=="number"&&(i[3+o]/=f),a(i)}};let Pv=!1;class AH extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;JU(OH),a&&(s.group&&s.group.add(a),r&&r.register&&i&&r.register(a),Pv&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Tf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,Pv=!0,i||t.layoutDependency!==s||s===void 0||t.isPresent!==a?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||nn.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),uw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:i}=t;Pv=!0,i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function TO(e){const[t,s]=QA(),r=j.useContext(qb);return n.jsx(AH,{...e,layoutGroup:r,switchLayoutGroup:j.useContext(dO),isPresent:t,safeToRemove:s})}const OH={borderRadius:{...Sd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sd,borderTopRightRadius:Sd,borderBottomLeftRadius:Sd,borderBottomRightRadius:Sd,boxShadow:TH};function RH(e,t,s){const r=is(e)?e:_c(e);return r.start(jw("",r,t,s)),r.animation}const LH=(e,t)=>e.depth-t.depth;class MH{constructor(){this.children=[],this.isDirty=!1}add(t){Zb(this.children,t),this.isDirty=!0}remove(t){Gb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(LH),this.isDirty=!1,this.children.forEach(t)}}function IH(e,t){const s=Os.now(),r=({timestamp:i})=>{const a=i-s;a>=t&&(Za(r),e(a-t))};return nn.setup(r,!0),()=>Za(r)}const AO=["TopLeft","TopRight","BottomLeft","BottomRight"],DH=AO.length,tS=e=>typeof e=="string"?parseFloat(e):e,nS=e=>typeof e=="number"||ct.test(e);function FH(e,t,s,r,i,a){i?(e.opacity=ln(0,s.opacity??1,$H(r)),e.opacityExit=ln(t.opacity??1,0,zH(r))):a&&(e.opacity=ln(t.opacity??1,s.opacity??1,r));for(let o=0;o<DH;o++){const c=`border${AO[o]}Radius`;let d=sS(t,c),f=sS(s,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||nS(d)===nS(f)?(e[c]=Math.max(ln(tS(d),tS(f),r),0),(pi.test(f)||pi.test(d))&&(e[c]+="%")):e[c]=f}(t.rotate||s.rotate)&&(e.rotate=ln(t.rotate||0,s.rotate||0,r))}function sS(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const $H=OO(0,.5,xA),zH=OO(.5,.95,hr);function OO(e,t,s){return r=>r<e?0:r>t?1:s(Mu(e,t,r))}function rS(e,t){e.min=t.min,e.max=t.max}function nr(e,t){rS(e.x,t.x),rS(e.y,t.y)}function iS(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function aS(e,t,s,r,i){return e-=t,e=xm(e,1/s,r),i!==void 0&&(e=xm(e,1/i,r)),e}function BH(e,t=0,s=1,r=.5,i,a=e,o=e){if(pi.test(t)&&(t=parseFloat(t),t=ln(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=ln(a.min,a.max,r);e===a&&(c-=t),e.min=aS(e.min,t,s,c,i),e.max=aS(e.max,t,s,c,i)}function oS(e,t,[s,r,i],a,o){BH(e,t[s],t[r],t[i],t.scale,a,o)}const VH=["x","scaleX","originX"],UH=["y","scaleY","originY"];function lS(e,t,s,r){oS(e.x,t,VH,s?s.x:void 0,r?r.x:void 0),oS(e.y,t,UH,s?s.y:void 0,r?r.y:void 0)}function cS(e){return e.translate===0&&e.scale===1}function RO(e){return cS(e.x)&&cS(e.y)}function dS(e,t){return e.min===t.min&&e.max===t.max}function qH(e,t){return dS(e.x,t.x)&&dS(e.y,t.y)}function uS(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function LO(e,t){return uS(e.x,t.x)&&uS(e.y,t.y)}function hS(e){return vs(e.x)/vs(e.y)}function fS(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class HH{constructor(){this.members=[]}add(t){Zb(this.members,t),t.scheduleRender()}remove(t){if(Gb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(i=>t===i);if(s===0)return!1;let r;for(let i=s;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,s){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,s&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:r}=t;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function WH(e,t,s){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,o=(s==null?void 0:s.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:f,rotate:m,rotateX:h,rotateY:u,skewX:p,skewY:x}=s;f&&(r=`perspective(${f}px) ${r}`),m&&(r+=`rotate(${m}deg) `),h&&(r+=`rotateX(${h}deg) `),u&&(r+=`rotateY(${u}deg) `),p&&(r+=`skewX(${p}deg) `),x&&(r+=`skewY(${x}deg) `)}const c=e.x.scale*t.x,d=e.y.scale*t.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const Ev=["","X","Y","Z"],ZH=1e3;let GH=0;function Tv(e,t,s,r){const{latestValues:i}=t;i[e]&&(s[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function MO(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=bO(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",nn,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&MO(r)}function IO({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=t==null?void 0:t()){this.id=GH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XH),this.nodes.forEach(tW),this.nodes.forEach(nW),this.nodes.forEach(QH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new MH)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Yb),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=XA(o)&&!zU(o),this.instance=o;const{layoutId:c,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),e){let m,h=0;const u=()=>this.root.updateBlockedByResize=!1;nn.read(()=>{h=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,m&&m(),m=IH(u,250),Tf.hasAnimatedSinceResize&&(Tf.hasAnimatedSinceResize=!1,this.nodes.forEach(gS)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeLayoutChanged:u,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||oW,{onLayoutAnimationStart:v,onLayoutAnimationComplete:w}=f.getProps(),y=!this.targetLayout||!LO(this.targetLayout,p),b=!h&&u;if(this.options.layoutRoot||this.resumeFrom||b||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...cw(x,"layout"),onPlay:v,onComplete:w};(f.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(m,b)}else h||gS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Za(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const h=this.path[m];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(mS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(pS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(eW),this.nodes.forEach(KH),this.nodes.forEach(YH)):this.nodes.forEach(pS),this.clearAllSnapshots();const c=Os.now();Gn.delta=sa(0,1e3/60,c-Gn.timestamp),Gn.timestamp=c,Gn.isProcessing=!0,xv.update.process(Gn),xv.preRender.process(Gn),xv.render.process(Gn),Gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,uw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(JH),this.sharedNodes.forEach(rW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vs(this.snapshot.measuredBox.x)&&!vs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!RO(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;o&&this.instance&&(c||go(this.latestValues)||m)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),lW(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:o}=this.options;if(!o)return bn();const c=o.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(cW))){const{scroll:m}=this.root;m&&(Il(c.x,m.offset.x),Il(c.y,m.offset.y))}return c}removeElementScroll(o){var d;const c=bn();if(nr(c,o),(d=this.scroll)!=null&&d.wasRoot)return c;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:h,options:u}=m;m!==this.root&&h&&u.layoutScroll&&(h.wasRoot&&nr(c,o),Il(c.x,h.offset.x),Il(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const d=bn();nr(d,o);for(let f=0;f<this.path.length;f++){const m=this.path[f];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Dl(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),go(m.latestValues)&&Dl(d,m.latestValues)}return go(this.latestValues)&&Dl(d,this.latestValues),d}removeTransform(o){const c=bn();nr(c,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!go(f.latestValues))continue;hy(f.latestValues)&&f.updateSnapshot();const m=bn(),h=f.measurePageBox();nr(m,h),lS(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return go(this.latestValues)&&lS(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(u=this.parent)!=null&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=Gn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),eu(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bn(),this.targetWithTransforms=bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nr(this.target,this.layout.layoutBox),mO(this.target,this.targetDelta)):nr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),eu(this.relativeTargetOrigin,this.target,p.target),nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hy(this.parent.latestValues)||fO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Gn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;nr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,u=this.treeScale.y;Cq(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=bn());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(iS(this.prevProjectionDelta.x,this.projectionDelta.x),iS(this.prevProjectionDelta.y,this.projectionDelta.y)),Jd(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==u||!fS(this.projectionDelta.x,this.prevProjectionDelta.x)||!fS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fl(),this.projectionDelta=Fl(),this.projectionDeltaWithTransform=Fl()}setAnimationOrigin(o,c=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},h=Fl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const u=bn(),p=d?d.source:void 0,x=this.layout?this.layout.source:void 0,v=p!==x,w=this.getStack(),y=!w||w.members.length<=1,b=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(aW));this.animationProgress=0;let _;this.mixTargetDelta=N=>{const k=N/1e3;vS(h.x,o.x,k),vS(h.y,o.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(eu(u,this.layout.layoutBox,this.relativeParent.layout.layoutBox),iW(this.relativeTarget,this.relativeTargetOrigin,u,k),_&&qH(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=bn()),nr(_,this.relativeTarget)),v&&(this.animationValues=m,FH(m,f,this.latestValues,k,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,d,f;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Za(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nn.update(()=>{Tf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_c(0)),this.currentAnimation=RH(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),o.onUpdate&&o.onUpdate(m)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:m}=o;if(!(!c||!d||!f)){if(this!==o&&this.layout&&f&&DO(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||bn();const h=vs(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+h;const u=vs(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+u}nr(c,d),Dl(c,m),Jd(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new HH),this.sharedNodes.get(o).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&Tv("z",o,f,this.animationValues);for(let m=0;m<Ev.length;m++)Tv(`rotate${Ev[m]}`,o,f,this.animationValues),Tv(`skew${Ev[m]}`,o,f,this.animationValues);o.render();for(const m in f)o.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Ef(c==null?void 0:c.pointerEvents)||"",o.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Ef(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!go(this.latestValues)&&(o.transform=d?d({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let h=WH(this.projectionDeltaWithTransform,this.treeScale,m);d&&(h=d(m,h)),o.transform=h;const{x:u,y:p}=this.projectionDelta;o.transformOrigin=`${u.origin*100}% ${p.origin*100}% 0`,f.animationValues?o.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in $u){if(m[x]===void 0)continue;const{correct:v,applyTo:w,isCSSVariable:y}=$u[x],b=h==="none"?m[x]:v(m[x],f);if(w){const _=w.length;for(let N=0;N<_;N++)o[w[N]]=b}else y?this.options.visualElement.renderState.vars[x]=b:o[x]=b}this.options.layoutId&&(o.pointerEvents=f===this?Ef(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(mS),this.root.sharedNodes.clear()}}}function KH(e){e.updateLayout()}function YH(e){var s;const t=((s=e.resumeFrom)==null?void 0:s.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:a}=e.options,o=t.source!==e.layout.source;a==="size"?sr(h=>{const u=o?t.measuredBox[h]:t.layoutBox[h],p=vs(u);u.min=r[h].min,u.max=u.min+p}):DO(a,t.layoutBox,r)&&sr(h=>{const u=o?t.measuredBox[h]:t.layoutBox[h],p=vs(r[h]);u.max=u.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const c=Fl();Jd(c,r,t.layoutBox);const d=Fl();o?Jd(d,e.applyTransform(i,!0),t.measuredBox):Jd(d,r,t.layoutBox);const f=!RO(c);let m=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:u,layout:p}=h;if(u&&p){const x=bn();eu(x,t.layoutBox,u.layoutBox);const v=bn();eu(v,r,p.layoutBox),LO(x,v)||(m=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=x,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:m})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function XH(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function QH(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function JH(e){e.clearSnapshot()}function mS(e){e.clearMeasurements()}function pS(e){e.isLayoutDirty=!1}function eW(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function gS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function tW(e){e.resolveTargetDelta()}function nW(e){e.calcProjection()}function sW(e){e.resetSkewAndRotation()}function rW(e){e.removeLeadSnapshot()}function vS(e,t,s){e.translate=ln(t.translate,0,s),e.scale=ln(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function xS(e,t,s,r){e.min=ln(t.min,s.min,r),e.max=ln(t.max,s.max,r)}function iW(e,t,s,r){xS(e.x,t.x,s.x,r),xS(e.y,t.y,s.y,r)}function aW(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const oW={duration:.45,ease:[.4,0,.1,1]},yS=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),bS=yS("applewebkit/")&&!yS("chrome/")?Math.round:hr;function wS(e){e.min=bS(e.min),e.max=bS(e.max)}function lW(e){wS(e.x),wS(e.y)}function DO(e,t,s){return e==="position"||e==="preserve-aspect"&&!mH(hS(t),hS(s),.2)}function cW(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const dW=IO({attachResizeListener:(e,t)=>zu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Av={current:void 0},FO=IO({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Av.current){const e=new dW({});e.mount(window),e.setOptions({layoutScroll:!0}),Av.current=e}return Av.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),uW={pan:{Feature:EH},drag:{Feature:PH,ProjectionNode:FO,MeasureLayout:TO}};function jS(e,t,s){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,a=r[i];a&&nn.postRender(()=>a(t,lh(t)))}class hW extends so{mount(){const{current:t}=this.node;t&&(this.unmount=MU(t,(s,r)=>(jS(this.node,r,"Start"),i=>jS(this.node,i,"End"))))}unmount(){}}class fW extends so{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ih(zu(this.node.current,"focus",()=>this.onFocus()),zu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _S(e,t,s){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),a=r[i];a&&nn.postRender(()=>a(t,lh(t)))}class mW extends so{mount(){const{current:t}=this.node;t&&(this.unmount=$U(t,(s,r)=>(_S(this.node,r,"Start"),(i,{success:a})=>_S(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yy=new WeakMap,Ov=new WeakMap,pW=e=>{const t=yy.get(e.target);t&&t(e)},gW=e=>{e.forEach(pW)};function vW({root:e,...t}){const s=e||document;Ov.has(s)||Ov.set(s,{});const r=Ov.get(s),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(gW,{root:e,...t})),r[i]}function xW(e,t,s){const r=vW(t);return yy.set(e,s),r.observe(e),()=>{yy.delete(e),r.unobserve(e)}}const yW={some:0,all:1};class bW extends so{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:r,amount:i="some",once:a}=t,o={root:s?s.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:yW[i]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:h}=this.node.getProps(),u=f?m:h;u&&u(d)};return xW(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(wW(t,s))&&this.startObserver()}unmount(){}}function wW({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const jW={inView:{Feature:bW},tap:{Feature:mW},focus:{Feature:fW},hover:{Feature:hW}},_W={layout:{ProjectionNode:FO,MeasureLayout:TO}},NW={...lH,...jW,...uW,..._W},Jl=Nq(NW,Dq),SW=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function kW(e){const t=Math.floor(e),s=e%1>=.5,r=5-t-(s?1:0);return n.jsxs(n.Fragment,{children:[Array.from({length:t}).map((i,a)=>n.jsx(dn,{className:"h-2.5 w-2.5 fill-yellow-400 text-yellow-400"},`full-${a}`)),s&&n.jsx(dn,{className:"h-2.5 w-2.5 fill-yellow-400 text-yellow-400",style:{clipPath:"inset(0 50% 0 0)"}},"half"),Array.from({length:r}).map((i,a)=>n.jsx(dn,{className:"h-2.5 w-2.5 stroke-yellow-400 text-transparent"},`empty-${a}`))]})}function CW({onDataLoaded:e}={}){const t=nt(),[s,r]=j.useState([]),[i,a]=j.useState(!0),[o,c]=j.useState(xt.getLocation());j.useEffect(()=>{const h=xt.subscribe(c);return d(),h},[]),j.useEffect(()=>{o&&d()},[o]);const d=async()=>{try{a(!0);const h={"ngrok-skip-browser-warning":"true"},u=xt.getLocation(),p=new URLSearchParams({page_size:"20"});u&&(p.append("latitude",u.latitude.toString()),p.append("longitude",u.longitude.toString()));const x=await fetch(`${rt}search/products/?${p}`,{headers:h});if(!x.ok)throw new Error(`HTTP ${x.status}`);const v=await x.json(),w=f(v.results||[]);r(w)}catch(h){console.error("Error fetching trending items:",h),r([])}finally{a(!1),e==null||e()}},f=h=>{const u=xt.getLocation();let p=h.map(x=>{var b,_;const v=((b=x.images)==null?void 0:b.find(N=>N.is_primary))||((_=x.images)==null?void 0:_[0]);let w="N/A",y=1/0;return u&&x.vendor_latitude&&x.vendor_longitude&&(y=SW(u.latitude,u.longitude,x.vendor_latitude,x.vendor_longitude),w=`${y.toFixed(1)} km`),{id:x.id,name:x.name,vendor:x.vendor_name||"Unknown Vendor",distance:w,distanceValue:y,rating:4.5,price:`${x.price}`,priceValue:parseFloat(x.price),image:(v==null?void 0:v.image_url)||"/placeholder-product.jpg",inStock:x.quantity>0,category:x.category}});return p.sort((x,v)=>v.rating-x.rating),p.slice(0,6)},m=h=>{t(`/product/${h}`)};return i?n.jsxs("section",{className:"px-4 sm:px-6 md:px-8 mb-6 lg:mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-foreground tracking-tight",children:"Trending Now "}),n.jsx(ne,{variant:"outline",size:"sm",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},className:"rounded-full hover:bg-[#856043] hover:text-white text-sm",onClick:()=>t("/trending-items"),children:"View All"})]}),n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(qn,{className:"h-8 w-8 animate-spin"})})]}):n.jsxs("section",{className:"px-4 sm:px-6 md:px-8 mb-6 lg:mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-foreground tracking-tight",children:"Trending Now "}),n.jsx(ne,{variant:"outline",size:"sm",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},className:"rounded-full hover:bg-[#856043] hover:text-white text-sm",onClick:()=>t("/trending-items"),children:"View All"})]}),n.jsx("div",{className:"flex gap-3 sm:gap-4 overflow-x-auto custom-scrollbar pb-3 snap-x snap-mandatory",children:s.map((h,u)=>n.jsxs(Jl.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,delay:u*.08,ease:"easeOut"},whileHover:{scale:1.03,boxShadow:"0 12px 24px rgba(0,0,0,0.15)"},whileTap:{scale:.97},className:"relative min-w-[120px] sm:min-w-[140px] md:min-w-[120px] bg-gradient-to-br from-card/90 to-card rounded-xl p-3 shadow-lg border border-border/20 hover:shadow-xl hover:border-primary/40 transition-all duration-300 cursor-pointer group snap-start",onClick:()=>m(h.id),"aria-label":`View ${h.name} from ${h.vendor}`,children:[n.jsxs(E1,{children:[n.jsx(T1,{asChild:!0,children:n.jsx("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-full p-1 shadow-md group-hover:animate-bounce",children:n.jsx(FD,{className:"h-3 w-3"})})}),n.jsx(Ux,{side:"top",className:"text-xs",children:"Hot Item!"})]}),n.jsx("div",{className:"w-full h-20 mb-2 overflow-hidden rounded-md",children:n.jsx("img",{src:h.image,alt:h.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ease-in-out",onError:p=>{p.target.src="/placeholder-product.jpg"}})}),n.jsx("h3",{className:"font-semibold text-xs mb-1 text-foreground line-clamp-1",children:h.name}),n.jsx("p",{className:"text-xs text-muted-foreground mb-1 truncate",children:h.vendor}),n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("div",{className:"flex gap-0.5",children:kW(h.rating)}),n.jsxs(E1,{children:[n.jsx(T1,{asChild:!0,children:n.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{className:"text-xs",children:h.distance})]})}),n.jsx(Ux,{side:"bottom",className:"text-xs",children:"Distance from you"})]})]}),n.jsx("p",{className:"font-bold text-primary text-sm",children:h.price})]},h.id))})]})}const PW=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function EW({onDataLoaded:e}={}){const t=nt();gr();const{toast:s}=hn(),{addToCartWithAuth:r}=Vc(),[i,a]=j.useState([]),[o,c]=j.useState(!0),[d,f]=j.useState(xt.getLocation());j.useEffect(()=>{const x=xt.subscribe(f);return m(),x},[]),j.useEffect(()=>{d&&m()},[d]);const m=async()=>{try{c(!0);const x={"ngrok-skip-browser-warning":"true"},v=xt.getLocation(),w=new URLSearchParams({page_size:"20"});v&&(w.append("latitude",v.latitude.toString()),w.append("longitude",v.longitude.toString()));const b=await(await fetch(`${rt}search/products/?${w}`,{headers:x})).json(),_=h(b.results||[]);a(_)}catch(x){console.error("Error fetching featured products:",x)}finally{c(!1),e==null||e()}},h=x=>{const v=xt.getLocation();let y=x.filter(b=>b.featured===!0).map(b=>{var I,C;const _=((I=b.images)==null?void 0:I.find(T=>T.is_primary))||((C=b.images)==null?void 0:C[0]);let N="N/A",k=1/0;return v&&b.vendor_latitude&&b.vendor_longitude&&(k=PW(v.latitude,v.longitude,b.vendor_latitude,b.vendor_longitude),N=`${k.toFixed(1)} km`),{id:b.id,name:b.name,vendor:b.vendor_name||"Unknown Vendor",distance:N,distanceValue:k,rating:4.5,price:`${b.price}`,priceValue:parseFloat(b.price),image:(_==null?void 0:_.image_url)||"/placeholder-product.jpg",inStock:b.quantity>0,category:b.category,featured:b.featured}});return y.sort((b,_)=>_.rating-b.rating),y.slice(0,6)},u=x=>{t(`/product/${x}`)},p=async x=>{try{await r(x.id.toString(),1),s({title:"Added to Cart",description:`${x.name} added to your cart`}),t("/cart")}catch(v){console.error("Error adding to cart:",v)}};return o?n.jsxs("section",{className:"px-4 py-3 mb-8 bg-gradient-to-br from-gray-50 to-gray-100",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx("h2",{className:"text-xl md:text-2xl font-semibold tracking-tight text-black",children:"Featured Products"})}),n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(qn,{className:"h-8 w-8 animate-spin"})})]}):n.jsxs("section",{className:"px-4 py-3 mb-8 bg-gradient-to-br from-gray-50 to-gray-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-semibold tracking-tight text-black",children:"Featured Products"}),n.jsx(ne,{variant:"outline",size:"sm",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},className:"rounded-full hover:bg-[#856043] hover:text-white text-sm",onClick:()=>t("/featured-items"),children:"View All"})]}),n.jsx("div",{className:"flex gap-3 overflow-x-auto pb-3 md:grid md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 md:overflow-visible md:pb-0",children:i.map((x,v)=>n.jsxs(Jl.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:v*.1,duration:.3},whileHover:{scale:1.02,rotate:.5},className:"relative flex-shrink-0 w-40 md:w-auto rounded-lg bg-white border border-gray-200 hover:border-[#856043] shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-300 overflow-hidden group cursor-pointer",onClick:()=>u(x.id),children:[n.jsx(Jl.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:v*.1+.2,duration:.2},className:"absolute top-2 left-2 bg-emerald-600 text-white text-xs px-2 py-0.5 rounded-full font-semibold shadow-sm",children:"Featured"}),n.jsx("div",{className:"w-full h-32 overflow-hidden",children:n.jsx("img",{src:x.image,alt:x.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:w=>{w.target.src="/placeholder-product.jpg"}})}),n.jsxs("div",{className:"p-3 flex flex-col justify-between h-40",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-xs md:text-sm text-gray-800 mb-1 line-clamp-2 leading-tight",children:x.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-1 truncate",children:x.vendor})]}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsx("span",{className:"font-medium text-sm text-[#856043]",children:x.price})}),n.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[Array.from({length:5}).map((w,y)=>n.jsx("span",{className:`text-xs ${y<Math.floor(x.rating)?"text-amber-400":"text-gray-300"}`,children:""},y)),n.jsx("span",{className:"text-xs text-gray-500 ml-1",children:x.rating.toFixed(1)})]}),n.jsx("div",{className:"flex justify-center",children:x.inStock?n.jsxs(ne,{variant:"outline",className:"w-full text-xs py-1.5 shadow-sm h-7",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},onMouseOver:w=>{w.currentTarget.style.backgroundColor="#856043",w.currentTarget.style.color="#ffffff"},onMouseOut:w=>{w.currentTarget.style.backgroundColor="transparent",w.currentTarget.style.color="#856043"},onClick:w=>{w.stopPropagation(),p(x)},children:[n.jsx(Ds,{className:"h-3 w-3 mr-1"})," Buy"]}):n.jsx(ne,{disabled:!0,className:"w-full bg-gray-200 text-gray-500 cursor-not-allowed text-xs py-1.5 shadow-sm h-7",children:"Out of Stock"})})]})]})]},x.id))}),i.length===0&&!o&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No featured products"}),n.jsx("p",{className:"text-muted-foreground",children:"Featured products will appear here when available"})]})]})}const TW=e=>[{icon:ab,label:"Home",id:"home",path:"/home"},{icon:At,label:"Product",id:"search",path:"/search"},{icon:Ds,label:"Cart",id:"cart",path:"/cart",badge:e>0?e:void 0},{icon:MD,label:"Orders",id:"orders",path:"/orders"},{icon:Mr,label:"Profile",id:"profile",path:"/profile"}];function $s(){const[e,t]=j.useState("home"),s=nt(),r=Qs(),{cart:i}=gr(),a=TW((i==null?void 0:i.total_items)||0);j.useEffect(()=>{const c=r.pathname,d=a.find(f=>f.path===c);d&&t(d.id)},[r.pathname]);const o=(c,d)=>{t(c),s(d)};return n.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-200/50 z-50 shadow-[0_-2px_8px_rgba(0,0,0,0.05)]",children:[n.jsx("div",{className:"flex justify-around items-center h-20 md:h-14 max-w-lg mx-auto py-2 md:py-1",children:a.map(c=>{const d=e===c.id;return n.jsxs("button",{onClick:()=>o(c.id,c.path),className:`relative flex flex-col items-center justify-center p-4 md:p-2 transition-all duration-300 ease-in-out group ${d?"text-black":"text-gray-500 hover:text-black/80"}`,children:[n.jsxs("div",{className:"relative flex items-center justify-center",children:[n.jsx(c.icon,{className:`h-6 w-6 md:h-5 md:w-5 transition-all duration-300 ease-in-out ${d?"scale-110 drop-shadow-[0_0_6px_rgba(0,0,0,0.2)]":"group-hover:scale-105 group-hover:drop-shadow-[0_0_4px_rgba(0,0,0,0.1)]"}`}),c.badge&&n.jsx("span",{className:"absolute -top-2 -right-3 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold animate-bounce",children:c.badge})]}),n.jsx("span",{className:"text-xs font-semibold tracking-wide mt-1.5 font-sans",children:c.label}),d&&n.jsx("div",{className:"absolute bottom-0 w-10 h-1 bg-black rounded-full shadow-[0_0_6px_rgba(0,0,0,0.3)] animate-scale-in"}),n.jsx("div",{className:`absolute inset-0 rounded-full bg-black/5 transition-all duration-300 ${d?"opacity-10 scale-105":"opacity-0 group-hover:opacity-10 group-hover:scale-100"}`})]},c.id)})}),n.jsx("style",{children:`
        .animate-scale-in {
          animation: scale-in 0.3s ease-in-out;
        }
        @keyframes scale-in {
          from {
            transform: scaleX(0);
          }
          to {
            transform: scaleX(1);
          }
        }
        .animate-bounce {
          animation: bounce 1.8s ease-in-out infinite;
        }
        @keyframes bounce {
          0%, 100% {
            transform: translateY(-20%);
            animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
          }
          50% {
            transform: translateY(0);
            animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
          }
        }
      `})]})}const NS=()=>{const{setHomeDataLoaded:e}=Vz(),[t,s]=j.useState(!1),[r,i]=j.useState(!1);return j.useEffect(()=>{t&&r&&e(!0)},[t,r,e]),n.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[n.jsx($7,{}),n.jsx(B7,{}),n.jsx(V7,{}),n.jsx(Z7,{}),n.jsx(CW,{onDataLoaded:()=>s(!0)}),n.jsx(EW,{onDataLoaded:()=>i(!0)}),n.jsx($s,{})]})},ls=e=>{if(!e)return"/placeholder-product.jpg";if(e.includes("ngrok-free.app")){const r=new URL(e);return r.searchParams.set("ngrok-skip-browser-warning","true"),r.toString()}if(e.startsWith("/media/")||e.startsWith("media/")){const r=`${os.BASE_URL}${e.startsWith("/")?e:`/${e}`}`,i=new URL(r);return i.searchParams.set("ngrok-skip-browser-warning","true"),i.toString()}if(e.startsWith("http"))return e;const t=`${os.BASE_URL}/media/${e}`,s=new URL(t);return s.searchParams.set("ngrok-skip-browser-warning","true"),s.toString()};function AW(){var E,A,z;const e=nt(),{id:t}=xp();gr();const{toast:s}=hn(),{addToCartWithAuth:r,buyNowWithAuth:i}=Vc(),[a,o]=j.useState(1),[c,d]=j.useState(!1),[f,m]=j.useState(!1),[h,u]=j.useState(null),[p,x]=j.useState(!0),[v,w]=j.useState(""),[y,b]=j.useState(0);j.useEffect(()=>{t&&_()},[t]);const _=async()=>{var O,$;try{x(!0);const G=await fetch(`${rt}search/products/?page_size=1000`,{headers:{"ngrok-skip-browser-warning":"true"}});if(!G.ok)throw new Error("Failed to fetch products");const Y=(O=(await G.json()).results)==null?void 0:O.find(V=>V.id===parseInt(t));if(!Y)throw new Error("Product not found");u(Y);const U=await ke.getToken();if(U)try{const V=await fetch(`${rt}favorites/`,{headers:{Authorization:`Token ${U}`,"ngrok-skip-browser-warning":"true"}});if(V.ok){const F=($=(await V.json()).results)==null?void 0:$.some(q=>q.product.id===Y.id);d(F||!1)}}catch(V){console.log("Could not fetch favorites:",V)}}catch(G){console.error("Error fetching product:",G),w("Failed to load product details")}finally{x(!1)}},N=O=>{o(Math.max(1,a+O))},k=async()=>{if(h){m(!0);try{await r(h.id.toString(),a)}catch(O){console.error("Error adding to cart:",O)}finally{m(!1)}}},I=async()=>{if(!h)return;const O={id:h.id,name:h.name,price:h.price,quantity:a,vendor_name:h.vendor_name,vendor_id:h.vendor_id,images:h.images};await i(O)},C=async()=>{if(!h)return;const O=await ke.getToken();if(!O){s({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const $=await fetch(`${rt}favorites/toggle/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${O}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:h.id})});if(!$.ok)throw new Error("Failed to toggle favorite");const G=await $.json();d(G.is_favorite),s({title:G.is_favorite?"Added to Favorites":"Removed from Favorites",description:G.message})}catch($){console.error("Error toggling favorite:",$),s({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},T=async()=>{if(!h)return;const O={title:h.name,text:`Check out ${h.name} - ${h.price}`,url:window.location.href};try{navigator.share?await navigator.share(O):(await navigator.clipboard.writeText(window.location.href),s({title:"Link Copied",description:"Product link copied to clipboard"}))}catch($){console.error("Error sharing:",$),s({title:"Error",description:"Failed to share product",variant:"destructive"})}};if(p)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(qn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading product details..."})]})});if(v||!h)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:v||"Product not found"}),n.jsx(ne,{onClick:()=>e(-1),children:"Go Back"})]})});const M=((E=h.images)==null?void 0:E.find(O=>O.is_primary))||((A=h.images)==null?void 0:A[0]),P=((z=h.images)==null?void 0:z[y])||M;return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[n.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full hover:bg-gray-100",children:n.jsx(Yt,{className:"h-5 w-5 text-gray-800"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"ghost",size:"icon",onClick:C,className:"rounded-full hover:bg-gray-100",children:n.jsx(pr,{className:`h-5 w-5 ${c?"fill-red-500 text-red-500":"text-gray-800"}`})}),n.jsx(ne,{variant:"ghost",size:"icon",onClick:T,className:"rounded-full hover:bg-gray-100",children:n.jsx(UD,{className:"h-5 w-5 text-gray-800"})})]})]})}),n.jsxs("div",{className:"relative bg-white p-4",children:[n.jsx("div",{className:"aspect-square max-w-md mx-auto mb-4 border-t-2 border-b-2 border-gray-100",children:n.jsx("img",{src:ls(P==null?void 0:P.image_url),alt:h.name,className:"w-full h-full object-cover",onError:O=>{O.target.src="/placeholder-product.jpg"}})}),h.images&&h.images.length>1&&n.jsx("div",{className:"border-t border-b border-gray-200 py-3",children:n.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-md mx-auto",children:h.images.slice(0,4).map((O,$)=>n.jsx("button",{onClick:()=>b($),className:`aspect-square overflow-hidden border-2 transition-all duration-200 ${y===$?"border-blue-500 shadow-md scale-105":"border-gray-300 hover:border-gray-400"}`,children:n.jsx("img",{src:ls(O.image_url),alt:`${h.name} ${$+1}`,className:"w-full h-full object-cover",onError:G=>{G.target.src="/placeholder-product.jpg"}})},O.id))})})]}),n.jsxs("div",{className:"bg-white px-4 py-6 space-y-4 shadow-sm",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:h.name}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-baseline gap-2",children:n.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["",h.price]})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"4.5"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(De,{variant:"secondary",className:"bg-blue-100 text-blue-800 capitalize",children:h.category}),h.quantity>0?n.jsxs(De,{variant:"secondary",className:"bg-green-100 text-green-800",children:["In Stock (",h.quantity," available)"]}):n.jsx(De,{variant:"destructive",children:"Out of Stock"})]})]}),n.jsxs("div",{className:"bg-white px-4 py-6 space-y-2 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-base text-gray-900",children:"Description"}),n.jsx("div",{className:"text-sm text-gray-600 leading-relaxed",dangerouslySetInnerHTML:{__html:h.description}}),h.short_description&&n.jsxs("p",{className:"text-sm text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Summary:"})," ",h.short_description]})]}),h.tags&&h.tags.length>0&&n.jsxs("div",{className:"bg-white px-4 py-6 space-y-2 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-base text-gray-900",children:"Tags"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:h.tags.map((O,$)=>n.jsx(De,{variant:"outline",className:"text-xs border-gray-300 text-gray-700",children:O},$))})]}),n.jsx("div",{className:"mx-4 my-4 bg-white shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e(`/vendor/${h.vendor_id}`),children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-100 flex items-center justify-center text-2xl",children:""}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-base text-gray-900",children:h.vendor_name}),n.jsx(bi,{className:"h-4 w-4 text-primary"})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:"4.8"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dr,{className:"h-3 w-3"}),n.jsx("span",{children:"30-45 mins"})]})]})]})]})}),n.jsxs("div",{className:"bg-white px-4 py-6 flex items-center justify-between shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-base text-gray-900",children:"Quantity"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"outline",size:"icon",onClick:()=>N(-1),className:"h-8 w-8 rounded-full",children:n.jsx(BD,{className:"h-4 w-4"})}),n.jsx("span",{className:"font-semibold text-lg w-8 text-center",children:a}),n.jsx(ne,{variant:"outline",size:"icon",onClick:()=>N(1),className:"h-8 w-8 rounded-full",children:n.jsx(xn,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:n.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[n.jsx(ne,{variant:"outline",className:"flex-1 h-12 rounded-lg text-gray-800 font-semibold",onClick:k,disabled:f||h.quantity===0,children:f?"Adding...":"Add to Cart"}),n.jsx(ne,{className:"flex-1 h-12 rounded-lg bg-green-600 hover:bg-green-700 text-white font-semibold",onClick:I,disabled:f||h.quantity===0,children:f?"Processing...":"Buy Now"})]})})]})}const Te=j.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:Ze("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Te.displayName="Card";const wt=j.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:Ze("flex flex-col space-y-1.5 p-6",e),...t}));wt.displayName="CardHeader";const jt=j.forwardRef(({className:e,...t},s)=>n.jsx("h3",{ref:s,className:Ze("text-2xl font-semibold leading-none tracking-tight",e),...t}));jt.displayName="CardTitle";const OW=j.forwardRef(({className:e,...t},s)=>n.jsx("p",{ref:s,className:Ze("text-sm text-muted-foreground",e),...t}));OW.displayName="CardDescription";const Oe=j.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:Ze("p-6 pt-0",e),...t}));Oe.displayName="CardContent";const RW=j.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:Ze("flex items-center p-6 pt-0",e),...t}));RW.displayName="CardFooter";var Tp="Tabs",[LW,Qse]=ds(Tp,[qc]),$O=qc(),[MW,_w]=LW(Tp),zO=j.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:d="automatic",...f}=e,m=Uc(c),[h,u]=Br({prop:r,onChange:i,defaultProp:a??"",caller:Tp});return n.jsx(MW,{scope:s,baseId:$r(),value:h,onValueChange:u,orientation:o,dir:m,activationMode:d,children:n.jsx(Xe.div,{dir:m,"data-orientation":o,...f,ref:t})})});zO.displayName=Tp;var BO="TabsList",VO=j.forwardRef((e,t)=>{const{__scopeTabs:s,loop:r=!0,...i}=e,a=_w(BO,s),o=$O(s);return n.jsx(Rb,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:n.jsx(Xe.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});VO.displayName=BO;var UO="TabsTrigger",qO=j.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,disabled:i=!1,...a}=e,o=_w(UO,s),c=$O(s),d=ZO(o.baseId,r),f=GO(o.baseId,r),m=r===o.value;return n.jsx(Lb,{asChild:!0,...c,focusable:!i,active:m,children:n.jsx(Xe.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...a,ref:t,onMouseDown:Me(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Me(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Me(e.onFocus,()=>{const h=o.activationMode!=="manual";!m&&!i&&h&&o.onValueChange(r)})})})});qO.displayName=UO;var HO="TabsContent",WO=j.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,forceMount:i,children:a,...o}=e,c=_w(HO,s),d=ZO(c.baseId,r),f=GO(c.baseId,r),m=r===c.value,h=j.useRef(m);return j.useEffect(()=>{const u=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(u)},[]),n.jsx(Jn,{present:i||m,children:({present:u})=>n.jsx(Xe.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!u,id:f,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:u&&a})})});WO.displayName=HO;function ZO(e,t){return`${e}-trigger-${t}`}function GO(e,t){return`${e}-content-${t}`}var IW=zO,KO=VO,YO=qO,XO=WO;const Si=IW,Hr=j.forwardRef(({className:e,...t},s)=>n.jsx(KO,{ref:s,className:Ze("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Hr.displayName=KO.displayName;const Ct=j.forwardRef(({className:e,...t},s)=>n.jsx(YO,{ref:s,className:Ze("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ct.displayName=YO.displayName;const dt=j.forwardRef(({className:e,...t},s)=>n.jsx(XO,{ref:s,className:Ze("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));dt.displayName=XO.displayName;const DW=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function FW(){var N;const e=nt(),{vendorId:t}=xp(),[s,r]=j.useState(!1),[i,a]=j.useState(null),[o,c]=j.useState([]),[d,f]=j.useState(!0),[m,h]=j.useState(null),[u,p]=j.useState(xt.getLocation()),[x,v]=j.useState("N/A"),{toast:w}=hn(),{addToCart:y}=gr();j.useEffect(()=>{const k=xt.subscribe(p);return xt.startTracking(),k},[]),j.useEffect(()=>{t&&b()},[t]);const b=async()=>{var k;try{f(!0),h(null);const{response:I,data:C}=await Ie(`/api/vendors/${t}/`);if(!I.ok)throw I.status===404?new Error("Vendor not found"):new Error("Failed to fetch vendor profile");if(!C)throw new Error("No vendor data received");a(C);const T=xt.getLocation();if(T&&C.latitude&&C.longitude){const E=DW(T.latitude,T.longitude,C.latitude,C.longitude);v(`${E.toFixed(1)} km`)}const{response:M,data:P}=await Ie(`search/products/?search=${encodeURIComponent(C.business_name)}`);if(M.ok&&P){const E=((k=P.results)==null?void 0:k.filter(A=>A.vendor_name===C.business_name))||[];c(E)}if(!I.ok)throw I.status===404?new Error("Vendor not found"):new Error("Failed to fetch vendor profile")}catch(I){console.error("Error fetching vendor profile:",I),h(I.message),w({title:"Error",description:"Failed to load vendor profile",variant:"destructive"})}finally{f(!1)}},_=k=>{const I=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],C=[];for(const T of I){const M=`${T}_open`,P=`${T}_close`,E=`${T}_closed`;!k[E]&&k[M]&&k[P]&&C.push(`${T.charAt(0).toUpperCase()+T.slice(1)}: ${k[M]} - ${k[P]}`)}return C.length>0?C.join(", "):"Hours not specified"};return d?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(qn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading vendor profile..."})]})}):m||!i?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center justify-between p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold",children:"Vendor Not Found"}),n.jsx("div",{className:"w-10"})]})}),n.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:n.jsxs("div",{className:"text-center",children:[n.jsx(gs,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vendor Not Found"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"The vendor you're looking for doesn't exist or is not available."}),n.jsx(ne,{onClick:()=>e("/search"),children:"Browse Vendors"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center justify-between p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold truncate",children:i.business_name}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>r(!s),className:"p-2",children:n.jsx(pr,{className:`h-5 w-5 ${s?"fill-red-500 text-red-500":""}`})})]})}),n.jsx("div",{className:"p-4 bg-gradient-subtle",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:(N=i.user_info)!=null&&N.profile_picture?n.jsx("img",{src:ls(i.user_info.profile_picture),alt:i.business_name,className:"w-full h-full object-cover",onError:k=>{k.target.src="/placeholder-vendor.jpg"}}):n.jsx(gs,{className:"h-8 w-8 text-gray-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-lg font-bold",children:i.business_name}),i.is_approved&&n.jsx(bi,{className:"h-5 w-5 text-green-500"}),n.jsx(De,{variant:i.is_active?"default":"destructive",className:"text-xs",children:i.is_active?"Open":"Closed"})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),n.jsx("span",{className:"font-medium",children:"4.5"}),n.jsx("span",{children:"(Reviews coming soon)"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-4 w-4"}),n.jsx("span",{children:x})]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:i.categories&&i.categories.map((k,I)=>n.jsx(De,{variant:"secondary",className:"text-xs",children:k},I))})]})]})}),n.jsx("div",{className:"px-4 py-3 bg-card border-b border-border/50",children:n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx(dr,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery"}),n.jsx("p",{className:"text-sm font-medium",children:i.estimated_delivery_time||"30-45 mins"})]}),n.jsxs("div",{children:[n.jsx(gs,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Min Order"}),n.jsxs("p",{className:"text-sm font-medium",children:["",i.min_order_amount||"0"]})]}),n.jsxs("div",{children:[n.jsx(Kt,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Type"}),n.jsx("p",{className:"text-sm font-medium capitalize",children:i.business_type})]})]})}),n.jsxs("div",{className:"px-4 py-3 flex gap-3",children:[n.jsxs(ne,{variant:"brand",className:"flex-1 h-10",onClick:()=>e(`/messages?vendor=${i.user}`),children:[n.jsx(Ro,{className:"h-4 w-4 mr-2"}),"Message"]}),n.jsxs(ne,{variant:"outline",className:"flex-1 h-10",onClick:()=>{if(i.latitude&&i.longitude&&u){const k=`https://www.google.com/maps/dir/${u.latitude},${u.longitude}/${i.latitude},${i.longitude}`;window.open(k,"_blank")}else if(i.latitude&&i.longitude){const k=`https://www.google.com/maps/place/${i.latitude},${i.longitude}`;window.open(k,"_blank")}},children:[n.jsx(Kt,{className:"h-4 w-4 mr-2"}),"View in Map"]})]}),n.jsx("div",{className:"flex-1",children:n.jsxs(Si,{defaultValue:"products",className:"w-full",children:[n.jsxs(Hr,{className:"grid w-full grid-cols-3 mx-4",children:[n.jsx(Ct,{value:"products",children:"Products"}),n.jsx(Ct,{value:"about",children:"About"}),n.jsx(Ct,{value:"reviews",children:"Reviews"})]}),n.jsx(dt,{value:"products",className:"p-4 space-y-3",children:o.length>0?n.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.map(k=>{var C,T;const I=((C=k.images)==null?void 0:C.find(M=>M.is_primary))||((T=k.images)==null?void 0:T[0]);return n.jsx(Te,{className:"p-3 cursor-pointer hover:shadow-md transition-smooth",onClick:()=>e(`/product/${k.id}`),children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"aspect-square mb-2 bg-gray-100 rounded-lg overflow-hidden",children:n.jsx("img",{src:ls(I==null?void 0:I.image_url),alt:k.name,className:"w-full h-full object-cover",onError:M=>{M.target.src="/placeholder-product.jpg"}})}),n.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:k.name}),n.jsxs("p",{className:"font-semibold text-primary text-sm mb-2",children:["",k.price]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ne,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",disabled:k.quantity===0,onClick:M=>{M.stopPropagation(),y(k.id,1)},children:n.jsx(Ds,{className:"h-3 w-3"})}),n.jsxs(ne,{size:"sm",className:"flex-1 h-7 text-xs bg-green-600 hover:bg-green-700",disabled:k.quantity===0,onClick:M=>{M.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:k.id,name:k.name,price:k.price,quantity:1,vendor_name:k.vendor_name,images:k.images}}})},children:[n.jsx(xn,{className:"h-3 w-3"}),"Buy"]})]})]})},k.id)})}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(gs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"font-semibold mb-2",children:"No Products Available"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"This vendor hasn't added any products yet."})]})}),n.jsxs(dt,{value:"about",className:"p-4 space-y-4",children:[i.description&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),n.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:i.description})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Business Information"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(gs,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:"Owner:"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:i.owner_name})]}),i.business_email&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ro,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:"Email:"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:i.business_email})]}),i.business_phone&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ro,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:"Phone:"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:i.business_phone})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Location"}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Kt,{className:"h-4 w-4 text-primary mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:i.business_address}),i.location_address&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.location_address}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i.city,", ",i.state," - ",i.pincode]})]})]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Operating Hours"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:_(i)})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Services"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.home_delivery&&n.jsx(De,{variant:"secondary",children:"Home Delivery"}),i.pickup_service&&n.jsx(De,{variant:"secondary",children:"Pickup Service"}),i.online_ordering&&n.jsx(De,{variant:"secondary",children:"Online Ordering"}),i.bulk_orders&&n.jsx(De,{variant:"secondary",children:"Bulk Orders"}),i.subscription_service&&n.jsx(De,{variant:"secondary",children:"Subscription"}),i.loyalty_program&&n.jsx(De,{variant:"secondary",children:"Loyalty Program"})]})]})]}),n.jsx(dt,{value:"reviews",className:"p-4",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx(dn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Reviews coming soon"})]})})]})})]})}function $W(){const e=nt();return j.useEffect(()=>{const t=setTimeout(()=>{e("/home")},2e3);return()=>clearTimeout(t)},[e]),n.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:ea,alt:"ezeyway",className:"w-20 h-20 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Page Not Found"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Redirecting to home..."}),n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})})}function Ap(e){const t=j.useRef({value:e,previous:e});return j.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Op="Checkbox",[zW,Jse]=ds(Op),[BW,Nw]=zW(Op);function VW(e){const{__scopeCheckbox:t,checked:s,children:r,defaultChecked:i,disabled:a,form:o,name:c,onCheckedChange:d,required:f,value:m="on",internal_do_not_use_render:h}=e,[u,p]=Br({prop:s,defaultProp:i??!1,onChange:d,caller:Op}),[x,v]=j.useState(null),[w,y]=j.useState(null),b=j.useRef(!1),_=x?!!o||!!x.closest("form"):!0,N={checked:u,disabled:a,setChecked:p,control:x,setControl:v,name:c,form:o,value:m,hasConsumerStoppedPropagationRef:b,required:f,defaultChecked:Da(i)?!1:i,isFormControl:_,bubbleInput:w,setBubbleInput:y};return n.jsx(BW,{scope:t,...N,children:UW(h)?h(N):r})}var QO="CheckboxTrigger",JO=j.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...r},i)=>{const{control:a,value:o,disabled:c,checked:d,required:f,setControl:m,setChecked:h,hasConsumerStoppedPropagationRef:u,isFormControl:p,bubbleInput:x}=Nw(QO,e),v=ft(i,m),w=j.useRef(d);return j.useEffect(()=>{const y=a==null?void 0:a.form;if(y){const b=()=>h(w.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[a,h]),n.jsx(Xe.button,{type:"button",role:"checkbox","aria-checked":Da(d)?"mixed":d,"aria-required":f,"data-state":rR(d),"data-disabled":c?"":void 0,disabled:c,value:o,...r,ref:v,onKeyDown:Me(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Me(s,y=>{h(b=>Da(b)?!0:!b),x&&p&&(u.current=y.isPropagationStopped(),u.current||y.stopPropagation())})})});JO.displayName=QO;var Sw=j.forwardRef((e,t)=>{const{__scopeCheckbox:s,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:d,onCheckedChange:f,form:m,...h}=e;return n.jsx(VW,{__scopeCheckbox:s,checked:i,defaultChecked:a,disabled:c,required:o,onCheckedChange:f,name:r,form:m,value:d,internal_do_not_use_render:({isFormControl:u})=>n.jsxs(n.Fragment,{children:[n.jsx(JO,{...h,ref:t,__scopeCheckbox:s}),u&&n.jsx(sR,{__scopeCheckbox:s})]})})});Sw.displayName=Op;var eR="CheckboxIndicator",tR=j.forwardRef((e,t)=>{const{__scopeCheckbox:s,forceMount:r,...i}=e,a=Nw(eR,s);return n.jsx(Jn,{present:r||Da(a.checked)||a.checked===!0,children:n.jsx(Xe.span,{"data-state":rR(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});tR.displayName=eR;var nR="CheckboxBubbleInput",sR=j.forwardRef(({__scopeCheckbox:e,...t},s)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:c,disabled:d,name:f,value:m,form:h,bubbleInput:u,setBubbleInput:p}=Nw(nR,e),x=ft(s,p),v=Ap(a),w=cp(r);j.useEffect(()=>{const b=u;if(!b)return;const _=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(_,"checked").set,I=!i.current;if(v!==a&&k){const C=new Event("click",{bubbles:I});b.indeterminate=Da(a),k.call(b,Da(a)?!1:a),b.dispatchEvent(C)}},[u,v,a,i]);const y=j.useRef(Da(a)?!1:a);return n.jsx(Xe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:c,disabled:d,name:f,value:m,form:h,...t,tabIndex:-1,ref:x,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});sR.displayName=nR;function UW(e){return typeof e=="function"}function Da(e){return e==="indeterminate"}function rR(e){return Da(e)?"indeterminate":e?"checked":"unchecked"}const by=j.forwardRef(({className:e,...t},s)=>n.jsx(Sw,{ref:s,className:Ze("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(tR,{className:Ze("flex items-center justify-center text-current"),children:n.jsx(ip,{className:"h-4 w-4"})})}));by.displayName=Sw.displayName;const qW=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3},SS=()=>{const[e,t]=j.useState([]),[s,r]=j.useState(!0),{addToCart:i}=gr(),a=nt();j.useEffect(()=>{o()},[]);const o=async()=>{try{const c={"ngrok-skip-browser-warning":"true"},d=xt.getLocation(),f=new URLSearchParams({page_size:"6"});d&&(f.append("latitude",d.latitude.toString()),f.append("longitude",d.longitude.toString()));const u=((await(await fetch(`${rt}search/products/?${f}`,{headers:c})).json()).results||[]).map(p=>{var w,y;const x=((w=p.images)==null?void 0:w.find(b=>b.is_primary))||((y=p.images)==null?void 0:y[0]);let v="N/A";return d&&p.vendor_latitude&&p.vendor_longitude&&(v=`${qW(d.latitude,d.longitude,p.vendor_latitude,p.vendor_longitude).toFixed(1)} km`),{id:p.id,name:p.name,vendor:p.vendor_name||"Unknown Vendor",price:p.price,image:(x==null?void 0:x.image_url)||"/placeholder-product.jpg",distance:v,inStock:p.quantity>0}});t(u)}catch(c){console.error("Failed to fetch products:",c)}finally{r(!1)}};return s?n.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 md:grid-cols-3 md:gap-3",children:[...Array(6)].map((c,d)=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden animate-pulse",children:[n.jsx("div",{className:"h-24 bg-gray-200"}),n.jsxs("div",{className:"p-2 space-y-2",children:[n.jsx("div",{className:"h-3 bg-gray-200 rounded"}),n.jsx("div",{className:"h-2 bg-gray-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},d))}):n.jsxs("div",{children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3 px-2",children:"Products Near You"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 md:grid-cols-3 md:gap-3",children:e.map(c=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:border-[#856043]/30 overflow-hidden shadow-sm",children:[n.jsx("div",{className:"relative h-24 overflow-hidden bg-gray-100 cursor-pointer",onClick:()=>a(`/product/${c.id}`),children:n.jsx("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:d=>{d.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),n.jsxs("div",{className:"p-2 space-y-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2 leading-tight",children:c.name}),n.jsx("p",{className:"text-[10px] text-gray-500",children:c.vendor}),n.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500",children:[n.jsx(Kt,{className:"h-2 w-2"}),n.jsx("span",{children:c.distance})]}),n.jsxs("p",{className:"text-xs font-bold text-[#856043]",children:["",c.price]}),n.jsxs(ne,{variant:"outline",size:"sm",className:"w-full border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white rounded-md text-[10px] py-1",disabled:!c.inStock,onClick:()=>i(c.id,1),children:[n.jsx(Ds,{className:"w-2 h-2 mr-1"}),"Add to Cart"]})]})]},c.id))})]})};function HW(){const{toast:e}=hn(),{cart:t,loading:s,updateCartItem:r,removeFromCart:i}=gr();j.useState("");const[a,o]=j.useState(0),[c,d]=j.useState([]),f=nt(),m=[];j.useEffect(()=>{t!=null&&t.items&&d([])},[t]);const h=(t==null?void 0:t.items)||[],u=h.filter(P=>c.includes(P.id)),p=c.length===h.length&&h.length>0,x=P=>{d(P?h.map(E=>E.id):[])},v=P=>{d(E=>E.includes(P)?E.filter(A=>A!==P):[...E,P])},w=async(P,E)=>{const A=h.find(z=>z.id===P);if(A){const z=A.quantity+E;z>0&&await r(P,z)}},y=async P=>{await i(P)},b=async()=>{if(c.length!==0){for(const P of c)await i(P);d([])}},_=P=>{y(P.id),e({title:"Feature Coming Soon",description:"Save for later feature will be available soon"})},N=P=>{e({title:"Feature Coming Soon",description:"Move to cart feature will be available soon"})},I=u.reduce((P,E)=>P+parseFloat(E.total_price.toString()),0),C=I*.05,T=I*a,M=I+C-T;return s?n.jsx("div",{className:"min-h-screen bg-gray-50 font-sans flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ds,{className:"mx-auto h-10 w-10 text-[#856043] mb-2 animate-pulse"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading cart..."})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-sm border-b py-2 px-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-2",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[n.jsx(Ds,{className:"w-4 h-4 mr-1 text-[#856043]"}),"(",h.length,")"]}),n.jsx(ne,{variant:"outline",className:"border-[#856043] text-[#856043] hover:bg-[#856043]/10 hover:text-[#856043] rounded-md text-xs font-medium py-1 px-2",onClick:()=>f("/search"),children:"Continue Shopping"})]})}),n.jsx("main",{className:"max-w-7xl mx-auto px-3 py-4 pb-52 overflow-y-auto",style:{height:"calc(100vh - 120px)"},children:h.length===0?n.jsxs("div",{children:[n.jsxs("div",{className:"text-center py-6",children:[n.jsx(Ds,{className:"mx-auto h-10 w-10 text-[#856043] mb-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Your Cart is Empty"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Discover products near you"})]}),n.jsx(SS,{})]}):n.jsxs("div",{className:"md:flex md:gap-4 space-y-2 md:space-y-0",children:[n.jsxs("div",{className:"md:w-1/2 space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(by,{id:"select-all",checked:p,onCheckedChange:x,className:"data-[state=checked]:bg-[#856043] data-[state=checked]:border-[#856043]"}),n.jsxs("label",{htmlFor:"select-all",className:"text-sm font-medium text-gray-700 cursor-pointer",children:["Select all (",h.length,")"]})]}),n.jsxs(ne,{variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-xs px-3 py-1 rounded-md",onClick:b,disabled:c.length===0,children:[n.jsx(qa,{className:"w-3 h-3 mr-1"}),"Delete (",c.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:n.jsx(AN,{children:h.map((P,E)=>{var A,z;return n.jsxs(Jl.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:E*.1},className:"bg-white p-3 flex items-center gap-3 rounded-lg border border-gray-200 shadow-sm hover:bg-gray-50 transition-colors",children:[n.jsx(by,{checked:c.includes(P.id),onCheckedChange:()=>v(P.id),className:"data-[state=checked]:bg-[#856043] data-[state=checked]:border-[#856043] flex-shrink-0"}),n.jsx("div",{className:"w-12 h-12 flex-shrink-0 overflow-hidden rounded",children:n.jsx("img",{src:((z=(A=P.product.images)==null?void 0:A[0])==null?void 0:z.image_url)||"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200",alt:P.product.name,className:"w-full h-full object-cover",onError:O=>{O.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 truncate",children:P.product.name}),n.jsxs("p",{className:"text-[10px] text-gray-500 truncate",children:["Sold by ",P.product.vendor_name]}),n.jsx("div",{className:"flex items-center gap-1 mt-1",children:n.jsxs("p",{className:"text-xs font-bold text-[#856043]",children:["",P.product.price]})})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ne,{variant:"outline",size:"sm",className:"h-5 w-5 p-0 text-gray-600 border-gray-300 hover:border-[#856043] hover:text-[#856043]",onClick:()=>w(P.id,-1),children:"-"}),n.jsx("span",{className:"text-xs min-w-[1rem] text-center",children:P.quantity}),n.jsx(ne,{variant:"outline",size:"sm",className:"h-5 w-5 p-0 text-gray-600 border-gray-300 hover:border-[#856043] hover:text-[#856043]",onClick:()=>w(P.id,1),children:"+"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-1 text-[#856043] hover:text-[#856043]/90 hover:bg-[#856043]/5",onClick:()=>_(P),children:n.jsx(pr,{className:"w-3 h-3"})}),n.jsx(ne,{variant:"ghost",size:"sm",className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>y(P.id),children:n.jsx(qa,{className:"w-3 h-3"})})]})]},P.id)})})}),m.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2 px-2",children:"Saved for Later"}),n.jsx(AN,{children:m.map((P,E)=>n.jsxs(Jl.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:E*.1},className:"bg-white p-2 flex items-center gap-2 border-b border-gray-300 hover:bg-gray-50",children:[n.jsx("div",{className:"w-12 h-12 flex-shrink-0 overflow-hidden rounded",children:n.jsx("img",{src:P.image,alt:P.name,className:"w-full h-full object-cover",onError:A=>{A.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 truncate",children:P.name}),n.jsxs("p",{className:"text-[10px] text-gray-500 truncate",children:["Sold by ",P.vendor]}),n.jsx("p",{className:"text-xs font-bold text-[#856043] mt-1",children:P.price})]}),n.jsx(ne,{variant:"outline",size:"sm",className:"border-[#856043] text-[#856043] hover:bg-[#856043]/10 text-[10px] px-2 py-1",onClick:()=>N(),children:"Move to Cart"})]},P.id))})]})]}),n.jsx("div",{className:"md:w-1/2",children:n.jsx(SS,{})})]})}),h.length>0&&n.jsx(Jl.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"fixed bottom-20 left-0 right-0 bg-white border-t border-gray-300 z-40",children:n.jsx("div",{className:"max-w-7xl mx-auto px-3",children:n.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"30vh"},children:n.jsx("div",{className:"py-2",children:n.jsxs("div",{className:"md:flex md:items-center md:justify-between md:gap-6",children:[n.jsxs("div",{className:"md:flex-1",children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Order Summary"}),n.jsxs("div",{className:"space-y-2 text-xs mb-4 md:mb-0",children:[n.jsxs("div",{className:"flex justify-between text-gray-700",children:[n.jsxs("span",{children:["Subtotal (",u.length," items)"]}),n.jsxs("span",{className:"font-medium",children:["",I.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-gray-700",children:[n.jsx("span",{children:"Taxes (5%)"}),n.jsxs("span",{className:"font-medium",children:["",C.toFixed(2)]})]}),n.jsx("hr",{className:"border-gray-300 my-2"}),n.jsxs("div",{className:"flex justify-between font-bold text-sm text-gray-900",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{children:["",M.toFixed(2)]})]}),n.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-600 mt-2",children:[n.jsx(Zl,{className:"w-3 h-3"}),n.jsx("span",{className:"text-xs font-semibold",children:"Estimated delivery: 50-60"})]})]})]}),n.jsx(ne,{size:"lg",className:"w-full md:w-auto md:px-8 rounded-md bg-[#856043] text-white hover:bg-[#856043]/90 py-3 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed mb-2 md:mb-0",disabled:u.length===0,onClick:()=>f("/checkout",{state:{selectedItems:u}}),children:"Proceed to Checkout"})]})})})})}),n.jsx($s,{})]})}const ym=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3},WW=()=>{const e=27.6398805,t=85.3303725,s=27.66424179701499,r=85.3465231243003,i=ym(e,t,s,r);console.log(` Your coordinates test: ${i.toFixed(3)} km (Google shows: 5.1 km)`);const a={lat:40.7128,lon:-74.006},o={lat:34.0522,lon:-118.2437},c=ym(a.lat,a.lon,o.lat,o.lon);console.log(`Test: NYC to LA = ${c.toFixed(2)} km (Google: ~3944 km)`),console.log(` Verify on Google Maps: https://www.google.com/maps/dir/${e},${t}/${s},${r}`)};function ZW(){const e=nt(),[t,s]=Eb(),[r,i]=j.useState(t.get("q")||""),[a,o]=j.useState({products:[],vendors:[]}),[c,d]=j.useState("all"),[f,m]=j.useState(!1),[h,u]=j.useState(xt.getLocation()),[p,x]=j.useState({page:1,hasMore:!0}),[v,w]=j.useState(new Set),[y,b]=j.useState(!1),[_,N]=j.useState(""),[k,I]=j.useState([]),{addToCart:C}=gr(),{toast:T}=hn(),[M,P]=j.useState([]),E=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const F=xt.subscribe(u);return xt.startTracking(),WW(),A(),Y(),F},[]),j.useEffect(()=>{s(r?{q:r}:{}),x({page:1,hasMore:!0}),A(1,r)},[r,s]),j.useEffect(()=>{A(1,r)},[_,k]),j.useEffect(()=>{h&&(console.log(" Location updated, refetching data:",h),A(1,r))},[h]);const A=async(F=1,q="")=>{var W;m(!0);try{const K={"ngrok-skip-browser-warning":"true"},B=xt.getLocation();console.log(" Frontend location check:",{userLocation:h,currentLocation:B});const Z=new URLSearchParams({page:F.toString(),page_size:"10"});q&&Z.append("search",q),B?(Z.append("latitude",B.latitude.toString()),Z.append("longitude",B.longitude.toString()),console.log(" Sending location to API:",B)):console.log(" No location available for API call");const[se,J]=await Promise.all([fetch(`${rt}search/products/?${Z}`,{headers:K}),fetch(`${rt}search/vendors/?${Z}`,{headers:K})]),ie=await se.json(),le=await J.json(),Q=z(ie.results||[]),ue=O(le.results||[]),_e=[...new Set(((W=ie.results)==null?void 0:W.map(me=>me.category).filter(Boolean))||[])];P(_e),o(F===1?{products:Q,vendors:ue}:me=>({products:[...me.products,...Q],vendors:[...me.vendors,...ue]})),x({page:F,hasMore:ie.next!==null||le.next!==null})}catch(K){console.error("Fetch error:",K)}finally{m(!1)}},z=F=>{const q=xt.getLocation();let W=F.map(K=>{var J,ie;const B=((J=K.images)==null?void 0:J.find(le=>le.is_primary))||((ie=K.images)==null?void 0:ie[0]);let Z="N/A",se=1/0;return q&&K.vendor_latitude&&K.vendor_longitude&&(se=ym(q.latitude,q.longitude,K.vendor_latitude,K.vendor_longitude),Z=`${se.toFixed(1)} km`),{id:K.id,name:K.name,vendor:K.vendor_name||"Unknown Vendor",price:`${K.price}`,priceValue:parseFloat(K.price),image:(B==null?void 0:B.image_url)||"/placeholder-product.jpg",rating:4.5,distance:Z,distanceValue:se,deliveryTime:"30-45 mins",inStock:K.quantity>0,category:K.category}});return k.length>0&&(W=W.filter(K=>k.includes(K.category))),_==="price_low"?W.sort((K,B)=>K.priceValue-B.priceValue):_==="price_high"?W.sort((K,B)=>B.priceValue-K.priceValue):W.sort((K,B)=>K.distanceValue-B.distanceValue),W},O=F=>{const q=xt.getLocation();return F.map(W=>{var Z;let K="N/A",B=1/0;return q&&W.latitude&&W.longitude&&(B=ym(q.latitude,q.longitude,W.latitude,W.longitude),K=`${B.toFixed(1)} km`),{id:W.id,name:W.business_name,image:((Z=W.user_info)==null?void 0:Z.profile_picture)||"/placeholder-vendor.jpg",rating:4.5,distance:K,distanceValue:B,deliveryTime:"30-45 mins",categories:W.categories||[]}}).sort((W,K)=>W.distanceValue-K.distanceValue)},$=()=>{!f&&p.hasMore&&A(p.page+1,r)},G=F=>{e(`/product/${F}`)},X=F=>{e(`/vendor/${F.id}`)},Y=async()=>{var q;const F=await ke.getToken();if(F)try{const W=await fetch(`${rt}favorites/`,{headers:{Authorization:`Token ${F}`,"ngrok-skip-browser-warning":"true"}});if(W.ok){const K=await W.json(),B=new Set(((q=K.results)==null?void 0:q.map(Z=>Z.product.id))||[]);w(B)}}catch(W){console.error("Failed to fetch favorites:",W)}},U=async(F,q)=>{q.stopPropagation();const W=await ke.getToken();if(!W){T({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const K=await fetch(`${rt}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${W}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:F})});if(K.ok){const B=await K.json(),Z=new Set(v);B.is_favorite?Z.add(F):Z.delete(F),w(Z),T({title:B.is_favorite?"Added to Favorites":"Removed from Favorites",description:B.message})}}catch{T({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},V=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6",children:a.products.map(F=>n.jsxs(Te,{className:"overflow-hidden",children:[n.jsxs("div",{className:"cursor-pointer",onClick:()=>G(F.id),children:[n.jsxs("div",{className:"aspect-square md:aspect-[4/3] relative",children:[n.jsx("img",{src:F.image,alt:F.name,className:"w-full h-full object-cover",onError:q=>{q.target.src="/placeholder-product.jpg"}}),n.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:q=>U(F.id,q),children:n.jsx(pr,{className:`h-4 w-4 ${v.has(F.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),n.jsx(De,{variant:F.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:F.inStock?"In Stock":"Out of Stock"})]}),n.jsxs(Oe,{className:"p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:F.name}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:F.vendor}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:F.rating})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:F.distance})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-bold text-primary text-sm",children:F.price}),n.jsx("span",{className:"text-xs text-muted-foreground",children:F.deliveryTime})]})]})]}),n.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!F.inStock,onClick:q=>{q.stopPropagation(),C(F.id,1)},children:[n.jsx(Ds,{className:"h-3 w-3 mr-1"}),"Cart"]}),n.jsxs(ne,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!F.inStock,onClick:q=>{q.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:F.id,name:F.name,price:F.price.replace("",""),quantity:1,vendor_name:F.vendor,images:[{image_url:F.image}]}}})},children:[n.jsx(xn,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},F.id))}),p.hasMore&&n.jsx("div",{className:"text-center py-4",children:n.jsxs(ne,{onClick:$,disabled:f,variant:"outline",children:[f?n.jsx(qn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]}),R=()=>n.jsx("div",{className:"space-y-3",children:a.vendors.map(F=>n.jsx(Te,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>X(F),children:n.jsx(Oe,{className:"p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("img",{src:F.image,alt:F.name,className:"w-16 h-16 object-cover rounded-full",onError:q=>{q.target.src="/placeholder-vendor.jpg"}}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-base mb-1",children:F.name}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:F.rating})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:F.distance})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dr,{className:"h-3 w-3"}),n.jsx("span",{children:F.deliveryTime})]})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:F.categories.map((q,W)=>n.jsx(De,{variant:"secondary",className:"text-xs",children:q},W))})]})]})})},F.id))});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center gap-3 p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(ve,{placeholder:"Search products, vendors...",value:r,onChange:F=>i(F.target.value),className:"pl-10 pr-4 py-2"})]}),n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>b(!0),children:n.jsx(_i,{className:"h-5 w-5"})})]})}),n.jsx("div",{className:"px-4 py-3 border-b border-border/50",children:n.jsx("div",{className:"flex gap-2",children:[{id:"all",label:"All"},{id:"products",label:"Products"},{id:"vendors",label:"Vendors"}].map(F=>n.jsx(ne,{variant:c===F.id?"default":"ghost",size:"sm",onClick:()=>d(F.id),className:"flex-1",children:F.label},F.id))})}),n.jsxs("div",{className:"p-4 pb-20",children:[r&&n.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:[c==="all"&&`Found ${a.products.length} products and ${a.vendors.length} vendors`,c==="products"&&`Found ${a.products.length} products`,c==="vendors"&&`Found ${a.vendors.length} vendors`,r&&" for ",n.jsxs("span",{className:"font-medium",children:['"',r,'"']})]}),(c==="all"||c==="products")&&a.products.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Products"}),V()]}),(c==="all"||c==="vendors")&&a.vendors.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Vendors"}),R()]}),r&&a.products.length===0&&a.vendors.length===0&&!f&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Lo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No results found"}),n.jsx("p",{className:"text-muted-foreground",children:"Try searching for products or vendors with different keywords"})]}),!r&&!f&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Lo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Search for anything"}),n.jsx("p",{className:"text-muted-foreground",children:"Find products, vendors, and more in your area"})]}),f&&a.products.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(qn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),y&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>b(!1),children:n.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:F=>F.stopPropagation(),children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>b(!1),children:""})]})}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),n.jsx("div",{className:"space-y-2",children:E.map(F=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"sort",value:F.value,checked:_===F.value,onChange:q=>N(q.target.value),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:F.label})]},F.value))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-3",children:"Categories"}),n.jsx("div",{className:"space-y-2",children:M.map(F=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:k.includes(F),onChange:q=>{q.target.checked?I([...k,F]):I(k.filter(W=>W!==F))},className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:F})]},F))})]}),n.jsx(ne,{variant:"outline",className:"w-full",onClick:()=>{N(""),I([])},children:"Clear All Filters"})]})]})}),n.jsx($s,{})]})}const kS=os.BASE_URL;class GW{async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await ke.getToken()}`,"ngrok-skip-browser-warning":"true"}}async getFavorites(){try{const t=await fetch(`${kS}/favorites/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch favorites");const s=await t.json();return s.results||s}catch(t){throw console.error("Error fetching favorites:",t),t}}async toggleFavorite(t){try{const s=await fetch(`${kS}/favorites/toggle/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({product_id:t})});if(!s.ok)throw new Error("Failed to toggle favorite");return await s.json()}catch(s){throw console.error("Error toggling favorite:",s),s}}}const CS=new GW,KW=()=>{const e=nt();Fs();const{addToCart:t}=gr(),{toast:s}=hn(),[r,i]=j.useState([]),[a,o]=j.useState(!0),[c,d]=j.useState([]),[f,m]=j.useState(xt.getLocation());j.useEffect(()=>(u(),xt.subscribe(m)),[]),j.useEffect(()=>{r.length>0&&p()},[r,f]);const h=(I,C,T,M)=>{const E=Y=>Y*(Math.PI/180),A=E(T-I),z=E(M-C),O=E(I),$=E(T),G=Math.sin(A/2)*Math.sin(A/2)+Math.cos(O)*Math.cos($)*Math.sin(z/2)*Math.sin(z/2);return 6371*(2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G)))},u=async()=>{if(!await ke.getToken()){o(!1);return}try{const C=await CS.getFavorites();i(C)}catch(C){console.error("Error fetching favorites:",C),s({title:"Error",description:"Failed to load favorites",variant:"destructive"})}finally{o(!1)}},p=async()=>{try{const I=[...new Set(r.map(z=>z.product.category).filter(Boolean))];if(I.length===0)return;const C=await ke.getToken(),T=C?{Authorization:`Token ${C}`}:{},M=new URLSearchParams({page_size:"12"});f&&(M.append("latitude",f.latitude.toString()),M.append("longitude",f.longitude.toString()));const A=((await(await fetch(yp(`/search/products/?${M}`),{headers:T})).json()).results||[]).filter(z=>I.includes(z.category)).map(z=>{var X,Y;const O=((X=z.images)==null?void 0:X.find(U=>U.is_primary))||((Y=z.images)==null?void 0:Y[0]);let $="N/A",G=1/0;return f&&z.vendor_latitude&&z.vendor_longitude&&(G=h(f.latitude,f.longitude,z.vendor_latitude,z.vendor_longitude),$=`${G.toFixed(1)} km`),{id:z.id,name:z.name,vendor:z.vendor_name||"Unknown Vendor",price:z.price,image:(O==null?void 0:O.image_url)||"/placeholder-product.jpg",distance:$,distanceValue:G,inStock:z.quantity>0,category:z.category}}).sort((z,O)=>z.distanceValue-O.distanceValue).slice(0,8);d(A)}catch(I){console.error("Error fetching related products:",I)}},x=async I=>{try{await CS.toggleFavorite(I),i(C=>C.filter(T=>T.product.id!==I)),s({title:"Removed from Wishlist",description:"Item has been removed from your wishlist"})}catch{s({title:"Error",description:"Failed to remove from wishlist",variant:"destructive"})}},v=async(I,C)=>{C==null||C.stopPropagation();try{await t(I.product.id,1),s({title:"Added to Cart",description:`${I.product.name} has been added to your cart`})}catch{s({title:"Error",description:"Failed to add to cart",variant:"destructive"})}},w=async(I,C)=>{C==null||C.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:I.product.id,name:I.product.name,price:I.product.price,quantity:1,vendor_name:I.product.vendor_name,vendor_id:I.product.vendor_id,images:I.product.images}}})},y=I=>{e(`/product/${I}`)},[b,_]=j.useState(!1),[N,k]=j.useState(!0);return j.useEffect(()=>{(async()=>{const C=await ke.getToken();_(!!C),k(!1)})()},[]),N?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):b?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:n.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:n.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),n.jsx("div",{}),n.jsxs("span",{className:"bg-red-100 text-red-800 text-sm font-medium px-3 py-1 rounded-full",children:[r.length," items"]})]})}),n.jsxs("div",{className:"p-4 max-w-3xl mx-auto",children:[a?n.jsx("div",{className:"flex justify-center items-center py-16",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):r.length>0?n.jsx("div",{className:"space-y-4",children:r.map(I=>{var C,T;return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl border p-4 flex items-center transition-all duration-300 cursor-pointer hover:bg-gray-50",onClick:()=>y(I.product.id),children:[n.jsx("div",{className:"flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden bg-gray-100",children:n.jsx("img",{src:((T=(C=I.product.images)==null?void 0:C[0])==null?void 0:T.image_url)||"/placeholder-product.jpg",alt:I.product.name,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"ml-6 flex-1",children:[n.jsx("h3",{className:"font-semibold text-xl text-gray-900 truncate",children:I.product.name}),n.jsx("p",{className:"text-sm text-gray-500 truncate",children:I.product.vendor_name}),n.jsxs("p",{className:"font-bold text-2xl text-emerald-600 mt-1",children:["",parseFloat(I.product.price).toFixed(2)]}),n.jsx("div",{className:"flex items-center mt-2",children:I.product.quantity>0?n.jsx("span",{className:"text-green-600 text-sm font-medium bg-green-50 px-2 py-1 rounded-full",children:"In Stock"}):n.jsx("span",{className:"text-red-600 text-sm font-medium bg-red-50 px-2 py-1 rounded-full",children:"Out of Stock"})})]}),n.jsxs("div",{className:"flex flex-col justify-between items-end space-y-2",children:[n.jsx(ne,{variant:"ghost",size:"icon",onClick:M=>{M.stopPropagation(),x(I.product.id)},className:"text-gray-500 hover:text-red-600 hover:bg-red-100 rounded-full",children:n.jsx(qa,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{size:"sm",disabled:I.product.quantity<=0,onClick:M=>v(I,M),className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-full disabled:bg-gray-300 disabled:text-gray-500",children:n.jsx(Ds,{className:"h-3 w-3 mr-1"})}),n.jsxs(ne,{size:"sm",disabled:I.product.quantity<=0,onClick:M=>w(I,M),className:"bg-orange-600 hover:bg-orange-700 text-white rounded-full disabled:bg-gray-300 disabled:text-gray-500",children:[n.jsx(HD,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]})]},I.id)})}):n.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-lg border",children:[n.jsx(pr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your wishlist is empty"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"Start adding items you love!"}),n.jsx(ne,{className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-full px-6 py-2",onClick:()=>e("/"),children:"Browse Products"})]}),c.length>0&&n.jsxs("div",{className:"mt-8",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Products Near You"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:c.map(I=>n.jsx(Te,{className:"p-3 cursor-pointer hover:shadow-md transition-smooth",onClick:()=>e(`/product/${I.id}`),children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"aspect-square mb-2 bg-gray-100 rounded-lg overflow-hidden",children:n.jsx("img",{src:I.image,alt:I.name,className:"w-full h-full object-cover",onError:C=>{C.target.src="/placeholder-product.jpg"}})}),n.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:I.name}),n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:I.vendor}),n.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-500 mb-2",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:I.distance})]}),n.jsxs("p",{className:"font-semibold text-emerald-600 text-sm mb-2",children:["",I.price]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ne,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",disabled:!I.inStock,onClick:C=>{C.stopPropagation(),t(I.id,1)},children:n.jsx(Ds,{className:"h-3 w-3"})}),n.jsxs(ne,{size:"sm",className:"flex-1 h-7 text-xs bg-green-600 hover:bg-green-700",disabled:!I.inStock,onClick:C=>{C.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:I.id,name:I.name,price:I.price,quantity:1,vendor_name:I.vendor,images:[{image_url:I.image}]}}})},children:[n.jsx(xn,{className:"h-3 w-3"}),"Buy"]})]})]})},I.id))})]})]}),n.jsx($s,{})]}):n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(pr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Please Login"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"You need to login to view your wishlist"}),n.jsx(ne,{onClick:()=>e("/login"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Login"})]})})},YW=async e=>{var t;try{const s=await ke.getUser();return s?s.user_type===e?{success:!0}:(t=s.available_roles)!=null&&t.includes(e)?e==="vendor"?await kw():await iR():{success:!1,roleNotAvailable:!0}:{success:!1,needsLogin:!0}}catch(s){return console.error("Role ensure error:",s),{success:!1,error:s.message}}},kw=async()=>{var e;try{const t=await ke.getUser();if(!((e=t==null?void 0:t.available_roles)!=null&&e.includes("vendor")))throw new Error("Vendor role not available");if(t.user_type==="vendor")return{success:!0,message:"Already in vendor role"};const{response:s,data:r}=await Ie("/switch-role/",{method:"POST",body:JSON.stringify({role:"vendor"})});if(s.ok){const i={...t,user_type:"vendor"},a=await ke.getToken();await ke.setAuth(a,i);const{simplePersistentAuth:o}=await We(async()=>{const{simplePersistentAuth:c}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:c}},[]);return await o.saveVendorLogin(a,i),{success:!0,message:"Switched to vendor role"}}else throw new Error((r==null?void 0:r.error)||"Role switch failed")}catch(t){return console.error("Role switch error:",t),{success:!1,error:t.message}}},iR=async()=>{var e;try{const t=await ke.getUser();if(!((e=t==null?void 0:t.available_roles)!=null&&e.includes("customer")))throw new Error("Customer role not available");if(t.user_type==="customer")return{success:!0,message:"Already in customer role"};const{response:s,data:r}=await Ie("/switch-role/",{method:"POST",body:JSON.stringify({role:"customer"})});if(s.ok){const i={...t,user_type:"customer"},a=await ke.getToken();await ke.setAuth(a,i);const{simplePersistentAuth:o}=await We(async()=>{const{simplePersistentAuth:c}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:c}},[]);return await o.clearVendorAuth(),{success:!0,message:"Switched to customer role"}}else throw new Error((r==null?void 0:r.error)||"Role switch failed")}catch(t){return console.error("Role switch error:",t),{success:!1,error:t.message}}},XW=async()=>{var e;try{const t=await ke.getUser();return t?((e=t.available_roles)==null?void 0:e.includes("vendor"))?t.user_type==="customer"?{hasAccess:!0,needsRoleSwitch:!0}:{hasAccess:!0,needsRoleSwitch:!1}:{hasAccess:!1,needsOnboarding:!0}:{hasAccess:!1,needsLogin:!0}}catch(t){return console.error("Vendor access check error:",t),{hasAccess:!1,needsLogin:!0}}};function Cw(){var c,d,f,m,h,u,p,x,v,w,y,b,_,N,k,I;const{state:e,login:t}=Fs(),s=nt();console.log(" RoleSwitcher rendered, user:",e.user),console.log(" Available roles:",(c=e.user)==null?void 0:c.available_roles),console.log(" Available roles length:",(f=(d=e.user)==null?void 0:d.available_roles)==null?void 0:f.length),console.log(" Current role:",((m=e.user)==null?void 0:m.current_role)||((h=e.user)==null?void 0:h.user_type)),console.log(" User type:",(u=e.user)==null?void 0:u.user_type),console.log(" Roles check condition:",!((p=e.user)!=null&&p.available_roles)||e.user.available_roles.length<=1);const r=async C=>{var T,M;console.log(" handleRoleSwitch called with role:",C);try{if(C==="vendor")if((M=(T=e.user)==null?void 0:T.available_roles)!=null&&M.includes("vendor")){if((await kw()).success){const E={...e.user,user_type:"vendor"},A=await ke.getToken();await t(E,A),s("/vendor/dashboard")}}else console.log(" Starting vendor onboarding for customer"),s("/vendor/onboarding");else if((await iR()).success){const E={...e.user,user_type:"customer"},A=await ke.getToken();await t(E,A),s("/home")}}catch(P){console.error(" Role switch error:",P)}};if(!((x=e.user)!=null&&x.available_roles)||e.user.available_roles.length<=1)return((v=e.user)==null?void 0:v.user_type)==="customer"&&!((y=(w=e.user)==null?void 0:w.available_roles)!=null&&y.includes("vendor"))?n.jsx("button",{onClick:()=>r("vendor"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium w-full",children:"Become a Vendor"}):(console.log(" RoleSwitcher: Not showing button - insufficient roles"),console.log("Available roles:",(b=e.user)==null?void 0:b.available_roles),n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Role switching not available"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current role: ",((_=e.user)==null?void 0:_.current_role)||((N=e.user)==null?void 0:N.user_type)||"Unknown"]})]}));const i=window.location.pathname.startsWith("/vendor"),a=i?"vendor":"customer",o=a==="vendor"?"customer":"vendor";return console.log(" Current page context:",{isOnVendorPage:i,currentRole:a,otherRole:o}),o?(console.log(" RoleSwitcher: Showing button for role switch to:",o),n.jsx("button",{onClick:()=>r(o),className:"px-6 py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white rounded-xl hover:from-indigo-600 hover:via-purple-600 hover:to-pink-600 transition-all duration-300 text-sm font-semibold w-full shadow-lg hover:shadow-xl transform hover:scale-105 border border-white/20 backdrop-blur-sm",children:n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Switch to ",o==="customer"?"Customer":"Vendor"]})})):(console.log(" RoleSwitcher: No other role found"),n.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"No other roles available"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current role: ",((k=e.user)==null?void 0:k.current_role)||((I=e.user)==null?void 0:I.user_type)||"Unknown"]})]}))}function QW(){const[e,t]=j.useState(""),[s,r]=j.useState(""),[i,a]=j.useState(!1),[o,c]=j.useState(!1),[d,f]=j.useState(""),[m,h]=j.useState(""),[u,p]=j.useState(!1),[x,v]=j.useState(!1);j.useEffect(()=>{w()},[]);const w=async()=>{p(!1),v(!1)},y=async()=>{if(f(""),h(""),e.length<6){f("Password must be at least 6 characters long");return}if(e!==s){f("Passwords do not match");return}c(!0);try{const b=await yc.setupPassword(e);b.success?(h("Password set successfully! You can now login with email and password."),p(!1),t(""),r("")):f(b.error||"Failed to setup password")}catch{f("Failed to setup password. Please try again.")}finally{c(!1)}};return!u||!x?null:n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Set Up Password for Traditional Login"}),n.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"You signed up with Google. Set up a password to also login with email and password."}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:i?"text":"password",value:e,onChange:b=>t(b.target.value),placeholder:"Enter password (min 6 characters)",className:"pr-10 bg-white",size:"sm"}),n.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):n.jsxs(n.Fragment,{children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),n.jsx(ve,{type:"password",value:s,onChange:b=>r(b.target.value),placeholder:"Confirm password",className:"bg-white",size:"sm"}),d&&n.jsx("p",{className:"text-red-600 text-sm",children:d}),m&&n.jsx("p",{className:"text-green-600 text-sm",children:m}),n.jsx(ne,{onClick:y,disabled:!e||!s||o,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:o?"Setting up...":"Set Password"})]})]})]})})}const JW=[{icon:EP,label:"My Orders",path:"/orders"},{icon:pr,label:"Wishlist",path:"/wishlist"},{icon:Mr,label:"Personal Information",path:"/profile-edit"},{icon:bi,label:"Privacy & Security",path:"/privacy"}],eZ=()=>{const e=nt(),{logout:t,state:s,login:r}=Fs(),{navigateWithAuth:i}=Vc(),[a,o]=j.useState(null),[c,d]=j.useState(!0),[f,m]=j.useState("");j.useEffect(()=>{h()},[]);const h=async()=>{try{const x=await ke.getToken();if(!x){i("/profile");return}const v=await fetch(rt+"profile/",{headers:{Authorization:`Token ${x}`,"ngrok-skip-browser-warning":"true"}});if(!v.ok)throw new Error("Failed to fetch profile");const w=await v.json();if(s.user){const y={...s.user,available_roles:w.available_roles||s.user.available_roles,user_type:w.user_type||s.user.user_type},b=await ke.getToken();await r(y,b)}o({email:w.email,avatar:w.profile_picture?w.profile_picture.startsWith("http")?w.profile_picture:`${rt}media/${w.profile_picture}`:"/placeholder-avatar.jpg"})}catch(x){m(x.message),console.error("Error fetching profile:",x)}finally{d(!1)}},u=async()=>{try{const x=await ke.getToken();x&&await fetch(rt+"logout/",{method:"POST",headers:{Authorization:`Token ${x}`,"ngrok-skip-browser-warning":"true"}})}catch(x){console.error("Logout error:",x)}finally{await t(),e("/login")}},p=async x=>{if(x)try{const v=await ke.getToken();if(!v)return;const w=new FormData;w.append("profile_picture",x);const y=await fetch(rt+"profile/upload-picture/",{method:"POST",headers:{Authorization:`Token ${v}`,"ngrok-skip-browser-warning":"true"},body:w});if(y.ok){const b=await y.json();o(_=>({..._,avatar:b.profile_picture}))}}catch(v){console.error("Profile image upload error:",v)}};return c?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):f||!a?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:f||"Failed to load profile"}),n.jsx(ne,{onClick:()=>e("/login"),children:"Go to Login"})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsxs("div",{className:"flex flex-col items-center pt-6 pb-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden mb-3 cursor-pointer hover:bg-gray-300 transition-colors",onClick:()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=v=>{var y;const w=(y=v.target.files)==null?void 0:y[0];w&&p(w)},x.click()},children:a.avatar&&a.avatar!=="/placeholder-avatar.jpg"?n.jsx("img",{src:a.avatar,alt:"Profile",className:"w-full h-full object-cover"}):n.jsx("span",{className:"text-gray-600 font-semibold text-lg",children:a.email?a.email.charAt(0).toUpperCase():"U"})}),n.jsx(ne,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=v=>{var y;const w=(y=v.target.files)==null?void 0:y[0];w&&p(w)},x.click()},children:n.jsx(Zi,{className:"h-3 w-3"})})]}),n.jsx("p",{className:"text-gray-800 text-base font-medium",children:a.email}),n.jsx("div",{className:"mt-3",children:n.jsx(Cw,{})})]})}),n.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[n.jsx(QW,{}),n.jsxs(Te,{children:[n.jsx(wt,{className:"pb-3",children:n.jsx(jt,{className:"text-base",children:"Account"})}),n.jsx(Oe,{className:"space-y-1",children:JW.map((x,v)=>{const w=x.icon;return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>i(x.path),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:n.jsx(w,{className:"h-4 w-4 text-primary"})}),n.jsx("span",{className:"font-medium text-sm",children:x.label})]}),n.jsx("div",{className:"text-gray-400",children:""})]},v)})})]}),n.jsxs(ne,{variant:"outline",className:"w-full flex items-center justify-center py-6 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:u,children:[n.jsx(ob,{className:"h-5 w-5 mr-2"}),n.jsx("span",{className:"font-medium text-base",children:"Logout"})]})]}),n.jsx($s,{})]})};var tZ="Label",aR=j.forwardRef((e,t)=>n.jsx(Xe.label,{...e,ref:t,onMouseDown:s=>{var i;s.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));aR.displayName=tZ;var oR=aR;const nZ=Xu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),fe=j.forwardRef(({className:e,...t},s)=>n.jsx(oR,{ref:s,className:Ze(nZ(),e),...t}));fe.displayName=oR.displayName;const Xn=j.forwardRef(({className:e,...t},s)=>n.jsx("textarea",{className:Ze("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));Xn.displayName="Textarea";const sZ=()=>{const e=nt(),{toast:t}=hn(),[s,r]=j.useState(!1),[i,a]=j.useState(!0),[o,c]=j.useState(!1),[d,f]=j.useState({username:"",email:"",phone_number:"",address:"",date_of_birth:"",profile_picture:null});j.useEffect(()=>{m()},[]);const m=async()=>{try{const x=await ke.getToken();if(!x){e("/login");return}const v=await fetch(rt+"profile/",{headers:{Authorization:`Token ${x}`,"ngrok-skip-browser-warning":"true"}});if(!v.ok)throw new Error("Failed to fetch profile");const w=await v.json();f({username:w.username||"",email:w.email||"",phone_number:w.phone_number||"",address:w.address||"",date_of_birth:w.date_of_birth||"",profile_picture:w.profile_picture?w.profile_picture.startsWith("http")?w.profile_picture:`${rt}media/${w.profile_picture}`:null})}catch(x){console.error("Error fetching profile:",x),t({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{a(!1)}},h=async()=>{c(!0);try{const x=await ke.getToken();if(!x)return;if((await fetch(rt+"profile/update/",{method:"PUT",headers:{Authorization:`Token ${x}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({username:d.username,phone_number:d.phone_number,address:d.address,date_of_birth:d.date_of_birth||null})})).ok)r(!1),t({title:"Success",description:"Profile updated successfully!"});else throw new Error("Failed to update profile")}catch(x){console.error("Error saving profile:",x),t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}finally{c(!1)}},u=async x=>{if(x)try{const v=await ke.getToken();if(!v)return;const w=new FormData;w.append("profile_picture",x);const y=await fetch(rt+"profile/upload-picture/",{method:"POST",headers:{Authorization:`Token ${v}`,"ngrok-skip-browser-warning":"true"},body:w});if(y.ok){const b=await y.json();f(_=>({..._,profile_picture:b.profile_picture})),t({title:"Success",description:"Profile picture updated successfully!"})}else throw new Error("Failed to upload image")}catch(v){console.error("Profile image upload error:",v),t({title:"Error",description:"Failed to upload profile picture",variant:"destructive"})}},p=(x,v)=>{f(w=>({...w,[x]:v}))};return i?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-100 sticky top-0 z-30",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/profile"),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold",children:"Personal Information"})]}),n.jsx(ne,{onClick:()=>s?h():r(!0),size:"sm",className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ic,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ju,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),n.jsx("div",{className:"p-4 pb-20",children:n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsxs(jt,{className:"flex items-center gap-2",children:[n.jsx(Mr,{className:"h-5 w-5"}),"Profile Information"]})}),n.jsxs(Oe,{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden ${s?"cursor-pointer hover:bg-gray-200":""}`,onClick:s?()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=v=>{var y;const w=(y=v.target.files)==null?void 0:y[0];w&&u(w)},x.click()}:void 0,children:d.profile_picture?n.jsx("img",{src:d.profile_picture,alt:"Profile",className:"w-full h-full object-cover"}):n.jsx("span",{className:"text-gray-600 font-semibold text-2xl",children:d.username?d.username.charAt(0).toUpperCase():"U"})}),s&&n.jsx(ne,{size:"sm",className:"absolute -bottom-1 -right-1 w-8 h-8 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=v=>{var y;const w=(y=v.target.files)==null?void 0:y[0];w&&u(w)},x.click()},children:n.jsx(Zi,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:s?"Click to change profile picture":"Profile Picture"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"username",children:"Username"}),n.jsx(ve,{id:"username",value:d.username,onChange:x=>p("username",x.target.value),disabled:!s,className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"email",children:"Email"}),n.jsx(ve,{id:"email",type:"email",value:d.email,disabled:!0,className:"mt-1 bg-gray-50"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"phone",children:"Phone Number"}),n.jsx(ve,{id:"phone",value:d.phone_number,onChange:x=>p("phone_number",x.target.value),disabled:!s,className:"mt-1",placeholder:"Enter your phone number"})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"address",children:"Address"}),n.jsx(Xn,{id:"address",value:d.address,onChange:x=>p("address",x.target.value),disabled:!s,className:"mt-1",placeholder:"Enter your address",rows:3})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"dob",children:"Date of Birth"}),n.jsx(ve,{id:"dob",type:"date",value:d.date_of_birth||"",onChange:x=>p("date_of_birth",x.target.value||null),disabled:!s,className:"mt-1"})]})]})]})]})}),n.jsx($s,{})]})},rZ=()=>{const e=nt(),{toast:t}=hn(),[s,r]=j.useState(!0),[i,a]=j.useState(""),[o,c]=j.useState(!1),[d,f]=j.useState(""),[m,h]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const x=await ke.getToken();if(!x){e("/login");return}const v=await fetch(rt+"profile/",{headers:{Authorization:`Token ${x}`,"ngrok-skip-browser-warning":"true"}});if(!v.ok)throw new Error("Failed to fetch profile");const w=await v.json(),y=(w==null?void 0:w.plain_password)||"";a(y)}catch(x){console.error(x)}})()},[]);const u=async()=>{if(!d){t({title:"Error",description:"New password is required",variant:"destructive"});return}h(!0);try{const p=await ke.getToken();if(!p){t({title:"Error",description:"You are not authenticated. Please log in.",variant:"destructive"}),e("/login");return}const x=await fetch(rt+"change-password/simple/",{method:"POST",headers:{Authorization:`Token ${p}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({new_password:d})});if(!x.ok){const w=await x.json();throw new Error(w.error||"Failed to change password")}const v=await x.json();await ke.setAuth(v.token,await ke.getUser()),t({title:"Success",description:"Password changed successfully"}),a(d),f(""),c(!1)}catch(p){t({title:"Error",description:p instanceof Error?p.message:"Failed to change password",variant:"destructive"})}finally{h(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center gap-3 p-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"Privacy & Security"})]})}),n.jsx("div",{className:"p-4 space-y-6 pb-20",children:n.jsxs("div",{className:"bg-white rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(bi,{className:"h-5 w-5 text-blue-600"}),n.jsx("h2",{className:"font-semibold",children:"Password"})]}),o?n.jsxs("div",{className:"space-y-4",children:[n.jsx(fe,{children:"New Password"}),n.jsx(ve,{type:"text",value:d,onChange:p=>f(p.target.value),placeholder:"Enter new password"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{onClick:u,disabled:m,children:m?"Saving...":"Save"}),n.jsx(ne,{variant:"outline",onClick:()=>{c(!1),f("")},disabled:m,children:"Cancel"})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(fe,{children:"Your Password"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(ve,{type:s?"text":"password",value:i,disabled:!0,className:"bg-gray-100"}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>r(!s),children:s?n.jsx(ib,{className:"h-4 w-4"}):n.jsx(Nn,{className:"h-4 w-4"})})]}),n.jsx(ne,{onClick:()=>c(!0),disabled:m,children:"Change Password"})]})]})}),n.jsx($s,{})]})};function iZ(){const e=nt(),[t,s]=j.useState(1),[r,i]=j.useState(""),[a,o]=j.useState(""),[c,d]=j.useState(""),[f,m]=j.useState(""),[h,u]=j.useState(""),[p,x]=j.useState(""),[v,w]=j.useState(!1),[y,b]=j.useState(!1),[_,N]=j.useState(""),k=async()=>{var P,E,A;if(f!==h){N("Passwords do not match");return}b(!0),N("");try{const z=await fetch(rt+"register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,email:c,password:f,user_type:"customer",phone_number:a})}),O=await z.json();if(!z.ok){const $=((P=O.username)==null?void 0:P[0])||((E=O.email)==null?void 0:E[0])||O.message||((A=Object.values(O)[0])==null?void 0:A[0])||"Registration failed";throw new Error($)}s(2)}catch(z){N(z.message)}finally{b(!1)}},I=P=>{x(P),P.length===6&&C(P)},C=async P=>{b(!0),N("");try{const E=await fetch(rt+"verify-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,otp:P})}),A=await E.json();if(!E.ok)throw new Error(A.error||"Verification failed");localStorage.setItem("token",A.token),e("/home")}catch(E){N(E.message)}finally{b(!1)}},T=async()=>{b(!0),N("");try{const P=await fetch(rt+"send-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c})}),E=await P.json();if(!P.ok)throw new Error(E.error||"Failed to resend OTP");N("OTP resent successfully")}catch(P){N(P.message)}finally{b(!1)}},M=()=>{e("/login")};return n.jsx("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"w-full max-w-80 mx-auto px-4",children:[t===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:ea,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customer Signup"})]}),n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:r,onChange:P=>i(P.target.value),placeholder:"Full Name",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsx(ve,{type:"tel",value:a,onChange:P=>o(P.target.value),placeholder:"Phone Number",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsx(ve,{type:"email",value:c,onChange:P=>d(P.target.value),placeholder:"Email Address",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:v?"text":"password",value:f,onChange:P=>m(P.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),n.jsx("button",{type:"button",onClick:()=>w(!v),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):n.jsxs(n.Fragment,{children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),n.jsx(ve,{type:"password",value:h,onChange:P=>u(P.target.value),placeholder:"Confirm Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),_&&n.jsx("p",{className:"text-red-600 text-center",children:_}),n.jsx(ne,{onClick:k,disabled:!r||!a||!c||!f||!h||f!==h||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Creating Account...":"Sign Up"})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:M,className:"text-blue-600 hover:text-blue-700 text-sm",children:"Already have an account? Login"})})]}),t===2&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:ea,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Email"}),n.jsxs("p",{className:"text-gray-600 mt-2",children:["Code sent to ",c]})]}),n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:p,onChange:P=>I(P.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest w-80"}),y&&n.jsx("div",{className:"text-center text-blue-600",children:"Verifying..."}),_&&n.jsx("p",{className:"text-red-600 text-center",children:_}),n.jsx("button",{onClick:()=>s(1),className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Change details"}),n.jsx("button",{onClick:T,disabled:y,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend code"})]})]})]})})})}function aZ(){const e=nt(),[t,s]=j.useState(""),r=o=>{o.preventDefault(),e("/login")},i=()=>{e("/login")},a=()=>{console.log("Resend link clicked")};return n.jsx("div",{className:"min-h-screen flex items-end justify-center bg-cover bg-center bg-no-repeat p-4 pb-12",style:{backgroundImage:"url(/images/forgot.png)"},children:n.jsxs("div",{className:"w-full max-w-sm bg-white rounded-lg shadow-lg p-4",style:{backgroundColor:"#856043"},children:[n.jsx("h2",{className:"text-xl font-bold text-white text-center mb-5",children:"Forgot Password"}),n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"email",className:"text-white font-medium",children:"Email or Phone Number"}),n.jsx(ve,{id:"email",type:"text",value:t,onChange:o=>s(o.target.value),placeholder:"Enter your email or phone",className:"mt-1 w-full rounded-md border-gray-300 focus:border-white focus:ring-white text-gray-900"})]}),n.jsx(ne,{onClick:r,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Submit"}),n.jsx(ne,{onClick:a,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Resend Link"}),n.jsx(ne,{onClick:i,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Back to Login"})]})]})})}var Pw="Radio",[oZ,lR]=ds(Pw),[lZ,cZ]=oZ(Pw),cR=j.forwardRef((e,t)=>{const{__scopeRadio:s,name:r,checked:i=!1,required:a,disabled:o,value:c="on",onCheck:d,form:f,...m}=e,[h,u]=j.useState(null),p=ft(t,w=>u(w)),x=j.useRef(!1),v=h?f||!!h.closest("form"):!0;return n.jsxs(lZ,{scope:s,checked:i,disabled:o,children:[n.jsx(Xe.button,{type:"button",role:"radio","aria-checked":i,"data-state":fR(i),"data-disabled":o?"":void 0,disabled:o,value:c,...m,ref:p,onClick:Me(e.onClick,w=>{i||d==null||d(),v&&(x.current=w.isPropagationStopped(),x.current||w.stopPropagation())})}),v&&n.jsx(hR,{control:h,bubbles:!x.current,name:r,value:c,checked:i,required:a,disabled:o,form:f,style:{transform:"translateX(-100%)"}})]})});cR.displayName=Pw;var dR="RadioIndicator",uR=j.forwardRef((e,t)=>{const{__scopeRadio:s,forceMount:r,...i}=e,a=cZ(dR,s);return n.jsx(Jn,{present:r||a.checked,children:n.jsx(Xe.span,{"data-state":fR(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});uR.displayName=dR;var dZ="RadioBubbleInput",hR=j.forwardRef(({__scopeRadio:e,control:t,checked:s,bubbles:r=!0,...i},a)=>{const o=j.useRef(null),c=ft(o,a),d=Ap(s),f=cp(t);return j.useEffect(()=>{const m=o.current;if(!m)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(d!==s&&p){const x=new Event("click",{bubbles:r});p.call(m,s),m.dispatchEvent(x)}},[d,s,r]),n.jsx(Xe.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:c,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});hR.displayName=dZ;function fR(e){return e?"checked":"unchecked"}var uZ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Rp="RadioGroup",[hZ,ere]=ds(Rp,[qc,lR]),mR=qc(),pR=lR(),[fZ,mZ]=hZ(Rp),gR=j.forwardRef((e,t)=>{const{__scopeRadioGroup:s,name:r,defaultValue:i,value:a,required:o=!1,disabled:c=!1,orientation:d,dir:f,loop:m=!0,onValueChange:h,...u}=e,p=mR(s),x=Uc(f),[v,w]=Br({prop:a,defaultProp:i??null,onChange:h,caller:Rp});return n.jsx(fZ,{scope:s,name:r,required:o,disabled:c,value:v,onValueChange:w,children:n.jsx(Rb,{asChild:!0,...p,orientation:d,dir:x,loop:m,children:n.jsx(Xe.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":c?"":void 0,dir:x,...u,ref:t})})})});gR.displayName=Rp;var vR="RadioGroupItem",xR=j.forwardRef((e,t)=>{const{__scopeRadioGroup:s,disabled:r,...i}=e,a=mZ(vR,s),o=a.disabled||r,c=mR(s),d=pR(s),f=j.useRef(null),m=ft(t,f),h=a.value===i.value,u=j.useRef(!1);return j.useEffect(()=>{const p=v=>{uZ.includes(v.key)&&(u.current=!0)},x=()=>u.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",x)}},[]),n.jsx(Lb,{asChild:!0,...c,focusable:!o,active:h,children:n.jsx(cR,{disabled:o,required:a.required,checked:h,...d,...i,name:a.name,ref:m,onCheck:()=>a.onValueChange(i.value),onKeyDown:Me(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Me(i.onFocus,()=>{var p;u.current&&((p=f.current)==null||p.click())})})})});xR.displayName=vR;var pZ="RadioGroupIndicator",yR=j.forwardRef((e,t)=>{const{__scopeRadioGroup:s,...r}=e,i=pR(s);return n.jsx(uR,{...i,...r,ref:t})});yR.displayName=pZ;var bR=gR,wR=xR,gZ=yR;const jR=j.forwardRef(({className:e,...t},s)=>n.jsx(bR,{className:Ze("grid gap-2",e),...t,ref:s}));jR.displayName=bR.displayName;const wy=j.forwardRef(({className:e,...t},s)=>n.jsx(wR,{ref:s,className:Ze("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(gZ,{className:"flex items-center justify-center",children:n.jsx(SP,{className:"h-2.5 w-2.5 fill-current text-current"})})}));wy.displayName=wR.displayName;var vZ="Separator",PS="horizontal",xZ=["horizontal","vertical"],_R=j.forwardRef((e,t)=>{const{decorative:s,orientation:r=PS,...i}=e,a=yZ(r)?r:PS,c=s?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return n.jsx(Xe.div,{"data-orientation":a,...c,...i,ref:t})});_R.displayName=vZ;function yZ(e){return xZ.includes(e)}var NR=_R;const gi=j.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...r},i)=>n.jsx(NR,{ref:i,decorative:s,orientation:t,className:Ze("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));gi.displayName=NR.displayName;function bZ(e,t){const s=j.useRef(t);j.useEffect(function(){t!==s.current&&e.attributionControl!=null&&(s.current!=null&&e.attributionControl.removeAttribution(s.current),t!=null&&e.attributionControl.addAttribution(t)),s.current=t},[e,t])}function wZ(e,t,s){t.center!==s.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==s.radius&&e.setRadius(t.radius)}const jZ=1;function _Z(e){return Object.freeze({__version:jZ,map:e})}function SR(e,t){return Object.freeze({...e,...t})}const kR=j.createContext(null),CR=kR.Provider;function Ew(){const e=j.useContext(kR);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function PR(e){function t(s,r){const{instance:i,context:a}=e(s).current;return j.useImperativeHandle(r,()=>i),s.children==null?null:Ne.createElement(CR,{value:a},s.children)}return j.forwardRef(t)}function NZ(e){function t(s,r){const{instance:i}=e(s).current;return j.useImperativeHandle(r,()=>i),null}return j.forwardRef(t)}function ER(e,t){const s=j.useRef();j.useEffect(function(){return t!=null&&e.instance.on(t),s.current=t,function(){s.current!=null&&e.instance.off(s.current),s.current=null}},[e,t])}function Tw(e,t){const s=e.pane??t.pane;return s?{...e,pane:s}:e}var jy={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(s,r){r(t)})(xi,function(s){var r="1.9.4";function i(l){var g,S,D,H;for(S=1,D=arguments.length;S<D;S++){H=arguments[S];for(g in H)l[g]=H[g]}return l}var a=Object.create||function(){function l(){}return function(g){return l.prototype=g,new l}}();function o(l,g){var S=Array.prototype.slice;if(l.bind)return l.bind.apply(l,S.call(arguments,1));var D=S.call(arguments,2);return function(){return l.apply(g,D.length?D.concat(S.call(arguments)):arguments)}}var c=0;function d(l){return"_leaflet_id"in l||(l._leaflet_id=++c),l._leaflet_id}function f(l,g,S){var D,H,ee,de;return de=function(){D=!1,H&&(ee.apply(S,H),H=!1)},ee=function(){D?H=arguments:(l.apply(S,arguments),setTimeout(de,g),D=!0)},ee}function m(l,g,S){var D=g[1],H=g[0],ee=D-H;return l===D&&S?l:((l-H)%ee+ee)%ee+H}function h(){return!1}function u(l,g){if(g===!1)return l;var S=Math.pow(10,g===void 0?6:g);return Math.round(l*S)/S}function p(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function x(l){return p(l).split(/\s+/)}function v(l,g){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var S in g)l.options[S]=g[S];return l.options}function w(l,g,S){var D=[];for(var H in l)D.push(encodeURIComponent(S?H.toUpperCase():H)+"="+encodeURIComponent(l[H]));return(!g||g.indexOf("?")===-1?"?":"&")+D.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function b(l,g){return l.replace(y,function(S,D){var H=g[D];if(H===void 0)throw new Error("No value provided for variable "+S);return typeof H=="function"&&(H=H(g)),H})}var _=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function N(l,g){for(var S=0;S<l.length;S++)if(l[S]===g)return S;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var C=0;function T(l){var g=+new Date,S=Math.max(0,16-(g-C));return C=g+S,window.setTimeout(l,S)}var M=window.requestAnimationFrame||I("RequestAnimationFrame")||T,P=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function E(l,g,S){if(S&&M===T)l.call(g);else return M.call(window,o(l,g))}function A(l){l&&P.call(window,l)}var z={__proto__:null,extend:i,create:a,bind:o,get lastId(){return c},stamp:d,throttle:f,wrapNum:m,falseFn:h,formatNum:u,trim:p,splitWords:x,setOptions:v,getParamString:w,template:b,isArray:_,indexOf:N,emptyImageUrl:k,requestFn:M,cancelFn:P,requestAnimFrame:E,cancelAnimFrame:A};function O(){}O.extend=function(l){var g=function(){v(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=g.__super__=this.prototype,D=a(S);D.constructor=g,g.prototype=D;for(var H in this)Object.prototype.hasOwnProperty.call(this,H)&&H!=="prototype"&&H!=="__super__"&&(g[H]=this[H]);return l.statics&&i(g,l.statics),l.includes&&($(l.includes),i.apply(null,[D].concat(l.includes))),i(D,l),delete D.statics,delete D.includes,D.options&&(D.options=S.options?a(S.options):{},i(D.options,l.options)),D._initHooks=[],D.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var ee=0,de=D._initHooks.length;ee<de;ee++)D._initHooks[ee].call(this)}},g},O.include=function(l){var g=this.prototype.options;return i(this.prototype,l),l.options&&(this.prototype.options=g,this.mergeOptions(l.options)),this},O.mergeOptions=function(l){return i(this.prototype.options,l),this},O.addInitHook=function(l){var g=Array.prototype.slice.call(arguments,1),S=typeof l=="function"?l:function(){this[l].apply(this,g)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function $(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=_(l)?l:[l];for(var g=0;g<l.length;g++)l[g]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(l,g,S){if(typeof l=="object")for(var D in l)this._on(D,l[D],g);else{l=x(l);for(var H=0,ee=l.length;H<ee;H++)this._on(l[H],g,S)}return this},off:function(l,g,S){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var D in l)this._off(D,l[D],g);else{l=x(l);for(var H=arguments.length===1,ee=0,de=l.length;ee<de;ee++)H?this._off(l[ee]):this._off(l[ee],g,S)}return this},_on:function(l,g,S,D){if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}if(this._listens(l,g,S)===!1){S===this&&(S=void 0);var H={fn:g,ctx:S};D&&(H.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(H)}},_off:function(l,g,S){var D,H,ee;if(this._events&&(D=this._events[l],!!D)){if(arguments.length===1){if(this._firingCount)for(H=0,ee=D.length;H<ee;H++)D[H].fn=h;delete this._events[l];return}if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}var de=this._listens(l,g,S);if(de!==!1){var ge=D[de];this._firingCount&&(ge.fn=h,this._events[l]=D=D.slice()),D.splice(de,1)}}},fire:function(l,g,S){if(!this.listens(l,S))return this;var D=i({},g,{type:l,target:this,sourceTarget:g&&g.sourceTarget||this});if(this._events){var H=this._events[l];if(H){this._firingCount=this._firingCount+1||1;for(var ee=0,de=H.length;ee<de;ee++){var ge=H[ee],ye=ge.fn;ge.once&&this.off(l,ye,ge.ctx),ye.call(ge.ctx||this,D)}this._firingCount--}}return S&&this._propagateEvent(D),this},listens:function(l,g,S,D){typeof l!="string"&&console.warn('"string" type argument expected');var H=g;typeof g!="function"&&(D=!!g,H=void 0,S=void 0);var ee=this._events&&this._events[l];if(ee&&ee.length&&this._listens(l,H,S)!==!1)return!0;if(D){for(var de in this._eventParents)if(this._eventParents[de].listens(l,g,S,D))return!0}return!1},_listens:function(l,g,S){if(!this._events)return!1;var D=this._events[l]||[];if(!g)return!!D.length;S===this&&(S=void 0);for(var H=0,ee=D.length;H<ee;H++)if(D[H].fn===g&&D[H].ctx===S)return H;return!1},once:function(l,g,S){if(typeof l=="object")for(var D in l)this._on(D,l[D],g,!0);else{l=x(l);for(var H=0,ee=l.length;H<ee;H++)this._on(l[H],g,S,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[d(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[d(l)],this},_propagateEvent:function(l){for(var g in this._eventParents)this._eventParents[g].fire(l.type,i({layer:l.target,propagatedFrom:l.target},l),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var X=O.extend(G);function Y(l,g,S){this.x=S?Math.round(l):l,this.y=S?Math.round(g):g}var U=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(l){return this.clone()._add(V(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(V(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new Y(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new Y(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=U(this.x),this.y=U(this.y),this},distanceTo:function(l){l=V(l);var g=l.x-this.x,S=l.y-this.y;return Math.sqrt(g*g+S*S)},equals:function(l){return l=V(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=V(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}};function V(l,g,S){return l instanceof Y?l:_(l)?new Y(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new Y(l.x,l.y):new Y(l,g,S)}function R(l,g){if(l)for(var S=g?[l,g]:l,D=0,H=S.length;D<H;D++)this.extend(S[D])}R.prototype={extend:function(l){var g,S;if(!l)return this;if(l instanceof Y||typeof l[0]=="number"||"x"in l)g=S=V(l);else if(l=F(l),g=l.min,S=l.max,!g||!S)return this;return!this.min&&!this.max?(this.min=g.clone(),this.max=S.clone()):(this.min.x=Math.min(g.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(g.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(l){return V((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return V(this.min.x,this.max.y)},getTopRight:function(){return V(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var g,S;return typeof l[0]=="number"||l instanceof Y?l=V(l):l=F(l),l instanceof R?(g=l.min,S=l.max):g=S=l,g.x>=this.min.x&&S.x<=this.max.x&&g.y>=this.min.y&&S.y<=this.max.y},intersects:function(l){l=F(l);var g=this.min,S=this.max,D=l.min,H=l.max,ee=H.x>=g.x&&D.x<=S.x,de=H.y>=g.y&&D.y<=S.y;return ee&&de},overlaps:function(l){l=F(l);var g=this.min,S=this.max,D=l.min,H=l.max,ee=H.x>g.x&&D.x<S.x,de=H.y>g.y&&D.y<S.y;return ee&&de},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var g=this.min,S=this.max,D=Math.abs(g.x-S.x)*l,H=Math.abs(g.y-S.y)*l;return F(V(g.x-D,g.y-H),V(S.x+D,S.y+H))},equals:function(l){return l?(l=F(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function F(l,g){return!l||l instanceof R?l:new R(l,g)}function q(l,g){if(l)for(var S=g?[l,g]:l,D=0,H=S.length;D<H;D++)this.extend(S[D])}q.prototype={extend:function(l){var g=this._southWest,S=this._northEast,D,H;if(l instanceof K)D=l,H=l;else if(l instanceof q){if(D=l._southWest,H=l._northEast,!D||!H)return this}else return l?this.extend(B(l)||W(l)):this;return!g&&!S?(this._southWest=new K(D.lat,D.lng),this._northEast=new K(H.lat,H.lng)):(g.lat=Math.min(D.lat,g.lat),g.lng=Math.min(D.lng,g.lng),S.lat=Math.max(H.lat,S.lat),S.lng=Math.max(H.lng,S.lng)),this},pad:function(l){var g=this._southWest,S=this._northEast,D=Math.abs(g.lat-S.lat)*l,H=Math.abs(g.lng-S.lng)*l;return new q(new K(g.lat-D,g.lng-H),new K(S.lat+D,S.lng+H))},getCenter:function(){return new K((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new K(this.getNorth(),this.getWest())},getSouthEast:function(){return new K(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof K||"lat"in l?l=B(l):l=W(l);var g=this._southWest,S=this._northEast,D,H;return l instanceof q?(D=l.getSouthWest(),H=l.getNorthEast()):D=H=l,D.lat>=g.lat&&H.lat<=S.lat&&D.lng>=g.lng&&H.lng<=S.lng},intersects:function(l){l=W(l);var g=this._southWest,S=this._northEast,D=l.getSouthWest(),H=l.getNorthEast(),ee=H.lat>=g.lat&&D.lat<=S.lat,de=H.lng>=g.lng&&D.lng<=S.lng;return ee&&de},overlaps:function(l){l=W(l);var g=this._southWest,S=this._northEast,D=l.getSouthWest(),H=l.getNorthEast(),ee=H.lat>g.lat&&D.lat<S.lat,de=H.lng>g.lng&&D.lng<S.lng;return ee&&de},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,g){return l?(l=W(l),this._southWest.equals(l.getSouthWest(),g)&&this._northEast.equals(l.getNorthEast(),g)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function W(l,g){return l instanceof q?l:new q(l,g)}function K(l,g,S){if(isNaN(l)||isNaN(g))throw new Error("Invalid LatLng object: ("+l+", "+g+")");this.lat=+l,this.lng=+g,S!==void 0&&(this.alt=+S)}K.prototype={equals:function(l,g){if(!l)return!1;l=B(l);var S=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return S<=(g===void 0?1e-9:g)},toString:function(l){return"LatLng("+u(this.lat,l)+", "+u(this.lng,l)+")"},distanceTo:function(l){return se.distance(this,B(l))},wrap:function(){return se.wrapLatLng(this)},toBounds:function(l){var g=180*l/40075017,S=g/Math.cos(Math.PI/180*this.lat);return W([this.lat-g,this.lng-S],[this.lat+g,this.lng+S])},clone:function(){return new K(this.lat,this.lng,this.alt)}};function B(l,g,S){return l instanceof K?l:_(l)&&typeof l[0]!="object"?l.length===3?new K(l[0],l[1],l[2]):l.length===2?new K(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new K(l.lat,"lng"in l?l.lng:l.lon,l.alt):g===void 0?null:new K(l,g,S)}var Z={latLngToPoint:function(l,g){var S=this.projection.project(l),D=this.scale(g);return this.transformation._transform(S,D)},pointToLatLng:function(l,g){var S=this.scale(g),D=this.transformation.untransform(l,S);return this.projection.unproject(D)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var g=this.projection.bounds,S=this.scale(l),D=this.transformation.transform(g.min,S),H=this.transformation.transform(g.max,S);return new R(D,H)},infinite:!1,wrapLatLng:function(l){var g=this.wrapLng?m(l.lng,this.wrapLng,!0):l.lng,S=this.wrapLat?m(l.lat,this.wrapLat,!0):l.lat,D=l.alt;return new K(S,g,D)},wrapLatLngBounds:function(l){var g=l.getCenter(),S=this.wrapLatLng(g),D=g.lat-S.lat,H=g.lng-S.lng;if(D===0&&H===0)return l;var ee=l.getSouthWest(),de=l.getNorthEast(),ge=new K(ee.lat-D,ee.lng-H),ye=new K(de.lat-D,de.lng-H);return new q(ge,ye)}},se=i({},Z,{wrapLng:[-180,180],R:6371e3,distance:function(l,g){var S=Math.PI/180,D=l.lat*S,H=g.lat*S,ee=Math.sin((g.lat-l.lat)*S/2),de=Math.sin((g.lng-l.lng)*S/2),ge=ee*ee+Math.cos(D)*Math.cos(H)*de*de,ye=2*Math.atan2(Math.sqrt(ge),Math.sqrt(1-ge));return this.R*ye}}),J=6378137,ie={R:J,MAX_LATITUDE:85.0511287798,project:function(l){var g=Math.PI/180,S=this.MAX_LATITUDE,D=Math.max(Math.min(S,l.lat),-S),H=Math.sin(D*g);return new Y(this.R*l.lng*g,this.R*Math.log((1+H)/(1-H))/2)},unproject:function(l){var g=180/Math.PI;return new K((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*g,l.x*g/this.R)},bounds:function(){var l=J*Math.PI;return new R([-l,-l],[l,l])}()};function le(l,g,S,D){if(_(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=g,this._c=S,this._d=D}le.prototype={transform:function(l,g){return this._transform(l.clone(),g)},_transform:function(l,g){return g=g||1,l.x=g*(this._a*l.x+this._b),l.y=g*(this._c*l.y+this._d),l},untransform:function(l,g){return g=g||1,new Y((l.x/g-this._b)/this._a,(l.y/g-this._d)/this._c)}};function Q(l,g,S,D){return new le(l,g,S,D)}var ue=i({},se,{code:"EPSG:3857",projection:ie,transformation:function(){var l=.5/(Math.PI*ie.R);return Q(l,.5,-l,.5)}()}),_e=i({},ue,{code:"EPSG:900913"});function me(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Se(l,g){var S="",D,H,ee,de,ge,ye;for(D=0,ee=l.length;D<ee;D++){for(ge=l[D],H=0,de=ge.length;H<de;H++)ye=ge[H],S+=(H?"L":"M")+ye.x+" "+ye.y;S+=g?st.svg?"z":"x":""}return S||"M0 0"}var xe=document.documentElement.style,he="ActiveXObject"in window,pe=he&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ae=Gr("webkit"),oe=Gr("android"),be=Gr("android 2")||Gr("android 3"),je=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),we=oe&&Gr("Google")&&je<537&&!("AudioNode"in window),re=!!window.opera,Pe=!te&&Gr("chrome"),Ae=Gr("gecko")&&!ae&&!re&&!he,lt=!Pe&&Gr("safari"),it=Gr("phantom"),Ft="OTransition"in xe,zs=navigator.platform.indexOf("Win")===0,ce=he&&"transition"in xe,$e="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!be,Je="MozPerspective"in xe,ze=!window.L_DISABLE_3D&&(ce||$e||Je)&&!Ft&&!it,He=typeof orientation<"u"||Gr("mobile"),Ge=He&&ae,Bt=He&&$e,Et=!window.PointerEvent&&window.MSPointerEvent,Cn=!!(window.PointerEvent||Et),ks="ontouchstart"in window||!!window.TouchEvent,Ln=!window.L_NO_TOUCH&&(ks||Cn),Ci=He&&re,at=He&&Ae,et=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,St=function(){var l=!1;try{var g=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",h,g),window.removeEventListener("testPassiveEventSupport",h,g)}catch{}return l}(),sn=function(){return!!document.createElement("canvas").getContext}(),rn=!!(document.createElementNS&&me("svg").createSVGRect),Pn=!!rn&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Pi=!rn&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var g=l.firstChild;return g.style.behavior="url(#default#VML)",g&&typeof g.adj=="object"}catch{return!1}}(),Bs=navigator.platform.indexOf("Mac")===0,Zr=navigator.platform.indexOf("Linux")===0;function Gr(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var st={ie:he,ielt9:pe,edge:te,webkit:ae,android:oe,android23:be,androidStock:we,opera:re,chrome:Pe,gecko:Ae,safari:lt,phantom:it,opera12:Ft,win:zs,ie3d:ce,webkit3d:$e,gecko3d:Je,any3d:ze,mobile:He,mobileWebkit:Ge,mobileWebkit3d:Bt,msPointer:Et,pointer:Cn,touch:Ln,touchNative:ks,mobileOpera:Ci,mobileGecko:at,retina:et,passiveEvents:St,canvas:sn,svg:rn,vml:Pi,inlineSvg:Pn,mac:Bs,linux:Zr},ej=st.msPointer?"MSPointerDown":"pointerdown",tj=st.msPointer?"MSPointerMove":"pointermove",nj=st.msPointer?"MSPointerUp":"pointerup",sj=st.msPointer?"MSPointerCancel":"pointercancel",eg={touchstart:ej,touchmove:tj,touchend:nj,touchcancel:sj},rj={touchstart:r5,touchmove:uh,touchend:uh,touchcancel:uh},rl={},ij=!1;function JL(l,g,S){return g==="touchstart"&&s5(),rj[g]?(S=rj[g].bind(this,S),l.addEventListener(eg[g],S,!1),S):(console.warn("wrong event specified:",g),h)}function e5(l,g,S){if(!eg[g]){console.warn("wrong event specified:",g);return}l.removeEventListener(eg[g],S,!1)}function t5(l){rl[l.pointerId]=l}function n5(l){rl[l.pointerId]&&(rl[l.pointerId]=l)}function aj(l){delete rl[l.pointerId]}function s5(){ij||(document.addEventListener(ej,t5,!0),document.addEventListener(tj,n5,!0),document.addEventListener(nj,aj,!0),document.addEventListener(sj,aj,!0),ij=!0)}function uh(l,g){if(g.pointerType!==(g.MSPOINTER_TYPE_MOUSE||"mouse")){g.touches=[];for(var S in rl)g.touches.push(rl[S]);g.changedTouches=[g],l(g)}}function r5(l,g){g.MSPOINTER_TYPE_TOUCH&&g.pointerType===g.MSPOINTER_TYPE_TOUCH&&Hn(g),uh(l,g)}function i5(l){var g={},S,D;for(D in l)S=l[D],g[D]=S&&S.bind?S.bind(l):S;return l=g,g.type="dblclick",g.detail=2,g.isTrusted=!1,g._simulated=!0,g}var a5=200;function o5(l,g){l.addEventListener("dblclick",g);var S=0,D;function H(ee){if(ee.detail!==1){D=ee.detail;return}if(!(ee.pointerType==="mouse"||ee.sourceCapabilities&&!ee.sourceCapabilities.firesTouchEvents)){var de=uj(ee);if(!(de.some(function(ye){return ye instanceof HTMLLabelElement&&ye.attributes.for})&&!de.some(function(ye){return ye instanceof HTMLInputElement||ye instanceof HTMLSelectElement}))){var ge=Date.now();ge-S<=a5?(D++,D===2&&g(i5(ee))):D=1,S=ge}}}return l.addEventListener("click",H),{dblclick:g,simDblclick:H}}function l5(l,g){l.removeEventListener("dblclick",g.dblclick),l.removeEventListener("click",g.simDblclick)}var tg=mh(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),td=mh(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),oj=td==="webkitTransition"||td==="OTransition"?td+"End":"transitionend";function lj(l){return typeof l=="string"?document.getElementById(l):l}function nd(l,g){var S=l.style[g]||l.currentStyle&&l.currentStyle[g];if((!S||S==="auto")&&document.defaultView){var D=document.defaultView.getComputedStyle(l,null);S=D?D[g]:null}return S==="auto"?null:S}function Rt(l,g,S){var D=document.createElement(l);return D.className=g||"",S&&S.appendChild(D),D}function an(l){var g=l.parentNode;g&&g.removeChild(l)}function hh(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function il(l){var g=l.parentNode;g&&g.lastChild!==l&&g.appendChild(l)}function al(l){var g=l.parentNode;g&&g.firstChild!==l&&g.insertBefore(l,g.firstChild)}function ng(l,g){if(l.classList!==void 0)return l.classList.contains(g);var S=fh(l);return S.length>0&&new RegExp("(^|\\s)"+g+"(\\s|$)").test(S)}function yt(l,g){if(l.classList!==void 0)for(var S=x(g),D=0,H=S.length;D<H;D++)l.classList.add(S[D]);else if(!ng(l,g)){var ee=fh(l);sg(l,(ee?ee+" ":"")+g)}}function yn(l,g){l.classList!==void 0?l.classList.remove(g):sg(l,p((" "+fh(l)+" ").replace(" "+g+" "," ")))}function sg(l,g){l.className.baseVal===void 0?l.className=g:l.className.baseVal=g}function fh(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Js(l,g){"opacity"in l.style?l.style.opacity=g:"filter"in l.style&&c5(l,g)}function c5(l,g){var S=!1,D="DXImageTransform.Microsoft.Alpha";try{S=l.filters.item(D)}catch{if(g===1)return}g=Math.round(g*100),S?(S.Enabled=g!==100,S.Opacity=g):l.style.filter+=" progid:"+D+"(opacity="+g+")"}function mh(l){for(var g=document.documentElement.style,S=0;S<l.length;S++)if(l[S]in g)return l[S];return!1}function ao(l,g,S){var D=g||new Y(0,0);l.style[tg]=(st.ie3d?"translate("+D.x+"px,"+D.y+"px)":"translate3d("+D.x+"px,"+D.y+"px,0)")+(S?" scale("+S+")":"")}function En(l,g){l._leaflet_pos=g,st.any3d?ao(l,g):(l.style.left=g.x+"px",l.style.top=g.y+"px")}function oo(l){return l._leaflet_pos||new Y(0,0)}var sd,rd,rg;if("onselectstart"in document)sd=function(){pt(window,"selectstart",Hn)},rd=function(){Ht(window,"selectstart",Hn)};else{var id=mh(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);sd=function(){if(id){var l=document.documentElement.style;rg=l[id],l[id]="none"}},rd=function(){id&&(document.documentElement.style[id]=rg,rg=void 0)}}function ig(){pt(window,"dragstart",Hn)}function ag(){Ht(window,"dragstart",Hn)}var ph,og;function lg(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(gh(),ph=l,og=l.style.outlineStyle,l.style.outlineStyle="none",pt(window,"keydown",gh))}function gh(){ph&&(ph.style.outlineStyle=og,ph=void 0,og=void 0,Ht(window,"keydown",gh))}function cj(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function cg(l){var g=l.getBoundingClientRect();return{x:g.width/l.offsetWidth||1,y:g.height/l.offsetHeight||1,boundingClientRect:g}}var d5={__proto__:null,TRANSFORM:tg,TRANSITION:td,TRANSITION_END:oj,get:lj,getStyle:nd,create:Rt,remove:an,empty:hh,toFront:il,toBack:al,hasClass:ng,addClass:yt,removeClass:yn,setClass:sg,getClass:fh,setOpacity:Js,testProp:mh,setTransform:ao,setPosition:En,getPosition:oo,get disableTextSelection(){return sd},get enableTextSelection(){return rd},disableImageDrag:ig,enableImageDrag:ag,preventOutline:lg,restoreOutline:gh,getSizedParentNode:cj,getScale:cg};function pt(l,g,S,D){if(g&&typeof g=="object")for(var H in g)ug(l,H,g[H],S);else{g=x(g);for(var ee=0,de=g.length;ee<de;ee++)ug(l,g[ee],S,D)}return this}var Kr="_leaflet_events";function Ht(l,g,S,D){if(arguments.length===1)dj(l),delete l[Kr];else if(g&&typeof g=="object")for(var H in g)hg(l,H,g[H],S);else if(g=x(g),arguments.length===2)dj(l,function(ge){return N(g,ge)!==-1});else for(var ee=0,de=g.length;ee<de;ee++)hg(l,g[ee],S,D);return this}function dj(l,g){for(var S in l[Kr]){var D=S.split(/\d/)[0];(!g||g(D))&&hg(l,D,null,null,S)}}var dg={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ug(l,g,S,D){var H=g+d(S)+(D?"_"+d(D):"");if(l[Kr]&&l[Kr][H])return this;var ee=function(ge){return S.call(D||l,ge||window.event)},de=ee;!st.touchNative&&st.pointer&&g.indexOf("touch")===0?ee=JL(l,g,ee):st.touch&&g==="dblclick"?ee=o5(l,ee):"addEventListener"in l?g==="touchstart"||g==="touchmove"||g==="wheel"||g==="mousewheel"?l.addEventListener(dg[g]||g,ee,st.passiveEvents?{passive:!1}:!1):g==="mouseenter"||g==="mouseleave"?(ee=function(ge){ge=ge||window.event,mg(l,ge)&&de(ge)},l.addEventListener(dg[g],ee,!1)):l.addEventListener(g,de,!1):l.attachEvent("on"+g,ee),l[Kr]=l[Kr]||{},l[Kr][H]=ee}function hg(l,g,S,D,H){H=H||g+d(S)+(D?"_"+d(D):"");var ee=l[Kr]&&l[Kr][H];if(!ee)return this;!st.touchNative&&st.pointer&&g.indexOf("touch")===0?e5(l,g,ee):st.touch&&g==="dblclick"?l5(l,ee):"removeEventListener"in l?l.removeEventListener(dg[g]||g,ee,!1):l.detachEvent("on"+g,ee),l[Kr][H]=null}function lo(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function fg(l){return ug(l,"wheel",lo),this}function ad(l){return pt(l,"mousedown touchstart dblclick contextmenu",lo),l._leaflet_disable_click=!0,this}function Hn(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function co(l){return Hn(l),lo(l),this}function uj(l){if(l.composedPath)return l.composedPath();for(var g=[],S=l.target;S;)g.push(S),S=S.parentNode;return g}function hj(l,g){if(!g)return new Y(l.clientX,l.clientY);var S=cg(g),D=S.boundingClientRect;return new Y((l.clientX-D.left)/S.x-g.clientLeft,(l.clientY-D.top)/S.y-g.clientTop)}var u5=st.linux&&st.chrome?window.devicePixelRatio:st.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function fj(l){return st.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/u5:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function mg(l,g){var S=g.relatedTarget;if(!S)return!0;try{for(;S&&S!==l;)S=S.parentNode}catch{return!1}return S!==l}var h5={__proto__:null,on:pt,off:Ht,stopPropagation:lo,disableScrollPropagation:fg,disableClickPropagation:ad,preventDefault:Hn,stop:co,getPropagationPath:uj,getMousePosition:hj,getWheelDelta:fj,isExternalTarget:mg,addListener:pt,removeListener:Ht},mj=X.extend({run:function(l,g,S,D){this.stop(),this._el=l,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(D||.5,.2),this._startPos=oo(l),this._offset=g.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(l){var g=+new Date-this._startTime,S=this._duration*1e3;g<S?this._runFrame(this._easeOut(g/S),l):(this._runFrame(1),this._complete())},_runFrame:function(l,g){var S=this._startPos.add(this._offset.multiplyBy(l));g&&S._round(),En(this._el,S),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Tt=X.extend({options:{crs:ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,g){g=v(this,g),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),g.maxBounds&&this.setMaxBounds(g.maxBounds),g.zoom!==void 0&&(this._zoom=this._limitZoom(g.zoom)),g.center&&g.zoom!==void 0&&this.setView(B(g.center),g.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=td&&st.any3d&&!st.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),pt(this._proxy,oj,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,g,S){if(g=g===void 0?this._zoom:this._limitZoom(g),l=this._limitCenter(B(l),g,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var D=this._zoom!==g?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,g,S.zoom):this._tryAnimatedPan(l,S.pan);if(D)return clearTimeout(this._sizeTimer),this}return this._resetView(l,g,S.pan&&S.pan.noMoveStart),this},setZoom:function(l,g){return this._loaded?this.setView(this.getCenter(),l,{zoom:g}):(this._zoom=l,this)},zoomIn:function(l,g){return l=l||(st.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,g)},zoomOut:function(l,g){return l=l||(st.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,g)},setZoomAround:function(l,g,S){var D=this.getZoomScale(g),H=this.getSize().divideBy(2),ee=l instanceof Y?l:this.latLngToContainerPoint(l),de=ee.subtract(H).multiplyBy(1-1/D),ge=this.containerPointToLatLng(H.add(de));return this.setView(ge,g,{zoom:S})},_getBoundsCenterZoom:function(l,g){g=g||{},l=l.getBounds?l.getBounds():W(l);var S=V(g.paddingTopLeft||g.padding||[0,0]),D=V(g.paddingBottomRight||g.padding||[0,0]),H=this.getBoundsZoom(l,!1,S.add(D));if(H=typeof g.maxZoom=="number"?Math.min(g.maxZoom,H):H,H===1/0)return{center:l.getCenter(),zoom:H};var ee=D.subtract(S).divideBy(2),de=this.project(l.getSouthWest(),H),ge=this.project(l.getNorthEast(),H),ye=this.unproject(de.add(ge).divideBy(2).add(ee),H);return{center:ye,zoom:H}},fitBounds:function(l,g){if(l=W(l),!l.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(l,g);return this.setView(S.center,S.zoom,g)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,g){return this.setView(l,this._zoom,{pan:g})},panBy:function(l,g){if(l=V(l).round(),g=g||{},!l.x&&!l.y)return this.fire("moveend");if(g.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new mj,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),g.noMoveStart||this.fire("movestart"),g.animate!==!1){yt(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,S,g.duration||.25,g.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,g,S){if(S=S||{},S.animate===!1||!st.any3d)return this.setView(l,g,S);this._stop();var D=this.project(this.getCenter()),H=this.project(l),ee=this.getSize(),de=this._zoom;l=B(l),g=g===void 0?de:g;var ge=Math.max(ee.x,ee.y),ye=ge*this.getZoomScale(de,g),Ee=H.distanceTo(D)||1,Ue=1.42,ot=Ue*Ue;function Nt(Tn){var Ph=Tn?-1:1,e3=Tn?ye:ge,t3=ye*ye-ge*ge+Ph*ot*ot*Ee*Ee,n3=2*e3*ot*Ee,Sg=t3/n3,Gj=Math.sqrt(Sg*Sg+1)-Sg,s3=Gj<1e-9?-18:Math.log(Gj);return s3}function us(Tn){return(Math.exp(Tn)-Math.exp(-Tn))/2}function $n(Tn){return(Math.exp(Tn)+Math.exp(-Tn))/2}function tr(Tn){return us(Tn)/$n(Tn)}var Cs=Nt(0);function hl(Tn){return ge*($n(Cs)/$n(Cs+Ue*Tn))}function Y5(Tn){return ge*($n(Cs)*tr(Cs+Ue*Tn)-us(Cs))/ot}function X5(Tn){return 1-Math.pow(1-Tn,1.5)}var Q5=Date.now(),Wj=(Nt(1)-Cs)/Ue,J5=S.duration?1e3*S.duration:1e3*Wj*.8;function Zj(){var Tn=(Date.now()-Q5)/J5,Ph=X5(Tn)*Wj;Tn<=1?(this._flyToFrame=E(Zj,this),this._move(this.unproject(D.add(H.subtract(D).multiplyBy(Y5(Ph)/Ee)),de),this.getScaleZoom(ge/hl(Ph),de),{flyTo:!0})):this._move(l,g)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),Zj.call(this),this},flyToBounds:function(l,g){var S=this._getBoundsCenterZoom(l,g);return this.flyTo(S.center,S.zoom,g)},setMaxBounds:function(l){return l=W(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var g=this.options.minZoom;return this.options.minZoom=l,this._loaded&&g!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var g=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&g!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,g){this._enforcingBounds=!0;var S=this.getCenter(),D=this._limitCenter(S,this._zoom,W(l));return S.equals(D)||this.panTo(D,g),this._enforcingBounds=!1,this},panInside:function(l,g){g=g||{};var S=V(g.paddingTopLeft||g.padding||[0,0]),D=V(g.paddingBottomRight||g.padding||[0,0]),H=this.project(this.getCenter()),ee=this.project(l),de=this.getPixelBounds(),ge=F([de.min.add(S),de.max.subtract(D)]),ye=ge.getSize();if(!ge.contains(ee)){this._enforcingBounds=!0;var Ee=ee.subtract(ge.getCenter()),Ue=ge.extend(ee).getSize().subtract(ye);H.x+=Ee.x<0?-Ue.x:Ue.x,H.y+=Ee.y<0?-Ue.y:Ue.y,this.panTo(this.unproject(H),g),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=i({animate:!1,pan:!0},l===!0?{animate:!0}:l);var g=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),D=g.divideBy(2).round(),H=S.divideBy(2).round(),ee=D.subtract(H);return!ee.x&&!ee.y?this:(l.animate&&l.pan?this.panBy(ee):(l.pan&&this._rawPanBy(ee),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:g,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=i({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var g=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(g,S,l):navigator.geolocation.getCurrentPosition(g,S,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var g=l.code,S=l.message||(g===1?"permission denied":g===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:g,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var g=l.coords.latitude,S=l.coords.longitude,D=new K(g,S),H=D.toBounds(l.coords.accuracy*2),ee=this._locateOptions;if(ee.setView){var de=this.getBoundsZoom(H);this.setView(D,ee.maxZoom?Math.min(de,ee.maxZoom):de)}var ge={latlng:D,bounds:H,timestamp:l.timestamp};for(var ye in l.coords)typeof l.coords[ye]=="number"&&(ge[ye]=l.coords[ye]);this.fire("locationfound",ge)}},addHandler:function(l,g){if(!g)return this;var S=this[l]=new g(this);return this._handlers.push(S),this.options[l]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),an(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)an(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,g){var S="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),D=Rt("div",S,g||this._mapPane);return l&&(this._panes[l]=D),D},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),g=this.unproject(l.getBottomLeft()),S=this.unproject(l.getTopRight());return new q(g,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,g,S){l=W(l),S=V(S||[0,0]);var D=this.getZoom()||0,H=this.getMinZoom(),ee=this.getMaxZoom(),de=l.getNorthWest(),ge=l.getSouthEast(),ye=this.getSize().subtract(S),Ee=F(this.project(ge,D),this.project(de,D)).getSize(),Ue=st.any3d?this.options.zoomSnap:1,ot=ye.x/Ee.x,Nt=ye.y/Ee.y,us=g?Math.max(ot,Nt):Math.min(ot,Nt);return D=this.getScaleZoom(us,D),Ue&&(D=Math.round(D/(Ue/100))*(Ue/100),D=g?Math.ceil(D/Ue)*Ue:Math.floor(D/Ue)*Ue),Math.max(H,Math.min(ee,D))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,g){var S=this._getTopLeftPoint(l,g);return new R(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,g){var S=this.options.crs;return g=g===void 0?this._zoom:g,S.scale(l)/S.scale(g)},getScaleZoom:function(l,g){var S=this.options.crs;g=g===void 0?this._zoom:g;var D=S.zoom(l*S.scale(g));return isNaN(D)?1/0:D},project:function(l,g){return g=g===void 0?this._zoom:g,this.options.crs.latLngToPoint(B(l),g)},unproject:function(l,g){return g=g===void 0?this._zoom:g,this.options.crs.pointToLatLng(V(l),g)},layerPointToLatLng:function(l){var g=V(l).add(this.getPixelOrigin());return this.unproject(g)},latLngToLayerPoint:function(l){var g=this.project(B(l))._round();return g._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(B(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(W(l))},distance:function(l,g){return this.options.crs.distance(B(l),B(g))},containerPointToLayerPoint:function(l){return V(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return V(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var g=this.containerPointToLayerPoint(V(l));return this.layerPointToLatLng(g)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(l)))},mouseEventToContainerPoint:function(l){return hj(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var g=this._container=lj(l);if(g){if(g._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");pt(g,"scroll",this._onScroll,this),this._containerId=d(g)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&st.any3d,yt(l,"leaflet-container"+(st.touch?" leaflet-touch":"")+(st.retina?" leaflet-retina":"")+(st.ielt9?" leaflet-oldie":"")+(st.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var g=nd(l,"position");g!=="absolute"&&g!=="relative"&&g!=="fixed"&&g!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),En(this._mapPane,new Y(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(yt(l.markerPane,"leaflet-zoom-hide"),yt(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,g,S){En(this._mapPane,new Y(0,0));var D=!this._loaded;this._loaded=!0,g=this._limitZoom(g),this.fire("viewprereset");var H=this._zoom!==g;this._moveStart(H,S)._move(l,g)._moveEnd(H),this.fire("viewreset"),D&&this.fire("load")},_moveStart:function(l,g){return l&&this.fire("zoomstart"),g||this.fire("movestart"),this},_move:function(l,g,S,D){g===void 0&&(g=this._zoom);var H=this._zoom!==g;return this._zoom=g,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),D?S&&S.pinch&&this.fire("zoom",S):((H||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){En(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[d(this._container)]=this;var g=l?Ht:pt;g(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&g(window,"resize",this._onResize,this),st.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,g){for(var S=[],D,H=g==="mouseout"||g==="mouseover",ee=l.target||l.srcElement,de=!1;ee;){if(D=this._targets[d(ee)],D&&(g==="click"||g==="preclick")&&this._draggableMoved(D)){de=!0;break}if(D&&D.listens(g,!0)&&(H&&!mg(ee,l)||(S.push(D),H))||ee===this._container)break;ee=ee.parentNode}return!S.length&&!de&&!H&&this.listens(g,!0)&&(S=[this]),S},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var g=l.target||l.srcElement;if(!(!this._loaded||g._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(g))){var S=l.type;S==="mousedown"&&lg(g),this._fireDOMEvent(l,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,g,S){if(l.type==="click"){var D=i({},l);D.type="preclick",this._fireDOMEvent(D,D.type,S)}var H=this._findEventTargets(l,g);if(S){for(var ee=[],de=0;de<S.length;de++)S[de].listens(g,!0)&&ee.push(S[de]);H=ee.concat(H)}if(H.length){g==="contextmenu"&&Hn(l);var ge=H[0],ye={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Ee=ge.getLatLng&&(!ge._radius||ge._radius<=10);ye.containerPoint=Ee?this.latLngToContainerPoint(ge.getLatLng()):this.mouseEventToContainerPoint(l),ye.layerPoint=this.containerPointToLayerPoint(ye.containerPoint),ye.latlng=Ee?ge.getLatLng():this.layerPointToLatLng(ye.layerPoint)}for(de=0;de<H.length;de++)if(H[de].fire(g,ye,!0),ye.originalEvent._stopped||H[de].options.bubblingMouseEvents===!1&&N(this._mouseEvents,g)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,g=this._handlers.length;l<g;l++)this._handlers[l].disable()},whenReady:function(l,g){return this._loaded?l.call(g||this,{target:this}):this.on("load",l,g),this},_getMapPanePos:function(){return oo(this._mapPane)||new Y(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,g){var S=l&&g!==void 0?this._getNewPixelOrigin(l,g):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,g){var S=this.getSize()._divideBy(2);return this.project(l,g)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,g,S){var D=this._getNewPixelOrigin(S,g);return this.project(l,g)._subtract(D)},_latLngBoundsToNewLayerBounds:function(l,g,S){var D=this._getNewPixelOrigin(S,g);return F([this.project(l.getSouthWest(),g)._subtract(D),this.project(l.getNorthWest(),g)._subtract(D),this.project(l.getSouthEast(),g)._subtract(D),this.project(l.getNorthEast(),g)._subtract(D)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,g,S){if(!S)return l;var D=this.project(l,g),H=this.getSize().divideBy(2),ee=new R(D.subtract(H),D.add(H)),de=this._getBoundsOffset(ee,S,g);return Math.abs(de.x)<=1&&Math.abs(de.y)<=1?l:this.unproject(D.add(de),g)},_limitOffset:function(l,g){if(!g)return l;var S=this.getPixelBounds(),D=new R(S.min.add(l),S.max.add(l));return l.add(this._getBoundsOffset(D,g))},_getBoundsOffset:function(l,g,S){var D=F(this.project(g.getNorthEast(),S),this.project(g.getSouthWest(),S)),H=D.min.subtract(l.min),ee=D.max.subtract(l.max),de=this._rebound(H.x,-ee.x),ge=this._rebound(H.y,-ee.y);return new Y(de,ge)},_rebound:function(l,g){return l+g>0?Math.round(l-g)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(g))},_limitZoom:function(l){var g=this.getMinZoom(),S=this.getMaxZoom(),D=st.any3d?this.options.zoomSnap:1;return D&&(l=Math.round(l/D)*D),Math.max(g,Math.min(S,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,g){var S=this._getCenterOffset(l)._trunc();return(g&&g.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,g),!0)},_createAnimProxy:function(){var l=this._proxy=Rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(g){var S=tg,D=this._proxy.style[S];ao(this._proxy,this.project(g.center,g.zoom),this.getZoomScale(g.zoom,1)),D===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){an(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),g=this.getZoom();ao(this._proxy,this.project(l,g),this.getZoomScale(g,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,g,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(g-this._zoom)>this.options.zoomAnimationThreshold)return!1;var D=this.getZoomScale(g),H=this._getCenterOffset(l)._divideBy(1-1/D);return S.animate!==!0&&!this.getSize().contains(H)?!1:(E(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(l,g,!0)},this),!0)},_animateZoom:function(l,g,S,D){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=g,yt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:g,noUpdate:D}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&yn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function f5(l,g){return new Tt(l,g)}var yr=O.extend({options:{position:"topright"},initialize:function(l){v(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var g=this._map;return g&&g.removeControl(this),this.options.position=l,g&&g.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var g=this._container=this.onAdd(l),S=this.getPosition(),D=l._controlCorners[S];return yt(g,"leaflet-control"),S.indexOf("bottom")!==-1?D.insertBefore(g,D.firstChild):D.appendChild(g),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(an(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),od=function(l){return new yr(l)};Tt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},g="leaflet-",S=this._controlContainer=Rt("div",g+"control-container",this._container);function D(H,ee){var de=g+H+" "+g+ee;l[H+ee]=Rt("div",de,S)}D("top","left"),D("top","right"),D("bottom","left"),D("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)an(this._controlCorners[l]);an(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var pj=yr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,g,S,D){return S<D?-1:D<S?1:0}},initialize:function(l,g,S){v(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var D in l)this._addLayer(l[D],D);for(D in g)this._addLayer(g[D],D,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return yr.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,g){return this._addLayer(l,g),this._map?this._update():this},addOverlay:function(l,g){return this._addLayer(l,g,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var g=this._getLayer(d(l));return g&&this._layers.splice(this._layers.indexOf(g),1),this._map?this._update():this},expand:function(){yt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(yt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):yn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",g=this._container=Rt("div",l),S=this.options.collapsed;g.setAttribute("aria-haspopup",!0),ad(g),fg(g);var D=this._section=Rt("section",l+"-list");S&&(this._map.on("click",this.collapse,this),pt(g,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var H=this._layersLink=Rt("a",l+"-toggle",g);H.href="#",H.title="Layers",H.setAttribute("role","button"),pt(H,{keydown:function(ee){ee.keyCode===13&&this._expandSafely()},click:function(ee){Hn(ee),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=Rt("div",l+"-base",D),this._separator=Rt("div",l+"-separator",D),this._overlaysList=Rt("div",l+"-overlays",D),g.appendChild(D)},_getLayer:function(l){for(var g=0;g<this._layers.length;g++)if(this._layers[g]&&d(this._layers[g].layer)===l)return this._layers[g]},_addLayer:function(l,g,S){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:g,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(D,H){return this.options.sortFunction(D.layer,H.layer,D.name,H.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;hh(this._baseLayersList),hh(this._overlaysList),this._layerControlInputs=[];var l,g,S,D,H=0;for(S=0;S<this._layers.length;S++)D=this._layers[S],this._addItem(D),g=g||D.overlay,l=l||!D.overlay,H+=D.overlay?0:1;return this.options.hideSingleBase&&(l=l&&H>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=g&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var g=this._getLayer(d(l.target)),S=g.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;S&&this._map.fire(S,g)},_createRadioElement:function(l,g){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(g?' checked="checked"':"")+"/>",D=document.createElement("div");return D.innerHTML=S,D.firstChild},_addItem:function(l){var g=document.createElement("label"),S=this._map.hasLayer(l.layer),D;l.overlay?(D=document.createElement("input"),D.type="checkbox",D.className="leaflet-control-layers-selector",D.defaultChecked=S):D=this._createRadioElement("leaflet-base-layers_"+d(this),S),this._layerControlInputs.push(D),D.layerId=d(l.layer),pt(D,"click",this._onInputClick,this);var H=document.createElement("span");H.innerHTML=" "+l.name;var ee=document.createElement("span");g.appendChild(ee),ee.appendChild(D),ee.appendChild(H);var de=l.overlay?this._overlaysList:this._baseLayersList;return de.appendChild(g),this._checkDisabledLayers(),g},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,g,S,D=[],H=[];this._handlingClick=!0;for(var ee=l.length-1;ee>=0;ee--)g=l[ee],S=this._getLayer(g.layerId).layer,g.checked?D.push(S):g.checked||H.push(S);for(ee=0;ee<H.length;ee++)this._map.hasLayer(H[ee])&&this._map.removeLayer(H[ee]);for(ee=0;ee<D.length;ee++)this._map.hasLayer(D[ee])||this._map.addLayer(D[ee]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,g,S,D=this._map.getZoom(),H=l.length-1;H>=0;H--)g=l[H],S=this._getLayer(g.layerId).layer,g.disabled=S.options.minZoom!==void 0&&D<S.options.minZoom||S.options.maxZoom!==void 0&&D>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,pt(l,"click",Hn),this.expand();var g=this;setTimeout(function(){Ht(l,"click",Hn),g._preventClick=!1})}}),m5=function(l,g,S){return new pj(l,g,S)},pg=yr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var g="leaflet-control-zoom",S=Rt("div",g+" leaflet-bar"),D=this.options;return this._zoomInButton=this._createButton(D.zoomInText,D.zoomInTitle,g+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(D.zoomOutText,D.zoomOutTitle,g+"-out",S,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,g,S,D,H){var ee=Rt("a",S,D);return ee.innerHTML=l,ee.href="#",ee.title=g,ee.setAttribute("role","button"),ee.setAttribute("aria-label",g),ad(ee),pt(ee,"click",co),pt(ee,"click",H,this),pt(ee,"click",this._refocusOnMap,this),ee},_updateDisabled:function(){var l=this._map,g="leaflet-disabled";yn(this._zoomInButton,g),yn(this._zoomOutButton,g),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(yt(this._zoomOutButton,g),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(yt(this._zoomInButton,g),this._zoomInButton.setAttribute("aria-disabled","true"))}});Tt.mergeOptions({zoomControl:!0}),Tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new pg,this.addControl(this.zoomControl))});var p5=function(l){return new pg(l)},gj=yr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var g="leaflet-control-scale",S=Rt("div",g),D=this.options;return this._addScales(D,g+"-line",S),l.on(D.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),S},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,g,S){l.metric&&(this._mScale=Rt("div",g,S)),l.imperial&&(this._iScale=Rt("div",g,S))},_update:function(){var l=this._map,g=l.getSize().y/2,S=l.distance(l.containerPointToLatLng([0,g]),l.containerPointToLatLng([this.options.maxWidth,g]));this._updateScales(S)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var g=this._getRoundNum(l),S=g<1e3?g+" m":g/1e3+" km";this._updateScale(this._mScale,S,g/l)},_updateImperial:function(l){var g=l*3.2808399,S,D,H;g>5280?(S=g/5280,D=this._getRoundNum(S),this._updateScale(this._iScale,D+" mi",D/S)):(H=this._getRoundNum(g),this._updateScale(this._iScale,H+" ft",H/g))},_updateScale:function(l,g,S){l.style.width=Math.round(this.options.maxWidth*S)+"px",l.innerHTML=g},_getRoundNum:function(l){var g=Math.pow(10,(Math.floor(l)+"").length-1),S=l/g;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,g*S}}),g5=function(l){return new gj(l)},v5='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',gg=yr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(st.inlineSvg?v5+" ":"")+"Leaflet</a>"},initialize:function(l){v(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Rt("div","leaflet-control-attribution"),ad(this._container);for(var g in l._layers)l._layers[g].getAttribution&&this.addAttribution(l._layers[g].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var g in this._attributions)this._attributions[g]&&l.push(g);var S=[];this.options.prefix&&S.push(this.options.prefix),l.length&&S.push(l.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Tt.mergeOptions({attributionControl:!0}),Tt.addInitHook(function(){this.options.attributionControl&&new gg().addTo(this)});var x5=function(l){return new gg(l)};yr.Layers=pj,yr.Zoom=pg,yr.Scale=gj,yr.Attribution=gg,od.layers=m5,od.zoom=p5,od.scale=g5,od.attribution=x5;var Yr=O.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Yr.addTo=function(l,g){return l.addHandler(g,this),this};var y5={Events:G},vj=st.touch?"touchstart mousedown":"mousedown",la=X.extend({options:{clickTolerance:3},initialize:function(l,g,S,D){v(this,D),this._element=l,this._dragStartTarget=g||l,this._preventOutline=S},enable:function(){this._enabled||(pt(this._dragStartTarget,vj,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(la._dragging===this&&this.finishDrag(!0),Ht(this._dragStartTarget,vj,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!ng(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){la._dragging===this&&this.finishDrag();return}if(!(la._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(la._dragging=this,this._preventOutline&&lg(this._element),ig(),sd(),!this._moving)){this.fire("down");var g=l.touches?l.touches[0]:l,S=cj(this._element);this._startPoint=new Y(g.clientX,g.clientY),this._startPos=oo(this._element),this._parentScale=cg(S);var D=l.type==="mousedown";pt(document,D?"mousemove":"touchmove",this._onMove,this),pt(document,D?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var g=l.touches&&l.touches.length===1?l.touches[0]:l,S=new Y(g.clientX,g.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,Hn(l),this._moved||(this.fire("dragstart"),this._moved=!0,yt(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),yt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),En(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){yn(document.body,"leaflet-dragging"),this._lastTarget&&(yn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ht(document,"mousemove touchmove",this._onMove,this),Ht(document,"mouseup touchend touchcancel",this._onUp,this),ag(),rd();var g=this._moved&&this._moving;this._moving=!1,la._dragging=!1,g&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function xj(l,g,S){var D,H=[1,4,2,8],ee,de,ge,ye,Ee,Ue,ot,Nt;for(ee=0,Ue=l.length;ee<Ue;ee++)l[ee]._code=uo(l[ee],g);for(ge=0;ge<4;ge++){for(ot=H[ge],D=[],ee=0,Ue=l.length,de=Ue-1;ee<Ue;de=ee++)ye=l[ee],Ee=l[de],ye._code&ot?Ee._code&ot||(Nt=vh(Ee,ye,ot,g,S),Nt._code=uo(Nt,g),D.push(Nt)):(Ee._code&ot&&(Nt=vh(Ee,ye,ot,g,S),Nt._code=uo(Nt,g),D.push(Nt)),D.push(ye));l=D}return l}function yj(l,g){var S,D,H,ee,de,ge,ye,Ee,Ue;if(!l||l.length===0)throw new Error("latlngs not passed");er(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ot=B([0,0]),Nt=W(l),us=Nt.getNorthWest().distanceTo(Nt.getSouthWest())*Nt.getNorthEast().distanceTo(Nt.getNorthWest());us<1700&&(ot=vg(l));var $n=l.length,tr=[];for(S=0;S<$n;S++){var Cs=B(l[S]);tr.push(g.project(B([Cs.lat-ot.lat,Cs.lng-ot.lng])))}for(ge=ye=Ee=0,S=0,D=$n-1;S<$n;D=S++)H=tr[S],ee=tr[D],de=H.y*ee.x-ee.y*H.x,ye+=(H.x+ee.x)*de,Ee+=(H.y+ee.y)*de,ge+=de*3;ge===0?Ue=tr[0]:Ue=[ye/ge,Ee/ge];var hl=g.unproject(V(Ue));return B([hl.lat+ot.lat,hl.lng+ot.lng])}function vg(l){for(var g=0,S=0,D=0,H=0;H<l.length;H++){var ee=B(l[H]);g+=ee.lat,S+=ee.lng,D++}return B([g/D,S/D])}var b5={__proto__:null,clipPolygon:xj,polygonCenter:yj,centroid:vg};function bj(l,g){if(!g||!l.length)return l.slice();var S=g*g;return l=_5(l,S),l=j5(l,S),l}function wj(l,g,S){return Math.sqrt(ld(l,g,S,!0))}function w5(l,g,S){return ld(l,g,S)}function j5(l,g){var S=l.length,D=typeof Uint8Array<"u"?Uint8Array:Array,H=new D(S);H[0]=H[S-1]=1,xg(l,H,g,0,S-1);var ee,de=[];for(ee=0;ee<S;ee++)H[ee]&&de.push(l[ee]);return de}function xg(l,g,S,D,H){var ee=0,de,ge,ye;for(ge=D+1;ge<=H-1;ge++)ye=ld(l[ge],l[D],l[H],!0),ye>ee&&(de=ge,ee=ye);ee>S&&(g[de]=1,xg(l,g,S,D,de),xg(l,g,S,de,H))}function _5(l,g){for(var S=[l[0]],D=1,H=0,ee=l.length;D<ee;D++)N5(l[D],l[H])>g&&(S.push(l[D]),H=D);return H<ee-1&&S.push(l[ee-1]),S}var jj;function _j(l,g,S,D,H){var ee=D?jj:uo(l,S),de=uo(g,S),ge,ye,Ee;for(jj=de;;){if(!(ee|de))return[l,g];if(ee&de)return!1;ge=ee||de,ye=vh(l,g,ge,S,H),Ee=uo(ye,S),ge===ee?(l=ye,ee=Ee):(g=ye,de=Ee)}}function vh(l,g,S,D,H){var ee=g.x-l.x,de=g.y-l.y,ge=D.min,ye=D.max,Ee,Ue;return S&8?(Ee=l.x+ee*(ye.y-l.y)/de,Ue=ye.y):S&4?(Ee=l.x+ee*(ge.y-l.y)/de,Ue=ge.y):S&2?(Ee=ye.x,Ue=l.y+de*(ye.x-l.x)/ee):S&1&&(Ee=ge.x,Ue=l.y+de*(ge.x-l.x)/ee),new Y(Ee,Ue,H)}function uo(l,g){var S=0;return l.x<g.min.x?S|=1:l.x>g.max.x&&(S|=2),l.y<g.min.y?S|=4:l.y>g.max.y&&(S|=8),S}function N5(l,g){var S=g.x-l.x,D=g.y-l.y;return S*S+D*D}function ld(l,g,S,D){var H=g.x,ee=g.y,de=S.x-H,ge=S.y-ee,ye=de*de+ge*ge,Ee;return ye>0&&(Ee=((l.x-H)*de+(l.y-ee)*ge)/ye,Ee>1?(H=S.x,ee=S.y):Ee>0&&(H+=de*Ee,ee+=ge*Ee)),de=l.x-H,ge=l.y-ee,D?de*de+ge*ge:new Y(H,ee)}function er(l){return!_(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Nj(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),er(l)}function Sj(l,g){var S,D,H,ee,de,ge,ye,Ee;if(!l||l.length===0)throw new Error("latlngs not passed");er(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ue=B([0,0]),ot=W(l),Nt=ot.getNorthWest().distanceTo(ot.getSouthWest())*ot.getNorthEast().distanceTo(ot.getNorthWest());Nt<1700&&(Ue=vg(l));var us=l.length,$n=[];for(S=0;S<us;S++){var tr=B(l[S]);$n.push(g.project(B([tr.lat-Ue.lat,tr.lng-Ue.lng])))}for(S=0,D=0;S<us-1;S++)D+=$n[S].distanceTo($n[S+1])/2;if(D===0)Ee=$n[0];else for(S=0,ee=0;S<us-1;S++)if(de=$n[S],ge=$n[S+1],H=de.distanceTo(ge),ee+=H,ee>D){ye=(ee-D)/H,Ee=[ge.x-ye*(ge.x-de.x),ge.y-ye*(ge.y-de.y)];break}var Cs=g.unproject(V(Ee));return B([Cs.lat+Ue.lat,Cs.lng+Ue.lng])}var S5={__proto__:null,simplify:bj,pointToSegmentDistance:wj,closestPointOnSegment:w5,clipSegment:_j,_getEdgeIntersection:vh,_getBitCode:uo,_sqClosestPointOnSegment:ld,isFlat:er,_flat:Nj,polylineCenter:Sj},yg={project:function(l){return new Y(l.lng,l.lat)},unproject:function(l){return new K(l.y,l.x)},bounds:new R([-180,-90],[180,90])},bg={R:6378137,R_MINOR:6356752314245179e-9,bounds:new R([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var g=Math.PI/180,S=this.R,D=l.lat*g,H=this.R_MINOR/S,ee=Math.sqrt(1-H*H),de=ee*Math.sin(D),ge=Math.tan(Math.PI/4-D/2)/Math.pow((1-de)/(1+de),ee/2);return D=-S*Math.log(Math.max(ge,1e-10)),new Y(l.lng*g*S,D)},unproject:function(l){for(var g=180/Math.PI,S=this.R,D=this.R_MINOR/S,H=Math.sqrt(1-D*D),ee=Math.exp(-l.y/S),de=Math.PI/2-2*Math.atan(ee),ge=0,ye=.1,Ee;ge<15&&Math.abs(ye)>1e-7;ge++)Ee=H*Math.sin(de),Ee=Math.pow((1-Ee)/(1+Ee),H/2),ye=Math.PI/2-2*Math.atan(ee*Ee)-de,de+=ye;return new K(de*g,l.x*g/S)}},k5={__proto__:null,LonLat:yg,Mercator:bg,SphericalMercator:ie},C5=i({},se,{code:"EPSG:3395",projection:bg,transformation:function(){var l=.5/(Math.PI*bg.R);return Q(l,.5,-l,.5)}()}),kj=i({},se,{code:"EPSG:4326",projection:yg,transformation:Q(1/180,1,-1/180,.5)}),P5=i({},Z,{projection:yg,transformation:Q(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,g){var S=g.lng-l.lng,D=g.lat-l.lat;return Math.sqrt(S*S+D*D)},infinite:!0});Z.Earth=se,Z.EPSG3395=C5,Z.EPSG3857=ue,Z.EPSG900913=_e,Z.EPSG4326=kj,Z.Simple=P5;var br=X.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[d(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[d(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var g=l.target;if(g.hasLayer(this)){if(this._map=g,this._zoomAnimated=g._zoomAnimated,this.getEvents){var S=this.getEvents();g.on(S,this),this.once("remove",function(){g.off(S,this)},this)}this.onAdd(g),this.fire("add"),g.fire("layeradd",{layer:this})}}});Tt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var g=d(l);return this._layers[g]?this:(this._layers[g]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var g=d(l);return this._layers[g]?(this._loaded&&l.onRemove(this),delete this._layers[g],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return d(l)in this._layers},eachLayer:function(l,g){for(var S in this._layers)l.call(g,this._layers[S]);return this},_addLayers:function(l){l=l?_(l)?l:[l]:[];for(var g=0,S=l.length;g<S;g++)this.addLayer(l[g])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[d(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var g=d(l);this._zoomBoundLayers[g]&&(delete this._zoomBoundLayers[g],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,g=-1/0,S=this._getZoomSpan();for(var D in this._zoomBoundLayers){var H=this._zoomBoundLayers[D].options;l=H.minZoom===void 0?l:Math.min(l,H.minZoom),g=H.maxZoom===void 0?g:Math.max(g,H.maxZoom)}this._layersMaxZoom=g===-1/0?void 0:g,this._layersMinZoom=l===1/0?void 0:l,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ol=br.extend({initialize:function(l,g){v(this,g),this._layers={};var S,D;if(l)for(S=0,D=l.length;S<D;S++)this.addLayer(l[S])},addLayer:function(l){var g=this.getLayerId(l);return this._layers[g]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var g=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[g]&&this._map.removeLayer(this._layers[g]),delete this._layers[g],this},hasLayer:function(l){var g=typeof l=="number"?l:this.getLayerId(l);return g in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var g=Array.prototype.slice.call(arguments,1),S,D;for(S in this._layers)D=this._layers[S],D[l]&&D[l].apply(D,g);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,g){for(var S in this._layers)l.call(g,this._layers[S]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return d(l)}}),E5=function(l,g){return new ol(l,g)},Ei=ol.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),ol.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),ol.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new q;for(var g in this._layers){var S=this._layers[g];l.extend(S.getBounds?S.getBounds():S.getLatLng())}return l}}),T5=function(l,g){return new Ei(l,g)},ll=O.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){v(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,g){var S=this._getIconUrl(l);if(!S){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var D=this._createImg(S,g&&g.tagName==="IMG"?g:null);return this._setIconStyles(D,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),D},_setIconStyles:function(l,g){var S=this.options,D=S[g+"Size"];typeof D=="number"&&(D=[D,D]);var H=V(D),ee=V(g==="shadow"&&S.shadowAnchor||S.iconAnchor||H&&H.divideBy(2,!0));l.className="leaflet-marker-"+g+" "+(S.className||""),ee&&(l.style.marginLeft=-ee.x+"px",l.style.marginTop=-ee.y+"px"),H&&(l.style.width=H.x+"px",l.style.height=H.y+"px")},_createImg:function(l,g){return g=g||document.createElement("img"),g.src=l,g},_getIconUrl:function(l){return st.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function A5(l){return new ll(l)}var cd=ll.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof cd.imagePath!="string"&&(cd.imagePath=this._detectIconPath()),(this.options.imagePath||cd.imagePath)+ll.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var g=function(S,D,H){var ee=D.exec(S);return ee&&ee[H]};return l=g(l,/^url\((['"])?(.+)\1\)$/,2),l&&g(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Rt("div","leaflet-default-icon-path",document.body),g=nd(l,"background-image")||nd(l,"backgroundImage");if(document.body.removeChild(l),g=this._stripUrl(g),g)return g;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),Cj=Yr.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new la(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),yt(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var g=this._marker,S=g._map,D=this._marker.options.autoPanSpeed,H=this._marker.options.autoPanPadding,ee=oo(g._icon),de=S.getPixelBounds(),ge=S.getPixelOrigin(),ye=F(de.min._subtract(ge).add(H),de.max._subtract(ge).subtract(H));if(!ye.contains(ee)){var Ee=V((Math.max(ye.max.x,ee.x)-ye.max.x)/(de.max.x-ye.max.x)-(Math.min(ye.min.x,ee.x)-ye.min.x)/(de.min.x-ye.min.x),(Math.max(ye.max.y,ee.y)-ye.max.y)/(de.max.y-ye.max.y)-(Math.min(ye.min.y,ee.y)-ye.min.y)/(de.min.y-ye.min.y)).multiplyBy(D);S.panBy(Ee,{animate:!1}),this._draggable._newPos._add(Ee),this._draggable._startPos._add(Ee),En(g._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=E(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,l)))},_onDrag:function(l){var g=this._marker,S=g._shadow,D=oo(g._icon),H=g._map.layerPointToLatLng(D);S&&En(S,D),g._latlng=H,l.latlng=H,l.oldLatLng=this._oldLatLng,g.fire("move",l).fire("drag",l)},_onDragEnd:function(l){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),xh=br.extend({options:{icon:new cd,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,g){v(this,g),this._latlng=B(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var g=this._latlng;return this._latlng=B(l),this.update(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,g="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=l.icon.createIcon(this._icon),D=!1;S!==this._icon&&(this._icon&&this._removeIcon(),D=!0,l.title&&(S.title=l.title),S.tagName==="IMG"&&(S.alt=l.alt||"")),yt(S,g),l.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pt(S,"focus",this._panOnFocus,this);var H=l.icon.createShadow(this._shadow),ee=!1;H!==this._shadow&&(this._removeShadow(),ee=!0),H&&(yt(H,g),H.alt=""),this._shadow=H,l.opacity<1&&this._updateOpacity(),D&&this.getPane().appendChild(this._icon),this._initInteraction(),H&&ee&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ht(this._icon,"focus",this._panOnFocus,this),an(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&an(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&En(this._icon,l),this._shadow&&En(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var g=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(g)},_initInteraction:function(){if(this.options.interactive&&(yt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cj)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cj(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Js(this._icon,l),this._shadow&&Js(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var g=this.options.icon.options,S=g.iconSize?V(g.iconSize):V(0,0),D=g.iconAnchor?V(g.iconAnchor):V(0,0);l.panInside(this._latlng,{paddingTopLeft:D,paddingBottomRight:S.subtract(D)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function O5(l,g){return new xh(l,g)}var ca=br.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return v(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),yh=ca.extend({options:{fill:!0,radius:10},initialize:function(l,g){v(this,g),this._latlng=B(l),this._radius=this.options.radius},setLatLng:function(l){var g=this._latlng;return this._latlng=B(l),this.redraw(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var g=l&&l.radius||this._radius;return ca.prototype.setStyle.call(this,l),this.setRadius(g),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,g=this._radiusY||l,S=this._clickTolerance(),D=[l+S,g+S];this._pxBounds=new R(this._point.subtract(D),this._point.add(D))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function R5(l,g){return new yh(l,g)}var wg=yh.extend({initialize:function(l,g,S){if(typeof g=="number"&&(g=i({},S,{radius:g})),v(this,g),this._latlng=B(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:ca.prototype.setStyle,_project:function(){var l=this._latlng.lng,g=this._latlng.lat,S=this._map,D=S.options.crs;if(D.distance===se.distance){var H=Math.PI/180,ee=this._mRadius/se.R/H,de=S.project([g+ee,l]),ge=S.project([g-ee,l]),ye=de.add(ge).divideBy(2),Ee=S.unproject(ye).lat,Ue=Math.acos((Math.cos(ee*H)-Math.sin(g*H)*Math.sin(Ee*H))/(Math.cos(g*H)*Math.cos(Ee*H)))/H;(isNaN(Ue)||Ue===0)&&(Ue=ee/Math.cos(Math.PI/180*g)),this._point=ye.subtract(S.getPixelOrigin()),this._radius=isNaN(Ue)?0:ye.x-S.project([Ee,l-Ue]).x,this._radiusY=ye.y-de.y}else{var ot=D.unproject(D.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(ot).x}this._updateBounds()}});function L5(l,g,S){return new wg(l,g,S)}var Ti=ca.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,g){v(this,g),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var g=1/0,S=null,D=ld,H,ee,de=0,ge=this._parts.length;de<ge;de++)for(var ye=this._parts[de],Ee=1,Ue=ye.length;Ee<Ue;Ee++){H=ye[Ee-1],ee=ye[Ee];var ot=D(l,H,ee,!0);ot<g&&(g=ot,S=D(l,H,ee))}return S&&(S.distance=Math.sqrt(g)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Sj(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,g){return g=g||this._defaultShape(),l=B(l),g.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new q,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return er(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var g=[],S=er(l),D=0,H=l.length;D<H;D++)S?(g[D]=B(l[D]),this._bounds.extend(g[D])):g[D]=this._convertLatLngs(l[D]);return g},_project:function(){var l=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),g=new Y(l,l);this._rawPxBounds&&(this._pxBounds=new R([this._rawPxBounds.min.subtract(g),this._rawPxBounds.max.add(g)]))},_projectLatlngs:function(l,g,S){var D=l[0]instanceof K,H=l.length,ee,de;if(D){for(de=[],ee=0;ee<H;ee++)de[ee]=this._map.latLngToLayerPoint(l[ee]),S.extend(de[ee]);g.push(de)}else for(ee=0;ee<H;ee++)this._projectLatlngs(l[ee],g,S)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var g=this._parts,S,D,H,ee,de,ge,ye;for(S=0,H=0,ee=this._rings.length;S<ee;S++)for(ye=this._rings[S],D=0,de=ye.length;D<de-1;D++)ge=_j(ye[D],ye[D+1],l,D,!0),ge&&(g[H]=g[H]||[],g[H].push(ge[0]),(ge[1]!==ye[D+1]||D===de-2)&&(g[H].push(ge[1]),H++))}},_simplifyPoints:function(){for(var l=this._parts,g=this.options.smoothFactor,S=0,D=l.length;S<D;S++)l[S]=bj(l[S],g)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,g){var S,D,H,ee,de,ge,ye=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(S=0,ee=this._parts.length;S<ee;S++)for(ge=this._parts[S],D=0,de=ge.length,H=de-1;D<de;H=D++)if(!(!g&&D===0)&&wj(l,ge[H],ge[D])<=ye)return!0;return!1}});function M5(l,g){return new Ti(l,g)}Ti._flat=Nj;var cl=Ti.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yj(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var g=Ti.prototype._convertLatLngs.call(this,l),S=g.length;return S>=2&&g[0]instanceof K&&g[0].equals(g[S-1])&&g.pop(),g},_setLatLngs:function(l){Ti.prototype._setLatLngs.call(this,l),er(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return er(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,g=this.options.weight,S=new Y(g,g);if(l=new R(l.min.subtract(S),l.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var D=0,H=this._rings.length,ee;D<H;D++)ee=xj(this._rings[D],l,!0),ee.length&&this._parts.push(ee)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var g=!1,S,D,H,ee,de,ge,ye,Ee;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(ee=0,ye=this._parts.length;ee<ye;ee++)for(S=this._parts[ee],de=0,Ee=S.length,ge=Ee-1;de<Ee;ge=de++)D=S[de],H=S[ge],D.y>l.y!=H.y>l.y&&l.x<(H.x-D.x)*(l.y-D.y)/(H.y-D.y)+D.x&&(g=!g);return g||Ti.prototype._containsPoint.call(this,l,!0)}});function I5(l,g){return new cl(l,g)}var Ai=Ei.extend({initialize:function(l,g){v(this,g),this._layers={},l&&this.addData(l)},addData:function(l){var g=_(l)?l:l.features,S,D,H;if(g){for(S=0,D=g.length;S<D;S++)H=g[S],(H.geometries||H.geometry||H.features||H.coordinates)&&this.addData(H);return this}var ee=this.options;if(ee.filter&&!ee.filter(l))return this;var de=bh(l,ee);return de?(de.feature=_h(l),de.defaultOptions=de.options,this.resetStyle(de),ee.onEachFeature&&ee.onEachFeature(l,de),this.addLayer(de)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=i({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(g){this._setLayerStyle(g,l)},this)},_setLayerStyle:function(l,g){l.setStyle&&(typeof g=="function"&&(g=g(l.feature)),l.setStyle(g))}});function bh(l,g){var S=l.type==="Feature"?l.geometry:l,D=S?S.coordinates:null,H=[],ee=g&&g.pointToLayer,de=g&&g.coordsToLatLng||jg,ge,ye,Ee,Ue;if(!D&&!S)return null;switch(S.type){case"Point":return ge=de(D),Pj(ee,l,ge,g);case"MultiPoint":for(Ee=0,Ue=D.length;Ee<Ue;Ee++)ge=de(D[Ee]),H.push(Pj(ee,l,ge,g));return new Ei(H);case"LineString":case"MultiLineString":return ye=wh(D,S.type==="LineString"?0:1,de),new Ti(ye,g);case"Polygon":case"MultiPolygon":return ye=wh(D,S.type==="Polygon"?1:2,de),new cl(ye,g);case"GeometryCollection":for(Ee=0,Ue=S.geometries.length;Ee<Ue;Ee++){var ot=bh({geometry:S.geometries[Ee],type:"Feature",properties:l.properties},g);ot&&H.push(ot)}return new Ei(H);case"FeatureCollection":for(Ee=0,Ue=S.features.length;Ee<Ue;Ee++){var Nt=bh(S.features[Ee],g);Nt&&H.push(Nt)}return new Ei(H);default:throw new Error("Invalid GeoJSON object.")}}function Pj(l,g,S,D){return l?l(g,S):new xh(S,D&&D.markersInheritOptions&&D)}function jg(l){return new K(l[1],l[0],l[2])}function wh(l,g,S){for(var D=[],H=0,ee=l.length,de;H<ee;H++)de=g?wh(l[H],g-1,S):(S||jg)(l[H]),D.push(de);return D}function _g(l,g){return l=B(l),l.alt!==void 0?[u(l.lng,g),u(l.lat,g),u(l.alt,g)]:[u(l.lng,g),u(l.lat,g)]}function jh(l,g,S,D){for(var H=[],ee=0,de=l.length;ee<de;ee++)H.push(g?jh(l[ee],er(l[ee])?0:g-1,S,D):_g(l[ee],D));return!g&&S&&H.length>0&&H.push(H[0].slice()),H}function dl(l,g){return l.feature?i({},l.feature,{geometry:g}):_h(g)}function _h(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Ng={toGeoJSON:function(l){return dl(this,{type:"Point",coordinates:_g(this.getLatLng(),l)})}};xh.include(Ng),wg.include(Ng),yh.include(Ng),Ti.include({toGeoJSON:function(l){var g=!er(this._latlngs),S=jh(this._latlngs,g?1:0,!1,l);return dl(this,{type:(g?"Multi":"")+"LineString",coordinates:S})}}),cl.include({toGeoJSON:function(l){var g=!er(this._latlngs),S=g&&!er(this._latlngs[0]),D=jh(this._latlngs,S?2:g?1:0,!0,l);return g||(D=[D]),dl(this,{type:(S?"Multi":"")+"Polygon",coordinates:D})}}),ol.include({toMultiPoint:function(l){var g=[];return this.eachLayer(function(S){g.push(S.toGeoJSON(l).geometry.coordinates)}),dl(this,{type:"MultiPoint",coordinates:g})},toGeoJSON:function(l){var g=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(g==="MultiPoint")return this.toMultiPoint(l);var S=g==="GeometryCollection",D=[];return this.eachLayer(function(H){if(H.toGeoJSON){var ee=H.toGeoJSON(l);if(S)D.push(ee.geometry);else{var de=_h(ee);de.type==="FeatureCollection"?D.push.apply(D,de.features):D.push(de)}}}),S?dl(this,{geometries:D,type:"GeometryCollection"}):{type:"FeatureCollection",features:D}}});function Ej(l,g){return new Ai(l,g)}var D5=Ej,Nh=br.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,g,S){this._url=l,this._bounds=W(g),v(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(yt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){an(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&il(this._image),this},bringToBack:function(){return this._map&&al(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=W(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",g=this._image=l?this._url:Rt("img");if(yt(g,"leaflet-image-layer"),this._zoomAnimated&&yt(g,"leaflet-zoom-animated"),this.options.className&&yt(g,this.options.className),g.onselectstart=h,g.onmousemove=h,g.onload=o(this.fire,this,"load"),g.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=g.src;return}g.src=this._url,g.alt=this.options.alt},_animateZoom:function(l){var g=this._map.getZoomScale(l.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;ao(this._image,S,g)},_reset:function(){var l=this._image,g=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=g.getSize();En(l,g.min),l.style.width=S.x+"px",l.style.height=S.y+"px"},_updateOpacity:function(){Js(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),F5=function(l,g,S){return new Nh(l,g,S)},Tj=Nh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",g=this._image=l?this._url:Rt("video");if(yt(g,"leaflet-image-layer"),this._zoomAnimated&&yt(g,"leaflet-zoom-animated"),this.options.className&&yt(g,this.options.className),g.onselectstart=h,g.onmousemove=h,g.onloadeddata=o(this.fire,this,"load"),l){for(var S=g.getElementsByTagName("source"),D=[],H=0;H<S.length;H++)D.push(S[H].src);this._url=S.length>0?D:[g.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(g.style,"objectFit")&&(g.style.objectFit="fill"),g.autoplay=!!this.options.autoplay,g.loop=!!this.options.loop,g.muted=!!this.options.muted,g.playsInline=!!this.options.playsInline;for(var ee=0;ee<this._url.length;ee++){var de=Rt("source");de.src=this._url[ee],g.appendChild(de)}}});function $5(l,g,S){return new Tj(l,g,S)}var Aj=Nh.extend({_initImage:function(){var l=this._image=this._url;yt(l,"leaflet-image-layer"),this._zoomAnimated&&yt(l,"leaflet-zoom-animated"),this.options.className&&yt(l,this.options.className),l.onselectstart=h,l.onmousemove=h}});function z5(l,g,S){return new Aj(l,g,S)}var Xr=br.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,g){l&&(l instanceof K||_(l))?(this._latlng=B(l),v(this,g)):(v(this,l),this._source=g),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Js(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Js(this._container,1),this.bringToFront(),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Js(this._container,0),this._removeTimeout=setTimeout(o(an,void 0,this._container),200)):an(this._container),this.options.interactive&&(yn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=B(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&il(this._container),this},bringToBack:function(){return this._map&&al(this._container),this},_prepareOpen:function(l){var g=this._source;if(!g._map)return!1;if(g instanceof Ei){g=null;var S=this._source._layers;for(var D in S)if(S[D]._map){g=S[D];break}if(!g)return!1;this._source=g}if(!l)if(g.getCenter)l=g.getCenter();else if(g.getLatLng)l=g.getLatLng();else if(g.getBounds)l=g.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,g=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof g=="string")l.innerHTML=g;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(g)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),g=V(this.options.offset),S=this._getAnchor();this._zoomAnimated?En(this._container,l.add(S)):g=g.add(l).add(S);var D=this._containerBottom=-g.y,H=this._containerLeft=-Math.round(this._containerWidth/2)+g.x;this._container.style.bottom=D+"px",this._container.style.left=H+"px"}},_getAnchor:function(){return[0,0]}});Tt.include({_initOverlay:function(l,g,S,D){var H=g;return H instanceof l||(H=new l(D).setContent(g)),S&&H.setLatLng(S),H}}),br.include({_initOverlay:function(l,g,S,D){var H=S;return H instanceof l?(v(H,D),H._source=this):(H=g&&!D?g:new l(D,this),H.setContent(S)),H}});var Sh=Xr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Xr.prototype.openOn.call(this,l)},onAdd:function(l){Xr.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ca||this._source.on("preclick",lo))},onRemove:function(l){Xr.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ca||this._source.off("preclick",lo))},getEvents:function(){var l=Xr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",g=this._container=Rt("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=Rt("div",l+"-content-wrapper",g);if(this._contentNode=Rt("div",l+"-content",S),ad(g),fg(this._contentNode),pt(g,"contextmenu",lo),this._tipContainer=Rt("div",l+"-tip-container",g),this._tip=Rt("div",l+"-tip",this._tipContainer),this.options.closeButton){var D=this._closeButton=Rt("a",l+"-close-button",g);D.setAttribute("role","button"),D.setAttribute("aria-label","Close popup"),D.href="#close",D.innerHTML='<span aria-hidden="true">&#215;</span>',pt(D,"click",function(H){Hn(H),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,g=l.style;g.width="",g.whiteSpace="nowrap";var S=l.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),g.width=S+1+"px",g.whiteSpace="",g.height="";var D=l.offsetHeight,H=this.options.maxHeight,ee="leaflet-popup-scrolled";H&&D>H?(g.height=H+"px",yt(l,ee)):yn(l,ee),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var g=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),S=this._getAnchor();En(this._container,g.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,g=parseInt(nd(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+g,D=this._containerWidth,H=new Y(this._containerLeft,-S-this._containerBottom);H._add(oo(this._container));var ee=l.layerPointToContainerPoint(H),de=V(this.options.autoPanPadding),ge=V(this.options.autoPanPaddingTopLeft||de),ye=V(this.options.autoPanPaddingBottomRight||de),Ee=l.getSize(),Ue=0,ot=0;ee.x+D+ye.x>Ee.x&&(Ue=ee.x+D-Ee.x+ye.x),ee.x-Ue-ge.x<0&&(Ue=ee.x-ge.x),ee.y+S+ye.y>Ee.y&&(ot=ee.y+S-Ee.y+ye.y),ee.y-ot-ge.y<0&&(ot=ee.y-ge.y),(Ue||ot)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Ue,ot]))}},_getAnchor:function(){return V(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),B5=function(l,g){return new Sh(l,g)};Tt.mergeOptions({closePopupOnClick:!0}),Tt.include({openPopup:function(l,g,S){return this._initOverlay(Sh,l,g,S).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),br.include({bindPopup:function(l,g){return this._popup=this._initOverlay(Sh,this._popup,l,g),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Ei||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){co(l);var g=l.layer||l.target;if(this._popup._source===g&&!(g instanceof ca)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=g,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var kh=Xr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Xr.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Xr.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Xr.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",g=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Rt("div",g),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var g,S,D=this._map,H=this._container,ee=D.latLngToContainerPoint(D.getCenter()),de=D.layerPointToContainerPoint(l),ge=this.options.direction,ye=H.offsetWidth,Ee=H.offsetHeight,Ue=V(this.options.offset),ot=this._getAnchor();ge==="top"?(g=ye/2,S=Ee):ge==="bottom"?(g=ye/2,S=0):ge==="center"?(g=ye/2,S=Ee/2):ge==="right"?(g=0,S=Ee/2):ge==="left"?(g=ye,S=Ee/2):de.x<ee.x?(ge="right",g=0,S=Ee/2):(ge="left",g=ye+(Ue.x+ot.x)*2,S=Ee/2),l=l.subtract(V(g,S,!0)).add(Ue).add(ot),yn(H,"leaflet-tooltip-right"),yn(H,"leaflet-tooltip-left"),yn(H,"leaflet-tooltip-top"),yn(H,"leaflet-tooltip-bottom"),yt(H,"leaflet-tooltip-"+ge),En(H,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Js(this._container,l)},_animateZoom:function(l){var g=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(g)},_getAnchor:function(){return V(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),V5=function(l,g){return new kh(l,g)};Tt.include({openTooltip:function(l,g,S){return this._initOverlay(kh,l,g,S).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),br.include({bindTooltip:function(l,g){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(kh,this._tooltip,l,g),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var g=l?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[g](S),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Ei||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var g=typeof l.getElement=="function"&&l.getElement();g&&(pt(g,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),pt(g,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var g=typeof l.getElement=="function"&&l.getElement();g&&g.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var g=this;this._map.once("moveend",function(){g._openOnceFlag=!1,g._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var g=l.latlng,S,D;this._tooltip.options.sticky&&l.originalEvent&&(S=this._map.mouseEventToContainerPoint(l.originalEvent),D=this._map.containerPointToLayerPoint(S),g=this._map.layerPointToLatLng(D)),this._tooltip.setLatLng(g)}});var Oj=ll.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var g=l&&l.tagName==="DIV"?l:document.createElement("div"),S=this.options;if(S.html instanceof Element?(hh(g),g.appendChild(S.html)):g.innerHTML=S.html!==!1?S.html:"",S.bgPos){var D=V(S.bgPos);g.style.backgroundPosition=-D.x+"px "+-D.y+"px"}return this._setIconStyles(g,"icon"),g},createShadow:function(){return null}});function U5(l){return new Oj(l)}ll.Default=cd;var dd=br.extend({options:{tileSize:256,opacity:1,updateWhenIdle:st.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){v(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),an(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(il(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(al(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof Y?l:new Y(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var g=this.getPane().children,S=-l(-1/0,1/0),D=0,H=g.length,ee;D<H;D++)ee=g[D].style.zIndex,g[D]!==this._container&&ee&&(S=l(S,+ee));isFinite(S)&&(this.options.zIndex=S+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!st.ielt9){Js(this._container,this.options.opacity);var l=+new Date,g=!1,S=!1;for(var D in this._tiles){var H=this._tiles[D];if(!(!H.current||!H.loaded)){var ee=Math.min(1,(l-H.loaded)/200);Js(H.el,ee),ee<1?g=!0:(H.active?S=!0:this._onOpaqueTile(H),H.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),g&&(A(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=Rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,g=this.options.maxZoom;if(l!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===l?(this._levels[S].el.style.zIndex=g-Math.abs(l-S),this._onUpdateLevel(S)):(an(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var D=this._levels[l],H=this._map;return D||(D=this._levels[l]={},D.el=Rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),D.el.style.zIndex=g,D.origin=H.project(H.unproject(H.getPixelOrigin()),l).round(),D.zoom=l,this._setZoomTransform(D,H.getCenter(),H.getZoom()),h(D.el.offsetWidth),this._onCreateLevel(D)),this._level=D,D}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var l,g,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)g=this._tiles[l],g.retain=g.current;for(l in this._tiles)if(g=this._tiles[l],g.current&&!g.active){var D=g.coords;this._retainParent(D.x,D.y,D.z,D.z-5)||this._retainChildren(D.x,D.y,D.z,D.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var g in this._tiles)this._tiles[g].coords.z===l&&this._removeTile(g)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)an(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,g,S,D){var H=Math.floor(l/2),ee=Math.floor(g/2),de=S-1,ge=new Y(+H,+ee);ge.z=+de;var ye=this._tileCoordsToKey(ge),Ee=this._tiles[ye];return Ee&&Ee.active?(Ee.retain=!0,!0):(Ee&&Ee.loaded&&(Ee.retain=!0),de>D?this._retainParent(H,ee,de,D):!1)},_retainChildren:function(l,g,S,D){for(var H=2*l;H<2*l+2;H++)for(var ee=2*g;ee<2*g+2;ee++){var de=new Y(H,ee);de.z=S+1;var ge=this._tileCoordsToKey(de),ye=this._tiles[ge];if(ye&&ye.active){ye.retain=!0;continue}else ye&&ye.loaded&&(ye.retain=!0);S+1<D&&this._retainChildren(H,ee,S+1,D)}},_resetView:function(l){var g=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),g,g)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var g=this.options;return g.minNativeZoom!==void 0&&l<g.minNativeZoom?g.minNativeZoom:g.maxNativeZoom!==void 0&&g.maxNativeZoom<l?g.maxNativeZoom:l},_setView:function(l,g,S,D){var H=Math.round(g);this.options.maxZoom!==void 0&&H>this.options.maxZoom||this.options.minZoom!==void 0&&H<this.options.minZoom?H=void 0:H=this._clampZoom(H);var ee=this.options.updateWhenZooming&&H!==this._tileZoom;(!D||ee)&&(this._tileZoom=H,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),H!==void 0&&this._update(l),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(l,g)},_setZoomTransforms:function(l,g){for(var S in this._levels)this._setZoomTransform(this._levels[S],l,g)},_setZoomTransform:function(l,g,S){var D=this._map.getZoomScale(S,l.zoom),H=l.origin.multiplyBy(D).subtract(this._map._getNewPixelOrigin(g,S)).round();st.any3d?ao(l.el,H,D):En(l.el,H)},_resetGrid:function(){var l=this._map,g=l.options.crs,S=this._tileSize=this.getTileSize(),D=this._tileZoom,H=this._map.getPixelWorldBounds(this._tileZoom);H&&(this._globalTileRange=this._pxBoundsToTileRange(H)),this._wrapX=g.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,g.wrapLng[0]],D).x/S.x),Math.ceil(l.project([0,g.wrapLng[1]],D).x/S.y)],this._wrapY=g.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([g.wrapLat[0],0],D).y/S.x),Math.ceil(l.project([g.wrapLat[1],0],D).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var g=this._map,S=g._animatingZoom?Math.max(g._animateToZoom,g.getZoom()):g.getZoom(),D=g.getZoomScale(S,this._tileZoom),H=g.project(l,this._tileZoom).floor(),ee=g.getSize().divideBy(D*2);return new R(H.subtract(ee),H.add(ee))},_update:function(l){var g=this._map;if(g){var S=this._clampZoom(g.getZoom());if(l===void 0&&(l=g.getCenter()),this._tileZoom!==void 0){var D=this._getTiledPixelBounds(l),H=this._pxBoundsToTileRange(D),ee=H.getCenter(),de=[],ge=this.options.keepBuffer,ye=new R(H.getBottomLeft().subtract([ge,-ge]),H.getTopRight().add([ge,-ge]));if(!(isFinite(H.min.x)&&isFinite(H.min.y)&&isFinite(H.max.x)&&isFinite(H.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ee in this._tiles){var Ue=this._tiles[Ee].coords;(Ue.z!==this._tileZoom||!ye.contains(new Y(Ue.x,Ue.y)))&&(this._tiles[Ee].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(l,S);return}for(var ot=H.min.y;ot<=H.max.y;ot++)for(var Nt=H.min.x;Nt<=H.max.x;Nt++){var us=new Y(Nt,ot);if(us.z=this._tileZoom,!!this._isValidTile(us)){var $n=this._tiles[this._tileCoordsToKey(us)];$n?$n.current=!0:de.push(us)}}if(de.sort(function(Cs,hl){return Cs.distanceTo(ee)-hl.distanceTo(ee)}),de.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var tr=document.createDocumentFragment();for(Nt=0;Nt<de.length;Nt++)this._addTile(de[Nt],tr);this._level.el.appendChild(tr)}}}},_isValidTile:function(l){var g=this._map.options.crs;if(!g.infinite){var S=this._globalTileRange;if(!g.wrapLng&&(l.x<S.min.x||l.x>S.max.x)||!g.wrapLat&&(l.y<S.min.y||l.y>S.max.y))return!1}if(!this.options.bounds)return!0;var D=this._tileCoordsToBounds(l);return W(this.options.bounds).overlaps(D)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var g=this._map,S=this.getTileSize(),D=l.scaleBy(S),H=D.add(S),ee=g.unproject(D,l.z),de=g.unproject(H,l.z);return[ee,de]},_tileCoordsToBounds:function(l){var g=this._tileCoordsToNwSe(l),S=new q(g[0],g[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var g=l.split(":"),S=new Y(+g[0],+g[1]);return S.z=+g[2],S},_removeTile:function(l){var g=this._tiles[l];g&&(an(g.el),delete this._tiles[l],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){yt(l,"leaflet-tile");var g=this.getTileSize();l.style.width=g.x+"px",l.style.height=g.y+"px",l.onselectstart=h,l.onmousemove=h,st.ielt9&&this.options.opacity<1&&Js(l,this.options.opacity)},_addTile:function(l,g){var S=this._getTilePos(l),D=this._tileCoordsToKey(l),H=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(H),this.createTile.length<2&&E(o(this._tileReady,this,l,null,H)),En(H,S),this._tiles[D]={el:H,coords:l,current:!0},g.appendChild(H),this.fire("tileloadstart",{tile:H,coords:l})},_tileReady:function(l,g,S){g&&this.fire("tileerror",{error:g,tile:S,coords:l});var D=this._tileCoordsToKey(l);S=this._tiles[D],S&&(S.loaded=+new Date,this._map._fadeAnimated?(Js(S.el,0),A(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),g||(yt(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),st.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var g=new Y(this._wrapX?m(l.x,this._wrapX):l.x,this._wrapY?m(l.y,this._wrapY):l.y);return g.z=l.z,g},_pxBoundsToTileRange:function(l){var g=this.getTileSize();return new R(l.min.unscaleBy(g).floor(),l.max.unscaleBy(g).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function q5(l){return new dd(l)}var ul=dd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,g){this._url=l,g=v(this,g),g.detectRetina&&st.retina&&g.maxZoom>0?(g.tileSize=Math.floor(g.tileSize/2),g.zoomReverse?(g.zoomOffset--,g.minZoom=Math.min(g.maxZoom,g.minZoom+1)):(g.zoomOffset++,g.maxZoom=Math.max(g.minZoom,g.maxZoom-1)),g.minZoom=Math.max(0,g.minZoom)):g.zoomReverse?g.minZoom=Math.min(g.maxZoom,g.minZoom):g.maxZoom=Math.max(g.minZoom,g.maxZoom),typeof g.subdomains=="string"&&(g.subdomains=g.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,g){return this._url===l&&g===void 0&&(g=!0),this._url=l,g||this.redraw(),this},createTile:function(l,g){var S=document.createElement("img");return pt(S,"load",o(this._tileOnLoad,this,g,S)),pt(S,"error",o(this._tileOnError,this,g,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(l),S},getTileUrl:function(l){var g={r:st.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-l.y;this.options.tms&&(g.y=S),g["-y"]=S}return b(this._url,i(g,this.options))},_tileOnLoad:function(l,g){st.ielt9?setTimeout(o(l,this,null,g),0):l(null,g)},_tileOnError:function(l,g,S){var D=this.options.errorTileUrl;D&&g.getAttribute("src")!==D&&(g.src=D),l(S,g)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,g=this.options.maxZoom,S=this.options.zoomReverse,D=this.options.zoomOffset;return S&&(l=g-l),l+D},_getSubdomain:function(l){var g=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[g]},_abortLoading:function(){var l,g;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(g=this._tiles[l].el,g.onload=h,g.onerror=h,!g.complete)){g.src=k;var S=this._tiles[l].coords;an(g),delete this._tiles[l],this.fire("tileabort",{tile:g,coords:S})}},_removeTile:function(l){var g=this._tiles[l];if(g)return g.el.setAttribute("src",k),dd.prototype._removeTile.call(this,l)},_tileReady:function(l,g,S){if(!(!this._map||S&&S.getAttribute("src")===k))return dd.prototype._tileReady.call(this,l,g,S)}});function Rj(l,g){return new ul(l,g)}var Lj=ul.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,g){this._url=l;var S=i({},this.defaultWmsParams);for(var D in g)D in this.options||(S[D]=g[D]);g=v(this,g);var H=g.detectRetina&&st.retina?2:1,ee=this.getTileSize();S.width=ee.x*H,S.height=ee.y*H,this.wmsParams=S},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var g=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[g]=this._crs.code,ul.prototype.onAdd.call(this,l)},getTileUrl:function(l){var g=this._tileCoordsToNwSe(l),S=this._crs,D=F(S.project(g[0]),S.project(g[1])),H=D.min,ee=D.max,de=(this._wmsVersion>=1.3&&this._crs===kj?[H.y,H.x,ee.y,ee.x]:[H.x,H.y,ee.x,ee.y]).join(","),ge=ul.prototype.getTileUrl.call(this,l);return ge+w(this.wmsParams,ge,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+de},setParams:function(l,g){return i(this.wmsParams,l),g||this.redraw(),this}});function H5(l,g){return new Lj(l,g)}ul.WMS=Lj,Rj.wms=H5;var Oi=br.extend({options:{padding:.1},initialize:function(l){v(this,l),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),yt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,g){var S=this._map.getZoomScale(g,this._zoom),D=this._map.getSize().multiplyBy(.5+this.options.padding),H=this._map.project(this._center,g),ee=D.multiplyBy(-S).add(H).subtract(this._map._getNewPixelOrigin(l,g));st.any3d?ao(this._container,ee,S):En(this._container,ee)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,g=this._map.getSize(),S=this._map.containerPointToLayerPoint(g.multiplyBy(-l)).round();this._bounds=new R(S,S.add(g.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Mj=Oi.extend({options:{tolerance:0},getEvents:function(){var l=Oi.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Oi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");pt(l,"mousemove",this._onMouseMove,this),pt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),pt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,an(this._container),Ht(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var g in this._layers)l=this._layers[g],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var l=this._bounds,g=this._container,S=l.getSize(),D=st.retina?2:1;En(g,l.min),g.width=D*S.x,g.height=D*S.y,g.style.width=S.x+"px",g.style.height=S.y+"px",st.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Oi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[d(l)]=l;var g=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=g),this._drawLast=g,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var g=l._order,S=g.next,D=g.prev;S?S.prev=D:this._drawLast=D,D?D.next=S:this._drawFirst=S,delete l._order,delete this._layers[d(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var g=l.options.dashArray.split(/[, ]+/),S=[],D,H;for(H=0;H<g.length;H++){if(D=Number(g[H]),isNaN(D))return;S.push(D)}l.options._dashArray=S}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var g=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(l._pxBounds.min.subtract([g,g])),this._redrawBounds.extend(l._pxBounds.max.add([g,g]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var g=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,g.x,g.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,g=this._redrawBounds;if(this._ctx.save(),g){var S=g.getSize();this._ctx.beginPath(),this._ctx.rect(g.min.x,g.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var D=this._drawFirst;D;D=D.next)l=D.layer,(!g||l._pxBounds&&l._pxBounds.intersects(g))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,g){if(this._drawing){var S,D,H,ee,de=l._parts,ge=de.length,ye=this._ctx;if(ge){for(ye.beginPath(),S=0;S<ge;S++){for(D=0,H=de[S].length;D<H;D++)ee=de[S][D],ye[D?"lineTo":"moveTo"](ee.x,ee.y);g&&ye.closePath()}this._fillStroke(ye,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var g=l._point,S=this._ctx,D=Math.max(Math.round(l._radius),1),H=(Math.max(Math.round(l._radiusY),1)||D)/D;H!==1&&(S.save(),S.scale(1,H)),S.beginPath(),S.arc(g.x,g.y/H,D,0,Math.PI*2,!1),H!==1&&S.restore(),this._fillStroke(S,l)}},_fillStroke:function(l,g){var S=g.options;S.fill&&(l.globalAlpha=S.fillOpacity,l.fillStyle=S.fillColor||S.color,l.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(l.setLineDash&&l.setLineDash(g.options&&g.options._dashArray||[]),l.globalAlpha=S.opacity,l.lineWidth=S.weight,l.strokeStyle=S.color,l.lineCap=S.lineCap,l.lineJoin=S.lineJoin,l.stroke())},_onClick:function(l){for(var g=this._map.mouseEventToLayerPoint(l),S,D,H=this._drawFirst;H;H=H.next)S=H.layer,S.options.interactive&&S._containsPoint(g)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(S))&&(D=S);this._fireEvent(D?[D]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var g=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,g)}},_handleMouseOut:function(l){var g=this._hoveredLayer;g&&(yn(this._container,"leaflet-interactive"),this._fireEvent([g],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,g){if(!this._mouseHoverThrottled){for(var S,D,H=this._drawFirst;H;H=H.next)S=H.layer,S.options.interactive&&S._containsPoint(g)&&(D=S);D!==this._hoveredLayer&&(this._handleMouseOut(l),D&&(yt(this._container,"leaflet-interactive"),this._fireEvent([D],l,"mouseover"),this._hoveredLayer=D)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,g,S){this._map._fireDOMEvent(g,S||g.type,l)},_bringToFront:function(l){var g=l._order;if(g){var S=g.next,D=g.prev;if(S)S.prev=D;else return;D?D.next=S:S&&(this._drawFirst=S),g.prev=this._drawLast,this._drawLast.next=g,g.next=null,this._drawLast=g,this._requestRedraw(l)}},_bringToBack:function(l){var g=l._order;if(g){var S=g.next,D=g.prev;if(D)D.next=S;else return;S?S.prev=D:D&&(this._drawLast=D),g.prev=null,g.next=this._drawFirst,this._drawFirst.prev=g,this._drawFirst=g,this._requestRedraw(l)}}});function Ij(l){return st.canvas?new Mj(l):null}var ud=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),W5={_initContainer:function(){this._container=Rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Oi.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var g=l._container=ud("shape");yt(g,"leaflet-vml-shape "+(this.options.className||"")),g.coordsize="1 1",l._path=ud("path"),g.appendChild(l._path),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){var g=l._container;this._container.appendChild(g),l.options.interactive&&l.addInteractiveTarget(g)},_removePath:function(l){var g=l._container;an(g),l.removeInteractiveTarget(g),delete this._layers[d(l)]},_updateStyle:function(l){var g=l._stroke,S=l._fill,D=l.options,H=l._container;H.stroked=!!D.stroke,H.filled=!!D.fill,D.stroke?(g||(g=l._stroke=ud("stroke")),H.appendChild(g),g.weight=D.weight+"px",g.color=D.color,g.opacity=D.opacity,D.dashArray?g.dashStyle=_(D.dashArray)?D.dashArray.join(" "):D.dashArray.replace(/( *, *)/g," "):g.dashStyle="",g.endcap=D.lineCap.replace("butt","flat"),g.joinstyle=D.lineJoin):g&&(H.removeChild(g),l._stroke=null),D.fill?(S||(S=l._fill=ud("fill")),H.appendChild(S),S.color=D.fillColor||D.color,S.opacity=D.fillOpacity):S&&(H.removeChild(S),l._fill=null)},_updateCircle:function(l){var g=l._point.round(),S=Math.round(l._radius),D=Math.round(l._radiusY||S);this._setPath(l,l._empty()?"M0 0":"AL "+g.x+","+g.y+" "+S+","+D+" 0,"+65535*360)},_setPath:function(l,g){l._path.v=g},_bringToFront:function(l){il(l._container)},_bringToBack:function(l){al(l._container)}},Ch=st.vml?ud:me,hd=Oi.extend({_initContainer:function(){this._container=Ch("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ch("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){an(this._container),Ht(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var l=this._bounds,g=l.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(g))&&(this._svgSize=g,S.setAttribute("width",g.x),S.setAttribute("height",g.y)),En(S,l.min),S.setAttribute("viewBox",[l.min.x,l.min.y,g.x,g.y].join(" ")),this.fire("update")}},_initPath:function(l){var g=l._path=Ch("path");l.options.className&&yt(g,l.options.className),l.options.interactive&&yt(g,"leaflet-interactive"),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){an(l._path),l.removeInteractiveTarget(l._path),delete this._layers[d(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var g=l._path,S=l.options;g&&(S.stroke?(g.setAttribute("stroke",S.color),g.setAttribute("stroke-opacity",S.opacity),g.setAttribute("stroke-width",S.weight),g.setAttribute("stroke-linecap",S.lineCap),g.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?g.setAttribute("stroke-dasharray",S.dashArray):g.removeAttribute("stroke-dasharray"),S.dashOffset?g.setAttribute("stroke-dashoffset",S.dashOffset):g.removeAttribute("stroke-dashoffset")):g.setAttribute("stroke","none"),S.fill?(g.setAttribute("fill",S.fillColor||S.color),g.setAttribute("fill-opacity",S.fillOpacity),g.setAttribute("fill-rule",S.fillRule||"evenodd")):g.setAttribute("fill","none"))},_updatePoly:function(l,g){this._setPath(l,Se(l._parts,g))},_updateCircle:function(l){var g=l._point,S=Math.max(Math.round(l._radius),1),D=Math.max(Math.round(l._radiusY),1)||S,H="a"+S+","+D+" 0 1,0 ",ee=l._empty()?"M0 0":"M"+(g.x-S)+","+g.y+H+S*2+",0 "+H+-S*2+",0 ";this._setPath(l,ee)},_setPath:function(l,g){l._path.setAttribute("d",g)},_bringToFront:function(l){il(l._path)},_bringToBack:function(l){al(l._path)}});st.vml&&hd.include(W5);function Dj(l){return st.svg||st.vml?new hd(l):null}Tt.include({getRenderer:function(l){var g=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return g||(g=this._renderer=this._createRenderer()),this.hasLayer(g)||this.addLayer(g),g},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var g=this._paneRenderers[l];return g===void 0&&(g=this._createRenderer({pane:l}),this._paneRenderers[l]=g),g},_createRenderer:function(l){return this.options.preferCanvas&&Ij(l)||Dj(l)}});var Fj=cl.extend({initialize:function(l,g){cl.prototype.initialize.call(this,this._boundsToLatLngs(l),g)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=W(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function Z5(l,g){return new Fj(l,g)}hd.create=Ch,hd.pointsToPath=Se,Ai.geometryToLayer=bh,Ai.coordsToLatLng=jg,Ai.coordsToLatLngs=wh,Ai.latLngToCoords=_g,Ai.latLngsToCoords=jh,Ai.getFeature=dl,Ai.asFeature=_h,Tt.mergeOptions({boxZoom:!0});var $j=Yr.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){pt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ht(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){an(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),sd(),ig(),this._startPoint=this._map.mouseEventToContainerPoint(l),pt(document,{contextmenu:co,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Rt("div","leaflet-zoom-box",this._container),yt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var g=new R(this._point,this._startPoint),S=g.getSize();En(this._box,g.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(an(this._box),yn(this._container,"leaflet-crosshair")),rd(),ag(),Ht(document,{contextmenu:co,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var g=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(g).fire("boxzoomend",{boxZoomBounds:g})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Tt.addInitHook("addHandler","boxZoom",$j),Tt.mergeOptions({doubleClickZoom:!0});var zj=Yr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var g=this._map,S=g.getZoom(),D=g.options.zoomDelta,H=l.originalEvent.shiftKey?S-D:S+D;g.options.doubleClickZoom==="center"?g.setZoom(H):g.setZoomAround(l.containerPoint,H)}});Tt.addInitHook("addHandler","doubleClickZoom",zj),Tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Bj=Yr.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new la(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}yt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yn(this._map._container,"leaflet-grab"),yn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var g=W(this._map.options.maxBounds);this._offsetLimit=F(this._map.latLngToContainerPoint(g.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(g.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var g=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(g),this._prunePositions(g)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),g=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=g.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,g){return l-(l-g)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),g=this._offsetLimit;l.x<g.min.x&&(l.x=this._viscousLimit(l.x,g.min.x)),l.y<g.min.y&&(l.y=this._viscousLimit(l.y,g.min.y)),l.x>g.max.x&&(l.x=this._viscousLimit(l.x,g.max.x)),l.y>g.max.y&&(l.y=this._viscousLimit(l.y,g.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,g=Math.round(l/2),S=this._initialWorldOffset,D=this._draggable._newPos.x,H=(D-g+S)%l+g-S,ee=(D+g+S)%l-g-S,de=Math.abs(H+S)<Math.abs(ee+S)?H:ee;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=de},_onDragEnd:function(l){var g=this._map,S=g.options,D=!S.inertia||l.noInertia||this._times.length<2;if(g.fire("dragend",l),D)g.fire("moveend");else{this._prunePositions(+new Date);var H=this._lastPos.subtract(this._positions[0]),ee=(this._lastTime-this._times[0])/1e3,de=S.easeLinearity,ge=H.multiplyBy(de/ee),ye=ge.distanceTo([0,0]),Ee=Math.min(S.inertiaMaxSpeed,ye),Ue=ge.multiplyBy(Ee/ye),ot=Ee/(S.inertiaDeceleration*de),Nt=Ue.multiplyBy(-ot/2).round();!Nt.x&&!Nt.y?g.fire("moveend"):(Nt=g._limitOffset(Nt,g.options.maxBounds),E(function(){g.panBy(Nt,{duration:ot,easeLinearity:de,noMoveStart:!0,animate:!0})}))}}});Tt.addInitHook("addHandler","dragging",Bj),Tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Vj=Yr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),pt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ht(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,g=document.documentElement,S=l.scrollTop||g.scrollTop,D=l.scrollLeft||g.scrollLeft;this._map._container.focus(),window.scrollTo(D,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var g=this._panKeys={},S=this.keyCodes,D,H;for(D=0,H=S.left.length;D<H;D++)g[S.left[D]]=[-1*l,0];for(D=0,H=S.right.length;D<H;D++)g[S.right[D]]=[l,0];for(D=0,H=S.down.length;D<H;D++)g[S.down[D]]=[0,l];for(D=0,H=S.up.length;D<H;D++)g[S.up[D]]=[0,-1*l]},_setZoomDelta:function(l){var g=this._zoomKeys={},S=this.keyCodes,D,H;for(D=0,H=S.zoomIn.length;D<H;D++)g[S.zoomIn[D]]=l;for(D=0,H=S.zoomOut.length;D<H;D++)g[S.zoomOut[D]]=-l},_addHooks:function(){pt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ht(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var g=l.keyCode,S=this._map,D;if(g in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(D=this._panKeys[g],l.shiftKey&&(D=V(D).multiplyBy(3)),S.options.maxBounds&&(D=S._limitOffset(V(D),S.options.maxBounds)),S.options.worldCopyJump){var H=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(D)));S.panTo(H)}else S.panBy(D)}else if(g in this._zoomKeys)S.setZoom(S.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[g]);else if(g===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;co(l)}}});Tt.addInitHook("addHandler","keyboard",Vj),Tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Uj=Yr.extend({addHooks:function(){pt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ht(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var g=fj(l),S=this._map.options.wheelDebounceTime;this._delta+=g,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var D=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),D),co(l)},_performZoom:function(){var l=this._map,g=l.getZoom(),S=this._map.options.zoomSnap||0;l._stop();var D=this._delta/(this._map.options.wheelPxPerZoomLevel*4),H=4*Math.log(2/(1+Math.exp(-Math.abs(D))))/Math.LN2,ee=S?Math.ceil(H/S)*S:H,de=l._limitZoom(g+(this._delta>0?ee:-ee))-g;this._delta=0,this._startTime=null,de&&(l.options.scrollWheelZoom==="center"?l.setZoom(g+de):l.setZoomAround(this._lastMousePos,g+de))}});Tt.addInitHook("addHandler","scrollWheelZoom",Uj);var G5=600;Tt.mergeOptions({tapHold:st.touchNative&&st.safari&&st.mobile,tapTolerance:15});var qj=Yr.extend({addHooks:function(){pt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ht(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var g=l.touches[0];this._startPos=this._newPos=new Y(g.clientX,g.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(pt(document,"touchend",Hn),pt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",g))},this),G5),pt(document,"touchend touchcancel contextmenu",this._cancel,this),pt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Ht(document,"touchend",Hn),Ht(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Ht(document,"touchend touchcancel contextmenu",this._cancel,this),Ht(document,"touchmove",this._onMove,this)},_onMove:function(l){var g=l.touches[0];this._newPos=new Y(g.clientX,g.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,g){var S=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY});S._simulated=!0,g.target.dispatchEvent(S)}});Tt.addInitHook("addHandler","tapHold",qj),Tt.mergeOptions({touchZoom:st.touch,bounceAtZoomLimits:!0});var Hj=Yr.extend({addHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),pt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yn(this._map._container,"leaflet-touch-zoom"),Ht(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var g=this._map;if(!(!l.touches||l.touches.length!==2||g._animatingZoom||this._zooming)){var S=g.mouseEventToContainerPoint(l.touches[0]),D=g.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=g.getSize()._divideBy(2),this._startLatLng=g.containerPointToLatLng(this._centerPoint),g.options.touchZoom!=="center"&&(this._pinchStartLatLng=g.containerPointToLatLng(S.add(D)._divideBy(2))),this._startDist=S.distanceTo(D),this._startZoom=g.getZoom(),this._moved=!1,this._zooming=!0,g._stop(),pt(document,"touchmove",this._onTouchMove,this),pt(document,"touchend touchcancel",this._onTouchEnd,this),Hn(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var g=this._map,S=g.mouseEventToContainerPoint(l.touches[0]),D=g.mouseEventToContainerPoint(l.touches[1]),H=S.distanceTo(D)/this._startDist;if(this._zoom=g.getScaleZoom(H,this._startZoom),!g.options.bounceAtZoomLimits&&(this._zoom<g.getMinZoom()&&H<1||this._zoom>g.getMaxZoom()&&H>1)&&(this._zoom=g._limitZoom(this._zoom)),g.options.touchZoom==="center"){if(this._center=this._startLatLng,H===1)return}else{var ee=S._add(D)._divideBy(2)._subtract(this._centerPoint);if(H===1&&ee.x===0&&ee.y===0)return;this._center=g.unproject(g.project(this._pinchStartLatLng,this._zoom).subtract(ee),this._zoom)}this._moved||(g._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var de=o(g._move,g,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(de,this,!0),Hn(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),Ht(document,"touchmove",this._onTouchMove,this),Ht(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Tt.addInitHook("addHandler","touchZoom",Hj),Tt.BoxZoom=$j,Tt.DoubleClickZoom=zj,Tt.Drag=Bj,Tt.Keyboard=Vj,Tt.ScrollWheelZoom=Uj,Tt.TapHold=qj,Tt.TouchZoom=Hj,s.Bounds=R,s.Browser=st,s.CRS=Z,s.Canvas=Mj,s.Circle=wg,s.CircleMarker=yh,s.Class=O,s.Control=yr,s.DivIcon=Oj,s.DivOverlay=Xr,s.DomEvent=h5,s.DomUtil=d5,s.Draggable=la,s.Evented=X,s.FeatureGroup=Ei,s.GeoJSON=Ai,s.GridLayer=dd,s.Handler=Yr,s.Icon=ll,s.ImageOverlay=Nh,s.LatLng=K,s.LatLngBounds=q,s.Layer=br,s.LayerGroup=ol,s.LineUtil=S5,s.Map=Tt,s.Marker=xh,s.Mixin=y5,s.Path=ca,s.Point=Y,s.PolyUtil=b5,s.Polygon=cl,s.Polyline=Ti,s.Popup=Sh,s.PosAnimation=mj,s.Projection=k5,s.Rectangle=Fj,s.Renderer=Oi,s.SVG=hd,s.SVGOverlay=Aj,s.TileLayer=ul,s.Tooltip=kh,s.Transformation=le,s.Util=z,s.VideoOverlay=Tj,s.bind=o,s.bounds=F,s.canvas=Ij,s.circle=L5,s.circleMarker=R5,s.control=od,s.divIcon=U5,s.extend=i,s.featureGroup=T5,s.geoJSON=Ej,s.geoJson=D5,s.gridLayer=q5,s.icon=A5,s.imageOverlay=F5,s.latLng=B,s.latLngBounds=W,s.layerGroup=E5,s.map=f5,s.marker=O5,s.point=V,s.polygon=I5,s.polyline=M5,s.popup=B5,s.rectangle=Z5,s.setOptions=v,s.stamp=d,s.svg=Dj,s.svgOverlay=z5,s.tileLayer=Rj,s.tooltip=V5,s.transformation=Q,s.version=r,s.videoOverlay=$5;var K5=window.L;s.noConflict=function(){return window.L=K5,this},window.L=s})})(jy,jy.exports);var ch=jy.exports;const Aw=Fm(ch);function Ow(e,t,s){return Object.freeze({instance:e,context:t,container:s})}function Rw(e,t){return t==null?function(r,i){const a=j.useRef();return a.current||(a.current=e(r,i)),a}:function(r,i){const a=j.useRef();a.current||(a.current=e(r,i));const o=j.useRef(r),{instance:c}=a.current;return j.useEffect(function(){o.current!==r&&(t(c,r,o.current),o.current=r)},[c,r,i]),a}}function TR(e,t){j.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function AR(e){return function(s){const r=Ew(),i=e(Tw(s,r),r);return bZ(r.map,s.attribution),ER(i.current,s.eventHandlers),TR(i.current,r),i}}function SZ(e,t){const s=j.useRef();j.useEffect(function(){if(t.pathOptions!==s.current){const i=t.pathOptions??{};e.instance.setStyle(i),s.current=i}},[e,t])}function kZ(e){return function(s){const r=Ew(),i=e(Tw(s,r),r);return ER(i.current,s.eventHandlers),TR(i.current,r),SZ(i.current,s),i}}function CZ(e,t){const s=Rw(e,t),r=AR(s);return PR(r)}function PZ(e,t){const s=Rw(e,t),r=kZ(s);return PR(r)}function EZ(e,t){const s=Rw(e,t),r=AR(s);return NZ(r)}function TZ(e,t,s){const{opacity:r,zIndex:i}=t;r!=null&&r!==s.opacity&&e.setOpacity(r),i!=null&&i!==s.zIndex&&e.setZIndex(i)}function OR(){return Ew().map}function RR(e){const t=OR();return j.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const AZ=PZ(function({center:t,children:s,...r},i){const a=new ch.Circle(t,r);return Ow(a,SR(i,{overlayContainer:a}))},wZ);function _y(){return _y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},_y.apply(this,arguments)}function OZ({bounds:e,boundsOptions:t,center:s,children:r,className:i,id:a,placeholder:o,style:c,whenReady:d,zoom:f,...m},h){const[u]=j.useState({className:i,id:a,style:c}),[p,x]=j.useState(null);j.useImperativeHandle(h,()=>(p==null?void 0:p.map)??null,[p]);const v=j.useCallback(y=>{if(y!==null&&p===null){const b=new ch.Map(y,m);s!=null&&f!=null?b.setView(s,f):e!=null&&b.fitBounds(e,t),d!=null&&b.whenReady(d),x(_Z(b))}},[]);j.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const w=p?Ne.createElement(CR,{value:p},r):o??null;return Ne.createElement("div",_y({},u,{ref:v}),w)}const LR=j.forwardRef(OZ),Ny=CZ(function({position:t,...s},r){const i=new ch.Marker(t,s);return Ow(i,SR(r,{overlayContainer:i}))},function(t,s,r){s.position!==r.position&&t.setLatLng(s.position),s.icon!=null&&s.icon!==r.icon&&t.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==r.opacity&&t.setOpacity(s.opacity),t.dragging!=null&&s.draggable!==r.draggable&&(s.draggable===!0?t.dragging.enable():t.dragging.disable())}),MR=EZ(function({url:t,...s},r){const i=new ch.TileLayer(t,Tw(s,r));return Ow(i,r)},function(t,s,r){TZ(t,s,r);const{url:i}=s;i!=null&&i!==r.url&&t.setUrl(i)}),RZ=Aw.divIcon({className:"custom-marker",html:'<div style="background-color: #ef4444; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]}),LZ=Aw.divIcon({className:"vendor-marker",html:'<div style="background-color: #10b981; width: 24px; height: 24px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 0 8px rgba(0,0,0,0.3);"></div>',iconSize:[24,24],iconAnchor:[12,12]}),MZ=({onLocationSelect:e,onClose:t,vendorLocation:s,maxRadius:r=10,vendorName:i="Vendor"})=>{const[a,o]=j.useState(null),[c,d]=j.useState(""),[f,m]=j.useState([]),[h,u]=j.useState(!0),[p,x]=j.useState(""),[v,w]=j.useState([27.7172,85.324]),y=()=>(RR({click(M){const{lat:P,lng:E}=M.latlng;N(P,E),b(P,E)}}),null),b=async(M,P)=>{try{const A=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${M}&lon=${P}&addressdetails=1`)).json();if(A.address){const z=A.address.road||A.address.neighbourhood,O=A.address.neighbourhood||A.address.suburb||A.address.city||A.address.town,$=`${z||O||"Unknown Location"}, ${A.address.city||A.address.town||A.address.state||""}`;x($)}}catch(E){console.error("Error fetching address:",E),x(`${M.toFixed(4)}, ${P.toFixed(4)}`)}};j.useEffect(()=>{s&&w([s.lat,s.lng])},[s]);const _=(M,P,E,A)=>{const O=(E-M)*Math.PI/180,$=(A-P)*Math.PI/180,G=Math.sin(O/2)*Math.sin(O/2)+Math.cos(M*Math.PI/180)*Math.cos(E*Math.PI/180)*Math.sin($/2)*Math.sin($/2);return 6371*(2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G)))},N=(M,P)=>{if(o({lat:M,lng:P}),s){const E=_(M,P,s.lat,s.lng);u(E<=r)}},k=()=>{a&&h&&e(a.lat,a.lng,p||`${a.lat.toFixed(4)}, ${a.lng.toFixed(4)}`)};j.useEffect(()=>{const M=setTimeout(()=>{c.trim()?I():m([])},300);return()=>clearTimeout(M)},[c]);const I=async()=>{if(!c.trim()){m([]);return}try{const P=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}&limit=5&addressdetails=1`)).json();m(P)}catch(M){console.error("Geocoding error:",M),m([])}},C=M=>{const P=parseFloat(M.lat),E=parseFloat(M.lon);w([P,E]),N(P,E),x(M.display_name),m([]),d("")},T=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(M=>{const{latitude:P,longitude:E}=M.coords;w([P,E]),N(P,E),b(P,E)},M=>{console.error("Geolocation error:",M)})};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[95vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Select Delivery Location"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(as,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ve,{placeholder:"Search for an address...",value:c,onChange:M=>d(M.target.value)}),f.length>0&&n.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-10 max-h-32 overflow-y-auto",children:f.map((M,P)=>n.jsx("div",{className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>C(M),children:n.jsx("p",{className:"text-xs font-medium text-gray-900",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:M.display_name})},P))})]}),n.jsx(ne,{onClick:T,size:"sm",variant:"outline",children:n.jsx(CP,{className:"h-4 w-4"})})]})}),n.jsx("div",{className:"h-64 rounded-lg overflow-hidden border",children:n.jsxs(LR,{center:v,zoom:13,style:{height:"100%",width:"100%"},children:[n.jsx(MR,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),s&&n.jsxs(n.Fragment,{children:[n.jsx(Ny,{position:[s.lat,s.lng],icon:LZ}),n.jsx(AZ,{center:[s.lat,s.lng],radius:r*1e3,pathOptions:{color:"#10b981",fillColor:"#10b981",fillOpacity:.1,weight:2}})]}),a&&n.jsx(Ny,{position:[a.lat,a.lng],icon:RZ}),n.jsx(y,{})]},`${v[0]}-${v[1]}`)}),a&&n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Selected Location:"}),n.jsx("p",{className:"text-sm text-gray-600",children:p}),s&&n.jsxs("p",{className:`text-sm mt-2 ${h?"text-green-600":"text-red-600"}`,children:["Distance from ",i,": ",_(a.lat,a.lng,s.lat,s.lng).toFixed(1),"km",!h&&` (exceeds ${r}km delivery limit)`]})]})]}),n.jsxs("div",{className:"flex gap-2 p-4 border-t flex-shrink-0",children:[n.jsx(ne,{variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),n.jsx(ne,{onClick:k,disabled:!a||!h,className:"flex-1",children:"Confirm Location"})]})]})})};class IZ{async getAuthHeaders(){const t=await ke.getToken();return{"Content-Type":"application/json","ngrok-skip-browser-warning":"true",...t&&{Authorization:`Token ${t}`}}}async createOrder(t){const s=await fetch(`${rt}orders/create/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(t)});if(!s.ok){const i=await s.json();throw new Error(i.message||"Failed to create order")}const r=await s.json();return this.notifyVendorOfNewOrder(r.order),r}notifyVendorOfNewOrder(t){window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderCreated",{detail:{order:t}}))}async getOrders(){const t=await fetch(`${rt}orders/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch orders");const s=await t.json();return s.results||s}async getOrder(t){const s=await fetch(`${rt}orders/${t}/`,{headers:await this.getAuthHeaders()});if(!s.ok)throw new Error("Failed to fetch order");return s.json()}async cancelOrder(t,s="Cancelled by customer"){const r=await fetch(`${rt}orders/${t}/cancel/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({reason:s})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to cancel order")}return r.json()}async createReview(t,s){const r=await fetch(`${rt}orders/${t}/review/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(s)});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to create review")}return r.json()}async requestRefund(t,s){const r=await fetch(`${rt}orders/${t}/refund/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(s)});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to request refund")}return r.json()}async getPendingOrders(){const t=await fetch(`${rt}orders/vendor/pending/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending orders");return t.json()}async acceptOrder(t){const s=await fetch(`${rt}orders/${t}/accept/`,{method:"POST",headers:await this.getAuthHeaders()});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to accept order")}const r=await s.json();return this.notifyCustomerOfOrderUpdate(r.order,"accepted"),r}notifyCustomerOfOrderUpdate(t,s){window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{order:t,status:s}}))}async rejectOrder(t,s="Rejected by vendor"){const r=await fetch(`${rt}orders/${t}/reject/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({reason:s})});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to reject order")}const i=await r.json();return this.notifyCustomerOfOrderUpdate(i.order,"rejected"),i}}const tu=new IZ,DZ=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function FZ(){var ue,_e;const e=nt(),{cart:t}=gr();Fs();const{toast:s}=hn(),[r,i]=j.useState("cash_on_delivery"),[a,o]=j.useState("current"),[c,d]=j.useState(null),[f,m]=j.useState("Detecting location..."),[h,u]=j.useState({lat:null,lng:null,address:""}),[p,x]=j.useState(!1),[v,w]=j.useState(null),[y,b]=j.useState({phone:"",instructions:""}),[_,N]=j.useState(null),[k,I]=j.useState("delivery"),[C,T]=j.useState(""),[M,P]=j.useState([]),[E,A]=j.useState(!1);j.useEffect(()=>{var xe;const me=xt.getLocation();if(me)d(me),O(me.latitude,me.longitude).then(m);else return xt.startTracking(),xt.subscribe(async pe=>{if(pe){d(pe);const te=await O(pe.latitude,pe.longitude);m(te)}});((xe=t==null?void 0:t.items)==null?void 0:xe.length)>0&&$(t.items[0].product.vendor_id),(async()=>{await ke.getToken()&&z()})()},[t]);const z=async()=>{try{const me=await ke.getToken(),Se=await fetch(`${rt}/profile/`,{headers:{Authorization:`Token ${me}`,"ngrok-skip-browser-warning":"true"}});if(Se.ok){const xe=await Se.json();N(xe),b(he=>({...he,phone:xe.phone_number||""}))}}catch(me){console.error("Failed to fetch user info:",me)}},O=async(me,Se)=>{try{const he=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${me}&lon=${Se}&addressdetails=1`)).json();if(he.address){const pe=he.address.road||he.address.neighbourhood,te=he.address.neighbourhood||he.address.suburb||he.address.city||he.address.town;return`${pe||te||"Unknown Location"}, ${he.address.city||he.address.town||he.address.state||""}`}return`${me.toFixed(4)}, ${Se.toFixed(4)}`}catch{return`${me.toFixed(4)}, ${Se.toFixed(4)}`}},$=async me=>{try{const Se=await fetch(`${rt}api/vendors/${me}/`,{headers:{"ngrok-skip-browser-warning":"true"}});if(Se.ok){const xe=await Se.json();w(xe)}}catch(Se){console.error("Failed to fetch vendor info:",Se)}},G=Qs(),X=(ue=G.state)!=null&&ue.directBuy?G.state:null,Y=(_e=G.state)==null?void 0:_e.selectedItems,U=X?[{id:Date.now(),product:{id:X.product.id,name:X.product.name,vendor_name:X.product.vendor_name,vendor_id:X.product.vendor_id,images:X.product.images},quantity:X.product.quantity,total_price:(parseFloat(X.product.price)*X.product.quantity).toString()}]:Y||(t==null?void 0:t.items)||[],V=U.reduce((me,Se)=>me+parseFloat(Se.total_price),0),R=V,F=me=>/^(98|97)\d{8}$/.test(me.replace(/\s+/g,"")),q=(me,Se)=>{if(me==="phone"){const xe=Se.replace(/[^0-9]/g,"");xe.length<=10&&b(he=>({...he,[me]:xe}))}else b(xe=>({...xe,[me]:Se}))},W=(me,Se)=>{if(!v||!v.latitude||!v.longitude||!v.delivery_radius)return{valid:!0,distance:0};const xe=DZ(me,Se,v.latitude,v.longitude);return{valid:xe<=v.delivery_radius,distance:xe,maxRadius:v.delivery_radius}},K=me=>{o(me),me==="custom"&&v?x(!0):me==="custom"&&!v&&s({title:"Vendor Information Loading",description:"Please wait for vendor information to load before selecting map location",variant:"destructive"})},B=(me,Se,xe)=>{const he=W(me,Se);if(!he.valid){s({title:"Location Out of Range",description:`This location is ${he.distance.toFixed(1)}km away. Maximum delivery range is ${he.maxRadius}km.`,variant:"destructive"});return}u({lat:me,lng:Se,address:xe}),x(!1),s({title:"Location Selected",description:`Delivery location set (${he.distance.toFixed(1)}km from vendor)`})},Z=()=>{const me=a==="current"?c:h.lat,Se=(_==null?void 0:_.phone_number)||y.phone,xe=Se&&F(Se);return me&&xe},se=async()=>{if(!await ke.getToken()){s({title:"Login Required",description:"Please login to place an order",variant:"destructive"}),e("/login");return}if(!Z()){s({title:"Missing Information",description:"Please complete delivery information",variant:"destructive"}),I("delivery");return}const Se=a==="current"?c:h;if(!Se||!Se.latitude&&!Se.lat){s({title:"Location Required",description:"Please select a delivery location",variant:"destructive"});return}const xe=Se.latitude||Se.lat,he=Se.longitude||Se.lng,pe=W(xe,he);if(!pe.valid){s({title:"Delivery Not Available",description:`Selected location is outside delivery range (${pe.distance.toFixed(1)}km > ${pe.maxRadius}km)`,variant:"destructive"});return}try{const te={items:U.map(oe=>({product_id:oe.product.id,quantity:oe.quantity})),delivery_name:(_==null?void 0:_.username)||(_==null?void 0:_.first_name)||"Customer",delivery_phone:(_==null?void 0:_.phone_number)||y.phone,delivery_address:a==="current"?f:h.address,delivery_latitude:xe,delivery_longitude:he,delivery_instructions:y.instructions,payment_method:r,notes:`Distance: ${pe.distance.toFixed(1)}km from vendor`},ae=await tu.createOrder(te);if(s({title:"Order Placed Successfully!",description:`Order #${ae.order.order_number} has been placed.`}),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Order Placed!",{body:`Order #${ae.order.order_number} for ${ae.order.total_amount}`,icon:"/favicon.ico",tag:`order-${ae.order.id}`,requireInteraction:!0}),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderCreated",{detail:{order:ae.order}})),!X&&Y){const oe=await ke.getToken();for(const be of Y)try{await fetch(`${rt}cart/items/${be.id}/remove/`,{method:"DELETE",headers:{Authorization:`Token ${oe}`,"ngrok-skip-browser-warning":"true"}})}catch(je){console.error("Error removing cart item:",je)}}e(`/order-confirmation/${ae.order.id}`,{state:{order:ae.order}})}catch(te){console.error("Order creation error:",te),s({title:"Order Failed",description:te.message||"Network error. Please try again.",variant:"destructive"})}},J=()=>c?f:"Detecting location...",ie=()=>h.lat?h.address||`Custom Location (${h.lat.toFixed(4)}, ${h.lng.toFixed(4)})`:"Select on map",le=async me=>{if(!me.trim()){P([]),A(!1);return}try{const xe=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(me)}&limit=5&addressdetails=1`)).json();P(xe),A(!0)}catch(Se){console.error("Location search error:",Se),P([]),A(!1)}},Q=async me=>{const Se=parseFloat(me.lat),xe=parseFloat(me.lon),he=me.display_name,pe=W(Se,xe);if(!pe.valid){s({title:"Location Out of Range",description:`This location is ${pe.distance.toFixed(1)}km away. Maximum delivery range is ${pe.maxRadius}km.`,variant:"destructive"});return}u({lat:Se,lng:xe,address:he}),o("custom"),T(""),P([]),A(!1),s({title:"Location Selected",description:`Delivery location set (${pe.distance.toFixed(1)}km from vendor)`})};return j.useEffect(()=>{const me=setTimeout(()=>{C.trim()?le(C):(P([]),A(!1))},300);return()=>clearTimeout(me)},[C]),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 font-sans",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:n.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-all",children:n.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Checkout"}),n.jsx("div",{className:"w-6"})," "]})}),n.jsx("main",{className:"max-w-4xl mx-auto p-6 pb-32",children:n.jsxs(Si,{value:k,onValueChange:I,className:"space-y-6",children:[n.jsxs(Hr,{className:"grid w-full grid-cols-2",children:[n.jsxs(Ct,{value:"delivery",className:"flex items-center gap-2",children:[Z()&&n.jsx(ip,{className:"h-4 w-4"}),"Delivery"]}),n.jsx(Ct,{value:"summary",disabled:!Z(),children:"Summary"})]}),n.jsx(dt,{value:"delivery",className:"space-y-6",children:n.jsxs(Te,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[n.jsx(wt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:n.jsxs(jt,{className:"flex items-center gap-3 text-xl font-semibold text-gray-800",children:[n.jsx(Kt,{className:"h-6 w-6 text-emerald-600"}),"Delivery Location"]})}),n.jsxs(Oe,{className:"p-6 space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Kt,{className:"h-5 w-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Delivery Location"}),n.jsx("p",{className:"text-base font-semibold text-gray-800",children:a==="current"?J():ie()}),(a==="current"&&c||a==="custom"&&h.lat)&&v&&n.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[a==="current"?W(c.latitude,c.longitude).distance.toFixed(1):W(h.lat,h.lng).distance.toFixed(1),"km from ",v.business_name]})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{className:"text-sm font-medium text-gray-700",children:"Search Location"}),n.jsxs("div",{className:"relative",children:[n.jsx(ve,{placeholder:"Search for an address...",value:C,onChange:me=>T(me.target.value),onFocus:()=>C&&A(!0),className:"border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl"}),E&&M.length>0&&n.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-xl shadow-lg z-10 max-h-48 overflow-y-auto mt-1",children:M.map((me,Se)=>n.jsx("div",{className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 first:rounded-t-xl last:rounded-b-xl",onMouseDown:xe=>xe.preventDefault(),onClick:()=>Q(me),children:n.jsx("p",{className:"text-sm font-medium text-gray-900",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:me.display_name})},Se))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(fe,{className:"text-sm font-medium text-gray-700",children:"Choose Delivery Location *"}),n.jsxs(jR,{value:a,onValueChange:K,className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all cursor-pointer",children:[n.jsx(wy,{value:"current",id:"current",className:"text-emerald-600 border-gray-300"}),n.jsxs(fe,{htmlFor:"current",className:"flex items-center gap-3 flex-1 cursor-pointer",children:[n.jsx(CP,{className:"h-5 w-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-base font-medium text-gray-800",children:"Use Current Location"}),n.jsx("p",{className:"text-sm text-gray-500",children:J()}),c&&v&&n.jsxs("p",{className:"text-xs text-emerald-600",children:[W(c.latitude,c.longitude).distance.toFixed(1),"km from vendor"]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all cursor-pointer",children:[n.jsx(wy,{value:"custom",id:"custom",className:"text-emerald-600 border-gray-300"}),n.jsxs(fe,{htmlFor:"custom",className:"flex items-center gap-3 flex-1 cursor-pointer",children:[n.jsx(zD,{className:"h-5 w-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-base font-medium text-gray-800",children:"Choose on Map"}),n.jsx("p",{className:"text-sm text-gray-500",children:ie()}),h.lat&&v&&n.jsxs("p",{className:"text-xs text-emerald-600",children:[W(h.lat,h.lng).distance.toFixed(1),"km from vendor"]})]})]})]}),a==="custom"&&!h.lat&&n.jsx("div",{className:"ml-8",children:n.jsx(ne,{onClick:()=>v?x(!0):null,disabled:!v,variant:"outline",className:"text-sm px-4 py-2 rounded-lg",children:v?"Open Map":"Loading vendor info..."})})]})]}),!(_!=null&&_.phone_number)&&n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"Phone Number *"}),n.jsx(ve,{id:"phone",placeholder:"98XXXXXXXX or 97XXXXXXXX",value:y.phone,onChange:me=>q("phone",me.target.value),className:`mt-1 border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl transition-all ${y.phone&&!F(y.phone)?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`}),y.phone&&!F(y.phone)&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a valid Nepali mobile number (98XXXXXXXX or 97XXXXXXXX)"})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"instructions",className:"text-sm font-medium text-gray-700",children:"Delivery Instructions (Optional)"}),n.jsx(Xn,{id:"instructions",placeholder:"Any special instructions for delivery",value:y.instructions,onChange:me=>q("instructions",me.target.value),rows:3,className:"mt-1 border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl transition-all"})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(ne,{onClick:()=>I("summary"),disabled:!Z(),className:"px-8 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl",children:"Continue to Summary"})})]})]})}),n.jsx(dt,{value:"summary",className:"space-y-6",children:n.jsxs(Te,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[n.jsx(wt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:n.jsx(jt,{className:"text-xl font-semibold text-gray-800",children:"Order Summary"})}),n.jsxs(Oe,{className:"p-6 space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Kt,{className:"h-5 w-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Delivery Location"}),n.jsx("p",{className:"text-base font-semibold text-gray-800",children:a==="current"?J():ie()}),(a==="current"&&c||a==="custom"&&h.lat)&&v&&n.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[a==="current"?W(c.latitude,c.longitude).distance.toFixed(1):W(h.lat,h.lng).distance.toFixed(1),"km from ",v.business_name]})]})]})}),n.jsx(gi,{className:"my-4 bg-gray-200"}),U.map(me=>{var Se,xe;return n.jsxs("div",{className:"flex items-center gap-4 py-4 border-b border-gray-100",children:[n.jsx("img",{src:ls((xe=(Se=me.product.images)==null?void 0:Se[0])==null?void 0:xe.image_url),alt:me.product.name,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 shadow-sm"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-lg text-gray-800",children:me.product.name}),n.jsx("p",{className:"text-sm text-gray-500",children:me.product.vendor_name}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Quantity: ",me.quantity]})]}),n.jsxs("p",{className:"font-semibold text-lg text-gray-800",children:["",parseFloat(me.total_price).toFixed(2)]})]},me.id)}),n.jsx(gi,{className:"my-4 bg-gray-200"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[n.jsx("h4",{className:"font-semibold text-emerald-800 mb-2",children:"Bill Amount (Cash on Delivery)"}),n.jsxs("div",{className:"flex justify-between text-base text-gray-700",children:[n.jsx("span",{children:"Subtotal"}),n.jsxs("span",{className:"font-semibold",children:["",V.toFixed(2)]})]})]}),n.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-orange-800 text-lg",children:"Delivery Fee"}),n.jsx("p",{className:"text-sm text-orange-700",children:"Pay on delivery"})]}),n.jsx("span",{className:"font-bold text-xl text-orange-600",children:"To be determined"})]})}),n.jsx(gi,{className:"my-2 bg-gray-200"}),n.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-800",children:[n.jsx("span",{children:"Bill Total (Now)"}),n.jsxs("span",{children:["",R.toFixed(2)]})]})]}),n.jsx("div",{className:"flex justify-between",children:n.jsx(ne,{variant:"outline",onClick:()=>I("delivery"),className:"px-8 py-2 rounded-xl",children:"Back to Delivery"})})]})]})})]})}),k==="summary"&&n.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-2xl py-4",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-6 flex items-center justify-between",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount (COD)"}),n.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:["",R.toFixed(2)]})]}),n.jsx(ne,{onClick:se,disabled:!Z(),className:"px-10 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-bold text-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Place Order (COD)"})]})}),p&&v&&n.jsx(MZ,{onLocationSelect:B,onClose:()=>x(!1),vendorLocation:{lat:v.latitude,lng:v.longitude},maxRadius:v.delivery_radius,vendorName:v.business_name})]})}function $Z(){var h,u;const e=nt(),{orderId:t}=xp(),s=Qs(),{toast:r}=hn(),[i,a]=j.useState(((h=s.state)==null?void 0:h.order)||null),[o,c]=j.useState(!i);j.useEffect(()=>{!i&&t&&d()},[t,i]);const d=async()=>{try{const p=await tu.getOrder(parseInt(t));a(p)}catch(p){console.error("Error fetching order:",p),r({title:"Error",description:p.message||"Failed to load order details",variant:"destructive"}),e("/")}finally{c(!1)}},f=p=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",out_for_delivery:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[p]||"bg-gray-100 text-gray-800",m=p=>({pending:"Order Placed",confirmed:"Confirmed",preparing:"Preparing",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"})[p]||p;return o?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})}):i?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:n.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:n.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Order Confirmation"}),n.jsx("div",{className:"w-6"})]})}),n.jsxs("main",{className:"max-w-4xl mx-auto p-6 pb-32",children:[n.jsx(Te,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:n.jsxs(Oe,{className:"p-8 text-center",children:[n.jsx(Qu,{className:"h-16 w-16 mx-auto mb-4 text-emerald-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Order Placed Successfully!"}),n.jsxs("p",{className:"text-gray-600 mb-4",children:["Your order #",i.order_number," has been placed and is being processed."]}),n.jsx(De,{className:`${f(i.status)} px-4 py-2 text-sm font-medium`,children:m(i.status)})]})}),n.jsxs(Te,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:[n.jsx(wt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:n.jsx(jt,{className:"text-xl font-semibold text-gray-800",children:"Order Details"})}),n.jsx(Oe,{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Order Information"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Order Number:"}),n.jsxs("span",{className:"font-medium",children:["#",i.order_number]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Order Date:"}),n.jsx("span",{className:"font-medium",children:new Date(i.created_at).toLocaleDateString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),n.jsx("span",{className:"font-medium capitalize",children:i.payment_method})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),n.jsxs("span",{className:"font-bold text-emerald-600",children:["",parseFloat(i.total_amount).toFixed(2)]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Delivery Information"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Kt,{className:"h-4 w-4 text-emerald-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:i.delivery_name}),n.jsx("p",{className:"text-gray-600",children:i.delivery_address})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(eh,{className:"h-4 w-4 text-emerald-600"}),n.jsx("span",{className:"text-gray-600",children:i.delivery_phone})]}),i.delivery_instructions&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(dr,{className:"h-4 w-4 text-emerald-600 mt-0.5"}),n.jsx("p",{className:"text-gray-600 text-xs",children:i.delivery_instructions})]})]})]})]})})]}),n.jsxs(Te,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:[n.jsx(wt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:n.jsx(jt,{className:"text-xl font-semibold text-gray-800",children:"Order Items"})}),n.jsxs(Oe,{className:"p-6",children:[n.jsx("div",{className:"space-y-4",children:(u=i.items)==null?void 0:u.map(p=>{var x,v,w;return n.jsxs("div",{className:"flex items-center gap-4 py-4 border-b border-gray-100 last:border-b-0",children:[n.jsx("img",{src:((w=(v=(x=p.product_details)==null?void 0:x.images)==null?void 0:v[0])==null?void 0:w.image_url)||"/placeholder-product.jpg",alt:p.product_name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:p.product_name}),n.jsx("p",{className:"text-sm text-gray-600",children:p.vendor_name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",p.quantity]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"font-semibold text-gray-800",children:["",parseFloat(p.total_price).toFixed(2)]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["",parseFloat(p.unit_price).toFixed(2)," each"]})]})]},p.id)})}),n.jsx(gi,{className:"my-4"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[n.jsxs("h4",{className:"font-semibold text-emerald-800 mb-2",children:["Bill Amount (Paid via ",i.payment_method,")"]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsxs("span",{className:"font-medium",children:["",parseFloat(i.subtotal).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Tax:"}),n.jsxs("span",{className:"font-medium",children:["",parseFloat(i.tax_amount).toFixed(2)]})]}),n.jsx(gi,{className:"my-2"}),n.jsxs("div",{className:"flex justify-between text-base font-bold",children:[n.jsx("span",{children:"Bill Total (Paid):"}),n.jsxs("span",{className:"text-emerald-600",children:["",(parseFloat(i.subtotal)+parseFloat(i.tax_amount)).toFixed(2)]})]})]})]}),n.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-orange-800 text-lg",children:"Delivery Fee"}),n.jsx("p",{className:"text-sm text-orange-700",children:"Pay on delivery"})]}),n.jsxs("span",{className:"font-bold text-xl text-orange-600",children:["",parseFloat(i.delivery_fee).toFixed(2)]})]})}),n.jsx(gi,{className:"my-2"}),n.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[n.jsx("span",{children:"Grand Total:"}),n.jsxs("span",{className:"text-gray-800",children:["",parseFloat(i.total_amount).toFixed(2)]})]})]})]})]}),n.jsxs("div",{className:"flex gap-4 justify-center",children:[n.jsx(ne,{variant:"outline",onClick:()=>e("/orders"),className:"px-8 py-3 rounded-xl",children:"View All Orders"}),n.jsx(ne,{onClick:()=>e("/search"),className:"px-8 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700",children:"Continue Shopping"})]})]})]}):n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(At,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Order not found"}),n.jsx(ne,{onClick:()=>e("/home"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Go Home"})]})})}var Lp="Dialog",[IR,tre]=ds(Lp),[zZ,Wr]=IR(Lp),DR=e=>{const{__scopeDialog:t,children:s,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,c=j.useRef(null),d=j.useRef(null),[f,m]=Br({prop:r,defaultProp:i??!1,onChange:a,caller:Lp});return n.jsx(zZ,{scope:t,triggerRef:c,contentRef:d,contentId:$r(),titleId:$r(),descriptionId:$r(),open:f,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(h=>!h),[m]),modal:o,children:s})};DR.displayName=Lp;var FR="DialogTrigger",$R=j.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Wr(FR,s),a=ft(t,i.triggerRef);return n.jsx(Xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Iw(i.open),...r,ref:a,onClick:Me(e.onClick,i.onOpenToggle)})});$R.displayName=FR;var Lw="DialogPortal",[BZ,zR]=IR(Lw,{forceMount:void 0}),BR=e=>{const{__scopeDialog:t,forceMount:s,children:r,container:i}=e,a=Wr(Lw,t);return n.jsx(BZ,{scope:t,forceMount:s,children:j.Children.map(r,o=>n.jsx(Jn,{present:s||a.open,children:n.jsx(Ku,{asChild:!0,container:i,children:o})}))})};BR.displayName=Lw;var bm="DialogOverlay",VR=j.forwardRef((e,t)=>{const s=zR(bm,e.__scopeDialog),{forceMount:r=s.forceMount,...i}=e,a=Wr(bm,e.__scopeDialog);return a.modal?n.jsx(Jn,{present:r||a.open,children:n.jsx(UZ,{...i,ref:t})}):null});VR.displayName=bm;var VZ=qo("DialogOverlay.RemoveScroll"),UZ=j.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Wr(bm,s);return n.jsx(jp,{as:VZ,allowPinchZoom:!0,shards:[i.contentRef],children:n.jsx(Xe.div,{"data-state":Iw(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ko="DialogContent",UR=j.forwardRef((e,t)=>{const s=zR(Ko,e.__scopeDialog),{forceMount:r=s.forceMount,...i}=e,a=Wr(Ko,e.__scopeDialog);return n.jsx(Jn,{present:r||a.open,children:a.modal?n.jsx(qZ,{...i,ref:t}):n.jsx(HZ,{...i,ref:t})})});UR.displayName=Ko;var qZ=j.forwardRef((e,t)=>{const s=Wr(Ko,e.__scopeDialog),r=j.useRef(null),i=ft(t,s.contentRef,r);return j.useEffect(()=>{const a=r.current;if(a)return Mb(a)},[]),n.jsx(qR,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Me(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Me(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&a.preventDefault()}),onFocusOutside:Me(e.onFocusOutside,a=>a.preventDefault())})}),HZ=j.forwardRef((e,t)=>{const s=Wr(Ko,e.__scopeDialog),r=j.useRef(!1),i=j.useRef(!1);return n.jsx(qR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(r.current||(c=s.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var d,f;(d=e.onInteractOutside)==null||d.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((f=s.triggerRef.current)==null?void 0:f.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),qR=j.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,c=Wr(Ko,s),d=j.useRef(null),f=ft(t,d);return Ob(),n.jsxs(n.Fragment,{children:[n.jsx(bp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:n.jsx(Mc,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Iw(c.open),...o,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(WZ,{titleId:c.titleId}),n.jsx(GZ,{contentRef:d,descriptionId:c.descriptionId})]})]})}),Mw="DialogTitle",HR=j.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Wr(Mw,s);return n.jsx(Xe.h2,{id:i.titleId,...r,ref:t})});HR.displayName=Mw;var WR="DialogDescription",ZR=j.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Wr(WR,s);return n.jsx(Xe.p,{id:i.descriptionId,...r,ref:t})});ZR.displayName=WR;var GR="DialogClose",KR=j.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Wr(GR,s);return n.jsx(Xe.button,{type:"button",...r,ref:t,onClick:Me(e.onClick,()=>i.onOpenChange(!1))})});KR.displayName=GR;function Iw(e){return e?"open":"closed"}var YR="DialogTitleWarning",[nre,XR]=II(YR,{contentName:Ko,titleName:Mw,docsSlug:"dialog"}),WZ=({titleId:e})=>{const t=XR(YR),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return j.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},ZZ="DialogDescriptionWarning",GZ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${XR(ZZ).contentName}}.`;return j.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},QR=DR,JR=$R,e4=BR,Mp=VR,Ip=UR,Dp=HR,Fp=ZR,t4=KR;const Fo=QR,Sy=JR,KZ=e4,n4=j.forwardRef(({className:e,...t},s)=>n.jsx(Mp,{ref:s,className:Ze("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));n4.displayName=Mp.displayName;const Fa=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(KZ,{children:[n.jsx(n4,{}),n.jsxs(Ip,{ref:r,className:Ze("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,n.jsxs(t4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(as,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Fa.displayName=Ip.displayName;const $a=({className:e,...t})=>n.jsx("div",{className:Ze("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});$a.displayName="DialogHeader";const za=j.forwardRef(({className:e,...t},s)=>n.jsx(Dp,{ref:s,className:Ze("text-lg font-semibold leading-none tracking-tight",e),...t}));za.displayName=Dp.displayName;const s4=j.forwardRef(({className:e,...t},s)=>n.jsx(Fp,{ref:s,className:Ze("text-sm text-muted-foreground",e),...t}));s4.displayName=Fp.displayName;const Rs=QR,YZ=JR,XZ=e4,r4=j.forwardRef(({className:e,...t},s)=>n.jsx(Mp,{className:Ze("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));r4.displayName=Mp.displayName;const QZ=Xu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),xs=j.forwardRef(({side:e="right",className:t,children:s,...r},i)=>n.jsxs(XZ,{children:[n.jsx(r4,{}),n.jsxs(Ip,{ref:i,className:Ze(QZ({side:e}),t),...r,children:[s,n.jsxs(t4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[n.jsx(as,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xs.displayName=Ip.displayName;const ys=({className:e,...t})=>n.jsx("div",{className:Ze("flex flex-col space-y-2 text-center sm:text-left",e),...t});ys.displayName="SheetHeader";const bs=j.forwardRef(({className:e,...t},s)=>n.jsx(Dp,{ref:s,className:Ze("text-lg font-semibold text-foreground",e),...t}));bs.displayName=Dp.displayName;const JZ=j.forwardRef(({className:e,...t},s)=>n.jsx(Fp,{ref:s,className:Ze("text-sm text-muted-foreground",e),...t}));JZ.displayName=Fp.displayName;function ky(e,[t,s]){return Math.min(s,Math.max(t,e))}var eG=[" ","Enter","ArrowUp","ArrowDown"],tG=[" ","Enter"],Yo="Select",[$p,zp,nG]=np(Yo),[Gc,sre]=ds(Yo,[nG,zc]),Bp=zc(),[sG,ro]=Gc(Yo),[rG,iG]=Gc(Yo),i4=e=>{const{__scopeSelect:t,children:s,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:c,onValueChange:d,dir:f,name:m,autoComplete:h,disabled:u,required:p,form:x}=e,v=Bp(t),[w,y]=j.useState(null),[b,_]=j.useState(null),[N,k]=j.useState(!1),I=Uc(f),[C,T]=Br({prop:r,defaultProp:i??!1,onChange:a,caller:Yo}),[M,P]=Br({prop:o,defaultProp:c,onChange:d,caller:Yo}),E=j.useRef(null),A=w?x||!!w.closest("form"):!0,[z,O]=j.useState(new Set),$=Array.from(z).map(G=>G.props.value).join(";");return n.jsx(wb,{...v,children:n.jsxs(sG,{required:p,scope:t,trigger:w,onTriggerChange:y,valueNode:b,onValueNodeChange:_,valueNodeHasChildren:N,onValueNodeHasChildrenChange:k,contentId:$r(),value:M,onValueChange:P,open:C,onOpenChange:T,dir:I,triggerPointerDownPosRef:E,disabled:u,children:[n.jsx($p.Provider,{scope:t,children:n.jsx(rG,{scope:e.__scopeSelect,onNativeOptionAdd:j.useCallback(G=>{O(X=>new Set(X).add(G))},[]),onNativeOptionRemove:j.useCallback(G=>{O(X=>{const Y=new Set(X);return Y.delete(G),Y})},[]),children:s})}),A?n.jsxs(E4,{"aria-hidden":!0,required:p,tabIndex:-1,name:m,autoComplete:h,value:M,onChange:G=>P(G.target.value),disabled:u,form:x,children:[M===void 0?n.jsx("option",{value:""}):null,Array.from(z)]},$):null]})})};i4.displayName=Yo;var a4="SelectTrigger",o4=j.forwardRef((e,t)=>{const{__scopeSelect:s,disabled:r=!1,...i}=e,a=Bp(s),o=ro(a4,s),c=o.disabled||r,d=ft(t,o.onTriggerChange),f=zp(s),m=j.useRef("touch"),[h,u,p]=A4(v=>{const w=f().filter(_=>!_.disabled),y=w.find(_=>_.value===o.value),b=O4(w,v,y);b!==void 0&&o.onValueChange(b.value)}),x=v=>{c||(o.onOpenChange(!0),p()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return n.jsx(jb,{asChild:!0,...a,children:n.jsx(Xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":T4(o.value)?"":void 0,...i,ref:d,onClick:Me(i.onClick,v=>{v.currentTarget.focus(),m.current!=="mouse"&&x(v)}),onPointerDown:Me(i.onPointerDown,v=>{m.current=v.pointerType;const w=v.target;w.hasPointerCapture(v.pointerId)&&w.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:Me(i.onKeyDown,v=>{const w=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&u(v.key),!(w&&v.key===" ")&&eG.includes(v.key)&&(x(),v.preventDefault())})})})});o4.displayName=a4;var l4="SelectValue",c4=j.forwardRef((e,t)=>{const{__scopeSelect:s,className:r,style:i,children:a,placeholder:o="",...c}=e,d=ro(l4,s),{onValueNodeHasChildrenChange:f}=d,m=a!==void 0,h=ft(t,d.onValueNodeChange);return kn(()=>{f(m)},[f,m]),n.jsx(Xe.span,{...c,ref:h,style:{pointerEvents:"none"},children:T4(d.value)?n.jsx(n.Fragment,{children:o}):a})});c4.displayName=l4;var aG="SelectIcon",d4=j.forwardRef((e,t)=>{const{__scopeSelect:s,children:r,...i}=e;return n.jsx(Xe.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});d4.displayName=aG;var oG="SelectPortal",u4=e=>n.jsx(Ku,{asChild:!0,...e});u4.displayName=oG;var Xo="SelectContent",h4=j.forwardRef((e,t)=>{const s=ro(Xo,e.__scopeSelect),[r,i]=j.useState();if(kn(()=>{i(new DocumentFragment)},[]),!s.open){const a=r;return a?eo.createPortal(n.jsx(f4,{scope:e.__scopeSelect,children:n.jsx($p.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),a):null}return n.jsx(m4,{...e,ref:t})});h4.displayName=Xo;var Nr=10,[f4,io]=Gc(Xo),lG="SelectContentImpl",cG=qo("SelectContent.RemoveScroll"),m4=j.forwardRef((e,t)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:c,sideOffset:d,align:f,alignOffset:m,arrowPadding:h,collisionBoundary:u,collisionPadding:p,sticky:x,hideWhenDetached:v,avoidCollisions:w,...y}=e,b=ro(Xo,s),[_,N]=j.useState(null),[k,I]=j.useState(null),C=ft(t,Z=>N(Z)),[T,M]=j.useState(null),[P,E]=j.useState(null),A=zp(s),[z,O]=j.useState(!1),$=j.useRef(!1);j.useEffect(()=>{if(_)return Mb(_)},[_]),Ob();const G=j.useCallback(Z=>{const[se,...J]=A().map(Q=>Q.ref.current),[ie]=J.slice(-1),le=document.activeElement;for(const Q of Z)if(Q===le||(Q==null||Q.scrollIntoView({block:"nearest"}),Q===se&&k&&(k.scrollTop=0),Q===ie&&k&&(k.scrollTop=k.scrollHeight),Q==null||Q.focus(),document.activeElement!==le))return},[A,k]),X=j.useCallback(()=>G([T,_]),[G,T,_]);j.useEffect(()=>{z&&X()},[z,X]);const{onOpenChange:Y,triggerPointerDownPosRef:U}=b;j.useEffect(()=>{if(_){let Z={x:0,y:0};const se=ie=>{var le,Q;Z={x:Math.abs(Math.round(ie.pageX)-(((le=U.current)==null?void 0:le.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((Q=U.current)==null?void 0:Q.y)??0))}},J=ie=>{Z.x<=10&&Z.y<=10?ie.preventDefault():_.contains(ie.target)||Y(!1),document.removeEventListener("pointermove",se),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",J,{capture:!0})}}},[_,Y,U]),j.useEffect(()=>{const Z=()=>Y(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[Y]);const[V,R]=A4(Z=>{const se=A().filter(le=>!le.disabled),J=se.find(le=>le.ref.current===document.activeElement),ie=O4(se,Z,J);ie&&setTimeout(()=>ie.ref.current.focus())}),F=j.useCallback((Z,se,J)=>{const ie=!$.current&&!J;(b.value!==void 0&&b.value===se||ie)&&(M(Z),ie&&($.current=!0))},[b.value]),q=j.useCallback(()=>_==null?void 0:_.focus(),[_]),W=j.useCallback((Z,se,J)=>{const ie=!$.current&&!J;(b.value!==void 0&&b.value===se||ie)&&E(Z)},[b.value]),K=r==="popper"?Cy:p4,B=K===Cy?{side:c,sideOffset:d,align:f,alignOffset:m,arrowPadding:h,collisionBoundary:u,collisionPadding:p,sticky:x,hideWhenDetached:v,avoidCollisions:w}:{};return n.jsx(f4,{scope:s,content:_,viewport:k,onViewportChange:I,itemRefCallback:F,selectedItem:T,onItemLeave:q,itemTextRefCallback:W,focusSelectedItem:X,selectedItemText:P,position:r,isPositioned:z,searchRef:V,children:n.jsx(jp,{as:cG,allowPinchZoom:!0,children:n.jsx(bp,{asChild:!0,trapped:b.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:Me(i,Z=>{var se;(se=b.trigger)==null||se.focus({preventScroll:!0}),Z.preventDefault()}),children:n.jsx(Mc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:n.jsx(K,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:Z=>Z.preventDefault(),...y,...B,onPlaced:()=>O(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Me(y.onKeyDown,Z=>{const se=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!se&&Z.key.length===1&&R(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let ie=A().filter(le=>!le.disabled).map(le=>le.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const le=Z.target,Q=ie.indexOf(le);ie=ie.slice(Q+1)}setTimeout(()=>G(ie)),Z.preventDefault()}})})})})})})});m4.displayName=lG;var dG="SelectItemAlignedPosition",p4=j.forwardRef((e,t)=>{const{__scopeSelect:s,onPlaced:r,...i}=e,a=ro(Xo,s),o=io(Xo,s),[c,d]=j.useState(null),[f,m]=j.useState(null),h=ft(t,C=>m(C)),u=zp(s),p=j.useRef(!1),x=j.useRef(!0),{viewport:v,selectedItem:w,selectedItemText:y,focusSelectedItem:b}=o,_=j.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&f&&v&&w&&y){const C=a.trigger.getBoundingClientRect(),T=f.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),P=y.getBoundingClientRect();if(a.dir!=="rtl"){const le=P.left-T.left,Q=M.left-le,ue=C.left-Q,_e=C.width+ue,me=Math.max(_e,T.width),Se=window.innerWidth-Nr,xe=ky(Q,[Nr,Math.max(Nr,Se-me)]);c.style.minWidth=_e+"px",c.style.left=xe+"px"}else{const le=T.right-P.right,Q=window.innerWidth-M.right-le,ue=window.innerWidth-C.right-Q,_e=C.width+ue,me=Math.max(_e,T.width),Se=window.innerWidth-Nr,xe=ky(Q,[Nr,Math.max(Nr,Se-me)]);c.style.minWidth=_e+"px",c.style.right=xe+"px"}const E=u(),A=window.innerHeight-Nr*2,z=v.scrollHeight,O=window.getComputedStyle(f),$=parseInt(O.borderTopWidth,10),G=parseInt(O.paddingTop,10),X=parseInt(O.borderBottomWidth,10),Y=parseInt(O.paddingBottom,10),U=$+G+z+Y+X,V=Math.min(w.offsetHeight*5,U),R=window.getComputedStyle(v),F=parseInt(R.paddingTop,10),q=parseInt(R.paddingBottom,10),W=C.top+C.height/2-Nr,K=A-W,B=w.offsetHeight/2,Z=w.offsetTop+B,se=$+G+Z,J=U-se;if(se<=W){const le=E.length>0&&w===E[E.length-1].ref.current;c.style.bottom="0px";const Q=f.clientHeight-v.offsetTop-v.offsetHeight,ue=Math.max(K,B+(le?q:0)+Q+X),_e=se+ue;c.style.height=_e+"px"}else{const le=E.length>0&&w===E[0].ref.current;c.style.top="0px";const ue=Math.max(W,$+v.offsetTop+(le?F:0)+B)+J;c.style.height=ue+"px",v.scrollTop=se-W+v.offsetTop}c.style.margin=`${Nr}px 0`,c.style.minHeight=V+"px",c.style.maxHeight=A+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[u,a.trigger,a.valueNode,c,f,v,w,y,a.dir,r]);kn(()=>_(),[_]);const[N,k]=j.useState();kn(()=>{f&&k(window.getComputedStyle(f).zIndex)},[f]);const I=j.useCallback(C=>{C&&x.current===!0&&(_(),b==null||b(),x.current=!1)},[_,b]);return n.jsx(hG,{scope:s,contentWrapper:c,shouldExpandOnScrollRef:p,onScrollButtonChange:I,children:n.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:n.jsx(Xe.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});p4.displayName=dG;var uG="SelectPopperPosition",Cy=j.forwardRef((e,t)=>{const{__scopeSelect:s,align:r="start",collisionPadding:i=Nr,...a}=e,o=Bp(s);return n.jsx(_b,{...o,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Cy.displayName=uG;var[hG,Dw]=Gc(Xo,{}),Py="SelectViewport",g4=j.forwardRef((e,t)=>{const{__scopeSelect:s,nonce:r,...i}=e,a=io(Py,s),o=Dw(Py,s),c=ft(t,a.onViewportChange),d=j.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),n.jsx($p.Slot,{scope:s,children:n.jsx(Xe.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Me(i.onScroll,f=>{const m=f.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:u}=o;if(u!=null&&u.current&&h){const p=Math.abs(d.current-m.scrollTop);if(p>0){const x=window.innerHeight-Nr*2,v=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),y=Math.max(v,w);if(y<x){const b=y+p,_=Math.min(x,b),N=b-_;h.style.height=_+"px",h.style.bottom==="0px"&&(m.scrollTop=N>0?N:0,h.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});g4.displayName=Py;var v4="SelectGroup",[fG,mG]=Gc(v4),pG=j.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,i=$r();return n.jsx(fG,{scope:s,id:i,children:n.jsx(Xe.div,{role:"group","aria-labelledby":i,...r,ref:t})})});pG.displayName=v4;var x4="SelectLabel",y4=j.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,i=mG(x4,s);return n.jsx(Xe.div,{id:i.id,...r,ref:t})});y4.displayName=x4;var wm="SelectItem",[gG,b4]=Gc(wm),w4=j.forwardRef((e,t)=>{const{__scopeSelect:s,value:r,disabled:i=!1,textValue:a,...o}=e,c=ro(wm,s),d=io(wm,s),f=c.value===r,[m,h]=j.useState(a??""),[u,p]=j.useState(!1),x=ft(t,b=>{var _;return(_=d.itemRefCallback)==null?void 0:_.call(d,b,r,i)}),v=$r(),w=j.useRef("touch"),y=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(gG,{scope:s,value:r,disabled:i,textId:v,isSelected:f,onItemTextChange:j.useCallback(b=>{h(_=>_||((b==null?void 0:b.textContent)??"").trim())},[]),children:n.jsx($p.ItemSlot,{scope:s,value:r,disabled:i,textValue:m,children:n.jsx(Xe.div,{role:"option","aria-labelledby":v,"data-highlighted":u?"":void 0,"aria-selected":f&&u,"data-state":f?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:Me(o.onFocus,()=>p(!0)),onBlur:Me(o.onBlur,()=>p(!1)),onClick:Me(o.onClick,()=>{w.current!=="mouse"&&y()}),onPointerUp:Me(o.onPointerUp,()=>{w.current==="mouse"&&y()}),onPointerDown:Me(o.onPointerDown,b=>{w.current=b.pointerType}),onPointerMove:Me(o.onPointerMove,b=>{var _;w.current=b.pointerType,i?(_=d.onItemLeave)==null||_.call(d):w.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Me(o.onPointerLeave,b=>{var _;b.currentTarget===document.activeElement&&((_=d.onItemLeave)==null||_.call(d))}),onKeyDown:Me(o.onKeyDown,b=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&b.key===" "||(tG.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});w4.displayName=wm;var Dd="SelectItemText",j4=j.forwardRef((e,t)=>{const{__scopeSelect:s,className:r,style:i,...a}=e,o=ro(Dd,s),c=io(Dd,s),d=b4(Dd,s),f=iG(Dd,s),[m,h]=j.useState(null),u=ft(t,y=>h(y),d.onItemTextChange,y=>{var b;return(b=c.itemTextRefCallback)==null?void 0:b.call(c,y,d.value,d.disabled)}),p=m==null?void 0:m.textContent,x=j.useMemo(()=>n.jsx("option",{value:d.value,disabled:d.disabled,children:p},d.value),[d.disabled,d.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:w}=f;return kn(()=>(v(x),()=>w(x)),[v,w,x]),n.jsxs(n.Fragment,{children:[n.jsx(Xe.span,{id:d.textId,...a,ref:u}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?eo.createPortal(a.children,o.valueNode):null]})});j4.displayName=Dd;var _4="SelectItemIndicator",N4=j.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e;return b4(_4,s).isSelected?n.jsx(Xe.span,{"aria-hidden":!0,...r,ref:t}):null});N4.displayName=_4;var Ey="SelectScrollUpButton",S4=j.forwardRef((e,t)=>{const s=io(Ey,e.__scopeSelect),r=Dw(Ey,e.__scopeSelect),[i,a]=j.useState(!1),o=ft(t,r.onScrollButtonChange);return kn(()=>{if(s.viewport&&s.isPositioned){let c=function(){const f=d.scrollTop>0;a(f)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),i?n.jsx(C4,{...e,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});S4.displayName=Ey;var Ty="SelectScrollDownButton",k4=j.forwardRef((e,t)=>{const s=io(Ty,e.__scopeSelect),r=Dw(Ty,e.__scopeSelect),[i,a]=j.useState(!1),o=ft(t,r.onScrollButtonChange);return kn(()=>{if(s.viewport&&s.isPositioned){let c=function(){const f=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<f;a(m)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),i?n.jsx(C4,{...e,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});k4.displayName=Ty;var C4=j.forwardRef((e,t)=>{const{__scopeSelect:s,onAutoScroll:r,...i}=e,a=io("SelectScrollButton",s),o=j.useRef(null),c=zp(s),d=j.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return j.useEffect(()=>()=>d(),[d]),kn(()=>{var m;const f=c().find(h=>h.ref.current===document.activeElement);(m=f==null?void 0:f.ref.current)==null||m.scrollIntoView({block:"nearest"})},[c]),n.jsx(Xe.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Me(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Me(i.onPointerMove,()=>{var f;(f=a.onItemLeave)==null||f.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Me(i.onPointerLeave,()=>{d()})})}),vG="SelectSeparator",P4=j.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e;return n.jsx(Xe.div,{"aria-hidden":!0,...r,ref:t})});P4.displayName=vG;var Ay="SelectArrow",xG=j.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,i=Bp(s),a=ro(Ay,s),o=io(Ay,s);return a.open&&o.position==="popper"?n.jsx(Nb,{...i,...r,ref:t}):null});xG.displayName=Ay;var yG="SelectBubbleInput",E4=j.forwardRef(({__scopeSelect:e,value:t,...s},r)=>{const i=j.useRef(null),a=ft(r,i),o=Ap(t);return j.useEffect(()=>{const c=i.current;if(!c)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&m){const h=new Event("change",{bubbles:!0});m.call(c,t),c.dispatchEvent(h)}},[o,t]),n.jsx(Xe.select,{...s,style:{...QC,...s.style},ref:a,defaultValue:t})});E4.displayName=yG;function T4(e){return e===""||e===void 0}function A4(e){const t=vn(e),s=j.useRef(""),r=j.useRef(0),i=j.useCallback(o=>{const c=s.current+o;t(c),function d(f){s.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(c)},[t]),a=j.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,i,a]}function O4(e,t,s){const i=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let o=bG(e,Math.max(a,0));i.length===1&&(o=o.filter(f=>f!==s));const d=o.find(f=>f.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==s?d:void 0}function bG(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var wG=i4,R4=o4,jG=c4,_G=d4,NG=u4,L4=h4,SG=g4,M4=y4,I4=w4,kG=j4,CG=N4,D4=S4,F4=k4,$4=P4;const Vt=wG,Ut=jG,$t=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(R4,{ref:r,className:Ze("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,n.jsx(_G,{asChild:!0,children:n.jsx(_P,{className:"h-4 w-4 opacity-50"})})]}));$t.displayName=R4.displayName;const z4=j.forwardRef(({className:e,...t},s)=>n.jsx(D4,{ref:s,className:Ze("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(RD,{className:"h-4 w-4"})}));z4.displayName=D4.displayName;const B4=j.forwardRef(({className:e,...t},s)=>n.jsx(F4,{ref:s,className:Ze("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(_P,{className:"h-4 w-4"})}));B4.displayName=F4.displayName;const zt=j.forwardRef(({className:e,children:t,position:s="popper",...r},i)=>n.jsx(NG,{children:n.jsxs(L4,{ref:i,className:Ze("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[n.jsx(z4,{}),n.jsx(SG,{className:Ze("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(B4,{})]})}));zt.displayName=L4.displayName;const PG=j.forwardRef(({className:e,...t},s)=>n.jsx(M4,{ref:s,className:Ze("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));PG.displayName=M4.displayName;const qe=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(I4,{ref:r,className:Ze("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(CG,{children:n.jsx(ip,{className:"h-4 w-4"})})}),n.jsx(kG,{children:t})]}));qe.displayName=I4.displayName;const EG=j.forwardRef(({className:e,...t},s)=>n.jsx($4,{ref:s,className:Ze("-mx-1 my-1 h-px bg-muted",e),...t}));EG.displayName=$4.displayName;function TG(e,t){return j.useReducer((s,r)=>t[s][r]??s,e)}var Fw="ScrollArea",[V4,rre]=ds(Fw),[AG,vr]=V4(Fw),U4=j.forwardRef((e,t)=>{const{__scopeScrollArea:s,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=e,[c,d]=j.useState(null),[f,m]=j.useState(null),[h,u]=j.useState(null),[p,x]=j.useState(null),[v,w]=j.useState(null),[y,b]=j.useState(0),[_,N]=j.useState(0),[k,I]=j.useState(!1),[C,T]=j.useState(!1),M=ft(t,E=>d(E)),P=Uc(i);return n.jsx(AG,{scope:s,type:r,dir:P,scrollHideDelay:a,scrollArea:c,viewport:f,onViewportChange:m,content:h,onContentChange:u,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:k,onScrollbarXEnabledChange:I,scrollbarY:v,onScrollbarYChange:w,scrollbarYEnabled:C,onScrollbarYEnabledChange:T,onCornerWidthChange:b,onCornerHeightChange:N,children:n.jsx(Xe.div,{dir:P,...o,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});U4.displayName=Fw;var q4="ScrollAreaViewport",H4=j.forwardRef((e,t)=>{const{__scopeScrollArea:s,children:r,nonce:i,...a}=e,o=vr(q4,s),c=j.useRef(null),d=ft(t,c,o.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),n.jsx(Xe.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});H4.displayName=q4;var ki="ScrollAreaScrollbar",$w=j.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=vr(ki,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,c=e.orientation==="horizontal";return j.useEffect(()=>(c?a(!0):o(!0),()=>{c?a(!1):o(!1)}),[c,a,o]),i.type==="hover"?n.jsx(OG,{...r,ref:t,forceMount:s}):i.type==="scroll"?n.jsx(RG,{...r,ref:t,forceMount:s}):i.type==="auto"?n.jsx(W4,{...r,ref:t,forceMount:s}):i.type==="always"?n.jsx(zw,{...r,ref:t}):null});$w.displayName=ki;var OG=j.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=vr(ki,e.__scopeScrollArea),[a,o]=j.useState(!1);return j.useEffect(()=>{const c=i.scrollArea;let d=0;if(c){const f=()=>{window.clearTimeout(d),o(!0)},m=()=>{d=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",m)}}},[i.scrollArea,i.scrollHideDelay]),n.jsx(Jn,{present:s||a,children:n.jsx(W4,{"data-state":a?"visible":"hidden",...r,ref:t})})}),RG=j.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=vr(ki,e.__scopeScrollArea),a=e.orientation==="horizontal",o=Up(()=>d("SCROLL_END"),100),[c,d]=TG("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return j.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,i.scrollHideDelay,d]),j.useEffect(()=>{const f=i.viewport,m=a?"scrollLeft":"scrollTop";if(f){let h=f[m];const u=()=>{const p=f[m];h!==p&&(d("SCROLL"),o()),h=p};return f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[i.viewport,a,d,o]),n.jsx(Jn,{present:s||c!=="hidden",children:n.jsx(zw,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Me(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Me(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),W4=j.forwardRef((e,t)=>{const s=vr(ki,e.__scopeScrollArea),{forceMount:r,...i}=e,[a,o]=j.useState(!1),c=e.orientation==="horizontal",d=Up(()=>{if(s.viewport){const f=s.viewport.offsetWidth<s.viewport.scrollWidth,m=s.viewport.offsetHeight<s.viewport.scrollHeight;o(c?f:m)}},10);return Sc(s.viewport,d),Sc(s.content,d),n.jsx(Jn,{present:r||a,children:n.jsx(zw,{"data-state":a?"visible":"hidden",...i,ref:t})})}),zw=j.forwardRef((e,t)=>{const{orientation:s="vertical",...r}=e,i=vr(ki,e.__scopeScrollArea),a=j.useRef(null),o=j.useRef(0),[c,d]=j.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=X4(c.viewport,c.content),m={...r,sizes:c,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:u=>a.current=u,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:u=>o.current=u};function h(u,p){return $G(u,o.current,c,p)}return s==="horizontal"?n.jsx(LG,{...m,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const u=i.viewport.scrollLeft,p=ES(u,c,i.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:u=>{i.viewport&&(i.viewport.scrollLeft=u)},onDragScroll:u=>{i.viewport&&(i.viewport.scrollLeft=h(u,i.dir))}}):s==="vertical"?n.jsx(MG,{...m,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const u=i.viewport.scrollTop,p=ES(u,c);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:u=>{i.viewport&&(i.viewport.scrollTop=u)},onDragScroll:u=>{i.viewport&&(i.viewport.scrollTop=h(u))}}):null}),LG=j.forwardRef((e,t)=>{const{sizes:s,onSizesChange:r,...i}=e,a=vr(ki,e.__scopeScrollArea),[o,c]=j.useState(),d=j.useRef(null),f=ft(t,d,a.onScrollbarXChange);return j.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),n.jsx(G4,{"data-orientation":"horizontal",...i,ref:f,sizes:s,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Vp(s)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,h)=>{if(a.viewport){const u=a.viewport.scrollLeft+m.deltaX;e.onWheelScroll(u),J4(u,h)&&m.preventDefault()}},onResize:()=>{d.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:_m(o.paddingLeft),paddingEnd:_m(o.paddingRight)}})}})}),MG=j.forwardRef((e,t)=>{const{sizes:s,onSizesChange:r,...i}=e,a=vr(ki,e.__scopeScrollArea),[o,c]=j.useState(),d=j.useRef(null),f=ft(t,d,a.onScrollbarYChange);return j.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),n.jsx(G4,{"data-orientation":"vertical",...i,ref:f,sizes:s,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Vp(s)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,h)=>{if(a.viewport){const u=a.viewport.scrollTop+m.deltaY;e.onWheelScroll(u),J4(u,h)&&m.preventDefault()}},onResize:()=>{d.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:_m(o.paddingTop),paddingEnd:_m(o.paddingBottom)}})}})}),[IG,Z4]=V4(ki),G4=j.forwardRef((e,t)=>{const{__scopeScrollArea:s,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:m,onResize:h,...u}=e,p=vr(ki,s),[x,v]=j.useState(null),w=ft(t,M=>v(M)),y=j.useRef(null),b=j.useRef(""),_=p.viewport,N=r.content-r.viewport,k=vn(m),I=vn(d),C=Up(h,10);function T(M){if(y.current){const P=M.clientX-y.current.left,E=M.clientY-y.current.top;f({x:P,y:E})}}return j.useEffect(()=>{const M=P=>{const E=P.target;(x==null?void 0:x.contains(E))&&k(P,N)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[_,x,N,k]),j.useEffect(I,[r,I]),Sc(x,C),Sc(p.content,C),n.jsx(IG,{scope:s,scrollbar:x,hasThumb:i,onThumbChange:vn(a),onThumbPointerUp:vn(o),onThumbPositionChange:I,onThumbPointerDown:vn(c),children:n.jsx(Xe.div,{...u,ref:w,style:{position:"absolute",...u.style},onPointerDown:Me(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),y.current=x.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),T(M))}),onPointerMove:Me(e.onPointerMove,T),onPointerUp:Me(e.onPointerUp,M=>{const P=M.target;P.hasPointerCapture(M.pointerId)&&P.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),jm="ScrollAreaThumb",K4=j.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=Z4(jm,e.__scopeScrollArea);return n.jsx(Jn,{present:s||i.hasThumb,children:n.jsx(DG,{ref:t,...r})})}),DG=j.forwardRef((e,t)=>{const{__scopeScrollArea:s,style:r,...i}=e,a=vr(jm,s),o=Z4(jm,s),{onThumbPositionChange:c}=o,d=ft(t,h=>o.onThumbChange(h)),f=j.useRef(void 0),m=Up(()=>{f.current&&(f.current(),f.current=void 0)},100);return j.useEffect(()=>{const h=a.viewport;if(h){const u=()=>{if(m(),!f.current){const p=zG(h,c);f.current=p,c()}};return c(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[a.viewport,m,c]),n.jsx(Xe.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Me(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),x=h.clientX-p.left,v=h.clientY-p.top;o.onThumbPointerDown({x,y:v})}),onPointerUp:Me(e.onPointerUp,o.onThumbPointerUp)})});K4.displayName=jm;var Bw="ScrollAreaCorner",Y4=j.forwardRef((e,t)=>{const s=vr(Bw,e.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&r?n.jsx(FG,{...e,ref:t}):null});Y4.displayName=Bw;var FG=j.forwardRef((e,t)=>{const{__scopeScrollArea:s,...r}=e,i=vr(Bw,s),[a,o]=j.useState(0),[c,d]=j.useState(0),f=!!(a&&c);return Sc(i.scrollbarX,()=>{var h;const m=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(m),d(m)}),Sc(i.scrollbarY,()=>{var h;const m=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(m),o(m)}),f?n.jsx(Xe.div,{...r,ref:t,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function _m(e){return e?parseInt(e,10):0}function X4(e,t){const s=e/t;return isNaN(s)?0:s}function Vp(e){const t=X4(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-s)*t;return Math.max(r,18)}function $G(e,t,s,r="ltr"){const i=Vp(s),a=i/2,o=t||a,c=i-o,d=s.scrollbar.paddingStart+o,f=s.scrollbar.size-s.scrollbar.paddingEnd-c,m=s.content-s.viewport,h=r==="ltr"?[0,m]:[m*-1,0];return Q4([d,f],h)(e)}function ES(e,t,s="ltr"){const r=Vp(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,c=a-r,d=s==="ltr"?[0,o]:[o*-1,0],f=ky(e,d);return Q4([0,o],[0,c])(f)}function Q4(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}function J4(e,t){return e>0&&e<t}var zG=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=s.left!==a.left,c=s.top!==a.top;(o||c)&&t(),s=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Up(e,t){const s=vn(e),r=j.useRef(0);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),j.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function Sc(e,t){const s=vn(t);kn(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(s)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,s])}var eL=U4,BG=H4,VG=Y4;const Vw=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(eL,{ref:r,className:Ze("relative overflow-hidden",e),...s,children:[n.jsx(BG,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(tL,{}),n.jsx(VG,{})]}));Vw.displayName=eL.displayName;const tL=j.forwardRef(({className:e,orientation:t="vertical",...s},r)=>n.jsx($w,{ref:r,orientation:t,className:Ze("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:n.jsx(K4,{className:"relative flex-1 rounded-full bg-border"})}));tL.displayName=$w.displayName;class UG{constructor(){zn(this,"fcmToken",null)}async initialize(){if(vt.isNativePlatform())try{const{PushNotifications:t}=await We(async()=>{const{PushNotifications:i}=await Promise.resolve().then(()=>KL);return{PushNotifications:i}},void 0),{App:s}=await We(async()=>{const{App:i}=await import("./index-9w_XsrYV.js");return{App:i}},[]);if((await t.requestPermissions()).receive!=="granted"){console.warn("Push notification permission denied");return}await t.register(),t.addListener("registration",i=>{console.log(" FCM Token:",i.value),this.fcmToken=i.value,this.sendTokenToBackend(i.value)}),t.addListener("pushNotificationReceived",i=>{var a;console.log(" Push received:",i),(a=i.data)!=null&&a.orderId&&window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(i.data.orderId),orderNumber:i.data.orderNumber,amount:i.data.amount,fromPush:!0}}))}),t.addListener("pushNotificationActionPerformed",i=>{var o;console.log(" Push notification tapped - app opening:",i);const a=(o=i.notification.data)==null?void 0:o.orderId;a&&(window.location.href="/vendor/home",setTimeout(()=>{var c,d;window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(a),orderNumber:(c=i.notification.data)==null?void 0:c.orderNumber,amount:(d=i.notification.data)==null?void 0:d.amount,autoOpened:!0,fromPush:!0}}))},1500))}),s.addListener("appStateChange",({isActive:i})=>{i&&(console.log(" App resumed from push notification"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))}),console.log(" Real push notifications initialized")}catch(t){console.error(" Push notifications setup failed:",t)}}async sendTokenToBackend(t){try{(await fetch("/api/vendor/fcm-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fcmToken:t,vendorId:localStorage.getItem("vendor_id")})})).ok&&console.log(" FCM token sent to backend")}catch(s){console.warn("Failed to send FCM token:",s)}}getFCMToken(){return this.fcmToken}}const qG=new UG;class HG{constructor(){zn(this,"persistentIntervals",new Map);this.setupNotificationHandlers(),this.initializePushNotifications()}async initializePushNotifications(){vt.isNativePlatform()&&await qG.initialize()}async setupNotificationHandlers(){if(vt.isNativePlatform())try{const{LocalNotifications:t}=await We(async()=>{const{LocalNotifications:r}=await import("./index--sWbVhQe.js");return{LocalNotifications:r}},[]),{App:s}=await We(async()=>{const{App:r}=await import("./index-9w_XsrYV.js");return{App:r}},[]);t.addListener("localNotificationActionPerformed",async r=>{var i;console.log(" NOTIFICATION TAPPED - AUTO OPENING APP:",r);try{const{App:a}=await We(async()=>{const{App:d}=await import("./index-9w_XsrYV.js");return{App:d}},[]),o=await a.getState();if(console.log(" Current app state:",o),!o.isActive){console.log(" App was in background - bringing to foreground"),window.focus(),document.body.click();try{await a.minimizeApp(),setTimeout(()=>{window.focus()},100)}catch{console.log("Minimize/restore not available")}}const c=parseInt(((i=r.notification.extra)==null?void 0:i.orderId)||"0");c&&(console.log(" Opening order:",c),window.location.href="/vendor/home",setTimeout(()=>{var d,f;window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:c,orderNumber:(d=r.notification.extra)==null?void 0:d.orderNumber,amount:(f=r.notification.extra)==null?void 0:f.amount,autoOpened:!0,fromNotification:!0}}))},1500))}catch(a){console.error(" Failed to open app:",a),window.location.href="/vendor/home"}}),s.addListener("appStateChange",({isActive:r})=>{r&&(console.log(" App resumed - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))})}catch(t){console.warn("Could not setup notification handlers:",t)}}async showOrderNotification(t,s,r){console.log(" Using FCM push notifications for order:",t);const{pushNotificationService:i}=await We(async()=>{const{pushNotificationService:a}=await import("./pushNotificationService-BhGuI9WX.js");return{pushNotificationService:a}},[]);await i.showOrderNotification(t,s,r),this.playBeepSound(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:s}}))}async requestBackendPushNotification(t,s,r){try{(await fetch("/api/vendor/send-order-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendorId:localStorage.getItem("vendor_id"),orderId:r,orderNumber:t,amount:s,title:" NEW ORDER RECEIVED",body:`Order #${t} - ${s}`,data:{orderId:r.toString(),orderNumber:t,amount:s,action:"openOrder"}})})).ok?console.log(" Backend push notification requested"):console.warn(" Backend push notification failed")}catch(i){console.warn("Backend push notification error:",i)}}async showPushNotification(t,s,r){try{console.log(" Simulating push notification for auto-opening")}catch(i){console.warn("Push notification failed, using local fallback:",i)}}async showLocalNotification(t,s,r){try{const{LocalNotifications:i}=await We(async()=>{const{LocalNotifications:o}=await import("./index--sWbVhQe.js");return{LocalNotifications:o}},[]);if((await i.requestPermissions()).display!=="granted"){console.warn("Notification permission not granted");return}await i.schedule({notifications:[{title:" NEW ORDER - TAP TO OPEN APP",body:`Order #${t} - ${s}
 TAP HERE TO OPEN`,id:r,schedule:{at:new Date(Date.now()+100)},sound:"default",attachments:void 0,actionTypeId:"OPEN_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF0000",channelId:"order-alerts",summaryText:"Tap to open app",extra:{orderId:r.toString(),orderNumber:t,amount:s,autoOpen:!0,action:"openApp",deepLink:"vendor://order/"+r}}]}),console.log(" Local notification scheduled for order:",r)}catch(i){console.warn("Local notifications not available:",i)}}showWebNotification(t,s,r){if("Notification"in window&&Notification.permission==="granted"){const i=new Notification(" New Order!",{body:`Order #${t} - ${s}`,icon:"/favicon.ico",tag:`order-${r}`,requireInteraction:!0});i.onclick=()=>{window.focus(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:s}})),i.close()},setTimeout(()=>i.close(),3e4)}}startPersistentAlert(t,s,r){this.stopPersistentAlert(r);const i=setInterval(()=>{console.log(" Persistent alert for order:",t),"vibrate"in navigator&&navigator.vibrate([1e3,300,1e3,300,1e3]),this.playMobileSound()},5e3);this.persistentIntervals.set(r,i),setTimeout(()=>{this.stopPersistentAlert(r)},3e5)}stopPersistentAlert(t){const s=this.persistentIntervals.get(t);s&&(clearInterval(s),this.persistentIntervals.delete(t),console.log(" Stopped persistent alert for order:",t))}async clearNotification(t){if(this.stopPersistentAlert(t),vt.isNativePlatform())try{const{LocalNotifications:s}=await We(async()=>{const{LocalNotifications:r}=await import("./index--sWbVhQe.js");return{LocalNotifications:r}},[]);await s.cancel({notifications:[{id:t}]}),console.log(" Cleared background notification for order:",t)}catch(s){console.warn("Could not clear notification:",s)}}async requestPermissions(){if(vt.isNativePlatform())try{const{LocalNotifications:t}=await We(async()=>{const{LocalNotifications:r}=await import("./index--sWbVhQe.js");return{LocalNotifications:r}},[]),s=await t.requestPermissions();console.log(" Notification permissions:",s);try{await t.createChannel({id:"order-alerts",name:"Order Alerts",description:"High priority notifications for new orders",sound:"default",importance:5,visibility:1,lights:!0,vibration:!0}),console.log(" High priority notification channel created")}catch(r){console.warn("Could not create notification channel:",r)}return s.display==="granted"}catch(t){return console.warn("Local notifications not available:",t),!1}return"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":"Notification"in window&&Notification.permission==="granted"}playBeepSound(){try{const t=new(window.AudioContext||window.webkitAudioContext),s=t.createOscillator(),r=t.createGain();s.connect(r),r.connect(t.destination),s.frequency.value=800,s.type="square",r.gain.setValueAtTime(.3,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.3),s.start(t.currentTime),s.stop(t.currentTime+.3),console.log(" Beep sound played")}catch(t){console.warn("Audio not available:",t)}}playMobileSound(){try{const t=new(window.AudioContext||window.webkitAudioContext);for(let s=0;s<3;s++)setTimeout(()=>{const r=t.createOscillator(),i=t.createGain();r.connect(i),i.connect(t.destination),r.frequency.value=1e3+s*200,r.type="sine",i.gain.setValueAtTime(.5,t.currentTime),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),r.start(t.currentTime),r.stop(t.currentTime+.2)},s*300);console.log(" Mobile sound sequence played")}catch(t){console.warn("Mobile audio not available:",t)}}}const $l=new HG,Rv=Object.freeze(Object.defineProperty({__proto__:null,simpleNotificationService:$l},Symbol.toStringTag,{value:"Module"}));function qp(){const[e,t]=j.useState([]),[s,r]=j.useState(!1),[i,a]=j.useState(0),o=j.useRef(null),c=j.useRef(null);j.useRef(0),j.useEffect(()=>{$l.requestPermissions()},[]);const d=async()=>{let p=await ke.getToken();if(p||(p=localStorage.getItem("token")),!p){console.warn("No authentication token found for WebSocket connection");return}const x=window.location.href;if(x.includes("ngrok")||x.includes("ngrok-free.app")){console.log("Ngrok detected - using HTTP polling instead of WebSocket"),f();return}console.log("Using HTTP polling for notifications"),f()},f=()=>{r(!0),console.log("Notification polling disabled")};return j.useEffect(()=>((async()=>{setTimeout(async()=>{await d()},1e3)})(),()=>{c.current&&clearInterval(c.current),o.current&&o.current.close(1e3,"Component unmounting")}),[]),j.useEffect(()=>{console.log("Initial notification fetch disabled")},[]),{notifications:e,unreadCount:i,isConnected:s,markAsRead:async p=>{console.log("Mark as read:",p),a(x=>Math.max(0,x-1))},markAllAsRead:async()=>{console.log("Mark all as read"),a(0)},clearNotifications:()=>{t([]),a(0)}}}function WG({className:e=""}){nt();const{navigateWithAuth:t}=Vc(),{notifications:s,unreadCount:r,markAsRead:i,markAllAsRead:a,clearNotifications:o,isConnected:c}=qp(),[d,f]=j.useState(!1),m=x=>{switch(x){case"order":return n.jsx(At,{className:"h-4 w-4 text-blue-600"});case"payment":return n.jsx(to,{className:"h-4 w-4 text-green-600"});case"system":return n.jsx(Nu,{className:"h-4 w-4 text-orange-600"});default:return n.jsx(lr,{className:"h-4 w-4 text-gray-600"})}},h=x=>{switch(x){case"order":return"border-l-blue-500 bg-blue-50";case"payment":return"border-l-green-500 bg-green-50";case"system":return"border-l-orange-500 bg-orange-50";default:return"border-l-gray-500 bg-gray-50"}},u=x=>{x.read||i(x.id),x.action_url&&(t(x.action_url),f(!1))},p=x=>{const v=new Date(x),y=Math.floor((new Date().getTime()-v.getTime())/(1e3*60));return y<1?"Just now":y<60?`${y}m ago`:y<1440?`${Math.floor(y/60)}h ago`:v.toLocaleDateString()};return n.jsxs(Rs,{open:d,onOpenChange:f,children:[n.jsx(YZ,{asChild:!0,children:n.jsxs(ne,{variant:"ghost",size:"sm",className:`relative p-2 hover:bg-gray-100 rounded-full ${e}`,children:[n.jsx(lr,{className:`h-5 w-5 ${c?"text-gray-700":"text-gray-400"}`}),r>0&&n.jsx(De,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:r>99?"99+":r}),!c&&n.jsx("div",{className:"absolute -bottom-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})]})}),n.jsxs(xs,{side:"right",className:"w-full sm:w-96",children:[n.jsxs(ys,{className:"pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(bs,{className:"flex items-center gap-2",children:[n.jsx(lr,{className:"h-5 w-5"}),"Notifications",r>0&&n.jsxs(De,{variant:"secondary",className:"ml-2",children:[r," new"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!c&&n.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[n.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full animate-pulse"}),"Offline"]}),s.length>0&&n.jsx(ne,{variant:"ghost",size:"sm",onClick:o,className:"text-xs",children:"Clear All"})]})]}),r>0&&n.jsxs(ne,{variant:"outline",size:"sm",onClick:a,className:"w-full",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Mark All as Read"]})]}),n.jsx(Vw,{className:"h-[calc(100vh-120px)]",children:s.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx(lr,{className:"h-12 w-12 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),n.jsx("p",{className:"text-sm text-gray-500",children:"You're all caught up! New notifications will appear here."})]}):n.jsx("div",{className:"space-y-2",children:s.map(x=>n.jsx("div",{onClick:()=>u(x),className:`
                    p-4 rounded-lg border-l-4 cursor-pointer transition-all hover:shadow-md
                    ${h(x.type)}
                    ${x.read?"opacity-75":"ring-2 ring-blue-100"}
                  `,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-1",children:m(x.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:x.title}),!x.read&&n.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full flex-shrink-0 ml-2"})]}),n.jsx("p",{className:"text-sm text-gray-700 mb-2 line-clamp-2",children:x.message}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[n.jsx(dr,{className:"h-3 w-3"}),p(x.timestamp||new Date().toISOString())]}),x.action_url&&n.jsx(ne,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-blue-600 hover:text-blue-800",onClick:v=>{v.stopPropagation(),u(x)},children:"View"})]})]})]})},x.id))})}),n.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:n.jsxs("div",{className:`
            flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-xs
            ${c?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}
          `,children:[n.jsx("div",{className:`h-2 w-2 rounded-full ${c?"bg-green-500":"bg-red-500 animate-pulse"}`}),c?"Connected to notification service":"Reconnecting..."]})})]})]})}function ZG({children:e,redirectTo:t="/login"}){const[s,r]=j.useState(!0),[i,a]=j.useState(!1),o=nt(),{state:c}=Fs();j.useEffect(()=>{d()},[c.user]);const d=async()=>{var f,m;try{const h=c.user;if(h){if(!((f=h.available_roles)!=null&&f.includes("customer"))){console.log("CustomerAuthGuard: Customer role not available"),o("/access-denied");return}console.log("CustomerAuthGuard: Access granted for user:",h.user_type),a(!0);return}if(!await ke.isAuthenticated()){console.log("CustomerAuthGuard: Not authenticated, redirecting to login"),o(t);return}const p=await ke.getUser();if(!p){console.log("CustomerAuthGuard: No user data, redirecting to login"),o(t);return}if(!((m=p.available_roles)!=null&&m.includes("customer"))){console.log("CustomerAuthGuard: Customer role not available"),o("/access-denied");return}console.log("CustomerAuthGuard: Access granted for user:",p.user_type),a(!0)}catch(h){console.error("Customer auth guard error:",h),o(t)}finally{r(!1)}};return s?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i?n.jsx(n.Fragment,{children:e}):null}function GG(){var Ft,zs;const e=nt(),{toast:t}=hn(),{navigateWithAuth:s}=Vc(),[r,i]=j.useState([]),[a,o]=j.useState(!0),[c,d]=j.useState("all"),[f,m]=j.useState(""),[h,u]=j.useState(""),[p,x]=j.useState(!1),[v,w]=j.useState(null),[y,b]=j.useState({}),[_,N]=j.useState(!1),[k,I]=j.useState(null),[C,T]=j.useState(0),[M,P]=j.useState(""),[E,A]=j.useState(!1),[z,O]=j.useState(!1),[$,G]=j.useState(null),[X,Y]=j.useState(""),[U,V]=j.useState(""),[R,F]=j.useState(""),[q,W]=j.useState(""),[K,B]=j.useState(""),[Z,se]=j.useState(""),[J,ie]=j.useState(""),[le,Q]=j.useState(""),[ue,_e]=j.useState([]),[me,Se]=j.useState(!1),[xe,he]=j.useState(null),[pe,te]=j.useState(!1),[ae,oe]=j.useState("");qp(),j.useEffect(()=>{be();const ce=Je=>{Je.detail.type==="order"&&be()};window.addEventListener("newNotification",ce);const $e=setInterval(async()=>{try{if(!await ke.getToken())return;const ze=await tu.getOrders();i(ze)}catch(Je){console.error("Auto-refresh error:",Je)}},3e4);return()=>{window.removeEventListener("newNotification",ce),clearInterval($e)}},[]);const be=async()=>{var ce,$e,Je;try{if(!await ke.getToken()){s("/orders");return}const He=await tu.getOrders();i(He);const Ge={};for(const Bt of He){const Et=(Je=($e=(ce=Bt.items)==null?void 0:ce[0])==null?void 0:$e.product_details)==null?void 0:Je.vendor_name;Et&&!Ge[Et]&&(Ge[Et]=await Ae(Et))}b(Ge)}catch(ze){console.error("Error fetching orders:",ze),t({title:"Error",description:ze.message||"Failed to load orders",variant:"destructive"})}finally{o(!1)}},je=ce=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",out_for_delivery:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[ce]||"bg-gray-100 text-gray-800",we=ce=>({pending:"Order Placed",confirmed:"Confirmed",preparing:"Preparing",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"})[ce]||ce,re=ce=>ce==="all"?r:r.filter($e=>$e.status===ce),Pe=async()=>{if(!f.trim()){t({title:"Reason Required",description:"Please provide a valid reason for cancellation",variant:"destructive"});return}try{await tu.cancelOrder(v,f),t({title:"Order Cancelled",description:"Your order has been cancelled successfully."}),x(!1),m(""),u(""),be()}catch(ce){console.error("Error cancelling order:",ce),t({title:"Cancellation Failed",description:ce.message||"Failed to cancel order",variant:"destructive"})}},Ae=async ce=>{var $e;try{const{response:Je,data:ze}=await Ie(`search/vendors/?search=${encodeURIComponent(ce)}`);if(!Je.ok)return!1;const He=($e=ze==null?void 0:ze.results)==null?void 0:$e.find(Ge=>Ge.business_name===ce);return(He==null?void 0:He.is_active)||!1}catch(Je){return console.error("Error checking vendor status:",Je),!1}},lt=async ce=>{var $e,Je,ze;try{const He=(ze=(Je=($e=ce.items)==null?void 0:$e[0])==null?void 0:Je.product_details)==null?void 0:ze.vendor_name;if(He&&!await Ae(He)){t({title:"Vendor Offline",description:"This vendor is currently offline. Cannot reorder at this time.",variant:"destructive"});return}for(const Ge of ce.items);t({title:"Items Added",description:"Order items added to cart"}),e("/cart")}catch{t({title:"Reorder Failed",description:"Failed to add items to cart",variant:"destructive"})}},it=({order:ce})=>{var $e,Je,ze,He,Ge,Bt,Et,Cn,ks,Ln,Ci,at;return n.jsxs(Te,{className:"cursor-pointer hover:shadow-md transition-shadow mb-4",onClick:()=>{he(ce),Se(!0)},children:[n.jsx(wt,{className:"pb-3",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsxs(jt,{className:"text-lg",children:["Order #",ce.order_number]}),n.jsx("p",{className:"text-sm text-gray-600",children:new Date(ce.created_at).toLocaleDateString()})]}),n.jsx(De,{className:`${je(ce.status)} px-3 py-1`,children:we(ce.status)})]})}),n.jsx(Oe,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2",children:[($e=ce.items)==null?void 0:$e.length," item",((Je=ce.items)==null?void 0:Je.length)!==1?"s":""]}),n.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[(ze=ce.items)==null?void 0:ze.slice(0,3).map(et=>{var St,sn,rn,Pn;return n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("img",{src:ls((rn=(sn=(St=et.product_details)==null?void 0:St.images)==null?void 0:sn[0])==null?void 0:rn.image_url),alt:et.product_name,className:"w-12 h-12 object-cover rounded-lg border"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:et.product_name}),n.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:(Pn=et.product_details)==null?void 0:Pn.category})]})]},et.id)}),((He=ce.items)==null?void 0:He.length)>3&&n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center flex-shrink-0",children:n.jsxs("span",{className:"text-xs text-gray-600",children:["+",ce.items.length-3]})})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[n.jsx(gs,{className:"h-4 w-4"}),n.jsx("button",{onClick:et=>{var sn,rn,Pn;et.stopPropagation();const St=(Pn=(rn=(sn=ce.items)==null?void 0:sn[0])==null?void 0:rn.product_details)==null?void 0:Pn.vendor_id;St&&e(`/vendor/${St}`)},className:"text-blue-600 hover:underline text-xs font-medium truncate",children:((Et=(Bt=(Ge=ce.items)==null?void 0:Ge[0])==null?void 0:Bt.product_details)==null?void 0:Et.vendor_name)||"Vendor"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Kt,{className:"h-4 w-4"}),n.jsx("span",{className:"truncate",children:ce.delivery_address})]}),ce.status==="out_for_delivery"&&n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zl,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"font-medium text-blue-800",children:"Shipping Details"})]}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Vehicle:"})," ",ce.vehicle_number||"TBA"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Vehicle Color:"})," ",ce.vehicle_color||"N/A"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Driver Phone:"})," ",ce.delivery_boy_phone||"TBA"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"ETA:"})," ",ce.estimated_delivery_time||"TBA"]}),ce.delivery_fee>0&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Delivery Fee:"})," ",parseFloat(ce.delivery_fee).toFixed(2)]})]})]}),ce.status==="cancelled"&&ce.cancel_reason&&n.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(as,{className:"h-4 w-4 text-red-600"}),n.jsx("span",{className:"font-medium text-red-800",children:"Cancellation Reason"})]}),n.jsx("p",{className:"text-sm text-red-700",children:ce.cancel_reason}),ce.refund_status&&n.jsxs("p",{className:"text-sm text-red-600 mt-1",children:[n.jsx("span",{className:"font-medium",children:"Refund:"})," ",ce.refund_status]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[n.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(ce.total_amount).toFixed(2)]}),n.jsxs("div",{className:"flex gap-2",children:[ce.status==="out_for_delivery"&&n.jsx(ne,{variant:"outline",size:"sm",onClick:async et=>{et.stopPropagation();try{const St=await ke.getToken(),{response:sn}=await Ie(`/api/orders/${ce.id}/status/`,{method:"POST",body:JSON.stringify({status:"delivered",notes:"Marked as received by customer"})});sn.ok&&i(rn=>rn.map(Pn=>Pn.id===ce.id?{...Pn,status:"delivered",delivered_at:new Date().toISOString()}:Pn))}catch(St){console.error("Error marking as received:",St)}},className:"text-green-600 border-green-200 hover:bg-green-50",children:"Received"}),(ce.status==="cancelled"||ce.status==="pending"||ce.status==="delivered")&&y[(Ln=(ks=(Cn=ce.items)==null?void 0:Cn[0])==null?void 0:ks.product_details)==null?void 0:Ln.vendor_name]&&n.jsx(ne,{variant:"outline",size:"sm",onClick:et=>{et.stopPropagation(),lt(ce)},className:"text-green-600 border-green-200 hover:bg-green-50",children:n.jsx(ai,{className:"h-4 w-4"})}),ce.status==="pending"&&n.jsx(ne,{variant:"outline",size:"sm",onClick:et=>{et.stopPropagation(),w(ce.id),x(!0)},className:"text-red-600 border-red-200 hover:bg-red-50",children:"Cancel"}),ce.status==="delivered"&&!((Ci=ce.refunds)!=null&&Ci.some(et=>["requested","approved","rejected","appeal","processed","completed"].includes(et.status)))&&(()=>{const et=new Date(ce.delivered_at);return(new Date-et)/(1e3*60*60)<=24})()&&n.jsx(ne,{variant:"outline",size:"sm",onClick:et=>{et.stopPropagation(),G(ce),O(!0)},className:"text-orange-600 border-orange-200 hover:bg-orange-50",children:"Return"}),ce.status==="delivered"&&!((at=ce.refunds)!=null&&at.some(et=>["requested","approved","rejected","appeal","processed","completed"].includes(et.status)))&&(()=>{const et=new Date(ce.delivered_at);return(new Date-et)/(1e3*60*60)>24})()&&n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Return window expired"}),ce.status==="delivered"&&!ce.review&&n.jsx(ne,{variant:"outline",size:"sm",onClick:et=>{et.stopPropagation(),I(ce),T(0),P(""),A(!1),N(!0)},className:"text-emerald-600 border-emerald-200 hover:bg-emerald-50",children:n.jsx(dn,{className:"h-4 w-4"})}),ce.status==="delivered"&&ce.review&&n.jsx(ne,{variant:"outline",size:"sm",onClick:et=>{et.stopPropagation(),I(ce),T(ce.review.overall_rating),P(ce.review.review_text||""),A(!0),N(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Edit Review"})]})]})]})})]},ce.id)};return a?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading your orders..."})]})}):n.jsx(ZG,{children:n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:n.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:n.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Orders"}),n.jsx(WG,{})]})}),n.jsx("main",{className:"max-w-4xl mx-auto p-4 pt-2",children:r.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx(At,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No orders yet"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"Start shopping to see your orders here"}),n.jsx(ne,{onClick:()=>e("/"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Start Shopping"})]}):n.jsxs(Si,{value:c,onValueChange:d,className:"space-y-6",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(Hr,{className:"flex w-max min-w-full gap-1",children:[n.jsxs(Ct,{value:"all",className:"flex-shrink-0 px-2",children:["All ",n.jsxs("span",{className:"font-bold",children:["(",r.length,")"]})]}),n.jsxs(Ct,{value:"pending",className:"flex-shrink-0 px-2",children:["Pending ",n.jsxs("span",{className:"font-bold",children:["(",re("pending").length,")"]})]}),n.jsxs(Ct,{value:"confirmed",className:"flex-shrink-0 px-2",children:["Confirmed ",n.jsxs("span",{className:"font-bold",children:["(",re("confirmed").concat(re("preparing")).length,")"]})]}),n.jsxs(Ct,{value:"shipped",className:"flex-shrink-0 px-2",children:["Shipped ",n.jsxs("span",{className:"font-bold",children:["(",re("out_for_delivery").length,")"]})]}),n.jsxs(Ct,{value:"delivered",className:"flex-shrink-0 px-2",children:["Delivered ",n.jsxs("span",{className:"font-bold",children:["(",re("delivered").length,")"]})]}),n.jsxs(Ct,{value:"returns",className:"flex-shrink-0 px-2",children:["Returns ",n.jsxs("span",{className:"font-bold",children:["(",r.filter(ce=>{var $e;return(($e=ce.refunds)==null?void 0:$e.length)>0}).length,")"]})]}),n.jsxs(Ct,{value:"reviewed",className:"flex-shrink-0 px-2",children:["Reviewed ",n.jsxs("span",{className:"font-bold",children:["(",r.filter(ce=>ce.review).length,")"]})]}),n.jsxs(Ct,{value:"cancelled",className:"flex-shrink-0 px-2",children:["Cancelled ",n.jsxs("span",{className:"font-bold",children:["(",re("cancelled").length,")"]})]})]})}),n.jsx(dt,{value:"all",className:"space-y-4",children:r.map(ce=>n.jsx(it,{order:ce},ce.id))}),n.jsx(dt,{value:"pending",className:"space-y-4",children:re("pending").map(ce=>n.jsx(it,{order:ce},ce.id))}),n.jsx(dt,{value:"confirmed",className:"space-y-4",children:re("confirmed").concat(re("preparing")).map(ce=>n.jsx(it,{order:ce},ce.id))}),n.jsx(dt,{value:"shipped",className:"space-y-4",children:re("out_for_delivery").map(ce=>n.jsx(it,{order:ce},ce.id))}),n.jsx(dt,{value:"delivered",className:"space-y-4",children:re("delivered").map(ce=>n.jsxs("div",{children:[n.jsx(it,{order:ce}),ce.status==="delivered"&&ce.delivered_at&&n.jsx("div",{className:"mt-2 px-4 py-2 bg-gray-50 rounded text-xs text-gray-600",children:(()=>{var Ge;const $e=new Date(ce.delivered_at),He=24-(new Date-$e)/(1e3*60*60);return(Ge=ce.refunds)!=null&&Ge.some(Bt=>["requested","approved","rejected","appeal","processed","completed"].includes(Bt.status))?"Return request already submitted":He>0?`Return available for ${Math.floor(He)} hours ${Math.floor(He%1*60)} minutes`:"Return window expired (24 hours after delivery)"})()})]},ce.id))}),n.jsx(dt,{value:"returns",className:"space-y-4",children:r.filter(ce=>{var $e;return(($e=ce.refunds)==null?void 0:$e.length)>0}).length>0?r.filter(ce=>{var $e;return(($e=ce.refunds)==null?void 0:$e.length)>0}).map(ce=>{var $e,Je,ze,He;return n.jsx("div",{className:"bg-white rounded-lg border",children:n.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>{he(ce),Se(!0)},children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("h3",{className:"font-semibold text-sm text-gray-900",children:["Order #",ce.order_number]})}),n.jsxs(De,{className:"bg-orange-100 text-orange-800 flex items-center gap-1 text-xs px-2 py-1",children:[n.jsx(ai,{className:"h-3 w-3"}),"Return Request"]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(gs,{className:"h-4 w-4"}),n.jsx("span",{className:"truncate",children:((ze=(Je=($e=ce.items)==null?void 0:$e[0])==null?void 0:Je.product_details)==null?void 0:ze.vendor_name)||"Vendor"})]}),(He=ce.refunds)==null?void 0:He.map(Ge=>{var Bt;return n.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium",children:"Return Reason:"}),n.jsx(De,{className:`text-xs ${Ge.status==="requested"?"bg-yellow-100 text-yellow-800":Ge.status==="approved"?"bg-green-100 text-green-800":Ge.status==="rejected"?"bg-red-100 text-red-800":Ge.status==="appeal"?"bg-purple-100 text-purple-800":Ge.status==="processed"?"bg-blue-100 text-blue-800":Ge.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:Ge.status.charAt(0).toUpperCase()+Ge.status.slice(1)})]}),n.jsx("p",{className:"text-xs text-gray-700 capitalize",children:Ge.reason.replace("_"," ")}),Ge.customer_notes&&n.jsxs("p",{className:"text-xs text-gray-600",children:['"',Ge.customer_notes,'"']}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Amount:"})," ",Ge.requested_amount]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Method:"})," ",Ge.refund_method]}),((Bt=Ge.evidence_photos)==null?void 0:Bt.length)>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-xs font-medium mb-1",children:"Evidence Documents:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:Ge.evidence_photos.map((Et,Cn)=>{var Ci;const ks=(Ci=Et.filename)==null?void 0:Ci.match(/\.(jpg|jpeg|png|gif|webp)$/i);let Ln;return Et.filename.startsWith("http")?Ln=Et.filename:Et.filename.startsWith("/media/")?Ln=`${os.BASE_URL}${Et.filename}`:Ln=`${os.BASE_URL}/media/${Et.filename}`,n.jsxs("div",{className:"bg-blue-100 p-2 rounded text-xs cursor-pointer hover:bg-blue-200 transition-colors flex items-center gap-1",onClick:at=>{at.stopPropagation(),ks?(oe(Ln),te(!0)):window.open(Ln,"_blank")},children:[ks?n.jsx(Nn,{className:"h-3 w-3 text-blue-600"}):n.jsx(At,{className:"h-3 w-3 text-blue-600"}),n.jsx("span",{className:"text-blue-800",children:Et.filename||`Document ${Cn+1}`})]},Cn)})})]}),Ge.status==="completed"&&n.jsx("div",{className:"bg-emerald-50 border border-emerald-200 rounded p-2 mt-2",children:n.jsx("p",{className:"text-xs text-emerald-800 font-medium",children:" Refund Completed"})}),Ge.status==="processed"&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mt-2",children:n.jsx("p",{className:"text-xs text-blue-800 font-medium",children:" Money Transferred"})}),Ge.admin_notes&&n.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[n.jsx("span",{className:"font-medium",children:"Response:"})," ",Ge.admin_notes]}),Ge.status==="rejected"&&n.jsx(ne,{size:"sm",variant:"outline",className:"w-full mt-2",onClick:async Et=>{Et.stopPropagation();try{const Cn=await ke.getToken(),{response:ks}=await Ie(`/api/refunds/${Ge.id}/appeal/`,{method:"POST",body:JSON.stringify({customer_notes:"Appealing the rejection decision"})});ks.ok&&(t({title:"Appeal Submitted",description:"Your appeal has been submitted for review."}),be())}catch{t({title:"Error",description:"Failed to submit appeal.",variant:"destructive"})}},children:"Appeal Decision"})]},Ge.id)}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[n.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(ce.total_amount).toFixed(2)]}),n.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:Ge=>{Ge.stopPropagation(),he(ce),Se(!0)},children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]})]})},ce.id)}):n.jsxs("div",{className:"text-center py-16",children:[n.jsx(ai,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No returns yet"}),n.jsx("p",{className:"text-gray-500",children:"Your return requests will appear here"})]})}),n.jsx(dt,{value:"reviewed",className:"space-y-4",children:r.filter(ce=>ce.review).length>0?r.filter(ce=>ce.review).map(ce=>{var $e;return n.jsx(Te,{className:"mb-4",children:n.jsxs(Oe,{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-lg",children:["Order #",ce.order_number]}),n.jsx("p",{className:"text-sm text-gray-600",children:new Date(ce.created_at).toLocaleDateString()})]}),n.jsx(De,{className:"bg-green-100 text-green-800 px-3 py-1",children:"Reviewed"})]}),n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:"flex gap-3 overflow-x-auto",children:($e=ce.items)==null?void 0:$e.slice(0,3).map(Je=>{var ze,He,Ge,Bt;return n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("img",{src:((Ge=(He=(ze=Je.product_details)==null?void 0:ze.images)==null?void 0:He[0])==null?void 0:Ge.image_url)||"/placeholder-product.jpg",alt:Je.product_name,className:"w-12 h-12 object-cover rounded-lg border"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:Je.product_name}),n.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:(Bt=Je.product_details)==null?void 0:Bt.category})]})]},Je.id)})})}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Your Review"}),n.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(Je=>n.jsx(dn,{className:`h-4 w-4 ${Je<=ce.review.overall_rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},Je))})]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{I(ce),T(ce.review.overall_rating),P(ce.review.review_text||""),A(!0),N(!0)},className:"h-7 text-xs",children:"Edit"})]}),ce.review.review_text&&n.jsx("p",{className:"text-sm text-gray-700",children:ce.review.review_text}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed on ",new Date(ce.review.created_at).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t mt-3",children:[n.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(ce.total_amount).toFixed(2)]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{he(ce),Se(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"View Details"})]})]})},ce.id)}):n.jsxs("div",{className:"text-center py-16",children:[n.jsx(dn,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No reviews yet"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"Complete your orders and share your experience"})]})}),n.jsx(dt,{value:"cancelled",className:"space-y-4",children:re("cancelled").map(ce=>n.jsx(it,{order:ce},ce.id))})]})}),n.jsx($s,{}),n.jsx(Fo,{open:p,onOpenChange:x,children:n.jsxs(Fa,{className:"sm:max-w-md",children:[n.jsx($a,{children:n.jsx(za,{children:"Cancel Order"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"reason",children:"Reason for Cancellation *"}),n.jsxs(Vt,{value:f,onValueChange:m,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select a reason"})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"changed_mind",children:"Changed my mind"}),n.jsx(qe,{value:"found_better_price",children:"Found better price elsewhere"}),n.jsx(qe,{value:"delivery_too_long",children:"Delivery time too long"}),n.jsx(qe,{value:"ordered_by_mistake",children:"Ordered by mistake"}),n.jsx(qe,{value:"payment_issues",children:"Payment issues"}),n.jsx(qe,{value:"other",children:"Other reason"})]})]})]}),f==="other"&&n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"custom_reason",children:"Please specify"}),n.jsx(Xn,{id:"custom_reason",placeholder:"Enter your reason...",value:f,onChange:ce=>m(ce.target.value)})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"refund",children:"Refund Option *"}),n.jsxs(Vt,{value:h,onValueChange:u,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select refund method"})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"original_payment",children:"Refund to original payment method"}),n.jsx(qe,{value:"wallet",children:"Refund to wallet"}),n.jsx(qe,{value:"bank_transfer",children:"Bank transfer"})]})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(ne,{variant:"outline",onClick:()=>x(!1),className:"flex-1",children:"Keep Order"}),n.jsx(ne,{onClick:Pe,className:"flex-1 bg-red-600 hover:bg-red-700",disabled:!f||!h,children:"Cancel Order"})]})]})]})}),n.jsx(Fo,{open:_,onOpenChange:N,children:n.jsxs(Fa,{className:"sm:max-w-md",children:[n.jsx($a,{children:n.jsx(za,{children:E?"Edit Review":"Rate & Review Order"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Rating *"}),n.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,3,4,5].map(ce=>n.jsx("button",{onClick:()=>T(ce),className:`text-2xl ${ce<=C?"text-yellow-400":"text-gray-300"}`,children:""},ce))})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"review",children:"Review (Optional)"}),n.jsx(Xn,{id:"review",placeholder:"Share your experience...",value:M,onChange:ce=>P(ce.target.value),rows:3})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(ne,{variant:"outline",onClick:()=>{N(!1),T(0),P(""),A(!1)},className:"flex-1",children:"Cancel"}),n.jsx(ne,{onClick:async()=>{if(C)try{const ce=await ke.getToken(),$e="POST",{response:Je,data:ze}=await Ie(`/api/orders/${k.id}/review/`,{method:$e,body:JSON.stringify({overall_rating:C,review_text:M})});Je.ok&&ze&&(i(He=>He.map(Ge=>Ge.id===k.id?{...Ge,review:ze.review}:Ge)),N(!1),T(0),P(""),A(!1),t({title:E?"Review Updated":"Review Submitted",description:"Thank you for your feedback!"}))}catch(ce){console.error("Error submitting review:",ce),t({title:"Error",description:"Failed to submit review. Please try again.",variant:"destructive"})}},className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:!C,children:E?"Update Review":"Submit Review"})]})]})]})}),n.jsx(Rs,{open:z,onOpenChange:O,children:n.jsxs(xs,{side:"bottom",className:"h-[80vh] rounded-t-xl",children:[n.jsx(ys,{className:"pb-4",children:n.jsxs(bs,{className:"text-left flex items-center gap-2",children:[n.jsx(ai,{className:"h-5 w-5"}),"Return Order #",$==null?void 0:$.order_number]})}),n.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Return Reason *"}),n.jsxs(Vt,{value:X,onValueChange:Y,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select reason for return"})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"defective_product",children:"Defective/Damaged Product"}),n.jsx(qe,{value:"wrong_item",children:"Wrong Item Delivered"}),n.jsx(qe,{value:"quality_issue",children:"Quality Issue"}),n.jsx(qe,{value:"not_as_described",children:"Not as Described"}),n.jsx(qe,{value:"expired_product",children:"Expired Product"}),n.jsx(qe,{value:"other",children:"Other"})]})]})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Additional Notes"}),n.jsx(Xn,{placeholder:"Describe the issue in detail...",value:U,onChange:ce=>V(ce.target.value),rows:3})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Evidence Photos/Documents *"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Please provide evidence to support your return request"}),n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[n.jsx(Su,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upload photos or documents as proof"}),n.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:ce=>_e(Array.from(ce.target.files)),className:"hidden",id:"evidence-upload"}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>document.getElementById("evidence-upload").click(),className:"mt-2",children:"Choose Files"})]}),ue.length>0&&n.jsxs("div",{className:"mt-2 space-y-2",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:[ue.length," file(s) selected:"]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:ue.map((ce,$e)=>n.jsxs("div",{className:"bg-gray-50 p-2 rounded text-xs flex items-center justify-between",children:[n.jsx("span",{className:"truncate",children:ce.name}),n.jsx("button",{onClick:()=>_e(Je=>Je.filter((ze,He)=>He!==$e)),className:"text-red-500 hover:text-red-700 ml-2",children:""})]},$e))})]})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Refund Method *"}),n.jsxs(Vt,{value:R,onValueChange:F,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select refund method"})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"esewa",children:"eSewa"}),n.jsx(qe,{value:"khalti",children:"Khalti"}),n.jsx(qe,{value:"bank",children:"Bank Transfer"})]})]})]}),R==="esewa"&&n.jsxs("div",{children:[n.jsx(fe,{children:"eSewa Number *"}),n.jsx(ve,{placeholder:"98XXXXXXXX",value:q,onChange:ce=>W(ce.target.value)})]}),R==="khalti"&&n.jsxs("div",{children:[n.jsx(fe,{children:"Khalti Number *"}),n.jsx(ve,{placeholder:"98XXXXXXXX",value:K,onChange:ce=>B(ce.target.value)})]}),R==="bank"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Account Holder Name *"}),n.jsx(ve,{placeholder:"Full name as per bank account",value:Z,onChange:ce=>se(ce.target.value)})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Account Number *"}),n.jsx(ve,{placeholder:"Bank account number",value:J,onChange:ce=>ie(ce.target.value)})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Bank Branch *"}),n.jsx(ve,{placeholder:"Branch name",value:le,onChange:ce=>Q(ce.target.value)})]})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Nu,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),n.jsxs("div",{className:"text-sm text-yellow-800",children:[n.jsx("p",{className:"font-medium mb-1",children:"Return Policy"}),n.jsxs("ul",{className:"text-xs space-y-1",children:[n.jsx("li",{children:" Returns are processed within 3-5 business days"}),n.jsx("li",{children:" Refund will be processed after vendor approval"}),n.jsx("li",{children:" You can appeal if your return is rejected"})]})]})]})})]}),n.jsxs("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:[n.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>{O(!1),Y(""),V(""),F(""),W(""),B(""),se(""),ie(""),Q(""),_e([])},children:"Cancel"}),n.jsx(ne,{className:"flex-1 bg-orange-600 hover:bg-orange-700",disabled:!X||!R||ue.length===0||R==="esewa"&&!q||R==="khalti"&&!K||R==="bank"&&(!Z||!J||!le),onClick:async()=>{try{const ce=await ke.getToken(),$e=new FormData;$e.append("reason",X),$e.append("customer_notes",U),$e.append("refund_method",R),$e.append("requested_amount",$.total_amount),R==="esewa"&&$e.append("esewa_number",q),R==="khalti"&&$e.append("khalti_number",K),R==="bank"&&($e.append("bank_account_name",Z),$e.append("bank_account_number",J),$e.append("bank_branch",le)),ue.forEach((ze,He)=>{$e.append(`evidence_${He}`,ze)}),(await fetch(`${os.BASE_URL}/api/orders/${$.id}/return/`,{method:"POST",headers:{Authorization:`Token ${ce}`,"ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"},body:$e})).ok&&(t({title:"Return Requested",description:"Your return request has been submitted successfully."}),O(!1),be())}catch{t({title:"Error",description:"Failed to submit return request.",variant:"destructive"})}},children:"Submit Return Request"})]})]})}),n.jsx(Rs,{open:me,onOpenChange:Se,children:n.jsxs(xs,{side:"bottom",className:"h-[90vh] rounded-t-xl",children:[n.jsx(ys,{className:"pb-4",children:n.jsxs(bs,{className:"text-left",children:["Order Details - #",xe==null?void 0:xe.order_number]})}),xe&&n.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[n.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Order Items"}),n.jsx("div",{className:"space-y-2",children:((Ft=xe.items)==null?void 0:Ft.map((ce,$e)=>{var Je,ze,He;return n.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("img",{src:((He=(ze=(Je=ce.product_details)==null?void 0:Je.images)==null?void 0:ze[0])==null?void 0:He.image_url)||"/placeholder-product.jpg",alt:ce.product_name,className:"w-8 h-8 object-cover rounded"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:ce.product_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",ce.quantity]})]})]}),n.jsxs("p",{className:"text-sm font-semibold",children:["",ce.total_price]})]},$e)}))||[]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Delivery Information"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Address:"})," ",xe.delivery_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Phone:"})," ",xe.delivery_phone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",xe.delivery_name]})]})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-3",children:"Payment Details"}),n.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200 mb-3",children:[n.jsxs("h4",{className:"font-semibold text-emerald-800 text-sm mb-2",children:["Bill Amount (Paid via ",xe.payment_method,")"]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["",xe.subtotal]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsxs("span",{children:["",xe.tax_amount]})]}),n.jsx("hr",{className:"my-1"}),n.jsxs("div",{className:"flex justify-between font-semibold",children:[n.jsx("span",{children:"Bill Total (Paid):"}),n.jsxs("span",{className:"text-emerald-600",children:["",(parseFloat(xe.subtotal)+parseFloat(xe.tax_amount)).toFixed(2)]})]})]})]}),n.jsx("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200 mb-3",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-orange-800 text-base",children:"Delivery Fee"}),n.jsx("p",{className:"text-xs text-orange-700",children:xe.status==="delivered"?"Paid on delivery":"Pay on delivery"})]}),n.jsxs("span",{className:"font-bold text-lg text-orange-600",children:["",parseFloat(xe.delivery_fee).toFixed(2)]})]})}),n.jsx("hr",{className:"my-2"}),n.jsxs("div",{className:"flex justify-between font-semibold text-sm",children:[n.jsx("span",{children:"Grand Total:"}),n.jsxs("span",{children:["",xe.total_amount]})]}),n.jsxs("div",{className:"mt-3 pt-2 border-t space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Payment Method:"}),n.jsx("span",{className:"capitalize",children:xe.payment_method})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Payment Status:"}),n.jsx(De,{variant:xe.payment_status==="paid"?"default":"secondary",className:"text-xs",children:xe.payment_status})]})]})]}),((zs=xe.refunds)==null?void 0:zs.map(ce=>{var $e;return n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[n.jsx(ai,{className:"h-4 w-4"}),"Return/Refund Details"]}),n.jsxs("div",{className:"space-y-3 text-xs",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Status:"}),n.jsx(De,{className:`text-xs ${ce.status==="requested"?"bg-yellow-100 text-yellow-800":ce.status==="approved"?"bg-green-100 text-green-800":ce.status==="rejected"?"bg-red-100 text-red-800":ce.status==="appeal"?"bg-purple-100 text-purple-800":ce.status==="processed"?"bg-blue-100 text-blue-800":ce.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:ce.status.charAt(0).toUpperCase()+ce.status.slice(1)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),n.jsx("p",{className:"text-gray-600 capitalize",children:ce.reason.replace("_"," ")})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Requested Amount:"}),n.jsxs("p",{className:"text-gray-600",children:["",ce.requested_amount]})]}),ce.approved_amount&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Approved Amount:"}),n.jsxs("p",{className:"text-gray-600",children:["",ce.approved_amount]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Your Refund Details:"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Method:"})," ",ce.refund_method]}),ce.refund_method==="esewa"&&ce.esewa_number&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"eSewa Number:"})," ",ce.esewa_number]}),ce.refund_method==="khalti"&&ce.khalti_number&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Khalti Number:"})," ",ce.khalti_number]}),ce.refund_method==="bank"&&n.jsxs("div",{children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Account Name:"})," ",ce.bank_account_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Account Number:"})," ",ce.bank_account_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Branch:"})," ",ce.bank_branch]})]})]})]}),ce.customer_notes&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Your Notes:"}),n.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:ce.customer_notes})]}),ce.admin_notes&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Vendor Response:"}),n.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:ce.admin_notes})]}),(($e=ce.evidence_photos)==null?void 0:$e.length)>0&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Evidence Documents:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:ce.evidence_photos.map((Je,ze)=>{var Bt;const He=(Bt=Je.filename)==null?void 0:Bt.match(/\.(jpg|jpeg|png|gif|webp)$/i);let Ge;return Je.filename.startsWith("http")?Ge=Je.filename:Ge=ls(Je.filename),n.jsxs("div",{className:"bg-white p-2 rounded border hover:shadow-md transition-shadow",children:[He?n.jsxs("div",{className:"cursor-pointer mb-2 group",onClick:()=>{oe(Ge),te(!0)},children:[n.jsxs("div",{className:"relative overflow-hidden rounded",children:[n.jsx("img",{src:Ge,alt:Je.filename,className:"w-full h-20 object-cover rounded mb-1 group-hover:scale-105 transition-transform",onError:Et=>{Et.currentTarget.src="/placeholder-image.svg",Et.currentTarget.alt="Image not found"}}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center",children:n.jsx(Nn,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),n.jsx("p",{className:"text-xs text-blue-600 font-medium",children:" Click to enlarge"})]}):n.jsx("div",{className:"w-full h-20 bg-gray-100 rounded mb-2 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>{window.open(Ge,"_blank")},children:n.jsxs("div",{className:"text-center",children:[n.jsx(At,{className:"h-6 w-6 text-gray-400 mx-auto mb-1"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Document"})]})}),n.jsx("p",{className:"font-medium text-xs truncate",title:Je.filename,children:Je.filename||`Document ${ze+1}`}),n.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",Je.uploaded_by]}),n.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",new Date(Je.uploaded_at).toLocaleDateString()]})]},ze)})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500 border-t pt-2",children:[n.jsx("div",{children:n.jsxs("p",{children:["Requested: ",new Date(ce.requested_at).toLocaleDateString()]})}),ce.approved_at&&n.jsx("div",{children:n.jsxs("p",{children:["Approved: ",new Date(ce.approved_at).toLocaleDateString()]})}),ce.processed_at&&n.jsx("div",{children:n.jsxs("p",{children:["Processed: ",new Date(ce.processed_at).toLocaleDateString()]})}),ce.completed_at&&n.jsx("div",{children:n.jsxs("p",{children:["Completed: ",new Date(ce.completed_at).toLocaleDateString()]})}),ce.appeal_at&&n.jsx("div",{children:n.jsxs("p",{children:["Appealed: ",new Date(ce.appeal_at).toLocaleDateString()]})})]})]})]},ce.id)}))||[]]})]})}),n.jsx(Fo,{open:pe,onOpenChange:te,children:n.jsxs(Fa,{className:"max-w-5xl max-h-[95vh] p-4",children:[n.jsx($a,{className:"pb-4",children:n.jsxs(za,{className:"flex items-center gap-2",children:[n.jsx(Nn,{className:"h-5 w-5"}),"Evidence Document Preview"]})}),n.jsx("div",{className:"flex justify-center items-center bg-gray-50 rounded-lg p-4",children:n.jsx("img",{src:ae,alt:"Evidence Preview",className:"max-w-full max-h-[75vh] object-contain rounded shadow-lg",onError:ce=>{ce.currentTarget.src="/placeholder-image.svg",ce.currentTarget.alt="Image not found"}})}),n.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>window.open(ae,"_blank"),children:[n.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{const ce=document.createElement("a");ce.href=ae,ce.download="evidence-document",ce.click()},children:[n.jsx(At,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})})]})})}const KG=[{id:1,type:"home",label:"Home",name:"John Doe",phone:"+977 9841234567",address:"123 Thamel Street, Thamel",city:"Kathmandu",landmark:"Near Durbar Square",isDefault:!0},{id:2,type:"work",label:"Office",name:"John Doe",phone:"+977 9841234567",address:"456 Lazimpat Road, Lazimpat",city:"Kathmandu",landmark:"Opposite British Embassy",isDefault:!1}],YG=e=>{switch(e){case"home":return n.jsx(ab,{className:"h-5 w-5"});case"work":return n.jsx(TD,{className:"h-5 w-5"});case"other":return n.jsx(pr,{className:"h-5 w-5"});default:return n.jsx(Kt,{className:"h-5 w-5"})}};function XG(){const e=nt(),[t,s]=j.useState(KG),r=()=>{console.log("Add new address")},i=c=>{console.log("Edit address",c)},a=c=>{s(t.filter(d=>d.id!==c))},o=c=>{s(t.map(d=>({...d,isDefault:d.id===c})))};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"My Addresses"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:n.jsx(xn,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[t.length>0?t.map(c=>n.jsxs(Te,{className:"hover:shadow-md transition-shadow",children:[n.jsx(wt,{className:"pb-3",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:YG(c.type)}),n.jsx("div",{children:n.jsxs(jt,{className:"text-base flex items-center gap-2",children:[c.label,c.isDefault&&n.jsx(De,{variant:"secondary",className:"text-xs",children:"Default"})]})})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>i(c.id),className:"p-2",children:n.jsx(Ju,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>a(c.id),className:"p-2 text-red-600 hover:text-red-700",children:n.jsx(qa,{className:"h-4 w-4"})})]})]})}),n.jsxs(Oe,{className:"space-y-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"font-medium",children:c.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:c.phone}),n.jsx("p",{className:"text-sm",children:c.address}),n.jsx("p",{className:"text-sm",children:c.city}),c.landmark&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Landmark: ",c.landmark]})]}),!c.isDefault&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>o(c.id),className:"w-full mt-3",children:"Set as Default"})]})]},c.id)):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Kt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No addresses found"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your delivery addresses to make ordering faster"}),n.jsxs(ne,{onClick:r,children:[n.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add New Address"]})]}),t.length>0&&n.jsx(Te,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:n.jsx(Oe,{className:"p-6 text-center",children:n.jsxs(ne,{variant:"ghost",onClick:r,className:"w-full h-16 flex flex-col items-center gap-2",children:[n.jsx(xn,{className:"h-6 w-6"}),n.jsx("span",{children:"Add New Address"})]})})})]}),n.jsx($s,{})]})}const QG=[{id:1,type:"card",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2026,isDefault:!0,cardholderName:"John Doe"},{id:2,type:"card",last4:"8888",brand:"Mastercard",expiryMonth:8,expiryYear:2025,isDefault:!1,cardholderName:"John Doe"}],JG=e=>n.jsx(to,{className:"h-5 w-5"}),eK=e=>`   ${e}`;function tK(){const e=nt(),[t,s]=j.useState(QG),r=()=>{console.log("Add new payment method")},i=c=>{console.log("Edit payment method",c)},a=c=>{s(t.filter(d=>d.id!==c))},o=c=>{s(t.map(d=>({...d,isDefault:d.id===c})))};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"Payment Methods"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:n.jsx(xn,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[t.length>0?t.map(c=>n.jsxs(Te,{className:"hover:shadow-md transition-shadow",children:[n.jsx(wt,{className:"pb-3",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:JG(c.brand)}),n.jsxs("div",{children:[n.jsxs(jt,{className:"text-base flex items-center gap-2",children:[c.brand," ",eK(c.last4),c.isDefault&&n.jsx(De,{variant:"secondary",className:"text-xs",children:"Default"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires ",String(c.expiryMonth).padStart(2,"0"),"/",c.expiryYear]})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>i(c.id),className:"p-2",children:n.jsx(Ju,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>a(c.id),className:"p-2 text-red-600 hover:text-red-700",children:n.jsx(qa,{className:"h-4 w-4"})})]})]})}),n.jsxs(Oe,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(bi,{className:"h-4 w-4"}),n.jsx("span",{children:"Secured with 256-bit SSL encryption"})]}),!c.isDefault&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>o(c.id),className:"w-full",children:"Set as Default"})]})]},c.id)):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(to,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No payment methods"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Add a payment method to make checkout faster"}),n.jsxs(ne,{onClick:r,children:[n.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Payment Method"]})]}),t.length>0&&n.jsx(Te,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:n.jsx(Oe,{className:"p-6 text-center",children:n.jsxs(ne,{variant:"ghost",onClick:r,className:"w-full h-16 flex flex-col items-center gap-2",children:[n.jsx(xn,{className:"h-6 w-6"}),n.jsx("span",{children:"Add New Payment Method"})]})})}),n.jsx(Te,{className:"bg-green-50 border-green-200",children:n.jsx(Oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(bi,{className:"h-5 w-5 text-green-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-green-800 text-sm",children:"Secure Payments"}),n.jsx("p",{className:"text-green-700 text-xs",children:"All payment information is encrypted and secure"})]})]})})})]}),n.jsx($s,{})]})}const nK=[{id:"orders",title:"Orders & Delivery",icon:dr,description:"Track orders, delivery issues, cancellations",articles:["How to track my order?","Delivery time and charges","Cancel or modify order","Refund policy"]},{id:"payment",title:"Payment & Billing",icon:dn,description:"Payment methods, billing, refunds",articles:["Payment methods accepted","Failed payment issues","Refund process","Billing disputes"]},{id:"account",title:"Account & Profile",icon:LD,description:"Account settings, profile management",articles:["Update profile information","Change password","Manage addresses","Privacy settings"]},{id:"technical",title:"Technical Support",icon:eh,description:"App issues, login problems, bugs",articles:["App not working","Login issues","Payment errors","Report a bug"]}],sK=[{icon:Ro,title:"Live Chat",description:"Chat with our support team",action:"Start Chat",available:!0},{icon:eh,title:"Phone Support",description:"Call us for immediate help",action:"Call Now",available:!0},{icon:$D,title:"Email Support",description:"Send us an email",action:"Send Email",available:!0}];function rK(){const e=nt(),[t,s]=j.useState(""),r=a=>{switch(a){case"Start Chat":console.log("Starting live chat");break;case"Call Now":window.open("tel:+977-1-234567");break;case"Send Email":window.open("mailto:support@kathsnap.com");break}},i=nK.filter(a=>a.title.toLowerCase().includes(t.toLowerCase())||a.description.toLowerCase().includes(t.toLowerCase())||a.articles.some(o=>o.toLowerCase().includes(t.toLowerCase())));return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"Help & Support"}),n.jsx("div",{className:"w-10"})," "]})}),n.jsx("div",{className:"p-4 bg-white border-b",children:n.jsxs("div",{className:"relative",children:[n.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(ve,{placeholder:"Search help articles...",value:t,onChange:a=>s(a.target.value),className:"pl-10"})]})}),n.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[i.map(a=>{const o=a.icon;return n.jsxs(Te,{className:"hover:shadow-md transition-shadow",children:[n.jsx(wt,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:n.jsx(o,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(jt,{className:"text-base",children:a.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]}),n.jsx(pc,{className:"h-5 w-5 text-muted-foreground"})]})}),n.jsx(Oe,{children:n.jsxs("div",{className:"space-y-2",children:[a.articles.slice(0,2).map((c,d)=>n.jsxs("div",{className:"text-sm text-muted-foreground hover:text-primary cursor-pointer",children:[" ",c]},d)),a.articles.length>2&&n.jsxs("div",{className:"text-sm text-primary font-medium cursor-pointer",children:["View all ",a.articles.length," articles"]})]})})]},a.id)}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{className:"text-base",children:"Contact Support"})}),n.jsx(Oe,{className:"space-y-3",children:sK.map((a,o)=>{const c=a.icon;return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(a.action),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:n.jsx(c,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:a.title}),n.jsx("div",{className:"text-xs text-muted-foreground",children:a.description})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[a.available&&n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),n.jsx(pc,{className:"h-4 w-4 text-muted-foreground"})]})]},o)})})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{className:"text-base",children:"Frequently Asked Questions"})}),n.jsxs(Oe,{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-medium text-sm",children:"How do I track my order?"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Go to My Orders in your profile and click on any order to see its current status and tracking information."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-medium text-sm",children:"What are the delivery charges?"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Free delivery for orders above 500. For orders below 500, a delivery fee of 40 applies."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-medium text-sm",children:"How do I cancel an order?"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"You can cancel an order within 30 minutes of placement. Go to My Orders and select the cancel option."})]})]})]}),n.jsx(Te,{className:"bg-primary/5 border-primary/20",children:n.jsx(Oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(dr,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-primary text-sm",children:"Support Hours"}),n.jsx("p",{className:"text-primary/80 text-xs",children:"Monday - Sunday: 6:00 AM - 10:00 PM"})]})]})})})]}),n.jsx($s,{})]})}const TS=()=>{var X,Y,U,V;const e=nt(),[t]=Eb(),s=t.get("vendor"),[r,i]=j.useState(null),[a,o]=j.useState([]),[c,d]=j.useState([]),[f,m]=j.useState(""),[h,u]=j.useState(!0),[p,x]=j.useState(1),[v,w]=j.useState(!1),[y,b]=j.useState(!1),[_,N]=j.useState(null),[k,I]=j.useState(0),C=j.useRef(null),T=j.useRef(null);j.useEffect(()=>{M(),P(),Wt.initialize(),s&&$(parseInt(s));const R=F=>{if(F.key==="newMessage"&&F.newValue){const q=JSON.parse(F.newValue);q.sender!==(_==null?void 0:_.username)&&Wt.notifyNewMessage(q.sender,q.content,q.conversationId.toString(),"customer")}};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[s,_]);const M=async()=>{try{if(!await ke.getToken())return;const{response:F,data:q}=await Ie("/profile/");F.ok&&q&&N(q)}catch(R){console.error("Failed to fetch current user:",R)}};j.useEffect(()=>{r&&A(r.id)},[r]),j.useEffect(()=>{if(r){const R=setInterval(async()=>{const F=await Hs.getMessages(r.id);let q=[];if(Array.isArray(F)?q=F.reverse():F!=null&&F.results&&Array.isArray(F.results)&&(q=F.results.reverse()),q.length>k){const W=q.slice(k);for(const K of W)K.sender.id!==(_==null?void 0:_.id)&&await Wt.notifyNewMessage(K.sender.username,K.content||"Sent a file",r.id.toString(),"customer")}d(q),I(q.length)},3e3);return()=>clearInterval(R)}},[r,k,_]);const P=async(R=1,F=!1)=>{try{const{response:q,data:W}=await Ie(`messaging/conversations/?page=${R}&page_size=20`);if(!q.ok)throw new Error("Failed to fetch conversations");let K=(W==null?void 0:W.results)||[];R===1&&(K.some(Z=>{var se,J;return((se=Z.other_participant)==null?void 0:se.username)==="admin"||((J=Z.other_participant)==null?void 0:J.id)===1})||(K=[{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}},...K])),o(F?B=>[...B,...K]:K),w(!!(W!=null&&W.next)),x(R)}catch(q){console.error("Failed to load conversations:",q),R===1&&o([{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}}])}finally{u(!1),b(!1)}},E=async()=>{y||!v||(b(!0),await P(p+1,!0))},A=async R=>{try{const F=await Hs.getMessages(R);let q=[];Array.isArray(F)?q=F.reverse():F!=null&&F.results&&Array.isArray(F.results)&&(q=F.results.reverse()),d(q),I(q.length)}catch(F){console.error("Failed to load messages:",F),d([]),I(0)}},z=async()=>{if(!(!f.trim()||!r))try{const R=await Hs.sendMessage({conversation_id:r.id,message_type:"text",content:f});d(q=>[...q,R.message]);const F={conversationId:r.id,sender:(_==null?void 0:_.username)||"Unknown",content:f,timestamp:new Date().toISOString()};localStorage.setItem("newMessage",JSON.stringify(F)),setTimeout(()=>localStorage.removeItem("newMessage"),100);try{await fetch("http://localhost:8000/api/broadcast/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:(_==null?void 0:_.username)||"Unknown",content:f,conversation_id:r.id})})}catch(q){console.log("Cross-domain broadcast failed:",q)}m("")}catch(R){console.error("Failed to send message:",R)}},O=async R=>{var q;const F=(q=R.target.files)==null?void 0:q[0];if(!(!F||!r))try{const W=await Hs.sendMessage({conversation_id:r.id,message_type:F.type.startsWith("image/")?"image":"file",file:F});d(K=>[...K,W.message])}catch(W){console.error("Failed to send file:",W)}},$=async R=>{try{const F=await Hs.getOrCreateConversation(R);i(F)}catch(F){console.error("Failed to create conversation:",F)}},G=()=>{var R;(R=C.current)==null||R.scrollIntoView({behavior:"smooth"})};return j.useEffect(()=>{G()},[c]),h?n.jsx("div",{className:"h-screen bg-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),n.jsx("p",{children:"Loading conversations..."})]})}):r?n.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[n.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>i(null),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsxs(ta,{className:"h-10 w-10",children:[n.jsx(Ir,{src:ls((X=r.other_participant)==null?void 0:X.profile_picture)}),n.jsx(na,{children:(U=(Y=r.other_participant)==null?void 0:Y.username)==null?void 0:U.charAt(0)})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-sm",children:(V=r.other_participant)==null?void 0:V.username}),n.jsx("p",{className:"text-xs text-gray-500",children:"Online"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.map(R=>{const F=_&&R.sender.id===_.id;return n.jsx("div",{className:`w-full flex ${F?"justify-end":"justify-start"} mb-2`,children:n.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow ${F?"bg-blue-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[R.message_type==="text"&&n.jsx("p",{className:"text-sm",children:R.content}),R.message_type==="image"&&n.jsx("div",{className:"space-y-2",children:n.jsx("img",{src:ls(R.file_url),alt:"Shared image",className:"rounded max-w-full h-auto"})}),R.message_type==="file"&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Mx,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:R.file_name})]}),n.jsxs("div",{className:"flex items-center justify-end mt-1 gap-1",children:[n.jsx("span",{className:"text-xs text-gray-500",children:new Date(R.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),F&&n.jsx("span",{className:`text-xs ${R.is_read?"text-blue-500":"text-gray-400"}`,children:R.is_read?"":""})]})]})},R.id)}),n.jsx("div",{ref:C})]}),n.jsxs("div",{className:"bg-white border-t p-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{var R;return(R=T.current)==null?void 0:R.click()},children:n.jsx(Mx,{className:"h-4 w-4"})}),n.jsx(ve,{value:f,onChange:R=>m(R.target.value),placeholder:"Type a message...",className:"flex-1",onKeyPress:R=>R.key==="Enter"&&z()}),n.jsx(ne,{onClick:z,disabled:!f.trim(),children:n.jsx(PP,{className:"h-4 w-4"})})]}),n.jsx("input",{ref:T,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:O,className:"hidden"})]})]}):n.jsxs("div",{className:"h-screen bg-white flex flex-col",children:[n.jsx("div",{className:"border-b p-4",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/home"),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsx("h2",{className:"text-lg font-semibold",children:"Messages"})]})})}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(lb,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No conversations yet"}),n.jsx("p",{className:"text-sm",children:"Start messaging with vendors!"})]}):a.map((R,F)=>{var q,W,K,B,Z,se;return n.jsxs("div",{className:"flex items-center gap-3 p-4 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{R.id===0?$(1):i(R)},children:[n.jsxs("div",{className:"relative",children:[n.jsxs(ta,{className:"h-12 w-12",children:[n.jsx(Ir,{src:ls((q=R.other_participant)==null?void 0:q.profile_picture)}),n.jsx(na,{children:(K=(W=R.other_participant)==null?void 0:W.username)==null?void 0:K.charAt(0)})]}),n.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-sm truncate",children:(B=R.other_participant)==null?void 0:B.username}),n.jsx("span",{className:"text-xs text-gray-500",children:R.last_message?new Date(R.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),n.jsx("p",{className:"text-sm text-gray-600 truncate",children:((Z=R.last_message)==null?void 0:Z.content)||((se=R.last_message)==null?void 0:se.file_name)||"Start conversation"})]}),R.unread_count>0&&n.jsx(De,{className:"bg-blue-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center",children:R.unread_count})]},R.id)}),v&&n.jsx("div",{className:"p-4 text-center",children:n.jsx(ne,{onClick:E,disabled:y,variant:"outline",className:"w-full",children:y?"Loading...":"Load More Conversations"})})]})]})},Oy=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3},iK=()=>{const e=27.6398805,t=85.3303725,s=27.66424179701499,r=85.3465231243003,i=Oy(e,t,s,r);console.log(` Your coordinates test: ${i.toFixed(3)} km (Google shows: 5.1 km)`);const a={lat:40.7128,lon:-74.006},o={lat:34.0522,lon:-118.2437},c=Oy(a.lat,a.lon,o.lat,o.lon);console.log(`Test: NYC to LA = ${c.toFixed(2)} km (Google: ~3944 km)`),console.log(` Verify on Google Maps: https://www.google.com/maps/dir/${e},${t}/${s},${r}`)};function aK(){const e=nt(),{categoryName:t}=xp(),[s,r]=j.useState({products:[]}),[i,a]=j.useState(!1),[o,c]=j.useState(xt.getLocation()),[d,f]=j.useState({page:1,hasMore:!0}),[m,h]=j.useState(new Set),[u,p]=j.useState(!1),[x,v]=j.useState(""),{addToCart:w}=gr(),{toast:y}=hn(),b=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const P=xt.subscribe(c);return xt.startTracking(),iK(),_(),C(),P},[t]),j.useEffect(()=>{_(1)},[x,t]),j.useEffect(()=>{o&&(console.log(" Location updated, refetching data:",o),_(1))},[o]);const _=async(P=1)=>{a(!0);try{const E=localStorage.getItem("token"),A=E?{Authorization:`Token ${E}`}:{},z=xt.getLocation();console.log(" Frontend location check:",{userLocation:o,currentLocation:z});const O=new URLSearchParams({page:P.toString(),page_size:"100"});z?(O.append("latitude",z.latitude.toString()),O.append("longitude",z.longitude.toString()),console.log(" Sending location to API:",z)):console.log(" No location available for API call");const G=await(await fetch(`${rt}search/products/?${O}`,{headers:A})).json(),X=N(G.results||[]);r(P===1?{products:X}:V=>({products:[...V.products,...X]}));const U=(G.results||[]).filter(V=>V.category&&V.category.toLowerCase()===t.toLowerCase()).length;f({page:P,hasMore:G.next!==null&&U>=10})}catch(E){console.error("Fetch error:",E)}finally{a(!1)}},N=P=>{const E=xt.getLocation();let z=P.filter(O=>O.category&&O.category.toLowerCase()===t.toLowerCase()).map(O=>{var Y,U;const $=((Y=O.images)==null?void 0:Y.find(V=>V.is_primary))||((U=O.images)==null?void 0:U[0]);let G="N/A",X=1/0;return E&&O.vendor_latitude&&O.vendor_longitude&&(X=Oy(E.latitude,E.longitude,O.vendor_latitude,O.vendor_longitude),G=`${X.toFixed(1)} km`),{id:O.id,name:O.name,vendor:O.vendor_name||"Unknown Vendor",price:`${O.price}`,priceValue:parseFloat(O.price),image:($==null?void 0:$.image_url)||"/placeholder-product.jpg",rating:4.5,distance:G,distanceValue:X,deliveryTime:"30-45 mins",inStock:O.quantity>0,category:O.category}});return x==="price_low"?z.sort((O,$)=>O.priceValue-$.priceValue):x==="price_high"?z.sort((O,$)=>$.priceValue-O.priceValue):z.sort((O,$)=>O.distanceValue-$.distanceValue),z},k=()=>{!i&&d.hasMore&&_(d.page+1)},I=P=>{e(`/product/${P}`)},C=async()=>{var E;const P=localStorage.getItem("token");if(P)try{const A=await fetch(`${rt}favorites/`,{headers:{Authorization:`Token ${P}`}});if(A.ok){const z=await A.json(),O=new Set(((E=z.results)==null?void 0:E.map($=>$.product.id))||[]);h(O)}}catch(A){console.error("Failed to fetch favorites:",A)}},T=async(P,E)=>{E.stopPropagation();const A=localStorage.getItem("token");if(!A){y({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const z=await fetch(`${rt}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${A}`},body:JSON.stringify({product_id:P})});if(z.ok){const O=await z.json(),$=new Set(m);O.is_favorite?$.add(P):$.delete(P),h($),y({title:O.is_favorite?"Added to Favorites":"Removed from Favorites",description:O.message})}}catch{y({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},M=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.products.map(P=>n.jsxs(Te,{className:"overflow-hidden",children:[n.jsxs("div",{className:"cursor-pointer",onClick:()=>I(P.id),children:[n.jsxs("div",{className:"aspect-square relative",children:[n.jsx("img",{src:P.image,alt:P.name,className:"w-full h-full object-cover",onError:E=>{E.target.src="/placeholder-product.jpg"}}),n.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:E=>T(P.id,E),children:n.jsx(pr,{className:`h-4 w-4 ${m.has(P.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),n.jsx(De,{variant:P.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:P.inStock?"In Stock":"Out of Stock"})]}),n.jsxs(Oe,{className:"p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:P.name}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:P.vendor}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:P.rating})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:P.distance})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-bold text-primary text-sm",children:P.price}),n.jsx("span",{className:"text-xs text-muted-foreground",children:P.deliveryTime})]})]})]}),n.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!P.inStock,onClick:E=>{E.stopPropagation(),w(P.id,1)},children:[n.jsx(Ds,{className:"h-3 w-3 mr-1"}),"Cart"]}),n.jsxs(ne,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!P.inStock,onClick:E=>{E.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:P.id,name:P.name,price:P.price.replace("",""),quantity:1,vendor_name:P.vendor,images:[{image_url:P.image}]}}})},children:[n.jsx(xn,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},P.id))}),d.hasMore&&n.jsx("div",{className:"text-center py-4",children:n.jsxs(ne,{onClick:k,disabled:i,variant:"outline",children:[i?n.jsx(qn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center gap-3 p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold",children:t}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.products.length," products found"]})]}),n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>p(!0),children:n.jsx(_i,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"p-4 pb-20",children:[s.products.length>0&&n.jsx("div",{className:"mb-6",children:M()}),s.products.length===0&&!i&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No products found"}),n.jsxs("p",{className:"text-muted-foreground",children:["No products available in ",t," category"]})]}),i&&s.products.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(qn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),u&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>p(!1),children:n.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:P=>P.stopPropagation(),children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>p(!1),children:""})]})}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),n.jsx("div",{className:"space-y-2",children:b.map(P=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"sort",value:P.value,checked:x===P.value,onChange:E=>v(E.target.value),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:P.label})]},P.value))})]}),n.jsx(ne,{variant:"outline",className:"w-full",onClick:()=>{v("")},children:"Clear All Filters"})]})]})}),n.jsx($s,{})]})}const oK=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function lK(){const e=nt(),[t,s]=j.useState({products:[]}),[r,i]=j.useState(!1),[a,o]=j.useState(xt.getLocation()),[c,d]=j.useState({page:1,hasMore:!0}),[f,m]=j.useState(new Set),[h,u]=j.useState(!1),[p,x]=j.useState(""),{addToCart:v}=gr(),{toast:w}=hn(),y=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const M=xt.subscribe(o);return b(),I(),M},[]),j.useEffect(()=>{b(1)},[p]),j.useEffect(()=>{a&&(console.log(" Location updated, refetching data:",a),b(1))},[a]);const b=async(M=1)=>{i(!0);try{const P=localStorage.getItem("token"),E=P?{Authorization:`Token ${P}`}:{},A=xt.getLocation();console.log(" Frontend location check:",{userLocation:a,currentLocation:A});const z=new URLSearchParams({page:M.toString(),page_size:"20"});A?(z.append("latitude",A.latitude.toString()),z.append("longitude",A.longitude.toString()),console.log(" Sending location to API:",A)):console.log(" No location available for API call");const $=await(await fetch(`${rt}search/products/?${z}`,{headers:E})).json(),G=_($.results||[]);s(M===1?{products:G}:X=>({products:[...X.products,...G]})),d({page:M,hasMore:$.next!==null})}catch(P){console.error("Fetch error:",P)}finally{i(!1)}},_=M=>{const P=xt.getLocation();let A=M.filter(z=>z.featured===!0).map(z=>{var X,Y;const O=((X=z.images)==null?void 0:X.find(U=>U.is_primary))||((Y=z.images)==null?void 0:Y[0]);let $="N/A",G=1/0;return P&&z.vendor_latitude&&z.vendor_longitude&&(G=oK(P.latitude,P.longitude,z.vendor_latitude,z.vendor_longitude),$=`${G.toFixed(1)} km`),{id:z.id,name:z.name,vendor:z.vendor_name||"Unknown Vendor",distance:$,distanceValue:G,rating:4.5,price:`${z.price}`,priceValue:parseFloat(z.price),image:(O==null?void 0:O.image_url)||"/placeholder-product.jpg",inStock:z.quantity>0,category:z.category,featured:z.featured}});return p==="price_low"?A.sort((z,O)=>z.priceValue-O.priceValue):p==="price_high"?A.sort((z,O)=>O.priceValue-z.priceValue):A.sort((z,O)=>z.distanceValue-O.distanceValue),A},N=()=>{!r&&c.hasMore&&b(c.page+1)},k=M=>{e(`/product/${M}`)},I=async()=>{var P;const M=localStorage.getItem("token");if(M)try{const E=await fetch(`${rt}favorites/`,{headers:{Authorization:`Token ${M}`}});if(E.ok){const A=await E.json(),z=new Set(((P=A.results)==null?void 0:P.map(O=>O.product.id))||[]);m(z)}}catch(E){console.error("Failed to fetch favorites:",E)}},C=async(M,P)=>{P.stopPropagation();const E=localStorage.getItem("token");if(!E){w({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const A=await fetch(`${rt}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${E}`},body:JSON.stringify({product_id:M})});if(A.ok){const z=await A.json(),O=new Set(f);z.is_favorite?O.add(M):O.delete(M),m(O),w({title:z.is_favorite?"Added to Favorites":"Removed from Favorites",description:z.message})}}catch{w({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},T=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.products.map(M=>n.jsxs(Te,{className:"overflow-hidden",children:[n.jsxs("div",{className:"cursor-pointer",onClick:()=>k(M.id),children:[n.jsxs("div",{className:"aspect-square relative",children:[n.jsx("img",{src:M.image,alt:M.name,className:"w-full h-full object-cover",onError:P=>{P.target.src="/placeholder-product.jpg"}}),n.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:P=>C(M.id,P),children:n.jsx(pr,{className:`h-4 w-4 ${f.has(M.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),n.jsx(De,{variant:M.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:M.inStock?"In Stock":"Out of Stock"})]}),n.jsxs(Oe,{className:"p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:M.name}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:M.vendor}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:M.rating})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:M.distance})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-bold text-primary text-sm",children:M.price}),n.jsx("span",{className:"text-xs text-muted-foreground",children:M.deliveryTime})]})]})]}),n.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!M.inStock,onClick:P=>{P.stopPropagation(),v(M.id,1)},children:[n.jsx(Ds,{className:"h-3 w-3 mr-1"}),"Cart"]}),n.jsxs(ne,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!M.inStock,onClick:P=>{P.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:M.id,name:M.name,price:M.price.replace("",""),quantity:1,vendor_name:M.vendor,images:[{image_url:M.image}]}}})},children:[n.jsx(xn,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},M.id))}),c.hasMore&&n.jsx("div",{className:"text-center py-4",children:n.jsxs(ne,{onClick:N,disabled:r,variant:"outline",children:[r?n.jsx(qn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center gap-3 p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold",children:"Featured Products"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>u(!0),children:n.jsx(_i,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&n.jsx("div",{className:"mb-6",children:T()}),t.products.length===0&&!r&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No featured products"}),n.jsx("p",{className:"text-muted-foreground",children:"Featured products will appear here when available"})]}),r&&t.products.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(qn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),h&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>u(!1),children:n.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:M=>M.stopPropagation(),children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:""})]})}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),n.jsx("div",{className:"space-y-2",children:y.map(M=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"sort",value:M.value,checked:p===M.value,onChange:P=>x(P.target.value),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:M.label})]},M.value))})]}),n.jsx(ne,{variant:"outline",className:"w-full",onClick:()=>{x("")},children:"Clear All Filters"})]})]})}),n.jsx($s,{})]})}const cK=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),x=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return d*v/1e3};function dK(){const e=nt(),[t,s]=j.useState({products:[]}),[r,i]=j.useState(!1),[a,o]=j.useState(xt.getLocation()),[c,d]=j.useState({page:1,hasMore:!0}),[f,m]=j.useState(new Set),[h,u]=j.useState(!1),[p,x]=j.useState(""),{addToCart:v}=gr(),{toast:w}=hn(),y=[{value:"",label:"Default (Rating)"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const M=xt.subscribe(o);return b(),I(),M},[]),j.useEffect(()=>{b(1)},[p]),j.useEffect(()=>{a&&(console.log(" Location updated, refetching data:",a),b(1))},[a]);const b=async(M=1)=>{i(!0);try{const P=localStorage.getItem("token"),E=P?{Authorization:`Token ${P}`,"ngrok-skip-browser-warning":"true"}:{"ngrok-skip-browser-warning":"true"},A=xt.getLocation();console.log(" Frontend location check:",{userLocation:a,currentLocation:A});const z=new URLSearchParams({page:M.toString(),page_size:"20"});A?(z.append("latitude",A.latitude.toString()),z.append("longitude",A.longitude.toString()),console.log(" Sending location to API:",A)):console.log(" No location available for API call");const $=await(await fetch(`${rt}search/products/?${z}`,{headers:E})).json(),G=_($.results||[]);s(M===1?{products:G}:X=>({products:[...X.products,...G]})),d({page:M,hasMore:$.next!==null})}catch(P){console.error("Fetch error:",P)}finally{i(!1)}},_=M=>{const P=xt.getLocation();let E=M.map(A=>{var G,X;const z=((G=A.images)==null?void 0:G.find(Y=>Y.is_primary))||((X=A.images)==null?void 0:X[0]);let O="N/A",$=1/0;return P&&A.vendor_latitude&&A.vendor_longitude&&($=cK(P.latitude,P.longitude,A.vendor_latitude,A.vendor_longitude),O=`${$.toFixed(1)} km`),{id:A.id,name:A.name,vendor:A.vendor_name||"Unknown Vendor",distance:O,distanceValue:$,rating:4.5,price:`${A.price}`,priceValue:parseFloat(A.price),image:(z==null?void 0:z.image_url)||"/placeholder-product.jpg",inStock:A.quantity>0,category:A.category}});return p==="price_low"?E.sort((A,z)=>A.priceValue-z.priceValue):p==="price_high"?E.sort((A,z)=>z.priceValue-A.priceValue):E.sort((A,z)=>z.rating-A.rating),E},N=()=>{!r&&c.hasMore&&b(c.page+1)},k=M=>{e(`/product/${M}`)},I=async()=>{var P;const M=localStorage.getItem("token");if(M)try{const E=await fetch(`${rt}favorites/`,{headers:{Authorization:`Token ${M}`}});if(E.ok){const A=await E.json(),z=new Set(((P=A.results)==null?void 0:P.map(O=>O.product.id))||[]);m(z)}}catch(E){console.error("Failed to fetch favorites:",E)}},C=async(M,P)=>{P.stopPropagation();const E=localStorage.getItem("token");if(!E){w({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const A=await fetch(`${rt}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${E}`},body:JSON.stringify({product_id:M})});if(A.ok){const z=await A.json(),O=new Set(f);z.is_favorite?O.add(M):O.delete(M),m(O),w({title:z.is_favorite?"Added to Favorites":"Removed from Favorites",description:z.message})}}catch{w({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},T=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.products.map(M=>n.jsxs(Te,{className:"overflow-hidden",children:[n.jsxs("div",{className:"cursor-pointer",onClick:()=>k(M.id),children:[n.jsxs("div",{className:"aspect-square relative",children:[n.jsx("img",{src:M.image,alt:M.name,className:"w-full h-full object-cover",onError:P=>{P.target.src="/placeholder-product.jpg"}}),n.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:P=>C(M.id,P),children:n.jsx(pr,{className:`h-4 w-4 ${f.has(M.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),n.jsx(De,{variant:M.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:M.inStock?"In Stock":"Out of Stock"})]}),n.jsxs(Oe,{className:"p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:M.name}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:M.vendor}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:M.rating})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:M.distance})]})]}),n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("span",{className:"font-bold text-primary text-sm",children:M.price})})]})]}),n.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!M.inStock,onClick:P=>{P.stopPropagation(),v(M.id,1)},children:[n.jsx(Ds,{className:"h-3 w-3 mr-1"}),"Cart"]}),n.jsxs(ne,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!M.inStock,onClick:P=>{P.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:M.id,name:M.name,price:M.price.replace("",""),quantity:1,vendor_name:M.vendor,images:[{image_url:M.image}]}}})},children:[n.jsx(xn,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},M.id))}),c.hasMore&&n.jsx("div",{className:"text-center py-4",children:n.jsxs(ne,{onClick:N,disabled:r,variant:"outline",children:[r?n.jsx(qn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center gap-3 p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold",children:"Trending Products"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>u(!0),children:n.jsx(_i,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&n.jsx("div",{className:"mb-6",children:T()}),t.products.length===0&&!r&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No trending products"}),n.jsx("p",{className:"text-muted-foreground",children:"Trending products will appear here when available"})]}),r&&t.products.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(qn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),h&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>u(!1),children:n.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:M=>M.stopPropagation(),children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:""})]})}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),n.jsx("div",{className:"space-y-2",children:y.map(M=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"sort",value:M.value,checked:p===M.value,onChange:P=>x(P.target.value),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:M.label})]},M.value))})]}),n.jsx(ne,{variant:"outline",className:"w-full",onClick:()=>{x("")},children:"Clear All Filters"})]})]})}),n.jsx($s,{})]})}function uK(){const e=nt(),t=Qs(),{login:s}=Fs(),[r,i]=j.useState("password"),[a,o]=j.useState(""),[c,d]=j.useState(""),[f,m]=j.useState(""),[h,u]=j.useState(""),[p,x]=j.useState(!1),[v,w]=j.useState(!1),[y,b]=j.useState(!1),[_,N]=j.useState(""),[k,I]=j.useState(""),[C,T]=j.useState(!1),[M,P]=j.useState(null),[E,A]=j.useState(!1),[z,O]=j.useState(!1),[$,G]=j.useState(!1),[X,Y]=j.useState(null);j.useEffect(()=>{var le;(le=t.state)!=null&&le.successMessage&&(I(t.state.successMessage),window.history.replaceState({},document.title)),U(),yc.initialize().catch(console.error),dm.initialize().catch(console.error)},[t.state]);const U=async()=>{var le;try{if(await ke.isAuthenticated()){const ue=await ke.getUser();console.log("Existing user:",ue),(le=ue==null?void 0:ue.available_roles)!=null&&le.includes("vendor")&&(ue.user_type==="customer"?await V():e("/vendor/dashboard"))}}catch(Q){console.log("No existing auth or error:",Q)}},V=async()=>{try{const{response:le,data:Q}=await Ie("/switch-role/",{method:"POST",body:JSON.stringify({role:"vendor"})});if(le.ok){const _e={...await ke.getUser(),user_type:"vendor"};await s(_e,await ke.getToken());const{simplePersistentAuth:me}=await We(async()=>{const{simplePersistentAuth:Se}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:Se}},[]);await me.saveVendorLogin(await ke.getToken(),_e),e("/vendor/dashboard")}}catch(le){console.error("Role switch failed:",le)}},R=async()=>{var le;b(!0),N("");try{await ke.clearAuth();const{response:Q,data:ue}=await Ie("/login/",{method:"POST",body:JSON.stringify({username:a,password:c})},!1);if(!Q.ok)throw new Error((ue==null?void 0:ue.error)||"Login failed");if(ue.needs_verification)T(!0),P(ue.user_id),w(!0),N("Email not verified. Please verify your email with the OTP sent.");else{const _e={...ue.user,available_roles:ue.available_roles||["customer"],current_role:ue.user.user_type||"customer"};_e.user_type==="customer"&&_e.available_roles.includes("vendor")&&(_e.user_type="vendor"),await s(_e,ue.token),await ke.setAuth(ue.token,_e),await(await We(()=>import("./simplePersistentAuth-pu9lRszg.js"),[])).simplePersistentAuth.saveVendorLogin(ue.token,_e),console.log("Login response:",ue),console.log("profile_exists:",ue.profile_exists,"is_approved:",ue.is_approved),ue.profile_exists?ue.profile_exists&&ue.is_approved?(console.log("Profile exists and approved, redirecting to dashboard"),e("/vendor/dashboard")):ue.profile_exists&&ue.is_rejected?(console.log("Profile exists but rejected"),e("/vendor/rejection",{state:{rejectionReason:ue.rejection_reason,rejectionDate:ue.rejection_date}})):ue.profile_exists&&!ue.is_approved&&(console.log("Profile exists but not approved"),N("Your vendor application is pending approval. You will be notified once approved."),await ke.clearAuth()):(console.log("No profile exists, redirecting to onboarding"),e("/vendor/onboarding"))}}catch(Q){console.error("Vendor login error:",Q),(le=Q.message)!=null&&le.includes("fetch")?N("Connection failed. Please check if the server is running on localhost:8000"):N(Q.message||"Login failed. Please try again.")}finally{b(!1)}},F=async()=>{b(!0),N("");try{const{response:le,data:Q}=await Ie("/send-otp/",{method:"POST",body:JSON.stringify({email:a})},!1);if(!le.ok)throw new Error((Q==null?void 0:Q.error)||"Failed to send OTP");w(!0),N("OTP sent successfully")}catch(le){N(le.message)}finally{b(!1)}},q=async()=>{b(!0),N("");try{const{response:le,data:Q}=await Ie("/verify-otp/",{method:"POST",body:JSON.stringify({email:a,otp:f})},!1);if(!le.ok)throw new Error((Q==null?void 0:Q.error)||"OTP verification failed");const ue={...Q.user||{id:Q.user_id,email:a,user_type:"vendor"},available_roles:Q.available_roles||["vendor"],user_type:Q.user.user_type||"vendor",current_role:Q.user.user_type||"vendor"};await s(ue,Q.token),await ke.setAuth(Q.token,ue),await(await We(()=>import("./simplePersistentAuth-pu9lRszg.js"),[])).simplePersistentAuth.saveVendorLogin(Q.token,ue),console.log("OTP verification response:",Q),console.log("profile_exists:",Q.profile_exists,"is_approved:",Q.is_approved),Q.profile_exists?Q.profile_exists&&Q.is_approved?(console.log("Profile exists and approved, redirecting to dashboard"),e("/vendor/dashboard")):Q.profile_exists&&Q.is_rejected?(console.log("Profile exists but rejected"),e("/vendor/rejection",{state:{rejectionReason:Q.rejection_reason,rejectionDate:Q.rejection_date}})):Q.profile_exists&&!Q.is_approved&&(console.log("Profile exists but not approved"),N("Your vendor application is pending approval. You will be notified once approved."),await ke.clearAuth()):(console.log("No profile exists, redirecting to onboarding"),e("/vendor/onboarding"))}catch(le){console.error("Vendor OTP verification error:",le),N(le.message||"OTP verification failed. Please try again.")}finally{b(!1)}},W=async()=>{var le;O(!0),N("");try{const Q=await dm.signIn();if(Q.success&&Q.user&&Q.token){let ue={...Q.user,available_roles:Q.user.available_roles||["customer"],current_role:Q.user.current_role||Q.user.user_type||"customer"};if(ue.user_type==="customer"&&ue.available_roles.includes("vendor")&&(ue.user_type="vendor"),await s(ue,Q.token),await ke.setAuth(Q.token,ue),await s(ue,Q.token),(le=ue.available_roles)!=null&&le.includes("vendor")){const{simplePersistentAuth:_e}=await We(async()=>{const{simplePersistentAuth:me}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:me}},[]);await _e.saveVendorLogin(Q.token,ue)}Q.user.user_created||!Q.user.phone_number?(Y({userData:ue,token:Q.token,profileData:Q.user}),G(!0)):B(Q.user)}else N(Q.error||"Facebook login failed")}catch{N("Facebook login failed. Please try again.")}finally{O(!1)}},K=async()=>{var le;A(!0),N("");try{const Q=await yc.signIn();if(Q.success&&Q.user&&Q.token){let ue={...Q.user,available_roles:Q.user.available_roles||["customer"],current_role:Q.user.current_role||Q.user.user_type||"customer"};if(ue.user_type==="customer"&&ue.available_roles.includes("vendor")&&(ue.user_type="vendor"),await s(ue,Q.token),await ke.setAuth(Q.token,ue),await s(ue,Q.token),(le=ue.available_roles)!=null&&le.includes("vendor")){const{simplePersistentAuth:_e}=await We(async()=>{const{simplePersistentAuth:me}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:me}},[]);await _e.saveVendorLogin(Q.token,ue)}Q.user.user_created||!Q.user.phone_number?(Y({userData:ue,token:Q.token,profileData:Q.user}),G(!0)):B(Q.user)}else N(Q.error||"Google login failed")}catch{N("Google login failed. Please try again.")}finally{A(!1)}},B=le=>{le.profile_exists?le.profile_exists&&le.is_approved?e("/vendor/dashboard"):le.profile_exists&&le.is_rejected?e("/vendor/rejection",{state:{rejectionReason:le.rejection_reason,rejectionDate:le.rejection_date}}):le.profile_exists&&!le.is_approved&&(N("Your vendor application is pending approval. You will be notified once approved."),ke.clearAuth()):e("/vendor/onboarding")},Z=()=>{G(!1),X!=null&&X.profileData&&B(X.profileData)},se=()=>{G(!1),X!=null&&X.profileData&&B(X.profileData)},J=async()=>{b(!0),N("");try{const{response:le,data:Q}=await Ie("/update-email/",{method:"POST",body:JSON.stringify({email:h,user_id:M})},!1);if(!le.ok)throw new Error((Q==null?void 0:Q.error)||"Failed to update email");o(h),u(""),w(!0),N("Email updated. OTP sent to new email.")}catch(le){N(le.message)}finally{b(!1)}},ie=()=>{e("/vendor/signup")};return n.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[n.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 left-4 w-8 h-8 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors z-10",children:n.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),n.jsx(zE,{currentType:"vendor"}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx("div",{className:"w-full max-w-80 mx-auto px-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"text-center",children:n.jsx("img",{src:ea,alt:"ezeyway",className:"w-16 h-16 mx-auto mb-6"})}),n.jsx("div",{className:"text-center mb-4",children:n.jsx("span",{className:"text-sm font-medium text-gray-700 bg-blue-50 px-3 py-1 rounded-full",children:"Vendor Login"})}),n.jsx("div",{className:"flex justify-center",children:n.jsxs("div",{className:"flex space-x-8",children:[n.jsx("button",{onClick:()=>i("password"),className:`pb-2 text-sm font-medium transition-colors ${r==="password"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Password"}),n.jsx("button",{onClick:()=>i("otp"),className:`pb-2 text-sm font-medium transition-colors ${r==="otp"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"OTP"})]})}),r==="password"&&n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:a,onChange:le=>o(le.target.value),placeholder:"Username or Email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),!C&&n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:p?"text":"password",value:c,onChange:le=>d(le.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),n.jsx("button",{type:"button",onClick:()=>x(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):n.jsxs(n.Fragment,{children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),k&&n.jsx("p",{className:"text-green-600 text-center",children:k}),_&&n.jsx("p",{className:"text-red-600 text-center",children:_}),C&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(ve,{type:"email",value:h,onChange:le=>u(le.target.value),placeholder:"Update email if incorrect",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsx(ne,{onClick:J,disabled:!h||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Updating...":"Update Email and Resend OTP"}),n.jsx(ve,{type:"text",value:f,onChange:le=>m(le.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),n.jsx(ne,{onClick:q,disabled:f.length!==6||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Verifying...":"Verify OTP"}),n.jsx("button",{onClick:F,disabled:y,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}),!C&&n.jsx(ne,{onClick:R,disabled:!a||!c||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Logging in...":"Login"})]}),r==="otp"&&n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"email",value:a,onChange:le=>o(le.target.value),placeholder:"Enter your email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),v?n.jsxs(n.Fragment,{children:[n.jsx(ve,{type:"text",value:f,onChange:le=>m(le.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),k&&n.jsx("p",{className:"text-green-600 text-center",children:k}),_&&n.jsx("p",{className:"text-red-600 text-center",children:_}),n.jsx(ne,{onClick:q,disabled:f.length!==6||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Verifying...":"Verify & Login"}),n.jsx("button",{onClick:F,disabled:y,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}):n.jsx(ne,{onClick:F,disabled:!a||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Sending...":"Send OTP"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-300"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 to-indigo-100 text-gray-500",children:"or"})})]}),n.jsxs("div",{className:"flex justify-center space-x-4",children:[n.jsx("button",{onClick:K,disabled:E,className:"w-12 h-12 bg-white hover:bg-gray-50 border border-gray-300 rounded-full flex items-center justify-center transition-colors shadow-sm",children:E?n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):n.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),n.jsx("button",{onClick:W,disabled:z,className:"w-12 h-12 bg-white hover:bg-gray-50 border border-gray-300 rounded-full flex items-center justify-center transition-colors shadow-sm",children:z?n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):n.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:n.jsx("path",{fill:"#1877F2",d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})})]})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:ie,className:"text-blue-600 hover:text-blue-700 text-sm",children:"Don't have an account? Sign up"})})]})})}),$&&X&&n.jsx(BE,{user:X.userData,onComplete:Z,onSkip:se})]})}function hK(){const e=nt(),[t,s]=j.useState(1),[r,i]=j.useState(""),[a,o]=j.useState(""),[c,d]=j.useState(""),[f,m]=j.useState(""),[h,u]=j.useState(""),[p,x]=j.useState(!1),[v,w]=j.useState(!1),[y,b]=j.useState(""),_=async()=>{var T,M,P;w(!0),b("");try{const E=await fetch(rt+"register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:r,password:c,user_type:"vendor"})}),A=await E.json();if(!E.ok){const z=((T=A.username)==null?void 0:T[0])||((M=A.email)==null?void 0:M[0])||A.message||((P=Object.values(A)[0])==null?void 0:P[0])||"Failed to register";throw new Error(z)}s(2)}catch(E){b(E.message)}finally{w(!1)}},N=async T=>{w(!0),b("");try{const M=await fetch(rt+"verify-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:T})}),P=await M.json();if(!M.ok)throw new Error(P.error||"Verification failed");localStorage.setItem("token",P.token),e("/vendor/onboarding")}catch(M){b(M.message)}finally{w(!1)}},k=T=>{u(T),T.length===6&&N(T)},I=async()=>{w(!0),b("");try{const T=await fetch(rt+"send-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),M=await T.json();if(!T.ok)throw new Error(M.error||"Failed to resend OTP");b("OTP resent successfully")}catch(T){b(T.message)}finally{w(!1)}},C=()=>{e("/vendor/login")};return n.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[n.jsx("button",{onClick:C,className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition-colors",children:" Back"}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"w-full max-w-80 mx-auto px-4",children:[t===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:ea,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Join as Seller"})]}),n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"email",value:r,onChange:T=>i(T.target.value),placeholder:"Enter your email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsx(ve,{type:"text",value:a,onChange:T=>o(T.target.value),placeholder:"Choose username",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:p?"text":"password",value:c,onChange:T=>d(T.target.value),placeholder:"Create password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),n.jsx("button",{type:"button",onClick:()=>x(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):n.jsxs(n.Fragment,{children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),n.jsx(ve,{type:"password",value:f,onChange:T=>m(T.target.value),placeholder:"Confirm password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),y&&n.jsx("p",{className:"text-red-600 text-center",children:y}),n.jsx(ne,{onClick:_,disabled:!r||!a||!c||!f||c!==f||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Creating Account...":"Join as Seller"})]})]}),t===2&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:ea,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Email"}),n.jsxs("p",{className:"text-gray-600 mt-2",children:["Code sent to ",r]})]}),n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:h,onChange:T=>k(T.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest w-80"}),v&&n.jsx("div",{className:"text-center text-blue-600",children:"Verifying..."}),y&&n.jsx("p",{className:"text-red-600 text-center",children:y}),n.jsx("button",{onClick:()=>s(1),className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Change details"}),n.jsx("button",{onClick:I,disabled:v,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend code"})]})]})]})})]})}const fK=Aw.divIcon({className:"custom-marker",html:'<div style="background-color: #ff0000; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]});function mK(){var A,z;const e=nt(),s=(A=Qs().state)==null?void 0:A.isUpdate,[r,i]=j.useState(0),[a,o]=j.useState({location:{lat:27.7172,lng:85.324,address:""},shopName:"",ownerName:"",phone:"",email:"",shopAddress:"",city:"",state:"",pincode:"",shopRegDoc:null,citizenshipFront:null,citizenshipBack:null,shopImages:[],existingDocuments:{panReg:null,citizenshipFront:null,citizenshipBack:null},existingShopImages:[],bankAccount:"",accountHolderName:"",bankName:"",ifscCode:"",gstNumber:"",panNumber:"",deliveryRadius:"",minOrderAmount:"",vendorType:"",categories:[],description:""}),[c,d]=j.useState(""),[f,m]=j.useState(!1),[h,u]=j.useState(""),[p,x]=j.useState(""),[v,w]=j.useState([]),y=["Location","Shop Info","Address","Documents","Shop Images","Payment","Business Type","Categories","Review"],b=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"manufacturer",label:"Manufacturer"},{value:"service_provider",label:"Service Provider"},{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"}];j.useEffect(()=>{const O=async()=>{try{const G=await fetch(rt+"categories/"),X=await G.json();G.ok&&w(X.categories.map(Y=>Y.name))}catch(G){console.error("Error fetching categories:",G)}},$=async()=>{if(s)try{const G=localStorage.getItem("token"),X=await fetch(rt+"vendor-profiles/",{headers:{Authorization:`Token ${G}`}});if(X.ok){const Y=await X.json(),U=Y.results&&Y.results.length>0?Y.results[0]:null;U&&o(V=>{var R,F,q,W;return{...V,shopName:U.business_name||"",ownerName:U.owner_name||"",phone:U.business_phone||"",email:U.business_email||"",shopAddress:U.business_address||"",city:U.city||"",state:U.state||"",pincode:U.pincode||"",panNumber:U.pan_number||"",gstNumber:U.gst_number||"",bankAccount:U.account_number||"",accountHolderName:U.account_holder_name||"",bankName:U.bank_name||"",ifscCode:U.ifsc_code||"",deliveryRadius:U.delivery_radius||"",minOrderAmount:U.min_order_amount||"",vendorType:U.business_type||"",categories:U.categories||[],description:U.description||"",location:{lat:U.latitude||27.7172,lng:U.longitude||85.324,address:U.location_address||""},existingDocuments:{panReg:U.business_license_file_url||null,citizenshipFront:((F=(R=U.documents)==null?void 0:R.find(K=>{var B;return(B=K.document_url)==null?void 0:B.includes("citizenship_front")}))==null?void 0:F.document_url)||null,citizenshipBack:((W=(q=U.documents)==null?void 0:q.find(K=>{var B;return(B=K.document_url)==null?void 0:B.includes("citizenship_back")}))==null?void 0:W.document_url)||null},existingShopImages:U.shop_images||[]}})}}catch(G){console.error("Error fetching profile:",G)}};O(),$()},[s]);const _=({lat:O,lng:$})=>(OR().setView([O,$],13),null),N=()=>(RR({click(O){const{lat:$,lng:G}=O.latlng;o(X=>({...X,location:{...X.location,lat:$,lng:G}})),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${$}&lon=${G}`).then(X=>X.json()).then(X=>{X.display_name&&o(Y=>({...Y,location:{...Y.location,address:X.display_name}}))}).catch(X=>console.error("Error fetching address:",X))}}),null),k=()=>{d(""),navigator.geolocation?navigator.geolocation.getCurrentPosition(O=>{const{latitude:$,longitude:G}=O.coords;o(X=>({...X,location:{...X.location,lat:$,lng:G}})),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${$}&lon=${G}`).then(X=>X.json()).then(X=>{X.display_name&&o(Y=>({...Y,location:{...Y.location,address:X.display_name}}))}).catch(X=>{console.error("Error fetching address:",X),d("Unable to fetch address for this location.")})},O=>{switch(console.error("Geolocation error:",O),O.code){case O.PERMISSION_DENIED:d("Location access denied. Please allow location permissions.");break;case O.POSITION_UNAVAILABLE:d("Location information is unavailable.");break;case O.TIMEOUT:d("The request to get your location timed out.");break;default:d("An unknown error occurred while fetching your location.");break}}):d("Geolocation is not supported by your browser.")},I=()=>{const O=[{field:"shopName",label:"Shop Name"},{field:"ownerName",label:"Owner Name"},{field:"email",label:"Email"},{field:"phone",label:"Phone"},{field:"panNumber",label:"PAN Number"},{field:"shopAddress",label:"Shop Address"},{field:"city",label:"City"},{field:"state",label:"State"},{field:"pincode",label:"PIN Code"},{field:"vendorType",label:"Business Type"}];for(const{field:G,label:X}of O)if(!a[G])return u(`${X} is required.`),!1;return a.location.address?a.shopImages.length+(s?a.existingShopImages.length:0)<4?(u("Please ensure you have at least 4 shop images total."),!1):a.panNumber.length!==9?(u("PAN number must be exactly 9 characters."),!1):!0:(u("Location address is required."),!1)},C=()=>{switch(u(""),r){case 0:if(!a.location.address)return u("Please select a location."),!1;break;case 1:if(!a.shopName||!a.ownerName||!a.phone||!a.email||!a.panNumber)return u("Please fill in all required shop information including PAN number."),!1;if(a.panNumber.length!==9)return u("PAN number must be exactly 9 characters."),!1;break;case 2:if(!a.shopAddress||!a.city||!a.state||!a.pincode)return u("Please fill in all address fields."),!1;break;case 4:if(a.shopImages.length+(s?a.existingShopImages.length:0)<4)return u("Please ensure you have at least 4 shop images total."),!1;break;case 6:if(!a.vendorType)return u("Please select a business type."),!1;break;case 7:if(a.categories.length===0)return u("Please select at least one category."),!1;break}return!0},T=async()=>{if(r<y.length-1)C()&&i(r+1);else{if(console.log("Starting form submission..."),!I()){console.log("Validation failed:",h);return}m(!0),u(""),x("");const O=new FormData;O.append("business_name",a.shopName),O.append("owner_name",a.ownerName),O.append("business_email",a.email),O.append("business_phone",a.phone),O.append("business_address",a.shopAddress),O.append("location_address",a.location.address),O.append("city",a.city),O.append("state",a.state),O.append("pincode",a.pincode),O.append("latitude",a.location.lat.toString()),O.append("longitude",a.location.lng.toString()),O.append("business_type",a.vendorType),O.append("categories",JSON.stringify(a.categories)),O.append("description",a.description||""),O.append("account_number",a.bankAccount||""),O.append("account_holder_name",a.accountHolderName||""),O.append("bank_name",a.bankName||""),O.append("ifsc_code",a.ifscCode||""),O.append("gst_number",a.gstNumber||""),O.append("pan_number",a.panNumber||""),O.append("delivery_radius",a.deliveryRadius||""),O.append("min_order_amount",a.minOrderAmount||""),a.shopRegDoc&&O.append("business_license_file",a.shopRegDoc),a.citizenshipFront&&O.append("citizenship_front",a.citizenshipFront),a.citizenshipBack&&O.append("citizenship_back",a.citizenshipBack),a.shopImages.length>0&&a.shopImages.forEach(($,G)=>{O.append(`shop_image_${G}`,$)});try{const $=localStorage.getItem("token");console.log(s?"Updating vendor profile...":"Submitting complete vendor onboarding...");const X=await fetch(rt+"complete-onboarding/",{method:"POST",headers:{Authorization:`Token ${$}`},body:O}),Y=await X.json();if(console.log("Complete onboarding response:",X.status,Y),!X.ok){let U="Failed to submit vendor application.";if(Y.detail)U=Y.detail;else if(Y.error)U=Y.error;else if(Y.user)U=Y.user;else if(typeof Y=="object"){const V=Object.entries(Y).map(([R,F])=>`${R}: ${Array.isArray(F)?F.join(", "):F}`).join("; ");V&&(U=V)}u(U),console.error("Complete onboarding failed:",Y);return}console.log(s?"Vendor profile updated successfully":"Vendor onboarding completed successfully"),Y.is_approved?(x(s?"Profile updated and approved successfully!":"Vendor profile submitted and approved successfully!"),console.log("Vendor approved. Navigating to dashboard..."),setTimeout(()=>{e("/vendor/dashboard")},3e3)):(x(s?"Your profile has been updated successfully and is pending approval. You will be notified once approved by the admin.":"Your vendor application has been submitted successfully and is pending approval. You will be notified once approved by the admin."),console.log("Vendor not approved yet. Redirecting to login page."),setTimeout(()=>{e("/vendor/login",{state:{successMessage:s?"Profile updated successfully! Pending admin approval.":"Application submitted successfully! Pending admin approval."}})},3e3))}catch($){console.error("Submission error:",$),u("An unexpected error occurred. Please try again.")}finally{m(!1)}}},M=()=>{r>0&&i(r-1)},P=(O,$)=>{o(G=>({...G,[O]:$}))},E=O=>{const $=a.categories.includes(O)?a.categories.filter(G=>G!==O):[...a.categories,O];P("categories",$)};return n.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s?"Update Your Application":"Complete Your Setup"}),n.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Step ",r+1," of ",y.length]}),s&&n.jsx("p",{className:"text-orange-600 text-sm mt-1",children:"Update your information and resubmit for approval"})]}),n.jsx("div",{className:"flex overflow-x-auto mb-8 pb-2",children:y.map((O,$)=>n.jsxs("button",{onClick:()=>i($),className:`flex-shrink-0 px-4 py-2 text-xs font-medium whitespace-nowrap ${$===r?"text-blue-600 border-b-2 border-blue-600":$<r?"text-green-600":"text-gray-400"}`,children:[$<r?"":$+1,". ",O]},O))}),n.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[f&&n.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsx("p",{className:"text-blue-600",children:"Submitting your application..."})}),h&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-600",children:h})}),p&&n.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:n.jsx("p",{className:"text-green-600",children:p})}),r===0&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Choose Your Location"}),n.jsx("div",{className:"h-48 rounded-lg",children:n.jsxs(LR,{center:[a.location.lat,a.location.lng],zoom:13,style:{height:"100%",width:"100%",borderRadius:"0.5rem"},children:[n.jsx(MR,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),n.jsx(Ny,{position:[a.location.lat,a.location.lng],icon:fK}),n.jsx(N,{}),n.jsx(_,{lat:a.location.lat,lng:a.location.lng})]})}),n.jsx(ne,{onClick:k,className:"w-full bg-blue-600 hover:bg-blue-700",children:"Use Live Location"}),c&&n.jsx("p",{className:"text-red-500 text-sm",children:c}),n.jsx(ve,{placeholder:"Selected address will appear here",value:a.location.address,onChange:O=>P("location",{...a.location,address:O.target.value})})]}),r===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Shop Information"}),n.jsx(ve,{placeholder:"Shop Name",value:a.shopName,onChange:O=>P("shopName",O.target.value)}),n.jsx(ve,{placeholder:"Owner Name",value:a.ownerName,onChange:O=>P("ownerName",O.target.value)}),n.jsx(ve,{placeholder:"Phone Number",value:a.phone,onChange:O=>P("phone",O.target.value)}),n.jsx(ve,{placeholder:"Email Address",value:a.email,onChange:O=>P("email",O.target.value)}),n.jsx(ve,{placeholder:"PAN Number *",value:a.panNumber,onChange:O=>{const $=O.target.value;$.length<=9&&P("panNumber",$)},maxLength:9,required:!0})]}),r===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Shop Address"}),n.jsx(ve,{placeholder:"Full Shop Address",value:a.shopAddress,onChange:O=>P("shopAddress",O.target.value)}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(ve,{placeholder:"City",value:a.city,onChange:O=>P("city",O.target.value)}),n.jsx(ve,{placeholder:"State",value:a.state,onChange:O=>P("state",O.target.value)})]}),n.jsx(ve,{placeholder:"PIN Code",value:a.pincode,onChange:O=>P("pincode",O.target.value)})]}),r===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Upload Documents"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Registration"}),s&&a.existingDocuments.panReg&&!a.shopRegDoc&&n.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),n.jsx("img",{src:a.existingDocuments.panReg,alt:"Current PAN",className:"w-32 h-20 object-cover rounded border mt-1"})]}),n.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>P("shopRegDoc",O.target.files[0])}),!s&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document"}),s&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),a.shopRegDoc&&n.jsx("div",{className:"mt-2",children:a.shopRegDoc.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.shopRegDoc),alt:"PAN Registration",className:"w-32 h-20 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:n.jsxs("p",{className:"text-sm text-green-700",children:[" ",a.shopRegDoc.name]})})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Citizenship (Front)"}),s&&a.existingDocuments.citizenshipFront&&!a.citizenshipFront&&n.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),n.jsx("img",{src:a.existingDocuments.citizenshipFront,alt:"Current Citizenship Front",className:"w-32 h-20 object-cover rounded border mt-1"})]}),n.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>P("citizenshipFront",O.target.files[0])}),s&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),a.citizenshipFront&&n.jsx("div",{className:"mt-2",children:a.citizenshipFront.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.citizenshipFront),alt:"Citizenship Front",className:"w-32 h-20 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:n.jsxs("p",{className:"text-sm text-green-700",children:[" ",a.citizenshipFront.name]})})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Citizenship (Back)"}),s&&a.existingDocuments.citizenshipBack&&!a.citizenshipBack&&n.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),n.jsx("img",{src:a.existingDocuments.citizenshipBack,alt:"Current Citizenship Back",className:"w-32 h-20 object-cover rounded border mt-1"})]}),n.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>P("citizenshipBack",O.target.files[0])}),s&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),a.citizenshipBack&&n.jsx("div",{className:"mt-2",children:a.citizenshipBack.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.citizenshipBack),alt:"Citizenship Back",className:"w-32 h-20 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:n.jsxs("p",{className:"text-sm text-green-700",children:[" ",a.citizenshipBack.name]})})})]})]})]}),r===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Shop Images"}),n.jsx("p",{className:"text-sm text-gray-600",children:s?"Current images shown below. Upload new images to add more.":"Upload at least 4 images of your shop (interior, exterior, products, etc.)"}),s&&a.existingShopImages.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Current Shop Images (",a.existingShopImages.length,")"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.existingShopImages.map((O,$)=>n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:n.jsx("img",{src:O.image_url,alt:`Existing shop image ${$+1}`,className:"w-full h-full object-cover"})}),O.is_primary&&n.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Existing Image"})]},$))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>{const $=Array.from(O.target.files);if($.length+a.shopImages.length>10){alert("Maximum 10 images allowed");return}P("shopImages",[...a.shopImages,...$])}}),n.jsx(ne,{type:"button",variant:"outline",className:"w-full",onClick:()=>{const O=document.createElement("input");O.type="file",O.accept="image/*",O.capture="environment",O.onchange=$=>{const G=$.target.files[0];if(G){if(a.shopImages.length>=10){alert("Maximum 10 images allowed");return}P("shopImages",[...a.shopImages,G])}},O.click()},children:" Take Photo"})]}),a.shopImages.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[s?"New Images to Add":"Uploaded Images"," (",a.shopImages.length,"/10)"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.shopImages.map((O,$)=>n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:n.jsx("img",{src:URL.createObjectURL(O),alt:`Shop image ${$+1}`,className:"w-full h-full object-cover"})}),n.jsx("button",{type:"button",onClick:()=>{const G=a.shopImages.filter((X,Y)=>Y!==$);P("shopImages",G)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:""}),n.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:O.name})]},$))}),!s&&a.shopImages.length<4&&n.jsx("p",{className:"text-sm text-orange-600",children:"Please upload at least 4 images of your shop"}),s&&a.shopImages.length+a.existingShopImages.length<4&&n.jsx("p",{className:"text-sm text-orange-600",children:"Total images (existing + new) should be at least 4"})]})]}),r===5&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Payment Details"}),n.jsx(ve,{placeholder:"Bank Account Number",value:a.bankAccount,onChange:O=>P("bankAccount",O.target.value)}),n.jsx(ve,{placeholder:"Account Holder/Organization Name",value:a.accountHolderName,onChange:O=>P("accountHolderName",O.target.value)}),n.jsx(ve,{placeholder:"Bank Name",value:a.bankName,onChange:O=>P("bankName",O.target.value)}),n.jsx(ve,{placeholder:"Minimum Order Amount (Optional)",value:a.minOrderAmount,onChange:O=>P("minOrderAmount",O.target.value)})]}),r===6&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Business Type"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(O=>n.jsx("button",{onClick:()=>P("vendorType",O.value),className:`p-3 text-sm rounded-lg border ${a.vendorType===O.value?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:O.label},O.value))})]}),r===7&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Product Categories"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Select categories you'll sell"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:v.length>0?v.map(O=>n.jsx("button",{onClick:()=>E(O),className:`p-3 text-sm rounded-lg border ${a.categories.includes(O)?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:O},O)):n.jsx("div",{className:"col-span-2 text-center text-gray-500 py-4",children:"No categories available. Please contact admin."})}),n.jsx(ve,{placeholder:"Business Description (Optional)",value:a.description,onChange:O=>P("description",O.target.value)})]}),r===8&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Review & Submit"}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Shop Information"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Shop Name:"})," ",a.shopName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Owner Name:"})," ",a.ownerName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",a.phone]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",a.email]}),n.jsxs("p",{children:[n.jsx("strong",{children:"PAN Number:"})," ",a.panNumber||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Shop Address:"})," ",a.shopAddress]}),n.jsxs("p",{children:[n.jsx("strong",{children:"City:"})," ",a.city]}),n.jsxs("p",{children:[n.jsx("strong",{children:"State:"})," ",a.state]}),n.jsxs("p",{children:[n.jsx("strong",{children:"PIN Code:"})," ",a.pincode]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Location:"})," ",a.location.address]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Documents"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"PAN Registration:"})," ",a.shopRegDoc||a.existingDocuments.panReg?" Available":" Not uploaded"]}),a.shopRegDoc?n.jsx("div",{className:"mt-2",children:a.shopRegDoc.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.shopRegDoc),alt:"New PAN Registration",className:"w-24 h-16 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:n.jsxs("p",{className:"text-xs text-green-700",children:[" ",a.shopRegDoc.name," (New)"]})})}):a.existingDocuments.panReg?n.jsxs("div",{className:"mt-2",children:[n.jsx("img",{src:a.existingDocuments.panReg,alt:"Current PAN Registration",className:"w-24 h-16 object-cover rounded border"}),n.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Citizenship (Front):"})," ",a.citizenshipFront||a.existingDocuments.citizenshipFront?" Available":" Not uploaded"]}),a.citizenshipFront?n.jsx("div",{className:"mt-2",children:a.citizenshipFront.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.citizenshipFront),alt:"New Citizenship Front",className:"w-24 h-16 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:n.jsxs("p",{className:"text-xs text-green-700",children:[" ",a.citizenshipFront.name," (New)"]})})}):a.existingDocuments.citizenshipFront?n.jsxs("div",{className:"mt-2",children:[n.jsx("img",{src:a.existingDocuments.citizenshipFront,alt:"Current Citizenship Front",className:"w-24 h-16 object-cover rounded border"}),n.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Citizenship (Back):"})," ",a.citizenshipBack||a.existingDocuments.citizenshipBack?" Available":" Not uploaded"]}),a.citizenshipBack?n.jsx("div",{className:"mt-2",children:a.citizenshipBack.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.citizenshipBack),alt:"New Citizenship Back",className:"w-24 h-16 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:n.jsxs("p",{className:"text-xs text-green-700",children:[" ",a.citizenshipBack.name," (New)"]})})}):a.existingDocuments.citizenshipBack?n.jsxs("div",{className:"mt-2",children:[n.jsx("img",{src:a.existingDocuments.citizenshipBack,alt:"Current Citizenship Back",className:"w-24 h-16 object-cover rounded border"}),n.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Shop Images"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total Images:"})," ",a.shopImages.length+a.existingShopImages.length,"/10"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Existing:"})," ",a.existingShopImages.length," | ",n.jsx("strong",{children:"New:"})," ",a.shopImages.length]}),a.shopImages.length+a.existingShopImages.length>=4?n.jsx("p",{className:"text-green-600 mb-3",children:" Minimum requirement met"}):n.jsx("p",{className:"text-red-600 mb-3",children:" Need at least 4 images total"}),a.existingShopImages.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-blue-600 mb-2",children:"Current Images:"}),n.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.existingShopImages.slice(0,4).map((O,$)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:O.image_url,alt:`Current shop ${$+1}`,className:"w-16 h-16 object-cover rounded border"}),O.is_primary&&n.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"})]},$)),a.existingShopImages.length>4&&n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border flex items-center justify-center",children:n.jsxs("span",{className:"text-xs text-gray-500",children:["+",a.existingShopImages.length-4]})})]})]}),a.shopImages.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-green-600 mb-2",children:"New Images to Add:"}),n.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.shopImages.slice(0,4).map((O,$)=>n.jsx("div",{className:"relative",children:n.jsx("img",{src:URL.createObjectURL(O),alt:`New shop ${$+1}`,className:"w-16 h-16 object-cover rounded border"})},$)),a.shopImages.length>4&&n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border flex items-center justify-center",children:n.jsxs("span",{className:"text-xs text-gray-500",children:["+",a.shopImages.length-4]})})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Payment Details"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Bank Account:"})," ",a.bankAccount||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Account Holder:"})," ",a.accountHolderName||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Bank Name:"})," ",a.bankName||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"IFSC Code:"})," ",a.ifscCode||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Business Details"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Business Type:"})," ",((z=b.find(O=>O.value===a.vendorType))==null?void 0:z.label)||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Categories:"})," ",a.categories.length>0?a.categories.join(", "):"None selected"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Description:"})," ",a.description||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"GST Number:"})," ",a.gstNumber||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Delivery Radius:"})," ",a.deliveryRadius||"N/A"," km"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Minimum Order Amount:"})," ",a.minOrderAmount||"N/A"]})]})]}),n.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:n.jsx("p",{className:"text-sm text-yellow-800",children:"Your application will be reviewed within 24-48 hours. You'll receive an email notification once approved."})}),h&&n.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-600 text-sm",children:h})})]})]}),n.jsxs("div",{className:"flex justify-between mt-6",children:[n.jsx(ne,{onClick:M,disabled:r===0,variant:"outline",className:"px-6",children:"Previous"}),n.jsx(ne,{onClick:T,disabled:f,className:"px-6 bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:f?"Submitting...":r===y.length-1?"Submit for Approval":"Next"})]})]})})}function pK(){const e=Qs(),t=nt(),{rejectionReason:s,rejectionDate:r}=e.state||{},i=()=>{t("/vendor/onboarding",{state:{isUpdate:!0}})};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:n.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:n.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Application Rejected"}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your vendor application has been rejected. Please review the feedback below and update your application."})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rejection Details"}),r&&n.jsxs("div",{className:"mb-4",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Rejected on: "}),n.jsx("span",{className:"text-sm text-gray-900",children:new Date(r).toLocaleDateString()})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Reason for rejection:"}),n.jsx("div",{className:"mt-2 p-4 bg-red-50 border border-red-200 rounded-md",children:n.jsx("p",{className:"text-sm text-red-800",children:s||"No specific reason provided. Please contact support for more details."})})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"What's next?"}),n.jsx("div",{className:"mt-2 text-sm text-blue-700",children:n.jsx("p",{children:"Please review the rejection reason above and update your application accordingly. You can modify your business information, upload new documents, or make any other necessary changes before resubmitting."})})]})]})}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx(ne,{onClick:i,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Update Application"}),n.jsx(ne,{onClick:()=>t("/vendor/login"),variant:"outline",className:"flex-1",children:"Back to Login"})]})]})]})})}var dh=e=>e.type==="checkbox",No=e=>e instanceof Date,ms=e=>e==null;const nL=e=>typeof e=="object";var Sn=e=>!ms(e)&&!Array.isArray(e)&&nL(e)&&!No(e),sL=e=>Sn(e)&&e.target?dh(e.target)?e.target.checked:e.target.value:e,gK=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,rL=(e,t)=>e.has(gK(t)),vK=e=>{const t=e.constructor&&e.constructor.prototype;return Sn(t)&&t.hasOwnProperty("isPrototypeOf")},Uw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Mn(e){let t;const s=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Uw&&(e instanceof Blob||r))&&(s||Sn(e)))if(t=s?[]:{},!s&&!vK(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Mn(e[i]));else return e;return t}var Hp=e=>/^\w*$/.test(e),jn=e=>e===void 0,qw=e=>Array.isArray(e)?e.filter(Boolean):[],Hw=e=>qw(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(e,t,s)=>{if(!t||!Sn(e))return s;const r=(Hp(t)?[t]:Hw(t)).reduce((i,a)=>ms(i)?i:i[a],e);return jn(r)||r===e?jn(e[t])?s:e[t]:r},Us=e=>typeof e=="boolean",It=(e,t,s)=>{let r=-1;const i=Hp(t)?[t]:Hw(t),a=i.length,o=a-1;for(;++r<a;){const c=i[r];let d=s;if(r!==o){const f=e[c];d=Sn(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=d,e=e[c]}};const Nm={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Or={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Li={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iL=Ne.createContext(null);iL.displayName="HookFormContext";const Ww=()=>Ne.useContext(iL);var aL=(e,t,s,r=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Or.all&&(t._proxyFormState[o]=!r||Or.all),s&&(s[o]=!0),e[o]}});return i};const Zw=typeof window<"u"?Ne.useLayoutEffect:Ne.useEffect;function xK(e){const t=Ww(),{control:s=t.control,disabled:r,name:i,exact:a}=e||{},[o,c]=Ne.useState(s._formState),d=Ne.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Zw(()=>s._subscribe({name:i,formState:d.current,exact:a,callback:f=>{!r&&c({...s._formState,...f})}}),[i,r,a]),Ne.useEffect(()=>{d.current.isValid&&s._setValid(!0)},[s]),Ne.useMemo(()=>aL(o,s,d.current,!1),[o,s])}var ci=e=>typeof e=="string",oL=(e,t,s,r,i)=>ci(e)?(r&&t.watch.add(e),Be(s,e,i)):Array.isArray(e)?e.map(a=>(r&&t.watch.add(a),Be(s,a))):(r&&(t.watchAll=!0),s),Ry=e=>ms(e)||!nL(e);function Bi(e,t,s=new WeakSet){if(Ry(e)||Ry(t))return e===t;if(No(e)&&No(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;if(s.has(e)||s.has(t))return!0;s.add(e),s.add(t);for(const a of r){const o=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const c=t[a];if(No(o)&&No(c)||Sn(o)&&Sn(c)||Array.isArray(o)&&Array.isArray(c)?!Bi(o,c,s):o!==c)return!1}}return!0}function yK(e){const t=Ww(),{control:s=t.control,name:r,defaultValue:i,disabled:a,exact:o,compute:c}=e||{},d=Ne.useRef(i),f=Ne.useRef(c),m=Ne.useRef(void 0);f.current=c;const h=Ne.useMemo(()=>s._getWatch(r,d.current),[s,r]),[u,p]=Ne.useState(f.current?f.current(h):h);return Zw(()=>s._subscribe({name:r,formState:{values:!0},exact:o,callback:x=>{if(!a){const v=oL(r,s._names,x.values||s._formValues,!1,d.current);if(f.current){const w=f.current(v);Bi(w,m.current)||(p(w),m.current=w)}else p(v)}}}),[s,a,r,o]),Ne.useEffect(()=>s._removeUnmounted()),u}function bK(e){const t=Ww(),{name:s,disabled:r,control:i=t.control,shouldUnregister:a,defaultValue:o}=e,c=rL(i._names.array,s),d=Ne.useMemo(()=>Be(i._formValues,s,Be(i._defaultValues,s,o)),[i,s,o]),f=yK({control:i,name:s,defaultValue:d,exact:!0}),m=xK({control:i,name:s,exact:!0}),h=Ne.useRef(e),u=Ne.useRef(i.register(s,{...e.rules,value:f,...Us(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const p=Ne.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Be(m.errors,s)},isDirty:{enumerable:!0,get:()=>!!Be(m.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!Be(m.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!Be(m.validatingFields,s)},error:{enumerable:!0,get:()=>Be(m.errors,s)}}),[m,s]),x=Ne.useCallback(b=>u.current.onChange({target:{value:sL(b),name:s},type:Nm.CHANGE}),[s]),v=Ne.useCallback(()=>u.current.onBlur({target:{value:Be(i._formValues,s),name:s},type:Nm.BLUR}),[s,i._formValues]),w=Ne.useCallback(b=>{const _=Be(i._fields,s);_&&b&&(_._f.ref={focus:()=>b.focus&&b.focus(),select:()=>b.select&&b.select(),setCustomValidity:N=>b.setCustomValidity(N),reportValidity:()=>b.reportValidity()})},[i._fields,s]),y=Ne.useMemo(()=>({name:s,value:f,...Us(r)||m.disabled?{disabled:m.disabled||r}:{},onChange:x,onBlur:v,ref:w}),[s,r,m.disabled,x,v,w,f]);return Ne.useEffect(()=>{const b=i._options.shouldUnregister||a;i.register(s,{...h.current.rules,...Us(h.current.disabled)?{disabled:h.current.disabled}:{}});const _=(N,k)=>{const I=Be(i._fields,N);I&&I._f&&(I._f.mount=k)};if(_(s,!0),b){const N=Mn(Be(i._options.defaultValues,s));It(i._defaultValues,s,N),jn(Be(i._formValues,s))&&It(i._formValues,s,N)}return!c&&i.register(s),()=>{(c?b&&!i._state.action:b)?i.unregister(s):_(s,!1)}},[s,i,c,a]),Ne.useEffect(()=>{i._setDisabledField({disabled:r,name:s})},[r,s,i]),Ne.useMemo(()=>({field:y,formState:m,fieldState:p}),[y,m,p])}const bt=e=>e.render(bK(e));var lL=(e,t,s,r,i)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[r]:i||!0}}:{},nu=e=>Array.isArray(e)?e:[e],AS=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},Ps=e=>Sn(e)&&!Object.keys(e).length,Gw=e=>e.type==="file",Rr=e=>typeof e=="function",Sm=e=>{if(!Uw)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},cL=e=>e.type==="select-multiple",Kw=e=>e.type==="radio",wK=e=>Kw(e)||dh(e),Lv=e=>Sm(e)&&e.isConnected;function jK(e,t){const s=t.slice(0,-1).length;let r=0;for(;r<s;)e=jn(e)?r++:e[t[r++]];return e}function _K(e){for(const t in e)if(e.hasOwnProperty(t)&&!jn(e[t]))return!1;return!0}function An(e,t){const s=Array.isArray(t)?t:Hp(t)?[t]:Hw(t),r=s.length===1?e:jK(e,s),i=s.length-1,a=s[i];return r&&delete r[a],i!==0&&(Sn(r)&&Ps(r)||Array.isArray(r)&&_K(r))&&An(e,s.slice(0,-1)),e}var dL=e=>{for(const t in e)if(Rr(e[t]))return!0;return!1};function km(e,t={}){const s=Array.isArray(e);if(Sn(e)||s)for(const r in e)Array.isArray(e[r])||Sn(e[r])&&!dL(e[r])?(t[r]=Array.isArray(e[r])?[]:{},km(e[r],t[r])):ms(e[r])||(t[r]=!0);return t}function uL(e,t,s){const r=Array.isArray(e);if(Sn(e)||r)for(const i in e)Array.isArray(e[i])||Sn(e[i])&&!dL(e[i])?jn(t)||Ry(s[i])?s[i]=Array.isArray(e[i])?km(e[i],[]):{...km(e[i])}:uL(e[i],ms(t)?{}:t[i],s[i]):s[i]=!Bi(e[i],t[i]);return s}var kd=(e,t)=>uL(e,t,km(t));const OS={value:!1,isValid:!1},RS={value:!0,isValid:!0};var hL=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!jn(e[0].attributes.value)?jn(e[0].value)||e[0].value===""?RS:{value:e[0].value,isValid:!0}:RS:OS}return OS},fL=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:r})=>jn(e)?e:t?e===""?NaN:e&&+e:s&&ci(e)?new Date(e):r?r(e):e;const LS={isValid:!1,value:null};var mL=e=>Array.isArray(e)?e.reduce((t,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:t,LS):LS;function MS(e){const t=e.ref;return Gw(t)?t.files:Kw(t)?mL(e.refs).value:cL(t)?[...t.selectedOptions].map(({value:s})=>s):dh(t)?hL(e.refs).value:fL(jn(t.value)?e.ref.value:t.value,e)}var NK=(e,t,s,r)=>{const i={};for(const a of e){const o=Be(t,a);o&&It(i,a,o._f)}return{criteriaMode:s,names:[...e],fields:i,shouldUseNativeValidation:r}},Cm=e=>e instanceof RegExp,Cd=e=>jn(e)?e:Cm(e)?e.source:Sn(e)?Cm(e.value)?e.value.source:e.value:e,IS=e=>({isOnSubmit:!e||e===Or.onSubmit,isOnBlur:e===Or.onBlur,isOnChange:e===Or.onChange,isOnAll:e===Or.all,isOnTouch:e===Or.onTouched});const DS="AsyncFunction";var SK=e=>!!e&&!!e.validate&&!!(Rr(e.validate)&&e.validate.constructor.name===DS||Sn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===DS)),kK=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),FS=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const su=(e,t,s,r)=>{for(const i of s||Object.keys(e)){const a=Be(e,i);if(a){const{_f:o,...c}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(su(c,t))break}else if(Sn(c)&&su(c,t))break}}};function $S(e,t,s){const r=Be(e,s);if(r||Hp(s))return{error:r,name:s};const i=s.split(".");for(;i.length;){const a=i.join("."),o=Be(t,a),c=Be(e,a);if(o&&!Array.isArray(o)&&s!==a)return{name:s};if(c&&c.type)return{name:a,error:c};if(c&&c.root&&c.root.type)return{name:`${a}.root`,error:c.root};i.pop()}return{name:s}}var CK=(e,t,s,r)=>{s(e);const{name:i,...a}=e;return Ps(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!r||Or.all))},PK=(e,t,s)=>!e||!t||e===t||nu(e).some(r=>r&&(s?r===t:r.startsWith(t)||t.startsWith(r))),EK=(e,t,s,r,i)=>i.isOnAll?!1:!s&&i.isOnTouch?!(t||e):(s?r.isOnBlur:i.isOnBlur)?!e:(s?r.isOnChange:i.isOnChange)?e:!0,TK=(e,t)=>!qw(Be(e,t)).length&&An(e,t),AK=(e,t,s)=>{const r=nu(Be(e,s));return It(r,"root",t[s]),It(e,s,r),e},Af=e=>ci(e);function zS(e,t,s="validate"){if(Af(e)||Array.isArray(e)&&e.every(Af)||Us(e)&&!e)return{type:s,message:Af(e)?e:"",ref:t}}var vl=e=>Sn(e)&&!Cm(e)?e:{value:e,message:""},BS=async(e,t,s,r,i,a)=>{const{ref:o,refs:c,required:d,maxLength:f,minLength:m,min:h,max:u,pattern:p,validate:x,name:v,valueAsNumber:w,mount:y}=e._f,b=Be(s,v);if(!y||t.has(v))return{};const _=c?c[0]:o,N=A=>{i&&_.reportValidity&&(_.setCustomValidity(Us(A)?"":A||""),_.reportValidity())},k={},I=Kw(o),C=dh(o),T=I||C,M=(w||Gw(o))&&jn(o.value)&&jn(b)||Sm(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,P=lL.bind(null,v,r,k),E=(A,z,O,$=Li.maxLength,G=Li.minLength)=>{const X=A?z:O;k[v]={type:A?$:G,message:X,ref:o,...P(A?$:G,X)}};if(a?!Array.isArray(b)||!b.length:d&&(!T&&(M||ms(b))||Us(b)&&!b||C&&!hL(c).isValid||I&&!mL(c).isValid)){const{value:A,message:z}=Af(d)?{value:!!d,message:d}:vl(d);if(A&&(k[v]={type:Li.required,message:z,ref:_,...P(Li.required,z)},!r))return N(z),k}if(!M&&(!ms(h)||!ms(u))){let A,z;const O=vl(u),$=vl(h);if(!ms(b)&&!isNaN(b)){const G=o.valueAsNumber||b&&+b;ms(O.value)||(A=G>O.value),ms($.value)||(z=G<$.value)}else{const G=o.valueAsDate||new Date(b),X=V=>new Date(new Date().toDateString()+" "+V),Y=o.type=="time",U=o.type=="week";ci(O.value)&&b&&(A=Y?X(b)>X(O.value):U?b>O.value:G>new Date(O.value)),ci($.value)&&b&&(z=Y?X(b)<X($.value):U?b<$.value:G<new Date($.value))}if((A||z)&&(E(!!A,O.message,$.message,Li.max,Li.min),!r))return N(k[v].message),k}if((f||m)&&!M&&(ci(b)||a&&Array.isArray(b))){const A=vl(f),z=vl(m),O=!ms(A.value)&&b.length>+A.value,$=!ms(z.value)&&b.length<+z.value;if((O||$)&&(E(O,A.message,z.message),!r))return N(k[v].message),k}if(p&&!M&&ci(b)){const{value:A,message:z}=vl(p);if(Cm(A)&&!b.match(A)&&(k[v]={type:Li.pattern,message:z,ref:o,...P(Li.pattern,z)},!r))return N(z),k}if(x){if(Rr(x)){const A=await x(b,s),z=zS(A,_);if(z&&(k[v]={...z,...P(Li.validate,z.message)},!r))return N(z.message),k}else if(Sn(x)){let A={};for(const z in x){if(!Ps(A)&&!r)break;const O=zS(await x[z](b,s),_,z);O&&(A={...O,...P(z,O.message)},N(O.message),r&&(k[v]=A))}if(!Ps(A)&&(k[v]={ref:_,...A},!r))return k}}return N(!0),k};const OK={mode:Or.onSubmit,reValidateMode:Or.onChange,shouldFocusError:!0};function RK(e={}){let t={...OK,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Rr(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},i=Sn(t.defaultValues)||Sn(t.values)?Mn(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Mn(i),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...m};const u={array:AS(),state:AS()},p=t.criteriaMode===Or.all,x=te=>ae=>{clearTimeout(f),f=setTimeout(te,ae)},v=async te=>{if(!t.disabled&&(m.isValid||h.isValid||te)){const ae=t.resolver?Ps((await C()).errors):await M(r,!0);ae!==s.isValid&&u.state.next({isValid:ae})}},w=(te,ae)=>{!t.disabled&&(m.isValidating||m.validatingFields||h.isValidating||h.validatingFields)&&((te||Array.from(c.mount)).forEach(oe=>{oe&&(ae?It(s.validatingFields,oe,ae):An(s.validatingFields,oe))}),u.state.next({validatingFields:s.validatingFields,isValidating:!Ps(s.validatingFields)}))},y=(te,ae=[],oe,be,je=!0,we=!0)=>{if(be&&oe&&!t.disabled){if(o.action=!0,we&&Array.isArray(Be(r,te))){const re=oe(Be(r,te),be.argA,be.argB);je&&It(r,te,re)}if(we&&Array.isArray(Be(s.errors,te))){const re=oe(Be(s.errors,te),be.argA,be.argB);je&&It(s.errors,te,re),TK(s.errors,te)}if((m.touchedFields||h.touchedFields)&&we&&Array.isArray(Be(s.touchedFields,te))){const re=oe(Be(s.touchedFields,te),be.argA,be.argB);je&&It(s.touchedFields,te,re)}(m.dirtyFields||h.dirtyFields)&&(s.dirtyFields=kd(i,a)),u.state.next({name:te,isDirty:E(te,ae),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else It(a,te,ae)},b=(te,ae)=>{It(s.errors,te,ae),u.state.next({errors:s.errors})},_=te=>{s.errors=te,u.state.next({errors:s.errors,isValid:!1})},N=(te,ae,oe,be)=>{const je=Be(r,te);if(je){const we=Be(a,te,jn(oe)?Be(i,te):oe);jn(we)||be&&be.defaultChecked||ae?It(a,te,ae?we:MS(je._f)):O(te,we),o.mount&&v()}},k=(te,ae,oe,be,je)=>{let we=!1,re=!1;const Pe={name:te};if(!t.disabled){if(!oe||be){(m.isDirty||h.isDirty)&&(re=s.isDirty,s.isDirty=Pe.isDirty=E(),we=re!==Pe.isDirty);const Ae=Bi(Be(i,te),ae);re=!!Be(s.dirtyFields,te),Ae?An(s.dirtyFields,te):It(s.dirtyFields,te,!0),Pe.dirtyFields=s.dirtyFields,we=we||(m.dirtyFields||h.dirtyFields)&&re!==!Ae}if(oe){const Ae=Be(s.touchedFields,te);Ae||(It(s.touchedFields,te,oe),Pe.touchedFields=s.touchedFields,we=we||(m.touchedFields||h.touchedFields)&&Ae!==oe)}we&&je&&u.state.next(Pe)}return we?Pe:{}},I=(te,ae,oe,be)=>{const je=Be(s.errors,te),we=(m.isValid||h.isValid)&&Us(ae)&&s.isValid!==ae;if(t.delayError&&oe?(d=x(()=>b(te,oe)),d(t.delayError)):(clearTimeout(f),d=null,oe?It(s.errors,te,oe):An(s.errors,te)),(oe?!Bi(je,oe):je)||!Ps(be)||we){const re={...be,...we&&Us(ae)?{isValid:ae}:{},errors:s.errors,name:te};s={...s,...re},u.state.next(re)}},C=async te=>{w(te,!0);const ae=await t.resolver(a,t.context,NK(te||c.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return w(te),ae},T=async te=>{const{errors:ae}=await C(te);if(te)for(const oe of te){const be=Be(ae,oe);be?It(s.errors,oe,be):An(s.errors,oe)}else s.errors=ae;return ae},M=async(te,ae,oe={valid:!0})=>{for(const be in te){const je=te[be];if(je){const{_f:we,...re}=je;if(we){const Pe=c.array.has(we.name),Ae=je._f&&SK(je._f);Ae&&m.validatingFields&&w([be],!0);const lt=await BS(je,c.disabled,a,p,t.shouldUseNativeValidation&&!ae,Pe);if(Ae&&m.validatingFields&&w([be]),lt[we.name]&&(oe.valid=!1,ae))break;!ae&&(Be(lt,we.name)?Pe?AK(s.errors,lt,we.name):It(s.errors,we.name,lt[we.name]):An(s.errors,we.name))}!Ps(re)&&await M(re,ae,oe)}}return oe.valid},P=()=>{for(const te of c.unMount){const ae=Be(r,te);ae&&(ae._f.refs?ae._f.refs.every(oe=>!Lv(oe)):!Lv(ae._f.ref))&&Z(te)}c.unMount=new Set},E=(te,ae)=>!t.disabled&&(te&&ae&&It(a,te,ae),!Bi(V(),i)),A=(te,ae,oe)=>oL(te,c,{...o.mount?a:jn(ae)?i:ci(te)?{[te]:ae}:ae},oe,ae),z=te=>qw(Be(o.mount?a:i,te,t.shouldUnregister?Be(i,te,[]):[])),O=(te,ae,oe={})=>{const be=Be(r,te);let je=ae;if(be){const we=be._f;we&&(!we.disabled&&It(a,te,fL(ae,we)),je=Sm(we.ref)&&ms(ae)?"":ae,cL(we.ref)?[...we.ref.options].forEach(re=>re.selected=je.includes(re.value)):we.refs?dh(we.ref)?we.refs.forEach(re=>{(!re.defaultChecked||!re.disabled)&&(Array.isArray(je)?re.checked=!!je.find(Pe=>Pe===re.value):re.checked=je===re.value||!!je)}):we.refs.forEach(re=>re.checked=re.value===je):Gw(we.ref)?we.ref.value="":(we.ref.value=je,we.ref.type||u.state.next({name:te,values:Mn(a)})))}(oe.shouldDirty||oe.shouldTouch)&&k(te,je,oe.shouldTouch,oe.shouldDirty,!0),oe.shouldValidate&&U(te)},$=(te,ae,oe)=>{for(const be in ae){if(!ae.hasOwnProperty(be))return;const je=ae[be],we=te+"."+be,re=Be(r,we);(c.array.has(te)||Sn(je)||re&&!re._f)&&!No(je)?$(we,je,oe):O(we,je,oe)}},G=(te,ae,oe={})=>{const be=Be(r,te),je=c.array.has(te),we=Mn(ae);It(a,te,we),je?(u.array.next({name:te,values:Mn(a)}),(m.isDirty||m.dirtyFields||h.isDirty||h.dirtyFields)&&oe.shouldDirty&&u.state.next({name:te,dirtyFields:kd(i,a),isDirty:E(te,we)})):be&&!be._f&&!ms(we)?$(te,we,oe):O(te,we,oe),FS(te,c)&&u.state.next({...s,name:te}),u.state.next({name:o.mount?te:void 0,values:Mn(a)})},X=async te=>{o.mount=!0;const ae=te.target;let oe=ae.name,be=!0;const je=Be(r,oe),we=Ae=>{be=Number.isNaN(Ae)||No(Ae)&&isNaN(Ae.getTime())||Bi(Ae,Be(a,oe,Ae))},re=IS(t.mode),Pe=IS(t.reValidateMode);if(je){let Ae,lt;const it=ae.type?MS(je._f):sL(te),Ft=te.type===Nm.BLUR||te.type===Nm.FOCUS_OUT,zs=!kK(je._f)&&!t.resolver&&!Be(s.errors,oe)&&!je._f.deps||EK(Ft,Be(s.touchedFields,oe),s.isSubmitted,Pe,re),ce=FS(oe,c,Ft);It(a,oe,it),Ft?(je._f.onBlur&&je._f.onBlur(te),d&&d(0)):je._f.onChange&&je._f.onChange(te);const $e=k(oe,it,Ft),Je=!Ps($e)||ce;if(!Ft&&u.state.next({name:oe,type:te.type,values:Mn(a)}),zs)return(m.isValid||h.isValid)&&(t.mode==="onBlur"?Ft&&v():Ft||v()),Je&&u.state.next({name:oe,...ce?{}:$e});if(!Ft&&ce&&u.state.next({...s}),t.resolver){const{errors:ze}=await C([oe]);if(we(it),be){const He=$S(s.errors,r,oe),Ge=$S(ze,r,He.name||oe);Ae=Ge.error,oe=Ge.name,lt=Ps(ze)}}else w([oe],!0),Ae=(await BS(je,c.disabled,a,p,t.shouldUseNativeValidation))[oe],w([oe]),we(it),be&&(Ae?lt=!1:(m.isValid||h.isValid)&&(lt=await M(r,!0)));be&&(je._f.deps&&U(je._f.deps),I(oe,lt,Ae,$e))}},Y=(te,ae)=>{if(Be(s.errors,ae)&&te.focus)return te.focus(),1},U=async(te,ae={})=>{let oe,be;const je=nu(te);if(t.resolver){const we=await T(jn(te)?te:je);oe=Ps(we),be=te?!je.some(re=>Be(we,re)):oe}else te?(be=(await Promise.all(je.map(async we=>{const re=Be(r,we);return await M(re&&re._f?{[we]:re}:re)}))).every(Boolean),!(!be&&!s.isValid)&&v()):be=oe=await M(r);return u.state.next({...!ci(te)||(m.isValid||h.isValid)&&oe!==s.isValid?{}:{name:te},...t.resolver||!te?{isValid:oe}:{},errors:s.errors}),ae.shouldFocus&&!be&&su(r,Y,te?je:c.mount),be},V=te=>{const ae={...o.mount?a:i};return jn(te)?ae:ci(te)?Be(ae,te):te.map(oe=>Be(ae,oe))},R=(te,ae)=>({invalid:!!Be((ae||s).errors,te),isDirty:!!Be((ae||s).dirtyFields,te),error:Be((ae||s).errors,te),isValidating:!!Be(s.validatingFields,te),isTouched:!!Be((ae||s).touchedFields,te)}),F=te=>{te&&nu(te).forEach(ae=>An(s.errors,ae)),u.state.next({errors:te?s.errors:{}})},q=(te,ae,oe)=>{const be=(Be(r,te,{_f:{}})._f||{}).ref,je=Be(s.errors,te)||{},{ref:we,message:re,type:Pe,...Ae}=je;It(s.errors,te,{...Ae,...ae,ref:be}),u.state.next({name:te,errors:s.errors,isValid:!1}),oe&&oe.shouldFocus&&be&&be.focus&&be.focus()},W=(te,ae)=>Rr(te)?u.state.subscribe({next:oe=>"values"in oe&&te(A(void 0,ae),oe)}):A(te,ae,!0),K=te=>u.state.subscribe({next:ae=>{PK(te.name,ae.name,te.exact)&&CK(ae,te.formState||m,xe,te.reRenderRoot)&&te.callback({values:{...a},...s,...ae,defaultValues:i})}}).unsubscribe,B=te=>(o.mount=!0,h={...h,...te.formState},K({...te,formState:h})),Z=(te,ae={})=>{for(const oe of te?nu(te):c.mount)c.mount.delete(oe),c.array.delete(oe),ae.keepValue||(An(r,oe),An(a,oe)),!ae.keepError&&An(s.errors,oe),!ae.keepDirty&&An(s.dirtyFields,oe),!ae.keepTouched&&An(s.touchedFields,oe),!ae.keepIsValidating&&An(s.validatingFields,oe),!t.shouldUnregister&&!ae.keepDefaultValue&&An(i,oe);u.state.next({values:Mn(a)}),u.state.next({...s,...ae.keepDirty?{isDirty:E()}:{}}),!ae.keepIsValid&&v()},se=({disabled:te,name:ae})=>{(Us(te)&&o.mount||te||c.disabled.has(ae))&&(te?c.disabled.add(ae):c.disabled.delete(ae))},J=(te,ae={})=>{let oe=Be(r,te);const be=Us(ae.disabled)||Us(t.disabled);return It(r,te,{...oe||{},_f:{...oe&&oe._f?oe._f:{ref:{name:te}},name:te,mount:!0,...ae}}),c.mount.add(te),oe?se({disabled:Us(ae.disabled)?ae.disabled:t.disabled,name:te}):N(te,!0,ae.value),{...be?{disabled:ae.disabled||t.disabled}:{},...t.progressive?{required:!!ae.required,min:Cd(ae.min),max:Cd(ae.max),minLength:Cd(ae.minLength),maxLength:Cd(ae.maxLength),pattern:Cd(ae.pattern)}:{},name:te,onChange:X,onBlur:X,ref:je=>{if(je){J(te,ae),oe=Be(r,te);const we=jn(je.value)&&je.querySelectorAll&&je.querySelectorAll("input,select,textarea")[0]||je,re=wK(we),Pe=oe._f.refs||[];if(re?Pe.find(Ae=>Ae===we):we===oe._f.ref)return;It(r,te,{_f:{...oe._f,...re?{refs:[...Pe.filter(Lv),we,...Array.isArray(Be(i,te))?[{}]:[]],ref:{type:we.type,name:te}}:{ref:we}}}),N(te,!1,void 0,we)}else oe=Be(r,te,{}),oe._f&&(oe._f.mount=!1),(t.shouldUnregister||ae.shouldUnregister)&&!(rL(c.array,te)&&o.action)&&c.unMount.add(te)}}},ie=()=>t.shouldFocusError&&su(r,Y,c.mount),le=te=>{Us(te)&&(u.state.next({disabled:te}),su(r,(ae,oe)=>{const be=Be(r,oe);be&&(ae.disabled=be._f.disabled||te,Array.isArray(be._f.refs)&&be._f.refs.forEach(je=>{je.disabled=be._f.disabled||te}))},0,!1))},Q=(te,ae)=>async oe=>{let be;oe&&(oe.preventDefault&&oe.preventDefault(),oe.persist&&oe.persist());let je=Mn(a);if(u.state.next({isSubmitting:!0}),t.resolver){const{errors:we,values:re}=await C();s.errors=we,je=Mn(re)}else await M(r);if(c.disabled.size)for(const we of c.disabled)An(je,we);if(An(s.errors,"root"),Ps(s.errors)){u.state.next({errors:{}});try{await te(je,oe)}catch(we){be=we}}else ae&&await ae({...s.errors},oe),ie(),setTimeout(ie);if(u.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ps(s.errors)&&!be,submitCount:s.submitCount+1,errors:s.errors}),be)throw be},ue=(te,ae={})=>{Be(r,te)&&(jn(ae.defaultValue)?G(te,Mn(Be(i,te))):(G(te,ae.defaultValue),It(i,te,Mn(ae.defaultValue))),ae.keepTouched||An(s.touchedFields,te),ae.keepDirty||(An(s.dirtyFields,te),s.isDirty=ae.defaultValue?E(te,Mn(Be(i,te))):E()),ae.keepError||(An(s.errors,te),m.isValid&&v()),u.state.next({...s}))},_e=(te,ae={})=>{const oe=te?Mn(te):i,be=Mn(oe),je=Ps(te),we=je?i:be;if(ae.keepDefaultValues||(i=oe),!ae.keepValues){if(ae.keepDirtyValues){const re=new Set([...c.mount,...Object.keys(kd(i,a))]);for(const Pe of Array.from(re))Be(s.dirtyFields,Pe)?It(we,Pe,Be(a,Pe)):G(Pe,Be(we,Pe))}else{if(Uw&&jn(te))for(const re of c.mount){const Pe=Be(r,re);if(Pe&&Pe._f){const Ae=Array.isArray(Pe._f.refs)?Pe._f.refs[0]:Pe._f.ref;if(Sm(Ae)){const lt=Ae.closest("form");if(lt){lt.reset();break}}}}if(ae.keepFieldsRef)for(const re of c.mount)G(re,Be(we,re));else r={}}a=t.shouldUnregister?ae.keepDefaultValues?Mn(i):{}:Mn(we),u.array.next({values:{...we}}),u.state.next({values:{...we}})}c={mount:ae.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!ae.keepIsValid||!!ae.keepDirtyValues,o.watch=!!t.shouldUnregister,u.state.next({submitCount:ae.keepSubmitCount?s.submitCount:0,isDirty:je?!1:ae.keepDirty?s.isDirty:!!(ae.keepDefaultValues&&!Bi(te,i)),isSubmitted:ae.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:je?{}:ae.keepDirtyValues?ae.keepDefaultValues&&a?kd(i,a):s.dirtyFields:ae.keepDefaultValues&&te?kd(i,te):ae.keepDirty?s.dirtyFields:{},touchedFields:ae.keepTouched?s.touchedFields:{},errors:ae.keepErrors?s.errors:{},isSubmitSuccessful:ae.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},me=(te,ae)=>_e(Rr(te)?te(a):te,ae),Se=(te,ae={})=>{const oe=Be(r,te),be=oe&&oe._f;if(be){const je=be.refs?be.refs[0]:be.ref;je.focus&&(je.focus(),ae.shouldSelect&&Rr(je.select)&&je.select())}},xe=te=>{s={...s,...te}},pe={control:{register:J,unregister:Z,getFieldState:R,handleSubmit:Q,setError:q,_subscribe:K,_runSchema:C,_focusError:ie,_getWatch:A,_getDirty:E,_setValid:v,_setFieldArray:y,_setDisabledField:se,_setErrors:_,_getFieldArray:z,_reset:_e,_resetDefaultValues:()=>Rr(t.defaultValues)&&t.defaultValues().then(te=>{me(te,t.resetOptions),u.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:le,_subjects:u,_proxyFormState:m,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(te){o=te},get _defaultValues(){return i},get _names(){return c},set _names(te){c=te},get _formState(){return s},get _options(){return t},set _options(te){t={...t,...te}}},subscribe:B,trigger:U,register:J,handleSubmit:Q,watch:W,setValue:G,getValues:V,reset:me,resetField:ue,clearErrors:F,unregister:Z,setError:q,setFocus:Se,getFieldState:R};return{...pe,formControl:pe}}function pL(e={}){const t=Ne.useRef(void 0),s=Ne.useRef(void 0),[r,i]=Ne.useState({isDirty:!1,isValidating:!1,isLoading:Rr(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Rr(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Rr(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...c}=RK(e);t.current={...c,formState:r}}const a=t.current.control;return a._options=e,Zw(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(c=>({...c,isReady:!0})),a._formState.isReady=!0,o},[a]),Ne.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Ne.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),Ne.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),Ne.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),Ne.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),Ne.useEffect(()=>{e.values&&!Bi(e.values,s.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),s.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[a,e.values]),Ne.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=aL(r,a),t.current}const VS=(e,t,s)=>{if(e&&"reportValidity"in e){const r=Be(s,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},gL=(e,t)=>{for(const s in t.fields){const r=t.fields[s];r&&r.ref&&"reportValidity"in r.ref?VS(r.ref,s,e):r.refs&&r.refs.forEach(i=>VS(i,s,e))}},LK=(e,t)=>{t.shouldUseNativeValidation&&gL(e,t);const s={};for(const r in e){const i=Be(t.fields,r),a=Object.assign(e[r]||{},{ref:i&&i.ref});if(MK(t.names||Object.keys(e),r)){const o=Object.assign({},Be(s,r));It(o,"root",a),It(s,r,o)}else It(s,r,a)}return s},MK=(e,t)=>e.some(s=>s.startsWith(t+"."));var IK=function(e,t){for(var s={};e.length;){var r=e[0],i=r.code,a=r.message,o=r.path.join(".");if(!s[o])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];s[o]={message:c.message,type:c.code}}else s[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(m){return m.errors.forEach(function(h){return e.push(h)})}),t){var d=s[o].types,f=d&&d[r.code];s[o]=lL(o,t,s,i,f?[].concat(f,r.message):r.message)}e.shift()}return s},vL=function(e,t,s){return s===void 0&&(s={}),function(r,i,a){try{return Promise.resolve(function(o,c){try{var d=Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(f){return a.shouldUseNativeValidation&&gL({},a),{errors:{},values:s.raw?r:f}})}catch(f){return c(f)}return d&&d.then?d.then(void 0,c):d}(0,function(o){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(o))return{values:{},errors:LK(IK(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Mt;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function s(i){throw new Error}e.assertNever=s,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),o={};for(const c of a)o[c]=i[c];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Mt||(Mt={}));var US;(function(e){e.mergeShapes=(t,s)=>({...t,...s})})(US||(US={}));const Ye=Mt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xa=e=>{switch(typeof e){case"undefined":return Ye.undefined;case"string":return Ye.string;case"number":return Number.isNaN(e)?Ye.nan:Ye.number;case"boolean":return Ye.boolean;case"function":return Ye.function;case"bigint":return Ye.bigint;case"symbol":return Ye.symbol;case"object":return Array.isArray(e)?Ye.array:e===null?Ye.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ye.promise:typeof Map<"u"&&e instanceof Map?Ye.map:typeof Set<"u"&&e instanceof Set?Ye.set:typeof Date<"u"&&e instanceof Date?Ye.date:Ye.object;default:return Ye.unknown}},Le=Mt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ia extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=t}format(t){const s=t||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(s(o));else{let c=r,d=0;for(;d<o.path.length;){const f=o.path[d];d===o.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(s(o))):c[f]=c[f]||{_errors:[]},c=c[f],d++}}};return i(this),r}static assert(t){if(!(t instanceof ia))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Mt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=s=>s.message){const s={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];s[a]=s[a]||[],s[a].push(t(i))}else r.push(t(i));return{formErrors:r,fieldErrors:s}}get formErrors(){return this.flatten()}}ia.create=e=>new ia(e);const Ly=(e,t)=>{let s;switch(e.code){case Le.invalid_type:e.received===Ye.undefined?s="Required":s=`Expected ${e.expected}, received ${e.received}`;break;case Le.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,Mt.jsonStringifyReplacer)}`;break;case Le.unrecognized_keys:s=`Unrecognized key(s) in object: ${Mt.joinValues(e.keys,", ")}`;break;case Le.invalid_union:s="Invalid input";break;case Le.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Mt.joinValues(e.options)}`;break;case Le.invalid_enum_value:s=`Invalid enum value. Expected ${Mt.joinValues(e.options)}, received '${e.received}'`;break;case Le.invalid_arguments:s="Invalid function arguments";break;case Le.invalid_return_type:s="Invalid function return type";break;case Le.invalid_date:s="Invalid date";break;case Le.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:Mt.assertNever(e.validation):e.validation!=="regex"?s=`Invalid ${e.validation}`:s="Invalid";break;case Le.too_small:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:s="Invalid input";break;case Le.too_big:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?s=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:s="Invalid input";break;case Le.custom:s="Invalid input";break;case Le.invalid_intersection_types:s="Intersection results could not be merged";break;case Le.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case Le.not_finite:s="Number must be finite";break;default:s=t.defaultError,Mt.assertNever(e)}return{message:s}};let DK=Ly;function FK(){return DK}const $K=e=>{const{data:t,path:s,errorMaps:r,issueData:i}=e,a=[...s,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const d=r.filter(f=>!!f).slice().reverse();for(const f of d)c=f(o,{data:t,defaultError:c}).message;return{...i,path:a,message:c}};function Ve(e,t){const s=FK(),r=$K({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===Ly?void 0:Ly].filter(i=>!!i)});e.common.issues.push(r)}class js{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,s){const r=[];for(const i of s){if(i.status==="aborted")return ht;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,s){const r=[];for(const i of s){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return js.mergeObjectSync(t,r)}static mergeObjectSync(t,s){const r={};for(const i of s){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return ht;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:t.value,value:r}}}const ht=Object.freeze({status:"aborted"}),Fd=e=>({status:"dirty",value:e}),xr=e=>({status:"valid",value:e}),qS=e=>e.status==="aborted",HS=e=>e.status==="dirty",kc=e=>e.status==="valid",Pm=e=>typeof Promise<"u"&&e instanceof Promise;var Qe;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Qe||(Qe={}));class ji{constructor(t,s,r,i){this._cachedPath=[],this.parent=t,this.data=s,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const WS=(e,t)=>{if(kc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new ia(e.common.issues);return this._error=s,this._error}}};function _t(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:r,description:i}=e;if(t&&(s||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,c)=>{const{message:d}=e;return o.code==="invalid_enum_value"?{message:d??c.defaultError}:typeof c.data>"u"?{message:d??r??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:d??s??c.defaultError}},description:i}}class Pt{get description(){return this._def.description}_getType(t){return xa(t.data)}_getOrReturnCtx(t,s){return s||{common:t.parent.common,data:t.data,parsedType:xa(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new js,ctx:{common:t.parent.common,data:t.data,parsedType:xa(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const s=this._parse(t);if(Pm(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(t){const s=this._parse(t);return Promise.resolve(s)}parse(t,s){const r=this.safeParse(t,s);if(r.success)return r.data;throw r.error}safeParse(t,s){const r={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xa(t)},i=this._parseSync({data:t,path:r.path,parent:r});return WS(r,i)}"~validate"(t){var r,i;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xa(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:s});return kc(a)?{value:a.value}:{issues:s.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(a=>kc(a)?{value:a.value}:{issues:s.common.issues})}async parseAsync(t,s){const r=await this.safeParseAsync(t,s);if(r.success)return r.data;throw r.error}async safeParseAsync(t,s){const r={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:xa(t)},i=this._parse({data:t,path:r.path,parent:r}),a=await(Pm(i)?i:Promise.resolve(i));return WS(r,a)}refine(t,s){const r=i=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(i):s;return this._refinement((i,a)=>{const o=t(i),c=()=>a.addIssue({code:Le.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(t,s){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof s=="function"?s(r,i):s),!1))}_refinement(t){return new Ya({schema:this,typeName:ut.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return Ba.create(this,this._def)}nullable(){return Ac.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return vi.create(this)}promise(){return Om.create(this,this._def)}or(t){return Em.create([this,t],this._def)}and(t){return Tm.create(this,t,this._def)}transform(t){return new Ya({..._t(this._def),schema:this,typeName:ut.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const s=typeof t=="function"?t:()=>t;return new Zy({..._t(this._def),innerType:this,defaultValue:s,typeName:ut.ZodDefault})}brand(){return new lY({typeName:ut.ZodBranded,type:this,..._t(this._def)})}catch(t){const s=typeof t=="function"?t:()=>t;return new Gy({..._t(this._def),innerType:this,catchValue:s,typeName:ut.ZodCatch})}describe(t){const s=this.constructor;return new s({...this._def,description:t})}pipe(t){return Yw.create(this,t)}readonly(){return Yy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zK=/^c[^\s-]{8,}$/i,BK=/^[0-9a-z]+$/,VK=/^[0-9A-HJKMNP-TV-Z]{26}$/i,UK=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qK=/^[a-z0-9_-]{21}$/i,HK=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,WK=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ZK=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,GK="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Mv;const KK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,YK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,XK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,QK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,JK=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,xL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tY=new RegExp(`^${xL}$`);function yL(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const s=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${s}`}function nY(e){return new RegExp(`^${yL(e)}$`)}function sY(e){let t=`${xL}T${yL(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function rY(e,t){return!!((t==="v4"||!t)&&KK.test(e)||(t==="v6"||!t)&&XK.test(e))}function iY(e,t){if(!HK.test(e))return!1;try{const[s]=e.split(".");if(!s)return!1;const r=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function aY(e,t){return!!((t==="v4"||!t)&&YK.test(e)||(t==="v6"||!t)&&QK.test(e))}class Hi extends Pt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ye.string){const a=this._getOrReturnCtx(t);return Ve(a,{code:Le.invalid_type,expected:Ye.string,received:a.parsedType}),ht}const r=new js;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,c=t.data.length<a.value;(o||c)&&(i=this._getOrReturnCtx(t,i),o?Ve(i,{code:Le.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&Ve(i,{code:Le.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")ZK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"email",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Mv||(Mv=new RegExp(GK,"u")),Mv.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"emoji",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")UK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"uuid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")qK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"nanoid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")zK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"cuid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")BK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"cuid2",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")VK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"ulid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ve(i,{validation:"url",code:Le.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"regex",code:Le.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?sY(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?tY.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?nY(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?WK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"duration",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?rY(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"ip",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?iY(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"jwt",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?aY(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"cidr",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?JK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"base64",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?eY.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"base64url",code:Le.invalid_string,message:a.message}),r.dirty()):Mt.assertNever(a);return{status:r.value,value:t.data}}_regex(t,s,r){return this.refinement(i=>t.test(i),{validation:s,code:Le.invalid_string,...Qe.errToObj(r)})}_addCheck(t){return new Hi({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Qe.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Qe.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Qe.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Qe.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Qe.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Qe.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Qe.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Qe.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Qe.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Qe.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Qe.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Qe.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Qe.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Qe.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Qe.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Qe.errToObj(t)})}regex(t,s){return this._addCheck({kind:"regex",regex:t,...Qe.errToObj(s)})}includes(t,s){return this._addCheck({kind:"includes",value:t,position:s==null?void 0:s.position,...Qe.errToObj(s==null?void 0:s.message)})}startsWith(t,s){return this._addCheck({kind:"startsWith",value:t,...Qe.errToObj(s)})}endsWith(t,s){return this._addCheck({kind:"endsWith",value:t,...Qe.errToObj(s)})}min(t,s){return this._addCheck({kind:"min",value:t,...Qe.errToObj(s)})}max(t,s){return this._addCheck({kind:"max",value:t,...Qe.errToObj(s)})}length(t,s){return this._addCheck({kind:"length",value:t,...Qe.errToObj(s)})}nonempty(t){return this.min(1,Qe.errToObj(t))}trim(){return new Hi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Hi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Hi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxLength(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}Hi.create=e=>new Hi({checks:[],typeName:ut.ZodString,coerce:(e==null?void 0:e.coerce)??!1,..._t(e)});function oY(e,t){const s=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=s>r?s:r,a=Number.parseInt(e.toFixed(i).replace(".","")),o=Number.parseInt(t.toFixed(i).replace(".",""));return a%o/10**i}class Cc extends Pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ye.number){const a=this._getOrReturnCtx(t);return Ve(a,{code:Le.invalid_type,expected:Ye.number,received:a.parsedType}),ht}let r;const i=new js;for(const a of this._def.checks)a.kind==="int"?Mt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?oY(t.data,a.value)!==0&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.not_finite,message:a.message}),i.dirty()):Mt.assertNever(a);return{status:i.value,value:t.data}}gte(t,s){return this.setLimit("min",t,!0,Qe.toString(s))}gt(t,s){return this.setLimit("min",t,!1,Qe.toString(s))}lte(t,s){return this.setLimit("max",t,!0,Qe.toString(s))}lt(t,s){return this.setLimit("max",t,!1,Qe.toString(s))}setLimit(t,s,r,i){return new Cc({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:r,message:Qe.toString(i)}]})}_addCheck(t){return new Cc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Qe.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Qe.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Qe.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Qe.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Qe.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:Qe.toString(s)})}finite(t){return this._addCheck({kind:"finite",message:Qe.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Qe.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Qe.toString(t)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Mt.isInteger(t.value))}get isFinite(){let t=null,s=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(s===null||r.value>s)&&(s=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(s)&&Number.isFinite(t)}}Cc.create=e=>new Cc({checks:[],typeName:ut.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,..._t(e)});class Pc extends Pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ye.bigint)return this._getInvalidInput(t);let r;const i=new js;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Mt.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const s=this._getOrReturnCtx(t);return Ve(s,{code:Le.invalid_type,expected:Ye.bigint,received:s.parsedType}),ht}gte(t,s){return this.setLimit("min",t,!0,Qe.toString(s))}gt(t,s){return this.setLimit("min",t,!1,Qe.toString(s))}lte(t,s){return this.setLimit("max",t,!0,Qe.toString(s))}lt(t,s){return this.setLimit("max",t,!1,Qe.toString(s))}setLimit(t,s,r,i){return new Pc({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:r,message:Qe.toString(i)}]})}_addCheck(t){return new Pc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Qe.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Qe.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Qe.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Qe.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:Qe.toString(s)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}Pc.create=e=>new Pc({checks:[],typeName:ut.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,..._t(e)});class My extends Pt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ye.boolean){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ye.boolean,received:r.parsedType}),ht}return xr(t.data)}}My.create=e=>new My({typeName:ut.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,..._t(e)});class Bu extends Pt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ye.date){const a=this._getOrReturnCtx(t);return Ve(a,{code:Le.invalid_type,expected:Ye.date,received:a.parsedType}),ht}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Ve(a,{code:Le.invalid_date}),ht}const r=new js;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Mt.assertNever(a);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Bu({...this._def,checks:[...this._def.checks,t]})}min(t,s){return this._addCheck({kind:"min",value:t.getTime(),message:Qe.toString(s)})}max(t,s){return this._addCheck({kind:"max",value:t.getTime(),message:Qe.toString(s)})}get minDate(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t!=null?new Date(t):null}}Bu.create=e=>new Bu({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ut.ZodDate,..._t(e)});class Iy extends Pt{_parse(t){if(this._getType(t)!==Ye.symbol){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ye.symbol,received:r.parsedType}),ht}return xr(t.data)}}Iy.create=e=>new Iy({typeName:ut.ZodSymbol,..._t(e)});class Dy extends Pt{_parse(t){if(this._getType(t)!==Ye.undefined){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ye.undefined,received:r.parsedType}),ht}return xr(t.data)}}Dy.create=e=>new Dy({typeName:ut.ZodUndefined,..._t(e)});class Fy extends Pt{_parse(t){if(this._getType(t)!==Ye.null){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ye.null,received:r.parsedType}),ht}return xr(t.data)}}Fy.create=e=>new Fy({typeName:ut.ZodNull,..._t(e)});class $y extends Pt{constructor(){super(...arguments),this._any=!0}_parse(t){return xr(t.data)}}$y.create=e=>new $y({typeName:ut.ZodAny,..._t(e)});class zy extends Pt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return xr(t.data)}}zy.create=e=>new zy({typeName:ut.ZodUnknown,..._t(e)});class Ka extends Pt{_parse(t){const s=this._getOrReturnCtx(t);return Ve(s,{code:Le.invalid_type,expected:Ye.never,received:s.parsedType}),ht}}Ka.create=e=>new Ka({typeName:ut.ZodNever,..._t(e)});class By extends Pt{_parse(t){if(this._getType(t)!==Ye.undefined){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ye.void,received:r.parsedType}),ht}return xr(t.data)}}By.create=e=>new By({typeName:ut.ZodVoid,..._t(e)});class vi extends Pt{_parse(t){const{ctx:s,status:r}=this._processInputParams(t),i=this._def;if(s.parsedType!==Ye.array)return Ve(s,{code:Le.invalid_type,expected:Ye.array,received:s.parsedType}),ht;if(i.exactLength!==null){const o=s.data.length>i.exactLength.value,c=s.data.length<i.exactLength.value;(o||c)&&(Ve(s,{code:o?Le.too_big:Le.too_small,minimum:c?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&s.data.length<i.minLength.value&&(Ve(s,{code:Le.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&s.data.length>i.maxLength.value&&(Ve(s,{code:Le.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),s.common.async)return Promise.all([...s.data].map((o,c)=>i.type._parseAsync(new ji(s,o,s.path,c)))).then(o=>js.mergeArray(r,o));const a=[...s.data].map((o,c)=>i.type._parseSync(new ji(s,o,s.path,c)));return js.mergeArray(r,a)}get element(){return this._def.type}min(t,s){return new vi({...this._def,minLength:{value:t,message:Qe.toString(s)}})}max(t,s){return new vi({...this._def,maxLength:{value:t,message:Qe.toString(s)}})}length(t,s){return new vi({...this._def,exactLength:{value:t,message:Qe.toString(s)}})}nonempty(t){return this.min(1,t)}}vi.create=(e,t)=>new vi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ut.ZodArray,..._t(t)});function yl(e){if(e instanceof pn){const t={};for(const s in e.shape){const r=e.shape[s];t[s]=Ba.create(yl(r))}return new pn({...e._def,shape:()=>t})}else return e instanceof vi?new vi({...e._def,type:yl(e.element)}):e instanceof Ba?Ba.create(yl(e.unwrap())):e instanceof Ac?Ac.create(yl(e.unwrap())):e instanceof Qo?Qo.create(e.items.map(t=>yl(t))):e}class pn extends Pt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),s=Mt.objectKeys(t);return this._cached={shape:t,keys:s},this._cached}_parse(t){if(this._getType(t)!==Ye.object){const f=this._getOrReturnCtx(t);return Ve(f,{code:Le.invalid_type,expected:Ye.object,received:f.parsedType}),ht}const{status:r,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Ka&&this._def.unknownKeys==="strip"))for(const f in i.data)o.includes(f)||c.push(f);const d=[];for(const f of o){const m=a[f],h=i.data[f];d.push({key:{status:"valid",value:f},value:m._parse(new ji(i,h,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Ka){const f=this._def.unknownKeys;if(f==="passthrough")for(const m of c)d.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(f==="strict")c.length>0&&(Ve(i,{code:Le.unrecognized_keys,keys:c}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const m of c){const h=i.data[m];d.push({key:{status:"valid",value:m},value:f._parse(new ji(i,h,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const m of d){const h=await m.key,u=await m.value;f.push({key:h,value:u,alwaysSet:m.alwaysSet})}return f}).then(f=>js.mergeObjectSync(r,f)):js.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(t){return Qe.errToObj,new pn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(s,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,s,r).message)??r.defaultError;return s.code==="unrecognized_keys"?{message:Qe.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new pn({...this._def,unknownKeys:"strip"})}passthrough(){return new pn({...this._def,unknownKeys:"passthrough"})}extend(t){return new pn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new pn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ut.ZodObject})}setKey(t,s){return this.augment({[t]:s})}catchall(t){return new pn({...this._def,catchall:t})}pick(t){const s={};for(const r of Mt.objectKeys(t))t[r]&&this.shape[r]&&(s[r]=this.shape[r]);return new pn({...this._def,shape:()=>s})}omit(t){const s={};for(const r of Mt.objectKeys(this.shape))t[r]||(s[r]=this.shape[r]);return new pn({...this._def,shape:()=>s})}deepPartial(){return yl(this)}partial(t){const s={};for(const r of Mt.objectKeys(this.shape)){const i=this.shape[r];t&&!t[r]?s[r]=i:s[r]=i.optional()}return new pn({...this._def,shape:()=>s})}required(t){const s={};for(const r of Mt.objectKeys(this.shape))if(t&&!t[r])s[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Ba;)a=a._def.innerType;s[r]=a}return new pn({...this._def,shape:()=>s})}keyof(){return bL(Mt.objectKeys(this.shape))}}pn.create=(e,t)=>new pn({shape:()=>e,unknownKeys:"strip",catchall:Ka.create(),typeName:ut.ZodObject,..._t(t)});pn.strictCreate=(e,t)=>new pn({shape:()=>e,unknownKeys:"strict",catchall:Ka.create(),typeName:ut.ZodObject,..._t(t)});pn.lazycreate=(e,t)=>new pn({shape:e,unknownKeys:"strip",catchall:Ka.create(),typeName:ut.ZodObject,..._t(t)});class Em extends Pt{_parse(t){const{ctx:s}=this._processInputParams(t),r=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return s.common.issues.push(...c.ctx.common.issues),c.result;const o=a.map(c=>new ia(c.ctx.common.issues));return Ve(s,{code:Le.invalid_union,unionErrors:o}),ht}if(s.common.async)return Promise.all(r.map(async a=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await a._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const d of r){const f={...s,common:{...s.common,issues:[]},parent:null},m=d._parseSync({data:s.data,path:s.path,parent:f});if(m.status==="valid")return m;m.status==="dirty"&&!a&&(a={result:m,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(a)return s.common.issues.push(...a.ctx.common.issues),a.result;const c=o.map(d=>new ia(d));return Ve(s,{code:Le.invalid_union,unionErrors:c}),ht}}get options(){return this._def.options}}Em.create=(e,t)=>new Em({options:e,typeName:ut.ZodUnion,..._t(t)});function Vy(e,t){const s=xa(e),r=xa(t);if(e===t)return{valid:!0,data:e};if(s===Ye.object&&r===Ye.object){const i=Mt.objectKeys(t),a=Mt.objectKeys(e).filter(c=>i.indexOf(c)!==-1),o={...e,...t};for(const c of a){const d=Vy(e[c],t[c]);if(!d.valid)return{valid:!1};o[c]=d.data}return{valid:!0,data:o}}else if(s===Ye.array&&r===Ye.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],c=t[a],d=Vy(o,c);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return s===Ye.date&&r===Ye.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Tm extends Pt{_parse(t){const{status:s,ctx:r}=this._processInputParams(t),i=(a,o)=>{if(qS(a)||qS(o))return ht;const c=Vy(a.value,o.value);return c.valid?((HS(a)||HS(o))&&s.dirty(),{status:s.value,value:c.data}):(Ve(r,{code:Le.invalid_intersection_types}),ht)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Tm.create=(e,t,s)=>new Tm({left:e,right:t,typeName:ut.ZodIntersection,..._t(s)});class Qo extends Pt{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ye.array)return Ve(r,{code:Le.invalid_type,expected:Ye.array,received:r.parsedType}),ht;if(r.data.length<this._def.items.length)return Ve(r,{code:Le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ht;!this._def.rest&&r.data.length>this._def.items.length&&(Ve(r,{code:Le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const a=[...r.data].map((o,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new ji(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>js.mergeArray(s,o)):js.mergeArray(s,a)}get items(){return this._def.items}rest(t){return new Qo({...this._def,rest:t})}}Qo.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qo({items:e,typeName:ut.ZodTuple,rest:null,..._t(t)})};class Am extends Pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ye.object)return Ve(r,{code:Le.invalid_type,expected:Ye.object,received:r.parsedType}),ht;const i=[],a=this._def.keyType,o=this._def.valueType;for(const c in r.data)i.push({key:a._parse(new ji(r,c,r.path,c)),value:o._parse(new ji(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?js.mergeObjectAsync(s,i):js.mergeObjectSync(s,i)}get element(){return this._def.valueType}static create(t,s,r){return s instanceof Pt?new Am({keyType:t,valueType:s,typeName:ut.ZodRecord,..._t(r)}):new Am({keyType:Hi.create(),valueType:t,typeName:ut.ZodRecord,..._t(s)})}}class Uy extends Pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ye.map)return Ve(r,{code:Le.invalid_type,expected:Ye.map,received:r.parsedType}),ht;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([c,d],f)=>({key:i._parse(new ji(r,c,r.path,[f,"key"])),value:a._parse(new ji(r,d,r.path,[f,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const d of o){const f=await d.key,m=await d.value;if(f.status==="aborted"||m.status==="aborted")return ht;(f.status==="dirty"||m.status==="dirty")&&s.dirty(),c.set(f.value,m.value)}return{status:s.value,value:c}})}else{const c=new Map;for(const d of o){const f=d.key,m=d.value;if(f.status==="aborted"||m.status==="aborted")return ht;(f.status==="dirty"||m.status==="dirty")&&s.dirty(),c.set(f.value,m.value)}return{status:s.value,value:c}}}}Uy.create=(e,t,s)=>new Uy({valueType:t,keyType:e,typeName:ut.ZodMap,..._t(s)});class Ec extends Pt{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ye.set)return Ve(r,{code:Le.invalid_type,expected:Ye.set,received:r.parsedType}),ht;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ve(r,{code:Le.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),s.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ve(r,{code:Le.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),s.dirty());const a=this._def.valueType;function o(d){const f=new Set;for(const m of d){if(m.status==="aborted")return ht;m.status==="dirty"&&s.dirty(),f.add(m.value)}return{status:s.value,value:f}}const c=[...r.data.values()].map((d,f)=>a._parse(new ji(r,d,r.path,f)));return r.common.async?Promise.all(c).then(d=>o(d)):o(c)}min(t,s){return new Ec({...this._def,minSize:{value:t,message:Qe.toString(s)}})}max(t,s){return new Ec({...this._def,maxSize:{value:t,message:Qe.toString(s)}})}size(t,s){return this.min(t,s).max(t,s)}nonempty(t){return this.min(1,t)}}Ec.create=(e,t)=>new Ec({valueType:e,minSize:null,maxSize:null,typeName:ut.ZodSet,..._t(t)});class qy extends Pt{get schema(){return this._def.getter()}_parse(t){const{ctx:s}=this._processInputParams(t);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}qy.create=(e,t)=>new qy({getter:e,typeName:ut.ZodLazy,..._t(t)});class Hy extends Pt{_parse(t){if(t.data!==this._def.value){const s=this._getOrReturnCtx(t);return Ve(s,{received:s.data,code:Le.invalid_literal,expected:this._def.value}),ht}return{status:"valid",value:t.data}}get value(){return this._def.value}}Hy.create=(e,t)=>new Hy({value:e,typeName:ut.ZodLiteral,..._t(t)});function bL(e,t){return new Tc({values:e,typeName:ut.ZodEnum,..._t(t)})}class Tc extends Pt{_parse(t){if(typeof t.data!="string"){const s=this._getOrReturnCtx(t),r=this._def.values;return Ve(s,{expected:Mt.joinValues(r),received:s.parsedType,code:Le.invalid_type}),ht}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const s=this._getOrReturnCtx(t),r=this._def.values;return Ve(s,{received:s.data,code:Le.invalid_enum_value,options:r}),ht}return xr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const s of this._def.values)t[s]=s;return t}get Values(){const t={};for(const s of this._def.values)t[s]=s;return t}get Enum(){const t={};for(const s of this._def.values)t[s]=s;return t}extract(t,s=this._def){return Tc.create(t,{...this._def,...s})}exclude(t,s=this._def){return Tc.create(this.options.filter(r=>!t.includes(r)),{...this._def,...s})}}Tc.create=bL;class Wy extends Pt{_parse(t){const s=Mt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Ye.string&&r.parsedType!==Ye.number){const i=Mt.objectValues(s);return Ve(r,{expected:Mt.joinValues(i),received:r.parsedType,code:Le.invalid_type}),ht}if(this._cache||(this._cache=new Set(Mt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Mt.objectValues(s);return Ve(r,{received:r.data,code:Le.invalid_enum_value,options:i}),ht}return xr(t.data)}get enum(){return this._def.values}}Wy.create=(e,t)=>new Wy({values:e,typeName:ut.ZodNativeEnum,..._t(t)});class Om extends Pt{unwrap(){return this._def.type}_parse(t){const{ctx:s}=this._processInputParams(t);if(s.parsedType!==Ye.promise&&s.common.async===!1)return Ve(s,{code:Le.invalid_type,expected:Ye.promise,received:s.parsedType}),ht;const r=s.parsedType===Ye.promise?s.data:Promise.resolve(s.data);return xr(r.then(i=>this._def.type.parseAsync(i,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Om.create=(e,t)=>new Om({type:e,typeName:ut.ZodPromise,..._t(t)});class Ya extends Pt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ut.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:s,ctx:r}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Ve(r,o),o.fatal?s.abort():s.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async c=>{if(s.value==="aborted")return ht;const d=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return d.status==="aborted"?ht:d.status==="dirty"||s.value==="dirty"?Fd(d.value):d});{if(s.value==="aborted")return ht;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?ht:c.status==="dirty"||s.value==="dirty"?Fd(c.value):c}}if(i.type==="refinement"){const o=c=>{const d=i.refinement(c,a);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?ht:(c.status==="dirty"&&s.dirty(),o(c.value),{status:s.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?ht:(c.status==="dirty"&&s.dirty(),o(c.value).then(()=>({status:s.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!kc(o))return ht;const c=i.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>kc(o)?Promise.resolve(i.transform(o.value,a)).then(c=>({status:s.value,value:c})):ht);Mt.assertNever(i)}}Ya.create=(e,t,s)=>new Ya({schema:e,typeName:ut.ZodEffects,effect:t,..._t(s)});Ya.createWithPreprocess=(e,t,s)=>new Ya({schema:t,effect:{type:"preprocess",transform:e},typeName:ut.ZodEffects,..._t(s)});class Ba extends Pt{_parse(t){return this._getType(t)===Ye.undefined?xr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ba.create=(e,t)=>new Ba({innerType:e,typeName:ut.ZodOptional,..._t(t)});class Ac extends Pt{_parse(t){return this._getType(t)===Ye.null?xr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ac.create=(e,t)=>new Ac({innerType:e,typeName:ut.ZodNullable,..._t(t)});class Zy extends Pt{_parse(t){const{ctx:s}=this._processInputParams(t);let r=s.data;return s.parsedType===Ye.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Zy.create=(e,t)=>new Zy({innerType:e,typeName:ut.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,..._t(t)});class Gy extends Pt{_parse(t){const{ctx:s}=this._processInputParams(t),r={...s,common:{...s.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Pm(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ia(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ia(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Gy.create=(e,t)=>new Gy({innerType:e,typeName:ut.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,..._t(t)});class Ky extends Pt{_parse(t){if(this._getType(t)!==Ye.nan){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ye.nan,received:r.parsedType}),ht}return{status:"valid",value:t.data}}}Ky.create=e=>new Ky({typeName:ut.ZodNaN,..._t(e)});class lY extends Pt{_parse(t){const{ctx:s}=this._processInputParams(t),r=s.data;return this._def.type._parse({data:r,path:s.path,parent:s})}unwrap(){return this._def.type}}class Yw extends Pt{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ht:a.status==="dirty"?(s.dirty(),Fd(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ht:i.status==="dirty"?(s.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,s){return new Yw({in:t,out:s,typeName:ut.ZodPipeline})}}class Yy extends Pt{_parse(t){const s=this._def.innerType._parse(t),r=i=>(kc(i)&&(i.value=Object.freeze(i.value)),i);return Pm(s)?s.then(i=>r(i)):r(s)}unwrap(){return this._def.innerType}}Yy.create=(e,t)=>new Yy({innerType:e,typeName:ut.ZodReadonly,..._t(t)});pn.lazycreate;var ut;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ut||(ut={}));const wn=Hi.create,Vi=Cc.create;Ky.create;Pc.create;const ru=My.create;Bu.create;Iy.create;Dy.create;Fy.create;const Xy=$y.create;zy.create;Ka.create;By.create;const Rm=vi.create,wL=pn.create;pn.strictCreate;Em.create;Tm.create;Qo.create;const jL=Am.create;Uy.create;Ec.create;qy.create;Hy.create;const _L=Tc.create;Wy.create;Om.create;Ya.create;Ba.create;Ac.create;Ya.createWithPreprocess;function cY(){this.__data__=[],this.size=0}var dY=cY;function uY(e,t){return e===t||e!==e&&t!==t}var NL=uY,hY=NL;function fY(e,t){for(var s=e.length;s--;)if(hY(e[s][0],t))return s;return-1}var Wp=fY,mY=Wp,pY=Array.prototype,gY=pY.splice;function vY(e){var t=this.__data__,s=mY(t,e);if(s<0)return!1;var r=t.length-1;return s==r?t.pop():gY.call(t,s,1),--this.size,!0}var xY=vY,yY=Wp;function bY(e){var t=this.__data__,s=yY(t,e);return s<0?void 0:t[s][1]}var wY=bY,jY=Wp;function _Y(e){return jY(this.__data__,e)>-1}var NY=_Y,SY=Wp;function kY(e,t){var s=this.__data__,r=SY(s,e);return r<0?(++this.size,s.push([e,t])):s[r][1]=t,this}var CY=kY,PY=dY,EY=xY,TY=wY,AY=NY,OY=CY;function Kc(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}Kc.prototype.clear=PY;Kc.prototype.delete=EY;Kc.prototype.get=TY;Kc.prototype.has=AY;Kc.prototype.set=OY;var Zp=Kc,RY=Zp;function LY(){this.__data__=new RY,this.size=0}var MY=LY;function IY(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}var DY=IY;function FY(e){return this.__data__.get(e)}var $Y=FY;function zY(e){return this.__data__.has(e)}var BY=zY,VY=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,SL=VY,UY=SL,qY=typeof self=="object"&&self&&self.Object===Object&&self,HY=UY||qY||Function("return this")(),oa=HY,WY=oa,ZY=WY.Symbol,Xw=ZY,ZS=Xw,kL=Object.prototype,GY=kL.hasOwnProperty,KY=kL.toString,Pd=ZS?ZS.toStringTag:void 0;function YY(e){var t=GY.call(e,Pd),s=e[Pd];try{e[Pd]=void 0;var r=!0}catch{}var i=KY.call(e);return r&&(t?e[Pd]=s:delete e[Pd]),i}var XY=YY,QY=Object.prototype,JY=QY.toString;function eX(e){return JY.call(e)}var tX=eX,GS=Xw,nX=XY,sX=tX,rX="[object Null]",iX="[object Undefined]",KS=GS?GS.toStringTag:void 0;function aX(e){return e==null?e===void 0?iX:rX:KS&&KS in Object(e)?nX(e):sX(e)}var Gp=aX;function oX(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var CL=oX,lX=Gp,cX=CL,dX="[object AsyncFunction]",uX="[object Function]",hX="[object GeneratorFunction]",fX="[object Proxy]";function mX(e){if(!cX(e))return!1;var t=lX(e);return t==uX||t==hX||t==dX||t==fX}var PL=mX,pX=oa,gX=pX["__core-js_shared__"],vX=gX,Iv=vX,YS=function(){var e=/[^.]+$/.exec(Iv&&Iv.keys&&Iv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function xX(e){return!!YS&&YS in e}var yX=xX,bX=Function.prototype,wX=bX.toString;function jX(e){if(e!=null){try{return wX.call(e)}catch{}try{return e+""}catch{}}return""}var EL=jX,_X=PL,NX=yX,SX=CL,kX=EL,CX=/[\\^$.*+?()[\]{}|]/g,PX=/^\[object .+?Constructor\]$/,EX=Function.prototype,TX=Object.prototype,AX=EX.toString,OX=TX.hasOwnProperty,RX=RegExp("^"+AX.call(OX).replace(CX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function LX(e){if(!SX(e)||NX(e))return!1;var t=_X(e)?RX:PX;return t.test(kX(e))}var MX=LX;function IX(e,t){return e==null?void 0:e[t]}var DX=IX,FX=MX,$X=DX;function zX(e,t){var s=$X(e,t);return FX(s)?s:void 0}var Yc=zX,BX=Yc,VX=oa,UX=BX(VX,"Map"),Qw=UX,qX=Yc,HX=qX(Object,"create"),Kp=HX,XS=Kp;function WX(){this.__data__=XS?XS(null):{},this.size=0}var ZX=WX;function GX(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var KX=GX,YX=Kp,XX="__lodash_hash_undefined__",QX=Object.prototype,JX=QX.hasOwnProperty;function eQ(e){var t=this.__data__;if(YX){var s=t[e];return s===XX?void 0:s}return JX.call(t,e)?t[e]:void 0}var tQ=eQ,nQ=Kp,sQ=Object.prototype,rQ=sQ.hasOwnProperty;function iQ(e){var t=this.__data__;return nQ?t[e]!==void 0:rQ.call(t,e)}var aQ=iQ,oQ=Kp,lQ="__lodash_hash_undefined__";function cQ(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=oQ&&t===void 0?lQ:t,this}var dQ=cQ,uQ=ZX,hQ=KX,fQ=tQ,mQ=aQ,pQ=dQ;function Xc(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}Xc.prototype.clear=uQ;Xc.prototype.delete=hQ;Xc.prototype.get=fQ;Xc.prototype.has=mQ;Xc.prototype.set=pQ;var gQ=Xc,QS=gQ,vQ=Zp,xQ=Qw;function yQ(){this.size=0,this.__data__={hash:new QS,map:new(xQ||vQ),string:new QS}}var bQ=yQ;function wQ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var jQ=wQ,_Q=jQ;function NQ(e,t){var s=e.__data__;return _Q(t)?s[typeof t=="string"?"string":"hash"]:s.map}var Yp=NQ,SQ=Yp;function kQ(e){var t=SQ(this,e).delete(e);return this.size-=t?1:0,t}var CQ=kQ,PQ=Yp;function EQ(e){return PQ(this,e).get(e)}var TQ=EQ,AQ=Yp;function OQ(e){return AQ(this,e).has(e)}var RQ=OQ,LQ=Yp;function MQ(e,t){var s=LQ(this,e),r=s.size;return s.set(e,t),this.size+=s.size==r?0:1,this}var IQ=MQ,DQ=bQ,FQ=CQ,$Q=TQ,zQ=RQ,BQ=IQ;function Qc(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}Qc.prototype.clear=DQ;Qc.prototype.delete=FQ;Qc.prototype.get=$Q;Qc.prototype.has=zQ;Qc.prototype.set=BQ;var TL=Qc,VQ=Zp,UQ=Qw,qQ=TL,HQ=200;function WQ(e,t){var s=this.__data__;if(s instanceof VQ){var r=s.__data__;if(!UQ||r.length<HQ-1)return r.push([e,t]),this.size=++s.size,this;s=this.__data__=new qQ(r)}return s.set(e,t),this.size=s.size,this}var ZQ=WQ,GQ=Zp,KQ=MY,YQ=DY,XQ=$Y,QQ=BY,JQ=ZQ;function Jc(e){var t=this.__data__=new GQ(e);this.size=t.size}Jc.prototype.clear=KQ;Jc.prototype.delete=YQ;Jc.prototype.get=XQ;Jc.prototype.has=QQ;Jc.prototype.set=JQ;var eJ=Jc,tJ="__lodash_hash_undefined__";function nJ(e){return this.__data__.set(e,tJ),this}var sJ=nJ;function rJ(e){return this.__data__.has(e)}var iJ=rJ,aJ=TL,oJ=sJ,lJ=iJ;function Lm(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new aJ;++t<s;)this.add(e[t])}Lm.prototype.add=Lm.prototype.push=oJ;Lm.prototype.has=lJ;var cJ=Lm;function dJ(e,t){for(var s=-1,r=e==null?0:e.length;++s<r;)if(t(e[s],s,e))return!0;return!1}var uJ=dJ;function hJ(e,t){return e.has(t)}var fJ=hJ,mJ=cJ,pJ=uJ,gJ=fJ,vJ=1,xJ=2;function yJ(e,t,s,r,i,a){var o=s&vJ,c=e.length,d=t.length;if(c!=d&&!(o&&d>c))return!1;var f=a.get(e),m=a.get(t);if(f&&m)return f==t&&m==e;var h=-1,u=!0,p=s&xJ?new mJ:void 0;for(a.set(e,t),a.set(t,e);++h<c;){var x=e[h],v=t[h];if(r)var w=o?r(v,x,h,t,e,a):r(x,v,h,e,t,a);if(w!==void 0){if(w)continue;u=!1;break}if(p){if(!pJ(t,function(y,b){if(!gJ(p,b)&&(x===y||i(x,y,s,r,a)))return p.push(b)})){u=!1;break}}else if(!(x===v||i(x,v,s,r,a))){u=!1;break}}return a.delete(e),a.delete(t),u}var AL=yJ,bJ=oa,wJ=bJ.Uint8Array,jJ=wJ;function _J(e){var t=-1,s=Array(e.size);return e.forEach(function(r,i){s[++t]=[i,r]}),s}var NJ=_J;function SJ(e){var t=-1,s=Array(e.size);return e.forEach(function(r){s[++t]=r}),s}var kJ=SJ,JS=Xw,e2=jJ,CJ=NL,PJ=AL,EJ=NJ,TJ=kJ,AJ=1,OJ=2,RJ="[object Boolean]",LJ="[object Date]",MJ="[object Error]",IJ="[object Map]",DJ="[object Number]",FJ="[object RegExp]",$J="[object Set]",zJ="[object String]",BJ="[object Symbol]",VJ="[object ArrayBuffer]",UJ="[object DataView]",t2=JS?JS.prototype:void 0,Dv=t2?t2.valueOf:void 0;function qJ(e,t,s,r,i,a,o){switch(s){case UJ:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case VJ:return!(e.byteLength!=t.byteLength||!a(new e2(e),new e2(t)));case RJ:case LJ:case DJ:return CJ(+e,+t);case MJ:return e.name==t.name&&e.message==t.message;case FJ:case zJ:return e==t+"";case IJ:var c=EJ;case $J:var d=r&AJ;if(c||(c=TJ),e.size!=t.size&&!d)return!1;var f=o.get(e);if(f)return f==t;r|=OJ,o.set(e,t);var m=PJ(c(e),c(t),r,i,a,o);return o.delete(e),m;case BJ:if(Dv)return Dv.call(e)==Dv.call(t)}return!1}var HJ=qJ;function WJ(e,t){for(var s=-1,r=t.length,i=e.length;++s<r;)e[i+s]=t[s];return e}var ZJ=WJ,GJ=Array.isArray,Jw=GJ,KJ=ZJ,YJ=Jw;function XJ(e,t,s){var r=t(e);return YJ(e)?r:KJ(r,s(e))}var QJ=XJ;function JJ(e,t){for(var s=-1,r=e==null?0:e.length,i=0,a=[];++s<r;){var o=e[s];t(o,s,e)&&(a[i++]=o)}return a}var eee=JJ;function tee(){return[]}var nee=tee,see=eee,ree=nee,iee=Object.prototype,aee=iee.propertyIsEnumerable,n2=Object.getOwnPropertySymbols,oee=n2?function(e){return e==null?[]:(e=Object(e),see(n2(e),function(t){return aee.call(e,t)}))}:ree,lee=oee;function cee(e,t){for(var s=-1,r=Array(e);++s<e;)r[s]=t(s);return r}var dee=cee;function uee(e){return e!=null&&typeof e=="object"}var Xp=uee,hee=Gp,fee=Xp,mee="[object Arguments]";function pee(e){return fee(e)&&hee(e)==mee}var gee=pee,s2=gee,vee=Xp,OL=Object.prototype,xee=OL.hasOwnProperty,yee=OL.propertyIsEnumerable,bee=s2(function(){return arguments}())?s2:function(e){return vee(e)&&xee.call(e,"callee")&&!yee.call(e,"callee")},wee=bee,Mm={exports:{}};function jee(){return!1}var _ee=jee;Mm.exports;(function(e,t){var s=oa,r=_ee,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,c=o?s.Buffer:void 0,d=c?c.isBuffer:void 0,f=d||r;e.exports=f})(Mm,Mm.exports);var RL=Mm.exports,Nee=9007199254740991,See=/^(?:0|[1-9]\d*)$/;function kee(e,t){var s=typeof e;return t=t??Nee,!!t&&(s=="number"||s!="symbol"&&See.test(e))&&e>-1&&e%1==0&&e<t}var Cee=kee,Pee=9007199254740991;function Eee(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Pee}var LL=Eee,Tee=Gp,Aee=LL,Oee=Xp,Ree="[object Arguments]",Lee="[object Array]",Mee="[object Boolean]",Iee="[object Date]",Dee="[object Error]",Fee="[object Function]",$ee="[object Map]",zee="[object Number]",Bee="[object Object]",Vee="[object RegExp]",Uee="[object Set]",qee="[object String]",Hee="[object WeakMap]",Wee="[object ArrayBuffer]",Zee="[object DataView]",Gee="[object Float32Array]",Kee="[object Float64Array]",Yee="[object Int8Array]",Xee="[object Int16Array]",Qee="[object Int32Array]",Jee="[object Uint8Array]",ete="[object Uint8ClampedArray]",tte="[object Uint16Array]",nte="[object Uint32Array]",Jt={};Jt[Gee]=Jt[Kee]=Jt[Yee]=Jt[Xee]=Jt[Qee]=Jt[Jee]=Jt[ete]=Jt[tte]=Jt[nte]=!0;Jt[Ree]=Jt[Lee]=Jt[Wee]=Jt[Mee]=Jt[Zee]=Jt[Iee]=Jt[Dee]=Jt[Fee]=Jt[$ee]=Jt[zee]=Jt[Bee]=Jt[Vee]=Jt[Uee]=Jt[qee]=Jt[Hee]=!1;function ste(e){return Oee(e)&&Aee(e.length)&&!!Jt[Tee(e)]}var rte=ste;function ite(e){return function(t){return e(t)}}var ate=ite,Im={exports:{}};Im.exports;(function(e,t){var s=SL,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,o=a&&s.process,c=function(){try{var d=i&&i.require&&i.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}}();e.exports=c})(Im,Im.exports);var ote=Im.exports,lte=rte,cte=ate,r2=ote,i2=r2&&r2.isTypedArray,dte=i2?cte(i2):lte,ML=dte,ute=dee,hte=wee,fte=Jw,mte=RL,pte=Cee,gte=ML,vte=Object.prototype,xte=vte.hasOwnProperty;function yte(e,t){var s=fte(e),r=!s&&hte(e),i=!s&&!r&&mte(e),a=!s&&!r&&!i&&gte(e),o=s||r||i||a,c=o?ute(e.length,String):[],d=c.length;for(var f in e)(t||xte.call(e,f))&&!(o&&(f=="length"||i&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||pte(f,d)))&&c.push(f);return c}var bte=yte,wte=Object.prototype;function jte(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||wte;return e===s}var _te=jte;function Nte(e,t){return function(s){return e(t(s))}}var Ste=Nte,kte=Ste,Cte=kte(Object.keys,Object),Pte=Cte,Ete=_te,Tte=Pte,Ate=Object.prototype,Ote=Ate.hasOwnProperty;function Rte(e){if(!Ete(e))return Tte(e);var t=[];for(var s in Object(e))Ote.call(e,s)&&s!="constructor"&&t.push(s);return t}var Lte=Rte,Mte=PL,Ite=LL;function Dte(e){return e!=null&&Ite(e.length)&&!Mte(e)}var Fte=Dte,$te=bte,zte=Lte,Bte=Fte;function Vte(e){return Bte(e)?$te(e):zte(e)}var Ute=Vte,qte=QJ,Hte=lee,Wte=Ute;function Zte(e){return qte(e,Wte,Hte)}var Gte=Zte,a2=Gte,Kte=1,Yte=Object.prototype,Xte=Yte.hasOwnProperty;function Qte(e,t,s,r,i,a){var o=s&Kte,c=a2(e),d=c.length,f=a2(t),m=f.length;if(d!=m&&!o)return!1;for(var h=d;h--;){var u=c[h];if(!(o?u in t:Xte.call(t,u)))return!1}var p=a.get(e),x=a.get(t);if(p&&x)return p==t&&x==e;var v=!0;a.set(e,t),a.set(t,e);for(var w=o;++h<d;){u=c[h];var y=e[u],b=t[u];if(r)var _=o?r(b,y,u,t,e,a):r(y,b,u,e,t,a);if(!(_===void 0?y===b||i(y,b,s,r,a):_)){v=!1;break}w||(w=u=="constructor")}if(v&&!w){var N=e.constructor,k=t.constructor;N!=k&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof k=="function"&&k instanceof k)&&(v=!1)}return a.delete(e),a.delete(t),v}var Jte=Qte,ene=Yc,tne=oa,nne=ene(tne,"DataView"),sne=nne,rne=Yc,ine=oa,ane=rne(ine,"Promise"),one=ane,lne=Yc,cne=oa,dne=lne(cne,"Set"),une=dne,hne=Yc,fne=oa,mne=hne(fne,"WeakMap"),pne=mne,Qy=sne,Jy=Qw,e0=one,t0=une,n0=pne,IL=Gp,ed=EL,o2="[object Map]",gne="[object Object]",l2="[object Promise]",c2="[object Set]",d2="[object WeakMap]",u2="[object DataView]",vne=ed(Qy),xne=ed(Jy),yne=ed(e0),bne=ed(t0),wne=ed(n0),vo=IL;(Qy&&vo(new Qy(new ArrayBuffer(1)))!=u2||Jy&&vo(new Jy)!=o2||e0&&vo(e0.resolve())!=l2||t0&&vo(new t0)!=c2||n0&&vo(new n0)!=d2)&&(vo=function(e){var t=IL(e),s=t==gne?e.constructor:void 0,r=s?ed(s):"";if(r)switch(r){case vne:return u2;case xne:return o2;case yne:return l2;case bne:return c2;case wne:return d2}return t});var jne=vo,Fv=eJ,_ne=AL,Nne=HJ,Sne=Jte,h2=jne,f2=Jw,m2=RL,kne=ML,Cne=1,p2="[object Arguments]",g2="[object Array]",of="[object Object]",Pne=Object.prototype,v2=Pne.hasOwnProperty;function Ene(e,t,s,r,i,a){var o=f2(e),c=f2(t),d=o?g2:h2(e),f=c?g2:h2(t);d=d==p2?of:d,f=f==p2?of:f;var m=d==of,h=f==of,u=d==f;if(u&&m2(e)){if(!m2(t))return!1;o=!0,m=!1}if(u&&!m)return a||(a=new Fv),o||kne(e)?_ne(e,t,s,r,i,a):Nne(e,t,d,s,r,i,a);if(!(s&Cne)){var p=m&&v2.call(e,"__wrapped__"),x=h&&v2.call(t,"__wrapped__");if(p||x){var v=p?e.value():e,w=x?t.value():t;return a||(a=new Fv),i(v,w,s,r,a)}}return u?(a||(a=new Fv),Sne(e,t,s,r,i,a)):!1}var Tne=Ene,Ane=Tne,x2=Xp;function DL(e,t,s,r,i){return e===t?!0:e==null||t==null||!x2(e)&&!x2(t)?e!==e&&t!==t:Ane(e,t,s,r,DL,i)}var One=DL,Rne=One;function Lne(e,t){return Rne(e,t)}var Mne=Lne,FL={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(r,i){e.exports=i()})(typeof self<"u"?self:xi,function(){return function(s){var r={};function i(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return s[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=s,i.c=r,i.d=function(a,o,c){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:c})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=109)}([function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(17),o=i(18),c=i(19),d=i(45),f=i(46),m=i(47),h=i(48),u=i(49),p=i(12),x=i(32),v=i(33),w=i(31),y=i(1),b={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:a.default,Format:o.default,Leaf:c.default,Embed:h.default,Scroll:d.default,Block:m.default,Inline:f.default,Text:u.default,Attributor:{Attribute:p.default,Class:x.default,Style:v.default,Store:w.default}};r.default=b},function(s,r,i){var a=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var _ in b)b.hasOwnProperty(_)&&(y[_]=b[_])};return function(y,b){w(y,b);function _(){this.constructor=y}y.prototype=b===null?Object.create(b):(_.prototype=b.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(w){a(y,w);function y(b){var _=this;return b="[Parchment] "+b,_=w.call(this,b)||this,_.message=b,_.name=_.constructor.name,_}return y}(Error);r.ParchmentError=o;var c={},d={},f={},m={};r.DATA_KEY="__blot";var h;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(h=r.Scope||(r.Scope={}));function u(w,y){var b=x(w);if(b==null)throw new o("Unable to create "+w+" blot");var _=b,N=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:_.create(y);return new _(N,y)}r.create=u;function p(w,y){return y===void 0&&(y=!1),w==null?null:w[r.DATA_KEY]!=null?w[r.DATA_KEY].blot:y?p(w.parentNode,y):null}r.find=p;function x(w,y){y===void 0&&(y=h.ANY);var b;if(typeof w=="string")b=m[w]||c[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)b=m.text;else if(typeof w=="number")w&h.LEVEL&h.BLOCK?b=m.block:w&h.LEVEL&h.INLINE&&(b=m.inline);else if(w instanceof HTMLElement){var _=(w.getAttribute("class")||"").split(/\s+/);for(var N in _)if(b=d[_[N]],b)break;b=b||f[w.tagName]}return b==null?null:y&h.LEVEL&b.scope&&y&h.TYPE&b.scope?b:null}r.query=x;function v(){for(var w=[],y=0;y<arguments.length;y++)w[y]=arguments[y];if(w.length>1)return w.map(function(N){return v(N)});var b=w[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new o("Invalid definition");if(b.blotName==="abstract")throw new o("Cannot register abstract class");if(m[b.blotName||b.attrName]=b,typeof b.keyName=="string")c[b.keyName]=b;else if(b.className!=null&&(d[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(N){return N.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var _=Array.isArray(b.tagName)?b.tagName:[b.tagName];_.forEach(function(N){(f[N]==null||b.className==null)&&(f[N]=b)})}return b}r.register=v},function(s,r,i){var a=i(51),o=i(11),c=i(3),d=i(20),f="\0",m=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};m.prototype.insert=function(h,u){var p={};return h.length===0?this:(p.insert=h,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(p.attributes=u),this.push(p))},m.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},m.prototype.retain=function(h,u){if(h<=0)return this;var p={retain:h};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(p.attributes=u),this.push(p)},m.prototype.push=function(h){var u=this.ops.length,p=this.ops[u-1];if(h=c(!0,{},h),typeof p=="object"){if(typeof h.delete=="number"&&typeof p.delete=="number")return this.ops[u-1]={delete:p.delete+h.delete},this;if(typeof p.delete=="number"&&h.insert!=null&&(u-=1,p=this.ops[u-1],typeof p!="object"))return this.ops.unshift(h),this;if(o(h.attributes,p.attributes)){if(typeof h.insert=="string"&&typeof p.insert=="string")return this.ops[u-1]={insert:p.insert+h.insert},typeof h.attributes=="object"&&(this.ops[u-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof p.retain=="number")return this.ops[u-1]={retain:p.retain+h.retain},typeof h.attributes=="object"&&(this.ops[u-1].attributes=h.attributes),this}}return u===this.ops.length?this.ops.push(h):this.ops.splice(u,0,h),this},m.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},m.prototype.filter=function(h){return this.ops.filter(h)},m.prototype.forEach=function(h){this.ops.forEach(h)},m.prototype.map=function(h){return this.ops.map(h)},m.prototype.partition=function(h){var u=[],p=[];return this.forEach(function(x){var v=h(x)?u:p;v.push(x)}),[u,p]},m.prototype.reduce=function(h,u){return this.ops.reduce(h,u)},m.prototype.changeLength=function(){return this.reduce(function(h,u){return u.insert?h+d.length(u):u.delete?h-u.delete:h},0)},m.prototype.length=function(){return this.reduce(function(h,u){return h+d.length(u)},0)},m.prototype.slice=function(h,u){h=h||0,typeof u!="number"&&(u=1/0);for(var p=[],x=d.iterator(this.ops),v=0;v<u&&x.hasNext();){var w;v<h?w=x.next(h-v):(w=x.next(u-v),p.push(w)),v+=d.length(w)}return new m(p)},m.prototype.compose=function(h){var u=d.iterator(this.ops),p=d.iterator(h.ops),x=[],v=p.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var w=v.retain;u.peekType()==="insert"&&u.peekLength()<=w;)w-=u.peekLength(),x.push(u.next());v.retain-w>0&&p.next(v.retain-w)}for(var y=new m(x);u.hasNext()||p.hasNext();)if(p.peekType()==="insert")y.push(p.next());else if(u.peekType()==="delete")y.push(u.next());else{var b=Math.min(u.peekLength(),p.peekLength()),_=u.next(b),N=p.next(b);if(typeof N.retain=="number"){var k={};typeof _.retain=="number"?k.retain=b:k.insert=_.insert;var I=d.attributes.compose(_.attributes,N.attributes,typeof _.retain=="number");if(I&&(k.attributes=I),y.push(k),!p.hasNext()&&o(y.ops[y.ops.length-1],k)){var C=new m(u.rest());return y.concat(C).chop()}}else typeof N.delete=="number"&&typeof _.retain=="number"&&y.push(N)}return y.chop()},m.prototype.concat=function(h){var u=new m(this.ops.slice());return h.ops.length>0&&(u.push(h.ops[0]),u.ops=u.ops.concat(h.ops.slice(1))),u},m.prototype.diff=function(h,u){if(this.ops===h.ops)return new m;var p=[this,h].map(function(b){return b.map(function(_){if(_.insert!=null)return typeof _.insert=="string"?_.insert:f;var N=b===h?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),x=new m,v=a(p[0],p[1],u),w=d.iterator(this.ops),y=d.iterator(h.ops);return v.forEach(function(b){for(var _=b[1].length;_>0;){var N=0;switch(b[0]){case a.INSERT:N=Math.min(y.peekLength(),_),x.push(y.next(N));break;case a.DELETE:N=Math.min(_,w.peekLength()),w.next(N),x.delete(N);break;case a.EQUAL:N=Math.min(w.peekLength(),y.peekLength(),_);var k=w.next(N),I=y.next(N);o(k.insert,I.insert)?x.retain(N,d.attributes.diff(k.attributes,I.attributes)):x.push(I).delete(N);break}_-=N}}),x.chop()},m.prototype.eachLine=function(h,u){u=u||`
`;for(var p=d.iterator(this.ops),x=new m,v=0;p.hasNext();){if(p.peekType()!=="insert")return;var w=p.peek(),y=d.length(w)-p.peekLength(),b=typeof w.insert=="string"?w.insert.indexOf(u,y)-y:-1;if(b<0)x.push(p.next());else if(b>0)x.push(p.next(b));else{if(h(x,p.next(1).attributes||{},v)===!1)return;v+=1,x=new m}}x.length()>0&&h(x,{},v)},m.prototype.transform=function(h,u){if(u=!!u,typeof h=="number")return this.transformPosition(h,u);for(var p=d.iterator(this.ops),x=d.iterator(h.ops),v=new m;p.hasNext()||x.hasNext();)if(p.peekType()==="insert"&&(u||x.peekType()!=="insert"))v.retain(d.length(p.next()));else if(x.peekType()==="insert")v.push(x.next());else{var w=Math.min(p.peekLength(),x.peekLength()),y=p.next(w),b=x.next(w);if(y.delete)continue;b.delete?v.push(b):v.retain(w,d.attributes.transform(y.attributes,b.attributes,u))}return v.chop()},m.prototype.transformPosition=function(h,u){u=!!u;for(var p=d.iterator(this.ops),x=0;p.hasNext()&&x<=h;){var v=p.peekLength(),w=p.peekType();if(p.next(),w==="delete"){h-=Math.min(v,h-x);continue}else w==="insert"&&(x<h||!u)&&(h+=v);x+=v}return h},s.exports=m},function(s,r){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=function(p){return typeof Array.isArray=="function"?Array.isArray(p):a.call(p)==="[object Array]"},f=function(p){if(!p||a.call(p)!=="[object Object]")return!1;var x=i.call(p,"constructor"),v=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!x&&!v)return!1;var w;for(w in p);return typeof w>"u"||i.call(p,w)},m=function(p,x){o&&x.name==="__proto__"?o(p,x.name,{enumerable:!0,configurable:!0,value:x.newValue,writable:!0}):p[x.name]=x.newValue},h=function(p,x){if(x==="__proto__")if(i.call(p,x)){if(c)return c(p,x).value}else return;return p[x]};s.exports=function u(){var p,x,v,w,y,b,_=arguments[0],N=1,k=arguments.length,I=!1;for(typeof _=="boolean"&&(I=_,_=arguments[1]||{},N=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});N<k;++N)if(p=arguments[N],p!=null)for(x in p)v=h(_,x),w=h(p,x),_!==w&&(I&&w&&(f(w)||(y=d(w)))?(y?(y=!1,b=v&&d(v)?v:[]):b=v&&f(v)?v:{},m(_,{name:x,newValue:u(I,b,w)})):typeof w<"u"&&m(_,{name:x,newValue:w}));return _}},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var a=function(){function E(A,z){for(var O=0;O<z.length;O++){var $=z[O];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(A,$.key,$)}}return function(A,z,O){return z&&E(A.prototype,z),O&&E(A,O),A}}(),o=function E(A,z,O){A===null&&(A=Function.prototype);var $=Object.getOwnPropertyDescriptor(A,z);if($===void 0){var G=Object.getPrototypeOf(A);return G===null?void 0:E(G,z,O)}else{if("value"in $)return $.value;var X=$.get;return X===void 0?void 0:X.call(O)}},c=i(3),d=_(c),f=i(2),m=_(f),h=i(0),u=_(h),p=i(16),x=_(p),v=i(6),w=_(v),y=i(7),b=_(y);function _(E){return E&&E.__esModule?E:{default:E}}function N(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function k(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function I(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var C=1,T=function(E){I(A,E);function A(){return N(this,A),k(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,[{key:"attach",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new u.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new m.default().insert(this.value(),(0,d.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(O,$){var G=u.default.query(O,u.default.Scope.BLOCK_ATTRIBUTE);G!=null&&this.attributes.attribute(G,$)}},{key:"formatAt",value:function(O,$,G,X){this.format(G,X)}},{key:"insertAt",value:function(O,$,G){if(typeof $=="string"&&$.endsWith(`
`)){var X=u.default.create(M.blotName);this.parent.insertBefore(X,O===0?this:this.next),X.insertAt(0,$.slice(0,-1))}else o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,O,$,G)}}]),A}(u.default.Embed);T.scope=u.default.Scope.BLOCK_BLOT;var M=function(E){I(A,E);function A(z){N(this,A);var O=k(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,z));return O.cache={},O}return a(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(u.default.Leaf).reduce(function(O,$){return $.length()===0?O:O.insert($.value(),P($))},new m.default).insert(`
`,P(this))),this.cache.delta}},{key:"deleteAt",value:function(O,$){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,O,$),this.cache={}}},{key:"formatAt",value:function(O,$,G,X){$<=0||(u.default.query(G,u.default.Scope.BLOCK)?O+$===this.length()&&this.format(G,X):o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,O,Math.min($,this.length()-O-1),G,X),this.cache={})}},{key:"insertAt",value:function(O,$,G){if(G!=null)return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,O,$,G);if($.length!==0){var X=$.split(`
`),Y=X.shift();Y.length>0&&(O<this.length()-1||this.children.tail==null?o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(O,this.length()-1),Y):this.children.tail.insertAt(this.children.tail.length(),Y),this.cache={});var U=this;X.reduce(function(V,R){return U=U.split(V,!0),U.insertAt(0,R),R.length},O+Y.length)}}},{key:"insertBefore",value:function(O,$){var G=this.children.head;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,O,$),G instanceof x.default&&G.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+C),this.cache.length}},{key:"moveChildren",value:function(O,$){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,O,$),this.cache={}}},{key:"optimize",value:function(O){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,O),this.cache={}}},{key:"path",value:function(O){return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,O,!0)}},{key:"removeChild",value:function(O){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,O),this.cache={}}},{key:"split",value:function(O){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if($&&(O===0||O>=this.length()-C)){var G=this.clone();return O===0?(this.parent.insertBefore(G,this),this):(this.parent.insertBefore(G,this.next),G)}else{var X=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,O,$);return this.cache={},X}}}]),A}(u.default.Block);M.blotName="block",M.tagName="P",M.defaultChild="break",M.allowedChildren=[w.default,u.default.Embed,b.default];function P(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(A=(0,d.default)(A,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?A:P(E.parent,A)}r.bubbleFormats=P,r.BlockEmbed=T,r.default=M},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(V,R){var F=[],q=!0,W=!1,K=void 0;try{for(var B=V[Symbol.iterator](),Z;!(q=(Z=B.next()).done)&&(F.push(Z.value),!(R&&F.length===R));q=!0);}catch(se){W=!0,K=se}finally{try{!q&&B.return&&B.return()}finally{if(W)throw K}}return F}return function(V,R){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return U(V,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function U(V,R){for(var F=0;F<R.length;F++){var q=R[F];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(V,q.key,q)}}return function(V,R,F){return R&&U(V.prototype,R),F&&U(V,F),V}}();i(50);var d=i(2),f=P(d),m=i(14),h=P(m),u=i(8),p=P(u),x=i(9),v=P(x),w=i(0),y=P(w),b=i(15),_=P(b),N=i(3),k=P(N),I=i(10),C=P(I),T=i(34),M=P(T);function P(U){return U&&U.__esModule?U:{default:U}}function E(U,V,R){return V in U?Object.defineProperty(U,V,{value:R,enumerable:!0,configurable:!0,writable:!0}):U[V]=R,U}function A(U,V){if(!(U instanceof V))throw new TypeError("Cannot call a class as a function")}var z=(0,C.default)("quill"),O=function(){c(U,null,[{key:"debug",value:function(R){R===!0&&(R="log"),C.default.level(R)}},{key:"find",value:function(R){return R.__quill||y.default.find(R)}},{key:"import",value:function(R){return this.imports[R]==null&&z.error("Cannot import "+R+". Are you sure it was registered?"),this.imports[R]}},{key:"register",value:function(R,F){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof R!="string"){var K=R.attrName||R.blotName;typeof K=="string"?this.register("formats/"+K,R,F):Object.keys(R).forEach(function(B){q.register(B,R[B],F)})}else this.imports[R]!=null&&!W&&z.warn("Overwriting "+R+" with",F),this.imports[R]=F,(R.startsWith("blots/")||R.startsWith("formats/"))&&F.blotName!=="abstract"?y.default.register(F):R.startsWith("modules")&&typeof F.register=="function"&&F.register()}}]);function U(V){var R=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,U),this.options=$(V,F),this.container=this.options.container,this.container==null)return z.error("Invalid Quill container",V);this.options.debug&&U.debug(this.options.debug);var q=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=y.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new _.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(K){K===p.default.events.TEXT_CHANGE&&R.root.classList.toggle("ql-blank",R.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(K,B){var Z=R.selection.lastRange,se=Z&&Z.length===0?Z.index:void 0;G.call(R,function(){return R.editor.update(null,B,se)},K)});var W=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+q+"<p><br></p></div>");this.setContents(W),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(U,[{key:"addContainer",value:function(R){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof R=="string"){var q=R;R=document.createElement("div"),R.classList.add(q)}return this.container.insertBefore(R,F),R}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(R,F,q){var W=this,K=X(R,F,q),B=o(K,4);return R=B[0],F=B[1],q=B[3],G.call(this,function(){return W.editor.deleteText(R,F)},q,R,-1*F)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(R),this.container.classList.toggle("ql-disabled",!R)}},{key:"focus",value:function(){var R=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=R,this.scrollIntoView()}},{key:"format",value:function(R,F){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return G.call(this,function(){var K=q.getSelection(!0),B=new f.default;if(K==null)return B;if(y.default.query(R,y.default.Scope.BLOCK))B=q.editor.formatLine(K.index,K.length,E({},R,F));else{if(K.length===0)return q.selection.format(R,F),B;B=q.editor.formatText(K.index,K.length,E({},R,F))}return q.setSelection(K,p.default.sources.SILENT),B},W)}},{key:"formatLine",value:function(R,F,q,W,K){var B=this,Z=void 0,se=X(R,F,q,W,K),J=o(se,4);return R=J[0],F=J[1],Z=J[2],K=J[3],G.call(this,function(){return B.editor.formatLine(R,F,Z)},K,R,0)}},{key:"formatText",value:function(R,F,q,W,K){var B=this,Z=void 0,se=X(R,F,q,W,K),J=o(se,4);return R=J[0],F=J[1],Z=J[2],K=J[3],G.call(this,function(){return B.editor.formatText(R,F,Z)},K,R,0)}},{key:"getBounds",value:function(R){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=void 0;typeof R=="number"?q=this.selection.getBounds(R,F):q=this.selection.getBounds(R.index,R.length);var W=this.container.getBoundingClientRect();return{bottom:q.bottom-W.top,height:q.height,left:q.left-W.left,right:q.right-W.left,top:q.top-W.top,width:q.width}}},{key:"getContents",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,q=X(R,F),W=o(q,2);return R=W[0],F=W[1],this.editor.getContents(R,F)}},{key:"getFormat",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof R=="number"?this.editor.getFormat(R,F):this.editor.getFormat(R.index,R.length)}},{key:"getIndex",value:function(R){return R.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(R){return this.scroll.leaf(R)}},{key:"getLine",value:function(R){return this.scroll.line(R)}},{key:"getLines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof R!="number"?this.scroll.lines(R.index,R.length):this.scroll.lines(R,F)}},{key:"getModule",value:function(R){return this.theme.modules[R]}},{key:"getSelection",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return R&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,q=X(R,F),W=o(q,2);return R=W[0],F=W[1],this.editor.getText(R,F)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(R,F,q){var W=this,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:U.sources.API;return G.call(this,function(){return W.editor.insertEmbed(R,F,q)},K,R)}},{key:"insertText",value:function(R,F,q,W,K){var B=this,Z=void 0,se=X(R,0,q,W,K),J=o(se,4);return R=J[0],Z=J[2],K=J[3],G.call(this,function(){return B.editor.insertText(R,F,Z)},K,R,F.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(R,F,q){this.clipboard.dangerouslyPasteHTML(R,F,q)}},{key:"removeFormat",value:function(R,F,q){var W=this,K=X(R,F,q),B=o(K,4);return R=B[0],F=B[1],q=B[3],G.call(this,function(){return W.editor.removeFormat(R,F)},q,R)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(R){var F=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return G.call(this,function(){R=new f.default(R);var W=F.getLength(),K=F.editor.deleteText(0,W),B=F.editor.applyDelta(R),Z=B.ops[B.ops.length-1];Z!=null&&typeof Z.insert=="string"&&Z.insert[Z.insert.length-1]===`
`&&(F.editor.deleteText(F.getLength()-1,1),B.delete(1));var se=K.compose(B);return se},q)}},{key:"setSelection",value:function(R,F,q){if(R==null)this.selection.setRange(null,F||U.sources.API);else{var W=X(R,F,q),K=o(W,4);R=K[0],F=K[1],q=K[3],this.selection.setRange(new b.Range(R,F),q),q!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(R){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,q=new f.default().insert(R);return this.setContents(q,F)}},{key:"update",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,F=this.scroll.update(R);return this.selection.update(R),F}},{key:"updateContents",value:function(R){var F=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return G.call(this,function(){return R=new f.default(R),F.editor.applyDelta(R,q)},q,!0)}}]),U}();O.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},O.events=p.default.events,O.sources=p.default.sources,O.version="1.3.7",O.imports={delta:f.default,parchment:y.default,"core/module":v.default,"core/theme":M.default};function $(U,V){if(V=(0,k.default)(!0,{container:U,modules:{clipboard:!0,keyboard:!0,history:!0}},V),!V.theme||V.theme===O.DEFAULTS.theme)V.theme=M.default;else if(V.theme=O.import("themes/"+V.theme),V.theme==null)throw new Error("Invalid theme "+V.theme+". Did you register it?");var R=(0,k.default)(!0,{},V.theme.DEFAULTS);[R,V].forEach(function(W){W.modules=W.modules||{},Object.keys(W.modules).forEach(function(K){W.modules[K]===!0&&(W.modules[K]={})})});var F=Object.keys(R.modules).concat(Object.keys(V.modules)),q=F.reduce(function(W,K){var B=O.import("modules/"+K);return B==null?z.error("Cannot load "+K+" module. Are you sure you registered it?"):W[K]=B.DEFAULTS||{},W},{});return V.modules!=null&&V.modules.toolbar&&V.modules.toolbar.constructor!==Object&&(V.modules.toolbar={container:V.modules.toolbar}),V=(0,k.default)(!0,{},O.DEFAULTS,{modules:q},R,V),["bounds","container","scrollingContainer"].forEach(function(W){typeof V[W]=="string"&&(V[W]=document.querySelector(V[W]))}),V.modules=Object.keys(V.modules).reduce(function(W,K){return V.modules[K]&&(W[K]=V.modules[K]),W},{}),V}function G(U,V,R,F){if(this.options.strict&&!this.isEnabled()&&V===p.default.sources.USER)return new f.default;var q=R==null?null:this.getSelection(),W=this.editor.delta,K=U();if(q!=null&&(R===!0&&(R=q.index),F==null?q=Y(q,K,V):F!==0&&(q=Y(q,R,F,V)),this.setSelection(q,p.default.sources.SILENT)),K.length()>0){var B,Z=[p.default.events.TEXT_CHANGE,K,W,V];if((B=this.emitter).emit.apply(B,[p.default.events.EDITOR_CHANGE].concat(Z)),V!==p.default.sources.SILENT){var se;(se=this.emitter).emit.apply(se,Z)}}return K}function X(U,V,R,F,q){var W={};return typeof U.index=="number"&&typeof U.length=="number"?typeof V!="number"?(q=F,F=R,R=V,V=U.length,U=U.index):(V=U.length,U=U.index):typeof V!="number"&&(q=F,F=R,R=V,V=0),(typeof R>"u"?"undefined":a(R))==="object"?(W=R,q=F):typeof R=="string"&&(F!=null?W[R]=F:q=R),q=q||p.default.sources.API,[U,V,W,q]}function Y(U,V,R,F){if(U==null)return null;var q=void 0,W=void 0;if(V instanceof f.default){var K=[U.index,U.index+U.length].map(function(J){return V.transformPosition(J,F!==p.default.sources.USER)}),B=o(K,2);q=B[0],W=B[1]}else{var Z=[U.index,U.index+U.length].map(function(J){return J<V||J===V&&F===p.default.sources.USER?J:R>=0?J+R:Math.max(V,J+R)}),se=o(Z,2);q=se[0],W=se[1]}return new b.Range(q,W-q)}r.expandConfig=$,r.overload=X,r.default=O},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(y,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,b,_){return b&&w(y.prototype,b),_&&w(y,_),y}}(),o=function w(y,b,_){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,b);if(N===void 0){var k=Object.getPrototypeOf(y);return k===null?void 0:w(k,b,_)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(_)}},c=i(7),d=h(c),f=i(0),m=h(f);function h(w){return w&&w.__esModule?w:{default:w}}function u(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function p(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function x(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var v=function(w){x(y,w);function y(){return u(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"formatAt",value:function(_,N,k,I){if(y.compare(this.statics.blotName,k)<0&&m.default.query(k,m.default.Scope.BLOT)){var C=this.isolate(_,N);I&&C.wrap(k,I)}else o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"formatAt",this).call(this,_,N,k,I)}},{key:"optimize",value:function(_){if(o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,_),this.parent instanceof y&&y.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(_,N){var k=y.order.indexOf(_),I=y.order.indexOf(N);return k>=0||I>=0?k-I:_===N?0:_<N?-1:1}}]),y}(m.default.Inline);v.allowedChildren=[v,m.default.Embed,d.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=v},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function m(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var h=function(u){m(p,u);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default.Text);r.default=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function b(_,N){for(var k=0;k<N.length;k++){var I=N[k];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,N,k){return N&&b(_.prototype,N),k&&b(_,k),_}}(),o=function b(_,N,k){_===null&&(_=Function.prototype);var I=Object.getOwnPropertyDescriptor(_,N);if(I===void 0){var C=Object.getPrototypeOf(_);return C===null?void 0:b(C,N,k)}else{if("value"in I)return I.value;var T=I.get;return T===void 0?void 0:T.call(k)}},c=i(54),d=h(c),f=i(10),m=h(f);function h(b){return b&&b.__esModule?b:{default:b}}function u(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function p(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:b}function x(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}var v=(0,m.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(b){document.addEventListener(b,function(){for(var _=arguments.length,N=Array(_),k=0;k<_;k++)N[k]=arguments[k];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(I){if(I.__quill&&I.__quill.emitter){var C;(C=I.__quill.emitter).handleDOM.apply(C,N)}})})});var y=function(b){x(_,b);function _(){u(this,_);var N=p(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));return N.listeners={},N.on("error",v.error),N}return a(_,[{key:"emit",value:function(){v.log.apply(v,arguments),o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(k){for(var I=arguments.length,C=Array(I>1?I-1:0),T=1;T<I;T++)C[T-1]=arguments[T];(this.listeners[k.type]||[]).forEach(function(M){var P=M.node,E=M.handler;(k.target===P||P.contains(k.target))&&E.apply(void 0,[k].concat(C))})}},{key:"listenDOM",value:function(k,I,C){this.listeners[k]||(this.listeners[k]=[]),this.listeners[k].push({node:I,handler:C})}}]),_}(d.default);y.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},y.sources={API:"api",SILENT:"silent",USER:"user"},r.default=y},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});function a(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function c(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,c),this.quill=d,this.options=f};o.DEFAULTS={},r.default=o},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=["error","warn","log","info"],o="warn";function c(f){if(a.indexOf(f)<=a.indexOf(o)){for(var m,h=arguments.length,u=Array(h>1?h-1:0),p=1;p<h;p++)u[p-1]=arguments[p];(m=console)[f].apply(m,u)}}function d(f){return a.reduce(function(m,h){return m[h]=c.bind(console,h,f),m},{})}c.level=d.level=function(f){o=f},r.default=d},function(s,r,i){var a=Array.prototype.slice,o=i(52),c=i(53),d=s.exports=function(u,p,x){return x||(x={}),u===p?!0:u instanceof Date&&p instanceof Date?u.getTime()===p.getTime():!u||!p||typeof u!="object"&&typeof p!="object"?x.strict?u===p:u==p:h(u,p,x)};function f(u){return u==null}function m(u){return!(!u||typeof u!="object"||typeof u.length!="number"||typeof u.copy!="function"||typeof u.slice!="function"||u.length>0&&typeof u[0]!="number")}function h(u,p,x){var v,w;if(f(u)||f(p)||u.prototype!==p.prototype)return!1;if(c(u))return c(p)?(u=a.call(u),p=a.call(p),d(u,p,x)):!1;if(m(u)){if(!m(p)||u.length!==p.length)return!1;for(v=0;v<u.length;v++)if(u[v]!==p[v])return!1;return!0}try{var y=o(u),b=o(p)}catch{return!1}if(y.length!=b.length)return!1;for(y.sort(),b.sort(),v=y.length-1;v>=0;v--)if(y[v]!=b[v])return!1;for(v=y.length-1;v>=0;v--)if(w=y[v],!d(u[w],p[w],x))return!1;return typeof u==typeof p}},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=function(){function c(d,f,m){m===void 0&&(m={}),this.attrName=d,this.keyName=f;var h=a.Scope.TYPE&a.Scope.ATTRIBUTE;m.scope!=null?this.scope=m.scope&a.Scope.LEVEL|h:this.scope=a.Scope.ATTRIBUTE,m.whitelist!=null&&(this.whitelist=m.whitelist)}return c.keys=function(d){return[].map.call(d.attributes,function(f){return f.name})},c.prototype.add=function(d,f){return this.canAdd(d,f)?(d.setAttribute(this.keyName,f),!0):!1},c.prototype.canAdd=function(d,f){var m=a.query(d,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return m==null?!1:this.whitelist==null?!0:typeof f=="string"?this.whitelist.indexOf(f.replace(/["']/g,""))>-1:this.whitelist.indexOf(f)>-1},c.prototype.remove=function(d){d.removeAttribute(this.keyName)},c.prototype.value=function(d){var f=d.getAttribute(this.keyName);return this.canAdd(d,f)&&f?f:""},c}();r.default=o},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var a=function(){function T(M,P){var E=[],A=!0,z=!1,O=void 0;try{for(var $=M[Symbol.iterator](),G;!(A=(G=$.next()).done)&&(E.push(G.value),!(P&&E.length===P));A=!0);}catch(X){z=!0,O=X}finally{try{!A&&$.return&&$.return()}finally{if(z)throw O}}return E}return function(M,P){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return T(M,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(M,P){for(var E=0;E<P.length;E++){var A=P[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,A.key,A)}}return function(M,P,E){return P&&T(M.prototype,P),E&&T(M,E),M}}(),c=function T(M,P,E){M===null&&(M=Function.prototype);var A=Object.getOwnPropertyDescriptor(M,P);if(A===void 0){var z=Object.getPrototypeOf(M);return z===null?void 0:T(z,P,E)}else{if("value"in A)return A.value;var O=A.get;return O===void 0?void 0:O.call(E)}},d=i(2),f=b(d),m=i(0),h=b(m),u=i(4),p=b(u),x=i(6),v=b(x),w=i(7),y=b(w);function b(T){return T&&T.__esModule?T:{default:T}}function _(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")}function N(T,M){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:T}function k(T,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);T.prototype=Object.create(M&&M.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(T,M):T.__proto__=M)}var I=function(T){k(M,T);function M(){return _(this,M),N(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return M}(v.default);I.blotName="code",I.tagName="CODE";var C=function(T){k(M,T);function M(){return _(this,M),N(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return o(M,[{key:"delta",value:function(){var E=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(z,O){return z.insert(O).insert(`
`,E.formats())},new f.default)}},{key:"format",value:function(E,A){if(!(E===this.statics.blotName&&A)){var z=this.descendant(y.default,this.length()-1),O=a(z,1),$=O[0];$!=null&&$.deleteAt($.length()-1,1),c(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"format",this).call(this,E,A)}}},{key:"formatAt",value:function(E,A,z,O){if(A!==0&&!(h.default.query(z,h.default.Scope.BLOCK)==null||z===this.statics.blotName&&O===this.statics.formats(this.domNode))){var $=this.newlineIndex(E);if(!($<0||$>=E+A)){var G=this.newlineIndex(E,!0)+1,X=$-G+1,Y=this.isolate(G,X),U=Y.next;Y.format(z,O),U instanceof M&&U.formatAt(0,E-G+A-X,z,O)}}}},{key:"insertAt",value:function(E,A,z){if(z==null){var O=this.descendant(y.default,E),$=a(O,2),G=$[0],X=$[1];G.insertAt(X,A)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var z=this.domNode.textContent.slice(E).indexOf(`
`);return z>-1?E+z:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),c(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"optimize",this).call(this,E);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(E),A.moveChildren(this),A.remove())}},{key:"replace",value:function(E){c(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var z=h.default.find(A);z==null?A.parentNode.removeChild(A):z instanceof h.default.Embed?z.remove():z.unwrap()})}}],[{key:"create",value:function(E){var A=c(M.__proto__||Object.getPrototypeOf(M),"create",this).call(this,E);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),M}(p.default);C.blotName="code-block",C.tagName="PRE",C.TAB="  ",r.Code=I,r.default=C},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(V,R){var F=[],q=!0,W=!1,K=void 0;try{for(var B=V[Symbol.iterator](),Z;!(q=(Z=B.next()).done)&&(F.push(Z.value),!(R&&F.length===R));q=!0);}catch(se){W=!0,K=se}finally{try{!q&&B.return&&B.return()}finally{if(W)throw K}}return F}return function(V,R){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return U(V,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function U(V,R){for(var F=0;F<R.length;F++){var q=R[F];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(V,q.key,q)}}return function(V,R,F){return R&&U(V.prototype,R),F&&U(V,F),V}}(),d=i(2),f=A(d),m=i(20),h=A(m),u=i(0),p=A(u),x=i(13),v=A(x),w=i(24),y=A(w),b=i(4),_=A(b),N=i(16),k=A(N),I=i(21),C=A(I),T=i(11),M=A(T),P=i(3),E=A(P);function A(U){return U&&U.__esModule?U:{default:U}}function z(U,V,R){return V in U?Object.defineProperty(U,V,{value:R,enumerable:!0,configurable:!0,writable:!0}):U[V]=R,U}function O(U,V){if(!(U instanceof V))throw new TypeError("Cannot call a class as a function")}var $=/^[ -~]*$/,G=function(){function U(V){O(this,U),this.scroll=V,this.delta=this.getDelta()}return c(U,[{key:"applyDelta",value:function(R){var F=this,q=!1;this.scroll.update();var W=this.scroll.length();return this.scroll.batchStart(),R=Y(R),R.reduce(function(K,B){var Z=B.retain||B.delete||B.insert.length||1,se=B.attributes||{};if(B.insert!=null){if(typeof B.insert=="string"){var J=B.insert;J.endsWith(`
`)&&q&&(q=!1,J=J.slice(0,-1)),K>=W&&!J.endsWith(`
`)&&(q=!0),F.scroll.insertAt(K,J);var ie=F.scroll.line(K),le=o(ie,2),Q=le[0],ue=le[1],_e=(0,E.default)({},(0,b.bubbleFormats)(Q));if(Q instanceof _.default){var me=Q.descendant(p.default.Leaf,ue),Se=o(me,1),xe=Se[0];_e=(0,E.default)(_e,(0,b.bubbleFormats)(xe))}se=h.default.attributes.diff(_e,se)||{}}else if(a(B.insert)==="object"){var he=Object.keys(B.insert)[0];if(he==null)return K;F.scroll.insertAt(K,he,B.insert[he])}W+=Z}return Object.keys(se).forEach(function(pe){F.scroll.formatAt(K,Z,pe,se[pe])}),K+Z},0),R.reduce(function(K,B){return typeof B.delete=="number"?(F.scroll.deleteAt(K,B.delete),K):K+(B.retain||B.insert.length||1)},0),this.scroll.batchEnd(),this.update(R)}},{key:"deleteText",value:function(R,F){return this.scroll.deleteAt(R,F),this.update(new f.default().retain(R).delete(F))}},{key:"formatLine",value:function(R,F){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(W).forEach(function(K){if(!(q.scroll.whitelist!=null&&!q.scroll.whitelist[K])){var B=q.scroll.lines(R,Math.max(F,1)),Z=F;B.forEach(function(se){var J=se.length();if(!(se instanceof v.default))se.format(K,W[K]);else{var ie=R-se.offset(q.scroll),le=se.newlineIndex(ie+Z)-ie+1;se.formatAt(ie,le,K,W[K])}Z-=J})}}),this.scroll.optimize(),this.update(new f.default().retain(R).retain(F,(0,C.default)(W)))}},{key:"formatText",value:function(R,F){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(W).forEach(function(K){q.scroll.formatAt(R,F,K,W[K])}),this.update(new f.default().retain(R).retain(F,(0,C.default)(W)))}},{key:"getContents",value:function(R,F){return this.delta.slice(R,R+F)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(R,F){return R.concat(F.delta())},new f.default)}},{key:"getFormat",value:function(R){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=[],W=[];F===0?this.scroll.path(R).forEach(function(B){var Z=o(B,1),se=Z[0];se instanceof _.default?q.push(se):se instanceof p.default.Leaf&&W.push(se)}):(q=this.scroll.lines(R,F),W=this.scroll.descendants(p.default.Leaf,R,F));var K=[q,W].map(function(B){if(B.length===0)return{};for(var Z=(0,b.bubbleFormats)(B.shift());Object.keys(Z).length>0;){var se=B.shift();if(se==null)return Z;Z=X((0,b.bubbleFormats)(se),Z)}return Z});return E.default.apply(E.default,K)}},{key:"getText",value:function(R,F){return this.getContents(R,F).filter(function(q){return typeof q.insert=="string"}).map(function(q){return q.insert}).join("")}},{key:"insertEmbed",value:function(R,F,q){return this.scroll.insertAt(R,F,q),this.update(new f.default().retain(R).insert(z({},F,q)))}},{key:"insertText",value:function(R,F){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F=F.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(R,F),Object.keys(W).forEach(function(K){q.scroll.formatAt(R,F.length,K,W[K])}),this.update(new f.default().retain(R).insert(F,(0,C.default)(W)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var R=this.scroll.children.head;return R.statics.blotName!==_.default.blotName||R.children.length>1?!1:R.children.head instanceof k.default}},{key:"removeFormat",value:function(R,F){var q=this.getText(R,F),W=this.scroll.line(R+F),K=o(W,2),B=K[0],Z=K[1],se=0,J=new f.default;B!=null&&(B instanceof v.default?se=B.newlineIndex(Z)-Z+1:se=B.length()-Z,J=B.delta().slice(Z,Z+se-1).insert(`
`));var ie=this.getContents(R,F+se),le=ie.diff(new f.default().insert(q).concat(J)),Q=new f.default().retain(R).concat(le);return this.applyDelta(Q)}},{key:"update",value:function(R){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,W=this.delta;if(F.length===1&&F[0].type==="characterData"&&F[0].target.data.match($)&&p.default.find(F[0].target)){var K=p.default.find(F[0].target),B=(0,b.bubbleFormats)(K),Z=K.offset(this.scroll),se=F[0].oldValue.replace(y.default.CONTENTS,""),J=new f.default().insert(se),ie=new f.default().insert(K.value()),le=new f.default().retain(Z).concat(J.diff(ie,q));R=le.reduce(function(Q,ue){return ue.insert?Q.insert(ue.insert,B):Q.push(ue)},new f.default),this.delta=W.compose(R)}else this.delta=this.getDelta(),(!R||!(0,M.default)(W.compose(R),this.delta))&&(R=W.diff(this.delta,q));return R}}]),U}();function X(U,V){return Object.keys(V).reduce(function(R,F){return U[F]==null||(V[F]===U[F]?R[F]=V[F]:Array.isArray(V[F])?V[F].indexOf(U[F])<0&&(R[F]=V[F].concat([U[F]])):R[F]=[V[F],U[F]]),R},{})}function Y(U){return U.reduce(function(V,R){if(R.insert===1){var F=(0,C.default)(R.attributes);return delete F.image,V.insert({image:R.attributes.image},F)}if(R.attributes!=null&&(R.attributes.list===!0||R.attributes.bullet===!0)&&(R=(0,C.default)(R),R.attributes.list?R.attributes.list="ordered":(R.attributes.list="bullet",delete R.attributes.bullet)),typeof R.insert=="string"){var q=R.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return V.insert(q,R.attributes)}return V.push(R)},new f.default)}r.default=G},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var a=function(){function T(M,P){var E=[],A=!0,z=!1,O=void 0;try{for(var $=M[Symbol.iterator](),G;!(A=(G=$.next()).done)&&(E.push(G.value),!(P&&E.length===P));A=!0);}catch(X){z=!0,O=X}finally{try{!A&&$.return&&$.return()}finally{if(z)throw O}}return E}return function(M,P){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return T(M,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(M,P){for(var E=0;E<P.length;E++){var A=P[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,A.key,A)}}return function(M,P,E){return P&&T(M.prototype,P),E&&T(M,E),M}}(),c=i(0),d=y(c),f=i(21),m=y(f),h=i(11),u=y(h),p=i(8),x=y(p),v=i(10),w=y(v);function y(T){return T&&T.__esModule?T:{default:T}}function b(T){if(Array.isArray(T)){for(var M=0,P=Array(T.length);M<T.length;M++)P[M]=T[M];return P}else return Array.from(T)}function _(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")}var N=(0,w.default)("quill:selection"),k=function T(M){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;_(this,T),this.index=M,this.length=P},I=function(){function T(M,P){var E=this;_(this,T),this.emitter=P,this.scroll=M,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=d.default.create("cursor",this),this.lastRange=this.savedRange=new k(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,x.default.sources.USER),1)}),this.emitter.on(x.default.events.EDITOR_CHANGE,function(A,z){A===x.default.events.TEXT_CHANGE&&z.length()>0&&E.update(x.default.sources.SILENT)}),this.emitter.on(x.default.events.SCROLL_BEFORE_UPDATE,function(){if(E.hasFocus()){var A=E.getNativeRange();A!=null&&A.start.node!==E.cursor.textNode&&E.emitter.once(x.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(x.default.events.SCROLL_OPTIMIZE,function(A,z){if(z.range){var O=z.range,$=O.startNode,G=O.startOffset,X=O.endNode,Y=O.endOffset;E.setNativeRange($,G,X,Y)}}),this.update(x.default.sources.SILENT)}return o(T,[{key:"handleComposition",value:function(){var P=this;this.root.addEventListener("compositionstart",function(){P.composing=!0}),this.root.addEventListener("compositionend",function(){if(P.composing=!1,P.cursor.parent){var E=P.cursor.restore();if(!E)return;setTimeout(function(){P.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var P=this;this.emitter.listenDOM("mousedown",document.body,function(){P.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){P.mouseDown=!1,P.update(x.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(P,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[P])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||d.default.query(P,d.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var z=d.default.find(A.start.node,!1);if(z==null)return;if(z instanceof d.default.Leaf){var O=z.split(A.start.offset);z.parent.insertBefore(this.cursor,O)}else z.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(P,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(P){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();P=Math.min(P,A-1),E=Math.min(P+E,A-1)-P;var z=void 0,O=this.scroll.leaf(P),$=a(O,2),G=$[0],X=$[1];if(G==null)return null;var Y=G.position(X,!0),U=a(Y,2);z=U[0],X=U[1];var V=document.createRange();if(E>0){V.setStart(z,X);var R=this.scroll.leaf(P+E),F=a(R,2);if(G=F[0],X=F[1],G==null)return null;var q=G.position(X,!0),W=a(q,2);return z=W[0],X=W[1],V.setEnd(z,X),V.getBoundingClientRect()}else{var K="left",B=void 0;return z instanceof Text?(X<z.data.length?(V.setStart(z,X),V.setEnd(z,X+1)):(V.setStart(z,X-1),V.setEnd(z,X),K="right"),B=V.getBoundingClientRect()):(B=G.domNode.getBoundingClientRect(),X>0&&(K="right")),{bottom:B.top+B.height,height:B.height,left:B[K],right:B[K],top:B.top,width:0}}}},{key:"getNativeRange",value:function(){var P=document.getSelection();if(P==null||P.rangeCount<=0)return null;var E=P.getRangeAt(0);if(E==null)return null;var A=this.normalizeNative(E);return N.info("getNativeRange",A),A}},{key:"getRange",value:function(){var P=this.getNativeRange();if(P==null)return[null,null];var E=this.normalizedToRange(P);return[E,P]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(P){var E=this,A=[[P.start.node,P.start.offset]];P.native.collapsed||A.push([P.end.node,P.end.offset]);var z=A.map(function(G){var X=a(G,2),Y=X[0],U=X[1],V=d.default.find(Y,!0),R=V.offset(E.scroll);return U===0?R:V instanceof d.default.Container?R+V.length():R+V.index(Y,U)}),O=Math.min(Math.max.apply(Math,b(z)),this.scroll.length()-1),$=Math.min.apply(Math,[O].concat(b(z)));return new k($,O-$)}},{key:"normalizeNative",value:function(P){if(!C(this.root,P.startContainer)||!P.collapsed&&!C(this.root,P.endContainer))return null;var E={start:{node:P.startContainer,offset:P.startOffset},end:{node:P.endContainer,offset:P.endOffset},native:P};return[E.start,E.end].forEach(function(A){for(var z=A.node,O=A.offset;!(z instanceof Text)&&z.childNodes.length>0;)if(z.childNodes.length>O)z=z.childNodes[O],O=0;else if(z.childNodes.length===O)z=z.lastChild,O=z instanceof Text?z.data.length:z.childNodes.length+1;else break;A.node=z,A.offset=O}),E}},{key:"rangeToNative",value:function(P){var E=this,A=P.collapsed?[P.index]:[P.index,P.index+P.length],z=[],O=this.scroll.length();return A.forEach(function($,G){$=Math.min(O-1,$);var X=void 0,Y=E.scroll.leaf($),U=a(Y,2),V=U[0],R=U[1],F=V.position(R,G!==0),q=a(F,2);X=q[0],R=q[1],z.push(X,R)}),z.length<2&&(z=z.concat(z)),z}},{key:"scrollIntoView",value:function(P){var E=this.lastRange;if(E!=null){var A=this.getBounds(E.index,E.length);if(A!=null){var z=this.scroll.length()-1,O=this.scroll.line(Math.min(E.index,z)),$=a(O,1),G=$[0],X=G;if(E.length>0){var Y=this.scroll.line(Math.min(E.index+E.length,z)),U=a(Y,1);X=U[0]}if(!(G==null||X==null)){var V=P.getBoundingClientRect();A.top<V.top?P.scrollTop-=V.top-A.top:A.bottom>V.bottom&&(P.scrollTop+=A.bottom-V.bottom)}}}}},{key:"setNativeRange",value:function(P,E){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,O=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",P,E,A,z),!(P!=null&&(this.root.parentNode==null||P.parentNode==null||A.parentNode==null))){var $=document.getSelection();if($!=null)if(P!=null){this.hasFocus()||this.root.focus();var G=(this.getNativeRange()||{}).native;if(G==null||O||P!==G.startContainer||E!==G.startOffset||A!==G.endContainer||z!==G.endOffset){P.tagName=="BR"&&(E=[].indexOf.call(P.parentNode.childNodes,P),P=P.parentNode),A.tagName=="BR"&&(z=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var X=document.createRange();X.setStart(P,E),X.setEnd(A,z),$.removeAllRanges(),$.addRange(X)}}else $.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(P){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;if(typeof E=="string"&&(A=E,E=!1),N.info("setRange",P),P!=null){var z=this.rangeToNative(P);this.setNativeRange.apply(this,b(z).concat([E]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.default.sources.USER,E=this.lastRange,A=this.getRange(),z=a(A,2),O=z[0],$=z[1];if(this.lastRange=O,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,u.default)(E,this.lastRange)){var G;!this.composing&&$!=null&&$.native.collapsed&&$.start.node!==this.cursor.textNode&&this.cursor.restore();var X=[x.default.events.SELECTION_CHANGE,(0,m.default)(this.lastRange),(0,m.default)(E),P];if((G=this.emitter).emit.apply(G,[x.default.events.EDITOR_CHANGE].concat(X)),P!==x.default.sources.SILENT){var Y;(Y=this.emitter).emit.apply(Y,X)}}}}]),T}();function C(T,M){try{M.parentNode}catch{return!1}return M instanceof Text&&(M=M.parentNode),T.contains(M)}r.Range=k,r.default=I},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function x(v,w){for(var y=0;y<w.length;y++){var b=w[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,y){return w&&x(v.prototype,w),y&&x(v,y),v}}(),o=function x(v,w,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:x(_,w,y)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(y)}},c=i(0),d=f(c);function f(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function h(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function u(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){u(v,x);function v(){return m(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"insertInto",value:function(y,b){y.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,y,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(d.default.Embed);p.blotName="break",p.tagName="BR",r.default=p},function(s,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var x in p)p.hasOwnProperty(x)&&(u[x]=p[x])};return function(u,p){h(u,p);function x(){this.constructor=u}u.prototype=p===null?Object.create(p):(x.prototype=p.prototype,new x)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),c=i(30),d=i(1),f=function(h){a(u,h);function u(p){var x=h.call(this,p)||this;return x.build(),x}return u.prototype.appendChild=function(p){this.insertBefore(p)},u.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},u.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(x){try{var v=m(x);p.insertBefore(v,p.children.head||void 0)}catch(w){if(w instanceof d.ParchmentError)return;throw w}})},u.prototype.deleteAt=function(p,x){if(p===0&&x===this.length())return this.remove();this.children.forEachAt(p,x,function(v,w,y){v.deleteAt(w,y)})},u.prototype.descendant=function(p,x){var v=this.children.find(x),w=v[0],y=v[1];return p.blotName==null&&p(w)||p.blotName!=null&&w instanceof p?[w,y]:w instanceof u?w.descendant(p,y):[null,-1]},u.prototype.descendants=function(p,x,v){x===void 0&&(x=0),v===void 0&&(v=Number.MAX_VALUE);var w=[],y=v;return this.children.forEachAt(x,v,function(b,_,N){(p.blotName==null&&p(b)||p.blotName!=null&&b instanceof p)&&w.push(b),b instanceof u&&(w=w.concat(b.descendants(p,_,y))),y-=N}),w},u.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),h.prototype.detach.call(this)},u.prototype.formatAt=function(p,x,v,w){this.children.forEachAt(p,x,function(y,b,_){y.formatAt(b,_,v,w)})},u.prototype.insertAt=function(p,x,v){var w=this.children.find(p),y=w[0],b=w[1];if(y)y.insertAt(b,x,v);else{var _=v==null?d.create("text",x):d.create(x,v);this.appendChild(_)}},u.prototype.insertBefore=function(p,x){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return p instanceof v}))throw new d.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,x)},u.prototype.length=function(){return this.children.reduce(function(p,x){return p+x.length()},0)},u.prototype.moveChildren=function(p,x){this.children.forEach(function(v){p.insertBefore(v,x)})},u.prototype.optimize=function(p){if(h.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var x=d.create(this.statics.defaultChild);this.appendChild(x),x.optimize(p)}else this.remove()},u.prototype.path=function(p,x){x===void 0&&(x=!1);var v=this.children.find(p,x),w=v[0],y=v[1],b=[[this,p]];return w instanceof u?b.concat(w.path(y,x)):(w!=null&&b.push([w,y]),b)},u.prototype.removeChild=function(p){this.children.remove(p)},u.prototype.replace=function(p){p instanceof u&&p.moveChildren(this),h.prototype.replace.call(this,p)},u.prototype.split=function(p,x){if(x===void 0&&(x=!1),!x){if(p===0)return this;if(p===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(p,this.length(),function(w,y,b){w=w.split(y,x),v.appendChild(w)}),v},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(p,x){var v=this,w=[],y=[];p.forEach(function(b){b.target===v.domNode&&b.type==="childList"&&(w.push.apply(w,b.addedNodes),y.push.apply(y,b.removedNodes))}),y.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var _=d.find(b);_!=null&&(_.domNode.parentNode==null||_.domNode.parentNode===v.domNode)&&_.detach()}}),w.filter(function(b){return b.parentNode==v.domNode}).sort(function(b,_){return b===_?0:b.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var _=null;b.nextSibling!=null&&(_=d.find(b.nextSibling));var N=m(b);(N.next!=_||N.next==null)&&(N.parent!=null&&N.parent.removeChild(v),v.insertBefore(N,_||void 0))})},u}(c.default);function m(h){var u=d.find(h);if(u==null)try{u=d.create(h)}catch{u=d.create(d.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(x){u.domNode.appendChild(x)}),h.parentNode&&h.parentNode.replaceChild(u.domNode,h),u.attach()}return u}r.default=f},function(s,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var x in p)p.hasOwnProperty(x)&&(u[x]=p[x])};return function(u,p){h(u,p);function x(){this.constructor=u}u.prototype=p===null?Object.create(p):(x.prototype=p.prototype,new x)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),c=i(31),d=i(17),f=i(1),m=function(h){a(u,h);function u(p){var x=h.call(this,p)||this;return x.attributes=new c.default(x.domNode),x}return u.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},u.prototype.format=function(p,x){var v=f.query(p);v instanceof o.default?this.attributes.attribute(v,x):x&&v!=null&&(p!==this.statics.blotName||this.formats()[p]!==x)&&this.replaceWith(p,x)},u.prototype.formats=function(){var p=this.attributes.values(),x=this.statics.formats(this.domNode);return x!=null&&(p[this.statics.blotName]=x),p},u.prototype.replaceWith=function(p,x){var v=h.prototype.replaceWith.call(this,p,x);return this.attributes.copy(v),v},u.prototype.update=function(p,x){var v=this;h.prototype.update.call(this,p,x),p.some(function(w){return w.target===v.domNode&&w.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(p,x){var v=h.prototype.wrap.call(this,p,x);return v instanceof u&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},u}(d.default);r.default=m},function(s,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var u in h)h.hasOwnProperty(u)&&(m[u]=h[u])};return function(m,h){f(m,h);function u(){this.constructor=m}m.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),c=i(1),d=function(f){a(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.value=function(h){return!0},m.prototype.index=function(h,u){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},m.prototype.position=function(h,u){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(p+=1),[this.parent.domNode,p]},m.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},m.scope=c.Scope.INLINE_BLOT,m}(o.default);r.default=d},function(s,r,i){var a=i(11),o=i(3),c={attributes:{compose:function(f,m,h){typeof f!="object"&&(f={}),typeof m!="object"&&(m={});var u=o(!0,{},m);h||(u=Object.keys(u).reduce(function(x,v){return u[v]!=null&&(x[v]=u[v]),x},{}));for(var p in f)f[p]!==void 0&&m[p]===void 0&&(u[p]=f[p]);return Object.keys(u).length>0?u:void 0},diff:function(f,m){typeof f!="object"&&(f={}),typeof m!="object"&&(m={});var h=Object.keys(f).concat(Object.keys(m)).reduce(function(u,p){return a(f[p],m[p])||(u[p]=m[p]===void 0?null:m[p]),u},{});return Object.keys(h).length>0?h:void 0},transform:function(f,m,h){if(typeof f!="object")return m;if(typeof m=="object"){if(!h)return m;var u=Object.keys(m).reduce(function(p,x){return f[x]===void 0&&(p[x]=m[x]),p},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(f){return new d(f)},length:function(f){return typeof f.delete=="number"?f.delete:typeof f.retain=="number"?f.retain:typeof f.insert=="string"?f.insert.length:1}};function d(f){this.ops=f,this.index=0,this.offset=0}d.prototype.hasNext=function(){return this.peekLength()<1/0},d.prototype.next=function(f){f||(f=1/0);var m=this.ops[this.index];if(m){var h=this.offset,u=c.length(m);if(f>=u-h?(f=u-h,this.index+=1,this.offset=0):this.offset+=f,typeof m.delete=="number")return{delete:f};var p={};return m.attributes&&(p.attributes=m.attributes),typeof m.retain=="number"?p.retain=f:typeof m.insert=="string"?p.insert=m.insert.substr(h,f):p.insert=m.insert,p}else return{retain:1/0}},d.prototype.peek=function(){return this.ops[this.index]},d.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},d.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},d.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var f=this.offset,m=this.index,h=this.next(),u=this.ops.slice(this.index);return this.offset=f,this.index=m,[h].concat(u)}else return[]},s.exports=c},function(s,r){var i=function(){function a(v,w){return w!=null&&v instanceof w}var o;try{o=Map}catch{o=function(){}}var c;try{c=Set}catch{c=function(){}}var d;try{d=Promise}catch{d=function(){}}function f(v,w,y,b,_){typeof w=="object"&&(y=w.depth,b=w.prototype,_=w.includeNonEnumerable,w=w.circular);var N=[],k=[],I=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof y>"u"&&(y=1/0);function C(T,M){if(T===null)return null;if(M===0)return T;var P,E;if(typeof T!="object")return T;if(a(T,o))P=new o;else if(a(T,c))P=new c;else if(a(T,d))P=new d(function(V,R){T.then(function(F){V(C(F,M-1))},function(F){R(C(F,M-1))})});else if(f.__isArray(T))P=[];else if(f.__isRegExp(T))P=new RegExp(T.source,x(T)),T.lastIndex&&(P.lastIndex=T.lastIndex);else if(f.__isDate(T))P=new Date(T.getTime());else{if(I&&Buffer.isBuffer(T))return Buffer.allocUnsafe?P=Buffer.allocUnsafe(T.length):P=new Buffer(T.length),T.copy(P),P;a(T,Error)?P=Object.create(T):typeof b>"u"?(E=Object.getPrototypeOf(T),P=Object.create(E)):(P=Object.create(b),E=b)}if(w){var A=N.indexOf(T);if(A!=-1)return k[A];N.push(T),k.push(P)}a(T,o)&&T.forEach(function(V,R){var F=C(R,M-1),q=C(V,M-1);P.set(F,q)}),a(T,c)&&T.forEach(function(V){var R=C(V,M-1);P.add(R)});for(var z in T){var O;E&&(O=Object.getOwnPropertyDescriptor(E,z)),!(O&&O.set==null)&&(P[z]=C(T[z],M-1))}if(Object.getOwnPropertySymbols)for(var $=Object.getOwnPropertySymbols(T),z=0;z<$.length;z++){var G=$[z],X=Object.getOwnPropertyDescriptor(T,G);X&&!X.enumerable&&!_||(P[G]=C(T[G],M-1),X.enumerable||Object.defineProperty(P,G,{enumerable:!1}))}if(_)for(var Y=Object.getOwnPropertyNames(T),z=0;z<Y.length;z++){var U=Y[z],X=Object.getOwnPropertyDescriptor(T,U);X&&X.enumerable||(P[U]=C(T[U],M-1),Object.defineProperty(P,U,{enumerable:!1}))}return P}return C(v,y)}f.clonePrototype=function(w){if(w===null)return null;var y=function(){};return y.prototype=w,new y};function m(v){return Object.prototype.toString.call(v)}f.__objToStr=m;function h(v){return typeof v=="object"&&m(v)==="[object Date]"}f.__isDate=h;function u(v){return typeof v=="object"&&m(v)==="[object Array]"}f.__isArray=u;function p(v){return typeof v=="object"&&m(v)==="[object RegExp]"}f.__isRegExp=p;function x(v){var w="";return v.global&&(w+="g"),v.ignoreCase&&(w+="i"),v.multiline&&(w+="m"),w}return f.__getRegExpFlags=x,f}();typeof s=="object"&&s.exports&&(s.exports=i)},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function P(E,A){var z=[],O=!0,$=!1,G=void 0;try{for(var X=E[Symbol.iterator](),Y;!(O=(Y=X.next()).done)&&(z.push(Y.value),!(A&&z.length===A));O=!0);}catch(U){$=!0,G=U}finally{try{!O&&X.return&&X.return()}finally{if($)throw G}}return z}return function(E,A){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return P(E,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function P(E,A){for(var z=0;z<A.length;z++){var O=A[z];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(E,O.key,O)}}return function(E,A,z){return A&&P(E.prototype,A),z&&P(E,z),E}}(),c=function P(E,A,z){E===null&&(E=Function.prototype);var O=Object.getOwnPropertyDescriptor(E,A);if(O===void 0){var $=Object.getPrototypeOf(E);return $===null?void 0:P($,A,z)}else{if("value"in O)return O.value;var G=O.get;return G===void 0?void 0:G.call(z)}},d=i(0),f=N(d),m=i(8),h=N(m),u=i(4),p=N(u),x=i(16),v=N(x),w=i(13),y=N(w),b=i(25),_=N(b);function N(P){return P&&P.__esModule?P:{default:P}}function k(P,E){if(!(P instanceof E))throw new TypeError("Cannot call a class as a function")}function I(P,E){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:P}function C(P,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);P.prototype=Object.create(E&&E.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(P,E):P.__proto__=E)}function T(P){return P instanceof p.default||P instanceof u.BlockEmbed}var M=function(P){C(E,P);function E(A,z){k(this,E);var O=I(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A));return O.emitter=z.emitter,Array.isArray(z.whitelist)&&(O.whitelist=z.whitelist.reduce(function($,G){return $[G]=!0,$},{})),O.domNode.addEventListener("DOMNodeInserted",function(){}),O.optimize(),O.enable(),O}return o(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(z,O){var $=this.line(z),G=a($,2),X=G[0],Y=G[1],U=this.line(z+O),V=a(U,1),R=V[0];if(c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,z,O),R!=null&&X!==R&&Y>0){if(X instanceof u.BlockEmbed||R instanceof u.BlockEmbed){this.optimize();return}if(X instanceof y.default){var F=X.newlineIndex(X.length(),!0);if(F>-1&&(X=X.split(F+1),X===R)){this.optimize();return}}else if(R instanceof y.default){var q=R.newlineIndex(0);q>-1&&R.split(q+1)}var W=R.children.head instanceof v.default?null:R.children.head;X.moveChildren(R,W),X.remove()}this.optimize()}},{key:"enable",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",z)}},{key:"formatAt",value:function(z,O,$,G){this.whitelist!=null&&!this.whitelist[$]||(c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,z,O,$,G),this.optimize())}},{key:"insertAt",value:function(z,O,$){if(!($!=null&&this.whitelist!=null&&!this.whitelist[O])){if(z>=this.length())if($==null||f.default.query(O,f.default.Scope.BLOCK)==null){var G=f.default.create(this.statics.defaultChild);this.appendChild(G),$==null&&O.endsWith(`
`)&&(O=O.slice(0,-1)),G.insertAt(0,O,$)}else{var X=f.default.create(O,$);this.appendChild(X)}else c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,z,O,$);this.optimize()}}},{key:"insertBefore",value:function(z,O){if(z.statics.scope===f.default.Scope.INLINE_BLOT){var $=f.default.create(this.statics.defaultChild);$.appendChild(z),z=$}c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,z,O)}},{key:"leaf",value:function(z){return this.path(z).pop()||[null,-1]}},{key:"line",value:function(z){return z===this.length()?this.line(z-1):this.descendant(T,z)}},{key:"lines",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,$=function G(X,Y,U){var V=[],R=U;return X.children.forEachAt(Y,U,function(F,q,W){T(F)?V.push(F):F instanceof f.default.Container&&(V=V.concat(G(F,q,R))),R-=W}),V};return $(this,z,O)}},{key:"optimize",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,z,O),z.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,z,O))}},{key:"path",value:function(z){return c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,z).slice(1)}},{key:"update",value:function(z){if(this.batch!==!0){var O=h.default.sources.USER;typeof z=="string"&&(O=z),Array.isArray(z)||(z=this.observer.takeRecords()),z.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,O,z),c(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,z.concat([])),z.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,O,z)}}}]),E}(f.default.Scroll);M.blotName="scroll",M.className="ql-editor",M.tagName="DIV",M.defaultChild="block",M.allowedChildren=[p.default,u.BlockEmbed,_.default],r.default=M},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},o=function(){function B(Z,se){var J=[],ie=!0,le=!1,Q=void 0;try{for(var ue=Z[Symbol.iterator](),_e;!(ie=(_e=ue.next()).done)&&(J.push(_e.value),!(se&&J.length===se));ie=!0);}catch(me){le=!0,Q=me}finally{try{!ie&&ue.return&&ue.return()}finally{if(le)throw Q}}return J}return function(Z,se){if(Array.isArray(Z))return Z;if(Symbol.iterator in Object(Z))return B(Z,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function B(Z,se){for(var J=0;J<se.length;J++){var ie=se[J];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(Z,ie.key,ie)}}return function(Z,se,J){return se&&B(Z.prototype,se),J&&B(Z,J),Z}}(),d=i(21),f=P(d),m=i(11),h=P(m),u=i(3),p=P(u),x=i(2),v=P(x),w=i(20),y=P(w),b=i(0),_=P(b),N=i(5),k=P(N),I=i(10),C=P(I),T=i(9),M=P(T);function P(B){return B&&B.__esModule?B:{default:B}}function E(B,Z,se){return Z in B?Object.defineProperty(B,Z,{value:se,enumerable:!0,configurable:!0,writable:!0}):B[Z]=se,B}function A(B,Z){if(!(B instanceof Z))throw new TypeError("Cannot call a class as a function")}function z(B,Z){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:B}function O(B,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);B.prototype=Object.create(Z&&Z.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(B,Z):B.__proto__=Z)}var $=(0,C.default)("quill:keyboard"),G=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",X=function(B){O(Z,B),c(Z,null,[{key:"match",value:function(J,ie){return ie=K(ie),["altKey","ctrlKey","metaKey","shiftKey"].some(function(le){return!!ie[le]!==J[le]&&ie[le]!==null})?!1:ie.key===(J.which||J.keyCode)}}]);function Z(se,J){A(this,Z);var ie=z(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,se,J));return ie.bindings={},Object.keys(ie.options.bindings).forEach(function(le){le==="list autofill"&&se.scroll.whitelist!=null&&!se.scroll.whitelist.list||ie.options.bindings[le]&&ie.addBinding(ie.options.bindings[le])}),ie.addBinding({key:Z.keys.ENTER,shiftKey:null},F),ie.addBinding({key:Z.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ie.addBinding({key:Z.keys.BACKSPACE},{collapsed:!0},U),ie.addBinding({key:Z.keys.DELETE},{collapsed:!0},V)):(ie.addBinding({key:Z.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},U),ie.addBinding({key:Z.keys.DELETE},{collapsed:!0,suffix:/^.?$/},V)),ie.addBinding({key:Z.keys.BACKSPACE},{collapsed:!1},R),ie.addBinding({key:Z.keys.DELETE},{collapsed:!1},R),ie.addBinding({key:Z.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},U),ie.listen(),ie}return c(Z,[{key:"addBinding",value:function(J){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Q=K(J);if(Q==null||Q.key==null)return $.warn("Attempted to add invalid keyboard binding",Q);typeof ie=="function"&&(ie={handler:ie}),typeof le=="function"&&(le={handler:le}),Q=(0,p.default)(Q,ie,le),this.bindings[Q.key]=this.bindings[Q.key]||[],this.bindings[Q.key].push(Q)}},{key:"listen",value:function(){var J=this;this.quill.root.addEventListener("keydown",function(ie){if(!ie.defaultPrevented){var le=ie.which||ie.keyCode,Q=(J.bindings[le]||[]).filter(function(it){return Z.match(ie,it)});if(Q.length!==0){var ue=J.quill.getSelection();if(!(ue==null||!J.quill.hasFocus())){var _e=J.quill.getLine(ue.index),me=o(_e,2),Se=me[0],xe=me[1],he=J.quill.getLeaf(ue.index),pe=o(he,2),te=pe[0],ae=pe[1],oe=ue.length===0?[te,ae]:J.quill.getLeaf(ue.index+ue.length),be=o(oe,2),je=be[0],we=be[1],re=te instanceof _.default.Text?te.value().slice(0,ae):"",Pe=je instanceof _.default.Text?je.value().slice(we):"",Ae={collapsed:ue.length===0,empty:ue.length===0&&Se.length()<=1,format:J.quill.getFormat(ue),offset:xe,prefix:re,suffix:Pe},lt=Q.some(function(it){if(it.collapsed!=null&&it.collapsed!==Ae.collapsed||it.empty!=null&&it.empty!==Ae.empty||it.offset!=null&&it.offset!==Ae.offset)return!1;if(Array.isArray(it.format)){if(it.format.every(function(Ft){return Ae.format[Ft]==null}))return!1}else if(a(it.format)==="object"&&!Object.keys(it.format).every(function(Ft){return it.format[Ft]===!0?Ae.format[Ft]!=null:it.format[Ft]===!1?Ae.format[Ft]==null:(0,h.default)(it.format[Ft],Ae.format[Ft])}))return!1;return it.prefix!=null&&!it.prefix.test(Ae.prefix)||it.suffix!=null&&!it.suffix.test(Ae.suffix)?!1:it.handler.call(J,ue,Ae)!==!0});lt&&ie.preventDefault()}}}})}}]),Z}(M.default);X.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},X.DEFAULTS={bindings:{bold:W("bold"),italic:W("italic"),underline:W("underline"),indent:{key:X.keys.TAB,format:["blockquote","indent","list"],handler:function(Z,se){if(se.collapsed&&se.offset!==0)return!0;this.quill.format("indent","+1",k.default.sources.USER)}},outdent:{key:X.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Z,se){if(se.collapsed&&se.offset!==0)return!0;this.quill.format("indent","-1",k.default.sources.USER)}},"outdent backspace":{key:X.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Z,se){se.format.indent!=null?this.quill.format("indent","-1",k.default.sources.USER):se.format.list!=null&&this.quill.format("list",!1,k.default.sources.USER)}},"indent code-block":q(!0),"outdent code-block":q(!1),"remove tab":{key:X.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Z){this.quill.deleteText(Z.index-1,1,k.default.sources.USER)}},tab:{key:X.keys.TAB,handler:function(Z){this.quill.history.cutoff();var se=new v.default().retain(Z.index).delete(Z.length).insert("	");this.quill.updateContents(se,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Z.index+1,k.default.sources.SILENT)}},"list empty enter":{key:X.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Z,se){this.quill.format("list",!1,k.default.sources.USER),se.format.indent&&this.quill.format("indent",!1,k.default.sources.USER)}},"checklist enter":{key:X.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Z){var se=this.quill.getLine(Z.index),J=o(se,2),ie=J[0],le=J[1],Q=(0,p.default)({},ie.formats(),{list:"checked"}),ue=new v.default().retain(Z.index).insert(`
`,Q).retain(ie.length()-le-1).retain(1,{list:"unchecked"});this.quill.updateContents(ue,k.default.sources.USER),this.quill.setSelection(Z.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:X.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Z,se){var J=this.quill.getLine(Z.index),ie=o(J,2),le=ie[0],Q=ie[1],ue=new v.default().retain(Z.index).insert(`
`,se.format).retain(le.length()-Q-1).retain(1,{header:null});this.quill.updateContents(ue,k.default.sources.USER),this.quill.setSelection(Z.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Z,se){var J=se.prefix.length,ie=this.quill.getLine(Z.index),le=o(ie,2),Q=le[0],ue=le[1];if(ue>J)return!0;var _e=void 0;switch(se.prefix.trim()){case"[]":case"[ ]":_e="unchecked";break;case"[x]":_e="checked";break;case"-":case"*":_e="bullet";break;default:_e="ordered"}this.quill.insertText(Z.index," ",k.default.sources.USER),this.quill.history.cutoff();var me=new v.default().retain(Z.index-ue).delete(J+1).retain(Q.length()-2-ue).retain(1,{list:_e});this.quill.updateContents(me,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Z.index-J,k.default.sources.SILENT)}},"code exit":{key:X.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Z){var se=this.quill.getLine(Z.index),J=o(se,2),ie=J[0],le=J[1],Q=new v.default().retain(Z.index+ie.length()-le-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Q,k.default.sources.USER)}},"embed left":Y(X.keys.LEFT,!1),"embed left shift":Y(X.keys.LEFT,!0),"embed right":Y(X.keys.RIGHT,!1),"embed right shift":Y(X.keys.RIGHT,!0)}};function Y(B,Z){var se,J=B===X.keys.LEFT?"prefix":"suffix";return se={key:B,shiftKey:Z,altKey:null},E(se,J,/^$/),E(se,"handler",function(le){var Q=le.index;B===X.keys.RIGHT&&(Q+=le.length+1);var ue=this.quill.getLeaf(Q),_e=o(ue,1),me=_e[0];return me instanceof _.default.Embed?(B===X.keys.LEFT?Z?this.quill.setSelection(le.index-1,le.length+1,k.default.sources.USER):this.quill.setSelection(le.index-1,k.default.sources.USER):Z?this.quill.setSelection(le.index,le.length+1,k.default.sources.USER):this.quill.setSelection(le.index+le.length+1,k.default.sources.USER),!1):!0}),se}function U(B,Z){if(!(B.index===0||this.quill.getLength()<=1)){var se=this.quill.getLine(B.index),J=o(se,1),ie=J[0],le={};if(Z.offset===0){var Q=this.quill.getLine(B.index-1),ue=o(Q,1),_e=ue[0];if(_e!=null&&_e.length()>1){var me=ie.formats(),Se=this.quill.getFormat(B.index-1,1);le=y.default.attributes.diff(me,Se)||{}}}var xe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Z.prefix)?2:1;this.quill.deleteText(B.index-xe,xe,k.default.sources.USER),Object.keys(le).length>0&&this.quill.formatLine(B.index-xe,xe,le,k.default.sources.USER),this.quill.focus()}}function V(B,Z){var se=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Z.suffix)?2:1;if(!(B.index>=this.quill.getLength()-se)){var J={},ie=0,le=this.quill.getLine(B.index),Q=o(le,1),ue=Q[0];if(Z.offset>=ue.length()-1){var _e=this.quill.getLine(B.index+1),me=o(_e,1),Se=me[0];if(Se){var xe=ue.formats(),he=this.quill.getFormat(B.index,1);J=y.default.attributes.diff(xe,he)||{},ie=Se.length()}}this.quill.deleteText(B.index,se,k.default.sources.USER),Object.keys(J).length>0&&this.quill.formatLine(B.index+ie-1,se,J,k.default.sources.USER)}}function R(B){var Z=this.quill.getLines(B),se={};if(Z.length>1){var J=Z[0].formats(),ie=Z[Z.length-1].formats();se=y.default.attributes.diff(ie,J)||{}}this.quill.deleteText(B,k.default.sources.USER),Object.keys(se).length>0&&this.quill.formatLine(B.index,1,se,k.default.sources.USER),this.quill.setSelection(B.index,k.default.sources.SILENT),this.quill.focus()}function F(B,Z){var se=this;B.length>0&&this.quill.scroll.deleteAt(B.index,B.length);var J=Object.keys(Z.format).reduce(function(ie,le){return _.default.query(le,_.default.Scope.BLOCK)&&!Array.isArray(Z.format[le])&&(ie[le]=Z.format[le]),ie},{});this.quill.insertText(B.index,`
`,J,k.default.sources.USER),this.quill.setSelection(B.index+1,k.default.sources.SILENT),this.quill.focus(),Object.keys(Z.format).forEach(function(ie){J[ie]==null&&(Array.isArray(Z.format[ie])||ie!=="link"&&se.quill.format(ie,Z.format[ie],k.default.sources.USER))})}function q(B){return{key:X.keys.TAB,shiftKey:!B,format:{"code-block":!0},handler:function(se){var J=_.default.query("code-block"),ie=se.index,le=se.length,Q=this.quill.scroll.descendant(J,ie),ue=o(Q,2),_e=ue[0],me=ue[1];if(_e!=null){var Se=this.quill.getIndex(_e),xe=_e.newlineIndex(me,!0)+1,he=_e.newlineIndex(Se+me+le),pe=_e.domNode.textContent.slice(xe,he).split(`
`);me=0,pe.forEach(function(te,ae){B?(_e.insertAt(xe+me,J.TAB),me+=J.TAB.length,ae===0?ie+=J.TAB.length:le+=J.TAB.length):te.startsWith(J.TAB)&&(_e.deleteAt(xe+me,J.TAB.length),me-=J.TAB.length,ae===0?ie-=J.TAB.length:le-=J.TAB.length),me+=te.length+1}),this.quill.update(k.default.sources.USER),this.quill.setSelection(ie,le,k.default.sources.SILENT)}}}}function W(B){return{key:B[0].toUpperCase(),shortKey:!0,handler:function(se,J){this.quill.format(B,!J.format[B],k.default.sources.USER)}}}function K(B){if(typeof B=="string"||typeof B=="number")return K({key:B});if((typeof B>"u"?"undefined":a(B))==="object"&&(B=(0,f.default)(B,!1)),typeof B.key=="string")if(X.keys[B.key.toUpperCase()]!=null)B.key=X.keys[B.key.toUpperCase()];else if(B.key.length===1)B.key=B.key.toUpperCase().charCodeAt(0);else return null;return B.shortKey&&(B[G]=B.shortKey,delete B.shortKey),B}r.default=X,r.SHORTKEY=G},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function y(b,_){var N=[],k=!0,I=!1,C=void 0;try{for(var T=b[Symbol.iterator](),M;!(k=(M=T.next()).done)&&(N.push(M.value),!(_&&N.length===_));k=!0);}catch(P){I=!0,C=P}finally{try{!k&&T.return&&T.return()}finally{if(I)throw C}}return N}return function(b,_){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return y(b,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function y(b,_,N){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,_);if(k===void 0){var I=Object.getPrototypeOf(b);return I===null?void 0:y(I,_,N)}else{if("value"in k)return k.value;var C=k.get;return C===void 0?void 0:C.call(N)}},c=function(){function y(b,_){for(var N=0;N<_.length;N++){var k=_[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,_,N){return _&&y(b.prototype,_),N&&y(b,N),b}}(),d=i(0),f=u(d),m=i(7),h=u(m);function u(y){return y&&y.__esModule?y:{default:y}}function p(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function x(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function v(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var w=function(y){v(b,y),c(b,null,[{key:"value",value:function(){}}]);function b(_,N){p(this,b);var k=x(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,_));return k.selection=N,k.textNode=document.createTextNode(b.CONTENTS),k.domNode.appendChild(k.textNode),k._length=0,k}return c(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,k){if(this._length!==0)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,N,k);for(var I=this,C=0;I!=null&&I.statics.scope!==f.default.Scope.BLOCK_BLOT;)C+=I.offset(I.parent),I=I.parent;I!=null&&(this._length=b.CONTENTS.length,I.optimize(),I.formatAt(C,b.CONTENTS.length,N,k),this._length=0)}},{key:"index",value:function(N,k){return N===this.textNode?0:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,N,k)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,k=this.selection.getNativeRange(),I=void 0,C=void 0,T=void 0;if(k!=null&&k.start.node===N&&k.end.node===N){var M=[N,k.start.offset,k.end.offset];I=M[0],C=M[1],T=M[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var P=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof h.default?(I=this.next.domNode,this.next.insertAt(0,P),this.textNode.data=b.CONTENTS):(this.textNode.data=P,this.parent.insertBefore(f.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),C!=null){var E=[C,T].map(function(z){return Math.max(0,Math.min(I.data.length,z-1))}),A=a(E,2);return C=A[0],T=A[1],{startNode:I,startOffset:C,endNode:I,endOffset:T}}}}},{key:"update",value:function(N,k){var I=this;if(N.some(function(T){return T.type==="characterData"&&T.target===I.textNode})){var C=this.restore();C&&(k.range=C)}}},{key:"value",value:function(){return""}}]),b}(f.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",r.default=w},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=f(a),c=i(4),d=f(c);function f(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function h(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function u(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){u(v,x);function v(){return m(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(o.default.Container);p.allowedChildren=[d.default,c.BlockEmbed,p],r.default=p},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var a=function(){function w(y,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,b,_){return b&&w(y.prototype,b),_&&w(y,_),y}}(),o=function w(y,b,_){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,b);if(N===void 0){var k=Object.getPrototypeOf(y);return k===null?void 0:w(k,b,_)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(_)}},c=i(0),d=f(c);function f(w){return w&&w.__esModule?w:{default:w}}function m(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function h(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function u(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var p=function(w){u(y,w);function y(){return m(this,y),h(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"value",value:function(_){var N=o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,_);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(k){return("00"+parseInt(k).toString(16)).slice(-2)}).join("")):N}}]),y}(d.default.Attributor.Style),x=new d.default.Attributor.Class("color","ql-color",{scope:d.default.Scope.INLINE}),v=new p("color","color",{scope:d.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=x,r.ColorStyle=v},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var a=function(){function v(w,y){for(var b=0;b<y.length;b++){var _=y[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}return function(w,y,b){return y&&v(w.prototype,y),b&&v(w,b),w}}(),o=function v(w,y,b){w===null&&(w=Function.prototype);var _=Object.getOwnPropertyDescriptor(w,y);if(_===void 0){var N=Object.getPrototypeOf(w);return N===null?void 0:v(N,y,b)}else{if("value"in _)return _.value;var k=_.get;return k===void 0?void 0:k.call(b)}},c=i(6),d=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function h(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function u(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var p=function(v){u(w,v);function w(){return m(this,w),h(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(b,_){if(b!==this.statics.blotName||!_)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,b,_);_=this.constructor.sanitize(_),this.domNode.setAttribute("href",_)}}],[{key:"create",value:function(b){var _=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,b);return b=this.sanitize(b),_.setAttribute("href",b),_.setAttribute("rel","noopener noreferrer"),_.setAttribute("target","_blank"),_}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return x(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),w}(d.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function x(v,w){var y=document.createElement("a");y.href=v;var b=y.href.slice(0,y.href.indexOf(":"));return w.indexOf(b)>-1}r.default=p,r.sanitize=x},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},o=function(){function w(y,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,b,_){return b&&w(y.prototype,b),_&&w(y,_),y}}(),c=i(23),d=h(c),f=i(107),m=h(f);function h(w){return w&&w.__esModule?w:{default:w}}function u(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}var p=0;function x(w,y){w.setAttribute(y,w.getAttribute(y)!=="true")}var v=function(){function w(y){var b=this;u(this,w),this.select=y,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(_){switch(_.keyCode){case d.default.keys.ENTER:b.togglePicker();break;case d.default.keys.ESCAPE:b.escape(),_.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),x(this.label,"aria-expanded"),x(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var _=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),b.hasAttribute("value")&&N.setAttribute("data-value",b.getAttribute("value")),b.textContent&&N.setAttribute("data-label",b.textContent),N.addEventListener("click",function(){_.selectItem(N,!0)}),N.addEventListener("keydown",function(k){switch(k.keyCode){case d.default.keys.ENTER:_.selectItem(N,!0),k.preventDefault();break;case d.default.keys.ESCAPE:_.escape(),k.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=m.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,_=document.createElement("span");_.classList.add("ql-picker-options"),_.setAttribute("aria-hidden","true"),_.tabIndex="-1",_.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",_.id),this.options=_,[].slice.call(this.select.options).forEach(function(N){var k=b.buildItem(N);_.appendChild(k),N.selected===!0&&b.selectItem(k)}),this.container.appendChild(_)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(_){b.container.setAttribute(_.name,_.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(b!==N&&(N!=null&&N.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),_))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var k=document.createEvent("Event");k.initEvent("change",!0,!0),this.select.dispatchEvent(k)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var _=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(_)}else this.selectItem(null);var N=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),w}();r.default=v},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=$(a),c=i(5),d=$(c),f=i(4),m=$(f),h=i(16),u=$(h),p=i(25),x=$(p),v=i(24),w=$(v),y=i(35),b=$(y),_=i(6),N=$(_),k=i(22),I=$(k),C=i(7),T=$(C),M=i(55),P=$(M),E=i(42),A=$(E),z=i(23),O=$(z);function $(G){return G&&G.__esModule?G:{default:G}}d.default.register({"blots/block":m.default,"blots/block/embed":f.BlockEmbed,"blots/break":u.default,"blots/container":x.default,"blots/cursor":w.default,"blots/embed":b.default,"blots/inline":N.default,"blots/scroll":I.default,"blots/text":T.default,"modules/clipboard":P.default,"modules/history":A.default,"modules/keyboard":O.default}),o.default.register(m.default,u.default,w.default,N.default,I.default,T.default),r.default=d.default},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=function(){function c(d){this.domNode=d,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(d){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var f;return Array.isArray(this.tagName)?(typeof d=="string"&&(d=d.toUpperCase(),parseInt(d).toString()===d&&(d=parseInt(d))),typeof d=="number"?f=document.createElement(this.tagName[d-1]):this.tagName.indexOf(d)>-1?f=document.createElement(d):f=document.createElement(this.tagName[0])):f=document.createElement(this.tagName),this.className&&f.classList.add(this.className),f},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var d=this.domNode.cloneNode(!1);return a.create(d)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},c.prototype.deleteAt=function(d,f){var m=this.isolate(d,f);m.remove()},c.prototype.formatAt=function(d,f,m,h){var u=this.isolate(d,f);if(a.query(m,a.Scope.BLOT)!=null&&h)u.wrap(m,h);else if(a.query(m,a.Scope.ATTRIBUTE)!=null){var p=a.create(this.statics.scope);u.wrap(p),p.format(m,h)}},c.prototype.insertAt=function(d,f,m){var h=m==null?a.create("text",f):a.create(f,m),u=this.split(d);this.parent.insertBefore(h,u)},c.prototype.insertInto=function(d,f){f===void 0&&(f=null),this.parent!=null&&this.parent.children.remove(this);var m=null;d.children.insertBefore(this,f),f!=null&&(m=f.domNode),(this.domNode.parentNode!=d.domNode||this.domNode.nextSibling!=m)&&d.domNode.insertBefore(this.domNode,m),this.parent=d,this.attach()},c.prototype.isolate=function(d,f){var m=this.split(d);return m.split(f),m},c.prototype.length=function(){return 1},c.prototype.offset=function(d){return d===void 0&&(d=this.parent),this.parent==null||this==d?0:this.parent.children.offset(this)+this.parent.offset(d)},c.prototype.optimize=function(d){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(d){d.parent!=null&&(d.parent.insertBefore(this,d.next),d.remove())},c.prototype.replaceWith=function(d,f){var m=typeof d=="string"?a.create(d,f):d;return m.replace(this),m},c.prototype.split=function(d,f){return d===0?this:this.next},c.prototype.update=function(d,f){},c.prototype.wrap=function(d,f){var m=typeof d=="string"?a.create(d,f):d;return this.parent!=null&&this.parent.insertBefore(m,this.next),m.appendChild(this),m},c.blotName="abstract",c}();r.default=o},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(12),o=i(32),c=i(33),d=i(1),f=function(){function m(h){this.attributes={},this.domNode=h,this.build()}return m.prototype.attribute=function(h,u){u?h.add(this.domNode,u)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},m.prototype.build=function(){var h=this;this.attributes={};var u=a.default.keys(this.domNode),p=o.default.keys(this.domNode),x=c.default.keys(this.domNode);u.concat(p).concat(x).forEach(function(v){var w=d.query(v,d.Scope.ATTRIBUTE);w instanceof a.default&&(h.attributes[w.attrName]=w)})},m.prototype.copy=function(h){var u=this;Object.keys(this.attributes).forEach(function(p){var x=u.attributes[p].value(u.domNode);h.format(p,x)})},m.prototype.move=function(h){var u=this;this.copy(h),Object.keys(this.attributes).forEach(function(p){u.attributes[p].remove(u.domNode)}),this.attributes={}},m.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(u,p){return u[p]=h.attributes[p].value(h.domNode),u},{})},m}();r.default=f},function(s,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var u in h)h.hasOwnProperty(u)&&(m[u]=h[u])};return function(m,h){f(m,h);function u(){this.constructor=m}m.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function c(f,m){var h=f.getAttribute("class")||"";return h.split(/\s+/).filter(function(u){return u.indexOf(m+"-")===0})}var d=function(f){a(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},m.prototype.add=function(h,u){return this.canAdd(h,u)?(this.remove(h),h.classList.add(this.keyName+"-"+u),!0):!1},m.prototype.remove=function(h){var u=c(h,this.keyName);u.forEach(function(p){h.classList.remove(p)}),h.classList.length===0&&h.removeAttribute("class")},m.prototype.value=function(h){var u=c(h,this.keyName)[0]||"",p=u.slice(this.keyName.length+1);return this.canAdd(h,p)?p:""},m}(o.default);r.default=d},function(s,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var u in h)h.hasOwnProperty(u)&&(m[u]=h[u])};return function(m,h){f(m,h);function u(){this.constructor=m}m.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function c(f){var m=f.split("-"),h=m.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return m[0]+h}var d=function(f){a(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(u){var p=u.split(":");return p[0].trim()})},m.prototype.add=function(h,u){return this.canAdd(h,u)?(h.style[c(this.keyName)]=u,!0):!1},m.prototype.remove=function(h){h.style[c(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},m.prototype.value=function(h){var u=h.style[c(this.keyName)];return this.canAdd(h,u)?u:""},m}(o.default);r.default=d},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function d(f,m){for(var h=0;h<m.length;h++){var u=m[h];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}return function(f,m,h){return m&&d(f.prototype,m),h&&d(f,h),f}}();function o(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}var c=function(){function d(f,m){o(this,d),this.quill=f,this.options=m,this.modules={}}return a(d,[{key:"init",value:function(){var m=this;Object.keys(this.options.modules).forEach(function(h){m.modules[h]==null&&m.addModule(h)})}},{key:"addModule",value:function(m){var h=this.quill.constructor.import("modules/"+m);return this.modules[m]=new h(this.quill,this.options.modules[m]||{}),this.modules[m]}}]),d}();c.DEFAULTS={modules:{}},c.themes={default:c},r.default=c},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function y(b,_){for(var N=0;N<_.length;N++){var k=_[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,_,N){return _&&y(b.prototype,_),N&&y(b,N),b}}(),o=function y(b,_,N){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,_);if(k===void 0){var I=Object.getPrototypeOf(b);return I===null?void 0:y(I,_,N)}else{if("value"in k)return k.value;var C=k.get;return C===void 0?void 0:C.call(N)}},c=i(0),d=h(c),f=i(7),m=h(f);function h(y){return y&&y.__esModule?y:{default:y}}function u(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function p(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function x(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var v="\uFEFF",w=function(y){x(b,y);function b(_){u(this,b);var N=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,_));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(k){N.contentNode.appendChild(k)}),N.leftGuard=document.createTextNode(v),N.rightGuard=document.createTextNode(v),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return a(b,[{key:"index",value:function(N,k){return N===this.leftGuard?0:N===this.rightGuard?1:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,N,k)}},{key:"restore",value:function(N){var k=void 0,I=void 0,C=N.data.split(v).join("");if(N===this.leftGuard)if(this.prev instanceof m.default){var T=this.prev.length();this.prev.insertAt(T,C),k={startNode:this.prev.domNode,startOffset:T+C.length}}else I=document.createTextNode(C),this.parent.insertBefore(d.default.create(I),this),k={startNode:I,startOffset:C.length};else N===this.rightGuard&&(this.next instanceof m.default?(this.next.insertAt(0,C),k={startNode:this.next.domNode,startOffset:C.length}):(I=document.createTextNode(C),this.parent.insertBefore(d.default.create(I),this.next),k={startNode:I,startOffset:C.length}));return N.data=v,k}},{key:"update",value:function(N,k){var I=this;N.forEach(function(C){if(C.type==="characterData"&&(C.target===I.leftGuard||C.target===I.rightGuard)){var T=I.restore(C.target);T&&(k.range=T)}})}}]),b}(d.default.Embed);r.default=w},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var a=i(0),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}var d={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},f=new o.default.Attributor.Attribute("align","align",d),m=new o.default.Attributor.Class("align","ql-align",d),h=new o.default.Attributor.Style("align","text-align",d);r.AlignAttribute=f,r.AlignClass=m,r.AlignStyle=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var a=i(0),o=d(a),c=i(26);function d(h){return h&&h.__esModule?h:{default:h}}var f=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),m=new c.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=f,r.BackgroundStyle=m},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var a=i(0),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}var d={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},f=new o.default.Attributor.Attribute("direction","dir",d),m=new o.default.Attributor.Class("direction","ql-direction",d),h=new o.default.Attributor.Style("direction","direction",d);r.DirectionAttribute=f,r.DirectionClass=m,r.DirectionStyle=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var a=function(){function y(b,_){for(var N=0;N<_.length;N++){var k=_[N];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return function(b,_,N){return _&&y(b.prototype,_),N&&y(b,N),b}}(),o=function y(b,_,N){b===null&&(b=Function.prototype);var k=Object.getOwnPropertyDescriptor(b,_);if(k===void 0){var I=Object.getPrototypeOf(b);return I===null?void 0:y(I,_,N)}else{if("value"in k)return k.value;var C=k.get;return C===void 0?void 0:C.call(N)}},c=i(0),d=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function m(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function u(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var p={scope:d.default.Scope.INLINE,whitelist:["serif","monospace"]},x=new d.default.Attributor.Class("font","ql-font",p),v=function(y){u(b,y);function b(){return m(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"value",value:function(N){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),b}(d.default.Attributor.Style),w=new v("font","font-family",p);r.FontStyle=w,r.FontClass=x},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var a=i(0),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}var d=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),f=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=d,r.SizeStyle=f},function(s,r,i){s.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var a=function(){function _(N,k){for(var I=0;I<k.length;I++){var C=k[I];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(N,C.key,C)}}return function(N,k,I){return k&&_(N.prototype,k),I&&_(N,I),N}}(),o=i(0),c=u(o),d=i(5),f=u(d),m=i(9),h=u(m);function u(_){return _&&_.__esModule?_:{default:_}}function p(_,N){if(!(_ instanceof N))throw new TypeError("Cannot call a class as a function")}function x(_,N){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:_}function v(_,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);_.prototype=Object.create(N&&N.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(_,N):_.__proto__=N)}var w=function(_){v(N,_);function N(k,I){p(this,N);var C=x(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,k,I));return C.lastRecorded=0,C.ignoreChange=!1,C.clear(),C.quill.on(f.default.events.EDITOR_CHANGE,function(T,M,P,E){T!==f.default.events.TEXT_CHANGE||C.ignoreChange||(!C.options.userOnly||E===f.default.sources.USER?C.record(M,P):C.transform(M))}),C.quill.keyboard.addBinding({key:"Z",shortKey:!0},C.undo.bind(C)),C.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},C.redo.bind(C)),/Win/i.test(navigator.platform)&&C.quill.keyboard.addBinding({key:"Y",shortKey:!0},C.redo.bind(C)),C}return a(N,[{key:"change",value:function(I,C){if(this.stack[I].length!==0){var T=this.stack[I].pop();this.stack[C].push(T),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(T[I],f.default.sources.USER),this.ignoreChange=!1;var M=b(T[I]);this.quill.setSelection(M)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(I,C){if(I.ops.length!==0){this.stack.redo=[];var T=this.quill.getContents().diff(C),M=Date.now();if(this.lastRecorded+this.options.delay>M&&this.stack.undo.length>0){var P=this.stack.undo.pop();T=T.compose(P.undo),I=P.redo.compose(I)}else this.lastRecorded=M;this.stack.undo.push({redo:I,undo:T}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(I){this.stack.undo.forEach(function(C){C.undo=I.transform(C.undo,!0),C.redo=I.transform(C.redo,!0)}),this.stack.redo.forEach(function(C){C.undo=I.transform(C.undo,!0),C.redo=I.transform(C.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N}(h.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function y(_){var N=_.ops[_.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(k){return c.default.query(k,c.default.Scope.BLOCK)!=null}):!1}function b(_){var N=_.reduce(function(I,C){return I+=C.delete||0,I},0),k=_.length()-N;return y(_)&&(k-=1),k}r.default=w,r.getLastChangeIndex=b},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var a=function(){function F(q,W){for(var K=0;K<W.length;K++){var B=W[K];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(q,B.key,B)}}return function(q,W,K){return W&&F(q.prototype,W),K&&F(q,K),q}}(),o=function F(q,W,K){q===null&&(q=Function.prototype);var B=Object.getOwnPropertyDescriptor(q,W);if(B===void 0){var Z=Object.getPrototypeOf(q);return Z===null?void 0:F(Z,W,K)}else{if("value"in B)return B.value;var se=B.get;return se===void 0?void 0:se.call(K)}},c=i(3),d=M(c),f=i(2),m=M(f),h=i(8),u=M(h),p=i(23),x=M(p),v=i(34),w=M(v),y=i(59),b=M(y),_=i(60),N=M(_),k=i(28),I=M(k),C=i(61),T=M(C);function M(F){return F&&F.__esModule?F:{default:F}}function P(F,q){if(!(F instanceof q))throw new TypeError("Cannot call a class as a function")}function E(F,q){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:F}function A(F,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);F.prototype=Object.create(q&&q.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(F,q):F.__proto__=q)}var z=[!1,"center","right","justify"],O=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],$=[!1,"serif","monospace"],G=["1","2","3",!1],X=["small",!1,"large","huge"],Y=function(F){A(q,F);function q(W,K){P(this,q);var B=E(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,W,K)),Z=function se(J){if(!document.body.contains(W.root))return document.body.removeEventListener("click",se);B.tooltip!=null&&!B.tooltip.root.contains(J.target)&&document.activeElement!==B.tooltip.textbox&&!B.quill.hasFocus()&&B.tooltip.hide(),B.pickers!=null&&B.pickers.forEach(function(ie){ie.container.contains(J.target)||ie.close()})};return W.emitter.listenDOM("click",document.body,Z),B}return a(q,[{key:"addModule",value:function(K){var B=o(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"addModule",this).call(this,K);return K==="toolbar"&&this.extendToolbar(B),B}},{key:"buildButtons",value:function(K,B){K.forEach(function(Z){var se=Z.getAttribute("class")||"";se.split(/\s+/).forEach(function(J){if(J.startsWith("ql-")&&(J=J.slice(3),B[J]!=null))if(J==="direction")Z.innerHTML=B[J][""]+B[J].rtl;else if(typeof B[J]=="string")Z.innerHTML=B[J];else{var ie=Z.value||"";ie!=null&&B[J][ie]&&(Z.innerHTML=B[J][ie])}})})}},{key:"buildPickers",value:function(K,B){var Z=this;this.pickers=K.map(function(J){if(J.classList.contains("ql-align"))return J.querySelector("option")==null&&R(J,z),new N.default(J,B.align);if(J.classList.contains("ql-background")||J.classList.contains("ql-color")){var ie=J.classList.contains("ql-background")?"background":"color";return J.querySelector("option")==null&&R(J,O,ie==="background"?"#ffffff":"#000000"),new b.default(J,B[ie])}else return J.querySelector("option")==null&&(J.classList.contains("ql-font")?R(J,$):J.classList.contains("ql-header")?R(J,G):J.classList.contains("ql-size")&&R(J,X)),new I.default(J)});var se=function(){Z.pickers.forEach(function(ie){ie.update()})};this.quill.on(u.default.events.EDITOR_CHANGE,se)}}]),q}(w.default);Y.DEFAULTS=(0,d.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var q=this,W=this.container.querySelector("input.ql-image[type=file]");W==null&&(W=document.createElement("input"),W.setAttribute("type","file"),W.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),W.classList.add("ql-image"),W.addEventListener("change",function(){if(W.files!=null&&W.files[0]!=null){var K=new FileReader;K.onload=function(B){var Z=q.quill.getSelection(!0);q.quill.updateContents(new m.default().retain(Z.index).delete(Z.length).insert({image:B.target.result}),u.default.sources.USER),q.quill.setSelection(Z.index+1,u.default.sources.SILENT),W.value=""},K.readAsDataURL(W.files[0])}}),this.container.appendChild(W)),W.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var U=function(F){A(q,F);function q(W,K){P(this,q);var B=E(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,W,K));return B.textbox=B.root.querySelector('input[type="text"]'),B.listen(),B}return a(q,[{key:"listen",value:function(){var K=this;this.textbox.addEventListener("keydown",function(B){x.default.match(B,"enter")?(K.save(),B.preventDefault()):x.default.match(B,"escape")&&(K.cancel(),B.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),B!=null?this.textbox.value=B:K!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+K)||""),this.root.setAttribute("data-mode",K)}},{key:"restoreFocus",value:function(){var K=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=K}},{key:"save",value:function(){var K=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var B=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",K,u.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",K,u.default.sources.USER)),this.quill.root.scrollTop=B;break}case"video":K=V(K);case"formula":{if(!K)break;var Z=this.quill.getSelection(!0);if(Z!=null){var se=Z.index+Z.length;this.quill.insertEmbed(se,this.root.getAttribute("data-mode"),K,u.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(se+1," ",u.default.sources.USER),this.quill.setSelection(se+2,u.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),q}(T.default);function V(F){var q=F.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||F.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return q?(q[1]||"https")+"://www.youtube.com/embed/"+q[2]+"?showinfo=0":(q=F.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(q[1]||"https")+"://player.vimeo.com/video/"+q[2]+"/":F}function R(F,q){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;q.forEach(function(K){var B=document.createElement("option");K===W?B.setAttribute("selected","selected"):B.setAttribute("value",K),F.appendChild(B)})}r.BaseTooltip=U,r.default=Y},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},o.prototype.contains=function(c){for(var d,f=this.iterator();d=f();)if(d===c)return!0;return!1},o.prototype.insertBefore=function(c,d){c&&(c.next=d,d!=null?(c.prev=d.prev,d.prev!=null&&(d.prev.next=c),d.prev=c,d===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},o.prototype.offset=function(c){for(var d=0,f=this.head;f!=null;){if(f===c)return d;d+=f.length(),f=f.next}return-1},o.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},o.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var d=c;return c!=null&&(c=c.next),d}},o.prototype.find=function(c,d){d===void 0&&(d=!1);for(var f,m=this.iterator();f=m();){var h=f.length();if(c<h||d&&c===h&&(f.next==null||f.next.length()!==0))return[f,c];c-=h}return[null,0]},o.prototype.forEach=function(c){for(var d,f=this.iterator();d=f();)c(d)},o.prototype.forEachAt=function(c,d,f){if(!(d<=0))for(var m=this.find(c),h=m[0],u=m[1],p,x=c-u,v=this.iterator(h);(p=v())&&x<c+d;){var w=p.length();c>x?f(p,c-x,Math.min(d,x+w-c)):f(p,0,Math.min(w,c+d-x)),x+=w}},o.prototype.map=function(c){return this.reduce(function(d,f){return d.push(c(f)),d},[])},o.prototype.reduce=function(c,d){for(var f,m=this.iterator();f=m();)d=c(d,f);return d},o}();r.default=a},function(s,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var x in p)p.hasOwnProperty(x)&&(u[x]=p[x])};return function(u,p){h(u,p);function x(){this.constructor=u}u.prototype=p===null?Object.create(p):(x.prototype=p.prototype,new x)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),c=i(1),d={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},f=100,m=function(h){a(u,h);function u(p){var x=h.call(this,p)||this;return x.scroll=x,x.observer=new MutationObserver(function(v){x.update(v)}),x.observer.observe(x.domNode,d),x.attach(),x}return u.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},u.prototype.deleteAt=function(p,x){this.update(),p===0&&x===this.length()?this.children.forEach(function(v){v.remove()}):h.prototype.deleteAt.call(this,p,x)},u.prototype.formatAt=function(p,x,v,w){this.update(),h.prototype.formatAt.call(this,p,x,v,w)},u.prototype.insertAt=function(p,x,v){this.update(),h.prototype.insertAt.call(this,p,x,v)},u.prototype.optimize=function(p,x){var v=this;p===void 0&&(p=[]),x===void 0&&(x={}),h.prototype.optimize.call(this,x);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)p.push(w.pop());for(var y=function(k,I){I===void 0&&(I=!0),!(k==null||k===v)&&k.domNode.parentNode!=null&&(k.domNode[c.DATA_KEY].mutations==null&&(k.domNode[c.DATA_KEY].mutations=[]),I&&y(k.parent))},b=function(k){k.domNode[c.DATA_KEY]==null||k.domNode[c.DATA_KEY].mutations==null||(k instanceof o.default&&k.children.forEach(b),k.optimize(x))},_=p,N=0;_.length>0;N+=1){if(N>=f)throw new Error("[Parchment] Maximum optimize iterations reached");for(_.forEach(function(k){var I=c.find(k.target,!0);I!=null&&(I.domNode===k.target&&(k.type==="childList"?(y(c.find(k.previousSibling,!1)),[].forEach.call(k.addedNodes,function(C){var T=c.find(C,!1);y(T,!1),T instanceof o.default&&T.children.forEach(function(M){y(M,!1)})})):k.type==="attributes"&&y(I.prev)),y(I))}),this.children.forEach(b),_=[].slice.call(this.observer.takeRecords()),w=_.slice();w.length>0;)p.push(w.pop())}},u.prototype.update=function(p,x){var v=this;x===void 0&&(x={}),p=p||this.observer.takeRecords(),p.map(function(w){var y=c.find(w.target,!0);return y==null?null:y.domNode[c.DATA_KEY].mutations==null?(y.domNode[c.DATA_KEY].mutations=[w],y):(y.domNode[c.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===v||w.domNode[c.DATA_KEY]==null||w.update(w.domNode[c.DATA_KEY].mutations||[],x)}),this.domNode[c.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,x),this.optimize(p,x)},u.blotName="scroll",u.defaultChild="block",u.scope=c.Scope.BLOCK_BLOT,u.tagName="DIV",u}(o.default);r.default=m},function(s,r,i){var a=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var p in u)u.hasOwnProperty(p)&&(h[p]=u[p])};return function(h,u){m(h,u);function p(){this.constructor=h}h.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),c=i(1);function d(m,h){if(Object.keys(m).length!==Object.keys(h).length)return!1;for(var u in m)if(m[u]!==h[u])return!1;return!0}var f=function(m){a(h,m);function h(){return m!==null&&m.apply(this,arguments)||this}return h.formats=function(u){if(u.tagName!==h.tagName)return m.formats.call(this,u)},h.prototype.format=function(u,p){var x=this;u===this.statics.blotName&&!p?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(h.blotName,!0)),x.attributes.copy(v)}),this.unwrap()):m.prototype.format.call(this,u,p)},h.prototype.formatAt=function(u,p,x,v){if(this.formats()[x]!=null||c.query(x,c.Scope.ATTRIBUTE)){var w=this.isolate(u,p);w.format(x,v)}else m.prototype.formatAt.call(this,u,p,x,v)},h.prototype.optimize=function(u){m.prototype.optimize.call(this,u);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var x=this.next;x instanceof h&&x.prev===this&&d(p,x.formats())&&(x.moveChildren(this),x.remove())},h.blotName="inline",h.scope=c.Scope.INLINE_BLOT,h.tagName="SPAN",h}(o.default);r.default=f},function(s,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var u in h)h.hasOwnProperty(u)&&(m[u]=h[u])};return function(m,h){f(m,h);function u(){this.constructor=m}m.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),c=i(1),d=function(f){a(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.formats=function(h){var u=c.query(m.blotName).tagName;if(h.tagName!==u)return f.formats.call(this,h)},m.prototype.format=function(h,u){c.query(h,c.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!u?this.replaceWith(m.blotName):f.prototype.format.call(this,h,u))},m.prototype.formatAt=function(h,u,p,x){c.query(p,c.Scope.BLOCK)!=null?this.format(p,x):f.prototype.formatAt.call(this,h,u,p,x)},m.prototype.insertAt=function(h,u,p){if(p==null||c.query(u,c.Scope.INLINE)!=null)f.prototype.insertAt.call(this,h,u,p);else{var x=this.split(h),v=c.create(u,p);x.parent.insertBefore(v,x)}},m.prototype.update=function(h,u){navigator.userAgent.match(/Trident/)?this.build():f.prototype.update.call(this,h,u)},m.blotName="block",m.scope=c.Scope.BLOCK_BLOT,m.tagName="P",m}(o.default);r.default=d},function(s,r,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var h in m)m.hasOwnProperty(h)&&(f[h]=m[h])};return function(f,m){d(f,m);function h(){this.constructor=f}f.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),c=function(d){a(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.formats=function(m){},f.prototype.format=function(m,h){d.prototype.formatAt.call(this,0,this.length(),m,h)},f.prototype.formatAt=function(m,h,u,p){m===0&&h===this.length()?this.format(u,p):d.prototype.formatAt.call(this,m,h,u,p)},f.prototype.formats=function(){return this.statics.formats(this.domNode)},f}(o.default);r.default=c},function(s,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var u in h)h.hasOwnProperty(u)&&(m[u]=h[u])};return function(m,h){f(m,h);function u(){this.constructor=m}m.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),c=i(1),d=function(f){a(m,f);function m(h){var u=f.call(this,h)||this;return u.text=u.statics.value(u.domNode),u}return m.create=function(h){return document.createTextNode(h)},m.value=function(h){var u=h.data;return u.normalize&&(u=u.normalize()),u},m.prototype.deleteAt=function(h,u){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+u)},m.prototype.index=function(h,u){return this.domNode===h?u:-1},m.prototype.insertAt=function(h,u,p){p==null?(this.text=this.text.slice(0,h)+u+this.text.slice(h),this.domNode.data=this.text):f.prototype.insertAt.call(this,h,u,p)},m.prototype.length=function(){return this.text.length},m.prototype.optimize=function(h){f.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof m&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},m.prototype.position=function(h,u){return[this.domNode,h]},m.prototype.split=function(h,u){if(u===void 0&&(u=!1),!u){if(h===0)return this;if(h===this.length())return this.next}var p=c.create(this.domNode.splitText(h));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},m.prototype.update=function(h,u){var p=this;h.some(function(x){return x.type==="characterData"&&x.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},m.prototype.value=function(){return this.text},m.blotName="text",m.scope=c.Scope.INLINE_BLOT,m}(o.default);r.default=d},function(s,r,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,d){return arguments.length>1&&!this.contains(c)==!d?d:o.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,d){return d=d||0,this.substr(d,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,d){var f=this.toString();(typeof d!="number"||!isFinite(d)||Math.floor(d)!==d||d>f.length)&&(d=f.length),d-=c.length;var m=f.indexOf(c,d);return m!==-1&&m===d}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("predicate must be a function");for(var f=Object(this),m=f.length>>>0,h=arguments[1],u,p=0;p<m;p++)if(u=f[p],d.call(h,u,p,f))return u}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(s,r){var i=-1,a=1,o=0;function c(N,k,I){if(N==k)return N?[[o,N]]:[];(I<0||N.length<I)&&(I=null);var C=h(N,k),T=N.substring(0,C);N=N.substring(C),k=k.substring(C),C=u(N,k);var M=N.substring(N.length-C);N=N.substring(0,N.length-C),k=k.substring(0,k.length-C);var P=d(N,k);return T&&P.unshift([o,T]),M&&P.push([o,M]),x(P),I!=null&&(P=y(P,I)),P=b(P),P}function d(N,k){var I;if(!N)return[[a,k]];if(!k)return[[i,N]];var C=N.length>k.length?N:k,T=N.length>k.length?k:N,M=C.indexOf(T);if(M!=-1)return I=[[a,C.substring(0,M)],[o,T],[a,C.substring(M+T.length)]],N.length>k.length&&(I[0][0]=I[2][0]=i),I;if(T.length==1)return[[i,N],[a,k]];var P=p(N,k);if(P){var E=P[0],A=P[1],z=P[2],O=P[3],$=P[4],G=c(E,z),X=c(A,O);return G.concat([[o,$]],X)}return f(N,k)}function f(N,k){for(var I=N.length,C=k.length,T=Math.ceil((I+C)/2),M=T,P=2*T,E=new Array(P),A=new Array(P),z=0;z<P;z++)E[z]=-1,A[z]=-1;E[M+1]=0,A[M+1]=0;for(var O=I-C,$=O%2!=0,G=0,X=0,Y=0,U=0,V=0;V<T;V++){for(var R=-V+G;R<=V-X;R+=2){var F=M+R,q;R==-V||R!=V&&E[F-1]<E[F+1]?q=E[F+1]:q=E[F-1]+1;for(var W=q-R;q<I&&W<C&&N.charAt(q)==k.charAt(W);)q++,W++;if(E[F]=q,q>I)X+=2;else if(W>C)G+=2;else if($){var K=M+O-R;if(K>=0&&K<P&&A[K]!=-1){var B=I-A[K];if(q>=B)return m(N,k,q,W)}}}for(var Z=-V+Y;Z<=V-U;Z+=2){var K=M+Z,B;Z==-V||Z!=V&&A[K-1]<A[K+1]?B=A[K+1]:B=A[K-1]+1;for(var se=B-Z;B<I&&se<C&&N.charAt(I-B-1)==k.charAt(C-se-1);)B++,se++;if(A[K]=B,B>I)U+=2;else if(se>C)Y+=2;else if(!$){var F=M+O-Z;if(F>=0&&F<P&&E[F]!=-1){var q=E[F],W=M+q-F;if(B=I-B,q>=B)return m(N,k,q,W)}}}}return[[i,N],[a,k]]}function m(N,k,I,C){var T=N.substring(0,I),M=k.substring(0,C),P=N.substring(I),E=k.substring(C),A=c(T,M),z=c(P,E);return A.concat(z)}function h(N,k){if(!N||!k||N.charAt(0)!=k.charAt(0))return 0;for(var I=0,C=Math.min(N.length,k.length),T=C,M=0;I<T;)N.substring(M,T)==k.substring(M,T)?(I=T,M=I):C=T,T=Math.floor((C-I)/2+I);return T}function u(N,k){if(!N||!k||N.charAt(N.length-1)!=k.charAt(k.length-1))return 0;for(var I=0,C=Math.min(N.length,k.length),T=C,M=0;I<T;)N.substring(N.length-T,N.length-M)==k.substring(k.length-T,k.length-M)?(I=T,M=I):C=T,T=Math.floor((C-I)/2+I);return T}function p(N,k){var I=N.length>k.length?N:k,C=N.length>k.length?k:N;if(I.length<4||C.length*2<I.length)return null;function T(X,Y,U){for(var V=X.substring(U,U+Math.floor(X.length/4)),R=-1,F="",q,W,K,B;(R=Y.indexOf(V,R+1))!=-1;){var Z=h(X.substring(U),Y.substring(R)),se=u(X.substring(0,U),Y.substring(0,R));F.length<se+Z&&(F=Y.substring(R-se,R)+Y.substring(R,R+Z),q=X.substring(0,U-se),W=X.substring(U+Z),K=Y.substring(0,R-se),B=Y.substring(R+Z))}return F.length*2>=X.length?[q,W,K,B,F]:null}var M=T(I,C,Math.ceil(I.length/4)),P=T(I,C,Math.ceil(I.length/2)),E;if(!M&&!P)return null;P?M?E=M[4].length>P[4].length?M:P:E=P:E=M;var A,z,O,$;N.length>k.length?(A=E[0],z=E[1],O=E[2],$=E[3]):(O=E[0],$=E[1],A=E[2],z=E[3]);var G=E[4];return[A,z,O,$,G]}function x(N){N.push([o,""]);for(var k=0,I=0,C=0,T="",M="",P;k<N.length;)switch(N[k][0]){case a:C++,M+=N[k][1],k++;break;case i:I++,T+=N[k][1],k++;break;case o:I+C>1?(I!==0&&C!==0&&(P=h(M,T),P!==0&&(k-I-C>0&&N[k-I-C-1][0]==o?N[k-I-C-1][1]+=M.substring(0,P):(N.splice(0,0,[o,M.substring(0,P)]),k++),M=M.substring(P),T=T.substring(P)),P=u(M,T),P!==0&&(N[k][1]=M.substring(M.length-P)+N[k][1],M=M.substring(0,M.length-P),T=T.substring(0,T.length-P))),I===0?N.splice(k-C,I+C,[a,M]):C===0?N.splice(k-I,I+C,[i,T]):N.splice(k-I-C,I+C,[i,T],[a,M]),k=k-I-C+(I?1:0)+(C?1:0)+1):k!==0&&N[k-1][0]==o?(N[k-1][1]+=N[k][1],N.splice(k,1)):k++,C=0,I=0,T="",M="";break}N[N.length-1][1]===""&&N.pop();var E=!1;for(k=1;k<N.length-1;)N[k-1][0]==o&&N[k+1][0]==o&&(N[k][1].substring(N[k][1].length-N[k-1][1].length)==N[k-1][1]?(N[k][1]=N[k-1][1]+N[k][1].substring(0,N[k][1].length-N[k-1][1].length),N[k+1][1]=N[k-1][1]+N[k+1][1],N.splice(k-1,1),E=!0):N[k][1].substring(0,N[k+1][1].length)==N[k+1][1]&&(N[k-1][1]+=N[k+1][1],N[k][1]=N[k][1].substring(N[k+1][1].length)+N[k+1][1],N.splice(k+1,1),E=!0)),k++;E&&x(N)}var v=c;v.INSERT=a,v.DELETE=i,v.EQUAL=o,s.exports=v;function w(N,k){if(k===0)return[o,N];for(var I=0,C=0;C<N.length;C++){var T=N[C];if(T[0]===i||T[0]===o){var M=I+T[1].length;if(k===M)return[C+1,N];if(k<M){N=N.slice();var P=k-I,E=[T[0],T[1].slice(0,P)],A=[T[0],T[1].slice(P)];return N.splice(C,1,E,A),[C+1,N]}else I=M}}throw new Error("cursor_pos is out of bounds!")}function y(N,k){var I=w(N,k),C=I[1],T=I[0],M=C[T],P=C[T+1];if(M==null)return N;if(M[0]!==o)return N;if(P!=null&&M[1]+P[1]===P[1]+M[1])return C.splice(T,2,P,M),_(C,T,2);if(P!=null&&P[1].indexOf(M[1])===0){C.splice(T,2,[P[0],M[1]],[0,M[1]]);var E=P[1].slice(M[1].length);return E.length>0&&C.splice(T+2,0,[P[0],E]),_(C,T,3)}else return N}function b(N){for(var k=!1,I=function(P){return P.charCodeAt(0)>=56320&&P.charCodeAt(0)<=57343},C=function(P){return P.charCodeAt(P.length-1)>=55296&&P.charCodeAt(P.length-1)<=56319},T=2;T<N.length;T+=1)N[T-2][0]===o&&C(N[T-2][1])&&N[T-1][0]===i&&I(N[T-1][1])&&N[T][0]===a&&I(N[T][1])&&(k=!0,N[T-1][1]=N[T-2][1].slice(-1)+N[T-1][1],N[T][1]=N[T-2][1].slice(-1)+N[T][1],N[T-2][1]=N[T-2][1].slice(0,-1));if(!k)return N;for(var M=[],T=0;T<N.length;T+=1)N[T][1].length>0&&M.push(N[T]);return M}function _(N,k,I){for(var C=k+I-1;C>=0&&C>=k-1;C--)if(C+1<N.length){var T=N[C],M=N[C+1];T[0]===M[1]&&N.splice(C,2,[T[0],T[1]+M[1]])}return N}},function(s,r){r=s.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(a){var o=[];for(var c in a)o.push(c);return o}},function(s,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=s.exports=i?a:o,r.supported=a;function a(c){return Object.prototype.toString.call(c)=="[object Arguments]"}r.unsupported=o;function o(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}},function(s,r){var i=Object.prototype.hasOwnProperty,a="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(a=!1));function c(f,m,h){this.fn=f,this.context=m,this.once=h||!1}function d(){this._events=new o,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],h,u;if(this._eventsCount===0)return m;for(u in h=this._events)i.call(h,u)&&m.push(a?u.slice(1):u);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(h)):m},d.prototype.listeners=function(m,h){var u=a?a+m:m,p=this._events[u];if(h)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var x=0,v=p.length,w=new Array(v);x<v;x++)w[x]=p[x].fn;return w},d.prototype.emit=function(m,h,u,p,x,v){var w=a?a+m:m;if(!this._events[w])return!1;var y=this._events[w],b=arguments.length,_,N;if(y.fn){switch(y.once&&this.removeListener(m,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,h),!0;case 3:return y.fn.call(y.context,h,u),!0;case 4:return y.fn.call(y.context,h,u,p),!0;case 5:return y.fn.call(y.context,h,u,p,x),!0;case 6:return y.fn.call(y.context,h,u,p,x,v),!0}for(N=1,_=new Array(b-1);N<b;N++)_[N-1]=arguments[N];y.fn.apply(y.context,_)}else{var k=y.length,I;for(N=0;N<k;N++)switch(y[N].once&&this.removeListener(m,y[N].fn,void 0,!0),b){case 1:y[N].fn.call(y[N].context);break;case 2:y[N].fn.call(y[N].context,h);break;case 3:y[N].fn.call(y[N].context,h,u);break;case 4:y[N].fn.call(y[N].context,h,u,p);break;default:if(!_)for(I=1,_=new Array(b-1);I<b;I++)_[I-1]=arguments[I];y[N].fn.apply(y[N].context,_)}}return!0},d.prototype.on=function(m,h,u){var p=new c(h,u||this),x=a?a+m:m;return this._events[x]?this._events[x].fn?this._events[x]=[this._events[x],p]:this._events[x].push(p):(this._events[x]=p,this._eventsCount++),this},d.prototype.once=function(m,h,u){var p=new c(h,u||this,!0),x=a?a+m:m;return this._events[x]?this._events[x].fn?this._events[x]=[this._events[x],p]:this._events[x].push(p):(this._events[x]=p,this._eventsCount++),this},d.prototype.removeListener=function(m,h,u,p){var x=a?a+m:m;if(!this._events[x])return this;if(!h)return--this._eventsCount===0?this._events=new o:delete this._events[x],this;var v=this._events[x];if(v.fn)v.fn===h&&(!p||v.once)&&(!u||v.context===u)&&(--this._eventsCount===0?this._events=new o:delete this._events[x]);else{for(var w=0,y=[],b=v.length;w<b;w++)(v[w].fn!==h||p&&!v[w].once||u&&v[w].context!==u)&&y.push(v[w]);y.length?this._events[x]=y.length===1?y[0]:y:--this._eventsCount===0?this._events=new o:delete this._events[x]}return this},d.prototype.removeAllListeners=function(m){var h;return m?(h=a?a+m:m,this._events[h]&&(--this._eventsCount===0?this._events=new o:delete this._events[h])):(this._events=new o,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prototype.setMaxListeners=function(){return this},d.prefixed=a,d.EventEmitter=d,typeof s<"u"&&(s.exports=d)},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},o=function(){function he(pe,te){var ae=[],oe=!0,be=!1,je=void 0;try{for(var we=pe[Symbol.iterator](),re;!(oe=(re=we.next()).done)&&(ae.push(re.value),!(te&&ae.length===te));oe=!0);}catch(Pe){be=!0,je=Pe}finally{try{!oe&&we.return&&we.return()}finally{if(be)throw je}}return ae}return function(pe,te){if(Array.isArray(pe))return pe;if(Symbol.iterator in Object(pe))return he(pe,te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function he(pe,te){for(var ae=0;ae<te.length;ae++){var oe=te[ae];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(pe,oe.key,oe)}}return function(pe,te,ae){return te&&he(pe.prototype,te),ae&&he(pe,ae),pe}}(),d=i(3),f=A(d),m=i(2),h=A(m),u=i(0),p=A(u),x=i(5),v=A(x),w=i(10),y=A(w),b=i(9),_=A(b),N=i(36),k=i(37),I=i(13),C=A(I),T=i(26),M=i(38),P=i(39),E=i(40);function A(he){return he&&he.__esModule?he:{default:he}}function z(he,pe,te){return pe in he?Object.defineProperty(he,pe,{value:te,enumerable:!0,configurable:!0,writable:!0}):he[pe]=te,he}function O(he,pe){if(!(he instanceof pe))throw new TypeError("Cannot call a class as a function")}function $(he,pe){if(!he)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pe&&(typeof pe=="object"||typeof pe=="function")?pe:he}function G(he,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof pe);he.prototype=Object.create(pe&&pe.prototype,{constructor:{value:he,enumerable:!1,writable:!0,configurable:!0}}),pe&&(Object.setPrototypeOf?Object.setPrototypeOf(he,pe):he.__proto__=pe)}var X=(0,y.default)("quill:clipboard"),Y="__ql-matcher",U=[[Node.TEXT_NODE,xe],[Node.TEXT_NODE,_e],["br",le],[Node.ELEMENT_NODE,_e],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,me],[Node.ELEMENT_NODE,J],[Node.ELEMENT_NODE,Se],["li",ue],["b",se.bind(se,"bold")],["i",se.bind(se,"italic")],["style",Q]],V=[N.AlignAttribute,M.DirectionAttribute].reduce(function(he,pe){return he[pe.keyName]=pe,he},{}),R=[N.AlignStyle,k.BackgroundStyle,T.ColorStyle,M.DirectionStyle,P.FontStyle,E.SizeStyle].reduce(function(he,pe){return he[pe.keyName]=pe,he},{}),F=function(he){G(pe,he);function pe(te,ae){O(this,pe);var oe=$(this,(pe.__proto__||Object.getPrototypeOf(pe)).call(this,te,ae));return oe.quill.root.addEventListener("paste",oe.onPaste.bind(oe)),oe.container=oe.quill.addContainer("ql-clipboard"),oe.container.setAttribute("contenteditable",!0),oe.container.setAttribute("tabindex",-1),oe.matchers=[],U.concat(oe.options.matchers).forEach(function(be){var je=o(be,2),we=je[0],re=je[1];!ae.matchVisual&&re===me||oe.addMatcher(we,re)}),oe}return c(pe,[{key:"addMatcher",value:function(ae,oe){this.matchers.push([ae,oe])}},{key:"convert",value:function(ae){if(typeof ae=="string")return this.container.innerHTML=ae.replace(/\>\r?\n +\</g,"><"),this.convert();var oe=this.quill.getFormat(this.quill.selection.savedRange.index);if(oe[C.default.blotName]){var be=this.container.innerText;return this.container.innerHTML="",new h.default().insert(be,z({},C.default.blotName,oe[C.default.blotName]))}var je=this.prepareMatching(),we=o(je,2),re=we[0],Pe=we[1],Ae=Z(this.container,re,Pe);return K(Ae,`
`)&&Ae.ops[Ae.ops.length-1].attributes==null&&(Ae=Ae.compose(new h.default().retain(Ae.length()-1).delete(1))),X.log("convert",this.container.innerHTML,Ae),this.container.innerHTML="",Ae}},{key:"dangerouslyPasteHTML",value:function(ae,oe){var be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ae=="string")this.quill.setContents(this.convert(ae),oe),this.quill.setSelection(0,v.default.sources.SILENT);else{var je=this.convert(oe);this.quill.updateContents(new h.default().retain(ae).concat(je),be),this.quill.setSelection(ae+je.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ae){var oe=this;if(!(ae.defaultPrevented||!this.quill.isEnabled())){var be=this.quill.getSelection(),je=new h.default().retain(be.index),we=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){je=je.concat(oe.convert()).delete(be.length),oe.quill.updateContents(je,v.default.sources.USER),oe.quill.setSelection(je.length()-be.length,v.default.sources.SILENT),oe.quill.scrollingContainer.scrollTop=we,oe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ae=this,oe=[],be=[];return this.matchers.forEach(function(je){var we=o(je,2),re=we[0],Pe=we[1];switch(re){case Node.TEXT_NODE:be.push(Pe);break;case Node.ELEMENT_NODE:oe.push(Pe);break;default:[].forEach.call(ae.container.querySelectorAll(re),function(Ae){Ae[Y]=Ae[Y]||[],Ae[Y].push(Pe)});break}}),[oe,be]}}]),pe}(_.default);F.DEFAULTS={matchers:[],matchVisual:!0};function q(he,pe,te){return(typeof pe>"u"?"undefined":a(pe))==="object"?Object.keys(pe).reduce(function(ae,oe){return q(ae,oe,pe[oe])},he):he.reduce(function(ae,oe){return oe.attributes&&oe.attributes[pe]?ae.push(oe):ae.insert(oe.insert,(0,f.default)({},z({},pe,te),oe.attributes))},new h.default)}function W(he){if(he.nodeType!==Node.ELEMENT_NODE)return{};var pe="__ql-computed-style";return he[pe]||(he[pe]=window.getComputedStyle(he))}function K(he,pe){for(var te="",ae=he.ops.length-1;ae>=0&&te.length<pe.length;--ae){var oe=he.ops[ae];if(typeof oe.insert!="string")break;te=oe.insert+te}return te.slice(-1*pe.length)===pe}function B(he){if(he.childNodes.length===0)return!1;var pe=W(he);return["block","list-item"].indexOf(pe.display)>-1}function Z(he,pe,te){return he.nodeType===he.TEXT_NODE?te.reduce(function(ae,oe){return oe(he,ae)},new h.default):he.nodeType===he.ELEMENT_NODE?[].reduce.call(he.childNodes||[],function(ae,oe){var be=Z(oe,pe,te);return oe.nodeType===he.ELEMENT_NODE&&(be=pe.reduce(function(je,we){return we(oe,je)},be),be=(oe[Y]||[]).reduce(function(je,we){return we(oe,je)},be)),ae.concat(be)},new h.default):new h.default}function se(he,pe,te){return q(te,he,!0)}function J(he,pe){var te=p.default.Attributor.Attribute.keys(he),ae=p.default.Attributor.Class.keys(he),oe=p.default.Attributor.Style.keys(he),be={};return te.concat(ae).concat(oe).forEach(function(je){var we=p.default.query(je,p.default.Scope.ATTRIBUTE);we!=null&&(be[we.attrName]=we.value(he),be[we.attrName])||(we=V[je],we!=null&&(we.attrName===je||we.keyName===je)&&(be[we.attrName]=we.value(he)||void 0),we=R[je],we!=null&&(we.attrName===je||we.keyName===je)&&(we=R[je],be[we.attrName]=we.value(he)||void 0))}),Object.keys(be).length>0&&(pe=q(pe,be)),pe}function ie(he,pe){var te=p.default.query(he);if(te==null)return pe;if(te.prototype instanceof p.default.Embed){var ae={},oe=te.value(he);oe!=null&&(ae[te.blotName]=oe,pe=new h.default().insert(ae,te.formats(he)))}else typeof te.formats=="function"&&(pe=q(pe,te.blotName,te.formats(he)));return pe}function le(he,pe){return K(pe,`
`)||pe.insert(`
`),pe}function Q(){return new h.default}function ue(he,pe){var te=p.default.query(he);if(te==null||te.blotName!=="list-item"||!K(pe,`
`))return pe;for(var ae=-1,oe=he.parentNode;!oe.classList.contains("ql-clipboard");)(p.default.query(oe)||{}).blotName==="list"&&(ae+=1),oe=oe.parentNode;return ae<=0?pe:pe.compose(new h.default().retain(pe.length()-1).retain(1,{indent:ae}))}function _e(he,pe){return K(pe,`
`)||(B(he)||pe.length()>0&&he.nextSibling&&B(he.nextSibling))&&pe.insert(`
`),pe}function me(he,pe){if(B(he)&&he.nextElementSibling!=null&&!K(pe,`

`)){var te=he.offsetHeight+parseFloat(W(he).marginTop)+parseFloat(W(he).marginBottom);he.nextElementSibling.offsetTop>he.offsetTop+te*1.5&&pe.insert(`
`)}return pe}function Se(he,pe){var te={},ae=he.style||{};return ae.fontStyle&&W(he).fontStyle==="italic"&&(te.italic=!0),ae.fontWeight&&(W(he).fontWeight.startsWith("bold")||parseInt(W(he).fontWeight)>=700)&&(te.bold=!0),Object.keys(te).length>0&&(pe=q(pe,te)),parseFloat(ae.textIndent||0)>0&&(pe=new h.default().insert("	").concat(pe)),pe}function xe(he,pe){var te=he.data;if(he.parentNode.tagName==="O:P")return pe.insert(te.trim());if(te.trim().length===0&&he.parentNode.classList.contains("ql-clipboard"))return pe;if(!W(he.parentNode).whiteSpace.startsWith("pre")){var ae=function(be,je){return je=je.replace(/[^\u00a0]/g,""),je.length<1&&be?" ":je};te=te.replace(/\r\n/g," ").replace(/\n/g," "),te=te.replace(/\s\s+/g,ae.bind(ae,!0)),(he.previousSibling==null&&B(he.parentNode)||he.previousSibling!=null&&B(he.previousSibling))&&(te=te.replace(/^\s+/,ae.bind(ae,!1))),(he.nextSibling==null&&B(he.parentNode)||he.nextSibling!=null&&B(he.nextSibling))&&(te=te.replace(/\s+$/,ae.bind(ae,!1)))}return pe.insert(te)}r.default=F,r.matchAttributor=J,r.matchBlot=ie,r.matchNewline=_e,r.matchSpacing=me,r.matchText=xe},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function x(v,w){for(var y=0;y<w.length;y++){var b=w[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,y){return w&&x(v.prototype,w),y&&x(v,y),v}}(),o=function x(v,w,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:x(_,w,y)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(y)}},c=i(6),d=f(c);function f(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function h(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function u(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){u(v,x);function v(){return m(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"optimize",value:function(y){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,y),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(d.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var a=function(){function E(A,z){var O=[],$=!0,G=!1,X=void 0;try{for(var Y=A[Symbol.iterator](),U;!($=(U=Y.next()).done)&&(O.push(U.value),!(z&&O.length===z));$=!0);}catch(V){G=!0,X=V}finally{try{!$&&Y.return&&Y.return()}finally{if(G)throw X}}return O}return function(A,z){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return E(A,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function E(A,z){for(var O=0;O<z.length;O++){var $=z[O];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(A,$.key,$)}}return function(A,z,O){return z&&E(A.prototype,z),O&&E(A,O),A}}(),c=i(2),d=y(c),f=i(0),m=y(f),h=i(5),u=y(h),p=i(10),x=y(p),v=i(9),w=y(v);function y(E){return E&&E.__esModule?E:{default:E}}function b(E,A,z){return A in E?Object.defineProperty(E,A,{value:z,enumerable:!0,configurable:!0,writable:!0}):E[A]=z,E}function _(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function N(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function k(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var I=(0,x.default)("quill:toolbar"),C=function(E){k(A,E);function A(z,O){_(this,A);var $=N(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,z,O));if(Array.isArray($.options.container)){var G=document.createElement("div");M(G,$.options.container),z.container.parentNode.insertBefore(G,z.container),$.container=G}else typeof $.options.container=="string"?$.container=document.querySelector($.options.container):$.container=$.options.container;if(!($.container instanceof HTMLElement)){var X;return X=I.error("Container required for toolbar",$.options),N($,X)}return $.container.classList.add("ql-toolbar"),$.controls=[],$.handlers={},Object.keys($.options.handlers).forEach(function(Y){$.addHandler(Y,$.options.handlers[Y])}),[].forEach.call($.container.querySelectorAll("button, select"),function(Y){$.attach(Y)}),$.quill.on(u.default.events.EDITOR_CHANGE,function(Y,U){Y===u.default.events.SELECTION_CHANGE&&$.update(U)}),$.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){var Y=$.quill.selection.getRange(),U=a(Y,1),V=U[0];$.update(V)}),$}return o(A,[{key:"addHandler",value:function(O,$){this.handlers[O]=$}},{key:"attach",value:function(O){var $=this,G=[].find.call(O.classList,function(Y){return Y.indexOf("ql-")===0});if(G){if(G=G.slice(3),O.tagName==="BUTTON"&&O.setAttribute("type","button"),this.handlers[G]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[G]==null){I.warn("ignoring attaching to disabled format",G,O);return}if(m.default.query(G)==null){I.warn("ignoring attaching to nonexistent format",G,O);return}}var X=O.tagName==="SELECT"?"change":"click";O.addEventListener(X,function(Y){var U=void 0;if(O.tagName==="SELECT"){if(O.selectedIndex<0)return;var V=O.options[O.selectedIndex];V.hasAttribute("selected")?U=!1:U=V.value||!1}else O.classList.contains("ql-active")?U=!1:U=O.value||!O.hasAttribute("value"),Y.preventDefault();$.quill.focus();var R=$.quill.selection.getRange(),F=a(R,1),q=F[0];if($.handlers[G]!=null)$.handlers[G].call($,U);else if(m.default.query(G).prototype instanceof m.default.Embed){if(U=prompt("Enter "+G),!U)return;$.quill.updateContents(new d.default().retain(q.index).delete(q.length).insert(b({},G,U)),u.default.sources.USER)}else $.quill.format(G,U,u.default.sources.USER);$.update(q)}),this.controls.push([G,O])}}},{key:"update",value:function(O){var $=O==null?{}:this.quill.getFormat(O);this.controls.forEach(function(G){var X=a(G,2),Y=X[0],U=X[1];if(U.tagName==="SELECT"){var V=void 0;if(O==null)V=null;else if($[Y]==null)V=U.querySelector("option[selected]");else if(!Array.isArray($[Y])){var R=$[Y];typeof R=="string"&&(R=R.replace(/\"/g,'\\"')),V=U.querySelector('option[value="'+R+'"]')}V==null?(U.value="",U.selectedIndex=-1):V.selected=!0}else if(O==null)U.classList.remove("ql-active");else if(U.hasAttribute("value")){var F=$[Y]===U.getAttribute("value")||$[Y]!=null&&$[Y].toString()===U.getAttribute("value")||$[Y]==null&&!U.getAttribute("value");U.classList.toggle("ql-active",F)}else U.classList.toggle("ql-active",$[Y]!=null)})}}]),A}(w.default);C.DEFAULTS={};function T(E,A,z){var O=document.createElement("button");O.setAttribute("type","button"),O.classList.add("ql-"+A),z!=null&&(O.value=z),E.appendChild(O)}function M(E,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(z){var O=document.createElement("span");O.classList.add("ql-formats"),z.forEach(function($){if(typeof $=="string")T(O,$);else{var G=Object.keys($)[0],X=$[G];Array.isArray(X)?P(O,G,X):T(O,G,X)}}),E.appendChild(O)})}function P(E,A,z){var O=document.createElement("select");O.classList.add("ql-"+A),z.forEach(function($){var G=document.createElement("option");$!==!1?G.setAttribute("value",$):G.setAttribute("selected","selected"),O.appendChild(G)}),E.appendChild(O)}C.DEFAULTS={container:null,handlers:{clean:function(){var A=this,z=this.quill.getSelection();if(z!=null)if(z.length==0){var O=this.quill.getFormat();Object.keys(O).forEach(function($){m.default.query($,m.default.Scope.INLINE)!=null&&A.quill.format($,!1)})}else this.quill.removeFormat(z,u.default.sources.USER)},direction:function(A){var z=this.quill.getFormat().align;A==="rtl"&&z==null?this.quill.format("align","right",u.default.sources.USER):!A&&z==="right"&&this.quill.format("align",!1,u.default.sources.USER),this.quill.format("direction",A,u.default.sources.USER)},indent:function(A){var z=this.quill.getSelection(),O=this.quill.getFormat(z),$=parseInt(O.indent||0);if(A==="+1"||A==="-1"){var G=A==="+1"?1:-1;O.direction==="rtl"&&(G*=-1),this.quill.format("indent",$+G,u.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,u.default.sources.USER)},list:function(A){var z=this.quill.getSelection(),O=this.quill.getFormat(z);A==="check"?O.list==="checked"||O.list==="unchecked"?this.quill.format("list",!1,u.default.sources.USER):this.quill.format("list","unchecked",u.default.sources.USER):this.quill.format("list",A,u.default.sources.USER)}}},r.default=C,r.addControls=M},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function x(v,w){for(var y=0;y<w.length;y++){var b=w[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,y){return w&&x(v.prototype,w),y&&x(v,y),v}}(),o=function x(v,w,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:x(_,w,y)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(y)}},c=i(28),d=f(c);function f(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function h(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function u(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){u(v,x);function v(w,y){m(this,v);var b=h(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,w));return b.label.innerHTML=y,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(_){_.classList.add("ql-primary")}),b}return a(v,[{key:"buildItem",value:function(y){var b=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,y);return b.style.backgroundColor=y.getAttribute("value")||"",b}},{key:"selectItem",value:function(y,b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,y,b);var _=this.label.querySelector(".ql-color-label"),N=y&&y.getAttribute("data-value")||"";_&&(_.tagName==="line"?_.style.stroke=N:_.style.fill=N)}}]),v}(d.default);r.default=p},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function x(v,w){for(var y=0;y<w.length;y++){var b=w[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,y){return w&&x(v.prototype,w),y&&x(v,y),v}}(),o=function x(v,w,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:x(_,w,y)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(y)}},c=i(28),d=f(c);function f(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function h(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function u(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){u(v,x);function v(w,y){m(this,v);var b=h(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,w));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(_){_.innerHTML=y[_.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return a(v,[{key:"selectItem",value:function(y,b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,y,b),y=y||this.defaultItem,this.label.innerHTML=y.innerHTML}}]),v}(d.default);r.default=p},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function d(f,m){for(var h=0;h<m.length;h++){var u=m[h];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}return function(f,m,h){return m&&d(f.prototype,m),h&&d(f,h),f}}();function o(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}var c=function(){function d(f,m){var h=this;o(this,d),this.quill=f,this.boundsContainer=m||document.body,this.root=f.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return a(d,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(m){var h=m.left+m.width/2-this.root.offsetWidth/2,u=m.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=u+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),x=this.root.getBoundingClientRect(),v=0;if(x.right>p.right&&(v=p.right-x.right,this.root.style.left=h+v+"px"),x.left<p.left&&(v=p.left-x.left,this.root.style.left=h+v+"px"),x.bottom>p.bottom){var w=x.bottom-x.top,y=m.bottom-m.top+w;this.root.style.top=u-y+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),d}();r.default=c},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function P(E,A){var z=[],O=!0,$=!1,G=void 0;try{for(var X=E[Symbol.iterator](),Y;!(O=(Y=X.next()).done)&&(z.push(Y.value),!(A&&z.length===A));O=!0);}catch(U){$=!0,G=U}finally{try{!O&&X.return&&X.return()}finally{if($)throw G}}return z}return function(E,A){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return P(E,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function P(E,A,z){E===null&&(E=Function.prototype);var O=Object.getOwnPropertyDescriptor(E,A);if(O===void 0){var $=Object.getPrototypeOf(E);return $===null?void 0:P($,A,z)}else{if("value"in O)return O.value;var G=O.get;return G===void 0?void 0:G.call(z)}},c=function(){function P(E,A){for(var z=0;z<A.length;z++){var O=A[z];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(E,O.key,O)}}return function(E,A,z){return A&&P(E.prototype,A),z&&P(E,z),E}}(),d=i(3),f=_(d),m=i(8),h=_(m),u=i(43),p=_(u),x=i(27),v=_(x),w=i(15),y=i(41),b=_(y);function _(P){return P&&P.__esModule?P:{default:P}}function N(P,E){if(!(P instanceof E))throw new TypeError("Cannot call a class as a function")}function k(P,E){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:P}function I(P,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);P.prototype=Object.create(E&&E.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(P,E):P.__proto__=E)}var C=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],T=function(P){I(E,P);function E(A,z){N(this,E),z.modules.toolbar!=null&&z.modules.toolbar.container==null&&(z.modules.toolbar.container=C);var O=k(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,z));return O.quill.container.classList.add("ql-snow"),O}return c(E,[{key:"extendToolbar",value:function(z){z.container.classList.add("ql-snow"),this.buildButtons([].slice.call(z.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(z.container.querySelectorAll("select")),b.default),this.tooltip=new M(this.quill,this.options.bounds),z.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(O,$){z.handlers.link.call(z,!$.format.link)})}}]),E}(p.default);T.DEFAULTS=(0,f.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var A=this.quill.getSelection();if(A==null||A.length==0)return;var z=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(z)&&z.indexOf("mailto:")!==0&&(z="mailto:"+z);var O=this.quill.theme.tooltip;O.edit("link",z)}else this.quill.format("link",!1)}}}}});var M=function(P){I(E,P);function E(A,z){N(this,E);var O=k(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,A,z));return O.preview=O.root.querySelector("a.ql-preview"),O}return c(E,[{key:"listen",value:function(){var z=this;o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(O){z.root.classList.contains("ql-editing")?z.save():z.edit("link",z.preview.textContent),O.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(O){if(z.linkRange!=null){var $=z.linkRange;z.restoreFocus(),z.quill.formatText($,"link",!1,h.default.sources.USER),delete z.linkRange}O.preventDefault(),z.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(O,$,G){if(O!=null){if(O.length===0&&G===h.default.sources.USER){var X=z.quill.scroll.descendant(v.default,O.index),Y=a(X,2),U=Y[0],V=Y[1];if(U!=null){z.linkRange=new w.Range(O.index-V,U.length());var R=v.default.formats(U.domNode);z.preview.textContent=R,z.preview.setAttribute("href",R),z.show(),z.position(z.quill.getBounds(z.linkRange));return}}else delete z.linkRange;z.hide()}})}},{key:"show",value:function(){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E}(u.BaseTooltip);M.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=T},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(29),o=oe(a),c=i(36),d=i(38),f=i(64),m=i(65),h=oe(m),u=i(66),p=oe(u),x=i(67),v=oe(x),w=i(37),y=i(26),b=i(39),_=i(40),N=i(56),k=oe(N),I=i(68),C=oe(I),T=i(27),M=oe(T),P=i(69),E=oe(P),A=i(70),z=oe(A),O=i(71),$=oe(O),G=i(72),X=oe(G),Y=i(73),U=oe(Y),V=i(13),R=oe(V),F=i(74),q=oe(F),W=i(75),K=oe(W),B=i(57),Z=oe(B),se=i(41),J=oe(se),ie=i(28),le=oe(ie),Q=i(59),ue=oe(Q),_e=i(60),me=oe(_e),Se=i(61),xe=oe(Se),he=i(108),pe=oe(he),te=i(62),ae=oe(te);function oe(be){return be&&be.__esModule?be:{default:be}}o.default.register({"attributors/attribute/direction":d.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":y.ColorClass,"attributors/class/direction":d.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":_.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":y.ColorStyle,"attributors/style/direction":d.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":_.SizeStyle},!0),o.default.register({"formats/align":c.AlignClass,"formats/direction":d.DirectionClass,"formats/indent":f.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":y.ColorStyle,"formats/font":b.FontClass,"formats/size":_.SizeClass,"formats/blockquote":h.default,"formats/code-block":R.default,"formats/header":p.default,"formats/list":v.default,"formats/bold":k.default,"formats/code":V.Code,"formats/italic":C.default,"formats/link":M.default,"formats/script":E.default,"formats/strike":z.default,"formats/underline":$.default,"formats/image":X.default,"formats/video":U.default,"formats/list/item":x.ListItem,"modules/formula":q.default,"modules/syntax":K.default,"modules/toolbar":Z.default,"themes/bubble":pe.default,"themes/snow":ae.default,"ui/icons":J.default,"ui/picker":le.default,"ui/icon-picker":me.default,"ui/color-picker":ue.default,"ui/tooltip":xe.default},!0),r.default=o.default},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var a=function(){function v(w,y){for(var b=0;b<y.length;b++){var _=y[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}return function(w,y,b){return y&&v(w.prototype,y),b&&v(w,b),w}}(),o=function v(w,y,b){w===null&&(w=Function.prototype);var _=Object.getOwnPropertyDescriptor(w,y);if(_===void 0){var N=Object.getPrototypeOf(w);return N===null?void 0:v(N,y,b)}else{if("value"in _)return _.value;var k=_.get;return k===void 0?void 0:k.call(b)}},c=i(0),d=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function h(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function u(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var p=function(v){u(w,v);function w(){return m(this,w),h(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"add",value:function(b,_){if(_==="+1"||_==="-1"){var N=this.value(b)||0;_=_==="+1"?N+1:N-1}return _===0?(this.remove(b),!0):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,b,_)}},{key:"canAdd",value:function(b,_){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,b,_)||o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,b,parseInt(_))}},{key:"value",value:function(b){return parseInt(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,b))||void 0}}]),w}(d.default.Attributor.Class),x=new p("indent","ql-indent",{scope:d.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=x},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(4),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function m(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var h=function(u){m(p,u);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);h.blotName="blockquote",h.tagName="blockquote",r.default=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function p(x,v){for(var w=0;w<v.length;w++){var y=v[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(x,y.key,y)}}return function(x,v,w){return v&&p(x.prototype,v),w&&p(x,w),x}}(),o=i(4),c=d(o);function d(p){return p&&p.__esModule?p:{default:p}}function f(p,x){if(!(p instanceof x))throw new TypeError("Cannot call a class as a function")}function m(p,x){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:p}function h(p,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);p.prototype=Object.create(x&&x.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(p,x):p.__proto__=x)}var u=function(p){h(x,p);function x(){return f(this,x),m(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return a(x,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),x}(c.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],r.default=u},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var a=function(){function N(k,I){for(var C=0;C<I.length;C++){var T=I[C];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(k,T.key,T)}}return function(k,I,C){return I&&N(k.prototype,I),C&&N(k,C),k}}(),o=function N(k,I,C){k===null&&(k=Function.prototype);var T=Object.getOwnPropertyDescriptor(k,I);if(T===void 0){var M=Object.getPrototypeOf(k);return M===null?void 0:N(M,I,C)}else{if("value"in T)return T.value;var P=T.get;return P===void 0?void 0:P.call(C)}},c=i(0),d=p(c),f=i(4),m=p(f),h=i(25),u=p(h);function p(N){return N&&N.__esModule?N:{default:N}}function x(N,k,I){return k in N?Object.defineProperty(N,k,{value:I,enumerable:!0,configurable:!0,writable:!0}):N[k]=I,N}function v(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function w(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function y(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var b=function(N){y(k,N);function k(){return v(this,k),w(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return a(k,[{key:"format",value:function(C,T){C===_.blotName&&!T?this.replaceWith(d.default.create(this.statics.scope)):o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,C,T)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(C,T){return this.parent.isolate(this.offset(this.parent),this.length()),C===this.parent.statics.blotName?(this.parent.replaceWith(C,T),this):(this.parent.unwrap(),o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replaceWith",this).call(this,C,T))}}],[{key:"formats",value:function(C){return C.tagName===this.tagName?void 0:o(k.__proto__||Object.getPrototypeOf(k),"formats",this).call(this,C)}}]),k}(m.default);b.blotName="list-item",b.tagName="LI";var _=function(N){y(k,N),a(k,null,[{key:"create",value:function(C){var T=C==="ordered"?"OL":"UL",M=o(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,T);return(C==="checked"||C==="unchecked")&&M.setAttribute("data-checked",C==="checked"),M}},{key:"formats",value:function(C){if(C.tagName==="OL")return"ordered";if(C.tagName==="UL")return C.hasAttribute("data-checked")?C.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function k(I){v(this,k);var C=w(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,I)),T=function(P){if(P.target.parentNode===I){var E=C.statics.formats(I),A=d.default.find(P.target);E==="checked"?A.format("list","unchecked"):E==="unchecked"&&A.format("list","checked")}};return I.addEventListener("touchstart",T),I.addEventListener("mousedown",T),C}return a(k,[{key:"format",value:function(C,T){this.children.length>0&&this.children.tail.format(C,T)}},{key:"formats",value:function(){return x({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(C,T){if(C instanceof b)o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,C,T);else{var M=T==null?this.length():T.offset(this),P=this.split(M);P.parent.insertBefore(C,P)}}},{key:"optimize",value:function(C){o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,C);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&T.domNode.tagName===this.domNode.tagName&&T.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(T.moveChildren(this),T.remove())}},{key:"replace",value:function(C){if(C.statics.blotName!==this.statics.blotName){var T=d.default.create(this.statics.defaultChild);C.moveChildren(T),this.appendChild(T)}o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replace",this).call(this,C)}}]),k}(u.default);_.blotName="list",_.scope=d.default.Scope.BLOCK_BLOT,_.tagName=["OL","UL"],_.defaultChild="list-item",_.allowedChildren=[b],r.ListItem=b,r.default=_},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(56),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function m(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var h=function(u){m(p,u);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);h.blotName="italic",h.tagName=["EM","I"],r.default=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function x(v,w){for(var y=0;y<w.length;y++){var b=w[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,y){return w&&x(v.prototype,w),y&&x(v,y),v}}(),o=function x(v,w,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:x(_,w,y)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(y)}},c=i(6),d=f(c);function f(x){return x&&x.__esModule?x:{default:x}}function m(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function h(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function u(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var p=function(x){u(v,x);function v(){return m(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,null,[{key:"create",value:function(y){return y==="super"?document.createElement("sup"):y==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,y)}},{key:"formats",value:function(y){if(y.tagName==="SUB")return"sub";if(y.tagName==="SUP")return"super"}}]),v}(d.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function m(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var h=function(u){m(p,u);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);h.blotName="strike",h.tagName="S",r.default=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function m(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var h=function(u){m(p,u);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);h.blotName="underline",h.tagName="U",r.default=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(y,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,b,_){return b&&w(y.prototype,b),_&&w(y,_),y}}(),o=function w(y,b,_){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,b);if(N===void 0){var k=Object.getPrototypeOf(y);return k===null?void 0:w(k,b,_)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(_)}},c=i(0),d=m(c),f=i(27);function m(w){return w&&w.__esModule?w:{default:w}}function h(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function u(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function p(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var x=["alt","height","width"],v=function(w){p(y,w);function y(){return h(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"format",value:function(_,N){x.indexOf(_)>-1?N?this.domNode.setAttribute(_,N):this.domNode.removeAttribute(_):o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,_,N)}}],[{key:"create",value:function(_){var N=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,_);return typeof _=="string"&&N.setAttribute("src",this.sanitize(_)),N}},{key:"formats",value:function(_){return x.reduce(function(N,k){return _.hasAttribute(k)&&(N[k]=_.getAttribute(k)),N},{})}},{key:"match",value:function(_){return/\.(jpe?g|gif|png)$/.test(_)||/^data:image\/.+;base64/.test(_)}},{key:"sanitize",value:function(_){return(0,f.sanitize)(_,["http","https","data"])?_:"//:0"}},{key:"value",value:function(_){return _.getAttribute("src")}}]),y}(d.default.Embed);v.blotName="image",v.tagName="IMG",r.default=v},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(y,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,b,_){return b&&w(y.prototype,b),_&&w(y,_),y}}(),o=function w(y,b,_){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,b);if(N===void 0){var k=Object.getPrototypeOf(y);return k===null?void 0:w(k,b,_)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(_)}},c=i(4),d=i(27),f=m(d);function m(w){return w&&w.__esModule?w:{default:w}}function h(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function u(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function p(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var x=["height","width"],v=function(w){p(y,w);function y(){return h(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"format",value:function(_,N){x.indexOf(_)>-1?N?this.domNode.setAttribute(_,N):this.domNode.removeAttribute(_):o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,_,N)}}],[{key:"create",value:function(_){var N=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,_);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(_)),N}},{key:"formats",value:function(_){return x.reduce(function(N,k){return _.hasAttribute(k)&&(N[k]=_.getAttribute(k)),N},{})}},{key:"sanitize",value:function(_){return f.default.sanitize(_)}},{key:"value",value:function(_){return _.getAttribute("src")}}]),y}(c.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",r.default=v},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var a=function(){function _(N,k){for(var I=0;I<k.length;I++){var C=k[I];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(N,C.key,C)}}return function(N,k,I){return k&&_(N.prototype,k),I&&_(N,I),N}}(),o=function _(N,k,I){N===null&&(N=Function.prototype);var C=Object.getOwnPropertyDescriptor(N,k);if(C===void 0){var T=Object.getPrototypeOf(N);return T===null?void 0:_(T,k,I)}else{if("value"in C)return C.value;var M=C.get;return M===void 0?void 0:M.call(I)}},c=i(35),d=p(c),f=i(5),m=p(f),h=i(9),u=p(h);function p(_){return _&&_.__esModule?_:{default:_}}function x(_,N){if(!(_ instanceof N))throw new TypeError("Cannot call a class as a function")}function v(_,N){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:_}function w(_,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);_.prototype=Object.create(N&&N.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(_,N):_.__proto__=N)}var y=function(_){w(N,_);function N(){return x(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return a(N,null,[{key:"create",value:function(I){var C=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,I);return typeof I=="string"&&(window.katex.render(I,C,{throwOnError:!1,errorColor:"#f00"}),C.setAttribute("data-value",I)),C}},{key:"value",value:function(I){return I.getAttribute("data-value")}}]),N}(d.default);y.blotName="formula",y.className="ql-formula",y.tagName="SPAN";var b=function(_){w(N,_),a(N,null,[{key:"register",value:function(){m.default.register(y,!0)}}]);function N(){x(this,N);var k=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return k}return N}(u.default);r.FormulaBlot=y,r.default=b},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var a=function(){function I(C,T){for(var M=0;M<T.length;M++){var P=T[M];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}return function(C,T,M){return T&&I(C.prototype,T),M&&I(C,M),C}}(),o=function I(C,T,M){C===null&&(C=Function.prototype);var P=Object.getOwnPropertyDescriptor(C,T);if(P===void 0){var E=Object.getPrototypeOf(C);return E===null?void 0:I(E,T,M)}else{if("value"in P)return P.value;var A=P.get;return A===void 0?void 0:A.call(M)}},c=i(0),d=v(c),f=i(5),m=v(f),h=i(9),u=v(h),p=i(13),x=v(p);function v(I){return I&&I.__esModule?I:{default:I}}function w(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")}function y(I,C){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:I}function b(I,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);I.prototype=Object.create(C&&C.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(I,C):I.__proto__=C)}var _=function(I){b(C,I);function C(){return w(this,C),y(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return a(C,[{key:"replaceWith",value:function(M){this.domNode.textContent=this.domNode.textContent,this.attach(),o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replaceWith",this).call(this,M)}},{key:"highlight",value:function(M){var P=this.domNode.textContent;this.cachedText!==P&&((P.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=M(P),this.domNode.normalize(),this.attach()),this.cachedText=P)}}]),C}(x.default);_.className="ql-syntax";var N=new d.default.Attributor.Class("token","hljs",{scope:d.default.Scope.INLINE}),k=function(I){b(C,I),a(C,null,[{key:"register",value:function(){m.default.register(N,!0),m.default.register(_,!0)}}]);function C(T,M){w(this,C);var P=y(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,T,M));if(typeof P.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return P.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){P.highlight(),E=null},P.options.interval)}),P.highlight(),P}return a(C,[{key:"highlight",value:function(){var M=this;if(!this.quill.selection.composing){this.quill.update(m.default.sources.USER);var P=this.quill.getSelection();this.quill.scroll.descendants(_).forEach(function(E){E.highlight(M.options.highlight)}),this.quill.update(m.default.sources.SILENT),P!=null&&this.quill.setSelection(P,m.default.sources.SILENT)}}}]),C}(u.default);k.DEFAULTS={highlight:function(){return window.hljs==null?null:function(I){var C=window.hljs.highlightAuto(I);return C.value}}(),interval:1e3},r.CodeBlock=_,r.CodeToken=N,r.default=k},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(s,r){s.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(s,r){s.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(s,r){s.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(s,r){s.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var a=function C(T,M,P){T===null&&(T=Function.prototype);var E=Object.getOwnPropertyDescriptor(T,M);if(E===void 0){var A=Object.getPrototypeOf(T);return A===null?void 0:C(A,M,P)}else{if("value"in E)return E.value;var z=E.get;return z===void 0?void 0:z.call(P)}},o=function(){function C(T,M){for(var P=0;P<M.length;P++){var E=M[P];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(T,E.key,E)}}return function(T,M,P){return M&&C(T.prototype,M),P&&C(T,P),T}}(),c=i(3),d=w(c),f=i(8),m=w(f),h=i(43),u=w(h),p=i(15),x=i(41),v=w(x);function w(C){return C&&C.__esModule?C:{default:C}}function y(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")}function b(C,T){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:C}function _(C,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);C.prototype=Object.create(T&&T.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(C,T):C.__proto__=T)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],k=function(C){_(T,C);function T(M,P){y(this,T),P.modules.toolbar!=null&&P.modules.toolbar.container==null&&(P.modules.toolbar.container=N);var E=b(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,M,P));return E.quill.container.classList.add("ql-bubble"),E}return o(T,[{key:"extendToolbar",value:function(P){this.tooltip=new I(this.quill,this.options.bounds),this.tooltip.root.appendChild(P.container),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),v.default)}}]),T}(u.default);k.DEFAULTS=(0,d.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){T?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var I=function(C){_(T,C);function T(M,P){y(this,T);var E=b(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,M,P));return E.quill.on(m.default.events.EDITOR_CHANGE,function(A,z,O,$){if(A===m.default.events.SELECTION_CHANGE)if(z!=null&&z.length>0&&$===m.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var G=E.quill.getLines(z.index,z.length);if(G.length===1)E.position(E.quill.getBounds(z));else{var X=G[G.length-1],Y=E.quill.getIndex(X),U=Math.min(X.length()-1,z.index+z.length-Y),V=E.quill.getBounds(new p.Range(Y,U));E.position(V)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return o(T,[{key:"listen",value:function(){var P=this;a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){P.root.classList.remove("ql-editing")}),this.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!P.root.classList.contains("ql-hidden")){var E=P.quill.getSelection();E!=null&&P.position(P.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(P){var E=a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"position",this).call(this,P),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",E===0)return E;A.style.marginLeft=-1*E-A.offsetWidth/2+"px"}}]),T}(h.BaseTooltip);I.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=I,r.default=k},function(s,r,i){s.exports=i(63)}]).default})})(FL);var Ine=FL.exports,Dne=xi&&xi.__extends||function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},e(t,s)};return function(t,s){e(t,s);function r(){this.constructor=t}t.prototype=s===null?Object.create(s):(r.prototype=s.prototype,new r)}}(),Dm=xi&&xi.__assign||function(){return Dm=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Dm.apply(this,arguments)},Fne=xi&&xi.__spreadArrays||function(){for(var e=0,t=0,s=arguments.length;t<s;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<s;t++)for(var a=arguments[t],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r},Qp=xi&&xi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ei=Qp(j),$ne=Qp(eo),Ed=Qp(Mne),y2=Qp(Ine),zne=function(e){Dne(t,e);function t(s){var r=e.call(this,s)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(a,o,c,d){var f,m,h,u;a==="text-change"?(m=(f=r).onEditorChangeText)===null||m===void 0||m.call(f,r.editor.root.innerHTML,o,d,r.unprivilegedEditor):a==="selection-change"&&((u=(h=r).onEditorChangeSelection)===null||u===void 0||u.call(h,o,d,r.unprivilegedEditor))};var i=r.isControlled()?s.value:s.defaultValue;return r.value=i??"",r}return t.prototype.validateProps=function(s){var r;if(ei.default.Children.count(s.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ei.default.Children.count(s.children)){var i=ei.default.Children.only(s.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&s.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(s,r){var i=this,a;if(this.validateProps(s),!this.editor||this.state.generation!==r.generation)return!0;if("value"in s){var o=this.getEditorContents(),c=(a=s.value,a??"");this.isEqualValue(c,o)||this.setEditorContents(this.editor,c)}return s.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,s.readOnly),Fne(this.cleanProps,this.dirtyProps).some(function(d){return!Ed.default(s[d],i.props[d])})},t.prototype.shouldComponentRegenerate=function(s){var r=this;return this.dirtyProps.some(function(i){return!Ed.default(s[i],r.props[i])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(s,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(s)){var a=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:a,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var c=this.regenerationSnapshot,a=c.delta,d=c.selection;delete this.regenerationSnapshot,this.instantiateEditor();var f=this.editor;f.setContents(a),b2(function(){return i.setEditorSelection(f,d)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(s,r){var i=new y2.default(s,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},t.prototype.hookEditor=function(s){this.unprivilegedEditor=this.makeUnprivilegedEditor(s),s.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(s){s.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(s){return s&&s.ops},t.prototype.isEqualValue=function(s,r){return this.isDelta(s)&&this.isDelta(r)?Ed.default(s.ops,r.ops):Ed.default(s,r)},t.prototype.setEditorContents=function(s,r){var i=this;this.value=r;var a=this.getEditorSelection();typeof r=="string"?s.setContents(s.clipboard.convert(r)):s.setContents(r),b2(function(){return i.setEditorSelection(s,a)})},t.prototype.setEditorSelection=function(s,r){if(this.selection=r,r){var i=s.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),s.setSelection(r)}},t.prototype.setEditorTabIndex=function(s,r){var i,a;!((a=(i=s)===null||i===void 0?void 0:i.scroll)===null||a===void 0)&&a.domNode&&(s.scroll.domNode.tabIndex=r)},t.prototype.setEditorReadOnly=function(s,r){r?s.disable():s.enable()},t.prototype.makeUnprivilegedEditor=function(s){var r=s;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var s=$ne.default.findDOMNode(this.editingArea);if(!s)throw new Error("Cannot find element for editing area");if(s.nodeType===3)throw new Error("Editing area cannot be a text node");return s},t.prototype.renderEditingArea=function(){var s=this,r=this.props,i=r.children,a=r.preserveWhitespace,o=this.state.generation,c={key:o,ref:function(d){s.editingArea=d}};return ei.default.Children.count(i)?ei.default.cloneElement(ei.default.Children.only(i),c):a?ei.default.createElement("pre",Dm({},c)):ei.default.createElement("div",Dm({},c))},t.prototype.render=function(){var s;return ei.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(s=this.props.className,s??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(s,r,i,a){var o,c;if(this.editor){var d=this.isDelta(this.value)?a.getContents():a.getHTML();d!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=d,(c=(o=this.props).onChange)===null||c===void 0||c.call(o,s,r,i,a))}},t.prototype.onEditorChangeSelection=function(s,r,i){var a,o,c,d,f,m;if(this.editor){var h=this.getEditorSelection(),u=!h&&s,p=h&&!s;Ed.default(s,h)||(this.selection=s,(o=(a=this.props).onChangeSelection)===null||o===void 0||o.call(a,s,r,i),u?(d=(c=this.props).onFocus)===null||d===void 0||d.call(c,s,r,i):p&&((m=(f=this.props).onBlur)===null||m===void 0||m.call(f,h,r,i)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=y2.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(ei.default.Component);function b2(e){Promise.resolve().then(e)}var Bne=zne;const $L=Fm(Bne);var Jp="Switch",[Vne,ire]=ds(Jp),[Une,qne]=Vne(Jp),zL=j.forwardRef((e,t)=>{const{__scopeSwitch:s,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:d="on",onCheckedChange:f,form:m,...h}=e,[u,p]=j.useState(null),x=ft(t,_=>p(_)),v=j.useRef(!1),w=u?m||!!u.closest("form"):!0,[y,b]=Br({prop:i,defaultProp:a??!1,onChange:f,caller:Jp});return n.jsxs(Une,{scope:s,checked:y,disabled:c,children:[n.jsx(Xe.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":qL(y),"data-disabled":c?"":void 0,disabled:c,value:d,...h,ref:x,onClick:Me(e.onClick,_=>{b(N=>!N),w&&(v.current=_.isPropagationStopped(),v.current||_.stopPropagation())})}),w&&n.jsx(UL,{control:u,bubbles:!v.current,name:r,value:d,checked:y,required:o,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});zL.displayName=Jp;var BL="SwitchThumb",VL=j.forwardRef((e,t)=>{const{__scopeSwitch:s,...r}=e,i=qne(BL,s);return n.jsx(Xe.span,{"data-state":qL(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});VL.displayName=BL;var Hne="SwitchBubbleInput",UL=j.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:r=!0,...i},a)=>{const o=j.useRef(null),c=ft(o,a),d=Ap(s),f=cp(t);return j.useEffect(()=>{const m=o.current;if(!m)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(d!==s&&p){const x=new Event("click",{bubbles:r});p.call(m,s),m.dispatchEvent(x)}},[d,s,r]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:c,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});UL.displayName=Hne;function qL(e){return e?"checked":"unchecked"}var HL=zL,Wne=VL;const Zt=j.forwardRef(({className:e,...t},s)=>n.jsx(HL,{className:Ze("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:n.jsx(Wne,{className:Ze("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Zt.displayName=HL.displayName;const WL=({productData:e})=>{const{name:t,category:s,price:r,comparePrice:i,images:a,description:o,tags:c,dynamicFields:d,shortDescription:f,featured:m,status:h}=e,u=i&&r?Math.round((i-r)/i*100):0;return n.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[n.jsx(Te,{children:n.jsx(Oe,{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx("div",{className:"space-y-4",children:a&&a.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:n.jsx("img",{src:a[0],alt:t,className:"w-full h-full object-cover"})}),a.length>1&&n.jsx("div",{className:"grid grid-cols-4 gap-2",children:a.slice(1,5).map((p,x)=>n.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:n.jsx("img",{src:p,alt:`${t} ${x+2}`,className:"w-full h-full object-cover cursor-pointer hover:opacity-80"})},x))})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(De,{variant:"outline",children:s}),m&&n.jsx(De,{className:"bg-yellow-100 text-yellow-800",children:"Featured"}),n.jsx(De,{variant:h==="active"?"default":"secondary",children:h})]}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:t}),f&&n.jsx("p",{className:"text-gray-600 mb-4",children:f})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((p,x)=>n.jsx(dn,{className:"h-4 w-4 fill-current"},x))}),n.jsx("span",{className:"text-sm text-gray-600",children:"(4.8) 124 reviews"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["",r==null?void 0:r.toLocaleString()]}),i&&i>r&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["",i.toLocaleString()]}),n.jsxs(De,{className:"bg-green-100 text-green-800",children:[u,"% OFF"]})]})]}),n.jsx("p",{className:"text-sm text-green-600",children:"Inclusive of all taxes"})]}),n.jsx(gi,{}),d&&Object.keys(d).length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Product Details"}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(d).map(([p,x])=>x?n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600 capitalize",children:[p.replace(/([A-Z])/g," $1").trim(),":"]}),n.jsx("span",{className:"font-medium",children:Array.isArray(x)?x.join(", "):String(x)})]},p):null)})]}),n.jsx(gi,{}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(ne,{className:"flex-1",children:[n.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),n.jsx(ne,{variant:"outline",size:"icon",children:n.jsx(pr,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"icon",children:n.jsx(Ho,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx(Zl,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Free Delivery"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx(bi,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Secure Payment"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx(ai,{className:"h-6 w-6 mx-auto mb-1 text-orange-600"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Easy Returns"})]})]})]})]})})}),o&&n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{children:"Product Description"})}),n.jsx(Oe,{children:n.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:o}})})]}),c&&c.length>0&&n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{children:"Tags"})}),n.jsx(Oe,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(p=>n.jsx(De,{variant:"secondary",children:p},p))})})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{children:"Similar Products"})}),n.jsx(Oe,{children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(p=>n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg"}),n.jsxs("p",{className:"text-sm font-medium",children:["Similar Product ",p]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["",(r*(.8+Math.random()*.4)).toFixed(0)]})]},p))})})]})]})},Ar={electronics:{name:"Electronics",description:"Electronic devices and gadgets",icon:"",fields:[{name:"brand",label:"Brand",type:"text",placeholder:"e.g., Samsung, Apple"},{name:"model",label:"Model",type:"text",placeholder:"e.g., Galaxy S24"},{name:"warranty",label:"Warranty",type:"select",options:["No Warranty","6 months","1 year","2 years"]}]},clothing:{name:"Clothing & Fashion",description:"Apparel and fashion accessories",icon:"",fields:[{name:"brand",label:"Brand",type:"text",placeholder:"Brand name"},{name:"size",label:"Sizes",type:"multiselect",options:["XS","S","M","L","XL","XXL"]},{name:"color",label:"Colors",type:"multiselect",options:["Black","White","Red","Blue","Green","Gray","Brown"]},{name:"material",label:"Material",type:"text",placeholder:"e.g., Cotton, Polyester"}]},food:{name:"Food & Beverages",description:"Fresh food and beverages",icon:"",fields:[{name:"cuisine",label:"Cuisine",type:"select",options:["Nepali","Indian","Chinese","Continental","Italian","Other"]},{name:"spiceLevel",label:"Spice Level",type:"select",options:["Mild","Medium","Hot"]},{name:"dietaryInfo",label:"Dietary",type:"multiselect",options:["Vegetarian","Vegan","Gluten-Free"]},{name:"servingSize",label:"Serving Size",type:"text",placeholder:"e.g., 1 plate, 250ml"}]},baby:{name:"Baby & Kids",description:"Products for babies and children",icon:"",fields:[{name:"ageGroup",label:"Age Group",type:"select",options:["0-6 months","6-12 months","1-2 years","2-4 years","4+ years"]},{name:"safetyFeatures",label:"Safety",type:"multiselect",options:["BPA Free","Non-Toxic","Organic"]}]},grocery:{name:"Grocery & Household",description:"Daily essentials and household items",icon:"",fields:[{name:"weight",label:"Weight/Volume",type:"text",placeholder:"e.g., 1kg, 500ml"},{name:"expiryDate",label:"Expiry Date",type:"date"},{name:"organic",label:"Organic",type:"boolean"}]},meat:{name:"Meat & Seafood",description:"Fresh meat and seafood",icon:"",fields:[{name:"cut",label:"Cut Type",type:"select",options:["Whole","Pieces","Minced","Fillet"]},{name:"freshness",label:"Freshness",type:"select",options:["Fresh","Frozen"]}]},medicine:{name:"Medicine & Health",description:"Medicines and health products",icon:"",fields:[{name:"dosage",label:"Dosage",type:"text",placeholder:"e.g., 500mg, 10ml"},{name:"form",label:"Form",type:"select",options:["Tablet","Capsule","Syrup","Injection","Cream","Drops"]},{name:"prescription",label:"Prescription Required",type:"boolean"}]}},Zne=()=>Object.entries(Ar).map(([e,t])=>({value:e,label:t.name,description:t.description,icon:t.icon})),w2=e=>({meat:"kg",grocery:"piece",medicine:"unit",food:"plate",electronics:"piece",clothing:"piece",baby:"piece"})[e]||"piece",Gne=wL({name:wn().min(1,"Product name is required"),category:wn().min(1,"Category is required"),subcategory:wn().optional(),price:Vi().min(0,"Price must be positive"),comparePrice:Vi().optional(),costPrice:Vi().optional(),sku:wn().optional(),barcode:wn().optional(),trackQuantity:ru().default(!0),quantity:Vi().min(0,"Quantity must be positive"),lowStockThreshold:Vi().min(0).optional(),description:wn().min(1,"Description is required"),shortDescription:wn().optional(),tags:Rm(wn()).default([]),images:Rm(wn()).min(1,"At least one image is required"),status:_L(["active","draft","archived"]).default("active"),featured:ru().default(!1),freeDelivery:ru().default(!1),seoTitle:wn().optional(),seoDescription:wn().optional(),dynamicFields:jL(Xy()).default({})}),Kne=()=>{const[e,t]=j.useState(""),[s,r]=j.useState([]),[i,a]=j.useState([]),[o,c]=j.useState(""),[d,f]=j.useState(!1),[m,h]=j.useState(!1),[u,p]=j.useState([]),[x,v]=j.useState([]),w=pL({resolver:vL(Gne),defaultValues:{name:"",category:"",price:0,quantity:0,description:"",tags:[],images:[],status:"active",featured:!1,freeDelivery:!1,trackQuantity:!0,dynamicFields:{}}}),{control:y,handleSubmit:b,watch:_,setValue:N,formState:{errors:k}}=w,I=_("category");j.useEffect(()=>{var $;t(I),I&&(($=Ar[I])!=null&&$.subcategories)?v(Ar[I].subcategories):v([]),N("subcategory","")},[I,N]),j.useEffect(()=>{(async()=>{try{const{response:G,data:X}=await Ie("/vendor-profiles/");if(G.ok&&X&&X.length>0){const U=X[0].categories||[];p(U)}}catch(G){console.error("Error fetching vendor profile:",G)}})()},[N]);const C=$=>{const G=$.target.files;if(G){const X=Array.from(G).map(Y=>URL.createObjectURL(Y));r(Y=>[...Y,...X]),N("images",[...s,...X])}},T=$=>{const G=s.filter((X,Y)=>Y!==$);r(G),N("images",G)},M=()=>{if(o.trim()&&!i.includes(o.trim())){const $=[...i,o.trim()];a($),N("tags",$),c("")}},P=$=>{const G=i.filter(X=>X!==$);a(G),N("tags",G)},E=$=>{console.log("Product Data:",$)},A=$=>{const G=`dynamicFields.${$.name}`;switch($.type){case"text":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:$.name,children:[$.label," ",$.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:y,rules:{required:$.required},render:({field:X})=>n.jsx(ve,{...X,placeholder:`Enter ${$.label.toLowerCase()}`})})]},$.name);case"number":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:$.name,children:[$.label," ",$.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:y,rules:{required:$.required},render:({field:X})=>n.jsx(ve,{...X,type:"number",placeholder:`Enter ${$.label.toLowerCase()}`,onChange:Y=>X.onChange(Number(Y.target.value))})})]},$.name);case"select":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:$.name,children:[$.label," ",$.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:y,rules:{required:$.required},render:({field:X})=>{var Y;return n.jsxs(Vt,{onValueChange:X.onChange,value:X.value,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:`Select ${$.label.toLowerCase()}`})}),n.jsx(zt,{children:(Y=$.options)==null?void 0:Y.map(U=>n.jsx(qe,{value:U,children:U},U))})]})}})]},$.name);case"multiselect":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:$.name,children:[$.label," ",$.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:y,rules:{required:$.required},render:({field:X})=>{var U;const Y=X.value||[];return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Vt,{onValueChange:V=>{Y.includes(V)||X.onChange([...Y,V])},children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:`Select ${$.label.toLowerCase()}`})}),n.jsx(zt,{children:(U=$.options)==null?void 0:U.map(V=>n.jsx(qe,{value:V,children:V},V))})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map(V=>n.jsxs(De,{variant:"secondary",className:"flex items-center gap-1",children:[V,n.jsx(as,{className:"h-3 w-3 cursor-pointer",onClick:()=>{X.onChange(Y.filter(R=>R!==V))}})]},V))})]})}})]},$.name);case"textarea":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:$.name,children:[$.label," ",$.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:y,rules:{required:$.required},render:({field:X})=>n.jsx(Xn,{...X,placeholder:`Enter ${$.label.toLowerCase()}`})})]},$.name);case"boolean":return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:G,control:y,render:({field:X})=>n.jsx(Zt,{checked:X.value,onCheckedChange:X.onChange})}),n.jsx(fe,{htmlFor:$.name,children:$.label})]},$.name);case"date":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:$.name,children:[$.label," ",$.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:y,rules:{required:$.required},render:({field:X})=>n.jsx(ve,{...X,type:"date"})})]},$.name);default:return null}},z=()=>m?n.jsx(WL,{productData:_()}):n.jsxs("form",{onSubmit:b(E),className:"space-y-6",children:[n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsxs(jt,{className:"flex items-center gap-2",children:[n.jsx(At,{className:"h-5 w-5"}),"Basic Information"]})}),n.jsxs(Oe,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:"name",children:["Product Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"name",control:y,render:({field:$})=>n.jsx(ve,{...$,placeholder:"Enter product name"})}),k.name&&n.jsx("p",{className:"text-red-500 text-sm",children:k.name.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:"category",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"category",control:y,render:({field:$})=>n.jsxs(Vt,{onValueChange:$.onChange,value:$.value,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select category"})}),n.jsx(zt,{children:u.map(G=>{const X=Zne().find(Y=>Y.value===G);return X?n.jsx(qe,{value:G,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:X.icon}),n.jsx("span",{children:X.label})]})},G):null})})]})}),k.category&&n.jsx("p",{className:"text-red-500 text-sm",children:k.category.message})]}),x.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"subcategory",children:"Subcategory"}),n.jsx(bt,{name:"subcategory",control:y,render:({field:$})=>n.jsxs(Vt,{onValueChange:$.onChange,value:$.value,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select subcategory"})}),n.jsx(zt,{children:x.map(G=>n.jsx(qe,{value:G,children:G},G))})]})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"shortDescription",children:"Short Description"}),n.jsx(bt,{name:"shortDescription",control:y,render:({field:$})=>n.jsx(Xn,{...$,placeholder:"Brief product description",rows:2})})]})]})]}),e&&Ar[e]&&n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsxs(jt,{className:"flex items-center gap-2",children:[n.jsx(TP,{className:"h-5 w-5"}),n.jsx("span",{className:"mr-2",children:Ar[e].icon}),Ar[e].name," Details"]})}),n.jsx(Oe,{className:"space-y-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ar[e].fields.map(A)})})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{children:"Pricing & Inventory"})}),n.jsxs(Oe,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:"price",children:["Selling Price ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"price",control:y,render:({field:$})=>n.jsx(ve,{...$,type:"number",step:"0.01",placeholder:"0.00",onChange:G=>$.onChange(Number(G.target.value))})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"comparePrice",children:"Compare Price"}),n.jsx(bt,{name:"comparePrice",control:y,render:({field:$})=>n.jsx(ve,{...$,type:"number",step:"0.01",placeholder:"0.00",onChange:G=>$.onChange(Number(G.target.value))})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"costPrice",children:"Cost Price"}),n.jsx(bt,{name:"costPrice",control:y,render:({field:$})=>n.jsx(ve,{...$,type:"number",step:"0.01",placeholder:"0.00",onChange:G=>$.onChange(Number(G.target.value))})})]})]}),n.jsx(gi,{}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:"trackQuantity",control:y,render:({field:$})=>n.jsx(Zt,{checked:$.value,onCheckedChange:$.onChange})}),n.jsx(fe,{children:"Track Quantity"})]}),_("trackQuantity")&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:"quantity",children:["Quantity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"quantity",control:y,render:({field:$})=>n.jsx(ve,{...$,type:"number",placeholder:"0",onChange:G=>$.onChange(Number(G.target.value))})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"lowStockThreshold",children:"Low Stock Alert"}),n.jsx(bt,{name:"lowStockThreshold",control:y,render:({field:$})=>n.jsx(ve,{...$,type:"number",placeholder:"5",onChange:G=>$.onChange(Number(G.target.value))})})]})]})]})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsxs(jt,{className:"flex items-center gap-2",children:[n.jsx(Zi,{className:"h-5 w-5"}),"Product Images"]})}),n.jsxs(Oe,{className:"space-y-4",children:[n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[n.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:C,className:"hidden",id:"image-upload"}),n.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[n.jsx(Su,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload images or drag and drop"}),n.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG, GIF up to 10MB"})]})]}),s.length>0&&n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map(($,G)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:$,alt:`Product ${G+1}`,className:"w-full h-24 object-cover rounded-lg"}),n.jsx("button",{type:"button",onClick:()=>T(G),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(as,{className:"h-3 w-3"})}),G===0&&n.jsx(De,{className:"absolute bottom-1 left-1 text-xs",children:"Main"})]},G))})]})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsxs(jt,{className:"flex items-center gap-2",children:[n.jsx(kP,{className:"h-5 w-5"}),"Product Description"]})}),n.jsx(Oe,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(fe,{htmlFor:"description",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"description",control:y,render:({field:$})=>n.jsx($L,{theme:"snow",value:$.value,onChange:$.onChange,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},style:{minHeight:"200px"}})}),k.description&&n.jsx("p",{className:"text-red-500 text-sm",children:k.description.message})]})})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{children:"Product Tags"})}),n.jsxs(Oe,{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ve,{value:o,onChange:$=>c($.target.value),placeholder:"Add a tag",onKeyPress:$=>$.key==="Enter"&&($.preventDefault(),M())}),n.jsx(ne,{type:"button",onClick:M,variant:"outline",children:n.jsx(xn,{className:"h-4 w-4"})})]}),i.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:i.map($=>n.jsxs(De,{variant:"secondary",className:"flex items-center gap-1",children:[$,n.jsx(as,{className:"h-3 w-3 cursor-pointer",onClick:()=>P($)})]},$))})]})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{children:"SEO & Settings"})}),n.jsxs(Oe,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"sku",children:"SKU"}),n.jsx(bt,{name:"sku",control:y,render:({field:$})=>n.jsx(ve,{...$,placeholder:"Product SKU"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"barcode",children:"Barcode"}),n.jsx(bt,{name:"barcode",control:y,render:({field:$})=>n.jsx(ve,{...$,placeholder:"Product barcode"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"seoTitle",children:"SEO Title"}),n.jsx(bt,{name:"seoTitle",control:y,render:({field:$})=>n.jsx(ve,{...$,placeholder:"SEO optimized title"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"seoDescription",children:"SEO Description"}),n.jsx(bt,{name:"seoDescription",control:y,render:({field:$})=>n.jsx(Xn,{...$,placeholder:"SEO meta description",rows:3})})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:"featured",control:y,render:({field:$})=>n.jsx(Zt,{checked:$.value,onCheckedChange:$.onChange})}),n.jsx(fe,{children:"Featured Product"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:"freeDelivery",control:y,render:({field:$})=>n.jsx(Zt,{checked:$.value,onCheckedChange:$.onChange})}),n.jsx(fe,{children:"Free Delivery"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"status",children:"Status"}),n.jsx(bt,{name:"status",control:y,render:({field:$})=>n.jsxs(Vt,{onValueChange:$.onChange,value:$.value,children:[n.jsx($t,{className:"w-32",children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"active",children:"Active"}),n.jsx(qe,{value:"draft",children:"Draft"}),n.jsx(qe,{value:"archived",children:"Archived"})]})]})})]})]})]})]}),n.jsxs("div",{className:"flex gap-4 sticky bottom-4 bg-white p-4 border-t",children:[n.jsxs(ne,{type:"button",variant:"outline",className:"flex-1",onClick:()=>h(!m),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),m?"Edit":"Preview"]}),n.jsx(ne,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{N("status","draft"),b(E)()},children:"Save as Draft"}),n.jsxs(ne,{type:"submit",className:"flex-1",children:[n.jsx(Ic,{className:"h-4 w-4 mr-2"}),"Publish Product"]})]})]});if(d)return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>f(!1),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsx("h1",{className:"text-xl font-semibold",children:"Add New Product"})]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>h(!m),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),m?"Edit":"Preview"]})]})}),n.jsx("div",{className:"max-w-4xl mx-auto p-6",children:n.jsx(Vw,{className:"h-[calc(100vh-80px)]",children:n.jsx(z,{})})})]});const O=nt();return n.jsx("button",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-full shadow-xl flex items-center justify-center transition-all duration-300 hover:scale-110 border-4 border-white","aria-label":"Add Product",onClick:()=>O("/vendor/add-product"),children:n.jsx(xn,{className:"h-7 w-7"})})},j2=[{title:"Home",url:"/vendor/dashboard",icon:ab},{title:"Orders",url:"/vendor/orders",icon:EP},{title:"Products",url:"/vendor/products",icon:At},{title:"Settings",url:"/vendor/settings",icon:VD}],Yne=({children:e})=>n.jsx(n.Fragment,{children:e}),Xne=()=>{const e=Qs(),t=nt();return n.jsxs("div",{className:"fixed bottom-0 left-0 w-full z-50",children:[n.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 -top-6 z-10",children:n.jsx(Kne,{})}),n.jsxs("nav",{className:"bg-gradient-to-r from-slate-50 to-white shadow-2xl border-t border-gray-100 relative overflow-hidden backdrop-blur-sm pb-safe-bottom",children:[n.jsx("div",{className:"absolute inset-0 bg-white",style:{clipPath:"polygon(0 0, calc(50% - 32px) 0, calc(50% - 24px) 16px, calc(50% + 24px) 16px, calc(50% + 32px) 0, 100% 0, 100% 100%, 0 100%)"}}),n.jsxs("div",{className:"relative flex justify-around items-center px-safe-x py-1 pt-3 md:py-1 md:pt-2",children:[j2.slice(0,2).map(s=>{const r=s.icon,i=e.pathname===s.url;return n.jsxs("button",{onClick:()=>t(s.url),className:`flex flex-col items-center justify-center p-2 md:p-1 rounded-lg transition-all duration-200 min-w-[60px] ${i?"text-orange-600 bg-orange-50":"text-gray-600 hover:text-orange-500 hover:bg-gray-50"}`,"aria-label":s.title,children:[n.jsx(r,{className:"h-5 w-5 mb-1 md:mb-0"}),n.jsx("span",{className:"text-xs font-medium",children:s.title})]},s.title)}),n.jsx("div",{className:"w-16"}),j2.slice(2).map(s=>{const r=s.icon,i=e.pathname===s.url;return n.jsxs("button",{onClick:()=>t(s.url),className:`flex flex-col items-center justify-center p-2 md:p-1 rounded-lg transition-all duration-200 min-w-[60px] ${i?"text-orange-600 bg-orange-50":"text-gray-600 hover:text-orange-500 hover:bg-gray-50"}`,"aria-label":s.title,children:[n.jsx(r,{className:"h-5 w-5 mb-1 md:mb-0"}),n.jsx("span",{className:"text-xs font-medium",children:s.title})]},s.title)})]})]})]})},Qne=async()=>{console.log(" AUTH DEBUG START");const e=await ke.getToken(),t=await ke.getUser(),s=await ke.isAuthenticated();console.log(" Auth Status:",{hasToken:!!e,tokenLength:(e==null?void 0:e.length)||0,tokenPreview:e?`${e.substring(0,10)}...`:"null",hasUser:!!t,userId:t==null?void 0:t.id,userType:t==null?void 0:t.user_type,isAuthenticated:s});const r=localStorage.getItem("token"),i=localStorage.getItem("user");return console.log(" Direct Storage:",{directToken:r?`${r.substring(0,10)}...`:"null",directUser:i?"exists":"null",allKeys:Object.keys(localStorage)}),console.log(" AUTH DEBUG END"),{token:e,user:t,isAuth:s}};function Jne({title:e,subtitle:t,headerActions:s}){const r=nt(),{toast:i}=hn(),[a,o]=j.useState([]),[c,d]=j.useState([]),[f,m]=j.useState(!0),[h,u]=j.useState(null),p=a.filter(C=>!C.read).length,x=c.reduce((C,T)=>C+(T.unread_count||0),0),v=!1;j.useEffect(()=>{console.log(" VendorHeader initializing..."),_(),b(),w(),y();const C=setInterval(w,5e3),T=setInterval(y,5e3),M=O=>{const $=O.detail;o(G=>[$,...G])},P=O=>{const{order:$}=O.detail,G={id:Date.now(),type:"order",title:"New Order Received!",message:`Order #${$.order_number} for ${$.total_amount}`,data:{orderId:$.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(X=>[G,...X]),Wt.playNotificationSound(),Wt.showBrowserNotificationCompat(G.title,{body:G.message,tag:`order-${$.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/orders"}}),i({title:G.title,description:G.message,duration:5e3})},E=O=>{const{refund:$}=O.detail,G={id:Date.now(),type:"refund_request",title:"Refund Request Received!",message:`Refund request for Order #${$.order_number} - ${$.amount}`,data:{refundId:$.id,orderId:$.order_id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(X=>[G,...X]),Wt.playNotificationSound(),Wt.showBrowserNotificationCompat(G.title,{body:G.message,tag:`refund-${$.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/orders"}}),i({title:G.title,description:G.message,duration:5e3})},A=O=>{const{product:$}=O.detail,G={id:Date.now(),type:"stock_alert",title:"Low Stock Alert!",message:`${$.name} is running low (${$.stock} left)`,data:{productId:$.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/products"};o(X=>[G,...X]),Wt.playNotificationSound(),Wt.showBrowserNotificationCompat(G.title,{body:G.message,tag:`stock-${$.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/products"}}),i({title:G.title,description:G.message,duration:5e3})},z=O=>{const{order:$,oldStatus:G,newStatus:X}=O.detail,Y={id:Date.now(),type:"order_status",title:"Order Status Updated!",message:`Order #${$.order_number} changed from ${G} to ${X}`,data:{orderId:$.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(U=>[Y,...U]),Wt.playNotificationSound(),Wt.showBrowserNotificationCompat(Y.title,{body:Y.message,tag:`status-${$.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/orders"}}),i({title:Y.title,description:Y.message,duration:4e3})};return window.addEventListener("newNotification",M),window.addEventListener("orderCreated",P),window.addEventListener("refundRequest",E),window.addEventListener("stockAlert",A),window.addEventListener("orderStatusChange",z),()=>{clearInterval(C),clearInterval(T),window.removeEventListener("newNotification",M),window.removeEventListener("orderCreated",P),window.removeEventListener("refundRequest",E),window.removeEventListener("stockAlert",A),window.removeEventListener("orderStatusChange",z)}},[]);const w=async()=>{try{const C=await Hs.getConversations(),M=(Array.isArray(C)?C:(C==null?void 0:C.results)||[]).reduce((P,E)=>{var O,$,G;const A=(O=E.other_participant)==null?void 0:O.id;if(!A)return P;const z=P.find(X=>{var Y;return((Y=X.other_participant)==null?void 0:Y.id)===A});if(!z)P.push(E);else{const X=(($=E.last_message)==null?void 0:$.created_at)||E.updated_at,Y=((G=z.last_message)==null?void 0:G.created_at)||z.updated_at;if(new Date(X)>new Date(Y)){const U=P.findIndex(V=>{var R;return((R=V.other_participant)==null?void 0:R.id)===A});P[U]=E}}return P},[]);c.length>0&&M.forEach(P=>{var A,z;const E=c.find(O=>{var $,G;return(($=O.other_participant)==null?void 0:$.id)===((G=P.other_participant)==null?void 0:G.id)});E&&P.unread_count>E.unread_count&&Wt.showBrowserNotification(`New message from ${(A=P.other_participant)==null?void 0:A.username}`,{body:((z=P.last_message)==null?void 0:z.content)||"New message received",tag:`message-${P.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/messages"}})}),d(M)}catch(C){console.error("Failed to load conversations:",C)}},y=async()=>{try{const{response:C,data:T}=await Ie("/vendor-notifications/");if(C.ok&&T){const M=Array.isArray(T)?T:T.results||[];a.length>0&&M.forEach(P=>{if(!a.find(A=>A.id===P.id)){Wt.playNotificationSound();let A="/vendor/orders",z=!0;switch(P.type){case"order":A="/vendor/orders";break;case"refund":case"refund_request":A="/vendor/orders";break;case"stock_alert":case"low_stock":A="/vendor/products";break;case"order_status":case"status_change":A="/vendor/orders";break;case"payment":A="/vendor/wallet";break;case"message":A="/vendor/messages",z=!1;break;default:A="/vendor/orders"}Wt.showBrowserNotificationCompat(P.title,{body:P.message,tag:`notification-${P.id}`,requireInteraction:z,data:{actionUrl:A}}),i({title:P.title,description:P.message,duration:5e3})}}),o(M)}}catch(C){console.error("Failed to load notifications:",C),a.length===0&&o([])}},b=async()=>{await Wt.requestPermission()},_=async()=>{console.log(" Fetching vendor status...");try{const C=await ke.isAuthenticated();if(console.log(" Authentication check for fetch:",C),!C){console.log(" Not authenticated, redirecting to login"),r("/vendor/login");return}const T=await ke.getUser(),{response:M,data:P}=await Ie("/vendor-profiles/");if(console.log(" Fetch vendor status response:",{status:M.status,statusText:M.statusText,data:P,headers:Object.fromEntries(M.headers.entries())}),M.status===401||M.status===403){console.log(" Authentication error in fetch - user may not have vendor profile"),console.log("User authenticated but no vendor profile found");return}if(M.status!==200&&M.status!==201)throw console.log(" Unexpected status in fetch:",M.status),new Error((P==null?void 0:P.error)||(P==null?void 0:P.message)||"Failed to fetch vendor status");if(P&&P.results&&P.results.length>0){const E=P.results.find(A=>A.user===(T==null?void 0:T.id))||P.results[0];console.log(" Profile found:",{id:E.id,user:E.user,is_active:E.is_active}),u(E.id),m(E.is_active||!1)}else console.log(" No profile found in response"),console.log(" User may need to switch to vendor role or complete onboarding")}catch(C){console.error(" Error fetching vendor status:",C),i({title:"Error",description:"Failed to load vendor status",variant:"destructive"})}},N=async()=>{console.log(" Toggle status started"),await Qne();try{const C=await ke.isAuthenticated();if(console.log(" Authentication check:",C),!C){console.log(" Not authenticated, redirecting to login"),r("/vendor/login");return}if(!h)throw console.log(" No profile ID found"),new Error("Profile ID not found");const T=!f;console.log(" Toggling status from",f,"to",T,"for profile",h);const M={is_active:T};console.log(" Request body:",M);const P=await Ab();console.log(" Request headers:",P);const{response:E,data:A}=await Ie(`/vendor-profiles/${h}/toggle-status/`,{method:"POST",body:JSON.stringify(M)});if(console.log(" Toggle status response:",{status:E.status,statusText:E.statusText,data:A,headers:Object.fromEntries(E.headers.entries())}),console.log(" Response details:",{ok:E.ok,status:E.status,dataSuccess:A==null?void 0:A.success,dataError:A==null?void 0:A.error,dataMessage:A==null?void 0:A.message}),E.status===401||E.status===403){console.log(" Authentication error - but not clearing auth yet"),i({title:"Permission Error",description:"You don't have permission to perform this action",variant:"destructive"});return}if(E.status===200||E.status===201)if(console.log(" Success response received"),A&&A.success!==!1){const O=A.is_active!==void 0?A.is_active:T;console.log(" Setting status to:",O),m(O),i({title:"Success",description:A.message||`Status set to ${O?"Online":"Offline"}`}),console.log(" Toggle completed successfully");return}else throw console.log(" API returned success: false"),new Error((A==null?void 0:A.error)||(A==null?void 0:A.message)||"Failed to toggle status");console.log(" Unexpected status code:",E.status);const z=(A==null?void 0:A.error)||(A==null?void 0:A.detail)||(A==null?void 0:A.message)||`Server returned status ${E.status}`;throw new Error(z)}catch(C){console.error(" Error toggling status:",C),i({title:"Error",description:C instanceof Error?C.message:"Failed to toggle status",variant:"destructive"})}},k=async C=>{await Wt.markAsRead(C),o(T=>T.map(M=>M.id===C?{...M,read:!0}:M))},I=async()=>{await Wt.markAllAsRead(),o(C=>C.map(T=>({...T,read:!0})))};return n.jsx("header",{className:"fixed top-0 z-50 w-full max-w-full border-b bg-gradient-to-r from-gray-50 to-white shadow-lg overflow-hidden",children:n.jsxs("div",{className:"flex h-14 sm:h-16 items-center px-3 sm:px-4 max-w-full",children:[n.jsx("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:n.jsx("div",{className:"flex items-center gap-2 min-w-0",children:n.jsx("img",{src:"/assets/ezeywaylogo.png",alt:"Ezeyway",className:"h-32 w-32 sm:h-36 sm:w-36 object-contain flex-shrink-0"})})}),n.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 border border-gray-300 rounded-full px-3 py-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`text-xs font-medium ${f?"text-green-700":"text-gray-700"}`,children:f?"Online":"Offline"}),v]}),n.jsx("button",{onClick:N,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300 ${f?"bg-green-500":"bg-gray-400"}`,children:n.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform shadow-sm ${f?"translate-x-5":"translate-x-1"}`})})]}),n.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[n.jsxs(bc,{children:[n.jsx(wc,{asChild:!0,children:n.jsxs(ne,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10 text-gray-700 hover:bg-gray-100",children:[n.jsx(Ro,{className:"h-4 w-4 sm:h-5 sm:w-5"}),x>0&&n.jsx(De,{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 text-[10px] sm:text-xs flex items-center justify-center min-w-[16px] sm:min-w-[20px] bg-red-500 text-white border-2 border-white",children:x>9?"9+":x}),n.jsx("span",{className:"sr-only",children:"Messages"})]})}),n.jsxs(Go,{align:"end",className:"w-72 sm:w-80 mr-2 sm:mr-0",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h4",{className:"font-semibold",children:"Messages"}),n.jsx("div",{className:"flex gap-2",children:n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>r("/vendor/messages"),className:"text-xs",children:"View all"})})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:c.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No messages"}):c.slice(0,5).map(C=>{var T,M,P,E,A,z;return n.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${C.unread_count>0?"bg-blue-50/50":""}`,onClick:()=>r("/vendor/messages"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(ta,{className:"h-8 w-8",children:[n.jsx(Ir,{src:(T=C.other_participant)==null?void 0:T.profile_picture}),n.jsx(na,{children:(P=(M=C.other_participant)==null?void 0:M.username)==null?void 0:P.charAt(0)})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:(E=C.other_participant)==null?void 0:E.username}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((A=C.last_message)==null?void 0:A.content)||((z=C.last_message)==null?void 0:z.file_name)||"No messages"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:C.last_message?new Date(C.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),C.unread_count>0&&n.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xs text-white font-bold",children:C.unread_count})})]})},C.id)})})]})]}),s,!s&&n.jsxs(bc,{children:[n.jsx(wc,{asChild:!0,children:n.jsxs(ne,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10 text-gray-700 hover:bg-gray-100",children:[n.jsx(lr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),p>0&&n.jsx(De,{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 text-[10px] sm:text-xs flex items-center justify-center min-w-[16px] sm:min-w-[20px] bg-red-500 text-white border-2 border-white",children:p>9?"9+":p}),n.jsx("span",{className:"sr-only",children:"Notifications"})]})}),n.jsxs(Go,{align:"end",className:"w-72 sm:w-80 mr-2 sm:mr-0",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h4",{className:"font-semibold",children:"Notifications"}),p>0&&n.jsx(ne,{variant:"ghost",size:"sm",onClick:I,className:"text-xs",children:"Mark all read"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:a.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):a.map(C=>n.jsx("div",{className:`p-4 border-b last:border-b-0 hover:bg-muted/50 cursor-pointer ${C.read?"":"bg-blue-50/50"}`,onClick:()=>{switch(k(C.id),C.type){case"order":case"refund":case"refund_request":case"order_status":case"status_change":r("/vendor/orders");break;case"stock_alert":case"low_stock":r("/vendor/products");break;case"payment":r("/vendor/wallet");break;case"message":r("/vendor/messages");break;default:r("/vendor/orders")}},children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${C.read?"bg-transparent":"bg-blue-500"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm font-medium ${C.read?"text-gray-700":"text-gray-900"}`,children:C.title}),n.jsx("p",{className:`text-sm ${C.read?"text-gray-600":"text-gray-700"}`,children:C.message}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(C.created_at).toLocaleString()})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx(De,{variant:"outline",className:`text-xs ${C.type==="order"?"border-green-200 text-green-700":C.type==="refund"||C.type==="refund_request"?"border-red-200 text-red-700":C.type==="stock_alert"||C.type==="low_stock"?"border-orange-200 text-orange-700":C.type==="order_status"||C.type==="status_change"||C.type==="payment"?"border-blue-200 text-blue-700":C.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:C.type==="refund_request"?"refund":C.type==="stock_alert"?"stock":C.type==="order_status"?"status":C.type})})]})},C.id))}),n.jsx("div",{className:"p-2 border-t",children:n.jsx(ne,{variant:"ghost",className:"w-full text-sm",onClick:()=>r("/vendor/notifications"),children:"View all notifications"})})]})]})]})]})})}function ese({isOpen:e,orders:t,onAccept:s,onReject:r}){const[i,a]=j.useState({}),o=j.useRef(null),{toast:c}=hn(),d=j.useRef({});j.useEffect(()=>{if(e&&t.length>0){(async()=>{if(o.current)try{o.current.volume=.8,await o.current.play(),setTimeout(()=>{o.current&&(o.current.pause(),o.current.currentTime=0)},3e3)}catch(x){console.warn("Audio autoplay blocked:",x);try{const v=new(window.AudioContext||window.webkitAudioContext),w=v.createOscillator(),y=v.createGain();w.connect(y),y.connect(v.destination),w.frequency.setValueAtTime(800,v.currentTime),w.type="square",y.gain.setValueAtTime(.3,v.currentTime),y.gain.exponentialRampToValueAtTime(.01,v.currentTime+.5),w.start(v.currentTime),w.stop(v.currentTime+.5)}catch(v){console.warn("Web Audio API also failed:",v)}}})(),"Notification"in window&&Notification.permission==="default"?Notification.requestPermission().then(x=>{x==="granted"&&f()}):"Notification"in window&&Notification.permission==="granted"&&f(),t.forEach(x=>{d.current[x.id]||(d.current[x.id]=new Date(x.created_at))});const p=setInterval(()=>{const x={};t.forEach(v=>{if(d.current[v.id]){const y=Math.floor((new Date().getTime()-d.current[v.id].getTime())/1e3);x[v.id]=y}}),a(x)},1e3);return()=>clearInterval(p)}},[e,t]);const f=()=>{t.forEach(u=>{new Notification("New Order Received!",{body:`Order #${u.order_number} - ${u.total_amount}`,icon:"/favicon.ico",tag:`order-${u.id}`,requireInteraction:!0})})};if(!e||t.length===0)return null;const m=u=>{const p=t.find(x=>x.id===u);s(u),c({title:"Order Accepted",description:`Order #${p==null?void 0:p.order_number} has been accepted`})},h=u=>{const p=t.find(x=>x.id===u);r(u),c({title:"Order Rejected",description:`Order #${p==null?void 0:p.order_number} has been rejected`,variant:"destructive"})};return n.jsxs(n.Fragment,{children:[n.jsx("audio",{ref:o,preload:"auto",loop:!0,children:n.jsx("source",{src:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",type:"audio/wav"})}),n.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-end",children:n.jsx("div",{className:"w-full bg-white rounded-t-3xl shadow-2xl animate-in slide-in-from-bottom duration-300",style:{height:"80vh"},children:n.jsxs("div",{className:"p-6 h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-red-100 rounded-full flex items-center justify-center animate-pulse",children:n.jsx(lr,{className:"h-3 w-3 text-red-600 animate-bounce"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-bold text-red-900",children:" New Orders Received!"}),n.jsxs("p",{className:"text-xs text-red-600 font-medium",children:[t.length," order",t.length>1?"s":""," waiting for response"]})]})]}),n.jsx("div",{className:"text-xs text-red-600 font-bold animate-pulse",children:"URGENT"})]}),n.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:t.map(u=>{const p=i[u.id]||0;return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("p",{className:"text-xs font-bold text-gray-900",children:["#",u.order_number]}),n.jsxs("p",{className:"text-xs font-bold text-green-600",children:["",u.total_amount]}),n.jsxs("p",{className:"text-xs text-blue-600",children:[Math.floor(p/60),":",(p%60).toString().padStart(2,"0")]})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:u.customer_name}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-1",children:[n.jsxs("div",{className:"flex items-start gap-1",children:[n.jsx(Kt,{className:"h-2 w-2 text-gray-500 mt-0.5"}),n.jsx("p",{className:"text-xs text-gray-900",children:u.delivery_address})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(eh,{className:"h-2 w-2 text-gray-500"}),n.jsx("p",{className:"text-xs text-gray-900",children:u.delivery_phone})]})]}),n.jsxs("div",{className:"mb-1",children:[n.jsxs("p",{className:"text-xs font-medium text-gray-700 mb-1",children:["Items (",u.items.length,")"]}),n.jsx("div",{className:"space-y-1 max-h-16 overflow-y-auto",children:u.items.map(x=>{var v,w,y;return n.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white rounded",children:[n.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:n.jsx("img",{src:((y=(w=(v=x.product_details)==null?void 0:v.images)==null?void 0:w[0])==null?void 0:y.image_url)||"/placeholder-product.jpg",alt:x.product_name,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:x.product_name}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",x.quantity]})]}),n.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["",x.total_price]})]},x.id)})})]}),u.delivery_instructions&&n.jsxs("div",{className:"mb-1",children:[n.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Instructions:"}),n.jsx("p",{className:"text-xs text-gray-600 italic",children:u.delivery_instructions})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs(ne,{onClick:()=>h(u.id),variant:"outline",size:"sm",className:"flex-1 border-red-200 text-red-600 hover:bg-red-50 text-xs h-6",children:[n.jsx(as,{className:"h-2 w-2 mr-1"}),"Reject"]}),n.jsxs(ne,{onClick:()=>m(u.id),size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-xs h-6",children:[n.jsx(Qu,{className:"h-2 w-2 mr-1"}),"Accept"]})]})]},u.id)})})]})})})]})}function ZL(){const[e,t]=j.useState(!1),[s,r]=j.useState(null);return j.useEffect(()=>{if(!vt.isNativePlatform())return;const i=a=>{r(a.detail),t(!0),setTimeout(()=>{t(!1)},5e3)};return window.addEventListener("showOrderModal",i),()=>{window.removeEventListener("showOrderModal",i)}},[]),!vt.isNativePlatform()||!e?null:n.jsx("div",{className:"fixed top-4 left-4 right-4 z-[10000] animate-in slide-in-from-top duration-300",children:n.jsx(Te,{className:"border-orange-200 bg-orange-50 shadow-lg",children:n.jsx(Oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center animate-pulse",children:n.jsx(lr,{className:"h-4 w-4 text-orange-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-bold text-orange-900",children:" New Order Received!"}),s&&n.jsxs("p",{className:"text-xs text-orange-700",children:["Order #",s.orderNumber," - ",s.amount]}),n.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Tap anywhere to view and respond"})]})]})})})})}function tse(){const[e,t]=j.useState([]),[s,r]=j.useState(!1),i=j.useRef(null),a=j.useRef(new Set),{notifications:o,unreadCount:c,isConnected:d}=qp();j.useEffect(()=>{const u=p=>{const x=p.detail;x.type==="order"&&x.title.includes("New Order")&&f()};return window.addEventListener("newNotification",u),()=>{window.removeEventListener("newNotification",u)}},[]);const f=async()=>{try{const{authService:u}=await We(async()=>{const{authService:y}=await Promise.resolve().then(()=>Zo);return{authService:y}},void 0),p=await u.getToken();if(!p){console.log("No token found for pending orders");return}console.log(" Mobile: Fetching pending orders with token:",p?`${p.substring(0,10)}...`:"NO TOKEN"),console.log(" Mobile: API URL:",yp("orders/vendor/pending/"));const{apiRequest:x}=await We(async()=>{const{apiRequest:y}=await Promise.resolve().then(()=>Kn);return{apiRequest:y}},void 0),{response:v,data:w}=await x("orders/vendor/pending/");console.log(" Mobile: Pending orders response:",v.status,v.ok),v.ok&&w?(console.log("Pending orders received:",w.length,w),t(w),r(w.length>0),w.length>0&&(console.log(" Mobile: Showing order notification for",w.length,"orders"),We(async()=>{const{simpleNotificationService:y}=await Promise.resolve().then(()=>Rv);return{simpleNotificationService:y}},void 0).then(({simpleNotificationService:y})=>{w.forEach(b=>{a.current.has(b.id)||(console.log(" Processing NEW order:",b.order_number,b.total_amount),a.current.add(b.id),y.showOrderNotification(b.order_number,b.total_amount,b.id))})}))):console.error("Failed to fetch pending orders:",v.status,v.statusText)}catch(u){console.error("Error fetching pending orders:",u)}};return j.useEffect(()=>{(async()=>{const{authService:w}=await We(async()=>{const{authService:b}=await Promise.resolve().then(()=>Zo);return{authService:b}},void 0);await w.getToken()&&f()})();const p=vt.isNativePlatform()?3e4:6e4;i.current=setInterval(f,p);const x=()=>{document.hidden||f()};document.addEventListener("visibilitychange",x);const v=()=>{console.log("Refreshing pending orders from mobile app resume"),f()};if(window.addEventListener("refreshPendingOrders",v),vt.isNativePlatform()){const w=()=>{console.log(" App state changed - refreshing orders"),f()};return document.addEventListener("resume",w),document.addEventListener("visibilitychange",w),()=>{i.current&&clearInterval(i.current),document.removeEventListener("visibilitychange",x),window.removeEventListener("refreshPendingOrders",v),document.removeEventListener("resume",w),document.removeEventListener("visibilitychange",w)}}return()=>{i.current&&clearInterval(i.current),document.removeEventListener("visibilitychange",x),window.removeEventListener("refreshPendingOrders",v)}},[]),{pendingOrders:e,isModalOpen:s,acceptOrder:async u=>{try{const{apiRequest:p}=await We(async()=>{const{apiRequest:v}=await Promise.resolve().then(()=>Kn);return{apiRequest:v}},void 0),{response:x}=await p(`/orders/${u}/accept/`,{method:"POST"});if(x.ok){const{simpleNotificationService:v}=await We(async()=>{const{simpleNotificationService:w}=await Promise.resolve().then(()=>Rv);return{simpleNotificationService:w}},void 0);return v.clearNotification(u),a.current.delete(u),t(w=>w.filter(y=>y.id!==u)),e.length<=1&&r(!1),!0}}catch(p){console.error("Error accepting order:",p)}return!1},rejectOrder:async u=>{try{const{apiRequest:p}=await We(async()=>{const{apiRequest:v}=await Promise.resolve().then(()=>Kn);return{apiRequest:v}},void 0),{response:x}=await p(`/orders/${u}/reject/`,{method:"POST",body:JSON.stringify({reason:"Rejected by vendor"})});if(x.ok){const{simpleNotificationService:v}=await We(async()=>{const{simpleNotificationService:w}=await Promise.resolve().then(()=>Rv);return{simpleNotificationService:w}},void 0);return v.clearNotification(u),a.current.delete(u),t(w=>w.filter(y=>y.id!==u)),e.length<=1&&r(!1),!0}}catch(p){console.error("Error rejecting order:",p)}return!1},notifications:o,unreadCount:c,isConnected:d}}const GL=j.createContext(void 0);function nse({children:e}){const{pendingOrders:t,isModalOpen:s,acceptOrder:r,rejectOrder:i}=tse(),[a,o]=j.useState(!1);j.useEffect(()=>{(async()=>{await $l.requestPermissions(),console.log("Notification service initialized for platform:",vt.isNativePlatform()?"mobile":"web")})()},[]),j.useEffect(()=>{o(s)},[s]),j.useEffect(()=>{t.length>0&&t.forEach(f=>{$l.showOrderNotification(f.order_number,f.total_amount,f.id),vt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([300,100,300])})},[t]),j.useEffect(()=>{const f=async m=>{console.log("Order modal event received:",m.detail);const h=m.detail;o(!0),(h!=null&&h.startBeeping||h!=null&&h.autoOpened||h!=null&&h.fromPush)&&(console.log(" Starting beeping for auto-opened notification"),await c()),vt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([200,100,200])};return window.addEventListener("showOrderModal",f),()=>{window.removeEventListener("showOrderModal",f)}},[]);const c=async()=>{try{console.log(" Starting order notification beeping sequence..."),await $l.playNotificationSound();let f=0;const m=10,h=setInterval(async()=>{f<m&&a?(await $l.playNotificationSound(),vt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([150,50,150]),f++,console.log(` Beep ${f}/${m}`)):(clearInterval(h),console.log(" Beeping sequence completed"))},2e3);window.orderBeepInterval=h}catch(f){console.error("Failed to start order beeping:",f)}};j.useEffect(()=>{vt.isNativePlatform()&&document.addEventListener("visibilitychange",()=>{document.hidden||(console.log("Page visible - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))})},[]);const d=()=>{o(!1),window.orderBeepInterval&&(clearInterval(window.orderBeepInterval),window.orderBeepInterval=null,console.log(" Stopped beeping - modal closed"))};return n.jsxs(GL.Provider,{value:{pendingOrdersCount:t.length,isModalOpen:a,closeModal:d},children:[e,n.jsx(ZL,{}),n.jsx(ese,{isOpen:a,orders:t,onAccept:r,onReject:i})]})}function sse(){const e=j.useContext(GL);return e===void 0?{pendingOrdersCount:0,isModalOpen:!1,closeModal:()=>{}}:e}function rse({children:e,title:t,subtitle:s,headerActions:r}){return n.jsx(nse,{children:n.jsx(Yne,{children:n.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 safe-area-inset max-w-full overflow-x-hidden",children:[n.jsx(ZL,{}),n.jsx("div",{className:"pt-safe-top",children:n.jsx(Jne,{title:t,subtitle:s,headerActions:r})}),n.jsx("main",{className:"flex-1 pb-20 px-safe-x max-w-full overflow-x-hidden pt-14 sm:pt-16",children:e}),n.jsx(Xne,{})]})})})}function qt({children:e,title:t,subtitle:s,headerActions:r}){return n.jsx(rse,{title:t,subtitle:s,headerActions:r,children:e})}const ise=()=>{const[e,t]=j.useState({}),[s,r]=j.useState(!1);return j.useEffect(()=>{(async()=>{try{const a=await ke.getToken(),o=await ke.getUser(),c=await ke.isAuthenticated(),d=await ke.isSessionValid(),f=vt.isNativePlatform();let m="Not checked",h=null;if(a&&(o==null?void 0:o.user_type)==="vendor")try{const{response:u,data:p}=await Ie("/vendor-profiles/");m=`${u.status} - ${u.ok?"Success":"Failed"}`,u.ok||(h=(p==null?void 0:p.error)||u.statusText)}catch(u){m="Error",h=u.message}else a&&(o==null?void 0:o.user_type)!=="vendor"&&(m="Not a vendor user");t({isNative:f,platform:vt.getPlatform(),token:a?`${a.substring(0,10)}...`:"None",user:o?{id:o.id,user_type:o.user_type,email:o.email}:"None",isAuthenticated:c,isSessionValid:d,vendorProfileStatus:m,vendorProfileError:h,timestamp:new Date().toISOString()})}catch(a){t({error:a.message,timestamp:new Date().toISOString()})}})()},[]),s?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-md w-full max-h-96 overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-bold",children:"Vendor Debug Info"}),n.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),n.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(e,null,2)}),n.jsx("button",{onClick:()=>{var i;(i=navigator.clipboard)==null||i.writeText(JSON.stringify(e,null,2)),alert("Debug info copied to clipboard")},className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs w-full",children:"Copy to Clipboard"})]})}):n.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 right-4 bg-red-500 text-white px-3 py-1 rounded text-xs z-50",children:"Debug"})},xo=no("PushNotifications",{}),KL=Object.freeze(Object.defineProperty({__proto__:null,PushNotifications:xo},Symbol.toStringTag,{value:"Module"})),ase=no("FCM",{web:()=>We(()=>import("./web-DAUHEWxI.js"),[]).then(e=>new e.FCMWeb)});class ose{constructor(){zn(this,"fcmToken",null)}async initialize(){if(!vt.isNativePlatform()){console.log(" Not on native platform, skipping FCM initialization");return}try{console.log(" Initializing FCM Service..."),this.checkForAutoOpenOrder(),this.setupListeners(),console.log(" Requesting push notification permissions...");const t=await xo.requestPermissions();if(console.log(" Permission result:",t),t.receive!=="granted"){console.warn(" Push notification permission denied");return}console.log(" Registering for push notifications..."),await xo.register();try{await ase.requestPermissions(),console.log(" FCM Community plugin initialized")}catch(s){console.warn(" FCM Community plugin not available:",s)}await this.getFCMToken(),console.log(" FCM Service initialized successfully")}catch(t){console.error(" FCM initialization failed:",t)}}checkForAutoOpenOrder(){try{const t=localStorage.getItem("autoOpenOrder");if(t){const s=JSON.parse(t);Date.now()-s.timestamp<3e4?(console.log(" AUTO-OPENING ORDER FROM NOTIFICATION:",s),localStorage.removeItem("autoOpenOrder"),this.startOrderBeeping(),setTimeout(()=>{this.showOrderModalImmediately(s)},1e3)):localStorage.removeItem("autoOpenOrder")}window.addEventListener("autoOpenedFromBackground",s=>{console.log(" APP AUTO-OPENED FROM BACKGROUND SERVICE:",s.detail),this.startOrderBeeping(),setTimeout(()=>{this.showOrderModalImmediately(s.detail)},500)})}catch(t){console.error("Error checking for auto-open order:",t)}}async getFCMToken(){try{return vt.isNativePlatform()?new Promise(t=>{xo.addListener("registration",s=>{this.fcmToken=s.value,console.log(" FCM Token (Native):",s.value),this.sendTokenToBackend(),t(s.value)})}):null}catch(t){return console.error("Failed to get FCM token:",t),null}}setupListeners(){xo.addListener("pushNotificationReceived",t=>{var s,r,i;if(console.log(" Push notification received:",t),console.log(" Notification data:",t.data),((s=t.data)==null?void 0:s.autoOpen)==="true"||((r=t.data)==null?void 0:r.action)==="autoOpenOrder"){console.log(" AGGRESSIVE AUTO-OPENING APP FROM DATA MESSAGE!"),this.forceAppToForeground(),this.startOrderBeeping(),this.showOrderModalImmediately({orderId:parseInt(t.data.orderId),orderNumber:t.data.orderNumber,amount:t.data.amount,autoOpened:!0,fromPush:!0,startBeeping:!0,aggressive:!0}),this.triggerBackgroundAutoOpen(t.data);return}(i=t.data)!=null&&i.orderId?(console.log(` Showing order modal for order: ${t.data.orderId}`),this.startOrderBeeping(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(t.data.orderId),orderNumber:t.data.orderNumber,amount:t.data.amount,fromPush:!0,startBeeping:!0}}))):console.warn(" No orderId in notification data")}),xo.addListener("pushNotificationActionPerformed",t=>{var r,i,a,o,c;console.log(" NOTIFICATION TAPPED - AGGRESSIVE AUTO OPENING LIKE YANGO PRO:",t),console.log(" Notification data:",t.notification.data);const s=(r=t.notification.data)==null?void 0:r.orderId;s?(console.log(` AGGRESSIVE AUTO-OPENING FOR ORDER: ${s}`),this.startOrderBeeping(),localStorage.setItem("autoOpenOrder",JSON.stringify({orderId:parseInt(s),orderNumber:(i=t.notification.data)==null?void 0:i.orderNumber,amount:(a=t.notification.data)==null?void 0:a.amount,autoOpened:!0,fromPush:!0,startBeeping:!0,timestamp:Date.now()})),this.triggerAggressiveAutoOpen({orderId:parseInt(s),orderNumber:(o=t.notification.data)==null?void 0:o.orderNumber,amount:(c=t.notification.data)==null?void 0:c.amount})):(console.warn(" No orderId found in notification data"),this.triggerAggressiveAutoOpen({}))}),xo.addListener("registrationError",t=>{console.error(" Push registration error:",t)}),console.log(" FCM listeners set up successfully")}async sendTokenToBackend(){if(!this.fcmToken){console.warn("No FCM token available to send");return}try{await this.waitForAuth();const{apiRequest:t}=await We(async()=>{const{apiRequest:r}=await Promise.resolve().then(()=>Kn);return{apiRequest:r}},void 0),{response:s}=await t("/api/register-fcm-token/",{method:"POST",body:JSON.stringify({fcm_token:this.fcmToken,platform:vt.getPlatform()})});s.ok?console.log(" FCM token sent to backend successfully"):console.warn(" Failed to register FCM token:",s.status)}catch(t){console.warn(" Failed to send FCM token:",t),setTimeout(()=>this.sendTokenToBackend(),5e3)}}async waitForAuth(t=1e4){const s=Date.now();for(;Date.now()-s<t;){try{const{authService:r}=await We(async()=>{const{authService:a}=await Promise.resolve().then(()=>Zo);return{authService:a}},void 0);if(r.getToken()){console.log(" Authentication ready for FCM token registration");return}}catch{}await new Promise(r=>setTimeout(r,500))}console.warn(" Authentication not ready, sending FCM token anyway")}showOrderModalImmediately(t){console.log(" SHOWING ORDER MODAL IMMEDIATELY:",t),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t}))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t}))},1500)}async forceAppToForeground(){try{console.log(" FORCING APP TO FOREGROUND..."),window.focus&&window.focus(),document.hidden&&document.dispatchEvent(new Event("visibilitychange")),Object.defineProperty(document,"hidden",{value:!1,writable:!1}),Object.defineProperty(document,"visibilityState",{value:"visible",writable:!1}),window.dispatchEvent(new Event("focus")),document.dispatchEvent(new Event("visibilitychange"))}catch(t){console.warn("Could not force app focus:",t)}}triggerBackgroundAutoOpen(t){try{if(vt.isNativePlatform()){const s={action:"com.ezeyway.app.AUTO_OPEN_ORDER",extras:{orderId:t.orderId,orderNumber:t.orderNumber,amount:t.amount,autoOpened:!0}};console.log(" Triggering background auto-open:",s)}}catch(s){console.error("Failed to trigger background auto-open:",s)}}async triggerAggressiveAutoOpen(t){try{console.log(" TRIGGERING AGGRESSIVE AUTO-OPEN..."),this.forceAppToForeground(),window.location.replace("/vendor/home");for(let s=0;s<5;s++)setTimeout(()=>{this.showOrderModalImmediately({...t,autoOpened:!0,fromPush:!0,startBeeping:!0,aggressive:!0})},s*500)}catch(s){console.error("Failed to trigger aggressive auto-open:",s)}}async startOrderBeeping(){try{console.log(" Starting order notification beeping...");const{notificationService:t}=await We(async()=>{const{notificationService:i}=await Promise.resolve().then(()=>VE);return{notificationService:i}},void 0);await t.playNotificationSound();try{const{Haptics:i,ImpactStyle:a}=await We(async()=>{const{Haptics:d,ImpactStyle:f}=await import("./index-D5MbxSxR.js");return{Haptics:d,ImpactStyle:f}},[]);await i.impact({style:a.Heavy});let o=0;const c=setInterval(async()=>{o<5?(await i.impact({style:a.Medium}),o++):clearInterval(c)},2e3)}catch(i){console.warn("Haptics not available:",i)}let s=0;const r=setInterval(async()=>{s<5?(await t.playNotificationSound(),s++):clearInterval(r)},3e3)}catch(t){console.error("Failed to start order beeping:",t)}}getFCMTokenValue(){return this.fcmToken}async registerToken(){this.fcmToken?await this.sendTokenToBackend():console.warn("No FCM token available to register")}}const s0=new ose,_2=()=>{var B,Z,se;const e=nt(),[t,s]=j.useState(!0),[r,i]=j.useState(!1),{pendingOrdersCount:a,isModalOpen:o}=sse(),[c,d]=j.useState(null),[f,m]=j.useState(0),[h,u]=j.useState({totalOrders:0,totalRevenue:0,totalProducts:0,totalCustomers:0,monthlyEarnings:0,monthlyGrowth:0,todaysEarnings:0}),[p,x]=j.useState([]),[v,w]=j.useState([]),[y,b]=j.useState([]),[_,N]=j.useState([]),[k,I]=j.useState([0,0,0,0,0,0]),[C,T]=j.useState([]),[M,P]=j.useState(!0),[E,A]=j.useState(1),[z,O]=j.useState(!0),[$,G]=j.useState(0),[X,Y]=j.useState(0),U=C.length>0?[C[C.length-1],...C,C[0]]:[];j.useEffect(()=>{if(C.length>0){const J=setInterval(()=>{A(ie=>ie+1)},4e3);return()=>clearInterval(J)}},[C.length]),j.useEffect(()=>{C.length>0&&(E===U.length-1?setTimeout(()=>{O(!1),A(1),setTimeout(()=>O(!0),50)},500):E===0&&setTimeout(()=>{O(!1),A(C.length),setTimeout(()=>O(!0),50)},500))},[E,C.length]);const V=J=>{Y(0),G(J.targetTouches[0].clientX)},R=J=>{Y(J.targetTouches[0].clientX)},F=()=>{if(!$||!X)return;const J=$-X,ie=J>50,le=J<-50;ie&&E<C.length&&A(Q=>Q+1),le&&E>1&&A(Q=>Q-1)};j.useEffect(()=>{i(!0),s(!1),vt.isNativePlatform()&&s0.initialize().then(()=>{console.log(" FCM Service initialized on vendor home"),setTimeout(()=>{s0.registerToken()},2e3)}).catch(J=>{console.error(" FCM Service initialization failed:",J)}),q(),W()},[]);const q=async()=>{var J;try{const{apiRequest:ie}=await We(async()=>{const{apiRequest:pe}=await Promise.resolve().then(()=>Kn);return{apiRequest:pe}},void 0),{response:le,data:Q}=await ie("/vendor-profiles/");le.ok&&((J=Q==null?void 0:Q.results)!=null&&J[0])&&d(Q.results[0]);const{response:ue,data:_e}=await ie("accounts/wallet/");ue.ok&&_e&&m(parseFloat(_e.balance)||0);const{response:me,data:Se}=await ie("/vendor/orders/");if(console.log("Orders response:",me.ok,Se),me.ok&&Se){const pe=Se.results||Se||[];console.log("Orders found:",pe.length,pe);const te=pe.length,ae=pe.filter(ze=>ze.status==="delivered");console.log("Delivered orders:",ae.length,ae);const oe=ae.reduce((ze,He)=>ze+parseFloat(He.total_amount||0),0),be=new Date().toDateString(),je=pe.filter(ze=>new Date(ze.created_at).toDateString()===be),re=pe.filter(ze=>new Date(ze.created_at).toDateString()===be&&ze.status==="delivered").reduce((ze,He)=>ze+parseFloat(He.total_amount||0),0);console.log("Today earnings:",re,"Total revenue:",oe);const Pe=new Date().getMonth(),Ae=new Date().getFullYear(),it=pe.filter(ze=>{const He=new Date(ze.created_at);return He.getMonth()===Pe&&He.getFullYear()===Ae&&ze.status==="delivered"}).reduce((ze,He)=>ze+parseFloat(He.total_amount||0),0),Ft=[];for(let ze=5;ze>=0;ze--){const He=new Date;He.setMonth(He.getMonth()-ze);const Bt=pe.filter(Et=>{const Cn=new Date(Et.created_at);return Cn.getMonth()===He.getMonth()&&Cn.getFullYear()===He.getFullYear()&&Et.status==="delivered"}).reduce((Et,Cn)=>Et+parseFloat(Cn.total_amount||0),0);Ft.push(Bt)}const zs=new Set;pe.forEach(ze=>{var He;(He=ze.customer_details)!=null&&He.id?zs.add(ze.customer_details.id):ze.delivery_phone&&zs.add(ze.delivery_phone)});const ce=zs.size;u({totalOrders:te,totalRevenue:oe,totalProducts:0,totalCustomers:ce,monthlyEarnings:it,monthlyGrowth:15,todaysEarnings:re}),I(Ft),x(je.slice(0,5));const $e={};ae.forEach(ze=>{var He;(He=ze.items)==null||He.forEach(Ge=>{var Et,Cn;const Bt=((Et=Ge.product_details)==null?void 0:Et.id)||Ge.product_name;$e[Bt]||($e[Bt]={id:Bt,name:Ge.product_name,price:Ge.unit_price,sold:0,rating:4.5,images:((Cn=Ge.product_details)==null?void 0:Cn.images)||[]}),$e[Bt].sold+=parseInt(Ge.quantity)||0})});const Je=Object.values($e).sort((ze,He)=>He.sold-ze.sold).slice(0,6);w(Je)}const{response:xe,data:he}=await ie("products/");if(xe.ok&&he){const pe=he.results||he||[];N(pe.slice(0,6)),u(ae=>({...ae,totalProducts:pe.length}));const te=pe.filter(ae=>ae.featured).slice(0,6);b(te)}}catch(ie){console.warn("Dashboard data fetch error:",ie)}},W=async()=>{try{const{apiRequest:J}=await We(async()=>{const{apiRequest:Q}=await Promise.resolve().then(()=>Kn);return{apiRequest:Q}},void 0),{response:ie,data:le}=await J("sliders/?user_type=vendor");ie.ok&&le&&le.sliders&&(T(le.sliders),le.sliders.length>0&&A(1))}catch(J){console.warn("Sliders fetch error:",J)}finally{P(!1)}},K=J=>{switch(J){case"pending":return{icon:rb,color:"red",bgColor:"red-50",textColor:"red-600",label:"Action Required"};case"confirmed":case"preparing":return{icon:dr,color:"orange",bgColor:"orange-50",textColor:"orange-600",label:"Processing"};case"delivered":return{icon:Qu,color:"green",bgColor:"green-50",textColor:"green-600",label:"Completed"};default:return{icon:dr,color:"blue",bgColor:"blue-50",textColor:"blue-600",label:"In Progress"}}};return t?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(qn,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),n.jsx("p",{className:"text-gray-600",children:"Verifying your account..."})]})}):r?n.jsxs(n.Fragment,{children:[n.jsx(ise,{}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/20 z-[9998] pointer-events-none"}),n.jsx(qt,{title:"Dashboard",children:n.jsxs("div",{className:`space-y-4 pb-16 max-w-full overflow-x-hidden ${o?"pointer-events-none":""}`,children:[n.jsxs("div",{className:"p-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ta,{className:"h-10 w-10",children:[n.jsx(Ir,{src:(B=c==null?void 0:c.user_info)==null?void 0:B.profile_picture}),n.jsx(na,{className:"bg-[#A98D7E] text-white",children:((Z=c==null?void 0:c.business_name)==null?void 0:Z[0])||((se=c==null?void 0:c.owner_name)==null?void 0:se[0])||"V"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:(c==null?void 0:c.business_name)||"My Store"}),n.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[n.jsx(sm,{className:"h-3 w-3"})," Rs",(f||0).toFixed(2)," Available"]})]})]}),n.jsxs(ne,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto flex items-center gap-1",onClick:()=>e("/vendor/wallet"),children:[n.jsx(sm,{className:"h-3 w-3"}),"Wallet"]})]}),n.jsx("div",{className:"px-4",children:n.jsxs("div",{className:"grid grid-cols-4 gap-1 sm:gap-2",children:[n.jsx(Te,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=orders"),children:n.jsx(Oe,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-5 h-5 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-1",children:n.jsx(At,{className:"h-2.5 w-2.5 text-teal-600"})}),n.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Orders"}),n.jsx("p",{className:"text-xs font-bold text-gray-900",children:h.totalOrders})]})})}),n.jsx(Te,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=revenue"),children:n.jsx(Oe,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-1",children:n.jsx(Vr,{className:"h-2.5 w-2.5 text-blue-600"})}),n.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Revenue"}),n.jsxs("p",{className:"text-xs font-bold text-gray-900",children:["Rs",h.totalRevenue.toFixed(0)]})]})})}),n.jsx(Te,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=products"),children:n.jsx(Oe,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-1",children:n.jsx(gs,{className:"h-2.5 w-2.5 text-purple-600"})}),n.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Products"}),n.jsx("p",{className:"text-xs font-bold text-gray-900",children:h.totalProducts})]})})}),n.jsx(Te,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=customers"),children:n.jsx(Oe,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-5 h-5 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-1",children:n.jsx(db,{className:"h-2.5 w-2.5 text-orange-600"})}),n.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Customers"}),n.jsx("p",{className:"text-xs font-bold text-gray-900",children:h.totalCustomers})]})})})]})}),n.jsx("div",{className:"mb-6",children:M?n.jsx("div",{className:"relative overflow-hidden rounded-2xl shadow-lg h-48 bg-gray-100 flex items-center justify-center mx-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[n.jsx(qn,{className:"h-5 w-5 animate-spin"}),n.jsx("span",{children:"Loading banners..."})]})}):C.length>0?n.jsxs("div",{className:"relative md:overflow-visible overflow-hidden md:px-8 mx-4 md:mx-0",children:[n.jsx("div",{className:`flex ${z?"transition-transform duration-500 ease-in-out":""}`,style:{transform:typeof window<"u"&&window.innerWidth<768?`translateX(calc(-${E*100}% + 100%))`:`translateX(calc(-${E*50}% + 25%))`},onTouchStart:V,onTouchMove:R,onTouchEnd:F,children:U.map((J,ie)=>{const le=typeof window<"u"&&window.innerWidth<768,Q=!le&&ie===E;return n.jsx("div",{className:`flex-shrink-0 relative cursor-pointer transition-all duration-300 ${le?"w-full rounded-2xl shadow-lg overflow-hidden":`${Q?"scale-100 opacity-100 z-10":"scale-75 opacity-60 z-0"} rounded-lg overflow-hidden`}`,style:le?{}:{width:"50%"},onClick:()=>{J.link_url&&window.open(J.link_url,"_blank")},children:n.jsx("div",{className:"relative h-48",children:J.image_url?n.jsx("img",{src:J.image_url,alt:J.title,className:"w-full h-full object-cover md:object-contain",onError:ue=>{ue.target.style.display="none",ue.target.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}):n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/80 to-purple-600/80 flex items-center justify-center",children:n.jsx("h3",{className:"text-white text-lg font-bold text-center px-4",children:J.title})})})},`${J.id}-${ie}`)})}),C.length>1&&n.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-1",children:C.map((J,ie)=>n.jsx("button",{onClick:()=>A(ie+1),className:`w-2 h-2 rounded-full transition-colors ${ie===(E-1+C.length)%C.length?"bg-blue-500":"bg-gray-300"}`},ie))})]}):n.jsx("div",{className:"h-48 bg-gray-100 rounded-2xl shadow-lg flex items-center justify-center mx-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:n.jsx(At,{className:"h-6 w-6 text-gray-400"})}),n.jsx("p",{className:"text-gray-500 text-sm",children:"No promotional banners available"})]})})}),n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Earnings"}),n.jsxs(ne,{variant:"outline",className:"text-gray-700 text-sm px-3 py-2 h-auto flex items-center gap-2",onClick:()=>e("/vendor/sales"),children:[n.jsx(Vr,{className:"h-4 w-4"}),"View Transactions",n.jsx(wP,{className:"h-4 w-4"})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Today's Earnings"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rs",(h.todaysEarnings||0).toFixed(2)]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Earnings"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["Rs",(h.totalRevenue||0).toFixed(2)]})]})]}),n.jsx(Te,{children:n.jsx(Oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Earning in ",new Date().toLocaleDateString("en-US",{month:"long"})]}),n.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["Rs",h.monthlyEarnings.toFixed(2)," ",n.jsxs("span",{className:"text-green-600",children:["+",h.monthlyGrowth,"%"]})]})]}),n.jsx("div",{className:"flex items-end gap-1 h-8",children:k.map((J,ie)=>{const le=Math.max(...k,1),Q=J>0?Math.max(4,J/le*24):2,ue=ie===k.length-1;return n.jsx("div",{className:`w-2 rounded-t ${ue?"bg-green-500":J>0?"bg-blue-400":"bg-gray-200"}`,style:{height:`${Q}px`}},ie)})})]})})})]}),n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Orders"}),n.jsx(ne,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",onClick:()=>e("/vendor/orders"),children:"View All"})]}),n.jsx("div",{className:`space-y-3 ${p.length>7?"max-h-96 overflow-y-auto":""}`,children:p.length===0?n.jsx(Te,{children:n.jsxs(Oe,{className:"p-6 text-center",children:[n.jsx(At,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-500",children:"No orders today"})]})}):p.map(J=>{var _e;const ie=K(J.status),le=ie.icon,Q=J.created_at?new Date(J.created_at):new Date,ue=Math.floor((Date.now()-Q.getTime())/(1e3*60));return n.jsx(Te,{className:`border-l-4 border-l-${ie.color}-500 cursor-pointer hover:shadow-md transition-shadow`,onClick:()=>e(`/vendor/orders?tab=${J.status}&orderId=${J.id}`),children:n.jsxs(Oe,{className:"p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(le,{className:`h-4 w-4 text-${ie.color}-500`}),n.jsx("span",{className:`text-xs font-medium text-${ie.textColor} bg-${ie.bgColor} px-2 py-1 rounded-full`,children:ie.label})]}),n.jsxs("span",{className:"text-xs text-gray-500",children:["#",J.order_number]})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:J.status==="pending"?"New order received":J.status==="delivered"?"Order delivered successfully":"Order in progress"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(J.total_amount||0).toFixed(2),"  ",((_e=J.items)==null?void 0:_e.length)||0," items  ",ue<60?`${ue} min ago`:`${Math.floor(ue/60)} hours ago`]})]})},J.id)})})]}),n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Best Selling Products"}),n.jsx(ne,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",children:"View All"})]}),n.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-3 overflow-x-auto md:overflow-visible",children:n.jsx("div",{className:"flex gap-3 pb-2 md:contents",children:v.map(J=>{var ie,le;return n.jsx(Te,{className:"w-32 flex-shrink-0 md:w-auto md:flex-shrink",children:n.jsx(Oe,{className:"md:p-2 p-3",children:n.jsxs("div",{className:"md:space-y-1 space-y-2",children:[n.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden",children:n.jsx("img",{src:((le=(ie=J.images)==null?void 0:ie[0])==null?void 0:le.image_url)||"/api/placeholder/80/80",alt:J.name,className:"w-full h-full object-cover"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:J.name}),n.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(J.price).toFixed(2)]})]}),n.jsxs("div",{className:"flex items-center justify-between md:text-[10px] text-xs",children:[n.jsxs("span",{className:"text-green-600 font-medium",children:[J.sold," sold"]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"md:h-2 md:w-2 h-3 w-3 text-yellow-400 fill-current"}),n.jsx("span",{className:"text-gray-600",children:J.rating})]})]}),n.jsxs("div",{className:"md:text-[10px] text-xs text-gray-500",children:["Stock: ",J.quantity]})]})})},J.id)})})})]}),y.length>0&&n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Featured Products"}),n.jsx(ne,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",children:"View All"})]}),n.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-3 overflow-x-auto md:overflow-visible",children:n.jsx("div",{className:"flex gap-3 pb-2 md:contents",children:y.map(J=>{var ie,le;return n.jsx(Te,{className:"w-32 flex-shrink-0 relative md:w-auto md:flex-shrink",children:n.jsx(Oe,{className:"md:p-2 p-3",children:n.jsxs("div",{className:"md:space-y-1 space-y-2",children:[n.jsxs("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden relative",children:[n.jsx("img",{src:((le=(ie=J.images)==null?void 0:ie[0])==null?void 0:le.image_url)||"/api/placeholder/80/80",alt:J.name,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white md:text-[10px] text-xs px-1 py-0.5 rounded-full font-bold shadow-md",children:""})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:J.name}),n.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(J.price).toFixed(2)]})]}),n.jsxs("div",{className:"flex items-center justify-between md:text-[10px] text-xs",children:[n.jsxs("span",{className:"text-blue-600 font-medium",children:[J.total_sold||0," sold"]}),n.jsx("span",{className:`px-1 py-0.5 rounded md:text-[10px] text-xs ${J.quantity>10?"bg-green-100 text-green-700":J.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:J.quantity>10?"In Stock":J.quantity>0?"Low":"Out"})]})]})})},J.id)})})})]}),n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Products"}),n.jsxs(ne,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto flex items-center gap-1",onClick:()=>e("/vendor/products"),children:[n.jsx(Nn,{className:"h-3 w-3"}),"Manage"]})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-w-full",children:_.map(J=>{var ie,le;return n.jsx(Te,{className:"overflow-hidden",children:n.jsx(Oe,{className:"md:p-2 p-3",children:n.jsxs("div",{className:"md:space-y-1 space-y-2",children:[n.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded overflow-hidden",children:n.jsx("img",{src:((le=(ie=J.images)==null?void 0:ie[0])==null?void 0:le.image_url)||"/api/placeholder/60/60",alt:J.name,className:"w-full h-full object-cover"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:J.name}),n.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(J.price).toFixed(2)]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"md:text-[10px] text-xs text-gray-500",children:["Stock: ",J.quantity]}),n.jsx("span",{className:`md:text-[10px] text-xs px-2 py-1 rounded-full ${J.quantity>10?"bg-green-100 text-green-700":J.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:J.quantity>10?"Active":J.quantity>0?"Low Stock":"Out of Stock"})]})]})})},J.id)})})]})]})})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[n.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(dr,{className:"h-8 w-8 text-yellow-600"})}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Account Under Review"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Your vendor application is being reviewed by our team. You'll receive an email notification once approved."}),n.jsx(ne,{onClick:()=>e("/vendor/onboarding"),variant:"outline",className:"w-full",children:"Back to Application"})]})})},YL=j.forwardRef(({className:e,...t},s)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:s,className:Ze("w-full caption-bottom text-sm",e),...t})}));YL.displayName="Table";const XL=j.forwardRef(({className:e,...t},s)=>n.jsx("thead",{ref:s,className:Ze("[&_tr]:border-b",e),...t}));XL.displayName="TableHeader";const QL=j.forwardRef(({className:e,...t},s)=>n.jsx("tbody",{ref:s,className:Ze("[&_tr:last-child]:border-0",e),...t}));QL.displayName="TableBody";const lse=j.forwardRef(({className:e,...t},s)=>n.jsx("tfoot",{ref:s,className:Ze("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));lse.displayName="TableFooter";const r0=j.forwardRef(({className:e,...t},s)=>n.jsx("tr",{ref:s,className:Ze("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));r0.displayName="TableRow";const Ii=j.forwardRef(({className:e,...t},s)=>n.jsx("th",{ref:s,className:Ze("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Ii.displayName="TableHead";const Di=j.forwardRef(({className:e,...t},s)=>n.jsx("td",{ref:s,className:Ze("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Di.displayName="TableCell";const cse=j.forwardRef(({className:e,...t},s)=>n.jsx("caption",{ref:s,className:Ze("mt-4 text-sm text-muted-foreground",e),...t}));cse.displayName="TableCaption";const Td=[{id:"ORD-001",customer:"John Doe",product:"Wireless Headphones",quantity:2,amount:"4,998",status:"Pending",date:"2024-01-15",address:"123 Main St, City"},{id:"ORD-002",customer:"Jane Smith",product:"Smart Watch",quantity:1,amount:"12,999",status:"Processing",date:"2024-01-14",address:"456 Oak Ave, City"},{id:"ORD-003",customer:"Mike Johnson",product:"Laptop Stand",quantity:3,amount:"2,997",status:"Shipped",date:"2024-01-13",address:"789 Pine Rd, City"},{id:"ORD-004",customer:"Sarah Wilson",product:"Bluetooth Speaker",quantity:1,amount:"3,499",status:"Delivered",date:"2024-01-12",address:"321 Elm St, City"}],N2={Pending:"bg-yellow-100 text-yellow-800",Processing:"bg-blue-100 text-blue-800",Shipped:"bg-purple-100 text-purple-800",Delivered:"bg-green-100 text-green-800"};function dse(){const e=nt(),[t,s]=j.useState(""),[r,i]=j.useState("all"),[a,o]=j.useState(!1),[c,d]=j.useState("Tools"),f=Td.filter(m=>{const h=m.customer.toLowerCase().includes(t.toLowerCase())||m.product.toLowerCase().includes(t.toLowerCase())||m.id.toLowerCase().includes(t.toLowerCase()),u=r==="all"||m.status.toLowerCase()===r.toLowerCase();return h&&u});return n.jsx(qt,{title:"Tools",children:n.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 pt-1 pb-16",children:[n.jsx("div",{className:"bg-white p-4 border-b mb-4",children:n.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:n.jsx(xn,{className:"h-6 w-6 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Business Tools"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Manage your products, orders, and business operations"})]})]}),n.jsxs(Fo,{open:a,onOpenChange:o,children:[n.jsx(Sy,{asChild:!0,children:n.jsxs(ne,{size:"sm",children:[n.jsx(xn,{className:"mr-2 h-4 w-4"})," Create Order"]})}),n.jsxs(Fa,{className:"sm:max-w-[500px] rounded-lg",children:[n.jsxs($a,{children:[n.jsx(za,{className:"text-lg font-semibold",children:"Create New Order"}),n.jsx(s4,{className:"text-sm text-gray-600",children:"Fill in the details below to create a new order for your customer."})]}),n.jsxs("div",{className:"grid gap-3 py-3",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"customer",className:"text-sm font-medium",children:"Customer Name"}),n.jsx(ve,{id:"customer",placeholder:"Enter customer name",className:"h-9"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"product",className:"text-sm font-medium",children:"Product"}),n.jsxs(Vt,{children:[n.jsx($t,{className:"h-9",children:n.jsx(Ut,{placeholder:"Select product"})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"headphones",children:"Wireless Headphones"}),n.jsx(qe,{value:"watch",children:"Smart Watch"}),n.jsx(qe,{value:"stand",children:"Laptop Stand"}),n.jsx(qe,{value:"speaker",children:"Bluetooth Speaker"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"quantity",className:"text-sm font-medium",children:"Quantity"}),n.jsx(ve,{id:"quantity",type:"number",placeholder:"1",className:"h-9"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"amount",className:"text-sm font-medium",children:"Amount"}),n.jsx(ve,{id:"amount",placeholder:"0.00",className:"h-9"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"address",className:"text-sm font-medium",children:"Delivery Address"}),n.jsx(Xn,{id:"address",placeholder:"Enter delivery address",className:"h-20"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{htmlFor:"notes",className:"text-sm font-medium",children:"Notes"}),n.jsx(Xn,{id:"notes",placeholder:"Any special instructions...",className:"h-16"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>o(!1),children:"Cancel"}),n.jsx(ne,{size:"sm",onClick:()=>o(!1),children:"Create Order"})]})]})]})]})}),n.jsxs(Te,{className:"mb-4 border border-gray-200",children:[n.jsx(wt,{className:"bg-gray-50 border-b border-gray-200 p-3",children:n.jsxs(jt,{className:"flex items-center gap-2 text-base",children:[n.jsx("div",{className:"p-1.5 bg-white rounded-md shadow-sm",children:n.jsx(xn,{className:"h-4 w-4 text-gray-700"})}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-900 font-bold text-sm",children:"Business Functions"}),n.jsx("p",{className:"text-xs text-gray-600 font-normal mt-0.5",children:"Manage your core business operations"})]})]})}),n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-2",children:[n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/add-products"),children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:""})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Add Products"}),n.jsx(De,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full text-[10px]",children:"New"})]}),n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/products"),children:[n.jsx("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-green-200 group-hover:to-green-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:""})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Products"}),n.jsx(De,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full text-[10px]",children:"New"})]}),n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/orders"),children:[n.jsx("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-purple-200 group-hover:to-purple-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:""})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Orders"})]}),n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/return-orders"),children:[n.jsx("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-orange-200 group-hover:to-orange-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:""})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Return Order"})]}),n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/reviews"),children:[n.jsx("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-yellow-200 group-hover:to-yellow-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:""})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Manage Reviews"})]}),n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/income"),children:[n.jsx("div",{className:"bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-emerald-200 group-hover:to-emerald-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:""})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"My Income"})]})]})})]}),n.jsxs(Te,{className:"mb-4 rounded-lg border border-gray-200",children:[n.jsx(wt,{className:"bg-gray-50 p-3 border-b border-gray-200",children:n.jsx(jt,{className:"text-base font-semibold text-gray-900",children:"Business Upgrading"})}),n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-lg p-2 flex-shrink-0",children:n.jsx("span",{className:"text-lg",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-700 font-medium",children:"Business Advisor"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Get expert guidance"})]}),n.jsx(De,{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"New"})]})})]}),n.jsx(Te,{className:"mb-4 rounded-lg border border-gray-200",children:n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Lo,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),n.jsx(ve,{placeholder:"Search orders...",value:t,onChange:m=>s(m.target.value),className:"pl-8 h-9 text-sm"})]})}),n.jsxs(Vt,{value:r,onValueChange:i,children:[n.jsxs($t,{className:"w-full sm:w-[160px] h-9 text-sm",children:[n.jsx(_i,{className:"mr-2 h-3 w-3"}),n.jsx(Ut,{placeholder:"Filter by status"})]}),n.jsxs(zt,{children:[n.jsx(qe,{value:"all",children:"All Status"}),n.jsx(qe,{value:"pending",children:"Pending"}),n.jsx(qe,{value:"processing",children:"Processing"}),n.jsx(qe,{value:"shipped",children:"Shipped"}),n.jsx(qe,{value:"delivered",children:"Delivered"})]})]})]})})}),n.jsxs(Te,{className:"hidden md:block mb-4 rounded-lg border border-gray-200",children:[n.jsx(wt,{className:"p-4",children:n.jsx(jt,{className:"text-base font-semibold",children:"Recent Orders"})}),n.jsx(Oe,{className:"p-4",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(YL,{children:[n.jsx(XL,{children:n.jsxs(r0,{children:[n.jsx(Ii,{className:"text-xs",children:"Order ID"}),n.jsx(Ii,{className:"text-xs",children:"Customer"}),n.jsx(Ii,{className:"text-xs",children:"Product"}),n.jsx(Ii,{className:"text-xs",children:"Qty"}),n.jsx(Ii,{className:"text-xs",children:"Amount"}),n.jsx(Ii,{className:"text-xs",children:"Status"}),n.jsx(Ii,{className:"text-xs",children:"Date"}),n.jsx(Ii,{className:"text-right text-xs",children:"Actions"})]})}),n.jsx(QL,{children:f.slice(0,3).map(m=>n.jsxs(r0,{className:"h-12",children:[n.jsx(Di,{className:"text-sm font-medium",children:m.id}),n.jsx(Di,{className:"text-sm",children:m.customer}),n.jsx(Di,{className:"text-sm",children:m.product}),n.jsx(Di,{className:"text-sm",children:m.quantity}),n.jsx(Di,{className:"text-sm",children:m.amount}),n.jsx(Di,{children:n.jsx(De,{className:`${N2[m.status]} text-xs px-2 py-1`,children:m.status})}),n.jsx(Di,{className:"text-sm",children:m.date}),n.jsx(Di,{className:"text-right",children:n.jsxs(bc,{children:[n.jsx(wc,{asChild:!0,children:n.jsx(ne,{variant:"ghost",className:"h-6 w-6 p-0",children:n.jsx(f1,{className:"h-3 w-3"})})}),n.jsxs(Go,{align:"end",children:[n.jsxs(po,{className:"text-xs",children:[n.jsx(nm,{className:"mr-2 h-3 w-3"})," Edit"]}),n.jsx(po,{className:"text-xs",children:"View Details"}),n.jsxs(po,{className:"text-red-600 text-xs",children:[n.jsx(qa,{className:"mr-2 h-3 w-3"})," Delete"]})]})]})})]},m.id))})]})})})]}),n.jsxs("div",{className:"md:hidden space-y-3",children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Recent Orders"}),f.slice(0,2).map(m=>n.jsxs(Te,{className:"p-3 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:m.id}),n.jsx("p",{className:"text-xs text-gray-600",children:m.customer})]}),n.jsx(De,{className:`${N2[m.status]} text-xs px-2 py-1`,children:m.status})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-600",children:"Product:"}),n.jsx("span",{className:"font-medium",children:m.product})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-600",children:"Qty:"}),n.jsx("span",{className:"font-medium",children:m.quantity})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-600",children:"Amount:"}),n.jsx("span",{className:"font-semibold text-orange-600",children:m.amount})]})]}),n.jsx("div",{className:"flex justify-end mt-3",children:n.jsxs(bc,{children:[n.jsx(wc,{asChild:!0,children:n.jsxs(ne,{variant:"outline",size:"sm",className:"h-7 text-xs border-gray-300",children:[n.jsx(f1,{className:"h-3 w-3 mr-1"})," Actions"]})}),n.jsxs(Go,{align:"end",children:[n.jsxs(po,{className:"text-xs",children:[n.jsx(nm,{className:"mr-2 h-3 w-3"})," Edit"]}),n.jsx(po,{className:"text-xs",children:"View Details"}),n.jsxs(po,{className:"text-red-600 text-xs",children:[n.jsx(qa,{className:"mr-2 h-3 w-3"})," Delete"]})]})]})})]},m.id))]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-4 mb-4",children:[n.jsxs(Te,{className:"rounded-lg border border-gray-200",children:[n.jsx(wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:n.jsx(jt,{className:"text-xs font-medium text-gray-900",children:"Total Orders"})}),n.jsxs(Oe,{className:"p-3 pt-0",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900",children:Td.length}),n.jsx("p",{className:"text-xs text-gray-600",children:"+2 from yesterday"})]})]}),n.jsxs(Te,{className:"rounded-lg border border-gray-200",children:[n.jsx(wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:n.jsx(jt,{className:"text-xs font-medium text-gray-900",children:"Pending"})}),n.jsxs(Oe,{className:"p-3 pt-0",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900",children:Td.filter(m=>m.status==="Pending").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Requires attention"})]})]}),n.jsxs(Te,{className:"rounded-lg border border-gray-200",children:[n.jsx(wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:n.jsx(jt,{className:"text-xs font-medium text-gray-900",children:"Processing"})}),n.jsxs(Oe,{className:"p-3 pt-0",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900",children:Td.filter(m=>m.status==="Processing").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"In progress"})]})]}),n.jsxs(Te,{className:"rounded-lg border border-gray-200",children:[n.jsx(wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:n.jsx(jt,{className:"text-xs font-medium text-gray-900",children:"Completed"})}),n.jsxs(Oe,{className:"p-3 pt-0",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900",children:Td.filter(m=>m.status==="Delivered").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Successfully delivered"})]})]})]}),n.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 md:hidden flex justify-around items-center p-3 shadow-md",children:[n.jsxs("button",{onClick:()=>d("Home"),className:`flex flex-col items-center text-gray-500 ${c==="Home"?"text-orange-500":""}`,children:[n.jsx("span",{className:"text-xl",children:""}),n.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),n.jsxs("button",{onClick:()=>d("Tools"),className:`flex flex-col items-center text-gray-500 ${c==="Tools"?"text-orange-500":""}`,children:[n.jsx("span",{className:"text-xl",children:""}),n.jsx("span",{className:"text-xs font-medium",children:"Tools"})]}),n.jsxs("button",{onClick:()=>d("Messages"),className:`flex flex-col items-center text-gray-500 ${c==="Messages"?"text-orange-500":""}`,children:[n.jsx("span",{className:"text-xl",children:""}),n.jsx("span",{className:"text-xs font-medium",children:"Messages"})]}),n.jsxs("button",{onClick:()=>d("Me"),className:`flex flex-col items-center text-gray-500 ${c==="Me"?"text-orange-500":""}`,children:[n.jsx("span",{className:"text-xl",children:""}),n.jsx("span",{className:"text-xs font-medium",children:"Me"})]})]})]})})}const use=()=>{const[e,t]=j.useState([]),[s,r]=j.useState(!0),[i,a]=j.useState("all"),[o,c]=j.useState(!1),[d,f]=j.useState(""),[m,h]=j.useState(""),[u,p]=j.useState(1),[x,v]=j.useState(1),[w,y]=j.useState(0),b=20,[_,N]=j.useState({totalSales:0,totalRefunds:0,netEarnings:0,todaySales:0,monthSales:0});j.useEffect(()=>{I()},[d,m,u]);const k=$=>{p($)},I=async()=>{try{r(!0);const $=new URLSearchParams({page:u.toString(),page_size:b.toString()});d&&$.append("date_from",d),m&&$.append("date_to",m);const{response:G,data:X}=await Ie(`/vendor/orders/?${$}`);if(G.ok&&X){const Y=X.results||X||[];v(Math.ceil((X.count||Y.length)/b)),y(X.count||Y.length);const U=[];Y.forEach(J=>{var ie,le,Q;J.status==="delivered"&&U.push({id:J.id,order_number:J.order_number,customer_name:((ie=J.customer_details)==null?void 0:ie.username)||J.delivery_name,amount:parseFloat(J.total_amount),type:"sale",status:"completed",created_at:J.created_at,items_count:((le=J.items)==null?void 0:le.length)||0}),((Q=J.refunds)==null?void 0:Q.length)>0&&J.refunds.forEach(ue=>{var _e,me;ue.status==="completed"&&U.push({id:`refund-${ue.id}`,order_number:J.order_number,customer_name:((_e=J.customer_details)==null?void 0:_e.username)||J.delivery_name,amount:-parseFloat(ue.approved_amount||ue.requested_amount),type:"refund",status:"completed",created_at:ue.completed_at||ue.created_at,items_count:((me=J.items)==null?void 0:me.length)||0})})}),U.sort((J,ie)=>new Date(ie.created_at).getTime()-new Date(J.created_at).getTime());let V=U;if(d&&m){const J=new Date(d),ie=new Date(m);ie.setHours(23,59,59,999),V=U.filter(le=>{const Q=new Date(le.created_at);return Q>=J&&Q<=ie})}t(V);const R=U.filter(J=>J.type==="sale").reduce((J,ie)=>J+ie.amount,0),F=Math.abs(U.filter(J=>J.type==="refund").reduce((J,ie)=>J+ie.amount,0)),q=R-F,W=new Date().toDateString(),K=U.filter(J=>new Date(J.created_at).toDateString()===W&&J.type==="sale").reduce((J,ie)=>J+ie.amount,0),B=new Date().getMonth(),Z=new Date().getFullYear(),se=U.filter(J=>{const ie=new Date(J.created_at);return ie.getMonth()===B&&ie.getFullYear()===Z&&J.type==="sale"}).reduce((J,ie)=>J+ie.amount,0);N({totalSales:R,totalRefunds:F,netEarnings:q,todaySales:K,monthSales:se})}}catch($){console.error("Error fetching sales data:",$)}finally{r(!1)}},C=$=>$==="all"?e:$==="sales"?e.filter(G=>G.type==="sale"):$==="refunds"?e.filter(G=>G.type==="refund"):e,T=()=>{const $=[["Date","Time","Type","Order Number","Customer","Amount","Status","Items"].join(","),...e.map(U=>[z(U.created_at),O(U.created_at),U.type,U.order_number,`"${U.customer_name}"`,Math.abs(U.amount).toFixed(2),U.status,U.items_count].join(","))].join(`
`),G=new Blob([$],{type:"text/csv"}),X=window.URL.createObjectURL(G),Y=document.createElement("a");Y.href=X,Y.download=`sales-report-${d||"all"}-${m||new Date().toISOString().split("T")[0]}.csv`,Y.click(),window.URL.revokeObjectURL(X)},M=()=>{const $=new Date().toLocaleDateString(),G=d&&m?`${d} to ${m}`:"All Time",X=`
===========================================
           SALES & EARNINGS REPORT
===========================================
Generated: ${$}
Period: ${G}

SUMMARY
-------------------------------------------
Total Sales: Rs${_.totalSales.toFixed(2)}
Total Refunds: Rs${_.totalRefunds.toFixed(2)}
Net Earnings: Rs${_.netEarnings.toFixed(2)}
Today's Sales: Rs${_.todaySales.toFixed(2)}
This Month: Rs${_.monthSales.toFixed(2)}

TRANSACTIONS (${e.length} records)
-------------------------------------------
${e.map(U=>`${z(U.created_at)} ${O(U.created_at)} | ${U.type.toUpperCase().padEnd(6)} | ${U.order_number.padEnd(12)} | Rs${Math.abs(U.amount).toFixed(2).padStart(8)} | ${U.customer_name}`).join(`
`)}

===========================================
    `,Y=window.open("","_blank");Y==null||Y.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${X}</pre>`),Y==null||Y.print()},P=()=>{const $=`Sales Report

Total Sales: Rs${_.totalSales.toFixed(2)}
Total Refunds: Rs${_.totalRefunds.toFixed(2)}
Net Earnings: Rs${_.netEarnings.toFixed(2)}

Transactions: ${e.length}`;if(navigator.share)navigator.share({title:"Sales Report",text:$});else{const G=`https://wa.me/?text=${encodeURIComponent($)}`;window.open(G,"_blank")}},E=()=>{p(1),I(),c(!1)},A=()=>{f(""),h(""),p(1),I(),c(!1)},z=$=>new Date($).toLocaleDateString(),O=$=>new Date($).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return n.jsx(qt,{title:"Sales & Earnings",children:n.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx(Te,{children:n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Vr,{className:"h-4 w-4 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",_.totalSales.toFixed(2)]})]})]})})}),n.jsx(Te,{children:n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(AP,{className:"h-4 w-4 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Total Refunds"}),n.jsxs("p",{className:"text-sm font-bold text-red-600",children:["Rs",_.totalRefunds.toFixed(2)]})]})]})})})]}),n.jsx(Te,{children:n.jsx(Oe,{className:"p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Net Earnings"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rs",_.netEarnings.toFixed(2)]}),n.jsxs("div",{className:"flex justify-between mt-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"Today"}),n.jsxs("p",{className:"font-semibold",children:["Rs",_.todaySales.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"This Month"}),n.jsxs("p",{className:"font-semibold",children:["Rs",_.monthSales.toFixed(2)]})]})]})]})})})]}),n.jsx("div",{className:"px-4",children:n.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sales Transactions"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:M,children:n.jsx(cb,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:T,children:n.jsx(Wl,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:P,children:n.jsx(Ho,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>c(!0),children:n.jsx(_i,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:I,children:n.jsx(yi,{className:"h-4 w-4"})})]})]}),n.jsxs(Si,{value:i,onValueChange:a,className:"w-full",children:[n.jsx("div",{className:"border-b border-gray-100 overflow-x-auto",children:n.jsxs(Hr,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[n.jsxs(Ct,{value:"all",className:"text-xs py-2 px-3",children:["All (",e.length,")"]}),n.jsxs(Ct,{value:"sales",className:"text-xs py-2 px-3",children:["Sales (",e.filter($=>$.type==="sale").length,")"]}),n.jsxs(Ct,{value:"refunds",className:"text-xs py-2 px-3",children:["Refunds (",e.filter($=>$.type==="refund").length,")"]})]})}),n.jsx(dt,{value:"all",className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:s?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(yi,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading transactions..."})]}):C("all").length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(At,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-500",children:"No transactions found"})]}):C("all").map($=>n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${$.type==="sale"?"bg-green-100":"bg-red-100"}`,children:$.type==="sale"?n.jsx(ju,{className:"h-5 w-5 text-green-600"}):n.jsx(_u,{className:"h-5 w-5 text-red-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[$.type==="sale"?"Sale":"Refund"," - ",$.order_number]}),n.jsxs("p",{className:"text-xs text-gray-600",children:[$.customer_name,"  ",$.items_count," items"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[z($.created_at)," at ",O($.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`text-sm font-bold ${$.type==="sale"?"text-green-600":"text-red-600"}`,children:[$.type==="sale"?"+":"","Rs",Math.abs($.amount).toFixed(2)]}),n.jsx(De,{variant:"default",className:"text-xs",children:$.status})]})]})},$.id))})}),n.jsx(dt,{value:"sales",className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:C("sales").map($=>n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(ju,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Sale - ",$.order_number]}),n.jsxs("p",{className:"text-xs text-gray-600",children:[$.customer_name,"  ",$.items_count," items"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[z($.created_at)," at ",O($.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+Rs",$.amount.toFixed(2)]}),n.jsx(De,{variant:"default",className:"text-xs",children:"completed"})]})]})},$.id))})}),n.jsx(dt,{value:"refunds",className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:C("refunds").map($=>n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(_u,{className:"h-5 w-5 text-red-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Refund - ",$.order_number]}),n.jsxs("p",{className:"text-xs text-gray-600",children:[$.customer_name,"  ",$.items_count," items"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[z($.created_at)," at ",O($.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-red-600",children:["Rs",Math.abs($.amount).toFixed(2)]}),n.jsx(De,{variant:"secondary",className:"text-xs",children:"refunded"})]})]})},$.id))})})]})]})}),x>1&&n.jsx("div",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(u-1)*b+1," to ",Math.min(u*b,w)," of ",w," transactions"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>k(u-1),disabled:u===1,children:"Previous"}),n.jsxs("span",{className:"text-sm font-medium",children:[u," of ",x]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>k(u+1),disabled:u===x,children:"Next"})]})]})}),n.jsx(Rs,{open:o,onOpenChange:c,children:n.jsxs(xs,{side:"right",className:"w-full sm:w-80",children:[n.jsx(ys,{className:"pb-4",children:n.jsx(bs,{children:"Filter by Date Range"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-sm font-medium mb-2 block",children:"From Date"}),n.jsx(ve,{type:"date",value:d,onChange:$=>f($.target.value),className:"h-9 text-sm"})]}),n.jsxs("div",{children:[n.jsx(fe,{className:"text-sm font-medium mb-2 block",children:"To Date"}),n.jsx(ve,{type:"date",value:m,onChange:$=>h($.target.value),className:"h-9 text-sm"})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(ne,{onClick:E,className:"flex-1",children:"Apply Filter"}),n.jsx(ne,{variant:"outline",onClick:A,className:"flex-1",children:"Clear"})]}),(d||m)&&n.jsx("div",{className:"pt-4 border-t",children:n.jsx("p",{className:"text-sm text-gray-600",children:d&&m?`Showing: ${d} to ${m}`:d?`From: ${d}`:m?`Until: ${m}`:""})})]})]})})]})})},hse=[{category:"Account",items:[{id:"profile",title:"Profile Management",subtitle:"Complete profile setup and management",icon:Mr,action:"navigate"},{id:"company",title:"Company Information",subtitle:"Business details and verification",icon:gs,action:"navigate"},{id:"security",title:"Security & Login",subtitle:"Password and authentication",icon:bi,action:"navigate"}]},{category:"Business",items:[{id:"products",title:"Product Management",subtitle:"Inventory, pricing, and catalog",icon:At,action:"navigate"},{id:"analytics",title:"Business Analytics",subtitle:"Sales reports and insights",icon:jP,action:"navigate"}]}];function fse(){const e=nt(),[t,s]=j.useState(null),[r,i]=j.useState(!0),[a,o]=j.useState(""),[c,d]=j.useState({businessName:"",ownerName:"",email:"",phone:"",address:"",description:"",avatar:"/api/placeholder/120/120",isOnline:!0,autoOnlineTime:"09:00",autoOfflineTime:"22:00",totalProducts:0,activeProducts:0,totalSales:0,monthlyRevenue:0});j.useEffect(()=>{f()},[]);const f=async()=>{try{const{simplePersistentAuth:p}=await We(async()=>{const{simplePersistentAuth:N}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:N}},[]);if(!await p.isVendorLoggedIn()){e("/vendor/login");return}const v=await p.getVendorAuth();v&&await ke.setAuth(v.token,v.user);const{response:w,data:y}=await Ie("/profile/");if(!w.ok)throw new Error("Failed to fetch user profile");const{response:b,data:_}=await Ie("/vendor-profiles/");if(b.ok&&_){if(_.results&&_.results.length>0){const N=_.results[0];d({businessName:N.business_name||"N/A",ownerName:N.owner_name||y.username,email:N.business_email||y.email,phone:N.business_phone||y.phone_number||"N/A",address:N.business_address||"N/A",description:N.description||"No description",avatar:y.profile_picture?(y.profile_picture.startsWith("http"),y.profile_picture):"/api/placeholder/120/120",isOnline:!0,autoOnlineTime:"09:00",autoOfflineTime:"22:00",totalProducts:24,activeProducts:22,totalSales:1250,monthlyRevenue:45e3})}}else d(N=>({...N,businessName:y.username,ownerName:y.username,email:y.email,phone:y.phone_number||"N/A",avatar:y.profile_picture?(y.profile_picture.startsWith("http"),y.profile_picture):"/api/placeholder/120/120"}))}catch(p){console.error("Error fetching profile:",p),o("Failed to load profile data")}finally{i(!1)}},[m,h]=j.useState({esewa:{enabled:!1,merchantId:"",secretKey:""},khalti:{enabled:!1,publicKey:"",secretKey:""}}),u=p=>{p==="profile"?e("/vendor/profile"):p==="security"?e("/vendor/security"):p==="company"?e("/vendor/company"):p==="products"?e("/vendor/products"):p==="analytics"?e("/vendor/analytics"):s(p)};return t?n.jsx(qt,{title:"Settings",children:n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"p-4",children:[n.jsx(ne,{variant:"ghost",onClick:()=>s(null),className:"mb-4",children:" Back to Settings"}),t==="analytics"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Business Analytics"}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Revenue Overview"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",c.monthlyRevenue.toLocaleString()]}),n.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),n.jsx("p",{className:"text-xs text-green-600",children:"+12% from last month"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",(c.monthlyRevenue*.85).toLocaleString()]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Last Month"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Previous period"})]})]})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Sales Metrics"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(At,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium",children:"Total Orders"})]}),n.jsx("p",{className:"text-xl font-bold",children:c.totalSales}),n.jsx("p",{className:"text-xs text-gray-600",children:"This month"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Vr,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium",children:"Avg Order Value"})]}),n.jsxs("p",{className:"text-xl font-bold",children:["",Math.round(c.monthlyRevenue/c.totalSales)]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Per order"})]})]})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Product Performance"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"Active Products"}),n.jsx("span",{className:"font-semibold",children:c.activeProducts})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"Total Products"}),n.jsx("span",{className:"font-semibold",children:c.totalProducts})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"Best Seller"}),n.jsx("span",{className:"font-semibold text-green-600",children:"Chicken Momo"})]})]})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Weekly Sales"}),n.jsx("div",{className:"flex items-end justify-between h-32 gap-2",children:[65,45,78,52,89,67,43].map((p,x)=>{const v=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],w=p/100*100;return n.jsxs("div",{className:"flex flex-col items-center flex-1",children:[n.jsx("div",{className:"w-full bg-blue-500 rounded-t mb-1",style:{height:`${w}px`}}),n.jsx("span",{className:"text-xs text-gray-600",children:v[x]})]},x)})})]})})]}),t==="payment"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Payment Settings"}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-green-600 font-bold text-lg",children:"eS"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"eSewa Integration"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Receive payments through eSewa"})]})]}),n.jsx(Zt,{checked:m.esewa.enabled,onCheckedChange:p=>h(x=>({...x,esewa:{...x.esewa,enabled:p}}))})]}),m.esewa.enabled&&n.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-sm font-medium",children:"Merchant ID"}),n.jsx(ve,{placeholder:"Enter your eSewa Merchant ID",value:m.esewa.merchantId,onChange:p=>h(x=>({...x,esewa:{...x.esewa,merchantId:p.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(fe,{className:"text-sm font-medium",children:"Secret Key"}),n.jsx(ve,{type:"password",placeholder:"Enter your eSewa Secret Key",value:m.esewa.secretKey,onChange:p=>h(x=>({...x,esewa:{...x.esewa,secretKey:p.target.value}}))})]}),n.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Note:"})," You can get your eSewa API credentials from your eSewa merchant dashboard."]})})]})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"K"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Khalti Integration"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Receive payments through Khalti"})]})]}),n.jsx(Zt,{checked:m.khalti.enabled,onCheckedChange:p=>h(x=>({...x,khalti:{...x.khalti,enabled:p}}))})]}),m.khalti.enabled&&n.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-sm font-medium",children:"Public Key"}),n.jsx(ve,{placeholder:"Enter your Khalti Public Key",value:m.khalti.publicKey,onChange:p=>h(x=>({...x,khalti:{...x.khalti,publicKey:p.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(fe,{className:"text-sm font-medium",children:"Secret Key"}),n.jsx(ve,{type:"password",placeholder:"Enter your Khalti Secret Key",value:m.khalti.secretKey,onChange:p=>h(x=>({...x,khalti:{...x.khalti,secretKey:p.target.value}}))})]}),n.jsx("div",{className:"bg-purple-50 p-3 rounded-lg",children:n.jsxs("p",{className:"text-sm text-purple-800",children:[n.jsx("strong",{children:"Note:"})," You can get your Khalti API credentials from your Khalti merchant dashboard."]})})]})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Payment Status"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"eSewa Status"}),n.jsx(De,{className:m.esewa.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:m.esewa.enabled?"Active":"Inactive"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"Khalti Status"}),n.jsx(De,{className:m.khalti.enabled?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800",children:m.khalti.enabled?"Active":"Inactive"})]})]})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsx(ne,{className:"bg-blue-600 hover:bg-blue-700",children:"Save Payment Settings"})})]}),t==="notifications"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Notification Settings"}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Notification Preferences"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"New Orders"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Get notified when you receive new orders"})]}),n.jsx(Zt,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Payment Updates"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Notifications for payment confirmations"})]}),n.jsx(Zt,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Low Stock Alerts"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Alert when products are running low"})]}),n.jsx(Zt,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"System Updates"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Important system and policy updates"})]}),n.jsx(Zt,{})]})]})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Delivery Methods"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Push Notifications"}),n.jsx(Zt,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Email Notifications"}),n.jsx(Zt,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"SMS Notifications"}),n.jsx(Zt,{})]})]})]})})]})]})})}):r?n.jsx(qt,{title:"Settings",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):a?n.jsx(qt,{title:"Settings",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:a}),n.jsx(ne,{onClick:f,children:"Retry"})]})})}):n.jsx(qt,{title:"Settings",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b",children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsxs(ta,{className:"h-14 w-14",children:[n.jsx(Ir,{src:c.avatar}),n.jsx(na,{className:"text-lg font-bold",children:c.businessName?c.businessName.charAt(0):"U"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold",children:c.businessName||"Business Name"}),n.jsx("p",{className:"text-gray-500 text-xs",children:c.email})]}),n.jsx(De,{className:c.isOnline?"bg-green-100 text-green-800 text-xs":"bg-gray-100 text-gray-800 text-xs",children:c.isOnline?"Online":"Offline"})]})}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-100",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Account Type"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Switch between your Customer and Vendor accounts"})]})}),n.jsx(Cw,{})]}),hse.map(p=>n.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b bg-gray-50",children:n.jsx("h2",{className:"font-semibold text-gray-900",children:p.category})}),n.jsx("div",{className:"divide-y",children:p.items.map(x=>{const v=x.icon;return n.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>u(x.id),"data-section":x.id,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(v,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:x.title}),n.jsx("p",{className:"text-sm text-gray-600",children:x.subtitle})]})]}),n.jsx(pc,{className:"h-5 w-5 text-gray-400"})]})},x.id)})})]},p.category)),n.jsxs(ne,{variant:"outline",className:"w-full flex items-center justify-center py-6 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:async()=>{await ke.clearAuth(),e("/vendor/login")},children:[n.jsx(ob,{className:"h-5 w-5 mr-2"}),n.jsx("span",{className:"font-medium text-base",children:"Logout"})]})]})]})})}const S2=()=>{var O,$,G,X,Y;const[e,t]=j.useState(null),[s,r]=j.useState([]),[i,a]=j.useState([]),[o,c]=j.useState(""),[d,f]=j.useState(!0),[m,h]=j.useState(1),[u,p]=j.useState(!1),[x,v]=j.useState(!1),[w,y]=j.useState(null),[b,_]=j.useState(0),N=j.useRef(null),k=j.useRef(null);j.useEffect(()=>{I(),C();const V=new URLSearchParams(window.location.search).get("start_conversation");V&&setTimeout(()=>{A(parseInt(V))},500)},[]);const I=async()=>{try{if(!localStorage.getItem("token"))return;const{response:V,data:R}=await Ie("/profile/");V.ok&&R&&y(R)}catch(U){console.error("Failed to fetch current user:",U)}};j.useEffect(()=>{e&&M(e.id)},[e]),j.useEffect(()=>{if(e){const U=setInterval(async()=>{try{const V=await Hs.getMessages(e.id),R=Array.isArray(V)?V.reverse():[];a(R),_(R.length)}catch(V){console.error("Failed to fetch messages:",V)}},5e3);return()=>clearInterval(U)}},[e]);const C=async(U=1,V=!1)=>{try{const{response:R,data:F}=await Ie(`messaging/conversations/?page=${U}&page_size=20`);if(!R.ok)throw new Error("Failed to fetch conversations");const W=((F==null?void 0:F.results)||[]).filter((K,B,Z)=>B===Z.findIndex(se=>{var J,ie;return((J=se.other_participant)==null?void 0:J.id)===((ie=K.other_participant)==null?void 0:ie.id)}));if(U===1&&!W.some(B=>{var Z,se,J;return((Z=B.other_participant)==null?void 0:Z.username)==="admin"||((se=B.other_participant)==null?void 0:se.id)===1||((J=B.other_participant)==null?void 0:J.username)==="EzzeYway Support"})){const B={id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}};W.unshift(B)}r(V?K=>[...K,...W].filter((Z,se,J)=>se===J.findIndex(ie=>{var le,Q;return((le=ie.other_participant)==null?void 0:le.id)===((Q=Z.other_participant)==null?void 0:Q.id)})):W),p(!!(F!=null&&F.next)),h(U)}catch(R){console.error("Failed to load conversations:",R),U===1&&r([{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}}])}finally{f(!1),v(!1)}},T=async()=>{x||!u||(v(!0),await C(m+1,!0))},M=async U=>{try{const V=await Hs.getMessages(U),R=Array.isArray(V)?V.reverse():[];a(R),_(R.length)}catch(V){console.error("Failed to load messages:",V),a([]),_(0)}},P=async()=>{if(!(!o.trim()||!e))try{const U=await Hs.sendMessage({conversation_id:e.id,message_type:"text",content:o});a(V=>[...V,U.message]),c("")}catch(U){console.error("Failed to send message:",U)}},E=async U=>{var R;const V=(R=U.target.files)==null?void 0:R[0];if(!(!V||!e))try{const F=await Hs.sendMessage({conversation_id:e.id,message_type:V.type.startsWith("image/")?"image":"file",file:V});a(q=>[...q,F.message])}catch(F){console.error("Failed to send file:",F)}},A=async U=>{try{const V=await Hs.getOrCreateConversation(U);t(V);const R=new URL(window.location.href);R.searchParams.delete("start_conversation"),R.searchParams.delete("customer_name"),R.searchParams.delete("order_id"),window.history.replaceState({},"",R.toString())}catch(V){console.error("Failed to create conversation:",V)}},z=()=>{var U;(U=N.current)==null||U.scrollIntoView({behavior:"smooth"})};return j.useEffect(()=>{z()},[i]),d?n.jsx(qt,{title:"Messages",children:n.jsx("div",{className:"h-screen bg-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),n.jsx("p",{children:"Loading conversations..."})]})})}):e?n.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[n.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>t(null),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsxs(ta,{className:"h-10 w-10",children:[((O=e.other_participant)==null?void 0:O.username)==="EzzeYway Support"?n.jsx(Ir,{src:"/logo.png"}):n.jsx(Ir,{src:ls(($=e.other_participant)==null?void 0:$.profile_picture)}),n.jsx(na,{children:(X=(G=e.other_participant)==null?void 0:G.username)==null?void 0:X.charAt(0)})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-sm",children:(Y=e.other_participant)==null?void 0:Y.username}),n.jsx("p",{className:"text-xs text-gray-500",children:"Online"})]}),n.jsx(ne,{variant:"ghost",size:"sm",children:n.jsx(DD,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.map(U=>{const V=w&&U.sender.id===w.id;return n.jsx("div",{className:`w-full flex ${V?"justify-end":"justify-start"} mb-2`,children:n.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow ${V?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[U.message_type==="text"&&n.jsx("p",{className:"text-sm",children:U.content}),U.message_type==="image"&&n.jsx("div",{className:"space-y-2",children:n.jsx("img",{src:ls(U.file_url),alt:"Shared image",className:"rounded max-w-full h-auto"})}),U.message_type==="file"&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lr,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:U.file_name})]}),n.jsxs("div",{className:"flex items-center justify-end mt-1 gap-1",children:[n.jsx("span",{className:"text-xs text-gray-500",children:new Date(U.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),V&&n.jsx("span",{className:`text-xs ${U.is_read?"text-blue-500":"text-gray-400"}`,children:U.is_read?"":""})]})]})},U.id)}),n.jsx("div",{ref:N})]}),n.jsxs("div",{className:"bg-white border-t p-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{var U;return(U=k.current)==null?void 0:U.click()},children:n.jsx(Mx,{className:"h-4 w-4"})}),n.jsx(ve,{value:o,onChange:U=>c(U.target.value),placeholder:"Type a message...",className:"flex-1",onKeyPress:U=>U.key==="Enter"&&P()}),n.jsx(ne,{onClick:P,disabled:!o.trim(),children:n.jsx(PP,{className:"h-4 w-4"})})]}),n.jsx("input",{ref:k,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:E,className:"hidden"})]})]}):n.jsx(qt,{title:"Messages",children:n.jsxs("div",{className:"h-screen bg-white flex flex-col",children:[n.jsx("div",{className:"border-b p-4",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsx("h2",{className:"text-lg font-semibold",children:"Messages"})})}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[s.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(lb,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No conversations yet"}),n.jsx("p",{className:"text-sm",children:"Customers will message you here!"})]}):s.map(U=>{var V,R,F,q,W,K,B;return n.jsxs("div",{className:"flex items-center gap-3 p-4 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{U.id===0?A(1):t(U)},children:[n.jsxs("div",{className:"relative",children:[n.jsxs(ta,{className:"h-12 w-12",children:[((V=U.other_participant)==null?void 0:V.username)==="EzzeYway Support"?n.jsx(Ir,{src:"/logo.png"}):n.jsx(Ir,{src:ls((R=U.other_participant)==null?void 0:R.profile_picture)}),n.jsx(na,{children:(q=(F=U.other_participant)==null?void 0:F.username)==null?void 0:q.charAt(0)})]}),n.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-sm truncate",children:(W=U.other_participant)==null?void 0:W.username}),n.jsx("span",{className:"text-xs text-gray-500",children:U.last_message?new Date(U.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),n.jsx("p",{className:"text-sm text-gray-600 truncate",children:((K=U.last_message)==null?void 0:K.content)||((B=U.last_message)!=null&&B.file_name?` ${U.last_message.file_name}`:"")||(U.id===0?"Start conversation":"No messages yet")})]}),U.unread_count>0&&n.jsx(De,{className:"bg-blue-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center",children:U.unread_count})]},U.id)}),u&&n.jsx("div",{className:"p-4 text-center",children:n.jsx(ne,{onClick:T,disabled:x,variant:"outline",className:"w-full",children:x?"Loading...":"Load More Conversations"})})]})]})})},mse=()=>{var K,B,Z,se,J,ie,le;const[e,t]=j.useState(null),[s,r]=j.useState(2),[i,a]=j.useState(!1),[o,c]=j.useState(""),[d,f]=j.useState(""),[m,h]=j.useState(""),[u,p]=j.useState(""),[x,v]=j.useState(""),[w,y]=j.useState("all"),[b,_]=j.useState(1),[N,k]=j.useState([]),I=10,[C,T]=j.useState(!0),[M,P]=j.useState(!1),[E,A]=j.useState(""),[z,O]=j.useState(!1);qp(),j.useEffect(()=>{const Q=()=>{const ue=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768;O(ue)};return Q(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),j.useEffect(()=>{$();const Q=_e=>{_e.detail.type==="order"&&$()};window.addEventListener("newNotification",Q);let ue;return z||(ue=setInterval(()=>{$()},6e4)),()=>{window.removeEventListener("newNotification",Q),ue&&clearInterval(ue)}},[z]);const $=async()=>{try{T(!0);const{apiRequest:Q}=await We(async()=>{const{apiRequest:he}=await Promise.resolve().then(()=>Kn);return{apiRequest:he}},void 0),ue=new AbortController,_e=setTimeout(()=>ue.abort(),z?8e3:3e4),me=z?"/vendor/orders/?limit=50":"/vendor/orders/",{response:Se,data:xe}=await Q(me,{signal:ue.signal});if(clearTimeout(_e),Se.ok&&xe){const he=xe.results||xe||[];console.log(" Orders received:",he.length,he),k(he)}else console.error("Failed to fetch orders:",Se.status,xe),k([])}catch(Q){console.error("Error fetching vendor orders:",Q),k([])}finally{T(!1)}};j.useEffect(()=>{if(s>0){const Q=setInterval(()=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`${s} New Order${s>1?"s":""} Waiting!`,{icon:"/favicon.ico",body:"Please check and confirm your orders"})},6e4);return()=>clearInterval(Q)}},[s]),j.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]);const G=Q=>{switch(Q){case"new":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-orange-100 text-orange-800";case"pending":return"bg-yellow-100 text-yellow-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";case"returned":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},X=Q=>{switch(Q){case"new":return n.jsx(lr,{className:"h-3 w-3"});case"confirmed":return n.jsx(At,{className:"h-3 w-3"});case"pending":return n.jsx(Zl,{className:"h-3 w-3"});case"delivered":return n.jsx(Qu,{className:"h-3 w-3"});case"cancelled":return n.jsx(h1,{className:"h-3 w-3"});case"returned":return n.jsx(ai,{className:"h-3 w-3"});default:return n.jsx(At,{className:"h-3 w-3"})}},Y=Q=>Q==="all"?N:Q==="new"?N.filter(ue=>ue.status==="pending"):Q==="pending"?N.filter(ue=>ue.status==="out_for_delivery"):N.filter(ue=>ue.status===Q),U=(Q,ue,_e)=>{k(me=>me.map(Se=>Se.id===Q?{...Se,status:ue,isNew:ue==="new",estimatedTime:"Ready for delivery",..._e}:Se))},V=Q=>{const ue=z?15:I;if(w==="new")return z?Q.slice(0,ue):Q;const _e=(b-1)*ue,me=_e+ue;return Q.slice(_e,me)},R=Q=>Math.ceil(Q.length/I),F=Q=>{_(Q)},q=({orders:Q})=>{if(w==="new")return null;const ue=R(Q);return ue<=1?null:n.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[n.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(b-1)*I+1,"-",Math.min(b*I,Q.length)," of ",Q.length," orders"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>F(b-1),disabled:b===1,className:"h-7 w-7 p-0",children:n.jsx(NP,{className:"h-3 w-3"})}),n.jsx("div",{className:"flex gap-1",children:Array.from({length:ue},(_e,me)=>me+1).map(_e=>n.jsx(ne,{variant:b===_e?"default":"outline",size:"sm",onClick:()=>F(_e),className:"h-7 w-7 p-0 text-xs",children:_e},_e))}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>F(b+1),disabled:b===ue,className:"h-7 w-7 p-0",children:n.jsx(pc,{className:"h-3 w-3"})})]})]})},W=({order:Q})=>{var ue,_e,me,Se,xe,he,pe;return n.jsxs("div",{className:`p-4 ${Q.status==="pending"?"bg-blue-50 border-l-4 border-blue-500":((ue=Q.refunds)==null?void 0:ue.length)>0?"bg-orange-50 border-l-4 border-orange-400":"bg-white"} cursor-pointer hover:bg-gray-50 min-h-[120px]`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:Q.order_number}),Q.status==="pending"&&n.jsx(lr,{className:"h-3 w-3 text-blue-500 animate-pulse"})]}),n.jsxs(De,{className:`${G(Q.status)} flex items-center gap-1 text-xs px-2 py-1`,children:[X(Q.status),Q.status.charAt(0).toUpperCase()+Q.status.slice(1)]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2",children:[((_e=Q.items)==null?void 0:_e.length)||0," item",((me=Q.items)==null?void 0:me.length)!==1?"s":""]}),n.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[(Se=Q.items)==null?void 0:Se.slice(0,z?2:3).map((te,ae)=>{var oe,be,je,we;return n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center overflow-hidden",children:(je=(be=(oe=te.product_details)==null?void 0:oe.images)==null?void 0:be[0])!=null&&je.image_url?n.jsx("img",{src:ls(te.product_details.images[0].image_url),alt:te.product_name,className:"w-full h-full object-cover",loading:"lazy",onError:re=>{re.currentTarget.style.display="none",re.currentTarget.parentElement.innerHTML='<span class="text-xs text-gray-400"></span>'}}):n.jsx("span",{className:"text-xs text-gray-400",children:""})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:te.product_name}),n.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:((we=te.product_details)==null?void 0:we.category)||"Item"})]})]},ae)}),((xe=Q.items)==null?void 0:xe.length)>(z?2:3)&&n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center flex-shrink-0",children:n.jsxs("span",{className:"text-xs text-gray-600",children:["+",Q.items.length-(z?2:3)]})})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 flex-1 min-w-0",children:[n.jsx(Mr,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:((he=Q.customer_details)==null?void 0:he.username)||Q.delivery_name})]}),n.jsx(ne,{size:"sm",variant:"outline",className:"h-8 w-8 p-0 ml-2 flex-shrink-0",onClick:async te=>{var ae,oe,be,je;te.stopPropagation();try{const we=(ae=Q.customer_details)==null?void 0:ae.id;if(we)window.location.href=`/vendor/messages?start_conversation=${we}&customer_name=${encodeURIComponent(((oe=Q.customer_details)==null?void 0:oe.username)||Q.delivery_name)}&order_id=${Q.id}`;else{const re=((be=Q.customer_details)==null?void 0:be.phone_number)||Q.delivery_phone,Pe=((je=Q.customer_details)==null?void 0:je.username)||Q.delivery_name;window.location.href=`/vendor/messages?customer_phone=${encodeURIComponent(re)}&customer_name=${encodeURIComponent(Pe)}&order_id=${Q.id}`}}catch(we){console.error("Error opening conversation:",we)}},children:n.jsx(Ro,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Kt,{className:"h-4 w-4"}),n.jsx("span",{className:"truncate",children:Q.delivery_address})]}),Q.status==="delivered"&&Q.review&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(dn,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"}),n.jsxs("span",{className:"text-yellow-600 font-medium text-xs",children:["Rated ",Q.review.overall_rating,"/5"]})]}),((pe=Q.refunds)==null?void 0:pe.length)>0&&n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-2 mt-2",children:Q.refunds.map(te=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ai,{className:"h-4 w-4 text-orange-500"}),n.jsx("span",{className:"text-orange-700 font-medium text-xs capitalize",children:te.reason.replace("_"," ")})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${te.status==="requested"?"bg-yellow-100 text-yellow-800":te.status==="approved"?"bg-green-100 text-green-800":te.status==="rejected"?"bg-red-100 text-red-800":te.status==="appeal"?"bg-purple-100 text-purple-800":te.status==="processed"?"bg-blue-100 text-blue-800":te.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:te.status.charAt(0).toUpperCase()+te.status.slice(1)})]},te.id))}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[n.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(Q.total_amount).toFixed(2)]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>t(Q),children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"View"]}),Q.status==="pending"&&n.jsx(ne,{size:"sm",className:"h-7 text-xs bg-green-600 hover:bg-green-700",onClick:async te=>{te.stopPropagation();try{const{response:ae}=await Ie(`/orders/${Q.id}/accept/`,{method:"POST"});ae.ok&&($(),r(oe=>Math.max(0,oe-1)),window.dispatchEvent(new CustomEvent("walletUpdated")))}catch(ae){console.error("Error accepting order:",ae)}},children:"Accept"}),Q.status==="confirmed"&&n.jsx(ne,{size:"sm",className:"h-7 text-xs bg-blue-600 hover:bg-blue-700",onClick:te=>{te.stopPropagation(),t(Q),a(!0)},children:"Ship"}),Q.status==="out_for_delivery"&&n.jsx(ne,{size:"sm",className:"h-7 text-xs bg-green-600 hover:bg-green-700",onClick:async te=>{te.stopPropagation();try{const{response:ae}=await Ie(`/vendor/orders/${Q.id}/status/`,{method:"POST",body:JSON.stringify({status:"delivered",notes:"Marked as delivered by vendor"})});ae.ok&&$()}catch(ae){console.error("Error marking as delivered:",ae)}},children:"Delivered"})]})]})]})]})};return n.jsx(qt,{title:"Orders",children:n.jsxs("div",{className:"bg-gray-50 min-h-screen pb-20 max-w-full overflow-x-hidden",children:[C?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})]}):N.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(At,{className:"h-8 w-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),n.jsx("p",{className:"text-gray-500",children:"Orders will appear here when customers place them."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("div",{className:"flex gap-3 pb-2",children:[n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center border-l-4 border-blue-500",children:[n.jsx("p",{className:"text-xl font-bold text-blue-600",children:N.filter(Q=>Q.status==="pending").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"New Orders"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-yellow-600",children:N.filter(Q=>Q.status==="out_for_delivery").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Shipped"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-orange-600",children:N.filter(Q=>Q.status==="confirmed").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Confirmed"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-green-600",children:N.filter(Q=>Q.status==="delivered").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Delivered"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-gray-600",children:N.filter(Q=>Q.status==="cancelled").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Cancelled"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-orange-600",children:N.filter(Q=>{var ue;return((ue=Q.refunds)==null?void 0:ue.length)>0}).length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Returns"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-gray-600",children:N.length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Total"})]})]})})}),n.jsx("div",{className:"px-4",children:n.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-100",children:n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"})}),n.jsxs(Si,{value:w,onValueChange:Q=>{y(Q),_(1)},className:"w-full",children:[n.jsx("div",{className:"border-b border-gray-100 overflow-x-auto scrollbar-hide",children:n.jsxs(Hr,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[n.jsxs(Ct,{value:"all",className:"text-xs py-2 px-3 data-[state=active]:bg-gray-50 data-[state=active]:text-gray-600 data-[state=active]:border-b-2 data-[state=active]:border-gray-600 rounded-none whitespace-nowrap flex-shrink-0",children:["All ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.length,")"]})]}),n.jsxs(Ct,{value:"new",className:"text-xs py-2 px-3 data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 data-[state=active]:border-b-2 data-[state=active]:border-blue-600 rounded-none whitespace-nowrap flex-shrink-0",children:["New ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(Q=>Q.status==="pending").length,")"]})]}),n.jsxs(Ct,{value:"confirmed",className:"text-xs py-2 px-3 data-[state=active]:bg-orange-50 data-[state=active]:text-orange-600 data-[state=active]:border-b-2 data-[state=active]:border-orange-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Confirmed ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(Q=>Q.status==="confirmed").length,")"]})]}),n.jsxs(Ct,{value:"pending",className:"text-xs py-2 px-3 data-[state=active]:bg-yellow-50 data-[state=active]:text-yellow-600 data-[state=active]:border-b-2 data-[state=active]:border-yellow-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Shipped ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(Q=>Q.status==="out_for_delivery").length,")"]})]}),n.jsxs(Ct,{value:"delivered",className:"text-xs py-2 px-3 data-[state=active]:bg-green-50 data-[state=active]:text-green-600 data-[state=active]:border-b-2 data-[state=active]:border-green-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Delivered ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(Q=>Q.status==="delivered").length,")"]})]}),n.jsxs(Ct,{value:"returns",className:"text-xs py-2 px-3 data-[state=active]:bg-orange-50 data-[state=active]:text-orange-600 data-[state=active]:border-b-2 data-[state=active]:border-orange-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Returns ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(Q=>{var ue;return((ue=Q.refunds)==null?void 0:ue.length)>0}).length,")"]})]}),n.jsxs(Ct,{value:"cancelled",className:"text-xs py-2 px-3 data-[state=active]:bg-gray-50 data-[state=active]:text-gray-600 data-[state=active]:border-b-2 data-[state=active]:border-gray-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Cancelled ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(Q=>Q.status==="cancelled").length,")"]})]})]})}),n.jsxs(dt,{value:"all",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:V(N).map(Q=>n.jsx(W,{order:Q},Q.id))}),n.jsx(q,{orders:N})]}),n.jsxs(dt,{value:"new",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:V(Y("new")).map(Q=>n.jsx(W,{order:Q},Q.id))}),n.jsx(q,{orders:Y("new")})]}),n.jsxs(dt,{value:"confirmed",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:V(Y("confirmed")).map(Q=>n.jsx(W,{order:Q},Q.id))}),n.jsx(q,{orders:Y("confirmed")})]}),n.jsxs(dt,{value:"pending",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:V(Y("pending")).map(Q=>n.jsx(W,{order:Q},Q.id))}),n.jsx(q,{orders:Y("pending")})]}),n.jsxs(dt,{value:"delivered",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:V(Y("delivered")).map(Q=>n.jsx(W,{order:Q},Q.id))}),n.jsx(q,{orders:Y("delivered")})]}),n.jsx(dt,{value:"returns",className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:N.filter(Q=>{var ue;return((ue=Q.refunds)==null?void 0:ue.length)>0}).map(Q=>{var ue,_e;return n.jsxs("div",{className:"p-4 bg-white cursor-pointer hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:Q.order_number})}),n.jsxs(De,{className:"bg-orange-100 text-orange-800 flex items-center gap-1 text-xs px-2 py-1",children:[n.jsx(ai,{className:"h-3 w-3"}),"Return Request"]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Mr,{className:"h-4 w-4"}),n.jsx("span",{className:"truncate",children:((ue=Q.customer_details)==null?void 0:ue.username)||Q.delivery_name})]}),(_e=Q.refunds)==null?void 0:_e.map(me=>{var Se;return n.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium",children:"Return Reason:"}),n.jsx(De,{className:`text-xs ${me.status==="requested"?"bg-yellow-100 text-yellow-800":me.status==="approved"?"bg-green-100 text-green-800":me.status==="rejected"?"bg-red-100 text-red-800":me.status==="appeal"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:me.status.charAt(0).toUpperCase()+me.status.slice(1)})]}),n.jsx("p",{className:"text-xs text-gray-700 capitalize",children:me.reason.replace("_"," ")}),me.customer_notes&&n.jsxs("p",{className:"text-xs text-gray-600",children:['"',me.customer_notes,'"']}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Amount:"})," ",me.requested_amount]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Method:"})," ",me.refund_method]}),me.status==="requested"&&n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(ne,{size:"sm",variant:"outline",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50",onClick:async()=>{const xe=prompt("Reason for rejection:");if(xe)try{const{response:he}=await Ie(`/admin/refunds/${me.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reject",admin_notes:xe})});he.ok&&$()}catch(he){console.error("Error rejecting return:",he)}},children:"Reject"}),n.jsx(ne,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:async()=>{try{const{response:xe}=await Ie(`/admin/refunds/${me.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"approve",approved_amount:me.requested_amount,admin_notes:"Return approved by vendor"})});xe.ok&&$()}catch(xe){console.error("Error approving return:",xe)}},children:"Approve"})]}),me.status==="approved"&&n.jsxs("div",{className:"bg-green-50 p-2 rounded mt-2",children:[n.jsx("p",{className:"text-xs text-green-800 font-medium mb-2",children:"Return Approved - Process Refund"}),n.jsx(ne,{size:"sm",className:"w-full bg-blue-600 hover:bg-blue-700",onClick:async()=>{try{const{response:xe}=await Ie(`/admin/refunds/${me.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"process",admin_notes:"Money transferred to customer"})});xe.ok&&$()}catch(xe){console.error("Error processing refund:",xe)}},children:"Process Refund (Transfer Money)"})]}),me.status==="processed"&&n.jsxs("div",{className:"bg-blue-50 p-2 rounded mt-2",children:[n.jsx("p",{className:"text-xs text-blue-800 font-medium mb-2",children:"Money Transferred - Upload Proof"}),n.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:async xe=>{const he=xe.target.files[0];if(!he)return;const pe=new FormData;pe.append("document",he);try{const{response:te}=await Ie(`/refunds/${me.id}/upload-document/`,{method:"POST",body:pe});te.ok&&$()}catch(te){console.error("Error uploading document:",te)}},className:"w-full text-xs mb-2"}),n.jsx(ne,{size:"sm",className:"w-full bg-green-600 hover:bg-green-700",onClick:async()=>{try{const{response:xe}=await Ie(`/admin/refunds/${me.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"complete",admin_notes:"Refund completed successfully"})});xe.ok&&$()}catch(xe){console.error("Error completing refund:",xe)}},children:"Mark as Completed"})]}),me.status==="appeal"&&n.jsxs("div",{className:"bg-purple-50 p-2 rounded mt-2",children:[n.jsx("p",{className:"text-xs text-purple-800 font-medium",children:"Customer has appealed this decision"}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(ne,{size:"sm",variant:"outline",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50",onClick:async()=>{try{const{response:xe}=await Ie(`/admin/refunds/${me.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reject",admin_notes:"Appeal rejected - final decision"})});xe.ok&&$()}catch(xe){console.error("Error rejecting appeal:",xe)}},children:"Reject Appeal"}),n.jsx(ne,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:async()=>{try{const{response:xe}=await Ie(`/admin/refunds/${me.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"approve",approved_amount:me.requested_amount,admin_notes:"Appeal approved - refund processed"})});xe.ok&&$()}catch(xe){console.error("Error approving appeal:",xe)}},children:"Approve Appeal"})]})]}),((Se=me.evidence_photos)==null?void 0:Se.length)>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-xs font-medium mb-1",children:"Evidence Documents:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:me.evidence_photos.map((xe,he)=>{var ae;const pe=(ae=xe.filename)==null?void 0:ae.match(/\.(jpg|jpeg|png|gif|webp)$/i);let te;return xe.filename.startsWith("http")?te=xe.filename:xe.filename.startsWith("/media/")?te=`${os.BASE_URL}${xe.filename}`:te=`${os.BASE_URL}/media/${xe.filename}`,n.jsxs("div",{className:"bg-blue-100 p-2 rounded text-xs cursor-pointer hover:bg-blue-200 transition-colors flex items-center gap-1",onClick:()=>{pe?(A(te),P(!0)):window.open(te,"_blank")},children:[pe?n.jsx(Nn,{className:"h-3 w-3 text-blue-600"}):n.jsx(At,{className:"h-3 w-3 text-blue-600"}),n.jsx("span",{className:"text-blue-800",children:xe.filename||`Document ${he+1}`})]},he)})})]}),me.admin_notes&&n.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[n.jsx("span",{className:"font-medium",children:"Response:"})," ",me.admin_notes]})]},me.id)}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[n.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(Q.total_amount).toFixed(2)]}),n.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>t(Q),children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]})]},Q.id)})})}),n.jsxs(dt,{value:"cancelled",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:V(Y("cancelled")).map(Q=>n.jsx(W,{order:Q},Q.id))}),n.jsx(q,{orders:Y("cancelled")})]})]})]})})]}),n.jsx(Rs,{open:!!e,onOpenChange:()=>t(null),children:n.jsxs(xs,{side:"bottom",className:"h-[90vh] rounded-t-xl",children:[n.jsx(ys,{className:"pb-4",children:n.jsx(bs,{className:"text-left",children:(e==null?void 0:e.status)==="confirmed"&&i?"Ship Order":`Order Details - ${e==null?void 0:e.id}`})}),e&&n.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[e.status==="confirmed"&&i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[n.jsx(Mr,{className:"h-4 w-4"}),"Customer Details for Rider"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{var ue,_e,me;const Q=`Order ID: ${e.order_number}

Customer: ${((ue=e.customer_details)==null?void 0:ue.username)||e.delivery_name}

Phone: ${((_e=e.customer_details)==null?void 0:_e.phone_number)||e.delivery_phone}

Address: ${e.delivery_address}

Map Link: https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}

Total Amount: ${e.total_amount}

Payment: ${e.payment_method} (${e.payment_status})

Items:
${((me=e.items)==null?void 0:me.map(Se=>` ${Se.product_name} x${Se.quantity}`).join(`
`))||""}`;navigator.clipboard.writeText(Q)},children:[n.jsx(ID,{className:"h-3 w-3 mr-1"}),"Copy"]}),n.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{var ue,_e,me;const Q=`Order ID: ${e.order_number}

Customer: ${((ue=e.customer_details)==null?void 0:ue.username)||e.delivery_name}

Phone: ${((_e=e.customer_details)==null?void 0:_e.phone_number)||e.delivery_phone}

Address: ${e.delivery_address}

Map Link: https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}

Total Amount: ${e.total_amount}

Payment: ${e.payment_method} (${e.payment_status})

Items:
${((me=e.items)==null?void 0:me.map(Se=>` ${Se.product_name} x${Se.quantity}`).join(`
`))||""}`;if(navigator.share)navigator.share({title:"Delivery Details",text:Q});else{const Se=`https://wa.me/?text=${encodeURIComponent(Q)}`;window.open(Se,"_blank")}},children:[n.jsx(Ho,{className:"h-3 w-3 mr-1"}),"Share"]})]})]}),n.jsxs("div",{className:"space-y-2 text-xs bg-white rounded p-3",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Order ID:"})," ",e.order_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",((K=e.customer_details)==null?void 0:K.username)||e.delivery_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Phone:"})," ",((B=e.customer_details)==null?void 0:B.phone_number)||e.delivery_phone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Address:"})," ",e.delivery_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Map Link:"})," ",n.jsx("a",{href:`https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}`,target:"_blank",className:"text-blue-600 underline",children:"Open in Maps"})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Total Amount:"})," ",e.total_amount]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Payment:"})," ",e.payment_method," (",e.payment_status,")"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("span",{className:"font-medium",children:"Items:"}),n.jsx("ul",{className:"ml-2 mt-1",children:((Z=e.items)==null?void 0:Z.map((Q,ue)=>n.jsxs("li",{children:[" ",Q.product_name," x",Q.quantity]},ue)))||[]})]})]})]}),n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[n.jsx(Zl,{className:"h-4 w-4"}),"Delivery Information"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs(fe,{className:"text-xs font-medium text-gray-700",children:["Rider Phone Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ve,{value:o,onChange:Q=>c(Q.target.value),placeholder:"+977-98XXXXXXXX",className:"h-8 text-xs mt-1"})]}),n.jsxs("div",{children:[n.jsxs(fe,{className:"text-xs font-medium text-gray-700",children:["Vehicle Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ve,{value:d,onChange:Q=>f(Q.target.value),placeholder:"e.g., BA-1-PA-1234",className:"h-8 text-xs mt-1"})]}),n.jsxs("div",{children:[n.jsx(fe,{className:"text-xs font-medium text-gray-700",children:"Vehicle Color"}),n.jsx(ve,{value:m,onChange:Q=>h(Q.target.value),placeholder:"e.g., Red, Blue, White",className:"h-8 text-xs mt-1"})]}),n.jsxs("div",{children:[n.jsxs(fe,{className:"text-xs font-medium text-gray-700",children:["Estimated Delivery Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ve,{value:u,onChange:Q=>p(Q.target.value),placeholder:"e.g., 30-45 mins",className:"h-8 text-xs mt-1"})]}),n.jsxs("div",{children:[n.jsxs(fe,{className:"text-xs font-medium text-gray-700",children:["Delivery Fee ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ve,{type:"number",value:x,onChange:Q=>v(Q.target.value),placeholder:"e.g., 50",className:"h-8 text-xs mt-1"})]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[n.jsx(Mr,{className:"h-4 w-4"}),"Customer Information"]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",((se=e.customer_details)==null?void 0:se.username)||e.delivery_name]}),n.jsxs("p",{className:"flex items-center gap-1",children:[n.jsx(eh,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:"Phone:"})," ",((J=e.customer_details)==null?void 0:J.phone_number)||e.delivery_phone]}),n.jsxs("p",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:"Address:"})," ",e.delivery_address]}),n.jsxs("p",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:"Map:"}),n.jsx("a",{href:`https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}`,target:"_blank",className:"text-blue-600 underline text-xs",children:"View Location"})]})]})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[n.jsx(At,{className:"h-4 w-4"}),"Order Items"]}),n.jsx("div",{className:"space-y-2",children:((ie=e.items)==null?void 0:ie.map((Q,ue)=>{var _e,me,Se;return n.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center overflow-hidden flex-shrink-0",children:(Se=(me=(_e=Q.product_details)==null?void 0:_e.images)==null?void 0:me[0])!=null&&Se.image_url?n.jsx("img",{src:ls(Q.product_details.images[0].image_url),alt:Q.product_name,className:"w-full h-full object-cover",loading:"lazy",onError:xe=>{xe.currentTarget.style.display="none",xe.currentTarget.parentElement.innerHTML='<span class="text-xs text-gray-400"></span>'}}):n.jsx("span",{className:"text-xs text-gray-400",children:""})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:Q.product_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",Q.quantity]})]})]}),n.jsxs("p",{className:"text-sm font-semibold flex-shrink-0",children:["",Q.total_price]})]},ue)}))||[]})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[n.jsx(to,{className:"h-4 w-4"}),"Payment Details"]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["",e.subtotal]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Delivery Fee:"}),n.jsxs("span",{children:["",e.delivery_fee]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsxs("span",{children:["",e.tax_amount]})]}),n.jsx("hr",{className:"my-1"}),n.jsxs("div",{className:"flex justify-between font-semibold",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["",e.total_amount]})]}),n.jsxs("div",{className:"flex justify-between mt-2",children:[n.jsx("span",{children:"Payment Method:"}),n.jsx("span",{className:"capitalize",children:e.payment_method})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:"Payment Status:"}),n.jsx(De,{variant:e.payment_status==="paid"?"default":"secondary",className:"text-xs",children:e.payment_status})]})]})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[n.jsx(AD,{className:"h-4 w-4"}),"Order Timeline"]}),n.jsxs("div",{className:"text-xs space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Ordered:"})," ",new Date(e.created_at).toLocaleDateString()," at ",new Date(e.created_at).toLocaleTimeString()]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Order Number:"})," ",e.order_number]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Status:"}),n.jsx(De,{className:`${G(e.status)} text-xs`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]})]}),e.status==="delivered"&&e.review&&n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[n.jsx(dn,{className:"h-4 w-4"}),"Customer Review"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(Q=>n.jsx(dn,{className:`h-4 w-4 ${Q<=e.review.overall_rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},Q))}),n.jsxs("span",{className:"text-sm font-medium",children:[e.review.overall_rating,"/5"]})]}),e.review.review_text&&n.jsx("div",{className:"bg-white p-2 rounded text-xs",children:n.jsx("p",{className:"text-gray-700",children:e.review.review_text})}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Reviewed on ",new Date(e.review.created_at).toLocaleDateString()]})]})]}),e.status==="cancelled"&&e.cancelReason&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[n.jsx(h1,{className:"h-4 w-4"}),"Cancellation Details"]}),n.jsxs("div",{className:"space-y-2 text-xs",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),n.jsx("p",{className:"text-gray-600",children:e.cancelReason})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Cancelled By:"}),n.jsx("p",{className:"text-gray-600 capitalize",children:e.cancelledBy||"System"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Payment Status:"}),n.jsx(De,{className:`text-xs ${e.paymentStatus==="Refunded"?"bg-green-100 text-green-800":e.paymentStatus==="Cancelled"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:e.paymentStatus})]})]})]}),((le=e.refunds)==null?void 0:le.map(Q=>{var ue;return n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[n.jsx(ai,{className:"h-4 w-4"}),"Return/Refund Details"]}),n.jsxs("div",{className:"space-y-3 text-xs",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Status:"}),n.jsx(De,{className:`text-xs ${Q.status==="requested"?"bg-yellow-100 text-yellow-800":Q.status==="approved"?"bg-green-100 text-green-800":Q.status==="rejected"?"bg-red-100 text-red-800":Q.status==="appeal"?"bg-purple-100 text-purple-800":Q.status==="processed"?"bg-blue-100 text-blue-800":Q.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:Q.status.charAt(0).toUpperCase()+Q.status.slice(1)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),n.jsx("p",{className:"text-gray-600 capitalize",children:Q.reason.replace("_"," ")})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Requested Amount:"}),n.jsxs("p",{className:"text-gray-600",children:["",Q.requested_amount]})]}),Q.approved_amount&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Approved Amount:"}),n.jsxs("p",{className:"text-gray-600",children:["",Q.approved_amount]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Customer Refund Details:"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Method:"})," ",Q.refund_method]}),Q.refund_method==="esewa"&&Q.esewa_number&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"eSewa Number:"})," ",Q.esewa_number]}),Q.refund_method==="khalti"&&Q.khalti_number&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Khalti Number:"})," ",Q.khalti_number]}),Q.refund_method==="bank"&&n.jsxs("div",{children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Account Name:"})," ",Q.bank_account_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Account Number:"})," ",Q.bank_account_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Branch:"})," ",Q.bank_branch]})]})]})]}),Q.customer_notes&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Customer Notes:"}),n.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:Q.customer_notes})]}),Q.admin_notes&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Vendor Response:"}),n.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:Q.admin_notes})]}),((ue=Q.evidence_photos)==null?void 0:ue.length)>0&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Evidence Documents:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:Q.evidence_photos.map((_e,me)=>{var he;const Se=(he=_e.filename)==null?void 0:he.match(/\.(jpg|jpeg|png|gif|webp)$/i);let xe;return _e.filename.startsWith("http")?xe=_e.filename:xe=ls(_e.filename),n.jsxs("div",{className:"bg-white p-2 rounded border hover:shadow-md transition-shadow",children:[Se?n.jsxs("div",{className:"cursor-pointer mb-2 group",onClick:()=>{A(xe),P(!0)},children:[n.jsxs("div",{className:"relative overflow-hidden rounded",children:[n.jsx("img",{src:xe,alt:_e.filename,className:"w-full h-20 object-cover rounded mb-1 group-hover:scale-105 transition-transform",onError:pe=>{pe.currentTarget.src="/placeholder-image.svg",pe.currentTarget.alt="Image not found"}}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center",children:n.jsx(Nn,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),n.jsx("p",{className:"text-xs text-blue-600 font-medium",children:" Click to enlarge"})]}):n.jsx("div",{className:"w-full h-20 bg-gray-100 rounded mb-2 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>{window.open(xe,"_blank")},children:n.jsxs("div",{className:"text-center",children:[n.jsx(At,{className:"h-6 w-6 text-gray-400 mx-auto mb-1"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Document"})]})}),n.jsx("p",{className:"font-medium text-xs truncate",title:_e.filename,children:_e.filename||`Document ${me+1}`}),n.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",_e.uploaded_by]}),n.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",new Date(_e.uploaded_at).toLocaleDateString()]})]},me)})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500",children:[n.jsx("div",{children:n.jsxs("p",{children:["Requested: ",new Date(Q.requested_at).toLocaleDateString()]})}),Q.approved_at&&n.jsx("div",{children:n.jsxs("p",{children:["Approved: ",new Date(Q.approved_at).toLocaleDateString()]})}),Q.processed_at&&n.jsx("div",{children:n.jsxs("p",{children:["Processed: ",new Date(Q.processed_at).toLocaleDateString()]})}),Q.completed_at&&n.jsx("div",{children:n.jsxs("p",{children:["Completed: ",new Date(Q.completed_at).toLocaleDateString()]})}),Q.appeal_at&&n.jsx("div",{children:n.jsxs("p",{children:["Appealed: ",new Date(Q.appeal_at).toLocaleDateString()]})})]})]})]},Q.id)}))||[]]}),e.status==="new"&&n.jsxs("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:[n.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>t(null),children:"Reject"}),n.jsx(ne,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>{U(e.id,"confirmed"),r(Q=>Math.max(0,Q-1)),t(null)},children:"Accept Order"})]}),e.status==="confirmed"&&n.jsx("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>{a(!1),c(""),f(""),h(""),p(""),v("")},children:"Cancel"}),n.jsx(ne,{className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:!o||!d||!u||!x,onClick:async()=>{try{const{response:Q}=await Ie(`/vendor/orders/${e.id}/status/`,{method:"POST",body:JSON.stringify({status:"out_for_delivery",delivery_boy_phone:o,vehicle_number:d,vehicle_color:m,estimated_delivery_time:u,delivery_fee:parseFloat(x),notes:"Order shipped with delivery details"})});Q.ok&&($(),a(!1),c(""),f(""),h(""),p(""),v(""),t(null))}catch(Q){console.error("Error shipping order:",Q)}},children:"Confirm Ship"})]}):n.jsxs(ne,{className:"flex-1 bg-blue-600 hover:bg-blue-700",onClick:()=>a(!0),children:[n.jsx(Zl,{className:"h-4 w-4 mr-2"}),"Ship Order"]})})]})]})}),n.jsx(Fo,{open:M,onOpenChange:P,children:n.jsxs(Fa,{className:"max-w-5xl max-h-[95vh] p-4",children:[n.jsx($a,{className:"pb-4",children:n.jsxs(za,{className:"flex items-center gap-2",children:[n.jsx(Nn,{className:"h-5 w-5"}),"Evidence Document Preview"]})}),n.jsx("div",{className:"flex justify-center items-center bg-gray-50 rounded-lg p-4",children:n.jsx("img",{src:E,alt:"Evidence Preview",className:"max-w-full max-h-[75vh] object-contain rounded shadow-lg",onError:Q=>{Q.currentTarget.src="/placeholder-image.svg",Q.currentTarget.alt="Image not found"}})}),n.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>window.open(E,"_blank"),children:[n.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{const Q=document.createElement("a");Q.href=E,Q.download="evidence-document",Q.click()},children:[n.jsx(At,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})})]})})},bl={getProducts:async()=>{const{response:e,data:t}=await Ie("/products/");if(!e.ok)throw new Error("Failed to fetch products");return t},getProduct:async e=>{const{response:t,data:s}=await Ie(`/products/${e}/`);if(!t.ok)throw new Error("Failed to fetch product");return s},createProduct:async e=>{const t=new FormData;Object.entries(e).forEach(([i,a])=>{i==="image_files"&&Array.isArray(a)?a.forEach((o,c)=>{o instanceof File&&t.append("image_files",o)}):typeof a=="object"?t.append(i,JSON.stringify(a)):t.append(i,String(a))});const{response:s,data:r}=await Ie("/products/",{method:"POST",body:t});if(!s.ok)throw new Error("Failed to create product");return r},updateProduct:async(e,t)=>{const s=new FormData;Object.entries(t).forEach(([a,o])=>{a==="image_files"&&Array.isArray(o)?o.forEach(c=>{c instanceof File&&s.append("image_files",c)}):typeof o=="boolean"?s.append(a,o?"true":"false"):typeof o=="object"&&o!==null?s.append(a,JSON.stringify(o)):o!=null&&s.append(a,String(o))});const{response:r,data:i}=await Ie(`/products/${e}/`,{method:"PATCH",body:s});if(!r.ok)throw console.error("Update failed:",r.status),new Error(`Failed to update product: ${r.status}`);return i},deleteProduct:async e=>{const{response:t}=await Ie(`/products/${e}/`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete product")}},pse=({message:e,show:t,onClose:s,duration:r=3e3})=>{const[i,a]=j.useState(!1);return j.useEffect(()=>{if(t){a(!0);const o=setTimeout(()=>{a(!1),setTimeout(s,300)},r);return()=>clearTimeout(o)}},[t,r,s]),!t&&!i?null:n.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-all duration-300 ${i?"opacity-100":"opacity-0"}`,children:[n.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl border border-green-200 p-6 mx-4 max-w-sm w-full pointer-events-auto transform transition-all duration-300 ${i?"scale-100 translate-y-0":"scale-95 translate-y-4"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Qu,{className:"h-6 w-6 text-green-600"})})}),n.jsx("div",{className:"flex-1",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Success!"})})]}),n.jsx("button",{onClick:()=>{a(!1),setTimeout(s,300)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(as,{className:"h-5 w-5"})})]}),n.jsx("p",{className:"text-gray-600 text-center",children:e}),n.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-1",children:n.jsx("div",{className:"bg-green-500 h-1 rounded-full transition-all duration-300 ease-linear",style:{animation:i?`shrink ${r}ms linear`:"none"}})})]}),n.jsx("style",{jsx:!0,children:`
        @keyframes shrink {
          from { width: 100%; }
          to { width: 0%; }
        }
      `})]})},gse=wL({name:wn().min(1,"Product name is required"),category:wn().min(1,"Category is required"),subcategory:wn().optional(),price:Vi().min(0,"Price must be positive"),cost_price:Vi().nullable().optional().transform(e=>e===void 0?null:e),sku:wn().optional(),barcode:wn().optional(),quantity:Vi().min(0,"Quantity must be positive"),low_stock_threshold:Vi().min(0).optional(),description:wn().min(1,"Description is required"),short_description:wn().optional(),tags:Rm(wn()).default([]),image_files:Rm(Xy()).min(1,"At least one image is required"),status:_L(["active","draft","archived"]).default("active"),featured:ru().default(!1),free_delivery:ru().default(!1),seo_title:wn().optional(),seo_description:wn().optional(),dynamic_fields:jL(Xy()).default({})}),vse=()=>{const e=nt(),[t,s]=j.useState(""),[r,i]=j.useState([]),[a,o]=j.useState([]),[c,d]=j.useState([]),[f,m]=j.useState(""),[h,u]=j.useState(!1),[p,x]=j.useState(!1),[v,w]=j.useState(""),[y,b]=j.useState([]),[_,N]=j.useState([]),[k,I]=j.useState(!1),C=pL({resolver:vL(gse),defaultValues:{name:"",category:"",price:"",cost_price:null,quantity:"",description:"",tags:[],image_files:[],status:"active",featured:!1,free_delivery:!1,dynamic_fields:{}}}),{control:T,handleSubmit:M,watch:P,setValue:E,formState:{errors:A}}=C,z=P("category");j.useEffect(()=>{s(z),E("subcategory",""),z?O(z,!1):N([])},[z,E]);const O=async(R,F=!1)=>{try{I(!0);const{apiRequest:q}=await We(async()=>{const{apiRequest:B}=await Promise.resolve().then(()=>Kn);return{apiRequest:B}},void 0),{response:W,data:K}=await q(`categories/${encodeURIComponent(R)}/subcategories/`);if(W.ok&&K){const B=K.subcategories||[];N(B),F&&B.length>0&&E("subcategory",B[0])}else N([])}catch(q){console.error("Error fetching subcategories:",q),N([])}finally{I(!1)}};j.useEffect(()=>{(async()=>{try{const{apiRequest:F}=await We(async()=>{const{apiRequest:K}=await Promise.resolve().then(()=>Kn);return{apiRequest:K}},void 0),{response:q,data:W}=await F("/vendor-profiles/");if(console.log("Vendor profile response:",{response:q.ok,data:W}),q.ok&&W&&W.results&&W.results.length>0){const B=W.results[0].categories||[];if(console.log("Vendor categories:",B),b(B),B.length>0){const Z=B[0];E("category",Z),s(Z),O(Z,!0)}}}catch(F){console.error("Error fetching vendor profile:",F)}})()},[E]);const $=R=>{const F=R.target.files;if(F){const q=Array.from(F),W=q.map(K=>URL.createObjectURL(K));i(K=>[...K,...q]),o(K=>[...K,...W]),E("image_files",[...r,...q])}},G=R=>{URL.revokeObjectURL(a[R]);const F=r.filter((W,K)=>K!==R),q=a.filter((W,K)=>K!==R);i(F),o(q),E("image_files",F)},X=()=>{if(f.trim()&&!c.includes(f.trim())){const R=[...c,f.trim()];d(R),E("tags",R),m("")}},Y=R=>{const F=c.filter(q=>q!==R);d(F),E("tags",F)},U=async R=>{try{const F={...R};if((F.cost_price===null||F.cost_price===void 0)&&delete F.cost_price,await bl.createProduct(F),w("Product created successfully!"),x(!0),C.reset(),a.forEach(q=>URL.revokeObjectURL(q)),i([]),o([]),d([]),y.length>0){const W={Clothing:"clothing",Electronics:"electronics",Food:"food",Baby:"baby",Grocery:"grocery",Meat:"meat",Medicine:"medicine"}[y[0]]||y[0].toLowerCase();E("category",W),s(W)}}catch(F){Zn.error("Failed to create product. Please try again."),console.error("Error creating product:",F)}},V=R=>{const F=`dynamic_fields.${R.name}`;switch(R.type){case"text":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(fe,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:F,control:T,rules:{required:R.required},render:({field:q})=>n.jsx(ve,{...q,placeholder:R.placeholder,className:"h-8 text-xs"})})]},R.name);case"number":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(fe,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:F,control:T,rules:{required:R.required},render:({field:q})=>n.jsx(ve,{...q,type:"number",placeholder:R.placeholder,className:"h-8 text-xs",onChange:W=>q.onChange(Number(W.target.value))})})]},R.name);case"select":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(fe,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:F,control:T,rules:{required:R.required},render:({field:q})=>{var W;return n.jsxs(Vt,{onValueChange:q.onChange,value:q.value,children:[n.jsx($t,{className:"h-8 text-xs",children:n.jsx(Ut,{placeholder:`Select ${R.label.toLowerCase()}`})}),n.jsx(zt,{children:(W=R.options)==null?void 0:W.map(K=>n.jsx(qe,{value:K,className:"text-xs",children:K},K))})]})}})]},R.name);case"multiselect":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(fe,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:F,control:T,rules:{required:R.required},render:({field:q})=>{var K;const W=q.value||[];return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Vt,{onValueChange:B=>{W.includes(B)||q.onChange([...W,B])},children:[n.jsx($t,{className:"h-8 text-xs",children:n.jsx(Ut,{placeholder:`Select ${R.label.toLowerCase()}`})}),n.jsx(zt,{children:(K=R.options)==null?void 0:K.map(B=>n.jsx(qe,{value:B,className:"text-xs",children:B},B))})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:W.map(B=>n.jsxs(De,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[B,n.jsx(as,{className:"h-2 w-2 cursor-pointer",onClick:()=>{q.onChange(W.filter(Z=>Z!==B))}})]},B))})]})}})]},R.name);case"textarea":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(fe,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:F,control:T,rules:{required:R.required},render:({field:q})=>n.jsx(Xn,{...q,placeholder:R.placeholder,className:"text-xs",rows:2})})]},R.name);case"boolean":return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:F,control:T,render:({field:q})=>n.jsx(Zt,{checked:q.value,onCheckedChange:q.onChange})}),n.jsx(fe,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:R.label})]},R.name);case"date":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(fe,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:F,control:T,rules:{required:R.required},render:({field:q})=>n.jsx(ve,{...q,type:"date",className:"h-8 text-xs"})})]},R.name);default:return null}};return h?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsx("h1",{className:"text-lg font-semibold",children:"Product Preview"})]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>u(!1),children:"Edit"})]})}),n.jsx(WL,{productData:P()})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("style",{children:`
        input, textarea, select {
          font-size: 16px !important;
          transform: translateZ(0);
        }
        @media screen and (max-width: 768px) {
          input:focus, textarea:focus, select:focus {
            font-size: 16px !important;
            zoom: 1 !important;
          }
        }
      `}),n.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/vendor/dashboard"),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsx("h1",{className:"text-lg font-semibold",children:"Add New Product"})]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>u(!0),children:[n.jsx(Nn,{className:"h-4 w-4 mr-1"}),"Preview"]})]})}),n.jsx("div",{className:"max-w-2xl mx-auto p-4",children:n.jsxs("form",{onSubmit:M(U),className:"space-y-4",children:[n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(At,{className:"h-4 w-4 text-blue-600"}),n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Basic Information"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"col-span-2 space-y-1",children:[n.jsxs(fe,{htmlFor:"name",className:"text-xs font-medium text-gray-700",children:["Product Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"name",control:T,render:({field:R})=>n.jsx(ve,{...R,placeholder:"Enter product name",className:"h-8 text-xs"})}),A.name&&n.jsx("p",{className:"text-red-500 text-xs",children:A.name.message})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs(fe,{htmlFor:"category",className:"text-xs font-medium text-gray-700",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"category",control:T,render:({field:R})=>n.jsxs(Vt,{onValueChange:R.onChange,value:R.value,children:[n.jsx($t,{className:"h-8 text-xs",children:n.jsx(Ut,{placeholder:"Select category"})}),n.jsx(zt,{children:y.map(F=>n.jsx(qe,{value:F,className:"text-xs",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:""}),n.jsx("span",{children:F})]})},F))})]})}),A.category&&n.jsx("p",{className:"text-red-500 text-xs",children:A.category.message})]}),_.length>0&&n.jsxs("div",{className:"space-y-1",children:[n.jsx(fe,{className:"text-xs font-medium text-gray-700",children:"Subcategory"}),n.jsx(bt,{name:"subcategory",control:T,render:({field:R})=>n.jsxs(Vt,{onValueChange:R.onChange,value:R.value,disabled:k,children:[n.jsx($t,{className:"h-8 text-xs",children:n.jsx(Ut,{placeholder:k?"Loading...":"Select subcategory"})}),n.jsx(zt,{children:_.map(F=>n.jsx(qe,{value:F,className:"text-xs",children:F},F))})]})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(fe,{className:"text-xs font-medium text-gray-700",children:"Unit"}),n.jsx(ve,{value:t?w2(t):"piece",disabled:!0,className:"h-8 text-xs bg-gray-50"})]})]})]}),t&&Ar[t]&&n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(TP,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"mr-1",children:Ar[t].icon}),n.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:[Ar[t].name," Details"]})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ar[t].fields.map(V)})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Pricing & Inventory"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(fe,{htmlFor:"price",className:"text-xs font-medium text-gray-700",children:["Selling Price ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"price",control:T,render:({field:R})=>n.jsx(ve,{...R,type:"number",step:"0.01",placeholder:"0.00",className:"h-8 text-xs",onChange:F=>R.onChange(Number(F.target.value))})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(fe,{htmlFor:"cost_price",className:"text-xs font-medium text-gray-700",children:"Cost Price"}),n.jsx(bt,{name:"cost_price",control:T,render:({field:R})=>n.jsx(ve,{type:"number",step:"0.01",placeholder:"0.00",className:"h-8 text-xs",value:R.value??"",onChange:F=>{const q=F.target.value;R.onChange(q?Number(q):null)}})})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs(fe,{htmlFor:"quantity",className:"text-xs font-medium text-gray-700",children:["Quantity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"quantity",control:T,render:({field:R})=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ve,{type:"number",placeholder:"0",className:"h-8 text-xs flex-1",value:R.value||"",onChange:F=>R.onChange(F.target.value?Number(F.target.value):"")}),n.jsx("span",{className:"text-xs text-gray-500 flex items-center px-2",children:t?w2(t):"piece"})]})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:"free_delivery",control:T,render:({field:R})=>n.jsx(Zt,{checked:R.value,onCheckedChange:R.onChange})}),n.jsx(fe,{className:"text-xs font-medium text-gray-700",children:"Free Delivery"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zi,{className:"h-4 w-4 text-purple-600"}),n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Images"})]}),n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[n.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:$,className:"hidden",id:"image-upload"}),n.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[n.jsx(Su,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Click to upload images"})]})]}),a.length>0&&n.jsx("div",{className:"grid grid-cols-4 gap-2",children:a.map((R,F)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:R,alt:`Product ${F+1}`,className:"w-full h-12 object-cover rounded-lg"}),n.jsx("button",{type:"button",onClick:()=>G(F),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(as,{className:"h-3 w-3"})}),F===0&&n.jsx(De,{className:"absolute bottom-0 left-0 text-xs px-1 py-0",children:"Main"})]},F))})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kP,{className:"h-4 w-4 text-orange-600"}),n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Description"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs(fe,{htmlFor:"description",className:"text-xs font-medium text-gray-700",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"description",control:T,render:({field:R})=>n.jsx($L,{theme:"snow",value:R.value,onChange:R.onChange,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},style:{minHeight:"120px",fontSize:"12px"}})}),A.description&&n.jsx("p",{className:"text-red-500 text-xs",children:A.description.message})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Tags"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ve,{value:f,onChange:R=>m(R.target.value),placeholder:"Add a tag",className:"h-8 text-xs",onKeyPress:R=>R.key==="Enter"&&(R.preventDefault(),X())}),n.jsx(ne,{type:"button",onClick:X,variant:"outline",size:"sm",children:n.jsx(xn,{className:"h-3 w-3"})})]}),c.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(R=>n.jsxs(De,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[R,n.jsx(as,{className:"h-2 w-2 cursor-pointer",onClick:()=>Y(R)})]},R))})]}),n.jsxs("div",{className:"flex gap-3 sticky bottom-4 bg-white p-3 border border-gray-200 rounded-lg",children:[n.jsx(ne,{type:"button",variant:"outline",className:"flex-1 h-9 text-xs",onClick:()=>{E("status","draft"),M(U)()},children:"Save as Draft"}),n.jsxs(ne,{type:"submit",className:"flex-1 h-9 text-xs",children:[n.jsx(Ic,{className:"h-3 w-3 mr-1"}),"Publish Product"]})]})]})}),n.jsx(pse,{message:v,show:p,onClose:()=>x(!1),duration:3e3})]})},xse=()=>{const[e,t]=j.useState(!1),[s,r]=j.useState("khalti"),[i,a]=j.useState(""),[o,c]=j.useState(!0),[d,f]=j.useState("all"),[m,h]=j.useState(""),[u,p]=j.useState(""),[x,v]=j.useState(null),[w,y]=j.useState([]),[b,_]=j.useState(!1),[N,k]=j.useState(!0),[I,C]=j.useState(!1),[T,M]=j.useState(null),[P,E]=j.useState(1),[A,z]=j.useState(1),[O,$]=j.useState(0),G=20,X=async()=>{try{const{response:Z,data:se}=await Ie("accounts/wallet/");Z.ok&&se?v(se):Zn.error("Failed to fetch wallet data")}catch(Z){console.error("Error fetching wallet data:",Z),Zn.error("Error loading wallet data")}finally{k(!1)}},Y=async()=>{try{const Z=new URLSearchParams({date_filter:d,page:P.toString(),page_size:G.toString()});d==="custom"&&m&&u&&(Z.append("date_from",m),Z.append("date_to",u));const{response:se,data:J}=await Ie(`accounts/wallet/transactions/?${Z}`);se.ok&&J?(y(J.transactions),z(J.total_pages),$(J.total_count)):Zn.error("Failed to fetch transactions")}catch(Z){console.error("Error fetching transactions:",Z),Zn.error("Error loading transactions")}};j.useEffect(()=>{X();const Z=()=>{X()};return window.addEventListener("walletUpdated",Z),()=>{window.removeEventListener("walletUpdated",Z)}},[]),j.useEffect(()=>{x&&Y()},[x,d,P,m,u]),j.useEffect(()=>{const Z=()=>{X(),Y()};return window.addEventListener("walletUpdated",Z),()=>{window.removeEventListener("walletUpdated",Z)}},[]),j.useEffect(()=>{const Z=new URLSearchParams(window.location.search);if(Z.get("payment_complete")==="1"){const se=Z.get("pidx");se?U(se):(Zn.success("Payment completed successfully!"),X()),window.history.replaceState({},document.title,window.location.pathname)}},[]);const U=async Z=>{try{const{response:se,data:J}=await Ie("accounts/wallet/khalti-verify/",{method:"POST",body:JSON.stringify({pidx:Z})});se.ok&&J&&J.success?(Zn.success(`Payment verified! Rs${J.amount} added to wallet`),X()):Zn.error((J==null?void 0:J.error)||"Payment verification failed")}catch(se){console.error("Error verifying payment:",se),Zn.error("Error verifying payment")}},V=async()=>{if(!s||!i)return;const{simplePersistentAuth:Z}=await We(async()=>{const{simplePersistentAuth:J}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:J}},[]);if(!await Z.isVendorLoggedIn()){Zn.error("Please login to continue");return}if(_(!0),s==="khalti")try{const{response:J,data:ie}=await Ie("accounts/wallet/khalti-payment/",{method:"POST",body:JSON.stringify({amount:parseFloat(i)})});J.ok&&ie&&ie.success?window.location.href=ie.payment_url:(Zn.error((ie==null?void 0:ie.error)||"Failed to initiate payment"),_(!1))}catch(J){console.error("Error initiating payment:",J),Zn.error("Error processing payment"),_(!1)}t(!1),a("")},R=()=>w.filter(Z=>Z.transaction_type==="credit").reduce((Z,se)=>Z+parseFloat(se.amount),0),F=()=>w.filter(Z=>Z.transaction_type==="debit").reduce((Z,se)=>Z+parseFloat(se.amount),0),q=Z=>new Date(Z).toLocaleDateString(),W=Z=>new Date(Z).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),K=()=>{const se=`
===========================================
           WALLET TRANSACTION SUMMARY
===========================================
Generated: ${new Date().toLocaleDateString()}
Store: ${(x==null?void 0:x.business_name)||"N/A"}
Period: ${d==="custom"?`${m} to ${u}`:d.toUpperCase()}

BALANCE OVERVIEW
-------------------------------------------
Current Balance: Rs${(x==null?void 0:x.balance)||"0.00"}
Total Credit: Rs${R().toFixed(2)}
Total Debit: Rs${F().toFixed(2)}
Net Amount: Rs${(R()-F()).toFixed(2)}

TRANSACTION DETAILS (${w.length} transactions)
-------------------------------------------
${w.map(ie=>`${q(ie.created_at)} ${W(ie.created_at)} | ${ie.transaction_type.toUpperCase().padEnd(6)} | Rs${parseFloat(ie.amount).toFixed(2).padStart(8)} | ${ie.description}`).join(`
`)}

===========================================
    `,J=window.open("","_blank");J==null||J.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${se}</pre>`),J==null||J.print()},B=()=>{const Z=[["Date","Time","Type","Amount","Description","Method","Status"].join(","),...w.map(le=>[q(le.created_at),W(le.created_at),le.transaction_type,parseFloat(le.amount).toFixed(2),`"${le.description}"`,le.payment_method||"N/A",le.status].join(","))].join(`
`),se=new Blob([Z],{type:"text/csv"}),J=window.URL.createObjectURL(se),ie=document.createElement("a");ie.href=J,ie.download=`wallet-transactions-${d}-${new Date().toISOString().split("T")[0]}.csv`,ie.click(),window.URL.revokeObjectURL(J)};return n.jsx(qt,{title:"Wallet",children:n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 pb-20",children:[n.jsxs("div",{className:"bg-white border-b p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(sm,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"My Wallet"}),n.jsx("p",{className:"text-gray-600 text-sm",children:(x==null?void 0:x.business_name)||"Loading..."})]})]}),n.jsx(ne,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100",onClick:()=>c(!o),children:o?n.jsx(Nn,{className:"h-4 w-4"}):n.jsx(ib,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Available Balance"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-3",children:o?`${(x==null?void 0:x.balance)||"0.00"}`:"****.**"}),n.jsxs(ne,{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium",onClick:()=>t(!0),disabled:!0,children:[n.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Money"]})]})]}),n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx(Te,{className:"bg-white shadow-sm",children:n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Vr,{className:"h-4 w-4 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"This Month"}),n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+",(x==null?void 0:x.total_earned)||"0.00"]})]})]})})}),n.jsx(Te,{className:"bg-white shadow-sm",children:n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(AP,{className:"h-4 w-4 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Expenses"}),n.jsxs("p",{className:"text-sm font-bold text-red-600",children:["-",(x==null?void 0:x.total_spent)||"0.00"]})]})]})})})]})}),n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transactions"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ne,{variant:"outline",size:"sm",onClick:K,children:[n.jsx(cb,{className:"h-4 w-4 mr-1"}),"Print"]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:B,children:[n.jsx(Wl,{className:"h-4 w-4 mr-1"}),"Export"]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>C(!0),children:n.jsx(_i,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{key:"all",label:"All"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"custom",label:"Custom"}].map(Z=>n.jsx(ne,{variant:d===Z.key?"default":"outline",size:"sm",className:"whitespace-nowrap",onClick:()=>f(Z.key),children:Z.label},Z.key))})]}),n.jsx("div",{className:"px-4 space-y-2",children:N?n.jsxs("div",{className:"flex justify-center items-center py-8",children:[n.jsx(yi,{className:"h-6 w-6 animate-spin"}),n.jsx("span",{className:"ml-2",children:"Loading transactions..."})]}):w.length>0?w.map(Z=>n.jsx(Te,{className:"bg-white shadow-sm cursor-pointer hover:bg-gray-50",onClick:()=>M(Z),children:n.jsx(Oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${Z.transaction_type==="credit"?"bg-green-100":"bg-red-100"}`,children:Z.transaction_type==="credit"?n.jsx(ju,{className:"h-5 w-5 text-green-600"}):n.jsx(_u,{className:"h-5 w-5 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Z.description}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsxs("span",{children:[q(Z.created_at)," at ",W(Z.created_at)]}),n.jsx(De,{variant:Z.status==="completed"?"default":"secondary",className:"text-xs",children:Z.status})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`text-sm font-bold ${Z.transaction_type==="credit"?"text-green-600":"text-red-600"}`,children:[Z.transaction_type==="credit"?"+":"-","",parseFloat(Z.amount).toFixed(2)]}),n.jsx("p",{className:"text-xs text-gray-500",children:Z.payment_method||"N/A"})]})]})})},Z.id)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(sm,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No transactions found"})]})}),A>1&&n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(P-1)*G+1,"-",Math.min(P*G,O)," of ",O," transactions"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>E(P-1),disabled:P===1,className:"h-8 w-8 p-0",children:n.jsx(NP,{className:"h-4 w-4"})}),n.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,A)},(Z,se)=>{const J=P<=3?se+1:P-2+se;return J>A?null:n.jsx(ne,{variant:P===J?"default":"outline",size:"sm",onClick:()=>E(J),className:"h-8 w-8 p-0 text-xs",children:J},J)})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>E(P+1),disabled:P===A,className:"h-8 w-8 p-0",children:n.jsx(pc,{className:"h-4 w-4"})})]})]})}),n.jsx(Rs,{open:e,onOpenChange:t,children:n.jsxs(xs,{side:"bottom",className:"h-[80vh] rounded-t-3xl",children:[n.jsx(ys,{className:"pb-6",children:n.jsx(bs,{className:"text-center text-xl",children:"Add Money to Wallet"})}),n.jsxs("div",{className:"space-y-6 overflow-y-auto h-full pb-20",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Enter Amount"}),n.jsx(ve,{type:"number",placeholder:" 0.00",value:i,onChange:Z=>a(Z.target.value),className:"h-12 text-lg text-center"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:[500,1e3,2e3].map(Z=>n.jsxs(ne,{variant:"outline",onClick:()=>a(Z.toString()),className:"h-10",children:["",Z]},Z))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Payment Method"}),n.jsx(Te,{className:"cursor-pointer transition-all ring-2 ring-purple-500 bg-purple-50",onClick:()=>r("khalti"),children:n.jsx(Oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(to,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Khalti"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Secure digital payment gateway"})]})]})})})]}),n.jsx("div",{className:"fixed bottom-4 left-4 right-4",children:n.jsx(ne,{className:"w-full h-12 text-lg font-medium",disabled:!s||!i||b,onClick:V,children:b?n.jsxs(n.Fragment,{children:[n.jsx(yi,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Add ${i||"0"}`})})]})]})}),n.jsx(Rs,{open:I,onOpenChange:C,children:n.jsxs(xs,{side:"right",className:"w-full sm:w-80",children:[n.jsx(ys,{className:"pb-4",children:n.jsxs(bs,{className:"flex items-center justify-between",children:["Filter Transactions",n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>C(!1),children:n.jsx(as,{className:"h-4 w-4"})})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-sm font-medium mb-2 block",children:"Date Range"}),n.jsx("div",{className:"space-y-2",children:[{key:"all",label:"All Time"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"custom",label:"Custom Range"}].map(Z=>n.jsx(ne,{variant:d===Z.key?"default":"outline",size:"sm",className:"w-full justify-start",onClick:()=>{f(Z.key),E(1)},children:Z.label},Z.key))})]}),d==="custom"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-xs font-medium",children:"From Date"}),n.jsx(ve,{type:"date",value:m,onChange:Z=>{h(Z.target.value),E(1)},className:"h-9 text-sm mt-1"})]}),n.jsxs("div",{children:[n.jsx(fe,{className:"text-xs font-medium",children:"To Date"}),n.jsx(ve,{type:"date",value:u,onChange:Z=>{p(Z.target.value),E(1)},className:"h-9 text-sm mt-1"})]})]}),n.jsx("div",{className:"pt-4 border-t",children:n.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[n.jsxs("p",{children:["Total Transactions: ",O]}),n.jsxs("p",{children:["Total Credit: ",R().toFixed(2)]}),n.jsxs("p",{children:["Total Debit: ",F().toFixed(2)]}),n.jsxs("p",{className:"font-medium",children:["Net: ",(R()-F()).toFixed(2)]})]})})]})]})}),n.jsx(Rs,{open:!!T,onOpenChange:()=>M(null),children:n.jsxs(xs,{side:"bottom",className:"h-[70vh] rounded-t-xl",children:[n.jsx(ys,{className:"pb-4",children:n.jsx(bs,{className:"text-left",children:"Transaction Details"})}),T&&n.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${T.transaction_type==="credit"?"bg-green-100":"bg-red-100"}`,children:T.transaction_type==="credit"?n.jsx(ju,{className:"h-6 w-6 text-green-600"}):n.jsx(_u,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-lg",children:T.description}),n.jsxs("p",{className:`text-xl font-bold ${T.transaction_type==="credit"?"text-green-600":"text-red-600"}`,children:[T.transaction_type==="credit"?"+":"-","",parseFloat(T.amount).toFixed(2)]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"Transaction ID"}),n.jsxs("p",{className:"font-medium",children:["TXN-",T.id]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"Status"}),n.jsx(De,{variant:T.status==="completed"?"default":"secondary",children:T.status})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"Date & Time"}),n.jsxs("p",{className:"font-medium",children:[q(T.created_at)," at ",W(T.created_at)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"Method"}),n.jsx("p",{className:"font-medium",children:T.payment_method||"N/A"})]})]})]}),(T.order_amount||T.reference_id)&&n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Lr,{className:"h-4 w-4"}),"Additional Details"]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[T.order_amount&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Order Amount:"}),n.jsxs("span",{className:"font-medium",children:["",parseFloat(T.order_amount).toFixed(2)]})]}),T.reference_id&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Reference ID:"}),n.jsx("span",{className:"font-medium",children:T.reference_id})]})]})]})]})]})})]})})};function yse({requiredRole:e,currentPage:t}){const{state:s}=Fs(),r=nt(),i=s.user,a=i==null?void 0:i.user_type,c=((i==null?void 0:i.available_roles)||[]).includes(e);return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:n.jsxs(Te,{className:"max-w-md w-full",children:[n.jsxs(wt,{className:"text-center",children:[n.jsx(rb,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),n.jsx(jt,{children:"Role Access Required"})]}),n.jsxs(Oe,{className:"space-y-4",children:[n.jsxs("div",{className:"text-center text-gray-600",children:[n.jsxs("p",{children:["You need ",n.jsx("strong",{children:e})," access to view this page."]}),n.jsxs("p",{className:"text-sm mt-2",children:["Current role: ",n.jsx("span",{className:"font-medium",children:a})]})]}),c?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[n.jsx(qD,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Good news!"})]}),n.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["You have ",e," access available. Switch your role to continue."]})]}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[n.jsx("span",{children:a}),n.jsx(wP,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:e})]}),n.jsxs(ne,{onClick:()=>{r(e==="vendor"?"/vendor/onboarding":"/home")},className:"w-full",children:["Switch to ",e==="vendor"?"Vendor":"Customer"]})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"bg-orange-50 p-3 rounded-lg",children:n.jsxs("p",{className:"text-sm text-orange-700",children:["You don't have ",e," access yet."]})}),e==="vendor"?n.jsx(ne,{onClick:()=>r("/vendor/onboarding"),className:"w-full",children:"Complete Vendor Onboarding"}):n.jsx(ne,{onClick:()=>r("/home"),className:"w-full",children:"Go to Customer Area"})]}),n.jsx("div",{className:"pt-2 border-t",children:n.jsx(ne,{variant:"outline",onClick:()=>r(-1),className:"w-full",children:"Go Back"})})]})]})})}function bse({children:e,redirectTo:t="/vendor/login"}){const[s,r]=j.useState(!0),[i,a]=j.useState(!1),o=nt();j.useEffect(()=>{c()},[]);const c=async()=>{try{const d=await YW("vendor");d.success?a(!0):d.needsLogin?o(t):d.roleNotAvailable?o("/vendor/onboarding"):o(t)}catch(d){console.error("Vendor auth guard error:",d),o(t)}finally{r(!1)}};return s?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i?n.jsx(n.Fragment,{children:e}):null}const wse=()=>{const e=nt(),{toast:t}=hn(),{logout:s,state:r,login:i}=Fs(),[a,o]=j.useState("personal"),[c,d]=j.useState(!1),[f,m]=j.useState(!0),[h,u]=j.useState("");j.useState(null);const[p,x]=j.useState(null),[v,w]=j.useState(!1),[y,b]=j.useState(""),[_,N]=j.useState(null),[k,I]=j.useState({businessName:"",ownerName:"",email:"",phone:"",address:"",city:"",state:"",pincode:"",businessType:"",categories:[],description:"",bankName:"",accountNumber:"",ifscCode:"",accountHolderName:"",gstNumber:"",panNumber:"",businessLicense:null,gstCertificate:null,fssaiLicense:null,additionalDocs:[],deliveryRadius:"",minOrderAmount:"",profileImage:null});j.useEffect(()=>{C(),T(),M()},[]);const C=async()=>{var V,R;try{const F=await XW();if(F.needsLogin){e("/vendor/login");return}if(F.needsOnboarding){u("You don't have access to vendor features. Please complete vendor onboarding first.");return}if(F.needsRoleSwitch&&!(await kw()).success){u("Failed to switch to vendor role. Please try logging in again.");return}const{response:q,data:W}=await Ie("/vendor-profiles/");if(q.status===401||q.status===403){u("You don't have access to vendor features. Please complete vendor onboarding first.");return}if(!q.ok)throw new Error("Failed to fetch profile data");if(W&&W.results&&W.results.length>0){const K=W.results[0],{response:B,data:Z}=await Ie("/vendor-documents/");let se=[];B.ok&&Z&&(se=Z.results||[]),I({businessName:K.business_name||"",ownerName:K.owner_name||"",email:K.business_email||"",phone:K.business_phone||"",address:K.business_address||"",city:K.city||"",state:K.state||"",pincode:K.pincode||"",businessType:K.business_type||"",categories:K.categories||[],description:K.description||"",bankName:K.bank_name||"",accountNumber:K.account_number||"",ifscCode:K.ifsc_code||"",accountHolderName:K.account_holder_name||"",gstNumber:K.gst_number||"",panNumber:K.pan_number||"",businessLicense:K.business_license_file?{name:"Business License",url:K.business_license_file}:null,gstCertificate:K.gst_certificate?{name:"GST Certificate",url:K.gst_certificate}:null,fssaiLicense:K.fssai_license?{name:"FSSAI License",url:K.fssai_license}:null,additionalDocs:se.map(J=>({name:`Document ${J.id}`,url:J.document})),deliveryRadius:((V=K.delivery_radius)==null?void 0:V.toString())||"",minOrderAmount:K.min_order_amount||"",profileImage:((R=K.user_info)==null?void 0:R.profile_picture)||null})}}catch(F){console.error("Error fetching profile:",F),u("Failed to load profile data")}finally{m(!1)}},T=async()=>{try{if(!await ke.isAuthenticated())return;const{response:R,data:F}=await Ie("/profile/");if(R.ok&&F){const q={...r.user,available_roles:F.available_roles,current_role:F.current_role};console.log("Updated user data:",q)}}catch(V){console.error("Error fetching user profile:",V)}},M=async()=>{try{const V=await fetch("/api/delivery-radius/"),R=await V.json();V.ok&&N(R.delivery_radius)}catch(V){console.error("Error fetching admin delivery radius:",V)}},P=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"manufacturer",label:"Manufacturer"},{value:"service_provider",label:"Service Provider"},{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"}],E=["Electronics","Fashion","Food","Home","Books","Sports","Beauty","Toys","Jewelry","Furniture","Automotive","Health & Wellness","Pet Supplies","Stationery","Garden & Outdoor","Kids & Baby","Appliances","Hardware","Crafts & Hobbies","Travel & Luggage"],A=(V,R)=>{I(F=>({...F,[V]:R}))},z=V=>{const R=k.categories.includes(V)?k.categories.filter(F=>F!==V):[...k.categories,V];A("categories",R)},O=async V=>{if(V)try{if(!await ke.isAuthenticated())return;const F=new FormData;F.append("profile_picture",V);const{response:q,data:W}=await Ie("/api/profile/upload-picture/",{method:"POST",body:F});if(q.ok&&W)console.log("Upload result:",W),console.log("Profile picture URL:",W.profile_picture),I(K=>({...K,profileImage:W.profile_picture||null})),t({title:"Success",description:"Profile image updated successfully!"}),setTimeout(()=>{C()},500);else{const K=await q.json();throw console.error("Profile image upload error:",K),new Error("Profile image upload failed")}}catch(R){console.error("Profile image upload error:",R),t({title:"Error",description:"Failed to upload profile image. Please try again.",variant:"destructive"})}},$=async(V,R,F)=>{var W;if(!R)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(R.type)){t({title:"Error",description:"Please upload only PDF, JPG, JPEG, or PNG files.",variant:"destructive"});return}if(R.size>5*1024*1024){t({title:"Error",description:"File size must be less than 5MB.",variant:"destructive"});return}x(V);try{if(!await ke.isAuthenticated())return;const B=new FormData;B.append(V,R),B.append("business_name",k.businessName),B.append("business_email",k.email),B.append("business_phone",k.phone),B.append("business_address",k.address),B.append("city",k.city),B.append("state",k.state),B.append("pincode",k.pincode),B.append("business_type",k.businessType);const{response:Z,data:se}=await Ie("/vendor-profiles/");if(!Z.ok)throw new Error("Failed to get profile");const J=(W=se.results[0])==null?void 0:W.id;if(!J)throw new Error("Profile not found");const{response:ie,data:le}=await Ie(`/vendor-profiles/${J}/`,{method:"PATCH",body:B});if(!ie.ok)throw new Error("Upload failed");V==="business_license_file"?A("businessLicense",{name:"Business License",url:le.business_license_file_url}):V==="gst_certificate"?A("gstCertificate",{name:"GST Certificate",url:le.gst_certificate_url}):V==="fssai_license"&&A("fssaiLicense",{name:"FSSAI License",url:le.fssai_license_url}),t({title:"Success",description:"Document uploaded successfully!"}),V==="additionalDocs"&&(w(!1),b(""),C())}catch(K){console.error("Upload error:",K),t({title:"Error",description:"Failed to upload document. Please try again.",variant:"destructive"})}finally{x(null)}},G=({title:V,docType:R,document:F,onUpload:q})=>n.jsxs("div",{children:[n.jsx(fe,{children:V}),n.jsxs("div",{className:"mt-2 p-4 border border-gray-300 rounded-lg bg-gray-50",children:[n.jsx(Lr,{className:"h-6 w-6 mx-auto mb-2 text-gray-500"}),F?n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"text-sm text-green-600",children:" Uploaded"}),n.jsxs(Fo,{children:[n.jsx(Sy,{asChild:!0,children:n.jsxs(ne,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"View"]})}),n.jsxs(Fa,{className:"max-w-4xl w-full h-[80vh]",children:[n.jsx($a,{children:n.jsx(za,{children:V})}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx("iframe",{src:F.url,className:"w-full h-full border-0",title:V})})]})]})]}):n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Not uploaded"}),n.jsxs(ne,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",onClick:()=>{const W=F.createElement("input");W.type="file",W.accept=".pdf,.jpg,.jpeg,.png",W.onchange=K=>{var Z;const B=(Z=K.target.files)==null?void 0:Z[0];B&&q(B)},W.click()},disabled:p===R,children:[p===R?n.jsx(yi,{className:"h-3 w-3 mr-1 animate-spin"}):n.jsx(Su,{className:"h-3 w-3 mr-1"}),"Upload"]})]})]})]}),X=async()=>{try{if(!await ke.isAuthenticated())return;const R={business_name:k.businessName,owner_name:k.ownerName,business_email:k.email,business_phone:k.phone,business_address:k.address,city:k.city,state:k.state,pincode:k.pincode,business_type:k.businessType,categories:k.categories,description:k.description,bank_name:k.bankName,account_number:k.accountNumber,account_holder_name:k.accountHolderName,gst_number:k.gstNumber,pan_number:k.panNumber,delivery_radius:k.deliveryRadius?parseFloat(k.deliveryRadius):null,min_order_amount:k.minOrderAmount},{response:F,data:q}=await Ie("/vendor-profiles/");if(F.ok&&q){if(q.results&&q.results.length>0){const W=q.results[0].id,{response:K}=await Ie(`/vendor-profiles/${W}/`,{method:"PUT",body:JSON.stringify(R)});if(K.ok)d(!1),t({title:"Success",description:"Profile updated successfully!",variant:"default"}),C();else{const B=await K.json();throw console.error("Update error:",B),new Error("Failed to update profile")}}}else throw new Error("Failed to fetch profile for update")}catch(V){console.error("Error saving profile:",V),t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}},Y=async()=>{try{await ke.getToken()&&await Ie("/logout/",{method:"POST"})}catch(V){console.error("Logout error:",V)}finally{await s(),e("/vendor/login")}},U=[{id:"personal",label:"Personal",icon:Mr},{id:"business",label:"Business",icon:gs},{id:"address",label:"Address",icon:Kt},{id:"banking",label:"Banking",icon:to},{id:"documents",label:"Documents",icon:Lr}];return f?n.jsx(qt,{title:"My Profile",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):h&&h.includes("vendor features")?n.jsx(yse,{requiredRole:"vendor",currentPage:"vendor-profile"}):h?n.jsx(qt,{title:"My Profile",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[n.jsx(rb,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("p",{className:"text-red-600 mb-4",children:h}),n.jsx("div",{className:"space-y-2",children:n.jsx(ne,{onClick:C,variant:"outline",children:"Retry"})})]})})}):n.jsx(bse,{children:n.jsx(qt,{title:"My Profile",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-100 fixed top-14 sm:top-16 left-0 right-0 z-30",children:n.jsxs("div",{className:"flex items-center justify-between p-3 mx-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-lg overflow-hidden ${c?"cursor-pointer hover:bg-gray-200":""}`,onClick:c?()=>{const V=document.createElement("input");V.type="file",V.accept="image/*",V.onchange=R=>{var q;const F=(q=R.target.files)==null?void 0:q[0];F&&O(F)},V.click()}:void 0,children:k.profileImage?n.jsx("img",{src:k.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):n.jsx("span",{className:"text-gray-600 font-semibold",children:k.businessName?k.businessName.charAt(0).toUpperCase():"V"})}),c&&n.jsx(ne,{size:"sm",className:"absolute -bottom-0.5 -right-0.5 w-5 h-5 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const V=document.createElement("input");V.type="file",V.accept="image/*",V.onchange=R=>{var q;const F=(q=R.target.files)==null?void 0:q[0];F&&O(F)},V.click()},children:n.jsx(Zi,{className:"h-2.5 w-2.5"})})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"font-medium text-base truncate",children:k.businessName||"Business Name"}),n.jsx("p",{className:"text-gray-500 text-sm truncate",children:k.ownerName||"Owner Name"})]})]}),n.jsx(ne,{onClick:()=>c?X():d(!0),size:"sm",className:"bg-green-600 hover:bg-green-700",children:c?n.jsxs(n.Fragment,{children:[n.jsx(Ic,{className:"h-3 w-3 mr-1"}),"Save"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ju,{className:"h-3 w-3 mr-1"}),"Edit"]})})]})}),n.jsx("div",{className:"bg-white pt-16",children:n.jsxs(Si,{value:a,onValueChange:o,className:"w-full",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsx(Hr,{className:"grid grid-cols-5 w-full",children:U.map(V=>n.jsxs(Ct,{value:V.id,className:"flex items-center gap-2 text-xs",children:[n.jsx(V.icon,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:V.label})]},V.id))})}),n.jsx(dt,{value:"personal",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"ownerName",children:"Full Name *"}),n.jsx(ve,{id:"ownerName",value:k.ownerName,onChange:V=>A("ownerName",V.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"email",children:"Email *"}),n.jsx(ve,{id:"email",type:"email",value:k.email,onChange:V=>A("email",V.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"phone",children:"Phone Number *"}),n.jsx(ve,{id:"phone",value:k.phone,onChange:V=>A("phone",V.target.value),disabled:!c})]})]})}),n.jsxs(dt,{value:"business",className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"businessName",children:"Business Name *"}),n.jsx(ve,{id:"businessName",value:k.businessName,onChange:V=>A("businessName",V.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"businessType",children:"Business Type *"}),n.jsxs(Vt,{value:k.businessType,onValueChange:V=>A("businessType",V),disabled:!c,children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsx(zt,{children:P.map(V=>n.jsx(qe,{value:V.value,children:V.label},V.value))})]})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"gstNumber",children:"GST Number"}),n.jsx(ve,{id:"gstNumber",value:k.gstNumber,onChange:V=>A("gstNumber",V.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"panNumber",children:"PAN Number"}),n.jsx(ve,{id:"panNumber",value:k.panNumber,onChange:V=>A("panNumber",V.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"deliveryRadius",children:"Delivery Radius (km)"}),n.jsx(ve,{id:"deliveryRadius",value:_?`${_} (Set by Admin)`:k.deliveryRadius,disabled:!0,className:"bg-gray-100 text-gray-600"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Delivery radius is set by the administrator"})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"minOrderAmount",children:"Min Order Amount ()"}),n.jsx(ve,{id:"minOrderAmount",value:k.minOrderAmount,onChange:V=>A("minOrderAmount",V.target.value),disabled:!c})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(fe,{children:"Product Categories"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:E.map(V=>n.jsx("button",{type:"button",onClick:()=>z(V),disabled:!c,className:`p-2 text-sm rounded-lg border text-left ${k.categories.includes(V)?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"} ${c?"":"opacity-50 cursor-not-allowed"}`,children:V},V))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(fe,{htmlFor:"description",children:"Business Description"}),n.jsx(Xn,{id:"description",value:k.description,onChange:V=>A("description",V.target.value),rows:3,disabled:!c})]})]}),n.jsx(dt,{value:"address",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(fe,{htmlFor:"address",children:"Full Address *"}),n.jsx(Xn,{id:"address",value:k.address,onChange:V=>A("address",V.target.value),disabled:!c,rows:2})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"city",children:"City *"}),n.jsx(ve,{id:"city",value:k.city,onChange:V=>A("city",V.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"state",children:"State *"}),n.jsx(ve,{id:"state",value:k.state,onChange:V=>A("state",V.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"pincode",children:"Pincode *"}),n.jsx(ve,{id:"pincode",value:k.pincode,onChange:V=>A("pincode",V.target.value),disabled:!c})]})]})}),n.jsx(dt,{value:"banking",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"bankName",children:"Bank Name *"}),n.jsx(ve,{id:"bankName",value:k.bankName,onChange:V=>A("bankName",V.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"accountHolderName",children:"Account Holder Name *"}),n.jsx(ve,{id:"accountHolderName",value:k.accountHolderName,onChange:V=>A("accountHolderName",V.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"accountNumber",children:"Account Number *"}),n.jsx(ve,{id:"accountNumber",value:k.accountNumber,onChange:V=>A("accountNumber",V.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"ifscCode",children:"IFSC Code *"}),n.jsx(ve,{id:"ifscCode",value:k.ifscCode,onChange:V=>A("ifscCode",V.target.value),disabled:!c})]})]})}),n.jsx(dt,{value:"documents",className:"p-4 space-y-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(G,{title:"Business License",docType:"business_license_file",document:k.businessLicense,onUpload:V=>$("business_license_file",V)}),n.jsx(G,{title:"GST Certificate",docType:"gst_certificate",document:k.gstCertificate,onUpload:V=>$("gst_certificate",V)}),n.jsx(G,{title:"FSSAI License",docType:"fssai_license",document:k.fssaiLicense,onUpload:V=>$("fssai_license",V)})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx(fe,{children:"Additional Documents"}),n.jsxs(ne,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700",onClick:()=>w(!0),children:[n.jsx(xn,{className:"h-3 w-3 mr-1"}),"Add Document"]})]}),v&&n.jsx("div",{className:"mb-4 p-4 border border-gray-200 rounded-lg bg-white",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"docName",children:"Document Name"}),n.jsx(ve,{id:"docName",value:y,onChange:V=>b(V.target.value),placeholder:"Enter document name"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{w(!1),b("")},children:"Cancel"}),n.jsxs(ne,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{if(!y.trim()){t({title:"Error",description:"Please enter a document name",variant:"destructive"});return}const V=document.createElement("input");V.type="file",V.accept=".pdf,.jpg,.jpeg,.png",V.onchange=R=>{var q;const F=(q=R.target.files)==null?void 0:q[0];F&&$("additionalDocs",F)},V.click()},disabled:p==="additionalDocs",children:[p==="additionalDocs"?n.jsx(yi,{className:"h-3 w-3 mr-1 animate-spin"}):n.jsx(Su,{className:"h-3 w-3 mr-1"}),"Upload Document"]})]})]})}),k.additionalDocs.length>0?n.jsx("div",{className:"space-y-2",children:k.additionalDocs.map((V,R)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lr,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium",children:V.name})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(Fo,{children:[n.jsx(Sy,{asChild:!0,children:n.jsxs(ne,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"View"]})}),n.jsxs(Fa,{className:"max-w-4xl w-full h-[80vh]",children:[n.jsx($a,{children:n.jsx(za,{children:V.name})}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx("iframe",{src:V.url,className:"w-full h-full border-0",title:V.name})})]})]})})]},R))}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Lr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No additional documents uploaded"})]})]})]})})]})}),n.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50/50",children:[n.jsxs("div",{className:"mb-2",children:[n.jsx(fe,{className:"text-sm font-medium text-gray-700",children:"Switch Role"}),n.jsx("p",{className:"text-xs text-gray-500",children:"You can switch between customer and vendor roles"})]}),n.jsx(Cw,{})]}),n.jsx("div",{className:"p-4 pb-20",children:n.jsxs(ne,{variant:"outline",className:"w-full flex items-center justify-center py-6 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:Y,children:[n.jsx(ob,{className:"h-5 w-5 mr-2"}),n.jsx("span",{className:"font-medium text-base",children:"Logout"})]})})]})})})},jse=()=>{const[e,t]=j.useState("basic"),[s,r]=j.useState(!1),[i,a]=j.useState(!1),[o,c]=j.useState(null),[d,f]=j.useState(!0),[m,h]=j.useState(null),[u,p]=j.useState({businessName:"Fresh Farm Valley",ownerName:"Ram Sharma",email:"ram@freshfarm.com",phone:"+977 9841234567",whatsapp:"+977 9841234567",avatar:"",businessType:"grocery",description:"Certified organic farm serving Kathmandu Valley for 10+ years. We specialize in fresh vegetables, fruits, and dairy products.",categories:["Vegetables","Fruits","Dairy","Organic"],establishedYear:"2014",gstNumber:"27AABCU9603R1ZX",panNumber:"AABCU9603R",address:"Balkumari, Lalitpur",city:"Kathmandu",state:"Bagmati",pincode:"44700",landmark:"Near Balkumari Temple",deliveryRadius:"5",minOrderAmount:"200",deliveryFee:"50",freeDeliveryAbove:"500",estimatedDeliveryTime:"30-45",isOpen:!0,openingHours:{monday:{open:"06:00",close:"21:00",closed:!1},tuesday:{open:"06:00",close:"21:00",closed:!1},wednesday:{open:"06:00",close:"21:00",closed:!1},thursday:{open:"06:00",close:"21:00",closed:!1},friday:{open:"06:00",close:"21:00",closed:!1},saturday:{open:"06:00",close:"21:00",closed:!1},sunday:{open:"07:00",close:"20:00",closed:!1}},bankName:"Nepal Bank Limited",accountNumber:"1234567890123456",ifscCode:"NBLNPKA",accountHolderName:"Ram Sharma",upiId:"ram@nbl",businessLicense:"",gstCertificate:"",fssaiLicense:"",autoAcceptOrders:!1,notificationSettings:{orderAlerts:!0,messageAlerts:!0,promotionalEmails:!1}}),x=[{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"},{value:"meat",label:"Meat Shop"},{value:"dairy",label:"Dairy Products"}],v=["Vegetables","Fruits","Dairy","Meat","Bakery","Beverages","Snacks","Organic","Frozen","Spices","Grains","Oil"],w=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],y=(C,T)=>{p(M=>({...M,[C]:T}))},b=(C,T,M)=>{p(P=>({...P,[C]:{...P[C],[T]:M}}))};j.useEffect(()=>{_()},[]);const _=async()=>{var C,T,M,P;try{if(f(!0),!localStorage.getItem("token")){h("No authentication token found");return}const{response:A,data:z}=await Ie("/vendor-profiles/");if(A.ok&&z)if(z.results&&z.results.length>0){const O=z.results[0];p({businessName:O.business_name||"",ownerName:O.owner_name||"",email:O.business_email||"",phone:O.business_phone||"",whatsapp:O.business_phone||"",avatar:"",businessType:O.business_type||"grocery",description:O.description||"",categories:O.categories||[],establishedYear:O.established_year||"",gstNumber:O.gst_number||"",panNumber:O.pan_number||"",address:O.business_address||"",city:O.city||"",state:O.state||"",pincode:O.pincode||"",landmark:O.landmark||"",deliveryRadius:((C=O.delivery_radius)==null?void 0:C.toString())||"5",minOrderAmount:((T=O.min_order_amount)==null?void 0:T.toString())||"200",deliveryFee:((M=O.delivery_fee)==null?void 0:M.toString())||"50",freeDeliveryAbove:((P=O.free_delivery_above)==null?void 0:P.toString())||"500",estimatedDeliveryTime:O.estimated_delivery_time||"30-45",isOpen:O.is_active||!1,openingHours:{monday:{open:O.monday_open||"06:00",close:O.monday_close||"21:00",closed:O.monday_closed||!1},tuesday:{open:O.tuesday_open||"06:00",close:O.tuesday_close||"21:00",closed:O.tuesday_closed||!1},wednesday:{open:O.wednesday_open||"06:00",close:O.wednesday_close||"21:00",closed:O.wednesday_closed||!1},thursday:{open:O.thursday_open||"06:00",close:O.thursday_close||"21:00",closed:O.thursday_closed||!1},friday:{open:O.friday_open||"06:00",close:O.friday_close||"21:00",closed:O.friday_closed||!1},saturday:{open:O.saturday_open||"06:00",close:O.saturday_close||"21:00",closed:O.saturday_closed||!1},sunday:{open:O.sunday_open||"07:00",close:O.sunday_close||"20:00",closed:O.sunday_closed||!1}},bankName:O.bank_name||"",accountNumber:O.account_number||"",ifscCode:O.ifsc_code||"",accountHolderName:O.account_holder_name||"",upiId:O.upi_id||"",businessLicense:O.business_license_file||"",gstCertificate:O.gst_certificate||"",fssaiLicense:O.fssai_license||"",autoAcceptOrders:O.auto_accept_orders||!1,notificationSettings:{orderAlerts:!0,messageAlerts:!0,promotionalEmails:!1}})}else a(!0);else throw new Error("Failed to fetch vendor profile")}catch(E){console.error("Error fetching vendor profile:",E),h("Failed to load vendor profile")}finally{f(!1)}},N=async()=>{try{if(!localStorage.getItem("token"))return;const T={business_name:u.businessName,owner_name:u.ownerName,business_email:u.email,business_phone:u.phone,business_type:u.businessType,description:u.description,categories:u.categories,established_year:u.establishedYear,gst_number:u.gstNumber,pan_number:u.panNumber,business_address:u.address,city:u.city,state:u.state,pincode:u.pincode,landmark:u.landmark,delivery_radius:parseFloat(u.deliveryRadius),min_order_amount:parseFloat(u.minOrderAmount),delivery_fee:parseFloat(u.deliveryFee),free_delivery_above:parseFloat(u.freeDeliveryAbove),estimated_delivery_time:u.estimatedDeliveryTime,is_active:u.isOpen,monday_open:u.openingHours.monday.open,monday_close:u.openingHours.monday.close,monday_closed:u.openingHours.monday.closed,tuesday_open:u.openingHours.tuesday.open,tuesday_close:u.openingHours.tuesday.close,tuesday_closed:u.openingHours.tuesday.closed,wednesday_open:u.openingHours.wednesday.open,wednesday_close:u.openingHours.wednesday.close,wednesday_closed:u.openingHours.wednesday.closed,thursday_open:u.openingHours.thursday.open,thursday_close:u.openingHours.thursday.close,thursday_closed:u.openingHours.thursday.closed,friday_open:u.openingHours.friday.open,friday_close:u.openingHours.friday.close,friday_closed:u.openingHours.friday.closed,saturday_open:u.openingHours.saturday.open,saturday_close:u.openingHours.saturday.close,saturday_closed:u.openingHours.saturday.closed,sunday_open:u.openingHours.sunday.open,sunday_close:u.openingHours.sunday.close,sunday_closed:u.openingHours.sunday.closed,bank_name:u.bankName,account_number:u.accountNumber,ifsc_code:u.ifscCode,account_holder_name:u.accountHolderName,upi_id:u.upiId,auto_accept_orders:u.autoAcceptOrders},{response:M}=await Ie("/vendor-profiles/",{method:i?"POST":"PUT",body:JSON.stringify(T)});if(M.ok)r(!1),a(!1),alert("Profile saved successfully!");else throw new Error("Failed to save profile")}catch(C){console.error("Error saving profile:",C),alert("Failed to save profile. Please try again.")}},k=async(C,T)=>{if(!C)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(C.type)){alert("Please upload only PDF, JPG, JPEG, or PNG files.");return}if(C.size>5*1024*1024){alert("File size must be less than 5MB.");return}c(T);try{const P=new FormData;P.append(T,C);const E=localStorage.getItem("token"),{response:A}=await Ie("/vendor-profiles/",{method:"PATCH",body:P});if(!A.ok)throw new Error("Upload failed");const z=data,O=z[`${T}_url`]||z[T];y(T,O),alert("Document uploaded successfully!")}catch(P){console.error("Upload error:",P),alert("Failed to upload document. Please try again.")}finally{c(null)}},I=[{id:"basic",label:"Basic Info",icon:Mr},{id:"business",label:"Business",icon:gs},{id:"location",label:"Location",icon:Kt},{id:"operations",label:"Operations",icon:At},{id:"timing",label:"Timing",icon:dr},{id:"banking",label:"Banking",icon:to},{id:"documents",label:"Documents",icon:Lr},{id:"settings",label:"Settings",icon:bi}];return d?n.jsx(qt,{title:"Profile Management",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):m?n.jsx(qt,{title:"Profile Management",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:m}),n.jsx(ne,{onClick:_,children:"Retry"})]})})}):n.jsx(qt,{title:"Profile Management",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"font-semibold text-lg",children:"Profile Management"}),i&&n.jsx("p",{className:"text-sm text-gray-600",children:"Complete your profile setup"})]})]}),n.jsx(ne,{onClick:()=>s?N():r(!0),className:"bg-green-600 hover:bg-green-700",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ic,{className:"h-4 w-4 mr-2"}),"Save"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ju,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),n.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl",children:u.avatar}),s&&n.jsx(ne,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full p-0",children:n.jsx(Zi,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-semibold text-lg",children:u.businessName}),n.jsx("p",{className:"text-gray-600 text-sm",children:u.ownerName}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(De,{variant:u.isOpen?"default":"destructive",className:"text-xs",children:u.isOpen?"Open":"Closed"}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:"4.8 (342 reviews)"})]})]})]})]})}),n.jsx("div",{className:"bg-white",children:n.jsxs(Si,{value:e,onValueChange:t,className:"w-full",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsx(Hr,{className:"grid grid-cols-4 lg:grid-cols-8 w-full min-w-max",children:I.map(C=>n.jsxs(Ct,{value:C.id,className:"flex items-center gap-2 text-xs",children:[n.jsx(C.icon,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:C.label})]},C.id))})}),n.jsx(dt,{value:"basic",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"businessName",children:"Business Name *"}),n.jsx(ve,{id:"businessName",value:u.businessName,onChange:C=>y("businessName",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"ownerName",children:"Owner Name *"}),n.jsx(ve,{id:"ownerName",value:u.ownerName,onChange:C=>y("ownerName",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"email",children:"Email *"}),n.jsx(ve,{id:"email",type:"email",value:u.email,onChange:C=>y("email",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"phone",children:"Phone Number *"}),n.jsx(ve,{id:"phone",value:u.phone,onChange:C=>y("phone",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"whatsapp",children:"WhatsApp Number"}),n.jsx(ve,{id:"whatsapp",value:u.whatsapp,onChange:C=>y("whatsapp",C.target.value),disabled:!s})]})]})}),n.jsxs(dt,{value:"business",className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"businessType",children:"Business Type *"}),n.jsxs(Vt,{value:u.businessType,onValueChange:C=>y("businessType",C),disabled:!s,children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsx(zt,{children:x.map(C=>n.jsx(qe,{value:C.value,children:C.label},C.value))})]})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"establishedYear",children:"Established Year"}),n.jsx(ve,{id:"establishedYear",value:u.establishedYear,onChange:C=>y("establishedYear",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"gstNumber",children:"GST Number"}),n.jsx(ve,{id:"gstNumber",value:u.gstNumber,onChange:C=>y("gstNumber",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"panNumber",children:"PAN Number"}),n.jsx(ve,{id:"panNumber",value:u.panNumber,onChange:C=>y("panNumber",C.target.value),disabled:!s})]})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"description",children:"Business Description *"}),n.jsx(Xn,{id:"description",value:u.description,onChange:C=>y("description",C.target.value),disabled:!s,rows:3})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Categories"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:v.map(C=>n.jsx(De,{variant:u.categories.includes(C)?"default":"outline",className:"cursor-pointer",onClick:()=>{if(!s)return;const T=u.categories.includes(C)?u.categories.filter(M=>M!==C):[...u.categories,C];y("categories",T)},children:C},C))})]})]}),n.jsx(dt,{value:"location",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(fe,{htmlFor:"address",children:"Full Address *"}),n.jsx(Xn,{id:"address",value:u.address,onChange:C=>y("address",C.target.value),disabled:!s,rows:2})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"city",children:"City *"}),n.jsx(ve,{id:"city",value:u.city,onChange:C=>y("city",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"state",children:"State *"}),n.jsx(ve,{id:"state",value:u.state,onChange:C=>y("state",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"pincode",children:"Pincode *"}),n.jsx(ve,{id:"pincode",value:u.pincode,onChange:C=>y("pincode",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"landmark",children:"Landmark"}),n.jsx(ve,{id:"landmark",value:u.landmark,onChange:C=>y("landmark",C.target.value),disabled:!s})]})]})}),n.jsx(dt,{value:"operations",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"deliveryRadius",children:"Delivery Radius (km) *"}),n.jsx(ve,{id:"deliveryRadius",value:u.deliveryRadius,onChange:C=>y("deliveryRadius",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"minOrderAmount",children:"Minimum Order Amount () *"}),n.jsx(ve,{id:"minOrderAmount",value:u.minOrderAmount,onChange:C=>y("minOrderAmount",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"deliveryFee",children:"Delivery Fee () *"}),n.jsx(ve,{id:"deliveryFee",value:u.deliveryFee,onChange:C=>y("deliveryFee",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"freeDeliveryAbove",children:"Free Delivery Above ()"}),n.jsx(ve,{id:"freeDeliveryAbove",value:u.freeDeliveryAbove,onChange:C=>y("freeDeliveryAbove",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"estimatedDeliveryTime",children:"Estimated Delivery Time (mins) *"}),n.jsx(ve,{id:"estimatedDeliveryTime",value:u.estimatedDeliveryTime,onChange:C=>y("estimatedDeliveryTime",C.target.value),disabled:!s})]})]})}),n.jsxs(dt,{value:"timing",className:"p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(fe,{children:"Store Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm",children:"Closed"}),n.jsx(Zt,{checked:u.isOpen,onCheckedChange:C=>y("isOpen",C),disabled:!s}),n.jsx("span",{className:"text-sm",children:"Open"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(fe,{children:"Opening Hours"}),w.map(C=>n.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"w-20 text-sm font-medium capitalize",children:C}),n.jsx(Zt,{checked:!u.openingHours[C].closed,onCheckedChange:T=>b("openingHours",C,{...u.openingHours[C],closed:!T}),disabled:!s}),!u.openingHours[C].closed&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ve,{type:"time",value:u.openingHours[C].open,onChange:T=>b("openingHours",C,{...u.openingHours[C],open:T.target.value}),disabled:!s,className:"w-32"}),n.jsx("span",{className:"text-sm",children:"to"}),n.jsx(ve,{type:"time",value:u.openingHours[C].close,onChange:T=>b("openingHours",C,{...u.openingHours[C],close:T.target.value}),disabled:!s,className:"w-32"})]}),u.openingHours[C].closed&&n.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},C))]})]}),n.jsx(dt,{value:"banking",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"bankName",children:"Bank Name *"}),n.jsx(ve,{id:"bankName",value:u.bankName,onChange:C=>y("bankName",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"accountHolderName",children:"Account Holder Name *"}),n.jsx(ve,{id:"accountHolderName",value:u.accountHolderName,onChange:C=>y("accountHolderName",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"accountNumber",children:"Account Number *"}),n.jsx(ve,{id:"accountNumber",value:u.accountNumber,onChange:C=>y("accountNumber",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"ifscCode",children:"IFSC Code *"}),n.jsx(ve,{id:"ifscCode",value:u.ifscCode,onChange:C=>y("ifscCode",C.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"upiId",children:"UPI ID"}),n.jsx(ve,{id:"upiId",value:u.upiId,onChange:C=>y("upiId",C.target.value),disabled:!s})]})]})}),n.jsx(dt,{value:"documents",className:"p-4 space-y-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-base font-medium",children:"Business License"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upload your business registration certificate"})]}),n.jsx(De,{variant:u.businessLicense?"default":"outline",children:u.businessLicense?"Uploaded":"Required"})]}),u.businessLicense?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"Business License Document"}),s&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=T=>{var P;const M=(P=T.target.files)==null?void 0:P[0];M&&k(M,"business_license_file")},C.click()},disabled:o==="business_license_file",children:o==="business_license_file"?"Uploading...":"Replace"})]}):n.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=T=>{var P;const M=(P=T.target.files)==null?void 0:P[0];M&&k(M,"business_license_file")},C.click()},disabled:o==="business_license_file",children:[n.jsx(Lr,{className:"h-4 w-4 mr-2"}),o==="business_license_file"?"Uploading...":"Upload Business License"]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-base font-medium",children:"GST Certificate"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upload your GST registration certificate"})]}),n.jsx(De,{variant:u.gstCertificate?"default":"outline",children:u.gstCertificate?"Uploaded":"Optional"})]}),u.gstCertificate?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"GST Certificate Document"}),s&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=T=>{var P;const M=(P=T.target.files)==null?void 0:P[0];M&&k(M,"gst_certificate")},C.click()},disabled:o==="gst_certificate",children:o==="gst_certificate"?"Uploading...":"Replace"})]}):n.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=T=>{var P;const M=(P=T.target.files)==null?void 0:P[0];M&&k(M,"gst_certificate")},C.click()},disabled:o==="gst_certificate",children:[n.jsx(Lr,{className:"h-4 w-4 mr-2"}),o==="gst_certificate"?"Uploading...":"Upload GST Certificate"]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-base font-medium",children:"FSSAI License"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upload your food safety license (for food businesses)"})]}),n.jsx(De,{variant:u.fssaiLicense?"default":"outline",children:u.fssaiLicense?"Uploaded":"Optional"})]}),u.fssaiLicense?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"FSSAI License Document"}),s&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=T=>{var P;const M=(P=T.target.files)==null?void 0:P[0];M&&k(M,"fssai_license")},C.click()},disabled:o==="fssai_license",children:o==="fssai_license"?"Uploading...":"Replace"})]}):n.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=T=>{var P;const M=(P=T.target.files)==null?void 0:P[0];M&&k(M,"fssai_license")},C.click()},disabled:o==="fssai_license",children:[n.jsx(Lr,{className:"h-4 w-4 mr-2"}),o==="fssai_license"?"Uploading...":"Upload FSSAI License"]})]}),n.jsx("div",{className:"text-center py-2 text-gray-500 text-xs",children:"Supported formats: PDF, JPG, JPEG, PNG (Max 5MB)"})]})}),n.jsx(dt,{value:"settings",className:"p-4 space-y-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Auto Accept Orders"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Automatically accept new orders"})]}),n.jsx(Zt,{checked:u.autoAcceptOrders,onCheckedChange:C=>y("autoAcceptOrders",C),disabled:!s})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(fe,{children:"Notification Settings"}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Order Alerts"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Get notified for new orders"})]}),n.jsx(Zt,{checked:u.notificationSettings.orderAlerts,onCheckedChange:C=>b("notificationSettings","orderAlerts",C),disabled:!s})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Message Alerts"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Get notified for new messages"})]}),n.jsx(Zt,{checked:u.notificationSettings.messageAlerts,onCheckedChange:C=>b("notificationSettings","messageAlerts",C),disabled:!s})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Promotional Emails"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Receive promotional emails"})]}),n.jsx(Zt,{checked:u.notificationSettings.promotionalEmails,onCheckedChange:C=>b("notificationSettings","promotionalEmails",C),disabled:!s})]})]})]})})]})}),i&&n.jsxs("div",{className:"fixed bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-lg p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"Profile Completion"}),n.jsx("span",{className:"text-sm text-gray-600",children:"6/8 sections"})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"75%"}})}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Complete all sections to activate your store"})]})]})})},_se=()=>{const e=nt(),[t,s]=j.useState(!0),[r,i]=j.useState(""),[a,o]=j.useState(!1),[c,d]=j.useState(""),[f,m]=j.useState(!1);j.useEffect(()=>{(async()=>{var p;try{if(!await ke.isAuthenticated())return;const v=1,{response:w,data:y}=await Ie(`/vendor-profiles/${v}/`);if(!w.ok)throw new Error("Failed to fetch profile");const b=((p=y==null?void 0:y.user_info)==null?void 0:p.plain_password)||"";i(b)}catch(x){console.error(x)}})()},[]);const h=async()=>{if(!c){jf.error("New password is required");return}m(!0);try{const{simplePersistentAuth:u}=await We(async()=>{const{simplePersistentAuth:y}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:y}},[]);if(!await u.isVendorLoggedIn()){e("/vendor/login");return}const x=await u.getVendorAuth();x&&await ke.setAuth(x.token,x.user);const{response:v,data:w}=await Ie("/change-password/simple/",{method:"POST",body:JSON.stringify({new_password:c})});if(!v.ok)throw new Error(w.error||"Failed to change password");await ke.setAuth(w.token,await ke.getUser()),jf.success("Password changed successfully"),i(c),d(""),o(!1)}catch(u){jf.error(u instanceof Error?u.message:"Failed to change password")}finally{m(!1)}};return n.jsx(qt,{title:"Security & Login",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center gap-3 p-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"Security & Login"})]})}),n.jsx("div",{className:"p-4 space-y-6",children:n.jsxs("div",{className:"bg-white rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(bi,{className:"h-5 w-5 text-blue-600"}),n.jsx("h2",{className:"font-semibold",children:"Password"})]}),a?n.jsxs("div",{className:"space-y-4",children:[n.jsx(fe,{children:"New Password"}),n.jsx(ve,{type:"text",value:c,onChange:u=>d(u.target.value)}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{onClick:h,disabled:f,children:"Save"}),n.jsx(ne,{variant:"outline",onClick:()=>o(!1),disabled:f,children:"Cancel"})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(fe,{children:"Your Password"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(ve,{type:"text",value:r,disabled:!0,className:"bg-gray-100"}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>s(!t),children:t?n.jsx(ib,{className:"h-4 w-4"}):n.jsx(Nn,{className:"h-4 w-4"})})]}),n.jsx(ne,{onClick:()=>o(!0),disabled:f,children:"Change Password"})]})]})})]})})},Nse=()=>{const e=nt(),{toast:t}=hn(),[s,r]=j.useState("business"),[i,a]=j.useState(!1),[o,c]=j.useState(!0),[d,f]=j.useState(!1),[m,h]=j.useState(""),[u,p]=j.useState(null),[x,v]=j.useState([]),[w,y]=j.useState({businessName:"Business Name",ownerName:"Owner Name",categories:[],operatingHours:{monday:{open:"06:00",close:"21:00",closed:!1},tuesday:{open:"06:00",close:"21:00",closed:!1},wednesday:{open:"06:00",close:"21:00",closed:!1},thursday:{open:"06:00",close:"21:00",closed:!1},friday:{open:"06:00",close:"21:00",closed:!1},saturday:{open:"06:00",close:"21:00",closed:!1},sunday:{open:"07:00",close:"20:00",closed:!1}},deliverySettings:{deliveryRadius:"5",minOrderAmount:"200"},profileImage:null,isActive:!1,statusOverride:!1}),b=E=>{if(!E)return"";const[A,z]=E.split(":").map(Number),O=A>=12?"PM":"AM";return`${A%12||12}:${z.toString().padStart(2,"0")} ${O}`};j.useEffect(()=>{N(),_()},[]);const _=async()=>{try{const{response:E,data:A}=await Ie("/categories/");E.ok&&A.categories&&v(A.categories.map(z=>z.name))}catch(E){console.error("Failed to fetch categories:",E)}},N=async()=>{var E,A,z;try{const{simplePersistentAuth:O}=await We(async()=>{const{simplePersistentAuth:U}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:U}},[]);if(!await O.isVendorLoggedIn()){e("/vendor/login");return}const G=await O.getVendorAuth();G&&await ke.setAuth(G.token,G.user);const{response:X,data:Y}=await Ie("/vendor-profiles/");if(!X.ok)throw new Error("Failed to fetch company data");if(Y.results&&Y.results.length>0){const U=Y.results[0];p(U.id),y({businessName:U.business_name||"Business Name",ownerName:U.owner_name||"Owner Name",categories:Array.isArray(U.categories)?U.categories:typeof U.categories=="string"?JSON.parse(U.categories||"[]"):[],operatingHours:{monday:{open:U.monday_open||"",close:U.monday_close||"",closed:U.monday_closed||!1},tuesday:{open:U.tuesday_open||"",close:U.tuesday_close||"",closed:U.tuesday_closed||!1},wednesday:{open:U.wednesday_open||"",close:U.wednesday_close||"",closed:U.wednesday_closed||!1},thursday:{open:U.thursday_open||"",close:U.thursday_close||"",closed:U.thursday_closed||!1},friday:{open:U.friday_open||"",close:U.friday_close||"",closed:U.friday_closed||!1},saturday:{open:U.saturday_open||"",close:U.saturday_close||"",closed:U.saturday_closed||!1},sunday:{open:U.sunday_open||"",close:U.sunday_close||"",closed:U.sunday_closed||!1}},deliverySettings:{deliveryRadius:((E=U.delivery_radius)==null?void 0:E.toString())||"5",minOrderAmount:((A=U.min_order_amount)==null?void 0:A.toString())||"200"},profileImage:((z=U.user_info)==null?void 0:z.profile_picture)||null,isActive:U.is_active||!1,statusOverride:U.status_override||!1})}}catch(O){console.error("Error fetching company data:",O),h("Failed to load company data")}finally{c(!1)}},k=async()=>{try{f(!0);const{simplePersistentAuth:E}=await We(async()=>{const{simplePersistentAuth:$}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:$}},[]);if(!await E.isVendorLoggedIn()){e("/vendor/login");return}if(!u)throw new Error("Profile ID not found");const z=new FormData;z.append("business_name",w.businessName),z.append("owner_name",w.ownerName),z.append("categories",JSON.stringify(w.categories)),z.append("delivery_radius",w.deliverySettings.deliveryRadius),z.append("min_order_amount",w.deliverySettings.minOrderAmount);const{response:O}=await Ie(`/vendor-profiles/${u}/`,{method:"PUT",body:z});if(!O.ok){const $=await O.json();throw new Error($.detail||"Failed to update company data")}t({title:"Success",description:"Company information updated successfully!"}),a(!1),N()}catch(E){console.error("Error saving company data:",E),t({title:"Error",description:E instanceof Error?E.message:"Failed to save company data",variant:"destructive"})}finally{f(!1)}},I=async()=>{try{const{simplePersistentAuth:E}=await We(async()=>{const{simplePersistentAuth:G}=await import("./simplePersistentAuth-pu9lRszg.js");return{simplePersistentAuth:G}},[]);if(!await E.isVendorLoggedIn()){e("/vendor/login");return}if(!u)throw new Error("Profile ID not found");const z=!w.isActive,{response:O,data:$}=await Ie(`/vendor-profiles/${u}/toggle-status/`,{method:"POST",body:JSON.stringify({is_active:z})});if(!O.ok)throw new Error(($==null?void 0:$.error)||"Failed to toggle status");y(G=>({...G,isActive:$.vendor.is_active,statusOverride:$.vendor.status_override})),t({title:"Success",description:`Status set to ${z?"Active":"Inactive"}`})}catch(E){console.error("Error toggling status:",E),t({title:"Error",description:E instanceof Error?E.message:"Failed to toggle status",variant:"destructive"})}},C=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],T=[{id:"business",label:"Business Details",icon:gs},{id:"timing",label:"Timing",icon:dr}],M=(E,A)=>{y(z=>({...z,[E]:A}))},P=(E,A,z)=>{y(O=>({...O,[E]:{...O[E],[A]:z}}))};return o?n.jsx(qt,{title:"Company Information",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading company information..."})]})})}):m?n.jsx(qt,{title:"Company Information",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:m}),n.jsx(ne,{onClick:N,children:"Retry"})]})})}):n.jsx(qt,{title:"Company Information",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("div",{children:n.jsx("h1",{className:"font-semibold text-lg",children:"Company Information"})})]}),n.jsx(ne,{onClick:()=>i?k():a(!0),disabled:d,className:"bg-green-600 hover:bg-green-700",children:d?"Saving...":i?"Save Changes":"Edit"})]})}),n.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"relative",children:w.profileImage?n.jsx("img",{src:w.profileImage||"/images/default-profile.png",alt:"Business Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200",onError:E=>{console.error("Image failed to load:",E.currentTarget.src),E.currentTarget.src="/images/default-profile.png"}}):n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl border-2 border-gray-200",children:""})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-semibold text-lg",children:w.businessName}),n.jsx("p",{className:"text-gray-600 text-sm",children:w.ownerName}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(fe,{children:"Status:"}),n.jsx(Zt,{checked:w.isActive,onCheckedChange:I,disabled:!i}),n.jsxs("span",{className:"text-sm",children:[w.isActive?"Active":"Inactive",w.statusOverride&&" (Overridden)"]})]})]})]})}),n.jsx("div",{className:"bg-white",children:n.jsxs(Si,{value:s,onValueChange:r,className:"w-full",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsx(Hr,{className:"grid grid-cols-2 w-full min-w-max",children:T.map(E=>n.jsxs(Ct,{value:E.id,className:"flex items-center gap-2 text-xs",children:[n.jsx(E.icon,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:E.label})]},E.id))})}),n.jsxs(dt,{value:"business",className:"p-4 space-y-6",children:[n.jsxs("div",{className:"space-y-4 max-w-3xl",children:[n.jsx(fe,{children:"Business Categories"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:x.map(E=>n.jsx(De,{variant:w.categories.includes(E)?"default":"outline",className:"cursor-pointer",onClick:()=>{if(!i)return;const A=w.categories.includes(E)?w.categories.filter(z=>z!==E):[...w.categories,E];M("categories",A)},children:E},E))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Delivery Radius (km) *"}),n.jsx(ve,{value:w.deliverySettings.deliveryRadius,onChange:E=>P("deliverySettings","deliveryRadius",E.target.value),disabled:!i,className:"max-w-xs"})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Minimum Order Amount () *"}),n.jsx(ve,{value:w.deliverySettings.minOrderAmount,onChange:E=>P("deliverySettings","minOrderAmount",E.target.value),disabled:!i,className:"max-w-xs"})]})]})]}),n.jsx(dt,{value:"timing",className:"p-4 space-y-4",children:n.jsxs("div",{className:"space-y-3 max-w-3xl",children:[n.jsx(fe,{children:"Operating Hours"}),C.map(E=>n.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg flex-wrap",children:[n.jsx("div",{className:"w-20 text-sm font-medium capitalize",children:E}),n.jsx(Zt,{checked:!w.operatingHours[E].closed,onCheckedChange:A=>P("operatingHours",E,{...w.operatingHours[E],closed:!A}),disabled:!i}),!w.operatingHours[E].closed&&n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(ve,{type:"time",value:b(w.operatingHours[E].open),onChange:A=>P("operatingHours",E,{...w.operatingHours[E],open:A.target.value}),disabled:!i,className:"w-32"}),n.jsx("span",{className:"text-sm",children:"to"}),n.jsx(ve,{type:"time",value:b(w.operatingHours[E].close),onChange:A=>P("operatingHours",E,{...w.operatingHours[E],close:A.target.value}),disabled:!i,className:"w-32"})]}),w.operatingHours[E].closed&&n.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},E))]})})]})})]})})},Sse=()=>{const[e,t]=j.useState(""),[s,r]=j.useState(!1),[i,a]=j.useState(null),[o,c]=j.useState([]),[d,f]=j.useState(!0),[m,h]=j.useState(!1),[u,p]=j.useState({}),[x,v]=j.useState([]),[w,y]=j.useState([]),[b,_]=j.useState([]),[N,k]=j.useState([]),[I,C]=j.useState(!1),[T,M]=j.useState(!1),[P,E]=j.useState(null),[A,z]=j.useState([]),[O,$]=j.useState(null),[G,X]=j.useState(new Date().toISOString().split("T")[0]),[Y,U]=j.useState(!1),[V,R]=j.useState(!1),F=nt(),[q,W]=j.useState({category:"all",status:"all",stock:"all",sortBy:"name"});j.useEffect(()=>{se(),K()},[]);const K=async()=>{var re;try{const{apiRequest:Pe}=await We(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Kn);return{apiRequest:lt}},void 0),{data:Ae}=await Pe("/categories/");_(((re=Ae.categories)==null?void 0:re.map(lt=>lt.name))||[])}catch(Pe){console.error("Failed to fetch categories:",Pe)}},B=async re=>{try{const{apiRequest:Pe}=await We(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Kn);return{apiRequest:lt}},void 0),{data:Ae}=await Pe(`/categories/${re}/subcategories/`);k(Ae.subcategories||[])}catch(Pe){console.error("Failed to fetch subcategories:",Pe),k([])}},Z=async()=>{try{const{apiRequest:re}=await We(async()=>{const{apiRequest:Ae}=await Promise.resolve().then(()=>Kn);return{apiRequest:Ae}},void 0),{data:Pe}=await re("/featured-packages/");z(Pe.packages||[])}catch(re){console.error("Failed to fetch featured packages:",re),z([])}},se=async()=>{try{f(!0);const re=await bl.getProducts(),Pe=(re==null?void 0:re.results)||re||[];c(Array.isArray(Pe)?Pe:[])}catch(re){console.error("Failed to fetch products:",re),c([])}finally{f(!1)}},J=async(re,Pe)=>{try{await bl.updateProduct(re,Pe),await se()}catch(Ae){console.error("Failed to update product:",Ae)}},ie=async re=>{if(window.confirm("Are you sure you want to delete this product?"))try{await bl.deleteProduct(re),await se(),a(null)}catch(Pe){console.error("Failed to delete product:",Pe)}},le=async re=>{if(re.featured)try{const{apiRequest:Pe}=await We(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Kn);return{apiRequest:lt}},void 0),{data:Ae}=await Pe(`/products/${re.id}/featured-info/`);if(!Ae.can_modify){Zn.error("Cannot Cancel Featured",{description:"Featured period has already started and cannot be cancelled.",duration:4e3});return}E(re),M(!0)}catch(Pe){console.error("Failed to check featured info:",Pe)}else E(re),await Z(),C(!0)},Q=re=>{$(re)},ue=async()=>{if(P)try{R(!0);const{apiRequest:re}=await We(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Kn);return{apiRequest:lt}},void 0),{response:Pe,data:Ae}=await re(`/products/${P.id}/reschedule-featured/`,{method:"POST",body:JSON.stringify({start_date:G})});if(!Pe.ok)throw new Error(Ae.error||"Failed to reschedule");await se(),M(!1),E(null),X(new Date().toISOString().split("T")[0]),Zn.success("Featured Package Rescheduled!",{description:`Start date updated to ${new Date(G).toLocaleDateString()}`,duration:4e3})}catch(re){console.error("Failed to reschedule featured package:",re),Zn.error("Reschedule Failed",{description:re.message||"Failed to reschedule package",duration:4e3})}finally{R(!1)}},_e=async()=>{if(!(!P||!O))try{U(!0);const{apiRequest:re}=await We(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Kn);return{apiRequest:lt}},void 0),{response:Pe,data:Ae}=await re("/featured-packages/purchase/",{method:"POST",body:JSON.stringify({product_id:P.id,package_id:O.id,start_date:G})});if(!Pe.ok)throw new Error(Ae.error||"Failed to purchase package");await se(),C(!1),E(null),$(null),X(new Date().toISOString().split("T")[0]),Zn.success("Featured Package Purchased!",{description:`${P.name} is now featured until ${new Date(Ae.end_date).toLocaleDateString()}. Wallet balance: ${Ae.new_wallet_balance}`,duration:5e3})}catch(re){console.error("Failed to purchase featured package:",re),Zn.error("Purchase Failed",{description:re.message||"Failed to purchase package",duration:4e3})}finally{U(!1)}},me=async()=>{if(i!=null&&i.id&&u)try{const re={...u};x.length>0&&(re.image_files=x),await J(i.id,re),h(!1),p({}),v([]),y([]),a(null)}catch(re){console.error("Failed to save changes:",re)}},Se=re=>{const Pe=re.target.files;if(Pe){const Ae=Array.from(Pe),lt=Ae.map(it=>URL.createObjectURL(it));v(it=>[...it,...Ae]),y(it=>[...it,...lt])}},xe=re=>{URL.revokeObjectURL(w[re]),v(Pe=>Pe.filter((Ae,lt)=>lt!==re)),y(Pe=>Pe.filter((Ae,lt)=>lt!==re))},he=async re=>{if(i!=null&&i.id)try{const{apiRequest:Pe}=await We(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Kn);return{apiRequest:lt}},void 0);await Pe(`/products/${i.id}/images/${re}/`,{method:"DELETE"}),await se();const Ae=await bl.getProduct(i.id);a(Ae)}catch(Pe){console.error("Failed to delete image:",Pe)}},pe=async re=>{if(i!=null&&i.id)try{const{apiRequest:Pe}=await We(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Kn);return{apiRequest:lt}},void 0);await Pe(`/products/${i.id}/images/${re}/set-primary/`,{method:"POST"}),await se();const Ae=await bl.getProduct(i.id);a(Ae)}catch(Pe){console.error("Failed to set primary image:",Pe)}},te=Array.isArray(o)?o.filter(re=>{const Pe=re.name.toLowerCase().includes(e.toLowerCase())||re.sku&&re.sku.toLowerCase().includes(e.toLowerCase()),Ae=q.category==="all"||re.category===q.category,lt=q.status==="all"||re.status===q.status,it=q.stock==="all"||q.stock==="low"&&re.quantity<=5&&re.quantity>0||q.stock==="out"&&re.quantity===0||q.stock==="available"&&re.quantity>0;return Pe&&Ae&&lt&&it}).sort((re,Pe)=>{switch(q.sortBy){case"price":return Pe.price-re.price;case"stock":return Pe.quantity-re.quantity;default:return re.name.localeCompare(Pe.name)}}):[],ae=re=>{switch(re){case"active":return n.jsx("span",{className:"text-xs font-medium text-green-600",children:"Active"});case"draft":return n.jsx("span",{className:"text-xs font-medium text-yellow-600",children:"Draft"});case"archived":return n.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Archived"});default:return n.jsx("span",{className:"text-xs font-medium text-gray-600",children:re})}},oe=re=>re===0?n.jsx("span",{className:"text-xs font-medium text-red-600",children:"Out of Stock"}):re<=5?n.jsx("span",{className:"text-xs font-medium text-orange-600",children:"Low Stock"}):n.jsx("span",{className:"text-xs font-medium text-green-600",children:"In Stock"}),be=re=>{if(!re)return"";const Pe=document.createElement("div");return Pe.innerHTML=re,Pe.textContent||Pe.innerText||""},je=re=>re.images&&re.images.length>0?(re.images.find(Ae=>Ae.is_primary)||re.images[0]).image_url:null,we=re=>({Vegetables:"",Fruits:"",Dairy:"",Meat:"",Bakery:"",Beverages:"",Snacks:"",Grains:""})[re]||"";return n.jsx(qt,{title:"Product Management",children:n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[n.jsx(Te,{className:"",children:n.jsx(Oe,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx(At,{className:"h-4 w-4 mx-auto mb-0.5 text-blue-500"}),n.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.length)||0}),n.jsx("p",{className:"text-[10px] text-gray-600",children:"Total"})]})})}),n.jsx(Te,{className:"",children:n.jsx(Oe,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Vr,{className:"h-4 w-4 mx-auto mb-0.5 text-green-500"}),n.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(re=>re.status==="active").length)||0}),n.jsx("p",{className:"text-[10px] text-gray-600",children:"Active"})]})})}),n.jsx(Te,{className:"",children:n.jsx(Oe,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Nu,{className:"h-4 w-4 mx-auto mb-0.5 text-orange-500"}),n.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(re=>re.quantity<=5&&re.quantity>0).length)||0}),n.jsx("p",{className:"text-[10px] text-gray-600",children:"Low"})]})})}),n.jsx(Te,{className:"",children:n.jsx(Oe,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Nu,{className:"h-4 w-4 mx-auto mb-0.5 text-red-500"}),n.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(re=>re.quantity===0).length)||0}),n.jsx("p",{className:"text-[10px] text-gray-600",children:"Out"})]})})})]}),n.jsx(Te,{children:n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(ve,{placeholder:"Search products...",value:e,onChange:re=>t(re.target.value),className:"pl-10"})]}),n.jsx(ne,{variant:"outline",size:"icon",onClick:()=>r(!0),children:n.jsx(_i,{className:"h-4 w-4"})})]})})}),n.jsx("div",{children:d?n.jsxs("div",{className:"flex justify-center items-center py-8",children:[n.jsx(qn,{className:"h-6 w-6 animate-spin"}),n.jsx("span",{className:"ml-2",children:"Loading products..."})]}):te.length>0?n.jsx("div",{className:"grid grid-cols-2 gap-2",children:te.map(re=>n.jsx(Te,{className:"overflow-hidden",children:n.jsx(Oe,{className:"p-2",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-center relative",children:[je(re)?n.jsx("img",{src:je(re),alt:re.name,className:"w-12 h-12 mx-auto object-cover rounded"}):n.jsx("div",{className:"text-xl",children:we(re.category)}),re.featured&&n.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white text-xs px-1 py-0.5 rounded-full font-bold shadow-md",children:"FEATURED"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:re.name}),n.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",re.price]}),re.cost_price&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Cost: ",re.cost_price]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"text-xs text-gray-600",children:["Stock: ",re.quantity]}),oe(re.quantity)]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:re.category}),ae(re.status)]}),re.subcategory&&n.jsx("div",{className:"text-xs text-gray-500 truncate",children:re.subcategory}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Sold: ",re.total_sold||0]}),n.jsxs("div",{className:"flex gap-1 mt-1",children:[re.featured&&n.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1 rounded",children:""}),re.free_delivery&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1 rounded",children:""})]})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(ne,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>{a(re),h(!1),p({})},children:n.jsx(Nn,{className:"h-3 w-3"})}),n.jsx(ne,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>{a(re),h(!0),p(re),re.category&&B(re.category)},children:n.jsx(nm,{className:"h-3 w-3"})}),n.jsx(ne,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>ie(re.id),children:n.jsx(qa,{className:"h-3 w-3"})})]}),n.jsxs(ne,{variant:re.featured?"default":"outline",size:"sm",className:"w-full mt-1 p-1",onClick:()=>le(re),children:[n.jsx(dn,{className:`h-3 w-3 mr-1 ${re.featured?"fill-current":""}`}),re.featured?"Reschedule":"Mark Featured"]})]})})},re.id))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(At,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No products found"}),n.jsxs(ne,{className:"mt-4",onClick:()=>F("/vendor/add-product"),children:[n.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})]})}),n.jsx(Rs,{open:s,onOpenChange:r,children:n.jsxs(xs,{side:"bottom",className:"h-[400px]",children:[n.jsx(ys,{children:n.jsx(bs,{children:"Filter Products"})}),n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Category"}),n.jsxs(Vt,{value:q.category,onValueChange:re=>W({...q,category:re}),children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"all",children:"All Categories"}),Array.from(new Set((o||[]).map(re=>re.category))).map(re=>n.jsx(qe,{value:re,children:re},re))]})]})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Status"}),n.jsxs(Vt,{value:q.status,onValueChange:re=>W({...q,status:re}),children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"all",children:"All Status"}),n.jsx(qe,{value:"active",children:"Active"}),n.jsx(qe,{value:"draft",children:"Draft"}),n.jsx(qe,{value:"archived",children:"Archived"})]})]})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Stock Level"}),n.jsxs(Vt,{value:q.stock,onValueChange:re=>W({...q,stock:re}),children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"all",children:"All Stock Levels"}),n.jsx(qe,{value:"available",children:"In Stock"}),n.jsx(qe,{value:"low",children:"Low Stock"}),n.jsx(qe,{value:"out",children:"Out of Stock"})]})]})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Sort By"}),n.jsxs(Vt,{value:q.sortBy,onValueChange:re=>W({...q,sortBy:re}),children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"name",children:"Name"}),n.jsx(qe,{value:"price",children:"Price"}),n.jsx(qe,{value:"stock",children:"Stock"})]})]})]})]})]})}),n.jsx(Rs,{open:I,onOpenChange:re=>{C(re),re||($(null),X(new Date().toISOString().split("T")[0]))},children:n.jsxs(xs,{side:"bottom",className:"h-[70vh] overflow-y-auto",children:[n.jsx(ys,{children:n.jsx(bs,{children:"Choose Featured Package"})}),n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Select a package to feature your product: ",n.jsx("strong",{children:P==null?void 0:P.name})]}),O?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50",children:[n.jsx("h3",{className:"font-semibold text-blue-900",children:O.name}),n.jsxs("p",{className:"text-sm text-blue-700",children:[O.duration_days," days - ",O.amount]})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"start-date",children:"Start Date"}),n.jsx(ve,{id:"start-date",type:"date",value:G,min:new Date().toISOString().split("T")[0],onChange:re=>X(re.target.value)}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Featured until: ",new Date(new Date(G).getTime()+O.duration_days*24*60*60*1e3).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>$(null),disabled:Y,children:"Back"}),n.jsx(ne,{className:"flex-1",onClick:_e,disabled:Y,children:Y?n.jsxs(n.Fragment,{children:[n.jsx(qn,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Pay ${O.amount}`})]})]}):A.length>0?n.jsx("div",{className:"grid grid-cols-1 gap-3",children:A.map(re=>n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:re.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[re.duration_days," days"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-lg font-bold text-green-600",children:["",re.amount]}),n.jsx("p",{className:"text-xs text-gray-500 capitalize",children:re.package_type})]})]}),re.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:re.description}),n.jsx(ne,{className:"w-full",onClick:()=>Q(re),children:"Select This Package"})]},re.id))}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No featured packages available"})})]})]})}),n.jsx(Rs,{open:T,onOpenChange:re=>{M(re),re||X(new Date().toISOString().split("T")[0])},children:n.jsxs(xs,{side:"bottom",className:"h-[40vh]",children:[n.jsx(ys,{children:n.jsx(bs,{children:"Reschedule Featured Package"})}),n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Update the start date for: ",n.jsx("strong",{children:P==null?void 0:P.name})]}),n.jsxs("div",{children:[n.jsx(fe,{htmlFor:"reschedule-date",children:"New Start Date"}),n.jsx(ve,{id:"reschedule-date",type:"date",value:G,min:new Date().toISOString().split("T")[0],onChange:re=>X(re.target.value)})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>M(!1),disabled:V,children:"Cancel"}),n.jsx(ne,{className:"flex-1",onClick:ue,disabled:V,children:V?n.jsxs(n.Fragment,{children:[n.jsx(qn,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):"Update Date"})]})]})]})}),n.jsx(Rs,{open:!!i,onOpenChange:()=>{a(null),h(!1),p({}),v([]),y([])},children:n.jsxs(xs,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[n.jsx(ys,{children:n.jsxs(bs,{className:"flex items-center justify-between",children:[n.jsx("span",{children:m?"Edit Product":"Product Details"}),n.jsx("div",{className:"flex gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{h(!1),p({}),v([]),y([])},children:"Cancel"}),n.jsxs(ne,{size:"sm",onClick:me,children:[n.jsx(Ic,{className:"h-4 w-4 mr-1"}),"Save"]})]}):n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{h(!0),p(i||{})},children:[n.jsx(nm,{className:"h-4 w-4 mr-1"}),"Edit"]})})]})}),i&&n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Product Images"}),i.images&&i.images.length>0?n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:i.images.map((re,Pe)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:re.image_url,alt:`Product ${Pe+1}`,className:"w-full h-20 object-cover rounded border",onError:Ae=>{var lt;console.log("Image failed to load:",re.image_url),Ae.currentTarget.style.display="none",(lt=Ae.currentTarget.nextElementSibling)==null||lt.classList.remove("hidden")}}),n.jsx("div",{className:"hidden w-full h-20 bg-gray-100 rounded border flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Zi,{className:"h-6 w-6 mx-auto mb-1 text-gray-400"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),m&&n.jsx("button",{type:"button",onClick:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),he(re.id)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:n.jsx(as,{className:"h-3 w-3"})}),re.is_primary?n.jsx("div",{className:"absolute top-1 left-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Main"}):m?n.jsx("button",{type:"button",onClick:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),pe(re.id)},className:"absolute top-1 left-1 bg-gray-500 hover:bg-blue-500 text-white text-xs px-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Set Main"}):null]},`existing-image-${re.id}`))}):n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx(Zi,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm",children:"No images uploaded"})]}),w.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"New Images:"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:w.map((re,Pe)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:re,alt:`New ${Pe+1}`,className:"w-full h-20 object-cover rounded border"}),n.jsx("button",{type:"button",onClick:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),xe(Pe)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:n.jsx(as,{className:"h-3 w-3"})})]},`new-image-${Pe}`))})]}),m&&n.jsxs("div",{className:"mt-2",children:[n.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Se,className:"hidden",id:"image-upload"}),n.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[n.jsx(Zi,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add More Images"})]})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Product Name"}),m?n.jsx(ve,{value:u.name||"",onChange:re=>p({...u,name:re.target.value})}):n.jsx("p",{className:"text-sm font-medium",children:i.name})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Selling Price"}),m?n.jsx(ve,{type:"number",value:u.price||"",onChange:re=>p({...u,price:Number(re.target.value)})}):n.jsxs("p",{className:"text-sm font-medium",children:["",i.price]})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Stock Quantity"}),m?n.jsx(ve,{type:"number",value:u.quantity||"",onChange:re=>p({...u,quantity:Number(re.target.value)})}):n.jsx("p",{className:"text-sm font-medium",children:i.quantity})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Category"}),m?n.jsxs(Vt,{value:u.category||i.category,onValueChange:re=>{p({...u,category:re,subcategory:""}),B(re)},children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsx(zt,{children:b.map(re=>n.jsx(qe,{value:re,children:re},re))})]}):n.jsx("p",{className:"text-sm font-medium",children:i.category})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Subcategory"}),m?n.jsxs(Vt,{value:u.subcategory||i.subcategory||"",onValueChange:re=>p({...u,subcategory:re}),children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select subcategory"})}),n.jsx(zt,{children:N.map(re=>n.jsx(qe,{value:re,children:re},re))})]}):n.jsx("p",{className:"text-sm font-medium",children:i.subcategory||"N/A"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(fe,{children:"Cost Price"}),m?n.jsx(ve,{type:"number",value:u.cost_price||"",onChange:re=>p({...u,cost_price:Number(re.target.value)||void 0})}):n.jsx("p",{className:"text-sm font-medium",children:i.cost_price?`${i.cost_price}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"SKU"}),m?n.jsx(ve,{value:u.sku||"",onChange:re=>p({...u,sku:re.target.value})}):n.jsx("p",{className:"text-sm font-medium",children:i.sku||"N/A"})]})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Status"}),m?n.jsxs(Vt,{value:u.status||i.status,onValueChange:re=>p({...u,status:re}),children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"active",children:"Active"}),n.jsx(qe,{value:"draft",children:"Draft"}),n.jsx(qe,{value:"archived",children:"Archived"})]})]}):n.jsx("div",{children:ae(i.status)})]}),n.jsxs("div",{children:[n.jsx(fe,{children:"Description"}),m?n.jsx(Xn,{value:be(u.description||""),onChange:re=>p({...u,description:re.target.value}),rows:3}):n.jsx("p",{className:"text-sm text-gray-600",children:be(i.description)})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(fe,{children:"Free Delivery"}),m?n.jsx(Zt,{checked:u.free_delivery??i.free_delivery,onCheckedChange:re=>p({...u,free_delivery:re})}):n.jsx(Zt,{checked:i.free_delivery,disabled:!0})]}),i.tags&&i.tags.length>0&&n.jsxs("div",{children:[n.jsx(fe,{children:"Tags"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i.tags.map((re,Pe)=>n.jsx(De,{variant:"secondary",className:"text-xs",children:re},Pe))})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2 border-t",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-xs text-gray-500",children:"Total Sold"}),n.jsxs("p",{className:"text-sm font-medium",children:[i.total_sold||0," units"]})]}),n.jsxs("div",{children:[n.jsx(fe,{className:"text-xs text-gray-500",children:"Created"}),n.jsx("p",{className:"text-xs",children:i.created_at?new Date(i.created_at).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx(fe,{className:"text-xs text-gray-500",children:"Updated"}),n.jsx("p",{className:"text-xs",children:i.updated_at?new Date(i.updated_at).toLocaleDateString():"N/A"})]})]})]})]})]})})]})})},kse=()=>{const e=nt(),{toast:t}=hn(),[s,r]=j.useState([]),[i,a]=j.useState(!0);j.useEffect(()=>{o();const h=u=>{const p=u.detail;r(x=>[p,...x])};return window.addEventListener("newNotification",h),()=>{window.removeEventListener("newNotification",h)}},[]);const o=async()=>{try{a(!0);const h=await Wt.getNotifications();r(h)}catch(h){console.error("Failed to load notifications:",h),t({title:"Error",description:"Failed to load notifications",variant:"destructive"})}finally{a(!1)}},c=async h=>{if(h.read||(await Wt.markAsRead(h.id),r(u=>u.map(p=>p.id===h.id?{...p,read:!0}:p))),h.action_url)e(h.action_url);else switch(h.type){case"order":case"refund":case"refund_request":case"order_status":case"status_change":e("/vendor/orders");break;case"stock_alert":case"low_stock":e("/vendor/products");break;case"payment":e("/vendor/wallet");break;case"message":e("/vendor/messages");break;default:e("/vendor/orders")}},d=async()=>{try{await Wt.markAllAsRead(),r(h=>h.map(u=>({...u,read:!0}))),t({title:"Success",description:"All notifications marked as read"})}catch{t({title:"Error",description:"Failed to mark notifications as read",variant:"destructive"})}},f=h=>{switch(h){case"order":return n.jsx(At,{className:"h-5 w-5 text-green-600"});case"refund":case"refund_request":return n.jsx(yi,{className:"h-5 w-5 text-red-600"});case"stock_alert":case"low_stock":return n.jsx(Nu,{className:"h-5 w-5 text-orange-600"});case"order_status":case"status_change":return n.jsx(Vr,{className:"h-5 w-5 text-blue-600"});case"payment":return n.jsx(to,{className:"h-5 w-5 text-green-600"});case"message":return n.jsx(lb,{className:"h-5 w-5 text-purple-600"});default:return n.jsx(lr,{className:"h-5 w-5 text-gray-600"})}},m=s.filter(h=>!h.read).length;return i?n.jsx(qt,{title:"Notifications",children:n.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(h=>n.jsx(Te,{className:"animate-pulse",children:n.jsx(Oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})})},h))})}):n.jsx(qt,{title:"Notifications",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"All Notifications"}),m>0&&n.jsxs(De,{variant:"secondary",children:[m," unread"]})]}),m>0&&n.jsx(ne,{variant:"outline",size:"sm",onClick:d,children:"Mark all as read"})]}),n.jsx("div",{className:"space-y-3",children:s.length===0?n.jsx(Te,{children:n.jsxs(Oe,{className:"p-8 text-center",children:[n.jsx(lr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),n.jsx("p",{className:"text-gray-500",children:"You're all caught up! New notifications will appear here."})]})}):s.map(h=>n.jsx(Te,{className:`cursor-pointer transition-colors hover:bg-gray-50 ${h.read?"":"border-l-4 border-l-blue-500 bg-blue-50"}`,onClick:()=>c(h),children:n.jsx(Oe,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"mt-1",children:f(h.type)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx("h3",{className:`font-medium text-sm ${h.read?"text-gray-700":"text-gray-900"}`,children:h.title}),n.jsx("span",{className:"text-xs text-gray-500",children:new Date(h.created_at).toLocaleString()})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h.message}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx(De,{variant:"outline",className:`text-xs ${h.type==="order"?"border-green-200 text-green-700":h.type==="refund"||h.type==="refund_request"?"border-red-200 text-red-700":h.type==="stock_alert"||h.type==="low_stock"?"border-orange-200 text-orange-700":h.type==="order_status"||h.type==="status_change"?"border-blue-200 text-blue-700":h.type==="payment"?"border-green-200 text-green-700":h.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:h.type==="refund_request"?"refund":h.type==="stock_alert"?"stock":h.type==="order_status"?"status":h.type}),!h.read&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})]})})},h.id))})]})})},Cse=()=>{const[e]=Eb();nt();const t=e.get("type")||"orders",[s,r]=j.useState([]),[i,a]=j.useState(!0),[o,c]=j.useState("all"),[d,f]=j.useState(!1),[m,h]=j.useState(""),[u,p]=j.useState(""),[x,v]=j.useState(1),[w,y]=j.useState(1),[b,_]=j.useState(0),N=20,[k,I]=j.useState({total:0,active:0,pending:0,completed:0});j.useEffect(()=>{T()},[t,m,u,x]);const C=R=>{v(R)},T=async()=>{try{if(a(!0),t==="orders"){const R=new URLSearchParams({page:x.toString(),page_size:N.toString()});m&&R.append("date_from",m),u&&R.append("date_to",u);const{response:F,data:q}=await Ie(`/vendor/orders/?${R}`);if(F.ok&&q){let W=q.results||q||[];if(y(Math.ceil((q.count||W.length)/N)),_(q.count||W.length),m&&u){const K=new Date(m),B=new Date(u);B.setHours(23,59,59,999),W=W.filter(Z=>{const se=new Date(Z.created_at);return se>=K&&se<=B})}r(W),I({total:W.length,pending:W.filter(K=>K.status==="pending").length,completed:W.filter(K=>K.status==="delivered").length,active:W.filter(K=>["confirmed","out_for_delivery"].includes(K.status)).length})}}else if(t==="products"){const R=new URLSearchParams({page:x.toString(),page_size:N.toString()}),{response:F,data:q}=await Ie(`/products/?${R}`);if(F.ok&&q){const W=q.results||q||[];y(Math.ceil((q.count||W.length)/N)),_(q.count||W.length),r(W),I({total:W.length,active:W.filter(K=>K.quantity>10).length,pending:W.filter(K=>K.quantity>0&&K.quantity<=10).length,completed:W.filter(K=>K.quantity===0).length})}}else if(t==="revenue"){const{response:R,data:F}=await Ie("/vendor/orders/");if(R.ok&&F){let q=F.results||F||[];const W=q.filter(B=>B.status==="delivered");if(m&&u){const B=new Date(m),Z=new Date(u);Z.setHours(23,59,59,999),q=W.filter(se=>{const J=new Date(se.created_at);return J>=B&&J<=Z})}else q=W;r(q);const K=q.reduce((B,Z)=>B+parseFloat(Z.total_amount||0),0);I({total:K,active:q.length,pending:K>0?K/q.length:0,completed:q.filter(B=>new Date(B.created_at).getMonth()===new Date().getMonth()).length})}}else if(t==="customers"){const{response:R,data:F}=await Ie("/vendor/orders/");if(R.ok&&F){const q=F.results||F||[],W=new Map;q.forEach(B=>{var J,ie;const Z=((J=B.customer_details)==null?void 0:J.id)||B.delivery_phone;W.has(Z)||W.set(Z,{id:Z,name:((ie=B.customer_details)==null?void 0:ie.username)||B.delivery_name,phone:B.delivery_phone,orders:0,totalSpent:0,lastOrder:B.created_at});const se=W.get(Z);se.orders+=1,B.status==="delivered"&&(se.totalSpent+=parseFloat(B.total_amount||0))});const K=Array.from(W.values());r(K),I({total:K.length,active:K.filter(B=>B.orders>1).length,pending:K.filter(B=>B.orders===1).length,completed:K.filter(B=>B.totalSpent>0).length})}}}catch(R){console.error("Error fetching data:",R)}finally{a(!1)}},M=()=>{switch(t){case"orders":return"Orders Management";case"revenue":return"Revenue Analytics";case"products":return"Products Overview";case"customers":return"Customer Insights";default:return"Summary"}},P=()=>{switch(t){case"orders":return{total:"Total Orders",active:"Processing",pending:"Pending",completed:"Delivered"};case"products":return{total:"Total Products",active:"In Stock",pending:"Low Stock",completed:"Out of Stock"};case"revenue":return{total:"Total Revenue",active:"Orders",pending:"Avg Order",completed:"This Month"};case"customers":return{total:"Total Customers",active:"Repeat Buyers",pending:"New Customers",completed:"Paid Customers"};default:return{total:"Total",active:"Active",pending:"Pending",completed:"Completed"}}},E=(R,F)=>t==="revenue"&&(R==="total"||R==="pending")?`Rs${F.toFixed(2)}`:F.toString(),A=()=>{let R="",F="";t==="orders"?(R=[["Date","Order Number","Customer","Amount","Status","Items"].join(","),...s.map(B=>{var Z;return[new Date(B.created_at).toLocaleDateString(),B.order_number,`"${B.delivery_name||"N/A"}"`,parseFloat(B.total_amount||0).toFixed(2),B.status,((Z=B.items)==null?void 0:Z.length)||0].join(",")})].join(`
`),F="orders-report"):t==="products"?(R=[["Name","Price","Stock","Status","Category"].join(","),...s.map(B=>[`"${B.name}"`,parseFloat(B.price).toFixed(2),B.quantity,B.quantity>10?"In Stock":B.quantity>0?"Low Stock":"Out of Stock",`"${B.category||"N/A"}"`].join(","))].join(`
`),F="products-report"):t==="revenue"?(R=[["Date","Order Number","Customer","Revenue"].join(","),...s.map(B=>[new Date(B.created_at).toLocaleDateString(),B.order_number,`"${B.delivery_name||"N/A"}"`,parseFloat(B.total_amount||0).toFixed(2)].join(","))].join(`
`),F="revenue-report"):t==="customers"&&(R=[["Name","Phone","Orders","Total Spent","Last Order"].join(","),...s.map(B=>[`"${B.name}"`,B.phone,B.orders,B.totalSpent.toFixed(2),new Date(B.lastOrder).toLocaleDateString()].join(","))].join(`
`),F="customers-report");const q=new Blob([R],{type:"text/csv"}),W=window.URL.createObjectURL(q),K=document.createElement("a");K.href=W,K.download=`${F}-${m||"all"}-${u||new Date().toISOString().split("T")[0]}.csv`,K.click(),window.URL.revokeObjectURL(W)},z=()=>{const R=new Date().toLocaleDateString(),F=m&&u?`${m} to ${u}`:"All Time",q=P(),W=`
===========================================
           ${M().toUpperCase()}
===========================================
Generated: ${R}
Period: ${F}

SUMMARY
-------------------------------------------
${q.total}: ${E("total",k.total)}
${q.active}: ${E("active",k.active)}
${q.pending}: ${E("pending",k.pending)}
${q.completed}: ${E("completed",k.completed)}

DETAILS (${s.length} records)
-------------------------------------------
${t==="orders"?s.map(B=>`${new Date(B.created_at).toLocaleDateString()} | ${B.order_number} | ${B.delivery_name} | Rs${parseFloat(B.total_amount||0).toFixed(2)} | ${B.status}`).join(`
`):t==="products"?s.map(B=>`${B.name} | Rs${parseFloat(B.price).toFixed(2)} | Stock: ${B.quantity}`).join(`
`):t==="revenue"?s.map(B=>`${new Date(B.created_at).toLocaleDateString()} | ${B.order_number} | Rs${parseFloat(B.total_amount||0).toFixed(2)}`).join(`
`):s.map(B=>`${B.name} | ${B.phone} | ${B.orders} orders | Rs${B.totalSpent.toFixed(2)}`).join(`
`)}

===========================================
    `,K=window.open("","_blank");K==null||K.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${W}</pre>`),K==null||K.print()},O=()=>{const R=P(),F=`${M()}\\n\\n${R.total}: ${E("total",k.total)}\\n${R.active}: ${E("active",k.active)}\\n${R.pending}: ${E("pending",k.pending)}\\n${R.completed}: ${E("completed",k.completed)}\\n\\nTotal Records: ${s.length}`;if(navigator.share)navigator.share({title:M(),text:F});else{const q=`https://wa.me/?text=${encodeURIComponent(F)}`;window.open(q,"_blank")}},$=()=>{v(1),T(),f(!1)},G=()=>{h(""),p(""),v(1),T(),f(!1)},X=R=>{if(R==="all")return s;if(t==="orders"){if(R==="pending")return s.filter(F=>F.status==="pending");if(R==="active")return s.filter(F=>["confirmed","out_for_delivery"].includes(F.status));if(R==="completed")return s.filter(F=>F.status==="delivered")}else if(t==="products"){if(R==="active")return s.filter(F=>F.quantity>10);if(R==="pending")return s.filter(F=>F.quantity>0&&F.quantity<=10);if(R==="completed")return s.filter(F=>F.quantity===0)}return s},Y=R=>new Date(R).toLocaleDateString(),U=R=>new Date(R).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),V=P();return n.jsx(qt,{title:M(),children:n.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[n.jsx("div",{className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx(Te,{children:n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(Vr,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:V.total}),n.jsx("p",{className:"text-sm font-bold text-blue-600",children:E("total",k.total)})]})]})})}),n.jsx(Te,{children:n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(ju,{className:"h-4 w-4 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:V.active}),n.jsx("p",{className:"text-sm font-bold text-green-600",children:E("active",k.active)})]})]})})}),n.jsx(Te,{children:n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx(_u,{className:"h-4 w-4 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:V.pending}),n.jsx("p",{className:"text-sm font-bold text-orange-600",children:E("pending",k.pending)})]})]})})}),n.jsx(Te,{children:n.jsx(Oe,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(At,{className:"h-4 w-4 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:V.completed}),n.jsx("p",{className:"text-sm font-bold text-purple-600",children:E("completed",k.completed)})]})]})})})]})}),n.jsx("div",{className:"px-4",children:n.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:M()}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:z,children:n.jsx(cb,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:A,children:n.jsx(Wl,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:O,children:n.jsx(Ho,{className:"h-4 w-4"})}),(t==="orders"||t==="revenue")&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>f(!0),children:n.jsx(_i,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:T,children:n.jsx(yi,{className:"h-4 w-4"})})]})]}),n.jsxs(Si,{value:o,onValueChange:c,className:"w-full",children:[n.jsx("div",{className:"border-b border-gray-100 overflow-x-auto",children:n.jsxs(Hr,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[n.jsxs(Ct,{value:"all",className:"text-xs py-2 px-3",children:["All (",s.length,")"]}),t==="orders"&&n.jsxs(n.Fragment,{children:[n.jsxs(Ct,{value:"pending",className:"text-xs py-2 px-3",children:["Pending (",k.pending,")"]}),n.jsxs(Ct,{value:"active",className:"text-xs py-2 px-3",children:["Processing (",k.active,")"]}),n.jsxs(Ct,{value:"completed",className:"text-xs py-2 px-3",children:["Delivered (",k.completed,")"]})]}),t==="products"&&n.jsxs(n.Fragment,{children:[n.jsxs(Ct,{value:"active",className:"text-xs py-2 px-3",children:["In Stock (",k.active,")"]}),n.jsxs(Ct,{value:"pending",className:"text-xs py-2 px-3",children:["Low Stock (",k.pending,")"]}),n.jsxs(Ct,{value:"completed",className:"text-xs py-2 px-3",children:["Out of Stock (",k.completed,")"]})]})]})}),n.jsx(dt,{value:"all",className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:i?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(yi,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading data..."})]}):X("all").length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(At,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-500",children:"No data found"})]}):X("all").map((R,F)=>n.jsxs("div",{className:"p-4",children:[t==="orders"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(At,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",R.order_number]}),n.jsx("p",{className:"text-xs text-gray-600",children:R.delivery_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Y(R.created_at)," at ",U(R.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(R.total_amount||0).toFixed(2)]}),n.jsx(De,{variant:"default",className:"text-xs",children:R.status})]})]}),t==="products"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(gs,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:R.name}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(R.price).toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",R.quantity]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx(De,{className:`text-xs ${R.quantity>10?"bg-green-100 text-green-800":R.quantity>0?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:R.quantity>10?"In Stock":R.quantity>0?"Low Stock":"Out of Stock"})})]}),t==="revenue"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Vr,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",R.order_number]}),n.jsx("p",{className:"text-xs text-gray-600",children:R.delivery_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Y(R.created_at)," at ",U(R.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(R.total_amount||0).toFixed(2)]}),n.jsx(De,{variant:"default",className:"text-xs",children:"revenue"})]})]}),t==="customers"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx(db,{className:"h-5 w-5 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:R.name}),n.jsx("p",{className:"text-xs text-gray-600",children:R.phone}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Last order: ",Y(R.lastOrder)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",R.totalSpent.toFixed(2)]}),n.jsxs(De,{variant:"default",className:"text-xs",children:[R.orders," orders"]})]})]})]},R.id||F))})}),(t==="orders"||t==="products")&&["pending","active","completed"].map(R=>n.jsx(dt,{value:R,className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:X(R).map((F,q)=>n.jsxs("div",{className:"p-4",children:[t==="orders"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(At,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",F.order_number]}),n.jsx("p",{className:"text-xs text-gray-600",children:F.delivery_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Y(F.created_at)," at ",U(F.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(F.total_amount||0).toFixed(2)]}),n.jsx(De,{variant:"default",className:"text-xs",children:F.status})]})]}),t==="products"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(gs,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.name}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(F.price).toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",F.quantity]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx(De,{className:`text-xs ${F.quantity>10?"bg-green-100 text-green-800":F.quantity>0?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:F.quantity>10?"In Stock":F.quantity>0?"Low Stock":"Out of Stock"})})]})]},F.id||q))})},R))]})]})}),w>1&&n.jsx("div",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(x-1)*N+1," to ",Math.min(x*N,b)," of ",b," records"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>C(x-1),disabled:x===1,children:"Previous"}),n.jsxs("span",{className:"text-sm font-medium",children:[x," of ",w]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>C(x+1),disabled:x===w,children:"Next"})]})]})}),n.jsx(Rs,{open:d,onOpenChange:f,children:n.jsxs(xs,{side:"right",className:"w-full sm:w-80",children:[n.jsx(ys,{className:"pb-4",children:n.jsx(bs,{children:"Filter by Date Range"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-sm font-medium mb-2 block",children:"From Date"}),n.jsx(ve,{type:"date",value:m,onChange:R=>h(R.target.value),className:"h-9 text-sm"})]}),n.jsxs("div",{children:[n.jsx(fe,{className:"text-sm font-medium mb-2 block",children:"To Date"}),n.jsx(ve,{type:"date",value:u,onChange:R=>p(R.target.value),className:"h-9 text-sm"})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(ne,{onClick:$,className:"flex-1",children:"Apply Filter"}),n.jsx(ne,{variant:"outline",onClick:G,className:"flex-1",children:"Clear"})]}),(m||u)&&n.jsx("div",{className:"pt-4 border-t",children:n.jsx("p",{className:"text-sm text-gray-600",children:m&&u?`Showing: ${m} to ${u}`:m?`From: ${m}`:u?`Until: ${u}`:""})})]})]})})]})})};function Pse(){const e=nt(),{toast:t}=hn(),[s,r]=j.useState("dashboard"),[i,a]=j.useState(!0),[o,c]=j.useState("30"),[d,f]=j.useState(""),[m,h]=j.useState(""),[u,p]=j.useState("all"),[x,v]=j.useState(!1),[w,y]=j.useState("csv"),[b,_]=j.useState([]),[N,k]=j.useState([]),[I,C]=j.useState([]),[T,M]=j.useState({totalRevenue:0,totalOrders:0,avgOrderValue:0,topProducts:[],revenueChart:[],orderChart:[],productPerformance:[],customerInsights:{totalCustomers:0,returningCustomers:0,newCustomers:0}});j.useEffect(()=>{P()},[o,d,m,u]);const P=async()=>{try{a(!0);const{response:W,data:K}=await Ie("/vendor/orders/");if(W.ok){const B=K.results||K||[];_(B);const{response:Z,data:se}=await Ie("/products/");if(Z.ok){const J=se.results||se||[];k(J),E(B,J),X(B)}}}catch(W){console.error("Error fetching data:",W),t({title:"Error",description:"Failed to load analytics data",variant:"destructive"})}finally{a(!1)}},E=(W,K)=>{const B=A(W),Z=B.filter(me=>me.status==="delivered"),se=Z.reduce((me,Se)=>me+parseFloat(Se.total_amount||0),0),J=B.length,ie=J>0?se/Z.length:0,le=z(Z),Q=O(B),ue=$(Z),_e=G(B);M({totalRevenue:se,totalOrders:J,avgOrderValue:ie,topProducts:ue.slice(0,5),revenueChart:le,orderChart:Q,productPerformance:ue,customerInsights:_e})},A=W=>{let K=W;if(o!=="custom"){const B=parseInt(o),Z=new Date;Z.setDate(Z.getDate()-B),K=W.filter(se=>new Date(se.created_at)>=Z)}else d&&m&&(K=W.filter(B=>{const Z=new Date(B.created_at);return Z>=new Date(d)&&Z<=new Date(m)}));return u!=="all"&&(K=K.filter(B=>{var Z;return(Z=B.items)==null?void 0:Z.some(se=>{var J;return((J=se.product_details)==null?void 0:J.id)===parseInt(u)})})),K},z=W=>{const K=[];for(let B=29;B>=0;B--){const Z=new Date;Z.setDate(Z.getDate()-B);const se=W.filter(ie=>new Date(ie.created_at).toDateString()===Z.toDateString()),J=se.reduce((ie,le)=>ie+parseFloat(le.total_amount||0),0);K.push({date:Z.toLocaleDateString("en-US",{month:"short",day:"numeric"}),revenue:J,orders:se.length})}return K},O=W=>{const K={pending:0,confirmed:0,preparing:0,out_for_delivery:0,delivered:0,cancelled:0};return W.forEach(B=>{K.hasOwnProperty(B.status)&&K[B.status]++}),Object.entries(K).map(([B,Z])=>({status:B.replace("_"," ").replace(/\b\w/g,se=>se.toUpperCase()),count:Z,percentage:W.length>0?(Z/W.length*100).toFixed(1):0}))},$=(W,K)=>{const B={};return W.forEach(Z=>{var se;(se=Z.items)==null||se.forEach(J=>{var le;const ie=(le=J.product_details)==null?void 0:le.id;ie&&(B[ie]||(B[ie]={id:ie,name:J.product_name,totalSold:0,totalRevenue:0,orders:0}),B[ie].totalSold+=J.quantity,B[ie].totalRevenue+=parseFloat(J.total_price||0),B[ie].orders++)})}),Object.values(B).sort((Z,se)=>se.totalRevenue-Z.totalRevenue)},G=W=>{const K=new Set,B={};W.forEach(se=>{var ie;const J=((ie=se.customer_details)==null?void 0:ie.id)||se.delivery_phone;K.add(J),B[J]||(B[J]=[]),B[J].push(se)});const Z=Object.values(B).filter(se=>se.length>1).length;return{totalCustomers:K.size,returningCustomers:Z,newCustomers:K.size-Z}},X=W=>{const K=[];W.forEach(B=>{var Z,se,J;B.status==="delivered"&&K.push({id:B.id,type:"sale",order_number:B.order_number,customer_name:((Z=B.customer_details)==null?void 0:Z.username)||B.delivery_name,amount:parseFloat(B.total_amount),date:B.created_at,items:((se=B.items)==null?void 0:se.length)||0}),((J=B.refunds)==null?void 0:J.length)>0&&B.refunds.forEach(ie=>{var le,Q;ie.status==="completed"&&K.push({id:`refund-${ie.id}`,type:"refund",order_number:B.order_number,customer_name:((le=B.customer_details)==null?void 0:le.username)||B.delivery_name,amount:-parseFloat(ie.approved_amount||ie.requested_amount),date:ie.completed_at||ie.created_at,items:((Q=B.items)==null?void 0:Q.length)||0})})}),C(K.sort((B,Z)=>new Date(Z.date).getTime()-new Date(B.date).getTime()))},Y=()=>{const W={summary:{totalRevenue:T.totalRevenue,totalOrders:T.totalOrders,avgOrderValue:T.avgOrderValue,totalCustomers:T.customerInsights.totalCustomers,dateRange:o==="custom"?`${d} to ${m}`:`Last ${o} days`},transactions:I,products:T.productPerformance,revenueChart:T.revenueChart};w==="csv"?U(W):w==="pdf"?R(W):V(W),v(!1)},U=W=>{const K=[["Analytics Report"],["Generated:",new Date().toLocaleDateString()],["Period:",W.summary.dateRange],[""],["SUMMARY"],["Total Revenue",`Rs${W.summary.totalRevenue.toFixed(2)}`],["Total Orders",W.summary.totalOrders],["Average Order Value",`Rs${W.summary.avgOrderValue.toFixed(2)}`],["Total Customers",W.summary.totalCustomers],[""],["TOP PRODUCTS"],["Product Name","Units Sold","Revenue","Orders"],...W.products.slice(0,10).map(J=>[J.name,J.totalSold,`Rs${J.totalRevenue.toFixed(2)}`,J.orders]),[""],["DAILY REVENUE"],["Date","Revenue","Orders"],...W.revenueChart.map(J=>[J.date,`Rs${J.revenue.toFixed(2)}`,J.orders])].map(J=>J.join(",")).join(`
`),B=new Blob([K],{type:"text/csv"}),Z=window.URL.createObjectURL(B),se=document.createElement("a");se.href=Z,se.download=`analytics-report-${new Date().toISOString().split("T")[0]}.csv`,se.click(),window.URL.revokeObjectURL(Z)},V=W=>{const K=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),B=window.URL.createObjectURL(K),Z=document.createElement("a");Z.href=B,Z.download=`analytics-data-${new Date().toISOString().split("T")[0]}.json`,Z.click(),window.URL.revokeObjectURL(B)},R=W=>{const K=`
===========================================
        BUSINESS ANALYTICS REPORT
===========================================
Generated: ${new Date().toLocaleDateString()}
Period: ${W.summary.dateRange}

SUMMARY
-------------------------------------------
Total Revenue: Rs${W.summary.totalRevenue.toFixed(2)}
Total Orders: ${W.summary.totalOrders}
Average Order Value: Rs${W.summary.avgOrderValue.toFixed(2)}
Total Customers: ${W.summary.totalCustomers}

TOP PRODUCTS
-------------------------------------------
${W.products.slice(0,10).map((Z,se)=>`${se+1}. ${Z.name} - ${Z.totalSold} units - Rs${Z.totalRevenue.toFixed(2)}`).join(`
`)}

DAILY REVENUE TREND
-------------------------------------------
${W.revenueChart.slice(-14).map(Z=>`${Z.date}: Rs${Z.revenue.toFixed(2)} (${Z.orders} orders)`).join(`
`)}

===========================================
    `,B=window.open("","_blank");B==null||B.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${K}</pre>`),B==null||B.print()},F=()=>{var K;const W=`Business Analytics Report

Total Revenue: Rs${T.totalRevenue.toFixed(2)}
Total Orders: ${T.totalOrders}
Average Order Value: Rs${T.avgOrderValue.toFixed(2)}
Total Customers: ${T.customerInsights.totalCustomers}

Top Product: ${((K=T.topProducts[0])==null?void 0:K.name)||"N/A"}`;if(navigator.share)navigator.share({title:"Business Analytics Report",text:W});else{const B=`https://wa.me/?text=${encodeURIComponent(W)}`;window.open(B,"_blank")}},q=[{id:"dashboard",label:"Dashboard",icon:jP},{id:"sales",label:"Sales Report",icon:Vr},{id:"products",label:"Product Analytics",icon:At},{id:"customers",label:"Customer Insights",icon:db},{id:"statements",label:"Statements",icon:Lr}];return i?n.jsx(qt,{title:"Business Analytics",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})})}):n.jsx(qt,{title:"Business Analytics",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"font-semibold text-lg",children:"Business Analytics"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive business insights"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[n.jsx(Wl,{className:"h-4 w-4 mr-1"}),"Export"]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:F,children:[n.jsx(Ho,{className:"h-4 w-4 mr-1"}),"Share"]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:P,children:n.jsx(yi,{className:"h-4 w-4"})})]})]})}),n.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_i,{className:"h-4 w-4 text-gray-600"}),n.jsx(fe,{className:"text-sm font-medium",children:"Filters:"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fe,{className:"text-sm",children:"Period:"}),n.jsxs(Vt,{value:o,onValueChange:c,children:[n.jsx($t,{className:"w-32",children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"7",children:"Last 7 days"}),n.jsx(qe,{value:"30",children:"Last 30 days"}),n.jsx(qe,{value:"90",children:"Last 3 months"}),n.jsx(qe,{value:"365",children:"Last year"}),n.jsx(qe,{value:"custom",children:"Custom"})]})]})]}),o==="custom"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fe,{className:"text-sm",children:"From:"}),n.jsx(ve,{type:"date",value:d,onChange:W=>f(W.target.value),className:"w-36"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fe,{className:"text-sm",children:"To:"}),n.jsx(ve,{type:"date",value:m,onChange:W=>h(W.target.value),className:"w-36"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fe,{className:"text-sm",children:"Product:"}),n.jsxs(Vt,{value:u,onValueChange:p,children:[n.jsx($t,{className:"w-40",children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"all",children:"All Products"}),N.map(W=>n.jsx(qe,{value:W.id.toString(),children:W.name},W.id))]})]})]})]})}),n.jsx("div",{className:"bg-white",children:n.jsxs(Si,{value:s,onValueChange:r,className:"w-full",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsx(Hr,{className:"grid grid-cols-5 w-full min-w-max",children:q.map(W=>n.jsxs(Ct,{value:W.id,className:"flex items-center gap-2 text-xs",children:[n.jsx(W.icon,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:W.label})]},W.id))})}),n.jsxs(dt,{value:"dashboard",className:"p-4 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4 text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",T.totalRevenue.toFixed(0)]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T.totalOrders}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4 text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["",T.avgOrderValue.toFixed(0)]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Avg Order Value"})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:T.customerInsights.totalCustomers}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]})})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsxs(jt,{className:"flex items-center gap-2",children:[n.jsx(Vr,{className:"h-5 w-5"}),"Revenue Trend"]})}),n.jsx(Oe,{children:n.jsx("div",{className:"h-64 flex items-end justify-between gap-1",children:T.revenueChart.map((W,K)=>{const B=Math.max(...T.revenueChart.map(se=>se.revenue),1),Z=W.revenue/B*200;return n.jsxs("div",{className:"flex flex-col items-center flex-1",children:[n.jsx("div",{className:"bg-green-500 rounded-t w-full min-h-[4px] hover:bg-green-600 transition-colors cursor-pointer",style:{height:`${Z}px`},title:`${W.date}: ${W.revenue.toFixed(0)}`}),n.jsx("div",{className:"text-xs text-gray-600 mt-1 transform -rotate-45 origin-left",children:W.date})]},K)})})})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsxs(jt,{className:"flex items-center gap-2",children:[n.jsx(At,{className:"h-5 w-5"}),"Top Performing Products"]})}),n.jsx(Oe,{children:n.jsx("div",{className:"space-y-3",children:T.topProducts.map((W,K)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm font-bold text-blue-600",children:K+1}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:W.name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[W.totalSold," units sold"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-bold text-green-600",children:["",W.totalRevenue.toFixed(0)]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[W.orders," orders"]})]})]},W.id))})})]})]}),n.jsx(dt,{value:"sales",className:"p-4 space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{children:"Order Status Distribution"})}),n.jsx(Oe,{children:n.jsx("div",{className:"space-y-3",children:T.orderChart.map(W=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${W.status==="Delivered"?"bg-green-500":W.status==="Pending"?"bg-yellow-500":W.status==="Cancelled"?"bg-red-500":"bg-blue-500"}`}),n.jsx("span",{className:"text-sm",children:W.status})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:W.count}),n.jsxs("span",{className:"text-sm text-gray-600",children:["(",W.percentage,"%)"]})]})]},W.status))})})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{children:"Daily Sales Summary"})}),n.jsx(Oe,{children:n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:T.revenueChart.slice(-7).reverse().map((W,K)=>n.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-gray-50 rounded",children:[n.jsx("span",{className:"text-sm",children:W.date}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-medium",children:["",W.revenue.toFixed(0)]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[W.orders," orders"]})]})]},K))})})]})]})}),n.jsx(dt,{value:"products",className:"p-4 space-y-6",children:n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{children:"Product Performance Report"})}),n.jsx(Oe,{children:n.jsx("div",{className:"space-y-3",children:T.productPerformance.map((W,K)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-bold",children:K+1}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:W.name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[W.totalSold," units  ",W.orders," orders"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-bold text-green-600",children:["",W.totalRevenue.toFixed(0)]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["",(W.totalRevenue/W.totalSold).toFixed(0)," per unit"]})]})]},W.id))})})]})}),n.jsxs(dt,{value:"customers",className:"p-4 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T.customerInsights.totalCustomers}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:T.customerInsights.returningCustomers}),n.jsx("div",{className:"text-sm text-gray-600",children:"Returning Customers"})]})}),n.jsx(Te,{children:n.jsxs(Oe,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:T.customerInsights.newCustomers}),n.jsx("div",{className:"text-sm text-gray-600",children:"New Customers"})]})})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsx(jt,{children:"Customer Insights"})}),n.jsx(Oe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Customer Retention Rate"}),n.jsxs("span",{className:"font-bold text-green-600",children:[T.customerInsights.totalCustomers>0?(T.customerInsights.returningCustomers/T.customerInsights.totalCustomers*100).toFixed(1):0,"%"]})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Average Orders per Customer"}),n.jsx("span",{className:"font-bold text-blue-600",children:T.customerInsights.totalCustomers>0?(T.totalOrders/T.customerInsights.totalCustomers).toFixed(1):0})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Average Revenue per Customer"}),n.jsxs("span",{className:"font-bold text-purple-600",children:["",T.customerInsights.totalCustomers>0?(T.totalRevenue/T.customerInsights.totalCustomers).toFixed(0):0]})]})]})})]})]}),n.jsxs(dt,{value:"statements",className:"p-4 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsxs(jt,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Sales Summary"}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[n.jsx(Wl,{className:"h-4 w-4 mr-1"}),"Export"]})]})}),n.jsx(Oe,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Total Sales"}),n.jsxs("span",{className:"font-bold text-green-600",children:["",T.totalRevenue.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Total Orders"}),n.jsx("span",{className:"font-bold text-blue-600",children:T.totalOrders})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Average Order Value"}),n.jsxs("span",{className:"font-bold text-purple-600",children:["",T.avgOrderValue.toFixed(2)]})]})]})})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsxs(jt,{className:"flex items-center gap-2",children:[n.jsx(OD,{className:"h-5 w-5"}),"Order Distribution"]})}),n.jsx(Oe,{children:n.jsx("div",{className:"space-y-3",children:T.orderChart.map((W,K)=>{const B=["bg-green-500","bg-yellow-500","bg-red-500","bg-blue-500","bg-purple-500"];return n.jsxs("div",{className:"flex items-center justify-between p-2 rounded",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${B[K%B.length]}`}),n.jsx("span",{className:"text-sm",children:W.status})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"font-medium text-sm",children:W.count}),n.jsxs("span",{className:"text-xs text-gray-600 ml-1",children:["(",W.percentage,"%)"]})]})]},W.status)})})})]})]}),n.jsxs(Te,{children:[n.jsx(wt,{children:n.jsxs(jt,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Recent Transactions"}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>e("/vendor/sales"),children:[n.jsx(Nn,{className:"h-4 w-4 mr-1"}),"View All"]})})]})}),n.jsx(Oe,{children:n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:I.slice(0,20).map(W=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${W.type==="sale"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:W.type==="sale"?"":""}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-sm",children:[W.type==="sale"?"Sale":"Refund"," - ",W.order_number]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[W.customer_name,"  ",new Date(W.date).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:`font-bold text-sm ${W.type==="sale"?"text-green-600":"text-red-600"}`,children:[W.type==="sale"?"+":"","",Math.abs(W.amount).toFixed(2)]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[W.items," items"]})]})]},W.id))})})]})]})]})}),n.jsx(Rs,{open:x,onOpenChange:v,children:n.jsxs(xs,{side:"right",className:"w-full sm:w-80",children:[n.jsx(ys,{className:"pb-4",children:n.jsx(bs,{children:"Export Analytics Report"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(fe,{className:"text-sm font-medium mb-2 block",children:"Export Format"}),n.jsxs(Vt,{value:w,onValueChange:y,children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"csv",children:"CSV Spreadsheet"}),n.jsx(qe,{value:"json",children:"JSON Data"}),n.jsx(qe,{value:"pdf",children:"PDF Report"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(fe,{className:"text-sm font-medium",children:"Report Includes:"}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[n.jsx("div",{children:" Sales summary and metrics"}),n.jsx("div",{children:" Top performing products"}),n.jsx("div",{children:" Daily revenue trends"}),n.jsx("div",{children:" Customer insights"}),n.jsx("div",{children:" Order distribution"})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(ne,{onClick:Y,className:"flex-1",children:[n.jsx(Wl,{className:"h-4 w-4 mr-2"}),"Export Report"]}),n.jsx(ne,{variant:"outline",onClick:()=>v(!1),className:"flex-1",children:"Cancel"})]}),n.jsx("div",{className:"pt-4 border-t",children:n.jsxs("p",{className:"text-xs text-gray-500",children:["Report will include data for the selected time period: ",o==="custom"?`${d} to ${m}`:`Last ${o} days`]})})]})]})})]})})}const Ese=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Compose New Message"}),n.jsx("p",{children:"Coming soon..."})]}),Tse=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Customer Management"}),n.jsx("p",{children:"Coming soon..."})]}),Ase=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Search Messages"}),n.jsx("p",{children:"Coming soon..."})]}),Ose=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Message Settings"}),n.jsx("p",{children:"Coming soon..."})]}),Rse=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Products"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Product Statistics"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"24"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Products"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Categories"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:"8"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Active Categories"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Approvals"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"3"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Review"})]})]})]}),Lse=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Return Order Management"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Return Requests"}),n.jsx("p",{className:"text-3xl font-bold text-red-600",children:"7"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Pending review"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Approved Returns"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:"12"}),n.jsx("p",{className:"text-sm text-gray-600",children:"This month"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Refund Amount"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"8,450"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Processed"})]})]})]}),Mse=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Review Management"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Average Rating"}),n.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:"4.7"}),n.jsx("p",{className:"text-sm text-gray-600",children:""})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Reviews"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"89"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Customer feedback"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Response"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"5"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Need attention"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Positive Reviews"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:"76"}),n.jsx("p",{className:"text-sm text-gray-600",children:"85% positive"})]})]})]}),Ise=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Income Dashboard"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Today's Earnings"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:"2,450"}),n.jsx("p",{className:"text-sm text-gray-600",children:"+12% from yesterday"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"This Week"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"18,320"}),n.jsx("p",{className:"text-sm text-gray-600",children:"7 days total"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"This Month"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600",children:"72,850"}),n.jsx("p",{className:"text-sm text-gray-600",children:"30 days total"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Payout"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"5,200"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Available for withdrawal"})]})]})]}),Dse=new m$,Fse=()=>(Zz(),n.jsxs(az,{children:[n.jsx(tt,{path:"/",element:n.jsx(NS,{})}),n.jsx(tt,{path:"/splash",element:n.jsx(Gz,{})}),n.jsx(tt,{path:"/login",element:n.jsx(eB,{})}),n.jsx(tt,{path:"/home",element:n.jsx(NS,{})}),n.jsx(tt,{path:"/search",element:n.jsx(ZW,{})}),n.jsx(tt,{path:"/cart",element:n.jsx(HW,{})}),n.jsx(tt,{path:"/wishlist",element:n.jsx(Jr,{children:n.jsx(KW,{})})}),n.jsx(tt,{path:"/profile",element:n.jsx(Jr,{children:n.jsx(eZ,{})})}),n.jsx(tt,{path:"/profile-edit",element:n.jsx(Jr,{children:n.jsx(sZ,{})})}),n.jsx(tt,{path:"/privacy",element:n.jsx(rZ,{})}),n.jsx(tt,{path:"/product/:id",element:n.jsx(AW,{})}),n.jsx(tt,{path:"/vendor/:vendorId",element:n.jsx(FW,{})}),n.jsx(tt,{path:"/checkout",element:n.jsx(Jr,{children:n.jsx(FZ,{})})}),n.jsx(tt,{path:"/order-confirmation/:orderId",element:n.jsx(Jr,{children:n.jsx($Z,{})})}),n.jsx(tt,{path:"/orders",element:n.jsx(Jr,{children:n.jsx(GG,{})})}),n.jsx(tt,{path:"/addresses",element:n.jsx(Jr,{children:n.jsx(XG,{})})}),n.jsx(tt,{path:"/payments",element:n.jsx(Jr,{children:n.jsx(tK,{})})}),n.jsx(tt,{path:"/help",element:n.jsx(rK,{})}),n.jsx(tt,{path:"/messages",element:n.jsx(Jr,{children:n.jsx(TS,{})})}),n.jsx(tt,{path:"/order/:orderId/messages",element:n.jsx(Jr,{children:n.jsx(TS,{})})}),n.jsx(tt,{path:"/signup",element:n.jsx(iZ,{})}),n.jsx(tt,{path:"/forgot-password",element:n.jsx(aZ,{})}),n.jsx(tt,{path:"/category/:categoryName",element:n.jsx(aK,{})}),n.jsx(tt,{path:"/featured-items",element:n.jsx(lK,{})}),n.jsx(tt,{path:"/trending-items",element:n.jsx(dK,{})}),n.jsx(tt,{path:"/vendor/login",element:n.jsx(uK,{})}),n.jsx(tt,{path:"/vendor/signup",element:n.jsx(hK,{})}),n.jsx(tt,{path:"/vendor/onboarding",element:n.jsx(mK,{})}),n.jsx(tt,{path:"/vendor/rejection",element:n.jsx(pK,{})}),n.jsx(tt,{path:"/vendor/dashboard",element:n.jsx(_2,{})}),n.jsx(tt,{path:"/vendor/home",element:n.jsx(_2,{})}),n.jsx(tt,{path:"/vendor/place-order",element:n.jsx(dse,{})}),n.jsx(tt,{path:"/vendor/sales",element:n.jsx(use,{})}),n.jsx(tt,{path:"/vendor/messages",element:n.jsx(S2,{})}),n.jsx(tt,{path:"/vendor/order/:orderId/messages",element:n.jsx(S2,{})}),n.jsx(tt,{path:"/vendor/messages/compose",element:n.jsx(Ese,{})}),n.jsx(tt,{path:"/vendor/messages/search",element:n.jsx(Ase,{})}),n.jsx(tt,{path:"/vendor/messages/settings",element:n.jsx(Ose,{})}),n.jsx(tt,{path:"/vendor/customers",element:n.jsx(Tse,{})}),n.jsx(tt,{path:"/vendor/add-products",element:n.jsx(Rse,{})}),n.jsx(tt,{path:"/vendor/products",element:n.jsx(Sse,{})}),n.jsx(tt,{path:"/vendor/add-product",element:n.jsx(vse,{})}),n.jsx(tt,{path:"/vendor/orders",element:n.jsx(mse,{})}),n.jsx(tt,{path:"/vendor/return-orders",element:n.jsx(Lse,{})}),n.jsx(tt,{path:"/vendor/reviews",element:n.jsx(Mse,{})}),n.jsx(tt,{path:"/vendor/income",element:n.jsx(Ise,{})}),n.jsx(tt,{path:"/vendor/wallet",element:n.jsx(xse,{})}),n.jsx(tt,{path:"/vendor/profile",element:n.jsx(wse,{})}),n.jsx(tt,{path:"/vendor/profile-management",element:n.jsx(jse,{})}),n.jsx(tt,{path:"/vendor/company",element:n.jsx(Nse,{})}),n.jsx(tt,{path:"/vendor/security",element:n.jsx(_se,{})}),n.jsx(tt,{path:"/vendor/notifications",element:n.jsx(kse,{})}),n.jsx(tt,{path:"/vendor/settings",element:n.jsx(fse,{})}),n.jsx(tt,{path:"/vendor/summary",element:n.jsx(Cse,{})}),n.jsx(tt,{path:"/vendor/analytics",element:n.jsx(Pse,{})}),n.jsx(tt,{path:"*",element:n.jsx($W,{})})]})),$se=()=>(Lz(),j.useEffect(()=>{(async()=>{try{await Pz.requestAllPermissions(),console.log("All permissions requested successfully")}catch(t){console.error("Failed to request permissions:",t)}})()},[]),n.jsx(dz,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:n.jsx(Fse,{})})),zse=()=>{const[e,t]=j.useState(!0),s=()=>{t(!1)};return e?n.jsx(Hz,{onComplete:s}):n.jsx(Rz,{children:n.jsx(zz,{children:n.jsx(H8,{children:n.jsxs(Uz,{children:[n.jsx(C6,{}),n.jsx(iF,{}),n.jsx($se,{})]})})})})},Bse=()=>n.jsx(g$,{client:Dse,children:n.jsx(Bz,{children:n.jsx(zse,{})})});vt.isNativePlatform()&&s0.initialize().then(()=>{console.log(" FCM Service initialized on app startup")}).catch(e=>{console.error(" FCM Service initialization failed:",e)});ZC(document.getElementById("root")).render(n.jsx(Bse,{}));export{vt as C,Tb as W,We as _,s0 as f,Wse as i,no as r};
