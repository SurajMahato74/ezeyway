const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C2HGdyT6.js","assets/index.css","assets/index-B040m1d6.js"])))=>i.map(i=>d[i]);
var d=Object.defineProperty;var c=(n,o,i)=>o in n?d(n,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[o]=i;var a=(n,o,i)=>c(n,typeof o!="symbol"?o+"":o,i);import{C as s,_ as t}from"./index-C2HGdyT6.js";class l{constructor(){a(this,"isInitialized",!1)}async initialize(){if(!(!s.isNativePlatform()||this.isInitialized))try{const{App:o}=await t(async()=>{const{App:e}=await import("./index-C2HGdyT6.js").then(r=>r.i);return{App:e}},__vite__mapDeps([0,1])),{LocalNotifications:i}=await t(async()=>{const{LocalNotifications:e}=await import("./index-B040m1d6.js");return{LocalNotifications:e}},__vite__mapDeps([2,0,1]));o.addListener("appUrlOpen",e=>{if(console.log("ðŸš€ App opened via URL:",e.url),e.url.includes("vendor://order/")){const r=e.url.split("/").pop();this.openOrderPage(parseInt(r||"0"))}}),o.addListener("appStateChange",({isActive:e})=>{console.log("ðŸ“± App state changed:",e?"ACTIVE":"BACKGROUND"),e&&(console.log("ðŸš€ App became ACTIVE - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")),window.location.pathname.includes("/vendor/orders")||(console.log("ðŸŽ¯ Auto-navigating to vendor orders"),window.location.href="/vendor/orders"))}),o.addListener("appRestoredResult",e=>{console.log("ðŸ”„ App restored:",e),e.pluginId==="LocalNotifications"&&this.handleNotificationOpen(e.data)}),this.isInitialized=!0,console.log("ðŸš€ Mobile Auto-Opener initialized - Yango Pro style ready!")}catch(o){console.error("Failed to initialize mobile auto-opener:",o)}}openOrderPage(o){console.log("ðŸŽ¯ Auto-opening order page for:",o),window.location.href="/vendor/orders",setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:o,autoOpened:!0,source:"deepLink"}}))},1e3)}handleNotificationOpen(o){console.log("ðŸ“² Handling notification open:",o),o!=null&&o.orderId&&this.openOrderPage(parseInt(o.orderId))}async bringToForeground(){if(!s.isNativePlatform())return!1;try{const{App:o}=await t(async()=>{const{App:i}=await import("./index-C2HGdyT6.js").then(e=>e.i);return{App:i}},__vite__mapDeps([0,1]));console.log("ðŸš€ FORCING APP TO FOREGROUND"),window.focus(),document.body.click();try{await o.minimizeApp(),setTimeout(async()=>{window.focus(),document.body.click(),window.location.href="/vendor/orders"},200)}catch{console.log("Minimize/restore not available, using direct focus"),window.location.href="/vendor/orders"}return!0}catch(o){return console.error("Could not bring app to foreground:",o),!1}}}const f=new l;export{f as mobileAutoOpener};
