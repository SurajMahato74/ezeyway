var K5=Object.defineProperty;var Uj=e=>{throw TypeError(e)};var Y5=(e,t,s)=>t in e?K5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var yr=(e,t,s)=>Y5(e,typeof t!="symbol"?t+"":t,s),jg=(e,t,s)=>t.has(e)||Uj("Cannot "+s);var Ne=(e,t,s)=>(jg(e,t,"read from private field"),s?s.call(e):t.get(e)),Lt=(e,t,s)=>t.has(e)?Uj("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),mt=(e,t,s,r)=>(jg(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),Jn=(e,t,s)=>(jg(e,t,"access private method"),s);var Ch=(e,t,s,r)=>({set _(i){mt(e,t,i,s)},get _(){return Ne(e,t,r)}});function X5(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Lm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P2={exports:{}},Mm={},E2={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vu=Symbol.for("react.element"),Q5=Symbol.for("react.portal"),J5=Symbol.for("react.fragment"),eM=Symbol.for("react.strict_mode"),tM=Symbol.for("react.profiler"),nM=Symbol.for("react.provider"),sM=Symbol.for("react.context"),rM=Symbol.for("react.forward_ref"),iM=Symbol.for("react.suspense"),aM=Symbol.for("react.memo"),oM=Symbol.for("react.lazy"),qj=Symbol.iterator;function lM(e){return e===null||typeof e!="object"?null:(e=qj&&e[qj]||e["@@iterator"],typeof e=="function"?e:null)}var T2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A2=Object.assign,O2={};function Ac(e,t,s){this.props=e,this.context=t,this.refs=O2,this.updater=s||T2}Ac.prototype.isReactComponent={};Ac.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ac.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function R2(){}R2.prototype=Ac.prototype;function n0(e,t,s){this.props=e,this.context=t,this.refs=O2,this.updater=s||T2}var s0=n0.prototype=new R2;s0.constructor=n0;A2(s0,Ac.prototype);s0.isPureReactComponent=!0;var Hj=Array.isArray,L2=Object.prototype.hasOwnProperty,r0={current:null},M2={key:!0,ref:!0,__self:!0,__source:!0};function I2(e,t,s){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)L2.call(t,r)&&!M2.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){for(var d=Array(c),f=0;f<c;f++)d[f]=arguments[f+2];i.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Vu,type:e,key:a,ref:o,props:i,_owner:r0.current}}function cM(e,t){return{$$typeof:Vu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function i0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vu}function dM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Wj=/\/+/g;function _g(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dM(""+e.key):t.toString(36)}function af(e,t,s,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Vu:case Q5:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+_g(o,0):r,Hj(i)?(s="",e!=null&&(s=e.replace(Wj,"$&/")+"/"),af(i,t,s,"",function(f){return f})):i!=null&&(i0(i)&&(i=cM(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Wj,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Hj(e))for(var c=0;c<e.length;c++){a=e[c];var d=r+_g(a,c);o+=af(a,t,s,d,i)}else if(d=lM(e),typeof d=="function")for(e=d.call(e),c=0;!(a=e.next()).done;)a=a.value,d=r+_g(a,c++),o+=af(a,t,s,d,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ph(e,t,s){if(e==null)return e;var r=[],i=0;return af(e,r,"","",function(a){return t.call(s,a,i++)}),r}function uM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var js={current:null},of={transition:null},hM={ReactCurrentDispatcher:js,ReactCurrentBatchConfig:of,ReactCurrentOwner:r0};function D2(){throw Error("act(...) is not supported in production builds of React.")}kt.Children={map:Ph,forEach:function(e,t,s){Ph(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Ph(e,function(){t++}),t},toArray:function(e){return Ph(e,function(t){return t})||[]},only:function(e){if(!i0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};kt.Component=Ac;kt.Fragment=J5;kt.Profiler=tM;kt.PureComponent=n0;kt.StrictMode=eM;kt.Suspense=iM;kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hM;kt.act=D2;kt.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=A2({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=r0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)L2.call(t,d)&&!M2.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=s;else if(1<d){c=Array(d);for(var f=0;f<d;f++)c[f]=arguments[f+2];r.children=c}return{$$typeof:Vu,type:e.type,key:i,ref:a,props:r,_owner:o}};kt.createContext=function(e){return e={$$typeof:sM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nM,_context:e},e.Consumer=e};kt.createElement=I2;kt.createFactory=function(e){var t=I2.bind(null,e);return t.type=e,t};kt.createRef=function(){return{current:null}};kt.forwardRef=function(e){return{$$typeof:rM,render:e}};kt.isValidElement=i0;kt.lazy=function(e){return{$$typeof:oM,_payload:{_status:-1,_result:e},_init:uM}};kt.memo=function(e,t){return{$$typeof:aM,type:e,compare:t===void 0?null:t}};kt.startTransition=function(e){var t=of.transition;of.transition={};try{e()}finally{of.transition=t}};kt.unstable_act=D2;kt.useCallback=function(e,t){return js.current.useCallback(e,t)};kt.useContext=function(e){return js.current.useContext(e)};kt.useDebugValue=function(){};kt.useDeferredValue=function(e){return js.current.useDeferredValue(e)};kt.useEffect=function(e,t){return js.current.useEffect(e,t)};kt.useId=function(){return js.current.useId()};kt.useImperativeHandle=function(e,t,s){return js.current.useImperativeHandle(e,t,s)};kt.useInsertionEffect=function(e,t){return js.current.useInsertionEffect(e,t)};kt.useLayoutEffect=function(e,t){return js.current.useLayoutEffect(e,t)};kt.useMemo=function(e,t){return js.current.useMemo(e,t)};kt.useReducer=function(e,t,s){return js.current.useReducer(e,t,s)};kt.useRef=function(e){return js.current.useRef(e)};kt.useState=function(e){return js.current.useState(e)};kt.useSyncExternalStore=function(e,t,s){return js.current.useSyncExternalStore(e,t,s)};kt.useTransition=function(){return js.current.useTransition()};kt.version="18.3.1";E2.exports=kt;var j=E2.exports;const _e=Lm(j),a0=X5({__proto__:null,default:_e},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fM=j,mM=Symbol.for("react.element"),pM=Symbol.for("react.fragment"),gM=Object.prototype.hasOwnProperty,vM=fM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xM={key:!0,ref:!0,__self:!0,__source:!0};function F2(e,t,s){var r,i={},a=null,o=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)gM.call(t,r)&&!xM.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:mM,type:e,key:a,ref:o,props:i,_owner:vM.current}}Mm.Fragment=pM;Mm.jsx=F2;Mm.jsxs=F2;P2.exports=Mm;var n=P2.exports,$2={exports:{}},Gs={},z2={exports:{}},B2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,U){var B=K.length;K.push(U);e:for(;0<B;){var R=B-1>>>1,$=K[R];if(0<i($,U))K[R]=U,K[B]=$,B=R;else break e}}function s(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var U=K[0],B=K.pop();if(B!==U){K[0]=B;e:for(var R=0,$=K.length,W=$>>>1;R<W;){var Z=2*(R+1)-1,X=K[Z],V=Z+1,H=K[V];if(0>i(X,B))V<$&&0>i(H,X)?(K[R]=H,K[V]=B,R=V):(K[R]=X,K[Z]=B,R=Z);else if(V<$&&0>i(H,B))K[R]=H,K[V]=B,R=V;else break e}}return U}function i(K,U){var B=K.sortIndex-U.sortIndex;return B!==0?B:K.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],f=[],m=1,h=null,u=3,p=!1,y=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(K){for(var U=s(f);U!==null;){if(U.callback===null)r(f);else if(U.startTime<=K)r(f),U.sortIndex=U.expirationTime,t(d,U);else break;U=s(f)}}function N(K){if(v=!1,_(K),!y)if(s(d)!==null)y=!0,G(C);else{var U=s(f);U!==null&&Y(N,U.startTime-K)}}function C(K,U){y=!1,v&&(v=!1,x(E),E=-1),p=!0;var B=u;try{for(_(U),h=s(d);h!==null&&(!(h.expirationTime>U)||K&&!T());){var R=h.callback;if(typeof R=="function"){h.callback=null,u=h.priorityLevel;var $=R(h.expirationTime<=U);U=e.unstable_now(),typeof $=="function"?h.callback=$:h===s(d)&&r(d),_(U)}else r(d);h=s(d)}if(h!==null)var W=!0;else{var Z=s(f);Z!==null&&Y(N,Z.startTime-U),W=!1}return W}finally{h=null,u=B,p=!1}}var I=!1,k=null,E=-1,M=5,P=-1;function T(){return!(e.unstable_now()-P<M)}function A(){if(k!==null){var K=e.unstable_now();P=K;var U=!0;try{U=k(!0,K)}finally{U?z():(I=!1,k=null)}}else I=!1}var z;if(typeof b=="function")z=function(){b(A)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,F=O.port2;O.port1.onmessage=A,z=function(){F.postMessage(null)}}else z=function(){w(A,0)};function G(K){k=K,I||(I=!0,z())}function Y(K,U){E=w(function(){K(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,G(C))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return s(d)},e.unstable_next=function(K){switch(u){case 1:case 2:case 3:var U=3;break;default:U=u}var B=u;u=U;try{return K()}finally{u=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,U){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var B=u;u=K;try{return U()}finally{u=B}},e.unstable_scheduleCallback=function(K,U,B){var R=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?R+B:R):B=R,K){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=B+$,K={id:m++,callback:U,priorityLevel:K,startTime:B,expirationTime:$,sortIndex:-1},B>R?(K.sortIndex=B,t(f,K),s(d)===null&&K===s(f)&&(v?(x(E),E=-1):v=!0,Y(N,B-R))):(K.sortIndex=$,t(d,K),y||p||(y=!0,G(C))),K},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(K){var U=u;return function(){var B=u;u=U;try{return K.apply(this,arguments)}finally{u=B}}}})(B2);z2.exports=B2;var yM=z2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bM=j,Zs=yM;function Oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V2=new Set,su={};function Qo(e,t){oc(e,t),oc(e+"Capture",t)}function oc(e,t){for(su[e]=t,e=0;e<t.length;e++)V2.add(t[e])}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mv=Object.prototype.hasOwnProperty,wM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zj={},Gj={};function jM(e){return Mv.call(Gj,e)?!0:Mv.call(Zj,e)?!1:wM.test(e)?Gj[e]=!0:(Zj[e]=!0,!1)}function _M(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function NM(e,t,s,r){if(t===null||typeof t>"u"||_M(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _s(e,t,s,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xn[e]=new _s(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xn[t]=new _s(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xn[e]=new _s(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xn[e]=new _s(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xn[e]=new _s(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xn[e]=new _s(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xn[e]=new _s(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xn[e]=new _s(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xn[e]=new _s(e,5,!1,e.toLowerCase(),null,!1,!1)});var o0=/[\-:]([a-z])/g;function l0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(o0,l0);Xn[t]=new _s(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(o0,l0);Xn[t]=new _s(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(o0,l0);Xn[t]=new _s(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xn[e]=new _s(e,1,!1,e.toLowerCase(),null,!1,!1)});Xn.xlinkHref=new _s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xn[e]=new _s(e,1,!1,e.toLowerCase(),null,!0,!0)});function c0(e,t,s,r){var i=Xn.hasOwnProperty(t)?Xn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(NM(t,s,i,r)&&(s=null),r||i===null?jM(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):i.mustUseProperty?e[i.propertyName]=s===null?i.type===3?!1:"":s:(t=i.attributeName,r=i.attributeNamespace,s===null?e.removeAttribute(t):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var ia=bM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eh=Symbol.for("react.element"),bl=Symbol.for("react.portal"),wl=Symbol.for("react.fragment"),d0=Symbol.for("react.strict_mode"),Iv=Symbol.for("react.profiler"),U2=Symbol.for("react.provider"),q2=Symbol.for("react.context"),u0=Symbol.for("react.forward_ref"),Dv=Symbol.for("react.suspense"),Fv=Symbol.for("react.suspense_list"),h0=Symbol.for("react.memo"),pa=Symbol.for("react.lazy"),H2=Symbol.for("react.offscreen"),Kj=Symbol.iterator;function hd(e){return e===null||typeof e!="object"?null:(e=Kj&&e[Kj]||e["@@iterator"],typeof e=="function"?e:null)}var un=Object.assign,Ng;function Ed(e){if(Ng===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Ng=t&&t[1]||""}return`
`+Ng+e}var Sg=!1;function kg(e,t){if(!e||Sg)return"";Sg=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var d=`
`+i[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{Sg=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ed(e):""}function SM(e){switch(e.tag){case 5:return Ed(e.type);case 16:return Ed("Lazy");case 13:return Ed("Suspense");case 19:return Ed("SuspenseList");case 0:case 2:case 15:return e=kg(e.type,!1),e;case 11:return e=kg(e.type.render,!1),e;case 1:return e=kg(e.type,!0),e;default:return""}}function $v(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case wl:return"Fragment";case bl:return"Portal";case Iv:return"Profiler";case d0:return"StrictMode";case Dv:return"Suspense";case Fv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case q2:return(e.displayName||"Context")+".Consumer";case U2:return(e._context.displayName||"Context")+".Provider";case u0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case h0:return t=e.displayName||null,t!==null?t:$v(e.type)||"Memo";case pa:t=e._payload,e=e._init;try{return $v(e(t))}catch{}}return null}function kM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $v(t);case 8:return t===d0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ba(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function W2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function CM(e){var t=W2(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Th(e){e._valueTracker||(e._valueTracker=CM(e))}function Z2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=W2(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function Ef(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zv(e,t){var s=t.checked;return un({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Yj(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=Ba(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function G2(e,t){t=t.checked,t!=null&&c0(e,"checked",t,!1)}function Bv(e,t){G2(e,t);var s=Ba(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vv(e,t.type,s):t.hasOwnProperty("defaultValue")&&Vv(e,t.type,Ba(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xj(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Vv(e,t,s){(t!=="number"||Ef(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Td=Array.isArray;function $l(e,t,s,r){if(e=e.options,t){t={};for(var i=0;i<s.length;i++)t["$"+s[i]]=!0;for(s=0;s<e.length;s++)i=t.hasOwnProperty("$"+e[s].value),e[s].selected!==i&&(e[s].selected=i),i&&r&&(e[s].defaultSelected=!0)}else{for(s=""+Ba(s),t=null,i=0;i<e.length;i++){if(e[i].value===s){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Uv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return un({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qj(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(Oe(92));if(Td(s)){if(1<s.length)throw Error(Oe(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Ba(s)}}function K2(e,t){var s=Ba(t.value),r=Ba(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function Jj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Y2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Y2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ah,X2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ah=Ah||document.createElement("div"),Ah.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ah.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ru(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Dd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PM=["Webkit","ms","Moz","O"];Object.keys(Dd).forEach(function(e){PM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dd[t]=Dd[e]})});function Q2(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Dd.hasOwnProperty(e)&&Dd[e]?(""+t).trim():t+"px"}function J2(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,i=Q2(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,i):e[s]=i}}var EM=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hv(e,t){if(t){if(EM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Oe(62))}}function Wv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zv=null;function f0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gv=null,zl=null,Bl=null;function e_(e){if(e=Hu(e)){if(typeof Gv!="function")throw Error(Oe(280));var t=e.stateNode;t&&(t=zm(t),Gv(e.stateNode,e.type,t))}}function ek(e){zl?Bl?Bl.push(e):Bl=[e]:zl=e}function tk(){if(zl){var e=zl,t=Bl;if(Bl=zl=null,e_(e),t)for(e=0;e<t.length;e++)e_(t[e])}}function nk(e,t){return e(t)}function sk(){}var Cg=!1;function rk(e,t,s){if(Cg)return e(t,s);Cg=!0;try{return nk(e,t,s)}finally{Cg=!1,(zl!==null||Bl!==null)&&(sk(),tk())}}function iu(e,t){var s=e.stateNode;if(s===null)return null;var r=zm(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Oe(231,t,typeof s));return s}var Kv=!1;if(Gi)try{var fd={};Object.defineProperty(fd,"passive",{get:function(){Kv=!0}}),window.addEventListener("test",fd,fd),window.removeEventListener("test",fd,fd)}catch{Kv=!1}function TM(e,t,s,r,i,a,o,c,d){var f=Array.prototype.slice.call(arguments,3);try{t.apply(s,f)}catch(m){this.onError(m)}}var Fd=!1,Tf=null,Af=!1,Yv=null,AM={onError:function(e){Fd=!0,Tf=e}};function OM(e,t,s,r,i,a,o,c,d){Fd=!1,Tf=null,TM.apply(AM,arguments)}function RM(e,t,s,r,i,a,o,c,d){if(OM.apply(this,arguments),Fd){if(Fd){var f=Tf;Fd=!1,Tf=null}else throw Error(Oe(198));Af||(Af=!0,Yv=f)}}function Jo(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function ik(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function t_(e){if(Jo(e)!==e)throw Error(Oe(188))}function LM(e){var t=e.alternate;if(!t){if(t=Jo(e),t===null)throw Error(Oe(188));return t!==e?null:e}for(var s=e,r=t;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){s=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return t_(i),e;if(a===r)return t_(i),t;a=a.sibling}throw Error(Oe(188))}if(s.return!==r.return)s=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===s){o=!0,s=i,r=a;break}if(c===r){o=!0,r=i,s=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===s){o=!0,s=a,r=i;break}if(c===r){o=!0,r=a,s=i;break}c=c.sibling}if(!o)throw Error(Oe(189))}}if(s.alternate!==r)throw Error(Oe(190))}if(s.tag!==3)throw Error(Oe(188));return s.stateNode.current===s?e:t}function ak(e){return e=LM(e),e!==null?ok(e):null}function ok(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ok(e);if(t!==null)return t;e=e.sibling}return null}var lk=Zs.unstable_scheduleCallback,n_=Zs.unstable_cancelCallback,MM=Zs.unstable_shouldYield,IM=Zs.unstable_requestPaint,_n=Zs.unstable_now,DM=Zs.unstable_getCurrentPriorityLevel,m0=Zs.unstable_ImmediatePriority,ck=Zs.unstable_UserBlockingPriority,Of=Zs.unstable_NormalPriority,FM=Zs.unstable_LowPriority,dk=Zs.unstable_IdlePriority,Im=null,ci=null;function $M(e){if(ci&&typeof ci.onCommitFiberRoot=="function")try{ci.onCommitFiberRoot(Im,e,void 0,(e.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:VM,zM=Math.log,BM=Math.LN2;function VM(e){return e>>>=0,e===0?32:31-(zM(e)/BM|0)|0}var Oh=64,Rh=4194304;function Ad(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rf(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=s&268435455;if(o!==0){var c=o&~i;c!==0?r=Ad(c):(a&=o,a!==0&&(r=Ad(a)))}else o=s&~i,o!==0?r=Ad(o):a!==0&&(r=Ad(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-Ir(t),i=1<<s,r|=e[s],t&=~i;return r}function UM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qM(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Ir(a),c=1<<o,d=i[o];d===-1?(!(c&s)||c&r)&&(i[o]=UM(c,t)):d<=t&&(e.expiredLanes|=c),a&=~c}}function Xv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uk(){var e=Oh;return Oh<<=1,!(Oh&4194240)&&(Oh=64),e}function Pg(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Uu(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ir(t),e[t]=s}function HM(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var i=31-Ir(s),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,s&=~a}}function p0(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-Ir(s),i=1<<r;i&t|e[r]&t&&(e[r]|=t),s&=~i}}var Dt=0;function hk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fk,g0,mk,pk,gk,Qv=!1,Lh=[],Pa=null,Ea=null,Ta=null,au=new Map,ou=new Map,xa=[],WM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s_(e,t){switch(e){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":au.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ou.delete(t.pointerId)}}function md(e,t,s,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Hu(t),t!==null&&g0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ZM(e,t,s,r,i){switch(t){case"focusin":return Pa=md(Pa,e,t,s,r,i),!0;case"dragenter":return Ea=md(Ea,e,t,s,r,i),!0;case"mouseover":return Ta=md(Ta,e,t,s,r,i),!0;case"pointerover":var a=i.pointerId;return au.set(a,md(au.get(a)||null,e,t,s,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ou.set(a,md(ou.get(a)||null,e,t,s,r,i)),!0}return!1}function vk(e){var t=yo(e.target);if(t!==null){var s=Jo(t);if(s!==null){if(t=s.tag,t===13){if(t=ik(s),t!==null){e.blockedOn=t,gk(e.priority,function(){mk(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Jv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);Zv=r,s.target.dispatchEvent(r),Zv=null}else return t=Hu(s),t!==null&&g0(t),e.blockedOn=s,!1;t.shift()}return!0}function r_(e,t,s){lf(e)&&s.delete(t)}function GM(){Qv=!1,Pa!==null&&lf(Pa)&&(Pa=null),Ea!==null&&lf(Ea)&&(Ea=null),Ta!==null&&lf(Ta)&&(Ta=null),au.forEach(r_),ou.forEach(r_)}function pd(e,t){e.blockedOn===t&&(e.blockedOn=null,Qv||(Qv=!0,Zs.unstable_scheduleCallback(Zs.unstable_NormalPriority,GM)))}function lu(e){function t(i){return pd(i,e)}if(0<Lh.length){pd(Lh[0],e);for(var s=1;s<Lh.length;s++){var r=Lh[s];r.blockedOn===e&&(r.blockedOn=null)}}for(Pa!==null&&pd(Pa,e),Ea!==null&&pd(Ea,e),Ta!==null&&pd(Ta,e),au.forEach(t),ou.forEach(t),s=0;s<xa.length;s++)r=xa[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<xa.length&&(s=xa[0],s.blockedOn===null);)vk(s),s.blockedOn===null&&xa.shift()}var Vl=ia.ReactCurrentBatchConfig,Lf=!0;function KM(e,t,s,r){var i=Dt,a=Vl.transition;Vl.transition=null;try{Dt=1,v0(e,t,s,r)}finally{Dt=i,Vl.transition=a}}function YM(e,t,s,r){var i=Dt,a=Vl.transition;Vl.transition=null;try{Dt=4,v0(e,t,s,r)}finally{Dt=i,Vl.transition=a}}function v0(e,t,s,r){if(Lf){var i=Jv(e,t,s,r);if(i===null)Fg(e,t,r,Mf,s),s_(e,r);else if(ZM(i,e,t,s,r))r.stopPropagation();else if(s_(e,r),t&4&&-1<WM.indexOf(e)){for(;i!==null;){var a=Hu(i);if(a!==null&&fk(a),a=Jv(e,t,s,r),a===null&&Fg(e,t,r,Mf,s),a===i)break;i=a}i!==null&&r.stopPropagation()}else Fg(e,t,r,null,s)}}var Mf=null;function Jv(e,t,s,r){if(Mf=null,e=f0(r),e=yo(e),e!==null)if(t=Jo(e),t===null)e=null;else if(s=t.tag,s===13){if(e=ik(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mf=e,null}function xk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DM()){case m0:return 1;case ck:return 4;case Of:case FM:return 16;case dk:return 536870912;default:return 16}default:return 16}}var Sa=null,x0=null,cf=null;function yk(){if(cf)return cf;var e,t=x0,s=t.length,r,i="value"in Sa?Sa.value:Sa.textContent,a=i.length;for(e=0;e<s&&t[e]===i[e];e++);var o=s-e;for(r=1;r<=o&&t[s-r]===i[a-r];r++);return cf=i.slice(e,1<r?1-r:void 0)}function df(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mh(){return!0}function i_(){return!1}function Ks(e){function t(s,r,i,a,o){this._reactName=s,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(s=e[c],this[c]=s?s(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Mh:i_,this.isPropagationStopped=i_,this}return un(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Mh)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Mh)},persist:function(){},isPersistent:Mh}),t}var Oc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},y0=Ks(Oc),qu=un({},Oc,{view:0,detail:0}),XM=Ks(qu),Eg,Tg,gd,Dm=un({},qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:b0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gd&&(gd&&e.type==="mousemove"?(Eg=e.screenX-gd.screenX,Tg=e.screenY-gd.screenY):Tg=Eg=0,gd=e),Eg)},movementY:function(e){return"movementY"in e?e.movementY:Tg}}),a_=Ks(Dm),QM=un({},Dm,{dataTransfer:0}),JM=Ks(QM),e3=un({},qu,{relatedTarget:0}),Ag=Ks(e3),t3=un({},Oc,{animationName:0,elapsedTime:0,pseudoElement:0}),n3=Ks(t3),s3=un({},Oc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),r3=Ks(s3),i3=un({},Oc,{data:0}),o_=Ks(i3),a3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=l3[e])?!!t[e]:!1}function b0(){return c3}var d3=un({},qu,{key:function(e){if(e.key){var t=a3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=df(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?o3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:b0,charCode:function(e){return e.type==="keypress"?df(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?df(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),u3=Ks(d3),h3=un({},Dm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l_=Ks(h3),f3=un({},qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:b0}),m3=Ks(f3),p3=un({},Oc,{propertyName:0,elapsedTime:0,pseudoElement:0}),g3=Ks(p3),v3=un({},Dm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),x3=Ks(v3),y3=[9,13,27,32],w0=Gi&&"CompositionEvent"in window,$d=null;Gi&&"documentMode"in document&&($d=document.documentMode);var b3=Gi&&"TextEvent"in window&&!$d,bk=Gi&&(!w0||$d&&8<$d&&11>=$d),c_=" ",d_=!1;function wk(e,t){switch(e){case"keyup":return y3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jl=!1;function w3(e,t){switch(e){case"compositionend":return jk(t);case"keypress":return t.which!==32?null:(d_=!0,c_);case"textInput":return e=t.data,e===c_&&d_?null:e;default:return null}}function j3(e,t){if(jl)return e==="compositionend"||!w0&&wk(e,t)?(e=yk(),cf=x0=Sa=null,jl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bk&&t.locale!=="ko"?null:t.data;default:return null}}var _3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_3[e.type]:t==="textarea"}function _k(e,t,s,r){ek(r),t=If(t,"onChange"),0<t.length&&(s=new y0("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var zd=null,cu=null;function N3(e){Lk(e,0)}function Fm(e){var t=Sl(e);if(Z2(t))return e}function S3(e,t){if(e==="change")return t}var Nk=!1;if(Gi){var Og;if(Gi){var Rg="oninput"in document;if(!Rg){var h_=document.createElement("div");h_.setAttribute("oninput","return;"),Rg=typeof h_.oninput=="function"}Og=Rg}else Og=!1;Nk=Og&&(!document.documentMode||9<document.documentMode)}function f_(){zd&&(zd.detachEvent("onpropertychange",Sk),cu=zd=null)}function Sk(e){if(e.propertyName==="value"&&Fm(cu)){var t=[];_k(t,cu,e,f0(e)),rk(N3,t)}}function k3(e,t,s){e==="focusin"?(f_(),zd=t,cu=s,zd.attachEvent("onpropertychange",Sk)):e==="focusout"&&f_()}function C3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fm(cu)}function P3(e,t){if(e==="click")return Fm(t)}function E3(e,t){if(e==="input"||e==="change")return Fm(t)}function T3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $r=typeof Object.is=="function"?Object.is:T3;function du(e,t){if($r(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var i=s[r];if(!Mv.call(t,i)||!$r(e[i],t[i]))return!1}return!0}function m_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function p_(e,t){var s=m_(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=m_(s)}}function kk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ck(){for(var e=window,t=Ef();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ef(e.document)}return t}function j0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function A3(e){var t=Ck(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&kk(s.ownerDocument.documentElement,s)){if(r!==null&&j0(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=s.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=p_(s,a);var o=p_(s,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var O3=Gi&&"documentMode"in document&&11>=document.documentMode,_l=null,ex=null,Bd=null,tx=!1;function g_(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;tx||_l==null||_l!==Ef(r)||(r=_l,"selectionStart"in r&&j0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bd&&du(Bd,r)||(Bd=r,r=If(ex,"onSelect"),0<r.length&&(t=new y0("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=_l)))}function Ih(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Nl={animationend:Ih("Animation","AnimationEnd"),animationiteration:Ih("Animation","AnimationIteration"),animationstart:Ih("Animation","AnimationStart"),transitionend:Ih("Transition","TransitionEnd")},Lg={},Pk={};Gi&&(Pk=document.createElement("div").style,"AnimationEvent"in window||(delete Nl.animationend.animation,delete Nl.animationiteration.animation,delete Nl.animationstart.animation),"TransitionEvent"in window||delete Nl.transitionend.transition);function $m(e){if(Lg[e])return Lg[e];if(!Nl[e])return e;var t=Nl[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Pk)return Lg[e]=t[s];return e}var Ek=$m("animationend"),Tk=$m("animationiteration"),Ak=$m("animationstart"),Ok=$m("transitionend"),Rk=new Map,v_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xa(e,t){Rk.set(e,t),Qo(t,[e])}for(var Mg=0;Mg<v_.length;Mg++){var Ig=v_[Mg],R3=Ig.toLowerCase(),L3=Ig[0].toUpperCase()+Ig.slice(1);Xa(R3,"on"+L3)}Xa(Ek,"onAnimationEnd");Xa(Tk,"onAnimationIteration");Xa(Ak,"onAnimationStart");Xa("dblclick","onDoubleClick");Xa("focusin","onFocus");Xa("focusout","onBlur");Xa(Ok,"onTransitionEnd");oc("onMouseEnter",["mouseout","mouseover"]);oc("onMouseLeave",["mouseout","mouseover"]);oc("onPointerEnter",["pointerout","pointerover"]);oc("onPointerLeave",["pointerout","pointerover"]);Qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Od));function x_(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,RM(r,t,void 0,e),e.currentTarget=null}function Lk(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],d=c.instance,f=c.currentTarget;if(c=c.listener,d!==a&&i.isPropagationStopped())break e;x_(i,c,f),a=d}else for(o=0;o<r.length;o++){if(c=r[o],d=c.instance,f=c.currentTarget,c=c.listener,d!==a&&i.isPropagationStopped())break e;x_(i,c,f),a=d}}}if(Af)throw e=Yv,Af=!1,Yv=null,e}function Qt(e,t){var s=t[ax];s===void 0&&(s=t[ax]=new Set);var r=e+"__bubble";s.has(r)||(Mk(t,e,2,!1),s.add(r))}function Dg(e,t,s){var r=0;t&&(r|=4),Mk(s,e,r,t)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function uu(e){if(!e[Dh]){e[Dh]=!0,V2.forEach(function(s){s!=="selectionchange"&&(M3.has(s)||Dg(s,!1,e),Dg(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dh]||(t[Dh]=!0,Dg("selectionchange",!1,t))}}function Mk(e,t,s,r){switch(xk(t)){case 1:var i=KM;break;case 4:i=YM;break;default:i=v0}s=i.bind(null,t,s,e),i=void 0,!Kv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,s,{capture:!0,passive:i}):e.addEventListener(t,s,!0):i!==void 0?e.addEventListener(t,s,{passive:i}):e.addEventListener(t,s,!1)}function Fg(e,t,s,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;c!==null;){if(o=yo(c),o===null)return;if(d=o.tag,d===5||d===6){r=a=o;continue e}c=c.parentNode}}r=r.return}rk(function(){var f=a,m=f0(s),h=[];e:{var u=Rk.get(e);if(u!==void 0){var p=y0,y=e;switch(e){case"keypress":if(df(s)===0)break e;case"keydown":case"keyup":p=u3;break;case"focusin":y="focus",p=Ag;break;case"focusout":y="blur",p=Ag;break;case"beforeblur":case"afterblur":p=Ag;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=a_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=JM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=m3;break;case Ek:case Tk:case Ak:p=n3;break;case Ok:p=g3;break;case"scroll":p=XM;break;case"wheel":p=x3;break;case"copy":case"cut":case"paste":p=r3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=l_}var v=(t&4)!==0,w=!v&&e==="scroll",x=v?u!==null?u+"Capture":null:u;v=[];for(var b=f,_;b!==null;){_=b;var N=_.stateNode;if(_.tag===5&&N!==null&&(_=N,x!==null&&(N=iu(b,x),N!=null&&v.push(hu(b,N,_)))),w)break;b=b.return}0<v.length&&(u=new p(u,y,null,s,m),h.push({event:u,listeners:v}))}}if(!(t&7)){e:{if(u=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",u&&s!==Zv&&(y=s.relatedTarget||s.fromElement)&&(yo(y)||y[Ki]))break e;if((p||u)&&(u=m.window===m?m:(u=m.ownerDocument)?u.defaultView||u.parentWindow:window,p?(y=s.relatedTarget||s.toElement,p=f,y=y?yo(y):null,y!==null&&(w=Jo(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=f),p!==y)){if(v=a_,N="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=l_,N="onPointerLeave",x="onPointerEnter",b="pointer"),w=p==null?u:Sl(p),_=y==null?u:Sl(y),u=new v(N,b+"leave",p,s,m),u.target=w,u.relatedTarget=_,N=null,yo(m)===f&&(v=new v(x,b+"enter",y,s,m),v.target=_,v.relatedTarget=w,N=v),w=N,p&&y)t:{for(v=p,x=y,b=0,_=v;_;_=hl(_))b++;for(_=0,N=x;N;N=hl(N))_++;for(;0<b-_;)v=hl(v),b--;for(;0<_-b;)x=hl(x),_--;for(;b--;){if(v===x||x!==null&&v===x.alternate)break t;v=hl(v),x=hl(x)}v=null}else v=null;p!==null&&y_(h,u,p,v,!1),y!==null&&w!==null&&y_(h,w,y,v,!0)}}e:{if(u=f?Sl(f):window,p=u.nodeName&&u.nodeName.toLowerCase(),p==="select"||p==="input"&&u.type==="file")var C=S3;else if(u_(u))if(Nk)C=E3;else{C=C3;var I=k3}else(p=u.nodeName)&&p.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(C=P3);if(C&&(C=C(e,f))){_k(h,C,s,m);break e}I&&I(e,u,f),e==="focusout"&&(I=u._wrapperState)&&I.controlled&&u.type==="number"&&Vv(u,"number",u.value)}switch(I=f?Sl(f):window,e){case"focusin":(u_(I)||I.contentEditable==="true")&&(_l=I,ex=f,Bd=null);break;case"focusout":Bd=ex=_l=null;break;case"mousedown":tx=!0;break;case"contextmenu":case"mouseup":case"dragend":tx=!1,g_(h,s,m);break;case"selectionchange":if(O3)break;case"keydown":case"keyup":g_(h,s,m)}var k;if(w0)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else jl?wk(e,s)&&(E="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(E="onCompositionStart");E&&(bk&&s.locale!=="ko"&&(jl||E!=="onCompositionStart"?E==="onCompositionEnd"&&jl&&(k=yk()):(Sa=m,x0="value"in Sa?Sa.value:Sa.textContent,jl=!0)),I=If(f,E),0<I.length&&(E=new o_(E,e,null,s,m),h.push({event:E,listeners:I}),k?E.data=k:(k=jk(s),k!==null&&(E.data=k)))),(k=b3?w3(e,s):j3(e,s))&&(f=If(f,"onBeforeInput"),0<f.length&&(m=new o_("onBeforeInput","beforeinput",null,s,m),h.push({event:m,listeners:f}),m.data=k))}Lk(h,t)})}function hu(e,t,s){return{instance:e,listener:t,currentTarget:s}}function If(e,t){for(var s=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=iu(e,s),a!=null&&r.unshift(hu(e,a,i)),a=iu(e,t),a!=null&&r.push(hu(e,a,i))),e=e.return}return r}function hl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function y_(e,t,s,r,i){for(var a=t._reactName,o=[];s!==null&&s!==r;){var c=s,d=c.alternate,f=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&f!==null&&(c=f,i?(d=iu(s,a),d!=null&&o.unshift(hu(s,d,c))):i||(d=iu(s,a),d!=null&&o.push(hu(s,d,c)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var I3=/\r\n?/g,D3=/\u0000|\uFFFD/g;function b_(e){return(typeof e=="string"?e:""+e).replace(I3,`
`).replace(D3,"")}function Fh(e,t,s){if(t=b_(t),b_(e)!==t&&s)throw Error(Oe(425))}function Df(){}var nx=null,sx=null;function rx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ix=typeof setTimeout=="function"?setTimeout:void 0,F3=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,$3=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(e){return w_.resolve(null).then(e).catch(z3)}:ix;function z3(e){setTimeout(function(){throw e})}function $g(e,t){var s=t,r=0;do{var i=s.nextSibling;if(e.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(r===0){e.removeChild(i),lu(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=i}while(s);lu(t)}function Aa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function j_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Rc=Math.random().toString(36).slice(2),ri="__reactFiber$"+Rc,fu="__reactProps$"+Rc,Ki="__reactContainer$"+Rc,ax="__reactEvents$"+Rc,B3="__reactListeners$"+Rc,V3="__reactHandles$"+Rc;function yo(e){var t=e[ri];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ki]||s[ri]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=j_(e);e!==null;){if(s=e[ri])return s;e=j_(e)}return t}e=s,s=e.parentNode}return null}function Hu(e){return e=e[ri]||e[Ki],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Oe(33))}function zm(e){return e[fu]||null}var ox=[],kl=-1;function Qa(e){return{current:e}}function en(e){0>kl||(e.current=ox[kl],ox[kl]=null,kl--)}function Gt(e,t){kl++,ox[kl]=e.current,e.current=t}var Va={},os=Qa(Va),Rs=Qa(!1),$o=Va;function lc(e,t){var s=e.type.contextTypes;if(!s)return Va;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ls(e){return e=e.childContextTypes,e!=null}function Ff(){en(Rs),en(os)}function __(e,t,s){if(os.current!==Va)throw Error(Oe(168));Gt(os,t),Gt(Rs,s)}function Ik(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Oe(108,kM(e)||"Unknown",i));return un({},s,r)}function $f(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Va,$o=os.current,Gt(os,e),Gt(Rs,Rs.current),!0}function N_(e,t,s){var r=e.stateNode;if(!r)throw Error(Oe(169));s?(e=Ik(e,t,$o),r.__reactInternalMemoizedMergedChildContext=e,en(Rs),en(os),Gt(os,e)):en(Rs),Gt(Rs,s)}var $i=null,Bm=!1,zg=!1;function Dk(e){$i===null?$i=[e]:$i.push(e)}function U3(e){Bm=!0,Dk(e)}function Ja(){if(!zg&&$i!==null){zg=!0;var e=0,t=Dt;try{var s=$i;for(Dt=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}$i=null,Bm=!1}catch(i){throw $i!==null&&($i=$i.slice(e+1)),lk(m0,Ja),i}finally{Dt=t,zg=!1}}return null}var Cl=[],Pl=0,zf=null,Bf=0,nr=[],sr=0,zo=null,Ui=1,qi="";function fo(e,t){Cl[Pl++]=Bf,Cl[Pl++]=zf,zf=e,Bf=t}function Fk(e,t,s){nr[sr++]=Ui,nr[sr++]=qi,nr[sr++]=zo,zo=e;var r=Ui;e=qi;var i=32-Ir(r)-1;r&=~(1<<i),s+=1;var a=32-Ir(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ui=1<<32-Ir(t)+i|s<<i|r,qi=a+e}else Ui=1<<a|s<<i|r,qi=e}function _0(e){e.return!==null&&(fo(e,1),Fk(e,1,0))}function N0(e){for(;e===zf;)zf=Cl[--Pl],Cl[Pl]=null,Bf=Cl[--Pl],Cl[Pl]=null;for(;e===zo;)zo=nr[--sr],nr[sr]=null,qi=nr[--sr],nr[sr]=null,Ui=nr[--sr],nr[sr]=null}var Hs=null,qs=null,tn=!1,Er=null;function $k(e,t){var s=rr(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function S_(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hs=e,qs=Aa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hs=e,qs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=zo!==null?{id:Ui,overflow:qi}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=rr(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Hs=e,qs=null,!0):!1;default:return!1}}function lx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function cx(e){if(tn){var t=qs;if(t){var s=t;if(!S_(e,t)){if(lx(e))throw Error(Oe(418));t=Aa(s.nextSibling);var r=Hs;t&&S_(e,t)?$k(r,s):(e.flags=e.flags&-4097|2,tn=!1,Hs=e)}}else{if(lx(e))throw Error(Oe(418));e.flags=e.flags&-4097|2,tn=!1,Hs=e}}}function k_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hs=e}function $h(e){if(e!==Hs)return!1;if(!tn)return k_(e),tn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rx(e.type,e.memoizedProps)),t&&(t=qs)){if(lx(e))throw zk(),Error(Oe(418));for(;t;)$k(e,t),t=Aa(t.nextSibling)}if(k_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){qs=Aa(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}qs=null}}else qs=Hs?Aa(e.stateNode.nextSibling):null;return!0}function zk(){for(var e=qs;e;)e=Aa(e.nextSibling)}function cc(){qs=Hs=null,tn=!1}function S0(e){Er===null?Er=[e]:Er.push(e)}var q3=ia.ReactCurrentBatchConfig;function vd(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Oe(309));var r=s.stateNode}if(!r)throw Error(Oe(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Oe(284));if(!s._owner)throw Error(Oe(290,e))}return e}function zh(e,t){throw e=Object.prototype.toString.call(t),Error(Oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function C_(e){var t=e._init;return t(e._payload)}function Bk(e){function t(x,b){if(e){var _=x.deletions;_===null?(x.deletions=[b],x.flags|=16):_.push(b)}}function s(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function r(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function i(x,b){return x=Ma(x,b),x.index=0,x.sibling=null,x}function a(x,b,_){return x.index=_,e?(_=x.alternate,_!==null?(_=_.index,_<b?(x.flags|=2,b):_):(x.flags|=2,b)):(x.flags|=1048576,b)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,b,_,N){return b===null||b.tag!==6?(b=Zg(_,x.mode,N),b.return=x,b):(b=i(b,_),b.return=x,b)}function d(x,b,_,N){var C=_.type;return C===wl?m(x,b,_.props.children,N,_.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===pa&&C_(C)===b.type)?(N=i(b,_.props),N.ref=vd(x,b,_),N.return=x,N):(N=vf(_.type,_.key,_.props,null,x.mode,N),N.ref=vd(x,b,_),N.return=x,N)}function f(x,b,_,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=Gg(_,x.mode,N),b.return=x,b):(b=i(b,_.children||[]),b.return=x,b)}function m(x,b,_,N,C){return b===null||b.tag!==7?(b=Oo(_,x.mode,N,C),b.return=x,b):(b=i(b,_),b.return=x,b)}function h(x,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Zg(""+b,x.mode,_),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Eh:return _=vf(b.type,b.key,b.props,null,x.mode,_),_.ref=vd(x,null,b),_.return=x,_;case bl:return b=Gg(b,x.mode,_),b.return=x,b;case pa:var N=b._init;return h(x,N(b._payload),_)}if(Td(b)||hd(b))return b=Oo(b,x.mode,_,null),b.return=x,b;zh(x,b)}return null}function u(x,b,_,N){var C=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:c(x,b,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Eh:return _.key===C?d(x,b,_,N):null;case bl:return _.key===C?f(x,b,_,N):null;case pa:return C=_._init,u(x,b,C(_._payload),N)}if(Td(_)||hd(_))return C!==null?null:m(x,b,_,N,null);zh(x,_)}return null}function p(x,b,_,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(_)||null,c(b,x,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Eh:return x=x.get(N.key===null?_:N.key)||null,d(b,x,N,C);case bl:return x=x.get(N.key===null?_:N.key)||null,f(b,x,N,C);case pa:var I=N._init;return p(x,b,_,I(N._payload),C)}if(Td(N)||hd(N))return x=x.get(_)||null,m(b,x,N,C,null);zh(b,N)}return null}function y(x,b,_,N){for(var C=null,I=null,k=b,E=b=0,M=null;k!==null&&E<_.length;E++){k.index>E?(M=k,k=null):M=k.sibling;var P=u(x,k,_[E],N);if(P===null){k===null&&(k=M);break}e&&k&&P.alternate===null&&t(x,k),b=a(P,b,E),I===null?C=P:I.sibling=P,I=P,k=M}if(E===_.length)return s(x,k),tn&&fo(x,E),C;if(k===null){for(;E<_.length;E++)k=h(x,_[E],N),k!==null&&(b=a(k,b,E),I===null?C=k:I.sibling=k,I=k);return tn&&fo(x,E),C}for(k=r(x,k);E<_.length;E++)M=p(k,x,E,_[E],N),M!==null&&(e&&M.alternate!==null&&k.delete(M.key===null?E:M.key),b=a(M,b,E),I===null?C=M:I.sibling=M,I=M);return e&&k.forEach(function(T){return t(x,T)}),tn&&fo(x,E),C}function v(x,b,_,N){var C=hd(_);if(typeof C!="function")throw Error(Oe(150));if(_=C.call(_),_==null)throw Error(Oe(151));for(var I=C=null,k=b,E=b=0,M=null,P=_.next();k!==null&&!P.done;E++,P=_.next()){k.index>E?(M=k,k=null):M=k.sibling;var T=u(x,k,P.value,N);if(T===null){k===null&&(k=M);break}e&&k&&T.alternate===null&&t(x,k),b=a(T,b,E),I===null?C=T:I.sibling=T,I=T,k=M}if(P.done)return s(x,k),tn&&fo(x,E),C;if(k===null){for(;!P.done;E++,P=_.next())P=h(x,P.value,N),P!==null&&(b=a(P,b,E),I===null?C=P:I.sibling=P,I=P);return tn&&fo(x,E),C}for(k=r(x,k);!P.done;E++,P=_.next())P=p(k,x,E,P.value,N),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?E:P.key),b=a(P,b,E),I===null?C=P:I.sibling=P,I=P);return e&&k.forEach(function(A){return t(x,A)}),tn&&fo(x,E),C}function w(x,b,_,N){if(typeof _=="object"&&_!==null&&_.type===wl&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Eh:e:{for(var C=_.key,I=b;I!==null;){if(I.key===C){if(C=_.type,C===wl){if(I.tag===7){s(x,I.sibling),b=i(I,_.props.children),b.return=x,x=b;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===pa&&C_(C)===I.type){s(x,I.sibling),b=i(I,_.props),b.ref=vd(x,I,_),b.return=x,x=b;break e}s(x,I);break}else t(x,I);I=I.sibling}_.type===wl?(b=Oo(_.props.children,x.mode,N,_.key),b.return=x,x=b):(N=vf(_.type,_.key,_.props,null,x.mode,N),N.ref=vd(x,b,_),N.return=x,x=N)}return o(x);case bl:e:{for(I=_.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){s(x,b.sibling),b=i(b,_.children||[]),b.return=x,x=b;break e}else{s(x,b);break}else t(x,b);b=b.sibling}b=Gg(_,x.mode,N),b.return=x,x=b}return o(x);case pa:return I=_._init,w(x,b,I(_._payload),N)}if(Td(_))return y(x,b,_,N);if(hd(_))return v(x,b,_,N);zh(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(s(x,b.sibling),b=i(b,_),b.return=x,x=b):(s(x,b),b=Zg(_,x.mode,N),b.return=x,x=b),o(x)):s(x,b)}return w}var dc=Bk(!0),Vk=Bk(!1),Vf=Qa(null),Uf=null,El=null,k0=null;function C0(){k0=El=Uf=null}function P0(e){var t=Vf.current;en(Vf),e._currentValue=t}function dx(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function Ul(e,t){Uf=e,k0=El=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ts=!0),e.firstContext=null)}function dr(e){var t=e._currentValue;if(k0!==e)if(e={context:e,memoizedValue:t,next:null},El===null){if(Uf===null)throw Error(Oe(308));El=e,Uf.dependencies={lanes:0,firstContext:e}}else El=El.next=e;return t}var bo=null;function E0(e){bo===null?bo=[e]:bo.push(e)}function Uk(e,t,s,r){var i=t.interleaved;return i===null?(s.next=s,E0(t)):(s.next=i.next,i.next=s),t.interleaved=s,Yi(e,r)}function Yi(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var ga=!1;function T0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ot&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Yi(e,s)}return i=r.interleaved,i===null?(t.next=t,E0(r)):(t.next=i.next,i.next=t),r.interleaved=t,Yi(e,s)}function uf(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,p0(e,s)}}function P_(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?i=a=t:a=a.next=t}else i=a=t;s={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function qf(e,t,s,r){var i=e.updateQueue;ga=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,f=d.next;d.next=null,o===null?a=f:o.next=f,o=d;var m=e.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=d))}if(a!==null){var h=i.baseState;o=0,m=f=d=null,c=a;do{var u=c.lane,p=c.eventTime;if((r&u)===u){m!==null&&(m=m.next={eventTime:p,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var y=e,v=c;switch(u=t,p=s,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(p,h,u);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,u=typeof y=="function"?y.call(p,h,u):y,u==null)break e;h=un({},h,u);break e;case 2:ga=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,u=i.effects,u===null?i.effects=[c]:u.push(c))}else p={eventTime:p,lane:u,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(f=m=p,d=h):m=m.next=p,o|=u;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;u=c,c=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}while(!0);if(m===null&&(d=h),i.baseState=d,i.firstBaseUpdate=f,i.lastBaseUpdate=m,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Vo|=o,e.lanes=o,e.memoizedState=h}}function E_(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=s,typeof i!="function")throw Error(Oe(191,i));i.call(r)}}}var Wu={},di=Qa(Wu),mu=Qa(Wu),pu=Qa(Wu);function wo(e){if(e===Wu)throw Error(Oe(174));return e}function A0(e,t){switch(Gt(pu,t),Gt(mu,e),Gt(di,Wu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qv(t,e)}en(di),Gt(di,t)}function uc(){en(di),en(mu),en(pu)}function Hk(e){wo(pu.current);var t=wo(di.current),s=qv(t,e.type);t!==s&&(Gt(mu,e),Gt(di,s))}function O0(e){mu.current===e&&(en(di),en(mu))}var on=Qa(0);function Hf(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bg=[];function R0(){for(var e=0;e<Bg.length;e++)Bg[e]._workInProgressVersionPrimary=null;Bg.length=0}var hf=ia.ReactCurrentDispatcher,Vg=ia.ReactCurrentBatchConfig,Bo=0,cn=null,In=null,zn=null,Wf=!1,Vd=!1,gu=0,H3=0;function es(){throw Error(Oe(321))}function L0(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!$r(e[s],t[s]))return!1;return!0}function M0(e,t,s,r,i,a){if(Bo=a,cn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hf.current=e===null||e.memoizedState===null?K3:Y3,e=s(r,i),Vd){a=0;do{if(Vd=!1,gu=0,25<=a)throw Error(Oe(301));a+=1,zn=In=null,t.updateQueue=null,hf.current=X3,e=s(r,i)}while(Vd)}if(hf.current=Zf,t=In!==null&&In.next!==null,Bo=0,zn=In=cn=null,Wf=!1,t)throw Error(Oe(300));return e}function I0(){var e=gu!==0;return gu=0,e}function ei(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?cn.memoizedState=zn=e:zn=zn.next=e,zn}function ur(){if(In===null){var e=cn.alternate;e=e!==null?e.memoizedState:null}else e=In.next;var t=zn===null?cn.memoizedState:zn.next;if(t!==null)zn=t,In=e;else{if(e===null)throw Error(Oe(310));In=e,e={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},zn===null?cn.memoizedState=zn=e:zn=zn.next=e}return zn}function vu(e,t){return typeof t=="function"?t(e):t}function Ug(e){var t=ur(),s=t.queue;if(s===null)throw Error(Oe(311));s.lastRenderedReducer=e;var r=In,i=r.baseQueue,a=s.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=o=null,d=null,f=a;do{var m=f.lane;if((Bo&m)===m)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var h={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(c=d=h,o=r):d=d.next=h,cn.lanes|=m,Vo|=m}f=f.next}while(f!==null&&f!==a);d===null?o=r:d.next=c,$r(r,t.memoizedState)||(Ts=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=d,s.lastRenderedState=r}if(e=s.interleaved,e!==null){i=e;do a=i.lane,cn.lanes|=a,Vo|=a,i=i.next;while(i!==e)}else i===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function qg(e){var t=ur(),s=t.queue;if(s===null)throw Error(Oe(311));s.lastRenderedReducer=e;var r=s.dispatch,i=s.pending,a=t.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);$r(a,t.memoizedState)||(Ts=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),s.lastRenderedState=a}return[a,r]}function Wk(){}function Zk(e,t){var s=cn,r=ur(),i=t(),a=!$r(r.memoizedState,i);if(a&&(r.memoizedState=i,Ts=!0),r=r.queue,D0(Yk.bind(null,s,r,e),[e]),r.getSnapshot!==t||a||zn!==null&&zn.memoizedState.tag&1){if(s.flags|=2048,xu(9,Kk.bind(null,s,r,i,t),void 0,null),Bn===null)throw Error(Oe(349));Bo&30||Gk(s,t,i)}return i}function Gk(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=cn.updateQueue,t===null?(t={lastEffect:null,stores:null},cn.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Kk(e,t,s,r){t.value=s,t.getSnapshot=r,Xk(t)&&Qk(e)}function Yk(e,t,s){return s(function(){Xk(t)&&Qk(e)})}function Xk(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!$r(e,s)}catch{return!0}}function Qk(e){var t=Yi(e,1);t!==null&&Dr(t,e,1,-1)}function T_(e){var t=ei();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:e},t.queue=e,e=e.dispatch=G3.bind(null,cn,e),[t.memoizedState,e]}function xu(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=cn.updateQueue,t===null?(t={lastEffect:null,stores:null},cn.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function Jk(){return ur().memoizedState}function ff(e,t,s,r){var i=ei();cn.flags|=e,i.memoizedState=xu(1|t,s,void 0,r===void 0?null:r)}function Vm(e,t,s,r){var i=ur();r=r===void 0?null:r;var a=void 0;if(In!==null){var o=In.memoizedState;if(a=o.destroy,r!==null&&L0(r,o.deps)){i.memoizedState=xu(t,s,a,r);return}}cn.flags|=e,i.memoizedState=xu(1|t,s,a,r)}function A_(e,t){return ff(8390656,8,e,t)}function D0(e,t){return Vm(2048,8,e,t)}function eC(e,t){return Vm(4,2,e,t)}function tC(e,t){return Vm(4,4,e,t)}function nC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sC(e,t,s){return s=s!=null?s.concat([e]):null,Vm(4,4,nC.bind(null,t,e),s)}function F0(){}function rC(e,t){var s=ur();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&L0(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function iC(e,t){var s=ur();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&L0(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function aC(e,t,s){return Bo&21?($r(s,t)||(s=uk(),cn.lanes|=s,Vo|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ts=!0),e.memoizedState=s)}function W3(e,t){var s=Dt;Dt=s!==0&&4>s?s:4,e(!0);var r=Vg.transition;Vg.transition={};try{e(!1),t()}finally{Dt=s,Vg.transition=r}}function oC(){return ur().memoizedState}function Z3(e,t,s){var r=La(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},lC(e))cC(t,s);else if(s=Uk(e,t,s,r),s!==null){var i=ys();Dr(s,e,r,i),dC(s,t,r)}}function G3(e,t,s){var r=La(e),i={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(lC(e))cC(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,c=a(o,s);if(i.hasEagerState=!0,i.eagerState=c,$r(c,o)){var d=t.interleaved;d===null?(i.next=i,E0(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}s=Uk(e,t,i,r),s!==null&&(i=ys(),Dr(s,e,r,i),dC(s,t,r))}}function lC(e){var t=e.alternate;return e===cn||t!==null&&t===cn}function cC(e,t){Vd=Wf=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function dC(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,p0(e,s)}}var Zf={readContext:dr,useCallback:es,useContext:es,useEffect:es,useImperativeHandle:es,useInsertionEffect:es,useLayoutEffect:es,useMemo:es,useReducer:es,useRef:es,useState:es,useDebugValue:es,useDeferredValue:es,useTransition:es,useMutableSource:es,useSyncExternalStore:es,useId:es,unstable_isNewReconciler:!1},K3={readContext:dr,useCallback:function(e,t){return ei().memoizedState=[e,t===void 0?null:t],e},useContext:dr,useEffect:A_,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,ff(4194308,4,nC.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ff(4194308,4,e,t)},useInsertionEffect:function(e,t){return ff(4,2,e,t)},useMemo:function(e,t){var s=ei();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=ei();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Z3.bind(null,cn,e),[r.memoizedState,e]},useRef:function(e){var t=ei();return e={current:e},t.memoizedState=e},useState:T_,useDebugValue:F0,useDeferredValue:function(e){return ei().memoizedState=e},useTransition:function(){var e=T_(!1),t=e[0];return e=W3.bind(null,e[1]),ei().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=cn,i=ei();if(tn){if(s===void 0)throw Error(Oe(407));s=s()}else{if(s=t(),Bn===null)throw Error(Oe(349));Bo&30||Gk(r,t,s)}i.memoizedState=s;var a={value:s,getSnapshot:t};return i.queue=a,A_(Yk.bind(null,r,a,e),[e]),r.flags|=2048,xu(9,Kk.bind(null,r,a,s,t),void 0,null),s},useId:function(){var e=ei(),t=Bn.identifierPrefix;if(tn){var s=qi,r=Ui;s=(r&~(1<<32-Ir(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=gu++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=H3++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Y3={readContext:dr,useCallback:rC,useContext:dr,useEffect:D0,useImperativeHandle:sC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:iC,useReducer:Ug,useRef:Jk,useState:function(){return Ug(vu)},useDebugValue:F0,useDeferredValue:function(e){var t=ur();return aC(t,In.memoizedState,e)},useTransition:function(){var e=Ug(vu)[0],t=ur().memoizedState;return[e,t]},useMutableSource:Wk,useSyncExternalStore:Zk,useId:oC,unstable_isNewReconciler:!1},X3={readContext:dr,useCallback:rC,useContext:dr,useEffect:D0,useImperativeHandle:sC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:iC,useReducer:qg,useRef:Jk,useState:function(){return qg(vu)},useDebugValue:F0,useDeferredValue:function(e){var t=ur();return In===null?t.memoizedState=e:aC(t,In.memoizedState,e)},useTransition:function(){var e=qg(vu)[0],t=ur().memoizedState;return[e,t]},useMutableSource:Wk,useSyncExternalStore:Zk,useId:oC,unstable_isNewReconciler:!1};function Nr(e,t){if(e&&e.defaultProps){t=un({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function ux(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:un({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Um={isMounted:function(e){return(e=e._reactInternals)?Jo(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=ys(),i=La(e),a=Wi(r,i);a.payload=t,s!=null&&(a.callback=s),t=Oa(e,a,i),t!==null&&(Dr(t,e,i,r),uf(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=ys(),i=La(e),a=Wi(r,i);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=Oa(e,a,i),t!==null&&(Dr(t,e,i,r),uf(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ys(),r=La(e),i=Wi(s,r);i.tag=2,t!=null&&(i.callback=t),t=Oa(e,i,r),t!==null&&(Dr(t,e,r,s),uf(t,e,r))}};function O_(e,t,s,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!du(s,r)||!du(i,a):!0}function uC(e,t,s){var r=!1,i=Va,a=t.contextType;return typeof a=="object"&&a!==null?a=dr(a):(i=Ls(t)?$o:os.current,r=t.contextTypes,a=(r=r!=null)?lc(e,i):Va),t=new t(s,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Um,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function R_(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&Um.enqueueReplaceState(t,t.state,null)}function hx(e,t,s,r){var i=e.stateNode;i.props=s,i.state=e.memoizedState,i.refs={},T0(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=dr(a):(a=Ls(t)?$o:os.current,i.context=lc(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ux(e,t,a,s),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Um.enqueueReplaceState(i,i.state,null),qf(e,s,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function hc(e,t){try{var s="",r=t;do s+=SM(r),r=r.return;while(r);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Hg(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function fx(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Q3=typeof WeakMap=="function"?WeakMap:Map;function hC(e,t,s){s=Wi(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){Kf||(Kf=!0,_x=r),fx(e,t)},s}function fC(e,t,s){s=Wi(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;s.payload=function(){return r(i)},s.callback=function(){fx(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){fx(e,t),typeof r!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function L_(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new Q3;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(s)||(i.add(s),e=hI.bind(null,e,t,s),t.then(e,e))}function M_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function I_(e,t,s,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Wi(-1,1),t.tag=2,Oa(s,t,1))),s.lanes|=1),e)}var J3=ia.ReactCurrentOwner,Ts=!1;function us(e,t,s,r){t.child=e===null?Vk(t,null,s,r):dc(t,e.child,s,r)}function D_(e,t,s,r,i){s=s.render;var a=t.ref;return Ul(t,i),r=M0(e,t,s,r,a,i),s=I0(),e!==null&&!Ts?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xi(e,t,i)):(tn&&s&&_0(t),t.flags|=1,us(e,t,r,i),t.child)}function F_(e,t,s,r,i){if(e===null){var a=s.type;return typeof a=="function"&&!W0(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=a,mC(e,t,a,r,i)):(e=vf(s.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:du,s(o,r)&&e.ref===t.ref)return Xi(e,t,i)}return t.flags|=1,e=Ma(a,r),e.ref=t.ref,e.return=t,t.child=e}function mC(e,t,s,r,i){if(e!==null){var a=e.memoizedProps;if(du(a,r)&&e.ref===t.ref)if(Ts=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Ts=!0);else return t.lanes=e.lanes,Xi(e,t,i)}return mx(e,t,s,r,i)}function pC(e,t,s){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(Al,zs),zs|=s;else{if(!(s&1073741824))return e=a!==null?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gt(Al,zs),zs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:s,Gt(Al,zs),zs|=r}else a!==null?(r=a.baseLanes|s,t.memoizedState=null):r=s,Gt(Al,zs),zs|=r;return us(e,t,i,s),t.child}function gC(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function mx(e,t,s,r,i){var a=Ls(s)?$o:os.current;return a=lc(t,a),Ul(t,i),s=M0(e,t,s,r,a,i),r=I0(),e!==null&&!Ts?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xi(e,t,i)):(tn&&r&&_0(t),t.flags|=1,us(e,t,s,i),t.child)}function $_(e,t,s,r,i){if(Ls(s)){var a=!0;$f(t)}else a=!1;if(Ul(t,i),t.stateNode===null)mf(e,t),uC(t,s,r),hx(t,s,r,i),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,f=s.contextType;typeof f=="object"&&f!==null?f=dr(f):(f=Ls(s)?$o:os.current,f=lc(t,f));var m=s.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||d!==f)&&R_(t,o,r,f),ga=!1;var u=t.memoizedState;o.state=u,qf(t,r,o,i),d=t.memoizedState,c!==r||u!==d||Rs.current||ga?(typeof m=="function"&&(ux(t,s,m,r),d=t.memoizedState),(c=ga||O_(t,s,c,r,u,d,f))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=f,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,qk(e,t),c=t.memoizedProps,f=t.type===t.elementType?c:Nr(t.type,c),o.props=f,h=t.pendingProps,u=o.context,d=s.contextType,typeof d=="object"&&d!==null?d=dr(d):(d=Ls(s)?$o:os.current,d=lc(t,d));var p=s.getDerivedStateFromProps;(m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==h||u!==d)&&R_(t,o,r,d),ga=!1,u=t.memoizedState,o.state=u,qf(t,r,o,i);var y=t.memoizedState;c!==h||u!==y||Rs.current||ga?(typeof p=="function"&&(ux(t,s,p,r),y=t.memoizedState),(f=ga||O_(t,s,f,r,u,y,d)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),o.props=r,o.state=y,o.context=d,r=f):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),r=!1)}return px(e,t,s,r,a,i)}function px(e,t,s,r,i,a){gC(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&N_(t,s,!1),Xi(e,t,a);r=t.stateNode,J3.current=t;var c=o&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=dc(t,e.child,null,a),t.child=dc(t,null,c,a)):us(e,t,c,a),t.memoizedState=r.state,i&&N_(t,s,!0),t.child}function vC(e){var t=e.stateNode;t.pendingContext?__(e,t.pendingContext,t.pendingContext!==t.context):t.context&&__(e,t.context,!1),A0(e,t.containerInfo)}function z_(e,t,s,r,i){return cc(),S0(i),t.flags|=256,us(e,t,s,r),t.child}var gx={dehydrated:null,treeContext:null,retryLane:0};function vx(e){return{baseLanes:e,cachePool:null,transitions:null}}function xC(e,t,s){var r=t.pendingProps,i=on.current,a=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(i&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Gt(on,i&1),e===null)return cx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Wm(o,r,0,null),e=Oo(e,r,s,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=vx(s),t.memoizedState=gx,e):$0(t,o));if(i=e.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return eI(e,t,o,r,c,i,s);if(a){a=r.fallback,o=t.mode,i=e.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Ma(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Ma(c,a):(a=Oo(a,o,s,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?vx(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~s,t.memoizedState=gx,r}return a=e.child,e=a.sibling,r=Ma(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function $0(e,t){return t=Wm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bh(e,t,s,r){return r!==null&&S0(r),dc(t,e.child,null,s),e=$0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eI(e,t,s,r,i,a,o){if(s)return t.flags&256?(t.flags&=-257,r=Hg(Error(Oe(422))),Bh(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Wm({mode:"visible",children:r.children},i,0,null),a=Oo(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&dc(t,e.child,null,o),t.child.memoizedState=vx(o),t.memoizedState=gx,a);if(!(t.mode&1))return Bh(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(Oe(419)),r=Hg(a,r,void 0),Bh(e,t,o,r)}if(c=(o&e.childLanes)!==0,Ts||c){if(r=Bn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Yi(e,i),Dr(r,e,i,-1))}return H0(),r=Hg(Error(Oe(421))),Bh(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=fI.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,qs=Aa(i.nextSibling),Hs=t,tn=!0,Er=null,e!==null&&(nr[sr++]=Ui,nr[sr++]=qi,nr[sr++]=zo,Ui=e.id,qi=e.overflow,zo=t),t=$0(t,r.children),t.flags|=4096,t)}function B_(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),dx(e.return,t,s)}function Wg(e,t,s,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=s,a.tailMode=i)}function yC(e,t,s){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(us(e,t,r.children,s),r=on.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&B_(e,s,t);else if(e.tag===19)B_(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gt(on,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(s=t.child,i=null;s!==null;)e=s.alternate,e!==null&&Hf(e)===null&&(i=s),s=s.sibling;s=i,s===null?(i=t.child,t.child=null):(i=s.sibling,s.sibling=null),Wg(t,!1,i,s,a);break;case"backwards":for(s=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Hf(e)===null){t.child=i;break}e=i.sibling,i.sibling=s,s=i,i=e}Wg(t,!0,s,null,a);break;case"together":Wg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xi(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Vo|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Oe(153));if(t.child!==null){for(e=t.child,s=Ma(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Ma(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function tI(e,t,s){switch(t.tag){case 3:vC(t),cc();break;case 5:Hk(t);break;case 1:Ls(t.type)&&$f(t);break;case 4:A0(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Gt(Vf,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Gt(on,on.current&1),t.flags|=128,null):s&t.child.childLanes?xC(e,t,s):(Gt(on,on.current&1),e=Xi(e,t,s),e!==null?e.sibling:null);Gt(on,on.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return yC(e,t,s);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Gt(on,on.current),r)break;return null;case 22:case 23:return t.lanes=0,pC(e,t,s)}return Xi(e,t,s)}var bC,xx,wC,jC;bC=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};xx=function(){};wC=function(e,t,s,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,wo(di.current);var a=null;switch(s){case"input":i=zv(e,i),r=zv(e,r),a=[];break;case"select":i=un({},i,{value:void 0}),r=un({},r,{value:void 0}),a=[];break;case"textarea":i=Uv(e,i),r=Uv(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Df)}Hv(s,r);var o;s=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var c=i[f];for(o in c)c.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(su.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in r){var d=r[f];if(c=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&d!==c&&(d!=null||c!=null))if(f==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(s||(s={}),s[o]=d[o])}else s||(a||(a=[]),a.push(f,s)),s=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(su.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&Qt("scroll",e),a||c===d||(a=[])):(a=a||[]).push(f,d))}s&&(a=a||[]).push("style",s);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};jC=function(e,t,s,r){s!==r&&(t.flags|=4)};function xd(e,t){if(!tn)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ts(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var i=e.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function nI(e,t,s){var r=t.pendingProps;switch(N0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ts(t),null;case 1:return Ls(t.type)&&Ff(),ts(t),null;case 3:return r=t.stateNode,uc(),en(Rs),en(os),R0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&($h(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Er!==null&&(kx(Er),Er=null))),xx(e,t),ts(t),null;case 5:O0(t);var i=wo(pu.current);if(s=t.type,e!==null&&t.stateNode!=null)wC(e,t,s,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Oe(166));return ts(t),null}if(e=wo(di.current),$h(t)){r=t.stateNode,s=t.type;var a=t.memoizedProps;switch(r[ri]=t,r[fu]=a,e=(t.mode&1)!==0,s){case"dialog":Qt("cancel",r),Qt("close",r);break;case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(i=0;i<Od.length;i++)Qt(Od[i],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"details":Qt("toggle",r);break;case"input":Yj(r,a),Qt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qt("invalid",r);break;case"textarea":Qj(r,a),Qt("invalid",r)}Hv(s,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&Fh(r.textContent,c,e),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Fh(r.textContent,c,e),i=["children",""+c]):su.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Qt("scroll",r)}switch(s){case"input":Th(r),Xj(r,a,!0);break;case"textarea":Th(r),Jj(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Df)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Y2(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(s,{is:r.is}):(e=o.createElement(s),s==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,s),e[ri]=t,e[fu]=r,bC(e,t,!1,!1),t.stateNode=e;e:{switch(o=Wv(s,r),s){case"dialog":Qt("cancel",e),Qt("close",e),i=r;break;case"iframe":case"object":case"embed":Qt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Od.length;i++)Qt(Od[i],e);i=r;break;case"source":Qt("error",e),i=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),i=r;break;case"details":Qt("toggle",e),i=r;break;case"input":Yj(e,r),i=zv(e,r),Qt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=un({},r,{value:void 0}),Qt("invalid",e);break;case"textarea":Qj(e,r),i=Uv(e,r),Qt("invalid",e);break;default:i=r}Hv(s,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?J2(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&X2(e,d)):a==="children"?typeof d=="string"?(s!=="textarea"||d!=="")&&ru(e,d):typeof d=="number"&&ru(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(su.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Qt("scroll",e):d!=null&&c0(e,a,d,o))}switch(s){case"input":Th(e),Xj(e,r,!1);break;case"textarea":Th(e),Jj(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ba(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?$l(e,!!r.multiple,a,!1):r.defaultValue!=null&&$l(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Df)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ts(t),null;case 6:if(e&&t.stateNode!=null)jC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Oe(166));if(s=wo(pu.current),wo(di.current),$h(t)){if(r=t.stateNode,s=t.memoizedProps,r[ri]=t,(a=r.nodeValue!==s)&&(e=Hs,e!==null))switch(e.tag){case 3:Fh(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fh(r.nodeValue,s,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[ri]=t,t.stateNode=r}return ts(t),null;case 13:if(en(on),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tn&&qs!==null&&t.mode&1&&!(t.flags&128))zk(),cc(),t.flags|=98560,a=!1;else if(a=$h(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(Oe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Oe(317));a[ri]=t}else cc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ts(t),a=!1}else Er!==null&&(kx(Er),Er=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||on.current&1?Dn===0&&(Dn=3):H0())),t.updateQueue!==null&&(t.flags|=4),ts(t),null);case 4:return uc(),xx(e,t),e===null&&uu(t.stateNode.containerInfo),ts(t),null;case 10:return P0(t.type._context),ts(t),null;case 17:return Ls(t.type)&&Ff(),ts(t),null;case 19:if(en(on),a=t.memoizedState,a===null)return ts(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)xd(a,!1);else{if(Dn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Hf(e),o!==null){for(t.flags|=128,xd(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)a=s,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Gt(on,on.current&1|2),t.child}e=e.sibling}a.tail!==null&&_n()>fc&&(t.flags|=128,r=!0,xd(a,!1),t.lanes=4194304)}else{if(!r)if(e=Hf(o),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),xd(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!tn)return ts(t),null}else 2*_n()-a.renderingStartTime>fc&&s!==1073741824&&(t.flags|=128,r=!0,xd(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(s=a.last,s!==null?s.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=_n(),t.sibling=null,s=on.current,Gt(on,r?s&1|2:s&1),t):(ts(t),null);case 22:case 23:return q0(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?zs&1073741824&&(ts(t),t.subtreeFlags&6&&(t.flags|=8192)):ts(t),null;case 24:return null;case 25:return null}throw Error(Oe(156,t.tag))}function sI(e,t){switch(N0(t),t.tag){case 1:return Ls(t.type)&&Ff(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return uc(),en(Rs),en(os),R0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return O0(t),null;case 13:if(en(on),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Oe(340));cc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return en(on),null;case 4:return uc(),null;case 10:return P0(t.type._context),null;case 22:case 23:return q0(),null;case 24:return null;default:return null}}var Vh=!1,ss=!1,rI=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Tl(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){gn(e,t,r)}else s.current=null}function yx(e,t,s){try{s()}catch(r){gn(e,t,r)}}var V_=!1;function iI(e,t){if(nx=Lf,e=Ck(),j0(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,c=-1,d=-1,f=0,m=0,h=e,u=null;t:for(;;){for(var p;h!==s||i!==0&&h.nodeType!==3||(c=o+i),h!==a||r!==0&&h.nodeType!==3||(d=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)u=h,h=p;for(;;){if(h===e)break t;if(u===s&&++f===i&&(c=o),u===a&&++m===r&&(d=o),(p=h.nextSibling)!==null)break;h=u,u=h.parentNode}h=p}s=c===-1||d===-1?null:{start:c,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(sx={focusedElem:e,selectionRange:s},Lf=!1,Ge=t;Ge!==null;)if(t=Ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ge=e;else for(;Ge!==null;){t=Ge;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,w=y.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?v:Nr(t.type,v),w);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(N){gn(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Ge=e;break}Ge=t.return}return y=V_,V_=!1,y}function Ud(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&yx(t,s,a)}i=i.next}while(i!==r)}}function qm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function bx(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function _C(e){var t=e.alternate;t!==null&&(e.alternate=null,_C(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ri],delete t[fu],delete t[ax],delete t[B3],delete t[V3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NC(e){return e.tag===5||e.tag===3||e.tag===4}function U_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wx(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Df));else if(r!==4&&(e=e.child,e!==null))for(wx(e,t,s),e=e.sibling;e!==null;)wx(e,t,s),e=e.sibling}function jx(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(jx(e,t,s),e=e.sibling;e!==null;)jx(e,t,s),e=e.sibling}var Hn=null,Pr=!1;function ca(e,t,s){for(s=s.child;s!==null;)SC(e,t,s),s=s.sibling}function SC(e,t,s){if(ci&&typeof ci.onCommitFiberUnmount=="function")try{ci.onCommitFiberUnmount(Im,s)}catch{}switch(s.tag){case 5:ss||Tl(s,t);case 6:var r=Hn,i=Pr;Hn=null,ca(e,t,s),Hn=r,Pr=i,Hn!==null&&(Pr?(e=Hn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Hn.removeChild(s.stateNode));break;case 18:Hn!==null&&(Pr?(e=Hn,s=s.stateNode,e.nodeType===8?$g(e.parentNode,s):e.nodeType===1&&$g(e,s),lu(e)):$g(Hn,s.stateNode));break;case 4:r=Hn,i=Pr,Hn=s.stateNode.containerInfo,Pr=!0,ca(e,t,s),Hn=r,Pr=i;break;case 0:case 11:case 14:case 15:if(!ss&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&yx(s,t,o),i=i.next}while(i!==r)}ca(e,t,s);break;case 1:if(!ss&&(Tl(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(c){gn(s,t,c)}ca(e,t,s);break;case 21:ca(e,t,s);break;case 22:s.mode&1?(ss=(r=ss)||s.memoizedState!==null,ca(e,t,s),ss=r):ca(e,t,s);break;default:ca(e,t,s)}}function q_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new rI),t.forEach(function(r){var i=mI.bind(null,e,r);s.has(r)||(s.add(r),r.then(i,i))})}}function br(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var i=s[r];try{var a=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Hn=c.stateNode,Pr=!1;break e;case 3:Hn=c.stateNode.containerInfo,Pr=!0;break e;case 4:Hn=c.stateNode.containerInfo,Pr=!0;break e}c=c.return}if(Hn===null)throw Error(Oe(160));SC(a,o,i),Hn=null,Pr=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(f){gn(i,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kC(t,e),t=t.sibling}function kC(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(br(t,e),Xr(e),r&4){try{Ud(3,e,e.return),qm(3,e)}catch(v){gn(e,e.return,v)}try{Ud(5,e,e.return)}catch(v){gn(e,e.return,v)}}break;case 1:br(t,e),Xr(e),r&512&&s!==null&&Tl(s,s.return);break;case 5:if(br(t,e),Xr(e),r&512&&s!==null&&Tl(s,s.return),e.flags&32){var i=e.stateNode;try{ru(i,"")}catch(v){gn(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=s!==null?s.memoizedProps:a,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&G2(i,a),Wv(c,o);var f=Wv(c,a);for(o=0;o<d.length;o+=2){var m=d[o],h=d[o+1];m==="style"?J2(i,h):m==="dangerouslySetInnerHTML"?X2(i,h):m==="children"?ru(i,h):c0(i,m,h,f)}switch(c){case"input":Bv(i,a);break;case"textarea":K2(i,a);break;case"select":var u=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?$l(i,!!a.multiple,p,!1):u!==!!a.multiple&&(a.defaultValue!=null?$l(i,!!a.multiple,a.defaultValue,!0):$l(i,!!a.multiple,a.multiple?[]:"",!1))}i[fu]=a}catch(v){gn(e,e.return,v)}}break;case 6:if(br(t,e),Xr(e),r&4){if(e.stateNode===null)throw Error(Oe(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(v){gn(e,e.return,v)}}break;case 3:if(br(t,e),Xr(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{lu(t.containerInfo)}catch(v){gn(e,e.return,v)}break;case 4:br(t,e),Xr(e);break;case 13:br(t,e),Xr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(V0=_n())),r&4&&q_(e);break;case 22:if(m=s!==null&&s.memoizedState!==null,e.mode&1?(ss=(f=ss)||m,br(t,e),ss=f):br(t,e),Xr(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!m&&e.mode&1)for(Ge=e,m=e.child;m!==null;){for(h=Ge=m;Ge!==null;){switch(u=Ge,p=u.child,u.tag){case 0:case 11:case 14:case 15:Ud(4,u,u.return);break;case 1:Tl(u,u.return);var y=u.stateNode;if(typeof y.componentWillUnmount=="function"){r=u,s=u.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){gn(r,s,v)}}break;case 5:Tl(u,u.return);break;case 22:if(u.memoizedState!==null){W_(h);continue}}p!==null?(p.return=u,Ge=p):W_(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{i=h.stateNode,f?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=h.stateNode,d=h.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=Q2("display",o))}catch(v){gn(e,e.return,v)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(v){gn(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:br(t,e),Xr(e),r&4&&q_(e);break;case 21:break;default:br(t,e),Xr(e)}}function Xr(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(NC(s)){var r=s;break e}s=s.return}throw Error(Oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ru(i,""),r.flags&=-33);var a=U_(e);jx(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,c=U_(e);wx(e,c,o);break;default:throw Error(Oe(161))}}catch(d){gn(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function aI(e,t,s){Ge=e,CC(e)}function CC(e,t,s){for(var r=(e.mode&1)!==0;Ge!==null;){var i=Ge,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vh;if(!o){var c=i.alternate,d=c!==null&&c.memoizedState!==null||ss;c=Vh;var f=ss;if(Vh=o,(ss=d)&&!f)for(Ge=i;Ge!==null;)o=Ge,d=o.child,o.tag===22&&o.memoizedState!==null?Z_(i):d!==null?(d.return=o,Ge=d):Z_(i);for(;a!==null;)Ge=a,CC(a),a=a.sibling;Ge=i,Vh=c,ss=f}H_(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ge=a):H_(e)}}function H_(e){for(;Ge!==null;){var t=Ge;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ss||qm(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ss)if(s===null)r.componentDidMount();else{var i=t.elementType===t.type?s.memoizedProps:Nr(t.type,s.memoizedProps);r.componentDidUpdate(i,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&E_(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}E_(t,o,s)}break;case 5:var c=t.stateNode;if(s===null&&t.flags&4){s=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&lu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}ss||t.flags&512&&bx(t)}catch(u){gn(t,t.return,u)}}if(t===e){Ge=null;break}if(s=t.sibling,s!==null){s.return=t.return,Ge=s;break}Ge=t.return}}function W_(e){for(;Ge!==null;){var t=Ge;if(t===e){Ge=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ge=s;break}Ge=t.return}}function Z_(e){for(;Ge!==null;){var t=Ge;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{qm(4,t)}catch(d){gn(t,s,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){gn(t,i,d)}}var a=t.return;try{bx(t)}catch(d){gn(t,a,d)}break;case 5:var o=t.return;try{bx(t)}catch(d){gn(t,o,d)}}}catch(d){gn(t,t.return,d)}if(t===e){Ge=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Ge=c;break}Ge=t.return}}var oI=Math.ceil,Gf=ia.ReactCurrentDispatcher,z0=ia.ReactCurrentOwner,ar=ia.ReactCurrentBatchConfig,Ot=0,Bn=null,Rn=null,Kn=0,zs=0,Al=Qa(0),Dn=0,yu=null,Vo=0,Hm=0,B0=0,qd=null,Es=null,V0=0,fc=1/0,Fi=null,Kf=!1,_x=null,Ra=null,Uh=!1,ka=null,Yf=0,Hd=0,Nx=null,pf=-1,gf=0;function ys(){return Ot&6?_n():pf!==-1?pf:pf=_n()}function La(e){return e.mode&1?Ot&2&&Kn!==0?Kn&-Kn:q3.transition!==null?(gf===0&&(gf=uk()),gf):(e=Dt,e!==0||(e=window.event,e=e===void 0?16:xk(e.type)),e):1}function Dr(e,t,s,r){if(50<Hd)throw Hd=0,Nx=null,Error(Oe(185));Uu(e,s,r),(!(Ot&2)||e!==Bn)&&(e===Bn&&(!(Ot&2)&&(Hm|=s),Dn===4&&ya(e,Kn)),Ms(e,r),s===1&&Ot===0&&!(t.mode&1)&&(fc=_n()+500,Bm&&Ja()))}function Ms(e,t){var s=e.callbackNode;qM(e,t);var r=Rf(e,e===Bn?Kn:0);if(r===0)s!==null&&n_(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&n_(s),t===1)e.tag===0?U3(G_.bind(null,e)):Dk(G_.bind(null,e)),$3(function(){!(Ot&6)&&Ja()}),s=null;else{switch(hk(r)){case 1:s=m0;break;case 4:s=ck;break;case 16:s=Of;break;case 536870912:s=dk;break;default:s=Of}s=MC(s,PC.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function PC(e,t){if(pf=-1,gf=0,Ot&6)throw Error(Oe(327));var s=e.callbackNode;if(ql()&&e.callbackNode!==s)return null;var r=Rf(e,e===Bn?Kn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xf(e,r);else{t=r;var i=Ot;Ot|=2;var a=TC();(Bn!==e||Kn!==t)&&(Fi=null,fc=_n()+500,Ao(e,t));do try{dI();break}catch(c){EC(e,c)}while(!0);C0(),Gf.current=a,Ot=i,Rn!==null?t=0:(Bn=null,Kn=0,t=Dn)}if(t!==0){if(t===2&&(i=Xv(e),i!==0&&(r=i,t=Sx(e,i))),t===1)throw s=yu,Ao(e,0),ya(e,r),Ms(e,_n()),s;if(t===6)ya(e,r);else{if(i=e.current.alternate,!(r&30)&&!lI(i)&&(t=Xf(e,r),t===2&&(a=Xv(e),a!==0&&(r=a,t=Sx(e,a))),t===1))throw s=yu,Ao(e,0),ya(e,r),Ms(e,_n()),s;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Oe(345));case 2:mo(e,Es,Fi);break;case 3:if(ya(e,r),(r&130023424)===r&&(t=V0+500-_n(),10<t)){if(Rf(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ys(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ix(mo.bind(null,e,Es,Fi),t);break}mo(e,Es,Fi);break;case 4:if(ya(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ir(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=_n()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oI(r/1960))-r,10<r){e.timeoutHandle=ix(mo.bind(null,e,Es,Fi),r);break}mo(e,Es,Fi);break;case 5:mo(e,Es,Fi);break;default:throw Error(Oe(329))}}}return Ms(e,_n()),e.callbackNode===s?PC.bind(null,e):null}function Sx(e,t){var s=qd;return e.current.memoizedState.isDehydrated&&(Ao(e,t).flags|=256),e=Xf(e,t),e!==2&&(t=Es,Es=s,t!==null&&kx(t)),e}function kx(e){Es===null?Es=e:Es.push.apply(Es,e)}function lI(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var i=s[r],a=i.getSnapshot;i=i.value;try{if(!$r(a(),i))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ya(e,t){for(t&=~B0,t&=~Hm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Ir(t),r=1<<s;e[s]=-1,t&=~r}}function G_(e){if(Ot&6)throw Error(Oe(327));ql();var t=Rf(e,0);if(!(t&1))return Ms(e,_n()),null;var s=Xf(e,t);if(e.tag!==0&&s===2){var r=Xv(e);r!==0&&(t=r,s=Sx(e,r))}if(s===1)throw s=yu,Ao(e,0),ya(e,t),Ms(e,_n()),s;if(s===6)throw Error(Oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mo(e,Es,Fi),Ms(e,_n()),null}function U0(e,t){var s=Ot;Ot|=1;try{return e(t)}finally{Ot=s,Ot===0&&(fc=_n()+500,Bm&&Ja())}}function Uo(e){ka!==null&&ka.tag===0&&!(Ot&6)&&ql();var t=Ot;Ot|=1;var s=ar.transition,r=Dt;try{if(ar.transition=null,Dt=1,e)return e()}finally{Dt=r,ar.transition=s,Ot=t,!(Ot&6)&&Ja()}}function q0(){zs=Al.current,en(Al)}function Ao(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,F3(s)),Rn!==null)for(s=Rn.return;s!==null;){var r=s;switch(N0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ff();break;case 3:uc(),en(Rs),en(os),R0();break;case 5:O0(r);break;case 4:uc();break;case 13:en(on);break;case 19:en(on);break;case 10:P0(r.type._context);break;case 22:case 23:q0()}s=s.return}if(Bn=e,Rn=e=Ma(e.current,null),Kn=zs=t,Dn=0,yu=null,B0=Hm=Vo=0,Es=qd=null,bo!==null){for(t=0;t<bo.length;t++)if(s=bo[t],r=s.interleaved,r!==null){s.interleaved=null;var i=r.next,a=s.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}s.pending=r}bo=null}return e}function EC(e,t){do{var s=Rn;try{if(C0(),hf.current=Zf,Wf){for(var r=cn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wf=!1}if(Bo=0,zn=In=cn=null,Vd=!1,gu=0,z0.current=null,s===null||s.return===null){Dn=1,yu=t,Rn=null;break}e:{var a=e,o=s.return,c=s,d=t;if(t=Kn,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,m=c,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var u=m.alternate;u?(m.updateQueue=u.updateQueue,m.memoizedState=u.memoizedState,m.lanes=u.lanes):(m.updateQueue=null,m.memoizedState=null)}var p=M_(o);if(p!==null){p.flags&=-257,I_(p,o,c,a,t),p.mode&1&&L_(a,f,t),t=p,d=f;var y=t.updateQueue;if(y===null){var v=new Set;v.add(d),t.updateQueue=v}else y.add(d);break e}else{if(!(t&1)){L_(a,f,t),H0();break e}d=Error(Oe(426))}}else if(tn&&c.mode&1){var w=M_(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),I_(w,o,c,a,t),S0(hc(d,c));break e}}a=d=hc(d,c),Dn!==4&&(Dn=2),qd===null?qd=[a]:qd.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=hC(a,d,t);P_(a,x);break e;case 1:c=d;var b=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ra===null||!Ra.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=fC(a,c,t);P_(a,N);break e}}a=a.return}while(a!==null)}OC(s)}catch(C){t=C,Rn===s&&s!==null&&(Rn=s=s.return);continue}break}while(!0)}function TC(){var e=Gf.current;return Gf.current=Zf,e===null?Zf:e}function H0(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),Bn===null||!(Vo&268435455)&&!(Hm&268435455)||ya(Bn,Kn)}function Xf(e,t){var s=Ot;Ot|=2;var r=TC();(Bn!==e||Kn!==t)&&(Fi=null,Ao(e,t));do try{cI();break}catch(i){EC(e,i)}while(!0);if(C0(),Ot=s,Gf.current=r,Rn!==null)throw Error(Oe(261));return Bn=null,Kn=0,Dn}function cI(){for(;Rn!==null;)AC(Rn)}function dI(){for(;Rn!==null&&!MM();)AC(Rn)}function AC(e){var t=LC(e.alternate,e,zs);e.memoizedProps=e.pendingProps,t===null?OC(e):Rn=t,z0.current=null}function OC(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=sI(s,t),s!==null){s.flags&=32767,Rn=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dn=6,Rn=null;return}}else if(s=nI(s,t,zs),s!==null){Rn=s;return}if(t=t.sibling,t!==null){Rn=t;return}Rn=t=e}while(t!==null);Dn===0&&(Dn=5)}function mo(e,t,s){var r=Dt,i=ar.transition;try{ar.transition=null,Dt=1,uI(e,t,s,r)}finally{ar.transition=i,Dt=r}return null}function uI(e,t,s,r){do ql();while(ka!==null);if(Ot&6)throw Error(Oe(327));s=e.finishedWork;var i=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Oe(177));e.callbackNode=null,e.callbackPriority=0;var a=s.lanes|s.childLanes;if(HM(e,a),e===Bn&&(Rn=Bn=null,Kn=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Uh||(Uh=!0,MC(Of,function(){return ql(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=ar.transition,ar.transition=null;var o=Dt;Dt=1;var c=Ot;Ot|=4,z0.current=null,iI(e,s),kC(s,e),A3(sx),Lf=!!nx,sx=nx=null,e.current=s,aI(s),IM(),Ot=c,Dt=o,ar.transition=a}else e.current=s;if(Uh&&(Uh=!1,ka=e,Yf=i),a=e.pendingLanes,a===0&&(Ra=null),$M(s.stateNode),Ms(e,_n()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)i=t[s],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kf)throw Kf=!1,e=_x,_x=null,e;return Yf&1&&e.tag!==0&&ql(),a=e.pendingLanes,a&1?e===Nx?Hd++:(Hd=0,Nx=e):Hd=0,Ja(),null}function ql(){if(ka!==null){var e=hk(Yf),t=ar.transition,s=Dt;try{if(ar.transition=null,Dt=16>e?16:e,ka===null)var r=!1;else{if(e=ka,ka=null,Yf=0,Ot&6)throw Error(Oe(331));var i=Ot;for(Ot|=4,Ge=e.current;Ge!==null;){var a=Ge,o=a.child;if(Ge.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var f=c[d];for(Ge=f;Ge!==null;){var m=Ge;switch(m.tag){case 0:case 11:case 15:Ud(8,m,a)}var h=m.child;if(h!==null)h.return=m,Ge=h;else for(;Ge!==null;){m=Ge;var u=m.sibling,p=m.return;if(_C(m),m===f){Ge=null;break}if(u!==null){u.return=p,Ge=u;break}Ge=p}}}var y=a.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}Ge=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ge=o;else e:for(;Ge!==null;){if(a=Ge,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ud(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,Ge=x;break e}Ge=a.return}}var b=e.current;for(Ge=b;Ge!==null;){o=Ge;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ge=_;else e:for(o=b;Ge!==null;){if(c=Ge,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:qm(9,c)}}catch(C){gn(c,c.return,C)}if(c===o){Ge=null;break e}var N=c.sibling;if(N!==null){N.return=c.return,Ge=N;break e}Ge=c.return}}if(Ot=i,Ja(),ci&&typeof ci.onPostCommitFiberRoot=="function")try{ci.onPostCommitFiberRoot(Im,e)}catch{}r=!0}return r}finally{Dt=s,ar.transition=t}}return!1}function K_(e,t,s){t=hc(s,t),t=hC(e,t,1),e=Oa(e,t,1),t=ys(),e!==null&&(Uu(e,1,t),Ms(e,t))}function gn(e,t,s){if(e.tag===3)K_(e,e,s);else for(;t!==null;){if(t.tag===3){K_(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ra===null||!Ra.has(r))){e=hc(s,e),e=fC(t,e,1),t=Oa(t,e,1),e=ys(),t!==null&&(Uu(t,1,e),Ms(t,e));break}}t=t.return}}function hI(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=ys(),e.pingedLanes|=e.suspendedLanes&s,Bn===e&&(Kn&s)===s&&(Dn===4||Dn===3&&(Kn&130023424)===Kn&&500>_n()-V0?Ao(e,0):B0|=s),Ms(e,t)}function RC(e,t){t===0&&(e.mode&1?(t=Rh,Rh<<=1,!(Rh&130023424)&&(Rh=4194304)):t=1);var s=ys();e=Yi(e,t),e!==null&&(Uu(e,t,s),Ms(e,s))}function fI(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),RC(e,s)}function mI(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(s=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Oe(314))}r!==null&&r.delete(t),RC(e,s)}var LC;LC=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rs.current)Ts=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Ts=!1,tI(e,t,s);Ts=!!(e.flags&131072)}else Ts=!1,tn&&t.flags&1048576&&Fk(t,Bf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;mf(e,t),e=t.pendingProps;var i=lc(t,os.current);Ul(t,s),i=M0(null,t,r,e,i,s);var a=I0();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ls(r)?(a=!0,$f(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,T0(t),i.updater=Um,t.stateNode=i,i._reactInternals=t,hx(t,r,e,s),t=px(null,t,r,!0,a,s)):(t.tag=0,tn&&a&&_0(t),us(null,t,i,s),t=t.child),t;case 16:r=t.elementType;e:{switch(mf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=gI(r),e=Nr(r,e),i){case 0:t=mx(null,t,r,e,s);break e;case 1:t=$_(null,t,r,e,s);break e;case 11:t=D_(null,t,r,e,s);break e;case 14:t=F_(null,t,r,Nr(r.type,e),s);break e}throw Error(Oe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Nr(r,i),mx(e,t,r,i,s);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Nr(r,i),$_(e,t,r,i,s);case 3:e:{if(vC(t),e===null)throw Error(Oe(387));r=t.pendingProps,a=t.memoizedState,i=a.element,qk(e,t),qf(t,r,null,s);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=hc(Error(Oe(423)),t),t=z_(e,t,r,s,i);break e}else if(r!==i){i=hc(Error(Oe(424)),t),t=z_(e,t,r,s,i);break e}else for(qs=Aa(t.stateNode.containerInfo.firstChild),Hs=t,tn=!0,Er=null,s=Vk(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(cc(),r===i){t=Xi(e,t,s);break e}us(e,t,r,s)}t=t.child}return t;case 5:return Hk(t),e===null&&cx(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,rx(r,i)?o=null:a!==null&&rx(r,a)&&(t.flags|=32),gC(e,t),us(e,t,o,s),t.child;case 6:return e===null&&cx(t),null;case 13:return xC(e,t,s);case 4:return A0(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=dc(t,null,r,s):us(e,t,r,s),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Nr(r,i),D_(e,t,r,i,s);case 7:return us(e,t,t.pendingProps,s),t.child;case 8:return us(e,t,t.pendingProps.children,s),t.child;case 12:return us(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Gt(Vf,r._currentValue),r._currentValue=o,a!==null)if($r(a.value,o)){if(a.children===i.children&&!Rs.current){t=Xi(e,t,s);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=Wi(-1,s&-s),d.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?d.next=d:(d.next=m.next,m.next=d),f.pending=d}}a.lanes|=s,d=a.alternate,d!==null&&(d.lanes|=s),dx(a.return,s,t),c.lanes|=s;break}d=d.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Oe(341));o.lanes|=s,c=o.alternate,c!==null&&(c.lanes|=s),dx(o,s,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}us(e,t,i.children,s),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ul(t,s),i=dr(i),r=r(i),t.flags|=1,us(e,t,r,s),t.child;case 14:return r=t.type,i=Nr(r,t.pendingProps),i=Nr(r.type,i),F_(e,t,r,i,s);case 15:return mC(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Nr(r,i),mf(e,t),t.tag=1,Ls(r)?(e=!0,$f(t)):e=!1,Ul(t,s),uC(t,r,i),hx(t,r,i,s),px(null,t,r,!0,e,s);case 19:return yC(e,t,s);case 22:return pC(e,t,s)}throw Error(Oe(156,t.tag))};function MC(e,t){return lk(e,t)}function pI(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(e,t,s,r){return new pI(e,t,s,r)}function W0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gI(e){if(typeof e=="function")return W0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===u0)return 11;if(e===h0)return 14}return 2}function Ma(e,t){var s=e.alternate;return s===null?(s=rr(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function vf(e,t,s,r,i,a){var o=2;if(r=e,typeof e=="function")W0(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case wl:return Oo(s.children,i,a,t);case d0:o=8,i|=8;break;case Iv:return e=rr(12,s,t,i|2),e.elementType=Iv,e.lanes=a,e;case Dv:return e=rr(13,s,t,i),e.elementType=Dv,e.lanes=a,e;case Fv:return e=rr(19,s,t,i),e.elementType=Fv,e.lanes=a,e;case H2:return Wm(s,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U2:o=10;break e;case q2:o=9;break e;case u0:o=11;break e;case h0:o=14;break e;case pa:o=16,r=null;break e}throw Error(Oe(130,e==null?e:typeof e,""))}return t=rr(o,s,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Oo(e,t,s,r){return e=rr(7,e,r,t),e.lanes=s,e}function Wm(e,t,s,r){return e=rr(22,e,r,t),e.elementType=H2,e.lanes=s,e.stateNode={isHidden:!1},e}function Zg(e,t,s){return e=rr(6,e,null,t),e.lanes=s,e}function Gg(e,t,s){return t=rr(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vI(e,t,s,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pg(0),this.expirationTimes=Pg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Z0(e,t,s,r,i,a,o,c,d){return e=new vI(e,t,s,c,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=rr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},T0(a),e}function xI(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function IC(e){if(!e)return Va;e=e._reactInternals;e:{if(Jo(e)!==e||e.tag!==1)throw Error(Oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ls(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Oe(171))}if(e.tag===1){var s=e.type;if(Ls(s))return Ik(e,s,t)}return t}function DC(e,t,s,r,i,a,o,c,d){return e=Z0(s,r,!0,e,i,a,o,c,d),e.context=IC(null),s=e.current,r=ys(),i=La(s),a=Wi(r,i),a.callback=t??null,Oa(s,a,i),e.current.lanes=i,Uu(e,i,r),Ms(e,r),e}function Zm(e,t,s,r){var i=t.current,a=ys(),o=La(i);return s=IC(s),t.context===null?t.context=s:t.pendingContext=s,t=Wi(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Oa(i,t,o),e!==null&&(Dr(e,i,o,a),uf(e,i,o)),o}function Qf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Y_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function G0(e,t){Y_(e,t),(e=e.alternate)&&Y_(e,t)}function yI(){return null}var FC=typeof reportError=="function"?reportError:function(e){console.error(e)};function K0(e){this._internalRoot=e}Gm.prototype.render=K0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Oe(409));Zm(e,t,null,null)};Gm.prototype.unmount=K0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Uo(function(){Zm(null,e,null,null)}),t[Ki]=null}};function Gm(e){this._internalRoot=e}Gm.prototype.unstable_scheduleHydration=function(e){if(e){var t=pk();e={blockedOn:null,target:e,priority:t};for(var s=0;s<xa.length&&t!==0&&t<xa[s].priority;s++);xa.splice(s,0,e),s===0&&vk(e)}};function Y0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Km(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function X_(){}function bI(e,t,s,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var f=Qf(o);a.call(f)}}var o=DC(t,r,e,0,null,!1,!1,"",X_);return e._reactRootContainer=o,e[Ki]=o.current,uu(e.nodeType===8?e.parentNode:e),Uo(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var f=Qf(d);c.call(f)}}var d=Z0(e,0,!1,null,null,!1,!1,"",X_);return e._reactRootContainer=d,e[Ki]=d.current,uu(e.nodeType===8?e.parentNode:e),Uo(function(){Zm(t,d,s,r)}),d}function Ym(e,t,s,r,i){var a=s._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var d=Qf(o);c.call(d)}}Zm(t,o,e,i)}else o=bI(s,t,e,i,r);return Qf(o)}fk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ad(t.pendingLanes);s!==0&&(p0(t,s|1),Ms(t,_n()),!(Ot&6)&&(fc=_n()+500,Ja()))}break;case 13:Uo(function(){var r=Yi(e,1);if(r!==null){var i=ys();Dr(r,e,1,i)}}),G0(e,1)}};g0=function(e){if(e.tag===13){var t=Yi(e,134217728);if(t!==null){var s=ys();Dr(t,e,134217728,s)}G0(e,134217728)}};mk=function(e){if(e.tag===13){var t=La(e),s=Yi(e,t);if(s!==null){var r=ys();Dr(s,e,t,r)}G0(e,t)}};pk=function(){return Dt};gk=function(e,t){var s=Dt;try{return Dt=e,t()}finally{Dt=s}};Gv=function(e,t,s){switch(t){case"input":if(Bv(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var i=zm(r);if(!i)throw Error(Oe(90));Z2(r),Bv(r,i)}}}break;case"textarea":K2(e,s);break;case"select":t=s.value,t!=null&&$l(e,!!s.multiple,t,!1)}};nk=U0;sk=Uo;var wI={usingClientEntryPoint:!1,Events:[Hu,Sl,zm,ek,tk,U0]},yd={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jI={bundleType:yd.bundleType,version:yd.version,rendererPackageName:yd.rendererPackageName,rendererConfig:yd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ak(e),e===null?null:e.stateNode},findFiberByHostInstance:yd.findFiberByHostInstance||yI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qh.isDisabled&&qh.supportsFiber)try{Im=qh.inject(jI),ci=qh}catch{}}Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wI;Gs.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Y0(t))throw Error(Oe(200));return xI(e,t,null,s)};Gs.createRoot=function(e,t){if(!Y0(e))throw Error(Oe(299));var s=!1,r="",i=FC;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Z0(e,1,!1,null,null,s,!1,r,i),e[Ki]=t.current,uu(e.nodeType===8?e.parentNode:e),new K0(t)};Gs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Oe(188)):(e=Object.keys(e).join(","),Error(Oe(268,e)));return e=ak(t),e=e===null?null:e.stateNode,e};Gs.flushSync=function(e){return Uo(e)};Gs.hydrate=function(e,t,s){if(!Km(t))throw Error(Oe(200));return Ym(null,e,t,!0,s)};Gs.hydrateRoot=function(e,t,s){if(!Y0(e))throw Error(Oe(405));var r=s!=null&&s.hydratedSources||null,i=!1,a="",o=FC;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=DC(t,null,e,1,s??null,i,!1,a,o),e[Ki]=t.current,uu(e),r)for(e=0;e<r.length;e++)s=r[e],i=s._getVersion,i=i(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,i]:t.mutableSourceEagerHydrationData.push(s,i);return new Gm(t)};Gs.render=function(e,t,s){if(!Km(t))throw Error(Oe(200));return Ym(null,e,t,!1,s)};Gs.unmountComponentAtNode=function(e){if(!Km(e))throw Error(Oe(40));return e._reactRootContainer?(Uo(function(){Ym(null,null,e,!1,function(){e._reactRootContainer=null,e[Ki]=null})}),!0):!1};Gs.unstable_batchedUpdates=U0;Gs.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!Km(s))throw Error(Oe(200));if(e==null||e._reactInternals===void 0)throw Error(Oe(38));return Ym(e,t,s,!1,r)};Gs.version="18.3.1-next-f1338f8080-20240426";function $C(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($C)}catch(e){console.error(e)}}$C(),$2.exports=Gs;var eo=$2.exports;const zC=Lm(eo);var BC,Q_=eo;BC=Q_.createRoot,Q_.hydrateRoot;const _I=1,NI=1e6;let Kg=0;function SI(){return Kg=(Kg+1)%Number.MAX_SAFE_INTEGER,Kg.toString()}const Yg=new Map,J_=e=>{if(Yg.has(e))return;const t=setTimeout(()=>{Yg.delete(e),Wd({type:"REMOVE_TOAST",toastId:e})},NI);Yg.set(e,t)},kI=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,_I)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?J_(s):e.toasts.forEach(r=>{J_(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)}}},xf=[];let yf={toasts:[]};function Wd(e){yf=kI(yf,e),xf.forEach(t=>{t(yf)})}function bf({...e}){const t=SI(),s=i=>Wd({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>Wd({type:"DISMISS_TOAST",toastId:t});return Wd({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:s}}function hn(){const[e,t]=j.useState(yf);return j.useEffect(()=>(xf.push(t),()=>{const s=xf.indexOf(t);s>-1&&xf.splice(s,1)}),[e]),{...e,toast:bf,dismiss:s=>Wd({type:"DISMISS_TOAST",toastId:s})}}function Me(e,t,{checkForDefaultPrevented:s=!0}={}){return function(i){if(e==null||e(i),s===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function eN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Xm(...e){return t=>{let s=!1;const r=e.map(i=>{const a=eN(i,t);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():eN(e[i],null)}}}}function ft(...e){return j.useCallback(Xm(...e),e)}function CI(e,t){const s=j.createContext(t),r=a=>{const{children:o,...c}=a,d=j.useMemo(()=>c,Object.values(c));return n.jsx(s.Provider,{value:d,children:o})};r.displayName=e+"Provider";function i(a){const o=j.useContext(s);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,i]}function ls(e,t=[]){let s=[];function r(a,o){const c=j.createContext(o),d=s.length;s=[...s,o];const f=h=>{var x;const{scope:u,children:p,...y}=h,v=((x=u==null?void 0:u[e])==null?void 0:x[d])||c,w=j.useMemo(()=>y,Object.values(y));return n.jsx(v.Provider,{value:w,children:p})};f.displayName=a+"Provider";function m(h,u){var v;const p=((v=u==null?void 0:u[e])==null?void 0:v[d])||c,y=j.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[f,m]}const i=()=>{const a=s.map(o=>j.createContext(o));return function(c){const d=(c==null?void 0:c[e])||a;return j.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return i.scopeName=e,[r,PI(i,...t)]}function PI(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((c,{useScope:d,scopeName:f})=>{const h=d(a)[`__scope${f}`];return{...c,...h}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}function qo(e){const t=TI(e),s=j.forwardRef((r,i)=>{const{children:a,...o}=r,c=j.Children.toArray(a),d=c.find(OI);if(d){const f=d.props.children,m=c.map(h=>h===d?j.Children.count(f)>1?j.Children.only(null):j.isValidElement(f)?f.props.children:null:h);return n.jsx(t,{...o,ref:i,children:j.isValidElement(f)?j.cloneElement(f,void 0,m):null})}return n.jsx(t,{...o,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}var EI=qo("Slot");function TI(e){const t=j.forwardRef((s,r)=>{const{children:i,...a}=s;if(j.isValidElement(i)){const o=LI(i),c=RI(a,i.props);return i.type!==j.Fragment&&(c.ref=r?Xm(r,o):o),j.cloneElement(i,c)}return j.Children.count(i)>1?j.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var VC=Symbol("radix.slottable");function AI(e){const t=({children:s})=>n.jsx(n.Fragment,{children:s});return t.displayName=`${e}.Slottable`,t.__radixId=VC,t}function OI(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===VC}function RI(e,t){const s={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function LI(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function Qm(e){const t=e+"CollectionProvider",[s,r]=ls(t),[i,a]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:w,children:x}=v,b=_e.useRef(null),_=_e.useRef(new Map).current;return n.jsx(i,{scope:w,itemMap:_,collectionRef:b,children:x})};o.displayName=t;const c=e+"CollectionSlot",d=qo(c),f=_e.forwardRef((v,w)=>{const{scope:x,children:b}=v,_=a(c,x),N=ft(w,_.collectionRef);return n.jsx(d,{ref:N,children:b})});f.displayName=c;const m=e+"CollectionItemSlot",h="data-radix-collection-item",u=qo(m),p=_e.forwardRef((v,w)=>{const{scope:x,children:b,..._}=v,N=_e.useRef(null),C=ft(w,N),I=a(m,x);return _e.useEffect(()=>(I.itemMap.set(N,{ref:N,..._}),()=>void I.itemMap.delete(N))),n.jsx(u,{[h]:"",ref:C,children:b})});p.displayName=m;function y(v){const w=a(e+"CollectionConsumer",v);return _e.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((I,k)=>_.indexOf(I.ref.current)-_.indexOf(k.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:f,ItemSlot:p},y,r]}var MI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ye=MI.reduce((e,t)=>{const s=qo(`Primitive.${t}`),r=j.forwardRef((i,a)=>{const{asChild:o,...c}=i,d=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(d,{...c,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function X0(e,t){e&&eo.flushSync(()=>e.dispatchEvent(t))}function vn(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...s)=>{var r;return(r=t.current)==null?void 0:r.call(t,...s)},[])}function II(e,t=globalThis==null?void 0:globalThis.document){const s=vn(e);j.useEffect(()=>{const r=i=>{i.key==="Escape"&&s(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[s,t])}var DI="DismissableLayer",Cx="dismissableLayer.update",FI="dismissableLayer.pointerDownOutside",$I="dismissableLayer.focusOutside",tN,UC=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lc=j.forwardRef((e,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:c,...d}=e,f=j.useContext(UC),[m,h]=j.useState(null),u=(m==null?void 0:m.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=j.useState({}),y=ft(t,k=>h(k)),v=Array.from(f.layers),[w]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(w),b=m?v.indexOf(m):-1,_=f.layersWithOutsidePointerEventsDisabled.size>0,N=b>=x,C=BI(k=>{const E=k.target,M=[...f.branches].some(P=>P.contains(E));!N||M||(i==null||i(k),o==null||o(k),k.defaultPrevented||c==null||c())},u),I=VI(k=>{const E=k.target;[...f.branches].some(P=>P.contains(E))||(a==null||a(k),o==null||o(k),k.defaultPrevented||c==null||c())},u);return II(k=>{b===f.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&c&&(k.preventDefault(),c()))},u),j.useEffect(()=>{if(m)return s&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(tN=u.body.style.pointerEvents,u.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),nN(),()=>{s&&f.layersWithOutsidePointerEventsDisabled.size===1&&(u.body.style.pointerEvents=tN)}},[m,u,s,f]),j.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),nN())},[m,f]),j.useEffect(()=>{const k=()=>p({});return document.addEventListener(Cx,k),()=>document.removeEventListener(Cx,k)},[]),n.jsx(Ye.div,{...d,ref:y,style:{pointerEvents:_?N?"auto":"none":void 0,...e.style},onFocusCapture:Me(e.onFocusCapture,I.onFocusCapture),onBlurCapture:Me(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Me(e.onPointerDownCapture,C.onPointerDownCapture)})});Lc.displayName=DI;var zI="DismissableLayerBranch",qC=j.forwardRef((e,t)=>{const s=j.useContext(UC),r=j.useRef(null),i=ft(t,r);return j.useEffect(()=>{const a=r.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),n.jsx(Ye.div,{...e,ref:i})});qC.displayName=zI;function BI(e,t=globalThis==null?void 0:globalThis.document){const s=vn(e),r=j.useRef(!1),i=j.useRef(()=>{});return j.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let d=function(){HC(FI,s,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=d,t.addEventListener("click",i.current,{once:!0})):d()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,s]),{onPointerDownCapture:()=>r.current=!0}}function VI(e,t=globalThis==null?void 0:globalThis.document){const s=vn(e),r=j.useRef(!1);return j.useEffect(()=>{const i=a=>{a.target&&!r.current&&HC($I,s,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nN(){const e=new CustomEvent(Cx);document.dispatchEvent(e)}function HC(e,t,s,{discrete:r}){const i=s.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&i.addEventListener(e,t,{once:!0}),r?X0(i,a):i.dispatchEvent(a)}var UI=Lc,qI=qC,kn=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},HI="Portal",Zu=j.forwardRef((e,t)=>{var c;const{container:s,...r}=e,[i,a]=j.useState(!1);kn(()=>a(!0),[]);const o=s||i&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?zC.createPortal(n.jsx(Ye.div,{...r,ref:t}),o):null});Zu.displayName=HI;function WI(e,t){return j.useReducer((s,r)=>t[s][r]??s,e)}var Qn=e=>{const{present:t,children:s}=e,r=ZI(t),i=typeof s=="function"?s({present:r.isPresent}):j.Children.only(s),a=ft(r.ref,GI(i));return typeof s=="function"||r.isPresent?j.cloneElement(i,{ref:a}):null};Qn.displayName="Presence";function ZI(e){const[t,s]=j.useState(),r=j.useRef(null),i=j.useRef(e),a=j.useRef("none"),o=e?"mounted":"unmounted",[c,d]=WI(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const f=Hh(r.current);a.current=c==="mounted"?f:"none"},[c]),kn(()=>{const f=r.current,m=i.current;if(m!==e){const u=a.current,p=Hh(f);e?d("MOUNT"):p==="none"||(f==null?void 0:f.display)==="none"?d("UNMOUNT"):d(m&&u!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,d]),kn(()=>{if(t){let f;const m=t.ownerDocument.defaultView??window,h=p=>{const v=Hh(r.current).includes(p.animationName);if(p.target===t&&v&&(d("ANIMATION_END"),!i.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",f=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},u=p=>{p.target===t&&(a.current=Hh(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{m.clearTimeout(f),t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:j.useCallback(f=>{r.current=f?getComputedStyle(f):null,s(f)},[])}}function Hh(e){return(e==null?void 0:e.animationName)||"none"}function GI(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var KI=a0[" useInsertionEffect ".trim().toString()]||kn;function zr({prop:e,defaultProp:t,onChange:s=()=>{},caller:r}){const[i,a,o]=YI({defaultProp:t,onChange:s}),c=e!==void 0,d=c?e:i;{const m=j.useRef(e!==void 0);j.useEffect(()=>{const h=m.current;h!==c&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,r])}const f=j.useCallback(m=>{var h;if(c){const u=XI(m)?m(e):m;u!==e&&((h=o.current)==null||h.call(o,u))}else a(m)},[c,e,a,o]);return[d,f]}function YI({defaultProp:e,onChange:t}){const[s,r]=j.useState(e),i=j.useRef(s),a=j.useRef(t);return KI(()=>{a.current=t},[t]),j.useEffect(()=>{var o;i.current!==s&&((o=a.current)==null||o.call(a,s),i.current=s)},[s,i]),[s,r,a]}function XI(e){return typeof e=="function"}var WC=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),QI="VisuallyHidden",Jm=j.forwardRef((e,t)=>n.jsx(Ye.span,{...e,ref:t,style:{...WC,...e.style}}));Jm.displayName=QI;var JI=Jm,Q0="ToastProvider",[J0,eD,tD]=Qm("Toast"),[ZC,yse]=ls("Toast",[tD]),[nD,ep]=ZC(Q0),GC=e=>{const{__scopeToast:t,label:s="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[c,d]=j.useState(null),[f,m]=j.useState(0),h=j.useRef(!1),u=j.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${Q0}\`. Expected non-empty \`string\`.`),n.jsx(J0.Provider,{scope:t,children:n.jsx(nD,{scope:t,label:s,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:f,viewport:c,onViewportChange:d,onToastAdd:j.useCallback(()=>m(p=>p+1),[]),onToastRemove:j.useCallback(()=>m(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:u,children:o})})};GC.displayName=Q0;var KC="ToastViewport",sD=["F8"],Px="toast.viewportPause",Ex="toast.viewportResume",YC=j.forwardRef((e,t)=>{const{__scopeToast:s,hotkey:r=sD,label:i="Notifications ({hotkey})",...a}=e,o=ep(KC,s),c=eD(s),d=j.useRef(null),f=j.useRef(null),m=j.useRef(null),h=j.useRef(null),u=ft(t,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;j.useEffect(()=>{const w=x=>{var _;r.length!==0&&r.every(N=>x[N]||x.code===N)&&((_=h.current)==null||_.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),j.useEffect(()=>{const w=d.current,x=h.current;if(y&&w&&x){const b=()=>{if(!o.isClosePausedRef.current){const I=new CustomEvent(Px);x.dispatchEvent(I),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const I=new CustomEvent(Ex);x.dispatchEvent(I),o.isClosePausedRef.current=!1}},N=I=>{!w.contains(I.relatedTarget)&&_()},C=()=>{w.contains(document.activeElement)||_()};return w.addEventListener("focusin",b),w.addEventListener("focusout",N),w.addEventListener("pointermove",b),w.addEventListener("pointerleave",C),window.addEventListener("blur",b),window.addEventListener("focus",_),()=>{w.removeEventListener("focusin",b),w.removeEventListener("focusout",N),w.removeEventListener("pointermove",b),w.removeEventListener("pointerleave",C),window.removeEventListener("blur",b),window.removeEventListener("focus",_)}}},[y,o.isClosePausedRef]);const v=j.useCallback(({tabbingDirection:w})=>{const b=c().map(_=>{const N=_.ref.current,C=[N,...gD(N)];return w==="forwards"?C:C.reverse()});return(w==="forwards"?b.reverse():b).flat()},[c]);return j.useEffect(()=>{const w=h.current;if(w){const x=b=>{var C,I,k;const _=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!_){const E=document.activeElement,M=b.shiftKey;if(b.target===w&&M){(C=f.current)==null||C.focus();return}const A=v({tabbingDirection:M?"backwards":"forwards"}),z=A.findIndex(O=>O===E);Xg(A.slice(z+1))?b.preventDefault():M?(I=f.current)==null||I.focus():(k=m.current)==null||k.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[c,v]),n.jsxs(qI,{ref:d,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&n.jsx(Tx,{ref:f,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"forwards"});Xg(w)}}),n.jsx(J0.Slot,{scope:s,children:n.jsx(Ye.ol,{tabIndex:-1,...a,ref:u})}),y&&n.jsx(Tx,{ref:m,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"backwards"});Xg(w)}})]})});YC.displayName=KC;var XC="ToastFocusProxy",Tx=j.forwardRef((e,t)=>{const{__scopeToast:s,onFocusFromOutsideViewport:r,...i}=e,a=ep(XC,s);return n.jsx(Jm,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var f;const c=o.relatedTarget;!((f=a.viewport)!=null&&f.contains(c))&&r()}})});Tx.displayName=XC;var Gu="Toast",rD="toast.swipeStart",iD="toast.swipeMove",aD="toast.swipeCancel",oD="toast.swipeEnd",QC=j.forwardRef((e,t)=>{const{forceMount:s,open:r,defaultOpen:i,onOpenChange:a,...o}=e,[c,d]=zr({prop:r,defaultProp:i??!0,onChange:a,caller:Gu});return n.jsx(Qn,{present:s||c,children:n.jsx(dD,{open:c,...o,ref:t,onClose:()=>d(!1),onPause:vn(e.onPause),onResume:vn(e.onResume),onSwipeStart:Me(e.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Me(e.onSwipeMove,f=>{const{x:m,y:h}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Me(e.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Me(e.onSwipeEnd,f=>{const{x:m,y:h}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),d(!1)})})})});QC.displayName=Gu;var[lD,cD]=ZC(Gu,{onClose(){}}),dD=j.forwardRef((e,t)=>{const{__scopeToast:s,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:c,onPause:d,onResume:f,onSwipeStart:m,onSwipeMove:h,onSwipeCancel:u,onSwipeEnd:p,...y}=e,v=ep(Gu,s),[w,x]=j.useState(null),b=ft(t,O=>x(O)),_=j.useRef(null),N=j.useRef(null),C=i||v.duration,I=j.useRef(0),k=j.useRef(C),E=j.useRef(0),{onToastAdd:M,onToastRemove:P}=v,T=vn(()=>{var F;(w==null?void 0:w.contains(document.activeElement))&&((F=v.viewport)==null||F.focus()),o()}),A=j.useCallback(O=>{!O||O===1/0||(window.clearTimeout(E.current),I.current=new Date().getTime(),E.current=window.setTimeout(T,O))},[T]);j.useEffect(()=>{const O=v.viewport;if(O){const F=()=>{A(k.current),f==null||f()},G=()=>{const Y=new Date().getTime()-I.current;k.current=k.current-Y,window.clearTimeout(E.current),d==null||d()};return O.addEventListener(Px,G),O.addEventListener(Ex,F),()=>{O.removeEventListener(Px,G),O.removeEventListener(Ex,F)}}},[v.viewport,C,d,f,A]),j.useEffect(()=>{a&&!v.isClosePausedRef.current&&A(C)},[a,C,v.isClosePausedRef,A]),j.useEffect(()=>(M(),()=>P()),[M,P]);const z=j.useMemo(()=>w?iP(w):null,[w]);return v.viewport?n.jsxs(n.Fragment,{children:[z&&n.jsx(uD,{__scopeToast:s,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),n.jsx(lD,{scope:s,onClose:T,children:eo.createPortal(n.jsx(J0.ItemSlot,{scope:s,children:n.jsx(UI,{asChild:!0,onEscapeKeyDown:Me(c,()=>{v.isFocusedToastEscapeKeyDownRef.current||T(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(Ye.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Me(e.onKeyDown,O=>{O.key==="Escape"&&(c==null||c(O.nativeEvent),O.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Me(e.onPointerDown,O=>{O.button===0&&(_.current={x:O.clientX,y:O.clientY})}),onPointerMove:Me(e.onPointerMove,O=>{if(!_.current)return;const F=O.clientX-_.current.x,G=O.clientY-_.current.y,Y=!!N.current,K=["left","right"].includes(v.swipeDirection),U=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,B=K?U(0,F):0,R=K?0:U(0,G),$=O.pointerType==="touch"?10:2,W={x:B,y:R},Z={originalEvent:O,delta:W};Y?(N.current=W,Wh(iD,h,Z,{discrete:!1})):sN(W,v.swipeDirection,$)?(N.current=W,Wh(rD,m,Z,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(F)>$||Math.abs(G)>$)&&(_.current=null)}),onPointerUp:Me(e.onPointerUp,O=>{const F=N.current,G=O.target;if(G.hasPointerCapture(O.pointerId)&&G.releasePointerCapture(O.pointerId),N.current=null,_.current=null,F){const Y=O.currentTarget,K={originalEvent:O,delta:F};sN(F,v.swipeDirection,v.swipeThreshold)?Wh(oD,p,K,{discrete:!0}):Wh(aD,u,K,{discrete:!0}),Y.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),uD=e=>{const{__scopeToast:t,children:s,...r}=e,i=ep(Gu,t),[a,o]=j.useState(!1),[c,d]=j.useState(!1);return mD(()=>o(!0)),j.useEffect(()=>{const f=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(f)},[]),c?null:n.jsx(Zu,{asChild:!0,children:n.jsx(Jm,{...r,children:a&&n.jsxs(n.Fragment,{children:[i.label," ",s]})})})},hD="ToastTitle",JC=j.forwardRef((e,t)=>{const{__scopeToast:s,...r}=e;return n.jsx(Ye.div,{...r,ref:t})});JC.displayName=hD;var fD="ToastDescription",eP=j.forwardRef((e,t)=>{const{__scopeToast:s,...r}=e;return n.jsx(Ye.div,{...r,ref:t})});eP.displayName=fD;var tP="ToastAction",nP=j.forwardRef((e,t)=>{const{altText:s,...r}=e;return s.trim()?n.jsx(rP,{altText:s,asChild:!0,children:n.jsx(eb,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${tP}\`. Expected non-empty \`string\`.`),null)});nP.displayName=tP;var sP="ToastClose",eb=j.forwardRef((e,t)=>{const{__scopeToast:s,...r}=e,i=cD(sP,s);return n.jsx(rP,{asChild:!0,children:n.jsx(Ye.button,{type:"button",...r,ref:t,onClick:Me(e.onClick,i.onClose)})})});eb.displayName=sP;var rP=j.forwardRef((e,t)=>{const{__scopeToast:s,altText:r,...i}=e;return n.jsx(Ye.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function iP(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),pD(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...iP(r))}}),t}function Wh(e,t,s,{discrete:r}){const i=s.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});t&&i.addEventListener(e,t,{once:!0}),r?X0(i,a):i.dispatchEvent(a)}var sN=(e,t,s=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t==="left"||t==="right"?a&&r>s:!a&&i>s};function mD(e=()=>{}){const t=vn(e);kn(()=>{let s=0,r=0;return s=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(r)}},[t])}function pD(e){return e.nodeType===e.ELEMENT_NODE}function gD(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Xg(e){const t=document.activeElement;return e.some(s=>s===t?!0:(s.focus(),document.activeElement!==t))}var vD=GC,aP=YC,oP=QC,lP=JC,cP=eP,dP=nP,uP=eb;function hP(e){var t,s,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(s=hP(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function fP(){for(var e,t,s=0,r="",i=arguments.length;s<i;s++)(e=arguments[s])&&(t=hP(e))&&(r&&(r+=" "),r+=t);return r}const rN=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,iN=fP,Ku=(e,t)=>s=>{var r;if((t==null?void 0:t.variants)==null)return iN(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(f=>{const m=s==null?void 0:s[f],h=a==null?void 0:a[f];if(m===null)return null;const u=rN(m)||rN(h);return i[f][u]}),c=s&&Object.entries(s).reduce((f,m)=>{let[h,u]=m;return u===void 0||(f[h]=u),f},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:h,className:u,...p}=m;return Object.entries(p).every(y=>{let[v,w]=y;return Array.isArray(w)?w.includes({...a,...c}[v]):{...a,...c}[v]===w})?[...f,h,u]:f},[]);return iN(e,o,d,s==null?void 0:s.class,s==null?void 0:s.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mP=(...e)=>e.filter((t,s,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===s).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...c},d)=>j.createElement("svg",{ref:d,...yD,width:t,height:t,stroke:e,strokeWidth:r?Number(s)*24/Number(t):s,className:mP("lucide",i),...c},[...o.map(([f,m])=>j.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(e,t)=>{const s=j.forwardRef(({className:r,...i},a)=>j.createElement(bD,{ref:a,iconNode:t,className:mP(`lucide-${xD(e)}`,r),...i}));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=ze("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=ze("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=ze("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=ze("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=ze("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=ze("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=ze("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=ze("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=ze("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=ze("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ze("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=ze("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=ze("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=ze("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ze("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ze("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=ze("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=ze("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=ze("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=ze("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=ze("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=ze("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ze("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=ze("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=ze("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ze("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=ze("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=ze("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=ze("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=ze("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=ze("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=ze("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ze("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=ze("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=ze("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=ze("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ze("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=ze("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=ze("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=ze("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=ze("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=ze("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=ze("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=ze("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=ze("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ob="-",FD=e=>{const t=zD(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const c=o.split(ob);return c[0]===""&&c.length!==1&&c.shift(),SP(c,t)||$D(o)},getConflictingClassGroupIds:(o,c)=>{const d=s[o]||[];return c&&r[o]?[...d,...r[o]]:d}}},SP=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const s=e[0],r=t.nextPart.get(s),i=r?SP(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(ob);return(o=t.validators.find(({validator:c})=>c(a)))==null?void 0:o.classGroupId},lN=/^\[(.+)\]$/,$D=e=>{if(lN.test(e)){const t=lN.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},zD=e=>{const{theme:t,prefix:s}=e,r={nextPart:new Map,validators:[]};return VD(Object.entries(e.classGroups),s).forEach(([a,o])=>{Ox(o,r,a,t)}),r},Ox=(e,t,s,r)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:cN(t,i);a.classGroupId=s;return}if(typeof i=="function"){if(BD(i)){Ox(i(r),t,s,r);return}t.validators.push({validator:i,classGroupId:s});return}Object.entries(i).forEach(([a,o])=>{Ox(o,cN(t,a),s,r)})})},cN=(e,t)=>{let s=e;return t.split(ob).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},BD=e=>e.isThemeGetter,VD=(e,t)=>t?e.map(([s,r])=>{const i=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,c])=>[t+o,c])):a);return[s,i]}):e,UD=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,r=new Map;const i=(a,o)=>{s.set(a,o),t++,t>e&&(t=0,r=s,s=new Map)};return{get(a){let o=s.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){s.has(a)?s.set(a,o):i(a,o)}}},kP="!",qD=e=>{const{separator:t,experimentalParseClassName:s}=e,r=t.length===1,i=t[0],a=t.length,o=c=>{const d=[];let f=0,m=0,h;for(let w=0;w<c.length;w++){let x=c[w];if(f===0){if(x===i&&(r||c.slice(w,w+a)===t)){d.push(c.slice(m,w)),m=w+a;continue}if(x==="/"){h=w;continue}}x==="["?f++:x==="]"&&f--}const u=d.length===0?c:c.substring(m),p=u.startsWith(kP),y=p?u.substring(1):u,v=h&&h>m?h-m:void 0;return{modifiers:d,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:v}};return s?c=>s({className:c,parseClassName:o}):o},HD=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(r=>{r[0]==="["?(t.push(...s.sort(),r),s=[]):s.push(r)}),t.push(...s.sort()),t},WD=e=>({cache:UD(e.cacheSize),parseClassName:qD(e),...FD(e)}),ZD=/\s+/,GD=(e,t)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(ZD);let c="";for(let d=o.length-1;d>=0;d-=1){const f=o[d],{modifiers:m,hasImportantModifier:h,baseClassName:u,maybePostfixModifierPosition:p}=s(f);let y=!!p,v=r(y?u.substring(0,p):u);if(!v){if(!y){c=f+(c.length>0?" "+c:c);continue}if(v=r(u),!v){c=f+(c.length>0?" "+c:c);continue}y=!1}const w=HD(m).join(":"),x=h?w+kP:w,b=x+v;if(a.includes(b))continue;a.push(b);const _=i(v,y);for(let N=0;N<_.length;++N){const C=_[N];a.push(x+C)}c=f+(c.length>0?" "+c:c)}return c};function KD(){let e=0,t,s,r="";for(;e<arguments.length;)(t=arguments[e++])&&(s=CP(t))&&(r&&(r+=" "),r+=s);return r}const CP=e=>{if(typeof e=="string")return e;let t,s="";for(let r=0;r<e.length;r++)e[r]&&(t=CP(e[r]))&&(s&&(s+=" "),s+=t);return s};function YD(e,...t){let s,r,i,a=o;function o(d){const f=t.reduce((m,h)=>h(m),e());return s=WD(f),r=s.cache.get,i=s.cache.set,a=c,c(d)}function c(d){const f=r(d);if(f)return f;const m=GD(d,s);return i(d,m),m}return function(){return a(KD.apply(null,arguments))}}const Xt=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},PP=/^\[(?:([a-z-]+):)?(.+)\]$/i,XD=/^\d+\/\d+$/,QD=new Set(["px","full","screen"]),JD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,e6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,t6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,n6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,s6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ri=e=>Zl(e)||QD.has(e)||XD.test(e),da=e=>Ic(e,"length",u6),Zl=e=>!!e&&!Number.isNaN(Number(e)),Qg=e=>Ic(e,"number",Zl),bd=e=>!!e&&Number.isInteger(Number(e)),r6=e=>e.endsWith("%")&&Zl(e.slice(0,-1)),gt=e=>PP.test(e),ua=e=>JD.test(e),i6=new Set(["length","size","percentage"]),a6=e=>Ic(e,i6,EP),o6=e=>Ic(e,"position",EP),l6=new Set(["image","url"]),c6=e=>Ic(e,l6,f6),d6=e=>Ic(e,"",h6),wd=()=>!0,Ic=(e,t,s)=>{const r=PP.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):s(r[2]):!1},u6=e=>e6.test(e)&&!t6.test(e),EP=()=>!1,h6=e=>n6.test(e),f6=e=>s6.test(e),m6=()=>{const e=Xt("colors"),t=Xt("spacing"),s=Xt("blur"),r=Xt("brightness"),i=Xt("borderColor"),a=Xt("borderRadius"),o=Xt("borderSpacing"),c=Xt("borderWidth"),d=Xt("contrast"),f=Xt("grayscale"),m=Xt("hueRotate"),h=Xt("invert"),u=Xt("gap"),p=Xt("gradientColorStops"),y=Xt("gradientColorStopPositions"),v=Xt("inset"),w=Xt("margin"),x=Xt("opacity"),b=Xt("padding"),_=Xt("saturate"),N=Xt("scale"),C=Xt("sepia"),I=Xt("skew"),k=Xt("space"),E=Xt("translate"),M=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",gt,t],A=()=>[gt,t],z=()=>["",Ri,da],O=()=>["auto",Zl,gt],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",gt],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>[Zl,gt];return{cacheSize:500,separator:":",theme:{colors:[wd],spacing:[Ri,da],blur:["none","",ua,gt],brightness:R(),borderColor:[e],borderRadius:["none","","full",ua,gt],borderSpacing:A(),borderWidth:z(),contrast:R(),grayscale:U(),hueRotate:R(),invert:U(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[r6,da],inset:T(),margin:T(),opacity:R(),padding:A(),saturate:R(),scale:R(),sepia:U(),skew:R(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",gt]}],container:["container"],columns:[{columns:[ua]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),gt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bd,gt]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",gt]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",bd,gt]}],"grid-cols":[{"grid-cols":[wd]}],"col-start-end":[{col:["auto",{span:["full",bd,gt]},gt]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[wd]}],"row-start-end":[{row:["auto",{span:[bd,gt]},gt]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",gt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",gt]}],gap:[{gap:[u]}],"gap-x":[{"gap-x":[u]}],"gap-y":[{"gap-y":[u]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",gt,t]}],"min-w":[{"min-w":[gt,t,"min","max","fit"]}],"max-w":[{"max-w":[gt,t,"none","full","min","max","fit","prose",{screen:[ua]},ua]}],h:[{h:[gt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[gt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[gt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[gt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ua,da]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qg]}],"font-family":[{font:[wd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",gt]}],"line-clamp":[{"line-clamp":["none",Zl,Qg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ri,gt]}],"list-image":[{"list-image":["none",gt]}],"list-style-type":[{list:["none","disc","decimal",gt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ri,da]}],"underline-offset":[{"underline-offset":["auto",Ri,gt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),o6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},c6]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:G()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[Ri,gt]}],"outline-w":[{outline:[Ri,da]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ri,da]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ua,d6]}],"shadow-color":[{shadow:[wd]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",ua,gt]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",gt]}],duration:[{duration:R()}],ease:[{ease:["linear","in","out","in-out",gt]}],delay:[{delay:R()}],animate:[{animate:["none","spin","ping","pulse","bounce",gt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[bd,gt]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",gt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ri,da,Qg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},p6=YD(m6);function We(...e){return p6(fP(e))}const g6=vD,TP=j.forwardRef(({className:e,...t},s)=>n.jsx(aP,{ref:s,className:We("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));TP.displayName=aP.displayName;const v6=Ku("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),AP=j.forwardRef(({className:e,variant:t,...s},r)=>n.jsx(oP,{ref:r,className:We(v6({variant:t}),e),...s}));AP.displayName=oP.displayName;const x6=j.forwardRef(({className:e,...t},s)=>n.jsx(dP,{ref:s,className:We("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));x6.displayName=dP.displayName;const OP=j.forwardRef(({className:e,...t},s)=>n.jsx(uP,{ref:s,className:We("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(is,{className:"h-4 w-4"})}));OP.displayName=uP.displayName;const RP=j.forwardRef(({className:e,...t},s)=>n.jsx(lP,{ref:s,className:We("text-sm font-semibold",e),...t}));RP.displayName=lP.displayName;const LP=j.forwardRef(({className:e,...t},s)=>n.jsx(cP,{ref:s,className:We("text-sm opacity-90",e),...t}));LP.displayName=cP.displayName;function y6(){const{toasts:e}=hn();return n.jsxs(g6,{children:[e.map(function({id:t,title:s,description:r,action:i,...a}){return n.jsxs(AP,{...a,children:[n.jsxs("div",{className:"grid gap-1",children:[s&&n.jsx(RP,{children:s}),r&&n.jsx(LP,{children:r})]}),i,n.jsx(OP,{})]},t)}),n.jsx(TP,{})]})}var dN=["light","dark"],b6="(prefers-color-scheme: dark)",w6=j.createContext(void 0),j6={setTheme:e=>{},themes:[]},_6=()=>{var e;return(e=j.useContext(w6))!=null?e:j6};j.memo(({forcedTheme:e,storageKey:t,attribute:s,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:c,nonce:d})=>{let f=a==="system",m=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${c.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,h=i?dN.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",u=(y,v=!1,w=!0)=>{let x=o?o[y]:y,b=v?y+"|| ''":`'${x}'`,_="";return i&&w&&!v&&dN.includes(y)&&(_+=`d.style.colorScheme = '${y}';`),s==="class"?v||x?_+=`c.add(${b})`:_+="null":x&&(_+=`d[s](n,${b})`),_},p=e?`!function(){${m}${u(e)}}()`:r?`!function(){try{${m}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${f})){var t='${b6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${u("dark")}}else{${u("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${u(o?"x[e]":"e",!0)}}${f?"":"else{"+u(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${u(o?"x[e]":"e",!0)}}else{${u(a,!1,!1)};}${h}}catch(t){}}();`;return j.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:p}})});var N6=e=>{switch(e){case"success":return C6;case"info":return E6;case"warning":return P6;case"error":return T6;default:return null}},S6=Array(12).fill(0),k6=({visible:e,className:t})=>_e.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},_e.createElement("div",{className:"sonner-spinner"},S6.map((s,r)=>_e.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),C6=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),P6=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),E6=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),T6=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},_e.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),A6=_e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_e.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),O6=()=>{let[e,t]=_e.useState(document.hidden);return _e.useEffect(()=>{let s=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),e},Rx=1,R6=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:s,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Rx++,a=this.toasts.find(c=>c.id===i),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:s}),{...c,...e,id:i,dismissible:o,title:s}):c):this.addToast({title:s,...r,dismissible:o,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),i=s!==void 0,a,o=r.then(async d=>{if(a=["resolve",d],_e.isValidElement(d))i=!1,this.create({id:s,type:"default",message:d});else if(M6(d)&&!d.ok){i=!1;let f=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,m=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description;this.create({id:s,type:"error",message:f,description:m})}else if(t.success!==void 0){i=!1;let f=typeof t.success=="function"?await t.success(d):t.success,m=typeof t.description=="function"?await t.description(d):t.description;this.create({id:s,type:"success",message:f,description:m})}}).catch(async d=>{if(a=["reject",d],t.error!==void 0){i=!1;let f=typeof t.error=="function"?await t.error(d):t.error,m=typeof t.description=="function"?await t.description(d):t.description;this.create({id:s,type:"error",message:f,description:m})}}).finally(()=>{var d;i&&(this.dismiss(s),s=void 0),(d=t.finally)==null||d.call(t)}),c=()=>new Promise((d,f)=>o.then(()=>a[0]==="reject"?f(a[1]):d(a[1])).catch(f));return typeof s!="string"&&typeof s!="number"?{unwrap:c}:Object.assign(s,{unwrap:c})},this.custom=(e,t)=>{let s=(t==null?void 0:t.id)||Rx++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ps=new R6,L6=(e,t)=>{let s=(t==null?void 0:t.id)||Rx++;return Ps.addToast({title:e,...t,id:s}),s},M6=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",I6=L6,D6=()=>Ps.toasts,F6=()=>Ps.getActiveToasts(),Wn=Object.assign(I6,{success:Ps.success,info:Ps.info,warning:Ps.warning,error:Ps.error,custom:Ps.custom,message:Ps.message,promise:Ps.promise,dismiss:Ps.dismiss,loading:Ps.loading},{getHistory:D6,getToasts:F6});function $6(e,{insertAt:t}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}$6(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Zh(e){return e.label!==void 0}var z6=3,B6="32px",V6="16px",uN=4e3,U6=356,q6=14,H6=20,W6=200;function wr(...e){return e.filter(Boolean).join(" ")}function Z6(e){let[t,s]=e.split("-"),r=[];return t&&r.push(t),s&&r.push(s),r}var G6=e=>{var t,s,r,i,a,o,c,d,f,m,h;let{invert:u,toast:p,unstyled:y,interacting:v,setHeights:w,visibleToasts:x,heights:b,index:_,toasts:N,expanded:C,removeToast:I,defaultRichColors:k,closeButton:E,style:M,cancelButtonStyle:P,actionButtonStyle:T,className:A="",descriptionClassName:z="",duration:O,position:F,gap:G,loadingIcon:Y,expandByDefault:K,classNames:U,icons:B,closeButtonAriaLabel:R="Close toast",pauseWhenPageIsHidden:$}=e,[W,Z]=_e.useState(null),[X,V]=_e.useState(null),[H,se]=_e.useState(!1),[Q,ie]=_e.useState(!1),[he,te]=_e.useState(!1),[ge,Se]=_e.useState(!1),[fe,ke]=_e.useState(!1),[xe,de]=_e.useState(0),[me,ee]=_e.useState(0),ae=_e.useRef(p.duration||O||uN),oe=_e.useRef(null),be=_e.useRef(null),je=_===0,we=_+1<=x,re=p.type,Ce=p.dismissible!==!1,Te=p.className||"",lt=p.descriptionClassName||"",it=_e.useMemo(()=>b.findIndex(at=>at.toastId===p.id)||0,[b,p.id]),Ft=_e.useMemo(()=>{var at;return(at=p.closeButton)!=null?at:E},[p.closeButton,E]),Fs=_e.useMemo(()=>p.duration||O||uN,[p.duration,O]),le=_e.useRef(0),De=_e.useRef(0),Je=_e.useRef(0),Fe=_e.useRef(null),[He,Ze]=F.split("-"),Bt=_e.useMemo(()=>b.reduce((at,et,St)=>St>=it?at:at+et.height,0),[b,it]),Et=O6(),Cn=p.invert||u,Ss=re==="loading";De.current=_e.useMemo(()=>it*G+Bt,[it,Bt]),_e.useEffect(()=>{ae.current=Fs},[Fs]),_e.useEffect(()=>{se(!0)},[]),_e.useEffect(()=>{let at=be.current;if(at){let et=at.getBoundingClientRect().height;return ee(et),w(St=>[{toastId:p.id,height:et,position:p.position},...St]),()=>w(St=>St.filter(sn=>sn.toastId!==p.id))}},[w,p.id]),_e.useLayoutEffect(()=>{if(!H)return;let at=be.current,et=at.style.height;at.style.height="auto";let St=at.getBoundingClientRect().height;at.style.height=et,ee(St),w(sn=>sn.find(rn=>rn.toastId===p.id)?sn.map(rn=>rn.toastId===p.id?{...rn,height:St}:rn):[{toastId:p.id,height:St,position:p.position},...sn])},[H,p.title,p.description,w,p.id]);let Ln=_e.useCallback(()=>{ie(!0),de(De.current),w(at=>at.filter(et=>et.toastId!==p.id)),setTimeout(()=>{I(p)},W6)},[p,I,w,De]);_e.useEffect(()=>{if(p.promise&&re==="loading"||p.duration===1/0||p.type==="loading")return;let at;return C||v||$&&Et?(()=>{if(Je.current<le.current){let et=new Date().getTime()-le.current;ae.current=ae.current-et}Je.current=new Date().getTime()})():ae.current!==1/0&&(le.current=new Date().getTime(),at=setTimeout(()=>{var et;(et=p.onAutoClose)==null||et.call(p,p),Ln()},ae.current)),()=>clearTimeout(at)},[C,v,p,re,$,Et,Ln]),_e.useEffect(()=>{p.delete&&Ln()},[Ln,p.delete]);function Ci(){var at,et,St;return B!=null&&B.loading?_e.createElement("div",{className:wr(U==null?void 0:U.loader,(at=p==null?void 0:p.classNames)==null?void 0:at.loader,"sonner-loader"),"data-visible":re==="loading"},B.loading):Y?_e.createElement("div",{className:wr(U==null?void 0:U.loader,(et=p==null?void 0:p.classNames)==null?void 0:et.loader,"sonner-loader"),"data-visible":re==="loading"},Y):_e.createElement(k6,{className:wr(U==null?void 0:U.loader,(St=p==null?void 0:p.classNames)==null?void 0:St.loader),visible:re==="loading"})}return _e.createElement("li",{tabIndex:0,ref:be,className:wr(A,Te,U==null?void 0:U.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,U==null?void 0:U.default,U==null?void 0:U[re],(s=p==null?void 0:p.classNames)==null?void 0:s[re]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:k,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":H,"data-promise":!!p.promise,"data-swiped":fe,"data-removed":Q,"data-visible":we,"data-y-position":He,"data-x-position":Ze,"data-index":_,"data-front":je,"data-swiping":he,"data-dismissible":Ce,"data-type":re,"data-invert":Cn,"data-swipe-out":ge,"data-swipe-direction":X,"data-expanded":!!(C||K&&H),style:{"--index":_,"--toasts-before":_,"--z-index":N.length-_,"--offset":`${Q?xe:De.current}px`,"--initial-height":K?"auto":`${me}px`,...M,...p.style},onDragEnd:()=>{te(!1),Z(null),Fe.current=null},onPointerDown:at=>{Ss||!Ce||(oe.current=new Date,de(De.current),at.target.setPointerCapture(at.pointerId),at.target.tagName!=="BUTTON"&&(te(!0),Fe.current={x:at.clientX,y:at.clientY}))},onPointerUp:()=>{var at,et,St,sn;if(ge||!Ce)return;Fe.current=null;let rn=Number(((at=be.current)==null?void 0:at.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Pn=Number(((et=be.current)==null?void 0:et.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pi=new Date().getTime()-((St=oe.current)==null?void 0:St.getTime()),$s=W==="x"?rn:Pn,Wr=Math.abs($s)/Pi;if(Math.abs($s)>=H6||Wr>.11){de(De.current),(sn=p.onDismiss)==null||sn.call(p,p),V(W==="x"?rn>0?"right":"left":Pn>0?"down":"up"),Ln(),Se(!0),ke(!1);return}te(!1),Z(null)},onPointerMove:at=>{var et,St,sn,rn;if(!Fe.current||!Ce||((et=window.getSelection())==null?void 0:et.toString().length)>0)return;let Pn=at.clientY-Fe.current.y,Pi=at.clientX-Fe.current.x,$s=(St=e.swipeDirections)!=null?St:Z6(F);!W&&(Math.abs(Pi)>1||Math.abs(Pn)>1)&&Z(Math.abs(Pi)>Math.abs(Pn)?"x":"y");let Wr={x:0,y:0};W==="y"?($s.includes("top")||$s.includes("bottom"))&&($s.includes("top")&&Pn<0||$s.includes("bottom")&&Pn>0)&&(Wr.y=Pn):W==="x"&&($s.includes("left")||$s.includes("right"))&&($s.includes("left")&&Pi<0||$s.includes("right")&&Pi>0)&&(Wr.x=Pi),(Math.abs(Wr.x)>0||Math.abs(Wr.y)>0)&&ke(!0),(sn=be.current)==null||sn.style.setProperty("--swipe-amount-x",`${Wr.x}px`),(rn=be.current)==null||rn.style.setProperty("--swipe-amount-y",`${Wr.y}px`)}},Ft&&!p.jsx?_e.createElement("button",{"aria-label":R,"data-disabled":Ss,"data-close-button":!0,onClick:Ss||!Ce?()=>{}:()=>{var at;Ln(),(at=p.onDismiss)==null||at.call(p,p)},className:wr(U==null?void 0:U.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(a=B==null?void 0:B.close)!=null?a:A6):null,p.jsx||j.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:_e.createElement(_e.Fragment,null,re||p.icon||p.promise?_e.createElement("div",{"data-icon":"",className:wr(U==null?void 0:U.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Ci():null,p.type!=="loading"?p.icon||(B==null?void 0:B[re])||N6(re):null):null,_e.createElement("div",{"data-content":"",className:wr(U==null?void 0:U.content,(c=p==null?void 0:p.classNames)==null?void 0:c.content)},_e.createElement("div",{"data-title":"",className:wr(U==null?void 0:U.title,(d=p==null?void 0:p.classNames)==null?void 0:d.title)},typeof p.title=="function"?p.title():p.title),p.description?_e.createElement("div",{"data-description":"",className:wr(z,lt,U==null?void 0:U.description,(f=p==null?void 0:p.classNames)==null?void 0:f.description)},typeof p.description=="function"?p.description():p.description):null),j.isValidElement(p.cancel)?p.cancel:p.cancel&&Zh(p.cancel)?_e.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||P,onClick:at=>{var et,St;Zh(p.cancel)&&Ce&&((St=(et=p.cancel).onClick)==null||St.call(et,at),Ln())},className:wr(U==null?void 0:U.cancelButton,(m=p==null?void 0:p.classNames)==null?void 0:m.cancelButton)},p.cancel.label):null,j.isValidElement(p.action)?p.action:p.action&&Zh(p.action)?_e.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||T,onClick:at=>{var et,St;Zh(p.action)&&((St=(et=p.action).onClick)==null||St.call(et,at),!at.defaultPrevented&&Ln())},className:wr(U==null?void 0:U.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function hN(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function K6(e,t){let s={};return[e,t].forEach((r,i)=>{let a=i===1,o=a?"--mobile-offset":"--offset",c=a?V6:B6;function d(f){["top","right","bottom","left"].forEach(m=>{s[`${o}-${m}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?s[`${o}-${f}`]=c:s[`${o}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):d(c)}),s}var Y6=j.forwardRef(function(e,t){let{invert:s,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:o,className:c,offset:d,mobileOffset:f,theme:m="light",richColors:h,duration:u,style:p,visibleToasts:y=z6,toastOptions:v,dir:w=hN(),gap:x=q6,loadingIcon:b,icons:_,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:C}=e,[I,k]=_e.useState([]),E=_e.useMemo(()=>Array.from(new Set([r].concat(I.filter($=>$.position).map($=>$.position)))),[I,r]),[M,P]=_e.useState([]),[T,A]=_e.useState(!1),[z,O]=_e.useState(!1),[F,G]=_e.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=_e.useRef(null),K=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=_e.useRef(null),B=_e.useRef(!1),R=_e.useCallback($=>{k(W=>{var Z;return(Z=W.find(X=>X.id===$.id))!=null&&Z.delete||Ps.dismiss($.id),W.filter(({id:X})=>X!==$.id)})},[]);return _e.useEffect(()=>Ps.subscribe($=>{if($.dismiss){k(W=>W.map(Z=>Z.id===$.id?{...Z,delete:!0}:Z));return}setTimeout(()=>{zC.flushSync(()=>{k(W=>{let Z=W.findIndex(X=>X.id===$.id);return Z!==-1?[...W.slice(0,Z),{...W[Z],...$},...W.slice(Z+1)]:[$,...W]})})})}),[]),_e.useEffect(()=>{if(m!=="system"){G(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;let $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:W})=>{G(W?"dark":"light")})}catch{$.addListener(({matches:Z})=>{try{G(Z?"dark":"light")}catch(X){console.error(X)}})}},[m]),_e.useEffect(()=>{I.length<=1&&A(!1)},[I]),_e.useEffect(()=>{let $=W=>{var Z,X;i.every(V=>W[V]||W.code===V)&&(A(!0),(Z=Y.current)==null||Z.focus()),W.code==="Escape"&&(document.activeElement===Y.current||(X=Y.current)!=null&&X.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[i]),_e.useEffect(()=>{if(Y.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,B.current=!1)}},[Y.current]),_e.createElement("section",{ref:t,"aria-label":`${N} ${K}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map(($,W)=>{var Z;let[X,V]=$.split("-");return I.length?_e.createElement("ol",{key:$,dir:w==="auto"?hN():w,tabIndex:-1,ref:Y,className:c,"data-sonner-toaster":!0,"data-theme":F,"data-y-position":X,"data-lifted":T&&I.length>1&&!a,"data-x-position":V,style:{"--front-toast-height":`${((Z=M[0])==null?void 0:Z.height)||0}px`,"--width":`${U6}px`,"--gap":`${x}px`,...p,...K6(d,f)},onBlur:H=>{B.current&&!H.currentTarget.contains(H.relatedTarget)&&(B.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||B.current||(B.current=!0,U.current=H.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{z||A(!1)},onDragEnd:()=>A(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},I.filter(H=>!H.position&&W===0||H.position===$).map((H,se)=>{var Q,ie;return _e.createElement(G6,{key:H.id,icons:_,index:se,toast:H,defaultRichColors:h,duration:(Q=v==null?void 0:v.duration)!=null?Q:u,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:s,visibleToasts:y,closeButton:(ie=v==null?void 0:v.closeButton)!=null?ie:o,interacting:z,position:$,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:R,toasts:I.filter(he=>he.position==H.position),heights:M.filter(he=>he.position==H.position),setHeights:P,expandByDefault:a,gap:x,loadingIcon:b,expanded:T,pauseWhenPageIsHidden:C,swipeDirections:e.swipeDirections})})):null}))});const X6=({...e})=>{const{theme:t="system"}=_6();return n.jsx(Y6,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var Q6=a0[" useId ".trim().toString()]||(()=>{}),J6=0;function Fr(e){const[t,s]=j.useState(Q6());return kn(()=>{e||s(r=>r??String(J6++))},[e]),e||(t?`radix-${t}`:"")}const eF=["top","right","bottom","left"],qa=Math.min,Vs=Math.max,tm=Math.round,Gh=Math.floor,ui=e=>({x:e,y:e}),tF={left:"right",right:"left",bottom:"top",top:"bottom"},nF={start:"end",end:"start"};function Lx(e,t,s){return Vs(e,qa(t,s))}function Qi(e,t){return typeof e=="function"?e(t):e}function Ji(e){return e.split("-")[0]}function Dc(e){return e.split("-")[1]}function lb(e){return e==="x"?"y":"x"}function cb(e){return e==="y"?"height":"width"}const sF=new Set(["top","bottom"]);function oi(e){return sF.has(Ji(e))?"y":"x"}function db(e){return lb(oi(e))}function rF(e,t,s){s===void 0&&(s=!1);const r=Dc(e),i=db(e),a=cb(i);let o=i==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=nm(o)),[o,nm(o)]}function iF(e){const t=nm(e);return[Mx(e),t,Mx(t)]}function Mx(e){return e.replace(/start|end/g,t=>nF[t])}const fN=["left","right"],mN=["right","left"],aF=["top","bottom"],oF=["bottom","top"];function lF(e,t,s){switch(e){case"top":case"bottom":return s?t?mN:fN:t?fN:mN;case"left":case"right":return t?aF:oF;default:return[]}}function cF(e,t,s,r){const i=Dc(e);let a=lF(Ji(e),s==="start",r);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(Mx)))),a}function nm(e){return e.replace(/left|right|bottom|top/g,t=>tF[t])}function dF(e){return{top:0,right:0,bottom:0,left:0,...e}}function MP(e){return typeof e!="number"?dF(e):{top:e,right:e,bottom:e,left:e}}function sm(e){const{x:t,y:s,width:r,height:i}=e;return{width:r,height:i,top:s,left:t,right:t+r,bottom:s+i,x:t,y:s}}function pN(e,t,s){let{reference:r,floating:i}=e;const a=oi(t),o=db(t),c=cb(o),d=Ji(t),f=a==="y",m=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,u=r[c]/2-i[c]/2;let p;switch(d){case"top":p={x:m,y:r.y-i.height};break;case"bottom":p={x:m,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Dc(t)){case"start":p[o]-=u*(s&&f?-1:1);break;case"end":p[o]+=u*(s&&f?-1:1);break}return p}const uF=async(e,t,s)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=s,c=a.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:m,y:h}=pN(f,r,d),u=r,p={},y=0;for(let v=0;v<c.length;v++){const{name:w,fn:x}=c[v],{x:b,y:_,data:N,reset:C}=await x({x:m,y:h,initialPlacement:r,placement:u,strategy:i,middlewareData:p,rects:f,platform:o,elements:{reference:e,floating:t}});m=b??m,h=_??h,p={...p,[w]:{...p[w],...N}},C&&y<=50&&(y++,typeof C=="object"&&(C.placement&&(u=C.placement),C.rects&&(f=C.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):C.rects),{x:m,y:h}=pN(f,u,d)),v=-1)}return{x:m,y:h,placement:u,strategy:i,middlewareData:p}};async function Nu(e,t){var s;t===void 0&&(t={});const{x:r,y:i,platform:a,rects:o,elements:c,strategy:d}=e,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:u=!1,padding:p=0}=Qi(t,e),y=MP(p),w=c[u?h==="floating"?"reference":"floating":h],x=sm(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(w)))==null||s?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:f,rootBoundary:m,strategy:d})),b=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),N=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},C=sm(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:_,strategy:d}):b);return{top:(x.top-C.top+y.top)/N.y,bottom:(C.bottom-x.bottom+y.bottom)/N.y,left:(x.left-C.left+y.left)/N.x,right:(C.right-x.right+y.right)/N.x}}const hF=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:r,placement:i,rects:a,platform:o,elements:c,middlewareData:d}=t,{element:f,padding:m=0}=Qi(e,t)||{};if(f==null)return{};const h=MP(m),u={x:s,y:r},p=db(i),y=cb(p),v=await o.getDimensions(f),w=p==="y",x=w?"top":"left",b=w?"bottom":"right",_=w?"clientHeight":"clientWidth",N=a.reference[y]+a.reference[p]-u[p]-a.floating[y],C=u[p]-a.reference[p],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let k=I?I[_]:0;(!k||!await(o.isElement==null?void 0:o.isElement(I)))&&(k=c.floating[_]||a.floating[y]);const E=N/2-C/2,M=k/2-v[y]/2-1,P=qa(h[x],M),T=qa(h[b],M),A=P,z=k-v[y]-T,O=k/2-v[y]/2+E,F=Lx(A,O,z),G=!d.arrow&&Dc(i)!=null&&O!==F&&a.reference[y]/2-(O<A?P:T)-v[y]/2<0,Y=G?O<A?O-A:O-z:0;return{[p]:u[p]+Y,data:{[p]:F,centerOffset:O-F-Y,...G&&{alignmentOffset:Y}},reset:G}}}),fF=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:c,platform:d,elements:f}=t,{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:u,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...w}=Qi(e,t);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const x=Ji(i),b=oi(c),_=Ji(c)===c,N=await(d.isRTL==null?void 0:d.isRTL(f.floating)),C=u||(_||!v?[nm(c)]:iF(c)),I=y!=="none";!u&&I&&C.push(...cF(c,v,y,N));const k=[c,...C],E=await Nu(t,w),M=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(m&&M.push(E[x]),h){const O=rF(i,o,N);M.push(E[O[0]],E[O[1]])}if(P=[...P,{placement:i,overflows:M}],!M.every(O=>O<=0)){var T,A;const O=(((T=a.flip)==null?void 0:T.index)||0)+1,F=k[O];if(F&&(!(h==="alignment"?b!==oi(F):!1)||P.every(K=>K.overflows[0]>0&&oi(K.placement)===b)))return{data:{index:O,overflows:P},reset:{placement:F}};let G=(A=P.filter(Y=>Y.overflows[0]<=0).sort((Y,K)=>Y.overflows[1]-K.overflows[1])[0])==null?void 0:A.placement;if(!G)switch(p){case"bestFit":{var z;const Y=(z=P.filter(K=>{if(I){const U=oi(K.placement);return U===b||U==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(U=>U>0).reduce((U,B)=>U+B,0)]).sort((K,U)=>K[1]-U[1])[0])==null?void 0:z[0];Y&&(G=Y);break}case"initialPlacement":G=c;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function gN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function vN(e){return eF.some(t=>e[t]>=0)}const mF=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:r="referenceHidden",...i}=Qi(e,t);switch(r){case"referenceHidden":{const a=await Nu(t,{...i,elementContext:"reference"}),o=gN(a,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:vN(o)}}}case"escaped":{const a=await Nu(t,{...i,altBoundary:!0}),o=gN(a,s.floating);return{data:{escapedOffsets:o,escaped:vN(o)}}}default:return{}}}}},IP=new Set(["left","top"]);async function pF(e,t){const{placement:s,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ji(s),c=Dc(s),d=oi(s)==="y",f=IP.has(o)?-1:1,m=a&&d?-1:1,h=Qi(t,e);let{mainAxis:u,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof y=="number"&&(p=c==="end"?y*-1:y),d?{x:p*m,y:u*f}:{x:u*f,y:p*m}}const gF=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,r;const{x:i,y:a,placement:o,middlewareData:c}=t,d=await pF(t,e);return o===((s=c.offset)==null?void 0:s.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:o}}}}},vF=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:c={fn:w=>{let{x,y:b}=w;return{x,y:b}}},...d}=Qi(e,t),f={x:s,y:r},m=await Nu(t,d),h=oi(Ji(i)),u=lb(h);let p=f[u],y=f[h];if(a){const w=u==="y"?"top":"left",x=u==="y"?"bottom":"right",b=p+m[w],_=p-m[x];p=Lx(b,p,_)}if(o){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=y+m[w],_=y-m[x];y=Lx(b,y,_)}const v=c.fn({...t,[u]:p,[h]:y});return{...v,data:{x:v.x-s,y:v.y-r,enabled:{[u]:a,[h]:o}}}}}},xF=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:c=0,mainAxis:d=!0,crossAxis:f=!0}=Qi(e,t),m={x:s,y:r},h=oi(i),u=lb(h);let p=m[u],y=m[h];const v=Qi(c,t),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(d){const _=u==="y"?"height":"width",N=a.reference[u]-a.floating[_]+w.mainAxis,C=a.reference[u]+a.reference[_]-w.mainAxis;p<N?p=N:p>C&&(p=C)}if(f){var x,b;const _=u==="y"?"width":"height",N=IP.has(Ji(i)),C=a.reference[h]-a.floating[_]+(N&&((x=o.offset)==null?void 0:x[h])||0)+(N?0:w.crossAxis),I=a.reference[h]+a.reference[_]+(N?0:((b=o.offset)==null?void 0:b[h])||0)-(N?w.crossAxis:0);y<C?y=C:y>I&&(y=I)}return{[u]:p,[h]:y}}}},yF=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,r;const{placement:i,rects:a,platform:o,elements:c}=t,{apply:d=()=>{},...f}=Qi(e,t),m=await Nu(t,f),h=Ji(i),u=Dc(i),p=oi(i)==="y",{width:y,height:v}=a.floating;let w,x;h==="top"||h==="bottom"?(w=h,x=u===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(x=h,w=u==="end"?"top":"bottom");const b=v-m.top-m.bottom,_=y-m.left-m.right,N=qa(v-m[w],b),C=qa(y-m[x],_),I=!t.middlewareData.shift;let k=N,E=C;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(E=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=b),I&&!u){const P=Vs(m.left,0),T=Vs(m.right,0),A=Vs(m.top,0),z=Vs(m.bottom,0);p?E=y-2*(P!==0||T!==0?P+T:Vs(m.left,m.right)):k=v-2*(A!==0||z!==0?A+z:Vs(m.top,m.bottom))}await d({...t,availableWidth:E,availableHeight:k});const M=await o.getDimensions(c.floating);return y!==M.width||v!==M.height?{reset:{rects:!0}}:{}}}};function np(){return typeof window<"u"}function Fc(e){return DP(e)?(e.nodeName||"").toLowerCase():"#document"}function Ws(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function _i(e){var t;return(t=(DP(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function DP(e){return np()?e instanceof Node||e instanceof Ws(e).Node:!1}function Vr(e){return np()?e instanceof Element||e instanceof Ws(e).Element:!1}function bi(e){return np()?e instanceof HTMLElement||e instanceof Ws(e).HTMLElement:!1}function xN(e){return!np()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ws(e).ShadowRoot}const bF=new Set(["inline","contents"]);function Ju(e){const{overflow:t,overflowX:s,overflowY:r,display:i}=Ur(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+s)&&!bF.has(i)}const wF=new Set(["table","td","th"]);function jF(e){return wF.has(Fc(e))}const _F=[":popover-open",":modal"];function sp(e){return _F.some(t=>{try{return e.matches(t)}catch{return!1}})}const NF=["transform","translate","scale","rotate","perspective"],SF=["transform","translate","scale","rotate","perspective","filter"],kF=["paint","layout","strict","content"];function ub(e){const t=hb(),s=Vr(e)?Ur(e):e;return NF.some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||SF.some(r=>(s.willChange||"").includes(r))||kF.some(r=>(s.contain||"").includes(r))}function CF(e){let t=Ha(e);for(;bi(t)&&!pc(t);){if(ub(t))return t;if(sp(t))return null;t=Ha(t)}return null}function hb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const PF=new Set(["html","body","#document"]);function pc(e){return PF.has(Fc(e))}function Ur(e){return Ws(e).getComputedStyle(e)}function rp(e){return Vr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ha(e){if(Fc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||xN(e)&&e.host||_i(e);return xN(t)?t.host:t}function FP(e){const t=Ha(e);return pc(t)?e.ownerDocument?e.ownerDocument.body:e.body:bi(t)&&Ju(t)?t:FP(t)}function Su(e,t,s){var r;t===void 0&&(t=[]),s===void 0&&(s=!0);const i=FP(e),a=i===((r=e.ownerDocument)==null?void 0:r.body),o=Ws(i);if(a){const c=Ix(o);return t.concat(o,o.visualViewport||[],Ju(i)?i:[],c&&s?Su(c):[])}return t.concat(i,Su(i,[],s))}function Ix(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $P(e){const t=Ur(e);let s=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=bi(e),a=i?e.offsetWidth:s,o=i?e.offsetHeight:r,c=tm(s)!==a||tm(r)!==o;return c&&(s=a,r=o),{width:s,height:r,$:c}}function fb(e){return Vr(e)?e:e.contextElement}function Gl(e){const t=fb(e);if(!bi(t))return ui(1);const s=t.getBoundingClientRect(),{width:r,height:i,$:a}=$P(t);let o=(a?tm(s.width):s.width)/r,c=(a?tm(s.height):s.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const EF=ui(0);function zP(e){const t=Ws(e);return!hb()||!t.visualViewport?EF:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function TF(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==Ws(e)?!1:t}function Wo(e,t,s,r){t===void 0&&(t=!1),s===void 0&&(s=!1);const i=e.getBoundingClientRect(),a=fb(e);let o=ui(1);t&&(r?Vr(r)&&(o=Gl(r)):o=Gl(e));const c=TF(a,s,r)?zP(a):ui(0);let d=(i.left+c.x)/o.x,f=(i.top+c.y)/o.y,m=i.width/o.x,h=i.height/o.y;if(a){const u=Ws(a),p=r&&Vr(r)?Ws(r):r;let y=u,v=Ix(y);for(;v&&r&&p!==y;){const w=Gl(v),x=v.getBoundingClientRect(),b=Ur(v),_=x.left+(v.clientLeft+parseFloat(b.paddingLeft))*w.x,N=x.top+(v.clientTop+parseFloat(b.paddingTop))*w.y;d*=w.x,f*=w.y,m*=w.x,h*=w.y,d+=_,f+=N,y=Ws(v),v=Ix(y)}}return sm({width:m,height:h,x:d,y:f})}function mb(e,t){const s=rp(e).scrollLeft;return t?t.left+s:Wo(_i(e)).left+s}function BP(e,t,s){s===void 0&&(s=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(s?0:mb(e,r)),a=r.top+t.scrollTop;return{x:i,y:a}}function AF(e){let{elements:t,rect:s,offsetParent:r,strategy:i}=e;const a=i==="fixed",o=_i(r),c=t?sp(t.floating):!1;if(r===o||c&&a)return s;let d={scrollLeft:0,scrollTop:0},f=ui(1);const m=ui(0),h=bi(r);if((h||!h&&!a)&&((Fc(r)!=="body"||Ju(o))&&(d=rp(r)),bi(r))){const p=Wo(r);f=Gl(r),m.x=p.x+r.clientLeft,m.y=p.y+r.clientTop}const u=o&&!h&&!a?BP(o,d,!0):ui(0);return{width:s.width*f.x,height:s.height*f.y,x:s.x*f.x-d.scrollLeft*f.x+m.x+u.x,y:s.y*f.y-d.scrollTop*f.y+m.y+u.y}}function OF(e){return Array.from(e.getClientRects())}function RF(e){const t=_i(e),s=rp(e),r=e.ownerDocument.body,i=Vs(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Vs(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-s.scrollLeft+mb(e);const c=-s.scrollTop;return Ur(r).direction==="rtl"&&(o+=Vs(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:c}}function LF(e,t){const s=Ws(e),r=_i(e),i=s.visualViewport;let a=r.clientWidth,o=r.clientHeight,c=0,d=0;if(i){a=i.width,o=i.height;const f=hb();(!f||f&&t==="fixed")&&(c=i.offsetLeft,d=i.offsetTop)}return{width:a,height:o,x:c,y:d}}const MF=new Set(["absolute","fixed"]);function IF(e,t){const s=Wo(e,!0,t==="fixed"),r=s.top+e.clientTop,i=s.left+e.clientLeft,a=bi(e)?Gl(e):ui(1),o=e.clientWidth*a.x,c=e.clientHeight*a.y,d=i*a.x,f=r*a.y;return{width:o,height:c,x:d,y:f}}function yN(e,t,s){let r;if(t==="viewport")r=LF(e,s);else if(t==="document")r=RF(_i(e));else if(Vr(t))r=IF(t,s);else{const i=zP(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return sm(r)}function VP(e,t){const s=Ha(e);return s===t||!Vr(s)||pc(s)?!1:Ur(s).position==="fixed"||VP(s,t)}function DF(e,t){const s=t.get(e);if(s)return s;let r=Su(e,[],!1).filter(c=>Vr(c)&&Fc(c)!=="body"),i=null;const a=Ur(e).position==="fixed";let o=a?Ha(e):e;for(;Vr(o)&&!pc(o);){const c=Ur(o),d=ub(o);!d&&c.position==="fixed"&&(i=null),(a?!d&&!i:!d&&c.position==="static"&&!!i&&MF.has(i.position)||Ju(o)&&!d&&VP(e,o))?r=r.filter(m=>m!==o):i=c,o=Ha(o)}return t.set(e,r),r}function FF(e){let{element:t,boundary:s,rootBoundary:r,strategy:i}=e;const o=[...s==="clippingAncestors"?sp(t)?[]:DF(t,this._c):[].concat(s),r],c=o[0],d=o.reduce((f,m)=>{const h=yN(t,m,i);return f.top=Vs(h.top,f.top),f.right=qa(h.right,f.right),f.bottom=qa(h.bottom,f.bottom),f.left=Vs(h.left,f.left),f},yN(t,c,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function $F(e){const{width:t,height:s}=$P(e);return{width:t,height:s}}function zF(e,t,s){const r=bi(t),i=_i(t),a=s==="fixed",o=Wo(e,!0,a,t);let c={scrollLeft:0,scrollTop:0};const d=ui(0);function f(){d.x=mb(i)}if(r||!r&&!a)if((Fc(t)!=="body"||Ju(i))&&(c=rp(t)),r){const p=Wo(t,!0,a,t);d.x=p.x+t.clientLeft,d.y=p.y+t.clientTop}else i&&f();a&&!r&&i&&f();const m=i&&!r&&!a?BP(i,c):ui(0),h=o.left+c.scrollLeft-d.x-m.x,u=o.top+c.scrollTop-d.y-m.y;return{x:h,y:u,width:o.width,height:o.height}}function Jg(e){return Ur(e).position==="static"}function bN(e,t){if(!bi(e)||Ur(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return _i(e)===s&&(s=s.ownerDocument.body),s}function UP(e,t){const s=Ws(e);if(sp(e))return s;if(!bi(e)){let i=Ha(e);for(;i&&!pc(i);){if(Vr(i)&&!Jg(i))return i;i=Ha(i)}return s}let r=bN(e,t);for(;r&&jF(r)&&Jg(r);)r=bN(r,t);return r&&pc(r)&&Jg(r)&&!ub(r)?s:r||CF(e)||s}const BF=async function(e){const t=this.getOffsetParent||UP,s=this.getDimensions,r=await s(e.floating);return{reference:zF(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function VF(e){return Ur(e).direction==="rtl"}const UF={convertOffsetParentRelativeRectToViewportRelativeRect:AF,getDocumentElement:_i,getClippingRect:FF,getOffsetParent:UP,getElementRects:BF,getClientRects:OF,getDimensions:$F,getScale:Gl,isElement:Vr,isRTL:VF};function qP(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function qF(e,t){let s=null,r;const i=_i(e);function a(){var c;clearTimeout(r),(c=s)==null||c.disconnect(),s=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),a();const f=e.getBoundingClientRect(),{left:m,top:h,width:u,height:p}=f;if(c||t(),!u||!p)return;const y=Gh(h),v=Gh(i.clientWidth-(m+u)),w=Gh(i.clientHeight-(h+p)),x=Gh(m),_={rootMargin:-y+"px "+-v+"px "+-w+"px "+-x+"px",threshold:Vs(0,qa(1,d))||1};let N=!0;function C(I){const k=I[0].intersectionRatio;if(k!==d){if(!N)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!qP(f,e.getBoundingClientRect())&&o(),N=!1}try{s=new IntersectionObserver(C,{..._,root:i.ownerDocument})}catch{s=new IntersectionObserver(C,_)}s.observe(e)}return o(!0),a}function HF(e,t,s,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,f=fb(e),m=i||a?[...f?Su(f):[],...Su(t)]:[];m.forEach(x=>{i&&x.addEventListener("scroll",s,{passive:!0}),a&&x.addEventListener("resize",s)});const h=f&&c?qF(f,s):null;let u=-1,p=null;o&&(p=new ResizeObserver(x=>{let[b]=x;b&&b.target===f&&p&&(p.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),s()}),f&&!d&&p.observe(f),p.observe(t));let y,v=d?Wo(e):null;d&&w();function w(){const x=Wo(e);v&&!qP(v,x)&&s(),v=x,y=requestAnimationFrame(w)}return s(),()=>{var x;m.forEach(b=>{i&&b.removeEventListener("scroll",s),a&&b.removeEventListener("resize",s)}),h==null||h(),(x=p)==null||x.disconnect(),p=null,d&&cancelAnimationFrame(y)}}const WF=gF,ZF=vF,GF=fF,KF=yF,YF=mF,wN=hF,XF=xF,QF=(e,t,s)=>{const r=new Map,i={platform:UF,...s},a={...i.platform,_c:r};return uF(e,t,{...i,platform:a})};var JF=typeof document<"u",e8=function(){},wf=JF?j.useLayoutEffect:e8;function rm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(r=s;r--!==0;)if(!rm(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),s=i.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=s;r--!==0;){const a=i[r];if(!(a==="_owner"&&e.$$typeof)&&!rm(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function HP(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function jN(e,t){const s=HP(e);return Math.round(t*s)/s}function ev(e){const t=j.useRef(e);return wf(()=>{t.current=e}),t}function t8(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:c=!0,whileElementsMounted:d,open:f}=e,[m,h]=j.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[u,p]=j.useState(r);rm(u,r)||p(r);const[y,v]=j.useState(null),[w,x]=j.useState(null),b=j.useCallback(K=>{K!==I.current&&(I.current=K,v(K))},[]),_=j.useCallback(K=>{K!==k.current&&(k.current=K,x(K))},[]),N=a||y,C=o||w,I=j.useRef(null),k=j.useRef(null),E=j.useRef(m),M=d!=null,P=ev(d),T=ev(i),A=ev(f),z=j.useCallback(()=>{if(!I.current||!k.current)return;const K={placement:t,strategy:s,middleware:u};T.current&&(K.platform=T.current),QF(I.current,k.current,K).then(U=>{const B={...U,isPositioned:A.current!==!1};O.current&&!rm(E.current,B)&&(E.current=B,eo.flushSync(()=>{h(B)}))})},[u,t,s,T,A]);wf(()=>{f===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(K=>({...K,isPositioned:!1})))},[f]);const O=j.useRef(!1);wf(()=>(O.current=!0,()=>{O.current=!1}),[]),wf(()=>{if(N&&(I.current=N),C&&(k.current=C),N&&C){if(P.current)return P.current(N,C,z);z()}},[N,C,z,P,M]);const F=j.useMemo(()=>({reference:I,floating:k,setReference:b,setFloating:_}),[b,_]),G=j.useMemo(()=>({reference:N,floating:C}),[N,C]),Y=j.useMemo(()=>{const K={position:s,left:0,top:0};if(!G.floating)return K;const U=jN(G.floating,m.x),B=jN(G.floating,m.y);return c?{...K,transform:"translate("+U+"px, "+B+"px)",...HP(G.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:U,top:B}},[s,c,G.floating,m.x,m.y]);return j.useMemo(()=>({...m,update:z,refs:F,elements:G,floatingStyles:Y}),[m,z,F,G,Y])}const n8=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:r,padding:i}=typeof e=="function"?e(s):e;return r&&t(r)?r.current!=null?wN({element:r.current,padding:i}).fn(s):{}:r?wN({element:r,padding:i}).fn(s):{}}}},s8=(e,t)=>({...WF(e),options:[e,t]}),r8=(e,t)=>({...ZF(e),options:[e,t]}),i8=(e,t)=>({...XF(e),options:[e,t]}),a8=(e,t)=>({...GF(e),options:[e,t]}),o8=(e,t)=>({...KF(e),options:[e,t]}),l8=(e,t)=>({...YF(e),options:[e,t]}),c8=(e,t)=>({...n8(e),options:[e,t]});var d8="Arrow",WP=j.forwardRef((e,t)=>{const{children:s,width:r=10,height:i=5,...a}=e;return n.jsx(Ye.svg,{...a,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});WP.displayName=d8;var u8=WP;function ip(e){const[t,s]=j.useState(void 0);return kn(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,c;if("borderBoxSize"in a){const d=a.borderBoxSize,f=Array.isArray(d)?d[0]:d;o=f.inlineSize,c=f.blockSize}else o=e.offsetWidth,c=e.offsetHeight;s({width:o,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else s(void 0)},[e]),t}var pb="Popper",[ZP,$c]=ls(pb),[h8,GP]=ZP(pb),KP=e=>{const{__scopePopper:t,children:s}=e,[r,i]=j.useState(null);return n.jsx(h8,{scope:t,anchor:r,onAnchorChange:i,children:s})};KP.displayName=pb;var YP="PopperAnchor",XP=j.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:r,...i}=e,a=GP(YP,s),o=j.useRef(null),c=ft(t,o);return j.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:n.jsx(Ye.div,{...i,ref:c})});XP.displayName=YP;var gb="PopperContent",[f8,m8]=ZP(gb),QP=j.forwardRef((e,t)=>{var H,se,Q,ie,he,te;const{__scopePopper:s,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:h="partial",hideWhenDetached:u=!1,updatePositionStrategy:p="optimized",onPlaced:y,...v}=e,w=GP(gb,s),[x,b]=j.useState(null),_=ft(t,ge=>b(ge)),[N,C]=j.useState(null),I=ip(N),k=(I==null?void 0:I.width)??0,E=(I==null?void 0:I.height)??0,M=r+(a!=="center"?"-"+a:""),P=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},T=Array.isArray(f)?f:[f],A=T.length>0,z={padding:P,boundary:T.filter(g8),altBoundary:A},{refs:O,floatingStyles:F,placement:G,isPositioned:Y,middlewareData:K}=t8({strategy:"fixed",placement:M,whileElementsMounted:(...ge)=>HF(...ge,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[s8({mainAxis:i+E,alignmentAxis:o}),d&&r8({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?i8():void 0,...z}),d&&a8({...z}),o8({...z,apply:({elements:ge,rects:Se,availableWidth:fe,availableHeight:ke})=>{const{width:xe,height:de}=Se.reference,me=ge.floating.style;me.setProperty("--radix-popper-available-width",`${fe}px`),me.setProperty("--radix-popper-available-height",`${ke}px`),me.setProperty("--radix-popper-anchor-width",`${xe}px`),me.setProperty("--radix-popper-anchor-height",`${de}px`)}}),N&&c8({element:N,padding:c}),v8({arrowWidth:k,arrowHeight:E}),u&&l8({strategy:"referenceHidden",...z})]}),[U,B]=tE(G),R=vn(y);kn(()=>{Y&&(R==null||R())},[Y,R]);const $=(H=K.arrow)==null?void 0:H.x,W=(se=K.arrow)==null?void 0:se.y,Z=((Q=K.arrow)==null?void 0:Q.centerOffset)!==0,[X,V]=j.useState();return kn(()=>{x&&V(window.getComputedStyle(x).zIndex)},[x]),n.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:Y?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(ie=K.transformOrigin)==null?void 0:ie.x,(he=K.transformOrigin)==null?void 0:he.y].join(" "),...((te=K.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(f8,{scope:s,placedSide:U,onArrowChange:C,arrowX:$,arrowY:W,shouldHideArrow:Z,children:n.jsx(Ye.div,{"data-side":U,"data-align":B,...v,ref:_,style:{...v.style,animation:Y?void 0:"none"}})})})});QP.displayName=gb;var JP="PopperArrow",p8={top:"bottom",right:"left",bottom:"top",left:"right"},eE=j.forwardRef(function(t,s){const{__scopePopper:r,...i}=t,a=m8(JP,r),o=p8[a.placedSide];return n.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:n.jsx(u8,{...i,ref:s,style:{...i.style,display:"block"}})})});eE.displayName=JP;function g8(e){return e!==null}var v8=e=>({name:"transformOrigin",options:e,fn(t){var w,x,b;const{placement:s,rects:r,middlewareData:i}=t,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,c=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[f,m]=tE(s),h={start:"0%",center:"50%",end:"100%"}[m],u=(((x=i.arrow)==null?void 0:x.x)??0)+c/2,p=(((b=i.arrow)==null?void 0:b.y)??0)+d/2;let y="",v="";return f==="bottom"?(y=o?h:`${u}px`,v=`${-d}px`):f==="top"?(y=o?h:`${u}px`,v=`${r.floating.height+d}px`):f==="right"?(y=`${-d}px`,v=o?h:`${p}px`):f==="left"&&(y=`${r.floating.width+d}px`,v=o?h:`${p}px`),{data:{x:y,y:v}}}});function tE(e){const[t,s="center"]=e.split("-");return[t,s]}var vb=KP,xb=XP,yb=QP,bb=eE,[ap,bse]=ls("Tooltip",[$c]),op=$c(),nE="TooltipProvider",x8=700,Dx="tooltip.open",[y8,wb]=ap(nE),sE=e=>{const{__scopeTooltip:t,delayDuration:s=x8,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=e,o=j.useRef(!0),c=j.useRef(!1),d=j.useRef(0);return j.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),n.jsx(y8,{scope:t,isOpenDelayedRef:o,delayDuration:s,onOpen:j.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:j.useCallback(f=>{c.current=f},[]),disableHoverableContent:i,children:a})};sE.displayName=nE;var ku="Tooltip",[b8,lp]=ap(ku),rE=e=>{const{__scopeTooltip:t,children:s,open:r,defaultOpen:i,onOpenChange:a,disableHoverableContent:o,delayDuration:c}=e,d=wb(ku,e.__scopeTooltip),f=op(t),[m,h]=j.useState(null),u=Fr(),p=j.useRef(0),y=o??d.disableHoverableContent,v=c??d.delayDuration,w=j.useRef(!1),[x,b]=zr({prop:r,defaultProp:i??!1,onChange:k=>{k?(d.onOpen(),document.dispatchEvent(new CustomEvent(Dx))):d.onClose(),a==null||a(k)},caller:ku}),_=j.useMemo(()=>x?w.current?"delayed-open":"instant-open":"closed",[x]),N=j.useCallback(()=>{window.clearTimeout(p.current),p.current=0,w.current=!1,b(!0)},[b]),C=j.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),I=j.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{w.current=!0,b(!0),p.current=0},v)},[v,b]);return j.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),n.jsx(vb,{...f,children:n.jsx(b8,{scope:t,contentId:u,open:x,stateAttribute:_,trigger:m,onTriggerChange:h,onTriggerEnter:j.useCallback(()=>{d.isOpenDelayedRef.current?I():N()},[d.isOpenDelayedRef,I,N]),onTriggerLeave:j.useCallback(()=>{y?C():(window.clearTimeout(p.current),p.current=0)},[C,y]),onOpen:N,onClose:C,disableHoverableContent:y,children:s})})};rE.displayName=ku;var Fx="TooltipTrigger",iE=j.forwardRef((e,t)=>{const{__scopeTooltip:s,...r}=e,i=lp(Fx,s),a=wb(Fx,s),o=op(s),c=j.useRef(null),d=ft(t,c,i.onTriggerChange),f=j.useRef(!1),m=j.useRef(!1),h=j.useCallback(()=>f.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),n.jsx(xb,{asChild:!0,...o,children:n.jsx(Ye.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:d,onPointerMove:Me(e.onPointerMove,u=>{u.pointerType!=="touch"&&!m.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),m.current=!0)}),onPointerLeave:Me(e.onPointerLeave,()=>{i.onTriggerLeave(),m.current=!1}),onPointerDown:Me(e.onPointerDown,()=>{i.open&&i.onClose(),f.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Me(e.onFocus,()=>{f.current||i.onOpen()}),onBlur:Me(e.onBlur,i.onClose),onClick:Me(e.onClick,i.onClose)})})});iE.displayName=Fx;var w8="TooltipPortal",[wse,j8]=ap(w8,{forceMount:void 0}),gc="TooltipContent",aE=j.forwardRef((e,t)=>{const s=j8(gc,e.__scopeTooltip),{forceMount:r=s.forceMount,side:i="top",...a}=e,o=lp(gc,e.__scopeTooltip);return n.jsx(Qn,{present:r||o.open,children:o.disableHoverableContent?n.jsx(oE,{side:i,...a,ref:t}):n.jsx(_8,{side:i,...a,ref:t})})}),_8=j.forwardRef((e,t)=>{const s=lp(gc,e.__scopeTooltip),r=wb(gc,e.__scopeTooltip),i=j.useRef(null),a=ft(t,i),[o,c]=j.useState(null),{trigger:d,onClose:f}=s,m=i.current,{onPointerInTransitChange:h}=r,u=j.useCallback(()=>{c(null),h(!1)},[h]),p=j.useCallback((y,v)=>{const w=y.currentTarget,x={x:y.clientX,y:y.clientY},b=P8(x,w.getBoundingClientRect()),_=E8(x,b),N=T8(v.getBoundingClientRect()),C=O8([..._,...N]);c(C),h(!0)},[h]);return j.useEffect(()=>()=>u(),[u]),j.useEffect(()=>{if(d&&m){const y=w=>p(w,m),v=w=>p(w,d);return d.addEventListener("pointerleave",y),m.addEventListener("pointerleave",v),()=>{d.removeEventListener("pointerleave",y),m.removeEventListener("pointerleave",v)}}},[d,m,p,u]),j.useEffect(()=>{if(o){const y=v=>{const w=v.target,x={x:v.clientX,y:v.clientY},b=(d==null?void 0:d.contains(w))||(m==null?void 0:m.contains(w)),_=!A8(x,o);b?u():_&&(u(),f())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[d,m,o,f,u]),n.jsx(oE,{...e,ref:a})}),[N8,S8]=ap(ku,{isInside:!1}),k8=AI("TooltipContent"),oE=j.forwardRef((e,t)=>{const{__scopeTooltip:s,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...c}=e,d=lp(gc,s),f=op(s),{onClose:m}=d;return j.useEffect(()=>(document.addEventListener(Dx,m),()=>document.removeEventListener(Dx,m)),[m]),j.useEffect(()=>{if(d.trigger){const h=u=>{const p=u.target;p!=null&&p.contains(d.trigger)&&m()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[d.trigger,m]),n.jsx(Lc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:m,children:n.jsxs(yb,{"data-state":d.stateAttribute,...f,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(k8,{children:r}),n.jsx(N8,{scope:s,isInside:!0,children:n.jsx(JI,{id:d.contentId,role:"tooltip",children:i||r})})]})})});aE.displayName=gc;var lE="TooltipArrow",C8=j.forwardRef((e,t)=>{const{__scopeTooltip:s,...r}=e,i=op(s);return S8(lE,s).isInside?null:n.jsx(bb,{...i,...r,ref:t})});C8.displayName=lE;function P8(e,t){const s=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(s,r,i,a)){case a:return"left";case i:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function E8(e,t,s=5){const r=[];switch(t){case"top":r.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":r.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":r.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":r.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return r}function T8(e){const{top:t,right:s,bottom:r,left:i}=e;return[{x:i,y:t},{x:s,y:t},{x:s,y:r},{x:i,y:r}]}function A8(e,t){const{x:s,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const c=t[a],d=t[o],f=c.x,m=c.y,h=d.x,u=d.y;m>r!=u>r&&s<(h-f)*(r-m)/(u-m)+f&&(i=!i)}return i}function O8(e){const t=e.slice();return t.sort((s,r)=>s.x<r.x?-1:s.x>r.x?1:s.y<r.y?-1:s.y>r.y?1:0),R8(t)}function R8(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const s=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;s.length>=2;){const a=s[s.length-1],o=s[s.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))s.pop();else break}s.push(i)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}var L8=sE,M8=rE,I8=iE,cE=aE;const D8=L8,_N=M8,NN=I8,$x=j.forwardRef(({className:e,sideOffset:t=4,...s},r)=>n.jsx(cE,{ref:r,sideOffset:t,className:We("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));$x.displayName=cE.displayName;var cp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dp=typeof window>"u"||"Deno"in globalThis;function Sr(){}function F8(e,t){return typeof e=="function"?e(t):e}function $8(e){return typeof e=="number"&&e>=0&&e!==1/0}function z8(e,t){return Math.max(e+(t||0)-Date.now(),0)}function zx(e,t){return typeof e=="function"?e(t):e}function B8(e,t){return typeof e=="function"?e(t):e}function SN(e,t){const{type:s="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:c}=e;if(o){if(r){if(t.queryHash!==jb(o,t.options))return!1}else if(!Pu(t.queryKey,o))return!1}if(s!=="all"){const d=t.isActive();if(s==="active"&&!d||s==="inactive"&&d)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||i&&i!==t.state.fetchStatus||a&&!a(t))}function kN(e,t){const{exact:s,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(s){if(Cu(t.options.mutationKey)!==Cu(a))return!1}else if(!Pu(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function jb(e,t){return((t==null?void 0:t.queryKeyHashFn)||Cu)(e)}function Cu(e){return JSON.stringify(e,(t,s)=>Bx(s)?Object.keys(s).sort().reduce((r,i)=>(r[i]=s[i],r),{}):s)}function Pu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>Pu(e[s],t[s])):!1}function dE(e,t){if(e===t)return e;const s=CN(e)&&CN(t);if(s||Bx(e)&&Bx(t)){const r=s?e:Object.keys(e),i=r.length,a=s?t:Object.keys(t),o=a.length,c=s?[]:{},d=new Set(r);let f=0;for(let m=0;m<o;m++){const h=s?m:a[m];(!s&&d.has(h)||s)&&e[h]===void 0&&t[h]===void 0?(c[h]=void 0,f++):(c[h]=dE(e[h],t[h]),c[h]===e[h]&&e[h]!==void 0&&f++)}return i===o&&f===i?e:c}return t}function CN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Bx(e){if(!PN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!PN(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function PN(e){return Object.prototype.toString.call(e)==="[object Object]"}function V8(e){return new Promise(t=>{setTimeout(t,e)})}function U8(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?dE(e,t):t}function q8(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function H8(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var _b=Symbol();function uE(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===_b?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var So,ba,Jl,b2,W8=(b2=class extends cp{constructor(){super();Lt(this,So);Lt(this,ba);Lt(this,Jl);mt(this,Jl,t=>{if(!dp&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){Ne(this,ba)||this.setEventListener(Ne(this,Jl))}onUnsubscribe(){var t;this.hasListeners()||((t=Ne(this,ba))==null||t.call(this),mt(this,ba,void 0))}setEventListener(t){var s;mt(this,Jl,t),(s=Ne(this,ba))==null||s.call(this),mt(this,ba,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Ne(this,So)!==t&&(mt(this,So,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof Ne(this,So)=="boolean"?Ne(this,So):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},So=new WeakMap,ba=new WeakMap,Jl=new WeakMap,b2),hE=new W8,ec,wa,tc,w2,Z8=(w2=class extends cp{constructor(){super();Lt(this,ec,!0);Lt(this,wa);Lt(this,tc);mt(this,tc,t=>{if(!dp&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){Ne(this,wa)||this.setEventListener(Ne(this,tc))}onUnsubscribe(){var t;this.hasListeners()||((t=Ne(this,wa))==null||t.call(this),mt(this,wa,void 0))}setEventListener(t){var s;mt(this,tc,t),(s=Ne(this,wa))==null||s.call(this),mt(this,wa,t(this.setOnline.bind(this)))}setOnline(t){Ne(this,ec)!==t&&(mt(this,ec,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Ne(this,ec)}},ec=new WeakMap,wa=new WeakMap,tc=new WeakMap,w2),im=new Z8;function G8(){let e,t;const s=new Promise((i,a)=>{e=i,t=a});s.status="pending",s.catch(()=>{});function r(i){Object.assign(s,i),delete s.resolve,delete s.reject}return s.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},s.reject=i=>{r({status:"rejected",reason:i}),t(i)},s}function K8(e){return Math.min(1e3*2**e,3e4)}function fE(e){return(e??"online")==="online"?im.isOnline():!0}var mE=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function tv(e){return e instanceof mE}function pE(e){let t=!1,s=0,r=!1,i;const a=G8(),o=v=>{var w;r||(u(new mE(v)),(w=e.abort)==null||w.call(e))},c=()=>{t=!0},d=()=>{t=!1},f=()=>hE.isFocused()&&(e.networkMode==="always"||im.isOnline())&&e.canRun(),m=()=>fE(e.networkMode)&&e.canRun(),h=v=>{var w;r||(r=!0,(w=e.onSuccess)==null||w.call(e,v),i==null||i(),a.resolve(v))},u=v=>{var w;r||(r=!0,(w=e.onError)==null||w.call(e,v),i==null||i(),a.reject(v))},p=()=>new Promise(v=>{var w;i=x=>{(r||f())&&v(x)},(w=e.onPause)==null||w.call(e)}).then(()=>{var v;i=void 0,r||(v=e.onContinue)==null||v.call(e)}),y=()=>{if(r)return;let v;const w=s===0?e.initialPromise:void 0;try{v=w??e.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(h).catch(x=>{var I;if(r)return;const b=e.retry??(dp?0:3),_=e.retryDelay??K8,N=typeof _=="function"?_(s,x):_,C=b===!0||typeof b=="number"&&s<b||typeof b=="function"&&b(s,x);if(t||!C){u(x);return}s++,(I=e.onFail)==null||I.call(e,s,x),V8(N).then(()=>f()?void 0:p()).then(()=>{t?u(x):y()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:c,continueRetry:d,canStart:m,start:()=>(m()?y():p().then(y),a)}}var Y8=e=>setTimeout(e,0);function X8(){let e=[],t=0,s=c=>{c()},r=c=>{c()},i=Y8;const a=c=>{t?e.push(c):i(()=>{s(c)})},o=()=>{const c=e;e=[],c.length&&i(()=>{r(()=>{c.forEach(d=>{s(d)})})})};return{batch:c=>{let d;t++;try{d=c()}finally{t--,t||o()}return d},batchCalls:c=>(...d)=>{a(()=>{c(...d)})},schedule:a,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var fs=X8(),ko,j2,gE=(j2=class{constructor(){Lt(this,ko)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$8(this.gcTime)&&mt(this,ko,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(dp?1/0:5*60*1e3))}clearGcTimeout(){Ne(this,ko)&&(clearTimeout(Ne(this,ko)),mt(this,ko,void 0))}},ko=new WeakMap,j2),nc,Co,tr,Po,ns,zu,Eo,kr,Mi,_2,Q8=(_2=class extends gE{constructor(t){super();Lt(this,kr);Lt(this,nc);Lt(this,Co);Lt(this,tr);Lt(this,Po);Lt(this,ns);Lt(this,zu);Lt(this,Eo);mt(this,Eo,!1),mt(this,zu,t.defaultOptions),this.setOptions(t.options),this.observers=[],mt(this,Po,t.client),mt(this,tr,Ne(this,Po).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,mt(this,nc,e$(this.options)),this.state=t.state??Ne(this,nc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ne(this,ns))==null?void 0:t.promise}setOptions(t){this.options={...Ne(this,zu),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ne(this,tr).remove(this)}setData(t,s){const r=U8(this.state.data,t,this.options);return Jn(this,kr,Mi).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(t,s){Jn(this,kr,Mi).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var r,i;const s=(r=Ne(this,ns))==null?void 0:r.promise;return(i=Ne(this,ns))==null||i.cancel(t),s?s.then(Sr).catch(Sr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ne(this,nc))}isActive(){return this.observers.some(t=>B8(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_b||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>zx(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!z8(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=Ne(this,ns))==null||s.continue()}onOnline(){var s;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=Ne(this,ns))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ne(this,tr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(Ne(this,ns)&&(Ne(this,Eo)?Ne(this,ns).cancel({revert:!0}):Ne(this,ns).cancelRetry()),this.scheduleGc()),Ne(this,tr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Jn(this,kr,Mi).call(this,{type:"invalidate"})}fetch(t,s){var f,m,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(Ne(this,ns))return Ne(this,ns).continueRetry(),Ne(this,ns).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(p=>p.options.queryFn);u&&this.setOptions(u.options)}const r=new AbortController,i=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(mt(this,Eo,!0),r.signal)})},a=()=>{const u=uE(this.options,s),y=(()=>{const v={client:Ne(this,Po),queryKey:this.queryKey,meta:this.meta};return i(v),v})();return mt(this,Eo,!1),this.options.persister?this.options.persister(u,y,this):u(y)},c=(()=>{const u={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:Ne(this,Po),state:this.state,fetchFn:a};return i(u),u})();(f=this.options.behavior)==null||f.onFetch(c,this),mt(this,Co,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=c.fetchOptions)==null?void 0:m.meta))&&Jn(this,kr,Mi).call(this,{type:"fetch",meta:(h=c.fetchOptions)==null?void 0:h.meta});const d=u=>{var p,y,v,w;tv(u)&&u.silent||Jn(this,kr,Mi).call(this,{type:"error",error:u}),tv(u)||((y=(p=Ne(this,tr).config).onError)==null||y.call(p,u,this),(w=(v=Ne(this,tr).config).onSettled)==null||w.call(v,this.state.data,u,this)),this.scheduleGc()};return mt(this,ns,pE({initialPromise:s==null?void 0:s.initialPromise,fn:c.fetchFn,abort:r.abort.bind(r),onSuccess:u=>{var p,y,v,w;if(u===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(x){d(x);return}(y=(p=Ne(this,tr).config).onSuccess)==null||y.call(p,u,this),(w=(v=Ne(this,tr).config).onSettled)==null||w.call(v,u,this.state.error,this),this.scheduleGc()},onError:d,onFail:(u,p)=>{Jn(this,kr,Mi).call(this,{type:"failed",failureCount:u,error:p})},onPause:()=>{Jn(this,kr,Mi).call(this,{type:"pause"})},onContinue:()=>{Jn(this,kr,Mi).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),Ne(this,ns).start()}},nc=new WeakMap,Co=new WeakMap,tr=new WeakMap,Po=new WeakMap,ns=new WeakMap,zu=new WeakMap,Eo=new WeakMap,kr=new WeakSet,Mi=function(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...J8(r.data,this.options),fetchMeta:t.meta??null};case"success":return mt(this,Co,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return tv(i)&&i.revert&&Ne(this,Co)?{...Ne(this,Co),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),fs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Ne(this,tr).notify({query:this,type:"updated",action:t})})},_2);function J8(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fE(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function e$(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var ti,N2,t$=(N2=class extends cp{constructor(t={}){super();Lt(this,ti);this.config=t,mt(this,ti,new Map)}build(t,s,r){const i=s.queryKey,a=s.queryHash??jb(i,s);let o=this.get(a);return o||(o=new Q8({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){Ne(this,ti).has(t.queryHash)||(Ne(this,ti).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=Ne(this,ti).get(t.queryHash);s&&(t.destroy(),s===t&&Ne(this,ti).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){fs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ne(this,ti).get(t)}getAll(){return[...Ne(this,ti).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>SN(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>SN(t,r)):s}notify(t){fs.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){fs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){fs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ti=new WeakMap,N2),ni,ds,To,si,ha,S2,n$=(S2=class extends gE{constructor(t){super();Lt(this,si);Lt(this,ni);Lt(this,ds);Lt(this,To);this.mutationId=t.mutationId,mt(this,ds,t.mutationCache),mt(this,ni,[]),this.state=t.state||s$(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ne(this,ni).includes(t)||(Ne(this,ni).push(t),this.clearGcTimeout(),Ne(this,ds).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){mt(this,ni,Ne(this,ni).filter(s=>s!==t)),this.scheduleGc(),Ne(this,ds).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ne(this,ni).length||(this.state.status==="pending"?this.scheduleGc():Ne(this,ds).remove(this))}continue(){var t;return((t=Ne(this,To))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,c,d,f,m,h,u,p,y,v,w,x,b,_,N,C,I,k,E;const s=()=>{Jn(this,si,ha).call(this,{type:"continue"})};mt(this,To,pE({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,P)=>{Jn(this,si,ha).call(this,{type:"failed",failureCount:M,error:P})},onPause:()=>{Jn(this,si,ha).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ne(this,ds).canRun(this)}));const r=this.state.status==="pending",i=!Ne(this,To).canStart();try{if(r)s();else{Jn(this,si,ha).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(a=Ne(this,ds).config).onMutate)==null?void 0:o.call(a,t,this));const P=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t));P!==this.state.context&&Jn(this,si,ha).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const M=await Ne(this,To).start();return await((m=(f=Ne(this,ds).config).onSuccess)==null?void 0:m.call(f,M,t,this.state.context,this)),await((u=(h=this.options).onSuccess)==null?void 0:u.call(h,M,t,this.state.context)),await((y=(p=Ne(this,ds).config).onSettled)==null?void 0:y.call(p,M,null,this.state.variables,this.state.context,this)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,M,null,t,this.state.context)),Jn(this,si,ha).call(this,{type:"success",data:M}),M}catch(M){try{throw await((b=(x=Ne(this,ds).config).onError)==null?void 0:b.call(x,M,t,this.state.context,this)),await((N=(_=this.options).onError)==null?void 0:N.call(_,M,t,this.state.context)),await((I=(C=Ne(this,ds).config).onSettled)==null?void 0:I.call(C,void 0,M,this.state.variables,this.state.context,this)),await((E=(k=this.options).onSettled)==null?void 0:E.call(k,void 0,M,t,this.state.context)),M}finally{Jn(this,si,ha).call(this,{type:"error",error:M})}}finally{Ne(this,ds).runNext(this)}}},ni=new WeakMap,ds=new WeakMap,To=new WeakMap,si=new WeakSet,ha=function(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),fs.batch(()=>{Ne(this,ni).forEach(r=>{r.onMutationUpdate(t)}),Ne(this,ds).notify({mutation:this,type:"updated",action:t})})},S2);function s$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zi,Cr,Bu,k2,r$=(k2=class extends cp{constructor(t={}){super();Lt(this,zi);Lt(this,Cr);Lt(this,Bu);this.config=t,mt(this,zi,new Set),mt(this,Cr,new Map),mt(this,Bu,0)}build(t,s,r){const i=new n$({mutationCache:this,mutationId:++Ch(this,Bu)._,options:t.defaultMutationOptions(s),state:r});return this.add(i),i}add(t){Ne(this,zi).add(t);const s=Kh(t);if(typeof s=="string"){const r=Ne(this,Cr).get(s);r?r.push(t):Ne(this,Cr).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ne(this,zi).delete(t)){const s=Kh(t);if(typeof s=="string"){const r=Ne(this,Cr).get(s);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&Ne(this,Cr).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=Kh(t);if(typeof s=="string"){const r=Ne(this,Cr).get(s),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const s=Kh(t);if(typeof s=="string"){const i=(r=Ne(this,Cr).get(s))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){fs.batch(()=>{Ne(this,zi).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ne(this,zi).clear(),Ne(this,Cr).clear()})}getAll(){return Array.from(Ne(this,zi))}find(t){const s={exact:!0,...t};return this.getAll().find(r=>kN(s,r))}findAll(t={}){return this.getAll().filter(s=>kN(t,s))}notify(t){fs.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return fs.batch(()=>Promise.all(t.map(s=>s.continue().catch(Sr))))}},zi=new WeakMap,Cr=new WeakMap,Bu=new WeakMap,k2);function Kh(e){var t;return(t=e.options.scope)==null?void 0:t.id}function EN(e){return{onFetch:(t,s)=>{var m,h,u,p,y;const r=t.options,i=(u=(h=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:h.fetchMore)==null?void 0:u.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let c={pages:[],pageParams:[]},d=0;const f=async()=>{let v=!1;const w=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},x=uE(t.options,t.fetchOptions),b=async(_,N,C)=>{if(v)return Promise.reject();if(N==null&&_.pages.length)return Promise.resolve(_);const k=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:N,direction:C?"backward":"forward",meta:t.options.meta};return w(T),T})(),E=await x(k),{maxPages:M}=t.options,P=C?H8:q8;return{pages:P(_.pages,E,M),pageParams:P(_.pageParams,N,M)}};if(i&&a.length){const _=i==="backward",N=_?i$:TN,C={pages:a,pageParams:o},I=N(r,C);c=await b(C,I,_)}else{const _=e??a.length;do{const N=d===0?o[0]??r.initialPageParam:TN(r,c);if(d>0&&N==null)break;c=await b(c,N),d++}while(d<_)}return c};t.options.persister?t.fetchFn=()=>{var v,w;return(w=(v=t.options).persister)==null?void 0:w.call(v,f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=f}}}function TN(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function i$(e,{pages:t,pageParams:s}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,s[0],s):void 0}var fn,ja,_a,sc,rc,Na,ic,ac,C2,a$=(C2=class{constructor(e={}){Lt(this,fn);Lt(this,ja);Lt(this,_a);Lt(this,sc);Lt(this,rc);Lt(this,Na);Lt(this,ic);Lt(this,ac);mt(this,fn,e.queryCache||new t$),mt(this,ja,e.mutationCache||new r$),mt(this,_a,e.defaultOptions||{}),mt(this,sc,new Map),mt(this,rc,new Map),mt(this,Na,0)}mount(){Ch(this,Na)._++,Ne(this,Na)===1&&(mt(this,ic,hE.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ne(this,fn).onFocus())})),mt(this,ac,im.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ne(this,fn).onOnline())})))}unmount(){var e,t;Ch(this,Na)._--,Ne(this,Na)===0&&((e=Ne(this,ic))==null||e.call(this),mt(this,ic,void 0),(t=Ne(this,ac))==null||t.call(this),mt(this,ac,void 0))}isFetching(e){return Ne(this,fn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ne(this,ja).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=Ne(this,fn).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=Ne(this,fn).build(this,t),r=s.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(zx(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Ne(this,fn).findAll(e).map(({queryKey:t,state:s})=>{const r=s.data;return[t,r]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),i=Ne(this,fn).get(r.queryHash),a=i==null?void 0:i.state.data,o=F8(t,a);if(o!==void 0)return Ne(this,fn).build(this,r).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return fs.batch(()=>Ne(this,fn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=Ne(this,fn).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=Ne(this,fn);fs.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=Ne(this,fn);return fs.batch(()=>(s.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},r=fs.batch(()=>Ne(this,fn).findAll(e).map(i=>i.cancel(s)));return Promise.all(r).then(Sr).catch(Sr)}invalidateQueries(e,t={}){return fs.batch(()=>(Ne(this,fn).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},r=fs.batch(()=>Ne(this,fn).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,s);return s.throwOnError||(a=a.catch(Sr)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Sr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=Ne(this,fn).build(this,t);return s.isStaleByTime(zx(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Sr).catch(Sr)}fetchInfiniteQuery(e){return e.behavior=EN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Sr).catch(Sr)}ensureInfiniteQueryData(e){return e.behavior=EN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return im.isOnline()?Ne(this,ja).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ne(this,fn)}getMutationCache(){return Ne(this,ja)}getDefaultOptions(){return Ne(this,_a)}setDefaultOptions(e){mt(this,_a,e)}setQueryDefaults(e,t){Ne(this,sc).set(Cu(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ne(this,sc).values()],s={};return t.forEach(r=>{Pu(e,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(e,t){Ne(this,rc).set(Cu(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ne(this,rc).values()],s={};return t.forEach(r=>{Pu(e,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ne(this,_a).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=jb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===_b&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ne(this,_a).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ne(this,fn).clear(),Ne(this,ja).clear()}},fn=new WeakMap,ja=new WeakMap,_a=new WeakMap,sc=new WeakMap,rc=new WeakMap,Na=new WeakMap,ic=new WeakMap,ac=new WeakMap,C2),o$=j.createContext(void 0),l$=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(o$.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eu(){return Eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Eu.apply(this,arguments)}var Ca;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ca||(Ca={}));const AN="popstate";function c$(e){e===void 0&&(e={});function t(r,i){let{pathname:a,search:o,hash:c}=r.location;return Vx("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(r,i){return typeof i=="string"?i:xE(i)}return u$(t,s,null,e)}function Fn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function d$(){return Math.random().toString(36).substr(2,8)}function ON(e,t){return{usr:e.state,key:e.key,idx:t}}function Vx(e,t,s,r){return s===void 0&&(s=null),Eu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?zc(t):t,{state:s,key:t&&t.key||r||d$()})}function xE(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function zc(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function u$(e,t,s,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c=Ca.Pop,d=null,f=m();f==null&&(f=0,o.replaceState(Eu({},o.state,{idx:f}),""));function m(){return(o.state||{idx:null}).idx}function h(){c=Ca.Pop;let w=m(),x=w==null?null:w-f;f=w,d&&d({action:c,location:v.location,delta:x})}function u(w,x){c=Ca.Push;let b=Vx(v.location,w,x);f=m()+1;let _=ON(b,f),N=v.createHref(b);try{o.pushState(_,"",N)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(N)}a&&d&&d({action:c,location:v.location,delta:1})}function p(w,x){c=Ca.Replace;let b=Vx(v.location,w,x);f=m();let _=ON(b,f),N=v.createHref(b);o.replaceState(_,"",N),a&&d&&d({action:c,location:v.location,delta:0})}function y(w){let x=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof w=="string"?w:xE(w);return b=b.replace(/ $/,"%20"),Fn(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let v={get action(){return c},get location(){return e(i,o)},listen(w){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(AN,h),d=w,()=>{i.removeEventListener(AN,h),d=null}},createHref(w){return t(i,w)},createURL:y,encodeLocation(w){let x=y(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:u,replace:p,go(w){return o.go(w)}};return v}var RN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(RN||(RN={}));function h$(e,t,s){return s===void 0&&(s="/"),f$(e,t,s,!1)}function f$(e,t,s,r){let i=typeof t=="string"?zc(t):t,a=wE(i.pathname||"/",s);if(a==null)return null;let o=yE(e);m$(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let f=S$(a);c=_$(o[d],f,r)}return c}function yE(e,t,s,r){t===void 0&&(t=[]),s===void 0&&(s=[]),r===void 0&&(r="");let i=(a,o,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};d.relativePath.startsWith("/")&&(Fn(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let f=Mo([r,d.relativePath]),m=s.concat(d);a.children&&a.children.length>0&&(Fn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),yE(a.children,t,m,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:w$(f,a.index),routesMeta:m})};return e.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let d of bE(a.path))i(a,o,d)}),t}function bE(e){let t=e.split("/");if(t.length===0)return[];let[s,...r]=t,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=bE(r.join("/")),c=[];return c.push(...o.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function m$(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:j$(t.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const p$=/^:[\w-]+$/,g$=3,v$=2,x$=1,y$=10,b$=-2,LN=e=>e==="*";function w$(e,t){let s=e.split("/"),r=s.length;return s.some(LN)&&(r+=b$),t&&(r+=v$),s.filter(i=>!LN(i)).reduce((i,a)=>i+(p$.test(a)?g$:a===""?x$:y$),r)}function j$(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function _$(e,t,s){let{routesMeta:r}=e,i={},a="/",o=[];for(let c=0;c<r.length;++c){let d=r[c],f=c===r.length-1,m=a==="/"?t:t.slice(a.length)||"/",h=MN({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),u=d.route;if(!h&&f&&s&&!r[r.length-1].route.index&&(h=MN({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Mo([a,h.pathname]),pathnameBase:A$(Mo([a,h.pathnameBase])),route:u}),h.pathnameBase!=="/"&&(a=Mo([a,h.pathnameBase]))}return o}function MN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=N$(e.path,e.caseSensitive,e.end),i=t.match(s);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,m,h)=>{let{paramName:u,isOptional:p}=m;if(u==="*"){let v=c[h]||"";o=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const y=c[h];return p&&!y?f[u]=void 0:f[u]=(y||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:e}}function N$(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),vE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function S$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wE(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&r!=="/"?null:e.slice(s)||"/"}function k$(e,t){t===void 0&&(t="/");let{pathname:s,search:r="",hash:i=""}=typeof e=="string"?zc(e):e;return{pathname:s?s.startsWith("/")?s:C$(s,t):t,search:O$(r),hash:R$(i)}}function C$(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function nv(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function P$(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function E$(e,t){let s=P$(e);return t?s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function T$(e,t,s,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=zc(e):(i=Eu({},e),Fn(!i.pathname||!i.pathname.includes("?"),nv("?","pathname","search",i)),Fn(!i.pathname||!i.pathname.includes("#"),nv("#","pathname","hash",i)),Fn(!i.search||!i.search.includes("#"),nv("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=s;else{let h=t.length-1;if(!r&&o.startsWith("..")){let u=o.split("/");for(;u[0]==="..";)u.shift(),h-=1;i.pathname=u.join("/")}c=h>=0?t[h]:"/"}let d=k$(i,c),f=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}const Mo=e=>e.join("/").replace(/\/\/+/g,"/"),A$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,R$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function L$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const jE=["post","put","patch","delete"];new Set(jE);const M$=["get",...jE];new Set(M$);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tu(){return Tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Tu.apply(this,arguments)}const Nb=j.createContext(null),I$=j.createContext(null),up=j.createContext(null),hp=j.createContext(null),el=j.createContext({outlet:null,matches:[],isDataRoute:!1}),_E=j.createContext(null);function fp(){return j.useContext(hp)!=null}function fr(){return fp()||Fn(!1),j.useContext(hp).location}function NE(e){j.useContext(up).static||j.useLayoutEffect(e)}function st(){let{isDataRoute:e}=j.useContext(el);return e?K$():D$()}function D$(){fp()||Fn(!1);let e=j.useContext(Nb),{basename:t,future:s,navigator:r}=j.useContext(up),{matches:i}=j.useContext(el),{pathname:a}=fr(),o=JSON.stringify(E$(i,s.v7_relativeSplatPath)),c=j.useRef(!1);return NE(()=>{c.current=!0}),j.useCallback(function(f,m){if(m===void 0&&(m={}),!c.current)return;if(typeof f=="number"){r.go(f);return}let h=T$(f,JSON.parse(o),a,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Mo([t,h.pathname])),(m.replace?r.replace:r.push)(h,m.state,m)},[t,r,o,a,e])}function mp(){let{matches:e}=j.useContext(el),t=e[e.length-1];return t?t.params:{}}function F$(e,t){return $$(e,t)}function $$(e,t,s,r){fp()||Fn(!1);let{navigator:i}=j.useContext(up),{matches:a}=j.useContext(el),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let f=fr(),m;if(t){var h;let w=typeof t=="string"?zc(t):t;d==="/"||(h=w.pathname)!=null&&h.startsWith(d)||Fn(!1),m=w}else m=f;let u=m.pathname||"/",p=u;if(d!=="/"){let w=d.replace(/^\//,"").split("/");p="/"+u.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=h$(e,{pathname:p}),v=q$(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Mo([d,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Mo([d,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,s,r);return t&&v?j.createElement(hp.Provider,{value:{location:Tu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Ca.Pop}},v):v}function z$(){let e=G$(),t=L$(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),s?j.createElement("pre",{style:i},s):null,null)}const B$=j.createElement(z$,null);class V$ extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?j.createElement(el.Provider,{value:this.props.routeContext},j.createElement(_E.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function U$(e){let{routeContext:t,match:s,children:r}=e,i=j.useContext(Nb);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),j.createElement(el.Provider,{value:t},r)}function q$(e,t,s,r){var i;if(t===void 0&&(t=[]),s===void 0&&(s=null),r===void 0&&(r=null),e==null){var a;if(!s)return null;if(s.errors)e=s.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,c=(i=s)==null?void 0:i.errors;if(c!=null){let m=o.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);m>=0||Fn(!1),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,f=-1;if(s&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let h=o[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(f=m),h.route.id){let{loaderData:u,errors:p}=s,y=h.route.loader&&u[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((m,h,u)=>{let p,y=!1,v=null,w=null;s&&(p=c&&h.route.id?c[h.route.id]:void 0,v=h.route.errorElement||B$,d&&(f<0&&u===0?(y=!0,w=null):f===u&&(y=!0,w=h.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,u+1)),b=()=>{let _;return p?_=v:y?_=w:h.route.Component?_=j.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=m,j.createElement(U$,{match:h,routeContext:{outlet:m,matches:x,isDataRoute:s!=null},children:_})};return s&&(h.route.ErrorBoundary||h.route.errorElement||u===0)?j.createElement(V$,{location:s.location,revalidation:s.revalidation,component:v,error:p,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var SE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(SE||{}),am=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(am||{});function H$(e){let t=j.useContext(Nb);return t||Fn(!1),t}function W$(e){let t=j.useContext(I$);return t||Fn(!1),t}function Z$(e){let t=j.useContext(el);return t||Fn(!1),t}function kE(e){let t=Z$(),s=t.matches[t.matches.length-1];return s.route.id||Fn(!1),s.route.id}function G$(){var e;let t=j.useContext(_E),s=W$(am.UseRouteError),r=kE(am.UseRouteError);return t!==void 0?t:(e=s.errors)==null?void 0:e[r]}function K$(){let{router:e}=H$(SE.UseNavigateStable),t=kE(am.UseNavigateStable),s=j.useRef(!1);return NE(()=>{s.current=!0}),j.useCallback(function(i,a){a===void 0&&(a={}),s.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Tu({fromRouteId:t},a)))},[e,t])}function Y$(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function tt(e){Fn(!1)}function X$(e){let{basename:t="/",children:s=null,location:r,navigationType:i=Ca.Pop,navigator:a,static:o=!1,future:c}=e;fp()&&Fn(!1);let d=t.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:d,navigator:a,static:o,future:Tu({v7_relativeSplatPath:!1},c)}),[d,c,a,o]);typeof r=="string"&&(r=zc(r));let{pathname:m="/",search:h="",hash:u="",state:p=null,key:y="default"}=r,v=j.useMemo(()=>{let w=wE(m,d);return w==null?null:{location:{pathname:w,search:h,hash:u,state:p,key:y},navigationType:i}},[d,m,h,u,p,y,i]);return v==null?null:j.createElement(up.Provider,{value:f},j.createElement(hp.Provider,{children:s,value:v}))}function Q$(e){let{children:t,location:s}=e;return F$(Ux(t),s)}new Promise(()=>{});function Ux(e,t){t===void 0&&(t=[]);let s=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let a=[...t,i];if(r.type===j.Fragment){s.push.apply(s,Ux(r.props.children,a));return}r.type!==tt&&Fn(!1),!r.props.index||!r.props.children||Fn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ux(r.props.children,a)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qx(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let r=e[s];return t.concat(Array.isArray(r)?r.map(i=>[s,i]):[[s,r]])},[]))}function J$(e,t){let s=qx(e);return t&&t.forEach((r,i)=>{s.has(i)||t.getAll(i).forEach(a=>{s.append(i,a)})}),s}const ez="6";try{window.__reactRouterVersion=ez}catch{}const tz="startTransition",IN=a0[tz];function nz(e){let{basename:t,children:s,future:r,window:i}=e,a=j.useRef();a.current==null&&(a.current=c$({window:i,v5Compat:!0}));let o=a.current,[c,d]=j.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},m=j.useCallback(h=>{f&&IN?IN(()=>d(h)):d(h)},[d,f]);return j.useLayoutEffect(()=>o.listen(m),[o,m]),j.useEffect(()=>Y$(r),[r]),j.createElement(X$,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:o,future:r})}var DN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DN||(DN={}));var FN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(FN||(FN={}));function Sb(e){let t=j.useRef(qx(e)),s=j.useRef(!1),r=fr(),i=j.useMemo(()=>J$(r.search,s.current?null:t.current),[r.search]),a=st(),o=j.useCallback((c,d)=>{const f=qx(typeof c=="function"?c(i):c);s.current=!0,a("?"+f,d)},[a,i]);return[i,o]}const sz="modulepreload",rz=function(e){return"/"+e},$N={},Xe=function(t,s,r){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(s.map(d=>{if(d=rz(d),d in $N)return;$N[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":sz,f||(h.as="script"),h.crossOrigin="",h.href=d,c&&h.setAttribute("nonce",c),document.head.appendChild(h),f)return new Promise((u,p)=>{h.addEventListener("load",u),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var vc;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(vc||(vc={}));class Kl extends Error{constructor(t,s,r){super(t),this.message=t,this.code=s,this.data=r}}const iz=e=>{var t,s;return e!=null&&e.androidBridge?"android":!((s=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||s===void 0)&&s.bridge?"ios":"web"},az=e=>{const t=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},r=s.Plugins=s.Plugins||{},i=()=>t!==null?t.name:iz(e),a=()=>i()!=="web",o=h=>{const u=f.get(h);return!!(u!=null&&u.platforms.has(i())||c(h))},c=h=>{var u;return(u=s.PluginHeaders)===null||u===void 0?void 0:u.find(p=>p.name===h)},d=h=>e.console.error(h),f=new Map,m=(h,u={})=>{const p=f.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const y=i(),v=c(h);let w;const x=async()=>(!w&&y in u?w=typeof u[y]=="function"?w=await u[y]():w=u[y]:t!==null&&!w&&"web"in u&&(w=typeof u.web=="function"?w=await u.web():w=u.web),w),b=(E,M)=>{var P,T;if(v){const A=v==null?void 0:v.methods.find(z=>M===z.name);if(A)return A.rtype==="promise"?z=>s.nativePromise(h,M.toString(),z):(z,O)=>s.nativeCallback(h,M.toString(),z,O);if(E)return(P=E[M])===null||P===void 0?void 0:P.bind(E)}else{if(E)return(T=E[M])===null||T===void 0?void 0:T.bind(E);throw new Kl(`"${h}" plugin is not implemented on ${y}`,vc.Unimplemented)}},_=E=>{let M;const P=(...T)=>{const A=x().then(z=>{const O=b(z,E);if(O){const F=O(...T);return M=F==null?void 0:F.remove,F}else throw new Kl(`"${h}.${E}()" is not implemented on ${y}`,vc.Unimplemented)});return E==="addListener"&&(A.remove=async()=>M()),A};return P.toString=()=>`${E.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:E,writable:!1,configurable:!1}),P},N=_("addListener"),C=_("removeListener"),I=(E,M)=>{const P=N({eventName:E},M),T=async()=>{const z=await P;C({eventName:E,callbackId:z},M)},A=new Promise(z=>P.then(()=>z({remove:T})));return A.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await T()},A},k=new Proxy({},{get(E,M){switch(M){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?I:N;case"removeListener":return C;default:return _(M)}}});return r[h]=k,f.set(h,{name:h,proxy:k,platforms:new Set([...Object.keys(u),...v?[y]:[]])}),k};return s.convertFileSrc||(s.convertFileSrc=h=>h),s.getPlatform=i,s.handleError=d,s.isNativePlatform=a,s.isPluginAvailable=o,s.registerPlugin=m,s.Exception=Kl,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s},oz=e=>e.Capacitor=az(e),vt=oz(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}),no=vt.registerPlugin;class kb{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,s){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(s);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,s);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,s,r){const i=this.listeners[t];if(!i){if(r){let a=this.retainedEventArguments[t];a||(a=[]),a.push(s),this.retainedEventArguments[t]=a}return}i.forEach(a=>a(s))}hasListeners(t){var s;return!!(!((s=this.listeners[t])===null||s===void 0)&&s.length)}registerWindowListener(t,s){this.windowListeners[s]={registered:!1,windowEventName:t,pluginEventName:s,handler:r=>{this.notifyListeners(s,r)}}}unimplemented(t="not implemented"){return new vt.Exception(t,vc.Unimplemented)}unavailable(t="not available"){return new vt.Exception(t,vc.Unavailable)}async removeListener(t,s){const r=this.listeners[t];if(!r)return;const i=r.indexOf(s);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const s=this.retainedEventArguments[t];s&&(delete this.retainedEventArguments[t],s.forEach(r=>{this.notifyListeners(t,r)}))}}const zN=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),BN=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class lz extends kb{async getCookies(){const t=document.cookie,s={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[i,a]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=BN(i).trim(),a=BN(a).trim(),s[i]=a}),s}async setCookie(t){try{const s=zN(t.key),r=zN(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${s}=${r||""}${i}; path=${a}; ${o};`}catch(s){return Promise.reject(s)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(s){return Promise.reject(s)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const s of t)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}no("CapacitorCookies",{web:()=>new lz});const cz=async e=>new Promise((t,s)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>s(i),r.readAsDataURL(e)}),dz=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,a,o)=>(i[a]=e[t[o]],i),{})},uz=(e,t=!0)=>e?Object.entries(e).reduce((r,i)=>{const[a,o]=i;let c,d;return Array.isArray(o)?(d="",o.forEach(f=>{c=t?encodeURIComponent(f):f,d+=`${a}=${c}&`}),d.slice(0,-1)):(c=t?encodeURIComponent(o):o,d=`${a}=${c}`),`${r}&${d}`},"").substr(1):null,hz=(e,t={})=>{const s=Object.assign({method:e.method||"GET",headers:e.headers},t),i=dz(e.headers)["content-type"]||"";if(typeof e.data=="string")s.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[o,c]of Object.entries(e.data||{}))a.set(o,c);s.body=a.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const a=new FormData;if(e.data instanceof FormData)e.data.forEach((c,d)=>{a.append(d,c)});else for(const c of Object.keys(e.data))a.append(c,e.data[c]);s.body=a;const o=new Headers(s.headers);o.delete("content-type"),s.headers=o}else(i.includes("application/json")||typeof e.data=="object")&&(s.body=JSON.stringify(e.data));return s};class fz extends kb{async request(t){const s=hz(t,t.webFetchExtra),r=uz(t.params,t.shouldEncodeUrlParams),i=r?`${t.url}?${r}`:t.url,a=await fetch(i,s),o=a.headers.get("content-type")||"";let{responseType:c="text"}=a.ok?t:{};o.includes("application/json")&&(c="json");let d,f;switch(c){case"arraybuffer":case"blob":f=await a.blob(),d=await cz(f);break;case"json":d=await a.json();break;case"document":case"text":default:d=await a.text()}const m={};return a.headers.forEach((h,u)=>{m[u]=h}),{data:d,headers:m,status:a.status,url:a.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}no("CapacitorHttp",{web:()=>new fz});function mz(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,s){return new Proxy({},{get(r,i){return(a,o,c)=>{const d=e.Capacitor.Plugins[s];if(d===void 0){c(new Error(`Capacitor plugin ${s} not found`));return}if(typeof d[i]!="function"){c(new Error(`Method ${i} not found in Capacitor plugin ${s}`));return}(async()=>{try{const f=await d[i](a);o(f)}catch(f){c(f)}})()}}})}})}function pz(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,s){return e.cordova.plugins[s]}})}function gz(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?mz(window):window.cordova!==void 0&&pz(window))}const sv=no("Geolocation",{web:()=>Xe(()=>import("./web-Dw0PA_yd.js"),[]).then(e=>new e.GeolocationWeb)});gz();var Ol;(function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"})(Ol||(Ol={}));var Zd;(function(e){e.Rear="REAR",e.Front="FRONT"})(Zd||(Zd={}));var VN;(function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"})(VN||(VN={}));class vz extends kb{async getPhoto(t){return new Promise(async(s,r)=>{if(t.webUseInput||t.source===Ol.Photos)this.fileInputExperience(t,s,r);else if(t.source===Ol.Prompt){let i=document.querySelector("pwa-action-sheet");i||(i=document.createElement("pwa-action-sheet"),document.body.appendChild(i)),i.header=t.promptLabelHeader||"Photo",i.cancelable=!1,i.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],i.addEventListener("onSelection",async a=>{a.detail===0?this.fileInputExperience(t,s,r):this.cameraExperience(t,s,r)})}else this.cameraExperience(t,s,r)})}async pickImages(t){return new Promise(async(s,r)=>{this.multipleFileInputExperience(s,r)})}async cameraExperience(t,s,r){if(customElements.get("pwa-camera-modal")){const i=document.createElement("pwa-camera-modal");i.facingMode=t.direction===Zd.Front?"user":"environment",document.body.appendChild(i);try{await i.componentOnReady(),i.addEventListener("onPhoto",async a=>{const o=a.detail;o===null?r(new Kl("User cancelled photos app")):o instanceof Error?r(o):s(await this._getCameraPhoto(o,t)),i.dismiss(),document.body.removeChild(i)}),i.present()}catch{this.fileInputExperience(t,s,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,s,r)}fileInputExperience(t,s,r){let i=document.querySelector("#_capacitor-camera-input");const a=()=>{var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input",i.type="file",i.hidden=!0,document.body.appendChild(i),i.addEventListener("change",o=>{const c=i.files[0];let d="jpeg";if(c.type==="image/png"?d="png":c.type==="image/gif"&&(d="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){const f=new FileReader;f.addEventListener("load",()=>{if(t.resultType==="dataUrl")s({dataUrl:f.result,format:d});else if(t.resultType==="base64"){const m=f.result.split(",")[1];s({base64String:m,format:d})}a()}),f.readAsDataURL(c)}else s({webPath:URL.createObjectURL(c),format:d}),a()}),i.addEventListener("cancel",o=>{r(new Kl("User cancelled photos app")),a()})),i.accept="image/*",i.capture=!0,t.source===Ol.Photos||t.source===Ol.Prompt?i.removeAttribute("capture"):t.direction===Zd.Front?i.capture="user":t.direction===Zd.Rear&&(i.capture="environment"),i.click()}multipleFileInputExperience(t,s){let r=document.querySelector("#_capacitor-camera-input-multiple");const i=()=>{var a;(a=r.parentNode)===null||a===void 0||a.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",a=>{const o=[];for(let c=0;c<r.files.length;c++){const d=r.files[c];let f="jpeg";d.type==="image/png"?f="png":d.type==="image/gif"&&(f="gif"),o.push({webPath:URL.createObjectURL(d),format:f})}t({photos:o}),i()}),r.addEventListener("cancel",a=>{s(new Kl("User cancelled photos app")),i()})),r.accept="image/*",r.click()}_getCameraPhoto(t,s){return new Promise((r,i)=>{const a=new FileReader,o=t.type.split("/")[1];s.resultType==="uri"?r({webPath:URL.createObjectURL(t),format:o,saved:!1}):(a.readAsDataURL(t),a.onloadend=()=>{const c=a.result;s.resultType==="dataUrl"?r({dataUrl:c,format:o,saved:!1}):r({base64String:c.split(",")[1],format:o,saved:!1})},a.onerror=c=>{i(c)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const xz=no("Camera",{web:()=>new vz}),yz=no("Device",{web:()=>Xe(()=>import("./web-HSXEjwKr.js"),[]).then(e=>new e.DeviceWeb)});class bz{static async requestAllPermissions(){if(!vt.isNativePlatform()){console.log("Running in web, skipping native permissions");return}try{await this.requestLocationPermission(),await this.requestCameraPermission(),console.log("Microphone permissions handled through camera plugin")}catch(t){console.error("Error requesting permissions:",t)}}static async requestLocationPermission(){try{const t=await sv.requestPermissions();return console.log("Location permissions:",t),t}catch(t){throw console.error("Location permission error:",t),t}}static async requestCameraPermission(){try{const t=await xz.requestPermissions();return console.log("Camera permissions:",t),t}catch(t){throw console.error("Camera permission error:",t),t}}static async checkLocationPermission(){try{return(await sv.checkPermissions()).location==="granted"}catch(t){return console.error("Check location permission error:",t),!1}}static async getCurrentLocation(){try{return await this.checkLocationPermission()||await this.requestLocationPermission(),await sv.getCurrentPosition()}catch(t){throw console.error("Get location error:",t),t}}static async getDeviceInfo(){try{const t=await yz.getInfo();return console.log("Device info:",t),t}catch(t){return console.error("Device info error:",t),null}}}class wz{constructor(){yr(this,"location",null);yr(this,"intervalId",null);yr(this,"listeners",[]);this.loadFromStorage()}loadFromStorage(){const t=localStorage.getItem("userLocation");if(t)try{const s=JSON.parse(t),r=localStorage.getItem("userLocationTimestamp");r&&Date.now()-parseInt(r)<10*60*1e3&&(this.location=s)}catch(s){console.error("Error loading location from storage:",s)}}saveToStorage(){this.location&&(localStorage.setItem("userLocation",JSON.stringify(this.location)),localStorage.setItem("userLocationTimestamp",Date.now().toString()))}updateLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{this.location={latitude:t.coords.latitude,longitude:t.coords.longitude},this.saveToStorage(),this.notifyListeners()},t=>console.error("Location error:",t),{enableHighAccuracy:!1,timeout:1e4,maximumAge:18e4})}notifyListeners(){this.listeners.forEach(t=>t(this.location))}startTracking(){this.updateLocation(),this.intervalId||(this.intervalId=setInterval(()=>{this.updateLocation()},3*60*1e3))}stopTracking(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}getLocation(){return this.location}subscribe(t){return this.listeners.push(t),t(this.location),()=>{this.listeners=this.listeners.filter(s=>s!==t)}}}const xt=new wz,qn=no("Preferences",{web:()=>Xe(()=>import("./web-D0ol_yYY.js"),[]).then(e=>new e.PreferencesWeb)}),jse=Object.freeze(Object.defineProperty({__proto__:null,Preferences:qn},Symbol.toStringTag,{value:"Module"}));class jz{constructor(){yr(this,"isNative",vt.isNativePlatform())}async setAuth(t,s){this.isNative?(await qn.set({key:"auth_token",value:t}),await qn.set({key:"auth_user",value:JSON.stringify(s)}),await qn.set({key:"last_activity",value:Date.now().toString()})):(localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("lastActivity",Date.now().toString()))}async getToken(){return this.isNative?(await qn.get({key:"auth_token"})).value:localStorage.getItem("token")}async getUser(){if(this.isNative){const t=await qn.get({key:"auth_user"});return t.value?JSON.parse(t.value):null}else{const t=localStorage.getItem("user");return t?JSON.parse(t):null}}async isAuthenticated(){const t=await this.getToken(),s=await this.getUser();return!!(t&&s)}async updateActivity(){this.isNative?await qn.set({key:"last_activity",value:Date.now().toString()}):localStorage.setItem("lastActivity",Date.now().toString())}async getLastActivity(){if(this.isNative){const t=await qn.get({key:"last_activity"});return t.value?parseInt(t.value):null}else{const t=localStorage.getItem("lastActivity");return t?parseInt(t):null}}async clearAuth(){console.log("🚨 clearAuth() called - Stack trace:"),console.trace(),this.isNative?(console.log("📱 Clearing native storage (Capacitor Preferences)"),await qn.remove({key:"auth_token"}),await qn.remove({key:"auth_user"}),await qn.remove({key:"last_activity"}),await qn.remove({key:"cart"}),await qn.remove({key:"wishlist"})):(console.log("🌐 Clearing web storage (localStorage)"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("lastActivity"),localStorage.removeItem("cart"),localStorage.removeItem("wishlist"),localStorage.removeItem("userLocation"),localStorage.removeItem("userLocationTimestamp")),console.log("✅ Auth cleared successfully")}async setCart(t){this.isNative?await qn.set({key:"cart",value:JSON.stringify(t)}):localStorage.setItem("cart",JSON.stringify(t))}async getCart(){if(this.isNative){const t=await qn.get({key:"cart"});return t.value?JSON.parse(t.value):[]}else{const t=localStorage.getItem("cart");return t?JSON.parse(t):[]}}async setWishlist(t){this.isNative?await qn.set({key:"wishlist",value:JSON.stringify(t)}):localStorage.setItem("wishlist",JSON.stringify(t))}async getWishlist(){if(this.isNative){const t=await qn.get({key:"wishlist"});return t.value?JSON.parse(t.value):[]}else{const t=localStorage.getItem("wishlist");return t?JSON.parse(t):[]}}async isSessionValid(){const t=await this.getLastActivity();if(!t)return!1;const s=this.isNative?7*24*60*60*1e3:24*60*60*1e3;return Date.now()-t<=s}async autoLogin(){const t=await this.getToken(),s=await this.getUser();if(t&&s&&s.user_type==="vendor"){if(await this.isSessionValid())return await this.updateActivity(),console.log("🚀 Auto-login successful for vendor:",s.username),!0;console.log("❌ Session expired, clearing auth"),await this.clearAuth()}return!1}async keepAlive(){await this.isAuthenticated()&&await this.updateActivity()}}const Re=new jz,xc=Object.freeze(Object.defineProperty({__proto__:null,authService:Re},Symbol.toStringTag,{value:"Module"})),_z={user:null,cart:[],wishlist:[],searchQuery:"",isLoading:!1,error:null,isAuthenticated:!1};function Nz(e,t){switch(t.type){case"SET_USER":return{...e,user:t.payload,isAuthenticated:!!t.payload};case"ADD_TO_CART":return e.cart.find(r=>r.id===t.payload.id)?{...e,cart:e.cart.map(r=>r.id===t.payload.id?{...r,quantity:r.quantity+1}:r)}:{...e,cart:[...e.cart,{...t.payload,quantity:1}]};case"REMOVE_FROM_CART":return{...e,cart:e.cart.filter(s=>s.id!==t.payload)};case"UPDATE_CART_QUANTITY":return{...e,cart:e.cart.map(s=>s.id===t.payload.id?{...s,quantity:Math.max(0,t.payload.quantity)}:s).filter(s=>s.quantity>0)};case"CLEAR_CART":return{...e,cart:[]};case"ADD_TO_WISHLIST":return e.wishlist.find(r=>r.id===t.payload.id)?e:{...e,wishlist:[...e.wishlist,t.payload]};case"REMOVE_FROM_WISHLIST":return{...e,wishlist:e.wishlist.filter(s=>s.id!==t.payload)};case"SET_SEARCH_QUERY":return{...e,searchQuery:t.payload};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload};case"LOAD_FROM_STORAGE":return e;default:return e}}const CE=j.createContext(void 0);function Sz({children:e}){const[t,s]=j.useReducer(Nz,_z);j.useEffect(()=>{(async()=>{try{const[y,v,w,x]=await Promise.all([Re.getCart(),Re.getWishlist(),Re.getUser(),Re.isAuthenticated()]);x&&w&&(await Re.isSessionValid()||await Re.clearAuth()),t.cart=y,t.wishlist=v,s({type:"SET_LOADING",payload:!1})}catch(y){console.error("Failed to load stored data:",y)}})()},[]),j.useEffect(()=>{(async()=>{try{await Promise.all([Re.setCart(t.cart),Re.setWishlist(t.wishlist)]),t.user&&await Re.updateActivity()}catch(y){console.error("Failed to save data:",y)}})()},[t.cart,t.wishlist,t.user]);const u={state:t,dispatch:s,addToCart:p=>{s({type:"ADD_TO_CART",payload:p})},removeFromCart:p=>{s({type:"REMOVE_FROM_CART",payload:p})},updateCartQuantity:(p,y)=>{s({type:"UPDATE_CART_QUANTITY",payload:{id:p,quantity:y}})},clearCart:()=>{s({type:"CLEAR_CART"})},addToWishlist:p=>{s({type:"ADD_TO_WISHLIST",payload:p})},removeFromWishlist:p=>{s({type:"REMOVE_FROM_WISHLIST",payload:p})},setSearchQuery:p=>{s({type:"SET_SEARCH_QUERY",payload:p})},login:async(p,y)=>{try{s({type:"SET_USER",payload:{...p,isLoggedIn:!0}}),await Re.setAuth(y,p),xt.startTracking(),console.log("Login completed, user authenticated:",!!p)}catch(v){console.error("Failed to save login data:",v)}},logout:async()=>{try{await Re.clearAuth(),s({type:"SET_USER",payload:null}),xt.stopTracking()}catch(p){console.error("Failed to clear auth data:",p)}},user:t.user};return n.jsx(CE.Provider,{value:u,children:e})}function Ni(){const e=j.useContext(CE);if(e===void 0)throw new Error("useApp must be used within an AppProvider");return e}const kz=()=>{const{state:e,dispatch:t}=Ni(),s=j.useCallback(async()=>{e.user&&await Re.updateActivity()},[e.user]),r=j.useCallback(async()=>{e.user&&await Promise.all([Re.setCart(e.cart),Re.setWishlist(e.wishlist),Re.updateActivity()])},[e.user,e.cart,e.wishlist]);return j.useCallback(async()=>{},[t]),j.useEffect(()=>{},[]),j.useEffect(()=>{},[]),j.useEffect(()=>{const i=()=>{r().catch(console.error)};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[r]),{extendSession:s,saveState:r}},Cz=()=>window.location.protocol==="capacitor:"||window.location.protocol==="ionic:"||window.navigator.userAgent.includes("Capacitor"),Pz=()=>"https://ezeyway.com/api",Hx=["http://localhost:8000","http://10.0.2.2:8000","http://192.168.1.100:8000"],Ez=()=>"ws://localhost:8000",bs={BASE_URL:Pz(),WS_BASE_URL:Ez()};console.log("API Config Debug:",{isMobile:Cz(),protocol:window.location.protocol,userAgent:window.navigator.userAgent,baseUrl:bs.BASE_URL,wsUrl:bs.WS_BASE_URL});const pp=(e="")=>`${bs.BASE_URL}${e.startsWith("/")?e:`/${e}`}`,PE=e=>e.startsWith("/")?e:`/${e}`,rt=`${bs.BASE_URL}/`,Tz=Object.freeze(Object.defineProperty({__proto__:null,API_BASE:rt,API_CONFIG:bs,FALLBACK_URLS:Hx,getApiUrl:pp,normalizeEndpoint:PE},Symbol.toStringTag,{value:"Module"})),jd=pp("");class Az{async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Re.getToken()}`,"ngrok-skip-browser-warning":"true"}}async getCart(){if(!await Re.getToken())throw new Error("User not authenticated");const s=await fetch(`${jd}cart/`,{headers:await this.getAuthHeaders()});if(!s.ok)throw new Error("Failed to fetch cart");return s.json()}async addToCart(t,s=1){const r=await fetch(`${jd}cart/add/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({product_id:t,quantity:s})});if(!r.ok)throw new Error("Failed to add item to cart");return(await r.json()).cart}async updateCartItem(t,s){const r=await fetch(`${jd}cart/items/${t}/update/`,{method:"PUT",headers:await this.getAuthHeaders(),body:JSON.stringify({quantity:s})});if(!r.ok)throw new Error("Failed to update cart item");return(await r.json()).cart}async removeFromCart(t){const s=await fetch(`${jd}cart/items/${t}/remove/`,{method:"DELETE",headers:await this.getAuthHeaders()});if(!s.ok)throw new Error("Failed to remove item from cart");return(await s.json()).cart}async clearCart(){if(!(await fetch(`${jd}cart/clear/`,{method:"DELETE",headers:await this.getAuthHeaders()})).ok)throw new Error("Failed to clear cart")}}const vl=new Az,EE=Object.freeze(Object.defineProperty({__proto__:null,cartService:vl},Symbol.toStringTag,{value:"Module"})),TE=j.createContext(void 0),Oz=({children:e})=>{const[t,s]=j.useState(null),[r,i]=j.useState(!1),{toast:a}=hn(),o=async()=>{try{if(!await Re.getToken())return;i(!0);const u=await vl.getCart();s(u)}catch(h){h.message.includes("not authenticated")||console.error("Failed to fetch cart:",h)}finally{i(!1)}},c=async(h,u=1)=>{try{if(!await Re.getToken()){a({title:"Login Required",description:"Please login to add items to cart",variant:"destructive"});return}const y=await vl.addToCart(h,u);s(y),a({title:"Success",description:"Item added to cart"})}catch{a({title:"Error",description:"Failed to add item to cart",variant:"destructive"})}},d=async(h,u)=>{try{const p=await vl.updateCartItem(h,u);s(p)}catch{a({title:"Error",description:"Failed to update item quantity",variant:"destructive"})}},f=async h=>{try{const u=await vl.removeFromCart(h);s(u),a({title:"Success",description:"Item removed from cart"})}catch{a({title:"Error",description:"Failed to remove item",variant:"destructive"})}},m=async()=>{try{await vl.clearCart(),s({...t,items:[],total_items:0,subtotal:0}),a({title:"Success",description:"Cart cleared"})}catch{a({title:"Error",description:"Failed to clear cart",variant:"destructive"})}};return j.useEffect(()=>{(async()=>{await Re.getToken()&&o()})()},[]),n.jsx(TE.Provider,{value:{cart:t,loading:r,addToCart:c,updateCartItem:d,removeFromCart:f,clearCart:m,fetchCart:o},children:e})},mr=()=>{const e=j.useContext(TE);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e},Rz=({children:e})=>{const{dispatch:t}=Ni(),[s,r]=j.useState(!1);return j.useEffect(()=>{(async()=>{try{await Re.isAuthenticated()&&(await Re.isSessionValid()||await Re.clearAuth())}catch(a){console.error("Auth initialization failed:",a)}finally{r(!0)}})()},[t]),s?n.jsx(n.Fragment,{children:e}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})},Qr=({children:e})=>{const t=st(),[s,r]=j.useState(null);return j.useEffect(()=>{(async()=>{try{const a=await Re.isAuthenticated();r(a),a||t("/login")}catch(a){console.error("Auth check failed:",a),r(!1),t("/login")}})()},[t]),s===null?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?n.jsx(n.Fragment,{children:e}):null},Wa="/assets/ezeywaylogo.png";function Lz(){const e=st();return j.useEffect(()=>{(async()=>{try{const{simplePersistentAuth:s}=await Xe(async()=>{const{simplePersistentAuth:c}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:c}},[]);if(await s.isVendorLoggedIn()){console.log("✅ Vendor already logged in, redirecting to dashboard"),e("/vendor/dashboard");return}const{authService:i}=await Xe(async()=>{const{authService:c}=await Promise.resolve().then(()=>xc);return{authService:c}},void 0),a=await i.isAuthenticated(),o=await i.getUser();if(a&&o&&o.user_type==="customer"){console.log("✅ Customer already logged in, redirecting to home"),e("/home");return}console.log("❌ No authentication found, redirecting to home"),e("/home")}catch(s){console.error("Error checking authentication:",s),e("/home")}})()},[e]),n.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:Wa,alt:"ezeyway",className:"w-32 h-32 mx-auto animate-pulse object-contain"}),n.jsx("div",{className:"mt-4",children:n.jsxs("div",{className:"flex justify-center space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})}const Mz=Ku("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"gradient-primary text-primary-foreground font-semibold shadow-brand hover:scale-105 transition-bounce",accent:"gradient-accent text-accent-foreground font-semibold shadow-brand hover:scale-105 transition-bounce",premium:"bg-primary-dark text-primary-foreground border border-primary-light/20 shadow-lg hover:bg-primary hover:shadow-brand transition-smooth"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=j.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...i},a)=>{const o=r?EI:"button";return n.jsx(o,{className:We(Mz({variant:t,size:s,className:e})),ref:a,...i})});ne.displayName="Button";const ve=j.forwardRef(({className:e,type:t,...s},r)=>n.jsx("input",{type:t,className:We("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...s}));ve.displayName="Input";const AE=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Iz=()=>{if(!AE())return;const e=document.createElement("div");e.innerHTML=`
    <div style="
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #f59e0b;
      color: white;
      padding: 8px 16px;
      text-align: center;
      z-index: 9999;
      font-size: 14px;
      font-weight: 500;
    ">
      ⚠️ Backend server not running on localhost:8000. Please start your Django server.
      <button onclick="this.parentElement.parentElement.remove()" style="
        background: none;
        border: none;
        color: white;
        margin-left: 16px;
        cursor: pointer;
        font-size: 16px;
      ">×</button>
    </div>
  `,document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},1e4)};let UN=!1;const Cb=async(e=!0,t=!1)=>{const s={"ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"};if(t||(s["Content-Type"]="application/json"),e){const r=await Re.getToken();r&&(s.Authorization=`Token ${r}`)}return s},Be=async(e,t={},s=!0)=>{var c,d,f,m,h;const r=PE(e),i=`${bs.BASE_URL}${r}`,a=t.body instanceof FormData,o={headers:await Cb(s,a),...t};if(console.log("🌐 API Request:",e,"Auth:",s),console.log("📍 Full URL:",i),e.includes("accept")&&(console.log("🎯 ORDER ACCEPT REQUEST DETECTED!"),console.log("📍 Original endpoint:",e),console.log("📍 Normalized endpoint:",r),console.log("📍 API_CONFIG.BASE_URL:",bs.BASE_URL),console.log("📍 Final URL:",i)),e.includes("switch-role")||e.includes("switch")){console.log("🎯 SWITCH ROLE REQUEST DETECTED!"),console.log("📍 Full URL:",i),console.log("🔐 Include Auth:",s),console.log("📋 Request Headers:",JSON.stringify(o.headers,null,2));const{authService:u}=await Xe(async()=>{const{authService:w}=await Promise.resolve().then(()=>xc);return{authService:w}},void 0),p=await u.getToken();console.log("🔑 Token from authService:",p?`${p.substring(0,10)}...`:"NO TOKEN");const y=typeof localStorage<"u"?localStorage.getItem("token"):"NO LOCALSTORAGE";console.log("💾 localStorage token:",y?`${y.substring(0,10)}...`:"NO TOKEN IN LOCALSTORAGE");const v=((c=o.headers)==null?void 0:c.Authorization)||((d=o.headers)==null?void 0:d.authorization);console.log("🔐 Authorization header:",v?`${v.substring(0,15)}...`:"NO AUTH HEADER")}t.headers&&(o.headers={...o.headers,...t.headers},a&&o.headers["Content-Type"]&&delete o.headers["Content-Type"]);try{const u=await fetch(i,o),p=u.clone(),y=u.headers.get("content-type");if(y&&y.includes("application/json"))try{const v=await u.json();return{response:p,data:v}}catch(v){return console.warn("Failed to parse JSON response:",v),{response:p,data:null}}else return console.warn("API returned non-JSON response:",u.status,u.statusText),{response:p,data:null}}catch(u){if(console.error("API request failed:",u),AE()&&!UN&&((f=u.message)!=null&&f.includes("fetch"))&&(UN=!0,Iz()),i.includes("ngrok-free.app")&&((m=u.message)!=null&&m.includes("Unable to resolve host")||(h=u.message)!=null&&h.includes("UnknownHostException"))){console.log("Ngrok failed, trying fallback URLs...");for(let p=1;p<Hx.length;p++){const v=`${Hx[p]}${r}`;try{console.log(`Trying fallback URL: ${v}`);const w=await fetch(v,{...o,headers:{...o.headers,"ngrok-skip-browser-warning":void 0,"x-ngrok-skip-browser-warning":void 0}}),x=w.clone(),b=w.headers.get("content-type");if(b&&b.includes("application/json"))try{const _=await w.json();return console.log(`Fallback URL ${v} succeeded`),{response:x,data:_}}catch{return console.log(`Fallback URL ${v} succeeded (non-JSON)`),{response:x,data:null}}else return console.log(`Fallback URL ${v} succeeded (non-JSON)`),{response:x,data:null}}catch(w){console.error(`Fallback URL ${v} failed:`,w);continue}}}throw u}},Gn=Object.freeze(Object.defineProperty({__proto__:null,apiRequest:Be,createApiHeaders:Cb},Symbol.toStringTag,{value:"Module"}));class Dz{constructor(){yr(this,"pendingAction",null)}setPendingAction(t){this.pendingAction=t,localStorage.setItem("pendingAction",JSON.stringify(t))}getPendingAction(){if(this.pendingAction)return this.pendingAction;const t=localStorage.getItem("pendingAction");if(t)try{return this.pendingAction=JSON.parse(t),this.pendingAction}catch(s){console.error("Error parsing pending action:",s)}return null}clearPendingAction(){this.pendingAction=null,localStorage.removeItem("pendingAction")}async executePendingAction(){const t=this.getPendingAction();if(!t)return console.log("No pending action to execute"),!1;const{authService:s}=await Xe(async()=>{const{authService:i}=await Promise.resolve().then(()=>xc);return{authService:i}},void 0);if(!await s.getToken())return console.log("No token found, clearing pending action"),this.clearPendingAction(),!1;console.log("Executing pending action:",t);try{switch(t.type){case"add_to_cart":if(t.data){const{cartService:i}=await Xe(async()=>{const{cartService:a}=await Promise.resolve().then(()=>EE);return{cartService:a}},void 0);return await i.addToCart(t.data.productId,t.data.quantity||1),console.log("Added to cart successfully"),this.clearPendingAction(),!0}break;case"buy_now":if(t.data)return localStorage.setItem("buyNowProduct",JSON.stringify(t.data)),window.location.href="/checkout",this.clearPendingAction(),!0;break;case"view_orders":return window.location.href="/orders",this.clearPendingAction(),!0;case"view_profile":return window.location.href="/profile",this.clearPendingAction(),!0;case"navigate":if(t.path)return window.location.href=t.path,this.clearPendingAction(),!0;break}}catch(i){console.error("Error executing pending action:",i),this.clearPendingAction()}return this.clearPendingAction(),!1}redirectToLogin(t){const s=t||window.location.pathname+window.location.search;window.location.href=`/login?returnTo=${encodeURIComponent(s)}`}}const Wx=new Dz;function OE({currentType:e}){const t=st(),s=fr(),r=()=>{t(e==="customer"?"/vendor/login":"/login",{state:s.state})};return n.jsx("div",{className:"absolute top-4 right-4",children:n.jsx("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-xl text-sm font-medium text-gray-600 hover:bg-white hover:text-blue-600 transition-all shadow-lg border border-white/20",children:e==="customer"?n.jsxs(n.Fragment,{children:[n.jsx(ms,{className:"h-4 w-4"}),"Vendor Login"]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"h-4 w-4"}),"Customer Login"]})})})}function Fz(){const e=st(),t=fr(),{login:s}=Ni(),[r,i]=j.useState("password"),[a,o]=j.useState(""),[c,d]=j.useState(""),[f,m]=j.useState(""),[h,u]=j.useState(!1),[p,y]=j.useState(!1),[v,w]=j.useState(!1),[x,b]=j.useState("");j.useEffect(()=>{(async()=>{try{await Re.isAuthenticated()&&(await Re.isSessionValid()||await Re.clearAuth())}catch(E){console.error("Session check failed:",E)}})()},[]);const _=async()=>{w(!0),b("");try{await Re.clearAuth();const{response:k,data:E}=await Be("/login/",{method:"POST",body:JSON.stringify({username:a,password:c})},!1);if(!k.ok)throw new Error((E==null?void 0:E.error)||"Login failed");if(E.user&&E.token){const M={...E.user,available_roles:E.available_roles||["customer"],user_type:E.user.user_type||"customer"};await s(M,E.token),setTimeout(async()=>{var T,A;if(!await Wx.executePendingAction()){const F=new URLSearchParams(window.location.search).get("returnTo")||((A=(T=t.state)==null?void 0:T.from)==null?void 0:A.pathname)||"/home";e(F,{replace:!0})}},100)}else throw new Error("Invalid login response")}catch(k){b(k.message)}finally{w(!1)}},N=async()=>{w(!0),b("");try{const{response:k,data:E}=await Be("/send-otp/",{method:"POST",body:JSON.stringify({email:a})},!1);if(!k.ok)throw new Error((E==null?void 0:E.error)||"Failed to send OTP");y(!0),b("OTP sent successfully")}catch(k){b(k.message)}finally{w(!1)}},C=async()=>{w(!0),b("");try{const{response:k,data:E}=await Be("/verify-otp/",{method:"POST",body:JSON.stringify({email:a,otp:f})},!1);if(!k.ok)throw new Error((E==null?void 0:E.error)||"OTP verification failed");if(E.user&&E.token){const M={...E.user,available_roles:E.available_roles||["customer"],user_type:E.user.user_type||"customer"};await s(M,E.token)}setTimeout(async()=>{var P,T;if(!await Wx.executePendingAction()){const O=new URLSearchParams(window.location.search).get("returnTo")||((T=(P=t.state)==null?void 0:P.from)==null?void 0:T.pathname)||"/home";e(O,{replace:!0})}},100)}catch(k){b(k.message)}finally{w(!1)}},I=()=>{e("/signup")};return n.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[n.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 left-4 w-8 h-8 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors z-10",children:n.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),n.jsx(OE,{currentType:"customer"}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx("div",{className:"w-full max-w-80 mx-auto px-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"text-center",children:n.jsx("img",{src:Wa,alt:"ezeyway",className:"w-16 h-16 mx-auto mb-6"})}),n.jsx("div",{className:"text-center mb-4",children:n.jsx("span",{className:"text-sm font-medium text-gray-700 bg-blue-50 px-3 py-1 rounded-full",children:"Customer Login"})}),n.jsx("div",{className:"flex justify-center",children:n.jsxs("div",{className:"flex space-x-8",children:[n.jsx("button",{onClick:()=>i("password"),className:`pb-2 text-sm font-medium transition-colors ${r==="password"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Password"}),n.jsx("button",{onClick:()=>i("otp"),className:`pb-2 text-sm font-medium transition-colors ${r==="otp"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"OTP"})]})}),r==="password"&&n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:a,onChange:k=>o(k.target.value),placeholder:"Phone Number or Email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:h?"text":"password",value:c,onChange:k=>d(k.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),n.jsx("button",{type:"button",onClick:()=>u(!h),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):n.jsxs(n.Fragment,{children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),x&&n.jsx("p",{className:"text-red-600 text-center",children:x}),n.jsx(ne,{onClick:_,disabled:!a||!c||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Logging in...":"Login"})]}),r==="otp"&&n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:a,onChange:k=>o(k.target.value),placeholder:"Enter your phone number or email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),x&&n.jsx("p",{className:"text-red-600 text-center",children:x}),p?n.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[n.jsx(ve,{type:"text",value:f,onChange:k=>m(k.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),n.jsx(ne,{onClick:C,disabled:f.length!==6||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Verifying...":"Verify & Login"}),n.jsx("button",{onClick:N,disabled:v,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}):n.jsx(ne,{onClick:N,disabled:!a||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Sending...":"Send OTP"})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:I,className:"text-blue-600 hover:text-blue-700 text-sm",children:"Don't have an account? Sign up"})})]})})})]})}const $z=Ku("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ie({className:e,variant:t,...s}){return n.jsx("div",{className:We($z({variant:t}),e),...s})}let rv=null;const zz=async()=>{if(!rv){const{notificationService:e}=await Xe(async()=>{const{notificationService:t}=await Promise.resolve().then(()=>RE);return{notificationService:t}},void 0);rv=e}return rv};class Bz{async getConversations(){try{const{response:t,data:s}=await Be("messaging/conversations/");return t.ok?Array.isArray(s)?s:(s==null?void 0:s.results)||[]:[]}catch{return[]}}async getMessages(t){try{const{response:s,data:r}=await Be(`messaging/conversations/${t}/messages/`);return s.ok?(console.log("Messages API response:",r),Array.isArray(r)?r:(r==null?void 0:r.results)||[]):(console.error(`Messages API error: ${s.status}`),[])}catch(s){return console.error("Messages API error:",s),[]}}async sendMessage(t){try{const s=new FormData;t.conversation_id&&s.append("conversation_id",t.conversation_id.toString()),t.recipient_id&&s.append("recipient_id",t.recipient_id.toString()),s.append("message_type",t.message_type),t.content&&s.append("content",t.content),t.file&&s.append("file",t.file);const{response:r,data:i}=await Be("/messaging/messages/send/",{method:"POST",body:s});if(!r.ok)throw console.error(`Message send failed: ${r.status}`),new Error(`HTTP ${r.status}`);return console.log("Message sent successfully:",i),i}catch{console.warn("Backend not available, simulating message send");const r=await Re.getUser();return{message:{id:Date.now(),sender:{id:(r==null?void 0:r.id)||0,username:(r==null?void 0:r.username)||"You"},message_type:t.message_type,content:t.content,status:"sent",is_pinned:!1,created_at:new Date().toISOString(),is_read:!1}}}}async handleIncomingMessage(t,s){try{(await zz()).showBrowserNotification(`New message from ${s}`,{body:t.content||"New message received",tag:`message-${t.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/messages"}}),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("newMessage",{detail:{message:t,senderName:s}}))}catch(r){console.error("Failed to handle incoming message notification:",r)}}async getOrCreateConversation(t){try{const{response:s,data:r}=await Be(`messaging/conversations/user/${t}/`);if(!s.ok)throw new Error(`HTTP ${s.status}`);return r||this.createMockConversation(t)}catch{return console.warn("Backend not available, creating mock conversation"),this.createMockConversation(t)}}createMockConversation(t){return{id:t,participants:[],last_message:void 0,unread_count:0,other_participant:{id:t,username:t===1?"EzzeYway Support":`User ${t}`,profile_picture:void 0}}}}const Us=new Bz;typeof window<"u"&&window.addEventListener("message",async e=>{var t,s;if(((t=e.data)==null?void 0:t.type)==="new_message"){const{message:r}=e.data;await Us.handleIncomingMessage(r,((s=r.sender)==null?void 0:s.username)||"Unknown")}});class Vz{constructor(){yr(this,"audio",null);yr(this,"isInitialized",!1)}async initialize(){if(!this.isInitialized){if(this.audio=null,"serviceWorker"in navigator&&!vt.isNativePlatform())try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered successfully"),navigator.serviceWorker.addEventListener("message",s=>{s.data&&s.data.type==="SHOW_ORDER_MODAL"&&window.dispatchEvent(new CustomEvent("showOrderModal",{detail:s.data.data}))}),document.addEventListener("visibilitychange",()=>{navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"VISIBILITY_CHANGE",hidden:document.hidden})}),"sync"in window.ServiceWorkerRegistration.prototype&&t.sync.register("background-sync-orders")}catch(t){console.error("Service Worker registration failed:",t)}!vt.isNativePlatform()&&"Notification"in window&&(Notification.permission==="default"?await Notification.requestPermission()==="granted"?(console.log("Notification permission granted"),this.showTestNotification()):console.warn("Notification permission denied"):Notification.permission==="granted"&&console.log("Notification permission already granted")),console.log("Notification service initialized for:",vt.isNativePlatform()?"mobile":"web"),this.isInitialized=!0}}async initializeMobileNotifications(){try{if(vt.isNativePlatform()){const{LocalNotifications:t}=await Xe(async()=>{const{LocalNotifications:a}=await import("./index-CShmxw53.js");return{LocalNotifications:a}},[]),{PushNotifications:s}=await Xe(async()=>{const{PushNotifications:a}=await Promise.resolve().then(()=>z4);return{PushNotifications:a}},void 0),{Haptics:r,ImpactStyle:i}=await Xe(async()=>{const{Haptics:a,ImpactStyle:o}=await import("./index-BXlyopuW.js");return{Haptics:a,ImpactStyle:o}},[]);await t.requestPermissions(),await s.requestPermissions(),await s.register(),s.addListener("pushNotificationReceived",async a=>{console.log("Push notification received:",a),await this.handleMobileOrderNotification(a.data)}),s.addListener("pushNotificationActionPerformed",async a=>{console.log("Push notification tapped:",a);const o=a.notification.data;(o==null?void 0:o.type)==="order"&&(await r.impact({style:i.Heavy}),this.openOrderModal(o))}),t.addListener("localNotificationActionPerformed",async a=>{console.log("Local notification tapped:",a);const o=a.notification.extra;(o==null?void 0:o.type)==="order"&&(await r.impact({style:i.Heavy}),this.openOrderModal(o))})}}catch(t){console.error("Failed to initialize mobile notifications:",t)}}async playNotificationSound(){this.createBeepSound()}createBeepSound(){try{const t=new(window.AudioContext||window.webkitAudioContext);this.playBeep(t,523,.2,.3),setTimeout(()=>this.playBeep(t,659,.2,.3),200),setTimeout(()=>this.playBeep(t,784,.3,.4),400)}catch(t){console.warn("Web Audio API not supported:",t)}}playBeep(t,s,r,i){const a=t.createOscillator(),o=t.createGain();a.connect(o),o.connect(t.destination),a.frequency.value=s,a.type="sine",o.gain.setValueAtTime(0,t.currentTime),o.gain.linearRampToValueAtTime(i,t.currentTime+.05),o.gain.exponentialRampToValueAtTime(.01,t.currentTime+r),a.start(t.currentTime),a.stop(t.currentTime+r)}async showTestNotification(){if(!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const t=new Notification("Notifications Enabled!",{body:"You will now receive order notifications even when the app is in the background.",icon:"/favicon.ico",badge:"/favicon.ico",tag:"test-notification",requireInteraction:!1});setTimeout(()=>t.close(),3e3)}}async showOrderNotification(t,s,r){if(!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const i=new Notification("🔔 New Order Received!",{body:`Order #${t} - ₹${s}
Tap to view and respond`,icon:"/favicon.ico",tag:`order-${r}`,requireInteraction:!0});i.onclick=()=>{window.focus(),this.openOrderModal({orderId:r,orderNumber:t,amount:s}),i.close()},setTimeout(()=>i.close(),15e3)}vt.isNativePlatform()&&("vibrate"in navigator&&navigator.vibrate([300,100,300,100,500]),this.openOrderModal({orderId:r,orderNumber:t,amount:s}))}async showBrowserNotification(t,s,r,i){if(!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const a=new Notification(t,{body:s,icon:"/favicon.ico",badge:"/favicon.ico",tag:`message-${r}`,requireInteraction:!0,data:{conversationId:r,userType:i}});a.onclick=()=>{window.focus(),this.navigateToConversation(r,i),a.close()},setTimeout(()=>a.close(),1e4)}}async showMobileOrderNotification(t,s,r){if(vt.isNativePlatform())try{const{LocalNotifications:i}=await Xe(async()=>{const{LocalNotifications:c}=await import("./index-CShmxw53.js");return{LocalNotifications:c}},[]),{Haptics:a,ImpactStyle:o}=await Xe(async()=>{const{Haptics:c,ImpactStyle:d}=await import("./index-BXlyopuW.js");return{Haptics:c,ImpactStyle:d}},[]);await a.impact({style:o.Heavy}),await i.schedule({notifications:[{title:"🔔 New Order Received!",body:`Order #${t} - ₹${s}
Tap to accept/reject`,id:Date.now(),sound:"default",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF6B35",actionTypeId:"OPEN_ORDER",extra:{type:"order",orderId:r,orderNumber:t,amount:s,autoOpen:!0}}]})}catch(i){console.error("Failed to show mobile order notification:",i)}}async showMobileNotification(t,s,r,i){if(vt.isNativePlatform())try{const{LocalNotifications:a}=await Xe(async()=>{const{LocalNotifications:o}=await import("./index-CShmxw53.js");return{LocalNotifications:o}},[]);await a.schedule({notifications:[{title:t,body:s,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",attachments:[],actionTypeId:"OPEN_MESSAGE",extra:{conversationId:r,userType:i}}]})}catch(a){console.error("Failed to show mobile notification:",a)}}openOrderModal(t){if(window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t})),vt.isNativePlatform()){const s=window.location.pathname;!s.includes("/vendor/home")&&!s.includes("/vendor/dashboard")&&(window.location.href="/vendor/home")}}async handleMobileOrderNotification(t){try{const{Haptics:s,ImpactStyle:r}=await Xe(async()=>{const{Haptics:i,ImpactStyle:a}=await import("./index-BXlyopuW.js");return{Haptics:i,ImpactStyle:a}},[]);await s.impact({style:r.Heavy}),await this.playNotificationSound(),this.openOrderModal(t)}catch(s){console.error("Error handling mobile order notification:",s)}}navigateToConversation(t,s){const i={vendor:`/vendor/messages/${t}`,customer:`/messages/${t}`,superadmin:`/accounts/superadmin/messages/${t}/`}[s];i&&(window.location.href=i)}async notifyNewMessage(t,s,r,i){await this.initialize();const a=`New message from ${t}`,o=s.length>50?s.substring(0,50)+"...":s;await this.playNotificationSound(),await this.showBrowserNotification(a,o,r,i),await this.showMobileNotification(a,o,r,i)}async requestPermissions(){return await this.initialize(),!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"}async requestPermission(){return this.requestPermissions()}async getNotifications(){try{const t=await fetch("/api/vendor-notifications/",{headers:{Authorization:`Token ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});return t.ok?(await t.json()).results||[]:[]}catch(t){return console.error("Failed to fetch notifications:",t),[]}}async getUnreadCount(){try{return(await this.getNotifications()).filter(s=>!s.read).length}catch(t){return console.error("Failed to get unread count:",t),0}}async markAsRead(t){try{(await fetch(`/api/notifications/${t}/read/`,{method:"POST",headers:{Authorization:`Token ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok&&console.log("Notification marked as read:",t)}catch(s){console.error("Failed to mark notification as read:",s)}}async markAllAsRead(){try{(await fetch("/api/notifications/mark-all-read/",{method:"POST",headers:{Authorization:`Token ${localStorage.getItem("token")}`,"Content-Type":"application/json"}})).ok&&console.log("All notifications marked as read")}catch(t){console.error("Failed to mark all notifications as read:",t)}}async showBrowserNotificationCompat(t,s){if(await this.playNotificationSound(),!vt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const r=new Notification(t,{body:s.body,icon:"/favicon.ico",badge:"/favicon.ico",tag:s.tag,requireInteraction:s.requireInteraction,data:s.data,silent:!1});r.onclick=()=>{var i;window.focus(),(i=s.data)!=null&&i.actionUrl&&(window.location.href=s.data.actionUrl),r.close()},setTimeout(()=>r.close(),1e4)}}}const Wt=new Vz,RE=Object.freeze(Object.defineProperty({__proto__:null,notificationService:Wt},Symbol.toStringTag,{value:"Module"}));function Uz(){const[e,t]=j.useState([]),[s,r]=j.useState(0),[i,a]=j.useState(!1),o=async()=>{try{a(!0);const[f,m]=await Promise.all([Wt.getNotifications(),Wt.getUnreadCount()]);t(f),r(m)}catch(f){console.error("Failed to load notifications:",f)}finally{a(!1)}},c=async f=>{try{await Wt.markAsRead(f),r(m=>Math.max(0,m-1)),t(m=>m.map(h=>h.id===f?{...h,read:!0}:h))}catch(m){console.error("Failed to mark notification as read:",m)}},d=async()=>{try{await Wt.markAllAsRead(),r(0),t(f=>f.map(m=>({...m,read:!0})))}catch(f){console.error("Failed to mark all notifications as read:",f)}};return j.useEffect(()=>{o();const f=setInterval(o,1e4);return()=>clearInterval(f)},[]),j.useEffect(()=>{Wt.requestPermission()},[]),{notifications:e,unreadCount:s,isLoading:i,markAsRead:c,markAllAsRead:d,refreshNotifications:o}}const Bc=()=>{const e=st(),{user:t,state:s}=Ni(),r=async(c,d)=>{if(!(t&&s.isAuthenticated)){console.log("User not authenticated, redirecting to login"),d&&Wx.setPendingAction(d);const m=window.location.pathname+window.location.search;e(`/login?returnTo=${encodeURIComponent(m)}`);return}console.log("User authenticated, executing action");try{await c()}catch(m){console.error("Error executing authenticated action:",m)}};return{executeWithAuth:r,addToCartWithAuth:(c,d=1)=>r(async()=>{const{cartService:f}=await Xe(async()=>{const{cartService:m}=await Promise.resolve().then(()=>EE);return{cartService:m}},void 0);await f.addToCart(c,d)},{type:"add_to_cart",data:{productId:c,quantity:d}}),buyNowWithAuth:c=>r(async()=>{localStorage.setItem("buyNowProduct",JSON.stringify(c)),e("/checkout")},{type:"buy_now",data:c}),navigateWithAuth:c=>r(()=>e(c),{type:"navigate",path:c}),isAuthenticated:!!(t&&s.isAuthenticated)}};var qz=j.createContext(void 0);function Vc(e){const t=j.useContext(qz);return e||t||"ltr"}var iv=0;function Pb(){j.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??qN()),document.body.insertAdjacentElement("beforeend",e[1]??qN()),iv++,()=>{iv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),iv--}},[])}function qN(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var av="focusScope.autoFocusOnMount",ov="focusScope.autoFocusOnUnmount",HN={bubbles:!1,cancelable:!0},Hz="FocusScope",gp=j.forwardRef((e,t)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[c,d]=j.useState(null),f=vn(i),m=vn(a),h=j.useRef(null),u=ft(t,v=>d(v)),p=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(r){let v=function(_){if(p.paused||!c)return;const N=_.target;c.contains(N)?h.current=N:fa(h.current,{select:!0})},w=function(_){if(p.paused||!c)return;const N=_.relatedTarget;N!==null&&(c.contains(N)||fa(h.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const C of _)C.removedNodes.length>0&&fa(c)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const b=new MutationObserver(x);return c&&b.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),b.disconnect()}}},[r,c,p.paused]),j.useEffect(()=>{if(c){ZN.add(p);const v=document.activeElement;if(!c.contains(v)){const x=new CustomEvent(av,HN);c.addEventListener(av,f),c.dispatchEvent(x),x.defaultPrevented||(Wz(Xz(LE(c)),{select:!0}),document.activeElement===v&&fa(c))}return()=>{c.removeEventListener(av,f),setTimeout(()=>{const x=new CustomEvent(ov,HN);c.addEventListener(ov,m),c.dispatchEvent(x),x.defaultPrevented||fa(v??document.body,{select:!0}),c.removeEventListener(ov,m),ZN.remove(p)},0)}}},[c,f,m,p]);const y=j.useCallback(v=>{if(!s&&!r||p.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(w&&x){const b=v.currentTarget,[_,N]=Zz(b);_&&N?!v.shiftKey&&x===N?(v.preventDefault(),s&&fa(_,{select:!0})):v.shiftKey&&x===_&&(v.preventDefault(),s&&fa(N,{select:!0})):x===b&&v.preventDefault()}},[s,r,p.paused]);return n.jsx(Ye.div,{tabIndex:-1,...o,ref:u,onKeyDown:y})});gp.displayName=Hz;function Wz(e,{select:t=!1}={}){const s=document.activeElement;for(const r of e)if(fa(r,{select:t}),document.activeElement!==s)return}function Zz(e){const t=LE(e),s=WN(t,e),r=WN(t.reverse(),e);return[s,r]}function LE(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function WN(e,t){for(const s of e)if(!Gz(s,{upTo:t}))return s}function Gz(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Kz(e){return e instanceof HTMLInputElement&&"select"in e}function fa(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&Kz(e)&&t&&e.select()}}var ZN=Yz();function Yz(){let e=[];return{add(t){const s=e[0];t!==s&&(s==null||s.pause()),e=GN(e,t),e.unshift(t)},remove(t){var s;e=GN(e,t),(s=e[0])==null||s.resume()}}}function GN(e,t){const s=[...e],r=s.indexOf(t);return r!==-1&&s.splice(r,1),s}function Xz(e){return e.filter(t=>t.tagName!=="A")}var lv="rovingFocusGroup.onEntryFocus",Qz={bubbles:!1,cancelable:!0},eh="RovingFocusGroup",[Zx,ME,Jz]=Qm(eh),[eB,Uc]=ls(eh,[Jz]),[tB,nB]=eB(eh),IE=j.forwardRef((e,t)=>n.jsx(Zx.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Zx.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(sB,{...e,ref:t})})}));IE.displayName=eh;var sB=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...h}=e,u=j.useRef(null),p=ft(t,u),y=Vc(a),[v,w]=zr({prop:o,defaultProp:c??null,onChange:d,caller:eh}),[x,b]=j.useState(!1),_=vn(f),N=ME(s),C=j.useRef(!1),[I,k]=j.useState(0);return j.useEffect(()=>{const E=u.current;if(E)return E.addEventListener(lv,_),()=>E.removeEventListener(lv,_)},[_]),n.jsx(tB,{scope:s,orientation:r,dir:y,loop:i,currentTabStopId:v,onItemFocus:j.useCallback(E=>w(E),[w]),onItemShiftTab:j.useCallback(()=>b(!0),[]),onFocusableItemAdd:j.useCallback(()=>k(E=>E+1),[]),onFocusableItemRemove:j.useCallback(()=>k(E=>E-1),[]),children:n.jsx(Ye.div,{tabIndex:x||I===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:Me(e.onMouseDown,()=>{C.current=!0}),onFocus:Me(e.onFocus,E=>{const M=!C.current;if(E.target===E.currentTarget&&M&&!x){const P=new CustomEvent(lv,Qz);if(E.currentTarget.dispatchEvent(P),!P.defaultPrevented){const T=N().filter(G=>G.focusable),A=T.find(G=>G.active),z=T.find(G=>G.id===v),F=[A,z,...T].filter(Boolean).map(G=>G.ref.current);$E(F,m)}}C.current=!1}),onBlur:Me(e.onBlur,()=>b(!1))})})}),DE="RovingFocusGroupItem",FE=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...c}=e,d=Fr(),f=a||d,m=nB(DE,s),h=m.currentTabStopId===f,u=ME(s),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:v}=m;return j.useEffect(()=>{if(r)return p(),()=>y()},[r,p,y]),n.jsx(Zx.ItemSlot,{scope:s,id:f,focusable:r,active:i,children:n.jsx(Ye.span,{tabIndex:h?0:-1,"data-orientation":m.orientation,...c,ref:t,onMouseDown:Me(e.onMouseDown,w=>{r?m.onItemFocus(f):w.preventDefault()}),onFocus:Me(e.onFocus,()=>m.onItemFocus(f)),onKeyDown:Me(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){m.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=aB(w,m.orientation,m.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let _=u().filter(N=>N.focusable).map(N=>N.ref.current);if(x==="last")_.reverse();else if(x==="prev"||x==="next"){x==="prev"&&_.reverse();const N=_.indexOf(w.currentTarget);_=m.loop?oB(_,N+1):_.slice(N+1)}setTimeout(()=>$E(_))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o})})});FE.displayName=DE;var rB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iB(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function aB(e,t,s){const r=iB(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rB[r]}function $E(e,t=!1){const s=document.activeElement;for(const r of e)if(r===s||(r.focus({preventScroll:t}),document.activeElement!==s))return}function oB(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var Eb=IE,Tb=FE,lB=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},fl=new WeakMap,Yh=new WeakMap,Xh={},cv=0,zE=function(e){return e&&(e.host||zE(e.parentNode))},cB=function(e,t){return t.map(function(s){if(e.contains(s))return s;var r=zE(s);return r&&e.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},dB=function(e,t,s,r){var i=cB(t,Array.isArray(e)?e:[e]);Xh[s]||(Xh[s]=new WeakMap);var a=Xh[s],o=[],c=new Set,d=new Set(i),f=function(h){!h||c.has(h)||(c.add(h),f(h.parentNode))};i.forEach(f);var m=function(h){!h||d.has(h)||Array.prototype.forEach.call(h.children,function(u){if(c.has(u))m(u);else try{var p=u.getAttribute(r),y=p!==null&&p!=="false",v=(fl.get(u)||0)+1,w=(a.get(u)||0)+1;fl.set(u,v),a.set(u,w),o.push(u),v===1&&y&&Yh.set(u,!0),w===1&&u.setAttribute(s,"true"),y||u.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",u,x)}})};return m(t),c.clear(),cv++,function(){o.forEach(function(h){var u=fl.get(h)-1,p=a.get(h)-1;fl.set(h,u),a.set(h,p),u||(Yh.has(h)||h.removeAttribute(r),Yh.delete(h)),p||h.removeAttribute(s)}),cv--,cv||(fl=new WeakMap,fl=new WeakMap,Yh=new WeakMap,Xh={})}},Ab=function(e,t,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=lB(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),dB(r,i,s,"aria-hidden")):function(){return null}},ai=function(){return ai=Object.assign||function(t){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},ai.apply(this,arguments)};function BE(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]]);return s}function uB(e,t,s){if(s||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var jf="right-scroll-bar-position",_f="width-before-scroll-bar",hB="with-scroll-bars-hidden",fB="--removed-body-scroll-bar-size";function dv(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function mB(e,t){var s=j.useState(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(r){var i=s.value;i!==r&&(s.value=r,s.callback(r,i))}}}})[0];return s.callback=t,s.facade}var pB=typeof window<"u"?j.useLayoutEffect:j.useEffect,KN=new WeakMap;function gB(e,t){var s=mB(null,function(r){return e.forEach(function(i){return dv(i,r)})});return pB(function(){var r=KN.get(s);if(r){var i=new Set(r),a=new Set(e),o=s.current;i.forEach(function(c){a.has(c)||dv(c,null)}),a.forEach(function(c){i.has(c)||dv(c,o)})}KN.set(s,e)},[e]),s}function vB(e){return e}function xB(e,t){t===void 0&&(t=vB);var s=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(a){var o=t(a,r);return s.push(o),function(){s=s.filter(function(c){return c!==o})}},assignSyncMedium:function(a){for(r=!0;s.length;){var o=s;s=[],o.forEach(a)}s={push:function(c){return a(c)},filter:function(){return s}}},assignMedium:function(a){r=!0;var o=[];if(s.length){var c=s;s=[],c.forEach(a),o=s}var d=function(){var m=o;o=[],m.forEach(a)},f=function(){return Promise.resolve().then(d)};f(),s={push:function(m){o.push(m),f()},filter:function(m){return o=o.filter(m),s}}}};return i}function yB(e){e===void 0&&(e={});var t=xB(null);return t.options=ai({async:!0,ssr:!1},e),t}var VE=function(e){var t=e.sideCar,s=BE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return j.createElement(r,ai({},s))};VE.isSideCarExport=!0;function bB(e,t){return e.useMedium(t),VE}var UE=yB(),uv=function(){},vp=j.forwardRef(function(e,t){var s=j.useRef(null),r=j.useState({onScrollCapture:uv,onWheelCapture:uv,onTouchMoveCapture:uv}),i=r[0],a=r[1],o=e.forwardProps,c=e.children,d=e.className,f=e.removeScrollBar,m=e.enabled,h=e.shards,u=e.sideCar,p=e.noRelative,y=e.noIsolation,v=e.inert,w=e.allowPinchZoom,x=e.as,b=x===void 0?"div":x,_=e.gapMode,N=BE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=u,I=gB([s,t]),k=ai(ai({},N),i);return j.createElement(j.Fragment,null,m&&j.createElement(C,{sideCar:UE,removeScrollBar:f,shards:h,noRelative:p,noIsolation:y,inert:v,setCallbacks:a,allowPinchZoom:!!w,lockRef:s,gapMode:_}),o?j.cloneElement(j.Children.only(c),ai(ai({},k),{ref:I})):j.createElement(b,ai({},k,{className:d,ref:I}),c))});vp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vp.classNames={fullWidth:_f,zeroRight:jf};var wB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=wB();return t&&e.setAttribute("nonce",t),e}function _B(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function NB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var SB=function(){var e=0,t=null;return{add:function(s){e==0&&(t=jB())&&(_B(t,s),NB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},kB=function(){var e=SB();return function(t,s){j.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},qE=function(){var e=kB(),t=function(s){var r=s.styles,i=s.dynamic;return e(r,i),null};return t},CB={left:0,top:0,right:0,gap:0},hv=function(e){return parseInt(e||"",10)||0},PB=function(e){var t=window.getComputedStyle(document.body),s=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[hv(s),hv(r),hv(i)]},EB=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return CB;var t=PB(e),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-s+t[2]-t[0])}},TB=qE(),Yl="data-scroll-locked",AB=function(e,t,s,r){var i=e.left,a=e.top,o=e.right,c=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(hB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(Yl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(jf,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(_f,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(jf," .").concat(jf,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(_f," .").concat(_f,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Yl,`] {
    `).concat(fB,": ").concat(c,`px;
  }
`)},YN=function(){var e=parseInt(document.body.getAttribute(Yl)||"0",10);return isFinite(e)?e:0},OB=function(){j.useEffect(function(){return document.body.setAttribute(Yl,(YN()+1).toString()),function(){var e=YN()-1;e<=0?document.body.removeAttribute(Yl):document.body.setAttribute(Yl,e.toString())}},[])},RB=function(e){var t=e.noRelative,s=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;OB();var a=j.useMemo(function(){return EB(i)},[i]);return j.createElement(TB,{styles:AB(a,!t,i,s?"":"!important")})},Gx=!1;if(typeof window<"u")try{var Qh=Object.defineProperty({},"passive",{get:function(){return Gx=!0,!0}});window.addEventListener("test",Qh,Qh),window.removeEventListener("test",Qh,Qh)}catch{Gx=!1}var ml=Gx?{passive:!1}:!1,LB=function(e){return e.tagName==="TEXTAREA"},HE=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!LB(e)&&s[t]==="visible")},MB=function(e){return HE(e,"overflowY")},IB=function(e){return HE(e,"overflowX")},XN=function(e,t){var s=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=WE(e,r);if(i){var a=ZE(e,r),o=a[1],c=a[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},DB=function(e){var t=e.scrollTop,s=e.scrollHeight,r=e.clientHeight;return[t,s,r]},FB=function(e){var t=e.scrollLeft,s=e.scrollWidth,r=e.clientWidth;return[t,s,r]},WE=function(e,t){return e==="v"?MB(t):IB(t)},ZE=function(e,t){return e==="v"?DB(t):FB(t)},$B=function(e,t){return e==="h"&&t==="rtl"?-1:1},zB=function(e,t,s,r,i){var a=$B(e,window.getComputedStyle(t).direction),o=a*r,c=s.target,d=t.contains(c),f=!1,m=o>0,h=0,u=0;do{if(!c)break;var p=ZE(e,c),y=p[0],v=p[1],w=p[2],x=v-w-a*y;(y||x)&&WE(e,c)&&(h+=x,u+=y);var b=c.parentNode;c=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return(m&&(Math.abs(h)<1||!i)||!m&&(Math.abs(u)<1||!i))&&(f=!0),f},Jh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},QN=function(e){return[e.deltaX,e.deltaY]},JN=function(e){return e&&"current"in e?e.current:e},BB=function(e,t){return e[0]===t[0]&&e[1]===t[1]},VB=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},UB=0,pl=[];function qB(e){var t=j.useRef([]),s=j.useRef([0,0]),r=j.useRef(),i=j.useState(UB++)[0],a=j.useState(qE)[0],o=j.useRef(e);j.useEffect(function(){o.current=e},[e]),j.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var v=uB([e.lockRef.current],(e.shards||[]).map(JN),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var c=j.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=Jh(v),b=s.current,_="deltaX"in v?v.deltaX:b[0]-x[0],N="deltaY"in v?v.deltaY:b[1]-x[1],C,I=v.target,k=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in v&&k==="h"&&I.type==="range")return!1;var E=XN(k,I);if(!E)return!0;if(E?C=k:(C=k==="v"?"h":"v",E=XN(k,I)),!E)return!1;if(!r.current&&"changedTouches"in v&&(_||N)&&(r.current=C),!C)return!0;var M=r.current||C;return zB(M,w,v,M==="h"?_:N,!0)},[]),d=j.useCallback(function(v){var w=v;if(!(!pl.length||pl[pl.length-1]!==a)){var x="deltaY"in w?QN(w):Jh(w),b=t.current.filter(function(C){return C.name===w.type&&(C.target===w.target||w.target===C.shadowParent)&&BB(C.delta,x)})[0];if(b&&b.should){w.cancelable&&w.preventDefault();return}if(!b){var _=(o.current.shards||[]).map(JN).filter(Boolean).filter(function(C){return C.contains(w.target)}),N=_.length>0?c(w,_[0]):!o.current.noIsolation;N&&w.cancelable&&w.preventDefault()}}},[]),f=j.useCallback(function(v,w,x,b){var _={name:v,delta:w,target:x,should:b,shadowParent:HB(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(N){return N!==_})},1)},[]),m=j.useCallback(function(v){s.current=Jh(v),r.current=void 0},[]),h=j.useCallback(function(v){f(v.type,QN(v),v.target,c(v,e.lockRef.current))},[]),u=j.useCallback(function(v){f(v.type,Jh(v),v.target,c(v,e.lockRef.current))},[]);j.useEffect(function(){return pl.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:u}),document.addEventListener("wheel",d,ml),document.addEventListener("touchmove",d,ml),document.addEventListener("touchstart",m,ml),function(){pl=pl.filter(function(v){return v!==a}),document.removeEventListener("wheel",d,ml),document.removeEventListener("touchmove",d,ml),document.removeEventListener("touchstart",m,ml)}},[]);var p=e.removeScrollBar,y=e.inert;return j.createElement(j.Fragment,null,y?j.createElement(a,{styles:VB(i)}):null,p?j.createElement(RB,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function HB(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const WB=bB(UE,qB);var xp=j.forwardRef(function(e,t){return j.createElement(vp,ai({},e,{ref:t,sideCar:WB}))});xp.classNames=vp.classNames;var Kx=["Enter"," "],ZB=["ArrowDown","PageUp","Home"],GE=["ArrowUp","PageDown","End"],GB=[...ZB,...GE],KB={ltr:[...Kx,"ArrowRight"],rtl:[...Kx,"ArrowLeft"]},YB={ltr:["ArrowLeft"],rtl:["ArrowRight"]},th="Menu",[Au,XB,QB]=Qm(th),[tl,KE]=ls(th,[QB,$c,Uc]),yp=$c(),YE=Uc(),[JB,nl]=tl(th),[eV,nh]=tl(th),XE=e=>{const{__scopeMenu:t,open:s=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=e,c=yp(t),[d,f]=j.useState(null),m=j.useRef(!1),h=vn(a),u=Vc(i);return j.useEffect(()=>{const p=()=>{m.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>m.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),n.jsx(vb,{...c,children:n.jsx(JB,{scope:t,open:s,onOpenChange:h,content:d,onContentChange:f,children:n.jsx(eV,{scope:t,onClose:j.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:m,dir:u,modal:o,children:r})})})};XE.displayName=th;var tV="MenuAnchor",Ob=j.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e,i=yp(s);return n.jsx(xb,{...i,...r,ref:t})});Ob.displayName=tV;var Rb="MenuPortal",[nV,QE]=tl(Rb,{forceMount:void 0}),JE=e=>{const{__scopeMenu:t,forceMount:s,children:r,container:i}=e,a=nl(Rb,t);return n.jsx(nV,{scope:t,forceMount:s,children:n.jsx(Qn,{present:s||a.open,children:n.jsx(Zu,{asChild:!0,container:i,children:r})})})};JE.displayName=Rb;var lr="MenuContent",[sV,Lb]=tl(lr),eT=j.forwardRef((e,t)=>{const s=QE(lr,e.__scopeMenu),{forceMount:r=s.forceMount,...i}=e,a=nl(lr,e.__scopeMenu),o=nh(lr,e.__scopeMenu);return n.jsx(Au.Provider,{scope:e.__scopeMenu,children:n.jsx(Qn,{present:r||a.open,children:n.jsx(Au.Slot,{scope:e.__scopeMenu,children:o.modal?n.jsx(rV,{...i,ref:t}):n.jsx(iV,{...i,ref:t})})})})}),rV=j.forwardRef((e,t)=>{const s=nl(lr,e.__scopeMenu),r=j.useRef(null),i=ft(t,r);return j.useEffect(()=>{const a=r.current;if(a)return Ab(a)},[]),n.jsx(Mb,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:Me(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),iV=j.forwardRef((e,t)=>{const s=nl(lr,e.__scopeMenu);return n.jsx(Mb,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),aV=qo("MenuContent.ScrollLock"),Mb=j.forwardRef((e,t)=>{const{__scopeMenu:s,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:h,onInteractOutside:u,onDismiss:p,disableOutsideScroll:y,...v}=e,w=nl(lr,s),x=nh(lr,s),b=yp(s),_=YE(s),N=XB(s),[C,I]=j.useState(null),k=j.useRef(null),E=ft(t,k,w.onContentChange),M=j.useRef(0),P=j.useRef(""),T=j.useRef(0),A=j.useRef(null),z=j.useRef("right"),O=j.useRef(0),F=y?xp:j.Fragment,G=y?{as:aV,allowPinchZoom:!0}:void 0,Y=U=>{var H,se;const B=P.current+U,R=N().filter(Q=>!Q.disabled),$=document.activeElement,W=(H=R.find(Q=>Q.ref.current===$))==null?void 0:H.textValue,Z=R.map(Q=>Q.textValue),X=xV(Z,B,W),V=(se=R.find(Q=>Q.textValue===X))==null?void 0:se.ref.current;(function Q(ie){P.current=ie,window.clearTimeout(M.current),ie!==""&&(M.current=window.setTimeout(()=>Q(""),1e3))})(B),V&&setTimeout(()=>V.focus())};j.useEffect(()=>()=>window.clearTimeout(M.current),[]),Pb();const K=j.useCallback(U=>{var R,$;return z.current===((R=A.current)==null?void 0:R.side)&&bV(U,($=A.current)==null?void 0:$.area)},[]);return n.jsx(sV,{scope:s,searchRef:P,onItemEnter:j.useCallback(U=>{K(U)&&U.preventDefault()},[K]),onItemLeave:j.useCallback(U=>{var B;K(U)||((B=k.current)==null||B.focus(),I(null))},[K]),onTriggerLeave:j.useCallback(U=>{K(U)&&U.preventDefault()},[K]),pointerGraceTimerRef:T,onPointerGraceIntentChange:j.useCallback(U=>{A.current=U},[]),children:n.jsx(F,{...G,children:n.jsx(gp,{asChild:!0,trapped:i,onMountAutoFocus:Me(a,U=>{var B;U.preventDefault(),(B=k.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:n.jsx(Lc,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:m,onFocusOutside:h,onInteractOutside:u,onDismiss:p,children:n.jsx(Eb,{asChild:!0,..._,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:I,onEntryFocus:Me(d,U=>{x.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(yb,{role:"menu","aria-orientation":"vertical","data-state":gT(w.open),"data-radix-menu-content":"",dir:x.dir,...b,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:Me(v.onKeyDown,U=>{const R=U.target.closest("[data-radix-menu-content]")===U.currentTarget,$=U.ctrlKey||U.altKey||U.metaKey,W=U.key.length===1;R&&(U.key==="Tab"&&U.preventDefault(),!$&&W&&Y(U.key));const Z=k.current;if(U.target!==Z||!GB.includes(U.key))return;U.preventDefault();const V=N().filter(H=>!H.disabled).map(H=>H.ref.current);GE.includes(U.key)&&V.reverse(),gV(V)}),onBlur:Me(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(M.current),P.current="")}),onPointerMove:Me(e.onPointerMove,Ou(U=>{const B=U.target,R=O.current!==U.clientX;if(U.currentTarget.contains(B)&&R){const $=U.clientX>O.current?"right":"left";z.current=$,O.current=U.clientX}}))})})})})})})});eT.displayName=lr;var oV="MenuGroup",Ib=j.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(Ye.div,{role:"group",...r,ref:t})});Ib.displayName=oV;var lV="MenuLabel",tT=j.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(Ye.div,{...r,ref:t})});tT.displayName=lV;var om="MenuItem",e1="menu.itemSelect",bp=j.forwardRef((e,t)=>{const{disabled:s=!1,onSelect:r,...i}=e,a=j.useRef(null),o=nh(om,e.__scopeMenu),c=Lb(om,e.__scopeMenu),d=ft(t,a),f=j.useRef(!1),m=()=>{const h=a.current;if(!s&&h){const u=new CustomEvent(e1,{bubbles:!0,cancelable:!0});h.addEventListener(e1,p=>r==null?void 0:r(p),{once:!0}),X0(h,u),u.defaultPrevented?f.current=!1:o.onClose()}};return n.jsx(nT,{...i,ref:d,disabled:s,onClick:Me(e.onClick,m),onPointerDown:h=>{var u;(u=e.onPointerDown)==null||u.call(e,h),f.current=!0},onPointerUp:Me(e.onPointerUp,h=>{var u;f.current||(u=h.currentTarget)==null||u.click()}),onKeyDown:Me(e.onKeyDown,h=>{const u=c.searchRef.current!=="";s||u&&h.key===" "||Kx.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});bp.displayName=om;var nT=j.forwardRef((e,t)=>{const{__scopeMenu:s,disabled:r=!1,textValue:i,...a}=e,o=Lb(om,s),c=YE(s),d=j.useRef(null),f=ft(t,d),[m,h]=j.useState(!1),[u,p]=j.useState("");return j.useEffect(()=>{const y=d.current;y&&p((y.textContent??"").trim())},[a.children]),n.jsx(Au.ItemSlot,{scope:s,disabled:r,textValue:i??u,children:n.jsx(Tb,{asChild:!0,...c,focusable:!r,children:n.jsx(Ye.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:f,onPointerMove:Me(e.onPointerMove,Ou(y=>{r?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Me(e.onPointerLeave,Ou(y=>o.onItemLeave(y))),onFocus:Me(e.onFocus,()=>h(!0)),onBlur:Me(e.onBlur,()=>h(!1))})})})}),cV="MenuCheckboxItem",sT=j.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:r,...i}=e;return n.jsx(lT,{scope:e.__scopeMenu,checked:s,children:n.jsx(bp,{role:"menuitemcheckbox","aria-checked":lm(s)?"mixed":s,...i,ref:t,"data-state":Fb(s),onSelect:Me(i.onSelect,()=>r==null?void 0:r(lm(s)?!0:!s),{checkForDefaultPrevented:!1})})})});sT.displayName=cV;var rT="MenuRadioGroup",[dV,uV]=tl(rT,{value:void 0,onValueChange:()=>{}}),iT=j.forwardRef((e,t)=>{const{value:s,onValueChange:r,...i}=e,a=vn(r);return n.jsx(dV,{scope:e.__scopeMenu,value:s,onValueChange:a,children:n.jsx(Ib,{...i,ref:t})})});iT.displayName=rT;var aT="MenuRadioItem",oT=j.forwardRef((e,t)=>{const{value:s,...r}=e,i=uV(aT,e.__scopeMenu),a=s===i.value;return n.jsx(lT,{scope:e.__scopeMenu,checked:a,children:n.jsx(bp,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Fb(a),onSelect:Me(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,s)},{checkForDefaultPrevented:!1})})})});oT.displayName=aT;var Db="MenuItemIndicator",[lT,hV]=tl(Db,{checked:!1}),cT=j.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:r,...i}=e,a=hV(Db,s);return n.jsx(Qn,{present:r||lm(a.checked)||a.checked===!0,children:n.jsx(Ye.span,{...i,ref:t,"data-state":Fb(a.checked)})})});cT.displayName=Db;var fV="MenuSeparator",dT=j.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(Ye.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});dT.displayName=fV;var mV="MenuArrow",uT=j.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e,i=yp(s);return n.jsx(bb,{...i,...r,ref:t})});uT.displayName=mV;var pV="MenuSub",[_se,hT]=tl(pV),Rd="MenuSubTrigger",fT=j.forwardRef((e,t)=>{const s=nl(Rd,e.__scopeMenu),r=nh(Rd,e.__scopeMenu),i=hT(Rd,e.__scopeMenu),a=Lb(Rd,e.__scopeMenu),o=j.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=a,f={__scopeMenu:e.__scopeMenu},m=j.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return j.useEffect(()=>m,[m]),j.useEffect(()=>{const h=c.current;return()=>{window.clearTimeout(h),d(null)}},[c,d]),n.jsx(Ob,{asChild:!0,...f,children:n.jsx(nT,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":i.contentId,"data-state":gT(s.open),...e,ref:Xm(t,i.onTriggerChange),onClick:h=>{var u;(u=e.onClick)==null||u.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:Me(e.onPointerMove,Ou(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!s.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),m()},100))})),onPointerLeave:Me(e.onPointerLeave,Ou(h=>{var p,y;m();const u=(p=s.content)==null?void 0:p.getBoundingClientRect();if(u){const v=(y=s.content)==null?void 0:y.dataset.side,w=v==="right",x=w?-5:5,b=u[w?"left":"right"],_=u[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:b,y:u.top},{x:_,y:u.top},{x:_,y:u.bottom},{x:b,y:u.bottom}],side:v}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Me(e.onKeyDown,h=>{var p;const u=a.searchRef.current!=="";e.disabled||u&&h.key===" "||KB[r.dir].includes(h.key)&&(s.onOpenChange(!0),(p=s.content)==null||p.focus(),h.preventDefault())})})})});fT.displayName=Rd;var mT="MenuSubContent",pT=j.forwardRef((e,t)=>{const s=QE(lr,e.__scopeMenu),{forceMount:r=s.forceMount,...i}=e,a=nl(lr,e.__scopeMenu),o=nh(lr,e.__scopeMenu),c=hT(mT,e.__scopeMenu),d=j.useRef(null),f=ft(t,d);return n.jsx(Au.Provider,{scope:e.__scopeMenu,children:n.jsx(Qn,{present:r||a.open,children:n.jsx(Au.Slot,{scope:e.__scopeMenu,children:n.jsx(Mb,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:f,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{var h;o.isUsingKeyboardRef.current&&((h=d.current)==null||h.focus()),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Me(e.onFocusOutside,m=>{m.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Me(e.onEscapeKeyDown,m=>{o.onClose(),m.preventDefault()}),onKeyDown:Me(e.onKeyDown,m=>{var p;const h=m.currentTarget.contains(m.target),u=YB[o.dir].includes(m.key);h&&u&&(a.onOpenChange(!1),(p=c.trigger)==null||p.focus(),m.preventDefault())})})})})})});pT.displayName=mT;function gT(e){return e?"open":"closed"}function lm(e){return e==="indeterminate"}function Fb(e){return lm(e)?"indeterminate":e?"checked":"unchecked"}function gV(e){const t=document.activeElement;for(const s of e)if(s===t||(s.focus(),document.activeElement!==t))return}function vV(e,t){return e.map((s,r)=>e[(t+r)%e.length])}function xV(e,t,s){const i=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let o=vV(e,Math.max(a,0));i.length===1&&(o=o.filter(f=>f!==s));const d=o.find(f=>f.toLowerCase().startsWith(i.toLowerCase()));return d!==s?d:void 0}function yV(e,t){const{x:s,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const c=t[a],d=t[o],f=c.x,m=c.y,h=d.x,u=d.y;m>r!=u>r&&s<(h-f)*(r-m)/(u-m)+f&&(i=!i)}return i}function bV(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return yV(s,t)}function Ou(e){return t=>t.pointerType==="mouse"?e(t):void 0}var wV=XE,jV=Ob,_V=JE,NV=eT,SV=Ib,kV=tT,CV=bp,PV=sT,EV=iT,TV=oT,AV=cT,OV=dT,RV=uT,LV=fT,MV=pT,wp="DropdownMenu",[IV,Nse]=ls(wp,[KE]),Ns=KE(),[DV,vT]=IV(wp),xT=e=>{const{__scopeDropdownMenu:t,children:s,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:c=!0}=e,d=Ns(t),f=j.useRef(null),[m,h]=zr({prop:i,defaultProp:a??!1,onChange:o,caller:wp});return n.jsx(DV,{scope:t,triggerId:Fr(),triggerRef:f,contentId:Fr(),open:m,onOpenChange:h,onOpenToggle:j.useCallback(()=>h(u=>!u),[h]),modal:c,children:n.jsx(wV,{...d,open:m,onOpenChange:h,dir:r,modal:c,children:s})})};xT.displayName=wp;var yT="DropdownMenuTrigger",bT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:r=!1,...i}=e,a=vT(yT,s),o=Ns(s);return n.jsx(jV,{asChild:!0,...o,children:n.jsx(Ye.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Xm(t,a.triggerRef),onPointerDown:Me(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Me(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});bT.displayName=yT;var FV="DropdownMenuPortal",wT=e=>{const{__scopeDropdownMenu:t,...s}=e,r=Ns(t);return n.jsx(_V,{...r,...s})};wT.displayName=FV;var jT="DropdownMenuContent",_T=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=vT(jT,s),a=Ns(s),o=j.useRef(!1);return n.jsx(NV,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:Me(e.onCloseAutoFocus,c=>{var d;o.current||(d=i.triggerRef.current)==null||d.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:Me(e.onInteractOutside,c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,m=d.button===2||f;(!i.modal||m)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_T.displayName=jT;var $V="DropdownMenuGroup",zV=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(SV,{...i,...r,ref:t})});zV.displayName=$V;var BV="DropdownMenuLabel",NT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(kV,{...i,...r,ref:t})});NT.displayName=BV;var VV="DropdownMenuItem",ST=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(CV,{...i,...r,ref:t})});ST.displayName=VV;var UV="DropdownMenuCheckboxItem",kT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(PV,{...i,...r,ref:t})});kT.displayName=UV;var qV="DropdownMenuRadioGroup",HV=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(EV,{...i,...r,ref:t})});HV.displayName=qV;var WV="DropdownMenuRadioItem",CT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(TV,{...i,...r,ref:t})});CT.displayName=WV;var ZV="DropdownMenuItemIndicator",PT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(AV,{...i,...r,ref:t})});PT.displayName=ZV;var GV="DropdownMenuSeparator",ET=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(OV,{...i,...r,ref:t})});ET.displayName=GV;var KV="DropdownMenuArrow",YV=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(RV,{...i,...r,ref:t})});YV.displayName=KV;var XV="DropdownMenuSubTrigger",TT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(LV,{...i,...r,ref:t})});TT.displayName=XV;var QV="DropdownMenuSubContent",AT=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=Ns(s);return n.jsx(MV,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});AT.displayName=QV;var JV=xT,e9=bT,t9=wT,OT=_T,RT=NT,LT=ST,MT=kT,IT=CT,DT=PT,FT=ET,$T=TT,zT=AT;const yc=JV,bc=e9,n9=j.forwardRef(({className:e,inset:t,children:s,...r},i)=>n.jsxs($T,{ref:i,className:We("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[s,n.jsx(mc,{className:"ml-auto h-4 w-4"})]}));n9.displayName=$T.displayName;const s9=j.forwardRef(({className:e,...t},s)=>n.jsx(zT,{ref:s,className:We("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));s9.displayName=zT.displayName;const Zo=j.forwardRef(({className:e,sideOffset:t=4,...s},r)=>n.jsx(t9,{children:n.jsx(OT,{ref:r,sideOffset:t,className:We("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Zo.displayName=OT.displayName;const po=j.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(LT,{ref:r,className:We("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));po.displayName=LT.displayName;const r9=j.forwardRef(({className:e,children:t,checked:s,...r},i)=>n.jsxs(MT,{ref:i,className:We("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(DT,{children:n.jsx(tp,{className:"h-4 w-4"})})}),t]}));r9.displayName=MT.displayName;const i9=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(IT,{ref:r,className:We("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(DT,{children:n.jsx(xP,{className:"h-2 w-2 fill-current"})})}),t]}));i9.displayName=IT.displayName;const a9=j.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(RT,{ref:r,className:We("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));a9.displayName=RT.displayName;const o9=j.forwardRef(({className:e,...t},s)=>n.jsx(FT,{ref:s,className:We("-mx-1 my-1 h-px bg-muted",e),...t}));o9.displayName=FT.displayName;var BT={exports:{}},VT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wc=j;function l9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var c9=typeof Object.is=="function"?Object.is:l9,d9=wc.useState,u9=wc.useEffect,h9=wc.useLayoutEffect,f9=wc.useDebugValue;function m9(e,t){var s=t(),r=d9({inst:{value:s,getSnapshot:t}}),i=r[0].inst,a=r[1];return h9(function(){i.value=s,i.getSnapshot=t,fv(i)&&a({inst:i})},[e,s,t]),u9(function(){return fv(i)&&a({inst:i}),e(function(){fv(i)&&a({inst:i})})},[e]),f9(s),s}function fv(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!c9(e,s)}catch{return!0}}function p9(e,t){return t()}var g9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p9:m9;VT.useSyncExternalStore=wc.useSyncExternalStore!==void 0?wc.useSyncExternalStore:g9;BT.exports=VT;var v9=BT.exports;function x9(){return v9.useSyncExternalStore(y9,()=>!0,()=>!1)}function y9(){return()=>{}}var $b="Avatar",[b9,Sse]=ls($b),[w9,UT]=b9($b),qT=j.forwardRef((e,t)=>{const{__scopeAvatar:s,...r}=e,[i,a]=j.useState("idle");return n.jsx(w9,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:n.jsx(Ye.span,{...r,ref:t})})});qT.displayName=$b;var HT="AvatarImage",WT=j.forwardRef((e,t)=>{const{__scopeAvatar:s,src:r,onLoadingStatusChange:i=()=>{},...a}=e,o=UT(HT,s),c=j9(r,a),d=vn(f=>{i(f),o.onImageLoadingStatusChange(f)});return kn(()=>{c!=="idle"&&d(c)},[c,d]),c==="loaded"?n.jsx(Ye.img,{...a,ref:t,src:r}):null});WT.displayName=HT;var ZT="AvatarFallback",GT=j.forwardRef((e,t)=>{const{__scopeAvatar:s,delayMs:r,...i}=e,a=UT(ZT,s),[o,c]=j.useState(r===void 0);return j.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(d)}},[r]),o&&a.imageLoadingStatus!=="loaded"?n.jsx(Ye.span,{...i,ref:t}):null});GT.displayName=ZT;function t1(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function j9(e,{referrerPolicy:t,crossOrigin:s}){const r=x9(),i=j.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,c]=j.useState(()=>t1(a,e));return kn(()=>{c(t1(a,e))},[a,e]),kn(()=>{const d=h=>()=>{c(h)};if(!a)return;const f=d("loaded"),m=d("error");return a.addEventListener("load",f),a.addEventListener("error",m),t&&(a.referrerPolicy=t),typeof s=="string"&&(a.crossOrigin=s),()=>{a.removeEventListener("load",f),a.removeEventListener("error",m)}},[a,s,t]),o}var KT=qT,YT=WT,XT=GT;const ea=j.forwardRef(({className:e,...t},s)=>n.jsx(KT,{ref:s,className:We("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ea.displayName=KT.displayName;const Mr=j.forwardRef(({className:e,...t},s)=>n.jsx(YT,{ref:s,className:We("aspect-square h-full w-full",e),...t}));Mr.displayName=YT.displayName;const ta=j.forwardRef(({className:e,...t},s)=>n.jsx(XT,{ref:s,className:We("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));ta.displayName=XT.displayName;function _9(){st();const{navigateWithAuth:e}=Bc(),[t,s]=j.useState({city:"Getting location...",area:"Please wait"}),[r,i]=j.useState([]),[a,o]=j.useState(0),{notifications:c,unreadCount:d,markAsRead:f,markAllAsRead:m}=Uz();j.useEffect(()=>{const y=async()=>{if(await Re.isAuthenticated()){h();const w=setInterval(h,5e3);return()=>clearInterval(w)}};p(),y()},[]);const h=async()=>{var y,v;try{if(!await Re.getToken())return;const x=await Us.getConversations(),b=Array.isArray(x)?x:(x==null?void 0:x.results)||[];r.length>0&&b.forEach(N=>{var I,k;const C=r.find(E=>E.id===N.id);C&&N.unread_count>C.unread_count&&u(`New message from ${(I=N.other_participant)==null?void 0:I.username}`,((k=N.last_message)==null?void 0:k.content)||"New message received")}),i(b);const _=b.reduce((N,C)=>N+(C.unread_count||0),0);o(_)}catch(w){!((y=w.message)!=null&&y.includes("401"))&&!((v=w.message)!=null&&v.includes("Unauthorized"))&&console.error("Failed to load conversations:",w)}},u=(y,v)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(y,{body:v,icon:"/favicon.ico"})},p=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async y=>{const{latitude:v,longitude:w}=y.coords;try{const b=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${v}&lon=${w}&addressdetails=1`)).json();if(b.address){const _=b.address.road||b.address.neighbourhood,N=b.address.neighbourhood||b.address.suburb||b.address.city||b.address.town||b.address.village||b.address.county;s({city:_||N||"Unknown City",area:`${b.address.neighbourhood||b.address.suburb||b.address.city||b.address.town||b.address.state||""}${b.address.city_district?`, ${b.address.city_district}`:""}`})}else s({city:"Location found",area:`${v.toFixed(4)}, ${w.toFixed(4)}`})}catch{s({city:"Location unavailable",area:"Service error"})}},y=>{s({city:"Location denied",area:"Enable location access"})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):s({city:"Location not supported",area:"Browser not compatible"})};return n.jsxs("div",{className:"sticky top-0 z-50 flex items-center justify-between px-3 py-2 md:py-1 bg-card/95 backdrop-blur-sm border-b border-border/30 min-h-[60px] md:min-h-[50px]",children:[n.jsx("div",{className:"flex items-center",children:n.jsx("img",{src:Wa,alt:"Ezeyway",className:"h-20 w-20 md:h-12 md:w-24 object-contain"})}),n.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer text-center",onClick:p,children:[n.jsx(Kt,{className:"h-3 w-3 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-foreground",children:t.city}),n.jsx("p",{className:"text-[10px] text-muted-foreground",children:t.area})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(yc,{children:[n.jsx(bc,{asChild:!0,children:n.jsxs("button",{className:"p-1.5 hover:bg-muted rounded-lg transition-smooth relative",children:[n.jsx(Ro,{className:"h-5 w-5 text-foreground"}),a>0&&n.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xs text-white font-bold",children:a>9?"9+":a})})]})}),n.jsxs(Zo,{align:"end",className:"w-80",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h4",{className:"font-semibold",children:"Messages"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/messages"),className:"text-xs",children:"View all"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No messages"}):r.slice(0,5).map(y=>{var v,w,x,b,_,N;return n.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${y.unread_count>0?"bg-blue-50/50":""}`,onClick:()=>e("/messages"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(ea,{className:"h-8 w-8",children:[n.jsx(Mr,{src:(v=y.other_participant)==null?void 0:v.profile_picture}),n.jsx(ta,{children:(x=(w=y.other_participant)==null?void 0:w.username)==null?void 0:x.charAt(0)})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:(b=y.other_participant)==null?void 0:b.username}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((_=y.last_message)==null?void 0:_.content)||((N=y.last_message)==null?void 0:N.file_name)||"No messages"})]}),y.unread_count>0&&n.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xs text-white font-bold",children:y.unread_count})})]})},y.id)})})]})]}),n.jsxs(yc,{children:[n.jsx(bc,{asChild:!0,children:n.jsxs("button",{className:"relative p-1.5 hover:bg-muted rounded-lg transition-smooth",children:[n.jsx(ir,{className:"h-5 w-5 text-foreground"}),d>0&&n.jsx(Ie,{className:"absolute -top-0.5 -right-0.5 h-4 w-4 rounded-full p-0 text-[10px] flex items-center justify-center min-w-[16px] bg-destructive text-destructive-foreground",children:d>9?"9+":d})]})}),n.jsxs(Zo,{align:"end",className:"w-80",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h4",{className:"font-semibold",children:"Notifications"}),n.jsxs("div",{className:"flex gap-2",children:[d>0&&n.jsx(ne,{variant:"ghost",size:"sm",onClick:m,className:"text-xs",children:"Mark all read"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/notifications"),className:"text-xs",children:"View all"})]})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:c.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):c.slice(0,5).map(y=>n.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${y.read?"":"bg-blue-50/50"}`,onClick:()=>{f(y.id),y.action_url&&e(y.action_url)},children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${y.read?"bg-transparent":"bg-blue-500"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm font-medium ${y.read?"text-gray-700":"text-gray-900"}`,children:y.title}),n.jsx("p",{className:`text-sm ${y.read?"text-gray-600":"text-gray-700"}`,children:y.message}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(y.created_at).toLocaleString()})]}),n.jsx(Ie,{variant:"outline",className:`text-xs ${y.type==="order"?"border-green-200 text-green-700":y.type==="payment"?"border-blue-200 text-blue-700":y.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:y.type})]})},y.id))})]})]})]})]})}const N9=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),y=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return d*v/1e3};function S9(){const[e,t]=j.useState(""),[s,r]=j.useState([]),[i,a]=j.useState(!1),[o,c]=j.useState(!1),d=st();hn();const f=j.useRef(null),m=j.useRef(null);j.useEffect(()=>{const x=b=>{f.current&&!f.current.contains(b.target)&&m.current&&!m.current.contains(b.target)&&a(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),j.useEffect(()=>{e.trim().length>1?h(e.trim()):(r([]),a(!1))},[e]);const h=async x=>{c(!0);try{const b=await Re.getToken(),_=b?{Authorization:`Token ${b}`}:{},N=xt.getLocation(),C=new URLSearchParams({search:x,page_size:"5"});N&&(C.append("latitude",N.latitude.toString()),C.append("longitude",N.longitude.toString()));const k=await(await fetch(`${rt}search/products/?${C}`,{headers:_})).json(),E=u(k.results||[]);r(E),a(!0)}catch(b){console.error("Search error:",b)}finally{c(!1)}},u=x=>{const b=xt.getLocation();return x.map(_=>{var I,k;const N=((I=_.images)==null?void 0:I.find(E=>E.is_primary))||((k=_.images)==null?void 0:k[0]);let C="N/A";return b&&_.vendor_latitude&&_.vendor_longitude&&(C=`${N9(b.latitude,b.longitude,_.vendor_latitude,_.vendor_longitude).toFixed(1)} km`),{id:_.id,name:_.name,vendor:_.vendor_name||"Unknown Vendor",price:`₹${_.price}`,image:(N==null?void 0:N.image_url)||"/placeholder-product.jpg",distance:C,category:_.category}})},p=x=>{x.preventDefault(),e.trim()&&(d(`/search?q=${encodeURIComponent(e.trim())}`),a(!1))},y=x=>{t(x.target.value)},v=x=>{d(`/product/${x}`),a(!1),t("")},w=()=>{e.trim()&&(d(`/search?q=${encodeURIComponent(e.trim())}`),a(!1))};return n.jsxs("div",{className:"px-3 py-2 bg-background relative",children:[n.jsx("form",{onSubmit:p,className:"flex gap-2",children:n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Lo,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx("input",{ref:m,type:"text",placeholder:"Search products, vendors...",value:e,onChange:y,className:"w-full pl-9 pr-3 py-2.5 bg-muted/50 border border-border/50 rounded-lg text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth"})]})}),i&&n.jsx("div",{ref:f,className:"absolute top-full left-3 right-3 mt-1 bg-white border border-border rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",children:o?n.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Searching..."}):s.length>0?n.jsxs(n.Fragment,{children:[s.map(x=>n.jsxs("div",{onClick:()=>v(x.id),className:"flex items-center gap-3 p-3 hover:bg-muted/50 cursor-pointer border-b border-border/50 last:border-b-0",children:[n.jsx("img",{src:x.image,alt:x.name,className:"w-10 h-10 object-cover rounded",onError:b=>{b.target.src="/placeholder-product.jpg"}}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-sm truncate",children:x.name}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:x.vendor}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"text-xs font-medium text-primary",children:x.price}),n.jsx("span",{className:"text-xs text-muted-foreground",children:x.distance})]})]})]},x.id)),n.jsx("div",{className:"p-3 border-t border-border",children:n.jsxs("button",{onClick:w,className:"w-full text-center text-sm text-primary hover:text-primary/80 font-medium",children:['View all results for "',e,'"']})})]}):e.trim().length>1?n.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:['No results found for "',e,'"']}):null})]})}const n1={Electronics:"📱",Fashion:"👕",Food:"🍕",Home:"🏠",Books:"📚",Sports:"⚽",Beauty:"💄",Toys:"🧸",Jewelry:"💍",Furniture:"🪑",Automotive:"🚗",Health:"💊","Pet Supplies":"🐕",Stationery:"✏️",Garden:"🌳",Kids:"👶",Appliances:"🔌",Hardware:"🔧",Crafts:"🎨",Travel:"🧳",Grocery:"🛒",Vegetables:"🥬",Fruits:"🍎",Dairy:"🥛",Meat:"🥩",Bakery:"🍞",Beverages:"🥤",Snacks:"🍿",Organic:"🌱"};function k9(){const[e,t]=j.useState([]),[s,r]=j.useState(!0),i=st();return j.useEffect(()=>{(async()=>{try{const o=await fetch(rt+"categories/"),c=await o.json();if(o.ok&&c.categories){const d=c.categories.map((f,m)=>({id:f.id||m+1,name:f.name,icon:f.icon_url||n1[f.name]||"📦",hasImage:!!f.icon_url}));t(d)}}catch(o){console.error("Error fetching categories:",o),t([])}finally{r(!1)}})()},[]),s?n.jsx("div",{className:"px-2 py-2 bg-gray-50",children:n.jsx("div",{className:"flex gap-3 overflow-x-auto",children:[...Array(6)].map((a,o)=>n.jsx("div",{className:"flex-none w-16",children:n.jsxs("div",{className:"w-full p-1 rounded-xl bg-gray-200 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-300 rounded mb-1"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded"})]})},o))})}):e.length===0?n.jsx("div",{className:"px-2 py-2 bg-gray-50",children:n.jsx("div",{className:"text-center text-gray-500 text-sm py-4",children:"No categories available"})}):n.jsx("div",{className:"px-2 py-2 bg-gray-50",children:n.jsx("div",{className:"flex gap-3 overflow-x-auto overflow-y-hidden pb-2",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:e.map(a=>n.jsxs("button",{className:"flex-none px-3 py-1 rounded-xl font-medium text-center transition-all duration-200 bg-white text-gray-800 hover:bg-gray-100 active:scale-95 focus:outline-none min-w-16 touch-manipulation",onClick:()=>i(`/category/${encodeURIComponent(a.name)}`),children:[n.jsxs("div",{className:"mb-1 flex items-center justify-center h-8",children:[a.hasImage?n.jsx("img",{src:a.icon,alt:a.name,className:"w-8 h-8 object-contain",onError:o=>{o.target.style.display="none",o.target.nextSibling.style.display="block"}}):n.jsx("div",{className:"text-2xl",children:a.icon}),a.hasImage&&n.jsx("div",{className:"text-2xl",style:{display:"none"},children:n1[a.name]||"📦"})]}),n.jsx("div",{className:"text-xs font-semibold whitespace-nowrap",children:a.name})]},a.id))})})}const C9="/assets/banner-grocery.jpg",P9="/assets/banner-electronics.jpg",E9="/assets/banner-food.jpg",T9=[{id:1,image:C9,title:"Fresh Groceries",subtitle:"Same day delivery"},{id:2,image:P9,title:"Electronics & Gadgets",subtitle:"Best prices guaranteed"},{id:3,image:E9,title:"Traditional Food",subtitle:"Authentic Nepali cuisine"}];function A9(){const[e,t]=j.useState(1),[s,r]=j.useState(!1),[i,a]=j.useState(0),[o,c]=j.useState(0),[d,f]=j.useState([]),[m,h]=j.useState(!0),[u,p]=j.useState(!0),y=j.useRef(null),v=d.length>0?d.map(I=>({id:I.id,image:I.image_url,title:I.title,subtitle:I.description||"",link_url:I.link_url})):T9,w=v.length>0?[v[v.length-1],...v,v[0]]:[],x=I=>{r(!0),a(I.touches[0].clientX),c(I.touches[0].clientX)},b=I=>{s&&c(I.touches[0].clientX)},_=()=>{if(!s)return;const I=i-o;Math.abs(I)>50&&(I>0&&e<v.length?t(E=>E+1):I<0&&e>1&&t(E=>E-1)),r(!1),c(0)},N=I=>{I.link_url&&window.open(I.link_url,"_blank")};j.useEffect(()=>{if(v.length>0){const I=setInterval(()=>{t(k=>k+1)},4e3);return()=>clearInterval(I)}},[v.length]),j.useEffect(()=>{v.length>0&&(e===w.length-1?setTimeout(()=>{p(!1),t(1),setTimeout(()=>p(!0),50)},500):e===0&&setTimeout(()=>{p(!1),t(v.length),setTimeout(()=>p(!0),50)},500))},[e,v.length]),j.useEffect(()=>{(async()=>{try{const{API_BASE:k}=await Xe(async()=>{const{API_BASE:P}=await Promise.resolve().then(()=>Tz);return{API_BASE:P}},void 0),E=await fetch(k+"sliders/?user_type=customer"),M=await E.json();E.ok&&M&&M.sliders?(f(M.sliders),t(1)):f([])}catch(k){console.error("Error fetching sliders:",k),f([])}finally{h(!1)}})()},[]);const C=()=>{var k;if(window.innerWidth<768){if(s){const E=o-i,M=100,P=E/(((k=y.current)==null?void 0:k.offsetWidth)||1)*100,T=Math.max(-M,Math.min(M,P));return`translateX(calc(-${e*100}% + ${T}px))`}return`translateX(-${e*100}%)`}else return`translateX(calc(-${e*50}% + 25%))`};return m?n.jsx("div",{className:"mb-6",children:n.jsx("div",{className:"relative overflow-hidden rounded-2xl shadow-brand h-48 bg-gray-100 flex items-center justify-center",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[n.jsx(Vn,{className:"h-5 w-5 animate-spin"}),n.jsx("span",{children:"Loading banners..."})]})})}):n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative md:overflow-visible overflow-hidden md:px-8",children:[n.jsx("div",{ref:y,className:`flex ${u?"transition-transform duration-500 ease-in-out":""}`,style:{transform:C()},onTouchStart:x,onTouchMove:b,onTouchEnd:_,children:(w.length>0?w:v).map((I,k)=>{const E=window.innerWidth<768,M=!E&&k===e;return n.jsx("div",{className:`flex-shrink-0 relative cursor-pointer transition-all duration-300 ${E?"w-full rounded-2xl shadow-brand overflow-hidden":`${M?"scale-100 opacity-100 z-10":"scale-75 opacity-60 z-0"} rounded-lg overflow-hidden`}`,style:E?{}:{width:"50%"},onClick:()=>N(I),children:n.jsx("img",{src:I.image,alt:I.title,className:"w-full h-48 md:h-auto md:max-h-64 object-cover md:object-contain",onError:P=>{P.target.style.display="none",P.target.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}})},`${I.id}-${k}`)})}),v.length>1&&n.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-1",children:v.map((I,k)=>n.jsx("button",{onClick:()=>t(k+1),className:`w-2 h-2 rounded-full transition-colors ${k===(e-1+v.length)%v.length?"bg-blue-500":"bg-gray-300"}`},k))})]})})}const zb=j.createContext({});function Bb(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const Vb=typeof window<"u",QT=Vb?j.useLayoutEffect:j.useEffect,jp=j.createContext(null);function Ub(e,t){e.indexOf(t)===-1&&e.push(t)}function qb(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const na=(e,t,s)=>s>t?t:s<e?e:s;let cm=()=>{};const sa={},JT=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function eA(e){return typeof e=="object"&&e!==null}const tA=e=>/^0[^.\s]+$/u.test(e);function Hb(e){let t;return()=>(t===void 0&&(t=e()),t)}const cr=e=>e,O9=(e,t)=>s=>t(e(s)),sh=(...e)=>e.reduce(O9),Ru=(e,t,s)=>{const r=t-e;return r===0?1:(s-e)/r};class Wb{constructor(){this.subscriptions=[]}add(t){return Ub(this.subscriptions,t),()=>qb(this.subscriptions,t)}notify(t,s,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,s,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const hi=e=>e*1e3,fi=e=>e/1e3;function nA(e,t){return t?e*(1e3/t):0}const sA=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,R9=1e-7,L9=12;function M9(e,t,s,r,i){let a,o,c=0;do o=t+(s-t)/2,a=sA(o,r,i)-e,a>0?s=o:t=o;while(Math.abs(a)>R9&&++c<L9);return o}function rh(e,t,s,r){if(e===t&&s===r)return cr;const i=a=>M9(a,0,1,e,s);return a=>a===0||a===1?a:sA(i(a),t,r)}const rA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,iA=e=>t=>1-e(1-t),aA=rh(.33,1.53,.69,.99),Zb=iA(aA),oA=rA(Zb),lA=e=>(e*=2)<1?.5*Zb(e):.5*(2-Math.pow(2,-10*(e-1))),Gb=e=>1-Math.sin(Math.acos(e)),cA=iA(Gb),dA=rA(Gb),I9=rh(.42,0,1,1),D9=rh(0,0,.58,1),uA=rh(.42,0,.58,1),F9=e=>Array.isArray(e)&&typeof e[0]!="number",hA=e=>Array.isArray(e)&&typeof e[0]=="number",s1={linear:cr,easeIn:I9,easeInOut:uA,easeOut:D9,circIn:Gb,circInOut:dA,circOut:cA,backIn:Zb,backInOut:oA,backOut:aA,anticipate:lA},$9=e=>typeof e=="string",r1=e=>{if(hA(e)){cm(e.length===4);const[t,s,r,i]=e;return rh(t,s,r,i)}else if($9(e))return cm(s1[e]!==void 0),s1[e];return e},ef=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],i1={value:null,addProjectionMetrics:null};function z9(e,t){let s=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function f(h){o.has(h)&&(m.schedule(h),e()),d++,h(c)}const m={schedule:(h,u=!1,p=!1)=>{const v=p&&i?s:r;return u&&o.add(h),v.has(h)||v.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(c=h,i){a=!0;return}i=!0,[s,r]=[r,s],s.forEach(f),t&&i1.value&&i1.value.frameloop[t].push(d),d=0,s.clear(),i=!1,a&&(a=!1,m.process(h))}};return m}const B9=40;function fA(e,t){let s=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,o=ef.reduce((_,N)=>(_[N]=z9(a,t?N:void 0),_),{}),{setup:c,read:d,resolveKeyframes:f,preUpdate:m,update:h,preRender:u,render:p,postRender:y}=o,v=()=>{const _=sa.useManualTiming?i.timestamp:performance.now();s=!1,sa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,B9),1)),i.timestamp=_,i.isProcessing=!0,c.process(i),d.process(i),f.process(i),m.process(i),h.process(i),u.process(i),p.process(i),y.process(i),i.isProcessing=!1,s&&t&&(r=!1,e(v))},w=()=>{s=!0,r=!0,i.isProcessing||e(v)};return{schedule:ef.reduce((_,N)=>{const C=o[N];return _[N]=(I,k=!1,E=!1)=>(s||w(),C.schedule(I,k,E)),_},{}),cancel:_=>{for(let N=0;N<ef.length;N++)o[ef[N]].cancel(_)},state:i,steps:o}}const{schedule:nn,cancel:Za,state:Zn,steps:mv}=fA(typeof requestAnimationFrame<"u"?requestAnimationFrame:cr,!0);let Nf;function V9(){Nf=void 0}const As={now:()=>(Nf===void 0&&As.set(Zn.isProcessing||sa.useManualTiming?Zn.timestamp:performance.now()),Nf),set:e=>{Nf=e,queueMicrotask(V9)}},mA=e=>t=>typeof t=="string"&&t.startsWith(e),Kb=mA("--"),U9=mA("var(--"),Yb=e=>U9(e)?q9.test(e.split("/*")[0].trim()):!1,q9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,qc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Lu={...qc,transform:e=>na(0,1,e)},tf={...qc,default:1},Gd=e=>Math.round(e*1e5)/1e5,Xb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function H9(e){return e==null}const W9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qb=(e,t)=>s=>!!(typeof s=="string"&&W9.test(s)&&s.startsWith(e)||t&&!H9(s)&&Object.prototype.hasOwnProperty.call(s,t)),pA=(e,t,s)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(Xb);return{[e]:parseFloat(i),[t]:parseFloat(a),[s]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},Z9=e=>na(0,255,e),pv={...qc,transform:e=>Math.round(Z9(e))},jo={test:Qb("rgb","red"),parse:pA("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:r=1})=>"rgba("+pv.transform(e)+", "+pv.transform(t)+", "+pv.transform(s)+", "+Gd(Lu.transform(r))+")"};function G9(e){let t="",s="",r="",i="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,s+=s,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Yx={test:Qb("#"),parse:G9,transform:jo.transform},ih=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ma=ih("deg"),mi=ih("%"),ct=ih("px"),K9=ih("vh"),Y9=ih("vw"),a1={...mi,parse:e=>mi.parse(e)/100,transform:e=>mi.transform(e*100)},Rl={test:Qb("hsl","hue"),parse:pA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+mi.transform(Gd(t))+", "+mi.transform(Gd(s))+", "+Gd(Lu.transform(r))+")"},On={test:e=>jo.test(e)||Yx.test(e)||Rl.test(e),parse:e=>jo.test(e)?jo.parse(e):Rl.test(e)?Rl.parse(e):Yx.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?jo.transform(e):Rl.transform(e),getAnimatableNone:e=>{const t=On.parse(e);return t.alpha=0,On.transform(t)}},X9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Q9(e){var t,s;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Xb))==null?void 0:t.length)||0)+(((s=e.match(X9))==null?void 0:s.length)||0)>0}const gA="number",vA="color",J9="var",e7="var(",o1="${}",t7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Mu(e){const t=e.toString(),s=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=t.replace(t7,d=>(On.test(d)?(r.color.push(a),i.push(vA),s.push(On.parse(d))):d.startsWith(e7)?(r.var.push(a),i.push(J9),s.push(d)):(r.number.push(a),i.push(gA),s.push(parseFloat(d))),++a,o1)).split(o1);return{values:s,split:c,indexes:r,types:i}}function xA(e){return Mu(e).values}function yA(e){const{split:t,types:s}=Mu(e),r=t.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],i[o]!==void 0){const c=s[o];c===gA?a+=Gd(i[o]):c===vA?a+=On.transform(i[o]):a+=i[o]}return a}}const n7=e=>typeof e=="number"?0:On.test(e)?On.getAnimatableNone(e):e;function s7(e){const t=xA(e);return yA(e)(t.map(n7))}const Ga={test:Q9,parse:xA,createTransformer:yA,getAnimatableNone:s7};function gv(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function r7({hue:e,saturation:t,lightness:s,alpha:r}){e/=360,t/=100,s/=100;let i=0,a=0,o=0;if(!t)i=a=o=s;else{const c=s<.5?s*(1+t):s+t-s*t,d=2*s-c;i=gv(d,c,e+1/3),a=gv(d,c,e),o=gv(d,c,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function dm(e,t){return s=>s>0?t:e}const ln=(e,t,s)=>e+(t-e)*s,vv=(e,t,s)=>{const r=e*e,i=s*(t*t-r)+r;return i<0?0:Math.sqrt(i)},i7=[Yx,jo,Rl],a7=e=>i7.find(t=>t.test(e));function l1(e){const t=a7(e);if(!t)return!1;let s=t.parse(e);return t===Rl&&(s=r7(s)),s}const c1=(e,t)=>{const s=l1(e),r=l1(t);if(!s||!r)return dm(e,t);const i={...s};return a=>(i.red=vv(s.red,r.red,a),i.green=vv(s.green,r.green,a),i.blue=vv(s.blue,r.blue,a),i.alpha=ln(s.alpha,r.alpha,a),jo.transform(i))},Xx=new Set(["none","hidden"]);function o7(e,t){return Xx.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function l7(e,t){return s=>ln(e,t,s)}function Jb(e){return typeof e=="number"?l7:typeof e=="string"?Yb(e)?dm:On.test(e)?c1:u7:Array.isArray(e)?bA:typeof e=="object"?On.test(e)?c1:c7:dm}function bA(e,t){const s=[...e],r=s.length,i=e.map((a,o)=>Jb(a)(a,t[o]));return a=>{for(let o=0;o<r;o++)s[o]=i[o](a);return s}}function c7(e,t){const s={...e,...t},r={};for(const i in s)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Jb(e[i])(e[i],t[i]));return i=>{for(const a in r)s[a]=r[a](i);return s}}function d7(e,t){const s=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],o=e.indexes[a][r[a]],c=e.values[o]??0;s[i]=c,r[a]++}return s}const u7=(e,t)=>{const s=Ga.createTransformer(t),r=Mu(e),i=Mu(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Xx.has(e)&&!i.values.length||Xx.has(t)&&!r.values.length?o7(e,t):sh(bA(d7(r,i),i.values),s):dm(e,t)};function wA(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?ln(e,t,s):Jb(e)(e,t)}const h7=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>nn.update(t,s),stop:()=>Za(t),now:()=>Zn.isProcessing?Zn.timestamp:As.now()}},jA=(e,t,s=10)=>{let r="";const i=Math.max(Math.round(t/s),2);for(let a=0;a<i;a++)r+=Math.round(e(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},um=2e4;function ew(e){let t=0;const s=50;let r=e.next(t);for(;!r.done&&t<um;)t+=s,r=e.next(t);return t>=um?1/0:t}function f7(e,t=100,s){const r=s({...e,keyframes:[0,t]}),i=Math.min(ew(r),um);return{type:"keyframes",ease:a=>r.next(i*a).value/t,duration:fi(i)}}const m7=5;function _A(e,t,s){const r=Math.max(t-m7,0);return nA(s-e(r),t-r)}const mn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xv=.001;function p7({duration:e=mn.duration,bounce:t=mn.bounce,velocity:s=mn.velocity,mass:r=mn.mass}){let i,a,o=1-t;o=na(mn.minDamping,mn.maxDamping,o),e=na(mn.minDuration,mn.maxDuration,fi(e)),o<1?(i=f=>{const m=f*o,h=m*e,u=m-s,p=Qx(f,o),y=Math.exp(-h);return xv-u/p*y},a=f=>{const h=f*o*e,u=h*s+s,p=Math.pow(o,2)*Math.pow(f,2)*e,y=Math.exp(-h),v=Qx(Math.pow(f,2),o);return(-i(f)+xv>0?-1:1)*((u-p)*y)/v}):(i=f=>{const m=Math.exp(-f*e),h=(f-s)*e+1;return-xv+m*h},a=f=>{const m=Math.exp(-f*e),h=(s-f)*(e*e);return m*h});const c=5/e,d=v7(i,a,c);if(e=hi(e),isNaN(d))return{stiffness:mn.stiffness,damping:mn.damping,duration:e};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:o*2*Math.sqrt(r*f),duration:e}}}const g7=12;function v7(e,t,s){let r=s;for(let i=1;i<g7;i++)r=r-e(r)/t(r);return r}function Qx(e,t){return e*Math.sqrt(1-t*t)}const x7=["duration","bounce"],y7=["stiffness","damping","mass"];function d1(e,t){return t.some(s=>e[s]!==void 0)}function b7(e){let t={velocity:mn.velocity,stiffness:mn.stiffness,damping:mn.damping,mass:mn.mass,isResolvedFromDuration:!1,...e};if(!d1(e,y7)&&d1(e,x7))if(e.visualDuration){const s=e.visualDuration,r=2*Math.PI/(s*1.2),i=r*r,a=2*na(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:mn.mass,stiffness:i,damping:a}}else{const s=p7(e);t={...t,...s,mass:mn.mass},t.isResolvedFromDuration=!0}return t}function hm(e=mn.visualDuration,t=mn.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=s;const a=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],c={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:h,velocity:u,isResolvedFromDuration:p}=b7({...s,velocity:-fi(s.velocity||0)}),y=u||0,v=f/(2*Math.sqrt(d*m)),w=o-a,x=fi(Math.sqrt(d/m)),b=Math.abs(w)<5;r||(r=b?mn.restSpeed.granular:mn.restSpeed.default),i||(i=b?mn.restDelta.granular:mn.restDelta.default);let _;if(v<1){const C=Qx(x,v);_=I=>{const k=Math.exp(-v*x*I);return o-k*((y+v*x*w)/C*Math.sin(C*I)+w*Math.cos(C*I))}}else if(v===1)_=C=>o-Math.exp(-x*C)*(w+(y+x*w)*C);else{const C=x*Math.sqrt(v*v-1);_=I=>{const k=Math.exp(-v*x*I),E=Math.min(C*I,300);return o-k*((y+v*x*w)*Math.sinh(E)+C*w*Math.cosh(E))/C}}const N={calculatedDuration:p&&h||null,next:C=>{const I=_(C);if(p)c.done=C>=h;else{let k=C===0?y:0;v<1&&(k=C===0?hi(y):_A(_,C,I));const E=Math.abs(k)<=r,M=Math.abs(o-I)<=i;c.done=E&&M}return c.value=c.done?o:I,c},toString:()=>{const C=Math.min(ew(N),um),I=jA(k=>N.next(C*k).value,C,30);return C+"ms "+I},toTransition:()=>{}};return N}hm.applyToOptions=e=>{const t=f7(e,100,hm);return e.ease=t.ease,e.duration=hi(t.duration),e.type="keyframes",e};function Jx({keyframes:e,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:d,restDelta:f=.5,restSpeed:m}){const h=e[0],u={done:!1,value:h},p=E=>c!==void 0&&E<c||d!==void 0&&E>d,y=E=>c===void 0?d:d===void 0||Math.abs(c-E)<Math.abs(d-E)?c:d;let v=s*t;const w=h+v,x=o===void 0?w:o(w);x!==w&&(v=x-h);const b=E=>-v*Math.exp(-E/r),_=E=>x+b(E),N=E=>{const M=b(E),P=_(E);u.done=Math.abs(M)<=f,u.value=u.done?x:P};let C,I;const k=E=>{p(u.value)&&(C=E,I=hm({keyframes:[u.value,y(u.value)],velocity:_A(_,E,u.value),damping:i,stiffness:a,restDelta:f,restSpeed:m}))};return k(0),{calculatedDuration:null,next:E=>{let M=!1;return!I&&C===void 0&&(M=!0,N(E),k(E)),C!==void 0&&E>=C?I.next(E-C):(!M&&N(E),u)}}}function w7(e,t,s){const r=[],i=s||sa.mix||wA,a=e.length-1;for(let o=0;o<a;o++){let c=i(e[o],e[o+1]);if(t){const d=Array.isArray(t)?t[o]||cr:t;c=sh(d,c)}r.push(c)}return r}function j7(e,t,{clamp:s=!0,ease:r,mixer:i}={}){const a=e.length;if(cm(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=w7(t,r,i),d=c.length,f=m=>{if(o&&m<e[0])return t[0];let h=0;if(d>1)for(;h<e.length-2&&!(m<e[h+1]);h++);const u=Ru(e[h],e[h+1],m);return c[h](u)};return s?m=>f(na(e[0],e[a-1],m)):f}function _7(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const i=Ru(0,t,r);e.push(ln(s,1,i))}}function N7(e){const t=[0];return _7(t,e.length-1),t}function S7(e,t){return e.map(s=>s*t)}function k7(e,t){return e.map(()=>t||uA).splice(0,e.length-1)}function Kd({duration:e=300,keyframes:t,times:s,ease:r="easeInOut"}){const i=F9(r)?r.map(r1):r1(r),a={done:!1,value:t[0]},o=S7(s&&s.length===t.length?s:N7(t),e),c=j7(o,t,{ease:Array.isArray(i)?i:k7(t,i)});return{calculatedDuration:e,next:d=>(a.value=c(d),a.done=d>=e,a)}}const C7=e=>e!==null;function tw(e,{repeat:t,repeatType:s="loop"},r,i=1){const a=e.filter(C7),c=i<0||t&&s!=="loop"&&t%2===1?0:a.length-1;return!c||r===void 0?a[c]:r}const P7={decay:Jx,inertia:Jx,tween:Kd,keyframes:Kd,spring:hm};function NA(e){typeof e.type=="string"&&(e.type=P7[e.type])}class nw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const E7=e=>e/100;class sw extends nw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:s}=this.options;s&&s.updatedAt!==As.now()&&this.tick(As.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;NA(t);const{type:s=Kd,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=t;let{keyframes:c}=t;const d=s||Kd;d!==Kd&&typeof c[0]!="number"&&(this.mixKeyframes=sh(E7,wA(c[0],c[1])),c=[0,100]);const f=d({...t,keyframes:c});a==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=ew(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:m,repeat:h,repeatType:u,repeatDelay:p,type:y,onUpdate:v,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const x=this.currentTime-f*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?x<0:x>i;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,N=r;if(h){const E=Math.min(this.currentTime,i)/c;let M=Math.floor(E),P=E%1;!P&&E>=1&&(P=1),P===1&&M--,M=Math.min(M,h+1),!!(M%2)&&(u==="reverse"?(P=1-P,p&&(P-=p/c)):u==="mirror"&&(N=o)),_=na(0,1,P)*c}const C=b?{done:!1,value:m[0]}:N.next(_);a&&(C.value=a(C.value));let{done:I}=C;!b&&d!==null&&(I=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return k&&y!==Jx&&(C.value=tw(m,this.options,w,this.speed)),v&&v(C.value),k&&this.finish(),C}then(t,s){return this.finished.then(t,s)}get duration(){return fi(this.calculatedDuration)}get time(){return fi(this.currentTime)}set time(t){var s;t=hi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(As.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=fi(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:t=h7,startTime:s}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(As.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(t=this.options).onComplete)==null||s.call(t)}cancel(){var t,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(t=this.options).onCancel)==null||s.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),t.observe(this)}}function T7(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const _o=e=>e*180/Math.PI,ey=e=>{const t=_o(Math.atan2(e[1],e[0]));return ty(t)},A7={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ey,rotateZ:ey,skewX:e=>_o(Math.atan(e[1])),skewY:e=>_o(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ty=e=>(e=e%360,e<0&&(e+=360),e),u1=ey,h1=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),f1=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),O7={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:h1,scaleY:f1,scale:e=>(h1(e)+f1(e))/2,rotateX:e=>ty(_o(Math.atan2(e[6],e[5]))),rotateY:e=>ty(_o(Math.atan2(-e[2],e[0]))),rotateZ:u1,rotate:u1,skewX:e=>_o(Math.atan(e[4])),skewY:e=>_o(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function ny(e){return e.includes("scale")?1:0}function sy(e,t){if(!e||e==="none")return ny(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(s)r=O7,i=s;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=A7,i=c}if(!i)return ny(t);const a=r[t],o=i[1].split(",").map(L7);return typeof a=="function"?a(o):o[a]}const R7=(e,t)=>{const{transform:s="none"}=getComputedStyle(e);return sy(s,t)};function L7(e){return parseFloat(e.trim())}const Hc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wc=new Set(Hc),m1=e=>e===qc||e===ct,M7=new Set(["x","y","z"]),I7=Hc.filter(e=>!M7.has(e));function D7(e){const t=[];return I7.forEach(s=>{const r=e.getValue(s);r!==void 0&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t}const Io={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>sy(t,"x"),y:(e,{transform:t})=>sy(t,"y")};Io.translateX=Io.x;Io.translateY=Io.y;const Do=new Set;let ry=!1,iy=!1,ay=!1;function SA(){if(iy){const e=Array.from(Do).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),s=new Map;t.forEach(r=>{const i=D7(r);i.length&&(s.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=s.get(r);i&&i.forEach(([a,o])=>{var c;(c=r.getValue(a))==null||c.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}iy=!1,ry=!1,Do.forEach(e=>e.complete(ay)),Do.clear()}function kA(){Do.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(iy=!0)})}function F7(){ay=!0,kA(),SA(),ay=!1}class rw{constructor(t,s,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Do.add(this),ry||(ry=!0,nn.read(kA),nn.resolveKeyframes(SA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:r,motionValue:i}=this;if(t[0]===null){const a=i==null?void 0:i.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&s){const c=r.readValue(s,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}T7(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Do.delete(this)}cancel(){this.state==="scheduled"&&(Do.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $7=e=>e.startsWith("--");function z7(e,t,s){$7(t)?e.style.setProperty(t,s):e.style[t]=s}const B7=Hb(()=>window.ScrollTimeline!==void 0),V7={};function U7(e,t){const s=Hb(e);return()=>V7[t]??s()}const CA=U7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ld=([e,t,s,r])=>`cubic-bezier(${e}, ${t}, ${s}, ${r})`,p1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ld([0,.65,.55,1]),circOut:Ld([.55,0,1,.45]),backIn:Ld([.31,.01,.66,-.59]),backOut:Ld([.33,1.53,.69,.99])};function PA(e,t){if(e)return typeof e=="function"?CA()?jA(e,t):"ease-out":hA(e)?Ld(e):Array.isArray(e)?e.map(s=>PA(s,t)||p1.easeOut):p1[e]}function q7(e,t,s,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:d}={},f=void 0){const m={[t]:s};d&&(m.offset=d);const h=PA(c,i);Array.isArray(h)&&(m.easing=h);const u={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return f&&(u.pseudoElement=f),e.animate(m,u)}function EA(e){return typeof e=="function"&&"applyToOptions"in e}function H7({type:e,...t}){return EA(e)&&CA()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class W7 extends nw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=t,cm(typeof t.type!="string");const f=H7(t);this.animation=q7(s,r,i,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=tw(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):z7(s,r,m),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,s;(s=(t=this.animation).finish)==null||s.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,s;this.isPseudoElement||(s=(t=this.animation).commitStyles)==null||s.call(t)}get duration(){var s,r;const t=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return fi(Number(t))}get time(){return fi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=hi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&B7()?(this.animation.timeline=t,cr):s(this)}}const TA={anticipate:lA,backInOut:oA,circInOut:dA};function Z7(e){return e in TA}function G7(e){typeof e.ease=="string"&&Z7(e.ease)&&(e.ease=TA[e.ease])}const g1=10;class K7 extends W7{constructor(t){G7(t),NA(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const c=new sw({...o,autoplay:!1}),d=hi(this.finishedTime??this.time);s.setWithVelocity(c.sample(d-g1).value,c.sample(d).value,g1),c.stop()}}const v1=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ga.test(e)||e==="0")&&!e.startsWith("url("));function Y7(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function X7(e,t,s,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=v1(i,t),c=v1(a,t);return!o||!c?!1:Y7(e)||(s==="spring"||EA(s))&&r}function oy(e){e.duration=0,e.type}const Q7=new Set(["opacity","clipPath","filter","transform"]),J7=Hb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function eU(e){var m;const{motionValue:t,name:s,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!(((m=t==null?void 0:t.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=t.owner.getProps();return J7()&&s&&Q7.has(s)&&(s!=="transform"||!f)&&!d&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const tU=40;class nU extends nw{constructor({autoplay:t=!0,delay:s=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:d,motionValue:f,element:m,...h}){var y;super(),this.stop=()=>{var v,w;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=As.now();const u={autoplay:t,delay:s,type:r,repeat:i,repeatDelay:a,repeatType:o,name:d,motionValue:f,element:m,...h},p=(m==null?void 0:m.KeyframeResolver)||rw;this.keyframeResolver=new p(c,(v,w,x)=>this.onKeyframesResolved(v,w,u,!x),d,f,m),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,s,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:d,isHandoff:f,onUpdate:m}=r;this.resolvedAt=As.now(),X7(t,a,o,c)||((sa.instantAnimations||!d)&&(m==null||m(tw(t,r,s))),t[0]=t[t.length-1],oy(r),r.repeat=0);const u={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>tU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:t},p=!f&&eU(u)?new K7({...u,element:u.motionValue.owner.current}):new sw(u);p.finished.then(()=>this.notifyFinished()).catch(cr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),F7()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const sU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function rU(e){const t=sU.exec(e);if(!t)return[,];const[,s,r,i]=t;return[`--${s??r}`,i]}function AA(e,t,s=1){const[r,i]=rU(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const o=a.trim();return JT(o)?parseFloat(o):o}return Yb(i)?AA(i,t,s+1):i}function iw(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const OA=new Set(["width","height","top","left","right","bottom",...Hc]),iU={test:e=>e==="auto",parse:e=>e},RA=e=>t=>t.test(e),LA=[qc,ct,mi,ma,Y9,K9,iU],x1=e=>LA.find(RA(e));function aU(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||tA(e):!0}const oU=new Set(["brightness","contrast","saturate","opacity"]);function lU(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=s.match(Xb)||[];if(!r)return e;const i=s.replace(r,"");let a=oU.has(t)?1:0;return r!==s&&(a*=100),t+"("+a+i+")"}const cU=/\b([a-z-]*)\(.*?\)/gu,ly={...Ga,getAnimatableNone:e=>{const t=e.match(cU);return t?t.map(lU).join(" "):e}},y1={...qc,transform:Math.round},dU={rotate:ma,rotateX:ma,rotateY:ma,rotateZ:ma,scale:tf,scaleX:tf,scaleY:tf,scaleZ:tf,skew:ma,skewX:ma,skewY:ma,distance:ct,translateX:ct,translateY:ct,translateZ:ct,x:ct,y:ct,z:ct,perspective:ct,transformPerspective:ct,opacity:Lu,originX:a1,originY:a1,originZ:ct},aw={borderWidth:ct,borderTopWidth:ct,borderRightWidth:ct,borderBottomWidth:ct,borderLeftWidth:ct,borderRadius:ct,radius:ct,borderTopLeftRadius:ct,borderTopRightRadius:ct,borderBottomRightRadius:ct,borderBottomLeftRadius:ct,width:ct,maxWidth:ct,height:ct,maxHeight:ct,top:ct,right:ct,bottom:ct,left:ct,padding:ct,paddingTop:ct,paddingRight:ct,paddingBottom:ct,paddingLeft:ct,margin:ct,marginTop:ct,marginRight:ct,marginBottom:ct,marginLeft:ct,backgroundPositionX:ct,backgroundPositionY:ct,...dU,zIndex:y1,fillOpacity:Lu,strokeOpacity:Lu,numOctaves:y1},uU={...aw,color:On,backgroundColor:On,outlineColor:On,fill:On,stroke:On,borderColor:On,borderTopColor:On,borderRightColor:On,borderBottomColor:On,borderLeftColor:On,filter:ly,WebkitFilter:ly},MA=e=>uU[e];function IA(e,t){let s=MA(e);return s!==ly&&(s=Ga),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const hU=new Set(["auto","none","0"]);function fU(e,t,s){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!hU.has(a)&&Mu(a).values.length&&(i=e[r]),r++}if(i&&s)for(const a of t)e[a]=IA(s,i)}class mU extends rw{constructor(t,s,r,i,a){super(t,s,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),Yb(f))){const m=AA(f,s.current);m!==void 0&&(t[d]=m),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!OA.has(r)||t.length!==2)return;const[i,a]=t,o=x1(i),c=x1(a);if(o!==c)if(m1(o)&&m1(c))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else Io[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||aU(t[i]))&&r.push(i);r.length&&fU(t,r,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Io[r](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var c;const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(s);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Io[s](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([d,f])=>{t.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function pU(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const i=document.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const DA=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function FA(e){return eA(e)&&"offsetHeight"in e}const b1=30,gU=e=>!isNaN(parseFloat(e));class vU{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const i=As.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=As.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=gU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Wb);const r=this.events[t].add(s);return t==="change"?()=>{r(),nn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=As.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>b1)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,b1);return nA(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,s;(t=this.dependents)==null||t.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jc(e,t){return new vU(e,t)}const{schedule:ow,cancel:kse}=fA(queueMicrotask,!1),jr={x:!1,y:!1};function $A(){return jr.x||jr.y}function xU(e){return e==="x"||e==="y"?jr[e]?null:(jr[e]=!0,()=>{jr[e]=!1}):jr.x||jr.y?null:(jr.x=jr.y=!0,()=>{jr.x=jr.y=!1})}function zA(e,t){const s=pU(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[s,i,()=>r.abort()]}function w1(e){return!(e.pointerType==="touch"||$A())}function yU(e,t,s={}){const[r,i,a]=zA(e,s),o=c=>{if(!w1(c))return;const{target:d}=c,f=t(d,c);if(typeof f!="function"||!d)return;const m=h=>{w1(h)&&(f(h),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,i)};return r.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const BA=(e,t)=>t?e===t?!0:BA(e,t.parentElement):!1,lw=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,bU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function wU(e){return bU.has(e.tagName)||e.tabIndex!==-1}const Sf=new WeakSet;function j1(e){return t=>{t.key==="Enter"&&e(t)}}function yv(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const jU=(e,t)=>{const s=e.currentTarget;if(!s)return;const r=j1(()=>{if(Sf.has(s))return;yv(s,"down");const i=j1(()=>{yv(s,"up")}),a=()=>yv(s,"cancel");s.addEventListener("keyup",i,t),s.addEventListener("blur",a,t)});s.addEventListener("keydown",r,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),t)};function _1(e){return lw(e)&&!$A()}function _U(e,t,s={}){const[r,i,a]=zA(e,s),o=c=>{const d=c.currentTarget;if(!_1(c))return;Sf.add(d);const f=t(d,c),m=(p,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",u),Sf.has(d)&&Sf.delete(d),_1(p)&&typeof f=="function"&&f(p,{success:y})},h=p=>{m(p,d===window||d===document||s.useGlobalTarget||BA(d,p.target))},u=p=>{m(p,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",u,i)};return r.forEach(c=>{(s.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),FA(c)&&(c.addEventListener("focus",f=>jU(f,i)),!wU(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function VA(e){return eA(e)&&"ownerSVGElement"in e}function NU(e){return VA(e)&&e.tagName==="svg"}const rs=e=>!!(e&&e.getVelocity),SU=[...LA,On,Ga],kU=e=>SU.find(RA(e)),cw=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class CU extends j.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const r=s.offsetParent,i=FA(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=s.offsetHeight||0,a.width=s.offsetWidth||0,a.top=s.offsetTop,a.left=s.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PU({children:e,isPresent:t,anchorX:s,root:r}){const i=j.useId(),a=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=j.useContext(cw);return j.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:h,right:u}=o.current;if(t||!a.current||!d||!f)return;const p=s==="left"?`left: ${h}`:`right: ${u}`;a.current.dataset.motionPopId=i;const y=document.createElement("style");c&&(y.nonce=c);const v=r??document.head;return v.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${p}px !important;
            top: ${m}px !important;
          }
        `),()=>{v.contains(y)&&v.removeChild(y)}},[t]),n.jsx(CU,{isPresent:t,childRef:a,sizeRef:o,children:j.cloneElement(e,{ref:a})})}const EU=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:d})=>{const f=Bb(TU),m=j.useId();let h=!0,u=j.useMemo(()=>(h=!1,{id:m,initial:t,isPresent:s,custom:i,onExitComplete:p=>{f.set(p,!0);for(const y of f.values())if(!y)return;r&&r()},register:p=>(f.set(p,!1),()=>f.delete(p))}),[s,f,r]);return a&&h&&(u={...u}),j.useMemo(()=>{f.forEach((p,y)=>f.set(y,!1))},[s]),j.useEffect(()=>{!s&&!f.size&&r&&r()},[s]),o==="popLayout"&&(e=n.jsx(PU,{isPresent:s,anchorX:c,root:d,children:e})),n.jsx(jp.Provider,{value:u,children:e})};function TU(){return new Map}function UA(e=!0){const t=j.useContext(jp);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:i}=t,a=j.useId();j.useEffect(()=>{if(e)return i(a)},[e]);const o=j.useCallback(()=>e&&r&&r(a),[a,r,e]);return!s&&r?[!1,o]:[!0]}const nf=e=>e.key||"";function N1(e){const t=[];return j.Children.forEach(e,s=>{j.isValidElement(s)&&t.push(s)}),t}const S1=({children:e,custom:t,initial:s=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:d})=>{const[f,m]=UA(o),h=j.useMemo(()=>N1(e),[e]),u=o&&!f?[]:h.map(nf),p=j.useRef(!0),y=j.useRef(h),v=Bb(()=>new Map),[w,x]=j.useState(h),[b,_]=j.useState(h);QT(()=>{p.current=!1,y.current=h;for(let I=0;I<b.length;I++){const k=nf(b[I]);u.includes(k)?v.delete(k):v.get(k)!==!0&&v.set(k,!1)}},[b,u.length,u.join("-")]);const N=[];if(h!==w){let I=[...h];for(let k=0;k<b.length;k++){const E=b[k],M=nf(E);u.includes(M)||(I.splice(k,0,E),N.push(E))}return a==="wait"&&N.length&&(I=N),_(N1(I)),x(h),null}const{forceRender:C}=j.useContext(zb);return n.jsx(n.Fragment,{children:b.map(I=>{const k=nf(I),E=o&&!f?!1:h===b||u.includes(k),M=()=>{if(v.has(k))v.set(k,!0);else return;let P=!0;v.forEach(T=>{T||(P=!1)}),P&&(C==null||C(),_(y.current),o&&(m==null||m()),r&&r())};return n.jsx(EU,{isPresent:E,initial:!p.current||s?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:d,onExitComplete:E?void 0:M,anchorX:c,children:I},k)})})},qA=j.createContext({strict:!1}),k1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_c={};for(const e in k1)_c[e]={isEnabled:t=>k1[e].some(s=>!!t[s])};function AU(e){for(const t in e)_c[t]={..._c[t],...e[t]}}const OU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fm(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||OU.has(e)}let HA=e=>!fm(e);function RU(e){typeof e=="function"&&(HA=t=>t.startsWith("on")?!fm(t):e(t))}try{RU(require("@emotion/is-prop-valid").default)}catch{}function LU(e,t,s){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(HA(i)||s===!0&&fm(i)||!t&&!fm(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const _p=j.createContext({});function Np(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Iu(e){return typeof e=="string"||Array.isArray(e)}const dw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uw=["initial",...dw];function Sp(e){return Np(e.animate)||uw.some(t=>Iu(e[t]))}function WA(e){return!!(Sp(e)||e.variants)}function MU(e,t){if(Sp(e)){const{initial:s,animate:r}=e;return{initial:s===!1||Iu(s)?s:void 0,animate:Iu(r)?r:void 0}}return e.inherit!==!1?t:{}}function IU(e){const{initial:t,animate:s}=MU(e,j.useContext(_p));return j.useMemo(()=>({initial:t,animate:s}),[C1(t),C1(s)])}function C1(e){return Array.isArray(e)?e.join(" "):e}const Du={};function DU(e){for(const t in e)Du[t]=e[t],Kb(t)&&(Du[t].isCSSVariable=!0)}function ZA(e,{layout:t,layoutId:s}){return Wc.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Du[e]||e==="opacity")}const FU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$U=Hc.length;function zU(e,t,s){let r="",i=!0;for(let a=0;a<$U;a++){const o=Hc[a],c=e[o];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(o.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||s){const f=DA(c,aw[o]);if(!d){i=!1;const m=FU[o]||o;r+=`${m}(${f}) `}s&&(t[o]=f)}}return r=r.trim(),s?r=s(t,i?"":r):i&&(r="none"),r}function hw(e,t,s){const{style:r,vars:i,transformOrigin:a}=e;let o=!1,c=!1;for(const d in t){const f=t[d];if(Wc.has(d)){o=!0;continue}else if(Kb(d)){i[d]=f;continue}else{const m=DA(f,aw[d]);d.startsWith("origin")?(c=!0,a[d]=m):r[d]=m}}if(t.transform||(o||s?r.transform=zU(t,e.transform,s):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${f} ${m}`}}const fw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GA(e,t,s){for(const r in t)!rs(t[r])&&!ZA(r,s)&&(e[r]=t[r])}function BU({transformTemplate:e},t){return j.useMemo(()=>{const s=fw();return hw(s,t,e),Object.assign({},s.vars,s.style)},[t])}function VU(e,t){const s=e.style||{},r={};return GA(r,s,e),Object.assign(r,BU(e,t)),r}function UU(e,t){const s={},r=VU(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const qU={offset:"stroke-dashoffset",array:"stroke-dasharray"},HU={offset:"strokeDashoffset",array:"strokeDasharray"};function WU(e,t,s=1,r=0,i=!0){e.pathLength=1;const a=i?qU:HU;e[a.offset]=ct.transform(-r);const o=ct.transform(t),c=ct.transform(s);e[a.array]=`${o} ${c}`}function KA(e,{attrX:t,attrY:s,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},d,f,m){if(hw(e,c,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:u}=e;h.transform&&(u.transform=h.transform,delete h.transform),(u.transform||h.transformOrigin)&&(u.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),u.transform&&(u.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),s!==void 0&&(h.y=s),r!==void 0&&(h.scale=r),i!==void 0&&WU(h,i,a,o,!1)}const YA=()=>({...fw(),attrs:{}}),XA=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ZU(e,t,s,r){const i=j.useMemo(()=>{const a=YA();return KA(a,t,XA(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};GA(a,e.style,e),i.style={...a,...i.style}}return i}const GU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mw(e){return typeof e!="string"||e.includes("-")?!1:!!(GU.indexOf(e)>-1||/[A-Z]/u.test(e))}function KU(e,t,s,{latestValues:r},i,a=!1){const c=(mw(e)?ZU:UU)(t,r,i,e),d=LU(t,typeof e=="string",a),f=e!==j.Fragment?{...d,...c,ref:s}:{},{children:m}=t,h=j.useMemo(()=>rs(m)?m.get():m,[m]);return j.createElement(e,{...f,children:h})}function P1(e){const t=[{},{}];return e==null||e.values.forEach((s,r)=>{t[0][r]=s.get(),t[1][r]=s.getVelocity()}),t}function pw(e,t,s,r){if(typeof t=="function"){const[i,a]=P1(r);t=t(s!==void 0?s:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=P1(r);t=t(s!==void 0?s:e.custom,i,a)}return t}function kf(e){return rs(e)?e.get():e}function YU({scrapeMotionValuesFromProps:e,createRenderState:t},s,r,i){return{latestValues:XU(s,r,i,e),renderState:t()}}function XU(e,t,s,r){const i={},a=r(e,{});for(const u in a)i[u]=kf(a[u]);let{initial:o,animate:c}=e;const d=Sp(e),f=WA(e);t&&f&&!d&&e.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let m=s?s.initial===!1:!1;m=m||o===!1;const h=m?c:o;if(h&&typeof h!="boolean"&&!Np(h)){const u=Array.isArray(h)?h:[h];for(let p=0;p<u.length;p++){const y=pw(e,u[p]);if(y){const{transitionEnd:v,transition:w,...x}=y;for(const b in x){let _=x[b];if(Array.isArray(_)){const N=m?_.length-1:0;_=_[N]}_!==null&&(i[b]=_)}for(const b in v)i[b]=v[b]}}}return i}const QA=e=>(t,s)=>{const r=j.useContext(_p),i=j.useContext(jp),a=()=>YU(e,t,r,i);return s?a():Bb(a)};function gw(e,t,s){var a;const{style:r}=e,i={};for(const o in r)(rs(r[o])||t.style&&rs(t.style[o])||ZA(o,e)||((a=s==null?void 0:s.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const QU=QA({scrapeMotionValuesFromProps:gw,createRenderState:fw});function JA(e,t,s){const r=gw(e,t,s);for(const i in e)if(rs(e[i])||rs(t[i])){const a=Hc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}const JU=QA({scrapeMotionValuesFromProps:JA,createRenderState:YA}),eq=Symbol.for("motionComponentSymbol");function Ll(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function tq(e,t,s){return j.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),s&&(typeof s=="function"?s(r):Ll(s)&&(s.current=r))},[t])}const vw=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nq="framerAppearId",eO="data-"+vw(nq),tO=j.createContext({});function sq(e,t,s,r,i){var v,w;const{visualElement:a}=j.useContext(_p),o=j.useContext(qA),c=j.useContext(jp),d=j.useContext(cw).reducedMotion,f=j.useRef(null);r=r||o.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:a,props:s,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const m=f.current,h=j.useContext(tO);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&rq(f.current,s,i,h);const u=j.useRef(!1);j.useInsertionEffect(()=>{m&&u.current&&m.update(s,c)});const p=s[eO],y=j.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,p)));return QT(()=>{m&&(u.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),y.current&&m.animationState&&m.animationState.animateChanges())}),j.useEffect(()=>{m&&(!y.current&&m.animationState&&m.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,p)}),y.current=!1),m.enteringChildren=void 0)}),m}function rq(e,t,s,r){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:nO(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&Ll(c),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:f})}function nO(e){if(e)return e.options.allowProjection!==!1?e.projection:nO(e.parent)}function bv(e,{forwardMotionProps:t=!1}={},s,r){s&&AU(s);const i=mw(e)?JU:QU;function a(c,d){let f;const m={...j.useContext(cw),...c,layoutId:iq(c)},{isStatic:h}=m,u=IU(c),p=i(c,h);if(!h&&Vb){aq();const y=oq(m);f=y.MeasureLayout,u.visualElement=sq(e,p,m,r,y.ProjectionNode)}return n.jsxs(_p.Provider,{value:u,children:[f&&u.visualElement?n.jsx(f,{visualElement:u.visualElement,...m}):null,KU(e,c,tq(p,u.visualElement,d),p,h,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=j.forwardRef(a);return o[eq]=e,o}function iq({layoutId:e}){const t=j.useContext(zb).id;return t&&e!==void 0?t+"-"+e:e}function aq(e,t){j.useContext(qA).strict}function oq(e){const{drag:t,layout:s}=_c;if(!t&&!s)return{};const r={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(e)||s!=null&&s.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function lq(e,t){if(typeof Proxy>"u")return bv;const s=new Map,r=(a,o)=>bv(a,o,e,t),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(s.has(o)||s.set(o,bv(o,void 0,e,t)),s.get(o))})}function sO({top:e,left:t,right:s,bottom:r}){return{x:{min:t,max:s},y:{min:e,max:r}}}function cq({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function dq(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function wv(e){return e===void 0||e===1}function cy({scale:e,scaleX:t,scaleY:s}){return!wv(e)||!wv(t)||!wv(s)}function go(e){return cy(e)||rO(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function rO(e){return E1(e.x)||E1(e.y)}function E1(e){return e&&e!=="0%"}function mm(e,t,s){const r=e-s,i=t*r;return s+i}function T1(e,t,s,r,i){return i!==void 0&&(e=mm(e,i,r)),mm(e,s,r)+t}function dy(e,t=0,s=1,r,i){e.min=T1(e.min,t,s,r,i),e.max=T1(e.max,t,s,r,i)}function iO(e,{x:t,y:s}){dy(e.x,t.translate,t.scale,t.originPoint),dy(e.y,s.translate,s.scale,s.originPoint)}const A1=.999999999999,O1=1.0000000000001;function uq(e,t,s,r=!1){const i=s.length;if(!i)return;t.x=t.y=1;let a,o;for(let c=0;c<i;c++){a=s[c],o=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Il(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,iO(e,o)),r&&go(a.latestValues)&&Il(e,a.latestValues))}t.x<O1&&t.x>A1&&(t.x=1),t.y<O1&&t.y>A1&&(t.y=1)}function Ml(e,t){e.min=e.min+t,e.max=e.max+t}function R1(e,t,s,r,i=.5){const a=ln(e.min,e.max,i);dy(e,t,s,a,r)}function Il(e,t){R1(e.x,t.x,t.scaleX,t.scale,t.originX),R1(e.y,t.y,t.scaleY,t.scale,t.originY)}function aO(e,t){return sO(dq(e.getBoundingClientRect(),t))}function hq(e,t,s){const r=aO(e,s),{scroll:i}=t;return i&&(Ml(r.x,i.offset.x),Ml(r.y,i.offset.y)),r}const L1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Dl=()=>({x:L1(),y:L1()}),M1=()=>({min:0,max:0}),bn=()=>({x:M1(),y:M1()}),uy={current:null},oO={current:!1};function fq(){if(oO.current=!0,!!Vb)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>uy.current=e.matches;e.addEventListener("change",t),t()}else uy.current=!1}const mq=new WeakMap;function pq(e,t,s){for(const r in t){const i=t[r],a=s[r];if(rs(i))e.addValue(r,i);else if(rs(a))e.addValue(r,jc(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,jc(o!==void 0?o:i,{owner:e}))}}for(const r in s)t[r]===void 0&&e.removeValue(r);return t}const I1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class gq{scrapeMotionValuesFromProps(t,s,r){return{}}constructor({parent:t,props:s,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=rw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const u=As.now();this.renderScheduledAt<u&&(this.renderScheduledAt=u,nn.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=s.initial?{...d}:{},this.renderState=f,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Sp(s),this.isVariantNode=WA(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...h}=this.scrapeMotionValuesFromProps(s,{},this);for(const u in h){const p=h[u];d[u]!==void 0&&rs(p)&&p.set(d[u])}}mount(t){var s;this.current=t,mq.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),oO.current||fq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uy.current,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Za(this.notifyUpdate),Za(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const r=this.features[s];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Wc.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&nn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{i(),a&&a(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in _c){const s=_c[t];if(!s)continue;const{isEnabled:r,Feature:i}=s;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<I1.length;r++){const i=I1[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=t[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=pq(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const r=this.values.get(t);s!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&s!==void 0&&(r=jc(s===null?void 0:s,{owner:this}),this.addValue(t,r)),r}readValue(t,s){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(JT(r)||tA(r))?r=parseFloat(r):!kU(r)&&Ga.test(s)&&(r=IA(t,s)),this.setBaseTarget(t,rs(r)?r.get():r)),rs(r)?r.get():r}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var a;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const o=pw(this.props,s,(a=this.presenceContext)==null?void 0:a.custom);o&&(r=o[t])}if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!rs(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Wb),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){ow.render(this.render)}}class lO extends gq{constructor(){super(...arguments),this.KeyframeResolver=mU}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:r}){delete s[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;rs(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function cO(e,{style:t,vars:s},r,i){const a=e.style;let o;for(o in t)a[o]=t[o];i==null||i.applyProjectionStyles(a,r);for(o in s)a.setProperty(o,s[o])}function vq(e){return window.getComputedStyle(e)}class xq extends lO{constructor(){super(...arguments),this.type="html",this.renderInstance=cO}readValueFromInstance(t,s){var r;if(Wc.has(s))return(r=this.projection)!=null&&r.isProjecting?ny(s):R7(t,s);{const i=vq(t),a=(Kb(s)?i.getPropertyValue(s):i[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return aO(t,s)}build(t,s,r){hw(t,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,s,r){return gw(t,s,r)}}const dO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yq(e,t,s,r){cO(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(dO.has(i)?i:vw(i),t.attrs[i])}class bq extends lO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bn}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Wc.has(s)){const r=MA(s);return r&&r.default||0}return s=dO.has(s)?s:vw(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,r){return JA(t,s,r)}build(t,s,r){KA(t,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,s,r,i){yq(t,s,r,i)}mount(t){this.isSVGTag=XA(t.tagName),super.mount(t)}}const wq=(e,t)=>mw(e)?new bq(t):new xq(t,{allowProjection:e!==j.Fragment});function Xl(e,t,s){const r=e.getProps();return pw(r,t,s!==void 0?s:r.custom,e)}const hy=e=>Array.isArray(e);function jq(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,jc(s))}function _q(e){return hy(e)?e[e.length-1]||0:e}function Nq(e,t){const s=Xl(e,t);let{transitionEnd:r={},transition:i={},...a}=s||{};a={...a,...r};for(const o in a){const c=_q(a[o]);jq(e,o,c)}}function Sq(e){return!!(rs(e)&&e.add)}function fy(e,t){const s=e.getValue("willChange");if(Sq(s))return s.add(t);if(!s&&sa.WillChange){const r=new sa.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function uO(e){return e.props[eO]}const kq=e=>e!==null;function Cq(e,{repeat:t,repeatType:s="loop"},r){const i=e.filter(kq),a=t&&s!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const Pq={type:"spring",stiffness:500,damping:25,restSpeed:10},Eq=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Tq={type:"keyframes",duration:.8},Aq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Oq=(e,{keyframes:t})=>t.length>2?Tq:Wc.has(e)?e.startsWith("scale")?Eq(t[1]):Pq:Aq;function Rq({when:e,delay:t,delayChildren:s,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const xw=(e,t,s,r={},i,a)=>o=>{const c=iw(r,e)||{},d=c.delay||r.delay||0;let{elapsed:f=0}=r;f=f-hi(d);const m={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-f,onUpdate:u=>{t.set(u),c.onUpdate&&c.onUpdate(u)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:a?void 0:i};Rq(c)||Object.assign(m,Oq(e,m)),m.duration&&(m.duration=hi(m.duration)),m.repeatDelay&&(m.repeatDelay=hi(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let h=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(oy(m),m.delay===0&&(h=!0)),(sa.instantAnimations||sa.skipAnimations)&&(h=!0,oy(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,h&&!a&&t.get()!==void 0){const u=Cq(m.keyframes,c);if(u!==void 0){nn.update(()=>{m.onUpdate(u),m.onComplete()});return}}return c.isSync?new sw(m):new nU(m)};function Lq({protectedKeys:e,needsAnimating:t},s){const r=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,r}function hO(e,t,{delay:s=0,transitionOverride:r,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...c}=t;r&&(a=r);const d=[],f=i&&e.animationState&&e.animationState.getState()[i];for(const m in c){const h=e.getValue(m,e.latestValues[m]??null),u=c[m];if(u===void 0||f&&Lq(f,m))continue;const p={delay:s,...iw(a||{},m)},y=h.get();if(y!==void 0&&!h.isAnimating&&!Array.isArray(u)&&u===y&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const x=uO(e);if(x){const b=window.MotionHandoffAnimation(x,m,nn);b!==null&&(p.startTime=b,v=!0)}}fy(e,m),h.start(xw(m,h,u,e.shouldReduceMotion&&OA.has(m)?{type:!1}:p,e,v));const w=h.animation;w&&d.push(w)}return o&&Promise.all(d).then(()=>{nn.update(()=>{o&&Nq(e,o)})}),d}function fO(e,t,s,r=0,i=1){const a=Array.from(e).sort((f,m)=>f.sortNodePosition(m)).indexOf(t),o=e.size,c=(o-1)*r;return typeof s=="function"?s(a,o):i===1?a*r:c-a*r}function my(e,t,s={}){var d;const r=Xl(e,t,s.type==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(i=s.transitionOverride);const a=r?()=>Promise.all(hO(e,r,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:h,staggerDirection:u}=i;return Mq(e,t,f,m,h,u,s)}:()=>Promise.resolve(),{when:c}=i;if(c){const[f,m]=c==="beforeChildren"?[a,o]:[o,a];return f().then(()=>m())}else return Promise.all([a(),o(s.delay)])}function Mq(e,t,s=0,r=0,i=0,a=1,o){const c=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),c.push(my(d,t,{...o,delay:s+(typeof r=="function"?0:r)+fO(e.variantChildren,d,r,i,a)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(c)}function Iq(e,t,s={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>my(e,a,s));r=Promise.all(i)}else if(typeof t=="string")r=my(e,t,s);else{const i=typeof t=="function"?Xl(e,t,s.custom):t;r=Promise.all(hO(e,i,s))}return r.then(()=>{e.notify("AnimationComplete",t)})}function mO(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(t[r]!==e[r])return!1;return!0}const Dq=uw.length;function pO(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?pO(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<Dq;s++){const r=uw[s],i=e.props[r];(Iu(i)||i===!1)&&(t[r]=i)}return t}const Fq=[...dw].reverse(),$q=dw.length;function zq(e){return t=>Promise.all(t.map(({animation:s,options:r})=>Iq(e,s,r)))}function Bq(e){let t=zq(e),s=D1(),r=!0;const i=d=>(f,m)=>{var u;const h=Xl(e,m,d==="exit"?(u=e.presenceContext)==null?void 0:u.custom:void 0);if(h){const{transition:p,transitionEnd:y,...v}=h;f={...f,...v,...y}}return f};function a(d){t=d(e)}function o(d){const{props:f}=e,m=pO(e.parent)||{},h=[],u=new Set;let p={},y=1/0;for(let w=0;w<$q;w++){const x=Fq[w],b=s[x],_=f[x]!==void 0?f[x]:m[x],N=Iu(_),C=x===d?b.isActive:null;C===!1&&(y=w);let I=_===m[x]&&_!==f[x]&&N;if(I&&r&&e.manuallyAnimateOnMount&&(I=!1),b.protectedKeys={...p},!b.isActive&&C===null||!_&&!b.prevProp||Np(_)||typeof _=="boolean")continue;const k=Vq(b.prevProp,_);let E=k||x===d&&b.isActive&&!I&&N||w>y&&N,M=!1;const P=Array.isArray(_)?_:[_];let T=P.reduce(i(x),{});C===!1&&(T={});const{prevResolvedValues:A={}}=b,z={...A,...T},O=Y=>{E=!0,u.has(Y)&&(M=!0,u.delete(Y)),b.needsAnimating[Y]=!0;const K=e.getValue(Y);K&&(K.liveStyle=!1)};for(const Y in z){const K=T[Y],U=A[Y];if(p.hasOwnProperty(Y))continue;let B=!1;hy(K)&&hy(U)?B=!mO(K,U):B=K!==U,B?K!=null?O(Y):u.add(Y):K!==void 0&&u.has(Y)?O(Y):b.protectedKeys[Y]=!0}b.prevProp=_,b.prevResolvedValues=T,b.isActive&&(p={...p,...T}),r&&e.blockInitialAnimation&&(E=!1);const F=I&&k;E&&(!F||M)&&h.push(...P.map(Y=>{const K={type:x};if(typeof Y=="string"&&r&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,B=Xl(U,Y);if(U.enteringChildren&&B){const{delayChildren:R}=B.transition||{};K.delay=fO(U.enteringChildren,e,R)}}return{animation:Y,options:K}}))}if(u.size){const w={};if(typeof f.initial!="boolean"){const x=Xl(e,Array.isArray(f.initial)?f.initial[0]:f.initial);x&&x.transition&&(w.transition=x.transition)}u.forEach(x=>{const b=e.getBaseTarget(x),_=e.getValue(x);_&&(_.liveStyle=!0),w[x]=b??null}),h.push({animation:w})}let v=!!h.length;return r&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(h):Promise.resolve()}function c(d,f){var h;if(s[d].isActive===f)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(u=>{var p;return(p=u.animationState)==null?void 0:p.setActive(d,f)}),s[d].isActive=f;const m=o(d);for(const u in s)s[u].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>s,reset:()=>{s=D1(),r=!0}}}function Vq(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!mO(t,e):!1}function ho(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function D1(){return{animate:ho(!0),whileInView:ho(),whileHover:ho(),whileTap:ho(),whileDrag:ho(),whileFocus:ho(),exit:ho()}}class so{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Uq extends so{constructor(t){super(t),t.animationState||(t.animationState=Bq(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Np(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let qq=0;class Hq extends so{constructor(){super(...arguments),this.id=qq++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);s&&!t&&i.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Wq={animation:{Feature:Uq},exit:{Feature:Hq}};function Fu(e,t,s,r={passive:!0}){return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s)}function ah(e){return{point:{x:e.pageX,y:e.pageY}}}const Zq=e=>t=>lw(t)&&e(t,ah(t));function Yd(e,t,s,r){return Fu(e,t,Zq(s),r)}const gO=1e-4,Gq=1-gO,Kq=1+gO,vO=.01,Yq=0-vO,Xq=0+vO;function ps(e){return e.max-e.min}function Qq(e,t,s){return Math.abs(e-t)<=s}function F1(e,t,s,r=.5){e.origin=r,e.originPoint=ln(t.min,t.max,e.origin),e.scale=ps(s)/ps(t),e.translate=ln(s.min,s.max,e.origin)-e.originPoint,(e.scale>=Gq&&e.scale<=Kq||isNaN(e.scale))&&(e.scale=1),(e.translate>=Yq&&e.translate<=Xq||isNaN(e.translate))&&(e.translate=0)}function Xd(e,t,s,r){F1(e.x,t.x,s.x,r?r.originX:void 0),F1(e.y,t.y,s.y,r?r.originY:void 0)}function $1(e,t,s){e.min=s.min+t.min,e.max=e.min+ps(t)}function Jq(e,t,s){$1(e.x,t.x,s.x),$1(e.y,t.y,s.y)}function z1(e,t,s){e.min=t.min-s.min,e.max=e.min+ps(t)}function Qd(e,t,s){z1(e.x,t.x,s.x),z1(e.y,t.y,s.y)}function er(e){return[e("x"),e("y")]}const xO=({current:e})=>e?e.ownerDocument.defaultView:null,B1=(e,t)=>Math.abs(e-t);function eH(e,t){const s=B1(e.x,t.x),r=B1(e.y,t.y);return Math.sqrt(s**2+r**2)}class yO{constructor(t,s,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=_v(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=eH(u.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:v}=u,{timestamp:w}=Zn;this.history.push({...v,timestamp:w});const{onStart:x,onMove:b}=this.handlers;p||(x&&x(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,u)},this.handlePointerMove=(u,p)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=jv(p,this.transformPagePoint),nn.update(this.updatePoint,!0)},this.handlePointerUp=(u,p)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=_v(u.type==="pointercancel"?this.lastMoveEventInfo:jv(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(u,x),v&&v(u,x)},!lw(t))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const c=ah(t),d=jv(c,this.transformPagePoint),{point:f}=d,{timestamp:m}=Zn;this.history=[{...f,timestamp:m}];const{onSessionStart:h}=s;h&&h(t,_v(d,this.history)),this.removeListeners=sh(Yd(this.contextWindow,"pointermove",this.handlePointerMove),Yd(this.contextWindow,"pointerup",this.handlePointerUp),Yd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Za(this.updatePoint)}}function jv(e,t){return t?{point:t(e.point)}:e}function V1(e,t){return{x:e.x-t.x,y:e.y-t.y}}function _v({point:e},t){return{point:e,delta:V1(e,bO(t)),offset:V1(e,tH(t)),velocity:nH(t,.1)}}function tH(e){return e[0]}function bO(e){return e[e.length-1]}function nH(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const i=bO(e);for(;s>=0&&(r=e[s],!(i.timestamp-r.timestamp>hi(t)));)s--;if(!r)return{x:0,y:0};const a=fi(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function sH(e,{min:t,max:s},r){return t!==void 0&&e<t?e=r?ln(t,e,r.min):Math.max(e,t):s!==void 0&&e>s&&(e=r?ln(s,e,r.max):Math.min(e,s)),e}function U1(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function rH(e,{top:t,left:s,bottom:r,right:i}){return{x:U1(e.x,s,i),y:U1(e.y,t,r)}}function q1(e,t){let s=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}function iH(e,t){return{x:q1(e.x,t.x),y:q1(e.y,t.y)}}function aH(e,t){let s=.5;const r=ps(e),i=ps(t);return i>r?s=Ru(t.min,t.max-r,e.min):r>i&&(s=Ru(e.min,e.max-i,t.min)),na(0,1,s)}function oH(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const py=.35;function lH(e=py){return e===!1?e=0:e===!0&&(e=py),{x:H1(e,"left","right"),y:H1(e,"top","bottom")}}function H1(e,t,s){return{min:W1(e,t),max:W1(e,s)}}function W1(e,t){return typeof e=="number"?e:e[t]||0}const cH=new WeakMap;class dH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(ah(h).point)},o=(h,u)=>{const{drag:p,dragPropagation:y,onDragStart:v}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xU(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=u,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),er(x=>{let b=this.getAxisMotionValue(x).get()||0;if(mi.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const N=_.layout.layoutBox[x];N&&(b=ps(N)*(parseFloat(b)/100))}}this.originPoint[x]=b}),v&&nn.postRender(()=>v(h,u)),fy(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},c=(h,u)=>{this.latestPointerEvent=h,this.latestPanInfo=u;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:v,onDrag:w}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=u;if(y&&this.currentDirection===null){this.currentDirection=uH(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",u.point,x),this.updateAxis("y",u.point,x),this.visualElement.render(),w&&w(h,u)},d=(h,u)=>{this.latestPointerEvent=h,this.latestPanInfo=u,this.stop(h,u),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>er(h=>{var u;return this.getAnimationState(h)==="paused"&&((u=this.getAxisMotionValue(h).animation)==null?void 0:u.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new yO(t,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:xO(this.visualElement)})}stop(t,s){const r=t||this.latestPointerEvent,i=s||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&nn.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,r){const{drag:i}=this.getProps();if(!r||!sf(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=sH(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;t&&Ll(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=rH(r.layoutBox,t):this.constraints=!1,this.elastic=lH(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&er(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=oH(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Ll(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=hq(r,i.root,this.visualElement.getTransformPagePoint());let o=iH(i.layout.layoutBox,a);if(s){const c=s(cq(o));this.hasMutatedConstraints=!!c,c&&(o=sO(c))}return o}startAnimation(t){const{drag:s,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=er(m=>{if(!sf(m,s,this.currentDirection))return;let h=d&&d[m]||{};o&&(h={min:0,max:0});const u=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:r?t[m]:0,bounceStiffness:u,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(m,y)});return Promise.all(f).then(c)}startAxisValueAnimation(t,s){const r=this.getAxisMotionValue(t);return fy(this.visualElement,t),r.start(xw(t,r,0,s,this.visualElement,!1))}stopAnimation(){er(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){er(t=>{var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)==null?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[s];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){er(s=>{const{drag:r}=this.getProps();if(!sf(s,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(s);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[s];a.set(t[s]-ln(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Ll(s)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};er(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();i[o]=aH({min:d,max:d},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),er(o=>{if(!sf(o,t,null))return;const c=this.getAxisMotionValue(o),{min:d,max:f}=this.constraints[o];c.set(ln(d,f,i[o]))})}addListeners(){if(!this.visualElement.current)return;cH.set(this.visualElement,this);const t=this.visualElement.current,s=Yd(t,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Ll(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),nn.read(r);const o=Fu(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(er(m=>{const h=this.getAxisMotionValue(m);h&&(this.originPoint[m]+=d[m].translate,h.set(h.get()+d[m].translate))}),this.visualElement.render())});return()=>{o(),s(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=py,dragMomentum:c=!0}=t;return{...t,drag:s,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function sf(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function uH(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class hH extends so{constructor(t){super(t),this.removeGroupControls=cr,this.removeListeners=cr,this.controls=new dH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||cr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Z1=e=>(t,s)=>{e&&nn.postRender(()=>e(t,s))};class fH extends so{constructor(){super(...arguments),this.removePointerDownListener=cr}onPointerDown(t){this.session=new yO(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xO(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Z1(t),onStart:Z1(s),onMove:r,onEnd:(a,o)=>{delete this.session,i&&nn.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Yd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Cf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function G1(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const _d={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ct.test(e))e=parseFloat(e);else return e;const s=G1(e,t.target.x),r=G1(e,t.target.y);return`${s}% ${r}%`}},mH={correct:(e,{treeScale:t,projectionDelta:s})=>{const r=e,i=Ga.parse(e);if(i.length>5)return r;const a=Ga.createTransformer(e),o=typeof i[0]!="number"?1:0,c=s.x.scale*t.x,d=s.y.scale*t.y;i[0+o]/=c,i[1+o]/=d;const f=ln(c,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=f),typeof i[3+o]=="number"&&(i[3+o]/=f),a(i)}};let Nv=!1;class pH extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;DU(gH),a&&(s.group&&s.group.add(a),r&&r.register&&i&&r.register(a),Nv&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Cf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,Nv=!0,i||t.layoutDependency!==s||s===void 0||t.isPresent!==a?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||nn.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ow.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:i}=t;Nv=!0,i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function wO(e){const[t,s]=UA(),r=j.useContext(zb);return n.jsx(pH,{...e,layoutGroup:r,switchLayoutGroup:j.useContext(tO),isPresent:t,safeToRemove:s})}const gH={borderRadius:{..._d,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_d,borderTopRightRadius:_d,borderBottomLeftRadius:_d,borderBottomRightRadius:_d,boxShadow:mH};function vH(e,t,s){const r=rs(e)?e:jc(e);return r.start(xw("",r,t,s)),r.animation}const xH=(e,t)=>e.depth-t.depth;class yH{constructor(){this.children=[],this.isDirty=!1}add(t){Ub(this.children,t),this.isDirty=!0}remove(t){qb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(xH),this.isDirty=!1,this.children.forEach(t)}}function bH(e,t){const s=As.now(),r=({timestamp:i})=>{const a=i-s;a>=t&&(Za(r),e(a-t))};return nn.setup(r,!0),()=>Za(r)}const jO=["TopLeft","TopRight","BottomLeft","BottomRight"],wH=jO.length,K1=e=>typeof e=="string"?parseFloat(e):e,Y1=e=>typeof e=="number"||ct.test(e);function jH(e,t,s,r,i,a){i?(e.opacity=ln(0,s.opacity??1,_H(r)),e.opacityExit=ln(t.opacity??1,0,NH(r))):a&&(e.opacity=ln(t.opacity??1,s.opacity??1,r));for(let o=0;o<wH;o++){const c=`border${jO[o]}Radius`;let d=X1(t,c),f=X1(s,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||Y1(d)===Y1(f)?(e[c]=Math.max(ln(K1(d),K1(f),r),0),(mi.test(f)||mi.test(d))&&(e[c]+="%")):e[c]=f}(t.rotate||s.rotate)&&(e.rotate=ln(t.rotate||0,s.rotate||0,r))}function X1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const _H=_O(0,.5,cA),NH=_O(.5,.95,cr);function _O(e,t,s){return r=>r<e?0:r>t?1:s(Ru(e,t,r))}function Q1(e,t){e.min=t.min,e.max=t.max}function Js(e,t){Q1(e.x,t.x),Q1(e.y,t.y)}function J1(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function eS(e,t,s,r,i){return e-=t,e=mm(e,1/s,r),i!==void 0&&(e=mm(e,1/i,r)),e}function SH(e,t=0,s=1,r=.5,i,a=e,o=e){if(mi.test(t)&&(t=parseFloat(t),t=ln(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=ln(a.min,a.max,r);e===a&&(c-=t),e.min=eS(e.min,t,s,c,i),e.max=eS(e.max,t,s,c,i)}function tS(e,t,[s,r,i],a,o){SH(e,t[s],t[r],t[i],t.scale,a,o)}const kH=["x","scaleX","originX"],CH=["y","scaleY","originY"];function nS(e,t,s,r){tS(e.x,t,kH,s?s.x:void 0,r?r.x:void 0),tS(e.y,t,CH,s?s.y:void 0,r?r.y:void 0)}function sS(e){return e.translate===0&&e.scale===1}function NO(e){return sS(e.x)&&sS(e.y)}function rS(e,t){return e.min===t.min&&e.max===t.max}function PH(e,t){return rS(e.x,t.x)&&rS(e.y,t.y)}function iS(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function SO(e,t){return iS(e.x,t.x)&&iS(e.y,t.y)}function aS(e){return ps(e.x)/ps(e.y)}function oS(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class EH{constructor(){this.members=[]}add(t){Ub(this.members,t),t.scheduleRender()}remove(t){if(qb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(i=>t===i);if(s===0)return!1;let r;for(let i=s;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,s){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,s&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:r}=t;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function TH(e,t,s){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,o=(s==null?void 0:s.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:f,rotate:m,rotateX:h,rotateY:u,skewX:p,skewY:y}=s;f&&(r=`perspective(${f}px) ${r}`),m&&(r+=`rotate(${m}deg) `),h&&(r+=`rotateX(${h}deg) `),u&&(r+=`rotateY(${u}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const c=e.x.scale*t.x,d=e.y.scale*t.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const Sv=["","X","Y","Z"],AH=1e3;let OH=0;function kv(e,t,s,r){const{latestValues:i}=t;i[e]&&(s[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function kO(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=uO(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",nn,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&kO(r)}function CO({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},c=t==null?void 0:t()){this.id=OH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(MH),this.nodes.forEach($H),this.nodes.forEach(zH),this.nodes.forEach(IH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new yH)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Wb),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=VA(o)&&!NU(o),this.instance=o;const{layoutId:c,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),e){let m,h=0;const u=()=>this.root.updateBlockedByResize=!1;nn.read(()=>{h=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,m&&m(),m=bH(u,250),Cf.hasAnimatedSinceResize&&(Cf.hasAnimatedSinceResize=!1,this.nodes.forEach(dS)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeLayoutChanged:u,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||f.getDefaultTransition()||HH,{onLayoutAnimationStart:v,onLayoutAnimationComplete:w}=f.getProps(),x=!this.targetLayout||!SO(this.targetLayout,p),b=!h&&u;if(this.options.layoutRoot||this.resumeFrom||b||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...iw(y,"layout"),onPlay:v,onComplete:w};(f.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(m,b)}else h||dS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Za(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(BH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const h=this.path[m];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(cS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(FH),this.nodes.forEach(RH),this.nodes.forEach(LH)):this.nodes.forEach(cS),this.clearAllSnapshots();const c=As.now();Zn.delta=na(0,1e3/60,c-Zn.timestamp),Zn.timestamp=c,Zn.isProcessing=!0,mv.update.process(Zn),mv.preRender.process(Zn),mv.render.process(Zn),Zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ow.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(DH),this.sharedNodes.forEach(VH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ps(this.snapshot.measuredBox.x)&&!ps(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!NO(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;o&&this.instance&&(c||go(this.latestValues)||m)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),WH(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:o}=this.options;if(!o)return bn();const c=o.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(ZH))){const{scroll:m}=this.root;m&&(Ml(c.x,m.offset.x),Ml(c.y,m.offset.y))}return c}removeElementScroll(o){var d;const c=bn();if(Js(c,o),(d=this.scroll)!=null&&d.wasRoot)return c;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:h,options:u}=m;m!==this.root&&h&&u.layoutScroll&&(h.wasRoot&&Js(c,o),Ml(c.x,h.offset.x),Ml(c.y,h.offset.y))}return c}applyTransform(o,c=!1){const d=bn();Js(d,o);for(let f=0;f<this.path.length;f++){const m=this.path[f];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Il(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),go(m.latestValues)&&Il(d,m.latestValues)}return go(this.latestValues)&&Il(d,this.latestValues),d}removeTransform(o){const c=bn();Js(c,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!go(f.latestValues))continue;cy(f.latestValues)&&f.updateSnapshot();const m=bn(),h=f.measurePageBox();Js(m,h),nS(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return go(this.latestValues)&&nS(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(u=this.parent)!=null&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=Zn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Qd(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Js(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bn(),this.targetWithTransforms=bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Jq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Js(this.target,this.layout.layoutBox),iO(this.target,this.targetDelta)):Js(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Qd(this.relativeTargetOrigin,this.target,p.target),Js(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||cy(this.parent.latestValues)||rO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Zn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;Js(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,u=this.treeScale.y;uq(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=bn());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(J1(this.prevProjectionDelta.x,this.projectionDelta.x),J1(this.prevProjectionDelta.y,this.projectionDelta.y)),Xd(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==u||!oS(this.projectionDelta.x,this.prevProjectionDelta.x)||!oS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Dl(),this.projectionDelta=Dl(),this.projectionDeltaWithTransform=Dl()}setAnimationOrigin(o,c=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},h=Dl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const u=bn(),p=d?d.source:void 0,y=this.layout?this.layout.source:void 0,v=p!==y,w=this.getStack(),x=!w||w.members.length<=1,b=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(qH));this.animationProgress=0;let _;this.mixTargetDelta=N=>{const C=N/1e3;uS(h.x,o.x,C),uS(h.y,o.y,C),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qd(u,this.layout.layoutBox,this.relativeParent.layout.layoutBox),UH(this.relativeTarget,this.relativeTargetOrigin,u,C),_&&PH(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=bn()),Js(_,this.relativeTarget)),v&&(this.animationValues=m,jH(m,f,this.latestValues,C,b,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var c,d,f;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Za(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nn.update(()=>{Cf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=jc(0)),this.currentAnimation=vH(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),o.onUpdate&&o.onUpdate(m)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:m}=o;if(!(!c||!d||!f)){if(this!==o&&this.layout&&f&&PO(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||bn();const h=ps(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+h;const u=ps(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+u}Js(c,d),Il(c,m),Xd(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new EH),this.sharedNodes.get(o).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var c;const{layoutId:o}=this.options;return o?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:o}=this.options;return o?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&kv("z",o,f,this.animationValues);for(let m=0;m<Sv.length;m++)kv(`rotate${Sv[m]}`,o,f,this.animationValues),kv(`skew${Sv[m]}`,o,f,this.animationValues);o.render();for(const m in f)o.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=kf(c==null?void 0:c.pointerEvents)||"",o.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=kf(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!go(this.latestValues)&&(o.transform=d?d({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let h=TH(this.projectionDeltaWithTransform,this.treeScale,m);d&&(h=d(m,h)),o.transform=h;const{x:u,y:p}=this.projectionDelta;o.transformOrigin=`${u.origin*100}% ${p.origin*100}% 0`,f.animationValues?o.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const y in Du){if(m[y]===void 0)continue;const{correct:v,applyTo:w,isCSSVariable:x}=Du[y],b=h==="none"?m[y]:v(m[y],f);if(w){const _=w.length;for(let N=0;N<_;N++)o[w[N]]=b}else x?this.options.visualElement.renderState.vars[y]=b:o[y]=b}this.options.layoutId&&(o.pointerEvents=f===this?kf(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var c;return(c=o.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(lS),this.root.sharedNodes.clear()}}}function RH(e){e.updateLayout()}function LH(e){var s;const t=((s=e.resumeFrom)==null?void 0:s.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:a}=e.options,o=t.source!==e.layout.source;a==="size"?er(h=>{const u=o?t.measuredBox[h]:t.layoutBox[h],p=ps(u);u.min=r[h].min,u.max=u.min+p}):PO(a,t.layoutBox,r)&&er(h=>{const u=o?t.measuredBox[h]:t.layoutBox[h],p=ps(r[h]);u.max=u.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const c=Dl();Xd(c,r,t.layoutBox);const d=Dl();o?Xd(d,e.applyTransform(i,!0),t.measuredBox):Xd(d,r,t.layoutBox);const f=!NO(c);let m=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:u,layout:p}=h;if(u&&p){const y=bn();Qd(y,t.layoutBox,u.layoutBox);const v=bn();Qd(v,r,p.layoutBox),SO(y,v)||(m=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:m})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function MH(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function IH(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function DH(e){e.clearSnapshot()}function lS(e){e.clearMeasurements()}function cS(e){e.isLayoutDirty=!1}function FH(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function dS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $H(e){e.resolveTargetDelta()}function zH(e){e.calcProjection()}function BH(e){e.resetSkewAndRotation()}function VH(e){e.removeLeadSnapshot()}function uS(e,t,s){e.translate=ln(t.translate,0,s),e.scale=ln(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function hS(e,t,s,r){e.min=ln(t.min,s.min,r),e.max=ln(t.max,s.max,r)}function UH(e,t,s,r){hS(e.x,t.x,s.x,r),hS(e.y,t.y,s.y,r)}function qH(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const HH={duration:.45,ease:[.4,0,.1,1]},fS=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),mS=fS("applewebkit/")&&!fS("chrome/")?Math.round:cr;function pS(e){e.min=mS(e.min),e.max=mS(e.max)}function WH(e){pS(e.x),pS(e.y)}function PO(e,t,s){return e==="position"||e==="preserve-aspect"&&!Qq(aS(t),aS(s),.2)}function ZH(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const GH=CO({attachResizeListener:(e,t)=>Fu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cv={current:void 0},EO=CO({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Cv.current){const e=new GH({});e.mount(window),e.setOptions({layoutScroll:!0}),Cv.current=e}return Cv.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),KH={pan:{Feature:fH},drag:{Feature:hH,ProjectionNode:EO,MeasureLayout:wO}};function gS(e,t,s){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,a=r[i];a&&nn.postRender(()=>a(t,ah(t)))}class YH extends so{mount(){const{current:t}=this.node;t&&(this.unmount=yU(t,(s,r)=>(gS(this.node,r,"Start"),i=>gS(this.node,i,"End"))))}unmount(){}}class XH extends so{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sh(Fu(this.node.current,"focus",()=>this.onFocus()),Fu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vS(e,t,s){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),a=r[i];a&&nn.postRender(()=>a(t,ah(t)))}class QH extends so{mount(){const{current:t}=this.node;t&&(this.unmount=_U(t,(s,r)=>(vS(this.node,r,"Start"),(i,{success:a})=>vS(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gy=new WeakMap,Pv=new WeakMap,JH=e=>{const t=gy.get(e.target);t&&t(e)},eW=e=>{e.forEach(JH)};function tW({root:e,...t}){const s=e||document;Pv.has(s)||Pv.set(s,{});const r=Pv.get(s),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(eW,{root:e,...t})),r[i]}function nW(e,t,s){const r=tW(t);return gy.set(e,s),r.observe(e),()=>{gy.delete(e),r.unobserve(e)}}const sW={some:0,all:1};class rW extends so{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:r,amount:i="some",once:a}=t,o={root:s?s.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:sW[i]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:h}=this.node.getProps(),u=f?m:h;u&&u(d)};return nW(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(iW(t,s))&&this.startObserver()}unmount(){}}function iW({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const aW={inView:{Feature:rW},tap:{Feature:QH},focus:{Feature:XH},hover:{Feature:YH}},oW={layout:{ProjectionNode:EO,MeasureLayout:wO}},lW={...Wq,...aW,...KH,...oW},Ql=lq(lW,wq),cW=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),y=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return d*v/1e3};function dW(e){const t=Math.floor(e),s=e%1>=.5,r=5-t-(s?1:0);return n.jsxs(n.Fragment,{children:[Array.from({length:t}).map((i,a)=>n.jsx(dn,{className:"h-2.5 w-2.5 fill-yellow-400 text-yellow-400"},`full-${a}`)),s&&n.jsx(dn,{className:"h-2.5 w-2.5 fill-yellow-400 text-yellow-400",style:{clipPath:"inset(0 50% 0 0)"}},"half"),Array.from({length:r}).map((i,a)=>n.jsx(dn,{className:"h-2.5 w-2.5 stroke-yellow-400 text-transparent"},`empty-${a}`))]})}function uW(){const e=st(),[t,s]=j.useState([]),[r,i]=j.useState(!0),[a,o]=j.useState(xt.getLocation());j.useEffect(()=>{const m=xt.subscribe(o);return c(),m},[]),j.useEffect(()=>{a&&c()},[a]);const c=async()=>{try{i(!0);const m={"ngrok-skip-browser-warning":"true"},h=xt.getLocation(),u=new URLSearchParams({page_size:"20"});h&&(u.append("latitude",h.latitude.toString()),u.append("longitude",h.longitude.toString()));const y=await(await fetch(`${rt}search/products/?${u}`,{headers:m})).json(),v=d(y.results||[]);s(v)}catch(m){console.error("Error fetching trending items:",m)}finally{i(!1)}},d=m=>{const h=xt.getLocation();let u=m.map(p=>{var x,b;const y=((x=p.images)==null?void 0:x.find(_=>_.is_primary))||((b=p.images)==null?void 0:b[0]);let v="N/A",w=1/0;return h&&p.vendor_latitude&&p.vendor_longitude&&(w=cW(h.latitude,h.longitude,p.vendor_latitude,p.vendor_longitude),v=`${w.toFixed(1)} km`),{id:p.id,name:p.name,vendor:p.vendor_name||"Unknown Vendor",distance:v,distanceValue:w,rating:4.5,price:`₹${p.price}`,priceValue:parseFloat(p.price),image:(y==null?void 0:y.image_url)||"/placeholder-product.jpg",inStock:p.quantity>0,category:p.category}});return u.sort((p,y)=>y.rating-p.rating),u.slice(0,6)},f=m=>{e(`/product/${m}`)};return r?n.jsxs("section",{className:"px-4 sm:px-6 md:px-8 mb-6 lg:mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-foreground tracking-tight",children:"Trending Now 🔥"}),n.jsx(ne,{variant:"outline",size:"sm",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},className:"rounded-full hover:bg-[#856043] hover:text-white text-sm",onClick:()=>e("/trending-items"),children:"View All"})]}),n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Vn,{className:"h-8 w-8 animate-spin"})})]}):n.jsxs("section",{className:"px-4 sm:px-6 md:px-8 mb-6 lg:mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-foreground tracking-tight",children:"Trending Now 🔥"}),n.jsx(ne,{variant:"outline",size:"sm",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},className:"rounded-full hover:bg-[#856043] hover:text-white text-sm",onClick:()=>e("/trending-items"),children:"View All"})]}),n.jsx("div",{className:"flex gap-3 sm:gap-4 overflow-x-auto custom-scrollbar pb-3 snap-x snap-mandatory",children:t.map((m,h)=>n.jsxs(Ql.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,delay:h*.08,ease:"easeOut"},whileHover:{scale:1.03,boxShadow:"0 12px 24px rgba(0,0,0,0.15)"},whileTap:{scale:.97},className:"relative min-w-[120px] sm:min-w-[140px] md:min-w-[120px] bg-gradient-to-br from-card/90 to-card rounded-xl p-3 shadow-lg border border-border/20 hover:shadow-xl hover:border-primary/40 transition-all duration-300 cursor-pointer group snap-start",onClick:()=>f(m.id),"aria-label":`View ${m.name} from ${m.vendor}`,children:[n.jsxs(_N,{children:[n.jsx(NN,{asChild:!0,children:n.jsx("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-full p-1 shadow-md group-hover:animate-bounce",children:n.jsx(AD,{className:"h-3 w-3"})})}),n.jsx($x,{side:"top",className:"text-xs",children:"Hot Item!"})]}),n.jsx("div",{className:"w-full h-20 mb-2 overflow-hidden rounded-md",children:n.jsx("img",{src:m.image,alt:m.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ease-in-out",onError:u=>{u.target.src="/placeholder-product.jpg"}})}),n.jsx("h3",{className:"font-semibold text-xs mb-1 text-foreground line-clamp-1",children:m.name}),n.jsx("p",{className:"text-xs text-muted-foreground mb-1 truncate",children:m.vendor}),n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("div",{className:"flex gap-0.5",children:dW(m.rating)}),n.jsxs(_N,{children:[n.jsx(NN,{asChild:!0,children:n.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{className:"text-xs",children:m.distance})]})}),n.jsx($x,{side:"bottom",className:"text-xs",children:"Distance from you"})]})]}),n.jsx("p",{className:"font-bold text-primary text-sm",children:m.price})]},m.id))})]})}const hW=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),y=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return d*v/1e3};function fW(){const e=st();mr();const{toast:t}=hn(),{addToCartWithAuth:s}=Bc(),[r,i]=j.useState([]),[a,o]=j.useState(!0),[c,d]=j.useState(xt.getLocation());j.useEffect(()=>{const p=xt.subscribe(d);return f(),p},[]),j.useEffect(()=>{c&&f()},[c]);const f=async()=>{try{o(!0);const p={"ngrok-skip-browser-warning":"true"},y=xt.getLocation(),v=new URLSearchParams({page_size:"20"});y&&(v.append("latitude",y.latitude.toString()),v.append("longitude",y.longitude.toString()));const x=await(await fetch(`${rt}search/products/?${v}`,{headers:p})).json(),b=m(x.results||[]);i(b)}catch(p){console.error("Error fetching featured products:",p)}finally{o(!1)}},m=p=>{const y=xt.getLocation();let w=p.filter(x=>x.featured===!0).map(x=>{var C,I;const b=((C=x.images)==null?void 0:C.find(k=>k.is_primary))||((I=x.images)==null?void 0:I[0]);let _="N/A",N=1/0;return y&&x.vendor_latitude&&x.vendor_longitude&&(N=hW(y.latitude,y.longitude,x.vendor_latitude,x.vendor_longitude),_=`${N.toFixed(1)} km`),{id:x.id,name:x.name,vendor:x.vendor_name||"Unknown Vendor",distance:_,distanceValue:N,rating:4.5,price:`₹${x.price}`,priceValue:parseFloat(x.price),image:(b==null?void 0:b.image_url)||"/placeholder-product.jpg",inStock:x.quantity>0,category:x.category,featured:x.featured}});return w.sort((x,b)=>b.rating-x.rating),w.slice(0,6)},h=p=>{e(`/product/${p}`)},u=async p=>{try{await s(p.id.toString(),1),t({title:"Added to Cart",description:`${p.name} added to your cart`}),e("/cart")}catch(y){console.error("Error adding to cart:",y)}};return a?n.jsxs("section",{className:"px-4 py-3 mb-8 bg-gradient-to-br from-gray-50 to-gray-100",children:[n.jsx("div",{className:"flex items-center justify-between mb-4",children:n.jsx("h2",{className:"text-xl md:text-2xl font-semibold tracking-tight text-black",children:"Featured Products"})}),n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(Vn,{className:"h-8 w-8 animate-spin"})})]}):n.jsxs("section",{className:"px-4 py-3 mb-8 bg-gradient-to-br from-gray-50 to-gray-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl md:text-2xl font-semibold tracking-tight text-black",children:"Featured Products"}),n.jsx(ne,{variant:"outline",size:"sm",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},className:"rounded-full hover:bg-[#856043] hover:text-white text-sm",onClick:()=>e("/featured-items"),children:"View All"})]}),n.jsx("div",{className:"flex gap-3 overflow-x-auto pb-3 md:grid md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 md:overflow-visible md:pb-0",children:r.map((p,y)=>n.jsxs(Ql.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:y*.1,duration:.3},whileHover:{scale:1.02,rotate:.5},className:"relative flex-shrink-0 w-40 md:w-auto rounded-lg bg-white border border-gray-200 hover:border-[#856043] shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-300 overflow-hidden group cursor-pointer",onClick:()=>h(p.id),children:[n.jsx(Ql.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:y*.1+.2,duration:.2},className:"absolute top-2 left-2 bg-emerald-600 text-white text-xs px-2 py-0.5 rounded-full font-semibold shadow-sm",children:"Featured"}),n.jsx("div",{className:"w-full h-32 overflow-hidden",children:n.jsx("img",{src:p.image,alt:p.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:v=>{v.target.src="/placeholder-product.jpg"}})}),n.jsxs("div",{className:"p-3 flex flex-col justify-between h-40",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-xs md:text-sm text-gray-800 mb-1 line-clamp-2 leading-tight",children:p.name}),n.jsx("p",{className:"text-xs text-gray-600 mb-1 truncate",children:p.vendor})]}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsx("span",{className:"font-medium text-sm text-[#856043]",children:p.price})}),n.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[Array.from({length:5}).map((v,w)=>n.jsx("span",{className:`text-xs ${w<Math.floor(p.rating)?"text-amber-400":"text-gray-300"}`,children:"★"},w)),n.jsx("span",{className:"text-xs text-gray-500 ml-1",children:p.rating.toFixed(1)})]}),n.jsx("div",{className:"flex justify-center",children:p.inStock?n.jsxs(ne,{variant:"outline",className:"w-full text-xs py-1.5 shadow-sm h-7",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},onMouseOver:v=>{v.currentTarget.style.backgroundColor="#856043",v.currentTarget.style.color="#ffffff"},onMouseOut:v=>{v.currentTarget.style.backgroundColor="transparent",v.currentTarget.style.color="#856043"},onClick:v=>{v.stopPropagation(),u(p)},children:[n.jsx(Is,{className:"h-3 w-3 mr-1"})," Buy"]}):n.jsx(ne,{disabled:!0,className:"w-full bg-gray-200 text-gray-500 cursor-not-allowed text-xs py-1.5 shadow-sm h-7",children:"Out of Stock"})})]})]})]},p.id))}),r.length===0&&!a&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"⭐"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No featured products"}),n.jsx("p",{className:"text-muted-foreground",children:"Featured products will appear here when available"})]})]})}const mW=e=>[{icon:nb,label:"Home",id:"home",path:"/home"},{icon:At,label:"Product",id:"search",path:"/search"},{icon:Is,label:"Cart",id:"cart",path:"/cart",badge:e>0?e:void 0},{icon:PD,label:"Orders",id:"orders",path:"/orders"},{icon:Lr,label:"Profile",id:"profile",path:"/profile"}];function Ds(){const[e,t]=j.useState("home"),s=st(),r=fr(),{cart:i}=mr(),a=mW((i==null?void 0:i.total_items)||0);j.useEffect(()=>{const c=r.pathname,d=a.find(f=>f.path===c);d&&t(d.id)},[r.pathname]);const o=(c,d)=>{t(c),s(d)};return n.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-200/50 z-50 shadow-[0_-2px_8px_rgba(0,0,0,0.05)]",children:[n.jsx("div",{className:"flex justify-around items-center h-20 md:h-14 max-w-lg mx-auto py-2 md:py-1",children:a.map(c=>{const d=e===c.id;return n.jsxs("button",{onClick:()=>o(c.id,c.path),className:`relative flex flex-col items-center justify-center p-4 md:p-2 transition-all duration-300 ease-in-out group ${d?"text-black":"text-gray-500 hover:text-black/80"}`,children:[n.jsxs("div",{className:"relative flex items-center justify-center",children:[n.jsx(c.icon,{className:`h-6 w-6 md:h-5 md:w-5 transition-all duration-300 ease-in-out ${d?"scale-110 drop-shadow-[0_0_6px_rgba(0,0,0,0.2)]":"group-hover:scale-105 group-hover:drop-shadow-[0_0_4px_rgba(0,0,0,0.1)]"}`}),c.badge&&n.jsx("span",{className:"absolute -top-2 -right-3 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold animate-bounce",children:c.badge})]}),n.jsx("span",{className:"text-xs font-semibold tracking-wide mt-1.5 font-sans",children:c.label}),d&&n.jsx("div",{className:"absolute bottom-0 w-10 h-1 bg-black rounded-full shadow-[0_0_6px_rgba(0,0,0,0.3)] animate-scale-in"}),n.jsx("div",{className:`absolute inset-0 rounded-full bg-black/5 transition-all duration-300 ${d?"opacity-10 scale-105":"opacity-0 group-hover:opacity-10 group-hover:scale-100"}`})]},c.id)})}),n.jsx("style",{children:`
        .animate-scale-in {
          animation: scale-in 0.3s ease-in-out;
        }
        @keyframes scale-in {
          from {
            transform: scaleX(0);
          }
          to {
            transform: scaleX(1);
          }
        }
        .animate-bounce {
          animation: bounce 1.8s ease-in-out infinite;
        }
        @keyframes bounce {
          0%, 100% {
            transform: translateY(-20%);
            animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
          }
          50% {
            transform: translateY(0);
            animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
          }
        }
      `})]})}const xS=()=>n.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[n.jsx(_9,{}),n.jsx(S9,{}),n.jsx(k9,{}),n.jsx(A9,{}),n.jsx(uW,{}),n.jsx(fW,{}),n.jsx(Ds,{})]}),as=e=>{if(!e)return"/placeholder-product.jpg";if(e.includes("ngrok-free.app")){const r=new URL(e);return r.searchParams.set("ngrok-skip-browser-warning","true"),r.toString()}if(e.startsWith("/media/")||e.startsWith("media/")){const r=`${bs.BASE_URL}${e.startsWith("/")?e:`/${e}`}`,i=new URL(r);return i.searchParams.set("ngrok-skip-browser-warning","true"),i.toString()}if(e.startsWith("http"))return e;const t=`${bs.BASE_URL}/media/${e}`,s=new URL(t);return s.searchParams.set("ngrok-skip-browser-warning","true"),s.toString()};function pW(){var T,A,z;const e=st(),{id:t}=mp();mr();const{toast:s}=hn(),{addToCartWithAuth:r,buyNowWithAuth:i}=Bc(),[a,o]=j.useState(1),[c,d]=j.useState(!1),[f,m]=j.useState(!1),[h,u]=j.useState(null),[p,y]=j.useState(!0),[v,w]=j.useState(""),[x,b]=j.useState(0);j.useEffect(()=>{t&&_()},[t]);const _=async()=>{var O,F;try{y(!0);const G=await fetch(`${rt}search/products/?page_size=1000`,{headers:{"ngrok-skip-browser-warning":"true"}});if(!G.ok)throw new Error("Failed to fetch products");const K=(O=(await G.json()).results)==null?void 0:O.find(B=>B.id===parseInt(t));if(!K)throw new Error("Product not found");u(K);const U=await Re.getToken();if(U)try{const B=await fetch(`${rt}favorites/`,{headers:{Authorization:`Token ${U}`,"ngrok-skip-browser-warning":"true"}});if(B.ok){const $=(F=(await B.json()).results)==null?void 0:F.some(W=>W.product.id===K.id);d($||!1)}}catch(B){console.log("Could not fetch favorites:",B)}}catch(G){console.error("Error fetching product:",G),w("Failed to load product details")}finally{y(!1)}},N=O=>{o(Math.max(1,a+O))},C=async()=>{if(h){m(!0);try{await r(h.id.toString(),a)}catch(O){console.error("Error adding to cart:",O)}finally{m(!1)}}},I=async()=>{if(!h)return;const O={id:h.id,name:h.name,price:h.price,quantity:a,vendor_name:h.vendor_name,vendor_id:h.vendor_id,images:h.images};await i(O)},k=async()=>{if(!h)return;const O=await Re.getToken();if(!O){s({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const F=await fetch(`${rt}favorites/toggle/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${O}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:h.id})});if(!F.ok)throw new Error("Failed to toggle favorite");const G=await F.json();d(G.is_favorite),s({title:G.is_favorite?"Added to Favorites":"Removed from Favorites",description:G.message})}catch(F){console.error("Error toggling favorite:",F),s({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},E=async()=>{if(!h)return;const O={title:h.name,text:`Check out ${h.name} - ₹${h.price}`,url:window.location.href};try{navigator.share?await navigator.share(O):(await navigator.clipboard.writeText(window.location.href),s({title:"Link Copied",description:"Product link copied to clipboard"}))}catch(F){console.error("Error sharing:",F),s({title:"Error",description:"Failed to share product",variant:"destructive"})}};if(p)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Vn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading product details..."})]})});if(v||!h)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:v||"Product not found"}),n.jsx(ne,{onClick:()=>e(-1),children:"Go Back"})]})});const M=((T=h.images)==null?void 0:T.find(O=>O.is_primary))||((A=h.images)==null?void 0:A[0]),P=((z=h.images)==null?void 0:z[x])||M;return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-md",children:n.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[n.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full hover:bg-gray-100",children:n.jsx(Yt,{className:"h-5 w-5 text-gray-800"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"ghost",size:"icon",onClick:k,className:"rounded-full hover:bg-gray-100",children:n.jsx(hr,{className:`h-5 w-5 ${c?"fill-red-500 text-red-500":"text-gray-800"}`})}),n.jsx(ne,{variant:"ghost",size:"icon",onClick:E,className:"rounded-full hover:bg-gray-100",children:n.jsx(ID,{className:"h-5 w-5 text-gray-800"})})]})]})}),n.jsxs("div",{className:"relative bg-white p-4",children:[n.jsx("div",{className:"aspect-square max-w-md mx-auto mb-4 border-t-2 border-b-2 border-gray-100",children:n.jsx("img",{src:as(P==null?void 0:P.image_url),alt:h.name,className:"w-full h-full object-cover",onError:O=>{O.target.src="/placeholder-product.jpg"}})}),h.images&&h.images.length>1&&n.jsx("div",{className:"border-t border-b border-gray-200 py-3",children:n.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-md mx-auto",children:h.images.slice(0,4).map((O,F)=>n.jsx("button",{onClick:()=>b(F),className:`aspect-square overflow-hidden border-2 transition-all duration-200 ${x===F?"border-blue-500 shadow-md scale-105":"border-gray-300 hover:border-gray-400"}`,children:n.jsx("img",{src:as(O.image_url),alt:`${h.name} ${F+1}`,className:"w-full h-full object-cover",onError:G=>{G.target.src="/placeholder-product.jpg"}})},O.id))})})]}),n.jsxs("div",{className:"bg-white px-4 py-6 space-y-4 shadow-sm",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:h.name}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-baseline gap-2",children:n.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["₹",h.price]})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"4.5"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ie,{variant:"secondary",className:"bg-blue-100 text-blue-800 capitalize",children:h.category}),h.quantity>0?n.jsxs(Ie,{variant:"secondary",className:"bg-green-100 text-green-800",children:["In Stock (",h.quantity," available)"]}):n.jsx(Ie,{variant:"destructive",children:"Out of Stock"})]})]}),n.jsxs("div",{className:"bg-white px-4 py-6 space-y-2 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-base text-gray-900",children:"Description"}),n.jsx("div",{className:"text-sm text-gray-600 leading-relaxed",dangerouslySetInnerHTML:{__html:h.description}}),h.short_description&&n.jsxs("p",{className:"text-sm text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Summary:"})," ",h.short_description]})]}),h.tags&&h.tags.length>0&&n.jsxs("div",{className:"bg-white px-4 py-6 space-y-2 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-base text-gray-900",children:"Tags"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:h.tags.map((O,F)=>n.jsx(Ie,{variant:"outline",className:"text-xs border-gray-300 text-gray-700",children:O},F))})]}),n.jsx("div",{className:"mx-4 my-4 bg-white shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e(`/vendor/${h.vendor_id}`),children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-100 flex items-center justify-center text-2xl",children:"🏪"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-base text-gray-900",children:h.vendor_name}),n.jsx(yi,{className:"h-4 w-4 text-primary"})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:"4.8"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(or,{className:"h-3 w-3"}),n.jsx("span",{children:"30-45 mins"})]})]})]})]})}),n.jsxs("div",{className:"bg-white px-4 py-6 flex items-center justify-between shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-base text-gray-900",children:"Quantity"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"outline",size:"icon",onClick:()=>N(-1),className:"h-8 w-8 rounded-full",children:n.jsx(LD,{className:"h-4 w-4"})}),n.jsx("span",{className:"font-semibold text-lg w-8 text-center",children:a}),n.jsx(ne,{variant:"outline",size:"icon",onClick:()=>N(1),className:"h-8 w-8 rounded-full",children:n.jsx(xn,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:n.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[n.jsx(ne,{variant:"outline",className:"flex-1 h-12 rounded-lg text-gray-800 font-semibold",onClick:C,disabled:f||h.quantity===0,children:f?"Adding...":"Add to Cart"}),n.jsx(ne,{className:"flex-1 h-12 rounded-lg bg-green-600 hover:bg-green-700 text-white font-semibold",onClick:I,disabled:f||h.quantity===0,children:f?"Processing...":"Buy Now"})]})})]})}const Ee=j.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:We("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ee.displayName="Card";const jt=j.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:We("flex flex-col space-y-1.5 p-6",e),...t}));jt.displayName="CardHeader";const _t=j.forwardRef(({className:e,...t},s)=>n.jsx("h3",{ref:s,className:We("text-2xl font-semibold leading-none tracking-tight",e),...t}));_t.displayName="CardTitle";const gW=j.forwardRef(({className:e,...t},s)=>n.jsx("p",{ref:s,className:We("text-sm text-muted-foreground",e),...t}));gW.displayName="CardDescription";const Ae=j.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:We("p-6 pt-0",e),...t}));Ae.displayName="CardContent";const vW=j.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:We("flex items-center p-6 pt-0",e),...t}));vW.displayName="CardFooter";var kp="Tabs",[xW,Pse]=ls(kp,[Uc]),TO=Uc(),[yW,yw]=xW(kp),AO=j.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:d="automatic",...f}=e,m=Vc(c),[h,u]=zr({prop:r,onChange:i,defaultProp:a??"",caller:kp});return n.jsx(yW,{scope:s,baseId:Fr(),value:h,onValueChange:u,orientation:o,dir:m,activationMode:d,children:n.jsx(Ye.div,{dir:m,"data-orientation":o,...f,ref:t})})});AO.displayName=kp;var OO="TabsList",RO=j.forwardRef((e,t)=>{const{__scopeTabs:s,loop:r=!0,...i}=e,a=yw(OO,s),o=TO(s);return n.jsx(Eb,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:n.jsx(Ye.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});RO.displayName=OO;var LO="TabsTrigger",MO=j.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,disabled:i=!1,...a}=e,o=yw(LO,s),c=TO(s),d=FO(o.baseId,r),f=$O(o.baseId,r),m=r===o.value;return n.jsx(Tb,{asChild:!0,...c,focusable:!i,active:m,children:n.jsx(Ye.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...a,ref:t,onMouseDown:Me(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Me(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Me(e.onFocus,()=>{const h=o.activationMode!=="manual";!m&&!i&&h&&o.onValueChange(r)})})})});MO.displayName=LO;var IO="TabsContent",DO=j.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,forceMount:i,children:a,...o}=e,c=yw(IO,s),d=FO(c.baseId,r),f=$O(c.baseId,r),m=r===c.value,h=j.useRef(m);return j.useEffect(()=>{const u=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(u)},[]),n.jsx(Qn,{present:i||m,children:({present:u})=>n.jsx(Ye.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!u,id:f,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:u&&a})})});DO.displayName=IO;function FO(e,t){return`${e}-trigger-${t}`}function $O(e,t){return`${e}-content-${t}`}var bW=AO,zO=RO,BO=MO,VO=DO;const Si=bW,qr=j.forwardRef(({className:e,...t},s)=>n.jsx(zO,{ref:s,className:We("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));qr.displayName=zO.displayName;const Ct=j.forwardRef(({className:e,...t},s)=>n.jsx(BO,{ref:s,className:We("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ct.displayName=BO.displayName;const dt=j.forwardRef(({className:e,...t},s)=>n.jsx(VO,{ref:s,className:We("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));dt.displayName=VO.displayName;const wW=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),y=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return d*v/1e3};function jW(){var N;const e=st(),{vendorId:t}=mp(),[s,r]=j.useState(!1),[i,a]=j.useState(null),[o,c]=j.useState([]),[d,f]=j.useState(!0),[m,h]=j.useState(null),[u,p]=j.useState(xt.getLocation()),[y,v]=j.useState("N/A"),{toast:w}=hn(),{addToCart:x}=mr();j.useEffect(()=>{const C=xt.subscribe(p);return xt.startTracking(),C},[]),j.useEffect(()=>{t&&b()},[t]);const b=async()=>{var C;try{f(!0),h(null);const{response:I,data:k}=await Be(`/api/vendors/${t}/`);if(!I.ok)throw I.status===404?new Error("Vendor not found"):new Error("Failed to fetch vendor profile");if(!k)throw new Error("No vendor data received");a(k);const E=xt.getLocation();if(E&&k.latitude&&k.longitude){const T=wW(E.latitude,E.longitude,k.latitude,k.longitude);v(`${T.toFixed(1)} km`)}const{response:M,data:P}=await Be(`search/products/?search=${encodeURIComponent(k.business_name)}`);if(M.ok&&P){const T=((C=P.results)==null?void 0:C.filter(A=>A.vendor_name===k.business_name))||[];c(T)}if(!I.ok)throw I.status===404?new Error("Vendor not found"):new Error("Failed to fetch vendor profile")}catch(I){console.error("Error fetching vendor profile:",I),h(I.message),w({title:"Error",description:"Failed to load vendor profile",variant:"destructive"})}finally{f(!1)}},_=C=>{const I=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],k=[];for(const E of I){const M=`${E}_open`,P=`${E}_close`,T=`${E}_closed`;!C[T]&&C[M]&&C[P]&&k.push(`${E.charAt(0).toUpperCase()+E.slice(1)}: ${C[M]} - ${C[P]}`)}return k.length>0?k.join(", "):"Hours not specified"};return d?n.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Vn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading vendor profile..."})]})}):m||!i?n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center justify-between p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold",children:"Vendor Not Found"}),n.jsx("div",{className:"w-10"})]})}),n.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ms,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vendor Not Found"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"The vendor you're looking for doesn't exist or is not available."}),n.jsx(ne,{onClick:()=>e("/search"),children:"Browse Vendors"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center justify-between p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold truncate",children:i.business_name}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>r(!s),className:"p-2",children:n.jsx(hr,{className:`h-5 w-5 ${s?"fill-red-500 text-red-500":""}`})})]})}),n.jsx("div",{className:"p-4 bg-gradient-subtle",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:(N=i.user_info)!=null&&N.profile_picture?n.jsx("img",{src:as(i.user_info.profile_picture),alt:i.business_name,className:"w-full h-full object-cover",onError:C=>{C.target.src="/placeholder-vendor.jpg"}}):n.jsx(ms,{className:"h-8 w-8 text-gray-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h2",{className:"text-lg font-bold",children:i.business_name}),i.is_approved&&n.jsx(yi,{className:"h-5 w-5 text-green-500"}),n.jsx(Ie,{variant:i.is_active?"default":"destructive",className:"text-xs",children:i.is_active?"Open":"Closed"})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),n.jsx("span",{className:"font-medium",children:"4.5"}),n.jsx("span",{children:"(Reviews coming soon)"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-4 w-4"}),n.jsx("span",{children:y})]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:i.categories&&i.categories.map((C,I)=>n.jsx(Ie,{variant:"secondary",className:"text-xs",children:C},I))})]})]})}),n.jsx("div",{className:"px-4 py-3 bg-card border-b border-border/50",children:n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx(or,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery"}),n.jsx("p",{className:"text-sm font-medium",children:i.estimated_delivery_time||"30-45 mins"})]}),n.jsxs("div",{children:[n.jsx(ms,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Min Order"}),n.jsxs("p",{className:"text-sm font-medium",children:["₹",i.min_order_amount||"0"]})]}),n.jsxs("div",{children:[n.jsx(Kt,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Type"}),n.jsx("p",{className:"text-sm font-medium capitalize",children:i.business_type})]})]})}),n.jsxs("div",{className:"px-4 py-3 flex gap-3",children:[n.jsxs(ne,{variant:"brand",className:"flex-1 h-10",onClick:()=>e(`/messages?vendor=${i.user}`),children:[n.jsx(Ro,{className:"h-4 w-4 mr-2"}),"Message"]}),n.jsxs(ne,{variant:"outline",className:"flex-1 h-10",onClick:()=>{if(i.latitude&&i.longitude&&u){const C=`https://www.google.com/maps/dir/${u.latitude},${u.longitude}/${i.latitude},${i.longitude}`;window.open(C,"_blank")}else if(i.latitude&&i.longitude){const C=`https://www.google.com/maps/place/${i.latitude},${i.longitude}`;window.open(C,"_blank")}},children:[n.jsx(Kt,{className:"h-4 w-4 mr-2"}),"View in Map"]})]}),n.jsx("div",{className:"flex-1",children:n.jsxs(Si,{defaultValue:"products",className:"w-full",children:[n.jsxs(qr,{className:"grid w-full grid-cols-3 mx-4",children:[n.jsx(Ct,{value:"products",children:"Products"}),n.jsx(Ct,{value:"about",children:"About"}),n.jsx(Ct,{value:"reviews",children:"Reviews"})]}),n.jsx(dt,{value:"products",className:"p-4 space-y-3",children:o.length>0?n.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.map(C=>{var k,E;const I=((k=C.images)==null?void 0:k.find(M=>M.is_primary))||((E=C.images)==null?void 0:E[0]);return n.jsx(Ee,{className:"p-3 cursor-pointer hover:shadow-md transition-smooth",onClick:()=>e(`/product/${C.id}`),children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"aspect-square mb-2 bg-gray-100 rounded-lg overflow-hidden",children:n.jsx("img",{src:as(I==null?void 0:I.image_url),alt:C.name,className:"w-full h-full object-cover",onError:M=>{M.target.src="/placeholder-product.jpg"}})}),n.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:C.name}),n.jsxs("p",{className:"font-semibold text-primary text-sm mb-2",children:["₹",C.price]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ne,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",disabled:C.quantity===0,onClick:M=>{M.stopPropagation(),x(C.id,1)},children:n.jsx(Is,{className:"h-3 w-3"})}),n.jsxs(ne,{size:"sm",className:"flex-1 h-7 text-xs bg-green-600 hover:bg-green-700",disabled:C.quantity===0,onClick:M=>{M.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:C.id,name:C.name,price:C.price,quantity:1,vendor_name:C.vendor_name,images:C.images}}})},children:[n.jsx(xn,{className:"h-3 w-3"}),"Buy"]})]})]})},C.id)})}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(ms,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"font-semibold mb-2",children:"No Products Available"}),n.jsx("p",{className:"text-muted-foreground text-sm",children:"This vendor hasn't added any products yet."})]})}),n.jsxs(dt,{value:"about",className:"p-4 space-y-4",children:[i.description&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),n.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:i.description})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Business Information"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ms,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:"Owner:"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:i.owner_name})]}),i.business_email&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ro,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:"Email:"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:i.business_email})]}),i.business_phone&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ro,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:"Phone:"}),n.jsx("span",{className:"text-sm text-muted-foreground",children:i.business_phone})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Location"}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Kt,{className:"h-4 w-4 text-primary mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:i.business_address}),i.location_address&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.location_address}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i.city,", ",i.state," - ",i.pincode]})]})]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Operating Hours"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:_(i)})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Services"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.home_delivery&&n.jsx(Ie,{variant:"secondary",children:"Home Delivery"}),i.pickup_service&&n.jsx(Ie,{variant:"secondary",children:"Pickup Service"}),i.online_ordering&&n.jsx(Ie,{variant:"secondary",children:"Online Ordering"}),i.bulk_orders&&n.jsx(Ie,{variant:"secondary",children:"Bulk Orders"}),i.subscription_service&&n.jsx(Ie,{variant:"secondary",children:"Subscription"}),i.loyalty_program&&n.jsx(Ie,{variant:"secondary",children:"Loyalty Program"})]})]})]}),n.jsx(dt,{value:"reviews",className:"p-4",children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx(dn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"Reviews coming soon"})]})})]})})]})}function _W(){const e=st();return j.useEffect(()=>{const t=setTimeout(()=>{e("/login")},3e3);return()=>clearTimeout(t)},[e]),n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-700 via-emerald-600 to-blue-600 flex flex-col items-center justify-center px-6 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx("div",{className:"absolute w-64 h-64 bg-indigo-400/20 rounded-full blur-3xl animate-float top-10 left-10"}),n.jsx("div",{className:"absolute w-80 h-80 bg-emerald-400/20 rounded-full blur-3xl animate-float-delayed bottom-20 right-20"})]}),n.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl w-full max-w-sm rounded-2xl p-10 text-center shadow-2xl border border-white/15 animate-in fade-in zoom-in-95 duration-1000",children:[n.jsx("div",{className:"relative w-28 h-28 bg-gradient-to-r from-indigo-500 to-emerald-500 rounded-xl flex items-center justify-center mx-auto mb-6 shadow-xl transform transition-all duration-700 hover:scale-110 hover:rotate-3",children:n.jsx("span",{className:"text-6xl drop-shadow-lg animate-pulse-subtle",children:"🛒"})}),n.jsx("h1",{className:"text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-indigo-100 to-emerald-100 tracking-tight mb-3",children:"KathSnap"}),n.jsx("p",{className:"text-white/90 text-lg font-medium tracking-wide leading-relaxed",children:"Swift Shopping, Delivered to Your Door"})]}),n.jsxs("div",{className:"absolute bottom-16 flex flex-col items-center",children:[n.jsx("div",{className:"w-10 h-10 border-4 border-t-transparent border-white/95 rounded-full animate-spin mb-4 shadow-lg"}),n.jsx("p",{className:"text-white/85 text-sm font-medium tracking-wide animate-pulse-subtle",children:"Preparing Your Shopping Journey..."})]}),n.jsx("style",{children:`
        @keyframes float {
          0%, 100% { transform: translateY(0) translateX(0); }
          50% { transform: translateY(-20px) translateX(10px); }
        }
        @keyframes float-delayed {
          0%, 100% { transform: translateY(0) translateX(0); }
          50% { transform: translateY(20px) translateX(-10px); }
        }
        @keyframes pulse-subtle {
          0%, 100% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.03); opacity: 0.9; }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float-delayed 6s ease-in-out infinite;
        }
        .animate-pulse-subtle {
          animation: pulse-subtle 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
      `})]})}function Cp(e){const t=j.useRef({value:e,previous:e});return j.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Pp="Checkbox",[NW,Ese]=ls(Pp),[SW,bw]=NW(Pp);function kW(e){const{__scopeCheckbox:t,checked:s,children:r,defaultChecked:i,disabled:a,form:o,name:c,onCheckedChange:d,required:f,value:m="on",internal_do_not_use_render:h}=e,[u,p]=zr({prop:s,defaultProp:i??!1,onChange:d,caller:Pp}),[y,v]=j.useState(null),[w,x]=j.useState(null),b=j.useRef(!1),_=y?!!o||!!y.closest("form"):!0,N={checked:u,disabled:a,setChecked:p,control:y,setControl:v,name:c,form:o,value:m,hasConsumerStoppedPropagationRef:b,required:f,defaultChecked:Ia(i)?!1:i,isFormControl:_,bubbleInput:w,setBubbleInput:x};return n.jsx(SW,{scope:t,...N,children:CW(h)?h(N):r})}var UO="CheckboxTrigger",qO=j.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...r},i)=>{const{control:a,value:o,disabled:c,checked:d,required:f,setControl:m,setChecked:h,hasConsumerStoppedPropagationRef:u,isFormControl:p,bubbleInput:y}=bw(UO,e),v=ft(i,m),w=j.useRef(d);return j.useEffect(()=>{const x=a==null?void 0:a.form;if(x){const b=()=>h(w.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[a,h]),n.jsx(Ye.button,{type:"button",role:"checkbox","aria-checked":Ia(d)?"mixed":d,"aria-required":f,"data-state":KO(d),"data-disabled":c?"":void 0,disabled:c,value:o,...r,ref:v,onKeyDown:Me(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Me(s,x=>{h(b=>Ia(b)?!0:!b),y&&p&&(u.current=x.isPropagationStopped(),u.current||x.stopPropagation())})})});qO.displayName=UO;var ww=j.forwardRef((e,t)=>{const{__scopeCheckbox:s,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:d,onCheckedChange:f,form:m,...h}=e;return n.jsx(kW,{__scopeCheckbox:s,checked:i,defaultChecked:a,disabled:c,required:o,onCheckedChange:f,name:r,form:m,value:d,internal_do_not_use_render:({isFormControl:u})=>n.jsxs(n.Fragment,{children:[n.jsx(qO,{...h,ref:t,__scopeCheckbox:s}),u&&n.jsx(GO,{__scopeCheckbox:s})]})})});ww.displayName=Pp;var HO="CheckboxIndicator",WO=j.forwardRef((e,t)=>{const{__scopeCheckbox:s,forceMount:r,...i}=e,a=bw(HO,s);return n.jsx(Qn,{present:r||Ia(a.checked)||a.checked===!0,children:n.jsx(Ye.span,{"data-state":KO(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});WO.displayName=HO;var ZO="CheckboxBubbleInput",GO=j.forwardRef(({__scopeCheckbox:e,...t},s)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:c,disabled:d,name:f,value:m,form:h,bubbleInput:u,setBubbleInput:p}=bw(ZO,e),y=ft(s,p),v=Cp(a),w=ip(r);j.useEffect(()=>{const b=u;if(!b)return;const _=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(_,"checked").set,I=!i.current;if(v!==a&&C){const k=new Event("click",{bubbles:I});b.indeterminate=Ia(a),C.call(b,Ia(a)?!1:a),b.dispatchEvent(k)}},[u,v,a,i]);const x=j.useRef(Ia(a)?!1:a);return n.jsx(Ye.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:c,disabled:d,name:f,value:m,form:h,...t,tabIndex:-1,ref:y,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});GO.displayName=ZO;function CW(e){return typeof e=="function"}function Ia(e){return e==="indeterminate"}function KO(e){return Ia(e)?"indeterminate":e?"checked":"unchecked"}const vy=j.forwardRef(({className:e,...t},s)=>n.jsx(ww,{ref:s,className:We("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(WO,{className:We("flex items-center justify-center text-current"),children:n.jsx(tp,{className:"h-4 w-4"})})}));vy.displayName=ww.displayName;const PW=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),y=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return d*v/1e3},yS=()=>{const[e,t]=j.useState([]),[s,r]=j.useState(!0),{addToCart:i}=mr(),a=st();j.useEffect(()=>{o()},[]);const o=async()=>{try{const c={"ngrok-skip-browser-warning":"true"},d=xt.getLocation(),f=new URLSearchParams({page_size:"6"});d&&(f.append("latitude",d.latitude.toString()),f.append("longitude",d.longitude.toString()));const u=((await(await fetch(`${rt}search/products/?${f}`,{headers:c})).json()).results||[]).map(p=>{var w,x;const y=((w=p.images)==null?void 0:w.find(b=>b.is_primary))||((x=p.images)==null?void 0:x[0]);let v="N/A";return d&&p.vendor_latitude&&p.vendor_longitude&&(v=`${PW(d.latitude,d.longitude,p.vendor_latitude,p.vendor_longitude).toFixed(1)} km`),{id:p.id,name:p.name,vendor:p.vendor_name||"Unknown Vendor",price:p.price,image:(y==null?void 0:y.image_url)||"/placeholder-product.jpg",distance:v,inStock:p.quantity>0}});t(u)}catch(c){console.error("Failed to fetch products:",c)}finally{r(!1)}};return s?n.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 md:grid-cols-3 md:gap-3",children:[...Array(6)].map((c,d)=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden animate-pulse",children:[n.jsx("div",{className:"h-24 bg-gray-200"}),n.jsxs("div",{className:"p-2 space-y-2",children:[n.jsx("div",{className:"h-3 bg-gray-200 rounded"}),n.jsx("div",{className:"h-2 bg-gray-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},d))}):n.jsxs("div",{children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3 px-2",children:"Products Near You"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 md:grid-cols-3 md:gap-3",children:e.map(c=>n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:border-[#856043]/30 overflow-hidden shadow-sm",children:[n.jsx("div",{className:"relative h-24 overflow-hidden bg-gray-100 cursor-pointer",onClick:()=>a(`/product/${c.id}`),children:n.jsx("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:d=>{d.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),n.jsxs("div",{className:"p-2 space-y-1",children:[n.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2 leading-tight",children:c.name}),n.jsx("p",{className:"text-[10px] text-gray-500",children:c.vendor}),n.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500",children:[n.jsx(Kt,{className:"h-2 w-2"}),n.jsx("span",{children:c.distance})]}),n.jsxs("p",{className:"text-xs font-bold text-[#856043]",children:["₹",c.price]}),n.jsxs(ne,{variant:"outline",size:"sm",className:"w-full border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white rounded-md text-[10px] py-1",disabled:!c.inStock,onClick:()=>i(c.id,1),children:[n.jsx(Is,{className:"w-2 h-2 mr-1"}),"Add to Cart"]})]})]},c.id))})]})};function EW(){const{toast:e}=hn(),{cart:t,loading:s,updateCartItem:r,removeFromCart:i}=mr();j.useState("");const[a,o]=j.useState(0),[c,d]=j.useState([]),f=st(),m=[];j.useEffect(()=>{t!=null&&t.items&&d([])},[t]);const h=(t==null?void 0:t.items)||[],u=h.filter(P=>c.includes(P.id)),p=c.length===h.length&&h.length>0,y=P=>{d(P?h.map(T=>T.id):[])},v=P=>{d(T=>T.includes(P)?T.filter(A=>A!==P):[...T,P])},w=async(P,T)=>{const A=h.find(z=>z.id===P);if(A){const z=A.quantity+T;z>0&&await r(P,z)}},x=async P=>{await i(P)},b=async()=>{if(c.length!==0){for(const P of c)await i(P);d([])}},_=P=>{x(P.id),e({title:"Feature Coming Soon",description:"Save for later feature will be available soon"})},N=P=>{e({title:"Feature Coming Soon",description:"Move to cart feature will be available soon"})},I=u.reduce((P,T)=>P+parseFloat(T.total_price.toString()),0),k=I*.05,E=I*a,M=I+k-E;return s?n.jsx("div",{className:"min-h-screen bg-gray-50 font-sans flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Is,{className:"mx-auto h-10 w-10 text-[#856043] mb-2 animate-pulse"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading cart..."})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-sm border-b py-2 px-3",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-2",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[n.jsx(Is,{className:"w-4 h-4 mr-1 text-[#856043]"}),"(",h.length,")"]}),n.jsx(ne,{variant:"outline",className:"border-[#856043] text-[#856043] hover:bg-[#856043]/10 hover:text-[#856043] rounded-md text-xs font-medium py-1 px-2",onClick:()=>f("/search"),children:"Continue Shopping"})]})}),n.jsx("main",{className:"max-w-7xl mx-auto px-3 py-4 pb-52 overflow-y-auto",style:{height:"calc(100vh - 120px)"},children:h.length===0?n.jsxs("div",{children:[n.jsxs("div",{className:"text-center py-6",children:[n.jsx(Is,{className:"mx-auto h-10 w-10 text-[#856043] mb-2"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Your Cart is Empty"}),n.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Discover products near you"})]}),n.jsx(yS,{})]}):n.jsxs("div",{className:"md:flex md:gap-4 space-y-2 md:space-y-0",children:[n.jsxs("div",{className:"md:w-1/2 space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(vy,{id:"select-all",checked:p,onCheckedChange:y,className:"data-[state=checked]:bg-[#856043] data-[state=checked]:border-[#856043]"}),n.jsxs("label",{htmlFor:"select-all",className:"text-sm font-medium text-gray-700 cursor-pointer",children:["Select all (",h.length,")"]})]}),n.jsxs(ne,{variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-xs px-3 py-1 rounded-md",onClick:b,disabled:c.length===0,children:[n.jsx(Ua,{className:"w-3 h-3 mr-1"}),"Delete (",c.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:n.jsx(S1,{children:h.map((P,T)=>{var A,z;return n.jsxs(Ql.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:T*.1},className:"bg-white p-3 flex items-center gap-3 rounded-lg border border-gray-200 shadow-sm hover:bg-gray-50 transition-colors",children:[n.jsx(vy,{checked:c.includes(P.id),onCheckedChange:()=>v(P.id),className:"data-[state=checked]:bg-[#856043] data-[state=checked]:border-[#856043] flex-shrink-0"}),n.jsx("div",{className:"w-12 h-12 flex-shrink-0 overflow-hidden rounded",children:n.jsx("img",{src:((z=(A=P.product.images)==null?void 0:A[0])==null?void 0:z.image_url)||"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200",alt:P.product.name,className:"w-full h-full object-cover",onError:O=>{O.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 truncate",children:P.product.name}),n.jsxs("p",{className:"text-[10px] text-gray-500 truncate",children:["Sold by ",P.product.vendor_name]}),n.jsx("div",{className:"flex items-center gap-1 mt-1",children:n.jsxs("p",{className:"text-xs font-bold text-[#856043]",children:["₹",P.product.price]})})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ne,{variant:"outline",size:"sm",className:"h-5 w-5 p-0 text-gray-600 border-gray-300 hover:border-[#856043] hover:text-[#856043]",onClick:()=>w(P.id,-1),children:"-"}),n.jsx("span",{className:"text-xs min-w-[1rem] text-center",children:P.quantity}),n.jsx(ne,{variant:"outline",size:"sm",className:"h-5 w-5 p-0 text-gray-600 border-gray-300 hover:border-[#856043] hover:text-[#856043]",onClick:()=>w(P.id,1),children:"+"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-1 text-[#856043] hover:text-[#856043]/90 hover:bg-[#856043]/5",onClick:()=>_(P),children:n.jsx(hr,{className:"w-3 h-3"})}),n.jsx(ne,{variant:"ghost",size:"sm",className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>x(P.id),children:n.jsx(Ua,{className:"w-3 h-3"})})]})]},P.id)})})}),m.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2 px-2",children:"Saved for Later"}),n.jsx(S1,{children:m.map((P,T)=>n.jsxs(Ql.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:T*.1},className:"bg-white p-2 flex items-center gap-2 border-b border-gray-300 hover:bg-gray-50",children:[n.jsx("div",{className:"w-12 h-12 flex-shrink-0 overflow-hidden rounded",children:n.jsx("img",{src:P.image,alt:P.name,className:"w-full h-full object-cover",onError:A=>{A.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-xs font-medium text-gray-900 truncate",children:P.name}),n.jsxs("p",{className:"text-[10px] text-gray-500 truncate",children:["Sold by ",P.vendor]}),n.jsx("p",{className:"text-xs font-bold text-[#856043] mt-1",children:P.price})]}),n.jsx(ne,{variant:"outline",size:"sm",className:"border-[#856043] text-[#856043] hover:bg-[#856043]/10 text-[10px] px-2 py-1",onClick:()=>N(),children:"Move to Cart"})]},P.id))})]})]}),n.jsx("div",{className:"md:w-1/2",children:n.jsx(yS,{})})]})}),h.length>0&&n.jsx(Ql.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"fixed bottom-20 left-0 right-0 bg-white border-t border-gray-300 z-40",children:n.jsx("div",{className:"max-w-7xl mx-auto px-3",children:n.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"30vh"},children:n.jsx("div",{className:"py-2",children:n.jsxs("div",{className:"md:flex md:items-center md:justify-between md:gap-6",children:[n.jsxs("div",{className:"md:flex-1",children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Order Summary"}),n.jsxs("div",{className:"space-y-2 text-xs mb-4 md:mb-0",children:[n.jsxs("div",{className:"flex justify-between text-gray-700",children:[n.jsxs("span",{children:["Subtotal (",u.length," items)"]}),n.jsxs("span",{className:"font-medium",children:["₹",I.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-gray-700",children:[n.jsx("span",{children:"Taxes (5%)"}),n.jsxs("span",{className:"font-medium",children:["₹",k.toFixed(2)]})]}),n.jsx("hr",{className:"border-gray-300 my-2"}),n.jsxs("div",{className:"flex justify-between font-bold text-sm text-gray-900",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{children:["₹",M.toFixed(2)]})]}),n.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-600 mt-2",children:[n.jsx(Wl,{className:"w-3 h-3"}),n.jsx("span",{className:"text-xs font-semibold",children:"Estimated delivery: ₹50-60"})]})]})]}),n.jsx(ne,{size:"lg",className:"w-full md:w-auto md:px-8 rounded-md bg-[#856043] text-white hover:bg-[#856043]/90 py-3 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed mb-2 md:mb-0",disabled:u.length===0,onClick:()=>f("/checkout",{state:{selectedItems:u}}),children:"Proceed to Checkout"})]})})})})}),n.jsx(Ds,{})]})}const pm=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),y=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return d*v/1e3},TW=()=>{const e=27.6398805,t=85.3303725,s=27.66424179701499,r=85.3465231243003,i=pm(e,t,s,r);console.log(`🧪 Your coordinates test: ${i.toFixed(3)} km (Google shows: 5.1 km)`);const a={lat:40.7128,lon:-74.006},o={lat:34.0522,lon:-118.2437},c=pm(a.lat,a.lon,o.lat,o.lon);console.log(`Test: NYC to LA = ${c.toFixed(2)} km (Google: ~3944 km)`),console.log(`🔗 Verify on Google Maps: https://www.google.com/maps/dir/${e},${t}/${s},${r}`)};function AW(){const e=st(),[t,s]=Sb(),[r,i]=j.useState(t.get("q")||""),[a,o]=j.useState({products:[],vendors:[]}),[c,d]=j.useState("all"),[f,m]=j.useState(!1),[h,u]=j.useState(xt.getLocation()),[p,y]=j.useState({page:1,hasMore:!0}),[v,w]=j.useState(new Set),[x,b]=j.useState(!1),[_,N]=j.useState(""),[C,I]=j.useState([]),{addToCart:k}=mr(),{toast:E}=hn(),[M,P]=j.useState([]),T=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const $=xt.subscribe(u);return xt.startTracking(),TW(),A(),K(),$},[]),j.useEffect(()=>{s(r?{q:r}:{}),y({page:1,hasMore:!0}),A(1,r)},[r,s]),j.useEffect(()=>{A(1,r)},[_,C]),j.useEffect(()=>{h&&(console.log("📍 Location updated, refetching data:",h),A(1,r))},[h]);const A=async($=1,W="")=>{var Z;m(!0);try{const X={"ngrok-skip-browser-warning":"true"},V=xt.getLocation();console.log("🔍 Frontend location check:",{userLocation:h,currentLocation:V});const H=new URLSearchParams({page:$.toString(),page_size:"10"});W&&H.append("search",W),V?(H.append("latitude",V.latitude.toString()),H.append("longitude",V.longitude.toString()),console.log("📍 Sending location to API:",V)):console.log("❌ No location available for API call");const[se,Q]=await Promise.all([fetch(`${rt}search/products/?${H}`,{headers:X}),fetch(`${rt}search/vendors/?${H}`,{headers:X})]),ie=await se.json(),he=await Q.json(),te=z(ie.results||[]),ge=O(he.results||[]),Se=[...new Set(((Z=ie.results)==null?void 0:Z.map(fe=>fe.category).filter(Boolean))||[])];P(Se),o($===1?{products:te,vendors:ge}:fe=>({products:[...fe.products,...te],vendors:[...fe.vendors,...ge]})),y({page:$,hasMore:ie.next!==null||he.next!==null})}catch(X){console.error("Fetch error:",X)}finally{m(!1)}},z=$=>{const W=xt.getLocation();let Z=$.map(X=>{var Q,ie;const V=((Q=X.images)==null?void 0:Q.find(he=>he.is_primary))||((ie=X.images)==null?void 0:ie[0]);let H="N/A",se=1/0;return W&&X.vendor_latitude&&X.vendor_longitude&&(se=pm(W.latitude,W.longitude,X.vendor_latitude,X.vendor_longitude),H=`${se.toFixed(1)} km`),{id:X.id,name:X.name,vendor:X.vendor_name||"Unknown Vendor",price:`₹${X.price}`,priceValue:parseFloat(X.price),image:(V==null?void 0:V.image_url)||"/placeholder-product.jpg",rating:4.5,distance:H,distanceValue:se,deliveryTime:"30-45 mins",inStock:X.quantity>0,category:X.category}});return C.length>0&&(Z=Z.filter(X=>C.includes(X.category))),_==="price_low"?Z.sort((X,V)=>X.priceValue-V.priceValue):_==="price_high"?Z.sort((X,V)=>V.priceValue-X.priceValue):Z.sort((X,V)=>X.distanceValue-V.distanceValue),Z},O=$=>{const W=xt.getLocation();return $.map(Z=>{var H;let X="N/A",V=1/0;return W&&Z.latitude&&Z.longitude&&(V=pm(W.latitude,W.longitude,Z.latitude,Z.longitude),X=`${V.toFixed(1)} km`),{id:Z.id,name:Z.business_name,image:((H=Z.user_info)==null?void 0:H.profile_picture)||"/placeholder-vendor.jpg",rating:4.5,distance:X,distanceValue:V,deliveryTime:"30-45 mins",categories:Z.categories||[]}}).sort((Z,X)=>Z.distanceValue-X.distanceValue)},F=()=>{!f&&p.hasMore&&A(p.page+1,r)},G=$=>{e(`/product/${$}`)},Y=$=>{e(`/vendor/${$.id}`)},K=async()=>{var W;const $=await Re.getToken();if($)try{const Z=await fetch(`${rt}favorites/`,{headers:{Authorization:`Token ${$}`,"ngrok-skip-browser-warning":"true"}});if(Z.ok){const X=await Z.json(),V=new Set(((W=X.results)==null?void 0:W.map(H=>H.product.id))||[]);w(V)}}catch(Z){console.error("Failed to fetch favorites:",Z)}},U=async($,W)=>{W.stopPropagation();const Z=await Re.getToken();if(!Z){E({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const X=await fetch(`${rt}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${Z}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:$})});if(X.ok){const V=await X.json(),H=new Set(v);V.is_favorite?H.add($):H.delete($),w(H),E({title:V.is_favorite?"Added to Favorites":"Removed from Favorites",description:V.message})}}catch{E({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},B=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6",children:a.products.map($=>n.jsxs(Ee,{className:"overflow-hidden",children:[n.jsxs("div",{className:"cursor-pointer",onClick:()=>G($.id),children:[n.jsxs("div",{className:"aspect-square md:aspect-[4/3] relative",children:[n.jsx("img",{src:$.image,alt:$.name,className:"w-full h-full object-cover",onError:W=>{W.target.src="/placeholder-product.jpg"}}),n.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:W=>U($.id,W),children:n.jsx(hr,{className:`h-4 w-4 ${v.has($.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),n.jsx(Ie,{variant:$.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:$.inStock?"In Stock":"Out of Stock"})]}),n.jsxs(Ae,{className:"p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:$.name}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:$.vendor}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:$.rating})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:$.distance})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-bold text-primary text-sm",children:$.price}),n.jsx("span",{className:"text-xs text-muted-foreground",children:$.deliveryTime})]})]})]}),n.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!$.inStock,onClick:W=>{W.stopPropagation(),k($.id,1)},children:[n.jsx(Is,{className:"h-3 w-3 mr-1"}),"Cart"]}),n.jsxs(ne,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!$.inStock,onClick:W=>{W.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:$.id,name:$.name,price:$.price.replace("₹",""),quantity:1,vendor_name:$.vendor,images:[{image_url:$.image}]}}})},children:[n.jsx(xn,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},$.id))}),p.hasMore&&n.jsx("div",{className:"text-center py-4",children:n.jsxs(ne,{onClick:F,disabled:f,variant:"outline",children:[f?n.jsx(Vn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]}),R=()=>n.jsx("div",{className:"space-y-3",children:a.vendors.map($=>n.jsx(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>Y($),children:n.jsx(Ae,{className:"p-4",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("img",{src:$.image,alt:$.name,className:"w-16 h-16 object-cover rounded-full",onError:W=>{W.target.src="/placeholder-vendor.jpg"}}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-base mb-1",children:$.name}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:$.rating})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:$.distance})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(or,{className:"h-3 w-3"}),n.jsx("span",{children:$.deliveryTime})]})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:$.categories.map((W,Z)=>n.jsx(Ie,{variant:"secondary",className:"text-xs",children:W},Z))})]})]})})},$.id))});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center gap-3 p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(ve,{placeholder:"Search products, vendors...",value:r,onChange:$=>i($.target.value),className:"pl-10 pr-4 py-2"})]}),n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>b(!0),children:n.jsx(ji,{className:"h-5 w-5"})})]})}),n.jsx("div",{className:"px-4 py-3 border-b border-border/50",children:n.jsx("div",{className:"flex gap-2",children:[{id:"all",label:"All"},{id:"products",label:"Products"},{id:"vendors",label:"Vendors"}].map($=>n.jsx(ne,{variant:c===$.id?"default":"ghost",size:"sm",onClick:()=>d($.id),className:"flex-1",children:$.label},$.id))})}),n.jsxs("div",{className:"p-4 pb-20",children:[r&&n.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:[c==="all"&&`Found ${a.products.length} products and ${a.vendors.length} vendors`,c==="products"&&`Found ${a.products.length} products`,c==="vendors"&&`Found ${a.vendors.length} vendors`,r&&" for ",n.jsxs("span",{className:"font-medium",children:['"',r,'"']})]}),(c==="all"||c==="products")&&a.products.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Products"}),B()]}),(c==="all"||c==="vendors")&&a.vendors.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Vendors"}),R()]}),r&&a.products.length===0&&a.vendors.length===0&&!f&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Lo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No results found"}),n.jsx("p",{className:"text-muted-foreground",children:"Try searching for products or vendors with different keywords"})]}),!r&&!f&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Lo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Search for anything"}),n.jsx("p",{className:"text-muted-foreground",children:"Find products, vendors, and more in your area"})]}),f&&a.products.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Vn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),x&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>b(!1),children:n.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:$=>$.stopPropagation(),children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>b(!1),children:"×"})]})}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),n.jsx("div",{className:"space-y-2",children:T.map($=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"sort",value:$.value,checked:_===$.value,onChange:W=>N(W.target.value),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:$.label})]},$.value))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-3",children:"Categories"}),n.jsx("div",{className:"space-y-2",children:M.map($=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:C.includes($),onChange:W=>{W.target.checked?I([...C,$]):I(C.filter(Z=>Z!==$))},className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:$})]},$))})]}),n.jsx(ne,{variant:"outline",className:"w-full",onClick:()=>{N(""),I([])},children:"Clear All Filters"})]})]})}),n.jsx(Ds,{})]})}const bS=bs.BASE_URL;class OW{async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Re.getToken()}`,"ngrok-skip-browser-warning":"true"}}async getFavorites(){try{const t=await fetch(`${bS}/favorites/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch favorites");const s=await t.json();return s.results||s}catch(t){throw console.error("Error fetching favorites:",t),t}}async toggleFavorite(t){try{const s=await fetch(`${bS}/favorites/toggle/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({product_id:t})});if(!s.ok)throw new Error("Failed to toggle favorite");return await s.json()}catch(s){throw console.error("Error toggling favorite:",s),s}}}const wS=new OW,RW=()=>{const e=st();Ni();const{addToCart:t}=mr(),{toast:s}=hn(),[r,i]=j.useState([]),[a,o]=j.useState(!0),[c,d]=j.useState([]),[f,m]=j.useState(xt.getLocation());j.useEffect(()=>(u(),xt.subscribe(m)),[]),j.useEffect(()=>{r.length>0&&p()},[r,f]);const h=(I,k,E,M)=>{const T=K=>K*(Math.PI/180),A=T(E-I),z=T(M-k),O=T(I),F=T(E),G=Math.sin(A/2)*Math.sin(A/2)+Math.cos(O)*Math.cos(F)*Math.sin(z/2)*Math.sin(z/2);return 6371*(2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G)))},u=async()=>{if(!await Re.getToken()){o(!1);return}try{const k=await wS.getFavorites();i(k)}catch(k){console.error("Error fetching favorites:",k),s({title:"Error",description:"Failed to load favorites",variant:"destructive"})}finally{o(!1)}},p=async()=>{try{const I=[...new Set(r.map(z=>z.product.category).filter(Boolean))];if(I.length===0)return;const k=await Re.getToken(),E=k?{Authorization:`Token ${k}`}:{},M=new URLSearchParams({page_size:"12"});f&&(M.append("latitude",f.latitude.toString()),M.append("longitude",f.longitude.toString()));const A=((await(await fetch(pp(`/search/products/?${M}`),{headers:E})).json()).results||[]).filter(z=>I.includes(z.category)).map(z=>{var Y,K;const O=((Y=z.images)==null?void 0:Y.find(U=>U.is_primary))||((K=z.images)==null?void 0:K[0]);let F="N/A",G=1/0;return f&&z.vendor_latitude&&z.vendor_longitude&&(G=h(f.latitude,f.longitude,z.vendor_latitude,z.vendor_longitude),F=`${G.toFixed(1)} km`),{id:z.id,name:z.name,vendor:z.vendor_name||"Unknown Vendor",price:z.price,image:(O==null?void 0:O.image_url)||"/placeholder-product.jpg",distance:F,distanceValue:G,inStock:z.quantity>0,category:z.category}}).sort((z,O)=>z.distanceValue-O.distanceValue).slice(0,8);d(A)}catch(I){console.error("Error fetching related products:",I)}},y=async I=>{try{await wS.toggleFavorite(I),i(k=>k.filter(E=>E.product.id!==I)),s({title:"Removed from Wishlist",description:"Item has been removed from your wishlist"})}catch{s({title:"Error",description:"Failed to remove from wishlist",variant:"destructive"})}},v=async(I,k)=>{k==null||k.stopPropagation();try{await t(I.product.id,1),s({title:"Added to Cart",description:`${I.product.name} has been added to your cart`})}catch{s({title:"Error",description:"Failed to add to cart",variant:"destructive"})}},w=async(I,k)=>{k==null||k.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:I.product.id,name:I.product.name,price:I.product.price,quantity:1,vendor_name:I.product.vendor_name,vendor_id:I.product.vendor_id,images:I.product.images}}})},x=I=>{e(`/product/${I}`)},[b,_]=j.useState(!1),[N,C]=j.useState(!0);return j.useEffect(()=>{(async()=>{const k=await Re.getToken();_(!!k),C(!1)})()},[]),N?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):b?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:n.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:n.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),n.jsx("div",{}),n.jsxs("span",{className:"bg-red-100 text-red-800 text-sm font-medium px-3 py-1 rounded-full",children:[r.length," items"]})]})}),n.jsxs("div",{className:"p-4 max-w-3xl mx-auto",children:[a?n.jsx("div",{className:"flex justify-center items-center py-16",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):r.length>0?n.jsx("div",{className:"space-y-4",children:r.map(I=>{var k,E;return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl border p-4 flex items-center transition-all duration-300 cursor-pointer hover:bg-gray-50",onClick:()=>x(I.product.id),children:[n.jsx("div",{className:"flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden bg-gray-100",children:n.jsx("img",{src:((E=(k=I.product.images)==null?void 0:k[0])==null?void 0:E.image_url)||"/placeholder-product.jpg",alt:I.product.name,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"ml-6 flex-1",children:[n.jsx("h3",{className:"font-semibold text-xl text-gray-900 truncate",children:I.product.name}),n.jsx("p",{className:"text-sm text-gray-500 truncate",children:I.product.vendor_name}),n.jsxs("p",{className:"font-bold text-2xl text-emerald-600 mt-1",children:["₹",parseFloat(I.product.price).toFixed(2)]}),n.jsx("div",{className:"flex items-center mt-2",children:I.product.quantity>0?n.jsx("span",{className:"text-green-600 text-sm font-medium bg-green-50 px-2 py-1 rounded-full",children:"In Stock"}):n.jsx("span",{className:"text-red-600 text-sm font-medium bg-red-50 px-2 py-1 rounded-full",children:"Out of Stock"})})]}),n.jsxs("div",{className:"flex flex-col justify-between items-end space-y-2",children:[n.jsx(ne,{variant:"ghost",size:"icon",onClick:M=>{M.stopPropagation(),y(I.product.id)},className:"text-gray-500 hover:text-red-600 hover:bg-red-100 rounded-full",children:n.jsx(Ua,{className:"h-4 w-4"})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{size:"sm",disabled:I.product.quantity<=0,onClick:M=>v(I,M),className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-full disabled:bg-gray-300 disabled:text-gray-500",children:n.jsx(Is,{className:"h-3 w-3 mr-1"})}),n.jsxs(ne,{size:"sm",disabled:I.product.quantity<=0,onClick:M=>w(I,M),className:"bg-orange-600 hover:bg-orange-700 text-white rounded-full disabled:bg-gray-300 disabled:text-gray-500",children:[n.jsx(DD,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]})]},I.id)})}):n.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-lg border",children:[n.jsx(hr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your wishlist is empty"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"Start adding items you love!"}),n.jsx(ne,{className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-full px-6 py-2",onClick:()=>e("/"),children:"Browse Products"})]}),c.length>0&&n.jsxs("div",{className:"mt-8",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Products Near You"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:c.map(I=>n.jsx(Ee,{className:"p-3 cursor-pointer hover:shadow-md transition-smooth",onClick:()=>e(`/product/${I.id}`),children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"aspect-square mb-2 bg-gray-100 rounded-lg overflow-hidden",children:n.jsx("img",{src:I.image,alt:I.name,className:"w-full h-full object-cover",onError:k=>{k.target.src="/placeholder-product.jpg"}})}),n.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:I.name}),n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:I.vendor}),n.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-500 mb-2",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:I.distance})]}),n.jsxs("p",{className:"font-semibold text-emerald-600 text-sm mb-2",children:["₹",I.price]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ne,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",disabled:!I.inStock,onClick:k=>{k.stopPropagation(),t(I.id,1)},children:n.jsx(Is,{className:"h-3 w-3"})}),n.jsxs(ne,{size:"sm",className:"flex-1 h-7 text-xs bg-green-600 hover:bg-green-700",disabled:!I.inStock,onClick:k=>{k.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:I.id,name:I.name,price:I.price,quantity:1,vendor_name:I.vendor,images:[{image_url:I.image}]}}})},children:[n.jsx(xn,{className:"h-3 w-3"}),"Buy"]})]})]})},I.id))})]})]}),n.jsx(Ds,{})]}):n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(hr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Please Login"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"You need to login to view your wishlist"}),n.jsx(ne,{onClick:()=>e("/login"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Login"})]})})};function YO(){var a,o,c;const{state:e,login:t}=Ni(),s=st();console.log("🎭 RoleSwitcher rendered, user:",e.user),console.log("🎭 Available roles:",(a=e.user)==null?void 0:a.available_roles),console.log("🎭 Current user_type:",(o=e.user)==null?void 0:o.user_type);const r=async d=>{var f;console.log("🔄 handleRoleSwitch called with role:",d);try{console.log("🔄 Attempting role switch to:",d),console.log("📋 Current user:",e.user),console.log("🔑 Current user_type:",(f=e.user)==null?void 0:f.user_type);const{response:m,data:h}=await Be("/switch-role/",{method:"POST",body:JSON.stringify({role:d})});if(console.log("📡 Switch role response:",m.status,h),m.ok){console.log("✅ Role switch successful");const u={...e.user,user_type:d};if(await t(u,""),d==="customer")console.log("🏠 Navigating to customer home"),s("/home");else{console.log("🏪 Navigating to vendor dashboard");try{const p=await Be("/vendor/status/");p.response.ok&&p.data.profile_exists&&p.data.is_approved?s("/vendor/dashboard"):s("/vendor/onboarding")}catch{s("/vendor/onboarding")}}}else console.error("❌ Role switch failed:",h)}catch(m){console.error("💥 Role switch error:",m)}};if(!((c=e.user)!=null&&c.available_roles)||e.user.available_roles.length<=1)return null;const i=e.user.available_roles.find(d=>d!==e.user.user_type);return n.jsxs("button",{onClick:()=>r(i),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:["Switch to ",i==="customer"?"Customer":"Vendor"]})}const LW=[{icon:jP,label:"My Orders",path:"/orders"},{icon:hr,label:"Wishlist",path:"/wishlist"},{icon:Lr,label:"Personal Information",path:"/profile-edit"},{icon:yi,label:"Privacy & Security",path:"/privacy"}],MW=()=>{const e=st(),{logout:t,state:s,login:r}=Ni(),{navigateWithAuth:i}=Bc(),[a,o]=j.useState(null),[c,d]=j.useState(!0),[f,m]=j.useState("");j.useEffect(()=>{h()},[]);const h=async()=>{try{const y=await Re.getToken();if(!y){i("/profile");return}const v=await fetch(rt+"profile/",{headers:{Authorization:`Token ${y}`,"ngrok-skip-browser-warning":"true"}});if(!v.ok)throw new Error("Failed to fetch profile");const w=await v.json();if(s.user){const x={...s.user,available_roles:w.available_roles||s.user.available_roles,user_type:w.user_type||s.user.user_type};await r(x,"")}o({email:w.email,avatar:w.profile_picture?w.profile_picture.startsWith("http")?w.profile_picture:`${rt}media/${w.profile_picture}`:"/placeholder-avatar.jpg"})}catch(y){m(y.message),console.error("Error fetching profile:",y)}finally{d(!1)}},u=async()=>{try{const y=await Re.getToken();y&&await fetch(rt+"logout/",{method:"POST",headers:{Authorization:`Token ${y}`,"ngrok-skip-browser-warning":"true"}})}catch(y){console.error("Logout error:",y)}finally{await t(),e("/login")}},p=async y=>{if(y)try{const v=await Re.getToken();if(!v)return;const w=new FormData;w.append("profile_picture",y);const x=await fetch(rt+"profile/upload-picture/",{method:"POST",headers:{Authorization:`Token ${v}`,"ngrok-skip-browser-warning":"true"},body:w});if(x.ok){const b=await x.json();o(_=>({..._,avatar:b.profile_picture}))}}catch(v){console.error("Profile image upload error:",v)}};return c?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):f||!a?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:f||"Failed to load profile"}),n.jsx(ne,{onClick:()=>e("/login"),children:"Go to Login"})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white shadow-sm border-b",children:n.jsxs("div",{className:"flex flex-col items-center pt-6 pb-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden mb-3 cursor-pointer hover:bg-gray-300 transition-colors",onClick:()=>{const y=document.createElement("input");y.type="file",y.accept="image/*",y.onchange=v=>{var x;const w=(x=v.target.files)==null?void 0:x[0];w&&p(w)},y.click()},children:a.avatar&&a.avatar!=="/placeholder-avatar.jpg"?n.jsx("img",{src:a.avatar,alt:"Profile",className:"w-full h-full object-cover"}):n.jsx("span",{className:"text-gray-600 font-semibold text-lg",children:a.email?a.email.charAt(0).toUpperCase():"U"})}),n.jsx(ne,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const y=document.createElement("input");y.type="file",y.accept="image/*",y.onchange=v=>{var x;const w=(x=v.target.files)==null?void 0:x[0];w&&p(w)},y.click()},children:n.jsx(Zi,{className:"h-3 w-3"})})]}),n.jsx("p",{className:"text-gray-800 text-base font-medium",children:a.email}),n.jsx("div",{className:"mt-3",children:n.jsx(YO,{})})]})}),n.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[n.jsxs(Ee,{children:[n.jsx(jt,{className:"pb-3",children:n.jsx(_t,{className:"text-base",children:"Account"})}),n.jsx(Ae,{className:"space-y-1",children:LW.map((y,v)=>{const w=y.icon;return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>i(y.path),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:n.jsx(w,{className:"h-4 w-4 text-primary"})}),n.jsx("span",{className:"font-medium text-sm",children:y.label})]}),n.jsx("div",{className:"text-gray-400",children:"›"})]},v)})})]}),n.jsxs(ne,{variant:"outline",className:"w-full flex items-center justify-center py-6 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:u,children:[n.jsx(sb,{className:"h-5 w-5 mr-2"}),n.jsx("span",{className:"font-medium text-base",children:"Logout"})]})]}),n.jsx(Ds,{})]})};var IW="Label",XO=j.forwardRef((e,t)=>n.jsx(Ye.label,{...e,ref:t,onMouseDown:s=>{var i;s.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));XO.displayName=IW;var QO=XO;const DW=Ku("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ue=j.forwardRef(({className:e,...t},s)=>n.jsx(QO,{ref:s,className:We(DW(),e),...t}));ue.displayName=QO.displayName;const Yn=j.forwardRef(({className:e,...t},s)=>n.jsx("textarea",{className:We("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));Yn.displayName="Textarea";const FW=()=>{const e=st(),{toast:t}=hn(),[s,r]=j.useState(!1),[i,a]=j.useState(!0),[o,c]=j.useState(!1),[d,f]=j.useState({username:"",email:"",phone_number:"",address:"",date_of_birth:"",profile_picture:null});j.useEffect(()=>{m()},[]);const m=async()=>{try{const y=await Re.getToken();if(!y){e("/login");return}const v=await fetch(rt+"profile/",{headers:{Authorization:`Token ${y}`,"ngrok-skip-browser-warning":"true"}});if(!v.ok)throw new Error("Failed to fetch profile");const w=await v.json();f({username:w.username||"",email:w.email||"",phone_number:w.phone_number||"",address:w.address||"",date_of_birth:w.date_of_birth||"",profile_picture:w.profile_picture?w.profile_picture.startsWith("http")?w.profile_picture:`${rt}media/${w.profile_picture}`:null})}catch(y){console.error("Error fetching profile:",y),t({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{a(!1)}},h=async()=>{c(!0);try{const y=await Re.getToken();if(!y)return;if((await fetch(rt+"profile/update/",{method:"PUT",headers:{Authorization:`Token ${y}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({username:d.username,phone_number:d.phone_number,address:d.address,date_of_birth:d.date_of_birth||null})})).ok)r(!1),t({title:"Success",description:"Profile updated successfully!"});else throw new Error("Failed to update profile")}catch(y){console.error("Error saving profile:",y),t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}finally{c(!1)}},u=async y=>{if(y)try{const v=await Re.getToken();if(!v)return;const w=new FormData;w.append("profile_picture",y);const x=await fetch(rt+"profile/upload-picture/",{method:"POST",headers:{Authorization:`Token ${v}`,"ngrok-skip-browser-warning":"true"},body:w});if(x.ok){const b=await x.json();f(_=>({..._,profile_picture:b.profile_picture})),t({title:"Success",description:"Profile picture updated successfully!"})}else throw new Error("Failed to upload image")}catch(v){console.error("Profile image upload error:",v),t({title:"Error",description:"Failed to upload profile picture",variant:"destructive"})}},p=(y,v)=>{f(w=>({...w,[y]:v}))};return i?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-100 sticky top-0 z-30",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/profile"),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"text-lg font-semibold",children:"Personal Information"})]}),n.jsx(ne,{onClick:()=>s?h():r(!0),size:"sm",className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:s?n.jsxs(n.Fragment,{children:[n.jsx(Mc,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save"]}):n.jsxs(n.Fragment,{children:[n.jsx(Xu,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),n.jsx("div",{className:"p-4 pb-20",children:n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsxs(_t,{className:"flex items-center gap-2",children:[n.jsx(Lr,{className:"h-5 w-5"}),"Profile Information"]})}),n.jsxs(Ae,{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden ${s?"cursor-pointer hover:bg-gray-200":""}`,onClick:s?()=>{const y=document.createElement("input");y.type="file",y.accept="image/*",y.onchange=v=>{var x;const w=(x=v.target.files)==null?void 0:x[0];w&&u(w)},y.click()}:void 0,children:d.profile_picture?n.jsx("img",{src:d.profile_picture,alt:"Profile",className:"w-full h-full object-cover"}):n.jsx("span",{className:"text-gray-600 font-semibold text-2xl",children:d.username?d.username.charAt(0).toUpperCase():"U"})}),s&&n.jsx(ne,{size:"sm",className:"absolute -bottom-1 -right-1 w-8 h-8 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const y=document.createElement("input");y.type="file",y.accept="image/*",y.onchange=v=>{var x;const w=(x=v.target.files)==null?void 0:x[0];w&&u(w)},y.click()},children:n.jsx(Zi,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:s?"Click to change profile picture":"Profile Picture"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"username",children:"Username"}),n.jsx(ve,{id:"username",value:d.username,onChange:y=>p("username",y.target.value),disabled:!s,className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"email",children:"Email"}),n.jsx(ve,{id:"email",type:"email",value:d.email,disabled:!0,className:"mt-1 bg-gray-50"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"phone",children:"Phone Number"}),n.jsx(ve,{id:"phone",value:d.phone_number,onChange:y=>p("phone_number",y.target.value),disabled:!s,className:"mt-1",placeholder:"Enter your phone number"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"address",children:"Address"}),n.jsx(Yn,{id:"address",value:d.address,onChange:y=>p("address",y.target.value),disabled:!s,className:"mt-1",placeholder:"Enter your address",rows:3})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"dob",children:"Date of Birth"}),n.jsx(ve,{id:"dob",type:"date",value:d.date_of_birth||"",onChange:y=>p("date_of_birth",y.target.value||null),disabled:!s,className:"mt-1"})]})]})]})]})}),n.jsx(Ds,{})]})},$W=()=>{const e=st(),{toast:t}=hn(),[s,r]=j.useState(!0),[i,a]=j.useState(""),[o,c]=j.useState(!1),[d,f]=j.useState(""),[m,h]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const y=await Re.getToken();if(!y){e("/login");return}const v=await fetch(rt+"profile/",{headers:{Authorization:`Token ${y}`,"ngrok-skip-browser-warning":"true"}});if(!v.ok)throw new Error("Failed to fetch profile");const w=await v.json(),x=(w==null?void 0:w.plain_password)||"";a(x)}catch(y){console.error(y)}})()},[]);const u=async()=>{if(!d){t({title:"Error",description:"New password is required",variant:"destructive"});return}h(!0);try{const p=await Re.getToken();if(!p){t({title:"Error",description:"You are not authenticated. Please log in.",variant:"destructive"}),e("/login");return}const y=await fetch(rt+"change-password/simple/",{method:"POST",headers:{Authorization:`Token ${p}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({new_password:d})});if(!y.ok){const w=await y.json();throw new Error(w.error||"Failed to change password")}const v=await y.json();await Re.setAuth(v.token,await Re.getUser()),t({title:"Success",description:"Password changed successfully"}),a(d),f(""),c(!1)}catch(p){t({title:"Error",description:p instanceof Error?p.message:"Failed to change password",variant:"destructive"})}finally{h(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center gap-3 p-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"Privacy & Security"})]})}),n.jsx("div",{className:"p-4 space-y-6 pb-20",children:n.jsxs("div",{className:"bg-white rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(yi,{className:"h-5 w-5 text-blue-600"}),n.jsx("h2",{className:"font-semibold",children:"Password"})]}),o?n.jsxs("div",{className:"space-y-4",children:[n.jsx(ue,{children:"New Password"}),n.jsx(ve,{type:"text",value:d,onChange:p=>f(p.target.value),placeholder:"Enter new password"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{onClick:u,disabled:m,children:m?"Saving...":"Save"}),n.jsx(ne,{variant:"outline",onClick:()=>{c(!1),f("")},disabled:m,children:"Cancel"})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(ue,{children:"Your Password"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(ve,{type:s?"text":"password",value:i,disabled:!0,className:"bg-gray-100"}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>r(!s),children:s?n.jsx(tb,{className:"h-4 w-4"}):n.jsx(Nn,{className:"h-4 w-4"})})]}),n.jsx(ne,{onClick:()=>c(!0),disabled:m,children:"Change Password"})]})]})}),n.jsx(Ds,{})]})};function zW(){const e=st(),[t,s]=j.useState(1),[r,i]=j.useState(""),[a,o]=j.useState(""),[c,d]=j.useState(""),[f,m]=j.useState(""),[h,u]=j.useState(""),[p,y]=j.useState(""),[v,w]=j.useState(!1),[x,b]=j.useState(!1),[_,N]=j.useState(""),C=async()=>{var P,T,A;if(f!==h){N("Passwords do not match");return}b(!0),N("");try{const z=await fetch(rt+"register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,email:c,password:f,user_type:"customer",phone_number:a})}),O=await z.json();if(!z.ok){const F=((P=O.username)==null?void 0:P[0])||((T=O.email)==null?void 0:T[0])||O.message||((A=Object.values(O)[0])==null?void 0:A[0])||"Registration failed";throw new Error(F)}s(2)}catch(z){N(z.message)}finally{b(!1)}},I=P=>{y(P),P.length===6&&k(P)},k=async P=>{b(!0),N("");try{const T=await fetch(rt+"verify-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,otp:P})}),A=await T.json();if(!T.ok)throw new Error(A.error||"Verification failed");localStorage.setItem("token",A.token),e("/home")}catch(T){N(T.message)}finally{b(!1)}},E=async()=>{b(!0),N("");try{const P=await fetch(rt+"send-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c})}),T=await P.json();if(!P.ok)throw new Error(T.error||"Failed to resend OTP");N("OTP resent successfully")}catch(P){N(P.message)}finally{b(!1)}},M=()=>{e("/login")};return n.jsx("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"w-full max-w-80 mx-auto px-4",children:[t===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:Wa,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customer Signup"})]}),n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:r,onChange:P=>i(P.target.value),placeholder:"Full Name",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsx(ve,{type:"tel",value:a,onChange:P=>o(P.target.value),placeholder:"Phone Number",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsx(ve,{type:"email",value:c,onChange:P=>d(P.target.value),placeholder:"Email Address",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:v?"text":"password",value:f,onChange:P=>m(P.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),n.jsx("button",{type:"button",onClick:()=>w(!v),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):n.jsxs(n.Fragment,{children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),n.jsx(ve,{type:"password",value:h,onChange:P=>u(P.target.value),placeholder:"Confirm Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),_&&n.jsx("p",{className:"text-red-600 text-center",children:_}),n.jsx(ne,{onClick:C,disabled:!r||!a||!c||!f||!h||f!==h||x,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:x?"Creating Account...":"Sign Up"})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:M,className:"text-blue-600 hover:text-blue-700 text-sm",children:"Already have an account? Login"})})]}),t===2&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:Wa,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Email"}),n.jsxs("p",{className:"text-gray-600 mt-2",children:["Code sent to ",c]})]}),n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:p,onChange:P=>I(P.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest w-80"}),x&&n.jsx("div",{className:"text-center text-blue-600",children:"Verifying..."}),_&&n.jsx("p",{className:"text-red-600 text-center",children:_}),n.jsx("button",{onClick:()=>s(1),className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Change details"}),n.jsx("button",{onClick:E,disabled:x,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend code"})]})]})]})})})}function BW(){const e=st(),[t,s]=j.useState(""),r=o=>{o.preventDefault(),e("/login")},i=()=>{e("/login")},a=()=>{console.log("Resend link clicked")};return n.jsx("div",{className:"min-h-screen flex items-end justify-center bg-cover bg-center bg-no-repeat p-4 pb-12",style:{backgroundImage:"url(/images/forgot.png)"},children:n.jsxs("div",{className:"w-full max-w-sm bg-white rounded-lg shadow-lg p-4",style:{backgroundColor:"#856043"},children:[n.jsx("h2",{className:"text-xl font-bold text-white text-center mb-5",children:"Forgot Password"}),n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"email",className:"text-white font-medium",children:"Email or Phone Number"}),n.jsx(ve,{id:"email",type:"text",value:t,onChange:o=>s(o.target.value),placeholder:"Enter your email or phone",className:"mt-1 w-full rounded-md border-gray-300 focus:border-white focus:ring-white text-gray-900"})]}),n.jsx(ne,{onClick:r,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Submit"}),n.jsx(ne,{onClick:a,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Resend Link"}),n.jsx(ne,{onClick:i,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Back to Login"})]})]})})}var jw="Radio",[VW,JO]=ls(jw),[UW,qW]=VW(jw),eR=j.forwardRef((e,t)=>{const{__scopeRadio:s,name:r,checked:i=!1,required:a,disabled:o,value:c="on",onCheck:d,form:f,...m}=e,[h,u]=j.useState(null),p=ft(t,w=>u(w)),y=j.useRef(!1),v=h?f||!!h.closest("form"):!0;return n.jsxs(UW,{scope:s,checked:i,disabled:o,children:[n.jsx(Ye.button,{type:"button",role:"radio","aria-checked":i,"data-state":rR(i),"data-disabled":o?"":void 0,disabled:o,value:c,...m,ref:p,onClick:Me(e.onClick,w=>{i||d==null||d(),v&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),v&&n.jsx(sR,{control:h,bubbles:!y.current,name:r,value:c,checked:i,required:a,disabled:o,form:f,style:{transform:"translateX(-100%)"}})]})});eR.displayName=jw;var tR="RadioIndicator",nR=j.forwardRef((e,t)=>{const{__scopeRadio:s,forceMount:r,...i}=e,a=qW(tR,s);return n.jsx(Qn,{present:r||a.checked,children:n.jsx(Ye.span,{"data-state":rR(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});nR.displayName=tR;var HW="RadioBubbleInput",sR=j.forwardRef(({__scopeRadio:e,control:t,checked:s,bubbles:r=!0,...i},a)=>{const o=j.useRef(null),c=ft(o,a),d=Cp(s),f=ip(t);return j.useEffect(()=>{const m=o.current;if(!m)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(d!==s&&p){const y=new Event("click",{bubbles:r});p.call(m,s),m.dispatchEvent(y)}},[d,s,r]),n.jsx(Ye.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:c,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});sR.displayName=HW;function rR(e){return e?"checked":"unchecked"}var WW=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ep="RadioGroup",[ZW,Tse]=ls(Ep,[Uc,JO]),iR=Uc(),aR=JO(),[GW,KW]=ZW(Ep),oR=j.forwardRef((e,t)=>{const{__scopeRadioGroup:s,name:r,defaultValue:i,value:a,required:o=!1,disabled:c=!1,orientation:d,dir:f,loop:m=!0,onValueChange:h,...u}=e,p=iR(s),y=Vc(f),[v,w]=zr({prop:a,defaultProp:i??null,onChange:h,caller:Ep});return n.jsx(GW,{scope:s,name:r,required:o,disabled:c,value:v,onValueChange:w,children:n.jsx(Eb,{asChild:!0,...p,orientation:d,dir:y,loop:m,children:n.jsx(Ye.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":c?"":void 0,dir:y,...u,ref:t})})})});oR.displayName=Ep;var lR="RadioGroupItem",cR=j.forwardRef((e,t)=>{const{__scopeRadioGroup:s,disabled:r,...i}=e,a=KW(lR,s),o=a.disabled||r,c=iR(s),d=aR(s),f=j.useRef(null),m=ft(t,f),h=a.value===i.value,u=j.useRef(!1);return j.useEffect(()=>{const p=v=>{WW.includes(v.key)&&(u.current=!0)},y=()=>u.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",y)}},[]),n.jsx(Tb,{asChild:!0,...c,focusable:!o,active:h,children:n.jsx(eR,{disabled:o,required:a.required,checked:h,...d,...i,name:a.name,ref:m,onCheck:()=>a.onValueChange(i.value),onKeyDown:Me(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Me(i.onFocus,()=>{var p;u.current&&((p=f.current)==null||p.click())})})})});cR.displayName=lR;var YW="RadioGroupIndicator",dR=j.forwardRef((e,t)=>{const{__scopeRadioGroup:s,...r}=e,i=aR(s);return n.jsx(nR,{...i,...r,ref:t})});dR.displayName=YW;var uR=oR,hR=cR,XW=dR;const fR=j.forwardRef(({className:e,...t},s)=>n.jsx(uR,{className:We("grid gap-2",e),...t,ref:s}));fR.displayName=uR.displayName;const xy=j.forwardRef(({className:e,...t},s)=>n.jsx(hR,{ref:s,className:We("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(XW,{className:"flex items-center justify-center",children:n.jsx(xP,{className:"h-2.5 w-2.5 fill-current text-current"})})}));xy.displayName=hR.displayName;var QW="Separator",jS="horizontal",JW=["horizontal","vertical"],mR=j.forwardRef((e,t)=>{const{decorative:s,orientation:r=jS,...i}=e,a=eZ(r)?r:jS,c=s?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return n.jsx(Ye.div,{"data-orientation":a,...c,...i,ref:t})});mR.displayName=QW;function eZ(e){return JW.includes(e)}var pR=mR;const pi=j.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...r},i)=>n.jsx(pR,{ref:i,decorative:s,orientation:t,className:We("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));pi.displayName=pR.displayName;function tZ(e,t){const s=j.useRef(t);j.useEffect(function(){t!==s.current&&e.attributionControl!=null&&(s.current!=null&&e.attributionControl.removeAttribution(s.current),t!=null&&e.attributionControl.addAttribution(t)),s.current=t},[e,t])}function nZ(e,t,s){t.center!==s.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==s.radius&&e.setRadius(t.radius)}const sZ=1;function rZ(e){return Object.freeze({__version:sZ,map:e})}function gR(e,t){return Object.freeze({...e,...t})}const vR=j.createContext(null),xR=vR.Provider;function _w(){const e=j.useContext(vR);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function yR(e){function t(s,r){const{instance:i,context:a}=e(s).current;return j.useImperativeHandle(r,()=>i),s.children==null?null:_e.createElement(xR,{value:a},s.children)}return j.forwardRef(t)}function iZ(e){function t(s,r){const{instance:i}=e(s).current;return j.useImperativeHandle(r,()=>i),null}return j.forwardRef(t)}function bR(e,t){const s=j.useRef();j.useEffect(function(){return t!=null&&e.instance.on(t),s.current=t,function(){s.current!=null&&e.instance.off(s.current),s.current=null}},[e,t])}function Nw(e,t){const s=e.pane??t.pane;return s?{...e,pane:s}:e}var yy={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(s,r){r(t)})(vi,function(s){var r="1.9.4";function i(l){var g,S,D,q;for(S=1,D=arguments.length;S<D;S++){q=arguments[S];for(g in q)l[g]=q[g]}return l}var a=Object.create||function(){function l(){}return function(g){return l.prototype=g,new l}}();function o(l,g){var S=Array.prototype.slice;if(l.bind)return l.bind.apply(l,S.call(arguments,1));var D=S.call(arguments,2);return function(){return l.apply(g,D.length?D.concat(S.call(arguments)):arguments)}}var c=0;function d(l){return"_leaflet_id"in l||(l._leaflet_id=++c),l._leaflet_id}function f(l,g,S){var D,q,J,ce;return ce=function(){D=!1,q&&(J.apply(S,q),q=!1)},J=function(){D?q=arguments:(l.apply(S,arguments),setTimeout(ce,g),D=!0)},J}function m(l,g,S){var D=g[1],q=g[0],J=D-q;return l===D&&S?l:((l-q)%J+J)%J+q}function h(){return!1}function u(l,g){if(g===!1)return l;var S=Math.pow(10,g===void 0?6:g);return Math.round(l*S)/S}function p(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function y(l){return p(l).split(/\s+/)}function v(l,g){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var S in g)l.options[S]=g[S];return l.options}function w(l,g,S){var D=[];for(var q in l)D.push(encodeURIComponent(S?q.toUpperCase():q)+"="+encodeURIComponent(l[q]));return(!g||g.indexOf("?")===-1?"?":"&")+D.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function b(l,g){return l.replace(x,function(S,D){var q=g[D];if(q===void 0)throw new Error("No value provided for variable "+S);return typeof q=="function"&&(q=q(g)),q})}var _=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function N(l,g){for(var S=0;S<l.length;S++)if(l[S]===g)return S;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function I(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var k=0;function E(l){var g=+new Date,S=Math.max(0,16-(g-k));return k=g+S,window.setTimeout(l,S)}var M=window.requestAnimationFrame||I("RequestAnimationFrame")||E,P=window.cancelAnimationFrame||I("CancelAnimationFrame")||I("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function T(l,g,S){if(S&&M===E)l.call(g);else return M.call(window,o(l,g))}function A(l){l&&P.call(window,l)}var z={__proto__:null,extend:i,create:a,bind:o,get lastId(){return c},stamp:d,throttle:f,wrapNum:m,falseFn:h,formatNum:u,trim:p,splitWords:y,setOptions:v,getParamString:w,template:b,isArray:_,indexOf:N,emptyImageUrl:C,requestFn:M,cancelFn:P,requestAnimFrame:T,cancelAnimFrame:A};function O(){}O.extend=function(l){var g=function(){v(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=g.__super__=this.prototype,D=a(S);D.constructor=g,g.prototype=D;for(var q in this)Object.prototype.hasOwnProperty.call(this,q)&&q!=="prototype"&&q!=="__super__"&&(g[q]=this[q]);return l.statics&&i(g,l.statics),l.includes&&(F(l.includes),i.apply(null,[D].concat(l.includes))),i(D,l),delete D.statics,delete D.includes,D.options&&(D.options=S.options?a(S.options):{},i(D.options,l.options)),D._initHooks=[],D.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var J=0,ce=D._initHooks.length;J<ce;J++)D._initHooks[J].call(this)}},g},O.include=function(l){var g=this.prototype.options;return i(this.prototype,l),l.options&&(this.prototype.options=g,this.mergeOptions(l.options)),this},O.mergeOptions=function(l){return i(this.prototype.options,l),this},O.addInitHook=function(l){var g=Array.prototype.slice.call(arguments,1),S=typeof l=="function"?l:function(){this[l].apply(this,g)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function F(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=_(l)?l:[l];for(var g=0;g<l.length;g++)l[g]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(l,g,S){if(typeof l=="object")for(var D in l)this._on(D,l[D],g);else{l=y(l);for(var q=0,J=l.length;q<J;q++)this._on(l[q],g,S)}return this},off:function(l,g,S){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var D in l)this._off(D,l[D],g);else{l=y(l);for(var q=arguments.length===1,J=0,ce=l.length;J<ce;J++)q?this._off(l[J]):this._off(l[J],g,S)}return this},_on:function(l,g,S,D){if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}if(this._listens(l,g,S)===!1){S===this&&(S=void 0);var q={fn:g,ctx:S};D&&(q.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(q)}},_off:function(l,g,S){var D,q,J;if(this._events&&(D=this._events[l],!!D)){if(arguments.length===1){if(this._firingCount)for(q=0,J=D.length;q<J;q++)D[q].fn=h;delete this._events[l];return}if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}var ce=this._listens(l,g,S);if(ce!==!1){var pe=D[ce];this._firingCount&&(pe.fn=h,this._events[l]=D=D.slice()),D.splice(ce,1)}}},fire:function(l,g,S){if(!this.listens(l,S))return this;var D=i({},g,{type:l,target:this,sourceTarget:g&&g.sourceTarget||this});if(this._events){var q=this._events[l];if(q){this._firingCount=this._firingCount+1||1;for(var J=0,ce=q.length;J<ce;J++){var pe=q[J],ye=pe.fn;pe.once&&this.off(l,ye,pe.ctx),ye.call(pe.ctx||this,D)}this._firingCount--}}return S&&this._propagateEvent(D),this},listens:function(l,g,S,D){typeof l!="string"&&console.warn('"string" type argument expected');var q=g;typeof g!="function"&&(D=!!g,q=void 0,S=void 0);var J=this._events&&this._events[l];if(J&&J.length&&this._listens(l,q,S)!==!1)return!0;if(D){for(var ce in this._eventParents)if(this._eventParents[ce].listens(l,g,S,D))return!0}return!1},_listens:function(l,g,S){if(!this._events)return!1;var D=this._events[l]||[];if(!g)return!!D.length;S===this&&(S=void 0);for(var q=0,J=D.length;q<J;q++)if(D[q].fn===g&&D[q].ctx===S)return q;return!1},once:function(l,g,S){if(typeof l=="object")for(var D in l)this._on(D,l[D],g,!0);else{l=y(l);for(var q=0,J=l.length;q<J;q++)this._on(l[q],g,S,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[d(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[d(l)],this},_propagateEvent:function(l){for(var g in this._eventParents)this._eventParents[g].fire(l.type,i({layer:l.target,propagatedFrom:l.target},l),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var Y=O.extend(G);function K(l,g,S){this.x=S?Math.round(l):l,this.y=S?Math.round(g):g}var U=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(l){return this.clone()._add(B(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(B(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new K(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new K(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=U(this.x),this.y=U(this.y),this},distanceTo:function(l){l=B(l);var g=l.x-this.x,S=l.y-this.y;return Math.sqrt(g*g+S*S)},equals:function(l){return l=B(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=B(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}};function B(l,g,S){return l instanceof K?l:_(l)?new K(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new K(l.x,l.y):new K(l,g,S)}function R(l,g){if(l)for(var S=g?[l,g]:l,D=0,q=S.length;D<q;D++)this.extend(S[D])}R.prototype={extend:function(l){var g,S;if(!l)return this;if(l instanceof K||typeof l[0]=="number"||"x"in l)g=S=B(l);else if(l=$(l),g=l.min,S=l.max,!g||!S)return this;return!this.min&&!this.max?(this.min=g.clone(),this.max=S.clone()):(this.min.x=Math.min(g.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(g.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(l){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var g,S;return typeof l[0]=="number"||l instanceof K?l=B(l):l=$(l),l instanceof R?(g=l.min,S=l.max):g=S=l,g.x>=this.min.x&&S.x<=this.max.x&&g.y>=this.min.y&&S.y<=this.max.y},intersects:function(l){l=$(l);var g=this.min,S=this.max,D=l.min,q=l.max,J=q.x>=g.x&&D.x<=S.x,ce=q.y>=g.y&&D.y<=S.y;return J&&ce},overlaps:function(l){l=$(l);var g=this.min,S=this.max,D=l.min,q=l.max,J=q.x>g.x&&D.x<S.x,ce=q.y>g.y&&D.y<S.y;return J&&ce},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var g=this.min,S=this.max,D=Math.abs(g.x-S.x)*l,q=Math.abs(g.y-S.y)*l;return $(B(g.x-D,g.y-q),B(S.x+D,S.y+q))},equals:function(l){return l?(l=$(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function $(l,g){return!l||l instanceof R?l:new R(l,g)}function W(l,g){if(l)for(var S=g?[l,g]:l,D=0,q=S.length;D<q;D++)this.extend(S[D])}W.prototype={extend:function(l){var g=this._southWest,S=this._northEast,D,q;if(l instanceof X)D=l,q=l;else if(l instanceof W){if(D=l._southWest,q=l._northEast,!D||!q)return this}else return l?this.extend(V(l)||Z(l)):this;return!g&&!S?(this._southWest=new X(D.lat,D.lng),this._northEast=new X(q.lat,q.lng)):(g.lat=Math.min(D.lat,g.lat),g.lng=Math.min(D.lng,g.lng),S.lat=Math.max(q.lat,S.lat),S.lng=Math.max(q.lng,S.lng)),this},pad:function(l){var g=this._southWest,S=this._northEast,D=Math.abs(g.lat-S.lat)*l,q=Math.abs(g.lng-S.lng)*l;return new W(new X(g.lat-D,g.lng-q),new X(S.lat+D,S.lng+q))},getCenter:function(){return new X((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new X(this.getNorth(),this.getWest())},getSouthEast:function(){return new X(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof X||"lat"in l?l=V(l):l=Z(l);var g=this._southWest,S=this._northEast,D,q;return l instanceof W?(D=l.getSouthWest(),q=l.getNorthEast()):D=q=l,D.lat>=g.lat&&q.lat<=S.lat&&D.lng>=g.lng&&q.lng<=S.lng},intersects:function(l){l=Z(l);var g=this._southWest,S=this._northEast,D=l.getSouthWest(),q=l.getNorthEast(),J=q.lat>=g.lat&&D.lat<=S.lat,ce=q.lng>=g.lng&&D.lng<=S.lng;return J&&ce},overlaps:function(l){l=Z(l);var g=this._southWest,S=this._northEast,D=l.getSouthWest(),q=l.getNorthEast(),J=q.lat>g.lat&&D.lat<S.lat,ce=q.lng>g.lng&&D.lng<S.lng;return J&&ce},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,g){return l?(l=Z(l),this._southWest.equals(l.getSouthWest(),g)&&this._northEast.equals(l.getNorthEast(),g)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Z(l,g){return l instanceof W?l:new W(l,g)}function X(l,g,S){if(isNaN(l)||isNaN(g))throw new Error("Invalid LatLng object: ("+l+", "+g+")");this.lat=+l,this.lng=+g,S!==void 0&&(this.alt=+S)}X.prototype={equals:function(l,g){if(!l)return!1;l=V(l);var S=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return S<=(g===void 0?1e-9:g)},toString:function(l){return"LatLng("+u(this.lat,l)+", "+u(this.lng,l)+")"},distanceTo:function(l){return se.distance(this,V(l))},wrap:function(){return se.wrapLatLng(this)},toBounds:function(l){var g=180*l/40075017,S=g/Math.cos(Math.PI/180*this.lat);return Z([this.lat-g,this.lng-S],[this.lat+g,this.lng+S])},clone:function(){return new X(this.lat,this.lng,this.alt)}};function V(l,g,S){return l instanceof X?l:_(l)&&typeof l[0]!="object"?l.length===3?new X(l[0],l[1],l[2]):l.length===2?new X(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new X(l.lat,"lng"in l?l.lng:l.lon,l.alt):g===void 0?null:new X(l,g,S)}var H={latLngToPoint:function(l,g){var S=this.projection.project(l),D=this.scale(g);return this.transformation._transform(S,D)},pointToLatLng:function(l,g){var S=this.scale(g),D=this.transformation.untransform(l,S);return this.projection.unproject(D)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var g=this.projection.bounds,S=this.scale(l),D=this.transformation.transform(g.min,S),q=this.transformation.transform(g.max,S);return new R(D,q)},infinite:!1,wrapLatLng:function(l){var g=this.wrapLng?m(l.lng,this.wrapLng,!0):l.lng,S=this.wrapLat?m(l.lat,this.wrapLat,!0):l.lat,D=l.alt;return new X(S,g,D)},wrapLatLngBounds:function(l){var g=l.getCenter(),S=this.wrapLatLng(g),D=g.lat-S.lat,q=g.lng-S.lng;if(D===0&&q===0)return l;var J=l.getSouthWest(),ce=l.getNorthEast(),pe=new X(J.lat-D,J.lng-q),ye=new X(ce.lat-D,ce.lng-q);return new W(pe,ye)}},se=i({},H,{wrapLng:[-180,180],R:6371e3,distance:function(l,g){var S=Math.PI/180,D=l.lat*S,q=g.lat*S,J=Math.sin((g.lat-l.lat)*S/2),ce=Math.sin((g.lng-l.lng)*S/2),pe=J*J+Math.cos(D)*Math.cos(q)*ce*ce,ye=2*Math.atan2(Math.sqrt(pe),Math.sqrt(1-pe));return this.R*ye}}),Q=6378137,ie={R:Q,MAX_LATITUDE:85.0511287798,project:function(l){var g=Math.PI/180,S=this.MAX_LATITUDE,D=Math.max(Math.min(S,l.lat),-S),q=Math.sin(D*g);return new K(this.R*l.lng*g,this.R*Math.log((1+q)/(1-q))/2)},unproject:function(l){var g=180/Math.PI;return new X((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*g,l.x*g/this.R)},bounds:function(){var l=Q*Math.PI;return new R([-l,-l],[l,l])}()};function he(l,g,S,D){if(_(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=g,this._c=S,this._d=D}he.prototype={transform:function(l,g){return this._transform(l.clone(),g)},_transform:function(l,g){return g=g||1,l.x=g*(this._a*l.x+this._b),l.y=g*(this._c*l.y+this._d),l},untransform:function(l,g){return g=g||1,new K((l.x/g-this._b)/this._a,(l.y/g-this._d)/this._c)}};function te(l,g,S,D){return new he(l,g,S,D)}var ge=i({},se,{code:"EPSG:3857",projection:ie,transformation:function(){var l=.5/(Math.PI*ie.R);return te(l,.5,-l,.5)}()}),Se=i({},ge,{code:"EPSG:900913"});function fe(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function ke(l,g){var S="",D,q,J,ce,pe,ye;for(D=0,J=l.length;D<J;D++){for(pe=l[D],q=0,ce=pe.length;q<ce;q++)ye=pe[q],S+=(q?"L":"M")+ye.x+" "+ye.y;S+=g?nt.svg?"z":"x":""}return S||"M0 0"}var xe=document.documentElement.style,de="ActiveXObject"in window,me=de&&!document.addEventListener,ee="msLaunchUri"in navigator&&!("documentMode"in document),ae=Zr("webkit"),oe=Zr("android"),be=Zr("android 2")||Zr("android 3"),je=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),we=oe&&Zr("Google")&&je<537&&!("AudioNode"in window),re=!!window.opera,Ce=!ee&&Zr("chrome"),Te=Zr("gecko")&&!ae&&!re&&!de,lt=!Ce&&Zr("safari"),it=Zr("phantom"),Ft="OTransition"in xe,Fs=navigator.platform.indexOf("Win")===0,le=de&&"transition"in xe,De="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!be,Je="MozPerspective"in xe,Fe=!window.L_DISABLE_3D&&(le||De||Je)&&!Ft&&!it,He=typeof orientation<"u"||Zr("mobile"),Ze=He&&ae,Bt=He&&De,Et=!window.PointerEvent&&window.MSPointerEvent,Cn=!!(window.PointerEvent||Et),Ss="ontouchstart"in window||!!window.TouchEvent,Ln=!window.L_NO_TOUCH&&(Ss||Cn),Ci=He&&re,at=He&&Te,et=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,St=function(){var l=!1;try{var g=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",h,g),window.removeEventListener("testPassiveEventSupport",h,g)}catch{}return l}(),sn=function(){return!!document.createElement("canvas").getContext}(),rn=!!(document.createElementNS&&fe("svg").createSVGRect),Pn=!!rn&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Pi=!rn&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var g=l.firstChild;return g.style.behavior="url(#default#VML)",g&&typeof g.adj=="object"}catch{return!1}}(),$s=navigator.platform.indexOf("Mac")===0,Wr=navigator.platform.indexOf("Linux")===0;function Zr(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var nt={ie:de,ielt9:me,edge:ee,webkit:ae,android:oe,android23:be,androidStock:we,opera:re,chrome:Ce,gecko:Te,safari:lt,phantom:it,opera12:Ft,win:Fs,ie3d:le,webkit3d:De,gecko3d:Je,any3d:Fe,mobile:He,mobileWebkit:Ze,mobileWebkit3d:Bt,msPointer:Et,pointer:Cn,touch:Ln,touchNative:Ss,mobileOpera:Ci,mobileGecko:at,retina:et,passiveEvents:St,canvas:sn,svg:rn,vml:Pi,inlineSvg:Pn,mac:$s,linux:Wr},Gw=nt.msPointer?"MSPointerDown":"pointerdown",Kw=nt.msPointer?"MSPointerMove":"pointermove",Yw=nt.msPointer?"MSPointerUp":"pointerup",Xw=nt.msPointer?"MSPointerCancel":"pointercancel",Yp={touchstart:Gw,touchmove:Kw,touchend:Yw,touchcancel:Xw},Qw={touchstart:K4,touchmove:ch,touchend:ch,touchcancel:ch},sl={},Jw=!1;function q4(l,g,S){return g==="touchstart"&&G4(),Qw[g]?(S=Qw[g].bind(this,S),l.addEventListener(Yp[g],S,!1),S):(console.warn("wrong event specified:",g),h)}function H4(l,g,S){if(!Yp[g]){console.warn("wrong event specified:",g);return}l.removeEventListener(Yp[g],S,!1)}function W4(l){sl[l.pointerId]=l}function Z4(l){sl[l.pointerId]&&(sl[l.pointerId]=l)}function ej(l){delete sl[l.pointerId]}function G4(){Jw||(document.addEventListener(Gw,W4,!0),document.addEventListener(Kw,Z4,!0),document.addEventListener(Yw,ej,!0),document.addEventListener(Xw,ej,!0),Jw=!0)}function ch(l,g){if(g.pointerType!==(g.MSPOINTER_TYPE_MOUSE||"mouse")){g.touches=[];for(var S in sl)g.touches.push(sl[S]);g.changedTouches=[g],l(g)}}function K4(l,g){g.MSPOINTER_TYPE_TOUCH&&g.pointerType===g.MSPOINTER_TYPE_TOUCH&&Un(g),ch(l,g)}function Y4(l){var g={},S,D;for(D in l)S=l[D],g[D]=S&&S.bind?S.bind(l):S;return l=g,g.type="dblclick",g.detail=2,g.isTrusted=!1,g._simulated=!0,g}var X4=200;function Q4(l,g){l.addEventListener("dblclick",g);var S=0,D;function q(J){if(J.detail!==1){D=J.detail;return}if(!(J.pointerType==="mouse"||J.sourceCapabilities&&!J.sourceCapabilities.firesTouchEvents)){var ce=ij(J);if(!(ce.some(function(ye){return ye instanceof HTMLLabelElement&&ye.attributes.for})&&!ce.some(function(ye){return ye instanceof HTMLInputElement||ye instanceof HTMLSelectElement}))){var pe=Date.now();pe-S<=X4?(D++,D===2&&g(Y4(J))):D=1,S=pe}}}return l.addEventListener("click",q),{dblclick:g,simDblclick:q}}function J4(l,g){l.removeEventListener("dblclick",g.dblclick),l.removeEventListener("click",g.simDblclick)}var Xp=hh(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ed=hh(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tj=ed==="webkitTransition"||ed==="OTransition"?ed+"End":"transitionend";function nj(l){return typeof l=="string"?document.getElementById(l):l}function td(l,g){var S=l.style[g]||l.currentStyle&&l.currentStyle[g];if((!S||S==="auto")&&document.defaultView){var D=document.defaultView.getComputedStyle(l,null);S=D?D[g]:null}return S==="auto"?null:S}function Rt(l,g,S){var D=document.createElement(l);return D.className=g||"",S&&S.appendChild(D),D}function an(l){var g=l.parentNode;g&&g.removeChild(l)}function dh(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function rl(l){var g=l.parentNode;g&&g.lastChild!==l&&g.appendChild(l)}function il(l){var g=l.parentNode;g&&g.firstChild!==l&&g.insertBefore(l,g.firstChild)}function Qp(l,g){if(l.classList!==void 0)return l.classList.contains(g);var S=uh(l);return S.length>0&&new RegExp("(^|\\s)"+g+"(\\s|$)").test(S)}function yt(l,g){if(l.classList!==void 0)for(var S=y(g),D=0,q=S.length;D<q;D++)l.classList.add(S[D]);else if(!Qp(l,g)){var J=uh(l);Jp(l,(J?J+" ":"")+g)}}function yn(l,g){l.classList!==void 0?l.classList.remove(g):Jp(l,p((" "+uh(l)+" ").replace(" "+g+" "," ")))}function Jp(l,g){l.className.baseVal===void 0?l.className=g:l.className.baseVal=g}function uh(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Ys(l,g){"opacity"in l.style?l.style.opacity=g:"filter"in l.style&&e5(l,g)}function e5(l,g){var S=!1,D="DXImageTransform.Microsoft.Alpha";try{S=l.filters.item(D)}catch{if(g===1)return}g=Math.round(g*100),S?(S.Enabled=g!==100,S.Opacity=g):l.style.filter+=" progid:"+D+"(opacity="+g+")"}function hh(l){for(var g=document.documentElement.style,S=0;S<l.length;S++)if(l[S]in g)return l[S];return!1}function ao(l,g,S){var D=g||new K(0,0);l.style[Xp]=(nt.ie3d?"translate("+D.x+"px,"+D.y+"px)":"translate3d("+D.x+"px,"+D.y+"px,0)")+(S?" scale("+S+")":"")}function En(l,g){l._leaflet_pos=g,nt.any3d?ao(l,g):(l.style.left=g.x+"px",l.style.top=g.y+"px")}function oo(l){return l._leaflet_pos||new K(0,0)}var nd,sd,eg;if("onselectstart"in document)nd=function(){pt(window,"selectstart",Un)},sd=function(){Ht(window,"selectstart",Un)};else{var rd=hh(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);nd=function(){if(rd){var l=document.documentElement.style;eg=l[rd],l[rd]="none"}},sd=function(){rd&&(document.documentElement.style[rd]=eg,eg=void 0)}}function tg(){pt(window,"dragstart",Un)}function ng(){Ht(window,"dragstart",Un)}var fh,sg;function rg(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(mh(),fh=l,sg=l.style.outlineStyle,l.style.outlineStyle="none",pt(window,"keydown",mh))}function mh(){fh&&(fh.style.outlineStyle=sg,fh=void 0,sg=void 0,Ht(window,"keydown",mh))}function sj(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function ig(l){var g=l.getBoundingClientRect();return{x:g.width/l.offsetWidth||1,y:g.height/l.offsetHeight||1,boundingClientRect:g}}var t5={__proto__:null,TRANSFORM:Xp,TRANSITION:ed,TRANSITION_END:tj,get:nj,getStyle:td,create:Rt,remove:an,empty:dh,toFront:rl,toBack:il,hasClass:Qp,addClass:yt,removeClass:yn,setClass:Jp,getClass:uh,setOpacity:Ys,testProp:hh,setTransform:ao,setPosition:En,getPosition:oo,get disableTextSelection(){return nd},get enableTextSelection(){return sd},disableImageDrag:tg,enableImageDrag:ng,preventOutline:rg,restoreOutline:mh,getSizedParentNode:sj,getScale:ig};function pt(l,g,S,D){if(g&&typeof g=="object")for(var q in g)og(l,q,g[q],S);else{g=y(g);for(var J=0,ce=g.length;J<ce;J++)og(l,g[J],S,D)}return this}var Gr="_leaflet_events";function Ht(l,g,S,D){if(arguments.length===1)rj(l),delete l[Gr];else if(g&&typeof g=="object")for(var q in g)lg(l,q,g[q],S);else if(g=y(g),arguments.length===2)rj(l,function(pe){return N(g,pe)!==-1});else for(var J=0,ce=g.length;J<ce;J++)lg(l,g[J],S,D);return this}function rj(l,g){for(var S in l[Gr]){var D=S.split(/\d/)[0];(!g||g(D))&&lg(l,D,null,null,S)}}var ag={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function og(l,g,S,D){var q=g+d(S)+(D?"_"+d(D):"");if(l[Gr]&&l[Gr][q])return this;var J=function(pe){return S.call(D||l,pe||window.event)},ce=J;!nt.touchNative&&nt.pointer&&g.indexOf("touch")===0?J=q4(l,g,J):nt.touch&&g==="dblclick"?J=Q4(l,J):"addEventListener"in l?g==="touchstart"||g==="touchmove"||g==="wheel"||g==="mousewheel"?l.addEventListener(ag[g]||g,J,nt.passiveEvents?{passive:!1}:!1):g==="mouseenter"||g==="mouseleave"?(J=function(pe){pe=pe||window.event,dg(l,pe)&&ce(pe)},l.addEventListener(ag[g],J,!1)):l.addEventListener(g,ce,!1):l.attachEvent("on"+g,J),l[Gr]=l[Gr]||{},l[Gr][q]=J}function lg(l,g,S,D,q){q=q||g+d(S)+(D?"_"+d(D):"");var J=l[Gr]&&l[Gr][q];if(!J)return this;!nt.touchNative&&nt.pointer&&g.indexOf("touch")===0?H4(l,g,J):nt.touch&&g==="dblclick"?J4(l,J):"removeEventListener"in l?l.removeEventListener(ag[g]||g,J,!1):l.detachEvent("on"+g,J),l[Gr][q]=null}function lo(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function cg(l){return og(l,"wheel",lo),this}function id(l){return pt(l,"mousedown touchstart dblclick contextmenu",lo),l._leaflet_disable_click=!0,this}function Un(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function co(l){return Un(l),lo(l),this}function ij(l){if(l.composedPath)return l.composedPath();for(var g=[],S=l.target;S;)g.push(S),S=S.parentNode;return g}function aj(l,g){if(!g)return new K(l.clientX,l.clientY);var S=ig(g),D=S.boundingClientRect;return new K((l.clientX-D.left)/S.x-g.clientLeft,(l.clientY-D.top)/S.y-g.clientTop)}var n5=nt.linux&&nt.chrome?window.devicePixelRatio:nt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function oj(l){return nt.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/n5:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function dg(l,g){var S=g.relatedTarget;if(!S)return!0;try{for(;S&&S!==l;)S=S.parentNode}catch{return!1}return S!==l}var s5={__proto__:null,on:pt,off:Ht,stopPropagation:lo,disableScrollPropagation:cg,disableClickPropagation:id,preventDefault:Un,stop:co,getPropagationPath:ij,getMousePosition:aj,getWheelDelta:oj,isExternalTarget:dg,addListener:pt,removeListener:Ht},lj=Y.extend({run:function(l,g,S,D){this.stop(),this._el=l,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(D||.5,.2),this._startPos=oo(l),this._offset=g.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(l){var g=+new Date-this._startTime,S=this._duration*1e3;g<S?this._runFrame(this._easeOut(g/S),l):(this._runFrame(1),this._complete())},_runFrame:function(l,g){var S=this._startPos.add(this._offset.multiplyBy(l));g&&S._round(),En(this._el,S),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Tt=Y.extend({options:{crs:ge,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,g){g=v(this,g),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),g.maxBounds&&this.setMaxBounds(g.maxBounds),g.zoom!==void 0&&(this._zoom=this._limitZoom(g.zoom)),g.center&&g.zoom!==void 0&&this.setView(V(g.center),g.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ed&&nt.any3d&&!nt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),pt(this._proxy,tj,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,g,S){if(g=g===void 0?this._zoom:this._limitZoom(g),l=this._limitCenter(V(l),g,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=i({animate:S.animate},S.zoom),S.pan=i({animate:S.animate,duration:S.duration},S.pan));var D=this._zoom!==g?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,g,S.zoom):this._tryAnimatedPan(l,S.pan);if(D)return clearTimeout(this._sizeTimer),this}return this._resetView(l,g,S.pan&&S.pan.noMoveStart),this},setZoom:function(l,g){return this._loaded?this.setView(this.getCenter(),l,{zoom:g}):(this._zoom=l,this)},zoomIn:function(l,g){return l=l||(nt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,g)},zoomOut:function(l,g){return l=l||(nt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,g)},setZoomAround:function(l,g,S){var D=this.getZoomScale(g),q=this.getSize().divideBy(2),J=l instanceof K?l:this.latLngToContainerPoint(l),ce=J.subtract(q).multiplyBy(1-1/D),pe=this.containerPointToLatLng(q.add(ce));return this.setView(pe,g,{zoom:S})},_getBoundsCenterZoom:function(l,g){g=g||{},l=l.getBounds?l.getBounds():Z(l);var S=B(g.paddingTopLeft||g.padding||[0,0]),D=B(g.paddingBottomRight||g.padding||[0,0]),q=this.getBoundsZoom(l,!1,S.add(D));if(q=typeof g.maxZoom=="number"?Math.min(g.maxZoom,q):q,q===1/0)return{center:l.getCenter(),zoom:q};var J=D.subtract(S).divideBy(2),ce=this.project(l.getSouthWest(),q),pe=this.project(l.getNorthEast(),q),ye=this.unproject(ce.add(pe).divideBy(2).add(J),q);return{center:ye,zoom:q}},fitBounds:function(l,g){if(l=Z(l),!l.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(l,g);return this.setView(S.center,S.zoom,g)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,g){return this.setView(l,this._zoom,{pan:g})},panBy:function(l,g){if(l=B(l).round(),g=g||{},!l.x&&!l.y)return this.fire("moveend");if(g.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new lj,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),g.noMoveStart||this.fire("movestart"),g.animate!==!1){yt(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,S,g.duration||.25,g.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,g,S){if(S=S||{},S.animate===!1||!nt.any3d)return this.setView(l,g,S);this._stop();var D=this.project(this.getCenter()),q=this.project(l),J=this.getSize(),ce=this._zoom;l=V(l),g=g===void 0?ce:g;var pe=Math.max(J.x,J.y),ye=pe*this.getZoomScale(ce,g),Pe=q.distanceTo(D)||1,Ue=1.42,ot=Ue*Ue;function Nt(Tn){var kh=Tn?-1:1,H5=Tn?ye:pe,W5=ye*ye-pe*pe+kh*ot*ot*Pe*Pe,Z5=2*H5*ot*Pe,wg=W5/Z5,Vj=Math.sqrt(wg*wg+1)-wg,G5=Vj<1e-9?-18:Math.log(Vj);return G5}function cs(Tn){return(Math.exp(Tn)-Math.exp(-Tn))/2}function $n(Tn){return(Math.exp(Tn)+Math.exp(-Tn))/2}function Qs(Tn){return cs(Tn)/$n(Tn)}var ks=Nt(0);function ul(Tn){return pe*($n(ks)/$n(ks+Ue*Tn))}function B5(Tn){return pe*($n(ks)*Qs(ks+Ue*Tn)-cs(ks))/ot}function V5(Tn){return 1-Math.pow(1-Tn,1.5)}var U5=Date.now(),zj=(Nt(1)-ks)/Ue,q5=S.duration?1e3*S.duration:1e3*zj*.8;function Bj(){var Tn=(Date.now()-U5)/q5,kh=V5(Tn)*zj;Tn<=1?(this._flyToFrame=T(Bj,this),this._move(this.unproject(D.add(q.subtract(D).multiplyBy(B5(kh)/Pe)),ce),this.getScaleZoom(pe/ul(kh),ce),{flyTo:!0})):this._move(l,g)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),Bj.call(this),this},flyToBounds:function(l,g){var S=this._getBoundsCenterZoom(l,g);return this.flyTo(S.center,S.zoom,g)},setMaxBounds:function(l){return l=Z(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var g=this.options.minZoom;return this.options.minZoom=l,this._loaded&&g!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var g=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&g!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,g){this._enforcingBounds=!0;var S=this.getCenter(),D=this._limitCenter(S,this._zoom,Z(l));return S.equals(D)||this.panTo(D,g),this._enforcingBounds=!1,this},panInside:function(l,g){g=g||{};var S=B(g.paddingTopLeft||g.padding||[0,0]),D=B(g.paddingBottomRight||g.padding||[0,0]),q=this.project(this.getCenter()),J=this.project(l),ce=this.getPixelBounds(),pe=$([ce.min.add(S),ce.max.subtract(D)]),ye=pe.getSize();if(!pe.contains(J)){this._enforcingBounds=!0;var Pe=J.subtract(pe.getCenter()),Ue=pe.extend(J).getSize().subtract(ye);q.x+=Pe.x<0?-Ue.x:Ue.x,q.y+=Pe.y<0?-Ue.y:Ue.y,this.panTo(this.unproject(q),g),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=i({animate:!1,pan:!0},l===!0?{animate:!0}:l);var g=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),D=g.divideBy(2).round(),q=S.divideBy(2).round(),J=D.subtract(q);return!J.x&&!J.y?this:(l.animate&&l.pan?this.panBy(J):(l.pan&&this._rawPanBy(J),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:g,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=i({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var g=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(g,S,l):navigator.geolocation.getCurrentPosition(g,S,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var g=l.code,S=l.message||(g===1?"permission denied":g===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:g,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var g=l.coords.latitude,S=l.coords.longitude,D=new X(g,S),q=D.toBounds(l.coords.accuracy*2),J=this._locateOptions;if(J.setView){var ce=this.getBoundsZoom(q);this.setView(D,J.maxZoom?Math.min(ce,J.maxZoom):ce)}var pe={latlng:D,bounds:q,timestamp:l.timestamp};for(var ye in l.coords)typeof l.coords[ye]=="number"&&(pe[ye]=l.coords[ye]);this.fire("locationfound",pe)}},addHandler:function(l,g){if(!g)return this;var S=this[l]=new g(this);return this._handlers.push(S),this.options[l]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),an(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)an(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,g){var S="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),D=Rt("div",S,g||this._mapPane);return l&&(this._panes[l]=D),D},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),g=this.unproject(l.getBottomLeft()),S=this.unproject(l.getTopRight());return new W(g,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,g,S){l=Z(l),S=B(S||[0,0]);var D=this.getZoom()||0,q=this.getMinZoom(),J=this.getMaxZoom(),ce=l.getNorthWest(),pe=l.getSouthEast(),ye=this.getSize().subtract(S),Pe=$(this.project(pe,D),this.project(ce,D)).getSize(),Ue=nt.any3d?this.options.zoomSnap:1,ot=ye.x/Pe.x,Nt=ye.y/Pe.y,cs=g?Math.max(ot,Nt):Math.min(ot,Nt);return D=this.getScaleZoom(cs,D),Ue&&(D=Math.round(D/(Ue/100))*(Ue/100),D=g?Math.ceil(D/Ue)*Ue:Math.floor(D/Ue)*Ue),Math.max(q,Math.min(J,D))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,g){var S=this._getTopLeftPoint(l,g);return new R(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,g){var S=this.options.crs;return g=g===void 0?this._zoom:g,S.scale(l)/S.scale(g)},getScaleZoom:function(l,g){var S=this.options.crs;g=g===void 0?this._zoom:g;var D=S.zoom(l*S.scale(g));return isNaN(D)?1/0:D},project:function(l,g){return g=g===void 0?this._zoom:g,this.options.crs.latLngToPoint(V(l),g)},unproject:function(l,g){return g=g===void 0?this._zoom:g,this.options.crs.pointToLatLng(B(l),g)},layerPointToLatLng:function(l){var g=B(l).add(this.getPixelOrigin());return this.unproject(g)},latLngToLayerPoint:function(l){var g=this.project(V(l))._round();return g._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(V(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(Z(l))},distance:function(l,g){return this.options.crs.distance(V(l),V(g))},containerPointToLayerPoint:function(l){return B(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return B(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var g=this.containerPointToLayerPoint(B(l));return this.layerPointToLatLng(g)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(l)))},mouseEventToContainerPoint:function(l){return aj(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var g=this._container=nj(l);if(g){if(g._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");pt(g,"scroll",this._onScroll,this),this._containerId=d(g)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&nt.any3d,yt(l,"leaflet-container"+(nt.touch?" leaflet-touch":"")+(nt.retina?" leaflet-retina":"")+(nt.ielt9?" leaflet-oldie":"")+(nt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var g=td(l,"position");g!=="absolute"&&g!=="relative"&&g!=="fixed"&&g!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),En(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(yt(l.markerPane,"leaflet-zoom-hide"),yt(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,g,S){En(this._mapPane,new K(0,0));var D=!this._loaded;this._loaded=!0,g=this._limitZoom(g),this.fire("viewprereset");var q=this._zoom!==g;this._moveStart(q,S)._move(l,g)._moveEnd(q),this.fire("viewreset"),D&&this.fire("load")},_moveStart:function(l,g){return l&&this.fire("zoomstart"),g||this.fire("movestart"),this},_move:function(l,g,S,D){g===void 0&&(g=this._zoom);var q=this._zoom!==g;return this._zoom=g,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),D?S&&S.pinch&&this.fire("zoom",S):((q||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){En(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[d(this._container)]=this;var g=l?Ht:pt;g(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&g(window,"resize",this._onResize,this),nt.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=T(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,g){for(var S=[],D,q=g==="mouseout"||g==="mouseover",J=l.target||l.srcElement,ce=!1;J;){if(D=this._targets[d(J)],D&&(g==="click"||g==="preclick")&&this._draggableMoved(D)){ce=!0;break}if(D&&D.listens(g,!0)&&(q&&!dg(J,l)||(S.push(D),q))||J===this._container)break;J=J.parentNode}return!S.length&&!ce&&!q&&this.listens(g,!0)&&(S=[this]),S},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var g=l.target||l.srcElement;if(!(!this._loaded||g._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(g))){var S=l.type;S==="mousedown"&&rg(g),this._fireDOMEvent(l,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,g,S){if(l.type==="click"){var D=i({},l);D.type="preclick",this._fireDOMEvent(D,D.type,S)}var q=this._findEventTargets(l,g);if(S){for(var J=[],ce=0;ce<S.length;ce++)S[ce].listens(g,!0)&&J.push(S[ce]);q=J.concat(q)}if(q.length){g==="contextmenu"&&Un(l);var pe=q[0],ye={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Pe=pe.getLatLng&&(!pe._radius||pe._radius<=10);ye.containerPoint=Pe?this.latLngToContainerPoint(pe.getLatLng()):this.mouseEventToContainerPoint(l),ye.layerPoint=this.containerPointToLayerPoint(ye.containerPoint),ye.latlng=Pe?pe.getLatLng():this.layerPointToLatLng(ye.layerPoint)}for(ce=0;ce<q.length;ce++)if(q[ce].fire(g,ye,!0),ye.originalEvent._stopped||q[ce].options.bubblingMouseEvents===!1&&N(this._mouseEvents,g)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,g=this._handlers.length;l<g;l++)this._handlers[l].disable()},whenReady:function(l,g){return this._loaded?l.call(g||this,{target:this}):this.on("load",l,g),this},_getMapPanePos:function(){return oo(this._mapPane)||new K(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,g){var S=l&&g!==void 0?this._getNewPixelOrigin(l,g):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,g){var S=this.getSize()._divideBy(2);return this.project(l,g)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,g,S){var D=this._getNewPixelOrigin(S,g);return this.project(l,g)._subtract(D)},_latLngBoundsToNewLayerBounds:function(l,g,S){var D=this._getNewPixelOrigin(S,g);return $([this.project(l.getSouthWest(),g)._subtract(D),this.project(l.getNorthWest(),g)._subtract(D),this.project(l.getSouthEast(),g)._subtract(D),this.project(l.getNorthEast(),g)._subtract(D)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,g,S){if(!S)return l;var D=this.project(l,g),q=this.getSize().divideBy(2),J=new R(D.subtract(q),D.add(q)),ce=this._getBoundsOffset(J,S,g);return Math.abs(ce.x)<=1&&Math.abs(ce.y)<=1?l:this.unproject(D.add(ce),g)},_limitOffset:function(l,g){if(!g)return l;var S=this.getPixelBounds(),D=new R(S.min.add(l),S.max.add(l));return l.add(this._getBoundsOffset(D,g))},_getBoundsOffset:function(l,g,S){var D=$(this.project(g.getNorthEast(),S),this.project(g.getSouthWest(),S)),q=D.min.subtract(l.min),J=D.max.subtract(l.max),ce=this._rebound(q.x,-J.x),pe=this._rebound(q.y,-J.y);return new K(ce,pe)},_rebound:function(l,g){return l+g>0?Math.round(l-g)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(g))},_limitZoom:function(l){var g=this.getMinZoom(),S=this.getMaxZoom(),D=nt.any3d?this.options.zoomSnap:1;return D&&(l=Math.round(l/D)*D),Math.max(g,Math.min(S,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,g){var S=this._getCenterOffset(l)._trunc();return(g&&g.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,g),!0)},_createAnimProxy:function(){var l=this._proxy=Rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(g){var S=Xp,D=this._proxy.style[S];ao(this._proxy,this.project(g.center,g.zoom),this.getZoomScale(g.zoom,1)),D===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){an(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),g=this.getZoom();ao(this._proxy,this.project(l,g),this.getZoomScale(g,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,g,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(g-this._zoom)>this.options.zoomAnimationThreshold)return!1;var D=this.getZoomScale(g),q=this._getCenterOffset(l)._divideBy(1-1/D);return S.animate!==!0&&!this.getSize().contains(q)?!1:(T(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(l,g,!0)},this),!0)},_animateZoom:function(l,g,S,D){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=g,yt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:g,noUpdate:D}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&yn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function r5(l,g){return new Tt(l,g)}var vr=O.extend({options:{position:"topright"},initialize:function(l){v(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var g=this._map;return g&&g.removeControl(this),this.options.position=l,g&&g.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var g=this._container=this.onAdd(l),S=this.getPosition(),D=l._controlCorners[S];return yt(g,"leaflet-control"),S.indexOf("bottom")!==-1?D.insertBefore(g,D.firstChild):D.appendChild(g),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(an(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),ad=function(l){return new vr(l)};Tt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},g="leaflet-",S=this._controlContainer=Rt("div",g+"control-container",this._container);function D(q,J){var ce=g+q+" "+g+J;l[q+J]=Rt("div",ce,S)}D("top","left"),D("top","right"),D("bottom","left"),D("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)an(this._controlCorners[l]);an(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var cj=vr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,g,S,D){return S<D?-1:D<S?1:0}},initialize:function(l,g,S){v(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var D in l)this._addLayer(l[D],D);for(D in g)this._addLayer(g[D],D,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return vr.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,g){return this._addLayer(l,g),this._map?this._update():this},addOverlay:function(l,g){return this._addLayer(l,g,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var g=this._getLayer(d(l));return g&&this._layers.splice(this._layers.indexOf(g),1),this._map?this._update():this},expand:function(){yt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(yt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):yn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",g=this._container=Rt("div",l),S=this.options.collapsed;g.setAttribute("aria-haspopup",!0),id(g),cg(g);var D=this._section=Rt("section",l+"-list");S&&(this._map.on("click",this.collapse,this),pt(g,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var q=this._layersLink=Rt("a",l+"-toggle",g);q.href="#",q.title="Layers",q.setAttribute("role","button"),pt(q,{keydown:function(J){J.keyCode===13&&this._expandSafely()},click:function(J){Un(J),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=Rt("div",l+"-base",D),this._separator=Rt("div",l+"-separator",D),this._overlaysList=Rt("div",l+"-overlays",D),g.appendChild(D)},_getLayer:function(l){for(var g=0;g<this._layers.length;g++)if(this._layers[g]&&d(this._layers[g].layer)===l)return this._layers[g]},_addLayer:function(l,g,S){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:g,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(D,q){return this.options.sortFunction(D.layer,q.layer,D.name,q.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;dh(this._baseLayersList),dh(this._overlaysList),this._layerControlInputs=[];var l,g,S,D,q=0;for(S=0;S<this._layers.length;S++)D=this._layers[S],this._addItem(D),g=g||D.overlay,l=l||!D.overlay,q+=D.overlay?0:1;return this.options.hideSingleBase&&(l=l&&q>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=g&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var g=this._getLayer(d(l.target)),S=g.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;S&&this._map.fire(S,g)},_createRadioElement:function(l,g){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(g?' checked="checked"':"")+"/>",D=document.createElement("div");return D.innerHTML=S,D.firstChild},_addItem:function(l){var g=document.createElement("label"),S=this._map.hasLayer(l.layer),D;l.overlay?(D=document.createElement("input"),D.type="checkbox",D.className="leaflet-control-layers-selector",D.defaultChecked=S):D=this._createRadioElement("leaflet-base-layers_"+d(this),S),this._layerControlInputs.push(D),D.layerId=d(l.layer),pt(D,"click",this._onInputClick,this);var q=document.createElement("span");q.innerHTML=" "+l.name;var J=document.createElement("span");g.appendChild(J),J.appendChild(D),J.appendChild(q);var ce=l.overlay?this._overlaysList:this._baseLayersList;return ce.appendChild(g),this._checkDisabledLayers(),g},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,g,S,D=[],q=[];this._handlingClick=!0;for(var J=l.length-1;J>=0;J--)g=l[J],S=this._getLayer(g.layerId).layer,g.checked?D.push(S):g.checked||q.push(S);for(J=0;J<q.length;J++)this._map.hasLayer(q[J])&&this._map.removeLayer(q[J]);for(J=0;J<D.length;J++)this._map.hasLayer(D[J])||this._map.addLayer(D[J]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,g,S,D=this._map.getZoom(),q=l.length-1;q>=0;q--)g=l[q],S=this._getLayer(g.layerId).layer,g.disabled=S.options.minZoom!==void 0&&D<S.options.minZoom||S.options.maxZoom!==void 0&&D>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,pt(l,"click",Un),this.expand();var g=this;setTimeout(function(){Ht(l,"click",Un),g._preventClick=!1})}}),i5=function(l,g,S){return new cj(l,g,S)},ug=vr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var g="leaflet-control-zoom",S=Rt("div",g+" leaflet-bar"),D=this.options;return this._zoomInButton=this._createButton(D.zoomInText,D.zoomInTitle,g+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(D.zoomOutText,D.zoomOutTitle,g+"-out",S,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,g,S,D,q){var J=Rt("a",S,D);return J.innerHTML=l,J.href="#",J.title=g,J.setAttribute("role","button"),J.setAttribute("aria-label",g),id(J),pt(J,"click",co),pt(J,"click",q,this),pt(J,"click",this._refocusOnMap,this),J},_updateDisabled:function(){var l=this._map,g="leaflet-disabled";yn(this._zoomInButton,g),yn(this._zoomOutButton,g),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(yt(this._zoomOutButton,g),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(yt(this._zoomInButton,g),this._zoomInButton.setAttribute("aria-disabled","true"))}});Tt.mergeOptions({zoomControl:!0}),Tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ug,this.addControl(this.zoomControl))});var a5=function(l){return new ug(l)},dj=vr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var g="leaflet-control-scale",S=Rt("div",g),D=this.options;return this._addScales(D,g+"-line",S),l.on(D.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),S},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,g,S){l.metric&&(this._mScale=Rt("div",g,S)),l.imperial&&(this._iScale=Rt("div",g,S))},_update:function(){var l=this._map,g=l.getSize().y/2,S=l.distance(l.containerPointToLatLng([0,g]),l.containerPointToLatLng([this.options.maxWidth,g]));this._updateScales(S)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var g=this._getRoundNum(l),S=g<1e3?g+" m":g/1e3+" km";this._updateScale(this._mScale,S,g/l)},_updateImperial:function(l){var g=l*3.2808399,S,D,q;g>5280?(S=g/5280,D=this._getRoundNum(S),this._updateScale(this._iScale,D+" mi",D/S)):(q=this._getRoundNum(g),this._updateScale(this._iScale,q+" ft",q/g))},_updateScale:function(l,g,S){l.style.width=Math.round(this.options.maxWidth*S)+"px",l.innerHTML=g},_getRoundNum:function(l){var g=Math.pow(10,(Math.floor(l)+"").length-1),S=l/g;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,g*S}}),o5=function(l){return new dj(l)},l5='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',hg=vr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(nt.inlineSvg?l5+" ":"")+"Leaflet</a>"},initialize:function(l){v(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Rt("div","leaflet-control-attribution"),id(this._container);for(var g in l._layers)l._layers[g].getAttribution&&this.addAttribution(l._layers[g].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var g in this._attributions)this._attributions[g]&&l.push(g);var S=[];this.options.prefix&&S.push(this.options.prefix),l.length&&S.push(l.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Tt.mergeOptions({attributionControl:!0}),Tt.addInitHook(function(){this.options.attributionControl&&new hg().addTo(this)});var c5=function(l){return new hg(l)};vr.Layers=cj,vr.Zoom=ug,vr.Scale=dj,vr.Attribution=hg,ad.layers=i5,ad.zoom=a5,ad.scale=o5,ad.attribution=c5;var Kr=O.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Kr.addTo=function(l,g){return l.addHandler(g,this),this};var d5={Events:G},uj=nt.touch?"touchstart mousedown":"mousedown",oa=Y.extend({options:{clickTolerance:3},initialize:function(l,g,S,D){v(this,D),this._element=l,this._dragStartTarget=g||l,this._preventOutline=S},enable:function(){this._enabled||(pt(this._dragStartTarget,uj,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(oa._dragging===this&&this.finishDrag(!0),Ht(this._dragStartTarget,uj,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!Qp(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){oa._dragging===this&&this.finishDrag();return}if(!(oa._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(oa._dragging=this,this._preventOutline&&rg(this._element),tg(),nd(),!this._moving)){this.fire("down");var g=l.touches?l.touches[0]:l,S=sj(this._element);this._startPoint=new K(g.clientX,g.clientY),this._startPos=oo(this._element),this._parentScale=ig(S);var D=l.type==="mousedown";pt(document,D?"mousemove":"touchmove",this._onMove,this),pt(document,D?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var g=l.touches&&l.touches.length===1?l.touches[0]:l,S=new K(g.clientX,g.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,Un(l),this._moved||(this.fire("dragstart"),this._moved=!0,yt(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),yt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),En(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){yn(document.body,"leaflet-dragging"),this._lastTarget&&(yn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ht(document,"mousemove touchmove",this._onMove,this),Ht(document,"mouseup touchend touchcancel",this._onUp,this),ng(),sd();var g=this._moved&&this._moving;this._moving=!1,oa._dragging=!1,g&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function hj(l,g,S){var D,q=[1,4,2,8],J,ce,pe,ye,Pe,Ue,ot,Nt;for(J=0,Ue=l.length;J<Ue;J++)l[J]._code=uo(l[J],g);for(pe=0;pe<4;pe++){for(ot=q[pe],D=[],J=0,Ue=l.length,ce=Ue-1;J<Ue;ce=J++)ye=l[J],Pe=l[ce],ye._code&ot?Pe._code&ot||(Nt=ph(Pe,ye,ot,g,S),Nt._code=uo(Nt,g),D.push(Nt)):(Pe._code&ot&&(Nt=ph(Pe,ye,ot,g,S),Nt._code=uo(Nt,g),D.push(Nt)),D.push(ye));l=D}return l}function fj(l,g){var S,D,q,J,ce,pe,ye,Pe,Ue;if(!l||l.length===0)throw new Error("latlngs not passed");Xs(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ot=V([0,0]),Nt=Z(l),cs=Nt.getNorthWest().distanceTo(Nt.getSouthWest())*Nt.getNorthEast().distanceTo(Nt.getNorthWest());cs<1700&&(ot=fg(l));var $n=l.length,Qs=[];for(S=0;S<$n;S++){var ks=V(l[S]);Qs.push(g.project(V([ks.lat-ot.lat,ks.lng-ot.lng])))}for(pe=ye=Pe=0,S=0,D=$n-1;S<$n;D=S++)q=Qs[S],J=Qs[D],ce=q.y*J.x-J.y*q.x,ye+=(q.x+J.x)*ce,Pe+=(q.y+J.y)*ce,pe+=ce*3;pe===0?Ue=Qs[0]:Ue=[ye/pe,Pe/pe];var ul=g.unproject(B(Ue));return V([ul.lat+ot.lat,ul.lng+ot.lng])}function fg(l){for(var g=0,S=0,D=0,q=0;q<l.length;q++){var J=V(l[q]);g+=J.lat,S+=J.lng,D++}return V([g/D,S/D])}var u5={__proto__:null,clipPolygon:hj,polygonCenter:fj,centroid:fg};function mj(l,g){if(!g||!l.length)return l.slice();var S=g*g;return l=m5(l,S),l=f5(l,S),l}function pj(l,g,S){return Math.sqrt(od(l,g,S,!0))}function h5(l,g,S){return od(l,g,S)}function f5(l,g){var S=l.length,D=typeof Uint8Array<"u"?Uint8Array:Array,q=new D(S);q[0]=q[S-1]=1,mg(l,q,g,0,S-1);var J,ce=[];for(J=0;J<S;J++)q[J]&&ce.push(l[J]);return ce}function mg(l,g,S,D,q){var J=0,ce,pe,ye;for(pe=D+1;pe<=q-1;pe++)ye=od(l[pe],l[D],l[q],!0),ye>J&&(ce=pe,J=ye);J>S&&(g[ce]=1,mg(l,g,S,D,ce),mg(l,g,S,ce,q))}function m5(l,g){for(var S=[l[0]],D=1,q=0,J=l.length;D<J;D++)p5(l[D],l[q])>g&&(S.push(l[D]),q=D);return q<J-1&&S.push(l[J-1]),S}var gj;function vj(l,g,S,D,q){var J=D?gj:uo(l,S),ce=uo(g,S),pe,ye,Pe;for(gj=ce;;){if(!(J|ce))return[l,g];if(J&ce)return!1;pe=J||ce,ye=ph(l,g,pe,S,q),Pe=uo(ye,S),pe===J?(l=ye,J=Pe):(g=ye,ce=Pe)}}function ph(l,g,S,D,q){var J=g.x-l.x,ce=g.y-l.y,pe=D.min,ye=D.max,Pe,Ue;return S&8?(Pe=l.x+J*(ye.y-l.y)/ce,Ue=ye.y):S&4?(Pe=l.x+J*(pe.y-l.y)/ce,Ue=pe.y):S&2?(Pe=ye.x,Ue=l.y+ce*(ye.x-l.x)/J):S&1&&(Pe=pe.x,Ue=l.y+ce*(pe.x-l.x)/J),new K(Pe,Ue,q)}function uo(l,g){var S=0;return l.x<g.min.x?S|=1:l.x>g.max.x&&(S|=2),l.y<g.min.y?S|=4:l.y>g.max.y&&(S|=8),S}function p5(l,g){var S=g.x-l.x,D=g.y-l.y;return S*S+D*D}function od(l,g,S,D){var q=g.x,J=g.y,ce=S.x-q,pe=S.y-J,ye=ce*ce+pe*pe,Pe;return ye>0&&(Pe=((l.x-q)*ce+(l.y-J)*pe)/ye,Pe>1?(q=S.x,J=S.y):Pe>0&&(q+=ce*Pe,J+=pe*Pe)),ce=l.x-q,pe=l.y-J,D?ce*ce+pe*pe:new K(q,J)}function Xs(l){return!_(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function xj(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Xs(l)}function yj(l,g){var S,D,q,J,ce,pe,ye,Pe;if(!l||l.length===0)throw new Error("latlngs not passed");Xs(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ue=V([0,0]),ot=Z(l),Nt=ot.getNorthWest().distanceTo(ot.getSouthWest())*ot.getNorthEast().distanceTo(ot.getNorthWest());Nt<1700&&(Ue=fg(l));var cs=l.length,$n=[];for(S=0;S<cs;S++){var Qs=V(l[S]);$n.push(g.project(V([Qs.lat-Ue.lat,Qs.lng-Ue.lng])))}for(S=0,D=0;S<cs-1;S++)D+=$n[S].distanceTo($n[S+1])/2;if(D===0)Pe=$n[0];else for(S=0,J=0;S<cs-1;S++)if(ce=$n[S],pe=$n[S+1],q=ce.distanceTo(pe),J+=q,J>D){ye=(J-D)/q,Pe=[pe.x-ye*(pe.x-ce.x),pe.y-ye*(pe.y-ce.y)];break}var ks=g.unproject(B(Pe));return V([ks.lat+Ue.lat,ks.lng+Ue.lng])}var g5={__proto__:null,simplify:mj,pointToSegmentDistance:pj,closestPointOnSegment:h5,clipSegment:vj,_getEdgeIntersection:ph,_getBitCode:uo,_sqClosestPointOnSegment:od,isFlat:Xs,_flat:xj,polylineCenter:yj},pg={project:function(l){return new K(l.lng,l.lat)},unproject:function(l){return new X(l.y,l.x)},bounds:new R([-180,-90],[180,90])},gg={R:6378137,R_MINOR:6356752314245179e-9,bounds:new R([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var g=Math.PI/180,S=this.R,D=l.lat*g,q=this.R_MINOR/S,J=Math.sqrt(1-q*q),ce=J*Math.sin(D),pe=Math.tan(Math.PI/4-D/2)/Math.pow((1-ce)/(1+ce),J/2);return D=-S*Math.log(Math.max(pe,1e-10)),new K(l.lng*g*S,D)},unproject:function(l){for(var g=180/Math.PI,S=this.R,D=this.R_MINOR/S,q=Math.sqrt(1-D*D),J=Math.exp(-l.y/S),ce=Math.PI/2-2*Math.atan(J),pe=0,ye=.1,Pe;pe<15&&Math.abs(ye)>1e-7;pe++)Pe=q*Math.sin(ce),Pe=Math.pow((1-Pe)/(1+Pe),q/2),ye=Math.PI/2-2*Math.atan(J*Pe)-ce,ce+=ye;return new X(ce*g,l.x*g/S)}},v5={__proto__:null,LonLat:pg,Mercator:gg,SphericalMercator:ie},x5=i({},se,{code:"EPSG:3395",projection:gg,transformation:function(){var l=.5/(Math.PI*gg.R);return te(l,.5,-l,.5)}()}),bj=i({},se,{code:"EPSG:4326",projection:pg,transformation:te(1/180,1,-1/180,.5)}),y5=i({},H,{projection:pg,transformation:te(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,g){var S=g.lng-l.lng,D=g.lat-l.lat;return Math.sqrt(S*S+D*D)},infinite:!0});H.Earth=se,H.EPSG3395=x5,H.EPSG3857=ge,H.EPSG900913=Se,H.EPSG4326=bj,H.Simple=y5;var xr=Y.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[d(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[d(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var g=l.target;if(g.hasLayer(this)){if(this._map=g,this._zoomAnimated=g._zoomAnimated,this.getEvents){var S=this.getEvents();g.on(S,this),this.once("remove",function(){g.off(S,this)},this)}this.onAdd(g),this.fire("add"),g.fire("layeradd",{layer:this})}}});Tt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var g=d(l);return this._layers[g]?this:(this._layers[g]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var g=d(l);return this._layers[g]?(this._loaded&&l.onRemove(this),delete this._layers[g],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return d(l)in this._layers},eachLayer:function(l,g){for(var S in this._layers)l.call(g,this._layers[S]);return this},_addLayers:function(l){l=l?_(l)?l:[l]:[];for(var g=0,S=l.length;g<S;g++)this.addLayer(l[g])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[d(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var g=d(l);this._zoomBoundLayers[g]&&(delete this._zoomBoundLayers[g],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,g=-1/0,S=this._getZoomSpan();for(var D in this._zoomBoundLayers){var q=this._zoomBoundLayers[D].options;l=q.minZoom===void 0?l:Math.min(l,q.minZoom),g=q.maxZoom===void 0?g:Math.max(g,q.maxZoom)}this._layersMaxZoom=g===-1/0?void 0:g,this._layersMinZoom=l===1/0?void 0:l,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var al=xr.extend({initialize:function(l,g){v(this,g),this._layers={};var S,D;if(l)for(S=0,D=l.length;S<D;S++)this.addLayer(l[S])},addLayer:function(l){var g=this.getLayerId(l);return this._layers[g]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var g=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[g]&&this._map.removeLayer(this._layers[g]),delete this._layers[g],this},hasLayer:function(l){var g=typeof l=="number"?l:this.getLayerId(l);return g in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var g=Array.prototype.slice.call(arguments,1),S,D;for(S in this._layers)D=this._layers[S],D[l]&&D[l].apply(D,g);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,g){for(var S in this._layers)l.call(g,this._layers[S]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return d(l)}}),b5=function(l,g){return new al(l,g)},Ei=al.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),al.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),al.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new W;for(var g in this._layers){var S=this._layers[g];l.extend(S.getBounds?S.getBounds():S.getLatLng())}return l}}),w5=function(l,g){return new Ei(l,g)},ol=O.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){v(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,g){var S=this._getIconUrl(l);if(!S){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var D=this._createImg(S,g&&g.tagName==="IMG"?g:null);return this._setIconStyles(D,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),D},_setIconStyles:function(l,g){var S=this.options,D=S[g+"Size"];typeof D=="number"&&(D=[D,D]);var q=B(D),J=B(g==="shadow"&&S.shadowAnchor||S.iconAnchor||q&&q.divideBy(2,!0));l.className="leaflet-marker-"+g+" "+(S.className||""),J&&(l.style.marginLeft=-J.x+"px",l.style.marginTop=-J.y+"px"),q&&(l.style.width=q.x+"px",l.style.height=q.y+"px")},_createImg:function(l,g){return g=g||document.createElement("img"),g.src=l,g},_getIconUrl:function(l){return nt.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function j5(l){return new ol(l)}var ld=ol.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof ld.imagePath!="string"&&(ld.imagePath=this._detectIconPath()),(this.options.imagePath||ld.imagePath)+ol.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var g=function(S,D,q){var J=D.exec(S);return J&&J[q]};return l=g(l,/^url\((['"])?(.+)\1\)$/,2),l&&g(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Rt("div","leaflet-default-icon-path",document.body),g=td(l,"background-image")||td(l,"backgroundImage");if(document.body.removeChild(l),g=this._stripUrl(g),g)return g;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),wj=Kr.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new oa(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),yt(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var g=this._marker,S=g._map,D=this._marker.options.autoPanSpeed,q=this._marker.options.autoPanPadding,J=oo(g._icon),ce=S.getPixelBounds(),pe=S.getPixelOrigin(),ye=$(ce.min._subtract(pe).add(q),ce.max._subtract(pe).subtract(q));if(!ye.contains(J)){var Pe=B((Math.max(ye.max.x,J.x)-ye.max.x)/(ce.max.x-ye.max.x)-(Math.min(ye.min.x,J.x)-ye.min.x)/(ce.min.x-ye.min.x),(Math.max(ye.max.y,J.y)-ye.max.y)/(ce.max.y-ye.max.y)-(Math.min(ye.min.y,J.y)-ye.min.y)/(ce.min.y-ye.min.y)).multiplyBy(D);S.panBy(Pe,{animate:!1}),this._draggable._newPos._add(Pe),this._draggable._startPos._add(Pe),En(g._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=T(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,l)))},_onDrag:function(l){var g=this._marker,S=g._shadow,D=oo(g._icon),q=g._map.layerPointToLatLng(D);S&&En(S,D),g._latlng=q,l.latlng=q,l.oldLatLng=this._oldLatLng,g.fire("move",l).fire("drag",l)},_onDragEnd:function(l){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),gh=xr.extend({options:{icon:new ld,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,g){v(this,g),this._latlng=V(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var g=this._latlng;return this._latlng=V(l),this.update(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,g="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=l.icon.createIcon(this._icon),D=!1;S!==this._icon&&(this._icon&&this._removeIcon(),D=!0,l.title&&(S.title=l.title),S.tagName==="IMG"&&(S.alt=l.alt||"")),yt(S,g),l.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pt(S,"focus",this._panOnFocus,this);var q=l.icon.createShadow(this._shadow),J=!1;q!==this._shadow&&(this._removeShadow(),J=!0),q&&(yt(q,g),q.alt=""),this._shadow=q,l.opacity<1&&this._updateOpacity(),D&&this.getPane().appendChild(this._icon),this._initInteraction(),q&&J&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ht(this._icon,"focus",this._panOnFocus,this),an(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&an(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&En(this._icon,l),this._shadow&&En(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var g=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(g)},_initInteraction:function(){if(this.options.interactive&&(yt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wj)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wj(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Ys(this._icon,l),this._shadow&&Ys(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var g=this.options.icon.options,S=g.iconSize?B(g.iconSize):B(0,0),D=g.iconAnchor?B(g.iconAnchor):B(0,0);l.panInside(this._latlng,{paddingTopLeft:D,paddingBottomRight:S.subtract(D)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _5(l,g){return new gh(l,g)}var la=xr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return v(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),vh=la.extend({options:{fill:!0,radius:10},initialize:function(l,g){v(this,g),this._latlng=V(l),this._radius=this.options.radius},setLatLng:function(l){var g=this._latlng;return this._latlng=V(l),this.redraw(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var g=l&&l.radius||this._radius;return la.prototype.setStyle.call(this,l),this.setRadius(g),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,g=this._radiusY||l,S=this._clickTolerance(),D=[l+S,g+S];this._pxBounds=new R(this._point.subtract(D),this._point.add(D))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function N5(l,g){return new vh(l,g)}var vg=vh.extend({initialize:function(l,g,S){if(typeof g=="number"&&(g=i({},S,{radius:g})),v(this,g),this._latlng=V(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new W(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:la.prototype.setStyle,_project:function(){var l=this._latlng.lng,g=this._latlng.lat,S=this._map,D=S.options.crs;if(D.distance===se.distance){var q=Math.PI/180,J=this._mRadius/se.R/q,ce=S.project([g+J,l]),pe=S.project([g-J,l]),ye=ce.add(pe).divideBy(2),Pe=S.unproject(ye).lat,Ue=Math.acos((Math.cos(J*q)-Math.sin(g*q)*Math.sin(Pe*q))/(Math.cos(g*q)*Math.cos(Pe*q)))/q;(isNaN(Ue)||Ue===0)&&(Ue=J/Math.cos(Math.PI/180*g)),this._point=ye.subtract(S.getPixelOrigin()),this._radius=isNaN(Ue)?0:ye.x-S.project([Pe,l-Ue]).x,this._radiusY=ye.y-ce.y}else{var ot=D.unproject(D.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(ot).x}this._updateBounds()}});function S5(l,g,S){return new vg(l,g,S)}var Ti=la.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,g){v(this,g),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var g=1/0,S=null,D=od,q,J,ce=0,pe=this._parts.length;ce<pe;ce++)for(var ye=this._parts[ce],Pe=1,Ue=ye.length;Pe<Ue;Pe++){q=ye[Pe-1],J=ye[Pe];var ot=D(l,q,J,!0);ot<g&&(g=ot,S=D(l,q,J))}return S&&(S.distance=Math.sqrt(g)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yj(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,g){return g=g||this._defaultShape(),l=V(l),g.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new W,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return Xs(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var g=[],S=Xs(l),D=0,q=l.length;D<q;D++)S?(g[D]=V(l[D]),this._bounds.extend(g[D])):g[D]=this._convertLatLngs(l[D]);return g},_project:function(){var l=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),g=new K(l,l);this._rawPxBounds&&(this._pxBounds=new R([this._rawPxBounds.min.subtract(g),this._rawPxBounds.max.add(g)]))},_projectLatlngs:function(l,g,S){var D=l[0]instanceof X,q=l.length,J,ce;if(D){for(ce=[],J=0;J<q;J++)ce[J]=this._map.latLngToLayerPoint(l[J]),S.extend(ce[J]);g.push(ce)}else for(J=0;J<q;J++)this._projectLatlngs(l[J],g,S)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var g=this._parts,S,D,q,J,ce,pe,ye;for(S=0,q=0,J=this._rings.length;S<J;S++)for(ye=this._rings[S],D=0,ce=ye.length;D<ce-1;D++)pe=vj(ye[D],ye[D+1],l,D,!0),pe&&(g[q]=g[q]||[],g[q].push(pe[0]),(pe[1]!==ye[D+1]||D===ce-2)&&(g[q].push(pe[1]),q++))}},_simplifyPoints:function(){for(var l=this._parts,g=this.options.smoothFactor,S=0,D=l.length;S<D;S++)l[S]=mj(l[S],g)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,g){var S,D,q,J,ce,pe,ye=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(S=0,J=this._parts.length;S<J;S++)for(pe=this._parts[S],D=0,ce=pe.length,q=ce-1;D<ce;q=D++)if(!(!g&&D===0)&&pj(l,pe[q],pe[D])<=ye)return!0;return!1}});function k5(l,g){return new Ti(l,g)}Ti._flat=xj;var ll=Ti.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fj(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var g=Ti.prototype._convertLatLngs.call(this,l),S=g.length;return S>=2&&g[0]instanceof X&&g[0].equals(g[S-1])&&g.pop(),g},_setLatLngs:function(l){Ti.prototype._setLatLngs.call(this,l),Xs(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Xs(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,g=this.options.weight,S=new K(g,g);if(l=new R(l.min.subtract(S),l.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var D=0,q=this._rings.length,J;D<q;D++)J=hj(this._rings[D],l,!0),J.length&&this._parts.push(J)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var g=!1,S,D,q,J,ce,pe,ye,Pe;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(J=0,ye=this._parts.length;J<ye;J++)for(S=this._parts[J],ce=0,Pe=S.length,pe=Pe-1;ce<Pe;pe=ce++)D=S[ce],q=S[pe],D.y>l.y!=q.y>l.y&&l.x<(q.x-D.x)*(l.y-D.y)/(q.y-D.y)+D.x&&(g=!g);return g||Ti.prototype._containsPoint.call(this,l,!0)}});function C5(l,g){return new ll(l,g)}var Ai=Ei.extend({initialize:function(l,g){v(this,g),this._layers={},l&&this.addData(l)},addData:function(l){var g=_(l)?l:l.features,S,D,q;if(g){for(S=0,D=g.length;S<D;S++)q=g[S],(q.geometries||q.geometry||q.features||q.coordinates)&&this.addData(q);return this}var J=this.options;if(J.filter&&!J.filter(l))return this;var ce=xh(l,J);return ce?(ce.feature=wh(l),ce.defaultOptions=ce.options,this.resetStyle(ce),J.onEachFeature&&J.onEachFeature(l,ce),this.addLayer(ce)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=i({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(g){this._setLayerStyle(g,l)},this)},_setLayerStyle:function(l,g){l.setStyle&&(typeof g=="function"&&(g=g(l.feature)),l.setStyle(g))}});function xh(l,g){var S=l.type==="Feature"?l.geometry:l,D=S?S.coordinates:null,q=[],J=g&&g.pointToLayer,ce=g&&g.coordsToLatLng||xg,pe,ye,Pe,Ue;if(!D&&!S)return null;switch(S.type){case"Point":return pe=ce(D),jj(J,l,pe,g);case"MultiPoint":for(Pe=0,Ue=D.length;Pe<Ue;Pe++)pe=ce(D[Pe]),q.push(jj(J,l,pe,g));return new Ei(q);case"LineString":case"MultiLineString":return ye=yh(D,S.type==="LineString"?0:1,ce),new Ti(ye,g);case"Polygon":case"MultiPolygon":return ye=yh(D,S.type==="Polygon"?1:2,ce),new ll(ye,g);case"GeometryCollection":for(Pe=0,Ue=S.geometries.length;Pe<Ue;Pe++){var ot=xh({geometry:S.geometries[Pe],type:"Feature",properties:l.properties},g);ot&&q.push(ot)}return new Ei(q);case"FeatureCollection":for(Pe=0,Ue=S.features.length;Pe<Ue;Pe++){var Nt=xh(S.features[Pe],g);Nt&&q.push(Nt)}return new Ei(q);default:throw new Error("Invalid GeoJSON object.")}}function jj(l,g,S,D){return l?l(g,S):new gh(S,D&&D.markersInheritOptions&&D)}function xg(l){return new X(l[1],l[0],l[2])}function yh(l,g,S){for(var D=[],q=0,J=l.length,ce;q<J;q++)ce=g?yh(l[q],g-1,S):(S||xg)(l[q]),D.push(ce);return D}function yg(l,g){return l=V(l),l.alt!==void 0?[u(l.lng,g),u(l.lat,g),u(l.alt,g)]:[u(l.lng,g),u(l.lat,g)]}function bh(l,g,S,D){for(var q=[],J=0,ce=l.length;J<ce;J++)q.push(g?bh(l[J],Xs(l[J])?0:g-1,S,D):yg(l[J],D));return!g&&S&&q.length>0&&q.push(q[0].slice()),q}function cl(l,g){return l.feature?i({},l.feature,{geometry:g}):wh(g)}function wh(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var bg={toGeoJSON:function(l){return cl(this,{type:"Point",coordinates:yg(this.getLatLng(),l)})}};gh.include(bg),vg.include(bg),vh.include(bg),Ti.include({toGeoJSON:function(l){var g=!Xs(this._latlngs),S=bh(this._latlngs,g?1:0,!1,l);return cl(this,{type:(g?"Multi":"")+"LineString",coordinates:S})}}),ll.include({toGeoJSON:function(l){var g=!Xs(this._latlngs),S=g&&!Xs(this._latlngs[0]),D=bh(this._latlngs,S?2:g?1:0,!0,l);return g||(D=[D]),cl(this,{type:(S?"Multi":"")+"Polygon",coordinates:D})}}),al.include({toMultiPoint:function(l){var g=[];return this.eachLayer(function(S){g.push(S.toGeoJSON(l).geometry.coordinates)}),cl(this,{type:"MultiPoint",coordinates:g})},toGeoJSON:function(l){var g=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(g==="MultiPoint")return this.toMultiPoint(l);var S=g==="GeometryCollection",D=[];return this.eachLayer(function(q){if(q.toGeoJSON){var J=q.toGeoJSON(l);if(S)D.push(J.geometry);else{var ce=wh(J);ce.type==="FeatureCollection"?D.push.apply(D,ce.features):D.push(ce)}}}),S?cl(this,{geometries:D,type:"GeometryCollection"}):{type:"FeatureCollection",features:D}}});function _j(l,g){return new Ai(l,g)}var P5=_j,jh=xr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,g,S){this._url=l,this._bounds=Z(g),v(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(yt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){an(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&rl(this._image),this},bringToBack:function(){return this._map&&il(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=Z(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",g=this._image=l?this._url:Rt("img");if(yt(g,"leaflet-image-layer"),this._zoomAnimated&&yt(g,"leaflet-zoom-animated"),this.options.className&&yt(g,this.options.className),g.onselectstart=h,g.onmousemove=h,g.onload=o(this.fire,this,"load"),g.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=g.src;return}g.src=this._url,g.alt=this.options.alt},_animateZoom:function(l){var g=this._map.getZoomScale(l.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;ao(this._image,S,g)},_reset:function(){var l=this._image,g=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=g.getSize();En(l,g.min),l.style.width=S.x+"px",l.style.height=S.y+"px"},_updateOpacity:function(){Ys(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),E5=function(l,g,S){return new jh(l,g,S)},Nj=jh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",g=this._image=l?this._url:Rt("video");if(yt(g,"leaflet-image-layer"),this._zoomAnimated&&yt(g,"leaflet-zoom-animated"),this.options.className&&yt(g,this.options.className),g.onselectstart=h,g.onmousemove=h,g.onloadeddata=o(this.fire,this,"load"),l){for(var S=g.getElementsByTagName("source"),D=[],q=0;q<S.length;q++)D.push(S[q].src);this._url=S.length>0?D:[g.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(g.style,"objectFit")&&(g.style.objectFit="fill"),g.autoplay=!!this.options.autoplay,g.loop=!!this.options.loop,g.muted=!!this.options.muted,g.playsInline=!!this.options.playsInline;for(var J=0;J<this._url.length;J++){var ce=Rt("source");ce.src=this._url[J],g.appendChild(ce)}}});function T5(l,g,S){return new Nj(l,g,S)}var Sj=jh.extend({_initImage:function(){var l=this._image=this._url;yt(l,"leaflet-image-layer"),this._zoomAnimated&&yt(l,"leaflet-zoom-animated"),this.options.className&&yt(l,this.options.className),l.onselectstart=h,l.onmousemove=h}});function A5(l,g,S){return new Sj(l,g,S)}var Yr=xr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,g){l&&(l instanceof X||_(l))?(this._latlng=V(l),v(this,g)):(v(this,l),this._source=g),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Ys(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Ys(this._container,1),this.bringToFront(),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Ys(this._container,0),this._removeTimeout=setTimeout(o(an,void 0,this._container),200)):an(this._container),this.options.interactive&&(yn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=V(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rl(this._container),this},bringToBack:function(){return this._map&&il(this._container),this},_prepareOpen:function(l){var g=this._source;if(!g._map)return!1;if(g instanceof Ei){g=null;var S=this._source._layers;for(var D in S)if(S[D]._map){g=S[D];break}if(!g)return!1;this._source=g}if(!l)if(g.getCenter)l=g.getCenter();else if(g.getLatLng)l=g.getLatLng();else if(g.getBounds)l=g.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,g=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof g=="string")l.innerHTML=g;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(g)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),g=B(this.options.offset),S=this._getAnchor();this._zoomAnimated?En(this._container,l.add(S)):g=g.add(l).add(S);var D=this._containerBottom=-g.y,q=this._containerLeft=-Math.round(this._containerWidth/2)+g.x;this._container.style.bottom=D+"px",this._container.style.left=q+"px"}},_getAnchor:function(){return[0,0]}});Tt.include({_initOverlay:function(l,g,S,D){var q=g;return q instanceof l||(q=new l(D).setContent(g)),S&&q.setLatLng(S),q}}),xr.include({_initOverlay:function(l,g,S,D){var q=S;return q instanceof l?(v(q,D),q._source=this):(q=g&&!D?g:new l(D,this),q.setContent(S)),q}});var _h=Yr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Yr.prototype.openOn.call(this,l)},onAdd:function(l){Yr.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof la||this._source.on("preclick",lo))},onRemove:function(l){Yr.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof la||this._source.off("preclick",lo))},getEvents:function(){var l=Yr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",g=this._container=Rt("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=Rt("div",l+"-content-wrapper",g);if(this._contentNode=Rt("div",l+"-content",S),id(g),cg(this._contentNode),pt(g,"contextmenu",lo),this._tipContainer=Rt("div",l+"-tip-container",g),this._tip=Rt("div",l+"-tip",this._tipContainer),this.options.closeButton){var D=this._closeButton=Rt("a",l+"-close-button",g);D.setAttribute("role","button"),D.setAttribute("aria-label","Close popup"),D.href="#close",D.innerHTML='<span aria-hidden="true">&#215;</span>',pt(D,"click",function(q){Un(q),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,g=l.style;g.width="",g.whiteSpace="nowrap";var S=l.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),g.width=S+1+"px",g.whiteSpace="",g.height="";var D=l.offsetHeight,q=this.options.maxHeight,J="leaflet-popup-scrolled";q&&D>q?(g.height=q+"px",yt(l,J)):yn(l,J),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var g=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),S=this._getAnchor();En(this._container,g.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,g=parseInt(td(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+g,D=this._containerWidth,q=new K(this._containerLeft,-S-this._containerBottom);q._add(oo(this._container));var J=l.layerPointToContainerPoint(q),ce=B(this.options.autoPanPadding),pe=B(this.options.autoPanPaddingTopLeft||ce),ye=B(this.options.autoPanPaddingBottomRight||ce),Pe=l.getSize(),Ue=0,ot=0;J.x+D+ye.x>Pe.x&&(Ue=J.x+D-Pe.x+ye.x),J.x-Ue-pe.x<0&&(Ue=J.x-pe.x),J.y+S+ye.y>Pe.y&&(ot=J.y+S-Pe.y+ye.y),J.y-ot-pe.y<0&&(ot=J.y-pe.y),(Ue||ot)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Ue,ot]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),O5=function(l,g){return new _h(l,g)};Tt.mergeOptions({closePopupOnClick:!0}),Tt.include({openPopup:function(l,g,S){return this._initOverlay(_h,l,g,S).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),xr.include({bindPopup:function(l,g){return this._popup=this._initOverlay(_h,this._popup,l,g),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Ei||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){co(l);var g=l.layer||l.target;if(this._popup._source===g&&!(g instanceof la)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=g,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Nh=Yr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Yr.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Yr.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Yr.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",g=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Rt("div",g),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var g,S,D=this._map,q=this._container,J=D.latLngToContainerPoint(D.getCenter()),ce=D.layerPointToContainerPoint(l),pe=this.options.direction,ye=q.offsetWidth,Pe=q.offsetHeight,Ue=B(this.options.offset),ot=this._getAnchor();pe==="top"?(g=ye/2,S=Pe):pe==="bottom"?(g=ye/2,S=0):pe==="center"?(g=ye/2,S=Pe/2):pe==="right"?(g=0,S=Pe/2):pe==="left"?(g=ye,S=Pe/2):ce.x<J.x?(pe="right",g=0,S=Pe/2):(pe="left",g=ye+(Ue.x+ot.x)*2,S=Pe/2),l=l.subtract(B(g,S,!0)).add(Ue).add(ot),yn(q,"leaflet-tooltip-right"),yn(q,"leaflet-tooltip-left"),yn(q,"leaflet-tooltip-top"),yn(q,"leaflet-tooltip-bottom"),yt(q,"leaflet-tooltip-"+pe),En(q,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Ys(this._container,l)},_animateZoom:function(l){var g=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(g)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),R5=function(l,g){return new Nh(l,g)};Tt.include({openTooltip:function(l,g,S){return this._initOverlay(Nh,l,g,S).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),xr.include({bindTooltip:function(l,g){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Nh,this._tooltip,l,g),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var g=l?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[g](S),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Ei||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var g=typeof l.getElement=="function"&&l.getElement();g&&(pt(g,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),pt(g,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var g=typeof l.getElement=="function"&&l.getElement();g&&g.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var g=this;this._map.once("moveend",function(){g._openOnceFlag=!1,g._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var g=l.latlng,S,D;this._tooltip.options.sticky&&l.originalEvent&&(S=this._map.mouseEventToContainerPoint(l.originalEvent),D=this._map.containerPointToLayerPoint(S),g=this._map.layerPointToLatLng(D)),this._tooltip.setLatLng(g)}});var kj=ol.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var g=l&&l.tagName==="DIV"?l:document.createElement("div"),S=this.options;if(S.html instanceof Element?(dh(g),g.appendChild(S.html)):g.innerHTML=S.html!==!1?S.html:"",S.bgPos){var D=B(S.bgPos);g.style.backgroundPosition=-D.x+"px "+-D.y+"px"}return this._setIconStyles(g,"icon"),g},createShadow:function(){return null}});function L5(l){return new kj(l)}ol.Default=ld;var cd=xr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:nt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){v(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),an(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rl(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(il(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof K?l:new K(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var g=this.getPane().children,S=-l(-1/0,1/0),D=0,q=g.length,J;D<q;D++)J=g[D].style.zIndex,g[D]!==this._container&&J&&(S=l(S,+J));isFinite(S)&&(this.options.zIndex=S+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!nt.ielt9){Ys(this._container,this.options.opacity);var l=+new Date,g=!1,S=!1;for(var D in this._tiles){var q=this._tiles[D];if(!(!q.current||!q.loaded)){var J=Math.min(1,(l-q.loaded)/200);Ys(q.el,J),J<1?g=!0:(q.active?S=!0:this._onOpaqueTile(q),q.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),g&&(A(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=Rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,g=this.options.maxZoom;if(l!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===l?(this._levels[S].el.style.zIndex=g-Math.abs(l-S),this._onUpdateLevel(S)):(an(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var D=this._levels[l],q=this._map;return D||(D=this._levels[l]={},D.el=Rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),D.el.style.zIndex=g,D.origin=q.project(q.unproject(q.getPixelOrigin()),l).round(),D.zoom=l,this._setZoomTransform(D,q.getCenter(),q.getZoom()),h(D.el.offsetWidth),this._onCreateLevel(D)),this._level=D,D}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var l,g,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)g=this._tiles[l],g.retain=g.current;for(l in this._tiles)if(g=this._tiles[l],g.current&&!g.active){var D=g.coords;this._retainParent(D.x,D.y,D.z,D.z-5)||this._retainChildren(D.x,D.y,D.z,D.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var g in this._tiles)this._tiles[g].coords.z===l&&this._removeTile(g)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)an(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,g,S,D){var q=Math.floor(l/2),J=Math.floor(g/2),ce=S-1,pe=new K(+q,+J);pe.z=+ce;var ye=this._tileCoordsToKey(pe),Pe=this._tiles[ye];return Pe&&Pe.active?(Pe.retain=!0,!0):(Pe&&Pe.loaded&&(Pe.retain=!0),ce>D?this._retainParent(q,J,ce,D):!1)},_retainChildren:function(l,g,S,D){for(var q=2*l;q<2*l+2;q++)for(var J=2*g;J<2*g+2;J++){var ce=new K(q,J);ce.z=S+1;var pe=this._tileCoordsToKey(ce),ye=this._tiles[pe];if(ye&&ye.active){ye.retain=!0;continue}else ye&&ye.loaded&&(ye.retain=!0);S+1<D&&this._retainChildren(q,J,S+1,D)}},_resetView:function(l){var g=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),g,g)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var g=this.options;return g.minNativeZoom!==void 0&&l<g.minNativeZoom?g.minNativeZoom:g.maxNativeZoom!==void 0&&g.maxNativeZoom<l?g.maxNativeZoom:l},_setView:function(l,g,S,D){var q=Math.round(g);this.options.maxZoom!==void 0&&q>this.options.maxZoom||this.options.minZoom!==void 0&&q<this.options.minZoom?q=void 0:q=this._clampZoom(q);var J=this.options.updateWhenZooming&&q!==this._tileZoom;(!D||J)&&(this._tileZoom=q,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),q!==void 0&&this._update(l),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(l,g)},_setZoomTransforms:function(l,g){for(var S in this._levels)this._setZoomTransform(this._levels[S],l,g)},_setZoomTransform:function(l,g,S){var D=this._map.getZoomScale(S,l.zoom),q=l.origin.multiplyBy(D).subtract(this._map._getNewPixelOrigin(g,S)).round();nt.any3d?ao(l.el,q,D):En(l.el,q)},_resetGrid:function(){var l=this._map,g=l.options.crs,S=this._tileSize=this.getTileSize(),D=this._tileZoom,q=this._map.getPixelWorldBounds(this._tileZoom);q&&(this._globalTileRange=this._pxBoundsToTileRange(q)),this._wrapX=g.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,g.wrapLng[0]],D).x/S.x),Math.ceil(l.project([0,g.wrapLng[1]],D).x/S.y)],this._wrapY=g.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([g.wrapLat[0],0],D).y/S.x),Math.ceil(l.project([g.wrapLat[1],0],D).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var g=this._map,S=g._animatingZoom?Math.max(g._animateToZoom,g.getZoom()):g.getZoom(),D=g.getZoomScale(S,this._tileZoom),q=g.project(l,this._tileZoom).floor(),J=g.getSize().divideBy(D*2);return new R(q.subtract(J),q.add(J))},_update:function(l){var g=this._map;if(g){var S=this._clampZoom(g.getZoom());if(l===void 0&&(l=g.getCenter()),this._tileZoom!==void 0){var D=this._getTiledPixelBounds(l),q=this._pxBoundsToTileRange(D),J=q.getCenter(),ce=[],pe=this.options.keepBuffer,ye=new R(q.getBottomLeft().subtract([pe,-pe]),q.getTopRight().add([pe,-pe]));if(!(isFinite(q.min.x)&&isFinite(q.min.y)&&isFinite(q.max.x)&&isFinite(q.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Pe in this._tiles){var Ue=this._tiles[Pe].coords;(Ue.z!==this._tileZoom||!ye.contains(new K(Ue.x,Ue.y)))&&(this._tiles[Pe].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(l,S);return}for(var ot=q.min.y;ot<=q.max.y;ot++)for(var Nt=q.min.x;Nt<=q.max.x;Nt++){var cs=new K(Nt,ot);if(cs.z=this._tileZoom,!!this._isValidTile(cs)){var $n=this._tiles[this._tileCoordsToKey(cs)];$n?$n.current=!0:ce.push(cs)}}if(ce.sort(function(ks,ul){return ks.distanceTo(J)-ul.distanceTo(J)}),ce.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qs=document.createDocumentFragment();for(Nt=0;Nt<ce.length;Nt++)this._addTile(ce[Nt],Qs);this._level.el.appendChild(Qs)}}}},_isValidTile:function(l){var g=this._map.options.crs;if(!g.infinite){var S=this._globalTileRange;if(!g.wrapLng&&(l.x<S.min.x||l.x>S.max.x)||!g.wrapLat&&(l.y<S.min.y||l.y>S.max.y))return!1}if(!this.options.bounds)return!0;var D=this._tileCoordsToBounds(l);return Z(this.options.bounds).overlaps(D)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var g=this._map,S=this.getTileSize(),D=l.scaleBy(S),q=D.add(S),J=g.unproject(D,l.z),ce=g.unproject(q,l.z);return[J,ce]},_tileCoordsToBounds:function(l){var g=this._tileCoordsToNwSe(l),S=new W(g[0],g[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var g=l.split(":"),S=new K(+g[0],+g[1]);return S.z=+g[2],S},_removeTile:function(l){var g=this._tiles[l];g&&(an(g.el),delete this._tiles[l],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){yt(l,"leaflet-tile");var g=this.getTileSize();l.style.width=g.x+"px",l.style.height=g.y+"px",l.onselectstart=h,l.onmousemove=h,nt.ielt9&&this.options.opacity<1&&Ys(l,this.options.opacity)},_addTile:function(l,g){var S=this._getTilePos(l),D=this._tileCoordsToKey(l),q=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(q),this.createTile.length<2&&T(o(this._tileReady,this,l,null,q)),En(q,S),this._tiles[D]={el:q,coords:l,current:!0},g.appendChild(q),this.fire("tileloadstart",{tile:q,coords:l})},_tileReady:function(l,g,S){g&&this.fire("tileerror",{error:g,tile:S,coords:l});var D=this._tileCoordsToKey(l);S=this._tiles[D],S&&(S.loaded=+new Date,this._map._fadeAnimated?(Ys(S.el,0),A(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),g||(yt(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),nt.ielt9||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var g=new K(this._wrapX?m(l.x,this._wrapX):l.x,this._wrapY?m(l.y,this._wrapY):l.y);return g.z=l.z,g},_pxBoundsToTileRange:function(l){var g=this.getTileSize();return new R(l.min.unscaleBy(g).floor(),l.max.unscaleBy(g).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function M5(l){return new cd(l)}var dl=cd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,g){this._url=l,g=v(this,g),g.detectRetina&&nt.retina&&g.maxZoom>0?(g.tileSize=Math.floor(g.tileSize/2),g.zoomReverse?(g.zoomOffset--,g.minZoom=Math.min(g.maxZoom,g.minZoom+1)):(g.zoomOffset++,g.maxZoom=Math.max(g.minZoom,g.maxZoom-1)),g.minZoom=Math.max(0,g.minZoom)):g.zoomReverse?g.minZoom=Math.min(g.maxZoom,g.minZoom):g.maxZoom=Math.max(g.minZoom,g.maxZoom),typeof g.subdomains=="string"&&(g.subdomains=g.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,g){return this._url===l&&g===void 0&&(g=!0),this._url=l,g||this.redraw(),this},createTile:function(l,g){var S=document.createElement("img");return pt(S,"load",o(this._tileOnLoad,this,g,S)),pt(S,"error",o(this._tileOnError,this,g,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(l),S},getTileUrl:function(l){var g={r:nt.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-l.y;this.options.tms&&(g.y=S),g["-y"]=S}return b(this._url,i(g,this.options))},_tileOnLoad:function(l,g){nt.ielt9?setTimeout(o(l,this,null,g),0):l(null,g)},_tileOnError:function(l,g,S){var D=this.options.errorTileUrl;D&&g.getAttribute("src")!==D&&(g.src=D),l(S,g)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,g=this.options.maxZoom,S=this.options.zoomReverse,D=this.options.zoomOffset;return S&&(l=g-l),l+D},_getSubdomain:function(l){var g=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[g]},_abortLoading:function(){var l,g;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(g=this._tiles[l].el,g.onload=h,g.onerror=h,!g.complete)){g.src=C;var S=this._tiles[l].coords;an(g),delete this._tiles[l],this.fire("tileabort",{tile:g,coords:S})}},_removeTile:function(l){var g=this._tiles[l];if(g)return g.el.setAttribute("src",C),cd.prototype._removeTile.call(this,l)},_tileReady:function(l,g,S){if(!(!this._map||S&&S.getAttribute("src")===C))return cd.prototype._tileReady.call(this,l,g,S)}});function Cj(l,g){return new dl(l,g)}var Pj=dl.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,g){this._url=l;var S=i({},this.defaultWmsParams);for(var D in g)D in this.options||(S[D]=g[D]);g=v(this,g);var q=g.detectRetina&&nt.retina?2:1,J=this.getTileSize();S.width=J.x*q,S.height=J.y*q,this.wmsParams=S},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var g=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[g]=this._crs.code,dl.prototype.onAdd.call(this,l)},getTileUrl:function(l){var g=this._tileCoordsToNwSe(l),S=this._crs,D=$(S.project(g[0]),S.project(g[1])),q=D.min,J=D.max,ce=(this._wmsVersion>=1.3&&this._crs===bj?[q.y,q.x,J.y,J.x]:[q.x,q.y,J.x,J.y]).join(","),pe=dl.prototype.getTileUrl.call(this,l);return pe+w(this.wmsParams,pe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ce},setParams:function(l,g){return i(this.wmsParams,l),g||this.redraw(),this}});function I5(l,g){return new Pj(l,g)}dl.WMS=Pj,Cj.wms=I5;var Oi=xr.extend({options:{padding:.1},initialize:function(l){v(this,l),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),yt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,g){var S=this._map.getZoomScale(g,this._zoom),D=this._map.getSize().multiplyBy(.5+this.options.padding),q=this._map.project(this._center,g),J=D.multiplyBy(-S).add(q).subtract(this._map._getNewPixelOrigin(l,g));nt.any3d?ao(this._container,J,S):En(this._container,J)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,g=this._map.getSize(),S=this._map.containerPointToLayerPoint(g.multiplyBy(-l)).round();this._bounds=new R(S,S.add(g.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ej=Oi.extend({options:{tolerance:0},getEvents:function(){var l=Oi.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Oi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");pt(l,"mousemove",this._onMouseMove,this),pt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),pt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,an(this._container),Ht(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var g in this._layers)l=this._layers[g],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var l=this._bounds,g=this._container,S=l.getSize(),D=nt.retina?2:1;En(g,l.min),g.width=D*S.x,g.height=D*S.y,g.style.width=S.x+"px",g.style.height=S.y+"px",nt.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Oi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[d(l)]=l;var g=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=g),this._drawLast=g,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var g=l._order,S=g.next,D=g.prev;S?S.prev=D:this._drawLast=D,D?D.next=S:this._drawFirst=S,delete l._order,delete this._layers[d(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var g=l.options.dashArray.split(/[, ]+/),S=[],D,q;for(q=0;q<g.length;q++){if(D=Number(g[q]),isNaN(D))return;S.push(D)}l.options._dashArray=S}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var g=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(l._pxBounds.min.subtract([g,g])),this._redrawBounds.extend(l._pxBounds.max.add([g,g]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var g=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,g.x,g.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,g=this._redrawBounds;if(this._ctx.save(),g){var S=g.getSize();this._ctx.beginPath(),this._ctx.rect(g.min.x,g.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var D=this._drawFirst;D;D=D.next)l=D.layer,(!g||l._pxBounds&&l._pxBounds.intersects(g))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,g){if(this._drawing){var S,D,q,J,ce=l._parts,pe=ce.length,ye=this._ctx;if(pe){for(ye.beginPath(),S=0;S<pe;S++){for(D=0,q=ce[S].length;D<q;D++)J=ce[S][D],ye[D?"lineTo":"moveTo"](J.x,J.y);g&&ye.closePath()}this._fillStroke(ye,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var g=l._point,S=this._ctx,D=Math.max(Math.round(l._radius),1),q=(Math.max(Math.round(l._radiusY),1)||D)/D;q!==1&&(S.save(),S.scale(1,q)),S.beginPath(),S.arc(g.x,g.y/q,D,0,Math.PI*2,!1),q!==1&&S.restore(),this._fillStroke(S,l)}},_fillStroke:function(l,g){var S=g.options;S.fill&&(l.globalAlpha=S.fillOpacity,l.fillStyle=S.fillColor||S.color,l.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(l.setLineDash&&l.setLineDash(g.options&&g.options._dashArray||[]),l.globalAlpha=S.opacity,l.lineWidth=S.weight,l.strokeStyle=S.color,l.lineCap=S.lineCap,l.lineJoin=S.lineJoin,l.stroke())},_onClick:function(l){for(var g=this._map.mouseEventToLayerPoint(l),S,D,q=this._drawFirst;q;q=q.next)S=q.layer,S.options.interactive&&S._containsPoint(g)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(S))&&(D=S);this._fireEvent(D?[D]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var g=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,g)}},_handleMouseOut:function(l){var g=this._hoveredLayer;g&&(yn(this._container,"leaflet-interactive"),this._fireEvent([g],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,g){if(!this._mouseHoverThrottled){for(var S,D,q=this._drawFirst;q;q=q.next)S=q.layer,S.options.interactive&&S._containsPoint(g)&&(D=S);D!==this._hoveredLayer&&(this._handleMouseOut(l),D&&(yt(this._container,"leaflet-interactive"),this._fireEvent([D],l,"mouseover"),this._hoveredLayer=D)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,g,S){this._map._fireDOMEvent(g,S||g.type,l)},_bringToFront:function(l){var g=l._order;if(g){var S=g.next,D=g.prev;if(S)S.prev=D;else return;D?D.next=S:S&&(this._drawFirst=S),g.prev=this._drawLast,this._drawLast.next=g,g.next=null,this._drawLast=g,this._requestRedraw(l)}},_bringToBack:function(l){var g=l._order;if(g){var S=g.next,D=g.prev;if(D)D.next=S;else return;S?S.prev=D:D&&(this._drawLast=D),g.prev=null,g.next=this._drawFirst,this._drawFirst.prev=g,this._drawFirst=g,this._requestRedraw(l)}}});function Tj(l){return nt.canvas?new Ej(l):null}var dd=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),D5={_initContainer:function(){this._container=Rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Oi.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var g=l._container=dd("shape");yt(g,"leaflet-vml-shape "+(this.options.className||"")),g.coordsize="1 1",l._path=dd("path"),g.appendChild(l._path),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){var g=l._container;this._container.appendChild(g),l.options.interactive&&l.addInteractiveTarget(g)},_removePath:function(l){var g=l._container;an(g),l.removeInteractiveTarget(g),delete this._layers[d(l)]},_updateStyle:function(l){var g=l._stroke,S=l._fill,D=l.options,q=l._container;q.stroked=!!D.stroke,q.filled=!!D.fill,D.stroke?(g||(g=l._stroke=dd("stroke")),q.appendChild(g),g.weight=D.weight+"px",g.color=D.color,g.opacity=D.opacity,D.dashArray?g.dashStyle=_(D.dashArray)?D.dashArray.join(" "):D.dashArray.replace(/( *, *)/g," "):g.dashStyle="",g.endcap=D.lineCap.replace("butt","flat"),g.joinstyle=D.lineJoin):g&&(q.removeChild(g),l._stroke=null),D.fill?(S||(S=l._fill=dd("fill")),q.appendChild(S),S.color=D.fillColor||D.color,S.opacity=D.fillOpacity):S&&(q.removeChild(S),l._fill=null)},_updateCircle:function(l){var g=l._point.round(),S=Math.round(l._radius),D=Math.round(l._radiusY||S);this._setPath(l,l._empty()?"M0 0":"AL "+g.x+","+g.y+" "+S+","+D+" 0,"+65535*360)},_setPath:function(l,g){l._path.v=g},_bringToFront:function(l){rl(l._container)},_bringToBack:function(l){il(l._container)}},Sh=nt.vml?dd:fe,ud=Oi.extend({_initContainer:function(){this._container=Sh("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Sh("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){an(this._container),Ht(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var l=this._bounds,g=l.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(g))&&(this._svgSize=g,S.setAttribute("width",g.x),S.setAttribute("height",g.y)),En(S,l.min),S.setAttribute("viewBox",[l.min.x,l.min.y,g.x,g.y].join(" ")),this.fire("update")}},_initPath:function(l){var g=l._path=Sh("path");l.options.className&&yt(g,l.options.className),l.options.interactive&&yt(g,"leaflet-interactive"),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){an(l._path),l.removeInteractiveTarget(l._path),delete this._layers[d(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var g=l._path,S=l.options;g&&(S.stroke?(g.setAttribute("stroke",S.color),g.setAttribute("stroke-opacity",S.opacity),g.setAttribute("stroke-width",S.weight),g.setAttribute("stroke-linecap",S.lineCap),g.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?g.setAttribute("stroke-dasharray",S.dashArray):g.removeAttribute("stroke-dasharray"),S.dashOffset?g.setAttribute("stroke-dashoffset",S.dashOffset):g.removeAttribute("stroke-dashoffset")):g.setAttribute("stroke","none"),S.fill?(g.setAttribute("fill",S.fillColor||S.color),g.setAttribute("fill-opacity",S.fillOpacity),g.setAttribute("fill-rule",S.fillRule||"evenodd")):g.setAttribute("fill","none"))},_updatePoly:function(l,g){this._setPath(l,ke(l._parts,g))},_updateCircle:function(l){var g=l._point,S=Math.max(Math.round(l._radius),1),D=Math.max(Math.round(l._radiusY),1)||S,q="a"+S+","+D+" 0 1,0 ",J=l._empty()?"M0 0":"M"+(g.x-S)+","+g.y+q+S*2+",0 "+q+-S*2+",0 ";this._setPath(l,J)},_setPath:function(l,g){l._path.setAttribute("d",g)},_bringToFront:function(l){rl(l._path)},_bringToBack:function(l){il(l._path)}});nt.vml&&ud.include(D5);function Aj(l){return nt.svg||nt.vml?new ud(l):null}Tt.include({getRenderer:function(l){var g=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return g||(g=this._renderer=this._createRenderer()),this.hasLayer(g)||this.addLayer(g),g},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var g=this._paneRenderers[l];return g===void 0&&(g=this._createRenderer({pane:l}),this._paneRenderers[l]=g),g},_createRenderer:function(l){return this.options.preferCanvas&&Tj(l)||Aj(l)}});var Oj=ll.extend({initialize:function(l,g){ll.prototype.initialize.call(this,this._boundsToLatLngs(l),g)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=Z(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function F5(l,g){return new Oj(l,g)}ud.create=Sh,ud.pointsToPath=ke,Ai.geometryToLayer=xh,Ai.coordsToLatLng=xg,Ai.coordsToLatLngs=yh,Ai.latLngToCoords=yg,Ai.latLngsToCoords=bh,Ai.getFeature=cl,Ai.asFeature=wh,Tt.mergeOptions({boxZoom:!0});var Rj=Kr.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){pt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ht(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){an(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),nd(),tg(),this._startPoint=this._map.mouseEventToContainerPoint(l),pt(document,{contextmenu:co,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Rt("div","leaflet-zoom-box",this._container),yt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var g=new R(this._point,this._startPoint),S=g.getSize();En(this._box,g.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(an(this._box),yn(this._container,"leaflet-crosshair")),sd(),ng(),Ht(document,{contextmenu:co,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var g=new W(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(g).fire("boxzoomend",{boxZoomBounds:g})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Tt.addInitHook("addHandler","boxZoom",Rj),Tt.mergeOptions({doubleClickZoom:!0});var Lj=Kr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var g=this._map,S=g.getZoom(),D=g.options.zoomDelta,q=l.originalEvent.shiftKey?S-D:S+D;g.options.doubleClickZoom==="center"?g.setZoom(q):g.setZoomAround(l.containerPoint,q)}});Tt.addInitHook("addHandler","doubleClickZoom",Lj),Tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Mj=Kr.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new oa(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}yt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yn(this._map._container,"leaflet-grab"),yn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var g=Z(this._map.options.maxBounds);this._offsetLimit=$(this._map.latLngToContainerPoint(g.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(g.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var g=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(g),this._prunePositions(g)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),g=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=g.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,g){return l-(l-g)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),g=this._offsetLimit;l.x<g.min.x&&(l.x=this._viscousLimit(l.x,g.min.x)),l.y<g.min.y&&(l.y=this._viscousLimit(l.y,g.min.y)),l.x>g.max.x&&(l.x=this._viscousLimit(l.x,g.max.x)),l.y>g.max.y&&(l.y=this._viscousLimit(l.y,g.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,g=Math.round(l/2),S=this._initialWorldOffset,D=this._draggable._newPos.x,q=(D-g+S)%l+g-S,J=(D+g+S)%l-g-S,ce=Math.abs(q+S)<Math.abs(J+S)?q:J;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ce},_onDragEnd:function(l){var g=this._map,S=g.options,D=!S.inertia||l.noInertia||this._times.length<2;if(g.fire("dragend",l),D)g.fire("moveend");else{this._prunePositions(+new Date);var q=this._lastPos.subtract(this._positions[0]),J=(this._lastTime-this._times[0])/1e3,ce=S.easeLinearity,pe=q.multiplyBy(ce/J),ye=pe.distanceTo([0,0]),Pe=Math.min(S.inertiaMaxSpeed,ye),Ue=pe.multiplyBy(Pe/ye),ot=Pe/(S.inertiaDeceleration*ce),Nt=Ue.multiplyBy(-ot/2).round();!Nt.x&&!Nt.y?g.fire("moveend"):(Nt=g._limitOffset(Nt,g.options.maxBounds),T(function(){g.panBy(Nt,{duration:ot,easeLinearity:ce,noMoveStart:!0,animate:!0})}))}}});Tt.addInitHook("addHandler","dragging",Mj),Tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ij=Kr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),pt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ht(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,g=document.documentElement,S=l.scrollTop||g.scrollTop,D=l.scrollLeft||g.scrollLeft;this._map._container.focus(),window.scrollTo(D,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var g=this._panKeys={},S=this.keyCodes,D,q;for(D=0,q=S.left.length;D<q;D++)g[S.left[D]]=[-1*l,0];for(D=0,q=S.right.length;D<q;D++)g[S.right[D]]=[l,0];for(D=0,q=S.down.length;D<q;D++)g[S.down[D]]=[0,l];for(D=0,q=S.up.length;D<q;D++)g[S.up[D]]=[0,-1*l]},_setZoomDelta:function(l){var g=this._zoomKeys={},S=this.keyCodes,D,q;for(D=0,q=S.zoomIn.length;D<q;D++)g[S.zoomIn[D]]=l;for(D=0,q=S.zoomOut.length;D<q;D++)g[S.zoomOut[D]]=-l},_addHooks:function(){pt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ht(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var g=l.keyCode,S=this._map,D;if(g in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(D=this._panKeys[g],l.shiftKey&&(D=B(D).multiplyBy(3)),S.options.maxBounds&&(D=S._limitOffset(B(D),S.options.maxBounds)),S.options.worldCopyJump){var q=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(D)));S.panTo(q)}else S.panBy(D)}else if(g in this._zoomKeys)S.setZoom(S.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[g]);else if(g===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;co(l)}}});Tt.addInitHook("addHandler","keyboard",Ij),Tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Dj=Kr.extend({addHooks:function(){pt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ht(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var g=oj(l),S=this._map.options.wheelDebounceTime;this._delta+=g,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var D=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),D),co(l)},_performZoom:function(){var l=this._map,g=l.getZoom(),S=this._map.options.zoomSnap||0;l._stop();var D=this._delta/(this._map.options.wheelPxPerZoomLevel*4),q=4*Math.log(2/(1+Math.exp(-Math.abs(D))))/Math.LN2,J=S?Math.ceil(q/S)*S:q,ce=l._limitZoom(g+(this._delta>0?J:-J))-g;this._delta=0,this._startTime=null,ce&&(l.options.scrollWheelZoom==="center"?l.setZoom(g+ce):l.setZoomAround(this._lastMousePos,g+ce))}});Tt.addInitHook("addHandler","scrollWheelZoom",Dj);var $5=600;Tt.mergeOptions({tapHold:nt.touchNative&&nt.safari&&nt.mobile,tapTolerance:15});var Fj=Kr.extend({addHooks:function(){pt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ht(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var g=l.touches[0];this._startPos=this._newPos=new K(g.clientX,g.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(pt(document,"touchend",Un),pt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",g))},this),$5),pt(document,"touchend touchcancel contextmenu",this._cancel,this),pt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Ht(document,"touchend",Un),Ht(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Ht(document,"touchend touchcancel contextmenu",this._cancel,this),Ht(document,"touchmove",this._onMove,this)},_onMove:function(l){var g=l.touches[0];this._newPos=new K(g.clientX,g.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,g){var S=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY});S._simulated=!0,g.target.dispatchEvent(S)}});Tt.addInitHook("addHandler","tapHold",Fj),Tt.mergeOptions({touchZoom:nt.touch,bounceAtZoomLimits:!0});var $j=Kr.extend({addHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),pt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yn(this._map._container,"leaflet-touch-zoom"),Ht(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var g=this._map;if(!(!l.touches||l.touches.length!==2||g._animatingZoom||this._zooming)){var S=g.mouseEventToContainerPoint(l.touches[0]),D=g.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=g.getSize()._divideBy(2),this._startLatLng=g.containerPointToLatLng(this._centerPoint),g.options.touchZoom!=="center"&&(this._pinchStartLatLng=g.containerPointToLatLng(S.add(D)._divideBy(2))),this._startDist=S.distanceTo(D),this._startZoom=g.getZoom(),this._moved=!1,this._zooming=!0,g._stop(),pt(document,"touchmove",this._onTouchMove,this),pt(document,"touchend touchcancel",this._onTouchEnd,this),Un(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var g=this._map,S=g.mouseEventToContainerPoint(l.touches[0]),D=g.mouseEventToContainerPoint(l.touches[1]),q=S.distanceTo(D)/this._startDist;if(this._zoom=g.getScaleZoom(q,this._startZoom),!g.options.bounceAtZoomLimits&&(this._zoom<g.getMinZoom()&&q<1||this._zoom>g.getMaxZoom()&&q>1)&&(this._zoom=g._limitZoom(this._zoom)),g.options.touchZoom==="center"){if(this._center=this._startLatLng,q===1)return}else{var J=S._add(D)._divideBy(2)._subtract(this._centerPoint);if(q===1&&J.x===0&&J.y===0)return;this._center=g.unproject(g.project(this._pinchStartLatLng,this._zoom).subtract(J),this._zoom)}this._moved||(g._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var ce=o(g._move,g,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=T(ce,this,!0),Un(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),Ht(document,"touchmove",this._onTouchMove,this),Ht(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Tt.addInitHook("addHandler","touchZoom",$j),Tt.BoxZoom=Rj,Tt.DoubleClickZoom=Lj,Tt.Drag=Mj,Tt.Keyboard=Ij,Tt.ScrollWheelZoom=Dj,Tt.TapHold=Fj,Tt.TouchZoom=$j,s.Bounds=R,s.Browser=nt,s.CRS=H,s.Canvas=Ej,s.Circle=vg,s.CircleMarker=vh,s.Class=O,s.Control=vr,s.DivIcon=kj,s.DivOverlay=Yr,s.DomEvent=s5,s.DomUtil=t5,s.Draggable=oa,s.Evented=Y,s.FeatureGroup=Ei,s.GeoJSON=Ai,s.GridLayer=cd,s.Handler=Kr,s.Icon=ol,s.ImageOverlay=jh,s.LatLng=X,s.LatLngBounds=W,s.Layer=xr,s.LayerGroup=al,s.LineUtil=g5,s.Map=Tt,s.Marker=gh,s.Mixin=d5,s.Path=la,s.Point=K,s.PolyUtil=u5,s.Polygon=ll,s.Polyline=Ti,s.Popup=_h,s.PosAnimation=lj,s.Projection=v5,s.Rectangle=Oj,s.Renderer=Oi,s.SVG=ud,s.SVGOverlay=Sj,s.TileLayer=dl,s.Tooltip=Nh,s.Transformation=he,s.Util=z,s.VideoOverlay=Nj,s.bind=o,s.bounds=$,s.canvas=Tj,s.circle=S5,s.circleMarker=N5,s.control=ad,s.divIcon=L5,s.extend=i,s.featureGroup=w5,s.geoJSON=_j,s.geoJson=P5,s.gridLayer=M5,s.icon=j5,s.imageOverlay=E5,s.latLng=V,s.latLngBounds=Z,s.layerGroup=b5,s.map=r5,s.marker=_5,s.point=B,s.polygon=C5,s.polyline=k5,s.popup=O5,s.rectangle=F5,s.setOptions=v,s.stamp=d,s.svg=Aj,s.svgOverlay=A5,s.tileLayer=Cj,s.tooltip=R5,s.transformation=te,s.version=r,s.videoOverlay=T5;var z5=window.L;s.noConflict=function(){return window.L=z5,this},window.L=s})})(yy,yy.exports);var oh=yy.exports;const Sw=Lm(oh);function kw(e,t,s){return Object.freeze({instance:e,context:t,container:s})}function Cw(e,t){return t==null?function(r,i){const a=j.useRef();return a.current||(a.current=e(r,i)),a}:function(r,i){const a=j.useRef();a.current||(a.current=e(r,i));const o=j.useRef(r),{instance:c}=a.current;return j.useEffect(function(){o.current!==r&&(t(c,r,o.current),o.current=r)},[c,r,i]),a}}function wR(e,t){j.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function jR(e){return function(s){const r=_w(),i=e(Nw(s,r),r);return tZ(r.map,s.attribution),bR(i.current,s.eventHandlers),wR(i.current,r),i}}function aZ(e,t){const s=j.useRef();j.useEffect(function(){if(t.pathOptions!==s.current){const i=t.pathOptions??{};e.instance.setStyle(i),s.current=i}},[e,t])}function oZ(e){return function(s){const r=_w(),i=e(Nw(s,r),r);return bR(i.current,s.eventHandlers),wR(i.current,r),aZ(i.current,s),i}}function lZ(e,t){const s=Cw(e,t),r=jR(s);return yR(r)}function cZ(e,t){const s=Cw(e,t),r=oZ(s);return yR(r)}function dZ(e,t){const s=Cw(e,t),r=jR(s);return iZ(r)}function uZ(e,t,s){const{opacity:r,zIndex:i}=t;r!=null&&r!==s.opacity&&e.setOpacity(r),i!=null&&i!==s.zIndex&&e.setZIndex(i)}function _R(){return _w().map}function NR(e){const t=_R();return j.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const hZ=cZ(function({center:t,children:s,...r},i){const a=new oh.Circle(t,r);return kw(a,gR(i,{overlayContainer:a}))},nZ);function by(){return by=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},by.apply(this,arguments)}function fZ({bounds:e,boundsOptions:t,center:s,children:r,className:i,id:a,placeholder:o,style:c,whenReady:d,zoom:f,...m},h){const[u]=j.useState({className:i,id:a,style:c}),[p,y]=j.useState(null);j.useImperativeHandle(h,()=>(p==null?void 0:p.map)??null,[p]);const v=j.useCallback(x=>{if(x!==null&&p===null){const b=new oh.Map(x,m);s!=null&&f!=null?b.setView(s,f):e!=null&&b.fitBounds(e,t),d!=null&&b.whenReady(d),y(rZ(b))}},[]);j.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const w=p?_e.createElement(xR,{value:p},r):o??null;return _e.createElement("div",by({},u,{ref:v}),w)}const SR=j.forwardRef(fZ),wy=lZ(function({position:t,...s},r){const i=new oh.Marker(t,s);return kw(i,gR(r,{overlayContainer:i}))},function(t,s,r){s.position!==r.position&&t.setLatLng(s.position),s.icon!=null&&s.icon!==r.icon&&t.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==r.opacity&&t.setOpacity(s.opacity),t.dragging!=null&&s.draggable!==r.draggable&&(s.draggable===!0?t.dragging.enable():t.dragging.disable())}),kR=dZ(function({url:t,...s},r){const i=new oh.TileLayer(t,Nw(s,r));return kw(i,r)},function(t,s,r){uZ(t,s,r);const{url:i}=s;i!=null&&i!==r.url&&t.setUrl(i)}),mZ=Sw.divIcon({className:"custom-marker",html:'<div style="background-color: #ef4444; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]}),pZ=Sw.divIcon({className:"vendor-marker",html:'<div style="background-color: #10b981; width: 24px; height: 24px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 0 8px rgba(0,0,0,0.3);"></div>',iconSize:[24,24],iconAnchor:[12,12]}),gZ=({onLocationSelect:e,onClose:t,vendorLocation:s,maxRadius:r=10,vendorName:i="Vendor"})=>{const[a,o]=j.useState(null),[c,d]=j.useState(""),[f,m]=j.useState([]),[h,u]=j.useState(!0),[p,y]=j.useState(""),[v,w]=j.useState([27.7172,85.324]),x=()=>(NR({click(M){const{lat:P,lng:T}=M.latlng;N(P,T),b(P,T)}}),null),b=async(M,P)=>{try{const A=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${M}&lon=${P}&addressdetails=1`)).json();if(A.address){const z=A.address.road||A.address.neighbourhood,O=A.address.neighbourhood||A.address.suburb||A.address.city||A.address.town,F=`${z||O||"Unknown Location"}, ${A.address.city||A.address.town||A.address.state||""}`;y(F)}}catch(T){console.error("Error fetching address:",T),y(`${M.toFixed(4)}, ${P.toFixed(4)}`)}};j.useEffect(()=>{s&&w([s.lat,s.lng])},[s]);const _=(M,P,T,A)=>{const O=(T-M)*Math.PI/180,F=(A-P)*Math.PI/180,G=Math.sin(O/2)*Math.sin(O/2)+Math.cos(M*Math.PI/180)*Math.cos(T*Math.PI/180)*Math.sin(F/2)*Math.sin(F/2);return 6371*(2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G)))},N=(M,P)=>{if(o({lat:M,lng:P}),s){const T=_(M,P,s.lat,s.lng);u(T<=r)}},C=()=>{a&&h&&e(a.lat,a.lng,p||`${a.lat.toFixed(4)}, ${a.lng.toFixed(4)}`)};j.useEffect(()=>{const M=setTimeout(()=>{c.trim()?I():m([])},300);return()=>clearTimeout(M)},[c]);const I=async()=>{if(!c.trim()){m([]);return}try{const P=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}&limit=5&addressdetails=1`)).json();m(P)}catch(M){console.error("Geocoding error:",M),m([])}},k=M=>{const P=parseFloat(M.lat),T=parseFloat(M.lon);w([P,T]),N(P,T),y(M.display_name),m([]),d("")},E=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(M=>{const{latitude:P,longitude:T}=M.coords;w([P,T]),N(P,T),b(P,T)},M=>{console.error("Geolocation error:",M)})};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[95vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Select Delivery Location"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:t,children:n.jsx(is,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(ve,{placeholder:"Search for an address...",value:c,onChange:M=>d(M.target.value)}),f.length>0&&n.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-10 max-h-32 overflow-y-auto",children:f.map((M,P)=>n.jsx("div",{className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>k(M),children:n.jsx("p",{className:"text-xs font-medium text-gray-900",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:M.display_name})},P))})]}),n.jsx(ne,{onClick:E,size:"sm",variant:"outline",children:n.jsx(bP,{className:"h-4 w-4"})})]})}),n.jsx("div",{className:"h-64 rounded-lg overflow-hidden border",children:n.jsxs(SR,{center:v,zoom:13,style:{height:"100%",width:"100%"},children:[n.jsx(kR,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),s&&n.jsxs(n.Fragment,{children:[n.jsx(wy,{position:[s.lat,s.lng],icon:pZ}),n.jsx(hZ,{center:[s.lat,s.lng],radius:r*1e3,pathOptions:{color:"#10b981",fillColor:"#10b981",fillOpacity:.1,weight:2}})]}),a&&n.jsx(wy,{position:[a.lat,a.lng],icon:mZ}),n.jsx(x,{})]},`${v[0]}-${v[1]}`)}),a&&n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Selected Location:"}),n.jsx("p",{className:"text-sm text-gray-600",children:p}),s&&n.jsxs("p",{className:`text-sm mt-2 ${h?"text-green-600":"text-red-600"}`,children:["Distance from ",i,": ",_(a.lat,a.lng,s.lat,s.lng).toFixed(1),"km",!h&&` (exceeds ${r}km delivery limit)`]})]})]}),n.jsxs("div",{className:"flex gap-2 p-4 border-t flex-shrink-0",children:[n.jsx(ne,{variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),n.jsx(ne,{onClick:C,disabled:!a||!h,className:"flex-1",children:"Confirm Location"})]})]})})};class vZ{async getAuthHeaders(){const t=await Re.getToken();return{"Content-Type":"application/json","ngrok-skip-browser-warning":"true",...t&&{Authorization:`Token ${t}`}}}async createOrder(t){const s=await fetch(`${rt}orders/create/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(t)});if(!s.ok){const i=await s.json();throw new Error(i.message||"Failed to create order")}const r=await s.json();return this.notifyVendorOfNewOrder(r.order),r}notifyVendorOfNewOrder(t){window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderCreated",{detail:{order:t}}))}async getOrders(){const t=await fetch(`${rt}orders/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch orders");const s=await t.json();return s.results||s}async getOrder(t){const s=await fetch(`${rt}orders/${t}/`,{headers:await this.getAuthHeaders()});if(!s.ok)throw new Error("Failed to fetch order");return s.json()}async cancelOrder(t,s="Cancelled by customer"){const r=await fetch(`${rt}orders/${t}/cancel/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({reason:s})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to cancel order")}return r.json()}async createReview(t,s){const r=await fetch(`${rt}orders/${t}/review/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(s)});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to create review")}return r.json()}async requestRefund(t,s){const r=await fetch(`${rt}orders/${t}/refund/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(s)});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to request refund")}return r.json()}async getPendingOrders(){const t=await fetch(`${rt}orders/vendor/pending/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending orders");return t.json()}async acceptOrder(t){const s=await fetch(`${rt}orders/${t}/accept/`,{method:"POST",headers:await this.getAuthHeaders()});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to accept order")}const r=await s.json();return this.notifyCustomerOfOrderUpdate(r.order,"accepted"),r}notifyCustomerOfOrderUpdate(t,s){window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{order:t,status:s}}))}async rejectOrder(t,s="Rejected by vendor"){const r=await fetch(`${rt}orders/${t}/reject/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({reason:s})});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to reject order")}const i=await r.json();return this.notifyCustomerOfOrderUpdate(i.order,"rejected"),i}}const Jd=new vZ,xZ=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),y=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return d*v/1e3};function yZ(){var ge,Se;const e=st(),{cart:t}=mr();Ni();const{toast:s}=hn(),[r,i]=j.useState("cash_on_delivery"),[a,o]=j.useState("current"),[c,d]=j.useState(null),[f,m]=j.useState("Detecting location..."),[h,u]=j.useState({lat:null,lng:null,address:""}),[p,y]=j.useState(!1),[v,w]=j.useState(null),[x,b]=j.useState({phone:"",instructions:""}),[_,N]=j.useState(null),[C,I]=j.useState("delivery"),[k,E]=j.useState(""),[M,P]=j.useState([]),[T,A]=j.useState(!1);j.useEffect(()=>{var xe;const fe=xt.getLocation();if(fe)d(fe),O(fe.latitude,fe.longitude).then(m);else return xt.startTracking(),xt.subscribe(async me=>{if(me){d(me);const ee=await O(me.latitude,me.longitude);m(ee)}});((xe=t==null?void 0:t.items)==null?void 0:xe.length)>0&&F(t.items[0].product.vendor_id),(async()=>{await Re.getToken()&&z()})()},[t]);const z=async()=>{try{const fe=await Re.getToken(),ke=await fetch(`${rt}/profile/`,{headers:{Authorization:`Token ${fe}`,"ngrok-skip-browser-warning":"true"}});if(ke.ok){const xe=await ke.json();N(xe),b(de=>({...de,phone:xe.phone_number||""}))}}catch(fe){console.error("Failed to fetch user info:",fe)}},O=async(fe,ke)=>{try{const de=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${fe}&lon=${ke}&addressdetails=1`)).json();if(de.address){const me=de.address.road||de.address.neighbourhood,ee=de.address.neighbourhood||de.address.suburb||de.address.city||de.address.town;return`${me||ee||"Unknown Location"}, ${de.address.city||de.address.town||de.address.state||""}`}return`${fe.toFixed(4)}, ${ke.toFixed(4)}`}catch{return`${fe.toFixed(4)}, ${ke.toFixed(4)}`}},F=async fe=>{try{const ke=await fetch(`${rt}api/vendors/${fe}/`,{headers:{"ngrok-skip-browser-warning":"true"}});if(ke.ok){const xe=await ke.json();w(xe)}}catch(ke){console.error("Failed to fetch vendor info:",ke)}},G=fr(),Y=(ge=G.state)!=null&&ge.directBuy?G.state:null,K=(Se=G.state)==null?void 0:Se.selectedItems,U=Y?[{id:Date.now(),product:{id:Y.product.id,name:Y.product.name,vendor_name:Y.product.vendor_name,vendor_id:Y.product.vendor_id,images:Y.product.images},quantity:Y.product.quantity,total_price:(parseFloat(Y.product.price)*Y.product.quantity).toString()}]:K||(t==null?void 0:t.items)||[],B=U.reduce((fe,ke)=>fe+parseFloat(ke.total_price),0),R=B,$=fe=>/^(98|97)\d{8}$/.test(fe.replace(/\s+/g,"")),W=(fe,ke)=>{if(fe==="phone"){const xe=ke.replace(/[^0-9]/g,"");xe.length<=10&&b(de=>({...de,[fe]:xe}))}else b(xe=>({...xe,[fe]:ke}))},Z=(fe,ke)=>{if(!v||!v.latitude||!v.longitude||!v.delivery_radius)return{valid:!0,distance:0};const xe=xZ(fe,ke,v.latitude,v.longitude);return{valid:xe<=v.delivery_radius,distance:xe,maxRadius:v.delivery_radius}},X=fe=>{o(fe),fe==="custom"&&v?y(!0):fe==="custom"&&!v&&s({title:"Vendor Information Loading",description:"Please wait for vendor information to load before selecting map location",variant:"destructive"})},V=(fe,ke,xe)=>{const de=Z(fe,ke);if(!de.valid){s({title:"Location Out of Range",description:`This location is ${de.distance.toFixed(1)}km away. Maximum delivery range is ${de.maxRadius}km.`,variant:"destructive"});return}u({lat:fe,lng:ke,address:xe}),y(!1),s({title:"Location Selected",description:`Delivery location set (${de.distance.toFixed(1)}km from vendor)`})},H=()=>{const fe=a==="current"?c:h.lat,ke=(_==null?void 0:_.phone_number)||x.phone,xe=ke&&$(ke);return fe&&xe},se=async()=>{if(!await Re.getToken()){s({title:"Login Required",description:"Please login to place an order",variant:"destructive"}),e("/login");return}if(!H()){s({title:"Missing Information",description:"Please complete delivery information",variant:"destructive"}),I("delivery");return}const ke=a==="current"?c:h;if(!ke||!ke.latitude&&!ke.lat){s({title:"Location Required",description:"Please select a delivery location",variant:"destructive"});return}const xe=ke.latitude||ke.lat,de=ke.longitude||ke.lng,me=Z(xe,de);if(!me.valid){s({title:"Delivery Not Available",description:`Selected location is outside delivery range (${me.distance.toFixed(1)}km > ${me.maxRadius}km)`,variant:"destructive"});return}try{const ee={items:U.map(oe=>({product_id:oe.product.id,quantity:oe.quantity})),delivery_name:(_==null?void 0:_.username)||(_==null?void 0:_.first_name)||"Customer",delivery_phone:(_==null?void 0:_.phone_number)||x.phone,delivery_address:a==="current"?f:h.address,delivery_latitude:xe,delivery_longitude:de,delivery_instructions:x.instructions,payment_method:r,notes:`Distance: ${me.distance.toFixed(1)}km from vendor`},ae=await Jd.createOrder(ee);if(s({title:"Order Placed Successfully!",description:`Order #${ae.order.order_number} has been placed.`}),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Order Placed!",{body:`Order #${ae.order.order_number} for ₹${ae.order.total_amount}`,icon:"/favicon.ico",tag:`order-${ae.order.id}`,requireInteraction:!0}),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderCreated",{detail:{order:ae.order}})),!Y&&K){const oe=await Re.getToken();for(const be of K)try{await fetch(`${rt}cart/items/${be.id}/remove/`,{method:"DELETE",headers:{Authorization:`Token ${oe}`,"ngrok-skip-browser-warning":"true"}})}catch(je){console.error("Error removing cart item:",je)}}e(`/order-confirmation/${ae.order.id}`,{state:{order:ae.order}})}catch(ee){console.error("Order creation error:",ee),s({title:"Order Failed",description:ee.message||"Network error. Please try again.",variant:"destructive"})}},Q=()=>c?f:"Detecting location...",ie=()=>h.lat?h.address||`Custom Location (${h.lat.toFixed(4)}, ${h.lng.toFixed(4)})`:"Select on map",he=async fe=>{if(!fe.trim()){P([]),A(!1);return}try{const xe=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(fe)}&limit=5&addressdetails=1`)).json();P(xe),A(!0)}catch(ke){console.error("Location search error:",ke),P([]),A(!1)}},te=async fe=>{const ke=parseFloat(fe.lat),xe=parseFloat(fe.lon),de=fe.display_name,me=Z(ke,xe);if(!me.valid){s({title:"Location Out of Range",description:`This location is ${me.distance.toFixed(1)}km away. Maximum delivery range is ${me.maxRadius}km.`,variant:"destructive"});return}u({lat:ke,lng:xe,address:de}),o("custom"),E(""),P([]),A(!1),s({title:"Location Selected",description:`Delivery location set (${me.distance.toFixed(1)}km from vendor)`})};return j.useEffect(()=>{const fe=setTimeout(()=>{k.trim()?he(k):(P([]),A(!1))},300);return()=>clearTimeout(fe)},[k]),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 font-sans",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:n.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-all",children:n.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Checkout"}),n.jsx("div",{className:"w-6"})," "]})}),n.jsx("main",{className:"max-w-4xl mx-auto p-6 pb-32",children:n.jsxs(Si,{value:C,onValueChange:I,className:"space-y-6",children:[n.jsxs(qr,{className:"grid w-full grid-cols-2",children:[n.jsxs(Ct,{value:"delivery",className:"flex items-center gap-2",children:[H()&&n.jsx(tp,{className:"h-4 w-4"}),"Delivery"]}),n.jsx(Ct,{value:"summary",disabled:!H(),children:"Summary"})]}),n.jsx(dt,{value:"delivery",className:"space-y-6",children:n.jsxs(Ee,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[n.jsx(jt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:n.jsxs(_t,{className:"flex items-center gap-3 text-xl font-semibold text-gray-800",children:[n.jsx(Kt,{className:"h-6 w-6 text-emerald-600"}),"Delivery Location"]})}),n.jsxs(Ae,{className:"p-6 space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Kt,{className:"h-5 w-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Delivery Location"}),n.jsx("p",{className:"text-base font-semibold text-gray-800",children:a==="current"?Q():ie()}),(a==="current"&&c||a==="custom"&&h.lat)&&v&&n.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[a==="current"?Z(c.latitude,c.longitude).distance.toFixed(1):Z(h.lat,h.lng).distance.toFixed(1),"km from ",v.business_name]})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{className:"text-sm font-medium text-gray-700",children:"Search Location"}),n.jsxs("div",{className:"relative",children:[n.jsx(ve,{placeholder:"Search for an address...",value:k,onChange:fe=>E(fe.target.value),onFocus:()=>k&&A(!0),className:"border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl"}),T&&M.length>0&&n.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-xl shadow-lg z-10 max-h-48 overflow-y-auto mt-1",children:M.map((fe,ke)=>n.jsx("div",{className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 first:rounded-t-xl last:rounded-b-xl",onMouseDown:xe=>xe.preventDefault(),onClick:()=>te(fe),children:n.jsx("p",{className:"text-sm font-medium text-gray-900",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:fe.display_name})},ke))})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(ue,{className:"text-sm font-medium text-gray-700",children:"Choose Delivery Location *"}),n.jsxs(fR,{value:a,onValueChange:X,className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all cursor-pointer",children:[n.jsx(xy,{value:"current",id:"current",className:"text-emerald-600 border-gray-300"}),n.jsxs(ue,{htmlFor:"current",className:"flex items-center gap-3 flex-1 cursor-pointer",children:[n.jsx(bP,{className:"h-5 w-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-base font-medium text-gray-800",children:"Use Current Location"}),n.jsx("p",{className:"text-sm text-gray-500",children:Q()}),c&&v&&n.jsxs("p",{className:"text-xs text-emerald-600",children:[Z(c.latitude,c.longitude).distance.toFixed(1),"km from vendor"]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all cursor-pointer",children:[n.jsx(xy,{value:"custom",id:"custom",className:"text-emerald-600 border-gray-300"}),n.jsxs(ue,{htmlFor:"custom",className:"flex items-center gap-3 flex-1 cursor-pointer",children:[n.jsx(RD,{className:"h-5 w-5 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-base font-medium text-gray-800",children:"Choose on Map"}),n.jsx("p",{className:"text-sm text-gray-500",children:ie()}),h.lat&&v&&n.jsxs("p",{className:"text-xs text-emerald-600",children:[Z(h.lat,h.lng).distance.toFixed(1),"km from vendor"]})]})]})]}),a==="custom"&&!h.lat&&n.jsx("div",{className:"ml-8",children:n.jsx(ne,{onClick:()=>v?y(!0):null,disabled:!v,variant:"outline",className:"text-sm px-4 py-2 rounded-lg",children:v?"Open Map":"Loading vendor info..."})})]})]}),!(_!=null&&_.phone_number)&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"Phone Number *"}),n.jsx(ve,{id:"phone",placeholder:"98XXXXXXXX or 97XXXXXXXX",value:x.phone,onChange:fe=>W("phone",fe.target.value),className:`mt-1 border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl transition-all ${x.phone&&!$(x.phone)?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`}),x.phone&&!$(x.phone)&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a valid Nepali mobile number (98XXXXXXXX or 97XXXXXXXX)"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"instructions",className:"text-sm font-medium text-gray-700",children:"Delivery Instructions (Optional)"}),n.jsx(Yn,{id:"instructions",placeholder:"Any special instructions for delivery",value:x.instructions,onChange:fe=>W("instructions",fe.target.value),rows:3,className:"mt-1 border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl transition-all"})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(ne,{onClick:()=>I("summary"),disabled:!H(),className:"px-8 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl",children:"Continue to Summary"})})]})]})}),n.jsx(dt,{value:"summary",className:"space-y-6",children:n.jsxs(Ee,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[n.jsx(jt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:n.jsx(_t,{className:"text-xl font-semibold text-gray-800",children:"Order Summary"})}),n.jsxs(Ae,{className:"p-6 space-y-6",children:[n.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Kt,{className:"h-5 w-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Delivery Location"}),n.jsx("p",{className:"text-base font-semibold text-gray-800",children:a==="current"?Q():ie()}),(a==="current"&&c||a==="custom"&&h.lat)&&v&&n.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[a==="current"?Z(c.latitude,c.longitude).distance.toFixed(1):Z(h.lat,h.lng).distance.toFixed(1),"km from ",v.business_name]})]})]})}),n.jsx(pi,{className:"my-4 bg-gray-200"}),U.map(fe=>{var ke,xe;return n.jsxs("div",{className:"flex items-center gap-4 py-4 border-b border-gray-100",children:[n.jsx("img",{src:as((xe=(ke=fe.product.images)==null?void 0:ke[0])==null?void 0:xe.image_url),alt:fe.product.name,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 shadow-sm"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-lg text-gray-800",children:fe.product.name}),n.jsx("p",{className:"text-sm text-gray-500",children:fe.product.vendor_name}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Quantity: ",fe.quantity]})]}),n.jsxs("p",{className:"font-semibold text-lg text-gray-800",children:["₹",parseFloat(fe.total_price).toFixed(2)]})]},fe.id)}),n.jsx(pi,{className:"my-4 bg-gray-200"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[n.jsx("h4",{className:"font-semibold text-emerald-800 mb-2",children:"Bill Amount (Cash on Delivery)"}),n.jsxs("div",{className:"flex justify-between text-base text-gray-700",children:[n.jsx("span",{children:"Subtotal"}),n.jsxs("span",{className:"font-semibold",children:["₹",B.toFixed(2)]})]})]}),n.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-orange-800 text-lg",children:"Delivery Fee"}),n.jsx("p",{className:"text-sm text-orange-700",children:"Pay on delivery"})]}),n.jsx("span",{className:"font-bold text-xl text-orange-600",children:"To be determined"})]})}),n.jsx(pi,{className:"my-2 bg-gray-200"}),n.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-800",children:[n.jsx("span",{children:"Bill Total (Now)"}),n.jsxs("span",{children:["₹",R.toFixed(2)]})]})]}),n.jsx("div",{className:"flex justify-between",children:n.jsx(ne,{variant:"outline",onClick:()=>I("delivery"),className:"px-8 py-2 rounded-xl",children:"Back to Delivery"})})]})]})})]})}),C==="summary"&&n.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-2xl py-4",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-6 flex items-center justify-between",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount (COD)"}),n.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:["₹",R.toFixed(2)]})]}),n.jsx(ne,{onClick:se,disabled:!H(),className:"px-10 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-bold text-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Place Order (COD)"})]})}),p&&v&&n.jsx(gZ,{onLocationSelect:V,onClose:()=>y(!1),vendorLocation:{lat:v.latitude,lng:v.longitude},maxRadius:v.delivery_radius,vendorName:v.business_name})]})}function bZ(){var h,u;const e=st(),{orderId:t}=mp(),s=fr(),{toast:r}=hn(),[i,a]=j.useState(((h=s.state)==null?void 0:h.order)||null),[o,c]=j.useState(!i);j.useEffect(()=>{!i&&t&&d()},[t,i]);const d=async()=>{try{const p=await Jd.getOrder(parseInt(t));a(p)}catch(p){console.error("Error fetching order:",p),r({title:"Error",description:p.message||"Failed to load order details",variant:"destructive"}),e("/")}finally{c(!1)}},f=p=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",out_for_delivery:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[p]||"bg-gray-100 text-gray-800",m=p=>({pending:"Order Placed",confirmed:"Confirmed",preparing:"Preparing",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"})[p]||p;return o?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})}):i?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:n.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:n.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Order Confirmation"}),n.jsx("div",{className:"w-6"})]})}),n.jsxs("main",{className:"max-w-4xl mx-auto p-6 pb-32",children:[n.jsx(Ee,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:n.jsxs(Ae,{className:"p-8 text-center",children:[n.jsx(Yu,{className:"h-16 w-16 mx-auto mb-4 text-emerald-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Order Placed Successfully!"}),n.jsxs("p",{className:"text-gray-600 mb-4",children:["Your order #",i.order_number," has been placed and is being processed."]}),n.jsx(Ie,{className:`${f(i.status)} px-4 py-2 text-sm font-medium`,children:m(i.status)})]})}),n.jsxs(Ee,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:[n.jsx(jt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:n.jsx(_t,{className:"text-xl font-semibold text-gray-800",children:"Order Details"})}),n.jsx(Ae,{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Order Information"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Order Number:"}),n.jsxs("span",{className:"font-medium",children:["#",i.order_number]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Order Date:"}),n.jsx("span",{className:"font-medium",children:new Date(i.created_at).toLocaleDateString()})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),n.jsx("span",{className:"font-medium capitalize",children:i.payment_method})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),n.jsxs("span",{className:"font-bold text-emerald-600",children:["₹",parseFloat(i.total_amount).toFixed(2)]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Delivery Information"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Kt,{className:"h-4 w-4 text-emerald-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:i.delivery_name}),n.jsx("p",{className:"text-gray-600",children:i.delivery_address})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qu,{className:"h-4 w-4 text-emerald-600"}),n.jsx("span",{className:"text-gray-600",children:i.delivery_phone})]}),i.delivery_instructions&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(or,{className:"h-4 w-4 text-emerald-600 mt-0.5"}),n.jsx("p",{className:"text-gray-600 text-xs",children:i.delivery_instructions})]})]})]})]})})]}),n.jsxs(Ee,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:[n.jsx(jt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:n.jsx(_t,{className:"text-xl font-semibold text-gray-800",children:"Order Items"})}),n.jsxs(Ae,{className:"p-6",children:[n.jsx("div",{className:"space-y-4",children:(u=i.items)==null?void 0:u.map(p=>{var y,v,w;return n.jsxs("div",{className:"flex items-center gap-4 py-4 border-b border-gray-100 last:border-b-0",children:[n.jsx("img",{src:((w=(v=(y=p.product_details)==null?void 0:y.images)==null?void 0:v[0])==null?void 0:w.image_url)||"/placeholder-product.jpg",alt:p.product_name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:p.product_name}),n.jsx("p",{className:"text-sm text-gray-600",children:p.vendor_name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",p.quantity]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"font-semibold text-gray-800",children:["₹",parseFloat(p.total_price).toFixed(2)]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["₹",parseFloat(p.unit_price).toFixed(2)," each"]})]})]},p.id)})}),n.jsx(pi,{className:"my-4"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[n.jsxs("h4",{className:"font-semibold text-emerald-800 mb-2",children:["Bill Amount (Paid via ",i.payment_method,")"]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsxs("span",{className:"font-medium",children:["₹",parseFloat(i.subtotal).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Tax:"}),n.jsxs("span",{className:"font-medium",children:["₹",parseFloat(i.tax_amount).toFixed(2)]})]}),n.jsx(pi,{className:"my-2"}),n.jsxs("div",{className:"flex justify-between text-base font-bold",children:[n.jsx("span",{children:"Bill Total (Paid):"}),n.jsxs("span",{className:"text-emerald-600",children:["₹",(parseFloat(i.subtotal)+parseFloat(i.tax_amount)).toFixed(2)]})]})]})]}),n.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-orange-800 text-lg",children:"Delivery Fee"}),n.jsx("p",{className:"text-sm text-orange-700",children:"Pay on delivery"})]}),n.jsxs("span",{className:"font-bold text-xl text-orange-600",children:["₹",parseFloat(i.delivery_fee).toFixed(2)]})]})}),n.jsx(pi,{className:"my-2"}),n.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[n.jsx("span",{children:"Grand Total:"}),n.jsxs("span",{className:"text-gray-800",children:["₹",parseFloat(i.total_amount).toFixed(2)]})]})]})]})]}),n.jsxs("div",{className:"flex gap-4 justify-center",children:[n.jsx(ne,{variant:"outline",onClick:()=>e("/orders"),className:"px-8 py-3 rounded-xl",children:"View All Orders"}),n.jsx(ne,{onClick:()=>e("/search"),className:"px-8 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700",children:"Continue Shopping"})]})]})]}):n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(At,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Order not found"}),n.jsx(ne,{onClick:()=>e("/home"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Go Home"})]})})}var Tp="Dialog",[CR,Ase]=ls(Tp),[wZ,Hr]=CR(Tp),PR=e=>{const{__scopeDialog:t,children:s,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,c=j.useRef(null),d=j.useRef(null),[f,m]=zr({prop:r,defaultProp:i??!1,onChange:a,caller:Tp});return n.jsx(wZ,{scope:t,triggerRef:c,contentRef:d,contentId:Fr(),titleId:Fr(),descriptionId:Fr(),open:f,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(h=>!h),[m]),modal:o,children:s})};PR.displayName=Tp;var ER="DialogTrigger",TR=j.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Hr(ER,s),a=ft(t,i.triggerRef);return n.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Tw(i.open),...r,ref:a,onClick:Me(e.onClick,i.onOpenToggle)})});TR.displayName=ER;var Pw="DialogPortal",[jZ,AR]=CR(Pw,{forceMount:void 0}),OR=e=>{const{__scopeDialog:t,forceMount:s,children:r,container:i}=e,a=Hr(Pw,t);return n.jsx(jZ,{scope:t,forceMount:s,children:j.Children.map(r,o=>n.jsx(Qn,{present:s||a.open,children:n.jsx(Zu,{asChild:!0,container:i,children:o})}))})};OR.displayName=Pw;var gm="DialogOverlay",RR=j.forwardRef((e,t)=>{const s=AR(gm,e.__scopeDialog),{forceMount:r=s.forceMount,...i}=e,a=Hr(gm,e.__scopeDialog);return a.modal?n.jsx(Qn,{present:r||a.open,children:n.jsx(NZ,{...i,ref:t})}):null});RR.displayName=gm;var _Z=qo("DialogOverlay.RemoveScroll"),NZ=j.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Hr(gm,s);return n.jsx(xp,{as:_Z,allowPinchZoom:!0,shards:[i.contentRef],children:n.jsx(Ye.div,{"data-state":Tw(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Go="DialogContent",LR=j.forwardRef((e,t)=>{const s=AR(Go,e.__scopeDialog),{forceMount:r=s.forceMount,...i}=e,a=Hr(Go,e.__scopeDialog);return n.jsx(Qn,{present:r||a.open,children:a.modal?n.jsx(SZ,{...i,ref:t}):n.jsx(kZ,{...i,ref:t})})});LR.displayName=Go;var SZ=j.forwardRef((e,t)=>{const s=Hr(Go,e.__scopeDialog),r=j.useRef(null),i=ft(t,s.contentRef,r);return j.useEffect(()=>{const a=r.current;if(a)return Ab(a)},[]),n.jsx(MR,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Me(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Me(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&a.preventDefault()}),onFocusOutside:Me(e.onFocusOutside,a=>a.preventDefault())})}),kZ=j.forwardRef((e,t)=>{const s=Hr(Go,e.__scopeDialog),r=j.useRef(!1),i=j.useRef(!1);return n.jsx(MR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,c;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(r.current||(c=s.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var d,f;(d=e.onInteractOutside)==null||d.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((f=s.triggerRef.current)==null?void 0:f.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),MR=j.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,c=Hr(Go,s),d=j.useRef(null),f=ft(t,d);return Pb(),n.jsxs(n.Fragment,{children:[n.jsx(gp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:n.jsx(Lc,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Tw(c.open),...o,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(CZ,{titleId:c.titleId}),n.jsx(EZ,{contentRef:d,descriptionId:c.descriptionId})]})]})}),Ew="DialogTitle",IR=j.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Hr(Ew,s);return n.jsx(Ye.h2,{id:i.titleId,...r,ref:t})});IR.displayName=Ew;var DR="DialogDescription",FR=j.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Hr(DR,s);return n.jsx(Ye.p,{id:i.descriptionId,...r,ref:t})});FR.displayName=DR;var $R="DialogClose",zR=j.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Hr($R,s);return n.jsx(Ye.button,{type:"button",...r,ref:t,onClick:Me(e.onClick,()=>i.onOpenChange(!1))})});zR.displayName=$R;function Tw(e){return e?"open":"closed"}var BR="DialogTitleWarning",[Ose,VR]=CI(BR,{contentName:Go,titleName:Ew,docsSlug:"dialog"}),CZ=({titleId:e})=>{const t=VR(BR),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return j.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},PZ="DialogDescriptionWarning",EZ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${VR(PZ).contentName}}.`;return j.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},UR=PR,qR=TR,HR=OR,Ap=RR,Op=LR,Rp=IR,Lp=FR,WR=zR;const Fo=UR,jy=qR,TZ=HR,ZR=j.forwardRef(({className:e,...t},s)=>n.jsx(Ap,{ref:s,className:We("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ZR.displayName=Ap.displayName;const Da=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(TZ,{children:[n.jsx(ZR,{}),n.jsxs(Op,{ref:r,className:We("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,n.jsxs(WR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(is,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Da.displayName=Op.displayName;const Fa=({className:e,...t})=>n.jsx("div",{className:We("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Fa.displayName="DialogHeader";const $a=j.forwardRef(({className:e,...t},s)=>n.jsx(Rp,{ref:s,className:We("text-lg font-semibold leading-none tracking-tight",e),...t}));$a.displayName=Rp.displayName;const GR=j.forwardRef(({className:e,...t},s)=>n.jsx(Lp,{ref:s,className:We("text-sm text-muted-foreground",e),...t}));GR.displayName=Lp.displayName;const Os=UR,AZ=qR,OZ=HR,KR=j.forwardRef(({className:e,...t},s)=>n.jsx(Ap,{className:We("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));KR.displayName=Ap.displayName;const RZ=Ku("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),gs=j.forwardRef(({side:e="right",className:t,children:s,...r},i)=>n.jsxs(OZ,{children:[n.jsx(KR,{}),n.jsxs(Op,{ref:i,className:We(RZ({side:e}),t),...r,children:[s,n.jsxs(WR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[n.jsx(is,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gs.displayName=Op.displayName;const vs=({className:e,...t})=>n.jsx("div",{className:We("flex flex-col space-y-2 text-center sm:text-left",e),...t});vs.displayName="SheetHeader";const xs=j.forwardRef(({className:e,...t},s)=>n.jsx(Rp,{ref:s,className:We("text-lg font-semibold text-foreground",e),...t}));xs.displayName=Rp.displayName;const LZ=j.forwardRef(({className:e,...t},s)=>n.jsx(Lp,{ref:s,className:We("text-sm text-muted-foreground",e),...t}));LZ.displayName=Lp.displayName;function _y(e,[t,s]){return Math.min(s,Math.max(t,e))}var MZ=[" ","Enter","ArrowUp","ArrowDown"],IZ=[" ","Enter"],Ko="Select",[Mp,Ip,DZ]=Qm(Ko),[Zc,Rse]=ls(Ko,[DZ,$c]),Dp=$c(),[FZ,ro]=Zc(Ko),[$Z,zZ]=Zc(Ko),YR=e=>{const{__scopeSelect:t,children:s,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:c,onValueChange:d,dir:f,name:m,autoComplete:h,disabled:u,required:p,form:y}=e,v=Dp(t),[w,x]=j.useState(null),[b,_]=j.useState(null),[N,C]=j.useState(!1),I=Vc(f),[k,E]=zr({prop:r,defaultProp:i??!1,onChange:a,caller:Ko}),[M,P]=zr({prop:o,defaultProp:c,onChange:d,caller:Ko}),T=j.useRef(null),A=w?y||!!w.closest("form"):!0,[z,O]=j.useState(new Set),F=Array.from(z).map(G=>G.props.value).join(";");return n.jsx(vb,{...v,children:n.jsxs(FZ,{required:p,scope:t,trigger:w,onTriggerChange:x,valueNode:b,onValueNodeChange:_,valueNodeHasChildren:N,onValueNodeHasChildrenChange:C,contentId:Fr(),value:M,onValueChange:P,open:k,onOpenChange:E,dir:I,triggerPointerDownPosRef:T,disabled:u,children:[n.jsx(Mp.Provider,{scope:t,children:n.jsx($Z,{scope:e.__scopeSelect,onNativeOptionAdd:j.useCallback(G=>{O(Y=>new Set(Y).add(G))},[]),onNativeOptionRemove:j.useCallback(G=>{O(Y=>{const K=new Set(Y);return K.delete(G),K})},[]),children:s})}),A?n.jsxs(bL,{"aria-hidden":!0,required:p,tabIndex:-1,name:m,autoComplete:h,value:M,onChange:G=>P(G.target.value),disabled:u,form:y,children:[M===void 0?n.jsx("option",{value:""}):null,Array.from(z)]},F):null]})})};YR.displayName=Ko;var XR="SelectTrigger",QR=j.forwardRef((e,t)=>{const{__scopeSelect:s,disabled:r=!1,...i}=e,a=Dp(s),o=ro(XR,s),c=o.disabled||r,d=ft(t,o.onTriggerChange),f=Ip(s),m=j.useRef("touch"),[h,u,p]=jL(v=>{const w=f().filter(_=>!_.disabled),x=w.find(_=>_.value===o.value),b=_L(w,v,x);b!==void 0&&o.onValueChange(b.value)}),y=v=>{c||(o.onOpenChange(!0),p()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return n.jsx(xb,{asChild:!0,...a,children:n.jsx(Ye.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":wL(o.value)?"":void 0,...i,ref:d,onClick:Me(i.onClick,v=>{v.currentTarget.focus(),m.current!=="mouse"&&y(v)}),onPointerDown:Me(i.onPointerDown,v=>{m.current=v.pointerType;const w=v.target;w.hasPointerCapture(v.pointerId)&&w.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:Me(i.onKeyDown,v=>{const w=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&u(v.key),!(w&&v.key===" ")&&MZ.includes(v.key)&&(y(),v.preventDefault())})})})});QR.displayName=XR;var JR="SelectValue",eL=j.forwardRef((e,t)=>{const{__scopeSelect:s,className:r,style:i,children:a,placeholder:o="",...c}=e,d=ro(JR,s),{onValueNodeHasChildrenChange:f}=d,m=a!==void 0,h=ft(t,d.onValueNodeChange);return kn(()=>{f(m)},[f,m]),n.jsx(Ye.span,{...c,ref:h,style:{pointerEvents:"none"},children:wL(d.value)?n.jsx(n.Fragment,{children:o}):a})});eL.displayName=JR;var BZ="SelectIcon",tL=j.forwardRef((e,t)=>{const{__scopeSelect:s,children:r,...i}=e;return n.jsx(Ye.span,{"aria-hidden":!0,...i,ref:t,children:r||"▼"})});tL.displayName=BZ;var VZ="SelectPortal",nL=e=>n.jsx(Zu,{asChild:!0,...e});nL.displayName=VZ;var Yo="SelectContent",sL=j.forwardRef((e,t)=>{const s=ro(Yo,e.__scopeSelect),[r,i]=j.useState();if(kn(()=>{i(new DocumentFragment)},[]),!s.open){const a=r;return a?eo.createPortal(n.jsx(rL,{scope:e.__scopeSelect,children:n.jsx(Mp.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),a):null}return n.jsx(iL,{...e,ref:t})});sL.displayName=Yo;var _r=10,[rL,io]=Zc(Yo),UZ="SelectContentImpl",qZ=qo("SelectContent.RemoveScroll"),iL=j.forwardRef((e,t)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:c,sideOffset:d,align:f,alignOffset:m,arrowPadding:h,collisionBoundary:u,collisionPadding:p,sticky:y,hideWhenDetached:v,avoidCollisions:w,...x}=e,b=ro(Yo,s),[_,N]=j.useState(null),[C,I]=j.useState(null),k=ft(t,H=>N(H)),[E,M]=j.useState(null),[P,T]=j.useState(null),A=Ip(s),[z,O]=j.useState(!1),F=j.useRef(!1);j.useEffect(()=>{if(_)return Ab(_)},[_]),Pb();const G=j.useCallback(H=>{const[se,...Q]=A().map(te=>te.ref.current),[ie]=Q.slice(-1),he=document.activeElement;for(const te of H)if(te===he||(te==null||te.scrollIntoView({block:"nearest"}),te===se&&C&&(C.scrollTop=0),te===ie&&C&&(C.scrollTop=C.scrollHeight),te==null||te.focus(),document.activeElement!==he))return},[A,C]),Y=j.useCallback(()=>G([E,_]),[G,E,_]);j.useEffect(()=>{z&&Y()},[z,Y]);const{onOpenChange:K,triggerPointerDownPosRef:U}=b;j.useEffect(()=>{if(_){let H={x:0,y:0};const se=ie=>{var he,te;H={x:Math.abs(Math.round(ie.pageX)-(((he=U.current)==null?void 0:he.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((te=U.current)==null?void 0:te.y)??0))}},Q=ie=>{H.x<=10&&H.y<=10?ie.preventDefault():_.contains(ie.target)||K(!1),document.removeEventListener("pointermove",se),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",Q,{capture:!0})}}},[_,K,U]),j.useEffect(()=>{const H=()=>K(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[K]);const[B,R]=jL(H=>{const se=A().filter(he=>!he.disabled),Q=se.find(he=>he.ref.current===document.activeElement),ie=_L(se,H,Q);ie&&setTimeout(()=>ie.ref.current.focus())}),$=j.useCallback((H,se,Q)=>{const ie=!F.current&&!Q;(b.value!==void 0&&b.value===se||ie)&&(M(H),ie&&(F.current=!0))},[b.value]),W=j.useCallback(()=>_==null?void 0:_.focus(),[_]),Z=j.useCallback((H,se,Q)=>{const ie=!F.current&&!Q;(b.value!==void 0&&b.value===se||ie)&&T(H)},[b.value]),X=r==="popper"?Ny:aL,V=X===Ny?{side:c,sideOffset:d,align:f,alignOffset:m,arrowPadding:h,collisionBoundary:u,collisionPadding:p,sticky:y,hideWhenDetached:v,avoidCollisions:w}:{};return n.jsx(rL,{scope:s,content:_,viewport:C,onViewportChange:I,itemRefCallback:$,selectedItem:E,onItemLeave:W,itemTextRefCallback:Z,focusSelectedItem:Y,selectedItemText:P,position:r,isPositioned:z,searchRef:B,children:n.jsx(xp,{as:qZ,allowPinchZoom:!0,children:n.jsx(gp,{asChild:!0,trapped:b.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:Me(i,H=>{var se;(se=b.trigger)==null||se.focus({preventScroll:!0}),H.preventDefault()}),children:n.jsx(Lc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:n.jsx(X,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:H=>H.preventDefault(),...x,...V,onPlaced:()=>O(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Me(x.onKeyDown,H=>{const se=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!se&&H.key.length===1&&R(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let ie=A().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(H.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const he=H.target,te=ie.indexOf(he);ie=ie.slice(te+1)}setTimeout(()=>G(ie)),H.preventDefault()}})})})})})})});iL.displayName=UZ;var HZ="SelectItemAlignedPosition",aL=j.forwardRef((e,t)=>{const{__scopeSelect:s,onPlaced:r,...i}=e,a=ro(Yo,s),o=io(Yo,s),[c,d]=j.useState(null),[f,m]=j.useState(null),h=ft(t,k=>m(k)),u=Ip(s),p=j.useRef(!1),y=j.useRef(!0),{viewport:v,selectedItem:w,selectedItemText:x,focusSelectedItem:b}=o,_=j.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&f&&v&&w&&x){const k=a.trigger.getBoundingClientRect(),E=f.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(a.dir!=="rtl"){const he=P.left-E.left,te=M.left-he,ge=k.left-te,Se=k.width+ge,fe=Math.max(Se,E.width),ke=window.innerWidth-_r,xe=_y(te,[_r,Math.max(_r,ke-fe)]);c.style.minWidth=Se+"px",c.style.left=xe+"px"}else{const he=E.right-P.right,te=window.innerWidth-M.right-he,ge=window.innerWidth-k.right-te,Se=k.width+ge,fe=Math.max(Se,E.width),ke=window.innerWidth-_r,xe=_y(te,[_r,Math.max(_r,ke-fe)]);c.style.minWidth=Se+"px",c.style.right=xe+"px"}const T=u(),A=window.innerHeight-_r*2,z=v.scrollHeight,O=window.getComputedStyle(f),F=parseInt(O.borderTopWidth,10),G=parseInt(O.paddingTop,10),Y=parseInt(O.borderBottomWidth,10),K=parseInt(O.paddingBottom,10),U=F+G+z+K+Y,B=Math.min(w.offsetHeight*5,U),R=window.getComputedStyle(v),$=parseInt(R.paddingTop,10),W=parseInt(R.paddingBottom,10),Z=k.top+k.height/2-_r,X=A-Z,V=w.offsetHeight/2,H=w.offsetTop+V,se=F+G+H,Q=U-se;if(se<=Z){const he=T.length>0&&w===T[T.length-1].ref.current;c.style.bottom="0px";const te=f.clientHeight-v.offsetTop-v.offsetHeight,ge=Math.max(X,V+(he?W:0)+te+Y),Se=se+ge;c.style.height=Se+"px"}else{const he=T.length>0&&w===T[0].ref.current;c.style.top="0px";const ge=Math.max(Z,F+v.offsetTop+(he?$:0)+V)+Q;c.style.height=ge+"px",v.scrollTop=se-Z+v.offsetTop}c.style.margin=`${_r}px 0`,c.style.minHeight=B+"px",c.style.maxHeight=A+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[u,a.trigger,a.valueNode,c,f,v,w,x,a.dir,r]);kn(()=>_(),[_]);const[N,C]=j.useState();kn(()=>{f&&C(window.getComputedStyle(f).zIndex)},[f]);const I=j.useCallback(k=>{k&&y.current===!0&&(_(),b==null||b(),y.current=!1)},[_,b]);return n.jsx(ZZ,{scope:s,contentWrapper:c,shouldExpandOnScrollRef:p,onScrollButtonChange:I,children:n.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:n.jsx(Ye.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});aL.displayName=HZ;var WZ="SelectPopperPosition",Ny=j.forwardRef((e,t)=>{const{__scopeSelect:s,align:r="start",collisionPadding:i=_r,...a}=e,o=Dp(s);return n.jsx(yb,{...o,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ny.displayName=WZ;var[ZZ,Aw]=Zc(Yo,{}),Sy="SelectViewport",oL=j.forwardRef((e,t)=>{const{__scopeSelect:s,nonce:r,...i}=e,a=io(Sy,s),o=Aw(Sy,s),c=ft(t,a.onViewportChange),d=j.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),n.jsx(Mp.Slot,{scope:s,children:n.jsx(Ye.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Me(i.onScroll,f=>{const m=f.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:u}=o;if(u!=null&&u.current&&h){const p=Math.abs(d.current-m.scrollTop);if(p>0){const y=window.innerHeight-_r*2,v=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),x=Math.max(v,w);if(x<y){const b=x+p,_=Math.min(y,b),N=b-_;h.style.height=_+"px",h.style.bottom==="0px"&&(m.scrollTop=N>0?N:0,h.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});oL.displayName=Sy;var lL="SelectGroup",[GZ,KZ]=Zc(lL),YZ=j.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,i=Fr();return n.jsx(GZ,{scope:s,id:i,children:n.jsx(Ye.div,{role:"group","aria-labelledby":i,...r,ref:t})})});YZ.displayName=lL;var cL="SelectLabel",dL=j.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,i=KZ(cL,s);return n.jsx(Ye.div,{id:i.id,...r,ref:t})});dL.displayName=cL;var vm="SelectItem",[XZ,uL]=Zc(vm),hL=j.forwardRef((e,t)=>{const{__scopeSelect:s,value:r,disabled:i=!1,textValue:a,...o}=e,c=ro(vm,s),d=io(vm,s),f=c.value===r,[m,h]=j.useState(a??""),[u,p]=j.useState(!1),y=ft(t,b=>{var _;return(_=d.itemRefCallback)==null?void 0:_.call(d,b,r,i)}),v=Fr(),w=j.useRef("touch"),x=()=>{i||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(XZ,{scope:s,value:r,disabled:i,textId:v,isSelected:f,onItemTextChange:j.useCallback(b=>{h(_=>_||((b==null?void 0:b.textContent)??"").trim())},[]),children:n.jsx(Mp.ItemSlot,{scope:s,value:r,disabled:i,textValue:m,children:n.jsx(Ye.div,{role:"option","aria-labelledby":v,"data-highlighted":u?"":void 0,"aria-selected":f&&u,"data-state":f?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:y,onFocus:Me(o.onFocus,()=>p(!0)),onBlur:Me(o.onBlur,()=>p(!1)),onClick:Me(o.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:Me(o.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:Me(o.onPointerDown,b=>{w.current=b.pointerType}),onPointerMove:Me(o.onPointerMove,b=>{var _;w.current=b.pointerType,i?(_=d.onItemLeave)==null||_.call(d):w.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Me(o.onPointerLeave,b=>{var _;b.currentTarget===document.activeElement&&((_=d.onItemLeave)==null||_.call(d))}),onKeyDown:Me(o.onKeyDown,b=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&b.key===" "||(IZ.includes(b.key)&&x(),b.key===" "&&b.preventDefault())})})})})});hL.displayName=vm;var Md="SelectItemText",fL=j.forwardRef((e,t)=>{const{__scopeSelect:s,className:r,style:i,...a}=e,o=ro(Md,s),c=io(Md,s),d=uL(Md,s),f=zZ(Md,s),[m,h]=j.useState(null),u=ft(t,x=>h(x),d.onItemTextChange,x=>{var b;return(b=c.itemTextRefCallback)==null?void 0:b.call(c,x,d.value,d.disabled)}),p=m==null?void 0:m.textContent,y=j.useMemo(()=>n.jsx("option",{value:d.value,disabled:d.disabled,children:p},d.value),[d.disabled,d.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:w}=f;return kn(()=>(v(y),()=>w(y)),[v,w,y]),n.jsxs(n.Fragment,{children:[n.jsx(Ye.span,{id:d.textId,...a,ref:u}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?eo.createPortal(a.children,o.valueNode):null]})});fL.displayName=Md;var mL="SelectItemIndicator",pL=j.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e;return uL(mL,s).isSelected?n.jsx(Ye.span,{"aria-hidden":!0,...r,ref:t}):null});pL.displayName=mL;var ky="SelectScrollUpButton",gL=j.forwardRef((e,t)=>{const s=io(ky,e.__scopeSelect),r=Aw(ky,e.__scopeSelect),[i,a]=j.useState(!1),o=ft(t,r.onScrollButtonChange);return kn(()=>{if(s.viewport&&s.isPositioned){let c=function(){const f=d.scrollTop>0;a(f)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),i?n.jsx(xL,{...e,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});gL.displayName=ky;var Cy="SelectScrollDownButton",vL=j.forwardRef((e,t)=>{const s=io(Cy,e.__scopeSelect),r=Aw(Cy,e.__scopeSelect),[i,a]=j.useState(!1),o=ft(t,r.onScrollButtonChange);return kn(()=>{if(s.viewport&&s.isPositioned){let c=function(){const f=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<f;a(m)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),i?n.jsx(xL,{...e,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});vL.displayName=Cy;var xL=j.forwardRef((e,t)=>{const{__scopeSelect:s,onAutoScroll:r,...i}=e,a=io("SelectScrollButton",s),o=j.useRef(null),c=Ip(s),d=j.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return j.useEffect(()=>()=>d(),[d]),kn(()=>{var m;const f=c().find(h=>h.ref.current===document.activeElement);(m=f==null?void 0:f.ref.current)==null||m.scrollIntoView({block:"nearest"})},[c]),n.jsx(Ye.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Me(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Me(i.onPointerMove,()=>{var f;(f=a.onItemLeave)==null||f.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Me(i.onPointerLeave,()=>{d()})})}),QZ="SelectSeparator",yL=j.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e;return n.jsx(Ye.div,{"aria-hidden":!0,...r,ref:t})});yL.displayName=QZ;var Py="SelectArrow",JZ=j.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,i=Dp(s),a=ro(Py,s),o=io(Py,s);return a.open&&o.position==="popper"?n.jsx(bb,{...i,...r,ref:t}):null});JZ.displayName=Py;var eG="SelectBubbleInput",bL=j.forwardRef(({__scopeSelect:e,value:t,...s},r)=>{const i=j.useRef(null),a=ft(r,i),o=Cp(t);return j.useEffect(()=>{const c=i.current;if(!c)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&m){const h=new Event("change",{bubbles:!0});m.call(c,t),c.dispatchEvent(h)}},[o,t]),n.jsx(Ye.select,{...s,style:{...WC,...s.style},ref:a,defaultValue:t})});bL.displayName=eG;function wL(e){return e===""||e===void 0}function jL(e){const t=vn(e),s=j.useRef(""),r=j.useRef(0),i=j.useCallback(o=>{const c=s.current+o;t(c),function d(f){s.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(c)},[t]),a=j.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,i,a]}function _L(e,t,s){const i=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let o=tG(e,Math.max(a,0));i.length===1&&(o=o.filter(f=>f!==s));const d=o.find(f=>f.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==s?d:void 0}function tG(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var nG=YR,NL=QR,sG=eL,rG=tL,iG=nL,SL=sL,aG=oL,kL=dL,CL=hL,oG=fL,lG=pL,PL=gL,EL=vL,TL=yL;const Vt=nG,Ut=sG,$t=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(NL,{ref:r,className:We("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,n.jsx(rG,{asChild:!0,children:n.jsx(gP,{className:"h-4 w-4 opacity-50"})})]}));$t.displayName=NL.displayName;const AL=j.forwardRef(({className:e,...t},s)=>n.jsx(PL,{ref:s,className:We("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(SD,{className:"h-4 w-4"})}));AL.displayName=PL.displayName;const OL=j.forwardRef(({className:e,...t},s)=>n.jsx(EL,{ref:s,className:We("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(gP,{className:"h-4 w-4"})}));OL.displayName=EL.displayName;const zt=j.forwardRef(({className:e,children:t,position:s="popper",...r},i)=>n.jsx(iG,{children:n.jsxs(SL,{ref:i,className:We("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[n.jsx(AL,{}),n.jsx(aG,{className:We("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(OL,{})]})}));zt.displayName=SL.displayName;const cG=j.forwardRef(({className:e,...t},s)=>n.jsx(kL,{ref:s,className:We("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));cG.displayName=kL.displayName;const qe=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(CL,{ref:r,className:We("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(lG,{children:n.jsx(tp,{className:"h-4 w-4"})})}),n.jsx(oG,{children:t})]}));qe.displayName=CL.displayName;const dG=j.forwardRef(({className:e,...t},s)=>n.jsx(TL,{ref:s,className:We("-mx-1 my-1 h-px bg-muted",e),...t}));dG.displayName=TL.displayName;function uG(e,t){return j.useReducer((s,r)=>t[s][r]??s,e)}var Ow="ScrollArea",[RL,Lse]=ls(Ow),[hG,pr]=RL(Ow),LL=j.forwardRef((e,t)=>{const{__scopeScrollArea:s,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=e,[c,d]=j.useState(null),[f,m]=j.useState(null),[h,u]=j.useState(null),[p,y]=j.useState(null),[v,w]=j.useState(null),[x,b]=j.useState(0),[_,N]=j.useState(0),[C,I]=j.useState(!1),[k,E]=j.useState(!1),M=ft(t,T=>d(T)),P=Vc(i);return n.jsx(hG,{scope:s,type:r,dir:P,scrollHideDelay:a,scrollArea:c,viewport:f,onViewportChange:m,content:h,onContentChange:u,scrollbarX:p,onScrollbarXChange:y,scrollbarXEnabled:C,onScrollbarXEnabledChange:I,scrollbarY:v,onScrollbarYChange:w,scrollbarYEnabled:k,onScrollbarYEnabledChange:E,onCornerWidthChange:b,onCornerHeightChange:N,children:n.jsx(Ye.div,{dir:P,...o,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});LL.displayName=Ow;var ML="ScrollAreaViewport",IL=j.forwardRef((e,t)=>{const{__scopeScrollArea:s,children:r,nonce:i,...a}=e,o=pr(ML,s),c=j.useRef(null),d=ft(t,c,o.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),n.jsx(Ye.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});IL.displayName=ML;var ki="ScrollAreaScrollbar",Rw=j.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=pr(ki,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,c=e.orientation==="horizontal";return j.useEffect(()=>(c?a(!0):o(!0),()=>{c?a(!1):o(!1)}),[c,a,o]),i.type==="hover"?n.jsx(fG,{...r,ref:t,forceMount:s}):i.type==="scroll"?n.jsx(mG,{...r,ref:t,forceMount:s}):i.type==="auto"?n.jsx(DL,{...r,ref:t,forceMount:s}):i.type==="always"?n.jsx(Lw,{...r,ref:t}):null});Rw.displayName=ki;var fG=j.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=pr(ki,e.__scopeScrollArea),[a,o]=j.useState(!1);return j.useEffect(()=>{const c=i.scrollArea;let d=0;if(c){const f=()=>{window.clearTimeout(d),o(!0)},m=()=>{d=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return c.addEventListener("pointerenter",f),c.addEventListener("pointerleave",m),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",f),c.removeEventListener("pointerleave",m)}}},[i.scrollArea,i.scrollHideDelay]),n.jsx(Qn,{present:s||a,children:n.jsx(DL,{"data-state":a?"visible":"hidden",...r,ref:t})})}),mG=j.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=pr(ki,e.__scopeScrollArea),a=e.orientation==="horizontal",o=$p(()=>d("SCROLL_END"),100),[c,d]=uG("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return j.useEffect(()=>{if(c==="idle"){const f=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(f)}},[c,i.scrollHideDelay,d]),j.useEffect(()=>{const f=i.viewport,m=a?"scrollLeft":"scrollTop";if(f){let h=f[m];const u=()=>{const p=f[m];h!==p&&(d("SCROLL"),o()),h=p};return f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[i.viewport,a,d,o]),n.jsx(Qn,{present:s||c!=="hidden",children:n.jsx(Lw,{"data-state":c==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Me(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Me(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),DL=j.forwardRef((e,t)=>{const s=pr(ki,e.__scopeScrollArea),{forceMount:r,...i}=e,[a,o]=j.useState(!1),c=e.orientation==="horizontal",d=$p(()=>{if(s.viewport){const f=s.viewport.offsetWidth<s.viewport.scrollWidth,m=s.viewport.offsetHeight<s.viewport.scrollHeight;o(c?f:m)}},10);return Nc(s.viewport,d),Nc(s.content,d),n.jsx(Qn,{present:r||a,children:n.jsx(Lw,{"data-state":a?"visible":"hidden",...i,ref:t})})}),Lw=j.forwardRef((e,t)=>{const{orientation:s="vertical",...r}=e,i=pr(ki,e.__scopeScrollArea),a=j.useRef(null),o=j.useRef(0),[c,d]=j.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=VL(c.viewport,c.content),m={...r,sizes:c,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:u=>a.current=u,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:u=>o.current=u};function h(u,p){return bG(u,o.current,c,p)}return s==="horizontal"?n.jsx(pG,{...m,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const u=i.viewport.scrollLeft,p=_S(u,c,i.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:u=>{i.viewport&&(i.viewport.scrollLeft=u)},onDragScroll:u=>{i.viewport&&(i.viewport.scrollLeft=h(u,i.dir))}}):s==="vertical"?n.jsx(gG,{...m,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const u=i.viewport.scrollTop,p=_S(u,c);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:u=>{i.viewport&&(i.viewport.scrollTop=u)},onDragScroll:u=>{i.viewport&&(i.viewport.scrollTop=h(u))}}):null}),pG=j.forwardRef((e,t)=>{const{sizes:s,onSizesChange:r,...i}=e,a=pr(ki,e.__scopeScrollArea),[o,c]=j.useState(),d=j.useRef(null),f=ft(t,d,a.onScrollbarXChange);return j.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),n.jsx($L,{"data-orientation":"horizontal",...i,ref:f,sizes:s,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fp(s)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,h)=>{if(a.viewport){const u=a.viewport.scrollLeft+m.deltaX;e.onWheelScroll(u),qL(u,h)&&m.preventDefault()}},onResize:()=>{d.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ym(o.paddingLeft),paddingEnd:ym(o.paddingRight)}})}})}),gG=j.forwardRef((e,t)=>{const{sizes:s,onSizesChange:r,...i}=e,a=pr(ki,e.__scopeScrollArea),[o,c]=j.useState(),d=j.useRef(null),f=ft(t,d,a.onScrollbarYChange);return j.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),n.jsx($L,{"data-orientation":"vertical",...i,ref:f,sizes:s,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fp(s)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,h)=>{if(a.viewport){const u=a.viewport.scrollTop+m.deltaY;e.onWheelScroll(u),qL(u,h)&&m.preventDefault()}},onResize:()=>{d.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ym(o.paddingTop),paddingEnd:ym(o.paddingBottom)}})}})}),[vG,FL]=RL(ki),$L=j.forwardRef((e,t)=>{const{__scopeScrollArea:s,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:m,onResize:h,...u}=e,p=pr(ki,s),[y,v]=j.useState(null),w=ft(t,M=>v(M)),x=j.useRef(null),b=j.useRef(""),_=p.viewport,N=r.content-r.viewport,C=vn(m),I=vn(d),k=$p(h,10);function E(M){if(x.current){const P=M.clientX-x.current.left,T=M.clientY-x.current.top;f({x:P,y:T})}}return j.useEffect(()=>{const M=P=>{const T=P.target;(y==null?void 0:y.contains(T))&&C(P,N)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[_,y,N,C]),j.useEffect(I,[r,I]),Nc(y,k),Nc(p.content,k),n.jsx(vG,{scope:s,scrollbar:y,hasThumb:i,onThumbChange:vn(a),onThumbPointerUp:vn(o),onThumbPositionChange:I,onThumbPointerDown:vn(c),children:n.jsx(Ye.div,{...u,ref:w,style:{position:"absolute",...u.style},onPointerDown:Me(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),x.current=y.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),E(M))}),onPointerMove:Me(e.onPointerMove,E),onPointerUp:Me(e.onPointerUp,M=>{const P=M.target;P.hasPointerCapture(M.pointerId)&&P.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),xm="ScrollAreaThumb",zL=j.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=FL(xm,e.__scopeScrollArea);return n.jsx(Qn,{present:s||i.hasThumb,children:n.jsx(xG,{ref:t,...r})})}),xG=j.forwardRef((e,t)=>{const{__scopeScrollArea:s,style:r,...i}=e,a=pr(xm,s),o=FL(xm,s),{onThumbPositionChange:c}=o,d=ft(t,h=>o.onThumbChange(h)),f=j.useRef(void 0),m=$p(()=>{f.current&&(f.current(),f.current=void 0)},100);return j.useEffect(()=>{const h=a.viewport;if(h){const u=()=>{if(m(),!f.current){const p=wG(h,c);f.current=p,c()}};return c(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[a.viewport,m,c]),n.jsx(Ye.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Me(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),y=h.clientX-p.left,v=h.clientY-p.top;o.onThumbPointerDown({x:y,y:v})}),onPointerUp:Me(e.onPointerUp,o.onThumbPointerUp)})});zL.displayName=xm;var Mw="ScrollAreaCorner",BL=j.forwardRef((e,t)=>{const s=pr(Mw,e.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&r?n.jsx(yG,{...e,ref:t}):null});BL.displayName=Mw;var yG=j.forwardRef((e,t)=>{const{__scopeScrollArea:s,...r}=e,i=pr(Mw,s),[a,o]=j.useState(0),[c,d]=j.useState(0),f=!!(a&&c);return Nc(i.scrollbarX,()=>{var h;const m=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(m),d(m)}),Nc(i.scrollbarY,()=>{var h;const m=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(m),o(m)}),f?n.jsx(Ye.div,{...r,ref:t,style:{width:a,height:c,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function ym(e){return e?parseInt(e,10):0}function VL(e,t){const s=e/t;return isNaN(s)?0:s}function Fp(e){const t=VL(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-s)*t;return Math.max(r,18)}function bG(e,t,s,r="ltr"){const i=Fp(s),a=i/2,o=t||a,c=i-o,d=s.scrollbar.paddingStart+o,f=s.scrollbar.size-s.scrollbar.paddingEnd-c,m=s.content-s.viewport,h=r==="ltr"?[0,m]:[m*-1,0];return UL([d,f],h)(e)}function _S(e,t,s="ltr"){const r=Fp(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,c=a-r,d=s==="ltr"?[0,o]:[o*-1,0],f=_y(e,d);return UL([0,o],[0,c])(f)}function UL(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}function qL(e,t){return e>0&&e<t}var wG=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=s.left!==a.left,c=s.top!==a.top;(o||c)&&t(),s=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function $p(e,t){const s=vn(e),r=j.useRef(0);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),j.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function Nc(e,t){const s=vn(t);kn(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(s)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,s])}var HL=LL,jG=IL,_G=BL;const Iw=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(HL,{ref:r,className:We("relative overflow-hidden",e),...s,children:[n.jsx(jG,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(WL,{}),n.jsx(_G,{})]}));Iw.displayName=HL.displayName;const WL=j.forwardRef(({className:e,orientation:t="vertical",...s},r)=>n.jsx(Rw,{ref:r,orientation:t,className:We("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:n.jsx(zL,{className:"relative flex-1 rounded-full bg-border"})}));WL.displayName=Rw.displayName;class NG{constructor(){yr(this,"fcmToken",null)}async initialize(){if(vt.isNativePlatform())try{const{PushNotifications:t}=await Xe(async()=>{const{PushNotifications:i}=await Promise.resolve().then(()=>z4);return{PushNotifications:i}},void 0),{App:s}=await Xe(async()=>{const{App:i}=await import("./index-D6AwXOyC.js");return{App:i}},[]);if((await t.requestPermissions()).receive!=="granted"){console.warn("Push notification permission denied");return}await t.register(),t.addListener("registration",i=>{console.log("🔥 FCM Token:",i.value),this.fcmToken=i.value,this.sendTokenToBackend(i.value)}),t.addListener("pushNotificationReceived",i=>{var a;console.log("📱 Push received:",i),(a=i.data)!=null&&a.orderId&&window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(i.data.orderId),orderNumber:i.data.orderNumber,amount:i.data.amount,fromPush:!0}}))}),t.addListener("pushNotificationActionPerformed",i=>{var o;console.log("🚀 Push notification tapped - app opening:",i);const a=(o=i.notification.data)==null?void 0:o.orderId;a&&(window.location.href="/vendor/home",setTimeout(()=>{var c,d;window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(a),orderNumber:(c=i.notification.data)==null?void 0:c.orderNumber,amount:(d=i.notification.data)==null?void 0:d.amount,autoOpened:!0,fromPush:!0}}))},1500))}),s.addListener("appStateChange",({isActive:i})=>{i&&(console.log("📱 App resumed from push notification"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))}),console.log("🔥 Real push notifications initialized")}catch(t){console.error("❌ Push notifications setup failed:",t)}}async sendTokenToBackend(t){try{(await fetch("/api/vendor/fcm-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fcmToken:t,vendorId:localStorage.getItem("vendor_id")})})).ok&&console.log("✅ FCM token sent to backend")}catch(s){console.warn("Failed to send FCM token:",s)}}getFCMToken(){return this.fcmToken}}const SG=new NG;class kG{constructor(){yr(this,"persistentIntervals",new Map);this.setupNotificationHandlers(),this.initializePushNotifications()}async initializePushNotifications(){vt.isNativePlatform()&&await SG.initialize()}async setupNotificationHandlers(){if(vt.isNativePlatform())try{const{LocalNotifications:t}=await Xe(async()=>{const{LocalNotifications:r}=await import("./index-CShmxw53.js");return{LocalNotifications:r}},[]),{App:s}=await Xe(async()=>{const{App:r}=await import("./index-D6AwXOyC.js");return{App:r}},[]);t.addListener("localNotificationActionPerformed",async r=>{var i;console.log("🚀 NOTIFICATION TAPPED - AUTO OPENING APP:",r);try{const{App:a}=await Xe(async()=>{const{App:d}=await import("./index-D6AwXOyC.js");return{App:d}},[]),o=await a.getState();if(console.log("📱 Current app state:",o),!o.isActive){console.log("🚀 App was in background - bringing to foreground"),window.focus(),document.body.click();try{await a.minimizeApp(),setTimeout(()=>{window.focus()},100)}catch{console.log("Minimize/restore not available")}}const c=parseInt(((i=r.notification.extra)==null?void 0:i.orderId)||"0");c&&(console.log("🎯 Opening order:",c),window.location.href="/vendor/home",setTimeout(()=>{var d,f;window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:c,orderNumber:(d=r.notification.extra)==null?void 0:d.orderNumber,amount:(f=r.notification.extra)==null?void 0:f.amount,autoOpened:!0,fromNotification:!0}}))},1500))}catch(a){console.error("❌ Failed to open app:",a),window.location.href="/vendor/home"}}),s.addListener("appStateChange",({isActive:r})=>{r&&(console.log("📱 App resumed - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))})}catch(t){console.warn("Could not setup notification handlers:",t)}}async showOrderNotification(t,s,r){console.log("🔔 Using FCM push notifications for order:",t);const{pushNotificationService:i}=await Xe(async()=>{const{pushNotificationService:a}=await import("./pushNotificationService-Crm424BX.js");return{pushNotificationService:a}},[]);await i.showOrderNotification(t,s,r),this.playBeepSound(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:s}}))}async requestBackendPushNotification(t,s,r){try{(await fetch("/api/vendor/send-order-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendorId:localStorage.getItem("vendor_id"),orderId:r,orderNumber:t,amount:s,title:"🔔 NEW ORDER RECEIVED",body:`Order #${t} - ₹${s}`,data:{orderId:r.toString(),orderNumber:t,amount:s,action:"openOrder"}})})).ok?console.log("✅ Backend push notification requested"):console.warn("❌ Backend push notification failed")}catch(i){console.warn("Backend push notification error:",i)}}async showPushNotification(t,s,r){try{console.log("🚀 Simulating push notification for auto-opening")}catch(i){console.warn("Push notification failed, using local fallback:",i)}}async showLocalNotification(t,s,r){try{const{LocalNotifications:i}=await Xe(async()=>{const{LocalNotifications:o}=await import("./index-CShmxw53.js");return{LocalNotifications:o}},[]);if((await i.requestPermissions()).display!=="granted"){console.warn("Notification permission not granted");return}await i.schedule({notifications:[{title:"🔔 NEW ORDER - TAP TO OPEN APP",body:`Order #${t} - ₹${s}
👆 TAP HERE TO OPEN`,id:r,schedule:{at:new Date(Date.now()+100)},sound:"default",attachments:void 0,actionTypeId:"OPEN_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF0000",channelId:"order-alerts",summaryText:"Tap to open app",extra:{orderId:r.toString(),orderNumber:t,amount:s,autoOpen:!0,action:"openApp",deepLink:"vendor://order/"+r}}]}),console.log("📱 Local notification scheduled for order:",r)}catch(i){console.warn("Local notifications not available:",i)}}showWebNotification(t,s,r){if("Notification"in window&&Notification.permission==="granted"){const i=new Notification("🔔 New Order!",{body:`Order #${t} - ₹${s}`,icon:"/favicon.ico",tag:`order-${r}`,requireInteraction:!0});i.onclick=()=>{window.focus(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:s}})),i.close()},setTimeout(()=>i.close(),3e4)}}startPersistentAlert(t,s,r){this.stopPersistentAlert(r);const i=setInterval(()=>{console.log("📳 Persistent alert for order:",t),"vibrate"in navigator&&navigator.vibrate([1e3,300,1e3,300,1e3]),this.playMobileSound()},5e3);this.persistentIntervals.set(r,i),setTimeout(()=>{this.stopPersistentAlert(r)},3e5)}stopPersistentAlert(t){const s=this.persistentIntervals.get(t);s&&(clearInterval(s),this.persistentIntervals.delete(t),console.log("🛑 Stopped persistent alert for order:",t))}async clearNotification(t){if(this.stopPersistentAlert(t),vt.isNativePlatform())try{const{LocalNotifications:s}=await Xe(async()=>{const{LocalNotifications:r}=await import("./index-CShmxw53.js");return{LocalNotifications:r}},[]);await s.cancel({notifications:[{id:t}]}),console.log("📱 Cleared background notification for order:",t)}catch(s){console.warn("Could not clear notification:",s)}}async requestPermissions(){if(vt.isNativePlatform())try{const{LocalNotifications:t}=await Xe(async()=>{const{LocalNotifications:r}=await import("./index-CShmxw53.js");return{LocalNotifications:r}},[]),s=await t.requestPermissions();console.log("🔔 Notification permissions:",s);try{await t.createChannel({id:"order-alerts",name:"Order Alerts",description:"High priority notifications for new orders",sound:"default",importance:5,visibility:1,lights:!0,vibration:!0}),console.log("📢 High priority notification channel created")}catch(r){console.warn("Could not create notification channel:",r)}return s.display==="granted"}catch(t){return console.warn("Local notifications not available:",t),!1}return"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":"Notification"in window&&Notification.permission==="granted"}playBeepSound(){try{const t=new(window.AudioContext||window.webkitAudioContext),s=t.createOscillator(),r=t.createGain();s.connect(r),r.connect(t.destination),s.frequency.value=800,s.type="square",r.gain.setValueAtTime(.3,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.3),s.start(t.currentTime),s.stop(t.currentTime+.3),console.log("🔊 Beep sound played")}catch(t){console.warn("Audio not available:",t)}}playMobileSound(){try{const t=new(window.AudioContext||window.webkitAudioContext);for(let s=0;s<3;s++)setTimeout(()=>{const r=t.createOscillator(),i=t.createGain();r.connect(i),i.connect(t.destination),r.frequency.value=1e3+s*200,r.type="sine",i.gain.setValueAtTime(.5,t.currentTime),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),r.start(t.currentTime),r.stop(t.currentTime+.2)},s*300);console.log("📱 Mobile sound sequence played")}catch(t){console.warn("Mobile audio not available:",t)}}}const Fl=new kG,Ev=Object.freeze(Object.defineProperty({__proto__:null,simpleNotificationService:Fl},Symbol.toStringTag,{value:"Module"}));function zp(){const[e,t]=j.useState([]),[s,r]=j.useState(!1),[i,a]=j.useState(0),o=j.useRef(null),c=j.useRef(null);j.useRef(0),j.useEffect(()=>{Fl.requestPermissions()},[]);const d=async()=>{if(!await Re.getToken()){console.warn("No authentication token found for WebSocket connection");return}const y=window.location.href;if(y.includes("ngrok")||y.includes("ngrok-free.app")){console.log("Ngrok detected - using HTTP polling instead of WebSocket"),f();return}console.log("Using HTTP polling for notifications"),f()},f=()=>{r(!0),console.log("Notification polling disabled")};return j.useEffect(()=>((async()=>{await d()})(),()=>{c.current&&clearInterval(c.current),o.current&&o.current.close(1e3,"Component unmounting")}),[]),j.useEffect(()=>{console.log("Initial notification fetch disabled")},[]),{notifications:e,unreadCount:i,isConnected:s,markAsRead:async p=>{console.log("Mark as read:",p),a(y=>Math.max(0,y-1))},markAllAsRead:async()=>{console.log("Mark all as read"),a(0)},clearNotifications:()=>{t([]),a(0)}}}function CG({className:e=""}){st();const{navigateWithAuth:t}=Bc(),{notifications:s,unreadCount:r,markAsRead:i,markAllAsRead:a,clearNotifications:o,isConnected:c}=zp(),[d,f]=j.useState(!1),m=y=>{switch(y){case"order":return n.jsx(At,{className:"h-4 w-4 text-blue-600"});case"payment":return n.jsx(to,{className:"h-4 w-4 text-green-600"});case"system":return n.jsx(ju,{className:"h-4 w-4 text-orange-600"});default:return n.jsx(ir,{className:"h-4 w-4 text-gray-600"})}},h=y=>{switch(y){case"order":return"border-l-blue-500 bg-blue-50";case"payment":return"border-l-green-500 bg-green-50";case"system":return"border-l-orange-500 bg-orange-50";default:return"border-l-gray-500 bg-gray-50"}},u=y=>{y.read||i(y.id),y.action_url&&(t(y.action_url),f(!1))},p=y=>{const v=new Date(y),x=Math.floor((new Date().getTime()-v.getTime())/(1e3*60));return x<1?"Just now":x<60?`${x}m ago`:x<1440?`${Math.floor(x/60)}h ago`:v.toLocaleDateString()};return n.jsxs(Os,{open:d,onOpenChange:f,children:[n.jsx(AZ,{asChild:!0,children:n.jsxs(ne,{variant:"ghost",size:"sm",className:`relative p-2 hover:bg-gray-100 rounded-full ${e}`,children:[n.jsx(ir,{className:`h-5 w-5 ${c?"text-gray-700":"text-gray-400"}`}),r>0&&n.jsx(Ie,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:r>99?"99+":r}),!c&&n.jsx("div",{className:"absolute -bottom-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})]})}),n.jsxs(gs,{side:"right",className:"w-full sm:w-96",children:[n.jsxs(vs,{className:"pb-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(xs,{className:"flex items-center gap-2",children:[n.jsx(ir,{className:"h-5 w-5"}),"Notifications",r>0&&n.jsxs(Ie,{variant:"secondary",className:"ml-2",children:[r," new"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!c&&n.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[n.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full animate-pulse"}),"Offline"]}),s.length>0&&n.jsx(ne,{variant:"ghost",size:"sm",onClick:o,className:"text-xs",children:"Clear All"})]})]}),r>0&&n.jsxs(ne,{variant:"outline",size:"sm",onClick:a,className:"w-full",children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Mark All as Read"]})]}),n.jsx(Iw,{className:"h-[calc(100vh-120px)]",children:s.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx(ir,{className:"h-12 w-12 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),n.jsx("p",{className:"text-sm text-gray-500",children:"You're all caught up! New notifications will appear here."})]}):n.jsx("div",{className:"space-y-2",children:s.map(y=>n.jsx("div",{onClick:()=>u(y),className:`
                    p-4 rounded-lg border-l-4 cursor-pointer transition-all hover:shadow-md
                    ${h(y.type)}
                    ${y.read?"opacity-75":"ring-2 ring-blue-100"}
                  `,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-1",children:m(y.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:y.title}),!y.read&&n.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full flex-shrink-0 ml-2"})]}),n.jsx("p",{className:"text-sm text-gray-700 mb-2 line-clamp-2",children:y.message}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[n.jsx(or,{className:"h-3 w-3"}),p(y.timestamp||new Date().toISOString())]}),y.action_url&&n.jsx(ne,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-blue-600 hover:text-blue-800",onClick:v=>{v.stopPropagation(),u(y)},children:"View"})]})]})]})},y.id))})}),n.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:n.jsxs("div",{className:`
            flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-xs
            ${c?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}
          `,children:[n.jsx("div",{className:`h-2 w-2 rounded-full ${c?"bg-green-500":"bg-red-500 animate-pulse"}`}),c?"Connected to notification service":"Reconnecting..."]})})]})]})}function PG(){var Ft,Fs;const e=st(),{toast:t}=hn(),{navigateWithAuth:s}=Bc(),[r,i]=j.useState([]),[a,o]=j.useState(!0),[c,d]=j.useState("all"),[f,m]=j.useState(""),[h,u]=j.useState(""),[p,y]=j.useState(!1),[v,w]=j.useState(null),[x,b]=j.useState({}),[_,N]=j.useState(!1),[C,I]=j.useState(null),[k,E]=j.useState(0),[M,P]=j.useState(""),[T,A]=j.useState(!1),[z,O]=j.useState(!1),[F,G]=j.useState(null),[Y,K]=j.useState(""),[U,B]=j.useState(""),[R,$]=j.useState(""),[W,Z]=j.useState(""),[X,V]=j.useState(""),[H,se]=j.useState(""),[Q,ie]=j.useState(""),[he,te]=j.useState(""),[ge,Se]=j.useState([]),[fe,ke]=j.useState(!1),[xe,de]=j.useState(null),[me,ee]=j.useState(!1),[ae,oe]=j.useState("");zp(),j.useEffect(()=>{be();const le=Je=>{Je.detail.type==="order"&&be()};window.addEventListener("newNotification",le);const De=setInterval(async()=>{try{if(!await Re.getToken())return;const Fe=await Jd.getOrders();i(Fe)}catch(Je){console.error("Auto-refresh error:",Je)}},3e4);return()=>{window.removeEventListener("newNotification",le),clearInterval(De)}},[]);const be=async()=>{var le,De,Je;try{if(!await Re.getToken()){s("/orders");return}const He=await Jd.getOrders();i(He);const Ze={};for(const Bt of He){const Et=(Je=(De=(le=Bt.items)==null?void 0:le[0])==null?void 0:De.product_details)==null?void 0:Je.vendor_name;Et&&!Ze[Et]&&(Ze[Et]=await Te(Et))}b(Ze)}catch(Fe){console.error("Error fetching orders:",Fe),t({title:"Error",description:Fe.message||"Failed to load orders",variant:"destructive"})}finally{o(!1)}},je=le=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",out_for_delivery:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[le]||"bg-gray-100 text-gray-800",we=le=>({pending:"Order Placed",confirmed:"Confirmed",preparing:"Preparing",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"})[le]||le,re=le=>le==="all"?r:r.filter(De=>De.status===le),Ce=async()=>{if(!f.trim()){t({title:"Reason Required",description:"Please provide a valid reason for cancellation",variant:"destructive"});return}try{await Jd.cancelOrder(v,f),t({title:"Order Cancelled",description:"Your order has been cancelled successfully."}),y(!1),m(""),u(""),be()}catch(le){console.error("Error cancelling order:",le),t({title:"Cancellation Failed",description:le.message||"Failed to cancel order",variant:"destructive"})}},Te=async le=>{var De;try{const{response:Je,data:Fe}=await Be(`search/vendors/?search=${encodeURIComponent(le)}`);if(!Je.ok)return!1;const He=(De=Fe==null?void 0:Fe.results)==null?void 0:De.find(Ze=>Ze.business_name===le);return(He==null?void 0:He.is_active)||!1}catch(Je){return console.error("Error checking vendor status:",Je),!1}},lt=async le=>{var De,Je,Fe;try{const He=(Fe=(Je=(De=le.items)==null?void 0:De[0])==null?void 0:Je.product_details)==null?void 0:Fe.vendor_name;if(He&&!await Te(He)){t({title:"Vendor Offline",description:"This vendor is currently offline. Cannot reorder at this time.",variant:"destructive"});return}for(const Ze of le.items);t({title:"Items Added",description:"Order items added to cart"}),e("/cart")}catch{t({title:"Reorder Failed",description:"Failed to add items to cart",variant:"destructive"})}},it=({order:le})=>{var De,Je,Fe,He,Ze,Bt,Et,Cn,Ss,Ln,Ci,at;return n.jsxs(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow mb-4",onClick:()=>{de(le),ke(!0)},children:[n.jsx(jt,{className:"pb-3",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsxs(_t,{className:"text-lg",children:["Order #",le.order_number]}),n.jsx("p",{className:"text-sm text-gray-600",children:new Date(le.created_at).toLocaleDateString()})]}),n.jsx(Ie,{className:`${je(le.status)} px-3 py-1`,children:we(le.status)})]})}),n.jsx(Ae,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2",children:[(De=le.items)==null?void 0:De.length," item",((Je=le.items)==null?void 0:Je.length)!==1?"s":""]}),n.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[(Fe=le.items)==null?void 0:Fe.slice(0,3).map(et=>{var St,sn,rn,Pn;return n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("img",{src:as((rn=(sn=(St=et.product_details)==null?void 0:St.images)==null?void 0:sn[0])==null?void 0:rn.image_url),alt:et.product_name,className:"w-12 h-12 object-cover rounded-lg border"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:et.product_name}),n.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:(Pn=et.product_details)==null?void 0:Pn.category})]})]},et.id)}),((He=le.items)==null?void 0:He.length)>3&&n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center flex-shrink-0",children:n.jsxs("span",{className:"text-xs text-gray-600",children:["+",le.items.length-3]})})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-1",children:[n.jsx(ms,{className:"h-4 w-4"}),n.jsx("button",{onClick:et=>{var sn,rn,Pn;et.stopPropagation();const St=(Pn=(rn=(sn=le.items)==null?void 0:sn[0])==null?void 0:rn.product_details)==null?void 0:Pn.vendor_id;St&&e(`/vendor/${St}`)},className:"text-blue-600 hover:underline text-xs font-medium truncate",children:((Et=(Bt=(Ze=le.items)==null?void 0:Ze[0])==null?void 0:Bt.product_details)==null?void 0:Et.vendor_name)||"Vendor"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Kt,{className:"h-4 w-4"}),n.jsx("span",{className:"truncate",children:le.delivery_address})]}),le.status==="out_for_delivery"&&n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wl,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"font-medium text-blue-800",children:"Shipping Details"})]}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Vehicle:"})," ",le.vehicle_number||"TBA"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Vehicle Color:"})," ",le.vehicle_color||"N/A"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Driver Phone:"})," ",le.delivery_boy_phone||"TBA"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"ETA:"})," ",le.estimated_delivery_time||"TBA"]}),le.delivery_fee>0&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Delivery Fee:"})," ₹",parseFloat(le.delivery_fee).toFixed(2)]})]})]}),le.status==="cancelled"&&le.cancel_reason&&n.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(is,{className:"h-4 w-4 text-red-600"}),n.jsx("span",{className:"font-medium text-red-800",children:"Cancellation Reason"})]}),n.jsx("p",{className:"text-sm text-red-700",children:le.cancel_reason}),le.refund_status&&n.jsxs("p",{className:"text-sm text-red-600 mt-1",children:[n.jsx("span",{className:"font-medium",children:"Refund:"})," ",le.refund_status]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[n.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["₹",parseFloat(le.total_amount).toFixed(2)]}),n.jsxs("div",{className:"flex gap-2",children:[le.status==="out_for_delivery"&&n.jsx(ne,{variant:"outline",size:"sm",onClick:async et=>{et.stopPropagation();try{const St=await Re.getToken(),{response:sn}=await Be(`/api/orders/${le.id}/status/`,{method:"POST",body:JSON.stringify({status:"delivered",notes:"Marked as received by customer"})});sn.ok&&i(rn=>rn.map(Pn=>Pn.id===le.id?{...Pn,status:"delivered",delivered_at:new Date().toISOString()}:Pn))}catch(St){console.error("Error marking as received:",St)}},className:"text-green-600 border-green-200 hover:bg-green-50",children:"Received"}),(le.status==="cancelled"||le.status==="pending"||le.status==="delivered")&&x[(Ln=(Ss=(Cn=le.items)==null?void 0:Cn[0])==null?void 0:Ss.product_details)==null?void 0:Ln.vendor_name]&&n.jsx(ne,{variant:"outline",size:"sm",onClick:et=>{et.stopPropagation(),lt(le)},className:"text-green-600 border-green-200 hover:bg-green-50",children:n.jsx(ii,{className:"h-4 w-4"})}),le.status==="pending"&&n.jsx(ne,{variant:"outline",size:"sm",onClick:et=>{et.stopPropagation(),w(le.id),y(!0)},className:"text-red-600 border-red-200 hover:bg-red-50",children:"Cancel"}),le.status==="delivered"&&!((Ci=le.refunds)!=null&&Ci.some(et=>["requested","approved","rejected","appeal","processed","completed"].includes(et.status)))&&(()=>{const et=new Date(le.delivered_at);return(new Date-et)/(1e3*60*60)<=24})()&&n.jsx(ne,{variant:"outline",size:"sm",onClick:et=>{et.stopPropagation(),G(le),O(!0)},className:"text-orange-600 border-orange-200 hover:bg-orange-50",children:"Return"}),le.status==="delivered"&&!((at=le.refunds)!=null&&at.some(et=>["requested","approved","rejected","appeal","processed","completed"].includes(et.status)))&&(()=>{const et=new Date(le.delivered_at);return(new Date-et)/(1e3*60*60)>24})()&&n.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Return window expired"}),le.status==="delivered"&&!le.review&&n.jsx(ne,{variant:"outline",size:"sm",onClick:et=>{et.stopPropagation(),I(le),E(0),P(""),A(!1),N(!0)},className:"text-emerald-600 border-emerald-200 hover:bg-emerald-50",children:n.jsx(dn,{className:"h-4 w-4"})}),le.status==="delivered"&&le.review&&n.jsx(ne,{variant:"outline",size:"sm",onClick:et=>{et.stopPropagation(),I(le),E(le.review.overall_rating),P(le.review.review_text||""),A(!0),N(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Edit Review"})]})]})]})})]},le.id)};return a?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading your orders..."})]})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[n.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:n.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:n.jsx(Yt,{className:"h-6 w-6 text-gray-700"})}),n.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Orders"}),n.jsx(CG,{})]})}),n.jsx("main",{className:"max-w-4xl mx-auto p-4 pt-2",children:r.length===0?n.jsxs("div",{className:"text-center py-16",children:[n.jsx(At,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No orders yet"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"Start shopping to see your orders here"}),n.jsx(ne,{onClick:()=>e("/"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Start Shopping"})]}):n.jsxs(Si,{value:c,onValueChange:d,className:"space-y-6",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(qr,{className:"flex w-max min-w-full gap-1",children:[n.jsxs(Ct,{value:"all",className:"flex-shrink-0 px-2",children:["All ",n.jsxs("span",{className:"font-bold",children:["(",r.length,")"]})]}),n.jsxs(Ct,{value:"pending",className:"flex-shrink-0 px-2",children:["Pending ",n.jsxs("span",{className:"font-bold",children:["(",re("pending").length,")"]})]}),n.jsxs(Ct,{value:"confirmed",className:"flex-shrink-0 px-2",children:["Confirmed ",n.jsxs("span",{className:"font-bold",children:["(",re("confirmed").concat(re("preparing")).length,")"]})]}),n.jsxs(Ct,{value:"shipped",className:"flex-shrink-0 px-2",children:["Shipped ",n.jsxs("span",{className:"font-bold",children:["(",re("out_for_delivery").length,")"]})]}),n.jsxs(Ct,{value:"delivered",className:"flex-shrink-0 px-2",children:["Delivered ",n.jsxs("span",{className:"font-bold",children:["(",re("delivered").length,")"]})]}),n.jsxs(Ct,{value:"returns",className:"flex-shrink-0 px-2",children:["Returns ",n.jsxs("span",{className:"font-bold",children:["(",r.filter(le=>{var De;return((De=le.refunds)==null?void 0:De.length)>0}).length,")"]})]}),n.jsxs(Ct,{value:"reviewed",className:"flex-shrink-0 px-2",children:["Reviewed ",n.jsxs("span",{className:"font-bold",children:["(",r.filter(le=>le.review).length,")"]})]}),n.jsxs(Ct,{value:"cancelled",className:"flex-shrink-0 px-2",children:["Cancelled ",n.jsxs("span",{className:"font-bold",children:["(",re("cancelled").length,")"]})]})]})}),n.jsx(dt,{value:"all",className:"space-y-4",children:r.map(le=>n.jsx(it,{order:le},le.id))}),n.jsx(dt,{value:"pending",className:"space-y-4",children:re("pending").map(le=>n.jsx(it,{order:le},le.id))}),n.jsx(dt,{value:"confirmed",className:"space-y-4",children:re("confirmed").concat(re("preparing")).map(le=>n.jsx(it,{order:le},le.id))}),n.jsx(dt,{value:"shipped",className:"space-y-4",children:re("out_for_delivery").map(le=>n.jsx(it,{order:le},le.id))}),n.jsx(dt,{value:"delivered",className:"space-y-4",children:re("delivered").map(le=>n.jsxs("div",{children:[n.jsx(it,{order:le}),le.status==="delivered"&&le.delivered_at&&n.jsx("div",{className:"mt-2 px-4 py-2 bg-gray-50 rounded text-xs text-gray-600",children:(()=>{var Ze;const De=new Date(le.delivered_at),He=24-(new Date-De)/(1e3*60*60);return(Ze=le.refunds)!=null&&Ze.some(Bt=>["requested","approved","rejected","appeal","processed","completed"].includes(Bt.status))?"Return request already submitted":He>0?`Return available for ${Math.floor(He)} hours ${Math.floor(He%1*60)} minutes`:"Return window expired (24 hours after delivery)"})()})]},le.id))}),n.jsx(dt,{value:"returns",className:"space-y-4",children:r.filter(le=>{var De;return((De=le.refunds)==null?void 0:De.length)>0}).length>0?r.filter(le=>{var De;return((De=le.refunds)==null?void 0:De.length)>0}).map(le=>{var De,Je,Fe,He;return n.jsx("div",{className:"bg-white rounded-lg border",children:n.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>{de(le),ke(!0)},children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("h3",{className:"font-semibold text-sm text-gray-900",children:["Order #",le.order_number]})}),n.jsxs(Ie,{className:"bg-orange-100 text-orange-800 flex items-center gap-1 text-xs px-2 py-1",children:[n.jsx(ii,{className:"h-3 w-3"}),"Return Request"]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(ms,{className:"h-4 w-4"}),n.jsx("span",{className:"truncate",children:((Fe=(Je=(De=le.items)==null?void 0:De[0])==null?void 0:Je.product_details)==null?void 0:Fe.vendor_name)||"Vendor"})]}),(He=le.refunds)==null?void 0:He.map(Ze=>{var Bt;return n.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium",children:"Return Reason:"}),n.jsx(Ie,{className:`text-xs ${Ze.status==="requested"?"bg-yellow-100 text-yellow-800":Ze.status==="approved"?"bg-green-100 text-green-800":Ze.status==="rejected"?"bg-red-100 text-red-800":Ze.status==="appeal"?"bg-purple-100 text-purple-800":Ze.status==="processed"?"bg-blue-100 text-blue-800":Ze.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:Ze.status.charAt(0).toUpperCase()+Ze.status.slice(1)})]}),n.jsx("p",{className:"text-xs text-gray-700 capitalize",children:Ze.reason.replace("_"," ")}),Ze.customer_notes&&n.jsxs("p",{className:"text-xs text-gray-600",children:['"',Ze.customer_notes,'"']}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Amount:"})," ₹",Ze.requested_amount]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Method:"})," ",Ze.refund_method]}),((Bt=Ze.evidence_photos)==null?void 0:Bt.length)>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-xs font-medium mb-1",children:"Evidence Documents:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:Ze.evidence_photos.map((Et,Cn)=>{var Ci;const Ss=(Ci=Et.filename)==null?void 0:Ci.match(/\.(jpg|jpeg|png|gif|webp)$/i);let Ln;return Et.filename.startsWith("http")?Ln=Et.filename:Et.filename.startsWith("/media/")?Ln=`${bs.BASE_URL}${Et.filename}`:Ln=`${bs.BASE_URL}/media/${Et.filename}`,n.jsxs("div",{className:"bg-blue-100 p-2 rounded text-xs cursor-pointer hover:bg-blue-200 transition-colors flex items-center gap-1",onClick:at=>{at.stopPropagation(),Ss?(oe(Ln),ee(!0)):window.open(Ln,"_blank")},children:[Ss?n.jsx(Nn,{className:"h-3 w-3 text-blue-600"}):n.jsx(At,{className:"h-3 w-3 text-blue-600"}),n.jsx("span",{className:"text-blue-800",children:Et.filename||`Document ${Cn+1}`})]},Cn)})})]}),Ze.status==="completed"&&n.jsx("div",{className:"bg-emerald-50 border border-emerald-200 rounded p-2 mt-2",children:n.jsx("p",{className:"text-xs text-emerald-800 font-medium",children:"✅ Refund Completed"})}),Ze.status==="processed"&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mt-2",children:n.jsx("p",{className:"text-xs text-blue-800 font-medium",children:"💰 Money Transferred"})}),Ze.admin_notes&&n.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[n.jsx("span",{className:"font-medium",children:"Response:"})," ",Ze.admin_notes]}),Ze.status==="rejected"&&n.jsx(ne,{size:"sm",variant:"outline",className:"w-full mt-2",onClick:async Et=>{Et.stopPropagation();try{const Cn=await Re.getToken(),{response:Ss}=await Be(`/api/refunds/${Ze.id}/appeal/`,{method:"POST",body:JSON.stringify({customer_notes:"Appealing the rejection decision"})});Ss.ok&&(t({title:"Appeal Submitted",description:"Your appeal has been submitted for review."}),be())}catch{t({title:"Error",description:"Failed to submit appeal.",variant:"destructive"})}},children:"Appeal Decision"})]},Ze.id)}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[n.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["₹",parseFloat(le.total_amount).toFixed(2)]}),n.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:Ze=>{Ze.stopPropagation(),de(le),ke(!0)},children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]})]})},le.id)}):n.jsxs("div",{className:"text-center py-16",children:[n.jsx(ii,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No returns yet"}),n.jsx("p",{className:"text-gray-500",children:"Your return requests will appear here"})]})}),n.jsx(dt,{value:"reviewed",className:"space-y-4",children:r.filter(le=>le.review).length>0?r.filter(le=>le.review).map(le=>{var De;return n.jsx(Ee,{className:"mb-4",children:n.jsxs(Ae,{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-lg",children:["Order #",le.order_number]}),n.jsx("p",{className:"text-sm text-gray-600",children:new Date(le.created_at).toLocaleDateString()})]}),n.jsx(Ie,{className:"bg-green-100 text-green-800 px-3 py-1",children:"Reviewed"})]}),n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:"flex gap-3 overflow-x-auto",children:(De=le.items)==null?void 0:De.slice(0,3).map(Je=>{var Fe,He,Ze,Bt;return n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("img",{src:((Ze=(He=(Fe=Je.product_details)==null?void 0:Fe.images)==null?void 0:He[0])==null?void 0:Ze.image_url)||"/placeholder-product.jpg",alt:Je.product_name,className:"w-12 h-12 object-cover rounded-lg border"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:Je.product_name}),n.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:(Bt=Je.product_details)==null?void 0:Bt.category})]})]},Je.id)})})}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Your Review"}),n.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(Je=>n.jsx(dn,{className:`h-4 w-4 ${Je<=le.review.overall_rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},Je))})]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{I(le),E(le.review.overall_rating),P(le.review.review_text||""),A(!0),N(!0)},className:"h-7 text-xs",children:"Edit"})]}),le.review.review_text&&n.jsx("p",{className:"text-sm text-gray-700",children:le.review.review_text}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed on ",new Date(le.review.created_at).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-3 border-t mt-3",children:[n.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["₹",parseFloat(le.total_amount).toFixed(2)]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{de(le),ke(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"View Details"})]})]})},le.id)}):n.jsxs("div",{className:"text-center py-16",children:[n.jsx(dn,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No reviews yet"}),n.jsx("p",{className:"text-gray-500 mb-6",children:"Complete your orders and share your experience"})]})}),n.jsx(dt,{value:"cancelled",className:"space-y-4",children:re("cancelled").map(le=>n.jsx(it,{order:le},le.id))})]})}),n.jsx(Ds,{}),n.jsx(Fo,{open:p,onOpenChange:y,children:n.jsxs(Da,{className:"sm:max-w-md",children:[n.jsx(Fa,{children:n.jsx($a,{children:"Cancel Order"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"reason",children:"Reason for Cancellation *"}),n.jsxs(Vt,{value:f,onValueChange:m,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select a reason"})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"changed_mind",children:"Changed my mind"}),n.jsx(qe,{value:"found_better_price",children:"Found better price elsewhere"}),n.jsx(qe,{value:"delivery_too_long",children:"Delivery time too long"}),n.jsx(qe,{value:"ordered_by_mistake",children:"Ordered by mistake"}),n.jsx(qe,{value:"payment_issues",children:"Payment issues"}),n.jsx(qe,{value:"other",children:"Other reason"})]})]})]}),f==="other"&&n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"custom_reason",children:"Please specify"}),n.jsx(Yn,{id:"custom_reason",placeholder:"Enter your reason...",value:f,onChange:le=>m(le.target.value)})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"refund",children:"Refund Option *"}),n.jsxs(Vt,{value:h,onValueChange:u,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select refund method"})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"original_payment",children:"Refund to original payment method"}),n.jsx(qe,{value:"wallet",children:"Refund to wallet"}),n.jsx(qe,{value:"bank_transfer",children:"Bank transfer"})]})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(ne,{variant:"outline",onClick:()=>y(!1),className:"flex-1",children:"Keep Order"}),n.jsx(ne,{onClick:Ce,className:"flex-1 bg-red-600 hover:bg-red-700",disabled:!f||!h,children:"Cancel Order"})]})]})]})}),n.jsx(Fo,{open:_,onOpenChange:N,children:n.jsxs(Da,{className:"sm:max-w-md",children:[n.jsx(Fa,{children:n.jsx($a,{children:T?"Edit Review":"Rate & Review Order"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Rating *"}),n.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,3,4,5].map(le=>n.jsx("button",{onClick:()=>E(le),className:`text-2xl ${le<=k?"text-yellow-400":"text-gray-300"}`,children:"★"},le))})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"review",children:"Review (Optional)"}),n.jsx(Yn,{id:"review",placeholder:"Share your experience...",value:M,onChange:le=>P(le.target.value),rows:3})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(ne,{variant:"outline",onClick:()=>{N(!1),E(0),P(""),A(!1)},className:"flex-1",children:"Cancel"}),n.jsx(ne,{onClick:async()=>{if(k)try{const le=await Re.getToken(),De="POST",{response:Je,data:Fe}=await Be(`/api/orders/${C.id}/review/`,{method:De,body:JSON.stringify({overall_rating:k,review_text:M})});Je.ok&&Fe&&(i(He=>He.map(Ze=>Ze.id===C.id?{...Ze,review:Fe.review}:Ze)),N(!1),E(0),P(""),A(!1),t({title:T?"Review Updated":"Review Submitted",description:"Thank you for your feedback!"}))}catch(le){console.error("Error submitting review:",le),t({title:"Error",description:"Failed to submit review. Please try again.",variant:"destructive"})}},className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:!k,children:T?"Update Review":"Submit Review"})]})]})]})}),n.jsx(Os,{open:z,onOpenChange:O,children:n.jsxs(gs,{side:"bottom",className:"h-[80vh] rounded-t-xl",children:[n.jsx(vs,{className:"pb-4",children:n.jsxs(xs,{className:"text-left flex items-center gap-2",children:[n.jsx(ii,{className:"h-5 w-5"}),"Return Order #",F==null?void 0:F.order_number]})}),n.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Return Reason *"}),n.jsxs(Vt,{value:Y,onValueChange:K,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select reason for return"})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"defective_product",children:"Defective/Damaged Product"}),n.jsx(qe,{value:"wrong_item",children:"Wrong Item Delivered"}),n.jsx(qe,{value:"quality_issue",children:"Quality Issue"}),n.jsx(qe,{value:"not_as_described",children:"Not as Described"}),n.jsx(qe,{value:"expired_product",children:"Expired Product"}),n.jsx(qe,{value:"other",children:"Other"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Additional Notes"}),n.jsx(Yn,{placeholder:"Describe the issue in detail...",value:U,onChange:le=>B(le.target.value),rows:3})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Evidence Photos/Documents *"}),n.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Please provide evidence to support your return request"}),n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[n.jsx(_u,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upload photos or documents as proof"}),n.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:le=>Se(Array.from(le.target.files)),className:"hidden",id:"evidence-upload"}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>document.getElementById("evidence-upload").click(),className:"mt-2",children:"Choose Files"})]}),ge.length>0&&n.jsxs("div",{className:"mt-2 space-y-2",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:[ge.length," file(s) selected:"]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:ge.map((le,De)=>n.jsxs("div",{className:"bg-gray-50 p-2 rounded text-xs flex items-center justify-between",children:[n.jsx("span",{className:"truncate",children:le.name}),n.jsx("button",{onClick:()=>Se(Je=>Je.filter((Fe,He)=>He!==De)),className:"text-red-500 hover:text-red-700 ml-2",children:"×"})]},De))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Refund Method *"}),n.jsxs(Vt,{value:R,onValueChange:$,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select refund method"})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"esewa",children:"eSewa"}),n.jsx(qe,{value:"khalti",children:"Khalti"}),n.jsx(qe,{value:"bank",children:"Bank Transfer"})]})]})]}),R==="esewa"&&n.jsxs("div",{children:[n.jsx(ue,{children:"eSewa Number *"}),n.jsx(ve,{placeholder:"98XXXXXXXX",value:W,onChange:le=>Z(le.target.value)})]}),R==="khalti"&&n.jsxs("div",{children:[n.jsx(ue,{children:"Khalti Number *"}),n.jsx(ve,{placeholder:"98XXXXXXXX",value:X,onChange:le=>V(le.target.value)})]}),R==="bank"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Account Holder Name *"}),n.jsx(ve,{placeholder:"Full name as per bank account",value:H,onChange:le=>se(le.target.value)})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Account Number *"}),n.jsx(ve,{placeholder:"Bank account number",value:Q,onChange:le=>ie(le.target.value)})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Bank Branch *"}),n.jsx(ve,{placeholder:"Branch name",value:he,onChange:le=>te(le.target.value)})]})]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(ju,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),n.jsxs("div",{className:"text-sm text-yellow-800",children:[n.jsx("p",{className:"font-medium mb-1",children:"Return Policy"}),n.jsxs("ul",{className:"text-xs space-y-1",children:[n.jsx("li",{children:"• Returns are processed within 3-5 business days"}),n.jsx("li",{children:"• Refund will be processed after vendor approval"}),n.jsx("li",{children:"• You can appeal if your return is rejected"})]})]})]})})]}),n.jsxs("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:[n.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>{O(!1),K(""),B(""),$(""),Z(""),V(""),se(""),ie(""),te(""),Se([])},children:"Cancel"}),n.jsx(ne,{className:"flex-1 bg-orange-600 hover:bg-orange-700",disabled:!Y||!R||ge.length===0||R==="esewa"&&!W||R==="khalti"&&!X||R==="bank"&&(!H||!Q||!he),onClick:async()=>{try{const le=await Re.getToken(),De=new FormData;De.append("reason",Y),De.append("customer_notes",U),De.append("refund_method",R),De.append("requested_amount",F.total_amount),R==="esewa"&&De.append("esewa_number",W),R==="khalti"&&De.append("khalti_number",X),R==="bank"&&(De.append("bank_account_name",H),De.append("bank_account_number",Q),De.append("bank_branch",he)),ge.forEach((Fe,He)=>{De.append(`evidence_${He}`,Fe)}),(await fetch(`${bs.BASE_URL}/api/orders/${F.id}/return/`,{method:"POST",headers:{Authorization:`Token ${le}`,"ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"},body:De})).ok&&(t({title:"Return Requested",description:"Your return request has been submitted successfully."}),O(!1),be())}catch{t({title:"Error",description:"Failed to submit return request.",variant:"destructive"})}},children:"Submit Return Request"})]})]})}),n.jsx(Os,{open:fe,onOpenChange:ke,children:n.jsxs(gs,{side:"bottom",className:"h-[90vh] rounded-t-xl",children:[n.jsx(vs,{className:"pb-4",children:n.jsxs(xs,{className:"text-left",children:["Order Details - #",xe==null?void 0:xe.order_number]})}),xe&&n.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[n.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Order Items"}),n.jsx("div",{className:"space-y-2",children:((Ft=xe.items)==null?void 0:Ft.map((le,De)=>{var Je,Fe,He;return n.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("img",{src:((He=(Fe=(Je=le.product_details)==null?void 0:Je.images)==null?void 0:Fe[0])==null?void 0:He.image_url)||"/placeholder-product.jpg",alt:le.product_name,className:"w-8 h-8 object-cover rounded"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium",children:le.product_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",le.quantity]})]})]}),n.jsxs("p",{className:"text-sm font-semibold",children:["₹",le.total_price]})]},De)}))||[]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Delivery Information"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Address:"})," ",xe.delivery_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Phone:"})," ",xe.delivery_phone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",xe.delivery_name]})]})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-3",children:"Payment Details"}),n.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200 mb-3",children:[n.jsxs("h4",{className:"font-semibold text-emerald-800 text-sm mb-2",children:["Bill Amount (Paid via ",xe.payment_method,")"]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["₹",xe.subtotal]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsxs("span",{children:["₹",xe.tax_amount]})]}),n.jsx("hr",{className:"my-1"}),n.jsxs("div",{className:"flex justify-between font-semibold",children:[n.jsx("span",{children:"Bill Total (Paid):"}),n.jsxs("span",{className:"text-emerald-600",children:["₹",(parseFloat(xe.subtotal)+parseFloat(xe.tax_amount)).toFixed(2)]})]})]})]}),n.jsx("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200 mb-3",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-orange-800 text-base",children:"Delivery Fee"}),n.jsx("p",{className:"text-xs text-orange-700",children:xe.status==="delivered"?"Paid on delivery":"Pay on delivery"})]}),n.jsxs("span",{className:"font-bold text-lg text-orange-600",children:["₹",parseFloat(xe.delivery_fee).toFixed(2)]})]})}),n.jsx("hr",{className:"my-2"}),n.jsxs("div",{className:"flex justify-between font-semibold text-sm",children:[n.jsx("span",{children:"Grand Total:"}),n.jsxs("span",{children:["₹",xe.total_amount]})]}),n.jsxs("div",{className:"mt-3 pt-2 border-t space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Payment Method:"}),n.jsx("span",{className:"capitalize",children:xe.payment_method})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Payment Status:"}),n.jsx(Ie,{variant:xe.payment_status==="paid"?"default":"secondary",className:"text-xs",children:xe.payment_status})]})]})]}),((Fs=xe.refunds)==null?void 0:Fs.map(le=>{var De;return n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[n.jsx(ii,{className:"h-4 w-4"}),"Return/Refund Details"]}),n.jsxs("div",{className:"space-y-3 text-xs",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Status:"}),n.jsx(Ie,{className:`text-xs ${le.status==="requested"?"bg-yellow-100 text-yellow-800":le.status==="approved"?"bg-green-100 text-green-800":le.status==="rejected"?"bg-red-100 text-red-800":le.status==="appeal"?"bg-purple-100 text-purple-800":le.status==="processed"?"bg-blue-100 text-blue-800":le.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:le.status.charAt(0).toUpperCase()+le.status.slice(1)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),n.jsx("p",{className:"text-gray-600 capitalize",children:le.reason.replace("_"," ")})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Requested Amount:"}),n.jsxs("p",{className:"text-gray-600",children:["₹",le.requested_amount]})]}),le.approved_amount&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Approved Amount:"}),n.jsxs("p",{className:"text-gray-600",children:["₹",le.approved_amount]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Your Refund Details:"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Method:"})," ",le.refund_method]}),le.refund_method==="esewa"&&le.esewa_number&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"eSewa Number:"})," ",le.esewa_number]}),le.refund_method==="khalti"&&le.khalti_number&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Khalti Number:"})," ",le.khalti_number]}),le.refund_method==="bank"&&n.jsxs("div",{children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Account Name:"})," ",le.bank_account_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Account Number:"})," ",le.bank_account_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Branch:"})," ",le.bank_branch]})]})]})]}),le.customer_notes&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Your Notes:"}),n.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:le.customer_notes})]}),le.admin_notes&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Vendor Response:"}),n.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:le.admin_notes})]}),((De=le.evidence_photos)==null?void 0:De.length)>0&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Evidence Documents:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:le.evidence_photos.map((Je,Fe)=>{var Bt;const He=(Bt=Je.filename)==null?void 0:Bt.match(/\.(jpg|jpeg|png|gif|webp)$/i);let Ze;return Je.filename.startsWith("http")?Ze=Je.filename:Ze=as(Je.filename),n.jsxs("div",{className:"bg-white p-2 rounded border hover:shadow-md transition-shadow",children:[He?n.jsxs("div",{className:"cursor-pointer mb-2 group",onClick:()=>{oe(Ze),ee(!0)},children:[n.jsxs("div",{className:"relative overflow-hidden rounded",children:[n.jsx("img",{src:Ze,alt:Je.filename,className:"w-full h-20 object-cover rounded mb-1 group-hover:scale-105 transition-transform",onError:Et=>{Et.currentTarget.src="/placeholder-image.svg",Et.currentTarget.alt="Image not found"}}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center",children:n.jsx(Nn,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),n.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"📷 Click to enlarge"})]}):n.jsx("div",{className:"w-full h-20 bg-gray-100 rounded mb-2 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>{window.open(Ze,"_blank")},children:n.jsxs("div",{className:"text-center",children:[n.jsx(At,{className:"h-6 w-6 text-gray-400 mx-auto mb-1"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Document"})]})}),n.jsx("p",{className:"font-medium text-xs truncate",title:Je.filename,children:Je.filename||`Document ${Fe+1}`}),n.jsxs("p",{className:"text-gray-500 text-xs",children:["📤 ",Je.uploaded_by]}),n.jsxs("p",{className:"text-gray-500 text-xs",children:["📅 ",new Date(Je.uploaded_at).toLocaleDateString()]})]},Fe)})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500 border-t pt-2",children:[n.jsx("div",{children:n.jsxs("p",{children:["Requested: ",new Date(le.requested_at).toLocaleDateString()]})}),le.approved_at&&n.jsx("div",{children:n.jsxs("p",{children:["Approved: ",new Date(le.approved_at).toLocaleDateString()]})}),le.processed_at&&n.jsx("div",{children:n.jsxs("p",{children:["Processed: ",new Date(le.processed_at).toLocaleDateString()]})}),le.completed_at&&n.jsx("div",{children:n.jsxs("p",{children:["Completed: ",new Date(le.completed_at).toLocaleDateString()]})}),le.appeal_at&&n.jsx("div",{children:n.jsxs("p",{children:["Appealed: ",new Date(le.appeal_at).toLocaleDateString()]})})]})]})]},le.id)}))||[]]})]})}),n.jsx(Fo,{open:me,onOpenChange:ee,children:n.jsxs(Da,{className:"max-w-5xl max-h-[95vh] p-4",children:[n.jsx(Fa,{className:"pb-4",children:n.jsxs($a,{className:"flex items-center gap-2",children:[n.jsx(Nn,{className:"h-5 w-5"}),"Evidence Document Preview"]})}),n.jsx("div",{className:"flex justify-center items-center bg-gray-50 rounded-lg p-4",children:n.jsx("img",{src:ae,alt:"Evidence Preview",className:"max-w-full max-h-[75vh] object-contain rounded shadow-lg",onError:le=>{le.currentTarget.src="/placeholder-image.svg",le.currentTarget.alt="Image not found"}})}),n.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>window.open(ae,"_blank"),children:[n.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{const le=document.createElement("a");le.href=ae,le.download="evidence-document",le.click()},children:[n.jsx(At,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})})]})}const EG=[{id:1,type:"home",label:"Home",name:"John Doe",phone:"+977 9841234567",address:"123 Thamel Street, Thamel",city:"Kathmandu",landmark:"Near Durbar Square",isDefault:!0},{id:2,type:"work",label:"Office",name:"John Doe",phone:"+977 9841234567",address:"456 Lazimpat Road, Lazimpat",city:"Kathmandu",landmark:"Opposite British Embassy",isDefault:!1}],TG=e=>{switch(e){case"home":return n.jsx(nb,{className:"h-5 w-5"});case"work":return n.jsx(jD,{className:"h-5 w-5"});case"other":return n.jsx(hr,{className:"h-5 w-5"});default:return n.jsx(Kt,{className:"h-5 w-5"})}};function AG(){const e=st(),[t,s]=j.useState(EG),r=()=>{console.log("Add new address")},i=c=>{console.log("Edit address",c)},a=c=>{s(t.filter(d=>d.id!==c))},o=c=>{s(t.map(d=>({...d,isDefault:d.id===c})))};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"My Addresses"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:n.jsx(xn,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[t.length>0?t.map(c=>n.jsxs(Ee,{className:"hover:shadow-md transition-shadow",children:[n.jsx(jt,{className:"pb-3",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:TG(c.type)}),n.jsx("div",{children:n.jsxs(_t,{className:"text-base flex items-center gap-2",children:[c.label,c.isDefault&&n.jsx(Ie,{variant:"secondary",className:"text-xs",children:"Default"})]})})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>i(c.id),className:"p-2",children:n.jsx(Xu,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>a(c.id),className:"p-2 text-red-600 hover:text-red-700",children:n.jsx(Ua,{className:"h-4 w-4"})})]})]})}),n.jsxs(Ae,{className:"space-y-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"font-medium",children:c.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:c.phone}),n.jsx("p",{className:"text-sm",children:c.address}),n.jsx("p",{className:"text-sm",children:c.city}),c.landmark&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Landmark: ",c.landmark]})]}),!c.isDefault&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>o(c.id),className:"w-full mt-3",children:"Set as Default"})]})]},c.id)):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Kt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No addresses found"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your delivery addresses to make ordering faster"}),n.jsxs(ne,{onClick:r,children:[n.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add New Address"]})]}),t.length>0&&n.jsx(Ee,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:n.jsx(Ae,{className:"p-6 text-center",children:n.jsxs(ne,{variant:"ghost",onClick:r,className:"w-full h-16 flex flex-col items-center gap-2",children:[n.jsx(xn,{className:"h-6 w-6"}),n.jsx("span",{children:"Add New Address"})]})})})]}),n.jsx(Ds,{})]})}const OG=[{id:1,type:"card",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2026,isDefault:!0,cardholderName:"John Doe"},{id:2,type:"card",last4:"8888",brand:"Mastercard",expiryMonth:8,expiryYear:2025,isDefault:!1,cardholderName:"John Doe"}],RG=e=>n.jsx(to,{className:"h-5 w-5"}),LG=e=>`•••• •••• •••• ${e}`;function MG(){const e=st(),[t,s]=j.useState(OG),r=()=>{console.log("Add new payment method")},i=c=>{console.log("Edit payment method",c)},a=c=>{s(t.filter(d=>d.id!==c))},o=c=>{s(t.map(d=>({...d,isDefault:d.id===c})))};return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"Payment Methods"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:n.jsx(xn,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[t.length>0?t.map(c=>n.jsxs(Ee,{className:"hover:shadow-md transition-shadow",children:[n.jsx(jt,{className:"pb-3",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:RG(c.brand)}),n.jsxs("div",{children:[n.jsxs(_t,{className:"text-base flex items-center gap-2",children:[c.brand," ",LG(c.last4),c.isDefault&&n.jsx(Ie,{variant:"secondary",className:"text-xs",children:"Default"})]}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires ",String(c.expiryMonth).padStart(2,"0"),"/",c.expiryYear]})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>i(c.id),className:"p-2",children:n.jsx(Xu,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>a(c.id),className:"p-2 text-red-600 hover:text-red-700",children:n.jsx(Ua,{className:"h-4 w-4"})})]})]})}),n.jsxs(Ae,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(yi,{className:"h-4 w-4"}),n.jsx("span",{children:"Secured with 256-bit SSL encryption"})]}),!c.isDefault&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>o(c.id),className:"w-full",children:"Set as Default"})]})]},c.id)):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(to,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No payment methods"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Add a payment method to make checkout faster"}),n.jsxs(ne,{onClick:r,children:[n.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Payment Method"]})]}),t.length>0&&n.jsx(Ee,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:n.jsx(Ae,{className:"p-6 text-center",children:n.jsxs(ne,{variant:"ghost",onClick:r,className:"w-full h-16 flex flex-col items-center gap-2",children:[n.jsx(xn,{className:"h-6 w-6"}),n.jsx("span",{children:"Add New Payment Method"})]})})}),n.jsx(Ee,{className:"bg-green-50 border-green-200",children:n.jsx(Ae,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(yi,{className:"h-5 w-5 text-green-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-green-800 text-sm",children:"Secure Payments"}),n.jsx("p",{className:"text-green-700 text-xs",children:"All payment information is encrypted and secure"})]})]})})})]}),n.jsx(Ds,{})]})}const IG=[{id:"orders",title:"Orders & Delivery",icon:or,description:"Track orders, delivery issues, cancellations",articles:["How to track my order?","Delivery time and charges","Cancel or modify order","Refund policy"]},{id:"payment",title:"Payment & Billing",icon:dn,description:"Payment methods, billing, refunds",articles:["Payment methods accepted","Failed payment issues","Refund process","Billing disputes"]},{id:"account",title:"Account & Profile",icon:CD,description:"Account settings, profile management",articles:["Update profile information","Change password","Manage addresses","Privacy settings"]},{id:"technical",title:"Technical Support",icon:Qu,description:"App issues, login problems, bugs",articles:["App not working","Login issues","Payment errors","Report a bug"]}],DG=[{icon:Ro,title:"Live Chat",description:"Chat with our support team",action:"Start Chat",available:!0},{icon:Qu,title:"Phone Support",description:"Call us for immediate help",action:"Call Now",available:!0},{icon:OD,title:"Email Support",description:"Send us an email",action:"Send Email",available:!0}];function FG(){const e=st(),[t,s]=j.useState(""),r=a=>{switch(a){case"Start Chat":console.log("Starting live chat");break;case"Call Now":window.open("tel:+977-1-234567");break;case"Send Email":window.open("mailto:support@kathsnap.com");break}},i=IG.filter(a=>a.title.toLowerCase().includes(t.toLowerCase())||a.description.toLowerCase().includes(t.toLowerCase())||a.articles.some(o=>o.toLowerCase().includes(t.toLowerCase())));return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"Help & Support"}),n.jsx("div",{className:"w-10"})," "]})}),n.jsx("div",{className:"p-4 bg-white border-b",children:n.jsxs("div",{className:"relative",children:[n.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(ve,{placeholder:"Search help articles...",value:t,onChange:a=>s(a.target.value),className:"pl-10"})]})}),n.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[i.map(a=>{const o=a.icon;return n.jsxs(Ee,{className:"hover:shadow-md transition-shadow",children:[n.jsx(jt,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:n.jsx(o,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(_t,{className:"text-base",children:a.title}),n.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]}),n.jsx(mc,{className:"h-5 w-5 text-muted-foreground"})]})}),n.jsx(Ae,{children:n.jsxs("div",{className:"space-y-2",children:[a.articles.slice(0,2).map((c,d)=>n.jsxs("div",{className:"text-sm text-muted-foreground hover:text-primary cursor-pointer",children:["• ",c]},d)),a.articles.length>2&&n.jsxs("div",{className:"text-sm text-primary font-medium cursor-pointer",children:["View all ",a.articles.length," articles"]})]})})]},a.id)}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{className:"text-base",children:"Contact Support"})}),n.jsx(Ae,{className:"space-y-3",children:DG.map((a,o)=>{const c=a.icon;return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(a.action),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:n.jsx(c,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:a.title}),n.jsx("div",{className:"text-xs text-muted-foreground",children:a.description})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[a.available&&n.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),n.jsx(mc,{className:"h-4 w-4 text-muted-foreground"})]})]},o)})})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{className:"text-base",children:"Frequently Asked Questions"})}),n.jsxs(Ae,{className:"space-y-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-medium text-sm",children:"How do I track my order?"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Go to My Orders in your profile and click on any order to see its current status and tracking information."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-medium text-sm",children:"What are the delivery charges?"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Free delivery for orders above ₹500. For orders below ₹500, a delivery fee of ₹40 applies."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-medium text-sm",children:"How do I cancel an order?"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"You can cancel an order within 30 minutes of placement. Go to My Orders and select the cancel option."})]})]})]}),n.jsx(Ee,{className:"bg-primary/5 border-primary/20",children:n.jsx(Ae,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(or,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-primary text-sm",children:"Support Hours"}),n.jsx("p",{className:"text-primary/80 text-xs",children:"Monday - Sunday: 6:00 AM - 10:00 PM"})]})]})})})]}),n.jsx(Ds,{})]})}const NS=()=>{var Y,K,U,B;const e=st(),[t]=Sb(),s=t.get("vendor"),[r,i]=j.useState(null),[a,o]=j.useState([]),[c,d]=j.useState([]),[f,m]=j.useState(""),[h,u]=j.useState(!0),[p,y]=j.useState(1),[v,w]=j.useState(!1),[x,b]=j.useState(!1),[_,N]=j.useState(null),[C,I]=j.useState(0),k=j.useRef(null),E=j.useRef(null);j.useEffect(()=>{M(),P(),Wt.initialize(),s&&F(parseInt(s));const R=$=>{if($.key==="newMessage"&&$.newValue){const W=JSON.parse($.newValue);W.sender!==(_==null?void 0:_.username)&&Wt.notifyNewMessage(W.sender,W.content,W.conversationId.toString(),"customer")}};return window.addEventListener("storage",R),()=>window.removeEventListener("storage",R)},[s,_]);const M=async()=>{try{if(!await Re.getToken())return;const{response:$,data:W}=await Be("/profile/");$.ok&&W&&N(W)}catch(R){console.error("Failed to fetch current user:",R)}};j.useEffect(()=>{r&&A(r.id)},[r]),j.useEffect(()=>{if(r){const R=setInterval(async()=>{const $=await Us.getMessages(r.id);let W=[];if(Array.isArray($)?W=$.reverse():$!=null&&$.results&&Array.isArray($.results)&&(W=$.results.reverse()),W.length>C){const Z=W.slice(C);for(const X of Z)X.sender.id!==(_==null?void 0:_.id)&&await Wt.notifyNewMessage(X.sender.username,X.content||"Sent a file",r.id.toString(),"customer")}d(W),I(W.length)},3e3);return()=>clearInterval(R)}},[r,C,_]);const P=async(R=1,$=!1)=>{try{const{response:W,data:Z}=await Be(`messaging/conversations/?page=${R}&page_size=20`);if(!W.ok)throw new Error("Failed to fetch conversations");let X=(Z==null?void 0:Z.results)||[];R===1&&(X.some(H=>{var se,Q;return((se=H.other_participant)==null?void 0:se.username)==="admin"||((Q=H.other_participant)==null?void 0:Q.id)===1})||(X=[{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}},...X])),o($?V=>[...V,...X]:X),w(!!(Z!=null&&Z.next)),y(R)}catch(W){console.error("Failed to load conversations:",W),R===1&&o([{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}}])}finally{u(!1),b(!1)}},T=async()=>{x||!v||(b(!0),await P(p+1,!0))},A=async R=>{try{const $=await Us.getMessages(R);let W=[];Array.isArray($)?W=$.reverse():$!=null&&$.results&&Array.isArray($.results)&&(W=$.results.reverse()),d(W),I(W.length)}catch($){console.error("Failed to load messages:",$),d([]),I(0)}},z=async()=>{if(!(!f.trim()||!r))try{const R=await Us.sendMessage({conversation_id:r.id,message_type:"text",content:f});d(W=>[...W,R.message]);const $={conversationId:r.id,sender:(_==null?void 0:_.username)||"Unknown",content:f,timestamp:new Date().toISOString()};localStorage.setItem("newMessage",JSON.stringify($)),setTimeout(()=>localStorage.removeItem("newMessage"),100);try{await fetch("http://localhost:8000/api/broadcast/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:(_==null?void 0:_.username)||"Unknown",content:f,conversation_id:r.id})})}catch(W){console.log("Cross-domain broadcast failed:",W)}m("")}catch(R){console.error("Failed to send message:",R)}},O=async R=>{var W;const $=(W=R.target.files)==null?void 0:W[0];if(!(!$||!r))try{const Z=await Us.sendMessage({conversation_id:r.id,message_type:$.type.startsWith("image/")?"image":"file",file:$});d(X=>[...X,Z.message])}catch(Z){console.error("Failed to send file:",Z)}},F=async R=>{try{const $=await Us.getOrCreateConversation(R);i($)}catch($){console.error("Failed to create conversation:",$)}},G=()=>{var R;(R=k.current)==null||R.scrollIntoView({behavior:"smooth"})};return j.useEffect(()=>{G()},[c]),h?n.jsx("div",{className:"h-screen bg-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),n.jsx("p",{children:"Loading conversations..."})]})}):r?n.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[n.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>i(null),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsxs(ea,{className:"h-10 w-10",children:[n.jsx(Mr,{src:as((Y=r.other_participant)==null?void 0:Y.profile_picture)}),n.jsx(ta,{children:(U=(K=r.other_participant)==null?void 0:K.username)==null?void 0:U.charAt(0)})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-sm",children:(B=r.other_participant)==null?void 0:B.username}),n.jsx("p",{className:"text-xs text-gray-500",children:"Online"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.map(R=>{const $=_&&R.sender.id===_.id;return n.jsx("div",{className:`w-full flex ${$?"justify-end":"justify-start"} mb-2`,children:n.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow ${$?"bg-blue-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[R.message_type==="text"&&n.jsx("p",{className:"text-sm",children:R.content}),R.message_type==="image"&&n.jsx("div",{className:"space-y-2",children:n.jsx("img",{src:as(R.file_url),alt:"Shared image",className:"rounded max-w-full h-auto"})}),R.message_type==="file"&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ax,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:R.file_name})]}),n.jsxs("div",{className:"flex items-center justify-end mt-1 gap-1",children:[n.jsx("span",{className:"text-xs text-gray-500",children:new Date(R.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),$&&n.jsx("span",{className:`text-xs ${R.is_read?"text-blue-500":"text-gray-400"}`,children:R.is_read?"✓✓":"✓"})]})]})},R.id)}),n.jsx("div",{ref:k})]}),n.jsxs("div",{className:"bg-white border-t p-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{var R;return(R=E.current)==null?void 0:R.click()},children:n.jsx(Ax,{className:"h-4 w-4"})}),n.jsx(ve,{value:f,onChange:R=>m(R.target.value),placeholder:"Type a message...",className:"flex-1",onKeyPress:R=>R.key==="Enter"&&z()}),n.jsx(ne,{onClick:z,disabled:!f.trim(),children:n.jsx(wP,{className:"h-4 w-4"})})]}),n.jsx("input",{ref:E,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:O,className:"hidden"})]})]}):n.jsxs("div",{className:"h-screen bg-white flex flex-col",children:[n.jsx("div",{className:"border-b p-4",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/home"),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsx("h2",{className:"text-lg font-semibold",children:"Messages"})]})})}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[a.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(rb,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No conversations yet"}),n.jsx("p",{className:"text-sm",children:"Start messaging with vendors!"})]}):a.map((R,$)=>{var W,Z,X,V,H,se;return n.jsxs("div",{className:"flex items-center gap-3 p-4 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{R.id===0?F(1):i(R)},children:[n.jsxs("div",{className:"relative",children:[n.jsxs(ea,{className:"h-12 w-12",children:[n.jsx(Mr,{src:as((W=R.other_participant)==null?void 0:W.profile_picture)}),n.jsx(ta,{children:(X=(Z=R.other_participant)==null?void 0:Z.username)==null?void 0:X.charAt(0)})]}),n.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-sm truncate",children:(V=R.other_participant)==null?void 0:V.username}),n.jsx("span",{className:"text-xs text-gray-500",children:R.last_message?new Date(R.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),n.jsx("p",{className:"text-sm text-gray-600 truncate",children:((H=R.last_message)==null?void 0:H.content)||((se=R.last_message)==null?void 0:se.file_name)||"Start conversation"})]}),R.unread_count>0&&n.jsx(Ie,{className:"bg-blue-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center",children:R.unread_count})]},R.id)}),v&&n.jsx("div",{className:"p-4 text-center",children:n.jsx(ne,{onClick:T,disabled:x,variant:"outline",className:"w-full",children:x?"Loading...":"Load More Conversations"})})]})]})},Ey=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),y=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return d*v/1e3},$G=()=>{const e=27.6398805,t=85.3303725,s=27.66424179701499,r=85.3465231243003,i=Ey(e,t,s,r);console.log(`🧪 Your coordinates test: ${i.toFixed(3)} km (Google shows: 5.1 km)`);const a={lat:40.7128,lon:-74.006},o={lat:34.0522,lon:-118.2437},c=Ey(a.lat,a.lon,o.lat,o.lon);console.log(`Test: NYC to LA = ${c.toFixed(2)} km (Google: ~3944 km)`),console.log(`🔗 Verify on Google Maps: https://www.google.com/maps/dir/${e},${t}/${s},${r}`)};function zG(){const e=st(),{categoryName:t}=mp(),[s,r]=j.useState({products:[]}),[i,a]=j.useState(!1),[o,c]=j.useState(xt.getLocation()),[d,f]=j.useState({page:1,hasMore:!0}),[m,h]=j.useState(new Set),[u,p]=j.useState(!1),[y,v]=j.useState(""),{addToCart:w}=mr(),{toast:x}=hn(),b=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const P=xt.subscribe(c);return xt.startTracking(),$G(),_(),k(),P},[t]),j.useEffect(()=>{_(1)},[y,t]),j.useEffect(()=>{o&&(console.log("📍 Location updated, refetching data:",o),_(1))},[o]);const _=async(P=1)=>{a(!0);try{const T=localStorage.getItem("token"),A=T?{Authorization:`Token ${T}`}:{},z=xt.getLocation();console.log("🔍 Frontend location check:",{userLocation:o,currentLocation:z});const O=new URLSearchParams({page:P.toString(),page_size:"100"});z?(O.append("latitude",z.latitude.toString()),O.append("longitude",z.longitude.toString()),console.log("📍 Sending location to API:",z)):console.log("❌ No location available for API call");const G=await(await fetch(`${rt}search/products/?${O}`,{headers:A})).json(),Y=N(G.results||[]);r(P===1?{products:Y}:B=>({products:[...B.products,...Y]}));const U=(G.results||[]).filter(B=>B.category&&B.category.toLowerCase()===t.toLowerCase()).length;f({page:P,hasMore:G.next!==null&&U>=10})}catch(T){console.error("Fetch error:",T)}finally{a(!1)}},N=P=>{const T=xt.getLocation();let z=P.filter(O=>O.category&&O.category.toLowerCase()===t.toLowerCase()).map(O=>{var K,U;const F=((K=O.images)==null?void 0:K.find(B=>B.is_primary))||((U=O.images)==null?void 0:U[0]);let G="N/A",Y=1/0;return T&&O.vendor_latitude&&O.vendor_longitude&&(Y=Ey(T.latitude,T.longitude,O.vendor_latitude,O.vendor_longitude),G=`${Y.toFixed(1)} km`),{id:O.id,name:O.name,vendor:O.vendor_name||"Unknown Vendor",price:`₹${O.price}`,priceValue:parseFloat(O.price),image:(F==null?void 0:F.image_url)||"/placeholder-product.jpg",rating:4.5,distance:G,distanceValue:Y,deliveryTime:"30-45 mins",inStock:O.quantity>0,category:O.category}});return y==="price_low"?z.sort((O,F)=>O.priceValue-F.priceValue):y==="price_high"?z.sort((O,F)=>F.priceValue-O.priceValue):z.sort((O,F)=>O.distanceValue-F.distanceValue),z},C=()=>{!i&&d.hasMore&&_(d.page+1)},I=P=>{e(`/product/${P}`)},k=async()=>{var T;const P=localStorage.getItem("token");if(P)try{const A=await fetch(`${rt}favorites/`,{headers:{Authorization:`Token ${P}`}});if(A.ok){const z=await A.json(),O=new Set(((T=z.results)==null?void 0:T.map(F=>F.product.id))||[]);h(O)}}catch(A){console.error("Failed to fetch favorites:",A)}},E=async(P,T)=>{T.stopPropagation();const A=localStorage.getItem("token");if(!A){x({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const z=await fetch(`${rt}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${A}`},body:JSON.stringify({product_id:P})});if(z.ok){const O=await z.json(),F=new Set(m);O.is_favorite?F.add(P):F.delete(P),h(F),x({title:O.is_favorite?"Added to Favorites":"Removed from Favorites",description:O.message})}}catch{x({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},M=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.products.map(P=>n.jsxs(Ee,{className:"overflow-hidden",children:[n.jsxs("div",{className:"cursor-pointer",onClick:()=>I(P.id),children:[n.jsxs("div",{className:"aspect-square relative",children:[n.jsx("img",{src:P.image,alt:P.name,className:"w-full h-full object-cover",onError:T=>{T.target.src="/placeholder-product.jpg"}}),n.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:T=>E(P.id,T),children:n.jsx(hr,{className:`h-4 w-4 ${m.has(P.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),n.jsx(Ie,{variant:P.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:P.inStock?"In Stock":"Out of Stock"})]}),n.jsxs(Ae,{className:"p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:P.name}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:P.vendor}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:P.rating})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:P.distance})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-bold text-primary text-sm",children:P.price}),n.jsx("span",{className:"text-xs text-muted-foreground",children:P.deliveryTime})]})]})]}),n.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!P.inStock,onClick:T=>{T.stopPropagation(),w(P.id,1)},children:[n.jsx(Is,{className:"h-3 w-3 mr-1"}),"Cart"]}),n.jsxs(ne,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!P.inStock,onClick:T=>{T.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:P.id,name:P.name,price:P.price.replace("₹",""),quantity:1,vendor_name:P.vendor,images:[{image_url:P.image}]}}})},children:[n.jsx(xn,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},P.id))}),d.hasMore&&n.jsx("div",{className:"text-center py-4",children:n.jsxs(ne,{onClick:C,disabled:i,variant:"outline",children:[i?n.jsx(Vn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center gap-3 p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold",children:t}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.products.length," products found"]})]}),n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>p(!0),children:n.jsx(ji,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"p-4 pb-20",children:[s.products.length>0&&n.jsx("div",{className:"mb-6",children:M()}),s.products.length===0&&!i&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"📦"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No products found"}),n.jsxs("p",{className:"text-muted-foreground",children:["No products available in ",t," category"]})]}),i&&s.products.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Vn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),u&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>p(!1),children:n.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:P=>P.stopPropagation(),children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>p(!1),children:"×"})]})}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),n.jsx("div",{className:"space-y-2",children:b.map(P=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"sort",value:P.value,checked:y===P.value,onChange:T=>v(T.target.value),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:P.label})]},P.value))})]}),n.jsx(ne,{variant:"outline",className:"w-full",onClick:()=>{v("")},children:"Clear All Filters"})]})]})}),n.jsx(Ds,{})]})}const BG=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),y=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return d*v/1e3};function VG(){const e=st(),[t,s]=j.useState({products:[]}),[r,i]=j.useState(!1),[a,o]=j.useState(xt.getLocation()),[c,d]=j.useState({page:1,hasMore:!0}),[f,m]=j.useState(new Set),[h,u]=j.useState(!1),[p,y]=j.useState(""),{addToCart:v}=mr(),{toast:w}=hn(),x=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const M=xt.subscribe(o);return b(),I(),M},[]),j.useEffect(()=>{b(1)},[p]),j.useEffect(()=>{a&&(console.log("📍 Location updated, refetching data:",a),b(1))},[a]);const b=async(M=1)=>{i(!0);try{const P=localStorage.getItem("token"),T=P?{Authorization:`Token ${P}`}:{},A=xt.getLocation();console.log("🔍 Frontend location check:",{userLocation:a,currentLocation:A});const z=new URLSearchParams({page:M.toString(),page_size:"20"});A?(z.append("latitude",A.latitude.toString()),z.append("longitude",A.longitude.toString()),console.log("📍 Sending location to API:",A)):console.log("❌ No location available for API call");const F=await(await fetch(`${rt}search/products/?${z}`,{headers:T})).json(),G=_(F.results||[]);s(M===1?{products:G}:Y=>({products:[...Y.products,...G]})),d({page:M,hasMore:F.next!==null})}catch(P){console.error("Fetch error:",P)}finally{i(!1)}},_=M=>{const P=xt.getLocation();let A=M.filter(z=>z.featured===!0).map(z=>{var Y,K;const O=((Y=z.images)==null?void 0:Y.find(U=>U.is_primary))||((K=z.images)==null?void 0:K[0]);let F="N/A",G=1/0;return P&&z.vendor_latitude&&z.vendor_longitude&&(G=BG(P.latitude,P.longitude,z.vendor_latitude,z.vendor_longitude),F=`${G.toFixed(1)} km`),{id:z.id,name:z.name,vendor:z.vendor_name||"Unknown Vendor",distance:F,distanceValue:G,rating:4.5,price:`₹${z.price}`,priceValue:parseFloat(z.price),image:(O==null?void 0:O.image_url)||"/placeholder-product.jpg",inStock:z.quantity>0,category:z.category,featured:z.featured}});return p==="price_low"?A.sort((z,O)=>z.priceValue-O.priceValue):p==="price_high"?A.sort((z,O)=>O.priceValue-z.priceValue):A.sort((z,O)=>z.distanceValue-O.distanceValue),A},N=()=>{!r&&c.hasMore&&b(c.page+1)},C=M=>{e(`/product/${M}`)},I=async()=>{var P;const M=localStorage.getItem("token");if(M)try{const T=await fetch(`${rt}favorites/`,{headers:{Authorization:`Token ${M}`}});if(T.ok){const A=await T.json(),z=new Set(((P=A.results)==null?void 0:P.map(O=>O.product.id))||[]);m(z)}}catch(T){console.error("Failed to fetch favorites:",T)}},k=async(M,P)=>{P.stopPropagation();const T=localStorage.getItem("token");if(!T){w({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const A=await fetch(`${rt}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${T}`},body:JSON.stringify({product_id:M})});if(A.ok){const z=await A.json(),O=new Set(f);z.is_favorite?O.add(M):O.delete(M),m(O),w({title:z.is_favorite?"Added to Favorites":"Removed from Favorites",description:z.message})}}catch{w({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},E=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.products.map(M=>n.jsxs(Ee,{className:"overflow-hidden",children:[n.jsxs("div",{className:"cursor-pointer",onClick:()=>C(M.id),children:[n.jsxs("div",{className:"aspect-square relative",children:[n.jsx("img",{src:M.image,alt:M.name,className:"w-full h-full object-cover",onError:P=>{P.target.src="/placeholder-product.jpg"}}),n.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:P=>k(M.id,P),children:n.jsx(hr,{className:`h-4 w-4 ${f.has(M.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),n.jsx(Ie,{variant:M.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:M.inStock?"In Stock":"Out of Stock"})]}),n.jsxs(Ae,{className:"p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:M.name}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:M.vendor}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:M.rating})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:M.distance})]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-bold text-primary text-sm",children:M.price}),n.jsx("span",{className:"text-xs text-muted-foreground",children:M.deliveryTime})]})]})]}),n.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!M.inStock,onClick:P=>{P.stopPropagation(),v(M.id,1)},children:[n.jsx(Is,{className:"h-3 w-3 mr-1"}),"Cart"]}),n.jsxs(ne,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!M.inStock,onClick:P=>{P.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:M.id,name:M.name,price:M.price.replace("₹",""),quantity:1,vendor_name:M.vendor,images:[{image_url:M.image}]}}})},children:[n.jsx(xn,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},M.id))}),c.hasMore&&n.jsx("div",{className:"text-center py-4",children:n.jsxs(ne,{onClick:N,disabled:r,variant:"outline",children:[r?n.jsx(Vn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center gap-3 p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold",children:"Featured Products"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>u(!0),children:n.jsx(ji,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&n.jsx("div",{className:"mb-6",children:E()}),t.products.length===0&&!r&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"⭐"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No featured products"}),n.jsx("p",{className:"text-muted-foreground",children:"Featured products will appear here when available"})]}),r&&t.products.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Vn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),h&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>u(!1),children:n.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:M=>M.stopPropagation(),children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:"×"})]})}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),n.jsx("div",{className:"space-y-2",children:x.map(M=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"sort",value:M.value,checked:p===M.value,onChange:P=>y(P.target.value),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:M.label})]},M.value))})]}),n.jsx(ne,{variant:"outline",className:"w-full",onClick:()=>{y("")},children:"Clear All Filters"})]})]})}),n.jsx(Ds,{})]})}const UG=(e,t,s,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(s),c=parseFloat(r),d=6371e3,f=w=>w*(Math.PI/180),m=f(o-i),h=f(c-a),u=f(i),p=f(o),y=Math.sin(m/2)*Math.sin(m/2)+Math.cos(u)*Math.cos(p)*Math.sin(h/2)*Math.sin(h/2),v=2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y));return d*v/1e3};function qG(){const e=st(),[t,s]=j.useState({products:[]}),[r,i]=j.useState(!1),[a,o]=j.useState(xt.getLocation()),[c,d]=j.useState({page:1,hasMore:!0}),[f,m]=j.useState(new Set),[h,u]=j.useState(!1),[p,y]=j.useState(""),{addToCart:v}=mr(),{toast:w}=hn(),x=[{value:"",label:"Default (Rating)"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];j.useEffect(()=>{const M=xt.subscribe(o);return b(),I(),M},[]),j.useEffect(()=>{b(1)},[p]),j.useEffect(()=>{a&&(console.log("📍 Location updated, refetching data:",a),b(1))},[a]);const b=async(M=1)=>{i(!0);try{const P=localStorage.getItem("token"),T=P?{Authorization:`Token ${P}`,"ngrok-skip-browser-warning":"true"}:{"ngrok-skip-browser-warning":"true"},A=xt.getLocation();console.log("🔍 Frontend location check:",{userLocation:a,currentLocation:A});const z=new URLSearchParams({page:M.toString(),page_size:"20"});A?(z.append("latitude",A.latitude.toString()),z.append("longitude",A.longitude.toString()),console.log("📍 Sending location to API:",A)):console.log("❌ No location available for API call");const F=await(await fetch(`${rt}search/products/?${z}`,{headers:T})).json(),G=_(F.results||[]);s(M===1?{products:G}:Y=>({products:[...Y.products,...G]})),d({page:M,hasMore:F.next!==null})}catch(P){console.error("Fetch error:",P)}finally{i(!1)}},_=M=>{const P=xt.getLocation();let T=M.map(A=>{var G,Y;const z=((G=A.images)==null?void 0:G.find(K=>K.is_primary))||((Y=A.images)==null?void 0:Y[0]);let O="N/A",F=1/0;return P&&A.vendor_latitude&&A.vendor_longitude&&(F=UG(P.latitude,P.longitude,A.vendor_latitude,A.vendor_longitude),O=`${F.toFixed(1)} km`),{id:A.id,name:A.name,vendor:A.vendor_name||"Unknown Vendor",distance:O,distanceValue:F,rating:4.5,price:`₹${A.price}`,priceValue:parseFloat(A.price),image:(z==null?void 0:z.image_url)||"/placeholder-product.jpg",inStock:A.quantity>0,category:A.category}});return p==="price_low"?T.sort((A,z)=>A.priceValue-z.priceValue):p==="price_high"?T.sort((A,z)=>z.priceValue-A.priceValue):T.sort((A,z)=>z.rating-A.rating),T},N=()=>{!r&&c.hasMore&&b(c.page+1)},C=M=>{e(`/product/${M}`)},I=async()=>{var P;const M=localStorage.getItem("token");if(M)try{const T=await fetch(`${rt}favorites/`,{headers:{Authorization:`Token ${M}`}});if(T.ok){const A=await T.json(),z=new Set(((P=A.results)==null?void 0:P.map(O=>O.product.id))||[]);m(z)}}catch(T){console.error("Failed to fetch favorites:",T)}},k=async(M,P)=>{P.stopPropagation();const T=localStorage.getItem("token");if(!T){w({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const A=await fetch(`${rt}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${T}`},body:JSON.stringify({product_id:M})});if(A.ok){const z=await A.json(),O=new Set(f);z.is_favorite?O.add(M):O.delete(M),m(O),w({title:z.is_favorite?"Added to Favorites":"Removed from Favorites",description:z.message})}}catch{w({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},E=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.products.map(M=>n.jsxs(Ee,{className:"overflow-hidden",children:[n.jsxs("div",{className:"cursor-pointer",onClick:()=>C(M.id),children:[n.jsxs("div",{className:"aspect-square relative",children:[n.jsx("img",{src:M.image,alt:M.name,className:"w-full h-full object-cover",onError:P=>{P.target.src="/placeholder-product.jpg"}}),n.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:P=>k(M.id,P),children:n.jsx(hr,{className:`h-4 w-4 ${f.has(M.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),n.jsx(Ie,{variant:M.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:M.inStock?"In Stock":"Out of Stock"})]}),n.jsxs(Ae,{className:"p-3",children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:M.name}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:M.vendor}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:M.rating})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{children:M.distance})]})]}),n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("span",{className:"font-bold text-primary text-sm",children:M.price})})]})]}),n.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!M.inStock,onClick:P=>{P.stopPropagation(),v(M.id,1)},children:[n.jsx(Is,{className:"h-3 w-3 mr-1"}),"Cart"]}),n.jsxs(ne,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!M.inStock,onClick:P=>{P.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:M.id,name:M.name,price:M.price.replace("₹",""),quantity:1,vendor_name:M.vendor,images:[{image_url:M.image}]}}})},children:[n.jsx(xn,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},M.id))}),c.hasMore&&n.jsx("div",{className:"text-center py-4",children:n.jsxs(ne,{onClick:N,disabled:r,variant:"outline",children:[r?n.jsx(Vn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return n.jsxs("div",{className:"min-h-screen bg-background",children:[n.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:n.jsxs("div",{className:"flex items-center gap-3 p-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold",children:"Trending Products"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>u(!0),children:n.jsx(ji,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&n.jsx("div",{className:"mb-6",children:E()}),t.products.length===0&&!r&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🔥"}),n.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No trending products"}),n.jsx("p",{className:"text-muted-foreground",children:"Trending products will appear here when available"})]}),r&&t.products.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Vn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),h&&n.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>u(!1),children:n.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:M=>M.stopPropagation(),children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:"×"})]})}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),n.jsx("div",{className:"space-y-2",children:x.map(M=>n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"sort",value:M.value,checked:p===M.value,onChange:P=>y(P.target.value),className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:M.label})]},M.value))})]}),n.jsx(ne,{variant:"outline",className:"w-full",onClick:()=>{y("")},children:"Clear All Filters"})]})]})}),n.jsx(Ds,{})]})}function HG(){const e=st(),t=fr(),{login:s}=Ni(),[r,i]=j.useState("password"),[a,o]=j.useState(""),[c,d]=j.useState(""),[f,m]=j.useState(""),[h,u]=j.useState(""),[p,y]=j.useState(!1),[v,w]=j.useState(!1),[x,b]=j.useState(!1),[_,N]=j.useState(""),[C,I]=j.useState(""),[k,E]=j.useState(!1),[M,P]=j.useState(null);j.useEffect(()=>{var G;(G=t.state)!=null&&G.successMessage&&(I(t.state.successMessage),window.history.replaceState({},document.title))},[t.state]);const T=async()=>{var G;b(!0),N("");try{await Re.clearAuth();const{response:Y,data:K}=await Be("/login/",{method:"POST",body:JSON.stringify({username:a,password:c})},!1);if(!Y.ok)throw new Error((K==null?void 0:K.error)||"Login failed");if(K.needs_verification)E(!0),P(K.user_id),w(!0),N("Email not verified. Please verify your email with the OTP sent.");else{const U={...K.user||{id:K.user_id,email:a,user_type:"vendor"},available_roles:K.available_roles||["vendor"],user_type:K.user.user_type||"vendor"};await s(U,K.token);const{simplePersistentAuth:B}=await Xe(async()=>{const{simplePersistentAuth:R}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:R}},[]);await B.saveVendorLogin(K.token,U),console.log("Login response:",K),console.log("profile_exists:",K.profile_exists,"is_approved:",K.is_approved),K.profile_exists?K.profile_exists&&K.is_approved?(console.log("Profile exists and approved, redirecting to dashboard"),e("/vendor/dashboard")):K.profile_exists&&K.is_rejected?(console.log("Profile exists but rejected"),e("/vendor/rejection",{state:{rejectionReason:K.rejection_reason,rejectionDate:K.rejection_date}})):K.profile_exists&&!K.is_approved&&(console.log("Profile exists but not approved"),N("Your vendor application is pending approval. You will be notified once approved."),await Re.clearAuth()):(console.log("No profile exists, redirecting to onboarding"),e("/vendor/onboarding"))}}catch(Y){console.error("Vendor login error:",Y),(G=Y.message)!=null&&G.includes("fetch")?N("Connection failed. Please check if the server is running on localhost:8000"):N(Y.message||"Login failed. Please try again.")}finally{b(!1)}},A=async()=>{b(!0),N("");try{const{response:G,data:Y}=await Be("/send-otp/",{method:"POST",body:JSON.stringify({email:a})},!1);if(!G.ok)throw new Error((Y==null?void 0:Y.error)||"Failed to send OTP");w(!0),N("OTP sent successfully")}catch(G){N(G.message)}finally{b(!1)}},z=async()=>{b(!0),N("");try{const{response:G,data:Y}=await Be("/verify-otp/",{method:"POST",body:JSON.stringify({email:a,otp:f})},!1);if(!G.ok)throw new Error((Y==null?void 0:Y.error)||"OTP verification failed");const K={...Y.user||{id:Y.user_id,email:a,user_type:"vendor"},available_roles:Y.available_roles||["vendor"],user_type:Y.user.user_type||"vendor"};await s(K,Y.token);const{simplePersistentAuth:U}=await Xe(async()=>{const{simplePersistentAuth:B}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:B}},[]);await U.saveVendorLogin(Y.token,K),console.log("OTP verification response:",Y),console.log("profile_exists:",Y.profile_exists,"is_approved:",Y.is_approved),Y.profile_exists?Y.profile_exists&&Y.is_approved?(console.log("Profile exists and approved, redirecting to dashboard"),e("/vendor/dashboard")):Y.profile_exists&&Y.is_rejected?(console.log("Profile exists but rejected"),e("/vendor/rejection",{state:{rejectionReason:Y.rejection_reason,rejectionDate:Y.rejection_date}})):Y.profile_exists&&!Y.is_approved&&(console.log("Profile exists but not approved"),N("Your vendor application is pending approval. You will be notified once approved."),await Re.clearAuth()):(console.log("No profile exists, redirecting to onboarding"),e("/vendor/onboarding"))}catch(G){console.error("Vendor OTP verification error:",G),N(G.message||"OTP verification failed. Please try again.")}finally{b(!1)}},O=async()=>{b(!0),N("");try{const{response:G,data:Y}=await Be("/update-email/",{method:"POST",body:JSON.stringify({email:h,user_id:M})},!1);if(!G.ok)throw new Error((Y==null?void 0:Y.error)||"Failed to update email");o(h),u(""),w(!0),N("Email updated. OTP sent to new email.")}catch(G){N(G.message)}finally{b(!1)}},F=()=>{e("/vendor/signup")};return n.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[n.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 left-4 w-8 h-8 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors z-10",children:n.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),n.jsx(OE,{currentType:"vendor"}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx("div",{className:"w-full max-w-80 mx-auto px-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"text-center",children:n.jsx("img",{src:Wa,alt:"ezeyway",className:"w-16 h-16 mx-auto mb-6"})}),n.jsx("div",{className:"text-center mb-4",children:n.jsx("span",{className:"text-sm font-medium text-gray-700 bg-blue-50 px-3 py-1 rounded-full",children:"Vendor Login"})}),n.jsx("div",{className:"flex justify-center",children:n.jsxs("div",{className:"flex space-x-8",children:[n.jsx("button",{onClick:()=>i("password"),className:`pb-2 text-sm font-medium transition-colors ${r==="password"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Password"}),n.jsx("button",{onClick:()=>i("otp"),className:`pb-2 text-sm font-medium transition-colors ${r==="otp"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"OTP"})]})}),r==="password"&&n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:a,onChange:G=>o(G.target.value),placeholder:"Username or Email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),!k&&n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:p?"text":"password",value:c,onChange:G=>d(G.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),n.jsx("button",{type:"button",onClick:()=>y(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):n.jsxs(n.Fragment,{children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),C&&n.jsx("p",{className:"text-green-600 text-center",children:C}),_&&n.jsx("p",{className:"text-red-600 text-center",children:_}),k&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(ve,{type:"email",value:h,onChange:G=>u(G.target.value),placeholder:"Update email if incorrect",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsx(ne,{onClick:O,disabled:!h||x,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:x?"Updating...":"Update Email and Resend OTP"}),n.jsx(ve,{type:"text",value:f,onChange:G=>m(G.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),n.jsx(ne,{onClick:z,disabled:f.length!==6||x,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:x?"Verifying...":"Verify OTP"}),n.jsx("button",{onClick:A,disabled:x,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}),!k&&n.jsx(ne,{onClick:T,disabled:!a||!c||x,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:x?"Logging in...":"Login"})]}),r==="otp"&&n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"email",value:a,onChange:G=>o(G.target.value),placeholder:"Enter your email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),v?n.jsxs(n.Fragment,{children:[n.jsx(ve,{type:"text",value:f,onChange:G=>m(G.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),C&&n.jsx("p",{className:"text-green-600 text-center",children:C}),_&&n.jsx("p",{className:"text-red-600 text-center",children:_}),n.jsx(ne,{onClick:z,disabled:f.length!==6||x,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:x?"Verifying...":"Verify & Login"}),n.jsx("button",{onClick:A,disabled:x,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}):n.jsx(ne,{onClick:A,disabled:!a||x,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:x?"Sending...":"Send OTP"})]}),n.jsx("div",{className:"text-center",children:n.jsx("button",{onClick:F,className:"text-blue-600 hover:text-blue-700 text-sm",children:"Don't have an account? Sign up"})})]})})})]})}function WG(){const e=st(),[t,s]=j.useState(1),[r,i]=j.useState(""),[a,o]=j.useState(""),[c,d]=j.useState(""),[f,m]=j.useState(""),[h,u]=j.useState(""),[p,y]=j.useState(!1),[v,w]=j.useState(!1),[x,b]=j.useState(""),_=async()=>{var E,M,P;w(!0),b("");try{const T=await fetch(rt+"register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:r,password:c,user_type:"vendor"})}),A=await T.json();if(!T.ok){const z=((E=A.username)==null?void 0:E[0])||((M=A.email)==null?void 0:M[0])||A.message||((P=Object.values(A)[0])==null?void 0:P[0])||"Failed to register";throw new Error(z)}s(2)}catch(T){b(T.message)}finally{w(!1)}},N=async E=>{w(!0),b("");try{const M=await fetch(rt+"verify-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:E})}),P=await M.json();if(!M.ok)throw new Error(P.error||"Verification failed");localStorage.setItem("token",P.token),e("/vendor/onboarding")}catch(M){b(M.message)}finally{w(!1)}},C=E=>{u(E),E.length===6&&N(E)},I=async()=>{w(!0),b("");try{const E=await fetch(rt+"send-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),M=await E.json();if(!E.ok)throw new Error(M.error||"Failed to resend OTP");b("OTP resent successfully")}catch(E){b(E.message)}finally{w(!1)}},k=()=>{e("/vendor/login")};return n.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[n.jsx("button",{onClick:k,className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition-colors",children:"← Back"}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"w-full max-w-80 mx-auto px-4",children:[t===1&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:Wa,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Join as Seller"})]}),n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"email",value:r,onChange:E=>i(E.target.value),placeholder:"Enter your email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsx(ve,{type:"text",value:a,onChange:E=>o(E.target.value),placeholder:"Choose username",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),n.jsxs("div",{className:"relative",children:[n.jsx(ve,{type:p?"text":"password",value:c,onChange:E=>d(E.target.value),placeholder:"Create password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),n.jsx("button",{type:"button",onClick:()=>y(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):n.jsxs(n.Fragment,{children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),n.jsx(ve,{type:"password",value:f,onChange:E=>m(E.target.value),placeholder:"Confirm password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),x&&n.jsx("p",{className:"text-red-600 text-center",children:x}),n.jsx(ne,{onClick:_,disabled:!r||!a||!c||!f||c!==f||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Creating Account...":"Join as Seller"})]})]}),t===2&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("img",{src:Wa,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Email"}),n.jsxs("p",{className:"text-gray-600 mt-2",children:["Code sent to ",r]})]}),n.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[n.jsx(ve,{type:"text",value:h,onChange:E=>C(E.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest w-80"}),v&&n.jsx("div",{className:"text-center text-blue-600",children:"Verifying..."}),x&&n.jsx("p",{className:"text-red-600 text-center",children:x}),n.jsx("button",{onClick:()=>s(1),className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Change details"}),n.jsx("button",{onClick:I,disabled:v,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend code"})]})]})]})})]})}const ZG=Sw.divIcon({className:"custom-marker",html:'<div style="background-color: #ff0000; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]});function GG(){var A,z;const e=st(),s=(A=fr().state)==null?void 0:A.isUpdate,[r,i]=j.useState(0),[a,o]=j.useState({location:{lat:27.7172,lng:85.324,address:""},shopName:"",ownerName:"",phone:"",email:"",shopAddress:"",city:"",state:"",pincode:"",shopRegDoc:null,citizenshipFront:null,citizenshipBack:null,shopImages:[],existingDocuments:{panReg:null,citizenshipFront:null,citizenshipBack:null},existingShopImages:[],bankAccount:"",accountHolderName:"",bankName:"",ifscCode:"",gstNumber:"",panNumber:"",deliveryRadius:"",minOrderAmount:"",vendorType:"",categories:[],description:""}),[c,d]=j.useState(""),[f,m]=j.useState(!1),[h,u]=j.useState(""),[p,y]=j.useState(""),[v,w]=j.useState([]),x=["Location","Shop Info","Address","Documents","Shop Images","Payment","Business Type","Categories","Review"],b=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"manufacturer",label:"Manufacturer"},{value:"service_provider",label:"Service Provider"},{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"}];j.useEffect(()=>{const O=async()=>{try{const G=await fetch(rt+"categories/"),Y=await G.json();G.ok&&w(Y.categories.map(K=>K.name))}catch(G){console.error("Error fetching categories:",G)}},F=async()=>{if(s)try{const G=localStorage.getItem("token"),Y=await fetch(rt+"vendor-profiles/",{headers:{Authorization:`Token ${G}`}});if(Y.ok){const K=await Y.json(),U=K.results&&K.results.length>0?K.results[0]:null;U&&o(B=>{var R,$,W,Z;return{...B,shopName:U.business_name||"",ownerName:U.owner_name||"",phone:U.business_phone||"",email:U.business_email||"",shopAddress:U.business_address||"",city:U.city||"",state:U.state||"",pincode:U.pincode||"",panNumber:U.pan_number||"",gstNumber:U.gst_number||"",bankAccount:U.account_number||"",accountHolderName:U.account_holder_name||"",bankName:U.bank_name||"",ifscCode:U.ifsc_code||"",deliveryRadius:U.delivery_radius||"",minOrderAmount:U.min_order_amount||"",vendorType:U.business_type||"",categories:U.categories||[],description:U.description||"",location:{lat:U.latitude||27.7172,lng:U.longitude||85.324,address:U.location_address||""},existingDocuments:{panReg:U.business_license_file_url||null,citizenshipFront:(($=(R=U.documents)==null?void 0:R.find(X=>{var V;return(V=X.document_url)==null?void 0:V.includes("citizenship_front")}))==null?void 0:$.document_url)||null,citizenshipBack:((Z=(W=U.documents)==null?void 0:W.find(X=>{var V;return(V=X.document_url)==null?void 0:V.includes("citizenship_back")}))==null?void 0:Z.document_url)||null},existingShopImages:U.shop_images||[]}})}}catch(G){console.error("Error fetching profile:",G)}};O(),F()},[s]);const _=({lat:O,lng:F})=>(_R().setView([O,F],13),null),N=()=>(NR({click(O){const{lat:F,lng:G}=O.latlng;o(Y=>({...Y,location:{...Y.location,lat:F,lng:G}})),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${F}&lon=${G}`).then(Y=>Y.json()).then(Y=>{Y.display_name&&o(K=>({...K,location:{...K.location,address:Y.display_name}}))}).catch(Y=>console.error("Error fetching address:",Y))}}),null),C=()=>{d(""),navigator.geolocation?navigator.geolocation.getCurrentPosition(O=>{const{latitude:F,longitude:G}=O.coords;o(Y=>({...Y,location:{...Y.location,lat:F,lng:G}})),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${F}&lon=${G}`).then(Y=>Y.json()).then(Y=>{Y.display_name&&o(K=>({...K,location:{...K.location,address:Y.display_name}}))}).catch(Y=>{console.error("Error fetching address:",Y),d("Unable to fetch address for this location.")})},O=>{switch(console.error("Geolocation error:",O),O.code){case O.PERMISSION_DENIED:d("Location access denied. Please allow location permissions.");break;case O.POSITION_UNAVAILABLE:d("Location information is unavailable.");break;case O.TIMEOUT:d("The request to get your location timed out.");break;default:d("An unknown error occurred while fetching your location.");break}}):d("Geolocation is not supported by your browser.")},I=()=>{const O=[{field:"shopName",label:"Shop Name"},{field:"ownerName",label:"Owner Name"},{field:"email",label:"Email"},{field:"phone",label:"Phone"},{field:"panNumber",label:"PAN Number"},{field:"shopAddress",label:"Shop Address"},{field:"city",label:"City"},{field:"state",label:"State"},{field:"pincode",label:"PIN Code"},{field:"vendorType",label:"Business Type"}];for(const{field:G,label:Y}of O)if(!a[G])return u(`${Y} is required.`),!1;return a.location.address?a.shopImages.length+(s?a.existingShopImages.length:0)<4?(u("Please ensure you have at least 4 shop images total."),!1):a.panNumber.length!==9?(u("PAN number must be exactly 9 characters."),!1):!0:(u("Location address is required."),!1)},k=()=>{switch(u(""),r){case 0:if(!a.location.address)return u("Please select a location."),!1;break;case 1:if(!a.shopName||!a.ownerName||!a.phone||!a.email||!a.panNumber)return u("Please fill in all required shop information including PAN number."),!1;if(a.panNumber.length!==9)return u("PAN number must be exactly 9 characters."),!1;break;case 2:if(!a.shopAddress||!a.city||!a.state||!a.pincode)return u("Please fill in all address fields."),!1;break;case 4:if(a.shopImages.length+(s?a.existingShopImages.length:0)<4)return u("Please ensure you have at least 4 shop images total."),!1;break;case 6:if(!a.vendorType)return u("Please select a business type."),!1;break;case 7:if(a.categories.length===0)return u("Please select at least one category."),!1;break}return!0},E=async()=>{if(r<x.length-1)k()&&i(r+1);else{if(console.log("Starting form submission..."),!I()){console.log("Validation failed:",h);return}m(!0),u(""),y("");const O=new FormData;O.append("business_name",a.shopName),O.append("owner_name",a.ownerName),O.append("business_email",a.email),O.append("business_phone",a.phone),O.append("business_address",a.shopAddress),O.append("location_address",a.location.address),O.append("city",a.city),O.append("state",a.state),O.append("pincode",a.pincode),O.append("latitude",a.location.lat.toString()),O.append("longitude",a.location.lng.toString()),O.append("business_type",a.vendorType),O.append("categories",JSON.stringify(a.categories)),O.append("description",a.description||""),O.append("account_number",a.bankAccount||""),O.append("account_holder_name",a.accountHolderName||""),O.append("bank_name",a.bankName||""),O.append("ifsc_code",a.ifscCode||""),O.append("gst_number",a.gstNumber||""),O.append("pan_number",a.panNumber||""),O.append("delivery_radius",a.deliveryRadius||""),O.append("min_order_amount",a.minOrderAmount||""),a.shopRegDoc&&O.append("business_license_file",a.shopRegDoc),a.citizenshipFront&&O.append("citizenship_front",a.citizenshipFront),a.citizenshipBack&&O.append("citizenship_back",a.citizenshipBack),a.shopImages.length>0&&a.shopImages.forEach((F,G)=>{O.append(`shop_image_${G}`,F)});try{const F=localStorage.getItem("token");console.log(s?"Updating vendor profile...":"Submitting complete vendor onboarding...");const Y=await fetch(rt+"complete-onboarding/",{method:"POST",headers:{Authorization:`Token ${F}`},body:O}),K=await Y.json();if(console.log("Complete onboarding response:",Y.status,K),!Y.ok){let U="Failed to submit vendor application.";if(K.detail)U=K.detail;else if(K.error)U=K.error;else if(K.user)U=K.user;else if(typeof K=="object"){const B=Object.entries(K).map(([R,$])=>`${R}: ${Array.isArray($)?$.join(", "):$}`).join("; ");B&&(U=B)}u(U),console.error("Complete onboarding failed:",K);return}console.log(s?"Vendor profile updated successfully":"Vendor onboarding completed successfully"),K.is_approved?(y(s?"Profile updated and approved successfully!":"Vendor profile submitted and approved successfully!"),console.log("Vendor approved. Navigating to dashboard..."),setTimeout(()=>{e("/vendor/dashboard")},3e3)):(y(s?"Your profile has been updated successfully and is pending approval. You will be notified once approved by the admin.":"Your vendor application has been submitted successfully and is pending approval. You will be notified once approved by the admin."),console.log("Vendor not approved yet. Redirecting to login page."),setTimeout(()=>{e("/vendor/login",{state:{successMessage:s?"Profile updated successfully! Pending admin approval.":"Application submitted successfully! Pending admin approval."}})},3e3))}catch(F){console.error("Submission error:",F),u("An unexpected error occurred. Please try again.")}finally{m(!1)}}},M=()=>{r>0&&i(r-1)},P=(O,F)=>{o(G=>({...G,[O]:F}))},T=O=>{const F=a.categories.includes(O)?a.categories.filter(G=>G!==O):[...a.categories,O];P("categories",F)};return n.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s?"Update Your Application":"Complete Your Setup"}),n.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Step ",r+1," of ",x.length]}),s&&n.jsx("p",{className:"text-orange-600 text-sm mt-1",children:"Update your information and resubmit for approval"})]}),n.jsx("div",{className:"flex overflow-x-auto mb-8 pb-2",children:x.map((O,F)=>n.jsxs("button",{onClick:()=>i(F),className:`flex-shrink-0 px-4 py-2 text-xs font-medium whitespace-nowrap ${F===r?"text-blue-600 border-b-2 border-blue-600":F<r?"text-green-600":"text-gray-400"}`,children:[F<r?"✓":F+1,". ",O]},O))}),n.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[f&&n.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsx("p",{className:"text-blue-600",children:"Submitting your application..."})}),h&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-600",children:h})}),p&&n.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:n.jsx("p",{className:"text-green-600",children:p})}),r===0&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Choose Your Location"}),n.jsx("div",{className:"h-48 rounded-lg",children:n.jsxs(SR,{center:[a.location.lat,a.location.lng],zoom:13,style:{height:"100%",width:"100%",borderRadius:"0.5rem"},children:[n.jsx(kR,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),n.jsx(wy,{position:[a.location.lat,a.location.lng],icon:ZG}),n.jsx(N,{}),n.jsx(_,{lat:a.location.lat,lng:a.location.lng})]})}),n.jsx(ne,{onClick:C,className:"w-full bg-blue-600 hover:bg-blue-700",children:"Use Live Location"}),c&&n.jsx("p",{className:"text-red-500 text-sm",children:c}),n.jsx(ve,{placeholder:"Selected address will appear here",value:a.location.address,onChange:O=>P("location",{...a.location,address:O.target.value})})]}),r===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Shop Information"}),n.jsx(ve,{placeholder:"Shop Name",value:a.shopName,onChange:O=>P("shopName",O.target.value)}),n.jsx(ve,{placeholder:"Owner Name",value:a.ownerName,onChange:O=>P("ownerName",O.target.value)}),n.jsx(ve,{placeholder:"Phone Number",value:a.phone,onChange:O=>P("phone",O.target.value)}),n.jsx(ve,{placeholder:"Email Address",value:a.email,onChange:O=>P("email",O.target.value)}),n.jsx(ve,{placeholder:"PAN Number *",value:a.panNumber,onChange:O=>{const F=O.target.value;F.length<=9&&P("panNumber",F)},maxLength:9,required:!0})]}),r===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Shop Address"}),n.jsx(ve,{placeholder:"Full Shop Address",value:a.shopAddress,onChange:O=>P("shopAddress",O.target.value)}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(ve,{placeholder:"City",value:a.city,onChange:O=>P("city",O.target.value)}),n.jsx(ve,{placeholder:"State",value:a.state,onChange:O=>P("state",O.target.value)})]}),n.jsx(ve,{placeholder:"PIN Code",value:a.pincode,onChange:O=>P("pincode",O.target.value)})]}),r===3&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Upload Documents"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Registration"}),s&&a.existingDocuments.panReg&&!a.shopRegDoc&&n.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm text-blue-700",children:"✓ Current document uploaded"}),n.jsx("img",{src:a.existingDocuments.panReg,alt:"Current PAN",className:"w-32 h-20 object-cover rounded border mt-1"})]}),n.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>P("shopRegDoc",O.target.files[0])}),!s&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document"}),s&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),a.shopRegDoc&&n.jsx("div",{className:"mt-2",children:a.shopRegDoc.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.shopRegDoc),alt:"PAN Registration",className:"w-32 h-20 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:n.jsxs("p",{className:"text-sm text-green-700",children:["✓ ",a.shopRegDoc.name]})})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Citizenship (Front)"}),s&&a.existingDocuments.citizenshipFront&&!a.citizenshipFront&&n.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm text-blue-700",children:"✓ Current document uploaded"}),n.jsx("img",{src:a.existingDocuments.citizenshipFront,alt:"Current Citizenship Front",className:"w-32 h-20 object-cover rounded border mt-1"})]}),n.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>P("citizenshipFront",O.target.files[0])}),s&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),a.citizenshipFront&&n.jsx("div",{className:"mt-2",children:a.citizenshipFront.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.citizenshipFront),alt:"Citizenship Front",className:"w-32 h-20 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:n.jsxs("p",{className:"text-sm text-green-700",children:["✓ ",a.citizenshipFront.name]})})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Citizenship (Back)"}),s&&a.existingDocuments.citizenshipBack&&!a.citizenshipBack&&n.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[n.jsx("p",{className:"text-sm text-blue-700",children:"✓ Current document uploaded"}),n.jsx("img",{src:a.existingDocuments.citizenshipBack,alt:"Current Citizenship Back",className:"w-32 h-20 object-cover rounded border mt-1"})]}),n.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>P("citizenshipBack",O.target.files[0])}),s&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),a.citizenshipBack&&n.jsx("div",{className:"mt-2",children:a.citizenshipBack.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.citizenshipBack),alt:"Citizenship Back",className:"w-32 h-20 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:n.jsxs("p",{className:"text-sm text-green-700",children:["✓ ",a.citizenshipBack.name]})})})]})]})]}),r===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Shop Images"}),n.jsx("p",{className:"text-sm text-gray-600",children:s?"Current images shown below. Upload new images to add more.":"Upload at least 4 images of your shop (interior, exterior, products, etc.)"}),s&&a.existingShopImages.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Current Shop Images (",a.existingShopImages.length,")"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.existingShopImages.map((O,F)=>n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:n.jsx("img",{src:O.image_url,alt:`Existing shop image ${F+1}`,className:"w-full h-full object-cover"})}),O.is_primary&&n.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Existing Image"})]},F))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>{const F=Array.from(O.target.files);if(F.length+a.shopImages.length>10){alert("Maximum 10 images allowed");return}P("shopImages",[...a.shopImages,...F])}}),n.jsx(ne,{type:"button",variant:"outline",className:"w-full",onClick:()=>{const O=document.createElement("input");O.type="file",O.accept="image/*",O.capture="environment",O.onchange=F=>{const G=F.target.files[0];if(G){if(a.shopImages.length>=10){alert("Maximum 10 images allowed");return}P("shopImages",[...a.shopImages,G])}},O.click()},children:"📷 Take Photo"})]}),a.shopImages.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[s?"New Images to Add":"Uploaded Images"," (",a.shopImages.length,"/10)"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.shopImages.map((O,F)=>n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:n.jsx("img",{src:URL.createObjectURL(O),alt:`Shop image ${F+1}`,className:"w-full h-full object-cover"})}),n.jsx("button",{type:"button",onClick:()=>{const G=a.shopImages.filter((Y,K)=>K!==F);P("shopImages",G)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:"×"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:O.name})]},F))}),!s&&a.shopImages.length<4&&n.jsx("p",{className:"text-sm text-orange-600",children:"Please upload at least 4 images of your shop"}),s&&a.shopImages.length+a.existingShopImages.length<4&&n.jsx("p",{className:"text-sm text-orange-600",children:"Total images (existing + new) should be at least 4"})]})]}),r===5&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Payment Details"}),n.jsx(ve,{placeholder:"Bank Account Number",value:a.bankAccount,onChange:O=>P("bankAccount",O.target.value)}),n.jsx(ve,{placeholder:"Account Holder/Organization Name",value:a.accountHolderName,onChange:O=>P("accountHolderName",O.target.value)}),n.jsx(ve,{placeholder:"Bank Name",value:a.bankName,onChange:O=>P("bankName",O.target.value)}),n.jsx(ve,{placeholder:"Minimum Order Amount (Optional)",value:a.minOrderAmount,onChange:O=>P("minOrderAmount",O.target.value)})]}),r===6&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Business Type"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(O=>n.jsx("button",{onClick:()=>P("vendorType",O.value),className:`p-3 text-sm rounded-lg border ${a.vendorType===O.value?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:O.label},O.value))})]}),r===7&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Product Categories"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Select categories you'll sell"}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:v.length>0?v.map(O=>n.jsx("button",{onClick:()=>T(O),className:`p-3 text-sm rounded-lg border ${a.categories.includes(O)?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:O},O)):n.jsx("div",{className:"col-span-2 text-center text-gray-500 py-4",children:"No categories available. Please contact admin."})}),n.jsx(ve,{placeholder:"Business Description (Optional)",value:a.description,onChange:O=>P("description",O.target.value)})]}),r===8&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"Review & Submit"}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Shop Information"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Shop Name:"})," ",a.shopName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Owner Name:"})," ",a.ownerName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",a.phone]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",a.email]}),n.jsxs("p",{children:[n.jsx("strong",{children:"PAN Number:"})," ",a.panNumber||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Shop Address:"})," ",a.shopAddress]}),n.jsxs("p",{children:[n.jsx("strong",{children:"City:"})," ",a.city]}),n.jsxs("p",{children:[n.jsx("strong",{children:"State:"})," ",a.state]}),n.jsxs("p",{children:[n.jsx("strong",{children:"PIN Code:"})," ",a.pincode]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Location:"})," ",a.location.address]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Documents"}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"PAN Registration:"})," ",a.shopRegDoc||a.existingDocuments.panReg?"✓ Available":"❌ Not uploaded"]}),a.shopRegDoc?n.jsx("div",{className:"mt-2",children:a.shopRegDoc.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.shopRegDoc),alt:"New PAN Registration",className:"w-24 h-16 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:n.jsxs("p",{className:"text-xs text-green-700",children:["📄 ",a.shopRegDoc.name," (New)"]})})}):a.existingDocuments.panReg?n.jsxs("div",{className:"mt-2",children:[n.jsx("img",{src:a.existingDocuments.panReg,alt:"Current PAN Registration",className:"w-24 h-16 object-cover rounded border"}),n.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Citizenship (Front):"})," ",a.citizenshipFront||a.existingDocuments.citizenshipFront?"✓ Available":"❌ Not uploaded"]}),a.citizenshipFront?n.jsx("div",{className:"mt-2",children:a.citizenshipFront.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.citizenshipFront),alt:"New Citizenship Front",className:"w-24 h-16 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:n.jsxs("p",{className:"text-xs text-green-700",children:["📄 ",a.citizenshipFront.name," (New)"]})})}):a.existingDocuments.citizenshipFront?n.jsxs("div",{className:"mt-2",children:[n.jsx("img",{src:a.existingDocuments.citizenshipFront,alt:"Current Citizenship Front",className:"w-24 h-16 object-cover rounded border"}),n.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Citizenship (Back):"})," ",a.citizenshipBack||a.existingDocuments.citizenshipBack?"✓ Available":"❌ Not uploaded"]}),a.citizenshipBack?n.jsx("div",{className:"mt-2",children:a.citizenshipBack.type.startsWith("image/")?n.jsx("img",{src:URL.createObjectURL(a.citizenshipBack),alt:"New Citizenship Back",className:"w-24 h-16 object-cover rounded border"}):n.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:n.jsxs("p",{className:"text-xs text-green-700",children:["📄 ",a.citizenshipBack.name," (New)"]})})}):a.existingDocuments.citizenshipBack?n.jsxs("div",{className:"mt-2",children:[n.jsx("img",{src:a.existingDocuments.citizenshipBack,alt:"Current Citizenship Back",className:"w-24 h-16 object-cover rounded border"}),n.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Shop Images"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Total Images:"})," ",a.shopImages.length+a.existingShopImages.length,"/10"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Existing:"})," ",a.existingShopImages.length," | ",n.jsx("strong",{children:"New:"})," ",a.shopImages.length]}),a.shopImages.length+a.existingShopImages.length>=4?n.jsx("p",{className:"text-green-600 mb-3",children:"✓ Minimum requirement met"}):n.jsx("p",{className:"text-red-600 mb-3",children:"❌ Need at least 4 images total"}),a.existingShopImages.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-blue-600 mb-2",children:"Current Images:"}),n.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.existingShopImages.slice(0,4).map((O,F)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:O.image_url,alt:`Current shop ${F+1}`,className:"w-16 h-16 object-cover rounded border"}),O.is_primary&&n.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"})]},F)),a.existingShopImages.length>4&&n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border flex items-center justify-center",children:n.jsxs("span",{className:"text-xs text-gray-500",children:["+",a.existingShopImages.length-4]})})]})]}),a.shopImages.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-green-600 mb-2",children:"New Images to Add:"}),n.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.shopImages.slice(0,4).map((O,F)=>n.jsx("div",{className:"relative",children:n.jsx("img",{src:URL.createObjectURL(O),alt:`New shop ${F+1}`,className:"w-16 h-16 object-cover rounded border"})},F)),a.shopImages.length>4&&n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border flex items-center justify-center",children:n.jsxs("span",{className:"text-xs text-gray-500",children:["+",a.shopImages.length-4]})})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Payment Details"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Bank Account:"})," ",a.bankAccount||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Account Holder:"})," ",a.accountHolderName||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Bank Name:"})," ",a.bankName||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"IFSC Code:"})," ",a.ifscCode||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Business Details"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Business Type:"})," ",((z=b.find(O=>O.value===a.vendorType))==null?void 0:z.label)||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Categories:"})," ",a.categories.length>0?a.categories.join(", "):"None selected"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Description:"})," ",a.description||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"GST Number:"})," ",a.gstNumber||"N/A"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Delivery Radius:"})," ",a.deliveryRadius||"N/A"," km"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Minimum Order Amount:"})," ",a.minOrderAmount||"N/A"]})]})]}),n.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:n.jsx("p",{className:"text-sm text-yellow-800",children:"Your application will be reviewed within 24-48 hours. You'll receive an email notification once approved."})}),h&&n.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-600 text-sm",children:h})})]})]}),n.jsxs("div",{className:"flex justify-between mt-6",children:[n.jsx(ne,{onClick:M,disabled:r===0,variant:"outline",className:"px-6",children:"Previous"}),n.jsx(ne,{onClick:E,disabled:f,className:"px-6 bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:f?"Submitting...":r===x.length-1?"Submit for Approval":"Next"})]})]})})}function KG(){const e=fr(),t=st(),{rejectionReason:s,rejectionDate:r}=e.state||{},i=()=>{t("/vendor/onboarding",{state:{isUpdate:!0}})};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:n.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:n.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Application Rejected"}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your vendor application has been rejected. Please review the feedback below and update your application."})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rejection Details"}),r&&n.jsxs("div",{className:"mb-4",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Rejected on: "}),n.jsx("span",{className:"text-sm text-gray-900",children:new Date(r).toLocaleDateString()})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Reason for rejection:"}),n.jsx("div",{className:"mt-2 p-4 bg-red-50 border border-red-200 rounded-md",children:n.jsx("p",{className:"text-sm text-red-800",children:s||"No specific reason provided. Please contact support for more details."})})]}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"What's next?"}),n.jsx("div",{className:"mt-2 text-sm text-blue-700",children:n.jsx("p",{children:"Please review the rejection reason above and update your application accordingly. You can modify your business information, upload new documents, or make any other necessary changes before resubmitting."})})]})]})}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsx(ne,{onClick:i,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Update Application"}),n.jsx(ne,{onClick:()=>t("/vendor/login"),variant:"outline",className:"flex-1",children:"Back to Login"})]})]})]})})}var lh=e=>e.type==="checkbox",No=e=>e instanceof Date,hs=e=>e==null;const ZL=e=>typeof e=="object";var Sn=e=>!hs(e)&&!Array.isArray(e)&&ZL(e)&&!No(e),GL=e=>Sn(e)&&e.target?lh(e.target)?e.target.checked:e.target.value:e,YG=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,KL=(e,t)=>e.has(YG(t)),XG=e=>{const t=e.constructor&&e.constructor.prototype;return Sn(t)&&t.hasOwnProperty("isPrototypeOf")},Dw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Mn(e){let t;const s=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Dw&&(e instanceof Blob||r))&&(s||Sn(e)))if(t=s?[]:{},!s&&!XG(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Mn(e[i]));else return e;return t}var Bp=e=>/^\w*$/.test(e),jn=e=>e===void 0,Fw=e=>Array.isArray(e)?e.filter(Boolean):[],$w=e=>Fw(e.replace(/["|']|\]/g,"").split(/\.|\[/)),$e=(e,t,s)=>{if(!t||!Sn(e))return s;const r=(Bp(t)?[t]:$w(t)).reduce((i,a)=>hs(i)?i:i[a],e);return jn(r)||r===e?jn(e[t])?s:e[t]:r},Bs=e=>typeof e=="boolean",It=(e,t,s)=>{let r=-1;const i=Bp(t)?[t]:$w(t),a=i.length,o=a-1;for(;++r<a;){const c=i[r];let d=s;if(r!==o){const f=e[c];d=Sn(f)||Array.isArray(f)?f:isNaN(+i[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=d,e=e[c]}};const bm={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ar={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Li={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},YL=_e.createContext(null);YL.displayName="HookFormContext";const zw=()=>_e.useContext(YL);var XL=(e,t,s,r=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Ar.all&&(t._proxyFormState[o]=!r||Ar.all),s&&(s[o]=!0),e[o]}});return i};const Bw=typeof window<"u"?_e.useLayoutEffect:_e.useEffect;function QG(e){const t=zw(),{control:s=t.control,disabled:r,name:i,exact:a}=e||{},[o,c]=_e.useState(s._formState),d=_e.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Bw(()=>s._subscribe({name:i,formState:d.current,exact:a,callback:f=>{!r&&c({...s._formState,...f})}}),[i,r,a]),_e.useEffect(()=>{d.current.isValid&&s._setValid(!0)},[s]),_e.useMemo(()=>XL(o,s,d.current,!1),[o,s])}var li=e=>typeof e=="string",QL=(e,t,s,r,i)=>li(e)?(r&&t.watch.add(e),$e(s,e,i)):Array.isArray(e)?e.map(a=>(r&&t.watch.add(a),$e(s,a))):(r&&(t.watchAll=!0),s),Ty=e=>hs(e)||!ZL(e);function Bi(e,t,s=new WeakSet){if(Ty(e)||Ty(t))return e===t;if(No(e)&&No(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;if(s.has(e)||s.has(t))return!0;s.add(e),s.add(t);for(const a of r){const o=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const c=t[a];if(No(o)&&No(c)||Sn(o)&&Sn(c)||Array.isArray(o)&&Array.isArray(c)?!Bi(o,c,s):o!==c)return!1}}return!0}function JG(e){const t=zw(),{control:s=t.control,name:r,defaultValue:i,disabled:a,exact:o,compute:c}=e||{},d=_e.useRef(i),f=_e.useRef(c),m=_e.useRef(void 0);f.current=c;const h=_e.useMemo(()=>s._getWatch(r,d.current),[s,r]),[u,p]=_e.useState(f.current?f.current(h):h);return Bw(()=>s._subscribe({name:r,formState:{values:!0},exact:o,callback:y=>{if(!a){const v=QL(r,s._names,y.values||s._formValues,!1,d.current);if(f.current){const w=f.current(v);Bi(w,m.current)||(p(w),m.current=w)}else p(v)}}}),[s,a,r,o]),_e.useEffect(()=>s._removeUnmounted()),u}function eK(e){const t=zw(),{name:s,disabled:r,control:i=t.control,shouldUnregister:a,defaultValue:o}=e,c=KL(i._names.array,s),d=_e.useMemo(()=>$e(i._formValues,s,$e(i._defaultValues,s,o)),[i,s,o]),f=JG({control:i,name:s,defaultValue:d,exact:!0}),m=QG({control:i,name:s,exact:!0}),h=_e.useRef(e),u=_e.useRef(i.register(s,{...e.rules,value:f,...Bs(e.disabled)?{disabled:e.disabled}:{}}));h.current=e;const p=_e.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!$e(m.errors,s)},isDirty:{enumerable:!0,get:()=>!!$e(m.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!$e(m.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!$e(m.validatingFields,s)},error:{enumerable:!0,get:()=>$e(m.errors,s)}}),[m,s]),y=_e.useCallback(b=>u.current.onChange({target:{value:GL(b),name:s},type:bm.CHANGE}),[s]),v=_e.useCallback(()=>u.current.onBlur({target:{value:$e(i._formValues,s),name:s},type:bm.BLUR}),[s,i._formValues]),w=_e.useCallback(b=>{const _=$e(i._fields,s);_&&b&&(_._f.ref={focus:()=>b.focus&&b.focus(),select:()=>b.select&&b.select(),setCustomValidity:N=>b.setCustomValidity(N),reportValidity:()=>b.reportValidity()})},[i._fields,s]),x=_e.useMemo(()=>({name:s,value:f,...Bs(r)||m.disabled?{disabled:m.disabled||r}:{},onChange:y,onBlur:v,ref:w}),[s,r,m.disabled,y,v,w,f]);return _e.useEffect(()=>{const b=i._options.shouldUnregister||a;i.register(s,{...h.current.rules,...Bs(h.current.disabled)?{disabled:h.current.disabled}:{}});const _=(N,C)=>{const I=$e(i._fields,N);I&&I._f&&(I._f.mount=C)};if(_(s,!0),b){const N=Mn($e(i._options.defaultValues,s));It(i._defaultValues,s,N),jn($e(i._formValues,s))&&It(i._formValues,s,N)}return!c&&i.register(s),()=>{(c?b&&!i._state.action:b)?i.unregister(s):_(s,!1)}},[s,i,c,a]),_e.useEffect(()=>{i._setDisabledField({disabled:r,name:s})},[r,s,i]),_e.useMemo(()=>({field:x,formState:m,fieldState:p}),[x,m,p])}const bt=e=>e.render(eK(e));var JL=(e,t,s,r,i)=>t?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[r]:i||!0}}:{},eu=e=>Array.isArray(e)?e:[e],SS=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},Cs=e=>Sn(e)&&!Object.keys(e).length,Vw=e=>e.type==="file",Or=e=>typeof e=="function",wm=e=>{if(!Dw)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},e4=e=>e.type==="select-multiple",Uw=e=>e.type==="radio",tK=e=>Uw(e)||lh(e),Tv=e=>wm(e)&&e.isConnected;function nK(e,t){const s=t.slice(0,-1).length;let r=0;for(;r<s;)e=jn(e)?r++:e[t[r++]];return e}function sK(e){for(const t in e)if(e.hasOwnProperty(t)&&!jn(e[t]))return!1;return!0}function An(e,t){const s=Array.isArray(t)?t:Bp(t)?[t]:$w(t),r=s.length===1?e:nK(e,s),i=s.length-1,a=s[i];return r&&delete r[a],i!==0&&(Sn(r)&&Cs(r)||Array.isArray(r)&&sK(r))&&An(e,s.slice(0,-1)),e}var t4=e=>{for(const t in e)if(Or(e[t]))return!0;return!1};function jm(e,t={}){const s=Array.isArray(e);if(Sn(e)||s)for(const r in e)Array.isArray(e[r])||Sn(e[r])&&!t4(e[r])?(t[r]=Array.isArray(e[r])?[]:{},jm(e[r],t[r])):hs(e[r])||(t[r]=!0);return t}function n4(e,t,s){const r=Array.isArray(e);if(Sn(e)||r)for(const i in e)Array.isArray(e[i])||Sn(e[i])&&!t4(e[i])?jn(t)||Ty(s[i])?s[i]=Array.isArray(e[i])?jm(e[i],[]):{...jm(e[i])}:n4(e[i],hs(t)?{}:t[i],s[i]):s[i]=!Bi(e[i],t[i]);return s}var Nd=(e,t)=>n4(e,t,jm(t));const kS={value:!1,isValid:!1},CS={value:!0,isValid:!0};var s4=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!jn(e[0].attributes.value)?jn(e[0].value)||e[0].value===""?CS:{value:e[0].value,isValid:!0}:CS:kS}return kS},r4=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:r})=>jn(e)?e:t?e===""?NaN:e&&+e:s&&li(e)?new Date(e):r?r(e):e;const PS={isValid:!1,value:null};var i4=e=>Array.isArray(e)?e.reduce((t,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:t,PS):PS;function ES(e){const t=e.ref;return Vw(t)?t.files:Uw(t)?i4(e.refs).value:e4(t)?[...t.selectedOptions].map(({value:s})=>s):lh(t)?s4(e.refs).value:r4(jn(t.value)?e.ref.value:t.value,e)}var rK=(e,t,s,r)=>{const i={};for(const a of e){const o=$e(t,a);o&&It(i,a,o._f)}return{criteriaMode:s,names:[...e],fields:i,shouldUseNativeValidation:r}},_m=e=>e instanceof RegExp,Sd=e=>jn(e)?e:_m(e)?e.source:Sn(e)?_m(e.value)?e.value.source:e.value:e,TS=e=>({isOnSubmit:!e||e===Ar.onSubmit,isOnBlur:e===Ar.onBlur,isOnChange:e===Ar.onChange,isOnAll:e===Ar.all,isOnTouch:e===Ar.onTouched});const AS="AsyncFunction";var iK=e=>!!e&&!!e.validate&&!!(Or(e.validate)&&e.validate.constructor.name===AS||Sn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===AS)),aK=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),OS=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const tu=(e,t,s,r)=>{for(const i of s||Object.keys(e)){const a=$e(e,i);if(a){const{_f:o,...c}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(tu(c,t))break}else if(Sn(c)&&tu(c,t))break}}};function RS(e,t,s){const r=$e(e,s);if(r||Bp(s))return{error:r,name:s};const i=s.split(".");for(;i.length;){const a=i.join("."),o=$e(t,a),c=$e(e,a);if(o&&!Array.isArray(o)&&s!==a)return{name:s};if(c&&c.type)return{name:a,error:c};if(c&&c.root&&c.root.type)return{name:`${a}.root`,error:c.root};i.pop()}return{name:s}}var oK=(e,t,s,r)=>{s(e);const{name:i,...a}=e;return Cs(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!r||Ar.all))},lK=(e,t,s)=>!e||!t||e===t||eu(e).some(r=>r&&(s?r===t:r.startsWith(t)||t.startsWith(r))),cK=(e,t,s,r,i)=>i.isOnAll?!1:!s&&i.isOnTouch?!(t||e):(s?r.isOnBlur:i.isOnBlur)?!e:(s?r.isOnChange:i.isOnChange)?e:!0,dK=(e,t)=>!Fw($e(e,t)).length&&An(e,t),uK=(e,t,s)=>{const r=eu($e(e,s));return It(r,"root",t[s]),It(e,s,r),e},Pf=e=>li(e);function LS(e,t,s="validate"){if(Pf(e)||Array.isArray(e)&&e.every(Pf)||Bs(e)&&!e)return{type:s,message:Pf(e)?e:"",ref:t}}var gl=e=>Sn(e)&&!_m(e)?e:{value:e,message:""},MS=async(e,t,s,r,i,a)=>{const{ref:o,refs:c,required:d,maxLength:f,minLength:m,min:h,max:u,pattern:p,validate:y,name:v,valueAsNumber:w,mount:x}=e._f,b=$e(s,v);if(!x||t.has(v))return{};const _=c?c[0]:o,N=A=>{i&&_.reportValidity&&(_.setCustomValidity(Bs(A)?"":A||""),_.reportValidity())},C={},I=Uw(o),k=lh(o),E=I||k,M=(w||Vw(o))&&jn(o.value)&&jn(b)||wm(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,P=JL.bind(null,v,r,C),T=(A,z,O,F=Li.maxLength,G=Li.minLength)=>{const Y=A?z:O;C[v]={type:A?F:G,message:Y,ref:o,...P(A?F:G,Y)}};if(a?!Array.isArray(b)||!b.length:d&&(!E&&(M||hs(b))||Bs(b)&&!b||k&&!s4(c).isValid||I&&!i4(c).isValid)){const{value:A,message:z}=Pf(d)?{value:!!d,message:d}:gl(d);if(A&&(C[v]={type:Li.required,message:z,ref:_,...P(Li.required,z)},!r))return N(z),C}if(!M&&(!hs(h)||!hs(u))){let A,z;const O=gl(u),F=gl(h);if(!hs(b)&&!isNaN(b)){const G=o.valueAsNumber||b&&+b;hs(O.value)||(A=G>O.value),hs(F.value)||(z=G<F.value)}else{const G=o.valueAsDate||new Date(b),Y=B=>new Date(new Date().toDateString()+" "+B),K=o.type=="time",U=o.type=="week";li(O.value)&&b&&(A=K?Y(b)>Y(O.value):U?b>O.value:G>new Date(O.value)),li(F.value)&&b&&(z=K?Y(b)<Y(F.value):U?b<F.value:G<new Date(F.value))}if((A||z)&&(T(!!A,O.message,F.message,Li.max,Li.min),!r))return N(C[v].message),C}if((f||m)&&!M&&(li(b)||a&&Array.isArray(b))){const A=gl(f),z=gl(m),O=!hs(A.value)&&b.length>+A.value,F=!hs(z.value)&&b.length<+z.value;if((O||F)&&(T(O,A.message,z.message),!r))return N(C[v].message),C}if(p&&!M&&li(b)){const{value:A,message:z}=gl(p);if(_m(A)&&!b.match(A)&&(C[v]={type:Li.pattern,message:z,ref:o,...P(Li.pattern,z)},!r))return N(z),C}if(y){if(Or(y)){const A=await y(b,s),z=LS(A,_);if(z&&(C[v]={...z,...P(Li.validate,z.message)},!r))return N(z.message),C}else if(Sn(y)){let A={};for(const z in y){if(!Cs(A)&&!r)break;const O=LS(await y[z](b,s),_,z);O&&(A={...O,...P(z,O.message)},N(O.message),r&&(C[v]=A))}if(!Cs(A)&&(C[v]={ref:_,...A},!r))return C}}return N(!0),C};const hK={mode:Ar.onSubmit,reValidateMode:Ar.onChange,shouldFocusError:!0};function fK(e={}){let t={...hK,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Or(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},i=Sn(t.defaultValues)||Sn(t.values)?Mn(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Mn(i),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...m};const u={array:SS(),state:SS()},p=t.criteriaMode===Ar.all,y=ee=>ae=>{clearTimeout(f),f=setTimeout(ee,ae)},v=async ee=>{if(!t.disabled&&(m.isValid||h.isValid||ee)){const ae=t.resolver?Cs((await k()).errors):await M(r,!0);ae!==s.isValid&&u.state.next({isValid:ae})}},w=(ee,ae)=>{!t.disabled&&(m.isValidating||m.validatingFields||h.isValidating||h.validatingFields)&&((ee||Array.from(c.mount)).forEach(oe=>{oe&&(ae?It(s.validatingFields,oe,ae):An(s.validatingFields,oe))}),u.state.next({validatingFields:s.validatingFields,isValidating:!Cs(s.validatingFields)}))},x=(ee,ae=[],oe,be,je=!0,we=!0)=>{if(be&&oe&&!t.disabled){if(o.action=!0,we&&Array.isArray($e(r,ee))){const re=oe($e(r,ee),be.argA,be.argB);je&&It(r,ee,re)}if(we&&Array.isArray($e(s.errors,ee))){const re=oe($e(s.errors,ee),be.argA,be.argB);je&&It(s.errors,ee,re),dK(s.errors,ee)}if((m.touchedFields||h.touchedFields)&&we&&Array.isArray($e(s.touchedFields,ee))){const re=oe($e(s.touchedFields,ee),be.argA,be.argB);je&&It(s.touchedFields,ee,re)}(m.dirtyFields||h.dirtyFields)&&(s.dirtyFields=Nd(i,a)),u.state.next({name:ee,isDirty:T(ee,ae),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else It(a,ee,ae)},b=(ee,ae)=>{It(s.errors,ee,ae),u.state.next({errors:s.errors})},_=ee=>{s.errors=ee,u.state.next({errors:s.errors,isValid:!1})},N=(ee,ae,oe,be)=>{const je=$e(r,ee);if(je){const we=$e(a,ee,jn(oe)?$e(i,ee):oe);jn(we)||be&&be.defaultChecked||ae?It(a,ee,ae?we:ES(je._f)):O(ee,we),o.mount&&v()}},C=(ee,ae,oe,be,je)=>{let we=!1,re=!1;const Ce={name:ee};if(!t.disabled){if(!oe||be){(m.isDirty||h.isDirty)&&(re=s.isDirty,s.isDirty=Ce.isDirty=T(),we=re!==Ce.isDirty);const Te=Bi($e(i,ee),ae);re=!!$e(s.dirtyFields,ee),Te?An(s.dirtyFields,ee):It(s.dirtyFields,ee,!0),Ce.dirtyFields=s.dirtyFields,we=we||(m.dirtyFields||h.dirtyFields)&&re!==!Te}if(oe){const Te=$e(s.touchedFields,ee);Te||(It(s.touchedFields,ee,oe),Ce.touchedFields=s.touchedFields,we=we||(m.touchedFields||h.touchedFields)&&Te!==oe)}we&&je&&u.state.next(Ce)}return we?Ce:{}},I=(ee,ae,oe,be)=>{const je=$e(s.errors,ee),we=(m.isValid||h.isValid)&&Bs(ae)&&s.isValid!==ae;if(t.delayError&&oe?(d=y(()=>b(ee,oe)),d(t.delayError)):(clearTimeout(f),d=null,oe?It(s.errors,ee,oe):An(s.errors,ee)),(oe?!Bi(je,oe):je)||!Cs(be)||we){const re={...be,...we&&Bs(ae)?{isValid:ae}:{},errors:s.errors,name:ee};s={...s,...re},u.state.next(re)}},k=async ee=>{w(ee,!0);const ae=await t.resolver(a,t.context,rK(ee||c.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return w(ee),ae},E=async ee=>{const{errors:ae}=await k(ee);if(ee)for(const oe of ee){const be=$e(ae,oe);be?It(s.errors,oe,be):An(s.errors,oe)}else s.errors=ae;return ae},M=async(ee,ae,oe={valid:!0})=>{for(const be in ee){const je=ee[be];if(je){const{_f:we,...re}=je;if(we){const Ce=c.array.has(we.name),Te=je._f&&iK(je._f);Te&&m.validatingFields&&w([be],!0);const lt=await MS(je,c.disabled,a,p,t.shouldUseNativeValidation&&!ae,Ce);if(Te&&m.validatingFields&&w([be]),lt[we.name]&&(oe.valid=!1,ae))break;!ae&&($e(lt,we.name)?Ce?uK(s.errors,lt,we.name):It(s.errors,we.name,lt[we.name]):An(s.errors,we.name))}!Cs(re)&&await M(re,ae,oe)}}return oe.valid},P=()=>{for(const ee of c.unMount){const ae=$e(r,ee);ae&&(ae._f.refs?ae._f.refs.every(oe=>!Tv(oe)):!Tv(ae._f.ref))&&H(ee)}c.unMount=new Set},T=(ee,ae)=>!t.disabled&&(ee&&ae&&It(a,ee,ae),!Bi(B(),i)),A=(ee,ae,oe)=>QL(ee,c,{...o.mount?a:jn(ae)?i:li(ee)?{[ee]:ae}:ae},oe,ae),z=ee=>Fw($e(o.mount?a:i,ee,t.shouldUnregister?$e(i,ee,[]):[])),O=(ee,ae,oe={})=>{const be=$e(r,ee);let je=ae;if(be){const we=be._f;we&&(!we.disabled&&It(a,ee,r4(ae,we)),je=wm(we.ref)&&hs(ae)?"":ae,e4(we.ref)?[...we.ref.options].forEach(re=>re.selected=je.includes(re.value)):we.refs?lh(we.ref)?we.refs.forEach(re=>{(!re.defaultChecked||!re.disabled)&&(Array.isArray(je)?re.checked=!!je.find(Ce=>Ce===re.value):re.checked=je===re.value||!!je)}):we.refs.forEach(re=>re.checked=re.value===je):Vw(we.ref)?we.ref.value="":(we.ref.value=je,we.ref.type||u.state.next({name:ee,values:Mn(a)})))}(oe.shouldDirty||oe.shouldTouch)&&C(ee,je,oe.shouldTouch,oe.shouldDirty,!0),oe.shouldValidate&&U(ee)},F=(ee,ae,oe)=>{for(const be in ae){if(!ae.hasOwnProperty(be))return;const je=ae[be],we=ee+"."+be,re=$e(r,we);(c.array.has(ee)||Sn(je)||re&&!re._f)&&!No(je)?F(we,je,oe):O(we,je,oe)}},G=(ee,ae,oe={})=>{const be=$e(r,ee),je=c.array.has(ee),we=Mn(ae);It(a,ee,we),je?(u.array.next({name:ee,values:Mn(a)}),(m.isDirty||m.dirtyFields||h.isDirty||h.dirtyFields)&&oe.shouldDirty&&u.state.next({name:ee,dirtyFields:Nd(i,a),isDirty:T(ee,we)})):be&&!be._f&&!hs(we)?F(ee,we,oe):O(ee,we,oe),OS(ee,c)&&u.state.next({...s,name:ee}),u.state.next({name:o.mount?ee:void 0,values:Mn(a)})},Y=async ee=>{o.mount=!0;const ae=ee.target;let oe=ae.name,be=!0;const je=$e(r,oe),we=Te=>{be=Number.isNaN(Te)||No(Te)&&isNaN(Te.getTime())||Bi(Te,$e(a,oe,Te))},re=TS(t.mode),Ce=TS(t.reValidateMode);if(je){let Te,lt;const it=ae.type?ES(je._f):GL(ee),Ft=ee.type===bm.BLUR||ee.type===bm.FOCUS_OUT,Fs=!aK(je._f)&&!t.resolver&&!$e(s.errors,oe)&&!je._f.deps||cK(Ft,$e(s.touchedFields,oe),s.isSubmitted,Ce,re),le=OS(oe,c,Ft);It(a,oe,it),Ft?(je._f.onBlur&&je._f.onBlur(ee),d&&d(0)):je._f.onChange&&je._f.onChange(ee);const De=C(oe,it,Ft),Je=!Cs(De)||le;if(!Ft&&u.state.next({name:oe,type:ee.type,values:Mn(a)}),Fs)return(m.isValid||h.isValid)&&(t.mode==="onBlur"?Ft&&v():Ft||v()),Je&&u.state.next({name:oe,...le?{}:De});if(!Ft&&le&&u.state.next({...s}),t.resolver){const{errors:Fe}=await k([oe]);if(we(it),be){const He=RS(s.errors,r,oe),Ze=RS(Fe,r,He.name||oe);Te=Ze.error,oe=Ze.name,lt=Cs(Fe)}}else w([oe],!0),Te=(await MS(je,c.disabled,a,p,t.shouldUseNativeValidation))[oe],w([oe]),we(it),be&&(Te?lt=!1:(m.isValid||h.isValid)&&(lt=await M(r,!0)));be&&(je._f.deps&&U(je._f.deps),I(oe,lt,Te,De))}},K=(ee,ae)=>{if($e(s.errors,ae)&&ee.focus)return ee.focus(),1},U=async(ee,ae={})=>{let oe,be;const je=eu(ee);if(t.resolver){const we=await E(jn(ee)?ee:je);oe=Cs(we),be=ee?!je.some(re=>$e(we,re)):oe}else ee?(be=(await Promise.all(je.map(async we=>{const re=$e(r,we);return await M(re&&re._f?{[we]:re}:re)}))).every(Boolean),!(!be&&!s.isValid)&&v()):be=oe=await M(r);return u.state.next({...!li(ee)||(m.isValid||h.isValid)&&oe!==s.isValid?{}:{name:ee},...t.resolver||!ee?{isValid:oe}:{},errors:s.errors}),ae.shouldFocus&&!be&&tu(r,K,ee?je:c.mount),be},B=ee=>{const ae={...o.mount?a:i};return jn(ee)?ae:li(ee)?$e(ae,ee):ee.map(oe=>$e(ae,oe))},R=(ee,ae)=>({invalid:!!$e((ae||s).errors,ee),isDirty:!!$e((ae||s).dirtyFields,ee),error:$e((ae||s).errors,ee),isValidating:!!$e(s.validatingFields,ee),isTouched:!!$e((ae||s).touchedFields,ee)}),$=ee=>{ee&&eu(ee).forEach(ae=>An(s.errors,ae)),u.state.next({errors:ee?s.errors:{}})},W=(ee,ae,oe)=>{const be=($e(r,ee,{_f:{}})._f||{}).ref,je=$e(s.errors,ee)||{},{ref:we,message:re,type:Ce,...Te}=je;It(s.errors,ee,{...Te,...ae,ref:be}),u.state.next({name:ee,errors:s.errors,isValid:!1}),oe&&oe.shouldFocus&&be&&be.focus&&be.focus()},Z=(ee,ae)=>Or(ee)?u.state.subscribe({next:oe=>"values"in oe&&ee(A(void 0,ae),oe)}):A(ee,ae,!0),X=ee=>u.state.subscribe({next:ae=>{lK(ee.name,ae.name,ee.exact)&&oK(ae,ee.formState||m,xe,ee.reRenderRoot)&&ee.callback({values:{...a},...s,...ae,defaultValues:i})}}).unsubscribe,V=ee=>(o.mount=!0,h={...h,...ee.formState},X({...ee,formState:h})),H=(ee,ae={})=>{for(const oe of ee?eu(ee):c.mount)c.mount.delete(oe),c.array.delete(oe),ae.keepValue||(An(r,oe),An(a,oe)),!ae.keepError&&An(s.errors,oe),!ae.keepDirty&&An(s.dirtyFields,oe),!ae.keepTouched&&An(s.touchedFields,oe),!ae.keepIsValidating&&An(s.validatingFields,oe),!t.shouldUnregister&&!ae.keepDefaultValue&&An(i,oe);u.state.next({values:Mn(a)}),u.state.next({...s,...ae.keepDirty?{isDirty:T()}:{}}),!ae.keepIsValid&&v()},se=({disabled:ee,name:ae})=>{(Bs(ee)&&o.mount||ee||c.disabled.has(ae))&&(ee?c.disabled.add(ae):c.disabled.delete(ae))},Q=(ee,ae={})=>{let oe=$e(r,ee);const be=Bs(ae.disabled)||Bs(t.disabled);return It(r,ee,{...oe||{},_f:{...oe&&oe._f?oe._f:{ref:{name:ee}},name:ee,mount:!0,...ae}}),c.mount.add(ee),oe?se({disabled:Bs(ae.disabled)?ae.disabled:t.disabled,name:ee}):N(ee,!0,ae.value),{...be?{disabled:ae.disabled||t.disabled}:{},...t.progressive?{required:!!ae.required,min:Sd(ae.min),max:Sd(ae.max),minLength:Sd(ae.minLength),maxLength:Sd(ae.maxLength),pattern:Sd(ae.pattern)}:{},name:ee,onChange:Y,onBlur:Y,ref:je=>{if(je){Q(ee,ae),oe=$e(r,ee);const we=jn(je.value)&&je.querySelectorAll&&je.querySelectorAll("input,select,textarea")[0]||je,re=tK(we),Ce=oe._f.refs||[];if(re?Ce.find(Te=>Te===we):we===oe._f.ref)return;It(r,ee,{_f:{...oe._f,...re?{refs:[...Ce.filter(Tv),we,...Array.isArray($e(i,ee))?[{}]:[]],ref:{type:we.type,name:ee}}:{ref:we}}}),N(ee,!1,void 0,we)}else oe=$e(r,ee,{}),oe._f&&(oe._f.mount=!1),(t.shouldUnregister||ae.shouldUnregister)&&!(KL(c.array,ee)&&o.action)&&c.unMount.add(ee)}}},ie=()=>t.shouldFocusError&&tu(r,K,c.mount),he=ee=>{Bs(ee)&&(u.state.next({disabled:ee}),tu(r,(ae,oe)=>{const be=$e(r,oe);be&&(ae.disabled=be._f.disabled||ee,Array.isArray(be._f.refs)&&be._f.refs.forEach(je=>{je.disabled=be._f.disabled||ee}))},0,!1))},te=(ee,ae)=>async oe=>{let be;oe&&(oe.preventDefault&&oe.preventDefault(),oe.persist&&oe.persist());let je=Mn(a);if(u.state.next({isSubmitting:!0}),t.resolver){const{errors:we,values:re}=await k();s.errors=we,je=Mn(re)}else await M(r);if(c.disabled.size)for(const we of c.disabled)An(je,we);if(An(s.errors,"root"),Cs(s.errors)){u.state.next({errors:{}});try{await ee(je,oe)}catch(we){be=we}}else ae&&await ae({...s.errors},oe),ie(),setTimeout(ie);if(u.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cs(s.errors)&&!be,submitCount:s.submitCount+1,errors:s.errors}),be)throw be},ge=(ee,ae={})=>{$e(r,ee)&&(jn(ae.defaultValue)?G(ee,Mn($e(i,ee))):(G(ee,ae.defaultValue),It(i,ee,Mn(ae.defaultValue))),ae.keepTouched||An(s.touchedFields,ee),ae.keepDirty||(An(s.dirtyFields,ee),s.isDirty=ae.defaultValue?T(ee,Mn($e(i,ee))):T()),ae.keepError||(An(s.errors,ee),m.isValid&&v()),u.state.next({...s}))},Se=(ee,ae={})=>{const oe=ee?Mn(ee):i,be=Mn(oe),je=Cs(ee),we=je?i:be;if(ae.keepDefaultValues||(i=oe),!ae.keepValues){if(ae.keepDirtyValues){const re=new Set([...c.mount,...Object.keys(Nd(i,a))]);for(const Ce of Array.from(re))$e(s.dirtyFields,Ce)?It(we,Ce,$e(a,Ce)):G(Ce,$e(we,Ce))}else{if(Dw&&jn(ee))for(const re of c.mount){const Ce=$e(r,re);if(Ce&&Ce._f){const Te=Array.isArray(Ce._f.refs)?Ce._f.refs[0]:Ce._f.ref;if(wm(Te)){const lt=Te.closest("form");if(lt){lt.reset();break}}}}if(ae.keepFieldsRef)for(const re of c.mount)G(re,$e(we,re));else r={}}a=t.shouldUnregister?ae.keepDefaultValues?Mn(i):{}:Mn(we),u.array.next({values:{...we}}),u.state.next({values:{...we}})}c={mount:ae.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!ae.keepIsValid||!!ae.keepDirtyValues,o.watch=!!t.shouldUnregister,u.state.next({submitCount:ae.keepSubmitCount?s.submitCount:0,isDirty:je?!1:ae.keepDirty?s.isDirty:!!(ae.keepDefaultValues&&!Bi(ee,i)),isSubmitted:ae.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:je?{}:ae.keepDirtyValues?ae.keepDefaultValues&&a?Nd(i,a):s.dirtyFields:ae.keepDefaultValues&&ee?Nd(i,ee):ae.keepDirty?s.dirtyFields:{},touchedFields:ae.keepTouched?s.touchedFields:{},errors:ae.keepErrors?s.errors:{},isSubmitSuccessful:ae.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},fe=(ee,ae)=>Se(Or(ee)?ee(a):ee,ae),ke=(ee,ae={})=>{const oe=$e(r,ee),be=oe&&oe._f;if(be){const je=be.refs?be.refs[0]:be.ref;je.focus&&(je.focus(),ae.shouldSelect&&Or(je.select)&&je.select())}},xe=ee=>{s={...s,...ee}},me={control:{register:Q,unregister:H,getFieldState:R,handleSubmit:te,setError:W,_subscribe:X,_runSchema:k,_focusError:ie,_getWatch:A,_getDirty:T,_setValid:v,_setFieldArray:x,_setDisabledField:se,_setErrors:_,_getFieldArray:z,_reset:Se,_resetDefaultValues:()=>Or(t.defaultValues)&&t.defaultValues().then(ee=>{fe(ee,t.resetOptions),u.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:he,_subjects:u,_proxyFormState:m,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(ee){o=ee},get _defaultValues(){return i},get _names(){return c},set _names(ee){c=ee},get _formState(){return s},get _options(){return t},set _options(ee){t={...t,...ee}}},subscribe:V,trigger:U,register:Q,handleSubmit:te,watch:Z,setValue:G,getValues:B,reset:fe,resetField:ge,clearErrors:$,unregister:H,setError:W,setFocus:ke,getFieldState:R};return{...me,formControl:me}}function a4(e={}){const t=_e.useRef(void 0),s=_e.useRef(void 0),[r,i]=_e.useState({isDirty:!1,isValidating:!1,isLoading:Or(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Or(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Or(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...c}=fK(e);t.current={...c,formState:r}}const a=t.current.control;return a._options=e,Bw(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(c=>({...c,isReady:!0})),a._formState.isReady=!0,o},[a]),_e.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),_e.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),_e.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),_e.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),_e.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),_e.useEffect(()=>{e.values&&!Bi(e.values,s.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),s.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[a,e.values]),_e.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=XL(r,a),t.current}const IS=(e,t,s)=>{if(e&&"reportValidity"in e){const r=$e(s,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},o4=(e,t)=>{for(const s in t.fields){const r=t.fields[s];r&&r.ref&&"reportValidity"in r.ref?IS(r.ref,s,e):r.refs&&r.refs.forEach(i=>IS(i,s,e))}},mK=(e,t)=>{t.shouldUseNativeValidation&&o4(e,t);const s={};for(const r in e){const i=$e(t.fields,r),a=Object.assign(e[r]||{},{ref:i&&i.ref});if(pK(t.names||Object.keys(e),r)){const o=Object.assign({},$e(s,r));It(o,"root",a),It(s,r,o)}else It(s,r,a)}return s},pK=(e,t)=>e.some(s=>s.startsWith(t+"."));var gK=function(e,t){for(var s={};e.length;){var r=e[0],i=r.code,a=r.message,o=r.path.join(".");if(!s[o])if("unionErrors"in r){var c=r.unionErrors[0].errors[0];s[o]={message:c.message,type:c.code}}else s[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(m){return m.errors.forEach(function(h){return e.push(h)})}),t){var d=s[o].types,f=d&&d[r.code];s[o]=JL(o,t,s,i,f?[].concat(f,r.message):r.message)}e.shift()}return s},l4=function(e,t,s){return s===void 0&&(s={}),function(r,i,a){try{return Promise.resolve(function(o,c){try{var d=Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(f){return a.shouldUseNativeValidation&&o4({},a),{errors:{},values:s.raw?r:f}})}catch(f){return c(f)}return d&&d.then?d.then(void 0,c):d}(0,function(o){if(function(c){return Array.isArray(c==null?void 0:c.errors)}(o))return{values:{},errors:mK(gK(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Mt;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function s(i){throw new Error}e.assertNever=s,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),o={};for(const c of a)o[c]=i[c];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Mt||(Mt={}));var DS;(function(e){e.mergeShapes=(t,s)=>({...t,...s})})(DS||(DS={}));const Ke=Mt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),va=e=>{switch(typeof e){case"undefined":return Ke.undefined;case"string":return Ke.string;case"number":return Number.isNaN(e)?Ke.nan:Ke.number;case"boolean":return Ke.boolean;case"function":return Ke.function;case"bigint":return Ke.bigint;case"symbol":return Ke.symbol;case"object":return Array.isArray(e)?Ke.array:e===null?Ke.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ke.promise:typeof Map<"u"&&e instanceof Map?Ke.map:typeof Set<"u"&&e instanceof Set?Ke.set:typeof Date<"u"&&e instanceof Date?Ke.date:Ke.object;default:return Ke.unknown}},Le=Mt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ra extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=t}format(t){const s=t||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(s(o));else{let c=r,d=0;for(;d<o.path.length;){const f=o.path[d];d===o.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(s(o))):c[f]=c[f]||{_errors:[]},c=c[f],d++}}};return i(this),r}static assert(t){if(!(t instanceof ra))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Mt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=s=>s.message){const s={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];s[a]=s[a]||[],s[a].push(t(i))}else r.push(t(i));return{formErrors:r,fieldErrors:s}}get formErrors(){return this.flatten()}}ra.create=e=>new ra(e);const Ay=(e,t)=>{let s;switch(e.code){case Le.invalid_type:e.received===Ke.undefined?s="Required":s=`Expected ${e.expected}, received ${e.received}`;break;case Le.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,Mt.jsonStringifyReplacer)}`;break;case Le.unrecognized_keys:s=`Unrecognized key(s) in object: ${Mt.joinValues(e.keys,", ")}`;break;case Le.invalid_union:s="Invalid input";break;case Le.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Mt.joinValues(e.options)}`;break;case Le.invalid_enum_value:s=`Invalid enum value. Expected ${Mt.joinValues(e.options)}, received '${e.received}'`;break;case Le.invalid_arguments:s="Invalid function arguments";break;case Le.invalid_return_type:s="Invalid function return type";break;case Le.invalid_date:s="Invalid date";break;case Le.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:Mt.assertNever(e.validation):e.validation!=="regex"?s=`Invalid ${e.validation}`:s="Invalid";break;case Le.too_small:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?s=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:s="Invalid input";break;case Le.too_big:e.type==="array"?s=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?s=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?s=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?s=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?s=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:s="Invalid input";break;case Le.custom:s="Invalid input";break;case Le.invalid_intersection_types:s="Intersection results could not be merged";break;case Le.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case Le.not_finite:s="Number must be finite";break;default:s=t.defaultError,Mt.assertNever(e)}return{message:s}};let vK=Ay;function xK(){return vK}const yK=e=>{const{data:t,path:s,errorMaps:r,issueData:i}=e,a=[...s,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let c="";const d=r.filter(f=>!!f).slice().reverse();for(const f of d)c=f(o,{data:t,defaultError:c}).message;return{...i,path:a,message:c}};function Ve(e,t){const s=xK(),r=yK({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===Ay?void 0:Ay].filter(i=>!!i)});e.common.issues.push(r)}class ws{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,s){const r=[];for(const i of s){if(i.status==="aborted")return ht;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,s){const r=[];for(const i of s){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return ws.mergeObjectSync(t,r)}static mergeObjectSync(t,s){const r={};for(const i of s){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return ht;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:t.value,value:r}}}const ht=Object.freeze({status:"aborted"}),Id=e=>({status:"dirty",value:e}),gr=e=>({status:"valid",value:e}),FS=e=>e.status==="aborted",$S=e=>e.status==="dirty",Sc=e=>e.status==="valid",Nm=e=>typeof Promise<"u"&&e instanceof Promise;var Qe;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Qe||(Qe={}));class wi{constructor(t,s,r,i){this._cachedPath=[],this.parent=t,this.data=s,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const zS=(e,t)=>{if(Sc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new ra(e.common.issues);return this._error=s,this._error}}};function wt(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:r,description:i}=e;if(t&&(s||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,c)=>{const{message:d}=e;return o.code==="invalid_enum_value"?{message:d??c.defaultError}:typeof c.data>"u"?{message:d??r??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:d??s??c.defaultError}},description:i}}class Pt{get description(){return this._def.description}_getType(t){return va(t.data)}_getOrReturnCtx(t,s){return s||{common:t.parent.common,data:t.data,parsedType:va(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ws,ctx:{common:t.parent.common,data:t.data,parsedType:va(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const s=this._parse(t);if(Nm(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(t){const s=this._parse(t);return Promise.resolve(s)}parse(t,s){const r=this.safeParse(t,s);if(r.success)return r.data;throw r.error}safeParse(t,s){const r={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:va(t)},i=this._parseSync({data:t,path:r.path,parent:r});return zS(r,i)}"~validate"(t){var r,i;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:va(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:s});return Sc(a)?{value:a.value}:{issues:s.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(a=>Sc(a)?{value:a.value}:{issues:s.common.issues})}async parseAsync(t,s){const r=await this.safeParseAsync(t,s);if(r.success)return r.data;throw r.error}async safeParseAsync(t,s){const r={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:va(t)},i=this._parse({data:t,path:r.path,parent:r}),a=await(Nm(i)?i:Promise.resolve(i));return zS(r,a)}refine(t,s){const r=i=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(i):s;return this._refinement((i,a)=>{const o=t(i),c=()=>a.addIssue({code:Le.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(t,s){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof s=="function"?s(r,i):s),!1))}_refinement(t){return new Ya({schema:this,typeName:ut.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return za.create(this,this._def)}nullable(){return Tc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return gi.create(this)}promise(){return Pm.create(this,this._def)}or(t){return Sm.create([this,t],this._def)}and(t){return km.create(this,t,this._def)}transform(t){return new Ya({...wt(this._def),schema:this,typeName:ut.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const s=typeof t=="function"?t:()=>t;return new qy({...wt(this._def),innerType:this,defaultValue:s,typeName:ut.ZodDefault})}brand(){return new VK({typeName:ut.ZodBranded,type:this,...wt(this._def)})}catch(t){const s=typeof t=="function"?t:()=>t;return new Hy({...wt(this._def),innerType:this,catchValue:s,typeName:ut.ZodCatch})}describe(t){const s=this.constructor;return new s({...this._def,description:t})}pipe(t){return qw.create(this,t)}readonly(){return Zy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const bK=/^c[^\s-]{8,}$/i,wK=/^[0-9a-z]+$/,jK=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_K=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,NK=/^[a-z0-9_-]{21}$/i,SK=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,kK=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,CK=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,PK="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Av;const EK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,TK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,AK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,OK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,RK=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,LK=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,c4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",MK=new RegExp(`^${c4}$`);function d4(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const s=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${s}`}function IK(e){return new RegExp(`^${d4(e)}$`)}function DK(e){let t=`${c4}T${d4(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function FK(e,t){return!!((t==="v4"||!t)&&EK.test(e)||(t==="v6"||!t)&&AK.test(e))}function $K(e,t){if(!SK.test(e))return!1;try{const[s]=e.split(".");if(!s)return!1;const r=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function zK(e,t){return!!((t==="v4"||!t)&&TK.test(e)||(t==="v6"||!t)&&OK.test(e))}class Hi extends Pt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ke.string){const a=this._getOrReturnCtx(t);return Ve(a,{code:Le.invalid_type,expected:Ke.string,received:a.parsedType}),ht}const r=new ws;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,c=t.data.length<a.value;(o||c)&&(i=this._getOrReturnCtx(t,i),o?Ve(i,{code:Le.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):c&&Ve(i,{code:Le.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")CK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"email",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Av||(Av=new RegExp(PK,"u")),Av.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"emoji",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")_K.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"uuid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")NK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"nanoid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")bK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"cuid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")wK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"cuid2",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")jK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"ulid",code:Le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ve(i,{validation:"url",code:Le.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"regex",code:Le.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?DK(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?MK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?IK(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?kK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"duration",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?FK(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"ip",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?$K(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"jwt",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?zK(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"cidr",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?RK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"base64",code:Le.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?LK.test(t.data)||(i=this._getOrReturnCtx(t,i),Ve(i,{validation:"base64url",code:Le.invalid_string,message:a.message}),r.dirty()):Mt.assertNever(a);return{status:r.value,value:t.data}}_regex(t,s,r){return this.refinement(i=>t.test(i),{validation:s,code:Le.invalid_string,...Qe.errToObj(r)})}_addCheck(t){return new Hi({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Qe.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Qe.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Qe.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Qe.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Qe.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Qe.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Qe.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Qe.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Qe.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Qe.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Qe.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Qe.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Qe.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...Qe.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Qe.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Qe.errToObj(t)})}regex(t,s){return this._addCheck({kind:"regex",regex:t,...Qe.errToObj(s)})}includes(t,s){return this._addCheck({kind:"includes",value:t,position:s==null?void 0:s.position,...Qe.errToObj(s==null?void 0:s.message)})}startsWith(t,s){return this._addCheck({kind:"startsWith",value:t,...Qe.errToObj(s)})}endsWith(t,s){return this._addCheck({kind:"endsWith",value:t,...Qe.errToObj(s)})}min(t,s){return this._addCheck({kind:"min",value:t,...Qe.errToObj(s)})}max(t,s){return this._addCheck({kind:"max",value:t,...Qe.errToObj(s)})}length(t,s){return this._addCheck({kind:"length",value:t,...Qe.errToObj(s)})}nonempty(t){return this.min(1,Qe.errToObj(t))}trim(){return new Hi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Hi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Hi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxLength(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}Hi.create=e=>new Hi({checks:[],typeName:ut.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...wt(e)});function BK(e,t){const s=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=s>r?s:r,a=Number.parseInt(e.toFixed(i).replace(".","")),o=Number.parseInt(t.toFixed(i).replace(".",""));return a%o/10**i}class kc extends Pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ke.number){const a=this._getOrReturnCtx(t);return Ve(a,{code:Le.invalid_type,expected:Ke.number,received:a.parsedType}),ht}let r;const i=new ws;for(const a of this._def.checks)a.kind==="int"?Mt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?BK(t.data,a.value)!==0&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.not_finite,message:a.message}),i.dirty()):Mt.assertNever(a);return{status:i.value,value:t.data}}gte(t,s){return this.setLimit("min",t,!0,Qe.toString(s))}gt(t,s){return this.setLimit("min",t,!1,Qe.toString(s))}lte(t,s){return this.setLimit("max",t,!0,Qe.toString(s))}lt(t,s){return this.setLimit("max",t,!1,Qe.toString(s))}setLimit(t,s,r,i){return new kc({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:r,message:Qe.toString(i)}]})}_addCheck(t){return new kc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Qe.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Qe.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Qe.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Qe.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Qe.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:Qe.toString(s)})}finite(t){return this._addCheck({kind:"finite",message:Qe.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Qe.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Qe.toString(t)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Mt.isInteger(t.value))}get isFinite(){let t=null,s=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(s===null||r.value>s)&&(s=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(s)&&Number.isFinite(t)}}kc.create=e=>new kc({checks:[],typeName:ut.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...wt(e)});class Cc extends Pt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ke.bigint)return this._getInvalidInput(t);let r;const i=new ws;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Ve(r,{code:Le.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Mt.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const s=this._getOrReturnCtx(t);return Ve(s,{code:Le.invalid_type,expected:Ke.bigint,received:s.parsedType}),ht}gte(t,s){return this.setLimit("min",t,!0,Qe.toString(s))}gt(t,s){return this.setLimit("min",t,!1,Qe.toString(s))}lte(t,s){return this.setLimit("max",t,!0,Qe.toString(s))}lt(t,s){return this.setLimit("max",t,!1,Qe.toString(s))}setLimit(t,s,r,i){return new Cc({...this._def,checks:[...this._def.checks,{kind:t,value:s,inclusive:r,message:Qe.toString(i)}]})}_addCheck(t){return new Cc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Qe.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Qe.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Qe.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Qe.toString(t)})}multipleOf(t,s){return this._addCheck({kind:"multipleOf",value:t,message:Qe.toString(s)})}get minValue(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t}get maxValue(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t}}Cc.create=e=>new Cc({checks:[],typeName:ut.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...wt(e)});class Oy extends Pt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ke.boolean){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ke.boolean,received:r.parsedType}),ht}return gr(t.data)}}Oy.create=e=>new Oy({typeName:ut.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...wt(e)});class $u extends Pt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ke.date){const a=this._getOrReturnCtx(t);return Ve(a,{code:Le.invalid_type,expected:Ke.date,received:a.parsedType}),ht}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Ve(a,{code:Le.invalid_date}),ht}const r=new ws;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Ve(i,{code:Le.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Mt.assertNever(a);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new $u({...this._def,checks:[...this._def.checks,t]})}min(t,s){return this._addCheck({kind:"min",value:t.getTime(),message:Qe.toString(s)})}max(t,s){return this._addCheck({kind:"max",value:t.getTime(),message:Qe.toString(s)})}get minDate(){let t=null;for(const s of this._def.checks)s.kind==="min"&&(t===null||s.value>t)&&(t=s.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const s of this._def.checks)s.kind==="max"&&(t===null||s.value<t)&&(t=s.value);return t!=null?new Date(t):null}}$u.create=e=>new $u({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ut.ZodDate,...wt(e)});class Ry extends Pt{_parse(t){if(this._getType(t)!==Ke.symbol){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ke.symbol,received:r.parsedType}),ht}return gr(t.data)}}Ry.create=e=>new Ry({typeName:ut.ZodSymbol,...wt(e)});class Ly extends Pt{_parse(t){if(this._getType(t)!==Ke.undefined){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ke.undefined,received:r.parsedType}),ht}return gr(t.data)}}Ly.create=e=>new Ly({typeName:ut.ZodUndefined,...wt(e)});class My extends Pt{_parse(t){if(this._getType(t)!==Ke.null){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ke.null,received:r.parsedType}),ht}return gr(t.data)}}My.create=e=>new My({typeName:ut.ZodNull,...wt(e)});class Iy extends Pt{constructor(){super(...arguments),this._any=!0}_parse(t){return gr(t.data)}}Iy.create=e=>new Iy({typeName:ut.ZodAny,...wt(e)});class Dy extends Pt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return gr(t.data)}}Dy.create=e=>new Dy({typeName:ut.ZodUnknown,...wt(e)});class Ka extends Pt{_parse(t){const s=this._getOrReturnCtx(t);return Ve(s,{code:Le.invalid_type,expected:Ke.never,received:s.parsedType}),ht}}Ka.create=e=>new Ka({typeName:ut.ZodNever,...wt(e)});class Fy extends Pt{_parse(t){if(this._getType(t)!==Ke.undefined){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ke.void,received:r.parsedType}),ht}return gr(t.data)}}Fy.create=e=>new Fy({typeName:ut.ZodVoid,...wt(e)});class gi extends Pt{_parse(t){const{ctx:s,status:r}=this._processInputParams(t),i=this._def;if(s.parsedType!==Ke.array)return Ve(s,{code:Le.invalid_type,expected:Ke.array,received:s.parsedType}),ht;if(i.exactLength!==null){const o=s.data.length>i.exactLength.value,c=s.data.length<i.exactLength.value;(o||c)&&(Ve(s,{code:o?Le.too_big:Le.too_small,minimum:c?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&s.data.length<i.minLength.value&&(Ve(s,{code:Le.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&s.data.length>i.maxLength.value&&(Ve(s,{code:Le.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),s.common.async)return Promise.all([...s.data].map((o,c)=>i.type._parseAsync(new wi(s,o,s.path,c)))).then(o=>ws.mergeArray(r,o));const a=[...s.data].map((o,c)=>i.type._parseSync(new wi(s,o,s.path,c)));return ws.mergeArray(r,a)}get element(){return this._def.type}min(t,s){return new gi({...this._def,minLength:{value:t,message:Qe.toString(s)}})}max(t,s){return new gi({...this._def,maxLength:{value:t,message:Qe.toString(s)}})}length(t,s){return new gi({...this._def,exactLength:{value:t,message:Qe.toString(s)}})}nonempty(t){return this.min(1,t)}}gi.create=(e,t)=>new gi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ut.ZodArray,...wt(t)});function xl(e){if(e instanceof pn){const t={};for(const s in e.shape){const r=e.shape[s];t[s]=za.create(xl(r))}return new pn({...e._def,shape:()=>t})}else return e instanceof gi?new gi({...e._def,type:xl(e.element)}):e instanceof za?za.create(xl(e.unwrap())):e instanceof Tc?Tc.create(xl(e.unwrap())):e instanceof Xo?Xo.create(e.items.map(t=>xl(t))):e}class pn extends Pt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),s=Mt.objectKeys(t);return this._cached={shape:t,keys:s},this._cached}_parse(t){if(this._getType(t)!==Ke.object){const f=this._getOrReturnCtx(t);return Ve(f,{code:Le.invalid_type,expected:Ke.object,received:f.parsedType}),ht}const{status:r,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof Ka&&this._def.unknownKeys==="strip"))for(const f in i.data)o.includes(f)||c.push(f);const d=[];for(const f of o){const m=a[f],h=i.data[f];d.push({key:{status:"valid",value:f},value:m._parse(new wi(i,h,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Ka){const f=this._def.unknownKeys;if(f==="passthrough")for(const m of c)d.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(f==="strict")c.length>0&&(Ve(i,{code:Le.unrecognized_keys,keys:c}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const m of c){const h=i.data[m];d.push({key:{status:"valid",value:m},value:f._parse(new wi(i,h,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const m of d){const h=await m.key,u=await m.value;f.push({key:h,value:u,alwaysSet:m.alwaysSet})}return f}).then(f=>ws.mergeObjectSync(r,f)):ws.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(t){return Qe.errToObj,new pn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(s,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,s,r).message)??r.defaultError;return s.code==="unrecognized_keys"?{message:Qe.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new pn({...this._def,unknownKeys:"strip"})}passthrough(){return new pn({...this._def,unknownKeys:"passthrough"})}extend(t){return new pn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new pn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ut.ZodObject})}setKey(t,s){return this.augment({[t]:s})}catchall(t){return new pn({...this._def,catchall:t})}pick(t){const s={};for(const r of Mt.objectKeys(t))t[r]&&this.shape[r]&&(s[r]=this.shape[r]);return new pn({...this._def,shape:()=>s})}omit(t){const s={};for(const r of Mt.objectKeys(this.shape))t[r]||(s[r]=this.shape[r]);return new pn({...this._def,shape:()=>s})}deepPartial(){return xl(this)}partial(t){const s={};for(const r of Mt.objectKeys(this.shape)){const i=this.shape[r];t&&!t[r]?s[r]=i:s[r]=i.optional()}return new pn({...this._def,shape:()=>s})}required(t){const s={};for(const r of Mt.objectKeys(this.shape))if(t&&!t[r])s[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof za;)a=a._def.innerType;s[r]=a}return new pn({...this._def,shape:()=>s})}keyof(){return u4(Mt.objectKeys(this.shape))}}pn.create=(e,t)=>new pn({shape:()=>e,unknownKeys:"strip",catchall:Ka.create(),typeName:ut.ZodObject,...wt(t)});pn.strictCreate=(e,t)=>new pn({shape:()=>e,unknownKeys:"strict",catchall:Ka.create(),typeName:ut.ZodObject,...wt(t)});pn.lazycreate=(e,t)=>new pn({shape:e,unknownKeys:"strip",catchall:Ka.create(),typeName:ut.ZodObject,...wt(t)});class Sm extends Pt{_parse(t){const{ctx:s}=this._processInputParams(t),r=this._def.options;function i(a){for(const c of a)if(c.result.status==="valid")return c.result;for(const c of a)if(c.result.status==="dirty")return s.common.issues.push(...c.ctx.common.issues),c.result;const o=a.map(c=>new ra(c.ctx.common.issues));return Ve(s,{code:Le.invalid_union,unionErrors:o}),ht}if(s.common.async)return Promise.all(r.map(async a=>{const o={...s,common:{...s.common,issues:[]},parent:null};return{result:await a._parseAsync({data:s.data,path:s.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const d of r){const f={...s,common:{...s.common,issues:[]},parent:null},m=d._parseSync({data:s.data,path:s.path,parent:f});if(m.status==="valid")return m;m.status==="dirty"&&!a&&(a={result:m,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(a)return s.common.issues.push(...a.ctx.common.issues),a.result;const c=o.map(d=>new ra(d));return Ve(s,{code:Le.invalid_union,unionErrors:c}),ht}}get options(){return this._def.options}}Sm.create=(e,t)=>new Sm({options:e,typeName:ut.ZodUnion,...wt(t)});function $y(e,t){const s=va(e),r=va(t);if(e===t)return{valid:!0,data:e};if(s===Ke.object&&r===Ke.object){const i=Mt.objectKeys(t),a=Mt.objectKeys(e).filter(c=>i.indexOf(c)!==-1),o={...e,...t};for(const c of a){const d=$y(e[c],t[c]);if(!d.valid)return{valid:!1};o[c]=d.data}return{valid:!0,data:o}}else if(s===Ke.array&&r===Ke.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],c=t[a],d=$y(o,c);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return s===Ke.date&&r===Ke.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class km extends Pt{_parse(t){const{status:s,ctx:r}=this._processInputParams(t),i=(a,o)=>{if(FS(a)||FS(o))return ht;const c=$y(a.value,o.value);return c.valid?(($S(a)||$S(o))&&s.dirty(),{status:s.value,value:c.data}):(Ve(r,{code:Le.invalid_intersection_types}),ht)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}km.create=(e,t,s)=>new km({left:e,right:t,typeName:ut.ZodIntersection,...wt(s)});class Xo extends Pt{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ke.array)return Ve(r,{code:Le.invalid_type,expected:Ke.array,received:r.parsedType}),ht;if(r.data.length<this._def.items.length)return Ve(r,{code:Le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ht;!this._def.rest&&r.data.length>this._def.items.length&&(Ve(r,{code:Le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const a=[...r.data].map((o,c)=>{const d=this._def.items[c]||this._def.rest;return d?d._parse(new wi(r,o,r.path,c)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>ws.mergeArray(s,o)):ws.mergeArray(s,a)}get items(){return this._def.items}rest(t){return new Xo({...this._def,rest:t})}}Xo.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xo({items:e,typeName:ut.ZodTuple,rest:null,...wt(t)})};class Cm extends Pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ke.object)return Ve(r,{code:Le.invalid_type,expected:Ke.object,received:r.parsedType}),ht;const i=[],a=this._def.keyType,o=this._def.valueType;for(const c in r.data)i.push({key:a._parse(new wi(r,c,r.path,c)),value:o._parse(new wi(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?ws.mergeObjectAsync(s,i):ws.mergeObjectSync(s,i)}get element(){return this._def.valueType}static create(t,s,r){return s instanceof Pt?new Cm({keyType:t,valueType:s,typeName:ut.ZodRecord,...wt(r)}):new Cm({keyType:Hi.create(),valueType:t,typeName:ut.ZodRecord,...wt(s)})}}class zy extends Pt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ke.map)return Ve(r,{code:Le.invalid_type,expected:Ke.map,received:r.parsedType}),ht;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([c,d],f)=>({key:i._parse(new wi(r,c,r.path,[f,"key"])),value:a._parse(new wi(r,d,r.path,[f,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const d of o){const f=await d.key,m=await d.value;if(f.status==="aborted"||m.status==="aborted")return ht;(f.status==="dirty"||m.status==="dirty")&&s.dirty(),c.set(f.value,m.value)}return{status:s.value,value:c}})}else{const c=new Map;for(const d of o){const f=d.key,m=d.value;if(f.status==="aborted"||m.status==="aborted")return ht;(f.status==="dirty"||m.status==="dirty")&&s.dirty(),c.set(f.value,m.value)}return{status:s.value,value:c}}}}zy.create=(e,t,s)=>new zy({valueType:t,keyType:e,typeName:ut.ZodMap,...wt(s)});class Pc extends Pt{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.parsedType!==Ke.set)return Ve(r,{code:Le.invalid_type,expected:Ke.set,received:r.parsedType}),ht;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Ve(r,{code:Le.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),s.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Ve(r,{code:Le.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),s.dirty());const a=this._def.valueType;function o(d){const f=new Set;for(const m of d){if(m.status==="aborted")return ht;m.status==="dirty"&&s.dirty(),f.add(m.value)}return{status:s.value,value:f}}const c=[...r.data.values()].map((d,f)=>a._parse(new wi(r,d,r.path,f)));return r.common.async?Promise.all(c).then(d=>o(d)):o(c)}min(t,s){return new Pc({...this._def,minSize:{value:t,message:Qe.toString(s)}})}max(t,s){return new Pc({...this._def,maxSize:{value:t,message:Qe.toString(s)}})}size(t,s){return this.min(t,s).max(t,s)}nonempty(t){return this.min(1,t)}}Pc.create=(e,t)=>new Pc({valueType:e,minSize:null,maxSize:null,typeName:ut.ZodSet,...wt(t)});class By extends Pt{get schema(){return this._def.getter()}_parse(t){const{ctx:s}=this._processInputParams(t);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}By.create=(e,t)=>new By({getter:e,typeName:ut.ZodLazy,...wt(t)});class Vy extends Pt{_parse(t){if(t.data!==this._def.value){const s=this._getOrReturnCtx(t);return Ve(s,{received:s.data,code:Le.invalid_literal,expected:this._def.value}),ht}return{status:"valid",value:t.data}}get value(){return this._def.value}}Vy.create=(e,t)=>new Vy({value:e,typeName:ut.ZodLiteral,...wt(t)});function u4(e,t){return new Ec({values:e,typeName:ut.ZodEnum,...wt(t)})}class Ec extends Pt{_parse(t){if(typeof t.data!="string"){const s=this._getOrReturnCtx(t),r=this._def.values;return Ve(s,{expected:Mt.joinValues(r),received:s.parsedType,code:Le.invalid_type}),ht}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const s=this._getOrReturnCtx(t),r=this._def.values;return Ve(s,{received:s.data,code:Le.invalid_enum_value,options:r}),ht}return gr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const s of this._def.values)t[s]=s;return t}get Values(){const t={};for(const s of this._def.values)t[s]=s;return t}get Enum(){const t={};for(const s of this._def.values)t[s]=s;return t}extract(t,s=this._def){return Ec.create(t,{...this._def,...s})}exclude(t,s=this._def){return Ec.create(this.options.filter(r=>!t.includes(r)),{...this._def,...s})}}Ec.create=u4;class Uy extends Pt{_parse(t){const s=Mt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Ke.string&&r.parsedType!==Ke.number){const i=Mt.objectValues(s);return Ve(r,{expected:Mt.joinValues(i),received:r.parsedType,code:Le.invalid_type}),ht}if(this._cache||(this._cache=new Set(Mt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Mt.objectValues(s);return Ve(r,{received:r.data,code:Le.invalid_enum_value,options:i}),ht}return gr(t.data)}get enum(){return this._def.values}}Uy.create=(e,t)=>new Uy({values:e,typeName:ut.ZodNativeEnum,...wt(t)});class Pm extends Pt{unwrap(){return this._def.type}_parse(t){const{ctx:s}=this._processInputParams(t);if(s.parsedType!==Ke.promise&&s.common.async===!1)return Ve(s,{code:Le.invalid_type,expected:Ke.promise,received:s.parsedType}),ht;const r=s.parsedType===Ke.promise?s.data:Promise.resolve(s.data);return gr(r.then(i=>this._def.type.parseAsync(i,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Pm.create=(e,t)=>new Pm({type:e,typeName:ut.ZodPromise,...wt(t)});class Ya extends Pt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ut.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:s,ctx:r}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Ve(r,o),o.fatal?s.abort():s.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async c=>{if(s.value==="aborted")return ht;const d=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return d.status==="aborted"?ht:d.status==="dirty"||s.value==="dirty"?Id(d.value):d});{if(s.value==="aborted")return ht;const c=this._def.schema._parseSync({data:o,path:r.path,parent:r});return c.status==="aborted"?ht:c.status==="dirty"||s.value==="dirty"?Id(c.value):c}}if(i.type==="refinement"){const o=c=>{const d=i.refinement(c,a);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?ht:(c.status==="dirty"&&s.dirty(),o(c.value),{status:s.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?ht:(c.status==="dirty"&&s.dirty(),o(c.value).then(()=>({status:s.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Sc(o))return ht;const c=i.transform(o.value,a);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Sc(o)?Promise.resolve(i.transform(o.value,a)).then(c=>({status:s.value,value:c})):ht);Mt.assertNever(i)}}Ya.create=(e,t,s)=>new Ya({schema:e,typeName:ut.ZodEffects,effect:t,...wt(s)});Ya.createWithPreprocess=(e,t,s)=>new Ya({schema:t,effect:{type:"preprocess",transform:e},typeName:ut.ZodEffects,...wt(s)});class za extends Pt{_parse(t){return this._getType(t)===Ke.undefined?gr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}za.create=(e,t)=>new za({innerType:e,typeName:ut.ZodOptional,...wt(t)});class Tc extends Pt{_parse(t){return this._getType(t)===Ke.null?gr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Tc.create=(e,t)=>new Tc({innerType:e,typeName:ut.ZodNullable,...wt(t)});class qy extends Pt{_parse(t){const{ctx:s}=this._processInputParams(t);let r=s.data;return s.parsedType===Ke.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}qy.create=(e,t)=>new qy({innerType:e,typeName:ut.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...wt(t)});class Hy extends Pt{_parse(t){const{ctx:s}=this._processInputParams(t),r={...s,common:{...s.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Nm(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ra(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ra(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Hy.create=(e,t)=>new Hy({innerType:e,typeName:ut.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...wt(t)});class Wy extends Pt{_parse(t){if(this._getType(t)!==Ke.nan){const r=this._getOrReturnCtx(t);return Ve(r,{code:Le.invalid_type,expected:Ke.nan,received:r.parsedType}),ht}return{status:"valid",value:t.data}}}Wy.create=e=>new Wy({typeName:ut.ZodNaN,...wt(e)});class VK extends Pt{_parse(t){const{ctx:s}=this._processInputParams(t),r=s.data;return this._def.type._parse({data:r,path:s.path,parent:s})}unwrap(){return this._def.type}}class qw extends Pt{_parse(t){const{status:s,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?ht:a.status==="dirty"?(s.dirty(),Id(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?ht:i.status==="dirty"?(s.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,s){return new qw({in:t,out:s,typeName:ut.ZodPipeline})}}class Zy extends Pt{_parse(t){const s=this._def.innerType._parse(t),r=i=>(Sc(i)&&(i.value=Object.freeze(i.value)),i);return Nm(s)?s.then(i=>r(i)):r(s)}unwrap(){return this._def.innerType}}Zy.create=(e,t)=>new Zy({innerType:e,typeName:ut.ZodReadonly,...wt(t)});pn.lazycreate;var ut;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ut||(ut={}));const wn=Hi.create,Vi=kc.create;Wy.create;Cc.create;const nu=Oy.create;$u.create;Ry.create;Ly.create;My.create;const Gy=Iy.create;Dy.create;Ka.create;Fy.create;const Em=gi.create,h4=pn.create;pn.strictCreate;Sm.create;km.create;Xo.create;const f4=Cm.create;zy.create;Pc.create;By.create;Vy.create;const m4=Ec.create;Uy.create;Pm.create;Ya.create;za.create;Tc.create;Ya.createWithPreprocess;function UK(){this.__data__=[],this.size=0}var qK=UK;function HK(e,t){return e===t||e!==e&&t!==t}var p4=HK,WK=p4;function ZK(e,t){for(var s=e.length;s--;)if(WK(e[s][0],t))return s;return-1}var Vp=ZK,GK=Vp,KK=Array.prototype,YK=KK.splice;function XK(e){var t=this.__data__,s=GK(t,e);if(s<0)return!1;var r=t.length-1;return s==r?t.pop():YK.call(t,s,1),--this.size,!0}var QK=XK,JK=Vp;function eY(e){var t=this.__data__,s=JK(t,e);return s<0?void 0:t[s][1]}var tY=eY,nY=Vp;function sY(e){return nY(this.__data__,e)>-1}var rY=sY,iY=Vp;function aY(e,t){var s=this.__data__,r=iY(s,e);return r<0?(++this.size,s.push([e,t])):s[r][1]=t,this}var oY=aY,lY=qK,cY=QK,dY=tY,uY=rY,hY=oY;function Gc(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}Gc.prototype.clear=lY;Gc.prototype.delete=cY;Gc.prototype.get=dY;Gc.prototype.has=uY;Gc.prototype.set=hY;var Up=Gc,fY=Up;function mY(){this.__data__=new fY,this.size=0}var pY=mY;function gY(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}var vY=gY;function xY(e){return this.__data__.get(e)}var yY=xY;function bY(e){return this.__data__.has(e)}var wY=bY,jY=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,g4=jY,_Y=g4,NY=typeof self=="object"&&self&&self.Object===Object&&self,SY=_Y||NY||Function("return this")(),aa=SY,kY=aa,CY=kY.Symbol,Hw=CY,BS=Hw,v4=Object.prototype,PY=v4.hasOwnProperty,EY=v4.toString,kd=BS?BS.toStringTag:void 0;function TY(e){var t=PY.call(e,kd),s=e[kd];try{e[kd]=void 0;var r=!0}catch{}var i=EY.call(e);return r&&(t?e[kd]=s:delete e[kd]),i}var AY=TY,OY=Object.prototype,RY=OY.toString;function LY(e){return RY.call(e)}var MY=LY,VS=Hw,IY=AY,DY=MY,FY="[object Null]",$Y="[object Undefined]",US=VS?VS.toStringTag:void 0;function zY(e){return e==null?e===void 0?$Y:FY:US&&US in Object(e)?IY(e):DY(e)}var qp=zY;function BY(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var x4=BY,VY=qp,UY=x4,qY="[object AsyncFunction]",HY="[object Function]",WY="[object GeneratorFunction]",ZY="[object Proxy]";function GY(e){if(!UY(e))return!1;var t=VY(e);return t==HY||t==WY||t==qY||t==ZY}var y4=GY,KY=aa,YY=KY["__core-js_shared__"],XY=YY,Ov=XY,qS=function(){var e=/[^.]+$/.exec(Ov&&Ov.keys&&Ov.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function QY(e){return!!qS&&qS in e}var JY=QY,eX=Function.prototype,tX=eX.toString;function nX(e){if(e!=null){try{return tX.call(e)}catch{}try{return e+""}catch{}}return""}var b4=nX,sX=y4,rX=JY,iX=x4,aX=b4,oX=/[\\^$.*+?()[\]{}|]/g,lX=/^\[object .+?Constructor\]$/,cX=Function.prototype,dX=Object.prototype,uX=cX.toString,hX=dX.hasOwnProperty,fX=RegExp("^"+uX.call(hX).replace(oX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mX(e){if(!iX(e)||rX(e))return!1;var t=sX(e)?fX:lX;return t.test(aX(e))}var pX=mX;function gX(e,t){return e==null?void 0:e[t]}var vX=gX,xX=pX,yX=vX;function bX(e,t){var s=yX(e,t);return xX(s)?s:void 0}var Kc=bX,wX=Kc,jX=aa,_X=wX(jX,"Map"),Ww=_X,NX=Kc,SX=NX(Object,"create"),Hp=SX,HS=Hp;function kX(){this.__data__=HS?HS(null):{},this.size=0}var CX=kX;function PX(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var EX=PX,TX=Hp,AX="__lodash_hash_undefined__",OX=Object.prototype,RX=OX.hasOwnProperty;function LX(e){var t=this.__data__;if(TX){var s=t[e];return s===AX?void 0:s}return RX.call(t,e)?t[e]:void 0}var MX=LX,IX=Hp,DX=Object.prototype,FX=DX.hasOwnProperty;function $X(e){var t=this.__data__;return IX?t[e]!==void 0:FX.call(t,e)}var zX=$X,BX=Hp,VX="__lodash_hash_undefined__";function UX(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=BX&&t===void 0?VX:t,this}var qX=UX,HX=CX,WX=EX,ZX=MX,GX=zX,KX=qX;function Yc(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}Yc.prototype.clear=HX;Yc.prototype.delete=WX;Yc.prototype.get=ZX;Yc.prototype.has=GX;Yc.prototype.set=KX;var YX=Yc,WS=YX,XX=Up,QX=Ww;function JX(){this.size=0,this.__data__={hash:new WS,map:new(QX||XX),string:new WS}}var eQ=JX;function tQ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var nQ=tQ,sQ=nQ;function rQ(e,t){var s=e.__data__;return sQ(t)?s[typeof t=="string"?"string":"hash"]:s.map}var Wp=rQ,iQ=Wp;function aQ(e){var t=iQ(this,e).delete(e);return this.size-=t?1:0,t}var oQ=aQ,lQ=Wp;function cQ(e){return lQ(this,e).get(e)}var dQ=cQ,uQ=Wp;function hQ(e){return uQ(this,e).has(e)}var fQ=hQ,mQ=Wp;function pQ(e,t){var s=mQ(this,e),r=s.size;return s.set(e,t),this.size+=s.size==r?0:1,this}var gQ=pQ,vQ=eQ,xQ=oQ,yQ=dQ,bQ=fQ,wQ=gQ;function Xc(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}Xc.prototype.clear=vQ;Xc.prototype.delete=xQ;Xc.prototype.get=yQ;Xc.prototype.has=bQ;Xc.prototype.set=wQ;var w4=Xc,jQ=Up,_Q=Ww,NQ=w4,SQ=200;function kQ(e,t){var s=this.__data__;if(s instanceof jQ){var r=s.__data__;if(!_Q||r.length<SQ-1)return r.push([e,t]),this.size=++s.size,this;s=this.__data__=new NQ(r)}return s.set(e,t),this.size=s.size,this}var CQ=kQ,PQ=Up,EQ=pY,TQ=vY,AQ=yY,OQ=wY,RQ=CQ;function Qc(e){var t=this.__data__=new PQ(e);this.size=t.size}Qc.prototype.clear=EQ;Qc.prototype.delete=TQ;Qc.prototype.get=AQ;Qc.prototype.has=OQ;Qc.prototype.set=RQ;var LQ=Qc,MQ="__lodash_hash_undefined__";function IQ(e){return this.__data__.set(e,MQ),this}var DQ=IQ;function FQ(e){return this.__data__.has(e)}var $Q=FQ,zQ=w4,BQ=DQ,VQ=$Q;function Tm(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new zQ;++t<s;)this.add(e[t])}Tm.prototype.add=Tm.prototype.push=BQ;Tm.prototype.has=VQ;var UQ=Tm;function qQ(e,t){for(var s=-1,r=e==null?0:e.length;++s<r;)if(t(e[s],s,e))return!0;return!1}var HQ=qQ;function WQ(e,t){return e.has(t)}var ZQ=WQ,GQ=UQ,KQ=HQ,YQ=ZQ,XQ=1,QQ=2;function JQ(e,t,s,r,i,a){var o=s&XQ,c=e.length,d=t.length;if(c!=d&&!(o&&d>c))return!1;var f=a.get(e),m=a.get(t);if(f&&m)return f==t&&m==e;var h=-1,u=!0,p=s&QQ?new GQ:void 0;for(a.set(e,t),a.set(t,e);++h<c;){var y=e[h],v=t[h];if(r)var w=o?r(v,y,h,t,e,a):r(y,v,h,e,t,a);if(w!==void 0){if(w)continue;u=!1;break}if(p){if(!KQ(t,function(x,b){if(!YQ(p,b)&&(y===x||i(y,x,s,r,a)))return p.push(b)})){u=!1;break}}else if(!(y===v||i(y,v,s,r,a))){u=!1;break}}return a.delete(e),a.delete(t),u}var j4=JQ,eJ=aa,tJ=eJ.Uint8Array,nJ=tJ;function sJ(e){var t=-1,s=Array(e.size);return e.forEach(function(r,i){s[++t]=[i,r]}),s}var rJ=sJ;function iJ(e){var t=-1,s=Array(e.size);return e.forEach(function(r){s[++t]=r}),s}var aJ=iJ,ZS=Hw,GS=nJ,oJ=p4,lJ=j4,cJ=rJ,dJ=aJ,uJ=1,hJ=2,fJ="[object Boolean]",mJ="[object Date]",pJ="[object Error]",gJ="[object Map]",vJ="[object Number]",xJ="[object RegExp]",yJ="[object Set]",bJ="[object String]",wJ="[object Symbol]",jJ="[object ArrayBuffer]",_J="[object DataView]",KS=ZS?ZS.prototype:void 0,Rv=KS?KS.valueOf:void 0;function NJ(e,t,s,r,i,a,o){switch(s){case _J:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case jJ:return!(e.byteLength!=t.byteLength||!a(new GS(e),new GS(t)));case fJ:case mJ:case vJ:return oJ(+e,+t);case pJ:return e.name==t.name&&e.message==t.message;case xJ:case bJ:return e==t+"";case gJ:var c=cJ;case yJ:var d=r&uJ;if(c||(c=dJ),e.size!=t.size&&!d)return!1;var f=o.get(e);if(f)return f==t;r|=hJ,o.set(e,t);var m=lJ(c(e),c(t),r,i,a,o);return o.delete(e),m;case wJ:if(Rv)return Rv.call(e)==Rv.call(t)}return!1}var SJ=NJ;function kJ(e,t){for(var s=-1,r=t.length,i=e.length;++s<r;)e[i+s]=t[s];return e}var CJ=kJ,PJ=Array.isArray,Zw=PJ,EJ=CJ,TJ=Zw;function AJ(e,t,s){var r=t(e);return TJ(e)?r:EJ(r,s(e))}var OJ=AJ;function RJ(e,t){for(var s=-1,r=e==null?0:e.length,i=0,a=[];++s<r;){var o=e[s];t(o,s,e)&&(a[i++]=o)}return a}var LJ=RJ;function MJ(){return[]}var IJ=MJ,DJ=LJ,FJ=IJ,$J=Object.prototype,zJ=$J.propertyIsEnumerable,YS=Object.getOwnPropertySymbols,BJ=YS?function(e){return e==null?[]:(e=Object(e),DJ(YS(e),function(t){return zJ.call(e,t)}))}:FJ,VJ=BJ;function UJ(e,t){for(var s=-1,r=Array(e);++s<e;)r[s]=t(s);return r}var qJ=UJ;function HJ(e){return e!=null&&typeof e=="object"}var Zp=HJ,WJ=qp,ZJ=Zp,GJ="[object Arguments]";function KJ(e){return ZJ(e)&&WJ(e)==GJ}var YJ=KJ,XS=YJ,XJ=Zp,_4=Object.prototype,QJ=_4.hasOwnProperty,JJ=_4.propertyIsEnumerable,eee=XS(function(){return arguments}())?XS:function(e){return XJ(e)&&QJ.call(e,"callee")&&!JJ.call(e,"callee")},tee=eee,Am={exports:{}};function nee(){return!1}var see=nee;Am.exports;(function(e,t){var s=aa,r=see,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,c=o?s.Buffer:void 0,d=c?c.isBuffer:void 0,f=d||r;e.exports=f})(Am,Am.exports);var N4=Am.exports,ree=9007199254740991,iee=/^(?:0|[1-9]\d*)$/;function aee(e,t){var s=typeof e;return t=t??ree,!!t&&(s=="number"||s!="symbol"&&iee.test(e))&&e>-1&&e%1==0&&e<t}var oee=aee,lee=9007199254740991;function cee(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=lee}var S4=cee,dee=qp,uee=S4,hee=Zp,fee="[object Arguments]",mee="[object Array]",pee="[object Boolean]",gee="[object Date]",vee="[object Error]",xee="[object Function]",yee="[object Map]",bee="[object Number]",wee="[object Object]",jee="[object RegExp]",_ee="[object Set]",Nee="[object String]",See="[object WeakMap]",kee="[object ArrayBuffer]",Cee="[object DataView]",Pee="[object Float32Array]",Eee="[object Float64Array]",Tee="[object Int8Array]",Aee="[object Int16Array]",Oee="[object Int32Array]",Ree="[object Uint8Array]",Lee="[object Uint8ClampedArray]",Mee="[object Uint16Array]",Iee="[object Uint32Array]",Jt={};Jt[Pee]=Jt[Eee]=Jt[Tee]=Jt[Aee]=Jt[Oee]=Jt[Ree]=Jt[Lee]=Jt[Mee]=Jt[Iee]=!0;Jt[fee]=Jt[mee]=Jt[kee]=Jt[pee]=Jt[Cee]=Jt[gee]=Jt[vee]=Jt[xee]=Jt[yee]=Jt[bee]=Jt[wee]=Jt[jee]=Jt[_ee]=Jt[Nee]=Jt[See]=!1;function Dee(e){return hee(e)&&uee(e.length)&&!!Jt[dee(e)]}var Fee=Dee;function $ee(e){return function(t){return e(t)}}var zee=$ee,Om={exports:{}};Om.exports;(function(e,t){var s=g4,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,o=a&&s.process,c=function(){try{var d=i&&i.require&&i.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}}();e.exports=c})(Om,Om.exports);var Bee=Om.exports,Vee=Fee,Uee=zee,QS=Bee,JS=QS&&QS.isTypedArray,qee=JS?Uee(JS):Vee,k4=qee,Hee=qJ,Wee=tee,Zee=Zw,Gee=N4,Kee=oee,Yee=k4,Xee=Object.prototype,Qee=Xee.hasOwnProperty;function Jee(e,t){var s=Zee(e),r=!s&&Wee(e),i=!s&&!r&&Gee(e),a=!s&&!r&&!i&&Yee(e),o=s||r||i||a,c=o?Hee(e.length,String):[],d=c.length;for(var f in e)(t||Qee.call(e,f))&&!(o&&(f=="length"||i&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Kee(f,d)))&&c.push(f);return c}var ete=Jee,tte=Object.prototype;function nte(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||tte;return e===s}var ste=nte;function rte(e,t){return function(s){return e(t(s))}}var ite=rte,ate=ite,ote=ate(Object.keys,Object),lte=ote,cte=ste,dte=lte,ute=Object.prototype,hte=ute.hasOwnProperty;function fte(e){if(!cte(e))return dte(e);var t=[];for(var s in Object(e))hte.call(e,s)&&s!="constructor"&&t.push(s);return t}var mte=fte,pte=y4,gte=S4;function vte(e){return e!=null&&gte(e.length)&&!pte(e)}var xte=vte,yte=ete,bte=mte,wte=xte;function jte(e){return wte(e)?yte(e):bte(e)}var _te=jte,Nte=OJ,Ste=VJ,kte=_te;function Cte(e){return Nte(e,kte,Ste)}var Pte=Cte,e2=Pte,Ete=1,Tte=Object.prototype,Ate=Tte.hasOwnProperty;function Ote(e,t,s,r,i,a){var o=s&Ete,c=e2(e),d=c.length,f=e2(t),m=f.length;if(d!=m&&!o)return!1;for(var h=d;h--;){var u=c[h];if(!(o?u in t:Ate.call(t,u)))return!1}var p=a.get(e),y=a.get(t);if(p&&y)return p==t&&y==e;var v=!0;a.set(e,t),a.set(t,e);for(var w=o;++h<d;){u=c[h];var x=e[u],b=t[u];if(r)var _=o?r(b,x,u,t,e,a):r(x,b,u,e,t,a);if(!(_===void 0?x===b||i(x,b,s,r,a):_)){v=!1;break}w||(w=u=="constructor")}if(v&&!w){var N=e.constructor,C=t.constructor;N!=C&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof C=="function"&&C instanceof C)&&(v=!1)}return a.delete(e),a.delete(t),v}var Rte=Ote,Lte=Kc,Mte=aa,Ite=Lte(Mte,"DataView"),Dte=Ite,Fte=Kc,$te=aa,zte=Fte($te,"Promise"),Bte=zte,Vte=Kc,Ute=aa,qte=Vte(Ute,"Set"),Hte=qte,Wte=Kc,Zte=aa,Gte=Wte(Zte,"WeakMap"),Kte=Gte,Ky=Dte,Yy=Ww,Xy=Bte,Qy=Hte,Jy=Kte,C4=qp,Jc=b4,t2="[object Map]",Yte="[object Object]",n2="[object Promise]",s2="[object Set]",r2="[object WeakMap]",i2="[object DataView]",Xte=Jc(Ky),Qte=Jc(Yy),Jte=Jc(Xy),ene=Jc(Qy),tne=Jc(Jy),vo=C4;(Ky&&vo(new Ky(new ArrayBuffer(1)))!=i2||Yy&&vo(new Yy)!=t2||Xy&&vo(Xy.resolve())!=n2||Qy&&vo(new Qy)!=s2||Jy&&vo(new Jy)!=r2)&&(vo=function(e){var t=C4(e),s=t==Yte?e.constructor:void 0,r=s?Jc(s):"";if(r)switch(r){case Xte:return i2;case Qte:return t2;case Jte:return n2;case ene:return s2;case tne:return r2}return t});var nne=vo,Lv=LQ,sne=j4,rne=SJ,ine=Rte,a2=nne,o2=Zw,l2=N4,ane=k4,one=1,c2="[object Arguments]",d2="[object Array]",rf="[object Object]",lne=Object.prototype,u2=lne.hasOwnProperty;function cne(e,t,s,r,i,a){var o=o2(e),c=o2(t),d=o?d2:a2(e),f=c?d2:a2(t);d=d==c2?rf:d,f=f==c2?rf:f;var m=d==rf,h=f==rf,u=d==f;if(u&&l2(e)){if(!l2(t))return!1;o=!0,m=!1}if(u&&!m)return a||(a=new Lv),o||ane(e)?sne(e,t,s,r,i,a):rne(e,t,d,s,r,i,a);if(!(s&one)){var p=m&&u2.call(e,"__wrapped__"),y=h&&u2.call(t,"__wrapped__");if(p||y){var v=p?e.value():e,w=y?t.value():t;return a||(a=new Lv),i(v,w,s,r,a)}}return u?(a||(a=new Lv),ine(e,t,s,r,i,a)):!1}var dne=cne,une=dne,h2=Zp;function P4(e,t,s,r,i){return e===t?!0:e==null||t==null||!h2(e)&&!h2(t)?e!==e&&t!==t:une(e,t,s,r,P4,i)}var hne=P4,fne=hne;function mne(e,t){return fne(e,t)}var pne=mne,E4={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(r,i){e.exports=i()})(typeof self<"u"?self:vi,function(){return function(s){var r={};function i(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return s[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=s,i.c=r,i.d=function(a,o,c){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:c})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=109)}([function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(17),o=i(18),c=i(19),d=i(45),f=i(46),m=i(47),h=i(48),u=i(49),p=i(12),y=i(32),v=i(33),w=i(31),x=i(1),b={Scope:x.Scope,create:x.create,find:x.find,query:x.query,register:x.register,Container:a.default,Format:o.default,Leaf:c.default,Embed:h.default,Scroll:d.default,Block:m.default,Inline:f.default,Text:u.default,Attributor:{Attribute:p.default,Class:y.default,Style:v.default,Store:w.default}};r.default=b},function(s,r,i){var a=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,b){x.__proto__=b}||function(x,b){for(var _ in b)b.hasOwnProperty(_)&&(x[_]=b[_])};return function(x,b){w(x,b);function _(){this.constructor=x}x.prototype=b===null?Object.create(b):(_.prototype=b.prototype,new _)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(w){a(x,w);function x(b){var _=this;return b="[Parchment] "+b,_=w.call(this,b)||this,_.message=b,_.name=_.constructor.name,_}return x}(Error);r.ParchmentError=o;var c={},d={},f={},m={};r.DATA_KEY="__blot";var h;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(h=r.Scope||(r.Scope={}));function u(w,x){var b=y(w);if(b==null)throw new o("Unable to create "+w+" blot");var _=b,N=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:_.create(x);return new _(N,x)}r.create=u;function p(w,x){return x===void 0&&(x=!1),w==null?null:w[r.DATA_KEY]!=null?w[r.DATA_KEY].blot:x?p(w.parentNode,x):null}r.find=p;function y(w,x){x===void 0&&(x=h.ANY);var b;if(typeof w=="string")b=m[w]||c[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)b=m.text;else if(typeof w=="number")w&h.LEVEL&h.BLOCK?b=m.block:w&h.LEVEL&h.INLINE&&(b=m.inline);else if(w instanceof HTMLElement){var _=(w.getAttribute("class")||"").split(/\s+/);for(var N in _)if(b=d[_[N]],b)break;b=b||f[w.tagName]}return b==null?null:x&h.LEVEL&b.scope&&x&h.TYPE&b.scope?b:null}r.query=y;function v(){for(var w=[],x=0;x<arguments.length;x++)w[x]=arguments[x];if(w.length>1)return w.map(function(N){return v(N)});var b=w[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new o("Invalid definition");if(b.blotName==="abstract")throw new o("Cannot register abstract class");if(m[b.blotName||b.attrName]=b,typeof b.keyName=="string")c[b.keyName]=b;else if(b.className!=null&&(d[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(N){return N.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var _=Array.isArray(b.tagName)?b.tagName:[b.tagName];_.forEach(function(N){(f[N]==null||b.className==null)&&(f[N]=b)})}return b}r.register=v},function(s,r,i){var a=i(51),o=i(11),c=i(3),d=i(20),f="\0",m=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};m.prototype.insert=function(h,u){var p={};return h.length===0?this:(p.insert=h,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(p.attributes=u),this.push(p))},m.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},m.prototype.retain=function(h,u){if(h<=0)return this;var p={retain:h};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(p.attributes=u),this.push(p)},m.prototype.push=function(h){var u=this.ops.length,p=this.ops[u-1];if(h=c(!0,{},h),typeof p=="object"){if(typeof h.delete=="number"&&typeof p.delete=="number")return this.ops[u-1]={delete:p.delete+h.delete},this;if(typeof p.delete=="number"&&h.insert!=null&&(u-=1,p=this.ops[u-1],typeof p!="object"))return this.ops.unshift(h),this;if(o(h.attributes,p.attributes)){if(typeof h.insert=="string"&&typeof p.insert=="string")return this.ops[u-1]={insert:p.insert+h.insert},typeof h.attributes=="object"&&(this.ops[u-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof p.retain=="number")return this.ops[u-1]={retain:p.retain+h.retain},typeof h.attributes=="object"&&(this.ops[u-1].attributes=h.attributes),this}}return u===this.ops.length?this.ops.push(h):this.ops.splice(u,0,h),this},m.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},m.prototype.filter=function(h){return this.ops.filter(h)},m.prototype.forEach=function(h){this.ops.forEach(h)},m.prototype.map=function(h){return this.ops.map(h)},m.prototype.partition=function(h){var u=[],p=[];return this.forEach(function(y){var v=h(y)?u:p;v.push(y)}),[u,p]},m.prototype.reduce=function(h,u){return this.ops.reduce(h,u)},m.prototype.changeLength=function(){return this.reduce(function(h,u){return u.insert?h+d.length(u):u.delete?h-u.delete:h},0)},m.prototype.length=function(){return this.reduce(function(h,u){return h+d.length(u)},0)},m.prototype.slice=function(h,u){h=h||0,typeof u!="number"&&(u=1/0);for(var p=[],y=d.iterator(this.ops),v=0;v<u&&y.hasNext();){var w;v<h?w=y.next(h-v):(w=y.next(u-v),p.push(w)),v+=d.length(w)}return new m(p)},m.prototype.compose=function(h){var u=d.iterator(this.ops),p=d.iterator(h.ops),y=[],v=p.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var w=v.retain;u.peekType()==="insert"&&u.peekLength()<=w;)w-=u.peekLength(),y.push(u.next());v.retain-w>0&&p.next(v.retain-w)}for(var x=new m(y);u.hasNext()||p.hasNext();)if(p.peekType()==="insert")x.push(p.next());else if(u.peekType()==="delete")x.push(u.next());else{var b=Math.min(u.peekLength(),p.peekLength()),_=u.next(b),N=p.next(b);if(typeof N.retain=="number"){var C={};typeof _.retain=="number"?C.retain=b:C.insert=_.insert;var I=d.attributes.compose(_.attributes,N.attributes,typeof _.retain=="number");if(I&&(C.attributes=I),x.push(C),!p.hasNext()&&o(x.ops[x.ops.length-1],C)){var k=new m(u.rest());return x.concat(k).chop()}}else typeof N.delete=="number"&&typeof _.retain=="number"&&x.push(N)}return x.chop()},m.prototype.concat=function(h){var u=new m(this.ops.slice());return h.ops.length>0&&(u.push(h.ops[0]),u.ops=u.ops.concat(h.ops.slice(1))),u},m.prototype.diff=function(h,u){if(this.ops===h.ops)return new m;var p=[this,h].map(function(b){return b.map(function(_){if(_.insert!=null)return typeof _.insert=="string"?_.insert:f;var N=b===h?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),y=new m,v=a(p[0],p[1],u),w=d.iterator(this.ops),x=d.iterator(h.ops);return v.forEach(function(b){for(var _=b[1].length;_>0;){var N=0;switch(b[0]){case a.INSERT:N=Math.min(x.peekLength(),_),y.push(x.next(N));break;case a.DELETE:N=Math.min(_,w.peekLength()),w.next(N),y.delete(N);break;case a.EQUAL:N=Math.min(w.peekLength(),x.peekLength(),_);var C=w.next(N),I=x.next(N);o(C.insert,I.insert)?y.retain(N,d.attributes.diff(C.attributes,I.attributes)):y.push(I).delete(N);break}_-=N}}),y.chop()},m.prototype.eachLine=function(h,u){u=u||`
`;for(var p=d.iterator(this.ops),y=new m,v=0;p.hasNext();){if(p.peekType()!=="insert")return;var w=p.peek(),x=d.length(w)-p.peekLength(),b=typeof w.insert=="string"?w.insert.indexOf(u,x)-x:-1;if(b<0)y.push(p.next());else if(b>0)y.push(p.next(b));else{if(h(y,p.next(1).attributes||{},v)===!1)return;v+=1,y=new m}}y.length()>0&&h(y,{},v)},m.prototype.transform=function(h,u){if(u=!!u,typeof h=="number")return this.transformPosition(h,u);for(var p=d.iterator(this.ops),y=d.iterator(h.ops),v=new m;p.hasNext()||y.hasNext();)if(p.peekType()==="insert"&&(u||y.peekType()!=="insert"))v.retain(d.length(p.next()));else if(y.peekType()==="insert")v.push(y.next());else{var w=Math.min(p.peekLength(),y.peekLength()),x=p.next(w),b=y.next(w);if(x.delete)continue;b.delete?v.push(b):v.retain(w,d.attributes.transform(x.attributes,b.attributes,u))}return v.chop()},m.prototype.transformPosition=function(h,u){u=!!u;for(var p=d.iterator(this.ops),y=0;p.hasNext()&&y<=h;){var v=p.peekLength(),w=p.peekType();if(p.next(),w==="delete"){h-=Math.min(v,h-y);continue}else w==="insert"&&(y<h||!u)&&(h+=v);y+=v}return h},s.exports=m},function(s,r){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d=function(p){return typeof Array.isArray=="function"?Array.isArray(p):a.call(p)==="[object Array]"},f=function(p){if(!p||a.call(p)!=="[object Object]")return!1;var y=i.call(p,"constructor"),v=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!y&&!v)return!1;var w;for(w in p);return typeof w>"u"||i.call(p,w)},m=function(p,y){o&&y.name==="__proto__"?o(p,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):p[y.name]=y.newValue},h=function(p,y){if(y==="__proto__")if(i.call(p,y)){if(c)return c(p,y).value}else return;return p[y]};s.exports=function u(){var p,y,v,w,x,b,_=arguments[0],N=1,C=arguments.length,I=!1;for(typeof _=="boolean"&&(I=_,_=arguments[1]||{},N=2),(_==null||typeof _!="object"&&typeof _!="function")&&(_={});N<C;++N)if(p=arguments[N],p!=null)for(y in p)v=h(_,y),w=h(p,y),_!==w&&(I&&w&&(f(w)||(x=d(w)))?(x?(x=!1,b=v&&d(v)?v:[]):b=v&&f(v)?v:{},m(_,{name:y,newValue:u(I,b,w)})):typeof w<"u"&&m(_,{name:y,newValue:w}));return _}},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var a=function(){function T(A,z){for(var O=0;O<z.length;O++){var F=z[O];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(A,F.key,F)}}return function(A,z,O){return z&&T(A.prototype,z),O&&T(A,O),A}}(),o=function T(A,z,O){A===null&&(A=Function.prototype);var F=Object.getOwnPropertyDescriptor(A,z);if(F===void 0){var G=Object.getPrototypeOf(A);return G===null?void 0:T(G,z,O)}else{if("value"in F)return F.value;var Y=F.get;return Y===void 0?void 0:Y.call(O)}},c=i(3),d=_(c),f=i(2),m=_(f),h=i(0),u=_(h),p=i(16),y=_(p),v=i(6),w=_(v),x=i(7),b=_(x);function _(T){return T&&T.__esModule?T:{default:T}}function N(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}function C(T,A){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:T}function I(T,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);T.prototype=Object.create(A&&A.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(T,A):T.__proto__=A)}var k=1,E=function(T){I(A,T);function A(){return N(this,A),C(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return a(A,[{key:"attach",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new u.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new m.default().insert(this.value(),(0,d.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(O,F){var G=u.default.query(O,u.default.Scope.BLOCK_ATTRIBUTE);G!=null&&this.attributes.attribute(G,F)}},{key:"formatAt",value:function(O,F,G,Y){this.format(G,Y)}},{key:"insertAt",value:function(O,F,G){if(typeof F=="string"&&F.endsWith(`
`)){var Y=u.default.create(M.blotName);this.parent.insertBefore(Y,O===0?this:this.next),Y.insertAt(0,F.slice(0,-1))}else o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,O,F,G)}}]),A}(u.default.Embed);E.scope=u.default.Scope.BLOCK_BLOT;var M=function(T){I(A,T);function A(z){N(this,A);var O=C(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,z));return O.cache={},O}return a(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(u.default.Leaf).reduce(function(O,F){return F.length()===0?O:O.insert(F.value(),P(F))},new m.default).insert(`
`,P(this))),this.cache.delta}},{key:"deleteAt",value:function(O,F){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,O,F),this.cache={}}},{key:"formatAt",value:function(O,F,G,Y){F<=0||(u.default.query(G,u.default.Scope.BLOCK)?O+F===this.length()&&this.format(G,Y):o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,O,Math.min(F,this.length()-O-1),G,Y),this.cache={})}},{key:"insertAt",value:function(O,F,G){if(G!=null)return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,O,F,G);if(F.length!==0){var Y=F.split(`
`),K=Y.shift();K.length>0&&(O<this.length()-1||this.children.tail==null?o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(O,this.length()-1),K):this.children.tail.insertAt(this.children.tail.length(),K),this.cache={});var U=this;Y.reduce(function(B,R){return U=U.split(B,!0),U.insertAt(0,R),R.length},O+K.length)}}},{key:"insertBefore",value:function(O,F){var G=this.children.head;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,O,F),G instanceof y.default&&G.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+k),this.cache.length}},{key:"moveChildren",value:function(O,F){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,O,F),this.cache={}}},{key:"optimize",value:function(O){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,O),this.cache={}}},{key:"path",value:function(O){return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,O,!0)}},{key:"removeChild",value:function(O){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,O),this.cache={}}},{key:"split",value:function(O){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(F&&(O===0||O>=this.length()-k)){var G=this.clone();return O===0?(this.parent.insertBefore(G,this),this):(this.parent.insertBefore(G,this.next),G)}else{var Y=o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,O,F);return this.cache={},Y}}}]),A}(u.default.Block);M.blotName="block",M.tagName="P",M.defaultChild="break",M.allowedChildren=[w.default,u.default.Embed,b.default];function P(T){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return T==null||(typeof T.formats=="function"&&(A=(0,d.default)(A,T.formats())),T.parent==null||T.parent.blotName=="scroll"||T.parent.statics.scope!==T.statics.scope)?A:P(T.parent,A)}r.bubbleFormats=P,r.BlockEmbed=E,r.default=M},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(B,R){var $=[],W=!0,Z=!1,X=void 0;try{for(var V=B[Symbol.iterator](),H;!(W=(H=V.next()).done)&&($.push(H.value),!(R&&$.length===R));W=!0);}catch(se){Z=!0,X=se}finally{try{!W&&V.return&&V.return()}finally{if(Z)throw X}}return $}return function(B,R){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return U(B,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function U(B,R){for(var $=0;$<R.length;$++){var W=R[$];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(B,W.key,W)}}return function(B,R,$){return R&&U(B.prototype,R),$&&U(B,$),B}}();i(50);var d=i(2),f=P(d),m=i(14),h=P(m),u=i(8),p=P(u),y=i(9),v=P(y),w=i(0),x=P(w),b=i(15),_=P(b),N=i(3),C=P(N),I=i(10),k=P(I),E=i(34),M=P(E);function P(U){return U&&U.__esModule?U:{default:U}}function T(U,B,R){return B in U?Object.defineProperty(U,B,{value:R,enumerable:!0,configurable:!0,writable:!0}):U[B]=R,U}function A(U,B){if(!(U instanceof B))throw new TypeError("Cannot call a class as a function")}var z=(0,k.default)("quill"),O=function(){c(U,null,[{key:"debug",value:function(R){R===!0&&(R="log"),k.default.level(R)}},{key:"find",value:function(R){return R.__quill||x.default.find(R)}},{key:"import",value:function(R){return this.imports[R]==null&&z.error("Cannot import "+R+". Are you sure it was registered?"),this.imports[R]}},{key:"register",value:function(R,$){var W=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof R!="string"){var X=R.attrName||R.blotName;typeof X=="string"?this.register("formats/"+X,R,$):Object.keys(R).forEach(function(V){W.register(V,R[V],$)})}else this.imports[R]!=null&&!Z&&z.warn("Overwriting "+R+" with",$),this.imports[R]=$,(R.startsWith("blots/")||R.startsWith("formats/"))&&$.blotName!=="abstract"?x.default.register($):R.startsWith("modules")&&typeof $.register=="function"&&$.register()}}]);function U(B){var R=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,U),this.options=F(B,$),this.container=this.options.container,this.container==null)return z.error("Invalid Quill container",B);this.options.debug&&U.debug(this.options.debug);var W=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=x.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new _.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(X){X===p.default.events.TEXT_CHANGE&&R.root.classList.toggle("ql-blank",R.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(X,V){var H=R.selection.lastRange,se=H&&H.length===0?H.index:void 0;G.call(R,function(){return R.editor.update(null,V,se)},X)});var Z=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+W+"<p><br></p></div>");this.setContents(Z),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return c(U,[{key:"addContainer",value:function(R){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof R=="string"){var W=R;R=document.createElement("div"),R.classList.add(W)}return this.container.insertBefore(R,$),R}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(R,$,W){var Z=this,X=Y(R,$,W),V=o(X,4);return R=V[0],$=V[1],W=V[3],G.call(this,function(){return Z.editor.deleteText(R,$)},W,R,-1*$)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(R),this.container.classList.toggle("ql-disabled",!R)}},{key:"focus",value:function(){var R=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=R,this.scrollIntoView()}},{key:"format",value:function(R,$){var W=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return G.call(this,function(){var X=W.getSelection(!0),V=new f.default;if(X==null)return V;if(x.default.query(R,x.default.Scope.BLOCK))V=W.editor.formatLine(X.index,X.length,T({},R,$));else{if(X.length===0)return W.selection.format(R,$),V;V=W.editor.formatText(X.index,X.length,T({},R,$))}return W.setSelection(X,p.default.sources.SILENT),V},Z)}},{key:"formatLine",value:function(R,$,W,Z,X){var V=this,H=void 0,se=Y(R,$,W,Z,X),Q=o(se,4);return R=Q[0],$=Q[1],H=Q[2],X=Q[3],G.call(this,function(){return V.editor.formatLine(R,$,H)},X,R,0)}},{key:"formatText",value:function(R,$,W,Z,X){var V=this,H=void 0,se=Y(R,$,W,Z,X),Q=o(se,4);return R=Q[0],$=Q[1],H=Q[2],X=Q[3],G.call(this,function(){return V.editor.formatText(R,$,H)},X,R,0)}},{key:"getBounds",value:function(R){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=void 0;typeof R=="number"?W=this.selection.getBounds(R,$):W=this.selection.getBounds(R.index,R.length);var Z=this.container.getBoundingClientRect();return{bottom:W.bottom-Z.top,height:W.height,left:W.left-Z.left,right:W.right-Z.left,top:W.top-Z.top,width:W.width}}},{key:"getContents",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,W=Y(R,$),Z=o(W,2);return R=Z[0],$=Z[1],this.editor.getContents(R,$)}},{key:"getFormat",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof R=="number"?this.editor.getFormat(R,$):this.editor.getFormat(R.index,R.length)}},{key:"getIndex",value:function(R){return R.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(R){return this.scroll.leaf(R)}},{key:"getLine",value:function(R){return this.scroll.line(R)}},{key:"getLines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof R!="number"?this.scroll.lines(R.index,R.length):this.scroll.lines(R,$)}},{key:"getModule",value:function(R){return this.theme.modules[R]}},{key:"getSelection",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return R&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-R,W=Y(R,$),Z=o(W,2);return R=Z[0],$=Z[1],this.editor.getText(R,$)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(R,$,W){var Z=this,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:U.sources.API;return G.call(this,function(){return Z.editor.insertEmbed(R,$,W)},X,R)}},{key:"insertText",value:function(R,$,W,Z,X){var V=this,H=void 0,se=Y(R,0,W,Z,X),Q=o(se,4);return R=Q[0],H=Q[2],X=Q[3],G.call(this,function(){return V.editor.insertText(R,$,H)},X,R,$.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(R,$,W){this.clipboard.dangerouslyPasteHTML(R,$,W)}},{key:"removeFormat",value:function(R,$,W){var Z=this,X=Y(R,$,W),V=o(X,4);return R=V[0],$=V[1],W=V[3],G.call(this,function(){return Z.editor.removeFormat(R,$)},W,R)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(R){var $=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return G.call(this,function(){R=new f.default(R);var Z=$.getLength(),X=$.editor.deleteText(0,Z),V=$.editor.applyDelta(R),H=V.ops[V.ops.length-1];H!=null&&typeof H.insert=="string"&&H.insert[H.insert.length-1]===`
`&&($.editor.deleteText($.getLength()-1,1),V.delete(1));var se=X.compose(V);return se},W)}},{key:"setSelection",value:function(R,$,W){if(R==null)this.selection.setRange(null,$||U.sources.API);else{var Z=Y(R,$,W),X=o(Z,4);R=X[0],$=X[1],W=X[3],this.selection.setRange(new b.Range(R,$),W),W!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(R){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,W=new f.default().insert(R);return this.setContents(W,$)}},{key:"update",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,$=this.scroll.update(R);return this.selection.update(R),$}},{key:"updateContents",value:function(R){var $=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return G.call(this,function(){return R=new f.default(R),$.editor.applyDelta(R,W)},W,!0)}}]),U}();O.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},O.events=p.default.events,O.sources=p.default.sources,O.version="1.3.7",O.imports={delta:f.default,parchment:x.default,"core/module":v.default,"core/theme":M.default};function F(U,B){if(B=(0,C.default)(!0,{container:U,modules:{clipboard:!0,keyboard:!0,history:!0}},B),!B.theme||B.theme===O.DEFAULTS.theme)B.theme=M.default;else if(B.theme=O.import("themes/"+B.theme),B.theme==null)throw new Error("Invalid theme "+B.theme+". Did you register it?");var R=(0,C.default)(!0,{},B.theme.DEFAULTS);[R,B].forEach(function(Z){Z.modules=Z.modules||{},Object.keys(Z.modules).forEach(function(X){Z.modules[X]===!0&&(Z.modules[X]={})})});var $=Object.keys(R.modules).concat(Object.keys(B.modules)),W=$.reduce(function(Z,X){var V=O.import("modules/"+X);return V==null?z.error("Cannot load "+X+" module. Are you sure you registered it?"):Z[X]=V.DEFAULTS||{},Z},{});return B.modules!=null&&B.modules.toolbar&&B.modules.toolbar.constructor!==Object&&(B.modules.toolbar={container:B.modules.toolbar}),B=(0,C.default)(!0,{},O.DEFAULTS,{modules:W},R,B),["bounds","container","scrollingContainer"].forEach(function(Z){typeof B[Z]=="string"&&(B[Z]=document.querySelector(B[Z]))}),B.modules=Object.keys(B.modules).reduce(function(Z,X){return B.modules[X]&&(Z[X]=B.modules[X]),Z},{}),B}function G(U,B,R,$){if(this.options.strict&&!this.isEnabled()&&B===p.default.sources.USER)return new f.default;var W=R==null?null:this.getSelection(),Z=this.editor.delta,X=U();if(W!=null&&(R===!0&&(R=W.index),$==null?W=K(W,X,B):$!==0&&(W=K(W,R,$,B)),this.setSelection(W,p.default.sources.SILENT)),X.length()>0){var V,H=[p.default.events.TEXT_CHANGE,X,Z,B];if((V=this.emitter).emit.apply(V,[p.default.events.EDITOR_CHANGE].concat(H)),B!==p.default.sources.SILENT){var se;(se=this.emitter).emit.apply(se,H)}}return X}function Y(U,B,R,$,W){var Z={};return typeof U.index=="number"&&typeof U.length=="number"?typeof B!="number"?(W=$,$=R,R=B,B=U.length,U=U.index):(B=U.length,U=U.index):typeof B!="number"&&(W=$,$=R,R=B,B=0),(typeof R>"u"?"undefined":a(R))==="object"?(Z=R,W=$):typeof R=="string"&&($!=null?Z[R]=$:W=R),W=W||p.default.sources.API,[U,B,Z,W]}function K(U,B,R,$){if(U==null)return null;var W=void 0,Z=void 0;if(B instanceof f.default){var X=[U.index,U.index+U.length].map(function(Q){return B.transformPosition(Q,$!==p.default.sources.USER)}),V=o(X,2);W=V[0],Z=V[1]}else{var H=[U.index,U.index+U.length].map(function(Q){return Q<B||Q===B&&$===p.default.sources.USER?Q:R>=0?Q+R:Math.max(B,Q+R)}),se=o(H,2);W=se[0],Z=se[1]}return new b.Range(W,Z-W)}r.expandConfig=F,r.overload=Y,r.default=O},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(x,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,N.key,N)}}return function(x,b,_){return b&&w(x.prototype,b),_&&w(x,_),x}}(),o=function w(x,b,_){x===null&&(x=Function.prototype);var N=Object.getOwnPropertyDescriptor(x,b);if(N===void 0){var C=Object.getPrototypeOf(x);return C===null?void 0:w(C,b,_)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(_)}},c=i(7),d=h(c),f=i(0),m=h(f);function h(w){return w&&w.__esModule?w:{default:w}}function u(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}function p(w,x){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:w}function y(w,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(w,x):w.__proto__=x)}var v=function(w){y(x,w);function x(){return u(this,x),p(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return a(x,[{key:"formatAt",value:function(_,N,C,I){if(x.compare(this.statics.blotName,C)<0&&m.default.query(C,m.default.Scope.BLOT)){var k=this.isolate(_,N);I&&k.wrap(C,I)}else o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,_,N,C,I)}},{key:"optimize",value:function(_){if(o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,_),this.parent instanceof x&&x.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(_,N){var C=x.order.indexOf(_),I=x.order.indexOf(N);return C>=0||I>=0?C-I:_===N?0:_<N?-1:1}}]),x}(m.default.Inline);v.allowedChildren=[v,m.default.Embed,d.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=v},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function m(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var h=function(u){m(p,u);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default.Text);r.default=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function b(_,N){for(var C=0;C<N.length;C++){var I=N[C];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(_,I.key,I)}}return function(_,N,C){return N&&b(_.prototype,N),C&&b(_,C),_}}(),o=function b(_,N,C){_===null&&(_=Function.prototype);var I=Object.getOwnPropertyDescriptor(_,N);if(I===void 0){var k=Object.getPrototypeOf(_);return k===null?void 0:b(k,N,C)}else{if("value"in I)return I.value;var E=I.get;return E===void 0?void 0:E.call(C)}},c=i(54),d=h(c),f=i(10),m=h(f);function h(b){return b&&b.__esModule?b:{default:b}}function u(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function p(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:b}function y(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}var v=(0,m.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(b){document.addEventListener(b,function(){for(var _=arguments.length,N=Array(_),C=0;C<_;C++)N[C]=arguments[C];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(I){if(I.__quill&&I.__quill.emitter){var k;(k=I.__quill.emitter).handleDOM.apply(k,N)}})})});var x=function(b){y(_,b);function _(){u(this,_);var N=p(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));return N.listeners={},N.on("error",v.error),N}return a(_,[{key:"emit",value:function(){v.log.apply(v,arguments),o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(C){for(var I=arguments.length,k=Array(I>1?I-1:0),E=1;E<I;E++)k[E-1]=arguments[E];(this.listeners[C.type]||[]).forEach(function(M){var P=M.node,T=M.handler;(C.target===P||P.contains(C.target))&&T.apply(void 0,[C].concat(k))})}},{key:"listenDOM",value:function(C,I,k){this.listeners[C]||(this.listeners[C]=[]),this.listeners[C].push({node:I,handler:k})}}]),_}(d.default);x.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},x.sources={API:"api",SILENT:"silent",USER:"user"},r.default=x},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});function a(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function c(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,c),this.quill=d,this.options=f};o.DEFAULTS={},r.default=o},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=["error","warn","log","info"],o="warn";function c(f){if(a.indexOf(f)<=a.indexOf(o)){for(var m,h=arguments.length,u=Array(h>1?h-1:0),p=1;p<h;p++)u[p-1]=arguments[p];(m=console)[f].apply(m,u)}}function d(f){return a.reduce(function(m,h){return m[h]=c.bind(console,h,f),m},{})}c.level=d.level=function(f){o=f},r.default=d},function(s,r,i){var a=Array.prototype.slice,o=i(52),c=i(53),d=s.exports=function(u,p,y){return y||(y={}),u===p?!0:u instanceof Date&&p instanceof Date?u.getTime()===p.getTime():!u||!p||typeof u!="object"&&typeof p!="object"?y.strict?u===p:u==p:h(u,p,y)};function f(u){return u==null}function m(u){return!(!u||typeof u!="object"||typeof u.length!="number"||typeof u.copy!="function"||typeof u.slice!="function"||u.length>0&&typeof u[0]!="number")}function h(u,p,y){var v,w;if(f(u)||f(p)||u.prototype!==p.prototype)return!1;if(c(u))return c(p)?(u=a.call(u),p=a.call(p),d(u,p,y)):!1;if(m(u)){if(!m(p)||u.length!==p.length)return!1;for(v=0;v<u.length;v++)if(u[v]!==p[v])return!1;return!0}try{var x=o(u),b=o(p)}catch{return!1}if(x.length!=b.length)return!1;for(x.sort(),b.sort(),v=x.length-1;v>=0;v--)if(x[v]!=b[v])return!1;for(v=x.length-1;v>=0;v--)if(w=x[v],!d(u[w],p[w],y))return!1;return typeof u==typeof p}},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=function(){function c(d,f,m){m===void 0&&(m={}),this.attrName=d,this.keyName=f;var h=a.Scope.TYPE&a.Scope.ATTRIBUTE;m.scope!=null?this.scope=m.scope&a.Scope.LEVEL|h:this.scope=a.Scope.ATTRIBUTE,m.whitelist!=null&&(this.whitelist=m.whitelist)}return c.keys=function(d){return[].map.call(d.attributes,function(f){return f.name})},c.prototype.add=function(d,f){return this.canAdd(d,f)?(d.setAttribute(this.keyName,f),!0):!1},c.prototype.canAdd=function(d,f){var m=a.query(d,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return m==null?!1:this.whitelist==null?!0:typeof f=="string"?this.whitelist.indexOf(f.replace(/["']/g,""))>-1:this.whitelist.indexOf(f)>-1},c.prototype.remove=function(d){d.removeAttribute(this.keyName)},c.prototype.value=function(d){var f=d.getAttribute(this.keyName);return this.canAdd(d,f)&&f?f:""},c}();r.default=o},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var a=function(){function E(M,P){var T=[],A=!0,z=!1,O=void 0;try{for(var F=M[Symbol.iterator](),G;!(A=(G=F.next()).done)&&(T.push(G.value),!(P&&T.length===P));A=!0);}catch(Y){z=!0,O=Y}finally{try{!A&&F.return&&F.return()}finally{if(z)throw O}}return T}return function(M,P){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return E(M,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function E(M,P){for(var T=0;T<P.length;T++){var A=P[T];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,A.key,A)}}return function(M,P,T){return P&&E(M.prototype,P),T&&E(M,T),M}}(),c=function E(M,P,T){M===null&&(M=Function.prototype);var A=Object.getOwnPropertyDescriptor(M,P);if(A===void 0){var z=Object.getPrototypeOf(M);return z===null?void 0:E(z,P,T)}else{if("value"in A)return A.value;var O=A.get;return O===void 0?void 0:O.call(T)}},d=i(2),f=b(d),m=i(0),h=b(m),u=i(4),p=b(u),y=i(6),v=b(y),w=i(7),x=b(w);function b(E){return E&&E.__esModule?E:{default:E}}function _(E,M){if(!(E instanceof M))throw new TypeError("Cannot call a class as a function")}function N(E,M){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:E}function C(E,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);E.prototype=Object.create(M&&M.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(E,M):E.__proto__=M)}var I=function(E){C(M,E);function M(){return _(this,M),N(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return M}(v.default);I.blotName="code",I.tagName="CODE";var k=function(E){C(M,E);function M(){return _(this,M),N(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return o(M,[{key:"delta",value:function(){var T=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(z,O){return z.insert(O).insert(`
`,T.formats())},new f.default)}},{key:"format",value:function(T,A){if(!(T===this.statics.blotName&&A)){var z=this.descendant(x.default,this.length()-1),O=a(z,1),F=O[0];F!=null&&F.deleteAt(F.length()-1,1),c(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"format",this).call(this,T,A)}}},{key:"formatAt",value:function(T,A,z,O){if(A!==0&&!(h.default.query(z,h.default.Scope.BLOCK)==null||z===this.statics.blotName&&O===this.statics.formats(this.domNode))){var F=this.newlineIndex(T);if(!(F<0||F>=T+A)){var G=this.newlineIndex(T,!0)+1,Y=F-G+1,K=this.isolate(G,Y),U=K.next;K.format(z,O),U instanceof M&&U.formatAt(0,T-G+A-Y,z,O)}}}},{key:"insertAt",value:function(T,A,z){if(z==null){var O=this.descendant(x.default,T),F=a(O,2),G=F[0],Y=F[1];G.insertAt(Y,A)}}},{key:"length",value:function(){var T=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?T:T+1}},{key:"newlineIndex",value:function(T){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,T).lastIndexOf(`
`);var z=this.domNode.textContent.slice(T).indexOf(`
`);return z>-1?T+z:-1}},{key:"optimize",value:function(T){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),c(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"optimize",this).call(this,T);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(T),A.moveChildren(this),A.remove())}},{key:"replace",value:function(T){c(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replace",this).call(this,T),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var z=h.default.find(A);z==null?A.parentNode.removeChild(A):z instanceof h.default.Embed?z.remove():z.unwrap()})}}],[{key:"create",value:function(T){var A=c(M.__proto__||Object.getPrototypeOf(M),"create",this).call(this,T);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),M}(p.default);k.blotName="code-block",k.tagName="PRE",k.TAB="  ",r.Code=I,r.default=k},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(B,R){var $=[],W=!0,Z=!1,X=void 0;try{for(var V=B[Symbol.iterator](),H;!(W=(H=V.next()).done)&&($.push(H.value),!(R&&$.length===R));W=!0);}catch(se){Z=!0,X=se}finally{try{!W&&V.return&&V.return()}finally{if(Z)throw X}}return $}return function(B,R){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return U(B,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function U(B,R){for(var $=0;$<R.length;$++){var W=R[$];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(B,W.key,W)}}return function(B,R,$){return R&&U(B.prototype,R),$&&U(B,$),B}}(),d=i(2),f=A(d),m=i(20),h=A(m),u=i(0),p=A(u),y=i(13),v=A(y),w=i(24),x=A(w),b=i(4),_=A(b),N=i(16),C=A(N),I=i(21),k=A(I),E=i(11),M=A(E),P=i(3),T=A(P);function A(U){return U&&U.__esModule?U:{default:U}}function z(U,B,R){return B in U?Object.defineProperty(U,B,{value:R,enumerable:!0,configurable:!0,writable:!0}):U[B]=R,U}function O(U,B){if(!(U instanceof B))throw new TypeError("Cannot call a class as a function")}var F=/^[ -~]*$/,G=function(){function U(B){O(this,U),this.scroll=B,this.delta=this.getDelta()}return c(U,[{key:"applyDelta",value:function(R){var $=this,W=!1;this.scroll.update();var Z=this.scroll.length();return this.scroll.batchStart(),R=K(R),R.reduce(function(X,V){var H=V.retain||V.delete||V.insert.length||1,se=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var Q=V.insert;Q.endsWith(`
`)&&W&&(W=!1,Q=Q.slice(0,-1)),X>=Z&&!Q.endsWith(`
`)&&(W=!0),$.scroll.insertAt(X,Q);var ie=$.scroll.line(X),he=o(ie,2),te=he[0],ge=he[1],Se=(0,T.default)({},(0,b.bubbleFormats)(te));if(te instanceof _.default){var fe=te.descendant(p.default.Leaf,ge),ke=o(fe,1),xe=ke[0];Se=(0,T.default)(Se,(0,b.bubbleFormats)(xe))}se=h.default.attributes.diff(Se,se)||{}}else if(a(V.insert)==="object"){var de=Object.keys(V.insert)[0];if(de==null)return X;$.scroll.insertAt(X,de,V.insert[de])}Z+=H}return Object.keys(se).forEach(function(me){$.scroll.formatAt(X,H,me,se[me])}),X+H},0),R.reduce(function(X,V){return typeof V.delete=="number"?($.scroll.deleteAt(X,V.delete),X):X+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update(R)}},{key:"deleteText",value:function(R,$){return this.scroll.deleteAt(R,$),this.update(new f.default().retain(R).delete($))}},{key:"formatLine",value:function(R,$){var W=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Z).forEach(function(X){if(!(W.scroll.whitelist!=null&&!W.scroll.whitelist[X])){var V=W.scroll.lines(R,Math.max($,1)),H=$;V.forEach(function(se){var Q=se.length();if(!(se instanceof v.default))se.format(X,Z[X]);else{var ie=R-se.offset(W.scroll),he=se.newlineIndex(ie+H)-ie+1;se.formatAt(ie,he,X,Z[X])}H-=Q})}}),this.scroll.optimize(),this.update(new f.default().retain(R).retain($,(0,k.default)(Z)))}},{key:"formatText",value:function(R,$){var W=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Z).forEach(function(X){W.scroll.formatAt(R,$,X,Z[X])}),this.update(new f.default().retain(R).retain($,(0,k.default)(Z)))}},{key:"getContents",value:function(R,$){return this.delta.slice(R,R+$)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(R,$){return R.concat($.delta())},new f.default)}},{key:"getFormat",value:function(R){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=[],Z=[];$===0?this.scroll.path(R).forEach(function(V){var H=o(V,1),se=H[0];se instanceof _.default?W.push(se):se instanceof p.default.Leaf&&Z.push(se)}):(W=this.scroll.lines(R,$),Z=this.scroll.descendants(p.default.Leaf,R,$));var X=[W,Z].map(function(V){if(V.length===0)return{};for(var H=(0,b.bubbleFormats)(V.shift());Object.keys(H).length>0;){var se=V.shift();if(se==null)return H;H=Y((0,b.bubbleFormats)(se),H)}return H});return T.default.apply(T.default,X)}},{key:"getText",value:function(R,$){return this.getContents(R,$).filter(function(W){return typeof W.insert=="string"}).map(function(W){return W.insert}).join("")}},{key:"insertEmbed",value:function(R,$,W){return this.scroll.insertAt(R,$,W),this.update(new f.default().retain(R).insert(z({},$,W)))}},{key:"insertText",value:function(R,$){var W=this,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $=$.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(R,$),Object.keys(Z).forEach(function(X){W.scroll.formatAt(R,$.length,X,Z[X])}),this.update(new f.default().retain(R).insert($,(0,k.default)(Z)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var R=this.scroll.children.head;return R.statics.blotName!==_.default.blotName||R.children.length>1?!1:R.children.head instanceof C.default}},{key:"removeFormat",value:function(R,$){var W=this.getText(R,$),Z=this.scroll.line(R+$),X=o(Z,2),V=X[0],H=X[1],se=0,Q=new f.default;V!=null&&(V instanceof v.default?se=V.newlineIndex(H)-H+1:se=V.length()-H,Q=V.delta().slice(H,H+se-1).insert(`
`));var ie=this.getContents(R,$+se),he=ie.diff(new f.default().insert(W).concat(Q)),te=new f.default().retain(R).concat(he);return this.applyDelta(te)}},{key:"update",value:function(R){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Z=this.delta;if($.length===1&&$[0].type==="characterData"&&$[0].target.data.match(F)&&p.default.find($[0].target)){var X=p.default.find($[0].target),V=(0,b.bubbleFormats)(X),H=X.offset(this.scroll),se=$[0].oldValue.replace(x.default.CONTENTS,""),Q=new f.default().insert(se),ie=new f.default().insert(X.value()),he=new f.default().retain(H).concat(Q.diff(ie,W));R=he.reduce(function(te,ge){return ge.insert?te.insert(ge.insert,V):te.push(ge)},new f.default),this.delta=Z.compose(R)}else this.delta=this.getDelta(),(!R||!(0,M.default)(Z.compose(R),this.delta))&&(R=Z.diff(this.delta,W));return R}}]),U}();function Y(U,B){return Object.keys(B).reduce(function(R,$){return U[$]==null||(B[$]===U[$]?R[$]=B[$]:Array.isArray(B[$])?B[$].indexOf(U[$])<0&&(R[$]=B[$].concat([U[$]])):R[$]=[B[$],U[$]]),R},{})}function K(U){return U.reduce(function(B,R){if(R.insert===1){var $=(0,k.default)(R.attributes);return delete $.image,B.insert({image:R.attributes.image},$)}if(R.attributes!=null&&(R.attributes.list===!0||R.attributes.bullet===!0)&&(R=(0,k.default)(R),R.attributes.list?R.attributes.list="ordered":(R.attributes.list="bullet",delete R.attributes.bullet)),typeof R.insert=="string"){var W=R.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return B.insert(W,R.attributes)}return B.push(R)},new f.default)}r.default=G},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var a=function(){function E(M,P){var T=[],A=!0,z=!1,O=void 0;try{for(var F=M[Symbol.iterator](),G;!(A=(G=F.next()).done)&&(T.push(G.value),!(P&&T.length===P));A=!0);}catch(Y){z=!0,O=Y}finally{try{!A&&F.return&&F.return()}finally{if(z)throw O}}return T}return function(M,P){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return E(M,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function E(M,P){for(var T=0;T<P.length;T++){var A=P[T];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,A.key,A)}}return function(M,P,T){return P&&E(M.prototype,P),T&&E(M,T),M}}(),c=i(0),d=x(c),f=i(21),m=x(f),h=i(11),u=x(h),p=i(8),y=x(p),v=i(10),w=x(v);function x(E){return E&&E.__esModule?E:{default:E}}function b(E){if(Array.isArray(E)){for(var M=0,P=Array(E.length);M<E.length;M++)P[M]=E[M];return P}else return Array.from(E)}function _(E,M){if(!(E instanceof M))throw new TypeError("Cannot call a class as a function")}var N=(0,w.default)("quill:selection"),C=function E(M){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;_(this,E),this.index=M,this.length=P},I=function(){function E(M,P){var T=this;_(this,E),this.emitter=P,this.scroll=M,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=d.default.create("cursor",this),this.lastRange=this.savedRange=new C(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){T.mouseDown||setTimeout(T.update.bind(T,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(A,z){A===y.default.events.TEXT_CHANGE&&z.length()>0&&T.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(T.hasFocus()){var A=T.getNativeRange();A!=null&&A.start.node!==T.cursor.textNode&&T.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{T.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(A,z){if(z.range){var O=z.range,F=O.startNode,G=O.startOffset,Y=O.endNode,K=O.endOffset;T.setNativeRange(F,G,Y,K)}}),this.update(y.default.sources.SILENT)}return o(E,[{key:"handleComposition",value:function(){var P=this;this.root.addEventListener("compositionstart",function(){P.composing=!0}),this.root.addEventListener("compositionend",function(){if(P.composing=!1,P.cursor.parent){var T=P.cursor.restore();if(!T)return;setTimeout(function(){P.setNativeRange(T.startNode,T.startOffset,T.endNode,T.endOffset)},1)}})}},{key:"handleDragging",value:function(){var P=this;this.emitter.listenDOM("mousedown",document.body,function(){P.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){P.mouseDown=!1,P.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(P,T){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[P])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||d.default.query(P,d.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var z=d.default.find(A.start.node,!1);if(z==null)return;if(z instanceof d.default.Leaf){var O=z.split(A.start.offset);z.parent.insertBefore(this.cursor,O)}else z.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(P,T),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(P){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();P=Math.min(P,A-1),T=Math.min(P+T,A-1)-P;var z=void 0,O=this.scroll.leaf(P),F=a(O,2),G=F[0],Y=F[1];if(G==null)return null;var K=G.position(Y,!0),U=a(K,2);z=U[0],Y=U[1];var B=document.createRange();if(T>0){B.setStart(z,Y);var R=this.scroll.leaf(P+T),$=a(R,2);if(G=$[0],Y=$[1],G==null)return null;var W=G.position(Y,!0),Z=a(W,2);return z=Z[0],Y=Z[1],B.setEnd(z,Y),B.getBoundingClientRect()}else{var X="left",V=void 0;return z instanceof Text?(Y<z.data.length?(B.setStart(z,Y),B.setEnd(z,Y+1)):(B.setStart(z,Y-1),B.setEnd(z,Y),X="right"),V=B.getBoundingClientRect()):(V=G.domNode.getBoundingClientRect(),Y>0&&(X="right")),{bottom:V.top+V.height,height:V.height,left:V[X],right:V[X],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var P=document.getSelection();if(P==null||P.rangeCount<=0)return null;var T=P.getRangeAt(0);if(T==null)return null;var A=this.normalizeNative(T);return N.info("getNativeRange",A),A}},{key:"getRange",value:function(){var P=this.getNativeRange();if(P==null)return[null,null];var T=this.normalizedToRange(P);return[T,P]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(P){var T=this,A=[[P.start.node,P.start.offset]];P.native.collapsed||A.push([P.end.node,P.end.offset]);var z=A.map(function(G){var Y=a(G,2),K=Y[0],U=Y[1],B=d.default.find(K,!0),R=B.offset(T.scroll);return U===0?R:B instanceof d.default.Container?R+B.length():R+B.index(K,U)}),O=Math.min(Math.max.apply(Math,b(z)),this.scroll.length()-1),F=Math.min.apply(Math,[O].concat(b(z)));return new C(F,O-F)}},{key:"normalizeNative",value:function(P){if(!k(this.root,P.startContainer)||!P.collapsed&&!k(this.root,P.endContainer))return null;var T={start:{node:P.startContainer,offset:P.startOffset},end:{node:P.endContainer,offset:P.endOffset},native:P};return[T.start,T.end].forEach(function(A){for(var z=A.node,O=A.offset;!(z instanceof Text)&&z.childNodes.length>0;)if(z.childNodes.length>O)z=z.childNodes[O],O=0;else if(z.childNodes.length===O)z=z.lastChild,O=z instanceof Text?z.data.length:z.childNodes.length+1;else break;A.node=z,A.offset=O}),T}},{key:"rangeToNative",value:function(P){var T=this,A=P.collapsed?[P.index]:[P.index,P.index+P.length],z=[],O=this.scroll.length();return A.forEach(function(F,G){F=Math.min(O-1,F);var Y=void 0,K=T.scroll.leaf(F),U=a(K,2),B=U[0],R=U[1],$=B.position(R,G!==0),W=a($,2);Y=W[0],R=W[1],z.push(Y,R)}),z.length<2&&(z=z.concat(z)),z}},{key:"scrollIntoView",value:function(P){var T=this.lastRange;if(T!=null){var A=this.getBounds(T.index,T.length);if(A!=null){var z=this.scroll.length()-1,O=this.scroll.line(Math.min(T.index,z)),F=a(O,1),G=F[0],Y=G;if(T.length>0){var K=this.scroll.line(Math.min(T.index+T.length,z)),U=a(K,1);Y=U[0]}if(!(G==null||Y==null)){var B=P.getBoundingClientRect();A.top<B.top?P.scrollTop-=B.top-A.top:A.bottom>B.bottom&&(P.scrollTop+=A.bottom-B.bottom)}}}}},{key:"setNativeRange",value:function(P,T){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T,O=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",P,T,A,z),!(P!=null&&(this.root.parentNode==null||P.parentNode==null||A.parentNode==null))){var F=document.getSelection();if(F!=null)if(P!=null){this.hasFocus()||this.root.focus();var G=(this.getNativeRange()||{}).native;if(G==null||O||P!==G.startContainer||T!==G.startOffset||A!==G.endContainer||z!==G.endOffset){P.tagName=="BR"&&(T=[].indexOf.call(P.parentNode.childNodes,P),P=P.parentNode),A.tagName=="BR"&&(z=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var Y=document.createRange();Y.setStart(P,T),Y.setEnd(A,z),F.removeAllRanges(),F.addRange(Y)}}else F.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(P){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof T=="string"&&(A=T,T=!1),N.info("setRange",P),P!=null){var z=this.rangeToNative(P);this.setNativeRange.apply(this,b(z).concat([T]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,T=this.lastRange,A=this.getRange(),z=a(A,2),O=z[0],F=z[1];if(this.lastRange=O,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,u.default)(T,this.lastRange)){var G;!this.composing&&F!=null&&F.native.collapsed&&F.start.node!==this.cursor.textNode&&this.cursor.restore();var Y=[y.default.events.SELECTION_CHANGE,(0,m.default)(this.lastRange),(0,m.default)(T),P];if((G=this.emitter).emit.apply(G,[y.default.events.EDITOR_CHANGE].concat(Y)),P!==y.default.sources.SILENT){var K;(K=this.emitter).emit.apply(K,Y)}}}}]),E}();function k(E,M){try{M.parentNode}catch{return!1}return M instanceof Text&&(M=M.parentNode),E.contains(M)}r.Range=C,r.default=I},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function y(v,w){for(var x=0;x<w.length;x++){var b=w[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,x){return w&&y(v.prototype,w),x&&y(v,x),v}}(),o=function y(v,w,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,w,x)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(x)}},c=i(0),d=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function m(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=function(y){u(v,y);function v(){return m(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"insertInto",value:function(x,b){x.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,x,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(d.default.Embed);p.blotName="break",p.tagName="BR",r.default=p},function(s,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var y in p)p.hasOwnProperty(y)&&(u[y]=p[y])};return function(u,p){h(u,p);function y(){this.constructor=u}u.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),c=i(30),d=i(1),f=function(h){a(u,h);function u(p){var y=h.call(this,p)||this;return y.build(),y}return u.prototype.appendChild=function(p){this.insertBefore(p)},u.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},u.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var v=m(y);p.insertBefore(v,p.children.head||void 0)}catch(w){if(w instanceof d.ParchmentError)return;throw w}})},u.prototype.deleteAt=function(p,y){if(p===0&&y===this.length())return this.remove();this.children.forEachAt(p,y,function(v,w,x){v.deleteAt(w,x)})},u.prototype.descendant=function(p,y){var v=this.children.find(y),w=v[0],x=v[1];return p.blotName==null&&p(w)||p.blotName!=null&&w instanceof p?[w,x]:w instanceof u?w.descendant(p,x):[null,-1]},u.prototype.descendants=function(p,y,v){y===void 0&&(y=0),v===void 0&&(v=Number.MAX_VALUE);var w=[],x=v;return this.children.forEachAt(y,v,function(b,_,N){(p.blotName==null&&p(b)||p.blotName!=null&&b instanceof p)&&w.push(b),b instanceof u&&(w=w.concat(b.descendants(p,_,x))),x-=N}),w},u.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),h.prototype.detach.call(this)},u.prototype.formatAt=function(p,y,v,w){this.children.forEachAt(p,y,function(x,b,_){x.formatAt(b,_,v,w)})},u.prototype.insertAt=function(p,y,v){var w=this.children.find(p),x=w[0],b=w[1];if(x)x.insertAt(b,y,v);else{var _=v==null?d.create("text",y):d.create(y,v);this.appendChild(_)}},u.prototype.insertBefore=function(p,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return p instanceof v}))throw new d.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,y)},u.prototype.length=function(){return this.children.reduce(function(p,y){return p+y.length()},0)},u.prototype.moveChildren=function(p,y){this.children.forEach(function(v){p.insertBefore(v,y)})},u.prototype.optimize=function(p){if(h.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var y=d.create(this.statics.defaultChild);this.appendChild(y),y.optimize(p)}else this.remove()},u.prototype.path=function(p,y){y===void 0&&(y=!1);var v=this.children.find(p,y),w=v[0],x=v[1],b=[[this,p]];return w instanceof u?b.concat(w.path(x,y)):(w!=null&&b.push([w,x]),b)},u.prototype.removeChild=function(p){this.children.remove(p)},u.prototype.replace=function(p){p instanceof u&&p.moveChildren(this),h.prototype.replace.call(this,p)},u.prototype.split=function(p,y){if(y===void 0&&(y=!1),!y){if(p===0)return this;if(p===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(p,this.length(),function(w,x,b){w=w.split(x,y),v.appendChild(w)}),v},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(p,y){var v=this,w=[],x=[];p.forEach(function(b){b.target===v.domNode&&b.type==="childList"&&(w.push.apply(w,b.addedNodes),x.push.apply(x,b.removedNodes))}),x.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var _=d.find(b);_!=null&&(_.domNode.parentNode==null||_.domNode.parentNode===v.domNode)&&_.detach()}}),w.filter(function(b){return b.parentNode==v.domNode}).sort(function(b,_){return b===_?0:b.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var _=null;b.nextSibling!=null&&(_=d.find(b.nextSibling));var N=m(b);(N.next!=_||N.next==null)&&(N.parent!=null&&N.parent.removeChild(v),v.insertBefore(N,_||void 0))})},u}(c.default);function m(h){var u=d.find(h);if(u==null)try{u=d.create(h)}catch{u=d.create(d.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(y){u.domNode.appendChild(y)}),h.parentNode&&h.parentNode.replaceChild(u.domNode,h),u.attach()}return u}r.default=f},function(s,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var y in p)p.hasOwnProperty(y)&&(u[y]=p[y])};return function(u,p){h(u,p);function y(){this.constructor=u}u.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),c=i(31),d=i(17),f=i(1),m=function(h){a(u,h);function u(p){var y=h.call(this,p)||this;return y.attributes=new c.default(y.domNode),y}return u.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},u.prototype.format=function(p,y){var v=f.query(p);v instanceof o.default?this.attributes.attribute(v,y):y&&v!=null&&(p!==this.statics.blotName||this.formats()[p]!==y)&&this.replaceWith(p,y)},u.prototype.formats=function(){var p=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(p[this.statics.blotName]=y),p},u.prototype.replaceWith=function(p,y){var v=h.prototype.replaceWith.call(this,p,y);return this.attributes.copy(v),v},u.prototype.update=function(p,y){var v=this;h.prototype.update.call(this,p,y),p.some(function(w){return w.target===v.domNode&&w.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(p,y){var v=h.prototype.wrap.call(this,p,y);return v instanceof u&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},u}(d.default);r.default=m},function(s,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var u in h)h.hasOwnProperty(u)&&(m[u]=h[u])};return function(m,h){f(m,h);function u(){this.constructor=m}m.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),c=i(1),d=function(f){a(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.value=function(h){return!0},m.prototype.index=function(h,u){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},m.prototype.position=function(h,u){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(p+=1),[this.parent.domNode,p]},m.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},m.scope=c.Scope.INLINE_BLOT,m}(o.default);r.default=d},function(s,r,i){var a=i(11),o=i(3),c={attributes:{compose:function(f,m,h){typeof f!="object"&&(f={}),typeof m!="object"&&(m={});var u=o(!0,{},m);h||(u=Object.keys(u).reduce(function(y,v){return u[v]!=null&&(y[v]=u[v]),y},{}));for(var p in f)f[p]!==void 0&&m[p]===void 0&&(u[p]=f[p]);return Object.keys(u).length>0?u:void 0},diff:function(f,m){typeof f!="object"&&(f={}),typeof m!="object"&&(m={});var h=Object.keys(f).concat(Object.keys(m)).reduce(function(u,p){return a(f[p],m[p])||(u[p]=m[p]===void 0?null:m[p]),u},{});return Object.keys(h).length>0?h:void 0},transform:function(f,m,h){if(typeof f!="object")return m;if(typeof m=="object"){if(!h)return m;var u=Object.keys(m).reduce(function(p,y){return f[y]===void 0&&(p[y]=m[y]),p},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(f){return new d(f)},length:function(f){return typeof f.delete=="number"?f.delete:typeof f.retain=="number"?f.retain:typeof f.insert=="string"?f.insert.length:1}};function d(f){this.ops=f,this.index=0,this.offset=0}d.prototype.hasNext=function(){return this.peekLength()<1/0},d.prototype.next=function(f){f||(f=1/0);var m=this.ops[this.index];if(m){var h=this.offset,u=c.length(m);if(f>=u-h?(f=u-h,this.index+=1,this.offset=0):this.offset+=f,typeof m.delete=="number")return{delete:f};var p={};return m.attributes&&(p.attributes=m.attributes),typeof m.retain=="number"?p.retain=f:typeof m.insert=="string"?p.insert=m.insert.substr(h,f):p.insert=m.insert,p}else return{retain:1/0}},d.prototype.peek=function(){return this.ops[this.index]},d.prototype.peekLength=function(){return this.ops[this.index]?c.length(this.ops[this.index])-this.offset:1/0},d.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},d.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var f=this.offset,m=this.index,h=this.next(),u=this.ops.slice(this.index);return this.offset=f,this.index=m,[h].concat(u)}else return[]},s.exports=c},function(s,r){var i=function(){function a(v,w){return w!=null&&v instanceof w}var o;try{o=Map}catch{o=function(){}}var c;try{c=Set}catch{c=function(){}}var d;try{d=Promise}catch{d=function(){}}function f(v,w,x,b,_){typeof w=="object"&&(x=w.depth,b=w.prototype,_=w.includeNonEnumerable,w=w.circular);var N=[],C=[],I=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof x>"u"&&(x=1/0);function k(E,M){if(E===null)return null;if(M===0)return E;var P,T;if(typeof E!="object")return E;if(a(E,o))P=new o;else if(a(E,c))P=new c;else if(a(E,d))P=new d(function(B,R){E.then(function($){B(k($,M-1))},function($){R(k($,M-1))})});else if(f.__isArray(E))P=[];else if(f.__isRegExp(E))P=new RegExp(E.source,y(E)),E.lastIndex&&(P.lastIndex=E.lastIndex);else if(f.__isDate(E))P=new Date(E.getTime());else{if(I&&Buffer.isBuffer(E))return Buffer.allocUnsafe?P=Buffer.allocUnsafe(E.length):P=new Buffer(E.length),E.copy(P),P;a(E,Error)?P=Object.create(E):typeof b>"u"?(T=Object.getPrototypeOf(E),P=Object.create(T)):(P=Object.create(b),T=b)}if(w){var A=N.indexOf(E);if(A!=-1)return C[A];N.push(E),C.push(P)}a(E,o)&&E.forEach(function(B,R){var $=k(R,M-1),W=k(B,M-1);P.set($,W)}),a(E,c)&&E.forEach(function(B){var R=k(B,M-1);P.add(R)});for(var z in E){var O;T&&(O=Object.getOwnPropertyDescriptor(T,z)),!(O&&O.set==null)&&(P[z]=k(E[z],M-1))}if(Object.getOwnPropertySymbols)for(var F=Object.getOwnPropertySymbols(E),z=0;z<F.length;z++){var G=F[z],Y=Object.getOwnPropertyDescriptor(E,G);Y&&!Y.enumerable&&!_||(P[G]=k(E[G],M-1),Y.enumerable||Object.defineProperty(P,G,{enumerable:!1}))}if(_)for(var K=Object.getOwnPropertyNames(E),z=0;z<K.length;z++){var U=K[z],Y=Object.getOwnPropertyDescriptor(E,U);Y&&Y.enumerable||(P[U]=k(E[U],M-1),Object.defineProperty(P,U,{enumerable:!1}))}return P}return k(v,x)}f.clonePrototype=function(w){if(w===null)return null;var x=function(){};return x.prototype=w,new x};function m(v){return Object.prototype.toString.call(v)}f.__objToStr=m;function h(v){return typeof v=="object"&&m(v)==="[object Date]"}f.__isDate=h;function u(v){return typeof v=="object"&&m(v)==="[object Array]"}f.__isArray=u;function p(v){return typeof v=="object"&&m(v)==="[object RegExp]"}f.__isRegExp=p;function y(v){var w="";return v.global&&(w+="g"),v.ignoreCase&&(w+="i"),v.multiline&&(w+="m"),w}return f.__getRegExpFlags=y,f}();typeof s=="object"&&s.exports&&(s.exports=i)},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function P(T,A){var z=[],O=!0,F=!1,G=void 0;try{for(var Y=T[Symbol.iterator](),K;!(O=(K=Y.next()).done)&&(z.push(K.value),!(A&&z.length===A));O=!0);}catch(U){F=!0,G=U}finally{try{!O&&Y.return&&Y.return()}finally{if(F)throw G}}return z}return function(T,A){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return P(T,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function P(T,A){for(var z=0;z<A.length;z++){var O=A[z];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(T,O.key,O)}}return function(T,A,z){return A&&P(T.prototype,A),z&&P(T,z),T}}(),c=function P(T,A,z){T===null&&(T=Function.prototype);var O=Object.getOwnPropertyDescriptor(T,A);if(O===void 0){var F=Object.getPrototypeOf(T);return F===null?void 0:P(F,A,z)}else{if("value"in O)return O.value;var G=O.get;return G===void 0?void 0:G.call(z)}},d=i(0),f=N(d),m=i(8),h=N(m),u=i(4),p=N(u),y=i(16),v=N(y),w=i(13),x=N(w),b=i(25),_=N(b);function N(P){return P&&P.__esModule?P:{default:P}}function C(P,T){if(!(P instanceof T))throw new TypeError("Cannot call a class as a function")}function I(P,T){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:P}function k(P,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);P.prototype=Object.create(T&&T.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(P,T):P.__proto__=T)}function E(P){return P instanceof p.default||P instanceof u.BlockEmbed}var M=function(P){k(T,P);function T(A,z){C(this,T);var O=I(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,A));return O.emitter=z.emitter,Array.isArray(z.whitelist)&&(O.whitelist=z.whitelist.reduce(function(F,G){return F[G]=!0,F},{})),O.domNode.addEventListener("DOMNodeInserted",function(){}),O.optimize(),O.enable(),O}return o(T,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(z,O){var F=this.line(z),G=a(F,2),Y=G[0],K=G[1],U=this.line(z+O),B=a(U,1),R=B[0];if(c(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"deleteAt",this).call(this,z,O),R!=null&&Y!==R&&K>0){if(Y instanceof u.BlockEmbed||R instanceof u.BlockEmbed){this.optimize();return}if(Y instanceof x.default){var $=Y.newlineIndex(Y.length(),!0);if($>-1&&(Y=Y.split($+1),Y===R)){this.optimize();return}}else if(R instanceof x.default){var W=R.newlineIndex(0);W>-1&&R.split(W+1)}var Z=R.children.head instanceof v.default?null:R.children.head;Y.moveChildren(R,Z),Y.remove()}this.optimize()}},{key:"enable",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",z)}},{key:"formatAt",value:function(z,O,F,G){this.whitelist!=null&&!this.whitelist[F]||(c(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"formatAt",this).call(this,z,O,F,G),this.optimize())}},{key:"insertAt",value:function(z,O,F){if(!(F!=null&&this.whitelist!=null&&!this.whitelist[O])){if(z>=this.length())if(F==null||f.default.query(O,f.default.Scope.BLOCK)==null){var G=f.default.create(this.statics.defaultChild);this.appendChild(G),F==null&&O.endsWith(`
`)&&(O=O.slice(0,-1)),G.insertAt(0,O,F)}else{var Y=f.default.create(O,F);this.appendChild(Y)}else c(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,z,O,F);this.optimize()}}},{key:"insertBefore",value:function(z,O){if(z.statics.scope===f.default.Scope.INLINE_BLOT){var F=f.default.create(this.statics.defaultChild);F.appendChild(z),z=F}c(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,z,O)}},{key:"leaf",value:function(z){return this.path(z).pop()||[null,-1]}},{key:"line",value:function(z){return z===this.length()?this.line(z-1):this.descendant(E,z)}},{key:"lines",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,F=function G(Y,K,U){var B=[],R=U;return Y.children.forEachAt(K,U,function($,W,Z){E($)?B.push($):$ instanceof f.default.Container&&(B=B.concat(G($,W,R))),R-=Z}),B};return F(this,z,O)}},{key:"optimize",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(c(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,z,O),z.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,z,O))}},{key:"path",value:function(z){return c(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"path",this).call(this,z).slice(1)}},{key:"update",value:function(z){if(this.batch!==!0){var O=h.default.sources.USER;typeof z=="string"&&(O=z),Array.isArray(z)||(z=this.observer.takeRecords()),z.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,O,z),c(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"update",this).call(this,z.concat([])),z.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,O,z)}}}]),T}(f.default.Scroll);M.blotName="scroll",M.className="ql-editor",M.tagName="DIV",M.defaultChild="block",M.allowedChildren=[p.default,u.BlockEmbed,_.default],r.default=M},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},o=function(){function V(H,se){var Q=[],ie=!0,he=!1,te=void 0;try{for(var ge=H[Symbol.iterator](),Se;!(ie=(Se=ge.next()).done)&&(Q.push(Se.value),!(se&&Q.length===se));ie=!0);}catch(fe){he=!0,te=fe}finally{try{!ie&&ge.return&&ge.return()}finally{if(he)throw te}}return Q}return function(H,se){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return V(H,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function V(H,se){for(var Q=0;Q<se.length;Q++){var ie=se[Q];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(H,ie.key,ie)}}return function(H,se,Q){return se&&V(H.prototype,se),Q&&V(H,Q),H}}(),d=i(21),f=P(d),m=i(11),h=P(m),u=i(3),p=P(u),y=i(2),v=P(y),w=i(20),x=P(w),b=i(0),_=P(b),N=i(5),C=P(N),I=i(10),k=P(I),E=i(9),M=P(E);function P(V){return V&&V.__esModule?V:{default:V}}function T(V,H,se){return H in V?Object.defineProperty(V,H,{value:se,enumerable:!0,configurable:!0,writable:!0}):V[H]=se,V}function A(V,H){if(!(V instanceof H))throw new TypeError("Cannot call a class as a function")}function z(V,H){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:V}function O(V,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);V.prototype=Object.create(H&&H.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(V,H):V.__proto__=H)}var F=(0,k.default)("quill:keyboard"),G=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Y=function(V){O(H,V),c(H,null,[{key:"match",value:function(Q,ie){return ie=X(ie),["altKey","ctrlKey","metaKey","shiftKey"].some(function(he){return!!ie[he]!==Q[he]&&ie[he]!==null})?!1:ie.key===(Q.which||Q.keyCode)}}]);function H(se,Q){A(this,H);var ie=z(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,se,Q));return ie.bindings={},Object.keys(ie.options.bindings).forEach(function(he){he==="list autofill"&&se.scroll.whitelist!=null&&!se.scroll.whitelist.list||ie.options.bindings[he]&&ie.addBinding(ie.options.bindings[he])}),ie.addBinding({key:H.keys.ENTER,shiftKey:null},$),ie.addBinding({key:H.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ie.addBinding({key:H.keys.BACKSPACE},{collapsed:!0},U),ie.addBinding({key:H.keys.DELETE},{collapsed:!0},B)):(ie.addBinding({key:H.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},U),ie.addBinding({key:H.keys.DELETE},{collapsed:!0,suffix:/^.?$/},B)),ie.addBinding({key:H.keys.BACKSPACE},{collapsed:!1},R),ie.addBinding({key:H.keys.DELETE},{collapsed:!1},R),ie.addBinding({key:H.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},U),ie.listen(),ie}return c(H,[{key:"addBinding",value:function(Q){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},te=X(Q);if(te==null||te.key==null)return F.warn("Attempted to add invalid keyboard binding",te);typeof ie=="function"&&(ie={handler:ie}),typeof he=="function"&&(he={handler:he}),te=(0,p.default)(te,ie,he),this.bindings[te.key]=this.bindings[te.key]||[],this.bindings[te.key].push(te)}},{key:"listen",value:function(){var Q=this;this.quill.root.addEventListener("keydown",function(ie){if(!ie.defaultPrevented){var he=ie.which||ie.keyCode,te=(Q.bindings[he]||[]).filter(function(it){return H.match(ie,it)});if(te.length!==0){var ge=Q.quill.getSelection();if(!(ge==null||!Q.quill.hasFocus())){var Se=Q.quill.getLine(ge.index),fe=o(Se,2),ke=fe[0],xe=fe[1],de=Q.quill.getLeaf(ge.index),me=o(de,2),ee=me[0],ae=me[1],oe=ge.length===0?[ee,ae]:Q.quill.getLeaf(ge.index+ge.length),be=o(oe,2),je=be[0],we=be[1],re=ee instanceof _.default.Text?ee.value().slice(0,ae):"",Ce=je instanceof _.default.Text?je.value().slice(we):"",Te={collapsed:ge.length===0,empty:ge.length===0&&ke.length()<=1,format:Q.quill.getFormat(ge),offset:xe,prefix:re,suffix:Ce},lt=te.some(function(it){if(it.collapsed!=null&&it.collapsed!==Te.collapsed||it.empty!=null&&it.empty!==Te.empty||it.offset!=null&&it.offset!==Te.offset)return!1;if(Array.isArray(it.format)){if(it.format.every(function(Ft){return Te.format[Ft]==null}))return!1}else if(a(it.format)==="object"&&!Object.keys(it.format).every(function(Ft){return it.format[Ft]===!0?Te.format[Ft]!=null:it.format[Ft]===!1?Te.format[Ft]==null:(0,h.default)(it.format[Ft],Te.format[Ft])}))return!1;return it.prefix!=null&&!it.prefix.test(Te.prefix)||it.suffix!=null&&!it.suffix.test(Te.suffix)?!1:it.handler.call(Q,ge,Te)!==!0});lt&&ie.preventDefault()}}}})}}]),H}(M.default);Y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},Y.DEFAULTS={bindings:{bold:Z("bold"),italic:Z("italic"),underline:Z("underline"),indent:{key:Y.keys.TAB,format:["blockquote","indent","list"],handler:function(H,se){if(se.collapsed&&se.offset!==0)return!0;this.quill.format("indent","+1",C.default.sources.USER)}},outdent:{key:Y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(H,se){if(se.collapsed&&se.offset!==0)return!0;this.quill.format("indent","-1",C.default.sources.USER)}},"outdent backspace":{key:Y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(H,se){se.format.indent!=null?this.quill.format("indent","-1",C.default.sources.USER):se.format.list!=null&&this.quill.format("list",!1,C.default.sources.USER)}},"indent code-block":W(!0),"outdent code-block":W(!1),"remove tab":{key:Y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(H){this.quill.deleteText(H.index-1,1,C.default.sources.USER)}},tab:{key:Y.keys.TAB,handler:function(H){this.quill.history.cutoff();var se=new v.default().retain(H.index).delete(H.length).insert("	");this.quill.updateContents(se,C.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(H.index+1,C.default.sources.SILENT)}},"list empty enter":{key:Y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(H,se){this.quill.format("list",!1,C.default.sources.USER),se.format.indent&&this.quill.format("indent",!1,C.default.sources.USER)}},"checklist enter":{key:Y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(H){var se=this.quill.getLine(H.index),Q=o(se,2),ie=Q[0],he=Q[1],te=(0,p.default)({},ie.formats(),{list:"checked"}),ge=new v.default().retain(H.index).insert(`
`,te).retain(ie.length()-he-1).retain(1,{list:"unchecked"});this.quill.updateContents(ge,C.default.sources.USER),this.quill.setSelection(H.index+1,C.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:Y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(H,se){var Q=this.quill.getLine(H.index),ie=o(Q,2),he=ie[0],te=ie[1],ge=new v.default().retain(H.index).insert(`
`,se.format).retain(he.length()-te-1).retain(1,{header:null});this.quill.updateContents(ge,C.default.sources.USER),this.quill.setSelection(H.index+1,C.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(H,se){var Q=se.prefix.length,ie=this.quill.getLine(H.index),he=o(ie,2),te=he[0],ge=he[1];if(ge>Q)return!0;var Se=void 0;switch(se.prefix.trim()){case"[]":case"[ ]":Se="unchecked";break;case"[x]":Se="checked";break;case"-":case"*":Se="bullet";break;default:Se="ordered"}this.quill.insertText(H.index," ",C.default.sources.USER),this.quill.history.cutoff();var fe=new v.default().retain(H.index-ge).delete(Q+1).retain(te.length()-2-ge).retain(1,{list:Se});this.quill.updateContents(fe,C.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(H.index-Q,C.default.sources.SILENT)}},"code exit":{key:Y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(H){var se=this.quill.getLine(H.index),Q=o(se,2),ie=Q[0],he=Q[1],te=new v.default().retain(H.index+ie.length()-he-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(te,C.default.sources.USER)}},"embed left":K(Y.keys.LEFT,!1),"embed left shift":K(Y.keys.LEFT,!0),"embed right":K(Y.keys.RIGHT,!1),"embed right shift":K(Y.keys.RIGHT,!0)}};function K(V,H){var se,Q=V===Y.keys.LEFT?"prefix":"suffix";return se={key:V,shiftKey:H,altKey:null},T(se,Q,/^$/),T(se,"handler",function(he){var te=he.index;V===Y.keys.RIGHT&&(te+=he.length+1);var ge=this.quill.getLeaf(te),Se=o(ge,1),fe=Se[0];return fe instanceof _.default.Embed?(V===Y.keys.LEFT?H?this.quill.setSelection(he.index-1,he.length+1,C.default.sources.USER):this.quill.setSelection(he.index-1,C.default.sources.USER):H?this.quill.setSelection(he.index,he.length+1,C.default.sources.USER):this.quill.setSelection(he.index+he.length+1,C.default.sources.USER),!1):!0}),se}function U(V,H){if(!(V.index===0||this.quill.getLength()<=1)){var se=this.quill.getLine(V.index),Q=o(se,1),ie=Q[0],he={};if(H.offset===0){var te=this.quill.getLine(V.index-1),ge=o(te,1),Se=ge[0];if(Se!=null&&Se.length()>1){var fe=ie.formats(),ke=this.quill.getFormat(V.index-1,1);he=x.default.attributes.diff(fe,ke)||{}}}var xe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(H.prefix)?2:1;this.quill.deleteText(V.index-xe,xe,C.default.sources.USER),Object.keys(he).length>0&&this.quill.formatLine(V.index-xe,xe,he,C.default.sources.USER),this.quill.focus()}}function B(V,H){var se=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(H.suffix)?2:1;if(!(V.index>=this.quill.getLength()-se)){var Q={},ie=0,he=this.quill.getLine(V.index),te=o(he,1),ge=te[0];if(H.offset>=ge.length()-1){var Se=this.quill.getLine(V.index+1),fe=o(Se,1),ke=fe[0];if(ke){var xe=ge.formats(),de=this.quill.getFormat(V.index,1);Q=x.default.attributes.diff(xe,de)||{},ie=ke.length()}}this.quill.deleteText(V.index,se,C.default.sources.USER),Object.keys(Q).length>0&&this.quill.formatLine(V.index+ie-1,se,Q,C.default.sources.USER)}}function R(V){var H=this.quill.getLines(V),se={};if(H.length>1){var Q=H[0].formats(),ie=H[H.length-1].formats();se=x.default.attributes.diff(ie,Q)||{}}this.quill.deleteText(V,C.default.sources.USER),Object.keys(se).length>0&&this.quill.formatLine(V.index,1,se,C.default.sources.USER),this.quill.setSelection(V.index,C.default.sources.SILENT),this.quill.focus()}function $(V,H){var se=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var Q=Object.keys(H.format).reduce(function(ie,he){return _.default.query(he,_.default.Scope.BLOCK)&&!Array.isArray(H.format[he])&&(ie[he]=H.format[he]),ie},{});this.quill.insertText(V.index,`
`,Q,C.default.sources.USER),this.quill.setSelection(V.index+1,C.default.sources.SILENT),this.quill.focus(),Object.keys(H.format).forEach(function(ie){Q[ie]==null&&(Array.isArray(H.format[ie])||ie!=="link"&&se.quill.format(ie,H.format[ie],C.default.sources.USER))})}function W(V){return{key:Y.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(se){var Q=_.default.query("code-block"),ie=se.index,he=se.length,te=this.quill.scroll.descendant(Q,ie),ge=o(te,2),Se=ge[0],fe=ge[1];if(Se!=null){var ke=this.quill.getIndex(Se),xe=Se.newlineIndex(fe,!0)+1,de=Se.newlineIndex(ke+fe+he),me=Se.domNode.textContent.slice(xe,de).split(`
`);fe=0,me.forEach(function(ee,ae){V?(Se.insertAt(xe+fe,Q.TAB),fe+=Q.TAB.length,ae===0?ie+=Q.TAB.length:he+=Q.TAB.length):ee.startsWith(Q.TAB)&&(Se.deleteAt(xe+fe,Q.TAB.length),fe-=Q.TAB.length,ae===0?ie-=Q.TAB.length:he-=Q.TAB.length),fe+=ee.length+1}),this.quill.update(C.default.sources.USER),this.quill.setSelection(ie,he,C.default.sources.SILENT)}}}}function Z(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(se,Q){this.quill.format(V,!Q.format[V],C.default.sources.USER)}}}function X(V){if(typeof V=="string"||typeof V=="number")return X({key:V});if((typeof V>"u"?"undefined":a(V))==="object"&&(V=(0,f.default)(V,!1)),typeof V.key=="string")if(Y.keys[V.key.toUpperCase()]!=null)V.key=Y.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[G]=V.shortKey,delete V.shortKey),V}r.default=Y,r.SHORTKEY=G},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function x(b,_){var N=[],C=!0,I=!1,k=void 0;try{for(var E=b[Symbol.iterator](),M;!(C=(M=E.next()).done)&&(N.push(M.value),!(_&&N.length===_));C=!0);}catch(P){I=!0,k=P}finally{try{!C&&E.return&&E.return()}finally{if(I)throw k}}return N}return function(b,_){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return x(b,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function x(b,_,N){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,_);if(C===void 0){var I=Object.getPrototypeOf(b);return I===null?void 0:x(I,_,N)}else{if("value"in C)return C.value;var k=C.get;return k===void 0?void 0:k.call(N)}},c=function(){function x(b,_){for(var N=0;N<_.length;N++){var C=_[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,_,N){return _&&x(b.prototype,_),N&&x(b,N),b}}(),d=i(0),f=u(d),m=i(7),h=u(m);function u(x){return x&&x.__esModule?x:{default:x}}function p(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function y(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function v(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var w=function(x){v(b,x),c(b,null,[{key:"value",value:function(){}}]);function b(_,N){p(this,b);var C=y(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,_));return C.selection=N,C.textNode=document.createTextNode(b.CONTENTS),C.domNode.appendChild(C.textNode),C._length=0,C}return c(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,C){if(this._length!==0)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,N,C);for(var I=this,k=0;I!=null&&I.statics.scope!==f.default.Scope.BLOCK_BLOT;)k+=I.offset(I.parent),I=I.parent;I!=null&&(this._length=b.CONTENTS.length,I.optimize(),I.formatAt(k,b.CONTENTS.length,N,C),this._length=0)}},{key:"index",value:function(N,C){return N===this.textNode?0:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,N,C)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,C=this.selection.getNativeRange(),I=void 0,k=void 0,E=void 0;if(C!=null&&C.start.node===N&&C.end.node===N){var M=[N,C.start.offset,C.end.offset];I=M[0],k=M[1],E=M[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var P=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof h.default?(I=this.next.domNode,this.next.insertAt(0,P),this.textNode.data=b.CONTENTS):(this.textNode.data=P,this.parent.insertBefore(f.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),k!=null){var T=[k,E].map(function(z){return Math.max(0,Math.min(I.data.length,z-1))}),A=a(T,2);return k=A[0],E=A[1],{startNode:I,startOffset:k,endNode:I,endOffset:E}}}}},{key:"update",value:function(N,C){var I=this;if(N.some(function(E){return E.type==="characterData"&&E.target===I.textNode})){var k=this.restore();k&&(C.range=k)}}},{key:"value",value:function(){return""}}]),b}(f.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",r.default=w},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=f(a),c=i(4),d=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function m(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=function(y){u(v,y);function v(){return m(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(o.default.Container);p.allowedChildren=[d.default,c.BlockEmbed,p],r.default=p},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var a=function(){function w(x,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,N.key,N)}}return function(x,b,_){return b&&w(x.prototype,b),_&&w(x,_),x}}(),o=function w(x,b,_){x===null&&(x=Function.prototype);var N=Object.getOwnPropertyDescriptor(x,b);if(N===void 0){var C=Object.getPrototypeOf(x);return C===null?void 0:w(C,b,_)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(_)}},c=i(0),d=f(c);function f(w){return w&&w.__esModule?w:{default:w}}function m(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}function h(w,x){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:w}function u(w,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(w,x):w.__proto__=x)}var p=function(w){u(x,w);function x(){return m(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return a(x,[{key:"value",value:function(_){var N=o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"value",this).call(this,_);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(C){return("00"+parseInt(C).toString(16)).slice(-2)}).join("")):N}}]),x}(d.default.Attributor.Style),y=new d.default.Attributor.Class("color","ql-color",{scope:d.default.Scope.INLINE}),v=new p("color","color",{scope:d.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=y,r.ColorStyle=v},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var a=function(){function v(w,x){for(var b=0;b<x.length;b++){var _=x[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}return function(w,x,b){return x&&v(w.prototype,x),b&&v(w,b),w}}(),o=function v(w,x,b){w===null&&(w=Function.prototype);var _=Object.getOwnPropertyDescriptor(w,x);if(_===void 0){var N=Object.getPrototypeOf(w);return N===null?void 0:v(N,x,b)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(b)}},c=i(6),d=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function h(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function u(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var p=function(v){u(w,v);function w(){return m(this,w),h(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"format",value:function(b,_){if(b!==this.statics.blotName||!_)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,b,_);_=this.constructor.sanitize(_),this.domNode.setAttribute("href",_)}}],[{key:"create",value:function(b){var _=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,b);return b=this.sanitize(b),_.setAttribute("href",b),_.setAttribute("rel","noopener noreferrer"),_.setAttribute("target","_blank"),_}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return y(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),w}(d.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(v,w){var x=document.createElement("a");x.href=v;var b=x.href.slice(0,x.href.indexOf(":"));return w.indexOf(b)>-1}r.default=p,r.sanitize=y},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},o=function(){function w(x,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,N.key,N)}}return function(x,b,_){return b&&w(x.prototype,b),_&&w(x,_),x}}(),c=i(23),d=h(c),f=i(107),m=h(f);function h(w){return w&&w.__esModule?w:{default:w}}function u(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}var p=0;function y(w,x){w.setAttribute(x,w.getAttribute(x)!=="true")}var v=function(){function w(x){var b=this;u(this,w),this.select=x,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(_){switch(_.keyCode){case d.default.keys.ENTER:b.togglePicker();break;case d.default.keys.ESCAPE:b.escape(),_.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var _=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),b.hasAttribute("value")&&N.setAttribute("data-value",b.getAttribute("value")),b.textContent&&N.setAttribute("data-label",b.textContent),N.addEventListener("click",function(){_.selectItem(N,!0)}),N.addEventListener("keydown",function(C){switch(C.keyCode){case d.default.keys.ENTER:_.selectItem(N,!0),C.preventDefault();break;case d.default.keys.ESCAPE:_.escape(),C.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=m.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,_=document.createElement("span");_.classList.add("ql-picker-options"),_.setAttribute("aria-hidden","true"),_.tabIndex="-1",_.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",_.id),this.options=_,[].slice.call(this.select.options).forEach(function(N){var C=b.buildItem(N);_.appendChild(C),N.selected===!0&&b.selectItem(C)}),this.container.appendChild(_)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(_){b.container.setAttribute(_.name,_.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(b!==N&&(N!=null&&N.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),_))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var C=document.createEvent("Event");C.initEvent("change",!0,!0),this.select.dispatchEvent(C)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var _=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(_)}else this.selectItem(null);var N=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),w}();r.default=v},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=F(a),c=i(5),d=F(c),f=i(4),m=F(f),h=i(16),u=F(h),p=i(25),y=F(p),v=i(24),w=F(v),x=i(35),b=F(x),_=i(6),N=F(_),C=i(22),I=F(C),k=i(7),E=F(k),M=i(55),P=F(M),T=i(42),A=F(T),z=i(23),O=F(z);function F(G){return G&&G.__esModule?G:{default:G}}d.default.register({"blots/block":m.default,"blots/block/embed":f.BlockEmbed,"blots/break":u.default,"blots/container":y.default,"blots/cursor":w.default,"blots/embed":b.default,"blots/inline":N.default,"blots/scroll":I.default,"blots/text":E.default,"modules/clipboard":P.default,"modules/history":A.default,"modules/keyboard":O.default}),o.default.register(m.default,u.default,w.default,N.default,I.default,E.default),r.default=d.default},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=function(){function c(d){this.domNode=d,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(c.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),c.create=function(d){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var f;return Array.isArray(this.tagName)?(typeof d=="string"&&(d=d.toUpperCase(),parseInt(d).toString()===d&&(d=parseInt(d))),typeof d=="number"?f=document.createElement(this.tagName[d-1]):this.tagName.indexOf(d)>-1?f=document.createElement(d):f=document.createElement(this.tagName[0])):f=document.createElement(this.tagName),this.className&&f.classList.add(this.className),f},c.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},c.prototype.clone=function(){var d=this.domNode.cloneNode(!1);return a.create(d)},c.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},c.prototype.deleteAt=function(d,f){var m=this.isolate(d,f);m.remove()},c.prototype.formatAt=function(d,f,m,h){var u=this.isolate(d,f);if(a.query(m,a.Scope.BLOT)!=null&&h)u.wrap(m,h);else if(a.query(m,a.Scope.ATTRIBUTE)!=null){var p=a.create(this.statics.scope);u.wrap(p),p.format(m,h)}},c.prototype.insertAt=function(d,f,m){var h=m==null?a.create("text",f):a.create(f,m),u=this.split(d);this.parent.insertBefore(h,u)},c.prototype.insertInto=function(d,f){f===void 0&&(f=null),this.parent!=null&&this.parent.children.remove(this);var m=null;d.children.insertBefore(this,f),f!=null&&(m=f.domNode),(this.domNode.parentNode!=d.domNode||this.domNode.nextSibling!=m)&&d.domNode.insertBefore(this.domNode,m),this.parent=d,this.attach()},c.prototype.isolate=function(d,f){var m=this.split(d);return m.split(f),m},c.prototype.length=function(){return 1},c.prototype.offset=function(d){return d===void 0&&(d=this.parent),this.parent==null||this==d?0:this.parent.children.offset(this)+this.parent.offset(d)},c.prototype.optimize=function(d){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},c.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},c.prototype.replace=function(d){d.parent!=null&&(d.parent.insertBefore(this,d.next),d.remove())},c.prototype.replaceWith=function(d,f){var m=typeof d=="string"?a.create(d,f):d;return m.replace(this),m},c.prototype.split=function(d,f){return d===0?this:this.next},c.prototype.update=function(d,f){},c.prototype.wrap=function(d,f){var m=typeof d=="string"?a.create(d,f):d;return this.parent!=null&&this.parent.insertBefore(m,this.next),m.appendChild(this),m},c.blotName="abstract",c}();r.default=o},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(12),o=i(32),c=i(33),d=i(1),f=function(){function m(h){this.attributes={},this.domNode=h,this.build()}return m.prototype.attribute=function(h,u){u?h.add(this.domNode,u)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},m.prototype.build=function(){var h=this;this.attributes={};var u=a.default.keys(this.domNode),p=o.default.keys(this.domNode),y=c.default.keys(this.domNode);u.concat(p).concat(y).forEach(function(v){var w=d.query(v,d.Scope.ATTRIBUTE);w instanceof a.default&&(h.attributes[w.attrName]=w)})},m.prototype.copy=function(h){var u=this;Object.keys(this.attributes).forEach(function(p){var y=u.attributes[p].value(u.domNode);h.format(p,y)})},m.prototype.move=function(h){var u=this;this.copy(h),Object.keys(this.attributes).forEach(function(p){u.attributes[p].remove(u.domNode)}),this.attributes={}},m.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(u,p){return u[p]=h.attributes[p].value(h.domNode),u},{})},m}();r.default=f},function(s,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var u in h)h.hasOwnProperty(u)&&(m[u]=h[u])};return function(m,h){f(m,h);function u(){this.constructor=m}m.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function c(f,m){var h=f.getAttribute("class")||"";return h.split(/\s+/).filter(function(u){return u.indexOf(m+"-")===0})}var d=function(f){a(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},m.prototype.add=function(h,u){return this.canAdd(h,u)?(this.remove(h),h.classList.add(this.keyName+"-"+u),!0):!1},m.prototype.remove=function(h){var u=c(h,this.keyName);u.forEach(function(p){h.classList.remove(p)}),h.classList.length===0&&h.removeAttribute("class")},m.prototype.value=function(h){var u=c(h,this.keyName)[0]||"",p=u.slice(this.keyName.length+1);return this.canAdd(h,p)?p:""},m}(o.default);r.default=d},function(s,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var u in h)h.hasOwnProperty(u)&&(m[u]=h[u])};return function(m,h){f(m,h);function u(){this.constructor=m}m.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function c(f){var m=f.split("-"),h=m.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return m[0]+h}var d=function(f){a(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(u){var p=u.split(":");return p[0].trim()})},m.prototype.add=function(h,u){return this.canAdd(h,u)?(h.style[c(this.keyName)]=u,!0):!1},m.prototype.remove=function(h){h.style[c(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},m.prototype.value=function(h){var u=h.style[c(this.keyName)];return this.canAdd(h,u)?u:""},m}(o.default);r.default=d},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function d(f,m){for(var h=0;h<m.length;h++){var u=m[h];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}return function(f,m,h){return m&&d(f.prototype,m),h&&d(f,h),f}}();function o(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}var c=function(){function d(f,m){o(this,d),this.quill=f,this.options=m,this.modules={}}return a(d,[{key:"init",value:function(){var m=this;Object.keys(this.options.modules).forEach(function(h){m.modules[h]==null&&m.addModule(h)})}},{key:"addModule",value:function(m){var h=this.quill.constructor.import("modules/"+m);return this.modules[m]=new h(this.quill,this.options.modules[m]||{}),this.modules[m]}}]),d}();c.DEFAULTS={modules:{}},c.themes={default:c},r.default=c},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function x(b,_){for(var N=0;N<_.length;N++){var C=_[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,_,N){return _&&x(b.prototype,_),N&&x(b,N),b}}(),o=function x(b,_,N){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,_);if(C===void 0){var I=Object.getPrototypeOf(b);return I===null?void 0:x(I,_,N)}else{if("value"in C)return C.value;var k=C.get;return k===void 0?void 0:k.call(N)}},c=i(0),d=h(c),f=i(7),m=h(f);function h(x){return x&&x.__esModule?x:{default:x}}function u(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function p(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function y(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var v="\uFEFF",w=function(x){y(b,x);function b(_){u(this,b);var N=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,_));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(C){N.contentNode.appendChild(C)}),N.leftGuard=document.createTextNode(v),N.rightGuard=document.createTextNode(v),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return a(b,[{key:"index",value:function(N,C){return N===this.leftGuard?0:N===this.rightGuard?1:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,N,C)}},{key:"restore",value:function(N){var C=void 0,I=void 0,k=N.data.split(v).join("");if(N===this.leftGuard)if(this.prev instanceof m.default){var E=this.prev.length();this.prev.insertAt(E,k),C={startNode:this.prev.domNode,startOffset:E+k.length}}else I=document.createTextNode(k),this.parent.insertBefore(d.default.create(I),this),C={startNode:I,startOffset:k.length};else N===this.rightGuard&&(this.next instanceof m.default?(this.next.insertAt(0,k),C={startNode:this.next.domNode,startOffset:k.length}):(I=document.createTextNode(k),this.parent.insertBefore(d.default.create(I),this.next),C={startNode:I,startOffset:k.length}));return N.data=v,C}},{key:"update",value:function(N,C){var I=this;N.forEach(function(k){if(k.type==="characterData"&&(k.target===I.leftGuard||k.target===I.rightGuard)){var E=I.restore(k.target);E&&(C.range=E)}})}}]),b}(d.default.Embed);r.default=w},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var a=i(0),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}var d={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},f=new o.default.Attributor.Attribute("align","align",d),m=new o.default.Attributor.Class("align","ql-align",d),h=new o.default.Attributor.Style("align","text-align",d);r.AlignAttribute=f,r.AlignClass=m,r.AlignStyle=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var a=i(0),o=d(a),c=i(26);function d(h){return h&&h.__esModule?h:{default:h}}var f=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),m=new c.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=f,r.BackgroundStyle=m},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var a=i(0),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}var d={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},f=new o.default.Attributor.Attribute("direction","dir",d),m=new o.default.Attributor.Class("direction","ql-direction",d),h=new o.default.Attributor.Style("direction","direction",d);r.DirectionAttribute=f,r.DirectionClass=m,r.DirectionStyle=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var a=function(){function x(b,_){for(var N=0;N<_.length;N++){var C=_[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,_,N){return _&&x(b.prototype,_),N&&x(b,N),b}}(),o=function x(b,_,N){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,_);if(C===void 0){var I=Object.getPrototypeOf(b);return I===null?void 0:x(I,_,N)}else{if("value"in C)return C.value;var k=C.get;return k===void 0?void 0:k.call(N)}},c=i(0),d=f(c);function f(x){return x&&x.__esModule?x:{default:x}}function m(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function h(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function u(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var p={scope:d.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new d.default.Attributor.Class("font","ql-font",p),v=function(x){u(b,x);function b(){return m(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"value",value:function(N){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),b}(d.default.Attributor.Style),w=new v("font","font-family",p);r.FontStyle=w,r.FontClass=y},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var a=i(0),o=c(a);function c(m){return m&&m.__esModule?m:{default:m}}var d=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),f=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=d,r.SizeStyle=f},function(s,r,i){s.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var a=function(){function _(N,C){for(var I=0;I<C.length;I++){var k=C[I];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(N,k.key,k)}}return function(N,C,I){return C&&_(N.prototype,C),I&&_(N,I),N}}(),o=i(0),c=u(o),d=i(5),f=u(d),m=i(9),h=u(m);function u(_){return _&&_.__esModule?_:{default:_}}function p(_,N){if(!(_ instanceof N))throw new TypeError("Cannot call a class as a function")}function y(_,N){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:_}function v(_,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);_.prototype=Object.create(N&&N.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(_,N):_.__proto__=N)}var w=function(_){v(N,_);function N(C,I){p(this,N);var k=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,C,I));return k.lastRecorded=0,k.ignoreChange=!1,k.clear(),k.quill.on(f.default.events.EDITOR_CHANGE,function(E,M,P,T){E!==f.default.events.TEXT_CHANGE||k.ignoreChange||(!k.options.userOnly||T===f.default.sources.USER?k.record(M,P):k.transform(M))}),k.quill.keyboard.addBinding({key:"Z",shortKey:!0},k.undo.bind(k)),k.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},k.redo.bind(k)),/Win/i.test(navigator.platform)&&k.quill.keyboard.addBinding({key:"Y",shortKey:!0},k.redo.bind(k)),k}return a(N,[{key:"change",value:function(I,k){if(this.stack[I].length!==0){var E=this.stack[I].pop();this.stack[k].push(E),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(E[I],f.default.sources.USER),this.ignoreChange=!1;var M=b(E[I]);this.quill.setSelection(M)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(I,k){if(I.ops.length!==0){this.stack.redo=[];var E=this.quill.getContents().diff(k),M=Date.now();if(this.lastRecorded+this.options.delay>M&&this.stack.undo.length>0){var P=this.stack.undo.pop();E=E.compose(P.undo),I=P.redo.compose(I)}else this.lastRecorded=M;this.stack.undo.push({redo:I,undo:E}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(I){this.stack.undo.forEach(function(k){k.undo=I.transform(k.undo,!0),k.redo=I.transform(k.redo,!0)}),this.stack.redo.forEach(function(k){k.undo=I.transform(k.undo,!0),k.redo=I.transform(k.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N}(h.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function x(_){var N=_.ops[_.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(C){return c.default.query(C,c.default.Scope.BLOCK)!=null}):!1}function b(_){var N=_.reduce(function(I,k){return I+=k.delete||0,I},0),C=_.length()-N;return x(_)&&(C-=1),C}r.default=w,r.getLastChangeIndex=b},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var a=function(){function $(W,Z){for(var X=0;X<Z.length;X++){var V=Z[X];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(W,V.key,V)}}return function(W,Z,X){return Z&&$(W.prototype,Z),X&&$(W,X),W}}(),o=function $(W,Z,X){W===null&&(W=Function.prototype);var V=Object.getOwnPropertyDescriptor(W,Z);if(V===void 0){var H=Object.getPrototypeOf(W);return H===null?void 0:$(H,Z,X)}else{if("value"in V)return V.value;var se=V.get;return se===void 0?void 0:se.call(X)}},c=i(3),d=M(c),f=i(2),m=M(f),h=i(8),u=M(h),p=i(23),y=M(p),v=i(34),w=M(v),x=i(59),b=M(x),_=i(60),N=M(_),C=i(28),I=M(C),k=i(61),E=M(k);function M($){return $&&$.__esModule?$:{default:$}}function P($,W){if(!($ instanceof W))throw new TypeError("Cannot call a class as a function")}function T($,W){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:$}function A($,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);$.prototype=Object.create(W&&W.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf($,W):$.__proto__=W)}var z=[!1,"center","right","justify"],O=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],F=[!1,"serif","monospace"],G=["1","2","3",!1],Y=["small",!1,"large","huge"],K=function($){A(W,$);function W(Z,X){P(this,W);var V=T(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,Z,X)),H=function se(Q){if(!document.body.contains(Z.root))return document.body.removeEventListener("click",se);V.tooltip!=null&&!V.tooltip.root.contains(Q.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(ie){ie.container.contains(Q.target)||ie.close()})};return Z.emitter.listenDOM("click",document.body,H),V}return a(W,[{key:"addModule",value:function(X){var V=o(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"addModule",this).call(this,X);return X==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(X,V){X.forEach(function(H){var se=H.getAttribute("class")||"";se.split(/\s+/).forEach(function(Q){if(Q.startsWith("ql-")&&(Q=Q.slice(3),V[Q]!=null))if(Q==="direction")H.innerHTML=V[Q][""]+V[Q].rtl;else if(typeof V[Q]=="string")H.innerHTML=V[Q];else{var ie=H.value||"";ie!=null&&V[Q][ie]&&(H.innerHTML=V[Q][ie])}})})}},{key:"buildPickers",value:function(X,V){var H=this;this.pickers=X.map(function(Q){if(Q.classList.contains("ql-align"))return Q.querySelector("option")==null&&R(Q,z),new N.default(Q,V.align);if(Q.classList.contains("ql-background")||Q.classList.contains("ql-color")){var ie=Q.classList.contains("ql-background")?"background":"color";return Q.querySelector("option")==null&&R(Q,O,ie==="background"?"#ffffff":"#000000"),new b.default(Q,V[ie])}else return Q.querySelector("option")==null&&(Q.classList.contains("ql-font")?R(Q,F):Q.classList.contains("ql-header")?R(Q,G):Q.classList.contains("ql-size")&&R(Q,Y)),new I.default(Q)});var se=function(){H.pickers.forEach(function(ie){ie.update()})};this.quill.on(u.default.events.EDITOR_CHANGE,se)}}]),W}(w.default);K.DEFAULTS=(0,d.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var W=this,Z=this.container.querySelector("input.ql-image[type=file]");Z==null&&(Z=document.createElement("input"),Z.setAttribute("type","file"),Z.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Z.classList.add("ql-image"),Z.addEventListener("change",function(){if(Z.files!=null&&Z.files[0]!=null){var X=new FileReader;X.onload=function(V){var H=W.quill.getSelection(!0);W.quill.updateContents(new m.default().retain(H.index).delete(H.length).insert({image:V.target.result}),u.default.sources.USER),W.quill.setSelection(H.index+1,u.default.sources.SILENT),Z.value=""},X.readAsDataURL(Z.files[0])}}),this.container.appendChild(Z)),Z.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var U=function($){A(W,$);function W(Z,X){P(this,W);var V=T(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,Z,X));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return a(W,[{key:"listen",value:function(){var X=this;this.textbox.addEventListener("keydown",function(V){y.default.match(V,"enter")?(X.save(),V.preventDefault()):y.default.match(V,"escape")&&(X.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:X!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+X)||""),this.root.setAttribute("data-mode",X)}},{key:"restoreFocus",value:function(){var X=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=X}},{key:"save",value:function(){var X=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",X,u.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",X,u.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":X=B(X);case"formula":{if(!X)break;var H=this.quill.getSelection(!0);if(H!=null){var se=H.index+H.length;this.quill.insertEmbed(se,this.root.getAttribute("data-mode"),X,u.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(se+1," ",u.default.sources.USER),this.quill.setSelection(se+2,u.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),W}(E.default);function B($){var W=$.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||$.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return W?(W[1]||"https")+"://www.youtube.com/embed/"+W[2]+"?showinfo=0":(W=$.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(W[1]||"https")+"://player.vimeo.com/video/"+W[2]+"/":$}function R($,W){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;W.forEach(function(X){var V=document.createElement("option");X===Z?V.setAttribute("selected","selected"):V.setAttribute("value",X),$.appendChild(V)})}r.BaseTooltip=U,r.default=K},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];this.insertBefore(c[0],null),c.length>1&&this.append.apply(this,c.slice(1))},o.prototype.contains=function(c){for(var d,f=this.iterator();d=f();)if(d===c)return!0;return!1},o.prototype.insertBefore=function(c,d){c&&(c.next=d,d!=null?(c.prev=d.prev,d.prev!=null&&(d.prev.next=c),d.prev=c,d===this.head&&(this.head=c)):this.tail!=null?(this.tail.next=c,c.prev=this.tail,this.tail=c):(c.prev=null,this.head=this.tail=c),this.length+=1)},o.prototype.offset=function(c){for(var d=0,f=this.head;f!=null;){if(f===c)return d;d+=f.length(),f=f.next}return-1},o.prototype.remove=function(c){this.contains(c)&&(c.prev!=null&&(c.prev.next=c.next),c.next!=null&&(c.next.prev=c.prev),c===this.head&&(this.head=c.next),c===this.tail&&(this.tail=c.prev),this.length-=1)},o.prototype.iterator=function(c){return c===void 0&&(c=this.head),function(){var d=c;return c!=null&&(c=c.next),d}},o.prototype.find=function(c,d){d===void 0&&(d=!1);for(var f,m=this.iterator();f=m();){var h=f.length();if(c<h||d&&c===h&&(f.next==null||f.next.length()!==0))return[f,c];c-=h}return[null,0]},o.prototype.forEach=function(c){for(var d,f=this.iterator();d=f();)c(d)},o.prototype.forEachAt=function(c,d,f){if(!(d<=0))for(var m=this.find(c),h=m[0],u=m[1],p,y=c-u,v=this.iterator(h);(p=v())&&y<c+d;){var w=p.length();c>y?f(p,c-y,Math.min(d,y+w-c)):f(p,0,Math.min(w,c+d-y)),y+=w}},o.prototype.map=function(c){return this.reduce(function(d,f){return d.push(c(f)),d},[])},o.prototype.reduce=function(c,d){for(var f,m=this.iterator();f=m();)d=c(d,f);return d},o}();r.default=a},function(s,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var y in p)p.hasOwnProperty(y)&&(u[y]=p[y])};return function(u,p){h(u,p);function y(){this.constructor=u}u.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),c=i(1),d={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},f=100,m=function(h){a(u,h);function u(p){var y=h.call(this,p)||this;return y.scroll=y,y.observer=new MutationObserver(function(v){y.update(v)}),y.observer.observe(y.domNode,d),y.attach(),y}return u.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},u.prototype.deleteAt=function(p,y){this.update(),p===0&&y===this.length()?this.children.forEach(function(v){v.remove()}):h.prototype.deleteAt.call(this,p,y)},u.prototype.formatAt=function(p,y,v,w){this.update(),h.prototype.formatAt.call(this,p,y,v,w)},u.prototype.insertAt=function(p,y,v){this.update(),h.prototype.insertAt.call(this,p,y,v)},u.prototype.optimize=function(p,y){var v=this;p===void 0&&(p=[]),y===void 0&&(y={}),h.prototype.optimize.call(this,y);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)p.push(w.pop());for(var x=function(C,I){I===void 0&&(I=!0),!(C==null||C===v)&&C.domNode.parentNode!=null&&(C.domNode[c.DATA_KEY].mutations==null&&(C.domNode[c.DATA_KEY].mutations=[]),I&&x(C.parent))},b=function(C){C.domNode[c.DATA_KEY]==null||C.domNode[c.DATA_KEY].mutations==null||(C instanceof o.default&&C.children.forEach(b),C.optimize(y))},_=p,N=0;_.length>0;N+=1){if(N>=f)throw new Error("[Parchment] Maximum optimize iterations reached");for(_.forEach(function(C){var I=c.find(C.target,!0);I!=null&&(I.domNode===C.target&&(C.type==="childList"?(x(c.find(C.previousSibling,!1)),[].forEach.call(C.addedNodes,function(k){var E=c.find(k,!1);x(E,!1),E instanceof o.default&&E.children.forEach(function(M){x(M,!1)})})):C.type==="attributes"&&x(I.prev)),x(I))}),this.children.forEach(b),_=[].slice.call(this.observer.takeRecords()),w=_.slice();w.length>0;)p.push(w.pop())}},u.prototype.update=function(p,y){var v=this;y===void 0&&(y={}),p=p||this.observer.takeRecords(),p.map(function(w){var x=c.find(w.target,!0);return x==null?null:x.domNode[c.DATA_KEY].mutations==null?(x.domNode[c.DATA_KEY].mutations=[w],x):(x.domNode[c.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===v||w.domNode[c.DATA_KEY]==null||w.update(w.domNode[c.DATA_KEY].mutations||[],y)}),this.domNode[c.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[c.DATA_KEY].mutations,y),this.optimize(p,y)},u.blotName="scroll",u.defaultChild="block",u.scope=c.Scope.BLOCK_BLOT,u.tagName="DIV",u}(o.default);r.default=m},function(s,r,i){var a=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var p in u)u.hasOwnProperty(p)&&(h[p]=u[p])};return function(h,u){m(h,u);function p(){this.constructor=h}h.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),c=i(1);function d(m,h){if(Object.keys(m).length!==Object.keys(h).length)return!1;for(var u in m)if(m[u]!==h[u])return!1;return!0}var f=function(m){a(h,m);function h(){return m!==null&&m.apply(this,arguments)||this}return h.formats=function(u){if(u.tagName!==h.tagName)return m.formats.call(this,u)},h.prototype.format=function(u,p){var y=this;u===this.statics.blotName&&!p?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(h.blotName,!0)),y.attributes.copy(v)}),this.unwrap()):m.prototype.format.call(this,u,p)},h.prototype.formatAt=function(u,p,y,v){if(this.formats()[y]!=null||c.query(y,c.Scope.ATTRIBUTE)){var w=this.isolate(u,p);w.format(y,v)}else m.prototype.formatAt.call(this,u,p,y,v)},h.prototype.optimize=function(u){m.prototype.optimize.call(this,u);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var y=this.next;y instanceof h&&y.prev===this&&d(p,y.formats())&&(y.moveChildren(this),y.remove())},h.blotName="inline",h.scope=c.Scope.INLINE_BLOT,h.tagName="SPAN",h}(o.default);r.default=f},function(s,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var u in h)h.hasOwnProperty(u)&&(m[u]=h[u])};return function(m,h){f(m,h);function u(){this.constructor=m}m.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),c=i(1),d=function(f){a(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.formats=function(h){var u=c.query(m.blotName).tagName;if(h.tagName!==u)return f.formats.call(this,h)},m.prototype.format=function(h,u){c.query(h,c.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!u?this.replaceWith(m.blotName):f.prototype.format.call(this,h,u))},m.prototype.formatAt=function(h,u,p,y){c.query(p,c.Scope.BLOCK)!=null?this.format(p,y):f.prototype.formatAt.call(this,h,u,p,y)},m.prototype.insertAt=function(h,u,p){if(p==null||c.query(u,c.Scope.INLINE)!=null)f.prototype.insertAt.call(this,h,u,p);else{var y=this.split(h),v=c.create(u,p);y.parent.insertBefore(v,y)}},m.prototype.update=function(h,u){navigator.userAgent.match(/Trident/)?this.build():f.prototype.update.call(this,h,u)},m.blotName="block",m.scope=c.Scope.BLOCK_BLOT,m.tagName="P",m}(o.default);r.default=d},function(s,r,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var h in m)m.hasOwnProperty(h)&&(f[h]=m[h])};return function(f,m){d(f,m);function h(){this.constructor=f}f.prototype=m===null?Object.create(m):(h.prototype=m.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),c=function(d){a(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.formats=function(m){},f.prototype.format=function(m,h){d.prototype.formatAt.call(this,0,this.length(),m,h)},f.prototype.formatAt=function(m,h,u,p){m===0&&h===this.length()?this.format(u,p):d.prototype.formatAt.call(this,m,h,u,p)},f.prototype.formats=function(){return this.statics.formats(this.domNode)},f}(o.default);r.default=c},function(s,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,h){m.__proto__=h}||function(m,h){for(var u in h)h.hasOwnProperty(u)&&(m[u]=h[u])};return function(m,h){f(m,h);function u(){this.constructor=m}m.prototype=h===null?Object.create(h):(u.prototype=h.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),c=i(1),d=function(f){a(m,f);function m(h){var u=f.call(this,h)||this;return u.text=u.statics.value(u.domNode),u}return m.create=function(h){return document.createTextNode(h)},m.value=function(h){var u=h.data;return u.normalize&&(u=u.normalize()),u},m.prototype.deleteAt=function(h,u){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+u)},m.prototype.index=function(h,u){return this.domNode===h?u:-1},m.prototype.insertAt=function(h,u,p){p==null?(this.text=this.text.slice(0,h)+u+this.text.slice(h),this.domNode.data=this.text):f.prototype.insertAt.call(this,h,u,p)},m.prototype.length=function(){return this.text.length},m.prototype.optimize=function(h){f.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof m&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},m.prototype.position=function(h,u){return[this.domNode,h]},m.prototype.split=function(h,u){if(u===void 0&&(u=!1),!u){if(h===0)return this;if(h===this.length())return this.next}var p=c.create(this.domNode.splitText(h));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},m.prototype.update=function(h,u){var p=this;h.some(function(y){return y.type==="characterData"&&y.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},m.prototype.value=function(){return this.text},m.blotName="text",m.scope=c.Scope.INLINE_BLOT,m}(o.default);r.default=d},function(s,r,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,d){return arguments.length>1&&!this.contains(c)==!d?d:o.call(this,c)}}String.prototype.startsWith||(String.prototype.startsWith=function(c,d){return d=d||0,this.substr(d,c.length)===c}),String.prototype.endsWith||(String.prototype.endsWith=function(c,d){var f=this.toString();(typeof d!="number"||!isFinite(d)||Math.floor(d)!==d||d>f.length)&&(d=f.length),d-=c.length;var m=f.indexOf(c,d);return m!==-1&&m===d}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("predicate must be a function");for(var f=Object(this),m=f.length>>>0,h=arguments[1],u,p=0;p<m;p++)if(u=f[p],d.call(h,u,p,f))return u}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(s,r){var i=-1,a=1,o=0;function c(N,C,I){if(N==C)return N?[[o,N]]:[];(I<0||N.length<I)&&(I=null);var k=h(N,C),E=N.substring(0,k);N=N.substring(k),C=C.substring(k),k=u(N,C);var M=N.substring(N.length-k);N=N.substring(0,N.length-k),C=C.substring(0,C.length-k);var P=d(N,C);return E&&P.unshift([o,E]),M&&P.push([o,M]),y(P),I!=null&&(P=x(P,I)),P=b(P),P}function d(N,C){var I;if(!N)return[[a,C]];if(!C)return[[i,N]];var k=N.length>C.length?N:C,E=N.length>C.length?C:N,M=k.indexOf(E);if(M!=-1)return I=[[a,k.substring(0,M)],[o,E],[a,k.substring(M+E.length)]],N.length>C.length&&(I[0][0]=I[2][0]=i),I;if(E.length==1)return[[i,N],[a,C]];var P=p(N,C);if(P){var T=P[0],A=P[1],z=P[2],O=P[3],F=P[4],G=c(T,z),Y=c(A,O);return G.concat([[o,F]],Y)}return f(N,C)}function f(N,C){for(var I=N.length,k=C.length,E=Math.ceil((I+k)/2),M=E,P=2*E,T=new Array(P),A=new Array(P),z=0;z<P;z++)T[z]=-1,A[z]=-1;T[M+1]=0,A[M+1]=0;for(var O=I-k,F=O%2!=0,G=0,Y=0,K=0,U=0,B=0;B<E;B++){for(var R=-B+G;R<=B-Y;R+=2){var $=M+R,W;R==-B||R!=B&&T[$-1]<T[$+1]?W=T[$+1]:W=T[$-1]+1;for(var Z=W-R;W<I&&Z<k&&N.charAt(W)==C.charAt(Z);)W++,Z++;if(T[$]=W,W>I)Y+=2;else if(Z>k)G+=2;else if(F){var X=M+O-R;if(X>=0&&X<P&&A[X]!=-1){var V=I-A[X];if(W>=V)return m(N,C,W,Z)}}}for(var H=-B+K;H<=B-U;H+=2){var X=M+H,V;H==-B||H!=B&&A[X-1]<A[X+1]?V=A[X+1]:V=A[X-1]+1;for(var se=V-H;V<I&&se<k&&N.charAt(I-V-1)==C.charAt(k-se-1);)V++,se++;if(A[X]=V,V>I)U+=2;else if(se>k)K+=2;else if(!F){var $=M+O-H;if($>=0&&$<P&&T[$]!=-1){var W=T[$],Z=M+W-$;if(V=I-V,W>=V)return m(N,C,W,Z)}}}}return[[i,N],[a,C]]}function m(N,C,I,k){var E=N.substring(0,I),M=C.substring(0,k),P=N.substring(I),T=C.substring(k),A=c(E,M),z=c(P,T);return A.concat(z)}function h(N,C){if(!N||!C||N.charAt(0)!=C.charAt(0))return 0;for(var I=0,k=Math.min(N.length,C.length),E=k,M=0;I<E;)N.substring(M,E)==C.substring(M,E)?(I=E,M=I):k=E,E=Math.floor((k-I)/2+I);return E}function u(N,C){if(!N||!C||N.charAt(N.length-1)!=C.charAt(C.length-1))return 0;for(var I=0,k=Math.min(N.length,C.length),E=k,M=0;I<E;)N.substring(N.length-E,N.length-M)==C.substring(C.length-E,C.length-M)?(I=E,M=I):k=E,E=Math.floor((k-I)/2+I);return E}function p(N,C){var I=N.length>C.length?N:C,k=N.length>C.length?C:N;if(I.length<4||k.length*2<I.length)return null;function E(Y,K,U){for(var B=Y.substring(U,U+Math.floor(Y.length/4)),R=-1,$="",W,Z,X,V;(R=K.indexOf(B,R+1))!=-1;){var H=h(Y.substring(U),K.substring(R)),se=u(Y.substring(0,U),K.substring(0,R));$.length<se+H&&($=K.substring(R-se,R)+K.substring(R,R+H),W=Y.substring(0,U-se),Z=Y.substring(U+H),X=K.substring(0,R-se),V=K.substring(R+H))}return $.length*2>=Y.length?[W,Z,X,V,$]:null}var M=E(I,k,Math.ceil(I.length/4)),P=E(I,k,Math.ceil(I.length/2)),T;if(!M&&!P)return null;P?M?T=M[4].length>P[4].length?M:P:T=P:T=M;var A,z,O,F;N.length>C.length?(A=T[0],z=T[1],O=T[2],F=T[3]):(O=T[0],F=T[1],A=T[2],z=T[3]);var G=T[4];return[A,z,O,F,G]}function y(N){N.push([o,""]);for(var C=0,I=0,k=0,E="",M="",P;C<N.length;)switch(N[C][0]){case a:k++,M+=N[C][1],C++;break;case i:I++,E+=N[C][1],C++;break;case o:I+k>1?(I!==0&&k!==0&&(P=h(M,E),P!==0&&(C-I-k>0&&N[C-I-k-1][0]==o?N[C-I-k-1][1]+=M.substring(0,P):(N.splice(0,0,[o,M.substring(0,P)]),C++),M=M.substring(P),E=E.substring(P)),P=u(M,E),P!==0&&(N[C][1]=M.substring(M.length-P)+N[C][1],M=M.substring(0,M.length-P),E=E.substring(0,E.length-P))),I===0?N.splice(C-k,I+k,[a,M]):k===0?N.splice(C-I,I+k,[i,E]):N.splice(C-I-k,I+k,[i,E],[a,M]),C=C-I-k+(I?1:0)+(k?1:0)+1):C!==0&&N[C-1][0]==o?(N[C-1][1]+=N[C][1],N.splice(C,1)):C++,k=0,I=0,E="",M="";break}N[N.length-1][1]===""&&N.pop();var T=!1;for(C=1;C<N.length-1;)N[C-1][0]==o&&N[C+1][0]==o&&(N[C][1].substring(N[C][1].length-N[C-1][1].length)==N[C-1][1]?(N[C][1]=N[C-1][1]+N[C][1].substring(0,N[C][1].length-N[C-1][1].length),N[C+1][1]=N[C-1][1]+N[C+1][1],N.splice(C-1,1),T=!0):N[C][1].substring(0,N[C+1][1].length)==N[C+1][1]&&(N[C-1][1]+=N[C+1][1],N[C][1]=N[C][1].substring(N[C+1][1].length)+N[C+1][1],N.splice(C+1,1),T=!0)),C++;T&&y(N)}var v=c;v.INSERT=a,v.DELETE=i,v.EQUAL=o,s.exports=v;function w(N,C){if(C===0)return[o,N];for(var I=0,k=0;k<N.length;k++){var E=N[k];if(E[0]===i||E[0]===o){var M=I+E[1].length;if(C===M)return[k+1,N];if(C<M){N=N.slice();var P=C-I,T=[E[0],E[1].slice(0,P)],A=[E[0],E[1].slice(P)];return N.splice(k,1,T,A),[k+1,N]}else I=M}}throw new Error("cursor_pos is out of bounds!")}function x(N,C){var I=w(N,C),k=I[1],E=I[0],M=k[E],P=k[E+1];if(M==null)return N;if(M[0]!==o)return N;if(P!=null&&M[1]+P[1]===P[1]+M[1])return k.splice(E,2,P,M),_(k,E,2);if(P!=null&&P[1].indexOf(M[1])===0){k.splice(E,2,[P[0],M[1]],[0,M[1]]);var T=P[1].slice(M[1].length);return T.length>0&&k.splice(E+2,0,[P[0],T]),_(k,E,3)}else return N}function b(N){for(var C=!1,I=function(P){return P.charCodeAt(0)>=56320&&P.charCodeAt(0)<=57343},k=function(P){return P.charCodeAt(P.length-1)>=55296&&P.charCodeAt(P.length-1)<=56319},E=2;E<N.length;E+=1)N[E-2][0]===o&&k(N[E-2][1])&&N[E-1][0]===i&&I(N[E-1][1])&&N[E][0]===a&&I(N[E][1])&&(C=!0,N[E-1][1]=N[E-2][1].slice(-1)+N[E-1][1],N[E][1]=N[E-2][1].slice(-1)+N[E][1],N[E-2][1]=N[E-2][1].slice(0,-1));if(!C)return N;for(var M=[],E=0;E<N.length;E+=1)N[E][1].length>0&&M.push(N[E]);return M}function _(N,C,I){for(var k=C+I-1;k>=0&&k>=C-1;k--)if(k+1<N.length){var E=N[k],M=N[k+1];E[0]===M[1]&&N.splice(k,2,[E[0],E[1]+M[1]])}return N}},function(s,r){r=s.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(a){var o=[];for(var c in a)o.push(c);return o}},function(s,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=s.exports=i?a:o,r.supported=a;function a(c){return Object.prototype.toString.call(c)=="[object Arguments]"}r.unsupported=o;function o(c){return c&&typeof c=="object"&&typeof c.length=="number"&&Object.prototype.hasOwnProperty.call(c,"callee")&&!Object.prototype.propertyIsEnumerable.call(c,"callee")||!1}},function(s,r){var i=Object.prototype.hasOwnProperty,a="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(a=!1));function c(f,m,h){this.fn=f,this.context=m,this.once=h||!1}function d(){this._events=new o,this._eventsCount=0}d.prototype.eventNames=function(){var m=[],h,u;if(this._eventsCount===0)return m;for(u in h=this._events)i.call(h,u)&&m.push(a?u.slice(1):u);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(h)):m},d.prototype.listeners=function(m,h){var u=a?a+m:m,p=this._events[u];if(h)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var y=0,v=p.length,w=new Array(v);y<v;y++)w[y]=p[y].fn;return w},d.prototype.emit=function(m,h,u,p,y,v){var w=a?a+m:m;if(!this._events[w])return!1;var x=this._events[w],b=arguments.length,_,N;if(x.fn){switch(x.once&&this.removeListener(m,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,u),!0;case 4:return x.fn.call(x.context,h,u,p),!0;case 5:return x.fn.call(x.context,h,u,p,y),!0;case 6:return x.fn.call(x.context,h,u,p,y,v),!0}for(N=1,_=new Array(b-1);N<b;N++)_[N-1]=arguments[N];x.fn.apply(x.context,_)}else{var C=x.length,I;for(N=0;N<C;N++)switch(x[N].once&&this.removeListener(m,x[N].fn,void 0,!0),b){case 1:x[N].fn.call(x[N].context);break;case 2:x[N].fn.call(x[N].context,h);break;case 3:x[N].fn.call(x[N].context,h,u);break;case 4:x[N].fn.call(x[N].context,h,u,p);break;default:if(!_)for(I=1,_=new Array(b-1);I<b;I++)_[I-1]=arguments[I];x[N].fn.apply(x[N].context,_)}}return!0},d.prototype.on=function(m,h,u){var p=new c(h,u||this),y=a?a+m:m;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],p]:this._events[y].push(p):(this._events[y]=p,this._eventsCount++),this},d.prototype.once=function(m,h,u){var p=new c(h,u||this,!0),y=a?a+m:m;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],p]:this._events[y].push(p):(this._events[y]=p,this._eventsCount++),this},d.prototype.removeListener=function(m,h,u,p){var y=a?a+m:m;if(!this._events[y])return this;if(!h)return--this._eventsCount===0?this._events=new o:delete this._events[y],this;var v=this._events[y];if(v.fn)v.fn===h&&(!p||v.once)&&(!u||v.context===u)&&(--this._eventsCount===0?this._events=new o:delete this._events[y]);else{for(var w=0,x=[],b=v.length;w<b;w++)(v[w].fn!==h||p&&!v[w].once||u&&v[w].context!==u)&&x.push(v[w]);x.length?this._events[y]=x.length===1?x[0]:x:--this._eventsCount===0?this._events=new o:delete this._events[y]}return this},d.prototype.removeAllListeners=function(m){var h;return m?(h=a?a+m:m,this._events[h]&&(--this._eventsCount===0?this._events=new o:delete this._events[h])):(this._events=new o,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prototype.setMaxListeners=function(){return this},d.prefixed=a,d.EventEmitter=d,typeof s<"u"&&(s.exports=d)},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},o=function(){function de(me,ee){var ae=[],oe=!0,be=!1,je=void 0;try{for(var we=me[Symbol.iterator](),re;!(oe=(re=we.next()).done)&&(ae.push(re.value),!(ee&&ae.length===ee));oe=!0);}catch(Ce){be=!0,je=Ce}finally{try{!oe&&we.return&&we.return()}finally{if(be)throw je}}return ae}return function(me,ee){if(Array.isArray(me))return me;if(Symbol.iterator in Object(me))return de(me,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function de(me,ee){for(var ae=0;ae<ee.length;ae++){var oe=ee[ae];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(me,oe.key,oe)}}return function(me,ee,ae){return ee&&de(me.prototype,ee),ae&&de(me,ae),me}}(),d=i(3),f=A(d),m=i(2),h=A(m),u=i(0),p=A(u),y=i(5),v=A(y),w=i(10),x=A(w),b=i(9),_=A(b),N=i(36),C=i(37),I=i(13),k=A(I),E=i(26),M=i(38),P=i(39),T=i(40);function A(de){return de&&de.__esModule?de:{default:de}}function z(de,me,ee){return me in de?Object.defineProperty(de,me,{value:ee,enumerable:!0,configurable:!0,writable:!0}):de[me]=ee,de}function O(de,me){if(!(de instanceof me))throw new TypeError("Cannot call a class as a function")}function F(de,me){if(!de)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return me&&(typeof me=="object"||typeof me=="function")?me:de}function G(de,me){if(typeof me!="function"&&me!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof me);de.prototype=Object.create(me&&me.prototype,{constructor:{value:de,enumerable:!1,writable:!0,configurable:!0}}),me&&(Object.setPrototypeOf?Object.setPrototypeOf(de,me):de.__proto__=me)}var Y=(0,x.default)("quill:clipboard"),K="__ql-matcher",U=[[Node.TEXT_NODE,xe],[Node.TEXT_NODE,Se],["br",he],[Node.ELEMENT_NODE,Se],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,Q],[Node.ELEMENT_NODE,ke],["li",ge],["b",se.bind(se,"bold")],["i",se.bind(se,"italic")],["style",te]],B=[N.AlignAttribute,M.DirectionAttribute].reduce(function(de,me){return de[me.keyName]=me,de},{}),R=[N.AlignStyle,C.BackgroundStyle,E.ColorStyle,M.DirectionStyle,P.FontStyle,T.SizeStyle].reduce(function(de,me){return de[me.keyName]=me,de},{}),$=function(de){G(me,de);function me(ee,ae){O(this,me);var oe=F(this,(me.__proto__||Object.getPrototypeOf(me)).call(this,ee,ae));return oe.quill.root.addEventListener("paste",oe.onPaste.bind(oe)),oe.container=oe.quill.addContainer("ql-clipboard"),oe.container.setAttribute("contenteditable",!0),oe.container.setAttribute("tabindex",-1),oe.matchers=[],U.concat(oe.options.matchers).forEach(function(be){var je=o(be,2),we=je[0],re=je[1];!ae.matchVisual&&re===fe||oe.addMatcher(we,re)}),oe}return c(me,[{key:"addMatcher",value:function(ae,oe){this.matchers.push([ae,oe])}},{key:"convert",value:function(ae){if(typeof ae=="string")return this.container.innerHTML=ae.replace(/\>\r?\n +\</g,"><"),this.convert();var oe=this.quill.getFormat(this.quill.selection.savedRange.index);if(oe[k.default.blotName]){var be=this.container.innerText;return this.container.innerHTML="",new h.default().insert(be,z({},k.default.blotName,oe[k.default.blotName]))}var je=this.prepareMatching(),we=o(je,2),re=we[0],Ce=we[1],Te=H(this.container,re,Ce);return X(Te,`
`)&&Te.ops[Te.ops.length-1].attributes==null&&(Te=Te.compose(new h.default().retain(Te.length()-1).delete(1))),Y.log("convert",this.container.innerHTML,Te),this.container.innerHTML="",Te}},{key:"dangerouslyPasteHTML",value:function(ae,oe){var be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ae=="string")this.quill.setContents(this.convert(ae),oe),this.quill.setSelection(0,v.default.sources.SILENT);else{var je=this.convert(oe);this.quill.updateContents(new h.default().retain(ae).concat(je),be),this.quill.setSelection(ae+je.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ae){var oe=this;if(!(ae.defaultPrevented||!this.quill.isEnabled())){var be=this.quill.getSelection(),je=new h.default().retain(be.index),we=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){je=je.concat(oe.convert()).delete(be.length),oe.quill.updateContents(je,v.default.sources.USER),oe.quill.setSelection(je.length()-be.length,v.default.sources.SILENT),oe.quill.scrollingContainer.scrollTop=we,oe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ae=this,oe=[],be=[];return this.matchers.forEach(function(je){var we=o(je,2),re=we[0],Ce=we[1];switch(re){case Node.TEXT_NODE:be.push(Ce);break;case Node.ELEMENT_NODE:oe.push(Ce);break;default:[].forEach.call(ae.container.querySelectorAll(re),function(Te){Te[K]=Te[K]||[],Te[K].push(Ce)});break}}),[oe,be]}}]),me}(_.default);$.DEFAULTS={matchers:[],matchVisual:!0};function W(de,me,ee){return(typeof me>"u"?"undefined":a(me))==="object"?Object.keys(me).reduce(function(ae,oe){return W(ae,oe,me[oe])},de):de.reduce(function(ae,oe){return oe.attributes&&oe.attributes[me]?ae.push(oe):ae.insert(oe.insert,(0,f.default)({},z({},me,ee),oe.attributes))},new h.default)}function Z(de){if(de.nodeType!==Node.ELEMENT_NODE)return{};var me="__ql-computed-style";return de[me]||(de[me]=window.getComputedStyle(de))}function X(de,me){for(var ee="",ae=de.ops.length-1;ae>=0&&ee.length<me.length;--ae){var oe=de.ops[ae];if(typeof oe.insert!="string")break;ee=oe.insert+ee}return ee.slice(-1*me.length)===me}function V(de){if(de.childNodes.length===0)return!1;var me=Z(de);return["block","list-item"].indexOf(me.display)>-1}function H(de,me,ee){return de.nodeType===de.TEXT_NODE?ee.reduce(function(ae,oe){return oe(de,ae)},new h.default):de.nodeType===de.ELEMENT_NODE?[].reduce.call(de.childNodes||[],function(ae,oe){var be=H(oe,me,ee);return oe.nodeType===de.ELEMENT_NODE&&(be=me.reduce(function(je,we){return we(oe,je)},be),be=(oe[K]||[]).reduce(function(je,we){return we(oe,je)},be)),ae.concat(be)},new h.default):new h.default}function se(de,me,ee){return W(ee,de,!0)}function Q(de,me){var ee=p.default.Attributor.Attribute.keys(de),ae=p.default.Attributor.Class.keys(de),oe=p.default.Attributor.Style.keys(de),be={};return ee.concat(ae).concat(oe).forEach(function(je){var we=p.default.query(je,p.default.Scope.ATTRIBUTE);we!=null&&(be[we.attrName]=we.value(de),be[we.attrName])||(we=B[je],we!=null&&(we.attrName===je||we.keyName===je)&&(be[we.attrName]=we.value(de)||void 0),we=R[je],we!=null&&(we.attrName===je||we.keyName===je)&&(we=R[je],be[we.attrName]=we.value(de)||void 0))}),Object.keys(be).length>0&&(me=W(me,be)),me}function ie(de,me){var ee=p.default.query(de);if(ee==null)return me;if(ee.prototype instanceof p.default.Embed){var ae={},oe=ee.value(de);oe!=null&&(ae[ee.blotName]=oe,me=new h.default().insert(ae,ee.formats(de)))}else typeof ee.formats=="function"&&(me=W(me,ee.blotName,ee.formats(de)));return me}function he(de,me){return X(me,`
`)||me.insert(`
`),me}function te(){return new h.default}function ge(de,me){var ee=p.default.query(de);if(ee==null||ee.blotName!=="list-item"||!X(me,`
`))return me;for(var ae=-1,oe=de.parentNode;!oe.classList.contains("ql-clipboard");)(p.default.query(oe)||{}).blotName==="list"&&(ae+=1),oe=oe.parentNode;return ae<=0?me:me.compose(new h.default().retain(me.length()-1).retain(1,{indent:ae}))}function Se(de,me){return X(me,`
`)||(V(de)||me.length()>0&&de.nextSibling&&V(de.nextSibling))&&me.insert(`
`),me}function fe(de,me){if(V(de)&&de.nextElementSibling!=null&&!X(me,`

`)){var ee=de.offsetHeight+parseFloat(Z(de).marginTop)+parseFloat(Z(de).marginBottom);de.nextElementSibling.offsetTop>de.offsetTop+ee*1.5&&me.insert(`
`)}return me}function ke(de,me){var ee={},ae=de.style||{};return ae.fontStyle&&Z(de).fontStyle==="italic"&&(ee.italic=!0),ae.fontWeight&&(Z(de).fontWeight.startsWith("bold")||parseInt(Z(de).fontWeight)>=700)&&(ee.bold=!0),Object.keys(ee).length>0&&(me=W(me,ee)),parseFloat(ae.textIndent||0)>0&&(me=new h.default().insert("	").concat(me)),me}function xe(de,me){var ee=de.data;if(de.parentNode.tagName==="O:P")return me.insert(ee.trim());if(ee.trim().length===0&&de.parentNode.classList.contains("ql-clipboard"))return me;if(!Z(de.parentNode).whiteSpace.startsWith("pre")){var ae=function(be,je){return je=je.replace(/[^\u00a0]/g,""),je.length<1&&be?" ":je};ee=ee.replace(/\r\n/g," ").replace(/\n/g," "),ee=ee.replace(/\s\s+/g,ae.bind(ae,!0)),(de.previousSibling==null&&V(de.parentNode)||de.previousSibling!=null&&V(de.previousSibling))&&(ee=ee.replace(/^\s+/,ae.bind(ae,!1))),(de.nextSibling==null&&V(de.parentNode)||de.nextSibling!=null&&V(de.nextSibling))&&(ee=ee.replace(/\s+$/,ae.bind(ae,!1)))}return me.insert(ee)}r.default=$,r.matchAttributor=Q,r.matchBlot=ie,r.matchNewline=Se,r.matchSpacing=fe,r.matchText=xe},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function y(v,w){for(var x=0;x<w.length;x++){var b=w[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,x){return w&&y(v.prototype,w),x&&y(v,x),v}}(),o=function y(v,w,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,w,x)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(x)}},c=i(6),d=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function m(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=function(y){u(v,y);function v(){return m(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,[{key:"optimize",value:function(x){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,x),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(d.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var a=function(){function T(A,z){var O=[],F=!0,G=!1,Y=void 0;try{for(var K=A[Symbol.iterator](),U;!(F=(U=K.next()).done)&&(O.push(U.value),!(z&&O.length===z));F=!0);}catch(B){G=!0,Y=B}finally{try{!F&&K.return&&K.return()}finally{if(G)throw Y}}return O}return function(A,z){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return T(A,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function T(A,z){for(var O=0;O<z.length;O++){var F=z[O];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(A,F.key,F)}}return function(A,z,O){return z&&T(A.prototype,z),O&&T(A,O),A}}(),c=i(2),d=x(c),f=i(0),m=x(f),h=i(5),u=x(h),p=i(10),y=x(p),v=i(9),w=x(v);function x(T){return T&&T.__esModule?T:{default:T}}function b(T,A,z){return A in T?Object.defineProperty(T,A,{value:z,enumerable:!0,configurable:!0,writable:!0}):T[A]=z,T}function _(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}function N(T,A){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:T}function C(T,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);T.prototype=Object.create(A&&A.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(T,A):T.__proto__=A)}var I=(0,y.default)("quill:toolbar"),k=function(T){C(A,T);function A(z,O){_(this,A);var F=N(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,z,O));if(Array.isArray(F.options.container)){var G=document.createElement("div");M(G,F.options.container),z.container.parentNode.insertBefore(G,z.container),F.container=G}else typeof F.options.container=="string"?F.container=document.querySelector(F.options.container):F.container=F.options.container;if(!(F.container instanceof HTMLElement)){var Y;return Y=I.error("Container required for toolbar",F.options),N(F,Y)}return F.container.classList.add("ql-toolbar"),F.controls=[],F.handlers={},Object.keys(F.options.handlers).forEach(function(K){F.addHandler(K,F.options.handlers[K])}),[].forEach.call(F.container.querySelectorAll("button, select"),function(K){F.attach(K)}),F.quill.on(u.default.events.EDITOR_CHANGE,function(K,U){K===u.default.events.SELECTION_CHANGE&&F.update(U)}),F.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){var K=F.quill.selection.getRange(),U=a(K,1),B=U[0];F.update(B)}),F}return o(A,[{key:"addHandler",value:function(O,F){this.handlers[O]=F}},{key:"attach",value:function(O){var F=this,G=[].find.call(O.classList,function(K){return K.indexOf("ql-")===0});if(G){if(G=G.slice(3),O.tagName==="BUTTON"&&O.setAttribute("type","button"),this.handlers[G]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[G]==null){I.warn("ignoring attaching to disabled format",G,O);return}if(m.default.query(G)==null){I.warn("ignoring attaching to nonexistent format",G,O);return}}var Y=O.tagName==="SELECT"?"change":"click";O.addEventListener(Y,function(K){var U=void 0;if(O.tagName==="SELECT"){if(O.selectedIndex<0)return;var B=O.options[O.selectedIndex];B.hasAttribute("selected")?U=!1:U=B.value||!1}else O.classList.contains("ql-active")?U=!1:U=O.value||!O.hasAttribute("value"),K.preventDefault();F.quill.focus();var R=F.quill.selection.getRange(),$=a(R,1),W=$[0];if(F.handlers[G]!=null)F.handlers[G].call(F,U);else if(m.default.query(G).prototype instanceof m.default.Embed){if(U=prompt("Enter "+G),!U)return;F.quill.updateContents(new d.default().retain(W.index).delete(W.length).insert(b({},G,U)),u.default.sources.USER)}else F.quill.format(G,U,u.default.sources.USER);F.update(W)}),this.controls.push([G,O])}}},{key:"update",value:function(O){var F=O==null?{}:this.quill.getFormat(O);this.controls.forEach(function(G){var Y=a(G,2),K=Y[0],U=Y[1];if(U.tagName==="SELECT"){var B=void 0;if(O==null)B=null;else if(F[K]==null)B=U.querySelector("option[selected]");else if(!Array.isArray(F[K])){var R=F[K];typeof R=="string"&&(R=R.replace(/\"/g,'\\"')),B=U.querySelector('option[value="'+R+'"]')}B==null?(U.value="",U.selectedIndex=-1):B.selected=!0}else if(O==null)U.classList.remove("ql-active");else if(U.hasAttribute("value")){var $=F[K]===U.getAttribute("value")||F[K]!=null&&F[K].toString()===U.getAttribute("value")||F[K]==null&&!U.getAttribute("value");U.classList.toggle("ql-active",$)}else U.classList.toggle("ql-active",F[K]!=null)})}}]),A}(w.default);k.DEFAULTS={};function E(T,A,z){var O=document.createElement("button");O.setAttribute("type","button"),O.classList.add("ql-"+A),z!=null&&(O.value=z),T.appendChild(O)}function M(T,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(z){var O=document.createElement("span");O.classList.add("ql-formats"),z.forEach(function(F){if(typeof F=="string")E(O,F);else{var G=Object.keys(F)[0],Y=F[G];Array.isArray(Y)?P(O,G,Y):E(O,G,Y)}}),T.appendChild(O)})}function P(T,A,z){var O=document.createElement("select");O.classList.add("ql-"+A),z.forEach(function(F){var G=document.createElement("option");F!==!1?G.setAttribute("value",F):G.setAttribute("selected","selected"),O.appendChild(G)}),T.appendChild(O)}k.DEFAULTS={container:null,handlers:{clean:function(){var A=this,z=this.quill.getSelection();if(z!=null)if(z.length==0){var O=this.quill.getFormat();Object.keys(O).forEach(function(F){m.default.query(F,m.default.Scope.INLINE)!=null&&A.quill.format(F,!1)})}else this.quill.removeFormat(z,u.default.sources.USER)},direction:function(A){var z=this.quill.getFormat().align;A==="rtl"&&z==null?this.quill.format("align","right",u.default.sources.USER):!A&&z==="right"&&this.quill.format("align",!1,u.default.sources.USER),this.quill.format("direction",A,u.default.sources.USER)},indent:function(A){var z=this.quill.getSelection(),O=this.quill.getFormat(z),F=parseInt(O.indent||0);if(A==="+1"||A==="-1"){var G=A==="+1"?1:-1;O.direction==="rtl"&&(G*=-1),this.quill.format("indent",F+G,u.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,u.default.sources.USER)},list:function(A){var z=this.quill.getSelection(),O=this.quill.getFormat(z);A==="check"?O.list==="checked"||O.list==="unchecked"?this.quill.format("list",!1,u.default.sources.USER):this.quill.format("list","unchecked",u.default.sources.USER):this.quill.format("list",A,u.default.sources.USER)}}},r.default=k,r.addControls=M},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function y(v,w){for(var x=0;x<w.length;x++){var b=w[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,x){return w&&y(v.prototype,w),x&&y(v,x),v}}(),o=function y(v,w,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,w,x)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(x)}},c=i(28),d=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function m(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=function(y){u(v,y);function v(w,x){m(this,v);var b=h(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,w));return b.label.innerHTML=x,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(_){_.classList.add("ql-primary")}),b}return a(v,[{key:"buildItem",value:function(x){var b=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,x);return b.style.backgroundColor=x.getAttribute("value")||"",b}},{key:"selectItem",value:function(x,b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,x,b);var _=this.label.querySelector(".ql-color-label"),N=x&&x.getAttribute("data-value")||"";_&&(_.tagName==="line"?_.style.stroke=N:_.style.fill=N)}}]),v}(d.default);r.default=p},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function y(v,w){for(var x=0;x<w.length;x++){var b=w[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,x){return w&&y(v.prototype,w),x&&y(v,x),v}}(),o=function y(v,w,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,w,x)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(x)}},c=i(28),d=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function m(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=function(y){u(v,y);function v(w,x){m(this,v);var b=h(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,w));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(_){_.innerHTML=x[_.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return a(v,[{key:"selectItem",value:function(x,b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,x,b),x=x||this.defaultItem,this.label.innerHTML=x.innerHTML}}]),v}(d.default);r.default=p},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function d(f,m){for(var h=0;h<m.length;h++){var u=m[h];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}return function(f,m,h){return m&&d(f.prototype,m),h&&d(f,h),f}}();function o(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}var c=function(){function d(f,m){var h=this;o(this,d),this.quill=f,this.boundsContainer=m||document.body,this.root=f.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return a(d,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(m){var h=m.left+m.width/2-this.root.offsetWidth/2,u=m.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=u+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),v=0;if(y.right>p.right&&(v=p.right-y.right,this.root.style.left=h+v+"px"),y.left<p.left&&(v=p.left-y.left,this.root.style.left=h+v+"px"),y.bottom>p.bottom){var w=y.bottom-y.top,x=m.bottom-m.top+w;this.root.style.top=u-x+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),d}();r.default=c},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function P(T,A){var z=[],O=!0,F=!1,G=void 0;try{for(var Y=T[Symbol.iterator](),K;!(O=(K=Y.next()).done)&&(z.push(K.value),!(A&&z.length===A));O=!0);}catch(U){F=!0,G=U}finally{try{!O&&Y.return&&Y.return()}finally{if(F)throw G}}return z}return function(T,A){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return P(T,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function P(T,A,z){T===null&&(T=Function.prototype);var O=Object.getOwnPropertyDescriptor(T,A);if(O===void 0){var F=Object.getPrototypeOf(T);return F===null?void 0:P(F,A,z)}else{if("value"in O)return O.value;var G=O.get;return G===void 0?void 0:G.call(z)}},c=function(){function P(T,A){for(var z=0;z<A.length;z++){var O=A[z];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(T,O.key,O)}}return function(T,A,z){return A&&P(T.prototype,A),z&&P(T,z),T}}(),d=i(3),f=_(d),m=i(8),h=_(m),u=i(43),p=_(u),y=i(27),v=_(y),w=i(15),x=i(41),b=_(x);function _(P){return P&&P.__esModule?P:{default:P}}function N(P,T){if(!(P instanceof T))throw new TypeError("Cannot call a class as a function")}function C(P,T){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:P}function I(P,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);P.prototype=Object.create(T&&T.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(P,T):P.__proto__=T)}var k=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],E=function(P){I(T,P);function T(A,z){N(this,T),z.modules.toolbar!=null&&z.modules.toolbar.container==null&&(z.modules.toolbar.container=k);var O=C(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,A,z));return O.quill.container.classList.add("ql-snow"),O}return c(T,[{key:"extendToolbar",value:function(z){z.container.classList.add("ql-snow"),this.buildButtons([].slice.call(z.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(z.container.querySelectorAll("select")),b.default),this.tooltip=new M(this.quill,this.options.bounds),z.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(O,F){z.handlers.link.call(z,!F.format.link)})}}]),T}(p.default);E.DEFAULTS=(0,f.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){if(T){var A=this.quill.getSelection();if(A==null||A.length==0)return;var z=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(z)&&z.indexOf("mailto:")!==0&&(z="mailto:"+z);var O=this.quill.theme.tooltip;O.edit("link",z)}else this.quill.format("link",!1)}}}}});var M=function(P){I(T,P);function T(A,z){N(this,T);var O=C(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,A,z));return O.preview=O.root.querySelector("a.ql-preview"),O}return c(T,[{key:"listen",value:function(){var z=this;o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(O){z.root.classList.contains("ql-editing")?z.save():z.edit("link",z.preview.textContent),O.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(O){if(z.linkRange!=null){var F=z.linkRange;z.restoreFocus(),z.quill.formatText(F,"link",!1,h.default.sources.USER),delete z.linkRange}O.preventDefault(),z.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(O,F,G){if(O!=null){if(O.length===0&&G===h.default.sources.USER){var Y=z.quill.scroll.descendant(v.default,O.index),K=a(Y,2),U=K[0],B=K[1];if(U!=null){z.linkRange=new w.Range(O.index-B,U.length());var R=v.default.formats(U.domNode);z.preview.textContent=R,z.preview.setAttribute("href",R),z.show(),z.position(z.quill.getBounds(z.linkRange));return}}else delete z.linkRange;z.hide()}})}},{key:"show",value:function(){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),T}(u.BaseTooltip);M.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=E},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(29),o=oe(a),c=i(36),d=i(38),f=i(64),m=i(65),h=oe(m),u=i(66),p=oe(u),y=i(67),v=oe(y),w=i(37),x=i(26),b=i(39),_=i(40),N=i(56),C=oe(N),I=i(68),k=oe(I),E=i(27),M=oe(E),P=i(69),T=oe(P),A=i(70),z=oe(A),O=i(71),F=oe(O),G=i(72),Y=oe(G),K=i(73),U=oe(K),B=i(13),R=oe(B),$=i(74),W=oe($),Z=i(75),X=oe(Z),V=i(57),H=oe(V),se=i(41),Q=oe(se),ie=i(28),he=oe(ie),te=i(59),ge=oe(te),Se=i(60),fe=oe(Se),ke=i(61),xe=oe(ke),de=i(108),me=oe(de),ee=i(62),ae=oe(ee);function oe(be){return be&&be.__esModule?be:{default:be}}o.default.register({"attributors/attribute/direction":d.DirectionAttribute,"attributors/class/align":c.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":x.ColorClass,"attributors/class/direction":d.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":_.SizeClass,"attributors/style/align":c.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":x.ColorStyle,"attributors/style/direction":d.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":_.SizeStyle},!0),o.default.register({"formats/align":c.AlignClass,"formats/direction":d.DirectionClass,"formats/indent":f.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":x.ColorStyle,"formats/font":b.FontClass,"formats/size":_.SizeClass,"formats/blockquote":h.default,"formats/code-block":R.default,"formats/header":p.default,"formats/list":v.default,"formats/bold":C.default,"formats/code":B.Code,"formats/italic":k.default,"formats/link":M.default,"formats/script":T.default,"formats/strike":z.default,"formats/underline":F.default,"formats/image":Y.default,"formats/video":U.default,"formats/list/item":y.ListItem,"modules/formula":W.default,"modules/syntax":X.default,"modules/toolbar":H.default,"themes/bubble":me.default,"themes/snow":ae.default,"ui/icons":Q.default,"ui/picker":he.default,"ui/icon-picker":fe.default,"ui/color-picker":ge.default,"ui/tooltip":xe.default},!0),r.default=o.default},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var a=function(){function v(w,x){for(var b=0;b<x.length;b++){var _=x[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}return function(w,x,b){return x&&v(w.prototype,x),b&&v(w,b),w}}(),o=function v(w,x,b){w===null&&(w=Function.prototype);var _=Object.getOwnPropertyDescriptor(w,x);if(_===void 0){var N=Object.getPrototypeOf(w);return N===null?void 0:v(N,x,b)}else{if("value"in _)return _.value;var C=_.get;return C===void 0?void 0:C.call(b)}},c=i(0),d=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function m(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")}function h(v,w){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:v}function u(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);v.prototype=Object.create(w&&w.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(v,w):v.__proto__=w)}var p=function(v){u(w,v);function w(){return m(this,w),h(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,[{key:"add",value:function(b,_){if(_==="+1"||_==="-1"){var N=this.value(b)||0;_=_==="+1"?N+1:N-1}return _===0?(this.remove(b),!0):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,b,_)}},{key:"canAdd",value:function(b,_){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,b,_)||o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,b,parseInt(_))}},{key:"value",value:function(b){return parseInt(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,b))||void 0}}]),w}(d.default.Attributor.Class),y=new p("indent","ql-indent",{scope:d.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=y},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(4),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function m(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var h=function(u){m(p,u);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);h.blotName="blockquote",h.tagName="blockquote",r.default=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function p(y,v){for(var w=0;w<v.length;w++){var x=v[w];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}return function(y,v,w){return v&&p(y.prototype,v),w&&p(y,w),y}}(),o=i(4),c=d(o);function d(p){return p&&p.__esModule?p:{default:p}}function f(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function m(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function h(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var u=function(p){h(y,p);function y(){return f(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),y}(c.default);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],r.default=u},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var a=function(){function N(C,I){for(var k=0;k<I.length;k++){var E=I[k];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(C,E.key,E)}}return function(C,I,k){return I&&N(C.prototype,I),k&&N(C,k),C}}(),o=function N(C,I,k){C===null&&(C=Function.prototype);var E=Object.getOwnPropertyDescriptor(C,I);if(E===void 0){var M=Object.getPrototypeOf(C);return M===null?void 0:N(M,I,k)}else{if("value"in E)return E.value;var P=E.get;return P===void 0?void 0:P.call(k)}},c=i(0),d=p(c),f=i(4),m=p(f),h=i(25),u=p(h);function p(N){return N&&N.__esModule?N:{default:N}}function y(N,C,I){return C in N?Object.defineProperty(N,C,{value:I,enumerable:!0,configurable:!0,writable:!0}):N[C]=I,N}function v(N,C){if(!(N instanceof C))throw new TypeError("Cannot call a class as a function")}function w(N,C){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:N}function x(N,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);N.prototype=Object.create(C&&C.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(N,C):N.__proto__=C)}var b=function(N){x(C,N);function C(){return v(this,C),w(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return a(C,[{key:"format",value:function(k,E){k===_.blotName&&!E?this.replaceWith(d.default.create(this.statics.scope)):o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"format",this).call(this,k,E)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(k,E){return this.parent.isolate(this.offset(this.parent),this.length()),k===this.parent.statics.blotName?(this.parent.replaceWith(k,E),this):(this.parent.unwrap(),o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replaceWith",this).call(this,k,E))}}],[{key:"formats",value:function(k){return k.tagName===this.tagName?void 0:o(C.__proto__||Object.getPrototypeOf(C),"formats",this).call(this,k)}}]),C}(m.default);b.blotName="list-item",b.tagName="LI";var _=function(N){x(C,N),a(C,null,[{key:"create",value:function(k){var E=k==="ordered"?"OL":"UL",M=o(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this,E);return(k==="checked"||k==="unchecked")&&M.setAttribute("data-checked",k==="checked"),M}},{key:"formats",value:function(k){if(k.tagName==="OL")return"ordered";if(k.tagName==="UL")return k.hasAttribute("data-checked")?k.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function C(I){v(this,C);var k=w(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,I)),E=function(P){if(P.target.parentNode===I){var T=k.statics.formats(I),A=d.default.find(P.target);T==="checked"?A.format("list","unchecked"):T==="unchecked"&&A.format("list","checked")}};return I.addEventListener("touchstart",E),I.addEventListener("mousedown",E),k}return a(C,[{key:"format",value:function(k,E){this.children.length>0&&this.children.tail.format(k,E)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(k,E){if(k instanceof b)o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,k,E);else{var M=E==null?this.length():E.offset(this),P=this.split(M);P.parent.insertBefore(k,P)}}},{key:"optimize",value:function(k){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,k);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&E.domNode.tagName===this.domNode.tagName&&E.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(E.moveChildren(this),E.remove())}},{key:"replace",value:function(k){if(k.statics.blotName!==this.statics.blotName){var E=d.default.create(this.statics.defaultChild);k.moveChildren(E),this.appendChild(E)}o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replace",this).call(this,k)}}]),C}(u.default);_.blotName="list",_.scope=d.default.Scope.BLOCK_BLOT,_.tagName=["OL","UL"],_.defaultChild="list-item",_.allowedChildren=[b],r.ListItem=b,r.default=_},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(56),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function m(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var h=function(u){m(p,u);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);h.blotName="italic",h.tagName=["EM","I"],r.default=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function y(v,w){for(var x=0;x<w.length;x++){var b=w[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,w,x){return w&&y(v.prototype,w),x&&y(v,x),v}}(),o=function y(v,w,x){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,w);if(b===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:y(_,w,x)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(x)}},c=i(6),d=f(c);function f(y){return y&&y.__esModule?y:{default:y}}function m(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function h(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function u(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=function(y){u(v,y);function v(){return m(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return a(v,null,[{key:"create",value:function(x){return x==="super"?document.createElement("sup"):x==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,x)}},{key:"formats",value:function(x){if(x.tagName==="SUB")return"sub";if(x.tagName==="SUP")return"super"}}]),v}(d.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function m(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var h=function(u){m(p,u);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);h.blotName="strike",h.tagName="S",r.default=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=c(a);function c(u){return u&&u.__esModule?u:{default:u}}function d(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}function f(u,p){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:u}function m(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(u,p):u.__proto__=p)}var h=function(u){m(p,u);function p(){return d(this,p),f(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);h.blotName="underline",h.tagName="U",r.default=h},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(x,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,N.key,N)}}return function(x,b,_){return b&&w(x.prototype,b),_&&w(x,_),x}}(),o=function w(x,b,_){x===null&&(x=Function.prototype);var N=Object.getOwnPropertyDescriptor(x,b);if(N===void 0){var C=Object.getPrototypeOf(x);return C===null?void 0:w(C,b,_)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(_)}},c=i(0),d=m(c),f=i(27);function m(w){return w&&w.__esModule?w:{default:w}}function h(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}function u(w,x){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:w}function p(w,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(w,x):w.__proto__=x)}var y=["alt","height","width"],v=function(w){p(x,w);function x(){return h(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return a(x,[{key:"format",value:function(_,N){y.indexOf(_)>-1?N?this.domNode.setAttribute(_,N):this.domNode.removeAttribute(_):o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,_,N)}}],[{key:"create",value:function(_){var N=o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,_);return typeof _=="string"&&N.setAttribute("src",this.sanitize(_)),N}},{key:"formats",value:function(_){return y.reduce(function(N,C){return _.hasAttribute(C)&&(N[C]=_.getAttribute(C)),N},{})}},{key:"match",value:function(_){return/\.(jpe?g|gif|png)$/.test(_)||/^data:image\/.+;base64/.test(_)}},{key:"sanitize",value:function(_){return(0,f.sanitize)(_,["http","https","data"])?_:"//:0"}},{key:"value",value:function(_){return _.getAttribute("src")}}]),x}(d.default.Embed);v.blotName="image",v.tagName="IMG",r.default=v},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(x,b){for(var _=0;_<b.length;_++){var N=b[_];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(x,N.key,N)}}return function(x,b,_){return b&&w(x.prototype,b),_&&w(x,_),x}}(),o=function w(x,b,_){x===null&&(x=Function.prototype);var N=Object.getOwnPropertyDescriptor(x,b);if(N===void 0){var C=Object.getPrototypeOf(x);return C===null?void 0:w(C,b,_)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(_)}},c=i(4),d=i(27),f=m(d);function m(w){return w&&w.__esModule?w:{default:w}}function h(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}function u(w,x){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:w}function p(w,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);w.prototype=Object.create(x&&x.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(w,x):w.__proto__=x)}var y=["height","width"],v=function(w){p(x,w);function x(){return h(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return a(x,[{key:"format",value:function(_,N){y.indexOf(_)>-1?N?this.domNode.setAttribute(_,N):this.domNode.removeAttribute(_):o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,_,N)}}],[{key:"create",value:function(_){var N=o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,_);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(_)),N}},{key:"formats",value:function(_){return y.reduce(function(N,C){return _.hasAttribute(C)&&(N[C]=_.getAttribute(C)),N},{})}},{key:"sanitize",value:function(_){return f.default.sanitize(_)}},{key:"value",value:function(_){return _.getAttribute("src")}}]),x}(c.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",r.default=v},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var a=function(){function _(N,C){for(var I=0;I<C.length;I++){var k=C[I];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(N,k.key,k)}}return function(N,C,I){return C&&_(N.prototype,C),I&&_(N,I),N}}(),o=function _(N,C,I){N===null&&(N=Function.prototype);var k=Object.getOwnPropertyDescriptor(N,C);if(k===void 0){var E=Object.getPrototypeOf(N);return E===null?void 0:_(E,C,I)}else{if("value"in k)return k.value;var M=k.get;return M===void 0?void 0:M.call(I)}},c=i(35),d=p(c),f=i(5),m=p(f),h=i(9),u=p(h);function p(_){return _&&_.__esModule?_:{default:_}}function y(_,N){if(!(_ instanceof N))throw new TypeError("Cannot call a class as a function")}function v(_,N){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:_}function w(_,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);_.prototype=Object.create(N&&N.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(_,N):_.__proto__=N)}var x=function(_){w(N,_);function N(){return y(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return a(N,null,[{key:"create",value:function(I){var k=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,I);return typeof I=="string"&&(window.katex.render(I,k,{throwOnError:!1,errorColor:"#f00"}),k.setAttribute("data-value",I)),k}},{key:"value",value:function(I){return I.getAttribute("data-value")}}]),N}(d.default);x.blotName="formula",x.className="ql-formula",x.tagName="SPAN";var b=function(_){w(N,_),a(N,null,[{key:"register",value:function(){m.default.register(x,!0)}}]);function N(){y(this,N);var C=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return C}return N}(u.default);r.FormulaBlot=x,r.default=b},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var a=function(){function I(k,E){for(var M=0;M<E.length;M++){var P=E[M];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(k,P.key,P)}}return function(k,E,M){return E&&I(k.prototype,E),M&&I(k,M),k}}(),o=function I(k,E,M){k===null&&(k=Function.prototype);var P=Object.getOwnPropertyDescriptor(k,E);if(P===void 0){var T=Object.getPrototypeOf(k);return T===null?void 0:I(T,E,M)}else{if("value"in P)return P.value;var A=P.get;return A===void 0?void 0:A.call(M)}},c=i(0),d=v(c),f=i(5),m=v(f),h=i(9),u=v(h),p=i(13),y=v(p);function v(I){return I&&I.__esModule?I:{default:I}}function w(I,k){if(!(I instanceof k))throw new TypeError("Cannot call a class as a function")}function x(I,k){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:I}function b(I,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);I.prototype=Object.create(k&&k.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(I,k):I.__proto__=k)}var _=function(I){b(k,I);function k(){return w(this,k),x(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return a(k,[{key:"replaceWith",value:function(M){this.domNode.textContent=this.domNode.textContent,this.attach(),o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"replaceWith",this).call(this,M)}},{key:"highlight",value:function(M){var P=this.domNode.textContent;this.cachedText!==P&&((P.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=M(P),this.domNode.normalize(),this.attach()),this.cachedText=P)}}]),k}(y.default);_.className="ql-syntax";var N=new d.default.Attributor.Class("token","hljs",{scope:d.default.Scope.INLINE}),C=function(I){b(k,I),a(k,null,[{key:"register",value:function(){m.default.register(N,!0),m.default.register(_,!0)}}]);function k(E,M){w(this,k);var P=x(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,E,M));if(typeof P.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var T=null;return P.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(T),T=setTimeout(function(){P.highlight(),T=null},P.options.interval)}),P.highlight(),P}return a(k,[{key:"highlight",value:function(){var M=this;if(!this.quill.selection.composing){this.quill.update(m.default.sources.USER);var P=this.quill.getSelection();this.quill.scroll.descendants(_).forEach(function(T){T.highlight(M.options.highlight)}),this.quill.update(m.default.sources.SILENT),P!=null&&this.quill.setSelection(P,m.default.sources.SILENT)}}}]),k}(u.default);C.DEFAULTS={highlight:function(){return window.hljs==null?null:function(I){var k=window.hljs.highlightAuto(I);return k.value}}(),interval:1e3},r.CodeBlock=_,r.CodeToken=N,r.default=C},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(s,r){s.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(s,r){s.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(s,r){s.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(s,r){s.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(s,r){s.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(s,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var a=function k(E,M,P){E===null&&(E=Function.prototype);var T=Object.getOwnPropertyDescriptor(E,M);if(T===void 0){var A=Object.getPrototypeOf(E);return A===null?void 0:k(A,M,P)}else{if("value"in T)return T.value;var z=T.get;return z===void 0?void 0:z.call(P)}},o=function(){function k(E,M){for(var P=0;P<M.length;P++){var T=M[P];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}return function(E,M,P){return M&&k(E.prototype,M),P&&k(E,P),E}}(),c=i(3),d=w(c),f=i(8),m=w(f),h=i(43),u=w(h),p=i(15),y=i(41),v=w(y);function w(k){return k&&k.__esModule?k:{default:k}}function x(k,E){if(!(k instanceof E))throw new TypeError("Cannot call a class as a function")}function b(k,E){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:k}function _(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);k.prototype=Object.create(E&&E.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(k,E):k.__proto__=E)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],C=function(k){_(E,k);function E(M,P){x(this,E),P.modules.toolbar!=null&&P.modules.toolbar.container==null&&(P.modules.toolbar.container=N);var T=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,M,P));return T.quill.container.classList.add("ql-bubble"),T}return o(E,[{key:"extendToolbar",value:function(P){this.tooltip=new I(this.quill,this.options.bounds),this.tooltip.root.appendChild(P.container),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),v.default)}}]),E}(u.default);C.DEFAULTS=(0,d.default)(!0,{},u.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){E?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var I=function(k){_(E,k);function E(M,P){x(this,E);var T=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,M,P));return T.quill.on(m.default.events.EDITOR_CHANGE,function(A,z,O,F){if(A===m.default.events.SELECTION_CHANGE)if(z!=null&&z.length>0&&F===m.default.sources.USER){T.show(),T.root.style.left="0px",T.root.style.width="",T.root.style.width=T.root.offsetWidth+"px";var G=T.quill.getLines(z.index,z.length);if(G.length===1)T.position(T.quill.getBounds(z));else{var Y=G[G.length-1],K=T.quill.getIndex(Y),U=Math.min(Y.length()-1,z.index+z.length-K),B=T.quill.getBounds(new p.Range(K,U));T.position(B)}}else document.activeElement!==T.textbox&&T.quill.hasFocus()&&T.hide()}),T}return o(E,[{key:"listen",value:function(){var P=this;a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){P.root.classList.remove("ql-editing")}),this.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!P.root.classList.contains("ql-hidden")){var T=P.quill.getSelection();T!=null&&P.position(P.quill.getBounds(T))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(P){var T=a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"position",this).call(this,P),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",T===0)return T;A.style.marginLeft=-1*T-A.offsetWidth/2+"px"}}]),E}(h.BaseTooltip);I.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=I,r.default=C},function(s,r,i){s.exports=i(63)}]).default})})(E4);var gne=E4.exports,vne=vi&&vi.__extends||function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},e(t,s)};return function(t,s){e(t,s);function r(){this.constructor=t}t.prototype=s===null?Object.create(s):(r.prototype=s.prototype,new r)}}(),Rm=vi&&vi.__assign||function(){return Rm=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Rm.apply(this,arguments)},xne=vi&&vi.__spreadArrays||function(){for(var e=0,t=0,s=arguments.length;t<s;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<s;t++)for(var a=arguments[t],o=0,c=a.length;o<c;o++,i++)r[i]=a[o];return r},Gp=vi&&vi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Jr=Gp(j),yne=Gp(eo),Cd=Gp(pne),f2=Gp(gne),bne=function(e){vne(t,e);function t(s){var r=e.call(this,s)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(a,o,c,d){var f,m,h,u;a==="text-change"?(m=(f=r).onEditorChangeText)===null||m===void 0||m.call(f,r.editor.root.innerHTML,o,d,r.unprivilegedEditor):a==="selection-change"&&((u=(h=r).onEditorChangeSelection)===null||u===void 0||u.call(h,o,d,r.unprivilegedEditor))};var i=r.isControlled()?s.value:s.defaultValue;return r.value=i??"",r}return t.prototype.validateProps=function(s){var r;if(Jr.default.Children.count(s.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Jr.default.Children.count(s.children)){var i=Jr.default.Children.only(s.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&s.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(s,r){var i=this,a;if(this.validateProps(s),!this.editor||this.state.generation!==r.generation)return!0;if("value"in s){var o=this.getEditorContents(),c=(a=s.value,a??"");this.isEqualValue(c,o)||this.setEditorContents(this.editor,c)}return s.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,s.readOnly),xne(this.cleanProps,this.dirtyProps).some(function(d){return!Cd.default(s[d],i.props[d])})},t.prototype.shouldComponentRegenerate=function(s){var r=this;return this.dirtyProps.some(function(i){return!Cd.default(s[i],r.props[i])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(s,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(s)){var a=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:a,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var c=this.regenerationSnapshot,a=c.delta,d=c.selection;delete this.regenerationSnapshot,this.instantiateEditor();var f=this.editor;f.setContents(a),m2(function(){return i.setEditorSelection(f,d)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(s,r){var i=new f2.default(s,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},t.prototype.hookEditor=function(s){this.unprivilegedEditor=this.makeUnprivilegedEditor(s),s.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(s){s.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(s){return s&&s.ops},t.prototype.isEqualValue=function(s,r){return this.isDelta(s)&&this.isDelta(r)?Cd.default(s.ops,r.ops):Cd.default(s,r)},t.prototype.setEditorContents=function(s,r){var i=this;this.value=r;var a=this.getEditorSelection();typeof r=="string"?s.setContents(s.clipboard.convert(r)):s.setContents(r),m2(function(){return i.setEditorSelection(s,a)})},t.prototype.setEditorSelection=function(s,r){if(this.selection=r,r){var i=s.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),s.setSelection(r)}},t.prototype.setEditorTabIndex=function(s,r){var i,a;!((a=(i=s)===null||i===void 0?void 0:i.scroll)===null||a===void 0)&&a.domNode&&(s.scroll.domNode.tabIndex=r)},t.prototype.setEditorReadOnly=function(s,r){r?s.disable():s.enable()},t.prototype.makeUnprivilegedEditor=function(s){var r=s;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var s=yne.default.findDOMNode(this.editingArea);if(!s)throw new Error("Cannot find element for editing area");if(s.nodeType===3)throw new Error("Editing area cannot be a text node");return s},t.prototype.renderEditingArea=function(){var s=this,r=this.props,i=r.children,a=r.preserveWhitespace,o=this.state.generation,c={key:o,ref:function(d){s.editingArea=d}};return Jr.default.Children.count(i)?Jr.default.cloneElement(Jr.default.Children.only(i),c):a?Jr.default.createElement("pre",Rm({},c)):Jr.default.createElement("div",Rm({},c))},t.prototype.render=function(){var s;return Jr.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(s=this.props.className,s??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(s,r,i,a){var o,c;if(this.editor){var d=this.isDelta(this.value)?a.getContents():a.getHTML();d!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=d,(c=(o=this.props).onChange)===null||c===void 0||c.call(o,s,r,i,a))}},t.prototype.onEditorChangeSelection=function(s,r,i){var a,o,c,d,f,m;if(this.editor){var h=this.getEditorSelection(),u=!h&&s,p=h&&!s;Cd.default(s,h)||(this.selection=s,(o=(a=this.props).onChangeSelection)===null||o===void 0||o.call(a,s,r,i),u?(d=(c=this.props).onFocus)===null||d===void 0||d.call(c,s,r,i):p&&((m=(f=this.props).onBlur)===null||m===void 0||m.call(f,h,r,i)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=f2.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(Jr.default.Component);function m2(e){Promise.resolve().then(e)}var wne=bne;const T4=Lm(wne);var Kp="Switch",[jne,Mse]=ls(Kp),[_ne,Nne]=jne(Kp),A4=j.forwardRef((e,t)=>{const{__scopeSwitch:s,name:r,checked:i,defaultChecked:a,required:o,disabled:c,value:d="on",onCheckedChange:f,form:m,...h}=e,[u,p]=j.useState(null),y=ft(t,_=>p(_)),v=j.useRef(!1),w=u?m||!!u.closest("form"):!0,[x,b]=zr({prop:i,defaultProp:a??!1,onChange:f,caller:Kp});return n.jsxs(_ne,{scope:s,checked:x,disabled:c,children:[n.jsx(Ye.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":M4(x),"data-disabled":c?"":void 0,disabled:c,value:d,...h,ref:y,onClick:Me(e.onClick,_=>{b(N=>!N),w&&(v.current=_.isPropagationStopped(),v.current||_.stopPropagation())})}),w&&n.jsx(L4,{control:u,bubbles:!v.current,name:r,value:d,checked:x,required:o,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});A4.displayName=Kp;var O4="SwitchThumb",R4=j.forwardRef((e,t)=>{const{__scopeSwitch:s,...r}=e,i=Nne(O4,s);return n.jsx(Ye.span,{"data-state":M4(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});R4.displayName=O4;var Sne="SwitchBubbleInput",L4=j.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:r=!0,...i},a)=>{const o=j.useRef(null),c=ft(o,a),d=Cp(s),f=ip(t);return j.useEffect(()=>{const m=o.current;if(!m)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(d!==s&&p){const y=new Event("click",{bubbles:r});p.call(m,s),m.dispatchEvent(y)}},[d,s,r]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:c,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});L4.displayName=Sne;function M4(e){return e?"checked":"unchecked"}var I4=A4,kne=R4;const Zt=j.forwardRef(({className:e,...t},s)=>n.jsx(I4,{className:We("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:n.jsx(kne,{className:We("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Zt.displayName=I4.displayName;const D4=({productData:e})=>{const{name:t,category:s,price:r,comparePrice:i,images:a,description:o,tags:c,dynamicFields:d,shortDescription:f,featured:m,status:h}=e,u=i&&r?Math.round((i-r)/i*100):0;return n.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[n.jsx(Ee,{children:n.jsx(Ae,{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx("div",{className:"space-y-4",children:a&&a.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:n.jsx("img",{src:a[0],alt:t,className:"w-full h-full object-cover"})}),a.length>1&&n.jsx("div",{className:"grid grid-cols-4 gap-2",children:a.slice(1,5).map((p,y)=>n.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:n.jsx("img",{src:p,alt:`${t} ${y+2}`,className:"w-full h-full object-cover cursor-pointer hover:opacity-80"})},y))})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ie,{variant:"outline",children:s}),m&&n.jsx(Ie,{className:"bg-yellow-100 text-yellow-800",children:"Featured"}),n.jsx(Ie,{variant:h==="active"?"default":"secondary",children:h})]}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:t}),f&&n.jsx("p",{className:"text-gray-600 mb-4",children:f})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((p,y)=>n.jsx(dn,{className:"h-4 w-4 fill-current"},y))}),n.jsx("span",{className:"text-sm text-gray-600",children:"(4.8) 124 reviews"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["₹",r==null?void 0:r.toLocaleString()]}),i&&i>r&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["₹",i.toLocaleString()]}),n.jsxs(Ie,{className:"bg-green-100 text-green-800",children:[u,"% OFF"]})]})]}),n.jsx("p",{className:"text-sm text-green-600",children:"Inclusive of all taxes"})]}),n.jsx(pi,{}),d&&Object.keys(d).length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"font-semibold text-gray-900",children:"Product Details"}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(d).map(([p,y])=>y?n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600 capitalize",children:[p.replace(/([A-Z])/g," $1").trim(),":"]}),n.jsx("span",{className:"font-medium",children:Array.isArray(y)?y.join(", "):String(y)})]},p):null)})]}),n.jsx(pi,{}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(ne,{className:"flex-1",children:[n.jsx(Is,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),n.jsx(ne,{variant:"outline",size:"icon",children:n.jsx(hr,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"icon",children:n.jsx(Ho,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx(Wl,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Free Delivery"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx(yi,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Secure Payment"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx(ii,{className:"h-6 w-6 mx-auto mb-1 text-orange-600"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Easy Returns"})]})]})]})]})})}),o&&n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{children:"Product Description"})}),n.jsx(Ae,{children:n.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:o}})})]}),c&&c.length>0&&n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{children:"Tags"})}),n.jsx(Ae,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(p=>n.jsx(Ie,{variant:"secondary",children:p},p))})})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{children:"Similar Products"})}),n.jsx(Ae,{children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(p=>n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg"}),n.jsxs("p",{className:"text-sm font-medium",children:["Similar Product ",p]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["₹",(r*(.8+Math.random()*.4)).toFixed(0)]})]},p))})})]})]})},Tr={electronics:{name:"Electronics",description:"Electronic devices and gadgets",icon:"📱",fields:[{name:"brand",label:"Brand",type:"text",placeholder:"e.g., Samsung, Apple"},{name:"model",label:"Model",type:"text",placeholder:"e.g., Galaxy S24"},{name:"warranty",label:"Warranty",type:"select",options:["No Warranty","6 months","1 year","2 years"]}]},clothing:{name:"Clothing & Fashion",description:"Apparel and fashion accessories",icon:"👕",fields:[{name:"brand",label:"Brand",type:"text",placeholder:"Brand name"},{name:"size",label:"Sizes",type:"multiselect",options:["XS","S","M","L","XL","XXL"]},{name:"color",label:"Colors",type:"multiselect",options:["Black","White","Red","Blue","Green","Gray","Brown"]},{name:"material",label:"Material",type:"text",placeholder:"e.g., Cotton, Polyester"}]},food:{name:"Food & Beverages",description:"Fresh food and beverages",icon:"🍕",fields:[{name:"cuisine",label:"Cuisine",type:"select",options:["Nepali","Indian","Chinese","Continental","Italian","Other"]},{name:"spiceLevel",label:"Spice Level",type:"select",options:["Mild","Medium","Hot"]},{name:"dietaryInfo",label:"Dietary",type:"multiselect",options:["Vegetarian","Vegan","Gluten-Free"]},{name:"servingSize",label:"Serving Size",type:"text",placeholder:"e.g., 1 plate, 250ml"}]},baby:{name:"Baby & Kids",description:"Products for babies and children",icon:"👶",fields:[{name:"ageGroup",label:"Age Group",type:"select",options:["0-6 months","6-12 months","1-2 years","2-4 years","4+ years"]},{name:"safetyFeatures",label:"Safety",type:"multiselect",options:["BPA Free","Non-Toxic","Organic"]}]},grocery:{name:"Grocery & Household",description:"Daily essentials and household items",icon:"🛒",fields:[{name:"weight",label:"Weight/Volume",type:"text",placeholder:"e.g., 1kg, 500ml"},{name:"expiryDate",label:"Expiry Date",type:"date"},{name:"organic",label:"Organic",type:"boolean"}]},meat:{name:"Meat & Seafood",description:"Fresh meat and seafood",icon:"🥩",fields:[{name:"cut",label:"Cut Type",type:"select",options:["Whole","Pieces","Minced","Fillet"]},{name:"freshness",label:"Freshness",type:"select",options:["Fresh","Frozen"]}]},medicine:{name:"Medicine & Health",description:"Medicines and health products",icon:"💊",fields:[{name:"dosage",label:"Dosage",type:"text",placeholder:"e.g., 500mg, 10ml"},{name:"form",label:"Form",type:"select",options:["Tablet","Capsule","Syrup","Injection","Cream","Drops"]},{name:"prescription",label:"Prescription Required",type:"boolean"}]}},Cne=()=>Object.entries(Tr).map(([e,t])=>({value:e,label:t.name,description:t.description,icon:t.icon})),p2=e=>({meat:"kg",grocery:"piece",medicine:"unit",food:"plate",electronics:"piece",clothing:"piece",baby:"piece"})[e]||"piece",Pne=h4({name:wn().min(1,"Product name is required"),category:wn().min(1,"Category is required"),subcategory:wn().optional(),price:Vi().min(0,"Price must be positive"),comparePrice:Vi().optional(),costPrice:Vi().optional(),sku:wn().optional(),barcode:wn().optional(),trackQuantity:nu().default(!0),quantity:Vi().min(0,"Quantity must be positive"),lowStockThreshold:Vi().min(0).optional(),description:wn().min(1,"Description is required"),shortDescription:wn().optional(),tags:Em(wn()).default([]),images:Em(wn()).min(1,"At least one image is required"),status:m4(["active","draft","archived"]).default("active"),featured:nu().default(!1),freeDelivery:nu().default(!1),seoTitle:wn().optional(),seoDescription:wn().optional(),dynamicFields:f4(Gy()).default({})}),Ene=()=>{const[e,t]=j.useState(""),[s,r]=j.useState([]),[i,a]=j.useState([]),[o,c]=j.useState(""),[d,f]=j.useState(!1),[m,h]=j.useState(!1),[u,p]=j.useState([]),[y,v]=j.useState([]),w=a4({resolver:l4(Pne),defaultValues:{name:"",category:"",price:0,quantity:0,description:"",tags:[],images:[],status:"active",featured:!1,freeDelivery:!1,trackQuantity:!0,dynamicFields:{}}}),{control:x,handleSubmit:b,watch:_,setValue:N,formState:{errors:C}}=w,I=_("category");j.useEffect(()=>{var F;t(I),I&&((F=Tr[I])!=null&&F.subcategories)?v(Tr[I].subcategories):v([]),N("subcategory","")},[I,N]),j.useEffect(()=>{(async()=>{try{const{response:G,data:Y}=await Be("/vendor-profiles/");if(G.ok&&Y&&Y.length>0){const U=Y[0].categories||[];p(U)}}catch(G){console.error("Error fetching vendor profile:",G)}})()},[N]);const k=F=>{const G=F.target.files;if(G){const Y=Array.from(G).map(K=>URL.createObjectURL(K));r(K=>[...K,...Y]),N("images",[...s,...Y])}},E=F=>{const G=s.filter((Y,K)=>K!==F);r(G),N("images",G)},M=()=>{if(o.trim()&&!i.includes(o.trim())){const F=[...i,o.trim()];a(F),N("tags",F),c("")}},P=F=>{const G=i.filter(Y=>Y!==F);a(G),N("tags",G)},T=F=>{console.log("Product Data:",F)},A=F=>{const G=`dynamicFields.${F.name}`;switch(F.type){case"text":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:F.name,children:[F.label," ",F.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:x,rules:{required:F.required},render:({field:Y})=>n.jsx(ve,{...Y,placeholder:`Enter ${F.label.toLowerCase()}`})})]},F.name);case"number":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:F.name,children:[F.label," ",F.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:x,rules:{required:F.required},render:({field:Y})=>n.jsx(ve,{...Y,type:"number",placeholder:`Enter ${F.label.toLowerCase()}`,onChange:K=>Y.onChange(Number(K.target.value))})})]},F.name);case"select":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:F.name,children:[F.label," ",F.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:x,rules:{required:F.required},render:({field:Y})=>{var K;return n.jsxs(Vt,{onValueChange:Y.onChange,value:Y.value,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:`Select ${F.label.toLowerCase()}`})}),n.jsx(zt,{children:(K=F.options)==null?void 0:K.map(U=>n.jsx(qe,{value:U,children:U},U))})]})}})]},F.name);case"multiselect":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:F.name,children:[F.label," ",F.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:x,rules:{required:F.required},render:({field:Y})=>{var U;const K=Y.value||[];return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Vt,{onValueChange:B=>{K.includes(B)||Y.onChange([...K,B])},children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:`Select ${F.label.toLowerCase()}`})}),n.jsx(zt,{children:(U=F.options)==null?void 0:U.map(B=>n.jsx(qe,{value:B,children:B},B))})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:K.map(B=>n.jsxs(Ie,{variant:"secondary",className:"flex items-center gap-1",children:[B,n.jsx(is,{className:"h-3 w-3 cursor-pointer",onClick:()=>{Y.onChange(K.filter(R=>R!==B))}})]},B))})]})}})]},F.name);case"textarea":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:F.name,children:[F.label," ",F.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:x,rules:{required:F.required},render:({field:Y})=>n.jsx(Yn,{...Y,placeholder:`Enter ${F.label.toLowerCase()}`})})]},F.name);case"boolean":return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:G,control:x,render:({field:Y})=>n.jsx(Zt,{checked:Y.value,onCheckedChange:Y.onChange})}),n.jsx(ue,{htmlFor:F.name,children:F.label})]},F.name);case"date":return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:F.name,children:[F.label," ",F.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:G,control:x,rules:{required:F.required},render:({field:Y})=>n.jsx(ve,{...Y,type:"date"})})]},F.name);default:return null}},z=()=>m?n.jsx(D4,{productData:_()}):n.jsxs("form",{onSubmit:b(T),className:"space-y-6",children:[n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsxs(_t,{className:"flex items-center gap-2",children:[n.jsx(At,{className:"h-5 w-5"}),"Basic Information"]})}),n.jsxs(Ae,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:"name",children:["Product Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"name",control:x,render:({field:F})=>n.jsx(ve,{...F,placeholder:"Enter product name"})}),C.name&&n.jsx("p",{className:"text-red-500 text-sm",children:C.name.message})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:"category",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"category",control:x,render:({field:F})=>n.jsxs(Vt,{onValueChange:F.onChange,value:F.value,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select category"})}),n.jsx(zt,{children:u.map(G=>{const Y=Cne().find(K=>K.value===G);return Y?n.jsx(qe,{value:G,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:Y.icon}),n.jsx("span",{children:Y.label})]})},G):null})})]})}),C.category&&n.jsx("p",{className:"text-red-500 text-sm",children:C.category.message})]}),y.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"subcategory",children:"Subcategory"}),n.jsx(bt,{name:"subcategory",control:x,render:({field:F})=>n.jsxs(Vt,{onValueChange:F.onChange,value:F.value,children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select subcategory"})}),n.jsx(zt,{children:y.map(G=>n.jsx(qe,{value:G,children:G},G))})]})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"shortDescription",children:"Short Description"}),n.jsx(bt,{name:"shortDescription",control:x,render:({field:F})=>n.jsx(Yn,{...F,placeholder:"Brief product description",rows:2})})]})]})]}),e&&Tr[e]&&n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsxs(_t,{className:"flex items-center gap-2",children:[n.jsx(_P,{className:"h-5 w-5"}),n.jsx("span",{className:"mr-2",children:Tr[e].icon}),Tr[e].name," Details"]})}),n.jsx(Ae,{className:"space-y-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Tr[e].fields.map(A)})})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{children:"Pricing & Inventory"})}),n.jsxs(Ae,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:"price",children:["Selling Price ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"price",control:x,render:({field:F})=>n.jsx(ve,{...F,type:"number",step:"0.01",placeholder:"0.00",onChange:G=>F.onChange(Number(G.target.value))})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"comparePrice",children:"Compare Price"}),n.jsx(bt,{name:"comparePrice",control:x,render:({field:F})=>n.jsx(ve,{...F,type:"number",step:"0.01",placeholder:"0.00",onChange:G=>F.onChange(Number(G.target.value))})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"costPrice",children:"Cost Price"}),n.jsx(bt,{name:"costPrice",control:x,render:({field:F})=>n.jsx(ve,{...F,type:"number",step:"0.01",placeholder:"0.00",onChange:G=>F.onChange(Number(G.target.value))})})]})]}),n.jsx(pi,{}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:"trackQuantity",control:x,render:({field:F})=>n.jsx(Zt,{checked:F.value,onCheckedChange:F.onChange})}),n.jsx(ue,{children:"Track Quantity"})]}),_("trackQuantity")&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:"quantity",children:["Quantity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"quantity",control:x,render:({field:F})=>n.jsx(ve,{...F,type:"number",placeholder:"0",onChange:G=>F.onChange(Number(G.target.value))})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"lowStockThreshold",children:"Low Stock Alert"}),n.jsx(bt,{name:"lowStockThreshold",control:x,render:({field:F})=>n.jsx(ve,{...F,type:"number",placeholder:"5",onChange:G=>F.onChange(Number(G.target.value))})})]})]})]})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsxs(_t,{className:"flex items-center gap-2",children:[n.jsx(Zi,{className:"h-5 w-5"}),"Product Images"]})}),n.jsxs(Ae,{className:"space-y-4",children:[n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[n.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:k,className:"hidden",id:"image-upload"}),n.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[n.jsx(_u,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload images or drag and drop"}),n.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG, GIF up to 10MB"})]})]}),s.length>0&&n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map((F,G)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:F,alt:`Product ${G+1}`,className:"w-full h-24 object-cover rounded-lg"}),n.jsx("button",{type:"button",onClick:()=>E(G),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(is,{className:"h-3 w-3"})}),G===0&&n.jsx(Ie,{className:"absolute bottom-1 left-1 text-xs",children:"Main"})]},G))})]})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsxs(_t,{className:"flex items-center gap-2",children:[n.jsx(yP,{className:"h-5 w-5"}),"Product Description"]})}),n.jsx(Ae,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(ue,{htmlFor:"description",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"description",control:x,render:({field:F})=>n.jsx(T4,{theme:"snow",value:F.value,onChange:F.onChange,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},style:{minHeight:"200px"}})}),C.description&&n.jsx("p",{className:"text-red-500 text-sm",children:C.description.message})]})})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{children:"Product Tags"})}),n.jsxs(Ae,{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ve,{value:o,onChange:F=>c(F.target.value),placeholder:"Add a tag",onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),M())}),n.jsx(ne,{type:"button",onClick:M,variant:"outline",children:n.jsx(xn,{className:"h-4 w-4"})})]}),i.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(F=>n.jsxs(Ie,{variant:"secondary",className:"flex items-center gap-1",children:[F,n.jsx(is,{className:"h-3 w-3 cursor-pointer",onClick:()=>P(F)})]},F))})]})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{children:"SEO & Settings"})}),n.jsxs(Ae,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"sku",children:"SKU"}),n.jsx(bt,{name:"sku",control:x,render:({field:F})=>n.jsx(ve,{...F,placeholder:"Product SKU"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"barcode",children:"Barcode"}),n.jsx(bt,{name:"barcode",control:x,render:({field:F})=>n.jsx(ve,{...F,placeholder:"Product barcode"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"seoTitle",children:"SEO Title"}),n.jsx(bt,{name:"seoTitle",control:x,render:({field:F})=>n.jsx(ve,{...F,placeholder:"SEO optimized title"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"seoDescription",children:"SEO Description"}),n.jsx(bt,{name:"seoDescription",control:x,render:({field:F})=>n.jsx(Yn,{...F,placeholder:"SEO meta description",rows:3})})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:"featured",control:x,render:({field:F})=>n.jsx(Zt,{checked:F.value,onCheckedChange:F.onChange})}),n.jsx(ue,{children:"Featured Product"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:"freeDelivery",control:x,render:({field:F})=>n.jsx(Zt,{checked:F.value,onCheckedChange:F.onChange})}),n.jsx(ue,{children:"Free Delivery"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"status",children:"Status"}),n.jsx(bt,{name:"status",control:x,render:({field:F})=>n.jsxs(Vt,{onValueChange:F.onChange,value:F.value,children:[n.jsx($t,{className:"w-32",children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"active",children:"Active"}),n.jsx(qe,{value:"draft",children:"Draft"}),n.jsx(qe,{value:"archived",children:"Archived"})]})]})})]})]})]})]}),n.jsxs("div",{className:"flex gap-4 sticky bottom-4 bg-white p-4 border-t",children:[n.jsxs(ne,{type:"button",variant:"outline",className:"flex-1",onClick:()=>h(!m),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),m?"Edit":"Preview"]}),n.jsx(ne,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{N("status","draft"),b(T)()},children:"Save as Draft"}),n.jsxs(ne,{type:"submit",className:"flex-1",children:[n.jsx(Mc,{className:"h-4 w-4 mr-2"}),"Publish Product"]})]})]});if(d)return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>f(!1),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsx("h1",{className:"text-xl font-semibold",children:"Add New Product"})]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>h(!m),children:[n.jsx(Nn,{className:"h-4 w-4 mr-2"}),m?"Edit":"Preview"]})]})}),n.jsx("div",{className:"max-w-4xl mx-auto p-6",children:n.jsx(Iw,{className:"h-[calc(100vh-80px)]",children:n.jsx(z,{})})})]});const O=st();return n.jsx("button",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-full shadow-xl flex items-center justify-center transition-all duration-300 hover:scale-110 border-4 border-white","aria-label":"Add Product",onClick:()=>O("/vendor/add-product"),children:n.jsx(xn,{className:"h-7 w-7"})})},g2=[{title:"Home",url:"/vendor/dashboard",icon:nb},{title:"Orders",url:"/vendor/orders",icon:jP},{title:"Products",url:"/vendor/products",icon:At},{title:"Settings",url:"/vendor/settings",icon:MD}],Tne=({children:e})=>n.jsx(n.Fragment,{children:e}),Ane=()=>{const e=fr(),t=st();return n.jsxs("div",{className:"fixed bottom-0 left-0 w-full z-50",children:[n.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 -top-6 z-10",children:n.jsx(Ene,{})}),n.jsxs("nav",{className:"bg-gradient-to-r from-slate-50 to-white shadow-2xl border-t border-gray-100 relative overflow-hidden backdrop-blur-sm pb-safe-bottom",children:[n.jsx("div",{className:"absolute inset-0 bg-white",style:{clipPath:"polygon(0 0, calc(50% - 32px) 0, calc(50% - 24px) 16px, calc(50% + 24px) 16px, calc(50% + 32px) 0, 100% 0, 100% 100%, 0 100%)"}}),n.jsxs("div",{className:"relative flex justify-around items-center px-safe-x py-1 pt-3 md:py-1 md:pt-2",children:[g2.slice(0,2).map(s=>{const r=s.icon,i=e.pathname===s.url;return n.jsxs("button",{onClick:()=>t(s.url),className:`flex flex-col items-center justify-center p-2 md:p-1 rounded-lg transition-all duration-200 min-w-[60px] ${i?"text-orange-600 bg-orange-50":"text-gray-600 hover:text-orange-500 hover:bg-gray-50"}`,"aria-label":s.title,children:[n.jsx(r,{className:"h-5 w-5 mb-1 md:mb-0"}),n.jsx("span",{className:"text-xs font-medium",children:s.title})]},s.title)}),n.jsx("div",{className:"w-16"}),g2.slice(2).map(s=>{const r=s.icon,i=e.pathname===s.url;return n.jsxs("button",{onClick:()=>t(s.url),className:`flex flex-col items-center justify-center p-2 md:p-1 rounded-lg transition-all duration-200 min-w-[60px] ${i?"text-orange-600 bg-orange-50":"text-gray-600 hover:text-orange-500 hover:bg-gray-50"}`,"aria-label":s.title,children:[n.jsx(r,{className:"h-5 w-5 mb-1 md:mb-0"}),n.jsx("span",{className:"text-xs font-medium",children:s.title})]},s.title)})]})]})]})},One=async()=>{console.log("🔍 AUTH DEBUG START");const e=await Re.getToken(),t=await Re.getUser(),s=await Re.isAuthenticated();console.log("📋 Auth Status:",{hasToken:!!e,tokenLength:(e==null?void 0:e.length)||0,tokenPreview:e?`${e.substring(0,10)}...`:"null",hasUser:!!t,userId:t==null?void 0:t.id,userType:t==null?void 0:t.user_type,isAuthenticated:s});const r=localStorage.getItem("token"),i=localStorage.getItem("user");return console.log("💾 Direct Storage:",{directToken:r?`${r.substring(0,10)}...`:"null",directUser:i?"exists":"null",allKeys:Object.keys(localStorage)}),console.log("🔍 AUTH DEBUG END"),{token:e,user:t,isAuth:s}};function Rne({title:e,subtitle:t,headerActions:s}){const r=st(),{toast:i}=hn(),[a,o]=j.useState([]),[c,d]=j.useState([]),[f,m]=j.useState(!0),[h,u]=j.useState(null),p=a.filter(k=>!k.read).length,y=c.reduce((k,E)=>k+(E.unread_count||0),0),v=!1;j.useEffect(()=>{console.log("🚀 VendorHeader initializing..."),_(),b(),w(),x();const k=setInterval(w,5e3),E=setInterval(x,5e3),M=O=>{const F=O.detail;o(G=>[F,...G])},P=O=>{const{order:F}=O.detail,G={id:Date.now(),type:"order",title:"New Order Received!",message:`Order #${F.order_number} for ₹${F.total_amount}`,data:{orderId:F.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(Y=>[G,...Y]),Wt.playNotificationSound(),Wt.showBrowserNotificationCompat(G.title,{body:G.message,tag:`order-${F.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/orders"}}),i({title:G.title,description:G.message,duration:5e3})},T=O=>{const{refund:F}=O.detail,G={id:Date.now(),type:"refund_request",title:"Refund Request Received!",message:`Refund request for Order #${F.order_number} - ₹${F.amount}`,data:{refundId:F.id,orderId:F.order_id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(Y=>[G,...Y]),Wt.playNotificationSound(),Wt.showBrowserNotificationCompat(G.title,{body:G.message,tag:`refund-${F.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/orders"}}),i({title:G.title,description:G.message,duration:5e3})},A=O=>{const{product:F}=O.detail,G={id:Date.now(),type:"stock_alert",title:"Low Stock Alert!",message:`${F.name} is running low (${F.stock} left)`,data:{productId:F.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/products"};o(Y=>[G,...Y]),Wt.playNotificationSound(),Wt.showBrowserNotificationCompat(G.title,{body:G.message,tag:`stock-${F.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/products"}}),i({title:G.title,description:G.message,duration:5e3})},z=O=>{const{order:F,oldStatus:G,newStatus:Y}=O.detail,K={id:Date.now(),type:"order_status",title:"Order Status Updated!",message:`Order #${F.order_number} changed from ${G} to ${Y}`,data:{orderId:F.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(U=>[K,...U]),Wt.playNotificationSound(),Wt.showBrowserNotificationCompat(K.title,{body:K.message,tag:`status-${F.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/orders"}}),i({title:K.title,description:K.message,duration:4e3})};return window.addEventListener("newNotification",M),window.addEventListener("orderCreated",P),window.addEventListener("refundRequest",T),window.addEventListener("stockAlert",A),window.addEventListener("orderStatusChange",z),()=>{clearInterval(k),clearInterval(E),window.removeEventListener("newNotification",M),window.removeEventListener("orderCreated",P),window.removeEventListener("refundRequest",T),window.removeEventListener("stockAlert",A),window.removeEventListener("orderStatusChange",z)}},[]);const w=async()=>{try{const k=await Us.getConversations(),M=(Array.isArray(k)?k:(k==null?void 0:k.results)||[]).reduce((P,T)=>{var O,F,G;const A=(O=T.other_participant)==null?void 0:O.id;if(!A)return P;const z=P.find(Y=>{var K;return((K=Y.other_participant)==null?void 0:K.id)===A});if(!z)P.push(T);else{const Y=((F=T.last_message)==null?void 0:F.created_at)||T.updated_at,K=((G=z.last_message)==null?void 0:G.created_at)||z.updated_at;if(new Date(Y)>new Date(K)){const U=P.findIndex(B=>{var R;return((R=B.other_participant)==null?void 0:R.id)===A});P[U]=T}}return P},[]);c.length>0&&M.forEach(P=>{var A,z;const T=c.find(O=>{var F,G;return((F=O.other_participant)==null?void 0:F.id)===((G=P.other_participant)==null?void 0:G.id)});T&&P.unread_count>T.unread_count&&Wt.showBrowserNotification(`New message from ${(A=P.other_participant)==null?void 0:A.username}`,{body:((z=P.last_message)==null?void 0:z.content)||"New message received",tag:`message-${P.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/messages"}})}),d(M)}catch(k){console.error("Failed to load conversations:",k)}},x=async()=>{try{const{response:k,data:E}=await Be("/vendor-notifications/");if(k.ok&&E){const M=Array.isArray(E)?E:E.results||[];a.length>0&&M.forEach(P=>{if(!a.find(A=>A.id===P.id)){Wt.playNotificationSound();let A="/vendor/orders",z=!0;switch(P.type){case"order":A="/vendor/orders";break;case"refund":case"refund_request":A="/vendor/orders";break;case"stock_alert":case"low_stock":A="/vendor/products";break;case"order_status":case"status_change":A="/vendor/orders";break;case"payment":A="/vendor/wallet";break;case"message":A="/vendor/messages",z=!1;break;default:A="/vendor/orders"}Wt.showBrowserNotificationCompat(P.title,{body:P.message,tag:`notification-${P.id}`,requireInteraction:z,data:{actionUrl:A}}),i({title:P.title,description:P.message,duration:5e3})}}),o(M)}}catch(k){console.error("Failed to load notifications:",k),a.length===0&&o([])}},b=async()=>{await Wt.requestPermission()},_=async()=>{console.log("🔍 Fetching vendor status...");try{const k=await Re.isAuthenticated();if(console.log("🔐 Authentication check for fetch:",k),!k){console.log("❌ Not authenticated, redirecting to login"),r("/vendor/login");return}const E=await Re.getUser(),{response:M,data:P}=await Be("/vendor-profiles/");if(console.log("📥 Fetch vendor status response:",{status:M.status,statusText:M.statusText,data:P,headers:Object.fromEntries(M.headers.entries())}),M.status===401||M.status===403){console.log("🚫 Authentication error in fetch, clearing auth"),await Re.clearAuth(),r("/vendor/login");return}if(M.status!==200&&M.status!==201)throw console.log("⚠️ Unexpected status in fetch:",M.status),new Error((P==null?void 0:P.error)||(P==null?void 0:P.message)||"Failed to fetch vendor status");if(P&&P.results&&P.results.length>0){const T=P.results.find(A=>A.user===(E==null?void 0:E.id))||P.results[0];console.log("👤 Profile found:",{id:T.id,user:T.user,is_active:T.is_active}),u(T.id),m(T.is_active||!1)}else console.log("❌ No profile found in response")}catch(k){console.error("❌ Error fetching vendor status:",k),i({title:"Error",description:"Failed to load vendor status",variant:"destructive"})}},N=async()=>{console.log("🔄 Toggle status started"),await One();try{const k=await Re.isAuthenticated();if(console.log("🔐 Authentication check:",k),!k){console.log("❌ Not authenticated, redirecting to login"),r("/vendor/login");return}if(!h)throw console.log("❌ No profile ID found"),new Error("Profile ID not found");const E=!f;console.log("📝 Toggling status from",f,"to",E,"for profile",h);const M={is_active:E};console.log("📤 Request body:",M);const P=await Cb();console.log("📤 Request headers:",P);const{response:T,data:A}=await Be(`/vendor-profiles/${h}/toggle-status/`,{method:"POST",body:JSON.stringify(M)});if(console.log("📥 Toggle status response:",{status:T.status,statusText:T.statusText,data:A,headers:Object.fromEntries(T.headers.entries())}),console.log("🔍 Response details:",{ok:T.ok,status:T.status,dataSuccess:A==null?void 0:A.success,dataError:A==null?void 0:A.error,dataMessage:A==null?void 0:A.message}),T.status===401||T.status===403){console.log("🚫 Authentication error - but not clearing auth yet"),i({title:"Permission Error",description:"You don't have permission to perform this action",variant:"destructive"});return}if(T.status===200||T.status===201)if(console.log("✅ Success response received"),A&&A.success!==!1){const O=A.is_active!==void 0?A.is_active:E;console.log("🎯 Setting status to:",O),m(O),i({title:"Success",description:A.message||`Status set to ${O?"Online":"Offline"}`}),console.log("✅ Toggle completed successfully");return}else throw console.log("❌ API returned success: false"),new Error((A==null?void 0:A.error)||(A==null?void 0:A.message)||"Failed to toggle status");console.log("⚠️ Unexpected status code:",T.status);const z=(A==null?void 0:A.error)||(A==null?void 0:A.detail)||(A==null?void 0:A.message)||`Server returned status ${T.status}`;throw new Error(z)}catch(k){console.error("❌ Error toggling status:",k),i({title:"Error",description:k instanceof Error?k.message:"Failed to toggle status",variant:"destructive"})}},C=async k=>{await Wt.markAsRead(k),o(E=>E.map(M=>M.id===k?{...M,read:!0}:M))},I=async()=>{await Wt.markAllAsRead(),o(k=>k.map(E=>({...E,read:!0})))};return n.jsx("header",{className:"fixed top-0 z-50 w-full max-w-full border-b bg-gradient-to-r from-gray-50 to-white shadow-lg overflow-hidden",children:n.jsxs("div",{className:"flex h-14 sm:h-16 items-center px-3 sm:px-4 max-w-full",children:[n.jsx("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:n.jsx("div",{className:"flex items-center gap-2 min-w-0",children:n.jsx("img",{src:"/assets/ezeywaylogo.png",alt:"Ezeyway",className:"h-32 w-32 sm:h-36 sm:w-36 object-contain flex-shrink-0"})})}),n.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 border border-gray-300 rounded-full px-3 py-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`text-xs font-medium ${f?"text-green-700":"text-gray-700"}`,children:f?"Online":"Offline"}),v]}),n.jsx("button",{onClick:N,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300 ${f?"bg-green-500":"bg-gray-400"}`,children:n.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform shadow-sm ${f?"translate-x-5":"translate-x-1"}`})})]}),n.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[n.jsxs(yc,{children:[n.jsx(bc,{asChild:!0,children:n.jsxs(ne,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10 text-gray-700 hover:bg-gray-100",children:[n.jsx(Ro,{className:"h-4 w-4 sm:h-5 sm:w-5"}),y>0&&n.jsx(Ie,{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 text-[10px] sm:text-xs flex items-center justify-center min-w-[16px] sm:min-w-[20px] bg-red-500 text-white border-2 border-white",children:y>9?"9+":y}),n.jsx("span",{className:"sr-only",children:"Messages"})]})}),n.jsxs(Zo,{align:"end",className:"w-72 sm:w-80 mr-2 sm:mr-0",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h4",{className:"font-semibold",children:"Messages"}),n.jsx("div",{className:"flex gap-2",children:n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>r("/vendor/messages"),className:"text-xs",children:"View all"})})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:c.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No messages"}):c.slice(0,5).map(k=>{var E,M,P,T,A,z;return n.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${k.unread_count>0?"bg-blue-50/50":""}`,onClick:()=>r("/vendor/messages"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(ea,{className:"h-8 w-8",children:[n.jsx(Mr,{src:(E=k.other_participant)==null?void 0:E.profile_picture}),n.jsx(ta,{children:(P=(M=k.other_participant)==null?void 0:M.username)==null?void 0:P.charAt(0)})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:(T=k.other_participant)==null?void 0:T.username}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((A=k.last_message)==null?void 0:A.content)||((z=k.last_message)==null?void 0:z.file_name)||"No messages"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:k.last_message?new Date(k.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),k.unread_count>0&&n.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xs text-white font-bold",children:k.unread_count})})]})},k.id)})})]})]}),s,!s&&n.jsxs(yc,{children:[n.jsx(bc,{asChild:!0,children:n.jsxs(ne,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10 text-gray-700 hover:bg-gray-100",children:[n.jsx(ir,{className:"h-4 w-4 sm:h-5 sm:w-5"}),p>0&&n.jsx(Ie,{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 text-[10px] sm:text-xs flex items-center justify-center min-w-[16px] sm:min-w-[20px] bg-red-500 text-white border-2 border-white",children:p>9?"9+":p}),n.jsx("span",{className:"sr-only",children:"Notifications"})]})}),n.jsxs(Zo,{align:"end",className:"w-72 sm:w-80 mr-2 sm:mr-0",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h4",{className:"font-semibold",children:"Notifications"}),p>0&&n.jsx(ne,{variant:"ghost",size:"sm",onClick:I,className:"text-xs",children:"Mark all read"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:a.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):a.map(k=>n.jsx("div",{className:`p-4 border-b last:border-b-0 hover:bg-muted/50 cursor-pointer ${k.read?"":"bg-blue-50/50"}`,onClick:()=>{switch(C(k.id),k.type){case"order":case"refund":case"refund_request":case"order_status":case"status_change":r("/vendor/orders");break;case"stock_alert":case"low_stock":r("/vendor/products");break;case"payment":r("/vendor/wallet");break;case"message":r("/vendor/messages");break;default:r("/vendor/orders")}},children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${k.read?"bg-transparent":"bg-blue-500"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm font-medium ${k.read?"text-gray-700":"text-gray-900"}`,children:k.title}),n.jsx("p",{className:`text-sm ${k.read?"text-gray-600":"text-gray-700"}`,children:k.message}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(k.created_at).toLocaleString()})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Ie,{variant:"outline",className:`text-xs ${k.type==="order"?"border-green-200 text-green-700":k.type==="refund"||k.type==="refund_request"?"border-red-200 text-red-700":k.type==="stock_alert"||k.type==="low_stock"?"border-orange-200 text-orange-700":k.type==="order_status"||k.type==="status_change"||k.type==="payment"?"border-blue-200 text-blue-700":k.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:k.type==="refund_request"?"refund":k.type==="stock_alert"?"stock":k.type==="order_status"?"status":k.type})})]})},k.id))}),n.jsx("div",{className:"p-2 border-t",children:n.jsx(ne,{variant:"ghost",className:"w-full text-sm",onClick:()=>r("/vendor/notifications"),children:"View all notifications"})})]})]})]})]})})}function Lne({isOpen:e,orders:t,onAccept:s,onReject:r}){const[i,a]=j.useState({}),o=j.useRef(null),{toast:c}=hn(),d=j.useRef({});j.useEffect(()=>{if(e&&t.length>0){(async()=>{if(o.current)try{o.current.volume=.8,await o.current.play(),setTimeout(()=>{o.current&&(o.current.pause(),o.current.currentTime=0)},3e3)}catch(y){console.warn("Audio autoplay blocked:",y);try{const v=new(window.AudioContext||window.webkitAudioContext),w=v.createOscillator(),x=v.createGain();w.connect(x),x.connect(v.destination),w.frequency.setValueAtTime(800,v.currentTime),w.type="square",x.gain.setValueAtTime(.3,v.currentTime),x.gain.exponentialRampToValueAtTime(.01,v.currentTime+.5),w.start(v.currentTime),w.stop(v.currentTime+.5)}catch(v){console.warn("Web Audio API also failed:",v)}}})(),"Notification"in window&&Notification.permission==="default"?Notification.requestPermission().then(y=>{y==="granted"&&f()}):"Notification"in window&&Notification.permission==="granted"&&f(),t.forEach(y=>{d.current[y.id]||(d.current[y.id]=new Date(y.created_at))});const p=setInterval(()=>{const y={};t.forEach(v=>{if(d.current[v.id]){const x=Math.floor((new Date().getTime()-d.current[v.id].getTime())/1e3);y[v.id]=x}}),a(y)},1e3);return()=>clearInterval(p)}},[e,t]);const f=()=>{t.forEach(u=>{new Notification("New Order Received!",{body:`Order #${u.order_number} - ₹${u.total_amount}`,icon:"/favicon.ico",tag:`order-${u.id}`,requireInteraction:!0})})};if(!e||t.length===0)return null;const m=u=>{const p=t.find(y=>y.id===u);s(u),c({title:"Order Accepted",description:`Order #${p==null?void 0:p.order_number} has been accepted`})},h=u=>{const p=t.find(y=>y.id===u);r(u),c({title:"Order Rejected",description:`Order #${p==null?void 0:p.order_number} has been rejected`,variant:"destructive"})};return n.jsxs(n.Fragment,{children:[n.jsx("audio",{ref:o,preload:"auto",loop:!0,children:n.jsx("source",{src:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",type:"audio/wav"})}),n.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-end",children:n.jsx("div",{className:"w-full bg-white rounded-t-3xl shadow-2xl animate-in slide-in-from-bottom duration-300",style:{height:"80vh"},children:n.jsxs("div",{className:"p-6 h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-6 h-6 bg-red-100 rounded-full flex items-center justify-center animate-pulse",children:n.jsx(ir,{className:"h-3 w-3 text-red-600 animate-bounce"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-sm font-bold text-red-900",children:"🔔 New Orders Received!"}),n.jsxs("p",{className:"text-xs text-red-600 font-medium",children:[t.length," order",t.length>1?"s":""," waiting for response"]})]})]}),n.jsx("div",{className:"text-xs text-red-600 font-bold animate-pulse",children:"URGENT"})]}),n.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:t.map(u=>{const p=i[u.id]||0;return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("p",{className:"text-xs font-bold text-gray-900",children:["#",u.order_number]}),n.jsxs("p",{className:"text-xs font-bold text-green-600",children:["₹",u.total_amount]}),n.jsxs("p",{className:"text-xs text-blue-600",children:[Math.floor(p/60),":",(p%60).toString().padStart(2,"0")]})]}),n.jsx("p",{className:"text-xs text-gray-600 mb-1",children:u.customer_name}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-1",children:[n.jsxs("div",{className:"flex items-start gap-1",children:[n.jsx(Kt,{className:"h-2 w-2 text-gray-500 mt-0.5"}),n.jsx("p",{className:"text-xs text-gray-900",children:u.delivery_address})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Qu,{className:"h-2 w-2 text-gray-500"}),n.jsx("p",{className:"text-xs text-gray-900",children:u.delivery_phone})]})]}),n.jsxs("div",{className:"mb-1",children:[n.jsxs("p",{className:"text-xs font-medium text-gray-700 mb-1",children:["Items (",u.items.length,")"]}),n.jsx("div",{className:"space-y-1 max-h-16 overflow-y-auto",children:u.items.map(y=>{var v,w,x;return n.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white rounded",children:[n.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:n.jsx("img",{src:((x=(w=(v=y.product_details)==null?void 0:v.images)==null?void 0:w[0])==null?void 0:x.image_url)||"/placeholder-product.jpg",alt:y.product_name,className:"w-full h-full object-cover"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:y.product_name}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",y.quantity]})]}),n.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["₹",y.total_price]})]},y.id)})})]}),u.delivery_instructions&&n.jsxs("div",{className:"mb-1",children:[n.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Instructions:"}),n.jsx("p",{className:"text-xs text-gray-600 italic",children:u.delivery_instructions})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs(ne,{onClick:()=>h(u.id),variant:"outline",size:"sm",className:"flex-1 border-red-200 text-red-600 hover:bg-red-50 text-xs h-6",children:[n.jsx(is,{className:"h-2 w-2 mr-1"}),"Reject"]}),n.jsxs(ne,{onClick:()=>m(u.id),size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-xs h-6",children:[n.jsx(Yu,{className:"h-2 w-2 mr-1"}),"Accept"]})]})]},u.id)})})]})})})]})}function F4(){const[e,t]=j.useState(!1),[s,r]=j.useState(null);return j.useEffect(()=>{if(!vt.isNativePlatform())return;const i=a=>{r(a.detail),t(!0),setTimeout(()=>{t(!1)},5e3)};return window.addEventListener("showOrderModal",i),()=>{window.removeEventListener("showOrderModal",i)}},[]),!vt.isNativePlatform()||!e?null:n.jsx("div",{className:"fixed top-4 left-4 right-4 z-[10000] animate-in slide-in-from-top duration-300",children:n.jsx(Ee,{className:"border-orange-200 bg-orange-50 shadow-lg",children:n.jsx(Ae,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center animate-pulse",children:n.jsx(ir,{className:"h-4 w-4 text-orange-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-bold text-orange-900",children:"🔔 New Order Received!"}),s&&n.jsxs("p",{className:"text-xs text-orange-700",children:["Order #",s.orderNumber," - ₹",s.amount]}),n.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Tap anywhere to view and respond"})]})]})})})})}function Mne(){const[e,t]=j.useState([]),[s,r]=j.useState(!1),i=j.useRef(null),a=j.useRef(new Set),{notifications:o,unreadCount:c,isConnected:d}=zp();j.useEffect(()=>{const u=p=>{const y=p.detail;y.type==="order"&&y.title.includes("New Order")&&f()};return window.addEventListener("newNotification",u),()=>{window.removeEventListener("newNotification",u)}},[]);const f=async()=>{try{const{authService:u}=await Xe(async()=>{const{authService:x}=await Promise.resolve().then(()=>xc);return{authService:x}},void 0),p=await u.getToken();if(!p){console.log("No token found for pending orders");return}console.log("📱 Mobile: Fetching pending orders with token:",p?`${p.substring(0,10)}...`:"NO TOKEN"),console.log("📱 Mobile: API URL:",pp("orders/vendor/pending/"));const{apiRequest:y}=await Xe(async()=>{const{apiRequest:x}=await Promise.resolve().then(()=>Gn);return{apiRequest:x}},void 0),{response:v,data:w}=await y("orders/vendor/pending/");console.log("📱 Mobile: Pending orders response:",v.status,v.ok),v.ok&&w?(console.log("Pending orders received:",w.length,w),t(w),r(w.length>0),w.length>0&&(console.log("📱 Mobile: Showing order notification for",w.length,"orders"),Xe(async()=>{const{simpleNotificationService:x}=await Promise.resolve().then(()=>Ev);return{simpleNotificationService:x}},void 0).then(({simpleNotificationService:x})=>{w.forEach(b=>{a.current.has(b.id)||(console.log("📱 Processing NEW order:",b.order_number,b.total_amount),a.current.add(b.id),x.showOrderNotification(b.order_number,b.total_amount,b.id))})}))):console.error("Failed to fetch pending orders:",v.status,v.statusText)}catch(u){console.error("Error fetching pending orders:",u)}};return j.useEffect(()=>{(async()=>{const{authService:w}=await Xe(async()=>{const{authService:b}=await Promise.resolve().then(()=>xc);return{authService:b}},void 0);await w.getToken()&&f()})();const p=vt.isNativePlatform()?3e4:6e4;i.current=setInterval(f,p);const y=()=>{document.hidden||f()};document.addEventListener("visibilitychange",y);const v=()=>{console.log("Refreshing pending orders from mobile app resume"),f()};if(window.addEventListener("refreshPendingOrders",v),vt.isNativePlatform()){const w=()=>{console.log("📱 App state changed - refreshing orders"),f()};return document.addEventListener("resume",w),document.addEventListener("visibilitychange",w),()=>{i.current&&clearInterval(i.current),document.removeEventListener("visibilitychange",y),window.removeEventListener("refreshPendingOrders",v),document.removeEventListener("resume",w),document.removeEventListener("visibilitychange",w)}}return()=>{i.current&&clearInterval(i.current),document.removeEventListener("visibilitychange",y),window.removeEventListener("refreshPendingOrders",v)}},[]),{pendingOrders:e,isModalOpen:s,acceptOrder:async u=>{try{const{apiRequest:p}=await Xe(async()=>{const{apiRequest:v}=await Promise.resolve().then(()=>Gn);return{apiRequest:v}},void 0),{response:y}=await p(`/orders/${u}/accept/`,{method:"POST"});if(y.ok){const{simpleNotificationService:v}=await Xe(async()=>{const{simpleNotificationService:w}=await Promise.resolve().then(()=>Ev);return{simpleNotificationService:w}},void 0);return v.clearNotification(u),a.current.delete(u),t(w=>w.filter(x=>x.id!==u)),e.length<=1&&r(!1),!0}}catch(p){console.error("Error accepting order:",p)}return!1},rejectOrder:async u=>{try{const{apiRequest:p}=await Xe(async()=>{const{apiRequest:v}=await Promise.resolve().then(()=>Gn);return{apiRequest:v}},void 0),{response:y}=await p(`/orders/${u}/reject/`,{method:"POST",body:JSON.stringify({reason:"Rejected by vendor"})});if(y.ok){const{simpleNotificationService:v}=await Xe(async()=>{const{simpleNotificationService:w}=await Promise.resolve().then(()=>Ev);return{simpleNotificationService:w}},void 0);return v.clearNotification(u),a.current.delete(u),t(w=>w.filter(x=>x.id!==u)),e.length<=1&&r(!1),!0}}catch(p){console.error("Error rejecting order:",p)}return!1},notifications:o,unreadCount:c,isConnected:d}}const $4=j.createContext(void 0);function Ine({children:e}){const{pendingOrders:t,isModalOpen:s,acceptOrder:r,rejectOrder:i}=Mne(),[a,o]=j.useState(!1);j.useEffect(()=>{(async()=>{await Fl.requestPermissions(),console.log("Notification service initialized for platform:",vt.isNativePlatform()?"mobile":"web")})()},[]),j.useEffect(()=>{o(s)},[s]),j.useEffect(()=>{t.length>0&&t.forEach(f=>{Fl.showOrderNotification(f.order_number,f.total_amount,f.id),vt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([300,100,300])})},[t]),j.useEffect(()=>{const f=async m=>{console.log("Order modal event received:",m.detail);const h=m.detail;o(!0),(h!=null&&h.startBeeping||h!=null&&h.autoOpened||h!=null&&h.fromPush)&&(console.log("🔊 Starting beeping for auto-opened notification"),await c()),vt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([200,100,200])};return window.addEventListener("showOrderModal",f),()=>{window.removeEventListener("showOrderModal",f)}},[]);const c=async()=>{try{console.log("🔊 Starting order notification beeping sequence..."),await Fl.playNotificationSound();let f=0;const m=10,h=setInterval(async()=>{f<m&&a?(await Fl.playNotificationSound(),vt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([150,50,150]),f++,console.log(`🔊 Beep ${f}/${m}`)):(clearInterval(h),console.log("🔇 Beeping sequence completed"))},2e3);window.orderBeepInterval=h}catch(f){console.error("Failed to start order beeping:",f)}};j.useEffect(()=>{vt.isNativePlatform()&&document.addEventListener("visibilitychange",()=>{document.hidden||(console.log("Page visible - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))})},[]);const d=()=>{o(!1),window.orderBeepInterval&&(clearInterval(window.orderBeepInterval),window.orderBeepInterval=null,console.log("🔇 Stopped beeping - modal closed"))};return n.jsxs($4.Provider,{value:{pendingOrdersCount:t.length,isModalOpen:a,closeModal:d},children:[e,n.jsx(F4,{}),n.jsx(Lne,{isOpen:a,orders:t,onAccept:r,onReject:i})]})}function Dne(){const e=j.useContext($4);return e===void 0?{pendingOrdersCount:0,isModalOpen:!1,closeModal:()=>{}}:e}function Fne({children:e,title:t,subtitle:s,headerActions:r}){return n.jsx(Ine,{children:n.jsx(Tne,{children:n.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 safe-area-inset max-w-full overflow-x-hidden",children:[n.jsx(F4,{}),n.jsx("div",{className:"pt-safe-top",children:n.jsx(Rne,{title:t,subtitle:s,headerActions:r})}),n.jsx("main",{className:"flex-1 pb-20 px-safe-x max-w-full overflow-x-hidden pt-14 sm:pt-16",children:e}),n.jsx(Ane,{})]})})})}function qt({children:e,title:t,subtitle:s,headerActions:r}){return n.jsx(Fne,{title:t,subtitle:s,headerActions:r,children:e})}const $ne=()=>{const[e,t]=j.useState({}),[s,r]=j.useState(!1);return j.useEffect(()=>{(async()=>{try{const a=await Re.getToken(),o=await Re.getUser(),c=await Re.isAuthenticated(),d=await Re.isSessionValid(),f=vt.isNativePlatform();let m="Not checked",h=null;if(a&&(o==null?void 0:o.user_type)==="vendor")try{const{response:u,data:p}=await Be("/vendor-profiles/");m=`${u.status} - ${u.ok?"Success":"Failed"}`,u.ok||(h=(p==null?void 0:p.error)||u.statusText)}catch(u){m="Error",h=u.message}else a&&(o==null?void 0:o.user_type)!=="vendor"&&(m="Not a vendor user");t({isNative:f,platform:vt.getPlatform(),token:a?`${a.substring(0,10)}...`:"None",user:o?{id:o.id,user_type:o.user_type,email:o.email}:"None",isAuthenticated:c,isSessionValid:d,vendorProfileStatus:m,vendorProfileError:h,timestamp:new Date().toISOString()})}catch(a){t({error:a.message,timestamp:new Date().toISOString()})}})()},[]),s?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-md w-full max-h-96 overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-bold",children:"Vendor Debug Info"}),n.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),n.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(e,null,2)}),n.jsx("button",{onClick:()=>{var i;(i=navigator.clipboard)==null||i.writeText(JSON.stringify(e,null,2)),alert("Debug info copied to clipboard")},className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs w-full",children:"Copy to Clipboard"})]})}):n.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 right-4 bg-red-500 text-white px-3 py-1 rounded text-xs z-50",children:"Debug"})},xo=no("PushNotifications",{}),z4=Object.freeze(Object.defineProperty({__proto__:null,PushNotifications:xo},Symbol.toStringTag,{value:"Module"})),zne=no("FCM",{web:()=>Xe(()=>import("./web-Cl8Sm-7-.js"),[]).then(e=>new e.FCMWeb)});class Bne{constructor(){yr(this,"fcmToken",null)}async initialize(){if(!vt.isNativePlatform()){console.log("🌐 Not on native platform, skipping FCM initialization");return}try{console.log("🚀 Initializing FCM Service..."),this.checkForAutoOpenOrder(),this.setupListeners(),console.log("🔐 Requesting push notification permissions...");const t=await xo.requestPermissions();if(console.log("📋 Permission result:",t),t.receive!=="granted"){console.warn("❌ Push notification permission denied");return}console.log("📝 Registering for push notifications..."),await xo.register();try{await zne.requestPermissions(),console.log("✅ FCM Community plugin initialized")}catch(s){console.warn("⚠️ FCM Community plugin not available:",s)}await this.getFCMToken(),console.log("✅ FCM Service initialized successfully")}catch(t){console.error("❌ FCM initialization failed:",t)}}checkForAutoOpenOrder(){try{const t=localStorage.getItem("autoOpenOrder");if(t){const s=JSON.parse(t);Date.now()-s.timestamp<3e4?(console.log("🚀 AUTO-OPENING ORDER FROM NOTIFICATION:",s),localStorage.removeItem("autoOpenOrder"),this.startOrderBeeping(),setTimeout(()=>{this.showOrderModalImmediately(s)},1e3)):localStorage.removeItem("autoOpenOrder")}window.addEventListener("autoOpenedFromBackground",s=>{console.log("🚀 APP AUTO-OPENED FROM BACKGROUND SERVICE:",s.detail),this.startOrderBeeping(),setTimeout(()=>{this.showOrderModalImmediately(s.detail)},500)})}catch(t){console.error("Error checking for auto-open order:",t)}}async getFCMToken(){try{return vt.isNativePlatform()?new Promise(t=>{xo.addListener("registration",s=>{this.fcmToken=s.value,console.log("🔥 FCM Token (Native):",s.value),this.sendTokenToBackend(),t(s.value)})}):null}catch(t){return console.error("Failed to get FCM token:",t),null}}setupListeners(){xo.addListener("pushNotificationReceived",t=>{var s,r,i;if(console.log("📱 Push notification received:",t),console.log("📊 Notification data:",t.data),((s=t.data)==null?void 0:s.autoOpen)==="true"||((r=t.data)==null?void 0:r.action)==="autoOpenOrder"){console.log("🚀 AGGRESSIVE AUTO-OPENING APP FROM DATA MESSAGE!"),this.forceAppToForeground(),this.startOrderBeeping(),this.showOrderModalImmediately({orderId:parseInt(t.data.orderId),orderNumber:t.data.orderNumber,amount:t.data.amount,autoOpened:!0,fromPush:!0,startBeeping:!0,aggressive:!0}),this.triggerBackgroundAutoOpen(t.data);return}(i=t.data)!=null&&i.orderId?(console.log(`🔔 Showing order modal for order: ${t.data.orderId}`),this.startOrderBeeping(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(t.data.orderId),orderNumber:t.data.orderNumber,amount:t.data.amount,fromPush:!0,startBeeping:!0}}))):console.warn("⚠️ No orderId in notification data")}),xo.addListener("pushNotificationActionPerformed",t=>{var r,i,a,o,c;console.log("🚀 NOTIFICATION TAPPED - AGGRESSIVE AUTO OPENING LIKE YANGO PRO:",t),console.log("📱 Notification data:",t.notification.data);const s=(r=t.notification.data)==null?void 0:r.orderId;s?(console.log(`🎯 AGGRESSIVE AUTO-OPENING FOR ORDER: ${s}`),this.startOrderBeeping(),localStorage.setItem("autoOpenOrder",JSON.stringify({orderId:parseInt(s),orderNumber:(i=t.notification.data)==null?void 0:i.orderNumber,amount:(a=t.notification.data)==null?void 0:a.amount,autoOpened:!0,fromPush:!0,startBeeping:!0,timestamp:Date.now()})),this.triggerAggressiveAutoOpen({orderId:parseInt(s),orderNumber:(o=t.notification.data)==null?void 0:o.orderNumber,amount:(c=t.notification.data)==null?void 0:c.amount})):(console.warn("⚠️ No orderId found in notification data"),this.triggerAggressiveAutoOpen({}))}),xo.addListener("registrationError",t=>{console.error("❌ Push registration error:",t)}),console.log("🎧 FCM listeners set up successfully")}async sendTokenToBackend(){if(!this.fcmToken){console.warn("No FCM token available to send");return}try{await this.waitForAuth();const{apiRequest:t}=await Xe(async()=>{const{apiRequest:r}=await Promise.resolve().then(()=>Gn);return{apiRequest:r}},void 0),{response:s}=await t("/api/register-fcm-token/",{method:"POST",body:JSON.stringify({fcm_token:this.fcmToken,platform:vt.getPlatform()})});s.ok?console.log("✅ FCM token sent to backend successfully"):console.warn("❌ Failed to register FCM token:",s.status)}catch(t){console.warn("❌ Failed to send FCM token:",t),setTimeout(()=>this.sendTokenToBackend(),5e3)}}async waitForAuth(t=1e4){const s=Date.now();for(;Date.now()-s<t;){try{const{authService:r}=await Xe(async()=>{const{authService:a}=await Promise.resolve().then(()=>xc);return{authService:a}},void 0);if(r.getToken()){console.log("🔐 Authentication ready for FCM token registration");return}}catch{}await new Promise(r=>setTimeout(r,500))}console.warn("⚠️ Authentication not ready, sending FCM token anyway")}showOrderModalImmediately(t){console.log("📢 SHOWING ORDER MODAL IMMEDIATELY:",t),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t}))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t}))},1500)}async forceAppToForeground(){try{console.log("🚀 FORCING APP TO FOREGROUND..."),window.focus&&window.focus(),document.hidden&&document.dispatchEvent(new Event("visibilitychange")),Object.defineProperty(document,"hidden",{value:!1,writable:!1}),Object.defineProperty(document,"visibilityState",{value:"visible",writable:!1}),window.dispatchEvent(new Event("focus")),document.dispatchEvent(new Event("visibilitychange"))}catch(t){console.warn("Could not force app focus:",t)}}triggerBackgroundAutoOpen(t){try{if(vt.isNativePlatform()){const s={action:"com.ezeyway.app.AUTO_OPEN_ORDER",extras:{orderId:t.orderId,orderNumber:t.orderNumber,amount:t.amount,autoOpened:!0}};console.log("📡 Triggering background auto-open:",s)}}catch(s){console.error("Failed to trigger background auto-open:",s)}}async triggerAggressiveAutoOpen(t){try{console.log("🚀 TRIGGERING AGGRESSIVE AUTO-OPEN..."),this.forceAppToForeground(),window.location.replace("/vendor/home");for(let s=0;s<5;s++)setTimeout(()=>{this.showOrderModalImmediately({...t,autoOpened:!0,fromPush:!0,startBeeping:!0,aggressive:!0})},s*500)}catch(s){console.error("Failed to trigger aggressive auto-open:",s)}}async startOrderBeeping(){try{console.log("🔊 Starting order notification beeping...");const{notificationService:t}=await Xe(async()=>{const{notificationService:i}=await Promise.resolve().then(()=>RE);return{notificationService:i}},void 0);await t.playNotificationSound();try{const{Haptics:i,ImpactStyle:a}=await Xe(async()=>{const{Haptics:d,ImpactStyle:f}=await import("./index-BXlyopuW.js");return{Haptics:d,ImpactStyle:f}},[]);await i.impact({style:a.Heavy});let o=0;const c=setInterval(async()=>{o<5?(await i.impact({style:a.Medium}),o++):clearInterval(c)},2e3)}catch(i){console.warn("Haptics not available:",i)}let s=0;const r=setInterval(async()=>{s<5?(await t.playNotificationSound(),s++):clearInterval(r)},3e3)}catch(t){console.error("Failed to start order beeping:",t)}}getFCMTokenValue(){return this.fcmToken}async registerToken(){this.fcmToken?await this.sendTokenToBackend():console.warn("No FCM token available to register")}}const e0=new Bne,v2=()=>{var V,H,se;const e=st(),[t,s]=j.useState(!0),[r,i]=j.useState(!1),{pendingOrdersCount:a,isModalOpen:o}=Dne(),[c,d]=j.useState(null),[f,m]=j.useState(0),[h,u]=j.useState({totalOrders:0,totalRevenue:0,totalProducts:0,totalCustomers:0,monthlyEarnings:0,monthlyGrowth:0,todaysEarnings:0}),[p,y]=j.useState([]),[v,w]=j.useState([]),[x,b]=j.useState([]),[_,N]=j.useState([]),[C,I]=j.useState([0,0,0,0,0,0]),[k,E]=j.useState([]),[M,P]=j.useState(!0),[T,A]=j.useState(1),[z,O]=j.useState(!0),[F,G]=j.useState(0),[Y,K]=j.useState(0),U=k.length>0?[k[k.length-1],...k,k[0]]:[];j.useEffect(()=>{if(k.length>0){const Q=setInterval(()=>{A(ie=>ie+1)},4e3);return()=>clearInterval(Q)}},[k.length]),j.useEffect(()=>{k.length>0&&(T===U.length-1?setTimeout(()=>{O(!1),A(1),setTimeout(()=>O(!0),50)},500):T===0&&setTimeout(()=>{O(!1),A(k.length),setTimeout(()=>O(!0),50)},500))},[T,k.length]);const B=Q=>{K(0),G(Q.targetTouches[0].clientX)},R=Q=>{K(Q.targetTouches[0].clientX)},$=()=>{if(!F||!Y)return;const Q=F-Y,ie=Q>50,he=Q<-50;ie&&T<k.length&&A(te=>te+1),he&&T>1&&A(te=>te-1)};j.useEffect(()=>{i(!0),s(!1),vt.isNativePlatform()&&e0.initialize().then(()=>{console.log("✅ FCM Service initialized on vendor home"),setTimeout(()=>{e0.registerToken()},2e3)}).catch(Q=>{console.error("❌ FCM Service initialization failed:",Q)}),W(),Z()},[]);const W=async()=>{var Q;try{const{apiRequest:ie}=await Xe(async()=>{const{apiRequest:me}=await Promise.resolve().then(()=>Gn);return{apiRequest:me}},void 0),{response:he,data:te}=await ie("/vendor-profiles/");he.ok&&((Q=te==null?void 0:te.results)!=null&&Q[0])&&d(te.results[0]);const{response:ge,data:Se}=await ie("accounts/wallet/");ge.ok&&Se&&m(parseFloat(Se.balance)||0);const{response:fe,data:ke}=await ie("/vendor/orders/");if(console.log("Orders response:",fe.ok,ke),fe.ok&&ke){const me=ke.results||ke||[];console.log("Orders found:",me.length,me);const ee=me.length,ae=me.filter(Fe=>Fe.status==="delivered");console.log("Delivered orders:",ae.length,ae);const oe=ae.reduce((Fe,He)=>Fe+parseFloat(He.total_amount||0),0),be=new Date().toDateString(),je=me.filter(Fe=>new Date(Fe.created_at).toDateString()===be),re=me.filter(Fe=>new Date(Fe.created_at).toDateString()===be&&Fe.status==="delivered").reduce((Fe,He)=>Fe+parseFloat(He.total_amount||0),0);console.log("Today earnings:",re,"Total revenue:",oe);const Ce=new Date().getMonth(),Te=new Date().getFullYear(),it=me.filter(Fe=>{const He=new Date(Fe.created_at);return He.getMonth()===Ce&&He.getFullYear()===Te&&Fe.status==="delivered"}).reduce((Fe,He)=>Fe+parseFloat(He.total_amount||0),0),Ft=[];for(let Fe=5;Fe>=0;Fe--){const He=new Date;He.setMonth(He.getMonth()-Fe);const Bt=me.filter(Et=>{const Cn=new Date(Et.created_at);return Cn.getMonth()===He.getMonth()&&Cn.getFullYear()===He.getFullYear()&&Et.status==="delivered"}).reduce((Et,Cn)=>Et+parseFloat(Cn.total_amount||0),0);Ft.push(Bt)}const Fs=new Set;me.forEach(Fe=>{var He;(He=Fe.customer_details)!=null&&He.id?Fs.add(Fe.customer_details.id):Fe.delivery_phone&&Fs.add(Fe.delivery_phone)});const le=Fs.size;u({totalOrders:ee,totalRevenue:oe,totalProducts:0,totalCustomers:le,monthlyEarnings:it,monthlyGrowth:15,todaysEarnings:re}),I(Ft),y(je.slice(0,5));const De={};ae.forEach(Fe=>{var He;(He=Fe.items)==null||He.forEach(Ze=>{var Et,Cn;const Bt=((Et=Ze.product_details)==null?void 0:Et.id)||Ze.product_name;De[Bt]||(De[Bt]={id:Bt,name:Ze.product_name,price:Ze.unit_price,sold:0,rating:4.5,images:((Cn=Ze.product_details)==null?void 0:Cn.images)||[]}),De[Bt].sold+=parseInt(Ze.quantity)||0})});const Je=Object.values(De).sort((Fe,He)=>He.sold-Fe.sold).slice(0,6);w(Je)}const{response:xe,data:de}=await ie("products/");if(xe.ok&&de){const me=de.results||de||[];N(me.slice(0,6)),u(ae=>({...ae,totalProducts:me.length}));const ee=me.filter(ae=>ae.featured).slice(0,6);b(ee)}}catch(ie){console.warn("Dashboard data fetch error:",ie)}},Z=async()=>{try{const{apiRequest:Q}=await Xe(async()=>{const{apiRequest:te}=await Promise.resolve().then(()=>Gn);return{apiRequest:te}},void 0),{response:ie,data:he}=await Q("sliders/?user_type=vendor");ie.ok&&he&&he.sliders&&(E(he.sliders),he.sliders.length>0&&A(1))}catch(Q){console.warn("Sliders fetch error:",Q)}finally{P(!1)}},X=Q=>{switch(Q){case"pending":return{icon:kD,color:"red",bgColor:"red-50",textColor:"red-600",label:"Action Required"};case"confirmed":case"preparing":return{icon:or,color:"orange",bgColor:"orange-50",textColor:"orange-600",label:"Processing"};case"delivered":return{icon:Yu,color:"green",bgColor:"green-50",textColor:"green-600",label:"Completed"};default:return{icon:or,color:"blue",bgColor:"blue-50",textColor:"blue-600",label:"In Progress"}}};return t?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Vn,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),n.jsx("p",{className:"text-gray-600",children:"Verifying your account..."})]})}):r?n.jsxs(n.Fragment,{children:[n.jsx($ne,{}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/20 z-[9998] pointer-events-none"}),n.jsx(qt,{title:"Dashboard",children:n.jsxs("div",{className:`space-y-4 pb-16 max-w-full overflow-x-hidden ${o?"pointer-events-none":""}`,children:[n.jsxs("div",{className:"p-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ea,{className:"h-10 w-10",children:[n.jsx(Mr,{src:(V=c==null?void 0:c.user_info)==null?void 0:V.profile_picture}),n.jsx(ta,{className:"bg-[#A98D7E] text-white",children:((H=c==null?void 0:c.business_name)==null?void 0:H[0])||((se=c==null?void 0:c.owner_name)==null?void 0:se[0])||"V"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:(c==null?void 0:c.business_name)||"My Store"}),n.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[n.jsx(em,{className:"h-3 w-3"})," Rs",(f||0).toFixed(2)," Available"]})]})]}),n.jsxs(ne,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto flex items-center gap-1",onClick:()=>e("/vendor/wallet"),children:[n.jsx(em,{className:"h-3 w-3"}),"Wallet"]})]}),n.jsx("div",{className:"px-4",children:n.jsxs("div",{className:"grid grid-cols-4 gap-1 sm:gap-2",children:[n.jsx(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=orders"),children:n.jsx(Ae,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-5 h-5 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-1",children:n.jsx(At,{className:"h-2.5 w-2.5 text-teal-600"})}),n.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Orders"}),n.jsx("p",{className:"text-xs font-bold text-gray-900",children:h.totalOrders})]})})}),n.jsx(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=revenue"),children:n.jsx(Ae,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-1",children:n.jsx(Br,{className:"h-2.5 w-2.5 text-blue-600"})}),n.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Revenue"}),n.jsxs("p",{className:"text-xs font-bold text-gray-900",children:["Rs",h.totalRevenue.toFixed(0)]})]})})}),n.jsx(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=products"),children:n.jsx(Ae,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-1",children:n.jsx(ms,{className:"h-2.5 w-2.5 text-purple-600"})}),n.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Products"}),n.jsx("p",{className:"text-xs font-bold text-gray-900",children:h.totalProducts})]})})}),n.jsx(Ee,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=customers"),children:n.jsx(Ae,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-5 h-5 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-1",children:n.jsx(ab,{className:"h-2.5 w-2.5 text-orange-600"})}),n.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Customers"}),n.jsx("p",{className:"text-xs font-bold text-gray-900",children:h.totalCustomers})]})})})]})}),n.jsx("div",{className:"mb-6",children:M?n.jsx("div",{className:"relative overflow-hidden rounded-2xl shadow-lg h-48 bg-gray-100 flex items-center justify-center mx-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[n.jsx(Vn,{className:"h-5 w-5 animate-spin"}),n.jsx("span",{children:"Loading banners..."})]})}):k.length>0?n.jsxs("div",{className:"relative md:overflow-visible overflow-hidden md:px-8 mx-4 md:mx-0",children:[n.jsx("div",{className:`flex ${z?"transition-transform duration-500 ease-in-out":""}`,style:{transform:typeof window<"u"&&window.innerWidth<768?`translateX(calc(-${T*100}% + 100%))`:`translateX(calc(-${T*50}% + 25%))`},onTouchStart:B,onTouchMove:R,onTouchEnd:$,children:U.map((Q,ie)=>{const he=typeof window<"u"&&window.innerWidth<768,te=!he&&ie===T;return n.jsx("div",{className:`flex-shrink-0 relative cursor-pointer transition-all duration-300 ${he?"w-full rounded-2xl shadow-lg overflow-hidden":`${te?"scale-100 opacity-100 z-10":"scale-75 opacity-60 z-0"} rounded-lg overflow-hidden`}`,style:he?{}:{width:"50%"},onClick:()=>{Q.link_url&&window.open(Q.link_url,"_blank")},children:n.jsx("div",{className:"relative h-48",children:Q.image_url?n.jsx("img",{src:Q.image_url,alt:Q.title,className:"w-full h-full object-cover md:object-contain",onError:ge=>{ge.target.style.display="none",ge.target.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}):n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/80 to-purple-600/80 flex items-center justify-center",children:n.jsx("h3",{className:"text-white text-lg font-bold text-center px-4",children:Q.title})})})},`${Q.id}-${ie}`)})}),k.length>1&&n.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-1",children:k.map((Q,ie)=>n.jsx("button",{onClick:()=>A(ie+1),className:`w-2 h-2 rounded-full transition-colors ${ie===(T-1+k.length)%k.length?"bg-blue-500":"bg-gray-300"}`},ie))})]}):n.jsx("div",{className:"h-48 bg-gray-100 rounded-2xl shadow-lg flex items-center justify-center mx-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:n.jsx(At,{className:"h-6 w-6 text-gray-400"})}),n.jsx("p",{className:"text-gray-500 text-sm",children:"No promotional banners available"})]})})}),n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Earnings"}),n.jsxs(ne,{variant:"outline",className:"text-gray-700 text-sm px-3 py-2 h-auto flex items-center gap-2",onClick:()=>e("/vendor/sales"),children:[n.jsx(Br,{className:"h-4 w-4"}),"View Transactions",n.jsx(wD,{className:"h-4 w-4"})]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Today's Earnings"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rs",(h.todaysEarnings||0).toFixed(2)]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Earnings"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["Rs",(h.totalRevenue||0).toFixed(2)]})]})]}),n.jsx(Ee,{children:n.jsx(Ae,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Earning in ",new Date().toLocaleDateString("en-US",{month:"long"})]}),n.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["Rs",h.monthlyEarnings.toFixed(2)," ",n.jsxs("span",{className:"text-green-600",children:["+",h.monthlyGrowth,"%"]})]})]}),n.jsx("div",{className:"flex items-end gap-1 h-8",children:C.map((Q,ie)=>{const he=Math.max(...C,1),te=Q>0?Math.max(4,Q/he*24):2,ge=ie===C.length-1;return n.jsx("div",{className:`w-2 rounded-t ${ge?"bg-green-500":Q>0?"bg-blue-400":"bg-gray-200"}`,style:{height:`${te}px`}},ie)})})]})})})]}),n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Orders"}),n.jsx(ne,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",onClick:()=>e("/vendor/orders"),children:"View All"})]}),n.jsx("div",{className:`space-y-3 ${p.length>7?"max-h-96 overflow-y-auto":""}`,children:p.length===0?n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-6 text-center",children:[n.jsx(At,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-500",children:"No orders today"})]})}):p.map(Q=>{var Se;const ie=X(Q.status),he=ie.icon,te=Q.created_at?new Date(Q.created_at):new Date,ge=Math.floor((Date.now()-te.getTime())/(1e3*60));return n.jsx(Ee,{className:`border-l-4 border-l-${ie.color}-500 cursor-pointer hover:shadow-md transition-shadow`,onClick:()=>e(`/vendor/orders?tab=${Q.status}&orderId=${Q.id}`),children:n.jsxs(Ae,{className:"p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(he,{className:`h-4 w-4 text-${ie.color}-500`}),n.jsx("span",{className:`text-xs font-medium text-${ie.textColor} bg-${ie.bgColor} px-2 py-1 rounded-full`,children:ie.label})]}),n.jsxs("span",{className:"text-xs text-gray-500",children:["#",Q.order_number]})]}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:Q.status==="pending"?"New order received":Q.status==="delivered"?"Order delivered successfully":"Order in progress"}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(Q.total_amount||0).toFixed(2)," • ",((Se=Q.items)==null?void 0:Se.length)||0," items • ",ge<60?`${ge} min ago`:`${Math.floor(ge/60)} hours ago`]})]})},Q.id)})})]}),n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Best Selling Products"}),n.jsx(ne,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",children:"View All"})]}),n.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-3 overflow-x-auto md:overflow-visible",children:n.jsx("div",{className:"flex gap-3 pb-2 md:contents",children:v.map(Q=>{var ie,he;return n.jsx(Ee,{className:"w-32 flex-shrink-0 md:w-auto md:flex-shrink",children:n.jsx(Ae,{className:"md:p-2 p-3",children:n.jsxs("div",{className:"md:space-y-1 space-y-2",children:[n.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden",children:n.jsx("img",{src:((he=(ie=Q.images)==null?void 0:ie[0])==null?void 0:he.image_url)||"/api/placeholder/80/80",alt:Q.name,className:"w-full h-full object-cover"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:Q.name}),n.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(Q.price).toFixed(2)]})]}),n.jsxs("div",{className:"flex items-center justify-between md:text-[10px] text-xs",children:[n.jsxs("span",{className:"text-green-600 font-medium",children:[Q.sold," sold"]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(dn,{className:"md:h-2 md:w-2 h-3 w-3 text-yellow-400 fill-current"}),n.jsx("span",{className:"text-gray-600",children:Q.rating})]})]}),n.jsxs("div",{className:"md:text-[10px] text-xs text-gray-500",children:["Stock: ",Q.quantity]})]})})},Q.id)})})})]}),x.length>0&&n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Featured Products"}),n.jsx(ne,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",children:"View All"})]}),n.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-3 overflow-x-auto md:overflow-visible",children:n.jsx("div",{className:"flex gap-3 pb-2 md:contents",children:x.map(Q=>{var ie,he;return n.jsx(Ee,{className:"w-32 flex-shrink-0 relative md:w-auto md:flex-shrink",children:n.jsx(Ae,{className:"md:p-2 p-3",children:n.jsxs("div",{className:"md:space-y-1 space-y-2",children:[n.jsxs("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden relative",children:[n.jsx("img",{src:((he=(ie=Q.images)==null?void 0:ie[0])==null?void 0:he.image_url)||"/api/placeholder/80/80",alt:Q.name,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white md:text-[10px] text-xs px-1 py-0.5 rounded-full font-bold shadow-md",children:"★"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:Q.name}),n.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(Q.price).toFixed(2)]})]}),n.jsxs("div",{className:"flex items-center justify-between md:text-[10px] text-xs",children:[n.jsxs("span",{className:"text-blue-600 font-medium",children:[Q.total_sold||0," sold"]}),n.jsx("span",{className:`px-1 py-0.5 rounded md:text-[10px] text-xs ${Q.quantity>10?"bg-green-100 text-green-700":Q.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Q.quantity>10?"In Stock":Q.quantity>0?"Low":"Out"})]})]})})},Q.id)})})})]}),n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Products"}),n.jsxs(ne,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto flex items-center gap-1",onClick:()=>e("/vendor/products"),children:[n.jsx(Nn,{className:"h-3 w-3"}),"Manage"]})]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-w-full",children:_.map(Q=>{var ie,he;return n.jsx(Ee,{className:"overflow-hidden",children:n.jsx(Ae,{className:"md:p-2 p-3",children:n.jsxs("div",{className:"md:space-y-1 space-y-2",children:[n.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded overflow-hidden",children:n.jsx("img",{src:((he=(ie=Q.images)==null?void 0:ie[0])==null?void 0:he.image_url)||"/api/placeholder/60/60",alt:Q.name,className:"w-full h-full object-cover"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:Q.name}),n.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(Q.price).toFixed(2)]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"md:text-[10px] text-xs text-gray-500",children:["Stock: ",Q.quantity]}),n.jsx("span",{className:`md:text-[10px] text-xs px-2 py-1 rounded-full ${Q.quantity>10?"bg-green-100 text-green-700":Q.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Q.quantity>10?"Active":Q.quantity>0?"Low Stock":"Out of Stock"})]})]})})},Q.id)})})]})]})})]}):n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[n.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(or,{className:"h-8 w-8 text-yellow-600"})}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Account Under Review"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Your vendor application is being reviewed by our team. You'll receive an email notification once approved."}),n.jsx(ne,{onClick:()=>e("/vendor/onboarding"),variant:"outline",className:"w-full",children:"Back to Application"})]})})},B4=j.forwardRef(({className:e,...t},s)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:s,className:We("w-full caption-bottom text-sm",e),...t})}));B4.displayName="Table";const V4=j.forwardRef(({className:e,...t},s)=>n.jsx("thead",{ref:s,className:We("[&_tr]:border-b",e),...t}));V4.displayName="TableHeader";const U4=j.forwardRef(({className:e,...t},s)=>n.jsx("tbody",{ref:s,className:We("[&_tr:last-child]:border-0",e),...t}));U4.displayName="TableBody";const Vne=j.forwardRef(({className:e,...t},s)=>n.jsx("tfoot",{ref:s,className:We("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Vne.displayName="TableFooter";const t0=j.forwardRef(({className:e,...t},s)=>n.jsx("tr",{ref:s,className:We("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));t0.displayName="TableRow";const Ii=j.forwardRef(({className:e,...t},s)=>n.jsx("th",{ref:s,className:We("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Ii.displayName="TableHead";const Di=j.forwardRef(({className:e,...t},s)=>n.jsx("td",{ref:s,className:We("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Di.displayName="TableCell";const Une=j.forwardRef(({className:e,...t},s)=>n.jsx("caption",{ref:s,className:We("mt-4 text-sm text-muted-foreground",e),...t}));Une.displayName="TableCaption";const Pd=[{id:"ORD-001",customer:"John Doe",product:"Wireless Headphones",quantity:2,amount:"₹4,998",status:"Pending",date:"2024-01-15",address:"123 Main St, City"},{id:"ORD-002",customer:"Jane Smith",product:"Smart Watch",quantity:1,amount:"₹12,999",status:"Processing",date:"2024-01-14",address:"456 Oak Ave, City"},{id:"ORD-003",customer:"Mike Johnson",product:"Laptop Stand",quantity:3,amount:"₹2,997",status:"Shipped",date:"2024-01-13",address:"789 Pine Rd, City"},{id:"ORD-004",customer:"Sarah Wilson",product:"Bluetooth Speaker",quantity:1,amount:"₹3,499",status:"Delivered",date:"2024-01-12",address:"321 Elm St, City"}],x2={Pending:"bg-yellow-100 text-yellow-800",Processing:"bg-blue-100 text-blue-800",Shipped:"bg-purple-100 text-purple-800",Delivered:"bg-green-100 text-green-800"};function qne(){const e=st(),[t,s]=j.useState(""),[r,i]=j.useState("all"),[a,o]=j.useState(!1),[c,d]=j.useState("Tools"),f=Pd.filter(m=>{const h=m.customer.toLowerCase().includes(t.toLowerCase())||m.product.toLowerCase().includes(t.toLowerCase())||m.id.toLowerCase().includes(t.toLowerCase()),u=r==="all"||m.status.toLowerCase()===r.toLowerCase();return h&&u});return n.jsx(qt,{title:"Tools",children:n.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 pt-1 pb-16",children:[n.jsx("div",{className:"bg-white p-4 border-b mb-4",children:n.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:n.jsx(xn,{className:"h-6 w-6 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Business Tools"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Manage your products, orders, and business operations"})]})]}),n.jsxs(Fo,{open:a,onOpenChange:o,children:[n.jsx(jy,{asChild:!0,children:n.jsxs(ne,{size:"sm",children:[n.jsx(xn,{className:"mr-2 h-4 w-4"})," Create Order"]})}),n.jsxs(Da,{className:"sm:max-w-[500px] rounded-lg",children:[n.jsxs(Fa,{children:[n.jsx($a,{className:"text-lg font-semibold",children:"Create New Order"}),n.jsx(GR,{className:"text-sm text-gray-600",children:"Fill in the details below to create a new order for your customer."})]}),n.jsxs("div",{className:"grid gap-3 py-3",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"customer",className:"text-sm font-medium",children:"Customer Name"}),n.jsx(ve,{id:"customer",placeholder:"Enter customer name",className:"h-9"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"product",className:"text-sm font-medium",children:"Product"}),n.jsxs(Vt,{children:[n.jsx($t,{className:"h-9",children:n.jsx(Ut,{placeholder:"Select product"})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"headphones",children:"Wireless Headphones"}),n.jsx(qe,{value:"watch",children:"Smart Watch"}),n.jsx(qe,{value:"stand",children:"Laptop Stand"}),n.jsx(qe,{value:"speaker",children:"Bluetooth Speaker"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"quantity",className:"text-sm font-medium",children:"Quantity"}),n.jsx(ve,{id:"quantity",type:"number",placeholder:"1",className:"h-9"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"amount",className:"text-sm font-medium",children:"Amount"}),n.jsx(ve,{id:"amount",placeholder:"₹0.00",className:"h-9"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"address",className:"text-sm font-medium",children:"Delivery Address"}),n.jsx(Yn,{id:"address",placeholder:"Enter delivery address",className:"h-20"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{htmlFor:"notes",className:"text-sm font-medium",children:"Notes"}),n.jsx(Yn,{id:"notes",placeholder:"Any special instructions...",className:"h-16"})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>o(!1),children:"Cancel"}),n.jsx(ne,{size:"sm",onClick:()=>o(!1),children:"Create Order"})]})]})]})]})}),n.jsxs(Ee,{className:"mb-4 border border-gray-200",children:[n.jsx(jt,{className:"bg-gray-50 border-b border-gray-200 p-3",children:n.jsxs(_t,{className:"flex items-center gap-2 text-base",children:[n.jsx("div",{className:"p-1.5 bg-white rounded-md shadow-sm",children:n.jsx(xn,{className:"h-4 w-4 text-gray-700"})}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-900 font-bold text-sm",children:"Business Functions"}),n.jsx("p",{className:"text-xs text-gray-600 font-normal mt-0.5",children:"Manage your core business operations"})]})]})}),n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-2",children:[n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/add-products"),children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:"📦"})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Add Products"}),n.jsx(Ie,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full text-[10px]",children:"New"})]}),n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/products"),children:[n.jsx("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-green-200 group-hover:to-green-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:"📦"})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Products"}),n.jsx(Ie,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full text-[10px]",children:"New"})]}),n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/orders"),children:[n.jsx("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-purple-200 group-hover:to-purple-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:"📋"})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Orders"})]}),n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/return-orders"),children:[n.jsx("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-orange-200 group-hover:to-orange-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:"↺"})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Return Order"})]}),n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/reviews"),children:[n.jsx("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-yellow-200 group-hover:to-yellow-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:"⭐"})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Manage Reviews"})]}),n.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/income"),children:[n.jsx("div",{className:"bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-emerald-200 group-hover:to-emerald-300 transition-all duration-150",children:n.jsx("span",{className:"text-lg",children:"💰"})}),n.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"My Income"})]})]})})]}),n.jsxs(Ee,{className:"mb-4 rounded-lg border border-gray-200",children:[n.jsx(jt,{className:"bg-gray-50 p-3 border-b border-gray-200",children:n.jsx(_t,{className:"text-base font-semibold text-gray-900",children:"Business Upgrading"})}),n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-lg p-2 flex-shrink-0",children:n.jsx("span",{className:"text-lg",children:"📈"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-700 font-medium",children:"Business Advisor"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Get expert guidance"})]}),n.jsx(Ie,{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"New"})]})})]}),n.jsx(Ee,{className:"mb-4 rounded-lg border border-gray-200",children:n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Lo,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),n.jsx(ve,{placeholder:"Search orders...",value:t,onChange:m=>s(m.target.value),className:"pl-8 h-9 text-sm"})]})}),n.jsxs(Vt,{value:r,onValueChange:i,children:[n.jsxs($t,{className:"w-full sm:w-[160px] h-9 text-sm",children:[n.jsx(ji,{className:"mr-2 h-3 w-3"}),n.jsx(Ut,{placeholder:"Filter by status"})]}),n.jsxs(zt,{children:[n.jsx(qe,{value:"all",children:"All Status"}),n.jsx(qe,{value:"pending",children:"Pending"}),n.jsx(qe,{value:"processing",children:"Processing"}),n.jsx(qe,{value:"shipped",children:"Shipped"}),n.jsx(qe,{value:"delivered",children:"Delivered"})]})]})]})})}),n.jsxs(Ee,{className:"hidden md:block mb-4 rounded-lg border border-gray-200",children:[n.jsx(jt,{className:"p-4",children:n.jsx(_t,{className:"text-base font-semibold",children:"Recent Orders"})}),n.jsx(Ae,{className:"p-4",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(B4,{children:[n.jsx(V4,{children:n.jsxs(t0,{children:[n.jsx(Ii,{className:"text-xs",children:"Order ID"}),n.jsx(Ii,{className:"text-xs",children:"Customer"}),n.jsx(Ii,{className:"text-xs",children:"Product"}),n.jsx(Ii,{className:"text-xs",children:"Qty"}),n.jsx(Ii,{className:"text-xs",children:"Amount"}),n.jsx(Ii,{className:"text-xs",children:"Status"}),n.jsx(Ii,{className:"text-xs",children:"Date"}),n.jsx(Ii,{className:"text-right text-xs",children:"Actions"})]})}),n.jsx(U4,{children:f.slice(0,3).map(m=>n.jsxs(t0,{className:"h-12",children:[n.jsx(Di,{className:"text-sm font-medium",children:m.id}),n.jsx(Di,{className:"text-sm",children:m.customer}),n.jsx(Di,{className:"text-sm",children:m.product}),n.jsx(Di,{className:"text-sm",children:m.quantity}),n.jsx(Di,{className:"text-sm",children:m.amount}),n.jsx(Di,{children:n.jsx(Ie,{className:`${x2[m.status]} text-xs px-2 py-1`,children:m.status})}),n.jsx(Di,{className:"text-sm",children:m.date}),n.jsx(Di,{className:"text-right",children:n.jsxs(yc,{children:[n.jsx(bc,{asChild:!0,children:n.jsx(ne,{variant:"ghost",className:"h-6 w-6 p-0",children:n.jsx(oN,{className:"h-3 w-3"})})}),n.jsxs(Zo,{align:"end",children:[n.jsxs(po,{className:"text-xs",children:[n.jsx(Jf,{className:"mr-2 h-3 w-3"})," Edit"]}),n.jsx(po,{className:"text-xs",children:"View Details"}),n.jsxs(po,{className:"text-red-600 text-xs",children:[n.jsx(Ua,{className:"mr-2 h-3 w-3"})," Delete"]})]})]})})]},m.id))})]})})})]}),n.jsxs("div",{className:"md:hidden space-y-3",children:[n.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Recent Orders"}),f.slice(0,2).map(m=>n.jsxs(Ee,{className:"p-3 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:m.id}),n.jsx("p",{className:"text-xs text-gray-600",children:m.customer})]}),n.jsx(Ie,{className:`${x2[m.status]} text-xs px-2 py-1`,children:m.status})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-600",children:"Product:"}),n.jsx("span",{className:"font-medium",children:m.product})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-600",children:"Qty:"}),n.jsx("span",{className:"font-medium",children:m.quantity})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-600",children:"Amount:"}),n.jsx("span",{className:"font-semibold text-orange-600",children:m.amount})]})]}),n.jsx("div",{className:"flex justify-end mt-3",children:n.jsxs(yc,{children:[n.jsx(bc,{asChild:!0,children:n.jsxs(ne,{variant:"outline",size:"sm",className:"h-7 text-xs border-gray-300",children:[n.jsx(oN,{className:"h-3 w-3 mr-1"})," Actions"]})}),n.jsxs(Zo,{align:"end",children:[n.jsxs(po,{className:"text-xs",children:[n.jsx(Jf,{className:"mr-2 h-3 w-3"})," Edit"]}),n.jsx(po,{className:"text-xs",children:"View Details"}),n.jsxs(po,{className:"text-red-600 text-xs",children:[n.jsx(Ua,{className:"mr-2 h-3 w-3"})," Delete"]})]})]})})]},m.id))]}),n.jsxs("div",{className:"grid gap-3 md:grid-cols-4 mb-4",children:[n.jsxs(Ee,{className:"rounded-lg border border-gray-200",children:[n.jsx(jt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:n.jsx(_t,{className:"text-xs font-medium text-gray-900",children:"Total Orders"})}),n.jsxs(Ae,{className:"p-3 pt-0",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900",children:Pd.length}),n.jsx("p",{className:"text-xs text-gray-600",children:"+2 from yesterday"})]})]}),n.jsxs(Ee,{className:"rounded-lg border border-gray-200",children:[n.jsx(jt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:n.jsx(_t,{className:"text-xs font-medium text-gray-900",children:"Pending"})}),n.jsxs(Ae,{className:"p-3 pt-0",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900",children:Pd.filter(m=>m.status==="Pending").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Requires attention"})]})]}),n.jsxs(Ee,{className:"rounded-lg border border-gray-200",children:[n.jsx(jt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:n.jsx(_t,{className:"text-xs font-medium text-gray-900",children:"Processing"})}),n.jsxs(Ae,{className:"p-3 pt-0",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900",children:Pd.filter(m=>m.status==="Processing").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"In progress"})]})]}),n.jsxs(Ee,{className:"rounded-lg border border-gray-200",children:[n.jsx(jt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:n.jsx(_t,{className:"text-xs font-medium text-gray-900",children:"Completed"})}),n.jsxs(Ae,{className:"p-3 pt-0",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900",children:Pd.filter(m=>m.status==="Delivered").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Successfully delivered"})]})]})]}),n.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 md:hidden flex justify-around items-center p-3 shadow-md",children:[n.jsxs("button",{onClick:()=>d("Home"),className:`flex flex-col items-center text-gray-500 ${c==="Home"?"text-orange-500":""}`,children:[n.jsx("span",{className:"text-xl",children:"🏠"}),n.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),n.jsxs("button",{onClick:()=>d("Tools"),className:`flex flex-col items-center text-gray-500 ${c==="Tools"?"text-orange-500":""}`,children:[n.jsx("span",{className:"text-xl",children:"🛠️"}),n.jsx("span",{className:"text-xs font-medium",children:"Tools"})]}),n.jsxs("button",{onClick:()=>d("Messages"),className:`flex flex-col items-center text-gray-500 ${c==="Messages"?"text-orange-500":""}`,children:[n.jsx("span",{className:"text-xl",children:"💬"}),n.jsx("span",{className:"text-xs font-medium",children:"Messages"})]}),n.jsxs("button",{onClick:()=>d("Me"),className:`flex flex-col items-center text-gray-500 ${c==="Me"?"text-orange-500":""}`,children:[n.jsx("span",{className:"text-xl",children:"👤"}),n.jsx("span",{className:"text-xs font-medium",children:"Me"})]})]})]})})}const Hne=()=>{const[e,t]=j.useState([]),[s,r]=j.useState(!0),[i,a]=j.useState("all"),[o,c]=j.useState(!1),[d,f]=j.useState(""),[m,h]=j.useState(""),[u,p]=j.useState(1),[y,v]=j.useState(1),[w,x]=j.useState(0),b=20,[_,N]=j.useState({totalSales:0,totalRefunds:0,netEarnings:0,todaySales:0,monthSales:0});j.useEffect(()=>{I()},[d,m,u]);const C=F=>{p(F)},I=async()=>{try{r(!0);const F=new URLSearchParams({page:u.toString(),page_size:b.toString()});d&&F.append("date_from",d),m&&F.append("date_to",m);const{response:G,data:Y}=await Be(`/vendor/orders/?${F}`);if(G.ok&&Y){const K=Y.results||Y||[];v(Math.ceil((Y.count||K.length)/b)),x(Y.count||K.length);const U=[];K.forEach(Q=>{var ie,he,te;Q.status==="delivered"&&U.push({id:Q.id,order_number:Q.order_number,customer_name:((ie=Q.customer_details)==null?void 0:ie.username)||Q.delivery_name,amount:parseFloat(Q.total_amount),type:"sale",status:"completed",created_at:Q.created_at,items_count:((he=Q.items)==null?void 0:he.length)||0}),((te=Q.refunds)==null?void 0:te.length)>0&&Q.refunds.forEach(ge=>{var Se,fe;ge.status==="completed"&&U.push({id:`refund-${ge.id}`,order_number:Q.order_number,customer_name:((Se=Q.customer_details)==null?void 0:Se.username)||Q.delivery_name,amount:-parseFloat(ge.approved_amount||ge.requested_amount),type:"refund",status:"completed",created_at:ge.completed_at||ge.created_at,items_count:((fe=Q.items)==null?void 0:fe.length)||0})})}),U.sort((Q,ie)=>new Date(ie.created_at).getTime()-new Date(Q.created_at).getTime());let B=U;if(d&&m){const Q=new Date(d),ie=new Date(m);ie.setHours(23,59,59,999),B=U.filter(he=>{const te=new Date(he.created_at);return te>=Q&&te<=ie})}t(B);const R=U.filter(Q=>Q.type==="sale").reduce((Q,ie)=>Q+ie.amount,0),$=Math.abs(U.filter(Q=>Q.type==="refund").reduce((Q,ie)=>Q+ie.amount,0)),W=R-$,Z=new Date().toDateString(),X=U.filter(Q=>new Date(Q.created_at).toDateString()===Z&&Q.type==="sale").reduce((Q,ie)=>Q+ie.amount,0),V=new Date().getMonth(),H=new Date().getFullYear(),se=U.filter(Q=>{const ie=new Date(Q.created_at);return ie.getMonth()===V&&ie.getFullYear()===H&&Q.type==="sale"}).reduce((Q,ie)=>Q+ie.amount,0);N({totalSales:R,totalRefunds:$,netEarnings:W,todaySales:X,monthSales:se})}}catch(F){console.error("Error fetching sales data:",F)}finally{r(!1)}},k=F=>F==="all"?e:F==="sales"?e.filter(G=>G.type==="sale"):F==="refunds"?e.filter(G=>G.type==="refund"):e,E=()=>{const F=[["Date","Time","Type","Order Number","Customer","Amount","Status","Items"].join(","),...e.map(U=>[z(U.created_at),O(U.created_at),U.type,U.order_number,`"${U.customer_name}"`,Math.abs(U.amount).toFixed(2),U.status,U.items_count].join(","))].join(`
`),G=new Blob([F],{type:"text/csv"}),Y=window.URL.createObjectURL(G),K=document.createElement("a");K.href=Y,K.download=`sales-report-${d||"all"}-${m||new Date().toISOString().split("T")[0]}.csv`,K.click(),window.URL.revokeObjectURL(Y)},M=()=>{const F=new Date().toLocaleDateString(),G=d&&m?`${d} to ${m}`:"All Time",Y=`
===========================================
           SALES & EARNINGS REPORT
===========================================
Generated: ${F}
Period: ${G}

SUMMARY
-------------------------------------------
Total Sales: Rs${_.totalSales.toFixed(2)}
Total Refunds: Rs${_.totalRefunds.toFixed(2)}
Net Earnings: Rs${_.netEarnings.toFixed(2)}
Today's Sales: Rs${_.todaySales.toFixed(2)}
This Month: Rs${_.monthSales.toFixed(2)}

TRANSACTIONS (${e.length} records)
-------------------------------------------
${e.map(U=>`${z(U.created_at)} ${O(U.created_at)} | ${U.type.toUpperCase().padEnd(6)} | ${U.order_number.padEnd(12)} | Rs${Math.abs(U.amount).toFixed(2).padStart(8)} | ${U.customer_name}`).join(`
`)}

===========================================
    `,K=window.open("","_blank");K==null||K.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${Y}</pre>`),K==null||K.print()},P=()=>{const F=`Sales Report

Total Sales: Rs${_.totalSales.toFixed(2)}
Total Refunds: Rs${_.totalRefunds.toFixed(2)}
Net Earnings: Rs${_.netEarnings.toFixed(2)}

Transactions: ${e.length}`;if(navigator.share)navigator.share({title:"Sales Report",text:F});else{const G=`https://wa.me/?text=${encodeURIComponent(F)}`;window.open(G,"_blank")}},T=()=>{p(1),I(),c(!1)},A=()=>{f(""),h(""),p(1),I(),c(!1)},z=F=>new Date(F).toLocaleDateString(),O=F=>new Date(F).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return n.jsx(qt,{title:"Sales & Earnings",children:n.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx(Ee,{children:n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Br,{className:"h-4 w-4 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Total Sales"}),n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",_.totalSales.toFixed(2)]})]})]})})}),n.jsx(Ee,{children:n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(NP,{className:"h-4 w-4 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Total Refunds"}),n.jsxs("p",{className:"text-sm font-bold text-red-600",children:["Rs",_.totalRefunds.toFixed(2)]})]})]})})})]}),n.jsx(Ee,{children:n.jsx(Ae,{className:"p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Net Earnings"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rs",_.netEarnings.toFixed(2)]}),n.jsxs("div",{className:"flex justify-between mt-3 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"Today"}),n.jsxs("p",{className:"font-semibold",children:["Rs",_.todaySales.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"This Month"}),n.jsxs("p",{className:"font-semibold",children:["Rs",_.monthSales.toFixed(2)]})]})]})]})})})]}),n.jsx("div",{className:"px-4",children:n.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sales Transactions"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:M,children:n.jsx(ib,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:E,children:n.jsx(Hl,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:P,children:n.jsx(Ho,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>c(!0),children:n.jsx(ji,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:I,children:n.jsx(xi,{className:"h-4 w-4"})})]})]}),n.jsxs(Si,{value:i,onValueChange:a,className:"w-full",children:[n.jsx("div",{className:"border-b border-gray-100 overflow-x-auto",children:n.jsxs(qr,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[n.jsxs(Ct,{value:"all",className:"text-xs py-2 px-3",children:["All (",e.length,")"]}),n.jsxs(Ct,{value:"sales",className:"text-xs py-2 px-3",children:["Sales (",e.filter(F=>F.type==="sale").length,")"]}),n.jsxs(Ct,{value:"refunds",className:"text-xs py-2 px-3",children:["Refunds (",e.filter(F=>F.type==="refund").length,")"]})]})}),n.jsx(dt,{value:"all",className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:s?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(xi,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading transactions..."})]}):k("all").length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(At,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-500",children:"No transactions found"})]}):k("all").map(F=>n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${F.type==="sale"?"bg-green-100":"bg-red-100"}`,children:F.type==="sale"?n.jsx(bu,{className:"h-5 w-5 text-green-600"}):n.jsx(wu,{className:"h-5 w-5 text-red-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[F.type==="sale"?"Sale":"Refund"," - ",F.order_number]}),n.jsxs("p",{className:"text-xs text-gray-600",children:[F.customer_name," • ",F.items_count," items"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[z(F.created_at)," at ",O(F.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`text-sm font-bold ${F.type==="sale"?"text-green-600":"text-red-600"}`,children:[F.type==="sale"?"+":"","Rs",Math.abs(F.amount).toFixed(2)]}),n.jsx(Ie,{variant:"default",className:"text-xs",children:F.status})]})]})},F.id))})}),n.jsx(dt,{value:"sales",className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:k("sales").map(F=>n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(bu,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Sale - ",F.order_number]}),n.jsxs("p",{className:"text-xs text-gray-600",children:[F.customer_name," • ",F.items_count," items"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[z(F.created_at)," at ",O(F.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+Rs",F.amount.toFixed(2)]}),n.jsx(Ie,{variant:"default",className:"text-xs",children:"completed"})]})]})},F.id))})}),n.jsx(dt,{value:"refunds",className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:k("refunds").map(F=>n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(wu,{className:"h-5 w-5 text-red-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Refund - ",F.order_number]}),n.jsxs("p",{className:"text-xs text-gray-600",children:[F.customer_name," • ",F.items_count," items"]}),n.jsxs("p",{className:"text-xs text-gray-500",children:[z(F.created_at)," at ",O(F.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-red-600",children:["Rs",Math.abs(F.amount).toFixed(2)]}),n.jsx(Ie,{variant:"secondary",className:"text-xs",children:"refunded"})]})]})},F.id))})})]})]})}),y>1&&n.jsx("div",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(u-1)*b+1," to ",Math.min(u*b,w)," of ",w," transactions"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>C(u-1),disabled:u===1,children:"Previous"}),n.jsxs("span",{className:"text-sm font-medium",children:[u," of ",y]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>C(u+1),disabled:u===y,children:"Next"})]})]})}),n.jsx(Os,{open:o,onOpenChange:c,children:n.jsxs(gs,{side:"right",className:"w-full sm:w-80",children:[n.jsx(vs,{className:"pb-4",children:n.jsx(xs,{children:"Filter by Date Range"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-sm font-medium mb-2 block",children:"From Date"}),n.jsx(ve,{type:"date",value:d,onChange:F=>f(F.target.value),className:"h-9 text-sm"})]}),n.jsxs("div",{children:[n.jsx(ue,{className:"text-sm font-medium mb-2 block",children:"To Date"}),n.jsx(ve,{type:"date",value:m,onChange:F=>h(F.target.value),className:"h-9 text-sm"})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(ne,{onClick:T,className:"flex-1",children:"Apply Filter"}),n.jsx(ne,{variant:"outline",onClick:A,className:"flex-1",children:"Clear"})]}),(d||m)&&n.jsx("div",{className:"pt-4 border-t",children:n.jsx("p",{className:"text-sm text-gray-600",children:d&&m?`Showing: ${d} to ${m}`:d?`From: ${d}`:m?`Until: ${m}`:""})})]})]})})]})})},Wne=[{category:"Account",items:[{id:"profile",title:"Profile Management",subtitle:"Complete profile setup and management",icon:Lr,action:"navigate"},{id:"company",title:"Company Information",subtitle:"Business details and verification",icon:ms,action:"navigate"},{id:"security",title:"Security & Login",subtitle:"Password and authentication",icon:yi,action:"navigate"}]},{category:"Business",items:[{id:"products",title:"Product Management",subtitle:"Inventory, pricing, and catalog",icon:At,action:"navigate"},{id:"analytics",title:"Business Analytics",subtitle:"Sales reports and insights",icon:pP,action:"navigate"}]}];function Zne(){const e=st(),[t,s]=j.useState(null),[r,i]=j.useState(!0),[a,o]=j.useState(""),[c,d]=j.useState({businessName:"",ownerName:"",email:"",phone:"",address:"",description:"",avatar:"/api/placeholder/120/120",isOnline:!0,autoOnlineTime:"09:00",autoOfflineTime:"22:00",totalProducts:0,activeProducts:0,totalSales:0,monthlyRevenue:0});j.useEffect(()=>{f()},[]);const f=async()=>{try{const{simplePersistentAuth:p}=await Xe(async()=>{const{simplePersistentAuth:N}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:N}},[]);if(!await p.isVendorLoggedIn()){e("/vendor/login");return}const v=await p.getVendorAuth();v&&await Re.setAuth(v.token,v.user);const{response:w,data:x}=await Be("/profile/");if(!w.ok)throw new Error("Failed to fetch user profile");const{response:b,data:_}=await Be("/vendor-profiles/");if(b.ok&&_){if(_.results&&_.results.length>0){const N=_.results[0];d({businessName:N.business_name||"N/A",ownerName:N.owner_name||x.username,email:N.business_email||x.email,phone:N.business_phone||x.phone_number||"N/A",address:N.business_address||"N/A",description:N.description||"No description",avatar:x.profile_picture?(x.profile_picture.startsWith("http"),x.profile_picture):"/api/placeholder/120/120",isOnline:!0,autoOnlineTime:"09:00",autoOfflineTime:"22:00",totalProducts:24,activeProducts:22,totalSales:1250,monthlyRevenue:45e3})}}else d(N=>({...N,businessName:x.username,ownerName:x.username,email:x.email,phone:x.phone_number||"N/A",avatar:x.profile_picture?(x.profile_picture.startsWith("http"),x.profile_picture):"/api/placeholder/120/120"}))}catch(p){console.error("Error fetching profile:",p),o("Failed to load profile data")}finally{i(!1)}},[m,h]=j.useState({esewa:{enabled:!1,merchantId:"",secretKey:""},khalti:{enabled:!1,publicKey:"",secretKey:""}}),u=p=>{p==="profile"?e("/vendor/profile"):p==="security"?e("/vendor/security"):p==="company"?e("/vendor/company"):p==="products"?e("/vendor/products"):p==="analytics"?e("/vendor/analytics"):s(p)};return t?n.jsx(qt,{title:"Settings",children:n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"p-4",children:[n.jsx(ne,{variant:"ghost",onClick:()=>s(null),className:"mb-4",children:"← Back to Settings"}),t==="analytics"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Business Analytics"}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Revenue Overview"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₹",c.monthlyRevenue.toLocaleString()]}),n.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),n.jsx("p",{className:"text-xs text-green-600",children:"+12% from last month"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["₹",(c.monthlyRevenue*.85).toLocaleString()]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Last Month"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Previous period"})]})]})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Sales Metrics"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(At,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium",children:"Total Orders"})]}),n.jsx("p",{className:"text-xl font-bold",children:c.totalSales}),n.jsx("p",{className:"text-xs text-gray-600",children:"This month"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Br,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium",children:"Avg Order Value"})]}),n.jsxs("p",{className:"text-xl font-bold",children:["₹",Math.round(c.monthlyRevenue/c.totalSales)]}),n.jsx("p",{className:"text-xs text-gray-600",children:"Per order"})]})]})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Product Performance"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"Active Products"}),n.jsx("span",{className:"font-semibold",children:c.activeProducts})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"Total Products"}),n.jsx("span",{className:"font-semibold",children:c.totalProducts})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"Best Seller"}),n.jsx("span",{className:"font-semibold text-green-600",children:"Chicken Momo"})]})]})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Weekly Sales"}),n.jsx("div",{className:"flex items-end justify-between h-32 gap-2",children:[65,45,78,52,89,67,43].map((p,y)=>{const v=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],w=p/100*100;return n.jsxs("div",{className:"flex flex-col items-center flex-1",children:[n.jsx("div",{className:"w-full bg-blue-500 rounded-t mb-1",style:{height:`${w}px`}}),n.jsx("span",{className:"text-xs text-gray-600",children:v[y]})]},y)})})]})})]}),t==="payment"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Payment Settings"}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-green-600 font-bold text-lg",children:"eS"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"eSewa Integration"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Receive payments through eSewa"})]})]}),n.jsx(Zt,{checked:m.esewa.enabled,onCheckedChange:p=>h(y=>({...y,esewa:{...y.esewa,enabled:p}}))})]}),m.esewa.enabled&&n.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-sm font-medium",children:"Merchant ID"}),n.jsx(ve,{placeholder:"Enter your eSewa Merchant ID",value:m.esewa.merchantId,onChange:p=>h(y=>({...y,esewa:{...y.esewa,merchantId:p.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ue,{className:"text-sm font-medium",children:"Secret Key"}),n.jsx(ve,{type:"password",placeholder:"Enter your eSewa Secret Key",value:m.esewa.secretKey,onChange:p=>h(y=>({...y,esewa:{...y.esewa,secretKey:p.target.value}}))})]}),n.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Note:"})," You can get your eSewa API credentials from your eSewa merchant dashboard."]})})]})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"K"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Khalti Integration"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Receive payments through Khalti"})]})]}),n.jsx(Zt,{checked:m.khalti.enabled,onCheckedChange:p=>h(y=>({...y,khalti:{...y.khalti,enabled:p}}))})]}),m.khalti.enabled&&n.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-sm font-medium",children:"Public Key"}),n.jsx(ve,{placeholder:"Enter your Khalti Public Key",value:m.khalti.publicKey,onChange:p=>h(y=>({...y,khalti:{...y.khalti,publicKey:p.target.value}}))})]}),n.jsxs("div",{children:[n.jsx(ue,{className:"text-sm font-medium",children:"Secret Key"}),n.jsx(ve,{type:"password",placeholder:"Enter your Khalti Secret Key",value:m.khalti.secretKey,onChange:p=>h(y=>({...y,khalti:{...y.khalti,secretKey:p.target.value}}))})]}),n.jsx("div",{className:"bg-purple-50 p-3 rounded-lg",children:n.jsxs("p",{className:"text-sm text-purple-800",children:[n.jsx("strong",{children:"Note:"})," You can get your Khalti API credentials from your Khalti merchant dashboard."]})})]})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Payment Status"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"eSewa Status"}),n.jsx(Ie,{className:m.esewa.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:m.esewa.enabled?"Active":"Inactive"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm",children:"Khalti Status"}),n.jsx(Ie,{className:m.khalti.enabled?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800",children:m.khalti.enabled?"Active":"Inactive"})]})]})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsx(ne,{className:"bg-blue-600 hover:bg-blue-700",children:"Save Payment Settings"})})]}),t==="notifications"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Notification Settings"}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Notification Preferences"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"New Orders"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Get notified when you receive new orders"})]}),n.jsx(Zt,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Payment Updates"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Notifications for payment confirmations"})]}),n.jsx(Zt,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"Low Stock Alerts"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Alert when products are running low"})]}),n.jsx(Zt,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:"System Updates"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Important system and policy updates"})]}),n.jsx(Zt,{})]})]})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Delivery Methods"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Push Notifications"}),n.jsx(Zt,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Email Notifications"}),n.jsx(Zt,{defaultChecked:!0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"SMS Notifications"}),n.jsx(Zt,{})]})]})]})})]})]})})}):r?n.jsx(qt,{title:"Settings",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):a?n.jsx(qt,{title:"Settings",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:a}),n.jsx(ne,{onClick:f,children:"Retry"})]})})}):n.jsx(qt,{title:"Settings",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b",children:n.jsxs("div",{className:"p-4 flex items-center gap-3",children:[n.jsxs(ea,{className:"h-14 w-14",children:[n.jsx(Mr,{src:c.avatar}),n.jsx(ta,{className:"text-lg font-bold",children:c.businessName?c.businessName.charAt(0):"U"})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-lg font-semibold",children:c.businessName||"Business Name"}),n.jsx("p",{className:"text-gray-500 text-xs",children:c.email})]}),n.jsx(Ie,{className:c.isOnline?"bg-green-100 text-green-800 text-xs":"bg-gray-100 text-gray-800 text-xs",children:c.isOnline?"Online":"Offline"})]})}),n.jsxs("div",{className:"p-4 space-y-6",children:[Wne.map(p=>n.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b bg-gray-50",children:n.jsx("h2",{className:"font-semibold text-gray-900",children:p.category})}),n.jsx("div",{className:"divide-y",children:p.items.map(y=>{const v=y.icon;return n.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>u(y.id),"data-section":y.id,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(v,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-900",children:y.title}),n.jsx("p",{className:"text-sm text-gray-600",children:y.subtitle})]})]}),n.jsx(mc,{className:"h-5 w-5 text-gray-400"})]})},y.id)})})]},p.category)),n.jsxs(ne,{variant:"outline",className:"w-full flex items-center justify-center py-6 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:async()=>{await Re.clearAuth(),e("/vendor/login")},children:[n.jsx(sb,{className:"h-5 w-5 mr-2"}),n.jsx("span",{className:"font-medium text-base",children:"Logout"})]})]})]})})}const y2=()=>{var O,F,G,Y,K;const[e,t]=j.useState(null),[s,r]=j.useState([]),[i,a]=j.useState([]),[o,c]=j.useState(""),[d,f]=j.useState(!0),[m,h]=j.useState(1),[u,p]=j.useState(!1),[y,v]=j.useState(!1),[w,x]=j.useState(null),[b,_]=j.useState(0),N=j.useRef(null),C=j.useRef(null);j.useEffect(()=>{I(),k();const B=new URLSearchParams(window.location.search).get("start_conversation");B&&setTimeout(()=>{A(parseInt(B))},500)},[]);const I=async()=>{try{if(!localStorage.getItem("token"))return;const{response:B,data:R}=await Be("/profile/");B.ok&&R&&x(R)}catch(U){console.error("Failed to fetch current user:",U)}};j.useEffect(()=>{e&&M(e.id)},[e]),j.useEffect(()=>{if(e){const U=setInterval(async()=>{try{const B=await Us.getMessages(e.id),R=Array.isArray(B)?B.reverse():[];a(R),_(R.length)}catch(B){console.error("Failed to fetch messages:",B)}},5e3);return()=>clearInterval(U)}},[e]);const k=async(U=1,B=!1)=>{try{const{response:R,data:$}=await Be(`messaging/conversations/?page=${U}&page_size=20`);if(!R.ok)throw new Error("Failed to fetch conversations");const Z=(($==null?void 0:$.results)||[]).filter((X,V,H)=>V===H.findIndex(se=>{var Q,ie;return((Q=se.other_participant)==null?void 0:Q.id)===((ie=X.other_participant)==null?void 0:ie.id)}));if(U===1&&!Z.some(V=>{var H,se,Q;return((H=V.other_participant)==null?void 0:H.username)==="admin"||((se=V.other_participant)==null?void 0:se.id)===1||((Q=V.other_participant)==null?void 0:Q.username)==="EzzeYway Support"})){const V={id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}};Z.unshift(V)}r(B?X=>[...X,...Z].filter((H,se,Q)=>se===Q.findIndex(ie=>{var he,te;return((he=ie.other_participant)==null?void 0:he.id)===((te=H.other_participant)==null?void 0:te.id)})):Z),p(!!($!=null&&$.next)),h(U)}catch(R){console.error("Failed to load conversations:",R),U===1&&r([{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}}])}finally{f(!1),v(!1)}},E=async()=>{y||!u||(v(!0),await k(m+1,!0))},M=async U=>{try{const B=await Us.getMessages(U),R=Array.isArray(B)?B.reverse():[];a(R),_(R.length)}catch(B){console.error("Failed to load messages:",B),a([]),_(0)}},P=async()=>{if(!(!o.trim()||!e))try{const U=await Us.sendMessage({conversation_id:e.id,message_type:"text",content:o});a(B=>[...B,U.message]),c("")}catch(U){console.error("Failed to send message:",U)}},T=async U=>{var R;const B=(R=U.target.files)==null?void 0:R[0];if(!(!B||!e))try{const $=await Us.sendMessage({conversation_id:e.id,message_type:B.type.startsWith("image/")?"image":"file",file:B});a(W=>[...W,$.message])}catch($){console.error("Failed to send file:",$)}},A=async U=>{try{const B=await Us.getOrCreateConversation(U);t(B);const R=new URL(window.location.href);R.searchParams.delete("start_conversation"),R.searchParams.delete("customer_name"),R.searchParams.delete("order_id"),window.history.replaceState({},"",R.toString())}catch(B){console.error("Failed to create conversation:",B)}},z=()=>{var U;(U=N.current)==null||U.scrollIntoView({behavior:"smooth"})};return j.useEffect(()=>{z()},[i]),d?n.jsx(qt,{title:"Messages",children:n.jsx("div",{className:"h-screen bg-white flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),n.jsx("p",{children:"Loading conversations..."})]})})}):e?n.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[n.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>t(null),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsxs(ea,{className:"h-10 w-10",children:[((O=e.other_participant)==null?void 0:O.username)==="EzzeYway Support"?n.jsx(Mr,{src:"/logo.png"}):n.jsx(Mr,{src:as((F=e.other_participant)==null?void 0:F.profile_picture)}),n.jsx(ta,{children:(Y=(G=e.other_participant)==null?void 0:G.username)==null?void 0:Y.charAt(0)})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-sm",children:(K=e.other_participant)==null?void 0:K.username}),n.jsx("p",{className:"text-xs text-gray-500",children:"Online"})]}),n.jsx(ne,{variant:"ghost",size:"sm",children:n.jsx(TD,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.map(U=>{const B=w&&U.sender.id===w.id;return n.jsx("div",{className:`w-full flex ${B?"justify-end":"justify-start"} mb-2`,children:n.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow ${B?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[U.message_type==="text"&&n.jsx("p",{className:"text-sm",children:U.content}),U.message_type==="image"&&n.jsx("div",{className:"space-y-2",children:n.jsx("img",{src:as(U.file_url),alt:"Shared image",className:"rounded max-w-full h-auto"})}),U.message_type==="file"&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rr,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:U.file_name})]}),n.jsxs("div",{className:"flex items-center justify-end mt-1 gap-1",children:[n.jsx("span",{className:"text-xs text-gray-500",children:new Date(U.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),B&&n.jsx("span",{className:`text-xs ${U.is_read?"text-blue-500":"text-gray-400"}`,children:U.is_read?"✓✓":"✓"})]})]})},U.id)}),n.jsx("div",{ref:N})]}),n.jsxs("div",{className:"bg-white border-t p-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>{var U;return(U=C.current)==null?void 0:U.click()},children:n.jsx(Ax,{className:"h-4 w-4"})}),n.jsx(ve,{value:o,onChange:U=>c(U.target.value),placeholder:"Type a message...",className:"flex-1",onKeyPress:U=>U.key==="Enter"&&P()}),n.jsx(ne,{onClick:P,disabled:!o.trim(),children:n.jsx(wP,{className:"h-4 w-4"})})]}),n.jsx("input",{ref:C,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:T,className:"hidden"})]})]}):n.jsx(qt,{title:"Messages",children:n.jsxs("div",{className:"h-screen bg-white flex flex-col",children:[n.jsx("div",{className:"border-b p-4",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsx("h2",{className:"text-lg font-semibold",children:"Messages"})})}),n.jsxs("div",{className:"flex-1 overflow-y-auto",children:[s.length===0?n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx(rb,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No conversations yet"}),n.jsx("p",{className:"text-sm",children:"Customers will message you here!"})]}):s.map(U=>{var B,R,$,W,Z,X,V;return n.jsxs("div",{className:"flex items-center gap-3 p-4 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{U.id===0?A(1):t(U)},children:[n.jsxs("div",{className:"relative",children:[n.jsxs(ea,{className:"h-12 w-12",children:[((B=U.other_participant)==null?void 0:B.username)==="EzzeYway Support"?n.jsx(Mr,{src:"/logo.png"}):n.jsx(Mr,{src:as((R=U.other_participant)==null?void 0:R.profile_picture)}),n.jsx(ta,{children:(W=($=U.other_participant)==null?void 0:$.username)==null?void 0:W.charAt(0)})]}),n.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-sm truncate",children:(Z=U.other_participant)==null?void 0:Z.username}),n.jsx("span",{className:"text-xs text-gray-500",children:U.last_message?new Date(U.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),n.jsx("p",{className:"text-sm text-gray-600 truncate",children:((X=U.last_message)==null?void 0:X.content)||((V=U.last_message)!=null&&V.file_name?`📎 ${U.last_message.file_name}`:"")||(U.id===0?"Start conversation":"No messages yet")})]}),U.unread_count>0&&n.jsx(Ie,{className:"bg-blue-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center",children:U.unread_count})]},U.id)}),u&&n.jsx("div",{className:"p-4 text-center",children:n.jsx(ne,{onClick:E,disabled:y,variant:"outline",className:"w-full",children:y?"Loading...":"Load More Conversations"})})]})]})})},Gne=()=>{var X,V,H,se,Q,ie,he;const[e,t]=j.useState(null),[s,r]=j.useState(2),[i,a]=j.useState(!1),[o,c]=j.useState(""),[d,f]=j.useState(""),[m,h]=j.useState(""),[u,p]=j.useState(""),[y,v]=j.useState(""),[w,x]=j.useState("all"),[b,_]=j.useState(1),[N,C]=j.useState([]),I=10,[k,E]=j.useState(!0),[M,P]=j.useState(!1),[T,A]=j.useState(""),[z,O]=j.useState(!1);zp(),j.useEffect(()=>{const te=()=>{const ge=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768;O(ge)};return te(),window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]),j.useEffect(()=>{F();const te=Se=>{Se.detail.type==="order"&&F()};window.addEventListener("newNotification",te);let ge;return z||(ge=setInterval(()=>{F()},6e4)),()=>{window.removeEventListener("newNotification",te),ge&&clearInterval(ge)}},[z]);const F=async()=>{try{E(!0);const{apiRequest:te}=await Xe(async()=>{const{apiRequest:de}=await Promise.resolve().then(()=>Gn);return{apiRequest:de}},void 0),ge=new AbortController,Se=setTimeout(()=>ge.abort(),z?8e3:3e4),fe=z?"/vendor/orders/?limit=50":"/vendor/orders/",{response:ke,data:xe}=await te(fe,{signal:ge.signal});if(clearTimeout(Se),ke.ok&&xe){const de=xe.results||xe||[];console.log("📦 Orders received:",de.length,de),C(de)}else console.error("Failed to fetch orders:",ke.status,xe),C([])}catch(te){console.error("Error fetching vendor orders:",te),C([])}finally{E(!1)}};j.useEffect(()=>{if(s>0){const te=setInterval(()=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`${s} New Order${s>1?"s":""} Waiting!`,{icon:"/favicon.ico",body:"Please check and confirm your orders"})},6e4);return()=>clearInterval(te)}},[s]),j.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]);const G=te=>{switch(te){case"new":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-orange-100 text-orange-800";case"pending":return"bg-yellow-100 text-yellow-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";case"returned":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Y=te=>{switch(te){case"new":return n.jsx(ir,{className:"h-3 w-3"});case"confirmed":return n.jsx(At,{className:"h-3 w-3"});case"pending":return n.jsx(Wl,{className:"h-3 w-3"});case"delivered":return n.jsx(Yu,{className:"h-3 w-3"});case"cancelled":return n.jsx(aN,{className:"h-3 w-3"});case"returned":return n.jsx(ii,{className:"h-3 w-3"});default:return n.jsx(At,{className:"h-3 w-3"})}},K=te=>te==="all"?N:te==="new"?N.filter(ge=>ge.status==="pending"):te==="pending"?N.filter(ge=>ge.status==="out_for_delivery"):N.filter(ge=>ge.status===te),U=(te,ge,Se)=>{C(fe=>fe.map(ke=>ke.id===te?{...ke,status:ge,isNew:ge==="new",estimatedTime:"Ready for delivery",...Se}:ke))},B=te=>{const ge=z?15:I;if(w==="new")return z?te.slice(0,ge):te;const Se=(b-1)*ge,fe=Se+ge;return te.slice(Se,fe)},R=te=>Math.ceil(te.length/I),$=te=>{_(te)},W=({orders:te})=>{if(w==="new")return null;const ge=R(te);return ge<=1?null:n.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[n.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(b-1)*I+1,"-",Math.min(b*I,te.length)," of ",te.length," orders"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>$(b-1),disabled:b===1,className:"h-7 w-7 p-0",children:n.jsx(vP,{className:"h-3 w-3"})}),n.jsx("div",{className:"flex gap-1",children:Array.from({length:ge},(Se,fe)=>fe+1).map(Se=>n.jsx(ne,{variant:b===Se?"default":"outline",size:"sm",onClick:()=>$(Se),className:"h-7 w-7 p-0 text-xs",children:Se},Se))}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>$(b+1),disabled:b===ge,className:"h-7 w-7 p-0",children:n.jsx(mc,{className:"h-3 w-3"})})]})]})},Z=({order:te})=>{var ge,Se,fe,ke,xe,de,me;return n.jsxs("div",{className:`p-4 ${te.status==="pending"?"bg-blue-50 border-l-4 border-blue-500":((ge=te.refunds)==null?void 0:ge.length)>0?"bg-orange-50 border-l-4 border-orange-400":"bg-white"} cursor-pointer hover:bg-gray-50 min-h-[120px]`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:te.order_number}),te.status==="pending"&&n.jsx(ir,{className:"h-3 w-3 text-blue-500 animate-pulse"})]}),n.jsxs(Ie,{className:`${G(te.status)} flex items-center gap-1 text-xs px-2 py-1`,children:[Y(te.status),te.status.charAt(0).toUpperCase()+te.status.slice(1)]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2",children:[((Se=te.items)==null?void 0:Se.length)||0," item",((fe=te.items)==null?void 0:fe.length)!==1?"s":""]}),n.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[(ke=te.items)==null?void 0:ke.slice(0,z?2:3).map((ee,ae)=>{var oe,be,je,we;return n.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center overflow-hidden",children:(je=(be=(oe=ee.product_details)==null?void 0:oe.images)==null?void 0:be[0])!=null&&je.image_url?n.jsx("img",{src:as(ee.product_details.images[0].image_url),alt:ee.product_name,className:"w-full h-full object-cover",loading:"lazy",onError:re=>{re.currentTarget.style.display="none",re.currentTarget.parentElement.innerHTML='<span class="text-xs text-gray-400">📦</span>'}}):n.jsx("span",{className:"text-xs text-gray-400",children:"📦"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:ee.product_name}),n.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:((we=ee.product_details)==null?void 0:we.category)||"Item"})]})]},ae)}),((xe=te.items)==null?void 0:xe.length)>(z?2:3)&&n.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center flex-shrink-0",children:n.jsxs("span",{className:"text-xs text-gray-600",children:["+",te.items.length-(z?2:3)]})})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 flex-1 min-w-0",children:[n.jsx(Lr,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:((de=te.customer_details)==null?void 0:de.username)||te.delivery_name})]}),n.jsx(ne,{size:"sm",variant:"outline",className:"h-8 w-8 p-0 ml-2 flex-shrink-0",onClick:async ee=>{var ae,oe,be,je;ee.stopPropagation();try{const we=(ae=te.customer_details)==null?void 0:ae.id;if(we)window.location.href=`/vendor/messages?start_conversation=${we}&customer_name=${encodeURIComponent(((oe=te.customer_details)==null?void 0:oe.username)||te.delivery_name)}&order_id=${te.id}`;else{const re=((be=te.customer_details)==null?void 0:be.phone_number)||te.delivery_phone,Ce=((je=te.customer_details)==null?void 0:je.username)||te.delivery_name;window.location.href=`/vendor/messages?customer_phone=${encodeURIComponent(re)}&customer_name=${encodeURIComponent(Ce)}&order_id=${te.id}`}}catch(we){console.error("Error opening conversation:",we)}},children:n.jsx(Ro,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Kt,{className:"h-4 w-4"}),n.jsx("span",{className:"truncate",children:te.delivery_address})]}),te.status==="delivered"&&te.review&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(dn,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"}),n.jsxs("span",{className:"text-yellow-600 font-medium text-xs",children:["Rated ",te.review.overall_rating,"/5"]})]}),((me=te.refunds)==null?void 0:me.length)>0&&n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-2 mt-2",children:te.refunds.map(ee=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ii,{className:"h-4 w-4 text-orange-500"}),n.jsx("span",{className:"text-orange-700 font-medium text-xs capitalize",children:ee.reason.replace("_"," ")})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${ee.status==="requested"?"bg-yellow-100 text-yellow-800":ee.status==="approved"?"bg-green-100 text-green-800":ee.status==="rejected"?"bg-red-100 text-red-800":ee.status==="appeal"?"bg-purple-100 text-purple-800":ee.status==="processed"?"bg-blue-100 text-blue-800":ee.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:ee.status.charAt(0).toUpperCase()+ee.status.slice(1)})]},ee.id))}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[n.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["₹",parseFloat(te.total_amount).toFixed(2)]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>t(te),children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"View"]}),te.status==="pending"&&n.jsx(ne,{size:"sm",className:"h-7 text-xs bg-green-600 hover:bg-green-700",onClick:async ee=>{ee.stopPropagation();try{const{response:ae}=await Be(`/orders/${te.id}/accept/`,{method:"POST"});ae.ok&&(F(),r(oe=>Math.max(0,oe-1)),window.dispatchEvent(new CustomEvent("walletUpdated")))}catch(ae){console.error("Error accepting order:",ae)}},children:"Accept"}),te.status==="confirmed"&&n.jsx(ne,{size:"sm",className:"h-7 text-xs bg-blue-600 hover:bg-blue-700",onClick:ee=>{ee.stopPropagation(),t(te),a(!0)},children:"Ship"}),te.status==="out_for_delivery"&&n.jsx(ne,{size:"sm",className:"h-7 text-xs bg-green-600 hover:bg-green-700",onClick:async ee=>{ee.stopPropagation();try{const{response:ae}=await Be(`/vendor/orders/${te.id}/status/`,{method:"POST",body:JSON.stringify({status:"delivered",notes:"Marked as delivered by vendor"})});ae.ok&&F()}catch(ae){console.error("Error marking as delivered:",ae)}},children:"Delivered"})]})]})]})]})};return n.jsx(qt,{title:"Orders",children:n.jsxs("div",{className:"bg-gray-50 min-h-screen pb-20 max-w-full overflow-x-hidden",children:[k?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})]}):N.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(At,{className:"h-8 w-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),n.jsx("p",{className:"text-gray-500",children:"Orders will appear here when customers place them."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"p-4",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("div",{className:"flex gap-3 pb-2",children:[n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center border-l-4 border-blue-500",children:[n.jsx("p",{className:"text-xl font-bold text-blue-600",children:N.filter(te=>te.status==="pending").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"New Orders"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-yellow-600",children:N.filter(te=>te.status==="out_for_delivery").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Shipped"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-orange-600",children:N.filter(te=>te.status==="confirmed").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Confirmed"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-green-600",children:N.filter(te=>te.status==="delivered").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Delivered"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-gray-600",children:N.filter(te=>te.status==="cancelled").length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Cancelled"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-orange-600",children:N.filter(te=>{var ge;return((ge=te.refunds)==null?void 0:ge.length)>0}).length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Returns"})]}),n.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-gray-600",children:N.length}),n.jsx("p",{className:"text-xs text-gray-600",children:"Total"})]})]})})}),n.jsx("div",{className:"px-4",children:n.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-100",children:n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"})}),n.jsxs(Si,{value:w,onValueChange:te=>{x(te),_(1)},className:"w-full",children:[n.jsx("div",{className:"border-b border-gray-100 overflow-x-auto scrollbar-hide",children:n.jsxs(qr,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[n.jsxs(Ct,{value:"all",className:"text-xs py-2 px-3 data-[state=active]:bg-gray-50 data-[state=active]:text-gray-600 data-[state=active]:border-b-2 data-[state=active]:border-gray-600 rounded-none whitespace-nowrap flex-shrink-0",children:["All ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.length,")"]})]}),n.jsxs(Ct,{value:"new",className:"text-xs py-2 px-3 data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 data-[state=active]:border-b-2 data-[state=active]:border-blue-600 rounded-none whitespace-nowrap flex-shrink-0",children:["New ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(te=>te.status==="pending").length,")"]})]}),n.jsxs(Ct,{value:"confirmed",className:"text-xs py-2 px-3 data-[state=active]:bg-orange-50 data-[state=active]:text-orange-600 data-[state=active]:border-b-2 data-[state=active]:border-orange-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Confirmed ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(te=>te.status==="confirmed").length,")"]})]}),n.jsxs(Ct,{value:"pending",className:"text-xs py-2 px-3 data-[state=active]:bg-yellow-50 data-[state=active]:text-yellow-600 data-[state=active]:border-b-2 data-[state=active]:border-yellow-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Shipped ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(te=>te.status==="out_for_delivery").length,")"]})]}),n.jsxs(Ct,{value:"delivered",className:"text-xs py-2 px-3 data-[state=active]:bg-green-50 data-[state=active]:text-green-600 data-[state=active]:border-b-2 data-[state=active]:border-green-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Delivered ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(te=>te.status==="delivered").length,")"]})]}),n.jsxs(Ct,{value:"returns",className:"text-xs py-2 px-3 data-[state=active]:bg-orange-50 data-[state=active]:text-orange-600 data-[state=active]:border-b-2 data-[state=active]:border-orange-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Returns ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(te=>{var ge;return((ge=te.refunds)==null?void 0:ge.length)>0}).length,")"]})]}),n.jsxs(Ct,{value:"cancelled",className:"text-xs py-2 px-3 data-[state=active]:bg-gray-50 data-[state=active]:text-gray-600 data-[state=active]:border-b-2 data-[state=active]:border-gray-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Cancelled ",n.jsxs("span",{className:"font-bold ml-2",children:["(",N.filter(te=>te.status==="cancelled").length,")"]})]})]})}),n.jsxs(dt,{value:"all",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:B(N).map(te=>n.jsx(Z,{order:te},te.id))}),n.jsx(W,{orders:N})]}),n.jsxs(dt,{value:"new",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:B(K("new")).map(te=>n.jsx(Z,{order:te},te.id))}),n.jsx(W,{orders:K("new")})]}),n.jsxs(dt,{value:"confirmed",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:B(K("confirmed")).map(te=>n.jsx(Z,{order:te},te.id))}),n.jsx(W,{orders:K("confirmed")})]}),n.jsxs(dt,{value:"pending",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:B(K("pending")).map(te=>n.jsx(Z,{order:te},te.id))}),n.jsx(W,{orders:K("pending")})]}),n.jsxs(dt,{value:"delivered",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:B(K("delivered")).map(te=>n.jsx(Z,{order:te},te.id))}),n.jsx(W,{orders:K("delivered")})]}),n.jsx(dt,{value:"returns",className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:N.filter(te=>{var ge;return((ge=te.refunds)==null?void 0:ge.length)>0}).map(te=>{var ge,Se;return n.jsxs("div",{className:"p-4 bg-white cursor-pointer hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:te.order_number})}),n.jsxs(Ie,{className:"bg-orange-100 text-orange-800 flex items-center gap-1 text-xs px-2 py-1",children:[n.jsx(ii,{className:"h-3 w-3"}),"Return Request"]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(Lr,{className:"h-4 w-4"}),n.jsx("span",{className:"truncate",children:((ge=te.customer_details)==null?void 0:ge.username)||te.delivery_name})]}),(Se=te.refunds)==null?void 0:Se.map(fe=>{var ke;return n.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium",children:"Return Reason:"}),n.jsx(Ie,{className:`text-xs ${fe.status==="requested"?"bg-yellow-100 text-yellow-800":fe.status==="approved"?"bg-green-100 text-green-800":fe.status==="rejected"?"bg-red-100 text-red-800":fe.status==="appeal"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:fe.status.charAt(0).toUpperCase()+fe.status.slice(1)})]}),n.jsx("p",{className:"text-xs text-gray-700 capitalize",children:fe.reason.replace("_"," ")}),fe.customer_notes&&n.jsxs("p",{className:"text-xs text-gray-600",children:['"',fe.customer_notes,'"']}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Amount:"})," ₹",fe.requested_amount]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Method:"})," ",fe.refund_method]}),fe.status==="requested"&&n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(ne,{size:"sm",variant:"outline",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50",onClick:async()=>{const xe=prompt("Reason for rejection:");if(xe)try{const{response:de}=await Be(`/admin/refunds/${fe.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reject",admin_notes:xe})});de.ok&&F()}catch(de){console.error("Error rejecting return:",de)}},children:"Reject"}),n.jsx(ne,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:async()=>{try{const{response:xe}=await Be(`/admin/refunds/${fe.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"approve",approved_amount:fe.requested_amount,admin_notes:"Return approved by vendor"})});xe.ok&&F()}catch(xe){console.error("Error approving return:",xe)}},children:"Approve"})]}),fe.status==="approved"&&n.jsxs("div",{className:"bg-green-50 p-2 rounded mt-2",children:[n.jsx("p",{className:"text-xs text-green-800 font-medium mb-2",children:"Return Approved - Process Refund"}),n.jsx(ne,{size:"sm",className:"w-full bg-blue-600 hover:bg-blue-700",onClick:async()=>{try{const{response:xe}=await Be(`/admin/refunds/${fe.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"process",admin_notes:"Money transferred to customer"})});xe.ok&&F()}catch(xe){console.error("Error processing refund:",xe)}},children:"Process Refund (Transfer Money)"})]}),fe.status==="processed"&&n.jsxs("div",{className:"bg-blue-50 p-2 rounded mt-2",children:[n.jsx("p",{className:"text-xs text-blue-800 font-medium mb-2",children:"Money Transferred - Upload Proof"}),n.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:async xe=>{const de=xe.target.files[0];if(!de)return;const me=new FormData;me.append("document",de);try{const{response:ee}=await Be(`/refunds/${fe.id}/upload-document/`,{method:"POST",body:me});ee.ok&&F()}catch(ee){console.error("Error uploading document:",ee)}},className:"w-full text-xs mb-2"}),n.jsx(ne,{size:"sm",className:"w-full bg-green-600 hover:bg-green-700",onClick:async()=>{try{const{response:xe}=await Be(`/admin/refunds/${fe.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"complete",admin_notes:"Refund completed successfully"})});xe.ok&&F()}catch(xe){console.error("Error completing refund:",xe)}},children:"Mark as Completed"})]}),fe.status==="appeal"&&n.jsxs("div",{className:"bg-purple-50 p-2 rounded mt-2",children:[n.jsx("p",{className:"text-xs text-purple-800 font-medium",children:"Customer has appealed this decision"}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(ne,{size:"sm",variant:"outline",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50",onClick:async()=>{try{const{response:xe}=await Be(`/admin/refunds/${fe.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reject",admin_notes:"Appeal rejected - final decision"})});xe.ok&&F()}catch(xe){console.error("Error rejecting appeal:",xe)}},children:"Reject Appeal"}),n.jsx(ne,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:async()=>{try{const{response:xe}=await Be(`/admin/refunds/${fe.id}/process/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"approve",approved_amount:fe.requested_amount,admin_notes:"Appeal approved - refund processed"})});xe.ok&&F()}catch(xe){console.error("Error approving appeal:",xe)}},children:"Approve Appeal"})]})]}),((ke=fe.evidence_photos)==null?void 0:ke.length)>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-xs font-medium mb-1",children:"Evidence Documents:"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:fe.evidence_photos.map((xe,de)=>{var ae;const me=(ae=xe.filename)==null?void 0:ae.match(/\.(jpg|jpeg|png|gif|webp)$/i);let ee;return xe.filename.startsWith("http")?ee=xe.filename:xe.filename.startsWith("/media/")?ee=`${bs.BASE_URL}${xe.filename}`:ee=`${bs.BASE_URL}/media/${xe.filename}`,n.jsxs("div",{className:"bg-blue-100 p-2 rounded text-xs cursor-pointer hover:bg-blue-200 transition-colors flex items-center gap-1",onClick:()=>{me?(A(ee),P(!0)):window.open(ee,"_blank")},children:[me?n.jsx(Nn,{className:"h-3 w-3 text-blue-600"}):n.jsx(At,{className:"h-3 w-3 text-blue-600"}),n.jsx("span",{className:"text-blue-800",children:xe.filename||`Document ${de+1}`})]},de)})})]}),fe.admin_notes&&n.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[n.jsx("span",{className:"font-medium",children:"Response:"})," ",fe.admin_notes]})]},fe.id)}),n.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[n.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["₹",parseFloat(te.total_amount).toFixed(2)]}),n.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>t(te),children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]})]},te.id)})})}),n.jsxs(dt,{value:"cancelled",className:"mt-0",children:[n.jsx("div",{className:"divide-y divide-gray-100",children:B(K("cancelled")).map(te=>n.jsx(Z,{order:te},te.id))}),n.jsx(W,{orders:K("cancelled")})]})]})]})})]}),n.jsx(Os,{open:!!e,onOpenChange:()=>t(null),children:n.jsxs(gs,{side:"bottom",className:"h-[90vh] rounded-t-xl",children:[n.jsx(vs,{className:"pb-4",children:n.jsx(xs,{className:"text-left",children:(e==null?void 0:e.status)==="confirmed"&&i?"Ship Order":`Order Details - ${e==null?void 0:e.id}`})}),e&&n.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[e.status==="confirmed"&&i?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[n.jsx(Lr,{className:"h-4 w-4"}),"Customer Details for Rider"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{var ge,Se,fe;const te=`Order ID: ${e.order_number}

Customer: ${((ge=e.customer_details)==null?void 0:ge.username)||e.delivery_name}

Phone: ${((Se=e.customer_details)==null?void 0:Se.phone_number)||e.delivery_phone}

Address: ${e.delivery_address}

Map Link: https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}

Total Amount: ₹${e.total_amount}

Payment: ${e.payment_method} (${e.payment_status})

Items:
${((fe=e.items)==null?void 0:fe.map(ke=>`• ${ke.product_name} x${ke.quantity}`).join(`
`))||""}`;navigator.clipboard.writeText(te)},children:[n.jsx(ED,{className:"h-3 w-3 mr-1"}),"Copy"]}),n.jsxs(ne,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{var ge,Se,fe;const te=`Order ID: ${e.order_number}

Customer: ${((ge=e.customer_details)==null?void 0:ge.username)||e.delivery_name}

Phone: ${((Se=e.customer_details)==null?void 0:Se.phone_number)||e.delivery_phone}

Address: ${e.delivery_address}

Map Link: https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}

Total Amount: ₹${e.total_amount}

Payment: ${e.payment_method} (${e.payment_status})

Items:
${((fe=e.items)==null?void 0:fe.map(ke=>`• ${ke.product_name} x${ke.quantity}`).join(`
`))||""}`;if(navigator.share)navigator.share({title:"Delivery Details",text:te});else{const ke=`https://wa.me/?text=${encodeURIComponent(te)}`;window.open(ke,"_blank")}},children:[n.jsx(Ho,{className:"h-3 w-3 mr-1"}),"Share"]})]})]}),n.jsxs("div",{className:"space-y-2 text-xs bg-white rounded p-3",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Order ID:"})," ",e.order_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Customer:"})," ",((X=e.customer_details)==null?void 0:X.username)||e.delivery_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Phone:"})," ",((V=e.customer_details)==null?void 0:V.phone_number)||e.delivery_phone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Address:"})," ",e.delivery_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Map Link:"})," ",n.jsx("a",{href:`https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}`,target:"_blank",className:"text-blue-600 underline",children:"Open in Maps"})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Total Amount:"})," ₹",e.total_amount]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Payment:"})," ",e.payment_method," (",e.payment_status,")"]}),n.jsxs("div",{className:"mt-2",children:[n.jsx("span",{className:"font-medium",children:"Items:"}),n.jsx("ul",{className:"ml-2 mt-1",children:((H=e.items)==null?void 0:H.map((te,ge)=>n.jsxs("li",{children:["• ",te.product_name," x",te.quantity]},ge)))||[]})]})]})]}),n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[n.jsx(Wl,{className:"h-4 w-4"}),"Delivery Information"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs(ue,{className:"text-xs font-medium text-gray-700",children:["Rider Phone Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ve,{value:o,onChange:te=>c(te.target.value),placeholder:"+977-98XXXXXXXX",className:"h-8 text-xs mt-1"})]}),n.jsxs("div",{children:[n.jsxs(ue,{className:"text-xs font-medium text-gray-700",children:["Vehicle Number ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ve,{value:d,onChange:te=>f(te.target.value),placeholder:"e.g., BA-1-PA-1234",className:"h-8 text-xs mt-1"})]}),n.jsxs("div",{children:[n.jsx(ue,{className:"text-xs font-medium text-gray-700",children:"Vehicle Color"}),n.jsx(ve,{value:m,onChange:te=>h(te.target.value),placeholder:"e.g., Red, Blue, White",className:"h-8 text-xs mt-1"})]}),n.jsxs("div",{children:[n.jsxs(ue,{className:"text-xs font-medium text-gray-700",children:["Estimated Delivery Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ve,{value:u,onChange:te=>p(te.target.value),placeholder:"e.g., 30-45 mins",className:"h-8 text-xs mt-1"})]}),n.jsxs("div",{children:[n.jsxs(ue,{className:"text-xs font-medium text-gray-700",children:["Delivery Fee ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(ve,{type:"number",value:y,onChange:te=>v(te.target.value),placeholder:"e.g., 50",className:"h-8 text-xs mt-1"})]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[n.jsx(Lr,{className:"h-4 w-4"}),"Customer Information"]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",((se=e.customer_details)==null?void 0:se.username)||e.delivery_name]}),n.jsxs("p",{className:"flex items-center gap-1",children:[n.jsx(Qu,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:"Phone:"})," ",((Q=e.customer_details)==null?void 0:Q.phone_number)||e.delivery_phone]}),n.jsxs("p",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:"Address:"})," ",e.delivery_address]}),n.jsxs("p",{className:"flex items-center gap-1",children:[n.jsx(Kt,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:"Map:"}),n.jsx("a",{href:`https://www.google.com/maps/place/${e.delivery_latitude},${e.delivery_longitude}`,target:"_blank",className:"text-blue-600 underline text-xs",children:"View Location"})]})]})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[n.jsx(At,{className:"h-4 w-4"}),"Order Items"]}),n.jsx("div",{className:"space-y-2",children:((ie=e.items)==null?void 0:ie.map((te,ge)=>{var Se,fe,ke;return n.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center overflow-hidden flex-shrink-0",children:(ke=(fe=(Se=te.product_details)==null?void 0:Se.images)==null?void 0:fe[0])!=null&&ke.image_url?n.jsx("img",{src:as(te.product_details.images[0].image_url),alt:te.product_name,className:"w-full h-full object-cover",loading:"lazy",onError:xe=>{xe.currentTarget.style.display="none",xe.currentTarget.parentElement.innerHTML='<span class="text-xs text-gray-400">📦</span>'}}):n.jsx("span",{className:"text-xs text-gray-400",children:"📦"})}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:te.product_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Qty: ",te.quantity]})]})]}),n.jsxs("p",{className:"text-sm font-semibold flex-shrink-0",children:["₹",te.total_price]})]},ge)}))||[]})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[n.jsx(to,{className:"h-4 w-4"}),"Payment Details"]}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["₹",e.subtotal]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Delivery Fee:"}),n.jsxs("span",{children:["₹",e.delivery_fee]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax:"}),n.jsxs("span",{children:["₹",e.tax_amount]})]}),n.jsx("hr",{className:"my-1"}),n.jsxs("div",{className:"flex justify-between font-semibold",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["₹",e.total_amount]})]}),n.jsxs("div",{className:"flex justify-between mt-2",children:[n.jsx("span",{children:"Payment Method:"}),n.jsx("span",{className:"capitalize",children:e.payment_method})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{children:"Payment Status:"}),n.jsx(Ie,{variant:e.payment_status==="paid"?"default":"secondary",className:"text-xs",children:e.payment_status})]})]})]}),n.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[n.jsx(_D,{className:"h-4 w-4"}),"Order Timeline"]}),n.jsxs("div",{className:"text-xs space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Ordered:"})," ",new Date(e.created_at).toLocaleDateString()," at ",new Date(e.created_at).toLocaleTimeString()]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Order Number:"})," ",e.order_number]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Status:"}),n.jsx(Ie,{className:`${G(e.status)} text-xs`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]})]}),e.status==="delivered"&&e.review&&n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[n.jsx(dn,{className:"h-4 w-4"}),"Customer Review"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(te=>n.jsx(dn,{className:`h-4 w-4 ${te<=e.review.overall_rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},te))}),n.jsxs("span",{className:"text-sm font-medium",children:[e.review.overall_rating,"/5"]})]}),e.review.review_text&&n.jsx("div",{className:"bg-white p-2 rounded text-xs",children:n.jsx("p",{className:"text-gray-700",children:e.review.review_text})}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Reviewed on ",new Date(e.review.created_at).toLocaleDateString()]})]})]}),e.status==="cancelled"&&e.cancelReason&&n.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[n.jsx(aN,{className:"h-4 w-4"}),"Cancellation Details"]}),n.jsxs("div",{className:"space-y-2 text-xs",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),n.jsx("p",{className:"text-gray-600",children:e.cancelReason})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Cancelled By:"}),n.jsx("p",{className:"text-gray-600 capitalize",children:e.cancelledBy||"System"})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Payment Status:"}),n.jsx(Ie,{className:`text-xs ${e.paymentStatus==="Refunded"?"bg-green-100 text-green-800":e.paymentStatus==="Cancelled"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:e.paymentStatus})]})]})]}),((he=e.refunds)==null?void 0:he.map(te=>{var ge;return n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[n.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[n.jsx(ii,{className:"h-4 w-4"}),"Return/Refund Details"]}),n.jsxs("div",{className:"space-y-3 text-xs",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Status:"}),n.jsx(Ie,{className:`text-xs ${te.status==="requested"?"bg-yellow-100 text-yellow-800":te.status==="approved"?"bg-green-100 text-green-800":te.status==="rejected"?"bg-red-100 text-red-800":te.status==="appeal"?"bg-purple-100 text-purple-800":te.status==="processed"?"bg-blue-100 text-blue-800":te.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:te.status.charAt(0).toUpperCase()+te.status.slice(1)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),n.jsx("p",{className:"text-gray-600 capitalize",children:te.reason.replace("_"," ")})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Requested Amount:"}),n.jsxs("p",{className:"text-gray-600",children:["₹",te.requested_amount]})]}),te.approved_amount&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Approved Amount:"}),n.jsxs("p",{className:"text-gray-600",children:["₹",te.approved_amount]})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Customer Refund Details:"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Method:"})," ",te.refund_method]}),te.refund_method==="esewa"&&te.esewa_number&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"eSewa Number:"})," ",te.esewa_number]}),te.refund_method==="khalti"&&te.khalti_number&&n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Khalti Number:"})," ",te.khalti_number]}),te.refund_method==="bank"&&n.jsxs("div",{children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Account Name:"})," ",te.bank_account_name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Account Number:"})," ",te.bank_account_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Branch:"})," ",te.bank_branch]})]})]})]}),te.customer_notes&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Customer Notes:"}),n.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:te.customer_notes})]}),te.admin_notes&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700",children:"Vendor Response:"}),n.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:te.admin_notes})]}),((ge=te.evidence_photos)==null?void 0:ge.length)>0&&n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Evidence Documents:"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:te.evidence_photos.map((Se,fe)=>{var de;const ke=(de=Se.filename)==null?void 0:de.match(/\.(jpg|jpeg|png|gif|webp)$/i);let xe;return Se.filename.startsWith("http")?xe=Se.filename:xe=as(Se.filename),n.jsxs("div",{className:"bg-white p-2 rounded border hover:shadow-md transition-shadow",children:[ke?n.jsxs("div",{className:"cursor-pointer mb-2 group",onClick:()=>{A(xe),P(!0)},children:[n.jsxs("div",{className:"relative overflow-hidden rounded",children:[n.jsx("img",{src:xe,alt:Se.filename,className:"w-full h-20 object-cover rounded mb-1 group-hover:scale-105 transition-transform",onError:me=>{me.currentTarget.src="/placeholder-image.svg",me.currentTarget.alt="Image not found"}}),n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center",children:n.jsx(Nn,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),n.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"📷 Click to enlarge"})]}):n.jsx("div",{className:"w-full h-20 bg-gray-100 rounded mb-2 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>{window.open(xe,"_blank")},children:n.jsxs("div",{className:"text-center",children:[n.jsx(At,{className:"h-6 w-6 text-gray-400 mx-auto mb-1"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Document"})]})}),n.jsx("p",{className:"font-medium text-xs truncate",title:Se.filename,children:Se.filename||`Document ${fe+1}`}),n.jsxs("p",{className:"text-gray-500 text-xs",children:["📤 ",Se.uploaded_by]}),n.jsxs("p",{className:"text-gray-500 text-xs",children:["📅 ",new Date(Se.uploaded_at).toLocaleDateString()]})]},fe)})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500",children:[n.jsx("div",{children:n.jsxs("p",{children:["Requested: ",new Date(te.requested_at).toLocaleDateString()]})}),te.approved_at&&n.jsx("div",{children:n.jsxs("p",{children:["Approved: ",new Date(te.approved_at).toLocaleDateString()]})}),te.processed_at&&n.jsx("div",{children:n.jsxs("p",{children:["Processed: ",new Date(te.processed_at).toLocaleDateString()]})}),te.completed_at&&n.jsx("div",{children:n.jsxs("p",{children:["Completed: ",new Date(te.completed_at).toLocaleDateString()]})}),te.appeal_at&&n.jsx("div",{children:n.jsxs("p",{children:["Appealed: ",new Date(te.appeal_at).toLocaleDateString()]})})]})]})]},te.id)}))||[]]}),e.status==="new"&&n.jsxs("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:[n.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>t(null),children:"Reject"}),n.jsx(ne,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:()=>{U(e.id,"confirmed"),r(te=>Math.max(0,te-1)),t(null)},children:"Accept Order"})]}),e.status==="confirmed"&&n.jsx("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>{a(!1),c(""),f(""),h(""),p(""),v("")},children:"Cancel"}),n.jsx(ne,{className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:!o||!d||!u||!y,onClick:async()=>{try{const{response:te}=await Be(`/vendor/orders/${e.id}/status/`,{method:"POST",body:JSON.stringify({status:"out_for_delivery",delivery_boy_phone:o,vehicle_number:d,vehicle_color:m,estimated_delivery_time:u,delivery_fee:parseFloat(y),notes:"Order shipped with delivery details"})});te.ok&&(F(),a(!1),c(""),f(""),h(""),p(""),v(""),t(null))}catch(te){console.error("Error shipping order:",te)}},children:"Confirm Ship"})]}):n.jsxs(ne,{className:"flex-1 bg-blue-600 hover:bg-blue-700",onClick:()=>a(!0),children:[n.jsx(Wl,{className:"h-4 w-4 mr-2"}),"Ship Order"]})})]})]})}),n.jsx(Fo,{open:M,onOpenChange:P,children:n.jsxs(Da,{className:"max-w-5xl max-h-[95vh] p-4",children:[n.jsx(Fa,{className:"pb-4",children:n.jsxs($a,{className:"flex items-center gap-2",children:[n.jsx(Nn,{className:"h-5 w-5"}),"Evidence Document Preview"]})}),n.jsx("div",{className:"flex justify-center items-center bg-gray-50 rounded-lg p-4",children:n.jsx("img",{src:T,alt:"Evidence Preview",className:"max-w-full max-h-[75vh] object-contain rounded shadow-lg",onError:te=>{te.currentTarget.src="/placeholder-image.svg",te.currentTarget.alt="Image not found"}})}),n.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>window.open(T,"_blank"),children:[n.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{const te=document.createElement("a");te.href=T,te.download="evidence-document",te.click()},children:[n.jsx(At,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})})]})})},yl={getProducts:async()=>{const{response:e,data:t}=await Be("/products/");if(!e.ok)throw new Error("Failed to fetch products");return t},getProduct:async e=>{const{response:t,data:s}=await Be(`/products/${e}/`);if(!t.ok)throw new Error("Failed to fetch product");return s},createProduct:async e=>{const t=new FormData;Object.entries(e).forEach(([i,a])=>{i==="image_files"&&Array.isArray(a)?a.forEach((o,c)=>{o instanceof File&&t.append("image_files",o)}):typeof a=="object"?t.append(i,JSON.stringify(a)):t.append(i,String(a))});const{response:s,data:r}=await Be("/products/",{method:"POST",body:t});if(!s.ok)throw new Error("Failed to create product");return r},updateProduct:async(e,t)=>{const s=new FormData;Object.entries(t).forEach(([a,o])=>{a==="image_files"&&Array.isArray(o)?o.forEach(c=>{c instanceof File&&s.append("image_files",c)}):typeof o=="boolean"?s.append(a,o?"true":"false"):typeof o=="object"&&o!==null?s.append(a,JSON.stringify(o)):o!=null&&s.append(a,String(o))});const{response:r,data:i}=await Be(`/products/${e}/`,{method:"PATCH",body:s});if(!r.ok)throw console.error("Update failed:",r.status),new Error(`Failed to update product: ${r.status}`);return i},deleteProduct:async e=>{const{response:t}=await Be(`/products/${e}/`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete product")}},Kne=({message:e,show:t,onClose:s,duration:r=3e3})=>{const[i,a]=j.useState(!1);return j.useEffect(()=>{if(t){a(!0);const o=setTimeout(()=>{a(!1),setTimeout(s,300)},r);return()=>clearTimeout(o)}},[t,r,s]),!t&&!i?null:n.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-all duration-300 ${i?"opacity-100":"opacity-0"}`,children:[n.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl border border-green-200 p-6 mx-4 max-w-sm w-full pointer-events-auto transform transition-all duration-300 ${i?"scale-100 translate-y-0":"scale-95 translate-y-4"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Yu,{className:"h-6 w-6 text-green-600"})})}),n.jsx("div",{className:"flex-1",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Success!"})})]}),n.jsx("button",{onClick:()=>{a(!1),setTimeout(s,300)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(is,{className:"h-5 w-5"})})]}),n.jsx("p",{className:"text-gray-600 text-center",children:e}),n.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-1",children:n.jsx("div",{className:"bg-green-500 h-1 rounded-full transition-all duration-300 ease-linear",style:{animation:i?`shrink ${r}ms linear`:"none"}})})]}),n.jsx("style",{jsx:!0,children:`
        @keyframes shrink {
          from { width: 100%; }
          to { width: 0%; }
        }
      `})]})},Yne=h4({name:wn().min(1,"Product name is required"),category:wn().min(1,"Category is required"),subcategory:wn().optional(),price:Vi().min(0,"Price must be positive"),cost_price:Vi().nullable().optional().transform(e=>e===void 0?null:e),sku:wn().optional(),barcode:wn().optional(),quantity:Vi().min(0,"Quantity must be positive"),low_stock_threshold:Vi().min(0).optional(),description:wn().min(1,"Description is required"),short_description:wn().optional(),tags:Em(wn()).default([]),image_files:Em(Gy()).min(1,"At least one image is required"),status:m4(["active","draft","archived"]).default("active"),featured:nu().default(!1),free_delivery:nu().default(!1),seo_title:wn().optional(),seo_description:wn().optional(),dynamic_fields:f4(Gy()).default({})}),Xne=()=>{const e=st(),[t,s]=j.useState(""),[r,i]=j.useState([]),[a,o]=j.useState([]),[c,d]=j.useState([]),[f,m]=j.useState(""),[h,u]=j.useState(!1),[p,y]=j.useState(!1),[v,w]=j.useState(""),[x,b]=j.useState([]),[_,N]=j.useState([]),[C,I]=j.useState(!1),k=a4({resolver:l4(Yne),defaultValues:{name:"",category:"",price:"",cost_price:null,quantity:"",description:"",tags:[],image_files:[],status:"active",featured:!1,free_delivery:!1,dynamic_fields:{}}}),{control:E,handleSubmit:M,watch:P,setValue:T,formState:{errors:A}}=k,z=P("category");j.useEffect(()=>{s(z),T("subcategory",""),z?O(z,!1):N([])},[z,T]);const O=async(R,$=!1)=>{try{I(!0);const{apiRequest:W}=await Xe(async()=>{const{apiRequest:V}=await Promise.resolve().then(()=>Gn);return{apiRequest:V}},void 0),{response:Z,data:X}=await W(`categories/${encodeURIComponent(R)}/subcategories/`);if(Z.ok&&X){const V=X.subcategories||[];N(V),$&&V.length>0&&T("subcategory",V[0])}else N([])}catch(W){console.error("Error fetching subcategories:",W),N([])}finally{I(!1)}};j.useEffect(()=>{(async()=>{try{const{apiRequest:$}=await Xe(async()=>{const{apiRequest:X}=await Promise.resolve().then(()=>Gn);return{apiRequest:X}},void 0),{response:W,data:Z}=await $("/vendor-profiles/");if(console.log("Vendor profile response:",{response:W.ok,data:Z}),W.ok&&Z&&Z.results&&Z.results.length>0){const V=Z.results[0].categories||[];if(console.log("Vendor categories:",V),b(V),V.length>0){const H=V[0];T("category",H),s(H),O(H,!0)}}}catch($){console.error("Error fetching vendor profile:",$)}})()},[T]);const F=R=>{const $=R.target.files;if($){const W=Array.from($),Z=W.map(X=>URL.createObjectURL(X));i(X=>[...X,...W]),o(X=>[...X,...Z]),T("image_files",[...r,...W])}},G=R=>{URL.revokeObjectURL(a[R]);const $=r.filter((Z,X)=>X!==R),W=a.filter((Z,X)=>X!==R);i($),o(W),T("image_files",$)},Y=()=>{if(f.trim()&&!c.includes(f.trim())){const R=[...c,f.trim()];d(R),T("tags",R),m("")}},K=R=>{const $=c.filter(W=>W!==R);d($),T("tags",$)},U=async R=>{try{const $={...R};if(($.cost_price===null||$.cost_price===void 0)&&delete $.cost_price,await yl.createProduct($),w("Product created successfully!"),y(!0),k.reset(),a.forEach(W=>URL.revokeObjectURL(W)),i([]),o([]),d([]),x.length>0){const Z={Clothing:"clothing",Electronics:"electronics",Food:"food",Baby:"baby",Grocery:"grocery",Meat:"meat",Medicine:"medicine"}[x[0]]||x[0].toLowerCase();T("category",Z),s(Z)}}catch($){Wn.error("Failed to create product. Please try again."),console.error("Error creating product:",$)}},B=R=>{const $=`dynamic_fields.${R.name}`;switch(R.type){case"text":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(ue,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:$,control:E,rules:{required:R.required},render:({field:W})=>n.jsx(ve,{...W,placeholder:R.placeholder,className:"h-8 text-xs"})})]},R.name);case"number":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(ue,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:$,control:E,rules:{required:R.required},render:({field:W})=>n.jsx(ve,{...W,type:"number",placeholder:R.placeholder,className:"h-8 text-xs",onChange:Z=>W.onChange(Number(Z.target.value))})})]},R.name);case"select":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(ue,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:$,control:E,rules:{required:R.required},render:({field:W})=>{var Z;return n.jsxs(Vt,{onValueChange:W.onChange,value:W.value,children:[n.jsx($t,{className:"h-8 text-xs",children:n.jsx(Ut,{placeholder:`Select ${R.label.toLowerCase()}`})}),n.jsx(zt,{children:(Z=R.options)==null?void 0:Z.map(X=>n.jsx(qe,{value:X,className:"text-xs",children:X},X))})]})}})]},R.name);case"multiselect":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(ue,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:$,control:E,rules:{required:R.required},render:({field:W})=>{var X;const Z=W.value||[];return n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Vt,{onValueChange:V=>{Z.includes(V)||W.onChange([...Z,V])},children:[n.jsx($t,{className:"h-8 text-xs",children:n.jsx(Ut,{placeholder:`Select ${R.label.toLowerCase()}`})}),n.jsx(zt,{children:(X=R.options)==null?void 0:X.map(V=>n.jsx(qe,{value:V,className:"text-xs",children:V},V))})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:Z.map(V=>n.jsxs(Ie,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[V,n.jsx(is,{className:"h-2 w-2 cursor-pointer",onClick:()=>{W.onChange(Z.filter(H=>H!==V))}})]},V))})]})}})]},R.name);case"textarea":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(ue,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:$,control:E,rules:{required:R.required},render:({field:W})=>n.jsx(Yn,{...W,placeholder:R.placeholder,className:"text-xs",rows:2})})]},R.name);case"boolean":return n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:$,control:E,render:({field:W})=>n.jsx(Zt,{checked:W.value,onCheckedChange:W.onChange})}),n.jsx(ue,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:R.label})]},R.name);case"date":return n.jsxs("div",{className:"space-y-1",children:[n.jsxs(ue,{htmlFor:R.name,className:"text-xs font-medium text-gray-700",children:[R.label," ",R.required&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:$,control:E,rules:{required:R.required},render:({field:W})=>n.jsx(ve,{...W,type:"date",className:"h-8 text-xs"})})]},R.name);default:return null}};return h?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsx("h1",{className:"text-lg font-semibold",children:"Product Preview"})]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>u(!1),children:"Edit"})]})}),n.jsx(D4,{productData:P()})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("style",{children:`
        input, textarea, select {
          font-size: 16px !important;
          transform: translateZ(0);
        }
        @media screen and (max-width: 768px) {
          input:focus, textarea:focus, select:focus {
            font-size: 16px !important;
            zoom: 1 !important;
          }
        }
      `}),n.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>e("/vendor/dashboard"),children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsx("h1",{className:"text-lg font-semibold",children:"Add New Product"})]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>u(!0),children:[n.jsx(Nn,{className:"h-4 w-4 mr-1"}),"Preview"]})]})}),n.jsx("div",{className:"max-w-2xl mx-auto p-4",children:n.jsxs("form",{onSubmit:M(U),className:"space-y-4",children:[n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(At,{className:"h-4 w-4 text-blue-600"}),n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Basic Information"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"col-span-2 space-y-1",children:[n.jsxs(ue,{htmlFor:"name",className:"text-xs font-medium text-gray-700",children:["Product Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"name",control:E,render:({field:R})=>n.jsx(ve,{...R,placeholder:"Enter product name",className:"h-8 text-xs"})}),A.name&&n.jsx("p",{className:"text-red-500 text-xs",children:A.name.message})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs(ue,{htmlFor:"category",className:"text-xs font-medium text-gray-700",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"category",control:E,render:({field:R})=>n.jsxs(Vt,{onValueChange:R.onChange,value:R.value,children:[n.jsx($t,{className:"h-8 text-xs",children:n.jsx(Ut,{placeholder:"Select category"})}),n.jsx(zt,{children:x.map($=>n.jsx(qe,{value:$,className:"text-xs",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"📦"}),n.jsx("span",{children:$})]})},$))})]})}),A.category&&n.jsx("p",{className:"text-red-500 text-xs",children:A.category.message})]}),_.length>0&&n.jsxs("div",{className:"space-y-1",children:[n.jsx(ue,{className:"text-xs font-medium text-gray-700",children:"Subcategory"}),n.jsx(bt,{name:"subcategory",control:E,render:({field:R})=>n.jsxs(Vt,{onValueChange:R.onChange,value:R.value,disabled:C,children:[n.jsx($t,{className:"h-8 text-xs",children:n.jsx(Ut,{placeholder:C?"Loading...":"Select subcategory"})}),n.jsx(zt,{children:_.map($=>n.jsx(qe,{value:$,className:"text-xs",children:$},$))})]})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ue,{className:"text-xs font-medium text-gray-700",children:"Unit"}),n.jsx(ve,{value:t?p2(t):"piece",disabled:!0,className:"h-8 text-xs bg-gray-50"})]})]})]}),t&&Tr[t]&&n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(_P,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"mr-1",children:Tr[t].icon}),n.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:[Tr[t].name," Details"]})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:Tr[t].fields.map(B)})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Pricing & Inventory"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(ue,{htmlFor:"price",className:"text-xs font-medium text-gray-700",children:["Selling Price ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"price",control:E,render:({field:R})=>n.jsx(ve,{...R,type:"number",step:"0.01",placeholder:"0.00",className:"h-8 text-xs",onChange:$=>R.onChange(Number($.target.value))})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(ue,{htmlFor:"cost_price",className:"text-xs font-medium text-gray-700",children:"Cost Price"}),n.jsx(bt,{name:"cost_price",control:E,render:({field:R})=>n.jsx(ve,{type:"number",step:"0.01",placeholder:"0.00",className:"h-8 text-xs",value:R.value??"",onChange:$=>{const W=$.target.value;R.onChange(W?Number(W):null)}})})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs(ue,{htmlFor:"quantity",className:"text-xs font-medium text-gray-700",children:["Quantity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"quantity",control:E,render:({field:R})=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ve,{type:"number",placeholder:"0",className:"h-8 text-xs flex-1",value:R.value||"",onChange:$=>R.onChange($.target.value?Number($.target.value):"")}),n.jsx("span",{className:"text-xs text-gray-500 flex items-center px-2",children:t?p2(t):"piece"})]})})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(bt,{name:"free_delivery",control:E,render:({field:R})=>n.jsx(Zt,{checked:R.value,onCheckedChange:R.onChange})}),n.jsx(ue,{className:"text-xs font-medium text-gray-700",children:"Free Delivery"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zi,{className:"h-4 w-4 text-purple-600"}),n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Images"})]}),n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[n.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:F,className:"hidden",id:"image-upload"}),n.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[n.jsx(_u,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Click to upload images"})]})]}),a.length>0&&n.jsx("div",{className:"grid grid-cols-4 gap-2",children:a.map((R,$)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:R,alt:`Product ${$+1}`,className:"w-full h-12 object-cover rounded-lg"}),n.jsx("button",{type:"button",onClick:()=>G($),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx(is,{className:"h-3 w-3"})}),$===0&&n.jsx(Ie,{className:"absolute bottom-0 left-0 text-xs px-1 py-0",children:"Main"})]},$))})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yP,{className:"h-4 w-4 text-orange-600"}),n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Description"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs(ue,{htmlFor:"description",className:"text-xs font-medium text-gray-700",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(bt,{name:"description",control:E,render:({field:R})=>n.jsx(T4,{theme:"snow",value:R.value,onChange:R.onChange,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},style:{minHeight:"120px",fontSize:"12px"}})}),A.description&&n.jsx("p",{className:"text-red-500 text-xs",children:A.description.message})]})]}),n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Tags"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ve,{value:f,onChange:R=>m(R.target.value),placeholder:"Add a tag",className:"h-8 text-xs",onKeyPress:R=>R.key==="Enter"&&(R.preventDefault(),Y())}),n.jsx(ne,{type:"button",onClick:Y,variant:"outline",size:"sm",children:n.jsx(xn,{className:"h-3 w-3"})})]}),c.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(R=>n.jsxs(Ie,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[R,n.jsx(is,{className:"h-2 w-2 cursor-pointer",onClick:()=>K(R)})]},R))})]}),n.jsxs("div",{className:"flex gap-3 sticky bottom-4 bg-white p-3 border border-gray-200 rounded-lg",children:[n.jsx(ne,{type:"button",variant:"outline",className:"flex-1 h-9 text-xs",onClick:()=>{T("status","draft"),M(U)()},children:"Save as Draft"}),n.jsxs(ne,{type:"submit",className:"flex-1 h-9 text-xs",children:[n.jsx(Mc,{className:"h-3 w-3 mr-1"}),"Publish Product"]})]})]})}),n.jsx(Kne,{message:v,show:p,onClose:()=>y(!1),duration:3e3})]})},Qne=()=>{const[e,t]=j.useState(!1),[s,r]=j.useState("khalti"),[i,a]=j.useState(""),[o,c]=j.useState(!0),[d,f]=j.useState("all"),[m,h]=j.useState(""),[u,p]=j.useState(""),[y,v]=j.useState(null),[w,x]=j.useState([]),[b,_]=j.useState(!1),[N,C]=j.useState(!0),[I,k]=j.useState(!1),[E,M]=j.useState(null),[P,T]=j.useState(1),[A,z]=j.useState(1),[O,F]=j.useState(0),G=20,Y=async()=>{try{const{response:H,data:se}=await Be("accounts/wallet/");H.ok&&se?v(se):Wn.error("Failed to fetch wallet data")}catch(H){console.error("Error fetching wallet data:",H),Wn.error("Error loading wallet data")}finally{C(!1)}},K=async()=>{try{const H=new URLSearchParams({date_filter:d,page:P.toString(),page_size:G.toString()});d==="custom"&&m&&u&&(H.append("date_from",m),H.append("date_to",u));const{response:se,data:Q}=await Be(`accounts/wallet/transactions/?${H}`);se.ok&&Q?(x(Q.transactions),z(Q.total_pages),F(Q.total_count)):Wn.error("Failed to fetch transactions")}catch(H){console.error("Error fetching transactions:",H),Wn.error("Error loading transactions")}};j.useEffect(()=>{Y();const H=()=>{Y()};return window.addEventListener("walletUpdated",H),()=>{window.removeEventListener("walletUpdated",H)}},[]),j.useEffect(()=>{y&&K()},[y,d,P,m,u]),j.useEffect(()=>{const H=()=>{Y(),K()};return window.addEventListener("walletUpdated",H),()=>{window.removeEventListener("walletUpdated",H)}},[]),j.useEffect(()=>{const H=new URLSearchParams(window.location.search);if(H.get("payment_complete")==="1"){const se=H.get("pidx");se?U(se):(Wn.success("Payment completed successfully!"),Y()),window.history.replaceState({},document.title,window.location.pathname)}},[]);const U=async H=>{try{const{response:se,data:Q}=await Be("accounts/wallet/khalti-verify/",{method:"POST",body:JSON.stringify({pidx:H})});se.ok&&Q&&Q.success?(Wn.success(`Payment verified! Rs${Q.amount} added to wallet`),Y()):Wn.error((Q==null?void 0:Q.error)||"Payment verification failed")}catch(se){console.error("Error verifying payment:",se),Wn.error("Error verifying payment")}},B=async()=>{if(!s||!i)return;const{simplePersistentAuth:H}=await Xe(async()=>{const{simplePersistentAuth:Q}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:Q}},[]);if(!await H.isVendorLoggedIn()){Wn.error("Please login to continue");return}if(_(!0),s==="khalti")try{const{response:Q,data:ie}=await Be("accounts/wallet/khalti-payment/",{method:"POST",body:JSON.stringify({amount:parseFloat(i)})});Q.ok&&ie&&ie.success?window.location.href=ie.payment_url:(Wn.error((ie==null?void 0:ie.error)||"Failed to initiate payment"),_(!1))}catch(Q){console.error("Error initiating payment:",Q),Wn.error("Error processing payment"),_(!1)}t(!1),a("")},R=()=>w.filter(H=>H.transaction_type==="credit").reduce((H,se)=>H+parseFloat(se.amount),0),$=()=>w.filter(H=>H.transaction_type==="debit").reduce((H,se)=>H+parseFloat(se.amount),0),W=H=>new Date(H).toLocaleDateString(),Z=H=>new Date(H).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),X=()=>{const se=`
===========================================
           WALLET TRANSACTION SUMMARY
===========================================
Generated: ${new Date().toLocaleDateString()}
Store: ${(y==null?void 0:y.business_name)||"N/A"}
Period: ${d==="custom"?`${m} to ${u}`:d.toUpperCase()}

BALANCE OVERVIEW
-------------------------------------------
Current Balance: Rs${(y==null?void 0:y.balance)||"0.00"}
Total Credit: Rs${R().toFixed(2)}
Total Debit: Rs${$().toFixed(2)}
Net Amount: Rs${(R()-$()).toFixed(2)}

TRANSACTION DETAILS (${w.length} transactions)
-------------------------------------------
${w.map(ie=>`${W(ie.created_at)} ${Z(ie.created_at)} | ${ie.transaction_type.toUpperCase().padEnd(6)} | Rs${parseFloat(ie.amount).toFixed(2).padStart(8)} | ${ie.description}`).join(`
`)}

===========================================
    `,Q=window.open("","_blank");Q==null||Q.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${se}</pre>`),Q==null||Q.print()},V=()=>{const H=[["Date","Time","Type","Amount","Description","Method","Status"].join(","),...w.map(he=>[W(he.created_at),Z(he.created_at),he.transaction_type,parseFloat(he.amount).toFixed(2),`"${he.description}"`,he.payment_method||"N/A",he.status].join(","))].join(`
`),se=new Blob([H],{type:"text/csv"}),Q=window.URL.createObjectURL(se),ie=document.createElement("a");ie.href=Q,ie.download=`wallet-transactions-${d}-${new Date().toISOString().split("T")[0]}.csv`,ie.click(),window.URL.revokeObjectURL(Q)};return n.jsx(qt,{title:"Wallet",children:n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 pb-20",children:[n.jsxs("div",{className:"bg-white border-b p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(em,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"My Wallet"}),n.jsx("p",{className:"text-gray-600 text-sm",children:(y==null?void 0:y.business_name)||"Loading..."})]})]}),n.jsx(ne,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100",onClick:()=>c(!o),children:o?n.jsx(Nn,{className:"h-4 w-4"}):n.jsx(tb,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Available Balance"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-3",children:o?`₹${(y==null?void 0:y.balance)||"0.00"}`:"₹****.**"}),n.jsxs(ne,{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium",onClick:()=>t(!0),disabled:!0,children:[n.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Money"]})]})]}),n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx(Ee,{className:"bg-white shadow-sm",children:n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Br,{className:"h-4 w-4 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"This Month"}),n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+₹",(y==null?void 0:y.total_earned)||"0.00"]})]})]})})}),n.jsx(Ee,{className:"bg-white shadow-sm",children:n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(NP,{className:"h-4 w-4 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Expenses"}),n.jsxs("p",{className:"text-sm font-bold text-red-600",children:["-₹",(y==null?void 0:y.total_spent)||"0.00"]})]})]})})})]})}),n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transactions"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ne,{variant:"outline",size:"sm",onClick:X,children:[n.jsx(ib,{className:"h-4 w-4 mr-1"}),"Print"]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:V,children:[n.jsx(Hl,{className:"h-4 w-4 mr-1"}),"Export"]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>k(!0),children:n.jsx(ji,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{key:"all",label:"All"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"custom",label:"Custom"}].map(H=>n.jsx(ne,{variant:d===H.key?"default":"outline",size:"sm",className:"whitespace-nowrap",onClick:()=>f(H.key),children:H.label},H.key))})]}),n.jsx("div",{className:"px-4 space-y-2",children:N?n.jsxs("div",{className:"flex justify-center items-center py-8",children:[n.jsx(xi,{className:"h-6 w-6 animate-spin"}),n.jsx("span",{className:"ml-2",children:"Loading transactions..."})]}):w.length>0?w.map(H=>n.jsx(Ee,{className:"bg-white shadow-sm cursor-pointer hover:bg-gray-50",onClick:()=>M(H),children:n.jsx(Ae,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${H.transaction_type==="credit"?"bg-green-100":"bg-red-100"}`,children:H.transaction_type==="credit"?n.jsx(bu,{className:"h-5 w-5 text-green-600"}):n.jsx(wu,{className:"h-5 w-5 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:H.description}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[n.jsxs("span",{children:[W(H.created_at)," at ",Z(H.created_at)]}),n.jsx(Ie,{variant:H.status==="completed"?"default":"secondary",className:"text-xs",children:H.status})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:`text-sm font-bold ${H.transaction_type==="credit"?"text-green-600":"text-red-600"}`,children:[H.transaction_type==="credit"?"+":"-","₹",parseFloat(H.amount).toFixed(2)]}),n.jsx("p",{className:"text-xs text-gray-500",children:H.payment_method||"N/A"})]})]})})},H.id)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(em,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No transactions found"})]})}),A>1&&n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(P-1)*G+1,"-",Math.min(P*G,O)," of ",O," transactions"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>T(P-1),disabled:P===1,className:"h-8 w-8 p-0",children:n.jsx(vP,{className:"h-4 w-4"})}),n.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,A)},(H,se)=>{const Q=P<=3?se+1:P-2+se;return Q>A?null:n.jsx(ne,{variant:P===Q?"default":"outline",size:"sm",onClick:()=>T(Q),className:"h-8 w-8 p-0 text-xs",children:Q},Q)})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>T(P+1),disabled:P===A,className:"h-8 w-8 p-0",children:n.jsx(mc,{className:"h-4 w-4"})})]})]})}),n.jsx(Os,{open:e,onOpenChange:t,children:n.jsxs(gs,{side:"bottom",className:"h-[80vh] rounded-t-3xl",children:[n.jsx(vs,{className:"pb-6",children:n.jsx(xs,{className:"text-center text-xl",children:"Add Money to Wallet"})}),n.jsxs("div",{className:"space-y-6 overflow-y-auto h-full pb-20",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(ue,{className:"text-sm font-medium",children:"Enter Amount"}),n.jsx(ve,{type:"number",placeholder:"₹ 0.00",value:i,onChange:H=>a(H.target.value),className:"h-12 text-lg text-center"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:[500,1e3,2e3].map(H=>n.jsxs(ne,{variant:"outline",onClick:()=>a(H.toString()),className:"h-10",children:["₹",H]},H))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(ue,{className:"text-sm font-medium",children:"Payment Method"}),n.jsx(Ee,{className:"cursor-pointer transition-all ring-2 ring-purple-500 bg-purple-50",onClick:()=>r("khalti"),children:n.jsx(Ae,{className:"p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(to,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Khalti"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Secure digital payment gateway"})]})]})})})]}),n.jsx("div",{className:"fixed bottom-4 left-4 right-4",children:n.jsx(ne,{className:"w-full h-12 text-lg font-medium",disabled:!s||!i||b,onClick:B,children:b?n.jsxs(n.Fragment,{children:[n.jsx(xi,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Add ₹${i||"0"}`})})]})]})}),n.jsx(Os,{open:I,onOpenChange:k,children:n.jsxs(gs,{side:"right",className:"w-full sm:w-80",children:[n.jsx(vs,{className:"pb-4",children:n.jsxs(xs,{className:"flex items-center justify-between",children:["Filter Transactions",n.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>k(!1),children:n.jsx(is,{className:"h-4 w-4"})})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-sm font-medium mb-2 block",children:"Date Range"}),n.jsx("div",{className:"space-y-2",children:[{key:"all",label:"All Time"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"custom",label:"Custom Range"}].map(H=>n.jsx(ne,{variant:d===H.key?"default":"outline",size:"sm",className:"w-full justify-start",onClick:()=>{f(H.key),T(1)},children:H.label},H.key))})]}),d==="custom"&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-xs font-medium",children:"From Date"}),n.jsx(ve,{type:"date",value:m,onChange:H=>{h(H.target.value),T(1)},className:"h-9 text-sm mt-1"})]}),n.jsxs("div",{children:[n.jsx(ue,{className:"text-xs font-medium",children:"To Date"}),n.jsx(ve,{type:"date",value:u,onChange:H=>{p(H.target.value),T(1)},className:"h-9 text-sm mt-1"})]})]}),n.jsx("div",{className:"pt-4 border-t",children:n.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[n.jsxs("p",{children:["Total Transactions: ",O]}),n.jsxs("p",{children:["Total Credit: ₹",R().toFixed(2)]}),n.jsxs("p",{children:["Total Debit: ₹",$().toFixed(2)]}),n.jsxs("p",{className:"font-medium",children:["Net: ₹",(R()-$()).toFixed(2)]})]})})]})]})}),n.jsx(Os,{open:!!E,onOpenChange:()=>M(null),children:n.jsxs(gs,{side:"bottom",className:"h-[70vh] rounded-t-xl",children:[n.jsx(vs,{className:"pb-4",children:n.jsx(xs,{className:"text-left",children:"Transaction Details"})}),E&&n.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${E.transaction_type==="credit"?"bg-green-100":"bg-red-100"}`,children:E.transaction_type==="credit"?n.jsx(bu,{className:"h-6 w-6 text-green-600"}):n.jsx(wu,{className:"h-6 w-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-lg",children:E.description}),n.jsxs("p",{className:`text-xl font-bold ${E.transaction_type==="credit"?"text-green-600":"text-red-600"}`,children:[E.transaction_type==="credit"?"+":"-","₹",parseFloat(E.amount).toFixed(2)]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"Transaction ID"}),n.jsxs("p",{className:"font-medium",children:["TXN-",E.id]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"Status"}),n.jsx(Ie,{variant:E.status==="completed"?"default":"secondary",children:E.status})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"Date & Time"}),n.jsxs("p",{className:"font-medium",children:[W(E.created_at)," at ",Z(E.created_at)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600",children:"Method"}),n.jsx("p",{className:"font-medium",children:E.payment_method||"N/A"})]})]})]}),(E.order_amount||E.reference_id)&&n.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[n.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Rr,{className:"h-4 w-4"}),"Additional Details"]}),n.jsxs("div",{className:"space-y-2 text-sm",children:[E.order_amount&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Order Amount:"}),n.jsxs("span",{className:"font-medium",children:["₹",parseFloat(E.order_amount).toFixed(2)]})]}),E.reference_id&&n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Reference ID:"}),n.jsx("span",{className:"font-medium",children:E.reference_id})]})]})]})]})]})})]})})},Jne=()=>{const e=st(),{toast:t}=hn(),{logout:s,state:r,login:i}=Ni(),[a,o]=j.useState("personal"),[c,d]=j.useState(!1),[f,m]=j.useState(!0),[h,u]=j.useState("");j.useState(null);const[p,y]=j.useState(null),[v,w]=j.useState(!1),[x,b]=j.useState(""),[_,N]=j.useState(null),[C,I]=j.useState({businessName:"",ownerName:"",email:"",phone:"",address:"",city:"",state:"",pincode:"",businessType:"",categories:[],description:"",bankName:"",accountNumber:"",ifscCode:"",accountHolderName:"",gstNumber:"",panNumber:"",businessLicense:null,gstCertificate:null,fssaiLicense:null,additionalDocs:[],deliveryRadius:"",minOrderAmount:"",profileImage:null});j.useEffect(()=>{k(),E(),M()},[]);const k=async()=>{var B,R;try{const{simplePersistentAuth:$}=await Xe(async()=>{const{simplePersistentAuth:H}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:H}},[]);if(!await $.isVendorLoggedIn()){e("/vendor/login");return}const Z=await $.getVendorAuth();Z&&await Re.setAuth(Z.token,Z.user);const{response:X,data:V}=await Be("/vendor-profiles/");if(!X.ok)throw new Error("Failed to fetch profile data");if(V&&V.results&&V.results.length>0){const H=V.results[0],{response:se,data:Q}=await Be("/vendor-documents/");let ie=[];se.ok&&Q&&(ie=Q.results||[]),I({businessName:H.business_name||"",ownerName:H.owner_name||"",email:H.business_email||"",phone:H.business_phone||"",address:H.business_address||"",city:H.city||"",state:H.state||"",pincode:H.pincode||"",businessType:H.business_type||"",categories:H.categories||[],description:H.description||"",bankName:H.bank_name||"",accountNumber:H.account_number||"",ifscCode:H.ifsc_code||"",accountHolderName:H.account_holder_name||"",gstNumber:H.gst_number||"",panNumber:H.pan_number||"",businessLicense:H.business_license_file?{name:"Business License",url:H.business_license_file}:null,gstCertificate:H.gst_certificate?{name:"GST Certificate",url:H.gst_certificate}:null,fssaiLicense:H.fssai_license?{name:"FSSAI License",url:H.fssai_license}:null,additionalDocs:ie.map(he=>({name:`Document ${he.id}`,url:he.document})),deliveryRadius:((B=H.delivery_radius)==null?void 0:B.toString())||"",minOrderAmount:H.min_order_amount||"",profileImage:((R=H.user_info)==null?void 0:R.profile_picture)||null})}}catch($){console.error("Error fetching profile:",$),u("Failed to load profile data")}finally{m(!1)}},E=async()=>{try{const{simplePersistentAuth:B}=await Xe(async()=>{const{simplePersistentAuth:X}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:X}},[]);if(!await B.isVendorLoggedIn()){e("/vendor/login");return}const $=await B.getVendorAuth();$&&await Re.setAuth($.token,$.user);const{response:W,data:Z}=await Be("/profile/");if(W.ok&&Z){const X={...r.user,available_roles:Z.available_roles,current_role:Z.current_role};console.log("Updated user data:",X)}}catch(B){console.error("Error fetching user profile:",B)}},M=async()=>{try{const B=await fetch("/api/delivery-radius/"),R=await B.json();B.ok&&N(R.delivery_radius)}catch(B){console.error("Error fetching admin delivery radius:",B)}},P=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"manufacturer",label:"Manufacturer"},{value:"service_provider",label:"Service Provider"},{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"}],T=["Electronics","Fashion","Food","Home","Books","Sports","Beauty","Toys","Jewelry","Furniture","Automotive","Health & Wellness","Pet Supplies","Stationery","Garden & Outdoor","Kids & Baby","Appliances","Hardware","Crafts & Hobbies","Travel & Luggage"],A=(B,R)=>{I($=>({...$,[B]:R}))},z=B=>{const R=C.categories.includes(B)?C.categories.filter($=>$!==B):[...C.categories,B];A("categories",R)},O=async B=>{if(B)try{if(!await Re.isAuthenticated())return;const $=new FormData;$.append("profile_picture",B);const{response:W,data:Z}=await Be("/api/profile/upload-picture/",{method:"POST",body:$});if(W.ok&&Z)console.log("Upload result:",Z),console.log("Profile picture URL:",Z.profile_picture),I(X=>({...X,profileImage:Z.profile_picture||null})),t({title:"Success",description:"Profile image updated successfully!"}),setTimeout(()=>{k()},500);else{const X=await W.json();throw console.error("Profile image upload error:",X),new Error("Profile image upload failed")}}catch(R){console.error("Profile image upload error:",R),t({title:"Error",description:"Failed to upload profile image. Please try again.",variant:"destructive"})}},F=async(B,R,$)=>{var Z;if(!R)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(R.type)){t({title:"Error",description:"Please upload only PDF, JPG, JPEG, or PNG files.",variant:"destructive"});return}if(R.size>5*1024*1024){t({title:"Error",description:"File size must be less than 5MB.",variant:"destructive"});return}y(B);try{if(!await Re.isAuthenticated())return;const V=new FormData;V.append(B,R),V.append("business_name",C.businessName),V.append("business_email",C.email),V.append("business_phone",C.phone),V.append("business_address",C.address),V.append("city",C.city),V.append("state",C.state),V.append("pincode",C.pincode),V.append("business_type",C.businessType);const{response:H,data:se}=await Be("/vendor-profiles/");if(!H.ok)throw new Error("Failed to get profile");const Q=(Z=se.results[0])==null?void 0:Z.id;if(!Q)throw new Error("Profile not found");const{response:ie,data:he}=await Be(`/vendor-profiles/${Q}/`,{method:"PATCH",body:V});if(!ie.ok)throw new Error("Upload failed");B==="business_license_file"?A("businessLicense",{name:"Business License",url:he.business_license_file_url}):B==="gst_certificate"?A("gstCertificate",{name:"GST Certificate",url:he.gst_certificate_url}):B==="fssai_license"&&A("fssaiLicense",{name:"FSSAI License",url:he.fssai_license_url}),t({title:"Success",description:"Document uploaded successfully!"}),B==="additionalDocs"&&(w(!1),b(""),k())}catch(X){console.error("Upload error:",X),t({title:"Error",description:"Failed to upload document. Please try again.",variant:"destructive"})}finally{y(null)}},G=({title:B,docType:R,document:$,onUpload:W})=>n.jsxs("div",{children:[n.jsx(ue,{children:B}),n.jsxs("div",{className:"mt-2 p-4 border border-gray-300 rounded-lg bg-gray-50",children:[n.jsx(Rr,{className:"h-6 w-6 mx-auto mb-2 text-gray-500"}),$?n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"text-sm text-green-600",children:"✓ Uploaded"}),n.jsxs(Fo,{children:[n.jsx(jy,{asChild:!0,children:n.jsxs(ne,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"View"]})}),n.jsxs(Da,{className:"max-w-4xl w-full h-[80vh]",children:[n.jsx(Fa,{children:n.jsx($a,{children:B})}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx("iframe",{src:$.url,className:"w-full h-full border-0",title:B})})]})]})]}):n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Not uploaded"}),n.jsxs(ne,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",onClick:()=>{const Z=$.createElement("input");Z.type="file",Z.accept=".pdf,.jpg,.jpeg,.png",Z.onchange=X=>{var H;const V=(H=X.target.files)==null?void 0:H[0];V&&W(V)},Z.click()},disabled:p===R,children:[p===R?n.jsx(xi,{className:"h-3 w-3 mr-1 animate-spin"}):n.jsx(_u,{className:"h-3 w-3 mr-1"}),"Upload"]})]})]})]}),Y=async()=>{try{if(!await Re.isAuthenticated())return;const R={business_name:C.businessName,owner_name:C.ownerName,business_email:C.email,business_phone:C.phone,business_address:C.address,city:C.city,state:C.state,pincode:C.pincode,business_type:C.businessType,categories:C.categories,description:C.description,bank_name:C.bankName,account_number:C.accountNumber,account_holder_name:C.accountHolderName,gst_number:C.gstNumber,pan_number:C.panNumber,delivery_radius:C.deliveryRadius?parseFloat(C.deliveryRadius):null,min_order_amount:C.minOrderAmount},{response:$,data:W}=await Be("/vendor-profiles/");if($.ok&&W){if(W.results&&W.results.length>0){const Z=W.results[0].id,{response:X}=await Be(`/vendor-profiles/${Z}/`,{method:"PUT",body:JSON.stringify(R)});if(X.ok)d(!1),t({title:"Success",description:"Profile updated successfully!",variant:"default"}),k();else{const V=await X.json();throw console.error("Update error:",V),new Error("Failed to update profile")}}}else throw new Error("Failed to fetch profile for update")}catch(B){console.error("Error saving profile:",B),t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}},K=async()=>{try{await Re.getToken()&&await Be("/logout/",{method:"POST"})}catch(B){console.error("Logout error:",B)}finally{await s(),e("/vendor/login")}},U=[{id:"personal",label:"Personal",icon:Lr},{id:"business",label:"Business",icon:ms},{id:"address",label:"Address",icon:Kt},{id:"banking",label:"Banking",icon:to},{id:"documents",label:"Documents",icon:Rr}];return f?n.jsx(qt,{title:"My Profile",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):h?n.jsx(qt,{title:"My Profile",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:h}),n.jsx(ne,{onClick:k,children:"Retry"})]})})}):n.jsx(qt,{title:"My Profile",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-100 fixed top-14 sm:top-16 left-0 right-0 z-30",children:n.jsxs("div",{className:"flex items-center justify-between p-3 mx-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-lg overflow-hidden ${c?"cursor-pointer hover:bg-gray-200":""}`,onClick:c?()=>{const B=document.createElement("input");B.type="file",B.accept="image/*",B.onchange=R=>{var W;const $=(W=R.target.files)==null?void 0:W[0];$&&O($)},B.click()}:void 0,children:C.profileImage?n.jsx("img",{src:C.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):n.jsx("span",{className:"text-gray-600 font-semibold",children:C.businessName?C.businessName.charAt(0).toUpperCase():"V"})}),c&&n.jsx(ne,{size:"sm",className:"absolute -bottom-0.5 -right-0.5 w-5 h-5 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const B=document.createElement("input");B.type="file",B.accept="image/*",B.onchange=R=>{var W;const $=(W=R.target.files)==null?void 0:W[0];$&&O($)},B.click()},children:n.jsx(Zi,{className:"h-2.5 w-2.5"})})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"font-medium text-base truncate",children:C.businessName||"Business Name"}),n.jsx("p",{className:"text-gray-500 text-sm truncate",children:C.ownerName||"Owner Name"})]})]}),n.jsx(ne,{onClick:()=>c?Y():d(!0),size:"sm",className:"bg-green-600 hover:bg-green-700",children:c?n.jsxs(n.Fragment,{children:[n.jsx(Mc,{className:"h-3 w-3 mr-1"}),"Save"]}):n.jsxs(n.Fragment,{children:[n.jsx(Xu,{className:"h-3 w-3 mr-1"}),"Edit"]})})]})}),n.jsx("div",{className:"bg-white pt-16",children:n.jsxs(Si,{value:a,onValueChange:o,className:"w-full",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsx(qr,{className:"grid grid-cols-5 w-full",children:U.map(B=>n.jsxs(Ct,{value:B.id,className:"flex items-center gap-2 text-xs",children:[n.jsx(B.icon,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:B.label})]},B.id))})}),n.jsx(dt,{value:"personal",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"ownerName",children:"Full Name *"}),n.jsx(ve,{id:"ownerName",value:C.ownerName,onChange:B=>A("ownerName",B.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"email",children:"Email *"}),n.jsx(ve,{id:"email",type:"email",value:C.email,onChange:B=>A("email",B.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"phone",children:"Phone Number *"}),n.jsx(ve,{id:"phone",value:C.phone,onChange:B=>A("phone",B.target.value),disabled:!c})]})]})}),n.jsxs(dt,{value:"business",className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"businessName",children:"Business Name *"}),n.jsx(ve,{id:"businessName",value:C.businessName,onChange:B=>A("businessName",B.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"businessType",children:"Business Type *"}),n.jsxs(Vt,{value:C.businessType,onValueChange:B=>A("businessType",B),disabled:!c,children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsx(zt,{children:P.map(B=>n.jsx(qe,{value:B.value,children:B.label},B.value))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"gstNumber",children:"GST Number"}),n.jsx(ve,{id:"gstNumber",value:C.gstNumber,onChange:B=>A("gstNumber",B.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"panNumber",children:"PAN Number"}),n.jsx(ve,{id:"panNumber",value:C.panNumber,onChange:B=>A("panNumber",B.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"deliveryRadius",children:"Delivery Radius (km)"}),n.jsx(ve,{id:"deliveryRadius",value:_?`${_} (Set by Admin)`:C.deliveryRadius,disabled:!0,className:"bg-gray-100 text-gray-600"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Delivery radius is set by the administrator"})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"minOrderAmount",children:"Min Order Amount (₹)"}),n.jsx(ve,{id:"minOrderAmount",value:C.minOrderAmount,onChange:B=>A("minOrderAmount",B.target.value),disabled:!c})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(ue,{children:"Product Categories"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:T.map(B=>n.jsx("button",{type:"button",onClick:()=>z(B),disabled:!c,className:`p-2 text-sm rounded-lg border text-left ${C.categories.includes(B)?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"} ${c?"":"opacity-50 cursor-not-allowed"}`,children:B},B))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(ue,{htmlFor:"description",children:"Business Description"}),n.jsx(Yn,{id:"description",value:C.description,onChange:B=>A("description",B.target.value),rows:3,disabled:!c})]})]}),n.jsx(dt,{value:"address",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(ue,{htmlFor:"address",children:"Full Address *"}),n.jsx(Yn,{id:"address",value:C.address,onChange:B=>A("address",B.target.value),disabled:!c,rows:2})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"city",children:"City *"}),n.jsx(ve,{id:"city",value:C.city,onChange:B=>A("city",B.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"state",children:"State *"}),n.jsx(ve,{id:"state",value:C.state,onChange:B=>A("state",B.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"pincode",children:"Pincode *"}),n.jsx(ve,{id:"pincode",value:C.pincode,onChange:B=>A("pincode",B.target.value),disabled:!c})]})]})}),n.jsx(dt,{value:"banking",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"bankName",children:"Bank Name *"}),n.jsx(ve,{id:"bankName",value:C.bankName,onChange:B=>A("bankName",B.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"accountHolderName",children:"Account Holder Name *"}),n.jsx(ve,{id:"accountHolderName",value:C.accountHolderName,onChange:B=>A("accountHolderName",B.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"accountNumber",children:"Account Number *"}),n.jsx(ve,{id:"accountNumber",value:C.accountNumber,onChange:B=>A("accountNumber",B.target.value),disabled:!c})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"ifscCode",children:"IFSC Code *"}),n.jsx(ve,{id:"ifscCode",value:C.ifscCode,onChange:B=>A("ifscCode",B.target.value),disabled:!c})]})]})}),n.jsx(dt,{value:"documents",className:"p-4 space-y-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(G,{title:"Business License",docType:"business_license_file",document:C.businessLicense,onUpload:B=>F("business_license_file",B)}),n.jsx(G,{title:"GST Certificate",docType:"gst_certificate",document:C.gstCertificate,onUpload:B=>F("gst_certificate",B)}),n.jsx(G,{title:"FSSAI License",docType:"fssai_license",document:C.fssaiLicense,onUpload:B=>F("fssai_license",B)})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx(ue,{children:"Additional Documents"}),n.jsxs(ne,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700",onClick:()=>w(!0),children:[n.jsx(xn,{className:"h-3 w-3 mr-1"}),"Add Document"]})]}),v&&n.jsx("div",{className:"mb-4 p-4 border border-gray-200 rounded-lg bg-white",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"docName",children:"Document Name"}),n.jsx(ve,{id:"docName",value:x,onChange:B=>b(B.target.value),placeholder:"Enter document name"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{w(!1),b("")},children:"Cancel"}),n.jsxs(ne,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{if(!x.trim()){t({title:"Error",description:"Please enter a document name",variant:"destructive"});return}const B=document.createElement("input");B.type="file",B.accept=".pdf,.jpg,.jpeg,.png",B.onchange=R=>{var W;const $=(W=R.target.files)==null?void 0:W[0];$&&F("additionalDocs",$)},B.click()},disabled:p==="additionalDocs",children:[p==="additionalDocs"?n.jsx(xi,{className:"h-3 w-3 mr-1 animate-spin"}):n.jsx(_u,{className:"h-3 w-3 mr-1"}),"Upload Document"]})]})]})}),C.additionalDocs.length>0?n.jsx("div",{className:"space-y-2",children:C.additionalDocs.map((B,R)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded border",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rr,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-sm font-medium",children:B.name})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(Fo,{children:[n.jsx(jy,{asChild:!0,children:n.jsxs(ne,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",children:[n.jsx(Nn,{className:"h-3 w-3 mr-1"}),"View"]})}),n.jsxs(Da,{className:"max-w-4xl w-full h-[80vh]",children:[n.jsx(Fa,{children:n.jsx($a,{children:B.name})}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx("iframe",{src:B.url,className:"w-full h-full border-0",title:B.name})})]})]})})]},R))}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Rr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No additional documents uploaded"})]})]})]})})]})}),n.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50/50",children:n.jsx(YO,{})}),n.jsx("div",{className:"p-4 pb-20",children:n.jsxs(ne,{variant:"outline",className:"w-full flex items-center justify-center py-6 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:K,children:[n.jsx(sb,{className:"h-5 w-5 mr-2"}),n.jsx("span",{className:"font-medium text-base",children:"Logout"})]})})]})})},ese=()=>{const[e,t]=j.useState("basic"),[s,r]=j.useState(!1),[i,a]=j.useState(!1),[o,c]=j.useState(null),[d,f]=j.useState(!0),[m,h]=j.useState(null),[u,p]=j.useState({businessName:"Fresh Farm Valley",ownerName:"Ram Sharma",email:"ram@freshfarm.com",phone:"+977 9841234567",whatsapp:"+977 9841234567",avatar:"👨‍🌾",businessType:"grocery",description:"Certified organic farm serving Kathmandu Valley for 10+ years. We specialize in fresh vegetables, fruits, and dairy products.",categories:["Vegetables","Fruits","Dairy","Organic"],establishedYear:"2014",gstNumber:"27AABCU9603R1ZX",panNumber:"AABCU9603R",address:"Balkumari, Lalitpur",city:"Kathmandu",state:"Bagmati",pincode:"44700",landmark:"Near Balkumari Temple",deliveryRadius:"5",minOrderAmount:"200",deliveryFee:"50",freeDeliveryAbove:"500",estimatedDeliveryTime:"30-45",isOpen:!0,openingHours:{monday:{open:"06:00",close:"21:00",closed:!1},tuesday:{open:"06:00",close:"21:00",closed:!1},wednesday:{open:"06:00",close:"21:00",closed:!1},thursday:{open:"06:00",close:"21:00",closed:!1},friday:{open:"06:00",close:"21:00",closed:!1},saturday:{open:"06:00",close:"21:00",closed:!1},sunday:{open:"07:00",close:"20:00",closed:!1}},bankName:"Nepal Bank Limited",accountNumber:"1234567890123456",ifscCode:"NBLNPKA",accountHolderName:"Ram Sharma",upiId:"ram@nbl",businessLicense:"",gstCertificate:"",fssaiLicense:"",autoAcceptOrders:!1,notificationSettings:{orderAlerts:!0,messageAlerts:!0,promotionalEmails:!1}}),y=[{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"},{value:"meat",label:"Meat Shop"},{value:"dairy",label:"Dairy Products"}],v=["Vegetables","Fruits","Dairy","Meat","Bakery","Beverages","Snacks","Organic","Frozen","Spices","Grains","Oil"],w=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],x=(k,E)=>{p(M=>({...M,[k]:E}))},b=(k,E,M)=>{p(P=>({...P,[k]:{...P[k],[E]:M}}))};j.useEffect(()=>{_()},[]);const _=async()=>{var k,E,M,P;try{if(f(!0),!localStorage.getItem("token")){h("No authentication token found");return}const{response:A,data:z}=await Be("/vendor-profiles/");if(A.ok&&z)if(z.results&&z.results.length>0){const O=z.results[0];p({businessName:O.business_name||"",ownerName:O.owner_name||"",email:O.business_email||"",phone:O.business_phone||"",whatsapp:O.business_phone||"",avatar:"🏪",businessType:O.business_type||"grocery",description:O.description||"",categories:O.categories||[],establishedYear:O.established_year||"",gstNumber:O.gst_number||"",panNumber:O.pan_number||"",address:O.business_address||"",city:O.city||"",state:O.state||"",pincode:O.pincode||"",landmark:O.landmark||"",deliveryRadius:((k=O.delivery_radius)==null?void 0:k.toString())||"5",minOrderAmount:((E=O.min_order_amount)==null?void 0:E.toString())||"200",deliveryFee:((M=O.delivery_fee)==null?void 0:M.toString())||"50",freeDeliveryAbove:((P=O.free_delivery_above)==null?void 0:P.toString())||"500",estimatedDeliveryTime:O.estimated_delivery_time||"30-45",isOpen:O.is_active||!1,openingHours:{monday:{open:O.monday_open||"06:00",close:O.monday_close||"21:00",closed:O.monday_closed||!1},tuesday:{open:O.tuesday_open||"06:00",close:O.tuesday_close||"21:00",closed:O.tuesday_closed||!1},wednesday:{open:O.wednesday_open||"06:00",close:O.wednesday_close||"21:00",closed:O.wednesday_closed||!1},thursday:{open:O.thursday_open||"06:00",close:O.thursday_close||"21:00",closed:O.thursday_closed||!1},friday:{open:O.friday_open||"06:00",close:O.friday_close||"21:00",closed:O.friday_closed||!1},saturday:{open:O.saturday_open||"06:00",close:O.saturday_close||"21:00",closed:O.saturday_closed||!1},sunday:{open:O.sunday_open||"07:00",close:O.sunday_close||"20:00",closed:O.sunday_closed||!1}},bankName:O.bank_name||"",accountNumber:O.account_number||"",ifscCode:O.ifsc_code||"",accountHolderName:O.account_holder_name||"",upiId:O.upi_id||"",businessLicense:O.business_license_file||"",gstCertificate:O.gst_certificate||"",fssaiLicense:O.fssai_license||"",autoAcceptOrders:O.auto_accept_orders||!1,notificationSettings:{orderAlerts:!0,messageAlerts:!0,promotionalEmails:!1}})}else a(!0);else throw new Error("Failed to fetch vendor profile")}catch(T){console.error("Error fetching vendor profile:",T),h("Failed to load vendor profile")}finally{f(!1)}},N=async()=>{try{if(!localStorage.getItem("token"))return;const E={business_name:u.businessName,owner_name:u.ownerName,business_email:u.email,business_phone:u.phone,business_type:u.businessType,description:u.description,categories:u.categories,established_year:u.establishedYear,gst_number:u.gstNumber,pan_number:u.panNumber,business_address:u.address,city:u.city,state:u.state,pincode:u.pincode,landmark:u.landmark,delivery_radius:parseFloat(u.deliveryRadius),min_order_amount:parseFloat(u.minOrderAmount),delivery_fee:parseFloat(u.deliveryFee),free_delivery_above:parseFloat(u.freeDeliveryAbove),estimated_delivery_time:u.estimatedDeliveryTime,is_active:u.isOpen,monday_open:u.openingHours.monday.open,monday_close:u.openingHours.monday.close,monday_closed:u.openingHours.monday.closed,tuesday_open:u.openingHours.tuesday.open,tuesday_close:u.openingHours.tuesday.close,tuesday_closed:u.openingHours.tuesday.closed,wednesday_open:u.openingHours.wednesday.open,wednesday_close:u.openingHours.wednesday.close,wednesday_closed:u.openingHours.wednesday.closed,thursday_open:u.openingHours.thursday.open,thursday_close:u.openingHours.thursday.close,thursday_closed:u.openingHours.thursday.closed,friday_open:u.openingHours.friday.open,friday_close:u.openingHours.friday.close,friday_closed:u.openingHours.friday.closed,saturday_open:u.openingHours.saturday.open,saturday_close:u.openingHours.saturday.close,saturday_closed:u.openingHours.saturday.closed,sunday_open:u.openingHours.sunday.open,sunday_close:u.openingHours.sunday.close,sunday_closed:u.openingHours.sunday.closed,bank_name:u.bankName,account_number:u.accountNumber,ifsc_code:u.ifscCode,account_holder_name:u.accountHolderName,upi_id:u.upiId,auto_accept_orders:u.autoAcceptOrders},{response:M}=await Be("/vendor-profiles/",{method:i?"POST":"PUT",body:JSON.stringify(E)});if(M.ok)r(!1),a(!1),alert("Profile saved successfully!");else throw new Error("Failed to save profile")}catch(k){console.error("Error saving profile:",k),alert("Failed to save profile. Please try again.")}},C=async(k,E)=>{if(!k)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(k.type)){alert("Please upload only PDF, JPG, JPEG, or PNG files.");return}if(k.size>5*1024*1024){alert("File size must be less than 5MB.");return}c(E);try{const P=new FormData;P.append(E,k);const T=localStorage.getItem("token"),{response:A}=await Be("/vendor-profiles/",{method:"PATCH",body:P});if(!A.ok)throw new Error("Upload failed");const z=data,O=z[`${E}_url`]||z[E];x(E,O),alert("Document uploaded successfully!")}catch(P){console.error("Upload error:",P),alert("Failed to upload document. Please try again.")}finally{c(null)}},I=[{id:"basic",label:"Basic Info",icon:Lr},{id:"business",label:"Business",icon:ms},{id:"location",label:"Location",icon:Kt},{id:"operations",label:"Operations",icon:At},{id:"timing",label:"Timing",icon:or},{id:"banking",label:"Banking",icon:to},{id:"documents",label:"Documents",icon:Rr},{id:"settings",label:"Settings",icon:yi}];return d?n.jsx(qt,{title:"Profile Management",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):m?n.jsx(qt,{title:"Profile Management",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:m}),n.jsx(ne,{onClick:_,children:"Retry"})]})})}):n.jsx(qt,{title:"Profile Management",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"font-semibold text-lg",children:"Profile Management"}),i&&n.jsx("p",{className:"text-sm text-gray-600",children:"Complete your profile setup"})]})]}),n.jsx(ne,{onClick:()=>s?N():r(!0),className:"bg-green-600 hover:bg-green-700",children:s?n.jsxs(n.Fragment,{children:[n.jsx(Mc,{className:"h-4 w-4 mr-2"}),"Save"]}):n.jsxs(n.Fragment,{children:[n.jsx(Xu,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),n.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl",children:u.avatar}),s&&n.jsx(ne,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full p-0",children:n.jsx(Zi,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-semibold text-lg",children:u.businessName}),n.jsx("p",{className:"text-gray-600 text-sm",children:u.ownerName}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(Ie,{variant:u.isOpen?"default":"destructive",className:"text-xs",children:u.isOpen?"Open":"Closed"}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[n.jsx(dn,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),n.jsx("span",{children:"4.8 (342 reviews)"})]})]})]})]})}),n.jsx("div",{className:"bg-white",children:n.jsxs(Si,{value:e,onValueChange:t,className:"w-full",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsx(qr,{className:"grid grid-cols-4 lg:grid-cols-8 w-full min-w-max",children:I.map(k=>n.jsxs(Ct,{value:k.id,className:"flex items-center gap-2 text-xs",children:[n.jsx(k.icon,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:k.label})]},k.id))})}),n.jsx(dt,{value:"basic",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"businessName",children:"Business Name *"}),n.jsx(ve,{id:"businessName",value:u.businessName,onChange:k=>x("businessName",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"ownerName",children:"Owner Name *"}),n.jsx(ve,{id:"ownerName",value:u.ownerName,onChange:k=>x("ownerName",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"email",children:"Email *"}),n.jsx(ve,{id:"email",type:"email",value:u.email,onChange:k=>x("email",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"phone",children:"Phone Number *"}),n.jsx(ve,{id:"phone",value:u.phone,onChange:k=>x("phone",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"whatsapp",children:"WhatsApp Number"}),n.jsx(ve,{id:"whatsapp",value:u.whatsapp,onChange:k=>x("whatsapp",k.target.value),disabled:!s})]})]})}),n.jsxs(dt,{value:"business",className:"p-4 space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"businessType",children:"Business Type *"}),n.jsxs(Vt,{value:u.businessType,onValueChange:k=>x("businessType",k),disabled:!s,children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsx(zt,{children:y.map(k=>n.jsx(qe,{value:k.value,children:k.label},k.value))})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"establishedYear",children:"Established Year"}),n.jsx(ve,{id:"establishedYear",value:u.establishedYear,onChange:k=>x("establishedYear",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"gstNumber",children:"GST Number"}),n.jsx(ve,{id:"gstNumber",value:u.gstNumber,onChange:k=>x("gstNumber",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"panNumber",children:"PAN Number"}),n.jsx(ve,{id:"panNumber",value:u.panNumber,onChange:k=>x("panNumber",k.target.value),disabled:!s})]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"description",children:"Business Description *"}),n.jsx(Yn,{id:"description",value:u.description,onChange:k=>x("description",k.target.value),disabled:!s,rows:3})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Categories"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:v.map(k=>n.jsx(Ie,{variant:u.categories.includes(k)?"default":"outline",className:"cursor-pointer",onClick:()=>{if(!s)return;const E=u.categories.includes(k)?u.categories.filter(M=>M!==k):[...u.categories,k];x("categories",E)},children:k},k))})]})]}),n.jsx(dt,{value:"location",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(ue,{htmlFor:"address",children:"Full Address *"}),n.jsx(Yn,{id:"address",value:u.address,onChange:k=>x("address",k.target.value),disabled:!s,rows:2})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"city",children:"City *"}),n.jsx(ve,{id:"city",value:u.city,onChange:k=>x("city",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"state",children:"State *"}),n.jsx(ve,{id:"state",value:u.state,onChange:k=>x("state",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"pincode",children:"Pincode *"}),n.jsx(ve,{id:"pincode",value:u.pincode,onChange:k=>x("pincode",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"landmark",children:"Landmark"}),n.jsx(ve,{id:"landmark",value:u.landmark,onChange:k=>x("landmark",k.target.value),disabled:!s})]})]})}),n.jsx(dt,{value:"operations",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"deliveryRadius",children:"Delivery Radius (km) *"}),n.jsx(ve,{id:"deliveryRadius",value:u.deliveryRadius,onChange:k=>x("deliveryRadius",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"minOrderAmount",children:"Minimum Order Amount (₹) *"}),n.jsx(ve,{id:"minOrderAmount",value:u.minOrderAmount,onChange:k=>x("minOrderAmount",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"deliveryFee",children:"Delivery Fee (₹) *"}),n.jsx(ve,{id:"deliveryFee",value:u.deliveryFee,onChange:k=>x("deliveryFee",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"freeDeliveryAbove",children:"Free Delivery Above (₹)"}),n.jsx(ve,{id:"freeDeliveryAbove",value:u.freeDeliveryAbove,onChange:k=>x("freeDeliveryAbove",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"estimatedDeliveryTime",children:"Estimated Delivery Time (mins) *"}),n.jsx(ve,{id:"estimatedDeliveryTime",value:u.estimatedDeliveryTime,onChange:k=>x("estimatedDeliveryTime",k.target.value),disabled:!s})]})]})}),n.jsxs(dt,{value:"timing",className:"p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(ue,{children:"Store Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm",children:"Closed"}),n.jsx(Zt,{checked:u.isOpen,onCheckedChange:k=>x("isOpen",k),disabled:!s}),n.jsx("span",{className:"text-sm",children:"Open"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(ue,{children:"Opening Hours"}),w.map(k=>n.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg",children:[n.jsx("div",{className:"w-20 text-sm font-medium capitalize",children:k}),n.jsx(Zt,{checked:!u.openingHours[k].closed,onCheckedChange:E=>b("openingHours",k,{...u.openingHours[k],closed:!E}),disabled:!s}),!u.openingHours[k].closed&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ve,{type:"time",value:u.openingHours[k].open,onChange:E=>b("openingHours",k,{...u.openingHours[k],open:E.target.value}),disabled:!s,className:"w-32"}),n.jsx("span",{className:"text-sm",children:"to"}),n.jsx(ve,{type:"time",value:u.openingHours[k].close,onChange:E=>b("openingHours",k,{...u.openingHours[k],close:E.target.value}),disabled:!s,className:"w-32"})]}),u.openingHours[k].closed&&n.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},k))]})]}),n.jsx(dt,{value:"banking",className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"bankName",children:"Bank Name *"}),n.jsx(ve,{id:"bankName",value:u.bankName,onChange:k=>x("bankName",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"accountHolderName",children:"Account Holder Name *"}),n.jsx(ve,{id:"accountHolderName",value:u.accountHolderName,onChange:k=>x("accountHolderName",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"accountNumber",children:"Account Number *"}),n.jsx(ve,{id:"accountNumber",value:u.accountNumber,onChange:k=>x("accountNumber",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"ifscCode",children:"IFSC Code *"}),n.jsx(ve,{id:"ifscCode",value:u.ifscCode,onChange:k=>x("ifscCode",k.target.value),disabled:!s})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"upiId",children:"UPI ID"}),n.jsx(ve,{id:"upiId",value:u.upiId,onChange:k=>x("upiId",k.target.value),disabled:!s})]})]})}),n.jsx(dt,{value:"documents",className:"p-4 space-y-4",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-base font-medium",children:"Business License"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upload your business registration certificate"})]}),n.jsx(Ie,{variant:u.businessLicense?"default":"outline",children:u.businessLicense?"Uploaded":"Required"})]}),u.businessLicense?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"Business License Document"}),s&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{const k=document.createElement("input");k.type="file",k.accept=".pdf,.jpg,.jpeg,.png",k.onchange=E=>{var P;const M=(P=E.target.files)==null?void 0:P[0];M&&C(M,"business_license_file")},k.click()},disabled:o==="business_license_file",children:o==="business_license_file"?"Uploading...":"Replace"})]}):n.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>{const k=document.createElement("input");k.type="file",k.accept=".pdf,.jpg,.jpeg,.png",k.onchange=E=>{var P;const M=(P=E.target.files)==null?void 0:P[0];M&&C(M,"business_license_file")},k.click()},disabled:o==="business_license_file",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),o==="business_license_file"?"Uploading...":"Upload Business License"]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-base font-medium",children:"GST Certificate"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upload your GST registration certificate"})]}),n.jsx(Ie,{variant:u.gstCertificate?"default":"outline",children:u.gstCertificate?"Uploaded":"Optional"})]}),u.gstCertificate?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"GST Certificate Document"}),s&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{const k=document.createElement("input");k.type="file",k.accept=".pdf,.jpg,.jpeg,.png",k.onchange=E=>{var P;const M=(P=E.target.files)==null?void 0:P[0];M&&C(M,"gst_certificate")},k.click()},disabled:o==="gst_certificate",children:o==="gst_certificate"?"Uploading...":"Replace"})]}):n.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>{const k=document.createElement("input");k.type="file",k.accept=".pdf,.jpg,.jpeg,.png",k.onchange=E=>{var P;const M=(P=E.target.files)==null?void 0:P[0];M&&C(M,"gst_certificate")},k.click()},disabled:o==="gst_certificate",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),o==="gst_certificate"?"Uploading...":"Upload GST Certificate"]})]}),n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-base font-medium",children:"FSSAI License"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Upload your food safety license (for food businesses)"})]}),n.jsx(Ie,{variant:u.fssaiLicense?"default":"outline",children:u.fssaiLicense?"Uploaded":"Optional"})]}),u.fssaiLicense?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"FSSAI License Document"}),s&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{const k=document.createElement("input");k.type="file",k.accept=".pdf,.jpg,.jpeg,.png",k.onchange=E=>{var P;const M=(P=E.target.files)==null?void 0:P[0];M&&C(M,"fssai_license")},k.click()},disabled:o==="fssai_license",children:o==="fssai_license"?"Uploading...":"Replace"})]}):n.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>{const k=document.createElement("input");k.type="file",k.accept=".pdf,.jpg,.jpeg,.png",k.onchange=E=>{var P;const M=(P=E.target.files)==null?void 0:P[0];M&&C(M,"fssai_license")},k.click()},disabled:o==="fssai_license",children:[n.jsx(Rr,{className:"h-4 w-4 mr-2"}),o==="fssai_license"?"Uploading...":"Upload FSSAI License"]})]}),n.jsx("div",{className:"text-center py-2 text-gray-500 text-xs",children:"Supported formats: PDF, JPG, JPEG, PNG (Max 5MB)"})]})}),n.jsx(dt,{value:"settings",className:"p-4 space-y-4",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Auto Accept Orders"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Automatically accept new orders"})]}),n.jsx(Zt,{checked:u.autoAcceptOrders,onCheckedChange:k=>x("autoAcceptOrders",k),disabled:!s})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(ue,{children:"Notification Settings"}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Order Alerts"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Get notified for new orders"})]}),n.jsx(Zt,{checked:u.notificationSettings.orderAlerts,onCheckedChange:k=>b("notificationSettings","orderAlerts",k),disabled:!s})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Message Alerts"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Get notified for new messages"})]}),n.jsx(Zt,{checked:u.notificationSettings.messageAlerts,onCheckedChange:k=>b("notificationSettings","messageAlerts",k),disabled:!s})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Promotional Emails"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Receive promotional emails"})]}),n.jsx(Zt,{checked:u.notificationSettings.promotionalEmails,onCheckedChange:k=>b("notificationSettings","promotionalEmails",k),disabled:!s})]})]})]})})]})}),i&&n.jsxs("div",{className:"fixed bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-lg p-4 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"text-sm font-medium",children:"Profile Completion"}),n.jsx("span",{className:"text-sm text-gray-600",children:"6/8 sections"})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"75%"}})}),n.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Complete all sections to activate your store"})]})]})})},tse=()=>{const e=st(),[t,s]=j.useState(!0),[r,i]=j.useState(""),[a,o]=j.useState(!1),[c,d]=j.useState(""),[f,m]=j.useState(!1);j.useEffect(()=>{(async()=>{var p;try{if(!await Re.isAuthenticated())return;const v=1,{response:w,data:x}=await Be(`/vendor-profiles/${v}/`);if(!w.ok)throw new Error("Failed to fetch profile");const b=((p=x==null?void 0:x.user_info)==null?void 0:p.plain_password)||"";i(b)}catch(y){console.error(y)}})()},[]);const h=async()=>{if(!c){bf.error("New password is required");return}m(!0);try{const{simplePersistentAuth:u}=await Xe(async()=>{const{simplePersistentAuth:x}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:x}},[]);if(!await u.isVendorLoggedIn()){e("/vendor/login");return}const y=await u.getVendorAuth();y&&await Re.setAuth(y.token,y.user);const{response:v,data:w}=await Be("/change-password/simple/",{method:"POST",body:JSON.stringify({new_password:c})});if(!v.ok)throw new Error(w.error||"Failed to change password");await Re.setAuth(w.token,await Re.getUser()),bf.success("Password changed successfully"),i(c),d(""),o(!1)}catch(u){bf.error(u instanceof Error?u.message:"Failed to change password")}finally{m(!1)}};return n.jsx(qt,{title:"Security & Login",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center gap-3 p-4",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("h1",{className:"font-semibold text-lg",children:"Security & Login"})]})}),n.jsx("div",{className:"p-4 space-y-6",children:n.jsxs("div",{className:"bg-white rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(yi,{className:"h-5 w-5 text-blue-600"}),n.jsx("h2",{className:"font-semibold",children:"Password"})]}),a?n.jsxs("div",{className:"space-y-4",children:[n.jsx(ue,{children:"New Password"}),n.jsx(ve,{type:"text",value:c,onChange:u=>d(u.target.value)}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{onClick:h,disabled:f,children:"Save"}),n.jsx(ne,{variant:"outline",onClick:()=>o(!1),disabled:f,children:"Cancel"})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(ue,{children:"Your Password"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(ve,{type:"text",value:r,disabled:!0,className:"bg-gray-100"}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>s(!t),children:t?n.jsx(tb,{className:"h-4 w-4"}):n.jsx(Nn,{className:"h-4 w-4"})})]}),n.jsx(ne,{onClick:()=>o(!0),disabled:f,children:"Change Password"})]})]})})]})})},nse=()=>{const e=st(),{toast:t}=hn(),[s,r]=j.useState("business"),[i,a]=j.useState(!1),[o,c]=j.useState(!0),[d,f]=j.useState(!1),[m,h]=j.useState(""),[u,p]=j.useState(null),[y,v]=j.useState([]),[w,x]=j.useState({businessName:"Business Name",ownerName:"Owner Name",categories:[],operatingHours:{monday:{open:"06:00",close:"21:00",closed:!1},tuesday:{open:"06:00",close:"21:00",closed:!1},wednesday:{open:"06:00",close:"21:00",closed:!1},thursday:{open:"06:00",close:"21:00",closed:!1},friday:{open:"06:00",close:"21:00",closed:!1},saturday:{open:"06:00",close:"21:00",closed:!1},sunday:{open:"07:00",close:"20:00",closed:!1}},deliverySettings:{deliveryRadius:"5",minOrderAmount:"200"},profileImage:null,isActive:!1,statusOverride:!1}),b=T=>{if(!T)return"";const[A,z]=T.split(":").map(Number),O=A>=12?"PM":"AM";return`${A%12||12}:${z.toString().padStart(2,"0")} ${O}`};j.useEffect(()=>{N(),_()},[]);const _=async()=>{try{const{response:T,data:A}=await Be("/categories/");T.ok&&A.categories&&v(A.categories.map(z=>z.name))}catch(T){console.error("Failed to fetch categories:",T)}},N=async()=>{var T,A,z;try{const{simplePersistentAuth:O}=await Xe(async()=>{const{simplePersistentAuth:U}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:U}},[]);if(!await O.isVendorLoggedIn()){e("/vendor/login");return}const G=await O.getVendorAuth();G&&await Re.setAuth(G.token,G.user);const{response:Y,data:K}=await Be("/vendor-profiles/");if(!Y.ok)throw new Error("Failed to fetch company data");if(K.results&&K.results.length>0){const U=K.results[0];p(U.id),x({businessName:U.business_name||"Business Name",ownerName:U.owner_name||"Owner Name",categories:Array.isArray(U.categories)?U.categories:typeof U.categories=="string"?JSON.parse(U.categories||"[]"):[],operatingHours:{monday:{open:U.monday_open||"",close:U.monday_close||"",closed:U.monday_closed||!1},tuesday:{open:U.tuesday_open||"",close:U.tuesday_close||"",closed:U.tuesday_closed||!1},wednesday:{open:U.wednesday_open||"",close:U.wednesday_close||"",closed:U.wednesday_closed||!1},thursday:{open:U.thursday_open||"",close:U.thursday_close||"",closed:U.thursday_closed||!1},friday:{open:U.friday_open||"",close:U.friday_close||"",closed:U.friday_closed||!1},saturday:{open:U.saturday_open||"",close:U.saturday_close||"",closed:U.saturday_closed||!1},sunday:{open:U.sunday_open||"",close:U.sunday_close||"",closed:U.sunday_closed||!1}},deliverySettings:{deliveryRadius:((T=U.delivery_radius)==null?void 0:T.toString())||"5",minOrderAmount:((A=U.min_order_amount)==null?void 0:A.toString())||"200"},profileImage:((z=U.user_info)==null?void 0:z.profile_picture)||null,isActive:U.is_active||!1,statusOverride:U.status_override||!1})}}catch(O){console.error("Error fetching company data:",O),h("Failed to load company data")}finally{c(!1)}},C=async()=>{try{f(!0);const{simplePersistentAuth:T}=await Xe(async()=>{const{simplePersistentAuth:F}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:F}},[]);if(!await T.isVendorLoggedIn()){e("/vendor/login");return}if(!u)throw new Error("Profile ID not found");const z=new FormData;z.append("business_name",w.businessName),z.append("owner_name",w.ownerName),z.append("categories",JSON.stringify(w.categories)),z.append("delivery_radius",w.deliverySettings.deliveryRadius),z.append("min_order_amount",w.deliverySettings.minOrderAmount);const{response:O}=await Be(`/vendor-profiles/${u}/`,{method:"PUT",body:z});if(!O.ok){const F=await O.json();throw new Error(F.detail||"Failed to update company data")}t({title:"Success",description:"Company information updated successfully!"}),a(!1),N()}catch(T){console.error("Error saving company data:",T),t({title:"Error",description:T instanceof Error?T.message:"Failed to save company data",variant:"destructive"})}finally{f(!1)}},I=async()=>{try{const{simplePersistentAuth:T}=await Xe(async()=>{const{simplePersistentAuth:G}=await import("./simplePersistentAuth-Di-MScL9.js");return{simplePersistentAuth:G}},[]);if(!await T.isVendorLoggedIn()){e("/vendor/login");return}if(!u)throw new Error("Profile ID not found");const z=!w.isActive,{response:O,data:F}=await Be(`/vendor-profiles/${u}/toggle-status/`,{method:"POST",body:JSON.stringify({is_active:z})});if(!O.ok)throw new Error((F==null?void 0:F.error)||"Failed to toggle status");x(G=>({...G,isActive:F.vendor.is_active,statusOverride:F.vendor.status_override})),t({title:"Success",description:`Status set to ${z?"Active":"Inactive"}`})}catch(T){console.error("Error toggling status:",T),t({title:"Error",description:T instanceof Error?T.message:"Failed to toggle status",variant:"destructive"})}},k=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],E=[{id:"business",label:"Business Details",icon:ms},{id:"timing",label:"Timing",icon:or}],M=(T,A)=>{x(z=>({...z,[T]:A}))},P=(T,A,z)=>{x(O=>({...O,[T]:{...O[T],[A]:z}}))};return o?n.jsx(qt,{title:"Company Information",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading company information..."})]})})}):m?n.jsx(qt,{title:"Company Information",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-600 mb-4",children:m}),n.jsx(ne,{onClick:N,children:"Retry"})]})})}):n.jsx(qt,{title:"Company Information",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsx("div",{children:n.jsx("h1",{className:"font-semibold text-lg",children:"Company Information"})})]}),n.jsx(ne,{onClick:()=>i?C():a(!0),disabled:d,className:"bg-green-600 hover:bg-green-700",children:d?"Saving...":i?"Save Changes":"Edit"})]})}),n.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"relative",children:w.profileImage?n.jsx("img",{src:w.profileImage||"/images/default-profile.png",alt:"Business Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200",onError:T=>{console.error("Image failed to load:",T.currentTarget.src),T.currentTarget.src="/images/default-profile.png"}}):n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl border-2 border-gray-200",children:"🏪"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h2",{className:"font-semibold text-lg",children:w.businessName}),n.jsx("p",{className:"text-gray-600 text-sm",children:w.ownerName}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(ue,{children:"Status:"}),n.jsx(Zt,{checked:w.isActive,onCheckedChange:I,disabled:!i}),n.jsxs("span",{className:"text-sm",children:[w.isActive?"Active":"Inactive",w.statusOverride&&" (Overridden)"]})]})]})]})}),n.jsx("div",{className:"bg-white",children:n.jsxs(Si,{value:s,onValueChange:r,className:"w-full",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsx(qr,{className:"grid grid-cols-2 w-full min-w-max",children:E.map(T=>n.jsxs(Ct,{value:T.id,className:"flex items-center gap-2 text-xs",children:[n.jsx(T.icon,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:T.label})]},T.id))})}),n.jsxs(dt,{value:"business",className:"p-4 space-y-6",children:[n.jsxs("div",{className:"space-y-4 max-w-3xl",children:[n.jsx(ue,{children:"Business Categories"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:y.map(T=>n.jsx(Ie,{variant:w.categories.includes(T)?"default":"outline",className:"cursor-pointer",onClick:()=>{if(!i)return;const A=w.categories.includes(T)?w.categories.filter(z=>z!==T):[...w.categories,T];M("categories",A)},children:T},T))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Delivery Radius (km) *"}),n.jsx(ve,{value:w.deliverySettings.deliveryRadius,onChange:T=>P("deliverySettings","deliveryRadius",T.target.value),disabled:!i,className:"max-w-xs"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Minimum Order Amount (₹) *"}),n.jsx(ve,{value:w.deliverySettings.minOrderAmount,onChange:T=>P("deliverySettings","minOrderAmount",T.target.value),disabled:!i,className:"max-w-xs"})]})]})]}),n.jsx(dt,{value:"timing",className:"p-4 space-y-4",children:n.jsxs("div",{className:"space-y-3 max-w-3xl",children:[n.jsx(ue,{children:"Operating Hours"}),k.map(T=>n.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg flex-wrap",children:[n.jsx("div",{className:"w-20 text-sm font-medium capitalize",children:T}),n.jsx(Zt,{checked:!w.operatingHours[T].closed,onCheckedChange:A=>P("operatingHours",T,{...w.operatingHours[T],closed:!A}),disabled:!i}),!w.operatingHours[T].closed&&n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(ve,{type:"time",value:b(w.operatingHours[T].open),onChange:A=>P("operatingHours",T,{...w.operatingHours[T],open:A.target.value}),disabled:!i,className:"w-32"}),n.jsx("span",{className:"text-sm",children:"to"}),n.jsx(ve,{type:"time",value:b(w.operatingHours[T].close),onChange:A=>P("operatingHours",T,{...w.operatingHours[T],close:A.target.value}),disabled:!i,className:"w-32"})]}),w.operatingHours[T].closed&&n.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},T))]})})]})})]})})},sse=()=>{const[e,t]=j.useState(""),[s,r]=j.useState(!1),[i,a]=j.useState(null),[o,c]=j.useState([]),[d,f]=j.useState(!0),[m,h]=j.useState(!1),[u,p]=j.useState({}),[y,v]=j.useState([]),[w,x]=j.useState([]),[b,_]=j.useState([]),[N,C]=j.useState([]),[I,k]=j.useState(!1),[E,M]=j.useState(!1),[P,T]=j.useState(null),[A,z]=j.useState([]),[O,F]=j.useState(null),[G,Y]=j.useState(new Date().toISOString().split("T")[0]),[K,U]=j.useState(!1),[B,R]=j.useState(!1),$=st(),[W,Z]=j.useState({category:"all",status:"all",stock:"all",sortBy:"name"});j.useEffect(()=>{se(),X()},[]);const X=async()=>{var re;try{const{apiRequest:Ce}=await Xe(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Gn);return{apiRequest:lt}},void 0),{data:Te}=await Ce("/categories/");_(((re=Te.categories)==null?void 0:re.map(lt=>lt.name))||[])}catch(Ce){console.error("Failed to fetch categories:",Ce)}},V=async re=>{try{const{apiRequest:Ce}=await Xe(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Gn);return{apiRequest:lt}},void 0),{data:Te}=await Ce(`/categories/${re}/subcategories/`);C(Te.subcategories||[])}catch(Ce){console.error("Failed to fetch subcategories:",Ce),C([])}},H=async()=>{try{const{apiRequest:re}=await Xe(async()=>{const{apiRequest:Te}=await Promise.resolve().then(()=>Gn);return{apiRequest:Te}},void 0),{data:Ce}=await re("/featured-packages/");z(Ce.packages||[])}catch(re){console.error("Failed to fetch featured packages:",re),z([])}},se=async()=>{try{f(!0);const re=await yl.getProducts(),Ce=(re==null?void 0:re.results)||re||[];c(Array.isArray(Ce)?Ce:[])}catch(re){console.error("Failed to fetch products:",re),c([])}finally{f(!1)}},Q=async(re,Ce)=>{try{await yl.updateProduct(re,Ce),await se()}catch(Te){console.error("Failed to update product:",Te)}},ie=async re=>{if(window.confirm("Are you sure you want to delete this product?"))try{await yl.deleteProduct(re),await se(),a(null)}catch(Ce){console.error("Failed to delete product:",Ce)}},he=async re=>{if(re.featured)try{const{apiRequest:Ce}=await Xe(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Gn);return{apiRequest:lt}},void 0),{data:Te}=await Ce(`/products/${re.id}/featured-info/`);if(!Te.can_modify){Wn.error("Cannot Cancel Featured",{description:"Featured period has already started and cannot be cancelled.",duration:4e3});return}T(re),M(!0)}catch(Ce){console.error("Failed to check featured info:",Ce)}else T(re),await H(),k(!0)},te=re=>{F(re)},ge=async()=>{if(P)try{R(!0);const{apiRequest:re}=await Xe(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Gn);return{apiRequest:lt}},void 0),{response:Ce,data:Te}=await re(`/products/${P.id}/reschedule-featured/`,{method:"POST",body:JSON.stringify({start_date:G})});if(!Ce.ok)throw new Error(Te.error||"Failed to reschedule");await se(),M(!1),T(null),Y(new Date().toISOString().split("T")[0]),Wn.success("Featured Package Rescheduled!",{description:`Start date updated to ${new Date(G).toLocaleDateString()}`,duration:4e3})}catch(re){console.error("Failed to reschedule featured package:",re),Wn.error("Reschedule Failed",{description:re.message||"Failed to reschedule package",duration:4e3})}finally{R(!1)}},Se=async()=>{if(!(!P||!O))try{U(!0);const{apiRequest:re}=await Xe(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Gn);return{apiRequest:lt}},void 0),{response:Ce,data:Te}=await re("/featured-packages/purchase/",{method:"POST",body:JSON.stringify({product_id:P.id,package_id:O.id,start_date:G})});if(!Ce.ok)throw new Error(Te.error||"Failed to purchase package");await se(),k(!1),T(null),F(null),Y(new Date().toISOString().split("T")[0]),Wn.success("Featured Package Purchased!",{description:`${P.name} is now featured until ${new Date(Te.end_date).toLocaleDateString()}. Wallet balance: ₹${Te.new_wallet_balance}`,duration:5e3})}catch(re){console.error("Failed to purchase featured package:",re),Wn.error("Purchase Failed",{description:re.message||"Failed to purchase package",duration:4e3})}finally{U(!1)}},fe=async()=>{if(i!=null&&i.id&&u)try{const re={...u};y.length>0&&(re.image_files=y),await Q(i.id,re),h(!1),p({}),v([]),x([]),a(null)}catch(re){console.error("Failed to save changes:",re)}},ke=re=>{const Ce=re.target.files;if(Ce){const Te=Array.from(Ce),lt=Te.map(it=>URL.createObjectURL(it));v(it=>[...it,...Te]),x(it=>[...it,...lt])}},xe=re=>{URL.revokeObjectURL(w[re]),v(Ce=>Ce.filter((Te,lt)=>lt!==re)),x(Ce=>Ce.filter((Te,lt)=>lt!==re))},de=async re=>{if(i!=null&&i.id)try{const{apiRequest:Ce}=await Xe(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Gn);return{apiRequest:lt}},void 0);await Ce(`/products/${i.id}/images/${re}/`,{method:"DELETE"}),await se();const Te=await yl.getProduct(i.id);a(Te)}catch(Ce){console.error("Failed to delete image:",Ce)}},me=async re=>{if(i!=null&&i.id)try{const{apiRequest:Ce}=await Xe(async()=>{const{apiRequest:lt}=await Promise.resolve().then(()=>Gn);return{apiRequest:lt}},void 0);await Ce(`/products/${i.id}/images/${re}/set-primary/`,{method:"POST"}),await se();const Te=await yl.getProduct(i.id);a(Te)}catch(Ce){console.error("Failed to set primary image:",Ce)}},ee=Array.isArray(o)?o.filter(re=>{const Ce=re.name.toLowerCase().includes(e.toLowerCase())||re.sku&&re.sku.toLowerCase().includes(e.toLowerCase()),Te=W.category==="all"||re.category===W.category,lt=W.status==="all"||re.status===W.status,it=W.stock==="all"||W.stock==="low"&&re.quantity<=5&&re.quantity>0||W.stock==="out"&&re.quantity===0||W.stock==="available"&&re.quantity>0;return Ce&&Te&&lt&&it}).sort((re,Ce)=>{switch(W.sortBy){case"price":return Ce.price-re.price;case"stock":return Ce.quantity-re.quantity;default:return re.name.localeCompare(Ce.name)}}):[],ae=re=>{switch(re){case"active":return n.jsx("span",{className:"text-xs font-medium text-green-600",children:"Active"});case"draft":return n.jsx("span",{className:"text-xs font-medium text-yellow-600",children:"Draft"});case"archived":return n.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Archived"});default:return n.jsx("span",{className:"text-xs font-medium text-gray-600",children:re})}},oe=re=>re===0?n.jsx("span",{className:"text-xs font-medium text-red-600",children:"Out of Stock"}):re<=5?n.jsx("span",{className:"text-xs font-medium text-orange-600",children:"Low Stock"}):n.jsx("span",{className:"text-xs font-medium text-green-600",children:"In Stock"}),be=re=>{if(!re)return"";const Ce=document.createElement("div");return Ce.innerHTML=re,Ce.textContent||Ce.innerText||""},je=re=>re.images&&re.images.length>0?(re.images.find(Te=>Te.is_primary)||re.images[0]).image_url:null,we=re=>({Vegetables:"🥬",Fruits:"🍎",Dairy:"🥛",Meat:"🍗",Bakery:"🍞",Beverages:"🥤",Snacks:"🍿",Grains:"🌾"})[re]||"📦";return n.jsx(qt,{title:"Product Management",children:n.jsxs("div",{className:"p-3 space-y-3",children:[n.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[n.jsx(Ee,{className:"",children:n.jsx(Ae,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx(At,{className:"h-4 w-4 mx-auto mb-0.5 text-blue-500"}),n.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.length)||0}),n.jsx("p",{className:"text-[10px] text-gray-600",children:"Total"})]})})}),n.jsx(Ee,{className:"",children:n.jsx(Ae,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Br,{className:"h-4 w-4 mx-auto mb-0.5 text-green-500"}),n.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(re=>re.status==="active").length)||0}),n.jsx("p",{className:"text-[10px] text-gray-600",children:"Active"})]})})}),n.jsx(Ee,{className:"",children:n.jsx(Ae,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ju,{className:"h-4 w-4 mx-auto mb-0.5 text-orange-500"}),n.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(re=>re.quantity<=5&&re.quantity>0).length)||0}),n.jsx("p",{className:"text-[10px] text-gray-600",children:"Low"})]})})}),n.jsx(Ee,{className:"",children:n.jsx(Ae,{className:"p-1.5",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ju,{className:"h-4 w-4 mx-auto mb-0.5 text-red-500"}),n.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(re=>re.quantity===0).length)||0}),n.jsx("p",{className:"text-[10px] text-gray-600",children:"Out"})]})})})]}),n.jsx(Ee,{children:n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(ve,{placeholder:"Search products...",value:e,onChange:re=>t(re.target.value),className:"pl-10"})]}),n.jsx(ne,{variant:"outline",size:"icon",onClick:()=>r(!0),children:n.jsx(ji,{className:"h-4 w-4"})})]})})}),n.jsx("div",{children:d?n.jsxs("div",{className:"flex justify-center items-center py-8",children:[n.jsx(Vn,{className:"h-6 w-6 animate-spin"}),n.jsx("span",{className:"ml-2",children:"Loading products..."})]}):ee.length>0?n.jsx("div",{className:"grid grid-cols-2 gap-2",children:ee.map(re=>n.jsx(Ee,{className:"overflow-hidden",children:n.jsx(Ae,{className:"p-2",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"text-center relative",children:[je(re)?n.jsx("img",{src:je(re),alt:re.name,className:"w-12 h-12 mx-auto object-cover rounded"}):n.jsx("div",{className:"text-xl",children:we(re.category)}),re.featured&&n.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white text-xs px-1 py-0.5 rounded-full font-bold shadow-md",children:"FEATURED"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:re.name}),n.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["₹",re.price]}),re.cost_price&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Cost: ₹",re.cost_price]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("span",{className:"text-xs text-gray-600",children:["Stock: ",re.quantity]}),oe(re.quantity)]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-gray-600",children:re.category}),ae(re.status)]}),re.subcategory&&n.jsx("div",{className:"text-xs text-gray-500 truncate",children:re.subcategory}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Sold: ",re.total_sold||0]}),n.jsxs("div",{className:"flex gap-1 mt-1",children:[re.featured&&n.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1 rounded",children:"★"}),re.free_delivery&&n.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1 rounded",children:"🚚"})]})]}),n.jsxs("div",{className:"flex gap-1 pt-1",children:[n.jsx(ne,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>{a(re),h(!1),p({})},children:n.jsx(Nn,{className:"h-3 w-3"})}),n.jsx(ne,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>{a(re),h(!0),p(re),re.category&&V(re.category)},children:n.jsx(Jf,{className:"h-3 w-3"})}),n.jsx(ne,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>ie(re.id),children:n.jsx(Ua,{className:"h-3 w-3"})})]}),n.jsxs(ne,{variant:re.featured?"default":"outline",size:"sm",className:"w-full mt-1 p-1",onClick:()=>he(re),children:[n.jsx(dn,{className:`h-3 w-3 mr-1 ${re.featured?"fill-current":""}`}),re.featured?"Reschedule":"Mark Featured"]})]})})},re.id))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(At,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No products found"}),n.jsxs(ne,{className:"mt-4",onClick:()=>$("/vendor/add-product"),children:[n.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})]})}),n.jsx(Os,{open:s,onOpenChange:r,children:n.jsxs(gs,{side:"bottom",className:"h-[400px]",children:[n.jsx(vs,{children:n.jsx(xs,{children:"Filter Products"})}),n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Category"}),n.jsxs(Vt,{value:W.category,onValueChange:re=>Z({...W,category:re}),children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"all",children:"All Categories"}),Array.from(new Set((o||[]).map(re=>re.category))).map(re=>n.jsx(qe,{value:re,children:re},re))]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Status"}),n.jsxs(Vt,{value:W.status,onValueChange:re=>Z({...W,status:re}),children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"all",children:"All Status"}),n.jsx(qe,{value:"active",children:"Active"}),n.jsx(qe,{value:"draft",children:"Draft"}),n.jsx(qe,{value:"archived",children:"Archived"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Stock Level"}),n.jsxs(Vt,{value:W.stock,onValueChange:re=>Z({...W,stock:re}),children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"all",children:"All Stock Levels"}),n.jsx(qe,{value:"available",children:"In Stock"}),n.jsx(qe,{value:"low",children:"Low Stock"}),n.jsx(qe,{value:"out",children:"Out of Stock"})]})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Sort By"}),n.jsxs(Vt,{value:W.sortBy,onValueChange:re=>Z({...W,sortBy:re}),children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"name",children:"Name"}),n.jsx(qe,{value:"price",children:"Price"}),n.jsx(qe,{value:"stock",children:"Stock"})]})]})]})]})]})}),n.jsx(Os,{open:I,onOpenChange:re=>{k(re),re||(F(null),Y(new Date().toISOString().split("T")[0]))},children:n.jsxs(gs,{side:"bottom",className:"h-[70vh] overflow-y-auto",children:[n.jsx(vs,{children:n.jsx(xs,{children:"Choose Featured Package"})}),n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Select a package to feature your product: ",n.jsx("strong",{children:P==null?void 0:P.name})]}),O?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50",children:[n.jsx("h3",{className:"font-semibold text-blue-900",children:O.name}),n.jsxs("p",{className:"text-sm text-blue-700",children:[O.duration_days," days - ₹",O.amount]})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"start-date",children:"Start Date"}),n.jsx(ve,{id:"start-date",type:"date",value:G,min:new Date().toISOString().split("T")[0],onChange:re=>Y(re.target.value)}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Featured until: ",new Date(new Date(G).getTime()+O.duration_days*24*60*60*1e3).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>F(null),disabled:K,children:"Back"}),n.jsx(ne,{className:"flex-1",onClick:Se,disabled:K,children:K?n.jsxs(n.Fragment,{children:[n.jsx(Vn,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Pay ₹${O.amount}`})]})]}):A.length>0?n.jsx("div",{className:"grid grid-cols-1 gap-3",children:A.map(re=>n.jsxs("div",{className:"border rounded-lg p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:re.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[re.duration_days," days"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-lg font-bold text-green-600",children:["₹",re.amount]}),n.jsx("p",{className:"text-xs text-gray-500 capitalize",children:re.package_type})]})]}),re.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:re.description}),n.jsx(ne,{className:"w-full",onClick:()=>te(re),children:"Select This Package"})]},re.id))}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No featured packages available"})})]})]})}),n.jsx(Os,{open:E,onOpenChange:re=>{M(re),re||Y(new Date().toISOString().split("T")[0])},children:n.jsxs(gs,{side:"bottom",className:"h-[40vh]",children:[n.jsx(vs,{children:n.jsx(xs,{children:"Reschedule Featured Package"})}),n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Update the start date for: ",n.jsx("strong",{children:P==null?void 0:P.name})]}),n.jsxs("div",{children:[n.jsx(ue,{htmlFor:"reschedule-date",children:"New Start Date"}),n.jsx(ve,{id:"reschedule-date",type:"date",value:G,min:new Date().toISOString().split("T")[0],onChange:re=>Y(re.target.value)})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>M(!1),disabled:B,children:"Cancel"}),n.jsx(ne,{className:"flex-1",onClick:ge,disabled:B,children:B?n.jsxs(n.Fragment,{children:[n.jsx(Vn,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):"Update Date"})]})]})]})}),n.jsx(Os,{open:!!i,onOpenChange:()=>{a(null),h(!1),p({}),v([]),x([])},children:n.jsxs(gs,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[n.jsx(vs,{children:n.jsxs(xs,{className:"flex items-center justify-between",children:[n.jsx("span",{children:m?"Edit Product":"Product Details"}),n.jsx("div",{className:"flex gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{h(!1),p({}),v([]),x([])},children:"Cancel"}),n.jsxs(ne,{size:"sm",onClick:fe,children:[n.jsx(Mc,{className:"h-4 w-4 mr-1"}),"Save"]})]}):n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{h(!0),p(i||{})},children:[n.jsx(Jf,{className:"h-4 w-4 mr-1"}),"Edit"]})})]})}),i&&n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Product Images"}),i.images&&i.images.length>0?n.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:i.images.map((re,Ce)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:re.image_url,alt:`Product ${Ce+1}`,className:"w-full h-20 object-cover rounded border",onError:Te=>{var lt;console.log("Image failed to load:",re.image_url),Te.currentTarget.style.display="none",(lt=Te.currentTarget.nextElementSibling)==null||lt.classList.remove("hidden")}}),n.jsx("div",{className:"hidden w-full h-20 bg-gray-100 rounded border flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Zi,{className:"h-6 w-6 mx-auto mb-1 text-gray-400"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),m&&n.jsx("button",{type:"button",onClick:Te=>{Te.preventDefault(),Te.stopPropagation(),de(re.id)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:n.jsx(is,{className:"h-3 w-3"})}),re.is_primary?n.jsx("div",{className:"absolute top-1 left-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Main"}):m?n.jsx("button",{type:"button",onClick:Te=>{Te.preventDefault(),Te.stopPropagation(),me(re.id)},className:"absolute top-1 left-1 bg-gray-500 hover:bg-blue-500 text-white text-xs px-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Set Main"}):null]},`existing-image-${re.id}`))}):n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx(Zi,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm",children:"No images uploaded"})]}),w.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"New Images:"}),n.jsx("div",{className:"grid grid-cols-3 gap-2",children:w.map((re,Ce)=>n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:re,alt:`New ${Ce+1}`,className:"w-full h-20 object-cover rounded border"}),n.jsx("button",{type:"button",onClick:Te=>{Te.preventDefault(),Te.stopPropagation(),xe(Ce)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:n.jsx(is,{className:"h-3 w-3"})})]},`new-image-${Ce}`))})]}),m&&n.jsxs("div",{className:"mt-2",children:[n.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ke,className:"hidden",id:"image-upload"}),n.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:n.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[n.jsx(Zi,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Add More Images"})]})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Product Name"}),m?n.jsx(ve,{value:u.name||"",onChange:re=>p({...u,name:re.target.value})}):n.jsx("p",{className:"text-sm font-medium",children:i.name})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Selling Price"}),m?n.jsx(ve,{type:"number",value:u.price||"",onChange:re=>p({...u,price:Number(re.target.value)})}):n.jsxs("p",{className:"text-sm font-medium",children:["₹",i.price]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Stock Quantity"}),m?n.jsx(ve,{type:"number",value:u.quantity||"",onChange:re=>p({...u,quantity:Number(re.target.value)})}):n.jsx("p",{className:"text-sm font-medium",children:i.quantity})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Category"}),m?n.jsxs(Vt,{value:u.category||i.category,onValueChange:re=>{p({...u,category:re,subcategory:""}),V(re)},children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsx(zt,{children:b.map(re=>n.jsx(qe,{value:re,children:re},re))})]}):n.jsx("p",{className:"text-sm font-medium",children:i.category})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Subcategory"}),m?n.jsxs(Vt,{value:u.subcategory||i.subcategory||"",onValueChange:re=>p({...u,subcategory:re}),children:[n.jsx($t,{children:n.jsx(Ut,{placeholder:"Select subcategory"})}),n.jsx(zt,{children:N.map(re=>n.jsx(qe,{value:re,children:re},re))})]}):n.jsx("p",{className:"text-sm font-medium",children:i.subcategory||"N/A"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx(ue,{children:"Cost Price"}),m?n.jsx(ve,{type:"number",value:u.cost_price||"",onChange:re=>p({...u,cost_price:Number(re.target.value)||void 0})}):n.jsx("p",{className:"text-sm font-medium",children:i.cost_price?`₹${i.cost_price}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"SKU"}),m?n.jsx(ve,{value:u.sku||"",onChange:re=>p({...u,sku:re.target.value})}):n.jsx("p",{className:"text-sm font-medium",children:i.sku||"N/A"})]})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Status"}),m?n.jsxs(Vt,{value:u.status||i.status,onValueChange:re=>p({...u,status:re}),children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"active",children:"Active"}),n.jsx(qe,{value:"draft",children:"Draft"}),n.jsx(qe,{value:"archived",children:"Archived"})]})]}):n.jsx("div",{children:ae(i.status)})]}),n.jsxs("div",{children:[n.jsx(ue,{children:"Description"}),m?n.jsx(Yn,{value:be(u.description||""),onChange:re=>p({...u,description:re.target.value}),rows:3}):n.jsx("p",{className:"text-sm text-gray-600",children:be(i.description)})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ue,{children:"Free Delivery"}),m?n.jsx(Zt,{checked:u.free_delivery??i.free_delivery,onCheckedChange:re=>p({...u,free_delivery:re})}):n.jsx(Zt,{checked:i.free_delivery,disabled:!0})]}),i.tags&&i.tags.length>0&&n.jsxs("div",{children:[n.jsx(ue,{children:"Tags"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i.tags.map((re,Ce)=>n.jsx(Ie,{variant:"secondary",className:"text-xs",children:re},Ce))})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2 border-t",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-xs text-gray-500",children:"Total Sold"}),n.jsxs("p",{className:"text-sm font-medium",children:[i.total_sold||0," units"]})]}),n.jsxs("div",{children:[n.jsx(ue,{className:"text-xs text-gray-500",children:"Created"}),n.jsx("p",{className:"text-xs",children:i.created_at?new Date(i.created_at).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx(ue,{className:"text-xs text-gray-500",children:"Updated"}),n.jsx("p",{className:"text-xs",children:i.updated_at?new Date(i.updated_at).toLocaleDateString():"N/A"})]})]})]})]})]})})]})})},rse=()=>{const e=st(),{toast:t}=hn(),[s,r]=j.useState([]),[i,a]=j.useState(!0);j.useEffect(()=>{o();const h=u=>{const p=u.detail;r(y=>[p,...y])};return window.addEventListener("newNotification",h),()=>{window.removeEventListener("newNotification",h)}},[]);const o=async()=>{try{a(!0);const h=await Wt.getNotifications();r(h)}catch(h){console.error("Failed to load notifications:",h),t({title:"Error",description:"Failed to load notifications",variant:"destructive"})}finally{a(!1)}},c=async h=>{if(h.read||(await Wt.markAsRead(h.id),r(u=>u.map(p=>p.id===h.id?{...p,read:!0}:p))),h.action_url)e(h.action_url);else switch(h.type){case"order":case"refund":case"refund_request":case"order_status":case"status_change":e("/vendor/orders");break;case"stock_alert":case"low_stock":e("/vendor/products");break;case"payment":e("/vendor/wallet");break;case"message":e("/vendor/messages");break;default:e("/vendor/orders")}},d=async()=>{try{await Wt.markAllAsRead(),r(h=>h.map(u=>({...u,read:!0}))),t({title:"Success",description:"All notifications marked as read"})}catch{t({title:"Error",description:"Failed to mark notifications as read",variant:"destructive"})}},f=h=>{switch(h){case"order":return n.jsx(At,{className:"h-5 w-5 text-green-600"});case"refund":case"refund_request":return n.jsx(xi,{className:"h-5 w-5 text-red-600"});case"stock_alert":case"low_stock":return n.jsx(ju,{className:"h-5 w-5 text-orange-600"});case"order_status":case"status_change":return n.jsx(Br,{className:"h-5 w-5 text-blue-600"});case"payment":return n.jsx(to,{className:"h-5 w-5 text-green-600"});case"message":return n.jsx(rb,{className:"h-5 w-5 text-purple-600"});default:return n.jsx(ir,{className:"h-5 w-5 text-gray-600"})}},m=s.filter(h=>!h.read).length;return i?n.jsx(qt,{title:"Notifications",children:n.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(h=>n.jsx(Ee,{className:"animate-pulse",children:n.jsx(Ae,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})})},h))})}):n.jsx(qt,{title:"Notifications",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-lg font-semibold",children:"All Notifications"}),m>0&&n.jsxs(Ie,{variant:"secondary",children:[m," unread"]})]}),m>0&&n.jsx(ne,{variant:"outline",size:"sm",onClick:d,children:"Mark all as read"})]}),n.jsx("div",{className:"space-y-3",children:s.length===0?n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-8 text-center",children:[n.jsx(ir,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),n.jsx("p",{className:"text-gray-500",children:"You're all caught up! New notifications will appear here."})]})}):s.map(h=>n.jsx(Ee,{className:`cursor-pointer transition-colors hover:bg-gray-50 ${h.read?"":"border-l-4 border-l-blue-500 bg-blue-50"}`,onClick:()=>c(h),children:n.jsx(Ae,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"mt-1",children:f(h.type)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx("h3",{className:`font-medium text-sm ${h.read?"text-gray-700":"text-gray-900"}`,children:h.title}),n.jsx("span",{className:"text-xs text-gray-500",children:new Date(h.created_at).toLocaleString()})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h.message}),n.jsxs("div",{className:"flex items-center justify-between mt-2",children:[n.jsx(Ie,{variant:"outline",className:`text-xs ${h.type==="order"?"border-green-200 text-green-700":h.type==="refund"||h.type==="refund_request"?"border-red-200 text-red-700":h.type==="stock_alert"||h.type==="low_stock"?"border-orange-200 text-orange-700":h.type==="order_status"||h.type==="status_change"?"border-blue-200 text-blue-700":h.type==="payment"?"border-green-200 text-green-700":h.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:h.type==="refund_request"?"refund":h.type==="stock_alert"?"stock":h.type==="order_status"?"status":h.type}),!h.read&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})]})})},h.id))})]})})},ise=()=>{const[e]=Sb();st();const t=e.get("type")||"orders",[s,r]=j.useState([]),[i,a]=j.useState(!0),[o,c]=j.useState("all"),[d,f]=j.useState(!1),[m,h]=j.useState(""),[u,p]=j.useState(""),[y,v]=j.useState(1),[w,x]=j.useState(1),[b,_]=j.useState(0),N=20,[C,I]=j.useState({total:0,active:0,pending:0,completed:0});j.useEffect(()=>{E()},[t,m,u,y]);const k=R=>{v(R)},E=async()=>{try{if(a(!0),t==="orders"){const R=new URLSearchParams({page:y.toString(),page_size:N.toString()});m&&R.append("date_from",m),u&&R.append("date_to",u);const{response:$,data:W}=await Be(`/vendor/orders/?${R}`);if($.ok&&W){let Z=W.results||W||[];if(x(Math.ceil((W.count||Z.length)/N)),_(W.count||Z.length),m&&u){const X=new Date(m),V=new Date(u);V.setHours(23,59,59,999),Z=Z.filter(H=>{const se=new Date(H.created_at);return se>=X&&se<=V})}r(Z),I({total:Z.length,pending:Z.filter(X=>X.status==="pending").length,completed:Z.filter(X=>X.status==="delivered").length,active:Z.filter(X=>["confirmed","out_for_delivery"].includes(X.status)).length})}}else if(t==="products"){const R=new URLSearchParams({page:y.toString(),page_size:N.toString()}),{response:$,data:W}=await Be(`/products/?${R}`);if($.ok&&W){const Z=W.results||W||[];x(Math.ceil((W.count||Z.length)/N)),_(W.count||Z.length),r(Z),I({total:Z.length,active:Z.filter(X=>X.quantity>10).length,pending:Z.filter(X=>X.quantity>0&&X.quantity<=10).length,completed:Z.filter(X=>X.quantity===0).length})}}else if(t==="revenue"){const{response:R,data:$}=await Be("/vendor/orders/");if(R.ok&&$){let W=$.results||$||[];const Z=W.filter(V=>V.status==="delivered");if(m&&u){const V=new Date(m),H=new Date(u);H.setHours(23,59,59,999),W=Z.filter(se=>{const Q=new Date(se.created_at);return Q>=V&&Q<=H})}else W=Z;r(W);const X=W.reduce((V,H)=>V+parseFloat(H.total_amount||0),0);I({total:X,active:W.length,pending:X>0?X/W.length:0,completed:W.filter(V=>new Date(V.created_at).getMonth()===new Date().getMonth()).length})}}else if(t==="customers"){const{response:R,data:$}=await Be("/vendor/orders/");if(R.ok&&$){const W=$.results||$||[],Z=new Map;W.forEach(V=>{var Q,ie;const H=((Q=V.customer_details)==null?void 0:Q.id)||V.delivery_phone;Z.has(H)||Z.set(H,{id:H,name:((ie=V.customer_details)==null?void 0:ie.username)||V.delivery_name,phone:V.delivery_phone,orders:0,totalSpent:0,lastOrder:V.created_at});const se=Z.get(H);se.orders+=1,V.status==="delivered"&&(se.totalSpent+=parseFloat(V.total_amount||0))});const X=Array.from(Z.values());r(X),I({total:X.length,active:X.filter(V=>V.orders>1).length,pending:X.filter(V=>V.orders===1).length,completed:X.filter(V=>V.totalSpent>0).length})}}}catch(R){console.error("Error fetching data:",R)}finally{a(!1)}},M=()=>{switch(t){case"orders":return"Orders Management";case"revenue":return"Revenue Analytics";case"products":return"Products Overview";case"customers":return"Customer Insights";default:return"Summary"}},P=()=>{switch(t){case"orders":return{total:"Total Orders",active:"Processing",pending:"Pending",completed:"Delivered"};case"products":return{total:"Total Products",active:"In Stock",pending:"Low Stock",completed:"Out of Stock"};case"revenue":return{total:"Total Revenue",active:"Orders",pending:"Avg Order",completed:"This Month"};case"customers":return{total:"Total Customers",active:"Repeat Buyers",pending:"New Customers",completed:"Paid Customers"};default:return{total:"Total",active:"Active",pending:"Pending",completed:"Completed"}}},T=(R,$)=>t==="revenue"&&(R==="total"||R==="pending")?`Rs${$.toFixed(2)}`:$.toString(),A=()=>{let R="",$="";t==="orders"?(R=[["Date","Order Number","Customer","Amount","Status","Items"].join(","),...s.map(V=>{var H;return[new Date(V.created_at).toLocaleDateString(),V.order_number,`"${V.delivery_name||"N/A"}"`,parseFloat(V.total_amount||0).toFixed(2),V.status,((H=V.items)==null?void 0:H.length)||0].join(",")})].join(`
`),$="orders-report"):t==="products"?(R=[["Name","Price","Stock","Status","Category"].join(","),...s.map(V=>[`"${V.name}"`,parseFloat(V.price).toFixed(2),V.quantity,V.quantity>10?"In Stock":V.quantity>0?"Low Stock":"Out of Stock",`"${V.category||"N/A"}"`].join(","))].join(`
`),$="products-report"):t==="revenue"?(R=[["Date","Order Number","Customer","Revenue"].join(","),...s.map(V=>[new Date(V.created_at).toLocaleDateString(),V.order_number,`"${V.delivery_name||"N/A"}"`,parseFloat(V.total_amount||0).toFixed(2)].join(","))].join(`
`),$="revenue-report"):t==="customers"&&(R=[["Name","Phone","Orders","Total Spent","Last Order"].join(","),...s.map(V=>[`"${V.name}"`,V.phone,V.orders,V.totalSpent.toFixed(2),new Date(V.lastOrder).toLocaleDateString()].join(","))].join(`
`),$="customers-report");const W=new Blob([R],{type:"text/csv"}),Z=window.URL.createObjectURL(W),X=document.createElement("a");X.href=Z,X.download=`${$}-${m||"all"}-${u||new Date().toISOString().split("T")[0]}.csv`,X.click(),window.URL.revokeObjectURL(Z)},z=()=>{const R=new Date().toLocaleDateString(),$=m&&u?`${m} to ${u}`:"All Time",W=P(),Z=`
===========================================
           ${M().toUpperCase()}
===========================================
Generated: ${R}
Period: ${$}

SUMMARY
-------------------------------------------
${W.total}: ${T("total",C.total)}
${W.active}: ${T("active",C.active)}
${W.pending}: ${T("pending",C.pending)}
${W.completed}: ${T("completed",C.completed)}

DETAILS (${s.length} records)
-------------------------------------------
${t==="orders"?s.map(V=>`${new Date(V.created_at).toLocaleDateString()} | ${V.order_number} | ${V.delivery_name} | Rs${parseFloat(V.total_amount||0).toFixed(2)} | ${V.status}`).join(`
`):t==="products"?s.map(V=>`${V.name} | Rs${parseFloat(V.price).toFixed(2)} | Stock: ${V.quantity}`).join(`
`):t==="revenue"?s.map(V=>`${new Date(V.created_at).toLocaleDateString()} | ${V.order_number} | Rs${parseFloat(V.total_amount||0).toFixed(2)}`).join(`
`):s.map(V=>`${V.name} | ${V.phone} | ${V.orders} orders | Rs${V.totalSpent.toFixed(2)}`).join(`
`)}

===========================================
    `,X=window.open("","_blank");X==null||X.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${Z}</pre>`),X==null||X.print()},O=()=>{const R=P(),$=`${M()}\\n\\n${R.total}: ${T("total",C.total)}\\n${R.active}: ${T("active",C.active)}\\n${R.pending}: ${T("pending",C.pending)}\\n${R.completed}: ${T("completed",C.completed)}\\n\\nTotal Records: ${s.length}`;if(navigator.share)navigator.share({title:M(),text:$});else{const W=`https://wa.me/?text=${encodeURIComponent($)}`;window.open(W,"_blank")}},F=()=>{v(1),E(),f(!1)},G=()=>{h(""),p(""),v(1),E(),f(!1)},Y=R=>{if(R==="all")return s;if(t==="orders"){if(R==="pending")return s.filter($=>$.status==="pending");if(R==="active")return s.filter($=>["confirmed","out_for_delivery"].includes($.status));if(R==="completed")return s.filter($=>$.status==="delivered")}else if(t==="products"){if(R==="active")return s.filter($=>$.quantity>10);if(R==="pending")return s.filter($=>$.quantity>0&&$.quantity<=10);if(R==="completed")return s.filter($=>$.quantity===0)}return s},K=R=>new Date(R).toLocaleDateString(),U=R=>new Date(R).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),B=P();return n.jsx(qt,{title:M(),children:n.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[n.jsx("div",{className:"p-4 space-y-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsx(Ee,{children:n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(Br,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:B.total}),n.jsx("p",{className:"text-sm font-bold text-blue-600",children:T("total",C.total)})]})]})})}),n.jsx(Ee,{children:n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(bu,{className:"h-4 w-4 text-green-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:B.active}),n.jsx("p",{className:"text-sm font-bold text-green-600",children:T("active",C.active)})]})]})})}),n.jsx(Ee,{children:n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx(wu,{className:"h-4 w-4 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:B.pending}),n.jsx("p",{className:"text-sm font-bold text-orange-600",children:T("pending",C.pending)})]})]})})}),n.jsx(Ee,{children:n.jsx(Ae,{className:"p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(At,{className:"h-4 w-4 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:B.completed}),n.jsx("p",{className:"text-sm font-bold text-purple-600",children:T("completed",C.completed)})]})]})})})]})}),n.jsx("div",{className:"px-4",children:n.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:M()}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:z,children:n.jsx(ib,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:A,children:n.jsx(Hl,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:O,children:n.jsx(Ho,{className:"h-4 w-4"})}),(t==="orders"||t==="revenue")&&n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>f(!0),children:n.jsx(ji,{className:"h-4 w-4"})}),n.jsx(ne,{variant:"outline",size:"sm",onClick:E,children:n.jsx(xi,{className:"h-4 w-4"})})]})]}),n.jsxs(Si,{value:o,onValueChange:c,className:"w-full",children:[n.jsx("div",{className:"border-b border-gray-100 overflow-x-auto",children:n.jsxs(qr,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[n.jsxs(Ct,{value:"all",className:"text-xs py-2 px-3",children:["All (",s.length,")"]}),t==="orders"&&n.jsxs(n.Fragment,{children:[n.jsxs(Ct,{value:"pending",className:"text-xs py-2 px-3",children:["Pending (",C.pending,")"]}),n.jsxs(Ct,{value:"active",className:"text-xs py-2 px-3",children:["Processing (",C.active,")"]}),n.jsxs(Ct,{value:"completed",className:"text-xs py-2 px-3",children:["Delivered (",C.completed,")"]})]}),t==="products"&&n.jsxs(n.Fragment,{children:[n.jsxs(Ct,{value:"active",className:"text-xs py-2 px-3",children:["In Stock (",C.active,")"]}),n.jsxs(Ct,{value:"pending",className:"text-xs py-2 px-3",children:["Low Stock (",C.pending,")"]}),n.jsxs(Ct,{value:"completed",className:"text-xs py-2 px-3",children:["Out of Stock (",C.completed,")"]})]})]})}),n.jsx(dt,{value:"all",className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:i?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(xi,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Loading data..."})]}):Y("all").length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(At,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-gray-500",children:"No data found"})]}):Y("all").map((R,$)=>n.jsxs("div",{className:"p-4",children:[t==="orders"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(At,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",R.order_number]}),n.jsx("p",{className:"text-xs text-gray-600",children:R.delivery_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[K(R.created_at)," at ",U(R.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(R.total_amount||0).toFixed(2)]}),n.jsx(Ie,{variant:"default",className:"text-xs",children:R.status})]})]}),t==="products"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(ms,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:R.name}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(R.price).toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",R.quantity]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx(Ie,{className:`text-xs ${R.quantity>10?"bg-green-100 text-green-800":R.quantity>0?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:R.quantity>10?"In Stock":R.quantity>0?"Low Stock":"Out of Stock"})})]}),t==="revenue"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(Br,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",R.order_number]}),n.jsx("p",{className:"text-xs text-gray-600",children:R.delivery_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[K(R.created_at)," at ",U(R.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(R.total_amount||0).toFixed(2)]}),n.jsx(Ie,{variant:"default",className:"text-xs",children:"revenue"})]})]}),t==="customers"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx(ab,{className:"h-5 w-5 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:R.name}),n.jsx("p",{className:"text-xs text-gray-600",children:R.phone}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Last order: ",K(R.lastOrder)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",R.totalSpent.toFixed(2)]}),n.jsxs(Ie,{variant:"default",className:"text-xs",children:[R.orders," orders"]})]})]})]},R.id||$))})}),(t==="orders"||t==="products")&&["pending","active","completed"].map(R=>n.jsx(dt,{value:R,className:"mt-0",children:n.jsx("div",{className:"divide-y divide-gray-100",children:Y(R).map(($,W)=>n.jsxs("div",{className:"p-4",children:[t==="orders"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(At,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",$.order_number]}),n.jsx("p",{className:"text-xs text-gray-600",children:$.delivery_name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[K($.created_at)," at ",U($.created_at)]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat($.total_amount||0).toFixed(2)]}),n.jsx(Ie,{variant:"default",className:"text-xs",children:$.status})]})]}),t==="products"&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:n.jsx(ms,{className:"h-5 w-5 text-purple-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:$.name}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat($.price).toFixed(2)]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",$.quantity]})]})]}),n.jsx("div",{className:"text-right",children:n.jsx(Ie,{className:`text-xs ${$.quantity>10?"bg-green-100 text-green-800":$.quantity>0?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:$.quantity>10?"In Stock":$.quantity>0?"Low Stock":"Out of Stock"})})]})]},$.id||W))})},R))]})]})}),w>1&&n.jsx("div",{className:"px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(y-1)*N+1," to ",Math.min(y*N,b)," of ",b," records"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>k(y-1),disabled:y===1,children:"Previous"}),n.jsxs("span",{className:"text-sm font-medium",children:[y," of ",w]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:()=>k(y+1),disabled:y===w,children:"Next"})]})]})}),n.jsx(Os,{open:d,onOpenChange:f,children:n.jsxs(gs,{side:"right",className:"w-full sm:w-80",children:[n.jsx(vs,{className:"pb-4",children:n.jsx(xs,{children:"Filter by Date Range"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-sm font-medium mb-2 block",children:"From Date"}),n.jsx(ve,{type:"date",value:m,onChange:R=>h(R.target.value),className:"h-9 text-sm"})]}),n.jsxs("div",{children:[n.jsx(ue,{className:"text-sm font-medium mb-2 block",children:"To Date"}),n.jsx(ve,{type:"date",value:u,onChange:R=>p(R.target.value),className:"h-9 text-sm"})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(ne,{onClick:F,className:"flex-1",children:"Apply Filter"}),n.jsx(ne,{variant:"outline",onClick:G,className:"flex-1",children:"Clear"})]}),(m||u)&&n.jsx("div",{className:"pt-4 border-t",children:n.jsx("p",{className:"text-sm text-gray-600",children:m&&u?`Showing: ${m} to ${u}`:m?`From: ${m}`:u?`Until: ${u}`:""})})]})]})})]})})};function ase(){const e=st(),{toast:t}=hn(),[s,r]=j.useState("dashboard"),[i,a]=j.useState(!0),[o,c]=j.useState("30"),[d,f]=j.useState(""),[m,h]=j.useState(""),[u,p]=j.useState("all"),[y,v]=j.useState(!1),[w,x]=j.useState("csv"),[b,_]=j.useState([]),[N,C]=j.useState([]),[I,k]=j.useState([]),[E,M]=j.useState({totalRevenue:0,totalOrders:0,avgOrderValue:0,topProducts:[],revenueChart:[],orderChart:[],productPerformance:[],customerInsights:{totalCustomers:0,returningCustomers:0,newCustomers:0}});j.useEffect(()=>{P()},[o,d,m,u]);const P=async()=>{try{a(!0);const{response:Z,data:X}=await Be("/vendor/orders/");if(Z.ok){const V=X.results||X||[];_(V);const{response:H,data:se}=await Be("/products/");if(H.ok){const Q=se.results||se||[];C(Q),T(V,Q),Y(V)}}}catch(Z){console.error("Error fetching data:",Z),t({title:"Error",description:"Failed to load analytics data",variant:"destructive"})}finally{a(!1)}},T=(Z,X)=>{const V=A(Z),H=V.filter(fe=>fe.status==="delivered"),se=H.reduce((fe,ke)=>fe+parseFloat(ke.total_amount||0),0),Q=V.length,ie=Q>0?se/H.length:0,he=z(H),te=O(V),ge=F(H),Se=G(V);M({totalRevenue:se,totalOrders:Q,avgOrderValue:ie,topProducts:ge.slice(0,5),revenueChart:he,orderChart:te,productPerformance:ge,customerInsights:Se})},A=Z=>{let X=Z;if(o!=="custom"){const V=parseInt(o),H=new Date;H.setDate(H.getDate()-V),X=Z.filter(se=>new Date(se.created_at)>=H)}else d&&m&&(X=Z.filter(V=>{const H=new Date(V.created_at);return H>=new Date(d)&&H<=new Date(m)}));return u!=="all"&&(X=X.filter(V=>{var H;return(H=V.items)==null?void 0:H.some(se=>{var Q;return((Q=se.product_details)==null?void 0:Q.id)===parseInt(u)})})),X},z=Z=>{const X=[];for(let V=29;V>=0;V--){const H=new Date;H.setDate(H.getDate()-V);const se=Z.filter(ie=>new Date(ie.created_at).toDateString()===H.toDateString()),Q=se.reduce((ie,he)=>ie+parseFloat(he.total_amount||0),0);X.push({date:H.toLocaleDateString("en-US",{month:"short",day:"numeric"}),revenue:Q,orders:se.length})}return X},O=Z=>{const X={pending:0,confirmed:0,preparing:0,out_for_delivery:0,delivered:0,cancelled:0};return Z.forEach(V=>{X.hasOwnProperty(V.status)&&X[V.status]++}),Object.entries(X).map(([V,H])=>({status:V.replace("_"," ").replace(/\b\w/g,se=>se.toUpperCase()),count:H,percentage:Z.length>0?(H/Z.length*100).toFixed(1):0}))},F=(Z,X)=>{const V={};return Z.forEach(H=>{var se;(se=H.items)==null||se.forEach(Q=>{var he;const ie=(he=Q.product_details)==null?void 0:he.id;ie&&(V[ie]||(V[ie]={id:ie,name:Q.product_name,totalSold:0,totalRevenue:0,orders:0}),V[ie].totalSold+=Q.quantity,V[ie].totalRevenue+=parseFloat(Q.total_price||0),V[ie].orders++)})}),Object.values(V).sort((H,se)=>se.totalRevenue-H.totalRevenue)},G=Z=>{const X=new Set,V={};Z.forEach(se=>{var ie;const Q=((ie=se.customer_details)==null?void 0:ie.id)||se.delivery_phone;X.add(Q),V[Q]||(V[Q]=[]),V[Q].push(se)});const H=Object.values(V).filter(se=>se.length>1).length;return{totalCustomers:X.size,returningCustomers:H,newCustomers:X.size-H}},Y=Z=>{const X=[];Z.forEach(V=>{var H,se,Q;V.status==="delivered"&&X.push({id:V.id,type:"sale",order_number:V.order_number,customer_name:((H=V.customer_details)==null?void 0:H.username)||V.delivery_name,amount:parseFloat(V.total_amount),date:V.created_at,items:((se=V.items)==null?void 0:se.length)||0}),((Q=V.refunds)==null?void 0:Q.length)>0&&V.refunds.forEach(ie=>{var he,te;ie.status==="completed"&&X.push({id:`refund-${ie.id}`,type:"refund",order_number:V.order_number,customer_name:((he=V.customer_details)==null?void 0:he.username)||V.delivery_name,amount:-parseFloat(ie.approved_amount||ie.requested_amount),date:ie.completed_at||ie.created_at,items:((te=V.items)==null?void 0:te.length)||0})})}),k(X.sort((V,H)=>new Date(H.date).getTime()-new Date(V.date).getTime()))},K=()=>{const Z={summary:{totalRevenue:E.totalRevenue,totalOrders:E.totalOrders,avgOrderValue:E.avgOrderValue,totalCustomers:E.customerInsights.totalCustomers,dateRange:o==="custom"?`${d} to ${m}`:`Last ${o} days`},transactions:I,products:E.productPerformance,revenueChart:E.revenueChart};w==="csv"?U(Z):w==="pdf"?R(Z):B(Z),v(!1)},U=Z=>{const X=[["Analytics Report"],["Generated:",new Date().toLocaleDateString()],["Period:",Z.summary.dateRange],[""],["SUMMARY"],["Total Revenue",`Rs${Z.summary.totalRevenue.toFixed(2)}`],["Total Orders",Z.summary.totalOrders],["Average Order Value",`Rs${Z.summary.avgOrderValue.toFixed(2)}`],["Total Customers",Z.summary.totalCustomers],[""],["TOP PRODUCTS"],["Product Name","Units Sold","Revenue","Orders"],...Z.products.slice(0,10).map(Q=>[Q.name,Q.totalSold,`Rs${Q.totalRevenue.toFixed(2)}`,Q.orders]),[""],["DAILY REVENUE"],["Date","Revenue","Orders"],...Z.revenueChart.map(Q=>[Q.date,`Rs${Q.revenue.toFixed(2)}`,Q.orders])].map(Q=>Q.join(",")).join(`
`),V=new Blob([X],{type:"text/csv"}),H=window.URL.createObjectURL(V),se=document.createElement("a");se.href=H,se.download=`analytics-report-${new Date().toISOString().split("T")[0]}.csv`,se.click(),window.URL.revokeObjectURL(H)},B=Z=>{const X=new Blob([JSON.stringify(Z,null,2)],{type:"application/json"}),V=window.URL.createObjectURL(X),H=document.createElement("a");H.href=V,H.download=`analytics-data-${new Date().toISOString().split("T")[0]}.json`,H.click(),window.URL.revokeObjectURL(V)},R=Z=>{const X=`
===========================================
        BUSINESS ANALYTICS REPORT
===========================================
Generated: ${new Date().toLocaleDateString()}
Period: ${Z.summary.dateRange}

SUMMARY
-------------------------------------------
Total Revenue: Rs${Z.summary.totalRevenue.toFixed(2)}
Total Orders: ${Z.summary.totalOrders}
Average Order Value: Rs${Z.summary.avgOrderValue.toFixed(2)}
Total Customers: ${Z.summary.totalCustomers}

TOP PRODUCTS
-------------------------------------------
${Z.products.slice(0,10).map((H,se)=>`${se+1}. ${H.name} - ${H.totalSold} units - Rs${H.totalRevenue.toFixed(2)}`).join(`
`)}

DAILY REVENUE TREND
-------------------------------------------
${Z.revenueChart.slice(-14).map(H=>`${H.date}: Rs${H.revenue.toFixed(2)} (${H.orders} orders)`).join(`
`)}

===========================================
    `,V=window.open("","_blank");V==null||V.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${X}</pre>`),V==null||V.print()},$=()=>{var X;const Z=`Business Analytics Report

Total Revenue: Rs${E.totalRevenue.toFixed(2)}
Total Orders: ${E.totalOrders}
Average Order Value: Rs${E.avgOrderValue.toFixed(2)}
Total Customers: ${E.customerInsights.totalCustomers}

Top Product: ${((X=E.topProducts[0])==null?void 0:X.name)||"N/A"}`;if(navigator.share)navigator.share({title:"Business Analytics Report",text:Z});else{const V=`https://wa.me/?text=${encodeURIComponent(Z)}`;window.open(V,"_blank")}},W=[{id:"dashboard",label:"Dashboard",icon:pP},{id:"sales",label:"Sales Report",icon:Br},{id:"products",label:"Product Analytics",icon:At},{id:"customers",label:"Customer Insights",icon:ab},{id:"statements",label:"Statements",icon:Rr}];return i?n.jsx(qt,{title:"Business Analytics",children:n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})})}):n.jsx(qt,{title:"Business Analytics",children:n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:n.jsxs("div",{className:"flex items-center justify-between p-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ne,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:n.jsx(Yt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"font-semibold text-lg",children:"Business Analytics"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive business insights"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[n.jsx(Hl,{className:"h-4 w-4 mr-1"}),"Export"]}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:$,children:[n.jsx(Ho,{className:"h-4 w-4 mr-1"}),"Share"]}),n.jsx(ne,{variant:"outline",size:"sm",onClick:P,children:n.jsx(xi,{className:"h-4 w-4"})})]})]})}),n.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ji,{className:"h-4 w-4 text-gray-600"}),n.jsx(ue,{className:"text-sm font-medium",children:"Filters:"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ue,{className:"text-sm",children:"Period:"}),n.jsxs(Vt,{value:o,onValueChange:c,children:[n.jsx($t,{className:"w-32",children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"7",children:"Last 7 days"}),n.jsx(qe,{value:"30",children:"Last 30 days"}),n.jsx(qe,{value:"90",children:"Last 3 months"}),n.jsx(qe,{value:"365",children:"Last year"}),n.jsx(qe,{value:"custom",children:"Custom"})]})]})]}),o==="custom"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ue,{className:"text-sm",children:"From:"}),n.jsx(ve,{type:"date",value:d,onChange:Z=>f(Z.target.value),className:"w-36"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ue,{className:"text-sm",children:"To:"}),n.jsx(ve,{type:"date",value:m,onChange:Z=>h(Z.target.value),className:"w-36"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ue,{className:"text-sm",children:"Product:"}),n.jsxs(Vt,{value:u,onValueChange:p,children:[n.jsx($t,{className:"w-40",children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"all",children:"All Products"}),N.map(Z=>n.jsx(qe,{value:Z.id.toString(),children:Z.name},Z.id))]})]})]})]})}),n.jsx("div",{className:"bg-white",children:n.jsxs(Si,{value:s,onValueChange:r,className:"w-full",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsx(qr,{className:"grid grid-cols-5 w-full min-w-max",children:W.map(Z=>n.jsxs(Ct,{value:Z.id,className:"flex items-center gap-2 text-xs",children:[n.jsx(Z.icon,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:Z.label})]},Z.id))})}),n.jsxs(dt,{value:"dashboard",className:"p-4 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4 text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["₹",E.totalRevenue.toFixed(0)]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:E.totalOrders}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4 text-center",children:[n.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["₹",E.avgOrderValue.toFixed(0)]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Avg Order Value"})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-orange-600",children:E.customerInsights.totalCustomers}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]})})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsxs(_t,{className:"flex items-center gap-2",children:[n.jsx(Br,{className:"h-5 w-5"}),"Revenue Trend"]})}),n.jsx(Ae,{children:n.jsx("div",{className:"h-64 flex items-end justify-between gap-1",children:E.revenueChart.map((Z,X)=>{const V=Math.max(...E.revenueChart.map(se=>se.revenue),1),H=Z.revenue/V*200;return n.jsxs("div",{className:"flex flex-col items-center flex-1",children:[n.jsx("div",{className:"bg-green-500 rounded-t w-full min-h-[4px] hover:bg-green-600 transition-colors cursor-pointer",style:{height:`${H}px`},title:`${Z.date}: ₹${Z.revenue.toFixed(0)}`}),n.jsx("div",{className:"text-xs text-gray-600 mt-1 transform -rotate-45 origin-left",children:Z.date})]},X)})})})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsxs(_t,{className:"flex items-center gap-2",children:[n.jsx(At,{className:"h-5 w-5"}),"Top Performing Products"]})}),n.jsx(Ae,{children:n.jsx("div",{className:"space-y-3",children:E.topProducts.map((Z,X)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm font-bold text-blue-600",children:X+1}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:Z.name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[Z.totalSold," units sold"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-bold text-green-600",children:["₹",Z.totalRevenue.toFixed(0)]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[Z.orders," orders"]})]})]},Z.id))})})]})]}),n.jsx(dt,{value:"sales",className:"p-4 space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{children:"Order Status Distribution"})}),n.jsx(Ae,{children:n.jsx("div",{className:"space-y-3",children:E.orderChart.map(Z=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${Z.status==="Delivered"?"bg-green-500":Z.status==="Pending"?"bg-yellow-500":Z.status==="Cancelled"?"bg-red-500":"bg-blue-500"}`}),n.jsx("span",{className:"text-sm",children:Z.status})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:Z.count}),n.jsxs("span",{className:"text-sm text-gray-600",children:["(",Z.percentage,"%)"]})]})]},Z.status))})})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{children:"Daily Sales Summary"})}),n.jsx(Ae,{children:n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:E.revenueChart.slice(-7).reverse().map((Z,X)=>n.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-gray-50 rounded",children:[n.jsx("span",{className:"text-sm",children:Z.date}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-medium",children:["₹",Z.revenue.toFixed(0)]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[Z.orders," orders"]})]})]},X))})})]})]})}),n.jsx(dt,{value:"products",className:"p-4 space-y-6",children:n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{children:"Product Performance Report"})}),n.jsx(Ae,{children:n.jsx("div",{className:"space-y-3",children:E.productPerformance.map((Z,X)=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-bold",children:X+1}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:Z.name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[Z.totalSold," units • ",Z.orders," orders"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-bold text-green-600",children:["₹",Z.totalRevenue.toFixed(0)]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["₹",(Z.totalRevenue/Z.totalSold).toFixed(0)," per unit"]})]})]},Z.id))})})]})}),n.jsxs(dt,{value:"customers",className:"p-4 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:E.customerInsights.totalCustomers}),n.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:E.customerInsights.returningCustomers}),n.jsx("div",{className:"text-sm text-gray-600",children:"Returning Customers"})]})}),n.jsx(Ee,{children:n.jsxs(Ae,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:E.customerInsights.newCustomers}),n.jsx("div",{className:"text-sm text-gray-600",children:"New Customers"})]})})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsx(_t,{children:"Customer Insights"})}),n.jsx(Ae,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Customer Retention Rate"}),n.jsxs("span",{className:"font-bold text-green-600",children:[E.customerInsights.totalCustomers>0?(E.customerInsights.returningCustomers/E.customerInsights.totalCustomers*100).toFixed(1):0,"%"]})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Average Orders per Customer"}),n.jsx("span",{className:"font-bold text-blue-600",children:E.customerInsights.totalCustomers>0?(E.totalOrders/E.customerInsights.totalCustomers).toFixed(1):0})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Average Revenue per Customer"}),n.jsxs("span",{className:"font-bold text-purple-600",children:["₹",E.customerInsights.totalCustomers>0?(E.totalRevenue/E.customerInsights.totalCustomers).toFixed(0):0]})]})]})})]})]}),n.jsxs(dt,{value:"statements",className:"p-4 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsxs(_t,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Sales Summary"}),n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[n.jsx(Hl,{className:"h-4 w-4 mr-1"}),"Export"]})]})}),n.jsx(Ae,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Total Sales"}),n.jsxs("span",{className:"font-bold text-green-600",children:["₹",E.totalRevenue.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Total Orders"}),n.jsx("span",{className:"font-bold text-blue-600",children:E.totalOrders})]}),n.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[n.jsx("span",{className:"text-sm font-medium",children:"Average Order Value"}),n.jsxs("span",{className:"font-bold text-purple-600",children:["₹",E.avgOrderValue.toFixed(2)]})]})]})})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsxs(_t,{className:"flex items-center gap-2",children:[n.jsx(ND,{className:"h-5 w-5"}),"Order Distribution"]})}),n.jsx(Ae,{children:n.jsx("div",{className:"space-y-3",children:E.orderChart.map((Z,X)=>{const V=["bg-green-500","bg-yellow-500","bg-red-500","bg-blue-500","bg-purple-500"];return n.jsxs("div",{className:"flex items-center justify-between p-2 rounded",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${V[X%V.length]}`}),n.jsx("span",{className:"text-sm",children:Z.status})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"font-medium text-sm",children:Z.count}),n.jsxs("span",{className:"text-xs text-gray-600 ml-1",children:["(",Z.percentage,"%)"]})]})]},Z.status)})})})]})]}),n.jsxs(Ee,{children:[n.jsx(jt,{children:n.jsxs(_t,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Recent Transactions"}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>e("/vendor/sales"),children:[n.jsx(Nn,{className:"h-4 w-4 mr-1"}),"View All"]})})]})}),n.jsx(Ae,{children:n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:I.slice(0,20).map(Z=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${Z.type==="sale"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:Z.type==="sale"?"↓":"↑"}),n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium text-sm",children:[Z.type==="sale"?"Sale":"Refund"," - ",Z.order_number]}),n.jsxs("div",{className:"text-xs text-gray-600",children:[Z.customer_name," • ",new Date(Z.date).toLocaleDateString()]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:`font-bold text-sm ${Z.type==="sale"?"text-green-600":"text-red-600"}`,children:[Z.type==="sale"?"+":"","₹",Math.abs(Z.amount).toFixed(2)]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[Z.items," items"]})]})]},Z.id))})})]})]})]})}),n.jsx(Os,{open:y,onOpenChange:v,children:n.jsxs(gs,{side:"right",className:"w-full sm:w-80",children:[n.jsx(vs,{className:"pb-4",children:n.jsx(xs,{children:"Export Analytics Report"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(ue,{className:"text-sm font-medium mb-2 block",children:"Export Format"}),n.jsxs(Vt,{value:w,onValueChange:x,children:[n.jsx($t,{children:n.jsx(Ut,{})}),n.jsxs(zt,{children:[n.jsx(qe,{value:"csv",children:"CSV Spreadsheet"}),n.jsx(qe,{value:"json",children:"JSON Data"}),n.jsx(qe,{value:"pdf",children:"PDF Report"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(ue,{className:"text-sm font-medium",children:"Report Includes:"}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[n.jsx("div",{children:"• Sales summary and metrics"}),n.jsx("div",{children:"• Top performing products"}),n.jsx("div",{children:"• Daily revenue trends"}),n.jsx("div",{children:"• Customer insights"}),n.jsx("div",{children:"• Order distribution"})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(ne,{onClick:K,className:"flex-1",children:[n.jsx(Hl,{className:"h-4 w-4 mr-2"}),"Export Report"]}),n.jsx(ne,{variant:"outline",onClick:()=>v(!1),className:"flex-1",children:"Cancel"})]}),n.jsx("div",{className:"pt-4 border-t",children:n.jsxs("p",{className:"text-xs text-gray-500",children:["Report will include data for the selected time period: ",o==="custom"?`${d} to ${m}`:`Last ${o} days`]})})]})]})})]})})}const ose=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Compose New Message"}),n.jsx("p",{children:"Coming soon..."})]}),lse=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Customer Management"}),n.jsx("p",{children:"Coming soon..."})]}),cse=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Search Messages"}),n.jsx("p",{children:"Coming soon..."})]}),dse=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Message Settings"}),n.jsx("p",{children:"Coming soon..."})]}),use=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Products"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Product Statistics"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"24"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total Products"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Categories"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:"8"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Active Categories"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Approvals"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"3"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Review"})]})]})]}),hse=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Return Order Management"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Return Requests"}),n.jsx("p",{className:"text-3xl font-bold text-red-600",children:"7"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Pending review"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Approved Returns"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:"12"}),n.jsx("p",{className:"text-sm text-gray-600",children:"This month"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Refund Amount"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"₹8,450"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Processed"})]})]})]}),fse=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Review Management"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Average Rating"}),n.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:"4.7"}),n.jsx("p",{className:"text-sm text-gray-600",children:"⭐⭐⭐⭐⭐"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Reviews"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"89"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Customer feedback"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Response"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"5"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Need attention"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Positive Reviews"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:"76"}),n.jsx("p",{className:"text-sm text-gray-600",children:"85% positive"})]})]})]}),mse=()=>n.jsxs("div",{className:"p-8",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Income Dashboard"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Today's Earnings"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:"₹2,450"}),n.jsx("p",{className:"text-sm text-gray-600",children:"+12% from yesterday"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"This Week"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"₹18,320"}),n.jsx("p",{className:"text-sm text-gray-600",children:"7 days total"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"This Month"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600",children:"₹72,850"}),n.jsx("p",{className:"text-sm text-gray-600",children:"30 days total"})]}),n.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Payout"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"₹5,200"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Available for withdrawal"})]})]})]}),pse=new a$,gse=()=>(kz(),j.useEffect(()=>{(async()=>{try{await bz.requestAllPermissions(),console.log("All permissions requested successfully")}catch(t){console.error("Failed to request permissions:",t)}})()},[]),n.jsx(nz,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:n.jsxs(Q$,{children:[n.jsx(tt,{path:"/",element:n.jsx(xS,{})}),n.jsx(tt,{path:"/splash",element:n.jsx(Lz,{})}),n.jsx(tt,{path:"/login",element:n.jsx(Fz,{})}),n.jsx(tt,{path:"/home",element:n.jsx(xS,{})}),n.jsx(tt,{path:"/search",element:n.jsx(AW,{})}),n.jsx(tt,{path:"/cart",element:n.jsx(EW,{})}),n.jsx(tt,{path:"/wishlist",element:n.jsx(Qr,{children:n.jsx(RW,{})})}),n.jsx(tt,{path:"/profile",element:n.jsx(Qr,{children:n.jsx(MW,{})})}),n.jsx(tt,{path:"/profile-edit",element:n.jsx(Qr,{children:n.jsx(FW,{})})}),n.jsx(tt,{path:"/privacy",element:n.jsx($W,{})}),n.jsx(tt,{path:"/product/:id",element:n.jsx(pW,{})}),n.jsx(tt,{path:"/vendor/:vendorId",element:n.jsx(jW,{})}),n.jsx(tt,{path:"/checkout",element:n.jsx(Qr,{children:n.jsx(yZ,{})})}),n.jsx(tt,{path:"/order-confirmation/:orderId",element:n.jsx(Qr,{children:n.jsx(bZ,{})})}),n.jsx(tt,{path:"/orders",element:n.jsx(Qr,{children:n.jsx(PG,{})})}),n.jsx(tt,{path:"/addresses",element:n.jsx(Qr,{children:n.jsx(AG,{})})}),n.jsx(tt,{path:"/payments",element:n.jsx(Qr,{children:n.jsx(MG,{})})}),n.jsx(tt,{path:"/help",element:n.jsx(FG,{})}),n.jsx(tt,{path:"/messages",element:n.jsx(Qr,{children:n.jsx(NS,{})})}),n.jsx(tt,{path:"/order/:orderId/messages",element:n.jsx(Qr,{children:n.jsx(NS,{})})}),n.jsx(tt,{path:"/signup",element:n.jsx(zW,{})}),n.jsx(tt,{path:"/forgot-password",element:n.jsx(BW,{})}),n.jsx(tt,{path:"/category/:categoryName",element:n.jsx(zG,{})}),n.jsx(tt,{path:"/featured-items",element:n.jsx(VG,{})}),n.jsx(tt,{path:"/trending-items",element:n.jsx(qG,{})}),n.jsx(tt,{path:"/vendor/login",element:n.jsx(HG,{})}),n.jsx(tt,{path:"/vendor/signup",element:n.jsx(WG,{})}),n.jsx(tt,{path:"/vendor/onboarding",element:n.jsx(GG,{})}),n.jsx(tt,{path:"/vendor/rejection",element:n.jsx(KG,{})}),n.jsx(tt,{path:"/vendor/dashboard",element:n.jsx(v2,{})}),n.jsx(tt,{path:"/vendor/home",element:n.jsx(v2,{})}),n.jsx(tt,{path:"/vendor/place-order",element:n.jsx(qne,{})}),n.jsx(tt,{path:"/vendor/sales",element:n.jsx(Hne,{})}),n.jsx(tt,{path:"/vendor/messages",element:n.jsx(y2,{})}),n.jsx(tt,{path:"/vendor/order/:orderId/messages",element:n.jsx(y2,{})}),n.jsx(tt,{path:"/vendor/messages/compose",element:n.jsx(ose,{})}),n.jsx(tt,{path:"/vendor/messages/search",element:n.jsx(cse,{})}),n.jsx(tt,{path:"/vendor/messages/settings",element:n.jsx(dse,{})}),n.jsx(tt,{path:"/vendor/customers",element:n.jsx(lse,{})}),n.jsx(tt,{path:"/vendor/add-products",element:n.jsx(use,{})}),n.jsx(tt,{path:"/vendor/products",element:n.jsx(sse,{})}),n.jsx(tt,{path:"/vendor/add-product",element:n.jsx(Xne,{})}),n.jsx(tt,{path:"/vendor/orders",element:n.jsx(Gne,{})}),n.jsx(tt,{path:"/vendor/return-orders",element:n.jsx(hse,{})}),n.jsx(tt,{path:"/vendor/reviews",element:n.jsx(fse,{})}),n.jsx(tt,{path:"/vendor/income",element:n.jsx(mse,{})}),n.jsx(tt,{path:"/vendor/wallet",element:n.jsx(Qne,{})}),n.jsx(tt,{path:"/vendor/profile",element:n.jsx(Jne,{})}),n.jsx(tt,{path:"/vendor/profile-management",element:n.jsx(ese,{})}),n.jsx(tt,{path:"/vendor/company",element:n.jsx(nse,{})}),n.jsx(tt,{path:"/vendor/security",element:n.jsx(tse,{})}),n.jsx(tt,{path:"/vendor/notifications",element:n.jsx(rse,{})}),n.jsx(tt,{path:"/vendor/settings",element:n.jsx(Zne,{})}),n.jsx(tt,{path:"/vendor/summary",element:n.jsx(ise,{})}),n.jsx(tt,{path:"/vendor/analytics",element:n.jsx(ase,{})}),n.jsx(tt,{path:"*",element:n.jsx(_W,{})})]})})),vse=()=>n.jsx(l$,{client:pse,children:n.jsx(Sz,{children:n.jsx(Oz,{children:n.jsx(D8,{children:n.jsxs(Rz,{children:[n.jsx(y6,{}),n.jsx(X6,{}),n.jsx(gse,{})]})})})})});vt.isNativePlatform()&&e0.initialize().then(()=>{console.log("✅ FCM Service initialized on app startup")}).catch(e=>{console.error("❌ FCM Service initialization failed:",e)});BC(document.getElementById("root")).render(n.jsx(vse,{}));export{vt as C,kb as W,Xe as _,e0 as f,jse as i,no as r};
