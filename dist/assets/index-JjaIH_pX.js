var m5=Object.defineProperty;var Fj=e=>{throw TypeError(e)};var p5=(e,t,n)=>t in e?m5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Gt=(e,t,n)=>p5(e,typeof t!="symbol"?t+"":t,n),dv=(e,t,n)=>t.has(e)||Fj("Cannot "+n);var De=(e,t,n)=>(dv(e,t,"read from private field"),n?n.call(e):t.get(e)),zt=(e,t,n)=>t.has(e)?Fj("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),St=(e,t,n,r)=>(dv(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),mn=(e,t,n)=>(dv(e,t,"access private method"),n);var rf=(e,t,n,r)=>({set _(a){St(e,t,a,n)},get _(){return De(e,t,r)}});function g5(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const v5="modulepreload",x5=function(e){return"/"+e},$j={},Ue=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(d=>{if(d=x5(d),d in $j)return;$j[d]=!0;const h=d.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":v5,h||(u.as="script"),u.crossOrigin="",u.href=d,l&&u.setAttribute("nonce",l),document.head.appendChild(u),h)return new Promise((m,p)=>{u.addEventListener("load",m),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var Ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function vl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var A2={exports:{}},bp={},O2={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh=Symbol.for("react.element"),y5=Symbol.for("react.portal"),b5=Symbol.for("react.fragment"),w5=Symbol.for("react.strict_mode"),_5=Symbol.for("react.profiler"),j5=Symbol.for("react.provider"),N5=Symbol.for("react.context"),S5=Symbol.for("react.forward_ref"),k5=Symbol.for("react.suspense"),C5=Symbol.for("react.memo"),E5=Symbol.for("react.lazy"),Bj=Symbol.iterator;function T5(e){return e===null||typeof e!="object"?null:(e=Bj&&e[Bj]||e["@@iterator"],typeof e=="function"?e:null)}var R2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L2=Object.assign,I2={};function nd(e,t,n){this.props=e,this.context=t,this.refs=I2,this.updater=n||R2}nd.prototype.isReactComponent={};nd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function M2(){}M2.prototype=nd.prototype;function J0(e,t,n){this.props=e,this.context=t,this.refs=I2,this.updater=n||R2}var Q0=J0.prototype=new M2;Q0.constructor=J0;L2(Q0,nd.prototype);Q0.isPureReactComponent=!0;var zj=Array.isArray,D2=Object.prototype.hasOwnProperty,eb={current:null},F2={key:!0,ref:!0,__self:!0,__source:!0};function $2(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)D2.call(t,r)&&!F2.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var d=Array(l),h=0;h<l;h++)d[h]=arguments[h+2];a.children=d}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:yh,type:e,key:i,ref:o,props:a,_owner:eb.current}}function P5(e,t){return{$$typeof:yh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tb(e){return typeof e=="object"&&e!==null&&e.$$typeof===yh}function A5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vj=/\/+/g;function uv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?A5(""+e.key):t.toString(36)}function Ff(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yh:case y5:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+uv(o,0):r,zj(a)?(n="",e!=null&&(n=e.replace(Vj,"$&/")+"/"),Ff(a,t,n,"",function(h){return h})):a!=null&&(tb(a)&&(a=P5(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Vj,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",zj(e))for(var l=0;l<e.length;l++){i=e[l];var d=r+uv(i,l);o+=Ff(i,t,n,d,a)}else if(d=T5(e),typeof d=="function")for(e=d.call(e),l=0;!(i=e.next()).done;)i=i.value,d=r+uv(i,l++),o+=Ff(i,t,n,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function af(e,t,n){if(e==null)return e;var r=[],a=0;return Ff(e,r,"","",function(i){return t.call(n,i,a++)}),r}function O5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Mn={current:null},$f={transition:null},R5={ReactCurrentDispatcher:Mn,ReactCurrentBatchConfig:$f,ReactCurrentOwner:eb};function B2(){throw Error("act(...) is not supported in production builds of React.")}Rt.Children={map:af,forEach:function(e,t,n){af(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return af(e,function(){t++}),t},toArray:function(e){return af(e,function(t){return t})||[]},only:function(e){if(!tb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rt.Component=nd;Rt.Fragment=b5;Rt.Profiler=_5;Rt.PureComponent=J0;Rt.StrictMode=w5;Rt.Suspense=k5;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R5;Rt.act=B2;Rt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=L2({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=eb.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)D2.call(t,d)&&!F2.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){l=Array(d);for(var h=0;h<d;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:yh,type:e.type,key:a,ref:i,props:r,_owner:o}};Rt.createContext=function(e){return e={$$typeof:N5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:j5,_context:e},e.Consumer=e};Rt.createElement=$2;Rt.createFactory=function(e){var t=$2.bind(null,e);return t.type=e,t};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(e){return{$$typeof:S5,render:e}};Rt.isValidElement=tb;Rt.lazy=function(e){return{$$typeof:E5,_payload:{_status:-1,_result:e},_init:O5}};Rt.memo=function(e,t){return{$$typeof:C5,type:e,compare:t===void 0?null:t}};Rt.startTransition=function(e){var t=$f.transition;$f.transition={};try{e()}finally{$f.transition=t}};Rt.unstable_act=B2;Rt.useCallback=function(e,t){return Mn.current.useCallback(e,t)};Rt.useContext=function(e){return Mn.current.useContext(e)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(e){return Mn.current.useDeferredValue(e)};Rt.useEffect=function(e,t){return Mn.current.useEffect(e,t)};Rt.useId=function(){return Mn.current.useId()};Rt.useImperativeHandle=function(e,t,n){return Mn.current.useImperativeHandle(e,t,n)};Rt.useInsertionEffect=function(e,t){return Mn.current.useInsertionEffect(e,t)};Rt.useLayoutEffect=function(e,t){return Mn.current.useLayoutEffect(e,t)};Rt.useMemo=function(e,t){return Mn.current.useMemo(e,t)};Rt.useReducer=function(e,t,n){return Mn.current.useReducer(e,t,n)};Rt.useRef=function(e){return Mn.current.useRef(e)};Rt.useState=function(e){return Mn.current.useState(e)};Rt.useSyncExternalStore=function(e,t,n){return Mn.current.useSyncExternalStore(e,t,n)};Rt.useTransition=function(){return Mn.current.useTransition()};Rt.version="18.3.1";O2.exports=Rt;var _=O2.exports;const Re=vl(_),sb=g5({__proto__:null,default:Re},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L5=_,I5=Symbol.for("react.element"),M5=Symbol.for("react.fragment"),D5=Object.prototype.hasOwnProperty,F5=L5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$5={key:!0,ref:!0,__self:!0,__source:!0};function z2(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)D5.call(t,r)&&!$5.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:I5,type:e,key:i,ref:o,props:a,_owner:F5.current}}bp.Fragment=M5;bp.jsx=z2;bp.jsxs=z2;A2.exports=bp;var s=A2.exports,V2={exports:{}},ur={},U2={exports:{}},q2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,F){var B=U.length;U.push(F);e:for(;0<B;){var z=B-1>>>1,H=U[z];if(0<a(H,F))U[z]=F,U[B]=H,B=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var F=U[0],B=U.pop();if(B!==F){U[0]=B;e:for(var z=0,H=U.length,q=H>>>1;z<q;){var W=2*(z+1)-1,Y=U[W],V=W+1,G=U[V];if(0>a(Y,B))V<H&&0>a(G,Y)?(U[z]=G,U[V]=B,z=V):(U[z]=Y,U[W]=B,z=W);else if(V<H&&0>a(G,B))U[z]=G,U[V]=B,z=V;else break e}}return F}function a(U,F){var B=U.sortIndex-F.sortIndex;return B!==0?B:U.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],h=[],f=1,u=null,m=3,p=!1,w=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(U){for(var F=n(h);F!==null;){if(F.callback===null)r(h);else if(F.startTime<=U)r(h),F.sortIndex=F.expirationTime,t(d,F);else break;F=n(h)}}function N(U){if(v=!1,j(U),!w)if(n(d)!==null)w=!0,Z(S);else{var F=n(h);F!==null&&X(N,F.startTime-U)}}function S(U,F){w=!1,v&&(v=!1,y(E),E=-1),p=!0;var B=m;try{for(j(F),u=n(d);u!==null&&(!(u.expirationTime>F)||U&&!R());){var z=u.callback;if(typeof z=="function"){u.callback=null,m=u.priorityLevel;var H=z(u.expirationTime<=F);F=e.unstable_now(),typeof H=="function"?u.callback=H:u===n(d)&&r(d),j(F)}else r(d);u=n(d)}if(u!==null)var q=!0;else{var W=n(h);W!==null&&X(N,W.startTime-F),q=!1}return q}finally{u=null,m=B,p=!1}}var P=!1,T=null,E=-1,I=5,O=-1;function R(){return!(e.unstable_now()-O<I)}function C(){if(T!==null){var U=e.unstable_now();O=U;var F=!0;try{F=T(!0,U)}finally{F?D():(P=!1,T=null)}}else P=!1}var D;if(typeof b=="function")D=function(){b(C)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,M=A.port2;A.port1.onmessage=C,D=function(){M.postMessage(null)}}else D=function(){x(C,0)};function Z(U){T=U,P||(P=!0,D())}function X(U,F){E=x(function(){U(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,Z(S))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(U){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var B=m;m=F;try{return U()}finally{m=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,F){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var B=m;m=U;try{return F()}finally{m=B}},e.unstable_scheduleCallback=function(U,F,B){var z=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?z+B:z):B=z,U){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=B+H,U={id:f++,callback:F,priorityLevel:U,startTime:B,expirationTime:H,sortIndex:-1},B>z?(U.sortIndex=B,t(h,U),n(d)===null&&U===n(h)&&(v?(y(E),E=-1):v=!0,X(N,B-z))):(U.sortIndex=H,t(d,U),w||p||(w=!0,Z(S))),U},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(U){var F=m;return function(){var B=m;m=F;try{return U.apply(this,arguments)}finally{m=B}}}})(q2);U2.exports=q2;var B5=U2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z5=_,cr=B5;function Ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H2=new Set,Ou={};function xl(e,t){Oc(e,t),Oc(e+"Capture",t)}function Oc(e,t){for(Ou[e]=t,e=0;e<t.length;e++)H2.add(t[e])}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tx=Object.prototype.hasOwnProperty,V5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uj={},qj={};function U5(e){return Tx.call(qj,e)?!0:Tx.call(Uj,e)?!1:V5.test(e)?qj[e]=!0:(Uj[e]=!0,!1)}function q5(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function H5(e,t,n,r){if(t===null||typeof t>"u"||q5(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Dn(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){hn[e]=new Dn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];hn[t]=new Dn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){hn[e]=new Dn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){hn[e]=new Dn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){hn[e]=new Dn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){hn[e]=new Dn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){hn[e]=new Dn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){hn[e]=new Dn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){hn[e]=new Dn(e,5,!1,e.toLowerCase(),null,!1,!1)});var nb=/[\-:]([a-z])/g;function rb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nb,rb);hn[t]=new Dn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nb,rb);hn[t]=new Dn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nb,rb);hn[t]=new Dn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){hn[e]=new Dn(e,1,!1,e.toLowerCase(),null,!1,!1)});hn.xlinkHref=new Dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){hn[e]=new Dn(e,1,!1,e.toLowerCase(),null,!0,!0)});function ab(e,t,n,r){var a=hn.hasOwnProperty(t)?hn[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(H5(t,n,a,r)&&(n=null),r||a===null?U5(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xi=z5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,of=Symbol.for("react.element"),zl=Symbol.for("react.portal"),Vl=Symbol.for("react.fragment"),ib=Symbol.for("react.strict_mode"),Px=Symbol.for("react.profiler"),W2=Symbol.for("react.provider"),G2=Symbol.for("react.context"),ob=Symbol.for("react.forward_ref"),Ax=Symbol.for("react.suspense"),Ox=Symbol.for("react.suspense_list"),lb=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),K2=Symbol.for("react.offscreen"),Hj=Symbol.iterator;function Fd(e){return e===null||typeof e!="object"?null:(e=Hj&&e[Hj]||e["@@iterator"],typeof e=="function"?e:null)}var Ss=Object.assign,hv;function ru(e){if(hv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);hv=t&&t[1]||""}return`
`+hv+e}var fv=!1;function mv(e,t){if(!e||fv)return"";fv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=l);break}}}finally{fv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ru(e):""}function W5(e){switch(e.tag){case 5:return ru(e.type);case 16:return ru("Lazy");case 13:return ru("Suspense");case 19:return ru("SuspenseList");case 0:case 2:case 15:return e=mv(e.type,!1),e;case 11:return e=mv(e.type.render,!1),e;case 1:return e=mv(e.type,!0),e;default:return""}}function Rx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vl:return"Fragment";case zl:return"Portal";case Px:return"Profiler";case ib:return"StrictMode";case Ax:return"Suspense";case Ox:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case G2:return(e.displayName||"Context")+".Consumer";case W2:return(e._context.displayName||"Context")+".Provider";case ob:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lb:return t=e.displayName||null,t!==null?t:Rx(e.type)||"Memo";case Oi:t=e._payload,e=e._init;try{return Rx(e(t))}catch{}}return null}function G5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rx(t);case 8:return t===ib?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function so(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Z2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function K5(e){var t=Z2(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function lf(e){e._valueTracker||(e._valueTracker=K5(e))}function Y2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Z2(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function um(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lx(e,t){var n=t.checked;return Ss({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Wj(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=so(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function X2(e,t){t=t.checked,t!=null&&ab(e,"checked",t,!1)}function Ix(e,t){X2(e,t);var n=so(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mx(e,t.type,n):t.hasOwnProperty("defaultValue")&&Mx(e,t.type,so(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gj(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Mx(e,t,n){(t!=="number"||um(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var au=Array.isArray;function ac(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+so(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Dx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return Ss({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Kj(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ge(92));if(au(n)){if(1<n.length)throw Error(Ge(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:so(n)}}function J2(e,t){var n=so(t.value),r=so(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Zj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Q2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Q2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cf,eC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cf=cf||document.createElement("div"),cf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ru(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z5=["Webkit","ms","Moz","O"];Object.keys(hu).forEach(function(e){Z5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),hu[t]=hu[e]})});function tC(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||hu.hasOwnProperty(e)&&hu[e]?(""+t).trim():t+"px"}function sC(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=tC(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Y5=Ss({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $x(e,t){if(t){if(Y5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ge(62))}}function Bx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zx=null;function cb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vx=null,ic=null,oc=null;function Yj(e){if(e=_h(e)){if(typeof Vx!="function")throw Error(Ge(280));var t=e.stateNode;t&&(t=Sp(t),Vx(e.stateNode,e.type,t))}}function nC(e){ic?oc?oc.push(e):oc=[e]:ic=e}function rC(){if(ic){var e=ic,t=oc;if(oc=ic=null,Yj(e),t)for(e=0;e<t.length;e++)Yj(t[e])}}function aC(e,t){return e(t)}function iC(){}var pv=!1;function oC(e,t,n){if(pv)return e(t,n);pv=!0;try{return aC(e,t,n)}finally{pv=!1,(ic!==null||oc!==null)&&(iC(),rC())}}function Lu(e,t){var n=e.stateNode;if(n===null)return null;var r=Sp(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ge(231,t,typeof n));return n}var Ux=!1;if(ii)try{var $d={};Object.defineProperty($d,"passive",{get:function(){Ux=!0}}),window.addEventListener("test",$d,$d),window.removeEventListener("test",$d,$d)}catch{Ux=!1}function X5(e,t,n,r,a,i,o,l,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(f){this.onError(f)}}var fu=!1,hm=null,fm=!1,qx=null,J5={onError:function(e){fu=!0,hm=e}};function Q5(e,t,n,r,a,i,o,l,d){fu=!1,hm=null,X5.apply(J5,arguments)}function e3(e,t,n,r,a,i,o,l,d){if(Q5.apply(this,arguments),fu){if(fu){var h=hm;fu=!1,hm=null}else throw Error(Ge(198));fm||(fm=!0,qx=h)}}function yl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function lC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xj(e){if(yl(e)!==e)throw Error(Ge(188))}function t3(e){var t=e.alternate;if(!t){if(t=yl(e),t===null)throw Error(Ge(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Xj(a),e;if(i===r)return Xj(a),t;i=i.sibling}throw Error(Ge(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(Ge(189))}}if(n.alternate!==r)throw Error(Ge(190))}if(n.tag!==3)throw Error(Ge(188));return n.stateNode.current===n?e:t}function cC(e){return e=t3(e),e!==null?dC(e):null}function dC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dC(e);if(t!==null)return t;e=e.sibling}return null}var uC=cr.unstable_scheduleCallback,Jj=cr.unstable_cancelCallback,s3=cr.unstable_shouldYield,n3=cr.unstable_requestPaint,Ms=cr.unstable_now,r3=cr.unstable_getCurrentPriorityLevel,db=cr.unstable_ImmediatePriority,hC=cr.unstable_UserBlockingPriority,mm=cr.unstable_NormalPriority,a3=cr.unstable_LowPriority,fC=cr.unstable_IdlePriority,wp=null,Na=null;function i3(e){if(Na&&typeof Na.onCommitFiberRoot=="function")try{Na.onCommitFiberRoot(wp,e,void 0,(e.current.flags&128)===128)}catch{}}var Kr=Math.clz32?Math.clz32:c3,o3=Math.log,l3=Math.LN2;function c3(e){return e>>>=0,e===0?32:31-(o3(e)/l3|0)|0}var df=64,uf=4194304;function iu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=iu(l):(i&=o,i!==0&&(r=iu(i)))}else o=n&~a,o!==0?r=iu(o):i!==0&&(r=iu(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Kr(t),a=1<<n,r|=e[n],t&=~a;return r}function d3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u3(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Kr(i),l=1<<o,d=a[o];d===-1?(!(l&n)||l&r)&&(a[o]=d3(l,t)):d<=t&&(e.expiredLanes|=l),i&=~l}}function Hx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mC(){var e=df;return df<<=1,!(df&4194240)&&(df=64),e}function gv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kr(t),e[t]=n}function h3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Kr(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function ub(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Kr(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var ts=0;function pC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gC,hb,vC,xC,yC,Wx=!1,hf=[],Wi=null,Gi=null,Ki=null,Iu=new Map,Mu=new Map,Ii=[],f3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qj(e,t){switch(e){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":Iu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(t.pointerId)}}function Bd(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=_h(t),t!==null&&hb(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function m3(e,t,n,r,a){switch(t){case"focusin":return Wi=Bd(Wi,e,t,n,r,a),!0;case"dragenter":return Gi=Bd(Gi,e,t,n,r,a),!0;case"mouseover":return Ki=Bd(Ki,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Iu.set(i,Bd(Iu.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Mu.set(i,Bd(Mu.get(i)||null,e,t,n,r,a)),!0}return!1}function bC(e){var t=Io(e.target);if(t!==null){var n=yl(t);if(n!==null){if(t=n.tag,t===13){if(t=lC(n),t!==null){e.blockedOn=t,yC(e.priority,function(){vC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);zx=r,n.target.dispatchEvent(r),zx=null}else return t=_h(n),t!==null&&hb(t),e.blockedOn=n,!1;t.shift()}return!0}function eN(e,t,n){Bf(e)&&n.delete(t)}function p3(){Wx=!1,Wi!==null&&Bf(Wi)&&(Wi=null),Gi!==null&&Bf(Gi)&&(Gi=null),Ki!==null&&Bf(Ki)&&(Ki=null),Iu.forEach(eN),Mu.forEach(eN)}function zd(e,t){e.blockedOn===t&&(e.blockedOn=null,Wx||(Wx=!0,cr.unstable_scheduleCallback(cr.unstable_NormalPriority,p3)))}function Du(e){function t(a){return zd(a,e)}if(0<hf.length){zd(hf[0],e);for(var n=1;n<hf.length;n++){var r=hf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Wi!==null&&zd(Wi,e),Gi!==null&&zd(Gi,e),Ki!==null&&zd(Ki,e),Iu.forEach(t),Mu.forEach(t),n=0;n<Ii.length;n++)r=Ii[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ii.length&&(n=Ii[0],n.blockedOn===null);)bC(n),n.blockedOn===null&&Ii.shift()}var lc=xi.ReactCurrentBatchConfig,gm=!0;function g3(e,t,n,r){var a=ts,i=lc.transition;lc.transition=null;try{ts=1,fb(e,t,n,r)}finally{ts=a,lc.transition=i}}function v3(e,t,n,r){var a=ts,i=lc.transition;lc.transition=null;try{ts=4,fb(e,t,n,r)}finally{ts=a,lc.transition=i}}function fb(e,t,n,r){if(gm){var a=Gx(e,t,n,r);if(a===null)kv(e,t,r,vm,n),Qj(e,r);else if(m3(a,e,t,n,r))r.stopPropagation();else if(Qj(e,r),t&4&&-1<f3.indexOf(e)){for(;a!==null;){var i=_h(a);if(i!==null&&gC(i),i=Gx(e,t,n,r),i===null&&kv(e,t,r,vm,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else kv(e,t,r,null,n)}}var vm=null;function Gx(e,t,n,r){if(vm=null,e=cb(r),e=Io(e),e!==null)if(t=yl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=lC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vm=e,null}function wC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r3()){case db:return 1;case hC:return 4;case mm:case a3:return 16;case fC:return 536870912;default:return 16}default:return 16}}var Vi=null,mb=null,zf=null;function _C(){if(zf)return zf;var e,t=mb,n=t.length,r,a="value"in Vi?Vi.value:Vi.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return zf=a.slice(e,1<r?1-r:void 0)}function Vf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ff(){return!0}function tN(){return!1}function hr(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ff:tN,this.isPropagationStopped=tN,this}return Ss(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ff)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ff)},persist:function(){},isPersistent:ff}),t}var rd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pb=hr(rd),wh=Ss({},rd,{view:0,detail:0}),x3=hr(wh),vv,xv,Vd,_p=Ss({},wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vd&&(Vd&&e.type==="mousemove"?(vv=e.screenX-Vd.screenX,xv=e.screenY-Vd.screenY):xv=vv=0,Vd=e),vv)},movementY:function(e){return"movementY"in e?e.movementY:xv}}),sN=hr(_p),y3=Ss({},_p,{dataTransfer:0}),b3=hr(y3),w3=Ss({},wh,{relatedTarget:0}),yv=hr(w3),_3=Ss({},rd,{animationName:0,elapsedTime:0,pseudoElement:0}),j3=hr(_3),N3=Ss({},rd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),S3=hr(N3),k3=Ss({},rd,{data:0}),nN=hr(k3),C3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=T3[e])?!!t[e]:!1}function gb(){return P3}var A3=Ss({},wh,{key:function(e){if(e.key){var t=C3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?E3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gb,charCode:function(e){return e.type==="keypress"?Vf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),O3=hr(A3),R3=Ss({},_p,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rN=hr(R3),L3=Ss({},wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gb}),I3=hr(L3),M3=Ss({},rd,{propertyName:0,elapsedTime:0,pseudoElement:0}),D3=hr(M3),F3=Ss({},_p,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$3=hr(F3),B3=[9,13,27,32],vb=ii&&"CompositionEvent"in window,mu=null;ii&&"documentMode"in document&&(mu=document.documentMode);var z3=ii&&"TextEvent"in window&&!mu,jC=ii&&(!vb||mu&&8<mu&&11>=mu),aN=" ",iN=!1;function NC(e,t){switch(e){case"keyup":return B3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ul=!1;function V3(e,t){switch(e){case"compositionend":return SC(t);case"keypress":return t.which!==32?null:(iN=!0,aN);case"textInput":return e=t.data,e===aN&&iN?null:e;default:return null}}function U3(e,t){if(Ul)return e==="compositionend"||!vb&&NC(e,t)?(e=_C(),zf=mb=Vi=null,Ul=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jC&&t.locale!=="ko"?null:t.data;default:return null}}var q3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!q3[e.type]:t==="textarea"}function kC(e,t,n,r){nC(r),t=xm(t,"onChange"),0<t.length&&(n=new pb("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var pu=null,Fu=null;function H3(e){DC(e,0)}function jp(e){var t=Wl(e);if(Y2(t))return e}function W3(e,t){if(e==="change")return t}var CC=!1;if(ii){var bv;if(ii){var wv="oninput"in document;if(!wv){var lN=document.createElement("div");lN.setAttribute("oninput","return;"),wv=typeof lN.oninput=="function"}bv=wv}else bv=!1;CC=bv&&(!document.documentMode||9<document.documentMode)}function cN(){pu&&(pu.detachEvent("onpropertychange",EC),Fu=pu=null)}function EC(e){if(e.propertyName==="value"&&jp(Fu)){var t=[];kC(t,Fu,e,cb(e)),oC(H3,t)}}function G3(e,t,n){e==="focusin"?(cN(),pu=t,Fu=n,pu.attachEvent("onpropertychange",EC)):e==="focusout"&&cN()}function K3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jp(Fu)}function Z3(e,t){if(e==="click")return jp(t)}function Y3(e,t){if(e==="input"||e==="change")return jp(t)}function X3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ea=typeof Object.is=="function"?Object.is:X3;function $u(e,t){if(ea(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Tx.call(t,a)||!ea(e[a],t[a]))return!1}return!0}function dN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uN(e,t){var n=dN(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dN(n)}}function TC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?TC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function PC(){for(var e=window,t=um();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=um(e.document)}return t}function xb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function J3(e){var t=PC(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&TC(n.ownerDocument.documentElement,n)){if(r!==null&&xb(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=uN(n,i);var o=uN(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Q3=ii&&"documentMode"in document&&11>=document.documentMode,ql=null,Kx=null,gu=null,Zx=!1;function hN(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zx||ql==null||ql!==um(r)||(r=ql,"selectionStart"in r&&xb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gu&&$u(gu,r)||(gu=r,r=xm(Kx,"onSelect"),0<r.length&&(t=new pb("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ql)))}function mf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hl={animationend:mf("Animation","AnimationEnd"),animationiteration:mf("Animation","AnimationIteration"),animationstart:mf("Animation","AnimationStart"),transitionend:mf("Transition","TransitionEnd")},_v={},AC={};ii&&(AC=document.createElement("div").style,"AnimationEvent"in window||(delete Hl.animationend.animation,delete Hl.animationiteration.animation,delete Hl.animationstart.animation),"TransitionEvent"in window||delete Hl.transitionend.transition);function Np(e){if(_v[e])return _v[e];if(!Hl[e])return e;var t=Hl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in AC)return _v[e]=t[n];return e}var OC=Np("animationend"),RC=Np("animationiteration"),LC=Np("animationstart"),IC=Np("transitionend"),MC=new Map,fN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ho(e,t){MC.set(e,t),xl(t,[e])}for(var jv=0;jv<fN.length;jv++){var Nv=fN[jv],eD=Nv.toLowerCase(),tD=Nv[0].toUpperCase()+Nv.slice(1);ho(eD,"on"+tD)}ho(OC,"onAnimationEnd");ho(RC,"onAnimationIteration");ho(LC,"onAnimationStart");ho("dblclick","onDoubleClick");ho("focusin","onFocus");ho("focusout","onBlur");ho(IC,"onTransitionEnd");Oc("onMouseEnter",["mouseout","mouseover"]);Oc("onMouseLeave",["mouseout","mouseover"]);Oc("onPointerEnter",["pointerout","pointerover"]);Oc("onPointerLeave",["pointerout","pointerover"]);xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sD=new Set("cancel close invalid load scroll toggle".split(" ").concat(ou));function mN(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,e3(r,t,void 0,e),e.currentTarget=null}function DC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],d=l.instance,h=l.currentTarget;if(l=l.listener,d!==i&&a.isPropagationStopped())break e;mN(a,l,h),i=d}else for(o=0;o<r.length;o++){if(l=r[o],d=l.instance,h=l.currentTarget,l=l.listener,d!==i&&a.isPropagationStopped())break e;mN(a,l,h),i=d}}}if(fm)throw e=qx,fm=!1,qx=null,e}function cs(e,t){var n=t[ey];n===void 0&&(n=t[ey]=new Set);var r=e+"__bubble";n.has(r)||(FC(t,e,2,!1),n.add(r))}function Sv(e,t,n){var r=0;t&&(r|=4),FC(n,e,r,t)}var pf="_reactListening"+Math.random().toString(36).slice(2);function Bu(e){if(!e[pf]){e[pf]=!0,H2.forEach(function(n){n!=="selectionchange"&&(sD.has(n)||Sv(n,!1,e),Sv(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pf]||(t[pf]=!0,Sv("selectionchange",!1,t))}}function FC(e,t,n,r){switch(wC(t)){case 1:var a=g3;break;case 4:a=v3;break;default:a=fb}n=a.bind(null,t,n,e),a=void 0,!Ux||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function kv(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Io(l),o===null)return;if(d=o.tag,d===5||d===6){r=i=o;continue e}l=l.parentNode}}r=r.return}oC(function(){var h=i,f=cb(n),u=[];e:{var m=MC.get(e);if(m!==void 0){var p=pb,w=e;switch(e){case"keypress":if(Vf(n)===0)break e;case"keydown":case"keyup":p=O3;break;case"focusin":w="focus",p=yv;break;case"focusout":w="blur",p=yv;break;case"beforeblur":case"afterblur":p=yv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=sN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=b3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=I3;break;case OC:case RC:case LC:p=j3;break;case IC:p=D3;break;case"scroll":p=x3;break;case"wheel":p=$3;break;case"copy":case"cut":case"paste":p=S3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=rN}var v=(t&4)!==0,x=!v&&e==="scroll",y=v?m!==null?m+"Capture":null:m;v=[];for(var b=h,j;b!==null;){j=b;var N=j.stateNode;if(j.tag===5&&N!==null&&(j=N,y!==null&&(N=Lu(b,y),N!=null&&v.push(zu(b,N,j)))),x)break;b=b.return}0<v.length&&(m=new p(m,w,null,n,f),u.push({event:m,listeners:v}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==zx&&(w=n.relatedTarget||n.fromElement)&&(Io(w)||w[oi]))break e;if((p||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=h,w=w?Io(w):null,w!==null&&(x=yl(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=h),p!==w)){if(v=sN,N="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=rN,N="onPointerLeave",y="onPointerEnter",b="pointer"),x=p==null?m:Wl(p),j=w==null?m:Wl(w),m=new v(N,b+"leave",p,n,f),m.target=x,m.relatedTarget=j,N=null,Io(f)===h&&(v=new v(y,b+"enter",w,n,f),v.target=j,v.relatedTarget=x,N=v),x=N,p&&w)t:{for(v=p,y=w,b=0,j=v;j;j=Ol(j))b++;for(j=0,N=y;N;N=Ol(N))j++;for(;0<b-j;)v=Ol(v),b--;for(;0<j-b;)y=Ol(y),j--;for(;b--;){if(v===y||y!==null&&v===y.alternate)break t;v=Ol(v),y=Ol(y)}v=null}else v=null;p!==null&&pN(u,m,p,v,!1),w!==null&&x!==null&&pN(u,x,w,v,!0)}}e:{if(m=h?Wl(h):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=W3;else if(oN(m))if(CC)S=Y3;else{S=K3;var P=G3}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=Z3);if(S&&(S=S(e,h))){kC(u,S,n,f);break e}P&&P(e,m,h),e==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&Mx(m,"number",m.value)}switch(P=h?Wl(h):window,e){case"focusin":(oN(P)||P.contentEditable==="true")&&(ql=P,Kx=h,gu=null);break;case"focusout":gu=Kx=ql=null;break;case"mousedown":Zx=!0;break;case"contextmenu":case"mouseup":case"dragend":Zx=!1,hN(u,n,f);break;case"selectionchange":if(Q3)break;case"keydown":case"keyup":hN(u,n,f)}var T;if(vb)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ul?NC(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(jC&&n.locale!=="ko"&&(Ul||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ul&&(T=_C()):(Vi=f,mb="value"in Vi?Vi.value:Vi.textContent,Ul=!0)),P=xm(h,E),0<P.length&&(E=new nN(E,e,null,n,f),u.push({event:E,listeners:P}),T?E.data=T:(T=SC(n),T!==null&&(E.data=T)))),(T=z3?V3(e,n):U3(e,n))&&(h=xm(h,"onBeforeInput"),0<h.length&&(f=new nN("onBeforeInput","beforeinput",null,n,f),u.push({event:f,listeners:h}),f.data=T))}DC(u,t)})}function zu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xm(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Lu(e,n),i!=null&&r.unshift(zu(e,i,a)),i=Lu(e,t),i!=null&&r.push(zu(e,i,a))),e=e.return}return r}function Ol(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pN(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,d=l.alternate,h=l.stateNode;if(d!==null&&d===r)break;l.tag===5&&h!==null&&(l=h,a?(d=Lu(n,i),d!=null&&o.unshift(zu(n,d,l))):a||(d=Lu(n,i),d!=null&&o.push(zu(n,d,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var nD=/\r\n?/g,rD=/\u0000|\uFFFD/g;function gN(e){return(typeof e=="string"?e:""+e).replace(nD,`
`).replace(rD,"")}function gf(e,t,n){if(t=gN(t),gN(e)!==t&&n)throw Error(Ge(425))}function ym(){}var Yx=null,Xx=null;function Jx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qx=typeof setTimeout=="function"?setTimeout:void 0,aD=typeof clearTimeout=="function"?clearTimeout:void 0,vN=typeof Promise=="function"?Promise:void 0,iD=typeof queueMicrotask=="function"?queueMicrotask:typeof vN<"u"?function(e){return vN.resolve(null).then(e).catch(oD)}:Qx;function oD(e){setTimeout(function(){throw e})}function Cv(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Du(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Du(t)}function Zi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ad=Math.random().toString(36).slice(2),xa="__reactFiber$"+ad,Vu="__reactProps$"+ad,oi="__reactContainer$"+ad,ey="__reactEvents$"+ad,lD="__reactListeners$"+ad,cD="__reactHandles$"+ad;function Io(e){var t=e[xa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[oi]||n[xa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xN(e);e!==null;){if(n=e[xa])return n;e=xN(e)}return t}e=n,n=e.parentNode}return null}function _h(e){return e=e[xa]||e[oi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ge(33))}function Sp(e){return e[Vu]||null}var ty=[],Gl=-1;function fo(e){return{current:e}}function fs(e){0>Gl||(e.current=ty[Gl],ty[Gl]=null,Gl--)}function os(e,t){Gl++,ty[Gl]=e.current,e.current=t}var no={},_n=fo(no),Yn=fo(!1),al=no;function Rc(e,t){var n=e.type.contextTypes;if(!n)return no;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Xn(e){return e=e.childContextTypes,e!=null}function bm(){fs(Yn),fs(_n)}function yN(e,t,n){if(_n.current!==no)throw Error(Ge(168));os(_n,t),os(Yn,n)}function $C(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Ge(108,G5(e)||"Unknown",a));return Ss({},n,r)}function wm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||no,al=_n.current,os(_n,e),os(Yn,Yn.current),!0}function bN(e,t,n){var r=e.stateNode;if(!r)throw Error(Ge(169));n?(e=$C(e,t,al),r.__reactInternalMemoizedMergedChildContext=e,fs(Yn),fs(_n),os(_n,e)):fs(Yn),os(Yn,n)}var Xa=null,kp=!1,Ev=!1;function BC(e){Xa===null?Xa=[e]:Xa.push(e)}function dD(e){kp=!0,BC(e)}function mo(){if(!Ev&&Xa!==null){Ev=!0;var e=0,t=ts;try{var n=Xa;for(ts=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xa=null,kp=!1}catch(a){throw Xa!==null&&(Xa=Xa.slice(e+1)),uC(db,mo),a}finally{ts=t,Ev=!1}}return null}var Kl=[],Zl=0,_m=null,jm=0,br=[],wr=0,il=null,ti=1,si="";function Eo(e,t){Kl[Zl++]=jm,Kl[Zl++]=_m,_m=e,jm=t}function zC(e,t,n){br[wr++]=ti,br[wr++]=si,br[wr++]=il,il=e;var r=ti;e=si;var a=32-Kr(r)-1;r&=~(1<<a),n+=1;var i=32-Kr(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,ti=1<<32-Kr(t)+a|n<<a|r,si=i+e}else ti=1<<i|n<<a|r,si=e}function yb(e){e.return!==null&&(Eo(e,1),zC(e,1,0))}function bb(e){for(;e===_m;)_m=Kl[--Zl],Kl[Zl]=null,jm=Kl[--Zl],Kl[Zl]=null;for(;e===il;)il=br[--wr],br[wr]=null,si=br[--wr],br[wr]=null,ti=br[--wr],br[wr]=null}var or=null,ir=null,gs=!1,Vr=null;function VC(e,t){var n=_r(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function wN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,or=e,ir=Zi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,or=e,ir=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=il!==null?{id:ti,overflow:si}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_r(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,or=e,ir=null,!0):!1;default:return!1}}function sy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ny(e){if(gs){var t=ir;if(t){var n=t;if(!wN(e,t)){if(sy(e))throw Error(Ge(418));t=Zi(n.nextSibling);var r=or;t&&wN(e,t)?VC(r,n):(e.flags=e.flags&-4097|2,gs=!1,or=e)}}else{if(sy(e))throw Error(Ge(418));e.flags=e.flags&-4097|2,gs=!1,or=e}}}function _N(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;or=e}function vf(e){if(e!==or)return!1;if(!gs)return _N(e),gs=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jx(e.type,e.memoizedProps)),t&&(t=ir)){if(sy(e))throw UC(),Error(Ge(418));for(;t;)VC(e,t),t=Zi(t.nextSibling)}if(_N(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ir=Zi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ir=null}}else ir=or?Zi(e.stateNode.nextSibling):null;return!0}function UC(){for(var e=ir;e;)e=Zi(e.nextSibling)}function Lc(){ir=or=null,gs=!1}function wb(e){Vr===null?Vr=[e]:Vr.push(e)}var uD=xi.ReactCurrentBatchConfig;function Ud(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ge(309));var r=n.stateNode}if(!r)throw Error(Ge(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ge(284));if(!n._owner)throw Error(Ge(290,e))}return e}function xf(e,t){throw e=Object.prototype.toString.call(t),Error(Ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jN(e){var t=e._init;return t(e._payload)}function qC(e){function t(y,b){if(e){var j=y.deletions;j===null?(y.deletions=[b],y.flags|=16):j.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function a(y,b){return y=Qi(y,b),y.index=0,y.sibling=null,y}function i(y,b,j){return y.index=j,e?(j=y.alternate,j!==null?(j=j.index,j<b?(y.flags|=2,b):j):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,j,N){return b===null||b.tag!==6?(b=Iv(j,y.mode,N),b.return=y,b):(b=a(b,j),b.return=y,b)}function d(y,b,j,N){var S=j.type;return S===Vl?f(y,b,j.props.children,N,j.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Oi&&jN(S)===b.type)?(N=a(b,j.props),N.ref=Ud(y,b,j),N.return=y,N):(N=Zf(j.type,j.key,j.props,null,y.mode,N),N.ref=Ud(y,b,j),N.return=y,N)}function h(y,b,j,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=Mv(j,y.mode,N),b.return=y,b):(b=a(b,j.children||[]),b.return=y,b)}function f(y,b,j,N,S){return b===null||b.tag!==7?(b=Zo(j,y.mode,N,S),b.return=y,b):(b=a(b,j),b.return=y,b)}function u(y,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Iv(""+b,y.mode,j),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case of:return j=Zf(b.type,b.key,b.props,null,y.mode,j),j.ref=Ud(y,null,b),j.return=y,j;case zl:return b=Mv(b,y.mode,j),b.return=y,b;case Oi:var N=b._init;return u(y,N(b._payload),j)}if(au(b)||Fd(b))return b=Zo(b,y.mode,j,null),b.return=y,b;xf(y,b)}return null}function m(y,b,j,N){var S=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return S!==null?null:l(y,b,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case of:return j.key===S?d(y,b,j,N):null;case zl:return j.key===S?h(y,b,j,N):null;case Oi:return S=j._init,m(y,b,S(j._payload),N)}if(au(j)||Fd(j))return S!==null?null:f(y,b,j,N,null);xf(y,j)}return null}function p(y,b,j,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(j)||null,l(b,y,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case of:return y=y.get(N.key===null?j:N.key)||null,d(b,y,N,S);case zl:return y=y.get(N.key===null?j:N.key)||null,h(b,y,N,S);case Oi:var P=N._init;return p(y,b,j,P(N._payload),S)}if(au(N)||Fd(N))return y=y.get(j)||null,f(b,y,N,S,null);xf(b,N)}return null}function w(y,b,j,N){for(var S=null,P=null,T=b,E=b=0,I=null;T!==null&&E<j.length;E++){T.index>E?(I=T,T=null):I=T.sibling;var O=m(y,T,j[E],N);if(O===null){T===null&&(T=I);break}e&&T&&O.alternate===null&&t(y,T),b=i(O,b,E),P===null?S=O:P.sibling=O,P=O,T=I}if(E===j.length)return n(y,T),gs&&Eo(y,E),S;if(T===null){for(;E<j.length;E++)T=u(y,j[E],N),T!==null&&(b=i(T,b,E),P===null?S=T:P.sibling=T,P=T);return gs&&Eo(y,E),S}for(T=r(y,T);E<j.length;E++)I=p(T,y,E,j[E],N),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?E:I.key),b=i(I,b,E),P===null?S=I:P.sibling=I,P=I);return e&&T.forEach(function(R){return t(y,R)}),gs&&Eo(y,E),S}function v(y,b,j,N){var S=Fd(j);if(typeof S!="function")throw Error(Ge(150));if(j=S.call(j),j==null)throw Error(Ge(151));for(var P=S=null,T=b,E=b=0,I=null,O=j.next();T!==null&&!O.done;E++,O=j.next()){T.index>E?(I=T,T=null):I=T.sibling;var R=m(y,T,O.value,N);if(R===null){T===null&&(T=I);break}e&&T&&R.alternate===null&&t(y,T),b=i(R,b,E),P===null?S=R:P.sibling=R,P=R,T=I}if(O.done)return n(y,T),gs&&Eo(y,E),S;if(T===null){for(;!O.done;E++,O=j.next())O=u(y,O.value,N),O!==null&&(b=i(O,b,E),P===null?S=O:P.sibling=O,P=O);return gs&&Eo(y,E),S}for(T=r(y,T);!O.done;E++,O=j.next())O=p(T,y,E,O.value,N),O!==null&&(e&&O.alternate!==null&&T.delete(O.key===null?E:O.key),b=i(O,b,E),P===null?S=O:P.sibling=O,P=O);return e&&T.forEach(function(C){return t(y,C)}),gs&&Eo(y,E),S}function x(y,b,j,N){if(typeof j=="object"&&j!==null&&j.type===Vl&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case of:e:{for(var S=j.key,P=b;P!==null;){if(P.key===S){if(S=j.type,S===Vl){if(P.tag===7){n(y,P.sibling),b=a(P,j.props.children),b.return=y,y=b;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Oi&&jN(S)===P.type){n(y,P.sibling),b=a(P,j.props),b.ref=Ud(y,P,j),b.return=y,y=b;break e}n(y,P);break}else t(y,P);P=P.sibling}j.type===Vl?(b=Zo(j.props.children,y.mode,N,j.key),b.return=y,y=b):(N=Zf(j.type,j.key,j.props,null,y.mode,N),N.ref=Ud(y,b,j),N.return=y,y=N)}return o(y);case zl:e:{for(P=j.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){n(y,b.sibling),b=a(b,j.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=Mv(j,y.mode,N),b.return=y,y=b}return o(y);case Oi:return P=j._init,x(y,b,P(j._payload),N)}if(au(j))return w(y,b,j,N);if(Fd(j))return v(y,b,j,N);xf(y,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,b!==null&&b.tag===6?(n(y,b.sibling),b=a(b,j),b.return=y,y=b):(n(y,b),b=Iv(j,y.mode,N),b.return=y,y=b),o(y)):n(y,b)}return x}var Ic=qC(!0),HC=qC(!1),Nm=fo(null),Sm=null,Yl=null,_b=null;function jb(){_b=Yl=Sm=null}function Nb(e){var t=Nm.current;fs(Nm),e._currentValue=t}function ry(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cc(e,t){Sm=e,_b=Yl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gn=!0),e.firstContext=null)}function kr(e){var t=e._currentValue;if(_b!==e)if(e={context:e,memoizedValue:t,next:null},Yl===null){if(Sm===null)throw Error(Ge(308));Yl=e,Sm.dependencies={lanes:0,firstContext:e}}else Yl=Yl.next=e;return t}var Mo=null;function Sb(e){Mo===null?Mo=[e]:Mo.push(e)}function WC(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Sb(t)):(n.next=a.next,a.next=n),t.interleaved=n,li(e,r)}function li(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ri=!1;function kb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ri(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yi(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,$t&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,li(e,n)}return a=r.interleaved,a===null?(t.next=t,Sb(r)):(t.next=a.next,a.next=t),r.interleaved=t,li(e,n)}function Uf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ub(e,n)}}function NN(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function km(e,t,n,r){var a=e.updateQueue;Ri=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var d=l,h=d.next;d.next=null,o===null?i=h:o.next=h,o=d;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=d))}if(i!==null){var u=a.baseState;o=0,f=h=d=null,l=i;do{var m=l.lane,p=l.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,v=l;switch(m=t,p=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){u=w.call(p,u,m);break e}u=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,m=typeof w=="function"?w.call(p,u,m):w,m==null)break e;u=Ss({},u,m);break e;case 2:Ri=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=p,d=u):f=f.next=p,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(f===null&&(d=u),a.baseState=d,a.firstBaseUpdate=h,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);ll|=o,e.lanes=o,e.memoizedState=u}}function SN(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ge(191,a));a.call(r)}}}var jh={},Sa=fo(jh),Uu=fo(jh),qu=fo(jh);function Do(e){if(e===jh)throw Error(Ge(174));return e}function Cb(e,t){switch(os(qu,t),os(Uu,e),os(Sa,jh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fx(t,e)}fs(Sa),os(Sa,t)}function Mc(){fs(Sa),fs(Uu),fs(qu)}function KC(e){Do(qu.current);var t=Do(Sa.current),n=Fx(t,e.type);t!==n&&(os(Uu,e),os(Sa,n))}function Eb(e){Uu.current===e&&(fs(Sa),fs(Uu))}var ws=fo(0);function Cm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Tv=[];function Tb(){for(var e=0;e<Tv.length;e++)Tv[e]._workInProgressVersionPrimary=null;Tv.length=0}var qf=xi.ReactCurrentDispatcher,Pv=xi.ReactCurrentBatchConfig,ol=0,js=null,Ws=null,tn=null,Em=!1,vu=!1,Hu=0,hD=0;function pn(){throw Error(Ge(321))}function Pb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ea(e[n],t[n]))return!1;return!0}function Ab(e,t,n,r,a,i){if(ol=i,js=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qf.current=e===null||e.memoizedState===null?gD:vD,e=n(r,a),vu){i=0;do{if(vu=!1,Hu=0,25<=i)throw Error(Ge(301));i+=1,tn=Ws=null,t.updateQueue=null,qf.current=xD,e=n(r,a)}while(vu)}if(qf.current=Tm,t=Ws!==null&&Ws.next!==null,ol=0,tn=Ws=js=null,Em=!1,t)throw Error(Ge(300));return e}function Ob(){var e=Hu!==0;return Hu=0,e}function ma(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?js.memoizedState=tn=e:tn=tn.next=e,tn}function Cr(){if(Ws===null){var e=js.alternate;e=e!==null?e.memoizedState:null}else e=Ws.next;var t=tn===null?js.memoizedState:tn.next;if(t!==null)tn=t,Ws=e;else{if(e===null)throw Error(Ge(310));Ws=e,e={memoizedState:Ws.memoizedState,baseState:Ws.baseState,baseQueue:Ws.baseQueue,queue:Ws.queue,next:null},tn===null?js.memoizedState=tn=e:tn=tn.next=e}return tn}function Wu(e,t){return typeof t=="function"?t(e):t}function Av(e){var t=Cr(),n=t.queue;if(n===null)throw Error(Ge(311));n.lastRenderedReducer=e;var r=Ws,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,d=null,h=i;do{var f=h.lane;if((ol&f)===f)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var u={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(l=d=u,o=r):d=d.next=u,js.lanes|=f,ll|=f}h=h.next}while(h!==null&&h!==i);d===null?o=r:d.next=l,ea(r,t.memoizedState)||(Gn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,js.lanes|=i,ll|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ov(e){var t=Cr(),n=t.queue;if(n===null)throw Error(Ge(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);ea(i,t.memoizedState)||(Gn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ZC(){}function YC(e,t){var n=js,r=Cr(),a=t(),i=!ea(r.memoizedState,a);if(i&&(r.memoizedState=a,Gn=!0),r=r.queue,Rb(QC.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||tn!==null&&tn.memoizedState.tag&1){if(n.flags|=2048,Gu(9,JC.bind(null,n,r,a,t),void 0,null),nn===null)throw Error(Ge(349));ol&30||XC(n,t,a)}return a}function XC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=js.updateQueue,t===null?(t={lastEffect:null,stores:null},js.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function JC(e,t,n,r){t.value=n,t.getSnapshot=r,eE(t)&&tE(e)}function QC(e,t,n){return n(function(){eE(t)&&tE(e)})}function eE(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ea(e,n)}catch{return!0}}function tE(e){var t=li(e,1);t!==null&&Zr(t,e,1,-1)}function kN(e){var t=ma();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:e},t.queue=e,e=e.dispatch=pD.bind(null,js,e),[t.memoizedState,e]}function Gu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=js.updateQueue,t===null?(t={lastEffect:null,stores:null},js.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function sE(){return Cr().memoizedState}function Hf(e,t,n,r){var a=ma();js.flags|=e,a.memoizedState=Gu(1|t,n,void 0,r===void 0?null:r)}function Cp(e,t,n,r){var a=Cr();r=r===void 0?null:r;var i=void 0;if(Ws!==null){var o=Ws.memoizedState;if(i=o.destroy,r!==null&&Pb(r,o.deps)){a.memoizedState=Gu(t,n,i,r);return}}js.flags|=e,a.memoizedState=Gu(1|t,n,i,r)}function CN(e,t){return Hf(8390656,8,e,t)}function Rb(e,t){return Cp(2048,8,e,t)}function nE(e,t){return Cp(4,2,e,t)}function rE(e,t){return Cp(4,4,e,t)}function aE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iE(e,t,n){return n=n!=null?n.concat([e]):null,Cp(4,4,aE.bind(null,t,e),n)}function Lb(){}function oE(e,t){var n=Cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pb(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function lE(e,t){var n=Cr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pb(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function cE(e,t,n){return ol&21?(ea(n,t)||(n=mC(),js.lanes|=n,ll|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gn=!0),e.memoizedState=n)}function fD(e,t){var n=ts;ts=n!==0&&4>n?n:4,e(!0);var r=Pv.transition;Pv.transition={};try{e(!1),t()}finally{ts=n,Pv.transition=r}}function dE(){return Cr().memoizedState}function mD(e,t,n){var r=Ji(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uE(e))hE(t,n);else if(n=WC(e,t,n,r),n!==null){var a=Ln();Zr(n,e,r,a),fE(n,t,r)}}function pD(e,t,n){var r=Ji(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uE(e))hE(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,ea(l,o)){var d=t.interleaved;d===null?(a.next=a,Sb(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}n=WC(e,t,a,r),n!==null&&(a=Ln(),Zr(n,e,r,a),fE(n,t,r))}}function uE(e){var t=e.alternate;return e===js||t!==null&&t===js}function hE(e,t){vu=Em=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ub(e,n)}}var Tm={readContext:kr,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},gD={readContext:kr,useCallback:function(e,t){return ma().memoizedState=[e,t===void 0?null:t],e},useContext:kr,useEffect:CN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hf(4194308,4,aE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hf(4,2,e,t)},useMemo:function(e,t){var n=ma();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ma();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=mD.bind(null,js,e),[r.memoizedState,e]},useRef:function(e){var t=ma();return e={current:e},t.memoizedState=e},useState:kN,useDebugValue:Lb,useDeferredValue:function(e){return ma().memoizedState=e},useTransition:function(){var e=kN(!1),t=e[0];return e=fD.bind(null,e[1]),ma().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=js,a=ma();if(gs){if(n===void 0)throw Error(Ge(407));n=n()}else{if(n=t(),nn===null)throw Error(Ge(349));ol&30||XC(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,CN(QC.bind(null,r,i,e),[e]),r.flags|=2048,Gu(9,JC.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=ma(),t=nn.identifierPrefix;if(gs){var n=si,r=ti;n=(r&~(1<<32-Kr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Hu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=hD++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vD={readContext:kr,useCallback:oE,useContext:kr,useEffect:Rb,useImperativeHandle:iE,useInsertionEffect:nE,useLayoutEffect:rE,useMemo:lE,useReducer:Av,useRef:sE,useState:function(){return Av(Wu)},useDebugValue:Lb,useDeferredValue:function(e){var t=Cr();return cE(t,Ws.memoizedState,e)},useTransition:function(){var e=Av(Wu)[0],t=Cr().memoizedState;return[e,t]},useMutableSource:ZC,useSyncExternalStore:YC,useId:dE,unstable_isNewReconciler:!1},xD={readContext:kr,useCallback:oE,useContext:kr,useEffect:Rb,useImperativeHandle:iE,useInsertionEffect:nE,useLayoutEffect:rE,useMemo:lE,useReducer:Ov,useRef:sE,useState:function(){return Ov(Wu)},useDebugValue:Lb,useDeferredValue:function(e){var t=Cr();return Ws===null?t.memoizedState=e:cE(t,Ws.memoizedState,e)},useTransition:function(){var e=Ov(Wu)[0],t=Cr().memoizedState;return[e,t]},useMutableSource:ZC,useSyncExternalStore:YC,useId:dE,unstable_isNewReconciler:!1};function Dr(e,t){if(e&&e.defaultProps){t=Ss({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ay(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ss({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ep={isMounted:function(e){return(e=e._reactInternals)?yl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ln(),a=Ji(e),i=ri(r,a);i.payload=t,n!=null&&(i.callback=n),t=Yi(e,i,a),t!==null&&(Zr(t,e,a,r),Uf(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ln(),a=Ji(e),i=ri(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Yi(e,i,a),t!==null&&(Zr(t,e,a,r),Uf(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ln(),r=Ji(e),a=ri(n,r);a.tag=2,t!=null&&(a.callback=t),t=Yi(e,a,r),t!==null&&(Zr(t,e,r,n),Uf(t,e,r))}};function EN(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!$u(n,r)||!$u(a,i):!0}function mE(e,t,n){var r=!1,a=no,i=t.contextType;return typeof i=="object"&&i!==null?i=kr(i):(a=Xn(t)?al:_n.current,r=t.contextTypes,i=(r=r!=null)?Rc(e,a):no),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ep,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function TN(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ep.enqueueReplaceState(t,t.state,null)}function iy(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},kb(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=kr(i):(i=Xn(t)?al:_n.current,a.context=Rc(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ay(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ep.enqueueReplaceState(a,a.state,null),km(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Dc(e,t){try{var n="",r=t;do n+=W5(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Rv(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function oy(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yD=typeof WeakMap=="function"?WeakMap:Map;function pE(e,t,n){n=ri(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Am||(Am=!0,vy=r),oy(e,t)},n}function gE(e,t,n){n=ri(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){oy(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){oy(e,t),typeof r!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function PN(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new yD;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=RD.bind(null,e,t,n),t.then(e,e))}function AN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ON(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ri(-1,1),t.tag=2,Yi(n,t,1))),n.lanes|=1),e)}var bD=xi.ReactCurrentOwner,Gn=!1;function Cn(e,t,n,r){t.child=e===null?HC(t,null,n,r):Ic(t,e.child,n,r)}function RN(e,t,n,r,a){n=n.render;var i=t.ref;return cc(t,a),r=Ab(e,t,n,r,i,a),n=Ob(),e!==null&&!Gn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ci(e,t,a)):(gs&&n&&yb(t),t.flags|=1,Cn(e,t,r,a),t.child)}function LN(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!Vb(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,vE(e,t,i,r,a)):(e=Zf(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:$u,n(o,r)&&e.ref===t.ref)return ci(e,t,a)}return t.flags|=1,e=Qi(i,r),e.ref=t.ref,e.return=t,t.child=e}function vE(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if($u(i,r)&&e.ref===t.ref)if(Gn=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(Gn=!0);else return t.lanes=e.lanes,ci(e,t,a)}return ly(e,t,n,r,a)}function xE(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},os(Jl,sr),sr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,os(Jl,sr),sr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,os(Jl,sr),sr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,os(Jl,sr),sr|=r;return Cn(e,t,a,n),t.child}function yE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ly(e,t,n,r,a){var i=Xn(n)?al:_n.current;return i=Rc(t,i),cc(t,a),n=Ab(e,t,n,r,i,a),r=Ob(),e!==null&&!Gn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ci(e,t,a)):(gs&&r&&yb(t),t.flags|=1,Cn(e,t,n,a),t.child)}function IN(e,t,n,r,a){if(Xn(n)){var i=!0;wm(t)}else i=!1;if(cc(t,a),t.stateNode===null)Wf(e,t),mE(t,n,r),iy(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var d=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=kr(h):(h=Xn(n)?al:_n.current,h=Rc(t,h));var f=n.getDerivedStateFromProps,u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||d!==h)&&TN(t,o,r,h),Ri=!1;var m=t.memoizedState;o.state=m,km(t,r,o,a),d=t.memoizedState,l!==r||m!==d||Yn.current||Ri?(typeof f=="function"&&(ay(t,n,f,r),d=t.memoizedState),(l=Ri||EN(t,n,l,r,m,d,h))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,GC(e,t),l=t.memoizedProps,h=t.type===t.elementType?l:Dr(t.type,l),o.props=h,u=t.pendingProps,m=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=kr(d):(d=Xn(n)?al:_n.current,d=Rc(t,d));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||m!==d)&&TN(t,o,r,d),Ri=!1,m=t.memoizedState,o.state=m,km(t,r,o,a);var w=t.memoizedState;l!==u||m!==w||Yn.current||Ri?(typeof p=="function"&&(ay(t,n,p,r),w=t.memoizedState),(h=Ri||EN(t,n,h,r,m,w,d)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=d,r=h):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return cy(e,t,n,r,i,a)}function cy(e,t,n,r,a,i){yE(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&bN(t,n,!1),ci(e,t,i);r=t.stateNode,bD.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ic(t,e.child,null,i),t.child=Ic(t,null,l,i)):Cn(e,t,l,i),t.memoizedState=r.state,a&&bN(t,n,!0),t.child}function bE(e){var t=e.stateNode;t.pendingContext?yN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yN(e,t.context,!1),Cb(e,t.containerInfo)}function MN(e,t,n,r,a){return Lc(),wb(a),t.flags|=256,Cn(e,t,n,r),t.child}var dy={dehydrated:null,treeContext:null,retryLane:0};function uy(e){return{baseLanes:e,cachePool:null,transitions:null}}function wE(e,t,n){var r=t.pendingProps,a=ws.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),os(ws,a&1),e===null)return ny(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ap(o,r,0,null),e=Zo(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=uy(n),t.memoizedState=dy,e):Ib(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return wD(e,t,o,r,l,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Qi(a,d),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Qi(l,i):(i=Zo(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?uy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=dy,r}return i=e.child,e=i.sibling,r=Qi(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ib(e,t){return t=Ap({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yf(e,t,n,r){return r!==null&&wb(r),Ic(t,e.child,null,n),e=Ib(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wD(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Rv(Error(Ge(422))),yf(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Ap({mode:"visible",children:r.children},a,0,null),i=Zo(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ic(t,e.child,null,o),t.child.memoizedState=uy(o),t.memoizedState=dy,i);if(!(t.mode&1))return yf(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Ge(419)),r=Rv(i,r,void 0),yf(e,t,o,r)}if(l=(o&e.childLanes)!==0,Gn||l){if(r=nn,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,li(e,a),Zr(r,e,a,-1))}return zb(),r=Rv(Error(Ge(421))),yf(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=LD.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ir=Zi(a.nextSibling),or=t,gs=!0,Vr=null,e!==null&&(br[wr++]=ti,br[wr++]=si,br[wr++]=il,ti=e.id,si=e.overflow,il=t),t=Ib(t,r.children),t.flags|=4096,t)}function DN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ry(e.return,t,n)}function Lv(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function _E(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Cn(e,t,r.children,n),r=ws.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&DN(e,n,t);else if(e.tag===19)DN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(os(ws,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Cm(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Lv(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Cm(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Lv(t,!0,n,null,i);break;case"together":Lv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ci(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ll|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ge(153));if(t.child!==null){for(e=t.child,n=Qi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _D(e,t,n){switch(t.tag){case 3:bE(t),Lc();break;case 5:KC(t);break;case 1:Xn(t.type)&&wm(t);break;case 4:Cb(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;os(Nm,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(os(ws,ws.current&1),t.flags|=128,null):n&t.child.childLanes?wE(e,t,n):(os(ws,ws.current&1),e=ci(e,t,n),e!==null?e.sibling:null);os(ws,ws.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return _E(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),os(ws,ws.current),r)break;return null;case 22:case 23:return t.lanes=0,xE(e,t,n)}return ci(e,t,n)}var jE,hy,NE,SE;jE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hy=function(){};NE=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Do(Sa.current);var i=null;switch(n){case"input":a=Lx(e,a),r=Lx(e,r),i=[];break;case"select":a=Ss({},a,{value:void 0}),r=Ss({},r,{value:void 0}),i=[];break;case"textarea":a=Dx(e,a),r=Dx(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ym)}$x(n,r);var o;n=null;for(h in a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var l=a[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ou.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var d=r[h];if(l=a!=null?a[h]:void 0,r.hasOwnProperty(h)&&d!==l&&(d!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(i||(i=[]),i.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(i=i||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ou.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&cs("scroll",e),i||l===d||(i=[])):(i=i||[]).push(h,d))}n&&(i=i||[]).push("style",n);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};SE=function(e,t,n,r){n!==r&&(t.flags|=4)};function qd(e,t){if(!gs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function jD(e,t,n){var r=t.pendingProps;switch(bb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(t),null;case 1:return Xn(t.type)&&bm(),gn(t),null;case 3:return r=t.stateNode,Mc(),fs(Yn),fs(_n),Tb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(vf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vr!==null&&(by(Vr),Vr=null))),hy(e,t),gn(t),null;case 5:Eb(t);var a=Do(qu.current);if(n=t.type,e!==null&&t.stateNode!=null)NE(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ge(166));return gn(t),null}if(e=Do(Sa.current),vf(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[xa]=t,r[Vu]=i,e=(t.mode&1)!==0,n){case"dialog":cs("cancel",r),cs("close",r);break;case"iframe":case"object":case"embed":cs("load",r);break;case"video":case"audio":for(a=0;a<ou.length;a++)cs(ou[a],r);break;case"source":cs("error",r);break;case"img":case"image":case"link":cs("error",r),cs("load",r);break;case"details":cs("toggle",r);break;case"input":Wj(r,i),cs("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},cs("invalid",r);break;case"textarea":Kj(r,i),cs("invalid",r)}$x(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&gf(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&gf(r.textContent,l,e),a=["children",""+l]):Ou.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&cs("scroll",r)}switch(n){case"input":lf(r),Gj(r,i,!0);break;case"textarea":lf(r),Zj(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ym)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Q2(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[xa]=t,e[Vu]=r,jE(e,t,!1,!1),t.stateNode=e;e:{switch(o=Bx(n,r),n){case"dialog":cs("cancel",e),cs("close",e),a=r;break;case"iframe":case"object":case"embed":cs("load",e),a=r;break;case"video":case"audio":for(a=0;a<ou.length;a++)cs(ou[a],e);a=r;break;case"source":cs("error",e),a=r;break;case"img":case"image":case"link":cs("error",e),cs("load",e),a=r;break;case"details":cs("toggle",e),a=r;break;case"input":Wj(e,r),a=Lx(e,r),cs("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ss({},r,{value:void 0}),cs("invalid",e);break;case"textarea":Kj(e,r),a=Dx(e,r),cs("invalid",e);break;default:a=r}$x(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var d=l[i];i==="style"?sC(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&eC(e,d)):i==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ru(e,d):typeof d=="number"&&Ru(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ou.hasOwnProperty(i)?d!=null&&i==="onScroll"&&cs("scroll",e):d!=null&&ab(e,i,d,o))}switch(n){case"input":lf(e),Gj(e,r,!1);break;case"textarea":lf(e),Zj(e);break;case"option":r.value!=null&&e.setAttribute("value",""+so(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ac(e,!!r.multiple,i,!1):r.defaultValue!=null&&ac(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ym)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gn(t),null;case 6:if(e&&t.stateNode!=null)SE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ge(166));if(n=Do(qu.current),Do(Sa.current),vf(t)){if(r=t.stateNode,n=t.memoizedProps,r[xa]=t,(i=r.nodeValue!==n)&&(e=or,e!==null))switch(e.tag){case 3:gf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gf(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xa]=t,t.stateNode=r}return gn(t),null;case 13:if(fs(ws),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(gs&&ir!==null&&t.mode&1&&!(t.flags&128))UC(),Lc(),t.flags|=98560,i=!1;else if(i=vf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Ge(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ge(317));i[xa]=t}else Lc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gn(t),i=!1}else Vr!==null&&(by(Vr),Vr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ws.current&1?Gs===0&&(Gs=3):zb())),t.updateQueue!==null&&(t.flags|=4),gn(t),null);case 4:return Mc(),hy(e,t),e===null&&Bu(t.stateNode.containerInfo),gn(t),null;case 10:return Nb(t.type._context),gn(t),null;case 17:return Xn(t.type)&&bm(),gn(t),null;case 19:if(fs(ws),i=t.memoizedState,i===null)return gn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)qd(i,!1);else{if(Gs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Cm(e),o!==null){for(t.flags|=128,qd(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return os(ws,ws.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ms()>Fc&&(t.flags|=128,r=!0,qd(i,!1),t.lanes=4194304)}else{if(!r)if(e=Cm(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),qd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!gs)return gn(t),null}else 2*Ms()-i.renderingStartTime>Fc&&n!==1073741824&&(t.flags|=128,r=!0,qd(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ms(),t.sibling=null,n=ws.current,os(ws,r?n&1|2:n&1),t):(gn(t),null);case 22:case 23:return Bb(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?sr&1073741824&&(gn(t),t.subtreeFlags&6&&(t.flags|=8192)):gn(t),null;case 24:return null;case 25:return null}throw Error(Ge(156,t.tag))}function ND(e,t){switch(bb(t),t.tag){case 1:return Xn(t.type)&&bm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mc(),fs(Yn),fs(_n),Tb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Eb(t),null;case 13:if(fs(ws),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ge(340));Lc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fs(ws),null;case 4:return Mc(),null;case 10:return Nb(t.type._context),null;case 22:case 23:return Bb(),null;case 24:return null;default:return null}}var bf=!1,xn=!1,SD=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Xl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ts(e,t,r)}else n.current=null}function fy(e,t,n){try{n()}catch(r){Ts(e,t,r)}}var FN=!1;function kD(e,t){if(Yx=gm,e=PC(),xb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,d=-1,h=0,f=0,u=e,m=null;t:for(;;){for(var p;u!==n||a!==0&&u.nodeType!==3||(l=o+a),u!==i||r!==0&&u.nodeType!==3||(d=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(p=u.firstChild)!==null;)m=u,u=p;for(;;){if(u===e)break t;if(m===n&&++h===a&&(l=o),m===i&&++f===r&&(d=o),(p=u.nextSibling)!==null)break;u=m,m=u.parentNode}u=p}n=l===-1||d===-1?null:{start:l,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xx={focusedElem:e,selectionRange:n},gm=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){t=ot;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,x=w.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Dr(t.type,v),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(N){Ts(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}return w=FN,FN=!1,w}function xu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&fy(t,n,i)}a=a.next}while(a!==r)}}function Tp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function my(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function kE(e){var t=e.alternate;t!==null&&(e.alternate=null,kE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xa],delete t[Vu],delete t[ey],delete t[lD],delete t[cD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function CE(e){return e.tag===5||e.tag===3||e.tag===4}function $N(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||CE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function py(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ym));else if(r!==4&&(e=e.child,e!==null))for(py(e,t,n),e=e.sibling;e!==null;)py(e,t,n),e=e.sibling}function gy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(gy(e,t,n),e=e.sibling;e!==null;)gy(e,t,n),e=e.sibling}var ln=null,zr=!1;function Si(e,t,n){for(n=n.child;n!==null;)EE(e,t,n),n=n.sibling}function EE(e,t,n){if(Na&&typeof Na.onCommitFiberUnmount=="function")try{Na.onCommitFiberUnmount(wp,n)}catch{}switch(n.tag){case 5:xn||Xl(n,t);case 6:var r=ln,a=zr;ln=null,Si(e,t,n),ln=r,zr=a,ln!==null&&(zr?(e=ln,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ln.removeChild(n.stateNode));break;case 18:ln!==null&&(zr?(e=ln,n=n.stateNode,e.nodeType===8?Cv(e.parentNode,n):e.nodeType===1&&Cv(e,n),Du(e)):Cv(ln,n.stateNode));break;case 4:r=ln,a=zr,ln=n.stateNode.containerInfo,zr=!0,Si(e,t,n),ln=r,zr=a;break;case 0:case 11:case 14:case 15:if(!xn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fy(n,t,o),a=a.next}while(a!==r)}Si(e,t,n);break;case 1:if(!xn&&(Xl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ts(n,t,l)}Si(e,t,n);break;case 21:Si(e,t,n);break;case 22:n.mode&1?(xn=(r=xn)||n.memoizedState!==null,Si(e,t,n),xn=r):Si(e,t,n);break;default:Si(e,t,n)}}function BN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new SD),t.forEach(function(r){var a=ID.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Or(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ln=l.stateNode,zr=!1;break e;case 3:ln=l.stateNode.containerInfo,zr=!0;break e;case 4:ln=l.stateNode.containerInfo,zr=!0;break e}l=l.return}if(ln===null)throw Error(Ge(160));EE(i,o,a),ln=null,zr=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(h){Ts(a,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)TE(t,e),t=t.sibling}function TE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Or(t,e),ua(e),r&4){try{xu(3,e,e.return),Tp(3,e)}catch(v){Ts(e,e.return,v)}try{xu(5,e,e.return)}catch(v){Ts(e,e.return,v)}}break;case 1:Or(t,e),ua(e),r&512&&n!==null&&Xl(n,n.return);break;case 5:if(Or(t,e),ua(e),r&512&&n!==null&&Xl(n,n.return),e.flags&32){var a=e.stateNode;try{Ru(a,"")}catch(v){Ts(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&X2(a,i),Bx(l,o);var h=Bx(l,i);for(o=0;o<d.length;o+=2){var f=d[o],u=d[o+1];f==="style"?sC(a,u):f==="dangerouslySetInnerHTML"?eC(a,u):f==="children"?Ru(a,u):ab(a,f,u,h)}switch(l){case"input":Ix(a,i);break;case"textarea":J2(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ac(a,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?ac(a,!!i.multiple,i.defaultValue,!0):ac(a,!!i.multiple,i.multiple?[]:"",!1))}a[Vu]=i}catch(v){Ts(e,e.return,v)}}break;case 6:if(Or(t,e),ua(e),r&4){if(e.stateNode===null)throw Error(Ge(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){Ts(e,e.return,v)}}break;case 3:if(Or(t,e),ua(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Du(t.containerInfo)}catch(v){Ts(e,e.return,v)}break;case 4:Or(t,e),ua(e);break;case 13:Or(t,e),ua(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Fb=Ms())),r&4&&BN(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(xn=(h=xn)||f,Or(t,e),xn=h):Or(t,e),ua(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!f&&e.mode&1)for(ot=e,f=e.child;f!==null;){for(u=ot=f;ot!==null;){switch(m=ot,p=m.child,m.tag){case 0:case 11:case 14:case 15:xu(4,m,m.return);break;case 1:Xl(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(v){Ts(r,n,v)}}break;case 5:Xl(m,m.return);break;case 22:if(m.memoizedState!==null){VN(u);continue}}p!==null?(p.return=m,ot=p):VN(u)}f=f.sibling}e:for(f=null,u=e;;){if(u.tag===5){if(f===null){f=u;try{a=u.stateNode,h?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=u.stateNode,d=u.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=tC("display",o))}catch(v){Ts(e,e.return,v)}}}else if(u.tag===6){if(f===null)try{u.stateNode.nodeValue=h?"":u.memoizedProps}catch(v){Ts(e,e.return,v)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Or(t,e),ua(e),r&4&&BN(e);break;case 21:break;default:Or(t,e),ua(e)}}function ua(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(CE(n)){var r=n;break e}n=n.return}throw Error(Ge(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Ru(a,""),r.flags&=-33);var i=$N(e);gy(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=$N(e);py(e,l,o);break;default:throw Error(Ge(161))}}catch(d){Ts(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function CD(e,t,n){ot=e,PE(e)}function PE(e,t,n){for(var r=(e.mode&1)!==0;ot!==null;){var a=ot,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||bf;if(!o){var l=a.alternate,d=l!==null&&l.memoizedState!==null||xn;l=bf;var h=xn;if(bf=o,(xn=d)&&!h)for(ot=a;ot!==null;)o=ot,d=o.child,o.tag===22&&o.memoizedState!==null?UN(a):d!==null?(d.return=o,ot=d):UN(a);for(;i!==null;)ot=i,PE(i),i=i.sibling;ot=a,bf=l,xn=h}zN(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ot=i):zN(e)}}function zN(e){for(;ot!==null;){var t=ot;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xn||Tp(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xn)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Dr(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&SN(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}SN(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var u=f.dehydrated;u!==null&&Du(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}xn||t.flags&512&&my(t)}catch(m){Ts(t,t.return,m)}}if(t===e){ot=null;break}if(n=t.sibling,n!==null){n.return=t.return,ot=n;break}ot=t.return}}function VN(e){for(;ot!==null;){var t=ot;if(t===e){ot=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ot=n;break}ot=t.return}}function UN(e){for(;ot!==null;){var t=ot;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Tp(4,t)}catch(d){Ts(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(d){Ts(t,a,d)}}var i=t.return;try{my(t)}catch(d){Ts(t,i,d)}break;case 5:var o=t.return;try{my(t)}catch(d){Ts(t,o,d)}}}catch(d){Ts(t,t.return,d)}if(t===e){ot=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ot=l;break}ot=t.return}}var ED=Math.ceil,Pm=xi.ReactCurrentDispatcher,Mb=xi.ReactCurrentOwner,jr=xi.ReactCurrentBatchConfig,$t=0,nn=null,Us=null,un=0,sr=0,Jl=fo(0),Gs=0,Ku=null,ll=0,Pp=0,Db=0,yu=null,Wn=null,Fb=0,Fc=1/0,Ya=null,Am=!1,vy=null,Xi=null,wf=!1,Ui=null,Om=0,bu=0,xy=null,Gf=-1,Kf=0;function Ln(){return $t&6?Ms():Gf!==-1?Gf:Gf=Ms()}function Ji(e){return e.mode&1?$t&2&&un!==0?un&-un:uD.transition!==null?(Kf===0&&(Kf=mC()),Kf):(e=ts,e!==0||(e=window.event,e=e===void 0?16:wC(e.type)),e):1}function Zr(e,t,n,r){if(50<bu)throw bu=0,xy=null,Error(Ge(185));bh(e,n,r),(!($t&2)||e!==nn)&&(e===nn&&(!($t&2)&&(Pp|=n),Gs===4&&Mi(e,un)),Jn(e,r),n===1&&$t===0&&!(t.mode&1)&&(Fc=Ms()+500,kp&&mo()))}function Jn(e,t){var n=e.callbackNode;u3(e,t);var r=pm(e,e===nn?un:0);if(r===0)n!==null&&Jj(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Jj(n),t===1)e.tag===0?dD(qN.bind(null,e)):BC(qN.bind(null,e)),iD(function(){!($t&6)&&mo()}),n=null;else{switch(pC(r)){case 1:n=db;break;case 4:n=hC;break;case 16:n=mm;break;case 536870912:n=fC;break;default:n=mm}n=FE(n,AE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function AE(e,t){if(Gf=-1,Kf=0,$t&6)throw Error(Ge(327));var n=e.callbackNode;if(dc()&&e.callbackNode!==n)return null;var r=pm(e,e===nn?un:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Rm(e,r);else{t=r;var a=$t;$t|=2;var i=RE();(nn!==e||un!==t)&&(Ya=null,Fc=Ms()+500,Ko(e,t));do try{AD();break}catch(l){OE(e,l)}while(!0);jb(),Pm.current=i,$t=a,Us!==null?t=0:(nn=null,un=0,t=Gs)}if(t!==0){if(t===2&&(a=Hx(e),a!==0&&(r=a,t=yy(e,a))),t===1)throw n=Ku,Ko(e,0),Mi(e,r),Jn(e,Ms()),n;if(t===6)Mi(e,r);else{if(a=e.current.alternate,!(r&30)&&!TD(a)&&(t=Rm(e,r),t===2&&(i=Hx(e),i!==0&&(r=i,t=yy(e,i))),t===1))throw n=Ku,Ko(e,0),Mi(e,r),Jn(e,Ms()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Ge(345));case 2:To(e,Wn,Ya);break;case 3:if(Mi(e,r),(r&130023424)===r&&(t=Fb+500-Ms(),10<t)){if(pm(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Ln(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Qx(To.bind(null,e,Wn,Ya),t);break}To(e,Wn,Ya);break;case 4:if(Mi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Kr(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=Ms()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ED(r/1960))-r,10<r){e.timeoutHandle=Qx(To.bind(null,e,Wn,Ya),r);break}To(e,Wn,Ya);break;case 5:To(e,Wn,Ya);break;default:throw Error(Ge(329))}}}return Jn(e,Ms()),e.callbackNode===n?AE.bind(null,e):null}function yy(e,t){var n=yu;return e.current.memoizedState.isDehydrated&&(Ko(e,t).flags|=256),e=Rm(e,t),e!==2&&(t=Wn,Wn=n,t!==null&&by(t)),e}function by(e){Wn===null?Wn=e:Wn.push.apply(Wn,e)}function TD(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!ea(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mi(e,t){for(t&=~Db,t&=~Pp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kr(t),r=1<<n;e[n]=-1,t&=~r}}function qN(e){if($t&6)throw Error(Ge(327));dc();var t=pm(e,0);if(!(t&1))return Jn(e,Ms()),null;var n=Rm(e,t);if(e.tag!==0&&n===2){var r=Hx(e);r!==0&&(t=r,n=yy(e,r))}if(n===1)throw n=Ku,Ko(e,0),Mi(e,t),Jn(e,Ms()),n;if(n===6)throw Error(Ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,To(e,Wn,Ya),Jn(e,Ms()),null}function $b(e,t){var n=$t;$t|=1;try{return e(t)}finally{$t=n,$t===0&&(Fc=Ms()+500,kp&&mo())}}function cl(e){Ui!==null&&Ui.tag===0&&!($t&6)&&dc();var t=$t;$t|=1;var n=jr.transition,r=ts;try{if(jr.transition=null,ts=1,e)return e()}finally{ts=r,jr.transition=n,$t=t,!($t&6)&&mo()}}function Bb(){sr=Jl.current,fs(Jl)}function Ko(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,aD(n)),Us!==null)for(n=Us.return;n!==null;){var r=n;switch(bb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bm();break;case 3:Mc(),fs(Yn),fs(_n),Tb();break;case 5:Eb(r);break;case 4:Mc();break;case 13:fs(ws);break;case 19:fs(ws);break;case 10:Nb(r.type._context);break;case 22:case 23:Bb()}n=n.return}if(nn=e,Us=e=Qi(e.current,null),un=sr=t,Gs=0,Ku=null,Db=Pp=ll=0,Wn=yu=null,Mo!==null){for(t=0;t<Mo.length;t++)if(n=Mo[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}Mo=null}return e}function OE(e,t){do{var n=Us;try{if(jb(),qf.current=Tm,Em){for(var r=js.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Em=!1}if(ol=0,tn=Ws=js=null,vu=!1,Hu=0,Mb.current=null,n===null||n.return===null){Gs=1,Ku=t,Us=null;break}e:{var i=e,o=n.return,l=n,d=t;if(t=un,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,f=l,u=f.tag;if(!(f.mode&1)&&(u===0||u===11||u===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=AN(o);if(p!==null){p.flags&=-257,ON(p,o,l,i,t),p.mode&1&&PN(i,h,t),t=p,d=h;var w=t.updateQueue;if(w===null){var v=new Set;v.add(d),t.updateQueue=v}else w.add(d);break e}else{if(!(t&1)){PN(i,h,t),zb();break e}d=Error(Ge(426))}}else if(gs&&l.mode&1){var x=AN(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ON(x,o,l,i,t),wb(Dc(d,l));break e}}i=d=Dc(d,l),Gs!==4&&(Gs=2),yu===null?yu=[i]:yu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=pE(i,d,t);NN(i,y);break e;case 1:l=d;var b=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Xi===null||!Xi.has(j)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=gE(i,l,t);NN(i,N);break e}}i=i.return}while(i!==null)}IE(n)}catch(S){t=S,Us===n&&n!==null&&(Us=n=n.return);continue}break}while(!0)}function RE(){var e=Pm.current;return Pm.current=Tm,e===null?Tm:e}function zb(){(Gs===0||Gs===3||Gs===2)&&(Gs=4),nn===null||!(ll&268435455)&&!(Pp&268435455)||Mi(nn,un)}function Rm(e,t){var n=$t;$t|=2;var r=RE();(nn!==e||un!==t)&&(Ya=null,Ko(e,t));do try{PD();break}catch(a){OE(e,a)}while(!0);if(jb(),$t=n,Pm.current=r,Us!==null)throw Error(Ge(261));return nn=null,un=0,Gs}function PD(){for(;Us!==null;)LE(Us)}function AD(){for(;Us!==null&&!s3();)LE(Us)}function LE(e){var t=DE(e.alternate,e,sr);e.memoizedProps=e.pendingProps,t===null?IE(e):Us=t,Mb.current=null}function IE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ND(n,t),n!==null){n.flags&=32767,Us=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Gs=6,Us=null;return}}else if(n=jD(n,t,sr),n!==null){Us=n;return}if(t=t.sibling,t!==null){Us=t;return}Us=t=e}while(t!==null);Gs===0&&(Gs=5)}function To(e,t,n){var r=ts,a=jr.transition;try{jr.transition=null,ts=1,OD(e,t,n,r)}finally{jr.transition=a,ts=r}return null}function OD(e,t,n,r){do dc();while(Ui!==null);if($t&6)throw Error(Ge(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ge(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(h3(e,i),e===nn&&(Us=nn=null,un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wf||(wf=!0,FE(mm,function(){return dc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jr.transition,jr.transition=null;var o=ts;ts=1;var l=$t;$t|=4,Mb.current=null,kD(e,n),TE(n,e),J3(Xx),gm=!!Yx,Xx=Yx=null,e.current=n,CD(n),n3(),$t=l,ts=o,jr.transition=i}else e.current=n;if(wf&&(wf=!1,Ui=e,Om=a),i=e.pendingLanes,i===0&&(Xi=null),i3(n.stateNode),Jn(e,Ms()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Am)throw Am=!1,e=vy,vy=null,e;return Om&1&&e.tag!==0&&dc(),i=e.pendingLanes,i&1?e===xy?bu++:(bu=0,xy=e):bu=0,mo(),null}function dc(){if(Ui!==null){var e=pC(Om),t=jr.transition,n=ts;try{if(jr.transition=null,ts=16>e?16:e,Ui===null)var r=!1;else{if(e=Ui,Ui=null,Om=0,$t&6)throw Error(Ge(331));var a=$t;for($t|=4,ot=e.current;ot!==null;){var i=ot,o=i.child;if(ot.flags&16){var l=i.deletions;if(l!==null){for(var d=0;d<l.length;d++){var h=l[d];for(ot=h;ot!==null;){var f=ot;switch(f.tag){case 0:case 11:case 15:xu(8,f,i)}var u=f.child;if(u!==null)u.return=f,ot=u;else for(;ot!==null;){f=ot;var m=f.sibling,p=f.return;if(kE(f),f===h){ot=null;break}if(m!==null){m.return=p,ot=m;break}ot=p}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}ot=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ot=o;else e:for(;ot!==null;){if(i=ot,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xu(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ot=y;break e}ot=i.return}}var b=e.current;for(ot=b;ot!==null;){o=ot;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,ot=j;else e:for(o=b;ot!==null;){if(l=ot,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Tp(9,l)}}catch(S){Ts(l,l.return,S)}if(l===o){ot=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,ot=N;break e}ot=l.return}}if($t=a,mo(),Na&&typeof Na.onPostCommitFiberRoot=="function")try{Na.onPostCommitFiberRoot(wp,e)}catch{}r=!0}return r}finally{ts=n,jr.transition=t}}return!1}function HN(e,t,n){t=Dc(n,t),t=pE(e,t,1),e=Yi(e,t,1),t=Ln(),e!==null&&(bh(e,1,t),Jn(e,t))}function Ts(e,t,n){if(e.tag===3)HN(e,e,n);else for(;t!==null;){if(t.tag===3){HN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xi===null||!Xi.has(r))){e=Dc(n,e),e=gE(t,e,1),t=Yi(t,e,1),e=Ln(),t!==null&&(bh(t,1,e),Jn(t,e));break}}t=t.return}}function RD(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ln(),e.pingedLanes|=e.suspendedLanes&n,nn===e&&(un&n)===n&&(Gs===4||Gs===3&&(un&130023424)===un&&500>Ms()-Fb?Ko(e,0):Db|=n),Jn(e,t)}function ME(e,t){t===0&&(e.mode&1?(t=uf,uf<<=1,!(uf&130023424)&&(uf=4194304)):t=1);var n=Ln();e=li(e,t),e!==null&&(bh(e,t,n),Jn(e,n))}function LD(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ME(e,n)}function ID(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ge(314))}r!==null&&r.delete(t),ME(e,n)}var DE;DE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yn.current)Gn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Gn=!1,_D(e,t,n);Gn=!!(e.flags&131072)}else Gn=!1,gs&&t.flags&1048576&&zC(t,jm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wf(e,t),e=t.pendingProps;var a=Rc(t,_n.current);cc(t,n),a=Ab(null,t,r,e,a,n);var i=Ob();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xn(r)?(i=!0,wm(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kb(t),a.updater=Ep,t.stateNode=a,a._reactInternals=t,iy(t,r,e,n),t=cy(null,t,r,!0,i,n)):(t.tag=0,gs&&i&&yb(t),Cn(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wf(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=DD(r),e=Dr(r,e),a){case 0:t=ly(null,t,r,e,n);break e;case 1:t=IN(null,t,r,e,n);break e;case 11:t=RN(null,t,r,e,n);break e;case 14:t=LN(null,t,r,Dr(r.type,e),n);break e}throw Error(Ge(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Dr(r,a),ly(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Dr(r,a),IN(e,t,r,a,n);case 3:e:{if(bE(t),e===null)throw Error(Ge(387));r=t.pendingProps,i=t.memoizedState,a=i.element,GC(e,t),km(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Dc(Error(Ge(423)),t),t=MN(e,t,r,n,a);break e}else if(r!==a){a=Dc(Error(Ge(424)),t),t=MN(e,t,r,n,a);break e}else for(ir=Zi(t.stateNode.containerInfo.firstChild),or=t,gs=!0,Vr=null,n=HC(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lc(),r===a){t=ci(e,t,n);break e}Cn(e,t,r,n)}t=t.child}return t;case 5:return KC(t),e===null&&ny(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Jx(r,a)?o=null:i!==null&&Jx(r,i)&&(t.flags|=32),yE(e,t),Cn(e,t,o,n),t.child;case 6:return e===null&&ny(t),null;case 13:return wE(e,t,n);case 4:return Cb(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ic(t,null,r,n):Cn(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Dr(r,a),RN(e,t,r,a,n);case 7:return Cn(e,t,t.pendingProps,n),t.child;case 8:return Cn(e,t,t.pendingProps.children,n),t.child;case 12:return Cn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,os(Nm,r._currentValue),r._currentValue=o,i!==null)if(ea(i.value,o)){if(i.children===a.children&&!Yn.current){t=ci(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var d=l.firstContext;d!==null;){if(d.context===r){if(i.tag===1){d=ri(-1,n&-n),d.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?d.next=d:(d.next=f.next,f.next=d),h.pending=d}}i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),ry(i.return,n,t),l.lanes|=n;break}d=d.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ge(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ry(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Cn(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,cc(t,n),a=kr(a),r=r(a),t.flags|=1,Cn(e,t,r,n),t.child;case 14:return r=t.type,a=Dr(r,t.pendingProps),a=Dr(r.type,a),LN(e,t,r,a,n);case 15:return vE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Dr(r,a),Wf(e,t),t.tag=1,Xn(r)?(e=!0,wm(t)):e=!1,cc(t,n),mE(t,r,a),iy(t,r,a,n),cy(null,t,r,!0,e,n);case 19:return _E(e,t,n);case 22:return xE(e,t,n)}throw Error(Ge(156,t.tag))};function FE(e,t){return uC(e,t)}function MD(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(e,t,n,r){return new MD(e,t,n,r)}function Vb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function DD(e){if(typeof e=="function")return Vb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ob)return 11;if(e===lb)return 14}return 2}function Qi(e,t){var n=e.alternate;return n===null?(n=_r(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zf(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")Vb(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Vl:return Zo(n.children,a,i,t);case ib:o=8,a|=8;break;case Px:return e=_r(12,n,t,a|2),e.elementType=Px,e.lanes=i,e;case Ax:return e=_r(13,n,t,a),e.elementType=Ax,e.lanes=i,e;case Ox:return e=_r(19,n,t,a),e.elementType=Ox,e.lanes=i,e;case K2:return Ap(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W2:o=10;break e;case G2:o=9;break e;case ob:o=11;break e;case lb:o=14;break e;case Oi:o=16,r=null;break e}throw Error(Ge(130,e==null?e:typeof e,""))}return t=_r(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Zo(e,t,n,r){return e=_r(7,e,r,t),e.lanes=n,e}function Ap(e,t,n,r){return e=_r(22,e,r,t),e.elementType=K2,e.lanes=n,e.stateNode={isHidden:!1},e}function Iv(e,t,n){return e=_r(6,e,null,t),e.lanes=n,e}function Mv(e,t,n){return t=_r(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function FD(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gv(0),this.expirationTimes=gv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gv(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ub(e,t,n,r,a,i,o,l,d){return e=new FD(e,t,n,l,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=_r(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kb(i),e}function $D(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $E(e){if(!e)return no;e=e._reactInternals;e:{if(yl(e)!==e||e.tag!==1)throw Error(Ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ge(171))}if(e.tag===1){var n=e.type;if(Xn(n))return $C(e,n,t)}return t}function BE(e,t,n,r,a,i,o,l,d){return e=Ub(n,r,!0,e,a,i,o,l,d),e.context=$E(null),n=e.current,r=Ln(),a=Ji(n),i=ri(r,a),i.callback=t??null,Yi(n,i,a),e.current.lanes=a,bh(e,a,r),Jn(e,r),e}function Op(e,t,n,r){var a=t.current,i=Ln(),o=Ji(a);return n=$E(n),t.context===null?t.context=n:t.pendingContext=n,t=ri(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Yi(a,t,o),e!==null&&(Zr(e,a,o,i),Uf(e,a,o)),o}function Lm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function WN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qb(e,t){WN(e,t),(e=e.alternate)&&WN(e,t)}function BD(){return null}var zE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hb(e){this._internalRoot=e}Rp.prototype.render=Hb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ge(409));Op(e,t,null,null)};Rp.prototype.unmount=Hb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cl(function(){Op(null,e,null,null)}),t[oi]=null}};function Rp(e){this._internalRoot=e}Rp.prototype.unstable_scheduleHydration=function(e){if(e){var t=xC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ii.length&&t!==0&&t<Ii[n].priority;n++);Ii.splice(n,0,e),n===0&&bC(e)}};function Wb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function GN(){}function zD(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var h=Lm(o);i.call(h)}}var o=BE(t,r,e,0,null,!1,!1,"",GN);return e._reactRootContainer=o,e[oi]=o.current,Bu(e.nodeType===8?e.parentNode:e),cl(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var h=Lm(d);l.call(h)}}var d=Ub(e,0,!1,null,null,!1,!1,"",GN);return e._reactRootContainer=d,e[oi]=d.current,Bu(e.nodeType===8?e.parentNode:e),cl(function(){Op(t,d,n,r)}),d}function Ip(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var d=Lm(o);l.call(d)}}Op(t,o,e,a)}else o=zD(n,t,e,a,r);return Lm(o)}gC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=iu(t.pendingLanes);n!==0&&(ub(t,n|1),Jn(t,Ms()),!($t&6)&&(Fc=Ms()+500,mo()))}break;case 13:cl(function(){var r=li(e,1);if(r!==null){var a=Ln();Zr(r,e,1,a)}}),qb(e,1)}};hb=function(e){if(e.tag===13){var t=li(e,134217728);if(t!==null){var n=Ln();Zr(t,e,134217728,n)}qb(e,134217728)}};vC=function(e){if(e.tag===13){var t=Ji(e),n=li(e,t);if(n!==null){var r=Ln();Zr(n,e,t,r)}qb(e,t)}};xC=function(){return ts};yC=function(e,t){var n=ts;try{return ts=e,t()}finally{ts=n}};Vx=function(e,t,n){switch(t){case"input":if(Ix(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Sp(r);if(!a)throw Error(Ge(90));Y2(r),Ix(r,a)}}}break;case"textarea":J2(e,n);break;case"select":t=n.value,t!=null&&ac(e,!!n.multiple,t,!1)}};aC=$b;iC=cl;var VD={usingClientEntryPoint:!1,Events:[_h,Wl,Sp,nC,rC,$b]},Hd={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UD={bundleType:Hd.bundleType,version:Hd.version,rendererPackageName:Hd.rendererPackageName,rendererConfig:Hd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cC(e),e===null?null:e.stateNode},findFiberByHostInstance:Hd.findFiberByHostInstance||BD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{wp=_f.inject(UD),Na=_f}catch{}}ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VD;ur.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wb(t))throw Error(Ge(200));return $D(e,t,null,n)};ur.createRoot=function(e,t){if(!Wb(e))throw Error(Ge(299));var n=!1,r="",a=zE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ub(e,1,!1,null,null,n,!1,r,a),e[oi]=t.current,Bu(e.nodeType===8?e.parentNode:e),new Hb(t)};ur.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ge(188)):(e=Object.keys(e).join(","),Error(Ge(268,e)));return e=cC(t),e=e===null?null:e.stateNode,e};ur.flushSync=function(e){return cl(e)};ur.hydrate=function(e,t,n){if(!Lp(t))throw Error(Ge(200));return Ip(null,e,t,!0,n)};ur.hydrateRoot=function(e,t,n){if(!Wb(e))throw Error(Ge(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=zE;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=BE(t,null,e,1,n??null,a,!1,i,o),e[oi]=t.current,Bu(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Rp(t)};ur.render=function(e,t,n){if(!Lp(t))throw Error(Ge(200));return Ip(null,e,t,!1,n)};ur.unmountComponentAtNode=function(e){if(!Lp(e))throw Error(Ge(40));return e._reactRootContainer?(cl(function(){Ip(null,null,e,!1,function(){e._reactRootContainer=null,e[oi]=null})}),!0):!1};ur.unstable_batchedUpdates=$b;ur.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Lp(n))throw Error(Ge(200));if(e==null||e._reactInternals===void 0)throw Error(Ge(38));return Ip(e,t,n,!1,r)};ur.version="18.3.1-next-f1338f8080-20240426";function VE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VE)}catch(e){console.error(e)}}VE(),V2.exports=ur;var po=V2.exports;const UE=vl(po);var Gb,KN=po;Gb=KN.createRoot,KN.hydrateRoot;const qD=1,HD=1e6;let Dv=0;function WD(){return Dv=(Dv+1)%Number.MAX_SAFE_INTEGER,Dv.toString()}const Fv=new Map,ZN=e=>{if(Fv.has(e))return;const t=setTimeout(()=>{Fv.delete(e),wu({type:"REMOVE_TOAST",toastId:e})},HD);Fv.set(e,t)},qE=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,qD)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?ZN(n):e.toasts.forEach(r=>{ZN(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Yf=[];let Xf={toasts:[]};function wu(e){Xf=qE(Xf,e),Yf.forEach(t=>{t(Xf)})}function _u({...e}){const t=WD(),n=a=>wu({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>wu({type:"DISMISS_TOAST",toastId:t});return wu({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function ns(){const[e,t]=_.useState(Xf);return _.useEffect(()=>(Yf.push(t),()=>{const n=Yf.indexOf(t);n>-1&&Yf.splice(n,1)}),[e]),{...e,toast:_u,dismiss:n=>wu({type:"DISMISS_TOAST",toastId:n})}}const YN=Object.freeze(Object.defineProperty({__proto__:null,reducer:qE,toast:_u,useToast:ns},Symbol.toStringTag,{value:"Module"}));function Ze(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function XN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Mp(...e){return t=>{let n=!1;const r=e.map(a=>{const i=XN(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():XN(e[a],null)}}}}function Nt(...e){return _.useCallback(Mp(...e),e)}function GD(e,t){const n=_.createContext(t),r=i=>{const{children:o,...l}=i,d=_.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:d,children:o})};r.displayName=e+"Provider";function a(i){const o=_.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function jn(e,t=[]){let n=[];function r(i,o){const l=_.createContext(o),d=n.length;n=[...n,o];const h=u=>{var y;const{scope:m,children:p,...w}=u,v=((y=m==null?void 0:m[e])==null?void 0:y[d])||l,x=_.useMemo(()=>w,Object.values(w));return s.jsx(v.Provider,{value:x,children:p})};h.displayName=i+"Provider";function f(u,m){var v;const p=((v=m==null?void 0:m[e])==null?void 0:v[d])||l,w=_.useContext(p);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return[h,f]}const a=()=>{const i=n.map(o=>_.createContext(o));return function(l){const d=(l==null?void 0:l[e])||i;return _.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return a.scopeName=e,[r,KD(a,...t)]}function KD(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:d,scopeName:h})=>{const u=d(i)[`__scope${h}`];return{...l,...u}},{});return _.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function dl(e){const t=YD(e),n=_.forwardRef((r,a)=>{const{children:i,...o}=r,l=_.Children.toArray(i),d=l.find(JD);if(d){const h=d.props.children,f=l.map(u=>u===d?_.Children.count(h)>1?_.Children.only(null):_.isValidElement(h)?h.props.children:null:u);return s.jsx(t,{...o,ref:a,children:_.isValidElement(h)?_.cloneElement(h,void 0,f):null})}return s.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var ZD=dl("Slot");function YD(e){const t=_.forwardRef((n,r)=>{const{children:a,...i}=n;if(_.isValidElement(a)){const o=eF(a),l=QD(i,a.props);return a.type!==_.Fragment&&(l.ref=r?Mp(r,o):o),_.cloneElement(a,l)}return _.Children.count(a)>1?_.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var HE=Symbol("radix.slottable");function XD(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=HE,t}function JD(e){return _.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===HE}function QD(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{const d=i(...l);return a(...l),d}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function eF(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Dp(e){const t=e+"CollectionProvider",[n,r]=jn(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:y}=v,b=Re.useRef(null),j=Re.useRef(new Map).current;return s.jsx(a,{scope:x,itemMap:j,collectionRef:b,children:y})};o.displayName=t;const l=e+"CollectionSlot",d=dl(l),h=Re.forwardRef((v,x)=>{const{scope:y,children:b}=v,j=i(l,y),N=Nt(x,j.collectionRef);return s.jsx(d,{ref:N,children:b})});h.displayName=l;const f=e+"CollectionItemSlot",u="data-radix-collection-item",m=dl(f),p=Re.forwardRef((v,x)=>{const{scope:y,children:b,...j}=v,N=Re.useRef(null),S=Nt(x,N),P=i(f,y);return Re.useEffect(()=>(P.itemMap.set(N,{ref:N,...j}),()=>void P.itemMap.delete(N))),s.jsx(m,{[u]:"",ref:S,children:b})});p.displayName=f;function w(v){const x=i(e+"CollectionConsumer",v);return Re.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const j=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(x.itemMap.values()).sort((P,T)=>j.indexOf(P.ref.current)-j.indexOf(T.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:h,ItemSlot:p},w,r]}var tF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ut=tF.reduce((e,t)=>{const n=dl(`Primitive.${t}`),r=_.forwardRef((a,i)=>{const{asChild:o,...l}=a,d=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Kb(e,t){e&&po.flushSync(()=>e.dispatchEvent(t))}function Ps(e){const t=_.useRef(e);return _.useEffect(()=>{t.current=e}),_.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function sF(e,t=globalThis==null?void 0:globalThis.document){const n=Ps(e);_.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var nF="DismissableLayer",wy="dismissableLayer.update",rF="dismissableLayer.pointerDownOutside",aF="dismissableLayer.focusOutside",JN,WE=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),id=_.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...d}=e,h=_.useContext(WE),[f,u]=_.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=_.useState({}),w=Nt(t,T=>u(T)),v=Array.from(h.layers),[x]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),b=f?v.indexOf(f):-1,j=h.layersWithOutsidePointerEventsDisabled.size>0,N=b>=y,S=oF(T=>{const E=T.target,I=[...h.branches].some(O=>O.contains(E));!N||I||(a==null||a(T),o==null||o(T),T.defaultPrevented||l==null||l())},m),P=lF(T=>{const E=T.target;[...h.branches].some(O=>O.contains(E))||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},m);return sF(T=>{b===h.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),_.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(JN=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),QN(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=JN)}},[f,m,n,h]),_.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),QN())},[f,h]),_.useEffect(()=>{const T=()=>p({});return document.addEventListener(wy,T),()=>document.removeEventListener(wy,T)},[]),s.jsx(ut.div,{...d,ref:w,style:{pointerEvents:j?N?"auto":"none":void 0,...e.style},onFocusCapture:Ze(e.onFocusCapture,P.onFocusCapture),onBlurCapture:Ze(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Ze(e.onPointerDownCapture,S.onPointerDownCapture)})});id.displayName=nF;var iF="DismissableLayerBranch",GE=_.forwardRef((e,t)=>{const n=_.useContext(WE),r=_.useRef(null),a=Nt(t,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),s.jsx(ut.div,{...e,ref:a})});GE.displayName=iF;function oF(e,t=globalThis==null?void 0:globalThis.document){const n=Ps(e),r=_.useRef(!1),a=_.useRef(()=>{});return _.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let d=function(){KE(rF,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function lF(e,t=globalThis==null?void 0:globalThis.document){const n=Ps(e),r=_.useRef(!1);return _.useEffect(()=>{const a=i=>{i.target&&!r.current&&KE(aF,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function QN(){const e=new CustomEvent(wy);document.dispatchEvent(e)}function KE(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?Kb(a,i):a.dispatchEvent(i)}var cF=id,dF=GE,Fs=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},uF="Portal",Nh=_.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,i]=_.useState(!1);Fs(()=>i(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?UE.createPortal(s.jsx(ut.div,{...r,ref:t}),o):null});Nh.displayName=uF;function hF(e,t){return _.useReducer((n,r)=>t[n][r]??n,e)}var fn=e=>{const{present:t,children:n}=e,r=fF(t),a=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=Nt(r.ref,mF(a));return typeof n=="function"||r.isPresent?_.cloneElement(a,{ref:i}):null};fn.displayName="Presence";function fF(e){const[t,n]=_.useState(),r=_.useRef(null),a=_.useRef(e),i=_.useRef("none"),o=e?"mounted":"unmounted",[l,d]=hF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const h=jf(r.current);i.current=l==="mounted"?h:"none"},[l]),Fs(()=>{const h=r.current,f=a.current;if(f!==e){const m=i.current,p=jf(h);e?d("MOUNT"):p==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(f&&m!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,d]),Fs(()=>{if(t){let h;const f=t.ownerDocument.defaultView??window,u=p=>{const v=jf(r.current).includes(p.animationName);if(p.target===t&&v&&(d("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",h=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},m=p=>{p.target===t&&(i.current=jf(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{f.clearTimeout(h),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:_.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function jf(e){return(e==null?void 0:e.animationName)||"none"}function mF(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var pF=sb[" useInsertionEffect ".trim().toString()]||Fs;function ta({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=gF({defaultProp:t,onChange:n}),l=e!==void 0,d=l?e:a;{const f=_.useRef(e!==void 0);_.useEffect(()=>{const u=f.current;u!==l&&console.warn(`${r} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=_.useCallback(f=>{var u;if(l){const m=vF(f)?f(e):f;m!==e&&((u=o.current)==null||u.call(o,m))}else i(f)},[l,e,i,o]);return[d,h]}function gF({defaultProp:e,onChange:t}){const[n,r]=_.useState(e),a=_.useRef(n),i=_.useRef(t);return pF(()=>{i.current=t},[t]),_.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function vF(e){return typeof e=="function"}var ZE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),xF="VisuallyHidden",Fp=_.forwardRef((e,t)=>s.jsx(ut.span,{...e,ref:t,style:{...ZE,...e.style}}));Fp.displayName=xF;var yF=Fp,Zb="ToastProvider",[Yb,bF,wF]=Dp("Toast"),[YE,eie]=jn("Toast",[wF]),[_F,$p]=YE(Zb),XE=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,d]=_.useState(null),[h,f]=_.useState(0),u=_.useRef(!1),m=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Zb}\`. Expected non-empty \`string\`.`),s.jsx(Yb.Provider,{scope:t,children:s.jsx(_F,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:h,viewport:l,onViewportChange:d,onToastAdd:_.useCallback(()=>f(p=>p+1),[]),onToastRemove:_.useCallback(()=>f(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:o})})};XE.displayName=Zb;var JE="ToastViewport",jF=["F8"],_y="toast.viewportPause",jy="toast.viewportResume",QE=_.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=jF,label:a="Notifications ({hotkey})",...i}=e,o=$p(JE,n),l=bF(n),d=_.useRef(null),h=_.useRef(null),f=_.useRef(null),u=_.useRef(null),m=Nt(t,u,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;_.useEffect(()=>{const x=y=>{var j;r.length!==0&&r.every(N=>y[N]||y.code===N)&&((j=u.current)==null||j.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),_.useEffect(()=>{const x=d.current,y=u.current;if(w&&x&&y){const b=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(_y);y.dispatchEvent(P),o.isClosePausedRef.current=!0}},j=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(jy);y.dispatchEvent(P),o.isClosePausedRef.current=!1}},N=P=>{!x.contains(P.relatedTarget)&&j()},S=()=>{x.contains(document.activeElement)||j()};return x.addEventListener("focusin",b),x.addEventListener("focusout",N),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",S),window.addEventListener("blur",b),window.addEventListener("focus",j),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",N),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",S),window.removeEventListener("blur",b),window.removeEventListener("focus",j)}}},[w,o.isClosePausedRef]);const v=_.useCallback(({tabbingDirection:x})=>{const b=l().map(j=>{const N=j.ref.current,S=[N,...MF(N)];return x==="forwards"?S:S.reverse()});return(x==="forwards"?b.reverse():b).flat()},[l]);return _.useEffect(()=>{const x=u.current;if(x){const y=b=>{var S,P,T;const j=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!j){const E=document.activeElement,I=b.shiftKey;if(b.target===x&&I){(S=h.current)==null||S.focus();return}const C=v({tabbingDirection:I?"backwards":"forwards"}),D=C.findIndex(A=>A===E);$v(C.slice(D+1))?b.preventDefault():I?(P=h.current)==null||P.focus():(T=f.current)==null||T.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,v]),s.jsxs(dF,{ref:d,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&s.jsx(Ny,{ref:h,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});$v(x)}}),s.jsx(Yb.Slot,{scope:n,children:s.jsx(ut.ol,{tabIndex:-1,...i,ref:m})}),w&&s.jsx(Ny,{ref:f,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});$v(x)}})]})});QE.displayName=JE;var eT="ToastFocusProxy",Ny=_.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=$p(eT,n);return s.jsx(Fp,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var h;const l=o.relatedTarget;!((h=i.viewport)!=null&&h.contains(l))&&r()}})});Ny.displayName=eT;var Sh="Toast",NF="toast.swipeStart",SF="toast.swipeMove",kF="toast.swipeCancel",CF="toast.swipeEnd",tT=_.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...o}=e,[l,d]=ta({prop:r,defaultProp:a??!0,onChange:i,caller:Sh});return s.jsx(fn,{present:n||l,children:s.jsx(PF,{open:l,...o,ref:t,onClose:()=>d(!1),onPause:Ps(e.onPause),onResume:Ps(e.onResume),onSwipeStart:Ze(e.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ze(e.onSwipeMove,h=>{const{x:f,y:u}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:Ze(e.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ze(e.onSwipeEnd,h=>{const{x:f,y:u}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),d(!1)})})})});tT.displayName=Sh;var[EF,TF]=YE(Sh,{onClose(){}}),PF=_.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:d,onResume:h,onSwipeStart:f,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:p,...w}=e,v=$p(Sh,n),[x,y]=_.useState(null),b=Nt(t,A=>y(A)),j=_.useRef(null),N=_.useRef(null),S=a||v.duration,P=_.useRef(0),T=_.useRef(S),E=_.useRef(0),{onToastAdd:I,onToastRemove:O}=v,R=Ps(()=>{var M;(x==null?void 0:x.contains(document.activeElement))&&((M=v.viewport)==null||M.focus()),o()}),C=_.useCallback(A=>{!A||A===1/0||(window.clearTimeout(E.current),P.current=new Date().getTime(),E.current=window.setTimeout(R,A))},[R]);_.useEffect(()=>{const A=v.viewport;if(A){const M=()=>{C(T.current),h==null||h()},Z=()=>{const X=new Date().getTime()-P.current;T.current=T.current-X,window.clearTimeout(E.current),d==null||d()};return A.addEventListener(_y,Z),A.addEventListener(jy,M),()=>{A.removeEventListener(_y,Z),A.removeEventListener(jy,M)}}},[v.viewport,S,d,h,C]),_.useEffect(()=>{i&&!v.isClosePausedRef.current&&C(S)},[i,S,v.isClosePausedRef,C]),_.useEffect(()=>(I(),()=>O()),[I,O]);const D=_.useMemo(()=>x?lT(x):null,[x]);return v.viewport?s.jsxs(s.Fragment,{children:[D&&s.jsx(AF,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),s.jsx(EF,{scope:n,onClose:R,children:po.createPortal(s.jsx(Yb.ItemSlot,{scope:n,children:s.jsx(cF,{asChild:!0,onEscapeKeyDown:Ze(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||R(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(ut.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ze(e.onKeyDown,A=>{A.key==="Escape"&&(l==null||l(A.nativeEvent),A.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Ze(e.onPointerDown,A=>{A.button===0&&(j.current={x:A.clientX,y:A.clientY})}),onPointerMove:Ze(e.onPointerMove,A=>{if(!j.current)return;const M=A.clientX-j.current.x,Z=A.clientY-j.current.y,X=!!N.current,U=["left","right"].includes(v.swipeDirection),F=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,B=U?F(0,M):0,z=U?0:F(0,Z),H=A.pointerType==="touch"?10:2,q={x:B,y:z},W={originalEvent:A,delta:q};X?(N.current=q,Nf(SF,u,W,{discrete:!1})):e1(q,v.swipeDirection,H)?(N.current=q,Nf(NF,f,W,{discrete:!1}),A.target.setPointerCapture(A.pointerId)):(Math.abs(M)>H||Math.abs(Z)>H)&&(j.current=null)}),onPointerUp:Ze(e.onPointerUp,A=>{const M=N.current,Z=A.target;if(Z.hasPointerCapture(A.pointerId)&&Z.releasePointerCapture(A.pointerId),N.current=null,j.current=null,M){const X=A.currentTarget,U={originalEvent:A,delta:M};e1(M,v.swipeDirection,v.swipeThreshold)?Nf(CF,p,U,{discrete:!0}):Nf(kF,m,U,{discrete:!0}),X.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),AF=e=>{const{__scopeToast:t,children:n,...r}=e,a=$p(Sh,t),[i,o]=_.useState(!1),[l,d]=_.useState(!1);return LF(()=>o(!0)),_.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),l?null:s.jsx(Nh,{asChild:!0,children:s.jsx(Fp,{...r,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},OF="ToastTitle",sT=_.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(ut.div,{...r,ref:t})});sT.displayName=OF;var RF="ToastDescription",nT=_.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(ut.div,{...r,ref:t})});nT.displayName=RF;var rT="ToastAction",aT=_.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(oT,{altText:n,asChild:!0,children:s.jsx(Xb,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${rT}\`. Expected non-empty \`string\`.`),null)});aT.displayName=rT;var iT="ToastClose",Xb=_.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=TF(iT,n);return s.jsx(oT,{asChild:!0,children:s.jsx(ut.button,{type:"button",...r,ref:t,onClick:Ze(e.onClick,a.onClose)})})});Xb.displayName=iT;var oT=_.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(ut.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function lT(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),IF(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...lT(r))}}),t}function Nf(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?Kb(a,i):a.dispatchEvent(i)}var e1=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return t==="left"||t==="right"?i&&r>n:!i&&a>n};function LF(e=()=>{}){const t=Ps(e);Fs(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function IF(e){return e.nodeType===e.ELEMENT_NODE}function MF(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function $v(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var DF=XE,cT=QE,dT=tT,uT=sT,hT=nT,fT=aT,mT=Xb;function pT(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=pT(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function gT(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=pT(e))&&(r&&(r+=" "),r+=t);return r}const t1=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,s1=gT,kh=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return s1(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(h=>{const f=n==null?void 0:n[h],u=i==null?void 0:i[h];if(f===null)return null;const m=t1(f)||t1(u);return a[h][m]}),l=n&&Object.entries(n).reduce((h,f)=>{let[u,m]=f;return m===void 0||(h[u]=m),h},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:u,className:m,...p}=f;return Object.entries(p).every(w=>{let[v,x]=w;return Array.isArray(x)?x.includes({...i,...l}[v]):{...i,...l}[v]===x})?[...h,u,m]:h},[]);return s1(e,o,d,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vT=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $F={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},d)=>_.createElement("svg",{ref:d,...$F,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:vT("lucide",a),...l},[...o.map(([h,f])=>_.createElement(h,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(e,t)=>{const n=_.forwardRef(({className:r,...a},i)=>_.createElement(BF,{ref:i,iconNode:t,className:vT(`lucide-${FF(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=Xe("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=Xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=Xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Xe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=Xe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=Xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=Xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=Xe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=Xe("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=Xe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=Xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=Xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=Xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=Xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=Xe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=Xe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=Xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=Xe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=Xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=Xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=Xe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=Xe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Xe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=Xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=Xe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=Xe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=Xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=Xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=Xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=Xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=Xe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=Xe("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=Xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Xe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=Xe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Xe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=Xe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Xe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=Xe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=Xe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Xe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=Xe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=Xe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=Xe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=Xe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=Xe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Xe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Xe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=Xe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=Xe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Xe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=Xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=Xe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=Xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Xe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=Xe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),nw="-",n6=e=>{const t=a6(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(nw);return l[0]===""&&l.length!==1&&l.shift(),ET(l,t)||r6(o)},getConflictingClassGroupIds:(o,l)=>{const d=n[o]||[];return l&&r[o]?[...d,...r[o]]:d}}},ET=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?ET(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(nw);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},i1=/^\[(.+)\]$/,r6=e=>{if(i1.test(e)){const t=i1.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},a6=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return o6(Object.entries(e.classGroups),n).forEach(([i,o])=>{ky(o,r,i,t)}),r},ky=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:o1(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(i6(a)){ky(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{ky(o,o1(t,i),n,r)})})},o1=(e,t)=>{let n=e;return t.split(nw).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},i6=e=>e.isThemeGetter,o6=(e,t)=>t?e.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[n,a]}):e,l6=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},TT="!",c6=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],i=t.length,o=l=>{const d=[];let h=0,f=0,u;for(let x=0;x<l.length;x++){let y=l[x];if(h===0){if(y===a&&(r||l.slice(x,x+i)===t)){d.push(l.slice(f,x)),f=x+i;continue}if(y==="/"){u=x;continue}}y==="["?h++:y==="]"&&h--}const m=d.length===0?l:l.substring(f),p=m.startsWith(TT),w=p?m.substring(1):m,v=u&&u>f?u-f:void 0;return{modifiers:d,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},d6=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},u6=e=>({cache:l6(e.cacheSize),parseClassName:c6(e),...n6(e)}),h6=/\s+/,f6=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(h6);let l="";for(let d=o.length-1;d>=0;d-=1){const h=o[d],{modifiers:f,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:p}=n(h);let w=!!p,v=r(w?m.substring(0,p):m);if(!v){if(!w){l=h+(l.length>0?" "+l:l);continue}if(v=r(m),!v){l=h+(l.length>0?" "+l:l);continue}w=!1}const x=d6(f).join(":"),y=u?x+TT:x,b=y+v;if(i.includes(b))continue;i.push(b);const j=a(v,w);for(let N=0;N<j.length;++N){const S=j[N];i.push(y+S)}l=h+(l.length>0?" "+l:l)}return l};function m6(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=PT(t))&&(r&&(r+=" "),r+=n);return r}const PT=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=PT(e[r]))&&(n&&(n+=" "),n+=t);return n};function p6(e,...t){let n,r,a,i=o;function o(d){const h=t.reduce((f,u)=>u(f),e());return n=u6(h),r=n.cache.get,a=n.cache.set,i=l,l(d)}function l(d){const h=r(d);if(h)return h;const f=f6(d,n);return a(d,f),f}return function(){return i(m6.apply(null,arguments))}}const ls=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},AT=/^\[(?:([a-z-]+):)?(.+)\]$/i,g6=/^\d+\/\d+$/,v6=new Set(["px","full","screen"]),x6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,y6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,b6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,w6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ha=e=>hc(e)||v6.has(e)||g6.test(e),ki=e=>ld(e,"length",P6),hc=e=>!!e&&!Number.isNaN(Number(e)),Bv=e=>ld(e,"number",hc),Wd=e=>!!e&&Number.isInteger(Number(e)),j6=e=>e.endsWith("%")&&hc(e.slice(0,-1)),Et=e=>AT.test(e),Ci=e=>x6.test(e),N6=new Set(["length","size","percentage"]),S6=e=>ld(e,N6,OT),k6=e=>ld(e,"position",OT),C6=new Set(["image","url"]),E6=e=>ld(e,C6,O6),T6=e=>ld(e,"",A6),Gd=()=>!0,ld=(e,t,n)=>{const r=AT.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},P6=e=>y6.test(e)&&!b6.test(e),OT=()=>!1,A6=e=>w6.test(e),O6=e=>_6.test(e),R6=()=>{const e=ls("colors"),t=ls("spacing"),n=ls("blur"),r=ls("brightness"),a=ls("borderColor"),i=ls("borderRadius"),o=ls("borderSpacing"),l=ls("borderWidth"),d=ls("contrast"),h=ls("grayscale"),f=ls("hueRotate"),u=ls("invert"),m=ls("gap"),p=ls("gradientColorStops"),w=ls("gradientColorStopPositions"),v=ls("inset"),x=ls("margin"),y=ls("opacity"),b=ls("padding"),j=ls("saturate"),N=ls("scale"),S=ls("sepia"),P=ls("skew"),T=ls("space"),E=ls("translate"),I=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Et,t],C=()=>[Et,t],D=()=>["",Ha,ki],A=()=>["auto",hc,Et],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",Et],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[hc,Et];return{cacheSize:500,separator:":",theme:{colors:[Gd],spacing:[Ha,ki],blur:["none","",Ci,Et],brightness:z(),borderColor:[e],borderRadius:["none","","full",Ci,Et],borderSpacing:C(),borderWidth:D(),contrast:z(),grayscale:F(),hueRotate:z(),invert:F(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[j6,ki],inset:R(),margin:R(),opacity:z(),padding:C(),saturate:z(),scale:z(),sepia:F(),skew:z(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",Et]}],container:["container"],columns:[{columns:[Ci]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),Et]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Wd,Et]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Et]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Wd,Et]}],"grid-cols":[{"grid-cols":[Gd]}],"col-start-end":[{col:["auto",{span:["full",Wd,Et]},Et]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Gd]}],"row-start-end":[{row:["auto",{span:[Wd,Et]},Et]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Et]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Et]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Et,t]}],"min-w":[{"min-w":[Et,t,"min","max","fit"]}],"max-w":[{"max-w":[Et,t,"none","full","min","max","fit","prose",{screen:[Ci]},Ci]}],h:[{h:[Et,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Et,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Et,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Et,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ci,ki]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Bv]}],"font-family":[{font:[Gd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Et]}],"line-clamp":[{"line-clamp":["none",hc,Bv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ha,Et]}],"list-image":[{"list-image":["none",Et]}],"list-style-type":[{list:["none","disc","decimal",Et]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ha,ki]}],"underline-offset":[{"underline-offset":["auto",Ha,Et]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),k6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",S6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},E6]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:Z()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Ha,Et]}],"outline-w":[{outline:[Ha,ki]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ha,ki]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ci,T6]}],"shadow-color":[{shadow:[Gd]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Ci,Et]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[u]}],saturate:[{saturate:[j]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Et]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",Et]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Et]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Wd,Et]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Et]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Et]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Et]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ha,ki,Bv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},L6=p6(R6);function it(...e){return L6(gT(e))}const I6=DF,RT=_.forwardRef(({className:e,...t},n)=>s.jsx(cT,{ref:n,className:it("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));RT.displayName=cT.displayName;const M6=kh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),LT=_.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(dT,{ref:r,className:it(M6({variant:t}),e),...n}));LT.displayName=dT.displayName;const D6=_.forwardRef(({className:e,...t},n)=>s.jsx(fT,{ref:n,className:it("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));D6.displayName=fT.displayName;const IT=_.forwardRef(({className:e,...t},n)=>s.jsx(mT,{ref:n,className:it("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(sn,{className:"h-4 w-4"})}));IT.displayName=mT.displayName;const MT=_.forwardRef(({className:e,...t},n)=>s.jsx(uT,{ref:n,className:it("text-sm font-semibold",e),...t}));MT.displayName=uT.displayName;const DT=_.forwardRef(({className:e,...t},n)=>s.jsx(hT,{ref:n,className:it("text-sm opacity-90",e),...t}));DT.displayName=hT.displayName;function F6(){const{toasts:e}=ns();return s.jsxs(I6,{children:[e.map(function({id:t,title:n,description:r,action:a,...i}){return s.jsxs(LT,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(MT,{children:n}),r&&s.jsx(DT,{children:r})]}),a,s.jsx(IT,{})]},t)}),s.jsx(RT,{})]})}var l1=["light","dark"],$6="(prefers-color-scheme: dark)",B6=_.createContext(void 0),z6={setTheme:e=>{},themes:[]},V6=()=>{var e;return(e=_.useContext(B6))!=null?e:z6};_.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:d})=>{let h=i==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,u=a?l1.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(w,v=!1,x=!0)=>{let y=o?o[w]:w,b=v?w+"|| ''":`'${y}'`,j="";return a&&x&&!v&&l1.includes(w)&&(j+=`d.style.colorScheme = '${w}';`),n==="class"?v||y?j+=`c.add(${b})`:j+="null":y&&(j+=`d[s](n,${b})`),j},p=e?`!function(){${f}${m(e)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${h})){var t='${$6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${h?"":"else{"+m(i,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${u}}catch(t){}}();`;return _.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:p}})});var U6=e=>{switch(e){case"success":return W6;case"info":return K6;case"warning":return G6;case"error":return Z6;default:return null}},q6=Array(12).fill(0),H6=({visible:e,className:t})=>Re.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Re.createElement("div",{className:"sonner-spinner"},q6.map((n,r)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),W6=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),G6=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),K6=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Z6=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Y6=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),X6=()=>{let[e,t]=Re.useState(document.hidden);return Re.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Cy=1,J6=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Cy++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,i,o=r.then(async d=>{if(i=["resolve",d],Re.isValidElement(d))a=!1,this.create({id:n,type:"default",message:d});else if(e$(d)&&!d.ok){a=!1;let h=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description;this.create({id:n,type:"error",message:h,description:f})}else if(t.success!==void 0){a=!1;let h=typeof t.success=="function"?await t.success(d):t.success,f=typeof t.description=="function"?await t.description(d):t.description;this.create({id:n,type:"success",message:h,description:f})}}).catch(async d=>{if(i=["reject",d],t.error!==void 0){a=!1;let h=typeof t.error=="function"?await t.error(d):t.error,f=typeof t.description=="function"?await t.description(d):t.description;this.create({id:n,type:"error",message:h,description:f})}}).finally(()=>{var d;a&&(this.dismiss(n),n=void 0),(d=t.finally)==null||d.call(t)}),l=()=>new Promise((d,h)=>o.then(()=>i[0]==="reject"?h(i[1]):d(i[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Cy++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Hn=new J6,Q6=(e,t)=>{let n=(t==null?void 0:t.id)||Cy++;return Hn.addToast({title:e,...t,id:n}),n},e$=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",t$=Q6,s$=()=>Hn.toasts,n$=()=>Hn.getActiveToasts(),cn=Object.assign(t$,{success:Hn.success,info:Hn.info,warning:Hn.warning,error:Hn.error,custom:Hn.custom,message:Hn.message,promise:Hn.promise,dismiss:Hn.dismiss,loading:Hn.loading},{getHistory:s$,getToasts:n$});function r$(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}r$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Sf(e){return e.label!==void 0}var a$=3,i$="32px",o$="16px",c1=4e3,l$=356,c$=14,d$=20,u$=200;function Rr(...e){return e.filter(Boolean).join(" ")}function h$(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var f$=e=>{var t,n,r,a,i,o,l,d,h,f,u;let{invert:m,toast:p,unstyled:w,interacting:v,setHeights:x,visibleToasts:y,heights:b,index:j,toasts:N,expanded:S,removeToast:P,defaultRichColors:T,closeButton:E,style:I,cancelButtonStyle:O,actionButtonStyle:R,className:C="",descriptionClassName:D="",duration:A,position:M,gap:Z,loadingIcon:X,expandByDefault:U,classNames:F,icons:B,closeButtonAriaLabel:z="Close toast",pauseWhenPageIsHidden:H}=e,[q,W]=Re.useState(null),[Y,V]=Re.useState(null),[G,ie]=Re.useState(!1),[J,le]=Re.useState(!1),[ye,ke]=Re.useState(!1),[Ne,_e]=Re.useState(!1),[ne,Ce]=Re.useState(!1),[ve,oe]=Re.useState(0),[de,Q]=Re.useState(0),ae=Re.useRef(p.duration||A||c1),ue=Re.useRef(null),re=Re.useRef(null),ce=j===0,fe=j+1<=y,ge=p.type,me=p.dismissible!==!1,be=p.className||"",Te=p.descriptionClassName||"",Se=Re.useMemo(()=>b.findIndex(Fe=>Fe.toastId===p.id)||0,[b,p.id]),Ie=Re.useMemo(()=>{var Fe;return(Fe=p.closeButton)!=null?Fe:E},[p.closeButton,E]),se=Re.useMemo(()=>p.duration||A||c1,[p.duration,A]),we=Re.useRef(0),Pe=Re.useRef(0),Me=Re.useRef(0),Le=Re.useRef(null),[He,_t]=M.split("-"),It=Re.useMemo(()=>b.reduce((Fe,et,tt)=>tt>=Se?Fe:Fe+et.height,0),[b,Se]),ss=X6(),ys=p.invert||m,ms=ge==="loading";Pe.current=Re.useMemo(()=>Se*Z+It,[Se,It]),Re.useEffect(()=>{ae.current=se},[se]),Re.useEffect(()=>{ie(!0)},[]),Re.useEffect(()=>{let Fe=re.current;if(Fe){let et=Fe.getBoundingClientRect().height;return Q(et),x(tt=>[{toastId:p.id,height:et,position:p.position},...tt]),()=>x(tt=>tt.filter(qe=>qe.toastId!==p.id))}},[x,p.id]),Re.useLayoutEffect(()=>{if(!G)return;let Fe=re.current,et=Fe.style.height;Fe.style.height="auto";let tt=Fe.getBoundingClientRect().height;Fe.style.height=et,Q(tt),x(qe=>qe.find(ft=>ft.toastId===p.id)?qe.map(ft=>ft.toastId===p.id?{...ft,height:tt}:ft):[{toastId:p.id,height:tt,position:p.position},...qe])},[G,p.title,p.description,x,p.id]);let he=Re.useCallback(()=>{le(!0),oe(Pe.current),x(Fe=>Fe.filter(et=>et.toastId!==p.id)),setTimeout(()=>{P(p)},u$)},[p,P,x,Pe]);Re.useEffect(()=>{if(p.promise&&ge==="loading"||p.duration===1/0||p.type==="loading")return;let Fe;return S||v||H&&ss?(()=>{if(Me.current<we.current){let et=new Date().getTime()-we.current;ae.current=ae.current-et}Me.current=new Date().getTime()})():ae.current!==1/0&&(we.current=new Date().getTime(),Fe=setTimeout(()=>{var et;(et=p.onAutoClose)==null||et.call(p,p),he()},ae.current)),()=>clearTimeout(Fe)},[S,v,p,ge,H,ss,he]),Re.useEffect(()=>{p.delete&&he()},[he,p.delete]);function nt(){var Fe,et,tt;return B!=null&&B.loading?Re.createElement("div",{className:Rr(F==null?void 0:F.loader,(Fe=p==null?void 0:p.classNames)==null?void 0:Fe.loader,"sonner-loader"),"data-visible":ge==="loading"},B.loading):X?Re.createElement("div",{className:Rr(F==null?void 0:F.loader,(et=p==null?void 0:p.classNames)==null?void 0:et.loader,"sonner-loader"),"data-visible":ge==="loading"},X):Re.createElement(H6,{className:Rr(F==null?void 0:F.loader,(tt=p==null?void 0:p.classNames)==null?void 0:tt.loader),visible:ge==="loading"})}return Re.createElement("li",{tabIndex:0,ref:re,className:Rr(C,be,F==null?void 0:F.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,F==null?void 0:F.default,F==null?void 0:F[ge],(n=p==null?void 0:p.classNames)==null?void 0:n[ge]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:T,"data-styled":!(p.jsx||p.unstyled||w),"data-mounted":G,"data-promise":!!p.promise,"data-swiped":ne,"data-removed":J,"data-visible":fe,"data-y-position":He,"data-x-position":_t,"data-index":j,"data-front":ce,"data-swiping":ye,"data-dismissible":me,"data-type":ge,"data-invert":ys,"data-swipe-out":Ne,"data-swipe-direction":Y,"data-expanded":!!(S||U&&G),style:{"--index":j,"--toasts-before":j,"--z-index":N.length-j,"--offset":`${J?ve:Pe.current}px`,"--initial-height":U?"auto":`${de}px`,...I,...p.style},onDragEnd:()=>{ke(!1),W(null),Le.current=null},onPointerDown:Fe=>{ms||!me||(ue.current=new Date,oe(Pe.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(ke(!0),Le.current={x:Fe.clientX,y:Fe.clientY}))},onPointerUp:()=>{var Fe,et,tt,qe;if(Ne||!me)return;Le.current=null;let ft=Number(((Fe=re.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),bt=Number(((et=re.current)==null?void 0:et.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ft=new Date().getTime()-((tt=ue.current)==null?void 0:tt.getTime()),Wt=q==="x"?ft:bt,as=Math.abs(Wt)/Ft;if(Math.abs(Wt)>=d$||as>.11){oe(Pe.current),(qe=p.onDismiss)==null||qe.call(p,p),V(q==="x"?ft>0?"right":"left":bt>0?"down":"up"),he(),_e(!0),Ce(!1);return}ke(!1),W(null)},onPointerMove:Fe=>{var et,tt,qe,ft;if(!Le.current||!me||((et=window.getSelection())==null?void 0:et.toString().length)>0)return;let bt=Fe.clientY-Le.current.y,Ft=Fe.clientX-Le.current.x,Wt=(tt=e.swipeDirections)!=null?tt:h$(M);!q&&(Math.abs(Ft)>1||Math.abs(bt)>1)&&W(Math.abs(Ft)>Math.abs(bt)?"x":"y");let as={x:0,y:0};q==="y"?(Wt.includes("top")||Wt.includes("bottom"))&&(Wt.includes("top")&&bt<0||Wt.includes("bottom")&&bt>0)&&(as.y=bt):q==="x"&&(Wt.includes("left")||Wt.includes("right"))&&(Wt.includes("left")&&Ft<0||Wt.includes("right")&&Ft>0)&&(as.x=Ft),(Math.abs(as.x)>0||Math.abs(as.y)>0)&&Ce(!0),(qe=re.current)==null||qe.style.setProperty("--swipe-amount-x",`${as.x}px`),(ft=re.current)==null||ft.style.setProperty("--swipe-amount-y",`${as.y}px`)}},Ie&&!p.jsx?Re.createElement("button",{"aria-label":z,"data-disabled":ms,"data-close-button":!0,onClick:ms||!me?()=>{}:()=>{var Fe;he(),(Fe=p.onDismiss)==null||Fe.call(p,p)},className:Rr(F==null?void 0:F.closeButton,(a=p==null?void 0:p.classNames)==null?void 0:a.closeButton)},(i=B==null?void 0:B.close)!=null?i:Y6):null,p.jsx||_.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:Re.createElement(Re.Fragment,null,ge||p.icon||p.promise?Re.createElement("div",{"data-icon":"",className:Rr(F==null?void 0:F.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||nt():null,p.type!=="loading"?p.icon||(B==null?void 0:B[ge])||U6(ge):null):null,Re.createElement("div",{"data-content":"",className:Rr(F==null?void 0:F.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},Re.createElement("div",{"data-title":"",className:Rr(F==null?void 0:F.title,(d=p==null?void 0:p.classNames)==null?void 0:d.title)},typeof p.title=="function"?p.title():p.title),p.description?Re.createElement("div",{"data-description":"",className:Rr(D,Te,F==null?void 0:F.description,(h=p==null?void 0:p.classNames)==null?void 0:h.description)},typeof p.description=="function"?p.description():p.description):null),_.isValidElement(p.cancel)?p.cancel:p.cancel&&Sf(p.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||O,onClick:Fe=>{var et,tt;Sf(p.cancel)&&me&&((tt=(et=p.cancel).onClick)==null||tt.call(et,Fe),he())},className:Rr(F==null?void 0:F.cancelButton,(f=p==null?void 0:p.classNames)==null?void 0:f.cancelButton)},p.cancel.label):null,_.isValidElement(p.action)?p.action:p.action&&Sf(p.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||R,onClick:Fe=>{var et,tt;Sf(p.action)&&((tt=(et=p.action).onClick)==null||tt.call(et,Fe),!Fe.defaultPrevented&&he())},className:Rr(F==null?void 0:F.actionButton,(u=p==null?void 0:p.classNames)==null?void 0:u.actionButton)},p.action.label):null))};function d1(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function m$(e,t){let n={};return[e,t].forEach((r,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?o$:i$;function d(h){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${o}-${h}`]=l:n[`${o}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(l)}),n}var p$=_.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:d,mobileOffset:h,theme:f="light",richColors:u,duration:m,style:p,visibleToasts:w=a$,toastOptions:v,dir:x=d1(),gap:y=c$,loadingIcon:b,icons:j,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:S}=e,[P,T]=Re.useState([]),E=Re.useMemo(()=>Array.from(new Set([r].concat(P.filter(H=>H.position).map(H=>H.position)))),[P,r]),[I,O]=Re.useState([]),[R,C]=Re.useState(!1),[D,A]=Re.useState(!1),[M,Z]=Re.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),X=Re.useRef(null),U=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=Re.useRef(null),B=Re.useRef(!1),z=Re.useCallback(H=>{T(q=>{var W;return(W=q.find(Y=>Y.id===H.id))!=null&&W.delete||Hn.dismiss(H.id),q.filter(({id:Y})=>Y!==H.id)})},[]);return Re.useEffect(()=>Hn.subscribe(H=>{if(H.dismiss){T(q=>q.map(W=>W.id===H.id?{...W,delete:!0}:W));return}setTimeout(()=>{UE.flushSync(()=>{T(q=>{let W=q.findIndex(Y=>Y.id===H.id);return W!==-1?[...q.slice(0,W),{...q[W],...H},...q.slice(W+1)]:[H,...q]})})})}),[]),Re.useEffect(()=>{if(f!=="system"){Z(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Z("dark"):Z("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:q})=>{Z(q?"dark":"light")})}catch{H.addListener(({matches:W})=>{try{Z(W?"dark":"light")}catch(Y){console.error(Y)}})}},[f]),Re.useEffect(()=>{P.length<=1&&C(!1)},[P]),Re.useEffect(()=>{let H=q=>{var W,Y;a.every(V=>q[V]||q.code===V)&&(C(!0),(W=X.current)==null||W.focus()),q.code==="Escape"&&(document.activeElement===X.current||(Y=X.current)!=null&&Y.contains(document.activeElement))&&C(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[a]),Re.useEffect(()=>{if(X.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,B.current=!1)}},[X.current]),Re.createElement("section",{ref:t,"aria-label":`${N} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((H,q)=>{var W;let[Y,V]=H.split("-");return P.length?Re.createElement("ol",{key:H,dir:x==="auto"?d1():x,tabIndex:-1,ref:X,className:l,"data-sonner-toaster":!0,"data-theme":M,"data-y-position":Y,"data-lifted":R&&P.length>1&&!i,"data-x-position":V,style:{"--front-toast-height":`${((W=I[0])==null?void 0:W.height)||0}px`,"--width":`${l$}px`,"--gap":`${y}px`,...p,...m$(d,h)},onBlur:G=>{B.current&&!G.currentTarget.contains(G.relatedTarget)&&(B.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||B.current||(B.current=!0,F.current=G.relatedTarget)},onMouseEnter:()=>C(!0),onMouseMove:()=>C(!0),onMouseLeave:()=>{D||C(!1)},onDragEnd:()=>C(!1),onPointerDown:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||A(!0)},onPointerUp:()=>A(!1)},P.filter(G=>!G.position&&q===0||G.position===H).map((G,ie)=>{var J,le;return Re.createElement(f$,{key:G.id,icons:j,index:ie,toast:G,defaultRichColors:u,duration:(J=v==null?void 0:v.duration)!=null?J:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:w,closeButton:(le=v==null?void 0:v.closeButton)!=null?le:o,interacting:D,position:H,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:z,toasts:P.filter(ye=>ye.position==G.position),heights:I.filter(ye=>ye.position==G.position),setHeights:O,expandByDefault:i,gap:y,loadingIcon:b,expanded:R,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const g$=({...e})=>{const{theme:t="system"}=V6();return s.jsx(p$,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var v$=sb[" useId ".trim().toString()]||(()=>{}),x$=0;function Qr(e){const[t,n]=_.useState(v$());return Fs(()=>{e||n(r=>r??String(x$++))},[e]),e||(t?`radix-${t}`:"")}const y$=["top","right","bottom","left"],ao=Math.min,rr=Math.max,Dm=Math.round,kf=Math.floor,Ca=e=>({x:e,y:e}),b$={left:"right",right:"left",bottom:"top",top:"bottom"},w$={start:"end",end:"start"};function Ey(e,t,n){return rr(e,ao(t,n))}function di(e,t){return typeof e=="function"?e(t):e}function ui(e){return e.split("-")[0]}function cd(e){return e.split("-")[1]}function rw(e){return e==="x"?"y":"x"}function aw(e){return e==="y"?"height":"width"}const _$=new Set(["top","bottom"]);function _a(e){return _$.has(ui(e))?"y":"x"}function iw(e){return rw(_a(e))}function j$(e,t,n){n===void 0&&(n=!1);const r=cd(e),a=iw(e),i=aw(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Fm(o)),[o,Fm(o)]}function N$(e){const t=Fm(e);return[Ty(e),t,Ty(t)]}function Ty(e){return e.replace(/start|end/g,t=>w$[t])}const u1=["left","right"],h1=["right","left"],S$=["top","bottom"],k$=["bottom","top"];function C$(e,t,n){switch(e){case"top":case"bottom":return n?t?h1:u1:t?u1:h1;case"left":case"right":return t?S$:k$;default:return[]}}function E$(e,t,n,r){const a=cd(e);let i=C$(ui(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Ty)))),i}function Fm(e){return e.replace(/left|right|bottom|top/g,t=>b$[t])}function T$(e){return{top:0,right:0,bottom:0,left:0,...e}}function FT(e){return typeof e!="number"?T$(e):{top:e,right:e,bottom:e,left:e}}function $m(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function f1(e,t,n){let{reference:r,floating:a}=e;const i=_a(t),o=iw(t),l=aw(o),d=ui(t),h=i==="y",f=r.x+r.width/2-a.width/2,u=r.y+r.height/2-a.height/2,m=r[l]/2-a[l]/2;let p;switch(d){case"top":p={x:f,y:r.y-a.height};break;case"bottom":p={x:f,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:u};break;case"left":p={x:r.x-a.width,y:u};break;default:p={x:r.x,y:r.y}}switch(cd(t)){case"start":p[o]-=m*(n&&h?-1:1);break;case"end":p[o]+=m*(n&&h?-1:1);break}return p}const P$=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:u}=f1(h,r,d),m=r,p={},w=0;for(let v=0;v<l.length;v++){const{name:x,fn:y}=l[v],{x:b,y:j,data:N,reset:S}=await y({x:f,y:u,initialPlacement:r,placement:m,strategy:a,middlewareData:p,rects:h,platform:o,elements:{reference:e,floating:t}});f=b??f,u=j??u,p={...p,[x]:{...p[x],...N}},S&&w<=50&&(w++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(h=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:f,y:u}=f1(h,m,d)),v=-1)}return{x:f,y:u,placement:m,strategy:a,middlewareData:p}};async function Qu(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:l,strategy:d}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:m=!1,padding:p=0}=di(t,e),w=FT(p),x=l[m?u==="floating"?"reference":"floating":u],y=$m(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:d})),b=u==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},S=$m(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:j,strategy:d}):b);return{top:(y.top-S.top+w.top)/N.y,bottom:(S.bottom-y.bottom+w.bottom)/N.y,left:(y.left-S.left+w.left)/N.x,right:(S.right-y.right+w.right)/N.x}}const A$=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:l,middlewareData:d}=t,{element:h,padding:f=0}=di(e,t)||{};if(h==null)return{};const u=FT(f),m={x:n,y:r},p=iw(a),w=aw(p),v=await o.getDimensions(h),x=p==="y",y=x?"top":"left",b=x?"bottom":"right",j=x?"clientHeight":"clientWidth",N=i.reference[w]+i.reference[p]-m[p]-i.floating[w],S=m[p]-i.reference[p],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let T=P?P[j]:0;(!T||!await(o.isElement==null?void 0:o.isElement(P)))&&(T=l.floating[j]||i.floating[w]);const E=N/2-S/2,I=T/2-v[w]/2-1,O=ao(u[y],I),R=ao(u[b],I),C=O,D=T-v[w]-R,A=T/2-v[w]/2+E,M=Ey(C,A,D),Z=!d.arrow&&cd(a)!=null&&A!==M&&i.reference[w]/2-(A<C?O:R)-v[w]/2<0,X=Z?A<C?A-C:A-D:0;return{[p]:m[p]+X,data:{[p]:M,centerOffset:A-M-X,...Z&&{alignmentOffset:X}},reset:Z}}}),O$=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:d,elements:h}=t,{mainAxis:f=!0,crossAxis:u=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,...x}=di(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=ui(a),b=_a(l),j=ui(l)===l,N=await(d.isRTL==null?void 0:d.isRTL(h.floating)),S=m||(j||!v?[Fm(l)]:N$(l)),P=w!=="none";!m&&P&&S.push(...E$(l,v,w,N));const T=[l,...S],E=await Qu(t,x),I=[];let O=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&I.push(E[y]),u){const A=j$(a,o,N);I.push(E[A[0]],E[A[1]])}if(O=[...O,{placement:a,overflows:I}],!I.every(A=>A<=0)){var R,C;const A=(((R=i.flip)==null?void 0:R.index)||0)+1,M=T[A];if(M&&(!(u==="alignment"?b!==_a(M):!1)||O.every(U=>U.overflows[0]>0&&_a(U.placement)===b)))return{data:{index:A,overflows:O},reset:{placement:M}};let Z=(C=O.filter(X=>X.overflows[0]<=0).sort((X,U)=>X.overflows[1]-U.overflows[1])[0])==null?void 0:C.placement;if(!Z)switch(p){case"bestFit":{var D;const X=(D=O.filter(U=>{if(P){const F=_a(U.placement);return F===b||F==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(F=>F>0).reduce((F,B)=>F+B,0)]).sort((U,F)=>U[1]-F[1])[0])==null?void 0:D[0];X&&(Z=X);break}case"initialPlacement":Z=l;break}if(a!==Z)return{reset:{placement:Z}}}return{}}}};function m1(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function p1(e){return y$.some(t=>e[t]>=0)}const R$=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=di(e,t);switch(r){case"referenceHidden":{const i=await Qu(t,{...a,elementContext:"reference"}),o=m1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:p1(o)}}}case"escaped":{const i=await Qu(t,{...a,altBoundary:!0}),o=m1(i,n.floating);return{data:{escapedOffsets:o,escaped:p1(o)}}}default:return{}}}}},$T=new Set(["left","top"]);async function L$(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=ui(n),l=cd(n),d=_a(n)==="y",h=$T.has(o)?-1:1,f=i&&d?-1:1,u=di(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:w}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof w=="number"&&(p=l==="end"?w*-1:w),d?{x:p*f,y:m*h}:{x:m*h,y:p*f}}const I$=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:l}=t,d=await L$(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+d.x,y:i+d.y,data:{...d,placement:o}}}}},M$=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:y,y:b}=x;return{x:y,y:b}}},...d}=di(e,t),h={x:n,y:r},f=await Qu(t,d),u=_a(ui(a)),m=rw(u);let p=h[m],w=h[u];if(i){const x=m==="y"?"top":"left",y=m==="y"?"bottom":"right",b=p+f[x],j=p-f[y];p=Ey(b,p,j)}if(o){const x=u==="y"?"top":"left",y=u==="y"?"bottom":"right",b=w+f[x],j=w-f[y];w=Ey(b,w,j)}const v=l.fn({...t,[m]:p,[u]:w});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[u]:o}}}}}},D$=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=di(e,t),f={x:n,y:r},u=_a(a),m=rw(u);let p=f[m],w=f[u];const v=di(l,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(d){const j=m==="y"?"height":"width",N=i.reference[m]-i.floating[j]+x.mainAxis,S=i.reference[m]+i.reference[j]-x.mainAxis;p<N?p=N:p>S&&(p=S)}if(h){var y,b;const j=m==="y"?"width":"height",N=$T.has(ui(a)),S=i.reference[u]-i.floating[j]+(N&&((y=o.offset)==null?void 0:y[u])||0)+(N?0:x.crossAxis),P=i.reference[u]+i.reference[j]+(N?0:((b=o.offset)==null?void 0:b[u])||0)-(N?x.crossAxis:0);w<S?w=S:w>P&&(w=P)}return{[m]:p,[u]:w}}}},F$=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:d=()=>{},...h}=di(e,t),f=await Qu(t,h),u=ui(a),m=cd(a),p=_a(a)==="y",{width:w,height:v}=i.floating;let x,y;u==="top"||u==="bottom"?(x=u,y=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=u,x=m==="end"?"top":"bottom");const b=v-f.top-f.bottom,j=w-f.left-f.right,N=ao(v-f[x],b),S=ao(w-f[y],j),P=!t.middlewareData.shift;let T=N,E=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(T=b),P&&!m){const O=rr(f.left,0),R=rr(f.right,0),C=rr(f.top,0),D=rr(f.bottom,0);p?E=w-2*(O!==0||R!==0?O+R:rr(f.left,f.right)):T=v-2*(C!==0||D!==0?C+D:rr(f.top,f.bottom))}await d({...t,availableWidth:E,availableHeight:T});const I=await o.getDimensions(l.floating);return w!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function qp(){return typeof window<"u"}function dd(e){return BT(e)?(e.nodeName||"").toLowerCase():"#document"}function lr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Da(e){var t;return(t=(BT(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function BT(e){return qp()?e instanceof Node||e instanceof lr(e).Node:!1}function na(e){return qp()?e instanceof Element||e instanceof lr(e).Element:!1}function Ia(e){return qp()?e instanceof HTMLElement||e instanceof lr(e).HTMLElement:!1}function g1(e){return!qp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof lr(e).ShadowRoot}const $$=new Set(["inline","contents"]);function Ph(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=ra(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!$$.has(a)}const B$=new Set(["table","td","th"]);function z$(e){return B$.has(dd(e))}const V$=[":popover-open",":modal"];function Hp(e){return V$.some(t=>{try{return e.matches(t)}catch{return!1}})}const U$=["transform","translate","scale","rotate","perspective"],q$=["transform","translate","scale","rotate","perspective","filter"],H$=["paint","layout","strict","content"];function ow(e){const t=lw(),n=na(e)?ra(e):e;return U$.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||q$.some(r=>(n.willChange||"").includes(r))||H$.some(r=>(n.contain||"").includes(r))}function W$(e){let t=io(e);for(;Ia(t)&&!zc(t);){if(ow(t))return t;if(Hp(t))return null;t=io(t)}return null}function lw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const G$=new Set(["html","body","#document"]);function zc(e){return G$.has(dd(e))}function ra(e){return lr(e).getComputedStyle(e)}function Wp(e){return na(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function io(e){if(dd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||g1(e)&&e.host||Da(e);return g1(t)?t.host:t}function zT(e){const t=io(e);return zc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ia(t)&&Ph(t)?t:zT(t)}function eh(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=zT(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=lr(a);if(i){const l=Py(o);return t.concat(o,o.visualViewport||[],Ph(a)?a:[],l&&n?eh(l):[])}return t.concat(a,eh(a,[],n))}function Py(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function VT(e){const t=ra(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Ia(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=Dm(n)!==i||Dm(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function cw(e){return na(e)?e:e.contextElement}function fc(e){const t=cw(e);if(!Ia(t))return Ca(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=VT(t);let o=(i?Dm(n.width):n.width)/r,l=(i?Dm(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const K$=Ca(0);function UT(e){const t=lr(e);return!lw()||!t.visualViewport?K$:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Z$(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==lr(e)?!1:t}function ul(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=cw(e);let o=Ca(1);t&&(r?na(r)&&(o=fc(r)):o=fc(e));const l=Z$(i,n,r)?UT(i):Ca(0);let d=(a.left+l.x)/o.x,h=(a.top+l.y)/o.y,f=a.width/o.x,u=a.height/o.y;if(i){const m=lr(i),p=r&&na(r)?lr(r):r;let w=m,v=Py(w);for(;v&&r&&p!==w;){const x=fc(v),y=v.getBoundingClientRect(),b=ra(v),j=y.left+(v.clientLeft+parseFloat(b.paddingLeft))*x.x,N=y.top+(v.clientTop+parseFloat(b.paddingTop))*x.y;d*=x.x,h*=x.y,f*=x.x,u*=x.y,d+=j,h+=N,w=lr(v),v=Py(w)}}return $m({width:f,height:u,x:d,y:h})}function dw(e,t){const n=Wp(e).scrollLeft;return t?t.left+n:ul(Da(e)).left+n}function qT(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:dw(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function Y$(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Da(r),l=t?Hp(t.floating):!1;if(r===o||l&&i)return n;let d={scrollLeft:0,scrollTop:0},h=Ca(1);const f=Ca(0),u=Ia(r);if((u||!u&&!i)&&((dd(r)!=="body"||Ph(o))&&(d=Wp(r)),Ia(r))){const p=ul(r);h=fc(r),f.x=p.x+r.clientLeft,f.y=p.y+r.clientTop}const m=o&&!u&&!i?qT(o,d,!0):Ca(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+f.x+m.x,y:n.y*h.y-d.scrollTop*h.y+f.y+m.y}}function X$(e){return Array.from(e.getClientRects())}function J$(e){const t=Da(e),n=Wp(e),r=e.ownerDocument.body,a=rr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=rr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dw(e);const l=-n.scrollTop;return ra(r).direction==="rtl"&&(o+=rr(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}function Q$(e,t){const n=lr(e),r=Da(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,d=0;if(a){i=a.width,o=a.height;const h=lw();(!h||h&&t==="fixed")&&(l=a.offsetLeft,d=a.offsetTop)}return{width:i,height:o,x:l,y:d}}const e8=new Set(["absolute","fixed"]);function t8(e,t){const n=ul(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Ia(e)?fc(e):Ca(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,d=a*i.x,h=r*i.y;return{width:o,height:l,x:d,y:h}}function v1(e,t,n){let r;if(t==="viewport")r=Q$(e,n);else if(t==="document")r=J$(Da(e));else if(na(t))r=t8(t,n);else{const a=UT(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return $m(r)}function HT(e,t){const n=io(e);return n===t||!na(n)||zc(n)?!1:ra(n).position==="fixed"||HT(n,t)}function s8(e,t){const n=t.get(e);if(n)return n;let r=eh(e,[],!1).filter(l=>na(l)&&dd(l)!=="body"),a=null;const i=ra(e).position==="fixed";let o=i?io(e):e;for(;na(o)&&!zc(o);){const l=ra(o),d=ow(o);!d&&l.position==="fixed"&&(a=null),(i?!d&&!a:!d&&l.position==="static"&&!!a&&e8.has(a.position)||Ph(o)&&!d&&HT(e,o))?r=r.filter(f=>f!==o):a=l,o=io(o)}return t.set(e,r),r}function n8(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Hp(t)?[]:s8(t,this._c):[].concat(n),r],l=o[0],d=o.reduce((h,f)=>{const u=v1(t,f,a);return h.top=rr(u.top,h.top),h.right=ao(u.right,h.right),h.bottom=ao(u.bottom,h.bottom),h.left=rr(u.left,h.left),h},v1(t,l,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function r8(e){const{width:t,height:n}=VT(e);return{width:t,height:n}}function a8(e,t,n){const r=Ia(t),a=Da(t),i=n==="fixed",o=ul(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const d=Ca(0);function h(){d.x=dw(a)}if(r||!r&&!i)if((dd(t)!=="body"||Ph(a))&&(l=Wp(t)),r){const p=ul(t,!0,i,t);d.x=p.x+t.clientLeft,d.y=p.y+t.clientTop}else a&&h();i&&!r&&a&&h();const f=a&&!r&&!i?qT(a,l):Ca(0),u=o.left+l.scrollLeft-d.x-f.x,m=o.top+l.scrollTop-d.y-f.y;return{x:u,y:m,width:o.width,height:o.height}}function zv(e){return ra(e).position==="static"}function x1(e,t){if(!Ia(e)||ra(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Da(e)===n&&(n=n.ownerDocument.body),n}function WT(e,t){const n=lr(e);if(Hp(e))return n;if(!Ia(e)){let a=io(e);for(;a&&!zc(a);){if(na(a)&&!zv(a))return a;a=io(a)}return n}let r=x1(e,t);for(;r&&z$(r)&&zv(r);)r=x1(r,t);return r&&zc(r)&&zv(r)&&!ow(r)?n:r||W$(e)||n}const i8=async function(e){const t=this.getOffsetParent||WT,n=this.getDimensions,r=await n(e.floating);return{reference:a8(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function o8(e){return ra(e).direction==="rtl"}const l8={convertOffsetParentRelativeRectToViewportRelativeRect:Y$,getDocumentElement:Da,getClippingRect:n8,getOffsetParent:WT,getElementRects:i8,getClientRects:X$,getDimensions:r8,getScale:fc,isElement:na,isRTL:o8};function GT(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function c8(e,t){let n=null,r;const a=Da(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),i();const h=e.getBoundingClientRect(),{left:f,top:u,width:m,height:p}=h;if(l||t(),!m||!p)return;const w=kf(u),v=kf(a.clientWidth-(f+m)),x=kf(a.clientHeight-(u+p)),y=kf(f),j={rootMargin:-w+"px "+-v+"px "+-x+"px "+-y+"px",threshold:rr(0,ao(1,d))||1};let N=!0;function S(P){const T=P[0].intersectionRatio;if(T!==d){if(!N)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!GT(h,e.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(S,{...j,root:a.ownerDocument})}catch{n=new IntersectionObserver(S,j)}n.observe(e)}return o(!0),i}function d8(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=cw(e),f=a||i?[...h?eh(h):[],...eh(t)]:[];f.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const u=h&&l?c8(h,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(y=>{let[b]=y;b&&b.target===h&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var j;(j=p)==null||j.observe(t)})),n()}),h&&!d&&p.observe(h),p.observe(t));let w,v=d?ul(e):null;d&&x();function x(){const y=ul(e);v&&!GT(v,y)&&n(),v=y,w=requestAnimationFrame(x)}return n(),()=>{var y;f.forEach(b=>{a&&b.removeEventListener("scroll",n),i&&b.removeEventListener("resize",n)}),u==null||u(),(y=p)==null||y.disconnect(),p=null,d&&cancelAnimationFrame(w)}}const u8=I$,h8=M$,f8=O$,m8=F$,p8=R$,y1=A$,g8=D$,v8=(e,t,n)=>{const r=new Map,a={platform:l8,...n},i={...a.platform,_c:r};return P$(e,t,{...a,platform:i})};var x8=typeof document<"u",y8=function(){},Qf=x8?_.useLayoutEffect:y8;function Bm(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Bm(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Bm(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function KT(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function b1(e,t){const n=KT(e);return Math.round(t*n)/n}function Vv(e){const t=_.useRef(e);return Qf(()=>{t.current=e}),t}function b8(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:d,open:h}=e,[f,u]=_.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=_.useState(r);Bm(m,r)||p(r);const[w,v]=_.useState(null),[x,y]=_.useState(null),b=_.useCallback(U=>{U!==P.current&&(P.current=U,v(U))},[]),j=_.useCallback(U=>{U!==T.current&&(T.current=U,y(U))},[]),N=i||w,S=o||x,P=_.useRef(null),T=_.useRef(null),E=_.useRef(f),I=d!=null,O=Vv(d),R=Vv(a),C=Vv(h),D=_.useCallback(()=>{if(!P.current||!T.current)return;const U={placement:t,strategy:n,middleware:m};R.current&&(U.platform=R.current),v8(P.current,T.current,U).then(F=>{const B={...F,isPositioned:C.current!==!1};A.current&&!Bm(E.current,B)&&(E.current=B,po.flushSync(()=>{u(B)}))})},[m,t,n,R,C]);Qf(()=>{h===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,u(U=>({...U,isPositioned:!1})))},[h]);const A=_.useRef(!1);Qf(()=>(A.current=!0,()=>{A.current=!1}),[]),Qf(()=>{if(N&&(P.current=N),S&&(T.current=S),N&&S){if(O.current)return O.current(N,S,D);D()}},[N,S,D,O,I]);const M=_.useMemo(()=>({reference:P,floating:T,setReference:b,setFloating:j}),[b,j]),Z=_.useMemo(()=>({reference:N,floating:S}),[N,S]),X=_.useMemo(()=>{const U={position:n,left:0,top:0};if(!Z.floating)return U;const F=b1(Z.floating,f.x),B=b1(Z.floating,f.y);return l?{...U,transform:"translate("+F+"px, "+B+"px)",...KT(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:B}},[n,l,Z.floating,f.x,f.y]);return _.useMemo(()=>({...f,update:D,refs:M,elements:Z,floatingStyles:X}),[f,D,M,Z,X])}const w8=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?y1({element:r.current,padding:a}).fn(n):{}:r?y1({element:r,padding:a}).fn(n):{}}}},_8=(e,t)=>({...u8(e),options:[e,t]}),j8=(e,t)=>({...h8(e),options:[e,t]}),N8=(e,t)=>({...g8(e),options:[e,t]}),S8=(e,t)=>({...f8(e),options:[e,t]}),k8=(e,t)=>({...m8(e),options:[e,t]}),C8=(e,t)=>({...p8(e),options:[e,t]}),E8=(e,t)=>({...w8(e),options:[e,t]});var T8="Arrow",ZT=_.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return s.jsx(ut.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});ZT.displayName=T8;var P8=ZT;function Gp(e){const[t,n]=_.useState(void 0);return Fs(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const d=i.borderBoxSize,h=Array.isArray(d)?d[0]:d;o=h.inlineSize,l=h.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var uw="Popper",[YT,ud]=jn(uw),[A8,XT]=YT(uw),JT=e=>{const{__scopePopper:t,children:n}=e,[r,a]=_.useState(null);return s.jsx(A8,{scope:t,anchor:r,onAnchorChange:a,children:n})};JT.displayName=uw;var QT="PopperAnchor",eP=_.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=XT(QT,n),o=_.useRef(null),l=Nt(t,o);return _.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(ut.div,{...a,ref:l})});eP.displayName=QT;var hw="PopperContent",[O8,R8]=YT(hw),tP=_.forwardRef((e,t)=>{var G,ie,J,le,ye,ke;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:u="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:w,...v}=e,x=XT(hw,n),[y,b]=_.useState(null),j=Nt(t,Ne=>b(Ne)),[N,S]=_.useState(null),P=Gp(N),T=(P==null?void 0:P.width)??0,E=(P==null?void 0:P.height)??0,I=r+(i!=="center"?"-"+i:""),O=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},R=Array.isArray(h)?h:[h],C=R.length>0,D={padding:O,boundary:R.filter(I8),altBoundary:C},{refs:A,floatingStyles:M,placement:Z,isPositioned:X,middlewareData:U}=b8({strategy:"fixed",placement:I,whileElementsMounted:(...Ne)=>d8(...Ne,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[_8({mainAxis:a+E,alignmentAxis:o}),d&&j8({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?N8():void 0,...D}),d&&S8({...D}),k8({...D,apply:({elements:Ne,rects:_e,availableWidth:ne,availableHeight:Ce})=>{const{width:ve,height:oe}=_e.reference,de=Ne.floating.style;de.setProperty("--radix-popper-available-width",`${ne}px`),de.setProperty("--radix-popper-available-height",`${Ce}px`),de.setProperty("--radix-popper-anchor-width",`${ve}px`),de.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),N&&E8({element:N,padding:l}),M8({arrowWidth:T,arrowHeight:E}),m&&C8({strategy:"referenceHidden",...D})]}),[F,B]=rP(Z),z=Ps(w);Fs(()=>{X&&(z==null||z())},[X,z]);const H=(G=U.arrow)==null?void 0:G.x,q=(ie=U.arrow)==null?void 0:ie.y,W=((J=U.arrow)==null?void 0:J.centerOffset)!==0,[Y,V]=_.useState();return Fs(()=>{y&&V(window.getComputedStyle(y).zIndex)},[y]),s.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:X?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(le=U.transformOrigin)==null?void 0:le.x,(ye=U.transformOrigin)==null?void 0:ye.y].join(" "),...((ke=U.hide)==null?void 0:ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(O8,{scope:n,placedSide:F,onArrowChange:S,arrowX:H,arrowY:q,shouldHideArrow:W,children:s.jsx(ut.div,{"data-side":F,"data-align":B,...v,ref:j,style:{...v.style,animation:X?void 0:"none"}})})})});tP.displayName=hw;var sP="PopperArrow",L8={top:"bottom",right:"left",bottom:"top",left:"right"},nP=_.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=R8(sP,r),o=L8[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(P8,{...a,ref:n,style:{...a.style,display:"block"}})})});nP.displayName=sP;function I8(e){return e!==null}var M8=e=>({name:"transformOrigin",options:e,fn(t){var x,y,b;const{placement:n,rects:r,middlewareData:a}=t,o=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[h,f]=rP(n),u={start:"0%",center:"50%",end:"100%"}[f],m=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,p=(((b=a.arrow)==null?void 0:b.y)??0)+d/2;let w="",v="";return h==="bottom"?(w=o?u:`${m}px`,v=`${-d}px`):h==="top"?(w=o?u:`${m}px`,v=`${r.floating.height+d}px`):h==="right"?(w=`${-d}px`,v=o?u:`${p}px`):h==="left"&&(w=`${r.floating.width+d}px`,v=o?u:`${p}px`),{data:{x:w,y:v}}}});function rP(e){const[t,n="center"]=e.split("-");return[t,n]}var fw=JT,mw=eP,pw=tP,gw=nP,[Kp,tie]=jn("Tooltip",[ud]),Zp=ud(),aP="TooltipProvider",D8=700,Ay="tooltip.open",[F8,vw]=Kp(aP),iP=e=>{const{__scopeTooltip:t,delayDuration:n=D8,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=_.useRef(!0),l=_.useRef(!1),d=_.useRef(0);return _.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),s.jsx(F8,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:_.useCallback(h=>{l.current=h},[]),disableHoverableContent:a,children:i})};iP.displayName=aP;var th="Tooltip",[$8,Yp]=Kp(th),oP=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,d=vw(th,e.__scopeTooltip),h=Zp(t),[f,u]=_.useState(null),m=Qr(),p=_.useRef(0),w=o??d.disableHoverableContent,v=l??d.delayDuration,x=_.useRef(!1),[y,b]=ta({prop:r,defaultProp:a??!1,onChange:T=>{T?(d.onOpen(),document.dispatchEvent(new CustomEvent(Ay))):d.onClose(),i==null||i(T)},caller:th}),j=_.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),N=_.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x.current=!1,b(!0)},[b]),S=_.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),P=_.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{x.current=!0,b(!0),p.current=0},v)},[v,b]);return _.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),s.jsx(fw,{...h,children:s.jsx($8,{scope:t,contentId:m,open:y,stateAttribute:j,trigger:f,onTriggerChange:u,onTriggerEnter:_.useCallback(()=>{d.isOpenDelayedRef.current?P():N()},[d.isOpenDelayedRef,P,N]),onTriggerLeave:_.useCallback(()=>{w?S():(window.clearTimeout(p.current),p.current=0)},[S,w]),onOpen:N,onClose:S,disableHoverableContent:w,children:n})})};oP.displayName=th;var Oy="TooltipTrigger",lP=_.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Yp(Oy,n),i=vw(Oy,n),o=Zp(n),l=_.useRef(null),d=Nt(t,l,a.onTriggerChange),h=_.useRef(!1),f=_.useRef(!1),u=_.useCallback(()=>h.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),s.jsx(mw,{asChild:!0,...o,children:s.jsx(ut.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:d,onPointerMove:Ze(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ze(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:Ze(e.onPointerDown,()=>{a.open&&a.onClose(),h.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Ze(e.onFocus,()=>{h.current||a.onOpen()}),onBlur:Ze(e.onBlur,a.onClose),onClick:Ze(e.onClick,a.onClose)})})});lP.displayName=Oy;var B8="TooltipPortal",[sie,z8]=Kp(B8,{forceMount:void 0}),Vc="TooltipContent",cP=_.forwardRef((e,t)=>{const n=z8(Vc,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=Yp(Vc,e.__scopeTooltip);return s.jsx(fn,{present:r||o.open,children:o.disableHoverableContent?s.jsx(dP,{side:a,...i,ref:t}):s.jsx(V8,{side:a,...i,ref:t})})}),V8=_.forwardRef((e,t)=>{const n=Yp(Vc,e.__scopeTooltip),r=vw(Vc,e.__scopeTooltip),a=_.useRef(null),i=Nt(t,a),[o,l]=_.useState(null),{trigger:d,onClose:h}=n,f=a.current,{onPointerInTransitChange:u}=r,m=_.useCallback(()=>{l(null),u(!1)},[u]),p=_.useCallback((w,v)=>{const x=w.currentTarget,y={x:w.clientX,y:w.clientY},b=G8(y,x.getBoundingClientRect()),j=K8(y,b),N=Z8(v.getBoundingClientRect()),S=X8([...j,...N]);l(S),u(!0)},[u]);return _.useEffect(()=>()=>m(),[m]),_.useEffect(()=>{if(d&&f){const w=x=>p(x,f),v=x=>p(x,d);return d.addEventListener("pointerleave",w),f.addEventListener("pointerleave",v),()=>{d.removeEventListener("pointerleave",w),f.removeEventListener("pointerleave",v)}}},[d,f,p,m]),_.useEffect(()=>{if(o){const w=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},b=(d==null?void 0:d.contains(x))||(f==null?void 0:f.contains(x)),j=!Y8(y,o);b?m():j&&(m(),h())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[d,f,o,h,m]),s.jsx(dP,{...e,ref:i})}),[U8,q8]=Kp(th,{isInside:!1}),H8=XD("TooltipContent"),dP=_.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,d=Yp(Vc,n),h=Zp(n),{onClose:f}=d;return _.useEffect(()=>(document.addEventListener(Ay,f),()=>document.removeEventListener(Ay,f)),[f]),_.useEffect(()=>{if(d.trigger){const u=m=>{const p=m.target;p!=null&&p.contains(d.trigger)&&f()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[d.trigger,f]),s.jsx(id,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:u=>u.preventDefault(),onDismiss:f,children:s.jsxs(pw,{"data-state":d.stateAttribute,...h,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(H8,{children:r}),s.jsx(U8,{scope:n,isInside:!0,children:s.jsx(yF,{id:d.contentId,role:"tooltip",children:a||r})})]})})});cP.displayName=Vc;var uP="TooltipArrow",W8=_.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Zp(n);return q8(uP,n).isInside?null:s.jsx(gw,{...a,...r,ref:t})});W8.displayName=uP;function G8(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function K8(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Z8(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function Y8(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],d=t[o],h=l.x,f=l.y,u=d.x,m=d.y;f>r!=m>r&&n<(u-h)*(r-f)/(m-f)+h&&(a=!a)}return a}function X8(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),J8(t)}function J8(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Q8=iP,eB=oP,tB=lP,hP=cP;const sB=Q8,Uv=eB,qv=tB,em=_.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(hP,{ref:r,sideOffset:t,className:it("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));em.displayName=hP.displayName;var Xp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jp=typeof window>"u"||"Deno"in globalThis;function Fr(){}function nB(e,t){return typeof e=="function"?e(t):e}function rB(e){return typeof e=="number"&&e>=0&&e!==1/0}function aB(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ry(e,t){return typeof e=="function"?e(t):e}function iB(e,t){return typeof e=="function"?e(t):e}function w1(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==xw(o,t.options))return!1}else if(!nh(t.queryKey,o))return!1}if(n!=="all"){const d=t.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function _1(e,t){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(sh(t.options.mutationKey)!==sh(i))return!1}else if(!nh(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function xw(e,t){return((t==null?void 0:t.queryKeyHashFn)||sh)(e)}function sh(e){return JSON.stringify(e,(t,n)=>Ly(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function nh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>nh(e[n],t[n])):!1}function fP(e,t){if(e===t)return e;const n=j1(e)&&j1(t);if(n||Ly(e)&&Ly(t)){const r=n?e:Object.keys(e),a=r.length,i=n?t:Object.keys(t),o=i.length,l=n?[]:{},d=new Set(r);let h=0;for(let f=0;f<o;f++){const u=n?f:i[f];(!n&&d.has(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,h++):(l[u]=fP(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&h++)}return a===o&&h===a?e:l}return t}function j1(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ly(e){if(!N1(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!N1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function N1(e){return Object.prototype.toString.call(e)==="[object Object]"}function oB(e){return new Promise(t=>{setTimeout(t,e)})}function lB(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?fP(e,t):t}function cB(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function dB(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var yw=Symbol();function mP(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===yw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var zo,Di,Nc,j2,uB=(j2=class extends Xp{constructor(){super();zt(this,zo);zt(this,Di);zt(this,Nc);St(this,Nc,t=>{if(!Jp&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){De(this,Di)||this.setEventListener(De(this,Nc))}onUnsubscribe(){var t;this.hasListeners()||((t=De(this,Di))==null||t.call(this),St(this,Di,void 0))}setEventListener(t){var n;St(this,Nc,t),(n=De(this,Di))==null||n.call(this),St(this,Di,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){De(this,zo)!==t&&(St(this,zo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof De(this,zo)=="boolean"?De(this,zo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},zo=new WeakMap,Di=new WeakMap,Nc=new WeakMap,j2),pP=new uB,Sc,Fi,kc,N2,hB=(N2=class extends Xp{constructor(){super();zt(this,Sc,!0);zt(this,Fi);zt(this,kc);St(this,kc,t=>{if(!Jp&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){De(this,Fi)||this.setEventListener(De(this,kc))}onUnsubscribe(){var t;this.hasListeners()||((t=De(this,Fi))==null||t.call(this),St(this,Fi,void 0))}setEventListener(t){var n;St(this,kc,t),(n=De(this,Fi))==null||n.call(this),St(this,Fi,t(this.setOnline.bind(this)))}setOnline(t){De(this,Sc)!==t&&(St(this,Sc,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return De(this,Sc)}},Sc=new WeakMap,Fi=new WeakMap,kc=new WeakMap,N2),zm=new hB;function fB(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function mB(e){return Math.min(1e3*2**e,3e4)}function gP(e){return(e??"online")==="online"?zm.isOnline():!0}var vP=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Hv(e){return e instanceof vP}function xP(e){let t=!1,n=0,r=!1,a;const i=fB(),o=v=>{var x;r||(m(new vP(v)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},d=()=>{t=!1},h=()=>pP.isFocused()&&(e.networkMode==="always"||zm.isOnline())&&e.canRun(),f=()=>gP(e.networkMode)&&e.canRun(),u=v=>{var x;r||(r=!0,(x=e.onSuccess)==null||x.call(e,v),a==null||a(),i.resolve(v))},m=v=>{var x;r||(r=!0,(x=e.onError)==null||x.call(e,v),a==null||a(),i.reject(v))},p=()=>new Promise(v=>{var x;a=y=>{(r||h())&&v(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;a=void 0,r||(v=e.onContinue)==null||v.call(e)}),w=()=>{if(r)return;let v;const x=n===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(u).catch(y=>{var P;if(r)return;const b=e.retry??(Jp?0:3),j=e.retryDelay??mB,N=typeof j=="function"?j(n,y):j,S=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(t||!S){m(y);return}n++,(P=e.onFail)==null||P.call(e,n,y),oB(N).then(()=>h()?void 0:p()).then(()=>{t?m(y):w()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:d,canStart:f,start:()=>(f()?w():p().then(w),i)}}var pB=e=>setTimeout(e,0);function gB(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=pB;const i=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(d=>{n(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var Tn=gB(),Vo,S2,yP=(S2=class{constructor(){zt(this,Vo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rB(this.gcTime)&&St(this,Vo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Jp?1/0:5*60*1e3))}clearGcTimeout(){De(this,Vo)&&(clearTimeout(De(this,Vo)),St(this,Vo,void 0))}},Vo=new WeakMap,S2),Cc,Uo,yr,qo,vn,vh,Ho,$r,Ga,k2,vB=(k2=class extends yP{constructor(t){super();zt(this,$r);zt(this,Cc);zt(this,Uo);zt(this,yr);zt(this,qo);zt(this,vn);zt(this,vh);zt(this,Ho);St(this,Ho,!1),St(this,vh,t.defaultOptions),this.setOptions(t.options),this.observers=[],St(this,qo,t.client),St(this,yr,De(this,qo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,St(this,Cc,yB(this.options)),this.state=t.state??De(this,Cc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=De(this,vn))==null?void 0:t.promise}setOptions(t){this.options={...De(this,vh),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&De(this,yr).remove(this)}setData(t,n){const r=lB(this.state.data,t,this.options);return mn(this,$r,Ga).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){mn(this,$r,Ga).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=De(this,vn))==null?void 0:r.promise;return(a=De(this,vn))==null||a.cancel(t),n?n.then(Fr).catch(Fr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(De(this,Cc))}isActive(){return this.observers.some(t=>iB(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ry(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!aB(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=De(this,vn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=De(this,vn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),De(this,yr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(De(this,vn)&&(De(this,Ho)?De(this,vn).cancel({revert:!0}):De(this,vn).cancelRetry()),this.scheduleGc()),De(this,yr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||mn(this,$r,Ga).call(this,{type:"invalidate"})}fetch(t,n){var h,f,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(De(this,vn))return De(this,vn).continueRetry(),De(this,vn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(St(this,Ho,!0),r.signal)})},i=()=>{const m=mP(this.options,n),w=(()=>{const v={client:De(this,qo),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return St(this,Ho,!1),this.options.persister?this.options.persister(m,w,this):m(w)},l=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:De(this,qo),state:this.state,fetchFn:i};return a(m),m})();(h=this.options.behavior)==null||h.onFetch(l,this),St(this,Uo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&mn(this,$r,Ga).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta});const d=m=>{var p,w,v,x;Hv(m)&&m.silent||mn(this,$r,Ga).call(this,{type:"error",error:m}),Hv(m)||((w=(p=De(this,yr).config).onError)==null||w.call(p,m,this),(x=(v=De(this,yr).config).onSettled)==null||x.call(v,this.state.data,m,this)),this.scheduleGc()};return St(this,vn,xP({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var p,w,v,x;if(m===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){d(y);return}(w=(p=De(this,yr).config).onSuccess)==null||w.call(p,m,this),(x=(v=De(this,yr).config).onSettled)==null||x.call(v,m,this.state.error,this),this.scheduleGc()},onError:d,onFail:(m,p)=>{mn(this,$r,Ga).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{mn(this,$r,Ga).call(this,{type:"pause"})},onContinue:()=>{mn(this,$r,Ga).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),De(this,vn).start()}},Cc=new WeakMap,Uo=new WeakMap,yr=new WeakMap,qo=new WeakMap,vn=new WeakMap,vh=new WeakMap,Ho=new WeakMap,$r=new WeakSet,Ga=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...xB(r.data,this.options),fetchMeta:t.meta??null};case"success":return St(this,Uo,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Hv(a)&&a.revert&&De(this,Uo)?{...De(this,Uo),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),De(this,yr).notify({query:this,type:"updated",action:t})})},k2);function xB(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gP(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function yB(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var pa,C2,bB=(C2=class extends Xp{constructor(t={}){super();zt(this,pa);this.config=t,St(this,pa,new Map)}build(t,n,r){const a=n.queryKey,i=n.queryHash??xw(a,n);let o=this.get(i);return o||(o=new vB({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){De(this,pa).has(t.queryHash)||(De(this,pa).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=De(this,pa).get(t.queryHash);n&&(t.destroy(),n===t&&De(this,pa).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return De(this,pa).get(t)}getAll(){return[...De(this,pa).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>w1(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>w1(t,r)):n}notify(t){Tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},pa=new WeakMap,C2),ga,kn,Wo,va,Ti,E2,wB=(E2=class extends yP{constructor(t){super();zt(this,va);zt(this,ga);zt(this,kn);zt(this,Wo);this.mutationId=t.mutationId,St(this,kn,t.mutationCache),St(this,ga,[]),this.state=t.state||_B(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){De(this,ga).includes(t)||(De(this,ga).push(t),this.clearGcTimeout(),De(this,kn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){St(this,ga,De(this,ga).filter(n=>n!==t)),this.scheduleGc(),De(this,kn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){De(this,ga).length||(this.state.status==="pending"?this.scheduleGc():De(this,kn).remove(this))}continue(){var t;return((t=De(this,Wo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,d,h,f,u,m,p,w,v,x,y,b,j,N,S,P,T,E;const n=()=>{mn(this,va,Ti).call(this,{type:"continue"})};St(this,Wo,xP({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,O)=>{mn(this,va,Ti).call(this,{type:"failed",failureCount:I,error:O})},onPause:()=>{mn(this,va,Ti).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>De(this,kn).canRun(this)}));const r=this.state.status==="pending",a=!De(this,Wo).canStart();try{if(r)n();else{mn(this,va,Ti).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=De(this,kn).config).onMutate)==null?void 0:o.call(i,t,this));const O=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,t));O!==this.state.context&&mn(this,va,Ti).call(this,{type:"pending",context:O,variables:t,isPaused:a})}const I=await De(this,Wo).start();return await((f=(h=De(this,kn).config).onSuccess)==null?void 0:f.call(h,I,t,this.state.context,this)),await((m=(u=this.options).onSuccess)==null?void 0:m.call(u,I,t,this.state.context)),await((w=(p=De(this,kn).config).onSettled)==null?void 0:w.call(p,I,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,I,null,t,this.state.context)),mn(this,va,Ti).call(this,{type:"success",data:I}),I}catch(I){try{throw await((b=(y=De(this,kn).config).onError)==null?void 0:b.call(y,I,t,this.state.context,this)),await((N=(j=this.options).onError)==null?void 0:N.call(j,I,t,this.state.context)),await((P=(S=De(this,kn).config).onSettled)==null?void 0:P.call(S,void 0,I,this.state.variables,this.state.context,this)),await((E=(T=this.options).onSettled)==null?void 0:E.call(T,void 0,I,t,this.state.context)),I}finally{mn(this,va,Ti).call(this,{type:"error",error:I})}}finally{De(this,kn).runNext(this)}}},ga=new WeakMap,kn=new WeakMap,Wo=new WeakMap,va=new WeakSet,Ti=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Tn.batch(()=>{De(this,ga).forEach(r=>{r.onMutationUpdate(t)}),De(this,kn).notify({mutation:this,type:"updated",action:t})})},E2);function _B(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ja,Br,xh,T2,jB=(T2=class extends Xp{constructor(t={}){super();zt(this,Ja);zt(this,Br);zt(this,xh);this.config=t,St(this,Ja,new Set),St(this,Br,new Map),St(this,xh,0)}build(t,n,r){const a=new wB({mutationCache:this,mutationId:++rf(this,xh)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){De(this,Ja).add(t);const n=Cf(t);if(typeof n=="string"){const r=De(this,Br).get(n);r?r.push(t):De(this,Br).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(De(this,Ja).delete(t)){const n=Cf(t);if(typeof n=="string"){const r=De(this,Br).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&De(this,Br).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Cf(t);if(typeof n=="string"){const r=De(this,Br).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=Cf(t);if(typeof n=="string"){const a=(r=De(this,Br).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Tn.batch(()=>{De(this,Ja).forEach(t=>{this.notify({type:"removed",mutation:t})}),De(this,Ja).clear(),De(this,Br).clear()})}getAll(){return Array.from(De(this,Ja))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>_1(n,r))}findAll(t={}){return this.getAll().filter(n=>_1(t,n))}notify(t){Tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Tn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Fr))))}},Ja=new WeakMap,Br=new WeakMap,xh=new WeakMap,T2);function Cf(e){var t;return(t=e.options.scope)==null?void 0:t.id}function S1(e){return{onFetch:(t,n)=>{var f,u,m,p,w;const r=t.options,a=(m=(u=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:u.fetchMore)==null?void 0:m.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const h=async()=>{let v=!1;const x=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=mP(t.options,t.fetchOptions),b=async(j,N,S)=>{if(v)return Promise.reject();if(N==null&&j.pages.length)return Promise.resolve(j);const T=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:N,direction:S?"backward":"forward",meta:t.options.meta};return x(R),R})(),E=await y(T),{maxPages:I}=t.options,O=S?dB:cB;return{pages:O(j.pages,E,I),pageParams:O(j.pageParams,N,I)}};if(a&&i.length){const j=a==="backward",N=j?NB:k1,S={pages:i,pageParams:o},P=N(r,S);l=await b(S,P,j)}else{const j=e??i.length;do{const N=d===0?o[0]??r.initialPageParam:k1(r,l);if(d>0&&N==null)break;l=await b(l,N),d++}while(d<j)}return l};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function k1(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function NB(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var ks,$i,Bi,Ec,Tc,zi,Pc,Ac,P2,SB=(P2=class{constructor(e={}){zt(this,ks);zt(this,$i);zt(this,Bi);zt(this,Ec);zt(this,Tc);zt(this,zi);zt(this,Pc);zt(this,Ac);St(this,ks,e.queryCache||new bB),St(this,$i,e.mutationCache||new jB),St(this,Bi,e.defaultOptions||{}),St(this,Ec,new Map),St(this,Tc,new Map),St(this,zi,0)}mount(){rf(this,zi)._++,De(this,zi)===1&&(St(this,Pc,pP.subscribe(async e=>{e&&(await this.resumePausedMutations(),De(this,ks).onFocus())})),St(this,Ac,zm.subscribe(async e=>{e&&(await this.resumePausedMutations(),De(this,ks).onOnline())})))}unmount(){var e,t;rf(this,zi)._--,De(this,zi)===0&&((e=De(this,Pc))==null||e.call(this),St(this,Pc,void 0),(t=De(this,Ac))==null||t.call(this),St(this,Ac,void 0))}isFetching(e){return De(this,ks).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return De(this,$i).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=De(this,ks).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=De(this,ks).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Ry(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return De(this,ks).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=De(this,ks).get(r.queryHash),i=a==null?void 0:a.state.data,o=nB(t,i);if(o!==void 0)return De(this,ks).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Tn.batch(()=>De(this,ks).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=De(this,ks).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=De(this,ks);Tn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=De(this,ks);return Tn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Tn.batch(()=>De(this,ks).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Fr).catch(Fr)}invalidateQueries(e,t={}){return Tn.batch(()=>(De(this,ks).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Tn.batch(()=>De(this,ks).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(Fr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Fr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=De(this,ks).build(this,t);return n.isStaleByTime(Ry(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Fr).catch(Fr)}fetchInfiniteQuery(e){return e.behavior=S1(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Fr).catch(Fr)}ensureInfiniteQueryData(e){return e.behavior=S1(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return zm.isOnline()?De(this,$i).resumePausedMutations():Promise.resolve()}getQueryCache(){return De(this,ks)}getMutationCache(){return De(this,$i)}getDefaultOptions(){return De(this,Bi)}setDefaultOptions(e){St(this,Bi,e)}setQueryDefaults(e,t){De(this,Ec).set(sh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...De(this,Ec).values()],n={};return t.forEach(r=>{nh(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){De(this,Tc).set(sh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...De(this,Tc).values()],n={};return t.forEach(r=>{nh(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...De(this,Bi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=xw(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===yw&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...De(this,Bi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){De(this,ks).clear(),De(this,$i).clear()}},ks=new WeakMap,$i=new WeakMap,Bi=new WeakMap,Ec=new WeakMap,Tc=new WeakMap,zi=new WeakMap,Pc=new WeakMap,Ac=new WeakMap,P2),kB=_.createContext(void 0),CB=({client:e,children:t})=>(_.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(kB.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rh(){return rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rh.apply(this,arguments)}var qi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qi||(qi={}));const C1="popstate";function EB(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:l}=r.location;return Iy("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:wP(a)}return PB(t,n,null,e)}function Ks(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TB(){return Math.random().toString(36).substr(2,8)}function E1(e,t){return{usr:e.state,key:e.key,idx:t}}function Iy(e,t,n,r){return n===void 0&&(n=null),rh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?hd(t):t,{state:n,key:t&&t.key||r||TB()})}function wP(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function hd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function PB(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=qi.Pop,d=null,h=f();h==null&&(h=0,o.replaceState(rh({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function u(){l=qi.Pop;let x=f(),y=x==null?null:x-h;h=x,d&&d({action:l,location:v.location,delta:y})}function m(x,y){l=qi.Push;let b=Iy(v.location,x,y);h=f()+1;let j=E1(b,h),N=v.createHref(b);try{o.pushState(j,"",N)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(N)}i&&d&&d({action:l,location:v.location,delta:1})}function p(x,y){l=qi.Replace;let b=Iy(v.location,x,y);h=f();let j=E1(b,h),N=v.createHref(b);o.replaceState(j,"",N),i&&d&&d({action:l,location:v.location,delta:0})}function w(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof x=="string"?x:wP(x);return b=b.replace(/ $/,"%20"),Ks(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let v={get action(){return l},get location(){return e(a,o)},listen(x){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(C1,u),d=x,()=>{a.removeEventListener(C1,u),d=null}},createHref(x){return t(a,x)},createURL:w,encodeLocation(x){let y=w(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:p,go(x){return o.go(x)}};return v}var T1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(T1||(T1={}));function AB(e,t,n){return n===void 0&&(n="/"),OB(e,t,n,!1)}function OB(e,t,n,r){let a=typeof t=="string"?hd(t):t,i=NP(a.pathname||"/",n);if(i==null)return null;let o=_P(e);RB(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let h=qB(i);l=VB(o[d],h,r)}return l}function _P(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(Ks(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=Xo([r,d.relativePath]),f=n.concat(d);i.children&&i.children.length>0&&(Ks(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),_P(i.children,t,f,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:BB(h,i.index),routesMeta:f})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let d of jP(i.path))a(i,o,d)}),t}function jP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=jP(r.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function RB(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:zB(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const LB=/^:[\w-]+$/,IB=3,MB=2,DB=1,FB=10,$B=-2,P1=e=>e==="*";function BB(e,t){let n=e.split("/"),r=n.length;return n.some(P1)&&(r+=$B),t&&(r+=MB),n.filter(a=>!P1(a)).reduce((a,i)=>a+(LB.test(i)?IB:i===""?DB:FB),r)}function zB(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function VB(e,t,n){let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],h=l===r.length-1,f=i==="/"?t:t.slice(i.length)||"/",u=A1({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),m=d.route;if(!u&&h&&n&&!r[r.length-1].route.index&&(u=A1({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:Xo([i,u.pathname]),pathnameBase:YB(Xo([i,u.pathnameBase])),route:m}),u.pathnameBase!=="/"&&(i=Xo([i,u.pathnameBase]))}return o}function A1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=UB(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((h,f,u)=>{let{paramName:m,isOptional:p}=f;if(m==="*"){let v=l[u]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const w=l[u];return p&&!w?h[m]=void 0:h[m]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:e}}function UB(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),bP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function qB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return bP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function NP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function HB(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?hd(e):e;return{pathname:n?n.startsWith("/")?n:WB(n,t):t,search:XB(r),hash:JB(a)}}function WB(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Wv(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GB(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function KB(e,t){let n=GB(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ZB(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=hd(e):(a=rh({},e),Ks(!a.pathname||!a.pathname.includes("?"),Wv("?","pathname","search",a)),Ks(!a.pathname||!a.pathname.includes("#"),Wv("#","pathname","hash",a)),Ks(!a.search||!a.search.includes("#"),Wv("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let u=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),u-=1;a.pathname=m.join("/")}l=u>=0?t[u]:"/"}let d=HB(a,l),h=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}const Xo=e=>e.join("/").replace(/\/\/+/g,"/"),YB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,JB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const SP=["post","put","patch","delete"];new Set(SP);const ez=["get",...SP];new Set(ez);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ah(){return ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ah.apply(this,arguments)}const bw=_.createContext(null),tz=_.createContext(null),Qp=_.createContext(null),eg=_.createContext(null),wl=_.createContext({outlet:null,matches:[],isDataRoute:!1}),kP=_.createContext(null);function tg(){return _.useContext(eg)!=null}function Fn(){return tg()||Ks(!1),_.useContext(eg).location}function CP(e){_.useContext(Qp).static||_.useLayoutEffect(e)}function lt(){let{isDataRoute:e}=_.useContext(wl);return e?mz():sz()}function sz(){tg()||Ks(!1);let e=_.useContext(bw),{basename:t,future:n,navigator:r}=_.useContext(Qp),{matches:a}=_.useContext(wl),{pathname:i}=Fn(),o=JSON.stringify(KB(a,n.v7_relativeSplatPath)),l=_.useRef(!1);return CP(()=>{l.current=!0}),_.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let u=ZB(h,JSON.parse(o),i,f.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Xo([t,u.pathname])),(f.replace?r.replace:r.push)(u,f.state,f)},[t,r,o,i,e])}function sg(){let{matches:e}=_.useContext(wl),t=e[e.length-1];return t?t.params:{}}function nz(e,t){return rz(e,t)}function rz(e,t,n,r){tg()||Ks(!1);let{navigator:a}=_.useContext(Qp),{matches:i}=_.useContext(wl),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let h=Fn(),f;if(t){var u;let x=typeof t=="string"?hd(t):t;d==="/"||(u=x.pathname)!=null&&u.startsWith(d)||Ks(!1),f=x}else f=h;let m=f.pathname||"/",p=m;if(d!=="/"){let x=d.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let w=AB(e,{pathname:p}),v=cz(w&&w.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Xo([d,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:Xo([d,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return t&&v?_.createElement(eg.Provider,{value:{location:ah({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:qi.Pop}},v):v}function az(){let e=fz(),t=QB(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),n?_.createElement("pre",{style:a},n):null,null)}const iz=_.createElement(az,null);class oz extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?_.createElement(wl.Provider,{value:this.props.routeContext},_.createElement(kP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lz(e){let{routeContext:t,match:n,children:r}=e,a=_.useContext(bw);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(wl.Provider,{value:t},r)}function cz(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let f=o.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);f>=0||Ks(!1),o=o.slice(0,Math.min(o.length,f+1))}let d=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let u=o[f];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(h=f),u.route.id){let{loaderData:m,errors:p}=n,w=u.route.loader&&m[u.route.id]===void 0&&(!p||p[u.route.id]===void 0);if(u.route.lazy||w){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,u,m)=>{let p,w=!1,v=null,x=null;n&&(p=l&&u.route.id?l[u.route.id]:void 0,v=u.route.errorElement||iz,d&&(h<0&&m===0?(w=!0,x=null):h===m&&(w=!0,x=u.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,m+1)),b=()=>{let j;return p?j=v:w?j=x:u.route.Component?j=_.createElement(u.route.Component,null):u.route.element?j=u.route.element:j=f,_.createElement(lz,{match:u,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:j})};return n&&(u.route.ErrorBoundary||u.route.errorElement||m===0)?_.createElement(oz,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var EP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(EP||{}),Vm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Vm||{});function dz(e){let t=_.useContext(bw);return t||Ks(!1),t}function uz(e){let t=_.useContext(tz);return t||Ks(!1),t}function hz(e){let t=_.useContext(wl);return t||Ks(!1),t}function TP(e){let t=hz(),n=t.matches[t.matches.length-1];return n.route.id||Ks(!1),n.route.id}function fz(){var e;let t=_.useContext(kP),n=uz(Vm.UseRouteError),r=TP(Vm.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function mz(){let{router:e}=dz(EP.UseNavigateStable),t=TP(Vm.UseNavigateStable),n=_.useRef(!1);return CP(()=>{n.current=!0}),_.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ah({fromRouteId:t},i)))},[e,t])}function pz(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ct(e){Ks(!1)}function gz(e){let{basename:t="/",children:n=null,location:r,navigationType:a=qi.Pop,navigator:i,static:o=!1,future:l}=e;tg()&&Ks(!1);let d=t.replace(/^\/*/,"/"),h=_.useMemo(()=>({basename:d,navigator:i,static:o,future:ah({v7_relativeSplatPath:!1},l)}),[d,l,i,o]);typeof r=="string"&&(r=hd(r));let{pathname:f="/",search:u="",hash:m="",state:p=null,key:w="default"}=r,v=_.useMemo(()=>{let x=NP(f,d);return x==null?null:{location:{pathname:x,search:u,hash:m,state:p,key:w},navigationType:a}},[d,f,u,m,p,w,a]);return v==null?null:_.createElement(Qp.Provider,{value:h},_.createElement(eg.Provider,{children:n,value:v}))}function vz(e){let{children:t,location:n}=e;return nz(My(t),n)}new Promise(()=>{});function My(e,t){t===void 0&&(t=[]);let n=[];return _.Children.forEach(e,(r,a)=>{if(!_.isValidElement(r))return;let i=[...t,a];if(r.type===_.Fragment){n.push.apply(n,My(r.props.children,i));return}r.type!==ct&&Ks(!1),!r.props.index||!r.props.children||Ks(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=My(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dy(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function xz(e,t){let n=Dy(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const yz="6";try{window.__reactRouterVersion=yz}catch{}const bz="startTransition",O1=sb[bz];function wz(e){let{basename:t,children:n,future:r,window:a}=e,i=_.useRef();i.current==null&&(i.current=EB({window:a,v5Compat:!0}));let o=i.current,[l,d]=_.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},f=_.useCallback(u=>{h&&O1?O1(()=>d(u)):d(u)},[d,h]);return _.useLayoutEffect(()=>o.listen(f),[o,f]),_.useEffect(()=>pz(r),[r]),_.createElement(gz,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var R1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(R1||(R1={}));var L1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(L1||(L1={}));function ng(e){let t=_.useRef(Dy(e)),n=_.useRef(!1),r=Fn(),a=_.useMemo(()=>xz(r.search,n.current?null:t.current),[r.search]),i=lt(),o=_.useCallback((l,d)=>{const h=Dy(typeof l=="function"?l(a):l);n.current=!0,i("?"+h,d)},[i,a]);return[a,o]}/*! Capacitor: https://capacitorjs.com/ - MIT License */var Uc;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Uc||(Uc={}));class mc extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const _z=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},jz=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},a=()=>t!==null?t.name:_z(e),i=()=>a()!=="web",o=u=>{const m=h.get(u);return!!(m!=null&&m.platforms.has(a())||l(u))},l=u=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(p=>p.name===u)},d=u=>e.console.error(u),h=new Map,f=(u,m={})=>{const p=h.get(u);if(p)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),p.proxy;const w=a(),v=l(u);let x;const y=async()=>(!x&&w in m?x=typeof m[w]=="function"?x=await m[w]():x=m[w]:t!==null&&!x&&"web"in m&&(x=typeof m.web=="function"?x=await m.web():x=m.web),x),b=(E,I)=>{var O,R;if(v){const C=v==null?void 0:v.methods.find(D=>I===D.name);if(C)return C.rtype==="promise"?D=>n.nativePromise(u,I.toString(),D):(D,A)=>n.nativeCallback(u,I.toString(),D,A);if(E)return(O=E[I])===null||O===void 0?void 0:O.bind(E)}else{if(E)return(R=E[I])===null||R===void 0?void 0:R.bind(E);throw new mc(`"${u}" plugin is not implemented on ${w}`,Uc.Unimplemented)}},j=E=>{let I;const O=(...R)=>{const C=y().then(D=>{const A=b(D,E);if(A){const M=A(...R);return I=M==null?void 0:M.remove,M}else throw new mc(`"${u}.${E}()" is not implemented on ${w}`,Uc.Unimplemented)});return E==="addListener"&&(C.remove=async()=>I()),C};return O.toString=()=>`${E.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:E,writable:!1,configurable:!1}),O},N=j("addListener"),S=j("removeListener"),P=(E,I)=>{const O=N({eventName:E},I),R=async()=>{const D=await O;S({eventName:E,callbackId:D},I)},C=new Promise(D=>O.then(()=>D({remove:R})));return C.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await R()},C},T=new Proxy({},{get(E,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?P:N;case"removeListener":return S;default:return j(I)}}});return r[u]=T,h.set(u,{name:u,proxy:T,platforms:new Set([...Object.keys(m),...v?[w]:[]])}),T};return n.convertFileSrc||(n.convertFileSrc=u=>u),n.getPlatform=a,n.handleError=d,n.isNativePlatform=i,n.isPluginAvailable=o,n.registerPlugin=f,n.Exception=mc,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Nz=e=>e.Capacitor=jz(e),gt=Nz(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}),go=gt.registerPlugin;class ww{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),r&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const a=this.listeners[t];if(!a){if(r){let i=this.retainedEventArguments[t];i||(i=[]),i.push(n),this.retainedEventArguments[t]=i}return}a.forEach(i=>i(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new gt.Exception(t,Uc.Unimplemented)}unavailable(t="not available"){return new gt.Exception(t,Uc.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const a=r.indexOf(n);this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const I1=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),M1=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Sz extends ww{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[a,i]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=M1(a).trim(),i=M1(i).trim(),n[a]=i}),n}async setCookie(t){try{const n=I1(t.key),r=I1(t.value),a=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${a}; path=${i}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}go("CapacitorCookies",{web:()=>new Sz});const kz=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const a=r.result;t(a.indexOf(",")>=0?a.split(",")[1]:a)},r.onerror=a=>n(a),r.readAsDataURL(e)}),Cz=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(a=>a.toLocaleLowerCase()).reduce((a,i,o)=>(a[i]=e[t[o]],a),{})},Ez=(e,t=!0)=>e?Object.entries(e).reduce((r,a)=>{const[i,o]=a;let l,d;return Array.isArray(o)?(d="",o.forEach(h=>{l=t?encodeURIComponent(h):h,d+=`${i}=${l}&`}),d.slice(0,-1)):(l=t?encodeURIComponent(o):o,d=`${i}=${l}`),`${r}&${d}`},"").substr(1):null,Tz=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),a=Cz(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,l]of Object.entries(e.data||{}))i.set(o,l);n.body=i.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((l,d)=>{i.append(d,l)});else for(const l of Object.keys(e.data))i.append(l,e.data[l]);n.body=i;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(a.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class Pz extends ww{async request(t){const n=Tz(t,t.webFetchExtra),r=Ez(t.params,t.shouldEncodeUrlParams),a=r?`${t.url}?${r}`:t.url,i=await fetch(a,n),o=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?t:{};o.includes("application/json")&&(l="json");let d,h;switch(l){case"arraybuffer":case"blob":h=await i.blob(),d=await kz(h);break;case"json":d=await i.json();break;case"document":case"text":default:d=await i.text()}const f={};return i.headers.forEach((u,m)=>{f[m]=u}),{data:d,headers:f,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}go("CapacitorHttp",{web:()=>new Pz});function Az(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,n){return new Proxy({},{get(r,a){return(i,o,l)=>{const d=e.Capacitor.Plugins[n];if(d===void 0){l(new Error(`Capacitor plugin ${n} not found`));return}if(typeof d[a]!="function"){l(new Error(`Method ${a} not found in Capacitor plugin ${n}`));return}(async()=>{try{const h=await d[a](i);o(h)}catch(h){l(h)}})()}}})}})}function Oz(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,n){return e.cordova.plugins[n]}})}function Rz(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?Az(window):window.cordova!==void 0&&Oz(window))}const Gv=go("Geolocation",{web:()=>Ue(()=>import("./web-B1Tlm2yL.js"),[]).then(e=>new e.GeolocationWeb)});Rz();var Ql;(function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"})(Ql||(Ql={}));var ju;(function(e){e.Rear="REAR",e.Front="FRONT"})(ju||(ju={}));var D1;(function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"})(D1||(D1={}));class Lz extends ww{async getPhoto(t){return new Promise(async(n,r)=>{if(t.webUseInput||t.source===Ql.Photos)this.fileInputExperience(t,n,r);else if(t.source===Ql.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=t.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",async i=>{i.detail===0?this.fileInputExperience(t,n,r):this.cameraExperience(t,n,r)})}else this.cameraExperience(t,n,r)})}async pickImages(t){return new Promise(async(n,r)=>{this.multipleFileInputExperience(n,r)})}async cameraExperience(t,n,r){if(customElements.get("pwa-camera-modal")){const a=document.createElement("pwa-camera-modal");a.facingMode=t.direction===ju.Front?"user":"environment",document.body.appendChild(a);try{await a.componentOnReady(),a.addEventListener("onPhoto",async i=>{const o=i.detail;o===null?r(new mc("User cancelled photos app")):o instanceof Error?r(o):n(await this._getCameraPhoto(o,t)),a.dismiss(),document.body.removeChild(a)}),a.present()}catch{this.fileInputExperience(t,n,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,n,r)}fileInputExperience(t,n,r){let a=document.querySelector("#_capacitor-camera-input");const i=()=>{var o;(o=a.parentNode)===null||o===void 0||o.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",o=>{const l=a.files[0];let d="jpeg";if(l.type==="image/png"?d="png":l.type==="image/gif"&&(d="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){const h=new FileReader;h.addEventListener("load",()=>{if(t.resultType==="dataUrl")n({dataUrl:h.result,format:d});else if(t.resultType==="base64"){const f=h.result.split(",")[1];n({base64String:f,format:d})}i()}),h.readAsDataURL(l)}else n({webPath:URL.createObjectURL(l),format:d}),i()}),a.addEventListener("cancel",o=>{r(new mc("User cancelled photos app")),i()})),a.accept="image/*",a.capture=!0,t.source===Ql.Photos||t.source===Ql.Prompt?a.removeAttribute("capture"):t.direction===ju.Front?a.capture="user":t.direction===ju.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(t,n){let r=document.querySelector("#_capacitor-camera-input-multiple");const a=()=>{var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",i=>{const o=[];for(let l=0;l<r.files.length;l++){const d=r.files[l];let h="jpeg";d.type==="image/png"?h="png":d.type==="image/gif"&&(h="gif"),o.push({webPath:URL.createObjectURL(d),format:h})}t({photos:o}),a()}),r.addEventListener("cancel",i=>{n(new mc("User cancelled photos app")),a()})),r.accept="image/*",r.click()}_getCameraPhoto(t,n){return new Promise((r,a)=>{const i=new FileReader,o=t.type.split("/")[1];n.resultType==="uri"?r({webPath:URL.createObjectURL(t),format:o,saved:!1}):(i.readAsDataURL(t),i.onloadend=()=>{const l=i.result;n.resultType==="dataUrl"?r({dataUrl:l,format:o,saved:!1}):r({base64String:l.split(",")[1],format:o,saved:!1})},i.onerror=l=>{a(l)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const Iz=go("Camera",{web:()=>new Lz}),Mz=go("Device",{web:()=>Ue(()=>import("./web-DUzfhLtQ.js"),[]).then(e=>new e.DeviceWeb)});class Dz{static async requestAllPermissions(){if(!gt.isNativePlatform()){console.log("Running in web, skipping native permissions");return}try{await this.requestLocationPermission(),await this.requestCameraPermission(),console.log("Microphone permissions handled through camera plugin")}catch(t){console.error("Error requesting permissions:",t)}}static async requestLocationPermission(){try{const t=await Gv.requestPermissions();return console.log("Location permissions:",t),t}catch(t){throw console.error("Location permission error:",t),t}}static async requestCameraPermission(){try{const t=await Iz.requestPermissions();return console.log("Camera permissions:",t),t}catch(t){throw console.error("Camera permission error:",t),t}}static async checkLocationPermission(){try{return(await Gv.checkPermissions()).location==="granted"}catch(t){return console.error("Check location permission error:",t),!1}}static async getCurrentLocation(){try{return await this.checkLocationPermission()||await this.requestLocationPermission(),await Gv.getCurrentPosition()}catch(t){throw console.error("Get location error:",t),t}}static async getDeviceInfo(){try{const t=await Mz.getInfo();return console.log("Device info:",t),t}catch(t){return console.error("Device info error:",t),null}}}class Fz{constructor(){Gt(this,"location",null);Gt(this,"intervalId",null);Gt(this,"listeners",[]);this.loadFromStorage()}loadFromStorage(){const t=localStorage.getItem("userLocation");if(t)try{const n=JSON.parse(t),r=localStorage.getItem("userLocationTimestamp");r&&Date.now()-parseInt(r)<10*60*1e3&&(this.location=n)}catch(n){console.error("Error loading location from storage:",n)}}saveToStorage(){this.location&&(localStorage.setItem("userLocation",JSON.stringify(this.location)),localStorage.setItem("userLocationTimestamp",Date.now().toString()))}updateLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{this.location={latitude:t.coords.latitude,longitude:t.coords.longitude},this.saveToStorage(),this.notifyListeners()},t=>console.error("Location error:",t),{enableHighAccuracy:!1,timeout:1e4,maximumAge:18e4})}notifyListeners(){this.listeners.forEach(t=>t(this.location))}startTracking(){this.updateLocation(),this.intervalId||(this.intervalId=setInterval(()=>{this.updateLocation()},3*60*1e3))}stopTracking(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}getLocation(){return this.location}subscribe(t){return this.listeners.push(t),t(this.location),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}}const ht=new Fz,en=go("Preferences",{web:()=>Ue(()=>import("./web-Bcv5af65.js"),[]).then(e=>new e.PreferencesWeb)}),Kv=Object.freeze(Object.defineProperty({__proto__:null,Preferences:en},Symbol.toStringTag,{value:"Module"}));class $z{constructor(){Gt(this,"isNative",gt.isNativePlatform())}async setAuth(t,n){this.isNative?(await en.set({key:"auth_token",value:t}),await en.set({key:"auth_user",value:JSON.stringify(n)}),await en.set({key:"last_activity",value:Date.now().toString()})):(localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("lastActivity",Date.now().toString()))}async getToken(){return this.isNative?(await en.get({key:"auth_token"})).value:localStorage.getItem("token")}async getUser(){if(this.isNative){const t=await en.get({key:"auth_user"});return t.value?JSON.parse(t.value):null}else{const t=localStorage.getItem("user");return t?JSON.parse(t):null}}async isAuthenticated(){const t=await this.getToken(),n=await this.getUser();return!!(t&&n)}async updateActivity(){this.isNative?await en.set({key:"last_activity",value:Date.now().toString()}):localStorage.setItem("lastActivity",Date.now().toString())}async getLastActivity(){if(this.isNative){const t=await en.get({key:"last_activity"});return t.value?parseInt(t.value):null}else{const t=localStorage.getItem("lastActivity");return t?parseInt(t):null}}async clearAuth(){console.log(" clearAuth() called - Stack trace:"),console.trace(),this.isNative?(console.log(" Clearing native storage (Capacitor Preferences)"),await en.remove({key:"auth_token"}),await en.remove({key:"auth_user"}),await en.remove({key:"last_activity"}),await en.remove({key:"cart"}),await en.remove({key:"wishlist"})):(console.log(" Clearing web storage (localStorage)"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("lastActivity"),localStorage.removeItem("cart"),localStorage.removeItem("wishlist"),localStorage.removeItem("userLocation"),localStorage.removeItem("userLocationTimestamp")),console.log(" Auth cleared successfully")}async setCart(t){this.isNative?await en.set({key:"cart",value:JSON.stringify(t)}):localStorage.setItem("cart",JSON.stringify(t))}async getCart(){if(this.isNative){const t=await en.get({key:"cart"});return t.value?JSON.parse(t.value):[]}else{const t=localStorage.getItem("cart");return t?JSON.parse(t):[]}}async setWishlist(t){this.isNative?await en.set({key:"wishlist",value:JSON.stringify(t)}):localStorage.setItem("wishlist",JSON.stringify(t))}async getWishlist(){if(this.isNative){const t=await en.get({key:"wishlist"});return t.value?JSON.parse(t.value):[]}else{const t=localStorage.getItem("wishlist");return t?JSON.parse(t):[]}}async isSessionValid(){const t=await this.getLastActivity();if(!t)return!1;const n=this.isNative?7*24*60*60*1e3:24*60*60*1e3;return Date.now()-t<=n}async autoLogin(){const t=await this.getToken(),n=await this.getUser();if(t&&n&&n.user_type==="vendor"){if(await this.isSessionValid())return await this.updateActivity(),console.log(" Auto-login successful for vendor:",n.username),!0;try{const{simplePersistentAuth:a}=await Ue(async()=>{const{simplePersistentAuth:o}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:o}},void 0),i=await a.getVendorAuth();if(i!=null&&i.token&&(i!=null&&i.user))return console.log(" Main auth expired but vendor auth valid, syncing..."),await this.setAuth(i.token,i.user),!0}catch(a){console.error("Failed to check vendor auth:",a)}console.log(" Session expired, clearing auth"),await this.clearAuth()}return!1}async keepAlive(){await this.isAuthenticated()&&await this.updateActivity()}async updateUser(t){this.isNative?await en.set({key:"auth_user",value:JSON.stringify(t)}):localStorage.setItem("user",JSON.stringify(t))}}const Ae=new $z,ai=Object.freeze(Object.defineProperty({__proto__:null,authService:Ae},Symbol.toStringTag,{value:"Module"})),Bz={user:null,cart:[],wishlist:[],searchQuery:"",isLoading:!1,error:null,isAuthenticated:!1};function zz(e,t){switch(t.type){case"SET_USER":return{...e,user:t.payload,isAuthenticated:!!t.payload};case"UPDATE_USER":return{...e,user:e.user?{...e.user,...t.payload}:null};case"SET_CART":return{...e,cart:t.payload};case"ADD_TO_CART":return e.cart.find(r=>r.id===t.payload.id)?{...e,cart:e.cart.map(r=>r.id===t.payload.id?{...r,quantity:r.quantity+1}:r)}:{...e,cart:[...e.cart,{...t.payload,quantity:1}]};case"REMOVE_FROM_CART":return{...e,cart:e.cart.filter(n=>n.id!==t.payload)};case"UPDATE_CART_QUANTITY":return{...e,cart:e.cart.map(n=>n.id===t.payload.id?{...n,quantity:Math.max(0,t.payload.quantity)}:n).filter(n=>n.quantity>0)};case"CLEAR_CART":return{...e,cart:[]};case"SET_WISHLIST":return{...e,wishlist:t.payload};case"ADD_TO_WISHLIST":return e.wishlist.find(r=>r.id===t.payload.id)?e:{...e,wishlist:[...e.wishlist,t.payload]};case"REMOVE_FROM_WISHLIST":return{...e,wishlist:e.wishlist.filter(n=>n.id!==t.payload)};case"SET_SEARCH_QUERY":return{...e,searchQuery:t.payload};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload};case"LOAD_FROM_STORAGE":return e;default:return e}}const PP=_.createContext(void 0);function Vz({children:e}){const[t,n]=_.useReducer(zz,Bz);_.useEffect(()=>{(async()=>{try{console.log(" App initializing - checking for stored vendor session...");const v=await Ae.autoLogin();if(console.log(" Auto-login result:",v),v){const x=await Ae.getUser();console.log(" Vendor session restored:",x==null?void 0:x.username,"Type:",x==null?void 0:x.user_type),(x==null?void 0:x.user_type)==="vendor"&&(n({type:"SET_USER",payload:{...x,isLoggedIn:!0}}),window.location.pathname.startsWith("/vendor")||(console.log(" Auto-redirecting vendor to dashboard..."),window.location.replace("/vendor")),setTimeout(async()=>{try{const{fcmService:y}=await Ue(async()=>{const{fcmService:b}=await Promise.resolve().then(()=>Rre);return{fcmService:b}},void 0);await y.initialize(),console.log(" Vendor FCM initialized for persistent notifications")}catch(y){console.warn("FCM initialization failed:",y)}},1e3))}else{const[x,y,b,j]=await Promise.all([Ae.getCart(),Ae.getWishlist(),Ae.getUser(),Ae.isAuthenticated()]);j&&b&&n({type:"SET_USER",payload:{...b,isLoggedIn:!0}}),n({type:"SET_CART",payload:x}),n({type:"SET_WISHLIST",payload:y})}n({type:"SET_LOADING",payload:!1}),console.log(" App initialization complete")}catch(v){console.error("Failed to load stored data:",v),n({type:"SET_LOADING",payload:!1})}})()},[]),_.useEffect(()=>{(async()=>{try{await Promise.all([Ae.setCart(t.cart),Ae.setWishlist(t.wishlist)]),t.user&&await Ae.updateActivity()}catch(v){console.error("Failed to save data:",v)}})()},[t.cart,t.wishlist,t.user]);const p={state:t,dispatch:n,addToCart:w=>{n({type:"ADD_TO_CART",payload:w})},removeFromCart:w=>{n({type:"REMOVE_FROM_CART",payload:w})},updateCartQuantity:(w,v)=>{n({type:"UPDATE_CART_QUANTITY",payload:{id:w,quantity:v}})},clearCart:()=>{n({type:"CLEAR_CART"})},addToWishlist:w=>{n({type:"ADD_TO_WISHLIST",payload:w})},removeFromWishlist:w=>{n({type:"REMOVE_FROM_WISHLIST",payload:w})},setSearchQuery:w=>{n({type:"SET_SEARCH_QUERY",payload:w})},login:async(w,v)=>{try{n({type:"SET_USER",payload:{...w,isLoggedIn:!0}}),await Ae.setAuth(v,w),ht.startTracking(),console.log("Login completed, user authenticated:",!!w)}catch(x){console.error("Failed to save login data:",x)}},logout:async()=>{try{await Ae.clearAuth(),n({type:"SET_USER",payload:null}),n({type:"CLEAR_CART"}),ht.stopTracking()}catch(w){console.error("Failed to clear auth data:",w)}},updateUser:async w=>{try{if(n({type:"UPDATE_USER",payload:w}),t.user){const v={...t.user,...w};await Ae.updateUser(v)}}catch(v){console.error("Failed to update user:",v)}},user:t.user};return s.jsx(PP.Provider,{value:p,children:e})}function $n(){const e=_.useContext(PP);if(e===void 0)throw new Error("useApp must be used within an AppProvider");return e}const Uz=()=>{const{state:e,dispatch:t}=$n(),n=_.useCallback(async()=>{e.user&&await Ae.updateActivity()},[e.user]),r=_.useCallback(async()=>{e.user&&await Promise.all([Ae.setCart(e.cart),Ae.setWishlist(e.wishlist),Ae.updateActivity()])},[e.user,e.cart,e.wishlist]);return _.useCallback(async()=>{},[t]),_.useEffect(()=>{},[]),_.useEffect(()=>{},[]),_.useEffect(()=>{const a=()=>{r().catch(console.error)};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[r]),{extendSession:n,saveState:r}},qz=()=>window.location.protocol==="capacitor:"||window.location.protocol==="ionic:"||window.navigator.userAgent.includes("Capacitor"),Hz="https://ezeyway.com/api",Wz=()=>Hz,Fy=["http://localhost:8000/api","http://127.0.0.1:8000/api","http://10.0.2.2:8000/api","http://192.168.1.100:8000/api","https://ezeyway.com/api"],Gz=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"ws://localhost:8000":"wss://ezeyway.com",an={BASE_URL:Wz(),WS_BASE_URL:Gz()};(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("API Config Debug:",{isMobile:qz(),protocol:window.location.protocol,hostname:window.location.hostname,userAgent:window.navigator.userAgent.substring(0,50)+"...",baseUrl:an.BASE_URL,wsUrl:an.WS_BASE_URL});const Jo=(e="")=>{const t=`${an.BASE_URL}${e.startsWith("/")?e:`/${e}`}`;if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"){const n=t.includes("?")?"&":"?";return`${t}${n}_cb=${Date.now()}`}return t},AP=(e="")=>`${an.WS_BASE_URL}${e.startsWith("/")?e:`/${e}`}`,OP=e=>{let t=e;return t.startsWith("/api/")&&(t=t.substring(4)),t.startsWith("/")?t:`/${t}`},Qe=`${an.BASE_URL}/`,Kz=Object.freeze(Object.defineProperty({__proto__:null,API_BASE:Qe,API_CONFIG:an,FALLBACK_URLS:Fy,getApiUrl:Jo,getWsUrl:AP,normalizeEndpoint:OP},Symbol.toStringTag,{value:"Module"}));class Zz{constructor(){Gt(this,"CART_STORAGE_KEY","temp_cart")}async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Ae.getToken()}`,"ngrok-skip-browser-warning":"true"}}getStoredCart(){const t=localStorage.getItem(this.CART_STORAGE_KEY);if(t)try{return JSON.parse(t)}catch(n){console.error("Error parsing stored cart:",n)}return{id:1,items:[],total_items:0,subtotal:0}}saveCart(t){localStorage.setItem(this.CART_STORAGE_KEY,JSON.stringify(t))}async fetchProductDetails(t){var n,r,a;try{const l=(n=(await(await fetch(`${Qe}search/products/?search=${t}`,{headers:{"ngrok-skip-browser-warning":"true"}})).json()).results)==null?void 0:n.find(d=>d.id===t);if(l){const d=((r=l.images)==null?void 0:r.find(h=>h.is_primary))||((a=l.images)==null?void 0:a[0]);return{id:l.id,name:l.name,price:parseFloat(l.price),images:l.images||[],vendor_name:l.vendor_name||"Unknown Vendor",vendor_id:l.vendor_id,free_delivery:l.free_delivery,custom_delivery_fee_enabled:l.custom_delivery_fee_enabled,custom_delivery_fee:l.custom_delivery_fee}}}catch(i){console.error("Failed to fetch product details:",i)}return{id:t,name:`Product ${t}`,price:0,images:[],vendor_name:"Unknown Vendor",vendor_id:null,free_delivery:!1,custom_delivery_fee_enabled:!1,custom_delivery_fee:null}}async getCart(){if(!await Ae.getToken())throw new Error("User not authenticated");return this.getStoredCart()}async addToCart(t,n=1){if(!await Ae.getToken())throw new Error("User not authenticated");const a=this.getStoredCart(),i=a.items.find(o=>o.product.id===t);if(i)i.quantity+=n,i.total_price=i.product.price*i.quantity;else{const o=await this.fetchProductDetails(t),l={id:Date.now(),product:o,quantity:n,total_price:o.price*n};a.items.push(l)}return a.total_items=a.items.reduce((o,l)=>o+l.quantity,0),a.subtotal=a.items.reduce((o,l)=>o+l.total_price,0),this.saveCart(a),a}async updateCartItem(t,n){const r=this.getStoredCart(),a=r.items.find(i=>i.id===t);return a&&(a.quantity=n,a.total_price=a.product.price*n,r.total_items=r.items.reduce((i,o)=>i+o.quantity,0),r.subtotal=r.items.reduce((i,o)=>i+o.total_price,0),this.saveCart(r)),r}async removeFromCart(t){const n=this.getStoredCart();return n.items=n.items.filter(r=>r.id!==t),n.total_items=n.items.reduce((r,a)=>r+a.quantity,0),n.subtotal=n.items.reduce((r,a)=>r+a.total_price,0),this.saveCart(n),n}async clearCart(){localStorage.removeItem(this.CART_STORAGE_KEY)}}const ha=new Zz;class Yz{async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Ae.getToken()}`,"ngrok-skip-browser-warning":"true"}}async getCart(){if(!await Ae.getToken())throw new Error("User not authenticated");try{console.log("Fetching cart from:",`${Qe}cart/`);const n=await fetch(`${Qe}cart/`,{headers:await this.getAuthHeaders()});console.log("Cart response status:",n.status);const r=await n.json();if(console.log("Cart response data:",r),r.message&&r.message.includes("Welcome to Ezeyway Django API"))return console.log("Cart endpoints not implemented, using temporary cart service"),await ha.getCart();if(!n.ok)throw new Error(`Failed to fetch cart: ${n.status} - ${JSON.stringify(r)}`);return r}catch(n){return console.log("Cart API failed, using temporary cart service:",n),await ha.getCart()}}async addToCart(t,n=1){try{console.log("Adding to cart:",{productId:t,quantity:n}),console.log("Add to cart URL:",`${Qe}cart/add/`);const r=await fetch(`${Qe}cart/add/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({product_id:t,quantity:n})});console.log("Add to cart response status:",r.status);const a=await r.json();if(console.log("Add to cart response data:",a),a.message&&a.message.includes("Welcome to Ezeyway Django API"))return console.log("Cart endpoints not implemented, using temporary cart service"),await ha.addToCart(t,n);if(!r.ok)throw new Error(`Failed to add item to cart: ${r.status} - ${JSON.stringify(a)}`);return a.cart||a}catch(r){return console.log("Cart API failed, using temporary cart service:",r),await ha.addToCart(t,n)}}async updateCartItem(t,n){try{const r=await fetch(`${Qe}cart/items/${t}/update/`,{method:"PUT",headers:await this.getAuthHeaders(),body:JSON.stringify({quantity:n})}),a=await r.json();if(a.message&&a.message.includes("Welcome to Ezeyway Django API"))return await ha.updateCartItem(t,n);if(!r.ok)throw new Error("Failed to update cart item");return a.cart}catch{return await ha.updateCartItem(t,n)}}async removeFromCart(t){try{const n=await fetch(`${Qe}cart/items/${t}/remove/`,{method:"DELETE",headers:await this.getAuthHeaders()}),r=await n.json();if(r.message&&r.message.includes("Welcome to Ezeyway Django API"))return await ha.removeFromCart(t);if(!n.ok)throw new Error("Failed to remove item from cart");return r.cart}catch{return await ha.removeFromCart(t)}}async clearCart(){try{const t=await fetch(`${Qe}cart/clear/`,{method:"DELETE",headers:await this.getAuthHeaders()}),n=await t.json();if(n.message&&n.message.includes("Welcome to Ezeyway Django API"))return await ha.clearCart();if(!t.ok)throw new Error("Failed to clear cart")}catch{return await ha.clearCart()}}}const Fl=new Yz,RP=Object.freeze(Object.defineProperty({__proto__:null,cartService:Fl},Symbol.toStringTag,{value:"Module"})),LP=_.createContext(void 0),Xz=({children:e})=>{const[t,n]=_.useState(null),[r,a]=_.useState(!1),{toast:i}=ns(),o=async()=>{var u,m;try{if(!await Ae.getToken()){n(null);return}a(!0);const w=await Fl.getCart();n(w)}catch(p){(u=p.message)!=null&&u.includes("401")||(m=p.message)!=null&&m.includes("Unauthorized")?n(null):console.error("Failed to fetch cart:",p)}finally{a(!1)}},l=async(u,m=1)=>{try{if(!await Ae.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:u,quantity:m},path:"/cart",timestamp:Date.now()})),window.location.href="/login";return}const w=await Fl.addToCart(u,m);n(w),await o(),i({title:"Success",description:"Item added to cart"})}catch(p){console.error("Add to cart error:",p),i({title:"Error",description:"Failed to add item to cart",variant:"destructive"})}},d=async(u,m)=>{try{const p=await Fl.updateCartItem(u,m);n(p)}catch{i({title:"Error",description:"Failed to update item quantity",variant:"destructive"})}},h=async u=>{try{const m=await Fl.removeFromCart(u);n(m),i({title:"Success",description:"Item removed from cart"})}catch{i({title:"Error",description:"Failed to remove item",variant:"destructive"})}},f=async()=>{try{await Fl.clearCart(),n({...t,items:[],total_items:0,subtotal:0}),i({title:"Success",description:"Cart cleared"})}catch{i({title:"Error",description:"Failed to clear cart",variant:"destructive"})}};return _.useEffect(()=>{(async()=>{await Ae.getToken()?o():n(null)})();const m=p=>{p.detail?n(p.detail):o()};return window.addEventListener("cartUpdated",m),()=>{window.removeEventListener("cartUpdated",m)}},[]),s.jsx(LP.Provider,{value:{cart:t,loading:r,addToCart:l,updateCartItem:d,removeFromCart:h,clearCart:f,fetchCart:o},children:e})},Bn=()=>{const e=_.useContext(LP);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e},IP=_.createContext(void 0),Jz=({children:e})=>{const[t,n]=_.useState(!1),r=a=>{console.log("setHomeDataLoaded called with:",a,"Previous state:",t),n(a)};return s.jsx(IP.Provider,{value:{isHomeDataLoaded:t,setHomeDataLoaded:r},children:e})},Qz=()=>{const e=_.useContext(IP);if(!e)throw new Error("useAppLoading must be used within AppLoadingProvider");return e},eV=({children:e})=>{const{dispatch:t}=$n(),[n,r]=_.useState(!1);return _.useEffect(()=>{(async()=>{try{await Ae.isAuthenticated()&&(await Ae.isSessionValid()||await Ae.clearAuth())}catch(i){console.error("Auth initialization failed:",i)}finally{r(!0)}})()},[t]),n?s.jsx(s.Fragment,{children:e}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})},Lr=({children:e})=>{const t=lt(),[n,r]=_.useState(!0),[a,i]=_.useState(!1),{state:o}=$n();return _.useEffect(()=>{(async()=>{try{if(o.user){console.log("ProtectedRoute: Using context user:",o.user.user_type),i(!0),r(!1);return}if(!await Ae.isAuthenticated()){console.log("ProtectedRoute: Not authenticated, redirecting to login"),t("/login");return}const h=await Ae.getUser();if(!h){console.log("ProtectedRoute: No user data, redirecting to login"),t("/login");return}console.log("ProtectedRoute: Access granted for user:",h.user_type),i(!0)}catch(d){console.error("ProtectedRoute auth check failed:",d),t("/login")}finally{r(!1)}})()},[t,o.user]),n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a?s.jsx(s.Fragment,{children:e}):null},tV="/assets/tihar.gif",sV=({onComplete:e})=>{const[t,n]=_.useState(!0);return _.useEffect(()=>{console.log("AppSplashScreen mounted, starting timer");const r=setTimeout(()=>{console.log("Splash timer completed, hiding splash"),n(!1),setTimeout(()=>{console.log("Calling onComplete callback"),e()},300)},3e3);return()=>clearTimeout(r)},[e]),t?(console.log("Rendering splash screen"),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white",children:s.jsx("img",{src:tV,alt:"Loading...",className:"max-w-full max-h-full object-contain"})})):(console.log("Splash screen not visible, returning null"),null)};class nV{constructor(){Gt(this,"hasTrackedCurrentPage",!1)}async trackPageVisit(t,n){try{if(this.hasTrackedCurrentPage)return;const r=t||window.location.href,a=n||document.title,i=await fetch(`${an.BASE_URL}/analytics/track/`,{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},credentials:"include",body:JSON.stringify({page_url:r,page_title:a,referrer:document.referrer,timestamp:new Date().toISOString()})});if(i.ok){const o=await i.json();return console.log("Analytics tracked:",o),this.hasTrackedCurrentPage=!0,setTimeout(()=>{this.hasTrackedCurrentPage=!1},1e3),o}}catch(r){console.error("Analytics tracking failed:",r)}}trackRouteChange(t){this.hasTrackedCurrentPage=!1,this.trackPageVisit(window.location.origin+t)}}const Kd=new nV,rV=()=>{const e=Fn();return _.useEffect(()=>{Kd.trackPageVisit()},[e.pathname]),{trackPageVisit:Kd.trackPageVisit.bind(Kd),trackRouteChange:Kd.trackRouteChange.bind(Kd)}},hi="/assets/ezeywaylogo.png";function aV(){const e=lt();return _.useEffect(()=>{(async()=>{try{const{simplePersistentAuth:n}=await Ue(async()=>{const{simplePersistentAuth:l}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:l}},void 0);if(await n.isVendorLoggedIn()){console.log(" Vendor already logged in, redirecting to dashboard"),e("/vendor/dashboard");return}const{authService:a}=await Ue(async()=>{const{authService:l}=await Promise.resolve().then(()=>ai);return{authService:l}},void 0),i=await a.isAuthenticated(),o=await a.getUser();if(i&&o&&o.user_type==="customer"){console.log(" Customer already logged in, redirecting to home"),e("/home");return}console.log(" No authentication found, redirecting to home"),e("/home")}catch(n){console.error("Error checking authentication:",n),e("/home")}})()},[e]),s.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:hi,alt:"ezeyway",className:"w-32 h-32 mx-auto animate-pulse object-contain"}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"flex justify-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})}const iV=kh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"gradient-primary text-primary-foreground font-semibold shadow-brand hover:scale-105 transition-bounce",accent:"gradient-accent text-accent-foreground font-semibold shadow-brand hover:scale-105 transition-bounce",premium:"bg-primary-dark text-primary-foreground border border-primary-light/20 shadow-lg hover:bg-primary hover:shadow-brand transition-smooth"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=_.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?ZD:"button";return s.jsx(o,{className:it(iV({variant:t,size:n,className:e})),ref:i,...a})});te.displayName="Button";const je=_.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:it("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));je.displayName="Input";const MP=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",oV=()=>{if(!MP())return;const e=document.createElement("div");e.innerHTML=`
    <div style="
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #f59e0b;
      color: white;
      padding: 8px 16px;
      text-align: center;
      z-index: 9999;
      font-size: 14px;
      font-weight: 500;
    ">
       Backend server not running on localhost:8000. Please start your Django server.
      <button onclick="this.parentElement.parentElement.remove()" style="
        background: none;
        border: none;
        color: white;
        margin-left: 16px;
        cursor: pointer;
        font-size: 16px;
      "></button>
    </div>
  `,document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},1e4)};let F1=!1,Zd=!1;const Um=async(e=!0,t=!1,n="")=>{const r={"ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"};if(t||(r["Content-Type"]="application/json"),e){let a=await Ae.getToken();console.log(" Main token for",n,":",a?`${a.substring(0,10)}...`:"NO TOKEN");const i=n.includes("vendor"),o=window.location.pathname.startsWith("/vendor");if(i&&o&&!a)try{const{simplePersistentAuth:l}=await Ue(async()=>{const{simplePersistentAuth:h}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:h}},void 0),d=await l.getVendorAuth();d!=null&&d.token?(a=d.token,console.log(" Using vendor token for:",n,`${a.substring(0,10)}...`),await Ae.setAuth(d.token,d.user),console.log(" Synced vendor token to main auth")):console.log(" No vendor token available for vendor endpoint")}catch(l){console.error("Failed to get vendor token:",l)}a?r.Authorization=`Token ${a}`:console.log(" No token available for:",n)}return r},Ve=async(e,t={},n=!0)=>{var l,d,h,f,u;let r=OP(e);if(r.includes("/vendors/settings")||r.includes("/vendor-profiles/settings"))return console.log(" BLOCKED: Removing call to non-existent endpoint:",e),Promise.resolve({response:{ok:!0,status:200,json:()=>Promise.resolve({}),headers:new Headers({"content-type":"application/json"})},data:{results:[]}});const a=`${an.BASE_URL}${r}`,i=t.body instanceof FormData,o={headers:await Um(n,i,e),...t};if(console.log(" API Request:",e,"Auth:",n),console.log(" Full URL:",a),e.includes("accept")&&(console.log(" ORDER ACCEPT REQUEST DETECTED!"),console.log(" Original endpoint:",e),console.log(" Normalized endpoint:",r),console.log(" API_CONFIG.BASE_URL:",an.BASE_URL),console.log(" Final URL:",a)),e.includes("switch-role")||e.includes("switch")){console.log(" SWITCH ROLE REQUEST DETECTED!"),console.log(" Full URL:",a),console.log(" Include Auth:",n),console.log(" Request Headers:",JSON.stringify(o.headers,null,2));const{authService:m}=await Ue(async()=>{const{authService:x}=await Promise.resolve().then(()=>ai);return{authService:x}},void 0),p=await m.getToken();console.log(" Token from authService:",p?`${p.substring(0,10)}...`:"NO TOKEN");const w=typeof localStorage<"u"?localStorage.getItem("token"):"NO LOCALSTORAGE";console.log(" localStorage token:",w?`${w.substring(0,10)}...`:"NO TOKEN IN LOCALSTORAGE");const v=((l=o.headers)==null?void 0:l.Authorization)||((d=o.headers)==null?void 0:d.authorization);console.log(" Authorization header:",v?`${v.substring(0,15)}...`:"NO AUTH HEADER")}t.headers&&(o.headers={...o.headers,...t.headers},i&&o.headers["Content-Type"]&&delete o.headers["Content-Type"]);try{const m=await fetch(a,o);if(m.status===401&&n&&!Zd){Zd=!0,console.log(" 401 error, attempting token refresh...");try{const v=e.includes("vendor"),x=window.location.pathname.startsWith("/vendor");if(v&&x){const{simplePersistentAuth:y}=await Ue(async()=>{const{simplePersistentAuth:j}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:j}},void 0),b=await y.getVendorAuth();if(b!=null&&b.token){console.log(" Found vendor auth, attempting refresh with vendor token"),await Ae.setAuth(b.token,b.user);const j=await Um(!0,i,e),N=await fetch(a,{...o,headers:j});if(N.ok){console.log(" Token refresh successful"),Zd=!1;const S=N.clone(),P=N.headers.get("content-type");if(P&&P.includes("application/json")){const T=await N.json();return{response:S,data:T}}return{response:S,data:null}}else console.log(" Retry with vendor token also failed:",N.status),await y.clearVendorAuth()}else console.log(" No vendor auth available for token refresh")}else console.log(" Not a vendor endpoint, skipping vendor auth refresh");return console.log(" Token refresh failed"),Zd=!1,{response:m,data:{error:"Authentication required"}}}catch(v){return console.error("Token refresh error:",v),Zd=!1,{response:m,data:{error:"Authentication required"}}}}const p=m.clone(),w=m.headers.get("content-type");if(w&&w.includes("application/json"))try{const v=await m.json();return{response:p,data:v}}catch(v){return console.warn("Failed to parse JSON response:",v),{response:p,data:null}}else return console.warn("API returned non-JSON response:",m.status,m.statusText),{response:p,data:null}}catch(m){if(console.error("API request failed:",m),MP()&&!F1&&((h=m.message)!=null&&h.includes("fetch"))&&(F1=!0,oV()),a.includes("ngrok-free.app")&&((f=m.message)!=null&&f.includes("Unable to resolve host")||(u=m.message)!=null&&u.includes("UnknownHostException"))){console.log("Ngrok failed, trying fallback URLs...");for(let p=1;p<Fy.length;p++){const v=`${Fy[p]}${normalizedEndpoint}`;try{console.log(`Trying fallback URL: ${v}`);const x=await fetch(v,{...o,headers:{...o.headers,"ngrok-skip-browser-warning":void 0,"x-ngrok-skip-browser-warning":void 0}}),y=x.clone(),b=x.headers.get("content-type");if(b&&b.includes("application/json"))try{const j=await x.json();return console.log(`Fallback URL ${v} succeeded`),{response:y,data:j}}catch{return console.log(`Fallback URL ${v} succeeded (non-JSON)`),{response:y,data:null}}else return console.log(`Fallback URL ${v} succeeded (non-JSON)`),{response:y,data:null}}catch(x){console.error(`Fallback URL ${v} failed:`,x);continue}}}throw m}},hs=Object.freeze(Object.defineProperty({__proto__:null,apiRequest:Ve,createApiHeaders:Um},Symbol.toStringTag,{value:"Module"}));class lV{constructor(){Gt(this,"pendingAction",null)}setPendingAction(t){this.pendingAction=t,localStorage.setItem("pendingAction",JSON.stringify(t))}getPendingAction(){if(this.pendingAction)return this.pendingAction;const t=localStorage.getItem("pendingAction");if(t)try{return this.pendingAction=JSON.parse(t),this.pendingAction}catch(n){console.error("Error parsing pending action:",n)}return null}clearPendingAction(){this.pendingAction=null,localStorage.removeItem("pendingAction")}async executePendingAction(){const t=this.getPendingAction();if(!t)return console.log("No pending action to execute"),!1;const{authService:n}=await Ue(async()=>{const{authService:a}=await Promise.resolve().then(()=>ai);return{authService:a}},void 0),r=await n.getToken();if(!r)return console.log("No token found, clearing pending action"),this.clearPendingAction(),!1;console.log("Executing pending action:",t);try{switch(t.type){case"add_to_cart":if(t.data){console.log("Executing add_to_cart action:",t.data);const{cartService:a}=await Ue(async()=>{const{cartService:i}=await Promise.resolve().then(()=>RP);return{cartService:i}},void 0);try{const i=await a.addToCart(t.data.productId,t.data.quantity||1);console.log("Added to cart successfully:",i),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:i}));try{const{toast:o}=await Ue(async()=>{const{toast:l}=await Promise.resolve().then(()=>YN);return{toast:l}},void 0);o({title:"Added to Cart",description:"Product added successfully"})}catch{console.log("Toast not available, but item added successfully")}return this.clearPendingAction(),window.location.href=t.path||"/cart",!0}catch(i){return console.error("Failed to add to cart:",i),this.clearPendingAction(),!1}}break;case"buy_now":if(t.data){localStorage.setItem("buyNowProduct",JSON.stringify(t.data)),this.clearPendingAction();const a=new URL("/checkout",window.location.origin);return a.searchParams.set("directBuy","true"),window.location.href=a.toString(),!0}break;case"toggleFavorite":if(t.data){console.log("Executing toggleFavorite action:",t.data);try{const a=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${r}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:t.data.productId})});if(a.ok){const i=await a.json();console.log("Favorite toggled successfully:",i);try{const{toast:o}=await Ue(async()=>{const{toast:l}=await Promise.resolve().then(()=>YN);return{toast:l}},void 0);o({title:i.is_favorite?"Added to Favorites":"Removed from Favorites",description:i.message})}catch{console.log("Toast not available, but favorite toggled successfully")}return this.clearPendingAction(),window.location.href=t.path||"/wishlist",!0}else console.error("Failed to toggle favorite:",a.status)}catch(a){console.error("Failed to toggle favorite:",a)}return this.clearPendingAction(),!1}break;case"view_orders":return window.location.href="/orders",this.clearPendingAction(),!0;case"view_profile":return window.location.href="/profile",this.clearPendingAction(),!0;case"navigate":if(t.path)return window.location.href=t.path,this.clearPendingAction(),!0;break}}catch(a){console.error("Error executing pending action:",a),this.clearPendingAction()}return this.clearPendingAction(),!1}redirectToLogin(t){const n=t||window.location.pathname+window.location.search;window.location.href=`/login?returnTo=${encodeURIComponent(n)}`}}const Nu=new lV;function DP({currentType:e}){const t=lt(),n=Fn(),r=()=>{t(e==="customer"?"/vendor/login":"/login",{state:n.state})};return s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors underline",children:e==="customer"?s.jsxs(s.Fragment,{children:[s.jsx(yn,{className:"h-4 w-4"}),"Vendor Login"]}):s.jsxs(s.Fragment,{children:[s.jsx(Jr,{className:"h-4 w-4"}),"Customer Login"]})})})}class cV{constructor(){Gt(this,"isInitialized",!1);Gt(this,"clientId","413898594267-m6kiake3vs83slgvp3e3uk6kcchlssf5.apps.googleusercontent.com");Gt(this,"isDevelopment",!1)}async setupPassword(t){try{const{response:n,data:r}=await Ve("/setup-password/",{method:"POST",body:JSON.stringify({password:t})});return n.ok&&r.success?{success:!0}:{success:!1,error:r.error||"Failed to setup password"}}catch(n){return{success:!1,error:n.message||"Network error during password setup"}}}async initialize(){if(!this.isInitialized)return this.isDevelopment&&this.clientId==="YOUR_GOOGLE_CLIENT_ID"?(console.warn("Google Auth: Using development mode - replace with real client ID"),this.isInitialized=!0,Promise.resolve(!0)):new Promise((t,n)=>{const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{window.google?(window.google.accounts.id.initialize({client_id:this.clientId,callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0,ux_mode:"popup"}),this.isInitialized=!0,t(!0)):n(new Error("Google Identity Services failed to load"))},r.onerror=()=>{n(new Error("Failed to load Google Identity Services"))},document.head.appendChild(r)})}handleCredentialResponse(t){console.log("Google credential response:",t)}async signIn(){try{return gt.isNativePlatform()?this.signInWithCapacitorPlugin():(await this.initialize(),this.showPopup())}catch(t){return{success:!1,error:t.message}}}async signInWithCapacitorPlugin(){try{const n=(await Ue(()=>import("@codetrix-studio/capacitor-google-auth"),[])).GoogleAuth;await n.initialize({clientId:"413898594267-83ds3hc1u9um55ps3b490eft15a2bcqq.apps.googleusercontent.com",scopes:["profile","email"],grantOfflineAccess:!0});const r=await n.signIn(),a={email:r.email,name:r.name,google_id:r.id,picture:r.imageUrl};return this.authenticateWithBackend(a)}catch(t){return console.error("Capacitor Google Auth error:",t),{success:!1,error:"Google Sign-In failed. Please try again or use email/password login."}}}async showPopup(){return new Promise(t=>{window.google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:"email profile",ux_mode:"popup",callback:async r=>{if(r.access_token)try{const a=await this.getUserInfo(r.access_token),i=await this.authenticateWithBackend(a);t(i)}catch(a){t({success:!1,error:a.message})}else r.error?t({success:!1,error:r.error}):t({success:!1,error:"No access token received"})}}).requestAccessToken()})}async getUserInfo(t){const n=await fetch(`https://www.googleapis.com/oauth2/v2/userinfo?access_token=${t}`);if(!n.ok)throw new Error("Failed to get user info from Google");return n.json()}async verifyGoogleToken(t){try{const{response:n,data:r}=await Ve("/auth/google/",{method:"POST",body:JSON.stringify({credential:t})},!1);return n.ok?{success:!0,user:r.user,token:r.token}:{success:!1,error:r.error||"Google authentication failed"}}catch(n){return{success:!1,error:n.message||"Network error during Google authentication"}}}async authenticateWithBackend(t){try{const{response:n,data:r}=await Ve("/auth/google/",{method:"POST",body:JSON.stringify({user_info:{email:t.email,name:t.name,google_id:t.id,picture:t.picture}})},!1);return n.ok&&r.success?{success:!0,user:{...r.user,available_roles:r.available_roles,profile_exists:r.profile_exists,is_approved:r.is_approved,is_rejected:r.is_rejected,rejection_reason:r.rejection_reason,rejection_date:r.rejection_date,user_created:r.user_created,needs_password_setup:r.needs_password_setup,google_login:r.google_login},token:r.token}:n.ok&&r.needs_privacy_agreement?{success:!1,needs_privacy_agreement:!0,user_id:r.user_id,user_type:r.user_type,has_vendor_profile:r.has_vendor_profile,error:r.message}:{success:!1,error:r.error||"Backend authentication failed"}}catch(n){return{success:!1,error:n.message||"Network error during backend authentication"}}}renderButton(t,n="outline",r="large"){if(!this.isInitialized){console.warn("Google Auth not initialized");return}window.google.accounts.id.renderButton(document.getElementById(t),{theme:n,size:r,type:"standard",shape:"rectangular",text:"continue_with",logo_alignment:"left",width:320})}}const qc=new cV;class dV{constructor(){Gt(this,"isInitialized",!1);Gt(this,"appId","650860981240776");Gt(this,"isDevelopment",window.location.hostname==="localhost")}async initialize(){if(!this.isInitialized)return new Promise((t,n)=>{const r=document.createElement("script");r.src="https://connect.facebook.net/en_US/sdk.js",r.async=!0,r.defer=!0,r.onload=()=>{window.FB.init({appId:this.appId,cookie:!0,xfbml:!0,version:"v18.0"}),this.isInitialized=!0,t(!0)},r.onerror=()=>{n(new Error("Failed to load Facebook SDK"))},document.head.appendChild(r)})}async signIn(){try{return await this.initialize(),window.location.protocol==="http:"&&window.location.hostname!=="localhost"?{success:!1,error:"Facebook login requires HTTPS. Please use the ngrok URL: https://61229baf5ec0.ngrok-free.app"}:new Promise(t=>{window.FB.login(n=>{n.authResponse?this.getUserInfo().then(r=>this.authenticateWithBackend(r)).then(r=>t(r)).catch(r=>t({success:!1,error:r.message})):t({success:!1,error:"Facebook login cancelled"})},{scope:"email,public_profile"})})}catch(t){return{success:!1,error:t.message}}}async getUserInfo(){return new Promise((t,n)=>{window.FB.api("/me",{fields:"id,name,email,picture"},r=>{r&&!r.error?t(r):n(new Error("Failed to get user info from Facebook"))})})}async authenticateWithBackend(t){var n,r;try{const{response:a,data:i}=await Ve("/auth/facebook/",{method:"POST",body:JSON.stringify({user_info:{email:t.email,name:t.name,facebook_id:t.id,picture:(r=(n=t.picture)==null?void 0:n.data)==null?void 0:r.url}})},!1);return a.ok&&i.success?{success:!0,user:{...i.user,available_roles:i.available_roles,profile_exists:i.profile_exists,is_approved:i.is_approved,is_rejected:i.is_rejected,rejection_reason:i.rejection_reason,rejection_date:i.rejection_date,user_created:i.user_created,needs_password_setup:i.needs_password_setup,facebook_login:i.facebook_login},token:i.token}:{success:!1,error:i.error||"Backend authentication failed"}}catch(a){return{success:!1,error:a.message||"Network error during backend authentication"}}}}const FP=new dV;function $P({user:e,onComplete:t,onSkip:n}){const{updateUser:r}=$n(),[a,i]=_.useState({phone_number:e.phone_number||"",address:e.address||"",password:"",confirmPassword:""}),[o,l]=_.useState(!1),[d,h]=_.useState(!1),[f,u]=_.useState(""),[m,p]=_.useState(1),w=b=>{const{name:j,value:N}=b.target;i(S=>({...S,[j]:N}))},v=async()=>{if(u(""),!a.phone_number){u("Phone number is required");return}if(a.phone_number.length<10){u("Please enter a valid phone number");return}h(!0);try{const{response:b,data:j}=await Ve("/profile/update/",{method:"PUT",body:JSON.stringify({phone_number:a.phone_number,address:a.address})});b.ok?(await r({...e,phone_number:a.phone_number,address:a.address}),p(2)):u(j.error||"Failed to update profile")}catch{u("Failed to update profile. Please try again.")}finally{h(!1)}},x=async()=>{if(u(""),a.password){if(a.password.length<6){u("Password must be at least 6 characters long");return}if(a.password!==a.confirmPassword){u("Passwords do not match");return}}h(!0);try{if(a.password){const b=await qc.setupPassword(a.password);if(!b.success){u(b.error||"Failed to setup password"),h(!1);return}}t()}catch{u("Failed to setup password. Please try again.")}finally{h(!1)}},y=()=>{t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:m===1?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Complete Your Profile"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Please provide some additional information to complete your account setup."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx(je,{type:"email",value:e.email,disabled:!0,className:"bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),s.jsx(je,{type:"tel",name:"phone_number",value:a.phone_number,onChange:w,placeholder:"Enter your phone number",className:"focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),s.jsx(je,{type:"text",name:"address",value:a.address,onChange:w,placeholder:"Enter your address",className:"focus:ring-2 focus:ring-blue-500"})]}),f&&s.jsx("p",{className:"text-red-600 text-sm text-center",children:f}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(te,{onClick:n,variant:"outline",className:"flex-1",disabled:d,children:"Skip for now"}),s.jsx(te,{onClick:v,disabled:!a.phone_number||d,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:d?"Saving...":"Continue"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Set Up Password (Optional)"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Create a password to login with email and password in the future."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password (Optional)"}),s.jsx(je,{type:o?"text":"password",name:"password",value:a.password,onChange:w,placeholder:"Enter password (min 6 characters)",className:"pr-10 focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute inset-y-0 right-0 flex items-center pr-3 mt-6",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),a.password&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),s.jsx(je,{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:w,placeholder:"Confirm password",className:"focus:ring-2 focus:ring-blue-500"})]}),f&&s.jsx("p",{className:"text-red-600 text-sm text-center",children:f}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(te,{onClick:y,variant:"outline",className:"flex-1",disabled:d,children:"Skip password"}),s.jsx(te,{onClick:x,disabled:d||a.password&&!a.confirmPassword,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:d?"Setting up...":"Complete Setup"})]})]}),s.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"You can always set up a password later from your profile settings."})]})})})}function rg(e){const t=_.useRef({value:e,previous:e});return _.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ag="Checkbox",[uV,nie]=jn(ag),[hV,_w]=uV(ag);function fV(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:d,required:h,value:f="on",internal_do_not_use_render:u}=e,[m,p]=ta({prop:n,defaultProp:a??!1,onChange:d,caller:ag}),[w,v]=_.useState(null),[x,y]=_.useState(null),b=_.useRef(!1),j=w?!!o||!!w.closest("form"):!0,N={checked:m,disabled:i,setChecked:p,control:w,setControl:v,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:b,required:h,defaultChecked:eo(a)?!1:a,isFormControl:j,bubbleInput:x,setBubbleInput:y};return s.jsx(hV,{scope:t,...N,children:mV(u)?u(N):r})}var BP="CheckboxTrigger",zP=_.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:i,value:o,disabled:l,checked:d,required:h,setControl:f,setChecked:u,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:w}=_w(BP,e),v=Nt(a,f),x=_.useRef(d);return _.useEffect(()=>{const y=i==null?void 0:i.form;if(y){const b=()=>u(x.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[i,u]),s.jsx(ut.button,{type:"button",role:"checkbox","aria-checked":eo(d)?"mixed":d,"aria-required":h,"data-state":WP(d),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:v,onKeyDown:Ze(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Ze(n,y=>{u(b=>eo(b)?!0:!b),w&&p&&(m.current=y.isPropagationStopped(),m.current||y.stopPropagation())})})});zP.displayName=BP;var jw=_.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:d,onCheckedChange:h,form:f,...u}=e;return s.jsx(fV,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:h,name:r,form:f,value:d,internal_do_not_use_render:({isFormControl:m})=>s.jsxs(s.Fragment,{children:[s.jsx(zP,{...u,ref:t,__scopeCheckbox:n}),m&&s.jsx(HP,{__scopeCheckbox:n})]})})});jw.displayName=ag;var VP="CheckboxIndicator",UP=_.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=_w(VP,n);return s.jsx(fn,{present:r||eo(i.checked)||i.checked===!0,children:s.jsx(ut.span,{"data-state":WP(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});UP.displayName=VP;var qP="CheckboxBubbleInput",HP=_.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:d,name:h,value:f,form:u,bubbleInput:m,setBubbleInput:p}=_w(qP,e),w=Nt(n,p),v=rg(i),x=Gp(r);_.useEffect(()=>{const b=m;if(!b)return;const j=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(j,"checked").set,P=!a.current;if(v!==i&&S){const T=new Event("click",{bubbles:P});b.indeterminate=eo(i),S.call(b,eo(i)?!1:i),b.dispatchEvent(T)}},[m,v,i,a]);const y=_.useRef(eo(i)?!1:i);return s.jsx(ut.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:d,name:h,value:f,form:u,...t,tabIndex:-1,ref:w,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});HP.displayName=qP;function mV(e){return typeof e=="function"}function eo(e){return e==="indeterminate"}function WP(e){return eo(e)?"indeterminate":e?"checked":"unchecked"}const qm=_.forwardRef(({className:e,...t},n)=>s.jsx(jw,{ref:n,className:it("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(UP,{className:it("flex items-center justify-center text-current"),children:s.jsx(Xu,{className:"h-4 w-4"})})}));qm.displayName=jw.displayName;function GP({userId:e,userType:t,hasVendorProfile:n,onComplete:r,onCancel:a}){const[i,o]=_.useState(!1),[l,d]=_.useState(!1),[h,f]=_.useState(""),{login:u}=$n(),m=lt(),p=Fn();_.useEffect(()=>{const x=sessionStorage.getItem("privacyAgreementState");x&&JSON.parse(x).returnUrl===window.location.pathname&&sessionStorage.removeItem("privacyAgreementState")},[]);const w=async()=>{if(!i){f("You must agree to the privacy policy to continue");return}d(!0),f("");try{const{response:x,data:y}=await Ve("/agree-privacy-policy/",{method:"POST",body:JSON.stringify({user_id:e,agreed:!0})},!1);if(!x.ok)throw new Error((y==null?void 0:y.error)||"Failed to agree to privacy policy");if(y.success&&y.user&&y.token){const b={...y.user,available_roles:y.available_roles||["customer"],user_type:y.user.user_type||"customer",current_role:y.user.user_type||"customer"};await u(b,y.token),r(b,y.token),setTimeout(async()=>{var N,S;if(!await Nu.executePendingAction()){const E=new URLSearchParams(window.location.search).get("returnTo")||((S=(N=p.state)==null?void 0:N.from)==null?void 0:S.pathname)||"/home";m(E,{replace:!0})}},100)}else throw new Error("Invalid response from server")}catch(x){f(x.message)}finally{d(!1)}},v=()=>{a?a():m("/login")};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Privacy Policy Agreement"}),s.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[s.jsx("p",{className:"mb-2",children:"Before you can continue, please read and agree to our privacy policy."}),n&&s.jsx("p",{className:"mb-2 text-blue-600 font-medium",children:"As a vendor, you need to agree to our privacy policy to access vendor features."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 max-h-48 overflow-y-auto text-sm",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Privacy Policy Summary"}),s.jsxs("div",{className:"space-y-2 text-gray-700",children:[s.jsx("p",{children:" We collect and process your personal information to provide our services"}),s.jsx("p",{children:" Your data is used to facilitate transactions between customers and vendors"}),s.jsx("p",{children:" We implement security measures to protect your information"}),s.jsx("p",{children:" You have rights regarding your personal data"}),s.jsx("p",{children:" We may share information as required by law or to provide services"}),s.jsx("p",{children:" Cookies and similar technologies are used to improve user experience"})]}),s.jsx("div",{className:"mt-3",children:s.jsx("button",{onClick:()=>{sessionStorage.setItem("privacyAgreementState",JSON.stringify({userId:e,userType:t,hasVendorProfile:n,returnUrl:window.location.pathname})),m("/privacy-policy")},className:"text-blue-600 hover:text-blue-700 text-sm underline",children:"Read Full Privacy Policy"})})]}),s.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[s.jsx(qm,{id:"privacy-agreement",checked:i,onCheckedChange:x=>o(x),className:"mt-1"}),s.jsxs("label",{htmlFor:"privacy-agreement",className:"text-sm text-gray-700 cursor-pointer",children:["I have read and agree to the"," ",s.jsx("button",{onClick:()=>{sessionStorage.setItem("privacyAgreementState",JSON.stringify({userId:e,userType:t,hasVendorProfile:n,returnUrl:window.location.pathname})),m("/privacy-policy")},className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})]})]}),h&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-red-600 text-sm",children:h})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(te,{onClick:v,variant:"outline",className:"flex-1",disabled:l,children:"Cancel"}),s.jsx(te,{onClick:w,disabled:!i||l,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:l?"Processing...":"Agree & Continue"})]})]})})})}function pV(){const e=lt(),t=Fn(),{login:n}=$n(),[r,a]=_.useState("password"),[i,o]=_.useState(""),[l,d]=_.useState(""),[h,f]=_.useState(""),[u,m]=_.useState(!1),[p,w]=_.useState(!1),[v,x]=_.useState(!1),[y,b]=_.useState(""),[j,N]=_.useState(!1),[S,P]=_.useState(!1);_.useState(!1);const[T,E]=_.useState(!1),[I,O]=_.useState(null),[R,C]=_.useState(!1),[D,A]=_.useState(null);_.useEffect(()=>{const Y=sessionStorage.getItem("privacyAgreementState");if(Y){const G=JSON.parse(Y);A({userId:G.userId,userType:G.userType,hasVendorProfile:G.hasVendorProfile}),C(!0),sessionStorage.removeItem("privacyAgreementState");return}(async()=>{try{const G=localStorage.getItem("rememberedCredentials");if(G){const{phone:J,rememberMe:le}=JSON.parse(G);le&&(o(J),N(!0))}await Ae.isAuthenticated()&&(await Ae.isSessionValid()||await Ae.clearAuth())}catch(G){console.error("Session check failed:",G)}})(),qc.initialize().catch(console.error),FP.initialize().catch(console.error)},[]);const M=async()=>{x(!0),b("");try{await Ae.clearAuth();const{response:Y,data:V}=await Ve("/login/",{method:"POST",body:JSON.stringify({username:i,password:l})},!1);if(!Y.ok)throw new Error((V==null?void 0:V.error)||"Login failed");if(V.needs_privacy_agreement){A({userId:V.user_id,userType:V.user_type,hasVendorProfile:V.has_vendor_profile}),C(!0);return}if(V.user&&V.token){const G={...V.user,available_roles:V.available_roles||["customer"],user_type:V.user.user_type||"customer",current_role:V.user.user_type||"customer"};await n(G,V.token),j?localStorage.setItem("rememberedCredentials",JSON.stringify({phone:i,rememberMe:!0})):localStorage.removeItem("rememberedCredentials"),setTimeout(async()=>{var J,le;if(!await Nu.executePendingAction()){const ye=new URLSearchParams(window.location.search),ke=ye.get("redirect"),Ne=ye.get("returnTo"),_e=ke||Ne||((le=(J=t.state)==null?void 0:J.from)==null?void 0:le.pathname)||"/home";e(_e,{replace:!0})}},100)}else throw new Error("Invalid login response")}catch(Y){b(Y.message)}finally{x(!1)}},Z=async()=>{x(!0),b("");try{const{response:Y,data:V}=await Ve("/send-otp/",{method:"POST",body:JSON.stringify({email:i})},!1);if(!Y.ok)throw new Error((V==null?void 0:V.error)||"Failed to send OTP");w(!0),b("OTP sent successfully")}catch(Y){b(Y.message)}finally{x(!1)}},X=async()=>{x(!0),b("");try{const{response:Y,data:V}=await Ve("/verify-otp/",{method:"POST",body:JSON.stringify({email:i,otp:h})},!1);if(!Y.ok)throw new Error((V==null?void 0:V.error)||"OTP verification failed");if(V.needs_privacy_agreement){A({userId:V.user_id,userType:V.user_type,hasVendorProfile:V.has_vendor_profile}),C(!0);return}if(V.user&&V.token){const G={...V.user,available_roles:V.available_roles||["customer"],user_type:V.user.user_type||"customer",current_role:V.user.user_type||"customer"};await n(G,V.token)}setTimeout(async()=>{var ie,J;if(!await Nu.executePendingAction()){const le=new URLSearchParams(window.location.search),ye=le.get("redirect"),ke=le.get("returnTo"),Ne=ye||ke||((J=(ie=t.state)==null?void 0:ie.from)==null?void 0:J.pathname)||"/home";e(Ne,{replace:!0})}},100)}catch(Y){b(Y.message)}finally{x(!1)}},U=()=>{e("/signup")},F=async()=>{P(!0),b("");try{const Y=await qc.signIn();if(Y.success&&Y.user&&Y.token){const V={...Y.user,available_roles:Y.user.available_roles||["customer"],user_type:Y.user.user_type||"customer",current_role:Y.user.current_role||Y.user.user_type||"customer"};await n(V,Y.token),await Ae.setAuth(Y.token,V),j&&localStorage.setItem("rememberedCredentials",JSON.stringify({phone:Y.user.email,rememberMe:!0})),Y.user.user_created||!Y.user.phone_number?(O({userData:V,token:Y.token}),E(!0)):B()}else Y.error&&(Y.error.includes("Native Google Sign-In")||Y.error.includes("Google Sign-In setup")||Y.error.includes("temporarily unavailable"))?b("Google login is temporarily unavailable on mobile. Please use email/password login."):b(Y.error||"Google login failed")}catch{b("Google login failed. Please try again.")}finally{P(!1)}},B=()=>{setTimeout(async()=>{var V,G;if(!await Nu.executePendingAction()){const ie=new URLSearchParams(window.location.search),J=ie.get("redirect"),le=ie.get("returnTo"),ye=J||le||((G=(V=t.state)==null?void 0:V.from)==null?void 0:G.pathname)||"/home";e(ye,{replace:!0})}},100)},z=()=>{E(!1),B()},H=()=>{E(!1),B()},q=(Y,V)=>{C(!1),A(null)},W=()=>{C(!1),A(null),b("Privacy policy agreement is required to login")};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[s.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 left-4 w-8 h-8 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors z-10",children:s.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),s.jsx(DP,{currentType:"customer"}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("div",{className:"w-full max-w-80 mx-auto px-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsx("img",{src:hi,alt:"ezeyway",className:"w-16 h-16 mx-auto mb-6"})}),s.jsx("div",{className:"text-center mb-4",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 bg-blue-50 px-3 py-1 rounded-full",children:"Customer Login"})}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"flex space-x-8",children:[s.jsx("button",{onClick:()=>a("password"),className:`pb-2 text-sm font-medium transition-colors ${r==="password"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Password"}),s.jsx("button",{onClick:()=>a("otp"),className:`pb-2 text-sm font-medium transition-colors ${r==="otp"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"OTP"})]})}),r==="password"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:i,onChange:Y=>o(Y.target.value),placeholder:"Phone Number or Email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"relative",children:[s.jsx(je,{type:u?"text":"password",value:l,onChange:Y=>d(Y.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"rememberMe",checked:j,onChange:Y=>N(Y.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),s.jsx("label",{htmlFor:"rememberMe",className:"text-sm text-gray-700",children:"Remember my email"})]}),y&&s.jsx("p",{className:"text-red-600 text-center",children:y}),s.jsx(te,{onClick:M,disabled:!i||!l||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Logging in...":"Login"})]}),r==="otp"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:i,onChange:Y=>o(Y.target.value),placeholder:"Enter your phone number or email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),y&&s.jsx("p",{className:"text-red-600 text-center",children:y}),p?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(je,{type:"text",value:h,onChange:Y=>f(Y.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),s.jsx(te,{onClick:X,disabled:h.length!==6||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Verifying...":"Verify & Login"}),s.jsx("button",{onClick:Z,disabled:v,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}):s.jsx(te,{onClick:Z,disabled:!i||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Sending...":"Send OTP"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 to-indigo-100 text-gray-500",children:"or"})})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:F,disabled:S,className:"w-12 h-12 bg-white hover:bg-gray-50 border border-gray-300 rounded-full flex items-center justify-center transition-colors shadow-sm",children:S?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):s.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})})})]}),s.jsxs("div",{className:"text-center space-y-3 mt-6",children:[s.jsx("button",{onClick:U,className:"text-blue-600 hover:text-blue-700 text-sm font-medium block mx-auto",children:"Don't have an account? Sign up"}),s.jsx("button",{onClick:()=>e("/privacy-policy"),className:"text-gray-500 hover:text-gray-700 text-sm block mx-auto",children:"Privacy Policy"})]})]})})}),T&&I&&s.jsx($P,{user:I.userData,onComplete:z,onSkip:H}),R&&D&&s.jsx(GP,{userId:D.userId,userType:D.userType,hasVendorProfile:D.hasVendorProfile,onComplete:q,onCancel:W})]})}const gV=kh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ye({className:e,variant:t,...n}){return s.jsx("div",{className:it(gV({variant:t}),e),...n})}let Zv=null;const vV=async()=>{if(!Zv){const{notificationService:e}=await Ue(async()=>{const{notificationService:t}=await Promise.resolve().then(()=>KP);return{notificationService:t}},void 0);Zv=e}return Zv};class xV{async getConversations(){try{const{response:t,data:n}=await Ve("messaging/conversations/");return t.ok?Array.isArray(n)?n:(n==null?void 0:n.results)||[]:[]}catch{return[]}}async getMessages(t){try{const{response:n,data:r}=await Ve(`messaging/conversations/${t}/messages/`);return n.ok?(console.log("Messages API response:",r),Array.isArray(r)?r:(r==null?void 0:r.results)||[]):(console.error(`Messages API error: ${n.status}`),[])}catch(n){return console.error("Messages API error:",n),[]}}async sendMessage(t){try{const n=new FormData;t.conversation_id&&n.append("conversation_id",t.conversation_id.toString()),t.recipient_id&&n.append("recipient_id",t.recipient_id.toString()),n.append("message_type",t.message_type),t.content&&n.append("content",t.content),t.file&&n.append("file",t.file);const{response:r,data:a}=await Ve("/messaging/messages/send/",{method:"POST",body:n});if(!r.ok)throw console.error(`Message send failed: ${r.status}`),new Error(`HTTP ${r.status}`);return console.log("Message sent successfully:",a),a}catch{console.warn("Backend not available, simulating message send");const r=await Ae.getUser();return{message:{id:Date.now(),sender:{id:(r==null?void 0:r.id)||0,username:(r==null?void 0:r.username)||"You"},message_type:t.message_type,content:t.content,status:"sent",is_pinned:!1,created_at:new Date().toISOString(),is_read:!1}}}}async handleIncomingMessage(t,n){try{(await vV()).showBrowserNotification(`New message from ${n}`,{body:t.content||"New message received",tag:`message-${t.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/messages"}}),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("newMessage",{detail:{message:t,senderName:n}}))}catch(r){console.error("Failed to handle incoming message notification:",r)}}async getOrCreateConversation(t){try{const{response:n,data:r}=await Ve(`messaging/conversations/user/${t}/`);if(!n.ok)throw new Error(`HTTP ${n.status}`);return r||this.createMockConversation(t)}catch{return console.warn("Backend not available, creating mock conversation"),this.createMockConversation(t)}}createMockConversation(t){return{id:t,participants:[],last_message:void 0,unread_count:0,other_participant:{id:t,username:t===1?"EzzeYway Support":`User ${t}`,profile_picture:void 0}}}}const ar=new xV;typeof window<"u"&&window.addEventListener("message",async e=>{var t,n;if(((t=e.data)==null?void 0:t.type)==="new_message"){const{message:r}=e.data;await ar.handleIncomingMessage(r,((n=r.sender)==null?void 0:n.username)||"Unknown")}});class yV{constructor(){Gt(this,"audio",null);Gt(this,"isInitialized",!1)}async initialize(){if(!this.isInitialized){if(this.audio=null,"serviceWorker"in navigator&&!gt.isNativePlatform())try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered successfully"),navigator.serviceWorker.addEventListener("message",n=>{n.data&&n.data.type==="SHOW_ORDER_MODAL"&&window.dispatchEvent(new CustomEvent("showOrderModal",{detail:n.data.data}))}),document.addEventListener("visibilitychange",()=>{navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"VISIBILITY_CHANGE",hidden:document.hidden})}),"sync"in t&&t.sync.register("background-sync-orders")}catch(t){console.error("Service Worker registration failed:",t)}!gt.isNativePlatform()&&"Notification"in window&&(Notification.permission==="default"?await Notification.requestPermission()==="granted"?(console.log("Notification permission granted"),this.showTestNotification()):console.warn("Notification permission denied"):Notification.permission==="granted"&&console.log("Notification permission already granted")),console.log("Notification service initialized for:",gt.isNativePlatform()?"mobile":"web"),this.isInitialized=!0}}async initializeMobileNotifications(){try{if(gt.isNativePlatform()){const{LocalNotifications:t}=await Ue(async()=>{const{LocalNotifications:i}=await import("./index-JkeIVzK0.js");return{LocalNotifications:i}},[]),{PushNotifications:n}=await Ue(async()=>{const{PushNotifications:i}=await Promise.resolve().then(()=>J4);return{PushNotifications:i}},void 0),{Haptics:r,ImpactStyle:a}=await Ue(async()=>{const{Haptics:i,ImpactStyle:o}=await import("./index-CdjfZlUo.js");return{Haptics:i,ImpactStyle:o}},[]);await t.requestPermissions(),await n.requestPermissions(),await n.register(),n.addListener("pushNotificationReceived",async i=>{console.log("Push notification received:",i),await this.handleMobileOrderNotification(i.data)}),n.addListener("pushNotificationActionPerformed",async i=>{console.log("Push notification tapped:",i);const o=i.notification.data;(o==null?void 0:o.type)==="order"&&(await r.impact({style:a.Heavy}),this.openOrderModal(o))}),t.addListener("localNotificationActionPerformed",async i=>{console.log("Local notification tapped:",i);const o=i.notification.extra;(o==null?void 0:o.type)==="order"&&(await r.impact({style:a.Heavy}),this.openOrderModal(o))})}}catch(t){console.error("Failed to initialize mobile notifications:",t)}}async playNotificationSound(){this.createBeepSound()}createBeepSound(){try{const t=new(window.AudioContext||window.webkitAudioContext);this.playBeep(t,523,.2,.3),setTimeout(()=>this.playBeep(t,659,.2,.3),200),setTimeout(()=>this.playBeep(t,784,.3,.4),400)}catch(t){console.warn("Web Audio API not supported:",t)}}playBeep(t,n,r,a){const i=t.createOscillator(),o=t.createGain();i.connect(o),o.connect(t.destination),i.frequency.value=n,i.type="sine",o.gain.setValueAtTime(0,t.currentTime),o.gain.linearRampToValueAtTime(a,t.currentTime+.05),o.gain.exponentialRampToValueAtTime(.01,t.currentTime+r),i.start(t.currentTime),i.stop(t.currentTime+r)}async showTestNotification(){if(!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const t=new Notification("Notifications Enabled!",{body:"You will now receive order notifications even when the app is in the background.",icon:"/favicon.ico",badge:"/favicon.ico",tag:"test-notification",requireInteraction:!1});setTimeout(()=>t.close(),3e3)}}async showOrderNotification(t,n,r){if(!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const a=new Notification(" New Order Received!",{body:`Order #${t} - ${n}
Tap to view and respond`,icon:"/favicon.ico",tag:`order-${r}`,requireInteraction:!0});a.onclick=()=>{window.focus(),this.openOrderModal({orderId:r,orderNumber:t,amount:n}),a.close()},setTimeout(()=>a.close(),15e3)}gt.isNativePlatform()&&("vibrate"in navigator&&navigator.vibrate([300,100,300,100,500]),this.openOrderModal({orderId:r,orderNumber:t,amount:n}))}async showBrowserNotification(t,n,r,a){if(!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const i=new Notification(t,{body:n,icon:"/favicon.ico",badge:"/favicon.ico",tag:`message-${r}`,requireInteraction:!0,data:{conversationId:r,userType:a}});i.onclick=()=>{window.focus(),this.navigateToConversation(r,a),i.close()},setTimeout(()=>i.close(),1e4)}}async showMobileOrderNotification(t,n,r){if(gt.isNativePlatform())try{const{LocalNotifications:a}=await Ue(async()=>{const{LocalNotifications:l}=await import("./index-JkeIVzK0.js");return{LocalNotifications:l}},[]),{Haptics:i,ImpactStyle:o}=await Ue(async()=>{const{Haptics:l,ImpactStyle:d}=await import("./index-CdjfZlUo.js");return{Haptics:l,ImpactStyle:d}},[]);await i.impact({style:o.Heavy}),await a.schedule({notifications:[{title:" New Order Received!",body:`Order #${t} - ${n}
Tap to accept/reject`,id:Date.now(),sound:"default",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF6B35",actionTypeId:"OPEN_ORDER",extra:{type:"order",orderId:r,orderNumber:t,amount:n,autoOpen:!0}}]})}catch(a){console.error("Failed to show mobile order notification:",a)}}async showMobileNotification(t,n,r,a){if(gt.isNativePlatform())try{const{LocalNotifications:i}=await Ue(async()=>{const{LocalNotifications:o}=await import("./index-JkeIVzK0.js");return{LocalNotifications:o}},[]);await i.schedule({notifications:[{title:t,body:n,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",attachments:[],actionTypeId:"OPEN_MESSAGE",extra:{conversationId:r,userType:a}}]})}catch(i){console.error("Failed to show mobile notification:",i)}}openOrderModal(t){if(window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t})),gt.isNativePlatform()){const n=window.location.pathname;!n.includes("/vendor/orders")&&!n.includes("/vendor/dashboard")&&(window.location.href="/vendor/orders")}}async handleMobileOrderNotification(t){try{const{Haptics:n,ImpactStyle:r}=await Ue(async()=>{const{Haptics:a,ImpactStyle:i}=await import("./index-CdjfZlUo.js");return{Haptics:a,ImpactStyle:i}},[]);await n.impact({style:r.Heavy}),await this.playNotificationSound(),this.openOrderModal(t)}catch(n){console.error("Error handling mobile order notification:",n)}}navigateToConversation(t,n){const a={vendor:`/vendor/messages/${t}`,customer:`/messages/${t}`,superadmin:`/accounts/superadmin/messages/${t}/`}[n];a&&(window.location.href=a)}async notifyNewMessage(t,n,r,a){await this.initialize();const i=`New message from ${t}`,o=n.length>50?n.substring(0,50)+"...":n;await this.playNotificationSound(),await this.showBrowserNotification(i,o,r,a),await this.showMobileNotification(i,o,r,a)}async requestPermissions(){return await this.initialize(),!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"}async requestPermission(){return this.requestPermissions()}async getNotifications(){try{const{apiRequest:t}=await Ue(async()=>{const{apiRequest:a}=await Promise.resolve().then(()=>hs);return{apiRequest:a}},void 0),{response:n,data:r}=await t("/vendor-notifications/");return n.ok&&r?r.results||r||[]:[]}catch(t){return console.warn("Notifications API not available:",t.message),[]}}async getUnreadCount(){try{return(await this.getNotifications()).filter(n=>!n.read).length}catch(t){return console.warn("Failed to get unread count:",t.message),0}}async markAsRead(t){try{const{apiRequest:n}=await Ue(async()=>{const{apiRequest:a}=await Promise.resolve().then(()=>hs);return{apiRequest:a}},void 0),{response:r}=await n(`/notifications/${t}/read/`,{method:"POST"});r.ok&&console.log("Notification marked as read:",t)}catch(n){console.error("Failed to mark notification as read:",n)}}async markAllAsRead(){try{const{apiRequest:t}=await Ue(async()=>{const{apiRequest:r}=await Promise.resolve().then(()=>hs);return{apiRequest:r}},void 0),{response:n}=await t("/notifications/mark-all-read/",{method:"POST"});n.ok&&console.log("All notifications marked as read")}catch(t){console.error("Failed to mark all notifications as read:",t)}}async showBrowserNotificationCompat(t,n){if(await this.playNotificationSound(),!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const r=new Notification(t,{body:n.body,icon:"/favicon.ico",badge:"/favicon.ico",tag:n.tag,requireInteraction:n.requireInteraction,data:n.data,silent:!1});r.onclick=()=>{var a;window.focus(),(a=n.data)!=null&&a.actionUrl&&(window.location.href=n.data.actionUrl),r.close()},setTimeout(()=>r.close(),1e4)}}}const us=new yV,KP=Object.freeze(Object.defineProperty({__proto__:null,notificationService:us},Symbol.toStringTag,{value:"Module"}));function ZP(){const[e,t]=_.useState([]),[n,r]=_.useState(0),[a,i]=_.useState(!1),o=async()=>{var h,f;try{const{authService:u}=await Ue(async()=>{const{authService:v}=await Promise.resolve().then(()=>ai);return{authService:v}},void 0);if(!await u.getToken())return;i(!0);const[p,w]=await Promise.all([us.getNotifications(),us.getUnreadCount()]);t(p),r(w)}catch(u){(h=u.message)!=null&&h.includes("401")||(f=u.message)!=null&&f.includes("Unauthorized")?(t([]),r(0)):console.error("Failed to load notifications:",u)}finally{i(!1)}},l=async h=>{try{await us.markAsRead(h),r(f=>Math.max(0,f-1)),t(f=>f.map(u=>u.id===h?{...u,read:!0}:u))}catch(f){console.error("Failed to mark notification as read:",f)}},d=async()=>{try{await us.markAllAsRead(),r(0),t(h=>h.map(f=>({...f,read:!0})))}catch(h){console.error("Failed to mark all notifications as read:",h)}};return _.useEffect(()=>{o();const h=setInterval(o,1e4);return()=>clearInterval(h)},[]),_.useEffect(()=>{us.requestPermission()},[]),{notifications:e,unreadCount:n,isLoading:a,markAsRead:l,markAllAsRead:d,refreshNotifications:o}}const vo=()=>{const e=lt(),{user:t,state:n}=$n(),r=async(l,d)=>{if(!(t&&n.isAuthenticated)){console.log("User not authenticated, redirecting to login"),d&&Nu.setPendingAction(d);const f=window.location.pathname+window.location.search;e(`/login?returnTo=${encodeURIComponent(f)}`);return}console.log("User authenticated, executing action");try{await l()}catch(f){console.error("Error executing authenticated action:",f)}};return{executeWithAuth:r,addToCartWithAuth:(l,d=1)=>r(async()=>{const{cartService:h}=await Ue(async()=>{const{cartService:f}=await Promise.resolve().then(()=>RP);return{cartService:f}},void 0);await h.addToCart(l,d)},{type:"add_to_cart",data:{productId:l,quantity:d}}),buyNowWithAuth:l=>r(async()=>{console.log("useAuthAction - Setting buyNowProduct in localStorage:",l),localStorage.setItem("buyNowProduct",JSON.stringify(l)),console.log("useAuthAction - Navigating to checkout with directBuy=true"),e("/checkout?directBuy=true")},{type:"buy_now",data:l}),navigateWithAuth:l=>r(()=>e(l),{type:"navigate",path:l}),isAuthenticated:!!(t&&n.isAuthenticated)}};var bV=_.createContext(void 0);function fd(e){const t=_.useContext(bV);return e||t||"ltr"}var Yv=0;function Nw(){_.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??$1()),document.body.insertAdjacentElement("beforeend",e[1]??$1()),Yv++,()=>{Yv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Yv--}},[])}function $1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Xv="focusScope.autoFocusOnMount",Jv="focusScope.autoFocusOnUnmount",B1={bubbles:!1,cancelable:!0},wV="FocusScope",ig=_.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,d]=_.useState(null),h=Ps(a),f=Ps(i),u=_.useRef(null),m=Nt(t,v=>d(v)),p=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let v=function(j){if(p.paused||!l)return;const N=j.target;l.contains(N)?u.current=N:Pi(u.current,{select:!0})},x=function(j){if(p.paused||!l)return;const N=j.relatedTarget;N!==null&&(l.contains(N)||Pi(u.current,{select:!0}))},y=function(j){if(document.activeElement===document.body)for(const S of j)S.removedNodes.length>0&&Pi(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),b.disconnect()}}},[r,l,p.paused]),_.useEffect(()=>{if(l){V1.add(p);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent(Xv,B1);l.addEventListener(Xv,h),l.dispatchEvent(y),y.defaultPrevented||(_V(CV(YP(l)),{select:!0}),document.activeElement===v&&Pi(l))}return()=>{l.removeEventListener(Xv,h),setTimeout(()=>{const y=new CustomEvent(Jv,B1);l.addEventListener(Jv,f),l.dispatchEvent(y),y.defaultPrevented||Pi(v??document.body,{select:!0}),l.removeEventListener(Jv,f),V1.remove(p)},0)}}},[l,h,f,p]);const w=_.useCallback(v=>{if(!n&&!r||p.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const b=v.currentTarget,[j,N]=jV(b);j&&N?!v.shiftKey&&y===N?(v.preventDefault(),n&&Pi(j,{select:!0})):v.shiftKey&&y===j&&(v.preventDefault(),n&&Pi(N,{select:!0})):y===b&&v.preventDefault()}},[n,r,p.paused]);return s.jsx(ut.div,{tabIndex:-1,...o,ref:m,onKeyDown:w})});ig.displayName=wV;function _V(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Pi(r,{select:t}),document.activeElement!==n)return}function jV(e){const t=YP(e),n=z1(t,e),r=z1(t.reverse(),e);return[n,r]}function YP(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function z1(e,t){for(const n of e)if(!NV(n,{upTo:t}))return n}function NV(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function SV(e){return e instanceof HTMLInputElement&&"select"in e}function Pi(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&SV(e)&&t&&e.select()}}var V1=kV();function kV(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=U1(e,t),e.unshift(t)},remove(t){var n;e=U1(e,t),(n=e[0])==null||n.resume()}}}function U1(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function CV(e){return e.filter(t=>t.tagName!=="A")}var Qv="rovingFocusGroup.onEntryFocus",EV={bubbles:!1,cancelable:!0},Ah="RovingFocusGroup",[$y,XP,TV]=Dp(Ah),[PV,md]=jn(Ah,[TV]),[AV,OV]=PV(Ah),JP=_.forwardRef((e,t)=>s.jsx($y.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx($y.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(RV,{...e,ref:t})})}));JP.displayName=Ah;var RV=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...u}=e,m=_.useRef(null),p=Nt(t,m),w=fd(i),[v,x]=ta({prop:o,defaultProp:l??null,onChange:d,caller:Ah}),[y,b]=_.useState(!1),j=Ps(h),N=XP(n),S=_.useRef(!1),[P,T]=_.useState(0);return _.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(Qv,j),()=>E.removeEventListener(Qv,j)},[j]),s.jsx(AV,{scope:n,orientation:r,dir:w,loop:a,currentTabStopId:v,onItemFocus:_.useCallback(E=>x(E),[x]),onItemShiftTab:_.useCallback(()=>b(!0),[]),onFocusableItemAdd:_.useCallback(()=>T(E=>E+1),[]),onFocusableItemRemove:_.useCallback(()=>T(E=>E-1),[]),children:s.jsx(ut.div,{tabIndex:y||P===0?-1:0,"data-orientation":r,...u,ref:p,style:{outline:"none",...e.style},onMouseDown:Ze(e.onMouseDown,()=>{S.current=!0}),onFocus:Ze(e.onFocus,E=>{const I=!S.current;if(E.target===E.currentTarget&&I&&!y){const O=new CustomEvent(Qv,EV);if(E.currentTarget.dispatchEvent(O),!O.defaultPrevented){const R=N().filter(Z=>Z.focusable),C=R.find(Z=>Z.active),D=R.find(Z=>Z.id===v),M=[C,D,...R].filter(Boolean).map(Z=>Z.ref.current);tA(M,f)}}S.current=!1}),onBlur:Ze(e.onBlur,()=>b(!1))})})}),QP="RovingFocusGroupItem",eA=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...l}=e,d=Qr(),h=i||d,f=OV(QP,n),u=f.currentTabStopId===h,m=XP(n),{onFocusableItemAdd:p,onFocusableItemRemove:w,currentTabStopId:v}=f;return _.useEffect(()=>{if(r)return p(),()=>w()},[r,p,w]),s.jsx($y.ItemSlot,{scope:n,id:h,focusable:r,active:a,children:s.jsx(ut.span,{tabIndex:u?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:Ze(e.onMouseDown,x=>{r?f.onItemFocus(h):x.preventDefault()}),onFocus:Ze(e.onFocus,()=>f.onItemFocus(h)),onKeyDown:Ze(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=MV(x,f.orientation,f.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let j=m().filter(N=>N.focusable).map(N=>N.ref.current);if(y==="last")j.reverse();else if(y==="prev"||y==="next"){y==="prev"&&j.reverse();const N=j.indexOf(x.currentTarget);j=f.loop?DV(j,N+1):j.slice(N+1)}setTimeout(()=>tA(j))}}),children:typeof o=="function"?o({isCurrentTabStop:u,hasTabStop:v!=null}):o})})});eA.displayName=QP;var LV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function IV(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function MV(e,t,n){const r=IV(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return LV[r]}function tA(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function DV(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Sw=JP,kw=eA,FV=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Rl=new WeakMap,Ef=new WeakMap,Tf={},ex=0,sA=function(e){return e&&(e.host||sA(e.parentNode))},$V=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=sA(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},BV=function(e,t,n,r){var a=$V(t,Array.isArray(e)?e:[e]);Tf[n]||(Tf[n]=new WeakMap);var i=Tf[n],o=[],l=new Set,d=new Set(a),h=function(u){!u||l.has(u)||(l.add(u),h(u.parentNode))};a.forEach(h);var f=function(u){!u||d.has(u)||Array.prototype.forEach.call(u.children,function(m){if(l.has(m))f(m);else try{var p=m.getAttribute(r),w=p!==null&&p!=="false",v=(Rl.get(m)||0)+1,x=(i.get(m)||0)+1;Rl.set(m,v),i.set(m,x),o.push(m),v===1&&w&&Ef.set(m,!0),x===1&&m.setAttribute(n,"true"),w||m.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return f(t),l.clear(),ex++,function(){o.forEach(function(u){var m=Rl.get(u)-1,p=i.get(u)-1;Rl.set(u,m),i.set(u,p),m||(Ef.has(u)||u.removeAttribute(r),Ef.delete(u)),p||u.removeAttribute(n)}),ex--,ex||(Rl=new WeakMap,Rl=new WeakMap,Ef=new WeakMap,Tf={})}},Cw=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=FV(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),BV(r,a,n,"aria-hidden")):function(){return null}},ya=function(){return ya=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ya.apply(this,arguments)};function nA(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function zV(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var tm="right-scroll-bar-position",sm="width-before-scroll-bar",VV="with-scroll-bars-hidden",UV="--removed-body-scroll-bar-size";function tx(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function qV(e,t){var n=_.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var HV=typeof window<"u"?_.useLayoutEffect:_.useEffect,q1=new WeakMap;function WV(e,t){var n=qV(null,function(r){return e.forEach(function(a){return tx(a,r)})});return HV(function(){var r=q1.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(l){i.has(l)||tx(l,null)}),i.forEach(function(l){a.has(l)||tx(l,o)})}q1.set(n,e)},[e]),n}function GV(e){return e}function KV(e,t){t===void 0&&(t=GV);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var d=function(){var f=o;o=[],f.forEach(i)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),n}}}};return a}function ZV(e){e===void 0&&(e={});var t=KV(null);return t.options=ya({async:!0,ssr:!1},e),t}var rA=function(e){var t=e.sideCar,n=nA(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,ya({},n))};rA.isSideCarExport=!0;function YV(e,t){return e.useMedium(t),rA}var aA=ZV(),sx=function(){},og=_.forwardRef(function(e,t){var n=_.useRef(null),r=_.useState({onScrollCapture:sx,onWheelCapture:sx,onTouchMoveCapture:sx}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,d=e.className,h=e.removeScrollBar,f=e.enabled,u=e.shards,m=e.sideCar,p=e.noRelative,w=e.noIsolation,v=e.inert,x=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,j=e.gapMode,N=nA(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,P=WV([n,t]),T=ya(ya({},N),a);return _.createElement(_.Fragment,null,f&&_.createElement(S,{sideCar:aA,removeScrollBar:h,shards:u,noRelative:p,noIsolation:w,inert:v,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:j}),o?_.cloneElement(_.Children.only(l),ya(ya({},T),{ref:P})):_.createElement(b,ya({},T,{className:d,ref:P}),l))});og.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};og.classNames={fullWidth:sm,zeroRight:tm};var XV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=XV();return t&&e.setAttribute("nonce",t),e}function QV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function e7(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var t7=function(){var e=0,t=null;return{add:function(n){e==0&&(t=JV())&&(QV(t,n),e7(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},s7=function(){var e=t7();return function(t,n){_.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},iA=function(){var e=s7(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},n7={left:0,top:0,right:0,gap:0},nx=function(e){return parseInt(e||"",10)||0},r7=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[nx(n),nx(r),nx(a)]},a7=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return n7;var t=r7(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},i7=iA(),pc="data-scroll-locked",o7=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(VV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(pc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tm,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(sm,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(tm," .").concat(tm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(sm," .").concat(sm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(pc,`] {
    `).concat(UV,": ").concat(l,`px;
  }
`)},H1=function(){var e=parseInt(document.body.getAttribute(pc)||"0",10);return isFinite(e)?e:0},l7=function(){_.useEffect(function(){return document.body.setAttribute(pc,(H1()+1).toString()),function(){var e=H1()-1;e<=0?document.body.removeAttribute(pc):document.body.setAttribute(pc,e.toString())}},[])},c7=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;l7();var i=_.useMemo(function(){return a7(a)},[a]);return _.createElement(i7,{styles:o7(i,!t,a,n?"":"!important")})},By=!1;if(typeof window<"u")try{var Pf=Object.defineProperty({},"passive",{get:function(){return By=!0,!0}});window.addEventListener("test",Pf,Pf),window.removeEventListener("test",Pf,Pf)}catch{By=!1}var Ll=By?{passive:!1}:!1,d7=function(e){return e.tagName==="TEXTAREA"},oA=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!d7(e)&&n[t]==="visible")},u7=function(e){return oA(e,"overflowY")},h7=function(e){return oA(e,"overflowX")},W1=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=lA(e,r);if(a){var i=cA(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},f7=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},m7=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},lA=function(e,t){return e==="v"?u7(t):h7(t)},cA=function(e,t){return e==="v"?f7(t):m7(t)},p7=function(e,t){return e==="h"&&t==="rtl"?-1:1},g7=function(e,t,n,r,a){var i=p7(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,d=t.contains(l),h=!1,f=o>0,u=0,m=0;do{if(!l)break;var p=cA(e,l),w=p[0],v=p[1],x=p[2],y=v-x-i*w;(w||y)&&lA(e,l)&&(u+=y,m+=w);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!d&&l!==document.body||d&&(t.contains(l)||t===l));return(f&&(Math.abs(u)<1||!a)||!f&&(Math.abs(m)<1||!a))&&(h=!0),h},Af=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},G1=function(e){return[e.deltaX,e.deltaY]},K1=function(e){return e&&"current"in e?e.current:e},v7=function(e,t){return e[0]===t[0]&&e[1]===t[1]},x7=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},y7=0,Il=[];function b7(e){var t=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),a=_.useState(y7++)[0],i=_.useState(iA)[0],o=_.useRef(e);_.useEffect(function(){o.current=e},[e]),_.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=zV([e.lockRef.current],(e.shards||[]).map(K1),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=_.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var y=Af(v),b=n.current,j="deltaX"in v?v.deltaX:b[0]-y[0],N="deltaY"in v?v.deltaY:b[1]-y[1],S,P=v.target,T=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in v&&T==="h"&&P.type==="range")return!1;var E=W1(T,P);if(!E)return!0;if(E?S=T:(S=T==="v"?"h":"v",E=W1(T,P)),!E)return!1;if(!r.current&&"changedTouches"in v&&(j||N)&&(r.current=S),!S)return!0;var I=r.current||S;return g7(I,x,v,I==="h"?j:N,!0)},[]),d=_.useCallback(function(v){var x=v;if(!(!Il.length||Il[Il.length-1]!==i)){var y="deltaY"in x?G1(x):Af(x),b=t.current.filter(function(S){return S.name===x.type&&(S.target===x.target||x.target===S.shadowParent)&&v7(S.delta,y)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var j=(o.current.shards||[]).map(K1).filter(Boolean).filter(function(S){return S.contains(x.target)}),N=j.length>0?l(x,j[0]):!o.current.noIsolation;N&&x.cancelable&&x.preventDefault()}}},[]),h=_.useCallback(function(v,x,y,b){var j={name:v,delta:x,target:y,should:b,shadowParent:w7(y)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(N){return N!==j})},1)},[]),f=_.useCallback(function(v){n.current=Af(v),r.current=void 0},[]),u=_.useCallback(function(v){h(v.type,G1(v),v.target,l(v,e.lockRef.current))},[]),m=_.useCallback(function(v){h(v.type,Af(v),v.target,l(v,e.lockRef.current))},[]);_.useEffect(function(){return Il.push(i),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",d,Ll),document.addEventListener("touchmove",d,Ll),document.addEventListener("touchstart",f,Ll),function(){Il=Il.filter(function(v){return v!==i}),document.removeEventListener("wheel",d,Ll),document.removeEventListener("touchmove",d,Ll),document.removeEventListener("touchstart",f,Ll)}},[]);var p=e.removeScrollBar,w=e.inert;return _.createElement(_.Fragment,null,w?_.createElement(i,{styles:x7(a)}):null,p?_.createElement(c7,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function w7(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const _7=YV(aA,b7);var lg=_.forwardRef(function(e,t){return _.createElement(og,ya({},e,{ref:t,sideCar:_7}))});lg.classNames=og.classNames;var zy=["Enter"," "],j7=["ArrowDown","PageUp","Home"],dA=["ArrowUp","PageDown","End"],N7=[...j7,...dA],S7={ltr:[...zy,"ArrowRight"],rtl:[...zy,"ArrowLeft"]},k7={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Oh="Menu",[ih,C7,E7]=Dp(Oh),[_l,uA]=jn(Oh,[E7,ud,md]),cg=ud(),hA=md(),[T7,jl]=_l(Oh),[P7,Rh]=_l(Oh),fA=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,l=cg(t),[d,h]=_.useState(null),f=_.useRef(!1),u=Ps(i),m=fd(a);return _.useEffect(()=>{const p=()=>{f.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>f.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),s.jsx(fw,{...l,children:s.jsx(T7,{scope:t,open:n,onOpenChange:u,content:d,onContentChange:h,children:s.jsx(P7,{scope:t,onClose:_.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:f,dir:m,modal:o,children:r})})})};fA.displayName=Oh;var A7="MenuAnchor",Ew=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=cg(n);return s.jsx(mw,{...a,...r,ref:t})});Ew.displayName=A7;var Tw="MenuPortal",[O7,mA]=_l(Tw,{forceMount:void 0}),pA=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=jl(Tw,t);return s.jsx(O7,{scope:t,forceMount:n,children:s.jsx(fn,{present:n||i.open,children:s.jsx(Nh,{asChild:!0,container:a,children:r})})})};pA.displayName=Tw;var Nr="MenuContent",[R7,Pw]=_l(Nr),gA=_.forwardRef((e,t)=>{const n=mA(Nr,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=jl(Nr,e.__scopeMenu),o=Rh(Nr,e.__scopeMenu);return s.jsx(ih.Provider,{scope:e.__scopeMenu,children:s.jsx(fn,{present:r||i.open,children:s.jsx(ih.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(L7,{...a,ref:t}):s.jsx(I7,{...a,ref:t})})})})}),L7=_.forwardRef((e,t)=>{const n=jl(Nr,e.__scopeMenu),r=_.useRef(null),a=Nt(t,r);return _.useEffect(()=>{const i=r.current;if(i)return Cw(i)},[]),s.jsx(Aw,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ze(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),I7=_.forwardRef((e,t)=>{const n=jl(Nr,e.__scopeMenu);return s.jsx(Aw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),M7=dl("MenuContent.ScrollLock"),Aw=_.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:u,onInteractOutside:m,onDismiss:p,disableOutsideScroll:w,...v}=e,x=jl(Nr,n),y=Rh(Nr,n),b=cg(n),j=hA(n),N=C7(n),[S,P]=_.useState(null),T=_.useRef(null),E=Nt(t,T,x.onContentChange),I=_.useRef(0),O=_.useRef(""),R=_.useRef(0),C=_.useRef(null),D=_.useRef("right"),A=_.useRef(0),M=w?lg:_.Fragment,Z=w?{as:M7,allowPinchZoom:!0}:void 0,X=F=>{var G,ie;const B=O.current+F,z=N().filter(J=>!J.disabled),H=document.activeElement,q=(G=z.find(J=>J.ref.current===H))==null?void 0:G.textValue,W=z.map(J=>J.textValue),Y=K7(W,B,q),V=(ie=z.find(J=>J.textValue===Y))==null?void 0:ie.ref.current;(function J(le){O.current=le,window.clearTimeout(I.current),le!==""&&(I.current=window.setTimeout(()=>J(""),1e3))})(B),V&&setTimeout(()=>V.focus())};_.useEffect(()=>()=>window.clearTimeout(I.current),[]),Nw();const U=_.useCallback(F=>{var z,H;return D.current===((z=C.current)==null?void 0:z.side)&&Y7(F,(H=C.current)==null?void 0:H.area)},[]);return s.jsx(R7,{scope:n,searchRef:O,onItemEnter:_.useCallback(F=>{U(F)&&F.preventDefault()},[U]),onItemLeave:_.useCallback(F=>{var B;U(F)||((B=T.current)==null||B.focus(),P(null))},[U]),onTriggerLeave:_.useCallback(F=>{U(F)&&F.preventDefault()},[U]),pointerGraceTimerRef:R,onPointerGraceIntentChange:_.useCallback(F=>{C.current=F},[]),children:s.jsx(M,{...Z,children:s.jsx(ig,{asChild:!0,trapped:a,onMountAutoFocus:Ze(i,F=>{var B;F.preventDefault(),(B=T.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(id,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:u,onInteractOutside:m,onDismiss:p,children:s.jsx(Sw,{asChild:!0,...j,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:P,onEntryFocus:Ze(d,F=>{y.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(pw,{role:"menu","aria-orientation":"vertical","data-state":OA(x.open),"data-radix-menu-content":"",dir:y.dir,...b,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:Ze(v.onKeyDown,F=>{const z=F.target.closest("[data-radix-menu-content]")===F.currentTarget,H=F.ctrlKey||F.altKey||F.metaKey,q=F.key.length===1;z&&(F.key==="Tab"&&F.preventDefault(),!H&&q&&X(F.key));const W=T.current;if(F.target!==W||!N7.includes(F.key))return;F.preventDefault();const V=N().filter(G=>!G.disabled).map(G=>G.ref.current);dA.includes(F.key)&&V.reverse(),W7(V)}),onBlur:Ze(e.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(I.current),O.current="")}),onPointerMove:Ze(e.onPointerMove,oh(F=>{const B=F.target,z=A.current!==F.clientX;if(F.currentTarget.contains(B)&&z){const H=F.clientX>A.current?"right":"left";D.current=H,A.current=F.clientX}}))})})})})})})});gA.displayName=Nr;var D7="MenuGroup",Ow=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ut.div,{role:"group",...r,ref:t})});Ow.displayName=D7;var F7="MenuLabel",vA=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ut.div,{...r,ref:t})});vA.displayName=F7;var Hm="MenuItem",Z1="menu.itemSelect",dg=_.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=_.useRef(null),o=Rh(Hm,e.__scopeMenu),l=Pw(Hm,e.__scopeMenu),d=Nt(t,i),h=_.useRef(!1),f=()=>{const u=i.current;if(!n&&u){const m=new CustomEvent(Z1,{bubbles:!0,cancelable:!0});u.addEventListener(Z1,p=>r==null?void 0:r(p),{once:!0}),Kb(u,m),m.defaultPrevented?h.current=!1:o.onClose()}};return s.jsx(xA,{...a,ref:d,disabled:n,onClick:Ze(e.onClick,f),onPointerDown:u=>{var m;(m=e.onPointerDown)==null||m.call(e,u),h.current=!0},onPointerUp:Ze(e.onPointerUp,u=>{var m;h.current||(m=u.currentTarget)==null||m.click()}),onKeyDown:Ze(e.onKeyDown,u=>{const m=l.searchRef.current!=="";n||m&&u.key===" "||zy.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});dg.displayName=Hm;var xA=_.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=Pw(Hm,n),l=hA(n),d=_.useRef(null),h=Nt(t,d),[f,u]=_.useState(!1),[m,p]=_.useState("");return _.useEffect(()=>{const w=d.current;w&&p((w.textContent??"").trim())},[i.children]),s.jsx(ih.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:s.jsx(kw,{asChild:!0,...l,focusable:!r,children:s.jsx(ut.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:h,onPointerMove:Ze(e.onPointerMove,oh(w=>{r?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ze(e.onPointerLeave,oh(w=>o.onItemLeave(w))),onFocus:Ze(e.onFocus,()=>u(!0)),onBlur:Ze(e.onBlur,()=>u(!1))})})})}),$7="MenuCheckboxItem",yA=_.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return s.jsx(NA,{scope:e.__scopeMenu,checked:n,children:s.jsx(dg,{role:"menuitemcheckbox","aria-checked":Wm(n)?"mixed":n,...a,ref:t,"data-state":Lw(n),onSelect:Ze(a.onSelect,()=>r==null?void 0:r(Wm(n)?!0:!n),{checkForDefaultPrevented:!1})})})});yA.displayName=$7;var bA="MenuRadioGroup",[B7,z7]=_l(bA,{value:void 0,onValueChange:()=>{}}),wA=_.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ps(r);return s.jsx(B7,{scope:e.__scopeMenu,value:n,onValueChange:i,children:s.jsx(Ow,{...a,ref:t})})});wA.displayName=bA;var _A="MenuRadioItem",jA=_.forwardRef((e,t)=>{const{value:n,...r}=e,a=z7(_A,e.__scopeMenu),i=n===a.value;return s.jsx(NA,{scope:e.__scopeMenu,checked:i,children:s.jsx(dg,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":Lw(i),onSelect:Ze(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});jA.displayName=_A;var Rw="MenuItemIndicator",[NA,V7]=_l(Rw,{checked:!1}),SA=_.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=V7(Rw,n);return s.jsx(fn,{present:r||Wm(i.checked)||i.checked===!0,children:s.jsx(ut.span,{...a,ref:t,"data-state":Lw(i.checked)})})});SA.displayName=Rw;var U7="MenuSeparator",kA=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ut.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});kA.displayName=U7;var q7="MenuArrow",CA=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=cg(n);return s.jsx(gw,{...a,...r,ref:t})});CA.displayName=q7;var H7="MenuSub",[rie,EA]=_l(H7),lu="MenuSubTrigger",TA=_.forwardRef((e,t)=>{const n=jl(lu,e.__scopeMenu),r=Rh(lu,e.__scopeMenu),a=EA(lu,e.__scopeMenu),i=Pw(lu,e.__scopeMenu),o=_.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=i,h={__scopeMenu:e.__scopeMenu},f=_.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return _.useEffect(()=>f,[f]),_.useEffect(()=>{const u=l.current;return()=>{window.clearTimeout(u),d(null)}},[l,d]),s.jsx(Ew,{asChild:!0,...h,children:s.jsx(xA,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":OA(n.open),...e,ref:Mp(t,a.onTriggerChange),onClick:u=>{var m;(m=e.onClick)==null||m.call(e,u),!(e.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ze(e.onPointerMove,oh(u=>{i.onItemEnter(u),!u.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ze(e.onPointerLeave,oh(u=>{var p,w;f();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const v=(w=n.content)==null?void 0:w.dataset.side,x=v==="right",y=x?-5:5,b=m[x?"left":"right"],j=m[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:u.clientX+y,y:u.clientY},{x:b,y:m.top},{x:j,y:m.top},{x:j,y:m.bottom},{x:b,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(u),u.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ze(e.onKeyDown,u=>{var p;const m=i.searchRef.current!=="";e.disabled||m&&u.key===" "||S7[r.dir].includes(u.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),u.preventDefault())})})})});TA.displayName=lu;var PA="MenuSubContent",AA=_.forwardRef((e,t)=>{const n=mA(Nr,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=jl(Nr,e.__scopeMenu),o=Rh(Nr,e.__scopeMenu),l=EA(PA,e.__scopeMenu),d=_.useRef(null),h=Nt(t,d);return s.jsx(ih.Provider,{scope:e.__scopeMenu,children:s.jsx(fn,{present:r||i.open,children:s.jsx(ih.Slot,{scope:e.__scopeMenu,children:s.jsx(Aw,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var u;o.isUsingKeyboardRef.current&&((u=d.current)==null||u.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ze(e.onFocusOutside,f=>{f.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ze(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ze(e.onKeyDown,f=>{var p;const u=f.currentTarget.contains(f.target),m=k7[o.dir].includes(f.key);u&&m&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),f.preventDefault())})})})})})});AA.displayName=PA;function OA(e){return e?"open":"closed"}function Wm(e){return e==="indeterminate"}function Lw(e){return Wm(e)?"indeterminate":e?"checked":"unchecked"}function W7(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function G7(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function K7(e,t,n){const a=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=G7(e,Math.max(i,0));a.length===1&&(o=o.filter(h=>h!==n));const d=o.find(h=>h.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function Z7(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],d=t[o],h=l.x,f=l.y,u=d.x,m=d.y;f>r!=m>r&&n<(u-h)*(r-f)/(m-f)+h&&(a=!a)}return a}function Y7(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Z7(n,t)}function oh(e){return t=>t.pointerType==="mouse"?e(t):void 0}var X7=fA,J7=Ew,Q7=pA,e9=gA,t9=Ow,s9=vA,n9=dg,r9=yA,a9=wA,i9=jA,o9=SA,l9=kA,c9=CA,d9=TA,u9=AA,ug="DropdownMenu",[h9,aie]=jn(ug,[uA]),zn=uA(),[f9,RA]=h9(ug),LA=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,d=zn(t),h=_.useRef(null),[f,u]=ta({prop:a,defaultProp:i??!1,onChange:o,caller:ug});return s.jsx(f9,{scope:t,triggerId:Qr(),triggerRef:h,contentId:Qr(),open:f,onOpenChange:u,onOpenToggle:_.useCallback(()=>u(m=>!m),[u]),modal:l,children:s.jsx(X7,{...d,open:f,onOpenChange:u,dir:r,modal:l,children:n})})};LA.displayName=ug;var IA="DropdownMenuTrigger",MA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=RA(IA,n),o=zn(n);return s.jsx(J7,{asChild:!0,...o,children:s.jsx(ut.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Mp(t,i.triggerRef),onPointerDown:Ze(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Ze(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});MA.displayName=IA;var m9="DropdownMenuPortal",DA=e=>{const{__scopeDropdownMenu:t,...n}=e,r=zn(t);return s.jsx(Q7,{...r,...n})};DA.displayName=m9;var FA="DropdownMenuContent",$A=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=RA(FA,n),i=zn(n),o=_.useRef(!1);return s.jsx(e9,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:Ze(e.onCloseAutoFocus,l=>{var d;o.current||(d=a.triggerRef.current)==null||d.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ze(e.onInteractOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!a.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$A.displayName=FA;var p9="DropdownMenuGroup",g9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(t9,{...a,...r,ref:t})});g9.displayName=p9;var v9="DropdownMenuLabel",BA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(s9,{...a,...r,ref:t})});BA.displayName=v9;var x9="DropdownMenuItem",zA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(n9,{...a,...r,ref:t})});zA.displayName=x9;var y9="DropdownMenuCheckboxItem",VA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(r9,{...a,...r,ref:t})});VA.displayName=y9;var b9="DropdownMenuRadioGroup",w9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(a9,{...a,...r,ref:t})});w9.displayName=b9;var _9="DropdownMenuRadioItem",UA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(i9,{...a,...r,ref:t})});UA.displayName=_9;var j9="DropdownMenuItemIndicator",qA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(o9,{...a,...r,ref:t})});qA.displayName=j9;var N9="DropdownMenuSeparator",HA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(l9,{...a,...r,ref:t})});HA.displayName=N9;var S9="DropdownMenuArrow",k9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(c9,{...a,...r,ref:t})});k9.displayName=S9;var C9="DropdownMenuSubTrigger",WA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(d9,{...a,...r,ref:t})});WA.displayName=C9;var E9="DropdownMenuSubContent",GA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=zn(n);return s.jsx(u9,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});GA.displayName=E9;var T9=LA,P9=MA,A9=DA,KA=$A,ZA=BA,YA=zA,XA=VA,JA=UA,QA=qA,eO=HA,tO=WA,sO=GA;const Hc=T9,Wc=P9,O9=_.forwardRef(({className:e,inset:t,children:n,...r},a)=>s.jsxs(tO,{ref:a,className:it("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx($c,{className:"ml-auto h-4 w-4"})]}));O9.displayName=tO.displayName;const R9=_.forwardRef(({className:e,...t},n)=>s.jsx(sO,{ref:n,className:it("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));R9.displayName=sO.displayName;const hl=_.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(A9,{children:s.jsx(KA,{ref:r,sideOffset:t,className:it("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));hl.displayName=KA.displayName;const Po=_.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(YA,{ref:r,className:it("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Po.displayName=YA.displayName;const L9=_.forwardRef(({className:e,children:t,checked:n,...r},a)=>s.jsxs(XA,{ref:a,className:it("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(QA,{children:s.jsx(Xu,{className:"h-4 w-4"})})}),t]}));L9.displayName=XA.displayName;const I9=_.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(JA,{ref:r,className:it("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(QA,{children:s.jsx(_T,{className:"h-2 w-2 fill-current"})})}),t]}));I9.displayName=JA.displayName;const M9=_.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(ZA,{ref:r,className:it("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));M9.displayName=ZA.displayName;const D9=_.forwardRef(({className:e,...t},n)=>s.jsx(eO,{ref:n,className:it("-mx-1 my-1 h-px bg-muted",e),...t}));D9.displayName=eO.displayName;var nO={exports:{}},rO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc=_;function F9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $9=typeof Object.is=="function"?Object.is:F9,B9=Gc.useState,z9=Gc.useEffect,V9=Gc.useLayoutEffect,U9=Gc.useDebugValue;function q9(e,t){var n=t(),r=B9({inst:{value:n,getSnapshot:t}}),a=r[0].inst,i=r[1];return V9(function(){a.value=n,a.getSnapshot=t,rx(a)&&i({inst:a})},[e,n,t]),z9(function(){return rx(a)&&i({inst:a}),e(function(){rx(a)&&i({inst:a})})},[e]),U9(n),n}function rx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$9(e,n)}catch{return!0}}function H9(e,t){return t()}var W9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?H9:q9;rO.useSyncExternalStore=Gc.useSyncExternalStore!==void 0?Gc.useSyncExternalStore:W9;nO.exports=rO;var G9=nO.exports;function K9(){return G9.useSyncExternalStore(Z9,()=>!0,()=>!1)}function Z9(){return()=>{}}var Iw="Avatar",[Y9,iie]=jn(Iw),[X9,aO]=Y9(Iw),iO=_.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,i]=_.useState("idle");return s.jsx(X9,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(ut.span,{...r,ref:t})})});iO.displayName=Iw;var oO="AvatarImage",lO=_.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=e,o=aO(oO,n),l=J9(r,i),d=Ps(h=>{a(h),o.onImageLoadingStatusChange(h)});return Fs(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?s.jsx(ut.img,{...i,ref:t,src:r}):null});lO.displayName=oO;var cO="AvatarFallback",dO=_.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,i=aO(cO,n),[o,l]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(ut.span,{...a,ref:t}):null});dO.displayName=cO;function Y1(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function J9(e,{referrerPolicy:t,crossOrigin:n}){const r=K9(),a=_.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=_.useState(()=>Y1(i,e));return Fs(()=>{l(Y1(i,e))},[i,e]),Fs(()=>{const d=u=>()=>{l(u)};if(!i)return;const h=d("loaded"),f=d("error");return i.addEventListener("load",h),i.addEventListener("error",f),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",h),i.removeEventListener("error",f)}},[i,n,t]),o}var uO=iO,hO=lO,fO=dO;const fi=_.forwardRef(({className:e,...t},n)=>s.jsx(uO,{ref:n,className:it("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));fi.displayName=uO.displayName;const Wr=_.forwardRef(({className:e,...t},n)=>s.jsx(hO,{ref:n,className:it("aspect-square h-full w-full",e),...t}));Wr.displayName=hO.displayName;const mi=_.forwardRef(({className:e,...t},n)=>s.jsx(fO,{ref:n,className:it("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));mi.displayName=fO.displayName;function Q9(){lt();const{navigateWithAuth:e}=vo(),[t,n]=_.useState({city:"Getting location...",area:"Please wait"}),[r,a]=_.useState([]),[i,o]=_.useState(0),{notifications:l,unreadCount:d,markAsRead:h,markAllAsRead:f}=ZP();_.useEffect(()=>{const w=async()=>{if(await Ae.isAuthenticated()){u();const x=setInterval(u,5e3);return()=>clearInterval(x)}};p(),w()},[]);const u=async()=>{var w,v;try{if(!await Ae.getToken())return;const y=await ar.getConversations(),b=Array.isArray(y)?y:(y==null?void 0:y.results)||[];r.length>0&&b.forEach(N=>{var P,T;const S=r.find(E=>E.id===N.id);S&&N.unread_count>S.unread_count&&m(`New message from ${(P=N.other_participant)==null?void 0:P.username}`,((T=N.last_message)==null?void 0:T.content)||"New message received")}),a(b);const j=b.reduce((N,S)=>N+(S.unread_count||0),0);o(j)}catch(x){(w=x.message)!=null&&w.includes("401")||(v=x.message)!=null&&v.includes("Unauthorized")?(a([]),o(0)):console.error("Failed to load conversations:",x)}},m=(w,v)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(w,{body:v,icon:"/favicon.ico"})},p=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async w=>{const{latitude:v,longitude:x}=w.coords;try{const b=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${v}&lon=${x}&addressdetails=1`)).json();if(b.address){const j=b.address.road||b.address.neighbourhood,N=b.address.neighbourhood||b.address.suburb||b.address.city||b.address.town||b.address.village||b.address.county;n({city:j||N||"Unknown City",area:`${b.address.neighbourhood||b.address.suburb||b.address.city||b.address.town||b.address.state||""}${b.address.city_district?`, ${b.address.city_district}`:""}`})}else n({city:"Location found",area:`${v.toFixed(4)}, ${x.toFixed(4)}`})}catch{n({city:"Location unavailable",area:"Service error"})}},w=>{n({city:"Location denied",area:"Enable location access"})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):n({city:"Location not supported",area:"Browser not compatible"})};return s.jsxs("div",{className:"sticky top-0 z-50 flex items-center justify-between px-3 py-1 bg-card/95 backdrop-blur-sm border-b border-border/30 min-h-[45px]",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("img",{src:hi,alt:"Ezeyway",className:"h-24 w-24 md:h-16 md:w-28 object-contain"})}),s.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer text-center",onClick:p,children:[s.jsx(es,{className:"h-3 w-3 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-foreground",children:t.city}),s.jsx("p",{className:"text-[10px] text-muted-foreground",children:t.area})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Hc,{children:[s.jsx(Wc,{asChild:!0,children:s.jsxs("button",{className:"p-1.5 hover:bg-muted rounded-lg transition-smooth relative",children:[s.jsx(Xr,{className:"h-5 w-5 text-foreground"}),i>0&&s.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-white font-bold",children:i>9?"9+":i})})]})}),s.jsxs(hl,{align:"end",className:"w-80",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Messages"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e("/messages"),className:"text-xs",children:"View all"})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No messages"}):r.slice(0,5).map(w=>{var v,x,y,b,j,N;return s.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${w.unread_count>0?"bg-blue-50/50":""}`,onClick:()=>e(`/messages?conversation=${w.id}`),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(fi,{className:"h-8 w-8",children:[s.jsx(Wr,{src:(v=w.other_participant)==null?void 0:v.profile_picture}),s.jsx(mi,{children:(y=(x=w.other_participant)==null?void 0:x.username)==null?void 0:y.charAt(0)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:(b=w.other_participant)==null?void 0:b.username}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((j=w.last_message)==null?void 0:j.content)||((N=w.last_message)==null?void 0:N.file_name)||"No messages"})]}),w.unread_count>0&&s.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-white font-bold",children:w.unread_count})})]})},w.id)})})]})]}),s.jsxs(Hc,{children:[s.jsx(Wc,{asChild:!0,children:s.jsxs("button",{className:"relative p-1.5 hover:bg-muted rounded-lg transition-smooth",children:[s.jsx(Kn,{className:"h-5 w-5 text-foreground"}),d>0&&s.jsx(Ye,{className:"absolute -top-0.5 -right-0.5 h-4 w-4 rounded-full p-0 text-[10px] flex items-center justify-center min-w-[16px] bg-destructive text-destructive-foreground",children:d>9?"9+":d})]})}),s.jsxs(hl,{align:"end",className:"w-80",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Notifications"}),s.jsxs("div",{className:"flex gap-2",children:[d>0&&s.jsx(te,{variant:"ghost",size:"sm",onClick:f,className:"text-xs",children:"Mark all read"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e("/notifications"),className:"text-xs",children:"View all"})]})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:l.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):l.slice(0,5).map(w=>s.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${w.read?"":"bg-blue-50/50"}`,onClick:()=>{h(w.id),w.action_url&&e(w.action_url)},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${w.read?"bg-transparent":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-medium ${w.read?"text-gray-700":"text-gray-900"}`,children:w.title}),s.jsx("p",{className:`text-sm ${w.read?"text-gray-600":"text-gray-700"}`,children:w.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(w.created_at).toLocaleString()})]}),s.jsx(Ye,{variant:"outline",className:`text-xs ${w.type==="order"?"border-green-200 text-green-700":w.type==="payment"?"border-blue-200 text-blue-700":w.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:w.type})]})},w.id))})]})]})]})]})}const eU=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3};function tU(){const[e,t]=_.useState(""),[n,r]=_.useState([]),[a,i]=_.useState(!1),[o,l]=_.useState(!1),d=lt();ns();const h=_.useRef(null),f=_.useRef(null);_.useEffect(()=>{const y=b=>{h.current&&!h.current.contains(b.target)&&f.current&&!f.current.contains(b.target)&&i(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),_.useEffect(()=>{e.trim().length>1?u(e.trim()):(r([]),i(!1))},[e]);const u=async y=>{l(!0);try{const b=await Ae.getToken(),j=b?{Authorization:`Token ${b}`}:{},N=ht.getLocation(),S=new URLSearchParams({search:y,page_size:"5"});N&&(S.append("latitude",N.latitude.toString()),S.append("longitude",N.longitude.toString()));const T=await(await fetch(`${Qe}search/products/?${S}`,{headers:j})).json(),E=m(T.results||[]);r(E),i(!0)}catch(b){console.error("Search error:",b)}finally{l(!1)}},m=y=>{const b=ht.getLocation();return y.map(j=>{var P,T;const N=((P=j.images)==null?void 0:P.find(E=>E.is_primary))||((T=j.images)==null?void 0:T[0]);let S="N/A";return b&&j.vendor_latitude&&j.vendor_longitude&&(S=`${eU(b.latitude,b.longitude,j.vendor_latitude,j.vendor_longitude).toFixed(1)} km`),{id:j.id,name:j.name,vendor:j.vendor_name||"Unknown Vendor",price:`${j.price}`,image:(N==null?void 0:N.image_url)||"/placeholder-product.jpg",distance:S,category:j.category}})},p=y=>{y.preventDefault(),e.trim()&&(d(`/search?q=${encodeURIComponent(e.trim())}`),i(!1))},w=y=>{t(y.target.value)},v=y=>{d(`/product/${y}`),i(!1),t("")},x=()=>{e.trim()&&(d(`/search?q=${encodeURIComponent(e.trim())}`),i(!1))};return s.jsxs("div",{className:"px-3 py-2 bg-background relative",children:[s.jsx("form",{onSubmit:p,className:"flex gap-2",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Yo,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx("input",{ref:f,type:"text",placeholder:"Search products, vendors...",value:e,onChange:w,className:"w-full pl-9 pr-3 py-2.5 bg-muted/50 border border-border/50 rounded-lg text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth"})]})}),a&&s.jsx("div",{ref:h,className:"absolute top-full left-3 right-3 mt-1 bg-white border border-border rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",children:o?s.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Searching..."}):n.length>0?s.jsxs(s.Fragment,{children:[n.map(y=>s.jsxs("div",{onClick:()=>v(y.id),className:"flex items-center gap-3 p-3 hover:bg-muted/50 cursor-pointer border-b border-border/50 last:border-b-0",children:[s.jsx("img",{src:y.image,alt:y.name,className:"w-10 h-10 object-cover rounded",onError:b=>{b.target.src="/placeholder-product.jpg"}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-sm truncate",children:y.name}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.vendor}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"text-xs font-medium text-primary",children:y.price}),s.jsx("span",{className:"text-xs text-muted-foreground",children:y.distance})]})]})]},y.id)),s.jsx("div",{className:"p-3 border-t border-border",children:s.jsxs("button",{onClick:x,className:"w-full text-center text-sm text-primary hover:text-primary/80 font-medium",children:['View all results for "',e,'"']})})]}):e.trim().length>1?s.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:['No results found for "',e,'"']}):null})]})}const X1={Electronics:"",Fashion:"",Food:"",Home:"",Books:"",Sports:"",Beauty:"",Toys:"",Jewelry:"",Furniture:"",Automotive:"",Health:"","Pet Supplies":"",Stationery:"",Garden:"",Kids:"",Appliances:"",Hardware:"",Crafts:"",Travel:"",Grocery:"",Vegetables:"",Fruits:"",Dairy:"",Meat:"",Bakery:"",Beverages:"",Snacks:"",Organic:""};function sU(){const[e,t]=_.useState([]),[n,r]=_.useState(!0),a=lt(),i=Qe.replace(/\/api\/?$/i,"");return _.useEffect(()=>{(async()=>{try{const l=await fetch(Qe+"categories/");if(!l.ok)throw new Error(`HTTP ${l.status}`);const d=await l.json();if(d.categories){const h=d.categories.map((f,u)=>{const m=f.icon||f.icon_url||"",p=m&&m.startsWith("/")?`${i}${m}`:m;return{id:f.id||u+1,name:f.name,icon:p||X1[f.name]||"",hasImage:!!m}});t(h)}else t([])}catch(l){console.error("Error fetching categories:",l),t([])}finally{r(!1)}})()},[]),n?s.jsx("div",{className:"px-2 py-2 bg-gray-50",children:s.jsx("div",{className:"flex gap-3 overflow-x-auto",children:[...Array(6)].map((o,l)=>s.jsx("div",{className:"flex-none w-16",children:s.jsxs("div",{className:"w-full p-1 rounded-xl bg-gray-200 animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-300 rounded mb-1"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded"})]})},l))})}):e.length===0?s.jsx("div",{className:"px-2 py-2 bg-gray-50",children:s.jsx("div",{className:"text-center text-gray-500 text-sm py-4",children:"No categories available"})}):s.jsx("div",{className:"px-2 py-2 bg-gray-50",children:s.jsx("div",{className:"flex gap-3 overflow-x-auto overflow-y-hidden pb-2",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:e.map(o=>s.jsxs("button",{className:"flex-none px-3 py-1 rounded-xl font-medium text-center transition-all duration-200 bg-white text-gray-800 hover:bg-gray-100 active:scale-95 focus:outline-none min-w-16 touch-manipulation",onClick:()=>a(`/category/${encodeURIComponent(o.name)}`),children:[s.jsxs("div",{className:"mb-1 flex items-center justify-center h-8",children:[o.hasImage?s.jsx("img",{src:o.icon,alt:o.name,className:"w-8 h-8 object-contain",onError:l=>{const d=l.target;if(d){d.style.display="none";const h=d.nextSibling;h&&(h.style.display="block")}}}):s.jsx("div",{className:"text-2xl",children:o.icon}),o.hasImage&&s.jsx("div",{className:"text-2xl",style:{display:"none"},children:X1[o.name]||""})]}),s.jsx("div",{className:"text-xs font-semibold whitespace-nowrap",children:o.name})]},o.id))})})}const nU="/assets/banner-grocery.jpg",rU="/assets/banner-electronics.jpg",aU="/assets/banner-food.jpg",iU=[{id:1,image:nU,title:"Fresh Groceries",subtitle:"Same day delivery"},{id:2,image:rU,title:"Electronics & Gadgets",subtitle:"Best prices guaranteed"},{id:3,image:aU,title:"Traditional Food",subtitle:"Authentic Nepali cuisine"}];function oU(){const[e,t]=_.useState(1),[n,r]=_.useState(!1),[a,i]=_.useState(0),[o,l]=_.useState(0),[d,h]=_.useState([]),[f,u]=_.useState(!0),[m,p]=_.useState(!0),w=_.useRef(null),v=d.length>0?d.map(P=>({id:P.id,image:P.image_url,title:P.title,subtitle:P.description||"",link_url:P.link_url})):iU,x=v.length>0?[v[v.length-1],...v,v[0]]:[],y=P=>{r(!0),i(P.touches[0].clientX),l(P.touches[0].clientX)},b=P=>{n&&l(P.touches[0].clientX)},j=()=>{if(!n)return;const P=a-o;Math.abs(P)>50&&(P>0&&e<v.length?t(E=>E+1):P<0&&e>1&&t(E=>E-1)),r(!1),l(0)},N=P=>{P.link_url&&window.open(P.link_url,"_blank")};_.useEffect(()=>{if(v.length>0){const P=setInterval(()=>{t(T=>T+1)},4e3);return()=>clearInterval(P)}},[v.length]),_.useEffect(()=>{v.length>0&&(e===x.length-1?setTimeout(()=>{p(!1),t(1),setTimeout(()=>p(!0),50)},500):e===0&&setTimeout(()=>{p(!1),t(v.length),setTimeout(()=>p(!0),50)},500))},[e,v.length]),_.useEffect(()=>{(async()=>{try{const{API_BASE:T}=await Ue(async()=>{const{API_BASE:C}=await Promise.resolve().then(()=>Kz);return{API_BASE:C}},void 0);let E="customer";window.location.pathname.startsWith("/vendor")&&(E="vendor"),console.log(` Fetching banners for user type: ${E}`);const O=await fetch(`${T}sliders/?user_type=${E}`),R=await O.json();if(console.log(" BannerCarousel API Response:",R),O.ok&&R&&R.sliders){console.log(" All sliders from API:",R.sliders),console.log(" Current userType:",E);const C=R.sliders.filter(D=>{const A=D.visibility||"both",M=A===E||A==="both";return console.log(` Slider "${D.title}": visibility="${A}", userType="${E}", shouldShow=${M}`),M});console.log(` BEFORE filtering: ${R.sliders.length} sliders`),console.log(` AFTER filtering: ${C.length} sliders for userType="${E}"`),console.log(" Filtered sliders:",C),h(C),C.length>0&&t(1)}else console.log(" No sliders data or API error"),h([])}catch(T){console.error("Error fetching sliders:",T),h([])}finally{u(!1)}})()},[]);const S=()=>{var T;if(window.innerWidth<768){if(n){const E=o-a,I=100,O=E/(((T=w.current)==null?void 0:T.offsetWidth)||1)*100,R=Math.max(-I,Math.min(I,O));return`translateX(calc(-${e*100}% + ${R}px))`}return`translateX(-${e*100}%)`}else return`translateX(calc(-${e*50}% + 25%))`};return f?s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"relative overflow-hidden rounded-2xl shadow-brand h-48 bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[s.jsx(As,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Loading banners..."})]})})}):s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative md:overflow-visible overflow-hidden md:px-8",children:[s.jsx("div",{ref:w,className:`flex ${m?"transition-transform duration-500 ease-in-out":""}`,style:{transform:S()},onTouchStart:y,onTouchMove:b,onTouchEnd:j,children:(x.length>0?x:v).map((P,T)=>{const E=window.innerWidth<768,I=!E&&T===e;return s.jsx("div",{className:`flex-shrink-0 relative cursor-pointer transition-all duration-300 ${E?"w-full rounded-2xl shadow-brand overflow-hidden":`${I?"scale-100 opacity-100 z-10":"scale-75 opacity-60 z-0"} rounded-lg overflow-hidden`}`,style:E?{}:{width:"50%"},onClick:()=>N(P),children:s.jsx("img",{src:P.image,alt:P.title,className:"w-full h-48 md:h-auto md:max-h-64 object-cover md:object-contain",onError:O=>{O.target.style.display="none",O.target.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}})},`${P.id}-${T}`)})}),v.length>1&&s.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-1",children:v.map((P,T)=>s.jsx("button",{onClick:()=>t(T+1),className:`w-2 h-2 rounded-full transition-colors ${T===(e-1+v.length)%v.length?"bg-blue-500":"bg-gray-300"}`},T))})]})})}const Mw=_.createContext({});function Dw(e){const t=_.useRef(null);return t.current===null&&(t.current=e()),t.current}const Fw=typeof window<"u",mO=Fw?_.useLayoutEffect:_.useEffect,hg=_.createContext(null);function $w(e,t){e.indexOf(t)===-1&&e.push(t)}function Bw(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const pi=(e,t,n)=>n>t?t:n<e?e:n;let Gm=()=>{};const gi={},pO=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function gO(e){return typeof e=="object"&&e!==null}const vO=e=>/^0[^.\s]+$/u.test(e);function zw(e){let t;return()=>(t===void 0&&(t=e()),t)}const Sr=e=>e,lU=(e,t)=>n=>t(e(n)),Lh=(...e)=>e.reduce(lU),lh=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Vw{constructor(){this.subscriptions=[]}add(t){return $w(this.subscriptions,t),()=>Bw(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ea=e=>e*1e3,Ta=e=>e/1e3;function xO(e,t){return t?e*(1e3/t):0}const yO=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,cU=1e-7,dU=12;function uU(e,t,n,r,a){let i,o,l=0;do o=t+(n-t)/2,i=yO(o,r,a)-e,i>0?n=o:t=o;while(Math.abs(i)>cU&&++l<dU);return o}function Ih(e,t,n,r){if(e===t&&n===r)return Sr;const a=i=>uU(i,0,1,e,n);return i=>i===0||i===1?i:yO(a(i),t,r)}const bO=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,wO=e=>t=>1-e(1-t),_O=Ih(.33,1.53,.69,.99),Uw=wO(_O),jO=bO(Uw),NO=e=>(e*=2)<1?.5*Uw(e):.5*(2-Math.pow(2,-10*(e-1))),qw=e=>1-Math.sin(Math.acos(e)),SO=wO(qw),kO=bO(qw),hU=Ih(.42,0,1,1),fU=Ih(0,0,.58,1),CO=Ih(.42,0,.58,1),mU=e=>Array.isArray(e)&&typeof e[0]!="number",EO=e=>Array.isArray(e)&&typeof e[0]=="number",J1={linear:Sr,easeIn:hU,easeInOut:CO,easeOut:fU,circIn:qw,circInOut:kO,circOut:SO,backIn:Uw,backInOut:jO,backOut:_O,anticipate:NO},pU=e=>typeof e=="string",Q1=e=>{if(EO(e)){Gm(e.length===4);const[t,n,r,a]=e;return Ih(t,n,r,a)}else if(pU(e))return Gm(J1[e]!==void 0),J1[e];return e},Of=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],eS={value:null,addProjectionMetrics:null};function gU(e,t){let n=new Set,r=new Set,a=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},d=0;function h(u){o.has(u)&&(f.schedule(u),e()),d++,u(l)}const f={schedule:(u,m=!1,p=!1)=>{const v=p&&a?n:r;return m&&o.add(u),v.has(u)||v.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(l=u,a){i=!0;return}a=!0,[n,r]=[r,n],n.forEach(h),t&&eS.value&&eS.value.frameloop[t].push(d),d=0,n.clear(),a=!1,i&&(i=!1,f.process(u))}};return f}const vU=40;function TO(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Of.reduce((j,N)=>(j[N]=gU(i,t?N:void 0),j),{}),{setup:l,read:d,resolveKeyframes:h,preUpdate:f,update:u,preRender:m,render:p,postRender:w}=o,v=()=>{const j=gi.useManualTiming?a.timestamp:performance.now();n=!1,gi.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(j-a.timestamp,vU),1)),a.timestamp=j,a.isProcessing=!0,l.process(a),d.process(a),h.process(a),f.process(a),u.process(a),m.process(a),p.process(a),w.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(v))},x=()=>{n=!0,r=!0,a.isProcessing||e(v)};return{schedule:Of.reduce((j,N)=>{const S=o[N];return j[N]=(P,T=!1,E=!1)=>(n||x(),S.schedule(P,T,E)),j},{}),cancel:j=>{for(let N=0;N<Of.length;N++)o[Of[N]].cancel(j)},state:a,steps:o}}const{schedule:xs,cancel:oo,state:dn,steps:ax}=TO(typeof requestAnimationFrame<"u"?requestAnimationFrame:Sr,!0);let nm;function xU(){nm=void 0}const Zn={now:()=>(nm===void 0&&Zn.set(dn.isProcessing||gi.useManualTiming?dn.timestamp:performance.now()),nm),set:e=>{nm=e,queueMicrotask(xU)}},PO=e=>t=>typeof t=="string"&&t.startsWith(e),Hw=PO("--"),yU=PO("var(--"),Ww=e=>yU(e)?bU.test(e.split("/*")[0].trim()):!1,bU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,pd={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ch={...pd,transform:e=>pi(0,1,e)},Rf={...pd,default:1},Su=e=>Math.round(e*1e5)/1e5,Gw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function wU(e){return e==null}const _U=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Kw=(e,t)=>n=>!!(typeof n=="string"&&_U.test(n)&&n.startsWith(e)||t&&!wU(n)&&Object.prototype.hasOwnProperty.call(n,t)),AO=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,i,o,l]=r.match(Gw);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},jU=e=>pi(0,255,e),ix={...pd,transform:e=>Math.round(jU(e))},Fo={test:Kw("rgb","red"),parse:AO("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+ix.transform(e)+", "+ix.transform(t)+", "+ix.transform(n)+", "+Su(ch.transform(r))+")"};function NU(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Vy={test:Kw("#"),parse:NU,transform:Fo.transform},Mh=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ai=Mh("deg"),Pa=Mh("%"),xt=Mh("px"),SU=Mh("vh"),kU=Mh("vw"),tS={...Pa,parse:e=>Pa.parse(e)/100,transform:e=>Pa.transform(e*100)},ec={test:Kw("hsl","hue"),parse:AO("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Pa.transform(Su(t))+", "+Pa.transform(Su(n))+", "+Su(ch.transform(r))+")"},Vs={test:e=>Fo.test(e)||Vy.test(e)||ec.test(e),parse:e=>Fo.test(e)?Fo.parse(e):ec.test(e)?ec.parse(e):Vy.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Fo.transform(e):ec.transform(e),getAnimatableNone:e=>{const t=Vs.parse(e);return t.alpha=0,Vs.transform(t)}},CU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EU(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Gw))==null?void 0:t.length)||0)+(((n=e.match(CU))==null?void 0:n.length)||0)>0}const OO="number",RO="color",TU="var",PU="var(",sS="${}",AU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function dh(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace(AU,d=>(Vs.test(d)?(r.color.push(i),a.push(RO),n.push(Vs.parse(d))):d.startsWith(PU)?(r.var.push(i),a.push(TU),n.push(d)):(r.number.push(i),a.push(OO),n.push(parseFloat(d))),++i,sS)).split(sS);return{values:n,split:l,indexes:r,types:a}}function LO(e){return dh(e).values}function IO(e){const{split:t,types:n}=dh(e),r=t.length;return a=>{let i="";for(let o=0;o<r;o++)if(i+=t[o],a[o]!==void 0){const l=n[o];l===OO?i+=Su(a[o]):l===RO?i+=Vs.transform(a[o]):i+=a[o]}return i}}const OU=e=>typeof e=="number"?0:Vs.test(e)?Vs.getAnimatableNone(e):e;function RU(e){const t=LO(e);return IO(e)(t.map(OU))}const lo={test:EU,parse:LO,createTransformer:IO,getAnimatableNone:RU};function ox(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function LU({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,i=0,o=0;if(!t)a=i=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,d=2*n-l;a=ox(d,l,e+1/3),i=ox(d,l,e),o=ox(d,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function Km(e,t){return n=>n>0?t:e}const _s=(e,t,n)=>e+(t-e)*n,lx=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},IU=[Vy,Fo,ec],MU=e=>IU.find(t=>t.test(e));function nS(e){const t=MU(e);if(!t)return!1;let n=t.parse(e);return t===ec&&(n=LU(n)),n}const rS=(e,t)=>{const n=nS(e),r=nS(t);if(!n||!r)return Km(e,t);const a={...n};return i=>(a.red=lx(n.red,r.red,i),a.green=lx(n.green,r.green,i),a.blue=lx(n.blue,r.blue,i),a.alpha=_s(n.alpha,r.alpha,i),Fo.transform(a))},Uy=new Set(["none","hidden"]);function DU(e,t){return Uy.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function FU(e,t){return n=>_s(e,t,n)}function Zw(e){return typeof e=="number"?FU:typeof e=="string"?Ww(e)?Km:Vs.test(e)?rS:zU:Array.isArray(e)?MO:typeof e=="object"?Vs.test(e)?rS:$U:Km}function MO(e,t){const n=[...e],r=n.length,a=e.map((i,o)=>Zw(i)(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=a[o](i);return n}}function $U(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=Zw(e[a])(e[a],t[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function BU(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][r[i]],l=e.values[o]??0;n[a]=l,r[i]++}return n}const zU=(e,t)=>{const n=lo.createTransformer(t),r=dh(e),a=dh(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?Uy.has(e)&&!a.values.length||Uy.has(t)&&!r.values.length?DU(e,t):Lh(MO(BU(r,a),a.values),n):Km(e,t)};function DO(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?_s(e,t,n):Zw(e)(e,t)}const VU=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>xs.update(t,n),stop:()=>oo(t),now:()=>dn.isProcessing?dn.timestamp:Zn.now()}},FO=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=Math.round(e(i/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Zm=2e4;function Yw(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Zm;)t+=n,r=e.next(t);return t>=Zm?1/0:t}function UU(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(Yw(r),Zm);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:Ta(a)}}const qU=5;function $O(e,t,n){const r=Math.max(t-qU,0);return xO(n-e(r),t-r)}const Cs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cx=.001;function HU({duration:e=Cs.duration,bounce:t=Cs.bounce,velocity:n=Cs.velocity,mass:r=Cs.mass}){let a,i,o=1-t;o=pi(Cs.minDamping,Cs.maxDamping,o),e=pi(Cs.minDuration,Cs.maxDuration,Ta(e)),o<1?(a=h=>{const f=h*o,u=f*e,m=f-n,p=qy(h,o),w=Math.exp(-u);return cx-m/p*w},i=h=>{const u=h*o*e,m=u*n+n,p=Math.pow(o,2)*Math.pow(h,2)*e,w=Math.exp(-u),v=qy(Math.pow(h,2),o);return(-a(h)+cx>0?-1:1)*((m-p)*w)/v}):(a=h=>{const f=Math.exp(-h*e),u=(h-n)*e+1;return-cx+f*u},i=h=>{const f=Math.exp(-h*e),u=(n-h)*(e*e);return f*u});const l=5/e,d=GU(a,i,l);if(e=Ea(e),isNaN(d))return{stiffness:Cs.stiffness,damping:Cs.damping,duration:e};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:e}}}const WU=12;function GU(e,t,n){let r=n;for(let a=1;a<WU;a++)r=r-e(r)/t(r);return r}function qy(e,t){return e*Math.sqrt(1-t*t)}const KU=["duration","bounce"],ZU=["stiffness","damping","mass"];function aS(e,t){return t.some(n=>e[n]!==void 0)}function YU(e){let t={velocity:Cs.velocity,stiffness:Cs.stiffness,damping:Cs.damping,mass:Cs.mass,isResolvedFromDuration:!1,...e};if(!aS(e,ZU)&&aS(e,KU))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*pi(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Cs.mass,stiffness:a,damping:i}}else{const n=HU(e);t={...t,...n,mass:Cs.mass},t.isResolvedFromDuration=!0}return t}function Ym(e=Cs.visualDuration,t=Cs.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:d,damping:h,mass:f,duration:u,velocity:m,isResolvedFromDuration:p}=YU({...n,velocity:-Ta(n.velocity||0)}),w=m||0,v=h/(2*Math.sqrt(d*f)),x=o-i,y=Ta(Math.sqrt(d/f)),b=Math.abs(x)<5;r||(r=b?Cs.restSpeed.granular:Cs.restSpeed.default),a||(a=b?Cs.restDelta.granular:Cs.restDelta.default);let j;if(v<1){const S=qy(y,v);j=P=>{const T=Math.exp(-v*y*P);return o-T*((w+v*y*x)/S*Math.sin(S*P)+x*Math.cos(S*P))}}else if(v===1)j=S=>o-Math.exp(-y*S)*(x+(w+y*x)*S);else{const S=y*Math.sqrt(v*v-1);j=P=>{const T=Math.exp(-v*y*P),E=Math.min(S*P,300);return o-T*((w+v*y*x)*Math.sinh(E)+S*x*Math.cosh(E))/S}}const N={calculatedDuration:p&&u||null,next:S=>{const P=j(S);if(p)l.done=S>=u;else{let T=S===0?w:0;v<1&&(T=S===0?Ea(w):$O(j,S,P));const E=Math.abs(T)<=r,I=Math.abs(o-P)<=a;l.done=E&&I}return l.value=l.done?o:P,l},toString:()=>{const S=Math.min(Yw(N),Zm),P=FO(T=>N.next(S*T).value,S,30);return S+"ms "+P},toTransition:()=>{}};return N}Ym.applyToOptions=e=>{const t=UU(e,100,Ym);return e.ease=t.ease,e.duration=Ea(t.duration),e.type="keyframes",e};function Hy({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:d,restDelta:h=.5,restSpeed:f}){const u=e[0],m={done:!1,value:u},p=E=>l!==void 0&&E<l||d!==void 0&&E>d,w=E=>l===void 0?d:d===void 0||Math.abs(l-E)<Math.abs(d-E)?l:d;let v=n*t;const x=u+v,y=o===void 0?x:o(x);y!==x&&(v=y-u);const b=E=>-v*Math.exp(-E/r),j=E=>y+b(E),N=E=>{const I=b(E),O=j(E);m.done=Math.abs(I)<=h,m.value=m.done?y:O};let S,P;const T=E=>{p(m.value)&&(S=E,P=Ym({keyframes:[m.value,w(m.value)],velocity:$O(j,E,m.value),damping:a,stiffness:i,restDelta:h,restSpeed:f}))};return T(0),{calculatedDuration:null,next:E=>{let I=!1;return!P&&S===void 0&&(I=!0,N(E),T(E)),S!==void 0&&E>=S?P.next(E-S):(!I&&N(E),m)}}}function XU(e,t,n){const r=[],a=n||gi.mix||DO,i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const d=Array.isArray(t)?t[o]||Sr:t;l=Lh(d,l)}r.push(l)}return r}function JU(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(Gm(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=XU(t,r,a),d=l.length,h=f=>{if(o&&f<e[0])return t[0];let u=0;if(d>1)for(;u<e.length-2&&!(f<e[u+1]);u++);const m=lh(e[u],e[u+1],f);return l[u](m)};return n?f=>h(pi(e[0],e[i-1],f)):h}function QU(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=lh(0,t,r);e.push(_s(n,1,a))}}function eq(e){const t=[0];return QU(t,e.length-1),t}function tq(e,t){return e.map(n=>n*t)}function sq(e,t){return e.map(()=>t||CO).splice(0,e.length-1)}function ku({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=mU(r)?r.map(Q1):Q1(r),i={done:!1,value:t[0]},o=tq(n&&n.length===t.length?n:eq(t),e),l=JU(o,t,{ease:Array.isArray(a)?a:sq(t,a)});return{calculatedDuration:e,next:d=>(i.value=l(d),i.done=d>=e,i)}}const nq=e=>e!==null;function Xw(e,{repeat:t,repeatType:n="loop"},r,a=1){const i=e.filter(nq),l=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const rq={decay:Hy,inertia:Hy,tween:ku,keyframes:ku,spring:Ym};function BO(e){typeof e.type=="string"&&(e.type=rq[e.type])}class Jw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const aq=e=>e/100;class Qw extends Jw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:n}=this.options;n&&n.updatedAt!==Zn.now()&&this.tick(Zn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;BO(t);const{type:n=ku,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const d=n||ku;d!==ku&&typeof l[0]!="number"&&(this.mixKeyframes=Lh(aq,DO(l[0],l[1])),l=[0,100]);const h=d({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...l].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=Yw(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=h}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:f,repeat:u,repeatType:m,repeatDelay:p,type:w,onUpdate:v,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const y=this.currentTime-h*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?y<0:y>a;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let j=this.currentTime,N=r;if(u){const E=Math.min(this.currentTime,a)/l;let I=Math.floor(E),O=E%1;!O&&E>=1&&(O=1),O===1&&I--,I=Math.min(I,u+1),!!(I%2)&&(m==="reverse"?(O=1-O,p&&(O-=p/l)):m==="mirror"&&(N=o)),j=pi(0,1,O)*l}const S=b?{done:!1,value:f[0]}:N.next(j);i&&(S.value=i(S.value));let{done:P}=S;!b&&d!==null&&(P=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return T&&w!==Hy&&(S.value=Xw(f,this.options,x,this.speed)),v&&v(S.value),T&&this.finish(),S}then(t,n){return this.finished.then(t,n)}get duration(){return Ta(this.calculatedDuration)}get time(){return Ta(this.currentTime)}set time(t){var n;t=Ea(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Zn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ta(this.currentTime))}play(){var a,i;if(this.isStopped)return;const{driver:t=VU,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(i=(a=this.options).onPlay)==null||i.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function iq(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const $o=e=>e*180/Math.PI,Wy=e=>{const t=$o(Math.atan2(e[1],e[0]));return Gy(t)},oq={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Wy,rotateZ:Wy,skewX:e=>$o(Math.atan(e[1])),skewY:e=>$o(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Gy=e=>(e=e%360,e<0&&(e+=360),e),iS=Wy,oS=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),lS=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),lq={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:oS,scaleY:lS,scale:e=>(oS(e)+lS(e))/2,rotateX:e=>Gy($o(Math.atan2(e[6],e[5]))),rotateY:e=>Gy($o(Math.atan2(-e[2],e[0]))),rotateZ:iS,rotate:iS,skewX:e=>$o(Math.atan(e[4])),skewY:e=>$o(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Ky(e){return e.includes("scale")?1:0}function Zy(e,t){if(!e||e==="none")return Ky(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=lq,a=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=oq,a=l}if(!a)return Ky(t);const i=r[t],o=a[1].split(",").map(dq);return typeof i=="function"?i(o):o[i]}const cq=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Zy(n,t)};function dq(e){return parseFloat(e.trim())}const gd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vd=new Set(gd),cS=e=>e===pd||e===xt,uq=new Set(["x","y","z"]),hq=gd.filter(e=>!uq.has(e));function fq(e){const t=[];return hq.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Qo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Zy(t,"x"),y:(e,{transform:t})=>Zy(t,"y")};Qo.translateX=Qo.x;Qo.translateY=Qo.y;const el=new Set;let Yy=!1,Xy=!1,Jy=!1;function zO(){if(Xy){const e=Array.from(el).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=fq(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,o])=>{var l;(l=r.getValue(i))==null||l.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Xy=!1,Yy=!1,el.forEach(e=>e.complete(Jy)),el.clear()}function VO(){el.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Xy=!0)})}function mq(){Jy=!0,VO(),zO(),Jy=!1}class e_{constructor(t,n,r,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(el.add(this),Yy||(Yy=!0,xs.read(VO),xs.resolveKeyframes(zO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const i=a==null?void 0:a.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),a&&i===void 0&&a.set(t[0])}iq(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),el.delete(this)}cancel(){this.state==="scheduled"&&(el.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const pq=e=>e.startsWith("--");function gq(e,t,n){pq(t)?e.style.setProperty(t,n):e.style[t]=n}const vq=zw(()=>window.ScrollTimeline!==void 0),xq={};function yq(e,t){const n=zw(e);return()=>xq[t]??n()}const UO=yq(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cu=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,dS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cu([0,.65,.55,1]),circOut:cu([.55,0,1,.45]),backIn:cu([.31,.01,.66,-.59]),backOut:cu([.33,1.53,.69,.99])};function qO(e,t){if(e)return typeof e=="function"?UO()?FO(e,t):"ease-out":EO(e)?cu(e):Array.isArray(e)?e.map(n=>qO(n,t)||dS.easeOut):dS[e]}function bq(e,t,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:d}={},h=void 0){const f={[t]:n};d&&(f.offset=d);const u=qO(l,a);Array.isArray(u)&&(f.easing=u);const m={delay:r,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),e.animate(f,m)}function HO(e){return typeof e=="function"&&"applyToOptions"in e}function wq({type:e,...t}){return HO(e)&&UO()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class _q extends Jw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:d}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,Gm(typeof t.type!="string");const h=wq(t);this.animation=bq(n,r,a,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const f=Xw(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(f):gq(n,r,f),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ta(Number(t))}get time(){return Ta(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ea(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&vq()?(this.animation.timeline=t,Sr):n(this)}}const WO={anticipate:NO,backInOut:jO,circInOut:kO};function jq(e){return e in WO}function Nq(e){typeof e.ease=="string"&&jq(e.ease)&&(e.ease=WO[e.ease])}const uS=10;class Sq extends _q{constructor(t){Nq(t),BO(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:i,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new Qw({...o,autoplay:!1}),d=Ea(this.finishedTime??this.time);n.setWithVelocity(l.sample(d-uS).value,l.sample(d).value,uS),l.stop()}}const hS=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(lo.test(e)||e==="0")&&!e.startsWith("url("));function kq(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Cq(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=hS(a,t),l=hS(i,t);return!o||!l?!1:kq(e)||(n==="spring"||HO(n))&&r}function Qy(e){e.duration=0,e.type}const Eq=new Set(["opacity","clipPath","filter","transform"]),Tq=zw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Pq(e){var f;const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:i,type:o}=e;if(!(((f=t==null?void 0:t.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=t.owner.getProps();return Tq()&&n&&Eq.has(n)&&(n!=="transform"||!h)&&!d&&!r&&a!=="mirror"&&i!==0&&o!=="inertia"}const Aq=40;class Oq extends Jw{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:d,motionValue:h,element:f,...u}){var w;super(),this.stop=()=>{var v,x;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Zn.now();const m={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:o,name:d,motionValue:h,element:f,...u},p=(f==null?void 0:f.KeyframeResolver)||e_;this.keyframeResolver=new p(l,(v,x,y)=>this.onKeyframesResolved(v,x,m,!y),d,h,f),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:d,isHandoff:h,onUpdate:f}=r;this.resolvedAt=Zn.now(),Cq(t,i,o,l)||((gi.instantAnimations||!d)&&(f==null||f(Xw(t,r,n))),t[0]=t[t.length-1],Qy(r),r.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>Aq?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!h&&Pq(m)?new Sq({...m,element:m.motionValue.owner.current}):new Qw(m);p.finished.then(()=>this.notifyFinished()).catch(Sr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),mq()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Rq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Lq(e){const t=Rq.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function GO(e,t,n=1){const[r,a]=Lq(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return pO(o)?parseFloat(o):o}return Ww(a)?GO(a,t,n+1):a}function t_(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const KO=new Set(["width","height","top","left","right","bottom",...gd]),Iq={test:e=>e==="auto",parse:e=>e},ZO=e=>t=>t.test(e),YO=[pd,xt,Pa,Ai,kU,SU,Iq],fS=e=>YO.find(ZO(e));function Mq(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||vO(e):!0}const Dq=new Set(["brightness","contrast","saturate","opacity"]);function Fq(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Gw)||[];if(!r)return e;const a=n.replace(r,"");let i=Dq.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const $q=/\b([a-z-]*)\(.*?\)/gu,e0={...lo,getAnimatableNone:e=>{const t=e.match($q);return t?t.map(Fq).join(" "):e}},mS={...pd,transform:Math.round},Bq={rotate:Ai,rotateX:Ai,rotateY:Ai,rotateZ:Ai,scale:Rf,scaleX:Rf,scaleY:Rf,scaleZ:Rf,skew:Ai,skewX:Ai,skewY:Ai,distance:xt,translateX:xt,translateY:xt,translateZ:xt,x:xt,y:xt,z:xt,perspective:xt,transformPerspective:xt,opacity:ch,originX:tS,originY:tS,originZ:xt},s_={borderWidth:xt,borderTopWidth:xt,borderRightWidth:xt,borderBottomWidth:xt,borderLeftWidth:xt,borderRadius:xt,radius:xt,borderTopLeftRadius:xt,borderTopRightRadius:xt,borderBottomRightRadius:xt,borderBottomLeftRadius:xt,width:xt,maxWidth:xt,height:xt,maxHeight:xt,top:xt,right:xt,bottom:xt,left:xt,padding:xt,paddingTop:xt,paddingRight:xt,paddingBottom:xt,paddingLeft:xt,margin:xt,marginTop:xt,marginRight:xt,marginBottom:xt,marginLeft:xt,backgroundPositionX:xt,backgroundPositionY:xt,...Bq,zIndex:mS,fillOpacity:ch,strokeOpacity:ch,numOctaves:mS},zq={...s_,color:Vs,backgroundColor:Vs,outlineColor:Vs,fill:Vs,stroke:Vs,borderColor:Vs,borderTopColor:Vs,borderRightColor:Vs,borderBottomColor:Vs,borderLeftColor:Vs,filter:e0,WebkitFilter:e0},XO=e=>zq[e];function JO(e,t){let n=XO(e);return n!==e0&&(n=lo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Vq=new Set(["auto","none","0"]);function Uq(e,t,n){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!Vq.has(i)&&dh(i).values.length&&(a=e[r]),r++}if(a&&n)for(const i of t)e[i]=JO(n,a)}class qq extends e_{constructor(t,n,r,a,i){super(t,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let h=t[d];if(typeof h=="string"&&(h=h.trim(),Ww(h))){const f=GO(h,n.current);f!==void 0&&(t[d]=f),d===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!KO.has(r)||t.length!==2)return;const[a,i]=t,o=fS(a),l=fS(i);if(o!==l)if(cS(o)&&cS(l))for(let d=0;d<t.length;d++){const h=t[d];typeof h=="string"&&(t[d]=parseFloat(h))}else Qo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||Mq(t[a]))&&r.push(a);r.length&&Uq(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Qo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Qo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([d,h])=>{t.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function Hq(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const a=document.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const QO=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function eR(e){return gO(e)&&"offsetHeight"in e}const pS=30,Wq=e=>!isNaN(parseFloat(e));class Gq{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const a=Zn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Zn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Wq(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Vw);const r=this.events[t].add(n);return t==="change"?()=>{r(),xs.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Zn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>pS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,pS);return xO(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kc(e,t){return new Gq(e,t)}const{schedule:n_,cancel:oie}=TO(queueMicrotask,!1),Ir={x:!1,y:!1};function tR(){return Ir.x||Ir.y}function Kq(e){return e==="x"||e==="y"?Ir[e]?null:(Ir[e]=!0,()=>{Ir[e]=!1}):Ir.x||Ir.y?null:(Ir.x=Ir.y=!0,()=>{Ir.x=Ir.y=!1})}function sR(e,t){const n=Hq(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function gS(e){return!(e.pointerType==="touch"||tR())}function Zq(e,t,n={}){const[r,a,i]=sR(e,n),o=l=>{if(!gS(l))return;const{target:d}=l,h=t(d,l);if(typeof h!="function"||!d)return;const f=u=>{gS(u)&&(h(u),d.removeEventListener("pointerleave",f))};d.addEventListener("pointerleave",f,a)};return r.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const nR=(e,t)=>t?e===t?!0:nR(e,t.parentElement):!1,r_=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Yq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Xq(e){return Yq.has(e.tagName)||e.tabIndex!==-1}const rm=new WeakSet;function vS(e){return t=>{t.key==="Enter"&&e(t)}}function dx(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Jq=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=vS(()=>{if(rm.has(n))return;dx(n,"down");const a=vS(()=>{dx(n,"up")}),i=()=>dx(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function xS(e){return r_(e)&&!tR()}function Qq(e,t,n={}){const[r,a,i]=sR(e,n),o=l=>{const d=l.currentTarget;if(!xS(l))return;rm.add(d);const h=t(d,l),f=(p,w)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",m),rm.has(d)&&rm.delete(d),xS(p)&&typeof h=="function"&&h(p,{success:w})},u=p=>{f(p,d===window||d===document||n.useGlobalTarget||nR(d,p.target))},m=p=>{f(p,!1)};window.addEventListener("pointerup",u,a),window.addEventListener("pointercancel",m,a)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),eR(l)&&(l.addEventListener("focus",h=>Jq(h,a)),!Xq(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function rR(e){return gO(e)&&"ownerSVGElement"in e}function eH(e){return rR(e)&&e.tagName==="svg"}const bn=e=>!!(e&&e.getVelocity),tH=[...YO,Vs,lo],sH=e=>tH.find(ZO(e)),a_=_.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class nH extends _.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,a=eR(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function rH({children:e,isPresent:t,anchorX:n,root:r}){const a=_.useId(),i=_.useRef(null),o=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=_.useContext(a_);return _.useInsertionEffect(()=>{const{width:d,height:h,top:f,left:u,right:m}=o.current;if(t||!i.current||!d||!h)return;const p=n==="left"?`left: ${u}`:`right: ${m}`;i.current.dataset.motionPopId=a;const w=document.createElement("style");l&&(w.nonce=l);const v=r??document.head;return v.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${p}px !important;
            top: ${f}px !important;
          }
        `),()=>{v.contains(w)&&v.removeChild(w)}},[t]),s.jsx(nH,{isPresent:t,childRef:i,sizeRef:o,children:_.cloneElement(e,{ref:i})})}const aH=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:o,anchorX:l,root:d})=>{const h=Dw(iH),f=_.useId();let u=!0,m=_.useMemo(()=>(u=!1,{id:f,initial:t,isPresent:n,custom:a,onExitComplete:p=>{h.set(p,!0);for(const w of h.values())if(!w)return;r&&r()},register:p=>(h.set(p,!1),()=>h.delete(p))}),[n,h,r]);return i&&u&&(m={...m}),_.useMemo(()=>{h.forEach((p,w)=>h.set(w,!1))},[n]),_.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),o==="popLayout"&&(e=s.jsx(rH,{isPresent:n,anchorX:l,root:d,children:e})),s.jsx(hg.Provider,{value:m,children:e})};function iH(){return new Map}function aR(e=!0){const t=_.useContext(hg);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=_.useId();_.useEffect(()=>{if(e)return a(i)},[e]);const o=_.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,o]:[!0]}const Lf=e=>e.key||"";function yS(e){const t=[];return _.Children.forEach(e,n=>{_.isValidElement(n)&&t.push(n)}),t}const bS=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:d})=>{const[h,f]=aR(o),u=_.useMemo(()=>yS(e),[e]),m=o&&!h?[]:u.map(Lf),p=_.useRef(!0),w=_.useRef(u),v=Dw(()=>new Map),[x,y]=_.useState(u),[b,j]=_.useState(u);mO(()=>{p.current=!1,w.current=u;for(let P=0;P<b.length;P++){const T=Lf(b[P]);m.includes(T)?v.delete(T):v.get(T)!==!0&&v.set(T,!1)}},[b,m.length,m.join("-")]);const N=[];if(u!==x){let P=[...u];for(let T=0;T<b.length;T++){const E=b[T],I=Lf(E);m.includes(I)||(P.splice(T,0,E),N.push(E))}return i==="wait"&&N.length&&(P=N),j(yS(P)),y(u),null}const{forceRender:S}=_.useContext(Mw);return s.jsx(s.Fragment,{children:b.map(P=>{const T=Lf(P),E=o&&!h?!1:u===b||m.includes(T),I=()=>{if(v.has(T))v.set(T,!0);else return;let O=!0;v.forEach(R=>{R||(O=!1)}),O&&(S==null||S(),j(w.current),o&&(f==null||f()),r&&r())};return s.jsx(aH,{isPresent:E,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,root:d,onExitComplete:E?void 0:I,anchorX:l,children:P},T)})})},iR=_.createContext({strict:!1}),wS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zc={};for(const e in wS)Zc[e]={isEnabled:t=>wS[e].some(n=>!!t[n])};function oH(e){for(const t in e)Zc[t]={...Zc[t],...e[t]}}const lH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xm(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||lH.has(e)}let oR=e=>!Xm(e);function cH(e){typeof e=="function"&&(oR=t=>t.startsWith("on")?!Xm(t):e(t))}try{cH(require("@emotion/is-prop-valid").default)}catch{}function dH(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(oR(a)||n===!0&&Xm(a)||!t&&!Xm(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}const fg=_.createContext({});function mg(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function uh(e){return typeof e=="string"||Array.isArray(e)}const i_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],o_=["initial",...i_];function pg(e){return mg(e.animate)||o_.some(t=>uh(e[t]))}function lR(e){return!!(pg(e)||e.variants)}function uH(e,t){if(pg(e)){const{initial:n,animate:r}=e;return{initial:n===!1||uh(n)?n:void 0,animate:uh(r)?r:void 0}}return e.inherit!==!1?t:{}}function hH(e){const{initial:t,animate:n}=uH(e,_.useContext(fg));return _.useMemo(()=>({initial:t,animate:n}),[_S(t),_S(n)])}function _S(e){return Array.isArray(e)?e.join(" "):e}const hh={};function fH(e){for(const t in e)hh[t]=e[t],Hw(t)&&(hh[t].isCSSVariable=!0)}function cR(e,{layout:t,layoutId:n}){return vd.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!hh[e]||e==="opacity")}const mH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pH=gd.length;function gH(e,t,n){let r="",a=!0;for(let i=0;i<pH;i++){const o=gd[i],l=e[o];if(l===void 0)continue;let d=!0;if(typeof l=="number"?d=l===(o.startsWith("scale")?1:0):d=parseFloat(l)===0,!d||n){const h=QO(l,s_[o]);if(!d){a=!1;const f=mH[o]||o;r+=`${f}(${h}) `}n&&(t[o]=h)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function l_(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let o=!1,l=!1;for(const d in t){const h=t[d];if(vd.has(d)){o=!0;continue}else if(Hw(d)){a[d]=h;continue}else{const f=QO(h,s_[d]);d.startsWith("origin")?(l=!0,i[d]=f):r[d]=f}}if(t.transform||(o||n?r.transform=gH(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:d="50%",originY:h="50%",originZ:f=0}=i;r.transformOrigin=`${d} ${h} ${f}`}}const c_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dR(e,t,n){for(const r in t)!bn(t[r])&&!cR(r,n)&&(e[r]=t[r])}function vH({transformTemplate:e},t){return _.useMemo(()=>{const n=c_();return l_(n,t,e),Object.assign({},n.vars,n.style)},[t])}function xH(e,t){const n=e.style||{},r={};return dR(r,n,e),Object.assign(r,vH(e,t)),r}function yH(e,t){const n={},r=xH(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const bH={offset:"stroke-dashoffset",array:"stroke-dasharray"},wH={offset:"strokeDashoffset",array:"strokeDasharray"};function _H(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?bH:wH;e[i.offset]=xt.transform(-r);const o=xt.transform(t),l=xt.transform(n);e[i.array]=`${o} ${l}`}function uR(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...l},d,h,f){if(l_(e,l,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:u,style:m}=e;u.transform&&(m.transform=u.transform,delete u.transform),(m.transform||u.transformOrigin)&&(m.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),m.transform&&(m.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete u.transformBox),t!==void 0&&(u.x=t),n!==void 0&&(u.y=n),r!==void 0&&(u.scale=r),a!==void 0&&_H(u,a,i,o,!1)}const hR=()=>({...c_(),attrs:{}}),fR=e=>typeof e=="string"&&e.toLowerCase()==="svg";function jH(e,t,n,r){const a=_.useMemo(()=>{const i=hR();return uR(i,t,fR(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};dR(i,e.style,e),a.style={...i,...a.style}}return a}const NH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function d_(e){return typeof e!="string"||e.includes("-")?!1:!!(NH.indexOf(e)>-1||/[A-Z]/u.test(e))}function SH(e,t,n,{latestValues:r},a,i=!1){const l=(d_(e)?jH:yH)(t,r,a,e),d=dH(t,typeof e=="string",i),h=e!==_.Fragment?{...d,...l,ref:n}:{},{children:f}=t,u=_.useMemo(()=>bn(f)?f.get():f,[f]);return _.createElement(e,{...h,children:u})}function jS(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function u_(e,t,n,r){if(typeof t=="function"){const[a,i]=jS(r);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=jS(r);t=t(n!==void 0?n:e.custom,a,i)}return t}function am(e){return bn(e)?e.get():e}function kH({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:CH(n,r,a,e),renderState:t()}}function CH(e,t,n,r){const a={},i=r(e,{});for(const m in i)a[m]=am(i[m]);let{initial:o,animate:l}=e;const d=pg(e),h=lR(e);t&&h&&!d&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const u=f?l:o;if(u&&typeof u!="boolean"&&!mg(u)){const m=Array.isArray(u)?u:[u];for(let p=0;p<m.length;p++){const w=u_(e,m[p]);if(w){const{transitionEnd:v,transition:x,...y}=w;for(const b in y){let j=y[b];if(Array.isArray(j)){const N=f?j.length-1:0;j=j[N]}j!==null&&(a[b]=j)}for(const b in v)a[b]=v[b]}}}return a}const mR=e=>(t,n)=>{const r=_.useContext(fg),a=_.useContext(hg),i=()=>kH(e,t,r,a);return n?i():Dw(i)};function h_(e,t,n){var i;const{style:r}=e,a={};for(const o in r)(bn(r[o])||t.style&&bn(t.style[o])||cR(o,e)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(a[o]=r[o]);return a}const EH=mR({scrapeMotionValuesFromProps:h_,createRenderState:c_});function pR(e,t,n){const r=h_(e,t,n);for(const a in e)if(bn(e[a])||bn(t[a])){const i=gd.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}const TH=mR({scrapeMotionValuesFromProps:pR,createRenderState:hR}),PH=Symbol.for("motionComponentSymbol");function tc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function AH(e,t,n){return _.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):tc(n)&&(n.current=r))},[t])}const f_=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),OH="framerAppearId",gR="data-"+f_(OH),vR=_.createContext({});function RH(e,t,n,r,a){var v,x;const{visualElement:i}=_.useContext(fg),o=_.useContext(iR),l=_.useContext(hg),d=_.useContext(a_).reducedMotion,h=_.useRef(null);r=r||o.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:i,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,u=_.useContext(vR);f&&!f.projection&&a&&(f.type==="html"||f.type==="svg")&&LH(h.current,n,a,u);const m=_.useRef(!1);_.useInsertionEffect(()=>{f&&m.current&&f.update(n,l)});const p=n[gR],w=_.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,p)));return mO(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),w.current&&f.animationState&&f.animationState.animateChanges())}),_.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,p)}),w.current=!1),f.enteringChildren=void 0)}),f}function LH(e,t,n,r){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:d,layoutRoot:h,layoutCrossfade:f}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:xR(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&tc(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:d,layoutRoot:h})}function xR(e){if(e)return e.options.allowProjection!==!1?e.projection:xR(e.parent)}function ux(e,{forwardMotionProps:t=!1}={},n,r){n&&oH(n);const a=d_(e)?TH:EH;function i(l,d){let h;const f={..._.useContext(a_),...l,layoutId:IH(l)},{isStatic:u}=f,m=hH(l),p=a(l,u);if(!u&&Fw){MH();const w=DH(f);h=w.MeasureLayout,m.visualElement=RH(e,p,f,r,w.ProjectionNode)}return s.jsxs(fg.Provider,{value:m,children:[h&&m.visualElement?s.jsx(h,{visualElement:m.visualElement,...f}):null,SH(e,l,AH(p,m.visualElement,d),p,u,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=_.forwardRef(i);return o[PH]=e,o}function IH({layoutId:e}){const t=_.useContext(Mw).id;return t&&e!==void 0?t+"-"+e:e}function MH(e,t){_.useContext(iR).strict}function DH(e){const{drag:t,layout:n}=Zc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function FH(e,t){if(typeof Proxy>"u")return ux;const n=new Map,r=(i,o)=>ux(i,o,e,t),a=(i,o)=>r(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?r:(n.has(o)||n.set(o,ux(o,void 0,e,t)),n.get(o))})}function yR({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function $H({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function BH(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function hx(e){return e===void 0||e===1}function t0({scale:e,scaleX:t,scaleY:n}){return!hx(e)||!hx(t)||!hx(n)}function Ao(e){return t0(e)||bR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function bR(e){return NS(e.x)||NS(e.y)}function NS(e){return e&&e!=="0%"}function Jm(e,t,n){const r=e-n,a=t*r;return n+a}function SS(e,t,n,r,a){return a!==void 0&&(e=Jm(e,a,r)),Jm(e,n,r)+t}function s0(e,t=0,n=1,r,a){e.min=SS(e.min,t,n,r,a),e.max=SS(e.max,t,n,r,a)}function wR(e,{x:t,y:n}){s0(e.x,t.translate,t.scale,t.originPoint),s0(e.y,n.translate,n.scale,n.originPoint)}const kS=.999999999999,CS=1.0000000000001;function zH(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=n[l],o=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&nc(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,wR(e,o)),r&&Ao(i.latestValues)&&nc(e,i.latestValues))}t.x<CS&&t.x>kS&&(t.x=1),t.y<CS&&t.y>kS&&(t.y=1)}function sc(e,t){e.min=e.min+t,e.max=e.max+t}function ES(e,t,n,r,a=.5){const i=_s(e.min,e.max,a);s0(e,t,n,i,r)}function nc(e,t){ES(e.x,t.x,t.scaleX,t.scale,t.originX),ES(e.y,t.y,t.scaleY,t.scale,t.originY)}function _R(e,t){return yR(BH(e.getBoundingClientRect(),t))}function VH(e,t,n){const r=_R(e,n),{scroll:a}=t;return a&&(sc(r.x,a.offset.x),sc(r.y,a.offset.y)),r}const TS=()=>({translate:0,scale:1,origin:0,originPoint:0}),rc=()=>({x:TS(),y:TS()}),PS=()=>({min:0,max:0}),Rs=()=>({x:PS(),y:PS()}),n0={current:null},jR={current:!1};function UH(){if(jR.current=!0,!!Fw)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>n0.current=e.matches;e.addEventListener("change",t),t()}else n0.current=!1}const qH=new WeakMap;function HH(e,t,n){for(const r in t){const a=t[r],i=n[r];if(bn(a))e.addValue(r,a);else if(bn(i))e.addValue(r,Kc(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(r);e.addValue(r,Kc(o!==void 0?o:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const AS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class WH{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=e_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Zn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,xs.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=pg(n),this.isVariantNode=lR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in u){const p=u[m];d[m]!==void 0&&bn(p)&&p.set(d[m])}}mount(t){var n;this.current=t,qH.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,a)=>this.bindToMotionValue(a,r)),jR.current||UH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:n0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),oo(this.notifyUpdate),oo(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=vd.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&xs.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Zc){const n=Zc[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<AS.length;r++){const a=AS[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=HH(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Kc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(pO(r)||vO(r))?r=parseFloat(r):!sH(r)&&lo.test(n)&&(r=JO(t,n)),this.setBaseTarget(t,bn(r)?r.get():r)),bn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=u_(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!bn(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Vw),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){n_.render(this.render)}}class NR extends WH{constructor(){super(...arguments),this.KeyframeResolver=qq}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;bn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function SR(e,{style:t,vars:n},r,a){const i=e.style;let o;for(o in t)i[o]=t[o];a==null||a.applyProjectionStyles(i,r);for(o in n)i.setProperty(o,n[o])}function GH(e){return window.getComputedStyle(e)}class KH extends NR{constructor(){super(...arguments),this.type="html",this.renderInstance=SR}readValueFromInstance(t,n){var r;if(vd.has(n))return(r=this.projection)!=null&&r.isProjecting?Ky(n):cq(t,n);{const a=GH(t),i=(Hw(n)?a.getPropertyValue(n):a[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return _R(t,n)}build(t,n,r){l_(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return h_(t,n,r)}}const kR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ZH(e,t,n,r){SR(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(kR.has(a)?a:f_(a),t.attrs[a])}class YH extends NR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rs}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(vd.has(n)){const r=XO(n);return r&&r.default||0}return n=kR.has(n)?n:f_(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return pR(t,n,r)}build(t,n,r){uR(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){ZH(t,n,r,a)}mount(t){this.isSVGTag=fR(t.tagName),super.mount(t)}}const XH=(e,t)=>d_(e)?new YH(t):new KH(t,{allowProjection:e!==_.Fragment});function gc(e,t,n){const r=e.getProps();return u_(r,t,n!==void 0?n:r.custom,e)}const r0=e=>Array.isArray(e);function JH(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Kc(n))}function QH(e){return r0(e)?e[e.length-1]||0:e}function eW(e,t){const n=gc(e,t);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const o in i){const l=QH(i[o]);JH(e,o,l)}}function tW(e){return!!(bn(e)&&e.add)}function a0(e,t){const n=e.getValue("willChange");if(tW(n))return n.add(t);if(!n&&gi.WillChange){const r=new gi.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function CR(e){return e.props[gR]}const sW=e=>e!==null;function nW(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(sW),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return!i||r===void 0?a[i]:r}const rW={type:"spring",stiffness:500,damping:25,restSpeed:10},aW=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),iW={type:"keyframes",duration:.8},oW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lW=(e,{keyframes:t})=>t.length>2?iW:vd.has(e)?e.startsWith("scale")?aW(t[1]):rW:oW;function cW({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:d,elapsed:h,...f}){return!!Object.keys(f).length}const m_=(e,t,n,r={},a,i)=>o=>{const l=t_(r,e)||{},d=l.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Ea(d);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-h,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:a};cW(l)||Object.assign(f,lW(e,f)),f.duration&&(f.duration=Ea(f.duration)),f.repeatDelay&&(f.repeatDelay=Ea(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let u=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Qy(f),f.delay===0&&(u=!0)),(gi.instantAnimations||gi.skipAnimations)&&(u=!0,Qy(f),f.delay=0),f.allowFlatten=!l.type&&!l.ease,u&&!i&&t.get()!==void 0){const m=nW(f.keyframes,l);if(m!==void 0){xs.update(()=>{f.onUpdate(m),f.onComplete()});return}}return l.isSync?new Qw(f):new Oq(f)};function dW({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function ER(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(i=r);const d=[],h=a&&e.animationState&&e.animationState.getState()[a];for(const f in l){const u=e.getValue(f,e.latestValues[f]??null),m=l[f];if(m===void 0||h&&dW(h,f))continue;const p={delay:n,...t_(i||{},f)},w=u.get();if(w!==void 0&&!u.isAnimating&&!Array.isArray(m)&&m===w&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const y=CR(e);if(y){const b=window.MotionHandoffAnimation(y,f,xs);b!==null&&(p.startTime=b,v=!0)}}a0(e,f),u.start(m_(f,u,m,e.shouldReduceMotion&&KO.has(f)?{type:!1}:p,e,v));const x=u.animation;x&&d.push(x)}return o&&Promise.all(d).then(()=>{xs.update(()=>{o&&eW(e,o)})}),d}function TR(e,t,n,r=0,a=1){const i=Array.from(e).sort((h,f)=>h.sortNodePosition(f)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(i,o):a===1?i*r:l-i*r}function i0(e,t,n={}){var d;const r=gc(e,t,n.type==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(ER(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:u,staggerDirection:m}=a;return uW(e,t,h,f,u,m,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[h,f]=l==="beforeChildren"?[i,o]:[o,i];return h().then(()=>f())}else return Promise.all([i(),o(n.delay)])}function uW(e,t,n=0,r=0,a=0,i=1,o){const l=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),l.push(i0(d,t,{...o,delay:n+(typeof r=="function"?0:r)+TR(e.variantChildren,d,r,a,i)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(l)}function hW(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>i0(e,i,n));r=Promise.all(a)}else if(typeof t=="string")r=i0(e,t,n);else{const a=typeof t=="function"?gc(e,t,n.custom):t;r=Promise.all(ER(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function PR(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const fW=o_.length;function AR(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?AR(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<fW;n++){const r=o_[n],a=e.props[r];(uh(a)||a===!1)&&(t[r]=a)}return t}const mW=[...i_].reverse(),pW=i_.length;function gW(e){return t=>Promise.all(t.map(({animation:n,options:r})=>hW(e,n,r)))}function vW(e){let t=gW(e),n=OS(),r=!0;const a=d=>(h,f)=>{var m;const u=gc(e,f,d==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(u){const{transition:p,transitionEnd:w,...v}=u;h={...h,...v,...w}}return h};function i(d){t=d(e)}function o(d){const{props:h}=e,f=AR(e.parent)||{},u=[],m=new Set;let p={},w=1/0;for(let x=0;x<pW;x++){const y=mW[x],b=n[y],j=h[y]!==void 0?h[y]:f[y],N=uh(j),S=y===d?b.isActive:null;S===!1&&(w=x);let P=j===f[y]&&j!==h[y]&&N;if(P&&r&&e.manuallyAnimateOnMount&&(P=!1),b.protectedKeys={...p},!b.isActive&&S===null||!j&&!b.prevProp||mg(j)||typeof j=="boolean")continue;const T=xW(b.prevProp,j);let E=T||y===d&&b.isActive&&!P&&N||x>w&&N,I=!1;const O=Array.isArray(j)?j:[j];let R=O.reduce(a(y),{});S===!1&&(R={});const{prevResolvedValues:C={}}=b,D={...C,...R},A=X=>{E=!0,m.has(X)&&(I=!0,m.delete(X)),b.needsAnimating[X]=!0;const U=e.getValue(X);U&&(U.liveStyle=!1)};for(const X in D){const U=R[X],F=C[X];if(p.hasOwnProperty(X))continue;let B=!1;r0(U)&&r0(F)?B=!PR(U,F):B=U!==F,B?U!=null?A(X):m.add(X):U!==void 0&&m.has(X)?A(X):b.protectedKeys[X]=!0}b.prevProp=j,b.prevResolvedValues=R,b.isActive&&(p={...p,...R}),r&&e.blockInitialAnimation&&(E=!1);const M=P&&T;E&&(!M||I)&&u.push(...O.map(X=>{const U={type:y};if(typeof X=="string"&&r&&!M&&e.manuallyAnimateOnMount&&e.parent){const{parent:F}=e,B=gc(F,X);if(F.enteringChildren&&B){const{delayChildren:z}=B.transition||{};U.delay=TR(F.enteringChildren,e,z)}}return{animation:X,options:U}}))}if(m.size){const x={};if(typeof h.initial!="boolean"){const y=gc(e,Array.isArray(h.initial)?h.initial[0]:h.initial);y&&y.transition&&(x.transition=y.transition)}m.forEach(y=>{const b=e.getBaseTarget(y),j=e.getValue(y);j&&(j.liveStyle=!0),x[y]=b??null}),u.push({animation:x})}let v=!!u.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(u):Promise.resolve()}function l(d,h){var u;if(n[d].isActive===h)return Promise.resolve();(u=e.variantChildren)==null||u.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(d,h)}),n[d].isActive=h;const f=o(d);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=OS(),r=!0}}}function xW(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!PR(t,e):!1}function Co(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function OS(){return{animate:Co(!0),whileInView:Co(),whileHover:Co(),whileTap:Co(),whileDrag:Co(),whileFocus:Co(),exit:Co()}}class xo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class yW extends xo{constructor(t){super(t),t.animationState||(t.animationState=vW(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();mg(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let bW=0;class wW extends xo{constructor(){super(...arguments),this.id=bW++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const _W={animation:{Feature:yW},exit:{Feature:wW}};function fh(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Dh(e){return{point:{x:e.pageX,y:e.pageY}}}const jW=e=>t=>r_(t)&&e(t,Dh(t));function Cu(e,t,n,r){return fh(e,t,jW(n),r)}const OR=1e-4,NW=1-OR,SW=1+OR,RR=.01,kW=0-RR,CW=0+RR;function Pn(e){return e.max-e.min}function EW(e,t,n){return Math.abs(e-t)<=n}function RS(e,t,n,r=.5){e.origin=r,e.originPoint=_s(t.min,t.max,e.origin),e.scale=Pn(n)/Pn(t),e.translate=_s(n.min,n.max,e.origin)-e.originPoint,(e.scale>=NW&&e.scale<=SW||isNaN(e.scale))&&(e.scale=1),(e.translate>=kW&&e.translate<=CW||isNaN(e.translate))&&(e.translate=0)}function Eu(e,t,n,r){RS(e.x,t.x,n.x,r?r.originX:void 0),RS(e.y,t.y,n.y,r?r.originY:void 0)}function LS(e,t,n){e.min=n.min+t.min,e.max=e.min+Pn(t)}function TW(e,t,n){LS(e.x,t.x,n.x),LS(e.y,t.y,n.y)}function IS(e,t,n){e.min=t.min-n.min,e.max=e.min+Pn(t)}function Tu(e,t,n){IS(e.x,t.x,n.x),IS(e.y,t.y,n.y)}function vr(e){return[e("x"),e("y")]}const LR=({current:e})=>e?e.ownerDocument.defaultView:null,MS=(e,t)=>Math.abs(e-t);function PW(e,t){const n=MS(e.x,t.x),r=MS(e.y,t.y);return Math.sqrt(n**2+r**2)}class IR{constructor(t,n,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=mx(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,w=PW(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!w)return;const{point:v}=m,{timestamp:x}=dn;this.history.push({...v,timestamp:x});const{onStart:y,onMove:b}=this.handlers;p||(y&&y(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=fx(p,this.transformPagePoint),xs.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:w,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=mx(m.type==="pointercancel"?this.lastMoveEventInfo:fx(p,this.transformPagePoint),this.history);this.startEvent&&w&&w(m,y),v&&v(m,y)},!r_(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=a||window;const l=Dh(t),d=fx(l,this.transformPagePoint),{point:h}=d,{timestamp:f}=dn;this.history=[{...h,timestamp:f}];const{onSessionStart:u}=n;u&&u(t,mx(d,this.history)),this.removeListeners=Lh(Cu(this.contextWindow,"pointermove",this.handlePointerMove),Cu(this.contextWindow,"pointerup",this.handlePointerUp),Cu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),oo(this.updatePoint)}}function fx(e,t){return t?{point:t(e.point)}:e}function DS(e,t){return{x:e.x-t.x,y:e.y-t.y}}function mx({point:e},t){return{point:e,delta:DS(e,MR(t)),offset:DS(e,AW(t)),velocity:OW(t,.1)}}function AW(e){return e[0]}function MR(e){return e[e.length-1]}function OW(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=MR(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>Ea(t)));)n--;if(!r)return{x:0,y:0};const i=Ta(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function RW(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?_s(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?_s(n,e,r.max):Math.min(e,n)),e}function FS(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function LW(e,{top:t,left:n,bottom:r,right:a}){return{x:FS(e.x,n,a),y:FS(e.y,t,r)}}function $S(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function IW(e,t){return{x:$S(e.x,t.x),y:$S(e.y,t.y)}}function MW(e,t){let n=.5;const r=Pn(e),a=Pn(t);return a>r?n=lh(t.min,t.max-r,e.min):r>a&&(n=lh(e.min,e.max-a,t.min)),pi(0,1,n)}function DW(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const o0=.35;function FW(e=o0){return e===!1?e=0:e===!0&&(e=o0),{x:BS(e,"left","right"),y:BS(e,"top","bottom")}}function BS(e,t,n){return{min:zS(e,t),max:zS(e,n)}}function zS(e,t){return typeof e=="number"?e:e[t]||0}const $W=new WeakMap;class BW{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Dh(u).point)},o=(u,m)=>{const{drag:p,dragPropagation:w,onDragStart:v}=this.getProps();if(p&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Kq(p),!this.openDragLock))return;this.latestPointerEvent=u,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vr(y=>{let b=this.getAxisMotionValue(y).get()||0;if(Pa.test(b)){const{projection:j}=this.visualElement;if(j&&j.layout){const N=j.layout.layoutBox[y];N&&(b=Pn(N)*(parseFloat(b)/100))}}this.originPoint[y]=b}),v&&xs.postRender(()=>v(u,m)),a0(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},l=(u,m)=>{this.latestPointerEvent=u,this.latestPanInfo=m;const{dragPropagation:p,dragDirectionLock:w,onDirectionLock:v,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:y}=m;if(w&&this.currentDirection===null){this.currentDirection=zW(y),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",m.point,y),this.updateAxis("y",m.point,y),this.visualElement.render(),x&&x(u,m)},d=(u,m)=>{this.latestPointerEvent=u,this.latestPanInfo=m,this.stop(u,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>vr(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)==null?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new IR(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:LR(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,a=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!r)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&xs.postRender(()=>l(r,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!If(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=RW(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;t&&tc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=LW(r.layoutBox,t):this.constraints=!1,this.elastic=FW(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=DW(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!tc(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=VH(r,a.root,this.visualElement.getTransformPagePoint());let o=IW(a.layout.layoutBox,i);if(n){const l=n($H(o));this.hasMutatedConstraints=!!l,l&&(o=yR(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},h=vr(f=>{if(!If(f,n,this.currentDirection))return;let u=d&&d[f]||{};o&&(u={min:0,max:0});const m=a?200:1e6,p=a?40:1e7,w={type:"inertia",velocity:r?t[f]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...u};return this.startAxisValueAnimation(f,w)});return Promise.all(h).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return a0(this.visualElement,t),r.start(m_(t,r,0,n,this.visualElement,!1))}stopAnimation(){vr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){vr(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){vr(n=>{const{drag:r}=this.getProps();if(!If(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[n];i.set(t[n]-_s(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!tc(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};vr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const d=l.get();a[o]=MW({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),vr(o=>{if(!If(o,t,null))return;const l=this.getAxisMotionValue(o),{min:d,max:h}=this.constraints[o];l.set(_s(d,h,a[o]))})}addListeners(){if(!this.visualElement.current)return;$W.set(this.visualElement,this);const t=this.visualElement.current,n=Cu(t,"pointerdown",d=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();tc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),xs.read(r);const o=fh(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(vr(f=>{const u=this.getAxisMotionValue(f);u&&(this.originPoint[f]+=d[f].translate,u.set(u.get()+d[f].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=o0,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function If(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function zW(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class VW extends xo{constructor(t){super(t),this.removeGroupControls=Sr,this.removeListeners=Sr,this.controls=new BW(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Sr}unmount(){this.removeGroupControls(),this.removeListeners()}}const VS=e=>(t,n)=>{e&&xs.postRender(()=>e(t,n))};class UW extends xo{constructor(){super(...arguments),this.removePointerDownListener=Sr}onPointerDown(t){this.session=new IR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:LR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:VS(t),onStart:VS(n),onMove:r,onEnd:(i,o)=>{delete this.session,a&&xs.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=Cu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const im={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function US(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Yd={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(xt.test(e))e=parseFloat(e);else return e;const n=US(e,t.target.x),r=US(e,t.target.y);return`${n}% ${r}%`}},qW={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=lo.parse(e);if(a.length>5)return r;const i=lo.createTransformer(e),o=typeof a[0]!="number"?1:0,l=n.x.scale*t.x,d=n.y.scale*t.y;a[0+o]/=l,a[1+o]/=d;const h=_s(l,d,.5);return typeof a[2+o]=="number"&&(a[2+o]/=h),typeof a[3+o]=="number"&&(a[3+o]/=h),i(a)}};let px=!1;class HW extends _.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;fH(WW),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),px&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),im.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,px=!0,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||xs.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),n_.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;px=!0,a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function DR(e){const[t,n]=aR(),r=_.useContext(Mw);return s.jsx(HW,{...e,layoutGroup:r,switchLayoutGroup:_.useContext(vR),isPresent:t,safeToRemove:n})}const WW={borderRadius:{...Yd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yd,borderTopRightRadius:Yd,borderBottomLeftRadius:Yd,borderBottomRightRadius:Yd,boxShadow:qW};function GW(e,t,n){const r=bn(e)?e:Kc(e);return r.start(m_("",r,t,n)),r.animation}const KW=(e,t)=>e.depth-t.depth;class ZW{constructor(){this.children=[],this.isDirty=!1}add(t){$w(this.children,t),this.isDirty=!0}remove(t){Bw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(KW),this.isDirty=!1,this.children.forEach(t)}}function YW(e,t){const n=Zn.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(oo(r),e(i-t))};return xs.setup(r,!0),()=>oo(r)}const FR=["TopLeft","TopRight","BottomLeft","BottomRight"],XW=FR.length,qS=e=>typeof e=="string"?parseFloat(e):e,HS=e=>typeof e=="number"||xt.test(e);function JW(e,t,n,r,a,i){a?(e.opacity=_s(0,n.opacity??1,QW(r)),e.opacityExit=_s(t.opacity??1,0,eG(r))):i&&(e.opacity=_s(t.opacity??1,n.opacity??1,r));for(let o=0;o<XW;o++){const l=`border${FR[o]}Radius`;let d=WS(t,l),h=WS(n,l);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||HS(d)===HS(h)?(e[l]=Math.max(_s(qS(d),qS(h),r),0),(Pa.test(h)||Pa.test(d))&&(e[l]+="%")):e[l]=h}(t.rotate||n.rotate)&&(e.rotate=_s(t.rotate||0,n.rotate||0,r))}function WS(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const QW=$R(0,.5,SO),eG=$R(.5,.95,Sr);function $R(e,t,n){return r=>r<e?0:r>t?1:n(lh(e,t,r))}function GS(e,t){e.min=t.min,e.max=t.max}function gr(e,t){GS(e.x,t.x),GS(e.y,t.y)}function KS(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ZS(e,t,n,r,a){return e-=t,e=Jm(e,1/n,r),a!==void 0&&(e=Jm(e,1/a,r)),e}function tG(e,t=0,n=1,r=.5,a,i=e,o=e){if(Pa.test(t)&&(t=parseFloat(t),t=_s(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=_s(i.min,i.max,r);e===i&&(l-=t),e.min=ZS(e.min,t,n,l,a),e.max=ZS(e.max,t,n,l,a)}function YS(e,t,[n,r,a],i,o){tG(e,t[n],t[r],t[a],t.scale,i,o)}const sG=["x","scaleX","originX"],nG=["y","scaleY","originY"];function XS(e,t,n,r){YS(e.x,t,sG,n?n.x:void 0,r?r.x:void 0),YS(e.y,t,nG,n?n.y:void 0,r?r.y:void 0)}function JS(e){return e.translate===0&&e.scale===1}function BR(e){return JS(e.x)&&JS(e.y)}function QS(e,t){return e.min===t.min&&e.max===t.max}function rG(e,t){return QS(e.x,t.x)&&QS(e.y,t.y)}function ek(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function zR(e,t){return ek(e.x,t.x)&&ek(e.y,t.y)}function tk(e){return Pn(e.x)/Pn(e.y)}function sk(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class aG{constructor(){this.members=[]}add(t){$w(this.members,t),t.scheduleRender()}remove(t){if(Bw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iG(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((a||i||o)&&(r=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:u,rotateY:m,skewX:p,skewY:w}=n;h&&(r=`perspective(${h}px) ${r}`),f&&(r+=`rotate(${f}deg) `),u&&(r+=`rotateX(${u}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),w&&(r+=`skewY(${w}deg) `)}const l=e.x.scale*t.x,d=e.y.scale*t.y;return(l!==1||d!==1)&&(r+=`scale(${l}, ${d})`),r||"none"}const gx=["","X","Y","Z"],oG=1e3;let lG=0;function vx(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function VR(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=CR(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xs,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&VR(r)}function UR({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=lG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(uG),this.nodes.forEach(pG),this.nodes.forEach(gG),this.nodes.forEach(hG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZW)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Vw),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=rR(o)&&!eH(o),this.instance=o;const{layoutId:l,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||l)&&(this.isLayoutDirty=!0),e){let f,u=0;const m=()=>this.root.updateBlockedByResize=!1;xs.read(()=>{u=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==u&&(u=p,this.root.updateBlockedByResize=!0,f&&f(),f=YW(m,250),im.hasAnimatedSinceResize&&(im.hasAnimatedSinceResize=!1,this.nodes.forEach(ak)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:u,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||wG,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=h.getProps(),y=!this.targetLayout||!zR(this.targetLayout,p),b=!u&&m;if(this.options.layoutRoot||this.resumeFrom||b||u&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...t_(w,"layout"),onPlay:v,onComplete:x};(h.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(f,b)}else u||ak(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),oo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&VR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const u=this.path[f];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nk);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(rk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(mG),this.nodes.forEach(cG),this.nodes.forEach(dG)):this.nodes.forEach(rk),this.clearAllSnapshots();const l=Zn.now();dn.delta=pi(0,1e3/60,l-dn.timestamp),dn.timestamp=l,dn.isProcessing=!0,ax.update.process(dn),ax.preRender.process(dn),ax.render.process(dn),dn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,n_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fG),this.sharedNodes.forEach(xG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pn(this.snapshot.measuredBox.x)&&!Pn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!BR(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&this.instance&&(l||Ao(this.latestValues)||f)&&(a(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),_G(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:o}=this.options;if(!o)return Rs();const l=o.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(jG))){const{scroll:f}=this.root;f&&(sc(l.x,f.offset.x),sc(l.y,f.offset.y))}return l}removeElementScroll(o){var d;const l=Rs();if(gr(l,o),(d=this.scroll)!=null&&d.wasRoot)return l;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:u,options:m}=f;f!==this.root&&u&&m.layoutScroll&&(u.wasRoot&&gr(l,o),sc(l.x,u.offset.x),sc(l.y,u.offset.y))}return l}applyTransform(o,l=!1){const d=Rs();gr(d,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&nc(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Ao(f.latestValues)&&nc(d,f.latestValues)}return Ao(this.latestValues)&&nc(d,this.latestValues),d}removeTransform(o){const l=Rs();gr(l,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Ao(h.latestValues))continue;t0(h.latestValues)&&h.updateSnapshot();const f=Rs(),u=h.measurePageBox();gr(f,u),XS(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Ao(this.latestValues)&&XS(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:u}=this.options;if(!(!this.layout||!(f||u))){if(this.resolvedRelativeTargetAt=dn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rs(),this.relativeTargetOrigin=Rs(),Tu(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Rs(),this.targetWithTransforms=Rs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),TW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gr(this.target,this.layout.layoutBox),wR(this.target,this.targetDelta)):gr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rs(),this.relativeTargetOrigin=Rs(),Tu(this.relativeTargetOrigin,this.target,p.target),gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||t0(this.parent.latestValues)||bR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===dn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;gr(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,m=this.treeScale.y;zH(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Rs());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(KS(this.prevProjectionDelta.x,this.projectionDelta.x),KS(this.prevProjectionDelta.y,this.projectionDelta.y)),Eu(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==u||this.treeScale.y!==m||!sk(this.projectionDelta.x,this.prevProjectionDelta.x)||!sk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rc(),this.projectionDelta=rc(),this.projectionDeltaWithTransform=rc()}setAnimationOrigin(o,l=!1){const d=this.snapshot,h=d?d.latestValues:{},f={...this.latestValues},u=rc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Rs(),p=d?d.source:void 0,w=this.layout?this.layout.source:void 0,v=p!==w,x=this.getStack(),y=!x||x.members.length<=1,b=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(bG));this.animationProgress=0;let j;this.mixTargetDelta=N=>{const S=N/1e3;ik(u.x,o.x,S),ik(u.y,o.y,S),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Tu(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),yG(this.relativeTarget,this.relativeTargetOrigin,m,S),j&&rG(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Rs()),gr(j,this.relativeTarget)),v&&(this.animationValues=f,JW(f,h,this.latestValues,S,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,d,h;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(h=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||h.stop(),this.pendingAnimation&&(oo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xs.update(()=>{im.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Kc(0)),this.currentAnimation=GW(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),o.onUpdate&&o.onUpdate(f)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:h,latestValues:f}=o;if(!(!l||!d||!h)){if(this!==o&&this.layout&&h&&qR(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Rs();const u=Pn(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+u;const m=Pn(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+m}gr(l,d),nc(l,f),Eu(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new aG),this.sharedNodes.get(o).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(l=!0),!l)return;const h={};d.z&&vx("z",o,h,this.animationValues);for(let f=0;f<gx.length;f++)vx(`rotate${gx[f]}`,o,h,this.animationValues),vx(`skew${gx[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=am(l==null?void 0:l.pointerEvents)||"",o.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=am(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ao(this.latestValues)&&(o.transform=d?d({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let u=iG(this.projectionDeltaWithTransform,this.treeScale,f);d&&(u=d(f,u)),o.transform=u;const{x:m,y:p}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?o.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in hh){if(f[w]===void 0)continue;const{correct:v,applyTo:x,isCSSVariable:y}=hh[w],b=u==="none"?f[w]:v(f[w],h);if(x){const j=x.length;for(let N=0;N<j;N++)o[x[N]]=b}else y?this.options.visualElement.renderState.vars[w]=b:o[w]=b}this.options.layoutId&&(o.pointerEvents=h===this?am(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(nk),this.root.sharedNodes.clear()}}}function cG(e){e.updateLayout()}function dG(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,o=t.source!==e.layout.source;i==="size"?vr(u=>{const m=o?t.measuredBox[u]:t.layoutBox[u],p=Pn(m);m.min=r[u].min,m.max=m.min+p}):qR(i,t.layoutBox,r)&&vr(u=>{const m=o?t.measuredBox[u]:t.layoutBox[u],p=Pn(r[u]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+p)});const l=rc();Eu(l,r,t.layoutBox);const d=rc();o?Eu(d,e.applyTransform(a,!0),t.measuredBox):Eu(d,r,t.layoutBox);const h=!BR(l);let f=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:m,layout:p}=u;if(m&&p){const w=Rs();Tu(w,t.layoutBox,m.layoutBox);const v=Rs();Tu(v,r,p.layoutBox),zR(w,v)||(f=!0),u.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=w,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function uG(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function hG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function fG(e){e.clearSnapshot()}function nk(e){e.clearMeasurements()}function rk(e){e.isLayoutDirty=!1}function mG(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ak(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function pG(e){e.resolveTargetDelta()}function gG(e){e.calcProjection()}function vG(e){e.resetSkewAndRotation()}function xG(e){e.removeLeadSnapshot()}function ik(e,t,n){e.translate=_s(t.translate,0,n),e.scale=_s(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function ok(e,t,n,r){e.min=_s(t.min,n.min,r),e.max=_s(t.max,n.max,r)}function yG(e,t,n,r){ok(e.x,t.x,n.x,r),ok(e.y,t.y,n.y,r)}function bG(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const wG={duration:.45,ease:[.4,0,.1,1]},lk=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ck=lk("applewebkit/")&&!lk("chrome/")?Math.round:Sr;function dk(e){e.min=ck(e.min),e.max=ck(e.max)}function _G(e){dk(e.x),dk(e.y)}function qR(e,t,n){return e==="position"||e==="preserve-aspect"&&!EW(tk(t),tk(n),.2)}function jG(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const NG=UR({attachResizeListener:(e,t)=>fh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xx={current:void 0},HR=UR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!xx.current){const e=new NG({});e.mount(window),e.setOptions({layoutScroll:!0}),xx.current=e}return xx.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),SG={pan:{Feature:UW},drag:{Feature:VW,ProjectionNode:HR,MeasureLayout:DR}};function uk(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&xs.postRender(()=>i(t,Dh(t)))}class kG extends xo{mount(){const{current:t}=this.node;t&&(this.unmount=Zq(t,(n,r)=>(uk(this.node,r,"Start"),a=>uk(this.node,a,"End"))))}unmount(){}}class CG extends xo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lh(fh(this.node.current,"focus",()=>this.onFocus()),fh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function hk(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&xs.postRender(()=>i(t,Dh(t)))}class EG extends xo{mount(){const{current:t}=this.node;t&&(this.unmount=Qq(t,(n,r)=>(hk(this.node,r,"Start"),(a,{success:i})=>hk(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const l0=new WeakMap,yx=new WeakMap,TG=e=>{const t=l0.get(e.target);t&&t(e)},PG=e=>{e.forEach(TG)};function AG({root:e,...t}){const n=e||document;yx.has(n)||yx.set(n,{});const r=yx.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(PG,{root:e,...t})),r[a]}function OG(e,t,n){const r=AG(t);return l0.set(e,n),r.observe(e),()=>{l0.delete(e),r.unobserve(e)}}const RG={some:0,all:1};class LG extends xo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:RG[a]},l=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:u}=this.node.getProps(),m=h?f:u;m&&m(d)};return OG(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(IG(t,n))&&this.startObserver()}unmount(){}}function IG({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const MG={inView:{Feature:LG},tap:{Feature:EG},focus:{Feature:CG},hover:{Feature:kG}},DG={layout:{ProjectionNode:HR,MeasureLayout:DR}},FG={..._W,...MG,...SG,...DG},vc=FH(FG,XH);let xc=10,c0=!1;const yo=(e,t)=>e.free_delivery?{isFreeDelivery:!0,deliveryFee:0,displayText:"Free Delivery",badgeColor:"bg-green-100 text-green-800"}:e.custom_delivery_fee_enabled&&e.custom_delivery_fee!==null&&e.custom_delivery_fee!==void 0?{isFreeDelivery:!1,deliveryFee:e.custom_delivery_fee,displayText:`${e.custom_delivery_fee} delivery`,badgeColor:"bg-blue-100 text-blue-800"}:{isFreeDelivery:!1,deliveryFee:null,displayText:"Delivery at checkout",badgeColor:"bg-orange-100 text-orange-800"},$G=async e=>{if(!e)try{return await Qm()??10}catch{return 10}if(e.delivery_radius!=null)return Number(e.delivery_radius);if(e.vendor&&e.vendor.delivery_radius!=null)return Number(e.vendor.delivery_radius);if(e.vendor_delivery_radius!=null)return Number(e.vendor_delivery_radius);try{return await Qm()??10}catch{return 10}},mh=e=>e?e.delivery_radius!=null?Number(e.delivery_radius):e.vendor&&e.vendor.delivery_radius!=null?Number(e.vendor.delivery_radius):e.vendor_delivery_radius!=null?Number(e.vendor_delivery_radius):xc:xc,cie=async()=>{if(!c0)try{const e=await fetch("https://ezeyway.com/api/delivery-radius/",{headers:{"ngrok-skip-browser-warning":"true"}});e.ok?(xc=(await e.json()).delivery_radius||10,c0=!0,console.log(" Delivery radius initialized from API:",xc)):console.warn(" Failed to fetch delivery radius, using default:",xc)}catch(e){console.error(" Error fetching delivery radius:",e)}},Qm=async()=>{try{const{vendorService:e}=await Ue(async()=>{const{vendorService:n}=await import("./vendorService-BEK6goEt.js");return{vendorService:n}},[]),t=await e.getGlobalDeliveryRadius();return t!==null&&(xc=t,c0=!0),t}catch(e){return console.error("Error getting global delivery radius:",e),null}};class BG{async getProductReviews(t){try{const n=await fetch(Jo(`/products/${t}/reviews/`));if(!n.ok)throw new Error("Failed to fetch product reviews");return await n.json()}catch(n){return console.error("Error fetching product reviews:",n),{product_id:t,product_name:"",aggregate:{average_rating:0,total_reviews:0,average_quality:0,average_value:0,average_service:0},recent_reviews:[]}}}async getVendorReviews(t){try{const n=await fetch(Jo(`/vendors/${t}/reviews/`));if(!n.ok)throw new Error("Failed to fetch vendor reviews");return await n.json()}catch(n){return console.error("Error fetching vendor reviews:",n),{vendor_id:t,vendor_name:"",aggregate:{average_rating:0,total_reviews:0,average_quality:0,average_value:0,average_service:0},recent_reviews:[]}}}async getOrderReviews(t){try{const n=await fetch(Jo(`/orders/${t}/review/`));if(!n.ok)throw new Error("Failed to fetch order reviews");const r=await n.json();return Array.isArray(r)?r:r.results||[]}catch(n){return console.error("Error fetching order reviews:",n),[]}}}const yi=new BG,yc=async e=>{var t,n;try{const r=await Ae.getUser();if(!r||!((t=r.available_roles)!=null&&t.includes("vendor")))return e;const{response:a,data:i}=await Ve("/vendor-profiles/");if(!a.ok||!((n=i==null?void 0:i.results)!=null&&n.length))return e;const l=i.results[0].id;return e.filter(d=>d.vendor_id!==l)}catch(r){return console.error("Error filtering own products:",r),e}},zG=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3};function VG({onDataLoaded:e}={}){const t=lt();Bn();const{toast:n}=ns(),{addToCartWithAuth:r}=vo(),[a,i]=_.useState([]),[o,l]=_.useState(!0),[d,h]=_.useState(ht.getLocation()),[f,u]=_.useState({}),[m,p]=_.useState(null);_.useEffect(()=>{const j=ht.subscribe(h);if(ht.startTracking(),Qm().then(S=>{console.log(" TRENDING ITEMS - Global delivery radius:",S),p(S)}).catch(S=>{console.warn("Failed to fetch global delivery radius:",S)}),ht.getLocation())w();else{const S=setTimeout(()=>{ht.getLocation()||(console.log(" No location available, fetching products without location filter"),w())},3e3);return()=>{clearTimeout(S),j()}}return j},[]),_.useEffect(()=>{d&&w()},[d]);const w=async()=>{var j;try{l(!0);const N={"ngrok-skip-browser-warning":"true"},S=ht.getLocation(),P=new URLSearchParams({page_size:"50"});S&&(P.append("latitude",S.latitude.toString()),P.append("longitude",S.longitude.toString()));const T=await fetch(`${Qe}search/products/?${P}`,{headers:N});if(!T.ok)throw new Error(`HTTP ${T.status}`);const E=await T.json();console.log(" TRENDING ITEMS - API Response:",{total_results:((j=E.results)==null?void 0:j.length)||0,query_params:Object.fromEntries(P),user_location:S,full_response:E});const I=await yc(E.results||[]);console.log(" TRENDING ITEMS - After filterOwnProducts:",{count:I.length,products:I.map(C=>({id:C.id,name:C.name,vendor_name:C.vendor_name,vendor_latitude:C.vendor_latitude,vendor_longitude:C.vendor_longitude,vendor_delivery_radius:C.vendor_delivery_radius,vendor_online:C.vendor_online}))});const O=x(I);if(console.log(" TRENDING ITEMS - After processProducts:",{count:O.length,products:O.map(C=>({id:C.id,name:C.name,vendor:C.vendor,distance:C.distance,distanceValue:C.distanceValue,deliveryRadius:C.deliveryRadius,vendorOnline:C.vendorOnline,included:C.vendorOnline&&(C.distanceValue===1/0||C.distanceValue<=C.deliveryRadius)}))}),O.length===0&&S){console.log("No products found with location filter, trying without location...");const C=new URLSearchParams({page_size:"50"}),D=await fetch(`${Qe}search/products/?${C}`,{headers:N});if(D.ok){const A=await D.json(),M=await yc(A.results||[]),Z=await x(M);console.log("Products without location filter:",Z),i(Z);const X=Z.map(U=>U.id);v(X);return}}if(O.length===0){console.log("No trending products found, showing first 6 products...");const C=new URLSearchParams({page_size:"6"}),D=await fetch(`${Qe}search/products/?${C}`,{headers:N});if(D.ok){const A=await D.json(),M=await yc(A.results||[]),Z=await x(M);console.log("Fallback products:",Z),i(Z);const X=Z.map(U=>U.id);v(X);return}}i(O);const R=O.map(C=>C.id);v(R)}catch(N){console.error("Error fetching trending items:",N),i([])}finally{l(!1),console.log("TrendingItems fetch completed, calling onDataLoaded"),e==null||e()}},v=async j=>{try{const N=j.map(T=>yi.getProductReviews(T)),P=(await Promise.all(N)).reduce((T,E)=>{var I,O;return T[E.product_id]={rating:((I=E.aggregate)==null?void 0:I.average_rating)||0,total:((O=E.aggregate)==null?void 0:O.total_reviews)||0},T},{});u(T=>({...T,...P}))}catch(N){console.error("Failed to load product reviews:",N)}},x=j=>{const N=ht.getLocation();console.log(" TRENDING ITEMS - processProducts called with:",{total_products:j.length,user_location:N,products_sample:j.slice(0,3).map(T=>({id:T.id,name:T.name,vendor_name:T.vendor_name,vendor_latitude:T.vendor_latitude,vendor_longitude:T.vendor_longitude,vendor_delivery_radius:T.vendor_delivery_radius,vendor_online:T.vendor_online}))});const S=T=>{if(T.reviews&&Array.isArray(T.reviews)&&T.reviews.length>0){const E=T.reviews.map(I=>Number(I.rating??I.stars??I.score??0)).filter(I=>!isNaN(I));if(E.length>0){const I=E.reduce((O,R)=>O+R,0);return Math.max(0,Math.min(5,I/E.length))}}return T.average_rating!=null?Number(T.average_rating):T.rating!=null?Number(T.rating):0};let P=j.map(T=>{var D,A;const E=((D=T.images)==null?void 0:D.find(M=>M.is_primary))||((A=T.images)==null?void 0:A[0]);let I="N/A",O=1/0;N&&T.vendor_latitude&&T.vendor_longitude&&(O=zG(N.latitude,N.longitude,T.vendor_latitude,T.vendor_longitude),I=`${O.toFixed(1)} km`);const R=yo(T,T.vendor_delivery_fee),C=mh(T)??m??1/0;return{id:T.id,name:T.name,vendor:T.vendor_name||"Unknown Vendor",vendor_id:T.vendor_id,distance:I,distanceValue:O,rating:S(T),price:`Rs ${T.price}`,priceValue:parseFloat(T.price),image:(E==null?void 0:E.image_url)||"/placeholder.svg",inStock:T.quantity>0,category:T.category,totalSold:T.total_sold||0,deliveryInfo:R,vendorOnline:T.vendor_online!==!1,deliveryRadius:C,free_delivery:T.free_delivery,custom_delivery_fee_enabled:T.custom_delivery_fee_enabled,custom_delivery_fee:T.custom_delivery_fee}}).filter(T=>{const E=T.vendorOnline,I=T.distanceValue===1/0||T.distanceValue<=T.deliveryRadius;return console.log(` TRENDING ITEMS - Filtering product ${T.id} (${T.name}):`,{vendorOnline:T.vendorOnline,distanceValue:T.distanceValue,deliveryRadius:T.deliveryRadius,withinRadius:I,included:E&&I,reason:E?I?"Included":`Too far (${T.distanceValue}km > ${T.deliveryRadius}km)`:"Vendor offline"}),E&&I});return console.log(" TRENDING ITEMS - After filtering:",{total_filtered:P.length,filtered_products:P.map(T=>({id:T.id,name:T.name,vendor:T.vendor,distance:T.distance,vendorOnline:T.vendorOnline,deliveryRadius:T.deliveryRadius}))}),P.sort((T,E)=>E.totalSold-T.totalSold),P.length>0&&P[0].totalSold===0&&P.sort((T,E)=>E.rating-T.rating),P.slice(0,6)},y=j=>{t(`/product/${j}`)},b=async(j,N)=>{N.stopPropagation();const S=a.find(P=>P.id===j.id);t("/checkout",{state:{directBuy:!0,product:{id:j.id,name:j.name,price:j.price.replace("Rs ",""),quantity:1,vendor_name:j.vendor,vendor_id:S==null?void 0:S.vendor_id,images:[{image_url:j.image}],free_delivery:S==null?void 0:S.free_delivery,custom_delivery_fee_enabled:S==null?void 0:S.custom_delivery_fee_enabled,custom_delivery_fee:S==null?void 0:S.custom_delivery_fee}}})};return o?s.jsxs("section",{className:"px-4 sm:px-6 md:px-8 mb-6 lg:mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-foreground tracking-tight",children:"Trending Now "}),s.jsx(te,{variant:"outline",size:"sm",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},className:"rounded-full hover:bg-[#856043] hover:text-white text-sm",onClick:()=>t("/trending-items"),children:"View All"})]}),s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(As,{className:"h-8 w-8 animate-spin"})})]}):s.jsxs("section",{className:"px-4 sm:px-6 md:px-8 mb-6 lg:mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground tracking-tight",children:"Trending Now "}),s.jsx(te,{variant:"ghost",size:"sm",className:"text-sm text-gray-600 hover:text-gray-800",onClick:()=>t("/trending-items"),children:"View All"})]}),s.jsx("div",{className:"flex gap-3 sm:gap-4 overflow-x-auto custom-scrollbar pb-3 snap-x snap-mandatory",children:a.map((j,N)=>{var S;return s.jsxs(vc.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,delay:N*.08,ease:"easeOut"},whileHover:{scale:1.03,boxShadow:"0 12px 24px rgba(0,0,0,0.15)"},whileTap:{scale:.97},className:"relative min-w-[180px] sm:min-w-[150px] md:min-w-[130px] bg-gradient-to-br from-card/90 to-card rounded-xl p-3 shadow-lg border border-border/20 hover:shadow-xl hover:border-primary/40 transition-all duration-300 cursor-pointer group snap-start",onClick:()=>y(j.id),"aria-label":`View ${j.name} from ${j.vendor}`,children:[s.jsxs(Uv,{children:[s.jsx(qv,{asChild:!0,children:s.jsx("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-full p-1 shadow-md group-hover:animate-bounce",children:s.jsx(YF,{className:"h-3 w-3"})})}),s.jsx(em,{side:"top",className:"text-xs",children:"Hot Item!"})]}),s.jsx("div",{className:"w-full h-20 mb-2 overflow-hidden rounded-md",children:s.jsx("img",{src:j.image,alt:j.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ease-in-out",onError:P=>{const T=P.target;T.src="/placeholder.svg",T.onerror=null},loading:"lazy"})}),s.jsx("h3",{className:"font-semibold text-xs mb-1 text-foreground line-clamp-1",children:j.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-1 truncate",children:j.vendor}),s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(vs,{className:"h-3 w-3 text-yellow-400"}),s.jsx("span",{children:(((S=f[j.id])==null?void 0:S.rating)??j.rating??0).toFixed(1)})]}),s.jsxs(Uv,{children:[s.jsx(qv,{asChild:!0,children:s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{className:"text-xs",children:j.distance})]})}),s.jsx(em,{side:"bottom",className:"text-xs",children:"Distance from you"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-primary text-sm",children:j.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[j.totalSold||0," sold"]})]}),s.jsxs(Uv,{children:[s.jsx(qv,{asChild:!0,children:s.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[s.jsx(Qn,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1 py-0.5 rounded-full ${j.deliveryInfo.isFreeDelivery?"bg-green-100 text-green-700":j.deliveryInfo.deliveryFee===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:j.deliveryInfo.isFreeDelivery?"Free":j.deliveryInfo.deliveryFee===null?"TBD":`Rs ${j.deliveryInfo.deliveryFee}`})]})}),s.jsx(em,{side:"bottom",className:"text-xs",children:j.deliveryInfo.isFreeDelivery?"Free Delivery":j.deliveryInfo.deliveryFee===null?"Delivery fee determined at checkout":`Delivery: Rs ${j.deliveryInfo.deliveryFee}`})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(te,{variant:"outline",size:"sm",className:"w-6 h-6 p-0 border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white",disabled:!j.inStock,onClick:async P=>{if(P.stopPropagation(),!await Ae.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:j.id,quantity:1},path:"/cart",timestamp:Date.now()})),t("/login");return}try{await r(j.id.toString(),1),n({title:"Added to Cart",description:`${j.name} added to your cart`}),t("/cart")}catch(E){console.error("Error adding to cart:",E)}},children:s.jsx(rn,{className:"h-3 w-3"})}),s.jsx(te,{variant:"default",size:"sm",className:"flex-1 h-6 text-[10px] bg-green-600 hover:bg-green-700 text-white",disabled:!j.inStock,onClick:async P=>{if(P.stopPropagation(),!await Ae.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:{id:j.id,name:j.name,price:j.price.replace("Rs ",""),quantity:1,vendor_name:j.vendor,vendor_id:j.vendor_id,images:[{image_url:j.image}],free_delivery:j.free_delivery,custom_delivery_fee_enabled:j.custom_delivery_fee_enabled,custom_delivery_fee:j.custom_delivery_fee},path:"/checkout",timestamp:Date.now()})),t("/login");return}b(j,P)},children:"Buy"})]})]})]},j.id)})})]})}const UG=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3};function qG({onDataLoaded:e}={}){const t=lt();Bn();const{toast:n}=ns(),{addToCartWithAuth:r}=vo(),[a,i]=_.useState([]),[o,l]=_.useState(!0),[d,h]=_.useState(ht.getLocation()),[f,u]=_.useState({}),[m,p]=_.useState(null);_.useEffect(()=>{const j=ht.subscribe(h);if(ht.startTracking(),Qm().then(S=>{console.log(" FEATURED PRODUCTS - Global delivery radius:",S),p(S)}).catch(S=>{console.warn("Failed to fetch global delivery radius:",S)}),ht.getLocation())w();else{const S=setTimeout(()=>{ht.getLocation()||(console.log(" No location available, fetching products without location filter"),w())},3e3);return()=>{clearTimeout(S),j()}}return j},[]),_.useEffect(()=>{d&&w()},[d]);const w=async()=>{var j;try{l(!0);const N={"ngrok-skip-browser-warning":"true"},S=ht.getLocation(),P=new URLSearchParams({page_size:"20"});S&&(P.append("latitude",S.latitude.toString()),P.append("longitude",S.longitude.toString()));const E=await(await fetch(`${Qe}search/products/?${P}`,{headers:N})).json();console.log(" FEATURED PRODUCTS - API Response:",{total_results:((j=E.results)==null?void 0:j.length)||0,query_params:Object.fromEntries(P),user_location:S,full_response:E});const I=await yc(E.results||[]);console.log(" FEATURED PRODUCTS - After filterOwnProducts:",{count:I.length,products:I.map(C=>({id:C.id,name:C.name,vendor_name:C.vendor_name,vendor_latitude:C.vendor_latitude,vendor_longitude:C.vendor_longitude,vendor_delivery_radius:C.vendor_delivery_radius,vendor_online:C.vendor_online,featured:C.featured}))});const O=v(I);console.log(" FEATURED PRODUCTS - After processProducts:",{count:O.length,products:O.map(C=>({id:C.id,name:C.name,vendor:C.vendor,distance:C.distance,distanceValue:C.distanceValue,deliveryRadius:C.deliveryRadius,vendorOnline:C.vendorOnline,featured:C.featured,included:C.vendorOnline&&(C.distanceValue===1/0||C.distanceValue<=C.deliveryRadius)}))}),i(O);const R=O.map(C=>C.id);y(R)}catch(N){console.error("Error fetching featured products:",N)}finally{l(!1),console.log("FeaturedProducts fetch completed, calling onDataLoaded"),e==null||e()}},v=j=>{const N=ht.getLocation();console.log(" FEATURED PRODUCTS - processProducts called with:",{total_products:j.length,user_location:N,products_sample:j.slice(0,3).map(E=>({id:E.id,name:E.name,vendor_name:E.vendor_name,vendor_latitude:E.vendor_latitude,vendor_longitude:E.vendor_longitude,vendor_delivery_radius:E.vendor_delivery_radius,vendor_online:E.vendor_online,featured:E.featured}))});let S=j.filter(E=>E.featured===!0);console.log(" FEATURED PRODUCTS - After featured filter:",{total_featured:S.length,featured_products:S.map(E=>({id:E.id,name:E.name,vendor_name:E.vendor_name,featured:E.featured}))});const P=E=>{if(E.reviews&&Array.isArray(E.reviews)&&E.reviews.length>0){const I=E.reviews.map(O=>Number(O.rating??O.stars??O.score??0)).filter(O=>!isNaN(O));if(I.length>0){const O=I.reduce((R,C)=>R+C,0);return Math.max(0,Math.min(5,O/I.length))}}return E.average_rating!=null?Number(E.average_rating):E.rating!=null?Number(E.rating):0};let T=S.map(E=>{var D,A;const I=((D=E.images)==null?void 0:D.find(M=>M.is_primary))||((A=E.images)==null?void 0:A[0]);let O="N/A",R=1/0;N&&E.vendor_latitude&&E.vendor_longitude&&(R=UG(N.latitude,N.longitude,E.vendor_latitude,E.vendor_longitude),O=`${R.toFixed(1)} km`);const C=yo(E,E.vendor_delivery_fee);return{id:E.id,name:E.name,vendor:E.vendor_name||"Unknown Vendor",vendor_id:E.vendor_id,distance:O,distanceValue:R,rating:P(E),price:`Rs ${E.price}`,priceValue:parseFloat(E.price),image:(I==null?void 0:I.image_url)||"/placeholder-product.jpg",inStock:E.quantity>0,category:E.category,featured:E.featured,totalSold:E.total_sold||0,deliveryInfo:C,free_delivery:E.free_delivery,custom_delivery_fee_enabled:E.custom_delivery_fee_enabled,custom_delivery_fee:E.custom_delivery_fee,vendorOnline:E.vendor_online!==!1,deliveryRadius:mh(E)??m??1/0}}).filter(E=>{const I=E.vendorOnline,O=E.distanceValue===1/0||E.distanceValue<=E.deliveryRadius;return console.log(` FEATURED PRODUCTS - Filtering product ${E.id} (${E.name}):`,{vendorOnline:E.vendorOnline,distanceValue:E.distanceValue,deliveryRadius:E.deliveryRadius,withinRadius:O,included:I&&O,reason:I?O?"Included":`Too far (${E.distanceValue}km > ${E.deliveryRadius}km)`:"Vendor offline"}),I&&O});return console.log(" FEATURED PRODUCTS - After filtering:",{total_filtered:T.length,filtered_products:T.map(E=>({id:E.id,name:E.name,vendor:E.vendor,distance:E.distance,vendorOnline:E.vendorOnline,deliveryRadius:E.deliveryRadius,featured:E.featured}))}),T.sort((E,I)=>I.rating-E.rating),T.slice(0,6)},x=j=>{t(`/product/${j}`)},y=async j=>{try{const N=j.map(T=>yi.getProductReviews(T)),P=(await Promise.all(N)).reduce((T,E)=>{var I,O;return T[E.product_id]={rating:((I=E.aggregate)==null?void 0:I.average_rating)||0,total:((O=E.aggregate)==null?void 0:O.total_reviews)||0},T},{});u(T=>({...T,...P}))}catch(N){console.error("Failed to load product reviews:",N)}},b=async(j,N)=>{N==null||N.stopPropagation();const S=a.find(P=>P.id===j.id);t("/checkout",{state:{directBuy:!0,product:{id:j.id,name:j.name,price:j.price.replace("Rs ",""),quantity:1,vendor_name:j.vendor,vendor_id:S==null?void 0:S.vendor_id,images:[{image_url:j.image}],free_delivery:S==null?void 0:S.free_delivery,custom_delivery_fee_enabled:S==null?void 0:S.custom_delivery_fee_enabled,custom_delivery_fee:S==null?void 0:S.custom_delivery_fee}}})};return o?s.jsxs("section",{className:"px-4 py-3 mb-8 bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h2",{className:"text-xl md:text-2xl font-semibold tracking-tight text-black",children:"Featured Products"})}),s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(As,{className:"h-8 w-8 animate-spin"})})]}):s.jsxs("section",{className:"px-4 py-3 mb-8 bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold tracking-tight text-black",children:"Featured Products"}),s.jsx(te,{variant:"ghost",size:"sm",className:"text-sm text-gray-600 hover:text-gray-800",onClick:()=>t("/featured-items"),children:"View All"})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-3 md:grid md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 md:overflow-visible md:pb-0",children:a.map((j,N)=>{var S,P,T,E;return s.jsxs(vc.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:N*.1,duration:.3},whileHover:{scale:1.02,rotate:.5},className:"relative flex-shrink-0 w-36 md:w-40 rounded-lg bg-white border border-gray-200 hover:border-[#856043] shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-300 overflow-visible group cursor-pointer",onClick:()=>x(j.id),children:[s.jsx(vc.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:N*.1+.2,duration:.2},className:"absolute top-2 left-2 bg-emerald-600 text-white text-xs px-2 py-0.5 rounded-full font-semibold shadow-sm",children:"Featured"}),s.jsx("div",{className:"w-full h-32 overflow-hidden",children:s.jsx("img",{src:j.image,alt:j.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:I=>{I.target.src="/placeholder-product.jpg"}})}),s.jsxs("div",{className:"p-3 flex flex-col justify-between min-h-[11rem]",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-sm text-gray-800 mb-1 line-clamp-2 leading-tight",children:j.name}),s.jsx("p",{className:"text-xs text-gray-600 mb-1 truncate",children:j.vendor})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"space-y-1 mb-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-sm text-[#856043]",children:j.price}),s.jsxs("span",{className:"text-xs font-medium text-green-600",children:[j.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:j.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(vs,{className:"h-3.5 w-3.5 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"font-medium",children:(((S=f[j.id])==null?void 0:S.rating)??j.rating??0).toFixed(1)}),((P=f[j.id])==null?void 0:P.total)!==void 0&&((T=f[j.id])==null?void 0:T.total)>0&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(E=f[j.id])==null?void 0:E.total,")"]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Qn,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] ${j.deliveryInfo.isFreeDelivery?"bg-green-100 text-green-700":j.deliveryInfo.deliveryFee===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:j.deliveryInfo.isFreeDelivery?"Free":j.deliveryInfo.deliveryFee===null?"TBD":`Rs ${j.deliveryInfo.deliveryFee}`})]})]}),s.jsx("div",{className:"flex gap-2",children:j.inStock?s.jsxs(s.Fragment,{children:[s.jsx(te,{variant:"ghost",size:"sm",className:"w-8 h-7 p-0 text-muted-foreground hover:text-[#856043] hover:bg-transparent",onClick:async I=>{if(I.stopPropagation(),!await Ae.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:j.id,quantity:1},path:"/cart",timestamp:Date.now()})),t("/login");return}try{await r(j.id.toString(),1),n({title:"Added to Cart",description:`${j.name} added to your cart`}),t("/cart")}catch(R){console.error("Error adding to cart:",R)}},children:s.jsx(rn,{className:"h-3.5 w-3.5"})}),s.jsx(te,{variant:"default",className:"flex-1 text-xs py-1.5 shadow-sm h-7 bg-green-600 hover:bg-green-700 text-white",onClick:async I=>{if(I.stopPropagation(),!await Ae.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:{id:j.id,name:j.name,price:j.price.replace("Rs ",""),quantity:1,vendor_name:j.vendor,vendor_id:j.vendor_id,images:[{image_url:j.image}],free_delivery:j.free_delivery,custom_delivery_fee_enabled:j.custom_delivery_fee_enabled,custom_delivery_fee:j.custom_delivery_fee},path:"/checkout",timestamp:Date.now()})),t("/login");return}b(j,I)},children:"Buy"})]}):s.jsx(te,{disabled:!0,className:"w-full bg-gray-200 text-gray-500 cursor-not-allowed text-xs py-1.5 shadow-sm h-7",children:"Out of Stock"})})]})]})]},j.id)})}),a.length===0&&!o&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No featured products"}),s.jsx("p",{className:"text-muted-foreground",children:"Featured products will appear here when available"})]})]})}const HG=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3};function WG({onDataLoaded:e}={}){const t=lt();Bn();const{toast:n}=ns(),{addToCartWithAuth:r}=vo(),[a,i]=_.useState([]),[o,l]=_.useState(!0),[d,h]=_.useState(ht.getLocation()),[f,u]=_.useState({});_.useEffect(()=>{const y=ht.subscribe(h);if(ht.startTracking(),ht.getLocation())m();else{const j=setTimeout(()=>{ht.getLocation()||(console.log(" No location available, fetching products without location filter"),m())},3e3);return()=>{clearTimeout(j),y()}}return y},[]),_.useEffect(()=>{d&&m()},[d]);const m=async()=>{var y;try{l(!0);const b={"ngrok-skip-browser-warning":"true"},j=ht.getLocation(),N=new URLSearchParams({page_size:"40"});j&&(N.append("latitude",j.latitude.toString()),N.append("longitude",j.longitude.toString()));const P=await(await fetch(`${Qe}search/products/?${N}`,{headers:b})).json();console.log(" LATEST PRODUCTS - API Response:",{total_results:((y=P.results)==null?void 0:y.length)||0,query_params:Object.fromEntries(N),user_location:j,full_response:P});const T=await yc(P.results||[]);console.log(" LATEST PRODUCTS - After filterOwnProducts:",{count:T.length,products:T.map(O=>({id:O.id,name:O.name,vendor_name:O.vendor_name,vendor_latitude:O.vendor_latitude,vendor_longitude:O.vendor_longitude,vendor_delivery_radius:O.vendor_delivery_radius,vendor_online:O.vendor_online,created_at:O.created_at}))});const E=p(T);console.log(" LATEST PRODUCTS - After processProducts:",{count:E.length,products:E.map(O=>({id:O.id,name:O.name,vendor:O.vendor,distance:O.distance,distanceValue:O.distanceValue,deliveryRadius:O.deliveryRadius,vendorOnline:O.vendorOnline,createdAt:O.createdAt,included:O.vendorOnline&&(O.distanceValue===1/0||O.distanceValue<=O.deliveryRadius)}))}),i(E);const I=E.map(O=>O.id);v(I)}catch(b){console.error("Error fetching latest products:",b)}finally{l(!1),console.log("LatestProducts fetch completed, calling onDataLoaded"),e==null||e()}},p=y=>{const b=ht.getLocation();console.log(" LATEST PRODUCTS - processProducts called with:",{total_products:y.length,user_location:b,products_sample:y.slice(0,3).map(S=>({id:S.id,name:S.name,vendor_name:S.vendor_name,vendor_latitude:S.vendor_latitude,vendor_longitude:S.vendor_longitude,vendor_delivery_radius:S.vendor_delivery_radius,vendor_online:S.vendor_online,created_at:S.created_at}))});const j=S=>{if(S.reviews&&Array.isArray(S.reviews)&&S.reviews.length>0){const P=S.reviews.map(T=>Number(T.rating??T.stars??T.score??0)).filter(T=>!isNaN(T));if(P.length>0){const T=P.reduce((E,I)=>E+I,0);return Math.max(0,Math.min(5,T/P.length))}}return S.average_rating!=null?Number(S.average_rating):S.rating!=null?Number(S.rating):0};let N=y.map(S=>{var O,R;const P=((O=S.images)==null?void 0:O.find(C=>C.is_primary))||((R=S.images)==null?void 0:R[0]);let T="N/A",E=1/0;b&&S.vendor_latitude&&S.vendor_longitude&&(E=HG(b.latitude,b.longitude,S.vendor_latitude,S.vendor_longitude),T=`${E.toFixed(1)} km`);const I=yo(S,S.vendor_delivery_fee);return{id:S.id,name:S.name,vendor:S.vendor_name||"Unknown Vendor",vendor_id:S.vendor_id,distance:T,distanceValue:E,rating:j(S),price:`Rs ${S.price}`,priceValue:parseFloat(S.price),image:(P==null?void 0:P.image_url)||"/placeholder-product.jpg",inStock:S.quantity>0,category:S.category,totalSold:S.total_sold||0,deliveryInfo:I,createdAt:S.created_at,vendorOnline:S.vendor_online!==!1,deliveryRadius:mh(S)??1/0,free_delivery:S.free_delivery,custom_delivery_fee_enabled:S.custom_delivery_fee_enabled,custom_delivery_fee:S.custom_delivery_fee}}).filter(S=>{const P=S.vendorOnline,T=S.distanceValue===1/0||S.distanceValue<=S.deliveryRadius;return console.log(` LATEST PRODUCTS - Filtering product ${S.id} (${S.name}):`,{vendorOnline:S.vendorOnline,distanceValue:S.distanceValue,deliveryRadius:S.deliveryRadius,withinRadius:T,included:P&&T,reason:P?T?"Included":`Too far (${S.distanceValue}km > ${S.deliveryRadius}km)`:"Vendor offline"}),P&&T});return console.log(" LATEST PRODUCTS - After filtering:",{total_filtered:N.length,filtered_products:N.map(S=>({id:S.id,name:S.name,vendor:S.vendor,distance:S.distance,vendorOnline:S.vendorOnline,deliveryRadius:S.deliveryRadius,createdAt:S.createdAt}))}),N.sort((S,P)=>new Date(P.createdAt).getTime()-new Date(S.createdAt).getTime()),N.slice(0,40)},w=y=>{t(`/product/${y}`)},v=async y=>{try{const b=y.map(S=>yi.getProductReviews(S)),N=(await Promise.all(b)).reduce((S,P)=>{var T,E;return S[P.product_id]={rating:((T=P.aggregate)==null?void 0:T.average_rating)||0,total:((E=P.aggregate)==null?void 0:E.total_reviews)||0},S},{});u(S=>({...S,...N}))}catch(b){console.error("Failed to load product reviews:",b)}},x=async(y,b)=>{b.stopPropagation();try{await r(y.id.toString(),1),n({title:"Added to Cart",description:`${y.name} added to your cart`})}catch(j){console.error("Error adding to cart:",j)}};return o?s.jsxs("section",{className:"px-4 py-3 mb-8",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h2",{className:"text-lg font-semibold text-black",children:"Latest Products"})}),s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(As,{className:"h-8 w-8 animate-spin"})})]}):s.jsxs("section",{className:"px-4 py-3 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-black",children:"Latest Products"}),s.jsx(te,{variant:"ghost",size:"sm",className:"text-sm text-gray-600 hover:text-gray-800",onClick:()=>t("/latest-products"),children:"View All"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 lg:grid-cols-8 gap-2",children:a.map(y=>{var b;return s.jsxs("div",{className:"bg-white rounded-lg p-2 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>w(y.id),children:[s.jsx("div",{className:"w-full aspect-square overflow-hidden rounded-lg mb-2",children:s.jsx("img",{src:y.image,alt:y.name,className:"w-full h-full object-cover",onError:j=>{j.target.src="/placeholder-product.jpg"}})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-xs text-gray-900 line-clamp-2 mb-1",children:y.name}),s.jsx("p",{className:"text-[10px] text-gray-600 mb-1 truncate",children:y.vendor}),s.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[s.jsx(vs,{className:"h-2 w-2 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:(((b=f[y.id])==null?void 0:b.rating)??y.rating??0).toFixed(1)})]}),s.jsxs("span",{className:"text-green-600 font-medium",children:[y.totalSold," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[s.jsx(es,{className:"h-2 w-2"}),s.jsx("span",{className:"font-medium",children:y.distance})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-xs text-green-600",children:y.price}),s.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[s.jsx(Qn,{className:"h-3 w-3 text-gray-400"}),s.jsx("span",{className:`text-[10px] px-1 py-0.5 rounded-full ${y.deliveryInfo.isFreeDelivery?"bg-green-100 text-green-700":y.deliveryInfo.deliveryFee===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:y.deliveryInfo.isFreeDelivery?"Free":y.deliveryInfo.deliveryFee===null?"TBD":`Rs ${y.deliveryInfo.deliveryFee}`})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(te,{size:"sm",variant:"outline",className:"w-6 h-6 p-0 border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white",disabled:!y.inStock,onClick:j=>x(y,j),children:s.jsx(rn,{className:"h-2 w-2"})}),s.jsx(te,{size:"sm",className:"flex-1 h-6 text-[10px] bg-green-600 hover:bg-green-700 text-white",disabled:!y.inStock,onClick:j=>{j.stopPropagation(),t("/checkout",{state:{directBuy:!0,product:{id:y.id,name:y.name,price:y.price.replace("Rs ",""),quantity:1,vendor_name:y.vendor,vendor_id:y.vendor_id,images:[{image_url:y.image}],free_delivery:y.free_delivery,custom_delivery_fee_enabled:y.custom_delivery_fee_enabled,custom_delivery_fee:y.custom_delivery_fee}}})},children:"Buy"})]})]})]})]},y.id)})}),a.length===0&&!o&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No products yet"}),s.jsx("p",{className:"text-gray-600",children:"Latest products will appear here"})]})]})}const GG=e=>[{icon:ew,label:"Home",id:"home",path:"/home"},{icon:qt,label:"Product",id:"search",path:"/search"},{icon:rn,label:"Cart",id:"cart",path:"/cart",badge:e>0?e:void 0},{icon:KF,label:"Orders",id:"orders",path:"/orders"},{icon:Jr,label:"Profile",id:"profile",path:"/profile"}];function Nn(){const[e,t]=_.useState("home"),n=lt(),r=Fn(),{cart:a}=Bn(),i=GG((a==null?void 0:a.total_items)||0);_.useEffect(()=>{const l=r.pathname,d=i.find(h=>h.path===l);d&&t(d.id)},[r.pathname]);const o=(l,d)=>{t(l),n(d)};return s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-200/50 z-50 shadow-[0_-2px_8px_rgba(0,0,0,0.05)]",children:[s.jsx("div",{className:"flex justify-around items-center h-20 md:h-14 max-w-lg mx-auto py-2 md:py-1",children:i.map(l=>{const d=e===l.id;return s.jsxs("button",{onClick:()=>o(l.id,l.path),className:`relative flex flex-col items-center justify-center p-4 md:p-2 transition-all duration-300 ease-in-out group ${d?"text-black":"text-gray-500 hover:text-black/80"}`,children:[s.jsxs("div",{className:"relative flex items-center justify-center",children:[s.jsx(l.icon,{className:`h-6 w-6 md:h-5 md:w-5 transition-all duration-300 ease-in-out ${d?"scale-110 drop-shadow-[0_0_6px_rgba(0,0,0,0.2)]":"group-hover:scale-105 group-hover:drop-shadow-[0_0_4px_rgba(0,0,0,0.1)]"}`}),l.badge&&s.jsx("span",{className:"absolute -top-2 -right-3 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold animate-bounce",children:l.badge})]}),s.jsx("span",{className:"text-xs font-semibold tracking-wide mt-1.5 font-sans",children:l.label}),d&&s.jsx("div",{className:"absolute bottom-0 w-10 h-1 bg-black rounded-full shadow-[0_0_6px_rgba(0,0,0,0.3)] animate-scale-in"}),s.jsx("div",{className:`absolute inset-0 rounded-full bg-black/5 transition-all duration-300 ${d?"opacity-10 scale-105":"opacity-0 group-hover:opacity-10 group-hover:scale-100"}`})]},l.id)})}),s.jsx("style",{children:`
        .animate-scale-in {
          animation: scale-in 0.3s ease-in-out;
        }
        @keyframes scale-in {
          from {
            transform: scaleX(0);
          }
          to {
            transform: scaleX(1);
          }
        }
        .animate-bounce {
          animation: bounce 1.8s ease-in-out infinite;
        }
        @keyframes bounce {
          0%, 100% {
            transform: translateY(-20%);
            animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
          }
          50% {
            transform: translateY(0);
            animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
          }
        }
      `})]})}function KG(){const e=lt();return s.jsx("footer",{className:"bg-gray-900 text-white py-8 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Download Our App"}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsxs(te,{variant:"outline",className:"bg-black text-white border-gray-600 hover:bg-gray-800 flex items-center gap-2",onClick:()=>window.open("#","_blank"),children:[s.jsx(a1,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-xs",children:"Download on"}),s.jsx("div",{className:"text-sm font-semibold",children:"Google Play"})]})]}),s.jsxs(te,{variant:"outline",className:"bg-black text-white border-gray-600 hover:bg-gray-800 flex items-center gap-2",onClick:()=>window.open("#","_blank"),children:[s.jsx(a1,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-xs",children:"Download on"}),s.jsx("div",{className:"text-sm font-semibold",children:"App Store"})]})]})]})]}),s.jsx("div",{className:"flex justify-center mb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:"font-semibold mb-3",children:"Quick Links"}),s.jsx("ul",{className:"space-y-2 text-sm text-gray-400",children:s.jsx("li",{children:s.jsxs("button",{onClick:()=>e("/privacy-policy"),className:"hover:text-white flex items-center gap-2 justify-center cursor-pointer",children:[s.jsx(er,{className:"h-3 w-3"}),"Privacy Policy"]})})})]})}),s.jsx("div",{className:"border-t border-gray-800 pt-4 text-center text-sm text-gray-400",children:s.jsx("p",{children:" 2024 Ezeyway. All rights reserved."})})]})})}function p_(){const e=lt(),[t]=ng(),[n,r]=_.useState(!1),[a,i]=_.useState([]),[o,l]=_.useState(""),[d,h]=_.useState(!1),[f,u]=_.useState(!1),[m,p]=_.useState(null),[w,v]=_.useState(null),x=_.useRef(null),y=()=>{var P;(P=x.current)==null||P.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{y()},[a]),_.useEffect(()=>{b();const P=t.get("support_message");P&&(l(decodeURIComponent(P)),r(!0))},[t]),_.useEffect(()=>{n&&f&&j()},[n,f]);const b=async()=>{const P=await Ae.isAuthenticated();if(u(P),P)try{if(localStorage.getItem("token")){const{response:E,data:I}=await Ve("/profile/");E.ok&&I&&v(I.id)}}catch(T){console.error("Failed to get user profile:",T)}},j=async()=>{try{const{response:P,data:T}=await Ve("/messaging/conversations/");if(P.ok&&(T!=null&&T.results)){const E=T.results.find(I=>{var O;return(O=I.participants)==null?void 0:O.some(R=>R.username==="ezeywaya"||R.email==="ezeywaya@gmail.com")});if(E){p(E.id);const{response:I,data:O}=await Ve(`/messaging/conversations/${E.id}/messages/`);I.ok&&(O!=null&&O.results)&&i(O.results.reverse())}}}catch(P){console.error("Failed to load messages:",P)}},N=async()=>{if(o.trim()){if(!f){e("/login?redirect="+encodeURIComponent(window.location.pathname));return}h(!0);try{let P=m;if(P)await Ve("/messaging/messages/send/",{method:"POST",body:JSON.stringify({conversation_id:P,content:o.trim(),message_type:"text"})});else{const{response:E,data:I}=await Ve("/messaging/conversations/create/",{method:"POST",body:JSON.stringify({message:o.trim()})});E.ok&&I&&(P=I.conversation_id,p(P))}const T={id:"current_user",user_type:"customer"};i(E=>[...E,{id:Date.now(),content:o.trim(),sender:T,created_at:new Date().toISOString()}]),l(""),setTimeout(()=>j(),1e3)}catch(P){console.error("Failed to send message:",P)}finally{h(!1)}}},S=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),N())};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed bottom-24 right-4 z-50",children:s.jsx(te,{onClick:()=>{if(!f){e("/login?redirect="+encodeURIComponent(window.location.pathname));return}r(!n)},className:"w-10 h-10 rounded-full bg-yellow-500 hover:bg-yellow-600 shadow-lg border-2 border-black",children:n?s.jsx(sn,{className:"h-4 w-4 text-black"}):s.jsx(Xr,{className:"h-4 w-4 text-black"})})}),n&&s.jsxs("div",{className:"fixed bottom-32 right-4 w-72 h-[500px] bg-white rounded-lg shadow-xl border-2 border-black z-50 flex flex-col",children:[s.jsxs("div",{className:"bg-yellow-500 text-black p-3 rounded-t-lg border-2 border-black border-b-0",children:[s.jsx("h3",{className:"font-semibold",children:"Chat with Support"}),s.jsx("p",{className:"text-xs opacity-75",children:"EzeyWay Customer Service"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[f?a.length===0?s.jsxs("div",{className:"text-center text-gray-500 text-sm mt-8",children:[s.jsx(Xr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"Start a conversation with our support team"})]}):a.map(P=>{var E,I;const T=((E=P.sender)==null?void 0:E.id)===w||((I=P.sender)==null?void 0:I.id)==="current_user";return s.jsx("div",{className:`flex ${T?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`max-w-xs px-3 py-2 rounded-lg text-sm border ${T?"bg-yellow-500 text-black border-black":"bg-gray-100 text-gray-800 border-gray-300"}`,children:P.content||P.message})},P.id)}):s.jsxs("div",{className:"text-center text-gray-500 text-sm mt-8",children:[s.jsx(Xr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"mb-4",children:"Sign in to chat with support"}),s.jsx(te,{size:"sm",className:"bg-yellow-500 hover:bg-yellow-600 text-black border border-black",onClick:()=>e("/login?redirect="+encodeURIComponent(window.location.pathname)),children:"Sign In"})]}),s.jsx("div",{ref:x})]}),f&&s.jsx("div",{className:"p-3 border-t",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("textarea",{value:o,onChange:P=>l(P.target.value),onKeyPress:S,placeholder:"Type your message...",className:"w-[85%] resize-none border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent h-[100px] overflow-y-auto",disabled:d,rows:5}),s.jsxs("div",{className:"flex flex-col gap-1 w-[15%]",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",className:"hidden",id:"chat-file-upload"}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>document.getElementById("chat-file-upload").click(),className:"w-full h-8 p-0 text-base",children:""}),s.jsx(te,{onClick:N,disabled:!o.trim()||d,size:"sm",className:"bg-yellow-500 hover:bg-yellow-600 text-black border border-black w-full h-8 p-0",children:s.jsx(zp,{className:"h-3 w-3"})})]})]})})]})]})}const om=go("App",{web:()=>Ue(()=>import("./web-CeQcK9kt.js"),[]).then(e=>new e.AppWeb)}),d0=Object.freeze(Object.defineProperty({__proto__:null,App:om},Symbol.toStringTag,{value:"Module"}));class ZG{static isNative(){return gt.isNativePlatform()}static getPlatform(){return gt.getPlatform()}static async setupAppStateListener(t){this.isNative()&&om.addListener("appStateChange",({isActive:n})=>{t(n)})}static async setupBackButtonHandler(t){this.isNative()&&om.addListener("backButton",t)}static removeAllListeners(){this.isNative()&&om.removeAllListeners()}}const fk=()=>{const{setHomeDataLoaded:e}=Qz(),[t,n]=_.useState(!1),[r,a]=_.useState(!1),[i,o]=_.useState(!1);return console.log("Index component rendered"),_.useEffect(()=>{console.log("useEffect triggered - checking loading states:",{trendingLoaded:t,featuredLoaded:r,latestLoaded:i}),t&&r&&i?(console.log("All components loaded, setting home data as loaded"),e(!0)):console.log("Not all components loaded yet")},[t,r,i,e]),_.useEffect(()=>{console.log("Index page - Loading states:",{trendingLoaded:t,featuredLoaded:r,latestLoaded:i})},[t,r,i]),console.log("Index component about to return JSX"),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[s.jsx(Q9,{}),s.jsx(tU,{}),s.jsx(sU,{}),s.jsx(oU,{}),s.jsx(VG,{onDataLoaded:()=>{console.log("TrendingItems onDataLoaded callback called"),n(!0)}}),s.jsx(qG,{onDataLoaded:()=>{console.log("FeaturedProducts onDataLoaded callback called"),a(!0)}}),s.jsx(WG,{onDataLoaded:()=>{console.log("LatestProducts onDataLoaded callback called"),o(!0)}}),!ZG.isNative()&&s.jsx(KG,{}),s.jsx(p_,{}),s.jsx(Nn,{})]})})},Qt=e=>{if(!e)return"/placeholder-product.jpg";if(e.includes("ngrok-free.app")){const r=new URL(e);return r.searchParams.set("ngrok-skip-browser-warning","true"),r.toString()}if(e.startsWith("/media/")||e.startsWith("media/")){const r=`${an.BASE_URL}${e.startsWith("/")?e:`/${e}`}`,a=new URL(r);return a.searchParams.set("ngrok-skip-browser-warning","true"),a.toString()}if(e.startsWith("http"))return e;const t=`${an.BASE_URL}/media/${e}`,n=new URL(t);return n.searchParams.set("ngrok-skip-browser-warning","true"),n.toString()};function YG(){var ie,J,le,ye,ke,Ne,_e,ne,Ce,ve,oe,de,Q,ae,ue,re;const e=lt(),{id:t}=sg();Bn();const{toast:n}=ns(),{addToCartWithAuth:r,buyNowWithAuth:a}=vo(),[i,o]=_.useState(1),[l,d]=_.useState(!1),[h,f]=_.useState(!1),[u,m]=_.useState(null),[p,w]=_.useState(!0),[v,x]=_.useState(""),[y,b]=_.useState(0),[j,N]=_.useState([]),[S,P]=_.useState({}),[T,E]=_.useState([]),[I,O]=_.useState(!1);_.useEffect(()=>(t&&B(),ht.subscribe(C)),[t]);const[R,C]=_.useState(ht.getLocation());_.useEffect(()=>{u&&D()},[u]);const D=async()=>{var ce;if(u)try{const fe=await fetch(`${Qe}search/products/?page_size=50`,{headers:{"ngrok-skip-browser-warning":"true"}});if(fe.ok){const me=((ce=(await fe.json()).results)==null?void 0:ce.filter(Se=>Se.id!==u.id&&Se.category===u.category&&Se.quantity>0))||[],be=await yc(me),Te=A(be);N(Te.slice(0,8))}}catch(fe){console.error("Error fetching related products:",fe)}},A=ce=>{const fe=ht.getLocation(),ge=10;return ce.map(me=>{var Ie,se;const be=((Ie=me.images)==null?void 0:Ie.find(we=>we.is_primary))||((se=me.images)==null?void 0:se[0]);let Te="N/A",Se=1/0;return fe&&me.vendor_latitude&&me.vendor_longitude&&(Se=M(fe.latitude,fe.longitude,me.vendor_latitude,me.vendor_longitude),Te=`${Se.toFixed(1)} km`),{id:me.id,name:me.name,vendor_name:me.vendor_name,price:`Rs ${me.price}`,image:(be==null?void 0:be.image_url)||"/placeholder-product.jpg",inStock:me.quantity>0,totalSold:me.total_sold||0,distance:Te,distanceValue:Se,vendorOnline:me.vendor_online!==!1,deliveryRadius:me.delivery_radius||ge}}).filter(me=>me.vendorOnline&&(me.distanceValue===1/0||me.distanceValue<=me.deliveryRadius)).sort((me,be)=>me.distanceValue-be.distanceValue)},M=(ce,fe,ge,me)=>{const Te=(ge-ce)*Math.PI/180,Se=(me-fe)*Math.PI/180,Ie=Math.sin(Te/2)*Math.sin(Te/2)+Math.cos(ce*Math.PI/180)*Math.cos(ge*Math.PI/180)*Math.sin(Se/2)*Math.sin(Se/2);return 6371*(2*Math.atan2(Math.sqrt(Ie),Math.sqrt(1-Ie)))},Z=async ce=>{try{const fe=await yi.getProductReviews(ce);P(ge=>{var me,be;return{...ge,[ce]:{rating:((me=fe.aggregate)==null?void 0:me.average_rating)||0,total:((be=fe.aggregate)==null?void 0:be.total_reviews)||0}}}),E(fe.recent_reviews||[])}catch(fe){console.error("Failed to load product reviews:",fe),E([])}},X=ce=>{var Pe,Me,Le,He;const fe=((Pe=ce.images)==null?void 0:Pe.find(_t=>_t.is_primary))||((Me=ce.images)==null?void 0:Me[0]),ge=fe?Qt(fe.image_url):"/ezy-icon.svg",me=document.getElementById("og-title"),be=document.getElementById("og-description"),Te=document.getElementById("og-image"),Se=document.getElementById("og-url");me&&(me.content=`${ce.name} - Rs ${ce.price} | ezeyway`),be&&(be.content=`${ce.short_description||((Le=ce.description)==null?void 0:Le.substring(0,150))+"..."} | ${ce.quantity>0?`In Stock (${ce.quantity} available)`:"Out of Stock"} | Same day delivery in Kathmandu Valley`),Te&&(Te.content=ge),Se&&(Se.content=window.location.href);const Ie=document.getElementById("twitter-title"),se=document.getElementById("twitter-description"),we=document.getElementById("twitter-image");Ie&&(Ie.content=`${ce.name} - Rs ${ce.price} | ezeyway`),se&&(se.content=`${ce.short_description||((He=ce.description)==null?void 0:He.substring(0,150))+"..."} | ${ce.quantity>0?`In Stock (${ce.quantity} available)`:"Out of Stock"}`),we&&(we.content=ge),document.title=`${ce.name} - Rs ${ce.price} | ezeyway`},U=ce=>{e(`/product/${ce}`)},F=async(ce,fe)=>{fe.stopPropagation();try{await r(ce.toString(),1)}catch(ge){console.error("Error adding to cart:",ge)}},B=async()=>{var ce,fe;try{w(!0);const ge=await fetch(`${Qe}search/products/?page_size=1000`,{headers:{"ngrok-skip-browser-warning":"true"}});if(!ge.ok)throw new Error("Failed to fetch products");const be=(ce=(await ge.json()).results)==null?void 0:ce.find(Se=>Se.id===parseInt(t));if(!be)throw new Error("Product not found");m(be),X(be),Z(be.id);const Te=await Ae.getToken();if(Te)try{const Se=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${Te}`,"ngrok-skip-browser-warning":"true"}});if(Se.ok){const se=(fe=(await Se.json()).results)==null?void 0:fe.some(we=>we.product.id===be.id);d(se||!1)}}catch(Se){console.log("Could not fetch favorites:",Se)}}catch(ge){console.error("Error fetching product:",ge),x("Failed to load product details")}finally{w(!1)}},z=ce=>{o(Math.max(1,i+ce))},H=async()=>{if(u){f(!0);try{await r(u.id.toString(),i),n({title:"Added to Cart",description:`${u.name} added to your cart`})}catch(ce){console.error("Error adding to cart:",ce),n({title:"Error",description:"Failed to add product to cart",variant:"destructive"})}finally{f(!1)}}},q=async()=>{if(!u)return;console.log("ProductDetail - Original product data:",u);const ce={id:u.id,name:u.name,price:u.price,quantity:i,vendor_name:u.vendor_name,vendor_id:u.vendor_id,images:u.images,free_delivery:u.free_delivery,custom_delivery_fee_enabled:u.custom_delivery_fee_enabled,custom_delivery_fee:u.custom_delivery_fee,dynamic_fields:u.dynamic_fields||{}};console.log("ProductDetail - Prepared product data for buy now:",ce),await a(ce)},W=async()=>{if(!u)return;const ce=await Ae.getToken();if(!ce){localStorage.setItem("pendingAction",JSON.stringify({type:"toggleFavorite",data:{productId:u.id},path:"/wishlist",timestamp:Date.now()})),e("/login");return}try{const fe=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${ce}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:u.id})});if(!fe.ok)throw new Error("Failed to toggle favorite");const ge=await fe.json();d(ge.is_favorite),n({title:ge.is_favorite?"Added to Favorites":"Removed from Favorites",description:ge.message}),ge.is_favorite&&e("/wishlist")}catch(fe){console.error("Error toggling favorite:",fe),n({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},Y=async()=>{var me,be,Te;if(!u)return;const ce=((me=u.images)==null?void 0:me.find(Se=>Se.is_primary))||((be=u.images)==null?void 0:be[0]);ce&&Qt(ce.image_url);const fe=`${u.name}

Price: Rs ${u.price}
${u.quantity>0?` In Stock (${u.quantity} available)`:" Out of Stock"}

${u.short_description||((Te=u.description)==null?void 0:Te.substring(0,150))+"..."}

Shop now at ezeyway - Same day delivery in Kathmandu Valley!`,ge={title:`${u.name} - Rs ${u.price} | ezeyway`,text:fe,url:window.location.href};try{if(navigator.share)await navigator.share(ge);else{const Se=`${fe}

${window.location.href}`;await navigator.clipboard.writeText(Se),n({title:"Link Copied",description:"Product details copied to clipboard for sharing"})}}catch(Se){console.error("Error sharing:",Se);try{await navigator.clipboard.writeText(window.location.href),n({title:"Link Copied",description:"Product link copied to clipboard"})}catch{n({title:"Error",description:"Failed to share product",variant:"destructive"})}}};if(p)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(As,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading product details..."})]})});if(v||!u)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:v||"Product not found"}),s.jsx(te,{onClick:()=>e(-1),children:"Go Back"})]})});const V=((ie=u.images)==null?void 0:ie.find(ce=>ce.is_primary))||((J=u.images)==null?void 0:J[0]),G=((le=u.images)==null?void 0:le[y])||V;return s.jsxs(s.Fragment,{children:[s.jsxs("title",{children:[u.name," - Rs ",u.price," | ezeyway Kathmandu Valley"]}),s.jsx("meta",{name:"description",content:`${u.name} - Rs ${u.price}. ${u.short_description||((ye=u.description)==null?void 0:ye.substring(0,150))+"..."} ${u.quantity>0?`In Stock (${u.quantity} available)`:"Out of Stock"}. Same day delivery in Kathmandu Valley. Shop at ${u.vendor_name}.`}),s.jsx("meta",{name:"keywords",content:`${u.name}, ${u.category}, ${u.vendor_name}, Kathmandu delivery, same day delivery Nepal, ${((ke=u.tags)==null?void 0:ke.join(", "))||""}, buy ${u.name} online, ${u.name} price Nepal, ${u.name} Kathmandu`}),s.jsx("link",{rel:"canonical",href:`https://ezeyway.com/product/${u.id}`}),s.jsx("meta",{property:"og:title",content:`${u.name} - Rs ${u.price} | ezeyway`}),s.jsx("meta",{property:"og:description",content:`${u.short_description||((Ne=u.description)==null?void 0:Ne.substring(0,150))+"..."}. ${u.quantity>0?`In Stock (${u.quantity} available)`:"Out of Stock"}. Same day delivery in Kathmandu Valley.`}),s.jsx("meta",{property:"og:image",content:V?Qt(V.image_url):"https://ezeyway.com/ezy-icon.svg"}),s.jsx("meta",{property:"og:url",content:`https://ezeyway.com/product/${u.id}`}),s.jsx("meta",{property:"og:type",content:"product"}),s.jsx("meta",{property:"og:site_name",content:"ezeyway"}),s.jsx("meta",{property:"product:price:amount",content:u.price}),s.jsx("meta",{property:"product:price:currency",content:"NPR"}),s.jsx("meta",{property:"product:availability",content:u.quantity>0?"in stock":"out of stock"}),s.jsx("meta",{property:"product:category",content:u.category}),s.jsx("meta",{property:"product:brand",content:u.vendor_name}),s.jsx("meta",{name:"twitter:title",content:`${u.name} - Rs ${u.price} | ezeyway`}),s.jsx("meta",{name:"twitter:description",content:`${u.short_description||((_e=u.description)==null?void 0:_e.substring(0,150))+"..."}. Same day delivery in Kathmandu Valley.`}),s.jsx("meta",{name:"twitter:image",content:V?Qt(V.image_url):"https://ezeyway.com/ezy-icon.svg"}),s.jsx("meta",{name:"robots",content:"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"}),s.jsx("meta",{name:"geo.region",content:"NP"}),s.jsx("meta",{name:"geo.placename",content:"Kathmandu Valley"}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Product",name:u.name,description:u.short_description||u.description,image:((ne=u.images)==null?void 0:ne.map(ce=>Qt(ce.image_url)))||[],sku:u.id.toString(),brand:{"@type":"Brand",name:u.vendor_name},category:u.category,offers:{"@type":"Offer",price:u.price,priceCurrency:"NPR",availability:u.quantity>0?"https://schema.org/InStock":"https://schema.org/OutOfStock",seller:{"@type":"Organization",name:u.vendor_name},priceValidUntil:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]},aggregateRating:((Ce=S[u.id])==null?void 0:Ce.total)>0?{"@type":"AggregateRating",ratingValue:((ve=S[u.id])==null?void 0:ve.rating)||0,reviewCount:((oe=S[u.id])==null?void 0:oe.total)||0,bestRating:5,worstRating:1}:void 0,additionalProperty:u.dynamic_fields?Object.entries(u.dynamic_fields).map(([ce,fe])=>({"@type":"PropertyValue",name:ce,value:Array.isArray(fe)?fe.join(", "):String(fe)})):[],areaServed:{"@type":"GeoCircle",geoMidpoint:{"@type":"GeoCoordinates",latitude:"27.7172",longitude:"85.3240"},geoRadius:"50000"}})}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://ezeyway.com"},{"@type":"ListItem",position:2,name:u.category,item:`https://ezeyway.com/category/${u.category.toLowerCase()}`},{"@type":"ListItem",position:3,name:u.name,item:`https://ezeyway.com/product/${u.id}`}]})}),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full hover:bg-gray-100",children:s.jsx(Ht,{className:"h-5 w-5 text-gray-800"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{variant:"ghost",size:"icon",onClick:W,className:"rounded-full hover:bg-gray-100",children:s.jsx(dr,{className:`h-5 w-5 ${l?"fill-red-500 text-red-500":"text-gray-800"}`})}),s.jsx(te,{variant:"ghost",size:"icon",onClick:Y,className:"rounded-full hover:bg-gray-100",children:s.jsx(e6,{className:"h-5 w-5 text-gray-800"})})]})]})}),s.jsxs("div",{className:"relative bg-white p-4",children:[s.jsxs("div",{className:"md:hidden",children:[s.jsx("div",{className:"aspect-square max-w-md mx-auto mb-4 border-t-2 border-b-2 border-gray-100",children:s.jsx("img",{src:Qt(G==null?void 0:G.image_url),alt:u.name,className:"w-full h-full object-cover",onError:ce=>{const fe=ce.target;fe.src="/placeholder-product.jpg",fe.onerror=null},loading:"lazy"})}),u.images&&u.images.length>1&&s.jsx("div",{className:"border-t border-b border-gray-200 py-3",children:s.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-md mx-auto",children:u.images.slice(0,4).map((ce,fe)=>s.jsx("button",{onClick:()=>b(fe),className:`aspect-square overflow-hidden border-2 transition-all duration-200 ${y===fe?"border-blue-500 shadow-md scale-105":"border-gray-300 hover:border-gray-400"}`,children:s.jsx("img",{src:Qt(ce.image_url),alt:`${u.name} ${fe+1}`,className:"w-full h-full object-cover",onError:ge=>{const me=ge.target;me.src="/placeholder-product.jpg",me.onerror=null},loading:"lazy"})},ce.id))})})]}),s.jsxs("div",{className:"hidden md:flex max-w-4xl mx-auto gap-6",children:[u.images&&u.images.length>1&&s.jsx("div",{className:"flex flex-col gap-3 w-20",children:u.images.slice(0,6).map((ce,fe)=>s.jsx("button",{onClick:()=>b(fe),className:`aspect-square overflow-hidden border-2 transition-all duration-200 ${y===fe?"border-blue-500 shadow-md":"border-gray-300 hover:border-gray-400"}`,children:s.jsx("img",{src:Qt(ce.image_url),alt:`${u.name} ${fe+1}`,className:"w-full h-full object-cover",onError:ge=>{const me=ge.target;me.src="/placeholder-product.jpg",me.onerror=null},loading:"lazy"})},ce.id))}),s.jsx("div",{className:"flex-1 aspect-square max-w-lg",children:s.jsx("img",{src:Qt(G==null?void 0:G.image_url),alt:u.name,className:"w-full h-full object-cover border border-gray-200",onError:ce=>{const fe=ce.target;fe.src="/placeholder-product.jpg",fe.onerror=null},loading:"lazy"})})]})]}),s.jsx("div",{className:"bg-white px-4 py-6 space-y-4 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4",children:u.name}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsxs("span",{className:"text-3xl md:text-4xl font-bold text-green-600",children:["Rs ",u.price]})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vs,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:(((de=S[u.id])==null?void 0:de.rating)??0).toFixed(1)}),((Q=S[u.id])==null?void 0:Q.total)!==void 0&&((ae=S[u.id])==null?void 0:ae.total)>0&&s.jsxs("span",{className:"text-sm text-gray-600 cursor-pointer hover:text-blue-600",onClick:()=>O(!0),children:["(",(ue=S[u.id])==null?void 0:ue.total," review",((re=S[u.id])==null?void 0:re.total)!==1?"s":"",")"]})]})})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Ye,{variant:"secondary",className:"bg-blue-100 text-blue-800 capitalize text-sm px-3 py-1",children:u.category}),u.quantity>0?s.jsxs(Ye,{variant:"secondary",className:"bg-green-100 text-green-800 text-sm px-3 py-1",children:["In Stock (",u.quantity," available)"]}):s.jsx(Ye,{variant:"destructive",className:"text-sm px-3 py-1",children:"Out of Stock"}),(()=>{const ce=yo(u,u.vendor_delivery_fee);return s.jsxs(Ye,{variant:"secondary",className:`flex items-center gap-1 text-sm px-3 py-1 ${ce.isFreeDelivery?"bg-green-100 text-green-800":ce.deliveryFee===null?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:[s.jsx(Qn,{className:"h-4 w-4"}),ce.displayText]})})(),s.jsxs(Ye,{variant:"secondary",className:"bg-gray-100 text-gray-800 text-sm px-3 py-1",children:[u.total_sold||0," sold"]})]})]})}),s.jsx("div",{className:"bg-white px-4 py-6 space-y-4 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-3",children:"Product Description"}),u.short_description&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Quick Summary"}),s.jsx("p",{className:"text-blue-800 text-sm leading-relaxed",children:u.short_description})]}),s.jsx("div",{className:"text-gray-700 leading-relaxed prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:u.description}})]})}),u.dynamic_fields&&Object.keys(u.dynamic_fields).length>0&&s.jsx("div",{className:"bg-white px-4 py-6 space-y-3 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-3",children:"Product Details"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(u.dynamic_fields).map(([ce,fe])=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-1",children:ce.replace("_"," ")}),s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Array.isArray(fe)?fe.join(", "):typeof fe=="boolean"?fe?"Yes":"No":String(fe)})]},ce))})]})}),u.tags&&u.tags.length>0&&s.jsx("div",{className:"bg-white px-4 py-6 space-y-3 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-3",children:"Product Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((ce,fe)=>s.jsxs(Ye,{variant:"outline",className:"text-sm border-gray-300 text-gray-700 px-3 py-1 hover:bg-gray-50",children:["#",ce]},fe))})]})}),s.jsx("div",{className:"mx-4 my-4 bg-white shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e(`/vendor/${u.vendor_id}`),children:s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center text-3xl rounded-lg",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:u.vendor_name}),s.jsx(er,{className:"h-5 w-5 text-green-600"}),s.jsx(Ye,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs",children:"Active"})]}),s.jsx("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("span",{children:["Category: ",u.category]})})})]})]})})}),j.length>0&&s.jsx("div",{className:"bg-white px-4 py-6 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("h3",{className:"font-semibold text-lg text-gray-900 mb-4",children:["Similar Products in ",u.category]}),s.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:j.map(ce=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>U(ce.id),children:[s.jsx("div",{className:"aspect-square overflow-hidden rounded-t-lg",children:s.jsx("img",{src:Qt(ce.image),alt:ce.name,className:"w-full h-full object-cover",onError:fe=>{const ge=fe.target;ge.src="/placeholder-product.jpg",ge.onerror=null},loading:"lazy"})}),s.jsxs("div",{className:"p-2",children:[s.jsx("h4",{className:"font-medium text-xs text-gray-900 line-clamp-2 mb-1",children:ce.name}),s.jsx("p",{className:"text-[10px] text-gray-600 mb-1 truncate",children:ce.vendor_name}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-bold text-green-600 text-xs",children:ce.price}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[ce.totalSold," sold"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-[10px] text-blue-600 flex items-center gap-1",children:[s.jsx(es,{className:"h-2 w-2"}),ce.distance]}),s.jsxs(te,{size:"sm",variant:"outline",className:"h-5 text-[10px] px-1",disabled:!ce.inStock,onClick:fe=>F(ce.id,fe),children:[s.jsx(rn,{className:"h-2 w-2 mr-1"}),"Add"]})]})]})]},ce.id))})]})}),s.jsx("div",{className:"bg-white px-4 py-6 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:"Select Quantity"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(te,{variant:"outline",size:"icon",onClick:()=>z(-1),className:"h-10 w-10 rounded-full border-2",children:s.jsx(NT,{className:"h-5 w-5"})}),s.jsx("span",{className:"font-bold text-xl w-12 text-center bg-gray-50 py-2 rounded-lg",children:i}),s.jsx(te,{variant:"outline",size:"icon",onClick:()=>z(1),className:"h-10 w-10 rounded-full border-2",children:s.jsx(Ns,{className:"h-5 w-5"})})]})]})}),I&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Product Reviews"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>O(!1),children:""})]}),s.jsx("div",{className:"space-y-4",children:T.length>0?T.map((ce,fe)=>s.jsxs("div",{className:"border-b border-gray-200 pb-4 last:border-b-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((ge,me)=>s.jsx(vs,{className:`h-4 w-4 ${me<(ce.rating||ce.stars||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},me))}),s.jsxs("span",{className:"text-sm font-medium",children:[ce.rating||ce.stars||0,"/5"]})]}),s.jsx("p",{className:"text-gray-700 text-sm",children:ce.comment||ce.review||"No comment"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["By ",ce.customer_name||ce.user_name||"Anonymous","  ",new Date(ce.created_at).toLocaleDateString()]})]},fe)):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No reviews yet for this product."})})})]})})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[s.jsx(te,{variant:"outline",className:"flex-1 h-12 rounded-lg text-gray-800 font-semibold",onClick:H,disabled:h||u.quantity===0,children:h?"Adding...":"Add to Cart"}),s.jsx(te,{className:"flex-1 h-12 rounded-lg bg-green-600 hover:bg-green-700 text-white font-semibold",onClick:q,disabled:h||u.quantity===0,children:h?"Processing...":"Buy Now"})]})})]})]})}const $e=_.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:it("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));$e.displayName="Card";const Ct=_.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:it("flex flex-col space-y-1.5 p-6",e),...t}));Ct.displayName="CardHeader";const Tt=_.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:it("text-2xl font-semibold leading-none tracking-tight",e),...t}));Tt.displayName="CardTitle";const XG=_.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:it("text-sm text-muted-foreground",e),...t}));XG.displayName="CardDescription";const ze=_.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:it("p-6 pt-0",e),...t}));ze.displayName="CardContent";const JG=_.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:it("flex items-center p-6 pt-0",e),...t}));JG.displayName="CardFooter";var gg="Tabs",[QG,die]=jn(gg,[md]),WR=md(),[eK,g_]=QG(gg),GR=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:d="automatic",...h}=e,f=fd(l),[u,m]=ta({prop:r,onChange:a,defaultProp:i??"",caller:gg});return s.jsx(eK,{scope:n,baseId:Qr(),value:u,onValueChange:m,orientation:o,dir:f,activationMode:d,children:s.jsx(ut.div,{dir:f,"data-orientation":o,...h,ref:t})})});GR.displayName=gg;var KR="TabsList",ZR=_.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=g_(KR,n),o=WR(n);return s.jsx(Sw,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:s.jsx(ut.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});ZR.displayName=KR;var YR="TabsTrigger",XR=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=g_(YR,n),l=WR(n),d=eL(o.baseId,r),h=tL(o.baseId,r),f=r===o.value;return s.jsx(kw,{asChild:!0,...l,focusable:!a,active:f,children:s.jsx(ut.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...i,ref:t,onMouseDown:Ze(e.onMouseDown,u=>{!a&&u.button===0&&u.ctrlKey===!1?o.onValueChange(r):u.preventDefault()}),onKeyDown:Ze(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(r)}),onFocus:Ze(e.onFocus,()=>{const u=o.activationMode!=="manual";!f&&!a&&u&&o.onValueChange(r)})})})});XR.displayName=YR;var JR="TabsContent",QR=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,l=g_(JR,n),d=eL(l.baseId,r),h=tL(l.baseId,r),f=r===l.value,u=_.useRef(f);return _.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(fn,{present:a||f,children:({present:m})=>s.jsx(ut.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!m,id:h,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:m&&i})})});QR.displayName=JR;function eL(e,t){return`${e}-trigger-${t}`}function tL(e,t){return`${e}-content-${t}`}var tK=GR,sL=ZR,nL=XR,rL=QR;const Fa=tK,ia=_.forwardRef(({className:e,...t},n)=>s.jsx(sL,{ref:n,className:it("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ia.displayName=sL.displayName;const Lt=_.forwardRef(({className:e,...t},n)=>s.jsx(nL,{ref:n,className:it("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Lt.displayName=nL.displayName;const yt=_.forwardRef(({className:e,...t},n)=>s.jsx(rL,{ref:n,className:it("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));yt.displayName=rL.displayName;const sK=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3};function nK(){var P,T;const e=lt(),{vendorId:t}=sg(),[n,r]=_.useState(!1),[a,i]=_.useState(null),[o,l]=_.useState([]),[d,h]=_.useState(!0),[f,u]=_.useState(null),[m,p]=_.useState(ht.getLocation()),[w,v]=_.useState("N/A"),[x,y]=_.useState(!1),{toast:b}=ns(),{addToCart:j}=Bn();_.useEffect(()=>{const E=ht.subscribe(p);return ht.startTracking(),E},[]),_.useEffect(()=>{t&&!x&&(console.log("Vendor ID changed, fetching profile:",t),y(!0),N())},[t,x]);const N=async()=>{var E;try{h(!0),u(null),console.log("Fetching vendor profile for ID:",t);let I=await fetch(`${Qe}vendors/${t}/`,{headers:{"ngrok-skip-browser-warning":"true"}});if(!I.ok&&(I=await fetch(`${Qe}vendor-profiles/${t}/`,{headers:{"ngrok-skip-browser-warning":"true"}}),I.status===401)){const C=await Ae.getToken();C&&(I=await fetch(`${Qe}vendor-profiles/${t}/`,{headers:{Authorization:`Token ${C}`,"ngrok-skip-browser-warning":"true"}}))}if(!I.ok)throw I.status===404?new Error("Vendor not found"):I.status===500?new Error("Server error - vendor profile unavailable"):new Error("Failed to fetch vendor profile");const O=await I.json();if(console.log("Vendor data received:",O),!O)throw new Error("No vendor data received");i(O);const R=ht.getLocation();if(R&&O.latitude&&O.longitude){const C=sK(R.latitude,R.longitude,O.latitude,O.longitude);v(`${C.toFixed(1)} km`)}try{const C=await fetch(`${Qe}search/products/?search=${encodeURIComponent(O.business_name)}`,{headers:{"ngrok-skip-browser-warning":"true"}});if(C.ok){const A=((E=(await C.json()).results)==null?void 0:E.filter(M=>M.vendor_name===O.business_name))||[];l(A)}}catch(C){console.error("Error fetching products:",C),l([])}}catch(I){console.error("Error fetching vendor profile:",I),console.error("Error details:",I.stack),u(I.message),b({title:"Error",description:I.message||"Failed to load vendor profile",variant:"destructive"})}finally{h(!1),y(!0)}},S=E=>{const I=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],O=[];for(const R of I){const C=`${R}_open`,D=`${R}_close`,A=`${R}_closed`;!E[A]&&E[C]&&E[D]&&O.push(`${R.charAt(0).toUpperCase()+R.slice(1)}: ${E[C]} - ${E[D]}`)}return O.length>0?O.join(", "):"Hours not specified"};return d?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(As,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading vendor profile..."})]})}):f||!a?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold",children:"Vendor Not Found"}),s.jsx("div",{className:"w-10"})]})}),s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsxs("div",{className:"text-center",children:[s.jsx(yn,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vendor Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"The vendor you're looking for doesn't exist or is not available."}),s.jsx(te,{onClick:()=>e("/search"),children:"Browse Vendors"})]})})]}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold truncate",children:a.business_name}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>r(!n),className:"p-2",children:s.jsx(dr,{className:`h-5 w-5 ${n?"fill-red-500 text-red-500":""}`})})]})}),s.jsx("div",{className:"p-4 bg-gradient-subtle",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:((P=a.shop_images)==null?void 0:P.length)>0?s.jsx("img",{src:Qt(a.shop_images[0].image_url),alt:a.business_name,className:"w-full h-full object-cover",onError:E=>{var I;console.log("Shop image failed to load, falling back to profile picture or placeholder"),E.target.src=(I=a.user_info)!=null&&I.profile_picture?Qt(a.user_info.profile_picture):"/placeholder.svg"}}):(T=a.user_info)!=null&&T.profile_picture?s.jsx("img",{src:Qt(a.user_info.profile_picture),alt:a.business_name,className:"w-full h-full object-cover",onError:E=>{console.log("Profile picture failed to load, using placeholder"),E.target.src="/placeholder.svg"}}):s.jsx(yn,{className:"h-8 w-8 text-gray-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h2",{className:"text-lg font-bold",children:a.business_name}),a.is_approved&&s.jsx(er,{className:"h-5 w-5 text-green-500"}),s.jsx(Ye,{variant:a.is_active?"default":"destructive",className:"text-xs",children:a.is_active?"Open":"Closed"})]}),s.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(es,{className:"h-4 w-4"}),s.jsx("span",{children:w})]})}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.categories&&a.categories.map((E,I)=>s.jsx(Ye,{variant:"secondary",className:"text-xs",children:E},I))})]})]})}),s.jsx("div",{className:"px-4 py-3 bg-card border-b border-border/50",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx(Yr,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery"}),s.jsx("p",{className:"text-sm font-medium",children:a.estimated_delivery_time||"30-45 mins"})]}),s.jsxs("div",{children:[s.jsx(yn,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Min Order"}),s.jsxs("p",{className:"text-sm font-medium",children:["",a.min_order_amount||"0"]})]}),s.jsxs("div",{children:[s.jsx(es,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Type"}),s.jsx("p",{className:"text-sm font-medium capitalize",children:a.business_type})]})]})}),s.jsxs("div",{className:"px-4 py-3 flex gap-3",children:[s.jsxs(te,{variant:"brand",className:"flex-1 h-10",onClick:()=>e(`/messages?vendor=${a.user}`),children:[s.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Message"]}),s.jsxs(te,{variant:"outline",className:"flex-1 h-10",onClick:()=>{if(a.latitude&&a.longitude&&m){const E=`https://www.google.com/maps/dir/${m.latitude},${m.longitude}/${a.latitude},${a.longitude}`;window.open(E,"_blank")}else if(a.latitude&&a.longitude){const E=`https://www.google.com/maps/place/${a.latitude},${a.longitude}`;window.open(E,"_blank")}},children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),"View in Map"]})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Fa,{defaultValue:"products",className:"w-full",children:[s.jsxs(ia,{className:"grid w-full grid-cols-3 mx-4",children:[s.jsx(Lt,{value:"products",children:"Products"}),s.jsx(Lt,{value:"about",children:"About"}),s.jsx(Lt,{value:"gallery",children:"Gallery"})]}),s.jsx(yt,{value:"products",className:"p-4 space-y-3",children:o.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.map(E=>{var O,R;const I=((O=E.images)==null?void 0:O.find(C=>C.is_primary))||((R=E.images)==null?void 0:R[0]);return s.jsx($e,{className:"p-3 cursor-pointer hover:shadow-md transition-smooth",onClick:()=>e(`/product/${E.id}`),children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"aspect-square mb-2 bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:Qt(I==null?void 0:I.image_url),alt:E.name,className:"w-full h-full object-cover",onError:C=>{console.log("Product image failed to load, using placeholder"),C.target.src="/placeholder.svg"}})}),s.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:E.name}),s.jsxs("p",{className:"font-semibold text-primary text-sm mb-2",children:["",E.price]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(te,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",disabled:E.quantity===0,onClick:C=>{C.stopPropagation(),j(E.id,1)},children:s.jsx(rn,{className:"h-3 w-3"})}),s.jsxs(te,{size:"sm",className:"flex-1 h-7 text-xs bg-green-600 hover:bg-green-700",disabled:E.quantity===0,onClick:C=>{C.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:E.id,name:E.name,price:E.price,quantity:1,vendor_name:E.vendor_name,images:E.images}}})},children:[s.jsx(Ns,{className:"h-3 w-3"}),"Buy"]})]})]})},E.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(yn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold mb-2",children:"No Products Available"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"This vendor hasn't added any products yet."})]})}),s.jsxs(yt,{value:"about",className:"p-4 space-y-4",children:[a.description&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),s.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:a.description})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Business Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yn,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Owner:"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:a.owner_name})]}),a.business_email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Email:"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:a.business_email})]}),a.business_phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Phone:"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:a.business_phone})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Location"}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(es,{className:"h-4 w-4 text-primary mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:a.business_address}),a.location_address&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.location_address}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.city,", ",a.state," - ",a.pincode]})]})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Operating Hours"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:S(a)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Services"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.home_delivery&&s.jsx(Ye,{variant:"secondary",children:"Home Delivery"}),a.pickup_service&&s.jsx(Ye,{variant:"secondary",children:"Pickup Service"}),a.online_ordering&&s.jsx(Ye,{variant:"secondary",children:"Online Ordering"}),a.bulk_orders&&s.jsx(Ye,{variant:"secondary",children:"Bulk Orders"}),a.subscription_service&&s.jsx(Ye,{variant:"secondary",children:"Subscription"}),a.loyalty_program&&s.jsx(Ye,{variant:"secondary",children:"Loyalty Program"})]})]}),a.established_year&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Established"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:a.established_year})]}),a.employee_count&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Team Size"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.employee_count," employees"]})]}),a.website&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Website"}),s.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:a.website})]}),(a.facebook||a.instagram||a.twitter)&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Social Media"}),s.jsxs("div",{className:"flex gap-3",children:[a.facebook&&s.jsx("a",{href:a.facebook,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Facebook"}),a.instagram&&s.jsx("a",{href:a.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Instagram"}),a.twitter&&s.jsx("a",{href:a.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Twitter"})]})]})]}),s.jsx(yt,{value:"gallery",className:"p-4",children:a.shop_images&&a.shop_images.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Shop Gallery"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.shop_images.map((E,I)=>s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:s.jsx("img",{src:Qt(E.image_url),alt:`${a.business_name} shop image ${I+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300 cursor-pointer",onError:O=>{console.log(`Gallery image ${I+1} failed to load, using placeholder`),O.target.src="/placeholder.svg"}})},E.id||I))})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(yn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"No gallery images available"})]})})]})})]})}function rK(){const e=lt();return _.useEffect(()=>{const t=setTimeout(()=>{e("/home")},2e3);return()=>clearTimeout(t)},[e]),s.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:hi,alt:"ezeyway",className:"w-20 h-20 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Page Not Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Redirecting to home..."}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})})}const aK=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3},mk=()=>{const[e,t]=_.useState([]),[n,r]=_.useState(!0),[a,i]=_.useState({}),{addToCart:o}=Bn(),l=lt();_.useEffect(()=>{h()},[]);const d=async f=>{try{const u=f.map(w=>yi.getProductReviews(w)),p=(await Promise.all(u)).reduce((w,v)=>{var x,y;return w[v.product_id]={rating:((x=v.aggregate)==null?void 0:x.average_rating)||0,total:((y=v.aggregate)==null?void 0:y.total_reviews)||0},w},{});i(w=>({...w,...p}))}catch(u){console.error("Failed to load product reviews:",u)}},h=async()=>{try{const f={"ngrok-skip-browser-warning":"true"},u=ht.getLocation(),m=new URLSearchParams({page_size:"6"});u&&(m.append("latitude",u.latitude.toString()),m.append("longitude",u.longitude.toString()));const x=((await(await fetch(`${Qe}search/products/?${m}`,{headers:f})).json()).results||[]).map(b=>{var E,I;const j=((E=b.images)==null?void 0:E.find(O=>O.is_primary))||((I=b.images)==null?void 0:I[0]),N=10;let S="N/A",P=1/0;u&&b.vendor_latitude&&b.vendor_longitude&&(P=aK(u.latitude,u.longitude,b.vendor_latitude,b.vendor_longitude),S=`${P.toFixed(1)} km`);const T=yo(b,b.vendor_delivery_fee);return{id:b.id,name:b.name,vendor:b.vendor_name||"Unknown Vendor",price:b.price,image:(j==null?void 0:j.image_url)||"/placeholder-product.jpg",distance:S,distanceValue:P,inStock:b.quantity>0,vendorOnline:b.vendor_online!==!1,deliveryRadius:b.delivery_radius||N,totalSold:b.total_sold||0,deliveryInfo:T}}).filter(b=>b.vendorOnline&&(b.distanceValue===1/0||b.distanceValue<=b.deliveryRadius)).slice(0,6);t(x);const y=x.map(b=>b.id);d(y)}catch(f){console.error("Failed to fetch products:",f)}finally{r(!1)}};return n?s.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 md:grid-cols-3 md:gap-3",children:[...Array(6)].map((f,u)=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden animate-pulse",children:[s.jsx("div",{className:"h-24 bg-gray-200"}),s.jsxs("div",{className:"p-2 space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded"}),s.jsx("div",{className:"h-2 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},u))}):s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3 px-2",children:"Products Near You"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 md:grid-cols-3 md:gap-3 lg:flex lg:flex-row lg:overflow-x-auto lg:gap-3 lg:px-2",children:e.map(f=>{var u,m,p,w,v,x;return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:border-[#856043]/30 overflow-hidden shadow-sm flex-shrink-0 w-36 md:w-40 lg:w-36",children:[s.jsx("div",{className:"relative h-24 overflow-hidden bg-gray-100 cursor-pointer",onClick:()=>l(`/product/${f.id}`),children:s.jsx("img",{src:f.image,alt:f.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:y=>{y.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),s.jsxs("div",{className:"p-2 space-y-1",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2 leading-tight",children:f.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:f.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vs,{className:"h-2 w-2 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:(((u=a[f.id])==null?void 0:u.rating)??0).toFixed(1)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(es,{className:"h-2 w-2"}),s.jsx("span",{children:f.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-xs font-bold text-[#856043]",children:["Rs ",f.price]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Qn,{className:"h-2 w-2 text-muted-foreground"}),s.jsx("span",{className:`text-[8px] px-1 py-0.5 rounded-full ${(m=f.deliveryInfo)!=null&&m.isFreeDelivery?"bg-green-100 text-green-700":((p=f.deliveryInfo)==null?void 0:p.deliveryFee)===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(w=f.deliveryInfo)!=null&&w.isFreeDelivery?"Free":((v=f.deliveryInfo)==null?void 0:v.deliveryFee)===null?"TBD":`Rs ${(x=f.deliveryInfo)==null?void 0:x.deliveryFee}`})]})]}),s.jsxs("p",{className:"text-[8px] text-gray-500",children:[f.totalSold||0," sold"]}),s.jsxs(te,{variant:"outline",size:"sm",className:"w-full border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white rounded-md text-[10px] py-1",disabled:!f.inStock,onClick:()=>o(f.id,1),children:[s.jsx(rn,{className:"w-2 h-2 mr-1"}),"Add to Cart"]})]})]},f.id)})})]})};function iK(){const{toast:e}=ns(),{cart:t,loading:n,updateCartItem:r,removeFromCart:a,fetchCart:i}=Bn();_.useState("");const[o,l]=_.useState(0),[d,h]=_.useState([]),f=lt();_.useEffect(()=>{i()},[]);const u=[];_.useEffect(()=>{t!=null&&t.items&&h([])},[t]);const m=(t==null?void 0:t.items)||[],p=m.filter(R=>d.includes(R.id)),w=d.length===m.length&&m.length>0,v=R=>{h(R?m.map(C=>C.id):[])},x=R=>{h(C=>C.includes(R)?C.filter(D=>D!==R):[...C,R])},y=async(R,C)=>{const D=m.find(A=>A.id===R);if(D){const A=D.quantity+C;A>0&&await r(R,A)}},b=async R=>{await a(R)},j=async()=>{if(d.length!==0){for(const R of d)await a(R);h([])}},N=R=>{b(R.id),e({title:"Feature Coming Soon",description:"Save for later feature will be available soon"})},S=R=>{e({title:"Feature Coming Soon",description:"Move to cart feature will be available soon"})},T=p.reduce((R,C)=>R+parseFloat(C.total_price.toString()),0),E=T*.05,I=T*o,O=T+E-I;return n?s.jsx("div",{className:"min-h-screen bg-gray-50 font-sans flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(rn,{className:"mx-auto h-10 w-10 text-[#856043] mb-2 animate-pulse"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading cart..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-sm border-b py-2 px-3",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-2",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(rn,{className:"w-4 h-4 mr-1 text-[#856043]"}),"(",m.length,")"]}),s.jsx(te,{variant:"outline",className:"border-[#856043] text-[#856043] hover:bg-[#856043]/10 hover:text-[#856043] rounded-md text-xs font-medium py-1 px-2",onClick:()=>f("/search"),children:"Continue Shopping"})]})}),s.jsx("main",{className:"max-w-7xl mx-auto px-3 py-4 pb-52 overflow-y-auto",style:{height:"calc(100vh - 120px)"},children:m.length===0?s.jsxs("div",{children:[s.jsxs("div",{className:"text-center py-6",children:[s.jsx(rn,{className:"mx-auto h-10 w-10 text-[#856043] mb-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Your Cart is Empty"}),s.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Discover products near you"})]}),s.jsx(mk,{})]}):s.jsxs("div",{className:"md:flex md:gap-4 space-y-2 md:space-y-0",children:[s.jsxs("div",{className:"md:w-1/2 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qm,{id:"select-all",checked:w,onCheckedChange:v,className:"data-[state=checked]:bg-[#856043] data-[state=checked]:border-[#856043]"}),s.jsxs("label",{htmlFor:"select-all",className:"text-sm font-medium text-gray-700 cursor-pointer",children:["Select all (",m.length,")"]})]}),s.jsxs(te,{variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-xs px-3 py-1 rounded-md",onClick:j,disabled:d.length===0,children:[s.jsx(ro,{className:"w-3 h-3 mr-1"}),"Delete (",d.length,")"]})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(bS,{children:m.map((R,C)=>{var D,A;return s.jsxs(vc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:C*.1},className:"bg-white p-3 flex items-center gap-3 rounded-lg border border-gray-200 shadow-sm hover:bg-gray-50 transition-colors",children:[s.jsx(qm,{checked:d.includes(R.id),onCheckedChange:()=>x(R.id),className:"data-[state=checked]:bg-[#856043] data-[state=checked]:border-[#856043] flex-shrink-0"}),s.jsx("div",{className:"w-12 h-12 flex-shrink-0 overflow-hidden rounded",children:s.jsx("img",{src:((A=(D=R.product.images)==null?void 0:D[0])==null?void 0:A.image_url)||"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200",alt:R.product.name,className:"w-full h-full object-cover",onError:M=>{M.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-xs font-medium text-gray-900 truncate",children:R.product.name}),s.jsxs("p",{className:"text-[10px] text-gray-500 truncate",children:["Sold by ",R.product.vendor_name]}),s.jsx("div",{className:"flex items-center gap-1 mt-1",children:s.jsxs("p",{className:"text-xs font-bold text-[#856043]",children:["Rs ",R.product.price]})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(te,{variant:"outline",size:"sm",className:"h-5 w-5 p-0 text-gray-600 border-gray-300 hover:border-[#856043] hover:text-[#856043]",onClick:()=>y(R.id,-1),children:"-"}),s.jsx("span",{className:"text-xs min-w-[1rem] text-center",children:R.quantity}),s.jsx(te,{variant:"outline",size:"sm",className:"h-5 w-5 p-0 text-gray-600 border-gray-300 hover:border-[#856043] hover:text-[#856043]",onClick:()=>y(R.id,1),children:"+"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(te,{variant:"ghost",size:"sm",className:"p-1 text-[#856043] hover:text-[#856043]/90 hover:bg-[#856043]/5",onClick:()=>N(R),children:s.jsx(dr,{className:"w-3 h-3"})}),s.jsx(te,{variant:"ghost",size:"sm",className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>b(R.id),children:s.jsx(ro,{className:"w-3 h-3"})})]})]},R.id)})})}),u.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2 px-2",children:"Saved for Later"}),s.jsx(bS,{children:u.map((R,C)=>s.jsxs(vc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:C*.1},className:"bg-white p-2 flex items-center gap-2 border-b border-gray-300 hover:bg-gray-50",children:[s.jsx("div",{className:"w-12 h-12 flex-shrink-0 overflow-hidden rounded",children:s.jsx("img",{src:R.image,alt:R.name,className:"w-full h-full object-cover",onError:D=>{D.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-xs font-medium text-gray-900 truncate",children:R.name}),s.jsxs("p",{className:"text-[10px] text-gray-500 truncate",children:["Sold by ",R.vendor]}),s.jsx("p",{className:"text-xs font-bold text-[#856043] mt-1",children:R.price})]}),s.jsx(te,{variant:"outline",size:"sm",className:"border-[#856043] text-[#856043] hover:bg-[#856043]/10 text-[10px] px-2 py-1",onClick:()=>S(),children:"Move to Cart"})]},R.id))})]})]}),s.jsx("div",{className:"md:w-1/2",children:s.jsx(mk,{})})]})}),m.length>0&&s.jsx(vc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"fixed bottom-20 left-0 right-0 bg-white border-t border-gray-300 z-40",children:s.jsx("div",{className:"max-w-7xl mx-auto px-3",children:s.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"30vh"},children:s.jsx("div",{className:"py-2",children:s.jsxs("div",{className:"md:flex md:items-center md:justify-between md:gap-6",children:[s.jsxs("div",{className:"md:flex-1",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-xs mb-4 md:mb-0",children:[s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsxs("span",{children:["Subtotal (",p.length," items)"]}),s.jsxs("span",{className:"font-medium",children:["Rs ",T.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Taxes (5%)"}),s.jsxs("span",{className:"font-medium",children:["Rs ",E.toFixed(2)]})]}),s.jsx("hr",{className:"border-gray-300 my-2"}),s.jsxs("div",{className:"flex justify-between font-bold text-sm text-gray-900",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["Rs ",O.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-600 mt-2",children:[s.jsx(Qn,{className:"w-3 h-3"}),s.jsx("span",{className:"text-xs font-semibold",children:"Estimated delivery: Rs 50-60"})]})]})]}),s.jsx(te,{size:"lg",className:"w-full md:w-auto md:px-8 rounded-md bg-[#856043] text-white hover:bg-[#856043]/90 py-3 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed mb-2 md:mb-0",disabled:p.length===0,onClick:()=>f("/checkout",{state:{selectedItems:p}}),children:"Proceed to Checkout"})]})})})})}),s.jsx(Nn,{})]})}const u0=({hasMore:e,isLoading:t,onLoadMore:n,threshold:r=200})=>{const a=_.useRef(null),i=_.useCallback(()=>{if(!e||t)return;const{scrollTop:o,scrollHeight:l,clientHeight:d}=document.documentElement;o+d>=l-r&&n()},[e,t,n,r]);return _.useEffect(()=>{const o=new IntersectionObserver(l=>{const[d]=l;d.isIntersecting&&e&&!t&&n()},{threshold:.1,rootMargin:`${r}px`});return a.current&&o.observe(a.current),window.addEventListener("scroll",i,{passive:!0}),()=>{o.disconnect(),window.removeEventListener("scroll",i)}},[e,t,n,i,r]),{sentinelRef:a}},Lo=class Lo{constructor(){Gt(this,"metrics",new Map)}static getInstance(){return Lo.instance||(Lo.instance=new Lo),Lo.instance}startTimer(t){this.metrics.set(t,performance.now())}endTimer(t){const n=this.metrics.get(t);if(!n)return 0;const r=performance.now()-n;return console.log(` ${t}: ${r.toFixed(2)}ms`),this.metrics.delete(t),r}measureAsync(t,n){return this.startTimer(t),n().finally(()=>{this.endTimer(t)})}measureSync(t,n){this.startTimer(t);try{return n()}finally{this.endTimer(t)}}logMemoryUsage(){if("memory"in performance){const t=performance.memory;console.log(" Memory Usage:",{used:`${(t.usedJSHeapSize/1024/1024).toFixed(2)} MB`,total:`${(t.totalJSHeapSize/1024/1024).toFixed(2)} MB`,limit:`${(t.jsHeapSizeLimit/1024/1024).toFixed(2)} MB`})}}logRenderMetrics(){if("getEntriesByType"in performance){performance.getEntriesByType("paint").forEach(r=>{console.log(` ${r.name}: ${r.startTime.toFixed(2)}ms`)});const n=performance.getEntriesByType("navigation");if(n.length>0){const r=n[0];console.log(" Navigation Timing:",{domContentLoaded:`${(r.domContentLoadedEventEnd-r.navigationStart).toFixed(2)}ms`,loadComplete:`${(r.loadEventEnd-r.navigationStart).toFixed(2)}ms`,firstByte:`${(r.responseStart-r.navigationStart).toFixed(2)}ms`})}}}};Gt(Lo,"instance");let h0=Lo;function oK(e,t,n){let r=null;return function(...i){const o=()=>{r=null,e(...i)};r&&clearTimeout(r),r=setTimeout(o,t)}}class lK{constructor(){Gt(this,"cache",new Set)}preload(t){const n=t.map(r=>this.cache.has(r)?Promise.resolve():new Promise((a,i)=>{const o=new Image;o.onload=()=>{this.cache.add(r),a()},o.onerror=i,o.src=r}));return Promise.all(n)}isPreloaded(t){return this.cache.has(t)}}const Ei=h0.getInstance(),cK=new lK,aL=_.lazy(()=>Ue(()=>import("./LazyImage-DWi6X0no.js"),[])),pk=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3},dK=_.memo(({product:e,onProductClick:t,onToggleFavorite:n,onAddToCart:r,onBuyNow:a,isFavorite:i,productReviews:o})=>{var l,d,h,f,u,m;return s.jsxs($e,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>t(e.id),children:[s.jsxs("div",{className:"aspect-square md:aspect-[4/3] relative",children:[s.jsx(_.Suspense,{fallback:s.jsx("div",{className:"w-full h-full bg-gray-200 animate-pulse"}),children:s.jsx(aL,{src:e.image,alt:e.name,className:"w-full h-full object-cover",fallback:"/placeholder.svg"})}),s.jsx(te,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:p=>n(e.id,p),children:s.jsx(dr,{className:`h-4 w-4 ${i?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Ye,{variant:e.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:e.inStock?"In Stock":"Out of Stock"})]}),s.jsxs(ze,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:e.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:e.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:(((l=o[e.id])==null?void 0:l.rating)??e.rating??0).toFixed(1)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{children:e.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:e.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Qn,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${(d=e.deliveryInfo)!=null&&d.isFreeDelivery?"bg-green-100 text-green-700":((h=e.deliveryInfo)==null?void 0:h.deliveryFee)===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(f=e.deliveryInfo)!=null&&f.isFreeDelivery?"Free":((u=e.deliveryInfo)==null?void 0:u.deliveryFee)===null?"TBD":`Rs ${(m=e.deliveryInfo)==null?void 0:m.deliveryFee}`})]})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(te,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!e.inStock,onClick:p=>{p.stopPropagation(),r(e.id,1)},children:[s.jsx(rn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(te,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!e.inStock,onClick:p=>a(p,e),children:[s.jsx(Ns,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]})}),uK=_.memo(({vendor:e,onVendorClick:t})=>s.jsx($e,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t(e),children:s.jsx(ze,{className:"p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(_.Suspense,{fallback:s.jsx("div",{className:"w-16 h-16 bg-gray-200 animate-pulse rounded-full"}),children:s.jsx(aL,{src:e.image,alt:e.name,className:"w-16 h-16 object-cover rounded-full",fallback:"/placeholder.svg"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-base mb-1",children:e.name}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:e.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{children:e.distance})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Yr,{className:"h-3 w-3"}),s.jsx("span",{children:e.deliveryTime})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:e.categories.map((n,r)=>s.jsx(Ye,{variant:"secondary",className:"text-xs",children:n},r))})]})]})})}));function hK(){const e=lt(),[t,n]=ng(),[r,a]=_.useState(t.get("q")||""),[i,o]=_.useState({products:[],vendors:[]}),[l,d]=_.useState("all"),[h,f]=_.useState(!1),[u,m]=_.useState(!1),[p,w]=_.useState(ht.getLocation()),[v,x]=_.useState({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),[y,b]=_.useState(new Set),[j,N]=_.useState(!1),[S,P]=_.useState(""),[T,E]=_.useState([]),[I,O]=_.useState({}),[R,C]=_.useState(!1),[D,A]=_.useState(0),{toast:M}=ns(),{addToCart:Z}=Bn();_.useEffect(()=>{(async()=>{const oe=localStorage.getItem("pendingAction");if(oe)try{const de=JSON.parse(oe),Q=await Ae.getToken();if(Q&&de.timestamp>Date.now()-3e5){if(de.type==="add_to_cart")await Z(de.data.productId,de.data.quantity||1),M({title:"Added to Cart",description:"Product added successfully"}),e("/cart");else if(de.type==="buy_now")e("/checkout",{state:{directBuy:!0,product:de.data}});else if(de.type==="toggleFavorite"){const ae=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${Q}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:de.productId})});if(ae.ok){const ue=await ae.json(),re=new Set(y);ue.is_favorite?re.add(de.productId):re.delete(de.productId),b(re),M({title:ue.is_favorite?"Added to Favorites":"Removed from Favorites",description:ue.message})}}localStorage.removeItem("pendingAction")}else localStorage.removeItem("pendingAction")}catch(de){console.error("Failed to execute pending action:",de),localStorage.removeItem("pendingAction")}})()},[Z,y,M]);const[X,U]=_.useState([]),F=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}],B=_.useCallback(async(ve=1,oe="",de="both")=>{const Q=Date.now();if(Q-D<500){console.log("Request throttled - too soon after previous request");return}A(Q);const ae=ve===1,ue=`fetch-${de}-page-${ve}`;Ei.startTimer(ue),ae?f(!0):m(!0);try{const re={"ngrok-skip-browser-warning":"true"},ce=ht.getLocation(),fe=Te=>{const Se=new URLSearchParams({page:Te.toString(),page_size:"20"});return oe&&Se.append("search",oe),S&&Se.append("sort",S),T.length>0&&Se.append("categories",T.join(",")),ce&&(Se.append("latitude",ce.latitude.toString()),Se.append("longitude",ce.longitude.toString())),Se},ge=[];if(de==="both"||de==="products"){const Te=de==="products"?ve:v.products.page;ge.push(fetch(`${Qe}search/products/?${fe(Te)}`,{headers:re}).then(Se=>{if(!Se.ok)throw new Error(`HTTP ${Se.status}: ${Se.statusText}`);return Se.json()}).then(Se=>({type:"products",data:Se,page:Te})))}if(de==="both"||de==="vendors"){const Te=de==="vendors"?ve:v.vendors.page;ge.push(fetch(`${Qe}search/vendors/?${fe(Te)}`,{headers:re}).then(Se=>{if(!Se.ok)throw new Error(`HTTP ${Se.status}: ${Se.statusText}`);return Se.json()}).then(Se=>({type:"vendors",data:Se,page:Te})))}const me=await Ei.measureAsync("api-requests",()=>Promise.allSettled(ge)),be=[];if(me.forEach(Te=>{var we;if(Te.status==="rejected"){console.error("API request failed:",Te.reason);return}const{type:Se,data:Ie,page:se}=Te.value;if(Se==="products"){const Pe=H(Ie.results||[]);if(ae){const Me=[...new Set(((we=Ie.results)==null?void 0:we.map(Le=>Le.category).filter(Boolean))||[])];U(Me)}if(Pe.forEach(Me=>{Me.image&&!be.includes(Me.image)&&be.push(Me.image)}),o(Me=>({...Me,products:se===1?Pe:[...Me.products,...Pe]})),se===1){const Me=Pe.map(Le=>Le.id);ke(Me)}x(Me=>({...Me,products:{page:se,hasMore:Ie.next!==null,total:Ie.count||0}}))}else if(Se==="vendors"){const Pe=q(Ie.results||[]);Pe.forEach(Me=>{Me.image&&!be.includes(Me.image)&&be.push(Me.image)}),o(Me=>({...Me,vendors:se===1?Pe:[...Me.vendors,...Pe]})),x(Me=>({...Me,vendors:{page:se,hasMore:Ie.next!==null,total:Ie.count||0}}))}}),me.forEach((Te,Se)=>{if(Te.status==="rejected"){const se=de==="both"&&Se===1||de==="vendors"?"vendors":"products";x(we=>({...we,[se]:{...we[se],hasMore:!1}}))}}),be.length>0){const Te=be.filter(Se=>Se&&Se!=="/placeholder.svg"&&!Se.includes("placeholder"));Te.length>0&&cK.preload(Te.slice(0,10)).catch(Se=>console.warn("Image preload failed:",Se))}}catch(re){console.error("Fetch error:",re),M({title:"Error",description:"Failed to load search results",variant:"destructive"})}finally{f(!1),m(!1),Ei.endTimer(ue)}},[S,T,M,D]);_.useEffect(()=>{if(!R){console.log("Search: Initial load, fetching data"),C(!0),Ei.startTimer("initial-load");const ve=ht.subscribe(w);return ht.startTracking(),B(),Ne(),Ei.endTimer("initial-load"),setTimeout(()=>{Ei.logRenderMetrics()},1e3),ve}},[R]),_.useEffect(()=>{oK(()=>{console.log("Search: Query changed, performing search for:",r),Ei.startTimer("search-query"),n(r?{q:r}:{}),x({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),B(1,r),Ei.endTimer("search-query")},300)()},[r,n]),_.useEffect(()=>{R&&(console.log("Search: Filters changed, refetching data"),x({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),B(1,r))},[S,T]),_.useEffect(()=>{p&&R&&(console.log("Search: User location changed, refetching data"),x({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),B(1,r))},[p]);const z=ve=>{if(!ve)return 0;if(ve.reviews&&Array.isArray(ve.reviews)&&ve.reviews.length>0){const oe=ve.reviews.map(de=>Number(de.rating??de.stars??de.score??0)).filter(de=>!isNaN(de));if(oe.length>0){const de=oe.reduce((Q,ae)=>Q+ae,0);return Math.max(0,Math.min(5,de/oe.length))}}return ve.average_rating!=null?Number(ve.average_rating):ve.rating!=null?Number(ve.rating):0},H=_.useCallback(ve=>{const oe=ht.getLocation();return ve.map(de=>{var ce,fe;const Q=((ce=de.images)==null?void 0:ce.find(ge=>ge.is_primary))||((fe=de.images)==null?void 0:fe[0]);let ae="N/A",ue=1/0;oe&&de.vendor_latitude&&de.vendor_longitude&&(ue=pk(oe.latitude,oe.longitude,de.vendor_latitude,de.vendor_longitude),ae=`${ue.toFixed(1)} km`);const re=yo(de,de.vendor_delivery_fee);return{id:de.id,name:de.name,vendor:de.vendor_name||"Unknown Vendor",vendor_id:de.vendor_id,price:`Rs ${de.price}`,priceValue:parseFloat(de.price),image:(Q==null?void 0:Q.image_url)||"/placeholder.svg",rating:z(de),distance:ae,distanceValue:ue,deliveryTime:"30-45 mins",inStock:de.quantity>0,category:de.category,totalSold:de.total_sold||0,deliveryInfo:re,vendorOnline:de.vendor_online!==!1,deliveryRadius:mh(de)??1/0,free_delivery:de.free_delivery,custom_delivery_fee_enabled:de.custom_delivery_fee_enabled,custom_delivery_fee:de.custom_delivery_fee}}).filter(de=>de.vendorOnline&&(de.distanceValue===1/0||de.distanceValue<=de.deliveryRadius))},[]),q=_.useCallback(ve=>{const oe=ht.getLocation();return ve.map(de=>{var ue,re,ce,fe,ge;let Q="N/A",ae=1/0;return oe&&de.latitude&&de.longitude&&(ae=pk(oe.latitude,oe.longitude,de.latitude,de.longitude),Q=`${ae.toFixed(1)} km`),{id:de.id,name:de.business_name,image:((re=(ue=de.shop_images)==null?void 0:ue.find(me=>me.is_primary))==null?void 0:re.image_url)||((fe=(ce=de.shop_images)==null?void 0:ce[0])==null?void 0:fe.image_url)||((ge=de.user_info)==null?void 0:ge.profile_picture)||"/placeholder.svg",rating:z(de),distance:Q,distanceValue:ae,deliveryTime:"30-45 mins",categories:de.categories||[],isOnline:de.is_online!==!1,deliveryRadius:mh(de)??1/0}}).filter(de=>de.isOnline&&(de.distanceValue===1/0||de.distanceValue<=de.deliveryRadius)).sort((de,Q)=>de.distanceValue-Q.distanceValue)},[]),W=_.useCallback(()=>{!u&&v.products.hasMore&&!h&&v.products.page<50?(console.log("Loading more products, current page:",v.products.page),B(v.products.page+1,r,"products")):v.products.page>=50&&console.log("Reached maximum page limit for products")},[u,v.products.hasMore,v.products.page,r,h]),Y=_.useCallback(()=>{!u&&v.vendors.hasMore&&!h&&v.vendors.page<50?(console.log("Loading more vendors, current page:",v.vendors.page),B(v.vendors.page+1,r,"vendors")):v.vendors.page>=50&&console.log("Reached maximum page limit for vendors")},[u,v.vendors.hasMore,v.vendors.page,r,h]),{sentinelRef:V}=u0({hasMore:v.products.hasMore&&!u,isLoading:u,onLoadMore:W,threshold:300}),{sentinelRef:G}=u0({hasMore:v.vendors.hasMore&&!u,isLoading:u,onLoadMore:Y,threshold:300}),ie=_.useCallback(ve=>{e(`/product/${ve}`)},[e]),J=_.useCallback(ve=>{e(`/vendor/${ve.id}`)},[e]),le=_.useCallback(async(ve,oe=1)=>{if(!await Ae.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:ve,quantity:oe},path:"/cart",timestamp:Date.now()})),e("/login",{state:{from:window.location.pathname}});return}try{await Z(ve,oe),M({title:"Added to Cart",description:"Product added successfully"}),e("/cart")}catch{M({title:"Error",description:"Failed to add product to cart",variant:"destructive"})}},[Z,e,M]),ye=_.useCallback(async(ve,oe)=>{if(ve.stopPropagation(),!await Ae.getToken()){const Q={id:oe.id,name:oe.name,price:oe.price.replace("",""),quantity:1,vendor_name:oe.vendor,vendor_id:oe.vendor_id,images:[{image_url:oe.image}],free_delivery:oe.free_delivery,custom_delivery_fee_enabled:oe.custom_delivery_fee_enabled,custom_delivery_fee:oe.custom_delivery_fee,dynamic_fields:oe.dynamic_fields||{}};console.log("Search Buy Now - Product data:",Q),console.log("Search Buy Now - Delivery info:",oe.deliveryInfo),localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:Q,path:"/checkout",timestamp:Date.now()})),e("/login",{state:{from:window.location.pathname}});return}e("/checkout",{state:{directBuy:!0,product:{id:oe.id,name:oe.name,price:oe.price.replace("",""),quantity:1,vendor_name:oe.vendor,vendor_id:oe.vendor_id,images:[{image_url:oe.image}],free_delivery:oe.free_delivery,custom_delivery_fee_enabled:oe.custom_delivery_fee_enabled,custom_delivery_fee:oe.custom_delivery_fee,dynamic_fields:oe.dynamic_fields||{}}}})},[e]),ke=async ve=>{try{const oe=ve.map(ae=>yi.getProductReviews(ae)),Q=(await Promise.all(oe)).reduce((ae,ue)=>{var re,ce;return ae[ue.product_id]={rating:((re=ue.aggregate)==null?void 0:re.average_rating)||0,total:((ce=ue.aggregate)==null?void 0:ce.total_reviews)||0},ae},{});O(ae=>({...ae,...Q}))}catch(oe){console.error("Failed to load product reviews:",oe)}},Ne=async()=>{var oe;const ve=await Ae.getToken();if(ve)try{const de=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${ve}`,"ngrok-skip-browser-warning":"true"}});if(de.ok){const Q=await de.json(),ae=new Set(((oe=Q.results)==null?void 0:oe.map(ue=>ue.product.id))||[]);b(ae)}}catch(de){console.error("Failed to fetch favorites:",de)}},_e=async(ve,oe)=>{oe.stopPropagation();const de=await Ae.getToken();if(!de){localStorage.setItem("pendingAction",JSON.stringify({type:"toggleFavorite",productId:ve,timestamp:Date.now()})),e("/login",{state:{from:"/search"}});return}try{const Q=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${de}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:ve})});if(Q.ok){const ae=await Q.json(),ue=new Set(y);ae.is_favorite?ue.add(ve):ue.delete(ve),b(ue),M({title:ae.is_favorite?"Added to Favorites":"Removed from Favorites",description:ae.message})}}catch{M({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},ne=_.useMemo(()=>i.products.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6",children:i.products.map((ve,oe)=>s.jsx(dK,{product:ve,onProductClick:ie,onToggleFavorite:_e,onAddToCart:le,onBuyNow:ye,isFavorite:y.has(ve.id),productReviews:I},`${ve.id}-${oe}`))}),v.products.hasMore&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{ref:V,className:"h-4"}),u&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(As,{className:"h-6 w-6 animate-spin mr-2"}),s.jsx("span",{children:"Loading more products..."})]})]})]}),[i.products,ie,_e,Z,ye,y,v.products.hasMore,u,V]),Ce=_.useMemo(()=>i.vendors.length===0?null:s.jsxs("div",{className:"space-y-3",children:[i.vendors.map((ve,oe)=>s.jsx(uK,{vendor:ve,onVendorClick:J},`${ve.id}-${oe}`)),v.vendors.hasMore&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{ref:G,className:"h-4"}),u&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(As,{className:"h-6 w-6 animate-spin mr-2"}),s.jsx("span",{children:"Loading more vendors..."})]})]})]}),[i.vendors,J,v.vendors.hasMore,u,G]);return s.jsxs(s.Fragment,{children:[s.jsx("title",{children:r?`${r} - Search Results | ezeyway Kathmandu Valley`:"Search Products & Vendors | ezeyway Kathmandu Valley"}),s.jsx("meta",{name:"description",content:r?`Find ${r} and similar products with same-day delivery in Kathmandu Valley. Shop groceries, electronics, fashion & more at ezeyway.`:"Search and discover products, vendors, and services with same-day delivery in Kathmandu Valley. Find groceries, electronics, fashion, food and more."}),s.jsx("meta",{name:"keywords",content:`search ${r||""}, Kathmandu delivery, same day delivery Nepal, instant shopping Kathmandu, groceries delivery, electronics delivery, fashion delivery, food delivery Kathmandu Valley, online shopping Nepal`}),s.jsx("link",{rel:"canonical",href:`https://ezeyway.com/search${r?`?q=${encodeURIComponent(r)}`:""}`}),s.jsx("meta",{property:"og:title",content:r?`${r} - Search Results | ezeyway`:"Search Products & Vendors | ezeyway Kathmandu Valley"}),s.jsx("meta",{property:"og:description",content:r?`Find ${r} and similar products with same-day delivery in Kathmandu Valley`:"Search and discover products, vendors, and services with same-day delivery in Kathmandu Valley"}),s.jsx("meta",{property:"og:image",content:"https://ezeyway.com/ezy-icon.svg"}),s.jsx("meta",{property:"og:url",content:`https://ezeyway.com/search${r?`?q=${encodeURIComponent(r)}`:""}`}),s.jsx("meta",{property:"og:type",content:"website"}),s.jsx("meta",{name:"twitter:title",content:r?`${r} - Search Results | ezeyway`:"Search Products & Vendors | ezeyway Kathmandu Valley"}),s.jsx("meta",{name:"twitter:description",content:r?`Find ${r} and similar products with same-day delivery in Kathmandu Valley`:"Search and discover products, vendors, and services with same-day delivery in Kathmandu Valley"}),s.jsx("meta",{name:"twitter:image",content:"https://ezeyway.com/ezy-icon.svg"}),s.jsx("meta",{name:"robots",content:"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"}),s.jsx("meta",{name:"geo.region",content:"NP"}),s.jsx("meta",{name:"geo.placename",content:"Kathmandu Valley"}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"SearchResultsPage",name:r?`${r} Search Results`:"Product Search",description:r?`Search results for ${r} in Kathmandu Valley`:"Search for products and vendors in Kathmandu Valley",url:`https://ezeyway.com/search${r?`?q=${encodeURIComponent(r)}`:""}`,mainEntity:{"@type":"ItemList",name:"Search Results",description:`Found ${v.products.total} products and ${v.vendors.total} vendors${r?` for "${r}"`:""}`}})}),s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Yo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(je,{placeholder:"Search products, vendors...",value:r,onChange:ve=>a(ve.target.value),className:"pl-10 pr-4 py-2"})]}),s.jsx(te,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>N(!0),children:s.jsx(aa,{className:"h-5 w-5"})})]})}),s.jsx("div",{className:"px-4 py-3 border-b border-border/50",children:s.jsx("div",{className:"flex gap-2",children:[{id:"all",label:"All"},{id:"products",label:"Products"},{id:"vendors",label:"Vendors"}].map(ve=>s.jsx(te,{variant:l===ve.id?"default":"ghost",size:"sm",onClick:()=>d(ve.id),className:"flex-1",children:ve.label},ve.id))})}),s.jsxs("div",{className:"p-4 pb-20",children:[r&&s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:[l==="all"&&`Found ${v.products.total} products and ${v.vendors.total} vendors`,l==="products"&&`Found ${v.products.total} products`,l==="vendors"&&`Found ${v.vendors.total} vendors`,r&&" for ",s.jsxs("span",{className:"font-medium",children:['"',r,'"']})]}),(l==="all"||l==="products")&&s.jsx("div",{className:"mb-6",children:i.products.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Products"}),ne]})}),(l==="all"||l==="vendors")&&s.jsx("div",{children:i.vendors.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Vendors"}),Ce]})}),r&&i.products.length===0&&i.vendors.length===0&&!h&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Yo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No results found"}),s.jsx("p",{className:"text-muted-foreground",children:"Try searching for products or vendors with different keywords"})]}),!r&&!h&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Yo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Search for anything"}),s.jsx("p",{className:"text-muted-foreground",children:"Find products, vendors, and more in your area"})]}),h&&i.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(As,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),j&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>N(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:ve=>ve.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>N(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:F.map(ve=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:ve.value,checked:S===ve.value,onChange:oe=>P(oe.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:ve.label})]},ve.value))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Categories"}),s.jsx("div",{className:"space-y-2",children:X.map(ve=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:T.includes(ve),onChange:oe=>{oe.target.checked?E([...T,ve]):E(T.filter(de=>de!==ve))},className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:ve})]},ve))})]}),s.jsx(te,{variant:"outline",className:"w-full",onClick:()=>{P(""),E([])},children:"Clear All Filters"})]})]})}),s.jsx(p_,{}),s.jsx(Nn,{})]})]})}const gk=an.BASE_URL;class fK{async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Ae.getToken()}`,"ngrok-skip-browser-warning":"true"}}async getFavorites(){try{const t=await fetch(`${gk}/favorites/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch favorites");const n=await t.json();return n.results||n}catch(t){throw console.error("Error fetching favorites:",t),t}}async toggleFavorite(t){try{const n=await fetch(`${gk}/favorites/toggle/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({product_id:t})});if(!n.ok)throw new Error("Failed to toggle favorite");return await n.json()}catch(n){throw console.error("Error toggling favorite:",n),n}}}const vk=new fK,mK=()=>{const e=lt();$n();const{addToCart:t}=Bn(),{toast:n}=ns(),[r,a]=_.useState([]),[i,o]=_.useState(!0),[l,d]=_.useState([]),[h,f]=_.useState(ht.getLocation());_.useEffect(()=>(m(),ht.subscribe(f)),[]),_.useEffect(()=>{r.length>0&&p()},[r,h]);const u=(P,T,E,I)=>{const R=U=>U*(Math.PI/180),C=R(E-P),D=R(I-T),A=R(P),M=R(E),Z=Math.sin(C/2)*Math.sin(C/2)+Math.cos(A)*Math.cos(M)*Math.sin(D/2)*Math.sin(D/2);return 6371*(2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z)))},m=async()=>{if(!await Ae.getToken()){o(!1);return}try{const T=await vk.getFavorites();a(T)}catch(T){console.error("Error fetching favorites:",T),n({title:"Error",description:"Failed to load favorites",variant:"destructive"})}finally{o(!1)}},p=async()=>{try{const P=[...new Set(r.map(D=>D.product.category).filter(Boolean))];if(P.length===0)return;const T=await Ae.getToken(),E=T?{Authorization:`Token ${T}`}:{},I=new URLSearchParams({page_size:"12"});h&&(I.append("latitude",h.latitude.toString()),I.append("longitude",h.longitude.toString()));const C=((await(await fetch(Jo(`/search/products/?${I}`),{headers:E})).json()).results||[]).filter(D=>P.includes(D.category)).map(D=>{var X,U;const A=((X=D.images)==null?void 0:X.find(F=>F.is_primary))||((U=D.images)==null?void 0:U[0]);let M="N/A",Z=1/0;return h&&D.vendor_latitude&&D.vendor_longitude&&(Z=u(h.latitude,h.longitude,D.vendor_latitude,D.vendor_longitude),M=`${Z.toFixed(1)} km`),{id:D.id,name:D.name,vendor:D.vendor_name||"Unknown Vendor",price:D.price,image:(A==null?void 0:A.image_url)||"/placeholder-product.jpg",distance:M,distanceValue:Z,inStock:D.quantity>0,category:D.category}}).sort((D,A)=>D.distanceValue-A.distanceValue).slice(0,8);d(C)}catch(P){console.error("Error fetching related products:",P)}},w=async P=>{try{await vk.toggleFavorite(P),a(T=>T.filter(E=>E.product.id!==P)),n({title:"Removed from Wishlist",description:"Item has been removed from your wishlist"})}catch{n({title:"Error",description:"Failed to remove from wishlist",variant:"destructive"})}},v=async(P,T)=>{T==null||T.stopPropagation();try{await t(P.product.id,1),n({title:"Added to Cart",description:`${P.product.name} has been added to your cart`})}catch{n({title:"Error",description:"Failed to add to cart",variant:"destructive"})}},x=async(P,T)=>{T==null||T.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:P.product.id,name:P.product.name,price:P.product.price,quantity:1,vendor_name:P.product.vendor_name,vendor_id:P.product.vendor_id,images:P.product.images}}})},y=P=>{e(`/product/${P}`)},[b,j]=_.useState(!1),[N,S]=_.useState(!0);return _.useEffect(()=>{(async()=>{const T=await Ae.getToken();j(!!T),S(!1)})()},[]),N?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):b?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Ht,{className:"h-6 w-6 text-gray-700"})}),s.jsx("div",{}),s.jsxs("span",{className:"bg-red-100 text-red-800 text-sm font-medium px-3 py-1 rounded-full",children:[r.length," items"]})]})}),s.jsxs("div",{className:"p-4 max-w-3xl mx-auto",children:[i?s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):r.length>0?s.jsx("div",{className:"space-y-4",children:r.map(P=>{var T,E;return s.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl border p-4 flex items-center transition-all duration-300 cursor-pointer hover:bg-gray-50",onClick:()=>y(P.product.id),children:[s.jsx("div",{className:"flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden bg-gray-100",children:s.jsx("img",{src:((E=(T=P.product.images)==null?void 0:T[0])==null?void 0:E.image_url)||"/placeholder-product.jpg",alt:P.product.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"ml-6 flex-1",children:[s.jsx("h3",{className:"font-semibold text-xl text-gray-900 truncate",children:P.product.name}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:P.product.vendor_name}),s.jsxs("p",{className:"font-bold text-2xl text-emerald-600 mt-1",children:["Rs ",parseFloat(P.product.price).toFixed(2)]}),s.jsx("div",{className:"flex items-center mt-2",children:P.product.quantity>0?s.jsx("span",{className:"text-green-600 text-sm font-medium bg-green-50 px-2 py-1 rounded-full",children:"In Stock"}):s.jsx("span",{className:"text-red-600 text-sm font-medium bg-red-50 px-2 py-1 rounded-full",children:"Out of Stock"})})]}),s.jsxs("div",{className:"flex flex-col justify-between items-end space-y-2",children:[s.jsx(te,{variant:"ghost",size:"icon",onClick:I=>{I.stopPropagation(),w(P.product.id)},className:"text-gray-500 hover:text-red-600 hover:bg-red-100 rounded-full",children:s.jsx(ro,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{size:"sm",disabled:P.product.quantity<=0,onClick:I=>v(P,I),className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-full disabled:bg-gray-300 disabled:text-gray-500",children:s.jsx(rn,{className:"h-3 w-3 mr-1"})}),s.jsxs(te,{size:"sm",disabled:P.product.quantity<=0,onClick:I=>x(P,I),className:"bg-orange-600 hover:bg-orange-700 text-white rounded-full disabled:bg-gray-300 disabled:text-gray-500",children:[s.jsx(s6,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]})]},P.id)})}):s.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-lg border",children:[s.jsx(dr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your wishlist is empty"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start adding items you love!"}),s.jsx(te,{className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-full px-6 py-2",onClick:()=>e("/"),children:"Browse Products"})]}),l.length>0&&s.jsxs("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Products Near You"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map(P=>s.jsx($e,{className:"p-3 cursor-pointer hover:shadow-md transition-smooth",onClick:()=>e(`/product/${P.id}`),children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"aspect-square mb-2 bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:P.image,alt:P.name,className:"w-full h-full object-cover",onError:T=>{T.target.src="/placeholder-product.jpg"}})}),s.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:P.name}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:P.vendor}),s.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-500 mb-2",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{children:P.distance})]}),s.jsxs("p",{className:"font-semibold text-emerald-600 text-sm mb-2",children:["Rs ",P.price]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(te,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",disabled:!P.inStock,onClick:T=>{T.stopPropagation(),t(P.id,1)},children:s.jsx(rn,{className:"h-3 w-3"})}),s.jsxs(te,{size:"sm",className:"flex-1 h-7 text-xs bg-green-600 hover:bg-green-700",disabled:!P.inStock,onClick:T=>{T.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:P.id,name:P.name,price:P.price,quantity:1,vendor_name:P.vendor,images:[{image_url:P.image}]}}})},children:[s.jsx(Ns,{className:"h-3 w-3"}),"Buy"]})]})]})},P.id))})]})]}),s.jsx(Nn,{})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(dr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Please Login"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"You need to login to view your wishlist"}),s.jsx(te,{onClick:()=>e("/login"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Login"})]})})},pK=async e=>{var t;try{const n=await Ae.getUser();return n?n.user_type===e?{success:!0}:(t=n.available_roles)!=null&&t.includes(e)?e==="vendor"?await v_():await iL():{success:!1,roleNotAvailable:!0}:{success:!1,needsLogin:!0}}catch(n){return console.error("Role ensure error:",n),{success:!1,error:n.message}}},v_=async()=>{var e;try{const t=await Ae.getUser();if(!((e=t==null?void 0:t.available_roles)!=null&&e.includes("vendor")))throw new Error("Vendor role not available");if(t.user_type==="vendor")return console.log(" Already in vendor role"),{success:!0,message:"Already in vendor role"};console.log(" Switching to vendor role...");const{response:n,data:r}=await Ve("/switch-role/",{method:"POST",body:JSON.stringify({role:"vendor"})});if(n.ok){console.log(" Role switch API call successful");const a=(r==null?void 0:r.token)||await Ae.getToken(),i={...t,user_type:"vendor",current_role:"vendor"};console.log(" Updating auth services with vendor role..."),await Ae.setAuth(a,i);const{simplePersistentAuth:o}=await Ue(async()=>{const{simplePersistentAuth:l}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:l}},void 0);await o.saveVendorLogin(a,i),console.log(" Auth services updated successfully");try{const{response:l}=await Ve("/vendor-profiles/");if(l.ok){const d=await l.json();(!d.results||d.results.length===0)&&(console.log(" Creating vendor profile..."),await vK(t))}}catch(l){console.log("Profile check failed, will create on first access:",l)}return{success:!0,message:"Switched to vendor role",user:i}}else throw console.error(" Role switch API failed:",n.status,r),new Error((r==null?void 0:r.error)||"Role switch failed")}catch(t){return console.error(" Role switch error:",t),{success:!1,error:t.message}}},iL=async()=>{var e;try{const t=await Ae.getUser();if(!((e=t==null?void 0:t.available_roles)!=null&&e.includes("customer")))throw new Error("Customer role not available");if(t.user_type==="customer")return console.log(" Already in customer role"),{success:!0,message:"Already in customer role"};console.log(" Switching to customer role...");const{response:n,data:r}=await Ve("/switch-role/",{method:"POST",body:JSON.stringify({role:"customer"})});if(n.ok){console.log(" Role switch API call successful");const a=(r==null?void 0:r.token)||await Ae.getToken(),i={...t,user_type:"customer",current_role:"customer"};return console.log(" Updating auth services with customer role..."),await Ae.setAuth(a,i),console.log(" Auth services updated successfully"),{success:!0,message:"Switched to customer role",user:i}}else throw console.error(" Role switch API failed:",n.status,r),new Error((r==null?void 0:r.error)||"Role switch failed")}catch(t){return console.error(" Role switch error:",t),{success:!1,error:t.message}}},gK=async()=>{var e;try{const t=await Ae.getUser();return t?((e=t.available_roles)==null?void 0:e.includes("vendor"))?t.user_type==="customer"?{hasAccess:!0,needsRoleSwitch:!0}:{hasAccess:!0,needsRoleSwitch:!1}:{hasAccess:!1,needsOnboarding:!0}:{hasAccess:!1,needsLogin:!0}}catch(t){return console.error("Vendor access check error:",t),{hasAccess:!1,needsLogin:!0}}},vK=async e=>{try{const t={business_name:e.username||"My Business",owner_name:e.username||"Owner",business_email:e.email||"",business_phone:e.phone_number||"",business_address:"",city:"",state:"",pincode:"",business_type:"retailer",categories:[],description:"",is_active:!0},{response:n}=await Ve("/vendor-profiles/",{method:"POST",body:JSON.stringify(t)});n.ok&&console.log("Vendor profile created successfully")}catch(t){console.error("Failed to create vendor profile:",t)}};class xK{async saveVendorLogin(t,n){try{if(gt.isNativePlatform()){const{Preferences:r}=await Ue(async()=>{const{Preferences:a}=await Promise.resolve().then(()=>Kv);return{Preferences:a}},void 0);await r.set({key:"vendor_token",value:t}),await r.set({key:"vendor_user",value:JSON.stringify(n)}),await r.set({key:"vendor_time",value:Date.now().toString()})}else localStorage.setItem("vendor_token",t),localStorage.setItem("vendor_user",JSON.stringify(n)),localStorage.setItem("vendor_time",Date.now().toString());console.log(" Vendor login saved")}catch(r){console.error("Save vendor login failed:",r)}}async getVendorAuth(){try{let t=null,n=null,r=null;if(console.log(" Getting vendor auth, isNative:",gt.isNativePlatform()),gt.isNativePlatform()){const{Preferences:d}=await Ue(async()=>{const{Preferences:m}=await Promise.resolve().then(()=>Kv);return{Preferences:m}},void 0),h=await d.get({key:"vendor_token"}),f=await d.get({key:"vendor_user"}),u=await d.get({key:"vendor_time"});t=h.value,n=f.value,r=u.value}else t=localStorage.getItem("vendor_token"),n=localStorage.getItem("vendor_user"),r=localStorage.getItem("vendor_time");if(console.log(" Storage check:",{token:t?"exists":"missing",user:n?"exists":"missing",time:r?"exists":"missing"}),!t||!n||!r)return console.log(" Missing auth data in storage"),null;const a=parseInt(r),i=30*24*60*60*1e3,o=Date.now()-a;if(console.log(" Auth age check:",{loginTime:new Date(a).toISOString(),ageHours:Math.round(o/(1e3*60*60)),maxAgeHours:Math.round(i/(1e3*60*60)),isValid:o<=i}),o>i)return console.log(" Auth expired, clearing"),await this.clearVendorAuth(),null;const l=JSON.parse(n);return console.log(" Vendor auth found:",{username:l.username,user_type:l.user_type,available_roles:l.available_roles}),{token:t,user:l}}catch(t){return console.error(" Get vendor auth failed:",t),null}}async clearVendorAuth(){try{if(gt.isNativePlatform()){const{Preferences:t}=await Ue(async()=>{const{Preferences:n}=await Promise.resolve().then(()=>Kv);return{Preferences:n}},void 0);await t.remove({key:"vendor_token"}),await t.remove({key:"vendor_user"}),await t.remove({key:"vendor_time"})}else localStorage.removeItem("vendor_token"),localStorage.removeItem("vendor_user"),localStorage.removeItem("vendor_time");console.log(" Vendor auth cleared")}catch(t){console.error("Clear vendor auth failed:",t)}}async isVendorLoggedIn(){var n;const t=await this.getVendorAuth();return t!==null&&((n=t.user)==null?void 0:n.user_type)==="vendor"}}const oL=new xK,Zs=Object.freeze(Object.defineProperty({__proto__:null,simplePersistentAuth:oL},Symbol.toStringTag,{value:"Module"}));function lL(){var l,d,h,f,u,m,p,w,v,x,y,b,j;const{state:e,login:t}=$n(),n=lt();console.log(" RoleSwitcher rendered, user:",e.user),console.log(" Available roles:",(l=e.user)==null?void 0:l.available_roles),console.log(" Available roles length:",(h=(d=e.user)==null?void 0:d.available_roles)==null?void 0:h.length),console.log(" Current role:",(f=e.user)==null?void 0:f.user_type),console.log(" User type:",(u=e.user)==null?void 0:u.user_type),console.log(" Roles check condition:",!((m=e.user)!=null&&m.available_roles)||e.user.available_roles.length<=1);const r=async N=>{var S,P;console.log(" handleRoleSwitch called with role:",N);try{if(N==="vendor")if((P=(S=e.user)==null?void 0:S.available_roles)!=null&&P.includes("vendor")){console.log(" User has vendor role, switching...");const T=await v_();if(T.success){console.log(" Vendor role switch successful");const E=T.user||{...e.user,user_type:"vendor",current_role:"vendor"},I=await Ae.getToken();await t(E,I),await oL.saveVendorLogin(I,E),setTimeout(()=>{console.log(" Navigating to vendor dashboard"),n("/vendor/dashboard")},100)}else console.error(" Vendor role switch failed:",T.error)}else console.log(" Starting vendor onboarding for customer"),n("/vendor/onboarding");else{console.log(" Switching to customer role...");const T=await iL();if(T.success){console.log(" Customer role switch successful");const E=T.user||{...e.user,user_type:"customer",current_role:"customer"},I=await Ae.getToken();await t(E,I),setTimeout(()=>{console.log(" Navigating to customer home"),n("/home")},100)}else console.error(" Customer role switch failed:",T.error)}}catch(T){console.error(" Role switch error:",T)}};if(!((p=e.user)!=null&&p.available_roles)||e.user.available_roles.length<=1)return((w=e.user)==null?void 0:w.user_type)==="customer"&&!((x=(v=e.user)==null?void 0:v.available_roles)!=null&&x.includes("vendor"))?s.jsx("button",{onClick:()=>r("vendor"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium w-full",children:"Become a Vendor"}):(console.log(" RoleSwitcher: Not showing button - insufficient roles"),console.log("Available roles:",(y=e.user)==null?void 0:y.available_roles),s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Role switching not available"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current role: ",((b=e.user)==null?void 0:b.user_type)||"Unknown"]})]}));const a=window.location.pathname.startsWith("/vendor"),i=a?"vendor":"customer",o=i==="vendor"?"customer":"vendor";return console.log(" Current page context:",{isOnVendorPage:a,currentRole:i,otherRole:o}),o?(console.log(" RoleSwitcher: Showing button for role switch to:",o),s.jsx("button",{onClick:()=>r(o),className:"px-6 py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white rounded-xl hover:from-indigo-600 hover:via-purple-600 hover:to-pink-600 transition-all duration-300 text-sm font-semibold w-full shadow-lg hover:shadow-xl transform hover:scale-105 border border-white/20 backdrop-blur-sm",children:s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Switch to ",o==="customer"?"Customer":"Vendor"]})})):(console.log(" RoleSwitcher: No other role found"),s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"No other roles available"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current role: ",((j=e.user)==null?void 0:j.user_type)||"Unknown"]})]}))}function yK(){const[e,t]=_.useState(""),[n,r]=_.useState(""),[a,i]=_.useState(!1),[o,l]=_.useState(!1),[d,h]=_.useState(""),[f,u]=_.useState(""),[m,p]=_.useState(!1),[w,v]=_.useState(!1);_.useEffect(()=>{x()},[]);const x=async()=>{p(!1),v(!1)},y=async()=>{if(h(""),u(""),e.length<6){h("Password must be at least 6 characters long");return}if(e!==n){h("Passwords do not match");return}l(!0);try{const b=await qc.setupPassword(e);b.success?(u("Password set successfully! You can now login with email and password."),p(!1),t(""),r("")):h(b.error||"Failed to setup password")}catch{h("Failed to setup password. Please try again.")}finally{l(!1)}};return!m||!w?null:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Set Up Password for Traditional Login"}),s.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"You signed up with Google. Set up a password to also login with email and password."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(je,{type:a?"text":"password",value:e,onChange:b=>t(b.target.value),placeholder:"Enter password (min 6 characters)",className:"pr-10 bg-white",size:"sm"}),s.jsx("button",{type:"button",onClick:()=>i(!a),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsx(je,{type:"password",value:n,onChange:b=>r(b.target.value),placeholder:"Confirm password",className:"bg-white",size:"sm"}),d&&s.jsx("p",{className:"text-red-600 text-sm",children:d}),f&&s.jsx("p",{className:"text-green-600 text-sm",children:f}),s.jsx(te,{onClick:y,disabled:!e||!n||o,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:o?"Setting up...":"Set Password"})]})]})]})})}const bK=[{icon:kT,label:"My Orders",path:"/orders"},{icon:dr,label:"Wishlist",path:"/wishlist"},{icon:Jr,label:"Personal Information",path:"/profile-edit"},{icon:er,label:"Privacy & Security",path:"/privacy"}],wK=()=>{const e=lt(),{logout:t,state:n,login:r}=$n(),{navigateWithAuth:a}=vo(),[i,o]=_.useState(null),[l,d]=_.useState(!0),[h,f]=_.useState("");_.useEffect(()=>{u()},[]);const u=async()=>{try{if(!await Ae.getToken()){a("/profile");return}const{response:v,data:x}=await Ve("/profile/");if(!v.ok&&x&&console.log("Profile API response:",x),v.status===401){console.log("Profile endpoint returned 401, using stored user data");const y=await Ae.getUser();if(y){o({email:y.email||y.username||"User",avatar:"/placeholder-avatar.jpg"});return}else{a("/profile");return}}if(!v.ok)throw new Error("Failed to fetch profile");if(n.user){const y={...n.user,available_roles:x.available_roles||n.user.available_roles,user_type:x.user_type||n.user.user_type},b=await Ae.getToken();await r(y,b)}o({email:x.email,avatar:x.profile_picture?x.profile_picture.startsWith("http")?x.profile_picture:`${Qe}media/${x.profile_picture}`:"/placeholder-avatar.jpg"})}catch(w){f(w.message),console.error("Error fetching profile:",w)}finally{d(!1)}},m=async()=>{try{await Ve("/logout/",{method:"POST"})}catch(w){console.error("Logout error:",w)}finally{await t(),e("/login")}},p=async w=>{if(w)try{const v=new FormData;v.append("profile_picture",w);const{response:x,data:y}=await Ve("/profile/upload-picture/",{method:"POST",body:v});x.ok&&y&&o(b=>({...b,avatar:y.profile_picture}))}catch(v){console.error("Profile image upload error:",v)}};return l?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):h||!i?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:h||"Failed to load profile"}),s.jsx(te,{onClick:()=>e("/login"),children:"Go to Login"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex flex-col items-center pt-6 pb-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden mb-3 cursor-pointer hover:bg-gray-300 transition-colors",onClick:()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=v=>{var y;const x=(y=v.target.files)==null?void 0:y[0];x&&p(x)},w.click()},children:i.avatar&&i.avatar!=="/placeholder-avatar.jpg"?s.jsx("img",{src:i.avatar,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-600 font-semibold text-lg",children:i.email?i.email.charAt(0).toUpperCase():"U"})}),s.jsx(te,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=v=>{var y;const x=(y=v.target.files)==null?void 0:y[0];x&&p(x)},w.click()},children:s.jsx(ka,{className:"h-3 w-3"})})]}),s.jsx("p",{className:"text-gray-800 text-base font-medium",children:i.email})]})}),s.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-100 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-1",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Account Type"]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Switch between your Customer and Vendor accounts"}),s.jsx(lL,{})]}),s.jsxs(te,{variant:"outline",className:"w-full flex items-center justify-center py-4 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:m,children:[s.jsx(tw,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium",children:"Logout"})]})]}),s.jsx(yK,{}),s.jsxs($e,{children:[s.jsx(Ct,{className:"pb-3",children:s.jsx(Tt,{className:"text-base",children:"Account"})}),s.jsx(ze,{className:"space-y-1",children:bK.map((w,v)=>{const x=w.icon;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>a(w.path),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:s.jsx(x,{className:"h-4 w-4 text-primary"})}),s.jsx("span",{className:"font-medium text-sm",children:w.label})]}),s.jsx("div",{className:"text-gray-400",children:""})]},v)})})]})]}),s.jsx(p_,{}),s.jsx(Nn,{})]})};var _K="Label",cL=_.forwardRef((e,t)=>s.jsx(ut.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));cL.displayName=_K;var dL=cL;const jK=kh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xe=_.forwardRef(({className:e,...t},n)=>s.jsx(dL,{ref:n,className:it(jK(),e),...t}));xe.displayName=dL.displayName;const Ys=_.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:it("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Ys.displayName="Textarea";const NK=()=>{const e=lt(),{toast:t}=ns(),[n,r]=_.useState(!1),[a,i]=_.useState(!0),[o,l]=_.useState(!1),[d,h]=_.useState({username:"",email:"",phone_number:"",address:"",date_of_birth:"",profile_picture:null});_.useEffect(()=>{f()},[]);const f=async()=>{try{const w=await Ae.getToken();if(!w){e("/login");return}const v=await fetch(Qe+"profile/",{headers:{Authorization:`Token ${w}`,"ngrok-skip-browser-warning":"true"}});if(!v.ok)throw new Error("Failed to fetch profile");const x=await v.json();h({username:x.username||"",email:x.email||"",phone_number:x.phone_number||"",address:x.address||"",date_of_birth:x.date_of_birth||"",profile_picture:x.profile_picture?x.profile_picture.startsWith("http")?x.profile_picture:`${Qe}media/${x.profile_picture}`:null})}catch(w){console.error("Error fetching profile:",w),t({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{i(!1)}},u=async()=>{l(!0);try{const w=await Ae.getToken();if(!w)return;if((await fetch(Qe+"profile/update/",{method:"PUT",headers:{Authorization:`Token ${w}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({username:d.username,phone_number:d.phone_number,address:d.address,date_of_birth:d.date_of_birth||null})})).ok)r(!1),t({title:"Success",description:"Profile updated successfully!"});else throw new Error("Failed to update profile")}catch(w){console.error("Error saving profile:",w),t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}finally{l(!1)}},m=async w=>{if(w)try{const v=await Ae.getToken();if(!v)return;const x=new FormData;x.append("profile_picture",w);const y=await fetch(Qe+"profile/upload-picture/",{method:"POST",headers:{Authorization:`Token ${v}`,"ngrok-skip-browser-warning":"true"},body:x});if(y.ok){const b=await y.json();h(j=>({...j,profile_picture:b.profile_picture})),t({title:"Success",description:"Profile picture updated successfully!"})}else throw new Error("Failed to upload image")}catch(v){console.error("Profile image upload error:",v),t({title:"Error",description:"Failed to upload profile picture",variant:"destructive"})}},p=(w,v)=>{h(x=>({...x,[w]:v}))};return a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-100 sticky top-0 z-30",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e("/profile"),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("h1",{className:"text-lg font-semibold",children:"Personal Information"})]}),s.jsx(te,{onClick:()=>n?u():r(!0),size:"sm",className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:n?s.jsxs(s.Fragment,{children:[s.jsx(od,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ch,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),s.jsx("div",{className:"p-4 pb-20",children:s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs(Tt,{className:"flex items-center gap-2",children:[s.jsx(Jr,{className:"h-5 w-5"}),"Profile Information"]})}),s.jsxs(ze,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden ${n?"cursor-pointer hover:bg-gray-200":""}`,onClick:n?()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=v=>{var y;const x=(y=v.target.files)==null?void 0:y[0];x&&m(x)},w.click()}:void 0,children:d.profile_picture?s.jsx("img",{src:d.profile_picture,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-600 font-semibold text-2xl",children:d.username?d.username.charAt(0).toUpperCase():"U"})}),n&&s.jsx(te,{size:"sm",className:"absolute -bottom-1 -right-1 w-8 h-8 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=v=>{var y;const x=(y=v.target.files)==null?void 0:y[0];x&&m(x)},w.click()},children:s.jsx(ka,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n?"Click to change profile picture":"Profile Picture"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"username",children:"Username"}),s.jsx(je,{id:"username",value:d.username,onChange:w=>p("username",w.target.value),disabled:!n,className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"email",children:"Email"}),s.jsx(je,{id:"email",type:"email",value:d.email,disabled:!0,className:"mt-1 bg-gray-50"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"phone",children:"Phone Number"}),s.jsx(je,{id:"phone",value:d.phone_number,onChange:w=>p("phone_number",w.target.value),disabled:!n,className:"mt-1",placeholder:"Enter your phone number"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"address",children:"Address"}),s.jsx(Ys,{id:"address",value:d.address,onChange:w=>p("address",w.target.value),disabled:!n,className:"mt-1",placeholder:"Enter your address",rows:3})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"dob",children:"Date of Birth"}),s.jsx(je,{id:"dob",type:"date",value:d.date_of_birth||"",onChange:w=>p("date_of_birth",w.target.value||null),disabled:!n,className:"mt-1"})]})]})]})]})}),s.jsx(Nn,{})]})},SK=()=>{const e=lt(),{toast:t}=ns(),[n,r]=_.useState(!0),[a,i]=_.useState(""),[o,l]=_.useState(!1),[d,h]=_.useState(""),[f,u]=_.useState(!1);_.useEffect(()=>{(async()=>{try{const w=await Ae.getToken();if(!w){e("/login");return}const v=await fetch(Qe+"profile/",{headers:{Authorization:`Token ${w}`,"ngrok-skip-browser-warning":"true"}});if(!v.ok)throw new Error("Failed to fetch profile");const x=await v.json(),y=(x==null?void 0:x.plain_password)||"";i(y)}catch(w){console.error(w)}})()},[]);const m=async()=>{if(!d){t({title:"Error",description:"New password is required",variant:"destructive"});return}u(!0);try{const p=await Ae.getToken();if(!p){t({title:"Error",description:"You are not authenticated. Please log in.",variant:"destructive"}),e("/login");return}const w=await fetch(Qe+"change-password/simple/",{method:"POST",headers:{Authorization:`Token ${p}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({new_password:d})});if(!w.ok){const x=await w.json();throw new Error(x.error||"Failed to change password")}const v=await w.json();await Ae.setAuth(v.token,await Ae.getUser()),t({title:"Success",description:"Password changed successfully"}),i(d),h(""),l(!1)}catch(p){t({title:"Error",description:p instanceof Error?p.message:"Failed to change password",variant:"destructive"})}finally{u(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center gap-3 p-4",children:[s.jsx(te,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Privacy & Security"})]})}),s.jsx("div",{className:"p-4 space-y-6 pb-20",children:s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(er,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"font-semibold",children:"Password"})]}),o?s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{children:"New Password"}),s.jsx(je,{type:"text",value:d,onChange:p=>h(p.target.value),placeholder:"Enter new password"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{onClick:m,disabled:f,children:f?"Saving...":"Save"}),s.jsx(te,{variant:"outline",onClick:()=>{l(!1),h("")},disabled:f,children:"Cancel"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{children:"Your Password"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(je,{type:n?"text":"password",value:a,disabled:!0,className:"bg-gray-100"}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>r(!n),children:n?s.jsx(Qb,{className:"h-4 w-4"}):s.jsx(qs,{className:"h-4 w-4"})})]}),s.jsx(te,{onClick:()=>l(!0),disabled:f,children:"Change Password"})]})]})}),s.jsx(Nn,{})]})};function kK(){const e=lt();return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 max-w-4xl mx-auto",children:[s.jsx(te,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full hover:bg-gray-100",children:s.jsx(Ht,{className:"h-5 w-5 text-gray-800"})}),s.jsxs("h1",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(er,{className:"h-5 w-5 text-blue-600"}),"Privacy Policy"]}),s.jsx("div",{className:"w-10"})]})}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[s.jsxs($e,{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx(er,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Privacy Policy"}),s.jsxs("p",{className:"text-gray-600",children:["Last updated: ",new Date().toLocaleDateString()]})]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"At Ezeyway, we are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our marketplace platform and services."})})]}),s.jsxs($e,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(qs,{className:"h-5 w-5 text-blue-600"}),"Information We Collect"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Personal Information"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 ml-4",children:[s.jsx("li",{children:"Name, email address, phone number"}),s.jsx("li",{children:"Delivery address and billing information"}),s.jsx("li",{children:"Profile picture and account preferences"}),s.jsx("li",{children:"Payment information (processed securely by third-party providers)"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Usage Information"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 ml-4",children:[s.jsx("li",{children:"Device information and IP address"}),s.jsx("li",{children:"Location data (with your permission)"}),s.jsx("li",{children:"App usage patterns and preferences"}),s.jsx("li",{children:"Search queries and product interactions"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Vendor Information"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 ml-4",children:[s.jsx("li",{children:"Business name, registration details, and tax information"}),s.jsx("li",{children:"Product listings, descriptions, and images"}),s.jsx("li",{children:"Bank account details for payments"}),s.jsx("li",{children:"Business location and operating hours"})]})]})]})]}),s.jsxs($e,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(Up,{className:"h-5 w-5 text-blue-600"}),"How We Use Your Information"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Service Provision"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Process orders and payments"}),s.jsx("li",{children:"Facilitate delivery services"}),s.jsx("li",{children:"Provide customer support"}),s.jsx("li",{children:"Manage user accounts"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Platform Improvement"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Analyze usage patterns"}),s.jsx("li",{children:"Improve app functionality"}),s.jsx("li",{children:"Personalize user experience"}),s.jsx("li",{children:"Develop new features"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Communication"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Send order updates"}),s.jsx("li",{children:"Notify about promotions"}),s.jsx("li",{children:"Provide important announcements"}),s.jsx("li",{children:"Respond to inquiries"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Legal Compliance"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Comply with regulations"}),s.jsx("li",{children:"Prevent fraud and abuse"}),s.jsx("li",{children:"Resolve disputes"}),s.jsx("li",{children:"Enforce terms of service"})]})]})]})]}),s.jsxs($e,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(r1,{className:"h-5 w-5 text-blue-600"}),"Information Sharing and Disclosure"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-blue-800 font-medium mb-2",children:"We do not sell your personal information to third parties."}),s.jsx("p",{className:"text-blue-700 text-sm",children:"We may share information only in the following circumstances:"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"With Vendors"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Order details and delivery information to fulfill your purchases"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Service Providers"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Payment processors, delivery partners, and technical service providers"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Legal Requirements"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"When required by law, court order, or government regulations"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Business Transfers"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"In case of merger, acquisition, or sale of business assets"})]})]})]})]}),s.jsxs($e,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(r1,{className:"h-5 w-5 text-green-600"}),"Data Security"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Technical Safeguards"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"SSL/TLS encryption for data transmission"}),s.jsx("li",{children:"Secure data storage with encryption"}),s.jsx("li",{children:"Regular security audits and updates"}),s.jsx("li",{children:"Access controls and authentication"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Operational Safeguards"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Limited employee access to personal data"}),s.jsx("li",{children:"Regular staff training on privacy"}),s.jsx("li",{children:"Incident response procedures"}),s.jsx("li",{children:"Data backup and recovery systems"})]})]})]})]}),s.jsxs($e,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(wa,{className:"h-5 w-5 text-purple-600"}),"Your Privacy Rights"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Access & Control"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"View your personal information"}),s.jsx("li",{children:"Update or correct your data"}),s.jsx("li",{children:"Delete your account"}),s.jsx("li",{children:"Export your data"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Communication Preferences"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Opt-out of marketing emails"}),s.jsx("li",{children:"Manage push notifications"}),s.jsx("li",{children:"Control location sharing"}),s.jsx("li",{children:"Adjust privacy settings"})]})]})]})]})]})]})}function CK(){const e=lt(),[t,n]=_.useState(1),[r,a]=_.useState(""),[i,o]=_.useState(""),[l,d]=_.useState(""),[h,f]=_.useState(""),[u,m]=_.useState(""),[p,w]=_.useState(""),[v,x]=_.useState(!1),[y,b]=_.useState(!1),[j,N]=_.useState(""),[S,P]=_.useState(!1),T=async()=>{var C,D,A;if(h!==u){N("Passwords do not match");return}b(!0),N("");try{const M=await fetch(Qe+"register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,email:l,password:h,user_type:"customer",phone_number:i})}),Z=await M.json();if(!M.ok){const X=((C=Z.username)==null?void 0:C[0])||((D=Z.email)==null?void 0:D[0])||Z.message||((A=Object.values(Z)[0])==null?void 0:A[0])||"Registration failed";throw new Error(X)}n(2)}catch(M){N(M.message)}finally{b(!1)}},E=C=>{w(C),C.length===6&&I(C)},I=async C=>{b(!0),N("");try{const D=await fetch(Qe+"verify-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,otp:C})}),A=await D.json();if(!D.ok)throw new Error(A.error||"Verification failed");localStorage.setItem("token",A.token),e("/home")}catch(D){N(D.message)}finally{b(!1)}},O=async()=>{b(!0),N("");try{const C=await fetch(Qe+"send-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})}),D=await C.json();if(!C.ok)throw new Error(D.error||"Failed to resend OTP");N("OTP resent successfully")}catch(C){N(C.message)}finally{b(!1)}},R=()=>{e("/login")};return s.jsx("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"w-full max-w-80 mx-auto px-4",children:[t===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:hi,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customer Signup"})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:r,onChange:C=>a(C.target.value),placeholder:"Full Name",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(je,{type:"tel",value:i,onChange:C=>o(C.target.value),placeholder:"Phone Number",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(je,{type:"email",value:l,onChange:C=>d(C.target.value),placeholder:"Email Address",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"relative",children:[s.jsx(je,{type:v?"text":"password",value:h,onChange:C=>f(C.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>x(!v),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsx(je,{type:"password",value:u,onChange:C=>m(C.target.value),placeholder:"Confirm Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"flex items-start space-x-2 w-80",children:[s.jsx("input",{type:"checkbox",id:"agreeToTerms",checked:S,onChange:C=>P(C.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 mt-1"}),s.jsxs("label",{htmlFor:"agreeToTerms",className:"text-sm text-gray-700",children:["I agree to the"," ",s.jsx("button",{type:"button",onClick:()=>e("/privacy-policy"),className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})," ","and Terms & Conditions"]})]}),j&&s.jsx("p",{className:"text-red-600 text-center",children:j}),s.jsx(te,{onClick:T,disabled:!r||!i||!l||!h||!u||h!==u||!S||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Creating Account...":"Sign Up"})]}),s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-700 text-sm",children:"Already have an account? Login"})})]}),t===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:hi,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Email"}),s.jsxs("p",{className:"text-gray-600 mt-2",children:["Code sent to ",l]})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:p,onChange:C=>E(C.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest w-80"}),y&&s.jsx("div",{className:"text-center text-blue-600",children:"Verifying..."}),j&&s.jsx("p",{className:"text-red-600 text-center",children:j}),s.jsx("button",{onClick:()=>n(1),className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Change details"}),s.jsx("button",{onClick:O,disabled:y,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend code"})]})]})]})})})}function EK(){const e=lt(),[t,n]=_.useState(""),r=o=>{o.preventDefault(),e("/login")},a=()=>{e("/login")},i=()=>{console.log("Resend link clicked")};return s.jsx("div",{className:"min-h-screen flex items-end justify-center bg-cover bg-center bg-no-repeat p-4 pb-12",style:{backgroundImage:"url(/images/forgot.png)"},children:s.jsxs("div",{className:"w-full max-w-sm bg-white rounded-lg shadow-lg p-4",style:{backgroundColor:"#856043"},children:[s.jsx("h2",{className:"text-xl font-bold text-white text-center mb-5",children:"Forgot Password"}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"email",className:"text-white font-medium",children:"Email or Phone Number"}),s.jsx(je,{id:"email",type:"text",value:t,onChange:o=>n(o.target.value),placeholder:"Enter your email or phone",className:"mt-1 w-full rounded-md border-gray-300 focus:border-white focus:ring-white text-gray-900"})]}),s.jsx(te,{onClick:r,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Submit"}),s.jsx(te,{onClick:i,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Resend Link"}),s.jsx(te,{onClick:a,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Back to Login"})]})]})})}var x_="Radio",[TK,uL]=jn(x_),[PK,AK]=TK(x_),hL=_.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:d,form:h,...f}=e,[u,m]=_.useState(null),p=Nt(t,x=>m(x)),w=_.useRef(!1),v=u?h||!!u.closest("form"):!0;return s.jsxs(PK,{scope:n,checked:a,disabled:o,children:[s.jsx(ut.button,{type:"button",role:"radio","aria-checked":a,"data-state":gL(a),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:p,onClick:Ze(e.onClick,x=>{a||d==null||d(),v&&(w.current=x.isPropagationStopped(),w.current||x.stopPropagation())})}),v&&s.jsx(pL,{control:u,bubbles:!w.current,name:r,value:l,checked:a,required:i,disabled:o,form:h,style:{transform:"translateX(-100%)"}})]})});hL.displayName=x_;var fL="RadioIndicator",mL=_.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...a}=e,i=AK(fL,n);return s.jsx(fn,{present:r||i.checked,children:s.jsx(ut.span,{"data-state":gL(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});mL.displayName=fL;var OK="RadioBubbleInput",pL=_.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=_.useRef(null),l=Nt(o,i),d=rg(n),h=Gp(t);return _.useEffect(()=>{const f=o.current;if(!f)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(d!==n&&p){const w=new Event("click",{bubbles:r});p.call(f,n),f.dispatchEvent(w)}},[d,n,r]),s.jsx(ut.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pL.displayName=OK;function gL(e){return e?"checked":"unchecked"}var RK=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],vg="RadioGroup",[LK,uie]=jn(vg,[md,uL]),vL=md(),xL=uL(),[IK,MK]=LK(vg),yL=_.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:d,dir:h,loop:f=!0,onValueChange:u,...m}=e,p=vL(n),w=fd(h),[v,x]=ta({prop:i,defaultProp:a??null,onChange:u,caller:vg});return s.jsx(IK,{scope:n,name:r,required:o,disabled:l,value:v,onValueChange:x,children:s.jsx(Sw,{asChild:!0,...p,orientation:d,dir:w,loop:f,children:s.jsx(ut.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":l?"":void 0,dir:w,...m,ref:t})})})});yL.displayName=vg;var bL="RadioGroupItem",wL=_.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...a}=e,i=MK(bL,n),o=i.disabled||r,l=vL(n),d=xL(n),h=_.useRef(null),f=Nt(t,h),u=i.value===a.value,m=_.useRef(!1);return _.useEffect(()=>{const p=v=>{RK.includes(v.key)&&(m.current=!0)},w=()=>m.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",w)}},[]),s.jsx(kw,{asChild:!0,...l,focusable:!o,active:u,children:s.jsx(hL,{disabled:o,required:i.required,checked:u,...d,...a,name:i.name,ref:f,onCheck:()=>i.onValueChange(a.value),onKeyDown:Ze(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Ze(a.onFocus,()=>{var p;m.current&&((p=h.current)==null||p.click())})})})});wL.displayName=bL;var DK="RadioGroupIndicator",_L=_.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,a=xL(n);return s.jsx(mL,{...a,...r,ref:t})});_L.displayName=DK;var jL=yL,NL=wL,FK=_L;const SL=_.forwardRef(({className:e,...t},n)=>s.jsx(jL,{className:it("grid gap-2",e),...t,ref:n}));SL.displayName=jL.displayName;const f0=_.forwardRef(({className:e,...t},n)=>s.jsx(NL,{ref:n,className:it("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(FK,{className:"flex items-center justify-center",children:s.jsx(_T,{className:"h-2.5 w-2.5 fill-current text-current"})})}));f0.displayName=NL.displayName;var $K="Separator",xk="horizontal",BK=["horizontal","vertical"],kL=_.forwardRef((e,t)=>{const{decorative:n,orientation:r=xk,...a}=e,i=zK(r)?r:xk,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(ut.div,{"data-orientation":i,...l,...a,ref:t})});kL.displayName=$K;function zK(e){return BK.includes(e)}var CL=kL;const Aa=_.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>s.jsx(CL,{ref:a,decorative:n,orientation:t,className:it("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Aa.displayName=CL.displayName;function VK(e,t){const n=_.useRef(t);_.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function UK(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const qK=1;function HK(e){return Object.freeze({__version:qK,map:e})}function y_(e,t){return Object.freeze({...e,...t})}const EL=_.createContext(null),TL=EL.Provider;function b_(){const e=_.useContext(EL);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function PL(e){function t(n,r){const{instance:a,context:i}=e(n).current;return _.useImperativeHandle(r,()=>a),n.children==null?null:Re.createElement(TL,{value:i},n.children)}return _.forwardRef(t)}function WK(e){function t(n,r){const{instance:a}=e(n).current;return _.useImperativeHandle(r,()=>a),null}return _.forwardRef(t)}function AL(e,t){const n=_.useRef();_.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function w_(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}var m0={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(Ra,function(n){var r="1.9.4";function a(c){var g,k,$,K;for(k=1,$=arguments.length;k<$;k++){K=arguments[k];for(g in K)c[g]=K[g]}return c}var i=Object.create||function(){function c(){}return function(g){return c.prototype=g,new c}}();function o(c,g){var k=Array.prototype.slice;if(c.bind)return c.bind.apply(c,k.call(arguments,1));var $=k.call(arguments,2);return function(){return c.apply(g,$.length?$.concat(k.call(arguments)):arguments)}}var l=0;function d(c){return"_leaflet_id"in c||(c._leaflet_id=++l),c._leaflet_id}function h(c,g,k){var $,K,ee,pe;return pe=function(){$=!1,K&&(ee.apply(k,K),K=!1)},ee=function(){$?K=arguments:(c.apply(k,arguments),setTimeout(pe,g),$=!0)},ee}function f(c,g,k){var $=g[1],K=g[0],ee=$-K;return c===$&&k?c:((c-K)%ee+ee)%ee+K}function u(){return!1}function m(c,g){if(g===!1)return c;var k=Math.pow(10,g===void 0?6:g);return Math.round(c*k)/k}function p(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function w(c){return p(c).split(/\s+/)}function v(c,g){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?i(c.options):{});for(var k in g)c.options[k]=g[k];return c.options}function x(c,g,k){var $=[];for(var K in c)$.push(encodeURIComponent(k?K.toUpperCase():K)+"="+encodeURIComponent(c[K]));return(!g||g.indexOf("?")===-1?"?":"&")+$.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function b(c,g){return c.replace(y,function(k,$){var K=g[$];if(K===void 0)throw new Error("No value provided for variable "+k);return typeof K=="function"&&(K=K(g)),K})}var j=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function N(c,g){for(var k=0;k<c.length;k++)if(c[k]===g)return k;return-1}var S="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var T=0;function E(c){var g=+new Date,k=Math.max(0,16-(g-T));return T=g+k,window.setTimeout(c,k)}var I=window.requestAnimationFrame||P("RequestAnimationFrame")||E,O=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function R(c,g,k){if(k&&I===E)c.call(g);else return I.call(window,o(c,g))}function C(c){c&&O.call(window,c)}var D={__proto__:null,extend:a,create:i,bind:o,get lastId(){return l},stamp:d,throttle:h,wrapNum:f,falseFn:u,formatNum:m,trim:p,splitWords:w,setOptions:v,getParamString:x,template:b,isArray:j,indexOf:N,emptyImageUrl:S,requestFn:I,cancelFn:O,requestAnimFrame:R,cancelAnimFrame:C};function A(){}A.extend=function(c){var g=function(){v(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},k=g.__super__=this.prototype,$=i(k);$.constructor=g,g.prototype=$;for(var K in this)Object.prototype.hasOwnProperty.call(this,K)&&K!=="prototype"&&K!=="__super__"&&(g[K]=this[K]);return c.statics&&a(g,c.statics),c.includes&&(M(c.includes),a.apply(null,[$].concat(c.includes))),a($,c),delete $.statics,delete $.includes,$.options&&($.options=k.options?i(k.options):{},a($.options,c.options)),$._initHooks=[],$.callInitHooks=function(){if(!this._initHooksCalled){k.callInitHooks&&k.callInitHooks.call(this),this._initHooksCalled=!0;for(var ee=0,pe=$._initHooks.length;ee<pe;ee++)$._initHooks[ee].call(this)}},g},A.include=function(c){var g=this.prototype.options;return a(this.prototype,c),c.options&&(this.prototype.options=g,this.mergeOptions(c.options)),this},A.mergeOptions=function(c){return a(this.prototype.options,c),this},A.addInitHook=function(c){var g=Array.prototype.slice.call(arguments,1),k=typeof c=="function"?c:function(){this[c].apply(this,g)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(k),this};function M(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=j(c)?c:[c];for(var g=0;g<c.length;g++)c[g]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(c,g,k){if(typeof c=="object")for(var $ in c)this._on($,c[$],g);else{c=w(c);for(var K=0,ee=c.length;K<ee;K++)this._on(c[K],g,k)}return this},off:function(c,g,k){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var $ in c)this._off($,c[$],g);else{c=w(c);for(var K=arguments.length===1,ee=0,pe=c.length;ee<pe;ee++)K?this._off(c[ee]):this._off(c[ee],g,k)}return this},_on:function(c,g,k,$){if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}if(this._listens(c,g,k)===!1){k===this&&(k=void 0);var K={fn:g,ctx:k};$&&(K.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(K)}},_off:function(c,g,k){var $,K,ee;if(this._events&&($=this._events[c],!!$)){if(arguments.length===1){if(this._firingCount)for(K=0,ee=$.length;K<ee;K++)$[K].fn=u;delete this._events[c];return}if(typeof g!="function"){console.warn("wrong listener type: "+typeof g);return}var pe=this._listens(c,g,k);if(pe!==!1){var Ee=$[pe];this._firingCount&&(Ee.fn=u,this._events[c]=$=$.slice()),$.splice(pe,1)}}},fire:function(c,g,k){if(!this.listens(c,k))return this;var $=a({},g,{type:c,target:this,sourceTarget:g&&g.sourceTarget||this});if(this._events){var K=this._events[c];if(K){this._firingCount=this._firingCount+1||1;for(var ee=0,pe=K.length;ee<pe;ee++){var Ee=K[ee],Oe=Ee.fn;Ee.once&&this.off(c,Oe,Ee.ctx),Oe.call(Ee.ctx||this,$)}this._firingCount--}}return k&&this._propagateEvent($),this},listens:function(c,g,k,$){typeof c!="string"&&console.warn('"string" type argument expected');var K=g;typeof g!="function"&&($=!!g,K=void 0,k=void 0);var ee=this._events&&this._events[c];if(ee&&ee.length&&this._listens(c,K,k)!==!1)return!0;if($){for(var pe in this._eventParents)if(this._eventParents[pe].listens(c,g,k,$))return!0}return!1},_listens:function(c,g,k){if(!this._events)return!1;var $=this._events[c]||[];if(!g)return!!$.length;k===this&&(k=void 0);for(var K=0,ee=$.length;K<ee;K++)if($[K].fn===g&&$[K].ctx===k)return K;return!1},once:function(c,g,k){if(typeof c=="object")for(var $ in c)this._on($,c[$],g,!0);else{c=w(c);for(var K=0,ee=c.length;K<ee;K++)this._on(c[K],g,k,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[d(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[d(c)],this},_propagateEvent:function(c){for(var g in this._eventParents)this._eventParents[g].fire(c.type,a({layer:c.target,propagatedFrom:c.target},c),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var X=A.extend(Z);function U(c,g,k){this.x=k?Math.round(c):c,this.y=k?Math.round(g):g}var F=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(c){return this.clone()._add(B(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(B(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new U(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new U(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=F(this.x),this.y=F(this.y),this},distanceTo:function(c){c=B(c);var g=c.x-this.x,k=c.y-this.y;return Math.sqrt(g*g+k*k)},equals:function(c){return c=B(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=B(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function B(c,g,k){return c instanceof U?c:j(c)?new U(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new U(c.x,c.y):new U(c,g,k)}function z(c,g){if(c)for(var k=g?[c,g]:c,$=0,K=k.length;$<K;$++)this.extend(k[$])}z.prototype={extend:function(c){var g,k;if(!c)return this;if(c instanceof U||typeof c[0]=="number"||"x"in c)g=k=B(c);else if(c=H(c),g=c.min,k=c.max,!g||!k)return this;return!this.min&&!this.max?(this.min=g.clone(),this.max=k.clone()):(this.min.x=Math.min(g.x,this.min.x),this.max.x=Math.max(k.x,this.max.x),this.min.y=Math.min(g.y,this.min.y),this.max.y=Math.max(k.y,this.max.y)),this},getCenter:function(c){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var g,k;return typeof c[0]=="number"||c instanceof U?c=B(c):c=H(c),c instanceof z?(g=c.min,k=c.max):g=k=c,g.x>=this.min.x&&k.x<=this.max.x&&g.y>=this.min.y&&k.y<=this.max.y},intersects:function(c){c=H(c);var g=this.min,k=this.max,$=c.min,K=c.max,ee=K.x>=g.x&&$.x<=k.x,pe=K.y>=g.y&&$.y<=k.y;return ee&&pe},overlaps:function(c){c=H(c);var g=this.min,k=this.max,$=c.min,K=c.max,ee=K.x>g.x&&$.x<k.x,pe=K.y>g.y&&$.y<k.y;return ee&&pe},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var g=this.min,k=this.max,$=Math.abs(g.x-k.x)*c,K=Math.abs(g.y-k.y)*c;return H(B(g.x-$,g.y-K),B(k.x+$,k.y+K))},equals:function(c){return c?(c=H(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function H(c,g){return!c||c instanceof z?c:new z(c,g)}function q(c,g){if(c)for(var k=g?[c,g]:c,$=0,K=k.length;$<K;$++)this.extend(k[$])}q.prototype={extend:function(c){var g=this._southWest,k=this._northEast,$,K;if(c instanceof Y)$=c,K=c;else if(c instanceof q){if($=c._southWest,K=c._northEast,!$||!K)return this}else return c?this.extend(V(c)||W(c)):this;return!g&&!k?(this._southWest=new Y($.lat,$.lng),this._northEast=new Y(K.lat,K.lng)):(g.lat=Math.min($.lat,g.lat),g.lng=Math.min($.lng,g.lng),k.lat=Math.max(K.lat,k.lat),k.lng=Math.max(K.lng,k.lng)),this},pad:function(c){var g=this._southWest,k=this._northEast,$=Math.abs(g.lat-k.lat)*c,K=Math.abs(g.lng-k.lng)*c;return new q(new Y(g.lat-$,g.lng-K),new Y(k.lat+$,k.lng+K))},getCenter:function(){return new Y((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Y(this.getNorth(),this.getWest())},getSouthEast:function(){return new Y(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof Y||"lat"in c?c=V(c):c=W(c);var g=this._southWest,k=this._northEast,$,K;return c instanceof q?($=c.getSouthWest(),K=c.getNorthEast()):$=K=c,$.lat>=g.lat&&K.lat<=k.lat&&$.lng>=g.lng&&K.lng<=k.lng},intersects:function(c){c=W(c);var g=this._southWest,k=this._northEast,$=c.getSouthWest(),K=c.getNorthEast(),ee=K.lat>=g.lat&&$.lat<=k.lat,pe=K.lng>=g.lng&&$.lng<=k.lng;return ee&&pe},overlaps:function(c){c=W(c);var g=this._southWest,k=this._northEast,$=c.getSouthWest(),K=c.getNorthEast(),ee=K.lat>g.lat&&$.lat<k.lat,pe=K.lng>g.lng&&$.lng<k.lng;return ee&&pe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,g){return c?(c=W(c),this._southWest.equals(c.getSouthWest(),g)&&this._northEast.equals(c.getNorthEast(),g)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function W(c,g){return c instanceof q?c:new q(c,g)}function Y(c,g,k){if(isNaN(c)||isNaN(g))throw new Error("Invalid LatLng object: ("+c+", "+g+")");this.lat=+c,this.lng=+g,k!==void 0&&(this.alt=+k)}Y.prototype={equals:function(c,g){if(!c)return!1;c=V(c);var k=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return k<=(g===void 0?1e-9:g)},toString:function(c){return"LatLng("+m(this.lat,c)+", "+m(this.lng,c)+")"},distanceTo:function(c){return ie.distance(this,V(c))},wrap:function(){return ie.wrapLatLng(this)},toBounds:function(c){var g=180*c/40075017,k=g/Math.cos(Math.PI/180*this.lat);return W([this.lat-g,this.lng-k],[this.lat+g,this.lng+k])},clone:function(){return new Y(this.lat,this.lng,this.alt)}};function V(c,g,k){return c instanceof Y?c:j(c)&&typeof c[0]!="object"?c.length===3?new Y(c[0],c[1],c[2]):c.length===2?new Y(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new Y(c.lat,"lng"in c?c.lng:c.lon,c.alt):g===void 0?null:new Y(c,g,k)}var G={latLngToPoint:function(c,g){var k=this.projection.project(c),$=this.scale(g);return this.transformation._transform(k,$)},pointToLatLng:function(c,g){var k=this.scale(g),$=this.transformation.untransform(c,k);return this.projection.unproject($)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var g=this.projection.bounds,k=this.scale(c),$=this.transformation.transform(g.min,k),K=this.transformation.transform(g.max,k);return new z($,K)},infinite:!1,wrapLatLng:function(c){var g=this.wrapLng?f(c.lng,this.wrapLng,!0):c.lng,k=this.wrapLat?f(c.lat,this.wrapLat,!0):c.lat,$=c.alt;return new Y(k,g,$)},wrapLatLngBounds:function(c){var g=c.getCenter(),k=this.wrapLatLng(g),$=g.lat-k.lat,K=g.lng-k.lng;if($===0&&K===0)return c;var ee=c.getSouthWest(),pe=c.getNorthEast(),Ee=new Y(ee.lat-$,ee.lng-K),Oe=new Y(pe.lat-$,pe.lng-K);return new q(Ee,Oe)}},ie=a({},G,{wrapLng:[-180,180],R:6371e3,distance:function(c,g){var k=Math.PI/180,$=c.lat*k,K=g.lat*k,ee=Math.sin((g.lat-c.lat)*k/2),pe=Math.sin((g.lng-c.lng)*k/2),Ee=ee*ee+Math.cos($)*Math.cos(K)*pe*pe,Oe=2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee));return this.R*Oe}}),J=6378137,le={R:J,MAX_LATITUDE:85.0511287798,project:function(c){var g=Math.PI/180,k=this.MAX_LATITUDE,$=Math.max(Math.min(k,c.lat),-k),K=Math.sin($*g);return new U(this.R*c.lng*g,this.R*Math.log((1+K)/(1-K))/2)},unproject:function(c){var g=180/Math.PI;return new Y((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*g,c.x*g/this.R)},bounds:function(){var c=J*Math.PI;return new z([-c,-c],[c,c])}()};function ye(c,g,k,$){if(j(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=g,this._c=k,this._d=$}ye.prototype={transform:function(c,g){return this._transform(c.clone(),g)},_transform:function(c,g){return g=g||1,c.x=g*(this._a*c.x+this._b),c.y=g*(this._c*c.y+this._d),c},untransform:function(c,g){return g=g||1,new U((c.x/g-this._b)/this._a,(c.y/g-this._d)/this._c)}};function ke(c,g,k,$){return new ye(c,g,k,$)}var Ne=a({},ie,{code:"EPSG:3857",projection:le,transformation:function(){var c=.5/(Math.PI*le.R);return ke(c,.5,-c,.5)}()}),_e=a({},Ne,{code:"EPSG:900913"});function ne(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Ce(c,g){var k="",$,K,ee,pe,Ee,Oe;for($=0,ee=c.length;$<ee;$++){for(Ee=c[$],K=0,pe=Ee.length;K<pe;K++)Oe=Ee[K],k+=(K?"L":"M")+Oe.x+" "+Oe.y;k+=g?We.svg?"z":"x":""}return k||"M0 0"}var ve=document.documentElement.style,oe="ActiveXObject"in window,de=oe&&!document.addEventListener,Q="msLaunchUri"in navigator&&!("documentMode"in document),ae=ps("webkit"),ue=ps("android"),re=ps("android 2")||ps("android 3"),ce=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),fe=ue&&ps("Google")&&ce<537&&!("AudioNode"in window),ge=!!window.opera,me=!Q&&ps("chrome"),be=ps("gecko")&&!ae&&!ge&&!oe,Te=!me&&ps("safari"),Se=ps("phantom"),Ie="OTransition"in ve,se=navigator.platform.indexOf("Win")===0,we=oe&&"transition"in ve,Pe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!re,Me="MozPerspective"in ve,Le=!window.L_DISABLE_3D&&(we||Pe||Me)&&!Ie&&!Se,He=typeof orientation<"u"||ps("mobile"),_t=He&&ae,It=He&&Pe,ss=!window.PointerEvent&&window.MSPointerEvent,ys=!!(window.PointerEvent||ss),ms="ontouchstart"in window||!!window.TouchEvent,he=!window.L_NO_TOUCH&&(ms||ys),nt=He&&ge,Fe=He&&be,et=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tt=function(){var c=!1;try{var g=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",u,g),window.removeEventListener("testPassiveEventSupport",u,g)}catch{}return c}(),qe=function(){return!!document.createElement("canvas").getContext}(),ft=!!(document.createElementNS&&ne("svg").createSVGRect),bt=!!ft&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ft=!ft&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var g=c.firstChild;return g.style.behavior="url(#default#VML)",g&&typeof g.adj=="object"}catch{return!1}}(),Wt=navigator.platform.indexOf("Mac")===0,as=navigator.platform.indexOf("Linux")===0;function ps(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var We={ie:oe,ielt9:de,edge:Q,webkit:ae,android:ue,android23:re,androidStock:fe,opera:ge,chrome:me,gecko:be,safari:Te,phantom:Se,opera12:Ie,win:se,ie3d:we,webkit3d:Pe,gecko3d:Me,any3d:Le,mobile:He,mobileWebkit:_t,mobileWebkit3d:It,msPointer:ss,pointer:ys,touch:he,touchNative:ms,mobileOpera:nt,mobileGecko:Fe,retina:et,passiveEvents:tt,canvas:qe,svg:ft,vml:Ft,inlineSvg:bt,mac:Wt,linux:as},Xs=We.msPointer?"MSPointerDown":"pointerdown",Js=We.msPointer?"MSPointerMove":"pointermove",tr=We.msPointer?"MSPointerUp":"pointerup",Vn=We.msPointer?"MSPointerCancel":"pointercancel",Ba={touchstart:Xs,touchmove:Js,touchend:tr,touchcancel:Vn},wi={touchstart:mM,touchmove:Bh,touchend:Bh,touchcancel:Bh},_i={},K_=!1;function cM(c,g,k){return g==="touchstart"&&fM(),wi[g]?(k=wi[g].bind(this,k),c.addEventListener(Ba[g],k,!1),k):(console.warn("wrong event specified:",g),u)}function dM(c,g,k){if(!Ba[g]){console.warn("wrong event specified:",g);return}c.removeEventListener(Ba[g],k,!1)}function uM(c){_i[c.pointerId]=c}function hM(c){_i[c.pointerId]&&(_i[c.pointerId]=c)}function Z_(c){delete _i[c.pointerId]}function fM(){K_||(document.addEventListener(Xs,uM,!0),document.addEventListener(Js,hM,!0),document.addEventListener(tr,Z_,!0),document.addEventListener(Vn,Z_,!0),K_=!0)}function Bh(c,g){if(g.pointerType!==(g.MSPOINTER_TYPE_MOUSE||"mouse")){g.touches=[];for(var k in _i)g.touches.push(_i[k]);g.changedTouches=[g],c(g)}}function mM(c,g){g.MSPOINTER_TYPE_TOUCH&&g.pointerType===g.MSPOINTER_TYPE_TOUCH&&on(g),Bh(c,g)}function pM(c){var g={},k,$;for($ in c)k=c[$],g[$]=k&&k.bind?k.bind(c):k;return c=g,g.type="dblclick",g.detail=2,g.isTrusted=!1,g._simulated=!0,g}var gM=200;function vM(c,g){c.addEventListener("dblclick",g);var k=0,$;function K(ee){if(ee.detail!==1){$=ee.detail;return}if(!(ee.pointerType==="mouse"||ee.sourceCapabilities&&!ee.sourceCapabilities.firesTouchEvents)){var pe=ej(ee);if(!(pe.some(function(Oe){return Oe instanceof HTMLLabelElement&&Oe.attributes.for})&&!pe.some(function(Oe){return Oe instanceof HTMLInputElement||Oe instanceof HTMLSelectElement}))){var Ee=Date.now();Ee-k<=gM?($++,$===2&&g(pM(ee))):$=1,k=Ee}}}return c.addEventListener("click",K),{dblclick:g,simDblclick:K}}function xM(c,g){c.removeEventListener("dblclick",g.dblclick),c.removeEventListener("click",g.simDblclick)}var $g=Uh(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),kd=Uh(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Y_=kd==="webkitTransition"||kd==="OTransition"?kd+"End":"transitionend";function X_(c){return typeof c=="string"?document.getElementById(c):c}function Cd(c,g){var k=c.style[g]||c.currentStyle&&c.currentStyle[g];if((!k||k==="auto")&&document.defaultView){var $=document.defaultView.getComputedStyle(c,null);k=$?$[g]:null}return k==="auto"?null:k}function Bt(c,g,k){var $=document.createElement(c);return $.className=g||"",k&&k.appendChild($),$}function bs(c){var g=c.parentNode;g&&g.removeChild(c)}function zh(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function Nl(c){var g=c.parentNode;g&&g.lastChild!==c&&g.appendChild(c)}function Sl(c){var g=c.parentNode;g&&g.firstChild!==c&&g.insertBefore(c,g.firstChild)}function Bg(c,g){if(c.classList!==void 0)return c.classList.contains(g);var k=Vh(c);return k.length>0&&new RegExp("(^|\\s)"+g+"(\\s|$)").test(k)}function Pt(c,g){if(c.classList!==void 0)for(var k=w(g),$=0,K=k.length;$<K;$++)c.classList.add(k[$]);else if(!Bg(c,g)){var ee=Vh(c);zg(c,(ee?ee+" ":"")+g)}}function Os(c,g){c.classList!==void 0?c.classList.remove(g):zg(c,p((" "+Vh(c)+" ").replace(" "+g+" "," ")))}function zg(c,g){c.className.baseVal===void 0?c.className=g:c.className.baseVal=g}function Vh(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function fr(c,g){"opacity"in c.style?c.style.opacity=g:"filter"in c.style&&yM(c,g)}function yM(c,g){var k=!1,$="DXImageTransform.Microsoft.Alpha";try{k=c.filters.item($)}catch{if(g===1)return}g=Math.round(g*100),k?(k.Enabled=g!==100,k.Opacity=g):c.style.filter+=" progid:"+$+"(opacity="+g+")"}function Uh(c){for(var g=document.documentElement.style,k=0;k<c.length;k++)if(c[k]in g)return c[k];return!1}function _o(c,g,k){var $=g||new U(0,0);c.style[$g]=(We.ie3d?"translate("+$.x+"px,"+$.y+"px)":"translate3d("+$.x+"px,"+$.y+"px,0)")+(k?" scale("+k+")":"")}function $s(c,g){c._leaflet_pos=g,We.any3d?_o(c,g):(c.style.left=g.x+"px",c.style.top=g.y+"px")}function jo(c){return c._leaflet_pos||new U(0,0)}var Ed,Td,Vg;if("onselectstart"in document)Ed=function(){kt(window,"selectstart",on)},Td=function(){is(window,"selectstart",on)};else{var Pd=Uh(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ed=function(){if(Pd){var c=document.documentElement.style;Vg=c[Pd],c[Pd]="none"}},Td=function(){Pd&&(document.documentElement.style[Pd]=Vg,Vg=void 0)}}function Ug(){kt(window,"dragstart",on)}function qg(){is(window,"dragstart",on)}var qh,Hg;function Wg(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(Hh(),qh=c,Hg=c.style.outlineStyle,c.style.outlineStyle="none",kt(window,"keydown",Hh))}function Hh(){qh&&(qh.style.outlineStyle=Hg,qh=void 0,Hg=void 0,is(window,"keydown",Hh))}function J_(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Gg(c){var g=c.getBoundingClientRect();return{x:g.width/c.offsetWidth||1,y:g.height/c.offsetHeight||1,boundingClientRect:g}}var bM={__proto__:null,TRANSFORM:$g,TRANSITION:kd,TRANSITION_END:Y_,get:X_,getStyle:Cd,create:Bt,remove:bs,empty:zh,toFront:Nl,toBack:Sl,hasClass:Bg,addClass:Pt,removeClass:Os,setClass:zg,getClass:Vh,setOpacity:fr,testProp:Uh,setTransform:_o,setPosition:$s,getPosition:jo,get disableTextSelection(){return Ed},get enableTextSelection(){return Td},disableImageDrag:Ug,enableImageDrag:qg,preventOutline:Wg,restoreOutline:Hh,getSizedParentNode:J_,getScale:Gg};function kt(c,g,k,$){if(g&&typeof g=="object")for(var K in g)Zg(c,K,g[K],k);else{g=w(g);for(var ee=0,pe=g.length;ee<pe;ee++)Zg(c,g[ee],k,$)}return this}var la="_leaflet_events";function is(c,g,k,$){if(arguments.length===1)Q_(c),delete c[la];else if(g&&typeof g=="object")for(var K in g)Yg(c,K,g[K],k);else if(g=w(g),arguments.length===2)Q_(c,function(Ee){return N(g,Ee)!==-1});else for(var ee=0,pe=g.length;ee<pe;ee++)Yg(c,g[ee],k,$);return this}function Q_(c,g){for(var k in c[la]){var $=k.split(/\d/)[0];(!g||g($))&&Yg(c,$,null,null,k)}}var Kg={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Zg(c,g,k,$){var K=g+d(k)+($?"_"+d($):"");if(c[la]&&c[la][K])return this;var ee=function(Ee){return k.call($||c,Ee||window.event)},pe=ee;!We.touchNative&&We.pointer&&g.indexOf("touch")===0?ee=cM(c,g,ee):We.touch&&g==="dblclick"?ee=vM(c,ee):"addEventListener"in c?g==="touchstart"||g==="touchmove"||g==="wheel"||g==="mousewheel"?c.addEventListener(Kg[g]||g,ee,We.passiveEvents?{passive:!1}:!1):g==="mouseenter"||g==="mouseleave"?(ee=function(Ee){Ee=Ee||window.event,Jg(c,Ee)&&pe(Ee)},c.addEventListener(Kg[g],ee,!1)):c.addEventListener(g,pe,!1):c.attachEvent("on"+g,ee),c[la]=c[la]||{},c[la][K]=ee}function Yg(c,g,k,$,K){K=K||g+d(k)+($?"_"+d($):"");var ee=c[la]&&c[la][K];if(!ee)return this;!We.touchNative&&We.pointer&&g.indexOf("touch")===0?dM(c,g,ee):We.touch&&g==="dblclick"?xM(c,ee):"removeEventListener"in c?c.removeEventListener(Kg[g]||g,ee,!1):c.detachEvent("on"+g,ee),c[la][K]=null}function No(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Xg(c){return Zg(c,"wheel",No),this}function Ad(c){return kt(c,"mousedown touchstart dblclick contextmenu",No),c._leaflet_disable_click=!0,this}function on(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function So(c){return on(c),No(c),this}function ej(c){if(c.composedPath)return c.composedPath();for(var g=[],k=c.target;k;)g.push(k),k=k.parentNode;return g}function tj(c,g){if(!g)return new U(c.clientX,c.clientY);var k=Gg(g),$=k.boundingClientRect;return new U((c.clientX-$.left)/k.x-g.clientLeft,(c.clientY-$.top)/k.y-g.clientTop)}var wM=We.linux&&We.chrome?window.devicePixelRatio:We.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function sj(c){return We.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/wM:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Jg(c,g){var k=g.relatedTarget;if(!k)return!0;try{for(;k&&k!==c;)k=k.parentNode}catch{return!1}return k!==c}var _M={__proto__:null,on:kt,off:is,stopPropagation:No,disableScrollPropagation:Xg,disableClickPropagation:Ad,preventDefault:on,stop:So,getPropagationPath:ej,getMousePosition:tj,getWheelDelta:sj,isExternalTarget:Jg,addListener:kt,removeListener:is},nj=X.extend({run:function(c,g,k,$){this.stop(),this._el=c,this._inProgress=!0,this._duration=k||.25,this._easeOutPower=1/Math.max($||.5,.2),this._startPos=jo(c),this._offset=g.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(c){var g=+new Date-this._startTime,k=this._duration*1e3;g<k?this._runFrame(this._easeOut(g/k),c):(this._runFrame(1),this._complete())},_runFrame:function(c,g){var k=this._startPos.add(this._offset.multiplyBy(c));g&&k._round(),$s(this._el,k),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Dt=X.extend({options:{crs:Ne,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,g){g=v(this,g),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),g.maxBounds&&this.setMaxBounds(g.maxBounds),g.zoom!==void 0&&(this._zoom=this._limitZoom(g.zoom)),g.center&&g.zoom!==void 0&&this.setView(V(g.center),g.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=kd&&We.any3d&&!We.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),kt(this._proxy,Y_,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,g,k){if(g=g===void 0?this._zoom:this._limitZoom(g),c=this._limitCenter(V(c),g,this.options.maxBounds),k=k||{},this._stop(),this._loaded&&!k.reset&&k!==!0){k.animate!==void 0&&(k.zoom=a({animate:k.animate},k.zoom),k.pan=a({animate:k.animate,duration:k.duration},k.pan));var $=this._zoom!==g?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,g,k.zoom):this._tryAnimatedPan(c,k.pan);if($)return clearTimeout(this._sizeTimer),this}return this._resetView(c,g,k.pan&&k.pan.noMoveStart),this},setZoom:function(c,g){return this._loaded?this.setView(this.getCenter(),c,{zoom:g}):(this._zoom=c,this)},zoomIn:function(c,g){return c=c||(We.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,g)},zoomOut:function(c,g){return c=c||(We.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,g)},setZoomAround:function(c,g,k){var $=this.getZoomScale(g),K=this.getSize().divideBy(2),ee=c instanceof U?c:this.latLngToContainerPoint(c),pe=ee.subtract(K).multiplyBy(1-1/$),Ee=this.containerPointToLatLng(K.add(pe));return this.setView(Ee,g,{zoom:k})},_getBoundsCenterZoom:function(c,g){g=g||{},c=c.getBounds?c.getBounds():W(c);var k=B(g.paddingTopLeft||g.padding||[0,0]),$=B(g.paddingBottomRight||g.padding||[0,0]),K=this.getBoundsZoom(c,!1,k.add($));if(K=typeof g.maxZoom=="number"?Math.min(g.maxZoom,K):K,K===1/0)return{center:c.getCenter(),zoom:K};var ee=$.subtract(k).divideBy(2),pe=this.project(c.getSouthWest(),K),Ee=this.project(c.getNorthEast(),K),Oe=this.unproject(pe.add(Ee).divideBy(2).add(ee),K);return{center:Oe,zoom:K}},fitBounds:function(c,g){if(c=W(c),!c.isValid())throw new Error("Bounds are not valid.");var k=this._getBoundsCenterZoom(c,g);return this.setView(k.center,k.zoom,g)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,g){return this.setView(c,this._zoom,{pan:g})},panBy:function(c,g){if(c=B(c).round(),g=g||{},!c.x&&!c.y)return this.fire("moveend");if(g.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new nj,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),g.noMoveStart||this.fire("movestart"),g.animate!==!1){Pt(this._mapPane,"leaflet-pan-anim");var k=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,k,g.duration||.25,g.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,g,k){if(k=k||{},k.animate===!1||!We.any3d)return this.setView(c,g,k);this._stop();var $=this.project(this.getCenter()),K=this.project(c),ee=this.getSize(),pe=this._zoom;c=V(c),g=g===void 0?pe:g;var Ee=Math.max(ee.x,ee.y),Oe=Ee*this.getZoomScale(pe,g),Be=K.distanceTo($)||1,at=1.42,vt=at*at;function Ot(Bs){var nf=Bs?-1:1,d5=Bs?Oe:Ee,u5=Oe*Oe-Ee*Ee+nf*vt*vt*Be*Be,h5=2*d5*vt*Be,cv=u5/h5,Dj=Math.sqrt(cv*cv+1)-cv,f5=Dj<1e-9?-18:Math.log(Dj);return f5}function Sn(Bs){return(Math.exp(Bs)-Math.exp(-Bs))/2}function Qs(Bs){return(Math.exp(Bs)+Math.exp(-Bs))/2}function pr(Bs){return Sn(Bs)/Qs(Bs)}var Un=Ot(0);function Al(Bs){return Ee*(Qs(Un)/Qs(Un+at*Bs))}function i5(Bs){return Ee*(Qs(Un)*pr(Un+at*Bs)-Sn(Un))/vt}function o5(Bs){return 1-Math.pow(1-Bs,1.5)}var l5=Date.now(),Ij=(Ot(1)-Un)/at,c5=k.duration?1e3*k.duration:1e3*Ij*.8;function Mj(){var Bs=(Date.now()-l5)/c5,nf=o5(Bs)*Ij;Bs<=1?(this._flyToFrame=R(Mj,this),this._move(this.unproject($.add(K.subtract($).multiplyBy(i5(nf)/Be)),pe),this.getScaleZoom(Ee/Al(nf),pe),{flyTo:!0})):this._move(c,g)._moveEnd(!0)}return this._moveStart(!0,k.noMoveStart),Mj.call(this),this},flyToBounds:function(c,g){var k=this._getBoundsCenterZoom(c,g);return this.flyTo(k.center,k.zoom,g)},setMaxBounds:function(c){return c=W(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var g=this.options.minZoom;return this.options.minZoom=c,this._loaded&&g!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var g=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&g!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,g){this._enforcingBounds=!0;var k=this.getCenter(),$=this._limitCenter(k,this._zoom,W(c));return k.equals($)||this.panTo($,g),this._enforcingBounds=!1,this},panInside:function(c,g){g=g||{};var k=B(g.paddingTopLeft||g.padding||[0,0]),$=B(g.paddingBottomRight||g.padding||[0,0]),K=this.project(this.getCenter()),ee=this.project(c),pe=this.getPixelBounds(),Ee=H([pe.min.add(k),pe.max.subtract($)]),Oe=Ee.getSize();if(!Ee.contains(ee)){this._enforcingBounds=!0;var Be=ee.subtract(Ee.getCenter()),at=Ee.extend(ee).getSize().subtract(Oe);K.x+=Be.x<0?-at.x:at.x,K.y+=Be.y<0?-at.y:at.y,this.panTo(this.unproject(K),g),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=a({animate:!1,pan:!0},c===!0?{animate:!0}:c);var g=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var k=this.getSize(),$=g.divideBy(2).round(),K=k.divideBy(2).round(),ee=$.subtract(K);return!ee.x&&!ee.y?this:(c.animate&&c.pan?this.panBy(ee):(c.pan&&this._rawPanBy(ee),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:g,newSize:k}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=a({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var g=o(this._handleGeolocationResponse,this),k=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(g,k,c):navigator.geolocation.getCurrentPosition(g,k,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var g=c.code,k=c.message||(g===1?"permission denied":g===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:g,message:"Geolocation error: "+k+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var g=c.coords.latitude,k=c.coords.longitude,$=new Y(g,k),K=$.toBounds(c.coords.accuracy*2),ee=this._locateOptions;if(ee.setView){var pe=this.getBoundsZoom(K);this.setView($,ee.maxZoom?Math.min(pe,ee.maxZoom):pe)}var Ee={latlng:$,bounds:K,timestamp:c.timestamp};for(var Oe in c.coords)typeof c.coords[Oe]=="number"&&(Ee[Oe]=c.coords[Oe]);this.fire("locationfound",Ee)}},addHandler:function(c,g){if(!g)return this;var k=this[c]=new g(this);return this._handlers.push(k),this.options[c]&&k.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),bs(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)bs(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,g){var k="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),$=Bt("div",k,g||this._mapPane);return c&&(this._panes[c]=$),$},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),g=this.unproject(c.getBottomLeft()),k=this.unproject(c.getTopRight());return new q(g,k)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,g,k){c=W(c),k=B(k||[0,0]);var $=this.getZoom()||0,K=this.getMinZoom(),ee=this.getMaxZoom(),pe=c.getNorthWest(),Ee=c.getSouthEast(),Oe=this.getSize().subtract(k),Be=H(this.project(Ee,$),this.project(pe,$)).getSize(),at=We.any3d?this.options.zoomSnap:1,vt=Oe.x/Be.x,Ot=Oe.y/Be.y,Sn=g?Math.max(vt,Ot):Math.min(vt,Ot);return $=this.getScaleZoom(Sn,$),at&&($=Math.round($/(at/100))*(at/100),$=g?Math.ceil($/at)*at:Math.floor($/at)*at),Math.max(K,Math.min(ee,$))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,g){var k=this._getTopLeftPoint(c,g);return new z(k,k.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,g){var k=this.options.crs;return g=g===void 0?this._zoom:g,k.scale(c)/k.scale(g)},getScaleZoom:function(c,g){var k=this.options.crs;g=g===void 0?this._zoom:g;var $=k.zoom(c*k.scale(g));return isNaN($)?1/0:$},project:function(c,g){return g=g===void 0?this._zoom:g,this.options.crs.latLngToPoint(V(c),g)},unproject:function(c,g){return g=g===void 0?this._zoom:g,this.options.crs.pointToLatLng(B(c),g)},layerPointToLatLng:function(c){var g=B(c).add(this.getPixelOrigin());return this.unproject(g)},latLngToLayerPoint:function(c){var g=this.project(V(c))._round();return g._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(V(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(W(c))},distance:function(c,g){return this.options.crs.distance(V(c),V(g))},containerPointToLayerPoint:function(c){return B(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return B(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var g=this.containerPointToLayerPoint(B(c));return this.layerPointToLatLng(g)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(c)))},mouseEventToContainerPoint:function(c){return tj(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var g=this._container=X_(c);if(g){if(g._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");kt(g,"scroll",this._onScroll,this),this._containerId=d(g)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&We.any3d,Pt(c,"leaflet-container"+(We.touch?" leaflet-touch":"")+(We.retina?" leaflet-retina":"")+(We.ielt9?" leaflet-oldie":"")+(We.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var g=Cd(c,"position");g!=="absolute"&&g!=="relative"&&g!=="fixed"&&g!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),$s(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pt(c.markerPane,"leaflet-zoom-hide"),Pt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,g,k){$s(this._mapPane,new U(0,0));var $=!this._loaded;this._loaded=!0,g=this._limitZoom(g),this.fire("viewprereset");var K=this._zoom!==g;this._moveStart(K,k)._move(c,g)._moveEnd(K),this.fire("viewreset"),$&&this.fire("load")},_moveStart:function(c,g){return c&&this.fire("zoomstart"),g||this.fire("movestart"),this},_move:function(c,g,k,$){g===void 0&&(g=this._zoom);var K=this._zoom!==g;return this._zoom=g,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),$?k&&k.pinch&&this.fire("zoom",k):((K||k&&k.pinch)&&this.fire("zoom",k),this.fire("move",k)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){$s(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[d(this._container)]=this;var g=c?is:kt;g(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&g(window,"resize",this._onResize,this),We.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,g){for(var k=[],$,K=g==="mouseout"||g==="mouseover",ee=c.target||c.srcElement,pe=!1;ee;){if($=this._targets[d(ee)],$&&(g==="click"||g==="preclick")&&this._draggableMoved($)){pe=!0;break}if($&&$.listens(g,!0)&&(K&&!Jg(ee,c)||(k.push($),K))||ee===this._container)break;ee=ee.parentNode}return!k.length&&!pe&&!K&&this.listens(g,!0)&&(k=[this]),k},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var g=c.target||c.srcElement;if(!(!this._loaded||g._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(g))){var k=c.type;k==="mousedown"&&Wg(g),this._fireDOMEvent(c,k)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,g,k){if(c.type==="click"){var $=a({},c);$.type="preclick",this._fireDOMEvent($,$.type,k)}var K=this._findEventTargets(c,g);if(k){for(var ee=[],pe=0;pe<k.length;pe++)k[pe].listens(g,!0)&&ee.push(k[pe]);K=ee.concat(K)}if(K.length){g==="contextmenu"&&on(c);var Ee=K[0],Oe={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var Be=Ee.getLatLng&&(!Ee._radius||Ee._radius<=10);Oe.containerPoint=Be?this.latLngToContainerPoint(Ee.getLatLng()):this.mouseEventToContainerPoint(c),Oe.layerPoint=this.containerPointToLayerPoint(Oe.containerPoint),Oe.latlng=Be?Ee.getLatLng():this.layerPointToLatLng(Oe.layerPoint)}for(pe=0;pe<K.length;pe++)if(K[pe].fire(g,Oe,!0),Oe.originalEvent._stopped||K[pe].options.bubblingMouseEvents===!1&&N(this._mouseEvents,g)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,g=this._handlers.length;c<g;c++)this._handlers[c].disable()},whenReady:function(c,g){return this._loaded?c.call(g||this,{target:this}):this.on("load",c,g),this},_getMapPanePos:function(){return jo(this._mapPane)||new U(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,g){var k=c&&g!==void 0?this._getNewPixelOrigin(c,g):this.getPixelOrigin();return k.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,g){var k=this.getSize()._divideBy(2);return this.project(c,g)._subtract(k)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,g,k){var $=this._getNewPixelOrigin(k,g);return this.project(c,g)._subtract($)},_latLngBoundsToNewLayerBounds:function(c,g,k){var $=this._getNewPixelOrigin(k,g);return H([this.project(c.getSouthWest(),g)._subtract($),this.project(c.getNorthWest(),g)._subtract($),this.project(c.getSouthEast(),g)._subtract($),this.project(c.getNorthEast(),g)._subtract($)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,g,k){if(!k)return c;var $=this.project(c,g),K=this.getSize().divideBy(2),ee=new z($.subtract(K),$.add(K)),pe=this._getBoundsOffset(ee,k,g);return Math.abs(pe.x)<=1&&Math.abs(pe.y)<=1?c:this.unproject($.add(pe),g)},_limitOffset:function(c,g){if(!g)return c;var k=this.getPixelBounds(),$=new z(k.min.add(c),k.max.add(c));return c.add(this._getBoundsOffset($,g))},_getBoundsOffset:function(c,g,k){var $=H(this.project(g.getNorthEast(),k),this.project(g.getSouthWest(),k)),K=$.min.subtract(c.min),ee=$.max.subtract(c.max),pe=this._rebound(K.x,-ee.x),Ee=this._rebound(K.y,-ee.y);return new U(pe,Ee)},_rebound:function(c,g){return c+g>0?Math.round(c-g)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(g))},_limitZoom:function(c){var g=this.getMinZoom(),k=this.getMaxZoom(),$=We.any3d?this.options.zoomSnap:1;return $&&(c=Math.round(c/$)*$),Math.max(g,Math.min(k,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Os(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,g){var k=this._getCenterOffset(c)._trunc();return(g&&g.animate)!==!0&&!this.getSize().contains(k)?!1:(this.panBy(k,g),!0)},_createAnimProxy:function(){var c=this._proxy=Bt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(g){var k=$g,$=this._proxy.style[k];_o(this._proxy,this.project(g.center,g.zoom),this.getZoomScale(g.zoom,1)),$===this._proxy.style[k]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){bs(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),g=this.getZoom();_o(this._proxy,this.project(c,g),this.getZoomScale(g,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,g,k){if(this._animatingZoom)return!0;if(k=k||{},!this._zoomAnimated||k.animate===!1||this._nothingToAnimate()||Math.abs(g-this._zoom)>this.options.zoomAnimationThreshold)return!1;var $=this.getZoomScale(g),K=this._getCenterOffset(c)._divideBy(1-1/$);return k.animate!==!0&&!this.getSize().contains(K)?!1:(R(function(){this._moveStart(!0,k.noMoveStart||!1)._animateZoom(c,g,!0)},this),!0)},_animateZoom:function(c,g,k,$){this._mapPane&&(k&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=g,Pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:g,noUpdate:$}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Os(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jM(c,g){return new Dt(c,g)}var Pr=A.extend({options:{position:"topright"},initialize:function(c){v(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var g=this._map;return g&&g.removeControl(this),this.options.position=c,g&&g.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var g=this._container=this.onAdd(c),k=this.getPosition(),$=c._controlCorners[k];return Pt(g,"leaflet-control"),k.indexOf("bottom")!==-1?$.insertBefore(g,$.firstChild):$.appendChild(g),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(bs(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),Od=function(c){return new Pr(c)};Dt.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},g="leaflet-",k=this._controlContainer=Bt("div",g+"control-container",this._container);function $(K,ee){var pe=g+K+" "+g+ee;c[K+ee]=Bt("div",pe,k)}$("top","left"),$("top","right"),$("bottom","left"),$("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)bs(this._controlCorners[c]);bs(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var rj=Pr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,g,k,$){return k<$?-1:$<k?1:0}},initialize:function(c,g,k){v(this,k),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var $ in c)this._addLayer(c[$],$);for($ in g)this._addLayer(g[$],$,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return Pr.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,g){return this._addLayer(c,g),this._map?this._update():this},addOverlay:function(c,g){return this._addLayer(c,g,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var g=this._getLayer(d(c));return g&&this._layers.splice(this._layers.indexOf(g),1),this._map?this._update():this},expand:function(){Pt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Pt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Os(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Os(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",g=this._container=Bt("div",c),k=this.options.collapsed;g.setAttribute("aria-haspopup",!0),Ad(g),Xg(g);var $=this._section=Bt("section",c+"-list");k&&(this._map.on("click",this.collapse,this),kt(g,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var K=this._layersLink=Bt("a",c+"-toggle",g);K.href="#",K.title="Layers",K.setAttribute("role","button"),kt(K,{keydown:function(ee){ee.keyCode===13&&this._expandSafely()},click:function(ee){on(ee),this._expandSafely()}},this),k||this.expand(),this._baseLayersList=Bt("div",c+"-base",$),this._separator=Bt("div",c+"-separator",$),this._overlaysList=Bt("div",c+"-overlays",$),g.appendChild($)},_getLayer:function(c){for(var g=0;g<this._layers.length;g++)if(this._layers[g]&&d(this._layers[g].layer)===c)return this._layers[g]},_addLayer:function(c,g,k){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:g,overlay:k}),this.options.sortLayers&&this._layers.sort(o(function($,K){return this.options.sortFunction($.layer,K.layer,$.name,K.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;zh(this._baseLayersList),zh(this._overlaysList),this._layerControlInputs=[];var c,g,k,$,K=0;for(k=0;k<this._layers.length;k++)$=this._layers[k],this._addItem($),g=g||$.overlay,c=c||!$.overlay,K+=$.overlay?0:1;return this.options.hideSingleBase&&(c=c&&K>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=g&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var g=this._getLayer(d(c.target)),k=g.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;k&&this._map.fire(k,g)},_createRadioElement:function(c,g){var k='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(g?' checked="checked"':"")+"/>",$=document.createElement("div");return $.innerHTML=k,$.firstChild},_addItem:function(c){var g=document.createElement("label"),k=this._map.hasLayer(c.layer),$;c.overlay?($=document.createElement("input"),$.type="checkbox",$.className="leaflet-control-layers-selector",$.defaultChecked=k):$=this._createRadioElement("leaflet-base-layers_"+d(this),k),this._layerControlInputs.push($),$.layerId=d(c.layer),kt($,"click",this._onInputClick,this);var K=document.createElement("span");K.innerHTML=" "+c.name;var ee=document.createElement("span");g.appendChild(ee),ee.appendChild($),ee.appendChild(K);var pe=c.overlay?this._overlaysList:this._baseLayersList;return pe.appendChild(g),this._checkDisabledLayers(),g},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,g,k,$=[],K=[];this._handlingClick=!0;for(var ee=c.length-1;ee>=0;ee--)g=c[ee],k=this._getLayer(g.layerId).layer,g.checked?$.push(k):g.checked||K.push(k);for(ee=0;ee<K.length;ee++)this._map.hasLayer(K[ee])&&this._map.removeLayer(K[ee]);for(ee=0;ee<$.length;ee++)this._map.hasLayer($[ee])||this._map.addLayer($[ee]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,g,k,$=this._map.getZoom(),K=c.length-1;K>=0;K--)g=c[K],k=this._getLayer(g.layerId).layer,g.disabled=k.options.minZoom!==void 0&&$<k.options.minZoom||k.options.maxZoom!==void 0&&$>k.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,kt(c,"click",on),this.expand();var g=this;setTimeout(function(){is(c,"click",on),g._preventClick=!1})}}),NM=function(c,g,k){return new rj(c,g,k)},Qg=Pr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var g="leaflet-control-zoom",k=Bt("div",g+" leaflet-bar"),$=this.options;return this._zoomInButton=this._createButton($.zoomInText,$.zoomInTitle,g+"-in",k,this._zoomIn),this._zoomOutButton=this._createButton($.zoomOutText,$.zoomOutTitle,g+"-out",k,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),k},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,g,k,$,K){var ee=Bt("a",k,$);return ee.innerHTML=c,ee.href="#",ee.title=g,ee.setAttribute("role","button"),ee.setAttribute("aria-label",g),Ad(ee),kt(ee,"click",So),kt(ee,"click",K,this),kt(ee,"click",this._refocusOnMap,this),ee},_updateDisabled:function(){var c=this._map,g="leaflet-disabled";Os(this._zoomInButton,g),Os(this._zoomOutButton,g),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Pt(this._zoomOutButton,g),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Pt(this._zoomInButton,g),this._zoomInButton.setAttribute("aria-disabled","true"))}});Dt.mergeOptions({zoomControl:!0}),Dt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qg,this.addControl(this.zoomControl))});var SM=function(c){return new Qg(c)},aj=Pr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var g="leaflet-control-scale",k=Bt("div",g),$=this.options;return this._addScales($,g+"-line",k),c.on($.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),k},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,g,k){c.metric&&(this._mScale=Bt("div",g,k)),c.imperial&&(this._iScale=Bt("div",g,k))},_update:function(){var c=this._map,g=c.getSize().y/2,k=c.distance(c.containerPointToLatLng([0,g]),c.containerPointToLatLng([this.options.maxWidth,g]));this._updateScales(k)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var g=this._getRoundNum(c),k=g<1e3?g+" m":g/1e3+" km";this._updateScale(this._mScale,k,g/c)},_updateImperial:function(c){var g=c*3.2808399,k,$,K;g>5280?(k=g/5280,$=this._getRoundNum(k),this._updateScale(this._iScale,$+" mi",$/k)):(K=this._getRoundNum(g),this._updateScale(this._iScale,K+" ft",K/g))},_updateScale:function(c,g,k){c.style.width=Math.round(this.options.maxWidth*k)+"px",c.innerHTML=g},_getRoundNum:function(c){var g=Math.pow(10,(Math.floor(c)+"").length-1),k=c/g;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:1,g*k}}),kM=function(c){return new aj(c)},CM='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ev=Pr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(We.inlineSvg?CM+" ":"")+"Leaflet</a>"},initialize:function(c){v(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=Bt("div","leaflet-control-attribution"),Ad(this._container);for(var g in c._layers)c._layers[g].getAttribution&&this.addAttribution(c._layers[g].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var g in this._attributions)this._attributions[g]&&c.push(g);var k=[];this.options.prefix&&k.push(this.options.prefix),c.length&&k.push(c.join(", ")),this._container.innerHTML=k.join(' <span aria-hidden="true">|</span> ')}}});Dt.mergeOptions({attributionControl:!0}),Dt.addInitHook(function(){this.options.attributionControl&&new ev().addTo(this)});var EM=function(c){return new ev(c)};Pr.Layers=rj,Pr.Zoom=Qg,Pr.Scale=aj,Pr.Attribution=ev,Od.layers=NM,Od.zoom=SM,Od.scale=kM,Od.attribution=EM;var ca=A.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ca.addTo=function(c,g){return c.addHandler(g,this),this};var TM={Events:Z},ij=We.touch?"touchstart mousedown":"mousedown",ji=X.extend({options:{clickTolerance:3},initialize:function(c,g,k,$){v(this,$),this._element=c,this._dragStartTarget=g||c,this._preventOutline=k},enable:function(){this._enabled||(kt(this._dragStartTarget,ij,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ji._dragging===this&&this.finishDrag(!0),is(this._dragStartTarget,ij,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Bg(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){ji._dragging===this&&this.finishDrag();return}if(!(ji._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(ji._dragging=this,this._preventOutline&&Wg(this._element),Ug(),Ed(),!this._moving)){this.fire("down");var g=c.touches?c.touches[0]:c,k=J_(this._element);this._startPoint=new U(g.clientX,g.clientY),this._startPos=jo(this._element),this._parentScale=Gg(k);var $=c.type==="mousedown";kt(document,$?"mousemove":"touchmove",this._onMove,this),kt(document,$?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var g=c.touches&&c.touches.length===1?c.touches[0]:c,k=new U(g.clientX,g.clientY)._subtract(this._startPoint);!k.x&&!k.y||Math.abs(k.x)+Math.abs(k.y)<this.options.clickTolerance||(k.x/=this._parentScale.x,k.y/=this._parentScale.y,on(c),this._moved||(this.fire("dragstart"),this._moved=!0,Pt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(k),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),$s(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Os(document.body,"leaflet-dragging"),this._lastTarget&&(Os(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),is(document,"mousemove touchmove",this._onMove,this),is(document,"mouseup touchend touchcancel",this._onUp,this),qg(),Td();var g=this._moved&&this._moving;this._moving=!1,ji._dragging=!1,g&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function oj(c,g,k){var $,K=[1,4,2,8],ee,pe,Ee,Oe,Be,at,vt,Ot;for(ee=0,at=c.length;ee<at;ee++)c[ee]._code=ko(c[ee],g);for(Ee=0;Ee<4;Ee++){for(vt=K[Ee],$=[],ee=0,at=c.length,pe=at-1;ee<at;pe=ee++)Oe=c[ee],Be=c[pe],Oe._code&vt?Be._code&vt||(Ot=Wh(Be,Oe,vt,g,k),Ot._code=ko(Ot,g),$.push(Ot)):(Be._code&vt&&(Ot=Wh(Be,Oe,vt,g,k),Ot._code=ko(Ot,g),$.push(Ot)),$.push(Oe));c=$}return c}function lj(c,g){var k,$,K,ee,pe,Ee,Oe,Be,at;if(!c||c.length===0)throw new Error("latlngs not passed");mr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var vt=V([0,0]),Ot=W(c),Sn=Ot.getNorthWest().distanceTo(Ot.getSouthWest())*Ot.getNorthEast().distanceTo(Ot.getNorthWest());Sn<1700&&(vt=tv(c));var Qs=c.length,pr=[];for(k=0;k<Qs;k++){var Un=V(c[k]);pr.push(g.project(V([Un.lat-vt.lat,Un.lng-vt.lng])))}for(Ee=Oe=Be=0,k=0,$=Qs-1;k<Qs;$=k++)K=pr[k],ee=pr[$],pe=K.y*ee.x-ee.y*K.x,Oe+=(K.x+ee.x)*pe,Be+=(K.y+ee.y)*pe,Ee+=pe*3;Ee===0?at=pr[0]:at=[Oe/Ee,Be/Ee];var Al=g.unproject(B(at));return V([Al.lat+vt.lat,Al.lng+vt.lng])}function tv(c){for(var g=0,k=0,$=0,K=0;K<c.length;K++){var ee=V(c[K]);g+=ee.lat,k+=ee.lng,$++}return V([g/$,k/$])}var PM={__proto__:null,clipPolygon:oj,polygonCenter:lj,centroid:tv};function cj(c,g){if(!g||!c.length)return c.slice();var k=g*g;return c=RM(c,k),c=OM(c,k),c}function dj(c,g,k){return Math.sqrt(Rd(c,g,k,!0))}function AM(c,g,k){return Rd(c,g,k)}function OM(c,g){var k=c.length,$=typeof Uint8Array<"u"?Uint8Array:Array,K=new $(k);K[0]=K[k-1]=1,sv(c,K,g,0,k-1);var ee,pe=[];for(ee=0;ee<k;ee++)K[ee]&&pe.push(c[ee]);return pe}function sv(c,g,k,$,K){var ee=0,pe,Ee,Oe;for(Ee=$+1;Ee<=K-1;Ee++)Oe=Rd(c[Ee],c[$],c[K],!0),Oe>ee&&(pe=Ee,ee=Oe);ee>k&&(g[pe]=1,sv(c,g,k,$,pe),sv(c,g,k,pe,K))}function RM(c,g){for(var k=[c[0]],$=1,K=0,ee=c.length;$<ee;$++)LM(c[$],c[K])>g&&(k.push(c[$]),K=$);return K<ee-1&&k.push(c[ee-1]),k}var uj;function hj(c,g,k,$,K){var ee=$?uj:ko(c,k),pe=ko(g,k),Ee,Oe,Be;for(uj=pe;;){if(!(ee|pe))return[c,g];if(ee&pe)return!1;Ee=ee||pe,Oe=Wh(c,g,Ee,k,K),Be=ko(Oe,k),Ee===ee?(c=Oe,ee=Be):(g=Oe,pe=Be)}}function Wh(c,g,k,$,K){var ee=g.x-c.x,pe=g.y-c.y,Ee=$.min,Oe=$.max,Be,at;return k&8?(Be=c.x+ee*(Oe.y-c.y)/pe,at=Oe.y):k&4?(Be=c.x+ee*(Ee.y-c.y)/pe,at=Ee.y):k&2?(Be=Oe.x,at=c.y+pe*(Oe.x-c.x)/ee):k&1&&(Be=Ee.x,at=c.y+pe*(Ee.x-c.x)/ee),new U(Be,at,K)}function ko(c,g){var k=0;return c.x<g.min.x?k|=1:c.x>g.max.x&&(k|=2),c.y<g.min.y?k|=4:c.y>g.max.y&&(k|=8),k}function LM(c,g){var k=g.x-c.x,$=g.y-c.y;return k*k+$*$}function Rd(c,g,k,$){var K=g.x,ee=g.y,pe=k.x-K,Ee=k.y-ee,Oe=pe*pe+Ee*Ee,Be;return Oe>0&&(Be=((c.x-K)*pe+(c.y-ee)*Ee)/Oe,Be>1?(K=k.x,ee=k.y):Be>0&&(K+=pe*Be,ee+=Ee*Be)),pe=c.x-K,Ee=c.y-ee,$?pe*pe+Ee*Ee:new U(K,ee)}function mr(c){return!j(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function fj(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mr(c)}function mj(c,g){var k,$,K,ee,pe,Ee,Oe,Be;if(!c||c.length===0)throw new Error("latlngs not passed");mr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var at=V([0,0]),vt=W(c),Ot=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Ot<1700&&(at=tv(c));var Sn=c.length,Qs=[];for(k=0;k<Sn;k++){var pr=V(c[k]);Qs.push(g.project(V([pr.lat-at.lat,pr.lng-at.lng])))}for(k=0,$=0;k<Sn-1;k++)$+=Qs[k].distanceTo(Qs[k+1])/2;if($===0)Be=Qs[0];else for(k=0,ee=0;k<Sn-1;k++)if(pe=Qs[k],Ee=Qs[k+1],K=pe.distanceTo(Ee),ee+=K,ee>$){Oe=(ee-$)/K,Be=[Ee.x-Oe*(Ee.x-pe.x),Ee.y-Oe*(Ee.y-pe.y)];break}var Un=g.unproject(B(Be));return V([Un.lat+at.lat,Un.lng+at.lng])}var IM={__proto__:null,simplify:cj,pointToSegmentDistance:dj,closestPointOnSegment:AM,clipSegment:hj,_getEdgeIntersection:Wh,_getBitCode:ko,_sqClosestPointOnSegment:Rd,isFlat:mr,_flat:fj,polylineCenter:mj},nv={project:function(c){return new U(c.lng,c.lat)},unproject:function(c){return new Y(c.y,c.x)},bounds:new z([-180,-90],[180,90])},rv={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var g=Math.PI/180,k=this.R,$=c.lat*g,K=this.R_MINOR/k,ee=Math.sqrt(1-K*K),pe=ee*Math.sin($),Ee=Math.tan(Math.PI/4-$/2)/Math.pow((1-pe)/(1+pe),ee/2);return $=-k*Math.log(Math.max(Ee,1e-10)),new U(c.lng*g*k,$)},unproject:function(c){for(var g=180/Math.PI,k=this.R,$=this.R_MINOR/k,K=Math.sqrt(1-$*$),ee=Math.exp(-c.y/k),pe=Math.PI/2-2*Math.atan(ee),Ee=0,Oe=.1,Be;Ee<15&&Math.abs(Oe)>1e-7;Ee++)Be=K*Math.sin(pe),Be=Math.pow((1-Be)/(1+Be),K/2),Oe=Math.PI/2-2*Math.atan(ee*Be)-pe,pe+=Oe;return new Y(pe*g,c.x*g/k)}},MM={__proto__:null,LonLat:nv,Mercator:rv,SphericalMercator:le},DM=a({},ie,{code:"EPSG:3395",projection:rv,transformation:function(){var c=.5/(Math.PI*rv.R);return ke(c,.5,-c,.5)}()}),pj=a({},ie,{code:"EPSG:4326",projection:nv,transformation:ke(1/180,1,-1/180,.5)}),FM=a({},G,{projection:nv,transformation:ke(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,g){var k=g.lng-c.lng,$=g.lat-c.lat;return Math.sqrt(k*k+$*$)},infinite:!0});G.Earth=ie,G.EPSG3395=DM,G.EPSG3857=Ne,G.EPSG900913=_e,G.EPSG4326=pj,G.Simple=FM;var Ar=X.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[d(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[d(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var g=c.target;if(g.hasLayer(this)){if(this._map=g,this._zoomAnimated=g._zoomAnimated,this.getEvents){var k=this.getEvents();g.on(k,this),this.once("remove",function(){g.off(k,this)},this)}this.onAdd(g),this.fire("add"),g.fire("layeradd",{layer:this})}}});Dt.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var g=d(c);return this._layers[g]?this:(this._layers[g]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var g=d(c);return this._layers[g]?(this._loaded&&c.onRemove(this),delete this._layers[g],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return d(c)in this._layers},eachLayer:function(c,g){for(var k in this._layers)c.call(g,this._layers[k]);return this},_addLayers:function(c){c=c?j(c)?c:[c]:[];for(var g=0,k=c.length;g<k;g++)this.addLayer(c[g])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[d(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var g=d(c);this._zoomBoundLayers[g]&&(delete this._zoomBoundLayers[g],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,g=-1/0,k=this._getZoomSpan();for(var $ in this._zoomBoundLayers){var K=this._zoomBoundLayers[$].options;c=K.minZoom===void 0?c:Math.min(c,K.minZoom),g=K.maxZoom===void 0?g:Math.max(g,K.maxZoom)}this._layersMaxZoom=g===-1/0?void 0:g,this._layersMinZoom=c===1/0?void 0:c,k!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var kl=Ar.extend({initialize:function(c,g){v(this,g),this._layers={};var k,$;if(c)for(k=0,$=c.length;k<$;k++)this.addLayer(c[k])},addLayer:function(c){var g=this.getLayerId(c);return this._layers[g]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var g=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[g]&&this._map.removeLayer(this._layers[g]),delete this._layers[g],this},hasLayer:function(c){var g=typeof c=="number"?c:this.getLayerId(c);return g in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var g=Array.prototype.slice.call(arguments,1),k,$;for(k in this._layers)$=this._layers[k],$[c]&&$[c].apply($,g);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,g){for(var k in this._layers)c.call(g,this._layers[k]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return d(c)}}),$M=function(c,g){return new kl(c,g)},za=kl.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),kl.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),kl.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new q;for(var g in this._layers){var k=this._layers[g];c.extend(k.getBounds?k.getBounds():k.getLatLng())}return c}}),BM=function(c,g){return new za(c,g)},Cl=A.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){v(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,g){var k=this._getIconUrl(c);if(!k){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var $=this._createImg(k,g&&g.tagName==="IMG"?g:null);return this._setIconStyles($,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&($.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),$},_setIconStyles:function(c,g){var k=this.options,$=k[g+"Size"];typeof $=="number"&&($=[$,$]);var K=B($),ee=B(g==="shadow"&&k.shadowAnchor||k.iconAnchor||K&&K.divideBy(2,!0));c.className="leaflet-marker-"+g+" "+(k.className||""),ee&&(c.style.marginLeft=-ee.x+"px",c.style.marginTop=-ee.y+"px"),K&&(c.style.width=K.x+"px",c.style.height=K.y+"px")},_createImg:function(c,g){return g=g||document.createElement("img"),g.src=c,g},_getIconUrl:function(c){return We.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function zM(c){return new Cl(c)}var Ld=Cl.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof Ld.imagePath!="string"&&(Ld.imagePath=this._detectIconPath()),(this.options.imagePath||Ld.imagePath)+Cl.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var g=function(k,$,K){var ee=$.exec(k);return ee&&ee[K]};return c=g(c,/^url\((['"])?(.+)\1\)$/,2),c&&g(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=Bt("div","leaflet-default-icon-path",document.body),g=Cd(c,"background-image")||Cd(c,"backgroundImage");if(document.body.removeChild(c),g=this._stripUrl(g),g)return g;var k=document.querySelector('link[href$="leaflet.css"]');return k?k.href.substring(0,k.href.length-11-1):""}}),gj=ca.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new ji(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Os(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var g=this._marker,k=g._map,$=this._marker.options.autoPanSpeed,K=this._marker.options.autoPanPadding,ee=jo(g._icon),pe=k.getPixelBounds(),Ee=k.getPixelOrigin(),Oe=H(pe.min._subtract(Ee).add(K),pe.max._subtract(Ee).subtract(K));if(!Oe.contains(ee)){var Be=B((Math.max(Oe.max.x,ee.x)-Oe.max.x)/(pe.max.x-Oe.max.x)-(Math.min(Oe.min.x,ee.x)-Oe.min.x)/(pe.min.x-Oe.min.x),(Math.max(Oe.max.y,ee.y)-Oe.max.y)/(pe.max.y-Oe.max.y)-(Math.min(Oe.min.y,ee.y)-Oe.min.y)/(pe.min.y-Oe.min.y)).multiplyBy($);k.panBy(Be,{animate:!1}),this._draggable._newPos._add(Be),this._draggable._startPos._add(Be),$s(g._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=R(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,c)))},_onDrag:function(c){var g=this._marker,k=g._shadow,$=jo(g._icon),K=g._map.layerPointToLatLng($);k&&$s(k,$),g._latlng=K,c.latlng=K,c.oldLatLng=this._oldLatLng,g.fire("move",c).fire("drag",c)},_onDragEnd:function(c){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),Gh=Ar.extend({options:{icon:new Ld,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,g){v(this,g),this._latlng=V(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var g=this._latlng;return this._latlng=V(c),this.update(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,g="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),k=c.icon.createIcon(this._icon),$=!1;k!==this._icon&&(this._icon&&this._removeIcon(),$=!0,c.title&&(k.title=c.title),k.tagName==="IMG"&&(k.alt=c.alt||"")),Pt(k,g),c.keyboard&&(k.tabIndex="0",k.setAttribute("role","button")),this._icon=k,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&kt(k,"focus",this._panOnFocus,this);var K=c.icon.createShadow(this._shadow),ee=!1;K!==this._shadow&&(this._removeShadow(),ee=!0),K&&(Pt(K,g),K.alt=""),this._shadow=K,c.opacity<1&&this._updateOpacity(),$&&this.getPane().appendChild(this._icon),this._initInteraction(),K&&ee&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&is(this._icon,"focus",this._panOnFocus,this),bs(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&bs(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&$s(this._icon,c),this._shadow&&$s(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var g=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(g)},_initInteraction:function(){if(this.options.interactive&&(Pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),gj)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new gj(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&fr(this._icon,c),this._shadow&&fr(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var g=this.options.icon.options,k=g.iconSize?B(g.iconSize):B(0,0),$=g.iconAnchor?B(g.iconAnchor):B(0,0);c.panInside(this._latlng,{paddingTopLeft:$,paddingBottomRight:k.subtract($)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function VM(c,g){return new Gh(c,g)}var Ni=Ar.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return v(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Kh=Ni.extend({options:{fill:!0,radius:10},initialize:function(c,g){v(this,g),this._latlng=V(c),this._radius=this.options.radius},setLatLng:function(c){var g=this._latlng;return this._latlng=V(c),this.redraw(),this.fire("move",{oldLatLng:g,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var g=c&&c.radius||this._radius;return Ni.prototype.setStyle.call(this,c),this.setRadius(g),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,g=this._radiusY||c,k=this._clickTolerance(),$=[c+k,g+k];this._pxBounds=new z(this._point.subtract($),this._point.add($))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function UM(c,g){return new Kh(c,g)}var av=Kh.extend({initialize:function(c,g,k){if(typeof g=="number"&&(g=a({},k,{radius:g})),v(this,g),this._latlng=V(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:Ni.prototype.setStyle,_project:function(){var c=this._latlng.lng,g=this._latlng.lat,k=this._map,$=k.options.crs;if($.distance===ie.distance){var K=Math.PI/180,ee=this._mRadius/ie.R/K,pe=k.project([g+ee,c]),Ee=k.project([g-ee,c]),Oe=pe.add(Ee).divideBy(2),Be=k.unproject(Oe).lat,at=Math.acos((Math.cos(ee*K)-Math.sin(g*K)*Math.sin(Be*K))/(Math.cos(g*K)*Math.cos(Be*K)))/K;(isNaN(at)||at===0)&&(at=ee/Math.cos(Math.PI/180*g)),this._point=Oe.subtract(k.getPixelOrigin()),this._radius=isNaN(at)?0:Oe.x-k.project([Be,c-at]).x,this._radiusY=Oe.y-pe.y}else{var vt=$.unproject($.project(this._latlng).subtract([this._mRadius,0]));this._point=k.latLngToLayerPoint(this._latlng),this._radius=this._point.x-k.latLngToLayerPoint(vt).x}this._updateBounds()}});function qM(c,g,k){return new av(c,g,k)}var Va=Ni.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,g){v(this,g),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var g=1/0,k=null,$=Rd,K,ee,pe=0,Ee=this._parts.length;pe<Ee;pe++)for(var Oe=this._parts[pe],Be=1,at=Oe.length;Be<at;Be++){K=Oe[Be-1],ee=Oe[Be];var vt=$(c,K,ee,!0);vt<g&&(g=vt,k=$(c,K,ee))}return k&&(k.distance=Math.sqrt(g)),k},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mj(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,g){return g=g||this._defaultShape(),c=V(c),g.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new q,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return mr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var g=[],k=mr(c),$=0,K=c.length;$<K;$++)k?(g[$]=V(c[$]),this._bounds.extend(g[$])):g[$]=this._convertLatLngs(c[$]);return g},_project:function(){var c=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),g=new U(c,c);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(g),this._rawPxBounds.max.add(g)]))},_projectLatlngs:function(c,g,k){var $=c[0]instanceof Y,K=c.length,ee,pe;if($){for(pe=[],ee=0;ee<K;ee++)pe[ee]=this._map.latLngToLayerPoint(c[ee]),k.extend(pe[ee]);g.push(pe)}else for(ee=0;ee<K;ee++)this._projectLatlngs(c[ee],g,k)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var g=this._parts,k,$,K,ee,pe,Ee,Oe;for(k=0,K=0,ee=this._rings.length;k<ee;k++)for(Oe=this._rings[k],$=0,pe=Oe.length;$<pe-1;$++)Ee=hj(Oe[$],Oe[$+1],c,$,!0),Ee&&(g[K]=g[K]||[],g[K].push(Ee[0]),(Ee[1]!==Oe[$+1]||$===pe-2)&&(g[K].push(Ee[1]),K++))}},_simplifyPoints:function(){for(var c=this._parts,g=this.options.smoothFactor,k=0,$=c.length;k<$;k++)c[k]=cj(c[k],g)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,g){var k,$,K,ee,pe,Ee,Oe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(k=0,ee=this._parts.length;k<ee;k++)for(Ee=this._parts[k],$=0,pe=Ee.length,K=pe-1;$<pe;K=$++)if(!(!g&&$===0)&&dj(c,Ee[K],Ee[$])<=Oe)return!0;return!1}});function HM(c,g){return new Va(c,g)}Va._flat=fj;var El=Va.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lj(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var g=Va.prototype._convertLatLngs.call(this,c),k=g.length;return k>=2&&g[0]instanceof Y&&g[0].equals(g[k-1])&&g.pop(),g},_setLatLngs:function(c){Va.prototype._setLatLngs.call(this,c),mr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,g=this.options.weight,k=new U(g,g);if(c=new z(c.min.subtract(k),c.max.add(k)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var $=0,K=this._rings.length,ee;$<K;$++)ee=oj(this._rings[$],c,!0),ee.length&&this._parts.push(ee)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var g=!1,k,$,K,ee,pe,Ee,Oe,Be;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(ee=0,Oe=this._parts.length;ee<Oe;ee++)for(k=this._parts[ee],pe=0,Be=k.length,Ee=Be-1;pe<Be;Ee=pe++)$=k[pe],K=k[Ee],$.y>c.y!=K.y>c.y&&c.x<(K.x-$.x)*(c.y-$.y)/(K.y-$.y)+$.x&&(g=!g);return g||Va.prototype._containsPoint.call(this,c,!0)}});function WM(c,g){return new El(c,g)}var Ua=za.extend({initialize:function(c,g){v(this,g),this._layers={},c&&this.addData(c)},addData:function(c){var g=j(c)?c:c.features,k,$,K;if(g){for(k=0,$=g.length;k<$;k++)K=g[k],(K.geometries||K.geometry||K.features||K.coordinates)&&this.addData(K);return this}var ee=this.options;if(ee.filter&&!ee.filter(c))return this;var pe=Zh(c,ee);return pe?(pe.feature=Jh(c),pe.defaultOptions=pe.options,this.resetStyle(pe),ee.onEachFeature&&ee.onEachFeature(c,pe),this.addLayer(pe)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=a({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(g){this._setLayerStyle(g,c)},this)},_setLayerStyle:function(c,g){c.setStyle&&(typeof g=="function"&&(g=g(c.feature)),c.setStyle(g))}});function Zh(c,g){var k=c.type==="Feature"?c.geometry:c,$=k?k.coordinates:null,K=[],ee=g&&g.pointToLayer,pe=g&&g.coordsToLatLng||iv,Ee,Oe,Be,at;if(!$&&!k)return null;switch(k.type){case"Point":return Ee=pe($),vj(ee,c,Ee,g);case"MultiPoint":for(Be=0,at=$.length;Be<at;Be++)Ee=pe($[Be]),K.push(vj(ee,c,Ee,g));return new za(K);case"LineString":case"MultiLineString":return Oe=Yh($,k.type==="LineString"?0:1,pe),new Va(Oe,g);case"Polygon":case"MultiPolygon":return Oe=Yh($,k.type==="Polygon"?1:2,pe),new El(Oe,g);case"GeometryCollection":for(Be=0,at=k.geometries.length;Be<at;Be++){var vt=Zh({geometry:k.geometries[Be],type:"Feature",properties:c.properties},g);vt&&K.push(vt)}return new za(K);case"FeatureCollection":for(Be=0,at=k.features.length;Be<at;Be++){var Ot=Zh(k.features[Be],g);Ot&&K.push(Ot)}return new za(K);default:throw new Error("Invalid GeoJSON object.")}}function vj(c,g,k,$){return c?c(g,k):new Gh(k,$&&$.markersInheritOptions&&$)}function iv(c){return new Y(c[1],c[0],c[2])}function Yh(c,g,k){for(var $=[],K=0,ee=c.length,pe;K<ee;K++)pe=g?Yh(c[K],g-1,k):(k||iv)(c[K]),$.push(pe);return $}function ov(c,g){return c=V(c),c.alt!==void 0?[m(c.lng,g),m(c.lat,g),m(c.alt,g)]:[m(c.lng,g),m(c.lat,g)]}function Xh(c,g,k,$){for(var K=[],ee=0,pe=c.length;ee<pe;ee++)K.push(g?Xh(c[ee],mr(c[ee])?0:g-1,k,$):ov(c[ee],$));return!g&&k&&K.length>0&&K.push(K[0].slice()),K}function Tl(c,g){return c.feature?a({},c.feature,{geometry:g}):Jh(g)}function Jh(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var lv={toGeoJSON:function(c){return Tl(this,{type:"Point",coordinates:ov(this.getLatLng(),c)})}};Gh.include(lv),av.include(lv),Kh.include(lv),Va.include({toGeoJSON:function(c){var g=!mr(this._latlngs),k=Xh(this._latlngs,g?1:0,!1,c);return Tl(this,{type:(g?"Multi":"")+"LineString",coordinates:k})}}),El.include({toGeoJSON:function(c){var g=!mr(this._latlngs),k=g&&!mr(this._latlngs[0]),$=Xh(this._latlngs,k?2:g?1:0,!0,c);return g||($=[$]),Tl(this,{type:(k?"Multi":"")+"Polygon",coordinates:$})}}),kl.include({toMultiPoint:function(c){var g=[];return this.eachLayer(function(k){g.push(k.toGeoJSON(c).geometry.coordinates)}),Tl(this,{type:"MultiPoint",coordinates:g})},toGeoJSON:function(c){var g=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(g==="MultiPoint")return this.toMultiPoint(c);var k=g==="GeometryCollection",$=[];return this.eachLayer(function(K){if(K.toGeoJSON){var ee=K.toGeoJSON(c);if(k)$.push(ee.geometry);else{var pe=Jh(ee);pe.type==="FeatureCollection"?$.push.apply($,pe.features):$.push(pe)}}}),k?Tl(this,{geometries:$,type:"GeometryCollection"}):{type:"FeatureCollection",features:$}}});function xj(c,g){return new Ua(c,g)}var GM=xj,Qh=Ar.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,g,k){this._url=c,this._bounds=W(g),v(this,k)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){bs(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&Nl(this._image),this},bringToBack:function(){return this._map&&Sl(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=W(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",g=this._image=c?this._url:Bt("img");if(Pt(g,"leaflet-image-layer"),this._zoomAnimated&&Pt(g,"leaflet-zoom-animated"),this.options.className&&Pt(g,this.options.className),g.onselectstart=u,g.onmousemove=u,g.onload=o(this.fire,this,"load"),g.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=g.src;return}g.src=this._url,g.alt=this.options.alt},_animateZoom:function(c){var g=this._map.getZoomScale(c.zoom),k=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;_o(this._image,k,g)},_reset:function(){var c=this._image,g=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),k=g.getSize();$s(c,g.min),c.style.width=k.x+"px",c.style.height=k.y+"px"},_updateOpacity:function(){fr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),KM=function(c,g,k){return new Qh(c,g,k)},yj=Qh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",g=this._image=c?this._url:Bt("video");if(Pt(g,"leaflet-image-layer"),this._zoomAnimated&&Pt(g,"leaflet-zoom-animated"),this.options.className&&Pt(g,this.options.className),g.onselectstart=u,g.onmousemove=u,g.onloadeddata=o(this.fire,this,"load"),c){for(var k=g.getElementsByTagName("source"),$=[],K=0;K<k.length;K++)$.push(k[K].src);this._url=k.length>0?$:[g.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(g.style,"objectFit")&&(g.style.objectFit="fill"),g.autoplay=!!this.options.autoplay,g.loop=!!this.options.loop,g.muted=!!this.options.muted,g.playsInline=!!this.options.playsInline;for(var ee=0;ee<this._url.length;ee++){var pe=Bt("source");pe.src=this._url[ee],g.appendChild(pe)}}});function ZM(c,g,k){return new yj(c,g,k)}var bj=Qh.extend({_initImage:function(){var c=this._image=this._url;Pt(c,"leaflet-image-layer"),this._zoomAnimated&&Pt(c,"leaflet-zoom-animated"),this.options.className&&Pt(c,this.options.className),c.onselectstart=u,c.onmousemove=u}});function YM(c,g,k){return new bj(c,g,k)}var da=Ar.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,g){c&&(c instanceof Y||j(c))?(this._latlng=V(c),v(this,g)):(v(this,c),this._source=g),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&fr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&fr(this._container,1),this.bringToFront(),this.options.interactive&&(Pt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(fr(this._container,0),this._removeTimeout=setTimeout(o(bs,void 0,this._container),200)):bs(this._container),this.options.interactive&&(Os(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=V(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Nl(this._container),this},bringToBack:function(){return this._map&&Sl(this._container),this},_prepareOpen:function(c){var g=this._source;if(!g._map)return!1;if(g instanceof za){g=null;var k=this._source._layers;for(var $ in k)if(k[$]._map){g=k[$];break}if(!g)return!1;this._source=g}if(!c)if(g.getCenter)c=g.getCenter();else if(g.getLatLng)c=g.getLatLng();else if(g.getBounds)c=g.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,g=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof g=="string")c.innerHTML=g;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(g)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),g=B(this.options.offset),k=this._getAnchor();this._zoomAnimated?$s(this._container,c.add(k)):g=g.add(c).add(k);var $=this._containerBottom=-g.y,K=this._containerLeft=-Math.round(this._containerWidth/2)+g.x;this._container.style.bottom=$+"px",this._container.style.left=K+"px"}},_getAnchor:function(){return[0,0]}});Dt.include({_initOverlay:function(c,g,k,$){var K=g;return K instanceof c||(K=new c($).setContent(g)),k&&K.setLatLng(k),K}}),Ar.include({_initOverlay:function(c,g,k,$){var K=k;return K instanceof c?(v(K,$),K._source=this):(K=g&&!$?g:new c($,this),K.setContent(k)),K}});var ef=da.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,da.prototype.openOn.call(this,c)},onAdd:function(c){da.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ni||this._source.on("preclick",No))},onRemove:function(c){da.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ni||this._source.off("preclick",No))},getEvents:function(){var c=da.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",g=this._container=Bt("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),k=this._wrapper=Bt("div",c+"-content-wrapper",g);if(this._contentNode=Bt("div",c+"-content",k),Ad(g),Xg(this._contentNode),kt(g,"contextmenu",No),this._tipContainer=Bt("div",c+"-tip-container",g),this._tip=Bt("div",c+"-tip",this._tipContainer),this.options.closeButton){var $=this._closeButton=Bt("a",c+"-close-button",g);$.setAttribute("role","button"),$.setAttribute("aria-label","Close popup"),$.href="#close",$.innerHTML='<span aria-hidden="true">&#215;</span>',kt($,"click",function(K){on(K),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,g=c.style;g.width="",g.whiteSpace="nowrap";var k=c.offsetWidth;k=Math.min(k,this.options.maxWidth),k=Math.max(k,this.options.minWidth),g.width=k+1+"px",g.whiteSpace="",g.height="";var $=c.offsetHeight,K=this.options.maxHeight,ee="leaflet-popup-scrolled";K&&$>K?(g.height=K+"px",Pt(c,ee)):Os(c,ee),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var g=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),k=this._getAnchor();$s(this._container,g.add(k))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,g=parseInt(Cd(this._container,"marginBottom"),10)||0,k=this._container.offsetHeight+g,$=this._containerWidth,K=new U(this._containerLeft,-k-this._containerBottom);K._add(jo(this._container));var ee=c.layerPointToContainerPoint(K),pe=B(this.options.autoPanPadding),Ee=B(this.options.autoPanPaddingTopLeft||pe),Oe=B(this.options.autoPanPaddingBottomRight||pe),Be=c.getSize(),at=0,vt=0;ee.x+$+Oe.x>Be.x&&(at=ee.x+$-Be.x+Oe.x),ee.x-at-Ee.x<0&&(at=ee.x-Ee.x),ee.y+k+Oe.y>Be.y&&(vt=ee.y+k-Be.y+Oe.y),ee.y-vt-Ee.y<0&&(vt=ee.y-Ee.y),(at||vt)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([at,vt]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),XM=function(c,g){return new ef(c,g)};Dt.mergeOptions({closePopupOnClick:!0}),Dt.include({openPopup:function(c,g,k){return this._initOverlay(ef,c,g,k).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),Ar.include({bindPopup:function(c,g){return this._popup=this._initOverlay(ef,this._popup,c,g),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof za||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){So(c);var g=c.layer||c.target;if(this._popup._source===g&&!(g instanceof Ni)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=g,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var tf=da.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){da.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){da.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=da.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",g=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Bt("div",g),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var g,k,$=this._map,K=this._container,ee=$.latLngToContainerPoint($.getCenter()),pe=$.layerPointToContainerPoint(c),Ee=this.options.direction,Oe=K.offsetWidth,Be=K.offsetHeight,at=B(this.options.offset),vt=this._getAnchor();Ee==="top"?(g=Oe/2,k=Be):Ee==="bottom"?(g=Oe/2,k=0):Ee==="center"?(g=Oe/2,k=Be/2):Ee==="right"?(g=0,k=Be/2):Ee==="left"?(g=Oe,k=Be/2):pe.x<ee.x?(Ee="right",g=0,k=Be/2):(Ee="left",g=Oe+(at.x+vt.x)*2,k=Be/2),c=c.subtract(B(g,k,!0)).add(at).add(vt),Os(K,"leaflet-tooltip-right"),Os(K,"leaflet-tooltip-left"),Os(K,"leaflet-tooltip-top"),Os(K,"leaflet-tooltip-bottom"),Pt(K,"leaflet-tooltip-"+Ee),$s(K,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&fr(this._container,c)},_animateZoom:function(c){var g=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(g)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),JM=function(c,g){return new tf(c,g)};Dt.include({openTooltip:function(c,g,k){return this._initOverlay(tf,c,g,k).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Ar.include({bindTooltip:function(c,g){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(tf,this._tooltip,c,g),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var g=c?"off":"on",k={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?k.add=this._openTooltip:(k.mouseover=this._openTooltip,k.mouseout=this.closeTooltip,k.click=this._openTooltip,this._map?this._addFocusListeners():k.add=this._addFocusListeners),this._tooltip.options.sticky&&(k.mousemove=this._moveTooltip),this[g](k),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof za||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var g=typeof c.getElement=="function"&&c.getElement();g&&(kt(g,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),kt(g,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var g=typeof c.getElement=="function"&&c.getElement();g&&g.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var g=this;this._map.once("moveend",function(){g._openOnceFlag=!1,g._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var g=c.latlng,k,$;this._tooltip.options.sticky&&c.originalEvent&&(k=this._map.mouseEventToContainerPoint(c.originalEvent),$=this._map.containerPointToLayerPoint(k),g=this._map.layerPointToLatLng($)),this._tooltip.setLatLng(g)}});var wj=Cl.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var g=c&&c.tagName==="DIV"?c:document.createElement("div"),k=this.options;if(k.html instanceof Element?(zh(g),g.appendChild(k.html)):g.innerHTML=k.html!==!1?k.html:"",k.bgPos){var $=B(k.bgPos);g.style.backgroundPosition=-$.x+"px "+-$.y+"px"}return this._setIconStyles(g,"icon"),g},createShadow:function(){return null}});function QM(c){return new wj(c)}Cl.Default=Ld;var Id=Ar.extend({options:{tileSize:256,opacity:1,updateWhenIdle:We.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){v(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),bs(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Nl(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Sl(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof U?c:new U(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var g=this.getPane().children,k=-c(-1/0,1/0),$=0,K=g.length,ee;$<K;$++)ee=g[$].style.zIndex,g[$]!==this._container&&ee&&(k=c(k,+ee));isFinite(k)&&(this.options.zIndex=k+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!We.ielt9){fr(this._container,this.options.opacity);var c=+new Date,g=!1,k=!1;for(var $ in this._tiles){var K=this._tiles[$];if(!(!K.current||!K.loaded)){var ee=Math.min(1,(c-K.loaded)/200);fr(K.el,ee),ee<1?g=!0:(K.active?k=!0:this._onOpaqueTile(K),K.active=!0)}}k&&!this._noPrune&&this._pruneTiles(),g&&(C(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=Bt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,g=this.options.maxZoom;if(c!==void 0){for(var k in this._levels)k=Number(k),this._levels[k].el.children.length||k===c?(this._levels[k].el.style.zIndex=g-Math.abs(c-k),this._onUpdateLevel(k)):(bs(this._levels[k].el),this._removeTilesAtZoom(k),this._onRemoveLevel(k),delete this._levels[k]);var $=this._levels[c],K=this._map;return $||($=this._levels[c]={},$.el=Bt("div","leaflet-tile-container leaflet-zoom-animated",this._container),$.el.style.zIndex=g,$.origin=K.project(K.unproject(K.getPixelOrigin()),c).round(),$.zoom=c,this._setZoomTransform($,K.getCenter(),K.getZoom()),u($.el.offsetWidth),this._onCreateLevel($)),this._level=$,$}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var c,g,k=this._map.getZoom();if(k>this.options.maxZoom||k<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)g=this._tiles[c],g.retain=g.current;for(c in this._tiles)if(g=this._tiles[c],g.current&&!g.active){var $=g.coords;this._retainParent($.x,$.y,$.z,$.z-5)||this._retainChildren($.x,$.y,$.z,$.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var g in this._tiles)this._tiles[g].coords.z===c&&this._removeTile(g)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)bs(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,g,k,$){var K=Math.floor(c/2),ee=Math.floor(g/2),pe=k-1,Ee=new U(+K,+ee);Ee.z=+pe;var Oe=this._tileCoordsToKey(Ee),Be=this._tiles[Oe];return Be&&Be.active?(Be.retain=!0,!0):(Be&&Be.loaded&&(Be.retain=!0),pe>$?this._retainParent(K,ee,pe,$):!1)},_retainChildren:function(c,g,k,$){for(var K=2*c;K<2*c+2;K++)for(var ee=2*g;ee<2*g+2;ee++){var pe=new U(K,ee);pe.z=k+1;var Ee=this._tileCoordsToKey(pe),Oe=this._tiles[Ee];if(Oe&&Oe.active){Oe.retain=!0;continue}else Oe&&Oe.loaded&&(Oe.retain=!0);k+1<$&&this._retainChildren(K,ee,k+1,$)}},_resetView:function(c){var g=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),g,g)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var g=this.options;return g.minNativeZoom!==void 0&&c<g.minNativeZoom?g.minNativeZoom:g.maxNativeZoom!==void 0&&g.maxNativeZoom<c?g.maxNativeZoom:c},_setView:function(c,g,k,$){var K=Math.round(g);this.options.maxZoom!==void 0&&K>this.options.maxZoom||this.options.minZoom!==void 0&&K<this.options.minZoom?K=void 0:K=this._clampZoom(K);var ee=this.options.updateWhenZooming&&K!==this._tileZoom;(!$||ee)&&(this._tileZoom=K,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),K!==void 0&&this._update(c),k||this._pruneTiles(),this._noPrune=!!k),this._setZoomTransforms(c,g)},_setZoomTransforms:function(c,g){for(var k in this._levels)this._setZoomTransform(this._levels[k],c,g)},_setZoomTransform:function(c,g,k){var $=this._map.getZoomScale(k,c.zoom),K=c.origin.multiplyBy($).subtract(this._map._getNewPixelOrigin(g,k)).round();We.any3d?_o(c.el,K,$):$s(c.el,K)},_resetGrid:function(){var c=this._map,g=c.options.crs,k=this._tileSize=this.getTileSize(),$=this._tileZoom,K=this._map.getPixelWorldBounds(this._tileZoom);K&&(this._globalTileRange=this._pxBoundsToTileRange(K)),this._wrapX=g.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,g.wrapLng[0]],$).x/k.x),Math.ceil(c.project([0,g.wrapLng[1]],$).x/k.y)],this._wrapY=g.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([g.wrapLat[0],0],$).y/k.x),Math.ceil(c.project([g.wrapLat[1],0],$).y/k.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var g=this._map,k=g._animatingZoom?Math.max(g._animateToZoom,g.getZoom()):g.getZoom(),$=g.getZoomScale(k,this._tileZoom),K=g.project(c,this._tileZoom).floor(),ee=g.getSize().divideBy($*2);return new z(K.subtract(ee),K.add(ee))},_update:function(c){var g=this._map;if(g){var k=this._clampZoom(g.getZoom());if(c===void 0&&(c=g.getCenter()),this._tileZoom!==void 0){var $=this._getTiledPixelBounds(c),K=this._pxBoundsToTileRange($),ee=K.getCenter(),pe=[],Ee=this.options.keepBuffer,Oe=new z(K.getBottomLeft().subtract([Ee,-Ee]),K.getTopRight().add([Ee,-Ee]));if(!(isFinite(K.min.x)&&isFinite(K.min.y)&&isFinite(K.max.x)&&isFinite(K.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Be in this._tiles){var at=this._tiles[Be].coords;(at.z!==this._tileZoom||!Oe.contains(new U(at.x,at.y)))&&(this._tiles[Be].current=!1)}if(Math.abs(k-this._tileZoom)>1){this._setView(c,k);return}for(var vt=K.min.y;vt<=K.max.y;vt++)for(var Ot=K.min.x;Ot<=K.max.x;Ot++){var Sn=new U(Ot,vt);if(Sn.z=this._tileZoom,!!this._isValidTile(Sn)){var Qs=this._tiles[this._tileCoordsToKey(Sn)];Qs?Qs.current=!0:pe.push(Sn)}}if(pe.sort(function(Un,Al){return Un.distanceTo(ee)-Al.distanceTo(ee)}),pe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var pr=document.createDocumentFragment();for(Ot=0;Ot<pe.length;Ot++)this._addTile(pe[Ot],pr);this._level.el.appendChild(pr)}}}},_isValidTile:function(c){var g=this._map.options.crs;if(!g.infinite){var k=this._globalTileRange;if(!g.wrapLng&&(c.x<k.min.x||c.x>k.max.x)||!g.wrapLat&&(c.y<k.min.y||c.y>k.max.y))return!1}if(!this.options.bounds)return!0;var $=this._tileCoordsToBounds(c);return W(this.options.bounds).overlaps($)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var g=this._map,k=this.getTileSize(),$=c.scaleBy(k),K=$.add(k),ee=g.unproject($,c.z),pe=g.unproject(K,c.z);return[ee,pe]},_tileCoordsToBounds:function(c){var g=this._tileCoordsToNwSe(c),k=new q(g[0],g[1]);return this.options.noWrap||(k=this._map.wrapLatLngBounds(k)),k},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var g=c.split(":"),k=new U(+g[0],+g[1]);return k.z=+g[2],k},_removeTile:function(c){var g=this._tiles[c];g&&(bs(g.el),delete this._tiles[c],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Pt(c,"leaflet-tile");var g=this.getTileSize();c.style.width=g.x+"px",c.style.height=g.y+"px",c.onselectstart=u,c.onmousemove=u,We.ielt9&&this.options.opacity<1&&fr(c,this.options.opacity)},_addTile:function(c,g){var k=this._getTilePos(c),$=this._tileCoordsToKey(c),K=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(K),this.createTile.length<2&&R(o(this._tileReady,this,c,null,K)),$s(K,k),this._tiles[$]={el:K,coords:c,current:!0},g.appendChild(K),this.fire("tileloadstart",{tile:K,coords:c})},_tileReady:function(c,g,k){g&&this.fire("tileerror",{error:g,tile:k,coords:c});var $=this._tileCoordsToKey(c);k=this._tiles[$],k&&(k.loaded=+new Date,this._map._fadeAnimated?(fr(k.el,0),C(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(k.active=!0,this._pruneTiles()),g||(Pt(k.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:k.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),We.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var g=new U(this._wrapX?f(c.x,this._wrapX):c.x,this._wrapY?f(c.y,this._wrapY):c.y);return g.z=c.z,g},_pxBoundsToTileRange:function(c){var g=this.getTileSize();return new z(c.min.unscaleBy(g).floor(),c.max.unscaleBy(g).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function e5(c){return new Id(c)}var Pl=Id.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,g){this._url=c,g=v(this,g),g.detectRetina&&We.retina&&g.maxZoom>0?(g.tileSize=Math.floor(g.tileSize/2),g.zoomReverse?(g.zoomOffset--,g.minZoom=Math.min(g.maxZoom,g.minZoom+1)):(g.zoomOffset++,g.maxZoom=Math.max(g.minZoom,g.maxZoom-1)),g.minZoom=Math.max(0,g.minZoom)):g.zoomReverse?g.minZoom=Math.min(g.maxZoom,g.minZoom):g.maxZoom=Math.max(g.minZoom,g.maxZoom),typeof g.subdomains=="string"&&(g.subdomains=g.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,g){return this._url===c&&g===void 0&&(g=!0),this._url=c,g||this.redraw(),this},createTile:function(c,g){var k=document.createElement("img");return kt(k,"load",o(this._tileOnLoad,this,g,k)),kt(k,"error",o(this._tileOnError,this,g,k)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(k.referrerPolicy=this.options.referrerPolicy),k.alt="",k.src=this.getTileUrl(c),k},getTileUrl:function(c){var g={r:We.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var k=this._globalTileRange.max.y-c.y;this.options.tms&&(g.y=k),g["-y"]=k}return b(this._url,a(g,this.options))},_tileOnLoad:function(c,g){We.ielt9?setTimeout(o(c,this,null,g),0):c(null,g)},_tileOnError:function(c,g,k){var $=this.options.errorTileUrl;$&&g.getAttribute("src")!==$&&(g.src=$),c(k,g)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,g=this.options.maxZoom,k=this.options.zoomReverse,$=this.options.zoomOffset;return k&&(c=g-c),c+$},_getSubdomain:function(c){var g=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[g]},_abortLoading:function(){var c,g;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(g=this._tiles[c].el,g.onload=u,g.onerror=u,!g.complete)){g.src=S;var k=this._tiles[c].coords;bs(g),delete this._tiles[c],this.fire("tileabort",{tile:g,coords:k})}},_removeTile:function(c){var g=this._tiles[c];if(g)return g.el.setAttribute("src",S),Id.prototype._removeTile.call(this,c)},_tileReady:function(c,g,k){if(!(!this._map||k&&k.getAttribute("src")===S))return Id.prototype._tileReady.call(this,c,g,k)}});function _j(c,g){return new Pl(c,g)}var jj=Pl.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,g){this._url=c;var k=a({},this.defaultWmsParams);for(var $ in g)$ in this.options||(k[$]=g[$]);g=v(this,g);var K=g.detectRetina&&We.retina?2:1,ee=this.getTileSize();k.width=ee.x*K,k.height=ee.y*K,this.wmsParams=k},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var g=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[g]=this._crs.code,Pl.prototype.onAdd.call(this,c)},getTileUrl:function(c){var g=this._tileCoordsToNwSe(c),k=this._crs,$=H(k.project(g[0]),k.project(g[1])),K=$.min,ee=$.max,pe=(this._wmsVersion>=1.3&&this._crs===pj?[K.y,K.x,ee.y,ee.x]:[K.x,K.y,ee.x,ee.y]).join(","),Ee=Pl.prototype.getTileUrl.call(this,c);return Ee+x(this.wmsParams,Ee,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+pe},setParams:function(c,g){return a(this.wmsParams,c),g||this.redraw(),this}});function t5(c,g){return new jj(c,g)}Pl.WMS=jj,_j.wms=t5;var qa=Ar.extend({options:{padding:.1},initialize:function(c){v(this,c),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,g){var k=this._map.getZoomScale(g,this._zoom),$=this._map.getSize().multiplyBy(.5+this.options.padding),K=this._map.project(this._center,g),ee=$.multiplyBy(-k).add(K).subtract(this._map._getNewPixelOrigin(c,g));We.any3d?_o(this._container,ee,k):$s(this._container,ee)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,g=this._map.getSize(),k=this._map.containerPointToLayerPoint(g.multiplyBy(-c)).round();this._bounds=new z(k,k.add(g.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Nj=qa.extend({options:{tolerance:0},getEvents:function(){var c=qa.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qa.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");kt(c,"mousemove",this._onMouseMove,this),kt(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),kt(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,bs(this._container),is(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var g in this._layers)c=this._layers[g],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qa.prototype._update.call(this);var c=this._bounds,g=this._container,k=c.getSize(),$=We.retina?2:1;$s(g,c.min),g.width=$*k.x,g.height=$*k.y,g.style.width=k.x+"px",g.style.height=k.y+"px",We.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){qa.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[d(c)]=c;var g=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=g),this._drawLast=g,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var g=c._order,k=g.next,$=g.prev;k?k.prev=$:this._drawLast=$,$?$.next=k:this._drawFirst=k,delete c._order,delete this._layers[d(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var g=c.options.dashArray.split(/[, ]+/),k=[],$,K;for(K=0;K<g.length;K++){if($=Number(g[K]),isNaN($))return;k.push($)}c.options._dashArray=k}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var g=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(c._pxBounds.min.subtract([g,g])),this._redrawBounds.extend(c._pxBounds.max.add([g,g]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var g=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,g.x,g.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,g=this._redrawBounds;if(this._ctx.save(),g){var k=g.getSize();this._ctx.beginPath(),this._ctx.rect(g.min.x,g.min.y,k.x,k.y),this._ctx.clip()}this._drawing=!0;for(var $=this._drawFirst;$;$=$.next)c=$.layer,(!g||c._pxBounds&&c._pxBounds.intersects(g))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,g){if(this._drawing){var k,$,K,ee,pe=c._parts,Ee=pe.length,Oe=this._ctx;if(Ee){for(Oe.beginPath(),k=0;k<Ee;k++){for($=0,K=pe[k].length;$<K;$++)ee=pe[k][$],Oe[$?"lineTo":"moveTo"](ee.x,ee.y);g&&Oe.closePath()}this._fillStroke(Oe,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var g=c._point,k=this._ctx,$=Math.max(Math.round(c._radius),1),K=(Math.max(Math.round(c._radiusY),1)||$)/$;K!==1&&(k.save(),k.scale(1,K)),k.beginPath(),k.arc(g.x,g.y/K,$,0,Math.PI*2,!1),K!==1&&k.restore(),this._fillStroke(k,c)}},_fillStroke:function(c,g){var k=g.options;k.fill&&(c.globalAlpha=k.fillOpacity,c.fillStyle=k.fillColor||k.color,c.fill(k.fillRule||"evenodd")),k.stroke&&k.weight!==0&&(c.setLineDash&&c.setLineDash(g.options&&g.options._dashArray||[]),c.globalAlpha=k.opacity,c.lineWidth=k.weight,c.strokeStyle=k.color,c.lineCap=k.lineCap,c.lineJoin=k.lineJoin,c.stroke())},_onClick:function(c){for(var g=this._map.mouseEventToLayerPoint(c),k,$,K=this._drawFirst;K;K=K.next)k=K.layer,k.options.interactive&&k._containsPoint(g)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(k))&&($=k);this._fireEvent($?[$]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var g=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,g)}},_handleMouseOut:function(c){var g=this._hoveredLayer;g&&(Os(this._container,"leaflet-interactive"),this._fireEvent([g],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,g){if(!this._mouseHoverThrottled){for(var k,$,K=this._drawFirst;K;K=K.next)k=K.layer,k.options.interactive&&k._containsPoint(g)&&($=k);$!==this._hoveredLayer&&(this._handleMouseOut(c),$&&(Pt(this._container,"leaflet-interactive"),this._fireEvent([$],c,"mouseover"),this._hoveredLayer=$)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,g,k){this._map._fireDOMEvent(g,k||g.type,c)},_bringToFront:function(c){var g=c._order;if(g){var k=g.next,$=g.prev;if(k)k.prev=$;else return;$?$.next=k:k&&(this._drawFirst=k),g.prev=this._drawLast,this._drawLast.next=g,g.next=null,this._drawLast=g,this._requestRedraw(c)}},_bringToBack:function(c){var g=c._order;if(g){var k=g.next,$=g.prev;if($)$.next=k;else return;k?k.prev=$:$&&(this._drawLast=$),g.prev=null,g.next=this._drawFirst,this._drawFirst.prev=g,this._drawFirst=g,this._requestRedraw(c)}}});function Sj(c){return We.canvas?new Nj(c):null}var Md=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),s5={_initContainer:function(){this._container=Bt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qa.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var g=c._container=Md("shape");Pt(g,"leaflet-vml-shape "+(this.options.className||"")),g.coordsize="1 1",c._path=Md("path"),g.appendChild(c._path),this._updateStyle(c),this._layers[d(c)]=c},_addPath:function(c){var g=c._container;this._container.appendChild(g),c.options.interactive&&c.addInteractiveTarget(g)},_removePath:function(c){var g=c._container;bs(g),c.removeInteractiveTarget(g),delete this._layers[d(c)]},_updateStyle:function(c){var g=c._stroke,k=c._fill,$=c.options,K=c._container;K.stroked=!!$.stroke,K.filled=!!$.fill,$.stroke?(g||(g=c._stroke=Md("stroke")),K.appendChild(g),g.weight=$.weight+"px",g.color=$.color,g.opacity=$.opacity,$.dashArray?g.dashStyle=j($.dashArray)?$.dashArray.join(" "):$.dashArray.replace(/( *, *)/g," "):g.dashStyle="",g.endcap=$.lineCap.replace("butt","flat"),g.joinstyle=$.lineJoin):g&&(K.removeChild(g),c._stroke=null),$.fill?(k||(k=c._fill=Md("fill")),K.appendChild(k),k.color=$.fillColor||$.color,k.opacity=$.fillOpacity):k&&(K.removeChild(k),c._fill=null)},_updateCircle:function(c){var g=c._point.round(),k=Math.round(c._radius),$=Math.round(c._radiusY||k);this._setPath(c,c._empty()?"M0 0":"AL "+g.x+","+g.y+" "+k+","+$+" 0,"+65535*360)},_setPath:function(c,g){c._path.v=g},_bringToFront:function(c){Nl(c._container)},_bringToBack:function(c){Sl(c._container)}},sf=We.vml?Md:ne,Dd=qa.extend({_initContainer:function(){this._container=sf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){bs(this._container),is(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qa.prototype._update.call(this);var c=this._bounds,g=c.getSize(),k=this._container;(!this._svgSize||!this._svgSize.equals(g))&&(this._svgSize=g,k.setAttribute("width",g.x),k.setAttribute("height",g.y)),$s(k,c.min),k.setAttribute("viewBox",[c.min.x,c.min.y,g.x,g.y].join(" ")),this.fire("update")}},_initPath:function(c){var g=c._path=sf("path");c.options.className&&Pt(g,c.options.className),c.options.interactive&&Pt(g,"leaflet-interactive"),this._updateStyle(c),this._layers[d(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){bs(c._path),c.removeInteractiveTarget(c._path),delete this._layers[d(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var g=c._path,k=c.options;g&&(k.stroke?(g.setAttribute("stroke",k.color),g.setAttribute("stroke-opacity",k.opacity),g.setAttribute("stroke-width",k.weight),g.setAttribute("stroke-linecap",k.lineCap),g.setAttribute("stroke-linejoin",k.lineJoin),k.dashArray?g.setAttribute("stroke-dasharray",k.dashArray):g.removeAttribute("stroke-dasharray"),k.dashOffset?g.setAttribute("stroke-dashoffset",k.dashOffset):g.removeAttribute("stroke-dashoffset")):g.setAttribute("stroke","none"),k.fill?(g.setAttribute("fill",k.fillColor||k.color),g.setAttribute("fill-opacity",k.fillOpacity),g.setAttribute("fill-rule",k.fillRule||"evenodd")):g.setAttribute("fill","none"))},_updatePoly:function(c,g){this._setPath(c,Ce(c._parts,g))},_updateCircle:function(c){var g=c._point,k=Math.max(Math.round(c._radius),1),$=Math.max(Math.round(c._radiusY),1)||k,K="a"+k+","+$+" 0 1,0 ",ee=c._empty()?"M0 0":"M"+(g.x-k)+","+g.y+K+k*2+",0 "+K+-k*2+",0 ";this._setPath(c,ee)},_setPath:function(c,g){c._path.setAttribute("d",g)},_bringToFront:function(c){Nl(c._path)},_bringToBack:function(c){Sl(c._path)}});We.vml&&Dd.include(s5);function kj(c){return We.svg||We.vml?new Dd(c):null}Dt.include({getRenderer:function(c){var g=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return g||(g=this._renderer=this._createRenderer()),this.hasLayer(g)||this.addLayer(g),g},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var g=this._paneRenderers[c];return g===void 0&&(g=this._createRenderer({pane:c}),this._paneRenderers[c]=g),g},_createRenderer:function(c){return this.options.preferCanvas&&Sj(c)||kj(c)}});var Cj=El.extend({initialize:function(c,g){El.prototype.initialize.call(this,this._boundsToLatLngs(c),g)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=W(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function n5(c,g){return new Cj(c,g)}Dd.create=sf,Dd.pointsToPath=Ce,Ua.geometryToLayer=Zh,Ua.coordsToLatLng=iv,Ua.coordsToLatLngs=Yh,Ua.latLngToCoords=ov,Ua.latLngsToCoords=Xh,Ua.getFeature=Tl,Ua.asFeature=Jh,Dt.mergeOptions({boxZoom:!0});var Ej=ca.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){kt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){is(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){bs(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ed(),Ug(),this._startPoint=this._map.mouseEventToContainerPoint(c),kt(document,{contextmenu:So,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=Bt("div","leaflet-zoom-box",this._container),Pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var g=new z(this._point,this._startPoint),k=g.getSize();$s(this._box,g.min),this._box.style.width=k.x+"px",this._box.style.height=k.y+"px"},_finish:function(){this._moved&&(bs(this._box),Os(this._container,"leaflet-crosshair")),Td(),qg(),is(document,{contextmenu:So,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var g=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(g).fire("boxzoomend",{boxZoomBounds:g})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Dt.addInitHook("addHandler","boxZoom",Ej),Dt.mergeOptions({doubleClickZoom:!0});var Tj=ca.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var g=this._map,k=g.getZoom(),$=g.options.zoomDelta,K=c.originalEvent.shiftKey?k-$:k+$;g.options.doubleClickZoom==="center"?g.setZoom(K):g.setZoomAround(c.containerPoint,K)}});Dt.addInitHook("addHandler","doubleClickZoom",Tj),Dt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Pj=ca.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new ji(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Os(this._map._container,"leaflet-grab"),Os(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var g=W(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(g.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(g.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var g=this._lastTime=+new Date,k=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(k),this._times.push(g),this._prunePositions(g)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),g=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=g.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,g){return c-(c-g)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),g=this._offsetLimit;c.x<g.min.x&&(c.x=this._viscousLimit(c.x,g.min.x)),c.y<g.min.y&&(c.y=this._viscousLimit(c.y,g.min.y)),c.x>g.max.x&&(c.x=this._viscousLimit(c.x,g.max.x)),c.y>g.max.y&&(c.y=this._viscousLimit(c.y,g.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,g=Math.round(c/2),k=this._initialWorldOffset,$=this._draggable._newPos.x,K=($-g+k)%c+g-k,ee=($+g+k)%c-g-k,pe=Math.abs(K+k)<Math.abs(ee+k)?K:ee;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=pe},_onDragEnd:function(c){var g=this._map,k=g.options,$=!k.inertia||c.noInertia||this._times.length<2;if(g.fire("dragend",c),$)g.fire("moveend");else{this._prunePositions(+new Date);var K=this._lastPos.subtract(this._positions[0]),ee=(this._lastTime-this._times[0])/1e3,pe=k.easeLinearity,Ee=K.multiplyBy(pe/ee),Oe=Ee.distanceTo([0,0]),Be=Math.min(k.inertiaMaxSpeed,Oe),at=Ee.multiplyBy(Be/Oe),vt=Be/(k.inertiaDeceleration*pe),Ot=at.multiplyBy(-vt/2).round();!Ot.x&&!Ot.y?g.fire("moveend"):(Ot=g._limitOffset(Ot,g.options.maxBounds),R(function(){g.panBy(Ot,{duration:vt,easeLinearity:pe,noMoveStart:!0,animate:!0})}))}}});Dt.addInitHook("addHandler","dragging",Pj),Dt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Aj=ca.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),kt(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),is(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,g=document.documentElement,k=c.scrollTop||g.scrollTop,$=c.scrollLeft||g.scrollLeft;this._map._container.focus(),window.scrollTo($,k)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var g=this._panKeys={},k=this.keyCodes,$,K;for($=0,K=k.left.length;$<K;$++)g[k.left[$]]=[-1*c,0];for($=0,K=k.right.length;$<K;$++)g[k.right[$]]=[c,0];for($=0,K=k.down.length;$<K;$++)g[k.down[$]]=[0,c];for($=0,K=k.up.length;$<K;$++)g[k.up[$]]=[0,-1*c]},_setZoomDelta:function(c){var g=this._zoomKeys={},k=this.keyCodes,$,K;for($=0,K=k.zoomIn.length;$<K;$++)g[k.zoomIn[$]]=c;for($=0,K=k.zoomOut.length;$<K;$++)g[k.zoomOut[$]]=-c},_addHooks:function(){kt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){is(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var g=c.keyCode,k=this._map,$;if(g in this._panKeys){if(!k._panAnim||!k._panAnim._inProgress)if($=this._panKeys[g],c.shiftKey&&($=B($).multiplyBy(3)),k.options.maxBounds&&($=k._limitOffset(B($),k.options.maxBounds)),k.options.worldCopyJump){var K=k.wrapLatLng(k.unproject(k.project(k.getCenter()).add($)));k.panTo(K)}else k.panBy($)}else if(g in this._zoomKeys)k.setZoom(k.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[g]);else if(g===27&&k._popup&&k._popup.options.closeOnEscapeKey)k.closePopup();else return;So(c)}}});Dt.addInitHook("addHandler","keyboard",Aj),Dt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Oj=ca.extend({addHooks:function(){kt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){is(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var g=sj(c),k=this._map.options.wheelDebounceTime;this._delta+=g,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var $=Math.max(k-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),$),So(c)},_performZoom:function(){var c=this._map,g=c.getZoom(),k=this._map.options.zoomSnap||0;c._stop();var $=this._delta/(this._map.options.wheelPxPerZoomLevel*4),K=4*Math.log(2/(1+Math.exp(-Math.abs($))))/Math.LN2,ee=k?Math.ceil(K/k)*k:K,pe=c._limitZoom(g+(this._delta>0?ee:-ee))-g;this._delta=0,this._startTime=null,pe&&(c.options.scrollWheelZoom==="center"?c.setZoom(g+pe):c.setZoomAround(this._lastMousePos,g+pe))}});Dt.addInitHook("addHandler","scrollWheelZoom",Oj);var r5=600;Dt.mergeOptions({tapHold:We.touchNative&&We.safari&&We.mobile,tapTolerance:15});var Rj=ca.extend({addHooks:function(){kt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){is(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var g=c.touches[0];this._startPos=this._newPos=new U(g.clientX,g.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(kt(document,"touchend",on),kt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",g))},this),r5),kt(document,"touchend touchcancel contextmenu",this._cancel,this),kt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){is(document,"touchend",on),is(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),is(document,"touchend touchcancel contextmenu",this._cancel,this),is(document,"touchmove",this._onMove,this)},_onMove:function(c){var g=c.touches[0];this._newPos=new U(g.clientX,g.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,g){var k=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY});k._simulated=!0,g.target.dispatchEvent(k)}});Dt.addInitHook("addHandler","tapHold",Rj),Dt.mergeOptions({touchZoom:We.touch,bounceAtZoomLimits:!0});var Lj=ca.extend({addHooks:function(){Pt(this._map._container,"leaflet-touch-zoom"),kt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Os(this._map._container,"leaflet-touch-zoom"),is(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var g=this._map;if(!(!c.touches||c.touches.length!==2||g._animatingZoom||this._zooming)){var k=g.mouseEventToContainerPoint(c.touches[0]),$=g.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=g.getSize()._divideBy(2),this._startLatLng=g.containerPointToLatLng(this._centerPoint),g.options.touchZoom!=="center"&&(this._pinchStartLatLng=g.containerPointToLatLng(k.add($)._divideBy(2))),this._startDist=k.distanceTo($),this._startZoom=g.getZoom(),this._moved=!1,this._zooming=!0,g._stop(),kt(document,"touchmove",this._onTouchMove,this),kt(document,"touchend touchcancel",this._onTouchEnd,this),on(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var g=this._map,k=g.mouseEventToContainerPoint(c.touches[0]),$=g.mouseEventToContainerPoint(c.touches[1]),K=k.distanceTo($)/this._startDist;if(this._zoom=g.getScaleZoom(K,this._startZoom),!g.options.bounceAtZoomLimits&&(this._zoom<g.getMinZoom()&&K<1||this._zoom>g.getMaxZoom()&&K>1)&&(this._zoom=g._limitZoom(this._zoom)),g.options.touchZoom==="center"){if(this._center=this._startLatLng,K===1)return}else{var ee=k._add($)._divideBy(2)._subtract(this._centerPoint);if(K===1&&ee.x===0&&ee.y===0)return;this._center=g.unproject(g.project(this._pinchStartLatLng,this._zoom).subtract(ee),this._zoom)}this._moved||(g._moveStart(!0,!1),this._moved=!0),C(this._animRequest);var pe=o(g._move,g,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(pe,this,!0),on(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,C(this._animRequest),is(document,"touchmove",this._onTouchMove,this),is(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Dt.addInitHook("addHandler","touchZoom",Lj),Dt.BoxZoom=Ej,Dt.DoubleClickZoom=Tj,Dt.Drag=Pj,Dt.Keyboard=Aj,Dt.ScrollWheelZoom=Oj,Dt.TapHold=Rj,Dt.TouchZoom=Lj,n.Bounds=z,n.Browser=We,n.CRS=G,n.Canvas=Nj,n.Circle=av,n.CircleMarker=Kh,n.Class=A,n.Control=Pr,n.DivIcon=wj,n.DivOverlay=da,n.DomEvent=_M,n.DomUtil=bM,n.Draggable=ji,n.Evented=X,n.FeatureGroup=za,n.GeoJSON=Ua,n.GridLayer=Id,n.Handler=ca,n.Icon=Cl,n.ImageOverlay=Qh,n.LatLng=Y,n.LatLngBounds=q,n.Layer=Ar,n.LayerGroup=kl,n.LineUtil=IM,n.Map=Dt,n.Marker=Gh,n.Mixin=TM,n.Path=Ni,n.Point=U,n.PolyUtil=PM,n.Polygon=El,n.Polyline=Va,n.Popup=ef,n.PosAnimation=nj,n.Projection=MM,n.Rectangle=Cj,n.Renderer=qa,n.SVG=Dd,n.SVGOverlay=bj,n.TileLayer=Pl,n.Tooltip=tf,n.Transformation=ye,n.Util=D,n.VideoOverlay=yj,n.bind=o,n.bounds=H,n.canvas=Sj,n.circle=qM,n.circleMarker=UM,n.control=Od,n.divIcon=QM,n.extend=a,n.featureGroup=BM,n.geoJSON=xj,n.geoJson=GM,n.gridLayer=e5,n.icon=zM,n.imageOverlay=KM,n.latLng=V,n.latLngBounds=W,n.layerGroup=$M,n.map=jM,n.marker=VM,n.point=B,n.polygon=WM,n.polyline=HM,n.popup=XM,n.rectangle=n5,n.setOptions=v,n.stamp=d,n.svg=kj,n.svgOverlay=YM,n.tileLayer=_j,n.tooltip=JM,n.transformation=ke,n.version=r,n.videoOverlay=ZM;var a5=window.L;n.noConflict=function(){return window.L=a5,this},window.L=n})})(m0,m0.exports);var xd=m0.exports;const Fh=vl(xd);function xg(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function __(e,t){return t==null?function(r,a){const i=_.useRef();return i.current||(i.current=e(r,a)),i}:function(r,a){const i=_.useRef();i.current||(i.current=e(r,a));const o=_.useRef(r),{instance:l}=i.current;return _.useEffect(function(){o.current!==r&&(t(l,r,o.current),o.current=r)},[l,r,a]),i}}function OL(e,t){_.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var i;(i=t.layerContainer)==null||i.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function RL(e){return function(n){const r=b_(),a=e(w_(n,r),r);return VK(r.map,n.attribution),AL(a.current,n.eventHandlers),OL(a.current,r),a}}function GK(e,t){const n=_.useRef();_.useEffect(function(){if(t.pathOptions!==n.current){const a=t.pathOptions??{};e.instance.setStyle(a),n.current=a}},[e,t])}function KK(e){return function(n){const r=b_(),a=e(w_(n,r),r);return AL(a.current,n.eventHandlers),OL(a.current,r),GK(a.current,n),a}}function ZK(e,t){const n=__(e,t),r=RL(n);return PL(r)}function LL(e,t){const n=__(e,t),r=KK(n);return PL(r)}function YK(e,t){const n=__(e,t),r=RL(n);return WK(r)}function XK(e,t,n){const{opacity:r,zIndex:a}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),a!=null&&a!==n.zIndex&&e.setZIndex(a)}function IL(){return b_().map}function ML(e){const t=IL();return _.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const JK=LL(function({center:t,children:n,...r},a){const i=new xd.Circle(t,r);return xg(i,y_(a,{overlayContainer:i}))},UK);function p0(){return p0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p0.apply(this,arguments)}function QK({bounds:e,boundsOptions:t,center:n,children:r,className:a,id:i,placeholder:o,style:l,whenReady:d,zoom:h,...f},u){const[m]=_.useState({className:a,id:i,style:l}),[p,w]=_.useState(null);_.useImperativeHandle(u,()=>(p==null?void 0:p.map)??null,[p]);const v=_.useCallback(y=>{if(y!==null&&p===null){const b=new xd.Map(y,f);n!=null&&h!=null?b.setView(n,h):e!=null&&b.fitBounds(e,t),d!=null&&b.whenReady(d),w(HK(b))}},[]);_.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const x=p?Re.createElement(TL,{value:p},r):o??null;return Re.createElement("div",p0({},m,{ref:v}),x)}const j_=_.forwardRef(QK),ph=ZK(function({position:t,...n},r){const a=new xd.Marker(t,n);return xg(a,y_(r,{overlayContainer:a}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),eZ=LL(function({positions:t,...n},r){const a=new xd.Polyline(t,n);return xg(a,y_(r,{overlayContainer:a}))},function(t,n,r){n.positions!==r.positions&&t.setLatLngs(n.positions)}),N_=YK(function({url:t,...n},r){const a=new xd.TileLayer(t,w_(n,r));return xg(a,r)},function(t,n,r){XK(t,n,r);const{url:a}=n;a!=null&&a!==r.url&&t.setUrl(a)}),tZ=Fh.divIcon({className:"custom-marker",html:'<div style="background-color: #ef4444; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]}),sZ=Fh.divIcon({className:"vendor-marker",html:'<div style="background-color: #10b981; width: 24px; height: 24px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 0 8px rgba(0,0,0,0.3);"></div>',iconSize:[24,24],iconAnchor:[12,12]}),nZ=({onLocationSelect:e,onClose:t,vendorLocation:n,maxRadius:r=10,vendorName:a="Vendor"})=>{const[i,o]=_.useState(null),[l,d]=_.useState(""),[h,f]=_.useState([]),[u,m]=_.useState(!0),[p,w]=_.useState(""),[v,x]=_.useState([27.7172,85.324]),y=()=>(ML({click(I){const{lat:O,lng:R}=I.latlng;N(O,R),b(O,R)}}),null),b=async(I,O)=>{try{const C=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${I}&lon=${O}&addressdetails=1`)).json();if(C.address){const D=C.address.road||C.address.neighbourhood,A=C.address.neighbourhood||C.address.suburb||C.address.city||C.address.town,M=`${D||A||"Unknown Location"}, ${C.address.city||C.address.town||C.address.state||""}`;w(M)}}catch(R){console.error("Error fetching address:",R),w(`${I.toFixed(4)}, ${O.toFixed(4)}`)}};_.useEffect(()=>{n&&x([n.lat,n.lng])},[n]);const j=(I,O,R,C)=>{const A=(R-I)*Math.PI/180,M=(C-O)*Math.PI/180,Z=Math.sin(A/2)*Math.sin(A/2)+Math.cos(I*Math.PI/180)*Math.cos(R*Math.PI/180)*Math.sin(M/2)*Math.sin(M/2);return 6371*(2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z)))},N=(I,O)=>{if(o({lat:I,lng:O}),n){const R=j(I,O,n.lat,n.lng);m(R<=r)}},S=()=>{i&&u&&e(i.lat,i.lng,p||`${i.lat.toFixed(4)}, ${i.lng.toFixed(4)}`)};_.useEffect(()=>{const I=setTimeout(()=>{l.trim()?P():f([])},300);return()=>clearTimeout(I)},[l]);const P=async()=>{if(!l.trim()){f([]);return}try{const O=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}&limit=5&addressdetails=1`)).json();f(O)}catch(I){console.error("Geocoding error:",I),f([])}},T=I=>{const O=parseFloat(I.lat),R=parseFloat(I.lon);x([O,R]),N(O,R),w(I.display_name),f([]),d("")},E=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(I=>{const{latitude:O,longitude:R}=I.coords;x([O,R]),N(O,R),b(O,R)},I=>{console.error("Geolocation error:",I)})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[95vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Select Delivery Location"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(sn,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(je,{placeholder:"Search for an address...",value:l,onChange:I=>d(I.target.value)}),h.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-10 max-h-32 overflow-y-auto",children:h.map((I,O)=>s.jsx("div",{className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>T(I),children:s.jsx("p",{className:"text-xs font-medium text-gray-900",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:I.display_name})},O))})]}),s.jsx(te,{onClick:E,size:"sm",variant:"outline",children:s.jsx(ST,{className:"h-4 w-4"})})]})}),s.jsx("div",{className:"h-64 rounded-lg overflow-hidden border",children:s.jsxs(j_,{center:v,zoom:13,style:{height:"100%",width:"100%"},children:[s.jsx(N_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),n&&s.jsxs(s.Fragment,{children:[s.jsx(ph,{position:[n.lat,n.lng],icon:sZ}),s.jsx(JK,{center:[n.lat,n.lng],radius:r*1e3,pathOptions:{color:"#10b981",fillColor:"#10b981",fillOpacity:.1,weight:2}})]}),i&&s.jsx(ph,{position:[i.lat,i.lng],icon:tZ}),s.jsx(y,{})]},`${v[0]}-${v[1]}`)}),i&&s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Selected Location:"}),s.jsx("p",{className:"text-sm text-gray-600",children:p}),n&&s.jsxs("p",{className:`text-sm mt-2 ${u?"text-green-600":"text-red-600"}`,children:["Distance from ",a,": ",j(i.lat,i.lng,n.lat,n.lng).toFixed(1),"km",!u&&` (exceeds ${r}km delivery limit)`]})]})]}),s.jsxs("div",{className:"flex gap-2 p-4 border-t flex-shrink-0",children:[s.jsx(te,{variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),s.jsx(te,{onClick:S,disabled:!i||!u,className:"flex-1",children:"Confirm Location"})]})]})})};class rZ{async getAuthHeaders(){var r;const t=await Ae.getToken(),n=await Ae.getUser();return(n==null?void 0:n.user_type)==="vendor"&&((r=n==null?void 0:n.available_roles)!=null&&r.includes("customer"))?{"Content-Type":"application/json","ngrok-skip-browser-warning":"true",...t&&{Authorization:`Token ${t}`}}:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true",...t&&{Authorization:`Token ${t}`}}}async createOrder(t){const n=await fetch(`${Qe}orders/create/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const a=await n.json();throw new Error(a.message||"Failed to create order")}const r=await n.json();return this.notifyVendorOfNewOrder(r.order),r}notifyVendorOfNewOrder(t){window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderCreated",{detail:{order:t}}))}async getOrders(){const t=await fetch(`${Qe}orders/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch orders");const n=await t.json();return n.results||n}async getOrdersPaginated(t=1,n=10){if(!await Ae.isAuthenticated())return{results:[],next:null,count:0};const a=new URLSearchParams({page:t.toString(),page_size:n.toString()}),i=await fetch(`${Qe}orders/?${a}`,{headers:await this.getAuthHeaders()});if(!i.ok){if(i.status===401)return{results:[],next:null,count:0};throw new Error("Failed to fetch orders")}return i.json()}async getOrder(t){const n=await fetch(`${Qe}orders/${t}/`,{headers:await this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch order");return n.json()}async cancelOrder(t,n="Cancelled by customer"){const r=await fetch(`${Qe}orders/${t}/cancel/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({reason:n})});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to cancel order")}return r.json()}async createReview(t,n){const r=await fetch(`${Qe}orders/${t}/review/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to create review")}return r.json()}async requestRefund(t,n){const r=await fetch(`${Qe}orders/${t}/refund/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to request refund")}return r.json()}async getPendingOrders(){const t=await fetch(`${Qe}orders/vendor/pending/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending orders");return t.json()}async acceptOrder(t){const n=await fetch(`${Qe}orders/${t}/accept/`,{method:"POST",headers:await this.getAuthHeaders()});if(!n.ok){const a=await n.json();throw new Error(a.error||"Failed to accept order")}const r=await n.json();return this.notifyCustomerOfOrderUpdate(r.order,"accepted"),r}notifyCustomerOfOrderUpdate(t,n){window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{order:t,status:n}}))}async rejectOrder(t,n="Rejected by vendor"){const r=await fetch(`${Qe}orders/${t}/reject/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({reason:n})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to reject order")}const a=await r.json();return this.notifyCustomerOfOrderUpdate(a.order,"rejected"),a}}const ep=new rZ,aZ=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3};function iZ(){var fe,ge;const e=lt(),{cart:t}=Bn();$n();const{toast:n}=ns(),[r,a]=_.useState("cash_on_delivery"),[i,o]=_.useState("current"),[l,d]=_.useState(null),[h,f]=_.useState("Detecting location..."),[u,m]=_.useState({lat:null,lng:null,address:""}),[p,w]=_.useState(!1),[v,x]=_.useState(null),[y,b]=_.useState({phone:"",instructions:""}),[j,N]=_.useState(null),[S,P]=_.useState("options"),[T,E]=_.useState(""),[I,O]=_.useState([]),[R,C]=_.useState(!1),[D,A]=_.useState({});_.useState({});const[M,Z]=_.useState({});_.useEffect(()=>{var Te;const me=ht.getLocation();if(me)d(me),U(me.latitude,me.longitude).then(f);else return ht.startTracking(),ht.subscribe(async Ie=>{if(Ie){d(Ie);const se=await U(Ie.latitude,Ie.longitude);f(se)}});((Te=t==null?void 0:t.items)==null?void 0:Te.length)>0&&F(t.items[0].product.vendor_id),(async()=>{await Ae.getToken()&&X()})()},[t]);const X=async()=>{try{const me=await Ae.getToken(),be=await fetch(`${Qe}profile/`,{headers:{Authorization:`Token ${me}`,"ngrok-skip-browser-warning":"true"}});if(be.ok){const Te=await be.json();N(Te),b(Se=>({...Se,phone:Te.phone_number||""}))}}catch(me){console.error("Failed to fetch user info:",me)}},U=async(me,be)=>{try{const Se=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${me}&lon=${be}&addressdetails=1`)).json();if(Se.address){const Ie=Se.address.road||Se.address.neighbourhood,se=Se.address.neighbourhood||Se.address.suburb||Se.address.city||Se.address.town;return`${Ie||se||"Unknown Location"}, ${Se.address.city||Se.address.town||Se.address.state||""}`}return`${me.toFixed(4)}, ${be.toFixed(4)}`}catch{return`${me.toFixed(4)}, ${be.toFixed(4)}`}},F=async me=>{try{const be=await fetch(`${Qe}vendors/${me}/`,{headers:{"ngrok-skip-browser-warning":"true"}});if(be.ok){const Te=await be.json();x(Te)}}catch(be){console.error("Failed to fetch vendor info:",be)}},B=Fn(),H=new URLSearchParams(window.location.search).get("directBuy")==="true",q=H?JSON.parse(localStorage.getItem("buyNowProduct")||"null"):null,W=(fe=B.state)!=null&&fe.directBuy?B.state:H&&q?{directBuy:!0,product:q}:null,Y=(ge=B.state)==null?void 0:ge.selectedItems;console.log("Checkout - Location state:",B.state),console.log("Checkout - URL params directBuy:",H),console.log("Checkout - buyNowProduct from localStorage:",q),console.log("Checkout - Final directBuyData:",W);const V=W?[{id:"direct",product:{id:W.product.id,name:W.product.name,price:W.product.price,vendor_name:W.product.vendor_name,vendor_id:W.product.vendor_id,images:W.product.images,free_delivery:W.product.free_delivery,custom_delivery_fee_enabled:W.product.custom_delivery_fee_enabled,custom_delivery_fee:W.product.custom_delivery_fee,dynamic_fields:W.product.dynamic_fields||{}},quantity:W.product.quantity,total_price:(parseFloat(W.product.price)*W.product.quantity).toString()}]:Y||(t==null?void 0:t.items)||[];console.log("Checkout - Cart items:",V),console.log("Checkout - Direct buy data:",W),console.log("Checkout - Buy now product from localStorage:",q);const G=V.reduce((me,be)=>{const Te=`${be.product.id}_${be.id||"direct"}`,Ie=Object.values(M[Te]||{}).reduce((we,Pe)=>we+Pe,0)||be.quantity,se=parseFloat(be.product.price||be.total_price||0);return console.log(`Checkout - Item: ${be.product.name}, Price: ${be.product.price}, Total: ${be.total_price}, Calculated: ${se}, Quantity: ${Ie}`),me+se*Ie},0),J=(()=>{let me=0,be=!1;return console.log("Checkout - Calculating delivery fee for items:",V),V.forEach(Te=>{const Se=Te.product;if(console.log("Checkout - Processing item:",{name:Se.name,free_delivery:Se.free_delivery,custom_delivery_fee_enabled:Se.custom_delivery_fee_enabled,custom_delivery_fee:Se.custom_delivery_fee}),Se.free_delivery===!0){console.log("Checkout - Free delivery for:",Se.name);return}else if(Se.custom_delivery_fee_enabled===!0&&Se.custom_delivery_fee!==null&&Se.custom_delivery_fee!==void 0){const Ie=parseFloat(Se.custom_delivery_fee.toString());console.log("Checkout - Custom delivery fee for:",Se.name,"Fee:",Ie),me+=Ie}else console.log("Checkout - Undetermined delivery fee for:",Se.name),be=!0}),console.log("Checkout - Final delivery calculation:",{fee:me,hasUndetermined:be}),{fee:me,hasUndetermined:be}})(),le=J.fee,ye=J.hasUndetermined,ke=G+le,Ne=me=>/^(98|97)\d{8}$/.test(me.replace(/\s+/g,"")),_e=(me,be)=>{if(me==="phone"){const Te=be.replace(/[^0-9]/g,"");Te.length<=10&&b(Se=>({...Se,[me]:Te}))}else b(Te=>({...Te,[me]:be}))},ne=(me,be)=>{if(!v||!v.latitude||!v.longitude||!v.delivery_radius)return{valid:!0,distance:0};const Te=aZ(me,be,v.latitude,v.longitude);return{valid:Te<=v.delivery_radius,distance:Te,maxRadius:v.delivery_radius}},Ce=me=>{o(me),me==="custom"&&v?w(!0):me==="custom"&&!v&&n({title:"Vendor Information Loading",description:"Please wait for vendor information to load before selecting map location",variant:"destructive"})},ve=(me,be,Te)=>{const Se=ne(me,be);if(!Se.valid){n({title:"Location Out of Range",description:`This location is ${Se.distance.toFixed(1)}km away. Maximum delivery range is ${Se.maxRadius}km.`,variant:"destructive"});return}m({lat:me,lng:be,address:Te}),w(!1),n({title:"Location Selected",description:`Delivery location set (${Se.distance.toFixed(1)}km from vendor)`})},oe=()=>{const me=i==="current"?l:u.lat,be=(j==null?void 0:j.phone_number)||y.phone,Te=be&&Ne(be);return me&&Te},de=()=>V.every(me=>{if((me.product.dynamic_fields?Object.entries(me.product.dynamic_fields).filter(([se,we])=>Array.isArray(we)&&we.length>0):[]).length===0)return!0;const Te=`${me.product.id}_${me.id||"direct"}`,Se=M[Te]||{};return Object.values(Se).reduce((se,we)=>se+we,0)>0}),Q=async()=>{var se;if(!await Ae.getToken()){n({title:"Login Required",description:"Please login to place an order",variant:"destructive"}),e("/login");return}if(!oe()){n({title:"Missing Information",description:"Please complete delivery information",variant:"destructive"}),P("delivery");return}if(!de()){n({title:"Product Options Required",description:"Please select all required product options",variant:"destructive"});return}const be=i==="current"?l:u;if(!be||!be.latitude&&!be.lat){n({title:"Location Required",description:"Please select a delivery location",variant:"destructive"});return}const Te=be.latitude||be.lat,Se=be.longitude||be.lng,Ie=ne(Te,Se);if(!Ie.valid){n({title:"Delivery Not Available",description:`Selected location is outside delivery range (${Ie.distance.toFixed(1)}km > ${Ie.maxRadius}km)`,variant:"destructive"});return}try{if(console.log("Checkout - About to create order with cartItems:",V),!V||V.length===0){n({title:"No Items",description:"No items found to place order. Please add items to cart first.",variant:"destructive"});return}const we={items:V.map(He=>{const _t=`${He.product.id}_${He.id||"direct"}`,It=D[_t]||{},ys=Object.values(M[_t]||{}).reduce((he,nt)=>he+nt,0)||He.quantity,ms={};return M[_t]&&Object.entries(M[_t]).forEach(([he,nt])=>{if(nt>0){const Fe=he.split("-");(He.product.dynamic_fields?Object.entries(He.product.dynamic_fields).filter(([tt,qe])=>Array.isArray(qe)&&qe.length>0):[]).forEach(([tt],qe)=>{ms[tt]||(ms[tt]=[]);for(let ft=0;ft<nt;ft++)ms[tt].push(Fe[qe])})}}),{product_id:He.product.id,quantity:ys,unit_price:parseFloat(He.product.price||He.total_price||0),price:parseFloat(He.product.price||He.total_price||0),delivery_fee:He.product.free_delivery===!0?0:He.product.custom_delivery_fee_enabled===!0&&He.product.custom_delivery_fee!==null&&He.product.custom_delivery_fee!==void 0?parseFloat(He.product.custom_delivery_fee.toString()):0,product_selections:Object.keys(ms).length>0?ms:It,product_name:He.product.name,vendor_name:He.product.vendor_name}}),delivery_name:(j==null?void 0:j.username)||(j==null?void 0:j.first_name)||"Customer",delivery_phone:(j==null?void 0:j.phone_number)||y.phone,delivery_address:i==="current"?h:u.address,delivery_latitude:Te,delivery_longitude:Se,delivery_instructions:y.instructions,payment_method:r,total_amount:ke,subtotal:G,delivery_fee:le,delivery_distance:Ie.distance,notes:`Distance: ${Ie.distance.toFixed(1)}km from vendor. Items: ${V.map(He=>`${He.product.name} (${He.quantity}x)`).join(", ")}`},Pe=await ep.createOrder(we),Me=Pe.order?[Pe.order]:[],Le=Me.length;if(n({title:"Order Placed Successfully!",description:Le>1?`${Le} orders created for different vendors`:"Order has been placed successfully."}),"Notification"in window&&Notification.permission==="granted"&&"serviceWorker"in navigator){const He=Me[0];navigator.serviceWorker.getRegistration().then(_t=>{_t&&_t.showNotification("New Order Placed!",{body:Le>1?`${Le} orders created for Rs ${Me.reduce((It,ss)=>It+parseFloat(ss.total_amount),0).toFixed(2)}`:`Order #${(He==null?void 0:He.order_number)||(He==null?void 0:He.id)} for Rs ${He.total_amount}`,icon:"/favicon.ico",tag:`order-${He.id}`,requireInteraction:!0})})}if(window.dispatchEvent&&Me.forEach(He=>{window.dispatchEvent(new CustomEvent("orderCreated",{detail:{order:He}}))}),W&&H&&localStorage.removeItem("buyNowProduct"),!W&&Y){const He=await Ae.getToken();for(const _t of Y)try{await fetch(`${Qe}cart/items/${_t.id}/remove/`,{method:"DELETE",headers:{Authorization:`Token ${He}`,"ngrok-skip-browser-warning":"true"}})}catch(It){console.error("Error removing cart item:",It)}}Le===1?e(`/order-confirmation/${(se=Me[0])==null?void 0:se.id}`,{state:{order:Me[0]}}):e("/orders",{state:{message:`${Le} orders created successfully`,newOrders:Me}})}catch(we){console.error("Order creation error:",we),n({title:"Order Failed",description:we.message||"Network error. Please try again.",variant:"destructive"})}},ae=()=>l?h:"Detecting location...",ue=()=>u.lat?u.address||`Custom Location (${u.lat.toFixed(4)}, ${u.lng.toFixed(4)})`:"Select on map",re=async me=>{if(!me.trim()){O([]),C(!1);return}try{const Te=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(me)}&limit=5&addressdetails=1`)).json();O(Te),C(!0)}catch(be){console.error("Location search error:",be),O([]),C(!1)}},ce=async me=>{const be=parseFloat(me.lat),Te=parseFloat(me.lon),Se=me.display_name,Ie=ne(be,Te);if(!Ie.valid){n({title:"Location Out of Range",description:`This location is ${Ie.distance.toFixed(1)}km away. Maximum delivery range is ${Ie.maxRadius}km.`,variant:"destructive"});return}m({lat:be,lng:Te,address:Se}),o("custom"),E(""),O([]),C(!1),n({title:"Location Selected",description:`Delivery location set (${Ie.distance.toFixed(1)}km from vendor)`})};return _.useEffect(()=>{const me=setTimeout(()=>{T.trim()?re(T):(O([]),C(!1))},300);return()=>clearTimeout(me)},[T]),_.useEffect(()=>{const me={...D};let be=!1;V.forEach(Te=>{const Se=Te.product.dynamic_fields?Object.entries(Te.product.dynamic_fields).filter(([se,we])=>Array.isArray(we)&&we.length>0):[],Ie=`${Te.product.id}_${Te.id||"direct"}`;Se.forEach(([se,we])=>{var Pe;we.length===1&&!((Pe=me[Ie])!=null&&Pe[se])&&(me[Ie]||(me[Ie]={}),me[Ie][se]=we[0],be=!0)})}),be&&A(me)},[V]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 font-sans",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-all",children:s.jsx(Ht,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Checkout"}),s.jsx("div",{className:"w-6"})," "]})}),s.jsx("main",{className:"max-w-4xl mx-auto p-6 pb-32",children:s.jsxs(Fa,{value:S,onValueChange:P,className:"space-y-6",children:[s.jsxs(ia,{className:"grid w-full grid-cols-3",children:[s.jsxs(Lt,{value:"options",className:"flex items-center gap-2",children:[de()&&s.jsx(Xu,{className:"h-4 w-4"}),"Options"]}),s.jsxs(Lt,{value:"delivery",className:"flex items-center gap-2",children:[oe()&&s.jsx(Xu,{className:"h-4 w-4"}),"Delivery"]}),s.jsx(Lt,{value:"summary",children:"Summary"})]}),s.jsx(yt,{value:"options",className:"space-y-6",children:s.jsxs($e,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[s.jsx(Ct,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Tt,{className:"flex items-center gap-3 text-xl font-semibold text-gray-800",children:"Product Options"})}),s.jsxs(ze,{className:"p-6 space-y-6",children:[V.map(me=>{var Se,Ie;const be=me.product.dynamic_fields?Object.entries(me.product.dynamic_fields).filter(([se,we])=>Array.isArray(we)&&we.length>0):[],Te=`${me.product.id}_${me.id||"direct"}`;return console.log("Rendering item:",me.product.name,"ItemKey:",Te),console.log("Dynamic fields:",me.product.dynamic_fields),console.log("Multi-select fields:",be),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("img",{src:Qt((Ie=(Se=me.product.images)==null?void 0:Se[0])==null?void 0:Ie.image_url),alt:me.product.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-lg text-gray-800",children:me.product.name}),s.jsx("p",{className:"text-sm text-gray-500",children:me.product.vendor_name}),s.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Rs ",parseFloat(me.product.price||me.total_price||0).toFixed(2)," each"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx(xe,{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Total Quantity"}),s.jsx("div",{className:"bg-emerald-50 px-3 py-2 rounded-lg border border-emerald-200",children:s.jsx("span",{className:"font-medium text-lg text-emerald-800",children:Object.values(M[Te]||{}).reduce((se,we)=>se+we,0)||me.quantity})})]}),be.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Product Variants"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3 mb-3",children:be.map(([se,we])=>{var Pe;return s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs text-gray-500 capitalize",children:se}),s.jsxs("select",{className:"w-full mt-1 p-2 border border-gray-200 rounded text-sm",value:((Pe=D[Te])==null?void 0:Pe[se])||"",onChange:Me=>{A(Le=>({...Le,[Te]:{...Le[Te],[se]:Me.target.value}}))},children:[s.jsxs("option",{value:"",children:["Select ",se]}),we.map(Me=>s.jsx("option",{value:Me,children:Me},Me))]})]},se)})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:()=>{const se=D[Te];if(!se||!Object.values(se).every(Pe=>Pe))return;const we=Object.values(se).join("-");Z(Pe=>{var Me;return{...Pe,[Te]:{...Pe[Te],[we]:(((Me=Pe[Te])==null?void 0:Me[we])||0)-1}}})},className:"h-8 w-8 rounded-full",children:s.jsx(NT,{className:"h-4 w-4"})}),s.jsx("span",{className:"w-8 text-center text-sm",children:(()=>{var Pe;const se=D[Te];if(!se||!Object.values(se).every(Me=>Me))return 0;const we=Object.values(se).join("-");return((Pe=M[Te])==null?void 0:Pe[we])||0})()}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>{const se=D[Te];if(!se||!Object.values(se).every(Pe=>Pe))return;const we=Object.values(se).join("-");Z(Pe=>{var Me;return{...Pe,[Te]:{...Pe[Te],[we]:(((Me=Pe[Te])==null?void 0:Me[we])||0)+1}}})},className:"h-8 w-8 rounded-full",children:s.jsx(Ns,{className:"h-4 w-4"})})]}),s.jsx(te,{size:"sm",onClick:()=>{const se=D[Te];if(!se||!Object.values(se).every(Pe=>Pe))return;const we=Object.values(se).join("-");Z(Pe=>{var Me;return{...Pe,[Te]:{...Pe[Te],[we]:(((Me=Pe[Te])==null?void 0:Me[we])||0)+1}}})},disabled:!D[Te]||!Object.values(D[Te]).every(se=>se),className:"text-xs px-3",children:"Add Variant"})]})]}),M[Te]&&Object.entries(M[Te]).filter(([se,we])=>we>0).length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{className:"text-xs text-gray-500",children:"Added Variants:"}),Object.entries(M[Te]).filter(([se,we])=>we>0).map(([se,we])=>{const Pe=se.split("-");return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-emerald-50 rounded border border-emerald-200",children:[s.jsx("span",{className:"text-sm",children:be.map(([Me],Le)=>s.jsxs("span",{className:"capitalize",children:[Me,": ",Pe[Le],Le<be.length-1&&", "]},Me))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Qty: ",we]}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>{Z(Me=>({...Me,[Te]:{...Me[Te],[se]:0}}))},className:"h-6 w-6 rounded-full text-red-600",children:""})]})]},se)})]})]})]}),be.length===0&&s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No additional options for this product"})]},me.id)}),s.jsx("div",{className:"flex justify-end",children:s.jsx(te,{onClick:()=>P("delivery"),className:"px-8 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl",children:"Continue to Delivery"})})]})]})}),s.jsx(yt,{value:"delivery",className:"space-y-6",children:s.jsxs($e,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[s.jsx(Ct,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsxs(Tt,{className:"flex items-center gap-3 text-xl font-semibold text-gray-800",children:[s.jsx(es,{className:"h-6 w-6 text-emerald-600"}),"Delivery Location"]})}),s.jsxs(ze,{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(es,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Delivery Location"}),s.jsx("p",{className:"text-base font-semibold text-gray-800",children:i==="current"?ae():ue()}),(i==="current"&&l||i==="custom"&&u.lat)&&v&&s.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[i==="current"?ne(l.latitude,l.longitude).distance.toFixed(1):ne(u.lat,u.lng).distance.toFixed(1),"km from ",v.business_name]})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Search Location"}),s.jsxs("div",{className:"relative",children:[s.jsx(je,{placeholder:"Search for an address...",value:T,onChange:me=>E(me.target.value),onFocus:()=>T&&C(!0),className:"border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl"}),R&&I.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-xl shadow-lg z-10 max-h-48 overflow-y-auto mt-1",children:I.map((me,be)=>s.jsx("div",{className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 first:rounded-t-xl last:rounded-b-xl",onMouseDown:Te=>Te.preventDefault(),onClick:()=>ce(me),children:s.jsx("p",{className:"text-sm font-medium text-gray-900",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:me.display_name})},be))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{className:"text-sm font-medium text-gray-700",children:"Choose Delivery Location *"}),s.jsxs(SL,{value:i,onValueChange:Ce,className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all cursor-pointer",children:[s.jsx(f0,{value:"current",id:"current",className:"text-emerald-600 border-gray-300"}),s.jsxs(xe,{htmlFor:"current",className:"flex items-center gap-3 flex-1 cursor-pointer",children:[s.jsx(ST,{className:"h-5 w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-base font-medium text-gray-800",children:"Use Current Location"}),s.jsx("p",{className:"text-sm text-gray-500",children:ae()}),l&&v&&s.jsxs("p",{className:"text-xs text-emerald-600",children:[ne(l.latitude,l.longitude).distance.toFixed(1),"km from vendor"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all cursor-pointer",children:[s.jsx(f0,{value:"custom",id:"custom",className:"text-emerald-600 border-gray-300"}),s.jsxs(xe,{htmlFor:"custom",className:"flex items-center gap-3 flex-1 cursor-pointer",children:[s.jsx(JF,{className:"h-5 w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-base font-medium text-gray-800",children:"Choose on Map"}),s.jsx("p",{className:"text-sm text-gray-500",children:ue()}),u.lat&&v&&s.jsxs("p",{className:"text-xs text-emerald-600",children:[ne(u.lat,u.lng).distance.toFixed(1),"km from vendor"]})]})]})]}),i==="custom"&&!u.lat&&s.jsx("div",{className:"ml-8",children:s.jsx(te,{onClick:()=>v?w(!0):null,disabled:!v,variant:"outline",className:"text-sm px-4 py-2 rounded-lg",children:v?"Open Map":"Loading vendor info..."})})]})]}),!(j!=null&&j.phone_number)&&s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"Phone Number *"}),s.jsx(je,{id:"phone",placeholder:"98XXXXXXXX or 97XXXXXXXX",value:y.phone,onChange:me=>_e("phone",me.target.value),className:`mt-1 border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl transition-all ${y.phone&&!Ne(y.phone)?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`}),y.phone&&!Ne(y.phone)&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a valid Nepali mobile number (98XXXXXXXX or 97XXXXXXXX)"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"instructions",className:"text-sm font-medium text-gray-700",children:"Delivery Instructions (Optional)"}),s.jsx(Ys,{id:"instructions",placeholder:"Any special instructions for delivery",value:y.instructions,onChange:me=>_e("instructions",me.target.value),rows:3,className:"mt-1 border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl transition-all"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(te,{onClick:()=>P("summary"),className:"px-8 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl",children:"Continue to Summary"})})]})]})}),s.jsx(yt,{value:"summary",className:"space-y-6",children:s.jsxs($e,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[s.jsx(Ct,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Tt,{className:"text-xl font-semibold text-gray-800",children:"Order Summary"})}),s.jsxs(ze,{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(es,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Delivery Location"}),s.jsx("p",{className:"text-base font-semibold text-gray-800",children:i==="current"?ae():ue()}),(i==="current"&&l||i==="custom"&&u.lat)&&v&&s.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[i==="current"?ne(l.latitude,l.longitude).distance.toFixed(1):ne(u.lat,u.lng).distance.toFixed(1),"km from ",v.business_name]})]})]})}),s.jsx(Aa,{className:"my-4 bg-gray-200"}),V.map(me=>{var Ie,se;const be=me.product.dynamic_fields?Object.entries(me.product.dynamic_fields).filter(([we,Pe])=>Array.isArray(Pe)&&Pe.length>0):[],Te=be.length>0,Se=`${me.product.id}_${me.id||"direct"}`;return s.jsxs("div",{className:"py-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:Qt((se=(Ie=me.product.images)==null?void 0:Ie[0])==null?void 0:se.image_url),alt:me.product.name,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 shadow-sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-lg text-gray-800",children:me.product.name}),s.jsx("p",{className:"text-sm text-gray-500",children:me.product.vendor_name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Total Quantity: ",Object.values(M[Se]||{}).reduce((we,Pe)=>we+Pe,0)||me.quantity]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Price: Rs ",parseFloat(me.product.price||me.total_price||0).toFixed(2)," each"]}),me.product.free_delivery===!0&&s.jsx("p",{className:"text-xs text-green-600 font-medium",children:" Free Delivery"}),me.product.custom_delivery_fee_enabled===!0&&me.product.custom_delivery_fee!==null&&me.product.custom_delivery_fee!==void 0&&me.product.free_delivery!==!0&&s.jsxs("p",{className:"text-xs text-orange-600",children:["Delivery: Rs ",parseFloat(me.product.custom_delivery_fee.toString()).toFixed(2)]}),me.product.free_delivery!==!0&&(me.product.custom_delivery_fee_enabled!==!0||me.product.custom_delivery_fee===null||me.product.custom_delivery_fee===void 0)&&s.jsx("p",{className:"text-xs text-orange-600",children:"Delivery: To be determined"})]}),s.jsxs("p",{className:"font-semibold text-lg text-gray-800",children:["Rs ",(parseFloat(me.product.price||me.total_price||0)*(Object.values(M[Se]||{}).reduce((we,Pe)=>we+Pe,0)||me.quantity)).toFixed(2)]})]}),Te&&M[Se]&&Object.entries(M[Se]).filter(([we,Pe])=>Pe>0).length>0&&s.jsxs("div",{className:"mt-4 p-4 bg-emerald-50 rounded-lg border border-emerald-200",children:[s.jsx("p",{className:"text-sm font-medium text-emerald-800 mb-3",children:"Selected Variants:"}),s.jsx("div",{className:"space-y-2",children:Object.entries(M[Se]).filter(([we,Pe])=>Pe>0).map(([we,Pe])=>{const Me=we.split("-"),Le=parseFloat(me.product.price||me.total_price||0)*Pe;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-emerald-200",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:be.map(([He],_t)=>s.jsxs("span",{className:"capitalize",children:[He,": ",Me[_t],_t<be.length-1&&", "]},He))}),s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[" ",Pe]})]}),s.jsxs("span",{className:"text-sm font-semibold text-emerald-700",children:["Rs ",Le.toFixed(2)]})]},we)})})]})]},me.id)}),s.jsx(Aa,{className:"my-4 bg-gray-200"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[s.jsx("h4",{className:"font-semibold text-emerald-800 mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-base text-gray-700",children:[s.jsxs("span",{children:["Subtotal (",V.reduce((me,be)=>{const Te=`${be.product.id}_${be.id||"direct"}`,Se=Object.values(M[Te]||{}).reduce((Ie,se)=>Ie+se,0);return me+(Se||be.quantity)},0)," items)"]}),s.jsxs("span",{className:"font-semibold",children:["Rs ",G.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-base text-gray-700",children:[s.jsx("span",{children:"Delivery Fee"}),s.jsx("span",{className:"font-semibold",children:le===0&&!ye?s.jsx("span",{className:"text-green-600",children:"Free"}):ye?s.jsx("span",{className:"text-orange-600",children:"To be determined"}):`Rs ${le.toFixed(2)}`})]}),(le>0||ye)&&s.jsx("p",{className:"text-xs text-gray-500",children:ye?"Delivery fee will be determined based on your location":"Delivery fees are set by individual vendors"})]})]}),s.jsx(Aa,{className:"my-2 bg-gray-200"}),s.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-800",children:[s.jsx("span",{children:"Total Amount"}),s.jsxs("span",{children:["Rs ",ke.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx(te,{variant:"outline",onClick:()=>P("options"),className:"px-6 py-2 rounded-xl",children:"Back to Options"}),s.jsx(te,{variant:"outline",onClick:()=>P("delivery"),className:"px-6 py-2 rounded-xl",children:"Back to Delivery"})]})]})]})})]})}),S==="summary"&&s.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-2xl py-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:["Rs ",ke.toFixed(2)]})]}),s.jsx(te,{onClick:Q,disabled:!oe()||!de(),className:"px-10 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-bold text-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Place Order"})]})}),p&&v&&s.jsx(nZ,{onLocationSelect:ve,onClose:()=>w(!1),vendorLocation:{lat:v.latitude,lng:v.longitude},maxRadius:v.delivery_radius,vendorName:v.business_name})]})}function oZ(){var u,m;const e=lt(),{orderId:t}=sg(),n=Fn(),{toast:r}=ns(),[a,i]=_.useState(((u=n.state)==null?void 0:u.order)||null),[o,l]=_.useState(!a);_.useEffect(()=>{!a&&t&&d()},[t,a]);const d=async()=>{try{const p=await ep.getOrder(parseInt(t));i(p)}catch(p){console.error("Error fetching order:",p),r({title:"Error",description:p.message||"Failed to load order details",variant:"destructive"}),e("/")}finally{l(!1)}},h=p=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",out_for_delivery:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[p]||"bg-gray-100 text-gray-800",f=p=>({pending:"Order Placed",confirmed:"Confirmed",preparing:"Preparing",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"})[p]||p;return o?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})}):a?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Ht,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Order Confirmation"}),s.jsx("div",{className:"w-6"})]})}),s.jsxs("main",{className:"max-w-4xl mx-auto p-6 pb-32",children:[s.jsx($e,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:s.jsxs(ze,{className:"p-8 text-center",children:[s.jsx(Bc,{className:"h-16 w-16 mx-auto mb-4 text-emerald-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Order Placed Successfully!"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Your order #",a.order_number," has been placed and is being processed."]}),s.jsx(Ye,{className:`${h(a.status)} px-4 py-2 text-sm font-medium`,children:f(a.status)})]})}),s.jsxs($e,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:[s.jsx(Ct,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Tt,{className:"text-xl font-semibold text-gray-800",children:"Order Details"})}),s.jsx(ze,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Order Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Number:"}),s.jsxs("span",{className:"font-medium",children:["#",a.order_number]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Date:"}),s.jsx("span",{className:"font-medium",children:new Date(a.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),s.jsx("span",{className:"font-medium capitalize",children:a.payment_method})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),s.jsxs("span",{className:"font-bold text-emerald-600",children:["Rs ",parseFloat(a.total_amount).toFixed(2)]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Delivery Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(es,{className:"h-4 w-4 text-emerald-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:a.delivery_name}),s.jsx("p",{className:"text-gray-600",children:a.delivery_address})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Eh,{className:"h-4 w-4 text-emerald-600"}),s.jsx("span",{className:"text-gray-600",children:a.delivery_phone})]}),a.delivery_instructions&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Yr,{className:"h-4 w-4 text-emerald-600 mt-0.5"}),s.jsx("p",{className:"text-gray-600 text-xs",children:a.delivery_instructions})]})]})]})]})})]}),s.jsxs($e,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:[s.jsx(Ct,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Tt,{className:"text-xl font-semibold text-gray-800",children:"Order Items"})}),s.jsxs(ze,{className:"p-6",children:[s.jsx("div",{className:"space-y-4",children:(m=a.items)==null?void 0:m.map(p=>{var w,v,x;return s.jsxs("div",{className:"flex items-center gap-4 py-4 border-b border-gray-100 last:border-b-0",children:[s.jsx("img",{src:((x=(v=(w=p.product_details)==null?void 0:w.images)==null?void 0:v[0])==null?void 0:x.image_url)||"/placeholder-product.jpg",alt:p.product_name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:p.product_name}),s.jsx("p",{className:"text-sm text-gray-600",children:p.vendor_name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",p.quantity]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-gray-800",children:["Rs ",parseFloat(p.total_price).toFixed(2)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Rs ",parseFloat(p.unit_price).toFixed(2)," each"]})]})]},p.id)})}),s.jsx(Aa,{className:"my-4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[s.jsxs("h4",{className:"font-semibold text-emerald-800 mb-2",children:["Bill Amount (Paid via ",a.payment_method,")"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsxs("span",{className:"font-medium",children:["Rs ",parseFloat(a.subtotal).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Tax:"}),s.jsxs("span",{className:"font-medium",children:["Rs ",parseFloat(a.tax_amount).toFixed(2)]})]}),s.jsx(Aa,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between text-base font-bold",children:[s.jsx("span",{children:"Bill Total (Paid):"}),s.jsxs("span",{className:"text-emerald-600",children:["Rs ",(parseFloat(a.subtotal)+parseFloat(a.tax_amount)).toFixed(2)]})]})]})]}),s.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-orange-800 text-lg",children:"Delivery Fee"}),s.jsx("p",{className:"text-sm text-orange-700",children:"Pay on delivery"})]}),s.jsxs("span",{className:"font-bold text-xl text-orange-600",children:["Rs ",parseFloat(a.delivery_fee).toFixed(2)]})]})}),s.jsx(Aa,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"Grand Total:"}),s.jsxs("span",{className:"text-gray-800",children:["Rs ",parseFloat(a.total_amount).toFixed(2)]})]})]})]})]}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx(te,{variant:"outline",onClick:()=>e("/orders"),className:"px-8 py-3 rounded-xl",children:"View All Orders"}),s.jsx(te,{onClick:()=>e("/search"),className:"px-8 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700",children:"Continue Shopping"})]})]})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(qt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Order not found"}),s.jsx(te,{onClick:()=>e("/home"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Go Home"})]})})}var yg="Dialog",[DL,hie]=jn(yg),[lZ,oa]=DL(yg),FL=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=_.useRef(null),d=_.useRef(null),[h,f]=ta({prop:r,defaultProp:a??!1,onChange:i,caller:yg});return s.jsx(lZ,{scope:t,triggerRef:l,contentRef:d,contentId:Qr(),titleId:Qr(),descriptionId:Qr(),open:h,onOpenChange:f,onOpenToggle:_.useCallback(()=>f(u=>!u),[f]),modal:o,children:n})};FL.displayName=yg;var $L="DialogTrigger",BL=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=oa($L,n),i=Nt(t,a.triggerRef);return s.jsx(ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":C_(a.open),...r,ref:i,onClick:Ze(e.onClick,a.onOpenToggle)})});BL.displayName=$L;var S_="DialogPortal",[cZ,zL]=DL(S_,{forceMount:void 0}),VL=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=oa(S_,t);return s.jsx(cZ,{scope:t,forceMount:n,children:_.Children.map(r,o=>s.jsx(fn,{present:n||i.open,children:s.jsx(Nh,{asChild:!0,container:a,children:o})}))})};VL.displayName=S_;var tp="DialogOverlay",UL=_.forwardRef((e,t)=>{const n=zL(tp,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=oa(tp,e.__scopeDialog);return i.modal?s.jsx(fn,{present:r||i.open,children:s.jsx(uZ,{...a,ref:t})}):null});UL.displayName=tp;var dZ=dl("DialogOverlay.RemoveScroll"),uZ=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=oa(tp,n);return s.jsx(lg,{as:dZ,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(ut.div,{"data-state":C_(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),fl="DialogContent",qL=_.forwardRef((e,t)=>{const n=zL(fl,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=oa(fl,e.__scopeDialog);return s.jsx(fn,{present:r||i.open,children:i.modal?s.jsx(hZ,{...a,ref:t}):s.jsx(fZ,{...a,ref:t})})});qL.displayName=fl;var hZ=_.forwardRef((e,t)=>{const n=oa(fl,e.__scopeDialog),r=_.useRef(null),a=Nt(t,n.contentRef,r);return _.useEffect(()=>{const i=r.current;if(i)return Cw(i)},[]),s.jsx(HL,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ze(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ze(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Ze(e.onFocusOutside,i=>i.preventDefault())})}),fZ=_.forwardRef((e,t)=>{const n=oa(fl,e.__scopeDialog),r=_.useRef(!1),a=_.useRef(!1);return s.jsx(HL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var d,h;(d=e.onInteractOutside)==null||d.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),HL=_.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=oa(fl,n),d=_.useRef(null),h=Nt(t,d);return Nw(),s.jsxs(s.Fragment,{children:[s.jsx(ig,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(id,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":C_(l.open),...o,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(mZ,{titleId:l.titleId}),s.jsx(gZ,{contentRef:d,descriptionId:l.descriptionId})]})]})}),k_="DialogTitle",WL=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=oa(k_,n);return s.jsx(ut.h2,{id:a.titleId,...r,ref:t})});WL.displayName=k_;var GL="DialogDescription",KL=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=oa(GL,n);return s.jsx(ut.p,{id:a.descriptionId,...r,ref:t})});KL.displayName=GL;var ZL="DialogClose",YL=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=oa(ZL,n);return s.jsx(ut.button,{type:"button",...r,ref:t,onClick:Ze(e.onClick,()=>a.onOpenChange(!1))})});YL.displayName=ZL;function C_(e){return e?"open":"closed"}var XL="DialogTitleWarning",[fie,JL]=GD(XL,{contentName:fl,titleName:k_,docsSlug:"dialog"}),mZ=({titleId:e})=>{const t=JL(XL),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return _.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},pZ="DialogDescriptionWarning",gZ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${JL(pZ).contentName}}.`;return _.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},QL=FL,eI=BL,tI=VL,bg=UL,wg=qL,_g=WL,jg=KL,sI=YL;const bc=QL,nI=eI,vZ=tI,rI=_.forwardRef(({className:e,...t},n)=>s.jsx(bg,{ref:n,className:it("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));rI.displayName=bg.displayName;const tl=_.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(vZ,{children:[s.jsx(rI,{}),s.jsxs(wg,{ref:r,className:it("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(sI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(sn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tl.displayName=wg.displayName;const sl=({className:e,...t})=>s.jsx("div",{className:it("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});sl.displayName="DialogHeader";const nl=_.forwardRef(({className:e,...t},n)=>s.jsx(_g,{ref:n,className:it("text-lg font-semibold leading-none tracking-tight",e),...t}));nl.displayName=_g.displayName;const aI=_.forwardRef(({className:e,...t},n)=>s.jsx(jg,{ref:n,className:it("text-sm text-muted-foreground",e),...t}));aI.displayName=jg.displayName;const An=QL,xZ=eI,yZ=tI,iI=_.forwardRef(({className:e,...t},n)=>s.jsx(bg,{className:it("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));iI.displayName=bg.displayName;const bZ=kh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),wn=_.forwardRef(({side:e="right",className:t,children:n,...r},a)=>s.jsxs(yZ,{children:[s.jsx(iI,{}),s.jsxs(wg,{ref:a,className:it(bZ({side:e}),t),...r,children:[n,s.jsxs(sI,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(sn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wn.displayName=wg.displayName;const On=({className:e,...t})=>s.jsx("div",{className:it("flex flex-col space-y-2 text-center sm:text-left",e),...t});On.displayName="SheetHeader";const Rn=_.forwardRef(({className:e,...t},n)=>s.jsx(_g,{ref:n,className:it("text-lg font-semibold text-foreground",e),...t}));Rn.displayName=_g.displayName;const wZ=_.forwardRef(({className:e,...t},n)=>s.jsx(jg,{ref:n,className:it("text-sm text-muted-foreground",e),...t}));wZ.displayName=jg.displayName;function g0(e,[t,n]){return Math.min(n,Math.max(t,e))}var _Z=[" ","Enter","ArrowUp","ArrowDown"],jZ=[" ","Enter"],ml="Select",[Ng,Sg,NZ]=Dp(ml),[yd,mie]=jn(ml,[NZ,ud]),kg=ud(),[SZ,bo]=yd(ml),[kZ,CZ]=yd(ml),oI=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:d,dir:h,name:f,autoComplete:u,disabled:m,required:p,form:w}=e,v=kg(t),[x,y]=_.useState(null),[b,j]=_.useState(null),[N,S]=_.useState(!1),P=fd(h),[T,E]=ta({prop:r,defaultProp:a??!1,onChange:i,caller:ml}),[I,O]=ta({prop:o,defaultProp:l,onChange:d,caller:ml}),R=_.useRef(null),C=x?w||!!x.closest("form"):!0,[D,A]=_.useState(new Set),M=Array.from(D).map(Z=>Z.props.value).join(";");return s.jsx(fw,{...v,children:s.jsxs(SZ,{required:p,scope:t,trigger:x,onTriggerChange:y,valueNode:b,onValueNodeChange:j,valueNodeHasChildren:N,onValueNodeHasChildrenChange:S,contentId:Qr(),value:I,onValueChange:O,open:T,onOpenChange:E,dir:P,triggerPointerDownPosRef:R,disabled:m,children:[s.jsx(Ng.Provider,{scope:t,children:s.jsx(kZ,{scope:e.__scopeSelect,onNativeOptionAdd:_.useCallback(Z=>{A(X=>new Set(X).add(Z))},[]),onNativeOptionRemove:_.useCallback(Z=>{A(X=>{const U=new Set(X);return U.delete(Z),U})},[]),children:n})}),C?s.jsxs(AI,{"aria-hidden":!0,required:p,tabIndex:-1,name:f,autoComplete:u,value:I,onChange:Z=>O(Z.target.value),disabled:m,form:w,children:[I===void 0?s.jsx("option",{value:""}):null,Array.from(D)]},M):null]})})};oI.displayName=ml;var lI="SelectTrigger",cI=_.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=kg(n),o=bo(lI,n),l=o.disabled||r,d=Nt(t,o.onTriggerChange),h=Sg(n),f=_.useRef("touch"),[u,m,p]=RI(v=>{const x=h().filter(j=>!j.disabled),y=x.find(j=>j.value===o.value),b=LI(x,v,y);b!==void 0&&o.onValueChange(b.value)}),w=v=>{l||(o.onOpenChange(!0),p()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return s.jsx(mw,{asChild:!0,...i,children:s.jsx(ut.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":OI(o.value)?"":void 0,...a,ref:d,onClick:Ze(a.onClick,v=>{v.currentTarget.focus(),f.current!=="mouse"&&w(v)}),onPointerDown:Ze(a.onPointerDown,v=>{f.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:Ze(a.onKeyDown,v=>{const x=u.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(x&&v.key===" ")&&_Z.includes(v.key)&&(w(),v.preventDefault())})})})});cI.displayName=lI;var dI="SelectValue",uI=_.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...l}=e,d=bo(dI,n),{onValueNodeHasChildrenChange:h}=d,f=i!==void 0,u=Nt(t,d.onValueNodeChange);return Fs(()=>{h(f)},[h,f]),s.jsx(ut.span,{...l,ref:u,style:{pointerEvents:"none"},children:OI(d.value)?s.jsx(s.Fragment,{children:o}):i})});uI.displayName=dI;var EZ="SelectIcon",hI=_.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(ut.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});hI.displayName=EZ;var TZ="SelectPortal",fI=e=>s.jsx(Nh,{asChild:!0,...e});fI.displayName=TZ;var pl="SelectContent",mI=_.forwardRef((e,t)=>{const n=bo(pl,e.__scopeSelect),[r,a]=_.useState();if(Fs(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?po.createPortal(s.jsx(pI,{scope:e.__scopeSelect,children:s.jsx(Ng.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(gI,{...e,ref:t})});mI.displayName=pl;var Mr=10,[pI,wo]=yd(pl),PZ="SelectContentImpl",AZ=dl("SelectContent.RemoveScroll"),gI=_.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:u,collisionBoundary:m,collisionPadding:p,sticky:w,hideWhenDetached:v,avoidCollisions:x,...y}=e,b=bo(pl,n),[j,N]=_.useState(null),[S,P]=_.useState(null),T=Nt(t,G=>N(G)),[E,I]=_.useState(null),[O,R]=_.useState(null),C=Sg(n),[D,A]=_.useState(!1),M=_.useRef(!1);_.useEffect(()=>{if(j)return Cw(j)},[j]),Nw();const Z=_.useCallback(G=>{const[ie,...J]=C().map(ke=>ke.ref.current),[le]=J.slice(-1),ye=document.activeElement;for(const ke of G)if(ke===ye||(ke==null||ke.scrollIntoView({block:"nearest"}),ke===ie&&S&&(S.scrollTop=0),ke===le&&S&&(S.scrollTop=S.scrollHeight),ke==null||ke.focus(),document.activeElement!==ye))return},[C,S]),X=_.useCallback(()=>Z([E,j]),[Z,E,j]);_.useEffect(()=>{D&&X()},[D,X]);const{onOpenChange:U,triggerPointerDownPosRef:F}=b;_.useEffect(()=>{if(j){let G={x:0,y:0};const ie=le=>{var ye,ke;G={x:Math.abs(Math.round(le.pageX)-(((ye=F.current)==null?void 0:ye.x)??0)),y:Math.abs(Math.round(le.pageY)-(((ke=F.current)==null?void 0:ke.y)??0))}},J=le=>{G.x<=10&&G.y<=10?le.preventDefault():j.contains(le.target)||U(!1),document.removeEventListener("pointermove",ie),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",J,{capture:!0})}}},[j,U,F]),_.useEffect(()=>{const G=()=>U(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[U]);const[B,z]=RI(G=>{const ie=C().filter(ye=>!ye.disabled),J=ie.find(ye=>ye.ref.current===document.activeElement),le=LI(ie,G,J);le&&setTimeout(()=>le.ref.current.focus())}),H=_.useCallback((G,ie,J)=>{const le=!M.current&&!J;(b.value!==void 0&&b.value===ie||le)&&(I(G),le&&(M.current=!0))},[b.value]),q=_.useCallback(()=>j==null?void 0:j.focus(),[j]),W=_.useCallback((G,ie,J)=>{const le=!M.current&&!J;(b.value!==void 0&&b.value===ie||le)&&R(G)},[b.value]),Y=r==="popper"?v0:vI,V=Y===v0?{side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:u,collisionBoundary:m,collisionPadding:p,sticky:w,hideWhenDetached:v,avoidCollisions:x}:{};return s.jsx(pI,{scope:n,content:j,viewport:S,onViewportChange:P,itemRefCallback:H,selectedItem:E,onItemLeave:q,itemTextRefCallback:W,focusSelectedItem:X,selectedItemText:O,position:r,isPositioned:D,searchRef:B,children:s.jsx(lg,{as:AZ,allowPinchZoom:!0,children:s.jsx(ig,{asChild:!0,trapped:b.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:Ze(a,G=>{var ie;(ie=b.trigger)==null||ie.focus({preventScroll:!0}),G.preventDefault()}),children:s.jsx(id,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(Y,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:G=>G.preventDefault(),...y,...V,onPlaced:()=>A(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ze(y.onKeyDown,G=>{const ie=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!ie&&G.key.length===1&&z(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let le=C().filter(ye=>!ye.disabled).map(ye=>ye.ref.current);if(["ArrowUp","End"].includes(G.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const ye=G.target,ke=le.indexOf(ye);le=le.slice(ke+1)}setTimeout(()=>Z(le)),G.preventDefault()}})})})})})})});gI.displayName=PZ;var OZ="SelectItemAlignedPosition",vI=_.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=bo(pl,n),o=wo(pl,n),[l,d]=_.useState(null),[h,f]=_.useState(null),u=Nt(t,T=>f(T)),m=Sg(n),p=_.useRef(!1),w=_.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:b}=o,j=_.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&h&&v&&x&&y){const T=i.trigger.getBoundingClientRect(),E=h.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),O=y.getBoundingClientRect();if(i.dir!=="rtl"){const ye=O.left-E.left,ke=I.left-ye,Ne=T.left-ke,_e=T.width+Ne,ne=Math.max(_e,E.width),Ce=window.innerWidth-Mr,ve=g0(ke,[Mr,Math.max(Mr,Ce-ne)]);l.style.minWidth=_e+"px",l.style.left=ve+"px"}else{const ye=E.right-O.right,ke=window.innerWidth-I.right-ye,Ne=window.innerWidth-T.right-ke,_e=T.width+Ne,ne=Math.max(_e,E.width),Ce=window.innerWidth-Mr,ve=g0(ke,[Mr,Math.max(Mr,Ce-ne)]);l.style.minWidth=_e+"px",l.style.right=ve+"px"}const R=m(),C=window.innerHeight-Mr*2,D=v.scrollHeight,A=window.getComputedStyle(h),M=parseInt(A.borderTopWidth,10),Z=parseInt(A.paddingTop,10),X=parseInt(A.borderBottomWidth,10),U=parseInt(A.paddingBottom,10),F=M+Z+D+U+X,B=Math.min(x.offsetHeight*5,F),z=window.getComputedStyle(v),H=parseInt(z.paddingTop,10),q=parseInt(z.paddingBottom,10),W=T.top+T.height/2-Mr,Y=C-W,V=x.offsetHeight/2,G=x.offsetTop+V,ie=M+Z+G,J=F-ie;if(ie<=W){const ye=R.length>0&&x===R[R.length-1].ref.current;l.style.bottom="0px";const ke=h.clientHeight-v.offsetTop-v.offsetHeight,Ne=Math.max(Y,V+(ye?q:0)+ke+X),_e=ie+Ne;l.style.height=_e+"px"}else{const ye=R.length>0&&x===R[0].ref.current;l.style.top="0px";const Ne=Math.max(W,M+v.offsetTop+(ye?H:0)+V)+J;l.style.height=Ne+"px",v.scrollTop=ie-W+v.offsetTop}l.style.margin=`${Mr}px 0`,l.style.minHeight=B+"px",l.style.maxHeight=C+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,h,v,x,y,i.dir,r]);Fs(()=>j(),[j]);const[N,S]=_.useState();Fs(()=>{h&&S(window.getComputedStyle(h).zIndex)},[h]);const P=_.useCallback(T=>{T&&w.current===!0&&(j(),b==null||b(),w.current=!1)},[j,b]);return s.jsx(LZ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:P,children:s.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(ut.div,{...a,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});vI.displayName=OZ;var RZ="SelectPopperPosition",v0=_.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Mr,...i}=e,o=kg(n);return s.jsx(pw,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});v0.displayName=RZ;var[LZ,E_]=yd(pl,{}),x0="SelectViewport",xI=_.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=wo(x0,n),o=E_(x0,n),l=Nt(t,i.onViewportChange),d=_.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Ng.Slot,{scope:n,children:s.jsx(ut.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ze(a.onScroll,h=>{const f=h.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&u){const p=Math.abs(d.current-f.scrollTop);if(p>0){const w=window.innerHeight-Mr*2,v=parseFloat(u.style.minHeight),x=parseFloat(u.style.height),y=Math.max(v,x);if(y<w){const b=y+p,j=Math.min(w,b),N=b-j;u.style.height=j+"px",u.style.bottom==="0px"&&(f.scrollTop=N>0?N:0,u.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});xI.displayName=x0;var yI="SelectGroup",[IZ,MZ]=yd(yI),DZ=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Qr();return s.jsx(IZ,{scope:n,id:a,children:s.jsx(ut.div,{role:"group","aria-labelledby":a,...r,ref:t})})});DZ.displayName=yI;var bI="SelectLabel",wI=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=MZ(bI,n);return s.jsx(ut.div,{id:a.id,...r,ref:t})});wI.displayName=bI;var sp="SelectItem",[FZ,_I]=yd(sp),jI=_.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,l=bo(sp,n),d=wo(sp,n),h=l.value===r,[f,u]=_.useState(i??""),[m,p]=_.useState(!1),w=Nt(t,b=>{var j;return(j=d.itemRefCallback)==null?void 0:j.call(d,b,r,a)}),v=Qr(),x=_.useRef("touch"),y=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(FZ,{scope:n,value:r,disabled:a,textId:v,isSelected:h,onItemTextChange:_.useCallback(b=>{u(j=>j||((b==null?void 0:b.textContent)??"").trim())},[]),children:s.jsx(Ng.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:s.jsx(ut.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":h&&m,"data-state":h?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:w,onFocus:Ze(o.onFocus,()=>p(!0)),onBlur:Ze(o.onBlur,()=>p(!1)),onClick:Ze(o.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:Ze(o.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:Ze(o.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:Ze(o.onPointerMove,b=>{var j;x.current=b.pointerType,a?(j=d.onItemLeave)==null||j.call(d):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ze(o.onPointerLeave,b=>{var j;b.currentTarget===document.activeElement&&((j=d.onItemLeave)==null||j.call(d))}),onKeyDown:Ze(o.onKeyDown,b=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&b.key===" "||(jZ.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});jI.displayName=sp;var du="SelectItemText",NI=_.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=bo(du,n),l=wo(du,n),d=_I(du,n),h=CZ(du,n),[f,u]=_.useState(null),m=Nt(t,y=>u(y),d.onItemTextChange,y=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,y,d.value,d.disabled)}),p=f==null?void 0:f.textContent,w=_.useMemo(()=>s.jsx("option",{value:d.value,disabled:d.disabled,children:p},d.value),[d.disabled,d.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=h;return Fs(()=>(v(w),()=>x(w)),[v,x,w]),s.jsxs(s.Fragment,{children:[s.jsx(ut.span,{id:d.textId,...i,ref:m}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?po.createPortal(i.children,o.valueNode):null]})});NI.displayName=du;var SI="SelectItemIndicator",kI=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return _I(SI,n).isSelected?s.jsx(ut.span,{"aria-hidden":!0,...r,ref:t}):null});kI.displayName=SI;var y0="SelectScrollUpButton",CI=_.forwardRef((e,t)=>{const n=wo(y0,e.__scopeSelect),r=E_(y0,e.__scopeSelect),[a,i]=_.useState(!1),o=Nt(t,r.onScrollButtonChange);return Fs(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollTop>0;i(h)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(TI,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});CI.displayName=y0;var b0="SelectScrollDownButton",EI=_.forwardRef((e,t)=>{const n=wo(b0,e.__scopeSelect),r=E_(b0,e.__scopeSelect),[a,i]=_.useState(!1),o=Nt(t,r.onScrollButtonChange);return Fs(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;i(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(TI,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});EI.displayName=b0;var TI=_.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=wo("SelectScrollButton",n),o=_.useRef(null),l=Sg(n),d=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>d(),[d]),Fs(()=>{var f;const h=l().find(u=>u.ref.current===document.activeElement);(f=h==null?void 0:h.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),s.jsx(ut.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ze(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ze(a.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ze(a.onPointerLeave,()=>{d()})})}),$Z="SelectSeparator",PI=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(ut.div,{"aria-hidden":!0,...r,ref:t})});PI.displayName=$Z;var w0="SelectArrow",BZ=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=kg(n),i=bo(w0,n),o=wo(w0,n);return i.open&&o.position==="popper"?s.jsx(gw,{...a,...r,ref:t}):null});BZ.displayName=w0;var zZ="SelectBubbleInput",AI=_.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=_.useRef(null),i=Nt(r,a),o=rg(t);return _.useEffect(()=>{const l=a.current;if(!l)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&f){const u=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(u)}},[o,t]),s.jsx(ut.select,{...n,style:{...ZE,...n.style},ref:i,defaultValue:t})});AI.displayName=zZ;function OI(e){return e===""||e===void 0}function RI(e){const t=Ps(e),n=_.useRef(""),r=_.useRef(0),a=_.useCallback(o=>{const l=n.current+o;t(l),function d(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(l)},[t]),i=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function LI(e,t,n){const a=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=VZ(e,Math.max(i,0));a.length===1&&(o=o.filter(h=>h!==n));const d=o.find(h=>h.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function VZ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var UZ=oI,II=cI,qZ=uI,HZ=hI,WZ=fI,MI=mI,GZ=xI,DI=wI,FI=jI,KZ=NI,ZZ=kI,$I=CI,BI=EI,zI=PI;const Yt=UZ,Xt=qZ,Kt=_.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(II,{ref:r,className:it("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(HZ,{asChild:!0,children:s.jsx(bT,{className:"h-4 w-4 opacity-50"})})]}));Kt.displayName=II.displayName;const VI=_.forwardRef(({className:e,...t},n)=>s.jsx($I,{ref:n,className:it("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(HF,{className:"h-4 w-4"})}));VI.displayName=$I.displayName;const UI=_.forwardRef(({className:e,...t},n)=>s.jsx(BI,{ref:n,className:it("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(bT,{className:"h-4 w-4"})}));UI.displayName=BI.displayName;const Zt=_.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(WZ,{children:s.jsxs(MI,{ref:a,className:it("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(VI,{}),s.jsx(GZ,{className:it("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(UI,{})]})}));Zt.displayName=MI.displayName;const YZ=_.forwardRef(({className:e,...t},n)=>s.jsx(DI,{ref:n,className:it("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));YZ.displayName=DI.displayName;const st=_.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(FI,{ref:r,className:it("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(ZZ,{children:s.jsx(Xu,{className:"h-4 w-4"})})}),s.jsx(KZ,{children:t})]}));st.displayName=FI.displayName;const XZ=_.forwardRef(({className:e,...t},n)=>s.jsx(zI,{ref:n,className:it("-mx-1 my-1 h-px bg-muted",e),...t}));XZ.displayName=zI.displayName;function JZ(e,t){return _.useReducer((n,r)=>t[n][r]??n,e)}var T_="ScrollArea",[qI,pie]=jn(T_),[QZ,Er]=qI(T_),HI=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,d]=_.useState(null),[h,f]=_.useState(null),[u,m]=_.useState(null),[p,w]=_.useState(null),[v,x]=_.useState(null),[y,b]=_.useState(0),[j,N]=_.useState(0),[S,P]=_.useState(!1),[T,E]=_.useState(!1),I=Nt(t,R=>d(R)),O=fd(a);return s.jsx(QZ,{scope:n,type:r,dir:O,scrollHideDelay:i,scrollArea:l,viewport:h,onViewportChange:f,content:u,onContentChange:m,scrollbarX:p,onScrollbarXChange:w,scrollbarXEnabled:S,onScrollbarXEnabledChange:P,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:T,onScrollbarYEnabledChange:E,onCornerWidthChange:b,onCornerHeightChange:N,children:s.jsx(ut.div,{dir:O,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});HI.displayName=T_;var WI="ScrollAreaViewport",GI=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=Er(WI,n),l=_.useRef(null),d=Nt(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(ut.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});GI.displayName=WI;var $a="ScrollAreaScrollbar",P_=_.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Er($a,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return _.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(eY,{...r,ref:t,forceMount:n}):a.type==="scroll"?s.jsx(tY,{...r,ref:t,forceMount:n}):a.type==="auto"?s.jsx(KI,{...r,ref:t,forceMount:n}):a.type==="always"?s.jsx(A_,{...r,ref:t}):null});P_.displayName=$a;var eY=_.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Er($a,e.__scopeScrollArea),[i,o]=_.useState(!1);return _.useEffect(()=>{const l=a.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),o(!0)},f=()=>{d=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(fn,{present:n||i,children:s.jsx(KI,{"data-state":i?"visible":"hidden",...r,ref:t})})}),tY=_.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Er($a,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Eg(()=>d("SCROLL_END"),100),[l,d]=JZ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,a.scrollHideDelay,d]),_.useEffect(()=>{const h=a.viewport,f=i?"scrollLeft":"scrollTop";if(h){let u=h[f];const m=()=>{const p=h[f];u!==p&&(d("SCROLL"),o()),u=p};return h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[a.viewport,i,d,o]),s.jsx(fn,{present:n||l!=="hidden",children:s.jsx(A_,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ze(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Ze(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),KI=_.forwardRef((e,t)=>{const n=Er($a,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=_.useState(!1),l=e.orientation==="horizontal",d=Eg(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?h:f)}},10);return Yc(n.viewport,d),Yc(n.content,d),s.jsx(fn,{present:r||i,children:s.jsx(A_,{"data-state":i?"visible":"hidden",...a,ref:t})})}),A_=_.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Er($a,e.__scopeScrollArea),i=_.useRef(null),o=_.useRef(0),[l,d]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=QI(l.viewport,l.content),f={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function u(m,p){return oY(m,o.current,l,p)}return n==="horizontal"?s.jsx(sY,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,p=yk(m,l,a.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=u(m,a.dir))}}):n==="vertical"?s.jsx(nY,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,p=yk(m,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=u(m))}}):null}),sY=_.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Er($a,e.__scopeScrollArea),[o,l]=_.useState(),d=_.useRef(null),h=Nt(t,d,i.onScrollbarXChange);return _.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),s.jsx(YI,{"data-orientation":"horizontal",...a,ref:h,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Cg(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,u)=>{if(i.viewport){const m=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),t4(m,u)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:rp(o.paddingLeft),paddingEnd:rp(o.paddingRight)}})}})}),nY=_.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Er($a,e.__scopeScrollArea),[o,l]=_.useState(),d=_.useRef(null),h=Nt(t,d,i.onScrollbarYChange);return _.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),s.jsx(YI,{"data-orientation":"vertical",...a,ref:h,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Cg(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,u)=>{if(i.viewport){const m=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),t4(m,u)&&f.preventDefault()}},onResize:()=>{d.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:rp(o.paddingTop),paddingEnd:rp(o.paddingBottom)}})}})}),[rY,ZI]=qI($a),YI=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:u,...m}=e,p=Er($a,n),[w,v]=_.useState(null),x=Nt(t,I=>v(I)),y=_.useRef(null),b=_.useRef(""),j=p.viewport,N=r.content-r.viewport,S=Ps(f),P=Ps(d),T=Eg(u,10);function E(I){if(y.current){const O=I.clientX-y.current.left,R=I.clientY-y.current.top;h({x:O,y:R})}}return _.useEffect(()=>{const I=O=>{const R=O.target;(w==null?void 0:w.contains(R))&&S(O,N)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[j,w,N,S]),_.useEffect(P,[r,P]),Yc(w,T),Yc(p.content,T),s.jsx(rY,{scope:n,scrollbar:w,hasThumb:a,onThumbChange:Ps(i),onThumbPointerUp:Ps(o),onThumbPositionChange:P,onThumbPointerDown:Ps(l),children:s.jsx(ut.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:Ze(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),y.current=w.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),E(I))}),onPointerMove:Ze(e.onPointerMove,E),onPointerUp:Ze(e.onPointerUp,I=>{const O=I.target;O.hasPointerCapture(I.pointerId)&&O.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),np="ScrollAreaThumb",XI=_.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=ZI(np,e.__scopeScrollArea);return s.jsx(fn,{present:n||a.hasThumb,children:s.jsx(aY,{ref:t,...r})})}),aY=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Er(np,n),o=ZI(np,n),{onThumbPositionChange:l}=o,d=Nt(t,u=>o.onThumbChange(u)),h=_.useRef(void 0),f=Eg(()=>{h.current&&(h.current(),h.current=void 0)},100);return _.useEffect(()=>{const u=i.viewport;if(u){const m=()=>{if(f(),!h.current){const p=lY(u,l);h.current=p,l()}};return l(),u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[i.viewport,f,l]),s.jsx(ut.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ze(e.onPointerDownCapture,u=>{const p=u.target.getBoundingClientRect(),w=u.clientX-p.left,v=u.clientY-p.top;o.onThumbPointerDown({x:w,y:v})}),onPointerUp:Ze(e.onPointerUp,o.onThumbPointerUp)})});XI.displayName=np;var O_="ScrollAreaCorner",JI=_.forwardRef((e,t)=>{const n=Er(O_,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(iY,{...e,ref:t}):null});JI.displayName=O_;var iY=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Er(O_,n),[i,o]=_.useState(0),[l,d]=_.useState(0),h=!!(i&&l);return Yc(a.scrollbarX,()=>{var u;const f=((u=a.scrollbarX)==null?void 0:u.offsetHeight)||0;a.onCornerHeightChange(f),d(f)}),Yc(a.scrollbarY,()=>{var u;const f=((u=a.scrollbarY)==null?void 0:u.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),h?s.jsx(ut.div,{...r,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function rp(e){return e?parseInt(e,10):0}function QI(e,t){const n=e/t;return isNaN(n)?0:n}function Cg(e){const t=QI(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function oY(e,t,n,r="ltr"){const a=Cg(n),i=a/2,o=t||i,l=a-o,d=n.scrollbar.paddingStart+o,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,u=r==="ltr"?[0,f]:[f*-1,0];return e4([d,h],u)(e)}function yk(e,t,n="ltr"){const r=Cg(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-r,d=n==="ltr"?[0,o]:[o*-1,0],h=g0(e,d);return e4([0,o],[0,l])(h)}function e4(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function t4(e,t){return e>0&&e<t}var lY=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Eg(e,t){const n=Ps(e),r=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),_.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Yc(e,t){const n=Ps(t);Fs(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var s4=HI,cY=GI,dY=JI;const R_=_.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(s4,{ref:r,className:it("relative overflow-hidden",e),...n,children:[s.jsx(cY,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(n4,{}),s.jsx(dY,{})]}));R_.displayName=s4.displayName;const n4=_.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(P_,{ref:r,orientation:t,className:it("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(XI,{className:"relative flex-1 rounded-full bg-border"})}));n4.displayName=P_.displayName;class uY{constructor(){Gt(this,"fcmToken",null)}async initialize(){if(gt.isNativePlatform())try{const{PushNotifications:t}=await Ue(async()=>{const{PushNotifications:o}=await Promise.resolve().then(()=>J4);return{PushNotifications:o}},void 0),{LocalNotifications:n}=await Ue(async()=>{const{LocalNotifications:o}=await import("./index-JkeIVzK0.js");return{LocalNotifications:o}},[]),{App:r}=await Ue(async()=>{const{App:o}=await Promise.resolve().then(()=>d0);return{App:o}},void 0);let a=await t.requestPermissions(),i=await n.requestPermissions();if(a.receive!=="granted"||i.display!=="granted"){console.warn("Push or local notification permission denied");return}await n.createChannel({id:"order-emergency",name:"Order Emergency Alerts",description:"CRITICAL: New orders - interrupts video calls and all activities",sound:"default",importance:5,visibility:1,vibration:!0,lights:!0}),await n.createChannel({id:"order-max-emergency",name:"MAXIMUM Order Alerts",description:"MAXIMUM PRIORITY: Interrupts video calls, games, and all activities",sound:"default",importance:5,visibility:1,vibration:!0,lights:!0}),console.log(" Emergency notification channel created"),await t.register(),t.addListener("registration",o=>{console.log(" FCM Token:",o.value),this.fcmToken=o.value,this.sendTokenToBackend(o.value)}),t.addListener("pushNotificationReceived",async o=>{var l;console.log(" Push received:",o),(l=o.data)!=null&&l.orderId&&(await this.showEmergencyLocalNotification(o.data.orderId,o.data.orderNumber,o.data.amount),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(o.data.orderId),orderNumber:o.data.orderNumber,amount:o.data.amount,fromPush:!0}})))}),t.addListener("pushNotificationActionPerformed",o=>{var d;console.log(" Push notification tapped - app opening:",o);const l=(d=o.notification.data)==null?void 0:d.orderId;l&&(window.location.href="/vendor/orders",setTimeout(()=>{var h,f;window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(l),orderNumber:(h=o.notification.data)==null?void 0:h.orderNumber,amount:(f=o.notification.data)==null?void 0:f.amount,autoOpened:!0,fromPush:!0}}))},1500))}),n.addListener("localNotificationActionPerformed",async o=>{console.log(" MAXIMUM PRIORITY EMERGENCY NOTIFICATION TAPPED - FORCE APP OPEN:",o);const l=o.notification.extra;l!=null&&l.orderId&&(this.playMobileEmergencySound(),window.location.href="/vendor/orders",setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:l.orderId,orderNumber:l.orderNumber,amount:l.amount,fromMaxEmergencyNotification:!0,maxPriority:!0,emergency:!0,tappedFromBackground:!0,soundPlayed:!0}})),n.cancel({notifications:[{id:o.notification.id},{id:o.notification.id+1},{id:o.notification.id+2}]}).catch(d=>console.warn("Could not clear notifications:",d))},1e3))}),r.addListener("appStateChange",({isActive:o})=>{o&&(console.log(" App resumed from push notification"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))}),console.log(" Real push notifications initialized with emergency alerts")}catch(t){console.error(" Push notifications setup failed:",t)}}async sendTokenToBackend(t){try{console.log(" SENDING FCM TOKEN TO BACKEND (WHATSAPP-STYLE):",t.substring(0,20)+"...");const n=await fetch("/api/accounts/register-fcm-token/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},body:JSON.stringify({fcm_token:t,platform:"web",device_type:"pwa"})});if(n.ok)console.log(" FCM TOKEN REGISTERED - WHATSAPP-STYLE BACKGROUND NOTIFICATIONS ENABLED!"),console.log(" Now notifications will work even when browser is completely closed!");else{console.error(" FCM TOKEN REGISTRATION FAILED:",n.status,n.statusText);const r=await n.text();console.error(" Error details:",r)}}catch(n){console.error(" Failed to send FCM token to backend:",n),console.error(" This means background notifications WONT work when browser is closed!")}}async showEmergencyLocalNotification(t,n,r){try{const{LocalNotifications:a}=await Ue(async()=>{const{LocalNotifications:o}=await import("./index-JkeIVzK0.js");return{LocalNotifications:o}},[]),i=[];i.push({title:" ORDER EMERGENCY! ",body:`CRITICAL: Order #${n} - ${r}
 INTERRUPTS VIDEO CALLS!
 TAP NOW - BUSINESS URGENT!`,id:Date.now(),schedule:{at:new Date(Date.now()+50)},sound:"default",attachments:void 0,actionTypeId:"MAX_EMERGENCY_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF0000",channelId:"order-max-emergency",summaryText:"CRITICAL BUSINESS ALERT",extra:{orderId:parseInt(t),orderNumber:n,amount:r,emergency:!0,maxPriority:!0,timestamp:Date.now()}}),i.push({title:" MONEY ALERT! ",body:`Order #${n} waiting!
${r} potential earnings
 Don't miss this order!`,id:Date.now()+1,schedule:{at:new Date(Date.now()+2050)},sound:"default",attachments:void 0,actionTypeId:"EMERGENCY_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#00FF00",channelId:"order-emergency",summaryText:"EARNINGS OPPORTUNITY",extra:{orderId:parseInt(t),orderNumber:n,amount:r,emergency:!0,backup:!0,timestamp:Date.now()}}),i.push({title:" ORDER STILL WAITING ",body:`Order #${n} (${r}) needs attention!
 Customer waiting for response`,id:Date.now()+2,schedule:{at:new Date(Date.now()+5050)},sound:"default",attachments:void 0,actionTypeId:"EMERGENCY_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FFFF00",channelId:"order-emergency",summaryText:"CUSTOMER WAITING",extra:{orderId:parseInt(t),orderNumber:n,amount:r,emergency:!0,followup:!0,timestamp:Date.now()}}),await a.schedule({notifications:i}),console.log(" MAXIMUM PRIORITY EMERGENCY NOTIFICATIONS SCHEDULED - CUTS THROUGH VIDEO CALLS!"),"vibrate"in navigator&&(navigator.vibrate([1500,200,1500,200,1500,500,1e3,200,1e3,200,1e3]),console.log(" INTENSE EMERGENCY VIBRATION PATTERN ACTIVATED")),this.playMobileEmergencySound()}catch(a){console.error(" Failed to show maximum priority emergency notifications:",a)}}async playMobileEmergencySound(){console.log(" MOBILE EMERGENCY SOUND: Trying multiple strategies...");try{const t=new(window.AudioContext||window.webkitAudioContext);t.state==="suspended"&&(await t.resume(),console.log(" Audio context resumed"));const n=(r,a,i,o=1)=>{setTimeout(()=>{try{const l=t.createOscillator(),d=t.createGain();l.connect(d),d.connect(t.destination),l.frequency.value=r,l.type="sawtooth",d.gain.setValueAtTime(o,t.currentTime),d.gain.exponentialRampToValueAtTime(.01,t.currentTime+a),l.start(t.currentTime),l.stop(t.currentTime+a)}catch(l){console.warn("Web Audio beep failed:",l)}},i)};n(1200,.15,0,1),n(800,.15,200,1),n(1200,.2,400,1),n(1e3,.3,700,1),console.log(" MOBILE EMERGENCY SOUND: Web Audio strategy successful")}catch(t){console.warn(" MOBILE EMERGENCY SOUND: Web Audio failed:",t);try{const n="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",r=new Audio(n);r.volume=1;const a=r.play();a!==void 0&&a.then(()=>{console.log(" MOBILE EMERGENCY SOUND: HTML5 Audio successful")}).catch(i=>{console.warn(" MOBILE EMERGENCY SOUND: HTML5 Audio blocked:",i),this.forceAudioUnlock()})}catch(n){console.warn(" MOBILE EMERGENCY SOUND: HTML5 Audio failed:",n),this.forceAudioUnlock()}}}forceAudioUnlock(){console.log(" FORCE AUDIO UNLOCK: Simulating user interaction...");try{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createBuffer(1,1,22050),r=t.createBufferSource();r.buffer=n,r.connect(t.destination),t.state==="suspended"?t.resume().then(()=>{r.start(),console.log(" AUDIO UNLOCKED: Silent buffer played")}):r.start(),setTimeout(()=>{this.playMobileEmergencySound()},100)}catch(t){console.warn(" AUDIO UNLOCK FAILED:",t)}}async testEmergencyNotification(t="123",n="TEST-001",r="100"){console.log(" TESTING EMERGENCY NOTIFICATION..."),await this.showEmergencyLocalNotification(t,n,r)}async testMobileSound(){console.log(" TESTING MOBILE SOUND FUNCTIONALITY..."),await this.playMobileEmergencySound()}getFCMToken(){return this.fcmToken}async checkFCMStatus(){console.log(" CHECKING FCM STATUS FOR WHATSAPP-STYLE NOTIFICATIONS...");const t=this.getFCMToken();if(t){console.log(" FCM Token exists:",t.substring(0,20)+"..."),console.log(" Background notifications SHOULD work when browser is closed");try{const n=await fetch("/api/accounts/test-fcm-notification/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},body:JSON.stringify({title:"Test Notification",body:"Testing FCM background notifications",test:!0})});n.ok?console.log(" FCM test notification sent - check if you receive it!"):console.warn(" FCM test failed:",n.status)}catch(n){console.warn(" FCM test error:",n)}}else console.error(" NO FCM TOKEN - Background notifications WONT work!"),console.error(" User needs to grant notification permissions and refresh");return{hasToken:!!t,token:(t==null?void 0:t.substring(0,20))+"...",platform:gt.isNativePlatform()?"native":"web"}}}const r4=new uY,L_=Object.freeze(Object.defineProperty({__proto__:null,realPushNotifications:r4},Symbol.toStringTag,{value:"Module"}));class hY{constructor(){Gt(this,"persistentIntervals",new Map);this.setupNotificationHandlers(),this.initializePushNotifications(),this.initializeBrowserNotifications()}async initializePushNotifications(){gt.isNativePlatform()&&await r4.initialize()}async setupNotificationHandlers(){if(gt.isNativePlatform())try{const{LocalNotifications:t}=await Ue(async()=>{const{LocalNotifications:r}=await import("./index-JkeIVzK0.js");return{LocalNotifications:r}},[]),{App:n}=await Ue(async()=>{const{App:r}=await Promise.resolve().then(()=>d0);return{App:r}},void 0);t.addListener("localNotificationActionPerformed",async r=>{var a;console.log(" NOTIFICATION TAPPED - AUTO OPENING APP:",r);try{const{App:i}=await Ue(async()=>{const{App:d}=await Promise.resolve().then(()=>d0);return{App:d}},void 0),o=await i.getState();if(console.log(" Current app state:",o),!o.isActive){console.log(" App was in background - bringing to foreground"),window.focus(),document.body.click();try{await i.minimizeApp(),setTimeout(()=>{window.focus()},100)}catch{console.log("Minimize/restore not available")}}const l=parseInt(((a=r.notification.extra)==null?void 0:a.orderId)||"0");l&&(console.log(" Opening order:",l),window.location.href="/vendor/orders",setTimeout(()=>{var d,h;window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:l,orderNumber:(d=r.notification.extra)==null?void 0:d.orderNumber,amount:(h=r.notification.extra)==null?void 0:h.amount,autoOpened:!0,fromNotification:!0}}))},1500))}catch(i){console.error(" Failed to open app:",i),window.location.href="/vendor/orders"}}),n.addListener("appStateChange",({isActive:r})=>{r&&(console.log(" App resumed - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))})}catch(t){console.warn("Could not setup notification handlers:",t)}}async showOrderNotification(t,n,r){console.log(" ULTIMATE ORDER ALERT! ACTIVATING ALL NOTIFICATION SYSTEMS:",t,"Amount:",n,"OrderID:",r);const a=await this.checkAndRequestPermissions();if(console.log(" Notification permission status:",a),!a){console.warn(" Notification permission denied");return}try{console.log(" Sending FCM push notification to backend...");const{pushNotificationService:i}=await Ue(async()=>{const{pushNotificationService:o}=await import("./pushNotificationService-8DydE5GE.js");return{pushNotificationService:o}},[]);await i.showOrderNotification(t,n,r),console.log(" FCM push notification sent - will work even when browser closed!")}catch(i){console.warn(" FCM push notification failed:",i)}try{console.log(" Triggering Service Worker background notification..."),this.sendToServiceWorker("ORDER_ALERT",{orderNumber:t,amount:n,orderId:r,timestamp:Date.now()})}catch(i){console.warn(" Service Worker notification failed:",i)}await this.activateUltimateOrderAlert(t,n,r),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n}})),console.log(" Order notification sequence completed")}async checkAndRequestPermissions(){if(console.log(" Checking notification permissions..."),gt.isNativePlatform())try{const{LocalNotifications:t}=await Ue(async()=>{const{LocalNotifications:r}=await import("./index-JkeIVzK0.js");return{LocalNotifications:r}},[]),n=await t.checkPermissions();if(console.log(" Mobile notification permission:",n),n.display!=="granted"){const r=await t.requestPermissions();return console.log(" Mobile permission request result:",r),r.display==="granted"}return!0}catch(t){return console.warn(" Mobile notifications not available:",t),!1}if("Notification"in window){if(console.log(" Current notification permission:",Notification.permission),Notification.permission==="granted")return console.log(" Browser notifications already granted"),!0;if(Notification.permission==="denied")return console.warn(" Browser notifications denied by user"),alert(` Notifications blocked! Please enable notifications in browser settings:

1. Click lock icon in address bar
2. Allow notifications
3. Refresh page`),!1;console.log(" Requesting browser notification permission...");try{const t=await Notification.requestPermission();return console.log(" Permission request result:",t),t==="granted"?(console.log(" Browser notifications granted!"),alert(" Notifications enabled! You will now receive order alerts."),!0):(console.warn(" Browser notifications denied"),alert(" Notifications denied. You won't receive order alerts."),!1)}catch(t){return console.warn(" Error requesting permissions:",t),!1}}return console.warn(" Notifications not supported in this browser"),!1}async requestBackendPushNotification(t,n,r){try{(await fetch("/api/vendor/send-order-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendorId:localStorage.getItem("vendor_id"),orderId:r,orderNumber:t,amount:n,title:" NEW ORDER RECEIVED",body:`Order #${t} - ${n}`,data:{orderId:r.toString(),orderNumber:t,amount:n,action:"openOrder"}})})).ok?console.log(" Backend push notification requested"):console.warn(" Backend push notification failed")}catch(a){console.warn("Backend push notification error:",a)}}async showPushNotification(t,n,r){try{console.log(" Simulating push notification for auto-opening")}catch(a){console.warn("Push notification failed, using local fallback:",a)}}async showLocalNotification(t,n,r){try{const{LocalNotifications:a}=await Ue(async()=>{const{LocalNotifications:o}=await import("./index-JkeIVzK0.js");return{LocalNotifications:o}},[]);if((await a.requestPermissions()).display!=="granted"){console.warn("Notification permission not granted");return}try{await a.createChannel({id:"order-alerts",name:"Order Alerts - ALARM MODE",description:"URGENT: High priority order notifications that work on lock screen",sound:"default",importance:5,visibility:1,lights:!0,vibration:!0}),console.log(" ALARM notification channel created with MAXIMUM priority")}catch(o){console.warn("Could not create alarm channel:",o)}await a.schedule({notifications:[{title:" NEW ORDER - ALARM MODE! ",body:`Order #${t} - ${n}
 SOUND EVERY 2s | VIBRATION EVERY 3s
 TAP TO ACCEPT/REJECT`,id:r,schedule:{at:new Date(Date.now()+100)},sound:"default",attachments:void 0,actionTypeId:"OPEN_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF0000",channelId:"order-alerts",summaryText:"ALARM MODE: Order needs immediate response",extra:{orderId:r.toString(),orderNumber:t,amount:n,autoOpen:!0,action:"openApp",deepLink:"vendor://order/"+r,alarmMode:!0,soundEvery:"2s",vibrationEvery:"3s"}}]}),console.log(" ALARM-style local notification scheduled for order:",r)}catch(a){console.warn("Local notifications not available:",a)}}showWebNotification(t,n,r){if("Notification"in window&&Notification.permission==="granted"){const a=new Notification(" New Order!",{body:`Order #${t} - ${n}`,icon:"/favicon.ico",tag:`order-${r}`,requireInteraction:!0});a.onclick=()=>{window.focus(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n}})),a.close()},setTimeout(()=>a.close(),3e4)}}startPersistentAlert(t,n,r){this.stopPersistentAlert(r);const a=setInterval(()=>{console.log(" ALARM SOUND for order:",t),this.playOrderAlertSound()},2e3),i=setInterval(()=>{console.log(" ALARM VIBRATION for order:",t),"vibrate"in navigator&&navigator.vibrate([2e3,500,2e3,500,2e3]),this.triggerAlarmHaptics()},3e3);this.persistentIntervals.set(r,a),this.persistentIntervals.set(r+1e6,i),setTimeout(()=>{this.stopPersistentAlert(r)},6e5)}stopPersistentAlert(t){const n=this.persistentIntervals.get(t);n&&(clearInterval(n),this.persistentIntervals.delete(t),console.log(" Stopped sound alert for order:",t));const r=this.persistentIntervals.get(t+1e6);r&&(clearInterval(r),this.persistentIntervals.delete(t+1e6),console.log(" Stopped vibration alert for order:",t))}async clearNotification(t){if(this.stopPersistentAlert(t),gt.isNativePlatform())try{const{LocalNotifications:n}=await Ue(async()=>{const{LocalNotifications:r}=await import("./index-JkeIVzK0.js");return{LocalNotifications:r}},[]);await n.cancel({notifications:[{id:t}]}),console.log(" Cleared background notification for order:",t)}catch(n){console.warn("Could not clear notification:",n)}}async requestPermissions(){if(gt.isNativePlatform())try{const{LocalNotifications:t}=await Ue(async()=>{const{LocalNotifications:r}=await import("./index-JkeIVzK0.js");return{LocalNotifications:r}},[]),n=await t.requestPermissions();console.log(" Notification permissions:",n);try{await t.createChannel({id:"order-alerts",name:" ORDER ALARMS - MAXIMUM PRIORITY",description:"ALARM MODE: Sound every 2s | Vibration every 3s | Works on lock screen",sound:"default",importance:5,visibility:1,lights:!0,vibration:!0}),console.log(" ALARM notification channel created with MAXIMUM priority for lock screen")}catch(r){console.warn("Could not create alarm notification channel:",r)}return n.display==="granted"}catch(t){return console.warn("Local notifications not available:",t),!1}if("Notification"in window){if(Notification.permission==="default"){console.log(" REQUESTING BROWSER NOTIFICATION PERMISSION...");const t=await Notification.requestPermission();return console.log(" Browser notification permission result:",t),t==="granted"?(console.log(" Browser notifications enabled! You will now get instant notifications even when the tab is not active."),setTimeout(()=>{const n=new Notification(" Notifications Enabled!",{body:`You will now receive instant order alerts even when this tab is not active.

Test notification - you can dismiss this.`,icon:"/favicon.ico",tag:"permission-test",requireInteraction:!1});setTimeout(()=>n.close(),5e3)},1e3),setTimeout(()=>{this.showNotificationSettingsInstructions()},3e3)):console.warn(" Browser notifications denied. You may not receive notifications when the tab is not active."),t==="granted"}return Notification.permission==="granted"}return!1}async initializeBrowserNotifications(){!gt.isNativePlatform()&&"Notification"in window&&setTimeout(async()=>{Notification.permission==="default"&&(console.log(" Auto-requesting notification permissions for instant alerts..."),await this.requestPermissions())},3e3)}showNotificationSettingsInstructions(){const t=`
 To Enable Floating Notifications on Windows:

1. Click the notification bell icon in taskbar
2. Click "Manage notifications"
3. Find your browser (Chrome/Firefox/Edge)
4. Make sure notifications are ON
5. Set to "Show notification banners"
6. Enable "Play a sound when a notification arrives"
7. Enable "Show notifications on lock screen" (optional)

This will make notifications appear as floating popups over any screen!
    `;if(console.log(t),"Notification"in window&&Notification.permission==="granted"){const n=new Notification(" How to Enable Floating Notifications",{body:"Click here for instructions on enabling floating popup notifications on Windows",icon:"/favicon.ico",tag:"settings-instructions",requireInteraction:!0});n.onclick=()=>{alert(t),n.close()},setTimeout(()=>n.close(),3e4)}}playBeepSound(){try{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value=800,n.type="square",r.gain.setValueAtTime(.3,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.3),n.start(t.currentTime),n.stop(t.currentTime+.3),console.log(" Beep sound played")}catch(t){console.warn("Audio not available:",t)}}playMobileSound(){try{const t=new(window.AudioContext||window.webkitAudioContext);for(let n=0;n<3;n++)setTimeout(()=>{const r=t.createOscillator(),a=t.createGain();r.connect(a),a.connect(t.destination),r.frequency.value=1e3+n*200,r.type="sine",a.gain.setValueAtTime(.5,t.currentTime),a.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),r.start(t.currentTime),r.stop(t.currentTime+.2)},n*300);console.log(" Mobile sound sequence played")}catch(t){console.warn("Mobile audio not available:",t)}}playOrderAlertSound(){try{console.log("  ORDER ALERT! Playing LOUD notification sequence");const t=new(window.AudioContext||window.webkitAudioContext),n=(r,a,i,o=.8)=>{setTimeout(()=>{const l=t.createOscillator(),d=t.createGain();l.connect(d),d.connect(t.destination),l.frequency.value=r,l.type="square",d.gain.setValueAtTime(o,t.currentTime),d.gain.exponentialRampToValueAtTime(.01,t.currentTime+a),l.start(t.currentTime),l.stop(t.currentTime+a)},i)};n(1200,.15,0,.9),n(800,.15,200,.9),n(1200,.15,400,.9),n(1e3,.3,700,1),n(1200,.15,1200,.8),n(800,.15,1400,.8),n(1200,.2,1600,.8),console.log(" ORDER ALERT SOUND SEQUENCE PLAYED - VENDOR SHOULD NOTICE!")}catch(t){console.warn("Order alert sound not available:",t),this.playBeepSound()}}async activateUltimateOrderAlert(t,n,r){console.log(" ACTIVATING ULTIMATE ORDER ALERT SYSTEM - IMPOSSIBLE TO MISS!"),this.emergencyWakeUp(),this.showUltimateVisualAlerts(t,n,r),this.playUltimateSoundAlerts(r),this.triggerUltimateHapticAlerts(),this.showBrowserNotifications(t,n,r),this.startPersistentOrderAlerts(t,n,r),this.showDesktopSystemNotifications(t,n,r),this.broadcastToAllTabs(t,n,r),this.emergencyBroadcast(t,n,r),console.log(" ULTIMATE ALERT SYSTEM ACTIVATED - VENDOR WILL DEFINITELY NOTICE!")}showUltimateVisualAlerts(t,n,r){console.log(" ACTIVATING VISUAL ALERTS"),this.flashDocumentTitle(` NEW ORDER ${t}!`,10),this.flashFavicon(),this.highlightPageBackground()}playUltimateSoundAlerts(t){console.log(" ACTIVATING ULTIMATE SOUND SYSTEM"),this.playOrderAlertSound(),this.playMobileSound(),this.playSystemSound();let n=0;const r=setInterval(()=>{n<10?(this.playOrderAlertSound(),n++):clearInterval(r)},3e3)}triggerUltimateHapticAlerts(){console.log(" ACTIVATING HAPTIC ALERTS"),"vibrate"in navigator&&(navigator.vibrate([1e3,200,1e3,200,1e3]),setTimeout(()=>navigator.vibrate([800,200,800,200,800]),2e3),setTimeout(()=>navigator.vibrate([600,200,600,200,600]),4e3))}showBrowserNotifications(t,n,r){if(console.log(" ACTIVATING BROWSER NOTIFICATIONS - ALARM-STYLE FORCING"),"Notification"in window&&Notification.permission==="default"){console.log(" Requesting notification permission..."),Notification.requestPermission().then(a=>{console.log(" Notification permission result:",a),a==="granted"&&this.showBrowserNotifications(t,n,r)});return}if("Notification"in window&&Notification.permission==="granted"){const a=document.title.split(" - ")[0]||"EzyWay Vendor",i=window.location.hostname;this.requestWakeLock(),this.forceAlarmVibration();for(let d=0;d<8;d++)setTimeout(()=>{const h=new Notification(` ${a}: ORDER ALERT! `,{body:`ORDER #${t} - ${n}
 ${i}
 TAP NOW - DON'T MISS!`,icon:"/alert-icon.svg",badge:"/alert-icon.svg",tag:`alarm-order-${r}-${d}`,requireInteraction:!0,silent:!1,data:{orderId:r,orderNumber:t,amount:n,site:a,url:i,alarm:!0}});h.onclick=()=>{this.releaseWakeLock(),window.focus(),document.body.click(),document.body.focus(),window.location.pathname!=="/vendor/orders"&&(window.location.href="/vendor/orders"),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,fromAlarmNotification:!0}})),h.close()},setTimeout(()=>h.close(),6e5)},d*150);setTimeout(()=>{const d=new Notification(` ${a} - URGENT ORDER!`,{body:`Order #${t} - ${n}
 ${i}
 Works on lock screen too!`,icon:"/alert-icon.svg",tag:`lockscreen-order-${r}`,requireInteraction:!0,silent:!1,data:{orderId:r,orderNumber:t,amount:n,site:a,url:i,lockScreen:!0}});d.onclick=()=>{this.releaseWakeLock(),window.focus(),document.body.click(),window.location.pathname!=="/vendor/orders"&&(window.location.href="/vendor/orders"),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,fromLockScreenNotification:!0}})),d.close()},setTimeout(()=>d.close(),9e5)},2e3);let o=0;const l=setInterval(()=>{if(o<10){const d=new Notification(` ${a}: ORDER WAITING!`,{body:`Order #${t} (${n}) still pending!
 ${i}
 ${o+1}/10 reminders`,icon:"/alert-icon.svg",tag:`followup-alarm-${r}-${o}`,requireInteraction:!0,silent:!1,data:{orderId:r,orderNumber:t,amount:n,site:a,url:i,followup:o+1}});d.onclick=()=>{clearInterval(l),this.releaseWakeLock(),window.focus(),document.body.click(),window.location.pathname!=="/vendor/orders"&&(window.location.href="/vendor/orders"),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,fromFollowUpAlarm:!0}})),d.close()},setTimeout(()=>d.close(),3e4),o++}else clearInterval(l),this.releaseWakeLock()},3e4)}else console.warn(" Browser notifications not available or permission denied")}async requestWakeLock(){try{if("wakeLock"in navigator){const t=await navigator.wakeLock.request("screen");console.log(" Wake lock acquired - screen will stay awake like alarms"),window.currentWakeLock=t,t.addEventListener("release",()=>{console.log(" Wake lock released")})}}catch(t){console.warn(" Wake lock not available:",t)}}releaseWakeLock(){try{window.currentWakeLock&&(window.currentWakeLock.release(),window.currentWakeLock=null)}catch(t){console.warn("Error releasing wake lock:",t)}}forceAlarmVibration(){if("vibrate"in navigator){const t=[2e3,500,2e3,500,2e3,2e3,500,500,500,500,500];let n=0;const r=setInterval(()=>{navigator.vibrate(t),console.log(" ALARM vibration pattern triggered:",n+1),n++,n>=50&&clearInterval(r)},1e4)}}async triggerAlarmHaptics(){if(gt.isNativePlatform())try{const{Haptics:t,ImpactStyle:n}=await Ue(async()=>{const{Haptics:r,ImpactStyle:a}=await import("./index-CdjfZlUo.js");return{Haptics:r,ImpactStyle:a}},[]);await t.impact({style:n.Heavy}),setTimeout(async()=>{await t.impact({style:n.Heavy})},1e3),setTimeout(async()=>{await t.impact({style:n.Heavy})},2e3),console.log(" ALARM HAPTICS TRIGGERED")}catch(t){console.warn("Haptics not available:",t)}}startPersistentOrderAlerts(t,n,r){console.log(" STARTING PERSISTENT ALERTS"),this.stopPersistentAlert(r);const a=setInterval(()=>{console.log(" PERSISTENT ORDER ALERT:",t),this.flashDocumentTitle(` ORDER ${t}!`,2),this.playBeepSound(),"vibrate"in navigator&&navigator.vibrate(200)},5e3);this.persistentIntervals.set(r,a),setTimeout(()=>{this.stopPersistentAlert(r)},3e5)}showDesktopSystemNotifications(t,n,r){if(console.log(" ACTIVATING DESKTOP SYSTEM NOTIFICATIONS - FORCE FLOATING"),"Notification"in window)try{const a=document.title.split(" - ")[0]||"EzyWay Vendor",i=window.location.hostname,o=this.getBrowserInfo();for(let l=0;l<3;l++)setTimeout(()=>{const d=new Notification(` ${a}: ORDER #${t} `,{body:`${n} - CRITICAL!
 ${i} (${o})
 REQUIRES IMMEDIATE ATTENTION
 Click to open NOW!`,icon:"/alert-icon.svg",tag:`desktop-critical-${r}-${l}`,requireInteraction:!0,silent:!1,data:{orderId:r,orderNumber:t,amount:n,system:!0,site:a,url:i,browser:o}});d.onclick=()=>{window.focus(),document.body.click(),window.location.pathname!=="/vendor/orders"&&(window.location.href="/vendor/orders"),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,fromDesktopNotification:!0}})),d.close()},setTimeout(()=>d.close(),18e4)},l*500);setTimeout(()=>{const l=new Notification(` ${a}: ORDER STILL PENDING!`,{body:`Order #${t} (${n}) waiting!
 ${i}
 Respond immediately!`,icon:"/alert-icon.svg",tag:`desktop-followup-${r}`,requireInteraction:!0,silent:!1,data:{orderId:r,orderNumber:t,amount:n,followup:!0,site:a,url:i}});l.onclick=()=>{window.focus(),document.body.click(),window.location.pathname!=="/vendor/orders"&&(window.location.href="/vendor/orders"),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,fromFollowUpNotification:!0}})),l.close()},setTimeout(()=>l.close(),12e4)},45e3)}catch(a){console.warn("Desktop notification failed:",a)}}getBrowserInfo(){const t=navigator.userAgent;return t.includes("Chrome")?"Chrome":t.includes("Firefox")?"Firefox":t.includes("Safari")&&!t.includes("Chrome")?"Safari":t.includes("Edge")?"Edge":t.includes("Opera")?"Opera":"Browser"}broadcastToAllTabs(t,n,r){console.log(" BROADCASTING TO ALL BROWSER TABS");const a={type:"ultimate_order_alert",orderId:r,orderNumber:t,amount:n,timestamp:Date.now()};localStorage.setItem("ultimate_order_alert",JSON.stringify(a)),this.sendToServiceWorker("ORDER_ALERT",{orderNumber:t,amount:n,orderId:r}),window.addEventListener("storage",i=>{if(i.key==="ultimate_order_alert"&&i.newValue){const o=JSON.parse(i.newValue);o.type==="ultimate_order_alert"&&o.orderId===r&&(this.showBrowserNotifications(o.orderNumber,o.amount,o.orderId),this.playOrderAlertSound())}})}async sendToServiceWorker(t,n){"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:t,...n})}flashDocumentTitle(t,n){const r=document.title;let a=0;const i=()=>{document.title=a%2===0?t:r,a++,a<n*2?setTimeout(i,500):document.title=r};i()}showScreenOverlayAlert(t,n){const r=document.createElement("div");r.id="ultimate-order-overlay",r.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 0, 0, 0.9);
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 999999;
      font-size: 2rem;
      font-weight: bold;
      text-align: center;
      animation: pulse 0.5s infinite alternate;
    `,r.innerHTML=`
      <div> URGENT ORDER ALERT! </div>
      <div style="font-size: 1.5rem; margin: 20px 0;">Order #${t}</div>
      <div style="font-size: 1.2rem;">${n}</div>
      <div style="font-size: 1rem; margin-top: 20px;">TAP ANYWHERE TO DISMISS</div>
    `;const a=document.createElement("style");a.textContent=`
      @keyframes pulse {
        0% { background: rgba(255, 0, 0, 0.9); }
        100% { background: rgba(255, 0, 0, 1); }
      }
    `,document.head.appendChild(a),r.onclick=()=>{document.body.removeChild(r),document.head.removeChild(a)},document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&(document.body.removeChild(r),document.head.removeChild(a))},1e4)}flashFavicon(){const t=document.querySelector("link[rel*='icon']");if(t){const n=t.href;t.href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="red"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="30">!</text></svg>',setTimeout(()=>{t.href=n},2e3)}}highlightPageBackground(){const t=document.body.style.backgroundColor;document.body.style.backgroundColor="#ffcccc";let n=0;const r=()=>{document.body.style.backgroundColor=n%2===0?"#ff6666":"#ffcccc",n++,n<6?setTimeout(r,300):document.body.style.backgroundColor=t};r()}playSystemSound(){try{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value=440,n.type="sawtooth",r.gain.setValueAtTime(.1,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+1),n.start(t.currentTime),n.stop(t.currentTime+1)}catch{console.warn("System sound not available")}}emergencyWakeUp(){console.log(" EMERGENCY WAKE-UP ACTIVATED");try{window.focus();const t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});document.body.dispatchEvent(t);const n=new(window.AudioContext||window.webkitAudioContext);n.state==="suspended"&&n.resume(),Object.defineProperty(document,"hidden",{value:!1,writable:!1}),Object.defineProperty(document,"visibilityState",{value:"visible",writable:!1}),window.dispatchEvent(new Event("visibilitychange"))}catch(t){console.warn("Emergency wake-up failed:",t)}}emergencyBroadcast(t,n,r){console.log(" EMERGENCY BROADCAST - MAXIMUM ALERT LEVEL");const a={type:"EMERGENCY_ORDER_ALERT",orderId:r,orderNumber:t,amount:n,timestamp:Date.now(),priority:"MAXIMUM"};try{if(localStorage.setItem("emergency_order_alert",JSON.stringify(a)),this.sendToServiceWorker("EMERGENCY_ALERT",a),window.dispatchEvent(new CustomEvent("emergencyOrderAlert",{detail:a})),window.parent!==window&&window.parent.postMessage(a,"*"),"BroadcastChannel"in window){const i=new BroadcastChannel("order-alerts");i.postMessage(a),i.close()}}catch(i){console.warn("Emergency broadcast failed:",i)}setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,emergency:!0}}))},1e3)}}const Hi=new hY,rl=Object.freeze(Object.defineProperty({__proto__:null,simpleNotificationService:Hi},Symbol.toStringTag,{value:"Module"}));function Tg(){const[e,t]=_.useState([]),[n,r]=_.useState(!1),[a,i]=_.useState(0),o=_.useRef(null),l=_.useRef(null),d=_.useRef(0),h=5;_.useEffect(()=>{Hi.requestPermissions()},[]);const f=async()=>{let y=await Ae.getToken();if(y||(y=localStorage.getItem("token")),!y){console.warn("No authentication token found for WebSocket connection");return}const b=window.location.href;if(b.includes("ngrok")||b.includes("ngrok-free.app")){console.log("Ngrok detected - using HTTP polling instead of WebSocket"),m();return}console.log(" ENABLING WEBSOCKET FOR REAL-TIME ORDER UPDATES");try{const j=`${AP("/ws/notifications/")}?token=${y}`;console.log("Attempting WebSocket connection to:",j);const N=new WebSocket(j);o.current=N;const S=setTimeout(()=>{var P;((P=o.current)==null?void 0:P.readyState)===WebSocket.CONNECTING&&(console.log("WebSocket connection timeout, closing..."),o.current.close(),r(!1))},1e4);o.current.onopen=()=>{var T;clearTimeout(S),console.log(" Notification WebSocket connected successfully"),r(!0),d.current=0,(T=o.current)==null||T.send(JSON.stringify({type:"authenticate",token:y}));const P=setInterval(()=>{var E;if(((E=o.current)==null?void 0:E.readyState)===WebSocket.OPEN)try{o.current.send(JSON.stringify({type:"ping"}))}catch(I){console.error("Error sending ping:",I),clearInterval(P)}else clearInterval(P)},3e4)},o.current.onmessage=P=>{try{const T=JSON.parse(P.data);u(T)}catch(T){console.error("Error parsing WebSocket message:",T)}},o.current.onclose=P=>{if(clearTimeout(S),console.log(" Notification WebSocket disconnected:",{code:P.code,reason:P.reason,wasClean:P.wasClean}),r(!1),P.code===1e3){console.log("Normal WebSocket closure");return}if(P.code===1006){console.error("WebSocket closed abnormally (1006) - likely backend not running or incorrect configuration");return}(async()=>{const E=await Ae.getToken();if(E&&d.current<h){const I=Math.min(1e3*Math.pow(2,d.current),3e4);l.current=setTimeout(()=>{d.current++,console.log(` Attempting to reconnect... (${d.current}/${h})`),f()},I)}else E?d.current>=h&&(console.warn(" Max WebSocket reconnection attempts reached, switching to polling"),m()):console.warn(" Cannot reconnect WebSocket: No authentication token")})()},o.current.onerror=P=>{clearTimeout(S),console.error(" Notification WebSocket error:",P),r(!1)}}catch(j){console.error(" Failed to create WebSocket connection:",j),r(!1)}},u=y=>{if(console.log(" WEBSOCKET MESSAGE RECEIVED:",y),y.type==="connection_established"){console.log(" Notification service connected:",y.message);return}if(y.type!=="pong"){if(y.type==="order_update"||y.type==="order_status_change"){console.log(" ORDER STATUS UPDATE VIA WEBSOCKET:",y),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:y.order_id||y.orderId,status:y.status||y.new_status,type:y.action||"websocket_update",websocket:!0}})),window.dispatchEvent(new CustomEvent("websocket_message",{detail:y}));return}if(y.type==="refund_update"){console.log(" REFUND UPDATE VIA WEBSOCKET:",y),window.dispatchEvent(new CustomEvent("websocket_message",{detail:y}));return}if(y.type==="order_notification"||y.type==="notification"){const b=y.notification||y;if(b){const j={id:b.id||`notification_${Date.now()}`,type:b.type||"system",title:b.title,message:b.message,data:b.data,action_url:b.action_url,timestamp:new Date().toISOString()};t(N=>[j,...N.slice(0,49)]),i(N=>N+1),Hi.showOrderNotification(b.title,b.message,parseInt(j.id)),window.dispatchEvent(new CustomEvent("newNotification",{detail:j}))}}}},m=()=>{console.log(" Starting HTTP polling fallback for notifications"),r(!0);const y=setInterval(async()=>{try{const b=await Ae.getToken();if(!b){console.warn("No token for HTTP polling"),clearInterval(y);return}const j=await fetch(`${Jo("/notifications/")}`,{headers:{Authorization:`Token ${b}`,"Content-Type":"application/json"}});if(j.ok){const N=await j.json();N&&N.length>0&&console.log(" HTTP Polling: New notifications found")}}catch(b){console.warn("HTTP polling error:",b)}},3e4);l.current&&clearInterval(l.current),l.current=y};_.useEffect(()=>((async()=>{setTimeout(async()=>{await f()},1e3)})(),()=>{if(o.current){try{o.current.close(1e3,"Component unmounting")}catch(b){console.warn("Error closing WebSocket:",b)}o.current=null}if(l.current){try{clearTimeout(l.current)}catch(b){console.warn("Error clearing timeout:",b)}l.current=null}}),[]),_.useEffect(()=>{console.log("Initial notification fetch disabled")},[]);const p=async y=>{console.log("Mark as read:",y),i(b=>Math.max(0,b-1))},w=async()=>{console.log("Mark all as read"),i(0)},v=y=>{o.current&&o.current.readyState===WebSocket.OPEN?(o.current.send(JSON.stringify(y)),console.log(" WebSocket message sent:",y)):console.warn(" WebSocket not connected, cannot send message")};return _.useEffect(()=>{const y=b=>{v(b.detail)};return window.addEventListener("websocket_send",y),()=>window.removeEventListener("websocket_send",y)},[]),{notifications:e,unreadCount:a,isConnected:n,markAsRead:p,markAllAsRead:w,clearNotifications:()=>{t([]),i(0)},sendMessage:v}}function bk({className:e=""}){lt();const{navigateWithAuth:t}=vo(),{notifications:n,unreadCount:r,markAsRead:a,markAllAsRead:i,clearNotifications:o,isConnected:l}=Tg(),[d,h]=_.useState(!1),f=w=>{switch(w){case"order":return s.jsx(qt,{className:"h-4 w-4 text-blue-600"});case"payment":return s.jsx(bl,{className:"h-4 w-4 text-green-600"});case"system":return s.jsx(Ju,{className:"h-4 w-4 text-orange-600"});default:return s.jsx(Kn,{className:"h-4 w-4 text-gray-600"})}},u=w=>{switch(w){case"order":return"border-l-blue-500 bg-blue-50";case"payment":return"border-l-green-500 bg-green-50";case"system":return"border-l-orange-500 bg-orange-50";default:return"border-l-gray-500 bg-gray-50"}},m=w=>{w.read||a(w.id),w.action_url&&(t(w.action_url),h(!1))},p=w=>{const v=new Date(w),y=Math.floor((new Date().getTime()-v.getTime())/(1e3*60));return y<1?"Just now":y<60?`${y}m ago`:y<1440?`${Math.floor(y/60)}h ago`:v.toLocaleDateString()};return s.jsxs(An,{open:d,onOpenChange:h,children:[s.jsx(xZ,{asChild:!0,children:s.jsxs(te,{variant:"ghost",size:"sm",className:`relative p-2 hover:bg-gray-100 rounded-full ${e}`,children:[s.jsx(Kn,{className:`h-5 w-5 ${l?"text-gray-700":"text-gray-400"}`}),r>0&&s.jsx(Ye,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:r>99?"99+":r}),!l&&s.jsx("div",{className:"absolute -bottom-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})]})}),s.jsxs(wn,{side:"right",className:"w-full sm:w-96",children:[s.jsxs(On,{className:"pb-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Rn,{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"h-5 w-5"}),"Notifications",r>0&&s.jsxs(Ye,{variant:"secondary",className:"ml-2",children:[r," new"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!l&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[s.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full animate-pulse"}),"Offline"]}),n.length>0&&s.jsx(te,{variant:"ghost",size:"sm",onClick:o,className:"text-xs",children:"Clear All"})]})]}),r>0&&s.jsxs(te,{variant:"outline",size:"sm",onClick:i,className:"w-full",children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),"Mark All as Read"]})]}),s.jsx(R_,{className:"h-[calc(100vh-120px)]",children:n.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(Kn,{className:"h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"You're all caught up! New notifications will appear here."})]}):s.jsx("div",{className:"space-y-2",children:n.map(w=>s.jsx("div",{onClick:()=>m(w),className:`
                    p-4 rounded-lg border-l-4 cursor-pointer transition-all hover:shadow-md
                    ${u(w.type)}
                    ${w.read?"opacity-75":"ring-2 ring-blue-100"}
                  `,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:f(w.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:w.title}),!w.read&&s.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full flex-shrink-0 ml-2"})]}),s.jsx("p",{className:"text-sm text-gray-700 mb-2 line-clamp-2",children:w.message}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(Yr,{className:"h-3 w-3"}),p(w.timestamp||new Date().toISOString())]}),w.action_url&&s.jsx(te,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-blue-600 hover:text-blue-800",onClick:v=>{v.stopPropagation(),m(w)},children:"View"})]})]})]})},w.id))})}),s.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:s.jsxs("div",{className:`
            flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-xs
            ${l?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}
          `,children:[s.jsx("div",{className:`h-2 w-2 rounded-full ${l?"bg-green-500":"bg-red-500 animate-pulse"}`}),l?"Connected to notification service":"Reconnecting..."]})})]})]})}function fY({children:e,redirectTo:t="/login"}){const[n,r]=_.useState(!0),[a,i]=_.useState(!1);lt();const{state:o}=$n();_.useEffect(()=>{l()},[o.user]);const l=async()=>{var d,h;try{const f=o.user;if(f){if(!((d=f.available_roles)!=null&&d.includes("customer"))){console.log("CustomerAuthGuard: Customer role not available, user type:",f.user_type),i(!1);return}console.log("CustomerAuthGuard: Access granted for user:",f.user_type),i(!0);return}if(!await Ae.isAuthenticated()){console.log("CustomerAuthGuard: Not authenticated"),i(!1);return}const m=await Ae.getUser();if(!m){console.log("CustomerAuthGuard: No user data"),i(!1);return}if(!((h=m.available_roles)!=null&&h.includes("customer"))){console.log("CustomerAuthGuard: Customer role not available, user type:",m.user_type),i(!1);return}console.log("CustomerAuthGuard: Access granted for user:",m.user_type),i(!0)}catch(f){console.error("Customer auth guard error:",f),i(!1)}finally{r(!1)}};return n?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600 mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Checking authentication..."})]}):s.jsx(s.Fragment,{children:e})}function mY(){var ys,ms;const e=lt(),{toast:t}=ns(),{navigateWithAuth:n}=vo(),[r,a]=_.useState(!1),[i,o]=_.useState([]),[l,d]=_.useState(!0),[h,f]=_.useState(!1),[u,m]=_.useState({page:1,hasMore:!0,total:0}),[p,w]=_.useState("all"),[v,x]=_.useState("");_.useState("");const[y,b]=_.useState(!1),[j,N]=_.useState(null),[S,P]=_.useState({}),[T,E]=_.useState(!1),[I,O]=_.useState(null),[R,C]=_.useState(0),[D,A]=_.useState(""),[M,Z]=_.useState(!1),[X,U]=_.useState(!1),[F,B]=_.useState(null),[z,H]=_.useState(""),[q,W]=_.useState(""),[Y,V]=_.useState(""),[G,ie]=_.useState(""),[J,le]=_.useState(""),[ye,ke]=_.useState(""),[Ne,_e]=_.useState(""),[ne,Ce]=_.useState(""),[ve,oe]=_.useState([]),[de,Q]=_.useState(!1),[ae,ue]=_.useState(null),[re,ce]=_.useState(!1),[fe,ge]=_.useState("");Tg(),_.useEffect(()=>{const he=nt=>{const Fe=nt.detail;(Fe.type==="order_update"||Fe.type==="order_status_change"||Fe.type==="refund_update")&&(console.log("WebSocket order update:",Fe),Le.current(1,!0))};return window.addEventListener("websocket_message",he),()=>window.removeEventListener("websocket_message",he)},[]);const me=_.useRef(null),be=_.useCallback(async(he=1,nt=!1)=>{try{if(!await Ae.isAuthenticated()){d(!1),f(!1);return}he===1?d(!0):f(!0);const et=await ep.getOrdersPaginated(he,10);o(nt||he===1?et.results||[]:ft=>[...ft,...et.results||[]]),m({page:he,hasMore:!!et.next,total:et.count||0});const tt={},qe=[...new Set((et.results||[]).map(ft=>{var bt,Ft,Wt;return(Wt=(Ft=(bt=ft.items)==null?void 0:bt[0])==null?void 0:Ft.product_details)==null?void 0:Wt.vendor_name}).filter(Boolean))];for(const ft of qe)tt[ft]=await Pe(ft);P(ft=>({...ft,...tt}))}catch(Fe){console.error("Error fetching orders:",Fe),await Ae.getToken()&&t({title:"Error",description:Fe.message||"Failed to load orders",variant:"destructive"})}finally{d(!1),f(!1)}},[n,t]);_.useEffect(()=>{(async()=>{const qe=await Ae.isAuthenticated();a(qe),qe?Le.current(1,!0):d(!1)})();const nt=qe=>{qe.detail.type==="order"&&!document.hidden&&(me.current&&clearTimeout(me.current),me.current=setTimeout(()=>{document.hidden||Le.current(1,!0)},2e3))},Fe=qe=>{const{orderId:ft,status:bt,type:Ft}=qe.detail;console.log("Order status update received:",{orderId:ft,status:bt,type:Ft}),Le.current(1,!0)},et=()=>{document.hidden||Le.current(1,!0)};window.addEventListener("newNotification",nt),window.addEventListener("orderStatusUpdated",Fe),document.addEventListener("visibilitychange",et);const tt=setInterval(()=>{document.hidden||Le.current(1,!0)},3e4);return()=>{window.removeEventListener("newNotification",nt),window.removeEventListener("orderStatusUpdated",Fe),document.removeEventListener("visibilitychange",et),clearInterval(tt),me.current&&clearTimeout(me.current)}},[]);const Te=he=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",out_for_delivery:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[he]||"bg-gray-100 text-gray-800",Se=he=>({pending:"Order Placed",confirmed:"Confirmed",preparing:"Preparing",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"})[he]||he,Ie=he=>he==="all"?i:i.filter(nt=>nt.status===he),se=async()=>{if(!v.trim()){t({title:"Reason Required",description:"Please provide a valid reason for cancellation",variant:"destructive"});return}try{await ep.cancelOrder(j,v),t({title:"Order Cancelled",description:"Your order has been cancelled successfully."}),b(!1),x(""),Le.current(1,!0)}catch(he){console.error("Error cancelling order:",he),t({title:"Cancellation Failed",description:he.message||"Failed to cancel order",variant:"destructive"})}},we=_.useRef(new Map),Pe=_.useCallback(async he=>{var nt;if(we.current.has(he)){const Fe=we.current.get(he);if(Date.now()-Fe.timestamp<3e5)return Fe.status}try{const{response:Fe,data:et}=await Ve(`search/vendors/?search=${encodeURIComponent(he)}`);if(!Fe.ok)return!1;const tt=(nt=et==null?void 0:et.results)==null?void 0:nt.find(ft=>ft.business_name===he),qe=(tt==null?void 0:tt.is_active)||!1;return we.current.set(he,{status:qe,timestamp:Date.now()}),qe}catch(Fe){return console.error("Error checking vendor status:",Fe),!1}},[]),Me=async he=>{var nt,Fe,et;try{const tt=(et=(Fe=(nt=he.items)==null?void 0:nt[0])==null?void 0:Fe.product_details)==null?void 0:et.vendor_name;if(tt&&!await Pe(tt)){t({title:"Vendor Offline",description:"This vendor is currently offline. Cannot reorder at this time.",variant:"destructive"});return}for(const qe of he.items);t({title:"Items Added",description:"Order items added to cart"}),e("/cart")}catch{t({title:"Reorder Failed",description:"Failed to add items to cart",variant:"destructive"})}},Le=_.useRef(be);Le.current=be;const He=_.useCallback(()=>{!h&&u.hasMore&&Le.current(u.page+1)},[h,u.hasMore,u.page]),{sentinelRef:_t}=u0({hasMore:u.hasMore,isLoading:h,onLoadMore:He,threshold:300}),It=_.memo(({order:he})=>{var nt,Fe,et,tt,qe,ft,bt,Ft,Wt,as,ps;return s.jsxs($e,{className:"cursor-pointer hover:shadow-md transition-shadow mb-4",onClick:()=>{ue(he),Q(!0)},children:[s.jsx(Ct,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs(Tt,{className:"text-lg",children:["Order #",he.order_number]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(he.created_at).toLocaleDateString()})]}),s.jsx(Ye,{className:`${Te(he.status)} px-3 py-1`,children:Se(he.status)})]})}),s.jsx(ze,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2",children:[(nt=he.items)==null?void 0:nt.length," item",((Fe=he.items)==null?void 0:Fe.length)!==1?"s":""]}),s.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[(et=he.items)==null?void 0:et.slice(0,3).map(We=>{var Xs,Js,tr,Vn;return s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("img",{src:Qt((tr=(Js=(Xs=We.product_details)==null?void 0:Xs.images)==null?void 0:Js[0])==null?void 0:tr.image_url),alt:We.product_name,className:"w-12 h-12 object-cover rounded-lg border"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs text-gray-800 font-medium truncate max-w-[100px]",children:We.product_name}),s.jsx("p",{className:"text-xs text-gray-600 truncate max-w-[100px] capitalize",children:(Vn=We.product_details)==null?void 0:Vn.category}),We.product_selections&&Object.keys(We.product_selections).length>0&&s.jsx("div",{className:"text-xs text-blue-600 truncate max-w-[80px]",children:Object.entries(We.product_selections).map(([Ba,wi])=>s.jsxs("div",{className:"capitalize",children:[Ba,": ",Array.isArray(wi)?wi.join(", "):wi]},Ba)).slice(0,2)})]})]},We.id)}),((tt=he.items)==null?void 0:tt.length)>3&&s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center flex-shrink-0",children:s.jsxs("span",{className:"text-xs text-gray-600",children:["+",he.items.length-3]})})]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-1",children:[s.jsx(yn,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("button",{onClick:We=>{var Js,tr,Vn;We.stopPropagation();const Xs=(Vn=(tr=(Js=he.items)==null?void 0:Js[0])==null?void 0:tr.product_details)==null?void 0:Vn.vendor_id;Xs&&e(`/vendor/${Xs}`)},className:"text-blue-600 hover:underline text-xs font-medium truncate min-w-0",children:((bt=(ft=(qe=he.items)==null?void 0:qe[0])==null?void 0:ft.product_details)==null?void 0:bt.vendor_name)||"Vendor"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[s.jsx(es,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate text-gray-700 min-w-0",children:he.delivery_address})]}),he.status==="out_for_delivery"&&s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qn,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium text-blue-800",children:"Shipping Details"})]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Vehicle:"})," ",he.vehicle_number||"TBA"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Vehicle Color:"})," ",he.vehicle_color||"N/A"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Driver Phone:"})," ",he.delivery_boy_phone||"TBA"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"ETA:"})," ",he.estimated_delivery_time||"TBA"]}),he.delivery_fee>0&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Fee:"})," Rs ",parseFloat(he.delivery_fee).toFixed(2)]})]})]}),he.status==="cancelled"&&he.cancel_reason&&s.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(sn,{className:"h-4 w-4 text-red-600"}),s.jsx("span",{className:"font-medium text-red-800",children:"Cancellation Reason"})]}),s.jsx("p",{className:"text-sm text-red-700",children:he.cancel_reason}),he.refund_status&&s.jsxs("p",{className:"text-sm text-red-600 mt-1",children:[s.jsx("span",{className:"font-medium",children:"Refund:"})," ",he.refund_status]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mb-2 flex-wrap",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:We=>{var Js;We.stopPropagation();const Xs=(Js=he.vendor_details)==null?void 0:Js.user;Xs?(console.log("Navigating to vendor user:",Xs,"for order:",he.id),e(`/messages?vendor=${Xs}&order_id=${he.id}&customer_name=${encodeURIComponent(he.delivery_name||"Customer")}`)):console.log("No vendor user ID found for order:",he.id)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:s.jsx(Bp,{className:"h-4 w-4"})}),he.status==="pending"&&s.jsx(te,{variant:"outline",size:"sm",onClick:We=>{We.stopPropagation(),N(he.id),b(!0)},className:"text-red-600 border-red-200 hover:bg-red-50 px-3 py-1 text-xs h-8 min-w-[60px]",children:"Cancel"}),he.status==="delivered"&&!((Ft=he.refunds)!=null&&Ft.some(We=>["requested","approved","rejected","appeal","processed","completed"].includes(We.status)))&&(()=>{const We=new Date(he.delivered_at);return(new Date-We)/(1e3*60*60)<=24})()&&s.jsx(te,{variant:"outline",size:"sm",onClick:We=>{We.stopPropagation(),B(he),U(!0)},className:"text-orange-600 border-orange-200 hover:bg-orange-50 px-3 py-1 text-xs h-8",children:"Return"}),he.status==="delivered"&&!he.review&&s.jsxs(te,{variant:"outline",size:"sm",onClick:We=>{We.stopPropagation(),O(he),C(0),A(""),Z(!1),E(!0)},className:"text-emerald-600 border-emerald-200 hover:bg-emerald-50 px-3 py-1 text-xs h-8",children:[s.jsx(vs,{className:"h-3 w-3 mr-1"}),"Review"]}),he.status==="delivered"&&he.review&&s.jsxs(te,{variant:"outline",size:"sm",onClick:We=>{We.stopPropagation(),O(he),C(he.review.overall_rating),A(he.review.review_text||""),Z(!0),E(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50 px-3 py-1 text-xs h-8",children:[s.jsx(vs,{className:"h-3 w-3 mr-1"}),"Edit"]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[(()=>{var Ba;const We=((Ba=he.items)==null?void 0:Ba.reduce((wi,_i)=>wi+parseFloat(_i.delivery_fee||0),0))||0,Xs=parseFloat(he.delivery_fee||0),Js=Math.max(We,Xs),tr=parseFloat(he.total_amount||0),Vn=tr+Js;return s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["Rs ",Vn.toFixed(2)]}),Js>0&&s.jsxs("span",{className:"text-xs text-gray-500",children:["(Bill: Rs ",tr.toFixed(2)," + Delivery: Rs ",Js.toFixed(2),")"]})]})})(),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[he.status==="out_for_delivery"&&s.jsx(te,{variant:"outline",size:"sm",onClick:async We=>{We.stopPropagation();try{const Xs=await Ae.getToken(),{response:Js}=await Ve(`/api/orders/${he.id}/status/`,{method:"POST",body:JSON.stringify({status:"delivered",notes:"Marked as received by customer"})});Js.ok&&(o(tr=>tr.map(Vn=>Vn.id===he.id?{...Vn,status:"delivered",delivered_at:new Date().toISOString()}:Vn)),window.websocket&&window.websocket.readyState===WebSocket.OPEN&&window.websocket.send(JSON.stringify({type:"order_update",action:"order_received",order_id:he.id,timestamp:new Date().toISOString()})),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:he.id,status:"delivered",type:"customer_received"}})))}catch(Xs){console.error("Error marking as received:",Xs)}},className:"text-green-600 border-green-200 hover:bg-green-50",children:"Received"}),(he.status==="cancelled"||he.status==="pending"||he.status==="delivered")&&S[(ps=(as=(Wt=he.items)==null?void 0:Wt[0])==null?void 0:as.product_details)==null?void 0:ps.vendor_name]&&s.jsx(te,{variant:"outline",size:"sm",onClick:We=>{We.stopPropagation(),Me(he)},className:"text-green-600 border-green-200 hover:bg-green-50",children:s.jsx(Qa,{className:"h-4 w-4"})})]})]})]})})]},he.id)}),ss=()=>s.jsxs($e,{className:"mb-4",children:[s.jsx(Ct,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse w-32"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"})]}),s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-20"})]})}),s.jsx(ze,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg animate-pulse"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-1/2"})]})]}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-full"}),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-20"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-16"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-16"})]})]})]})})]});return l&&i.length===0?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Ht,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Orders"}),s.jsx(bk,{})]})}),s.jsx("main",{className:"max-w-4xl mx-auto p-4 pt-2",children:s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((he,nt)=>s.jsx(ss,{},nt))})})]}):s.jsx(fY,{children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Ht,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Orders"}),s.jsx(bk,{})]})}),s.jsx("main",{className:"max-w-4xl mx-auto p-4 pt-2",children:i.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx(qt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No orders yet"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start shopping to see your orders here"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(te,{onClick:()=>e("/"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Start Shopping"}),!r&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Need to sign in?"}),s.jsx(te,{variant:"outline",onClick:()=>e("/login?redirect=/orders"),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Sign In"})]})]})]}):s.jsxs(Fa,{value:p,onValueChange:w,className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:u.total>0&&s.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Showing ",i.length," of ",u.total," orders"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(ia,{className:"flex w-max min-w-full gap-1",children:[s.jsxs(Lt,{value:"all",className:"flex-shrink-0 px-2",children:["All ",s.jsxs("span",{className:"font-bold",children:["(",i.length,")"]})]}),s.jsxs(Lt,{value:"pending",className:"flex-shrink-0 px-2",children:["Pending ",s.jsxs("span",{className:"font-bold",children:["(",Ie("pending").length,")"]})]}),s.jsxs(Lt,{value:"confirmed",className:"flex-shrink-0 px-2",children:["Confirmed ",s.jsxs("span",{className:"font-bold",children:["(",Ie("confirmed").concat(Ie("preparing")).length,")"]})]}),s.jsxs(Lt,{value:"shipped",className:"flex-shrink-0 px-2",children:["Shipped ",s.jsxs("span",{className:"font-bold",children:["(",Ie("out_for_delivery").length,")"]})]}),s.jsxs(Lt,{value:"delivered",className:"flex-shrink-0 px-2",children:["Delivered ",s.jsxs("span",{className:"font-bold",children:["(",Ie("delivered").length,")"]})]}),s.jsxs(Lt,{value:"returns",className:"flex-shrink-0 px-2",children:["Returns ",s.jsxs("span",{className:"font-bold",children:["(",i.filter(he=>{var nt;return((nt=he.refunds)==null?void 0:nt.length)>0}).length,")"]})]}),s.jsxs(Lt,{value:"reviewed",className:"flex-shrink-0 px-2",children:["Reviewed ",s.jsxs("span",{className:"font-bold",children:["(",i.filter(he=>he.review).length,")"]})]}),s.jsxs(Lt,{value:"cancelled",className:"flex-shrink-0 px-2",children:["Cancelled ",s.jsxs("span",{className:"font-bold",children:["(",Ie("cancelled").length,")"]})]})]})}),s.jsxs(yt,{value:"all",className:"space-y-4",children:[i.map(he=>s.jsx(It,{order:he},he.id)),u.hasMore&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{ref:_t,className:"h-4"}),h&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-600 mr-2"}),s.jsx("span",{className:"text-gray-600",children:"Loading more orders..."})]})]})]}),s.jsx(yt,{value:"pending",className:"space-y-4",children:Ie("pending").map(he=>s.jsx(It,{order:he},he.id))}),s.jsx(yt,{value:"confirmed",className:"space-y-4",children:Ie("confirmed").concat(Ie("preparing")).map(he=>s.jsx(It,{order:he},he.id))}),s.jsx(yt,{value:"shipped",className:"space-y-4",children:Ie("out_for_delivery").map(he=>s.jsx(It,{order:he},he.id))}),s.jsx(yt,{value:"delivered",className:"space-y-4",children:Ie("delivered").map(he=>s.jsxs("div",{children:[s.jsx(It,{order:he}),he.status==="delivered"&&he.delivered_at&&s.jsx("div",{className:"mt-2 px-4 py-2 bg-gray-50 rounded text-xs text-gray-600",children:(()=>{var qe;const nt=new Date(he.delivered_at),tt=24-(new Date-nt)/(1e3*60*60);return(qe=he.refunds)!=null&&qe.some(ft=>["requested","approved","rejected","appeal","processed","completed"].includes(ft.status))?"Return request already submitted":tt>0?`Return available for ${Math.floor(tt)} hours ${Math.floor(tt%1*60)} minutes`:"Return window expired (24 hours after delivery)"})()})]},he.id))}),s.jsx(yt,{value:"returns",className:"space-y-4",children:i.filter(he=>{var nt;return((nt=he.refunds)==null?void 0:nt.length)>0}).length>0?i.filter(he=>{var nt;return((nt=he.refunds)==null?void 0:nt.length)>0}).map(he=>{var nt,Fe,et,tt;return s.jsx("div",{className:"bg-white rounded-lg border",children:s.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>{ue(he),Q(!0)},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("h3",{className:"font-semibold text-sm text-gray-900",children:["Order #",he.order_number]})}),s.jsxs(Ye,{className:"bg-orange-100 text-orange-800 flex items-center gap-1 text-xs px-2 py-1",children:[s.jsx(Qa,{className:"h-3 w-3"}),"Return Request"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(yn,{className:"h-4 w-4"}),s.jsx("span",{className:"truncate",children:((et=(Fe=(nt=he.items)==null?void 0:nt[0])==null?void 0:Fe.product_details)==null?void 0:et.vendor_name)||"Vendor"})]}),(tt=he.refunds)==null?void 0:tt.map(qe=>{var ft;return s.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Return Reason:"}),s.jsx(Ye,{className:`text-xs ${qe.status==="requested"?"bg-yellow-100 text-yellow-800":qe.status==="approved"?"bg-green-100 text-green-800":qe.status==="rejected"?"bg-red-100 text-red-800":qe.status==="appeal"?"bg-purple-100 text-purple-800":qe.status==="processed"?"bg-blue-100 text-blue-800":qe.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:qe.status.charAt(0).toUpperCase()+qe.status.slice(1)})]}),s.jsx("p",{className:"text-xs text-gray-700 capitalize",children:qe.reason.replace("_"," ")}),qe.customer_notes&&s.jsxs("p",{className:"text-xs text-gray-600",children:['"',qe.customer_notes,'"']}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Amount:"})," Rs ",qe.requested_amount]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Method:"})," ",qe.refund_method]}),((ft=qe.evidence_photos)==null?void 0:ft.length)>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium mb-1",children:"Evidence Documents:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:qe.evidence_photos.map((bt,Ft)=>{var ps;const Wt=(ps=bt.filename)==null?void 0:ps.match(/\.(jpg|jpeg|png|gif|webp)$/i);let as;return bt.filename.startsWith("http")?as=bt.filename:bt.filename.startsWith("/media/")?as=`${an.BASE_URL}${bt.filename}`:as=`${an.BASE_URL}/media/${bt.filename}`,s.jsxs("div",{className:"bg-blue-100 p-2 rounded text-xs cursor-pointer hover:bg-blue-200 transition-colors flex items-center gap-1",onClick:We=>{We.stopPropagation(),Wt?(ge(as),ce(!0)):window.open(as,"_blank")},children:[Wt?s.jsx(qs,{className:"h-3 w-3 text-blue-600"}):s.jsx(qt,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"text-blue-800",children:bt.filename||`Document ${Ft+1}`})]},Ft)})})]}),qe.status==="completed"&&s.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded p-2 mt-2",children:[s.jsx("p",{className:"text-xs text-emerald-800 font-medium mb-2",children:" Refund Completed"}),s.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"*Delivery charges are not included in refund amount"}),!qe.customer_received_refund&&!qe.support_contacted&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(te,{size:"sm",variant:"outline",className:"w-full text-orange-600 border-orange-200 hover:bg-orange-50",onClick:bt=>{bt.stopPropagation();const Ft=` REFUND ISSUE REPORT

Order: #${he.order_number}
Refund ID: ${qe.id}
Amount: Rs ${qe.requested_amount}
Status: ${qe.status}
Method: ${qe.refund_method}

Issue: I have not received my refund or there is an issue with the refund process. Please help resolve this matter.`;e(`/?support_message=${encodeURIComponent(Ft)}`)},children:"Report & Contact Support"}),s.jsx(te,{size:"sm",variant:"outline",className:"w-full text-green-600 border-green-200 hover:bg-green-50",onClick:async bt=>{bt.stopPropagation();try{const{response:Ft}=await Ve(`/refunds/${qe.id}/mark-received/`,{method:"POST"});Ft.ok&&(t({title:"Marked as Received",description:"Thank you for confirming receipt of your refund."}),be(1,!0))}catch{t({title:"Error",description:"Failed to mark refund as received.",variant:"destructive"})}},children:"Mark Received"})]}),qe.customer_received_refund&&s.jsxs("p",{className:"text-xs text-green-700 font-medium",children:[" Marked as received on ",new Date(qe.customer_received_at).toLocaleDateString()]}),qe.support_contacted&&s.jsxs("div",{className:"text-xs text-orange-700",children:[s.jsxs("p",{className:"font-medium",children:[" Support contacted on ",new Date(qe.support_contacted_at).toLocaleDateString()]}),s.jsx("p",{className:"mt-1 bg-white p-1 rounded",children:qe.support_notes})]})]}),qe.status==="processed"&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mt-2",children:[s.jsx("p",{className:"text-xs text-blue-800 font-medium",children:" Money Transferred"}),s.jsx("p",{className:"text-xs text-gray-600",children:"*Delivery charges are not included in refund amount"})]}),qe.admin_notes&&s.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[s.jsx("span",{className:"font-medium",children:"Response:"})," ",qe.admin_notes]}),qe.status==="rejected"&&s.jsx(te,{size:"sm",variant:"outline",className:"w-full mt-2",onClick:async bt=>{bt.stopPropagation();try{const Ft=await Ae.getToken(),{response:Wt}=await Ve(`/api/refunds/${qe.id}/appeal/`,{method:"POST",body:JSON.stringify({customer_notes:"Appealing the rejection decision"})});Wt.ok&&(t({title:"Appeal Submitted",description:"Your appeal has been submitted for review."}),be(1,!0),window.websocket&&window.websocket.readyState===WebSocket.OPEN&&window.websocket.send(JSON.stringify({type:"refund_update",action:"appeal_submitted",order_id:he.id,refund_id:qe.id,timestamp:new Date().toISOString()})),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:he.id,status:"appeal_submitted",type:"appeal"}})))}catch{t({title:"Error",description:"Failed to submit appeal.",variant:"destructive"})}},children:"Appeal Decision"})]},qe.id)}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[(()=>{var as;const qe=((as=he.items)==null?void 0:as.reduce((ps,We)=>ps+parseFloat(We.delivery_fee||0),0))||0,ft=parseFloat(he.delivery_fee||0),bt=Math.max(qe,ft),Wt=parseFloat(he.total_amount||0)+bt;return s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["Rs ",Wt.toFixed(2)]})})(),s.jsxs(te,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:qe=>{qe.stopPropagation(),ue(he),Q(!0)},children:[s.jsx(qs,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]})]})},he.id)}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Qa,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No returns yet"}),s.jsx("p",{className:"text-gray-500",children:"Your return requests will appear here"})]})}),s.jsx(yt,{value:"reviewed",className:"space-y-4",children:i.filter(he=>he.review).length>0?i.filter(he=>he.review).map(he=>{var nt;return s.jsx($e,{className:"mb-4",children:s.jsxs(ze,{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg",children:["Order #",he.order_number]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(he.created_at).toLocaleDateString()})]}),s.jsx(Ye,{className:"bg-green-100 text-green-800 px-3 py-1",children:"Reviewed"})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"flex gap-3 overflow-x-auto",children:(nt=he.items)==null?void 0:nt.slice(0,3).map(Fe=>{var et,tt,qe,ft;return s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("img",{src:((qe=(tt=(et=Fe.product_details)==null?void 0:et.images)==null?void 0:tt[0])==null?void 0:qe.image_url)||"/placeholder-product.jpg",alt:Fe.product_name,className:"w-12 h-12 object-cover rounded-lg border"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:Fe.product_name}),s.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:(ft=Fe.product_details)==null?void 0:ft.category})]})]},Fe.id)})})}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Your Review"}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(Fe=>s.jsx(vs,{className:`h-4 w-4 ${Fe<=he.review.overall_rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},Fe))})]}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>{O(he),C(he.review.overall_rating),A(he.review.review_text||""),Z(!0),E(!0)},className:"h-7 text-xs",children:"Edit"})]}),he.review.review_text&&s.jsx("p",{className:"text-sm text-gray-700",children:he.review.review_text}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed on ",new Date(he.review.created_at).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t mt-3",children:[(()=>{var bt;const Fe=((bt=he.items)==null?void 0:bt.reduce((Ft,Wt)=>Ft+parseFloat(Wt.delivery_fee||0),0))||0,et=parseFloat(he.delivery_fee||0),tt=Math.max(Fe,et),ft=parseFloat(he.total_amount||0)+tt;return s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["Rs ",ft.toFixed(2)]})})(),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>{ue(he),Q(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"View Details"})]})]})},he.id)}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(vs,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No reviews yet"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Complete your orders and share your experience"})]})}),s.jsx(yt,{value:"cancelled",className:"space-y-4",children:Ie("cancelled").map(he=>s.jsx(It,{order:he},he.id))})]})}),s.jsx(Nn,{}),s.jsx(bc,{open:y,onOpenChange:b,children:s.jsxs(tl,{className:"sm:max-w-md",children:[s.jsx(sl,{children:s.jsx(nl,{children:"Cancel Order"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"reason",children:"Reason for Cancellation *"}),s.jsxs(Yt,{value:v,onValueChange:x,children:[s.jsx(Kt,{children:s.jsx(Xt,{placeholder:"Select a reason"})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"changed_mind",children:"Changed my mind"}),s.jsx(st,{value:"found_better_price",children:"Found better price elsewhere"}),s.jsx(st,{value:"delivery_too_long",children:"Delivery time too long"}),s.jsx(st,{value:"ordered_by_mistake",children:"Ordered by mistake"}),s.jsx(st,{value:"payment_issues",children:"Payment issues"}),s.jsx(st,{value:"other",children:"Other reason"})]})]})]}),v==="other"&&s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"custom_reason",children:"Please specify"}),s.jsx(Ys,{id:"custom_reason",placeholder:"Enter your reason...",value:v,onChange:he=>x(he.target.value)})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(te,{variant:"outline",onClick:()=>b(!1),className:"flex-1",children:"Keep Order"}),s.jsx(te,{onClick:se,className:"flex-1 bg-red-600 hover:bg-red-700",disabled:!v,children:"Cancel Order"})]})]})]})}),s.jsx(bc,{open:T,onOpenChange:E,children:s.jsxs(tl,{className:"sm:max-w-md",children:[s.jsx(sl,{children:s.jsx(nl,{children:M?"Edit Review":"Rate & Review Order"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Rating *"}),s.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,3,4,5].map(he=>s.jsx("button",{onClick:()=>C(he),className:`text-2xl ${he<=R?"text-yellow-400":"text-gray-300"}`,children:""},he))})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"review",children:"Review (Optional)"}),s.jsx(Ys,{id:"review",placeholder:"Share your experience...",value:D,onChange:he=>A(he.target.value),rows:3})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(te,{variant:"outline",onClick:()=>{E(!1),C(0),A(""),Z(!1)},className:"flex-1",children:"Cancel"}),s.jsx(te,{onClick:async()=>{if(R)try{const he=await Ae.getToken(),nt="POST",{response:Fe,data:et}=await Ve(`/api/orders/${I.id}/review/`,{method:nt,body:JSON.stringify({overall_rating:R,review_text:D})});if(Fe.ok&&et){const tt={overall_rating:R,review_text:D,created_at:new Date().toISOString()};o(qe=>qe.map(ft=>ft.id===I.id?{...ft,review:tt}:ft)),E(!1),C(0),A(""),Z(!1),t({title:M?"Review Updated":"Review Submitted",description:"Thank you for your feedback!"}),window.websocket&&window.websocket.readyState===WebSocket.OPEN&&window.websocket.send(JSON.stringify({type:"order_update",action:"review_submitted",order_id:I.id,timestamp:new Date().toISOString()})),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:I.id,status:"reviewed",type:"review"}}))}}catch(he){console.error("Error submitting review:",he),t({title:"Error",description:"Failed to submit review. Please try again.",variant:"destructive"})}},className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:!R,children:M?"Update Review":"Submit Review"})]})]})]})}),s.jsx(An,{open:X,onOpenChange:U,children:s.jsxs(wn,{side:"bottom",className:"h-[80vh] rounded-t-xl",children:[s.jsx(On,{className:"pb-4",children:s.jsxs(Rn,{className:"text-left flex items-center gap-2",children:[s.jsx(Qa,{className:"h-5 w-5"}),"Return Order #",F==null?void 0:F.order_number]})}),s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Return Reason *"}),s.jsxs(Yt,{value:z,onValueChange:H,children:[s.jsx(Kt,{children:s.jsx(Xt,{placeholder:"Select reason for return"})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"defective_product",children:"Defective/Damaged Product"}),s.jsx(st,{value:"wrong_item",children:"Wrong Item Delivered"}),s.jsx(st,{value:"quality_issue",children:"Quality Issue"}),s.jsx(st,{value:"not_as_described",children:"Not as Described"}),s.jsx(st,{value:"expired_product",children:"Expired Product"}),s.jsx(st,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Additional Notes"}),s.jsx(Ys,{placeholder:"Describe the issue in detail...",value:q,onChange:he=>W(he.target.value),rows:3})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Evidence Photos/Documents *"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Please provide evidence to support your return request"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[s.jsx(Vp,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload photos or documents as proof"}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:he=>oe(Array.from(he.target.files)),className:"hidden",id:"evidence-upload"}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>document.getElementById("evidence-upload").click(),className:"mt-2",children:"Choose Files"})]}),ve.length>0&&s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[ve.length," file(s) selected:"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:ve.map((he,nt)=>s.jsxs("div",{className:"bg-gray-50 p-2 rounded text-xs flex items-center justify-between",children:[s.jsx("span",{className:"truncate",children:he.name}),s.jsx("button",{onClick:()=>oe(Fe=>Fe.filter((et,tt)=>tt!==nt)),className:"text-red-500 hover:text-red-700 ml-2",children:""})]},nt))})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Refund Method *"}),s.jsxs(Yt,{value:Y,onValueChange:V,children:[s.jsx(Kt,{children:s.jsx(Xt,{placeholder:"Select refund method"})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"esewa",children:"eSewa"}),s.jsx(st,{value:"khalti",children:"Khalti"}),s.jsx(st,{value:"bank",children:"Bank Transfer"})]})]})]}),Y==="esewa"&&s.jsxs("div",{children:[s.jsx(xe,{children:"eSewa Number *"}),s.jsx(je,{placeholder:"98XXXXXXXX",value:G,onChange:he=>ie(he.target.value)})]}),Y==="khalti"&&s.jsxs("div",{children:[s.jsx(xe,{children:"Khalti Number *"}),s.jsx(je,{placeholder:"98XXXXXXXX",value:J,onChange:he=>le(he.target.value)})]}),Y==="bank"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Account Holder Name *"}),s.jsx(je,{placeholder:"Full name as per bank account",value:ye,onChange:he=>ke(he.target.value)})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Account Number *"}),s.jsx(je,{placeholder:"Bank account number",value:Ne,onChange:he=>_e(he.target.value)})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Bank Branch *"}),s.jsx(je,{placeholder:"Branch name",value:ne,onChange:he=>Ce(he.target.value)})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ju,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Return Policy"}),s.jsxs("ul",{className:"text-xs space-y-1",children:[s.jsx("li",{children:" Returns are processed within 3-5 business days"}),s.jsx("li",{children:" Refund will be processed after vendor approval"}),s.jsx("li",{children:" You can appeal if your return is rejected"}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Delivery charges are not included in refund amount"})]})]})]})]})})]}),s.jsxs("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:[s.jsx(te,{variant:"outline",className:"flex-1",onClick:()=>{U(!1),H(""),W(""),V(""),ie(""),le(""),ke(""),_e(""),Ce(""),oe([])},children:"Cancel"}),s.jsx(te,{className:"flex-1 bg-orange-600 hover:bg-orange-700",disabled:!z||!Y||ve.length===0||Y==="esewa"&&!G||Y==="khalti"&&!J||Y==="bank"&&(!ye||!Ne||!ne),onClick:async()=>{try{const he=await Ae.getToken(),nt=new FormData;nt.append("reason",z),nt.append("customer_notes",q),nt.append("refund_method",Y),nt.append("requested_amount",F.total_amount),Y==="esewa"&&nt.append("esewa_number",G),Y==="khalti"&&nt.append("khalti_number",J),Y==="bank"&&(nt.append("bank_account_name",ye),nt.append("bank_account_number",Ne),nt.append("bank_branch",ne)),ve.forEach((et,tt)=>{nt.append(`evidence_${tt}`,et)}),(await fetch(`${an.BASE_URL}/orders/${F.id}/return/`,{method:"POST",headers:{Authorization:`Token ${he}`,"ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"},body:nt})).ok&&(t({title:"Return Requested",description:"Your return request has been submitted successfully."}),U(!1),be(1,!0))}catch{t({title:"Error",description:"Failed to submit return request.",variant:"destructive"})}},children:"Submit Return Request"})]})]})}),s.jsx(An,{open:de,onOpenChange:Q,children:s.jsxs(wn,{side:"bottom",className:"h-[90vh] rounded-t-xl",children:[s.jsx(On,{className:"pb-4",children:s.jsxs(Rn,{className:"text-left",children:["Order Details - #",ae==null?void 0:ae.order_number]})}),ae&&s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Order Items"}),s.jsx("div",{className:"space-y-2",children:((ys=ae.items)==null?void 0:ys.map((he,nt)=>{var Fe,et,tt;return s.jsxs("div",{className:"py-1 border-b border-gray-100 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("img",{src:((tt=(et=(Fe=he.product_details)==null?void 0:Fe.images)==null?void 0:et[0])==null?void 0:tt.image_url)||"/placeholder-product.jpg",alt:he.product_name,className:"w-8 h-8 object-cover rounded"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:he.product_name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",he.quantity]}),s.jsxs("p",{className:"text-sm font-semibold text-emerald-600 mt-1",children:["Rs ",he.total_price]})]})]}),he.product_selections&&Object.keys(he.product_selections).length>0&&s.jsxs("div",{className:"text-xs text-blue-600 mt-2 bg-blue-50 p-2 rounded border border-blue-200",children:[s.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"Selected Variants:"}),(()=>{const qe=he.product_selections,ft=Object.keys(qe);if(ft.length===0)return null;const bt=ft[0];return(Array.isArray(qe[bt])?qe[bt]:[qe[bt]]).map((Wt,as)=>s.jsxs("div",{className:"mb-1 p-1 bg-white rounded border",children:[s.jsxs("span",{className:"font-medium text-blue-900",children:["Item ",as+1,":"]}),ft.map(ps=>{const We=Array.isArray(qe[ps])?qe[ps]:[qe[ps]];return s.jsxs("span",{className:"ml-2 capitalize",children:[ps,": ",s.jsx("span",{className:"font-medium",children:We[as]||We[0]})]},ps)})]},as))})()]})]},nt)}))||[]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Delivery Information"}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Address:"})," ",ae.delivery_address]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",ae.delivery_phone]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Name:"})," ",ae.delivery_name]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-3",children:"Payment Details"}),(()=>{var bt;const he=((bt=ae.items)==null?void 0:bt.reduce((Ft,Wt)=>Ft+parseFloat(Wt.delivery_fee||0),0))||0,nt=parseFloat(ae.delivery_fee||0),Fe=Math.max(he,nt),et=parseFloat(ae.subtotal||0),tt=parseFloat(ae.tax_amount||0),qe=et+tt,ft=qe+Fe;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200 mb-3",children:[s.jsxs("h4",{className:"font-semibold text-emerald-800 text-sm mb-2",children:["Bill Amount (Paid via ",ae.payment_method,")"]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["Rs ",et.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax:"}),s.jsxs("span",{children:["Rs ",tt.toFixed(2)]})]}),s.jsx("hr",{className:"my-1"}),s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx("span",{children:"Bill Total (Paid):"}),s.jsxs("span",{className:"text-emerald-600",children:["Rs ",qe.toFixed(2)]})]})]})]}),Fe>0&&s.jsx("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200 mb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-orange-800 text-base",children:"Delivery Fee"}),s.jsx("p",{className:"text-xs text-orange-700",children:ae.status==="delivered"?"Paid on delivery":"Pay on delivery"})]}),s.jsxs("span",{className:"font-bold text-lg text-orange-600",children:["Rs ",Fe.toFixed(2)]})]})}),s.jsx("hr",{className:"my-2"}),s.jsxs("div",{className:"flex justify-between font-semibold text-sm",children:[s.jsx("span",{children:"Grand Total:"}),s.jsxs("span",{children:["Rs ",ft.toFixed(2)]})]})]})})(),s.jsxs("div",{className:"mt-3 pt-2 border-t space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Payment Method:"}),s.jsx("span",{className:"capitalize",children:ae.payment_method})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Payment Status:"}),s.jsx(Ye,{variant:ae.payment_status==="paid"?"default":"secondary",className:"text-xs",children:ae.payment_status})]})]})]}),((ms=ae.refunds)==null?void 0:ms.map(he=>{var nt;return s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[s.jsx(Qa,{className:"h-4 w-4"}),"Return/Refund Details"]}),s.jsxs("div",{className:"space-y-3 text-xs",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Status:"}),s.jsx(Ye,{className:`text-xs ${he.status==="requested"?"bg-yellow-100 text-yellow-800":he.status==="approved"?"bg-green-100 text-green-800":he.status==="rejected"?"bg-red-100 text-red-800":he.status==="appeal"?"bg-purple-100 text-purple-800":he.status==="processed"?"bg-blue-100 text-blue-800":he.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:he.status.charAt(0).toUpperCase()+he.status.slice(1)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),s.jsx("p",{className:"text-gray-600 capitalize",children:he.reason.replace("_"," ")})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Requested Amount:"}),s.jsxs("p",{className:"text-gray-600",children:["Rs ",he.requested_amount]})]}),he.approved_amount&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Approved Amount:"}),s.jsxs("p",{className:"text-gray-600",children:["Rs ",he.approved_amount]})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[s.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Your Refund Details:"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Method:"})," ",he.refund_method]}),he.refund_method==="esewa"&&he.esewa_number&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"eSewa Number:"})," ",he.esewa_number]}),he.refund_method==="khalti"&&he.khalti_number&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Khalti Number:"})," ",he.khalti_number]}),he.refund_method==="bank"&&s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Account Name:"})," ",he.bank_account_name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Account Number:"})," ",he.bank_account_number]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Branch:"})," ",he.bank_branch]})]})]})]}),he.customer_notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Your Notes:"}),s.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:he.customer_notes})]}),he.admin_notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Vendor Response:"}),s.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:he.admin_notes})]}),((nt=he.evidence_photos)==null?void 0:nt.length)>0&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Evidence Documents:"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:he.evidence_photos.map((Fe,et)=>{var ft;const tt=(ft=Fe.filename)==null?void 0:ft.match(/\.(jpg|jpeg|png|gif|webp)$/i);let qe;return Fe.filename.startsWith("http")?qe=Fe.filename:qe=Qt(Fe.filename),s.jsxs("div",{className:"bg-white p-2 rounded border hover:shadow-md transition-shadow",children:[tt?s.jsxs("div",{className:"cursor-pointer mb-2 group",onClick:()=>{ge(qe),ce(!0)},children:[s.jsxs("div",{className:"relative overflow-hidden rounded",children:[s.jsx("img",{src:qe,alt:Fe.filename,className:"w-full h-20 object-cover rounded mb-1 group-hover:scale-105 transition-transform",onError:bt=>{bt.currentTarget.src="/placeholder-image.svg",bt.currentTarget.alt="Image not found"}}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center",children:s.jsx(qs,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),s.jsx("p",{className:"text-xs text-blue-600 font-medium",children:" Click to enlarge"})]}):s.jsx("div",{className:"w-full h-20 bg-gray-100 rounded mb-2 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>{window.open(qe,"_blank")},children:s.jsxs("div",{className:"text-center",children:[s.jsx(qt,{className:"h-6 w-6 text-gray-400 mx-auto mb-1"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Document"})]})}),s.jsx("p",{className:"font-medium text-xs truncate",title:Fe.filename,children:Fe.filename||`Document ${et+1}`}),s.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",Fe.uploaded_by]}),s.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",new Date(Fe.uploaded_at).toLocaleDateString()]})]},et)})})]}),he.status==="completed"&&s.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded p-2 mt-2",children:[s.jsx("p",{className:"text-xs text-emerald-800 font-medium mb-2",children:" Refund Completed"}),s.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"*Delivery charges are not included in refund amount"}),!he.customer_received_refund&&!he.support_contacted&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(te,{size:"sm",variant:"outline",className:"w-full text-orange-600 border-orange-200 hover:bg-orange-50",onClick:()=>{const Fe=` REFUND ISSUE REPORT

Order: #${ae.order_number}
Refund ID: ${he.id}
Amount: Rs ${he.requested_amount}
Status: ${he.status}
Method: ${he.refund_method}

Issue: I have not received my refund or there is an issue with the refund process. Please help resolve this matter.`;e(`/?support_message=${encodeURIComponent(Fe)}`)},children:"Report & Contact Support"}),s.jsx(te,{size:"sm",variant:"outline",className:"w-full text-green-600 border-green-200 hover:bg-green-50",onClick:async()=>{try{const{response:Fe}=await Ve(`/refunds/${he.id}/mark-received/`,{method:"POST"});Fe.ok&&(t({title:"Marked as Received",description:"Thank you for confirming receipt of your refund."}),be(1,!0),Q(!1))}catch{t({title:"Error",description:"Failed to mark refund as received.",variant:"destructive"})}},children:"Mark Received"})]}),he.customer_received_refund&&s.jsxs("p",{className:"text-xs text-green-700 font-medium",children:[" Marked as received on ",new Date(he.customer_received_at).toLocaleDateString()]}),he.support_contacted&&s.jsxs("div",{className:"text-xs text-orange-700",children:[s.jsxs("p",{className:"font-medium",children:[" Support contacted on ",new Date(he.support_contacted_at).toLocaleDateString()]}),s.jsx("p",{className:"mt-1 bg-white p-1 rounded",children:he.support_notes})]})]}),he.status==="processed"&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mt-2",children:[s.jsx("p",{className:"text-xs text-blue-800 font-medium",children:" Money Transferred"}),s.jsx("p",{className:"text-xs text-gray-600",children:"*Delivery charges are not included in refund amount"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500 border-t pt-2",children:[s.jsx("div",{children:s.jsxs("p",{children:["Requested: ",new Date(he.requested_at).toLocaleDateString()]})}),he.approved_at&&s.jsx("div",{children:s.jsxs("p",{children:["Approved: ",new Date(he.approved_at).toLocaleDateString()]})}),he.processed_at&&s.jsx("div",{children:s.jsxs("p",{children:["Processed: ",new Date(he.processed_at).toLocaleDateString()]})}),he.completed_at&&s.jsx("div",{children:s.jsxs("p",{children:["Completed: ",new Date(he.completed_at).toLocaleDateDate()]})}),he.appeal_at&&s.jsx("div",{children:s.jsxs("p",{children:["Appealed: ",new Date(he.appeal_at).toLocaleDateString()]})})]})]})]},he.id)}))||[]]})]})}),s.jsx(bc,{open:re,onOpenChange:ce,children:s.jsxs(tl,{className:"max-w-5xl max-h-[95vh] p-4",children:[s.jsx(sl,{className:"pb-4",children:s.jsxs(nl,{className:"flex items-center gap-2",children:[s.jsx(qs,{className:"h-5 w-5"}),"Evidence Document Preview"]})}),s.jsx("div",{className:"flex justify-center items-center bg-gray-50 rounded-lg p-4",children:s.jsx("img",{src:fe,alt:"Evidence Preview",className:"max-w-full max-h-[75vh] object-contain rounded shadow-lg",onError:he=>{he.currentTarget.src="/placeholder-image.svg",he.currentTarget.alt="Image not found"}})}),s.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>window.open(fe,"_blank"),children:[s.jsx(Th,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{const he=document.createElement("a");he.href=fe,he.download="evidence-document",he.click()},children:[s.jsx(qt,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})})]})})}const pY=[{id:1,type:"home",label:"Home",name:"John Doe",phone:"+977 9841234567",address:"123 Thamel Street, Thamel",city:"Kathmandu",landmark:"Near Durbar Square",isDefault:!0},{id:2,type:"work",label:"Office",name:"John Doe",phone:"+977 9841234567",address:"456 Lazimpat Road, Lazimpat",city:"Kathmandu",landmark:"Opposite British Embassy",isDefault:!1}],gY=e=>{switch(e){case"home":return s.jsx(ew,{className:"h-5 w-5"});case"work":return s.jsx(zF,{className:"h-5 w-5"});case"other":return s.jsx(dr,{className:"h-5 w-5"});default:return s.jsx(es,{className:"h-5 w-5"})}};function vY(){const e=lt(),[t,n]=_.useState(pY),r=()=>{console.log("Add new address")},a=l=>{console.log("Edit address",l)},i=l=>{n(t.filter(d=>d.id!==l))},o=l=>{n(t.map(d=>({...d,isDefault:d.id===l})))};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"My Addresses"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:s.jsx(Ns,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[t.length>0?t.map(l=>s.jsxs($e,{className:"hover:shadow-md transition-shadow",children:[s.jsx(Ct,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:gY(l.type)}),s.jsx("div",{children:s.jsxs(Tt,{className:"text-base flex items-center gap-2",children:[l.label,l.isDefault&&s.jsx(Ye,{variant:"secondary",className:"text-xs",children:"Default"})]})})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>a(l.id),className:"p-2",children:s.jsx(Ch,{className:"h-4 w-4"})}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>i(l.id),className:"p-2 text-red-600 hover:text-red-700",children:s.jsx(ro,{className:"h-4 w-4"})})]})]})}),s.jsxs(ze,{className:"space-y-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:l.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:l.phone}),s.jsx("p",{className:"text-sm",children:l.address}),s.jsx("p",{className:"text-sm",children:l.city}),l.landmark&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Landmark: ",l.landmark]})]}),!l.isDefault&&s.jsx(te,{variant:"outline",size:"sm",onClick:()=>o(l.id),className:"w-full mt-3",children:"Set as Default"})]})]},l.id)):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(es,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No addresses found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your delivery addresses to make ordering faster"}),s.jsxs(te,{onClick:r,children:[s.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Add New Address"]})]}),t.length>0&&s.jsx($e,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:s.jsx(ze,{className:"p-6 text-center",children:s.jsxs(te,{variant:"ghost",onClick:r,className:"w-full h-16 flex flex-col items-center gap-2",children:[s.jsx(Ns,{className:"h-6 w-6"}),s.jsx("span",{children:"Add New Address"})]})})})]}),s.jsx(Nn,{})]})}const xY=[{id:1,type:"card",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2026,isDefault:!0,cardholderName:"John Doe"},{id:2,type:"card",last4:"8888",brand:"Mastercard",expiryMonth:8,expiryYear:2025,isDefault:!1,cardholderName:"John Doe"}],yY=e=>s.jsx(bl,{className:"h-5 w-5"}),bY=e=>`   ${e}`;function wY(){const e=lt(),[t,n]=_.useState(xY),r=()=>{console.log("Add new payment method")},a=l=>{console.log("Edit payment method",l)},i=l=>{n(t.filter(d=>d.id!==l))},o=l=>{n(t.map(d=>({...d,isDefault:d.id===l})))};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Payment Methods"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:s.jsx(Ns,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[t.length>0?t.map(l=>s.jsxs($e,{className:"hover:shadow-md transition-shadow",children:[s.jsx(Ct,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:yY(l.brand)}),s.jsxs("div",{children:[s.jsxs(Tt,{className:"text-base flex items-center gap-2",children:[l.brand," ",bY(l.last4),l.isDefault&&s.jsx(Ye,{variant:"secondary",className:"text-xs",children:"Default"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires ",String(l.expiryMonth).padStart(2,"0"),"/",l.expiryYear]})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>a(l.id),className:"p-2",children:s.jsx(Ch,{className:"h-4 w-4"})}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>i(l.id),className:"p-2 text-red-600 hover:text-red-700",children:s.jsx(ro,{className:"h-4 w-4"})})]})]})}),s.jsxs(ze,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(er,{className:"h-4 w-4"}),s.jsx("span",{children:"Secured with 256-bit SSL encryption"})]}),!l.isDefault&&s.jsx(te,{variant:"outline",size:"sm",onClick:()=>o(l.id),className:"w-full",children:"Set as Default"})]})]},l.id)):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(bl,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No payment methods"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Add a payment method to make checkout faster"}),s.jsxs(te,{onClick:r,children:[s.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Add Payment Method"]})]}),t.length>0&&s.jsx($e,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:s.jsx(ze,{className:"p-6 text-center",children:s.jsxs(te,{variant:"ghost",onClick:r,className:"w-full h-16 flex flex-col items-center gap-2",children:[s.jsx(Ns,{className:"h-6 w-6"}),s.jsx("span",{children:"Add New Payment Method"})]})})}),s.jsx($e,{className:"bg-green-50 border-green-200",children:s.jsx(ze,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(er,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-800 text-sm",children:"Secure Payments"}),s.jsx("p",{className:"text-green-700 text-xs",children:"All payment information is encrypted and secure"})]})]})})})]}),s.jsx(Nn,{})]})}const _Y=[{id:"orders",title:"Orders & Delivery",icon:Yr,description:"Track orders, delivery issues, cancellations",articles:["How to track my order?","Delivery time and charges","Cancel or modify order","Refund policy"]},{id:"payment",title:"Payment & Billing",icon:vs,description:"Payment methods, billing, refunds",articles:["Payment methods accepted","Failed payment issues","Refund process","Billing disputes"]},{id:"account",title:"Account & Profile",icon:WF,description:"Account settings, profile management",articles:["Update profile information","Change password","Manage addresses","Privacy settings"]},{id:"technical",title:"Technical Support",icon:Eh,description:"App issues, login problems, bugs",articles:["App not working","Login issues","Payment errors","Report a bug"]}],jY=[{icon:Xr,title:"Live Chat",description:"Chat with our support team",action:"Start Chat",available:!0},{icon:Eh,title:"Phone Support",description:"Call us for immediate help",action:"Call Now",available:!0},{icon:XF,title:"Email Support",description:"Send us an email",action:"Send Email",available:!0}];function NY(){const e=lt(),[t,n]=_.useState(""),r=i=>{switch(i){case"Start Chat":console.log("Starting live chat");break;case"Call Now":window.open("tel:+977-1-234567");break;case"Send Email":window.open("mailto:support@kathsnap.com");break}},a=_Y.filter(i=>i.title.toLowerCase().includes(t.toLowerCase())||i.description.toLowerCase().includes(t.toLowerCase())||i.articles.some(o=>o.toLowerCase().includes(t.toLowerCase())));return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Help & Support"}),s.jsx("div",{className:"w-10"})," "]})}),s.jsx("div",{className:"p-4 bg-white border-b",children:s.jsxs("div",{className:"relative",children:[s.jsx(Yo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(je,{placeholder:"Search help articles...",value:t,onChange:i=>n(i.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[a.map(i=>{const o=i.icon;return s.jsxs($e,{className:"hover:shadow-md transition-shadow",children:[s.jsx(Ct,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:s.jsx(o,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Tt,{className:"text-base",children:i.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]}),s.jsx($c,{className:"h-5 w-5 text-muted-foreground"})]})}),s.jsx(ze,{children:s.jsxs("div",{className:"space-y-2",children:[i.articles.slice(0,2).map((l,d)=>s.jsxs("div",{className:"text-sm text-muted-foreground hover:text-primary cursor-pointer",children:[" ",l]},d)),i.articles.length>2&&s.jsxs("div",{className:"text-sm text-primary font-medium cursor-pointer",children:["View all ",i.articles.length," articles"]})]})})]},i.id)}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{className:"text-base",children:"Contact Support"})}),s.jsx(ze,{className:"space-y-3",children:jY.map((i,o)=>{const l=i.icon;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(i.action),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:s.jsx(l,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:i.title}),s.jsx("div",{className:"text-xs text-muted-foreground",children:i.description})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[i.available&&s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx($c,{className:"h-4 w-4 text-muted-foreground"})]})]},o)})})]}),s.jsx($e,{className:"bg-primary/5 border-primary/20",children:s.jsx(ze,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Yr,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-primary text-sm",children:"Support Hours"}),s.jsx("p",{className:"text-primary/80 text-xs",children:"Monday - Sunday: 6:00 AM - 10:00 PM"})]})]})})})]}),s.jsx(Nn,{})]})}const wk=()=>{var F,B,z,H;const e=lt(),[t]=ng(),n=t.get("vendor"),r=t.get("conversation");_.useEffect(()=>{(async()=>{if(!await Ae.getToken()){const Y=window.location.pathname+window.location.search;e(`/login?redirect=${encodeURIComponent(Y)}`)}})()},[e]);const[a,i]=_.useState(null),[o,l]=_.useState([]),[d,h]=_.useState([]),[f,u]=_.useState(""),[m,p]=_.useState(!0),[w,v]=_.useState(1),[x,y]=_.useState(!1),[b,j]=_.useState(!1),[N,S]=_.useState(null),[P,T]=_.useState(0),E=_.useRef(null),I=_.useRef(null);_.useEffect(()=>{(async()=>{await O(),await R(),us.initialize(),n&&Z(parseInt(n)),r&&X(parseInt(r))})();const W=Y=>{if(Y.key==="newMessage"&&Y.newValue){const V=JSON.parse(Y.newValue);V.sender!==(N==null?void 0:N.username)&&us.notifyNewMessage(V.sender,V.content,V.conversationId.toString(),"customer")}};return window.addEventListener("storage",W),()=>window.removeEventListener("storage",W)},[n,r]);const O=async()=>{try{if(!await Ae.getToken())return;const{response:W,data:Y}=await Ve("/profile/");W.ok&&Y&&S(Y)}catch(q){console.error("Failed to fetch current user:",q)}};_.useEffect(()=>{a&&D(a.id)},[a]),_.useEffect(()=>{if(!a)return;const q=async()=>{try{const V=await ar.getMessages(a.id);let G=[];Array.isArray(V)?G=V.reverse():V!=null&&V.results&&Array.isArray(V.results)&&(G=V.results.reverse()),G.length!==P&&(h(G),T(G.length))}catch(V){console.error("Failed to refresh messages:",V)}};q();const W=setInterval(q,5e3),Y=async()=>{document.hidden||q()};return document.addEventListener("visibilitychange",Y),()=>{clearInterval(W),document.removeEventListener("visibilitychange",Y)}},[a,P]);const R=async(q=1,W=!1)=>{try{const{response:Y,data:V}=await Ve(`messaging/conversations/?page=${q}&page_size=20`);if(!Y.ok)throw new Error("Failed to fetch conversations");let G=(V==null?void 0:V.results)||[];q===1&&(G.some(J=>{var le,ye;return((le=J.other_participant)==null?void 0:le.username)==="admin"||((ye=J.other_participant)==null?void 0:ye.id)===1})||(G=[{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}},...G])),l(W?ie=>[...ie,...G]:G),y(!!(V!=null&&V.next)),v(q)}catch(Y){console.error("Failed to load conversations:",Y),q===1&&l([{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}}])}finally{p(!1),j(!1)}},C=async()=>{b||!x||(j(!0),await R(w+1,!0))},D=async q=>{try{const W=await ar.getMessages(q);let Y=[];Array.isArray(W)?Y=W.reverse():W!=null&&W.results&&Array.isArray(W.results)&&(Y=W.results.reverse()),h(Y),T(Y.length)}catch(W){console.error("Failed to load messages:",W),h([]),T(0)}},A=async()=>{if(!(!f.trim()||!a))try{const q=await ar.sendMessage({conversation_id:a.id,message_type:"text",content:f});h(Y=>[...Y,q.message]);const W={conversationId:a.id,sender:(N==null?void 0:N.username)||"Unknown",content:f,timestamp:new Date().toISOString()};localStorage.setItem("newMessage",JSON.stringify(W)),setTimeout(()=>localStorage.removeItem("newMessage"),100);try{const Y=`${an.BASE_URL}/broadcast/`;await fetch(Y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:(N==null?void 0:N.username)||"Unknown",content:f,conversation_id:a.id})})}catch(Y){console.log("Cross-domain broadcast failed:",Y)}u("")}catch(q){console.error("Failed to send message:",q)}},M=async q=>{var Y;const W=(Y=q.target.files)==null?void 0:Y[0];if(!(!W||!a))try{const V=await ar.sendMessage({conversation_id:a.id,message_type:W.type.startsWith("image/")?"image":"file",file:W});h(G=>[...G,V.message])}catch(V){console.error("Failed to send file:",V)}},Z=async q=>{try{const W=await ar.getOrCreateConversation(q);i(W)}catch(W){console.error("Failed to create conversation:",W)}},X=async q=>{try{await new Promise(Y=>{const V=()=>{o.length>0||!m?Y(!0):setTimeout(V,100)};V()});const W=o.find(Y=>Y.id===q);W&&i(W)}catch(W){console.error("Failed to open conversation:",W)}},U=()=>{var q;(q=E.current)==null||q.scrollIntoView({behavior:"smooth"})};return _.useEffect(()=>{U()},[d]),m?s.jsx("div",{className:"h-screen bg-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),s.jsx("p",{children:"Loading conversations..."})]})}):a?s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{i(null),e("/messages",{replace:!0})},children:s.jsx(Ht,{className:"h-4 w-4"})}),s.jsxs(fi,{className:"h-10 w-10",children:[s.jsx(Wr,{src:Qt((F=a.other_participant)==null?void 0:F.profile_picture)}),s.jsx(mi,{children:(z=(B=a.other_participant)==null?void 0:B.username)==null?void 0:z.charAt(0)})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-sm",children:(H=a.other_participant)==null?void 0:H.username}),s.jsx("p",{className:"text-xs text-gray-500",children:"Online"})]}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>D(a.id),className:"p-2",children:s.jsx(La,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.map(q=>{const W=N&&q.sender.id===N.id;return s.jsx("div",{className:`w-full flex ${W?"justify-end":"justify-start"} mb-2`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow ${W?"bg-blue-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[q.message_type==="text"&&s.jsx("p",{className:"text-sm",children:q.content}),q.message_type==="image"&&s.jsx("div",{className:"space-y-2",children:s.jsx("img",{src:Qt(q.file_url),alt:"Shared image",className:"rounded max-w-full h-auto"})}),q.message_type==="file"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sy,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:q.file_name})]}),s.jsxs("div",{className:"flex items-center justify-end mt-1 gap-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(q.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),W&&s.jsx("span",{className:`text-xs ${q.is_read?"text-blue-500":"text-gray-400"}`,children:q.is_read?"":""})]})]})},q.id)}),s.jsx("div",{ref:E})]}),s.jsxs("div",{className:"bg-white border-t p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{var q;return(q=I.current)==null?void 0:q.click()},children:s.jsx(Sy,{className:"h-4 w-4"})}),s.jsx(je,{value:f,onChange:q=>u(q.target.value),placeholder:"Type a message...",className:"flex-1",onKeyPress:q=>q.key==="Enter"&&A()}),s.jsx(te,{onClick:A,disabled:!f.trim(),children:s.jsx(zp,{className:"h-4 w-4"})})]}),s.jsx("input",{ref:I,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:M,className:"hidden"})]})]}):s.jsxs("div",{className:"h-screen bg-white flex flex-col",children:[s.jsx("div",{className:"border-b p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e("/home"),children:s.jsx(Ht,{className:"h-4 w-4"})}),s.jsx("h2",{className:"text-lg font-semibold",children:"Messages"})]})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(Bp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No conversations yet"}),s.jsx("p",{className:"text-sm",children:"Start messaging with vendors!"})]}):o.map((q,W)=>{var Y,V,G,ie,J,le;return s.jsxs("div",{className:"flex items-center gap-3 p-4 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{q.id===0?Z(1):i(q)},children:[s.jsxs("div",{className:"relative",children:[s.jsxs(fi,{className:"h-12 w-12",children:[s.jsx(Wr,{src:Qt((Y=q.other_participant)==null?void 0:Y.profile_picture)}),s.jsx(mi,{children:(G=(V=q.other_participant)==null?void 0:V.username)==null?void 0:G.charAt(0)})]}),s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm truncate",children:(ie=q.other_participant)==null?void 0:ie.username}),s.jsx("span",{className:"text-xs text-gray-500",children:q.last_message?new Date(q.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:((J=q.last_message)==null?void 0:J.content)||((le=q.last_message)==null?void 0:le.file_name)||"Start conversation"})]}),q.unread_count>0&&s.jsx(Ye,{className:"bg-blue-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center",children:q.unread_count})]},q.id)}),x&&s.jsx("div",{className:"p-4 text-center",children:s.jsx(te,{onClick:C,disabled:b,variant:"outline",className:"w-full",children:b?"Loading...":"Load More Conversations"})})]})]})},SY=`
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
`;if(typeof document<"u"){const e=document.createElement("style");e.textContent=SY,document.head.appendChild(e)}const _0=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3},kY=()=>{const e=27.6398805,t=85.3303725,n=27.66424179701499,r=85.3465231243003,a=_0(e,t,n,r);console.log(` Your coordinates test: ${a.toFixed(3)} km (Google shows: 5.1 km)`);const i={lat:40.7128,lon:-74.006},o={lat:34.0522,lon:-118.2437},l=_0(i.lat,i.lon,o.lat,o.lon);console.log(`Test: NYC to LA = ${l.toFixed(2)} km (Google: ~3944 km)`),console.log(` Verify on Google Maps: https://www.google.com/maps/dir/${e},${t}/${n},${r}`)};function CY(){const e=lt(),{categoryName:t}=sg(),[n,r]=_.useState({products:[]}),[a,i]=_.useState(!1),[o,l]=_.useState(ht.getLocation()),[d,h]=_.useState({page:1,hasMore:!0}),[f,u]=_.useState(new Set),[m,p]=_.useState(!1),[w,v]=_.useState(""),[x,y]=_.useState([]),[b,j]=_.useState(""),[N,S]=_.useState({}),{addToCart:P}=Bn(),{toast:T}=ns(),E=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];_.useEffect(()=>{const U=ht.subscribe(l);return ht.startTracking(),kY(),O(),A(),I(),U},[t]),_.useEffect(()=>{O(1)},[w,t,b]),_.useEffect(()=>{o&&(console.log(" Location updated, refetching data:",o),O(1))},[o]);const I=async()=>{try{console.log(" Fetching subcategories for:",t);const F=await(await fetch(`${Qe}categories/`)).json();console.log(" Categories API response:",F);const z=(F.categories||F.results||[]).find(H=>H.name.toLowerCase()===t.toLowerCase());if(console.log(" Found category:",z),z!=null&&z.subcategories)console.log(" Setting subcategories:",z.subcategories),y(z.subcategories);else{console.log(" No subcategories found for category, trying alternative endpoint");const H=await fetch(`${Qe}categories/${t}/subcategories/`);if(H.ok){const q=await H.json();console.log(" Subcategories API response:",q),y(q.subcategories||q.results||q||[])}}}catch(U){console.error("Failed to fetch subcategories:",U)}},O=async(U=1)=>{i(!0);try{const F=localStorage.getItem("token"),B=F?{Authorization:`Token ${F}`}:{},z=ht.getLocation();console.log(" Frontend location check:",{userLocation:o,currentLocation:z});const H=new URLSearchParams({page:U.toString(),page_size:"100"});z?(H.append("latitude",z.latitude.toString()),H.append("longitude",z.longitude.toString()),console.log(" Sending location to API:",z)):console.log(" No location available for API call");const W=await(await fetch(`${Qe}search/products/?${H}`,{headers:B})).json(),Y=R(W.results||[]);if(U===1){r({products:Y});const ie=Y.map(J=>J.id);M(ie)}else r(ie=>({products:[...ie.products,...Y]}));const G=(W.results||[]).filter(ie=>{const J=ie.category&&ie.category.toLowerCase()===t.toLowerCase(),le=!b||ie.subcategory&&ie.subcategory.toLowerCase()===b.toLowerCase();return J&&le}).length;h({page:U,hasMore:W.next!==null&&G>=10})}catch(F){console.error("Fetch error:",F)}finally{i(!1)}},R=U=>{const F=ht.getLocation(),B=q=>{if(!q)return 0;if(q.reviews&&Array.isArray(q.reviews)&&q.reviews.length>0){const W=q.reviews.map(Y=>Number(Y.rating??Y.stars??Y.score??0)).filter(Y=>!isNaN(Y));if(W.length>0){const Y=W.reduce((V,G)=>V+G,0);return Math.max(0,Math.min(5,Y/W.length))}}return q.average_rating!=null?Number(q.average_rating):q.rating!=null?Number(q.rating):0};let H=U.filter(q=>{const W=q.category&&q.category.toLowerCase()===t.toLowerCase(),Y=!b||q.subcategory&&q.subcategory.toLowerCase()===b.toLowerCase();return W&&Y}).map(q=>{var ie,J;const W=((ie=q.images)==null?void 0:ie.find(le=>le.is_primary))||((J=q.images)==null?void 0:J[0]);let Y="N/A",V=1/0;F&&q.vendor_latitude&&q.vendor_longitude&&(V=_0(F.latitude,F.longitude,q.vendor_latitude,q.vendor_longitude),Y=`${V.toFixed(1)} km`);const G=yo(q,q.vendor_delivery_fee);return{id:q.id,name:q.name,vendor:q.vendor_name||"Unknown Vendor",vendor_id:q.vendor_id,price:`${q.price}`,priceValue:parseFloat(q.price),image:(W==null?void 0:W.image_url)||"/placeholder-product.jpg",rating:B(q),distance:Y,distanceValue:V,deliveryTime:"30-45 mins",inStock:q.quantity>0,category:q.category,totalSold:q.total_sold||0,deliveryInfo:G,vendorOnline:q.vendor_online!==!1,deliveryRadius:$G(q)??1/0,free_delivery:q.free_delivery,custom_delivery_fee_enabled:q.custom_delivery_fee_enabled,custom_delivery_fee:q.custom_delivery_fee}}).filter(q=>q.inStock?q.vendorOnline?q.distanceValue!==1/0&&q.distanceValue>q.deliveryRadius?(console.log(` Excluding product ${q.name} - outside delivery radius (${q.distanceValue.toFixed(1)}km > ${q.deliveryRadius}km)`),!1):!0:(console.log(` Excluding product ${q.name} - vendor offline`),!1):(console.log(` Excluding product ${q.name} - out of stock`),!1));return w==="price_low"?H.sort((q,W)=>q.priceValue-W.priceValue):w==="price_high"?H.sort((q,W)=>W.priceValue-q.priceValue):H.sort((q,W)=>q.distanceValue-W.distanceValue),H},C=()=>{!a&&d.hasMore&&O(d.page+1)},D=U=>{e(`/product/${U}`)},A=async()=>{var F;const U=localStorage.getItem("token");if(U)try{const B=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${U}`}});if(B.ok){const z=await B.json(),H=new Set(((F=z.results)==null?void 0:F.map(q=>q.product.id))||[]);u(H)}}catch(B){console.error("Failed to fetch favorites:",B)}},M=async U=>{try{const F=U.map(H=>yi.getProductReviews(H)),z=(await Promise.all(F)).reduce((H,q)=>{var W,Y;return H[q.product_id]={rating:((W=q.aggregate)==null?void 0:W.average_rating)||0,total:((Y=q.aggregate)==null?void 0:Y.total_reviews)||0},H},{});S(H=>({...H,...z}))}catch(F){console.error("Failed to load product reviews:",F)}},Z=async(U,F)=>{F.stopPropagation();const B=localStorage.getItem("token");if(!B){T({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const z=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${B}`},body:JSON.stringify({product_id:U})});if(z.ok){const H=await z.json(),q=new Set(f);H.is_favorite?q.add(U):q.delete(U),u(q),T({title:H.is_favorite?"Added to Favorites":"Removed from Favorites",description:H.message})}}catch{T({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},X=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:n.products.map(U=>{var F,B,z,H,q,W;return s.jsxs($e,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>D(U.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:U.image,alt:U.name,className:"w-full h-full object-cover",onError:Y=>{Y.target.src="/placeholder-product.jpg"}}),s.jsx(te,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:Y=>Z(U.id,Y),children:s.jsx(dr,{className:`h-4 w-4 ${f.has(U.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Ye,{variant:U.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:U.inStock?"In Stock":"Out of Stock"})]}),s.jsxs(ze,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:U.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:U.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:(((F=N[U.id])==null?void 0:F.rating)??U.rating??0).toFixed(1)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{children:U.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:U.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[U.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Qn,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${(B=U.deliveryInfo)!=null&&B.isFreeDelivery?"bg-green-100 text-green-700":((z=U.deliveryInfo)==null?void 0:z.deliveryFee)===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(H=U.deliveryInfo)!=null&&H.isFreeDelivery?"Free":((q=U.deliveryInfo)==null?void 0:q.deliveryFee)===null?"TBD":`${(W=U.deliveryInfo)==null?void 0:W.deliveryFee}`})]})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(te,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!U.inStock,onClick:async Y=>{if(Y.stopPropagation(),!await Ae.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:U.id,quantity:1},path:"/cart",timestamp:Date.now()})),e("/login");return}try{await P(U.id,1),T({title:"Added to Cart",description:`${U.name} added to your cart`}),e("/cart")}catch(G){console.error("Error adding to cart:",G)}},children:[s.jsx(rn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(te,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!U.inStock,onClick:async Y=>{if(Y.stopPropagation(),!await Ae.getToken()){const G={id:U.id,name:U.name,price:U.price.replace("",""),quantity:1,vendor_name:U.vendor,vendor_id:U.vendor_id,images:[{image_url:U.image}],free_delivery:U.free_delivery,custom_delivery_fee_enabled:U.custom_delivery_fee_enabled,custom_delivery_fee:U.custom_delivery_fee};localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:G,path:"/checkout",timestamp:Date.now()})),e("/login");return}e("/checkout",{state:{directBuy:!0,product:{id:U.id,name:U.name,price:U.price.replace("",""),quantity:1,vendor_name:U.vendor,vendor_id:U.vendor_id,images:[{image_url:U.image}],free_delivery:U.free_delivery,custom_delivery_fee_enabled:U.custom_delivery_fee_enabled,custom_delivery_fee:U.custom_delivery_fee}}})},children:[s.jsx(Ns,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},U.id)})}),d.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(te,{onClick:C,disabled:a,variant:"outline",children:[a?s.jsx(As,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:t}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.products.length," products found"]})]}),s.jsx(te,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>p(!0),children:s.jsx(aa,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-3 pb-3",children:s.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide no-scrollbar",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[s.jsx(te,{variant:b===""?"default":"outline",size:"sm",className:"whitespace-nowrap h-8 text-xs flex-shrink-0 min-w-fit px-3",onClick:()=>j(""),children:"All"}),Array.isArray(x)&&x.map((U,F)=>s.jsx(te,{variant:b===(U.name||U)?"default":"outline",size:"sm",className:"whitespace-nowrap h-8 text-xs flex-shrink-0 min-w-fit px-3",onClick:()=>j(U.name||U),children:U.name||U},U.id||U.name||F))]})})]}),s.jsxs("div",{className:"p-4 pb-20 pt-32",children:[n.products.length>0&&s.jsx("div",{className:"mb-6",children:X()}),n.products.length===0&&!a&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No products found"}),s.jsxs("p",{className:"text-muted-foreground",children:["No products available in ",t," category"]})]}),a&&n.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(As,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),m&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>p(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:U=>U.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>p(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:E.map(U=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:U.value,checked:w===U.value,onChange:F=>v(F.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:U.label})]},U.value))})]}),s.jsx(te,{variant:"outline",className:"w-full",onClick:()=>{v("")},children:"Clear All Filters"})]})]})}),s.jsx(Nn,{})]})}const EY=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3};function TY(){const e=lt(),[t,n]=_.useState({products:[]}),[r,a]=_.useState(!1),[i,o]=_.useState(ht.getLocation()),[l,d]=_.useState({page:1,hasMore:!0}),[h,f]=_.useState(new Set),[u,m]=_.useState(!1),[p,w]=_.useState(""),[v,x]=_.useState({}),{addToCart:y}=Bn(),{toast:b}=ns(),j=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];_.useEffect(()=>{const C=ht.subscribe(o);return N(),I(),C},[]),_.useEffect(()=>{N(1)},[p]),_.useEffect(()=>{i&&(console.log(" Location updated, refetching data:",i),N(1))},[i]);const N=async(C=1)=>{a(!0);try{const D=localStorage.getItem("token"),A=D?{Authorization:`Token ${D}`}:{},M=ht.getLocation();console.log(" Frontend location check:",{userLocation:i,currentLocation:M});const Z=new URLSearchParams({page:C.toString(),page_size:"20"});M?(Z.append("latitude",M.latitude.toString()),Z.append("longitude",M.longitude.toString()),console.log(" Sending location to API:",M)):console.log(" No location available for API call");const U=await(await fetch(`${Qe}search/products/?${Z}`,{headers:A})).json(),F=S(U.results||[]);if(C===1){n({products:F});const B=F.map(z=>z.id);E(B)}else n(B=>({products:[...B.products,...F]}));d({page:C,hasMore:U.next!==null})}catch(D){console.error("Fetch error:",D)}finally{a(!1)}},S=C=>{const D=ht.getLocation();let A=C.filter(X=>X.featured===!0);const M=X=>{if(!X)return 0;if(X.reviews&&Array.isArray(X.reviews)&&X.reviews.length>0){const U=X.reviews.map(F=>Number(F.rating??F.stars??F.score??0)).filter(F=>!isNaN(F));if(U.length>0){const F=U.reduce((B,z)=>B+z,0);return Math.max(0,Math.min(5,F/U.length))}}return X.average_rating!=null?Number(X.average_rating):X.rating!=null?Number(X.rating):0};let Z=A.map(X=>{var z,H;const U=((z=X.images)==null?void 0:z.find(q=>q.is_primary))||((H=X.images)==null?void 0:H[0]);let F="N/A",B=1/0;return D&&X.vendor_latitude&&X.vendor_longitude&&(B=EY(D.latitude,D.longitude,X.vendor_latitude,X.vendor_longitude),F=`${B.toFixed(1)} km`),{id:X.id,name:X.name,vendor:X.vendor_name||"Unknown Vendor",distance:F,distanceValue:B,rating:M(X),price:`${X.price}`,priceValue:parseFloat(X.price),image:(U==null?void 0:U.image_url)||"/placeholder-product.jpg",inStock:X.quantity>0,category:X.category,featured:X.featured}});return p==="price_low"?Z.sort((X,U)=>X.priceValue-U.priceValue):p==="price_high"?Z.sort((X,U)=>U.priceValue-X.priceValue):Z.sort((X,U)=>X.distanceValue-U.distanceValue),Z},P=()=>{!r&&l.hasMore&&N(l.page+1)},T=C=>{e(`/product/${C}`)},E=async C=>{try{const D=C.map(Z=>yi.getProductReviews(Z)),M=(await Promise.all(D)).reduce((Z,X)=>{var U,F;return Z[X.product_id]={rating:((U=X.aggregate)==null?void 0:U.average_rating)||0,total:((F=X.aggregate)==null?void 0:F.total_reviews)||0},Z},{});x(Z=>({...Z,...M}))}catch(D){console.error("Failed to load product reviews:",D)}},I=async()=>{var D;const C=localStorage.getItem("token");if(C)try{const A=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${C}`}});if(A.ok){const M=await A.json(),Z=new Set(((D=M.results)==null?void 0:D.map(X=>X.product.id))||[]);f(Z)}}catch(A){console.error("Failed to fetch favorites:",A)}},O=async(C,D)=>{D.stopPropagation();const A=localStorage.getItem("token");if(!A){b({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const M=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${A}`},body:JSON.stringify({product_id:C})});if(M.ok){const Z=await M.json(),X=new Set(h);Z.is_favorite?X.add(C):X.delete(C),f(X),b({title:Z.is_favorite?"Added to Favorites":"Removed from Favorites",description:Z.message})}}catch{b({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},R=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:t.products.map(C=>{var D;return s.jsxs($e,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>T(C.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:C.image,alt:C.name,className:"w-full h-full object-cover",onError:A=>{A.target.src="/placeholder-product.jpg"}}),s.jsx(te,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:A=>O(C.id,A),children:s.jsx(dr,{className:`h-4 w-4 ${h.has(C.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Ye,{variant:C.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:C.inStock?"In Stock":"Out of Stock"})]}),s.jsxs(ze,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:C.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:C.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:(((D=v[C.id])==null?void 0:D.rating)??C.rating??0).toFixed(1)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{children:C.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:C.price}),s.jsx("span",{className:"text-xs text-muted-foreground",children:C.deliveryTime})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(te,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!C.inStock,onClick:A=>{A.stopPropagation(),y(C.id,1)},children:[s.jsx(rn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(te,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!C.inStock,onClick:A=>{A.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:C.id,name:C.name,price:C.price.replace("",""),quantity:1,vendor_name:C.vendor,images:[{image_url:C.image}]}}})},children:[s.jsx(Ns,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},C.id)})}),l.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(te,{onClick:P,disabled:r,variant:"outline",children:[r?s.jsx(As,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Featured Products"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),s.jsx(te,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>m(!0),children:s.jsx(aa,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&s.jsx("div",{className:"mb-6",children:R()}),t.products.length===0&&!r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No featured products"}),s.jsx("p",{className:"text-muted-foreground",children:"Featured products will appear here when available"})]}),r&&t.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(As,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),u&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>m(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:C=>C.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:j.map(C=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:C.value,checked:p===C.value,onChange:D=>w(D.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:C.label})]},C.value))})]}),s.jsx(te,{variant:"outline",className:"w-full",onClick:()=>{w("")},children:"Clear All Filters"})]})]})}),s.jsx(Nn,{})]})}const PY=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3};function AY(){const e=lt(),[t,n]=_.useState({products:[]}),[r,a]=_.useState(!1),[i,o]=_.useState(ht.getLocation()),[l,d]=_.useState({page:1,hasMore:!0}),[h,f]=_.useState(new Set),[u,m]=_.useState(!1),[p,w]=_.useState(""),{addToCart:v}=Bn(),{toast:x}=ns(),y=[{value:"",label:"Default (Rating)"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];_.useEffect(()=>{const I=ht.subscribe(o);return b(),P(),I},[]),_.useEffect(()=>{b(1)},[p]),_.useEffect(()=>{i&&(console.log(" Location updated, refetching data:",i),b(1))},[i]);const b=async(I=1)=>{a(!0);try{const O=localStorage.getItem("token"),R=O?{Authorization:`Token ${O}`,"ngrok-skip-browser-warning":"true"}:{"ngrok-skip-browser-warning":"true"},C=ht.getLocation();console.log(" Frontend location check:",{userLocation:i,currentLocation:C});const D=new URLSearchParams({page:I.toString(),page_size:"20"});C?(D.append("latitude",C.latitude.toString()),D.append("longitude",C.longitude.toString()),console.log(" Sending location to API:",C)):console.log(" No location available for API call");const M=await(await fetch(`${Qe}search/products/?${D}`,{headers:R})).json(),Z=j(M.results||[]);n(I===1?{products:Z}:X=>({products:[...X.products,...Z]})),d({page:I,hasMore:M.next!==null})}catch(O){console.error("Fetch error:",O)}finally{a(!1)}},j=I=>{const O=ht.getLocation(),R=D=>{if(!D)return 0;if(D.reviews&&Array.isArray(D.reviews)&&D.reviews.length>0){const A=D.reviews.map(M=>Number(M.rating??M.stars??M.score??0)).filter(M=>!isNaN(M));if(A.length>0){const M=A.reduce((Z,X)=>Z+X,0);return Math.max(0,Math.min(5,M/A.length))}}return D.average_rating!=null?Number(D.average_rating):D.rating!=null?Number(D.rating):0};let C=I.map(D=>{var X,U;const A=((X=D.images)==null?void 0:X.find(F=>F.is_primary))||((U=D.images)==null?void 0:U[0]);let M="N/A",Z=1/0;return O&&D.vendor_latitude&&D.vendor_longitude&&(Z=PY(O.latitude,O.longitude,D.vendor_latitude,D.vendor_longitude),M=`${Z.toFixed(1)} km`),{id:D.id,name:D.name,vendor:D.vendor_name||"Unknown Vendor",distance:M,distanceValue:Z,rating:R(D),price:`${D.price}`,priceValue:parseFloat(D.price),image:(A==null?void 0:A.image_url)||"/placeholder.svg",inStock:D.quantity>0,category:D.category}});return p==="price_low"?C.sort((D,A)=>D.priceValue-A.priceValue):p==="price_high"?C.sort((D,A)=>A.priceValue-D.priceValue):C.sort((D,A)=>A.rating-D.rating),C},N=()=>{!r&&l.hasMore&&b(l.page+1)},S=I=>{e(`/product/${I}`)},P=async()=>{var O;const I=localStorage.getItem("token");if(I)try{const R=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${I}`}});if(R.ok){const C=await R.json(),D=new Set(((O=C.results)==null?void 0:O.map(A=>A.product.id))||[]);f(D)}}catch(R){console.error("Failed to fetch favorites:",R)}},T=async(I,O)=>{O.stopPropagation();const R=localStorage.getItem("token");if(!R){x({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const C=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${R}`},body:JSON.stringify({product_id:I})});if(C.ok){const D=await C.json(),A=new Set(h);D.is_favorite?A.add(I):A.delete(I),f(A),x({title:D.is_favorite?"Added to Favorites":"Removed from Favorites",description:D.message})}}catch{x({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},E=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:t.products.map(I=>s.jsxs($e,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>S(I.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:I.image,alt:I.name,className:"w-full h-full object-cover",onError:O=>{const R=O.target;R.src="/placeholder.svg",R.onerror=null}}),s.jsx(te,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:O=>T(I.id,O),children:s.jsx(dr,{className:`h-4 w-4 ${h.has(I.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Ye,{variant:I.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:I.inStock?"In Stock":"Out of Stock"})]}),s.jsxs(ze,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:I.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:I.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:I.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{children:I.distance})]})]}),s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsx("span",{className:"font-bold text-primary text-sm",children:I.price})})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(te,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!I.inStock,onClick:async O=>{if(O.stopPropagation(),!localStorage.getItem("token")){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:I.id,quantity:1},path:"/cart",timestamp:Date.now()})),e("/login");return}v(I.id,1)},children:[s.jsx(rn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(te,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!I.inStock,onClick:async O=>{if(O.stopPropagation(),!localStorage.getItem("token")){const C={id:I.id,name:I.name,price:I.price.replace("",""),quantity:1,vendor_name:I.vendor,images:[{image_url:I.image}]};localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:C,path:"/checkout",timestamp:Date.now()})),e("/login");return}e("/checkout",{state:{directBuy:!0,product:{id:I.id,name:I.name,price:I.price.replace("",""),quantity:1,vendor_name:I.vendor,images:[{image_url:I.image}]}}})},children:[s.jsx(Ns,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},I.id))}),l.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(te,{onClick:N,disabled:r,variant:"outline",children:[r?s.jsx(As,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Trending Products"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),s.jsx(te,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>m(!0),children:s.jsx(aa,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&s.jsx("div",{className:"mb-6",children:E()}),t.products.length===0&&!r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No trending products"}),s.jsx("p",{className:"text-muted-foreground",children:"Trending products will appear here when available"})]}),r&&t.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(As,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),u&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>m(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:I=>I.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:y.map(I=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:I.value,checked:p===I.value,onChange:O=>w(O.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:I.label})]},I.value))})]}),s.jsx(te,{variant:"outline",className:"w-full",onClick:()=>{w("")},children:"Clear All Filters"})]})]})}),s.jsx(Nn,{})]})}const OY=(e,t,n,r)=>{const a=parseFloat(e),i=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=x=>x*(Math.PI/180),f=h(o-a),u=h(l-i),m=h(a),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),v=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*v/1e3};function RY(){const e=lt(),[t,n]=_.useState({products:[]}),[r,a]=_.useState(!1),[i,o]=_.useState(ht.getLocation()),[l,d]=_.useState({page:1,hasMore:!0}),[h,f]=_.useState(new Set),[u,m]=_.useState(!1),[p,w]=_.useState(""),{addToCart:v}=Bn(),{toast:x}=ns(),y=[{value:"",label:"Default (Newest)"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];_.useEffect(()=>{const I=ht.subscribe(o);return b(),P(),I},[]),_.useEffect(()=>{b(1)},[p]),_.useEffect(()=>{i&&(console.log(" Location updated, refetching data:",i),b(1))},[i]);const b=async(I=1)=>{a(!0);try{const O=localStorage.getItem("token"),R=O?{Authorization:`Token ${O}`}:{},C=ht.getLocation();console.log(" Frontend location check:",{userLocation:i,currentLocation:C});const D=new URLSearchParams({page:I.toString(),page_size:"100"});C?(D.append("latitude",C.latitude.toString()),D.append("longitude",C.longitude.toString()),console.log(" Sending location to API:",C)):console.log(" No location available for API call");const M=await(await fetch(`${Qe}search/products/?${D}`,{headers:R})).json(),Z=j(M.results||[]);n(I===1?{products:Z}:X=>({products:[...X.products,...Z]})),d({page:I,hasMore:M.next!==null})}catch(O){console.error("Fetch error:",O)}finally{a(!1)}},j=I=>{const O=ht.getLocation(),R=D=>{if(!D)return 0;if(D.reviews&&Array.isArray(D.reviews)&&D.reviews.length>0){const A=D.reviews.map(M=>Number(M.rating??M.stars??M.score??0)).filter(M=>!isNaN(M));if(A.length>0){const M=A.reduce((Z,X)=>Z+X,0);return Math.max(0,Math.min(5,M/A.length))}}return D.average_rating!=null?Number(D.average_rating):D.rating!=null?Number(D.rating):0};let C=I.map(D=>{var U,F;const A=((U=D.images)==null?void 0:U.find(B=>B.is_primary))||((F=D.images)==null?void 0:F[0]);let M="N/A",Z=1/0;O&&D.vendor_latitude&&D.vendor_longitude&&(Z=OY(O.latitude,O.longitude,D.vendor_latitude,D.vendor_longitude),M=`${Z.toFixed(1)} km`);const X=yo(D,D.vendor_delivery_fee);return{id:D.id,name:D.name,vendor:D.vendor_name||"Unknown Vendor",vendor_id:D.vendor_id,price:`Rs ${D.price}`,priceValue:parseFloat(D.price),image:(A==null?void 0:A.image_url)||"/placeholder-product.jpg",rating:R(D),distance:M,distanceValue:Z,deliveryTime:"30-45 mins",inStock:D.quantity>0,category:D.category,totalSold:D.total_sold||0,deliveryInfo:X,vendorOnline:D.vendor_online!==!1,deliveryRadius:10,free_delivery:D.free_delivery,custom_delivery_fee_enabled:D.custom_delivery_fee_enabled,custom_delivery_fee:D.custom_delivery_fee,createdAt:D.created_at}}).filter(D=>D.inStock?D.vendorOnline?!0:(console.log(` Excluding product ${D.name} - vendor offline`),!1):(console.log(` Excluding product ${D.name} - out of stock`),!1));return p==="price_low"?C.sort((D,A)=>D.priceValue-A.priceValue):p==="price_high"?C.sort((D,A)=>A.priceValue-D.priceValue):C.sort((D,A)=>new Date(A.createdAt).getTime()-new Date(D.createdAt).getTime()),C},N=()=>{!r&&l.hasMore&&b(l.page+1)},S=I=>{e(`/product/${I}`)},P=async()=>{var O;const I=localStorage.getItem("token");if(I)try{const R=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${I}`}});if(R.ok){const C=await R.json(),D=new Set(((O=C.results)==null?void 0:O.map(A=>A.product.id))||[]);f(D)}}catch(R){console.error("Failed to fetch favorites:",R)}},T=async(I,O)=>{O.stopPropagation();const R=localStorage.getItem("token");if(!R){x({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const C=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${R}`},body:JSON.stringify({product_id:I})});if(C.ok){const D=await C.json(),A=new Set(h);D.is_favorite?A.add(I):A.delete(I),f(A),x({title:D.is_favorite?"Added to Favorites":"Removed from Favorites",description:D.message})}}catch{x({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},E=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:t.products.map(I=>{var O,R,C,D,A;return s.jsxs($e,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>S(I.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:I.image,alt:I.name,className:"w-full h-full object-cover",onError:M=>{M.target.src="/placeholder-product.jpg"}}),s.jsx(te,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:M=>T(I.id,M),children:s.jsx(dr,{className:`h-4 w-4 ${h.has(I.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Ye,{variant:I.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:I.inStock?"In Stock":"Out of Stock"})]}),s.jsxs(ze,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:I.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:I.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:I.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{children:I.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:I.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[I.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Qn,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${(O=I.deliveryInfo)!=null&&O.isFreeDelivery?"bg-green-100 text-green-700":((R=I.deliveryInfo)==null?void 0:R.deliveryFee)===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(C=I.deliveryInfo)!=null&&C.isFreeDelivery?"Free":((D=I.deliveryInfo)==null?void 0:D.deliveryFee)===null?"TBD":`Rs ${(A=I.deliveryInfo)==null?void 0:A.deliveryFee}`})]})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(te,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!I.inStock,onClick:async M=>{if(M.stopPropagation(),!await Ae.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:I.id,quantity:1},path:"/cart",timestamp:Date.now()})),e("/login");return}try{await v(I.id,1),x({title:"Added to Cart",description:`${I.name} added to your cart`}),e("/cart")}catch(X){console.error("Error adding to cart:",X)}},children:[s.jsx(rn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(te,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!I.inStock,onClick:async M=>{if(M.stopPropagation(),!await Ae.getToken()){const X={id:I.id,name:I.name,price:I.price.replace("Rs ",""),quantity:1,vendor_name:I.vendor,vendor_id:I.vendor_id,images:[{image_url:I.image}],free_delivery:I.free_delivery,custom_delivery_fee_enabled:I.custom_delivery_fee_enabled,custom_delivery_fee:I.custom_delivery_fee};localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:X,path:"/checkout",timestamp:Date.now()})),e("/login");return}e("/checkout",{state:{directBuy:!0,product:{id:I.id,name:I.name,price:I.price.replace("Rs ",""),quantity:1,vendor_name:I.vendor,vendor_id:I.vendor_id,images:[{image_url:I.image}],free_delivery:I.free_delivery,custom_delivery_fee_enabled:I.custom_delivery_fee_enabled,custom_delivery_fee:I.custom_delivery_fee}}})},children:[s.jsx(Ns,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},I.id)})}),l.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(te,{onClick:N,disabled:r,variant:"outline",children:[r?s.jsx(As,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Latest Products"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),s.jsx(te,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>m(!0),children:s.jsx(aa,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&s.jsx("div",{className:"mb-6",children:E()}),t.products.length===0&&!r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No products found"}),s.jsx("p",{className:"text-muted-foreground",children:"Latest products will appear here when available"})]}),r&&t.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(As,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),u&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>m(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:I=>I.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:y.map(I=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:I.value,checked:p===I.value,onChange:O=>w(O.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:I.label})]},I.value))})]}),s.jsx(te,{variant:"outline",className:"w-full",onClick:()=>{w("")},children:"Clear All Filters"})]})]})}),s.jsx(Nn,{})]})}function LY(){const e=lt(),[t,n]=_.useState([]),[r,a]=_.useState(""),[i,o]=_.useState(!1),[l,d]=_.useState(!1),[h,f]=_.useState(null),[u,m]=_.useState(!0),p=_.useRef(null),w=()=>{var S;(S=p.current)==null||S.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{w()},[t]),_.useEffect(()=>{v()},[]),_.useEffect(()=>{l&&x()},[l]);const v=async()=>{const S=await Ae.isAuthenticated();d(S)},x=async()=>{try{m(!0);const{response:S,data:P}=await Ve("/messaging/conversations/");if(S.ok&&(P!=null&&P.results)){console.log("Conversations data:",P);const T=P.results.find(E=>{var I;return(I=E.participants)==null?void 0:I.some(O=>O.username==="ezeywaya"||O.email==="ezeywaya@gmail.com")});if(console.log("Looking for ezeywaya conversation:",T),console.log("All conversations:",P.results.map(E=>{var I;return{id:E.id,participants:(I=E.participants)==null?void 0:I.map(O=>({username:O.username,email:O.email,user_type:O.user_type}))}})),console.log("Superuser conversation found:",T),T){f(T.id);const{response:E,data:I}=await Ve(`/messaging/conversations/${T.id}/messages/`);console.log("Messages response:",E,I),E.ok&&(I!=null&&I.results)&&(console.log("All messages in admin conversation:",I.results),n(I.results.reverse()))}else console.log("No superuser conversation found")}}catch(S){console.error("Failed to load messages:",S)}finally{m(!1)}},y=async()=>{if(r.trim()){if(!l){e("/login?redirect=/support");return}o(!0);try{let S=h;if(S)await Ve("/messaging/messages/send/",{method:"POST",body:JSON.stringify({conversation_id:S,content:r.trim(),message_type:"text"})});else{const{response:P,data:T}=await Ve("/messaging/conversations/create/",{method:"POST",body:JSON.stringify({message:r.trim()})});P.ok&&T&&(S=T.conversation_id,f(S))}n(P=>[...P,{id:Date.now(),message:r.trim(),sender:{user_type:"customer"},created_at:new Date().toISOString()}]),a(""),setTimeout(()=>x(),1e3)}catch(S){console.error("Failed to send message:",S)}finally{o(!1)}}},b=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),y())},j=S=>new Date(S).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),N=S=>{const P=new Date(S),T=new Date,E=new Date(T);return E.setDate(E.getDate()-1),P.toDateString()===T.toDateString()?"Today":P.toDateString()===E.toDateString()?"Yesterday":P.toLocaleDateString()};return l?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold",children:"Customer Support"}),s.jsx("div",{className:"w-10"})]})}),s.jsxs("div",{className:"flex flex-col h-[calc(100vh-120px)]",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading messages..."})]}):t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Xr,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Welcome to Support"}),s.jsx("p",{className:"text-muted-foreground",children:"Send us a message and we'll get back to you as soon as possible."})]}):t.map((S,P)=>{const T=P===0||N(S.created_at)!==N(t[P-1].created_at);return s.jsxs("div",{children:[T&&s.jsx("div",{className:"text-center my-4",children:s.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded-full",children:N(S.created_at)})}),s.jsx("div",{className:"flex justify-start mb-2",children:s.jsxs("div",{className:"flex items-start gap-2 max-w-xs",children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-primary text-primary-foreground",children:s.jsx(Jr,{className:"h-4 w-4"})}),s.jsxs("div",{className:"rounded-lg px-3 py-2 bg-primary text-primary-foreground",children:[s.jsx("p",{className:"text-sm",children:S.content||S.message}),s.jsx("p",{className:"text-xs mt-1 text-primary-foreground/70",children:j(S.created_at)})]})]})})]},S.id)}),s.jsx("div",{ref:p})]}),s.jsx("div",{className:"border-t bg-card p-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(je,{value:r,onChange:S=>a(S.target.value),onKeyPress:b,placeholder:"Type your message...",className:"flex-1",disabled:i}),s.jsx(te,{onClick:y,disabled:!r.trim()||i,className:"px-4",children:i?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):s.jsx(zp,{className:"h-4 w-4"})})]})})]}),s.jsx(Nn,{})]}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold",children:"Customer Support"}),s.jsx("div",{className:"w-10"})]})}),s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsx($e,{className:"w-full max-w-md mx-4",children:s.jsxs(ze,{className:"p-6 text-center",children:[s.jsx(Xr,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Sign In Required"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Please sign in to access customer support"}),s.jsx(te,{onClick:()=>e("/login?redirect=/support"),className:"w-full",children:"Sign In"})]})})})]})}function IY(){const e=lt(),t=Fn(),{login:n}=$n(),[r,a]=_.useState("password"),[i,o]=_.useState(""),[l,d]=_.useState(""),[h,f]=_.useState(""),[u,m]=_.useState(""),[p,w]=_.useState(!1),[v,x]=_.useState(!1),[y,b]=_.useState(!1),[j,N]=_.useState(""),[S,P]=_.useState(""),[T,E]=_.useState(!1),[I,O]=_.useState(null),[R,C]=_.useState(!1);_.useState(!1);const[D,A]=_.useState(!1),[M,Z]=_.useState(null),[X,U]=_.useState(!1),[F,B]=_.useState(null);_.useEffect(()=>{var _e;const Ne=sessionStorage.getItem("privacyAgreementState");if(Ne){const ne=JSON.parse(Ne);B({userId:ne.userId,userType:ne.userType,hasVendorProfile:ne.hasVendorProfile}),U(!0),sessionStorage.removeItem("privacyAgreementState");return}(_e=t.state)!=null&&_e.successMessage&&(P(t.state.successMessage),window.history.replaceState({},document.title)),z(),qc.initialize().catch(console.error),FP.initialize().catch(console.error)},[t.state]);const z=async()=>{var Ne;try{if(await Ae.isAuthenticated()){const ne=await Ae.getUser();console.log("Existing user:",ne),(ne==null?void 0:ne.user_type)==="vendor"&&((Ne=ne==null?void 0:ne.available_roles)!=null&&Ne.includes("vendor"))&&e("/vendor/dashboard")}}catch(_e){console.log("No existing auth or error:",_e)}},H=async()=>{var Ne;b(!0),N("");try{await Ae.clearAuth();const{response:_e,data:ne}=await Ve("/login/",{method:"POST",body:JSON.stringify({username:i,password:l})},!1);if(!_e.ok)throw new Error((ne==null?void 0:ne.error)||"Login failed");if(ne.needs_privacy_agreement){B({userId:ne.user_id,userType:ne.user_type,hasVendorProfile:ne.has_vendor_profile}),U(!0);return}if(ne.needs_verification)E(!0),O(ne.user_id),x(!0),N("Email not verified. Please verify your email with the OTP sent.");else{const Ce={...ne.user,available_roles:ne.available_roles||["customer"],current_role:ne.user.user_type||"customer"};Ce.user_type==="customer"&&Ce.available_roles.includes("vendor")&&(Ce.user_type="vendor"),await n(Ce,ne.token),await Ae.setAuth(ne.token,Ce),await(await Ue(()=>Promise.resolve().then(()=>Zs),void 0)).simplePersistentAuth.saveVendorLogin(ne.token,Ce),console.log("Login response:",ne),console.log("profile_exists:",ne.profile_exists,"is_approved:",ne.is_approved),ne.profile_exists?ne.profile_exists&&ne.is_approved?(console.log("Profile exists and approved, redirecting to dashboard"),e("/vendor/dashboard")):ne.profile_exists&&ne.is_rejected?(console.log("Profile exists but rejected"),e("/vendor/rejection",{state:{rejectionReason:ne.rejection_reason,rejectionDate:ne.rejection_date}})):ne.profile_exists&&!ne.is_approved&&(console.log("Profile exists but not approved"),N("Your vendor application is pending approval. You will be notified once approved."),await Ae.clearAuth()):(console.log("No profile exists, redirecting to onboarding"),e("/vendor/onboarding"))}}catch(_e){console.error("Vendor login error:",_e),(Ne=_e.message)!=null&&Ne.includes("fetch")?N("Connection failed. Please check if the server is running on localhost:8000"):N(_e.message||"Login failed. Please try again.")}finally{b(!1)}},q=async()=>{b(!0),N("");try{const{response:Ne,data:_e}=await Ve("/send-otp/",{method:"POST",body:JSON.stringify({email:i})},!1);if(!Ne.ok)throw new Error((_e==null?void 0:_e.error)||"Failed to send OTP");x(!0),N("OTP sent successfully")}catch(Ne){N(Ne.message)}finally{b(!1)}},W=async()=>{b(!0),N("");try{const{response:Ne,data:_e}=await Ve("/verify-otp/",{method:"POST",body:JSON.stringify({email:i,otp:h})},!1);if(!Ne.ok)throw new Error((_e==null?void 0:_e.error)||"OTP verification failed");if(_e.needs_privacy_agreement){B({userId:_e.user_id,userType:_e.user_type,hasVendorProfile:_e.has_vendor_profile}),U(!0);return}const ne={..._e.user||{id:_e.user_id,email:i,user_type:"vendor"},available_roles:_e.available_roles||["vendor"],user_type:_e.user.user_type||"vendor",current_role:_e.user.user_type||"vendor"};await n(ne,_e.token),await Ae.setAuth(_e.token,ne),await(await Ue(()=>Promise.resolve().then(()=>Zs),void 0)).simplePersistentAuth.saveVendorLogin(_e.token,ne),console.log("OTP verification response:",_e),console.log("profile_exists:",_e.profile_exists,"is_approved:",_e.is_approved),_e.profile_exists?_e.profile_exists&&_e.is_approved?(console.log("Profile exists and approved, redirecting to dashboard"),e("/vendor/dashboard")):_e.profile_exists&&_e.is_rejected?(console.log("Profile exists but rejected"),e("/vendor/rejection",{state:{rejectionReason:_e.rejection_reason,rejectionDate:_e.rejection_date}})):_e.profile_exists&&!_e.is_approved&&(console.log("Profile exists but not approved"),N("Your vendor application is pending approval. You will be notified once approved."),await Ae.clearAuth()):(console.log("No profile exists, redirecting to onboarding"),e("/vendor/onboarding"))}catch(Ne){console.error("Vendor OTP verification error:",Ne),N(Ne.message||"OTP verification failed. Please try again.")}finally{b(!1)}},Y=async()=>{var Ne;C(!0),N("");try{const _e=await qc.signIn();if(_e.success&&_e.user&&_e.token){let ne={..._e.user,available_roles:_e.user.available_roles||["customer"],current_role:_e.user.current_role||_e.user.user_type||"customer"};if(ne.user_type==="customer"&&ne.available_roles.includes("vendor")&&(ne.user_type="vendor"),await n(ne,_e.token),await Ae.setAuth(_e.token,ne),await n(ne,_e.token),(Ne=ne.available_roles)!=null&&Ne.includes("vendor")){const{simplePersistentAuth:Ce}=await Ue(async()=>{const{simplePersistentAuth:ve}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:ve}},void 0);await Ce.saveVendorLogin(_e.token,ne)}_e.user.user_created||!_e.user.phone_number?(Z({userData:ne,token:_e.token,profileData:_e.user}),A(!0)):V(_e.user)}else _e.needs_privacy_agreement?(B({userId:_e.user_id,userType:_e.user_type,hasVendorProfile:_e.has_vendor_profile}),U(!0)):N(_e.error||"Google login failed")}catch{N("Google login failed. Please try again.")}finally{C(!1)}},V=Ne=>{Ne.profile_exists?Ne.profile_exists&&Ne.is_approved?e("/vendor/dashboard"):Ne.profile_exists&&Ne.is_rejected?e("/vendor/rejection",{state:{rejectionReason:Ne.rejection_reason,rejectionDate:Ne.rejection_date}}):Ne.profile_exists&&!Ne.is_approved&&(N("Your vendor application is pending approval. You will be notified once approved."),Ae.clearAuth()):e("/vendor/onboarding")},G=()=>{A(!1),M!=null&&M.profileData&&V(M.profileData)},ie=()=>{A(!1),M!=null&&M.profileData&&V(M.profileData)},J=(Ne,_e)=>{U(!1),B(null),V(Ne)},le=()=>{U(!1),B(null),N("Privacy policy agreement is required to login")},ye=async()=>{b(!0),N("");try{const{response:Ne,data:_e}=await Ve("/update-email/",{method:"POST",body:JSON.stringify({email:u,user_id:I})},!1);if(!Ne.ok)throw new Error((_e==null?void 0:_e.error)||"Failed to update email");o(u),m(""),x(!0),N("Email updated. OTP sent to new email.")}catch(Ne){N(Ne.message)}finally{b(!1)}},ke=()=>{e("/vendor/signup")};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[s.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 left-4 w-8 h-8 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors z-10",children:s.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),s.jsx(DP,{currentType:"vendor"}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("div",{className:"w-full max-w-80 mx-auto px-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsx("img",{src:hi,alt:"ezeyway",className:"w-16 h-16 mx-auto mb-6"})}),s.jsx("div",{className:"text-center mb-4",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 bg-blue-50 px-3 py-1 rounded-full",children:"Vendor Login"})}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"flex space-x-8",children:[s.jsx("button",{onClick:()=>a("password"),className:`pb-2 text-sm font-medium transition-colors ${r==="password"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Password"}),s.jsx("button",{onClick:()=>a("otp"),className:`pb-2 text-sm font-medium transition-colors ${r==="otp"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"OTP"})]})}),r==="password"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:i,onChange:Ne=>o(Ne.target.value),placeholder:"Username or Email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),!T&&s.jsxs("div",{className:"relative",children:[s.jsx(je,{type:p?"text":"password",value:l,onChange:Ne=>d(Ne.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>w(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),S&&s.jsx("p",{className:"text-green-600 text-center",children:S}),j&&s.jsx("p",{className:"text-red-600 text-center",children:j}),T&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(je,{type:"email",value:u,onChange:Ne=>m(Ne.target.value),placeholder:"Update email if incorrect",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(te,{onClick:ye,disabled:!u||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Updating...":"Update Email and Resend OTP"}),s.jsx(je,{type:"text",value:h,onChange:Ne=>f(Ne.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),s.jsx(te,{onClick:W,disabled:h.length!==6||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Verifying...":"Verify OTP"}),s.jsx("button",{onClick:q,disabled:y,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}),!T&&s.jsx(te,{onClick:H,disabled:!i||!l||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Logging in...":"Login"})]}),r==="otp"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"email",value:i,onChange:Ne=>o(Ne.target.value),placeholder:"Enter your email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),v?s.jsxs(s.Fragment,{children:[s.jsx(je,{type:"text",value:h,onChange:Ne=>f(Ne.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),S&&s.jsx("p",{className:"text-green-600 text-center",children:S}),j&&s.jsx("p",{className:"text-red-600 text-center",children:j}),s.jsx(te,{onClick:W,disabled:h.length!==6||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Verifying...":"Verify & Login"}),s.jsx("button",{onClick:q,disabled:y,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}):s.jsx(te,{onClick:q,disabled:!i||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Sending...":"Send OTP"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 to-indigo-100 text-gray-500",children:"or"})})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:Y,disabled:R,className:"w-12 h-12 bg-white hover:bg-gray-50 border border-gray-300 rounded-full flex items-center justify-center transition-colors shadow-sm",children:R?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):s.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})})})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("button",{onClick:ke,className:"text-blue-600 hover:text-blue-700 text-sm block mx-auto",children:"Don't have an account? Sign up"}),s.jsx("button",{onClick:()=>e("/privacy-policy"),className:"text-gray-500 hover:text-gray-700 text-xs block mx-auto",children:"Privacy Policy"})]})]})})}),D&&M&&s.jsx($P,{user:M.userData,onComplete:G,onSkip:ie}),X&&F&&s.jsx(GP,{userId:F.userId,userType:F.userType,hasVendorProfile:F.hasVendorProfile,onComplete:J,onCancel:le})]})}function MY(){const e=lt(),[t,n]=_.useState(1),[r,a]=_.useState(""),[i,o]=_.useState(""),[l,d]=_.useState(""),[h,f]=_.useState(""),[u,m]=_.useState(""),[p,w]=_.useState(!1),[v,x]=_.useState(!1),[y,b]=_.useState(""),[j,N]=_.useState(!1),S=async()=>{var O,R,C;x(!0),b("");try{const D=await fetch(Qe+"register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,email:r,password:l,user_type:"vendor"})}),A=await D.json();if(!D.ok){const M=((O=A.username)==null?void 0:O[0])||((R=A.email)==null?void 0:R[0])||A.message||((C=Object.values(A)[0])==null?void 0:C[0])||"Failed to register";throw new Error(M)}n(2)}catch(D){b(D.message)}finally{x(!1)}},P=async O=>{x(!0),b("");try{const R=await fetch(Qe+"verify-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:O})}),C=await R.json();if(!R.ok)throw new Error(C.error||"Verification failed");localStorage.setItem("token",C.token),e("/vendor/onboarding")}catch(R){b(R.message)}finally{x(!1)}},T=O=>{m(O),O.length===6&&P(O)},E=async()=>{x(!0),b("");try{const O=await fetch(Qe+"send-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),R=await O.json();if(!O.ok)throw new Error(R.error||"Failed to resend OTP");b("OTP resent successfully")}catch(O){b(O.message)}finally{x(!1)}},I=()=>{e("/vendor/login")};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[s.jsx("button",{onClick:I,className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition-colors",children:" Back"}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"w-full max-w-80 mx-auto px-4",children:[t===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:hi,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Join as Seller"})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"email",value:r,onChange:O=>a(O.target.value),placeholder:"Enter your email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(je,{type:"text",value:i,onChange:O=>o(O.target.value),placeholder:"Choose username",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"relative",children:[s.jsx(je,{type:p?"text":"password",value:l,onChange:O=>d(O.target.value),placeholder:"Create password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>w(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsx(je,{type:"password",value:h,onChange:O=>f(O.target.value),placeholder:"Confirm password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"flex items-start space-x-2 w-80",children:[s.jsx("input",{type:"checkbox",id:"agreeToTerms",checked:j,onChange:O=>N(O.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 mt-1"}),s.jsxs("label",{htmlFor:"agreeToTerms",className:"text-sm text-gray-700",children:["I agree to the"," ",s.jsx("button",{type:"button",onClick:()=>e("/privacy-policy"),className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})," ","and Terms & Conditions"]})]}),y&&s.jsx("p",{className:"text-red-600 text-center",children:y}),s.jsx(te,{onClick:S,disabled:!r||!i||!l||!h||l!==h||!j||v,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:v?"Creating Account...":"Join as Seller"})]})]}),t===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:hi,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Email"}),s.jsxs("p",{className:"text-gray-600 mt-2",children:["Code sent to ",r]})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(je,{type:"text",value:u,onChange:O=>T(O.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest w-80"}),v&&s.jsx("div",{className:"text-center text-blue-600",children:"Verifying..."}),y&&s.jsx("p",{className:"text-red-600 text-center",children:y}),s.jsx("button",{onClick:()=>n(1),className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Change details"}),s.jsx("button",{onClick:E,disabled:v,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend code"})]})]})]})})]})}const DY=Fh.divIcon({className:"custom-marker",html:'<div style="background-color: #ff0000; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]});function FY(){var C,D;const e=lt(),n=(C=Fn().state)==null?void 0:C.isUpdate,[r,a]=_.useState(0),[i,o]=_.useState({location:{lat:27.7172,lng:85.324,address:""},shopName:"",ownerName:"",phone:"",email:"",shopAddress:"",city:"",state:"",pincode:"",shopRegDoc:null,citizenshipFront:null,citizenshipBack:null,shopImages:[],existingDocuments:{panReg:null,citizenshipFront:null,citizenshipBack:null},existingShopImages:[],bankAccount:"",accountHolderName:"",bankName:"",ifscCode:"",gstNumber:"",panNumber:"",deliveryRadius:"",minOrderAmount:"",vendorType:"",categories:[],description:"",referralCode:""}),[l,d]=_.useState(""),[h,f]=_.useState(!1),[u,m]=_.useState(""),[p,w]=_.useState(""),[v,x]=_.useState([]),y=["Location","Shop Info","Address","Documents","Shop Images","Payment","Business Type","Categories","Review"],b=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"manufacturer",label:"Manufacturer"},{value:"service_provider",label:"Service Provider"},{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"}];_.useEffect(()=>{const A=async()=>{try{const Z=await fetch(Qe+"categories/"),X=await Z.json();Z.ok&&x(X.categories.map(U=>U.name))}catch(Z){console.error("Error fetching categories:",Z)}},M=async()=>{if(n)try{const Z=localStorage.getItem("token"),X=await fetch(Qe+"vendor-profiles/",{headers:{Authorization:`Token ${Z}`}});if(X.ok){const U=await X.json(),F=U.results&&U.results.length>0?U.results[0]:null;F&&o(B=>{var z,H,q,W;return{...B,shopName:F.business_name||"",ownerName:F.owner_name||"",phone:F.business_phone||"",email:F.business_email||"",shopAddress:F.business_address||"",city:F.city||"",state:F.state||"",pincode:F.pincode||"",panNumber:F.pan_number||"",gstNumber:F.gst_number||"",bankAccount:F.account_number||"",accountHolderName:F.account_holder_name||"",bankName:F.bank_name||"",ifscCode:F.ifsc_code||"",deliveryRadius:F.delivery_radius||"",minOrderAmount:F.min_order_amount||"",vendorType:F.business_type||"",categories:F.categories||[],description:F.description||"",location:{lat:F.latitude||27.7172,lng:F.longitude||85.324,address:F.location_address||""},existingDocuments:{panReg:F.business_license_file_url||null,citizenshipFront:((H=(z=F.documents)==null?void 0:z.find(Y=>{var V;return(V=Y.document_url)==null?void 0:V.includes("citizenship_front")}))==null?void 0:H.document_url)||null,citizenshipBack:((W=(q=F.documents)==null?void 0:q.find(Y=>{var V;return(V=Y.document_url)==null?void 0:V.includes("citizenship_back")}))==null?void 0:W.document_url)||null},existingShopImages:F.shop_images||[]}})}}catch(Z){console.error("Error fetching profile:",Z)}};A(),M()},[n]);const j=({lat:A,lng:M})=>(IL().setView([A,M],13),null),N=()=>(ML({click(A){const{lat:M,lng:Z}=A.latlng;o(X=>({...X,location:{...X.location,lat:M,lng:Z}})),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${M}&lon=${Z}`).then(X=>X.json()).then(X=>{X.display_name&&o(U=>({...U,location:{...U.location,address:X.display_name}}))}).catch(X=>console.error("Error fetching address:",X))}}),null),S=()=>{d(""),navigator.geolocation?navigator.geolocation.getCurrentPosition(A=>{const{latitude:M,longitude:Z}=A.coords;o(X=>({...X,location:{...X.location,lat:M,lng:Z}})),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${M}&lon=${Z}`).then(X=>X.json()).then(X=>{X.display_name&&o(U=>({...U,location:{...U.location,address:X.display_name}}))}).catch(X=>{console.error("Error fetching address:",X),d("Unable to fetch address for this location.")})},A=>{switch(console.error("Geolocation error:",A),A.code){case A.PERMISSION_DENIED:d("Location access denied. Please allow location permissions.");break;case A.POSITION_UNAVAILABLE:d("Location information is unavailable.");break;case A.TIMEOUT:d("The request to get your location timed out.");break;default:d("An unknown error occurred while fetching your location.");break}}):d("Geolocation is not supported by your browser.")},P=()=>{const A=[{field:"shopName",label:"Shop Name"},{field:"ownerName",label:"Owner Name"},{field:"email",label:"Email"},{field:"phone",label:"Phone"},{field:"panNumber",label:"PAN Number"},{field:"shopAddress",label:"Shop Address"},{field:"city",label:"City"},{field:"state",label:"State"},{field:"pincode",label:"PIN Code"},{field:"vendorType",label:"Business Type"}];for(const{field:Z,label:X}of A)if(!i[Z])return m(`${X} is required.`),!1;return i.location.address?i.shopImages.length+(n?i.existingShopImages.length:0)<4?(m("Please ensure you have at least 4 shop images total."),!1):i.panNumber.length!==9?(m("PAN number must be exactly 9 characters."),!1):!0:(m("Location address is required."),!1)},T=()=>{switch(m(""),r){case 0:if(!i.location.address)return m("Please select a location."),!1;break;case 1:if(!i.shopName||!i.ownerName||!i.phone||!i.email||!i.panNumber)return m("Please fill in all required shop information including PAN number."),!1;if(i.panNumber.length!==9)return m("PAN number must be exactly 9 characters."),!1;break;case 2:if(!i.shopAddress||!i.city||!i.state||!i.pincode)return m("Please fill in all address fields."),!1;break;case 4:if(i.shopImages.length+(n?i.existingShopImages.length:0)<4)return m("Please ensure you have at least 4 shop images total."),!1;break;case 6:if(!i.vendorType)return m("Please select a business type."),!1;break;case 7:if(i.categories.length===0)return m("Please select at least one category."),!1;break}return!0},E=async()=>{if(r<y.length-1)T()&&a(r+1);else{if(console.log("Starting form submission..."),!P()){console.log("Validation failed:",u);return}f(!0),m(""),w("");const A=new FormData;A.append("business_name",i.shopName),A.append("owner_name",i.ownerName),A.append("business_email",i.email),A.append("business_phone",i.phone),A.append("business_address",i.shopAddress),A.append("location_address",i.location.address),A.append("city",i.city),A.append("state",i.state),A.append("pincode",i.pincode),A.append("latitude",i.location.lat.toString()),A.append("longitude",i.location.lng.toString()),A.append("business_type",i.vendorType),A.append("categories",JSON.stringify(i.categories)),A.append("description",i.description||""),A.append("account_number",i.bankAccount||""),A.append("account_holder_name",i.accountHolderName||""),A.append("bank_name",i.bankName||""),A.append("ifsc_code",i.ifscCode||""),A.append("gst_number",i.gstNumber||""),A.append("pan_number",i.panNumber||""),A.append("delivery_radius",i.deliveryRadius||""),A.append("min_order_amount",i.minOrderAmount||""),i.referralCode&&A.append("referral_code",i.referralCode),i.shopRegDoc&&A.append("business_license_file",i.shopRegDoc),i.citizenshipFront&&A.append("citizenship_front",i.citizenshipFront),i.citizenshipBack&&A.append("citizenship_back",i.citizenshipBack),i.shopImages.length>0&&i.shopImages.forEach((M,Z)=>{A.append(`shop_image_${Z}`,M)});try{let M=localStorage.getItem("token");console.log(n?"Updating vendor profile...":"Submitting complete vendor onboarding...");const Z="complete-onboarding/";let X=await fetch(Qe+Z,{method:"POST",headers:{Authorization:`Token ${M}`},body:A});if(X.status===401){console.log(" 401 error, attempting token refresh...");try{const{simplePersistentAuth:F}=await Ue(async()=>{const{simplePersistentAuth:z}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:z}},void 0),B=await F.getVendorAuth();if(B!=null&&B.token)M=B.token,localStorage.setItem("token",M),X=await fetch(Qe+Z,{method:"POST",headers:{Authorization:`Token ${M}`},body:A}),console.log(" Retry with refreshed token successful");else{m("Session expired. Please login again."),setTimeout(()=>e("/vendor/login"),2e3);return}}catch(F){console.error("Token refresh failed:",F),m("Session expired. Please login again."),setTimeout(()=>e("/vendor/login"),2e3);return}}const U=await X.json();if(console.log("Complete onboarding response:",X.status,U),!X.ok){let F="Failed to submit vendor application.";if(U.detail)F=U.detail;else if(U.error)F=U.error;else if(U.user)F=U.user;else if(typeof U=="object"){const B=Object.entries(U).map(([z,H])=>`${z}: ${Array.isArray(H)?H.join(", "):H}`).join("; ");B&&(F=B)}m(F),console.error("Complete onboarding failed:",U);return}console.log(n?"Vendor profile updated successfully":"Vendor onboarding completed successfully"),U.is_approved?(w(n?"Profile updated and approved successfully!":"Vendor profile submitted and approved successfully!"),console.log("Vendor approved. Navigating to dashboard..."),setTimeout(()=>{e("/vendor/dashboard")},3e3)):(w(n?"Your profile has been updated successfully and is pending approval. You will be notified once approved by the admin.":"Your vendor application has been submitted successfully and is pending approval. You will be notified once approved by the admin."),console.log("Vendor not approved yet. Redirecting to login page."),setTimeout(()=>{e("/vendor/login",{state:{successMessage:n?"Profile updated successfully! Pending admin approval.":"Application submitted successfully! Pending admin approval."}})},3e3))}catch(M){console.error("Submission error:",M),m("An unexpected error occurred. Please try again.")}finally{f(!1)}}},I=()=>{r>0&&a(r-1)},O=(A,M)=>{o(Z=>({...Z,[A]:M}))},R=A=>{const M=i.categories.includes(A)?i.categories.filter(Z=>Z!==A):[...i.categories,A];O("categories",M)};return s.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n?"Update Your Application":"Complete Your Setup"}),s.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Step ",r+1," of ",y.length]}),n&&s.jsx("p",{className:"text-orange-600 text-sm mt-1",children:"Update your information and resubmit for approval"})]}),s.jsx("div",{className:"flex overflow-x-auto mb-8 pb-2",children:y.map((A,M)=>s.jsxs("button",{onClick:()=>a(M),className:`flex-shrink-0 px-4 py-2 text-xs font-medium whitespace-nowrap ${M===r?"text-blue-600 border-b-2 border-blue-600":M<r?"text-green-600":"text-gray-400"}`,children:[M<r?"":M+1,". ",A]},A))}),s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[h&&s.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsx("p",{className:"text-blue-600",children:"Submitting your application..."})}),u&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600",children:u})}),p&&s.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsx("p",{className:"text-green-600",children:p})}),r===0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Choose Your Location"}),s.jsx("div",{className:"h-48 rounded-lg",children:s.jsxs(j_,{center:[i.location.lat,i.location.lng],zoom:13,style:{height:"100%",width:"100%",borderRadius:"0.5rem"},children:[s.jsx(N_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),s.jsx(ph,{position:[i.location.lat,i.location.lng],icon:DY}),s.jsx(N,{}),s.jsx(j,{lat:i.location.lat,lng:i.location.lng})]})}),s.jsx(te,{onClick:S,className:"w-full bg-blue-600 hover:bg-blue-700",children:"Use Live Location"}),l&&s.jsx("p",{className:"text-red-500 text-sm",children:l}),s.jsx(je,{placeholder:"Selected address will appear here",value:i.location.address,onChange:A=>O("location",{...i.location,address:A.target.value})})]}),r===1&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Shop Information"}),s.jsx(je,{placeholder:"Shop Name",value:i.shopName,onChange:A=>O("shopName",A.target.value)}),s.jsx(je,{placeholder:"Owner Name",value:i.ownerName,onChange:A=>O("ownerName",A.target.value)}),s.jsx(je,{placeholder:"Phone Number",value:i.phone,onChange:A=>O("phone",A.target.value)}),s.jsx(je,{placeholder:"Email Address",value:i.email,onChange:A=>O("email",A.target.value)}),s.jsx(je,{placeholder:"PAN Number *",value:i.panNumber,onChange:A=>{const M=A.target.value;M.length<=9&&O("panNumber",M)},maxLength:9,required:!0}),s.jsx(je,{placeholder:"Referral Code (Optional)",value:i.referralCode,onChange:A=>O("referralCode",A.target.value.toUpperCase()),maxLength:8}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter a referral code from another vendor to get bonus points"})]}),r===2&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Shop Address"}),s.jsx(je,{placeholder:"Full Shop Address",value:i.shopAddress,onChange:A=>O("shopAddress",A.target.value)}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(je,{placeholder:"City",value:i.city,onChange:A=>O("city",A.target.value)}),s.jsx(je,{placeholder:"State",value:i.state,onChange:A=>O("state",A.target.value)})]}),s.jsx(je,{placeholder:"PIN Code",value:i.pincode,onChange:A=>O("pincode",A.target.value)})]}),r===3&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Upload Documents"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Registration"}),n&&i.existingDocuments.panReg&&!i.shopRegDoc&&s.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),s.jsx("img",{src:i.existingDocuments.panReg,alt:"Current PAN",className:"w-32 h-20 object-cover rounded border mt-1"})]}),s.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:A=>O("shopRegDoc",A.target.files[0])}),!n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document"}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),i.shopRegDoc&&s.jsx("div",{className:"mt-2",children:i.shopRegDoc.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.shopRegDoc),alt:"PAN Registration",className:"w-32 h-20 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-green-700",children:[" ",i.shopRegDoc.name]})})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Citizenship (Front)"}),n&&i.existingDocuments.citizenshipFront&&!i.citizenshipFront&&s.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),s.jsx("img",{src:i.existingDocuments.citizenshipFront,alt:"Current Citizenship Front",className:"w-32 h-20 object-cover rounded border mt-1"})]}),s.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:A=>O("citizenshipFront",A.target.files[0])}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),i.citizenshipFront&&s.jsx("div",{className:"mt-2",children:i.citizenshipFront.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.citizenshipFront),alt:"Citizenship Front",className:"w-32 h-20 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-green-700",children:[" ",i.citizenshipFront.name]})})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Citizenship (Back)"}),n&&i.existingDocuments.citizenshipBack&&!i.citizenshipBack&&s.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),s.jsx("img",{src:i.existingDocuments.citizenshipBack,alt:"Current Citizenship Back",className:"w-32 h-20 object-cover rounded border mt-1"})]}),s.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:A=>O("citizenshipBack",A.target.files[0])}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),i.citizenshipBack&&s.jsx("div",{className:"mt-2",children:i.citizenshipBack.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.citizenshipBack),alt:"Citizenship Back",className:"w-32 h-20 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-green-700",children:[" ",i.citizenshipBack.name]})})})]})]})]}),r===4&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Shop Images"}),s.jsx("p",{className:"text-sm text-gray-600",children:n?"Current images shown below. Upload new images to add more.":"Upload at least 4 images of your shop (interior, exterior, products, etc.)"}),n&&i.existingShopImages.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Current Shop Images (",i.existingShopImages.length,")"]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.existingShopImages.map((A,M)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:A.image_url,alt:`Existing shop image ${M+1}`,className:"w-full h-full object-cover"})}),A.is_primary&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Existing Image"})]},M))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:A=>{const M=Array.from(A.target.files);if(M.length+i.shopImages.length>10){alert("Maximum 10 images allowed");return}O("shopImages",[...i.shopImages,...M])}}),s.jsx(te,{type:"button",variant:"outline",className:"w-full",onClick:()=>{const A=document.createElement("input");A.type="file",A.accept="image/*",A.capture="environment",A.onchange=M=>{const Z=M.target.files[0];if(Z){if(i.shopImages.length>=10){alert("Maximum 10 images allowed");return}O("shopImages",[...i.shopImages,Z])}},A.click()},children:" Take Photo"})]}),i.shopImages.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[n?"New Images to Add":"Uploaded Images"," (",i.shopImages.length,"/10)"]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.shopImages.map((A,M)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:URL.createObjectURL(A),alt:`Shop image ${M+1}`,className:"w-full h-full object-cover"})}),s.jsx("button",{type:"button",onClick:()=>{const Z=i.shopImages.filter((X,U)=>U!==M);O("shopImages",Z)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:""}),s.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:A.name})]},M))}),!n&&i.shopImages.length<4&&s.jsx("p",{className:"text-sm text-orange-600",children:"Please upload at least 4 images of your shop"}),n&&i.shopImages.length+i.existingShopImages.length<4&&s.jsx("p",{className:"text-sm text-orange-600",children:"Total images (existing + new) should be at least 4"})]})]}),r===5&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Payment Details"}),s.jsx(je,{placeholder:"Bank Account Number",value:i.bankAccount,onChange:A=>O("bankAccount",A.target.value)}),s.jsx(je,{placeholder:"Account Holder/Organization Name",value:i.accountHolderName,onChange:A=>O("accountHolderName",A.target.value)}),s.jsx(je,{placeholder:"Bank Name",value:i.bankName,onChange:A=>O("bankName",A.target.value)}),s.jsx(je,{placeholder:"Minimum Order Amount (Optional)",value:i.minOrderAmount,onChange:A=>O("minOrderAmount",A.target.value)})]}),r===6&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Business Type"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map(A=>s.jsx("button",{onClick:()=>O("vendorType",A.value),className:`p-3 text-sm rounded-lg border ${i.vendorType===A.value?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:A.label},A.value))})]}),r===7&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Product Categories"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Select categories you'll sell"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:v.length>0?v.map(A=>s.jsx("button",{onClick:()=>R(A),className:`p-3 text-sm rounded-lg border ${i.categories.includes(A)?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:A},A)):s.jsx("div",{className:"col-span-2 text-center text-gray-500 py-4",children:"No categories available. Please contact admin."})}),s.jsx(je,{placeholder:"Business Description (Optional)",value:i.description,onChange:A=>O("description",A.target.value)})]}),r===8&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Review & Submit"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Shop Information"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Shop Name:"})," ",i.shopName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Owner Name:"})," ",i.ownerName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",i.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",i.email]}),s.jsxs("p",{children:[s.jsx("strong",{children:"PAN Number:"})," ",i.panNumber||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Referral Code:"})," ",i.referralCode||"None"]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Shop Address:"})," ",i.shopAddress]}),s.jsxs("p",{children:[s.jsx("strong",{children:"City:"})," ",i.city]}),s.jsxs("p",{children:[s.jsx("strong",{children:"State:"})," ",i.state]}),s.jsxs("p",{children:[s.jsx("strong",{children:"PIN Code:"})," ",i.pincode]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Location:"})," ",i.location.address]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Documents"}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"PAN Registration:"})," ",i.shopRegDoc||i.existingDocuments.panReg?" Available":" Not uploaded"]}),i.shopRegDoc?s.jsx("div",{className:"mt-2",children:i.shopRegDoc.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.shopRegDoc),alt:"New PAN Registration",className:"w-24 h-16 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:s.jsxs("p",{className:"text-xs text-green-700",children:[" ",i.shopRegDoc.name," (New)"]})})}):i.existingDocuments.panReg?s.jsxs("div",{className:"mt-2",children:[s.jsx("img",{src:i.existingDocuments.panReg,alt:"Current PAN Registration",className:"w-24 h-16 object-cover rounded border"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Citizenship (Front):"})," ",i.citizenshipFront||i.existingDocuments.citizenshipFront?" Available":" Not uploaded"]}),i.citizenshipFront?s.jsx("div",{className:"mt-2",children:i.citizenshipFront.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.citizenshipFront),alt:"New Citizenship Front",className:"w-24 h-16 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:s.jsxs("p",{className:"text-xs text-green-700",children:[" ",i.citizenshipFront.name," (New)"]})})}):i.existingDocuments.citizenshipFront?s.jsxs("div",{className:"mt-2",children:[s.jsx("img",{src:i.existingDocuments.citizenshipFront,alt:"Current Citizenship Front",className:"w-24 h-16 object-cover rounded border"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Citizenship (Back):"})," ",i.citizenshipBack||i.existingDocuments.citizenshipBack?" Available":" Not uploaded"]}),i.citizenshipBack?s.jsx("div",{className:"mt-2",children:i.citizenshipBack.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(i.citizenshipBack),alt:"New Citizenship Back",className:"w-24 h-16 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:s.jsxs("p",{className:"text-xs text-green-700",children:[" ",i.citizenshipBack.name," (New)"]})})}):i.existingDocuments.citizenshipBack?s.jsxs("div",{className:"mt-2",children:[s.jsx("img",{src:i.existingDocuments.citizenshipBack,alt:"Current Citizenship Back",className:"w-24 h-16 object-cover rounded border"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Shop Images"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Images:"})," ",i.shopImages.length+i.existingShopImages.length,"/10"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Existing:"})," ",i.existingShopImages.length," | ",s.jsx("strong",{children:"New:"})," ",i.shopImages.length]}),i.shopImages.length+i.existingShopImages.length>=4?s.jsx("p",{className:"text-green-600 mb-3",children:" Minimum requirement met"}):s.jsx("p",{className:"text-red-600 mb-3",children:" Need at least 4 images total"}),i.existingShopImages.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-600 mb-2",children:"Current Images:"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.existingShopImages.slice(0,4).map((A,M)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:A.image_url,alt:`Current shop ${M+1}`,className:"w-16 h-16 object-cover rounded border"}),A.is_primary&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"})]},M)),i.existingShopImages.length>4&&s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border flex items-center justify-center",children:s.jsxs("span",{className:"text-xs text-gray-500",children:["+",i.existingShopImages.length-4]})})]})]}),i.shopImages.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-600 mb-2",children:"New Images to Add:"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.shopImages.slice(0,4).map((A,M)=>s.jsx("div",{className:"relative",children:s.jsx("img",{src:URL.createObjectURL(A),alt:`New shop ${M+1}`,className:"w-16 h-16 object-cover rounded border"})},M)),i.shopImages.length>4&&s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border flex items-center justify-center",children:s.jsxs("span",{className:"text-xs text-gray-500",children:["+",i.shopImages.length-4]})})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Payment Details"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Bank Account:"})," ",i.bankAccount||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Account Holder:"})," ",i.accountHolderName||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Bank Name:"})," ",i.bankName||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"IFSC Code:"})," ",i.ifscCode||"N/A"]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Business Details"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Business Type:"})," ",((D=b.find(A=>A.value===i.vendorType))==null?void 0:D.label)||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Categories:"})," ",i.categories.length>0?i.categories.join(", "):"None selected"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Description:"})," ",i.description||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"GST Number:"})," ",i.gstNumber||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Delivery Radius:"})," ",i.deliveryRadius||"N/A"," km"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Minimum Order Amount:"})," ",i.minOrderAmount||"N/A"]})]})]}),s.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800",children:"Your application will be reviewed within 24-48 hours. You'll receive an email notification once approved."})}),u&&s.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:u})})]})]}),s.jsxs("div",{className:"flex justify-between mt-6",children:[s.jsx(te,{onClick:I,disabled:r===0,variant:"outline",className:"px-6",children:"Previous"}),s.jsx(te,{onClick:E,disabled:h,className:"px-6 bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:h?"Submitting...":r===y.length-1?"Submit for Approval":"Next"})]})]})})}function $Y(){const e=Fn(),t=lt(),{rejectionReason:n,rejectionDate:r}=e.state||{},a=()=>{t("/vendor/onboarding",{state:{isUpdate:!0}})};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:s.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Application Rejected"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your vendor application has been rejected. Please review the feedback below and update your application."})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rejection Details"}),r&&s.jsxs("div",{className:"mb-4",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Rejected on: "}),s.jsx("span",{className:"text-sm text-gray-900",children:new Date(r).toLocaleDateString()})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Reason for rejection:"}),s.jsx("div",{className:"mt-2 p-4 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-sm text-red-800",children:n||"No specific reason provided. Please contact support for more details."})})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"What's next?"}),s.jsx("div",{className:"mt-2 text-sm text-blue-700",children:s.jsx("p",{children:"Please review the rejection reason above and update your application accordingly. You can modify your business information, upload new documents, or make any other necessary changes before resubmitting."})})]})]})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(te,{onClick:a,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Update Application"}),s.jsx(te,{onClick:()=>t("/vendor/login"),variant:"outline",className:"flex-1",children:"Back to Login"})]})]})]})})}var $h=e=>e.type==="checkbox",Bo=e=>e instanceof Date,En=e=>e==null;const a4=e=>typeof e=="object";var Ds=e=>!En(e)&&!Array.isArray(e)&&a4(e)&&!Bo(e),i4=e=>Ds(e)&&e.target?$h(e.target)?e.target.checked:e.target.value:e,BY=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,o4=(e,t)=>e.has(BY(t)),zY=e=>{const t=e.constructor&&e.constructor.prototype;return Ds(t)&&t.hasOwnProperty("isPrototypeOf")},I_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Hs(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(I_&&(e instanceof Blob||r))&&(n||Ds(e)))if(t=n?[]:{},!n&&!zY(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Hs(e[a]));else return e;return t}var Pg=e=>/^\w*$/.test(e),Is=e=>e===void 0,M_=e=>Array.isArray(e)?e.filter(Boolean):[],D_=e=>M_(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Je=(e,t,n)=>{if(!t||!Ds(e))return n;const r=(Pg(t)?[t]:D_(t)).reduce((a,i)=>En(a)?a:a[i],e);return Is(r)||r===e?Is(e[t])?n:e[t]:r},nr=e=>typeof e=="boolean",Jt=(e,t,n)=>{let r=-1;const a=Pg(t)?[t]:D_(t),i=a.length,o=i-1;for(;++r<i;){const l=a[r];let d=n;if(r!==o){const h=e[l];d=Ds(h)||Array.isArray(h)?h:isNaN(+a[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=d,e=e[l]}};const ap={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},qr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Wa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},l4=Re.createContext(null);l4.displayName="HookFormContext";const F_=()=>Re.useContext(l4);var c4=(e,t,n,r=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==qr.all&&(t._proxyFormState[o]=!r||qr.all),n&&(n[o]=!0),e[o]}});return a};const $_=typeof window<"u"?Re.useLayoutEffect:Re.useEffect;function VY(e){const t=F_(),{control:n=t.control,disabled:r,name:a,exact:i}=e||{},[o,l]=Re.useState(n._formState),d=Re.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return $_(()=>n._subscribe({name:a,formState:d.current,exact:i,callback:h=>{!r&&l({...n._formState,...h})}}),[a,r,i]),Re.useEffect(()=>{d.current.isValid&&n._setValid(!0)},[n]),Re.useMemo(()=>c4(o,n,d.current,!1),[o,n])}var ja=e=>typeof e=="string",d4=(e,t,n,r,a)=>ja(e)?(r&&t.watch.add(e),Je(n,e,a)):Array.isArray(e)?e.map(i=>(r&&t.watch.add(i),Je(n,i))):(r&&(t.watchAll=!0),n),j0=e=>En(e)||!a4(e);function ei(e,t,n=new WeakSet){if(j0(e)||j0(t))return e===t;if(Bo(e)&&Bo(t))return e.getTime()===t.getTime();const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of r){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=t[i];if(Bo(o)&&Bo(l)||Ds(o)&&Ds(l)||Array.isArray(o)&&Array.isArray(l)?!ei(o,l,n):o!==l)return!1}}return!0}function UY(e){const t=F_(),{control:n=t.control,name:r,defaultValue:a,disabled:i,exact:o,compute:l}=e||{},d=Re.useRef(a),h=Re.useRef(l),f=Re.useRef(void 0);h.current=l;const u=Re.useMemo(()=>n._getWatch(r,d.current),[n,r]),[m,p]=Re.useState(h.current?h.current(u):u);return $_(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:w=>{if(!i){const v=d4(r,n._names,w.values||n._formValues,!1,d.current);if(h.current){const x=h.current(v);ei(x,f.current)||(p(x),f.current=x)}else p(v)}}}),[n,i,r,o]),Re.useEffect(()=>n._removeUnmounted()),m}function qY(e){const t=F_(),{name:n,disabled:r,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,l=o4(a._names.array,n),d=Re.useMemo(()=>Je(a._formValues,n,Je(a._defaultValues,n,o)),[a,n,o]),h=UY({control:a,name:n,defaultValue:d,exact:!0}),f=VY({control:a,name:n,exact:!0}),u=Re.useRef(e),m=Re.useRef(a.register(n,{...e.rules,value:h,...nr(e.disabled)?{disabled:e.disabled}:{}}));u.current=e;const p=Re.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Je(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!Je(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Je(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Je(f.validatingFields,n)},error:{enumerable:!0,get:()=>Je(f.errors,n)}}),[f,n]),w=Re.useCallback(b=>m.current.onChange({target:{value:i4(b),name:n},type:ap.CHANGE}),[n]),v=Re.useCallback(()=>m.current.onBlur({target:{value:Je(a._formValues,n),name:n},type:ap.BLUR}),[n,a._formValues]),x=Re.useCallback(b=>{const j=Je(a._fields,n);j&&b&&(j._f.ref={focus:()=>b.focus&&b.focus(),select:()=>b.select&&b.select(),setCustomValidity:N=>b.setCustomValidity(N),reportValidity:()=>b.reportValidity()})},[a._fields,n]),y=Re.useMemo(()=>({name:n,value:h,...nr(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:w,onBlur:v,ref:x}),[n,r,f.disabled,w,v,x,h]);return Re.useEffect(()=>{const b=a._options.shouldUnregister||i;a.register(n,{...u.current.rules,...nr(u.current.disabled)?{disabled:u.current.disabled}:{}});const j=(N,S)=>{const P=Je(a._fields,N);P&&P._f&&(P._f.mount=S)};if(j(n,!0),b){const N=Hs(Je(a._options.defaultValues,n));Jt(a._defaultValues,n,N),Is(Je(a._formValues,n))&&Jt(a._formValues,n,N)}return!l&&a.register(n),()=>{(l?b&&!a._state.action:b)?a.unregister(n):j(n,!1)}},[n,a,l,i]),Re.useEffect(()=>{a._setDisabledField({disabled:r,name:n})},[r,n,a]),Re.useMemo(()=>({field:y,formState:f,fieldState:p}),[y,f,p])}const pt=e=>e.render(qY(e));var u4=(e,t,n,r,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:a||!0}}:{},Pu=e=>Array.isArray(e)?e:[e],_k=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},qn=e=>Ds(e)&&!Object.keys(e).length,B_=e=>e.type==="file",Hr=e=>typeof e=="function",ip=e=>{if(!I_)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},h4=e=>e.type==="select-multiple",z_=e=>e.type==="radio",HY=e=>z_(e)||$h(e),bx=e=>ip(e)&&e.isConnected;function WY(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Is(e)?r++:e[t[r++]];return e}function GY(e){for(const t in e)if(e.hasOwnProperty(t)&&!Is(e[t]))return!1;return!0}function zs(e,t){const n=Array.isArray(t)?t:Pg(t)?[t]:D_(t),r=n.length===1?e:WY(e,n),a=n.length-1,i=n[a];return r&&delete r[i],a!==0&&(Ds(r)&&qn(r)||Array.isArray(r)&&GY(r))&&zs(e,n.slice(0,-1)),e}var f4=e=>{for(const t in e)if(Hr(e[t]))return!0;return!1};function op(e,t={}){const n=Array.isArray(e);if(Ds(e)||n)for(const r in e)Array.isArray(e[r])||Ds(e[r])&&!f4(e[r])?(t[r]=Array.isArray(e[r])?[]:{},op(e[r],t[r])):En(e[r])||(t[r]=!0);return t}function m4(e,t,n){const r=Array.isArray(e);if(Ds(e)||r)for(const a in e)Array.isArray(e[a])||Ds(e[a])&&!f4(e[a])?Is(t)||j0(n[a])?n[a]=Array.isArray(e[a])?op(e[a],[]):{...op(e[a])}:m4(e[a],En(t)?{}:t[a],n[a]):n[a]=!ei(e[a],t[a]);return n}var Xd=(e,t)=>m4(e,t,op(t));const jk={value:!1,isValid:!1},Nk={value:!0,isValid:!0};var p4=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Is(e[0].attributes.value)?Is(e[0].value)||e[0].value===""?Nk:{value:e[0].value,isValid:!0}:Nk:jk}return jk},g4=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Is(e)?e:t?e===""?NaN:e&&+e:n&&ja(e)?new Date(e):r?r(e):e;const Sk={isValid:!1,value:null};var v4=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,Sk):Sk;function kk(e){const t=e.ref;return B_(t)?t.files:z_(t)?v4(e.refs).value:h4(t)?[...t.selectedOptions].map(({value:n})=>n):$h(t)?p4(e.refs).value:g4(Is(t.value)?e.ref.value:t.value,e)}var KY=(e,t,n,r)=>{const a={};for(const i of e){const o=Je(t,i);o&&Jt(a,i,o._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}},lp=e=>e instanceof RegExp,Jd=e=>Is(e)?e:lp(e)?e.source:Ds(e)?lp(e.value)?e.value.source:e.value:e,Ck=e=>({isOnSubmit:!e||e===qr.onSubmit,isOnBlur:e===qr.onBlur,isOnChange:e===qr.onChange,isOnAll:e===qr.all,isOnTouch:e===qr.onTouched});const Ek="AsyncFunction";var ZY=e=>!!e&&!!e.validate&&!!(Hr(e.validate)&&e.validate.constructor.name===Ek||Ds(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Ek)),YY=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Tk=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Au=(e,t,n,r)=>{for(const a of n||Object.keys(e)){const i=Je(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(Au(l,t))break}else if(Ds(l)&&Au(l,t))break}}};function Pk(e,t,n){const r=Je(e,n);if(r||Pg(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const i=a.join("."),o=Je(t,i),l=Je(e,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:n}}var XY=(e,t,n,r)=>{n(e);const{name:a,...i}=e;return qn(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!r||qr.all))},JY=(e,t,n)=>!e||!t||e===t||Pu(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),QY=(e,t,n,r,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(t||e):(n?r.isOnBlur:a.isOnBlur)?!e:(n?r.isOnChange:a.isOnChange)?e:!0,eX=(e,t)=>!M_(Je(e,t)).length&&zs(e,t),tX=(e,t,n)=>{const r=Pu(Je(e,n));return Jt(r,"root",t[n]),Jt(e,n,r),e},lm=e=>ja(e);function Ak(e,t,n="validate"){if(lm(e)||Array.isArray(e)&&e.every(lm)||nr(e)&&!e)return{type:n,message:lm(e)?e:"",ref:t}}var Ml=e=>Ds(e)&&!lp(e)?e:{value:e,message:""},Ok=async(e,t,n,r,a,i)=>{const{ref:o,refs:l,required:d,maxLength:h,minLength:f,min:u,max:m,pattern:p,validate:w,name:v,valueAsNumber:x,mount:y}=e._f,b=Je(n,v);if(!y||t.has(v))return{};const j=l?l[0]:o,N=C=>{a&&j.reportValidity&&(j.setCustomValidity(nr(C)?"":C||""),j.reportValidity())},S={},P=z_(o),T=$h(o),E=P||T,I=(x||B_(o))&&Is(o.value)&&Is(b)||ip(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,O=u4.bind(null,v,r,S),R=(C,D,A,M=Wa.maxLength,Z=Wa.minLength)=>{const X=C?D:A;S[v]={type:C?M:Z,message:X,ref:o,...O(C?M:Z,X)}};if(i?!Array.isArray(b)||!b.length:d&&(!E&&(I||En(b))||nr(b)&&!b||T&&!p4(l).isValid||P&&!v4(l).isValid)){const{value:C,message:D}=lm(d)?{value:!!d,message:d}:Ml(d);if(C&&(S[v]={type:Wa.required,message:D,ref:j,...O(Wa.required,D)},!r))return N(D),S}if(!I&&(!En(u)||!En(m))){let C,D;const A=Ml(m),M=Ml(u);if(!En(b)&&!isNaN(b)){const Z=o.valueAsNumber||b&&+b;En(A.value)||(C=Z>A.value),En(M.value)||(D=Z<M.value)}else{const Z=o.valueAsDate||new Date(b),X=B=>new Date(new Date().toDateString()+" "+B),U=o.type=="time",F=o.type=="week";ja(A.value)&&b&&(C=U?X(b)>X(A.value):F?b>A.value:Z>new Date(A.value)),ja(M.value)&&b&&(D=U?X(b)<X(M.value):F?b<M.value:Z<new Date(M.value))}if((C||D)&&(R(!!C,A.message,M.message,Wa.max,Wa.min),!r))return N(S[v].message),S}if((h||f)&&!I&&(ja(b)||i&&Array.isArray(b))){const C=Ml(h),D=Ml(f),A=!En(C.value)&&b.length>+C.value,M=!En(D.value)&&b.length<+D.value;if((A||M)&&(R(A,C.message,D.message),!r))return N(S[v].message),S}if(p&&!I&&ja(b)){const{value:C,message:D}=Ml(p);if(lp(C)&&!b.match(C)&&(S[v]={type:Wa.pattern,message:D,ref:o,...O(Wa.pattern,D)},!r))return N(D),S}if(w){if(Hr(w)){const C=await w(b,n),D=Ak(C,j);if(D&&(S[v]={...D,...O(Wa.validate,D.message)},!r))return N(D.message),S}else if(Ds(w)){let C={};for(const D in w){if(!qn(C)&&!r)break;const A=Ak(await w[D](b,n),j,D);A&&(C={...A,...O(D,A.message)},N(A.message),r&&(S[v]=C))}if(!qn(C)&&(S[v]={ref:j,...C},!r))return S}}return N(!0),S};const sX={mode:qr.onSubmit,reValidateMode:qr.onChange,shouldFocusError:!0};function nX(e={}){let t={...sX,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Hr(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},a=Ds(t.defaultValues)||Ds(t.values)?Hs(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Hs(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...f};const m={array:_k(),state:_k()},p=t.criteriaMode===qr.all,w=Q=>ae=>{clearTimeout(h),h=setTimeout(Q,ae)},v=async Q=>{if(!t.disabled&&(f.isValid||u.isValid||Q)){const ae=t.resolver?qn((await T()).errors):await I(r,!0);ae!==n.isValid&&m.state.next({isValid:ae})}},x=(Q,ae)=>{!t.disabled&&(f.isValidating||f.validatingFields||u.isValidating||u.validatingFields)&&((Q||Array.from(l.mount)).forEach(ue=>{ue&&(ae?Jt(n.validatingFields,ue,ae):zs(n.validatingFields,ue))}),m.state.next({validatingFields:n.validatingFields,isValidating:!qn(n.validatingFields)}))},y=(Q,ae=[],ue,re,ce=!0,fe=!0)=>{if(re&&ue&&!t.disabled){if(o.action=!0,fe&&Array.isArray(Je(r,Q))){const ge=ue(Je(r,Q),re.argA,re.argB);ce&&Jt(r,Q,ge)}if(fe&&Array.isArray(Je(n.errors,Q))){const ge=ue(Je(n.errors,Q),re.argA,re.argB);ce&&Jt(n.errors,Q,ge),eX(n.errors,Q)}if((f.touchedFields||u.touchedFields)&&fe&&Array.isArray(Je(n.touchedFields,Q))){const ge=ue(Je(n.touchedFields,Q),re.argA,re.argB);ce&&Jt(n.touchedFields,Q,ge)}(f.dirtyFields||u.dirtyFields)&&(n.dirtyFields=Xd(a,i)),m.state.next({name:Q,isDirty:R(Q,ae),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Jt(i,Q,ae)},b=(Q,ae)=>{Jt(n.errors,Q,ae),m.state.next({errors:n.errors})},j=Q=>{n.errors=Q,m.state.next({errors:n.errors,isValid:!1})},N=(Q,ae,ue,re)=>{const ce=Je(r,Q);if(ce){const fe=Je(i,Q,Is(ue)?Je(a,Q):ue);Is(fe)||re&&re.defaultChecked||ae?Jt(i,Q,ae?fe:kk(ce._f)):A(Q,fe),o.mount&&v()}},S=(Q,ae,ue,re,ce)=>{let fe=!1,ge=!1;const me={name:Q};if(!t.disabled){if(!ue||re){(f.isDirty||u.isDirty)&&(ge=n.isDirty,n.isDirty=me.isDirty=R(),fe=ge!==me.isDirty);const be=ei(Je(a,Q),ae);ge=!!Je(n.dirtyFields,Q),be?zs(n.dirtyFields,Q):Jt(n.dirtyFields,Q,!0),me.dirtyFields=n.dirtyFields,fe=fe||(f.dirtyFields||u.dirtyFields)&&ge!==!be}if(ue){const be=Je(n.touchedFields,Q);be||(Jt(n.touchedFields,Q,ue),me.touchedFields=n.touchedFields,fe=fe||(f.touchedFields||u.touchedFields)&&be!==ue)}fe&&ce&&m.state.next(me)}return fe?me:{}},P=(Q,ae,ue,re)=>{const ce=Je(n.errors,Q),fe=(f.isValid||u.isValid)&&nr(ae)&&n.isValid!==ae;if(t.delayError&&ue?(d=w(()=>b(Q,ue)),d(t.delayError)):(clearTimeout(h),d=null,ue?Jt(n.errors,Q,ue):zs(n.errors,Q)),(ue?!ei(ce,ue):ce)||!qn(re)||fe){const ge={...re,...fe&&nr(ae)?{isValid:ae}:{},errors:n.errors,name:Q};n={...n,...ge},m.state.next(ge)}},T=async Q=>{x(Q,!0);const ae=await t.resolver(i,t.context,KY(Q||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return x(Q),ae},E=async Q=>{const{errors:ae}=await T(Q);if(Q)for(const ue of Q){const re=Je(ae,ue);re?Jt(n.errors,ue,re):zs(n.errors,ue)}else n.errors=ae;return ae},I=async(Q,ae,ue={valid:!0})=>{for(const re in Q){const ce=Q[re];if(ce){const{_f:fe,...ge}=ce;if(fe){const me=l.array.has(fe.name),be=ce._f&&ZY(ce._f);be&&f.validatingFields&&x([re],!0);const Te=await Ok(ce,l.disabled,i,p,t.shouldUseNativeValidation&&!ae,me);if(be&&f.validatingFields&&x([re]),Te[fe.name]&&(ue.valid=!1,ae))break;!ae&&(Je(Te,fe.name)?me?tX(n.errors,Te,fe.name):Jt(n.errors,fe.name,Te[fe.name]):zs(n.errors,fe.name))}!qn(ge)&&await I(ge,ae,ue)}}return ue.valid},O=()=>{for(const Q of l.unMount){const ae=Je(r,Q);ae&&(ae._f.refs?ae._f.refs.every(ue=>!bx(ue)):!bx(ae._f.ref))&&G(Q)}l.unMount=new Set},R=(Q,ae)=>!t.disabled&&(Q&&ae&&Jt(i,Q,ae),!ei(B(),a)),C=(Q,ae,ue)=>d4(Q,l,{...o.mount?i:Is(ae)?a:ja(Q)?{[Q]:ae}:ae},ue,ae),D=Q=>M_(Je(o.mount?i:a,Q,t.shouldUnregister?Je(a,Q,[]):[])),A=(Q,ae,ue={})=>{const re=Je(r,Q);let ce=ae;if(re){const fe=re._f;fe&&(!fe.disabled&&Jt(i,Q,g4(ae,fe)),ce=ip(fe.ref)&&En(ae)?"":ae,h4(fe.ref)?[...fe.ref.options].forEach(ge=>ge.selected=ce.includes(ge.value)):fe.refs?$h(fe.ref)?fe.refs.forEach(ge=>{(!ge.defaultChecked||!ge.disabled)&&(Array.isArray(ce)?ge.checked=!!ce.find(me=>me===ge.value):ge.checked=ce===ge.value||!!ce)}):fe.refs.forEach(ge=>ge.checked=ge.value===ce):B_(fe.ref)?fe.ref.value="":(fe.ref.value=ce,fe.ref.type||m.state.next({name:Q,values:Hs(i)})))}(ue.shouldDirty||ue.shouldTouch)&&S(Q,ce,ue.shouldTouch,ue.shouldDirty,!0),ue.shouldValidate&&F(Q)},M=(Q,ae,ue)=>{for(const re in ae){if(!ae.hasOwnProperty(re))return;const ce=ae[re],fe=Q+"."+re,ge=Je(r,fe);(l.array.has(Q)||Ds(ce)||ge&&!ge._f)&&!Bo(ce)?M(fe,ce,ue):A(fe,ce,ue)}},Z=(Q,ae,ue={})=>{const re=Je(r,Q),ce=l.array.has(Q),fe=Hs(ae);Jt(i,Q,fe),ce?(m.array.next({name:Q,values:Hs(i)}),(f.isDirty||f.dirtyFields||u.isDirty||u.dirtyFields)&&ue.shouldDirty&&m.state.next({name:Q,dirtyFields:Xd(a,i),isDirty:R(Q,fe)})):re&&!re._f&&!En(fe)?M(Q,fe,ue):A(Q,fe,ue),Tk(Q,l)&&m.state.next({...n,name:Q}),m.state.next({name:o.mount?Q:void 0,values:Hs(i)})},X=async Q=>{o.mount=!0;const ae=Q.target;let ue=ae.name,re=!0;const ce=Je(r,ue),fe=be=>{re=Number.isNaN(be)||Bo(be)&&isNaN(be.getTime())||ei(be,Je(i,ue,be))},ge=Ck(t.mode),me=Ck(t.reValidateMode);if(ce){let be,Te;const Se=ae.type?kk(ce._f):i4(Q),Ie=Q.type===ap.BLUR||Q.type===ap.FOCUS_OUT,se=!YY(ce._f)&&!t.resolver&&!Je(n.errors,ue)&&!ce._f.deps||QY(Ie,Je(n.touchedFields,ue),n.isSubmitted,me,ge),we=Tk(ue,l,Ie);Jt(i,ue,Se),Ie?(ce._f.onBlur&&ce._f.onBlur(Q),d&&d(0)):ce._f.onChange&&ce._f.onChange(Q);const Pe=S(ue,Se,Ie),Me=!qn(Pe)||we;if(!Ie&&m.state.next({name:ue,type:Q.type,values:Hs(i)}),se)return(f.isValid||u.isValid)&&(t.mode==="onBlur"?Ie&&v():Ie||v()),Me&&m.state.next({name:ue,...we?{}:Pe});if(!Ie&&we&&m.state.next({...n}),t.resolver){const{errors:Le}=await T([ue]);if(fe(Se),re){const He=Pk(n.errors,r,ue),_t=Pk(Le,r,He.name||ue);be=_t.error,ue=_t.name,Te=qn(Le)}}else x([ue],!0),be=(await Ok(ce,l.disabled,i,p,t.shouldUseNativeValidation))[ue],x([ue]),fe(Se),re&&(be?Te=!1:(f.isValid||u.isValid)&&(Te=await I(r,!0)));re&&(ce._f.deps&&F(ce._f.deps),P(ue,Te,be,Pe))}},U=(Q,ae)=>{if(Je(n.errors,ae)&&Q.focus)return Q.focus(),1},F=async(Q,ae={})=>{let ue,re;const ce=Pu(Q);if(t.resolver){const fe=await E(Is(Q)?Q:ce);ue=qn(fe),re=Q?!ce.some(ge=>Je(fe,ge)):ue}else Q?(re=(await Promise.all(ce.map(async fe=>{const ge=Je(r,fe);return await I(ge&&ge._f?{[fe]:ge}:ge)}))).every(Boolean),!(!re&&!n.isValid)&&v()):re=ue=await I(r);return m.state.next({...!ja(Q)||(f.isValid||u.isValid)&&ue!==n.isValid?{}:{name:Q},...t.resolver||!Q?{isValid:ue}:{},errors:n.errors}),ae.shouldFocus&&!re&&Au(r,U,Q?ce:l.mount),re},B=Q=>{const ae={...o.mount?i:a};return Is(Q)?ae:ja(Q)?Je(ae,Q):Q.map(ue=>Je(ae,ue))},z=(Q,ae)=>({invalid:!!Je((ae||n).errors,Q),isDirty:!!Je((ae||n).dirtyFields,Q),error:Je((ae||n).errors,Q),isValidating:!!Je(n.validatingFields,Q),isTouched:!!Je((ae||n).touchedFields,Q)}),H=Q=>{Q&&Pu(Q).forEach(ae=>zs(n.errors,ae)),m.state.next({errors:Q?n.errors:{}})},q=(Q,ae,ue)=>{const re=(Je(r,Q,{_f:{}})._f||{}).ref,ce=Je(n.errors,Q)||{},{ref:fe,message:ge,type:me,...be}=ce;Jt(n.errors,Q,{...be,...ae,ref:re}),m.state.next({name:Q,errors:n.errors,isValid:!1}),ue&&ue.shouldFocus&&re&&re.focus&&re.focus()},W=(Q,ae)=>Hr(Q)?m.state.subscribe({next:ue=>"values"in ue&&Q(C(void 0,ae),ue)}):C(Q,ae,!0),Y=Q=>m.state.subscribe({next:ae=>{JY(Q.name,ae.name,Q.exact)&&XY(ae,Q.formState||f,ve,Q.reRenderRoot)&&Q.callback({values:{...i},...n,...ae,defaultValues:a})}}).unsubscribe,V=Q=>(o.mount=!0,u={...u,...Q.formState},Y({...Q,formState:u})),G=(Q,ae={})=>{for(const ue of Q?Pu(Q):l.mount)l.mount.delete(ue),l.array.delete(ue),ae.keepValue||(zs(r,ue),zs(i,ue)),!ae.keepError&&zs(n.errors,ue),!ae.keepDirty&&zs(n.dirtyFields,ue),!ae.keepTouched&&zs(n.touchedFields,ue),!ae.keepIsValidating&&zs(n.validatingFields,ue),!t.shouldUnregister&&!ae.keepDefaultValue&&zs(a,ue);m.state.next({values:Hs(i)}),m.state.next({...n,...ae.keepDirty?{isDirty:R()}:{}}),!ae.keepIsValid&&v()},ie=({disabled:Q,name:ae})=>{(nr(Q)&&o.mount||Q||l.disabled.has(ae))&&(Q?l.disabled.add(ae):l.disabled.delete(ae))},J=(Q,ae={})=>{let ue=Je(r,Q);const re=nr(ae.disabled)||nr(t.disabled);return Jt(r,Q,{...ue||{},_f:{...ue&&ue._f?ue._f:{ref:{name:Q}},name:Q,mount:!0,...ae}}),l.mount.add(Q),ue?ie({disabled:nr(ae.disabled)?ae.disabled:t.disabled,name:Q}):N(Q,!0,ae.value),{...re?{disabled:ae.disabled||t.disabled}:{},...t.progressive?{required:!!ae.required,min:Jd(ae.min),max:Jd(ae.max),minLength:Jd(ae.minLength),maxLength:Jd(ae.maxLength),pattern:Jd(ae.pattern)}:{},name:Q,onChange:X,onBlur:X,ref:ce=>{if(ce){J(Q,ae),ue=Je(r,Q);const fe=Is(ce.value)&&ce.querySelectorAll&&ce.querySelectorAll("input,select,textarea")[0]||ce,ge=HY(fe),me=ue._f.refs||[];if(ge?me.find(be=>be===fe):fe===ue._f.ref)return;Jt(r,Q,{_f:{...ue._f,...ge?{refs:[...me.filter(bx),fe,...Array.isArray(Je(a,Q))?[{}]:[]],ref:{type:fe.type,name:Q}}:{ref:fe}}}),N(Q,!1,void 0,fe)}else ue=Je(r,Q,{}),ue._f&&(ue._f.mount=!1),(t.shouldUnregister||ae.shouldUnregister)&&!(o4(l.array,Q)&&o.action)&&l.unMount.add(Q)}}},le=()=>t.shouldFocusError&&Au(r,U,l.mount),ye=Q=>{nr(Q)&&(m.state.next({disabled:Q}),Au(r,(ae,ue)=>{const re=Je(r,ue);re&&(ae.disabled=re._f.disabled||Q,Array.isArray(re._f.refs)&&re._f.refs.forEach(ce=>{ce.disabled=re._f.disabled||Q}))},0,!1))},ke=(Q,ae)=>async ue=>{let re;ue&&(ue.preventDefault&&ue.preventDefault(),ue.persist&&ue.persist());let ce=Hs(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:fe,values:ge}=await T();n.errors=fe,ce=Hs(ge)}else await I(r);if(l.disabled.size)for(const fe of l.disabled)zs(ce,fe);if(zs(n.errors,"root"),qn(n.errors)){m.state.next({errors:{}});try{await Q(ce,ue)}catch(fe){re=fe}}else ae&&await ae({...n.errors},ue),le(),setTimeout(le);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:qn(n.errors)&&!re,submitCount:n.submitCount+1,errors:n.errors}),re)throw re},Ne=(Q,ae={})=>{Je(r,Q)&&(Is(ae.defaultValue)?Z(Q,Hs(Je(a,Q))):(Z(Q,ae.defaultValue),Jt(a,Q,Hs(ae.defaultValue))),ae.keepTouched||zs(n.touchedFields,Q),ae.keepDirty||(zs(n.dirtyFields,Q),n.isDirty=ae.defaultValue?R(Q,Hs(Je(a,Q))):R()),ae.keepError||(zs(n.errors,Q),f.isValid&&v()),m.state.next({...n}))},_e=(Q,ae={})=>{const ue=Q?Hs(Q):a,re=Hs(ue),ce=qn(Q),fe=ce?a:re;if(ae.keepDefaultValues||(a=ue),!ae.keepValues){if(ae.keepDirtyValues){const ge=new Set([...l.mount,...Object.keys(Xd(a,i))]);for(const me of Array.from(ge))Je(n.dirtyFields,me)?Jt(fe,me,Je(i,me)):Z(me,Je(fe,me))}else{if(I_&&Is(Q))for(const ge of l.mount){const me=Je(r,ge);if(me&&me._f){const be=Array.isArray(me._f.refs)?me._f.refs[0]:me._f.ref;if(ip(be)){const Te=be.closest("form");if(Te){Te.reset();break}}}}if(ae.keepFieldsRef)for(const ge of l.mount)Z(ge,Je(fe,ge));else r={}}i=t.shouldUnregister?ae.keepDefaultValues?Hs(a):{}:Hs(fe),m.array.next({values:{...fe}}),m.state.next({values:{...fe}})}l={mount:ae.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!ae.keepIsValid||!!ae.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:ae.keepSubmitCount?n.submitCount:0,isDirty:ce?!1:ae.keepDirty?n.isDirty:!!(ae.keepDefaultValues&&!ei(Q,a)),isSubmitted:ae.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ce?{}:ae.keepDirtyValues?ae.keepDefaultValues&&i?Xd(a,i):n.dirtyFields:ae.keepDefaultValues&&Q?Xd(a,Q):ae.keepDirty?n.dirtyFields:{},touchedFields:ae.keepTouched?n.touchedFields:{},errors:ae.keepErrors?n.errors:{},isSubmitSuccessful:ae.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ne=(Q,ae)=>_e(Hr(Q)?Q(i):Q,ae),Ce=(Q,ae={})=>{const ue=Je(r,Q),re=ue&&ue._f;if(re){const ce=re.refs?re.refs[0]:re.ref;ce.focus&&(ce.focus(),ae.shouldSelect&&Hr(ce.select)&&ce.select())}},ve=Q=>{n={...n,...Q}},de={control:{register:J,unregister:G,getFieldState:z,handleSubmit:ke,setError:q,_subscribe:Y,_runSchema:T,_focusError:le,_getWatch:C,_getDirty:R,_setValid:v,_setFieldArray:y,_setDisabledField:ie,_setErrors:j,_getFieldArray:D,_reset:_e,_resetDefaultValues:()=>Hr(t.defaultValues)&&t.defaultValues().then(Q=>{ne(Q,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:ye,_subjects:m,_proxyFormState:f,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(Q){o=Q},get _defaultValues(){return a},get _names(){return l},set _names(Q){l=Q},get _formState(){return n},get _options(){return t},set _options(Q){t={...t,...Q}}},subscribe:V,trigger:F,register:J,handleSubmit:ke,watch:W,setValue:Z,getValues:B,reset:ne,resetField:Ne,clearErrors:H,unregister:G,setError:q,setFocus:Ce,getFieldState:z};return{...de,formControl:de}}function x4(e={}){const t=Re.useRef(void 0),n=Re.useRef(void 0),[r,a]=Re.useState({isDirty:!1,isValidating:!1,isLoading:Hr(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Hr(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Hr(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=nX(e);t.current={...l,formState:r}}const i=t.current.control;return i._options=e,$_(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),Re.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Re.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Re.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Re.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Re.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),Re.useEffect(()=>{e.values&&!ei(e.values,n.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),Re.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=c4(r,i),t.current}const Rk=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Je(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},y4=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?Rk(r.ref,n,e):r.refs&&r.refs.forEach(a=>Rk(a,n,e))}},rX=(e,t)=>{t.shouldUseNativeValidation&&y4(e,t);const n={};for(const r in e){const a=Je(t.fields,r),i=Object.assign(e[r]||{},{ref:a&&a.ref});if(aX(t.names||Object.keys(e),r)){const o=Object.assign({},Je(n,r));Jt(o,"root",i),Jt(n,r,o)}else Jt(n,r,i)}return n},aX=(e,t)=>e.some(n=>n.startsWith(t+"."));var iX=function(e,t){for(var n={};e.length;){var r=e[0],a=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:i,type:a};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(u){return e.push(u)})}),t){var d=n[o].types,h=d&&d[r.code];n[o]=u4(o,t,n,a,h?[].concat(h,r.message):r.message)}e.shift()}return n},b4=function(e,t,n){return n===void 0&&(n={}),function(r,a,i){try{return Promise.resolve(function(o,l){try{var d=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(h){return i.shouldUseNativeValidation&&y4({},i),{errors:{},values:n.raw?r:h}})}catch(h){return l(h)}return d&&d.then?d.then(void 0,l):d}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:rX(iX(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Ut;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Ut||(Ut={}));var Lk;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Lk||(Lk={}));const dt=Ut.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Li=e=>{switch(typeof e){case"undefined":return dt.undefined;case"string":return dt.string;case"number":return Number.isNaN(e)?dt.nan:dt.number;case"boolean":return dt.boolean;case"function":return dt.function;case"bigint":return dt.bigint;case"symbol":return dt.symbol;case"object":return Array.isArray(e)?dt.array:e===null?dt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?dt.promise:typeof Map<"u"&&e instanceof Map?dt.map:typeof Set<"u"&&e instanceof Set?dt.set:typeof Date<"u"&&e instanceof Date?dt.date:dt.object;default:return dt.unknown}},Ke=Ut.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class vi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,d=0;for(;d<o.path.length;){const h=o.path[d];d===o.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(n(o))):l[h]=l[h]||{_errors:[]},l=l[h],d++}}};return a(this),r}static assert(t){if(!(t instanceof vi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ut.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];n[i]=n[i]||[],n[i].push(t(a))}else r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}vi.create=e=>new vi(e);const N0=(e,t)=>{let n;switch(e.code){case Ke.invalid_type:e.received===dt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Ke.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Ut.jsonStringifyReplacer)}`;break;case Ke.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ut.joinValues(e.keys,", ")}`;break;case Ke.invalid_union:n="Invalid input";break;case Ke.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ut.joinValues(e.options)}`;break;case Ke.invalid_enum_value:n=`Invalid enum value. Expected ${Ut.joinValues(e.options)}, received '${e.received}'`;break;case Ke.invalid_arguments:n="Invalid function arguments";break;case Ke.invalid_return_type:n="Invalid function return type";break;case Ke.invalid_date:n="Invalid date";break;case Ke.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Ut.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Ke.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Ke.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Ke.custom:n="Invalid input";break;case Ke.invalid_intersection_types:n="Intersection results could not be merged";break;case Ke.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Ke.not_finite:n="Number must be finite";break;default:n=t.defaultError,Ut.assertNever(e)}return{message:n}};let oX=N0;function lX(){return oX}const cX=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const d=r.filter(h=>!!h).slice().reverse();for(const h of d)l=h(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function rt(e,t){const n=lX(),r=cX({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===N0?void 0:N0].filter(a=>!!a)});e.common.issues.push(r)}class In{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return jt;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return In.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return jt;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const jt=Object.freeze({status:"aborted"}),uu=e=>({status:"dirty",value:e}),Tr=e=>({status:"valid",value:e}),Ik=e=>e.status==="aborted",Mk=e=>e.status==="dirty",Xc=e=>e.status==="valid",cp=e=>typeof Promise<"u"&&e instanceof Promise;var mt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(mt||(mt={}));class Ma{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Dk=(e,t)=>{if(Xc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new vi(e.common.issues);return this._error=n,this._error}}};function At(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:d}=e;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:d??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:d??n??l.defaultError}},description:a}}class Mt{get description(){return this._def.description}_getType(t){return Li(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Li(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new In,ctx:{common:t.parent.common,data:t.data,parsedType:Li(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(cp(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Li(t)},a=this._parseSync({data:t,path:r.path,parent:r});return Dk(r,a)}"~validate"(t){var r,a;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Li(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:n});return Xc(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(a=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(i=>Xc(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Li(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(cp(a)?a:Promise.resolve(a));return Dk(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:Ke.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new uo({schema:this,typeName:wt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return to.create(this,this._def)}nullable(){return sd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Oa.create(this)}promise(){return fp.create(this,this._def)}or(t){return dp.create([this,t],this._def)}and(t){return up.create(this,t,this._def)}transform(t){return new uo({...At(this._def),schema:this,typeName:wt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new D0({...At(this._def),innerType:this,defaultValue:n,typeName:wt.ZodDefault})}brand(){return new OX({typeName:wt.ZodBranded,type:this,...At(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new F0({...At(this._def),innerType:this,catchValue:n,typeName:wt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return V_.create(this,t)}readonly(){return B0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dX=/^c[^\s-]{8,}$/i,uX=/^[0-9a-z]+$/,hX=/^[0-9A-HJKMNP-TV-Z]{26}$/i,fX=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mX=/^[a-z0-9_-]{21}$/i,pX=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gX=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vX=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let wx;const yX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,bX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,_X=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,jX=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,NX=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,w4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",SX=new RegExp(`^${w4}$`);function _4(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function kX(e){return new RegExp(`^${_4(e)}$`)}function CX(e){let t=`${w4}T${_4(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function EX(e,t){return!!((t==="v4"||!t)&&yX.test(e)||(t==="v6"||!t)&&wX.test(e))}function TX(e,t){if(!pX.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function PX(e,t){return!!((t==="v4"||!t)&&bX.test(e)||(t==="v6"||!t)&&_X.test(e))}class ni extends Mt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==dt.string){const i=this._getOrReturnCtx(t);return rt(i,{code:Ke.invalid_type,expected:dt.string,received:i.parsedType}),jt}const r=new In;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),rt(a,{code:Ke.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),rt(a,{code:Ke.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?rt(a,{code:Ke.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&rt(a,{code:Ke.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")vX.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"email",code:Ke.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")wx||(wx=new RegExp(xX,"u")),wx.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"emoji",code:Ke.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")fX.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"uuid",code:Ke.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")mX.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"nanoid",code:Ke.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")dX.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"cuid",code:Ke.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")uX.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"cuid2",code:Ke.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")hX.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"ulid",code:Ke.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),rt(a,{validation:"url",code:Ke.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"regex",code:Ke.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),rt(a,{code:Ke.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),rt(a,{code:Ke.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),rt(a,{code:Ke.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?CX(i).test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{code:Ke.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?SX.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{code:Ke.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?kX(i).test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{code:Ke.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?gX.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"duration",code:Ke.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?EX(t.data,i.version)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"ip",code:Ke.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?TX(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"jwt",code:Ke.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?PX(t.data,i.version)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"cidr",code:Ke.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?jX.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"base64",code:Ke.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?NX.test(t.data)||(a=this._getOrReturnCtx(t,a),rt(a,{validation:"base64url",code:Ke.invalid_string,message:i.message}),r.dirty()):Ut.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Ke.invalid_string,...mt.errToObj(r)})}_addCheck(t){return new ni({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...mt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...mt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...mt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...mt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...mt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...mt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...mt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...mt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...mt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...mt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...mt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...mt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...mt.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...mt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...mt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...mt.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...mt.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...mt.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...mt.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...mt.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...mt.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...mt.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...mt.errToObj(n)})}nonempty(t){return this.min(1,mt.errToObj(t))}trim(){return new ni({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ni({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ni({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ni.create=e=>new ni({checks:[],typeName:wt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...At(e)});function AX(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class Jc extends Mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==dt.number){const i=this._getOrReturnCtx(t);return rt(i,{code:Ke.invalid_type,expected:dt.number,received:i.parsedType}),jt}let r;const a=new In;for(const i of this._def.checks)i.kind==="int"?Ut.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),rt(r,{code:Ke.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ke.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ke.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?AX(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ke.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),rt(r,{code:Ke.not_finite,message:i.message}),a.dirty()):Ut.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,mt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,mt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,mt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,mt.toString(n))}setLimit(t,n,r,a){return new Jc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:mt.toString(a)}]})}_addCheck(t){return new Jc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:mt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:mt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:mt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:mt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:mt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:mt.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:mt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:mt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:mt.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Ut.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Jc.create=e=>new Jc({checks:[],typeName:wt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...At(e)});class Qc extends Mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==dt.bigint)return this._getInvalidInput(t);let r;const a=new In;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ke.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ke.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ke.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Ut.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return rt(n,{code:Ke.invalid_type,expected:dt.bigint,received:n.parsedType}),jt}gte(t,n){return this.setLimit("min",t,!0,mt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,mt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,mt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,mt.toString(n))}setLimit(t,n,r,a){return new Qc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:mt.toString(a)}]})}_addCheck(t){return new Qc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:mt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:mt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:mt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:mt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:mt.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Qc.create=e=>new Qc({checks:[],typeName:wt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...At(e)});class S0 extends Mt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==dt.boolean){const r=this._getOrReturnCtx(t);return rt(r,{code:Ke.invalid_type,expected:dt.boolean,received:r.parsedType}),jt}return Tr(t.data)}}S0.create=e=>new S0({typeName:wt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...At(e)});class gh extends Mt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==dt.date){const i=this._getOrReturnCtx(t);return rt(i,{code:Ke.invalid_type,expected:dt.date,received:i.parsedType}),jt}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return rt(i,{code:Ke.invalid_date}),jt}const r=new In;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),rt(a,{code:Ke.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),rt(a,{code:Ke.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Ut.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new gh({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:mt.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:mt.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}gh.create=e=>new gh({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:wt.ZodDate,...At(e)});class k0 extends Mt{_parse(t){if(this._getType(t)!==dt.symbol){const r=this._getOrReturnCtx(t);return rt(r,{code:Ke.invalid_type,expected:dt.symbol,received:r.parsedType}),jt}return Tr(t.data)}}k0.create=e=>new k0({typeName:wt.ZodSymbol,...At(e)});class C0 extends Mt{_parse(t){if(this._getType(t)!==dt.undefined){const r=this._getOrReturnCtx(t);return rt(r,{code:Ke.invalid_type,expected:dt.undefined,received:r.parsedType}),jt}return Tr(t.data)}}C0.create=e=>new C0({typeName:wt.ZodUndefined,...At(e)});class E0 extends Mt{_parse(t){if(this._getType(t)!==dt.null){const r=this._getOrReturnCtx(t);return rt(r,{code:Ke.invalid_type,expected:dt.null,received:r.parsedType}),jt}return Tr(t.data)}}E0.create=e=>new E0({typeName:wt.ZodNull,...At(e)});class T0 extends Mt{constructor(){super(...arguments),this._any=!0}_parse(t){return Tr(t.data)}}T0.create=e=>new T0({typeName:wt.ZodAny,...At(e)});class P0 extends Mt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Tr(t.data)}}P0.create=e=>new P0({typeName:wt.ZodUnknown,...At(e)});class co extends Mt{_parse(t){const n=this._getOrReturnCtx(t);return rt(n,{code:Ke.invalid_type,expected:dt.never,received:n.parsedType}),jt}}co.create=e=>new co({typeName:wt.ZodNever,...At(e)});class A0 extends Mt{_parse(t){if(this._getType(t)!==dt.undefined){const r=this._getOrReturnCtx(t);return rt(r,{code:Ke.invalid_type,expected:dt.void,received:r.parsedType}),jt}return Tr(t.data)}}A0.create=e=>new A0({typeName:wt.ZodVoid,...At(e)});class Oa extends Mt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==dt.array)return rt(n,{code:Ke.invalid_type,expected:dt.array,received:n.parsedType}),jt;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,l=n.data.length<a.exactLength.value;(o||l)&&(rt(n,{code:o?Ke.too_big:Ke.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(rt(n,{code:Ke.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(rt(n,{code:Ke.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>a.type._parseAsync(new Ma(n,o,n.path,l)))).then(o=>In.mergeArray(r,o));const i=[...n.data].map((o,l)=>a.type._parseSync(new Ma(n,o,n.path,l)));return In.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Oa({...this._def,minLength:{value:t,message:mt.toString(n)}})}max(t,n){return new Oa({...this._def,maxLength:{value:t,message:mt.toString(n)}})}length(t,n){return new Oa({...this._def,exactLength:{value:t,message:mt.toString(n)}})}nonempty(t){return this.min(1,t)}}Oa.create=(e,t)=>new Oa({type:e,minLength:null,maxLength:null,exactLength:null,typeName:wt.ZodArray,...At(t)});function $l(e){if(e instanceof Es){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=to.create($l(r))}return new Es({...e._def,shape:()=>t})}else return e instanceof Oa?new Oa({...e._def,type:$l(e.element)}):e instanceof to?to.create($l(e.unwrap())):e instanceof sd?sd.create($l(e.unwrap())):e instanceof gl?gl.create(e.items.map(t=>$l(t))):e}class Es extends Mt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Ut.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==dt.object){const h=this._getOrReturnCtx(t);return rt(h,{code:Ke.invalid_type,expected:dt.object,received:h.parsedType}),jt}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof co&&this._def.unknownKeys==="strip"))for(const h in a.data)o.includes(h)||l.push(h);const d=[];for(const h of o){const f=i[h],u=a.data[h];d.push({key:{status:"valid",value:h},value:f._parse(new Ma(a,u,a.path,h)),alwaysSet:h in a.data})}if(this._def.catchall instanceof co){const h=this._def.unknownKeys;if(h==="passthrough")for(const f of l)d.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(h==="strict")l.length>0&&(rt(a,{code:Ke.unrecognized_keys,keys:l}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const f of l){const u=a.data[f];d.push({key:{status:"valid",value:f},value:h._parse(new Ma(a,u,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const h=[];for(const f of d){const u=await f.key,m=await f.value;h.push({key:u,value:m,alwaysSet:f.alwaysSet})}return h}).then(h=>In.mergeObjectSync(r,h)):In.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(t){return mt.errToObj,new Es({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:mt.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Es({...this._def,unknownKeys:"strip"})}passthrough(){return new Es({...this._def,unknownKeys:"passthrough"})}extend(t){return new Es({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Es({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:wt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Es({...this._def,catchall:t})}pick(t){const n={};for(const r of Ut.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Es({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Ut.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new Es({...this._def,shape:()=>n})}deepPartial(){return $l(this)}partial(t){const n={};for(const r of Ut.objectKeys(this.shape)){const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}return new Es({...this._def,shape:()=>n})}required(t){const n={};for(const r of Ut.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof to;)i=i._def.innerType;n[r]=i}return new Es({...this._def,shape:()=>n})}keyof(){return j4(Ut.objectKeys(this.shape))}}Es.create=(e,t)=>new Es({shape:()=>e,unknownKeys:"strip",catchall:co.create(),typeName:wt.ZodObject,...At(t)});Es.strictCreate=(e,t)=>new Es({shape:()=>e,unknownKeys:"strict",catchall:co.create(),typeName:wt.ZodObject,...At(t)});Es.lazycreate=(e,t)=>new Es({shape:e,unknownKeys:"strip",catchall:co.create(),typeName:wt.ZodObject,...At(t)});class dp extends Mt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new vi(l.ctx.common.issues));return rt(n,{code:Ke.invalid_union,unionErrors:o}),jt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const d of r){const h={...n,common:{...n.common,issues:[]},parent:null},f=d._parseSync({data:n.data,path:n.path,parent:h});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(d=>new vi(d));return rt(n,{code:Ke.invalid_union,unionErrors:l}),jt}}get options(){return this._def.options}}dp.create=(e,t)=>new dp({options:e,typeName:wt.ZodUnion,...At(t)});function O0(e,t){const n=Li(e),r=Li(t);if(e===t)return{valid:!0,data:e};if(n===dt.object&&r===dt.object){const a=Ut.objectKeys(t),i=Ut.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const d=O0(e[l],t[l]);if(!d.valid)return{valid:!1};o[l]=d.data}return{valid:!0,data:o}}else if(n===dt.array&&r===dt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],d=O0(o,l);if(!d.valid)return{valid:!1};a.push(d.data)}return{valid:!0,data:a}}else return n===dt.date&&r===dt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class up extends Mt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(Ik(i)||Ik(o))return jt;const l=O0(i.value,o.value);return l.valid?((Mk(i)||Mk(o))&&n.dirty(),{status:n.value,value:l.data}):(rt(r,{code:Ke.invalid_intersection_types}),jt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}up.create=(e,t,n)=>new up({left:e,right:t,typeName:wt.ZodIntersection,...At(n)});class gl extends Mt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==dt.array)return rt(r,{code:Ke.invalid_type,expected:dt.array,received:r.parsedType}),jt;if(r.data.length<this._def.items.length)return rt(r,{code:Ke.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),jt;!this._def.rest&&r.data.length>this._def.items.length&&(rt(r,{code:Ke.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,l)=>{const d=this._def.items[l]||this._def.rest;return d?d._parse(new Ma(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>In.mergeArray(n,o)):In.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new gl({...this._def,rest:t})}}gl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new gl({items:e,typeName:wt.ZodTuple,rest:null,...At(t)})};class hp extends Mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==dt.object)return rt(r,{code:Ke.invalid_type,expected:dt.object,received:r.parsedType}),jt;const a=[],i=this._def.keyType,o=this._def.valueType;for(const l in r.data)a.push({key:i._parse(new Ma(r,l,r.path,l)),value:o._parse(new Ma(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?In.mergeObjectAsync(n,a):In.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Mt?new hp({keyType:t,valueType:n,typeName:wt.ZodRecord,...At(r)}):new hp({keyType:ni.create(),valueType:t,typeName:wt.ZodRecord,...At(n)})}}class R0 extends Mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==dt.map)return rt(r,{code:Ke.invalid_type,expected:dt.map,received:r.parsedType}),jt;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([l,d],h)=>({key:a._parse(new Ma(r,l,r.path,[h,"key"])),value:i._parse(new Ma(r,d,r.path,[h,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const d of o){const h=await d.key,f=await d.value;if(h.status==="aborted"||f.status==="aborted")return jt;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(h.value,f.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const d of o){const h=d.key,f=d.value;if(h.status==="aborted"||f.status==="aborted")return jt;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(h.value,f.value)}return{status:n.value,value:l}}}}R0.create=(e,t,n)=>new R0({valueType:t,keyType:e,typeName:wt.ZodMap,...At(n)});class ed extends Mt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==dt.set)return rt(r,{code:Ke.invalid_type,expected:dt.set,received:r.parsedType}),jt;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(rt(r,{code:Ke.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(rt(r,{code:Ke.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(d){const h=new Set;for(const f of d){if(f.status==="aborted")return jt;f.status==="dirty"&&n.dirty(),h.add(f.value)}return{status:n.value,value:h}}const l=[...r.data.values()].map((d,h)=>i._parse(new Ma(r,d,r.path,h)));return r.common.async?Promise.all(l).then(d=>o(d)):o(l)}min(t,n){return new ed({...this._def,minSize:{value:t,message:mt.toString(n)}})}max(t,n){return new ed({...this._def,maxSize:{value:t,message:mt.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}ed.create=(e,t)=>new ed({valueType:e,minSize:null,maxSize:null,typeName:wt.ZodSet,...At(t)});class L0 extends Mt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}L0.create=(e,t)=>new L0({getter:e,typeName:wt.ZodLazy,...At(t)});class I0 extends Mt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return rt(n,{received:n.data,code:Ke.invalid_literal,expected:this._def.value}),jt}return{status:"valid",value:t.data}}get value(){return this._def.value}}I0.create=(e,t)=>new I0({value:e,typeName:wt.ZodLiteral,...At(t)});function j4(e,t){return new td({values:e,typeName:wt.ZodEnum,...At(t)})}class td extends Mt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return rt(n,{expected:Ut.joinValues(r),received:n.parsedType,code:Ke.invalid_type}),jt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return rt(n,{received:n.data,code:Ke.invalid_enum_value,options:r}),jt}return Tr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return td.create(t,{...this._def,...n})}exclude(t,n=this._def){return td.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}td.create=j4;class M0 extends Mt{_parse(t){const n=Ut.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==dt.string&&r.parsedType!==dt.number){const a=Ut.objectValues(n);return rt(r,{expected:Ut.joinValues(a),received:r.parsedType,code:Ke.invalid_type}),jt}if(this._cache||(this._cache=new Set(Ut.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Ut.objectValues(n);return rt(r,{received:r.data,code:Ke.invalid_enum_value,options:a}),jt}return Tr(t.data)}get enum(){return this._def.values}}M0.create=(e,t)=>new M0({values:e,typeName:wt.ZodNativeEnum,...At(t)});class fp extends Mt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==dt.promise&&n.common.async===!1)return rt(n,{code:Ke.invalid_type,expected:dt.promise,received:n.parsedType}),jt;const r=n.parsedType===dt.promise?n.data:Promise.resolve(n.data);return Tr(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}fp.create=(e,t)=>new fp({type:e,typeName:wt.ZodPromise,...At(t)});class uo extends Mt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===wt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{rt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return jt;const d=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return d.status==="aborted"?jt:d.status==="dirty"||n.value==="dirty"?uu(d.value):d});{if(n.value==="aborted")return jt;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?jt:l.status==="dirty"||n.value==="dirty"?uu(l.value):l}}if(a.type==="refinement"){const o=l=>{const d=a.refinement(l,i);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?jt:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?jt:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Xc(o))return jt;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Xc(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:n.value,value:l})):jt);Ut.assertNever(a)}}uo.create=(e,t,n)=>new uo({schema:e,typeName:wt.ZodEffects,effect:t,...At(n)});uo.createWithPreprocess=(e,t,n)=>new uo({schema:t,effect:{type:"preprocess",transform:e},typeName:wt.ZodEffects,...At(n)});class to extends Mt{_parse(t){return this._getType(t)===dt.undefined?Tr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}to.create=(e,t)=>new to({innerType:e,typeName:wt.ZodOptional,...At(t)});class sd extends Mt{_parse(t){return this._getType(t)===dt.null?Tr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}sd.create=(e,t)=>new sd({innerType:e,typeName:wt.ZodNullable,...At(t)});class D0 extends Mt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===dt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}D0.create=(e,t)=>new D0({innerType:e,typeName:wt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...At(t)});class F0 extends Mt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return cp(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new vi(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new vi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}F0.create=(e,t)=>new F0({innerType:e,typeName:wt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...At(t)});class $0 extends Mt{_parse(t){if(this._getType(t)!==dt.nan){const r=this._getOrReturnCtx(t);return rt(r,{code:Ke.invalid_type,expected:dt.nan,received:r.parsedType}),jt}return{status:"valid",value:t.data}}}$0.create=e=>new $0({typeName:wt.ZodNaN,...At(e)});class OX extends Mt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class V_ extends Mt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?jt:i.status==="dirty"?(n.dirty(),uu(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?jt:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new V_({in:t,out:n,typeName:wt.ZodPipeline})}}class B0 extends Mt{_parse(t){const n=this._def.innerType._parse(t),r=a=>(Xc(a)&&(a.value=Object.freeze(a.value)),a);return cp(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}B0.create=(e,t)=>new B0({innerType:e,typeName:wt.ZodReadonly,...At(t)});Es.lazycreate;var wt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(wt||(wt={}));const Ls=ni.create,ba=Jc.create;$0.create;Qc.create;const wc=S0.create;gh.create;k0.create;C0.create;E0.create;const z0=T0.create;P0.create;co.create;A0.create;const mp=Oa.create,N4=Es.create;Es.strictCreate;dp.create;up.create;gl.create;const S4=hp.create;R0.create;ed.create;L0.create;I0.create;const k4=td.create;M0.create;fp.create;uo.create;to.create;sd.create;uo.createWithPreprocess;function RX(){this.__data__=[],this.size=0}var LX=RX;function IX(e,t){return e===t||e!==e&&t!==t}var C4=IX,MX=C4;function DX(e,t){for(var n=e.length;n--;)if(MX(e[n][0],t))return n;return-1}var Ag=DX,FX=Ag,$X=Array.prototype,BX=$X.splice;function zX(e){var t=this.__data__,n=FX(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():BX.call(t,n,1),--this.size,!0}var VX=zX,UX=Ag;function qX(e){var t=this.__data__,n=UX(t,e);return n<0?void 0:t[n][1]}var HX=qX,WX=Ag;function GX(e){return WX(this.__data__,e)>-1}var KX=GX,ZX=Ag;function YX(e,t){var n=this.__data__,r=ZX(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var XX=YX,JX=LX,QX=VX,eJ=HX,tJ=KX,sJ=XX;function bd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}bd.prototype.clear=JX;bd.prototype.delete=QX;bd.prototype.get=eJ;bd.prototype.has=tJ;bd.prototype.set=sJ;var Og=bd,nJ=Og;function rJ(){this.__data__=new nJ,this.size=0}var aJ=rJ;function iJ(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var oJ=iJ;function lJ(e){return this.__data__.get(e)}var cJ=lJ;function dJ(e){return this.__data__.has(e)}var uJ=dJ,hJ=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,E4=hJ,fJ=E4,mJ=typeof self=="object"&&self&&self.Object===Object&&self,pJ=fJ||mJ||Function("return this")(),bi=pJ,gJ=bi,vJ=gJ.Symbol,U_=vJ,Fk=U_,T4=Object.prototype,xJ=T4.hasOwnProperty,yJ=T4.toString,Qd=Fk?Fk.toStringTag:void 0;function bJ(e){var t=xJ.call(e,Qd),n=e[Qd];try{e[Qd]=void 0;var r=!0}catch{}var a=yJ.call(e);return r&&(t?e[Qd]=n:delete e[Qd]),a}var wJ=bJ,_J=Object.prototype,jJ=_J.toString;function NJ(e){return jJ.call(e)}var SJ=NJ,$k=U_,kJ=wJ,CJ=SJ,EJ="[object Null]",TJ="[object Undefined]",Bk=$k?$k.toStringTag:void 0;function PJ(e){return e==null?e===void 0?TJ:EJ:Bk&&Bk in Object(e)?kJ(e):CJ(e)}var Rg=PJ;function AJ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var P4=AJ,OJ=Rg,RJ=P4,LJ="[object AsyncFunction]",IJ="[object Function]",MJ="[object GeneratorFunction]",DJ="[object Proxy]";function FJ(e){if(!RJ(e))return!1;var t=OJ(e);return t==IJ||t==MJ||t==LJ||t==DJ}var A4=FJ,$J=bi,BJ=$J["__core-js_shared__"],zJ=BJ,_x=zJ,zk=function(){var e=/[^.]+$/.exec(_x&&_x.keys&&_x.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function VJ(e){return!!zk&&zk in e}var UJ=VJ,qJ=Function.prototype,HJ=qJ.toString;function WJ(e){if(e!=null){try{return HJ.call(e)}catch{}try{return e+""}catch{}}return""}var O4=WJ,GJ=A4,KJ=UJ,ZJ=P4,YJ=O4,XJ=/[\\^$.*+?()[\]{}|]/g,JJ=/^\[object .+?Constructor\]$/,QJ=Function.prototype,eQ=Object.prototype,tQ=QJ.toString,sQ=eQ.hasOwnProperty,nQ=RegExp("^"+tQ.call(sQ).replace(XJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rQ(e){if(!ZJ(e)||KJ(e))return!1;var t=GJ(e)?nQ:JJ;return t.test(YJ(e))}var aQ=rQ;function iQ(e,t){return e==null?void 0:e[t]}var oQ=iQ,lQ=aQ,cQ=oQ;function dQ(e,t){var n=cQ(e,t);return lQ(n)?n:void 0}var wd=dQ,uQ=wd,hQ=bi,fQ=uQ(hQ,"Map"),q_=fQ,mQ=wd,pQ=mQ(Object,"create"),Lg=pQ,Vk=Lg;function gQ(){this.__data__=Vk?Vk(null):{},this.size=0}var vQ=gQ;function xQ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var yQ=xQ,bQ=Lg,wQ="__lodash_hash_undefined__",_Q=Object.prototype,jQ=_Q.hasOwnProperty;function NQ(e){var t=this.__data__;if(bQ){var n=t[e];return n===wQ?void 0:n}return jQ.call(t,e)?t[e]:void 0}var SQ=NQ,kQ=Lg,CQ=Object.prototype,EQ=CQ.hasOwnProperty;function TQ(e){var t=this.__data__;return kQ?t[e]!==void 0:EQ.call(t,e)}var PQ=TQ,AQ=Lg,OQ="__lodash_hash_undefined__";function RQ(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=AQ&&t===void 0?OQ:t,this}var LQ=RQ,IQ=vQ,MQ=yQ,DQ=SQ,FQ=PQ,$Q=LQ;function _d(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_d.prototype.clear=IQ;_d.prototype.delete=MQ;_d.prototype.get=DQ;_d.prototype.has=FQ;_d.prototype.set=$Q;var BQ=_d,Uk=BQ,zQ=Og,VQ=q_;function UQ(){this.size=0,this.__data__={hash:new Uk,map:new(VQ||zQ),string:new Uk}}var qQ=UQ;function HQ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var WQ=HQ,GQ=WQ;function KQ(e,t){var n=e.__data__;return GQ(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ig=KQ,ZQ=Ig;function YQ(e){var t=ZQ(this,e).delete(e);return this.size-=t?1:0,t}var XQ=YQ,JQ=Ig;function QQ(e){return JQ(this,e).get(e)}var eee=QQ,tee=Ig;function see(e){return tee(this,e).has(e)}var nee=see,ree=Ig;function aee(e,t){var n=ree(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var iee=aee,oee=qQ,lee=XQ,cee=eee,dee=nee,uee=iee;function jd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}jd.prototype.clear=oee;jd.prototype.delete=lee;jd.prototype.get=cee;jd.prototype.has=dee;jd.prototype.set=uee;var R4=jd,hee=Og,fee=q_,mee=R4,pee=200;function gee(e,t){var n=this.__data__;if(n instanceof hee){var r=n.__data__;if(!fee||r.length<pee-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new mee(r)}return n.set(e,t),this.size=n.size,this}var vee=gee,xee=Og,yee=aJ,bee=oJ,wee=cJ,_ee=uJ,jee=vee;function Nd(e){var t=this.__data__=new xee(e);this.size=t.size}Nd.prototype.clear=yee;Nd.prototype.delete=bee;Nd.prototype.get=wee;Nd.prototype.has=_ee;Nd.prototype.set=jee;var Nee=Nd,See="__lodash_hash_undefined__";function kee(e){return this.__data__.set(e,See),this}var Cee=kee;function Eee(e){return this.__data__.has(e)}var Tee=Eee,Pee=R4,Aee=Cee,Oee=Tee;function pp(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Pee;++t<n;)this.add(e[t])}pp.prototype.add=pp.prototype.push=Aee;pp.prototype.has=Oee;var Ree=pp;function Lee(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Iee=Lee;function Mee(e,t){return e.has(t)}var Dee=Mee,Fee=Ree,$ee=Iee,Bee=Dee,zee=1,Vee=2;function Uee(e,t,n,r,a,i){var o=n&zee,l=e.length,d=t.length;if(l!=d&&!(o&&d>l))return!1;var h=i.get(e),f=i.get(t);if(h&&f)return h==t&&f==e;var u=-1,m=!0,p=n&Vee?new Fee:void 0;for(i.set(e,t),i.set(t,e);++u<l;){var w=e[u],v=t[u];if(r)var x=o?r(v,w,u,t,e,i):r(w,v,u,e,t,i);if(x!==void 0){if(x)continue;m=!1;break}if(p){if(!$ee(t,function(y,b){if(!Bee(p,b)&&(w===y||a(w,y,n,r,i)))return p.push(b)})){m=!1;break}}else if(!(w===v||a(w,v,n,r,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var L4=Uee,qee=bi,Hee=qee.Uint8Array,Wee=Hee;function Gee(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var Kee=Gee;function Zee(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Yee=Zee,qk=U_,Hk=Wee,Xee=C4,Jee=L4,Qee=Kee,ete=Yee,tte=1,ste=2,nte="[object Boolean]",rte="[object Date]",ate="[object Error]",ite="[object Map]",ote="[object Number]",lte="[object RegExp]",cte="[object Set]",dte="[object String]",ute="[object Symbol]",hte="[object ArrayBuffer]",fte="[object DataView]",Wk=qk?qk.prototype:void 0,jx=Wk?Wk.valueOf:void 0;function mte(e,t,n,r,a,i,o){switch(n){case fte:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case hte:return!(e.byteLength!=t.byteLength||!i(new Hk(e),new Hk(t)));case nte:case rte:case ote:return Xee(+e,+t);case ate:return e.name==t.name&&e.message==t.message;case lte:case dte:return e==t+"";case ite:var l=Qee;case cte:var d=r&tte;if(l||(l=ete),e.size!=t.size&&!d)return!1;var h=o.get(e);if(h)return h==t;r|=ste,o.set(e,t);var f=Jee(l(e),l(t),r,a,i,o);return o.delete(e),f;case ute:if(jx)return jx.call(e)==jx.call(t)}return!1}var pte=mte;function gte(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var vte=gte,xte=Array.isArray,H_=xte,yte=vte,bte=H_;function wte(e,t,n){var r=t(e);return bte(e)?r:yte(r,n(e))}var _te=wte;function jte(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var Nte=jte;function Ste(){return[]}var kte=Ste,Cte=Nte,Ete=kte,Tte=Object.prototype,Pte=Tte.propertyIsEnumerable,Gk=Object.getOwnPropertySymbols,Ate=Gk?function(e){return e==null?[]:(e=Object(e),Cte(Gk(e),function(t){return Pte.call(e,t)}))}:Ete,Ote=Ate;function Rte(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Lte=Rte;function Ite(e){return e!=null&&typeof e=="object"}var Mg=Ite,Mte=Rg,Dte=Mg,Fte="[object Arguments]";function $te(e){return Dte(e)&&Mte(e)==Fte}var Bte=$te,Kk=Bte,zte=Mg,I4=Object.prototype,Vte=I4.hasOwnProperty,Ute=I4.propertyIsEnumerable,qte=Kk(function(){return arguments}())?Kk:function(e){return zte(e)&&Vte.call(e,"callee")&&!Ute.call(e,"callee")},Hte=qte,gp={exports:{}};function Wte(){return!1}var Gte=Wte;gp.exports;(function(e,t){var n=bi,r=Gte,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,d=l?l.isBuffer:void 0,h=d||r;e.exports=h})(gp,gp.exports);var M4=gp.exports,Kte=9007199254740991,Zte=/^(?:0|[1-9]\d*)$/;function Yte(e,t){var n=typeof e;return t=t??Kte,!!t&&(n=="number"||n!="symbol"&&Zte.test(e))&&e>-1&&e%1==0&&e<t}var Xte=Yte,Jte=9007199254740991;function Qte(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Jte}var D4=Qte,ese=Rg,tse=D4,sse=Mg,nse="[object Arguments]",rse="[object Array]",ase="[object Boolean]",ise="[object Date]",ose="[object Error]",lse="[object Function]",cse="[object Map]",dse="[object Number]",use="[object Object]",hse="[object RegExp]",fse="[object Set]",mse="[object String]",pse="[object WeakMap]",gse="[object ArrayBuffer]",vse="[object DataView]",xse="[object Float32Array]",yse="[object Float64Array]",bse="[object Int8Array]",wse="[object Int16Array]",_se="[object Int32Array]",jse="[object Uint8Array]",Nse="[object Uint8ClampedArray]",Sse="[object Uint16Array]",kse="[object Uint32Array]",ds={};ds[xse]=ds[yse]=ds[bse]=ds[wse]=ds[_se]=ds[jse]=ds[Nse]=ds[Sse]=ds[kse]=!0;ds[nse]=ds[rse]=ds[gse]=ds[ase]=ds[vse]=ds[ise]=ds[ose]=ds[lse]=ds[cse]=ds[dse]=ds[use]=ds[hse]=ds[fse]=ds[mse]=ds[pse]=!1;function Cse(e){return sse(e)&&tse(e.length)&&!!ds[ese(e)]}var Ese=Cse;function Tse(e){return function(t){return e(t)}}var Pse=Tse,vp={exports:{}};vp.exports;(function(e,t){var n=E4,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,l=function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(vp,vp.exports);var Ase=vp.exports,Ose=Ese,Rse=Pse,Zk=Ase,Yk=Zk&&Zk.isTypedArray,Lse=Yk?Rse(Yk):Ose,F4=Lse,Ise=Lte,Mse=Hte,Dse=H_,Fse=M4,$se=Xte,Bse=F4,zse=Object.prototype,Vse=zse.hasOwnProperty;function Use(e,t){var n=Dse(e),r=!n&&Mse(e),a=!n&&!r&&Fse(e),i=!n&&!r&&!a&&Bse(e),o=n||r||a||i,l=o?Ise(e.length,String):[],d=l.length;for(var h in e)(t||Vse.call(e,h))&&!(o&&(h=="length"||a&&(h=="offset"||h=="parent")||i&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||$se(h,d)))&&l.push(h);return l}var qse=Use,Hse=Object.prototype;function Wse(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Hse;return e===n}var Gse=Wse;function Kse(e,t){return function(n){return e(t(n))}}var Zse=Kse,Yse=Zse,Xse=Yse(Object.keys,Object),Jse=Xse,Qse=Gse,ene=Jse,tne=Object.prototype,sne=tne.hasOwnProperty;function nne(e){if(!Qse(e))return ene(e);var t=[];for(var n in Object(e))sne.call(e,n)&&n!="constructor"&&t.push(n);return t}var rne=nne,ane=A4,ine=D4;function one(e){return e!=null&&ine(e.length)&&!ane(e)}var lne=one,cne=qse,dne=rne,une=lne;function hne(e){return une(e)?cne(e):dne(e)}var fne=hne,mne=_te,pne=Ote,gne=fne;function vne(e){return mne(e,gne,pne)}var xne=vne,Xk=xne,yne=1,bne=Object.prototype,wne=bne.hasOwnProperty;function _ne(e,t,n,r,a,i){var o=n&yne,l=Xk(e),d=l.length,h=Xk(t),f=h.length;if(d!=f&&!o)return!1;for(var u=d;u--;){var m=l[u];if(!(o?m in t:wne.call(t,m)))return!1}var p=i.get(e),w=i.get(t);if(p&&w)return p==t&&w==e;var v=!0;i.set(e,t),i.set(t,e);for(var x=o;++u<d;){m=l[u];var y=e[m],b=t[m];if(r)var j=o?r(b,y,m,t,e,i):r(y,b,m,e,t,i);if(!(j===void 0?y===b||a(y,b,n,r,i):j)){v=!1;break}x||(x=m=="constructor")}if(v&&!x){var N=e.constructor,S=t.constructor;N!=S&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof S=="function"&&S instanceof S)&&(v=!1)}return i.delete(e),i.delete(t),v}var jne=_ne,Nne=wd,Sne=bi,kne=Nne(Sne,"DataView"),Cne=kne,Ene=wd,Tne=bi,Pne=Ene(Tne,"Promise"),Ane=Pne,One=wd,Rne=bi,Lne=One(Rne,"Set"),Ine=Lne,Mne=wd,Dne=bi,Fne=Mne(Dne,"WeakMap"),$ne=Fne,V0=Cne,U0=q_,q0=Ane,H0=Ine,W0=$ne,$4=Rg,Sd=O4,Jk="[object Map]",Bne="[object Object]",Qk="[object Promise]",e2="[object Set]",t2="[object WeakMap]",s2="[object DataView]",zne=Sd(V0),Vne=Sd(U0),Une=Sd(q0),qne=Sd(H0),Hne=Sd(W0),Oo=$4;(V0&&Oo(new V0(new ArrayBuffer(1)))!=s2||U0&&Oo(new U0)!=Jk||q0&&Oo(q0.resolve())!=Qk||H0&&Oo(new H0)!=e2||W0&&Oo(new W0)!=t2)&&(Oo=function(e){var t=$4(e),n=t==Bne?e.constructor:void 0,r=n?Sd(n):"";if(r)switch(r){case zne:return s2;case Vne:return Jk;case Une:return Qk;case qne:return e2;case Hne:return t2}return t});var Wne=Oo,Nx=Nee,Gne=L4,Kne=pte,Zne=jne,n2=Wne,r2=H_,a2=M4,Yne=F4,Xne=1,i2="[object Arguments]",o2="[object Array]",Mf="[object Object]",Jne=Object.prototype,l2=Jne.hasOwnProperty;function Qne(e,t,n,r,a,i){var o=r2(e),l=r2(t),d=o?o2:n2(e),h=l?o2:n2(t);d=d==i2?Mf:d,h=h==i2?Mf:h;var f=d==Mf,u=h==Mf,m=d==h;if(m&&a2(e)){if(!a2(t))return!1;o=!0,f=!1}if(m&&!f)return i||(i=new Nx),o||Yne(e)?Gne(e,t,n,r,a,i):Kne(e,t,d,n,r,a,i);if(!(n&Xne)){var p=f&&l2.call(e,"__wrapped__"),w=u&&l2.call(t,"__wrapped__");if(p||w){var v=p?e.value():e,x=w?t.value():t;return i||(i=new Nx),a(v,x,n,r,i)}}return m?(i||(i=new Nx),Zne(e,t,n,r,a,i)):!1}var ere=Qne,tre=ere,c2=Mg;function B4(e,t,n,r,a){return e===t?!0:e==null||t==null||!c2(e)&&!c2(t)?e!==e&&t!==t:tre(e,t,n,r,B4,a)}var sre=B4,nre=sre;function rre(e,t){return nre(e,t)}var are=rre,z4={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(r,a){e.exports=a()})(typeof self<"u"?self:Ra,function(){return function(n){var r={};function a(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=n,a.c=r,a.d=function(i,o,l){a.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=109)}([function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(17),o=a(18),l=a(19),d=a(45),h=a(46),f=a(47),u=a(48),m=a(49),p=a(12),w=a(32),v=a(33),x=a(31),y=a(1),b={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:i.default,Format:o.default,Leaf:l.default,Embed:u.default,Scroll:d.default,Block:f.default,Inline:h.default,Text:m.default,Attributor:{Attribute:p.default,Class:w.default,Style:v.default,Store:x.default}};r.default=b},function(n,r,a){var i=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var j in b)b.hasOwnProperty(j)&&(y[j]=b[j])};return function(y,b){x(y,b);function j(){this.constructor=y}y.prototype=b===null?Object.create(b):(j.prototype=b.prototype,new j)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(x){i(y,x);function y(b){var j=this;return b="[Parchment] "+b,j=x.call(this,b)||this,j.message=b,j.name=j.constructor.name,j}return y}(Error);r.ParchmentError=o;var l={},d={},h={},f={};r.DATA_KEY="__blot";var u;(function(x){x[x.TYPE=3]="TYPE",x[x.LEVEL=12]="LEVEL",x[x.ATTRIBUTE=13]="ATTRIBUTE",x[x.BLOT=14]="BLOT",x[x.INLINE=7]="INLINE",x[x.BLOCK=11]="BLOCK",x[x.BLOCK_BLOT=10]="BLOCK_BLOT",x[x.INLINE_BLOT=6]="INLINE_BLOT",x[x.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",x[x.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",x[x.ANY=15]="ANY"})(u=r.Scope||(r.Scope={}));function m(x,y){var b=w(x);if(b==null)throw new o("Unable to create "+x+" blot");var j=b,N=x instanceof Node||x.nodeType===Node.TEXT_NODE?x:j.create(y);return new j(N,y)}r.create=m;function p(x,y){return y===void 0&&(y=!1),x==null?null:x[r.DATA_KEY]!=null?x[r.DATA_KEY].blot:y?p(x.parentNode,y):null}r.find=p;function w(x,y){y===void 0&&(y=u.ANY);var b;if(typeof x=="string")b=f[x]||l[x];else if(x instanceof Text||x.nodeType===Node.TEXT_NODE)b=f.text;else if(typeof x=="number")x&u.LEVEL&u.BLOCK?b=f.block:x&u.LEVEL&u.INLINE&&(b=f.inline);else if(x instanceof HTMLElement){var j=(x.getAttribute("class")||"").split(/\s+/);for(var N in j)if(b=d[j[N]],b)break;b=b||h[x.tagName]}return b==null?null:y&u.LEVEL&b.scope&&y&u.TYPE&b.scope?b:null}r.query=w;function v(){for(var x=[],y=0;y<arguments.length;y++)x[y]=arguments[y];if(x.length>1)return x.map(function(N){return v(N)});var b=x[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new o("Invalid definition");if(b.blotName==="abstract")throw new o("Cannot register abstract class");if(f[b.blotName||b.attrName]=b,typeof b.keyName=="string")l[b.keyName]=b;else if(b.className!=null&&(d[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(N){return N.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var j=Array.isArray(b.tagName)?b.tagName:[b.tagName];j.forEach(function(N){(h[N]==null||b.className==null)&&(h[N]=b)})}return b}r.register=v},function(n,r,a){var i=a(51),o=a(11),l=a(3),d=a(20),h="\0",f=function(u){Array.isArray(u)?this.ops=u:u!=null&&Array.isArray(u.ops)?this.ops=u.ops:this.ops=[]};f.prototype.insert=function(u,m){var p={};return u.length===0?this:(p.insert=u,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p))},f.prototype.delete=function(u){return u<=0?this:this.push({delete:u})},f.prototype.retain=function(u,m){if(u<=0)return this;var p={retain:u};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p)},f.prototype.push=function(u){var m=this.ops.length,p=this.ops[m-1];if(u=l(!0,{},u),typeof p=="object"){if(typeof u.delete=="number"&&typeof p.delete=="number")return this.ops[m-1]={delete:p.delete+u.delete},this;if(typeof p.delete=="number"&&u.insert!=null&&(m-=1,p=this.ops[m-1],typeof p!="object"))return this.ops.unshift(u),this;if(o(u.attributes,p.attributes)){if(typeof u.insert=="string"&&typeof p.insert=="string")return this.ops[m-1]={insert:p.insert+u.insert},typeof u.attributes=="object"&&(this.ops[m-1].attributes=u.attributes),this;if(typeof u.retain=="number"&&typeof p.retain=="number")return this.ops[m-1]={retain:p.retain+u.retain},typeof u.attributes=="object"&&(this.ops[m-1].attributes=u.attributes),this}}return m===this.ops.length?this.ops.push(u):this.ops.splice(m,0,u),this},f.prototype.chop=function(){var u=this.ops[this.ops.length-1];return u&&u.retain&&!u.attributes&&this.ops.pop(),this},f.prototype.filter=function(u){return this.ops.filter(u)},f.prototype.forEach=function(u){this.ops.forEach(u)},f.prototype.map=function(u){return this.ops.map(u)},f.prototype.partition=function(u){var m=[],p=[];return this.forEach(function(w){var v=u(w)?m:p;v.push(w)}),[m,p]},f.prototype.reduce=function(u,m){return this.ops.reduce(u,m)},f.prototype.changeLength=function(){return this.reduce(function(u,m){return m.insert?u+d.length(m):m.delete?u-m.delete:u},0)},f.prototype.length=function(){return this.reduce(function(u,m){return u+d.length(m)},0)},f.prototype.slice=function(u,m){u=u||0,typeof m!="number"&&(m=1/0);for(var p=[],w=d.iterator(this.ops),v=0;v<m&&w.hasNext();){var x;v<u?x=w.next(u-v):(x=w.next(m-v),p.push(x)),v+=d.length(x)}return new f(p)},f.prototype.compose=function(u){var m=d.iterator(this.ops),p=d.iterator(u.ops),w=[],v=p.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var x=v.retain;m.peekType()==="insert"&&m.peekLength()<=x;)x-=m.peekLength(),w.push(m.next());v.retain-x>0&&p.next(v.retain-x)}for(var y=new f(w);m.hasNext()||p.hasNext();)if(p.peekType()==="insert")y.push(p.next());else if(m.peekType()==="delete")y.push(m.next());else{var b=Math.min(m.peekLength(),p.peekLength()),j=m.next(b),N=p.next(b);if(typeof N.retain=="number"){var S={};typeof j.retain=="number"?S.retain=b:S.insert=j.insert;var P=d.attributes.compose(j.attributes,N.attributes,typeof j.retain=="number");if(P&&(S.attributes=P),y.push(S),!p.hasNext()&&o(y.ops[y.ops.length-1],S)){var T=new f(m.rest());return y.concat(T).chop()}}else typeof N.delete=="number"&&typeof j.retain=="number"&&y.push(N)}return y.chop()},f.prototype.concat=function(u){var m=new f(this.ops.slice());return u.ops.length>0&&(m.push(u.ops[0]),m.ops=m.ops.concat(u.ops.slice(1))),m},f.prototype.diff=function(u,m){if(this.ops===u.ops)return new f;var p=[this,u].map(function(b){return b.map(function(j){if(j.insert!=null)return typeof j.insert=="string"?j.insert:h;var N=b===u?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),w=new f,v=i(p[0],p[1],m),x=d.iterator(this.ops),y=d.iterator(u.ops);return v.forEach(function(b){for(var j=b[1].length;j>0;){var N=0;switch(b[0]){case i.INSERT:N=Math.min(y.peekLength(),j),w.push(y.next(N));break;case i.DELETE:N=Math.min(j,x.peekLength()),x.next(N),w.delete(N);break;case i.EQUAL:N=Math.min(x.peekLength(),y.peekLength(),j);var S=x.next(N),P=y.next(N);o(S.insert,P.insert)?w.retain(N,d.attributes.diff(S.attributes,P.attributes)):w.push(P).delete(N);break}j-=N}}),w.chop()},f.prototype.eachLine=function(u,m){m=m||`
`;for(var p=d.iterator(this.ops),w=new f,v=0;p.hasNext();){if(p.peekType()!=="insert")return;var x=p.peek(),y=d.length(x)-p.peekLength(),b=typeof x.insert=="string"?x.insert.indexOf(m,y)-y:-1;if(b<0)w.push(p.next());else if(b>0)w.push(p.next(b));else{if(u(w,p.next(1).attributes||{},v)===!1)return;v+=1,w=new f}}w.length()>0&&u(w,{},v)},f.prototype.transform=function(u,m){if(m=!!m,typeof u=="number")return this.transformPosition(u,m);for(var p=d.iterator(this.ops),w=d.iterator(u.ops),v=new f;p.hasNext()||w.hasNext();)if(p.peekType()==="insert"&&(m||w.peekType()!=="insert"))v.retain(d.length(p.next()));else if(w.peekType()==="insert")v.push(w.next());else{var x=Math.min(p.peekLength(),w.peekLength()),y=p.next(x),b=w.next(x);if(y.delete)continue;b.delete?v.push(b):v.retain(x,d.attributes.transform(y.attributes,b.attributes,m))}return v.chop()},f.prototype.transformPosition=function(u,m){m=!!m;for(var p=d.iterator(this.ops),w=0;p.hasNext()&&w<=u;){var v=p.peekLength(),x=p.peekType();if(p.next(),x==="delete"){u-=Math.min(v,u-w);continue}else x==="insert"&&(w<u||!m)&&(u+=v);w+=v}return u},n.exports=f},function(n,r){var a=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d=function(p){return typeof Array.isArray=="function"?Array.isArray(p):i.call(p)==="[object Array]"},h=function(p){if(!p||i.call(p)!=="[object Object]")return!1;var w=a.call(p,"constructor"),v=p.constructor&&p.constructor.prototype&&a.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!w&&!v)return!1;var x;for(x in p);return typeof x>"u"||a.call(p,x)},f=function(p,w){o&&w.name==="__proto__"?o(p,w.name,{enumerable:!0,configurable:!0,value:w.newValue,writable:!0}):p[w.name]=w.newValue},u=function(p,w){if(w==="__proto__")if(a.call(p,w)){if(l)return l(p,w).value}else return;return p[w]};n.exports=function m(){var p,w,v,x,y,b,j=arguments[0],N=1,S=arguments.length,P=!1;for(typeof j=="boolean"&&(P=j,j=arguments[1]||{},N=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});N<S;++N)if(p=arguments[N],p!=null)for(w in p)v=u(j,w),x=u(p,w),j!==x&&(P&&x&&(h(x)||(y=d(x)))?(y?(y=!1,b=v&&d(v)?v:[]):b=v&&h(v)?v:{},f(j,{name:w,newValue:m(P,b,x)})):typeof x<"u"&&f(j,{name:w,newValue:x}));return j}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var i=function(){function R(C,D){for(var A=0;A<D.length;A++){var M=D[A];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(C,M.key,M)}}return function(C,D,A){return D&&R(C.prototype,D),A&&R(C,A),C}}(),o=function R(C,D,A){C===null&&(C=Function.prototype);var M=Object.getOwnPropertyDescriptor(C,D);if(M===void 0){var Z=Object.getPrototypeOf(C);return Z===null?void 0:R(Z,D,A)}else{if("value"in M)return M.value;var X=M.get;return X===void 0?void 0:X.call(A)}},l=a(3),d=j(l),h=a(2),f=j(h),u=a(0),m=j(u),p=a(16),w=j(p),v=a(6),x=j(v),y=a(7),b=j(y);function j(R){return R&&R.__esModule?R:{default:R}}function N(R,C){if(!(R instanceof C))throw new TypeError("Cannot call a class as a function")}function S(R,C){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:R}function P(R,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);R.prototype=Object.create(C&&C.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(R,C):R.__proto__=C)}var T=1,E=function(R){P(C,R);function C(){return N(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return i(C,[{key:"attach",value:function(){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,d.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(A,M){var Z=m.default.query(A,m.default.Scope.BLOCK_ATTRIBUTE);Z!=null&&this.attributes.attribute(Z,M)}},{key:"formatAt",value:function(A,M,Z,X){this.format(Z,X)}},{key:"insertAt",value:function(A,M,Z){if(typeof M=="string"&&M.endsWith(`
`)){var X=m.default.create(I.blotName);this.parent.insertBefore(X,A===0?this:this.next),X.insertAt(0,M.slice(0,-1))}else o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,A,M,Z)}}]),C}(m.default.Embed);E.scope=m.default.Scope.BLOCK_BLOT;var I=function(R){P(C,R);function C(D){N(this,C);var A=S(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,D));return A.cache={},A}return i(C,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function(A,M){return M.length()===0?A:A.insert(M.value(),O(M))},new f.default).insert(`
`,O(this))),this.cache.delta}},{key:"deleteAt",value:function(A,M){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"deleteAt",this).call(this,A,M),this.cache={}}},{key:"formatAt",value:function(A,M,Z,X){M<=0||(m.default.query(Z,m.default.Scope.BLOCK)?A+M===this.length()&&this.format(Z,X):o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"formatAt",this).call(this,A,Math.min(M,this.length()-A-1),Z,X),this.cache={})}},{key:"insertAt",value:function(A,M,Z){if(Z!=null)return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,A,M,Z);if(M.length!==0){var X=M.split(`
`),U=X.shift();U.length>0&&(A<this.length()-1||this.children.tail==null?o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,Math.min(A,this.length()-1),U):this.children.tail.insertAt(this.children.tail.length(),U),this.cache={});var F=this;X.reduce(function(B,z){return F=F.split(B,!0),F.insertAt(0,z),z.length},A+U.length)}}},{key:"insertBefore",value:function(A,M){var Z=this.children.head;o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,A,M),Z instanceof w.default&&Z.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"length",this).call(this)+T),this.cache.length}},{key:"moveChildren",value:function(A,M){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"moveChildren",this).call(this,A,M),this.cache={}}},{key:"optimize",value:function(A){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,A),this.cache={}}},{key:"path",value:function(A){return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"path",this).call(this,A,!0)}},{key:"removeChild",value:function(A){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"removeChild",this).call(this,A),this.cache={}}},{key:"split",value:function(A){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(M&&(A===0||A>=this.length()-T)){var Z=this.clone();return A===0?(this.parent.insertBefore(Z,this),this):(this.parent.insertBefore(Z,this.next),Z)}else{var X=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"split",this).call(this,A,M);return this.cache={},X}}}]),C}(m.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[x.default,m.default.Embed,b.default];function O(R){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R==null||(typeof R.formats=="function"&&(C=(0,d.default)(C,R.formats())),R.parent==null||R.parent.blotName=="scroll"||R.parent.statics.scope!==R.statics.scope)?C:O(R.parent,C)}r.bubbleFormats=O,r.BlockEmbed=E,r.default=I},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},o=function(){function F(B,z){var H=[],q=!0,W=!1,Y=void 0;try{for(var V=B[Symbol.iterator](),G;!(q=(G=V.next()).done)&&(H.push(G.value),!(z&&H.length===z));q=!0);}catch(ie){W=!0,Y=ie}finally{try{!q&&V.return&&V.return()}finally{if(W)throw Y}}return H}return function(B,z){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return F(B,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function F(B,z){for(var H=0;H<z.length;H++){var q=z[H];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(B,q.key,q)}}return function(B,z,H){return z&&F(B.prototype,z),H&&F(B,H),B}}();a(50);var d=a(2),h=O(d),f=a(14),u=O(f),m=a(8),p=O(m),w=a(9),v=O(w),x=a(0),y=O(x),b=a(15),j=O(b),N=a(3),S=O(N),P=a(10),T=O(P),E=a(34),I=O(E);function O(F){return F&&F.__esModule?F:{default:F}}function R(F,B,z){return B in F?Object.defineProperty(F,B,{value:z,enumerable:!0,configurable:!0,writable:!0}):F[B]=z,F}function C(F,B){if(!(F instanceof B))throw new TypeError("Cannot call a class as a function")}var D=(0,T.default)("quill"),A=function(){l(F,null,[{key:"debug",value:function(z){z===!0&&(z="log"),T.default.level(z)}},{key:"find",value:function(z){return z.__quill||y.default.find(z)}},{key:"import",value:function(z){return this.imports[z]==null&&D.error("Cannot import "+z+". Are you sure it was registered?"),this.imports[z]}},{key:"register",value:function(z,H){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof z!="string"){var Y=z.attrName||z.blotName;typeof Y=="string"?this.register("formats/"+Y,z,H):Object.keys(z).forEach(function(V){q.register(V,z[V],H)})}else this.imports[z]!=null&&!W&&D.warn("Overwriting "+z+" with",H),this.imports[z]=H,(z.startsWith("blots/")||z.startsWith("formats/"))&&H.blotName!=="abstract"?y.default.register(H):z.startsWith("modules")&&typeof H.register=="function"&&H.register()}}]);function F(B){var z=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(C(this,F),this.options=M(B,H),this.container=this.options.container,this.container==null)return D.error("Invalid Quill container",B);this.options.debug&&F.debug(this.options.debug);var q=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=y.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new u.default(this.scroll),this.selection=new j.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(Y){Y===p.default.events.TEXT_CHANGE&&z.root.classList.toggle("ql-blank",z.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(Y,V){var G=z.selection.lastRange,ie=G&&G.length===0?G.index:void 0;Z.call(z,function(){return z.editor.update(null,V,ie)},Y)});var W=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+q+"<p><br></p></div>");this.setContents(W),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(F,[{key:"addContainer",value:function(z){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof z=="string"){var q=z;z=document.createElement("div"),z.classList.add(q)}return this.container.insertBefore(z,H),z}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(z,H,q){var W=this,Y=X(z,H,q),V=o(Y,4);return z=V[0],H=V[1],q=V[3],Z.call(this,function(){return W.editor.deleteText(z,H)},q,z,-1*H)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(z),this.container.classList.toggle("ql-disabled",!z)}},{key:"focus",value:function(){var z=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=z,this.scrollIntoView()}},{key:"format",value:function(z,H){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return Z.call(this,function(){var Y=q.getSelection(!0),V=new h.default;if(Y==null)return V;if(y.default.query(z,y.default.Scope.BLOCK))V=q.editor.formatLine(Y.index,Y.length,R({},z,H));else{if(Y.length===0)return q.selection.format(z,H),V;V=q.editor.formatText(Y.index,Y.length,R({},z,H))}return q.setSelection(Y,p.default.sources.SILENT),V},W)}},{key:"formatLine",value:function(z,H,q,W,Y){var V=this,G=void 0,ie=X(z,H,q,W,Y),J=o(ie,4);return z=J[0],H=J[1],G=J[2],Y=J[3],Z.call(this,function(){return V.editor.formatLine(z,H,G)},Y,z,0)}},{key:"formatText",value:function(z,H,q,W,Y){var V=this,G=void 0,ie=X(z,H,q,W,Y),J=o(ie,4);return z=J[0],H=J[1],G=J[2],Y=J[3],Z.call(this,function(){return V.editor.formatText(z,H,G)},Y,z,0)}},{key:"getBounds",value:function(z){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=void 0;typeof z=="number"?q=this.selection.getBounds(z,H):q=this.selection.getBounds(z.index,z.length);var W=this.container.getBoundingClientRect();return{bottom:q.bottom-W.top,height:q.height,left:q.left-W.left,right:q.right-W.left,top:q.top-W.top,width:q.width}}},{key:"getContents",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-z,q=X(z,H),W=o(q,2);return z=W[0],H=W[1],this.editor.getContents(z,H)}},{key:"getFormat",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof z=="number"?this.editor.getFormat(z,H):this.editor.getFormat(z.index,z.length)}},{key:"getIndex",value:function(z){return z.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(z){return this.scroll.leaf(z)}},{key:"getLine",value:function(z){return this.scroll.line(z)}},{key:"getLines",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof z!="number"?this.scroll.lines(z.index,z.length):this.scroll.lines(z,H)}},{key:"getModule",value:function(z){return this.theme.modules[z]}},{key:"getSelection",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return z&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-z,q=X(z,H),W=o(q,2);return z=W[0],H=W[1],this.editor.getText(z,H)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(z,H,q){var W=this,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:F.sources.API;return Z.call(this,function(){return W.editor.insertEmbed(z,H,q)},Y,z)}},{key:"insertText",value:function(z,H,q,W,Y){var V=this,G=void 0,ie=X(z,0,q,W,Y),J=o(ie,4);return z=J[0],G=J[2],Y=J[3],Z.call(this,function(){return V.editor.insertText(z,H,G)},Y,z,H.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(z,H,q){this.clipboard.dangerouslyPasteHTML(z,H,q)}},{key:"removeFormat",value:function(z,H,q){var W=this,Y=X(z,H,q),V=o(Y,4);return z=V[0],H=V[1],q=V[3],Z.call(this,function(){return W.editor.removeFormat(z,H)},q,z)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(z){var H=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Z.call(this,function(){z=new h.default(z);var W=H.getLength(),Y=H.editor.deleteText(0,W),V=H.editor.applyDelta(z),G=V.ops[V.ops.length-1];G!=null&&typeof G.insert=="string"&&G.insert[G.insert.length-1]===`
`&&(H.editor.deleteText(H.getLength()-1,1),V.delete(1));var ie=Y.compose(V);return ie},q)}},{key:"setSelection",value:function(z,H,q){if(z==null)this.selection.setRange(null,H||F.sources.API);else{var W=X(z,H,q),Y=o(W,4);z=Y[0],H=Y[1],q=Y[3],this.selection.setRange(new b.Range(z,H),q),q!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(z){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,q=new h.default().insert(z);return this.setContents(q,H)}},{key:"update",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,H=this.scroll.update(z);return this.selection.update(z),H}},{key:"updateContents",value:function(z){var H=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Z.call(this,function(){return z=new h.default(z),H.editor.applyDelta(z,q)},q,!0)}}]),F}();A.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},A.events=p.default.events,A.sources=p.default.sources,A.version="1.3.7",A.imports={delta:h.default,parchment:y.default,"core/module":v.default,"core/theme":I.default};function M(F,B){if(B=(0,S.default)(!0,{container:F,modules:{clipboard:!0,keyboard:!0,history:!0}},B),!B.theme||B.theme===A.DEFAULTS.theme)B.theme=I.default;else if(B.theme=A.import("themes/"+B.theme),B.theme==null)throw new Error("Invalid theme "+B.theme+". Did you register it?");var z=(0,S.default)(!0,{},B.theme.DEFAULTS);[z,B].forEach(function(W){W.modules=W.modules||{},Object.keys(W.modules).forEach(function(Y){W.modules[Y]===!0&&(W.modules[Y]={})})});var H=Object.keys(z.modules).concat(Object.keys(B.modules)),q=H.reduce(function(W,Y){var V=A.import("modules/"+Y);return V==null?D.error("Cannot load "+Y+" module. Are you sure you registered it?"):W[Y]=V.DEFAULTS||{},W},{});return B.modules!=null&&B.modules.toolbar&&B.modules.toolbar.constructor!==Object&&(B.modules.toolbar={container:B.modules.toolbar}),B=(0,S.default)(!0,{},A.DEFAULTS,{modules:q},z,B),["bounds","container","scrollingContainer"].forEach(function(W){typeof B[W]=="string"&&(B[W]=document.querySelector(B[W]))}),B.modules=Object.keys(B.modules).reduce(function(W,Y){return B.modules[Y]&&(W[Y]=B.modules[Y]),W},{}),B}function Z(F,B,z,H){if(this.options.strict&&!this.isEnabled()&&B===p.default.sources.USER)return new h.default;var q=z==null?null:this.getSelection(),W=this.editor.delta,Y=F();if(q!=null&&(z===!0&&(z=q.index),H==null?q=U(q,Y,B):H!==0&&(q=U(q,z,H,B)),this.setSelection(q,p.default.sources.SILENT)),Y.length()>0){var V,G=[p.default.events.TEXT_CHANGE,Y,W,B];if((V=this.emitter).emit.apply(V,[p.default.events.EDITOR_CHANGE].concat(G)),B!==p.default.sources.SILENT){var ie;(ie=this.emitter).emit.apply(ie,G)}}return Y}function X(F,B,z,H,q){var W={};return typeof F.index=="number"&&typeof F.length=="number"?typeof B!="number"?(q=H,H=z,z=B,B=F.length,F=F.index):(B=F.length,F=F.index):typeof B!="number"&&(q=H,H=z,z=B,B=0),(typeof z>"u"?"undefined":i(z))==="object"?(W=z,q=H):typeof z=="string"&&(H!=null?W[z]=H:q=z),q=q||p.default.sources.API,[F,B,W,q]}function U(F,B,z,H){if(F==null)return null;var q=void 0,W=void 0;if(B instanceof h.default){var Y=[F.index,F.index+F.length].map(function(J){return B.transformPosition(J,H!==p.default.sources.USER)}),V=o(Y,2);q=V[0],W=V[1]}else{var G=[F.index,F.index+F.length].map(function(J){return J<B||J===B&&H===p.default.sources.USER?J:z>=0?J+z:Math.max(B,J+z)}),ie=o(G,2);q=ie[0],W=ie[1]}return new b.Range(q,W-q)}r.expandConfig=M,r.overload=X,r.default=A},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function x(y,b){for(var j=0;j<b.length;j++){var N=b[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,b,j){return b&&x(y.prototype,b),j&&x(y,j),y}}(),o=function x(y,b,j){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,b);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:x(S,b,j)}else{if("value"in N)return N.value;var P=N.get;return P===void 0?void 0:P.call(j)}},l=a(7),d=u(l),h=a(0),f=u(h);function u(x){return x&&x.__esModule?x:{default:x}}function m(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function p(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function w(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var v=function(x){w(y,x);function y(){return m(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"formatAt",value:function(j,N,S,P){if(y.compare(this.statics.blotName,S)<0&&f.default.query(S,f.default.Scope.BLOT)){var T=this.isolate(j,N);P&&T.wrap(S,P)}else o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"formatAt",this).call(this,j,N,S,P)}},{key:"optimize",value:function(j){if(o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,j),this.parent instanceof y&&y.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(j,N){var S=y.order.indexOf(j),P=y.order.indexOf(N);return S>=0||P>=0?S-P:j===N?0:j<N?-1:1}}]),y}(f.default.Inline);v.allowedChildren=[v,f.default.Embed,d.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function d(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function h(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){f(p,m);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default.Text);r.default=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function b(j,N){for(var S=0;S<N.length;S++){var P=N[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(j,P.key,P)}}return function(j,N,S){return N&&b(j.prototype,N),S&&b(j,S),j}}(),o=function b(j,N,S){j===null&&(j=Function.prototype);var P=Object.getOwnPropertyDescriptor(j,N);if(P===void 0){var T=Object.getPrototypeOf(j);return T===null?void 0:b(T,N,S)}else{if("value"in P)return P.value;var E=P.get;return E===void 0?void 0:E.call(S)}},l=a(54),d=u(l),h=a(10),f=u(h);function u(b){return b&&b.__esModule?b:{default:b}}function m(b,j){if(!(b instanceof j))throw new TypeError("Cannot call a class as a function")}function p(b,j){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:b}function w(b,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);b.prototype=Object.create(j&&j.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(b,j):b.__proto__=j)}var v=(0,f.default)("quill:events"),x=["selectionchange","mousedown","mouseup","click"];x.forEach(function(b){document.addEventListener(b,function(){for(var j=arguments.length,N=Array(j),S=0;S<j;S++)N[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(P){if(P.__quill&&P.__quill.emitter){var T;(T=P.__quill.emitter).handleDOM.apply(T,N)}})})});var y=function(b){w(j,b);function j(){m(this,j);var N=p(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));return N.listeners={},N.on("error",v.error),N}return i(j,[{key:"emit",value:function(){v.log.apply(v,arguments),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var P=arguments.length,T=Array(P>1?P-1:0),E=1;E<P;E++)T[E-1]=arguments[E];(this.listeners[S.type]||[]).forEach(function(I){var O=I.node,R=I.handler;(S.target===O||O.contains(S.target))&&R.apply(void 0,[S].concat(T))})}},{key:"listenDOM",value:function(S,P,T){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:P,handler:T})}}]),j}(d.default);y.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},y.sources={API:"api",SILENT:"silent",USER:"user"},r.default=y},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});function i(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function l(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,l),this.quill=d,this.options=h};o.DEFAULTS={},r.default=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function l(h){if(i.indexOf(h)<=i.indexOf(o)){for(var f,u=arguments.length,m=Array(u>1?u-1:0),p=1;p<u;p++)m[p-1]=arguments[p];(f=console)[h].apply(f,m)}}function d(h){return i.reduce(function(f,u){return f[u]=l.bind(console,u,h),f},{})}l.level=d.level=function(h){o=h},r.default=d},function(n,r,a){var i=Array.prototype.slice,o=a(52),l=a(53),d=n.exports=function(m,p,w){return w||(w={}),m===p?!0:m instanceof Date&&p instanceof Date?m.getTime()===p.getTime():!m||!p||typeof m!="object"&&typeof p!="object"?w.strict?m===p:m==p:u(m,p,w)};function h(m){return m==null}function f(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function u(m,p,w){var v,x;if(h(m)||h(p)||m.prototype!==p.prototype)return!1;if(l(m))return l(p)?(m=i.call(m),p=i.call(p),d(m,p,w)):!1;if(f(m)){if(!f(p)||m.length!==p.length)return!1;for(v=0;v<m.length;v++)if(m[v]!==p[v])return!1;return!0}try{var y=o(m),b=o(p)}catch{return!1}if(y.length!=b.length)return!1;for(y.sort(),b.sort(),v=y.length-1;v>=0;v--)if(y[v]!=b[v])return!1;for(v=y.length-1;v>=0;v--)if(x=y[v],!d(m[x],p[x],w))return!1;return typeof m==typeof p}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(1),o=function(){function l(d,h,f){f===void 0&&(f={}),this.attrName=d,this.keyName=h;var u=i.Scope.TYPE&i.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&i.Scope.LEVEL|u:this.scope=i.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return l.keys=function(d){return[].map.call(d.attributes,function(h){return h.name})},l.prototype.add=function(d,h){return this.canAdd(d,h)?(d.setAttribute(this.keyName,h),!0):!1},l.prototype.canAdd=function(d,h){var f=i.query(d,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1},l.prototype.remove=function(d){d.removeAttribute(this.keyName)},l.prototype.value=function(d){var h=d.getAttribute(this.keyName);return this.canAdd(d,h)&&h?h:""},l}();r.default=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var i=function(){function E(I,O){var R=[],C=!0,D=!1,A=void 0;try{for(var M=I[Symbol.iterator](),Z;!(C=(Z=M.next()).done)&&(R.push(Z.value),!(O&&R.length===O));C=!0);}catch(X){D=!0,A=X}finally{try{!C&&M.return&&M.return()}finally{if(D)throw A}}return R}return function(I,O){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return E(I,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function E(I,O){for(var R=0;R<O.length;R++){var C=O[R];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(I,C.key,C)}}return function(I,O,R){return O&&E(I.prototype,O),R&&E(I,R),I}}(),l=function E(I,O,R){I===null&&(I=Function.prototype);var C=Object.getOwnPropertyDescriptor(I,O);if(C===void 0){var D=Object.getPrototypeOf(I);return D===null?void 0:E(D,O,R)}else{if("value"in C)return C.value;var A=C.get;return A===void 0?void 0:A.call(R)}},d=a(2),h=b(d),f=a(0),u=b(f),m=a(4),p=b(m),w=a(6),v=b(w),x=a(7),y=b(x);function b(E){return E&&E.__esModule?E:{default:E}}function j(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}function N(E,I){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:E}function S(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);E.prototype=Object.create(I&&I.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(E,I):E.__proto__=I)}var P=function(E){S(I,E);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I}(v.default);P.blotName="code",P.tagName="CODE";var T=function(E){S(I,E);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"delta",value:function(){var R=this,C=this.domNode.textContent;return C.endsWith(`
`)&&(C=C.slice(0,-1)),C.split(`
`).reduce(function(D,A){return D.insert(A).insert(`
`,R.formats())},new h.default)}},{key:"format",value:function(R,C){if(!(R===this.statics.blotName&&C)){var D=this.descendant(y.default,this.length()-1),A=i(D,1),M=A[0];M!=null&&M.deleteAt(M.length()-1,1),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,R,C)}}},{key:"formatAt",value:function(R,C,D,A){if(C!==0&&!(u.default.query(D,u.default.Scope.BLOCK)==null||D===this.statics.blotName&&A===this.statics.formats(this.domNode))){var M=this.newlineIndex(R);if(!(M<0||M>=R+C)){var Z=this.newlineIndex(R,!0)+1,X=M-Z+1,U=this.isolate(Z,X),F=U.next;U.format(D,A),F instanceof I&&F.formatAt(0,R-Z+C-X,D,A)}}}},{key:"insertAt",value:function(R,C,D){if(D==null){var A=this.descendant(y.default,R),M=i(A,2),Z=M[0],X=M[1];Z.insertAt(X,C)}}},{key:"length",value:function(){var R=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?R:R+1}},{key:"newlineIndex",value:function(R){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(C)return this.domNode.textContent.slice(0,R).lastIndexOf(`
`);var D=this.domNode.textContent.slice(R).indexOf(`
`);return D>-1?R+D:-1}},{key:"optimize",value:function(R){this.domNode.textContent.endsWith(`
`)||this.appendChild(u.default.create("text",`
`)),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,R);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===C.statics.formats(C.domNode)&&(C.optimize(R),C.moveChildren(this),C.remove())}},{key:"replace",value:function(R){l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,R),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(C){var D=u.default.find(C);D==null?C.parentNode.removeChild(C):D instanceof u.default.Embed?D.remove():D.unwrap()})}}],[{key:"create",value:function(R){var C=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,R);return C.setAttribute("spellcheck",!1),C}},{key:"formats",value:function(){return!0}}]),I}(p.default);T.blotName="code-block",T.tagName="PRE",T.TAB="  ",r.Code=P,r.default=T},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},o=function(){function F(B,z){var H=[],q=!0,W=!1,Y=void 0;try{for(var V=B[Symbol.iterator](),G;!(q=(G=V.next()).done)&&(H.push(G.value),!(z&&H.length===z));q=!0);}catch(ie){W=!0,Y=ie}finally{try{!q&&V.return&&V.return()}finally{if(W)throw Y}}return H}return function(B,z){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return F(B,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function F(B,z){for(var H=0;H<z.length;H++){var q=z[H];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(B,q.key,q)}}return function(B,z,H){return z&&F(B.prototype,z),H&&F(B,H),B}}(),d=a(2),h=C(d),f=a(20),u=C(f),m=a(0),p=C(m),w=a(13),v=C(w),x=a(24),y=C(x),b=a(4),j=C(b),N=a(16),S=C(N),P=a(21),T=C(P),E=a(11),I=C(E),O=a(3),R=C(O);function C(F){return F&&F.__esModule?F:{default:F}}function D(F,B,z){return B in F?Object.defineProperty(F,B,{value:z,enumerable:!0,configurable:!0,writable:!0}):F[B]=z,F}function A(F,B){if(!(F instanceof B))throw new TypeError("Cannot call a class as a function")}var M=/^[ -~]*$/,Z=function(){function F(B){A(this,F),this.scroll=B,this.delta=this.getDelta()}return l(F,[{key:"applyDelta",value:function(z){var H=this,q=!1;this.scroll.update();var W=this.scroll.length();return this.scroll.batchStart(),z=U(z),z.reduce(function(Y,V){var G=V.retain||V.delete||V.insert.length||1,ie=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var J=V.insert;J.endsWith(`
`)&&q&&(q=!1,J=J.slice(0,-1)),Y>=W&&!J.endsWith(`
`)&&(q=!0),H.scroll.insertAt(Y,J);var le=H.scroll.line(Y),ye=o(le,2),ke=ye[0],Ne=ye[1],_e=(0,R.default)({},(0,b.bubbleFormats)(ke));if(ke instanceof j.default){var ne=ke.descendant(p.default.Leaf,Ne),Ce=o(ne,1),ve=Ce[0];_e=(0,R.default)(_e,(0,b.bubbleFormats)(ve))}ie=u.default.attributes.diff(_e,ie)||{}}else if(i(V.insert)==="object"){var oe=Object.keys(V.insert)[0];if(oe==null)return Y;H.scroll.insertAt(Y,oe,V.insert[oe])}W+=G}return Object.keys(ie).forEach(function(de){H.scroll.formatAt(Y,G,de,ie[de])}),Y+G},0),z.reduce(function(Y,V){return typeof V.delete=="number"?(H.scroll.deleteAt(Y,V.delete),Y):Y+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update(z)}},{key:"deleteText",value:function(z,H){return this.scroll.deleteAt(z,H),this.update(new h.default().retain(z).delete(H))}},{key:"formatLine",value:function(z,H){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(W).forEach(function(Y){if(!(q.scroll.whitelist!=null&&!q.scroll.whitelist[Y])){var V=q.scroll.lines(z,Math.max(H,1)),G=H;V.forEach(function(ie){var J=ie.length();if(!(ie instanceof v.default))ie.format(Y,W[Y]);else{var le=z-ie.offset(q.scroll),ye=ie.newlineIndex(le+G)-le+1;ie.formatAt(le,ye,Y,W[Y])}G-=J})}}),this.scroll.optimize(),this.update(new h.default().retain(z).retain(H,(0,T.default)(W)))}},{key:"formatText",value:function(z,H){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(W).forEach(function(Y){q.scroll.formatAt(z,H,Y,W[Y])}),this.update(new h.default().retain(z).retain(H,(0,T.default)(W)))}},{key:"getContents",value:function(z,H){return this.delta.slice(z,z+H)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(z,H){return z.concat(H.delta())},new h.default)}},{key:"getFormat",value:function(z){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=[],W=[];H===0?this.scroll.path(z).forEach(function(V){var G=o(V,1),ie=G[0];ie instanceof j.default?q.push(ie):ie instanceof p.default.Leaf&&W.push(ie)}):(q=this.scroll.lines(z,H),W=this.scroll.descendants(p.default.Leaf,z,H));var Y=[q,W].map(function(V){if(V.length===0)return{};for(var G=(0,b.bubbleFormats)(V.shift());Object.keys(G).length>0;){var ie=V.shift();if(ie==null)return G;G=X((0,b.bubbleFormats)(ie),G)}return G});return R.default.apply(R.default,Y)}},{key:"getText",value:function(z,H){return this.getContents(z,H).filter(function(q){return typeof q.insert=="string"}).map(function(q){return q.insert}).join("")}},{key:"insertEmbed",value:function(z,H,q){return this.scroll.insertAt(z,H,q),this.update(new h.default().retain(z).insert(D({},H,q)))}},{key:"insertText",value:function(z,H){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return H=H.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(z,H),Object.keys(W).forEach(function(Y){q.scroll.formatAt(z,H.length,Y,W[Y])}),this.update(new h.default().retain(z).insert(H,(0,T.default)(W)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var z=this.scroll.children.head;return z.statics.blotName!==j.default.blotName||z.children.length>1?!1:z.children.head instanceof S.default}},{key:"removeFormat",value:function(z,H){var q=this.getText(z,H),W=this.scroll.line(z+H),Y=o(W,2),V=Y[0],G=Y[1],ie=0,J=new h.default;V!=null&&(V instanceof v.default?ie=V.newlineIndex(G)-G+1:ie=V.length()-G,J=V.delta().slice(G,G+ie-1).insert(`
`));var le=this.getContents(z,H+ie),ye=le.diff(new h.default().insert(q).concat(J)),ke=new h.default().retain(z).concat(ye);return this.applyDelta(ke)}},{key:"update",value:function(z){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,W=this.delta;if(H.length===1&&H[0].type==="characterData"&&H[0].target.data.match(M)&&p.default.find(H[0].target)){var Y=p.default.find(H[0].target),V=(0,b.bubbleFormats)(Y),G=Y.offset(this.scroll),ie=H[0].oldValue.replace(y.default.CONTENTS,""),J=new h.default().insert(ie),le=new h.default().insert(Y.value()),ye=new h.default().retain(G).concat(J.diff(le,q));z=ye.reduce(function(ke,Ne){return Ne.insert?ke.insert(Ne.insert,V):ke.push(Ne)},new h.default),this.delta=W.compose(z)}else this.delta=this.getDelta(),(!z||!(0,I.default)(W.compose(z),this.delta))&&(z=W.diff(this.delta,q));return z}}]),F}();function X(F,B){return Object.keys(B).reduce(function(z,H){return F[H]==null||(B[H]===F[H]?z[H]=B[H]:Array.isArray(B[H])?B[H].indexOf(F[H])<0&&(z[H]=B[H].concat([F[H]])):z[H]=[B[H],F[H]]),z},{})}function U(F){return F.reduce(function(B,z){if(z.insert===1){var H=(0,T.default)(z.attributes);return delete H.image,B.insert({image:z.attributes.image},H)}if(z.attributes!=null&&(z.attributes.list===!0||z.attributes.bullet===!0)&&(z=(0,T.default)(z),z.attributes.list?z.attributes.list="ordered":(z.attributes.list="bullet",delete z.attributes.bullet)),typeof z.insert=="string"){var q=z.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return B.insert(q,z.attributes)}return B.push(z)},new h.default)}r.default=Z},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var i=function(){function E(I,O){var R=[],C=!0,D=!1,A=void 0;try{for(var M=I[Symbol.iterator](),Z;!(C=(Z=M.next()).done)&&(R.push(Z.value),!(O&&R.length===O));C=!0);}catch(X){D=!0,A=X}finally{try{!C&&M.return&&M.return()}finally{if(D)throw A}}return R}return function(I,O){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return E(I,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function E(I,O){for(var R=0;R<O.length;R++){var C=O[R];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(I,C.key,C)}}return function(I,O,R){return O&&E(I.prototype,O),R&&E(I,R),I}}(),l=a(0),d=y(l),h=a(21),f=y(h),u=a(11),m=y(u),p=a(8),w=y(p),v=a(10),x=y(v);function y(E){return E&&E.__esModule?E:{default:E}}function b(E){if(Array.isArray(E)){for(var I=0,O=Array(E.length);I<E.length;I++)O[I]=E[I];return O}else return Array.from(E)}function j(E,I){if(!(E instanceof I))throw new TypeError("Cannot call a class as a function")}var N=(0,x.default)("quill:selection"),S=function E(I){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;j(this,E),this.index=I,this.length=O},P=function(){function E(I,O){var R=this;j(this,E),this.emitter=O,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=d.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){R.mouseDown||setTimeout(R.update.bind(R,w.default.sources.USER),1)}),this.emitter.on(w.default.events.EDITOR_CHANGE,function(C,D){C===w.default.events.TEXT_CHANGE&&D.length()>0&&R.update(w.default.sources.SILENT)}),this.emitter.on(w.default.events.SCROLL_BEFORE_UPDATE,function(){if(R.hasFocus()){var C=R.getNativeRange();C!=null&&C.start.node!==R.cursor.textNode&&R.emitter.once(w.default.events.SCROLL_UPDATE,function(){try{R.setNativeRange(C.start.node,C.start.offset,C.end.node,C.end.offset)}catch{}})}}),this.emitter.on(w.default.events.SCROLL_OPTIMIZE,function(C,D){if(D.range){var A=D.range,M=A.startNode,Z=A.startOffset,X=A.endNode,U=A.endOffset;R.setNativeRange(M,Z,X,U)}}),this.update(w.default.sources.SILENT)}return o(E,[{key:"handleComposition",value:function(){var O=this;this.root.addEventListener("compositionstart",function(){O.composing=!0}),this.root.addEventListener("compositionend",function(){if(O.composing=!1,O.cursor.parent){var R=O.cursor.restore();if(!R)return;setTimeout(function(){O.setNativeRange(R.startNode,R.startOffset,R.endNode,R.endOffset)},1)}})}},{key:"handleDragging",value:function(){var O=this;this.emitter.listenDOM("mousedown",document.body,function(){O.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){O.mouseDown=!1,O.update(w.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(O,R){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[O])){this.scroll.update();var C=this.getNativeRange();if(!(C==null||!C.native.collapsed||d.default.query(O,d.default.Scope.BLOCK))){if(C.start.node!==this.cursor.textNode){var D=d.default.find(C.start.node,!1);if(D==null)return;if(D instanceof d.default.Leaf){var A=D.split(C.start.offset);D.parent.insertBefore(this.cursor,A)}else D.insertBefore(this.cursor,C.start.node);this.cursor.attach()}this.cursor.format(O,R),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(O){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=this.scroll.length();O=Math.min(O,C-1),R=Math.min(O+R,C-1)-O;var D=void 0,A=this.scroll.leaf(O),M=i(A,2),Z=M[0],X=M[1];if(Z==null)return null;var U=Z.position(X,!0),F=i(U,2);D=F[0],X=F[1];var B=document.createRange();if(R>0){B.setStart(D,X);var z=this.scroll.leaf(O+R),H=i(z,2);if(Z=H[0],X=H[1],Z==null)return null;var q=Z.position(X,!0),W=i(q,2);return D=W[0],X=W[1],B.setEnd(D,X),B.getBoundingClientRect()}else{var Y="left",V=void 0;return D instanceof Text?(X<D.data.length?(B.setStart(D,X),B.setEnd(D,X+1)):(B.setStart(D,X-1),B.setEnd(D,X),Y="right"),V=B.getBoundingClientRect()):(V=Z.domNode.getBoundingClientRect(),X>0&&(Y="right")),{bottom:V.top+V.height,height:V.height,left:V[Y],right:V[Y],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var O=document.getSelection();if(O==null||O.rangeCount<=0)return null;var R=O.getRangeAt(0);if(R==null)return null;var C=this.normalizeNative(R);return N.info("getNativeRange",C),C}},{key:"getRange",value:function(){var O=this.getNativeRange();if(O==null)return[null,null];var R=this.normalizedToRange(O);return[R,O]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(O){var R=this,C=[[O.start.node,O.start.offset]];O.native.collapsed||C.push([O.end.node,O.end.offset]);var D=C.map(function(Z){var X=i(Z,2),U=X[0],F=X[1],B=d.default.find(U,!0),z=B.offset(R.scroll);return F===0?z:B instanceof d.default.Container?z+B.length():z+B.index(U,F)}),A=Math.min(Math.max.apply(Math,b(D)),this.scroll.length()-1),M=Math.min.apply(Math,[A].concat(b(D)));return new S(M,A-M)}},{key:"normalizeNative",value:function(O){if(!T(this.root,O.startContainer)||!O.collapsed&&!T(this.root,O.endContainer))return null;var R={start:{node:O.startContainer,offset:O.startOffset},end:{node:O.endContainer,offset:O.endOffset},native:O};return[R.start,R.end].forEach(function(C){for(var D=C.node,A=C.offset;!(D instanceof Text)&&D.childNodes.length>0;)if(D.childNodes.length>A)D=D.childNodes[A],A=0;else if(D.childNodes.length===A)D=D.lastChild,A=D instanceof Text?D.data.length:D.childNodes.length+1;else break;C.node=D,C.offset=A}),R}},{key:"rangeToNative",value:function(O){var R=this,C=O.collapsed?[O.index]:[O.index,O.index+O.length],D=[],A=this.scroll.length();return C.forEach(function(M,Z){M=Math.min(A-1,M);var X=void 0,U=R.scroll.leaf(M),F=i(U,2),B=F[0],z=F[1],H=B.position(z,Z!==0),q=i(H,2);X=q[0],z=q[1],D.push(X,z)}),D.length<2&&(D=D.concat(D)),D}},{key:"scrollIntoView",value:function(O){var R=this.lastRange;if(R!=null){var C=this.getBounds(R.index,R.length);if(C!=null){var D=this.scroll.length()-1,A=this.scroll.line(Math.min(R.index,D)),M=i(A,1),Z=M[0],X=Z;if(R.length>0){var U=this.scroll.line(Math.min(R.index+R.length,D)),F=i(U,1);X=F[0]}if(!(Z==null||X==null)){var B=O.getBoundingClientRect();C.top<B.top?O.scrollTop-=B.top-C.top:C.bottom>B.bottom&&(O.scrollTop+=C.bottom-B.bottom)}}}}},{key:"setNativeRange",value:function(O,R){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O,D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",O,R,C,D),!(O!=null&&(this.root.parentNode==null||O.parentNode==null||C.parentNode==null))){var M=document.getSelection();if(M!=null)if(O!=null){this.hasFocus()||this.root.focus();var Z=(this.getNativeRange()||{}).native;if(Z==null||A||O!==Z.startContainer||R!==Z.startOffset||C!==Z.endContainer||D!==Z.endOffset){O.tagName=="BR"&&(R=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode),C.tagName=="BR"&&(D=[].indexOf.call(C.parentNode.childNodes,C),C=C.parentNode);var X=document.createRange();X.setStart(O,R),X.setEnd(C,D),M.removeAllRanges(),M.addRange(X)}}else M.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(O){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w.default.sources.API;if(typeof R=="string"&&(C=R,R=!1),N.info("setRange",O),O!=null){var D=this.rangeToNative(O);this.setNativeRange.apply(this,b(D).concat([R]))}else this.setNativeRange(null);this.update(C)}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w.default.sources.USER,R=this.lastRange,C=this.getRange(),D=i(C,2),A=D[0],M=D[1];if(this.lastRange=A,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(R,this.lastRange)){var Z;!this.composing&&M!=null&&M.native.collapsed&&M.start.node!==this.cursor.textNode&&this.cursor.restore();var X=[w.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(R),O];if((Z=this.emitter).emit.apply(Z,[w.default.events.EDITOR_CHANGE].concat(X)),O!==w.default.sources.SILENT){var U;(U=this.emitter).emit.apply(U,X)}}}}]),E}();function T(E,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),E.contains(I)}r.Range=S,r.default=P},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function w(v,x){for(var y=0;y<x.length;y++){var b=x[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,x,y){return x&&w(v.prototype,x),y&&w(v,y),v}}(),o=function w(v,x,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,x);if(b===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:w(j,x,y)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(y)}},l=a(0),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function u(w,v){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:w}function m(w,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v)}var p=function(w){m(v,w);function v(){return f(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"insertInto",value:function(y,b){y.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,y,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v}(d.default.Embed);p.blotName="break",p.tagName="BR",r.default=p},function(n,r,a){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var w in p)p.hasOwnProperty(w)&&(m[w]=p[w])};return function(m,p){u(m,p);function w(){this.constructor=m}m.prototype=p===null?Object.create(p):(w.prototype=p.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(44),l=a(30),d=a(1),h=function(u){i(m,u);function m(p){var w=u.call(this,p)||this;return w.build(),w}return m.prototype.appendChild=function(p){this.insertBefore(p)},m.prototype.attach=function(){u.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},m.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(w){try{var v=f(w);p.insertBefore(v,p.children.head||void 0)}catch(x){if(x instanceof d.ParchmentError)return;throw x}})},m.prototype.deleteAt=function(p,w){if(p===0&&w===this.length())return this.remove();this.children.forEachAt(p,w,function(v,x,y){v.deleteAt(x,y)})},m.prototype.descendant=function(p,w){var v=this.children.find(w),x=v[0],y=v[1];return p.blotName==null&&p(x)||p.blotName!=null&&x instanceof p?[x,y]:x instanceof m?x.descendant(p,y):[null,-1]},m.prototype.descendants=function(p,w,v){w===void 0&&(w=0),v===void 0&&(v=Number.MAX_VALUE);var x=[],y=v;return this.children.forEachAt(w,v,function(b,j,N){(p.blotName==null&&p(b)||p.blotName!=null&&b instanceof p)&&x.push(b),b instanceof m&&(x=x.concat(b.descendants(p,j,y))),y-=N}),x},m.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),u.prototype.detach.call(this)},m.prototype.formatAt=function(p,w,v,x){this.children.forEachAt(p,w,function(y,b,j){y.formatAt(b,j,v,x)})},m.prototype.insertAt=function(p,w,v){var x=this.children.find(p),y=x[0],b=x[1];if(y)y.insertAt(b,w,v);else{var j=v==null?d.create("text",w):d.create(w,v);this.appendChild(j)}},m.prototype.insertBefore=function(p,w){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return p instanceof v}))throw new d.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,w)},m.prototype.length=function(){return this.children.reduce(function(p,w){return p+w.length()},0)},m.prototype.moveChildren=function(p,w){this.children.forEach(function(v){p.insertBefore(v,w)})},m.prototype.optimize=function(p){if(u.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var w=d.create(this.statics.defaultChild);this.appendChild(w),w.optimize(p)}else this.remove()},m.prototype.path=function(p,w){w===void 0&&(w=!1);var v=this.children.find(p,w),x=v[0],y=v[1],b=[[this,p]];return x instanceof m?b.concat(x.path(y,w)):(x!=null&&b.push([x,y]),b)},m.prototype.removeChild=function(p){this.children.remove(p)},m.prototype.replace=function(p){p instanceof m&&p.moveChildren(this),u.prototype.replace.call(this,p)},m.prototype.split=function(p,w){if(w===void 0&&(w=!1),!w){if(p===0)return this;if(p===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(p,this.length(),function(x,y,b){x=x.split(y,w),v.appendChild(x)}),v},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(p,w){var v=this,x=[],y=[];p.forEach(function(b){b.target===v.domNode&&b.type==="childList"&&(x.push.apply(x,b.addedNodes),y.push.apply(y,b.removedNodes))}),y.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var j=d.find(b);j!=null&&(j.domNode.parentNode==null||j.domNode.parentNode===v.domNode)&&j.detach()}}),x.filter(function(b){return b.parentNode==v.domNode}).sort(function(b,j){return b===j?0:b.compareDocumentPosition(j)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var j=null;b.nextSibling!=null&&(j=d.find(b.nextSibling));var N=f(b);(N.next!=j||N.next==null)&&(N.parent!=null&&N.parent.removeChild(v),v.insertBefore(N,j||void 0))})},m}(l.default);function f(u){var m=d.find(u);if(m==null)try{m=d.create(u)}catch{m=d.create(d.Scope.INLINE),[].slice.call(u.childNodes).forEach(function(w){m.domNode.appendChild(w)}),u.parentNode&&u.parentNode.replaceChild(m.domNode,u),m.attach()}return m}r.default=h},function(n,r,a){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var w in p)p.hasOwnProperty(w)&&(m[w]=p[w])};return function(m,p){u(m,p);function w(){this.constructor=m}m.prototype=p===null?Object.create(p):(w.prototype=p.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(12),l=a(31),d=a(17),h=a(1),f=function(u){i(m,u);function m(p){var w=u.call(this,p)||this;return w.attributes=new l.default(w.domNode),w}return m.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},m.prototype.format=function(p,w){var v=h.query(p);v instanceof o.default?this.attributes.attribute(v,w):w&&v!=null&&(p!==this.statics.blotName||this.formats()[p]!==w)&&this.replaceWith(p,w)},m.prototype.formats=function(){var p=this.attributes.values(),w=this.statics.formats(this.domNode);return w!=null&&(p[this.statics.blotName]=w),p},m.prototype.replaceWith=function(p,w){var v=u.prototype.replaceWith.call(this,p,w);return this.attributes.copy(v),v},m.prototype.update=function(p,w){var v=this;u.prototype.update.call(this,p,w),p.some(function(x){return x.target===v.domNode&&x.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(p,w){var v=u.prototype.wrap.call(this,p,w);return v instanceof m&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},m}(d.default);r.default=f},function(n,r,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var m in u)u.hasOwnProperty(m)&&(f[m]=u[m])};return function(f,u){h(f,u);function m(){this.constructor=f}f.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(30),l=a(1),d=function(h){i(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.value=function(u){return!0},f.prototype.index=function(u,m){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},f.prototype.position=function(u,m){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return u>0&&(p+=1),[this.parent.domNode,p]},f.prototype.value=function(){var u;return u={},u[this.statics.blotName]=this.statics.value(this.domNode)||!0,u},f.scope=l.Scope.INLINE_BLOT,f}(o.default);r.default=d},function(n,r,a){var i=a(11),o=a(3),l={attributes:{compose:function(h,f,u){typeof h!="object"&&(h={}),typeof f!="object"&&(f={});var m=o(!0,{},f);u||(m=Object.keys(m).reduce(function(w,v){return m[v]!=null&&(w[v]=m[v]),w},{}));for(var p in h)h[p]!==void 0&&f[p]===void 0&&(m[p]=h[p]);return Object.keys(m).length>0?m:void 0},diff:function(h,f){typeof h!="object"&&(h={}),typeof f!="object"&&(f={});var u=Object.keys(h).concat(Object.keys(f)).reduce(function(m,p){return i(h[p],f[p])||(m[p]=f[p]===void 0?null:f[p]),m},{});return Object.keys(u).length>0?u:void 0},transform:function(h,f,u){if(typeof h!="object")return f;if(typeof f=="object"){if(!u)return f;var m=Object.keys(f).reduce(function(p,w){return h[w]===void 0&&(p[w]=f[w]),p},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(h){return new d(h)},length:function(h){return typeof h.delete=="number"?h.delete:typeof h.retain=="number"?h.retain:typeof h.insert=="string"?h.insert.length:1}};function d(h){this.ops=h,this.index=0,this.offset=0}d.prototype.hasNext=function(){return this.peekLength()<1/0},d.prototype.next=function(h){h||(h=1/0);var f=this.ops[this.index];if(f){var u=this.offset,m=l.length(f);if(h>=m-u?(h=m-u,this.index+=1,this.offset=0):this.offset+=h,typeof f.delete=="number")return{delete:h};var p={};return f.attributes&&(p.attributes=f.attributes),typeof f.retain=="number"?p.retain=h:typeof f.insert=="string"?p.insert=f.insert.substr(u,h):p.insert=f.insert,p}else return{retain:1/0}},d.prototype.peek=function(){return this.ops[this.index]},d.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},d.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},d.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var h=this.offset,f=this.index,u=this.next(),m=this.ops.slice(this.index);return this.offset=h,this.index=f,[u].concat(m)}else return[]},n.exports=l},function(n,r){var a=function(){function i(v,x){return x!=null&&v instanceof x}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var d;try{d=Promise}catch{d=function(){}}function h(v,x,y,b,j){typeof x=="object"&&(y=x.depth,b=x.prototype,j=x.includeNonEnumerable,x=x.circular);var N=[],S=[],P=typeof Buffer<"u";typeof x>"u"&&(x=!0),typeof y>"u"&&(y=1/0);function T(E,I){if(E===null)return null;if(I===0)return E;var O,R;if(typeof E!="object")return E;if(i(E,o))O=new o;else if(i(E,l))O=new l;else if(i(E,d))O=new d(function(B,z){E.then(function(H){B(T(H,I-1))},function(H){z(T(H,I-1))})});else if(h.__isArray(E))O=[];else if(h.__isRegExp(E))O=new RegExp(E.source,w(E)),E.lastIndex&&(O.lastIndex=E.lastIndex);else if(h.__isDate(E))O=new Date(E.getTime());else{if(P&&Buffer.isBuffer(E))return Buffer.allocUnsafe?O=Buffer.allocUnsafe(E.length):O=new Buffer(E.length),E.copy(O),O;i(E,Error)?O=Object.create(E):typeof b>"u"?(R=Object.getPrototypeOf(E),O=Object.create(R)):(O=Object.create(b),R=b)}if(x){var C=N.indexOf(E);if(C!=-1)return S[C];N.push(E),S.push(O)}i(E,o)&&E.forEach(function(B,z){var H=T(z,I-1),q=T(B,I-1);O.set(H,q)}),i(E,l)&&E.forEach(function(B){var z=T(B,I-1);O.add(z)});for(var D in E){var A;R&&(A=Object.getOwnPropertyDescriptor(R,D)),!(A&&A.set==null)&&(O[D]=T(E[D],I-1))}if(Object.getOwnPropertySymbols)for(var M=Object.getOwnPropertySymbols(E),D=0;D<M.length;D++){var Z=M[D],X=Object.getOwnPropertyDescriptor(E,Z);X&&!X.enumerable&&!j||(O[Z]=T(E[Z],I-1),X.enumerable||Object.defineProperty(O,Z,{enumerable:!1}))}if(j)for(var U=Object.getOwnPropertyNames(E),D=0;D<U.length;D++){var F=U[D],X=Object.getOwnPropertyDescriptor(E,F);X&&X.enumerable||(O[F]=T(E[F],I-1),Object.defineProperty(O,F,{enumerable:!1}))}return O}return T(v,y)}h.clonePrototype=function(x){if(x===null)return null;var y=function(){};return y.prototype=x,new y};function f(v){return Object.prototype.toString.call(v)}h.__objToStr=f;function u(v){return typeof v=="object"&&f(v)==="[object Date]"}h.__isDate=u;function m(v){return typeof v=="object"&&f(v)==="[object Array]"}h.__isArray=m;function p(v){return typeof v=="object"&&f(v)==="[object RegExp]"}h.__isRegExp=p;function w(v){var x="";return v.global&&(x+="g"),v.ignoreCase&&(x+="i"),v.multiline&&(x+="m"),x}return h.__getRegExpFlags=w,h}();typeof n=="object"&&n.exports&&(n.exports=a)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function O(R,C){var D=[],A=!0,M=!1,Z=void 0;try{for(var X=R[Symbol.iterator](),U;!(A=(U=X.next()).done)&&(D.push(U.value),!(C&&D.length===C));A=!0);}catch(F){M=!0,Z=F}finally{try{!A&&X.return&&X.return()}finally{if(M)throw Z}}return D}return function(R,C){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return O(R,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function O(R,C){for(var D=0;D<C.length;D++){var A=C[D];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,A.key,A)}}return function(R,C,D){return C&&O(R.prototype,C),D&&O(R,D),R}}(),l=function O(R,C,D){R===null&&(R=Function.prototype);var A=Object.getOwnPropertyDescriptor(R,C);if(A===void 0){var M=Object.getPrototypeOf(R);return M===null?void 0:O(M,C,D)}else{if("value"in A)return A.value;var Z=A.get;return Z===void 0?void 0:Z.call(D)}},d=a(0),h=N(d),f=a(8),u=N(f),m=a(4),p=N(m),w=a(16),v=N(w),x=a(13),y=N(x),b=a(25),j=N(b);function N(O){return O&&O.__esModule?O:{default:O}}function S(O,R){if(!(O instanceof R))throw new TypeError("Cannot call a class as a function")}function P(O,R){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:O}function T(O,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);O.prototype=Object.create(R&&R.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(O,R):O.__proto__=R)}function E(O){return O instanceof p.default||O instanceof m.BlockEmbed}var I=function(O){T(R,O);function R(C,D){S(this,R);var A=P(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,C));return A.emitter=D.emitter,Array.isArray(D.whitelist)&&(A.whitelist=D.whitelist.reduce(function(M,Z){return M[Z]=!0,M},{})),A.domNode.addEventListener("DOMNodeInserted",function(){}),A.optimize(),A.enable(),A}return o(R,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(D,A){var M=this.line(D),Z=i(M,2),X=Z[0],U=Z[1],F=this.line(D+A),B=i(F,1),z=B[0];if(l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,D,A),z!=null&&X!==z&&U>0){if(X instanceof m.BlockEmbed||z instanceof m.BlockEmbed){this.optimize();return}if(X instanceof y.default){var H=X.newlineIndex(X.length(),!0);if(H>-1&&(X=X.split(H+1),X===z)){this.optimize();return}}else if(z instanceof y.default){var q=z.newlineIndex(0);q>-1&&z.split(q+1)}var W=z.children.head instanceof v.default?null:z.children.head;X.moveChildren(z,W),X.remove()}this.optimize()}},{key:"enable",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",D)}},{key:"formatAt",value:function(D,A,M,Z){this.whitelist!=null&&!this.whitelist[M]||(l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,D,A,M,Z),this.optimize())}},{key:"insertAt",value:function(D,A,M){if(!(M!=null&&this.whitelist!=null&&!this.whitelist[A])){if(D>=this.length())if(M==null||h.default.query(A,h.default.Scope.BLOCK)==null){var Z=h.default.create(this.statics.defaultChild);this.appendChild(Z),M==null&&A.endsWith(`
`)&&(A=A.slice(0,-1)),Z.insertAt(0,A,M)}else{var X=h.default.create(A,M);this.appendChild(X)}else l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,D,A,M);this.optimize()}}},{key:"insertBefore",value:function(D,A){if(D.statics.scope===h.default.Scope.INLINE_BLOT){var M=h.default.create(this.statics.defaultChild);M.appendChild(D),D=M}l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,D,A)}},{key:"leaf",value:function(D){return this.path(D).pop()||[null,-1]}},{key:"line",value:function(D){return D===this.length()?this.line(D-1):this.descendant(E,D)}},{key:"lines",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,M=function Z(X,U,F){var B=[],z=F;return X.children.forEachAt(U,F,function(H,q,W){E(H)?B.push(H):H instanceof h.default.Container&&(B=B.concat(Z(H,q,z))),z-=W}),B};return M(this,D,A)}},{key:"optimize",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,D,A),D.length>0&&this.emitter.emit(u.default.events.SCROLL_OPTIMIZE,D,A))}},{key:"path",value:function(D){return l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,D).slice(1)}},{key:"update",value:function(D){if(this.batch!==!0){var A=u.default.sources.USER;typeof D=="string"&&(A=D),Array.isArray(D)||(D=this.observer.takeRecords()),D.length>0&&this.emitter.emit(u.default.events.SCROLL_BEFORE_UPDATE,A,D),l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"update",this).call(this,D.concat([])),D.length>0&&this.emitter.emit(u.default.events.SCROLL_UPDATE,A,D)}}}]),R}(h.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[p.default,m.BlockEmbed,j.default],r.default=I},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},o=function(){function V(G,ie){var J=[],le=!0,ye=!1,ke=void 0;try{for(var Ne=G[Symbol.iterator](),_e;!(le=(_e=Ne.next()).done)&&(J.push(_e.value),!(ie&&J.length===ie));le=!0);}catch(ne){ye=!0,ke=ne}finally{try{!le&&Ne.return&&Ne.return()}finally{if(ye)throw ke}}return J}return function(G,ie){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return V(G,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function V(G,ie){for(var J=0;J<ie.length;J++){var le=ie[J];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(G,le.key,le)}}return function(G,ie,J){return ie&&V(G.prototype,ie),J&&V(G,J),G}}(),d=a(21),h=O(d),f=a(11),u=O(f),m=a(3),p=O(m),w=a(2),v=O(w),x=a(20),y=O(x),b=a(0),j=O(b),N=a(5),S=O(N),P=a(10),T=O(P),E=a(9),I=O(E);function O(V){return V&&V.__esModule?V:{default:V}}function R(V,G,ie){return G in V?Object.defineProperty(V,G,{value:ie,enumerable:!0,configurable:!0,writable:!0}):V[G]=ie,V}function C(V,G){if(!(V instanceof G))throw new TypeError("Cannot call a class as a function")}function D(V,G){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:V}function A(V,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);V.prototype=Object.create(G&&G.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(V,G):V.__proto__=G)}var M=(0,T.default)("quill:keyboard"),Z=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",X=function(V){A(G,V),l(G,null,[{key:"match",value:function(J,le){return le=Y(le),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ye){return!!le[ye]!==J[ye]&&le[ye]!==null})?!1:le.key===(J.which||J.keyCode)}}]);function G(ie,J){C(this,G);var le=D(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,ie,J));return le.bindings={},Object.keys(le.options.bindings).forEach(function(ye){ye==="list autofill"&&ie.scroll.whitelist!=null&&!ie.scroll.whitelist.list||le.options.bindings[ye]&&le.addBinding(le.options.bindings[ye])}),le.addBinding({key:G.keys.ENTER,shiftKey:null},H),le.addBinding({key:G.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(le.addBinding({key:G.keys.BACKSPACE},{collapsed:!0},F),le.addBinding({key:G.keys.DELETE},{collapsed:!0},B)):(le.addBinding({key:G.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},F),le.addBinding({key:G.keys.DELETE},{collapsed:!0,suffix:/^.?$/},B)),le.addBinding({key:G.keys.BACKSPACE},{collapsed:!1},z),le.addBinding({key:G.keys.DELETE},{collapsed:!1},z),le.addBinding({key:G.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},F),le.listen(),le}return l(G,[{key:"addBinding",value:function(J){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ke=Y(J);if(ke==null||ke.key==null)return M.warn("Attempted to add invalid keyboard binding",ke);typeof le=="function"&&(le={handler:le}),typeof ye=="function"&&(ye={handler:ye}),ke=(0,p.default)(ke,le,ye),this.bindings[ke.key]=this.bindings[ke.key]||[],this.bindings[ke.key].push(ke)}},{key:"listen",value:function(){var J=this;this.quill.root.addEventListener("keydown",function(le){if(!le.defaultPrevented){var ye=le.which||le.keyCode,ke=(J.bindings[ye]||[]).filter(function(Se){return G.match(le,Se)});if(ke.length!==0){var Ne=J.quill.getSelection();if(!(Ne==null||!J.quill.hasFocus())){var _e=J.quill.getLine(Ne.index),ne=o(_e,2),Ce=ne[0],ve=ne[1],oe=J.quill.getLeaf(Ne.index),de=o(oe,2),Q=de[0],ae=de[1],ue=Ne.length===0?[Q,ae]:J.quill.getLeaf(Ne.index+Ne.length),re=o(ue,2),ce=re[0],fe=re[1],ge=Q instanceof j.default.Text?Q.value().slice(0,ae):"",me=ce instanceof j.default.Text?ce.value().slice(fe):"",be={collapsed:Ne.length===0,empty:Ne.length===0&&Ce.length()<=1,format:J.quill.getFormat(Ne),offset:ve,prefix:ge,suffix:me},Te=ke.some(function(Se){if(Se.collapsed!=null&&Se.collapsed!==be.collapsed||Se.empty!=null&&Se.empty!==be.empty||Se.offset!=null&&Se.offset!==be.offset)return!1;if(Array.isArray(Se.format)){if(Se.format.every(function(Ie){return be.format[Ie]==null}))return!1}else if(i(Se.format)==="object"&&!Object.keys(Se.format).every(function(Ie){return Se.format[Ie]===!0?be.format[Ie]!=null:Se.format[Ie]===!1?be.format[Ie]==null:(0,u.default)(Se.format[Ie],be.format[Ie])}))return!1;return Se.prefix!=null&&!Se.prefix.test(be.prefix)||Se.suffix!=null&&!Se.suffix.test(be.suffix)?!1:Se.handler.call(J,Ne,be)!==!0});Te&&le.preventDefault()}}}})}}]),G}(I.default);X.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},X.DEFAULTS={bindings:{bold:W("bold"),italic:W("italic"),underline:W("underline"),indent:{key:X.keys.TAB,format:["blockquote","indent","list"],handler:function(G,ie){if(ie.collapsed&&ie.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:X.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(G,ie){if(ie.collapsed&&ie.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:X.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(G,ie){ie.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):ie.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":q(!0),"outdent code-block":q(!1),"remove tab":{key:X.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(G){this.quill.deleteText(G.index-1,1,S.default.sources.USER)}},tab:{key:X.keys.TAB,handler:function(G){this.quill.history.cutoff();var ie=new v.default().retain(G.index).delete(G.length).insert("	");this.quill.updateContents(ie,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(G.index+1,S.default.sources.SILENT)}},"list empty enter":{key:X.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(G,ie){this.quill.format("list",!1,S.default.sources.USER),ie.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:X.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(G){var ie=this.quill.getLine(G.index),J=o(ie,2),le=J[0],ye=J[1],ke=(0,p.default)({},le.formats(),{list:"checked"}),Ne=new v.default().retain(G.index).insert(`
`,ke).retain(le.length()-ye-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ne,S.default.sources.USER),this.quill.setSelection(G.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:X.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(G,ie){var J=this.quill.getLine(G.index),le=o(J,2),ye=le[0],ke=le[1],Ne=new v.default().retain(G.index).insert(`
`,ie.format).retain(ye.length()-ke-1).retain(1,{header:null});this.quill.updateContents(Ne,S.default.sources.USER),this.quill.setSelection(G.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(G,ie){var J=ie.prefix.length,le=this.quill.getLine(G.index),ye=o(le,2),ke=ye[0],Ne=ye[1];if(Ne>J)return!0;var _e=void 0;switch(ie.prefix.trim()){case"[]":case"[ ]":_e="unchecked";break;case"[x]":_e="checked";break;case"-":case"*":_e="bullet";break;default:_e="ordered"}this.quill.insertText(G.index," ",S.default.sources.USER),this.quill.history.cutoff();var ne=new v.default().retain(G.index-Ne).delete(J+1).retain(ke.length()-2-Ne).retain(1,{list:_e});this.quill.updateContents(ne,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(G.index-J,S.default.sources.SILENT)}},"code exit":{key:X.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(G){var ie=this.quill.getLine(G.index),J=o(ie,2),le=J[0],ye=J[1],ke=new v.default().retain(G.index+le.length()-ye-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ke,S.default.sources.USER)}},"embed left":U(X.keys.LEFT,!1),"embed left shift":U(X.keys.LEFT,!0),"embed right":U(X.keys.RIGHT,!1),"embed right shift":U(X.keys.RIGHT,!0)}};function U(V,G){var ie,J=V===X.keys.LEFT?"prefix":"suffix";return ie={key:V,shiftKey:G,altKey:null},R(ie,J,/^$/),R(ie,"handler",function(ye){var ke=ye.index;V===X.keys.RIGHT&&(ke+=ye.length+1);var Ne=this.quill.getLeaf(ke),_e=o(Ne,1),ne=_e[0];return ne instanceof j.default.Embed?(V===X.keys.LEFT?G?this.quill.setSelection(ye.index-1,ye.length+1,S.default.sources.USER):this.quill.setSelection(ye.index-1,S.default.sources.USER):G?this.quill.setSelection(ye.index,ye.length+1,S.default.sources.USER):this.quill.setSelection(ye.index+ye.length+1,S.default.sources.USER),!1):!0}),ie}function F(V,G){if(!(V.index===0||this.quill.getLength()<=1)){var ie=this.quill.getLine(V.index),J=o(ie,1),le=J[0],ye={};if(G.offset===0){var ke=this.quill.getLine(V.index-1),Ne=o(ke,1),_e=Ne[0];if(_e!=null&&_e.length()>1){var ne=le.formats(),Ce=this.quill.getFormat(V.index-1,1);ye=y.default.attributes.diff(ne,Ce)||{}}}var ve=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(G.prefix)?2:1;this.quill.deleteText(V.index-ve,ve,S.default.sources.USER),Object.keys(ye).length>0&&this.quill.formatLine(V.index-ve,ve,ye,S.default.sources.USER),this.quill.focus()}}function B(V,G){var ie=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(G.suffix)?2:1;if(!(V.index>=this.quill.getLength()-ie)){var J={},le=0,ye=this.quill.getLine(V.index),ke=o(ye,1),Ne=ke[0];if(G.offset>=Ne.length()-1){var _e=this.quill.getLine(V.index+1),ne=o(_e,1),Ce=ne[0];if(Ce){var ve=Ne.formats(),oe=this.quill.getFormat(V.index,1);J=y.default.attributes.diff(ve,oe)||{},le=Ce.length()}}this.quill.deleteText(V.index,ie,S.default.sources.USER),Object.keys(J).length>0&&this.quill.formatLine(V.index+le-1,ie,J,S.default.sources.USER)}}function z(V){var G=this.quill.getLines(V),ie={};if(G.length>1){var J=G[0].formats(),le=G[G.length-1].formats();ie=y.default.attributes.diff(le,J)||{}}this.quill.deleteText(V,S.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(V.index,1,ie,S.default.sources.USER),this.quill.setSelection(V.index,S.default.sources.SILENT),this.quill.focus()}function H(V,G){var ie=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var J=Object.keys(G.format).reduce(function(le,ye){return j.default.query(ye,j.default.Scope.BLOCK)&&!Array.isArray(G.format[ye])&&(le[ye]=G.format[ye]),le},{});this.quill.insertText(V.index,`
`,J,S.default.sources.USER),this.quill.setSelection(V.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(G.format).forEach(function(le){J[le]==null&&(Array.isArray(G.format[le])||le!=="link"&&ie.quill.format(le,G.format[le],S.default.sources.USER))})}function q(V){return{key:X.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(ie){var J=j.default.query("code-block"),le=ie.index,ye=ie.length,ke=this.quill.scroll.descendant(J,le),Ne=o(ke,2),_e=Ne[0],ne=Ne[1];if(_e!=null){var Ce=this.quill.getIndex(_e),ve=_e.newlineIndex(ne,!0)+1,oe=_e.newlineIndex(Ce+ne+ye),de=_e.domNode.textContent.slice(ve,oe).split(`
`);ne=0,de.forEach(function(Q,ae){V?(_e.insertAt(ve+ne,J.TAB),ne+=J.TAB.length,ae===0?le+=J.TAB.length:ye+=J.TAB.length):Q.startsWith(J.TAB)&&(_e.deleteAt(ve+ne,J.TAB.length),ne-=J.TAB.length,ae===0?le-=J.TAB.length:ye-=J.TAB.length),ne+=Q.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(le,ye,S.default.sources.SILENT)}}}}function W(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(ie,J){this.quill.format(V,!J.format[V],S.default.sources.USER)}}}function Y(V){if(typeof V=="string"||typeof V=="number")return Y({key:V});if((typeof V>"u"?"undefined":i(V))==="object"&&(V=(0,h.default)(V,!1)),typeof V.key=="string")if(X.keys[V.key.toUpperCase()]!=null)V.key=X.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[Z]=V.shortKey,delete V.shortKey),V}r.default=X,r.SHORTKEY=Z},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function y(b,j){var N=[],S=!0,P=!1,T=void 0;try{for(var E=b[Symbol.iterator](),I;!(S=(I=E.next()).done)&&(N.push(I.value),!(j&&N.length===j));S=!0);}catch(O){P=!0,T=O}finally{try{!S&&E.return&&E.return()}finally{if(P)throw T}}return N}return function(b,j){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return y(b,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function y(b,j,N){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,j);if(S===void 0){var P=Object.getPrototypeOf(b);return P===null?void 0:y(P,j,N)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(N)}},l=function(){function y(b,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,j,N){return j&&y(b.prototype,j),N&&y(b,N),b}}(),d=a(0),h=m(d),f=a(7),u=m(f);function m(y){return y&&y.__esModule?y:{default:y}}function p(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function w(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function v(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var x=function(y){v(b,y),l(b,null,[{key:"value",value:function(){}}]);function b(j,N){p(this,b);var S=w(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,j));return S.selection=N,S.textNode=document.createTextNode(b.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return l(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,S){if(this._length!==0)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,N,S);for(var P=this,T=0;P!=null&&P.statics.scope!==h.default.Scope.BLOCK_BLOT;)T+=P.offset(P.parent),P=P.parent;P!=null&&(this._length=b.CONTENTS.length,P.optimize(),P.formatAt(T,b.CONTENTS.length,N,S),this._length=0)}},{key:"index",value:function(N,S){return N===this.textNode?0:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,N,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,S=this.selection.getNativeRange(),P=void 0,T=void 0,E=void 0;if(S!=null&&S.start.node===N&&S.end.node===N){var I=[N,S.start.offset,S.end.offset];P=I[0],T=I[1],E=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var O=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof u.default?(P=this.next.domNode,this.next.insertAt(0,O),this.textNode.data=b.CONTENTS):(this.textNode.data=O,this.parent.insertBefore(h.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),T!=null){var R=[T,E].map(function(D){return Math.max(0,Math.min(P.data.length,D-1))}),C=i(R,2);return T=C[0],E=C[1],{startNode:P,startOffset:T,endNode:P,endOffset:E}}}}},{key:"update",value:function(N,S){var P=this;if(N.some(function(E){return E.type==="characterData"&&E.target===P.textNode})){var T=this.restore();T&&(S.range=T)}}},{key:"value",value:function(){return""}}]),b}(h.default.Embed);x.blotName="cursor",x.className="ql-cursor",x.tagName="span",x.CONTENTS="\uFEFF",r.default=x},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=h(i),l=a(4),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function u(w,v){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:w}function m(w,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v)}var p=function(w){m(v,w);function v(){return f(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v}(o.default.Container);p.allowedChildren=[d.default,l.BlockEmbed,p],r.default=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var i=function(){function x(y,b){for(var j=0;j<b.length;j++){var N=b[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,b,j){return b&&x(y.prototype,b),j&&x(y,j),y}}(),o=function x(y,b,j){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,b);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:x(S,b,j)}else{if("value"in N)return N.value;var P=N.get;return P===void 0?void 0:P.call(j)}},l=a(0),d=h(l);function h(x){return x&&x.__esModule?x:{default:x}}function f(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function u(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function m(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var p=function(x){m(y,x);function y(){return f(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"value",value:function(j){var N=o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,j);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):N}}]),y}(d.default.Attributor.Style),w=new d.default.Attributor.Class("color","ql-color",{scope:d.default.Scope.INLINE}),v=new p("color","color",{scope:d.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=w,r.ColorStyle=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var i=function(){function v(x,y){for(var b=0;b<y.length;b++){var j=y[b];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(x,j.key,j)}}return function(x,y,b){return y&&v(x.prototype,y),b&&v(x,b),x}}(),o=function v(x,y,b){x===null&&(x=Function.prototype);var j=Object.getOwnPropertyDescriptor(x,y);if(j===void 0){var N=Object.getPrototypeOf(x);return N===null?void 0:v(N,y,b)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(b)}},l=a(6),d=h(l);function h(v){return v&&v.__esModule?v:{default:v}}function f(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function u(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function m(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var p=function(v){m(x,v);function x(){return f(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,[{key:"format",value:function(b,j){if(b!==this.statics.blotName||!j)return o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,b,j);j=this.constructor.sanitize(j),this.domNode.setAttribute("href",j)}}],[{key:"create",value:function(b){var j=o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,b);return b=this.sanitize(b),j.setAttribute("href",b),j.setAttribute("rel","noopener noreferrer"),j.setAttribute("target","_blank"),j}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return w(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),x}(d.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function w(v,x){var y=document.createElement("a");y.href=v;var b=y.href.slice(0,y.href.indexOf(":"));return x.indexOf(b)>-1}r.default=p,r.sanitize=w},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},o=function(){function x(y,b){for(var j=0;j<b.length;j++){var N=b[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,b,j){return b&&x(y.prototype,b),j&&x(y,j),y}}(),l=a(23),d=u(l),h=a(107),f=u(h);function u(x){return x&&x.__esModule?x:{default:x}}function m(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}var p=0;function w(x,y){x.setAttribute(y,x.getAttribute(y)!=="true")}var v=function(){function x(y){var b=this;m(this,x),this.select=y,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(j){switch(j.keyCode){case d.default.keys.ENTER:b.togglePicker();break;case d.default.keys.ESCAPE:b.escape(),j.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(x,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),w(this.label,"aria-expanded"),w(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var j=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),b.hasAttribute("value")&&N.setAttribute("data-value",b.getAttribute("value")),b.textContent&&N.setAttribute("data-label",b.textContent),N.addEventListener("click",function(){j.selectItem(N,!0)}),N.addEventListener("keydown",function(S){switch(S.keyCode){case d.default.keys.ENTER:j.selectItem(N,!0),S.preventDefault();break;case d.default.keys.ESCAPE:j.escape(),S.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=f.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,j=document.createElement("span");j.classList.add("ql-picker-options"),j.setAttribute("aria-hidden","true"),j.tabIndex="-1",j.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",j.id),this.options=j,[].slice.call(this.select.options).forEach(function(N){var S=b.buildItem(N);j.appendChild(S),N.selected===!0&&b.selectItem(S)}),this.container.appendChild(j)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(j){b.container.setAttribute(j.name,j.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(b!==N&&(N!=null&&N.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),j))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var j=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(j)}else this.selectItem(null);var N=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),x}();r.default=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=M(i),l=a(5),d=M(l),h=a(4),f=M(h),u=a(16),m=M(u),p=a(25),w=M(p),v=a(24),x=M(v),y=a(35),b=M(y),j=a(6),N=M(j),S=a(22),P=M(S),T=a(7),E=M(T),I=a(55),O=M(I),R=a(42),C=M(R),D=a(23),A=M(D);function M(Z){return Z&&Z.__esModule?Z:{default:Z}}d.default.register({"blots/block":f.default,"blots/block/embed":h.BlockEmbed,"blots/break":m.default,"blots/container":w.default,"blots/cursor":x.default,"blots/embed":b.default,"blots/inline":N.default,"blots/scroll":P.default,"blots/text":E.default,"modules/clipboard":O.default,"modules/history":C.default,"modules/keyboard":A.default}),o.default.register(f.default,m.default,x.default,N.default,P.default,E.default),r.default=d.default},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(1),o=function(){function l(d){this.domNode=d,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(d){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var h;return Array.isArray(this.tagName)?(typeof d=="string"&&(d=d.toUpperCase(),parseInt(d).toString()===d&&(d=parseInt(d))),typeof d=="number"?h=document.createElement(this.tagName[d-1]):this.tagName.indexOf(d)>-1?h=document.createElement(d):h=document.createElement(this.tagName[0])):h=document.createElement(this.tagName),this.className&&h.classList.add(this.className),h},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var d=this.domNode.cloneNode(!1);return i.create(d)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},l.prototype.deleteAt=function(d,h){var f=this.isolate(d,h);f.remove()},l.prototype.formatAt=function(d,h,f,u){var m=this.isolate(d,h);if(i.query(f,i.Scope.BLOT)!=null&&u)m.wrap(f,u);else if(i.query(f,i.Scope.ATTRIBUTE)!=null){var p=i.create(this.statics.scope);m.wrap(p),p.format(f,u)}},l.prototype.insertAt=function(d,h,f){var u=f==null?i.create("text",h):i.create(h,f),m=this.split(d);this.parent.insertBefore(u,m)},l.prototype.insertInto=function(d,h){h===void 0&&(h=null),this.parent!=null&&this.parent.children.remove(this);var f=null;d.children.insertBefore(this,h),h!=null&&(f=h.domNode),(this.domNode.parentNode!=d.domNode||this.domNode.nextSibling!=f)&&d.domNode.insertBefore(this.domNode,f),this.parent=d,this.attach()},l.prototype.isolate=function(d,h){var f=this.split(d);return f.split(h),f},l.prototype.length=function(){return 1},l.prototype.offset=function(d){return d===void 0&&(d=this.parent),this.parent==null||this==d?0:this.parent.children.offset(this)+this.parent.offset(d)},l.prototype.optimize=function(d){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(d){d.parent!=null&&(d.parent.insertBefore(this,d.next),d.remove())},l.prototype.replaceWith=function(d,h){var f=typeof d=="string"?i.create(d,h):d;return f.replace(this),f},l.prototype.split=function(d,h){return d===0?this:this.next},l.prototype.update=function(d,h){},l.prototype.wrap=function(d,h){var f=typeof d=="string"?i.create(d,h):d;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},l.blotName="abstract",l}();r.default=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(12),o=a(32),l=a(33),d=a(1),h=function(){function f(u){this.attributes={},this.domNode=u,this.build()}return f.prototype.attribute=function(u,m){m?u.add(this.domNode,m)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])},f.prototype.build=function(){var u=this;this.attributes={};var m=i.default.keys(this.domNode),p=o.default.keys(this.domNode),w=l.default.keys(this.domNode);m.concat(p).concat(w).forEach(function(v){var x=d.query(v,d.Scope.ATTRIBUTE);x instanceof i.default&&(u.attributes[x.attrName]=x)})},f.prototype.copy=function(u){var m=this;Object.keys(this.attributes).forEach(function(p){var w=m.attributes[p].value(m.domNode);u.format(p,w)})},f.prototype.move=function(u){var m=this;this.copy(u),Object.keys(this.attributes).forEach(function(p){m.attributes[p].remove(m.domNode)}),this.attributes={}},f.prototype.values=function(){var u=this;return Object.keys(this.attributes).reduce(function(m,p){return m[p]=u.attributes[p].value(u.domNode),m},{})},f}();r.default=h},function(n,r,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var m in u)u.hasOwnProperty(m)&&(f[m]=u[m])};return function(f,u){h(f,u);function m(){this.constructor=f}f.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(12);function l(h,f){var u=h.getAttribute("class")||"";return u.split(/\s+/).filter(function(m){return m.indexOf(f+"-")===0})}var d=function(h){i(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.keys=function(u){return(u.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},f.prototype.add=function(u,m){return this.canAdd(u,m)?(this.remove(u),u.classList.add(this.keyName+"-"+m),!0):!1},f.prototype.remove=function(u){var m=l(u,this.keyName);m.forEach(function(p){u.classList.remove(p)}),u.classList.length===0&&u.removeAttribute("class")},f.prototype.value=function(u){var m=l(u,this.keyName)[0]||"",p=m.slice(this.keyName.length+1);return this.canAdd(u,p)?p:""},f}(o.default);r.default=d},function(n,r,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var m in u)u.hasOwnProperty(m)&&(f[m]=u[m])};return function(f,u){h(f,u);function m(){this.constructor=f}f.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(12);function l(h){var f=h.split("-"),u=f.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return f[0]+u}var d=function(h){i(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.keys=function(u){return(u.getAttribute("style")||"").split(";").map(function(m){var p=m.split(":");return p[0].trim()})},f.prototype.add=function(u,m){return this.canAdd(u,m)?(u.style[l(this.keyName)]=m,!0):!1},f.prototype.remove=function(u){u.style[l(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")},f.prototype.value=function(u){var m=u.style[l(this.keyName)];return this.canAdd(u,m)?m:""},f}(o.default);r.default=d},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function d(h,f){for(var u=0;u<f.length;u++){var m=f[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(h,m.key,m)}}return function(h,f,u){return f&&d(h.prototype,f),u&&d(h,u),h}}();function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function(){function d(h,f){o(this,d),this.quill=h,this.options=f,this.modules={}}return i(d,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(u){f.modules[u]==null&&f.addModule(u)})}},{key:"addModule",value:function(f){var u=this.quill.constructor.import("modules/"+f);return this.modules[f]=new u(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),d}();l.DEFAULTS={modules:{}},l.themes={default:l},r.default=l},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function y(b,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,j,N){return j&&y(b.prototype,j),N&&y(b,N),b}}(),o=function y(b,j,N){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,j);if(S===void 0){var P=Object.getPrototypeOf(b);return P===null?void 0:y(P,j,N)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(N)}},l=a(0),d=u(l),h=a(7),f=u(h);function u(y){return y&&y.__esModule?y:{default:y}}function m(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function p(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function w(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var v="\uFEFF",x=function(y){w(b,y);function b(j){m(this,b);var N=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,j));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(S){N.contentNode.appendChild(S)}),N.leftGuard=document.createTextNode(v),N.rightGuard=document.createTextNode(v),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return i(b,[{key:"index",value:function(N,S){return N===this.leftGuard?0:N===this.rightGuard?1:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,N,S)}},{key:"restore",value:function(N){var S=void 0,P=void 0,T=N.data.split(v).join("");if(N===this.leftGuard)if(this.prev instanceof f.default){var E=this.prev.length();this.prev.insertAt(E,T),S={startNode:this.prev.domNode,startOffset:E+T.length}}else P=document.createTextNode(T),this.parent.insertBefore(d.default.create(P),this),S={startNode:P,startOffset:T.length};else N===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,T),S={startNode:this.next.domNode,startOffset:T.length}):(P=document.createTextNode(T),this.parent.insertBefore(d.default.create(P),this.next),S={startNode:P,startOffset:T.length}));return N.data=v,S}},{key:"update",value:function(N,S){var P=this;N.forEach(function(T){if(T.type==="characterData"&&(T.target===P.leftGuard||T.target===P.rightGuard)){var E=P.restore(T.target);E&&(S.range=E)}})}}]),b}(d.default.Embed);r.default=x},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var i=a(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}var d={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},h=new o.default.Attributor.Attribute("align","align",d),f=new o.default.Attributor.Class("align","ql-align",d),u=new o.default.Attributor.Style("align","text-align",d);r.AlignAttribute=h,r.AlignClass=f,r.AlignStyle=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var i=a(0),o=d(i),l=a(26);function d(u){return u&&u.__esModule?u:{default:u}}var h=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),f=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=h,r.BackgroundStyle=f},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var i=a(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}var d={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},h=new o.default.Attributor.Attribute("direction","dir",d),f=new o.default.Attributor.Class("direction","ql-direction",d),u=new o.default.Attributor.Style("direction","direction",d);r.DirectionAttribute=h,r.DirectionClass=f,r.DirectionStyle=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var i=function(){function y(b,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,j,N){return j&&y(b.prototype,j),N&&y(b,N),b}}(),o=function y(b,j,N){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,j);if(S===void 0){var P=Object.getPrototypeOf(b);return P===null?void 0:y(P,j,N)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(N)}},l=a(0),d=h(l);function h(y){return y&&y.__esModule?y:{default:y}}function f(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function u(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function m(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var p={scope:d.default.Scope.INLINE,whitelist:["serif","monospace"]},w=new d.default.Attributor.Class("font","ql-font",p),v=function(y){m(b,y);function b(){return f(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"value",value:function(N){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),b}(d.default.Attributor.Style),x=new v("font","font-family",p);r.FontStyle=x,r.FontClass=w},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var i=a(0),o=l(i);function l(f){return f&&f.__esModule?f:{default:f}}var d=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),h=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=d,r.SizeStyle=h},function(n,r,a){n.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var i=function(){function j(N,S){for(var P=0;P<S.length;P++){var T=S[P];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(N,T.key,T)}}return function(N,S,P){return S&&j(N.prototype,S),P&&j(N,P),N}}(),o=a(0),l=m(o),d=a(5),h=m(d),f=a(9),u=m(f);function m(j){return j&&j.__esModule?j:{default:j}}function p(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function w(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function v(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var x=function(j){v(N,j);function N(S,P){p(this,N);var T=w(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S,P));return T.lastRecorded=0,T.ignoreChange=!1,T.clear(),T.quill.on(h.default.events.EDITOR_CHANGE,function(E,I,O,R){E!==h.default.events.TEXT_CHANGE||T.ignoreChange||(!T.options.userOnly||R===h.default.sources.USER?T.record(I,O):T.transform(I))}),T.quill.keyboard.addBinding({key:"Z",shortKey:!0},T.undo.bind(T)),T.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},T.redo.bind(T)),/Win/i.test(navigator.platform)&&T.quill.keyboard.addBinding({key:"Y",shortKey:!0},T.redo.bind(T)),T}return i(N,[{key:"change",value:function(P,T){if(this.stack[P].length!==0){var E=this.stack[P].pop();this.stack[T].push(E),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(E[P],h.default.sources.USER),this.ignoreChange=!1;var I=b(E[P]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(P,T){if(P.ops.length!==0){this.stack.redo=[];var E=this.quill.getContents().diff(T),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var O=this.stack.undo.pop();E=E.compose(O.undo),P=O.redo.compose(P)}else this.lastRecorded=I;this.stack.undo.push({redo:P,undo:E}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(P){this.stack.undo.forEach(function(T){T.undo=P.transform(T.undo,!0),T.redo=P.transform(T.redo,!0)}),this.stack.redo.forEach(function(T){T.undo=P.transform(T.undo,!0),T.redo=P.transform(T.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N}(u.default);x.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function y(j){var N=j.ops[j.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(S){return l.default.query(S,l.default.Scope.BLOCK)!=null}):!1}function b(j){var N=j.reduce(function(P,T){return P+=T.delete||0,P},0),S=j.length()-N;return y(j)&&(S-=1),S}r.default=x,r.getLastChangeIndex=b},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var i=function(){function H(q,W){for(var Y=0;Y<W.length;Y++){var V=W[Y];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(q,V.key,V)}}return function(q,W,Y){return W&&H(q.prototype,W),Y&&H(q,Y),q}}(),o=function H(q,W,Y){q===null&&(q=Function.prototype);var V=Object.getOwnPropertyDescriptor(q,W);if(V===void 0){var G=Object.getPrototypeOf(q);return G===null?void 0:H(G,W,Y)}else{if("value"in V)return V.value;var ie=V.get;return ie===void 0?void 0:ie.call(Y)}},l=a(3),d=I(l),h=a(2),f=I(h),u=a(8),m=I(u),p=a(23),w=I(p),v=a(34),x=I(v),y=a(59),b=I(y),j=a(60),N=I(j),S=a(28),P=I(S),T=a(61),E=I(T);function I(H){return H&&H.__esModule?H:{default:H}}function O(H,q){if(!(H instanceof q))throw new TypeError("Cannot call a class as a function")}function R(H,q){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:H}function C(H,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);H.prototype=Object.create(q&&q.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(H,q):H.__proto__=q)}var D=[!1,"center","right","justify"],A=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],M=[!1,"serif","monospace"],Z=["1","2","3",!1],X=["small",!1,"large","huge"],U=function(H){C(q,H);function q(W,Y){O(this,q);var V=R(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,W,Y)),G=function ie(J){if(!document.body.contains(W.root))return document.body.removeEventListener("click",ie);V.tooltip!=null&&!V.tooltip.root.contains(J.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(le){le.container.contains(J.target)||le.close()})};return W.emitter.listenDOM("click",document.body,G),V}return i(q,[{key:"addModule",value:function(Y){var V=o(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"addModule",this).call(this,Y);return Y==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(Y,V){Y.forEach(function(G){var ie=G.getAttribute("class")||"";ie.split(/\s+/).forEach(function(J){if(J.startsWith("ql-")&&(J=J.slice(3),V[J]!=null))if(J==="direction")G.innerHTML=V[J][""]+V[J].rtl;else if(typeof V[J]=="string")G.innerHTML=V[J];else{var le=G.value||"";le!=null&&V[J][le]&&(G.innerHTML=V[J][le])}})})}},{key:"buildPickers",value:function(Y,V){var G=this;this.pickers=Y.map(function(J){if(J.classList.contains("ql-align"))return J.querySelector("option")==null&&z(J,D),new N.default(J,V.align);if(J.classList.contains("ql-background")||J.classList.contains("ql-color")){var le=J.classList.contains("ql-background")?"background":"color";return J.querySelector("option")==null&&z(J,A,le==="background"?"#ffffff":"#000000"),new b.default(J,V[le])}else return J.querySelector("option")==null&&(J.classList.contains("ql-font")?z(J,M):J.classList.contains("ql-header")?z(J,Z):J.classList.contains("ql-size")&&z(J,X)),new P.default(J)});var ie=function(){G.pickers.forEach(function(le){le.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,ie)}}]),q}(x.default);U.DEFAULTS=(0,d.default)(!0,{},x.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var q=this,W=this.container.querySelector("input.ql-image[type=file]");W==null&&(W=document.createElement("input"),W.setAttribute("type","file"),W.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),W.classList.add("ql-image"),W.addEventListener("change",function(){if(W.files!=null&&W.files[0]!=null){var Y=new FileReader;Y.onload=function(V){var G=q.quill.getSelection(!0);q.quill.updateContents(new f.default().retain(G.index).delete(G.length).insert({image:V.target.result}),m.default.sources.USER),q.quill.setSelection(G.index+1,m.default.sources.SILENT),W.value=""},Y.readAsDataURL(W.files[0])}}),this.container.appendChild(W)),W.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var F=function(H){C(q,H);function q(W,Y){O(this,q);var V=R(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,W,Y));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return i(q,[{key:"listen",value:function(){var Y=this;this.textbox.addEventListener("keydown",function(V){w.default.match(V,"enter")?(Y.save(),V.preventDefault()):w.default.match(V,"escape")&&(Y.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:Y!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Y)||""),this.root.setAttribute("data-mode",Y)}},{key:"restoreFocus",value:function(){var Y=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Y}},{key:"save",value:function(){var Y=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Y,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Y,m.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":Y=B(Y);case"formula":{if(!Y)break;var G=this.quill.getSelection(!0);if(G!=null){var ie=G.index+G.length;this.quill.insertEmbed(ie,this.root.getAttribute("data-mode"),Y,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ie+1," ",m.default.sources.USER),this.quill.setSelection(ie+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),q}(E.default);function B(H){var q=H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return q?(q[1]||"https")+"://www.youtube.com/embed/"+q[2]+"?showinfo=0":(q=H.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(q[1]||"https")+"://player.vimeo.com/video/"+q[2]+"/":H}function z(H,q){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;q.forEach(function(Y){var V=document.createElement("option");Y===W?V.setAttribute("selected","selected"):V.setAttribute("value",Y),H.appendChild(V)})}r.BaseTooltip=F,r.default=U},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var d,h=this.iterator();d=h();)if(d===l)return!0;return!1},o.prototype.insertBefore=function(l,d){l&&(l.next=d,d!=null?(l.prev=d.prev,d.prev!=null&&(d.prev.next=l),d.prev=l,d===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var d=0,h=this.head;h!=null;){if(h===l)return d;d+=h.length(),h=h.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var d=l;return l!=null&&(l=l.next),d}},o.prototype.find=function(l,d){d===void 0&&(d=!1);for(var h,f=this.iterator();h=f();){var u=h.length();if(l<u||d&&l===u&&(h.next==null||h.next.length()!==0))return[h,l];l-=u}return[null,0]},o.prototype.forEach=function(l){for(var d,h=this.iterator();d=h();)l(d)},o.prototype.forEachAt=function(l,d,h){if(!(d<=0))for(var f=this.find(l),u=f[0],m=f[1],p,w=l-m,v=this.iterator(u);(p=v())&&w<l+d;){var x=p.length();l>w?h(p,l-w,Math.min(d,w+x-l)):h(p,0,Math.min(x,l+d-w)),w+=x}},o.prototype.map=function(l){return this.reduce(function(d,h){return d.push(l(h)),d},[])},o.prototype.reduce=function(l,d){for(var h,f=this.iterator();h=f();)d=l(d,h);return d},o}();r.default=i},function(n,r,a){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var w in p)p.hasOwnProperty(w)&&(m[w]=p[w])};return function(m,p){u(m,p);function w(){this.constructor=m}m.prototype=p===null?Object.create(p):(w.prototype=p.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(17),l=a(1),d={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},h=100,f=function(u){i(m,u);function m(p){var w=u.call(this,p)||this;return w.scroll=w,w.observer=new MutationObserver(function(v){w.update(v)}),w.observer.observe(w.domNode,d),w.attach(),w}return m.prototype.detach=function(){u.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(p,w){this.update(),p===0&&w===this.length()?this.children.forEach(function(v){v.remove()}):u.prototype.deleteAt.call(this,p,w)},m.prototype.formatAt=function(p,w,v,x){this.update(),u.prototype.formatAt.call(this,p,w,v,x)},m.prototype.insertAt=function(p,w,v){this.update(),u.prototype.insertAt.call(this,p,w,v)},m.prototype.optimize=function(p,w){var v=this;p===void 0&&(p=[]),w===void 0&&(w={}),u.prototype.optimize.call(this,w);for(var x=[].slice.call(this.observer.takeRecords());x.length>0;)p.push(x.pop());for(var y=function(S,P){P===void 0&&(P=!0),!(S==null||S===v)&&S.domNode.parentNode!=null&&(S.domNode[l.DATA_KEY].mutations==null&&(S.domNode[l.DATA_KEY].mutations=[]),P&&y(S.parent))},b=function(S){S.domNode[l.DATA_KEY]==null||S.domNode[l.DATA_KEY].mutations==null||(S instanceof o.default&&S.children.forEach(b),S.optimize(w))},j=p,N=0;j.length>0;N+=1){if(N>=h)throw new Error("[Parchment] Maximum optimize iterations reached");for(j.forEach(function(S){var P=l.find(S.target,!0);P!=null&&(P.domNode===S.target&&(S.type==="childList"?(y(l.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(T){var E=l.find(T,!1);y(E,!1),E instanceof o.default&&E.children.forEach(function(I){y(I,!1)})})):S.type==="attributes"&&y(P.prev)),y(P))}),this.children.forEach(b),j=[].slice.call(this.observer.takeRecords()),x=j.slice();x.length>0;)p.push(x.pop())}},m.prototype.update=function(p,w){var v=this;w===void 0&&(w={}),p=p||this.observer.takeRecords(),p.map(function(x){var y=l.find(x.target,!0);return y==null?null:y.domNode[l.DATA_KEY].mutations==null?(y.domNode[l.DATA_KEY].mutations=[x],y):(y.domNode[l.DATA_KEY].mutations.push(x),null)}).forEach(function(x){x==null||x===v||x.domNode[l.DATA_KEY]==null||x.update(x.domNode[l.DATA_KEY].mutations||[],w)}),this.domNode[l.DATA_KEY].mutations!=null&&u.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,w),this.optimize(p,w)},m.blotName="scroll",m.defaultChild="block",m.scope=l.Scope.BLOCK_BLOT,m.tagName="DIV",m}(o.default);r.default=f},function(n,r,a){var i=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var p in m)m.hasOwnProperty(p)&&(u[p]=m[p])};return function(u,m){f(u,m);function p(){this.constructor=u}u.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(18),l=a(1);function d(f,u){if(Object.keys(f).length!==Object.keys(u).length)return!1;for(var m in f)if(f[m]!==u[m])return!1;return!0}var h=function(f){i(u,f);function u(){return f!==null&&f.apply(this,arguments)||this}return u.formats=function(m){if(m.tagName!==u.tagName)return f.formats.call(this,m)},u.prototype.format=function(m,p){var w=this;m===this.statics.blotName&&!p?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(u.blotName,!0)),w.attributes.copy(v)}),this.unwrap()):f.prototype.format.call(this,m,p)},u.prototype.formatAt=function(m,p,w,v){if(this.formats()[w]!=null||l.query(w,l.Scope.ATTRIBUTE)){var x=this.isolate(m,p);x.format(w,v)}else f.prototype.formatAt.call(this,m,p,w,v)},u.prototype.optimize=function(m){f.prototype.optimize.call(this,m);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var w=this.next;w instanceof u&&w.prev===this&&d(p,w.formats())&&(w.moveChildren(this),w.remove())},u.blotName="inline",u.scope=l.Scope.INLINE_BLOT,u.tagName="SPAN",u}(o.default);r.default=h},function(n,r,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var m in u)u.hasOwnProperty(m)&&(f[m]=u[m])};return function(f,u){h(f,u);function m(){this.constructor=f}f.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(18),l=a(1),d=function(h){i(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.formats=function(u){var m=l.query(f.blotName).tagName;if(u.tagName!==m)return h.formats.call(this,u)},f.prototype.format=function(u,m){l.query(u,l.Scope.BLOCK)!=null&&(u===this.statics.blotName&&!m?this.replaceWith(f.blotName):h.prototype.format.call(this,u,m))},f.prototype.formatAt=function(u,m,p,w){l.query(p,l.Scope.BLOCK)!=null?this.format(p,w):h.prototype.formatAt.call(this,u,m,p,w)},f.prototype.insertAt=function(u,m,p){if(p==null||l.query(m,l.Scope.INLINE)!=null)h.prototype.insertAt.call(this,u,m,p);else{var w=this.split(u),v=l.create(m,p);w.parent.insertBefore(v,w)}},f.prototype.update=function(u,m){navigator.userAgent.match(/Trident/)?this.build():h.prototype.update.call(this,u,m)},f.blotName="block",f.scope=l.Scope.BLOCK_BLOT,f.tagName="P",f}(o.default);r.default=d},function(n,r,a){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var u in f)f.hasOwnProperty(u)&&(h[u]=f[u])};return function(h,f){d(h,f);function u(){this.constructor=h}h.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(19),l=function(d){i(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.formats=function(f){},h.prototype.format=function(f,u){d.prototype.formatAt.call(this,0,this.length(),f,u)},h.prototype.formatAt=function(f,u,m,p){f===0&&u===this.length()?this.format(m,p):d.prototype.formatAt.call(this,f,u,m,p)},h.prototype.formats=function(){return this.statics.formats(this.domNode)},h}(o.default);r.default=l},function(n,r,a){var i=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var m in u)u.hasOwnProperty(m)&&(f[m]=u[m])};return function(f,u){h(f,u);function m(){this.constructor=f}f.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=a(19),l=a(1),d=function(h){i(f,h);function f(u){var m=h.call(this,u)||this;return m.text=m.statics.value(m.domNode),m}return f.create=function(u){return document.createTextNode(u)},f.value=function(u){var m=u.data;return m.normalize&&(m=m.normalize()),m},f.prototype.deleteAt=function(u,m){this.domNode.data=this.text=this.text.slice(0,u)+this.text.slice(u+m)},f.prototype.index=function(u,m){return this.domNode===u?m:-1},f.prototype.insertAt=function(u,m,p){p==null?(this.text=this.text.slice(0,u)+m+this.text.slice(u),this.domNode.data=this.text):h.prototype.insertAt.call(this,u,m,p)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(u){h.prototype.optimize.call(this,u),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(u,m){return[this.domNode,u]},f.prototype.split=function(u,m){if(m===void 0&&(m=!1),!m){if(u===0)return this;if(u===this.length())return this.next}var p=l.create(this.domNode.splitText(u));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},f.prototype.update=function(u,m){var p=this;u.some(function(w){return w.type==="characterData"&&w.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=l.Scope.INLINE_BLOT,f}(o.default);r.default=d},function(n,r,a){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,d){return arguments.length>1&&!this.contains(l)==!d?d:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,d){return d=d||0,this.substr(d,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,d){var h=this.toString();(typeof d!="number"||!isFinite(d)||Math.floor(d)!==d||d>h.length)&&(d=h.length),d-=l.length;var f=h.indexOf(l,d);return f!==-1&&f===d}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("predicate must be a function");for(var h=Object(this),f=h.length>>>0,u=arguments[1],m,p=0;p<f;p++)if(m=h[p],d.call(u,m,p,h))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var a=-1,i=1,o=0;function l(N,S,P){if(N==S)return N?[[o,N]]:[];(P<0||N.length<P)&&(P=null);var T=u(N,S),E=N.substring(0,T);N=N.substring(T),S=S.substring(T),T=m(N,S);var I=N.substring(N.length-T);N=N.substring(0,N.length-T),S=S.substring(0,S.length-T);var O=d(N,S);return E&&O.unshift([o,E]),I&&O.push([o,I]),w(O),P!=null&&(O=y(O,P)),O=b(O),O}function d(N,S){var P;if(!N)return[[i,S]];if(!S)return[[a,N]];var T=N.length>S.length?N:S,E=N.length>S.length?S:N,I=T.indexOf(E);if(I!=-1)return P=[[i,T.substring(0,I)],[o,E],[i,T.substring(I+E.length)]],N.length>S.length&&(P[0][0]=P[2][0]=a),P;if(E.length==1)return[[a,N],[i,S]];var O=p(N,S);if(O){var R=O[0],C=O[1],D=O[2],A=O[3],M=O[4],Z=l(R,D),X=l(C,A);return Z.concat([[o,M]],X)}return h(N,S)}function h(N,S){for(var P=N.length,T=S.length,E=Math.ceil((P+T)/2),I=E,O=2*E,R=new Array(O),C=new Array(O),D=0;D<O;D++)R[D]=-1,C[D]=-1;R[I+1]=0,C[I+1]=0;for(var A=P-T,M=A%2!=0,Z=0,X=0,U=0,F=0,B=0;B<E;B++){for(var z=-B+Z;z<=B-X;z+=2){var H=I+z,q;z==-B||z!=B&&R[H-1]<R[H+1]?q=R[H+1]:q=R[H-1]+1;for(var W=q-z;q<P&&W<T&&N.charAt(q)==S.charAt(W);)q++,W++;if(R[H]=q,q>P)X+=2;else if(W>T)Z+=2;else if(M){var Y=I+A-z;if(Y>=0&&Y<O&&C[Y]!=-1){var V=P-C[Y];if(q>=V)return f(N,S,q,W)}}}for(var G=-B+U;G<=B-F;G+=2){var Y=I+G,V;G==-B||G!=B&&C[Y-1]<C[Y+1]?V=C[Y+1]:V=C[Y-1]+1;for(var ie=V-G;V<P&&ie<T&&N.charAt(P-V-1)==S.charAt(T-ie-1);)V++,ie++;if(C[Y]=V,V>P)F+=2;else if(ie>T)U+=2;else if(!M){var H=I+A-G;if(H>=0&&H<O&&R[H]!=-1){var q=R[H],W=I+q-H;if(V=P-V,q>=V)return f(N,S,q,W)}}}}return[[a,N],[i,S]]}function f(N,S,P,T){var E=N.substring(0,P),I=S.substring(0,T),O=N.substring(P),R=S.substring(T),C=l(E,I),D=l(O,R);return C.concat(D)}function u(N,S){if(!N||!S||N.charAt(0)!=S.charAt(0))return 0;for(var P=0,T=Math.min(N.length,S.length),E=T,I=0;P<E;)N.substring(I,E)==S.substring(I,E)?(P=E,I=P):T=E,E=Math.floor((T-P)/2+P);return E}function m(N,S){if(!N||!S||N.charAt(N.length-1)!=S.charAt(S.length-1))return 0;for(var P=0,T=Math.min(N.length,S.length),E=T,I=0;P<E;)N.substring(N.length-E,N.length-I)==S.substring(S.length-E,S.length-I)?(P=E,I=P):T=E,E=Math.floor((T-P)/2+P);return E}function p(N,S){var P=N.length>S.length?N:S,T=N.length>S.length?S:N;if(P.length<4||T.length*2<P.length)return null;function E(X,U,F){for(var B=X.substring(F,F+Math.floor(X.length/4)),z=-1,H="",q,W,Y,V;(z=U.indexOf(B,z+1))!=-1;){var G=u(X.substring(F),U.substring(z)),ie=m(X.substring(0,F),U.substring(0,z));H.length<ie+G&&(H=U.substring(z-ie,z)+U.substring(z,z+G),q=X.substring(0,F-ie),W=X.substring(F+G),Y=U.substring(0,z-ie),V=U.substring(z+G))}return H.length*2>=X.length?[q,W,Y,V,H]:null}var I=E(P,T,Math.ceil(P.length/4)),O=E(P,T,Math.ceil(P.length/2)),R;if(!I&&!O)return null;O?I?R=I[4].length>O[4].length?I:O:R=O:R=I;var C,D,A,M;N.length>S.length?(C=R[0],D=R[1],A=R[2],M=R[3]):(A=R[0],M=R[1],C=R[2],D=R[3]);var Z=R[4];return[C,D,A,M,Z]}function w(N){N.push([o,""]);for(var S=0,P=0,T=0,E="",I="",O;S<N.length;)switch(N[S][0]){case i:T++,I+=N[S][1],S++;break;case a:P++,E+=N[S][1],S++;break;case o:P+T>1?(P!==0&&T!==0&&(O=u(I,E),O!==0&&(S-P-T>0&&N[S-P-T-1][0]==o?N[S-P-T-1][1]+=I.substring(0,O):(N.splice(0,0,[o,I.substring(0,O)]),S++),I=I.substring(O),E=E.substring(O)),O=m(I,E),O!==0&&(N[S][1]=I.substring(I.length-O)+N[S][1],I=I.substring(0,I.length-O),E=E.substring(0,E.length-O))),P===0?N.splice(S-T,P+T,[i,I]):T===0?N.splice(S-P,P+T,[a,E]):N.splice(S-P-T,P+T,[a,E],[i,I]),S=S-P-T+(P?1:0)+(T?1:0)+1):S!==0&&N[S-1][0]==o?(N[S-1][1]+=N[S][1],N.splice(S,1)):S++,T=0,P=0,E="",I="";break}N[N.length-1][1]===""&&N.pop();var R=!1;for(S=1;S<N.length-1;)N[S-1][0]==o&&N[S+1][0]==o&&(N[S][1].substring(N[S][1].length-N[S-1][1].length)==N[S-1][1]?(N[S][1]=N[S-1][1]+N[S][1].substring(0,N[S][1].length-N[S-1][1].length),N[S+1][1]=N[S-1][1]+N[S+1][1],N.splice(S-1,1),R=!0):N[S][1].substring(0,N[S+1][1].length)==N[S+1][1]&&(N[S-1][1]+=N[S+1][1],N[S][1]=N[S][1].substring(N[S+1][1].length)+N[S+1][1],N.splice(S+1,1),R=!0)),S++;R&&w(N)}var v=l;v.INSERT=i,v.DELETE=a,v.EQUAL=o,n.exports=v;function x(N,S){if(S===0)return[o,N];for(var P=0,T=0;T<N.length;T++){var E=N[T];if(E[0]===a||E[0]===o){var I=P+E[1].length;if(S===I)return[T+1,N];if(S<I){N=N.slice();var O=S-P,R=[E[0],E[1].slice(0,O)],C=[E[0],E[1].slice(O)];return N.splice(T,1,R,C),[T+1,N]}else P=I}}throw new Error("cursor_pos is out of bounds!")}function y(N,S){var P=x(N,S),T=P[1],E=P[0],I=T[E],O=T[E+1];if(I==null)return N;if(I[0]!==o)return N;if(O!=null&&I[1]+O[1]===O[1]+I[1])return T.splice(E,2,O,I),j(T,E,2);if(O!=null&&O[1].indexOf(I[1])===0){T.splice(E,2,[O[0],I[1]],[0,I[1]]);var R=O[1].slice(I[1].length);return R.length>0&&T.splice(E+2,0,[O[0],R]),j(T,E,3)}else return N}function b(N){for(var S=!1,P=function(O){return O.charCodeAt(0)>=56320&&O.charCodeAt(0)<=57343},T=function(O){return O.charCodeAt(O.length-1)>=55296&&O.charCodeAt(O.length-1)<=56319},E=2;E<N.length;E+=1)N[E-2][0]===o&&T(N[E-2][1])&&N[E-1][0]===a&&P(N[E-1][1])&&N[E][0]===i&&P(N[E][1])&&(S=!0,N[E-1][1]=N[E-2][1].slice(-1)+N[E-1][1],N[E][1]=N[E-2][1].slice(-1)+N[E][1],N[E-2][1]=N[E-2][1].slice(0,-1));if(!S)return N;for(var I=[],E=0;E<N.length;E+=1)N[E][1].length>0&&I.push(N[E]);return I}function j(N,S,P){for(var T=S+P-1;T>=0&&T>=S-1;T--)if(T+1<N.length){var E=N[T],I=N[T+1];E[0]===I[1]&&N.splice(T,2,[E[0],E[1]+I[1]])}return N}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:a,r.shim=a;function a(i){var o=[];for(var l in i)o.push(l);return o}},function(n,r){var a=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=a?i:o,r.supported=i;function i(l){return Object.prototype.toString.call(l)=="[object Arguments]"}r.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(n,r){var a=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function l(h,f,u){this.fn=h,this.context=f,this.once=u||!1}function d(){this._events=new o,this._eventsCount=0}d.prototype.eventNames=function(){var f=[],u,m;if(this._eventsCount===0)return f;for(m in u=this._events)a.call(u,m)&&f.push(i?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(u)):f},d.prototype.listeners=function(f,u){var m=i?i+f:f,p=this._events[m];if(u)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var w=0,v=p.length,x=new Array(v);w<v;w++)x[w]=p[w].fn;return x},d.prototype.emit=function(f,u,m,p,w,v){var x=i?i+f:f;if(!this._events[x])return!1;var y=this._events[x],b=arguments.length,j,N;if(y.fn){switch(y.once&&this.removeListener(f,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,m),!0;case 4:return y.fn.call(y.context,u,m,p),!0;case 5:return y.fn.call(y.context,u,m,p,w),!0;case 6:return y.fn.call(y.context,u,m,p,w,v),!0}for(N=1,j=new Array(b-1);N<b;N++)j[N-1]=arguments[N];y.fn.apply(y.context,j)}else{var S=y.length,P;for(N=0;N<S;N++)switch(y[N].once&&this.removeListener(f,y[N].fn,void 0,!0),b){case 1:y[N].fn.call(y[N].context);break;case 2:y[N].fn.call(y[N].context,u);break;case 3:y[N].fn.call(y[N].context,u,m);break;case 4:y[N].fn.call(y[N].context,u,m,p);break;default:if(!j)for(P=1,j=new Array(b-1);P<b;P++)j[P-1]=arguments[P];y[N].fn.apply(y[N].context,j)}}return!0},d.prototype.on=function(f,u,m){var p=new l(u,m||this),w=i?i+f:f;return this._events[w]?this._events[w].fn?this._events[w]=[this._events[w],p]:this._events[w].push(p):(this._events[w]=p,this._eventsCount++),this},d.prototype.once=function(f,u,m){var p=new l(u,m||this,!0),w=i?i+f:f;return this._events[w]?this._events[w].fn?this._events[w]=[this._events[w],p]:this._events[w].push(p):(this._events[w]=p,this._eventsCount++),this},d.prototype.removeListener=function(f,u,m,p){var w=i?i+f:f;if(!this._events[w])return this;if(!u)return--this._eventsCount===0?this._events=new o:delete this._events[w],this;var v=this._events[w];if(v.fn)v.fn===u&&(!p||v.once)&&(!m||v.context===m)&&(--this._eventsCount===0?this._events=new o:delete this._events[w]);else{for(var x=0,y=[],b=v.length;x<b;x++)(v[x].fn!==u||p&&!v[x].once||m&&v[x].context!==m)&&y.push(v[x]);y.length?this._events[w]=y.length===1?y[0]:y:--this._eventsCount===0?this._events=new o:delete this._events[w]}return this},d.prototype.removeAllListeners=function(f){var u;return f?(u=i?i+f:f,this._events[u]&&(--this._eventsCount===0?this._events=new o:delete this._events[u])):(this._events=new o,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prototype.setMaxListeners=function(){return this},d.prefixed=i,d.EventEmitter=d,typeof n<"u"&&(n.exports=d)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},o=function(){function oe(de,Q){var ae=[],ue=!0,re=!1,ce=void 0;try{for(var fe=de[Symbol.iterator](),ge;!(ue=(ge=fe.next()).done)&&(ae.push(ge.value),!(Q&&ae.length===Q));ue=!0);}catch(me){re=!0,ce=me}finally{try{!ue&&fe.return&&fe.return()}finally{if(re)throw ce}}return ae}return function(de,Q){if(Array.isArray(de))return de;if(Symbol.iterator in Object(de))return oe(de,Q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function oe(de,Q){for(var ae=0;ae<Q.length;ae++){var ue=Q[ae];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(de,ue.key,ue)}}return function(de,Q,ae){return Q&&oe(de.prototype,Q),ae&&oe(de,ae),de}}(),d=a(3),h=C(d),f=a(2),u=C(f),m=a(0),p=C(m),w=a(5),v=C(w),x=a(10),y=C(x),b=a(9),j=C(b),N=a(36),S=a(37),P=a(13),T=C(P),E=a(26),I=a(38),O=a(39),R=a(40);function C(oe){return oe&&oe.__esModule?oe:{default:oe}}function D(oe,de,Q){return de in oe?Object.defineProperty(oe,de,{value:Q,enumerable:!0,configurable:!0,writable:!0}):oe[de]=Q,oe}function A(oe,de){if(!(oe instanceof de))throw new TypeError("Cannot call a class as a function")}function M(oe,de){if(!oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de&&(typeof de=="object"||typeof de=="function")?de:oe}function Z(oe,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof de);oe.prototype=Object.create(de&&de.prototype,{constructor:{value:oe,enumerable:!1,writable:!0,configurable:!0}}),de&&(Object.setPrototypeOf?Object.setPrototypeOf(oe,de):oe.__proto__=de)}var X=(0,y.default)("quill:clipboard"),U="__ql-matcher",F=[[Node.TEXT_NODE,ve],[Node.TEXT_NODE,_e],["br",ye],[Node.ELEMENT_NODE,_e],[Node.ELEMENT_NODE,le],[Node.ELEMENT_NODE,ne],[Node.ELEMENT_NODE,J],[Node.ELEMENT_NODE,Ce],["li",Ne],["b",ie.bind(ie,"bold")],["i",ie.bind(ie,"italic")],["style",ke]],B=[N.AlignAttribute,I.DirectionAttribute].reduce(function(oe,de){return oe[de.keyName]=de,oe},{}),z=[N.AlignStyle,S.BackgroundStyle,E.ColorStyle,I.DirectionStyle,O.FontStyle,R.SizeStyle].reduce(function(oe,de){return oe[de.keyName]=de,oe},{}),H=function(oe){Z(de,oe);function de(Q,ae){A(this,de);var ue=M(this,(de.__proto__||Object.getPrototypeOf(de)).call(this,Q,ae));return ue.quill.root.addEventListener("paste",ue.onPaste.bind(ue)),ue.container=ue.quill.addContainer("ql-clipboard"),ue.container.setAttribute("contenteditable",!0),ue.container.setAttribute("tabindex",-1),ue.matchers=[],F.concat(ue.options.matchers).forEach(function(re){var ce=o(re,2),fe=ce[0],ge=ce[1];!ae.matchVisual&&ge===ne||ue.addMatcher(fe,ge)}),ue}return l(de,[{key:"addMatcher",value:function(ae,ue){this.matchers.push([ae,ue])}},{key:"convert",value:function(ae){if(typeof ae=="string")return this.container.innerHTML=ae.replace(/\>\r?\n +\</g,"><"),this.convert();var ue=this.quill.getFormat(this.quill.selection.savedRange.index);if(ue[T.default.blotName]){var re=this.container.innerText;return this.container.innerHTML="",new u.default().insert(re,D({},T.default.blotName,ue[T.default.blotName]))}var ce=this.prepareMatching(),fe=o(ce,2),ge=fe[0],me=fe[1],be=G(this.container,ge,me);return Y(be,`
`)&&be.ops[be.ops.length-1].attributes==null&&(be=be.compose(new u.default().retain(be.length()-1).delete(1))),X.log("convert",this.container.innerHTML,be),this.container.innerHTML="",be}},{key:"dangerouslyPasteHTML",value:function(ae,ue){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ae=="string")this.quill.setContents(this.convert(ae),ue),this.quill.setSelection(0,v.default.sources.SILENT);else{var ce=this.convert(ue);this.quill.updateContents(new u.default().retain(ae).concat(ce),re),this.quill.setSelection(ae+ce.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ae){var ue=this;if(!(ae.defaultPrevented||!this.quill.isEnabled())){var re=this.quill.getSelection(),ce=new u.default().retain(re.index),fe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){ce=ce.concat(ue.convert()).delete(re.length),ue.quill.updateContents(ce,v.default.sources.USER),ue.quill.setSelection(ce.length()-re.length,v.default.sources.SILENT),ue.quill.scrollingContainer.scrollTop=fe,ue.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ae=this,ue=[],re=[];return this.matchers.forEach(function(ce){var fe=o(ce,2),ge=fe[0],me=fe[1];switch(ge){case Node.TEXT_NODE:re.push(me);break;case Node.ELEMENT_NODE:ue.push(me);break;default:[].forEach.call(ae.container.querySelectorAll(ge),function(be){be[U]=be[U]||[],be[U].push(me)});break}}),[ue,re]}}]),de}(j.default);H.DEFAULTS={matchers:[],matchVisual:!0};function q(oe,de,Q){return(typeof de>"u"?"undefined":i(de))==="object"?Object.keys(de).reduce(function(ae,ue){return q(ae,ue,de[ue])},oe):oe.reduce(function(ae,ue){return ue.attributes&&ue.attributes[de]?ae.push(ue):ae.insert(ue.insert,(0,h.default)({},D({},de,Q),ue.attributes))},new u.default)}function W(oe){if(oe.nodeType!==Node.ELEMENT_NODE)return{};var de="__ql-computed-style";return oe[de]||(oe[de]=window.getComputedStyle(oe))}function Y(oe,de){for(var Q="",ae=oe.ops.length-1;ae>=0&&Q.length<de.length;--ae){var ue=oe.ops[ae];if(typeof ue.insert!="string")break;Q=ue.insert+Q}return Q.slice(-1*de.length)===de}function V(oe){if(oe.childNodes.length===0)return!1;var de=W(oe);return["block","list-item"].indexOf(de.display)>-1}function G(oe,de,Q){return oe.nodeType===oe.TEXT_NODE?Q.reduce(function(ae,ue){return ue(oe,ae)},new u.default):oe.nodeType===oe.ELEMENT_NODE?[].reduce.call(oe.childNodes||[],function(ae,ue){var re=G(ue,de,Q);return ue.nodeType===oe.ELEMENT_NODE&&(re=de.reduce(function(ce,fe){return fe(ue,ce)},re),re=(ue[U]||[]).reduce(function(ce,fe){return fe(ue,ce)},re)),ae.concat(re)},new u.default):new u.default}function ie(oe,de,Q){return q(Q,oe,!0)}function J(oe,de){var Q=p.default.Attributor.Attribute.keys(oe),ae=p.default.Attributor.Class.keys(oe),ue=p.default.Attributor.Style.keys(oe),re={};return Q.concat(ae).concat(ue).forEach(function(ce){var fe=p.default.query(ce,p.default.Scope.ATTRIBUTE);fe!=null&&(re[fe.attrName]=fe.value(oe),re[fe.attrName])||(fe=B[ce],fe!=null&&(fe.attrName===ce||fe.keyName===ce)&&(re[fe.attrName]=fe.value(oe)||void 0),fe=z[ce],fe!=null&&(fe.attrName===ce||fe.keyName===ce)&&(fe=z[ce],re[fe.attrName]=fe.value(oe)||void 0))}),Object.keys(re).length>0&&(de=q(de,re)),de}function le(oe,de){var Q=p.default.query(oe);if(Q==null)return de;if(Q.prototype instanceof p.default.Embed){var ae={},ue=Q.value(oe);ue!=null&&(ae[Q.blotName]=ue,de=new u.default().insert(ae,Q.formats(oe)))}else typeof Q.formats=="function"&&(de=q(de,Q.blotName,Q.formats(oe)));return de}function ye(oe,de){return Y(de,`
`)||de.insert(`
`),de}function ke(){return new u.default}function Ne(oe,de){var Q=p.default.query(oe);if(Q==null||Q.blotName!=="list-item"||!Y(de,`
`))return de;for(var ae=-1,ue=oe.parentNode;!ue.classList.contains("ql-clipboard");)(p.default.query(ue)||{}).blotName==="list"&&(ae+=1),ue=ue.parentNode;return ae<=0?de:de.compose(new u.default().retain(de.length()-1).retain(1,{indent:ae}))}function _e(oe,de){return Y(de,`
`)||(V(oe)||de.length()>0&&oe.nextSibling&&V(oe.nextSibling))&&de.insert(`
`),de}function ne(oe,de){if(V(oe)&&oe.nextElementSibling!=null&&!Y(de,`

`)){var Q=oe.offsetHeight+parseFloat(W(oe).marginTop)+parseFloat(W(oe).marginBottom);oe.nextElementSibling.offsetTop>oe.offsetTop+Q*1.5&&de.insert(`
`)}return de}function Ce(oe,de){var Q={},ae=oe.style||{};return ae.fontStyle&&W(oe).fontStyle==="italic"&&(Q.italic=!0),ae.fontWeight&&(W(oe).fontWeight.startsWith("bold")||parseInt(W(oe).fontWeight)>=700)&&(Q.bold=!0),Object.keys(Q).length>0&&(de=q(de,Q)),parseFloat(ae.textIndent||0)>0&&(de=new u.default().insert("	").concat(de)),de}function ve(oe,de){var Q=oe.data;if(oe.parentNode.tagName==="O:P")return de.insert(Q.trim());if(Q.trim().length===0&&oe.parentNode.classList.contains("ql-clipboard"))return de;if(!W(oe.parentNode).whiteSpace.startsWith("pre")){var ae=function(re,ce){return ce=ce.replace(/[^\u00a0]/g,""),ce.length<1&&re?" ":ce};Q=Q.replace(/\r\n/g," ").replace(/\n/g," "),Q=Q.replace(/\s\s+/g,ae.bind(ae,!0)),(oe.previousSibling==null&&V(oe.parentNode)||oe.previousSibling!=null&&V(oe.previousSibling))&&(Q=Q.replace(/^\s+/,ae.bind(ae,!1))),(oe.nextSibling==null&&V(oe.parentNode)||oe.nextSibling!=null&&V(oe.nextSibling))&&(Q=Q.replace(/\s+$/,ae.bind(ae,!1)))}return de.insert(Q)}r.default=H,r.matchAttributor=J,r.matchBlot=le,r.matchNewline=_e,r.matchSpacing=ne,r.matchText=ve},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function w(v,x){for(var y=0;y<x.length;y++){var b=x[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,x,y){return x&&w(v.prototype,x),y&&w(v,y),v}}(),o=function w(v,x,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,x);if(b===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:w(j,x,y)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(y)}},l=a(6),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function u(w,v){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:w}function m(w,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v)}var p=function(w){m(v,w);function v(){return f(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"optimize",value:function(y){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,y),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v}(d.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var i=function(){function R(C,D){var A=[],M=!0,Z=!1,X=void 0;try{for(var U=C[Symbol.iterator](),F;!(M=(F=U.next()).done)&&(A.push(F.value),!(D&&A.length===D));M=!0);}catch(B){Z=!0,X=B}finally{try{!M&&U.return&&U.return()}finally{if(Z)throw X}}return A}return function(C,D){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return R(C,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function R(C,D){for(var A=0;A<D.length;A++){var M=D[A];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(C,M.key,M)}}return function(C,D,A){return D&&R(C.prototype,D),A&&R(C,A),C}}(),l=a(2),d=y(l),h=a(0),f=y(h),u=a(5),m=y(u),p=a(10),w=y(p),v=a(9),x=y(v);function y(R){return R&&R.__esModule?R:{default:R}}function b(R,C,D){return C in R?Object.defineProperty(R,C,{value:D,enumerable:!0,configurable:!0,writable:!0}):R[C]=D,R}function j(R,C){if(!(R instanceof C))throw new TypeError("Cannot call a class as a function")}function N(R,C){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:R}function S(R,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);R.prototype=Object.create(C&&C.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(R,C):R.__proto__=C)}var P=(0,w.default)("quill:toolbar"),T=function(R){S(C,R);function C(D,A){j(this,C);var M=N(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,D,A));if(Array.isArray(M.options.container)){var Z=document.createElement("div");I(Z,M.options.container),D.container.parentNode.insertBefore(Z,D.container),M.container=Z}else typeof M.options.container=="string"?M.container=document.querySelector(M.options.container):M.container=M.options.container;if(!(M.container instanceof HTMLElement)){var X;return X=P.error("Container required for toolbar",M.options),N(M,X)}return M.container.classList.add("ql-toolbar"),M.controls=[],M.handlers={},Object.keys(M.options.handlers).forEach(function(U){M.addHandler(U,M.options.handlers[U])}),[].forEach.call(M.container.querySelectorAll("button, select"),function(U){M.attach(U)}),M.quill.on(m.default.events.EDITOR_CHANGE,function(U,F){U===m.default.events.SELECTION_CHANGE&&M.update(F)}),M.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var U=M.quill.selection.getRange(),F=i(U,1),B=F[0];M.update(B)}),M}return o(C,[{key:"addHandler",value:function(A,M){this.handlers[A]=M}},{key:"attach",value:function(A){var M=this,Z=[].find.call(A.classList,function(U){return U.indexOf("ql-")===0});if(Z){if(Z=Z.slice(3),A.tagName==="BUTTON"&&A.setAttribute("type","button"),this.handlers[Z]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Z]==null){P.warn("ignoring attaching to disabled format",Z,A);return}if(f.default.query(Z)==null){P.warn("ignoring attaching to nonexistent format",Z,A);return}}var X=A.tagName==="SELECT"?"change":"click";A.addEventListener(X,function(U){var F=void 0;if(A.tagName==="SELECT"){if(A.selectedIndex<0)return;var B=A.options[A.selectedIndex];B.hasAttribute("selected")?F=!1:F=B.value||!1}else A.classList.contains("ql-active")?F=!1:F=A.value||!A.hasAttribute("value"),U.preventDefault();M.quill.focus();var z=M.quill.selection.getRange(),H=i(z,1),q=H[0];if(M.handlers[Z]!=null)M.handlers[Z].call(M,F);else if(f.default.query(Z).prototype instanceof f.default.Embed){if(F=prompt("Enter "+Z),!F)return;M.quill.updateContents(new d.default().retain(q.index).delete(q.length).insert(b({},Z,F)),m.default.sources.USER)}else M.quill.format(Z,F,m.default.sources.USER);M.update(q)}),this.controls.push([Z,A])}}},{key:"update",value:function(A){var M=A==null?{}:this.quill.getFormat(A);this.controls.forEach(function(Z){var X=i(Z,2),U=X[0],F=X[1];if(F.tagName==="SELECT"){var B=void 0;if(A==null)B=null;else if(M[U]==null)B=F.querySelector("option[selected]");else if(!Array.isArray(M[U])){var z=M[U];typeof z=="string"&&(z=z.replace(/\"/g,'\\"')),B=F.querySelector('option[value="'+z+'"]')}B==null?(F.value="",F.selectedIndex=-1):B.selected=!0}else if(A==null)F.classList.remove("ql-active");else if(F.hasAttribute("value")){var H=M[U]===F.getAttribute("value")||M[U]!=null&&M[U].toString()===F.getAttribute("value")||M[U]==null&&!F.getAttribute("value");F.classList.toggle("ql-active",H)}else F.classList.toggle("ql-active",M[U]!=null)})}}]),C}(x.default);T.DEFAULTS={};function E(R,C,D){var A=document.createElement("button");A.setAttribute("type","button"),A.classList.add("ql-"+C),D!=null&&(A.value=D),R.appendChild(A)}function I(R,C){Array.isArray(C[0])||(C=[C]),C.forEach(function(D){var A=document.createElement("span");A.classList.add("ql-formats"),D.forEach(function(M){if(typeof M=="string")E(A,M);else{var Z=Object.keys(M)[0],X=M[Z];Array.isArray(X)?O(A,Z,X):E(A,Z,X)}}),R.appendChild(A)})}function O(R,C,D){var A=document.createElement("select");A.classList.add("ql-"+C),D.forEach(function(M){var Z=document.createElement("option");M!==!1?Z.setAttribute("value",M):Z.setAttribute("selected","selected"),A.appendChild(Z)}),R.appendChild(A)}T.DEFAULTS={container:null,handlers:{clean:function(){var C=this,D=this.quill.getSelection();if(D!=null)if(D.length==0){var A=this.quill.getFormat();Object.keys(A).forEach(function(M){f.default.query(M,f.default.Scope.INLINE)!=null&&C.quill.format(M,!1)})}else this.quill.removeFormat(D,m.default.sources.USER)},direction:function(C){var D=this.quill.getFormat().align;C==="rtl"&&D==null?this.quill.format("align","right",m.default.sources.USER):!C&&D==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",C,m.default.sources.USER)},indent:function(C){var D=this.quill.getSelection(),A=this.quill.getFormat(D),M=parseInt(A.indent||0);if(C==="+1"||C==="-1"){var Z=C==="+1"?1:-1;A.direction==="rtl"&&(Z*=-1),this.quill.format("indent",M+Z,m.default.sources.USER)}},link:function(C){C===!0&&(C=prompt("Enter link URL:")),this.quill.format("link",C,m.default.sources.USER)},list:function(C){var D=this.quill.getSelection(),A=this.quill.getFormat(D);C==="check"?A.list==="checked"||A.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",C,m.default.sources.USER)}}},r.default=T,r.addControls=I},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function w(v,x){for(var y=0;y<x.length;y++){var b=x[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,x,y){return x&&w(v.prototype,x),y&&w(v,y),v}}(),o=function w(v,x,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,x);if(b===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:w(j,x,y)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(y)}},l=a(28),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function u(w,v){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:w}function m(w,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v)}var p=function(w){m(v,w);function v(x,y){f(this,v);var b=u(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,x));return b.label.innerHTML=y,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(j){j.classList.add("ql-primary")}),b}return i(v,[{key:"buildItem",value:function(y){var b=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,y);return b.style.backgroundColor=y.getAttribute("value")||"",b}},{key:"selectItem",value:function(y,b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,y,b);var j=this.label.querySelector(".ql-color-label"),N=y&&y.getAttribute("data-value")||"";j&&(j.tagName==="line"?j.style.stroke=N:j.style.fill=N)}}]),v}(d.default);r.default=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function w(v,x){for(var y=0;y<x.length;y++){var b=x[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,x,y){return x&&w(v.prototype,x),y&&w(v,y),v}}(),o=function w(v,x,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,x);if(b===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:w(j,x,y)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(y)}},l=a(28),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function u(w,v){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:w}function m(w,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v)}var p=function(w){m(v,w);function v(x,y){f(this,v);var b=u(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,x));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(j){j.innerHTML=y[j.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return i(v,[{key:"selectItem",value:function(y,b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,y,b),y=y||this.defaultItem,this.label.innerHTML=y.innerHTML}}]),v}(d.default);r.default=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function d(h,f){for(var u=0;u<f.length;u++){var m=f[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(h,m.key,m)}}return function(h,f,u){return f&&d(h.prototype,f),u&&d(h,u),h}}();function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function(){function d(h,f){var u=this;o(this,d),this.quill=h,this.boundsContainer=f||document.body,this.root=h.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){u.root.style.marginTop=-1*u.quill.root.scrollTop+"px"}),this.hide()}return i(d,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var u=f.left+f.width/2-this.root.offsetWidth/2,m=f.bottom+this.quill.root.scrollTop;this.root.style.left=u+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),w=this.root.getBoundingClientRect(),v=0;if(w.right>p.right&&(v=p.right-w.right,this.root.style.left=u+v+"px"),w.left<p.left&&(v=p.left-w.left,this.root.style.left=u+v+"px"),w.bottom>p.bottom){var x=w.bottom-w.top,y=f.bottom-f.top+x;this.root.style.top=m-y+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),d}();r.default=l},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function O(R,C){var D=[],A=!0,M=!1,Z=void 0;try{for(var X=R[Symbol.iterator](),U;!(A=(U=X.next()).done)&&(D.push(U.value),!(C&&D.length===C));A=!0);}catch(F){M=!0,Z=F}finally{try{!A&&X.return&&X.return()}finally{if(M)throw Z}}return D}return function(R,C){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return O(R,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function O(R,C,D){R===null&&(R=Function.prototype);var A=Object.getOwnPropertyDescriptor(R,C);if(A===void 0){var M=Object.getPrototypeOf(R);return M===null?void 0:O(M,C,D)}else{if("value"in A)return A.value;var Z=A.get;return Z===void 0?void 0:Z.call(D)}},l=function(){function O(R,C){for(var D=0;D<C.length;D++){var A=C[D];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,A.key,A)}}return function(R,C,D){return C&&O(R.prototype,C),D&&O(R,D),R}}(),d=a(3),h=j(d),f=a(8),u=j(f),m=a(43),p=j(m),w=a(27),v=j(w),x=a(15),y=a(41),b=j(y);function j(O){return O&&O.__esModule?O:{default:O}}function N(O,R){if(!(O instanceof R))throw new TypeError("Cannot call a class as a function")}function S(O,R){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:O}function P(O,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);O.prototype=Object.create(R&&R.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(O,R):O.__proto__=R)}var T=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],E=function(O){P(R,O);function R(C,D){N(this,R),D.modules.toolbar!=null&&D.modules.toolbar.container==null&&(D.modules.toolbar.container=T);var A=S(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,C,D));return A.quill.container.classList.add("ql-snow"),A}return l(R,[{key:"extendToolbar",value:function(D){D.container.classList.add("ql-snow"),this.buildButtons([].slice.call(D.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(D.container.querySelectorAll("select")),b.default),this.tooltip=new I(this.quill,this.options.bounds),D.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(A,M){D.handlers.link.call(D,!M.format.link)})}}]),R}(p.default);E.DEFAULTS=(0,h.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){if(R){var C=this.quill.getSelection();if(C==null||C.length==0)return;var D=this.quill.getText(C);/^\S+@\S+\.\S+$/.test(D)&&D.indexOf("mailto:")!==0&&(D="mailto:"+D);var A=this.quill.theme.tooltip;A.edit("link",D)}else this.quill.format("link",!1)}}}}});var I=function(O){P(R,O);function R(C,D){N(this,R);var A=S(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,C,D));return A.preview=A.root.querySelector("a.ql-preview"),A}return l(R,[{key:"listen",value:function(){var D=this;o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(A){D.root.classList.contains("ql-editing")?D.save():D.edit("link",D.preview.textContent),A.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(A){if(D.linkRange!=null){var M=D.linkRange;D.restoreFocus(),D.quill.formatText(M,"link",!1,u.default.sources.USER),delete D.linkRange}A.preventDefault(),D.hide()}),this.quill.on(u.default.events.SELECTION_CHANGE,function(A,M,Z){if(A!=null){if(A.length===0&&Z===u.default.sources.USER){var X=D.quill.scroll.descendant(v.default,A.index),U=i(X,2),F=U[0],B=U[1];if(F!=null){D.linkRange=new x.Range(A.index-B,F.length());var z=v.default.formats(F.domNode);D.preview.textContent=z,D.preview.setAttribute("href",z),D.show(),D.position(D.quill.getBounds(D.linkRange));return}}else delete D.linkRange;D.hide()}})}},{key:"show",value:function(){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),R}(m.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=E},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(29),o=ue(i),l=a(36),d=a(38),h=a(64),f=a(65),u=ue(f),m=a(66),p=ue(m),w=a(67),v=ue(w),x=a(37),y=a(26),b=a(39),j=a(40),N=a(56),S=ue(N),P=a(68),T=ue(P),E=a(27),I=ue(E),O=a(69),R=ue(O),C=a(70),D=ue(C),A=a(71),M=ue(A),Z=a(72),X=ue(Z),U=a(73),F=ue(U),B=a(13),z=ue(B),H=a(74),q=ue(H),W=a(75),Y=ue(W),V=a(57),G=ue(V),ie=a(41),J=ue(ie),le=a(28),ye=ue(le),ke=a(59),Ne=ue(ke),_e=a(60),ne=ue(_e),Ce=a(61),ve=ue(Ce),oe=a(108),de=ue(oe),Q=a(62),ae=ue(Q);function ue(re){return re&&re.__esModule?re:{default:re}}o.default.register({"attributors/attribute/direction":d.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":x.BackgroundClass,"attributors/class/color":y.ColorClass,"attributors/class/direction":d.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":j.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":x.BackgroundStyle,"attributors/style/color":y.ColorStyle,"attributors/style/direction":d.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":j.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":d.DirectionClass,"formats/indent":h.IndentClass,"formats/background":x.BackgroundStyle,"formats/color":y.ColorStyle,"formats/font":b.FontClass,"formats/size":j.SizeClass,"formats/blockquote":u.default,"formats/code-block":z.default,"formats/header":p.default,"formats/list":v.default,"formats/bold":S.default,"formats/code":B.Code,"formats/italic":T.default,"formats/link":I.default,"formats/script":R.default,"formats/strike":D.default,"formats/underline":M.default,"formats/image":X.default,"formats/video":F.default,"formats/list/item":w.ListItem,"modules/formula":q.default,"modules/syntax":Y.default,"modules/toolbar":G.default,"themes/bubble":de.default,"themes/snow":ae.default,"ui/icons":J.default,"ui/picker":ye.default,"ui/icon-picker":ne.default,"ui/color-picker":Ne.default,"ui/tooltip":ve.default},!0),r.default=o.default},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var i=function(){function v(x,y){for(var b=0;b<y.length;b++){var j=y[b];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(x,j.key,j)}}return function(x,y,b){return y&&v(x.prototype,y),b&&v(x,b),x}}(),o=function v(x,y,b){x===null&&(x=Function.prototype);var j=Object.getOwnPropertyDescriptor(x,y);if(j===void 0){var N=Object.getPrototypeOf(x);return N===null?void 0:v(N,y,b)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(b)}},l=a(0),d=h(l);function h(v){return v&&v.__esModule?v:{default:v}}function f(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function u(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function m(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var p=function(v){m(x,v);function x(){return f(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,[{key:"add",value:function(b,j){if(j==="+1"||j==="-1"){var N=this.value(b)||0;j=j==="+1"?N+1:N-1}return j===0?(this.remove(b),!0):o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"add",this).call(this,b,j)}},{key:"canAdd",value:function(b,j){return o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"canAdd",this).call(this,b,j)||o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"canAdd",this).call(this,b,parseInt(j))}},{key:"value",value:function(b){return parseInt(o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"value",this).call(this,b))||void 0}}]),x}(d.default.Attributor.Class),w=new p("indent","ql-indent",{scope:d.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=w},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(4),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function d(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function h(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){f(p,m);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="blockquote",u.tagName="blockquote",r.default=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function p(w,v){for(var x=0;x<v.length;x++){var y=v[x];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(w,y.key,y)}}return function(w,v,x){return v&&p(w.prototype,v),x&&p(w,x),w}}(),o=a(4),l=d(o);function d(p){return p&&p.__esModule?p:{default:p}}function h(p,w){if(!(p instanceof w))throw new TypeError("Cannot call a class as a function")}function f(p,w){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:p}function u(p,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);p.prototype=Object.create(w&&w.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(p,w):p.__proto__=w)}var m=function(p){u(w,p);function w(){return h(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,null,[{key:"formats",value:function(x){return this.tagName.indexOf(x.tagName)+1}}]),w}(l.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],r.default=m},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var i=function(){function N(S,P){for(var T=0;T<P.length;T++){var E=P[T];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,E.key,E)}}return function(S,P,T){return P&&N(S.prototype,P),T&&N(S,T),S}}(),o=function N(S,P,T){S===null&&(S=Function.prototype);var E=Object.getOwnPropertyDescriptor(S,P);if(E===void 0){var I=Object.getPrototypeOf(S);return I===null?void 0:N(I,P,T)}else{if("value"in E)return E.value;var O=E.get;return O===void 0?void 0:O.call(T)}},l=a(0),d=p(l),h=a(4),f=p(h),u=a(25),m=p(u);function p(N){return N&&N.__esModule?N:{default:N}}function w(N,S,P){return S in N?Object.defineProperty(N,S,{value:P,enumerable:!0,configurable:!0,writable:!0}):N[S]=P,N}function v(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function x(N,S){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:N}function y(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);N.prototype=Object.create(S&&S.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(N,S):N.__proto__=S)}var b=function(N){y(S,N);function S(){return v(this,S),x(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return i(S,[{key:"format",value:function(T,E){T===j.blotName&&!E?this.replaceWith(d.default.create(this.statics.scope)):o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,T,E)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(T,E){return this.parent.isolate(this.offset(this.parent),this.length()),T===this.parent.statics.blotName?(this.parent.replaceWith(T,E),this):(this.parent.unwrap(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,T,E))}}],[{key:"formats",value:function(T){return T.tagName===this.tagName?void 0:o(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,T)}}]),S}(f.default);b.blotName="list-item",b.tagName="LI";var j=function(N){y(S,N),i(S,null,[{key:"create",value:function(T){var E=T==="ordered"?"OL":"UL",I=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,E);return(T==="checked"||T==="unchecked")&&I.setAttribute("data-checked",T==="checked"),I}},{key:"formats",value:function(T){if(T.tagName==="OL")return"ordered";if(T.tagName==="UL")return T.hasAttribute("data-checked")?T.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(P){v(this,S);var T=x(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P)),E=function(O){if(O.target.parentNode===P){var R=T.statics.formats(P),C=d.default.find(O.target);R==="checked"?C.format("list","unchecked"):R==="unchecked"&&C.format("list","checked")}};return P.addEventListener("touchstart",E),P.addEventListener("mousedown",E),T}return i(S,[{key:"format",value:function(T,E){this.children.length>0&&this.children.tail.format(T,E)}},{key:"formats",value:function(){return w({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(T,E){if(T instanceof b)o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,T,E);else{var I=E==null?this.length():E.offset(this),O=this.split(I);O.parent.insertBefore(T,O)}}},{key:"optimize",value:function(T){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,T);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&E.domNode.tagName===this.domNode.tagName&&E.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(E.moveChildren(this),E.remove())}},{key:"replace",value:function(T){if(T.statics.blotName!==this.statics.blotName){var E=d.default.create(this.statics.defaultChild);T.moveChildren(E),this.appendChild(E)}o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,T)}}]),S}(m.default);j.blotName="list",j.scope=d.default.Scope.BLOCK_BLOT,j.tagName=["OL","UL"],j.defaultChild="list-item",j.allowedChildren=[b],r.ListItem=b,r.default=j},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(56),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function d(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function h(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){f(p,m);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="italic",u.tagName=["EM","I"],r.default=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function w(v,x){for(var y=0;y<x.length;y++){var b=x[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,x,y){return x&&w(v.prototype,x),y&&w(v,y),v}}(),o=function w(v,x,y){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,x);if(b===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:w(j,x,y)}else{if("value"in b)return b.value;var N=b.get;return N===void 0?void 0:N.call(y)}},l=a(6),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function u(w,v){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:w}function m(w,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v)}var p=function(w){m(v,w);function v(){return f(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,null,[{key:"create",value:function(y){return y==="super"?document.createElement("sup"):y==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,y)}},{key:"formats",value:function(y){if(y.tagName==="SUB")return"sub";if(y.tagName==="SUP")return"super"}}]),v}(d.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function d(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function h(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){f(p,m);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="strike",u.tagName="S",r.default=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function d(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function h(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){f(p,m);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="underline",u.tagName="U",r.default=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function x(y,b){for(var j=0;j<b.length;j++){var N=b[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,b,j){return b&&x(y.prototype,b),j&&x(y,j),y}}(),o=function x(y,b,j){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,b);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:x(S,b,j)}else{if("value"in N)return N.value;var P=N.get;return P===void 0?void 0:P.call(j)}},l=a(0),d=f(l),h=a(27);function f(x){return x&&x.__esModule?x:{default:x}}function u(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function m(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function p(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var w=["alt","height","width"],v=function(x){p(y,x);function y(){return u(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"format",value:function(j,N){w.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,j);return typeof j=="string"&&N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return w.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"match",value:function(j){return/\.(jpe?g|gif|png)$/.test(j)||/^data:image\/.+;base64/.test(j)}},{key:"sanitize",value:function(j){return(0,h.sanitize)(j,["http","https","data"])?j:"//:0"}},{key:"value",value:function(j){return j.getAttribute("src")}}]),y}(d.default.Embed);v.blotName="image",v.tagName="IMG",r.default=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function x(y,b){for(var j=0;j<b.length;j++){var N=b[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(y,N.key,N)}}return function(y,b,j){return b&&x(y.prototype,b),j&&x(y,j),y}}(),o=function x(y,b,j){y===null&&(y=Function.prototype);var N=Object.getOwnPropertyDescriptor(y,b);if(N===void 0){var S=Object.getPrototypeOf(y);return S===null?void 0:x(S,b,j)}else{if("value"in N)return N.value;var P=N.get;return P===void 0?void 0:P.call(j)}},l=a(4),d=a(27),h=f(d);function f(x){return x&&x.__esModule?x:{default:x}}function u(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function m(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function p(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var w=["height","width"],v=function(x){p(y,x);function y(){return u(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"format",value:function(j,N){w.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,j);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return w.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"sanitize",value:function(j){return h.default.sanitize(j)}},{key:"value",value:function(j){return j.getAttribute("src")}}]),y}(l.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",r.default=v},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var i=function(){function j(N,S){for(var P=0;P<S.length;P++){var T=S[P];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(N,T.key,T)}}return function(N,S,P){return S&&j(N.prototype,S),P&&j(N,P),N}}(),o=function j(N,S,P){N===null&&(N=Function.prototype);var T=Object.getOwnPropertyDescriptor(N,S);if(T===void 0){var E=Object.getPrototypeOf(N);return E===null?void 0:j(E,S,P)}else{if("value"in T)return T.value;var I=T.get;return I===void 0?void 0:I.call(P)}},l=a(35),d=p(l),h=a(5),f=p(h),u=a(9),m=p(u);function p(j){return j&&j.__esModule?j:{default:j}}function w(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function v(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function x(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var y=function(j){x(N,j);function N(){return w(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,null,[{key:"create",value:function(P){var T=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,P);return typeof P=="string"&&(window.katex.render(P,T,{throwOnError:!1,errorColor:"#f00"}),T.setAttribute("data-value",P)),T}},{key:"value",value:function(P){return P.getAttribute("data-value")}}]),N}(d.default);y.blotName="formula",y.className="ql-formula",y.tagName="SPAN";var b=function(j){x(N,j),i(N,null,[{key:"register",value:function(){f.default.register(y,!0)}}]);function N(){w(this,N);var S=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return N}(m.default);r.FormulaBlot=y,r.default=b},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var i=function(){function P(T,E){for(var I=0;I<E.length;I++){var O=E[I];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(T,O.key,O)}}return function(T,E,I){return E&&P(T.prototype,E),I&&P(T,I),T}}(),o=function P(T,E,I){T===null&&(T=Function.prototype);var O=Object.getOwnPropertyDescriptor(T,E);if(O===void 0){var R=Object.getPrototypeOf(T);return R===null?void 0:P(R,E,I)}else{if("value"in O)return O.value;var C=O.get;return C===void 0?void 0:C.call(I)}},l=a(0),d=v(l),h=a(5),f=v(h),u=a(9),m=v(u),p=a(13),w=v(p);function v(P){return P&&P.__esModule?P:{default:P}}function x(P,T){if(!(P instanceof T))throw new TypeError("Cannot call a class as a function")}function y(P,T){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:P}function b(P,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);P.prototype=Object.create(T&&T.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(P,T):P.__proto__=T)}var j=function(P){b(T,P);function T(){return x(this,T),y(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return i(T,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var O=this.domNode.textContent;this.cachedText!==O&&((O.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(O),this.domNode.normalize(),this.attach()),this.cachedText=O)}}]),T}(w.default);j.className="ql-syntax";var N=new d.default.Attributor.Class("token","hljs",{scope:d.default.Scope.INLINE}),S=function(P){b(T,P),i(T,null,[{key:"register",value:function(){f.default.register(N,!0),f.default.register(j,!0)}}]);function T(E,I){x(this,T);var O=y(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,E,I));if(typeof O.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var R=null;return O.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(R),R=setTimeout(function(){O.highlight(),R=null},O.options.interval)}),O.highlight(),O}return i(T,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var O=this.quill.getSelection();this.quill.scroll.descendants(j).forEach(function(R){R.highlight(I.options.highlight)}),this.quill.update(f.default.sources.SILENT),O!=null&&this.quill.setSelection(O,f.default.sources.SILENT)}}}]),T}(m.default);S.DEFAULTS={highlight:function(){return window.hljs==null?null:function(P){var T=window.hljs.highlightAuto(P);return T.value}}(),interval:1e3},r.CodeBlock=j,r.CodeToken=N,r.default=S},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var i=function T(E,I,O){E===null&&(E=Function.prototype);var R=Object.getOwnPropertyDescriptor(E,I);if(R===void 0){var C=Object.getPrototypeOf(E);return C===null?void 0:T(C,I,O)}else{if("value"in R)return R.value;var D=R.get;return D===void 0?void 0:D.call(O)}},o=function(){function T(E,I){for(var O=0;O<I.length;O++){var R=I[O];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}return function(E,I,O){return I&&T(E.prototype,I),O&&T(E,O),E}}(),l=a(3),d=x(l),h=a(8),f=x(h),u=a(43),m=x(u),p=a(15),w=a(41),v=x(w);function x(T){return T&&T.__esModule?T:{default:T}}function y(T,E){if(!(T instanceof E))throw new TypeError("Cannot call a class as a function")}function b(T,E){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:T}function j(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=function(T){j(E,T);function E(I,O){y(this,E),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=N);var R=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,I,O));return R.quill.container.classList.add("ql-bubble"),R}return o(E,[{key:"extendToolbar",value:function(O){this.tooltip=new P(this.quill,this.options.bounds),this.tooltip.root.appendChild(O.container),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),v.default)}}]),E}(m.default);S.DEFAULTS=(0,d.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){E?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var P=function(T){j(E,T);function E(I,O){y(this,E);var R=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,I,O));return R.quill.on(f.default.events.EDITOR_CHANGE,function(C,D,A,M){if(C===f.default.events.SELECTION_CHANGE)if(D!=null&&D.length>0&&M===f.default.sources.USER){R.show(),R.root.style.left="0px",R.root.style.width="",R.root.style.width=R.root.offsetWidth+"px";var Z=R.quill.getLines(D.index,D.length);if(Z.length===1)R.position(R.quill.getBounds(D));else{var X=Z[Z.length-1],U=R.quill.getIndex(X),F=Math.min(X.length()-1,D.index+D.length-U),B=R.quill.getBounds(new p.Range(U,F));R.position(B)}}else document.activeElement!==R.textbox&&R.quill.hasFocus()&&R.hide()}),R}return o(E,[{key:"listen",value:function(){var O=this;i(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){O.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!O.root.classList.contains("ql-hidden")){var R=O.quill.getSelection();R!=null&&O.position(O.quill.getBounds(R))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(O){var R=i(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"position",this).call(this,O),C=this.root.querySelector(".ql-tooltip-arrow");if(C.style.marginLeft="",R===0)return R;C.style.marginLeft=-1*R-C.offsetWidth/2+"px"}}]),E}(u.BaseTooltip);P.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=P,r.default=S},function(n,r,a){n.exports=a(63)}]).default})})(z4);var ire=z4.exports,ore=Ra&&Ra.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xp=Ra&&Ra.__assign||function(){return xp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},xp.apply(this,arguments)},lre=Ra&&Ra.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,a++)r[a]=i[o];return r},Dg=Ra&&Ra.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},fa=Dg(_),cre=Dg(po),eu=Dg(are),d2=Dg(ire),dre=function(e){ore(t,e);function t(n){var r=e.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(i,o,l,d){var h,f,u,m;i==="text-change"?(f=(h=r).onEditorChangeText)===null||f===void 0||f.call(h,r.editor.root.innerHTML,o,d,r.unprivilegedEditor):i==="selection-change"&&((m=(u=r).onEditorChangeSelection)===null||m===void 0||m.call(u,o,d,r.unprivilegedEditor))};var a=r.isControlled()?n.value:n.defaultValue;return r.value=a??"",r}return t.prototype.validateProps=function(n){var r;if(fa.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(fa.default.Children.count(n.children)){var a=fa.default.Children.only(n.children);if(((r=a)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(n,r){var a=this,i;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var o=this.getEditorContents(),l=(i=n.value,i??"");this.isEqualValue(l,o)||this.setEditorContents(this.editor,l)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),lre(this.cleanProps,this.dirtyProps).some(function(d){return!eu.default(n[d],a.props[d])})},t.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(a){return!eu.default(n[a],r.props[a])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(n,r){var a=this;if(this.editor&&this.shouldComponentRegenerate(n)){var i=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:i,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var l=this.regenerationSnapshot,i=l.delta,d=l.selection;delete this.regenerationSnapshot,this.instantiateEditor();var h=this.editor;h.setContents(i),u2(function(){return a.setEditorSelection(h,d)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(n,r){var a=new d2.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(a,r.tabIndex),this.hookEditor(a),a},t.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(n){return n&&n.ops},t.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?eu.default(n.ops,r.ops):eu.default(n,r)},t.prototype.setEditorContents=function(n,r){var a=this;this.value=r;var i=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),u2(function(){return a.setEditorSelection(n,i)})},t.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var a=n.getLength();r.index=Math.max(0,Math.min(r.index,a-1)),r.length=Math.max(0,Math.min(r.length,a-1-r.index)),n.setSelection(r)}},t.prototype.setEditorTabIndex=function(n,r){var a,i;!((i=(a=n)===null||a===void 0?void 0:a.scroll)===null||i===void 0)&&i.domNode&&(n.scroll.domNode.tabIndex=r)},t.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},t.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=cre.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},t.prototype.renderEditingArea=function(){var n=this,r=this.props,a=r.children,i=r.preserveWhitespace,o=this.state.generation,l={key:o,ref:function(d){n.editingArea=d}};return fa.default.Children.count(a)?fa.default.cloneElement(fa.default.Children.only(a),l):i?fa.default.createElement("pre",xp({},l)):fa.default.createElement("div",xp({},l))},t.prototype.render=function(){var n;return fa.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(n,r,a,i){var o,l;if(this.editor){var d=this.isDelta(this.value)?i.getContents():i.getHTML();d!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=d,(l=(o=this.props).onChange)===null||l===void 0||l.call(o,n,r,a,i))}},t.prototype.onEditorChangeSelection=function(n,r,a){var i,o,l,d,h,f;if(this.editor){var u=this.getEditorSelection(),m=!u&&n,p=u&&!n;eu.default(n,u)||(this.selection=n,(o=(i=this.props).onChangeSelection)===null||o===void 0||o.call(i,n,r,a),m?(d=(l=this.props).onFocus)===null||d===void 0||d.call(l,n,r,a):p&&((f=(h=this.props).onBlur)===null||f===void 0||f.call(h,u,r,a)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=d2.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(fa.default.Component);function u2(e){Promise.resolve().then(e)}var ure=dre;const V4=vl(ure);var Fg="Switch",[hre,gie]=jn(Fg),[fre,mre]=hre(Fg),U4=_.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:d="on",onCheckedChange:h,form:f,...u}=e,[m,p]=_.useState(null),w=Nt(t,j=>p(j)),v=_.useRef(!1),x=m?f||!!m.closest("form"):!0,[y,b]=ta({prop:a,defaultProp:i??!1,onChange:h,caller:Fg});return s.jsxs(fre,{scope:n,checked:y,disabled:l,children:[s.jsx(ut.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":G4(y),"data-disabled":l?"":void 0,disabled:l,value:d,...u,ref:w,onClick:Ze(e.onClick,j=>{b(N=>!N),x&&(v.current=j.isPropagationStopped(),v.current||j.stopPropagation())})}),x&&s.jsx(W4,{control:m,bubbles:!v.current,name:r,value:d,checked:y,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});U4.displayName=Fg;var q4="SwitchThumb",H4=_.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=mre(q4,n);return s.jsx(ut.span,{"data-state":G4(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});H4.displayName=q4;var pre="SwitchBubbleInput",W4=_.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=_.useRef(null),l=Nt(o,i),d=rg(n),h=Gp(t);return _.useEffect(()=>{const f=o.current;if(!f)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(d!==n&&p){const w=new Event("click",{bubbles:r});p.call(f,n),f.dispatchEvent(w)}},[d,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});W4.displayName=pre;function G4(e){return e?"checked":"unchecked"}var K4=U4,gre=H4;const Vt=_.forwardRef(({className:e,...t},n)=>s.jsx(K4,{className:it("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(gre,{className:it("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Vt.displayName=K4.displayName;const Z4=({productData:e})=>{const{name:t,category:n,price:r,comparePrice:a,images:i,description:o,tags:l,dynamicFields:d,shortDescription:h,featured:f,status:u}=e,m=a&&r?Math.round((a-r)/a*100):0;return s.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[s.jsx($e,{children:s.jsx(ze,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-4",children:i&&i.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:s.jsx("img",{src:i[0],alt:t,className:"w-full h-full object-cover"})}),i.length>1&&s.jsx("div",{className:"grid grid-cols-4 gap-2",children:i.slice(1,5).map((p,w)=>s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:s.jsx("img",{src:p,alt:`${t} ${w+2}`,className:"w-full h-full object-cover cursor-pointer hover:opacity-80"})},w))})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ye,{variant:"outline",children:n}),f&&s.jsx(Ye,{className:"bg-yellow-100 text-yellow-800",children:"Featured"}),s.jsx(Ye,{variant:u==="active"?"default":"secondary",children:u})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:t}),h&&s.jsx("p",{className:"text-gray-600 mb-4",children:h})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((p,w)=>s.jsx(vs,{className:"h-4 w-4 fill-current"},w))}),s.jsx("span",{className:"text-sm text-gray-600",children:"(4.8) 124 reviews"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["",r==null?void 0:r.toLocaleString()]}),a&&a>r&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["",a.toLocaleString()]}),s.jsxs(Ye,{className:"bg-green-100 text-green-800",children:[m,"% OFF"]})]})]}),s.jsx("p",{className:"text-sm text-green-600",children:"Inclusive of all taxes"})]}),s.jsx(Aa,{}),d&&Object.keys(d).length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Product Details"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(d).map(([p,w])=>w?s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600 capitalize",children:[p.replace(/([A-Z])/g," $1").trim(),":"]}),s.jsx("span",{className:"font-medium",children:Array.isArray(w)?w.join(", "):String(w)})]},p):null)})]}),s.jsx(Aa,{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(te,{className:"flex-1",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),s.jsx(te,{variant:"outline",size:"icon",children:s.jsx(dr,{className:"h-4 w-4"})}),s.jsx(te,{variant:"outline",size:"icon",children:s.jsx(Th,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(Qn,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Free Delivery"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(er,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Secure Payment"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(Qa,{className:"h-6 w-6 mx-auto mb-1 text-orange-600"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Easy Returns"})]})]})]})]})})}),o&&s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{children:"Product Description"})}),s.jsx(ze,{children:s.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:o}})})]}),l&&l.length>0&&s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{children:"Tags"})}),s.jsx(ze,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(p=>s.jsx(Ye,{variant:"secondary",children:p},p))})})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{children:"Similar Products"})}),s.jsx(ze,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(p=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg"}),s.jsxs("p",{className:"text-sm font-medium",children:["Similar Product ",p]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["",(r*(.8+Math.random()*.4)).toFixed(0)]})]},p))})})]})]})},Ur={electronics:{name:"Electronics",description:"Electronic devices and gadgets",icon:"",fields:[{name:"brand",label:"Brand",type:"text",placeholder:"e.g., Samsung, Apple"},{name:"model",label:"Model",type:"text",placeholder:"e.g., Galaxy S24"},{name:"warranty",label:"Warranty",type:"select",options:["No Warranty","6 months","1 year","2 years"]}]},clothing:{name:"Clothing & Fashion",description:"Apparel and fashion accessories",icon:"",fields:[{name:"brand",label:"Brand",type:"text",placeholder:"Brand name"},{name:"size",label:"Sizes",type:"multiselect",options:["XS","S","M","L","XL","XXL"]},{name:"color",label:"Colors",type:"multiselect",options:["Black","White","Red","Blue","Green","Gray","Brown"]},{name:"material",label:"Material",type:"text",placeholder:"e.g., Cotton, Polyester"}]},food:{name:"Food & Beverages",description:"Fresh food and beverages",icon:"",fields:[{name:"cuisine",label:"Cuisine",type:"select",options:["Nepali","Indian","Chinese","Continental","Italian","Other"]},{name:"spiceLevel",label:"Spice Level",type:"select",options:["Mild","Medium","Hot"]},{name:"dietaryInfo",label:"Dietary",type:"multiselect",options:["Vegetarian","Vegan","Gluten-Free"]},{name:"servingSize",label:"Serving Size",type:"text",placeholder:"e.g., 1 plate, 250ml"}]},baby:{name:"Baby & Kids",description:"Products for babies and children",icon:"",fields:[{name:"ageGroup",label:"Age Group",type:"select",options:["0-6 months","6-12 months","1-2 years","2-4 years","4+ years"]},{name:"safetyFeatures",label:"Safety",type:"multiselect",options:["BPA Free","Non-Toxic","Organic"]}]},grocery:{name:"Grocery & Household",description:"Daily essentials and household items",icon:"",fields:[{name:"weight",label:"Weight/Volume",type:"text",placeholder:"e.g., 1kg, 500ml"},{name:"expiryDate",label:"Expiry Date",type:"date"},{name:"organic",label:"Organic",type:"boolean"}]},meat:{name:"Meat & Seafood",description:"Fresh meat and seafood",icon:"",fields:[{name:"cut",label:"Cut Type",type:"select",options:["Whole","Pieces","Minced","Fillet"]},{name:"freshness",label:"Freshness",type:"select",options:["Fresh","Frozen"]}]},medicine:{name:"Medicine & Health",description:"Medicines and health products",icon:"",fields:[{name:"dosage",label:"Dosage",type:"text",placeholder:"e.g., 500mg, 10ml"},{name:"form",label:"Form",type:"select",options:["Tablet","Capsule","Syrup","Injection","Cream","Drops"]},{name:"prescription",label:"Prescription Required",type:"boolean"}]}},vre=()=>Object.entries(Ur).map(([e,t])=>({value:e,label:t.name,description:t.description,icon:t.icon})),h2=e=>({meat:"kg",grocery:"piece",medicine:"unit",food:"plate",electronics:"piece",clothing:"piece",baby:"piece"})[e]||"piece",xre=N4({name:Ls().min(1,"Product name is required"),category:Ls().min(1,"Category is required"),subcategory:Ls().optional(),price:ba().min(0,"Price must be positive"),comparePrice:ba().optional(),costPrice:ba().optional(),sku:Ls().optional(),barcode:Ls().optional(),trackQuantity:wc().default(!0),quantity:ba().min(0,"Quantity must be positive"),lowStockThreshold:ba().min(0).optional(),description:Ls().min(1,"Description is required"),shortDescription:Ls().optional(),tags:mp(Ls()).default([]),images:mp(Ls()).min(1,"At least one image is required"),status:k4(["active","draft","archived"]).default("active"),featured:wc().default(!1),freeDelivery:wc().default(!1),seoTitle:Ls().optional(),seoDescription:Ls().optional(),dynamicFields:S4(z0()).default({})}),yre=()=>{const[e,t]=_.useState(""),[n,r]=_.useState([]),[a,i]=_.useState([]),[o,l]=_.useState(""),[d,h]=_.useState(!1),[f,u]=_.useState(!1),[m,p]=_.useState([]),[w,v]=_.useState([]),x=x4({resolver:b4(xre),defaultValues:{name:"",category:"",price:0,quantity:0,description:"",tags:[],images:[],status:"active",featured:!1,freeDelivery:!1,trackQuantity:!0,dynamicFields:{}}}),{control:y,handleSubmit:b,watch:j,setValue:N,formState:{errors:S}}=x,P=j("category");_.useEffect(()=>{var M;t(P),P&&((M=Ur[P])!=null&&M.subcategories)?v(Ur[P].subcategories):v([]),N("subcategory","")},[P,N]),_.useEffect(()=>{(async()=>{try{const{response:Z,data:X}=await Ve("/vendor-profiles/");if(Z.ok&&X&&X.length>0){const F=X[0].categories||[];p(F)}}catch(Z){console.error("Error fetching vendor profile:",Z)}})()},[N]);const T=M=>{const Z=M.target.files;if(Z){const X=Array.from(Z).map(U=>URL.createObjectURL(U));r(U=>[...U,...X]),N("images",[...n,...X])}},E=M=>{const Z=n.filter((X,U)=>U!==M);r(Z),N("images",Z)},I=()=>{if(o.trim()&&!a.includes(o.trim())){const M=[...a,o.trim()];i(M),N("tags",M),l("")}},O=M=>{const Z=a.filter(X=>X!==M);i(Z),N("tags",Z)},R=M=>{console.log("Product Data:",M)},C=M=>{const Z=`dynamicFields.${M.name}`;switch(M.type){case"text":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:y,rules:{required:M.required},render:({field:X})=>s.jsx(je,{...X,placeholder:`Enter ${M.label.toLowerCase()}`})})]},M.name);case"number":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:y,rules:{required:M.required},render:({field:X})=>s.jsx(je,{...X,type:"number",placeholder:`Enter ${M.label.toLowerCase()}`,onChange:U=>X.onChange(Number(U.target.value))})})]},M.name);case"select":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:y,rules:{required:M.required},render:({field:X})=>{var U;return s.jsxs(Yt,{onValueChange:X.onChange,value:X.value,children:[s.jsx(Kt,{children:s.jsx(Xt,{placeholder:`Select ${M.label.toLowerCase()}`})}),s.jsx(Zt,{children:(U=M.options)==null?void 0:U.map(F=>s.jsx(st,{value:F,children:F},F))})]})}})]},M.name);case"multiselect":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:y,rules:{required:M.required},render:({field:X})=>{var F;const U=X.value||[];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Yt,{onValueChange:B=>{U.includes(B)||X.onChange([...U,B])},children:[s.jsx(Kt,{children:s.jsx(Xt,{placeholder:`Select ${M.label.toLowerCase()}`})}),s.jsx(Zt,{children:(F=M.options)==null?void 0:F.map(B=>s.jsx(st,{value:B,children:B},B))})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:U.map(B=>s.jsxs(Ye,{variant:"secondary",className:"flex items-center gap-1",children:[B,s.jsx(sn,{className:"h-3 w-3 cursor-pointer",onClick:()=>{X.onChange(U.filter(z=>z!==B))}})]},B))})]})}})]},M.name);case"textarea":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:y,rules:{required:M.required},render:({field:X})=>s.jsx(Ys,{...X,placeholder:`Enter ${M.label.toLowerCase()}`})})]},M.name);case"boolean":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:Z,control:y,render:({field:X})=>s.jsx(Vt,{checked:X.value,onCheckedChange:X.onChange})}),s.jsx(xe,{htmlFor:M.name,children:M.label})]},M.name);case"date":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:y,rules:{required:M.required},render:({field:X})=>s.jsx(je,{...X,type:"date"})})]},M.name);default:return null}},D=()=>f?s.jsx(Z4,{productData:j()}):s.jsxs("form",{onSubmit:b(R),className:"space-y-6",children:[s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs(Tt,{className:"flex items-center gap-2",children:[s.jsx(qt,{className:"h-5 w-5"}),"Basic Information"]})}),s.jsxs(ze,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"name",children:["Product Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"name",control:y,render:({field:M})=>s.jsx(je,{...M,placeholder:"Enter product name"})}),S.name&&s.jsx("p",{className:"text-red-500 text-sm",children:S.name.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"category",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"category",control:y,render:({field:M})=>s.jsxs(Yt,{onValueChange:M.onChange,value:M.value,children:[s.jsx(Kt,{children:s.jsx(Xt,{placeholder:"Select category"})}),s.jsx(Zt,{children:m.map(Z=>{const X=vre().find(U=>U.value===Z);return X?s.jsx(st,{value:Z,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:X.icon}),s.jsx("span",{children:X.label})]})},Z):null})})]})}),S.category&&s.jsx("p",{className:"text-red-500 text-sm",children:S.category.message})]}),w.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"subcategory",children:"Subcategory"}),s.jsx(pt,{name:"subcategory",control:y,render:({field:M})=>s.jsxs(Yt,{onValueChange:M.onChange,value:M.value,children:[s.jsx(Kt,{children:s.jsx(Xt,{placeholder:"Select subcategory"})}),s.jsx(Zt,{children:w.map(Z=>s.jsx(st,{value:Z,children:Z},Z))})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"shortDescription",children:"Short Description"}),s.jsx(pt,{name:"shortDescription",control:y,render:({field:M})=>s.jsx(Ys,{...M,placeholder:"Brief product description",rows:2})})]})]})]}),e&&Ur[e]&&s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs(Tt,{className:"flex items-center gap-2",children:[s.jsx(Jf,{className:"h-5 w-5"}),s.jsx("span",{className:"mr-2",children:Ur[e].icon}),Ur[e].name," Details"]})}),s.jsx(ze,{className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ur[e].fields.map(C)})})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{children:"Pricing & Inventory"})}),s.jsxs(ze,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"price",children:["Selling Price ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"price",control:y,render:({field:M})=>s.jsx(je,{...M,type:"number",step:"0.01",placeholder:"0.00",onChange:Z=>M.onChange(Number(Z.target.value))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"comparePrice",children:"Compare Price"}),s.jsx(pt,{name:"comparePrice",control:y,render:({field:M})=>s.jsx(je,{...M,type:"number",step:"0.01",placeholder:"0.00",onChange:Z=>M.onChange(Number(Z.target.value))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"costPrice",children:"Cost Price"}),s.jsx(pt,{name:"costPrice",control:y,render:({field:M})=>s.jsx(je,{...M,type:"number",step:"0.01",placeholder:"0.00",onChange:Z=>M.onChange(Number(Z.target.value))})})]})]}),s.jsx(Aa,{}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:"trackQuantity",control:y,render:({field:M})=>s.jsx(Vt,{checked:M.value,onCheckedChange:M.onChange})}),s.jsx(xe,{children:"Track Quantity"})]}),j("trackQuantity")&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"quantity",children:["Quantity ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"quantity",control:y,render:({field:M})=>s.jsx(je,{...M,type:"number",placeholder:"0",onChange:Z=>M.onChange(Number(Z.target.value))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"lowStockThreshold",children:"Low Stock Alert"}),s.jsx(pt,{name:"lowStockThreshold",control:y,render:({field:M})=>s.jsx(je,{...M,type:"number",placeholder:"5",onChange:Z=>M.onChange(Number(Z.target.value))})})]})]})]})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs(Tt,{className:"flex items-center gap-2",children:[s.jsx(ka,{className:"h-5 w-5"}),"Product Images"]})}),s.jsxs(ze,{className:"space-y-4",children:[s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"image-upload"}),s.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[s.jsx(Vp,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload images or drag and drop"}),s.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG, GIF up to 10MB"})]})]}),n.length>0&&s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:n.map((M,Z)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:M,alt:`Product ${Z+1}`,className:"w-full h-24 object-cover rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>E(Z),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(sn,{className:"h-3 w-3"})}),Z===0&&s.jsx(Ye,{className:"absolute bottom-1 left-1 text-xs",children:"Main"})]},Z))})]})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs(Tt,{className:"flex items-center gap-2",children:[s.jsx(jT,{className:"h-5 w-5"}),"Product Description"]})}),s.jsx(ze,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs(xe,{htmlFor:"description",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"description",control:y,render:({field:M})=>s.jsx(V4,{theme:"snow",value:M.value,onChange:M.onChange,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},style:{minHeight:"200px"}})}),S.description&&s.jsx("p",{className:"text-red-500 text-sm",children:S.description.message})]})})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{children:"Product Tags"})}),s.jsxs(ze,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(je,{value:o,onChange:M=>l(M.target.value),placeholder:"Add a tag",onKeyPress:M=>M.key==="Enter"&&(M.preventDefault(),I())}),s.jsx(te,{type:"button",onClick:I,variant:"outline",children:s.jsx(Ns,{className:"h-4 w-4"})})]}),a.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(M=>s.jsxs(Ye,{variant:"secondary",className:"flex items-center gap-1",children:[M,s.jsx(sn,{className:"h-3 w-3 cursor-pointer",onClick:()=>O(M)})]},M))})]})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{children:"SEO & Settings"})}),s.jsxs(ze,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"sku",children:"SKU"}),s.jsx(pt,{name:"sku",control:y,render:({field:M})=>s.jsx(je,{...M,placeholder:"Product SKU"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"barcode",children:"Barcode"}),s.jsx(pt,{name:"barcode",control:y,render:({field:M})=>s.jsx(je,{...M,placeholder:"Product barcode"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"seoTitle",children:"SEO Title"}),s.jsx(pt,{name:"seoTitle",control:y,render:({field:M})=>s.jsx(je,{...M,placeholder:"SEO optimized title"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"seoDescription",children:"SEO Description"}),s.jsx(pt,{name:"seoDescription",control:y,render:({field:M})=>s.jsx(Ys,{...M,placeholder:"SEO meta description",rows:3})})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:"featured",control:y,render:({field:M})=>s.jsx(Vt,{checked:M.value,onCheckedChange:M.onChange})}),s.jsx(xe,{children:"Featured Product"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:"freeDelivery",control:y,render:({field:M})=>s.jsx(Vt,{checked:M.value,onCheckedChange:M.onChange})}),s.jsx(xe,{children:"Free Delivery"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"status",children:"Status"}),s.jsx(pt,{name:"status",control:y,render:({field:M})=>s.jsxs(Yt,{onValueChange:M.onChange,value:M.value,children:[s.jsx(Kt,{className:"w-32",children:s.jsx(Xt,{})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"active",children:"Active"}),s.jsx(st,{value:"draft",children:"Draft"}),s.jsx(st,{value:"archived",children:"Archived"})]})]})})]})]})]})]}),s.jsxs("div",{className:"flex gap-4 sticky bottom-4 bg-white p-4 border-t",children:[s.jsxs(te,{type:"button",variant:"outline",className:"flex-1",onClick:()=>u(!f),children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),f?"Edit":"Preview"]}),s.jsx(te,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{N("status","draft"),b(R)()},children:"Save as Draft"}),s.jsxs(te,{type:"submit",className:"flex-1",children:[s.jsx(od,{className:"h-4 w-4 mr-2"}),"Publish Product"]})]})]});if(d)return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:s.jsx(Ht,{className:"h-4 w-4"})}),s.jsx("h1",{className:"text-xl font-semibold",children:"Add New Product"})]}),s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>u(!f),children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),f?"Edit":"Preview"]})]})}),s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsx(R_,{className:"h-[calc(100vh-80px)]",children:s.jsx(D,{})})})]});const A=lt();return s.jsx("button",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-full shadow-xl flex items-center justify-center transition-all duration-300 hover:scale-110 border-4 border-white","aria-label":"Add Product",onClick:()=>A("/vendor/add-product"),children:s.jsx(Ns,{className:"h-7 w-7"})})},f2=[{title:"Home",url:"/vendor/dashboard",icon:ew},{title:"Orders",url:"/vendor/orders",icon:kT},{title:"Products",url:"/vendor/products",icon:qt},{title:"Settings",url:"/vendor/settings",icon:QF}],bre=({children:e})=>s.jsx(s.Fragment,{children:e}),wre=()=>{const e=Fn(),t=lt();return s.jsxs("div",{className:"fixed bottom-0 left-0 w-full z-50",children:[s.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 -top-6 z-10",children:s.jsx(yre,{})}),s.jsxs("nav",{className:"bg-gradient-to-r from-slate-50 to-white shadow-2xl border-t border-gray-100 relative overflow-hidden backdrop-blur-sm pb-safe-bottom",children:[s.jsx("div",{className:"absolute inset-0 bg-white",style:{clipPath:"polygon(0 0, calc(50% - 32px) 0, calc(50% - 24px) 16px, calc(50% + 24px) 16px, calc(50% + 32px) 0, 100% 0, 100% 100%, 0 100%)"}}),s.jsxs("div",{className:"relative flex justify-around items-center px-safe-x py-1 pt-3 md:py-1 md:pt-2",children:[f2.slice(0,2).map(n=>{const r=n.icon,a=e.pathname===n.url;return s.jsxs("button",{onClick:()=>t(n.url),className:`flex flex-col items-center justify-center p-2 md:p-1 rounded-lg transition-all duration-200 min-w-[60px] ${a?"text-orange-600 bg-orange-50":"text-gray-600 hover:text-orange-500 hover:bg-gray-50"}`,"aria-label":n.title,children:[s.jsx(r,{className:"h-5 w-5 mb-1 md:mb-0"}),s.jsx("span",{className:"text-xs font-medium",children:n.title})]},n.title)}),s.jsx("div",{className:"w-16"}),f2.slice(2).map(n=>{const r=n.icon,a=e.pathname===n.url;return s.jsxs("button",{onClick:()=>t(n.url),className:`flex flex-col items-center justify-center p-2 md:p-1 rounded-lg transition-all duration-200 min-w-[60px] ${a?"text-orange-600 bg-orange-50":"text-gray-600 hover:text-orange-500 hover:bg-gray-50"}`,"aria-label":n.title,children:[s.jsx(r,{className:"h-5 w-5 mb-1 md:mb-0"}),s.jsx("span",{className:"text-xs font-medium",children:n.title})]},n.title)})]})]})]})},_re=async()=>{console.log(" AUTH DEBUG START");const e=await Ae.getToken(),t=await Ae.getUser(),n=await Ae.isAuthenticated();console.log(" Auth Status:",{hasToken:!!e,tokenLength:(e==null?void 0:e.length)||0,tokenPreview:e?`${e.substring(0,10)}...`:"null",hasUser:!!t,userId:t==null?void 0:t.id,userType:t==null?void 0:t.user_type,isAuthenticated:n});const r=localStorage.getItem("token"),a=localStorage.getItem("user");return console.log(" Direct Storage:",{directToken:r?`${r.substring(0,10)}...`:"null",directUser:a?"exists":"null",allKeys:Object.keys(localStorage)}),console.log(" AUTH DEBUG END"),{token:e,user:t,isAuth:n}};function jre({title:e,subtitle:t,headerActions:n}){const r=lt(),{toast:a}=ns(),[i,o]=_.useState([]),[l,d]=_.useState([]),[h,f]=_.useState(!0),[u,m]=_.useState(null),[p,w]=_.useState(0),[v,x]=_.useState(0),[y,b]=_.useState(!0),j=i.filter(A=>!A.read).length,N=l.reduce((A,M)=>A+(M.unread_count||0),0),S=!1;_.useEffect(()=>{console.log(" VendorHeader initializing..."),I(),O(),E(),P(),T();const A=setInterval(P,3e4),M=setInterval(T,3e4),Z=setInterval(O,6e4),X=H=>{const q=H.detail;o(W=>[q,...W])},U=H=>{const{order:q}=H.detail,W={id:Date.now(),type:"order",title:"New Order Received!",message:`Order #${q.order_number} for ${q.total_amount}`,data:{orderId:q.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(Y=>[W,...Y]),us.playNotificationSound(),us.showBrowserNotificationCompat(W.title,{body:W.message,tag:`order-${q.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/orders"}}),a({title:W.title,description:W.message,duration:5e3})},F=H=>{const{refund:q}=H.detail,W={id:Date.now(),type:"refund_request",title:"Refund Request Received!",message:`Refund request for Order #${q.order_number} - ${q.amount}`,data:{refundId:q.id,orderId:q.order_id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(Y=>[W,...Y]),us.playNotificationSound(),us.showBrowserNotificationCompat(W.title,{body:W.message,tag:`refund-${q.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/orders"}}),a({title:W.title,description:W.message,duration:5e3})},B=H=>{const{product:q}=H.detail,W={id:Date.now(),type:"stock_alert",title:"Low Stock Alert!",message:`${q.name} is running low (${q.stock} left)`,data:{productId:q.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/products"};o(Y=>[W,...Y]),us.playNotificationSound(),us.showBrowserNotificationCompat(W.title,{body:W.message,tag:`stock-${q.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/products"}}),a({title:W.title,description:W.message,duration:5e3})},z=H=>{const{order:q,oldStatus:W,newStatus:Y}=H.detail,V={id:Date.now(),type:"order_status",title:"Order Status Updated!",message:`Order #${q.order_number} changed from ${W} to ${Y}`,data:{orderId:q.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(G=>[V,...G]),us.playNotificationSound(),us.showBrowserNotificationCompat(V.title,{body:V.message,tag:`status-${q.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/orders"}}),a({title:V.title,description:V.message,duration:4e3})};return window.addEventListener("newNotification",X),window.addEventListener("orderCreated",U),window.addEventListener("refundRequest",F),window.addEventListener("stockAlert",B),window.addEventListener("orderStatusChange",z),()=>{clearInterval(A),clearInterval(M),clearInterval(Z),window.removeEventListener("newNotification",X),window.removeEventListener("orderCreated",U),window.removeEventListener("refundRequest",F),window.removeEventListener("stockAlert",B),window.removeEventListener("orderStatusChange",z)}},[]);const P=async()=>{try{const A=await ar.getConversations(),Z=(Array.isArray(A)?A:(A==null?void 0:A.results)||[]).reduce((X,U)=>{var z,H,q;const F=(z=U.other_participant)==null?void 0:z.id;if(!F)return X;const B=X.find(W=>{var Y;return((Y=W.other_participant)==null?void 0:Y.id)===F});if(!B)X.push(U);else{const W=((H=U.last_message)==null?void 0:H.created_at)||U.updated_at,Y=((q=B.last_message)==null?void 0:q.created_at)||B.updated_at;if(new Date(W)>new Date(Y)){const V=X.findIndex(G=>{var ie;return((ie=G.other_participant)==null?void 0:ie.id)===F});X[V]=U}}return X},[]);l.length>0&&Z.forEach(X=>{var F,B;const U=l.find(z=>{var H,q;return((H=z.other_participant)==null?void 0:H.id)===((q=X.other_participant)==null?void 0:q.id)});U&&X.unread_count>U.unread_count&&us.showBrowserNotification(`New message from ${(F=X.other_participant)==null?void 0:F.username}`,{body:((B=X.last_message)==null?void 0:B.content)||"New message received",tag:`message-${X.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/messages"}})}),d(Z)}catch(A){console.error("Failed to load conversations:",A)}},T=async()=>{try{const{response:A,data:M}=await Ve("/vendor-notifications/");if(A.ok&&M){const Z=Array.isArray(M)?M:M.results||[];i.length>0&&Z.forEach(X=>{if(!i.find(F=>F.id===X.id)){us.playNotificationSound();let F="/vendor/orders",B=!0;switch(X.type){case"order":F="/vendor/orders";break;case"refund":case"refund_request":F="/vendor/orders";break;case"stock_alert":case"low_stock":F="/vendor/products";break;case"order_status":case"status_change":F="/vendor/orders";break;case"payment":F="/vendor/wallet";break;case"message":F="/vendor/messages",B=!1;break;default:F="/vendor/orders"}us.showBrowserNotificationCompat(X.title,{body:X.message,tag:`notification-${X.id}`,requireInteraction:B,data:{actionUrl:F}}),a({title:X.title,description:X.message,duration:5e3})}}),o(Z)}}catch(A){console.error("Failed to load notifications:",A),i.length===0&&o([])}},E=async()=>{await us.requestPermission()},I=async()=>{console.log(" Fetching vendor status...");const A=Date.now();if(A-p<3e4&&u!==null){console.log(" Using cached vendor status");return}try{w(A);const M=await Ae.isAuthenticated();if(console.log(" Authentication check for fetch:",M),!M){console.log(" Not authenticated");return}const Z=await Ae.getUser(),{response:X,data:U}=await Ve("/vendor-profiles/");if(console.log(" Fetch vendor status response:",{status:X.status,statusText:X.statusText,data:U,headers:Object.fromEntries(X.headers.entries())}),X.status===401||X.status===403){console.log(" Authentication error in fetch - user may not have vendor profile"),console.log("User authenticated but no vendor profile found");return}if(X.status!==200&&X.status!==201)throw console.log(" Unexpected status in fetch:",X.status),new Error((U==null?void 0:U.error)||(U==null?void 0:U.message)||"Failed to fetch vendor status");if(U&&U.results&&U.results.length>0){const F=U.results.find(B=>B.user===(Z==null?void 0:Z.id))||U.results[0];console.log(" Profile found:",{id:F.id,user:F.user,is_active:F.is_active}),m(F.id),f(F.is_active||!1)}else console.log(" No profile found in response"),console.log(" User may need to switch to vendor role or complete onboarding")}catch(M){console.error(" Error fetching vendor status:",M),a({title:"Error",description:"Failed to load vendor status",variant:"destructive"})}},O=async()=>{try{const{response:A,data:M}=await Ve("/vendor-wallet/");if(A.ok&&M){const Z=M.balance||0,X=v;x(Z),b(Z>=100),Z<100&&h&&(f(!1),localStorage.getItem("lowBalanceWarningShown")||(localStorage.setItem("lowBalanceWarningShown","true"),a({title:"Status Changed",description:"Automatically set to offline due to low wallet balance (< 100 points)",variant:"destructive"}))),Z>=100&&X<100&&!h&&(f(!0),localStorage.removeItem("lowBalanceWarningShown"),a({title:"Status Changed",description:"Automatically set to online - wallet balance restored",variant:"default"}))}}catch(A){console.error("Failed to fetch wallet balance:",A)}},R=async()=>{var A;if(console.log(" Toggle status started"),!h&&v<100){a({title:"Insufficient Balance",description:`Minimum 100 points required to go online. Current balance: ${v}`,variant:"destructive"});return}await _re();try{const M=await Ae.isAuthenticated();if(console.log(" Authentication check:",M),!M){console.log(" Not authenticated");return}if(!u)throw console.log(" No profile ID found"),new Error("Profile ID not found");const Z=!h;console.log(" Toggling status from",h,"to",Z,"for profile",u);const X={is_active:Z};console.log(" Request body:",X);const U=await Um();console.log(" Request headers:",U);const{response:F,data:B}=await Ve(`/vendor-profiles/${u}/toggle-status/`,{method:"POST",body:JSON.stringify(X)});if(console.log(" Toggle status response:",{status:F.status,statusText:F.statusText,data:B,headers:Object.fromEntries(F.headers.entries())}),console.log(" Response details:",{ok:F.ok,status:F.status,dataSuccess:B==null?void 0:B.success,dataError:B==null?void 0:B.error,dataMessage:B==null?void 0:B.message}),F.status===400&&((A=B==null?void 0:B.error)!=null&&A.includes("wallet balance"))){f(!1),b(!1),x(B.wallet_balance||0),a({title:"Insufficient Balance",description:B.error,variant:"destructive"});return}if(F.status===401||F.status===403){console.log(" Authentication error - but not clearing auth yet"),a({title:"Permission Error",description:"You don't have permission to perform this action",variant:"destructive"});return}if(F.status===200||F.status===201)if(console.log(" Success response received"),B&&B.success!==!1){const H=B.is_active!==void 0?B.is_active:Z;console.log(" Setting status to:",H),f(H),a({title:"Success",description:B.message||`Status set to ${H?"Online":"Offline"}`}),console.log(" Toggle completed successfully");return}else throw console.log(" API returned success: false"),new Error((B==null?void 0:B.error)||(B==null?void 0:B.message)||"Failed to toggle status");console.log(" Unexpected status code:",F.status);const z=(B==null?void 0:B.error)||(B==null?void 0:B.detail)||(B==null?void 0:B.message)||`Server returned status ${F.status}`;throw new Error(z)}catch(M){console.error(" Error toggling status:",M),a({title:"Error",description:M instanceof Error?M.message:"Failed to toggle status",variant:"destructive"})}},C=async A=>{await us.markAsRead(A),o(M=>M.map(Z=>Z.id===A?{...Z,read:!0}:Z))},D=async()=>{await us.markAllAsRead(),o(A=>A.map(M=>({...M,read:!0})))};return s.jsx("header",{className:"fixed top-0 z-50 w-full max-w-full border-b bg-gradient-to-r from-gray-50 to-white shadow-lg overflow-hidden",children:s.jsxs("div",{className:"flex h-14 sm:h-16 items-center px-3 sm:px-4 max-w-full",children:[s.jsx("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:s.jsx("div",{className:"flex items-center gap-2 min-w-0",children:s.jsx("img",{src:"/assets/ezeywaylogo.png",alt:"Ezeyway",className:"h-32 w-32 sm:h-36 sm:w-36 object-contain flex-shrink-0"})})}),s.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 border border-gray-300 rounded-full px-3 py-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-xs font-medium ${h?"text-green-700":"text-gray-700"}`,children:h?"Online":"Offline"}),!y&&s.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Low Balance"}),S]}),s.jsx("button",{onClick:R,disabled:!y&&!h,title:y?"":`Minimum 100 points required. Current: ${v}`,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300 ${!y&&!h?"bg-red-400 cursor-not-allowed opacity-50":h?"bg-green-500":"bg-gray-400"}`,children:s.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform shadow-sm ${h?"translate-x-5":"translate-x-1"}`})})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[s.jsxs(Hc,{children:[s.jsx(Wc,{asChild:!0,children:s.jsxs(te,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10 text-gray-700 hover:bg-gray-100",children:[s.jsx(Xr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),N>0&&s.jsx(Ye,{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 text-[10px] sm:text-xs flex items-center justify-center min-w-[16px] sm:min-w-[20px] bg-red-500 text-white border-2 border-white",children:N>9?"9+":N}),s.jsx("span",{className:"sr-only",children:"Messages"})]})}),s.jsxs(hl,{align:"end",className:"w-72 sm:w-80 mr-2 sm:mr-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Messages"}),s.jsx("div",{className:"flex gap-2",children:s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>r("/vendor/messages"),className:"text-xs",children:"View all"})})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:l.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No messages"}):l.slice(0,5).map(A=>{var M,Z,X,U,F,B;return s.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${A.unread_count>0?"bg-blue-50/50":""}`,onClick:()=>r("/vendor/messages"),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(fi,{className:"h-8 w-8",children:[s.jsx(Wr,{src:(M=A.other_participant)==null?void 0:M.profile_picture}),s.jsx(mi,{children:(X=(Z=A.other_participant)==null?void 0:Z.username)==null?void 0:X.charAt(0)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:(U=A.other_participant)==null?void 0:U.username}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((F=A.last_message)==null?void 0:F.content)||((B=A.last_message)==null?void 0:B.file_name)||"No messages"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:A.last_message?new Date(A.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),A.unread_count>0&&s.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-white font-bold",children:A.unread_count})})]})},A.id)})})]})]}),n,!n&&s.jsxs(Hc,{children:[s.jsx(Wc,{asChild:!0,children:s.jsxs(te,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10 text-gray-700 hover:bg-gray-100",children:[s.jsx(Kn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),j>0&&s.jsx(Ye,{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 text-[10px] sm:text-xs flex items-center justify-center min-w-[16px] sm:min-w-[20px] bg-red-500 text-white border-2 border-white",children:j>9?"9+":j}),s.jsx("span",{className:"sr-only",children:"Notifications"})]})}),s.jsxs(hl,{align:"end",className:"w-72 sm:w-80 mr-2 sm:mr-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Notifications"}),j>0&&s.jsx(te,{variant:"ghost",size:"sm",onClick:D,className:"text-xs",children:"Mark all read"})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):i.map(A=>s.jsx("div",{className:`p-4 border-b last:border-b-0 hover:bg-muted/50 cursor-pointer ${A.read?"":"bg-blue-50/50"}`,onClick:()=>{switch(C(A.id),A.type){case"order":case"refund":case"refund_request":case"order_status":case"status_change":r("/vendor/orders");break;case"stock_alert":case"low_stock":r("/vendor/products");break;case"payment":r("/vendor/wallet");break;case"message":r("/vendor/messages");break;default:r("/vendor/orders")}},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${A.read?"bg-transparent":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-medium ${A.read?"text-gray-700":"text-gray-900"}`,children:A.title}),s.jsx("p",{className:`text-sm ${A.read?"text-gray-600":"text-gray-700"}`,children:A.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(A.created_at).toLocaleString()})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Ye,{variant:"outline",className:`text-xs ${A.type==="order"?"border-green-200 text-green-700":A.type==="refund"||A.type==="refund_request"?"border-red-200 text-red-700":A.type==="stock_alert"||A.type==="low_stock"?"border-orange-200 text-orange-700":A.type==="order_status"||A.type==="status_change"||A.type==="payment"?"border-blue-200 text-blue-700":A.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:A.type==="refund_request"?"refund":A.type==="stock_alert"?"stock":A.type==="order_status"?"status":A.type})})]})},A.id))}),s.jsx("div",{className:"p-2 border-t",children:s.jsx(te,{variant:"ghost",className:"w-full text-sm",onClick:()=>r("/vendor/notifications"),children:"View all notifications"})})]})]})]})]})})}const Nre=Fh.divIcon({className:"vendor-marker",html:'<div style="background-color: #10b981; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]}),Sre=Fh.divIcon({className:"delivery-marker",html:'<div style="background-color: #ef4444; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]}),m2=async(e,t,n,r)=>{try{const i=await(await fetch(`https://router.project-osrm.org/route/v1/driving/${e},${t};${n},${r}?overview=full&geometries=geojson`)).json();if(i.routes&&i.routes.length>0){const o=i.routes[0];return{coordinates:o.geometry.coordinates.map(d=>[d[1],d[0]]),distance:o.distance/1e3,duration:o.duration/60}}}catch(a){console.error("Error fetching route:",a)}return null};function kre({isOpen:e,orders:t,onAccept:n,onReject:r}){const[a,i]=_.useState({}),[o,l]=_.useState(null),[d,h]=_.useState({}),f=_.useRef(null),{toast:u}=ns(),m=_.useRef({});_.useEffect(()=>{const x=async()=>{try{const{response:y,data:b}=await Ve("vendor-profiles/");if(y.ok&&b.results&&b.results.length>0){const j=b.results[0];if(j.latitude&&j.longitude){l({lat:j.latitude,lng:j.longitude,radius:j.delivery_radius||50});const N={};for(const S of t)if(S.delivery_latitude&&S.delivery_longitude){const P=await m2(j.longitude,j.latitude,S.delivery_longitude,S.delivery_latitude);P&&(N[S.id]=P)}h(N)}}}catch(y){console.error("Error fetching vendor location:",y)}};if(e&&t.length>0){x(),(async()=>{if(f.current)try{f.current.volume=.8,await f.current.play(),setTimeout(()=>{f.current&&(f.current.pause(),f.current.currentTime=0)},3e3)}catch(j){console.warn("Audio autoplay blocked:",j);try{const N=new(window.AudioContext||window.webkitAudioContext),S=N.createOscillator(),P=N.createGain();S.connect(P),P.connect(N.destination),S.frequency.setValueAtTime(800,N.currentTime),S.type="square",P.gain.setValueAtTime(.3,N.currentTime),P.gain.exponentialRampToValueAtTime(.01,N.currentTime+.5),S.start(N.currentTime),S.stop(N.currentTime+.5)}catch(N){console.warn("Web Audio API also failed:",N)}}})(),"Notification"in window&&Notification.permission==="default"?Notification.requestPermission().then(j=>{j==="granted"&&p()}):"Notification"in window&&Notification.permission==="granted"&&p(),t.forEach(j=>{m.current[j.id]||(m.current[j.id]=new Date(j.created_at))});const b=setInterval(()=>{const j={};t.forEach(N=>{if(m.current[N.id]){const P=Math.floor((new Date().getTime()-m.current[N.id].getTime())/1e3);j[N.id]=P}}),i(j)},1e3);return()=>clearInterval(b)}},[e,t]),_.useEffect(()=>{o&&t.length>0&&(async()=>{const y={};for(const b of t)if(b.delivery_latitude&&b.delivery_longitude&&!d[b.id]){const j=await m2(o.lng,o.lat,b.delivery_longitude,b.delivery_latitude);j&&(y[b.id]=j)}Object.keys(y).length>0&&h(b=>({...b,...y}))})()},[t,o]);const p=()=>{t.forEach(x=>{new Notification("New Order Received!",{body:`Order #${x.order_number} - ${x.total_amount}`,icon:"/favicon.ico",tag:`order-${x.id}`,requireInteraction:!0})})};if(!e||t.length===0)return null;const w=x=>{const y=t.find(b=>b.id===x);n(x),u({title:"Order Accepted",description:`Order #${y==null?void 0:y.order_number} has been accepted`})},v=x=>{const y=t.find(b=>b.id===x);r(x),u({title:"Order Rejected",description:`Order #${y==null?void 0:y.order_number} has been rejected`,variant:"destructive"})};return s.jsxs(s.Fragment,{children:[s.jsx("audio",{ref:f,preload:"auto",loop:!0,children:s.jsx("source",{src:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",type:"audio/wav"})}),s.jsx("div",{className:"fixed inset-0 bg-white z-[9999] flex flex-col",children:s.jsx("div",{className:"flex-1 flex flex-col w-full h-full",children:s.jsxs("div",{className:"p-4 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center animate-pulse",children:s.jsx(Kn,{className:"h-4 w-4 text-red-600 animate-bounce"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-lg font-bold text-red-900",children:" New Orders Received!"}),s.jsxs("p",{className:"text-sm text-red-600 font-medium",children:[t.length," order",t.length>1?"s":""," waiting for response"]}),s.jsx("p",{className:"text-xs text-red-500 font-bold mt-1",children:" MUST ACCEPT OR REJECT - NO DISMISSAL ALLOWED"})]})]}),s.jsx("div",{className:"text-sm text-red-600 font-bold animate-pulse ml-4",children:"URGENT"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-4",children:t.map(x=>{const y=a[x.id]||0;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("p",{className:"text-xs font-bold text-gray-900",children:["#",x.order_number]}),s.jsxs("p",{className:"text-xs font-bold text-green-600",children:["",x.total_amount]}),s.jsxs("p",{className:"text-xs text-blue-600",children:[Math.floor(y/60),":",(y%60).toString().padStart(2,"0")]})]}),s.jsxs("div",{className:`border rounded-lg p-2 mb-2 ${parseFloat(x.delivery_fee||"0")===0?"bg-green-50 border-green-200":parseFloat(x.delivery_fee||"0")<50?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qt,{className:"h-3 w-3 text-gray-600"}),s.jsx("p",{className:"text-xs font-bold text-gray-800",children:"Delivery Fee:"})]}),s.jsx("p",{className:`text-sm font-bold ${parseFloat(x.delivery_fee||"0")===0?"text-green-700":parseFloat(x.delivery_fee||"0")<50?"text-blue-700":"text-orange-700"}`,children:parseFloat(x.delivery_fee||"0")===0?"FREE DELIVERY":`${x.delivery_fee}`})]}),parseFloat(x.delivery_fee||"0")>0&&s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[" You earn ",x.delivery_fee," from this delivery"]}),parseFloat(x.delivery_fee||"0")===0&&s.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Free delivery - customer pays nothing extra"})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:x.customer_name}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-1",children:[s.jsxs("div",{className:"flex items-start gap-1",children:[s.jsx(es,{className:"h-2 w-2 text-gray-500 mt-0.5"}),s.jsx("p",{className:"text-xs text-gray-900",children:x.delivery_address})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Eh,{className:"h-2 w-2 text-gray-500"}),s.jsx("p",{className:"text-xs text-gray-900",children:x.delivery_phone})]})]}),d[x.id]&&o&&s.jsxs("div",{className:`border rounded-lg p-2 mb-2 ${d[x.id].distance>o.radius?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between text-center",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-blue-800",children:" Distance"}),s.jsxs("p",{className:`text-sm font-bold ${d[x.id].distance>o.radius?"text-red-900":"text-blue-900"}`,children:[d[x.id].distance.toFixed(1),"km"]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-green-800",children:" Radius"}),s.jsxs("p",{className:"text-sm font-bold text-green-900",children:[o.radius,"km"]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700",children:" Time"}),s.jsxs("p",{className:"text-sm font-bold text-gray-900",children:[Math.round(d[x.id].duration),"min"]})]})]}),d[x.id].distance>o.radius&&s.jsx("p",{className:"text-xs font-bold text-red-600 mt-1 text-center",children:" Exceeds radius!"})]}),o&&x.delivery_latitude&&x.delivery_longitude&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"h-64 rounded-lg overflow-hidden border relative",children:[s.jsxs(j_,{center:[(o.lat+x.delivery_latitude)/2,(o.lng+x.delivery_longitude)/2],zoom:12,style:{height:"100%",width:"100%"},zoomControl:!1,attributionControl:!1,children:[s.jsx(N_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(ph,{position:[o.lat,o.lng],icon:Nre}),s.jsx(ph,{position:[x.delivery_latitude,x.delivery_longitude],icon:Sre}),d[x.id]&&s.jsx(eZ,{positions:d[x.id].coordinates,pathOptions:{color:"#3b82f6",weight:4,opacity:.8}})]}),d[x.id]&&s.jsxs("div",{className:"absolute top-2 left-2 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-1 shadow-lg",children:[s.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:[" ",d[x.id].distance.toFixed(1)," km"]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[" ",Math.round(d[x.id].duration)," min"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Your Location"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Delivery Location"})]})]})]}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("p",{className:"text-xs font-medium text-gray-700 mb-1",children:["Items (",x.items.length,")"]}),s.jsx("div",{className:"space-y-1 max-h-16 overflow-y-auto",children:x.items.map(b=>{var j,N,S;return s.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white rounded",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:s.jsx("img",{src:((S=(N=(j=b.product_details)==null?void 0:j.images)==null?void 0:N[0])==null?void 0:S.image_url)||"/placeholder-product.jpg",alt:b.product_name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:b.product_name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",b.quantity]})]}),s.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["",b.total_price]})]},b.id)})})]}),x.delivery_instructions&&s.jsxs("div",{className:"mb-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Instructions:"}),s.jsx("p",{className:"text-xs text-gray-600 italic",children:x.delivery_instructions})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(te,{onClick:()=>v(x.id),variant:"outline",size:"sm",className:"flex-1 border-red-200 text-red-600 hover:bg-red-50 text-xs h-6",children:[s.jsx(sn,{className:"h-2 w-2 mr-1"}),"Reject"]}),s.jsxs(te,{onClick:()=>w(x.id),size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-xs h-6",children:[s.jsx(Bc,{className:"h-2 w-2 mr-1"}),"Accept"]})]})]},x.id)})})]})})})]})}function Y4(){const[e,t]=_.useState(!1),[n,r]=_.useState(null);return _.useEffect(()=>{if(!gt.isNativePlatform())return;const a=i=>{r(i.detail),t(!0),setTimeout(()=>{t(!1)},5e3)};return window.addEventListener("showOrderModal",a),()=>{window.removeEventListener("showOrderModal",a)}},[]),!gt.isNativePlatform()||!e?null:s.jsx("div",{className:"fixed top-4 left-4 right-4 z-[10000] animate-in slide-in-from-top duration-300",children:s.jsx($e,{className:"border-orange-200 bg-orange-50 shadow-lg",children:s.jsx(ze,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center animate-pulse",children:s.jsx(Kn,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-bold text-orange-900",children:" New Order Received!"}),n&&s.jsxs("p",{className:"text-xs text-orange-700",children:["Order #",n.orderNumber," - ",n.amount]}),s.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Tap anywhere to view and respond"})]})]})})})})}function Cre(){const[e,t]=_.useState([]),[n,r]=_.useState(!1);_.useRef(null);const a=_.useRef(new Set),i=_.useRef(0),{notifications:o,unreadCount:l,isConnected:d}=Tg();_.useEffect(()=>{const m=p=>{const w=p.detail;w.type==="order"&&w.title.includes("New Order")&&h()};return window.addEventListener("newNotification",m),()=>{window.removeEventListener("newNotification",m)}},[]);const h=async()=>{try{const{authService:m}=await Ue(async()=>{const{authService:y}=await Promise.resolve().then(()=>ai);return{authService:y}},void 0),p=await m.getToken();if(!p){console.log("No token found for pending orders");return}console.log(" Mobile: Fetching pending orders with token:",p?`${p.substring(0,10)}...`:"NO TOKEN"),console.log(" Mobile: API URL:",Jo("orders/vendor/pending/"));const{apiRequest:w}=await Ue(async()=>{const{apiRequest:y}=await Promise.resolve().then(()=>hs);return{apiRequest:y}},void 0),{response:v,data:x}=await w("orders/vendor/pending/");console.log(" Mobile: Pending orders response:",v.status,v.ok),v.ok&&x?(console.log("Pending orders received:",x.length,x),x.length!==i.current?(console.log(` Order count changed: ${i.current}  ${x.length}`),t(x),r(x.length>0),i.current=x.length,x.length>0&&(console.log(" Mobile: Showing order notification for",x.length,"orders"),Ue(async()=>{const{simpleNotificationService:y}=await Promise.resolve().then(()=>rl);return{simpleNotificationService:y}},void 0).then(({simpleNotificationService:y})=>{x.forEach(b=>{a.current.has(b.id)||(console.log(" Processing NEW order:",b.order_number,b.total_amount),a.current.add(b.id),y.showOrderNotification(b.order_number,b.total_amount,b.id))})}))):console.log(" No change in order count, skipping update")):console.error("Failed to fetch pending orders:",v.status,v.statusText)}catch(m){console.error("Error fetching pending orders:",m)}};return _.useEffect(()=>{(async()=>{const{authService:b}=await Ue(async()=>{const{authService:N}=await Promise.resolve().then(()=>ai);return{authService:N}},void 0);await b.getToken()&&h()})();const p=async()=>{try{const{authService:b}=await Ue(async()=>{const{authService:N}=await Promise.resolve().then(()=>ai);return{authService:N}},void 0);if(!await b.getToken())return;console.log(" Auto-refreshing pending orders..."),await h()}catch(b){console.error("Failed to auto-refresh orders:",b)}};let w,v;const x=()=>{w&&clearInterval(w),v&&clearInterval(v),w=setInterval(()=>{document.hidden||(console.log(" AGGRESSIVE POLLING: Page visible - checking for urgent orders"),p())},3e3),v=setInterval(()=>{document.hidden&&(console.log(" BACKGROUND POLLING: Page hidden - still checking for orders"),p())},1e4)};x();const y=()=>{console.log(` Visibility changed: ${document.hidden?"hidden":"visible"}`),document.hidden||(console.log(" Page became visible - IMMEDIATE order refresh!"),p(),x())};if(document.addEventListener("visibilitychange",y),gt.isNativePlatform()){const b=async j=>{var S;const N=((S=j==null?void 0:j.detail)==null?void 0:S.isActive)??!0;console.log(` MOBILE App state changed: ${N?"ACTIVE":"INACTIVE"}`),N&&(console.log(" MOBILE App ACTIVE - IMMEDIATE order refresh!"),await p(),x())};return document.addEventListener("appStateChange",b),document.addEventListener("resume",()=>{console.log(" MOBILE App RESUMED - IMMEDIATE order refresh!"),p(),x()}),()=>{w&&clearInterval(w),v&&clearInterval(v),document.removeEventListener("visibilitychange",y),document.removeEventListener("appStateChange",b),document.removeEventListener("resume",b)}}return()=>{w&&clearInterval(w),v&&clearInterval(v),document.removeEventListener("visibilitychange",y)}},[]),{pendingOrders:e,isModalOpen:n,acceptOrder:async m=>{try{const{apiRequest:p}=await Ue(async()=>{const{apiRequest:v}=await Promise.resolve().then(()=>hs);return{apiRequest:v}},void 0),{response:w}=await p(`/orders/${m}/accept/`,{method:"POST"});if(w.ok){const{simpleNotificationService:v}=await Ue(async()=>{const{simpleNotificationService:x}=await Promise.resolve().then(()=>rl);return{simpleNotificationService:x}},void 0);return v.clearNotification(m),a.current.delete(m),t(x=>x.filter(y=>y.id!==m)),e.length<=1&&r(!1),window.dispatchEvent(new CustomEvent("orderAccepted",{detail:{orderId:m}})),!0}}catch(p){console.error("Error accepting order:",p)}return!1},rejectOrder:async m=>{try{const{apiRequest:p}=await Ue(async()=>{const{apiRequest:v}=await Promise.resolve().then(()=>hs);return{apiRequest:v}},void 0),{response:w}=await p(`/orders/${m}/reject/`,{method:"POST",body:JSON.stringify({reason:"Rejected by vendor"})});if(w.ok){const{simpleNotificationService:v}=await Ue(async()=>{const{simpleNotificationService:x}=await Promise.resolve().then(()=>rl);return{simpleNotificationService:x}},void 0);return v.clearNotification(m),a.current.delete(m),t(x=>x.filter(y=>y.id!==m)),e.length<=1&&r(!1),!0}}catch(p){console.error("Error rejecting order:",p)}return!1},notifications:o,unreadCount:l,isConnected:d}}const X4=_.createContext(void 0);function Ere({children:e}){const{pendingOrders:t,isModalOpen:n,acceptOrder:r,rejectOrder:a}=Cre(),[i,o]=_.useState(!1);_.useEffect(()=>{(async()=>{await Hi.requestPermissions(),console.log("Notification service initialized for platform:",gt.isNativePlatform()?"mobile":"web")})()},[]),_.useEffect(()=>{o(n)},[n]),_.useEffect(()=>{t.length>0&&t.forEach(h=>{Hi.showOrderNotification(h.order_number,h.total_amount,h.id),gt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([300,100,300])})},[t]),_.useEffect(()=>{const h=async f=>{console.log("Order modal event received:",f.detail);const u=f.detail;o(!0),(u!=null&&u.startBeeping||u!=null&&u.autoOpened||u!=null&&u.fromPush)&&(console.log(" Starting beeping for auto-opened notification"),await l()),gt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([200,100,200])};return window.addEventListener("showOrderModal",h),()=>{window.removeEventListener("showOrderModal",h)}},[]);const l=async()=>{try{console.log(" Starting order notification beeping sequence..."),await Hi.playNotificationSound();let h=0;const f=10,u=setInterval(async()=>{h<f&&i?(await Hi.playNotificationSound(),gt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([150,50,150]),h++,console.log(` Beep ${h}/${f}`)):(clearInterval(u),console.log(" Beeping sequence completed"))},2e3);window.orderBeepInterval=u}catch(h){console.error("Failed to start order beeping:",h)}};_.useEffect(()=>{gt.isNativePlatform()&&document.addEventListener("visibilitychange",()=>{document.hidden||(console.log("Page visible - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))})},[]);const d=()=>{o(!1),window.orderBeepInterval&&(clearInterval(window.orderBeepInterval),window.orderBeepInterval=null,console.log(" Stopped beeping - modal closed"))};return s.jsxs(X4.Provider,{value:{pendingOrdersCount:t.length,isModalOpen:i,closeModal:d},children:[e,s.jsx(Y4,{}),s.jsx(kre,{isOpen:i,orders:t,onAccept:r,onReject:a})]})}function Tre(){const e=_.useContext(X4);return e===void 0?{pendingOrdersCount:0,isModalOpen:!1,closeModal:()=>{}}:e}function Pre({children:e,title:t,subtitle:n,headerActions:r}){return s.jsx(Ere,{children:s.jsx(bre,{children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 safe-area-inset max-w-full overflow-x-hidden",children:[s.jsx(Y4,{}),s.jsx("div",{className:"pt-safe-top",children:s.jsx(jre,{title:t,subtitle:n,headerActions:r})}),s.jsx("main",{className:"flex-1 pb-20 px-safe-x max-w-full overflow-x-hidden pt-14 sm:pt-16",children:e}),s.jsx(wre,{})]})})})}function rs({children:e,title:t,subtitle:n,headerActions:r}){return s.jsx(Pre,{title:t,subtitle:n,headerActions:r,children:e})}const Are=()=>{const[e,t]=_.useState({}),[n,r]=_.useState(!1);return _.useEffect(()=>{(async()=>{try{const i=await Ae.getToken(),o=await Ae.getUser(),l=await Ae.isAuthenticated(),d=await Ae.isSessionValid(),h=gt.isNativePlatform();let f="Not checked",u=null;if(i&&(o==null?void 0:o.user_type)==="vendor")try{const{response:m,data:p}=await Ve("/vendor-profiles/");f=`${m.status} - ${m.ok?"Success":"Failed"}`,m.ok||(u=(p==null?void 0:p.error)||m.statusText)}catch(m){f="Error",u=m.message}else i&&(o==null?void 0:o.user_type)!=="vendor"&&(f="Not a vendor user");t({isNative:h,platform:gt.getPlatform(),token:i?`${i.substring(0,10)}...`:"None",user:o?{id:o.id,user_type:o.user_type,email:o.email}:"None",isAuthenticated:l,isSessionValid:d,vendorProfileStatus:f,vendorProfileError:u,timestamp:new Date().toISOString()})}catch(i){t({error:i.message,timestamp:new Date().toISOString()})}})()},[]),n?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-md w-full max-h-96 overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Vendor Debug Info"}),s.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),s.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(e,null,2)}),s.jsx("button",{onClick:()=>{var a;(a=navigator.clipboard)==null||a.writeText(JSON.stringify(e,null,2)),alert("Debug info copied to clipboard")},className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs w-full",children:"Copy to Clipboard"})]})}):s.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 right-4 bg-red-500 text-white px-3 py-1 rounded text-xs z-50",children:"Debug"})},Ro=go("PushNotifications",{}),J4=Object.freeze(Object.defineProperty({__proto__:null,PushNotifications:Ro},Symbol.toStringTag,{value:"Module"}));class Ore{constructor(){Gt(this,"fcmToken",null)}async initialize(){if(!gt.isNativePlatform()){console.log(" Not on native platform, skipping FCM initialization");return}try{console.log(" Initializing FCM Service..."),this.checkForAutoOpenOrder(),this.setupListeners(),console.log(" Requesting push notification permissions...");const t=await Ro.requestPermissions();if(console.log(" Permission result:",t),t.receive!=="granted"){console.warn(" Push notification permission denied");return}console.log(" Registering for push notifications..."),await Ro.register();try{console.log(" FCM Community plugin initialized")}catch(n){console.warn(" FCM Community plugin not available:",n)}await this.getFCMToken(),console.log(" FCM Service initialized successfully")}catch(t){console.error(" FCM initialization failed:",t)}}checkForAutoOpenOrder(){try{const t=localStorage.getItem("autoOpenOrder");if(t){const n=JSON.parse(t);Date.now()-n.timestamp<3e4?(console.log(" AUTO-OPENING ORDER FROM NOTIFICATION:",n),localStorage.removeItem("autoOpenOrder"),this.startOrderBeeping(),setTimeout(()=>{this.showOrderModalImmediately(n)},1e3)):localStorage.removeItem("autoOpenOrder")}window.addEventListener("autoOpenedFromBackground",n=>{console.log(" APP AUTO-OPENED FROM BACKGROUND SERVICE:",n.detail),this.startOrderBeeping(),setTimeout(()=>{this.showOrderModalImmediately(n.detail)},500)})}catch(t){console.error("Error checking for auto-open order:",t)}}async getFCMToken(){try{return gt.isNativePlatform()?new Promise(t=>{Ro.addListener("registration",n=>{this.fcmToken=n.value,console.log(" FCM Token (Native):",n.value),this.sendTokenToBackend(),t(n.value)})}):null}catch(t){return console.error("Failed to get FCM token:",t),null}}setupListeners(){Ro.addListener("pushNotificationReceived",t=>{var n,r,a;if(console.log(" Push notification received:",t),console.log(" Notification data:",t.data),((n=t.data)==null?void 0:n.autoOpen)==="true"||((r=t.data)==null?void 0:r.action)==="autoOpenOrder"){console.log(" AGGRESSIVE AUTO-OPENING APP FROM DATA MESSAGE!"),this.forceAppToForeground(),this.startOrderBeeping(),this.showOrderModalImmediately({orderId:parseInt(t.data.orderId),orderNumber:t.data.orderNumber,amount:t.data.amount,autoOpened:!0,fromPush:!0,startBeeping:!0,aggressive:!0}),this.triggerBackgroundAutoOpen(t.data);return}(a=t.data)!=null&&a.orderId?(console.log(` Showing order modal for order: ${t.data.orderId}`),this.startOrderBeeping(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(t.data.orderId),orderNumber:t.data.orderNumber,amount:t.data.amount,fromPush:!0,startBeeping:!0}}))):console.warn(" No orderId in notification data")}),Ro.addListener("pushNotificationActionPerformed",t=>{var r,a,i;console.log(" WHATSAPP-STYLE NOTIFICATION TAPPED - INSTANT OPEN LIKE MESSAGING APP:",t),console.log(" Notification data:",t.notification.data);const n=(r=t.notification.data)==null?void 0:r.orderId;n?(console.log(` WHATSAPP-STYLE INSTANT OPEN FOR ORDER: ${n}`),this.whatsappStyleInstantOpen({orderId:parseInt(n),orderNumber:(a=t.notification.data)==null?void 0:a.orderNumber,amount:(i=t.notification.data)==null?void 0:i.amount})):(console.warn(" No orderId found in notification data"),window.location.href="/vendor/orders")}),Ro.addListener("registrationError",t=>{console.error(" Push registration error:",t)}),console.log(" FCM listeners set up successfully")}async sendTokenToBackend(){if(!this.fcmToken){console.warn("No FCM token available to send");return}try{await this.waitForAuth();const{apiRequest:t}=await Ue(async()=>{const{apiRequest:r}=await Promise.resolve().then(()=>hs);return{apiRequest:r}},void 0),{response:n}=await t("/api/register-fcm-token/",{method:"POST",body:JSON.stringify({fcm_token:this.fcmToken,platform:gt.getPlatform()})});n.ok?console.log(" FCM token sent to backend successfully"):console.warn(" Failed to register FCM token:",n.status)}catch(t){console.warn(" Failed to send FCM token:",t),setTimeout(()=>this.sendTokenToBackend(),5e3)}}async waitForAuth(t=1e4){const n=Date.now();for(;Date.now()-n<t;){try{const{authService:r}=await Ue(async()=>{const{authService:i}=await Promise.resolve().then(()=>ai);return{authService:i}},void 0);if(r.getToken()){console.log(" Authentication ready for FCM token registration");return}}catch{}await new Promise(r=>setTimeout(r,500))}console.warn(" Authentication not ready, sending FCM token anyway")}showOrderModalImmediately(t){console.log(" SHOWING ORDER MODAL IMMEDIATELY:",t),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t}))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t}))},1500)}async forceAppToForeground(){try{console.log(" FORCING APP TO FOREGROUND..."),window.focus&&window.focus(),document.hidden&&document.dispatchEvent(new Event("visibilitychange")),Object.defineProperty(document,"hidden",{value:!1,writable:!1}),Object.defineProperty(document,"visibilityState",{value:"visible",writable:!1}),window.dispatchEvent(new Event("focus")),document.dispatchEvent(new Event("visibilitychange"))}catch(t){console.warn("Could not force app focus:",t)}}triggerBackgroundAutoOpen(t){try{if(gt.isNativePlatform()){const n={action:"com.ezeyway.app.AUTO_OPEN_ORDER",extras:{orderId:t.orderId,orderNumber:t.orderNumber,amount:t.amount,autoOpened:!0}};console.log(" Triggering background auto-open:",n)}}catch(n){console.error("Failed to trigger background auto-open:",n)}}async triggerAggressiveAutoOpen(t){try{console.log(" TRIGGERING AGGRESSIVE AUTO-OPEN..."),this.forceAppToForeground(),window.location.replace("/vendor/orders");for(let n=0;n<5;n++)setTimeout(()=>{this.showOrderModalImmediately({...t,autoOpened:!0,fromPush:!0,startBeeping:!0,aggressive:!0})},n*500)}catch(n){console.error("Failed to trigger aggressive auto-open:",n)}}async whatsappStyleInstantOpen(t){console.log(" WHATSAPP-STYLE INSTANT OPEN - LIKE MESSAGING APP");try{window.location.href="/vendor/orders",localStorage.setItem("whatsappInstantOrder",JSON.stringify({...t,whatsappStyle:!0,instantOpen:!0,timestamp:Date.now()})),this.startContinuousSoundForOrder(t.orderId,t),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{...t,whatsappStyle:!0,instantOpen:!0,keepSoundPlaying:!0}}))},1e3)}catch(n){console.error("WhatsApp-style instant open failed:",n),window.location.href="/vendor/orders"}}startContinuousSoundForOrder(t,n){console.log(" STARTING CONTINUOUS SOUND FOR ORDER - LIKE WHATSAPP"),this.stopContinuousSound(t);const r=setInterval(()=>{console.log(" CONTINUOUS ORDER SOUND - NEVER STOP"),Hi.showOrderNotification((n==null?void 0:n.orderNumber)||"UNKNOWN",(n==null?void 0:n.amount)||"0",(n==null?void 0:n.orderId)||t),"vibrate"in navigator&&navigator.vibrate(500)},2e3);window.orderSoundIntervals=window.orderSoundIntervals||new Map,window.orderSoundIntervals.set(t,r),console.log(" CONTINUOUS SOUND STARTED - WILL PLAY FOREVER UNTIL STOPPED")}stopContinuousSound(t){const n=window.orderSoundIntervals;n&&n.has(t)&&(clearInterval(n.get(t)),n.delete(t),console.log(" STOPPED CONTINUOUS SOUND FOR ORDER:",t))}async startOrderBeeping(){try{console.log(" Starting order notification beeping...");const{notificationService:t}=await Ue(async()=>{const{notificationService:a}=await Promise.resolve().then(()=>KP);return{notificationService:a}},void 0);await t.playNotificationSound();try{const{Haptics:a,ImpactStyle:i}=await Ue(async()=>{const{Haptics:d,ImpactStyle:h}=await import("./index-CdjfZlUo.js");return{Haptics:d,ImpactStyle:h}},[]);await a.impact({style:i.Heavy});let o=0;const l=setInterval(async()=>{o<5?(await a.impact({style:i.Medium}),o++):clearInterval(l)},2e3)}catch(a){console.warn("Haptics not available:",a)}let n=0;const r=setInterval(async()=>{n<5?(await t.playNotificationSound(),n++):clearInterval(r)},3e3)}catch(t){console.error("Failed to start order beeping:",t)}}getFCMTokenValue(){return this.fcmToken}async registerToken(){this.fcmToken?await this.sendTokenToBackend():console.warn("No FCM token available to register")}}const yp=new Ore,Rre=Object.freeze(Object.defineProperty({__proto__:null,fcmService:yp},Symbol.toStringTag,{value:"Module"})),p2=()=>{var V,G,ie;const e=lt(),[t,n]=_.useState(!0),[r,a]=_.useState(!1),{pendingOrdersCount:i,isModalOpen:o}=Tre(),[l,d]=_.useState(null),[h,f]=_.useState(0),[u,m]=_.useState({totalOrders:0,totalRevenue:0,totalProducts:0,totalCustomers:0,monthlyEarnings:0,monthlyGrowth:0,todaysEarnings:0}),[p,w]=_.useState([]),[v,x]=_.useState([]),[y,b]=_.useState([]),[j,N]=_.useState([]),[S,P]=_.useState([0,0,0,0,0,0]),[T,E]=_.useState([]),[I,O]=_.useState(!0),[R,C]=_.useState(1),[D,A]=_.useState(!0),[M,Z]=_.useState(0),[X,U]=_.useState(0),F=T.length>0?[T[T.length-1],...T,T[0]]:[];_.useEffect(()=>{if(T.length>0){const J=setInterval(()=>{C(le=>le+1)},4e3);return()=>clearInterval(J)}},[T.length]),_.useEffect(()=>{T.length>0&&(R===F.length-1?setTimeout(()=>{A(!1),C(1),setTimeout(()=>A(!0),50)},500):R===0&&setTimeout(()=>{A(!1),C(T.length),setTimeout(()=>A(!0),50)},500))},[R,T.length]);const B=J=>{U(0),Z(J.targetTouches[0].clientX)},z=J=>{U(J.targetTouches[0].clientX)},H=()=>{if(!M||!X)return;const J=M-X,le=J>50,ye=J<-50;le&&R<T.length&&C(ke=>ke+1),ye&&R>1&&C(ke=>ke-1)};_.useEffect(()=>{a(!0),n(!1),gt.isNativePlatform()&&yp.initialize().then(()=>{console.log(" FCM Service initialized on vendor home"),setTimeout(()=>{yp.registerToken()},2e3)}).catch(le=>{console.error(" FCM Service initialization failed:",le)}),q(),W();const J=()=>{console.log("Order accepted - refreshing dashboard data"),q()};return window.addEventListener("orderAccepted",J),()=>{window.removeEventListener("orderAccepted",J)}},[]);const q=async()=>{var J;try{const{apiRequest:le}=await Ue(async()=>{const{apiRequest:de}=await Promise.resolve().then(()=>hs);return{apiRequest:de}},void 0),{response:ye,data:ke}=await le("/vendor-profiles/");ye.ok&&((J=ke==null?void 0:ke.results)!=null&&J[0])&&d(ke.results[0]);const{response:Ne,data:_e}=await le("vendor-wallet/");Ne.ok&&_e&&f(parseFloat(_e.balance)||0);const{response:ne,data:Ce}=await le("/vendor/orders/");if(console.log("Vendor orders response:",ne.ok,Ce),ne.ok&&Ce){const de=Ce.results||Ce||[];console.log("Vendor orders found:",de.length,de);const Q=de.length,ae=de.filter(Le=>Le.status==="confirmed"||Le.status==="delivered");console.log("Confirmed and delivered orders:",ae.length,ae);const ue=ae.reduce((Le,He)=>Le+parseFloat(He.total_amount||0),0),re=new Date().toDateString(),ce=de.filter(Le=>new Date(Le.created_at).toDateString()===re),ge=de.filter(Le=>new Date(Le.created_at).toDateString()===re&&(Le.status==="confirmed"||Le.status==="delivered")).reduce((Le,He)=>Le+parseFloat(He.total_amount||0),0);console.log("Today earnings:",ge,"Total revenue:",ue);const me=new Date().getMonth(),be=new Date().getFullYear(),Se=de.filter(Le=>{const He=new Date(Le.created_at);return He.getMonth()===me&&He.getFullYear()===be&&(Le.status==="confirmed"||Le.status==="delivered")}).reduce((Le,He)=>Le+parseFloat(He.total_amount||0),0),Ie=[];for(let Le=5;Le>=0;Le--){const He=new Date;He.setMonth(He.getMonth()-Le);const It=de.filter(ss=>{const ys=new Date(ss.created_at);return ys.getMonth()===He.getMonth()&&ys.getFullYear()===He.getFullYear()&&(ss.status==="confirmed"||ss.status==="delivered")}).reduce((ss,ys)=>ss+parseFloat(ys.total_amount||0),0);Ie.push(It)}const se=new Set;de.forEach(Le=>{var He;(He=Le.customer_details)!=null&&He.id?se.add(Le.customer_details.id):Le.delivery_phone&&se.add(Le.delivery_phone)});const we=se.size;m({totalOrders:Q,totalRevenue:ue,totalProducts:0,totalCustomers:we,monthlyEarnings:Se,monthlyGrowth:15,todaysEarnings:ge}),P(Ie),w(ce.slice(0,5));const Pe={};ae.forEach(Le=>{var He;(He=Le.items)==null||He.forEach(_t=>{var ss,ys,ms;const It=((ss=_t.product_details)==null?void 0:ss.id)||_t.product_name;Pe[It]||(Pe[It]={id:It,name:_t.product_name,price:_t.unit_price,sold:0,rating:4.5,images:((ys=_t.product_details)==null?void 0:ys.images)||[],quantity:((ms=_t.product_details)==null?void 0:ms.quantity)||0}),Pe[It].sold+=parseInt(_t.quantity)||0})});const Me=Object.values(Pe).sort((Le,He)=>He.sold-Le.sold).slice(0,6);x(Me)}const{response:ve,data:oe}=await le("products/");if(ve.ok&&oe){const Q=(oe.results||oe||[]).filter(ue=>{var re;return((re=ue.vendor_details)==null?void 0:re.id)===(l==null?void 0:l.id)||ue.vendor_id===(l==null?void 0:l.id)});N(Q.slice(0,6)),m(ue=>({...ue,totalProducts:Q.length}));const ae=Q.filter(ue=>ue.featured).slice(0,6);b(ae)}}catch(le){console.warn("Dashboard data fetch error:",le)}},W=async()=>{try{const{apiRequest:J}=await Ue(async()=>{const{apiRequest:ke}=await Promise.resolve().then(()=>hs);return{apiRequest:ke}},void 0),{response:le,data:ye}=await J("sliders/?user_type=vendor");if(console.log(" VendorHome API Response:",ye),le.ok&&ye&&ye.sliders){const ke=ye.sliders.filter(Ne=>{const _e=Ne.visibility||"both",ne=_e==="vendor"||_e==="both";return console.log(` VendorHome Slider "${Ne.title}": visibility="${_e}", shouldShow=${ne}`),ne});console.log(` VendorHome: BEFORE filtering: ${ye.sliders.length} sliders`),console.log(` VendorHome: AFTER filtering: ${ke.length} sliders`),E(ke),ke.length>0&&C(1)}}catch(J){console.warn("Sliders fetch error:",J)}finally{O(!1)}},Y=J=>{switch(J){case"pending":return{icon:Jb,color:"red",bgColor:"red-50",textColor:"red-600",label:"Action Required"};case"confirmed":case"preparing":return{icon:Yr,color:"orange",bgColor:"orange-50",textColor:"orange-600",label:"Processing"};case"delivered":return{icon:Bc,color:"green",bgColor:"green-50",textColor:"green-600",label:"Completed"};default:return{icon:Yr,color:"blue",bgColor:"blue-50",textColor:"blue-600",label:"In Progress"}}};return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(As,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Verifying your account..."})]})}):r?s.jsxs(s.Fragment,{children:[s.jsx(Are,{}),o&&s.jsx("div",{className:"fixed inset-0 bg-black/20 z-[9998] pointer-events-none"}),s.jsx(rs,{title:"Dashboard",children:s.jsxs("div",{className:`space-y-4 pb-16 max-w-full overflow-x-hidden ${o?"pointer-events-none":""}`,children:[s.jsxs("div",{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(fi,{className:"h-10 w-10",children:[s.jsx(Wr,{src:(V=l==null?void 0:l.user_info)==null?void 0:V.profile_picture}),s.jsx(mi,{className:"bg-[#A98D7E] text-white",children:((G=l==null?void 0:l.business_name)==null?void 0:G[0])||((ie=l==null?void 0:l.owner_name)==null?void 0:ie[0])||"V"})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:(l==null?void 0:l.business_name)||"My Store"}),s.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[s.jsx(Mm,{className:"h-3 w-3"})," Rs",(h||0).toFixed(2)," Available"]})]})]}),s.jsxs(te,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto flex items-center gap-1",onClick:()=>e("/vendor/wallet"),children:[s.jsx(Mm,{className:"h-3 w-3"}),"Wallet"]})]}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"grid grid-cols-4 gap-1 sm:gap-2",children:[s.jsx($e,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=orders"),children:s.jsx(ze,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(qt,{className:"h-2.5 w-2.5 text-teal-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Orders"}),s.jsx("p",{className:"text-xs font-bold text-gray-900",children:u.totalOrders})]})})}),s.jsx($e,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=revenue"),children:s.jsx(ze,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(sa,{className:"h-2.5 w-2.5 text-blue-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Revenue"}),s.jsxs("p",{className:"text-xs font-bold text-gray-900",children:["Rs",u.totalRevenue.toFixed(2)]})]})})}),s.jsx($e,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=products"),children:s.jsx(ze,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(yn,{className:"h-2.5 w-2.5 text-purple-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Products"}),s.jsx("p",{className:"text-xs font-bold text-gray-900",children:u.totalProducts})]})})}),s.jsx($e,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=customers"),children:s.jsx(ze,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(Up,{className:"h-2.5 w-2.5 text-orange-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Customers"}),s.jsx("p",{className:"text-xs font-bold text-gray-900",children:u.totalCustomers})]})})})]})}),s.jsx("div",{className:"mb-6",children:I?s.jsx("div",{className:"relative overflow-hidden rounded-2xl shadow-lg h-48 bg-gray-100 flex items-center justify-center mx-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[s.jsx(As,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Loading banners..."})]})}):T.length>0?s.jsxs("div",{className:"relative md:overflow-visible overflow-hidden md:px-8 mx-4 md:mx-0",children:[s.jsx("div",{className:`flex ${D?"transition-transform duration-500 ease-in-out":""}`,style:{transform:typeof window<"u"&&window.innerWidth<768?`translateX(calc(-${R*100}% + 100%))`:`translateX(calc(-${R*50}% + 25%))`},onTouchStart:B,onTouchMove:z,onTouchEnd:H,children:F.map((J,le)=>{const ye=typeof window<"u"&&window.innerWidth<768,ke=!ye&&le===R;return s.jsx("div",{className:`flex-shrink-0 relative cursor-pointer transition-all duration-300 ${ye?"w-full rounded-2xl shadow-lg overflow-hidden":`${ke?"scale-100 opacity-100 z-10":"scale-75 opacity-60 z-0"} rounded-lg overflow-hidden`}`,style:ye?{}:{width:"50%"},onClick:()=>{J.link_url&&window.open(J.link_url,"_blank")},children:s.jsx("div",{className:"relative h-48",children:J.image_url?s.jsx("img",{src:J.image_url,alt:J.title,className:"w-full h-full object-cover md:object-contain",onError:Ne=>{const _e=Ne.target;_e.style.display="none",_e.parentElement&&(_e.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)")}}):s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/80 to-purple-600/80 flex items-center justify-center",children:s.jsx("h3",{className:"text-white text-lg font-bold text-center px-4",children:J.title})})})},`${J.id}-${le}`)})}),T.length>1&&s.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-1",children:T.map((J,le)=>s.jsx("button",{onClick:()=>C(le+1),className:`w-2 h-2 rounded-full transition-colors ${le===(R-1+T.length)%T.length?"bg-blue-500":"bg-gray-300"}`},le))})]}):s.jsx("div",{className:"h-48 bg-gray-100 rounded-2xl shadow-lg flex items-center justify-center mx-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx(qt,{className:"h-6 w-6 text-gray-400"})}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No promotional banners available"})]})})}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Earnings"}),s.jsxs(te,{variant:"outline",className:"text-gray-700 text-sm px-3 py-2 h-auto flex items-center gap-2",onClick:()=>e("/vendor/sales"),children:[s.jsx(sa,{className:"h-4 w-4"}),"View Transactions",s.jsx(xT,{className:"h-4 w-4"})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Today's Earnings"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rs",(u.todaysEarnings||0).toFixed(2)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Earnings"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["Rs",(u.totalRevenue||0).toFixed(2)]})]})]}),s.jsx($e,{children:s.jsx(ze,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Earning in ",new Date().toLocaleDateString("en-US",{month:"long"})]}),s.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["Rs",u.monthlyEarnings.toFixed(2)," ",s.jsxs("span",{className:"text-green-600",children:["+",u.monthlyGrowth,"%"]})]})]}),s.jsx("div",{className:"flex items-end gap-1 h-8",children:S.map((J,le)=>{const ye=Math.max(...S,1),ke=J>0?Math.max(4,J/ye*24):2,Ne=le===S.length-1;return s.jsx("div",{className:`w-2 rounded-t ${Ne?"bg-green-500":J>0?"bg-blue-400":"bg-gray-200"}`,style:{height:`${ke}px`}},le)})})]})})})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Orders"}),s.jsx(te,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",onClick:()=>e("/vendor/orders"),children:"View All"})]}),s.jsx("div",{className:`space-y-3 ${p.length>7?"max-h-96 overflow-y-auto":""}`,children:p.length===0?s.jsx($e,{children:s.jsxs(ze,{className:"p-6 text-center",children:[s.jsx(qt,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No orders today"})]})}):p.map(J=>{var _e;const le=Y(J.status),ye=le.icon,ke=J.created_at?new Date(J.created_at):new Date,Ne=Math.floor((Date.now()-ke.getTime())/(1e3*60));return s.jsx($e,{className:`border-l-4 border-l-${le.color}-500 cursor-pointer hover:shadow-md transition-shadow`,onClick:()=>e(`/vendor/orders?tab=${J.status}&orderId=${J.id}`),children:s.jsxs(ze,{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ye,{className:`h-4 w-4 text-${le.color}-500`}),s.jsx("span",{className:`text-xs font-medium text-${le.textColor} bg-${le.bgColor} px-2 py-1 rounded-full`,children:le.label})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["#",J.order_number]})]}),s.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:J.status==="pending"?"New order received":J.status==="delivered"?"Order delivered successfully":"Order in progress"}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(J.total_amount||0).toFixed(2),"  ",((_e=J.items)==null?void 0:_e.length)||0," items  ",Ne<60?`${Ne} min ago`:`${Math.floor(Ne/60)} hours ago`]})]})},J.id)})})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Best Selling Products"}),s.jsx(te,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",children:"View All"})]}),s.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-3 overflow-x-auto md:overflow-visible",children:s.jsx("div",{className:"flex gap-3 pb-2 md:contents",children:v.map(J=>{var le,ye;return s.jsx($e,{className:"w-32 flex-shrink-0 md:w-auto md:flex-shrink",children:s.jsx(ze,{className:"md:p-2 p-3",children:s.jsxs("div",{className:"md:space-y-1 space-y-2",children:[s.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:((ye=(le=J.images)==null?void 0:le[0])==null?void 0:ye.image_url)||"/api/placeholder/80/80",alt:J.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:J.name}),s.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(J.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between md:text-[10px] text-xs",children:[s.jsxs("span",{className:"text-green-600 font-medium",children:[J.sold," sold"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vs,{className:"md:h-2 md:w-2 h-3 w-3 text-yellow-400 fill-current"}),s.jsx("span",{className:"text-gray-600",children:J.rating})]})]}),s.jsxs("div",{className:"md:text-[10px] text-xs text-gray-500",children:["Stock: ",J.quantity]})]})})},J.id)})})})]}),y.length>0&&s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Featured Products"}),s.jsx(te,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",children:"View All"})]}),s.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-3 overflow-x-auto md:overflow-visible",children:s.jsx("div",{className:"flex gap-3 pb-2 md:contents",children:y.map(J=>{var le,ye;return s.jsx($e,{className:"w-32 flex-shrink-0 relative md:w-auto md:flex-shrink",children:s.jsx(ze,{className:"md:p-2 p-3",children:s.jsxs("div",{className:"md:space-y-1 space-y-2",children:[s.jsxs("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden relative",children:[s.jsx("img",{src:((ye=(le=J.images)==null?void 0:le[0])==null?void 0:ye.image_url)||"/api/placeholder/80/80",alt:J.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white md:text-[10px] text-xs px-1 py-0.5 rounded-full font-bold shadow-md",children:""})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:J.name}),s.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(J.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between md:text-[10px] text-xs",children:[s.jsxs("span",{className:"text-blue-600 font-medium",children:[J.total_sold||0," sold"]}),s.jsx("span",{className:`px-1 py-0.5 rounded md:text-[10px] text-xs ${J.quantity>10?"bg-green-100 text-green-700":J.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:J.quantity>10?"In Stock":J.quantity>0?"Low":"Out"})]})]})})},J.id)})})})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Products"}),s.jsxs(te,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto flex items-center gap-1",onClick:()=>e("/vendor/products"),children:[s.jsx(qs,{className:"h-3 w-3"}),"Manage"]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-w-full",children:j.map(J=>{var le,ye;return s.jsx($e,{className:"overflow-hidden",children:s.jsx(ze,{className:"md:p-2 p-3",children:s.jsxs("div",{className:"md:space-y-1 space-y-2",children:[s.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded overflow-hidden",children:s.jsx("img",{src:((ye=(le=J.images)==null?void 0:le[0])==null?void 0:ye.image_url)||"/api/placeholder/60/60",alt:J.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:J.name}),s.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(J.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"md:text-[10px] text-xs text-gray-500",children:["Stock: ",J.quantity]}),s.jsx("span",{className:`md:text-[10px] text-xs px-2 py-1 rounded-full ${J.quantity>10?"bg-green-100 text-green-700":J.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:J.quantity>10?"Active":J.quantity>0?"Low Stock":"Out of Stock"})]})]})})},J.id)})})]})]})})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Yr,{className:"h-8 w-8 text-yellow-600"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Account Under Review"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Your vendor application is being reviewed by our team. You'll receive an email notification once approved."}),s.jsx(te,{onClick:()=>e("/vendor/onboarding"),variant:"outline",className:"w-full",children:"Back to Application"})]})})},Q4=_.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:it("w-full caption-bottom text-sm",e),...t})}));Q4.displayName="Table";const eM=_.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:it("[&_tr]:border-b",e),...t}));eM.displayName="TableHeader";const tM=_.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:it("[&_tr:last-child]:border-0",e),...t}));tM.displayName="TableBody";const Lre=_.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:it("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Lre.displayName="TableFooter";const G0=_.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:it("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));G0.displayName="TableRow";const Ka=_.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:it("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Ka.displayName="TableHead";const Za=_.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:it("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Za.displayName="TableCell";const Ire=_.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:it("mt-4 text-sm text-muted-foreground",e),...t}));Ire.displayName="TableCaption";const tu=[{id:"ORD-001",customer:"John Doe",product:"Wireless Headphones",quantity:2,amount:"4,998",status:"Pending",date:"2024-01-15",address:"123 Main St, City"},{id:"ORD-002",customer:"Jane Smith",product:"Smart Watch",quantity:1,amount:"12,999",status:"Processing",date:"2024-01-14",address:"456 Oak Ave, City"},{id:"ORD-003",customer:"Mike Johnson",product:"Laptop Stand",quantity:3,amount:"2,997",status:"Shipped",date:"2024-01-13",address:"789 Pine Rd, City"},{id:"ORD-004",customer:"Sarah Wilson",product:"Bluetooth Speaker",quantity:1,amount:"3,499",status:"Delivered",date:"2024-01-12",address:"321 Elm St, City"}],g2={Pending:"bg-yellow-100 text-yellow-800",Processing:"bg-blue-100 text-blue-800",Shipped:"bg-purple-100 text-purple-800",Delivered:"bg-green-100 text-green-800"};function Mre(){const e=lt(),[t,n]=_.useState(""),[r,a]=_.useState("all"),[i,o]=_.useState(!1),[l,d]=_.useState("Tools"),h=tu.filter(f=>{const u=f.customer.toLowerCase().includes(t.toLowerCase())||f.product.toLowerCase().includes(t.toLowerCase())||f.id.toLowerCase().includes(t.toLowerCase()),m=r==="all"||f.status.toLowerCase()===r.toLowerCase();return u&&m});return s.jsx(rs,{title:"Tools",children:s.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 pt-1 pb-16",children:[s.jsx("div",{className:"bg-white p-4 border-b mb-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:s.jsx(Ns,{className:"h-6 w-6 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Business Tools"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage your products, orders, and business operations"})]})]}),s.jsxs(bc,{open:i,onOpenChange:o,children:[s.jsx(nI,{asChild:!0,children:s.jsxs(te,{size:"sm",children:[s.jsx(Ns,{className:"mr-2 h-4 w-4"})," Create Order"]})}),s.jsxs(tl,{className:"sm:max-w-[500px] rounded-lg",children:[s.jsxs(sl,{children:[s.jsx(nl,{className:"text-lg font-semibold",children:"Create New Order"}),s.jsx(aI,{className:"text-sm text-gray-600",children:"Fill in the details below to create a new order for your customer."})]}),s.jsxs("div",{className:"grid gap-3 py-3",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"customer",className:"text-sm font-medium",children:"Customer Name"}),s.jsx(je,{id:"customer",placeholder:"Enter customer name",className:"h-9"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"product",className:"text-sm font-medium",children:"Product"}),s.jsxs(Yt,{children:[s.jsx(Kt,{className:"h-9",children:s.jsx(Xt,{placeholder:"Select product"})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"headphones",children:"Wireless Headphones"}),s.jsx(st,{value:"watch",children:"Smart Watch"}),s.jsx(st,{value:"stand",children:"Laptop Stand"}),s.jsx(st,{value:"speaker",children:"Bluetooth Speaker"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"quantity",className:"text-sm font-medium",children:"Quantity"}),s.jsx(je,{id:"quantity",type:"number",placeholder:"1",className:"h-9"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"amount",className:"text-sm font-medium",children:"Amount"}),s.jsx(je,{id:"amount",placeholder:"0.00",className:"h-9"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"address",className:"text-sm font-medium",children:"Delivery Address"}),s.jsx(Ys,{id:"address",placeholder:"Enter delivery address",className:"h-20"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{htmlFor:"notes",className:"text-sm font-medium",children:"Notes"}),s.jsx(Ys,{id:"notes",placeholder:"Any special instructions...",className:"h-16"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:()=>o(!1),children:"Cancel"}),s.jsx(te,{size:"sm",onClick:()=>o(!1),children:"Create Order"})]})]})]})]})}),s.jsxs($e,{className:"mb-4 border border-gray-200",children:[s.jsx(Ct,{className:"bg-gray-50 border-b border-gray-200 p-3",children:s.jsxs(Tt,{className:"flex items-center gap-2 text-base",children:[s.jsx("div",{className:"p-1.5 bg-white rounded-md shadow-sm",children:s.jsx(Ns,{className:"h-4 w-4 text-gray-700"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-900 font-bold text-sm",children:"Business Functions"}),s.jsx("p",{className:"text-xs text-gray-600 font-normal mt-0.5",children:"Manage your core business operations"})]})]})}),s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-2",children:[s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/add-products"),children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Add Products"}),s.jsx(Ye,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full text-[10px]",children:"New"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/products"),children:[s.jsx("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-green-200 group-hover:to-green-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Products"}),s.jsx(Ye,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full text-[10px]",children:"New"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/orders"),children:[s.jsx("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-purple-200 group-hover:to-purple-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Orders"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/return-orders"),children:[s.jsx("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-orange-200 group-hover:to-orange-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Return Order"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/reviews"),children:[s.jsx("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-yellow-200 group-hover:to-yellow-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Manage Reviews"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/income"),children:[s.jsx("div",{className:"bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-emerald-200 group-hover:to-emerald-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"My Income"})]})]})})]}),s.jsxs($e,{className:"mb-4 rounded-lg border border-gray-200",children:[s.jsx(Ct,{className:"bg-gray-50 p-3 border-b border-gray-200",children:s.jsx(Tt,{className:"text-base font-semibold text-gray-900",children:"Business Upgrading"})}),s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-lg p-2 flex-shrink-0",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-gray-700 font-medium",children:"Business Advisor"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Get expert guidance"})]}),s.jsx(Ye,{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"New"})]})})]}),s.jsx($e,{className:"mb-4 rounded-lg border border-gray-200",children:s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Yo,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),s.jsx(je,{placeholder:"Search orders...",value:t,onChange:f=>n(f.target.value),className:"pl-8 h-9 text-sm"})]})}),s.jsxs(Yt,{value:r,onValueChange:a,children:[s.jsxs(Kt,{className:"w-full sm:w-[160px] h-9 text-sm",children:[s.jsx(aa,{className:"mr-2 h-3 w-3"}),s.jsx(Xt,{placeholder:"Filter by status"})]}),s.jsxs(Zt,{children:[s.jsx(st,{value:"all",children:"All Status"}),s.jsx(st,{value:"pending",children:"Pending"}),s.jsx(st,{value:"processing",children:"Processing"}),s.jsx(st,{value:"shipped",children:"Shipped"}),s.jsx(st,{value:"delivered",children:"Delivered"})]})]})]})})}),s.jsxs($e,{className:"hidden md:block mb-4 rounded-lg border border-gray-200",children:[s.jsx(Ct,{className:"p-4",children:s.jsx(Tt,{className:"text-base font-semibold",children:"Recent Orders"})}),s.jsx(ze,{className:"p-4",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Q4,{children:[s.jsx(eM,{children:s.jsxs(G0,{children:[s.jsx(Ka,{className:"text-xs",children:"Order ID"}),s.jsx(Ka,{className:"text-xs",children:"Customer"}),s.jsx(Ka,{className:"text-xs",children:"Product"}),s.jsx(Ka,{className:"text-xs",children:"Qty"}),s.jsx(Ka,{className:"text-xs",children:"Amount"}),s.jsx(Ka,{className:"text-xs",children:"Status"}),s.jsx(Ka,{className:"text-xs",children:"Date"}),s.jsx(Ka,{className:"text-right text-xs",children:"Actions"})]})}),s.jsx(tM,{children:h.slice(0,3).map(f=>s.jsxs(G0,{className:"h-12",children:[s.jsx(Za,{className:"text-sm font-medium",children:f.id}),s.jsx(Za,{className:"text-sm",children:f.customer}),s.jsx(Za,{className:"text-sm",children:f.product}),s.jsx(Za,{className:"text-sm",children:f.quantity}),s.jsx(Za,{className:"text-sm",children:f.amount}),s.jsx(Za,{children:s.jsx(Ye,{className:`${g2[f.status]} text-xs px-2 py-1`,children:f.status})}),s.jsx(Za,{className:"text-sm",children:f.date}),s.jsx(Za,{className:"text-right",children:s.jsxs(Hc,{children:[s.jsx(Wc,{asChild:!0,children:s.jsx(te,{variant:"ghost",className:"h-6 w-6 p-0",children:s.jsx(n1,{className:"h-3 w-3"})})}),s.jsxs(hl,{align:"end",children:[s.jsxs(Po,{className:"text-xs",children:[s.jsx(Im,{className:"mr-2 h-3 w-3"})," Edit"]}),s.jsx(Po,{className:"text-xs",children:"View Details"}),s.jsxs(Po,{className:"text-red-600 text-xs",children:[s.jsx(ro,{className:"mr-2 h-3 w-3"})," Delete"]})]})]})})]},f.id))})]})})})]}),s.jsxs("div",{className:"md:hidden space-y-3",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Recent Orders"}),h.slice(0,2).map(f=>s.jsxs($e,{className:"p-3 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:f.id}),s.jsx("p",{className:"text-xs text-gray-600",children:f.customer})]}),s.jsx(Ye,{className:`${g2[f.status]} text-xs px-2 py-1`,children:f.status})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Product:"}),s.jsx("span",{className:"font-medium",children:f.product})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Qty:"}),s.jsx("span",{className:"font-medium",children:f.quantity})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Amount:"}),s.jsx("span",{className:"font-semibold text-orange-600",children:f.amount})]})]}),s.jsx("div",{className:"flex justify-end mt-3",children:s.jsxs(Hc,{children:[s.jsx(Wc,{asChild:!0,children:s.jsxs(te,{variant:"outline",size:"sm",className:"h-7 text-xs border-gray-300",children:[s.jsx(n1,{className:"h-3 w-3 mr-1"})," Actions"]})}),s.jsxs(hl,{align:"end",children:[s.jsxs(Po,{className:"text-xs",children:[s.jsx(Im,{className:"mr-2 h-3 w-3"})," Edit"]}),s.jsx(Po,{className:"text-xs",children:"View Details"}),s.jsxs(Po,{className:"text-red-600 text-xs",children:[s.jsx(ro,{className:"mr-2 h-3 w-3"})," Delete"]})]})]})})]},f.id))]}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-4 mb-4",children:[s.jsxs($e,{className:"rounded-lg border border-gray-200",children:[s.jsx(Ct,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Tt,{className:"text-xs font-medium text-gray-900",children:"Total Orders"})}),s.jsxs(ze,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:tu.length}),s.jsx("p",{className:"text-xs text-gray-600",children:"+2 from yesterday"})]})]}),s.jsxs($e,{className:"rounded-lg border border-gray-200",children:[s.jsx(Ct,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Tt,{className:"text-xs font-medium text-gray-900",children:"Pending"})}),s.jsxs(ze,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:tu.filter(f=>f.status==="Pending").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Requires attention"})]})]}),s.jsxs($e,{className:"rounded-lg border border-gray-200",children:[s.jsx(Ct,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Tt,{className:"text-xs font-medium text-gray-900",children:"Processing"})}),s.jsxs(ze,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:tu.filter(f=>f.status==="Processing").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"In progress"})]})]}),s.jsxs($e,{className:"rounded-lg border border-gray-200",children:[s.jsx(Ct,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Tt,{className:"text-xs font-medium text-gray-900",children:"Completed"})}),s.jsxs(ze,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:tu.filter(f=>f.status==="Delivered").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Successfully delivered"})]})]})]}),s.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 md:hidden flex justify-around items-center p-3 shadow-md",children:[s.jsxs("button",{onClick:()=>d("Home"),className:`flex flex-col items-center text-gray-500 ${l==="Home"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),s.jsxs("button",{onClick:()=>d("Tools"),className:`flex flex-col items-center text-gray-500 ${l==="Tools"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Tools"})]}),s.jsxs("button",{onClick:()=>d("Messages"),className:`flex flex-col items-center text-gray-500 ${l==="Messages"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Messages"})]}),s.jsxs("button",{onClick:()=>d("Me"),className:`flex flex-col items-center text-gray-500 ${l==="Me"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Me"})]})]})]})})}const Dre=()=>{const[e,t]=_.useState([]),[n,r]=_.useState(!0),[a,i]=_.useState("all"),[o,l]=_.useState(!1),[d,h]=_.useState(""),[f,u]=_.useState(""),[m,p]=_.useState(1),[w,v]=_.useState(1),[x,y]=_.useState(0),b=20,[j,N]=_.useState({totalSales:0,totalRefunds:0,netEarnings:0,todaySales:0,monthSales:0});_.useEffect(()=>{P()},[d,f,m]);const S=M=>{p(M)},P=async()=>{try{r(!0);const M=new URLSearchParams({page:m.toString(),page_size:b.toString()});d&&M.append("date_from",d),f&&M.append("date_to",f);const{response:Z,data:X}=await Ve(`/vendor/orders/?${M}`);if(Z.ok&&X){const U=X.results||X||[];v(Math.ceil((X.count||U.length)/b)),y(X.count||U.length);const F=[];U.forEach(J=>{var le,ye,ke;(J.status==="confirmed"||J.status==="delivered")&&F.push({id:J.id,order_number:J.order_number,customer_name:((le=J.customer_details)==null?void 0:le.username)||J.delivery_name,amount:parseFloat(J.total_amount),type:"sale",status:J.status==="delivered"?"completed":"confirmed",created_at:J.confirmed_at||J.created_at,items_count:((ye=J.items)==null?void 0:ye.length)||0}),((ke=J.refunds)==null?void 0:ke.length)>0&&J.refunds.forEach(Ne=>{var _e,ne;Ne.status==="completed"&&F.push({id:`refund-${Ne.id}`,order_number:J.order_number,customer_name:((_e=J.customer_details)==null?void 0:_e.username)||J.delivery_name,amount:-parseFloat(Ne.approved_amount||Ne.requested_amount),type:"refund",status:"completed",created_at:Ne.completed_at||Ne.created_at,items_count:((ne=J.items)==null?void 0:ne.length)||0})})}),F.sort((J,le)=>new Date(le.created_at).getTime()-new Date(J.created_at).getTime());let B=F;if(d&&f){const J=new Date(d),le=new Date(f);le.setHours(23,59,59,999),B=F.filter(ye=>{const ke=new Date(ye.created_at);return ke>=J&&ke<=le})}t(B);const z=F.filter(J=>J.type==="sale").reduce((J,le)=>J+le.amount,0),H=Math.abs(F.filter(J=>J.type==="refund").reduce((J,le)=>J+le.amount,0)),q=z-H,W=new Date().toDateString(),Y=F.filter(J=>new Date(J.created_at).toDateString()===W&&J.type==="sale").reduce((J,le)=>J+le.amount,0),V=new Date().getMonth(),G=new Date().getFullYear(),ie=F.filter(J=>{const le=new Date(J.created_at);return le.getMonth()===V&&le.getFullYear()===G&&J.type==="sale"}).reduce((J,le)=>J+le.amount,0);N({totalSales:z,totalRefunds:H,netEarnings:q,todaySales:Y,monthSales:ie})}}catch(M){console.error("Error fetching sales data:",M)}finally{r(!1)}},T=M=>M==="all"?e:M==="sales"?e.filter(Z=>Z.type==="sale"):M==="refunds"?e.filter(Z=>Z.type==="refund"):e,E=()=>{const M=[["Date","Time","Type","Order Number","Customer","Amount","Status","Items"].join(","),...e.map(F=>[D(F.created_at),A(F.created_at),F.type,F.order_number,`"${F.customer_name}"`,Math.abs(F.amount).toFixed(2),F.status,F.items_count].join(","))].join(`
`),Z=new Blob([M],{type:"text/csv"}),X=window.URL.createObjectURL(Z),U=document.createElement("a");U.href=X,U.download=`sales-report-${d||"all"}-${f||new Date().toISOString().split("T")[0]}.csv`,U.click(),window.URL.revokeObjectURL(X)},I=()=>{const M=new Date().toLocaleDateString(),Z=d&&f?`${d} to ${f}`:"All Time",X=`
===========================================
           SALES & EARNINGS REPORT
===========================================
Generated: ${M}
Period: ${Z}

SUMMARY
-------------------------------------------
Total Sales: Rs${j.totalSales.toFixed(2)}
Total Refunds: Rs${j.totalRefunds.toFixed(2)}
Net Earnings: Rs${j.netEarnings.toFixed(2)}
Today's Sales: Rs${j.todaySales.toFixed(2)}
This Month: Rs${j.monthSales.toFixed(2)}

TRANSACTIONS (${e.length} records)
-------------------------------------------
${e.map(F=>`${D(F.created_at)} ${A(F.created_at)} | ${F.type.toUpperCase().padEnd(6)} | ${F.order_number.padEnd(12)} | Rs${Math.abs(F.amount).toFixed(2).padStart(8)} | ${F.customer_name}`).join(`
`)}

===========================================
    `,U=window.open("","_blank");U==null||U.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${X}</pre>`),U==null||U.print()},O=()=>{const M=`Sales Report

Total Sales: Rs ${j.totalSales.toFixed(2)}
Total Refunds: Rs ${j.totalRefunds.toFixed(2)}
Net Earnings: Rs ${j.netEarnings.toFixed(2)}

Transactions: ${e.length}`;if(navigator.share)navigator.share({title:"Sales Report",text:M});else{const Z=`https://wa.me/?text=${encodeURIComponent(M)}`;window.open(Z,"_blank")}},R=()=>{p(1),P(),l(!1)},C=()=>{h(""),u(""),p(1),P(),l(!1)},D=M=>new Date(M).toLocaleDateString(),A=M=>new Date(M).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return s.jsx(rs,{title:"Sales & Earnings",children:s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx($e,{children:s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(sa,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Total Sales"}),s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",j.totalSales.toFixed(2)]})]})]})})}),s.jsx($e,{children:s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(CT,{className:"h-4 w-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Total Refunds"}),s.jsxs("p",{className:"text-sm font-bold text-red-600",children:["Rs",j.totalRefunds.toFixed(2)]})]})]})})})]}),s.jsx($e,{children:s.jsx(ze,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Net Earnings"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rs",j.netEarnings.toFixed(2)]}),s.jsxs("div",{className:"flex justify-between mt-3 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Today"}),s.jsxs("p",{className:"font-semibold",children:["Rs",j.todaySales.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"This Month"}),s.jsxs("p",{className:"font-semibold",children:["Rs",j.monthSales.toFixed(2)]})]})]})]})})})]}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sales Transactions"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:I,children:s.jsx(sw,{className:"h-4 w-4"})}),s.jsx(te,{variant:"outline",size:"sm",onClick:E,children:s.jsx(uc,{className:"h-4 w-4"})}),s.jsx(te,{variant:"outline",size:"sm",onClick:O,children:s.jsx(Th,{className:"h-4 w-4"})}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>l(!0),children:s.jsx(aa,{className:"h-4 w-4"})}),s.jsx(te,{variant:"outline",size:"sm",onClick:P,children:s.jsx(La,{className:"h-4 w-4"})})]})]}),s.jsxs(Fa,{value:a,onValueChange:i,className:"w-full",children:[s.jsx("div",{className:"border-b border-gray-100 overflow-x-auto",children:s.jsxs(ia,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[s.jsxs(Lt,{value:"all",className:"text-xs py-2 px-3",children:["All (",e.length,")"]}),s.jsxs(Lt,{value:"sales",className:"text-xs py-2 px-3",children:["Sales (",e.filter(M=>M.type==="sale").length,")"]}),s.jsxs(Lt,{value:"refunds",className:"text-xs py-2 px-3",children:["Refunds (",e.filter(M=>M.type==="refund").length,")"]})]})}),s.jsx(yt,{value:"all",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:n?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(La,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading transactions..."})]}):T("all").length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(qt,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No transactions found"})]}):T("all").map(M=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${M.type==="sale"?"bg-green-100":"bg-red-100"}`,children:M.type==="sale"?s.jsx(Zu,{className:"h-5 w-5 text-green-600"}):s.jsx(Yu,{className:"h-5 w-5 text-red-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[M.type==="sale"?"Sale":"Refund"," - ",M.order_number]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[M.customer_name,"  ",M.items_count," items"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[D(M.created_at)," at ",A(M.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:`text-sm font-bold ${M.type==="sale"?"text-green-600":"text-red-600"}`,children:[M.type==="sale"?"+":"","Rs",Math.abs(M.amount).toFixed(2)]}),s.jsx(Ye,{variant:"default",className:"text-xs",children:M.status})]})]})},M.id))})}),s.jsx(yt,{value:"sales",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:T("sales").map(M=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Zu,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Sale - ",M.order_number]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[M.customer_name,"  ",M.items_count," items"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[D(M.created_at)," at ",A(M.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+Rs",M.amount.toFixed(2)]}),s.jsx(Ye,{variant:"default",className:"text-xs",children:"completed"})]})]})},M.id))})}),s.jsx(yt,{value:"refunds",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:T("refunds").map(M=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(Yu,{className:"h-5 w-5 text-red-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Refund - ",M.order_number]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[M.customer_name,"  ",M.items_count," items"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[D(M.created_at)," at ",A(M.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-red-600",children:["Rs",Math.abs(M.amount).toFixed(2)]}),s.jsx(Ye,{variant:"secondary",className:"text-xs",children:"refunded"})]})]})},M.id))})})]})]})}),w>1&&s.jsx("div",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(m-1)*b+1," to ",Math.min(m*b,x)," of ",x," transactions"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:()=>S(m-1),disabled:m===1,children:"Previous"}),s.jsxs("span",{className:"text-sm font-medium",children:[m," of ",w]}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>S(m+1),disabled:m===w,children:"Next"})]})]})}),s.jsx(An,{open:o,onOpenChange:l,children:s.jsxs(wn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(On,{className:"pb-4",children:s.jsx(Rn,{children:"Filter by Date Range"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"From Date"}),s.jsx(je,{type:"date",value:d,onChange:M=>h(M.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"To Date"}),s.jsx(je,{type:"date",value:f,onChange:M=>u(M.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(te,{onClick:R,className:"flex-1",children:"Apply Filter"}),s.jsx(te,{variant:"outline",onClick:C,className:"flex-1",children:"Clear"})]}),(d||f)&&s.jsx("div",{className:"pt-4 border-t",children:s.jsx("p",{className:"text-sm text-gray-600",children:d&&f?`Showing: ${d} to ${f}`:d?`From: ${d}`:f?`Until: ${f}`:""})})]})]})})]})})},Fre=async()=>{var e;try{console.log(" Starting authentication verification...");const t=await Ae.getToken(),n=await Ae.getUser();console.log(" Main Auth Service:",{hasToken:!!t,tokenPreview:t?`${t.substring(0,10)}...`:"NO TOKEN",hasUser:!!n,userType:n==null?void 0:n.user_type,availableRoles:n==null?void 0:n.available_roles});try{const{simplePersistentAuth:r}=await Ue(async()=>{const{simplePersistentAuth:i}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:i}},void 0),a=await r.getVendorAuth();console.log(" Vendor Persistent Auth:",{hasVendorAuth:!!a,tokenPreview:a!=null&&a.token?`${a.token.substring(0,10)}...`:"NO TOKEN",hasUser:!!(a!=null&&a.user),userType:(e=a==null?void 0:a.user)==null?void 0:e.user_type,isVendorLoggedIn:await r.isVendorLoggedIn()}),t&&(a!=null&&a.token)&&t!==a.token&&(console.log(" TOKEN MISMATCH DETECTED!"),console.log("Main token:",t.substring(0,15)+"..."),console.log("Vendor token:",a.token.substring(0,15)+"..."),window.location.pathname.startsWith("/vendor")&&(console.log(" Syncing main auth with vendor token..."),await Ae.setAuth(a.token,a.user)))}catch(r){console.error(" Error checking vendor auth:",r)}if(typeof localStorage<"u"){const r=localStorage.getItem("token"),a=localStorage.getItem("user"),i=localStorage.getItem("vendor_token"),o=localStorage.getItem("vendor_user");console.log(" LocalStorage Direct Check:",{hasLocalToken:!!r,hasLocalUser:!!a,hasVendorToken:!!i,hasVendorUser:!!o,localTokenPreview:r?`${r.substring(0,10)}...`:"NO TOKEN",vendorTokenPreview:i?`${i.substring(0,10)}...`:"NO TOKEN"})}return{mainAuth:{token:t,user:n},isAuthenticated:!!(t&&n)}}catch(t){return console.error(" Authentication verification failed:",t),{mainAuth:{token:null,user:null},isAuthenticated:!1,error:t.message}}},$re=async()=>{try{console.log(" Attempting to fix authentication issues...");const{simplePersistentAuth:e}=await Ue(async()=>{const{simplePersistentAuth:n}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:n}},void 0),t=await e.getVendorAuth();return t!=null&&t.token&&(t!=null&&t.user)?(console.log(" Found vendor auth, syncing with main auth..."),await Ae.setAuth(t.token,t.user),console.log(" Auth sync completed"),!0):(console.log(" No valid vendor auth found to sync"),!1)}catch(e){return console.error(" Failed to fix authentication issues:",e),!1}},Bre=[{category:"Account",items:[{id:"profile",title:"Profile Management",subtitle:"Complete profile setup and management",icon:Jr,action:"navigate"},{id:"company",title:"Company Information",subtitle:"Business details and verification",icon:yn,action:"navigate"},{id:"security",title:"Security & Login",subtitle:"Password and authentication",icon:er,action:"navigate"}]},{category:"Business",items:[{id:"products",title:"Product Management",subtitle:"Inventory, pricing, and catalog",icon:qt,action:"navigate"},{id:"analytics",title:"Business Analytics",subtitle:"Sales reports and insights",icon:yT,action:"navigate"}]}];function zre(){const e=lt(),[t,n]=_.useState(null),[r,a]=_.useState(!0),[i,o]=_.useState(""),[l,d]=_.useState({businessName:"",ownerName:"",email:"",phone:"",address:"",description:"",avatar:"/api/placeholder/120/120",isOnline:!0,autoOnlineTime:"09:00",autoOfflineTime:"22:00",totalProducts:0,activeProducts:0,totalSales:0,monthlyRevenue:0});_.useEffect(()=>{h()},[]);const h=async()=>{var p,w;try{console.log(" Verifying authentication before profile fetch..."),await Fre();const{simplePersistentAuth:v}=await Ue(async()=>{const{simplePersistentAuth:P}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:P}},void 0);if(!await v.isVendorLoggedIn()&&(console.log(" No vendor login found, attempting to fix auth issues..."),!await $re())){console.log(" Could not fix auth issues, redirecting to login"),e("/vendor/login");return}const y=await v.getVendorAuth();if(y)console.log(" Restoring vendor auth for API calls"),await Ae.setAuth(y.token,y.user);else{console.log(" No vendor auth found, redirecting to login"),e("/vendor/login");return}const{response:b,data:j}=await Ve("/profile/");if(!b.ok){if(b.status===401){console.log(" Authentication failed, clearing auth and redirecting"),await Ae.clearAuth(),await v.clearVendorAuth(),e("/vendor/login");return}throw new Error("Failed to fetch user profile")}const{response:N,data:S}=await Ve("/vendor-profiles/");if(N.ok&&S){if(S.results&&S.results.length>0){const P=S.results[0];d({businessName:P.business_name||"N/A",ownerName:P.owner_name||j.username,email:P.business_email||j.email,phone:P.business_phone||j.phone_number||"N/A",address:P.business_address||"N/A",description:P.description||"No description",avatar:j.profile_picture?(j.profile_picture.startsWith("http"),j.profile_picture):"/api/placeholder/120/120",isOnline:!0,autoOnlineTime:"09:00",autoOfflineTime:"22:00",totalProducts:24,activeProducts:22,totalSales:1250,monthlyRevenue:45e3})}}else d(P=>({...P,businessName:j.username,ownerName:j.username,email:j.email,phone:j.phone_number||"N/A",avatar:j.profile_picture?(j.profile_picture.startsWith("http"),j.profile_picture):"/api/placeholder/120/120"}))}catch(v){if(console.error("Error fetching profile:",v),(p=v.message)!=null&&p.includes("Authentication")||(w=v.message)!=null&&w.includes("401")){console.log(" Authentication error, redirecting to login");const{simplePersistentAuth:x}=await Ue(async()=>{const{simplePersistentAuth:y}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:y}},void 0);await Ae.clearAuth(),await x.clearVendorAuth(),e("/vendor/login");return}o("Failed to load profile data")}finally{a(!1)}},[f,u]=_.useState({esewa:{enabled:!1,merchantId:"",secretKey:""},khalti:{enabled:!1,publicKey:"",secretKey:""}}),m=p=>{p==="profile"?e("/vendor/profile"):p==="security"?e("/vendor/security"):p==="company"?e("/vendor/company"):p==="products"?e("/vendor/products"):p==="analytics"?e("/vendor/analytics"):n(p)};return t?s.jsx(rs,{title:"Settings",children:s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"p-4",children:[s.jsx(te,{variant:"ghost",onClick:()=>n(null),className:"mb-4",children:" Back to Settings"}),t==="analytics"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Business Analytics"}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Revenue Overview"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",l.monthlyRevenue.toLocaleString()]}),s.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),s.jsx("p",{className:"text-xs text-green-600",children:"+12% from last month"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",(l.monthlyRevenue*.85).toLocaleString()]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Last Month"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Previous period"})]})]})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Sales Metrics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(qt,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Total Orders"})]}),s.jsx("p",{className:"text-xl font-bold",children:l.totalSales}),s.jsx("p",{className:"text-xs text-gray-600",children:"This month"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(sa,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Avg Order Value"})]}),s.jsxs("p",{className:"text-xl font-bold",children:["",Math.round(l.monthlyRevenue/l.totalSales)]}),s.jsx("p",{className:"text-xs text-gray-600",children:"Per order"})]})]})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Product Performance"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Active Products"}),s.jsx("span",{className:"font-semibold",children:l.activeProducts})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Total Products"}),s.jsx("span",{className:"font-semibold",children:l.totalProducts})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Best Seller"}),s.jsx("span",{className:"font-semibold text-green-600",children:"Chicken Momo"})]})]})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Weekly Sales"}),s.jsx("div",{className:"flex items-end justify-between h-32 gap-2",children:[65,45,78,52,89,67,43].map((p,w)=>{const v=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],x=p/100*100;return s.jsxs("div",{className:"flex flex-col items-center flex-1",children:[s.jsx("div",{className:"w-full bg-blue-500 rounded-t mb-1",style:{height:`${x}px`}}),s.jsx("span",{className:"text-xs text-gray-600",children:v[w]})]},w)})})]})})]}),t==="payment"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Payment Settings"}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-green-600 font-bold text-lg",children:"eS"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"eSewa Integration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive payments through eSewa"})]})]}),s.jsx(Vt,{checked:f.esewa.enabled,onCheckedChange:p=>u(w=>({...w,esewa:{...w.esewa,enabled:p}}))})]}),f.esewa.enabled&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium",children:"Merchant ID"}),s.jsx(je,{placeholder:"Enter your eSewa Merchant ID",value:f.esewa.merchantId,onChange:p=>u(w=>({...w,esewa:{...w.esewa,merchantId:p.target.value}}))})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium",children:"Secret Key"}),s.jsx(je,{type:"password",placeholder:"Enter your eSewa Secret Key",value:f.esewa.secretKey,onChange:p=>u(w=>({...w,esewa:{...w.esewa,secretKey:p.target.value}}))})]}),s.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," You can get your eSewa API credentials from your eSewa merchant dashboard."]})})]})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"K"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Khalti Integration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive payments through Khalti"})]})]}),s.jsx(Vt,{checked:f.khalti.enabled,onCheckedChange:p=>u(w=>({...w,khalti:{...w.khalti,enabled:p}}))})]}),f.khalti.enabled&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium",children:"Public Key"}),s.jsx(je,{placeholder:"Enter your Khalti Public Key",value:f.khalti.publicKey,onChange:p=>u(w=>({...w,khalti:{...w.khalti,publicKey:p.target.value}}))})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium",children:"Secret Key"}),s.jsx(je,{type:"password",placeholder:"Enter your Khalti Secret Key",value:f.khalti.secretKey,onChange:p=>u(w=>({...w,khalti:{...w.khalti,secretKey:p.target.value}}))})]}),s.jsx("div",{className:"bg-purple-50 p-3 rounded-lg",children:s.jsxs("p",{className:"text-sm text-purple-800",children:[s.jsx("strong",{children:"Note:"})," You can get your Khalti API credentials from your Khalti merchant dashboard."]})})]})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Payment Status"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"eSewa Status"}),s.jsx(Ye,{className:f.esewa.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:f.esewa.enabled?"Active":"Inactive"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Khalti Status"}),s.jsx(Ye,{className:f.khalti.enabled?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800",children:f.khalti.enabled?"Active":"Inactive"})]})]})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(te,{className:"bg-blue-600 hover:bg-blue-700",children:"Save Payment Settings"})})]}),t==="notifications"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Notification Settings"}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Notification Preferences"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"New Orders"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Get notified when you receive new orders"})]}),s.jsx(Vt,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Payment Updates"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Notifications for payment confirmations"})]}),s.jsx(Vt,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Low Stock Alerts"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Alert when products are running low"})]}),s.jsx(Vt,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"System Updates"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Important system and policy updates"})]}),s.jsx(Vt,{})]})]})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Delivery Methods"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Push Notifications"}),s.jsx(Vt,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Email Notifications"}),s.jsx(Vt,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"SMS Notifications"}),s.jsx(Vt,{})]})]})]})})]})]})})}):r?s.jsx(rs,{title:"Settings",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):i?s.jsx(rs,{title:"Settings",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:i}),s.jsx(te,{onClick:h,children:"Retry"})]})})}):s.jsx(rs,{title:"Settings",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b",children:s.jsxs("div",{className:"p-4 flex items-center gap-3",children:[s.jsxs(fi,{className:"h-14 w-14",children:[s.jsx(Wr,{src:l.avatar}),s.jsx(mi,{className:"text-lg font-bold",children:l.businessName?l.businessName.charAt(0):"U"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:l.businessName||"Business Name"}),s.jsx("p",{className:"text-gray-500 text-xs",children:l.email})]}),s.jsx(Ye,{className:l.isOnline?"bg-green-100 text-green-800 text-xs":"bg-gray-100 text-gray-800 text-xs",children:l.isOnline?"Online":"Offline"})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Account Type"]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Switch between your Customer and Vendor accounts"})]})}),s.jsx(lL,{})]}),s.jsxs(te,{variant:"outline",className:"w-full flex items-center justify-center py-4 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:async()=>{const{simplePersistentAuth:p}=await Ue(async()=>{const{simplePersistentAuth:w}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:w}},void 0);await Ae.clearAuth(),await p.clearVendorAuth(),e("/vendor/login")},children:[s.jsx(tw,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium",children:"Logout"})]}),Bre.map(p=>s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b bg-gray-50",children:s.jsx("h2",{className:"font-semibold text-gray-900",children:p.category})}),s.jsx("div",{className:"divide-y",children:p.items.map(w=>{const v=w.icon;return s.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>m(w.id),"data-section":w.id,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(v,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:w.title}),s.jsx("p",{className:"text-sm text-gray-600",children:w.subtitle})]})]}),s.jsx($c,{className:"h-5 w-5 text-gray-400"})]})},w.id)})})]},p.category))]})]})})}const v2=()=>{var A,M,Z,X,U;const[e,t]=_.useState(null),[n,r]=_.useState([]),[a,i]=_.useState([]),[o,l]=_.useState(""),[d,h]=_.useState(!0),[f,u]=_.useState(1),[m,p]=_.useState(!1),[w,v]=_.useState(!1),[x,y]=_.useState(null),[b,j]=_.useState(0),N=_.useRef(null),S=_.useRef(null);_.useEffect(()=>{P(),T();const B=new URLSearchParams(window.location.search).get("start_conversation");B&&setTimeout(()=>{C(parseInt(B))},500)},[]);const P=async()=>{try{if(!localStorage.getItem("token"))return;const{response:B,data:z}=await Ve("/profile/");B.ok&&z&&y(z)}catch(F){console.error("Failed to fetch current user:",F)}};_.useEffect(()=>{e&&I(e.id)},[e]),_.useEffect(()=>{if(e){const F=setInterval(async()=>{try{const B=await ar.getMessages(e.id),z=Array.isArray(B)?B.reverse():[];i(z),j(z.length)}catch(B){console.error("Failed to fetch messages:",B)}},5e3);return()=>clearInterval(F)}},[e]);const T=async(F=1,B=!1)=>{try{const{response:z,data:H}=await Ve(`messaging/conversations/?page=${F}&page_size=20`);if(!z.ok)throw new Error("Failed to fetch conversations");const W=((H==null?void 0:H.results)||[]).filter((Y,V,G)=>V===G.findIndex(ie=>{var J,le;return((J=ie.other_participant)==null?void 0:J.id)===((le=Y.other_participant)==null?void 0:le.id)}));if(F===1&&!W.some(V=>{var G,ie,J;return((G=V.other_participant)==null?void 0:G.username)==="admin"||((ie=V.other_participant)==null?void 0:ie.id)===1||((J=V.other_participant)==null?void 0:J.username)==="EzzeYway Support"})){const V={id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}};W.unshift(V)}r(B?Y=>[...Y,...W].filter((G,ie,J)=>ie===J.findIndex(le=>{var ye,ke;return((ye=le.other_participant)==null?void 0:ye.id)===((ke=G.other_participant)==null?void 0:ke.id)})):W),p(!!(H!=null&&H.next)),u(F)}catch(z){console.error("Failed to load conversations:",z),F===1&&r([{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}}])}finally{h(!1),v(!1)}},E=async()=>{w||!m||(v(!0),await T(f+1,!0))},I=async F=>{try{const B=await ar.getMessages(F),z=Array.isArray(B)?B.reverse():[];i(z),j(z.length)}catch(B){console.error("Failed to load messages:",B),i([]),j(0)}},O=async()=>{if(!(!o.trim()||!e))try{const F=await ar.sendMessage({conversation_id:e.id,message_type:"text",content:o});i(B=>[...B,F.message]),l("")}catch(F){console.error("Failed to send message:",F)}},R=async F=>{var z;const B=(z=F.target.files)==null?void 0:z[0];if(!(!B||!e))try{const H=await ar.sendMessage({conversation_id:e.id,message_type:B.type.startsWith("image/")?"image":"file",file:B});i(q=>[...q,H.message])}catch(H){console.error("Failed to send file:",H)}},C=async F=>{try{const B=await ar.getOrCreateConversation(F);t(B);const z=new URL(window.location.href);z.searchParams.delete("start_conversation"),z.searchParams.delete("customer_name"),z.searchParams.delete("order_id"),window.history.replaceState({},"",z.toString())}catch(B){console.error("Failed to create conversation:",B)}},D=()=>{var F;(F=N.current)==null||F.scrollIntoView({behavior:"smooth"})};return _.useEffect(()=>{D()},[a]),d?s.jsx(rs,{title:"Messages",children:s.jsx("div",{className:"h-screen bg-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),s.jsx("p",{children:"Loading conversations..."})]})})}):e?s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>t(null),children:s.jsx(Ht,{className:"h-4 w-4"})}),s.jsxs(fi,{className:"h-10 w-10",children:[((A=e.other_participant)==null?void 0:A.username)==="EzzeYway Support"?s.jsx(Wr,{src:"/logo.png"}):s.jsx(Wr,{src:Qt((M=e.other_participant)==null?void 0:M.profile_picture)}),s.jsx(mi,{children:(X=(Z=e.other_participant)==null?void 0:Z.username)==null?void 0:X.charAt(0)})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-sm",children:(U=e.other_participant)==null?void 0:U.username}),s.jsx("p",{className:"text-xs text-gray-500",children:"Online"})]}),s.jsx(te,{variant:"ghost",size:"sm",children:s.jsx(ZF,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(F=>{const B=x&&F.sender.id===x.id;return s.jsx("div",{className:`w-full flex ${B?"justify-end":"justify-start"} mb-2`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow ${B?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[F.message_type==="text"&&s.jsx("p",{className:"text-sm",children:F.content}),F.message_type==="image"&&s.jsx("div",{className:"space-y-2",children:s.jsx("img",{src:Qt(F.file_url),alt:"Shared image",className:"rounded max-w-full h-auto"})}),F.message_type==="file"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wa,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:F.file_name})]}),s.jsxs("div",{className:"flex items-center justify-end mt-1 gap-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(F.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),B&&s.jsx("span",{className:`text-xs ${F.is_read?"text-blue-500":"text-gray-400"}`,children:F.is_read?"":""})]})]})},F.id)}),s.jsx("div",{ref:N})]}),s.jsxs("div",{className:"bg-white border-t p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>{var F;return(F=S.current)==null?void 0:F.click()},children:s.jsx(Sy,{className:"h-4 w-4"})}),s.jsx(je,{value:o,onChange:F=>l(F.target.value),placeholder:"Type a message...",className:"flex-1",onKeyPress:F=>F.key==="Enter"&&O()}),s.jsx(te,{onClick:O,disabled:!o.trim(),children:s.jsx(zp,{className:"h-4 w-4"})})]}),s.jsx("input",{ref:S,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:R,className:"hidden"})]})]}):s.jsx(rs,{title:"Messages",children:s.jsxs("div",{className:"h-screen bg-white flex flex-col",children:[s.jsx("div",{className:"border-b p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-lg font-semibold",children:"Messages"})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(Bp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No conversations yet"}),s.jsx("p",{className:"text-sm",children:"Customers will message you here!"})]}):n.map(F=>{var B,z,H,q,W,Y,V;return s.jsxs("div",{className:"flex items-center gap-3 p-4 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{F.id===0?C(1):t(F)},children:[s.jsxs("div",{className:"relative",children:[s.jsxs(fi,{className:"h-12 w-12",children:[((B=F.other_participant)==null?void 0:B.username)==="EzzeYway Support"?s.jsx(Wr,{src:"/logo.png"}):s.jsx(Wr,{src:Qt((z=F.other_participant)==null?void 0:z.profile_picture)}),s.jsx(mi,{children:(q=(H=F.other_participant)==null?void 0:H.username)==null?void 0:q.charAt(0)})]}),s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm truncate",children:(W=F.other_participant)==null?void 0:W.username}),s.jsx("span",{className:"text-xs text-gray-500",children:F.last_message?new Date(F.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:((Y=F.last_message)==null?void 0:Y.content)||((V=F.last_message)!=null&&V.file_name?` ${F.last_message.file_name}`:"")||(F.id===0?"Start conversation":"No messages yet")})]}),F.unread_count>0&&s.jsx(Ye,{className:"bg-blue-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center",children:F.unread_count})]},F.id)}),m&&s.jsx("div",{className:"p-4 text-center",children:s.jsx(te,{onClick:E,disabled:w,variant:"outline",className:"w-full",children:w?"Loading...":"Load More Conversations"})})]})]})})},Vre=()=>{var Q,ae,ue;const{toast:e}=ns(),[t,n]=_.useState(null),[r,a]=_.useState(null),[i,o]=_.useState(2),[l,d]=_.useState(!1),[h,f]=_.useState(""),[u,m]=_.useState(""),[p,w]=_.useState(""),[v,x]=_.useState(""),[y,b]=_.useState(""),[j,N]=_.useState(!1),[S,P]=_.useState(""),[T,E]=_.useState(null),[I,O]=_.useState("all"),[R,C]=_.useState(1),[D,A]=_.useState([]),M=10,[Z,X]=_.useState(!0),[U,F]=_.useState(!1),[B,z]=_.useState(""),[H,q]=_.useState(!1),[W,Y]=_.useState(new Set),[V,G]=_.useState({});Tg(),_.useEffect(()=>{const re=()=>{const ce=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768;q(ce)};return re(),window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)},[]);const ie=_.useRef(null);_.useEffect(()=>{const re=ce=>{const fe=ce.detail;(fe.type==="order_update"||fe.type==="order_status_change"||fe.type==="refund_update")&&(console.log("WebSocket order update:",fe),J())};return window.addEventListener("websocket_message",re),()=>window.removeEventListener("websocket_message",re)},[]),_.useEffect(()=>{const re=setInterval(()=>{document.hidden||J()},3e4);return()=>clearInterval(re)},[]),_.useEffect(()=>{console.log(" Loading initial orders..."),J();const re=ge=>{ge.detail.type==="order"&&!document.hidden&&window.location.pathname.includes("/vendor/orders")&&(ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{!document.hidden&&window.location.pathname.includes("/vendor/orders")&&J()},2e3))},ce=ge=>{const{orderId:me,status:be,type:Te}=ge.detail;console.log("Order status update received:",{orderId:me,status:be,type:Te}),window.location.pathname.includes("/vendor/orders")&&J()},fe=()=>{!document.hidden&&window.location.pathname.includes("/vendor/orders")&&J()};return window.addEventListener("newNotification",re),window.addEventListener("orderStatusUpdated",ce),document.addEventListener("visibilitychange",fe),()=>{window.removeEventListener("newNotification",re),window.removeEventListener("orderStatusUpdated",ce),document.removeEventListener("visibilitychange",fe),ie.current&&clearTimeout(ie.current)}},[]);const J=async()=>{try{X(!0);const{apiRequest:re}=await Ue(async()=>{const{apiRequest:Te}=await Promise.resolve().then(()=>hs);return{apiRequest:Te}},void 0),ce=new AbortController,fe=setTimeout(()=>ce.abort(),H?8e3:3e4),ge="/vendor/orders/",{response:me,data:be}=await re(ge,{signal:ce.signal});if(clearTimeout(fe),me.ok&&be){const Te=be.results||be||[];console.log(" Orders received:",Te.length);const Se=Te.filter(Pe=>Pe.status==="pending"),Ie=new Set(Se.map(Pe=>Number(Pe.id))),se=[...Ie].filter(Pe=>!W.has(Pe)),we=Se.filter(Pe=>se.includes(Number(Pe.id)));if(we.length>0){console.log(" New orders detected:",we.length,"orders");const{simpleNotificationService:Pe}=await Ue(async()=>{const{simpleNotificationService:Me}=await Promise.resolve().then(()=>rl);return{simpleNotificationService:Me}},void 0);for(const Me of we)try{await Pe.showOrderNotification(Me.order_number,Me.total_amount,Me.id)}catch(Le){console.error("Failed to show notification for order:",Me.order_number,Le)}}Y(Ie),A(Te)}else console.error("Failed to fetch orders:",me.status,be),A([])}catch(re){console.error("Error fetching vendor orders:",re),A([])}finally{X(!1)}},le=re=>{switch(re){case"new":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-orange-100 text-orange-800";case"pending":return"bg-yellow-100 text-yellow-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";case"returned":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ye=re=>{switch(re){case"new":return s.jsx(Kn,{className:"h-3 w-3"});case"confirmed":return s.jsx(qt,{className:"h-3 w-3"});case"pending":return s.jsx(Qn,{className:"h-3 w-3"});case"delivered":return s.jsx(Bc,{className:"h-3 w-3"});case"cancelled":return s.jsx(GF,{className:"h-3 w-3"});case"returned":return s.jsx(Qa,{className:"h-3 w-3"});default:return s.jsx(qt,{className:"h-3 w-3"})}},ke=re=>re==="all"?D:re==="new"?D.filter(ce=>ce.status==="pending"):re==="pending"?D.filter(ce=>ce.status==="confirmed"):re==="shipped"?D.filter(ce=>ce.status==="out_for_delivery"||ce.status==="Out_for_delivery"):re==="delivered"?D.filter(ce=>ce.status==="delivered"):re==="cancelled"?D.filter(ce=>ce.status==="cancelled"):re==="returned"?D.filter(ce=>ce.status==="returned"):re==="returns"?D.filter(ce=>{var fe;return((fe=ce.refunds)==null?void 0:fe.length)>0}):D.filter(ce=>ce.status===re),Ne=(re,ce,fe)=>{A(ge=>ge.map(me=>me.id===re?{...me,status:ce,isNew:ce==="new",estimatedTime:ce==="pending"?"On the way":ce==="delivered"?"Delivered":ce==="confirmed"?"Ready for delivery":me.estimatedTime,...fe}:me))},_e=re=>{const ce=H?15:M;if(I==="new")return H?re.slice(0,ce):re;const fe=(R-1)*ce,ge=fe+ce;return re.slice(fe,ge)},ne=re=>Math.ceil(re.length/M),Ce=re=>{C(re)},ve=async re=>{if(!V[re])try{const ce=await yi.getOrderReviews(re);G(fe=>({...fe,[re]:ce}))}catch(ce){console.error("Error loading order reviews:",ce)}},oe=({orders:re})=>{if(I==="new")return null;const ce=ne(re);return ce<=1?null:s.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(R-1)*M+1,"-",Math.min(R*M,re.length)," of ",re.length," orders"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:()=>Ce(R-1),disabled:R===1,className:"h-7 w-7 p-0",children:s.jsx(wT,{className:"h-3 w-3"})}),s.jsx("div",{className:"flex gap-1",children:Array.from({length:ce},(fe,ge)=>ge+1).map(fe=>s.jsx(te,{variant:R===fe?"default":"outline",size:"sm",onClick:()=>Ce(fe),className:"h-7 w-7 p-0 text-xs",children:fe},fe))}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>Ce(R+1),disabled:R===ce,className:"h-7 w-7 p-0",children:s.jsx($c,{className:"h-3 w-3"})})]})]})},de=({order:re})=>{var ce,fe,ge,me,be,Te,Se;return s.jsxs("div",{className:`p-4 ${re.status==="pending"?"bg-blue-50 border-l-4 border-blue-500":((ce=re.refunds)==null?void 0:ce.length)>0?"bg-orange-50 border-l-4 border-orange-400":"bg-white"} cursor-pointer hover:bg-gray-50 min-h-[120px]`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:re.order_number}),re.status==="pending"&&s.jsx(Kn,{className:"h-3 w-3 text-blue-500 animate-pulse"})]}),s.jsxs(Ye,{className:`${le(re.status)} flex items-center gap-1 text-xs px-2 py-1`,children:[ye(re.status),re.status.charAt(0).toUpperCase()+re.status.slice(1)]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2",children:[((fe=re.items)==null?void 0:fe.length)||0," item",((ge=re.items)==null?void 0:ge.length)!==1?"s":""]}),s.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[(me=re.items)==null?void 0:me.slice(0,H?2:3).map((Ie,se)=>{var we,Pe,Me,Le;return s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center overflow-hidden",children:(Me=(Pe=(we=Ie.product_details)==null?void 0:we.images)==null?void 0:Pe[0])!=null&&Me.image_url?s.jsx("img",{src:Qt(Ie.product_details.images[0].image_url),alt:Ie.product_name,className:"w-full h-full object-cover",loading:"lazy",onError:He=>{He.currentTarget.style.display="none",He.currentTarget.parentElement.innerHTML='<span class="text-xs text-gray-400"></span>'}}):s.jsx("span",{className:"text-xs text-gray-400",children:""})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:Ie.product_name}),s.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:((Le=Ie.product_details)==null?void 0:Le.category)||"Item"}),Ie.product_selections&&Object.keys(Ie.product_selections).length>0&&s.jsx("div",{className:"text-xs text-blue-600 truncate max-w-[80px] mt-1",children:Object.entries(Ie.product_selections).map(([He,_t])=>s.jsxs("div",{className:"capitalize",children:[He,": ",Array.isArray(_t)?_t.join(", "):String(_t)]},He)).slice(0,1)})]})]},se)}),((be=re.items)==null?void 0:be.length)>(H?2:3)&&s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center flex-shrink-0",children:s.jsxs("span",{className:"text-xs text-gray-600",children:["+",re.items.length-(H?2:3)]})})]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[s.jsx(Jr,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate text-gray-700 min-w-0",children:((Te=re.customer_details)==null?void 0:Te.username)||re.delivery_name})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[s.jsx(es,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate text-gray-700 min-w-0",children:re.delivery_address})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[s.jsx("div",{className:"flex flex-col",children:s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(re.total_amount||0).toFixed(2)]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(te,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{n(re),re.status==="delivered"&&ve(re.id)},children:[s.jsx(qs,{className:"h-3 w-3 mr-1"}),"View"]}),re.status==="pending"&&s.jsx(te,{size:"sm",className:"h-7 text-xs bg-green-600 hover:bg-green-700",onClick:async Ie=>{Ie.stopPropagation();try{const{response:se}=await Ve(`/orders/${re.id}/accept/`,{method:"POST"});se.ok&&(Ne(re.id,"confirmed"),o(we=>Math.max(0,we-1)),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:re.id,status:"confirmed",type:"accept"}})),window.dispatchEvent(new CustomEvent("newNotification",{detail:{type:"order",title:`Order #${re.order_number} Accepted`,message:"Order has been accepted by vendor",data:{orderId:re.id,status:"confirmed"}}})),setTimeout(()=>J(),1e3))}catch(se){console.error("Error accepting order:",se)}},children:"Accept"}),((Se=re.status)==null?void 0:Se.toLowerCase())==="out_for_delivery"&&s.jsxs(te,{size:"sm",className:"h-7 text-xs bg-green-600 hover:bg-green-700",onClick:async Ie=>{Ie.stopPropagation();try{const{response:se}=await Ve(`/vendor/orders/${re.id}/update-status/`,{method:"POST",body:JSON.stringify({status:"delivered"})});se.ok&&(Ne(re.id,"delivered"),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:re.id,status:"delivered",type:"deliver"}})),window.dispatchEvent(new CustomEvent("newNotification",{detail:{type:"order",title:`Order #${re.order_number} Delivered`,message:"Order has been marked as delivered",data:{orderId:re.id,status:"delivered"}}})),setTimeout(()=>J(),1e3))}catch(se){console.error("Error delivering order:",se)}},children:[s.jsx(Bc,{className:"h-3 w-3 mr-1"}),"Mark Delivered"]}),re.status==="confirmed"&&s.jsxs(te,{size:"sm",className:"h-7 text-xs bg-blue-600 hover:bg-blue-700",onClick:async Ie=>{var Pe,Me,Le,He,_t;Ie.stopPropagation(),a(re),d(!0);const se=(Pe=re.items)==null?void 0:Pe.some(It=>{var ss;return((ss=It.product_details)==null?void 0:ss.free_delivery)===!0}),we=(Me=re.items)==null?void 0:Me.some(It=>{var ss,ys,ms;return((ss=It.product_details)==null?void 0:ss.custom_delivery_fee_enabled)===!0&&((ys=It.product_details)==null?void 0:ys.custom_delivery_fee)!==null&&((ms=It.product_details)==null?void 0:ms.custom_delivery_fee)!==void 0});if(se)N(!0),b("0"),P("Free delivery");else if(we){const It=((_t=(He=(Le=re.items)==null?void 0:Le.find(ss=>{var ys,ms;return((ys=ss.product_details)==null?void 0:ys.custom_delivery_fee_enabled)===!0&&((ms=ss.product_details)==null?void 0:ms.custom_delivery_fee)!==null}))==null?void 0:He.product_details)==null?void 0:_t.custom_delivery_fee)||0;N(!1),b(It.toString()),P(`Custom fee: ${It}`)}else N(!1),b(""),P("Enter delivery fee")},children:[s.jsx(Qn,{className:"h-3 w-3 mr-1"}),"Ship"]})]})]})]})]})};return s.jsx(rs,{title:"Orders",children:s.jsxs("div",{className:"bg-gray-50 min-h-screen pb-20 max-w-full overflow-x-hidden",children:[Z?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})]}):D.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(qt,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),s.jsx("p",{className:"text-gray-500",children:"Orders will appear here when customers place them."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"flex gap-3 pb-2",children:[s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center border-l-4 border-blue-500",children:[s.jsx("p",{className:"text-xl font-bold text-blue-600",children:D.filter(re=>re.status==="pending").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"New Orders"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-yellow-600",children:D.filter(re=>re.status==="confirmed").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Confirmed"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-purple-600",children:D.filter(re=>re.status==="out_for_delivery"||re.status==="Out_for_delivery").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"On the Way"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-green-600",children:D.filter(re=>re.status==="delivered").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Delivered"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-gray-600",children:D.filter(re=>re.status==="cancelled").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Cancelled"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-orange-600",children:D.filter(re=>{var ce;return((ce=re.refunds)==null?void 0:ce.length)>0}).length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Returns"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-gray-600",children:D.length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Total"})]})]})})}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"})}),s.jsxs(Fa,{value:I,onValueChange:re=>{O(re),C(1)},className:"w-full",children:[s.jsx("div",{className:"border-b border-gray-100 overflow-x-auto scrollbar-hide",children:s.jsxs(ia,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[s.jsxs(Lt,{value:"all",className:"text-xs py-2 px-3 data-[state=active]:bg-gray-50 data-[state=active]:text-gray-600 data-[state=active]:border-b-2 data-[state=active]:border-gray-600 rounded-none whitespace-nowrap flex-shrink-0",children:["All ",s.jsxs("span",{className:"font-bold ml-2",children:["(",D.length,")"]})]}),s.jsxs(Lt,{value:"new",className:"text-xs py-2 px-3 data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 data-[state=active]:border-b-2 data-[state=active]:border-blue-600 rounded-none whitespace-nowrap flex-shrink-0",children:["New ",s.jsxs("span",{className:"font-bold ml-2",children:["(",D.filter(re=>re.status==="pending").length,")"]})]}),s.jsxs(Lt,{value:"pending",className:"text-xs py-2 px-3 data-[state=active]:bg-yellow-50 data-[state=active]:text-yellow-600 data-[state=active]:border-b-2 data-[state=active]:border-yellow-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Confirmed ",s.jsxs("span",{className:"font-bold ml-2",children:["(",D.filter(re=>re.status==="confirmed").length,")"]})]}),s.jsxs(Lt,{value:"shipped",className:"text-xs py-2 px-3 data-[state=active]:bg-purple-50 data-[state=active]:text-purple-600 data-[state=active]:border-b-2 data-[state=active]:border-purple-600 rounded-none whitespace-nowrap flex-shrink-0",children:["On the Way ",s.jsxs("span",{className:"font-bold ml-2",children:["(",D.filter(re=>re.status==="out_for_delivery"||re.status==="Out_for_delivery").length,")"]})]}),s.jsxs(Lt,{value:"delivered",className:"text-xs py-2 px-3 data-[state=active]:bg-green-50 data-[state=active]:text-green-600 data-[state=active]:border-b-2 data-[state=active]:border-green-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Delivered ",s.jsxs("span",{className:"font-bold ml-2",children:["(",D.filter(re=>re.status==="delivered").length,")"]})]}),s.jsxs(Lt,{value:"cancelled",className:"text-xs py-2 px-3 data-[state=active]:bg-gray-50 data-[state=active]:text-gray-600 data-[state=active]:border-b-2 data-[state=active]:border-gray-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Cancelled ",s.jsxs("span",{className:"font-bold ml-2",children:["(",D.filter(re=>re.status==="cancelled").length,")"]})]}),s.jsxs(Lt,{value:"returns",className:"text-xs py-2 px-3 data-[state=active]:bg-orange-50 data-[state=active]:text-orange-600 data-[state=active]:border-b-2 data-[state=active]:border-orange-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Returns ",s.jsxs("span",{className:"font-bold ml-2",children:["(",D.filter(re=>{var ce;return((ce=re.refunds)==null?void 0:ce.length)>0}).length,")"]})]})]})}),s.jsxs(yt,{value:"all",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:_e(D).map(re=>s.jsx(de,{order:re},re.id))}),s.jsx(oe,{orders:D})]}),s.jsxs(yt,{value:"new",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:_e(ke("new")).map(re=>s.jsx(de,{order:re},re.id))}),s.jsx(oe,{orders:ke("new")})]}),s.jsxs(yt,{value:"pending",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:_e(ke("pending")).map(re=>s.jsx(de,{order:re},re.id))}),s.jsx(oe,{orders:ke("pending")})]}),s.jsxs(yt,{value:"shipped",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:_e(ke("shipped")).map(re=>s.jsx(de,{order:re},re.id))}),s.jsx(oe,{orders:ke("shipped")})]}),s.jsxs(yt,{value:"delivered",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:_e(ke("delivered")).map(re=>s.jsx(de,{order:re},re.id))}),s.jsx(oe,{orders:ke("delivered")})]}),s.jsxs(yt,{value:"cancelled",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:_e(ke("cancelled")).map(re=>s.jsx(de,{order:re},re.id))}),s.jsx(oe,{orders:ke("cancelled")})]}),s.jsxs(yt,{value:"returns",className:"mt-0",children:[s.jsxs("div",{className:"divide-y divide-gray-100",children:[_e(ke("returns")).map(re=>{var ce,fe;return s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"bg-white rounded-lg border",children:s.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>{n(re)},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("h3",{className:"font-semibold text-sm text-gray-900",children:["Order #",re.order_number]})}),s.jsxs(Ye,{className:"bg-orange-100 text-orange-800 flex items-center gap-1 text-xs px-2 py-1",children:[s.jsx(Qa,{className:"h-3 w-3"}),"Return Request"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Jr,{className:"h-4 w-4"}),s.jsx("span",{className:"truncate",children:((ce=re.customer_details)==null?void 0:ce.username)||re.delivery_name})]}),(fe=re.refunds)==null?void 0:fe.map(ge=>{var me;return s.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Return Reason:"}),s.jsx(Ye,{className:`text-xs ${ge.status==="requested"?"bg-yellow-100 text-yellow-800":ge.status==="approved"?"bg-green-100 text-green-800":ge.status==="rejected"?"bg-red-100 text-red-800":ge.status==="appeal"?"bg-purple-100 text-purple-800":ge.status==="processed"?"bg-blue-100 text-blue-800":ge.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:ge.status.charAt(0).toUpperCase()+ge.status.slice(1)})]}),s.jsx("p",{className:"text-xs text-gray-700 capitalize",children:ge.reason.replace("_"," ")}),ge.customer_notes&&s.jsxs("p",{className:"text-xs text-gray-600",children:['"',ge.customer_notes,'"']}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Amount:"})," Rs ",ge.requested_amount]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Method:"})," ",ge.refund_method]}),((me=ge.evidence_photos)==null?void 0:me.length)>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium mb-1",children:"Evidence Documents:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:ge.evidence_photos.map((be,Te)=>{var se;const Se=(se=be.filename)==null?void 0:se.match(/\.(jpg|jpeg|png|gif|webp)$/i);let Ie;return be.filename.startsWith("http")?Ie=be.filename:be.filename.startsWith("/media/")?Ie=`${an.BASE_URL}${be.filename}`:Ie=`${an.BASE_URL}/media/${be.filename}`,s.jsxs("div",{className:"bg-blue-100 p-2 rounded text-xs cursor-pointer hover:bg-blue-200 transition-colors flex items-center gap-1",onClick:we=>{we.stopPropagation(),Se?(z(Ie),F(!0)):window.open(Ie,"_blank")},children:[Se?s.jsx(qs,{className:"h-3 w-3 text-blue-600"}):s.jsx(qt,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"text-blue-800",children:be.filename||`Document ${Te+1}`})]},Te)})})]}),ge.status==="requested"&&s.jsxs("div",{className:"space-y-3 pt-2",children:[s.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-2 rounded",children:[s.jsx("strong",{children:"Note:"})," Customer has provided payment details. Approve to process the refund or reject the return request."]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{size:"sm",variant:"outline",className:"flex-1 text-green-600 border-green-200 hover:bg-green-50",onClick:async be=>{be.stopPropagation();try{const{response:Te}=await Ve(`/vendor/refunds/${ge.id}/approve/`,{method:"POST",body:JSON.stringify({status:"approved",admin_notes:"Return request approved by vendor"})});Te.ok&&(e({title:"Return Approved",description:"Return request has been approved. Now you can process the refund."}),J())}catch{e({title:"Error",description:"Failed to approve return.",variant:"destructive"})}},children:"Approve"}),s.jsx(te,{size:"sm",variant:"outline",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50",onClick:async be=>{be.stopPropagation();try{const{response:Te}=await Ve(`/vendor/refunds/${ge.id}/reject/`,{method:"POST",body:JSON.stringify({status:"rejected",admin_notes:"Return request rejected by vendor"})});Te.ok&&(e({title:"Return Rejected",description:"Return request has been rejected."}),J())}catch{e({title:"Error",description:"Failed to reject return.",variant:"destructive"})}},children:"Reject"})]})]}),ge.status==="approved"&&s.jsxs("div",{className:"space-y-3 pt-2",children:[s.jsxs("div",{className:"text-xs text-green-600 bg-green-50 p-2 rounded",children:[s.jsx("strong",{children:"Approved:"})," Return approved. Now process the refund payment."]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Customer Payment Details:"}),ge.refund_method==="esewa"&&ge.esewa_number&&s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"eSewa:"})," ",ge.esewa_number]}),ge.refund_method==="khalti"&&ge.khalti_number&&s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Khalti:"})," ",ge.khalti_number]}),ge.refund_method==="bank"&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Bank:"})," ",ge.bank_account_name]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Account:"})," ",ge.bank_account_number]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Branch:"})," ",ge.bank_branch]})]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Amount:"})," Rs ",ge.requested_amount]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Method:"})," ",ge.refund_method]}),ge.refund_method==="khalti"&&ge.khalti_number&&s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Khalti Number:"})," ",ge.khalti_number]}),ge.refund_method==="esewa"&&ge.esewa_number&&s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"eSewa Number:"})," ",ge.esewa_number]}),ge.refund_method==="bank"&&s.jsxs(s.Fragment,{children:[ge.bank_account_name&&s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Account Name:"})," ",ge.bank_account_name]}),ge.bank_account_number&&s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Account Number:"})," ",ge.bank_account_number]}),ge.bank_branch&&s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Bank Branch:"})," ",ge.bank_branch]})]})]}),s.jsx(te,{size:"sm",className:"w-full bg-blue-600 hover:bg-blue-700",onClick:async be=>{be.stopPropagation();try{const{response:Te}=await Ve(`/vendor/refunds/${ge.id}/approve/`,{method:"POST",body:JSON.stringify({status:"processed",admin_notes:"Refund payment processed by vendor"})});if(Te.ok)e({title:"Refund Processed",description:"Refund payment has been transferred to customer."}),J();else{const Se=await Te.json();e({title:"Error",description:Se.error||"Failed to process refund.",variant:"destructive"})}}catch{e({title:"Error",description:"Failed to process refund.",variant:"destructive"})}},children:"Mark as Refunded"})]}),ge.status==="processed"&&s.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-2 rounded mt-2",children:[s.jsx("strong",{children:"Processed:"})," Refund payment has been transferred to customer."]}),ge.status==="completed"&&s.jsxs("div",{className:"text-xs text-emerald-600 bg-emerald-50 p-2 rounded mt-2",children:[s.jsx("strong",{children:"Completed:"})," Refund process finished successfully."]}),ge.status==="rejected"&&s.jsxs("div",{className:"text-xs text-red-600 bg-red-50 p-2 rounded mt-2",children:[s.jsx("strong",{children:"Rejected:"})," Return request was rejected."]}),ge.admin_notes&&s.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[s.jsx("span",{className:"font-medium",children:"Response:"})," ",ge.admin_notes]})]},ge.id)}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["Rs ",parseFloat(re.total_amount||0).toFixed(2)]}),s.jsxs(te,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:ge=>{ge.stopPropagation(),n(re)},children:[s.jsx(qs,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]})]})})},re.id)}),ke("returns").length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Qa,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No returns yet"}),s.jsx("p",{className:"text-gray-500",children:"Return requests will appear here"})]})]}),s.jsx(oe,{orders:ke("returns")})]})]})]})})]}),s.jsx(An,{open:!!t,onOpenChange:()=>n(null),children:s.jsxs(wn,{side:"bottom",className:"h-[90vh] rounded-t-xl",children:[s.jsx(On,{className:"pb-4",children:s.jsxs(Rn,{className:"text-left",children:["Order Details - ",t==null?void 0:t.order_number]})}),t&&s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.jsx(Jr,{className:"h-4 w-4"}),"Customer Information"]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Name:"})," ",((Q=t.customer_details)==null?void 0:Q.username)||t.delivery_name]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(Eh,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:"Phone:"})," ",((ae=t.customer_details)==null?void 0:ae.phone_number)||t.delivery_phone]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(es,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:"Address:"})," ",t.delivery_address]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.jsx(qt,{className:"h-4 w-4"}),"Order Items"]}),s.jsx("div",{className:"space-y-2",children:((ue=t.items)==null?void 0:ue.map((re,ce)=>{var fe,ge,me;return s.jsx("div",{className:"py-1 border-b border-gray-100 last:border-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center overflow-hidden flex-shrink-0",children:(me=(ge=(fe=re.product_details)==null?void 0:fe.images)==null?void 0:ge[0])!=null&&me.image_url?s.jsx("img",{src:Qt(re.product_details.images[0].image_url),alt:re.product_name,className:"w-full h-full object-cover",loading:"lazy",onError:be=>{be.currentTarget.style.display="none",be.currentTarget.parentElement.innerHTML='<span class="text-xs text-gray-400"></span>'}}):s.jsx("span",{className:"text-xs text-gray-400",children:""})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:re.product_name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",re.quantity]}),s.jsxs("p",{className:"text-sm font-semibold text-emerald-600 mt-1",children:["",re.total_price]})]})]})},ce)}))||[]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-3",children:"Payment Details"}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["",parseFloat(t.subtotal||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["",parseFloat(t.total_amount||0).toFixed(2)]})]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.jsx(VF,{className:"h-4 w-4"}),"Order Timeline"]}),s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Ordered:"})," ",new Date(t.created_at).toLocaleDateString()," at ",new Date(t.created_at).toLocaleTimeString()]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx(Ye,{className:`${le(t.status)} text-xs`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})]})]}),t.status==="delivered"&&s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[s.jsx(vs,{className:"h-4 w-4"}),"Customer Reviews"]}),V[t.id]&&V[t.id].length>0?s.jsx("div",{className:"space-y-3",children:V[t.id].map((re,ce)=>s.jsxs("div",{className:"border border-gray-100 rounded-lg p-3 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((fe,ge)=>s.jsx(vs,{className:`h-3 w-3 ${ge<(re.rating||0)?"text-yellow-400 fill-current":"text-gray-300"}`},ge))}),s.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[re.rating||0,"/5"]})]}),s.jsx("span",{className:"text-xs text-gray-500",children:re.created_at?new Date(re.created_at).toLocaleDateString():"N/A"})]}),re.comment&&s.jsx("p",{className:"text-xs text-gray-700 mb-2",children:re.comment}),re.images&&re.images.length>0&&s.jsx("div",{className:"flex gap-2 overflow-x-auto",children:re.images.map((fe,ge)=>s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0 cursor-pointer",onClick:()=>{z(Qt(fe.image_url)),F(!0)},children:s.jsx("img",{src:Qt(fe.image_url),alt:`Review image ${ge+1}`,className:"w-full h-full object-cover",loading:"lazy",onError:me=>{me.currentTarget.style.display="none",me.currentTarget.parentElement.innerHTML='<span className="text-xs text-gray-400"></span>'}})},ge))})]},ce))}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx(vs,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),s.jsx("p",{className:"text-xs text-gray-500",children:"No reviews yet for this order"})]})]})]})]})}),s.jsx(An,{open:l,onOpenChange:re=>{d(re),re||a(null)},children:s.jsxs(wn,{side:"bottom",className:"h-[80vh] rounded-t-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qn,{className:"h-5 w-5"}),s.jsxs("h2",{className:"text-lg font-semibold",children:["Ship Order - ",r==null?void 0:r.order_number]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:()=>d(!1),children:"Cancel"}),s.jsx(te,{size:"sm",onClick:async()=>{try{const re={status:"out_for_delivery",delivery_boy_phone:h,vehicle_number:u,vehicle_color:p,estimated_delivery_time:v,delivery_fee:parseFloat(y)||0},{response:ce}=await Ve(`/vendor/orders/${r.id}/ship/`,{method:"POST",body:JSON.stringify(re)});ce.ok&&(Ne(r.id,"out_for_delivery",re),d(!1),f(""),m(""),w(""),x(""),b(""),E(null),N(!1),P(""),a(null),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:r.id,status:"out_for_delivery",type:"ship"}})),window.dispatchEvent(new CustomEvent("newNotification",{detail:{type:"order",title:`Order #${r.order_number} Shipped`,message:"Order has been shipped successfully",data:{orderId:r.id,status:"out_for_delivery"}}})),setTimeout(()=>J(),1e3))}catch(re){console.error("Error shipping order:",re)}},className:"bg-blue-600 hover:bg-blue-700",disabled:!h||!u||!p||!v,children:"Confirm & Ship"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"deliveryBoyPhone",children:"Delivery Boy Phone"}),s.jsx(je,{id:"deliveryBoyPhone",type:"tel",placeholder:"Enter delivery boy phone number",value:h,onChange:re=>f(re.target.value)})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"vehicleNumber",children:"Vehicle Number"}),s.jsx(je,{id:"vehicleNumber",placeholder:"Enter vehicle number",value:u,onChange:re=>m(re.target.value)})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"vehicleColor",children:"Vehicle Color"}),s.jsx(je,{id:"vehicleColor",placeholder:"Enter vehicle color",value:p,onChange:re=>w(re.target.value)})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"estimatedDeliveryTime",children:"Estimated Delivery Time (hours)"}),s.jsx(je,{id:"estimatedDeliveryTime",type:"number",min:"1",max:"72",placeholder:"Enter hours (e.g., 2)",value:v,onChange:re=>x(re.target.value)})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"deliveryFee",children:"Delivery Fee"}),s.jsx(je,{id:"deliveryFee",type:"number",step:"0.01",placeholder:S==="Enter delivery fee"?"Enter delivery fee":"Delivery fee",value:y,onChange:re=>b(re.target.value),disabled:j}),S&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:S})]})]})]})}),s.jsx(bc,{open:U,onOpenChange:F,children:s.jsxs(tl,{className:"max-w-5xl max-h-[95vh] p-4",children:[s.jsx(sl,{className:"pb-4",children:s.jsxs(nl,{className:"flex items-center gap-2",children:[s.jsx(qs,{className:"h-5 w-5"}),"Image Preview"]})}),s.jsx("div",{className:"flex justify-center items-center bg-gray-50 rounded-lg p-4",children:s.jsx("img",{src:B,alt:"Preview",className:"max-w-full max-h-[75vh] object-contain rounded shadow-lg",onError:re=>{re.currentTarget.src="/placeholder-image.svg",re.currentTarget.alt="Image not found"}})})]})})]})})},Bl={getProducts:async()=>{const{response:e,data:t}=await Ve("/products/");if(!e.ok)throw new Error("Failed to fetch products");return t},getProduct:async e=>{const{response:t,data:n}=await Ve(`/products/${e}/`);if(!t.ok)throw new Error("Failed to fetch product");return n},createProduct:async e=>{const t=new FormData;Object.entries(e).forEach(([a,i])=>{a==="image_files"&&Array.isArray(i)?i.forEach((o,l)=>{o instanceof File&&t.append("image_files",o)}):typeof i=="object"?t.append(a,JSON.stringify(i)):t.append(a,String(i))});const{response:n,data:r}=await Ve("/products/",{method:"POST",body:t});if(!n.ok)throw new Error("Failed to create product");return r},updateProduct:async(e,t)=>{const n=new FormData;Object.entries(t).forEach(([i,o])=>{i==="image_files"&&Array.isArray(o)?o.forEach(l=>{l instanceof File&&n.append("image_files",l)}):typeof o=="boolean"?n.append(i,o?"true":"false"):typeof o=="object"&&o!==null?n.append(i,JSON.stringify(o)):o!=null&&n.append(i,String(o))});const{response:r,data:a}=await Ve(`/products/${e}/`,{method:"PATCH",body:n});if(!r.ok)throw console.error("Update failed:",r.status),new Error(`Failed to update product: ${r.status}`);return a},deleteProduct:async e=>{const{response:t}=await Ve(`/products/${e}/`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete product")}},Ure=({message:e,show:t,onClose:n,duration:r=3e3})=>{const[a,i]=_.useState(!1);return _.useEffect(()=>{if(t){i(!0);const o=setTimeout(()=>{i(!1),setTimeout(n,300)},r);return()=>clearTimeout(o)}},[t,r,n]),!t&&!a?null:s.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-all duration-300 ${a?"opacity-100":"opacity-0"}`,children:[s.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl border border-green-200 p-6 mx-4 max-w-sm w-full pointer-events-auto transform transition-all duration-300 ${a?"scale-100 translate-y-0":"scale-95 translate-y-4"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Bc,{className:"h-6 w-6 text-green-600"})})}),s.jsx("div",{className:"flex-1",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Success!"})})]}),s.jsx("button",{onClick:()=>{i(!1),setTimeout(n,300)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(sn,{className:"h-5 w-5"})})]}),s.jsx("p",{className:"text-gray-600 text-center",children:e}),s.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-1",children:s.jsx("div",{className:"bg-green-500 h-1 rounded-full transition-all duration-300 ease-linear",style:{animation:a?`shrink ${r}ms linear`:"none"}})})]}),s.jsx("style",{jsx:!0,children:`
        @keyframes shrink {
          from { width: 100%; }
          to { width: 0%; }
        }
      `})]})};class qre extends Re.Component{constructor(n){super(n);Gt(this,"resetError",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){if(this.state.hasError){if(this.props.fallback){const n=this.props.fallback;return s.jsx(n,{error:this.state.error,resetError:this.resetError})}return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",children:[s.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"We encountered an unexpected error. Please try refreshing the page."}),s.jsx("button",{onClick:this.resetError,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors",children:"Try Again"})]})})}return this.props.children}}const Hre=N4({name:Ls().min(1,"Product name is required"),category:Ls().min(1,"Category is required"),subcategory:Ls().optional(),price:ba().min(0,"Price must be positive"),cost_price:ba().nullable().optional().transform(e=>e===void 0?null:e),sku:Ls().optional(),barcode:Ls().optional(),quantity:ba().min(0,"Quantity must be positive"),low_stock_threshold:ba().min(0).optional(),description:Ls().min(1,"Description is required"),short_description:Ls().optional(),tags:mp(Ls()).default([]),image_files:mp(z0()).min(1,"At least one image is required"),status:k4(["active","draft","archived"]).default("active"),featured:wc().default(!1),free_delivery:wc().default(!1),custom_delivery_fee_enabled:wc().default(!1),custom_delivery_fee:ba().min(0).nullable().optional(),seo_title:Ls().optional(),seo_description:Ls().optional(),dynamic_fields:S4(z0()).default({})}).refine(e=>e.free_delivery?!0:!(e.custom_delivery_fee_enabled&&(e.custom_delivery_fee===null||e.custom_delivery_fee===void 0)),{message:"Custom delivery fee is required when custom delivery fee is enabled and free delivery is disabled",path:["custom_delivery_fee"]}),Wre=()=>{const e=lt(),[t,n]=_.useState(""),[r,a]=_.useState([]),[i,o]=_.useState([]),[l,d]=_.useState([]),[h,f]=_.useState(""),[u,m]=_.useState(!1),[p,w]=_.useState(!1),[v,x]=_.useState(""),[y,b]=_.useState([]),[j,N]=_.useState([]),[S,P]=_.useState([]),[T,E]=_.useState(!1),[I,O]=_.useState(!0),[R,C]=_.useState([]),[D,A]=_.useState([]),[M,Z]=_.useState(!1),X=x4({resolver:b4(Hre),defaultValues:{name:"",category:"",price:"",cost_price:null,quantity:"",description:"",tags:[],image_files:[],status:"active",featured:!1,free_delivery:!1,custom_delivery_fee_enabled:!1,custom_delivery_fee:void 0,dynamic_fields:{}}}),{control:U,handleSubmit:F,watch:B,setValue:z,formState:{errors:H}}=X,q=B("category");_.useEffect(()=>{n(q),z("subcategory",""),q?(Y(q,!1),V(q)):(P([]),C([]))},[q,z]);const W=B("subcategory");_.useEffect(()=>{W?G(W):A([])},[W]);const Y=async(ne,Ce=!1)=>{try{E(!0);const{apiRequest:ve}=await Ue(async()=>{const{apiRequest:Q}=await Promise.resolve().then(()=>hs);return{apiRequest:Q}},void 0),{response:oe,data:de}=await ve(`categories/${encodeURIComponent(ne)}/subcategories/`);if(oe.ok&&de){const ae=(de.subcategories||[]).map((ue,re)=>typeof ue=="string"?{id:re+1,name:ue}:ue);P(ae),Ce&&ae.length>0&&z("subcategory",ae[0].name)}else P([])}catch(ve){console.error("Error fetching subcategories:",ve),P([])}finally{E(!1)}},V=async ne=>{var Ce;try{Z(!0);const ve=(Ce=j.find(ae=>ae.name===ne))==null?void 0:Ce.id;if(!ve)return;const{apiRequest:oe}=await Ue(async()=>{const{apiRequest:ae}=await Promise.resolve().then(()=>hs);return{apiRequest:ae}},void 0),{response:de,data:Q}=await oe(`/accounts/categories/parameters/?target_id=${ve}&target_type=category`);de.ok&&(Q!=null&&Q.parameters)?C(Q.parameters):C([])}catch(ve){console.error("Error fetching category parameters:",ve),C([])}finally{Z(!1)}},G=async ne=>{try{Z(!0);const Ce=S.find(Q=>Q.name===ne);if(!(Ce!=null&&Ce.id))return;const{apiRequest:ve}=await Ue(async()=>{const{apiRequest:Q}=await Promise.resolve().then(()=>hs);return{apiRequest:Q}},void 0),{response:oe,data:de}=await ve(`/accounts/categories/parameters/?target_id=${Ce.id}&target_type=subcategory`);oe.ok&&(de!=null&&de.parameters)?A(de.parameters):A([])}catch(Ce){console.error("Error fetching subcategory parameters:",Ce),A([])}finally{Z(!1)}};_.useEffect(()=>{(async()=>{try{const{apiRequest:Ce}=await Ue(async()=>{const{apiRequest:ae}=await Promise.resolve().then(()=>hs);return{apiRequest:ae}},void 0),{response:ve,data:oe}=await Ce("/categories/");ve.ok&&(oe!=null&&oe.categories)&&N(oe.categories);const{response:de,data:Q}=await Ce("/vendor-profiles/");if(console.log("Vendor profile response:",{response:de.ok,data:Q}),de.ok&&Q&&Q.results&&Q.results.length>0){const ue=Q.results[0].categories||[];console.log("Vendor categories:",ue),b(ue);const re=ue.length>0?ue:(oe==null?void 0:oe.categories)||[];if(re.length>0){const ce=typeof re[0]=="string"?re[0]:re[0].name;z("category",ce),n(ce),Y(ce,!0)}}}catch(Ce){console.error("Error fetching data:",Ce)}finally{O(!1)}})()},[z]);const ie=ne=>{const Ce=ne.target.files;if(Ce){const ve=Array.from(Ce),oe=ve.map(de=>URL.createObjectURL(de));a(de=>[...de,...ve]),o(de=>[...de,...oe]),z("image_files",[...r,...ve])}},J=ne=>{URL.revokeObjectURL(i[ne]);const Ce=r.filter((oe,de)=>de!==ne),ve=i.filter((oe,de)=>de!==ne);a(Ce),o(ve),z("image_files",Ce)},le=()=>{if(h.trim()&&!l.includes(h.trim())){const ne=[...l,h.trim()];d(ne),z("tags",ne),f("")}},ye=ne=>{const Ce=l.filter(ve=>ve!==ne);d(Ce),z("tags",Ce)},ke=async ne=>{try{const Ce={...ne};(Ce.cost_price===null||Ce.cost_price===void 0)&&delete Ce.cost_price,(Ce.free_delivery||!Ce.custom_delivery_fee_enabled)&&delete Ce.custom_delivery_fee,await Bl.createProduct(Ce),x("Product created successfully!"),w(!0),X.reset(),i.forEach(oe=>URL.revokeObjectURL(oe)),a([]),o([]),d([]);const ve=y.length>0?y:j;if(ve.length>0){const oe=typeof ve[0]=="string"?ve[0]:ve[0].name;z("category",oe),n(oe)}}catch(Ce){cn.error("Failed to create product. Please try again."),console.error("Error creating product:",Ce)}},Ne=ne=>{if(!ne||!ne.name||!ne.field_type)return null;const Ce=`dynamic_fields.${ne.name}`;switch(ne.field_type){case"text":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.is_required},render:({field:ve})=>s.jsx(je,{...ve,placeholder:ne.placeholder,className:"h-8 text-xs"})})]},ne.name);case"number":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.is_required},render:({field:ve})=>s.jsx(je,{...ve,type:"number",placeholder:ne.placeholder,className:"h-8 text-xs",onChange:oe=>ve.onChange(Number(oe.target.value))})})]},ne.name);case"select":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.is_required},render:({field:ve})=>{var oe;return s.jsxs(Yt,{onValueChange:ve.onChange,value:ve.value,children:[s.jsx(Kt,{className:"h-8 text-xs",children:s.jsx(Xt,{placeholder:`Select ${ne.label.toLowerCase()}`})}),s.jsx(Zt,{children:(oe=ne.options)==null?void 0:oe.map((de,Q)=>s.jsx(st,{value:de,className:"text-xs",children:de},`${ne.name}-${de}-${Q}`))})]})}})]},ne.name);case"multiselect":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.is_required},render:({field:ve})=>{var de;const oe=ve.value||[];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Yt,{onValueChange:Q=>{oe.includes(Q)||ve.onChange([...oe,Q])},children:[s.jsx(Kt,{className:"h-8 text-xs",children:s.jsx(Xt,{placeholder:`Select ${ne.label.toLowerCase()}`})}),s.jsx(Zt,{children:(de=ne.options)==null?void 0:de.map((Q,ae)=>s.jsx(st,{value:Q,className:"text-xs",children:Q},`${ne.name}-multiselect-${Q}-${ae}`))})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:oe.map((Q,ae)=>s.jsxs(Ye,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[Q,s.jsx(sn,{className:"h-2 w-2 cursor-pointer",onClick:()=>{ve.onChange(oe.filter(ue=>ue!==Q))}})]},`${ne.name}-badge-${Q}-${ae}`))})]})}})]},ne.name);case"textarea":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.is_required},render:({field:ve})=>s.jsx(Ys,{...ve,placeholder:ne.placeholder,className:"text-xs",rows:2})})]},ne.name);case"boolean":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:Ce,control:U,render:({field:ve})=>s.jsx(Vt,{checked:ve.value,onCheckedChange:ve.onChange})}),s.jsx(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:ne.label})]},ne.name);case"date":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.is_required},render:({field:ve})=>s.jsx(je,{...ve,type:"date",className:"h-8 text-xs"})})]},ne.name);case"color":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.is_required},render:({field:ve})=>s.jsx(je,{...ve,type:"color",className:"h-8 text-xs"})})]},ne.name);case"range":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.is_required},render:({field:ve})=>s.jsx(je,{...ve,type:"range",min:ne.min_value||0,max:ne.max_value||100,step:ne.step||1,className:"h-8 text-xs"})})]},ne.name);default:return null}},_e=ne=>{if(!ne||!ne.name||!ne.type)return null;const Ce=`dynamic_fields.${ne.name}`;switch(ne.type){case"text":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.required},render:({field:ve})=>s.jsx(je,{...ve,placeholder:ne.placeholder,className:"h-8 text-xs"})})]},ne.name);case"number":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.required},render:({field:ve})=>s.jsx(je,{...ve,type:"number",placeholder:ne.placeholder,className:"h-8 text-xs",onChange:oe=>ve.onChange(Number(oe.target.value))})})]},ne.name);case"select":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.required},render:({field:ve})=>{var oe;return s.jsxs(Yt,{onValueChange:ve.onChange,value:ve.value,children:[s.jsx(Kt,{className:"h-8 text-xs",children:s.jsx(Xt,{placeholder:`Select ${ne.label.toLowerCase()}`})}),s.jsx(Zt,{children:(oe=ne.options)==null?void 0:oe.filter(de=>de!=null).map((de,Q)=>s.jsx(st,{value:de,className:"text-xs",children:de},`${ne.name}-${de}-${Q}`))})]})}})]},ne.name);case"multiselect":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.required},render:({field:ve})=>{var de;const oe=ve.value||[];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Yt,{onValueChange:Q=>{oe.includes(Q)||ve.onChange([...oe,Q])},children:[s.jsx(Kt,{className:"h-8 text-xs",children:s.jsx(Xt,{placeholder:`Select ${ne.label.toLowerCase()}`})}),s.jsx(Zt,{children:(de=ne.options)==null?void 0:de.filter(Q=>Q!=null).map((Q,ae)=>s.jsx(st,{value:Q,className:"text-xs",children:Q},`${ne.name}-multiselect-${Q}-${ae}`))})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:oe.map((Q,ae)=>s.jsxs(Ye,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[Q,s.jsx(sn,{className:"h-2 w-2 cursor-pointer",onClick:()=>{ve.onChange(oe.filter(ue=>ue!==Q))}})]},`${ne.name}-badge-${Q}-${ae}`))})]})}})]},ne.name);case"textarea":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.required},render:({field:ve})=>s.jsx(Ys,{...ve,placeholder:ne.placeholder,className:"text-xs",rows:2})})]},ne.name);case"boolean":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:Ce,control:U,render:({field:ve})=>s.jsx(Vt,{checked:ve.value,onCheckedChange:ve.onChange})}),s.jsx(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:ne.label})]},ne.name);case"date":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:ne.name,className:"text-xs font-medium text-gray-700",children:[ne.label," ",ne.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Ce,control:U,rules:{required:ne.required},render:({field:ve})=>s.jsx(je,{...ve,type:"date",className:"h-8 text-xs"})})]},ne.name);default:return null}};return u?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:s.jsx(Ht,{className:"h-4 w-4"})}),s.jsx("h1",{className:"text-lg font-semibold",children:"Product Preview"})]}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>m(!1),children:"Edit"})]})}),s.jsx(Z4,{productData:B()})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("style",{children:`
        input, textarea, select {
          font-size: 16px !important;
          transform: translateZ(0);
        }
        @media screen and (max-width: 768px) {
          input:focus, textarea:focus, select:focus {
            font-size: 16px !important;
            zoom: 1 !important;
          }
        }
      `}),s.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>e("/vendor/dashboard"),children:s.jsx(Ht,{className:"h-4 w-4"})}),s.jsx("h1",{className:"text-lg font-semibold",children:"Add New Product"})]}),s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>m(!0),children:[s.jsx(qs,{className:"h-4 w-4 mr-1"}),"Preview"]})]})}),s.jsx("div",{className:"max-w-2xl mx-auto p-4",children:s.jsxs("form",{onSubmit:F(ke),className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(qt,{className:"h-4 w-4 text-blue-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Basic Information"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"col-span-2 space-y-1",children:[s.jsxs(xe,{htmlFor:"name",className:"text-xs font-medium text-gray-700",children:["Product Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"name",control:U,render:({field:ne})=>s.jsx(je,{...ne,placeholder:"Enter product name",className:"h-8 text-xs"})}),H.name&&s.jsx("p",{className:"text-red-500 text-xs",children:H.name.message})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:"category",className:"text-xs font-medium text-gray-700",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"category",control:U,render:({field:ne})=>s.jsxs(Yt,{onValueChange:ne.onChange,value:ne.value,children:[s.jsx(Kt,{className:"h-8 text-xs",children:s.jsx(Xt,{placeholder:"Select category"})}),s.jsx(Zt,{children:I?s.jsx(st,{value:"loading",disabled:!0,className:"text-xs",children:"Loading..."}):y.length>0?y.map(Ce=>s.jsxs(st,{value:Ce,className:"text-xs",children:[" ",Ce]},Ce)):j.map(Ce=>s.jsxs(st,{value:Ce.name,className:"text-xs",children:[" ",Ce.name]},Ce.id))})]})}),H.category&&s.jsx("p",{className:"text-red-500 text-xs",children:H.category.message})]}),S.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(xe,{className:"text-xs font-medium text-gray-700",children:"Subcategory"}),s.jsx(pt,{name:"subcategory",control:U,render:({field:ne})=>s.jsxs(Yt,{onValueChange:ne.onChange,value:ne.value,disabled:T,children:[s.jsx(Kt,{className:"h-8 text-xs",children:s.jsx(Xt,{placeholder:T?"Loading...":"Select subcategory"})}),s.jsx(Zt,{children:S.map(Ce=>s.jsx(st,{value:Ce.name,className:"text-xs",children:Ce.name},Ce.id))})]})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(xe,{className:"text-xs font-medium text-gray-700",children:"Unit"}),s.jsx(je,{value:t?h2(t):"piece",disabled:!0,className:"h-8 text-xs bg-gray-50"})]})]})]}),R.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Jf,{className:"h-4 w-4 text-green-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Category Details"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:R.map(Ne)})]}),D.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Jf,{className:"h-4 w-4 text-blue-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Subcategory Details"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:D.map(Ne)})]}),t&&Ur[t]&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Jf,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"mr-1",children:Ur[t].icon}),s.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:[Ur[t].name," Details"]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ur[t].fields.map(_e)})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Pricing & Inventory"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:"price",className:"text-xs font-medium text-gray-700",children:["Selling Price ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"price",control:U,render:({field:ne})=>s.jsx(je,{...ne,type:"number",step:"0.01",placeholder:"0.00",className:"h-8 text-xs",onChange:Ce=>ne.onChange(Number(Ce.target.value))})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(xe,{htmlFor:"cost_price",className:"text-xs font-medium text-gray-700",children:"Cost Price"}),s.jsx(pt,{name:"cost_price",control:U,render:({field:ne})=>s.jsx(je,{type:"number",step:"0.01",placeholder:"0.00",className:"h-8 text-xs",value:ne.value??"",onChange:Ce=>{const ve=Ce.target.value;ne.onChange(ve?Number(ve):null)}})})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:"quantity",className:"text-xs font-medium text-gray-700",children:["Quantity ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"quantity",control:U,render:({field:ne})=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(je,{type:"number",placeholder:"0",className:"h-8 text-xs flex-1",value:ne.value||"",onChange:Ce=>ne.onChange(Ce.target.value?Number(Ce.target.value):"")}),s.jsx("span",{className:"text-xs text-gray-500 flex items-center px-2",children:t?h2(t):"piece"})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:"free_delivery",control:U,render:({field:ne})=>s.jsx(Vt,{checked:ne.value,onCheckedChange:Ce=>{ne.onChange(Ce),Ce&&(z("custom_delivery_fee_enabled",!1),z("custom_delivery_fee",void 0))}})}),s.jsx(xe,{className:"text-xs font-medium text-gray-700",children:"Free Delivery"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:"custom_delivery_fee_enabled",control:U,render:({field:ne})=>s.jsx(Vt,{checked:ne.value&&!B("free_delivery"),disabled:B("free_delivery"),onCheckedChange:Ce=>{ne.onChange(Ce),Ce||z("custom_delivery_fee",void 0)}})}),s.jsx(xe,{className:"text-xs font-medium text-gray-700",children:"Custom Delivery Fee"})]}),B("custom_delivery_fee_enabled")&&!B("free_delivery")&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(xe,{htmlFor:"custom_delivery_fee",className:"text-xs font-medium text-gray-700",children:"Delivery Fee Amount"}),s.jsx(pt,{name:"custom_delivery_fee",control:U,render:({field:ne})=>s.jsx(je,{type:"number",step:"0.01",placeholder:"Enter delivery fee",className:"h-8 text-xs",value:ne.value||"",onChange:Ce=>{const ve=Ce.target.value;ne.onChange(ve?Number(ve):void 0)}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ka,{className:"h-4 w-4 text-purple-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Images"})]}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ie,className:"hidden",id:"image-upload"}),s.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[s.jsx(Vp,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Click to upload images"})]})]}),i.length>0&&s.jsx("div",{className:"grid grid-cols-4 gap-2",children:i.map((ne,Ce)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:ne,alt:`Product ${Ce+1}`,className:"w-full h-12 object-cover rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>J(Ce),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(sn,{className:"h-3 w-3"})}),Ce===0&&s.jsx(Ye,{className:"absolute bottom-0 left-0 text-xs px-1 py-0",children:"Main"})]},Ce))})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jT,{className:"h-4 w-4 text-orange-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Description"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(xe,{htmlFor:"description",className:"text-xs font-medium text-gray-700",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"description",control:U,render:({field:ne})=>{const Ce=Re.useRef(null);return s.jsx(V4,{ref:Ce,theme:"snow",value:ne.value,onChange:ne.onChange,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},style:{minHeight:"120px",fontSize:"12px"}})}}),H.description&&s.jsx("p",{className:"text-red-500 text-xs",children:H.description.message})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Tags"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(je,{value:h,onChange:ne=>f(ne.target.value),placeholder:"Add a tag",className:"h-8 text-xs",onKeyPress:ne=>ne.key==="Enter"&&(ne.preventDefault(),le())}),s.jsx(te,{type:"button",onClick:le,variant:"outline",size:"sm",children:s.jsx(Ns,{className:"h-3 w-3"})})]}),l.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:l.map((ne,Ce)=>s.jsxs(Ye,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[ne,s.jsx(sn,{className:"h-2 w-2 cursor-pointer",onClick:()=>ye(ne)})]},`tag-${ne}-${Ce}`))})]}),s.jsxs("div",{className:"flex gap-3 sticky bottom-4 bg-white p-3 border border-gray-200 rounded-lg",children:[s.jsx(te,{type:"button",variant:"outline",className:"flex-1 h-9 text-xs",onClick:()=>{z("status","draft"),F(ke)()},children:"Save as Draft"}),s.jsxs(te,{type:"submit",className:"flex-1 h-9 text-xs",children:[s.jsx(od,{className:"h-3 w-3 mr-1"}),"Publish Product"]})]})]})}),s.jsx(Ure,{message:v,show:p,onClose:()=>w(!1),duration:3e3})]})},Gre=()=>s.jsx(qre,{children:s.jsx(Wre,{})}),Kre=()=>{const[e,t]=_.useState(!1),[n,r]=_.useState("khalti"),[a,i]=_.useState(""),[o,l]=_.useState(!0),[d,h]=_.useState("all"),[f,u]=_.useState(""),[m,p]=_.useState(""),[w,v]=_.useState(null),[x,y]=_.useState([]),[b,j]=_.useState(!1),[N,S]=_.useState(!0),[P,T]=_.useState(!1),[E,I]=_.useState(null),[O,R]=_.useState(1),[C,D]=_.useState(1),[A,M]=_.useState(0),Z=20,X=async()=>{try{const{response:G,data:ie}=await Ve("vendor-wallet/");G.ok&&ie?v(ie):cn.error("Failed to fetch wallet data")}catch(G){console.error("Error fetching wallet data:",G),cn.error("Error loading wallet data")}finally{S(!1)}},U=async()=>{try{const G=new URLSearchParams({date_filter:d,page:O.toString(),page_size:Z.toString()});d==="custom"&&f&&m&&(G.append("date_from",f),G.append("date_to",m));const{response:ie,data:J}=await Ve(`wallet/transactions/?${G}`);ie.ok&&J?(y(J.transactions),D(J.total_pages),M(J.total_count)):cn.error("Failed to fetch transactions")}catch(G){console.error("Error fetching transactions:",G),cn.error("Error loading transactions")}};_.useEffect(()=>{X();const G=()=>{X()};return window.addEventListener("walletUpdated",G),()=>{window.removeEventListener("walletUpdated",G)}},[]),_.useEffect(()=>{w&&U()},[w,d,O,f,m]),_.useEffect(()=>{const G=()=>{X(),U()};return window.addEventListener("walletUpdated",G),()=>{window.removeEventListener("walletUpdated",G)}},[]),_.useEffect(()=>{const G=new URLSearchParams(window.location.search);if(G.get("payment_complete")==="1"){const ie=G.get("pidx");ie?F(ie):(cn.success("Payment completed successfully!"),X()),window.history.replaceState({},document.title,window.location.pathname)}},[]);const F=async G=>{try{const{response:ie,data:J}=await Ve("wallet/khalti-verify/",{method:"POST",body:JSON.stringify({pidx:G})});ie.ok&&J&&J.success?(cn.success(`Payment verified! Rs${J.amount} added to wallet`),X()):cn.error((J==null?void 0:J.error)||"Payment verification failed")}catch(ie){console.error("Error verifying payment:",ie),cn.error("Error verifying payment")}},B=async()=>{if(!n||!a)return;const{simplePersistentAuth:G}=await Ue(async()=>{const{simplePersistentAuth:J}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:J}},void 0);if(!await G.isVendorLoggedIn()){cn.error("Please login to continue");return}if(j(!0),n==="khalti")try{const{response:J,data:le}=await Ve("wallet/khalti-payment/",{method:"POST",body:JSON.stringify({amount:parseFloat(a)})});J.ok&&le&&le.success?window.location.href=le.payment_url:(cn.error((le==null?void 0:le.error)||"Failed to initiate payment"),j(!1))}catch(J){console.error("Error initiating payment:",J),cn.error("Error processing payment"),j(!1)}t(!1),i("")},z=()=>x.filter(G=>G.transaction_type==="credit").reduce((G,ie)=>G+parseFloat(ie.amount),0),H=()=>x.filter(G=>G.transaction_type==="debit").reduce((G,ie)=>G+parseFloat(ie.amount),0),q=G=>new Date(G).toLocaleDateString(),W=G=>new Date(G).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Y=()=>{const ie=`
===========================================
           WALLET TRANSACTION SUMMARY
===========================================
Generated: ${new Date().toLocaleDateString()}
Store: ${(w==null?void 0:w.business_name)||"N/A"}
Period: ${d==="custom"?`${f} to ${m}`:d.toUpperCase()}

BALANCE OVERVIEW
-------------------------------------------
Current Balance: Rs ${(w==null?void 0:w.balance)||"0.00"}
Total Credit: Rs ${z().toFixed(2)}
Total Debit: Rs ${H().toFixed(2)}
Net Amount: Rs ${(z()-H()).toFixed(2)}

TRANSACTION DETAILS (${x.length} transactions)
-------------------------------------------
${x.map(le=>`${q(le.created_at)} ${W(le.created_at)} | ${le.transaction_type.toUpperCase().padEnd(6)} | Rs ${parseFloat(le.amount).toFixed(2).padStart(8)} | ${le.description}`).join(`
`)}

===========================================
    `,J=window.open("","_blank");J==null||J.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${ie}</pre>`),J==null||J.print()},V=()=>{const G=[["Date","Time","Type","Amount","Description","Method","Status"].join(","),...x.map(ye=>[q(ye.created_at),W(ye.created_at),ye.transaction_type,parseFloat(ye.amount).toFixed(2),`"${ye.description}"`,ye.payment_method||"N/A",ye.status].join(","))].join(`
`),ie=new Blob([G],{type:"text/csv"}),J=window.URL.createObjectURL(ie),le=document.createElement("a");le.href=J,le.download=`wallet-transactions-${d}-${new Date().toISOString().split("T")[0]}.csv`,le.click(),window.URL.revokeObjectURL(J)};return s.jsx(rs,{title:"Wallet",children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 pb-20",children:[s.jsxs("div",{className:"bg-white border-b p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Mm,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"My Wallet"}),s.jsx("p",{className:"text-gray-600 text-sm",children:(w==null?void 0:w.business_name)||"Loading..."})]})]}),s.jsx(te,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100",onClick:()=>l(!o),children:o?s.jsx(qs,{className:"h-4 w-4"}):s.jsx(Qb,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Available Balance"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-3",children:o?`Rs ${(w==null?void 0:w.balance)||"0.00"}`:"Rs ****.**"}),s.jsxs(te,{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium",onClick:()=>t(!0),disabled:!0,children:[s.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Add Money"]})]})]}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx($e,{className:"bg-white shadow-sm",children:s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(sa,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"This Month"}),s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+Rs ",(w==null?void 0:w.total_earned)||"0.00"]})]})]})})}),s.jsx($e,{className:"bg-white shadow-sm",children:s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(CT,{className:"h-4 w-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Expenses"}),s.jsxs("p",{className:"text-sm font-bold text-red-600",children:["-Rs ",(w==null?void 0:w.total_spent)||"0.00"]})]})]})})})]})}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transactions"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(te,{variant:"outline",size:"sm",onClick:Y,children:[s.jsx(sw,{className:"h-4 w-4 mr-1"}),"Print"]}),s.jsxs(te,{variant:"outline",size:"sm",onClick:V,children:[s.jsx(uc,{className:"h-4 w-4 mr-1"}),"Export"]}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>T(!0),children:s.jsx(aa,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{key:"all",label:"All"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"custom",label:"Custom"}].map(G=>s.jsx(te,{variant:d===G.key?"default":"outline",size:"sm",className:"whitespace-nowrap",onClick:()=>h(G.key),children:G.label},G.key))})]}),s.jsx("div",{className:"px-4 space-y-2",children:N?s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx(La,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading transactions..."})]}):x.length>0?x.map(G=>s.jsx($e,{className:"bg-white shadow-sm cursor-pointer hover:bg-gray-50",onClick:()=>I(G),children:s.jsx(ze,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${G.transaction_type==="credit"?"bg-green-100":"bg-red-100"}`,children:G.transaction_type==="credit"?s.jsx(Zu,{className:"h-5 w-5 text-green-600"}):s.jsx(Yu,{className:"h-5 w-5 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:G.description}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsxs("span",{children:[q(G.created_at)," at ",W(G.created_at)]}),s.jsx(Ye,{variant:G.status==="completed"?"default":"secondary",className:"text-xs",children:G.status})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:`text-sm font-bold ${G.transaction_type==="credit"?"text-green-600":"text-red-600"}`,children:[G.transaction_type==="credit"?"+":"-","Rs ",parseFloat(G.amount).toFixed(2)]}),s.jsx("p",{className:"text-xs text-gray-500",children:G.payment_method||"N/A"})]})]})})},G.id)):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Mm,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No transactions found"})]})}),C>1&&s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(O-1)*Z+1,"-",Math.min(O*Z,A)," of ",A," transactions"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:()=>R(O-1),disabled:O===1,className:"h-8 w-8 p-0",children:s.jsx(wT,{className:"h-4 w-4"})}),s.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,C)},(G,ie)=>{const J=O<=3?ie+1:O-2+ie;return J>C?null:s.jsx(te,{variant:O===J?"default":"outline",size:"sm",onClick:()=>R(J),className:"h-8 w-8 p-0 text-xs",children:J},J)})}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>R(O+1),disabled:O===C,className:"h-8 w-8 p-0",children:s.jsx($c,{className:"h-4 w-4"})})]})]})}),s.jsx(An,{open:e,onOpenChange:t,children:s.jsxs(wn,{side:"bottom",className:"h-[80vh] rounded-t-3xl",children:[s.jsx(On,{className:"pb-6",children:s.jsx(Rn,{className:"text-center text-xl",children:"Add Money to Wallet"})}),s.jsxs("div",{className:"space-y-6 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Enter Amount"}),s.jsx(je,{type:"number",placeholder:"Rs 0.00",value:a,onChange:G=>i(G.target.value),className:"h-12 text-lg text-center"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:[500,1e3,2e3].map(G=>s.jsxs(te,{variant:"outline",onClick:()=>i(G.toString()),className:"h-10",children:["Rs ",G]},G))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Payment Method"}),s.jsx($e,{className:"cursor-pointer transition-all ring-2 ring-purple-500 bg-purple-50",onClick:()=>r("khalti"),children:s.jsx(ze,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(bl,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Khalti"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Secure digital payment gateway"})]})]})})})]}),s.jsx("div",{className:"fixed bottom-4 left-4 right-4",children:s.jsx(te,{className:"w-full h-12 text-lg font-medium",disabled:!n||!a||b,onClick:B,children:b?s.jsxs(s.Fragment,{children:[s.jsx(La,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Add Rs ${a||"0"}`})})]})]})}),s.jsx(An,{open:P,onOpenChange:T,children:s.jsxs(wn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(On,{className:"pb-4",children:s.jsxs(Rn,{className:"flex items-center justify-between",children:["Filter Transactions",s.jsx(te,{variant:"ghost",size:"sm",onClick:()=>T(!1),children:s.jsx(sn,{className:"h-4 w-4"})})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"Date Range"}),s.jsx("div",{className:"space-y-2",children:[{key:"all",label:"All Time"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"custom",label:"Custom Range"}].map(G=>s.jsx(te,{variant:d===G.key?"default":"outline",size:"sm",className:"w-full justify-start",onClick:()=>{h(G.key),R(1)},children:G.label},G.key))})]}),d==="custom"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs font-medium",children:"From Date"}),s.jsx(je,{type:"date",value:f,onChange:G=>{u(G.target.value),R(1)},className:"h-9 text-sm mt-1"})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs font-medium",children:"To Date"}),s.jsx(je,{type:"date",value:m,onChange:G=>{p(G.target.value),R(1)},className:"h-9 text-sm mt-1"})]})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:["Total Transactions: ",A]}),s.jsxs("p",{children:["Total Credit: Rs ",z().toFixed(2)]}),s.jsxs("p",{children:["Total Debit: Rs ",H().toFixed(2)]}),s.jsxs("p",{className:"font-medium",children:["Net: Rs ",(z()-H()).toFixed(2)]})]})})]})]})}),s.jsx(An,{open:!!E,onOpenChange:()=>I(null),children:s.jsxs(wn,{side:"bottom",className:"h-[70vh] rounded-t-xl",children:[s.jsx(On,{className:"pb-4",children:s.jsx(Rn,{className:"text-left",children:"Transaction Details"})}),E&&s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${E.transaction_type==="credit"?"bg-green-100":"bg-red-100"}`,children:E.transaction_type==="credit"?s.jsx(Zu,{className:"h-6 w-6 text-green-600"}):s.jsx(Yu,{className:"h-6 w-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-lg",children:E.description}),s.jsxs("p",{className:`text-xl font-bold ${E.transaction_type==="credit"?"text-green-600":"text-red-600"}`,children:[E.transaction_type==="credit"?"+":"-","Rs ",parseFloat(E.amount).toFixed(2)]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Transaction ID"}),s.jsxs("p",{className:"font-medium",children:["TXN-",E.id]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Status"}),s.jsx(Ye,{variant:E.status==="completed"?"default":"secondary",children:E.status})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Date & Time"}),s.jsxs("p",{className:"font-medium",children:[q(E.created_at)," at ",W(E.created_at)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Method"}),s.jsx("p",{className:"font-medium",children:E.payment_method||"N/A"})]})]})]}),(E.order_amount||E.reference_id)&&s.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[s.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[s.jsx(wa,{className:"h-4 w-4"}),"Additional Details"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[E.order_amount&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Amount:"}),s.jsxs("span",{className:"font-medium",children:["Rs ",parseFloat(E.order_amount).toFixed(2)]})]}),E.reference_id&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Reference ID:"}),s.jsx("span",{className:"font-medium",children:E.reference_id})]})]})]})]})]})})]})})};function Zre({requiredRole:e,currentPage:t}){const{state:n}=$n(),r=lt(),a=n.user,i=a==null?void 0:a.user_type,l=((a==null?void 0:a.available_roles)||[]).includes(e);return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs($e,{className:"max-w-md w-full",children:[s.jsxs(Ct,{className:"text-center",children:[s.jsx(Jb,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),s.jsx(Tt,{children:"Role Access Required"})]}),s.jsxs(ze,{className:"space-y-4",children:[s.jsxs("div",{className:"text-center text-gray-600",children:[s.jsxs("p",{children:["You need ",s.jsx("strong",{children:e})," access to view this page."]}),s.jsxs("p",{className:"text-sm mt-2",children:["Current role: ",s.jsx("span",{className:"font-medium",children:i})]})]}),l?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[s.jsx(t6,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Good news!"})]}),s.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["You have ",e," access available. Switch your role to continue."]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[s.jsx("span",{children:i}),s.jsx(xT,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:e})]}),s.jsxs(te,{onClick:()=>{r(e==="vendor"?"/vendor/onboarding":"/home")},className:"w-full",children:["Switch to ",e==="vendor"?"Vendor":"Customer"]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"bg-orange-50 p-3 rounded-lg",children:s.jsxs("p",{className:"text-sm text-orange-700",children:["You don't have ",e," access yet."]})}),e==="vendor"?s.jsx(te,{onClick:()=>r("/vendor/onboarding"),className:"w-full",children:"Complete Vendor Onboarding"}):s.jsx(te,{onClick:()=>r("/home"),className:"w-full",children:"Go to Customer Area"})]}),s.jsx("div",{className:"pt-2 border-t",children:s.jsx(te,{variant:"outline",onClick:()=>r(-1),className:"w-full",children:"Go Back"})})]})]})})}function Yre({children:e,redirectTo:t="/vendor/login"}){const[n,r]=_.useState(!0),[a,i]=_.useState(!1),o=lt();_.useEffect(()=>{l()},[]);const l=async()=>{try{const d=await pK("vendor");d.success?i(!0):d.needsLogin?o(t):d.roleNotAvailable?o("/vendor/onboarding"):o(t)}catch(d){console.error("Vendor auth guard error:",d),o(t)}finally{r(!1)}};return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a?s.jsx(s.Fragment,{children:e}):null}const Xre=()=>{var F;const e=lt(),{toast:t}=ns(),{logout:n,state:r,login:a}=$n(),[i,o]=_.useState("personal"),[l,d]=_.useState(!1),[h,f]=_.useState(!0),[u,m]=_.useState("");_.useState(null);const[p,w]=_.useState(null),[v,x]=_.useState(!1),[y,b]=_.useState(""),[j,N]=_.useState(null),[S,P]=_.useState({businessName:"",ownerName:"",email:"",phone:"",address:"",locationAddress:"",city:"",state:"",pincode:"",latitude:null,longitude:null,businessType:"",categories:[],description:"",bankName:"",accountNumber:"",ifscCode:"",accountHolderName:"",gstNumber:"",panNumber:"",businessLicense:null,citizenshipFront:null,citizenshipBack:null,shopImages:[],deliveryRadius:"",minOrderAmount:"",profileImage:null,referralCode:null});_.useEffect(()=>{T(),E(),O()},[]),_.useEffect(()=>{var B;((B=r.user)==null?void 0:B.user_type)==="vendor"&&T()},[(F=r.user)==null?void 0:F.user_type]);const T=async()=>{var B,z,H,q,W,Y,V,G,ie,J,le,ye;try{const ke=await gK();if(ke.needsLogin){e("/vendor/login");return}if(ke.needsOnboarding){m("You don't have access to vendor features. Please complete vendor onboarding first.");return}if(ke.needsRoleSwitch){if(!(await v_()).success){m("Failed to switch to vendor role. Please try logging in again.");return}const Ce=await Ae.getUser();if(Ce){const ve=await Ae.getToken();await a(Ce,ve)}}let{response:Ne,data:_e}=await Ve("/vendor-profiles/");if(Ne.status===401||Ne.status===403){console.log("Auth error, attempting to refresh and retry...");const ne=await Ae.getUser();if(ne&&ne.user_type==="vendor"){const Ce=await Ve("/vendor-profiles/");Ne=Ce.response,_e=Ce.data}if(Ne.status===401||Ne.status===403){m("You don't have access to vendor features. Please complete vendor onboarding first.");return}}if(!Ne.ok)throw new Error("Failed to fetch profile data");if(_e&&_e.results&&_e.results.length>0){const ne=_e.results[0];let Ce=((B=ne.user_info)==null?void 0:B.referral_code)||null;if(!Ce)try{const{response:ve,data:oe}=await Ve("/generate-referral-code/",{method:"POST"});ve.ok&&oe.success&&(Ce=oe.referral_code,console.log("Auto-generated referral code:",Ce))}catch(ve){console.error("Failed to auto-generate referral code:",ve)}P({businessName:ne.business_name||"",ownerName:ne.owner_name||"",email:ne.business_email||"",phone:ne.business_phone||"",address:ne.business_address||"",locationAddress:ne.location_address||"",city:ne.city||"",state:ne.state||"",pincode:ne.pincode||"",latitude:ne.latitude||null,longitude:ne.longitude||null,businessType:ne.business_type||"",categories:Array.isArray(ne.categories)?ne.categories:[],description:ne.description||"",bankName:ne.bank_name||"",accountNumber:ne.account_number||"",ifscCode:ne.ifsc_code||"",accountHolderName:ne.account_holder_name||"",gstNumber:ne.gst_number||"",panNumber:ne.pan_number||"",businessLicense:ne.business_license_file_url?{name:"PAN Registration",url:ne.business_license_file_url}:null,citizenshipFront:(z=ne.documents)!=null&&z.find(ve=>{var oe;return(oe=ve.document_url)==null?void 0:oe.includes("citizenship_front")})?{name:"Citizenship Front",url:ne.documents.find(ve=>{var oe;return(oe=ve.document_url)==null?void 0:oe.includes("citizenship_front")}).document_url}:null,citizenshipBack:(H=ne.documents)!=null&&H.find(ve=>{var oe;return(oe=ve.document_url)==null?void 0:oe.includes("citizenship_back")})?{name:"Citizenship Back",url:ne.documents.find(ve=>{var oe;return(oe=ve.document_url)==null?void 0:oe.includes("citizenship_back")}).document_url}:null,shopImages:ne.shop_images||[],deliveryRadius:((q=ne.delivery_radius)==null?void 0:q.toString())||"",minOrderAmount:ne.min_order_amount||"",profileImage:((W=ne.user_info)==null?void 0:W.profile_picture)||null,referralCode:Ce})}else{console.log("No vendor profile found, creating one...");const ne=await Ae.getUser();if(ne)if(await I(ne)){const ve=await Ve("/vendor-profiles/");if(ve.response.ok&&((V=(Y=ve.data)==null?void 0:Y.results)==null?void 0:V.length)>0){const oe=ve.data.results[0];let de=((G=oe.user_info)==null?void 0:G.referral_code)||null;if(!de)try{const{response:Q,data:ae}=await Ve("/generate-referral-code/",{method:"POST"});Q.ok&&ae.success&&(de=ae.referral_code,console.log("Auto-generated referral code for new profile:",de))}catch(Q){console.error("Failed to auto-generate referral code for new profile:",Q)}P({businessName:oe.business_name||"",ownerName:oe.owner_name||"",email:oe.business_email||"",phone:oe.business_phone||"",address:oe.business_address||"",locationAddress:oe.location_address||"",city:oe.city||"",state:oe.state||"",pincode:oe.pincode||"",latitude:oe.latitude||null,longitude:oe.longitude||null,businessType:oe.business_type||"",categories:Array.isArray(oe.categories)?oe.categories:[],description:oe.description||"",bankName:oe.bank_name||"",accountNumber:oe.account_number||"",ifscCode:oe.ifsc_code||"",accountHolderName:oe.account_holder_name||"",gstNumber:oe.gst_number||"",panNumber:oe.pan_number||"",businessLicense:oe.business_license_file_url?{name:"PAN Registration",url:oe.business_license_file_url}:null,citizenshipFront:(ie=oe.documents)!=null&&ie.find(Q=>{var ae;return(ae=Q.document_url)==null?void 0:ae.includes("citizenship_front")})?{name:"Citizenship Front",url:oe.documents.find(Q=>{var ae;return(ae=Q.document_url)==null?void 0:ae.includes("citizenship_front")}).document_url}:null,citizenshipBack:(J=oe.documents)!=null&&J.find(Q=>{var ae;return(ae=Q.document_url)==null?void 0:ae.includes("citizenship_back")})?{name:"Citizenship Back",url:oe.documents.find(Q=>{var ae;return(ae=Q.document_url)==null?void 0:ae.includes("citizenship_back")}).document_url}:null,shopImages:oe.shop_images||[],deliveryRadius:((le=oe.delivery_radius)==null?void 0:le.toString())||"",minOrderAmount:oe.min_order_amount||"",profileImage:((ye=oe.user_info)==null?void 0:ye.profile_picture)||null,referralCode:de})}else P({...S,businessName:ne.username||"My Business",ownerName:ne.username||"Owner",email:ne.email||""})}else m("Failed to create vendor profile");else m("User not found")}}catch(ke){console.error("Error fetching profile:",ke),m("Failed to load profile data")}finally{f(!1)}},E=async()=>{try{if(!await Ae.isAuthenticated())return;const{response:z,data:H}=await Ve("/profile/");if(z.ok&&H){const q={...r.user,available_roles:H.available_roles,current_role:H.current_role};console.log("Updated user data:",q)}}catch(B){console.error("Error fetching user profile:",B)}},I=async B=>{try{const z={business_name:B.username||"My Business",owner_name:B.username||"Owner",business_email:B.email||"",business_phone:B.phone_number||"",business_address:"",city:"",state:"",pincode:"",business_type:"retailer",categories:[],description:"",is_active:!0},{response:H}=await Ve("/vendor-profiles/",{method:"POST",body:JSON.stringify(z)});return H.ok?(console.log("Vendor profile created successfully"),!0):!1}catch(z){return console.error("Failed to create vendor profile:",z),!1}},O=async()=>{try{const{response:B,data:z}=await Ve("/delivery-radius/");B.ok&&z&&N(z.delivery_radius)}catch(B){console.error("Error fetching admin delivery radius:",B)}},R=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"manufacturer",label:"Manufacturer"},{value:"service_provider",label:"Service Provider"},{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"}],C=(B,z)=>{P(H=>({...H,[B]:z}))},D=async B=>{if(B)try{if(!await Ae.isAuthenticated())return;const H=new FormData;H.append("profile_picture",B);const{response:q,data:W}=await Ve("/profile/upload-picture/",{method:"POST",body:H});if(q.ok&&W)console.log("Upload result:",W),console.log("Profile picture URL:",W.profile_picture),P(Y=>({...Y,profileImage:W.profile_picture||null})),t({title:"Success",description:"Profile image updated successfully!"}),setTimeout(()=>{T()},500);else{const Y=await q.json();throw console.error("Profile image upload error:",Y),new Error("Profile image upload failed")}}catch(z){console.error("Profile image upload error:",z),t({title:"Error",description:"Failed to upload profile image. Please try again.",variant:"destructive"})}},A=async(B,z,H)=>{var W;if(!z)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(z.type)){t({title:"Error",description:"Please upload only PDF, JPG, JPEG, or PNG files.",variant:"destructive"});return}if(z.size>5*1024*1024){t({title:"Error",description:"File size must be less than 5MB.",variant:"destructive"});return}w(B);try{if(!await Ae.isAuthenticated())return;const V=new FormData;V.append(B,z),V.append("business_name",S.businessName),V.append("business_email",S.email),V.append("business_phone",S.phone),V.append("business_address",S.address),V.append("city",S.city),V.append("state",S.state),V.append("pincode",S.pincode),V.append("business_type",S.businessType);const{response:G,data:ie}=await Ve("/vendor-profiles/");if(!G.ok)throw new Error("Failed to get profile");const J=(W=ie.results[0])==null?void 0:W.id;if(!J)throw new Error("Profile not found");const{response:le,data:ye}=await Ve(`/vendor-profiles/${J}/`,{method:"PATCH",body:V});if(!le.ok)throw new Error("Upload failed");B==="business_license_file"?C("businessLicense",{name:"Business License",url:ye.business_license_file_url}):B==="gst_certificate"?C("gstCertificate",{name:"GST Certificate",url:ye.gst_certificate_url}):B==="fssai_license"&&C("fssaiLicense",{name:"FSSAI License",url:ye.fssai_license_url}),t({title:"Success",description:"Document uploaded successfully!"}),B==="additionalDocs"&&(x(!1),b(""),T())}catch(Y){console.error("Upload error:",Y),t({title:"Error",description:"Failed to upload document. Please try again.",variant:"destructive"})}finally{w(null)}},M=({title:B,docType:z,document:H,onUpload:q})=>s.jsxs("div",{children:[s.jsx(xe,{children:B}),s.jsxs("div",{className:"mt-2 p-4 border border-gray-300 rounded-lg bg-gray-50",children:[s.jsx(wa,{className:"h-6 w-6 mx-auto mb-2 text-gray-500"}),H?s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("p",{className:"text-sm text-green-600",children:" Uploaded"}),s.jsxs(bc,{children:[s.jsx(nI,{asChild:!0,children:s.jsxs(te,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",children:[s.jsx(qs,{className:"h-3 w-3 mr-1"}),"View"]})}),s.jsxs(tl,{className:"max-w-4xl w-full h-[80vh]",children:[s.jsx(sl,{children:s.jsx(nl,{children:B})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("img",{src:H.url,alt:B,className:"w-full h-full object-contain"})})]})]})]}):s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Not uploaded"}),s.jsxs(te,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",onClick:()=>{const W=H.createElement("input");W.type="file",W.accept=".pdf,.jpg,.jpeg,.png",W.onchange=Y=>{var G;const V=(G=Y.target.files)==null?void 0:G[0];V&&q(V)},W.click()},disabled:p===z,children:[p===z?s.jsx(La,{className:"h-3 w-3 mr-1 animate-spin"}):s.jsx(Vp,{className:"h-3 w-3 mr-1"}),"Upload"]})]})]})]}),Z=async()=>{try{if(!await Ae.isAuthenticated())return;const z={business_name:S.businessName,owner_name:S.ownerName,business_email:S.email,business_phone:S.phone,business_address:S.address,location_address:S.locationAddress,city:S.city,state:S.state,pincode:S.pincode,latitude:S.latitude,longitude:S.longitude,business_type:S.businessType,categories:S.categories,description:S.description,bank_name:S.bankName,account_number:S.accountNumber,account_holder_name:S.accountHolderName,ifsc_code:S.ifscCode,gst_number:S.gstNumber,pan_number:S.panNumber,delivery_radius:S.deliveryRadius?parseFloat(S.deliveryRadius):null,min_order_amount:S.minOrderAmount},{response:H,data:q}=await Ve("/vendor-profiles/");if(H.ok&&q){if(q.results&&q.results.length>0){const W=q.results[0].id,{response:Y}=await Ve(`/vendor-profiles/${W}/`,{method:"PUT",body:JSON.stringify(z)});if(Y.ok)d(!1),t({title:"Success",description:"Profile updated successfully!",variant:"default"}),T();else{const V=await Y.json();throw console.error("Update error:",V),new Error("Failed to update profile")}}}else throw new Error("Failed to fetch profile for update")}catch(B){console.error("Error saving profile:",B),t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}},X=async()=>{try{await Ae.getToken()&&await Ve("/logout/",{method:"POST"})}catch(B){console.error("Logout error:",B)}finally{await n(),e("/vendor/login")}},U=[{id:"personal",label:"Personal",icon:Jr},{id:"business",label:"Business",icon:yn},{id:"address",label:"Address",icon:es},{id:"banking",label:"Banking",icon:bl},{id:"documents",label:"Documents",icon:wa}];return h?s.jsx(rs,{title:"My Profile",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):u&&u.includes("vendor features")?s.jsx(Zre,{requiredRole:"vendor",currentPage:"vendor-profile"}):u?s.jsx(rs,{title:"My Profile",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsx(Jb,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-600 mb-4",children:u}),s.jsx("div",{className:"space-y-2",children:s.jsx(te,{onClick:T,variant:"outline",children:"Retry"})})]})})}):s.jsx(Yre,{children:s.jsx(rs,{title:"My Profile",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-100 fixed top-14 sm:top-16 left-0 right-0 z-30",children:s.jsxs("div",{className:"flex items-center justify-between p-3 mx-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-lg overflow-hidden ${l?"cursor-pointer hover:bg-gray-200":""}`,onClick:l?()=>{const B=document.createElement("input");B.type="file",B.accept="image/*",B.onchange=z=>{var q;const H=(q=z.target.files)==null?void 0:q[0];H&&D(H)},B.click()}:void 0,children:S.profileImage?s.jsx("img",{src:S.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-600 font-semibold",children:S.businessName?S.businessName.charAt(0).toUpperCase():"V"})}),l&&s.jsx(te,{size:"sm",className:"absolute -bottom-0.5 -right-0.5 w-5 h-5 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const B=document.createElement("input");B.type="file",B.accept="image/*",B.onchange=z=>{var q;const H=(q=z.target.files)==null?void 0:q[0];H&&D(H)},B.click()},children:s.jsx(ka,{className:"h-2.5 w-2.5"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"font-medium text-base truncate",children:S.businessName||"Business Name"}),s.jsx("p",{className:"text-gray-500 text-sm truncate",children:S.ownerName||"Owner Name"})]})]}),s.jsx(te,{onClick:()=>l?Z():d(!0),size:"sm",className:"bg-green-600 hover:bg-green-700",children:l?s.jsxs(s.Fragment,{children:[s.jsx(od,{className:"h-3 w-3 mr-1"}),"Save"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ch,{className:"h-3 w-3 mr-1"}),"Edit"]})})]})}),s.jsx("div",{className:"bg-white pt-16",children:s.jsxs(Fa,{value:i,onValueChange:o,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(ia,{className:"grid grid-cols-5 w-full",children:U.map(B=>s.jsxs(Lt,{value:B.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(B.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:B.label})]},B.id))})}),s.jsx(yt,{value:"personal",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"ownerName",children:"Full Name *"}),s.jsx(je,{id:"ownerName",value:S.ownerName,onChange:B=>C("ownerName",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"email",children:"Email *"}),s.jsx(je,{id:"email",type:"email",value:S.email,onChange:B=>C("email",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"phone",children:"Phone Number *"}),s.jsx(je,{id:"phone",value:S.phone,onChange:B=>C("phone",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"referralCode",children:"My Referral Code"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(je,{id:"referralCode",value:S.referralCode||(h?"Generating...":"Not available"),disabled:!0,className:"bg-gray-50 font-mono text-center text-lg font-semibold text-blue-600"}),S.referralCode?s.jsx(te,{type:"button",variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(S.referralCode),t({title:"Copied!",description:"Referral code copied to clipboard"})},disabled:h,children:"Copy"}):s.jsx(te,{type:"button",variant:"outline",size:"sm",onClick:async()=>{try{const{response:B,data:z}=await Ve("/generate-referral-code/",{method:"POST"});if(B.ok&&z.success)P(H=>({...H,referralCode:z.referral_code})),t({title:"Success!",description:"Referral code generated successfully"});else throw new Error(z.message||"Failed to generate referral code")}catch(B){console.error("Failed to generate referral code:",B),t({title:"Error",description:"Failed to generate referral code. Please try again.",variant:"destructive"})}},disabled:h,children:"Generate"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Share this code with customers to earn referral rewards"})]})]})}),s.jsxs(yt,{value:"business",className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"businessName",children:"Business Name *"}),s.jsx(je,{id:"businessName",value:S.businessName,onChange:B=>C("businessName",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"businessType",children:"Business Type *"}),s.jsxs(Yt,{value:S.businessType,onValueChange:B=>C("businessType",B),disabled:!l,children:[s.jsx(Kt,{children:s.jsx(Xt,{})}),s.jsx(Zt,{children:R.map(B=>s.jsx(st,{value:B.value,children:B.label},B.value))})]})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"gstNumber",children:"GST Number"}),s.jsx(je,{id:"gstNumber",value:S.gstNumber,onChange:B=>C("gstNumber",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"panNumber",children:"PAN Number"}),s.jsx(je,{id:"panNumber",value:S.panNumber,onChange:B=>C("panNumber",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"deliveryRadius",children:"Delivery Radius (km)"}),s.jsx(je,{id:"deliveryRadius",value:j?`${j} (Set by Admin)`:S.deliveryRadius,disabled:!0,className:"bg-gray-100 text-gray-600"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Delivery radius is set by the administrator"})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"minOrderAmount",children:"Min Order Amount ()"}),s.jsx(je,{id:"minOrderAmount",value:S.minOrderAmount,onChange:B=>C("minOrderAmount",B.target.value),disabled:!l})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(xe,{children:"Selected Categories"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:S.categories.length>0?S.categories.map(B=>s.jsx("span",{className:"px-3 py-1 text-sm bg-blue-50 text-blue-600 border border-blue-200 rounded-lg",children:B},B)):s.jsx("span",{className:"text-sm text-gray-500",children:"No categories selected"})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Categories are set during vendor onboarding and cannot be changed here."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(xe,{htmlFor:"description",children:"Business Description"}),s.jsx(Ys,{id:"description",value:S.description,onChange:B=>C("description",B.target.value),rows:3,disabled:!l})]})]}),s.jsx(yt,{value:"address",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(xe,{htmlFor:"address",children:"Shop Address *"}),s.jsx(Ys,{id:"address",value:S.address,onChange:B=>C("address",B.target.value),disabled:!l,rows:2})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(xe,{htmlFor:"locationAddress",children:"Location Address (from Map)"}),s.jsx(Ys,{id:"locationAddress",value:S.locationAddress,onChange:B=>C("locationAddress",B.target.value),disabled:!l,rows:2})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"city",children:"City *"}),s.jsx(je,{id:"city",value:S.city,onChange:B=>C("city",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"state",children:"State *"}),s.jsx(je,{id:"state",value:S.state,onChange:B=>C("state",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"pincode",children:"Pincode *"}),s.jsx(je,{id:"pincode",value:S.pincode,onChange:B=>C("pincode",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Coordinates"}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Lat: ",S.latitude||"N/A",", Lng: ",S.longitude||"N/A"]})]})]})}),s.jsx(yt,{value:"banking",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"bankName",children:"Bank Name *"}),s.jsx(je,{id:"bankName",value:S.bankName,onChange:B=>C("bankName",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"accountHolderName",children:"Account Holder Name *"}),s.jsx(je,{id:"accountHolderName",value:S.accountHolderName,onChange:B=>C("accountHolderName",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"accountNumber",children:"Account Number *"}),s.jsx(je,{id:"accountNumber",value:S.accountNumber,onChange:B=>C("accountNumber",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"ifscCode",children:"IFSC Code *"}),s.jsx(je,{id:"ifscCode",value:S.ifscCode,onChange:B=>C("ifscCode",B.target.value),disabled:!l})]})]})}),s.jsx(yt,{value:"documents",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(M,{title:"PAN Registration",docType:"business_license_file",document:S.businessLicense,onUpload:B=>A("business_license_file",B)}),s.jsx(M,{title:"Citizenship (Front)",docType:"citizenship_front",document:S.citizenshipFront,onUpload:B=>A("citizenship_front",B)}),s.jsx(M,{title:"Citizenship (Back)",docType:"citizenship_back",document:S.citizenshipBack,onUpload:B=>A("citizenship_back",B)})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-lg font-medium",children:"Shop Images"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Images of your shop (interior, exterior, products, etc.)"}),S.shopImages.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:S.shopImages.map((B,z)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:B.image_url,alt:`Shop image ${z+1}`,className:"w-full h-full object-cover"})}),B.is_primary&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"})]},z))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(ka,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No shop images uploaded"})]})]})]})})]})}),s.jsx("div",{className:"p-4 pb-20",children:s.jsxs(te,{variant:"outline",className:"w-full flex items-center justify-center py-6 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:X,children:[s.jsx(tw,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium text-base",children:"Logout"})]})})]})})})},Jre=()=>{const[e,t]=_.useState("basic"),[n,r]=_.useState(!1),[a,i]=_.useState(!1),[o,l]=_.useState(null),[d,h]=_.useState(!0),[f,u]=_.useState(null),[m,p]=_.useState([]),[w,v]=_.useState([]),[x,y]=_.useState({businessName:"Fresh Farm Valley",ownerName:"Ram Sharma",email:"ram@freshfarm.com",phone:"+977 9841234567",whatsapp:"+977 9841234567",avatar:"",businessType:"grocery",description:"Certified organic farm serving Kathmandu Valley for 10+ years. We specialize in fresh vegetables, fruits, and dairy products.",categories:["Vegetables","Fruits","Dairy","Organic"],establishedYear:"2014",gstNumber:"27AABCU9603R1ZX",panNumber:"AABCU9603R",address:"Balkumari, Lalitpur",city:"Kathmandu",state:"Bagmati",pincode:"44700",landmark:"Near Balkumari Temple",deliveryRadius:"5",minOrderAmount:"200",deliveryFee:"50",freeDeliveryAbove:"500",estimatedDeliveryTime:"30-45",isOpen:!0,openingHours:{monday:{open:"06:00",close:"21:00",closed:!1},tuesday:{open:"06:00",close:"21:00",closed:!1},wednesday:{open:"06:00",close:"21:00",closed:!1},thursday:{open:"06:00",close:"21:00",closed:!1},friday:{open:"06:00",close:"21:00",closed:!1},saturday:{open:"06:00",close:"21:00",closed:!1},sunday:{open:"07:00",close:"20:00",closed:!1}},bankName:"Nepal Bank Limited",accountNumber:"1234567890123456",ifscCode:"NBLNPKA",accountHolderName:"Ram Sharma",upiId:"ram@nbl",businessLicense:"",gstCertificate:"",fssaiLicense:"",autoAcceptOrders:!1,notificationSettings:{orderAlerts:!0,messageAlerts:!0,promotionalEmails:!1}}),b=[{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"},{value:"meat",label:"Meat Shop"},{value:"dairy",label:"Dairy Products"}],[j,N]=_.useState([]);_.useEffect(()=>{(async()=>{try{const{response:D,data:A}=await Ve("/categories/");D.ok&&A.categories?N(A.categories.map(M=>M.name)):N(["Vegetables","Fruits","Dairy","Meat","Bakery","Beverages","Snacks","Organic","Frozen","Spices","Grains","Oil","Electronics","Decoration"])}catch(D){console.error("Error fetching categories:",D),N(["Vegetables","Fruits","Dairy","Meat","Bakery","Beverages","Snacks","Organic","Frozen","Spices","Grains","Oil","Electronics","Decoration"])}})()},[]);const S=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],P=(C,D)=>{y(A=>({...A,[C]:D}))},T=(C,D,A)=>{y(M=>({...M,[C]:{...M[C],[D]:A}}))};_.useEffect(()=>{E()},[]);const E=async()=>{var C,D,A,M;try{if(h(!0),!localStorage.getItem("token")){u("No authentication token found");return}const{response:X,data:U}=await Ve("/vendor-profiles/");if(X.ok&&U)if(console.log("Full API Response:",U),U.results&&U.results.length>0){const F=U.results[0];console.log("Vendor Profile:",F),console.log("Documents:",F.documents),console.log("Shop Images:",F.shop_images),console.log("Categories:",F.categories),p(F.documents||[]),v(F.shop_images||[]),y({businessName:F.business_name||"",ownerName:F.owner_name||"",email:F.business_email||"",phone:F.business_phone||"",whatsapp:F.business_phone||"",avatar:"",businessType:F.business_type||"grocery",description:F.description||"",categories:F.categories||[],establishedYear:F.established_year||"",gstNumber:F.gst_number||"",panNumber:F.pan_number||"",address:F.business_address||"",city:F.city||"",state:F.state||"",pincode:F.pincode||"",landmark:F.landmark||"",deliveryRadius:((C=F.delivery_radius)==null?void 0:C.toString())||"5",minOrderAmount:((D=F.min_order_amount)==null?void 0:D.toString())||"200",deliveryFee:((A=F.delivery_fee)==null?void 0:A.toString())||"50",freeDeliveryAbove:((M=F.free_delivery_above)==null?void 0:M.toString())||"500",estimatedDeliveryTime:F.estimated_delivery_time||"30-45",isOpen:F.is_active||!1,openingHours:{monday:{open:F.monday_open||"06:00",close:F.monday_close||"21:00",closed:F.monday_closed||!1},tuesday:{open:F.tuesday_open||"06:00",close:F.tuesday_close||"21:00",closed:F.tuesday_closed||!1},wednesday:{open:F.wednesday_open||"06:00",close:F.wednesday_close||"21:00",closed:F.wednesday_closed||!1},thursday:{open:F.thursday_open||"06:00",close:F.thursday_close||"21:00",closed:F.thursday_closed||!1},friday:{open:F.friday_open||"06:00",close:F.friday_close||"21:00",closed:F.friday_closed||!1},saturday:{open:F.saturday_open||"06:00",close:F.saturday_close||"21:00",closed:F.saturday_closed||!1},sunday:{open:F.sunday_open||"07:00",close:F.sunday_close||"20:00",closed:F.sunday_closed||!1}},bankName:F.bank_name||"",accountNumber:F.account_number||"",ifscCode:F.ifsc_code||"",accountHolderName:F.account_holder_name||"",upiId:F.upi_id||"",businessLicense:F.business_license_file_url||F.business_license_file||"",gstCertificate:F.gst_certificate_url||F.gst_certificate||"",fssaiLicense:F.fssai_license_url||F.fssai_license||"",autoAcceptOrders:F.auto_accept_orders||!1,notificationSettings:{orderAlerts:!0,messageAlerts:!0,promotionalEmails:!1}})}else i(!0);else throw new Error("Failed to fetch vendor profile")}catch(Z){console.error("Error fetching vendor profile:",Z),u("Failed to load vendor profile")}finally{h(!1)}},I=async()=>{var C,D,A;try{if(!localStorage.getItem("token"))return;const Z={business_name:x.businessName,owner_name:x.ownerName,business_email:x.email,business_phone:x.phone,business_type:x.businessType,description:x.description,categories:x.categories,established_year:x.establishedYear,gst_number:x.gstNumber,pan_number:x.panNumber,business_address:x.address,city:x.city,state:x.state,pincode:x.pincode,landmark:x.landmark,delivery_radius:parseFloat(x.deliveryRadius),min_order_amount:parseFloat(x.minOrderAmount),delivery_fee:parseFloat(x.deliveryFee),free_delivery_above:parseFloat(x.freeDeliveryAbove),estimated_delivery_time:x.estimatedDeliveryTime,is_active:x.isOpen,monday_open:x.openingHours.monday.open,monday_close:x.openingHours.monday.close,monday_closed:x.openingHours.monday.closed,tuesday_open:x.openingHours.tuesday.open,tuesday_close:x.openingHours.tuesday.close,tuesday_closed:x.openingHours.tuesday.closed,wednesday_open:x.openingHours.wednesday.open,wednesday_close:x.openingHours.wednesday.close,wednesday_closed:x.openingHours.wednesday.closed,thursday_open:x.openingHours.thursday.open,thursday_close:x.openingHours.thursday.close,thursday_closed:x.openingHours.thursday.closed,friday_open:x.openingHours.friday.open,friday_close:x.openingHours.friday.close,friday_closed:x.openingHours.friday.closed,saturday_open:x.openingHours.saturday.open,saturday_close:x.openingHours.saturday.close,saturday_closed:x.openingHours.saturday.closed,sunday_open:x.openingHours.sunday.open,sunday_close:x.openingHours.sunday.close,sunday_closed:x.openingHours.sunday.closed,bank_name:x.bankName,account_number:x.accountNumber,ifsc_code:x.ifscCode,account_holder_name:x.accountHolderName,upi_id:x.upiId,auto_accept_orders:x.autoAcceptOrders},X=a?null:(A=(D=(C=(await Ve("/vendor-profiles/")).data)==null?void 0:C.results)==null?void 0:D[0])==null?void 0:A.id,U=a?"/vendor-profiles/":`/vendor-profiles/${X}/`,F=a?"POST":"PATCH",{response:B}=await Ve(U,{method:F,body:JSON.stringify(Z)});if(B.ok)r(!1),i(!1),alert("Profile saved successfully!");else throw new Error("Failed to save profile")}catch(M){console.error("Error saving profile:",M),alert("Failed to save profile. Please try again.")}},O=async(C,D)=>{var M,Z,X;if(!C)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(C.type)){alert("Please upload only PDF, JPG, JPEG, or PNG files.");return}if(C.size>5*1024*1024){alert("File size must be less than 5MB.");return}l(D);try{const U=new FormData;U.append(D,C);const B=(X=(Z=(M=(await Ve("/vendor-profiles/")).data)==null?void 0:M.results)==null?void 0:Z[0])==null?void 0:X.id;if(!B)throw new Error("Vendor profile not found");const{response:z,data:H}=await Ve(`/vendor-profiles/${B}/`,{method:"PATCH",body:U});if(!z.ok)throw new Error("Upload failed");const q=H[`${D}_url`]||H[D];P(D,q),alert("Document uploaded successfully!"),await E()}catch(U){console.error("Upload error:",U),alert("Failed to upload document. Please try again.")}finally{l(null)}},R=[{id:"basic",label:"Basic Info",icon:Jr},{id:"business",label:"Business",icon:yn},{id:"location",label:"Location",icon:es},{id:"operations",label:"Operations",icon:qt},{id:"timing",label:"Timing",icon:Yr},{id:"banking",label:"Banking",icon:bl},{id:"documents",label:"Documents",icon:wa},{id:"debug",label:"Debug",icon:er},{id:"settings",label:"Settings",icon:er}];return d?s.jsx(rs,{title:"Profile Management",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):f?s.jsx(rs,{title:"Profile Management",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:f}),s.jsx(te,{onClick:E,children:"Retry"})]})})}):s.jsx(rs,{title:"Profile Management",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(te,{variant:"ghost",size:"sm",className:"p-2",children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-semibold text-lg",children:"Profile Management"}),a&&s.jsx("p",{className:"text-sm text-gray-600",children:"Complete your profile setup"})]})]}),s.jsx(te,{onClick:()=>n?I():r(!0),className:"bg-green-600 hover:bg-green-700",children:n?s.jsxs(s.Fragment,{children:[s.jsx(od,{className:"h-4 w-4 mr-2"}),"Save"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ch,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),s.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl",children:x.avatar}),n&&s.jsx(te,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full p-0",children:s.jsx(ka,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"font-semibold text-lg",children:x.businessName}),s.jsx("p",{className:"text-gray-600 text-sm",children:x.ownerName}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Ye,{variant:x.isOpen?"default":"destructive",className:"text-xs",children:x.isOpen?"Open":"Closed"}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(vs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:"4.8 (342 reviews)"})]})]})]})]})}),s.jsx("div",{className:"bg-white",children:s.jsxs(Fa,{value:e,onValueChange:t,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(ia,{className:"grid grid-cols-4 lg:grid-cols-9 w-full min-w-max",children:R.map(C=>s.jsxs(Lt,{value:C.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(C.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:C.label})]},C.id))})}),s.jsx(yt,{value:"basic",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"businessName",children:"Business Name *"}),s.jsx(je,{id:"businessName",value:x.businessName,onChange:C=>P("businessName",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"ownerName",children:"Owner Name *"}),s.jsx(je,{id:"ownerName",value:x.ownerName,onChange:C=>P("ownerName",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"email",children:"Email *"}),s.jsx(je,{id:"email",type:"email",value:x.email,onChange:C=>P("email",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"phone",children:"Phone Number *"}),s.jsx(je,{id:"phone",value:x.phone,onChange:C=>P("phone",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"whatsapp",children:"WhatsApp Number"}),s.jsx(je,{id:"whatsapp",value:x.whatsapp,onChange:C=>P("whatsapp",C.target.value),disabled:!n})]})]})}),s.jsxs(yt,{value:"business",className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"businessType",children:"Business Type *"}),s.jsxs(Yt,{value:x.businessType,onValueChange:C=>P("businessType",C),disabled:!n,children:[s.jsx(Kt,{children:s.jsx(Xt,{})}),s.jsx(Zt,{children:b.map(C=>s.jsx(st,{value:C.value,children:C.label},C.value))})]})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"establishedYear",children:"Established Year"}),s.jsx(je,{id:"establishedYear",value:x.establishedYear,onChange:C=>P("establishedYear",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"gstNumber",children:"GST Number"}),s.jsx(je,{id:"gstNumber",value:x.gstNumber,onChange:C=>P("gstNumber",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"panNumber",children:"PAN Number"}),s.jsx(je,{id:"panNumber",value:x.panNumber,onChange:C=>P("panNumber",C.target.value),disabled:!n})]})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"description",children:"Business Description *"}),s.jsx(Ys,{id:"description",value:x.description,onChange:C=>P("description",C.target.value),disabled:!n,rows:3})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Categories"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[x.categories.map(C=>s.jsxs(Ye,{variant:"default",className:"cursor-pointer",onClick:()=>{if(!n)return;const D=x.categories.filter(A=>A!==C);P("categories",D)},children:[C," ",n&&""]},C)),j.filter(C=>!x.categories.includes(C)).map(C=>s.jsx(Ye,{variant:"outline",className:"cursor-pointer",onClick:()=>{if(!n)return;const D=[...x.categories,C];P("categories",D)},children:C},C))]}),x.categories.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"No categories selected"})]})]}),s.jsx(yt,{value:"location",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(xe,{htmlFor:"address",children:"Full Address *"}),s.jsx(Ys,{id:"address",value:x.address,onChange:C=>P("address",C.target.value),disabled:!n,rows:2})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"city",children:"City *"}),s.jsx(je,{id:"city",value:x.city,onChange:C=>P("city",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"state",children:"State *"}),s.jsx(je,{id:"state",value:x.state,onChange:C=>P("state",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"pincode",children:"Pincode *"}),s.jsx(je,{id:"pincode",value:x.pincode,onChange:C=>P("pincode",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"landmark",children:"Landmark"}),s.jsx(je,{id:"landmark",value:x.landmark,onChange:C=>P("landmark",C.target.value),disabled:!n})]})]})}),s.jsx(yt,{value:"operations",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"deliveryRadius",children:"Delivery Radius (km) *"}),s.jsx(je,{id:"deliveryRadius",value:x.deliveryRadius,onChange:C=>P("deliveryRadius",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"minOrderAmount",children:"Minimum Order Amount () *"}),s.jsx(je,{id:"minOrderAmount",value:x.minOrderAmount,onChange:C=>P("minOrderAmount",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"deliveryFee",children:"Delivery Fee () *"}),s.jsx(je,{id:"deliveryFee",value:x.deliveryFee,onChange:C=>P("deliveryFee",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"freeDeliveryAbove",children:"Free Delivery Above ()"}),s.jsx(je,{id:"freeDeliveryAbove",value:x.freeDeliveryAbove,onChange:C=>P("freeDeliveryAbove",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"estimatedDeliveryTime",children:"Estimated Delivery Time (mins) *"}),s.jsx(je,{id:"estimatedDeliveryTime",value:x.estimatedDeliveryTime,onChange:C=>P("estimatedDeliveryTime",C.target.value),disabled:!n})]})]})}),s.jsxs(yt,{value:"timing",className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(xe,{children:"Store Status"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm",children:"Closed"}),s.jsx(Vt,{checked:x.isOpen,onCheckedChange:C=>P("isOpen",C),disabled:!n}),s.jsx("span",{className:"text-sm",children:"Open"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(xe,{children:"Opening Hours"}),S.map(C=>s.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg",children:[s.jsx("div",{className:"w-20 text-sm font-medium capitalize",children:C}),s.jsx(Vt,{checked:!x.openingHours[C].closed,onCheckedChange:D=>T("openingHours",C,{...x.openingHours[C],closed:!D}),disabled:!n}),!x.openingHours[C].closed&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(je,{type:"time",value:x.openingHours[C].open,onChange:D=>T("openingHours",C,{...x.openingHours[C],open:D.target.value}),disabled:!n,className:"w-32"}),s.jsx("span",{className:"text-sm",children:"to"}),s.jsx(je,{type:"time",value:x.openingHours[C].close,onChange:D=>T("openingHours",C,{...x.openingHours[C],close:D.target.value}),disabled:!n,className:"w-32"})]}),x.openingHours[C].closed&&s.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},C))]})]}),s.jsx(yt,{value:"banking",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"bankName",children:"Bank Name *"}),s.jsx(je,{id:"bankName",value:x.bankName,onChange:C=>P("bankName",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"accountHolderName",children:"Account Holder Name *"}),s.jsx(je,{id:"accountHolderName",value:x.accountHolderName,onChange:C=>P("accountHolderName",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"accountNumber",children:"Account Number *"}),s.jsx(je,{id:"accountNumber",value:x.accountNumber,onChange:C=>P("accountNumber",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"ifscCode",children:"IFSC Code *"}),s.jsx(je,{id:"ifscCode",value:x.ifscCode,onChange:C=>P("ifscCode",C.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"upiId",children:"UPI ID"}),s.jsx(je,{id:"upiId",value:x.upiId,onChange:C=>P("upiId",C.target.value),disabled:!n})]})]})}),s.jsxs(yt,{value:"documents",className:"p-4 space-y-4",children:[x.businessName&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Uploaded Documents"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Additional Documents (",m.length,")"]}),s.jsx("div",{className:"space-y-2",children:m.length>0?m.map((C,D)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("span",{className:"text-sm",children:["Document ",D+1]}),s.jsx("a",{href:C.document_url||C.document,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-sm hover:underline",children:"View"})]},C.id||D)):s.jsx("p",{className:"text-sm text-gray-600",children:"No additional documents uploaded"})})]}),s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Shop Images (",w.length,")"]}),s.jsx("div",{className:"space-y-2",children:w.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-2",children:w.map((C,D)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:C.image_url||C.image,alt:`Shop ${D+1}`,className:"w-full h-20 object-cover rounded border",onError:A=>{A.currentTarget.style.display="none"}}),C.is_primary&&s.jsx(Ye,{className:"absolute top-1 left-1 text-xs",children:"Primary"})]},C.id||D))}):s.jsx("p",{className:"text-sm text-gray-600",children:"No shop images uploaded"})})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-base font-medium",children:"Business License"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload your business registration certificate"})]}),s.jsx(Ye,{variant:x.businessLicense?"default":"outline",children:x.businessLicense?"Uploaded":"Required"})]}),x.businessLicense?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"Business License Document"}),n&&s.jsx(te,{variant:"outline",size:"sm",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=D=>{var M;const A=(M=D.target.files)==null?void 0:M[0];A&&O(A,"business_license_file")},C.click()},disabled:o==="business_license_file",children:o==="business_license_file"?"Uploading...":"Replace"})]}):s.jsxs(te,{variant:"outline",className:"w-full",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=D=>{var M;const A=(M=D.target.files)==null?void 0:M[0];A&&O(A,"business_license_file")},C.click()},disabled:o==="business_license_file",children:[s.jsx(wa,{className:"h-4 w-4 mr-2"}),o==="business_license_file"?"Uploading...":"Upload Business License"]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-base font-medium",children:"GST Certificate"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload your GST registration certificate"})]}),s.jsx(Ye,{variant:x.gstCertificate?"default":"outline",children:x.gstCertificate?"Uploaded":"Optional"})]}),x.gstCertificate?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"GST Certificate Document"}),n&&s.jsx(te,{variant:"outline",size:"sm",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=D=>{var M;const A=(M=D.target.files)==null?void 0:M[0];A&&O(A,"gst_certificate")},C.click()},disabled:o==="gst_certificate",children:o==="gst_certificate"?"Uploading...":"Replace"})]}):s.jsxs(te,{variant:"outline",className:"w-full",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=D=>{var M;const A=(M=D.target.files)==null?void 0:M[0];A&&O(A,"gst_certificate")},C.click()},disabled:o==="gst_certificate",children:[s.jsx(wa,{className:"h-4 w-4 mr-2"}),o==="gst_certificate"?"Uploading...":"Upload GST Certificate"]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-base font-medium",children:"FSSAI License"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload your food safety license (for food businesses)"})]}),s.jsx(Ye,{variant:x.fssaiLicense?"default":"outline",children:x.fssaiLicense?"Uploaded":"Optional"})]}),x.fssaiLicense?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"FSSAI License Document"}),n&&s.jsx(te,{variant:"outline",size:"sm",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=D=>{var M;const A=(M=D.target.files)==null?void 0:M[0];A&&O(A,"fssai_license")},C.click()},disabled:o==="fssai_license",children:o==="fssai_license"?"Uploading...":"Replace"})]}):s.jsxs(te,{variant:"outline",className:"w-full",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.jpg,.jpeg,.png",C.onchange=D=>{var M;const A=(M=D.target.files)==null?void 0:M[0];A&&O(A,"fssai_license")},C.click()},disabled:o==="fssai_license",children:[s.jsx(wa,{className:"h-4 w-4 mr-2"}),o==="fssai_license"?"Uploading...":"Upload FSSAI License"]})]}),s.jsx("div",{className:"text-center py-2 text-gray-500 text-xs",children:"Supported formats: PDF, JPG, JPEG, PNG (Max 5MB)"})]})]}),s.jsx(yt,{value:"debug",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"API Response Debug"}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-lg overflow-auto max-h-96",children:s.jsx("pre",{className:"text-xs",children:JSON.stringify({documents:m,shopImages:w,categories:x.categories,availableCategories:j},null,2)})})]})}),s.jsx(yt,{value:"settings",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Auto Accept Orders"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Automatically accept new orders"})]}),s.jsx(Vt,{checked:x.autoAcceptOrders,onCheckedChange:C=>P("autoAcceptOrders",C),disabled:!n})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(xe,{children:"Notification Settings"}),s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Order Alerts"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified for new orders"})]}),s.jsx(Vt,{checked:x.notificationSettings.orderAlerts,onCheckedChange:C=>T("notificationSettings","orderAlerts",C),disabled:!n})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Message Alerts"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified for new messages"})]}),s.jsx(Vt,{checked:x.notificationSettings.messageAlerts,onCheckedChange:C=>T("notificationSettings","messageAlerts",C),disabled:!n})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Promotional Emails"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive promotional emails"})]}),s.jsx(Vt,{checked:x.notificationSettings.promotionalEmails,onCheckedChange:C=>T("notificationSettings","promotionalEmails",C),disabled:!n})]})]})]})})]})}),a&&s.jsxs("div",{className:"fixed bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-lg p-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Profile Completion"}),s.jsx("span",{className:"text-sm text-gray-600",children:"6/8 sections"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"75%"}})}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Complete all sections to activate your store"})]})]})})},Qre=()=>{const e=lt(),[t,n]=_.useState(!0),[r,a]=_.useState(""),[i,o]=_.useState(!1),[l,d]=_.useState(""),[h,f]=_.useState(!1);_.useEffect(()=>{(async()=>{var p;try{if(!await Ae.isAuthenticated())return;const v=1,{response:x,data:y}=await Ve(`/vendor-profiles/${v}/`);if(!x.ok)throw new Error("Failed to fetch profile");const b=((p=y==null?void 0:y.user_info)==null?void 0:p.plain_password)||"";a(b)}catch(w){console.error(w)}})()},[]);const u=async()=>{if(!l){_u.error("New password is required");return}f(!0);try{const{simplePersistentAuth:m}=await Ue(async()=>{const{simplePersistentAuth:y}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:y}},void 0);if(!await m.isVendorLoggedIn()){e("/vendor/login");return}const w=await m.getVendorAuth();w&&await Ae.setAuth(w.token,w.user);const{response:v,data:x}=await Ve("/change-password/simple/",{method:"POST",body:JSON.stringify({new_password:l})});if(!v.ok)throw new Error(x.error||"Failed to change password");await Ae.setAuth(x.token,await Ae.getUser()),_u.success("Password changed successfully"),a(l),d(""),o(!1)}catch(m){_u.error(m instanceof Error?m.message:"Failed to change password")}finally{f(!1)}};return s.jsx(rs,{title:"Security & Login",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center gap-3 p-4",children:[s.jsx(te,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Security & Login"})]})}),s.jsx("div",{className:"p-4 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(er,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"font-semibold",children:"Password"})]}),i?s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{children:"New Password"}),s.jsx(je,{type:"text",value:l,onChange:m=>d(m.target.value)}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{onClick:u,disabled:h,children:"Save"}),s.jsx(te,{variant:"outline",onClick:()=>o(!1),disabled:h,children:"Cancel"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx(xe,{children:"Your Password"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(je,{type:"text",value:r,disabled:!0,className:"bg-gray-100"}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>n(!t),children:t?s.jsx(Qb,{className:"h-4 w-4"}):s.jsx(qs,{className:"h-4 w-4"})})]}),s.jsx(te,{onClick:()=>o(!0),disabled:h,children:"Change Password"})]})]})})]})})},eae=()=>{const e=lt(),{toast:t}=ns(),[n,r]=_.useState("business"),[a,i]=_.useState(!1),[o,l]=_.useState(!0),[d,h]=_.useState(!1),[f,u]=_.useState(""),[m,p]=_.useState(null),[w,v]=_.useState([]),[x,y]=_.useState({businessName:"Business Name",ownerName:"Owner Name",categories:[],operatingHours:{monday:{open:"06:00",close:"21:00",closed:!1},tuesday:{open:"06:00",close:"21:00",closed:!1},wednesday:{open:"06:00",close:"21:00",closed:!1},thursday:{open:"06:00",close:"21:00",closed:!1},friday:{open:"06:00",close:"21:00",closed:!1},saturday:{open:"06:00",close:"21:00",closed:!1},sunday:{open:"07:00",close:"20:00",closed:!1}},deliverySettings:{deliveryRadius:"5",minOrderAmount:"200"},profileImage:null,isActive:!1,statusOverride:!1}),b=R=>{if(!R)return"";const[C,D]=R.split(":").map(Number),A=C>=12?"PM":"AM";return`${C%12||12}:${D.toString().padStart(2,"0")} ${A}`};_.useEffect(()=>{N(),j()},[]);const j=async()=>{try{const{response:R,data:C}=await Ve("/categories/");R.ok&&C.categories&&v(C.categories.map(D=>D.name))}catch(R){console.error("Failed to fetch categories:",R)}},N=async()=>{var R,C,D;try{const{simplePersistentAuth:A}=await Ue(async()=>{const{simplePersistentAuth:F}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:F}},void 0);if(!await A.isVendorLoggedIn()){e("/vendor/login");return}const Z=await A.getVendorAuth();Z&&await Ae.setAuth(Z.token,Z.user);const{response:X,data:U}=await Ve("/vendor-profiles/");if(!X.ok)throw new Error("Failed to fetch company data");if(U.results&&U.results.length>0){const F=U.results[0];p(F.id),y({businessName:F.business_name||"Business Name",ownerName:F.owner_name||"Owner Name",categories:Array.isArray(F.categories)?F.categories:typeof F.categories=="string"?JSON.parse(F.categories||"[]"):[],operatingHours:{monday:{open:F.monday_open||"",close:F.monday_close||"",closed:F.monday_closed||!1},tuesday:{open:F.tuesday_open||"",close:F.tuesday_close||"",closed:F.tuesday_closed||!1},wednesday:{open:F.wednesday_open||"",close:F.wednesday_close||"",closed:F.wednesday_closed||!1},thursday:{open:F.thursday_open||"",close:F.thursday_close||"",closed:F.thursday_closed||!1},friday:{open:F.friday_open||"",close:F.friday_close||"",closed:F.friday_closed||!1},saturday:{open:F.saturday_open||"",close:F.saturday_close||"",closed:F.saturday_closed||!1},sunday:{open:F.sunday_open||"",close:F.sunday_close||"",closed:F.sunday_closed||!1}},deliverySettings:{deliveryRadius:((R=F.delivery_radius)==null?void 0:R.toString())||"5",minOrderAmount:((C=F.min_order_amount)==null?void 0:C.toString())||"200"},profileImage:((D=F.user_info)==null?void 0:D.profile_picture)||null,isActive:F.is_active||!1,statusOverride:F.status_override||!1})}}catch(A){console.error("Error fetching company data:",A),u("Failed to load company data")}finally{l(!1)}},S=async()=>{try{h(!0);const{simplePersistentAuth:R}=await Ue(async()=>{const{simplePersistentAuth:M}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:M}},void 0);if(!await R.isVendorLoggedIn()){e("/vendor/login");return}if(!m)throw new Error("Profile ID not found");const D=new FormData;D.append("business_name",x.businessName),D.append("owner_name",x.ownerName),D.append("categories",JSON.stringify(x.categories)),D.append("delivery_radius",x.deliverySettings.deliveryRadius),D.append("min_order_amount",x.deliverySettings.minOrderAmount);const{response:A}=await Ve(`/vendor-profiles/${m}/`,{method:"PUT",body:D});if(!A.ok){const M=await A.json();throw new Error(M.detail||"Failed to update company data")}t({title:"Success",description:"Company information updated successfully!"}),i(!1),N()}catch(R){console.error("Error saving company data:",R),t({title:"Error",description:R instanceof Error?R.message:"Failed to save company data",variant:"destructive"})}finally{h(!1)}},P=async()=>{try{const{simplePersistentAuth:R}=await Ue(async()=>{const{simplePersistentAuth:Z}=await Promise.resolve().then(()=>Zs);return{simplePersistentAuth:Z}},void 0);if(!await R.isVendorLoggedIn()){e("/vendor/login");return}if(!m)throw new Error("Profile ID not found");const D=!x.isActive,{response:A,data:M}=await Ve(`/vendor-profiles/${m}/toggle-status/`,{method:"POST",body:JSON.stringify({is_active:D})});if(!A.ok)throw new Error((M==null?void 0:M.error)||"Failed to toggle status");y(Z=>({...Z,isActive:M.vendor.is_active,statusOverride:M.vendor.status_override})),t({title:"Success",description:`Status set to ${D?"Active":"Inactive"}`})}catch(R){console.error("Error toggling status:",R),t({title:"Error",description:R instanceof Error?R.message:"Failed to toggle status",variant:"destructive"})}},T=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],E=[{id:"business",label:"Business Details",icon:yn},{id:"timing",label:"Timing",icon:Yr}],I=(R,C)=>{y(D=>({...D,[R]:C}))},O=(R,C,D)=>{y(A=>({...A,[R]:{...A[R],[C]:D}}))};return o?s.jsx(rs,{title:"Company Information",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading company information..."})]})})}):f?s.jsx(rs,{title:"Company Information",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:f}),s.jsx(te,{onClick:N,children:"Retry"})]})})}):s.jsx(rs,{title:"Company Information",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(te,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsx("div",{children:s.jsx("h1",{className:"font-semibold text-lg",children:"Company Information"})})]}),s.jsx(te,{onClick:()=>a?S():i(!0),disabled:d,className:"bg-green-600 hover:bg-green-700",children:d?"Saving...":a?"Save Changes":"Edit"})]})}),s.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"relative",children:x.profileImage?s.jsx("img",{src:x.profileImage||"/images/default-profile.png",alt:"Business Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200",onError:R=>{console.error("Image failed to load:",R.currentTarget.src),R.currentTarget.src="/images/default-profile.png"}}):s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl border-2 border-gray-200",children:""})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"font-semibold text-lg",children:x.businessName}),s.jsx("p",{className:"text-gray-600 text-sm",children:x.ownerName}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(xe,{children:"Status:"}),s.jsx(Vt,{checked:x.isActive,onCheckedChange:P,disabled:!a}),s.jsxs("span",{className:"text-sm",children:[x.isActive?"Active":"Inactive",x.statusOverride&&" (Overridden)"]})]})]})]})}),s.jsx("div",{className:"bg-white",children:s.jsxs(Fa,{value:n,onValueChange:r,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(ia,{className:"grid grid-cols-2 w-full min-w-max",children:E.map(R=>s.jsxs(Lt,{value:R.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(R.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:R.label})]},R.id))})}),s.jsxs(yt,{value:"business",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"space-y-4 max-w-3xl",children:[s.jsx(xe,{children:"Business Categories"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:w.map(R=>s.jsx(Ye,{variant:x.categories.includes(R)?"default":"outline",className:"cursor-pointer",onClick:()=>{if(!a)return;const C=x.categories.includes(R)?x.categories.filter(D=>D!==R):[...x.categories,R];I("categories",C)},children:R},R))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Delivery Radius (km) *"}),s.jsx(je,{value:x.deliverySettings.deliveryRadius,onChange:R=>O("deliverySettings","deliveryRadius",R.target.value),disabled:!a,className:"max-w-xs"})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Minimum Order Amount (Rs) *"}),s.jsx(je,{value:x.deliverySettings.minOrderAmount,onChange:R=>O("deliverySettings","minOrderAmount",R.target.value),disabled:!a,className:"max-w-xs"})]})]})]}),s.jsx(yt,{value:"timing",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-3 max-w-3xl",children:[s.jsx(xe,{children:"Operating Hours"}),T.map(R=>s.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg flex-wrap",children:[s.jsx("div",{className:"w-20 text-sm font-medium capitalize",children:R}),s.jsx(Vt,{checked:!x.operatingHours[R].closed,onCheckedChange:C=>O("operatingHours",R,{...x.operatingHours[R],closed:!C}),disabled:!a}),!x.operatingHours[R].closed&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(je,{type:"time",value:b(x.operatingHours[R].open),onChange:C=>O("operatingHours",R,{...x.operatingHours[R],open:C.target.value}),disabled:!a,className:"w-32"}),s.jsx("span",{className:"text-sm",children:"to"}),s.jsx(je,{type:"time",value:b(x.operatingHours[R].close),onChange:C=>O("operatingHours",R,{...x.operatingHours[R],close:C.target.value}),disabled:!a,className:"w-32"})]}),x.operatingHours[R].closed&&s.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},R))]})})]})})]})})},tae=()=>{const[e,t]=_.useState(""),[n,r]=_.useState(!1),[a,i]=_.useState(null),[o,l]=_.useState([]),[d,h]=_.useState(!0),[f,u]=_.useState(!1),[m,p]=_.useState({}),[w,v]=_.useState([]),[x,y]=_.useState([]),[b,j]=_.useState([]),[N,S]=_.useState([]),[P,T]=_.useState([]),[E,I]=_.useState([]),[O,R]=_.useState(!1),[C,D]=_.useState(!1),[A,M]=_.useState(null),[Z,X]=_.useState([]),[U,F]=_.useState(null),[B,z]=_.useState(new Date().toISOString().split("T")[0]),[H,q]=_.useState(!1),[W,Y]=_.useState(!1),V=lt(),[G,ie]=_.useState({category:"all",status:"all",stock:"all",sortBy:"name"});_.useEffect(()=>{_e(),J()},[]),_.useEffect(()=>{f&&a&&(a.category&&ye(a.category),a.subcategory&&ke(a.subcategory))},[f,a]);const J=async()=>{var se;try{const{apiRequest:we}=await Ue(async()=>{const{apiRequest:Me}=await Promise.resolve().then(()=>hs);return{apiRequest:Me}},void 0),{data:Pe}=await we("/categories/");j(((se=Pe.categories)==null?void 0:se.map(Me=>Me.name))||[])}catch(we){console.error("Failed to fetch categories:",we)}},le=async se=>{try{const{apiRequest:we}=await Ue(async()=>{const{apiRequest:He}=await Promise.resolve().then(()=>hs);return{apiRequest:He}},void 0),{data:Pe}=await we(`/categories/${se}/subcategories/`),Le=(Pe.subcategories||[]).map((He,_t)=>typeof He=="string"?{id:_t+1,name:He}:He);S(Le)}catch(we){console.error("Failed to fetch subcategories:",we),S([])}},ye=async se=>{var we;try{const{apiRequest:Pe}=await Ue(async()=>{const{apiRequest:He}=await Promise.resolve().then(()=>hs);return{apiRequest:He}},void 0),{data:Me}=await Pe("/categories/"),Le=(we=Me.categories)==null?void 0:we.find(He=>He.name===se);if(Le!=null&&Le.id){const{data:He}=await Pe(`/accounts/categories/parameters/?target_id=${Le.id}&target_type=category`);T(He.parameters||[])}else T([])}catch(Pe){console.error("Failed to fetch category parameters:",Pe),T([])}},ke=async se=>{var we;try{const{apiRequest:Pe}=await Ue(async()=>{const{apiRequest:_t}=await Promise.resolve().then(()=>hs);return{apiRequest:_t}},void 0),Me=m.category||(a==null?void 0:a.category);if(!Me)return;const{data:Le}=await Pe(`/categories/${Me}/subcategories/`),He=(we=Le.subcategories)==null?void 0:we.indexOf(se);if(He!==-1){const _t=He+1,{data:It}=await Pe(`/accounts/categories/parameters/?target_id=${_t}&target_type=subcategory`);I(It.parameters||[])}else I([])}catch(Pe){console.error("Failed to fetch subcategory parameters:",Pe),I([])}},Ne=async()=>{try{const{apiRequest:se}=await Ue(async()=>{const{apiRequest:Pe}=await Promise.resolve().then(()=>hs);return{apiRequest:Pe}},void 0),{data:we}=await se("/featured-packages/");X(we.packages||[])}catch(se){console.error("Failed to fetch featured packages:",se),X([])}},_e=async()=>{try{h(!0);const se=await Bl.getProducts(),we=(se==null?void 0:se.results)||se||[];l(Array.isArray(we)?we:[])}catch(se){console.error("Failed to fetch products:",se),l([])}finally{h(!1)}},ne=async(se,we)=>{try{await Bl.updateProduct(se,we),await _e()}catch(Pe){console.error("Failed to update product:",Pe)}},Ce=async se=>{if(window.confirm("Are you sure you want to delete this product?"))try{await Bl.deleteProduct(se),await _e(),i(null)}catch(we){console.error("Failed to delete product:",we)}},ve=async se=>{if(se.featured)try{const{apiRequest:we}=await Ue(async()=>{const{apiRequest:Me}=await Promise.resolve().then(()=>hs);return{apiRequest:Me}},void 0),{data:Pe}=await we(`/products/${se.id}/featured-info/`);if(!Pe.can_modify){cn.error("Cannot Cancel Featured",{description:"Featured period has already started and cannot be cancelled.",duration:4e3});return}M(se),D(!0)}catch(we){console.error("Failed to check featured info:",we)}else M(se),await Ne(),R(!0)},oe=se=>{F(se)},de=async()=>{if(A)try{Y(!0);const{apiRequest:se}=await Ue(async()=>{const{apiRequest:Me}=await Promise.resolve().then(()=>hs);return{apiRequest:Me}},void 0),{response:we,data:Pe}=await se(`/products/${A.id}/reschedule-featured/`,{method:"POST",body:JSON.stringify({start_date:B})});if(!we.ok)throw new Error(Pe.error||"Failed to reschedule");await _e(),D(!1),M(null),z(new Date().toISOString().split("T")[0]),cn.success("Featured Package Rescheduled!",{description:`Start date updated to ${new Date(B).toLocaleDateString()}`,duration:4e3})}catch(se){console.error("Failed to reschedule featured package:",se),cn.error("Reschedule Failed",{description:se.message||"Failed to reschedule package",duration:4e3})}finally{Y(!1)}},Q=async()=>{if(!(!A||!U))try{q(!0);const{apiRequest:se}=await Ue(async()=>{const{apiRequest:Me}=await Promise.resolve().then(()=>hs);return{apiRequest:Me}},void 0),{response:we,data:Pe}=await se("/featured-packages/purchase/",{method:"POST",body:JSON.stringify({product_id:A.id,package_id:U.id,start_date:B})});if(!we.ok)throw new Error(Pe.error||"Failed to purchase package");await _e(),R(!1),M(null),F(null),z(new Date().toISOString().split("T")[0]),cn.success("Featured Package Purchased!",{description:`${A.name} is now featured until ${new Date(Pe.end_date).toLocaleDateString()}. Wallet balance: Rs ${Pe.new_wallet_balance}`,duration:5e3})}catch(se){console.error("Failed to purchase featured package:",se),cn.error("Purchase Failed",{description:se.message||"Failed to purchase package",duration:4e3})}finally{q(!1)}},ae=async()=>{if(a!=null&&a.id&&m)try{const se={...m};w.length>0&&(se.image_files=w),await ne(a.id,se),u(!1),p({}),v([]),y([]),i(null)}catch(se){console.error("Failed to save changes:",se)}},ue=se=>{const we=se.target.files;if(we){const Pe=Array.from(we),Me=Pe.map(Le=>URL.createObjectURL(Le));v(Le=>[...Le,...Pe]),y(Le=>[...Le,...Me])}},re=se=>{URL.revokeObjectURL(x[se]),v(we=>we.filter((Pe,Me)=>Me!==se)),y(we=>we.filter((Pe,Me)=>Me!==se))},ce=async se=>{if(a!=null&&a.id)try{const{apiRequest:we}=await Ue(async()=>{const{apiRequest:Me}=await Promise.resolve().then(()=>hs);return{apiRequest:Me}},void 0);await we(`/products/${a.id}/images/${se}/`,{method:"DELETE"}),await _e();const Pe=await Bl.getProduct(a.id);i(Pe)}catch(we){console.error("Failed to delete image:",we)}},fe=async se=>{if(a!=null&&a.id)try{const{apiRequest:we}=await Ue(async()=>{const{apiRequest:Me}=await Promise.resolve().then(()=>hs);return{apiRequest:Me}},void 0);await we(`/products/${a.id}/images/${se}/set-primary/`,{method:"POST"}),await _e();const Pe=await Bl.getProduct(a.id);i(Pe)}catch(we){console.error("Failed to set primary image:",we)}},ge=Array.isArray(o)?o.filter(se=>{const we=se.name.toLowerCase().includes(e.toLowerCase())||se.sku&&se.sku.toLowerCase().includes(e.toLowerCase()),Pe=G.category==="all"||se.category===G.category,Me=G.status==="all"||se.status===G.status,Le=G.stock==="all"||G.stock==="low"&&se.quantity<=5&&se.quantity>0||G.stock==="out"&&se.quantity===0||G.stock==="available"&&se.quantity>0;return we&&Pe&&Me&&Le}).sort((se,we)=>{switch(G.sortBy){case"price":return we.price-se.price;case"stock":return we.quantity-se.quantity;default:return se.name.localeCompare(we.name)}}):[],me=se=>{switch(se){case"active":return s.jsx("span",{className:"text-xs font-medium text-green-600",children:"Active"});case"draft":return s.jsx("span",{className:"text-xs font-medium text-yellow-600",children:"Draft"});case"archived":return s.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Archived"});default:return s.jsx("span",{className:"text-xs font-medium text-gray-600",children:se})}},be=se=>se===0?s.jsx("span",{className:"text-xs font-medium text-red-600",children:"Out of Stock"}):se<=5?s.jsx("span",{className:"text-xs font-medium text-orange-600",children:"Low Stock"}):s.jsx("span",{className:"text-xs font-medium text-green-600",children:"In Stock"}),Te=se=>{if(!se)return"";const we=document.createElement("div");return we.innerHTML=se,we.textContent||we.innerText||""},Se=se=>se.images&&se.images.length>0?(se.images.find(Pe=>Pe.is_primary)||se.images[0]).image_url:null,Ie=se=>({Vegetables:"",Fruits:"",Dairy:"",Meat:"",Bakery:"",Beverages:"",Snacks:"",Grains:""})[se]||"";return s.jsx(rs,{title:"Product Management",children:s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsx($e,{className:"",children:s.jsx(ze,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(qt,{className:"h-4 w-4 mx-auto mb-0.5 text-blue-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Total"})]})})}),s.jsx($e,{className:"",children:s.jsx(ze,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(sa,{className:"h-4 w-4 mx-auto mb-0.5 text-green-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(se=>se.status==="active").length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Active"})]})})}),s.jsx($e,{className:"",children:s.jsx(ze,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ju,{className:"h-4 w-4 mx-auto mb-0.5 text-orange-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(se=>se.quantity<=5&&se.quantity>0).length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Low"})]})})}),s.jsx($e,{className:"",children:s.jsx(ze,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ju,{className:"h-4 w-4 mx-auto mb-0.5 text-red-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(se=>se.quantity===0).length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Out"})]})})})]}),s.jsx($e,{children:s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Yo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(je,{placeholder:"Search products...",value:e,onChange:se=>t(se.target.value),className:"pl-10"})]}),s.jsx(te,{variant:"outline",size:"icon",onClick:()=>r(!0),children:s.jsx(aa,{className:"h-4 w-4"})})]})})}),s.jsx("div",{children:d?s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx(As,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading products..."})]}):ge.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-2",children:ge.map(se=>s.jsx($e,{className:"overflow-hidden",children:s.jsx(ze,{className:"p-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-center relative",children:[Se(se)?s.jsx("img",{src:Se(se),alt:se.name,className:"w-12 h-12 mx-auto object-cover rounded"}):s.jsx("div",{className:"text-xl",children:Ie(se.category)}),se.featured&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white text-xs px-1 py-0.5 rounded-full font-bold shadow-md",children:"FEATURED"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:se.name}),s.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Rs ",se.price]}),se.cost_price&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Cost: Rs ",se.cost_price]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs text-gray-600",children:["Stock: ",se.quantity]}),be(se.quantity)]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600",children:se.category}),me(se.status)]}),se.subcategory&&s.jsx("div",{className:"text-xs text-gray-500 truncate",children:se.subcategory}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Sold: ",se.total_sold||0]}),s.jsxs("div",{className:"flex gap-1 mt-1",children:[se.featured&&s.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1 rounded",children:""}),se.free_delivery&&s.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1 rounded",children:" Free"}),se.custom_delivery_fee_enabled&&se.custom_delivery_fee&&s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-1 rounded",children:[" Rs ",se.custom_delivery_fee]})]})]}),s.jsxs("div",{className:"flex gap-1 pt-1",children:[s.jsx(te,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>{i(se),u(!1),p({})},children:s.jsx(qs,{className:"h-3 w-3"})}),s.jsx(te,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>{i(se),u(!0),p({...se,dynamic_fields:se.dynamic_fields||{}}),se.category&&le(se.category)},children:s.jsx(Im,{className:"h-3 w-3"})}),s.jsx(te,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>Ce(se.id),children:s.jsx(ro,{className:"h-3 w-3"})})]}),s.jsxs(te,{variant:se.featured?"default":"outline",size:"sm",className:"w-full mt-1 p-1",onClick:()=>ve(se),children:[s.jsx(vs,{className:`h-3 w-3 mr-1 ${se.featured?"fill-current":""}`}),se.featured?"Reschedule":"Mark Featured"]})]})})},se.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(qt,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No products found"}),s.jsxs(te,{className:"mt-4",onClick:()=>V("/vendor/add-product"),children:[s.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})]})}),s.jsx(An,{open:n,onOpenChange:r,children:s.jsxs(wn,{side:"bottom",className:"h-[400px]",children:[s.jsx(On,{children:s.jsx(Rn,{children:"Filter Products"})}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Category"}),s.jsxs(Yt,{value:G.category,onValueChange:se=>ie({...G,category:se}),children:[s.jsx(Kt,{children:s.jsx(Xt,{})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"all",children:"All Categories"}),Array.from(new Set((o||[]).map(se=>se.category))).map(se=>s.jsx(st,{value:se,children:se},se))]})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Status"}),s.jsxs(Yt,{value:G.status,onValueChange:se=>ie({...G,status:se}),children:[s.jsx(Kt,{children:s.jsx(Xt,{})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"all",children:"All Status"}),s.jsx(st,{value:"active",children:"Active"}),s.jsx(st,{value:"draft",children:"Draft"}),s.jsx(st,{value:"archived",children:"Archived"})]})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Stock Level"}),s.jsxs(Yt,{value:G.stock,onValueChange:se=>ie({...G,stock:se}),children:[s.jsx(Kt,{children:s.jsx(Xt,{})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"all",children:"All Stock Levels"}),s.jsx(st,{value:"available",children:"In Stock"}),s.jsx(st,{value:"low",children:"Low Stock"}),s.jsx(st,{value:"out",children:"Out of Stock"})]})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Sort By"}),s.jsxs(Yt,{value:G.sortBy,onValueChange:se=>ie({...G,sortBy:se}),children:[s.jsx(Kt,{children:s.jsx(Xt,{})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"name",children:"Name"}),s.jsx(st,{value:"price",children:"Price"}),s.jsx(st,{value:"stock",children:"Stock"})]})]})]})]})]})}),s.jsx(An,{open:O,onOpenChange:se=>{R(se),se||(F(null),z(new Date().toISOString().split("T")[0]))},children:s.jsxs(wn,{side:"bottom",className:"h-[70vh] overflow-y-auto",children:[s.jsx(On,{children:s.jsx(Rn,{children:"Choose Featured Package"})}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Select a package to feature your product: ",s.jsx("strong",{children:A==null?void 0:A.name})]}),U?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50",children:[s.jsx("h3",{className:"font-semibold text-blue-900",children:U.name}),s.jsxs("p",{className:"text-sm text-blue-700",children:[U.duration_days," days - Rs ",U.amount]})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"start-date",children:"Start Date"}),s.jsx(je,{id:"start-date",type:"date",value:B,min:new Date().toISOString().split("T")[0],onChange:se=>z(se.target.value)}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Featured until: ",new Date(new Date(B).getTime()+U.duration_days*24*60*60*1e3).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{variant:"outline",className:"flex-1",onClick:()=>F(null),disabled:H,children:"Back"}),s.jsx(te,{className:"flex-1",onClick:Q,disabled:H,children:H?s.jsxs(s.Fragment,{children:[s.jsx(As,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Pay Rs ${U.amount}`})]})]}):Z.length>0?s.jsx("div",{className:"grid grid-cols-1 gap-3",children:Z.map(se=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:se.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[se.duration_days," days"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-bold text-green-600",children:["Rs ",se.amount]}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:se.package_type})]})]}),se.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:se.description}),s.jsx(te,{className:"w-full",onClick:()=>oe(se),children:"Select This Package"})]},se.id))}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No featured packages available"})})]})]})}),s.jsx(An,{open:C,onOpenChange:se=>{D(se),se||z(new Date().toISOString().split("T")[0])},children:s.jsxs(wn,{side:"bottom",className:"h-[40vh]",children:[s.jsx(On,{children:s.jsx(Rn,{children:"Reschedule Featured Package"})}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Update the start date for: ",s.jsx("strong",{children:A==null?void 0:A.name})]}),s.jsxs("div",{children:[s.jsx(xe,{htmlFor:"reschedule-date",children:"New Start Date"}),s.jsx(je,{id:"reschedule-date",type:"date",value:B,min:new Date().toISOString().split("T")[0],onChange:se=>z(se.target.value)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{variant:"outline",className:"flex-1",onClick:()=>D(!1),disabled:W,children:"Cancel"}),s.jsx(te,{className:"flex-1",onClick:de,disabled:W,children:W?s.jsxs(s.Fragment,{children:[s.jsx(As,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):"Update Date"})]})]})]})}),s.jsx(An,{open:!!a,onOpenChange:()=>{i(null),u(!1),p({}),v([]),y([])},children:s.jsxs(wn,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[s.jsx(On,{children:s.jsxs(Rn,{className:"flex items-center justify-between",children:[s.jsx("span",{children:f?"Edit Product":"Product Details"}),s.jsx("div",{className:"flex gap-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx(te,{variant:"outline",size:"sm",onClick:()=>{u(!1),p({}),v([]),y([])},children:"Cancel"}),s.jsxs(te,{size:"sm",onClick:ae,children:[s.jsx(od,{className:"h-4 w-4 mr-1"}),"Save"]})]}):s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{u(!0),p({...a,dynamic_fields:(a==null?void 0:a.dynamic_fields)||{}}),a!=null&&a.category&&le(a.category)},children:[s.jsx(Im,{className:"h-4 w-4 mr-1"}),"Edit"]})})]})}),a&&s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Product Images"}),a.images&&a.images.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:a.images.map((se,we)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:se.image_url,alt:`Product ${we+1}`,className:"w-full h-20 object-cover rounded border",onError:Pe=>{var Me;console.log("Image failed to load:",se.image_url),Pe.currentTarget.style.display="none",(Me=Pe.currentTarget.nextElementSibling)==null||Me.classList.remove("hidden")}}),s.jsx("div",{className:"hidden w-full h-20 bg-gray-100 rounded border flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ka,{className:"h-6 w-6 mx-auto mb-1 text-gray-400"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),f&&s.jsx("button",{type:"button",onClick:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),ce(se.id)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:s.jsx(sn,{className:"h-3 w-3"})}),se.is_primary?s.jsx("div",{className:"absolute top-1 left-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Main"}):f?s.jsx("button",{type:"button",onClick:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),fe(se.id)},className:"absolute top-1 left-1 bg-gray-500 hover:bg-blue-500 text-white text-xs px-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Set Main"}):null]},`existing-image-${se.id}`))}):s.jsxs("div",{className:"text-center py-4 text-gray-500",children:[s.jsx(ka,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm",children:"No images uploaded"})]}),x.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"New Images:"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:x.map((se,we)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:se,alt:`New ${we+1}`,className:"w-full h-20 object-cover rounded border"}),s.jsx("button",{type:"button",onClick:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),re(we)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:s.jsx(sn,{className:"h-3 w-3"})})]},`new-image-${we}`))})]}),f&&s.jsxs("div",{className:"mt-2",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ue,className:"hidden",id:"image-upload"}),s.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[s.jsx(ka,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Add More Images"})]})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Product Name"}),f?s.jsx(je,{value:m.name||"",onChange:se=>p({...m,name:se.target.value})}):s.jsx("p",{className:"text-sm font-medium",children:a.name})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Selling Price"}),f?s.jsx(je,{type:"number",value:m.price||"",onChange:se=>p({...m,price:Number(se.target.value)})}):s.jsxs("p",{className:"text-sm font-medium",children:["Rs ",a.price]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Stock Quantity"}),f?s.jsx(je,{type:"number",value:m.quantity||"",onChange:se=>p({...m,quantity:Number(se.target.value)})}):s.jsx("p",{className:"text-sm font-medium",children:a.quantity})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Category"}),f?s.jsxs(Yt,{value:m.category||a.category,onValueChange:se=>{p({...m,category:se,subcategory:""}),le(se),ye(se),I([])},children:[s.jsx(Kt,{children:s.jsx(Xt,{})}),s.jsx(Zt,{children:b.map(se=>s.jsx(st,{value:se,children:se},se))})]}):s.jsx("p",{className:"text-sm font-medium",children:a.category})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Subcategory"}),f?s.jsxs(Yt,{value:m.subcategory||a.subcategory||"",onValueChange:se=>{p({...m,subcategory:se}),ke(se)},children:[s.jsx(Kt,{children:s.jsx(Xt,{placeholder:"Select subcategory"})}),s.jsx(Zt,{children:N.map(se=>s.jsx(st,{value:se.name,children:se.name},se.id))})]}):s.jsx("p",{className:"text-sm font-medium",children:a.subcategory||"N/A"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Cost Price"}),f?s.jsx(je,{type:"number",value:m.cost_price||"",onChange:se=>p({...m,cost_price:Number(se.target.value)||void 0})}):s.jsx("p",{className:"text-sm font-medium",children:a.cost_price?`Rs ${a.cost_price}`:"N/A"})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"SKU"}),f?s.jsx(je,{value:m.sku||"",onChange:se=>p({...m,sku:se.target.value})}):s.jsx("p",{className:"text-sm font-medium",children:a.sku||"N/A"})]})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Status"}),f?s.jsxs(Yt,{value:m.status||a.status,onValueChange:se=>p({...m,status:se}),children:[s.jsx(Kt,{children:s.jsx(Xt,{})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"active",children:"Active"}),s.jsx(st,{value:"draft",children:"Draft"}),s.jsx(st,{value:"archived",children:"Archived"})]})]}):s.jsx("div",{children:me(a.status)})]}),s.jsxs("div",{children:[s.jsx(xe,{children:"Description"}),f?s.jsx(Ys,{value:Te(m.description||""),onChange:se=>p({...m,description:se.target.value}),rows:3}):s.jsx("p",{className:"text-sm text-gray-600",children:Te(a.description)})]}),f&&P.length>0&&s.jsxs("div",{children:[s.jsx(xe,{children:"Category Details"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:P.map(se=>{var Pe,Me;const we=((Pe=m.dynamic_fields)==null?void 0:Pe[se.name])||"";return s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs",children:se.label}),se.field_type==="text"||se.field_type==="number"?s.jsx(je,{type:se.field_type,value:we,placeholder:se.placeholder,onChange:Le=>p({...m,dynamic_fields:{...m.dynamic_fields,[se.name]:se.field_type==="number"?Number(Le.target.value):Le.target.value}})}):se.field_type==="select"?s.jsxs(Yt,{value:we,onValueChange:Le=>p({...m,dynamic_fields:{...m.dynamic_fields,[se.name]:Le}}),children:[s.jsx(Kt,{children:s.jsx(Xt,{placeholder:`Select ${se.label}`})}),s.jsx(Zt,{children:(Me=se.options)==null?void 0:Me.map(Le=>s.jsx(st,{value:Le,children:Le},Le))})]}):se.field_type==="boolean"?s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx(Vt,{checked:!!we,onCheckedChange:Le=>p({...m,dynamic_fields:{...m.dynamic_fields,[se.name]:Le}})}),s.jsx(xe,{className:"text-xs",children:se.label})]}):s.jsx(je,{value:Array.isArray(we)?we.join(", "):String(we),onChange:Le=>p({...m,dynamic_fields:{...m.dynamic_fields,[se.name]:Le.target.value}})})]},se.name)})})]}),f&&E.length>0&&s.jsxs("div",{children:[s.jsx(xe,{children:"Subcategory Details"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:E.map(se=>{var Pe,Me;const we=((Pe=m.dynamic_fields)==null?void 0:Pe[se.name])||"";return s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs",children:se.label}),se.field_type==="text"||se.field_type==="number"?s.jsx(je,{type:se.field_type,value:we,placeholder:se.placeholder,onChange:Le=>p({...m,dynamic_fields:{...m.dynamic_fields,[se.name]:se.field_type==="number"?Number(Le.target.value):Le.target.value}})}):se.field_type==="select"?s.jsxs(Yt,{value:we,onValueChange:Le=>p({...m,dynamic_fields:{...m.dynamic_fields,[se.name]:Le}}),children:[s.jsx(Kt,{children:s.jsx(Xt,{placeholder:`Select ${se.label}`})}),s.jsx(Zt,{children:(Me=se.options)==null?void 0:Me.map(Le=>s.jsx(st,{value:Le,children:Le},Le))})]}):se.field_type==="boolean"?s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx(Vt,{checked:!!we,onCheckedChange:Le=>p({...m,dynamic_fields:{...m.dynamic_fields,[se.name]:Le}})}),s.jsx(xe,{className:"text-xs",children:se.label})]}):s.jsx(je,{value:Array.isArray(we)?we.join(", "):String(we),onChange:Le=>p({...m,dynamic_fields:{...m.dynamic_fields,[se.name]:Le.target.value}})})]},se.name)})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xe,{children:"Free Delivery"}),f?s.jsx(Vt,{checked:m.free_delivery??a.free_delivery,onCheckedChange:se=>{p({...m,free_delivery:se,custom_delivery_fee_enabled:se?!1:m.custom_delivery_fee_enabled,custom_delivery_fee:se?null:m.custom_delivery_fee})}}):s.jsx(Vt,{checked:a.free_delivery,disabled:!0})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xe,{children:"Custom Delivery Fee"}),f?s.jsx(Vt,{checked:(m.custom_delivery_fee_enabled??a.custom_delivery_fee_enabled)&&!(m.free_delivery??a.free_delivery),disabled:m.free_delivery??a.free_delivery,onCheckedChange:se=>{p({...m,custom_delivery_fee_enabled:se,custom_delivery_fee:se?m.custom_delivery_fee:null})}}):s.jsx(Vt,{checked:a.custom_delivery_fee_enabled&&!a.free_delivery,disabled:!0})]}),f&&(m.custom_delivery_fee_enabled??a.custom_delivery_fee_enabled)&&!(m.free_delivery??a.free_delivery)&&s.jsxs("div",{children:[s.jsx(xe,{children:"Delivery Fee Amount"}),s.jsx(je,{type:"number",step:"0.01",placeholder:"Enter delivery fee",value:m.custom_delivery_fee??a.custom_delivery_fee??"",onChange:se=>{const we=se.target.value;p({...m,custom_delivery_fee:we?Number(we):null})}})]}),!f&&a.custom_delivery_fee_enabled&&a.custom_delivery_fee&&!a.free_delivery&&s.jsxs("div",{children:[s.jsx(xe,{children:"Delivery Fee Amount"}),s.jsxs("p",{className:"text-sm font-medium",children:["Rs ",a.custom_delivery_fee]})]})]}),a.dynamic_fields&&Object.keys(a.dynamic_fields).length>0&&s.jsxs("div",{children:[s.jsx(xe,{children:"Product Parameters"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:Object.entries(a.dynamic_fields).map(([se,we])=>s.jsxs("div",{className:"border rounded p-2",children:[s.jsx(xe,{className:"text-xs text-gray-600",children:se.replace("_"," ").toUpperCase()}),s.jsx("p",{className:"text-sm font-medium",children:Array.isArray(we)?we.join(", "):typeof we=="boolean"?we?"Yes":"No":String(we)})]},se))})]}),a.tags&&a.tags.length>0&&s.jsxs("div",{children:[s.jsx(xe,{children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.tags.map((se,we)=>s.jsx(Ye,{variant:"secondary",className:"text-xs",children:se},we))})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2 border-t",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs text-gray-500",children:"Total Sold"}),s.jsxs("p",{className:"text-sm font-medium",children:[a.total_sold||0," units"]})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs text-gray-500",children:"Created"}),s.jsx("p",{className:"text-xs",children:a.created_at?new Date(a.created_at).toLocaleDateString():"N/A"})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-xs text-gray-500",children:"Updated"}),s.jsx("p",{className:"text-xs",children:a.updated_at?new Date(a.updated_at).toLocaleDateString():"N/A"})]})]})]})]})]})})]})})},sae=()=>{const e=lt(),{toast:t}=ns(),[n,r]=_.useState([]),[a,i]=_.useState(!0);_.useEffect(()=>{o();const u=m=>{const p=m.detail;r(w=>[p,...w])};return window.addEventListener("newNotification",u),()=>{window.removeEventListener("newNotification",u)}},[]);const o=async()=>{try{i(!0);const u=await us.getNotifications();r(u)}catch(u){console.error("Failed to load notifications:",u),t({title:"Error",description:"Failed to load notifications",variant:"destructive"})}finally{i(!1)}},l=async u=>{if(u.read||(await us.markAsRead(u.id),r(m=>m.map(p=>p.id===u.id?{...p,read:!0}:p))),u.action_url)e(u.action_url);else switch(u.type){case"order":case"refund":case"refund_request":case"order_status":case"status_change":e("/vendor/orders");break;case"stock_alert":case"low_stock":e("/vendor/products");break;case"payment":e("/vendor/wallet");break;case"message":e("/vendor/messages");break;default:e("/vendor/orders")}},d=async()=>{try{await us.markAllAsRead(),r(u=>u.map(m=>({...m,read:!0}))),t({title:"Success",description:"All notifications marked as read"})}catch{t({title:"Error",description:"Failed to mark notifications as read",variant:"destructive"})}},h=u=>{switch(u){case"order":return s.jsx(qt,{className:"h-5 w-5 text-green-600"});case"refund":case"refund_request":return s.jsx(La,{className:"h-5 w-5 text-red-600"});case"stock_alert":case"low_stock":return s.jsx(Ju,{className:"h-5 w-5 text-orange-600"});case"order_status":case"status_change":return s.jsx(sa,{className:"h-5 w-5 text-blue-600"});case"payment":return s.jsx(bl,{className:"h-5 w-5 text-green-600"});case"message":return s.jsx(Bp,{className:"h-5 w-5 text-purple-600"});default:return s.jsx(Kn,{className:"h-5 w-5 text-gray-600"})}},f=n.filter(u=>!u.read).length;return a?s.jsx(rs,{title:"Notifications",children:s.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(u=>s.jsx($e,{className:"animate-pulse",children:s.jsx(ze,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})})},u))})}):s.jsx(rs,{title:"Notifications",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"All Notifications"}),f>0&&s.jsxs(Ye,{variant:"secondary",children:[f," unread"]})]}),f>0&&s.jsx(te,{variant:"outline",size:"sm",onClick:d,children:"Mark all as read"})]}),s.jsx("div",{className:"space-y-3",children:n.length===0?s.jsx($e,{children:s.jsxs(ze,{className:"p-8 text-center",children:[s.jsx(Kn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-gray-500",children:"You're all caught up! New notifications will appear here."})]})}):n.map(u=>s.jsx($e,{className:`cursor-pointer transition-colors hover:bg-gray-50 ${u.read?"":"border-l-4 border-l-blue-500 bg-blue-50"}`,onClick:()=>l(u),children:s.jsx(ze,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-1",children:h(u.type)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h3",{className:`font-medium text-sm ${u.read?"text-gray-700":"text-gray-900"}`,children:u.title}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(u.created_at).toLocaleString()})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.message}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx(Ye,{variant:"outline",className:`text-xs ${u.type==="order"?"border-green-200 text-green-700":u.type==="refund"||u.type==="refund_request"?"border-red-200 text-red-700":u.type==="stock_alert"||u.type==="low_stock"?"border-orange-200 text-orange-700":u.type==="order_status"||u.type==="status_change"?"border-blue-200 text-blue-700":u.type==="payment"?"border-green-200 text-green-700":u.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:u.type==="refund_request"?"refund":u.type==="stock_alert"?"stock":u.type==="order_status"?"status":u.type}),!u.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})]})})},u.id))})]})})},nae=()=>{const[e]=ng();lt();const t=e.get("type")||"orders",[n,r]=_.useState([]),[a,i]=_.useState(!0),[o,l]=_.useState("all"),[d,h]=_.useState(!1),[f,u]=_.useState(""),[m,p]=_.useState(""),[w,v]=_.useState(1),[x,y]=_.useState(1),[b,j]=_.useState(0),N=20,[S,P]=_.useState({total:0,active:0,pending:0,completed:0});_.useEffect(()=>{E()},[t,f,m,w]);const T=z=>{v(z)},E=async()=>{try{if(i(!0),t==="orders"){const z=new URLSearchParams({page:w.toString(),page_size:N.toString()});f&&z.append("date_from",f),m&&z.append("date_to",m);const{response:H,data:q}=await Ve(`/vendor/orders/?${z}`);if(H.ok&&q){let W=q.results||q||[];if(y(Math.ceil((q.count||W.length)/N)),j(q.count||W.length),f&&m){const Y=new Date(f),V=new Date(m);V.setHours(23,59,59,999),W=W.filter(G=>{const ie=new Date(G.created_at);return ie>=Y&&ie<=V})}r(W),P({total:W.length,pending:W.filter(Y=>Y.status==="pending").length,completed:W.filter(Y=>Y.status==="delivered").length,active:W.filter(Y=>["confirmed","out_for_delivery"].includes(Y.status)).length})}}else if(t==="products"){const z=new URLSearchParams({page:w.toString(),page_size:N.toString()}),{response:H,data:q}=await Ve(`/products/?${z}`);if(H.ok&&q){const W=q.results||q||[];y(Math.ceil((q.count||W.length)/N)),j(q.count||W.length),r(W),P({total:W.length,active:W.filter(Y=>Y.quantity>10).length,pending:W.filter(Y=>Y.quantity>0&&Y.quantity<=10).length,completed:W.filter(Y=>Y.quantity===0).length})}}else if(t==="revenue"){const{response:z,data:H}=await Ve("/vendor/orders/");if(z.ok&&H){let q=H.results||H||[];const W=q.filter(V=>V.status==="confirmed"||V.status==="delivered");if(f&&m){const V=new Date(f),G=new Date(m);G.setHours(23,59,59,999),q=W.filter(ie=>{const J=new Date(ie.created_at);return J>=V&&J<=G})}else q=W;r(q);const Y=q.reduce((V,G)=>V+parseFloat(G.total_amount||0),0);P({total:Y,active:q.length,pending:Y>0?Y/q.length:0,completed:q.filter(V=>new Date(V.created_at).getMonth()===new Date().getMonth()).length})}}else if(t==="customers"){const{response:z,data:H}=await Ve("/vendor/orders/");if(z.ok&&H){const q=H.results||H||[],W=new Map;q.forEach(V=>{var J,le;const G=((J=V.customer_details)==null?void 0:J.id)||V.delivery_phone;W.has(G)||W.set(G,{id:G,name:((le=V.customer_details)==null?void 0:le.username)||V.delivery_name,phone:V.delivery_phone,orders:0,totalSpent:0,lastOrder:V.created_at});const ie=W.get(G);ie.orders+=1,V.status==="delivered"&&(ie.totalSpent+=parseFloat(V.total_amount||0))});const Y=Array.from(W.values());r(Y),P({total:Y.length,active:Y.filter(V=>V.orders>1).length,pending:Y.filter(V=>V.orders===1).length,completed:Y.filter(V=>V.totalSpent>0).length})}}}catch(z){console.error("Error fetching data:",z)}finally{i(!1)}},I=()=>{switch(t){case"orders":return"Orders Management";case"revenue":return"Revenue Analytics";case"products":return"Products Overview";case"customers":return"Customer Insights";default:return"Summary"}},O=()=>{switch(t){case"orders":return{total:"Total Orders",active:"Processing",pending:"Pending",completed:"Delivered"};case"products":return{total:"Total Products",active:"In Stock",pending:"Low Stock",completed:"Out of Stock"};case"revenue":return{total:"Total Revenue",active:"Orders",pending:"Avg Order",completed:"This Month"};case"customers":return{total:"Total Customers",active:"Repeat Buyers",pending:"New Customers",completed:"Paid Customers"};default:return{total:"Total",active:"Active",pending:"Pending",completed:"Completed"}}},R=(z,H)=>t==="revenue"&&(z==="total"||z==="pending")?`Rs${H.toFixed(2)}`:H.toString(),C=()=>{let z="",H="";t==="orders"?(z=[["Date","Order Number","Customer","Amount","Status","Items"].join(","),...n.map(V=>{var G;return[new Date(V.created_at).toLocaleDateString(),V.order_number,`"${V.delivery_name||"N/A"}"`,parseFloat(V.total_amount||0).toFixed(2),V.status,((G=V.items)==null?void 0:G.length)||0].join(",")})].join(`
`),H="orders-report"):t==="products"?(z=[["Name","Price","Stock","Status","Category"].join(","),...n.map(V=>[`"${V.name}"`,parseFloat(V.price).toFixed(2),V.quantity,V.quantity>10?"In Stock":V.quantity>0?"Low Stock":"Out of Stock",`"${V.category||"N/A"}"`].join(","))].join(`
`),H="products-report"):t==="revenue"?(z=[["Date","Order Number","Customer","Revenue"].join(","),...n.map(V=>[new Date(V.created_at).toLocaleDateString(),V.order_number,`"${V.delivery_name||"N/A"}"`,parseFloat(V.total_amount||0).toFixed(2)].join(","))].join(`
`),H="revenue-report"):t==="customers"&&(z=[["Name","Phone","Orders","Total Spent","Last Order"].join(","),...n.map(V=>[`"${V.name}"`,V.phone,V.orders,V.totalSpent.toFixed(2),new Date(V.lastOrder).toLocaleDateString()].join(","))].join(`
`),H="customers-report");const q=new Blob([z],{type:"text/csv"}),W=window.URL.createObjectURL(q),Y=document.createElement("a");Y.href=W,Y.download=`${H}-${f||"all"}-${m||new Date().toISOString().split("T")[0]}.csv`,Y.click(),window.URL.revokeObjectURL(W)},D=()=>{const z=new Date().toLocaleDateString(),H=f&&m?`${f} to ${m}`:"All Time",q=O(),W=`
===========================================
           ${I().toUpperCase()}
===========================================
Generated: ${z}
Period: ${H}

SUMMARY
-------------------------------------------
${q.total}: ${R("total",S.total)}
${q.active}: ${R("active",S.active)}
${q.pending}: ${R("pending",S.pending)}
${q.completed}: ${R("completed",S.completed)}

DETAILS (${n.length} records)
-------------------------------------------
${t==="orders"?n.map(V=>`${new Date(V.created_at).toLocaleDateString()} | ${V.order_number} | ${V.delivery_name} | Rs${parseFloat(V.total_amount||0).toFixed(2)} | ${V.status}`).join(`
`):t==="products"?n.map(V=>`${V.name} | Rs${parseFloat(V.price).toFixed(2)} | Stock: ${V.quantity}`).join(`
`):t==="revenue"?n.map(V=>`${new Date(V.created_at).toLocaleDateString()} | ${V.order_number} | Rs${parseFloat(V.total_amount||0).toFixed(2)}`).join(`
`):n.map(V=>`${V.name} | ${V.phone} | ${V.orders} orders | Rs${V.totalSpent.toFixed(2)}`).join(`
`)}

===========================================
    `,Y=window.open("","_blank");Y==null||Y.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${W}</pre>`),Y==null||Y.print()},A=()=>{const z=O(),H=`${I()}\\n\\n${z.total}: ${R("total",S.total)}\\n${z.active}: ${R("active",S.active)}\\n${z.pending}: ${R("pending",S.pending)}\\n${z.completed}: ${R("completed",S.completed)}\\n\\nTotal Records: ${n.length}`;if(navigator.share)navigator.share({title:I(),text:H});else{const q=`https://wa.me/?text=${encodeURIComponent(H)}`;window.open(q,"_blank")}},M=()=>{v(1),E(),h(!1)},Z=()=>{u(""),p(""),v(1),E(),h(!1)},X=z=>{if(z==="all")return n;if(t==="orders"){if(z==="pending")return n.filter(H=>H.status==="pending");if(z==="active")return n.filter(H=>["confirmed","out_for_delivery"].includes(H.status));if(z==="completed")return n.filter(H=>H.status==="delivered")}else if(t==="products"){if(z==="active")return n.filter(H=>H.quantity>10);if(z==="pending")return n.filter(H=>H.quantity>0&&H.quantity<=10);if(z==="completed")return n.filter(H=>H.quantity===0)}return n},U=z=>new Date(z).toLocaleDateString(),F=z=>new Date(z).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),B=O();return s.jsx(rs,{title:I(),children:s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[s.jsx("div",{className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx($e,{children:s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(sa,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:B.total}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:R("total",S.total)})]})]})})}),s.jsx($e,{children:s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Zu,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:B.active}),s.jsx("p",{className:"text-sm font-bold text-green-600",children:R("active",S.active)})]})]})})}),s.jsx($e,{children:s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx(Yu,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:B.pending}),s.jsx("p",{className:"text-sm font-bold text-orange-600",children:R("pending",S.pending)})]})]})})}),s.jsx($e,{children:s.jsx(ze,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(qt,{className:"h-4 w-4 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:B.completed}),s.jsx("p",{className:"text-sm font-bold text-purple-600",children:R("completed",S.completed)})]})]})})})]})}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:I()}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:D,children:s.jsx(sw,{className:"h-4 w-4"})}),s.jsx(te,{variant:"outline",size:"sm",onClick:C,children:s.jsx(uc,{className:"h-4 w-4"})}),s.jsx(te,{variant:"outline",size:"sm",onClick:A,children:s.jsx(Th,{className:"h-4 w-4"})}),(t==="orders"||t==="revenue")&&s.jsx(te,{variant:"outline",size:"sm",onClick:()=>h(!0),children:s.jsx(aa,{className:"h-4 w-4"})}),s.jsx(te,{variant:"outline",size:"sm",onClick:E,children:s.jsx(La,{className:"h-4 w-4"})})]})]}),s.jsxs(Fa,{value:o,onValueChange:l,className:"w-full",children:[s.jsx("div",{className:"border-b border-gray-100 overflow-x-auto",children:s.jsxs(ia,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[s.jsxs(Lt,{value:"all",className:"text-xs py-2 px-3",children:["All (",n.length,")"]}),t==="orders"&&s.jsxs(s.Fragment,{children:[s.jsxs(Lt,{value:"pending",className:"text-xs py-2 px-3",children:["Pending (",S.pending,")"]}),s.jsxs(Lt,{value:"active",className:"text-xs py-2 px-3",children:["Processing (",S.active,")"]}),s.jsxs(Lt,{value:"completed",className:"text-xs py-2 px-3",children:["Delivered (",S.completed,")"]})]}),t==="products"&&s.jsxs(s.Fragment,{children:[s.jsxs(Lt,{value:"active",className:"text-xs py-2 px-3",children:["In Stock (",S.active,")"]}),s.jsxs(Lt,{value:"pending",className:"text-xs py-2 px-3",children:["Low Stock (",S.pending,")"]}),s.jsxs(Lt,{value:"completed",className:"text-xs py-2 px-3",children:["Out of Stock (",S.completed,")"]})]})]})}),s.jsx(yt,{value:"all",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:a?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(La,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading data..."})]}):X("all").length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(qt,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No data found"})]}):X("all").map((z,H)=>s.jsxs("div",{className:"p-4",children:[t==="orders"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(qt,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",z.order_number]}),s.jsx("p",{className:"text-xs text-gray-600",children:z.delivery_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[U(z.created_at)," at ",F(z.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(z.total_amount||0).toFixed(2)]}),s.jsx(Ye,{variant:"default",className:"text-xs",children:z.status})]})]}),t==="products"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(yn,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:z.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(z.price).toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",z.quantity]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx(Ye,{className:`text-xs ${z.quantity>10?"bg-green-100 text-green-800":z.quantity>0?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:z.quantity>10?"In Stock":z.quantity>0?"Low Stock":"Out of Stock"})})]}),t==="revenue"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(sa,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",z.order_number]}),s.jsx("p",{className:"text-xs text-gray-600",children:z.delivery_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[U(z.created_at)," at ",F(z.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(z.total_amount||0).toFixed(2)]}),s.jsx(Ye,{variant:"default",className:"text-xs",children:"revenue"})]})]}),t==="customers"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx(Up,{className:"h-5 w-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:z.name}),s.jsx("p",{className:"text-xs text-gray-600",children:z.phone}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Last order: ",U(z.lastOrder)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",z.totalSpent.toFixed(2)]}),s.jsxs(Ye,{variant:"default",className:"text-xs",children:[z.orders," orders"]})]})]})]},z.id||H))})}),(t==="orders"||t==="products")&&["pending","active","completed"].map(z=>s.jsx(yt,{value:z,className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:X(z).map((H,q)=>s.jsxs("div",{className:"p-4",children:[t==="orders"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(qt,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",H.order_number]}),s.jsx("p",{className:"text-xs text-gray-600",children:H.delivery_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[U(H.created_at)," at ",F(H.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(H.total_amount||0).toFixed(2)]}),s.jsx(Ye,{variant:"default",className:"text-xs",children:H.status})]})]}),t==="products"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(yn,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:H.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(H.price).toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",H.quantity]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx(Ye,{className:`text-xs ${H.quantity>10?"bg-green-100 text-green-800":H.quantity>0?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:H.quantity>10?"In Stock":H.quantity>0?"Low Stock":"Out of Stock"})})]})]},H.id||q))})},z))]})]})}),x>1&&s.jsx("div",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(w-1)*N+1," to ",Math.min(w*N,b)," of ",b," records"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:()=>T(w-1),disabled:w===1,children:"Previous"}),s.jsxs("span",{className:"text-sm font-medium",children:[w," of ",x]}),s.jsx(te,{variant:"outline",size:"sm",onClick:()=>T(w+1),disabled:w===x,children:"Next"})]})]})}),s.jsx(An,{open:d,onOpenChange:h,children:s.jsxs(wn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(On,{className:"pb-4",children:s.jsx(Rn,{children:"Filter by Date Range"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"From Date"}),s.jsx(je,{type:"date",value:f,onChange:z=>u(z.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"To Date"}),s.jsx(je,{type:"date",value:m,onChange:z=>p(z.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(te,{onClick:M,className:"flex-1",children:"Apply Filter"}),s.jsx(te,{variant:"outline",onClick:Z,className:"flex-1",children:"Clear"})]}),(f||m)&&s.jsx("div",{className:"pt-4 border-t",children:s.jsx("p",{className:"text-sm text-gray-600",children:f&&m?`Showing: ${f} to ${m}`:f?`From: ${f}`:m?`Until: ${m}`:""})})]})]})})]})})};function rae(){const e=lt(),{toast:t}=ns(),[n,r]=_.useState("dashboard"),[a,i]=_.useState(!0),[o,l]=_.useState("30"),[d,h]=_.useState(""),[f,u]=_.useState(""),[m,p]=_.useState("all"),[w,v]=_.useState(!1),[x,y]=_.useState("csv"),[b,j]=_.useState([]),[N,S]=_.useState([]),[P,T]=_.useState([]),[E,I]=_.useState({totalRevenue:0,totalOrders:0,avgOrderValue:0,topProducts:[],revenueChart:[],orderChart:[],productPerformance:[],customerInsights:{totalCustomers:0,returningCustomers:0,newCustomers:0}});_.useEffect(()=>{O()},[o,d,f,m]);const O=async()=>{try{i(!0);const{response:W,data:Y}=await Ve("/orders/");if(W.ok){const V=Y.results||Y||[];j(V);const{response:G,data:ie}=await Ve("/products/");if(G.ok){const J=ie.results||ie||[];S(J),R(V,J),X(V)}}}catch(W){console.error("Error fetching data:",W),t({title:"Error",description:"Failed to load analytics data",variant:"destructive"})}finally{i(!1)}},R=(W,Y)=>{const V=C(W),G=V.filter(ne=>ne.status==="delivered"),ie=G.reduce((ne,Ce)=>ne+parseFloat(Ce.total_amount||0),0),J=V.length,le=J>0?ie/G.length:0,ye=D(G),ke=A(V),Ne=M(G),_e=Z(V);I({totalRevenue:ie,totalOrders:J,avgOrderValue:le,topProducts:Ne.slice(0,5),revenueChart:ye,orderChart:ke,productPerformance:Ne,customerInsights:_e})},C=W=>{let Y=W;if(o!=="custom"){const V=parseInt(o),G=new Date;G.setDate(G.getDate()-V),Y=W.filter(ie=>new Date(ie.created_at)>=G)}else d&&f&&(Y=W.filter(V=>{const G=new Date(V.created_at);return G>=new Date(d)&&G<=new Date(f)}));return m!=="all"&&(Y=Y.filter(V=>{var G;return(G=V.items)==null?void 0:G.some(ie=>{var J;return((J=ie.product_details)==null?void 0:J.id)===parseInt(m)})})),Y},D=W=>{const Y=[];for(let V=29;V>=0;V--){const G=new Date;G.setDate(G.getDate()-V);const ie=W.filter(le=>new Date(le.created_at).toDateString()===G.toDateString()),J=ie.reduce((le,ye)=>le+parseFloat(ye.total_amount||0),0);Y.push({date:G.toLocaleDateString("en-US",{month:"short",day:"numeric"}),revenue:J,orders:ie.length})}return Y},A=W=>{const Y={pending:0,confirmed:0,preparing:0,out_for_delivery:0,delivered:0,cancelled:0};return W.forEach(V=>{Y.hasOwnProperty(V.status)&&Y[V.status]++}),Object.entries(Y).map(([V,G])=>({status:V.replace("_"," ").replace(/\b\w/g,ie=>ie.toUpperCase()),count:G,percentage:W.length>0?(G/W.length*100).toFixed(1):0}))},M=(W,Y)=>{const V={};return W.forEach(G=>{var ie;(ie=G.items)==null||ie.forEach(J=>{var ye;const le=(ye=J.product_details)==null?void 0:ye.id;le&&(V[le]||(V[le]={id:le,name:J.product_name,totalSold:0,totalRevenue:0,orders:0}),V[le].totalSold+=J.quantity,V[le].totalRevenue+=parseFloat(J.total_price||0),V[le].orders++)})}),Object.values(V).sort((G,ie)=>ie.totalRevenue-G.totalRevenue)},Z=W=>{const Y=new Set,V={};W.forEach(ie=>{var le;const J=((le=ie.customer_details)==null?void 0:le.id)||ie.delivery_phone;Y.add(J),V[J]||(V[J]=[]),V[J].push(ie)});const G=Object.values(V).filter(ie=>ie.length>1).length;return{totalCustomers:Y.size,returningCustomers:G,newCustomers:Y.size-G}},X=W=>{const Y=[];W.forEach(V=>{var G,ie,J;V.status==="delivered"&&Y.push({id:V.id,type:"sale",order_number:V.order_number,customer_name:((G=V.customer_details)==null?void 0:G.username)||V.delivery_name,amount:parseFloat(V.total_amount),date:V.created_at,items:((ie=V.items)==null?void 0:ie.length)||0}),((J=V.refunds)==null?void 0:J.length)>0&&V.refunds.forEach(le=>{var ye,ke;le.status==="completed"&&Y.push({id:`refund-${le.id}`,type:"refund",order_number:V.order_number,customer_name:((ye=V.customer_details)==null?void 0:ye.username)||V.delivery_name,amount:-parseFloat(le.approved_amount||le.requested_amount),date:le.completed_at||le.created_at,items:((ke=V.items)==null?void 0:ke.length)||0})})}),T(Y.sort((V,G)=>new Date(G.date).getTime()-new Date(V.date).getTime()))},U=()=>{const W={summary:{totalRevenue:E.totalRevenue,totalOrders:E.totalOrders,avgOrderValue:E.avgOrderValue,totalCustomers:E.customerInsights.totalCustomers,dateRange:o==="custom"?`${d} to ${f}`:`Last ${o} days`},transactions:P,products:E.productPerformance,revenueChart:E.revenueChart};x==="csv"?F(W):x==="pdf"?z(W):B(W),v(!1)},F=W=>{const Y=[["Analytics Report"],["Generated:",new Date().toLocaleDateString()],["Period:",W.summary.dateRange],[""],["SUMMARY"],["Total Revenue",`Rs ${W.summary.totalRevenue.toFixed(2)}`],["Total Orders",W.summary.totalOrders],["Average Order Value",`Rs ${W.summary.avgOrderValue.toFixed(2)}`],["Total Customers",W.summary.totalCustomers],[""],["TOP PRODUCTS"],["Product Name","Units Sold","Revenue","Orders"],...W.products.slice(0,10).map(J=>[J.name,J.totalSold,`Rs ${J.totalRevenue.toFixed(2)}`,J.orders]),[""],["DAILY REVENUE"],["Date","Revenue","Orders"],...W.revenueChart.map(J=>[J.date,`Rs ${J.revenue.toFixed(2)}`,J.orders])].map(J=>J.join(",")).join(`
`),V=new Blob([Y],{type:"text/csv"}),G=window.URL.createObjectURL(V),ie=document.createElement("a");ie.href=G,ie.download=`analytics-report-${new Date().toISOString().split("T")[0]}.csv`,ie.click(),window.URL.revokeObjectURL(G)},B=W=>{const Y=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),V=window.URL.createObjectURL(Y),G=document.createElement("a");G.href=V,G.download=`analytics-data-${new Date().toISOString().split("T")[0]}.json`,G.click(),window.URL.revokeObjectURL(V)},z=W=>{const Y=`
===========================================
        BUSINESS ANALYTICS REPORT
===========================================
Generated: ${new Date().toLocaleDateString()}
Period: ${W.summary.dateRange}

SUMMARY
-------------------------------------------
Total Revenue: Rs ${W.summary.totalRevenue.toFixed(2)}
Total Orders: ${W.summary.totalOrders}
Average Order Value: Rs ${W.summary.avgOrderValue.toFixed(2)}
Total Customers: ${W.summary.totalCustomers}

TOP PRODUCTS
-------------------------------------------
${W.products.slice(0,10).map((G,ie)=>`${ie+1}. ${G.name} - ${G.totalSold} units - Rs ${G.totalRevenue.toFixed(2)}`).join(`
`)}

DAILY REVENUE TREND
-------------------------------------------
${W.revenueChart.slice(-14).map(G=>`${G.date}: Rs ${G.revenue.toFixed(2)} (${G.orders} orders)`).join(`
`)}

===========================================
    `,V=window.open("","_blank");V==null||V.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${Y}</pre>`),V==null||V.print()},H=()=>{var Y;const W=`Business Analytics Report

Total Revenue: Rs ${E.totalRevenue.toFixed(2)}
Total Orders: ${E.totalOrders}
Average Order Value: Rs ${E.avgOrderValue.toFixed(2)}
Total Customers: ${E.customerInsights.totalCustomers}

Top Product: ${((Y=E.topProducts[0])==null?void 0:Y.name)||"N/A"}`;if(navigator.share)navigator.share({title:"Business Analytics Report",text:W});else{const V=`https://wa.me/?text=${encodeURIComponent(W)}`;window.open(V,"_blank")}},q=[{id:"dashboard",label:"Dashboard",icon:yT},{id:"sales",label:"Sales Report",icon:sa},{id:"products",label:"Product Analytics",icon:qt},{id:"customers",label:"Customer Insights",icon:Up},{id:"statements",label:"Statements",icon:wa}];return a?s.jsx(rs,{title:"Business Analytics",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})})}):s.jsx(rs,{title:"Business Analytics",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(te,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Ht,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-semibold text-lg",children:"Business Analytics"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive business insights"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[s.jsx(uc,{className:"h-4 w-4 mr-1"}),"Export"]}),s.jsxs(te,{variant:"outline",size:"sm",onClick:H,children:[s.jsx(Th,{className:"h-4 w-4 mr-1"}),"Share"]}),s.jsx(te,{variant:"outline",size:"sm",onClick:O,children:s.jsx(La,{className:"h-4 w-4"})})]})]})}),s.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(aa,{className:"h-4 w-4 text-gray-600"}),s.jsx(xe,{className:"text-sm font-medium",children:"Filters:"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{className:"text-sm",children:"Period:"}),s.jsxs(Yt,{value:o,onValueChange:l,children:[s.jsx(Kt,{className:"w-32",children:s.jsx(Xt,{})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"7",children:"Last 7 days"}),s.jsx(st,{value:"30",children:"Last 30 days"}),s.jsx(st,{value:"90",children:"Last 3 months"}),s.jsx(st,{value:"365",children:"Last year"}),s.jsx(st,{value:"custom",children:"Custom"})]})]})]}),o==="custom"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{className:"text-sm",children:"From:"}),s.jsx(je,{type:"date",value:d,onChange:W=>h(W.target.value),className:"w-36"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{className:"text-sm",children:"To:"}),s.jsx(je,{type:"date",value:f,onChange:W=>u(W.target.value),className:"w-36"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{className:"text-sm",children:"Product:"}),s.jsxs(Yt,{value:m,onValueChange:p,children:[s.jsx(Kt,{className:"w-40",children:s.jsx(Xt,{})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"all",children:"All Products"}),N.map(W=>s.jsx(st,{value:W.id.toString(),children:W.name},W.id))]})]})]})]})}),s.jsx("div",{className:"bg-white",children:s.jsxs(Fa,{value:n,onValueChange:r,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(ia,{className:"grid grid-cols-5 w-full min-w-max",children:q.map(W=>s.jsxs(Lt,{value:W.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(W.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:W.label})]},W.id))})}),s.jsxs(yt,{value:"dashboard",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx($e,{children:s.jsxs(ze,{className:"p-4 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["Rs ",E.totalRevenue.toFixed(0)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:E.totalOrders}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["Rs ",E.avgOrderValue.toFixed(0)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Avg Order Value"})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:E.customerInsights.totalCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]})})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs(Tt,{className:"flex items-center gap-2",children:[s.jsx(sa,{className:"h-5 w-5"}),"Revenue Trend"]})}),s.jsx(ze,{children:s.jsx("div",{className:"h-64 flex items-end justify-between gap-1",children:E.revenueChart.map((W,Y)=>{const V=Math.max(...E.revenueChart.map(ie=>ie.revenue),1),G=W.revenue/V*200;return s.jsxs("div",{className:"flex flex-col items-center flex-1",children:[s.jsx("div",{className:"bg-green-500 rounded-t w-full min-h-[4px] hover:bg-green-600 transition-colors cursor-pointer",style:{height:`${G}px`},title:`${W.date}: Rs ${W.revenue.toFixed(0)}`}),s.jsx("div",{className:"text-xs text-gray-600 mt-1 transform -rotate-45 origin-left",children:W.date})]},Y)})})})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs(Tt,{className:"flex items-center gap-2",children:[s.jsx(qt,{className:"h-5 w-5"}),"Top Performing Products"]})}),s.jsx(ze,{children:s.jsx("div",{className:"space-y-3",children:E.topProducts.map((W,Y)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm font-bold text-blue-600",children:Y+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:W.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[W.totalSold," units sold"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-green-600",children:["Rs ",W.totalRevenue.toFixed(0)]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[W.orders," orders"]})]})]},W.id))})})]})]}),s.jsx(yt,{value:"sales",className:"p-4 space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{children:"Order Status Distribution"})}),s.jsx(ze,{children:s.jsx("div",{className:"space-y-3",children:E.orderChart.map(W=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${W.status==="Delivered"?"bg-green-500":W.status==="Pending"?"bg-yellow-500":W.status==="Cancelled"?"bg-red-500":"bg-blue-500"}`}),s.jsx("span",{className:"text-sm",children:W.status})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:W.count}),s.jsxs("span",{className:"text-sm text-gray-600",children:["(",W.percentage,"%)"]})]})]},W.status))})})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{children:"Daily Sales Summary"})}),s.jsx(ze,{children:s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:E.revenueChart.slice(-7).reverse().map((W,Y)=>s.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:W.date}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium",children:["Rs ",W.revenue.toFixed(0)]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[W.orders," orders"]})]})]},Y))})})]})]})}),s.jsx(yt,{value:"products",className:"p-4 space-y-6",children:s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{children:"Product Performance Report"})}),s.jsx(ze,{children:s.jsx("div",{className:"space-y-3",children:E.productPerformance.map((W,Y)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-bold",children:Y+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:W.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[W.totalSold," units  ",W.orders," orders"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-green-600",children:["Rs ",W.totalRevenue.toFixed(0)]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Rs ",(W.totalRevenue/W.totalSold).toFixed(0)," per unit"]})]})]},W.id))})})]})}),s.jsxs(yt,{value:"customers",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx($e,{children:s.jsxs(ze,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:E.customerInsights.totalCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:E.customerInsights.returningCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"Returning Customers"})]})}),s.jsx($e,{children:s.jsxs(ze,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:E.customerInsights.newCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"New Customers"})]})})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsx(Tt,{children:"Customer Insights"})}),s.jsx(ze,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Customer Retention Rate"}),s.jsxs("span",{className:"font-bold text-green-600",children:[E.customerInsights.totalCustomers>0?(E.customerInsights.returningCustomers/E.customerInsights.totalCustomers*100).toFixed(1):0,"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Average Orders per Customer"}),s.jsx("span",{className:"font-bold text-blue-600",children:E.customerInsights.totalCustomers>0?(E.totalOrders/E.customerInsights.totalCustomers).toFixed(1):0})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Average Revenue per Customer"}),s.jsxs("span",{className:"font-bold text-purple-600",children:["Rs ",E.customerInsights.totalCustomers>0?(E.totalRevenue/E.customerInsights.totalCustomers).toFixed(0):0]})]})]})})]})]}),s.jsxs(yt,{value:"statements",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs(Tt,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Sales Summary"}),s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>v(!0),children:[s.jsx(uc,{className:"h-4 w-4 mr-1"}),"Export"]})]})}),s.jsx(ze,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total Sales"}),s.jsxs("span",{className:"font-bold text-green-600",children:["Rs ",E.totalRevenue.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total Orders"}),s.jsx("span",{className:"font-bold text-blue-600",children:E.totalOrders})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Average Order Value"}),s.jsxs("span",{className:"font-bold text-purple-600",children:["Rs ",E.avgOrderValue.toFixed(2)]})]})]})})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs(Tt,{className:"flex items-center gap-2",children:[s.jsx(UF,{className:"h-5 w-5"}),"Order Distribution"]})}),s.jsx(ze,{children:s.jsx("div",{className:"space-y-3",children:E.orderChart.map((W,Y)=>{const V=["bg-green-500","bg-yellow-500","bg-red-500","bg-blue-500","bg-purple-500"];return s.jsxs("div",{className:"flex items-center justify-between p-2 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${V[Y%V.length]}`}),s.jsx("span",{className:"text-sm",children:W.status})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"font-medium text-sm",children:W.count}),s.jsxs("span",{className:"text-xs text-gray-600 ml-1",children:["(",W.percentage,"%)"]})]})]},W.status)})})})]})]}),s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs(Tt,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Recent Transactions"}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(te,{variant:"outline",size:"sm",onClick:()=>e("/vendor/sales"),children:[s.jsx(qs,{className:"h-4 w-4 mr-1"}),"View All"]})})]})}),s.jsx(ze,{children:s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:P.slice(0,20).map(W=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${W.type==="sale"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:W.type==="sale"?"":""}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-sm",children:[W.type==="sale"?"Sale":"Refund"," - ",W.order_number]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[W.customer_name,"  ",new Date(W.date).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`font-bold text-sm ${W.type==="sale"?"text-green-600":"text-red-600"}`,children:[W.type==="sale"?"+":"","Rs ",Math.abs(W.amount).toFixed(2)]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[W.items," items"]})]})]},W.id))})})]})]})]})}),s.jsx(An,{open:w,onOpenChange:v,children:s.jsxs(wn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(On,{className:"pb-4",children:s.jsx(Rn,{children:"Export Analytics Report"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(xe,{className:"text-sm font-medium mb-2 block",children:"Export Format"}),s.jsxs(Yt,{value:x,onValueChange:y,children:[s.jsx(Kt,{children:s.jsx(Xt,{})}),s.jsxs(Zt,{children:[s.jsx(st,{value:"csv",children:"CSV Spreadsheet"}),s.jsx(st,{value:"json",children:"JSON Data"}),s.jsx(st,{value:"pdf",children:"PDF Report"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Report Includes:"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("div",{children:" Sales summary and metrics"}),s.jsx("div",{children:" Top performing products"}),s.jsx("div",{children:" Daily revenue trends"}),s.jsx("div",{children:" Customer insights"}),s.jsx("div",{children:" Order distribution"})]})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsxs(te,{onClick:U,className:"flex-1",children:[s.jsx(uc,{className:"h-4 w-4 mr-2"}),"Export Report"]}),s.jsx(te,{variant:"outline",onClick:()=>v(!1),className:"flex-1",children:"Cancel"})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("p",{className:"text-xs text-gray-500",children:["Report will include data for the selected time period: ",o==="custom"?`${d} to ${f}`:`Last ${o} days`]})})]})]})})]})})}function aae(){const e=lt(),{notifications:t,unreadCount:n,markAsRead:r,markAllAsRead:a,refreshNotifications:i}=ZP();_.useEffect(()=>{(async()=>{const{authService:f}=await Ue(async()=>{const{authService:m}=await Promise.resolve().then(()=>ai);return{authService:m}},void 0);if(!await f.getToken()){const m=window.location.pathname+window.location.search;e(`/login?redirect=${encodeURIComponent(m)}`)}})()},[e]);const o=h=>{h.read||r(h.id),h.action_url&&e(h.action_url)},l=h=>{switch(h){case"order":return"";case"payment":return"";case"message":return"";default:return""}},d=h=>{switch(h){case"order":return"border-green-200 text-green-700 bg-green-50";case"payment":return"border-blue-200 text-blue-700 bg-blue-50";case"message":return"border-purple-200 text-purple-700 bg-purple-50";default:return"border-gray-200 text-gray-700 bg-gray-50"}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"sticky top-0 z-50 bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsxs(te,{variant:"ghost",onClick:()=>e(-1),className:"flex items-center gap-2",children:[s.jsx(Ht,{className:"h-4 w-4"}),"Back"]}),s.jsx("h1",{className:"text-lg font-semibold",children:"Notifications"})]}),s.jsx("div",{className:"max-w-4xl mx-auto p-4",children:s.jsxs($e,{children:[s.jsx(Ct,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Kn,{className:"h-6 w-6 text-blue-600"}),s.jsx(Tt,{className:"text-2xl",children:"Notifications"}),n>0&&s.jsxs(Ye,{className:"bg-red-500 text-white",children:[n," unread"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{variant:"outline",size:"sm",onClick:i,children:"Refresh"}),n>0&&s.jsxs(te,{variant:"outline",size:"sm",onClick:a,className:"flex items-center gap-2",children:[s.jsx(qF,{className:"h-4 w-4"}),"Mark all read"]})]})]})}),s.jsx(ze,{children:t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Kn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-gray-500",children:"You're all caught up! Check back later for updates."})]}):s.jsx("div",{className:"space-y-3",children:t.map(h=>s.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-all hover:shadow-md ${h.read?"bg-white border-gray-200":"bg-blue-50/50 border-blue-200"}`,onClick:()=>o(h),children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"text-2xl",children:l(h.type)}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`font-medium ${h.read?"text-gray-700":"text-gray-900"}`,children:h.title}),s.jsx("p",{className:`text-sm mt-1 ${h.read?"text-gray-600":"text-gray-700"}`,children:h.message}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(h.created_at).toLocaleString()})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ye,{variant:"outline",className:`text-xs ${d(h.type)}`,children:h.type}),!h.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})})]})},h.id))})})]})})]})}const iae=()=>{lt();const[e,t]=_.useState(!1),n=()=>{t(!0)};return e?s.jsx(oae,{onBack:()=>t(!1)}):s.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-8",children:s.jsx("button",{onClick:n,className:"bg-pink-500 hover:bg-pink-600 text-white px-8 py-3 rounded-full font-bold text-lg shadow-lg transform hover:scale-105 transition-all duration-200",children:"Take a CV Tour"})})},oae=({onBack:e})=>{const[t,n]=_.useState(0),[r,a]=_.useState({}),[i,o]=_.useState(!1),l=[{title:"Personal Basics",subtitle:"These go at the top of the CV. Keep it simple.",fields:[{name:"fullName",label:"Full Name?",type:"text",placeholder:"e.g., Aarti Sharma  Just confirm spelling."},{name:"phone",label:"Phone Number?",type:"text",placeholder:"Nepal format: 98X-XXXXXXX"},{name:"email",label:"Email?",type:"email",placeholder:"Professional one, like firstname.lastname@gmail.com"},{name:"linkedin",label:"LinkedIn/Profile?",type:"select",options:["Yes","No  If no, suggest making one later."]},{name:"address",label:"Address?",type:"text",placeholder:"Current: Biratnagar?"},{name:"relocate",label:"Willing to relocate to Kathmandu?",type:"select",options:["Yes","No","Preferences"]},{name:"dob",label:"Date of Birth?",type:"date",placeholder:"For age calc  e.g., YYYY-MM-DD"},{name:"nationality",label:"Nationality?",type:"text",placeholder:"Nepali? Any other?"},{name:"languages",label:"Languages?",type:"multiselect",options:["Nepali  Fluent","Nepali  Basic","English  Fluent","English  Basic","Hindi  Fluent","Hindi  Basic","Others? Rate 1-5 for speaking/reading/writing."]}]},{title:"Education & Academics",subtitle:"Focus on her BSclist subjects to show depth for pharma/lab jobs.",fields:[{name:"degree",label:"Degree Details?",type:"text",placeholder:"BSc Microbiology from [College/Uni Name], Biratnagar, Nepal."},{name:"year",label:"Year?",type:"text",placeholder:"202X"},{name:"gpa",label:"GPA/Percentage?",type:"text",placeholder:"X% or Division (First/Second)"},{name:"subjects",label:"Key Subjects Studied?",type:"multiselect",options:["Core: Microbiology (Bacteriology/Virology/Mycology/Parasitology)","Biochemistry","Immunology","Genetics","Molecular Biology","Lab-Focused: Medical Microbiology","Clinical Pathology","Hematology","Microbiology Techniques","Others: Biotechnology","Environmental Microbiology","Food Microbiology","Pharmacology","Anatomy/Physiology"]},{name:"electives",label:"Any electives/specializations?",type:"text",placeholder:"e.g., Hospital Infection Control, Public Health Micro."},{name:"projects",label:"Projects/Thesis?",type:"textarea",placeholder:'Yes/No  If yes: Topic? (e.g., "Antibiotic Resistance in Hospital Bacteria"  Short desc: What did you do? Tools used?)'},{name:"extracurriculars",label:"Extracurriculars?",type:"textarea",placeholder:"Yes/No (e.g., Science club, lab workshops, online courses like Coursera on Micro basics?)"},{name:"awards",label:"Awards/Scholarships?",type:"textarea",placeholder:"Yes/No (e.g., Merit for lab skills?)"}]},{title:"Professional Experience",subtitle:'Her Nobel Hospital internship is goldbreak it down to quantify (e.g., "Handled 50+ samples/day").',fields:[{name:"internship",label:"Internship Confirmation?",type:"text",placeholder:"3 months at Nobel Hospital, Biratnagar (Dates: From-To?). Role: Microbiology Intern/Lab Assistant?"},{name:"sampleHandling",label:"Sample Handling?",type:"multiselect",options:["Collected/processed blood/urine/swabs? (How many/day? Used centrifuges/pipettes?)"]},{name:"cultures",label:"Cultures & Testing?",type:"multiselect",options:["Prepared bacterial/fungal cultures?","Gram staining?","Antibiotic sensitivity tests (e.g., Kirby-Bauer method)?","Types of media used (Agar plates? Broths?)?"]},{name:"microscopy",label:"Microscopy/ID?",type:"multiselect",options:["Microscope work for bacteria/parasites?","Identified pathogens (e.g., E. coli, TB)?"]},{name:"qualityControl",label:"Quality Control?",type:"multiselect",options:["Sterilized equipment?","Followed lab safety (PPE, biohazard protocols)?","Calibrated instruments?"]},{name:"reporting",label:"Reporting?",type:"multiselect",options:["Recorded results in logs?","Used software (e.g., Excel for data entry)?","Shared with doctors?"]},{name:"otherWork",label:"Other Hospital Lab Work?",type:"multiselect",options:["Helped in hematology/chemistry sections?","PCR/ELISA tests?","Inventory of reagents?"]},{name:"achievements",label:"Achievements/Impacts?",type:"textarea",placeholder:'Yes/No (e.g., "Reduced contamination errors by X%?" or "Trained juniors on staining?")'},{name:"supervisors",label:"Supervisors/Team?",type:"textarea",placeholder:"Reported to whom? Team size? Any feedback/letter available? Yes/No."},{name:"otherExperience",label:"Other Experience?",type:"textarea",placeholder:"Yes/No (e.g., Volunteer lab work, family clinic help, part-time jobs?)"}]},{title:"Skills Inventory",subtitle:"She's vague on skills, so this is a yes/no checklist of 50+ common Microbiology skills for Nepal jobs.",fields:[{name:"technicalSkills",label:"Technical/Lab Skills (Rate Y/S/N - Essential for Lab Tech/QC roles)?",type:"skillselect",options:["Microscopy (Light/Fluorescence) - Used in hospital labs for pathogen ID?","Gram Staining/KOH Prep - Basic bacterial identification technique?","Culture Techniques (Aerobic/Anaerobic) - Growing bacteria for testing?","Media Preparation (Nutrient Agar/Blood Agar) - Making culture plates?","Biochemical Tests (Catalase/Oxidase/IMViC) - Bacterial species identification?","Antibiotic Susceptibility Testing - Kirby-Bauer disk diffusion method?","Serology (Widal/VDRL Tests) - Blood tests for infections?","ELISA/PCR Basics - Molecular diagnostic techniques?","Hematology (CBC via Autoanalyzer) - Blood cell counting machines?","Sample Collection (Venipuncture/Swab) - Drawing blood/taking swabs?","Sterilization/Autoclaving - Equipment sterilization protocols?","Biosafety Level Handling (BSL-2) - Safe handling of infectious materials?","pH/Electrolyte Testing - Chemical analysis of body fluids?","Water/Food Microbiology Testing - Testing for contamination?","Molecular Techniques (DNA Extraction) - Genetic material isolation?","Microbial Enumeration (Colony Counting) - Counting bacterial colonies?","Antimicrobial Resistance Testing - Checking drug resistance?","Fungal Culture Techniques - Growing and identifying fungi?","Parasitology Techniques - Identifying parasites in samples?","Clinical Chemistry Analyzers - Automated blood chemistry testing?","Urine Analysis (Dipstick/Microscopy) - Testing urine samples?","Stool Examination - Analyzing fecal samples for pathogens?","Blood Banking Techniques - Blood typing/cross-matching?","Quality Control Testing - Ensuring test accuracy/reliability?","Instrument Calibration/Maintenance - Keeping lab equipment working?","Lab Safety Protocols (PPE Usage) - Personal protective equipment?","Biohazard Waste Management - Safe disposal of infectious waste?","Temperature Monitoring (Incubators/Refrigerators) - Maintaining sample conditions?","Documentation/Record Keeping - Maintaining lab logs/reports?","Internal Quality Assurance - Lab quality management systems?","External Quality Assessment - Participating in proficiency testing?"]},{name:"softSkills",label:"Soft/Workflow Skills (Rate Y/S/N - Important for hospital/pharma teamwork)?",type:"skillselect",options:["Data Entry/Reporting (Excel/Logs) - Recording test results accurately?","Team Collaboration (With Doctors/Nurses) - Working with healthcare staff?","Time Management (Handling Rush Hours) - Managing urgent test requests?","Problem-Solving (e.g., Contaminated Samples) - Troubleshooting lab issues?","Attention to Detail (Error-Free Results) - Ensuring accuracy in testing?","Patient Interaction (Explaining Tests) - Communicating with patients?","Inventory Management (Reagents/Supplies) - Stocking lab materials?","Communication Skills (Verbal/Written) - Explaining results clearly?","Adaptability (New Procedures/Equipment) - Learning new lab techniques?","Work Ethics (Punctuality/Reliability) - Being dependable at work?","Critical Thinking (Result Interpretation) - Analyzing test outcomes?","Multitasking (Multiple Tests Simultaneously) - Handling several tasks?","Stress Management (High-Pressure Situations) - Working under pressure?","Training/Orientation Skills - Teaching new lab staff?","Customer Service Orientation - Serving patients/doctors well?","Confidentiality Maintenance - Keeping patient data private?","Continuous Learning Mindset - Staying updated with lab advances?","Quality Focus (Zero Error Tolerance) - Maintaining high standards?","Safety Consciousness - Prioritizing lab/hospital safety?","Interpersonal Skills (Building Relationships) - Working well with colleagues?"]},{name:"techSkills",label:"Tech/Digital Skills (Rate Y/S/N - Growing importance in modern labs)?",type:"skillselect",options:["MS Office (Word/Excel for Reports) - Creating documents/spreadsheets?","Basic Lab Software (LIS  Lab Info Systems) - Lab management software?","Google Workspace (Docs/Sheets/Drive) - Cloud-based office tools?","Online Research (PubMed for Protocols) - Finding scientific literature?","Any Coding/Data Tools (e.g., Simple stats in Excel) - Basic programming?","Statistical Analysis Software (SPSS/R) - Data analysis tools?","Presentation Software (PowerPoint) - Creating training presentations?","Email Communication - Professional email usage?","Database Management - Organizing lab data?","Digital Microscopy Software - Analyzing microscope images?","Electronic Health Records (EHR) - Hospital patient systems?","Telemedicine Platforms - Remote healthcare tools?","Social Media for Professional Networking - LinkedIn usage?","Online Learning Platforms (Coursera/edX) - Continuing education?","Video Conferencing (Zoom/Teams) - Virtual meetings?","Mobile Apps for Lab Work - Lab-related mobile applications?","Cloud Storage Solutions - Secure data storage?","Cybersecurity Awareness - Protecting sensitive data?","Digital Documentation Tools - Electronic lab notebooks?","Automation Software Knowledge - Robotic lab equipment?"]},{name:"industrySkills",label:"Nepal-Specific/Industry Skills (Rate Y/S/N - Tailored for Nepal job market)?",type:"skillselect",options:["GMP/GLP Compliance - Good Manufacturing/Lab Practices?","Quality Assurance in Labs - Ensuring lab quality standards?","Infection Control (Hospital Protocols) - Hospital infection prevention?","Public Health Surveillance (e.g., Outbreak Tracking) - Disease monitoring?","Vaccine/Drug Testing Basics - Pharmaceutical testing knowledge?","Environmental Sampling (Air/Water) - Environmental testing?","Bioinformatics Basics (Sequence Analysis) - Biological data analysis?","Nepali Health System Knowledge - Understanding local healthcare?","Tribhuvan University Teaching Hospital Procedures - Kathmandu hospital experience?","Patan Hospital Protocols - Major hospital workflows?","Nepal Pharmaceuticals Lab Standards - Pharma company requirements?","Private Lab Clinic Operations - Diagnostic center procedures?","Government Hospital Compliance - Public sector lab standards?","Biotech Lab Research Methods - Research laboratory techniques?","Public Health Lab Testing - Government health lab procedures?","Medical College Lab Training - Academic lab experience?","Pharmacy Lab Quality Control - Drug testing procedures?","Food Safety Testing - Food microbiology standards?","Water Quality Analysis - Drinking water testing?","Air Quality Monitoring - Environmental air testing?","Epidemiological Data Collection - Disease pattern tracking?","Health Education/Promotion - Community health awareness?","Medical Waste Management - Healthcare waste handling?","Emergency Response Protocols - Crisis situation handling?","Cultural Competence in Healthcare - Understanding patient diversity?","Nepali Language Medical Terminology - Local medical terms?","Rural Health Camp Experience - Community health outreach?","Mobile Health (mHealth) Solutions - Digital health innovations?","Traditional Medicine Integration - Ayurvedic/modern medicine blend?","Health Insurance Procedures - Insurance claim processes?","Medical Equipment Maintenance - Lab instrument upkeep?"]},{name:"topSkills",label:"Pick Top 8-10 Strongest Skills?",type:"multiselect",options:[]}]},{title:"Certifications & Extras",subtitle:"These boost credibility for Kathmandu jobs.",fields:[{name:"certifications",label:"Certifications?",type:"textarea",placeholder:"Yes/No (e.g., Lab Technician Cert from CTEVT? Biosafety Training? First Aid?)"},{name:"workshops",label:"Workshops/Seminars?",type:"textarea",placeholder:"Yes/No (e.g., Attended Micro conference? Online from WHO/Nepal Health?)"},{name:"memberships",label:"Memberships?",type:"textarea",placeholder:"Yes/No (e.g., Nepal Microbiology Society? Student chapter?)"},{name:"hobbies",label:"Hobbies/Interests?",type:"textarea",placeholder:"Tie to job: e.g., Reading science journals? Volunteering health camps?"},{name:"references",label:"References?",type:"textarea",placeholder:"Yes/No (e.g., Nobel supervisor contact? 2-3 names/emails.)"}]},{title:"Job Targeting",subtitle:"To tailor CV versions for different Kathmandu roles.",fields:[{name:"dreamRoles",label:"Dream Roles?",type:"multiselect",options:["Hospital Lab Tech","Pharma QC Analyst","Research Asst","Public Health Inspector","Biotech Lab","Teaching Asst","Sales Rep (Med Devices)"]},{name:"employers",label:"Preferred Employers?",type:"textarea",placeholder:"e.g., Govt: Sukraraj Tropical Hospital; Private: Grande City Lab, Asian Pharma; Orgs: Nepal Red Cross."},{name:"salary",label:"Salary Expectation?",type:"text",placeholder:"For CV summary: Entry-level NPR 20k-30k? Don't put exact # in CV."},{name:"availability",label:"Availability?",type:"select",options:["Immediate?","Notice period?"]},{name:"gaps",label:"Any Gaps/Weaknesses?",type:"textarea",placeholder:"e.g., No car? Willing to learn tech?  Frame positively in CV."}]}],d=(p,w)=>{a(v=>({...v,[p]:w}))},h=()=>{t<l.length-1&&n(t+1)},f=()=>{o(!0)},u=()=>{t>0&&n(t-1)},m=p=>{switch(p.type){case"text":case"email":case"date":return s.jsx("input",{type:p.type,placeholder:p.placeholder,value:r[p.name]||"",onChange:w=>d(p.name,w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"});case"textarea":return s.jsx("textarea",{placeholder:p.placeholder,value:r[p.name]||"",onChange:w=>d(p.name,w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent h-24"});case"select":return s.jsxs("select",{value:r[p.name]||"",onChange:w=>d(p.name,w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select..."}),p.options.map(w=>s.jsx("option",{value:w,children:w},w))]});case"multiselect":return s.jsx("div",{className:"space-y-2",children:p.options.map(w=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:(r[p.name]||[]).includes(w),onChange:v=>{const x=r[p.name]||[];v.target.checked?d(p.name,[...x,w]):d(p.name,x.filter(y=>y!==w))},className:"rounded border-gray-300 text-pink-600 focus:ring-pink-500"}),s.jsx("span",{className:"text-sm",children:w})]},w))});case"skillselect":return s.jsx("div",{className:"space-y-3",children:p.options.map(w=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-sm flex-1",children:w}),s.jsx("div",{className:"flex space-x-2",children:["Yes (Proficient)","Somewhat","No"].map(v=>{var x;return s.jsxs("label",{className:"flex items-center space-x-1",children:[s.jsx("input",{type:"radio",name:`${p.name}-${w}`,value:v,checked:((x=r[p.name])==null?void 0:x[w])===v,onChange:y=>{const b=r[p.name]||{};d(p.name,{...b,[w]:y.target.value})},className:"text-pink-600 focus:ring-pink-500"}),s.jsx("span",{className:"text-xs",children:v.split(" ")[0]})]},v)})})]},w))});default:return null}};return i?s.jsx(lae,{formData:r,onBack:()=>o(!1)}):s.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("button",{onClick:e,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium",children:" Back"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"CV Builder for Aarti"}),s.jsxs("div",{className:"text-sm text-gray-600",children:[t+1," / ",l.length]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-6",children:s.jsx("div",{className:"bg-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${(t+1)/l.length*100}%`}})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:l[t].title}),l[t].subtitle&&s.jsx("p",{className:"text-sm text-gray-600 mb-4 italic",children:l[t].subtitle}),s.jsx("div",{className:"space-y-4 mb-6",children:l[t].fields.map(p=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:p.label}),m(p)]},p.name))}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:u,disabled:t===0,className:"bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed text-gray-800 px-6 py-2 rounded-lg font-medium transition-colors",children:"Previous"}),s.jsx("button",{onClick:t===l.length-1?f:h,className:"bg-pink-500 hover:bg-pink-600 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:t===l.length-1?"Generate CV Preview":"Next"})]})]})})},lae=({formData:e,onBack:t})=>{const n=()=>{var p;const a=e.fullName||"Aarti Sharma",i=e.phone||"",o=e.email||"",l=e.address||"",d=e.linkedin||"",h=e.dob||"",f=e.nationality||"",u=e.languages||[];return`
${a.toUpperCase()}
${l}
Phone: ${i} | Email: ${o}${d==="Yes"?" | LinkedIn: Available":""}

PERSONAL INFORMATION
Date of Birth: ${h}
Nationality: ${f}
Languages: ${u.join(", ")}

PROFESSIONAL SUMMARY
${e.fullName||"Aarti"} is a BSc Microbiology graduate with ${e.internship?"3-month hands-on internship experience at Nobel Hospital, Biratnagar":"strong academic foundation in microbiology"}. Seeking entry-level position in medical laboratory technology, quality control analyst, or research assistance in Kathmandu's healthcare and pharmaceutical sector. ${e.relocate==="Yes"?"Willing to relocate to Kathmandu.":""}

EDUCATION
${e.degree||"BSc Microbiology"}
Institution: ${(p=e.degree)!=null&&p.includes("Biratnagar")?"Biratnagar, Nepal":"College/University, Biratnagar, Nepal"}
${e.year?`Graduation Year: ${e.year}`:""}
${e.gpa?`GPA/Percentage: ${e.gpa}`:""}

KEY SUBJECTS STUDIED:
${(e.subjects||[]).map(w=>` ${w}`).join(`
`)}

${e.electives?`ELECTIVES/SPECIALIZATIONS:
 ${e.electives}`:""}

${e.projects?`PROJECTS/THESIS:
${e.projects}`:""}

${e.extracurriculars?`EXTRACURRICULAR ACTIVITIES:
${e.extracurriculars}`:""}

${e.awards?`AWARDS/SCHOLARSHIPS:
${e.awards}`:""}

PROFESSIONAL EXPERIENCE
${e.internship||"Microbiology Laboratory Intern"}
${e.dates||"3 Months"}
${e.role||"Nobel Hospital, Biratnagar, Nepal"}

KEY RESPONSIBILITIES & ACHIEVEMENTS:
${e.sampleHandling?`SAMPLE HANDLING:
${(e.sampleHandling||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.cultures?`CULTURES & TESTING:
${(e.cultures||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.microscopy?`MICROSCOPY & IDENTIFICATION:
${(e.microscopy||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.qualityControl?`QUALITY CONTROL & SAFETY:
${(e.qualityControl||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.reporting?`REPORTING & DOCUMENTATION:
${(e.reporting||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.otherWork?`ADDITIONAL RESPONSIBILITIES:
${(e.otherWork||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.achievements?`KEY ACHIEVEMENTS:
 ${e.achievements}`:""}

${e.supervisors?`SUPERVISION & TEAM:
${e.supervisors}`:""}

${e.otherExperience?`ADDITIONAL EXPERIENCE:
${e.otherExperience}`:""}

SKILLS INVENTORY

TECHNICAL/LABORATORY SKILLS:
${Object.entries(e.technicalSkills||{}).filter(([w,v])=>v==="Yes (Proficient)").map(([w,v])=>` ${w} (Proficient)`).join(`
`)}
${Object.entries(e.technicalSkills||{}).filter(([w,v])=>v==="Somewhat").map(([w,v])=>` ${w} (Basic Knowledge)`).join(`
`)}

SOFT/WORKFLOW SKILLS:
${Object.entries(e.softSkills||{}).filter(([w,v])=>v==="Yes (Proficient)").map(([w,v])=>` ${w} (Proficient)`).join(`
`)}
${Object.entries(e.softSkills||{}).filter(([w,v])=>v==="Somewhat").map(([w,v])=>` ${w} (Developing)`).join(`
`)}

TECHNICAL/DIGITAL SKILLS:
${Object.entries(e.techSkills||{}).filter(([w,v])=>v==="Yes (Proficient)").map(([w,v])=>` ${w} (Proficient)`).join(`
`)}
${Object.entries(e.techSkills||{}).filter(([w,v])=>v==="Somewhat").map(([w,v])=>` ${w} (Basic)`).join(`
`)}

NEPAL-SPECIFIC/INDUSTRY SKILLS:
${Object.entries(e.industrySkills||{}).filter(([w,v])=>v==="Yes (Proficient)").map(([w,v])=>` ${w} (Proficient)`).join(`
`)}
${Object.entries(e.industrySkills||{}).filter(([w,v])=>v==="Somewhat").map(([w,v])=>` ${w} (Familiar)`).join(`
`)}

TOP SKILLS (Most Relevant for Job Applications):
${(e.topSkills||[]).slice(0,10).map(w=>` ${w}`).join(`
`)}

CERTIFICATIONS, TRAINING & EXTRAS

${e.certifications?`CERTIFICATIONS:
${e.certifications}`:`CERTIFICATIONS:
 Laboratory Safety Training
 Biosafety Level 2 Training`}

${e.workshops?`WORKSHOPS/SEMINARS:
${e.workshops}`:""}

${e.memberships?`MEMBERSHIPS:
${e.memberships}`:""}

${e.hobbies?`HOBBIES/INTERESTS:
${e.hobbies}`:""}

JOB TARGETING & PREFERENCES

TARGET ROLES:
${(e.dreamRoles||[]).map(w=>` ${w}`).join(`
`)}

PREFERRED EMPLOYERS:
${e.employers||` Tribhuvan University Teaching Hospital
 Patan Hospital
 Grande International Hospital
 Nepal Pharmaceuticals Laboratory
 Private diagnostic labs in Kathmandu`}

SALARY EXPECTATION:
${e.salary||"Entry-level: NPR 20,000 - 30,000 per month"}

AVAILABILITY:
${e.availability||"Immediate"}

${e.gaps?`ADDITIONAL NOTES:
${e.gaps}`:""}

REFERENCES
${e.references||"Available upon request from Nobel Hospital supervisors and academic mentors."}

DECLARATION
I hereby declare that the information provided above is true and accurate to the best of my knowledge.

Date: _______________
${a}
`},r=()=>{const a=n(),i=new Blob([a],{type:"text/plain"}),o=URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=`${e.fullName||"Aarti"}_CV.txt`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)};return s.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("button",{onClick:t,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium",children:" Back to Form"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"CV Preview"}),s.jsx("button",{onClick:r,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium",children:" Download CV"})]}),s.jsx("div",{className:"bg-white shadow-lg rounded-lg p-8 font-mono text-sm leading-relaxed",children:s.jsx("pre",{className:"whitespace-pre-wrap text-gray-800",children:n()})}),s.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:" CV Tips for Aarti:"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:" Customize this CV for each job application"}),s.jsx("li",{children:" Use keywords from job descriptions"}),s.jsx("li",{children:" Quantify achievements with numbers where possible"}),s.jsx("li",{children:" Keep it to 1 page for entry-level positions"}),s.jsx("li",{children:" Proofread carefully before submitting"}),s.jsx("li",{children:" Consider having it professionally designed"})]})]})]})})};var cae=typeof Element<"u",dae=typeof Map=="function",uae=typeof Set=="function",hae=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function cm(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,a;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!cm(e[r],t[r]))return!1;return!0}var i;if(dae&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;for(i=e.entries();!(r=i.next()).done;)if(!cm(r.value[1],t.get(r.value[0])))return!1;return!0}if(uae&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(hae&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;if(cae&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((a[r]==="_owner"||a[r]==="__v"||a[r]==="__o")&&e.$$typeof)&&!cm(e[a[r]],t[a[r]]))return!1;return!0}return e!==e&&t!==t}var fae=function(t,n){try{return cm(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const mae=vl(fae);var pae=function(e,t,n,r,a,i,o,l){if(!e){var d;if(t===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[n,r,a,i,o,l],f=0;d=new Error(t.replace(/%s/g,function(){return h[f++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}},gae=pae;const x2=vl(gae);var vae=function(t,n,r,a){var i=r?r.call(a,t,n):void 0;if(i!==void 0)return!!i;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var o=Object.keys(t),l=Object.keys(n);if(o.length!==l.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(n),h=0;h<o.length;h++){var f=o[h];if(!d(f))return!1;var u=t[f],m=n[f];if(i=r?r.call(a,u,m,f):void 0,i===!1||i===void 0&&u!==m)return!1}return!0};const xae=vl(vae);var sM=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(sM||{}),Sx={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},y2=Object.values(sM),W_={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},yae=Object.entries(W_).reduce((e,[t,n])=>(e[n]=t,e),{}),Gr="data-rh",_c={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},jc=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},bae=e=>{let t=jc(e,"title");const n=jc(e,_c.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,()=>t);const r=jc(e,_c.DEFAULT_TITLE);return t||r||void 0},wae=e=>jc(e,_c.ON_CHANGE_CLIENT_STATE)||(()=>{}),kx=(e,t)=>t.filter(n=>typeof n[e]<"u").map(n=>n[e]).reduce((n,r)=>({...n,...r}),{}),_ae=(e,t)=>t.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const a=Object.keys(r);for(let i=0;i<a.length;i+=1){const l=a[i].toLowerCase();if(e.indexOf(l)!==-1&&r[l])return n.concat(r)}}return n},[]),jae=e=>console&&typeof console.warn=="function"&&console.warn(e),su=(e,t,n)=>{const r={};return n.filter(a=>Array.isArray(a[e])?!0:(typeof a[e]<"u"&&jae(`Helmet: ${e} should be of type "Array". Instead found type "${typeof a[e]}"`),!1)).map(a=>a[e]).reverse().reduce((a,i)=>{const o={};i.filter(d=>{let h;const f=Object.keys(d);for(let m=0;m<f.length;m+=1){const p=f[m],w=p.toLowerCase();t.indexOf(w)!==-1&&!(h==="rel"&&d[h].toLowerCase()==="canonical")&&!(w==="rel"&&d[w].toLowerCase()==="stylesheet")&&(h=w),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(h=p)}if(!h||!d[h])return!1;const u=d[h].toLowerCase();return r[h]||(r[h]={}),o[h]||(o[h]={}),r[h][u]?!1:(o[h][u]=!0,!0)}).reverse().forEach(d=>a.push(d));const l=Object.keys(o);for(let d=0;d<l.length;d+=1){const h=l[d],f={...r[h],...o[h]};r[h]=f}return a},[]).reverse()},Nae=(e,t)=>{if(Array.isArray(e)&&e.length){for(let n=0;n<e.length;n+=1)if(e[n][t])return!0}return!1},Sae=e=>({baseTag:_ae(["href"],e),bodyAttributes:kx("bodyAttributes",e),defer:jc(e,_c.DEFER),encode:jc(e,_c.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:kx("htmlAttributes",e),linkTags:su("link",["rel","href"],e),metaTags:su("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:su("noscript",["innerHTML"],e),onChangeClientState:wae(e),scriptTags:su("script",["src","innerHTML"],e),styleTags:su("style",["cssText"],e),title:bae(e),titleAttributes:kx("titleAttributes",e),prioritizeSeoTags:Nae(e,_c.PRIORITIZE_SEO_TAGS)}),nM=e=>Array.isArray(e)?e.join(""):e,kae=(e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1},Cx=(e,t)=>Array.isArray(e)?e.reduce((n,r)=>(kae(r,t)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:e,priority:[]},b2=(e,t)=>({...e,[t]:void 0}),Cae=["noscript","script","style"],K0=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),rM=e=>Object.keys(e).reduce((t,n)=>{const r=typeof e[n]<"u"?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${r}`:r},""),Eae=(e,t,n,r)=>{const a=rM(n),i=nM(t);return a?`<${e} ${Gr}="true" ${a}>${K0(i,r)}</${e}>`:`<${e} ${Gr}="true">${K0(i,r)}</${e}>`},Tae=(e,t,n=!0)=>t.reduce((r,a)=>{const i=a,o=Object.keys(i).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,f)=>{const u=typeof i[f]>"u"?f:`${f}="${K0(i[f],n)}"`;return h?`${h} ${u}`:u},""),l=i.innerHTML||i.cssText||"",d=Cae.indexOf(e)===-1;return`${r}<${e} ${Gr}="true" ${o}${d?"/>":`>${l}</${e}>`}`},""),aM=(e,t={})=>Object.keys(e).reduce((n,r)=>{const a=W_[r];return n[a||r]=e[r],n},t),Pae=(e,t,n)=>{const r={key:t,[Gr]:!0},a=aM(n,r);return[Re.createElement("title",a,t)]},dm=(e,t)=>t.map((n,r)=>{const a={key:r,[Gr]:!0};return Object.keys(n).forEach(i=>{const l=W_[i]||i;if(l==="innerHTML"||l==="cssText"){const d=n.innerHTML||n.cssText;a.dangerouslySetInnerHTML={__html:d}}else a[l]=n[i]}),Re.createElement(e,a)}),xr=(e,t,n=!0)=>{switch(e){case"title":return{toComponent:()=>Pae(e,t.title,t.titleAttributes),toString:()=>Eae(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>aM(t),toString:()=>rM(t)};default:return{toComponent:()=>dm(e,t),toString:()=>Tae(e,t,n)}}},Aae=({metaTags:e,linkTags:t,scriptTags:n,encode:r})=>{const a=Cx(e,Sx.meta),i=Cx(t,Sx.link),o=Cx(n,Sx.script);return{priorityMethods:{toComponent:()=>[...dm("meta",a.priority),...dm("link",i.priority),...dm("script",o.priority)],toString:()=>`${xr("meta",a.priority,r)} ${xr("link",i.priority,r)} ${xr("script",o.priority,r)}`},metaTags:a.default,linkTags:i.default,scriptTags:o.default}},Oae=e=>{const{baseTag:t,bodyAttributes:n,encode:r=!0,htmlAttributes:a,noscriptTags:i,styleTags:o,title:l="",titleAttributes:d,prioritizeSeoTags:h}=e;let{linkTags:f,metaTags:u,scriptTags:m}=e,p={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:p,linkTags:f,metaTags:u,scriptTags:m}=Aae(e)),{priority:p,base:xr("base",t,r),bodyAttributes:xr("bodyAttributes",n,r),htmlAttributes:xr("htmlAttributes",a,r),link:xr("link",f,r),meta:xr("meta",u,r),noscript:xr("noscript",i,r),script:xr("script",m,r),style:xr("style",o,r),title:xr("title",{title:l,titleAttributes:d},r)}},Z0=Oae,Df=[],iM=!!(typeof window<"u"&&window.document&&window.document.createElement),Y0=class{constructor(e,t){Gt(this,"instances",[]);Gt(this,"canUseDOM",iM);Gt(this,"context");Gt(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Df:this.instances,add:e=>{(this.canUseDOM?Df:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Df:this.instances).indexOf(e);(this.canUseDOM?Df:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=Z0({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Rae={},oM=Re.createContext(Rae),Go,Lae=(Go=class extends _.Component{constructor(n){super(n);Gt(this,"helmetData");this.helmetData=new Y0(this.props.context||{},Go.canUseDOM)}render(){return Re.createElement(oM.Provider,{value:this.helmetData.value},this.props.children)}},Gt(Go,"canUseDOM",iM),Go),Dl=(e,t)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${e}[${Gr}]`),a=[].slice.call(r),i=[];let o;return t&&t.length&&t.forEach(l=>{const d=document.createElement(e);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h))if(h==="innerHTML")d.innerHTML=l.innerHTML;else if(h==="cssText")d.styleSheet?d.styleSheet.cssText=l.cssText:d.appendChild(document.createTextNode(l.cssText));else{const f=h,u=typeof l[f]>"u"?"":l[f];d.setAttribute(h,u)}d.setAttribute(Gr,"true"),a.some((h,f)=>(o=f,d.isEqualNode(h)))?a.splice(o,1):i.push(d)}),a.forEach(l=>{var d;return(d=l.parentNode)==null?void 0:d.removeChild(l)}),i.forEach(l=>n.appendChild(l)),{oldTags:a,newTags:i}},X0=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const r=n.getAttribute(Gr),a=r?r.split(","):[],i=[...a],o=Object.keys(t);for(const l of o){const d=t[l]||"";n.getAttribute(l)!==d&&n.setAttribute(l,d),a.indexOf(l)===-1&&a.push(l);const h=i.indexOf(l);h!==-1&&i.splice(h,1)}for(let l=i.length-1;l>=0;l-=1)n.removeAttribute(i[l]);a.length===i.length?n.removeAttribute(Gr):n.getAttribute(Gr)!==o.join(",")&&n.setAttribute(Gr,o.join(","))},Iae=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=nM(e)),X0("title",t)},w2=(e,t)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:a,linkTags:i,metaTags:o,noscriptTags:l,onChangeClientState:d,scriptTags:h,styleTags:f,title:u,titleAttributes:m}=e;X0("body",r),X0("html",a),Iae(u,m);const p={baseTag:Dl("base",n),linkTags:Dl("link",i),metaTags:Dl("meta",o),noscriptTags:Dl("noscript",l),scriptTags:Dl("script",h),styleTags:Dl("style",f)},w={},v={};Object.keys(p).forEach(x=>{const{newTags:y,oldTags:b}=p[x];y.length&&(w[x]=y),b.length&&(v[x]=p[x].oldTags)}),t&&t(),d(e,w,v)},nu=null,Mae=e=>{nu&&cancelAnimationFrame(nu),e.defer?nu=requestAnimationFrame(()=>{w2(e,()=>{nu=null})}):(w2(e),nu=null)},Dae=Mae,_2=class extends _.Component{constructor(){super(...arguments);Gt(this,"rendered",!1)}shouldComponentUpdate(t){return!xae(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:n}=this.props.context;let r=null;const a=Sae(t.get().map(i=>{const o={...i.props};return delete o.context,o}));Lae.canUseDOM?Dae(a):Z0&&(r=Z0(a)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},Ex,G_=(Ex=class extends _.Component{shouldComponentUpdate(e){return!mae(b2(this.props,"helmetData"),b2(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,r){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,n,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach(r=>{n={...n,[r]:e[r]}}),n}warnOnInvalidChildren(e,t){return x2(y2.some(n=>e.type===n),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${y2.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),x2(!t||typeof t=="string"||Array.isArray(t)&&!t.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return Re.Children.forEach(e,r=>{if(!r||!r.props)return;const{children:a,...i}=r.props,o=Object.keys(i).reduce((d,h)=>(d[yae[h]||h]=i[h],d),{});let{type:l}=r;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(r,a),l){case"Symbol(react.fragment)":t=this.mapChildrenToProps(a,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,o,a);break;default:t=this.mapObjectTypeChildren(r,t,o,a);break}}),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:r}=t;if(e&&(n=this.mapChildrenToProps(e,n)),r&&!(r instanceof Y0)){const a=r;r=new Y0(a.context,!0),delete n.helmetData}return r?Re.createElement(_2,{...n,context:r.value}):Re.createElement(oM.Consumer,null,a=>Re.createElement(_2,{...n,context:a}))}},Gt(Ex,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Ex);const Fae=()=>s.jsxs(s.Fragment,{children:[s.jsxs(G_,{children:[s.jsx("title",{children:"Same Day Delivery in Kathmandu | ezeyway - Instant Shopping & Delivery"}),s.jsx("meta",{name:"description",content:"Get same-day delivery in Kathmandu Valley. Shop groceries, electronics, fashion & more with instant delivery within 2 hours. Connect with trusted local vendors."}),s.jsx("meta",{name:"keywords",content:"Kathmandu delivery, same day delivery Kathmandu, instant delivery Nepal, Kathmandu Valley shopping, local delivery service Kathmandu"}),s.jsx("link",{rel:"canonical",href:"https://ezeyway.com/kathmandu-delivery"}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Service",name:"Kathmandu Same-Day Delivery Service",description:"Same-day delivery service covering all areas of Kathmandu Valley",provider:{"@type":"Organization",name:"ezeyway"},areaServed:{"@type":"City",name:"Kathmandu",addressCountry:"NP"},serviceType:"Delivery Service",offers:{"@type":"Offer",description:"Same-day delivery within 2 hours"}})})]}),s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Same Day Delivery in Kathmandu"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Why Choose ezeyway in Kathmandu?"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Same-day delivery within 2 hours"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Connect with verified local vendors"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Fresh products and best prices"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Covers entire Kathmandu Valley"})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Areas We Serve"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Thamel"," Boudha","Swayambhu","Durbar Square","New Road","Putalisadak","Baneshwor","Koteshwor","Jawalakhel","Lazimpat","Maharajgunj","Baluwatar"].map(e=>s.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:e},e))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Kathmandu Delivery Zones"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"border rounded-lg p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Core Kathmandu"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Central business districts with fastest delivery"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Delivery: Within 1 hour"})]}),s.jsxs("div",{className:"border rounded-lg p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Extended Valley"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Lalitpur, Bhaktapur, and nearby areas"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Delivery: Within 2 hours"})]}),s.jsxs("div",{className:"border rounded-lg p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Premium Service"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Express delivery for urgent orders"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Delivery: Within 30 minutes"})]})]})]}),s.jsx("div",{className:"text-center",children:s.jsx("a",{href:"/search",className:"inline-block bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors",children:"Start Shopping in Kathmandu"})})]})})]}),$ae=()=>s.jsxs(s.Fragment,{children:[s.jsxs(G_,{children:[s.jsx("title",{children:"Same Day Delivery in Lalitpur | ezeyway - Instant Shopping & Delivery"}),s.jsx("meta",{name:"description",content:"Get same-day delivery in Lalitpur, Nepal. Shop groceries, electronics, fashion & more with instant delivery within 2 hours. Connect with trusted local vendors."}),s.jsx("meta",{name:"keywords",content:"Lalitpur delivery, same day delivery Lalitpur, instant delivery Nepal, Patan shopping, local delivery service Lalitpur"}),s.jsx("link",{rel:"canonical",href:"https://ezeyway.com/lalitpur-delivery"}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Service",name:"Lalitpur Same-Day Delivery Service",description:"Same-day delivery service covering all areas of Lalitpur (Patan)",provider:{"@type":"Organization",name:"ezeyway"},areaServed:{"@type":"City",name:"Lalitpur",alternateName:"Patan",addressCountry:"NP"},serviceType:"Delivery Service",offers:{"@type":"Offer",description:"Same-day delivery within 2 hours"}})})]}),s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Same Day Delivery in Lalitpur (Patan)"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Why Choose ezeyway in Lalitpur?"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Same-day delivery within 2 hours"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Connect with verified local vendors"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Fresh products and best prices"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Covers all Lalitpur neighborhoods"})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Areas We Serve in Lalitpur"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Patan Durbar Square","Jawalakhel","Pulchowk","Sanepa","Lagankhel","Bakhundole","Kupandole","Ekantakuna","Gwarko","Imadol","Nakhu","Thecho"].map(e=>s.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:e},e))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Lalitpur Delivery Information"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Popular Shopping Areas"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:" Pulchowk - Electronics & Fashion"}),s.jsx("li",{children:" Jawalakhel - Restaurants & Groceries"}),s.jsx("li",{children:" Kupandole - Modern Shopping"}),s.jsx("li",{children:" Lagankhel - Traditional Markets"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Delivery Times"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:" Standard Delivery: 1-2 hours"}),s.jsx("li",{children:" Express Service: 30-45 minutes"}),s.jsx("li",{children:" Operating Hours: 6 AM - 10 PM"}),s.jsx("li",{children:" Weekend Service: Available"})]})]})]})]}),s.jsx("div",{className:"text-center",children:s.jsx("a",{href:"/search",className:"inline-block bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors",children:"Start Shopping in Lalitpur"})})]})})]}),Bae=()=>s.jsxs(s.Fragment,{children:[s.jsxs(G_,{children:[s.jsx("title",{children:"Same Day Delivery in Bhaktapur | ezeyway - Instant Shopping & Delivery"}),s.jsx("meta",{name:"description",content:"Get same-day delivery in Bhaktapur, Nepal. Shop groceries, electronics, fashion & more with instant delivery within 2 hours. Connect with trusted local vendors."}),s.jsx("meta",{name:"keywords",content:"Bhaktapur delivery, same day delivery Bhaktapur, instant delivery Nepal, Bhadgaon shopping, local delivery service Bhaktapur"}),s.jsx("link",{rel:"canonical",href:"https://ezeyway.com/bhaktapur-delivery"}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Service",name:"Bhaktapur Same-Day Delivery Service",description:"Same-day delivery service covering all areas of Bhaktapur (Bhadgaon)",provider:{"@type":"Organization",name:"ezeyway"},areaServed:{"@type":"City",name:"Bhaktapur",alternateName:"Bhadgaon",addressCountry:"NP"},serviceType:"Delivery Service",offers:{"@type":"Offer",description:"Same-day delivery within 2 hours"}})})]}),s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Same Day Delivery in Bhaktapur (Bhadgaon)"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Why Choose ezeyway in Bhaktapur?"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Same-day delivery within 2 hours"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Connect with verified local vendors"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Fresh products and best prices"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Covers all Bhaktapur neighborhoods"})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Areas We Serve in Bhaktapur"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Durbar Square","Taumadhi","Dattatreya","Pottery Square","Siddha Pokhari","Bode","Katunje","Thimi","Madhyapur","Suryabinayak","Balkot","Chyamhasingh"].map(e=>s.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:e},e))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Bhaktapur Delivery Information"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Local Specialties"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:" Traditional Pottery & Crafts"}),s.jsx("li",{children:" Local Juju Dhau (Yogurt)"}),s.jsx("li",{children:" Fresh Vegetables & Spices"}),s.jsx("li",{children:" Handmade Goods"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Delivery Times"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:" Standard Delivery: 1-2 hours"}),s.jsx("li",{children:" Express Service: 45-60 minutes"}),s.jsx("li",{children:" Operating Hours: 6 AM - 10 PM"}),s.jsx("li",{children:" Weekend Service: Available"})]})]})]})]}),s.jsx("div",{className:"text-center",children:s.jsx("a",{href:"/search",className:"inline-block bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors",children:"Start Shopping in Bhaktapur"})})]})})]}),zae=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Compose New Message"}),s.jsx("p",{children:"Coming soon..."})]}),Vae=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Customer Management"}),s.jsx("p",{children:"Coming soon..."})]}),Uae=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Search Messages"}),s.jsx("p",{children:"Coming soon..."})]}),qae=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Message Settings"}),s.jsx("p",{children:"Coming soon..."})]}),Hae=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Products"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Product Statistics"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"24"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Products"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Categories"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"8"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Active Categories"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Approvals"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"3"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Review"})]})]})]}),Wae=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Return Order Management"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Return Requests"}),s.jsx("p",{className:"text-3xl font-bold text-red-600",children:"7"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pending review"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Approved Returns"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"12"}),s.jsx("p",{className:"text-sm text-gray-600",children:"This month"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Refund Amount"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"8,450"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Processed"})]})]})]}),Gae=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Review Management"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Average Rating"}),s.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:"4.7"}),s.jsx("p",{className:"text-sm text-gray-600",children:""})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Reviews"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"89"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Customer feedback"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Response"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"5"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Need attention"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Positive Reviews"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"76"}),s.jsx("p",{className:"text-sm text-gray-600",children:"85% positive"})]})]})]}),Kae=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Income Dashboard"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Today's Earnings"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"2,450"}),s.jsx("p",{className:"text-sm text-gray-600",children:"+12% from yesterday"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"This Week"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"18,320"}),s.jsx("p",{className:"text-sm text-gray-600",children:"7 days total"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"This Month"}),s.jsx("p",{className:"text-3xl font-bold text-purple-600",children:"72,850"}),s.jsx("p",{className:"text-sm text-gray-600",children:"30 days total"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Payout"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"5,200"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Available for withdrawal"})]})]})]}),Zae=new SB,Yae=()=>{rV();const e=Fn();return _.useEffect(()=>{window.scrollTo(0,0)},[e.pathname]),s.jsxs(vz,{children:[s.jsx(ct,{path:"/",element:s.jsx(fk,{})}),s.jsx(ct,{path:"/splash",element:s.jsx(aV,{})}),s.jsx(ct,{path:"/login",element:s.jsx(pV,{})}),s.jsx(ct,{path:"/home",element:s.jsx(fk,{})}),s.jsx(ct,{path:"/search",element:s.jsx(hK,{})}),s.jsx(ct,{path:"/cart",element:s.jsx(iK,{})}),s.jsx(ct,{path:"/wishlist",element:s.jsx(Lr,{children:s.jsx(mK,{})})}),s.jsx(ct,{path:"/profile",element:s.jsx(Lr,{children:s.jsx(wK,{})})}),s.jsx(ct,{path:"/profile-edit",element:s.jsx(Lr,{children:s.jsx(NK,{})})}),s.jsx(ct,{path:"/privacy",element:s.jsx(SK,{})}),s.jsx(ct,{path:"/privacy-policy",element:s.jsx(kK,{})}),s.jsx(ct,{path:"/product/:id",element:s.jsx(YG,{})}),s.jsx(ct,{path:"/vendor/:vendorId",element:s.jsx(nK,{})}),s.jsx(ct,{path:"/checkout",element:s.jsx(Lr,{children:s.jsx(iZ,{})})}),s.jsx(ct,{path:"/order-confirmation/:orderId",element:s.jsx(Lr,{children:s.jsx(oZ,{})})}),s.jsx(ct,{path:"/orders",element:s.jsx(mY,{})}),s.jsx(ct,{path:"/addresses",element:s.jsx(Lr,{children:s.jsx(vY,{})})}),s.jsx(ct,{path:"/payments",element:s.jsx(Lr,{children:s.jsx(wY,{})})}),s.jsx(ct,{path:"/help",element:s.jsx(NY,{})}),s.jsx(ct,{path:"/support",element:s.jsx(Lr,{children:s.jsx(LY,{})})}),s.jsx(ct,{path:"/messages",element:s.jsx(Lr,{children:s.jsx(wk,{})})}),s.jsx(ct,{path:"/order/:orderId/messages",element:s.jsx(Lr,{children:s.jsx(wk,{})})}),s.jsx(ct,{path:"/signup",element:s.jsx(CK,{})}),s.jsx(ct,{path:"/forgot-password",element:s.jsx(EK,{})}),s.jsx(ct,{path:"/category/:categoryName",element:s.jsx(CY,{})}),s.jsx(ct,{path:"/featured-items",element:s.jsx(TY,{})}),s.jsx(ct,{path:"/trending-items",element:s.jsx(AY,{})}),s.jsx(ct,{path:"/latest-products",element:s.jsx(RY,{})}),s.jsx(ct,{path:"/vendor/login",element:s.jsx(IY,{})}),s.jsx(ct,{path:"/vendor/signup",element:s.jsx(MY,{})}),s.jsx(ct,{path:"/vendor/onboarding",element:s.jsx(FY,{})}),s.jsx(ct,{path:"/vendor/rejection",element:s.jsx($Y,{})}),s.jsx(ct,{path:"/vendor/dashboard",element:s.jsx(p2,{})}),s.jsx(ct,{path:"/vendor/home",element:s.jsx(p2,{})}),s.jsx(ct,{path:"/vendor/place-order",element:s.jsx(Mre,{})}),s.jsx(ct,{path:"/vendor/sales",element:s.jsx(Dre,{})}),s.jsx(ct,{path:"/vendor/messages",element:s.jsx(v2,{})}),s.jsx(ct,{path:"/vendor/order/:orderId/messages",element:s.jsx(v2,{})}),s.jsx(ct,{path:"/vendor/messages/compose",element:s.jsx(zae,{})}),s.jsx(ct,{path:"/vendor/messages/search",element:s.jsx(Uae,{})}),s.jsx(ct,{path:"/vendor/messages/settings",element:s.jsx(qae,{})}),s.jsx(ct,{path:"/vendor/customers",element:s.jsx(Vae,{})}),s.jsx(ct,{path:"/vendor/add-products",element:s.jsx(Hae,{})}),s.jsx(ct,{path:"/vendor/products",element:s.jsx(tae,{})}),s.jsx(ct,{path:"/vendor/add-product",element:s.jsx(Gre,{})}),s.jsx(ct,{path:"/vendor/orders",element:s.jsx(Vre,{})}),s.jsx(ct,{path:"/vendor/return-orders",element:s.jsx(Wae,{})}),s.jsx(ct,{path:"/vendor/reviews",element:s.jsx(Gae,{})}),s.jsx(ct,{path:"/vendor/income",element:s.jsx(Kae,{})}),s.jsx(ct,{path:"/vendor/wallet",element:s.jsx(Kre,{})}),s.jsx(ct,{path:"/vendor/profile",element:s.jsx(Xre,{})}),s.jsx(ct,{path:"/vendor/profile-management",element:s.jsx(Jre,{})}),s.jsx(ct,{path:"/vendor/company",element:s.jsx(eae,{})}),s.jsx(ct,{path:"/vendor/security",element:s.jsx(Qre,{})}),s.jsx(ct,{path:"/vendor/notifications",element:s.jsx(sae,{})}),s.jsx(ct,{path:"/vendor/settings",element:s.jsx(zre,{})}),s.jsx(ct,{path:"/vendor/summary",element:s.jsx(nae,{})}),s.jsx(ct,{path:"/vendor/analytics",element:s.jsx(rae,{})}),s.jsx(ct,{path:"/notifications",element:s.jsx(Lr,{children:s.jsx(aae,{})})}),s.jsx(ct,{path:"/aarti",element:s.jsx(iae,{})}),s.jsx(ct,{path:"/kathmandu-delivery",element:s.jsx(Fae,{})}),s.jsx(ct,{path:"/lalitpur-delivery",element:s.jsx($ae,{})}),s.jsx(ct,{path:"/bhaktapur-delivery",element:s.jsx(Bae,{})}),s.jsx(ct,{path:"*",element:s.jsx(rK,{})})]})},Xae=()=>(Uz(),_.useEffect(()=>{(async()=>{try{await Dz.requestAllPermissions(),console.log("All permissions requested successfully")}catch(t){console.error("Failed to request permissions:",t)}})()},[]),s.jsx(wz,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(Yae,{})})),Jae=()=>{const[e,t]=_.useState(!0),n=()=>{console.log("Splash screen completed, hiding splash"),t(!1)};return e?(console.log("Showing splash screen"),s.jsx(sV,{onComplete:n})):(console.log("Splash completed, rendering main app"),s.jsx(Vz,{children:s.jsx(Xz,{children:s.jsx(sB,{children:s.jsxs(eV,{children:[s.jsx(F6,{}),s.jsx(g$,{}),s.jsx(Xae,{})]})})})}))},lM=()=>s.jsx(CB,{client:Zae,children:s.jsx(Jz,{children:s.jsx(Jae,{})})});console.log(" Initializing ULTIMATE Notification System...");(async()=>{try{const{appInitializer:e}=await Ue(async()=>{const{appInitializer:t}=await import("./appInitializer-fDGsNs1m.js");return{appInitializer:t}},[]);e.initialize().then(()=>{console.log(" App initialized with persistent vendor sessions")}).catch(t=>{console.error(" App initialization failed:",t)})}catch(e){console.error(" Failed to initialize app:",e)}})();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log(" Service Worker registered for ultimate notifications:",e)}).catch(e=>{console.error(" Service Worker registration failed:",e)})});gt.isNativePlatform()&&yp.initialize().then(()=>{console.log(" FCM Service initialized on app startup")}).catch(e=>{console.error(" FCM Service initialization failed:",e)});window.addEventListener("storage",e=>{if(e.key==="ultimate_order_alert"&&e.newValue)try{const t=JSON.parse(e.newValue);if(t.type==="ultimate_order_alert"){console.log(" CROSS-TAB ALERT RECEIVED:",t);const{simpleNotificationService:n}=require("./services/simpleNotificationService");n.showOrderNotification(t.orderNumber,t.amount,t.orderId)}}catch(t){console.error(" Error processing cross-tab alert:",t)}if(e.key==="whatsappInstantOrder"&&e.newValue)try{const t=JSON.parse(e.newValue);console.log(" WHATSAPP-STYLE INSTANT ORDER RECEIVED:",t);const{fcmService:n}=require("./services/fcmService");n.startContinuousSoundForOrder(t.orderId,t),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{...t,whatsappStyle:!0,instantOpen:!0,keepSoundPlaying:!0}}))},500)}catch(t){console.error(" Error processing WhatsApp instant order:",t)}});"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",e=>{if(console.log(" Message from Service Worker:",e.data),e.data&&e.data.type==="PLAY_ORDER_SOUND"){const{orderId:t,orderNumber:n,amount:r,emergency:a}=e.data;console.log(" Service Worker requested sound playback for order:",n);const{simpleNotificationService:i}=require("./services/simpleNotificationService");a?i.showOrderNotification(n,r,t):i.playOrderAlertSound()}});document.addEventListener("visibilitychange",()=>{if(!document.hidden){console.log(" Page became visible - checking for pending ultimate alerts");const e=localStorage.getItem("ultimate_order_alert");if(e)try{const t=JSON.parse(e);if(Date.now()-t.timestamp<3e5){console.log(" Showing pending ultimate alert on page visibility");const{simpleNotificationService:a}=require("./services/simpleNotificationService");a.showOrderNotification(t.orderNumber,t.amount,t.orderId)}else localStorage.removeItem("ultimate_order_alert")}catch(t){console.error(" Error processing pending alert:",t),localStorage.removeItem("ultimate_order_alert")}}});Gb(document.getElementById("root")).render(s.jsx(lM,{}));window.testNotifications=async function(){console.log(" GLOBAL TEST: Testing notification system..."),alert(" Testing notification system from console...");try{const{simpleNotificationService:e}=await Ue(async()=>{const{simpleNotificationService:t}=await Promise.resolve().then(()=>rl);return{simpleNotificationService:t}},void 0);await e.showOrderNotification("TEST-"+Date.now().toString().slice(-4),"99.99",999999),console.log(" Global test completed")}catch(e){console.error(" Global test failed:",e),alert(" Test failed: "+e.message)}};window.checkNotificationPermissions=async function(){console.log(" Checking notification permissions..."),"Notification"in window?(console.log(" Notification permission:",Notification.permission),alert("Notification permission: "+Notification.permission)):(console.log(" Notifications not supported"),alert(" Notifications not supported in this browser"));try{const{simpleNotificationService:e}=await Ue(async()=>{const{simpleNotificationService:n}=await Promise.resolve().then(()=>rl);return{simpleNotificationService:n}},void 0),t=await e.checkAndRequestPermissions();console.log(" Permission check result:",t)}catch(e){console.error(" Permission check failed:",e)}};window.showTestOrder=function(){console.log(" Showing test order modal..."),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:999999,orderNumber:"TEST-"+Date.now().toString().slice(-4),amount:"99.99",test:!0}})),alert(" Test order modal should appear")};window.checkForNewOrders=async function(){console.log(" Manually checking for new orders...");try{const{apiRequest:e}=await Ue(async()=>{const{apiRequest:r}=await Promise.resolve().then(()=>hs);return{apiRequest:r}},void 0),{response:t,data:n}=await e("/vendor/orders/?limit=20");if(t.ok&&n){const r=n.results||n||[],a=r.filter(i=>i.status==="pending");if(console.log(" Total orders:",r.length),console.log(" Pending orders:",a.length),a.length>0){alert(` Found ${a.length} pending orders:

${a.map(o=>` Order #${o.order_number} - ${o.total_amount}`).join(`
`)}

Triggering notifications...`);const{simpleNotificationService:i}=await Ue(async()=>{const{simpleNotificationService:o}=await Promise.resolve().then(()=>rl);return{simpleNotificationService:o}},void 0);for(const o of a)console.log(" Triggering notification for pending order:",o.order_number),await i.showOrderNotification(o.order_number,o.total_amount,o.id)}else alert(" No pending orders found")}else alert(" Failed to fetch orders")}catch(e){console.error(" Error checking orders:",e),alert(" Error: "+e.message)}};window.testMobileSound=async function(){console.log(" Testing mobile sound functionality..."),alert(" Testing mobile sound - you should hear emergency beeps");try{const{realPushNotifications:e}=await Ue(async()=>{const{realPushNotifications:t}=await Promise.resolve().then(()=>L_);return{realPushNotifications:t}},void 0);await e.testMobileSound(),console.log(" Mobile sound test completed")}catch(e){console.error(" Mobile sound test failed:",e),alert(" Sound test failed: "+e.message)}};window.testEmergencyNotification=async function(){console.log(" Testing emergency notification..."),alert(" Testing emergency notification system");try{const{realPushNotifications:e}=await Ue(async()=>{const{realPushNotifications:t}=await Promise.resolve().then(()=>L_);return{realPushNotifications:t}},void 0);await e.testEmergencyNotification(),console.log(" Emergency notification test completed")}catch(e){console.error(" Emergency notification test failed:",e),alert(" Emergency notification test failed: "+e.message)}};window.checkFCMStatus=async function(){console.log(" Checking FCM status for WhatsApp-style notifications...");try{const{realPushNotifications:e}=await Ue(async()=>{const{realPushNotifications:r}=await Promise.resolve().then(()=>L_);return{realPushNotifications:r}},void 0),t=await e.checkFCMStatus(),n=`
 FCM STATUS CHECK:
 Has Token: ${t.hasToken}
 Token: ${t.token||"NONE"}
 Platform: ${t.platform}

${t.hasToken?" Background notifications SHOULD work when browser is closed!":" NO FCM TOKEN - Background notifications WONT work when browser is closed!"}
    `;console.log(n),alert(n.trim())}catch(e){console.error(" FCM status check failed:",e),alert(" FCM status check failed: "+e.message)}};console.log(" Global test functions available:");console.log("  - testNotifications() - Test full notification system");console.log("  - checkNotificationPermissions() - Check permission status");console.log("  - showTestOrder() - Show test order modal");console.log("  - checkForNewOrders() - Manually check and trigger notifications for pending orders");console.log("  - testMobileSound() - Test mobile sound functionality");console.log("  - testEmergencyNotification() - Test emergency notification");console.log("  - checkFCMStatus() - Check FCM token for WhatsApp-style background notifications");console.log("");console.log(" To test notifications:");console.log("  1. Open browser console (F12)");console.log("  2. Run: checkNotificationPermissions()");console.log("  3. Run: checkFCMStatus() - CRITICAL: Check if background notifications work");console.log("  4. Run: testNotifications()");console.log("  5. Run: testMobileSound() - Test if sound works on mobile");console.log('  6. Or click the orange " TEST" button in vendor orders');console.log("  7. Run: checkForNewOrders() to check for real pending orders");console.log("");console.log(" WHATSAPP-STYLE TESTING:");console.log("  1. Run: checkFCMStatus() - Ensure FCM token is registered");console.log("  2. Close browser completely");console.log("  3. Place test order - should receive notification even when closed!");Gb(document.getElementById("root")).render(s.jsx(lM,{}));export{Qe as A,gt as C,ww as W,Ue as _,_ as a,ai as b,hs as c,d0 as d,yp as f,cie as i,s as j,go as r,rl as s};
