import{a as e,j as t}from"./index-C2HGdyT6.js";const b=({src:a,alt:l,className:u="",fallback:d="/placeholder.jpg",placeholder:f})=>{const[g,o]=e.useState(f||""),[n,m]=e.useState(!1),[p,c]=e.useState(!1),s=e.useRef(null);e.useEffect(()=>{const r=new IntersectionObserver(x=>{x.forEach(i=>{i.isIntersecting&&(o(a),r.unobserve(i.target))})},{threshold:.1,rootMargin:"50px"});return s.current&&r.observe(s.current),()=>r.disconnect()},[a]);const h=()=>{m(!0),c(!1)},v=()=>{c(!0),o(d)};return t.jsxs("div",{className:`relative overflow-hidden ${u}`,children:[!n&&!p&&t.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),t.jsx("img",{ref:s,src:g,alt:l,className:`w-full h-full object-cover transition-opacity duration-300 ${n?"opacity-100":"opacity-0"}`,onLoad:h,onError:v,loading:"lazy"})]})};export{b as default};
