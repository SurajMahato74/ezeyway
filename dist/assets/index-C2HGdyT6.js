var u5=Object.defineProperty;var Ij=e=>{throw TypeError(e)};var h5=(e,t,n)=>t in e?u5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ht=(e,t,n)=>h5(e,typeof t!="symbol"?t+"":t,n),lv=(e,t,n)=>t.has(e)||Ij("Cannot "+n);var Le=(e,t,n)=>(lv(e,t,"read from private field"),n?n.call(e):t.get(e)),Bt=(e,t,n)=>t.has(e)?Ij("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Nt=(e,t,n,r)=>(lv(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),fn=(e,t,n)=>(lv(e,t,"access private method"),n);var nf=(e,t,n,r)=>({set _(i){Nt(e,t,i,n)},get _(){return Le(e,t,r)}});function f5(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const m5="modulepreload",p5=function(e){return"/"+e},Mj={},ze=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(d=>{if(d=p5(d),d in Mj)return;Mj[d]=!0;const h=d.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":m5,h||(u.as="script"),u.crossOrigin="",u.href=d,l&&u.setAttribute("nonce",l),document.head.appendChild(u),h)return new Promise((m,p)=>{u.addEventListener("load",m),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function vl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var E2={exports:{}},xp={},T2={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh=Symbol.for("react.element"),g5=Symbol.for("react.portal"),v5=Symbol.for("react.fragment"),x5=Symbol.for("react.strict_mode"),y5=Symbol.for("react.profiler"),b5=Symbol.for("react.provider"),w5=Symbol.for("react.context"),_5=Symbol.for("react.forward_ref"),j5=Symbol.for("react.suspense"),N5=Symbol.for("react.memo"),S5=Symbol.for("react.lazy"),Dj=Symbol.iterator;function k5(e){return e===null||typeof e!="object"?null:(e=Dj&&e[Dj]||e["@@iterator"],typeof e=="function"?e:null)}var P2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A2=Object.assign,O2={};function sd(e,t,n){this.props=e,this.context=t,this.refs=O2,this.updater=n||P2}sd.prototype.isReactComponent={};sd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function R2(){}R2.prototype=sd.prototype;function Z0(e,t,n){this.props=e,this.context=t,this.refs=O2,this.updater=n||P2}var Y0=Z0.prototype=new R2;Y0.constructor=Z0;A2(Y0,sd.prototype);Y0.isPureReactComponent=!0;var Fj=Array.isArray,L2=Object.prototype.hasOwnProperty,X0={current:null},I2={key:!0,ref:!0,__self:!0,__source:!0};function M2(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)L2.call(t,r)&&!I2.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var d=Array(l),h=0;h<l;h++)d[h]=arguments[h+2];i.children=d}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:vh,type:e,key:a,ref:o,props:i,_owner:X0.current}}function C5(e,t){return{$$typeof:vh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function J0(e){return typeof e=="object"&&e!==null&&e.$$typeof===vh}function E5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $j=/\/+/g;function cv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?E5(""+e.key):t.toString(36)}function Df(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vh:case g5:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+cv(o,0):r,Fj(i)?(n="",e!=null&&(n=e.replace($j,"$&/")+"/"),Df(i,t,n,"",function(h){return h})):i!=null&&(J0(i)&&(i=C5(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($j,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Fj(e))for(var l=0;l<e.length;l++){a=e[l];var d=r+cv(a,l);o+=Df(a,t,n,d,i)}else if(d=k5(e),typeof d=="function")for(e=d.call(e),l=0;!(a=e.next()).done;)a=a.value,d=r+cv(a,l++),o+=Df(a,t,n,d,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function rf(e,t,n){if(e==null)return e;var r=[],i=0;return Df(e,r,"","",function(a){return t.call(n,a,i++)}),r}function T5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var In={current:null},Ff={transition:null},P5={ReactCurrentDispatcher:In,ReactCurrentBatchConfig:Ff,ReactCurrentOwner:X0};function D2(){throw Error("act(...) is not supported in production builds of React.")}Rt.Children={map:rf,forEach:function(e,t,n){rf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rf(e,function(){t++}),t},toArray:function(e){return rf(e,function(t){return t})||[]},only:function(e){if(!J0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rt.Component=sd;Rt.Fragment=v5;Rt.Profiler=y5;Rt.PureComponent=Z0;Rt.StrictMode=x5;Rt.Suspense=j5;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P5;Rt.act=D2;Rt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=A2({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=X0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)L2.call(t,d)&&!I2.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){l=Array(d);for(var h=0;h<d;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:vh,type:e.type,key:i,ref:a,props:r,_owner:o}};Rt.createContext=function(e){return e={$$typeof:w5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:b5,_context:e},e.Consumer=e};Rt.createElement=M2;Rt.createFactory=function(e){var t=M2.bind(null,e);return t.type=e,t};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(e){return{$$typeof:_5,render:e}};Rt.isValidElement=J0;Rt.lazy=function(e){return{$$typeof:S5,_payload:{_status:-1,_result:e},_init:T5}};Rt.memo=function(e,t){return{$$typeof:N5,type:e,compare:t===void 0?null:t}};Rt.startTransition=function(e){var t=Ff.transition;Ff.transition={};try{e()}finally{Ff.transition=t}};Rt.unstable_act=D2;Rt.useCallback=function(e,t){return In.current.useCallback(e,t)};Rt.useContext=function(e){return In.current.useContext(e)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(e){return In.current.useDeferredValue(e)};Rt.useEffect=function(e,t){return In.current.useEffect(e,t)};Rt.useId=function(){return In.current.useId()};Rt.useImperativeHandle=function(e,t,n){return In.current.useImperativeHandle(e,t,n)};Rt.useInsertionEffect=function(e,t){return In.current.useInsertionEffect(e,t)};Rt.useLayoutEffect=function(e,t){return In.current.useLayoutEffect(e,t)};Rt.useMemo=function(e,t){return In.current.useMemo(e,t)};Rt.useReducer=function(e,t,n){return In.current.useReducer(e,t,n)};Rt.useRef=function(e){return In.current.useRef(e)};Rt.useState=function(e){return In.current.useState(e)};Rt.useSyncExternalStore=function(e,t,n){return In.current.useSyncExternalStore(e,t,n)};Rt.useTransition=function(){return In.current.useTransition()};Rt.version="18.3.1";T2.exports=Rt;var _=T2.exports;const Ae=vl(_),Q0=f5({__proto__:null,default:Ae},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A5=_,O5=Symbol.for("react.element"),R5=Symbol.for("react.fragment"),L5=Object.prototype.hasOwnProperty,I5=A5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M5={key:!0,ref:!0,__self:!0,__source:!0};function F2(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)L5.call(t,r)&&!M5.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:O5,type:e,key:a,ref:o,props:i,_owner:I5.current}}xp.Fragment=R5;xp.jsx=F2;xp.jsxs=F2;E2.exports=xp;var s=E2.exports,$2={exports:{}},dr={},B2={exports:{}},z2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,D){var B=z.length;z.push(D);e:for(;0<B;){var V=B-1>>>1,H=z[V];if(0<i(H,D))z[V]=D,z[B]=H,B=V;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var D=z[0],B=z.pop();if(B!==D){z[0]=B;e:for(var V=0,H=z.length,q=H>>>1;V<q;){var W=2*(V+1)-1,Y=z[W],U=W+1,G=z[U];if(0>i(Y,B))U<H&&0>i(G,Y)?(z[V]=G,z[U]=B,V=U):(z[V]=Y,z[W]=B,V=W);else if(U<H&&0>i(G,B))z[V]=G,z[U]=B,V=U;else break e}}return D}function i(z,D){var B=z.sortIndex-D.sortIndex;return B!==0?B:z.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],h=[],f=1,u=null,m=3,p=!1,w=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(z){for(var D=n(h);D!==null;){if(D.callback===null)r(h);else if(D.startTime<=z)r(h),D.sortIndex=D.expirationTime,t(d,D);else break;D=n(h)}}function N(z){if(y=!1,j(z),!w)if(n(d)!==null)w=!0,Z(S);else{var D=n(h);D!==null&&X(N,D.startTime-z)}}function S(z,D){w=!1,y&&(y=!1,g(A),A=-1),p=!0;var B=m;try{for(j(D),u=n(d);u!==null&&(!(u.expirationTime>D)||z&&!R());){var V=u.callback;if(typeof V=="function"){u.callback=null,m=u.priorityLevel;var H=V(u.expirationTime<=D);D=e.unstable_now(),typeof H=="function"?u.callback=H:u===n(d)&&r(d),j(D)}else r(d);u=n(d)}if(u!==null)var q=!0;else{var W=n(h);W!==null&&X(N,W.startTime-D),q=!1}return q}finally{u=null,m=B,p=!1}}var C=!1,T=null,A=-1,I=5,P=-1;function R(){return!(e.unstable_now()-P<I)}function E(){if(T!==null){var z=e.unstable_now();P=z;var D=!0;try{D=T(!0,z)}finally{D?F():(C=!1,T=null)}}else C=!1}var F;if(typeof x=="function")F=function(){x(E)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,M=O.port2;O.port1.onmessage=E,F=function(){M.postMessage(null)}}else F=function(){b(E,0)};function Z(z){T=z,C||(C=!0,F())}function X(z,D){A=b(function(){z(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,Z(S))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(z){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var B=m;m=D;try{return z()}finally{m=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,D){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var B=m;m=z;try{return D()}finally{m=B}},e.unstable_scheduleCallback=function(z,D,B){var V=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?V+B:V):B=V,z){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=B+H,z={id:f++,callback:D,priorityLevel:z,startTime:B,expirationTime:H,sortIndex:-1},B>V?(z.sortIndex=B,t(h,z),n(d)===null&&z===n(h)&&(y?(g(A),A=-1):y=!0,X(N,B-V))):(z.sortIndex=H,t(d,z),w||p||(w=!0,Z(S))),z},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(z){var D=m;return function(){var B=m;m=D;try{return z.apply(this,arguments)}finally{m=B}}}})(z2);B2.exports=z2;var D5=B2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F5=_,lr=D5;function He(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V2=new Set,Au={};function xl(e,t){Ac(e,t),Ac(e+"Capture",t)}function Ac(e,t){for(Au[e]=t,e=0;e<t.length;e++)V2.add(t[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cx=Object.prototype.hasOwnProperty,$5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bj={},zj={};function B5(e){return Cx.call(zj,e)?!0:Cx.call(Bj,e)?!1:$5.test(e)?zj[e]=!0:(Bj[e]=!0,!1)}function z5(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function V5(e,t,n,r){if(t===null||typeof t>"u"||z5(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mn(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){un[e]=new Mn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];un[t]=new Mn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){un[e]=new Mn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){un[e]=new Mn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){un[e]=new Mn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){un[e]=new Mn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){un[e]=new Mn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){un[e]=new Mn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){un[e]=new Mn(e,5,!1,e.toLowerCase(),null,!1,!1)});var eb=/[\-:]([a-z])/g;function tb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(eb,tb);un[t]=new Mn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(eb,tb);un[t]=new Mn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(eb,tb);un[t]=new Mn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){un[e]=new Mn(e,1,!1,e.toLowerCase(),null,!1,!1)});un.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){un[e]=new Mn(e,1,!1,e.toLowerCase(),null,!0,!0)});function sb(e,t,n,r){var i=un.hasOwnProperty(t)?un[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(V5(t,n,i,r)&&(n=null),r||i===null?B5(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var va=F5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,af=Symbol.for("react.element"),zl=Symbol.for("react.portal"),Vl=Symbol.for("react.fragment"),nb=Symbol.for("react.strict_mode"),Ex=Symbol.for("react.profiler"),U2=Symbol.for("react.provider"),q2=Symbol.for("react.context"),rb=Symbol.for("react.forward_ref"),Tx=Symbol.for("react.suspense"),Px=Symbol.for("react.suspense_list"),ib=Symbol.for("react.memo"),Pa=Symbol.for("react.lazy"),H2=Symbol.for("react.offscreen"),Vj=Symbol.iterator;function Dd(e){return e===null||typeof e!="object"?null:(e=Vj&&e[Vj]||e["@@iterator"],typeof e=="function"?e:null)}var ws=Object.assign,dv;function nu(e){if(dv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);dv=t&&t[1]||""}return`
`+dv+e}var uv=!1;function hv(e,t){if(!e||uv)return"";uv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var d=`
`+i[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=l);break}}}finally{uv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?nu(e):""}function U5(e){switch(e.tag){case 5:return nu(e.type);case 16:return nu("Lazy");case 13:return nu("Suspense");case 19:return nu("SuspenseList");case 0:case 2:case 15:return e=hv(e.type,!1),e;case 11:return e=hv(e.type.render,!1),e;case 1:return e=hv(e.type,!0),e;default:return""}}function Ax(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vl:return"Fragment";case zl:return"Portal";case Ex:return"Profiler";case nb:return"StrictMode";case Tx:return"Suspense";case Px:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case q2:return(e.displayName||"Context")+".Consumer";case U2:return(e._context.displayName||"Context")+".Provider";case rb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ib:return t=e.displayName||null,t!==null?t:Ax(e.type)||"Memo";case Pa:t=e._payload,e=e._init;try{return Ax(e(t))}catch{}}return null}function q5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ax(t);case 8:return t===nb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function eo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function W2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function H5(e){var t=W2(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function of(e){e._valueTracker||(e._valueTracker=H5(e))}function G2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W2(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function dm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ox(e,t){var n=t.checked;return ws({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Uj(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=eo(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function K2(e,t){t=t.checked,t!=null&&sb(e,"checked",t,!1)}function Rx(e,t){K2(e,t);var n=eo(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lx(e,t.type,n):t.hasOwnProperty("defaultValue")&&Lx(e,t.type,eo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qj(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Lx(e,t,n){(t!=="number"||dm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ru=Array.isArray;function ic(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+eo(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ix(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(He(91));return ws({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hj(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(He(92));if(ru(n)){if(1<n.length)throw Error(He(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:eo(n)}}function Z2(e,t){var n=eo(t.value),r=eo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Wj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Y2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Y2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lf,X2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lf=lf||document.createElement("div"),lf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ou(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var uu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W5=["Webkit","ms","Moz","O"];Object.keys(uu).forEach(function(e){W5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),uu[t]=uu[e]})});function J2(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||uu.hasOwnProperty(e)&&uu[e]?(""+t).trim():t+"px"}function Q2(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=J2(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var G5=ws({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dx(e,t){if(t){if(G5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(He(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(He(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(He(61))}if(t.style!=null&&typeof t.style!="object")throw Error(He(62))}}function Fx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $x=null;function ab(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bx=null,ac=null,oc=null;function Gj(e){if(e=bh(e)){if(typeof Bx!="function")throw Error(He(280));var t=e.stateNode;t&&(t=jp(t),Bx(e.stateNode,e.type,t))}}function eC(e){ac?oc?oc.push(e):oc=[e]:ac=e}function tC(){if(ac){var e=ac,t=oc;if(oc=ac=null,Gj(e),t)for(e=0;e<t.length;e++)Gj(t[e])}}function sC(e,t){return e(t)}function nC(){}var fv=!1;function rC(e,t,n){if(fv)return e(t,n);fv=!0;try{return sC(e,t,n)}finally{fv=!1,(ac!==null||oc!==null)&&(nC(),tC())}}function Ru(e,t){var n=e.stateNode;if(n===null)return null;var r=jp(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(He(231,t,typeof n));return n}var zx=!1;if(ia)try{var Fd={};Object.defineProperty(Fd,"passive",{get:function(){zx=!0}}),window.addEventListener("test",Fd,Fd),window.removeEventListener("test",Fd,Fd)}catch{zx=!1}function K5(e,t,n,r,i,a,o,l,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(f){this.onError(f)}}var hu=!1,um=null,hm=!1,Vx=null,Z5={onError:function(e){hu=!0,um=e}};function Y5(e,t,n,r,i,a,o,l,d){hu=!1,um=null,K5.apply(Z5,arguments)}function X5(e,t,n,r,i,a,o,l,d){if(Y5.apply(this,arguments),hu){if(hu){var h=um;hu=!1,um=null}else throw Error(He(198));hm||(hm=!0,Vx=h)}}function yl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function iC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Kj(e){if(yl(e)!==e)throw Error(He(188))}function J5(e){var t=e.alternate;if(!t){if(t=yl(e),t===null)throw Error(He(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Kj(i),e;if(a===r)return Kj(i),t;a=a.sibling}throw Error(He(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(He(189))}}if(n.alternate!==r)throw Error(He(190))}if(n.tag!==3)throw Error(He(188));return n.stateNode.current===n?e:t}function aC(e){return e=J5(e),e!==null?oC(e):null}function oC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=oC(e);if(t!==null)return t;e=e.sibling}return null}var lC=lr.unstable_scheduleCallback,Zj=lr.unstable_cancelCallback,Q5=lr.unstable_shouldYield,e3=lr.unstable_requestPaint,Os=lr.unstable_now,t3=lr.unstable_getCurrentPriorityLevel,ob=lr.unstable_ImmediatePriority,cC=lr.unstable_UserBlockingPriority,fm=lr.unstable_NormalPriority,s3=lr.unstable_LowPriority,dC=lr.unstable_IdlePriority,yp=null,ji=null;function n3(e){if(ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(yp,e,void 0,(e.current.flags&128)===128)}catch{}}var Kr=Math.clz32?Math.clz32:a3,r3=Math.log,i3=Math.LN2;function a3(e){return e>>>=0,e===0?32:31-(r3(e)/i3|0)|0}var cf=64,df=4194304;function iu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=iu(l):(a&=o,a!==0&&(r=iu(a)))}else o=n&~i,o!==0?r=iu(o):a!==0&&(r=iu(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Kr(t),i=1<<n,r|=e[n],t&=~i;return r}function o3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l3(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Kr(a),l=1<<o,d=i[o];d===-1?(!(l&n)||l&r)&&(i[o]=o3(l,t)):d<=t&&(e.expiredLanes|=l),a&=~l}}function Ux(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uC(){var e=cf;return cf<<=1,!(cf&4194240)&&(cf=64),e}function mv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kr(t),e[t]=n}function c3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Kr(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function lb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Kr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Qt=0;function hC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fC,cb,mC,pC,gC,qx=!1,uf=[],qa=null,Ha=null,Wa=null,Lu=new Map,Iu=new Map,Ra=[],d3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yj(e,t){switch(e){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Lu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(t.pointerId)}}function $d(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=bh(t),t!==null&&cb(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function u3(e,t,n,r,i){switch(t){case"focusin":return qa=$d(qa,e,t,n,r,i),!0;case"dragenter":return Ha=$d(Ha,e,t,n,r,i),!0;case"mouseover":return Wa=$d(Wa,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Lu.set(a,$d(Lu.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Iu.set(a,$d(Iu.get(a)||null,e,t,n,r,i)),!0}return!1}function vC(e){var t=Io(e.target);if(t!==null){var n=yl(t);if(n!==null){if(t=n.tag,t===13){if(t=iC(n),t!==null){e.blockedOn=t,gC(e.priority,function(){mC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $f(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Hx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);$x=r,n.target.dispatchEvent(r),$x=null}else return t=bh(n),t!==null&&cb(t),e.blockedOn=n,!1;t.shift()}return!0}function Xj(e,t,n){$f(e)&&n.delete(t)}function h3(){qx=!1,qa!==null&&$f(qa)&&(qa=null),Ha!==null&&$f(Ha)&&(Ha=null),Wa!==null&&$f(Wa)&&(Wa=null),Lu.forEach(Xj),Iu.forEach(Xj)}function Bd(e,t){e.blockedOn===t&&(e.blockedOn=null,qx||(qx=!0,lr.unstable_scheduleCallback(lr.unstable_NormalPriority,h3)))}function Mu(e){function t(i){return Bd(i,e)}if(0<uf.length){Bd(uf[0],e);for(var n=1;n<uf.length;n++){var r=uf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(qa!==null&&Bd(qa,e),Ha!==null&&Bd(Ha,e),Wa!==null&&Bd(Wa,e),Lu.forEach(t),Iu.forEach(t),n=0;n<Ra.length;n++)r=Ra[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ra.length&&(n=Ra[0],n.blockedOn===null);)vC(n),n.blockedOn===null&&Ra.shift()}var lc=va.ReactCurrentBatchConfig,pm=!0;function f3(e,t,n,r){var i=Qt,a=lc.transition;lc.transition=null;try{Qt=1,db(e,t,n,r)}finally{Qt=i,lc.transition=a}}function m3(e,t,n,r){var i=Qt,a=lc.transition;lc.transition=null;try{Qt=4,db(e,t,n,r)}finally{Qt=i,lc.transition=a}}function db(e,t,n,r){if(pm){var i=Hx(e,t,n,r);if(i===null)Nv(e,t,r,gm,n),Yj(e,r);else if(u3(i,e,t,n,r))r.stopPropagation();else if(Yj(e,r),t&4&&-1<d3.indexOf(e)){for(;i!==null;){var a=bh(i);if(a!==null&&fC(a),a=Hx(e,t,n,r),a===null&&Nv(e,t,r,gm,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Nv(e,t,r,null,n)}}var gm=null;function Hx(e,t,n,r){if(gm=null,e=ab(r),e=Io(e),e!==null)if(t=yl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=iC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gm=e,null}function xC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t3()){case ob:return 1;case cC:return 4;case fm:case s3:return 16;case dC:return 536870912;default:return 16}default:return 16}}var Ba=null,ub=null,Bf=null;function yC(){if(Bf)return Bf;var e,t=ub,n=t.length,r,i="value"in Ba?Ba.value:Ba.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return Bf=i.slice(e,1<r?1-r:void 0)}function zf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hf(){return!0}function Jj(){return!1}function ur(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?hf:Jj,this.isPropagationStopped=Jj,this}return ws(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hf)},persist:function(){},isPersistent:hf}),t}var nd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hb=ur(nd),yh=ws({},nd,{view:0,detail:0}),p3=ur(yh),pv,gv,zd,bp=ws({},yh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zd&&(zd&&e.type==="mousemove"?(pv=e.screenX-zd.screenX,gv=e.screenY-zd.screenY):gv=pv=0,zd=e),pv)},movementY:function(e){return"movementY"in e?e.movementY:gv}}),Qj=ur(bp),g3=ws({},bp,{dataTransfer:0}),v3=ur(g3),x3=ws({},yh,{relatedTarget:0}),vv=ur(x3),y3=ws({},nd,{animationName:0,elapsedTime:0,pseudoElement:0}),b3=ur(y3),w3=ws({},nd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_3=ur(w3),j3=ws({},nd,{data:0}),eN=ur(j3),N3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=k3[e])?!!t[e]:!1}function fb(){return C3}var E3=ws({},yh,{key:function(e){if(e.key){var t=N3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?S3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fb,charCode:function(e){return e.type==="keypress"?zf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),T3=ur(E3),P3=ws({},bp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tN=ur(P3),A3=ws({},yh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fb}),O3=ur(A3),R3=ws({},nd,{propertyName:0,elapsedTime:0,pseudoElement:0}),L3=ur(R3),I3=ws({},bp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),M3=ur(I3),D3=[9,13,27,32],mb=ia&&"CompositionEvent"in window,fu=null;ia&&"documentMode"in document&&(fu=document.documentMode);var F3=ia&&"TextEvent"in window&&!fu,bC=ia&&(!mb||fu&&8<fu&&11>=fu),sN=" ",nN=!1;function wC(e,t){switch(e){case"keyup":return D3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _C(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ul=!1;function $3(e,t){switch(e){case"compositionend":return _C(t);case"keypress":return t.which!==32?null:(nN=!0,sN);case"textInput":return e=t.data,e===sN&&nN?null:e;default:return null}}function B3(e,t){if(Ul)return e==="compositionend"||!mb&&wC(e,t)?(e=yC(),Bf=ub=Ba=null,Ul=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bC&&t.locale!=="ko"?null:t.data;default:return null}}var z3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!z3[e.type]:t==="textarea"}function jC(e,t,n,r){eC(r),t=vm(t,"onChange"),0<t.length&&(n=new hb("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var mu=null,Du=null;function V3(e){LC(e,0)}function wp(e){var t=Wl(e);if(G2(t))return e}function U3(e,t){if(e==="change")return t}var NC=!1;if(ia){var xv;if(ia){var yv="oninput"in document;if(!yv){var iN=document.createElement("div");iN.setAttribute("oninput","return;"),yv=typeof iN.oninput=="function"}xv=yv}else xv=!1;NC=xv&&(!document.documentMode||9<document.documentMode)}function aN(){mu&&(mu.detachEvent("onpropertychange",SC),Du=mu=null)}function SC(e){if(e.propertyName==="value"&&wp(Du)){var t=[];jC(t,Du,e,ab(e)),rC(V3,t)}}function q3(e,t,n){e==="focusin"?(aN(),mu=t,Du=n,mu.attachEvent("onpropertychange",SC)):e==="focusout"&&aN()}function H3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wp(Du)}function W3(e,t){if(e==="click")return wp(t)}function G3(e,t){if(e==="input"||e==="change")return wp(t)}function K3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qr=typeof Object.is=="function"?Object.is:K3;function Fu(e,t){if(Qr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Cx.call(t,i)||!Qr(e[i],t[i]))return!1}return!0}function oN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lN(e,t){var n=oN(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oN(n)}}function kC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function CC(){for(var e=window,t=dm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=dm(e.document)}return t}function pb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Z3(e){var t=CC(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kC(n.ownerDocument.documentElement,n)){if(r!==null&&pb(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lN(n,a);var o=lN(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Y3=ia&&"documentMode"in document&&11>=document.documentMode,ql=null,Wx=null,pu=null,Gx=!1;function cN(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gx||ql==null||ql!==dm(r)||(r=ql,"selectionStart"in r&&pb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pu&&Fu(pu,r)||(pu=r,r=vm(Wx,"onSelect"),0<r.length&&(t=new hb("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ql)))}function ff(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hl={animationend:ff("Animation","AnimationEnd"),animationiteration:ff("Animation","AnimationIteration"),animationstart:ff("Animation","AnimationStart"),transitionend:ff("Transition","TransitionEnd")},bv={},EC={};ia&&(EC=document.createElement("div").style,"AnimationEvent"in window||(delete Hl.animationend.animation,delete Hl.animationiteration.animation,delete Hl.animationstart.animation),"TransitionEvent"in window||delete Hl.transitionend.transition);function _p(e){if(bv[e])return bv[e];if(!Hl[e])return e;var t=Hl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in EC)return bv[e]=t[n];return e}var TC=_p("animationend"),PC=_p("animationiteration"),AC=_p("animationstart"),OC=_p("transitionend"),RC=new Map,dN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function co(e,t){RC.set(e,t),xl(t,[e])}for(var wv=0;wv<dN.length;wv++){var _v=dN[wv],X3=_v.toLowerCase(),J3=_v[0].toUpperCase()+_v.slice(1);co(X3,"on"+J3)}co(TC,"onAnimationEnd");co(PC,"onAnimationIteration");co(AC,"onAnimationStart");co("dblclick","onDoubleClick");co("focusin","onFocus");co("focusout","onBlur");co(OC,"onTransitionEnd");Ac("onMouseEnter",["mouseout","mouseover"]);Ac("onMouseLeave",["mouseout","mouseover"]);Ac("onPointerEnter",["pointerout","pointerover"]);Ac("onPointerLeave",["pointerout","pointerover"]);xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q3=new Set("cancel close invalid load scroll toggle".split(" ").concat(au));function uN(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,X5(r,t,void 0,e),e.currentTarget=null}function LC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],d=l.instance,h=l.currentTarget;if(l=l.listener,d!==a&&i.isPropagationStopped())break e;uN(i,l,h),a=d}else for(o=0;o<r.length;o++){if(l=r[o],d=l.instance,h=l.currentTarget,l=l.listener,d!==a&&i.isPropagationStopped())break e;uN(i,l,h),a=d}}}if(hm)throw e=Vx,hm=!1,Vx=null,e}function ls(e,t){var n=t[Jx];n===void 0&&(n=t[Jx]=new Set);var r=e+"__bubble";n.has(r)||(IC(t,e,2,!1),n.add(r))}function jv(e,t,n){var r=0;t&&(r|=4),IC(n,e,r,t)}var mf="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[mf]){e[mf]=!0,V2.forEach(function(n){n!=="selectionchange"&&(Q3.has(n)||jv(n,!1,e),jv(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mf]||(t[mf]=!0,jv("selectionchange",!1,t))}}function IC(e,t,n,r){switch(xC(t)){case 1:var i=f3;break;case 4:i=m3;break;default:i=db}n=i.bind(null,t,n,e),i=void 0,!zx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Nv(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Io(l),o===null)return;if(d=o.tag,d===5||d===6){r=a=o;continue e}l=l.parentNode}}r=r.return}rC(function(){var h=a,f=ab(n),u=[];e:{var m=RC.get(e);if(m!==void 0){var p=hb,w=e;switch(e){case"keypress":if(zf(n)===0)break e;case"keydown":case"keyup":p=T3;break;case"focusin":w="focus",p=vv;break;case"focusout":w="blur",p=vv;break;case"beforeblur":case"afterblur":p=vv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Qj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=v3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=O3;break;case TC:case PC:case AC:p=b3;break;case OC:p=L3;break;case"scroll":p=p3;break;case"wheel":p=M3;break;case"copy":case"cut":case"paste":p=_3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=tN}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?m!==null?m+"Capture":null:m;y=[];for(var x=h,j;x!==null;){j=x;var N=j.stateNode;if(j.tag===5&&N!==null&&(j=N,g!==null&&(N=Ru(x,g),N!=null&&y.push(Bu(x,N,j)))),b)break;x=x.return}0<y.length&&(m=new p(m,w,null,n,f),u.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",m&&n!==$x&&(w=n.relatedTarget||n.fromElement)&&(Io(w)||w[aa]))break e;if((p||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=h,w=w?Io(w):null,w!==null&&(b=yl(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=h),p!==w)){if(y=Qj,N="onMouseLeave",g="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=tN,N="onPointerLeave",g="onPointerEnter",x="pointer"),b=p==null?m:Wl(p),j=w==null?m:Wl(w),m=new y(N,x+"leave",p,n,f),m.target=b,m.relatedTarget=j,N=null,Io(f)===h&&(y=new y(g,x+"enter",w,n,f),y.target=j,y.relatedTarget=b,N=y),b=N,p&&w)t:{for(y=p,g=w,x=0,j=y;j;j=Ol(j))x++;for(j=0,N=g;N;N=Ol(N))j++;for(;0<x-j;)y=Ol(y),x--;for(;0<j-x;)g=Ol(g),j--;for(;x--;){if(y===g||g!==null&&y===g.alternate)break t;y=Ol(y),g=Ol(g)}y=null}else y=null;p!==null&&hN(u,m,p,y,!1),w!==null&&b!==null&&hN(u,b,w,y,!0)}}e:{if(m=h?Wl(h):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=U3;else if(rN(m))if(NC)S=G3;else{S=H3;var C=q3}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=W3);if(S&&(S=S(e,h))){jC(u,S,n,f);break e}C&&C(e,m,h),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&Lx(m,"number",m.value)}switch(C=h?Wl(h):window,e){case"focusin":(rN(C)||C.contentEditable==="true")&&(ql=C,Wx=h,pu=null);break;case"focusout":pu=Wx=ql=null;break;case"mousedown":Gx=!0;break;case"contextmenu":case"mouseup":case"dragend":Gx=!1,cN(u,n,f);break;case"selectionchange":if(Y3)break;case"keydown":case"keyup":cN(u,n,f)}var T;if(mb)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ul?wC(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(bC&&n.locale!=="ko"&&(Ul||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ul&&(T=yC()):(Ba=f,ub="value"in Ba?Ba.value:Ba.textContent,Ul=!0)),C=vm(h,A),0<C.length&&(A=new eN(A,e,null,n,f),u.push({event:A,listeners:C}),T?A.data=T:(T=_C(n),T!==null&&(A.data=T)))),(T=F3?$3(e,n):B3(e,n))&&(h=vm(h,"onBeforeInput"),0<h.length&&(f=new eN("onBeforeInput","beforeinput",null,n,f),u.push({event:f,listeners:h}),f.data=T))}LC(u,t)})}function Bu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vm(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Ru(e,n),a!=null&&r.unshift(Bu(e,a,i)),a=Ru(e,t),a!=null&&r.push(Bu(e,a,i))),e=e.return}return r}function Ol(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hN(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,d=l.alternate,h=l.stateNode;if(d!==null&&d===r)break;l.tag===5&&h!==null&&(l=h,i?(d=Ru(n,a),d!=null&&o.unshift(Bu(n,d,l))):i||(d=Ru(n,a),d!=null&&o.push(Bu(n,d,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var eD=/\r\n?/g,tD=/\u0000|\uFFFD/g;function fN(e){return(typeof e=="string"?e:""+e).replace(eD,`
`).replace(tD,"")}function pf(e,t,n){if(t=fN(t),fN(e)!==t&&n)throw Error(He(425))}function xm(){}var Kx=null,Zx=null;function Yx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xx=typeof setTimeout=="function"?setTimeout:void 0,sD=typeof clearTimeout=="function"?clearTimeout:void 0,mN=typeof Promise=="function"?Promise:void 0,nD=typeof queueMicrotask=="function"?queueMicrotask:typeof mN<"u"?function(e){return mN.resolve(null).then(e).catch(rD)}:Xx;function rD(e){setTimeout(function(){throw e})}function Sv(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Mu(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Mu(t)}function Ga(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function pN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var rd=Math.random().toString(36).slice(2),vi="__reactFiber$"+rd,zu="__reactProps$"+rd,aa="__reactContainer$"+rd,Jx="__reactEvents$"+rd,iD="__reactListeners$"+rd,aD="__reactHandles$"+rd;function Io(e){var t=e[vi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[aa]||n[vi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=pN(e);e!==null;){if(n=e[vi])return n;e=pN(e)}return t}e=n,n=e.parentNode}return null}function bh(e){return e=e[vi]||e[aa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(He(33))}function jp(e){return e[zu]||null}var Qx=[],Gl=-1;function uo(e){return{current:e}}function hs(e){0>Gl||(e.current=Qx[Gl],Qx[Gl]=null,Gl--)}function as(e,t){Gl++,Qx[Gl]=e.current,e.current=t}var to={},wn=uo(to),Yn=uo(!1),rl=to;function Oc(e,t){var n=e.type.contextTypes;if(!n)return to;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Xn(e){return e=e.childContextTypes,e!=null}function ym(){hs(Yn),hs(wn)}function gN(e,t,n){if(wn.current!==to)throw Error(He(168));as(wn,t),as(Yn,n)}function MC(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(He(108,q5(e)||"Unknown",i));return ws({},n,r)}function bm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||to,rl=wn.current,as(wn,e),as(Yn,Yn.current),!0}function vN(e,t,n){var r=e.stateNode;if(!r)throw Error(He(169));n?(e=MC(e,t,rl),r.__reactInternalMemoizedMergedChildContext=e,hs(Yn),hs(wn),as(wn,e)):hs(Yn),as(Yn,n)}var Xi=null,Np=!1,kv=!1;function DC(e){Xi===null?Xi=[e]:Xi.push(e)}function oD(e){Np=!0,DC(e)}function ho(){if(!kv&&Xi!==null){kv=!0;var e=0,t=Qt;try{var n=Xi;for(Qt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xi=null,Np=!1}catch(i){throw Xi!==null&&(Xi=Xi.slice(e+1)),lC(ob,ho),i}finally{Qt=t,kv=!1}}return null}var Kl=[],Zl=0,wm=null,_m=0,yr=[],br=0,il=null,ea=1,ta="";function Co(e,t){Kl[Zl++]=_m,Kl[Zl++]=wm,wm=e,_m=t}function FC(e,t,n){yr[br++]=ea,yr[br++]=ta,yr[br++]=il,il=e;var r=ea;e=ta;var i=32-Kr(r)-1;r&=~(1<<i),n+=1;var a=32-Kr(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ea=1<<32-Kr(t)+i|n<<i|r,ta=a+e}else ea=1<<a|n<<i|r,ta=e}function gb(e){e.return!==null&&(Co(e,1),FC(e,1,0))}function vb(e){for(;e===wm;)wm=Kl[--Zl],Kl[Zl]=null,_m=Kl[--Zl],Kl[Zl]=null;for(;e===il;)il=yr[--br],yr[br]=null,ta=yr[--br],yr[br]=null,ea=yr[--br],yr[br]=null}var ar=null,ir=null,ms=!1,Vr=null;function $C(e,t){var n=wr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ar=e,ir=Ga(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ar=e,ir=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=il!==null?{id:ea,overflow:ta}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=wr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ar=e,ir=null,!0):!1;default:return!1}}function ey(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ty(e){if(ms){var t=ir;if(t){var n=t;if(!xN(e,t)){if(ey(e))throw Error(He(418));t=Ga(n.nextSibling);var r=ar;t&&xN(e,t)?$C(r,n):(e.flags=e.flags&-4097|2,ms=!1,ar=e)}}else{if(ey(e))throw Error(He(418));e.flags=e.flags&-4097|2,ms=!1,ar=e}}}function yN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ar=e}function gf(e){if(e!==ar)return!1;if(!ms)return yN(e),ms=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yx(e.type,e.memoizedProps)),t&&(t=ir)){if(ey(e))throw BC(),Error(He(418));for(;t;)$C(e,t),t=Ga(t.nextSibling)}if(yN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(He(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ir=Ga(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ir=null}}else ir=ar?Ga(e.stateNode.nextSibling):null;return!0}function BC(){for(var e=ir;e;)e=Ga(e.nextSibling)}function Rc(){ir=ar=null,ms=!1}function xb(e){Vr===null?Vr=[e]:Vr.push(e)}var lD=va.ReactCurrentBatchConfig;function Vd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(He(309));var r=n.stateNode}if(!r)throw Error(He(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(He(284));if(!n._owner)throw Error(He(290,e))}return e}function vf(e,t){throw e=Object.prototype.toString.call(t),Error(He(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bN(e){var t=e._init;return t(e._payload)}function zC(e){function t(g,x){if(e){var j=g.deletions;j===null?(g.deletions=[x],g.flags|=16):j.push(x)}}function n(g,x){if(!e)return null;for(;x!==null;)t(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=Xa(g,x),g.index=0,g.sibling=null,g}function a(g,x,j){return g.index=j,e?(j=g.alternate,j!==null?(j=j.index,j<x?(g.flags|=2,x):j):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,x,j,N){return x===null||x.tag!==6?(x=Rv(j,g.mode,N),x.return=g,x):(x=i(x,j),x.return=g,x)}function d(g,x,j,N){var S=j.type;return S===Vl?f(g,x,j.props.children,N,j.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pa&&bN(S)===x.type)?(N=i(x,j.props),N.ref=Vd(g,x,j),N.return=g,N):(N=Kf(j.type,j.key,j.props,null,g.mode,N),N.ref=Vd(g,x,j),N.return=g,N)}function h(g,x,j,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==j.containerInfo||x.stateNode.implementation!==j.implementation?(x=Lv(j,g.mode,N),x.return=g,x):(x=i(x,j.children||[]),x.return=g,x)}function f(g,x,j,N,S){return x===null||x.tag!==7?(x=Zo(j,g.mode,N,S),x.return=g,x):(x=i(x,j),x.return=g,x)}function u(g,x,j){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Rv(""+x,g.mode,j),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case af:return j=Kf(x.type,x.key,x.props,null,g.mode,j),j.ref=Vd(g,null,x),j.return=g,j;case zl:return x=Lv(x,g.mode,j),x.return=g,x;case Pa:var N=x._init;return u(g,N(x._payload),j)}if(ru(x)||Dd(x))return x=Zo(x,g.mode,j,null),x.return=g,x;vf(g,x)}return null}function m(g,x,j,N){var S=x!==null?x.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return S!==null?null:l(g,x,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case af:return j.key===S?d(g,x,j,N):null;case zl:return j.key===S?h(g,x,j,N):null;case Pa:return S=j._init,m(g,x,S(j._payload),N)}if(ru(j)||Dd(j))return S!==null?null:f(g,x,j,N,null);vf(g,j)}return null}function p(g,x,j,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return g=g.get(j)||null,l(x,g,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case af:return g=g.get(N.key===null?j:N.key)||null,d(x,g,N,S);case zl:return g=g.get(N.key===null?j:N.key)||null,h(x,g,N,S);case Pa:var C=N._init;return p(g,x,j,C(N._payload),S)}if(ru(N)||Dd(N))return g=g.get(j)||null,f(x,g,N,S,null);vf(x,N)}return null}function w(g,x,j,N){for(var S=null,C=null,T=x,A=x=0,I=null;T!==null&&A<j.length;A++){T.index>A?(I=T,T=null):I=T.sibling;var P=m(g,T,j[A],N);if(P===null){T===null&&(T=I);break}e&&T&&P.alternate===null&&t(g,T),x=a(P,x,A),C===null?S=P:C.sibling=P,C=P,T=I}if(A===j.length)return n(g,T),ms&&Co(g,A),S;if(T===null){for(;A<j.length;A++)T=u(g,j[A],N),T!==null&&(x=a(T,x,A),C===null?S=T:C.sibling=T,C=T);return ms&&Co(g,A),S}for(T=r(g,T);A<j.length;A++)I=p(T,g,A,j[A],N),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?A:I.key),x=a(I,x,A),C===null?S=I:C.sibling=I,C=I);return e&&T.forEach(function(R){return t(g,R)}),ms&&Co(g,A),S}function y(g,x,j,N){var S=Dd(j);if(typeof S!="function")throw Error(He(150));if(j=S.call(j),j==null)throw Error(He(151));for(var C=S=null,T=x,A=x=0,I=null,P=j.next();T!==null&&!P.done;A++,P=j.next()){T.index>A?(I=T,T=null):I=T.sibling;var R=m(g,T,P.value,N);if(R===null){T===null&&(T=I);break}e&&T&&R.alternate===null&&t(g,T),x=a(R,x,A),C===null?S=R:C.sibling=R,C=R,T=I}if(P.done)return n(g,T),ms&&Co(g,A),S;if(T===null){for(;!P.done;A++,P=j.next())P=u(g,P.value,N),P!==null&&(x=a(P,x,A),C===null?S=P:C.sibling=P,C=P);return ms&&Co(g,A),S}for(T=r(g,T);!P.done;A++,P=j.next())P=p(T,g,A,P.value,N),P!==null&&(e&&P.alternate!==null&&T.delete(P.key===null?A:P.key),x=a(P,x,A),C===null?S=P:C.sibling=P,C=P);return e&&T.forEach(function(E){return t(g,E)}),ms&&Co(g,A),S}function b(g,x,j,N){if(typeof j=="object"&&j!==null&&j.type===Vl&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case af:e:{for(var S=j.key,C=x;C!==null;){if(C.key===S){if(S=j.type,S===Vl){if(C.tag===7){n(g,C.sibling),x=i(C,j.props.children),x.return=g,g=x;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pa&&bN(S)===C.type){n(g,C.sibling),x=i(C,j.props),x.ref=Vd(g,C,j),x.return=g,g=x;break e}n(g,C);break}else t(g,C);C=C.sibling}j.type===Vl?(x=Zo(j.props.children,g.mode,N,j.key),x.return=g,g=x):(N=Kf(j.type,j.key,j.props,null,g.mode,N),N.ref=Vd(g,x,j),N.return=g,g=N)}return o(g);case zl:e:{for(C=j.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===j.containerInfo&&x.stateNode.implementation===j.implementation){n(g,x.sibling),x=i(x,j.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else t(g,x);x=x.sibling}x=Lv(j,g.mode,N),x.return=g,g=x}return o(g);case Pa:return C=j._init,b(g,x,C(j._payload),N)}if(ru(j))return w(g,x,j,N);if(Dd(j))return y(g,x,j,N);vf(g,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,x!==null&&x.tag===6?(n(g,x.sibling),x=i(x,j),x.return=g,g=x):(n(g,x),x=Rv(j,g.mode,N),x.return=g,g=x),o(g)):n(g,x)}return b}var Lc=zC(!0),VC=zC(!1),jm=uo(null),Nm=null,Yl=null,yb=null;function bb(){yb=Yl=Nm=null}function wb(e){var t=jm.current;hs(jm),e._currentValue=t}function sy(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cc(e,t){Nm=e,yb=Yl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wn=!0),e.firstContext=null)}function Sr(e){var t=e._currentValue;if(yb!==e)if(e={context:e,memoizedValue:t,next:null},Yl===null){if(Nm===null)throw Error(He(308));Yl=e,Nm.dependencies={lanes:0,firstContext:e}}else Yl=Yl.next=e;return t}var Mo=null;function _b(e){Mo===null?Mo=[e]:Mo.push(e)}function UC(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,_b(t)):(n.next=i.next,i.next=n),t.interleaved=n,oa(e,r)}function oa(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Aa=!1;function jb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ka(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,oa(e,n)}return i=r.interleaved,i===null?(t.next=t,_b(r)):(t.next=i.next,i.next=t),r.interleaved=t,oa(e,n)}function Vf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lb(e,n)}}function wN(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Sm(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var d=l,h=d.next;d.next=null,o===null?a=h:o.next=h,o=d;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=d))}if(a!==null){var u=i.baseState;o=0,f=h=d=null,l=a;do{var m=l.lane,p=l.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,y=l;switch(m=t,p=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){u=w.call(p,u,m);break e}u=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,m=typeof w=="function"?w.call(p,u,m):w,m==null)break e;u=ws({},u,m);break e;case 2:Aa=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=p,d=u):f=f.next=p,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(f===null&&(d=u),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);ol|=o,e.lanes=o,e.memoizedState=u}}function _N(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(He(191,i));i.call(r)}}}var wh={},Ni=uo(wh),Vu=uo(wh),Uu=uo(wh);function Do(e){if(e===wh)throw Error(He(174));return e}function Nb(e,t){switch(as(Uu,t),as(Vu,e),as(Ni,wh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mx(t,e)}hs(Ni),as(Ni,t)}function Ic(){hs(Ni),hs(Vu),hs(Uu)}function HC(e){Do(Uu.current);var t=Do(Ni.current),n=Mx(t,e.type);t!==n&&(as(Vu,e),as(Ni,n))}function Sb(e){Vu.current===e&&(hs(Ni),hs(Vu))}var vs=uo(0);function km(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cv=[];function kb(){for(var e=0;e<Cv.length;e++)Cv[e]._workInProgressVersionPrimary=null;Cv.length=0}var Uf=va.ReactCurrentDispatcher,Ev=va.ReactCurrentBatchConfig,al=0,ys=null,Us=null,Qs=null,Cm=!1,gu=!1,qu=0,cD=0;function mn(){throw Error(He(321))}function Cb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qr(e[n],t[n]))return!1;return!0}function Eb(e,t,n,r,i,a){if(al=a,ys=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Uf.current=e===null||e.memoizedState===null?fD:mD,e=n(r,i),gu){a=0;do{if(gu=!1,qu=0,25<=a)throw Error(He(301));a+=1,Qs=Us=null,t.updateQueue=null,Uf.current=pD,e=n(r,i)}while(gu)}if(Uf.current=Em,t=Us!==null&&Us.next!==null,al=0,Qs=Us=ys=null,Cm=!1,t)throw Error(He(300));return e}function Tb(){var e=qu!==0;return qu=0,e}function fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qs===null?ys.memoizedState=Qs=e:Qs=Qs.next=e,Qs}function kr(){if(Us===null){var e=ys.alternate;e=e!==null?e.memoizedState:null}else e=Us.next;var t=Qs===null?ys.memoizedState:Qs.next;if(t!==null)Qs=t,Us=e;else{if(e===null)throw Error(He(310));Us=e,e={memoizedState:Us.memoizedState,baseState:Us.baseState,baseQueue:Us.baseQueue,queue:Us.queue,next:null},Qs===null?ys.memoizedState=Qs=e:Qs=Qs.next=e}return Qs}function Hu(e,t){return typeof t=="function"?t(e):t}function Tv(e){var t=kr(),n=t.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=e;var r=Us,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,d=null,h=a;do{var f=h.lane;if((al&f)===f)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var u={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(l=d=u,o=r):d=d.next=u,ys.lanes|=f,ol|=f}h=h.next}while(h!==null&&h!==a);d===null?o=r:d.next=l,Qr(r,t.memoizedState)||(Wn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,ys.lanes|=a,ol|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pv(e){var t=kr(),n=t.queue;if(n===null)throw Error(He(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Qr(a,t.memoizedState)||(Wn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function WC(){}function GC(e,t){var n=ys,r=kr(),i=t(),a=!Qr(r.memoizedState,i);if(a&&(r.memoizedState=i,Wn=!0),r=r.queue,Pb(YC.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Qs!==null&&Qs.memoizedState.tag&1){if(n.flags|=2048,Wu(9,ZC.bind(null,n,r,i,t),void 0,null),sn===null)throw Error(He(349));al&30||KC(n,t,i)}return i}function KC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ys.updateQueue,t===null?(t={lastEffect:null,stores:null},ys.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ZC(e,t,n,r){t.value=n,t.getSnapshot=r,XC(t)&&JC(e)}function YC(e,t,n){return n(function(){XC(t)&&JC(e)})}function XC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qr(e,n)}catch{return!0}}function JC(e){var t=oa(e,1);t!==null&&Zr(t,e,1,-1)}function jN(e){var t=fi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:e},t.queue=e,e=e.dispatch=hD.bind(null,ys,e),[t.memoizedState,e]}function Wu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ys.updateQueue,t===null?(t={lastEffect:null,stores:null},ys.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function QC(){return kr().memoizedState}function qf(e,t,n,r){var i=fi();ys.flags|=e,i.memoizedState=Wu(1|t,n,void 0,r===void 0?null:r)}function Sp(e,t,n,r){var i=kr();r=r===void 0?null:r;var a=void 0;if(Us!==null){var o=Us.memoizedState;if(a=o.destroy,r!==null&&Cb(r,o.deps)){i.memoizedState=Wu(t,n,a,r);return}}ys.flags|=e,i.memoizedState=Wu(1|t,n,a,r)}function NN(e,t){return qf(8390656,8,e,t)}function Pb(e,t){return Sp(2048,8,e,t)}function eE(e,t){return Sp(4,2,e,t)}function tE(e,t){return Sp(4,4,e,t)}function sE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nE(e,t,n){return n=n!=null?n.concat([e]):null,Sp(4,4,sE.bind(null,t,e),n)}function Ab(){}function rE(e,t){var n=kr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Cb(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function iE(e,t){var n=kr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Cb(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function aE(e,t,n){return al&21?(Qr(n,t)||(n=uC(),ys.lanes|=n,ol|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wn=!0),e.memoizedState=n)}function dD(e,t){var n=Qt;Qt=n!==0&&4>n?n:4,e(!0);var r=Ev.transition;Ev.transition={};try{e(!1),t()}finally{Qt=n,Ev.transition=r}}function oE(){return kr().memoizedState}function uD(e,t,n){var r=Ya(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lE(e))cE(t,n);else if(n=UC(e,t,n,r),n!==null){var i=Rn();Zr(n,e,r,i),dE(n,t,r)}}function hD(e,t,n){var r=Ya(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lE(e))cE(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,Qr(l,o)){var d=t.interleaved;d===null?(i.next=i,_b(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}n=UC(e,t,i,r),n!==null&&(i=Rn(),Zr(n,e,r,i),dE(n,t,r))}}function lE(e){var t=e.alternate;return e===ys||t!==null&&t===ys}function cE(e,t){gu=Cm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,lb(e,n)}}var Em={readContext:Sr,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},fD={readContext:Sr,useCallback:function(e,t){return fi().memoizedState=[e,t===void 0?null:t],e},useContext:Sr,useEffect:NN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qf(4194308,4,sE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qf(4194308,4,e,t)},useInsertionEffect:function(e,t){return qf(4,2,e,t)},useMemo:function(e,t){var n=fi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=uD.bind(null,ys,e),[r.memoizedState,e]},useRef:function(e){var t=fi();return e={current:e},t.memoizedState=e},useState:jN,useDebugValue:Ab,useDeferredValue:function(e){return fi().memoizedState=e},useTransition:function(){var e=jN(!1),t=e[0];return e=dD.bind(null,e[1]),fi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ys,i=fi();if(ms){if(n===void 0)throw Error(He(407));n=n()}else{if(n=t(),sn===null)throw Error(He(349));al&30||KC(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,NN(YC.bind(null,r,a,e),[e]),r.flags|=2048,Wu(9,ZC.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=fi(),t=sn.identifierPrefix;if(ms){var n=ta,r=ea;n=(r&~(1<<32-Kr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=cD++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mD={readContext:Sr,useCallback:rE,useContext:Sr,useEffect:Pb,useImperativeHandle:nE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:iE,useReducer:Tv,useRef:QC,useState:function(){return Tv(Hu)},useDebugValue:Ab,useDeferredValue:function(e){var t=kr();return aE(t,Us.memoizedState,e)},useTransition:function(){var e=Tv(Hu)[0],t=kr().memoizedState;return[e,t]},useMutableSource:WC,useSyncExternalStore:GC,useId:oE,unstable_isNewReconciler:!1},pD={readContext:Sr,useCallback:rE,useContext:Sr,useEffect:Pb,useImperativeHandle:nE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:iE,useReducer:Pv,useRef:QC,useState:function(){return Pv(Hu)},useDebugValue:Ab,useDeferredValue:function(e){var t=kr();return Us===null?t.memoizedState=e:aE(t,Us.memoizedState,e)},useTransition:function(){var e=Pv(Hu)[0],t=kr().memoizedState;return[e,t]},useMutableSource:WC,useSyncExternalStore:GC,useId:oE,unstable_isNewReconciler:!1};function Dr(e,t){if(e&&e.defaultProps){t=ws({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ny(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ws({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var kp={isMounted:function(e){return(e=e._reactInternals)?yl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Rn(),i=Ya(e),a=na(r,i);a.payload=t,n!=null&&(a.callback=n),t=Ka(e,a,i),t!==null&&(Zr(t,e,i,r),Vf(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Rn(),i=Ya(e),a=na(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Ka(e,a,i),t!==null&&(Zr(t,e,i,r),Vf(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rn(),r=Ya(e),i=na(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ka(e,i,r),t!==null&&(Zr(t,e,r,n),Vf(t,e,r))}};function SN(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Fu(n,r)||!Fu(i,a):!0}function uE(e,t,n){var r=!1,i=to,a=t.contextType;return typeof a=="object"&&a!==null?a=Sr(a):(i=Xn(t)?rl:wn.current,r=t.contextTypes,a=(r=r!=null)?Oc(e,i):to),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=kp,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function kN(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&kp.enqueueReplaceState(t,t.state,null)}function ry(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},jb(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Sr(a):(a=Xn(t)?rl:wn.current,i.context=Oc(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ny(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&kp.enqueueReplaceState(i,i.state,null),Sm(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Mc(e,t){try{var n="",r=t;do n+=U5(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Av(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function iy(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gD=typeof WeakMap=="function"?WeakMap:Map;function hE(e,t,n){n=na(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Pm||(Pm=!0,py=r),iy(e,t)},n}function fE(e,t,n){n=na(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){iy(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){iy(e,t),typeof r!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function CN(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gD;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=PD.bind(null,e,t,n),t.then(e,e))}function EN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function TN(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=na(-1,1),t.tag=2,Ka(n,t,1))),n.lanes|=1),e)}var vD=va.ReactCurrentOwner,Wn=!1;function kn(e,t,n,r){t.child=e===null?VC(t,null,n,r):Lc(t,e.child,n,r)}function PN(e,t,n,r,i){n=n.render;var a=t.ref;return cc(t,i),r=Eb(e,t,n,r,a,i),n=Tb(),e!==null&&!Wn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,la(e,t,i)):(ms&&n&&gb(t),t.flags|=1,kn(e,t,r,i),t.child)}function AN(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!$b(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,mE(e,t,a,r,i)):(e=Kf(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Fu,n(o,r)&&e.ref===t.ref)return la(e,t,i)}return t.flags|=1,e=Xa(a,r),e.ref=t.ref,e.return=t,t.child=e}function mE(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Fu(a,r)&&e.ref===t.ref)if(Wn=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Wn=!0);else return t.lanes=e.lanes,la(e,t,i)}return ay(e,t,n,r,i)}function pE(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},as(Jl,tr),tr|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,as(Jl,tr),tr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,as(Jl,tr),tr|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,as(Jl,tr),tr|=r;return kn(e,t,i,n),t.child}function gE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ay(e,t,n,r,i){var a=Xn(n)?rl:wn.current;return a=Oc(t,a),cc(t,i),n=Eb(e,t,n,r,a,i),r=Tb(),e!==null&&!Wn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,la(e,t,i)):(ms&&r&&gb(t),t.flags|=1,kn(e,t,n,i),t.child)}function ON(e,t,n,r,i){if(Xn(n)){var a=!0;bm(t)}else a=!1;if(cc(t,i),t.stateNode===null)Hf(e,t),uE(t,n,r),ry(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var d=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Sr(h):(h=Xn(n)?rl:wn.current,h=Oc(t,h));var f=n.getDerivedStateFromProps,u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||d!==h)&&kN(t,o,r,h),Aa=!1;var m=t.memoizedState;o.state=m,Sm(t,r,o,i),d=t.memoizedState,l!==r||m!==d||Yn.current||Aa?(typeof f=="function"&&(ny(t,n,f,r),d=t.memoizedState),(l=Aa||SN(t,n,l,r,m,d,h))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,qC(e,t),l=t.memoizedProps,h=t.type===t.elementType?l:Dr(t.type,l),o.props=h,u=t.pendingProps,m=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=Sr(d):(d=Xn(n)?rl:wn.current,d=Oc(t,d));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||m!==d)&&kN(t,o,r,d),Aa=!1,m=t.memoizedState,o.state=m,Sm(t,r,o,i);var w=t.memoizedState;l!==u||m!==w||Yn.current||Aa?(typeof p=="function"&&(ny(t,n,p,r),w=t.memoizedState),(h=Aa||SN(t,n,h,r,m,w,d)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=d,r=h):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return oy(e,t,n,r,a,i)}function oy(e,t,n,r,i,a){gE(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&vN(t,n,!1),la(e,t,a);r=t.stateNode,vD.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Lc(t,e.child,null,a),t.child=Lc(t,null,l,a)):kn(e,t,l,a),t.memoizedState=r.state,i&&vN(t,n,!0),t.child}function vE(e){var t=e.stateNode;t.pendingContext?gN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gN(e,t.context,!1),Nb(e,t.containerInfo)}function RN(e,t,n,r,i){return Rc(),xb(i),t.flags|=256,kn(e,t,n,r),t.child}var ly={dehydrated:null,treeContext:null,retryLane:0};function cy(e){return{baseLanes:e,cachePool:null,transitions:null}}function xE(e,t,n){var r=t.pendingProps,i=vs.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),as(vs,i&1),e===null)return ty(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Tp(o,r,0,null),e=Zo(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=cy(n),t.memoizedState=ly,e):Ob(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return xD(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Xa(i,d),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Xa(l,a):(a=Zo(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?cy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=ly,r}return a=e.child,e=a.sibling,r=Xa(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ob(e,t){return t=Tp({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xf(e,t,n,r){return r!==null&&xb(r),Lc(t,e.child,null,n),e=Ob(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xD(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=Av(Error(He(422))),xf(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Tp({mode:"visible",children:r.children},i,0,null),a=Zo(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Lc(t,e.child,null,o),t.child.memoizedState=cy(o),t.memoizedState=ly,a);if(!(t.mode&1))return xf(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(He(419)),r=Av(a,r,void 0),xf(e,t,o,r)}if(l=(o&e.childLanes)!==0,Wn||l){if(r=sn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,oa(e,i),Zr(r,e,i,-1))}return Fb(),r=Av(Error(He(421))),xf(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=AD.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ir=Ga(i.nextSibling),ar=t,ms=!0,Vr=null,e!==null&&(yr[br++]=ea,yr[br++]=ta,yr[br++]=il,ea=e.id,ta=e.overflow,il=t),t=Ob(t,r.children),t.flags|=4096,t)}function LN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),sy(e.return,t,n)}function Ov(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function yE(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(kn(e,t,r.children,n),r=vs.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&LN(e,n,t);else if(e.tag===19)LN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(as(vs,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&km(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ov(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&km(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ov(t,!0,n,null,a);break;case"together":Ov(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function la(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ol|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(He(153));if(t.child!==null){for(e=t.child,n=Xa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Xa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yD(e,t,n){switch(t.tag){case 3:vE(t),Rc();break;case 5:HC(t);break;case 1:Xn(t.type)&&bm(t);break;case 4:Nb(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;as(jm,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(as(vs,vs.current&1),t.flags|=128,null):n&t.child.childLanes?xE(e,t,n):(as(vs,vs.current&1),e=la(e,t,n),e!==null?e.sibling:null);as(vs,vs.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return yE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),as(vs,vs.current),r)break;return null;case 22:case 23:return t.lanes=0,pE(e,t,n)}return la(e,t,n)}var bE,dy,wE,_E;bE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dy=function(){};wE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Do(Ni.current);var a=null;switch(n){case"input":i=Ox(e,i),r=Ox(e,r),a=[];break;case"select":i=ws({},i,{value:void 0}),r=ws({},r,{value:void 0}),a=[];break;case"textarea":i=Ix(e,i),r=Ix(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=xm)}Dx(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Au.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var d=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&d!==l&&(d!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(a||(a=[]),a.push(h,n)),n=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(a=a||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Au.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&ls("scroll",e),a||l===d||(a=[])):(a=a||[]).push(h,d))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}};_E=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ud(e,t){if(!ms)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bD(e,t,n){var r=t.pendingProps;switch(vb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(t),null;case 1:return Xn(t.type)&&ym(),pn(t),null;case 3:return r=t.stateNode,Ic(),hs(Yn),hs(wn),kb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(gf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vr!==null&&(xy(Vr),Vr=null))),dy(e,t),pn(t),null;case 5:Sb(t);var i=Do(Uu.current);if(n=t.type,e!==null&&t.stateNode!=null)wE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(He(166));return pn(t),null}if(e=Do(Ni.current),gf(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[vi]=t,r[zu]=a,e=(t.mode&1)!==0,n){case"dialog":ls("cancel",r),ls("close",r);break;case"iframe":case"object":case"embed":ls("load",r);break;case"video":case"audio":for(i=0;i<au.length;i++)ls(au[i],r);break;case"source":ls("error",r);break;case"img":case"image":case"link":ls("error",r),ls("load",r);break;case"details":ls("toggle",r);break;case"input":Uj(r,a),ls("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ls("invalid",r);break;case"textarea":Hj(r,a),ls("invalid",r)}Dx(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&pf(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&pf(r.textContent,l,e),i=["children",""+l]):Au.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ls("scroll",r)}switch(n){case"input":of(r),qj(r,a,!0);break;case"textarea":of(r),Wj(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=xm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Y2(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[vi]=t,e[zu]=r,bE(e,t,!1,!1),t.stateNode=e;e:{switch(o=Fx(n,r),n){case"dialog":ls("cancel",e),ls("close",e),i=r;break;case"iframe":case"object":case"embed":ls("load",e),i=r;break;case"video":case"audio":for(i=0;i<au.length;i++)ls(au[i],e);i=r;break;case"source":ls("error",e),i=r;break;case"img":case"image":case"link":ls("error",e),ls("load",e),i=r;break;case"details":ls("toggle",e),i=r;break;case"input":Uj(e,r),i=Ox(e,r),ls("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ws({},r,{value:void 0}),ls("invalid",e);break;case"textarea":Hj(e,r),i=Ix(e,r),ls("invalid",e);break;default:i=r}Dx(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var d=l[a];a==="style"?Q2(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&X2(e,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ou(e,d):typeof d=="number"&&Ou(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Au.hasOwnProperty(a)?d!=null&&a==="onScroll"&&ls("scroll",e):d!=null&&sb(e,a,d,o))}switch(n){case"input":of(e),qj(e,r,!1);break;case"textarea":of(e),Wj(e);break;case"option":r.value!=null&&e.setAttribute("value",""+eo(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?ic(e,!!r.multiple,a,!1):r.defaultValue!=null&&ic(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=xm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pn(t),null;case 6:if(e&&t.stateNode!=null)_E(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(He(166));if(n=Do(Uu.current),Do(Ni.current),gf(t)){if(r=t.stateNode,n=t.memoizedProps,r[vi]=t,(a=r.nodeValue!==n)&&(e=ar,e!==null))switch(e.tag){case 3:pf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pf(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vi]=t,t.stateNode=r}return pn(t),null;case 13:if(hs(vs),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ms&&ir!==null&&t.mode&1&&!(t.flags&128))BC(),Rc(),t.flags|=98560,a=!1;else if(a=gf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(He(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(He(317));a[vi]=t}else Rc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pn(t),a=!1}else Vr!==null&&(xy(Vr),Vr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||vs.current&1?qs===0&&(qs=3):Fb())),t.updateQueue!==null&&(t.flags|=4),pn(t),null);case 4:return Ic(),dy(e,t),e===null&&$u(t.stateNode.containerInfo),pn(t),null;case 10:return wb(t.type._context),pn(t),null;case 17:return Xn(t.type)&&ym(),pn(t),null;case 19:if(hs(vs),a=t.memoizedState,a===null)return pn(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)Ud(a,!1);else{if(qs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=km(e),o!==null){for(t.flags|=128,Ud(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return as(vs,vs.current&1|2),t.child}e=e.sibling}a.tail!==null&&Os()>Dc&&(t.flags|=128,r=!0,Ud(a,!1),t.lanes=4194304)}else{if(!r)if(e=km(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ud(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ms)return pn(t),null}else 2*Os()-a.renderingStartTime>Dc&&n!==1073741824&&(t.flags|=128,r=!0,Ud(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Os(),t.sibling=null,n=vs.current,as(vs,r?n&1|2:n&1),t):(pn(t),null);case 22:case 23:return Db(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?tr&1073741824&&(pn(t),t.subtreeFlags&6&&(t.flags|=8192)):pn(t),null;case 24:return null;case 25:return null}throw Error(He(156,t.tag))}function wD(e,t){switch(vb(t),t.tag){case 1:return Xn(t.type)&&ym(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ic(),hs(Yn),hs(wn),kb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sb(t),null;case 13:if(hs(vs),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(He(340));Rc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hs(vs),null;case 4:return Ic(),null;case 10:return wb(t.type._context),null;case 22:case 23:return Db(),null;case 24:return null;default:return null}}var yf=!1,vn=!1,_D=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Xl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ss(e,t,r)}else n.current=null}function uy(e,t,n){try{n()}catch(r){Ss(e,t,r)}}var IN=!1;function jD(e,t){if(Kx=pm,e=CC(),pb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,d=-1,h=0,f=0,u=e,m=null;t:for(;;){for(var p;u!==n||i!==0&&u.nodeType!==3||(l=o+i),u!==a||r!==0&&u.nodeType!==3||(d=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(p=u.firstChild)!==null;)m=u,u=p;for(;;){if(u===e)break t;if(m===n&&++h===i&&(l=o),m===a&&++f===r&&(d=o),(p=u.nextSibling)!==null)break;u=m,m=u.parentNode}u=p}n=l===-1||d===-1?null:{start:l,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zx={focusedElem:e,selectionRange:n},pm=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){t=ot;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,b=w.memoizedState,g=t.stateNode,x=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Dr(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(He(163))}}catch(N){Ss(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}return w=IN,IN=!1,w}function vu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&uy(t,n,a)}i=i.next}while(i!==r)}}function Cp(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hy(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jE(e){var t=e.alternate;t!==null&&(e.alternate=null,jE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vi],delete t[zu],delete t[Jx],delete t[iD],delete t[aD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NE(e){return e.tag===5||e.tag===3||e.tag===4}function MN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=xm));else if(r!==4&&(e=e.child,e!==null))for(fy(e,t,n),e=e.sibling;e!==null;)fy(e,t,n),e=e.sibling}function my(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(my(e,t,n),e=e.sibling;e!==null;)my(e,t,n),e=e.sibling}var on=null,zr=!1;function ja(e,t,n){for(n=n.child;n!==null;)SE(e,t,n),n=n.sibling}function SE(e,t,n){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(yp,n)}catch{}switch(n.tag){case 5:vn||Xl(n,t);case 6:var r=on,i=zr;on=null,ja(e,t,n),on=r,zr=i,on!==null&&(zr?(e=on,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):on.removeChild(n.stateNode));break;case 18:on!==null&&(zr?(e=on,n=n.stateNode,e.nodeType===8?Sv(e.parentNode,n):e.nodeType===1&&Sv(e,n),Mu(e)):Sv(on,n.stateNode));break;case 4:r=on,i=zr,on=n.stateNode.containerInfo,zr=!0,ja(e,t,n),on=r,zr=i;break;case 0:case 11:case 14:case 15:if(!vn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&uy(n,t,o),i=i.next}while(i!==r)}ja(e,t,n);break;case 1:if(!vn&&(Xl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ss(n,t,l)}ja(e,t,n);break;case 21:ja(e,t,n);break;case 22:n.mode&1?(vn=(r=vn)||n.memoizedState!==null,ja(e,t,n),vn=r):ja(e,t,n);break;default:ja(e,t,n)}}function DN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new _D),t.forEach(function(r){var i=OD.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Or(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:on=l.stateNode,zr=!1;break e;case 3:on=l.stateNode.containerInfo,zr=!0;break e;case 4:on=l.stateNode.containerInfo,zr=!0;break e}l=l.return}if(on===null)throw Error(He(160));SE(a,o,i),on=null,zr=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){Ss(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kE(t,e),t=t.sibling}function kE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Or(t,e),di(e),r&4){try{vu(3,e,e.return),Cp(3,e)}catch(y){Ss(e,e.return,y)}try{vu(5,e,e.return)}catch(y){Ss(e,e.return,y)}}break;case 1:Or(t,e),di(e),r&512&&n!==null&&Xl(n,n.return);break;case 5:if(Or(t,e),di(e),r&512&&n!==null&&Xl(n,n.return),e.flags&32){var i=e.stateNode;try{Ou(i,"")}catch(y){Ss(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&K2(i,a),Fx(l,o);var h=Fx(l,a);for(o=0;o<d.length;o+=2){var f=d[o],u=d[o+1];f==="style"?Q2(i,u):f==="dangerouslySetInnerHTML"?X2(i,u):f==="children"?Ou(i,u):sb(i,f,u,h)}switch(l){case"input":Rx(i,a);break;case"textarea":Z2(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?ic(i,!!a.multiple,p,!1):m!==!!a.multiple&&(a.defaultValue!=null?ic(i,!!a.multiple,a.defaultValue,!0):ic(i,!!a.multiple,a.multiple?[]:"",!1))}i[zu]=a}catch(y){Ss(e,e.return,y)}}break;case 6:if(Or(t,e),di(e),r&4){if(e.stateNode===null)throw Error(He(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(y){Ss(e,e.return,y)}}break;case 3:if(Or(t,e),di(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mu(t.containerInfo)}catch(y){Ss(e,e.return,y)}break;case 4:Or(t,e),di(e);break;case 13:Or(t,e),di(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Ib=Os())),r&4&&DN(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(vn=(h=vn)||f,Or(t,e),vn=h):Or(t,e),di(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!f&&e.mode&1)for(ot=e,f=e.child;f!==null;){for(u=ot=f;ot!==null;){switch(m=ot,p=m.child,m.tag){case 0:case 11:case 14:case 15:vu(4,m,m.return);break;case 1:Xl(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){Ss(r,n,y)}}break;case 5:Xl(m,m.return);break;case 22:if(m.memoizedState!==null){$N(u);continue}}p!==null?(p.return=m,ot=p):$N(u)}f=f.sibling}e:for(f=null,u=e;;){if(u.tag===5){if(f===null){f=u;try{i=u.stateNode,h?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=u.stateNode,d=u.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=J2("display",o))}catch(y){Ss(e,e.return,y)}}}else if(u.tag===6){if(f===null)try{u.stateNode.nodeValue=h?"":u.memoizedProps}catch(y){Ss(e,e.return,y)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Or(t,e),di(e),r&4&&DN(e);break;case 21:break;default:Or(t,e),di(e)}}function di(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(NE(n)){var r=n;break e}n=n.return}throw Error(He(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ou(i,""),r.flags&=-33);var a=MN(e);my(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=MN(e);fy(e,l,o);break;default:throw Error(He(161))}}catch(d){Ss(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ND(e,t,n){ot=e,CE(e)}function CE(e,t,n){for(var r=(e.mode&1)!==0;ot!==null;){var i=ot,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||yf;if(!o){var l=i.alternate,d=l!==null&&l.memoizedState!==null||vn;l=yf;var h=vn;if(yf=o,(vn=d)&&!h)for(ot=i;ot!==null;)o=ot,d=o.child,o.tag===22&&o.memoizedState!==null?BN(i):d!==null?(d.return=o,ot=d):BN(i);for(;a!==null;)ot=a,CE(a),a=a.sibling;ot=i,yf=l,vn=h}FN(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ot=a):FN(e)}}function FN(e){for(;ot!==null;){var t=ot;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vn||Cp(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!vn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Dr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&_N(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_N(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var u=f.dehydrated;u!==null&&Mu(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(He(163))}vn||t.flags&512&&hy(t)}catch(m){Ss(t,t.return,m)}}if(t===e){ot=null;break}if(n=t.sibling,n!==null){n.return=t.return,ot=n;break}ot=t.return}}function $N(e){for(;ot!==null;){var t=ot;if(t===e){ot=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ot=n;break}ot=t.return}}function BN(e){for(;ot!==null;){var t=ot;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Cp(4,t)}catch(d){Ss(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){Ss(t,i,d)}}var a=t.return;try{hy(t)}catch(d){Ss(t,a,d)}break;case 5:var o=t.return;try{hy(t)}catch(d){Ss(t,o,d)}}}catch(d){Ss(t,t.return,d)}if(t===e){ot=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ot=l;break}ot=t.return}}var SD=Math.ceil,Tm=va.ReactCurrentDispatcher,Rb=va.ReactCurrentOwner,_r=va.ReactCurrentBatchConfig,Ft=0,sn=null,Bs=null,dn=0,tr=0,Jl=uo(0),qs=0,Gu=null,ol=0,Ep=0,Lb=0,xu=null,Hn=null,Ib=0,Dc=1/0,Yi=null,Pm=!1,py=null,Za=null,bf=!1,za=null,Am=0,yu=0,gy=null,Wf=-1,Gf=0;function Rn(){return Ft&6?Os():Wf!==-1?Wf:Wf=Os()}function Ya(e){return e.mode&1?Ft&2&&dn!==0?dn&-dn:lD.transition!==null?(Gf===0&&(Gf=uC()),Gf):(e=Qt,e!==0||(e=window.event,e=e===void 0?16:xC(e.type)),e):1}function Zr(e,t,n,r){if(50<yu)throw yu=0,gy=null,Error(He(185));xh(e,n,r),(!(Ft&2)||e!==sn)&&(e===sn&&(!(Ft&2)&&(Ep|=n),qs===4&&La(e,dn)),Jn(e,r),n===1&&Ft===0&&!(t.mode&1)&&(Dc=Os()+500,Np&&ho()))}function Jn(e,t){var n=e.callbackNode;l3(e,t);var r=mm(e,e===sn?dn:0);if(r===0)n!==null&&Zj(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Zj(n),t===1)e.tag===0?oD(zN.bind(null,e)):DC(zN.bind(null,e)),nD(function(){!(Ft&6)&&ho()}),n=null;else{switch(hC(r)){case 1:n=ob;break;case 4:n=cC;break;case 16:n=fm;break;case 536870912:n=dC;break;default:n=fm}n=IE(n,EE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function EE(e,t){if(Wf=-1,Gf=0,Ft&6)throw Error(He(327));var n=e.callbackNode;if(dc()&&e.callbackNode!==n)return null;var r=mm(e,e===sn?dn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Om(e,r);else{t=r;var i=Ft;Ft|=2;var a=PE();(sn!==e||dn!==t)&&(Yi=null,Dc=Os()+500,Ko(e,t));do try{ED();break}catch(l){TE(e,l)}while(!0);bb(),Tm.current=a,Ft=i,Bs!==null?t=0:(sn=null,dn=0,t=qs)}if(t!==0){if(t===2&&(i=Ux(e),i!==0&&(r=i,t=vy(e,i))),t===1)throw n=Gu,Ko(e,0),La(e,r),Jn(e,Os()),n;if(t===6)La(e,r);else{if(i=e.current.alternate,!(r&30)&&!kD(i)&&(t=Om(e,r),t===2&&(a=Ux(e),a!==0&&(r=a,t=vy(e,a))),t===1))throw n=Gu,Ko(e,0),La(e,r),Jn(e,Os()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(He(345));case 2:Eo(e,Hn,Yi);break;case 3:if(La(e,r),(r&130023424)===r&&(t=Ib+500-Os(),10<t)){if(mm(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Rn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Xx(Eo.bind(null,e,Hn,Yi),t);break}Eo(e,Hn,Yi);break;case 4:if(La(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Kr(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=Os()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*SD(r/1960))-r,10<r){e.timeoutHandle=Xx(Eo.bind(null,e,Hn,Yi),r);break}Eo(e,Hn,Yi);break;case 5:Eo(e,Hn,Yi);break;default:throw Error(He(329))}}}return Jn(e,Os()),e.callbackNode===n?EE.bind(null,e):null}function vy(e,t){var n=xu;return e.current.memoizedState.isDehydrated&&(Ko(e,t).flags|=256),e=Om(e,t),e!==2&&(t=Hn,Hn=n,t!==null&&xy(t)),e}function xy(e){Hn===null?Hn=e:Hn.push.apply(Hn,e)}function kD(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Qr(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t){for(t&=~Lb,t&=~Ep,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kr(t),r=1<<n;e[n]=-1,t&=~r}}function zN(e){if(Ft&6)throw Error(He(327));dc();var t=mm(e,0);if(!(t&1))return Jn(e,Os()),null;var n=Om(e,t);if(e.tag!==0&&n===2){var r=Ux(e);r!==0&&(t=r,n=vy(e,r))}if(n===1)throw n=Gu,Ko(e,0),La(e,t),Jn(e,Os()),n;if(n===6)throw Error(He(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eo(e,Hn,Yi),Jn(e,Os()),null}function Mb(e,t){var n=Ft;Ft|=1;try{return e(t)}finally{Ft=n,Ft===0&&(Dc=Os()+500,Np&&ho())}}function ll(e){za!==null&&za.tag===0&&!(Ft&6)&&dc();var t=Ft;Ft|=1;var n=_r.transition,r=Qt;try{if(_r.transition=null,Qt=1,e)return e()}finally{Qt=r,_r.transition=n,Ft=t,!(Ft&6)&&ho()}}function Db(){tr=Jl.current,hs(Jl)}function Ko(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sD(n)),Bs!==null)for(n=Bs.return;n!==null;){var r=n;switch(vb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ym();break;case 3:Ic(),hs(Yn),hs(wn),kb();break;case 5:Sb(r);break;case 4:Ic();break;case 13:hs(vs);break;case 19:hs(vs);break;case 10:wb(r.type._context);break;case 22:case 23:Db()}n=n.return}if(sn=e,Bs=e=Xa(e.current,null),dn=tr=t,qs=0,Gu=null,Lb=Ep=ol=0,Hn=xu=null,Mo!==null){for(t=0;t<Mo.length;t++)if(n=Mo[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Mo=null}return e}function TE(e,t){do{var n=Bs;try{if(bb(),Uf.current=Em,Cm){for(var r=ys.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Cm=!1}if(al=0,Qs=Us=ys=null,gu=!1,qu=0,Rb.current=null,n===null||n.return===null){qs=1,Gu=t,Bs=null;break}e:{var a=e,o=n.return,l=n,d=t;if(t=dn,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,f=l,u=f.tag;if(!(f.mode&1)&&(u===0||u===11||u===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=EN(o);if(p!==null){p.flags&=-257,TN(p,o,l,a,t),p.mode&1&&CN(a,h,t),t=p,d=h;var w=t.updateQueue;if(w===null){var y=new Set;y.add(d),t.updateQueue=y}else w.add(d);break e}else{if(!(t&1)){CN(a,h,t),Fb();break e}d=Error(He(426))}}else if(ms&&l.mode&1){var b=EN(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),TN(b,o,l,a,t),xb(Mc(d,l));break e}}a=d=Mc(d,l),qs!==4&&(qs=2),xu===null?xu=[a]:xu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=hE(a,d,t);wN(a,g);break e;case 1:l=d;var x=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Za===null||!Za.has(j)))){a.flags|=65536,t&=-t,a.lanes|=t;var N=fE(a,l,t);wN(a,N);break e}}a=a.return}while(a!==null)}OE(n)}catch(S){t=S,Bs===n&&n!==null&&(Bs=n=n.return);continue}break}while(!0)}function PE(){var e=Tm.current;return Tm.current=Em,e===null?Em:e}function Fb(){(qs===0||qs===3||qs===2)&&(qs=4),sn===null||!(ol&268435455)&&!(Ep&268435455)||La(sn,dn)}function Om(e,t){var n=Ft;Ft|=2;var r=PE();(sn!==e||dn!==t)&&(Yi=null,Ko(e,t));do try{CD();break}catch(i){TE(e,i)}while(!0);if(bb(),Ft=n,Tm.current=r,Bs!==null)throw Error(He(261));return sn=null,dn=0,qs}function CD(){for(;Bs!==null;)AE(Bs)}function ED(){for(;Bs!==null&&!Q5();)AE(Bs)}function AE(e){var t=LE(e.alternate,e,tr);e.memoizedProps=e.pendingProps,t===null?OE(e):Bs=t,Rb.current=null}function OE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=wD(n,t),n!==null){n.flags&=32767,Bs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qs=6,Bs=null;return}}else if(n=bD(n,t,tr),n!==null){Bs=n;return}if(t=t.sibling,t!==null){Bs=t;return}Bs=t=e}while(t!==null);qs===0&&(qs=5)}function Eo(e,t,n){var r=Qt,i=_r.transition;try{_r.transition=null,Qt=1,TD(e,t,n,r)}finally{_r.transition=i,Qt=r}return null}function TD(e,t,n,r){do dc();while(za!==null);if(Ft&6)throw Error(He(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(He(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(c3(e,a),e===sn&&(Bs=sn=null,dn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bf||(bf=!0,IE(fm,function(){return dc(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=_r.transition,_r.transition=null;var o=Qt;Qt=1;var l=Ft;Ft|=4,Rb.current=null,jD(e,n),kE(n,e),Z3(Zx),pm=!!Kx,Zx=Kx=null,e.current=n,ND(n),e3(),Ft=l,Qt=o,_r.transition=a}else e.current=n;if(bf&&(bf=!1,za=e,Am=i),a=e.pendingLanes,a===0&&(Za=null),n3(n.stateNode),Jn(e,Os()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Pm)throw Pm=!1,e=py,py=null,e;return Am&1&&e.tag!==0&&dc(),a=e.pendingLanes,a&1?e===gy?yu++:(yu=0,gy=e):yu=0,ho(),null}function dc(){if(za!==null){var e=hC(Am),t=_r.transition,n=Qt;try{if(_r.transition=null,Qt=16>e?16:e,za===null)var r=!1;else{if(e=za,za=null,Am=0,Ft&6)throw Error(He(331));var i=Ft;for(Ft|=4,ot=e.current;ot!==null;){var a=ot,o=a.child;if(ot.flags&16){var l=a.deletions;if(l!==null){for(var d=0;d<l.length;d++){var h=l[d];for(ot=h;ot!==null;){var f=ot;switch(f.tag){case 0:case 11:case 15:vu(8,f,a)}var u=f.child;if(u!==null)u.return=f,ot=u;else for(;ot!==null;){f=ot;var m=f.sibling,p=f.return;if(jE(f),f===h){ot=null;break}if(m!==null){m.return=p,ot=m;break}ot=p}}}var w=a.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}ot=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ot=o;else e:for(;ot!==null;){if(a=ot,a.flags&2048)switch(a.tag){case 0:case 11:case 15:vu(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,ot=g;break e}ot=a.return}}var x=e.current;for(ot=x;ot!==null;){o=ot;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,ot=j;else e:for(o=x;ot!==null;){if(l=ot,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cp(9,l)}}catch(S){Ss(l,l.return,S)}if(l===o){ot=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,ot=N;break e}ot=l.return}}if(Ft=i,ho(),ji&&typeof ji.onPostCommitFiberRoot=="function")try{ji.onPostCommitFiberRoot(yp,e)}catch{}r=!0}return r}finally{Qt=n,_r.transition=t}}return!1}function VN(e,t,n){t=Mc(n,t),t=hE(e,t,1),e=Ka(e,t,1),t=Rn(),e!==null&&(xh(e,1,t),Jn(e,t))}function Ss(e,t,n){if(e.tag===3)VN(e,e,n);else for(;t!==null;){if(t.tag===3){VN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Za===null||!Za.has(r))){e=Mc(n,e),e=fE(t,e,1),t=Ka(t,e,1),e=Rn(),t!==null&&(xh(t,1,e),Jn(t,e));break}}t=t.return}}function PD(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Rn(),e.pingedLanes|=e.suspendedLanes&n,sn===e&&(dn&n)===n&&(qs===4||qs===3&&(dn&130023424)===dn&&500>Os()-Ib?Ko(e,0):Lb|=n),Jn(e,t)}function RE(e,t){t===0&&(e.mode&1?(t=df,df<<=1,!(df&130023424)&&(df=4194304)):t=1);var n=Rn();e=oa(e,t),e!==null&&(xh(e,t,n),Jn(e,n))}function AD(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),RE(e,n)}function OD(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(He(314))}r!==null&&r.delete(t),RE(e,n)}var LE;LE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yn.current)Wn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Wn=!1,yD(e,t,n);Wn=!!(e.flags&131072)}else Wn=!1,ms&&t.flags&1048576&&FC(t,_m,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hf(e,t),e=t.pendingProps;var i=Oc(t,wn.current);cc(t,n),i=Eb(null,t,r,e,i,n);var a=Tb();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xn(r)?(a=!0,bm(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jb(t),i.updater=kp,t.stateNode=i,i._reactInternals=t,ry(t,r,e,n),t=oy(null,t,r,!0,a,n)):(t.tag=0,ms&&a&&gb(t),kn(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hf(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=LD(r),e=Dr(r,e),i){case 0:t=ay(null,t,r,e,n);break e;case 1:t=ON(null,t,r,e,n);break e;case 11:t=PN(null,t,r,e,n);break e;case 14:t=AN(null,t,r,Dr(r.type,e),n);break e}throw Error(He(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dr(r,i),ay(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dr(r,i),ON(e,t,r,i,n);case 3:e:{if(vE(t),e===null)throw Error(He(387));r=t.pendingProps,a=t.memoizedState,i=a.element,qC(e,t),Sm(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Mc(Error(He(423)),t),t=RN(e,t,r,n,i);break e}else if(r!==i){i=Mc(Error(He(424)),t),t=RN(e,t,r,n,i);break e}else for(ir=Ga(t.stateNode.containerInfo.firstChild),ar=t,ms=!0,Vr=null,n=VC(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rc(),r===i){t=la(e,t,n);break e}kn(e,t,r,n)}t=t.child}return t;case 5:return HC(t),e===null&&ty(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,Yx(r,i)?o=null:a!==null&&Yx(r,a)&&(t.flags|=32),gE(e,t),kn(e,t,o,n),t.child;case 6:return e===null&&ty(t),null;case 13:return xE(e,t,n);case 4:return Nb(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Lc(t,null,r,n):kn(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dr(r,i),PN(e,t,r,i,n);case 7:return kn(e,t,t.pendingProps,n),t.child;case 8:return kn(e,t,t.pendingProps.children,n),t.child;case 12:return kn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,as(jm,r._currentValue),r._currentValue=o,a!==null)if(Qr(a.value,o)){if(a.children===i.children&&!Yn.current){t=la(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var d=l.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=na(-1,n&-n),d.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?d.next=d:(d.next=f.next,f.next=d),h.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),sy(a.return,n,t),l.lanes|=n;break}d=d.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(He(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),sy(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}kn(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cc(t,n),i=Sr(i),r=r(i),t.flags|=1,kn(e,t,r,n),t.child;case 14:return r=t.type,i=Dr(r,t.pendingProps),i=Dr(r.type,i),AN(e,t,r,i,n);case 15:return mE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Dr(r,i),Hf(e,t),t.tag=1,Xn(r)?(e=!0,bm(t)):e=!1,cc(t,n),uE(t,r,i),ry(t,r,i,n),oy(null,t,r,!0,e,n);case 19:return yE(e,t,n);case 22:return pE(e,t,n)}throw Error(He(156,t.tag))};function IE(e,t){return lC(e,t)}function RD(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(e,t,n,r){return new RD(e,t,n,r)}function $b(e){return e=e.prototype,!(!e||!e.isReactComponent)}function LD(e){if(typeof e=="function")return $b(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rb)return 11;if(e===ib)return 14}return 2}function Xa(e,t){var n=e.alternate;return n===null?(n=wr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kf(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")$b(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Vl:return Zo(n.children,i,a,t);case nb:o=8,i|=8;break;case Ex:return e=wr(12,n,t,i|2),e.elementType=Ex,e.lanes=a,e;case Tx:return e=wr(13,n,t,i),e.elementType=Tx,e.lanes=a,e;case Px:return e=wr(19,n,t,i),e.elementType=Px,e.lanes=a,e;case H2:return Tp(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U2:o=10;break e;case q2:o=9;break e;case rb:o=11;break e;case ib:o=14;break e;case Pa:o=16,r=null;break e}throw Error(He(130,e==null?e:typeof e,""))}return t=wr(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Zo(e,t,n,r){return e=wr(7,e,r,t),e.lanes=n,e}function Tp(e,t,n,r){return e=wr(22,e,r,t),e.elementType=H2,e.lanes=n,e.stateNode={isHidden:!1},e}function Rv(e,t,n){return e=wr(6,e,null,t),e.lanes=n,e}function Lv(e,t,n){return t=wr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ID(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mv(0),this.expirationTimes=mv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bb(e,t,n,r,i,a,o,l,d){return e=new ID(e,t,n,l,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=wr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jb(a),e}function MD(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ME(e){if(!e)return to;e=e._reactInternals;e:{if(yl(e)!==e||e.tag!==1)throw Error(He(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(He(171))}if(e.tag===1){var n=e.type;if(Xn(n))return MC(e,n,t)}return t}function DE(e,t,n,r,i,a,o,l,d){return e=Bb(n,r,!0,e,i,a,o,l,d),e.context=ME(null),n=e.current,r=Rn(),i=Ya(n),a=na(r,i),a.callback=t??null,Ka(n,a,i),e.current.lanes=i,xh(e,i,r),Jn(e,r),e}function Pp(e,t,n,r){var i=t.current,a=Rn(),o=Ya(i);return n=ME(n),t.context===null?t.context=n:t.pendingContext=n,t=na(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ka(i,t,o),e!==null&&(Zr(e,i,o,a),Vf(e,i,o)),o}function Rm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function UN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zb(e,t){UN(e,t),(e=e.alternate)&&UN(e,t)}function DD(){return null}var FE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vb(e){this._internalRoot=e}Ap.prototype.render=Vb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(He(409));Pp(e,t,null,null)};Ap.prototype.unmount=Vb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ll(function(){Pp(null,e,null,null)}),t[aa]=null}};function Ap(e){this._internalRoot=e}Ap.prototype.unstable_scheduleHydration=function(e){if(e){var t=pC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ra.length&&t!==0&&t<Ra[n].priority;n++);Ra.splice(n,0,e),n===0&&vC(e)}};function Ub(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Op(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qN(){}function FD(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var h=Rm(o);a.call(h)}}var o=DE(t,r,e,0,null,!1,!1,"",qN);return e._reactRootContainer=o,e[aa]=o.current,$u(e.nodeType===8?e.parentNode:e),ll(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Rm(d);l.call(h)}}var d=Bb(e,0,!1,null,null,!1,!1,"",qN);return e._reactRootContainer=d,e[aa]=d.current,$u(e.nodeType===8?e.parentNode:e),ll(function(){Pp(t,d,n,r)}),d}function Rp(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var d=Rm(o);l.call(d)}}Pp(t,o,e,i)}else o=FD(n,t,e,i,r);return Rm(o)}fC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=iu(t.pendingLanes);n!==0&&(lb(t,n|1),Jn(t,Os()),!(Ft&6)&&(Dc=Os()+500,ho()))}break;case 13:ll(function(){var r=oa(e,1);if(r!==null){var i=Rn();Zr(r,e,1,i)}}),zb(e,1)}};cb=function(e){if(e.tag===13){var t=oa(e,134217728);if(t!==null){var n=Rn();Zr(t,e,134217728,n)}zb(e,134217728)}};mC=function(e){if(e.tag===13){var t=Ya(e),n=oa(e,t);if(n!==null){var r=Rn();Zr(n,e,t,r)}zb(e,t)}};pC=function(){return Qt};gC=function(e,t){var n=Qt;try{return Qt=e,t()}finally{Qt=n}};Bx=function(e,t,n){switch(t){case"input":if(Rx(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=jp(r);if(!i)throw Error(He(90));G2(r),Rx(r,i)}}}break;case"textarea":Z2(e,n);break;case"select":t=n.value,t!=null&&ic(e,!!n.multiple,t,!1)}};sC=Mb;nC=ll;var $D={usingClientEntryPoint:!1,Events:[bh,Wl,jp,eC,tC,Mb]},qd={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BD={bundleType:qd.bundleType,version:qd.version,rendererPackageName:qd.rendererPackageName,rendererConfig:qd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:va.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=aC(e),e===null?null:e.stateNode},findFiberByHostInstance:qd.findFiberByHostInstance||DD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wf.isDisabled&&wf.supportsFiber)try{yp=wf.inject(BD),ji=wf}catch{}}dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$D;dr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ub(t))throw Error(He(200));return MD(e,t,null,n)};dr.createRoot=function(e,t){if(!Ub(e))throw Error(He(299));var n=!1,r="",i=FE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Bb(e,1,!1,null,null,n,!1,r,i),e[aa]=t.current,$u(e.nodeType===8?e.parentNode:e),new Vb(t)};dr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(He(188)):(e=Object.keys(e).join(","),Error(He(268,e)));return e=aC(t),e=e===null?null:e.stateNode,e};dr.flushSync=function(e){return ll(e)};dr.hydrate=function(e,t,n){if(!Op(t))throw Error(He(200));return Rp(null,e,t,!0,n)};dr.hydrateRoot=function(e,t,n){if(!Ub(e))throw Error(He(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=FE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=DE(t,null,e,1,n??null,i,!1,a,o),e[aa]=t.current,$u(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ap(t)};dr.render=function(e,t,n){if(!Op(t))throw Error(He(200));return Rp(null,e,t,!1,n)};dr.unmountComponentAtNode=function(e){if(!Op(e))throw Error(He(40));return e._reactRootContainer?(ll(function(){Rp(null,null,e,!1,function(){e._reactRootContainer=null,e[aa]=null})}),!0):!1};dr.unstable_batchedUpdates=Mb;dr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Op(n))throw Error(He(200));if(e==null||e._reactInternals===void 0)throw Error(He(38));return Rp(e,t,n,!1,r)};dr.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(e){console.error(e)}}$E(),$2.exports=dr;var fo=$2.exports;const BE=vl(fo);var qb,HN=fo;qb=HN.createRoot,HN.hydrateRoot;const zD=1,VD=1e6;let Iv=0;function UD(){return Iv=(Iv+1)%Number.MAX_SAFE_INTEGER,Iv.toString()}const Mv=new Map,WN=e=>{if(Mv.has(e))return;const t=setTimeout(()=>{Mv.delete(e),bu({type:"REMOVE_TOAST",toastId:e})},VD);Mv.set(e,t)},zE=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,zD)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?WN(n):e.toasts.forEach(r=>{WN(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Zf=[];let Yf={toasts:[]};function bu(e){Yf=zE(Yf,e),Zf.forEach(t=>{t(Yf)})}function wu({...e}){const t=UD(),n=i=>bu({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>bu({type:"DISMISS_TOAST",toastId:t});return bu({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function ts(){const[e,t]=_.useState(Yf);return _.useEffect(()=>(Zf.push(t),()=>{const n=Zf.indexOf(t);n>-1&&Zf.splice(n,1)}),[e]),{...e,toast:wu,dismiss:n=>bu({type:"DISMISS_TOAST",toastId:n})}}const GN=Object.freeze(Object.defineProperty({__proto__:null,reducer:zE,toast:wu,useToast:ts},Symbol.toStringTag,{value:"Module"}));function Ke(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function KN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Lp(...e){return t=>{let n=!1;const r=e.map(i=>{const a=KN(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():KN(e[i],null)}}}}function jt(...e){return _.useCallback(Lp(...e),e)}function qD(e,t){const n=_.createContext(t),r=a=>{const{children:o,...l}=a,d=_.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:d,children:o})};r.displayName=e+"Provider";function i(a){const o=_.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,i]}function _n(e,t=[]){let n=[];function r(a,o){const l=_.createContext(o),d=n.length;n=[...n,o];const h=u=>{var g;const{scope:m,children:p,...w}=u,y=((g=m==null?void 0:m[e])==null?void 0:g[d])||l,b=_.useMemo(()=>w,Object.values(w));return s.jsx(y.Provider,{value:b,children:p})};h.displayName=a+"Provider";function f(u,m){var y;const p=((y=m==null?void 0:m[e])==null?void 0:y[d])||l,w=_.useContext(p);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${a}\``)}return[h,f]}const i=()=>{const a=n.map(o=>_.createContext(o));return function(l){const d=(l==null?void 0:l[e])||a;return _.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return i.scopeName=e,[r,HD(i,...t)]}function HD(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:d,scopeName:h})=>{const u=d(a)[`__scope${h}`];return{...l,...u}},{});return _.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function cl(e){const t=GD(e),n=_.forwardRef((r,i)=>{const{children:a,...o}=r,l=_.Children.toArray(a),d=l.find(ZD);if(d){const h=d.props.children,f=l.map(u=>u===d?_.Children.count(h)>1?_.Children.only(null):_.isValidElement(h)?h.props.children:null:u);return s.jsx(t,{...o,ref:i,children:_.isValidElement(h)?_.cloneElement(h,void 0,f):null})}return s.jsx(t,{...o,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}var WD=cl("Slot");function GD(e){const t=_.forwardRef((n,r)=>{const{children:i,...a}=n;if(_.isValidElement(i)){const o=XD(i),l=YD(a,i.props);return i.type!==_.Fragment&&(l.ref=r?Lp(r,o):o),_.cloneElement(i,l)}return _.Children.count(i)>1?_.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var VE=Symbol("radix.slottable");function KD(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=VE,t}function ZD(e){return _.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===VE}function YD(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{const d=a(...l);return i(...l),d}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function XD(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ip(e){const t=e+"CollectionProvider",[n,r]=_n(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:b,children:g}=y,x=Ae.useRef(null),j=Ae.useRef(new Map).current;return s.jsx(i,{scope:b,itemMap:j,collectionRef:x,children:g})};o.displayName=t;const l=e+"CollectionSlot",d=cl(l),h=Ae.forwardRef((y,b)=>{const{scope:g,children:x}=y,j=a(l,g),N=jt(b,j.collectionRef);return s.jsx(d,{ref:N,children:x})});h.displayName=l;const f=e+"CollectionItemSlot",u="data-radix-collection-item",m=cl(f),p=Ae.forwardRef((y,b)=>{const{scope:g,children:x,...j}=y,N=Ae.useRef(null),S=jt(b,N),C=a(f,g);return Ae.useEffect(()=>(C.itemMap.set(N,{ref:N,...j}),()=>void C.itemMap.delete(N))),s.jsx(m,{[u]:"",ref:S,children:x})});p.displayName=f;function w(y){const b=a(e+"CollectionConsumer",y);return Ae.useCallback(()=>{const x=b.collectionRef.current;if(!x)return[];const j=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(b.itemMap.values()).sort((C,T)=>j.indexOf(C.ref.current)-j.indexOf(T.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:h,ItemSlot:p},w,r]}var JD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ut=JD.reduce((e,t)=>{const n=cl(`Primitive.${t}`),r=_.forwardRef((i,a)=>{const{asChild:o,...l}=i,d=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Hb(e,t){e&&fo.flushSync(()=>e.dispatchEvent(t))}function ks(e){const t=_.useRef(e);return _.useEffect(()=>{t.current=e}),_.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function QD(e,t=globalThis==null?void 0:globalThis.document){const n=ks(e);_.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var eF="DismissableLayer",yy="dismissableLayer.update",tF="dismissableLayer.pointerDownOutside",sF="dismissableLayer.focusOutside",ZN,UE=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),id=_.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...d}=e,h=_.useContext(UE),[f,u]=_.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=_.useState({}),w=jt(t,T=>u(T)),y=Array.from(h.layers),[b]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),g=y.indexOf(b),x=f?y.indexOf(f):-1,j=h.layersWithOutsidePointerEventsDisabled.size>0,N=x>=g,S=rF(T=>{const A=T.target,I=[...h.branches].some(P=>P.contains(A));!N||I||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},m),C=iF(T=>{const A=T.target;[...h.branches].some(P=>P.contains(A))||(a==null||a(T),o==null||o(T),T.defaultPrevented||l==null||l())},m);return QD(T=>{x===h.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),_.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(ZN=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),YN(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ZN)}},[f,m,n,h]),_.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),YN())},[f,h]),_.useEffect(()=>{const T=()=>p({});return document.addEventListener(yy,T),()=>document.removeEventListener(yy,T)},[]),s.jsx(ut.div,{...d,ref:w,style:{pointerEvents:j?N?"auto":"none":void 0,...e.style},onFocusCapture:Ke(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Ke(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Ke(e.onPointerDownCapture,S.onPointerDownCapture)})});id.displayName=eF;var nF="DismissableLayerBranch",qE=_.forwardRef((e,t)=>{const n=_.useContext(UE),r=_.useRef(null),i=jt(t,r);return _.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(ut.div,{...e,ref:i})});qE.displayName=nF;function rF(e,t=globalThis==null?void 0:globalThis.document){const n=ks(e),r=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let d=function(){HE(tF,n,h,{discrete:!0})};const h={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=d,t.addEventListener("click",i.current,{once:!0})):d()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function iF(e,t=globalThis==null?void 0:globalThis.document){const n=ks(e),r=_.useRef(!1);return _.useEffect(()=>{const i=a=>{a.target&&!r.current&&HE(sF,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function YN(){const e=new CustomEvent(yy);document.dispatchEvent(e)}function HE(e,t,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Hb(i,a):i.dispatchEvent(a)}var aF=id,oF=qE,Is=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},lF="Portal",_h=_.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[i,a]=_.useState(!1);Is(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?BE.createPortal(s.jsx(ut.div,{...r,ref:t}),o):null});_h.displayName=lF;function cF(e,t){return _.useReducer((n,r)=>t[n][r]??n,e)}var hn=e=>{const{present:t,children:n}=e,r=dF(t),i=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),a=jt(r.ref,uF(i));return typeof n=="function"||r.isPresent?_.cloneElement(i,{ref:a}):null};hn.displayName="Presence";function dF(e){const[t,n]=_.useState(),r=_.useRef(null),i=_.useRef(e),a=_.useRef("none"),o=e?"mounted":"unmounted",[l,d]=cF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const h=_f(r.current);a.current=l==="mounted"?h:"none"},[l]),Is(()=>{const h=r.current,f=i.current;if(f!==e){const m=a.current,p=_f(h);e?d("MOUNT"):p==="none"||(h==null?void 0:h.display)==="none"?d("UNMOUNT"):d(f&&m!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,d]),Is(()=>{if(t){let h;const f=t.ownerDocument.defaultView??window,u=p=>{const y=_f(r.current).includes(p.animationName);if(p.target===t&&y&&(d("ANIMATION_END"),!i.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",h=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=p=>{p.target===t&&(a.current=_f(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{f.clearTimeout(h),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:_.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function _f(e){return(e==null?void 0:e.animationName)||"none"}function uF(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var hF=Q0[" useInsertionEffect ".trim().toString()]||Is;function ei({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,a,o]=fF({defaultProp:t,onChange:n}),l=e!==void 0,d=l?e:i;{const f=_.useRef(e!==void 0);_.useEffect(()=>{const u=f.current;u!==l&&console.warn(`${r} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const h=_.useCallback(f=>{var u;if(l){const m=mF(f)?f(e):f;m!==e&&((u=o.current)==null||u.call(o,m))}else a(f)},[l,e,a,o]);return[d,h]}function fF({defaultProp:e,onChange:t}){const[n,r]=_.useState(e),i=_.useRef(n),a=_.useRef(t);return hF(()=>{a.current=t},[t]),_.useEffect(()=>{var o;i.current!==n&&((o=a.current)==null||o.call(a,n),i.current=n)},[n,i]),[n,r,a]}function mF(e){return typeof e=="function"}var WE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pF="VisuallyHidden",Mp=_.forwardRef((e,t)=>s.jsx(ut.span,{...e,ref:t,style:{...WE,...e.style}}));Mp.displayName=pF;var gF=Mp,Wb="ToastProvider",[Gb,vF,xF]=Ip("Toast"),[GE,Yie]=_n("Toast",[xF]),[yF,Dp]=GE(Wb),KE=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,d]=_.useState(null),[h,f]=_.useState(0),u=_.useRef(!1),m=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Wb}\`. Expected non-empty \`string\`.`),s.jsx(Gb.Provider,{scope:t,children:s.jsx(yF,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:h,viewport:l,onViewportChange:d,onToastAdd:_.useCallback(()=>f(p=>p+1),[]),onToastRemove:_.useCallback(()=>f(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:o})})};KE.displayName=Wb;var ZE="ToastViewport",bF=["F8"],by="toast.viewportPause",wy="toast.viewportResume",YE=_.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=bF,label:i="Notifications ({hotkey})",...a}=e,o=Dp(ZE,n),l=vF(n),d=_.useRef(null),h=_.useRef(null),f=_.useRef(null),u=_.useRef(null),m=jt(t,u,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;_.useEffect(()=>{const b=g=>{var j;r.length!==0&&r.every(N=>g[N]||g.code===N)&&((j=u.current)==null||j.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),_.useEffect(()=>{const b=d.current,g=u.current;if(w&&b&&g){const x=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(by);g.dispatchEvent(C),o.isClosePausedRef.current=!0}},j=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(wy);g.dispatchEvent(C),o.isClosePausedRef.current=!1}},N=C=>{!b.contains(C.relatedTarget)&&j()},S=()=>{b.contains(document.activeElement)||j()};return b.addEventListener("focusin",x),b.addEventListener("focusout",N),b.addEventListener("pointermove",x),b.addEventListener("pointerleave",S),window.addEventListener("blur",x),window.addEventListener("focus",j),()=>{b.removeEventListener("focusin",x),b.removeEventListener("focusout",N),b.removeEventListener("pointermove",x),b.removeEventListener("pointerleave",S),window.removeEventListener("blur",x),window.removeEventListener("focus",j)}}},[w,o.isClosePausedRef]);const y=_.useCallback(({tabbingDirection:b})=>{const x=l().map(j=>{const N=j.ref.current,S=[N,...RF(N)];return b==="forwards"?S:S.reverse()});return(b==="forwards"?x.reverse():x).flat()},[l]);return _.useEffect(()=>{const b=u.current;if(b){const g=x=>{var S,C,T;const j=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!j){const A=document.activeElement,I=x.shiftKey;if(x.target===b&&I){(S=h.current)==null||S.focus();return}const E=y({tabbingDirection:I?"backwards":"forwards"}),F=E.findIndex(O=>O===A);Dv(E.slice(F+1))?x.preventDefault():I?(C=h.current)==null||C.focus():(T=f.current)==null||T.focus()}};return b.addEventListener("keydown",g),()=>b.removeEventListener("keydown",g)}},[l,y]),s.jsxs(oF,{ref:d,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&s.jsx(_y,{ref:h,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"forwards"});Dv(b)}}),s.jsx(Gb.Slot,{scope:n,children:s.jsx(ut.ol,{tabIndex:-1,...a,ref:m})}),w&&s.jsx(_y,{ref:f,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"backwards"});Dv(b)}})]})});YE.displayName=ZE;var XE="ToastFocusProxy",_y=_.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,a=Dp(XE,n);return s.jsx(Mp,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var h;const l=o.relatedTarget;!((h=a.viewport)!=null&&h.contains(l))&&r()}})});_y.displayName=XE;var jh="Toast",wF="toast.swipeStart",_F="toast.swipeMove",jF="toast.swipeCancel",NF="toast.swipeEnd",JE=_.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...o}=e,[l,d]=ei({prop:r,defaultProp:i??!0,onChange:a,caller:jh});return s.jsx(hn,{present:n||l,children:s.jsx(CF,{open:l,...o,ref:t,onClose:()=>d(!1),onPause:ks(e.onPause),onResume:ks(e.onResume),onSwipeStart:Ke(e.onSwipeStart,h=>{h.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ke(e.onSwipeMove,h=>{const{x:f,y:u}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","move"),h.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:Ke(e.onSwipeCancel,h=>{h.currentTarget.setAttribute("data-swipe","cancel"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ke(e.onSwipeEnd,h=>{const{x:f,y:u}=h.detail.delta;h.currentTarget.setAttribute("data-swipe","end"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),h.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),h.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),h.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),d(!1)})})})});JE.displayName=jh;var[SF,kF]=GE(jh,{onClose(){}}),CF=_.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:d,onResume:h,onSwipeStart:f,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:p,...w}=e,y=Dp(jh,n),[b,g]=_.useState(null),x=jt(t,O=>g(O)),j=_.useRef(null),N=_.useRef(null),S=i||y.duration,C=_.useRef(0),T=_.useRef(S),A=_.useRef(0),{onToastAdd:I,onToastRemove:P}=y,R=ks(()=>{var M;(b==null?void 0:b.contains(document.activeElement))&&((M=y.viewport)==null||M.focus()),o()}),E=_.useCallback(O=>{!O||O===1/0||(window.clearTimeout(A.current),C.current=new Date().getTime(),A.current=window.setTimeout(R,O))},[R]);_.useEffect(()=>{const O=y.viewport;if(O){const M=()=>{E(T.current),h==null||h()},Z=()=>{const X=new Date().getTime()-C.current;T.current=T.current-X,window.clearTimeout(A.current),d==null||d()};return O.addEventListener(by,Z),O.addEventListener(wy,M),()=>{O.removeEventListener(by,Z),O.removeEventListener(wy,M)}}},[y.viewport,S,d,h,E]),_.useEffect(()=>{a&&!y.isClosePausedRef.current&&E(S)},[a,S,y.isClosePausedRef,E]),_.useEffect(()=>(I(),()=>P()),[I,P]);const F=_.useMemo(()=>b?iT(b):null,[b]);return y.viewport?s.jsxs(s.Fragment,{children:[F&&s.jsx(EF,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),s.jsx(SF,{scope:n,onClose:R,children:fo.createPortal(s.jsx(Gb.ItemSlot,{scope:n,children:s.jsx(aF,{asChild:!0,onEscapeKeyDown:Ke(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||R(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(ut.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":y.swipeDirection,...w,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ke(e.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:Ke(e.onPointerDown,O=>{O.button===0&&(j.current={x:O.clientX,y:O.clientY})}),onPointerMove:Ke(e.onPointerMove,O=>{if(!j.current)return;const M=O.clientX-j.current.x,Z=O.clientY-j.current.y,X=!!N.current,z=["left","right"].includes(y.swipeDirection),D=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,B=z?D(0,M):0,V=z?0:D(0,Z),H=O.pointerType==="touch"?10:2,q={x:B,y:V},W={originalEvent:O,delta:q};X?(N.current=q,jf(_F,u,W,{discrete:!1})):XN(q,y.swipeDirection,H)?(N.current=q,jf(wF,f,W,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(M)>H||Math.abs(Z)>H)&&(j.current=null)}),onPointerUp:Ke(e.onPointerUp,O=>{const M=N.current,Z=O.target;if(Z.hasPointerCapture(O.pointerId)&&Z.releasePointerCapture(O.pointerId),N.current=null,j.current=null,M){const X=O.currentTarget,z={originalEvent:O,delta:M};XN(M,y.swipeDirection,y.swipeThreshold)?jf(NF,p,z,{discrete:!0}):jf(jF,m,z,{discrete:!0}),X.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),EF=e=>{const{__scopeToast:t,children:n,...r}=e,i=Dp(jh,t),[a,o]=_.useState(!1),[l,d]=_.useState(!1);return AF(()=>o(!0)),_.useEffect(()=>{const h=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(h)},[]),l?null:s.jsx(_h,{asChild:!0,children:s.jsx(Mp,{...r,children:a&&s.jsxs(s.Fragment,{children:[i.label," ",n]})})})},TF="ToastTitle",QE=_.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(ut.div,{...r,ref:t})});QE.displayName=TF;var PF="ToastDescription",eT=_.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(ut.div,{...r,ref:t})});eT.displayName=PF;var tT="ToastAction",sT=_.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(rT,{altText:n,asChild:!0,children:s.jsx(Kb,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${tT}\`. Expected non-empty \`string\`.`),null)});sT.displayName=tT;var nT="ToastClose",Kb=_.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=kF(nT,n);return s.jsx(rT,{asChild:!0,children:s.jsx(ut.button,{type:"button",...r,ref:t,onClick:Ke(e.onClick,i.onClose)})})});Kb.displayName=nT;var rT=_.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return s.jsx(ut.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function iT(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),OF(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...iT(r))}}),t}function jf(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Hb(i,a):i.dispatchEvent(a)}var XN=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t==="left"||t==="right"?a&&r>n:!a&&i>n};function AF(e=()=>{}){const t=ks(e);Is(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function OF(e){return e.nodeType===e.ELEMENT_NODE}function RF(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Dv(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var LF=KE,aT=YE,oT=JE,lT=QE,cT=eT,dT=sT,uT=Kb;function hT(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=hT(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function fT(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=hT(e))&&(r&&(r+=" "),r+=t);return r}const JN=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,QN=fT,Nh=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return QN(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(h=>{const f=n==null?void 0:n[h],u=a==null?void 0:a[h];if(f===null)return null;const m=JN(f)||JN(u);return i[h][m]}),l=n&&Object.entries(n).reduce((h,f)=>{let[u,m]=f;return m===void 0||(h[u]=m),h},{}),d=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((h,f)=>{let{class:u,className:m,...p}=f;return Object.entries(p).every(w=>{let[y,b]=w;return Array.isArray(b)?b.includes({...a,...l}[y]):{...a,...l}[y]===b})?[...h,u,m]:h},[]);return QN(e,o,d,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mT=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},d)=>_.createElement("svg",{ref:d,...MF,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:mT("lucide",i),...l},[...o.map(([h,f])=>_.createElement(h,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(e,t)=>{const n=_.forwardRef(({className:r,...i},a)=>_.createElement(DF,{ref:a,iconNode:t,className:mT(`lucide-${IF(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Xe("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=Xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=Xe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=Xe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=Xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=Xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=Xe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=Xe("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=Xe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=Xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=Xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=Xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=Xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=Xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=Xe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=Xe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=Xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=Xe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=Xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=Xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=Xe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Xe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=Xe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=Xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=Xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=Xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=Xe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=Xe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=Xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=Xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=Xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=Xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Xe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=Xe("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=Xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=Xe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=Xe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Xe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=Xe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=Xe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Xe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=Xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=Xe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=Xe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=Xe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=Xe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=Xe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=Xe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=Xe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=Xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Xe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Xe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=Xe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Xe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Xe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=Xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=Xe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=Xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Xe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=Xe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ew="-",e6=e=>{const t=s6(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(ew);return l[0]===""&&l.length!==1&&l.shift(),ST(l,t)||t6(o)},getConflictingClassGroupIds:(o,l)=>{const d=n[o]||[];return l&&r[o]?[...d,...r[o]]:d}}},ST=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?ST(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(ew);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},n1=/^\[(.+)\]$/,t6=e=>{if(n1.test(e)){const t=n1.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},s6=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return r6(Object.entries(e.classGroups),n).forEach(([a,o])=>{Ny(o,r,a,t)}),r},Ny=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:r1(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(n6(i)){Ny(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{Ny(o,r1(t,a),n,r)})})},r1=(e,t)=>{let n=e;return t.split(ew).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},n6=e=>e.isThemeGetter,r6=(e,t)=>t?e.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,i]}):e,i6=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},kT="!",a6=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],a=t.length,o=l=>{const d=[];let h=0,f=0,u;for(let b=0;b<l.length;b++){let g=l[b];if(h===0){if(g===i&&(r||l.slice(b,b+a)===t)){d.push(l.slice(f,b)),f=b+a;continue}if(g==="/"){u=b;continue}}g==="["?h++:g==="]"&&h--}const m=d.length===0?l:l.substring(f),p=m.startsWith(kT),w=p?m.substring(1):m,y=u&&u>f?u-f:void 0;return{modifiers:d,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:o}):o},o6=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},l6=e=>({cache:i6(e.cacheSize),parseClassName:a6(e),...e6(e)}),c6=/\s+/,d6=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(c6);let l="";for(let d=o.length-1;d>=0;d-=1){const h=o[d],{modifiers:f,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:p}=n(h);let w=!!p,y=r(w?m.substring(0,p):m);if(!y){if(!w){l=h+(l.length>0?" "+l:l);continue}if(y=r(m),!y){l=h+(l.length>0?" "+l:l);continue}w=!1}const b=o6(f).join(":"),g=u?b+kT:b,x=g+y;if(a.includes(x))continue;a.push(x);const j=i(y,w);for(let N=0;N<j.length;++N){const S=j[N];a.push(g+S)}l=h+(l.length>0?" "+l:l)}return l};function u6(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=CT(t))&&(r&&(r+=" "),r+=n);return r}const CT=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=CT(e[r]))&&(n&&(n+=" "),n+=t);return n};function h6(e,...t){let n,r,i,a=o;function o(d){const h=t.reduce((f,u)=>u(f),e());return n=l6(h),r=n.cache.get,i=n.cache.set,a=l,l(d)}function l(d){const h=r(d);if(h)return h;const f=d6(d,n);return i(d,f),f}return function(){return a(u6.apply(null,arguments))}}const os=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},ET=/^\[(?:([a-z-]+):)?(.+)\]$/i,f6=/^\d+\/\d+$/,m6=new Set(["px","full","screen"]),p6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,g6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,v6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,x6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,y6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hi=e=>hc(e)||m6.has(e)||f6.test(e),Na=e=>od(e,"length",C6),hc=e=>!!e&&!Number.isNaN(Number(e)),Fv=e=>od(e,"number",hc),Hd=e=>!!e&&Number.isInteger(Number(e)),b6=e=>e.endsWith("%")&&hc(e.slice(0,-1)),Ct=e=>ET.test(e),Sa=e=>p6.test(e),w6=new Set(["length","size","percentage"]),_6=e=>od(e,w6,TT),j6=e=>od(e,"position",TT),N6=new Set(["image","url"]),S6=e=>od(e,N6,T6),k6=e=>od(e,"",E6),Wd=()=>!0,od=(e,t,n)=>{const r=ET.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},C6=e=>g6.test(e)&&!v6.test(e),TT=()=>!1,E6=e=>x6.test(e),T6=e=>y6.test(e),P6=()=>{const e=os("colors"),t=os("spacing"),n=os("blur"),r=os("brightness"),i=os("borderColor"),a=os("borderRadius"),o=os("borderSpacing"),l=os("borderWidth"),d=os("contrast"),h=os("grayscale"),f=os("hueRotate"),u=os("invert"),m=os("gap"),p=os("gradientColorStops"),w=os("gradientColorStopPositions"),y=os("inset"),b=os("margin"),g=os("opacity"),x=os("padding"),j=os("saturate"),N=os("scale"),S=os("sepia"),C=os("skew"),T=os("space"),A=os("translate"),I=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Ct,t],E=()=>[Ct,t],F=()=>["",Hi,Na],O=()=>["auto",hc,Ct],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",Ct],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[hc,Ct];return{cacheSize:500,separator:":",theme:{colors:[Wd],spacing:[Hi,Na],blur:["none","",Sa,Ct],brightness:V(),borderColor:[e],borderRadius:["none","","full",Sa,Ct],borderSpacing:E(),borderWidth:F(),contrast:V(),grayscale:D(),hueRotate:V(),invert:D(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[b6,Na],inset:R(),margin:R(),opacity:V(),padding:E(),saturate:V(),scale:V(),sepia:D(),skew:V(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",Ct]}],container:["container"],columns:[{columns:[Sa]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),Ct]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Hd,Ct]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ct]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Hd,Ct]}],"grid-cols":[{"grid-cols":[Wd]}],"col-start-end":[{col:["auto",{span:["full",Hd,Ct]},Ct]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Wd]}],"row-start-end":[{row:["auto",{span:[Hd,Ct]},Ct]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ct]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ct,t]}],"min-w":[{"min-w":[Ct,t,"min","max","fit"]}],"max-w":[{"max-w":[Ct,t,"none","full","min","max","fit","prose",{screen:[Sa]},Sa]}],h:[{h:[Ct,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ct,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ct,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ct,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Sa,Na]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Fv]}],"font-family":[{font:[Wd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ct]}],"line-clamp":[{"line-clamp":["none",hc,Fv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hi,Ct]}],"list-image":[{"list-image":["none",Ct]}],"list-style-type":[{list:["none","disc","decimal",Ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hi,Na]}],"underline-offset":[{"underline-offset":["auto",Hi,Ct]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),j6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},S6]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:Z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Hi,Ct]}],"outline-w":[{outline:[Hi,Na]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Hi,Na]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Sa,k6]}],"shadow-color":[{shadow:[Wd]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Sa,Ct]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[u]}],saturate:[{saturate:[j]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ct]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",Ct]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Hd,Ct]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ct]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ct]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ct]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Hi,Na,Fv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},A6=h6(P6);function at(...e){return A6(fT(e))}const O6=LF,PT=_.forwardRef(({className:e,...t},n)=>s.jsx(aT,{ref:n,className:at("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));PT.displayName=aT.displayName;const R6=Nh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),AT=_.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(oT,{ref:r,className:at(R6({variant:t}),e),...n}));AT.displayName=oT.displayName;const L6=_.forwardRef(({className:e,...t},n)=>s.jsx(dT,{ref:n,className:at("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));L6.displayName=dT.displayName;const OT=_.forwardRef(({className:e,...t},n)=>s.jsx(uT,{ref:n,className:at("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(tn,{className:"h-4 w-4"})}));OT.displayName=uT.displayName;const RT=_.forwardRef(({className:e,...t},n)=>s.jsx(lT,{ref:n,className:at("text-sm font-semibold",e),...t}));RT.displayName=lT.displayName;const LT=_.forwardRef(({className:e,...t},n)=>s.jsx(cT,{ref:n,className:at("text-sm opacity-90",e),...t}));LT.displayName=cT.displayName;function I6(){const{toasts:e}=ts();return s.jsxs(O6,{children:[e.map(function({id:t,title:n,description:r,action:i,...a}){return s.jsxs(AT,{...a,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(RT,{children:n}),r&&s.jsx(LT,{children:r})]}),i,s.jsx(OT,{})]},t)}),s.jsx(PT,{})]})}var i1=["light","dark"],M6="(prefers-color-scheme: dark)",D6=_.createContext(void 0),F6={setTheme:e=>{},themes:[]},$6=()=>{var e;return(e=_.useContext(D6))!=null?e:F6};_.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:o,attrs:l,nonce:d})=>{let h=a==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,u=i?i1.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(w,y=!1,b=!0)=>{let g=o?o[w]:w,x=y?w+"|| ''":`'${g}'`,j="";return i&&b&&!y&&i1.includes(w)&&(j+=`d.style.colorScheme = '${w}';`),n==="class"?y||g?j+=`c.add(${x})`:j+="null":g&&(j+=`d[s](n,${x})`),j},p=e?`!function(){${f}${m(e)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${h})){var t='${M6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${h?"":"else{"+m(a,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${u}}catch(t){}}();`;return _.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:p}})});var B6=e=>{switch(e){case"success":return U6;case"info":return H6;case"warning":return q6;case"error":return W6;default:return null}},z6=Array(12).fill(0),V6=({visible:e,className:t})=>Ae.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ae.createElement("div",{className:"sonner-spinner"},z6.map((n,r)=>Ae.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),U6=Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),q6=Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ae.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),H6=Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),W6=Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),G6=Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),K6=()=>{let[e,t]=Ae.useState(document.hidden);return Ae.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Sy=1,Z6=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Sy++,a=this.toasts.find(l=>l.id===i),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:n}),{...l,...e,id:i,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),i=n!==void 0,a,o=r.then(async d=>{if(a=["resolve",d],Ae.isValidElement(d))i=!1,this.create({id:n,type:"default",message:d});else if(X6(d)&&!d.ok){i=!1;let h=typeof t.error=="function"?await t.error(`HTTP error! status: ${d.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${d.status}`):t.description;this.create({id:n,type:"error",message:h,description:f})}else if(t.success!==void 0){i=!1;let h=typeof t.success=="function"?await t.success(d):t.success,f=typeof t.description=="function"?await t.description(d):t.description;this.create({id:n,type:"success",message:h,description:f})}}).catch(async d=>{if(a=["reject",d],t.error!==void 0){i=!1;let h=typeof t.error=="function"?await t.error(d):t.error,f=typeof t.description=="function"?await t.description(d):t.description;this.create({id:n,type:"error",message:h,description:f})}}).finally(()=>{var d;i&&(this.dismiss(n),n=void 0),(d=t.finally)==null||d.call(t)}),l=()=>new Promise((d,h)=>o.then(()=>a[0]==="reject"?h(a[1]):d(a[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Sy++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},qn=new Z6,Y6=(e,t)=>{let n=(t==null?void 0:t.id)||Sy++;return qn.addToast({title:e,...t,id:n}),n},X6=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",J6=Y6,Q6=()=>qn.toasts,e$=()=>qn.getActiveToasts(),ln=Object.assign(J6,{success:qn.success,info:qn.info,warning:qn.warning,error:qn.error,custom:qn.custom,message:qn.message,promise:qn.promise,dismiss:qn.dismiss,loading:qn.loading},{getHistory:Q6,getToasts:e$});function t$(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}t$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Nf(e){return e.label!==void 0}var s$=3,n$="32px",r$="16px",a1=4e3,i$=356,a$=14,o$=20,l$=200;function Rr(...e){return e.filter(Boolean).join(" ")}function c$(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var d$=e=>{var t,n,r,i,a,o,l,d,h,f,u;let{invert:m,toast:p,unstyled:w,interacting:y,setHeights:b,visibleToasts:g,heights:x,index:j,toasts:N,expanded:S,removeToast:C,defaultRichColors:T,closeButton:A,style:I,cancelButtonStyle:P,actionButtonStyle:R,className:E="",descriptionClassName:F="",duration:O,position:M,gap:Z,loadingIcon:X,expandByDefault:z,classNames:D,icons:B,closeButtonAriaLabel:V="Close toast",pauseWhenPageIsHidden:H}=e,[q,W]=Ae.useState(null),[Y,U]=Ae.useState(null),[G,ne]=Ae.useState(!1),[J,ie]=Ae.useState(!1),[xe,Se]=Ae.useState(!1),[ue,he]=Ae.useState(!1),[Q,ye]=Ae.useState(!1),[be,ce]=Ae.useState(0),[ge,ee]=Ae.useState(0),ae=Ae.useRef(p.duration||O||a1),oe=Ae.useRef(null),ke=Ae.useRef(null),de=j===0,pe=j+1<=g,Pe=p.type,me=p.dismissible!==!1,we=p.className||"",Re=p.descriptionClassName||"",Ee=Ae.useMemo(()=>x.findIndex(Me=>Me.toastId===p.id)||0,[x,p.id]),qe=Ae.useMemo(()=>{var Me;return(Me=p.closeButton)!=null?Me:A},[p.closeButton,A]),re=Ae.useMemo(()=>p.duration||O||a1,[p.duration,O]),je=Ae.useRef(0),Oe=Ae.useRef(0),Ye=Ae.useRef(0),Ie=Ae.useRef(null),[We,At]=M.split("-"),ss=Ae.useMemo(()=>x.reduce((Me,et,tt)=>tt>=Ee?Me:Me+et.height,0),[x,Ee]),zs=K6(),rn=p.invert||m,Ks=Pe==="loading";Oe.current=Ae.useMemo(()=>Ee*Z+ss,[Ee,ss]),Ae.useEffect(()=>{ae.current=re},[re]),Ae.useEffect(()=>{ne(!0)},[]),Ae.useEffect(()=>{let Me=ke.current;if(Me){let et=Me.getBoundingClientRect().height;return ee(et),b(tt=>[{toastId:p.id,height:et,position:p.position},...tt]),()=>b(tt=>tt.filter(Be=>Be.toastId!==p.id))}},[b,p.id]),Ae.useLayoutEffect(()=>{if(!G)return;let Me=ke.current,et=Me.style.height;Me.style.height="auto";let tt=Me.getBoundingClientRect().height;Me.style.height=et,ee(tt),b(Be=>Be.find(ft=>ft.toastId===p.id)?Be.map(ft=>ft.toastId===p.id?{...ft,height:tt}:ft):[{toastId:p.id,height:tt,position:p.position},...Be])},[G,p.title,p.description,b,p.id]);let le=Ae.useCallback(()=>{ie(!0),ce(Oe.current),b(Me=>Me.filter(et=>et.toastId!==p.id)),setTimeout(()=>{C(p)},l$)},[p,C,b,Oe]);Ae.useEffect(()=>{if(p.promise&&Pe==="loading"||p.duration===1/0||p.type==="loading")return;let Me;return S||y||H&&zs?(()=>{if(Ye.current<je.current){let et=new Date().getTime()-je.current;ae.current=ae.current-et}Ye.current=new Date().getTime()})():ae.current!==1/0&&(je.current=new Date().getTime(),Me=setTimeout(()=>{var et;(et=p.onAutoClose)==null||et.call(p,p),le()},ae.current)),()=>clearTimeout(Me)},[S,y,p,Pe,H,zs,le]),Ae.useEffect(()=>{p.delete&&le()},[le,p.delete]);function nt(){var Me,et,tt;return B!=null&&B.loading?Ae.createElement("div",{className:Rr(D==null?void 0:D.loader,(Me=p==null?void 0:p.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":Pe==="loading"},B.loading):X?Ae.createElement("div",{className:Rr(D==null?void 0:D.loader,(et=p==null?void 0:p.classNames)==null?void 0:et.loader,"sonner-loader"),"data-visible":Pe==="loading"},X):Ae.createElement(V6,{className:Rr(D==null?void 0:D.loader,(tt=p==null?void 0:p.classNames)==null?void 0:tt.loader),visible:Pe==="loading"})}return Ae.createElement("li",{tabIndex:0,ref:ke,className:Rr(E,we,D==null?void 0:D.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,D==null?void 0:D.default,D==null?void 0:D[Pe],(n=p==null?void 0:p.classNames)==null?void 0:n[Pe]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:T,"data-styled":!(p.jsx||p.unstyled||w),"data-mounted":G,"data-promise":!!p.promise,"data-swiped":Q,"data-removed":J,"data-visible":pe,"data-y-position":We,"data-x-position":At,"data-index":j,"data-front":de,"data-swiping":xe,"data-dismissible":me,"data-type":Pe,"data-invert":rn,"data-swipe-out":ue,"data-swipe-direction":Y,"data-expanded":!!(S||z&&G),style:{"--index":j,"--toasts-before":j,"--z-index":N.length-j,"--offset":`${J?be:Oe.current}px`,"--initial-height":z?"auto":`${ge}px`,...I,...p.style},onDragEnd:()=>{Se(!1),W(null),Ie.current=null},onPointerDown:Me=>{Ks||!me||(oe.current=new Date,ce(Oe.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(Se(!0),Ie.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,et,tt,Be;if(ue||!me)return;Ie.current=null;let ft=Number(((Me=ke.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yt=Number(((et=ke.current)==null?void 0:et.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Dt=new Date().getTime()-((tt=oe.current)==null?void 0:tt.getTime()),qt=q==="x"?ft:yt,ns=Math.abs(qt)/Dt;if(Math.abs(qt)>=o$||ns>.11){ce(Oe.current),(Be=p.onDismiss)==null||Be.call(p,p),U(q==="x"?ft>0?"right":"left":yt>0?"down":"up"),le(),he(!0),ye(!1);return}Se(!1),W(null)},onPointerMove:Me=>{var et,tt,Be,ft;if(!Ie.current||!me||((et=window.getSelection())==null?void 0:et.toString().length)>0)return;let yt=Me.clientY-Ie.current.y,Dt=Me.clientX-Ie.current.x,qt=(tt=e.swipeDirections)!=null?tt:c$(M);!q&&(Math.abs(Dt)>1||Math.abs(yt)>1)&&W(Math.abs(Dt)>Math.abs(yt)?"x":"y");let ns={x:0,y:0};q==="y"?(qt.includes("top")||qt.includes("bottom"))&&(qt.includes("top")&&yt<0||qt.includes("bottom")&&yt>0)&&(ns.y=yt):q==="x"&&(qt.includes("left")||qt.includes("right"))&&(qt.includes("left")&&Dt<0||qt.includes("right")&&Dt>0)&&(ns.x=Dt),(Math.abs(ns.x)>0||Math.abs(ns.y)>0)&&ye(!0),(Be=ke.current)==null||Be.style.setProperty("--swipe-amount-x",`${ns.x}px`),(ft=ke.current)==null||ft.style.setProperty("--swipe-amount-y",`${ns.y}px`)}},qe&&!p.jsx?Ae.createElement("button",{"aria-label":V,"data-disabled":Ks,"data-close-button":!0,onClick:Ks||!me?()=>{}:()=>{var Me;le(),(Me=p.onDismiss)==null||Me.call(p,p)},className:Rr(D==null?void 0:D.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(a=B==null?void 0:B.close)!=null?a:G6):null,p.jsx||_.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:Ae.createElement(Ae.Fragment,null,Pe||p.icon||p.promise?Ae.createElement("div",{"data-icon":"",className:Rr(D==null?void 0:D.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||nt():null,p.type!=="loading"?p.icon||(B==null?void 0:B[Pe])||B6(Pe):null):null,Ae.createElement("div",{"data-content":"",className:Rr(D==null?void 0:D.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},Ae.createElement("div",{"data-title":"",className:Rr(D==null?void 0:D.title,(d=p==null?void 0:p.classNames)==null?void 0:d.title)},typeof p.title=="function"?p.title():p.title),p.description?Ae.createElement("div",{"data-description":"",className:Rr(F,Re,D==null?void 0:D.description,(h=p==null?void 0:p.classNames)==null?void 0:h.description)},typeof p.description=="function"?p.description():p.description):null),_.isValidElement(p.cancel)?p.cancel:p.cancel&&Nf(p.cancel)?Ae.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||P,onClick:Me=>{var et,tt;Nf(p.cancel)&&me&&((tt=(et=p.cancel).onClick)==null||tt.call(et,Me),le())},className:Rr(D==null?void 0:D.cancelButton,(f=p==null?void 0:p.classNames)==null?void 0:f.cancelButton)},p.cancel.label):null,_.isValidElement(p.action)?p.action:p.action&&Nf(p.action)?Ae.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||R,onClick:Me=>{var et,tt;Nf(p.action)&&((tt=(et=p.action).onClick)==null||tt.call(et,Me),!Me.defaultPrevented&&le())},className:Rr(D==null?void 0:D.actionButton,(u=p==null?void 0:p.classNames)==null?void 0:u.actionButton)},p.action.label):null))};function o1(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function u$(e,t){let n={};return[e,t].forEach((r,i)=>{let a=i===1,o=a?"--mobile-offset":"--offset",l=a?r$:n$;function d(h){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${o}-${h}`]=l:n[`${o}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(l)}),n}var h$=_.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:d,mobileOffset:h,theme:f="light",richColors:u,duration:m,style:p,visibleToasts:w=s$,toastOptions:y,dir:b=o1(),gap:g=a$,loadingIcon:x,icons:j,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:S}=e,[C,T]=Ae.useState([]),A=Ae.useMemo(()=>Array.from(new Set([r].concat(C.filter(H=>H.position).map(H=>H.position)))),[C,r]),[I,P]=Ae.useState([]),[R,E]=Ae.useState(!1),[F,O]=Ae.useState(!1),[M,Z]=Ae.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),X=Ae.useRef(null),z=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=Ae.useRef(null),B=Ae.useRef(!1),V=Ae.useCallback(H=>{T(q=>{var W;return(W=q.find(Y=>Y.id===H.id))!=null&&W.delete||qn.dismiss(H.id),q.filter(({id:Y})=>Y!==H.id)})},[]);return Ae.useEffect(()=>qn.subscribe(H=>{if(H.dismiss){T(q=>q.map(W=>W.id===H.id?{...W,delete:!0}:W));return}setTimeout(()=>{BE.flushSync(()=>{T(q=>{let W=q.findIndex(Y=>Y.id===H.id);return W!==-1?[...q.slice(0,W),{...q[W],...H},...q.slice(W+1)]:[H,...q]})})})}),[]),Ae.useEffect(()=>{if(f!=="system"){Z(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Z("dark"):Z("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:q})=>{Z(q?"dark":"light")})}catch{H.addListener(({matches:W})=>{try{Z(W?"dark":"light")}catch(Y){console.error(Y)}})}},[f]),Ae.useEffect(()=>{C.length<=1&&E(!1)},[C]),Ae.useEffect(()=>{let H=q=>{var W,Y;i.every(U=>q[U]||q.code===U)&&(E(!0),(W=X.current)==null||W.focus()),q.code==="Escape"&&(document.activeElement===X.current||(Y=X.current)!=null&&Y.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[i]),Ae.useEffect(()=>{if(X.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,B.current=!1)}},[X.current]),Ae.createElement("section",{ref:t,"aria-label":`${N} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((H,q)=>{var W;let[Y,U]=H.split("-");return C.length?Ae.createElement("ol",{key:H,dir:b==="auto"?o1():b,tabIndex:-1,ref:X,className:l,"data-sonner-toaster":!0,"data-theme":M,"data-y-position":Y,"data-lifted":R&&C.length>1&&!a,"data-x-position":U,style:{"--front-toast-height":`${((W=I[0])==null?void 0:W.height)||0}px`,"--width":`${i$}px`,"--gap":`${g}px`,...p,...u$(d,h)},onBlur:G=>{B.current&&!G.currentTarget.contains(G.relatedTarget)&&(B.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||B.current||(B.current=!0,D.current=G.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{F||E(!1)},onDragEnd:()=>E(!1),onPointerDown:G=>{G.target instanceof HTMLElement&&G.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},C.filter(G=>!G.position&&q===0||G.position===H).map((G,ne)=>{var J,ie;return Ae.createElement(d$,{key:G.id,icons:j,index:ne,toast:G,defaultRichColors:u,duration:(J=y==null?void 0:y.duration)!=null?J:m,className:y==null?void 0:y.className,descriptionClassName:y==null?void 0:y.descriptionClassName,invert:n,visibleToasts:w,closeButton:(ie=y==null?void 0:y.closeButton)!=null?ie:o,interacting:F,position:H,style:y==null?void 0:y.style,unstyled:y==null?void 0:y.unstyled,classNames:y==null?void 0:y.classNames,cancelButtonStyle:y==null?void 0:y.cancelButtonStyle,actionButtonStyle:y==null?void 0:y.actionButtonStyle,removeToast:V,toasts:C.filter(xe=>xe.position==G.position),heights:I.filter(xe=>xe.position==G.position),setHeights:P,expandByDefault:a,gap:g,loadingIcon:x,expanded:R,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const f$=({...e})=>{const{theme:t="system"}=$6();return s.jsx(h$,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var m$=Q0[" useId ".trim().toString()]||(()=>{}),p$=0;function Jr(e){const[t,n]=_.useState(m$());return Is(()=>{e||n(r=>r??String(p$++))},[e]),e||(t?`radix-${t}`:"")}const g$=["top","right","bottom","left"],no=Math.min,nr=Math.max,Mm=Math.round,Sf=Math.floor,ki=e=>({x:e,y:e}),v$={left:"right",right:"left",bottom:"top",top:"bottom"},x$={start:"end",end:"start"};function ky(e,t,n){return nr(e,no(t,n))}function ca(e,t){return typeof e=="function"?e(t):e}function da(e){return e.split("-")[0]}function ld(e){return e.split("-")[1]}function tw(e){return e==="x"?"y":"x"}function sw(e){return e==="y"?"height":"width"}const y$=new Set(["top","bottom"]);function wi(e){return y$.has(da(e))?"y":"x"}function nw(e){return tw(wi(e))}function b$(e,t,n){n===void 0&&(n=!1);const r=ld(e),i=nw(e),a=sw(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Dm(o)),[o,Dm(o)]}function w$(e){const t=Dm(e);return[Cy(e),t,Cy(t)]}function Cy(e){return e.replace(/start|end/g,t=>x$[t])}const l1=["left","right"],c1=["right","left"],_$=["top","bottom"],j$=["bottom","top"];function N$(e,t,n){switch(e){case"top":case"bottom":return n?t?c1:l1:t?l1:c1;case"left":case"right":return t?_$:j$;default:return[]}}function S$(e,t,n,r){const i=ld(e);let a=N$(da(e),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(Cy)))),a}function Dm(e){return e.replace(/left|right|bottom|top/g,t=>v$[t])}function k$(e){return{top:0,right:0,bottom:0,left:0,...e}}function IT(e){return typeof e!="number"?k$(e):{top:e,right:e,bottom:e,left:e}}function Fm(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function d1(e,t,n){let{reference:r,floating:i}=e;const a=wi(t),o=nw(t),l=sw(o),d=da(t),h=a==="y",f=r.x+r.width/2-i.width/2,u=r.y+r.height/2-i.height/2,m=r[l]/2-i[l]/2;let p;switch(d){case"top":p={x:f,y:r.y-i.height};break;case"bottom":p={x:f,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:u};break;case"left":p={x:r.x-i.width,y:u};break;default:p={x:r.x,y:r.y}}switch(ld(t)){case"start":p[o]-=m*(n&&h?-1:1);break;case"end":p[o]+=m*(n&&h?-1:1);break}return p}const C$=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:u}=d1(h,r,d),m=r,p={},w=0;for(let y=0;y<l.length;y++){const{name:b,fn:g}=l[y],{x,y:j,data:N,reset:S}=await g({x:f,y:u,initialPlacement:r,placement:m,strategy:i,middlewareData:p,rects:h,platform:o,elements:{reference:e,floating:t}});f=x??f,u=j??u,p={...p,[b]:{...p[b],...N}},S&&w<=50&&(w++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(h=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:f,y:u}=d1(h,m,d)),y=-1)}return{x:f,y:u,placement:m,strategy:i,middlewareData:p}};async function Ju(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:d}=e,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:m=!1,padding:p=0}=ca(t,e),w=IT(p),b=l[m?u==="floating"?"reference":"floating":u],g=Fm(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:d})),x=u==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),N=await(a.isElement==null?void 0:a.isElement(j))?await(a.getScale==null?void 0:a.getScale(j))||{x:1,y:1}:{x:1,y:1},S=Fm(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:j,strategy:d}):x);return{top:(g.top-S.top+w.top)/N.y,bottom:(S.bottom-g.bottom+w.bottom)/N.y,left:(g.left-S.left+w.left)/N.x,right:(S.right-g.right+w.right)/N.x}}const E$=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:d}=t,{element:h,padding:f=0}=ca(e,t)||{};if(h==null)return{};const u=IT(f),m={x:n,y:r},p=nw(i),w=sw(p),y=await o.getDimensions(h),b=p==="y",g=b?"top":"left",x=b?"bottom":"right",j=b?"clientHeight":"clientWidth",N=a.reference[w]+a.reference[p]-m[p]-a.floating[w],S=m[p]-a.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let T=C?C[j]:0;(!T||!await(o.isElement==null?void 0:o.isElement(C)))&&(T=l.floating[j]||a.floating[w]);const A=N/2-S/2,I=T/2-y[w]/2-1,P=no(u[g],I),R=no(u[x],I),E=P,F=T-y[w]-R,O=T/2-y[w]/2+A,M=ky(E,O,F),Z=!d.arrow&&ld(i)!=null&&O!==M&&a.reference[w]/2-(O<E?P:R)-y[w]/2<0,X=Z?O<E?O-E:O-F:0;return{[p]:m[p]+X,data:{[p]:M,centerOffset:O-M-X,...Z&&{alignmentOffset:X}},reset:Z}}}),T$=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:d,elements:h}=t,{mainAxis:f=!0,crossAxis:u=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:y=!0,...b}=ca(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const g=da(i),x=wi(l),j=da(l)===l,N=await(d.isRTL==null?void 0:d.isRTL(h.floating)),S=m||(j||!y?[Dm(l)]:w$(l)),C=w!=="none";!m&&C&&S.push(...S$(l,y,w,N));const T=[l,...S],A=await Ju(t,b),I=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&I.push(A[g]),u){const O=b$(i,o,N);I.push(A[O[0]],A[O[1]])}if(P=[...P,{placement:i,overflows:I}],!I.every(O=>O<=0)){var R,E;const O=(((R=a.flip)==null?void 0:R.index)||0)+1,M=T[O];if(M&&(!(u==="alignment"?x!==wi(M):!1)||P.every(z=>z.overflows[0]>0&&wi(z.placement)===x)))return{data:{index:O,overflows:P},reset:{placement:M}};let Z=(E=P.filter(X=>X.overflows[0]<=0).sort((X,z)=>X.overflows[1]-z.overflows[1])[0])==null?void 0:E.placement;if(!Z)switch(p){case"bestFit":{var F;const X=(F=P.filter(z=>{if(C){const D=wi(z.placement);return D===x||D==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(D=>D>0).reduce((D,B)=>D+B,0)]).sort((z,D)=>z[1]-D[1])[0])==null?void 0:F[0];X&&(Z=X);break}case"initialPlacement":Z=l;break}if(i!==Z)return{reset:{placement:Z}}}return{}}}};function u1(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function h1(e){return g$.some(t=>e[t]>=0)}const P$=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=ca(e,t);switch(r){case"referenceHidden":{const a=await Ju(t,{...i,elementContext:"reference"}),o=u1(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:h1(o)}}}case"escaped":{const a=await Ju(t,{...i,altBoundary:!0}),o=u1(a,n.floating);return{data:{escapedOffsets:o,escaped:h1(o)}}}default:return{}}}}},MT=new Set(["left","top"]);async function A$(e,t){const{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=da(n),l=ld(n),d=wi(n)==="y",h=MT.has(o)?-1:1,f=a&&d?-1:1,u=ca(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:w}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof w=="number"&&(p=l==="end"?w*-1:w),d?{x:p*f,y:m*h}:{x:m*h,y:p*f}}const O$=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:a,placement:o,middlewareData:l}=t,d=await A$(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:o}}}}},R$=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:g,y:x}=b;return{x:g,y:x}}},...d}=ca(e,t),h={x:n,y:r},f=await Ju(t,d),u=wi(da(i)),m=tw(u);let p=h[m],w=h[u];if(a){const b=m==="y"?"top":"left",g=m==="y"?"bottom":"right",x=p+f[b],j=p-f[g];p=ky(x,p,j)}if(o){const b=u==="y"?"top":"left",g=u==="y"?"bottom":"right",x=w+f[b],j=w-f[g];w=ky(x,w,j)}const y=l.fn({...t,[m]:p,[u]:w});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[m]:a,[u]:o}}}}}},L$=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:d=!0,crossAxis:h=!0}=ca(e,t),f={x:n,y:r},u=wi(i),m=tw(u);let p=f[m],w=f[u];const y=ca(l,t),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(d){const j=m==="y"?"height":"width",N=a.reference[m]-a.floating[j]+b.mainAxis,S=a.reference[m]+a.reference[j]-b.mainAxis;p<N?p=N:p>S&&(p=S)}if(h){var g,x;const j=m==="y"?"width":"height",N=MT.has(da(i)),S=a.reference[u]-a.floating[j]+(N&&((g=o.offset)==null?void 0:g[u])||0)+(N?0:b.crossAxis),C=a.reference[u]+a.reference[j]+(N?0:((x=o.offset)==null?void 0:x[u])||0)-(N?b.crossAxis:0);w<S?w=S:w>C&&(w=C)}return{[m]:p,[u]:w}}}},I$=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:d=()=>{},...h}=ca(e,t),f=await Ju(t,h),u=da(i),m=ld(i),p=wi(i)==="y",{width:w,height:y}=a.floating;let b,g;u==="top"||u==="bottom"?(b=u,g=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(g=u,b=m==="end"?"top":"bottom");const x=y-f.top-f.bottom,j=w-f.left-f.right,N=no(y-f[b],x),S=no(w-f[g],j),C=!t.middlewareData.shift;let T=N,A=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(T=x),C&&!m){const P=nr(f.left,0),R=nr(f.right,0),E=nr(f.top,0),F=nr(f.bottom,0);p?A=w-2*(P!==0||R!==0?P+R:nr(f.left,f.right)):T=y-2*(E!==0||F!==0?E+F:nr(f.top,f.bottom))}await d({...t,availableWidth:A,availableHeight:T});const I=await o.getDimensions(l.floating);return w!==I.width||y!==I.height?{reset:{rects:!0}}:{}}}};function Vp(){return typeof window<"u"}function cd(e){return DT(e)?(e.nodeName||"").toLowerCase():"#document"}function or(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Di(e){var t;return(t=(DT(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function DT(e){return Vp()?e instanceof Node||e instanceof or(e).Node:!1}function si(e){return Vp()?e instanceof Element||e instanceof or(e).Element:!1}function Ii(e){return Vp()?e instanceof HTMLElement||e instanceof or(e).HTMLElement:!1}function f1(e){return!Vp()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof or(e).ShadowRoot}const M$=new Set(["inline","contents"]);function Th(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ni(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!M$.has(i)}const D$=new Set(["table","td","th"]);function F$(e){return D$.has(cd(e))}const $$=[":popover-open",":modal"];function Up(e){return $$.some(t=>{try{return e.matches(t)}catch{return!1}})}const B$=["transform","translate","scale","rotate","perspective"],z$=["transform","translate","scale","rotate","perspective","filter"],V$=["paint","layout","strict","content"];function rw(e){const t=iw(),n=si(e)?ni(e):e;return B$.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||z$.some(r=>(n.willChange||"").includes(r))||V$.some(r=>(n.contain||"").includes(r))}function U$(e){let t=ro(e);for(;Ii(t)&&!$c(t);){if(rw(t))return t;if(Up(t))return null;t=ro(t)}return null}function iw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const q$=new Set(["html","body","#document"]);function $c(e){return q$.has(cd(e))}function ni(e){return or(e).getComputedStyle(e)}function qp(e){return si(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ro(e){if(cd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||f1(e)&&e.host||Di(e);return f1(t)?t.host:t}function FT(e){const t=ro(e);return $c(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ii(t)&&Th(t)?t:FT(t)}function Qu(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=FT(e),a=i===((r=e.ownerDocument)==null?void 0:r.body),o=or(i);if(a){const l=Ey(o);return t.concat(o,o.visualViewport||[],Th(i)?i:[],l&&n?Qu(l):[])}return t.concat(i,Qu(i,[],n))}function Ey(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $T(e){const t=ni(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ii(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,l=Mm(n)!==a||Mm(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function aw(e){return si(e)?e:e.contextElement}function fc(e){const t=aw(e);if(!Ii(t))return ki(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:a}=$T(t);let o=(a?Mm(n.width):n.width)/r,l=(a?Mm(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const H$=ki(0);function BT(e){const t=or(e);return!iw()||!t.visualViewport?H$:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function W$(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==or(e)?!1:t}function dl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=aw(e);let o=ki(1);t&&(r?si(r)&&(o=fc(r)):o=fc(e));const l=W$(a,n,r)?BT(a):ki(0);let d=(i.left+l.x)/o.x,h=(i.top+l.y)/o.y,f=i.width/o.x,u=i.height/o.y;if(a){const m=or(a),p=r&&si(r)?or(r):r;let w=m,y=Ey(w);for(;y&&r&&p!==w;){const b=fc(y),g=y.getBoundingClientRect(),x=ni(y),j=g.left+(y.clientLeft+parseFloat(x.paddingLeft))*b.x,N=g.top+(y.clientTop+parseFloat(x.paddingTop))*b.y;d*=b.x,h*=b.y,f*=b.x,u*=b.y,d+=j,h+=N,w=or(y),y=Ey(w)}}return Fm({width:f,height:u,x:d,y:h})}function ow(e,t){const n=qp(e).scrollLeft;return t?t.left+n:dl(Di(e)).left+n}function zT(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:ow(e,r)),a=r.top+t.scrollTop;return{x:i,y:a}}function G$(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const a=i==="fixed",o=Di(r),l=t?Up(t.floating):!1;if(r===o||l&&a)return n;let d={scrollLeft:0,scrollTop:0},h=ki(1);const f=ki(0),u=Ii(r);if((u||!u&&!a)&&((cd(r)!=="body"||Th(o))&&(d=qp(r)),Ii(r))){const p=dl(r);h=fc(r),f.x=p.x+r.clientLeft,f.y=p.y+r.clientTop}const m=o&&!u&&!a?zT(o,d,!0):ki(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+f.x+m.x,y:n.y*h.y-d.scrollTop*h.y+f.y+m.y}}function K$(e){return Array.from(e.getClientRects())}function Z$(e){const t=Di(e),n=qp(e),r=e.ownerDocument.body,i=nr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=nr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+ow(e);const l=-n.scrollTop;return ni(r).direction==="rtl"&&(o+=nr(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}function Y$(e,t){const n=or(e),r=Di(e),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,d=0;if(i){a=i.width,o=i.height;const h=iw();(!h||h&&t==="fixed")&&(l=i.offsetLeft,d=i.offsetTop)}return{width:a,height:o,x:l,y:d}}const X$=new Set(["absolute","fixed"]);function J$(e,t){const n=dl(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=Ii(e)?fc(e):ki(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,d=i*a.x,h=r*a.y;return{width:o,height:l,x:d,y:h}}function m1(e,t,n){let r;if(t==="viewport")r=Y$(e,n);else if(t==="document")r=Z$(Di(e));else if(si(t))r=J$(t,n);else{const i=BT(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Fm(r)}function VT(e,t){const n=ro(e);return n===t||!si(n)||$c(n)?!1:ni(n).position==="fixed"||VT(n,t)}function Q$(e,t){const n=t.get(e);if(n)return n;let r=Qu(e,[],!1).filter(l=>si(l)&&cd(l)!=="body"),i=null;const a=ni(e).position==="fixed";let o=a?ro(e):e;for(;si(o)&&!$c(o);){const l=ni(o),d=rw(o);!d&&l.position==="fixed"&&(i=null),(a?!d&&!i:!d&&l.position==="static"&&!!i&&X$.has(i.position)||Th(o)&&!d&&VT(e,o))?r=r.filter(f=>f!==o):i=l,o=ro(o)}return t.set(e,r),r}function e8(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?Up(t)?[]:Q$(t,this._c):[].concat(n),r],l=o[0],d=o.reduce((h,f)=>{const u=m1(t,f,i);return h.top=nr(u.top,h.top),h.right=no(u.right,h.right),h.bottom=no(u.bottom,h.bottom),h.left=nr(u.left,h.left),h},m1(t,l,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function t8(e){const{width:t,height:n}=$T(e);return{width:t,height:n}}function s8(e,t,n){const r=Ii(t),i=Di(t),a=n==="fixed",o=dl(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const d=ki(0);function h(){d.x=ow(i)}if(r||!r&&!a)if((cd(t)!=="body"||Th(i))&&(l=qp(t)),r){const p=dl(t,!0,a,t);d.x=p.x+t.clientLeft,d.y=p.y+t.clientTop}else i&&h();a&&!r&&i&&h();const f=i&&!r&&!a?zT(i,l):ki(0),u=o.left+l.scrollLeft-d.x-f.x,m=o.top+l.scrollTop-d.y-f.y;return{x:u,y:m,width:o.width,height:o.height}}function $v(e){return ni(e).position==="static"}function p1(e,t){if(!Ii(e)||ni(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Di(e)===n&&(n=n.ownerDocument.body),n}function UT(e,t){const n=or(e);if(Up(e))return n;if(!Ii(e)){let i=ro(e);for(;i&&!$c(i);){if(si(i)&&!$v(i))return i;i=ro(i)}return n}let r=p1(e,t);for(;r&&F$(r)&&$v(r);)r=p1(r,t);return r&&$c(r)&&$v(r)&&!rw(r)?n:r||U$(e)||n}const n8=async function(e){const t=this.getOffsetParent||UT,n=this.getDimensions,r=await n(e.floating);return{reference:s8(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function r8(e){return ni(e).direction==="rtl"}const i8={convertOffsetParentRelativeRectToViewportRelativeRect:G$,getDocumentElement:Di,getClippingRect:e8,getOffsetParent:UT,getElementRects:n8,getClientRects:K$,getDimensions:t8,getScale:fc,isElement:si,isRTL:r8};function qT(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function a8(e,t){let n=null,r;const i=Di(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),a();const h=e.getBoundingClientRect(),{left:f,top:u,width:m,height:p}=h;if(l||t(),!m||!p)return;const w=Sf(u),y=Sf(i.clientWidth-(f+m)),b=Sf(i.clientHeight-(u+p)),g=Sf(f),j={rootMargin:-w+"px "+-y+"px "+-b+"px "+-g+"px",threshold:nr(0,no(1,d))||1};let N=!0;function S(C){const T=C[0].intersectionRatio;if(T!==d){if(!N)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!qT(h,e.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(S,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,j)}n.observe(e)}return o(!0),a}function o8(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,h=aw(e),f=i||a?[...h?Qu(h):[],...Qu(t)]:[];f.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),a&&g.addEventListener("resize",n)});const u=h&&l?a8(h,n):null;let m=-1,p=null;o&&(p=new ResizeObserver(g=>{let[x]=g;x&&x.target===h&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var j;(j=p)==null||j.observe(t)})),n()}),h&&!d&&p.observe(h),p.observe(t));let w,y=d?dl(e):null;d&&b();function b(){const g=dl(e);y&&!qT(y,g)&&n(),y=g,w=requestAnimationFrame(b)}return n(),()=>{var g;f.forEach(x=>{i&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),u==null||u(),(g=p)==null||g.disconnect(),p=null,d&&cancelAnimationFrame(w)}}const l8=O$,c8=R$,d8=T$,u8=I$,h8=P$,g1=E$,f8=L$,m8=(e,t,n)=>{const r=new Map,i={platform:i8,...n},a={...i.platform,_c:r};return C$(e,t,{...i,platform:a})};var p8=typeof document<"u",g8=function(){},Jf=p8?_.useLayoutEffect:g8;function $m(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!$m(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&e.$$typeof)&&!$m(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function HT(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function v1(e,t){const n=HT(e);return Math.round(t*n)/n}function Bv(e){const t=_.useRef(e);return Jf(()=>{t.current=e}),t}function v8(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:d,open:h}=e,[f,u]=_.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=_.useState(r);$m(m,r)||p(r);const[w,y]=_.useState(null),[b,g]=_.useState(null),x=_.useCallback(z=>{z!==C.current&&(C.current=z,y(z))},[]),j=_.useCallback(z=>{z!==T.current&&(T.current=z,g(z))},[]),N=a||w,S=o||b,C=_.useRef(null),T=_.useRef(null),A=_.useRef(f),I=d!=null,P=Bv(d),R=Bv(i),E=Bv(h),F=_.useCallback(()=>{if(!C.current||!T.current)return;const z={placement:t,strategy:n,middleware:m};R.current&&(z.platform=R.current),m8(C.current,T.current,z).then(D=>{const B={...D,isPositioned:E.current!==!1};O.current&&!$m(A.current,B)&&(A.current=B,fo.flushSync(()=>{u(B)}))})},[m,t,n,R,E]);Jf(()=>{h===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,u(z=>({...z,isPositioned:!1})))},[h]);const O=_.useRef(!1);Jf(()=>(O.current=!0,()=>{O.current=!1}),[]),Jf(()=>{if(N&&(C.current=N),S&&(T.current=S),N&&S){if(P.current)return P.current(N,S,F);F()}},[N,S,F,P,I]);const M=_.useMemo(()=>({reference:C,floating:T,setReference:x,setFloating:j}),[x,j]),Z=_.useMemo(()=>({reference:N,floating:S}),[N,S]),X=_.useMemo(()=>{const z={position:n,left:0,top:0};if(!Z.floating)return z;const D=v1(Z.floating,f.x),B=v1(Z.floating,f.y);return l?{...z,transform:"translate("+D+"px, "+B+"px)",...HT(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:B}},[n,l,Z.floating,f.x,f.y]);return _.useMemo(()=>({...f,update:F,refs:M,elements:Z,floatingStyles:X}),[f,F,M,Z,X])}const x8=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?g1({element:r.current,padding:i}).fn(n):{}:r?g1({element:r,padding:i}).fn(n):{}}}},y8=(e,t)=>({...l8(e),options:[e,t]}),b8=(e,t)=>({...c8(e),options:[e,t]}),w8=(e,t)=>({...f8(e),options:[e,t]}),_8=(e,t)=>({...d8(e),options:[e,t]}),j8=(e,t)=>({...u8(e),options:[e,t]}),N8=(e,t)=>({...h8(e),options:[e,t]}),S8=(e,t)=>({...x8(e),options:[e,t]});var k8="Arrow",WT=_.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...a}=e;return s.jsx(ut.svg,{...a,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});WT.displayName=k8;var C8=WT;function Hp(e){const[t,n]=_.useState(void 0);return Is(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const d=a.borderBoxSize,h=Array.isArray(d)?d[0]:d;o=h.inlineSize,l=h.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var lw="Popper",[GT,dd]=_n(lw),[E8,KT]=GT(lw),ZT=e=>{const{__scopePopper:t,children:n}=e,[r,i]=_.useState(null);return s.jsx(E8,{scope:t,anchor:r,onAnchorChange:i,children:n})};ZT.displayName=lw;var YT="PopperAnchor",XT=_.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,a=KT(YT,n),o=_.useRef(null),l=jt(t,o);return _.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(ut.div,{...i,ref:l})});XT.displayName=YT;var cw="PopperContent",[T8,P8]=GT(cw),JT=_.forwardRef((e,t)=>{var G,ne,J,ie,xe,Se;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:u="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:w,...y}=e,b=KT(cw,n),[g,x]=_.useState(null),j=jt(t,ue=>x(ue)),[N,S]=_.useState(null),C=Hp(N),T=(C==null?void 0:C.width)??0,A=(C==null?void 0:C.height)??0,I=r+(a!=="center"?"-"+a:""),P=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},R=Array.isArray(h)?h:[h],E=R.length>0,F={padding:P,boundary:R.filter(O8),altBoundary:E},{refs:O,floatingStyles:M,placement:Z,isPositioned:X,middlewareData:z}=v8({strategy:"fixed",placement:I,whileElementsMounted:(...ue)=>o8(...ue,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[y8({mainAxis:i+A,alignmentAxis:o}),d&&b8({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?w8():void 0,...F}),d&&_8({...F}),j8({...F,apply:({elements:ue,rects:he,availableWidth:Q,availableHeight:ye})=>{const{width:be,height:ce}=he.reference,ge=ue.floating.style;ge.setProperty("--radix-popper-available-width",`${Q}px`),ge.setProperty("--radix-popper-available-height",`${ye}px`),ge.setProperty("--radix-popper-anchor-width",`${be}px`),ge.setProperty("--radix-popper-anchor-height",`${ce}px`)}}),N&&S8({element:N,padding:l}),R8({arrowWidth:T,arrowHeight:A}),m&&N8({strategy:"referenceHidden",...F})]}),[D,B]=tP(Z),V=ks(w);Is(()=>{X&&(V==null||V())},[X,V]);const H=(G=z.arrow)==null?void 0:G.x,q=(ne=z.arrow)==null?void 0:ne.y,W=((J=z.arrow)==null?void 0:J.centerOffset)!==0,[Y,U]=_.useState();return Is(()=>{g&&U(window.getComputedStyle(g).zIndex)},[g]),s.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:X?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(ie=z.transformOrigin)==null?void 0:ie.x,(xe=z.transformOrigin)==null?void 0:xe.y].join(" "),...((Se=z.hide)==null?void 0:Se.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(T8,{scope:n,placedSide:D,onArrowChange:S,arrowX:H,arrowY:q,shouldHideArrow:W,children:s.jsx(ut.div,{"data-side":D,"data-align":B,...y,ref:j,style:{...y.style,animation:X?void 0:"none"}})})})});JT.displayName=cw;var QT="PopperArrow",A8={top:"bottom",right:"left",bottom:"top",left:"right"},eP=_.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,a=P8(QT,r),o=A8[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(C8,{...i,ref:n,style:{...i.style,display:"block"}})})});eP.displayName=QT;function O8(e){return e!==null}var R8=e=>({name:"transformOrigin",options:e,fn(t){var b,g,x;const{placement:n,rects:r,middlewareData:i}=t,o=((b=i.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[h,f]=tP(n),u={start:"0%",center:"50%",end:"100%"}[f],m=(((g=i.arrow)==null?void 0:g.x)??0)+l/2,p=(((x=i.arrow)==null?void 0:x.y)??0)+d/2;let w="",y="";return h==="bottom"?(w=o?u:`${m}px`,y=`${-d}px`):h==="top"?(w=o?u:`${m}px`,y=`${r.floating.height+d}px`):h==="right"?(w=`${-d}px`,y=o?u:`${p}px`):h==="left"&&(w=`${r.floating.width+d}px`,y=o?u:`${p}px`),{data:{x:w,y}}}});function tP(e){const[t,n="center"]=e.split("-");return[t,n]}var dw=ZT,uw=XT,hw=JT,fw=eP,[Wp,Xie]=_n("Tooltip",[dd]),Gp=dd(),sP="TooltipProvider",L8=700,Ty="tooltip.open",[I8,mw]=Wp(sP),nP=e=>{const{__scopeTooltip:t,delayDuration:n=L8,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=e,o=_.useRef(!0),l=_.useRef(!1),d=_.useRef(0);return _.useEffect(()=>{const h=d.current;return()=>window.clearTimeout(h)},[]),s.jsx(I8,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:_.useCallback(h=>{l.current=h},[]),disableHoverableContent:i,children:a})};nP.displayName=sP;var eh="Tooltip",[M8,Kp]=Wp(eh),rP=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,d=mw(eh,e.__scopeTooltip),h=Gp(t),[f,u]=_.useState(null),m=Jr(),p=_.useRef(0),w=o??d.disableHoverableContent,y=l??d.delayDuration,b=_.useRef(!1),[g,x]=ei({prop:r,defaultProp:i??!1,onChange:T=>{T?(d.onOpen(),document.dispatchEvent(new CustomEvent(Ty))):d.onClose(),a==null||a(T)},caller:eh}),j=_.useMemo(()=>g?b.current?"delayed-open":"instant-open":"closed",[g]),N=_.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b.current=!1,x(!0)},[x]),S=_.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x(!1)},[x]),C=_.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{b.current=!0,x(!0),p.current=0},y)},[y,x]);return _.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),s.jsx(dw,{...h,children:s.jsx(M8,{scope:t,contentId:m,open:g,stateAttribute:j,trigger:f,onTriggerChange:u,onTriggerEnter:_.useCallback(()=>{d.isOpenDelayedRef.current?C():N()},[d.isOpenDelayedRef,C,N]),onTriggerLeave:_.useCallback(()=>{w?S():(window.clearTimeout(p.current),p.current=0)},[S,w]),onOpen:N,onClose:S,disableHoverableContent:w,children:n})})};rP.displayName=eh;var Py="TooltipTrigger",iP=_.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Kp(Py,n),a=mw(Py,n),o=Gp(n),l=_.useRef(null),d=jt(t,l,i.onTriggerChange),h=_.useRef(!1),f=_.useRef(!1),u=_.useCallback(()=>h.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),s.jsx(uw,{asChild:!0,...o,children:s.jsx(ut.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:d,onPointerMove:Ke(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ke(e.onPointerLeave,()=>{i.onTriggerLeave(),f.current=!1}),onPointerDown:Ke(e.onPointerDown,()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Ke(e.onFocus,()=>{h.current||i.onOpen()}),onBlur:Ke(e.onBlur,i.onClose),onClick:Ke(e.onClick,i.onClose)})})});iP.displayName=Py;var D8="TooltipPortal",[Jie,F8]=Wp(D8,{forceMount:void 0}),Bc="TooltipContent",aP=_.forwardRef((e,t)=>{const n=F8(Bc,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=e,o=Kp(Bc,e.__scopeTooltip);return s.jsx(hn,{present:r||o.open,children:o.disableHoverableContent?s.jsx(oP,{side:i,...a,ref:t}):s.jsx($8,{side:i,...a,ref:t})})}),$8=_.forwardRef((e,t)=>{const n=Kp(Bc,e.__scopeTooltip),r=mw(Bc,e.__scopeTooltip),i=_.useRef(null),a=jt(t,i),[o,l]=_.useState(null),{trigger:d,onClose:h}=n,f=i.current,{onPointerInTransitChange:u}=r,m=_.useCallback(()=>{l(null),u(!1)},[u]),p=_.useCallback((w,y)=>{const b=w.currentTarget,g={x:w.clientX,y:w.clientY},x=q8(g,b.getBoundingClientRect()),j=H8(g,x),N=W8(y.getBoundingClientRect()),S=K8([...j,...N]);l(S),u(!0)},[u]);return _.useEffect(()=>()=>m(),[m]),_.useEffect(()=>{if(d&&f){const w=b=>p(b,f),y=b=>p(b,d);return d.addEventListener("pointerleave",w),f.addEventListener("pointerleave",y),()=>{d.removeEventListener("pointerleave",w),f.removeEventListener("pointerleave",y)}}},[d,f,p,m]),_.useEffect(()=>{if(o){const w=y=>{const b=y.target,g={x:y.clientX,y:y.clientY},x=(d==null?void 0:d.contains(b))||(f==null?void 0:f.contains(b)),j=!G8(g,o);x?m():j&&(m(),h())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[d,f,o,h,m]),s.jsx(oP,{...e,ref:a})}),[B8,z8]=Wp(eh,{isInside:!1}),V8=KD("TooltipContent"),oP=_.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,d=Kp(Bc,n),h=Gp(n),{onClose:f}=d;return _.useEffect(()=>(document.addEventListener(Ty,f),()=>document.removeEventListener(Ty,f)),[f]),_.useEffect(()=>{if(d.trigger){const u=m=>{const p=m.target;p!=null&&p.contains(d.trigger)&&f()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[d.trigger,f]),s.jsx(id,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:u=>u.preventDefault(),onDismiss:f,children:s.jsxs(hw,{"data-state":d.stateAttribute,...h,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(V8,{children:r}),s.jsx(B8,{scope:n,isInside:!0,children:s.jsx(gF,{id:d.contentId,role:"tooltip",children:i||r})})]})})});aP.displayName=Bc;var lP="TooltipArrow",U8=_.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Gp(n);return z8(lP,n).isInside?null:s.jsx(fw,{...i,...r,ref:t})});U8.displayName=lP;function q8(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function H8(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function W8(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function G8(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],d=t[o],h=l.x,f=l.y,u=d.x,m=d.y;f>r!=m>r&&n<(u-h)*(r-f)/(m-f)+h&&(i=!i)}return i}function K8(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Z8(t)}function Z8(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Y8=nP,X8=rP,J8=iP,cP=aP;const Q8=Y8,zv=X8,Vv=J8,Qf=_.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(cP,{ref:r,sideOffset:t,className:at("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));Qf.displayName=cP.displayName;var Zp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yp=typeof window>"u"||"Deno"in globalThis;function Fr(){}function eB(e,t){return typeof e=="function"?e(t):e}function tB(e){return typeof e=="number"&&e>=0&&e!==1/0}function sB(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ay(e,t){return typeof e=="function"?e(t):e}function nB(e,t){return typeof e=="function"?e(t):e}function x1(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==pw(o,t.options))return!1}else if(!sh(t.queryKey,o))return!1}if(n!=="all"){const d=t.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function y1(e,t){const{exact:n,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(th(t.options.mutationKey)!==th(a))return!1}else if(!sh(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function pw(e,t){return((t==null?void 0:t.queryKeyHashFn)||th)(e)}function th(e){return JSON.stringify(e,(t,n)=>Oy(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function sh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>sh(e[n],t[n])):!1}function dP(e,t){if(e===t)return e;const n=b1(e)&&b1(t);if(n||Oy(e)&&Oy(t)){const r=n?e:Object.keys(e),i=r.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{},d=new Set(r);let h=0;for(let f=0;f<o;f++){const u=n?f:a[f];(!n&&d.has(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,h++):(l[u]=dP(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&h++)}return i===o&&h===i?e:l}return t}function b1(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Oy(e){if(!w1(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!w1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function w1(e){return Object.prototype.toString.call(e)==="[object Object]"}function rB(e){return new Promise(t=>{setTimeout(t,e)})}function iB(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?dP(e,t):t}function aB(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function oB(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var gw=Symbol();function uP(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===gw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var zo,Ia,jc,b2,lB=(b2=class extends Zp{constructor(){super();Bt(this,zo);Bt(this,Ia);Bt(this,jc);Nt(this,jc,t=>{if(!Yp&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Le(this,Ia)||this.setEventListener(Le(this,jc))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,Ia))==null||t.call(this),Nt(this,Ia,void 0))}setEventListener(t){var n;Nt(this,jc,t),(n=Le(this,Ia))==null||n.call(this),Nt(this,Ia,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Le(this,zo)!==t&&(Nt(this,zo,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Le(this,zo)=="boolean"?Le(this,zo):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},zo=new WeakMap,Ia=new WeakMap,jc=new WeakMap,b2),hP=new lB,Nc,Ma,Sc,w2,cB=(w2=class extends Zp{constructor(){super();Bt(this,Nc,!0);Bt(this,Ma);Bt(this,Sc);Nt(this,Sc,t=>{if(!Yp&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Le(this,Ma)||this.setEventListener(Le(this,Sc))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,Ma))==null||t.call(this),Nt(this,Ma,void 0))}setEventListener(t){var n;Nt(this,Sc,t),(n=Le(this,Ma))==null||n.call(this),Nt(this,Ma,t(this.setOnline.bind(this)))}setOnline(t){Le(this,Nc)!==t&&(Nt(this,Nc,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Le(this,Nc)}},Nc=new WeakMap,Ma=new WeakMap,Sc=new WeakMap,w2),Bm=new cB;function dB(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}function uB(e){return Math.min(1e3*2**e,3e4)}function fP(e){return(e??"online")==="online"?Bm.isOnline():!0}var mP=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Uv(e){return e instanceof mP}function pP(e){let t=!1,n=0,r=!1,i;const a=dB(),o=y=>{var b;r||(m(new mP(y)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},d=()=>{t=!1},h=()=>hP.isFocused()&&(e.networkMode==="always"||Bm.isOnline())&&e.canRun(),f=()=>fP(e.networkMode)&&e.canRun(),u=y=>{var b;r||(r=!0,(b=e.onSuccess)==null||b.call(e,y),i==null||i(),a.resolve(y))},m=y=>{var b;r||(r=!0,(b=e.onError)==null||b.call(e,y),i==null||i(),a.reject(y))},p=()=>new Promise(y=>{var b;i=g=>{(r||h())&&y(g)},(b=e.onPause)==null||b.call(e)}).then(()=>{var y;i=void 0,r||(y=e.onContinue)==null||y.call(e)}),w=()=>{if(r)return;let y;const b=n===0?e.initialPromise:void 0;try{y=b??e.fn()}catch(g){y=Promise.reject(g)}Promise.resolve(y).then(u).catch(g=>{var C;if(r)return;const x=e.retry??(Yp?0:3),j=e.retryDelay??uB,N=typeof j=="function"?j(n,g):j,S=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,g);if(t||!S){m(g);return}n++,(C=e.onFail)==null||C.call(e,n,g),rB(N).then(()=>h()?void 0:p()).then(()=>{t?m(g):w()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:d,canStart:f,start:()=>(f()?w():p().then(w),a)}}var hB=e=>setTimeout(e,0);function fB(){let e=[],t=0,n=l=>{l()},r=l=>{l()},i=hB;const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{r(()=>{l.forEach(d=>{n(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{a(()=>{l(...d)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var En=fB(),Vo,_2,gP=(_2=class{constructor(){Bt(this,Vo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),tB(this.gcTime)&&Nt(this,Vo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Yp?1/0:5*60*1e3))}clearGcTimeout(){Le(this,Vo)&&(clearTimeout(Le(this,Vo)),Nt(this,Vo,void 0))}},Vo=new WeakMap,_2),kc,Uo,xr,qo,gn,ph,Ho,$r,Gi,j2,mB=(j2=class extends gP{constructor(t){super();Bt(this,$r);Bt(this,kc);Bt(this,Uo);Bt(this,xr);Bt(this,qo);Bt(this,gn);Bt(this,ph);Bt(this,Ho);Nt(this,Ho,!1),Nt(this,ph,t.defaultOptions),this.setOptions(t.options),this.observers=[],Nt(this,qo,t.client),Nt(this,xr,Le(this,qo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Nt(this,kc,gB(this.options)),this.state=t.state??Le(this,kc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Le(this,gn))==null?void 0:t.promise}setOptions(t){this.options={...Le(this,ph),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Le(this,xr).remove(this)}setData(t,n){const r=iB(this.state.data,t,this.options);return fn(this,$r,Gi).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){fn(this,$r,Gi).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=Le(this,gn))==null?void 0:r.promise;return(i=Le(this,gn))==null||i.cancel(t),n?n.then(Fr).catch(Fr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Le(this,kc))}isActive(){return this.observers.some(t=>nB(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ay(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!sB(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Le(this,gn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Le(this,gn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Le(this,xr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Le(this,gn)&&(Le(this,Ho)?Le(this,gn).cancel({revert:!0}):Le(this,gn).cancelRetry()),this.scheduleGc()),Le(this,xr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||fn(this,$r,Gi).call(this,{type:"invalidate"})}fetch(t,n){var h,f,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Le(this,gn))return Le(this,gn).continueRetry(),Le(this,gn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const r=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Nt(this,Ho,!0),r.signal)})},a=()=>{const m=uP(this.options,n),w=(()=>{const y={client:Le(this,qo),queryKey:this.queryKey,meta:this.meta};return i(y),y})();return Nt(this,Ho,!1),this.options.persister?this.options.persister(m,w,this):m(w)},l=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Le(this,qo),state:this.state,fetchFn:a};return i(m),m})();(h=this.options.behavior)==null||h.onFetch(l,this),Nt(this,Uo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&fn(this,$r,Gi).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta});const d=m=>{var p,w,y,b;Uv(m)&&m.silent||fn(this,$r,Gi).call(this,{type:"error",error:m}),Uv(m)||((w=(p=Le(this,xr).config).onError)==null||w.call(p,m,this),(b=(y=Le(this,xr).config).onSettled)==null||b.call(y,this.state.data,m,this)),this.scheduleGc()};return Nt(this,gn,pP({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:m=>{var p,w,y,b;if(m===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(g){d(g);return}(w=(p=Le(this,xr).config).onSuccess)==null||w.call(p,m,this),(b=(y=Le(this,xr).config).onSettled)==null||b.call(y,m,this.state.error,this),this.scheduleGc()},onError:d,onFail:(m,p)=>{fn(this,$r,Gi).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{fn(this,$r,Gi).call(this,{type:"pause"})},onContinue:()=>{fn(this,$r,Gi).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Le(this,gn).start()}},kc=new WeakMap,Uo=new WeakMap,xr=new WeakMap,qo=new WeakMap,gn=new WeakMap,ph=new WeakMap,Ho=new WeakMap,$r=new WeakSet,Gi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...pB(r.data,this.options),fetchMeta:t.meta??null};case"success":return Nt(this,Uo,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Uv(i)&&i.revert&&Le(this,Uo)?{...Le(this,Uo),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),En.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Le(this,xr).notify({query:this,type:"updated",action:t})})},j2);function pB(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fP(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function gB(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var mi,N2,vB=(N2=class extends Zp{constructor(t={}){super();Bt(this,mi);this.config=t,Nt(this,mi,new Map)}build(t,n,r){const i=n.queryKey,a=n.queryHash??pw(i,n);let o=this.get(a);return o||(o=new mB({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){Le(this,mi).has(t.queryHash)||(Le(this,mi).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Le(this,mi).get(t.queryHash);n&&(t.destroy(),n===t&&Le(this,mi).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){En.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Le(this,mi).get(t)}getAll(){return[...Le(this,mi).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>x1(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>x1(t,r)):n}notify(t){En.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){En.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){En.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},mi=new WeakMap,N2),pi,Sn,Wo,gi,Ca,S2,xB=(S2=class extends gP{constructor(t){super();Bt(this,gi);Bt(this,pi);Bt(this,Sn);Bt(this,Wo);this.mutationId=t.mutationId,Nt(this,Sn,t.mutationCache),Nt(this,pi,[]),this.state=t.state||yB(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Le(this,pi).includes(t)||(Le(this,pi).push(t),this.clearGcTimeout(),Le(this,Sn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Nt(this,pi,Le(this,pi).filter(n=>n!==t)),this.scheduleGc(),Le(this,Sn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Le(this,pi).length||(this.state.status==="pending"?this.scheduleGc():Le(this,Sn).remove(this))}continue(){var t;return((t=Le(this,Wo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,l,d,h,f,u,m,p,w,y,b,g,x,j,N,S,C,T,A;const n=()=>{fn(this,gi,Ca).call(this,{type:"continue"})};Nt(this,Wo,pP({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,P)=>{fn(this,gi,Ca).call(this,{type:"failed",failureCount:I,error:P})},onPause:()=>{fn(this,gi,Ca).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Le(this,Sn).canRun(this)}));const r=this.state.status==="pending",i=!Le(this,Wo).canStart();try{if(r)n();else{fn(this,gi,Ca).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(a=Le(this,Sn).config).onMutate)==null?void 0:o.call(a,t,this));const P=await((d=(l=this.options).onMutate)==null?void 0:d.call(l,t));P!==this.state.context&&fn(this,gi,Ca).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const I=await Le(this,Wo).start();return await((f=(h=Le(this,Sn).config).onSuccess)==null?void 0:f.call(h,I,t,this.state.context,this)),await((m=(u=this.options).onSuccess)==null?void 0:m.call(u,I,t,this.state.context)),await((w=(p=Le(this,Sn).config).onSettled)==null?void 0:w.call(p,I,null,this.state.variables,this.state.context,this)),await((b=(y=this.options).onSettled)==null?void 0:b.call(y,I,null,t,this.state.context)),fn(this,gi,Ca).call(this,{type:"success",data:I}),I}catch(I){try{throw await((x=(g=Le(this,Sn).config).onError)==null?void 0:x.call(g,I,t,this.state.context,this)),await((N=(j=this.options).onError)==null?void 0:N.call(j,I,t,this.state.context)),await((C=(S=Le(this,Sn).config).onSettled)==null?void 0:C.call(S,void 0,I,this.state.variables,this.state.context,this)),await((A=(T=this.options).onSettled)==null?void 0:A.call(T,void 0,I,t,this.state.context)),I}finally{fn(this,gi,Ca).call(this,{type:"error",error:I})}}finally{Le(this,Sn).runNext(this)}}},pi=new WeakMap,Sn=new WeakMap,Wo=new WeakMap,gi=new WeakSet,Ca=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),En.batch(()=>{Le(this,pi).forEach(r=>{r.onMutationUpdate(t)}),Le(this,Sn).notify({mutation:this,type:"updated",action:t})})},S2);function yB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ji,Br,gh,k2,bB=(k2=class extends Zp{constructor(t={}){super();Bt(this,Ji);Bt(this,Br);Bt(this,gh);this.config=t,Nt(this,Ji,new Set),Nt(this,Br,new Map),Nt(this,gh,0)}build(t,n,r){const i=new xB({mutationCache:this,mutationId:++nf(this,gh)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){Le(this,Ji).add(t);const n=kf(t);if(typeof n=="string"){const r=Le(this,Br).get(n);r?r.push(t):Le(this,Br).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Le(this,Ji).delete(t)){const n=kf(t);if(typeof n=="string"){const r=Le(this,Br).get(n);if(r)if(r.length>1){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}else r[0]===t&&Le(this,Br).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=kf(t);if(typeof n=="string"){const r=Le(this,Br).get(n),i=r==null?void 0:r.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var r;const n=kf(t);if(typeof n=="string"){const i=(r=Le(this,Br).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){En.batch(()=>{Le(this,Ji).forEach(t=>{this.notify({type:"removed",mutation:t})}),Le(this,Ji).clear(),Le(this,Br).clear()})}getAll(){return Array.from(Le(this,Ji))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>y1(n,r))}findAll(t={}){return this.getAll().filter(n=>y1(t,n))}notify(t){En.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return En.batch(()=>Promise.all(t.map(n=>n.continue().catch(Fr))))}},Ji=new WeakMap,Br=new WeakMap,gh=new WeakMap,k2);function kf(e){var t;return(t=e.options.scope)==null?void 0:t.id}function _1(e){return{onFetch:(t,n)=>{var f,u,m,p,w;const r=t.options,i=(m=(u=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:u.fetchMore)==null?void 0:m.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const h=async()=>{let y=!1;const b=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},g=uP(t.options,t.fetchOptions),x=async(j,N,S)=>{if(y)return Promise.reject();if(N==null&&j.pages.length)return Promise.resolve(j);const T=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:N,direction:S?"backward":"forward",meta:t.options.meta};return b(R),R})(),A=await g(T),{maxPages:I}=t.options,P=S?oB:aB;return{pages:P(j.pages,A,I),pageParams:P(j.pageParams,N,I)}};if(i&&a.length){const j=i==="backward",N=j?wB:j1,S={pages:a,pageParams:o},C=N(r,S);l=await x(S,C,j)}else{const j=e??a.length;do{const N=d===0?o[0]??r.initialPageParam:j1(r,l);if(d>0&&N==null)break;l=await x(l,N),d++}while(d<j)}return l};t.options.persister?t.fetchFn=()=>{var y,b;return(b=(y=t.options).persister)==null?void 0:b.call(y,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function j1(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function wB(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var _s,Da,Fa,Cc,Ec,$a,Tc,Pc,C2,_B=(C2=class{constructor(e={}){Bt(this,_s);Bt(this,Da);Bt(this,Fa);Bt(this,Cc);Bt(this,Ec);Bt(this,$a);Bt(this,Tc);Bt(this,Pc);Nt(this,_s,e.queryCache||new vB),Nt(this,Da,e.mutationCache||new bB),Nt(this,Fa,e.defaultOptions||{}),Nt(this,Cc,new Map),Nt(this,Ec,new Map),Nt(this,$a,0)}mount(){nf(this,$a)._++,Le(this,$a)===1&&(Nt(this,Tc,hP.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,_s).onFocus())})),Nt(this,Pc,Bm.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,_s).onOnline())})))}unmount(){var e,t;nf(this,$a)._--,Le(this,$a)===0&&((e=Le(this,Tc))==null||e.call(this),Nt(this,Tc,void 0),(t=Le(this,Pc))==null||t.call(this),Nt(this,Pc,void 0))}isFetching(e){return Le(this,_s).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Le(this,Da).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Le(this,_s).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Le(this,_s).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Ay(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Le(this,_s).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=Le(this,_s).get(r.queryHash),a=i==null?void 0:i.state.data,o=eB(t,a);if(o!==void 0)return Le(this,_s).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return En.batch(()=>Le(this,_s).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Le(this,_s).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Le(this,_s);En.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Le(this,_s);return En.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=En.batch(()=>Le(this,_s).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(Fr).catch(Fr)}invalidateQueries(e,t={}){return En.batch(()=>(Le(this,_s).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=En.batch(()=>Le(this,_s).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(Fr)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Fr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Le(this,_s).build(this,t);return n.isStaleByTime(Ay(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Fr).catch(Fr)}fetchInfiniteQuery(e){return e.behavior=_1(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Fr).catch(Fr)}ensureInfiniteQueryData(e){return e.behavior=_1(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Bm.isOnline()?Le(this,Da).resumePausedMutations():Promise.resolve()}getQueryCache(){return Le(this,_s)}getMutationCache(){return Le(this,Da)}getDefaultOptions(){return Le(this,Fa)}setDefaultOptions(e){Nt(this,Fa,e)}setQueryDefaults(e,t){Le(this,Cc).set(th(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Le(this,Cc).values()],n={};return t.forEach(r=>{sh(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Le(this,Ec).set(th(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Le(this,Ec).values()],n={};return t.forEach(r=>{sh(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Le(this,Fa).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=pw(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===gw&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Le(this,Fa).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Le(this,_s).clear(),Le(this,Da).clear()}},_s=new WeakMap,Da=new WeakMap,Fa=new WeakMap,Cc=new WeakMap,Ec=new WeakMap,$a=new WeakMap,Tc=new WeakMap,Pc=new WeakMap,C2),jB=_.createContext(void 0),NB=({client:e,children:t})=>(_.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(jB.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nh.apply(this,arguments)}var Va;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Va||(Va={}));const N1="popstate";function SB(e){e===void 0&&(e={});function t(r,i){let{pathname:a,search:o,hash:l}=r.location;return Ry("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:xP(i)}return CB(t,n,null,e)}function Hs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kB(){return Math.random().toString(36).substr(2,8)}function S1(e,t){return{usr:e.state,key:e.key,idx:t}}function Ry(e,t,n,r){return n===void 0&&(n=null),nh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ud(t):t,{state:n,key:t&&t.key||r||kB()})}function xP(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ud(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function CB(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,l=Va.Pop,d=null,h=f();h==null&&(h=0,o.replaceState(nh({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function u(){l=Va.Pop;let b=f(),g=b==null?null:b-h;h=b,d&&d({action:l,location:y.location,delta:g})}function m(b,g){l=Va.Push;let x=Ry(y.location,b,g);h=f()+1;let j=S1(x,h),N=y.createHref(x);try{o.pushState(j,"",N)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(N)}a&&d&&d({action:l,location:y.location,delta:1})}function p(b,g){l=Va.Replace;let x=Ry(y.location,b,g);h=f();let j=S1(x,h),N=y.createHref(x);o.replaceState(j,"",N),a&&d&&d({action:l,location:y.location,delta:0})}function w(b){let g=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof b=="string"?b:xP(b);return x=x.replace(/ $/,"%20"),Hs(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let y={get action(){return l},get location(){return e(i,o)},listen(b){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(N1,u),d=b,()=>{i.removeEventListener(N1,u),d=null}},createHref(b){return t(i,b)},createURL:w,encodeLocation(b){let g=w(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:p,go(b){return o.go(b)}};return y}var k1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(k1||(k1={}));function EB(e,t,n){return n===void 0&&(n="/"),TB(e,t,n,!1)}function TB(e,t,n,r){let i=typeof t=="string"?ud(t):t,a=wP(i.pathname||"/",n);if(a==null)return null;let o=yP(e);PB(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let h=zB(a);l=$B(o[d],h,r)}return l}function yP(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,l)=>{let d={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};d.relativePath.startsWith("/")&&(Hs(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let h=Xo([r,d.relativePath]),f=n.concat(d);a.children&&a.children.length>0&&(Hs(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),yP(a.children,t,f,h)),!(a.path==null&&!a.index)&&t.push({path:h,score:DB(h,a.index),routesMeta:f})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let d of bP(a.path))i(a,o,d)}),t}function bP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=bP(r.join("/")),l=[];return l.push(...o.map(d=>d===""?a:[a,d].join("/"))),i&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function PB(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:FB(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const AB=/^:[\w-]+$/,OB=3,RB=2,LB=1,IB=10,MB=-2,C1=e=>e==="*";function DB(e,t){let n=e.split("/"),r=n.length;return n.some(C1)&&(r+=MB),t&&(r+=RB),n.filter(i=>!C1(i)).reduce((i,a)=>i+(AB.test(a)?OB:a===""?LB:IB),r)}function FB(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function $B(e,t,n){let{routesMeta:r}=e,i={},a="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],h=l===r.length-1,f=a==="/"?t:t.slice(a.length)||"/",u=E1({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),m=d.route;if(!u&&h&&n&&!r[r.length-1].route.index&&(u=E1({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Xo([a,u.pathname]),pathnameBase:GB(Xo([a,u.pathnameBase])),route:m}),u.pathnameBase!=="/"&&(a=Xo([a,u.pathnameBase]))}return o}function E1(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=BB(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,f,u)=>{let{paramName:m,isOptional:p}=f;if(m==="*"){let y=l[u]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const w=l[u];return p&&!w?h[m]=void 0:h[m]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:e}}function BB(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),vP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function zB(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function VB(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ud(e):e;return{pathname:n?n.startsWith("/")?n:UB(n,t):t,search:KB(r),hash:ZB(i)}}function UB(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function qv(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qB(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function HB(e,t){let n=qB(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function WB(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ud(e):(i=nh({},e),Hs(!i.pathname||!i.pathname.includes("?"),qv("?","pathname","search",i)),Hs(!i.pathname||!i.pathname.includes("#"),qv("#","pathname","hash",i)),Hs(!i.search||!i.search.includes("#"),qv("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let u=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),u-=1;i.pathname=m.join("/")}l=u>=0?t[u]:"/"}let d=VB(i,l),h=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}const Xo=e=>e.join("/").replace(/\/\/+/g,"/"),GB=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ZB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function YB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const _P=["post","put","patch","delete"];new Set(_P);const XB=["get",..._P];new Set(XB);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rh(){return rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rh.apply(this,arguments)}const vw=_.createContext(null),JB=_.createContext(null),Xp=_.createContext(null),Jp=_.createContext(null),wl=_.createContext({outlet:null,matches:[],isDataRoute:!1}),jP=_.createContext(null);function Qp(){return _.useContext(Jp)!=null}function Dn(){return Qp()||Hs(!1),_.useContext(Jp).location}function NP(e){_.useContext(Xp).static||_.useLayoutEffect(e)}function lt(){let{isDataRoute:e}=_.useContext(wl);return e?uz():QB()}function QB(){Qp()||Hs(!1);let e=_.useContext(vw),{basename:t,future:n,navigator:r}=_.useContext(Xp),{matches:i}=_.useContext(wl),{pathname:a}=Dn(),o=JSON.stringify(HB(i,n.v7_relativeSplatPath)),l=_.useRef(!1);return NP(()=>{l.current=!0}),_.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let u=WB(h,JSON.parse(o),a,f.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Xo([t,u.pathname])),(f.replace?r.replace:r.push)(u,f.state,f)},[t,r,o,a,e])}function eg(){let{matches:e}=_.useContext(wl),t=e[e.length-1];return t?t.params:{}}function ez(e,t){return tz(e,t)}function tz(e,t,n,r){Qp()||Hs(!1);let{navigator:i}=_.useContext(Xp),{matches:a}=_.useContext(wl),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let h=Dn(),f;if(t){var u;let b=typeof t=="string"?ud(t):t;d==="/"||(u=b.pathname)!=null&&u.startsWith(d)||Hs(!1),f=b}else f=h;let m=f.pathname||"/",p=m;if(d!=="/"){let b=d.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=EB(e,{pathname:p}),y=az(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Xo([d,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:Xo([d,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,r);return t&&y?_.createElement(Jp.Provider,{value:{location:rh({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Va.Pop}},y):y}function sz(){let e=dz(),t=YB(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),n?_.createElement("pre",{style:i},n):null,null)}const nz=_.createElement(sz,null);class rz extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?_.createElement(wl.Provider,{value:this.props.routeContext},_.createElement(jP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iz(e){let{routeContext:t,match:n,children:r}=e,i=_.useContext(vw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(wl.Provider,{value:t},r)}function az(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);f>=0||Hs(!1),o=o.slice(0,Math.min(o.length,f+1))}let d=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let u=o[f];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(h=f),u.route.id){let{loaderData:m,errors:p}=n,w=u.route.loader&&m[u.route.id]===void 0&&(!p||p[u.route.id]===void 0);if(u.route.lazy||w){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,u,m)=>{let p,w=!1,y=null,b=null;n&&(p=l&&u.route.id?l[u.route.id]:void 0,y=u.route.errorElement||nz,d&&(h<0&&m===0?(w=!0,b=null):h===m&&(w=!0,b=u.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,m+1)),x=()=>{let j;return p?j=y:w?j=b:u.route.Component?j=_.createElement(u.route.Component,null):u.route.element?j=u.route.element:j=f,_.createElement(iz,{match:u,routeContext:{outlet:f,matches:g,isDataRoute:n!=null},children:j})};return n&&(u.route.ErrorBoundary||u.route.errorElement||m===0)?_.createElement(rz,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}var SP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(SP||{}),zm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(zm||{});function oz(e){let t=_.useContext(vw);return t||Hs(!1),t}function lz(e){let t=_.useContext(JB);return t||Hs(!1),t}function cz(e){let t=_.useContext(wl);return t||Hs(!1),t}function kP(e){let t=cz(),n=t.matches[t.matches.length-1];return n.route.id||Hs(!1),n.route.id}function dz(){var e;let t=_.useContext(jP),n=lz(zm.UseRouteError),r=kP(zm.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function uz(){let{router:e}=oz(SP.UseNavigateStable),t=kP(zm.UseNavigateStable),n=_.useRef(!1);return NP(()=>{n.current=!0}),_.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,rh({fromRouteId:t},a)))},[e,t])}function hz(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ct(e){Hs(!1)}function fz(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Va.Pop,navigator:a,static:o=!1,future:l}=e;Qp()&&Hs(!1);let d=t.replace(/^\/*/,"/"),h=_.useMemo(()=>({basename:d,navigator:a,static:o,future:rh({v7_relativeSplatPath:!1},l)}),[d,l,a,o]);typeof r=="string"&&(r=ud(r));let{pathname:f="/",search:u="",hash:m="",state:p=null,key:w="default"}=r,y=_.useMemo(()=>{let b=wP(f,d);return b==null?null:{location:{pathname:b,search:u,hash:m,state:p,key:w},navigationType:i}},[d,f,u,m,p,w,i]);return y==null?null:_.createElement(Xp.Provider,{value:h},_.createElement(Jp.Provider,{children:n,value:y}))}function mz(e){let{children:t,location:n}=e;return ez(Ly(t),n)}new Promise(()=>{});function Ly(e,t){t===void 0&&(t=[]);let n=[];return _.Children.forEach(e,(r,i)=>{if(!_.isValidElement(r))return;let a=[...t,i];if(r.type===_.Fragment){n.push.apply(n,Ly(r.props.children,a));return}r.type!==ct&&Hs(!1),!r.props.index||!r.props.children||Hs(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ly(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iy(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function pz(e,t){let n=Iy(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(a=>{n.append(i,a)})}),n}const gz="6";try{window.__reactRouterVersion=gz}catch{}const vz="startTransition",T1=Q0[vz];function xz(e){let{basename:t,children:n,future:r,window:i}=e,a=_.useRef();a.current==null&&(a.current=SB({window:i,v5Compat:!0}));let o=a.current,[l,d]=_.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},f=_.useCallback(u=>{h&&T1?T1(()=>d(u)):d(u)},[d,h]);return _.useLayoutEffect(()=>o.listen(f),[o,f]),_.useEffect(()=>hz(r),[r]),_.createElement(fz,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var P1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(P1||(P1={}));var A1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(A1||(A1={}));function tg(e){let t=_.useRef(Iy(e)),n=_.useRef(!1),r=Dn(),i=_.useMemo(()=>pz(r.search,n.current?null:t.current),[r.search]),a=lt(),o=_.useCallback((l,d)=>{const h=Iy(typeof l=="function"?l(i):l);n.current=!0,a("?"+h,d)},[a,i]);return[i,o]}/*! Capacitor: https://capacitorjs.com/ - MIT License */var zc;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(zc||(zc={}));class mc extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const yz=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},bz=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>t!==null?t.name:yz(e),a=()=>i()!=="web",o=u=>{const m=h.get(u);return!!(m!=null&&m.platforms.has(i())||l(u))},l=u=>{var m;return(m=n.PluginHeaders)===null||m===void 0?void 0:m.find(p=>p.name===u)},d=u=>e.console.error(u),h=new Map,f=(u,m={})=>{const p=h.get(u);if(p)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),p.proxy;const w=i(),y=l(u);let b;const g=async()=>(!b&&w in m?b=typeof m[w]=="function"?b=await m[w]():b=m[w]:t!==null&&!b&&"web"in m&&(b=typeof m.web=="function"?b=await m.web():b=m.web),b),x=(A,I)=>{var P,R;if(y){const E=y==null?void 0:y.methods.find(F=>I===F.name);if(E)return E.rtype==="promise"?F=>n.nativePromise(u,I.toString(),F):(F,O)=>n.nativeCallback(u,I.toString(),F,O);if(A)return(P=A[I])===null||P===void 0?void 0:P.bind(A)}else{if(A)return(R=A[I])===null||R===void 0?void 0:R.bind(A);throw new mc(`"${u}" plugin is not implemented on ${w}`,zc.Unimplemented)}},j=A=>{let I;const P=(...R)=>{const E=g().then(F=>{const O=x(F,A);if(O){const M=O(...R);return I=M==null?void 0:M.remove,M}else throw new mc(`"${u}.${A}()" is not implemented on ${w}`,zc.Unimplemented)});return A==="addListener"&&(E.remove=async()=>I()),E};return P.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:A,writable:!1,configurable:!1}),P},N=j("addListener"),S=j("removeListener"),C=(A,I)=>{const P=N({eventName:A},I),R=async()=>{const F=await P;S({eventName:A,callbackId:F},I)},E=new Promise(F=>P.then(()=>F({remove:R})));return E.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await R()},E},T=new Proxy({},{get(A,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return y?C:N;case"removeListener":return S;default:return j(I)}}});return r[u]=T,h.set(u,{name:u,proxy:T,platforms:new Set([...Object.keys(m),...y?[w]:[]])}),T};return n.convertFileSrc||(n.convertFileSrc=u=>u),n.getPlatform=i,n.handleError=d,n.isNativePlatform=a,n.isPluginAvailable=o,n.registerPlugin=f,n.Exception=mc,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},wz=e=>e.Capacitor=bz(e),gt=wz(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}),mo=gt.registerPlugin;class xw{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,n){let r=!1;this.listeners[t]||(this.listeners[t]=[],r=!0),this.listeners[t].push(n);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n,r){const i=this.listeners[t];if(!i){if(r){let a=this.retainedEventArguments[t];a||(a=[]),a.push(n),this.retainedEventArguments[t]=a}return}i.forEach(a=>a(n))}hasListeners(t){var n;return!!(!((n=this.listeners[t])===null||n===void 0)&&n.length)}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new gt.Exception(t,zc.Unimplemented)}unavailable(t="not available"){return new gt.Exception(t,zc.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const i=r.indexOf(n);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const n=this.retainedEventArguments[t];n&&(delete this.retainedEventArguments[t],n.forEach(r=>{this.notifyListeners(t,r)}))}}const O1=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),R1=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class _z extends xw{async getCookies(){const t=document.cookie,n={};return t.split(";").forEach(r=>{if(r.length<=0)return;let[i,a]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=R1(i).trim(),a=R1(a).trim(),n[i]=a}),n}async setCookie(t){try{const n=O1(t.key),r=O1(t.value),i=`; expires=${(t.expires||"").replace("expires=","")}`,a=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${a}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}mo("CapacitorCookies",{web:()=>new _z});const jz=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),Nz=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,a,o)=>(i[a]=e[t[o]],i),{})},Sz=(e,t=!0)=>e?Object.entries(e).reduce((r,i)=>{const[a,o]=i;let l,d;return Array.isArray(o)?(d="",o.forEach(h=>{l=t?encodeURIComponent(h):h,d+=`${a}=${l}&`}),d.slice(0,-1)):(l=t?encodeURIComponent(o):o,d=`${a}=${l}`),`${r}&${d}`},"").substr(1):null,kz=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),i=Nz(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[o,l]of Object.entries(e.data||{}))a.set(o,l);n.body=a.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const a=new FormData;if(e.data instanceof FormData)e.data.forEach((l,d)=>{a.append(d,l)});else for(const l of Object.keys(e.data))a.append(l,e.data[l]);n.body=a;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class Cz extends xw{async request(t){const n=kz(t,t.webFetchExtra),r=Sz(t.params,t.shouldEncodeUrlParams),i=r?`${t.url}?${r}`:t.url,a=await fetch(i,n),o=a.headers.get("content-type")||"";let{responseType:l="text"}=a.ok?t:{};o.includes("application/json")&&(l="json");let d,h;switch(l){case"arraybuffer":case"blob":h=await a.blob(),d=await jz(h);break;case"json":d=await a.json();break;case"document":case"text":default:d=await a.text()}const f={};return a.headers.forEach((u,m)=>{f[m]=u}),{data:d,headers:f,status:a.status,url:a.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}mo("CapacitorHttp",{web:()=>new Cz});function Ez(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,n){return new Proxy({},{get(r,i){return(a,o,l)=>{const d=e.Capacitor.Plugins[n];if(d===void 0){l(new Error(`Capacitor plugin ${n} not found`));return}if(typeof d[i]!="function"){l(new Error(`Method ${i} not found in Capacitor plugin ${n}`));return}(async()=>{try{const h=await d[i](a);o(h)}catch(h){l(h)}})()}}})}})}function Tz(e){e.CapacitorUtils.Synapse=new Proxy({},{get(t,n){return e.cordova.plugins[n]}})}function Pz(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!e?Ez(window):window.cordova!==void 0&&Tz(window))}const Hv=mo("Geolocation",{web:()=>ze(()=>import("./web-B3m3h59o.js"),[]).then(e=>new e.GeolocationWeb)});Pz();var Ql;(function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"})(Ql||(Ql={}));var _u;(function(e){e.Rear="REAR",e.Front="FRONT"})(_u||(_u={}));var L1;(function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"})(L1||(L1={}));class Az extends xw{async getPhoto(t){return new Promise(async(n,r)=>{if(t.webUseInput||t.source===Ql.Photos)this.fileInputExperience(t,n,r);else if(t.source===Ql.Prompt){let i=document.querySelector("pwa-action-sheet");i||(i=document.createElement("pwa-action-sheet"),document.body.appendChild(i)),i.header=t.promptLabelHeader||"Photo",i.cancelable=!1,i.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],i.addEventListener("onSelection",async a=>{a.detail===0?this.fileInputExperience(t,n,r):this.cameraExperience(t,n,r)})}else this.cameraExperience(t,n,r)})}async pickImages(t){return new Promise(async(n,r)=>{this.multipleFileInputExperience(n,r)})}async cameraExperience(t,n,r){if(customElements.get("pwa-camera-modal")){const i=document.createElement("pwa-camera-modal");i.facingMode=t.direction===_u.Front?"user":"environment",document.body.appendChild(i);try{await i.componentOnReady(),i.addEventListener("onPhoto",async a=>{const o=a.detail;o===null?r(new mc("User cancelled photos app")):o instanceof Error?r(o):n(await this._getCameraPhoto(o,t)),i.dismiss(),document.body.removeChild(i)}),i.present()}catch{this.fileInputExperience(t,n,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,n,r)}fileInputExperience(t,n,r){let i=document.querySelector("#_capacitor-camera-input");const a=()=>{var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input",i.type="file",i.hidden=!0,document.body.appendChild(i),i.addEventListener("change",o=>{const l=i.files[0];let d="jpeg";if(l.type==="image/png"?d="png":l.type==="image/gif"&&(d="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){const h=new FileReader;h.addEventListener("load",()=>{if(t.resultType==="dataUrl")n({dataUrl:h.result,format:d});else if(t.resultType==="base64"){const f=h.result.split(",")[1];n({base64String:f,format:d})}a()}),h.readAsDataURL(l)}else n({webPath:URL.createObjectURL(l),format:d}),a()}),i.addEventListener("cancel",o=>{r(new mc("User cancelled photos app")),a()})),i.accept="image/*",i.capture=!0,t.source===Ql.Photos||t.source===Ql.Prompt?i.removeAttribute("capture"):t.direction===_u.Front?i.capture="user":t.direction===_u.Rear&&(i.capture="environment"),i.click()}multipleFileInputExperience(t,n){let r=document.querySelector("#_capacitor-camera-input-multiple");const i=()=>{var a;(a=r.parentNode)===null||a===void 0||a.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",a=>{const o=[];for(let l=0;l<r.files.length;l++){const d=r.files[l];let h="jpeg";d.type==="image/png"?h="png":d.type==="image/gif"&&(h="gif"),o.push({webPath:URL.createObjectURL(d),format:h})}t({photos:o}),i()}),r.addEventListener("cancel",a=>{n(new mc("User cancelled photos app")),i()})),r.accept="image/*",r.click()}_getCameraPhoto(t,n){return new Promise((r,i)=>{const a=new FileReader,o=t.type.split("/")[1];n.resultType==="uri"?r({webPath:URL.createObjectURL(t),format:o,saved:!1}):(a.readAsDataURL(t),a.onloadend=()=>{const l=a.result;n.resultType==="dataUrl"?r({dataUrl:l,format:o,saved:!1}):r({base64String:l.split(",")[1],format:o,saved:!1})},a.onerror=l=>{i(l)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const Oz=mo("Camera",{web:()=>new Az}),Rz=mo("Device",{web:()=>ze(()=>import("./web-CEnnkmei.js"),[]).then(e=>new e.DeviceWeb)});class Lz{static async requestAllPermissions(){if(!gt.isNativePlatform()){console.log("Running in web, skipping native permissions");return}try{await this.requestLocationPermission(),await this.requestCameraPermission(),console.log("Microphone permissions handled through camera plugin")}catch(t){console.error("Error requesting permissions:",t)}}static async requestLocationPermission(){try{const t=await Hv.requestPermissions();return console.log("Location permissions:",t),t}catch(t){throw console.error("Location permission error:",t),t}}static async requestCameraPermission(){try{const t=await Oz.requestPermissions();return console.log("Camera permissions:",t),t}catch(t){throw console.error("Camera permission error:",t),t}}static async checkLocationPermission(){try{return(await Hv.checkPermissions()).location==="granted"}catch(t){return console.error("Check location permission error:",t),!1}}static async getCurrentLocation(){try{return await this.checkLocationPermission()||await this.requestLocationPermission(),await Hv.getCurrentPosition()}catch(t){throw console.error("Get location error:",t),t}}static async getDeviceInfo(){try{const t=await Rz.getInfo();return console.log("Device info:",t),t}catch(t){return console.error("Device info error:",t),null}}}class Iz{constructor(){Ht(this,"location",null);Ht(this,"intervalId",null);Ht(this,"listeners",[]);this.loadFromStorage()}loadFromStorage(){const t=localStorage.getItem("userLocation");if(t)try{const n=JSON.parse(t),r=localStorage.getItem("userLocationTimestamp");r&&Date.now()-parseInt(r)<10*60*1e3&&(this.location=n)}catch(n){console.error("Error loading location from storage:",n)}}saveToStorage(){this.location&&(localStorage.setItem("userLocation",JSON.stringify(this.location)),localStorage.setItem("userLocationTimestamp",Date.now().toString()))}updateLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{this.location={latitude:t.coords.latitude,longitude:t.coords.longitude},this.saveToStorage(),this.notifyListeners()},t=>console.error("Location error:",t),{enableHighAccuracy:!1,timeout:1e4,maximumAge:18e4})}notifyListeners(){this.listeners.forEach(t=>t(this.location))}startTracking(){this.updateLocation(),this.intervalId||(this.intervalId=setInterval(()=>{this.updateLocation()},3*60*1e3))}stopTracking(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}getLocation(){return this.location}subscribe(t){return this.listeners.push(t),t(this.location),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}}const ht=new Iz,Js=mo("Preferences",{web:()=>ze(()=>import("./web-Bq-nFrLY.js"),[]).then(e=>new e.PreferencesWeb)}),Wv=Object.freeze(Object.defineProperty({__proto__:null,Preferences:Js},Symbol.toStringTag,{value:"Module"}));class Mz{constructor(){Ht(this,"isNative",gt.isNativePlatform())}async setAuth(t,n){this.isNative?(await Js.set({key:"auth_token",value:t}),await Js.set({key:"auth_user",value:JSON.stringify(n)}),await Js.set({key:"last_activity",value:Date.now().toString()})):(localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(n)),localStorage.setItem("lastActivity",Date.now().toString()))}async getToken(){return this.isNative?(await Js.get({key:"auth_token"})).value:localStorage.getItem("token")}async getUser(){if(this.isNative){const t=await Js.get({key:"auth_user"});return t.value?JSON.parse(t.value):null}else{const t=localStorage.getItem("user");return t?JSON.parse(t):null}}async isAuthenticated(){const t=await this.getToken(),n=await this.getUser();return!!(t&&n)}async updateActivity(){this.isNative?await Js.set({key:"last_activity",value:Date.now().toString()}):localStorage.setItem("lastActivity",Date.now().toString())}async getLastActivity(){if(this.isNative){const t=await Js.get({key:"last_activity"});return t.value?parseInt(t.value):null}else{const t=localStorage.getItem("lastActivity");return t?parseInt(t):null}}async clearAuth(){console.log(" clearAuth() called - Stack trace:"),console.trace(),this.isNative?(console.log(" Clearing native storage (Capacitor Preferences)"),await Js.remove({key:"auth_token"}),await Js.remove({key:"auth_user"}),await Js.remove({key:"last_activity"}),await Js.remove({key:"cart"}),await Js.remove({key:"wishlist"})):(console.log(" Clearing web storage (localStorage)"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("lastActivity"),localStorage.removeItem("cart"),localStorage.removeItem("wishlist"),localStorage.removeItem("userLocation"),localStorage.removeItem("userLocationTimestamp")),console.log(" Auth cleared successfully")}async setCart(t){this.isNative?await Js.set({key:"cart",value:JSON.stringify(t)}):localStorage.setItem("cart",JSON.stringify(t))}async getCart(){if(this.isNative){const t=await Js.get({key:"cart"});return t.value?JSON.parse(t.value):[]}else{const t=localStorage.getItem("cart");return t?JSON.parse(t):[]}}async setWishlist(t){this.isNative?await Js.set({key:"wishlist",value:JSON.stringify(t)}):localStorage.setItem("wishlist",JSON.stringify(t))}async getWishlist(){if(this.isNative){const t=await Js.get({key:"wishlist"});return t.value?JSON.parse(t.value):[]}else{const t=localStorage.getItem("wishlist");return t?JSON.parse(t):[]}}async isSessionValid(){const t=await this.getLastActivity();if(!t)return!1;const n=this.isNative?7*24*60*60*1e3:24*60*60*1e3;return Date.now()-t<=n}async autoLogin(){const t=await this.getToken(),n=await this.getUser();if(t&&n&&n.user_type==="vendor"){if(await this.isSessionValid())return await this.updateActivity(),console.log(" Auto-login successful for vendor:",n.username),!0;try{const{simplePersistentAuth:i}=await ze(async()=>{const{simplePersistentAuth:o}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:o}},void 0),a=await i.getVendorAuth();if(a!=null&&a.token&&(a!=null&&a.user))return console.log(" Main auth expired but vendor auth valid, syncing..."),await this.setAuth(a.token,a.user),!0}catch(i){console.error("Failed to check vendor auth:",i)}console.log(" Session expired, clearing auth"),await this.clearAuth()}return!1}async keepAlive(){await this.isAuthenticated()&&await this.updateActivity()}async updateUser(t){this.isNative?await Js.set({key:"auth_user",value:JSON.stringify(t)}):localStorage.setItem("user",JSON.stringify(t))}}const Ce=new Mz,ra=Object.freeze(Object.defineProperty({__proto__:null,authService:Ce},Symbol.toStringTag,{value:"Module"})),Dz={user:null,cart:[],wishlist:[],searchQuery:"",isLoading:!1,error:null,isAuthenticated:!1};function Fz(e,t){switch(t.type){case"SET_USER":return{...e,user:t.payload,isAuthenticated:!!t.payload};case"UPDATE_USER":return{...e,user:e.user?{...e.user,...t.payload}:null};case"SET_CART":return{...e,cart:t.payload};case"ADD_TO_CART":return e.cart.find(r=>r.id===t.payload.id)?{...e,cart:e.cart.map(r=>r.id===t.payload.id?{...r,quantity:r.quantity+1}:r)}:{...e,cart:[...e.cart,{...t.payload,quantity:1}]};case"REMOVE_FROM_CART":return{...e,cart:e.cart.filter(n=>n.id!==t.payload)};case"UPDATE_CART_QUANTITY":return{...e,cart:e.cart.map(n=>n.id===t.payload.id?{...n,quantity:Math.max(0,t.payload.quantity)}:n).filter(n=>n.quantity>0)};case"CLEAR_CART":return{...e,cart:[]};case"SET_WISHLIST":return{...e,wishlist:t.payload};case"ADD_TO_WISHLIST":return e.wishlist.find(r=>r.id===t.payload.id)?e:{...e,wishlist:[...e.wishlist,t.payload]};case"REMOVE_FROM_WISHLIST":return{...e,wishlist:e.wishlist.filter(n=>n.id!==t.payload)};case"SET_SEARCH_QUERY":return{...e,searchQuery:t.payload};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload};case"LOAD_FROM_STORAGE":return e;default:return e}}const CP=_.createContext(void 0);function $z({children:e}){const[t,n]=_.useReducer(Fz,Dz);_.useEffect(()=>{(async()=>{try{console.log(" App initializing - checking for stored vendor session...");const y=await Ce.autoLogin();if(console.log(" Auto-login result:",y),y){const b=await Ce.getUser();console.log(" Vendor session restored:",b==null?void 0:b.username,"Type:",b==null?void 0:b.user_type),(b==null?void 0:b.user_type)==="vendor"&&(n({type:"SET_USER",payload:{...b,isLoggedIn:!0}}),window.location.pathname.startsWith("/vendor")||(console.log(" Auto-redirecting vendor to dashboard..."),window.location.replace("/vendor")),setTimeout(async()=>{try{const{fcmService:g}=await ze(async()=>{const{fcmService:x}=await Promise.resolve().then(()=>Tre);return{fcmService:x}},void 0);await g.initialize(),console.log(" Vendor FCM initialized for persistent notifications")}catch(g){console.warn("FCM initialization failed:",g)}},1e3))}else{const[b,g,x,j]=await Promise.all([Ce.getCart(),Ce.getWishlist(),Ce.getUser(),Ce.isAuthenticated()]);j&&x&&n({type:"SET_USER",payload:{...x,isLoggedIn:!0}}),n({type:"SET_CART",payload:b}),n({type:"SET_WISHLIST",payload:g})}n({type:"SET_LOADING",payload:!1}),console.log(" App initialization complete")}catch(y){console.error("Failed to load stored data:",y),n({type:"SET_LOADING",payload:!1})}})()},[]),_.useEffect(()=>{(async()=>{try{await Promise.all([Ce.setCart(t.cart),Ce.setWishlist(t.wishlist)]),t.user&&await Ce.updateActivity()}catch(y){console.error("Failed to save data:",y)}})()},[t.cart,t.wishlist,t.user]);const p={state:t,dispatch:n,addToCart:w=>{n({type:"ADD_TO_CART",payload:w})},removeFromCart:w=>{n({type:"REMOVE_FROM_CART",payload:w})},updateCartQuantity:(w,y)=>{n({type:"UPDATE_CART_QUANTITY",payload:{id:w,quantity:y}})},clearCart:()=>{n({type:"CLEAR_CART"})},addToWishlist:w=>{n({type:"ADD_TO_WISHLIST",payload:w})},removeFromWishlist:w=>{n({type:"REMOVE_FROM_WISHLIST",payload:w})},setSearchQuery:w=>{n({type:"SET_SEARCH_QUERY",payload:w})},login:async(w,y)=>{try{n({type:"SET_USER",payload:{...w,isLoggedIn:!0}}),await Ce.setAuth(y,w),ht.startTracking(),console.log("Login completed, user authenticated:",!!w)}catch(b){console.error("Failed to save login data:",b)}},logout:async()=>{try{await Ce.clearAuth(),n({type:"SET_USER",payload:null}),n({type:"CLEAR_CART"}),ht.stopTracking()}catch(w){console.error("Failed to clear auth data:",w)}},updateUser:async w=>{try{if(n({type:"UPDATE_USER",payload:w}),t.user){const y={...t.user,...w};await Ce.updateUser(y)}}catch(y){console.error("Failed to update user:",y)}},user:t.user};return s.jsx(CP.Provider,{value:p,children:e})}function Fn(){const e=_.useContext(CP);if(e===void 0)throw new Error("useApp must be used within an AppProvider");return e}const Bz=()=>{const{state:e,dispatch:t}=Fn(),n=_.useCallback(async()=>{e.user&&await Ce.updateActivity()},[e.user]),r=_.useCallback(async()=>{e.user&&await Promise.all([Ce.setCart(e.cart),Ce.setWishlist(e.wishlist),Ce.updateActivity()])},[e.user,e.cart,e.wishlist]);return _.useCallback(async()=>{},[t]),_.useEffect(()=>{},[]),_.useEffect(()=>{},[]),_.useEffect(()=>{const i=()=>{r().catch(console.error)};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[r]),{extendSession:n,saveState:r}},zz=()=>window.location.protocol==="capacitor:"||window.location.protocol==="ionic:"||window.navigator.userAgent.includes("Capacitor"),Vz="https://ezeyway.com/api",Uz=()=>Vz,My=["http://localhost:8000/api","http://127.0.0.1:8000/api","http://10.0.2.2:8000/api","http://192.168.1.100:8000/api","https://ezeyway.com/api"],qz=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"ws://localhost:8000":"wss://ezeyway.com",bn={BASE_URL:Uz(),WS_BASE_URL:qz()};(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("API Config Debug:",{isMobile:zz(),protocol:window.location.protocol,hostname:window.location.hostname,userAgent:window.navigator.userAgent.substring(0,50)+"...",baseUrl:bn.BASE_URL,wsUrl:bn.WS_BASE_URL});const Vc=(e="")=>{const t=`${bn.BASE_URL}${e.startsWith("/")?e:`/${e}`}`;if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"){const n=t.includes("?")?"&":"?";return`${t}${n}_cb=${Date.now()}`}return t},EP=(e="")=>`${bn.WS_BASE_URL}${e.startsWith("/")?e:`/${e}`}`,TP=e=>{let t=e;return t.startsWith("/api/")&&(t=t.substring(4)),t.startsWith("/")?t:`/${t}`},Qe=`${bn.BASE_URL}/`,Hz=Object.freeze(Object.defineProperty({__proto__:null,API_BASE:Qe,API_CONFIG:bn,FALLBACK_URLS:My,getApiUrl:Vc,getWsUrl:EP,normalizeEndpoint:TP},Symbol.toStringTag,{value:"Module"}));class Wz{constructor(){Ht(this,"CART_STORAGE_KEY","temp_cart")}async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Ce.getToken()}`,"ngrok-skip-browser-warning":"true"}}getStoredCart(){const t=localStorage.getItem(this.CART_STORAGE_KEY);if(t)try{return JSON.parse(t)}catch(n){console.error("Error parsing stored cart:",n)}return{id:1,items:[],total_items:0,subtotal:0}}saveCart(t){localStorage.setItem(this.CART_STORAGE_KEY,JSON.stringify(t))}async fetchProductDetails(t){var n,r,i;try{const l=(n=(await(await fetch(`${Qe}search/products/?search=${t}`,{headers:{"ngrok-skip-browser-warning":"true"}})).json()).results)==null?void 0:n.find(d=>d.id===t);if(l){const d=((r=l.images)==null?void 0:r.find(h=>h.is_primary))||((i=l.images)==null?void 0:i[0]);return{id:l.id,name:l.name,price:parseFloat(l.price),images:l.images||[],vendor_name:l.vendor_name||"Unknown Vendor",vendor_id:l.vendor_id,free_delivery:l.free_delivery,custom_delivery_fee_enabled:l.custom_delivery_fee_enabled,custom_delivery_fee:l.custom_delivery_fee}}}catch(a){console.error("Failed to fetch product details:",a)}return{id:t,name:`Product ${t}`,price:0,images:[],vendor_name:"Unknown Vendor",vendor_id:null,free_delivery:!1,custom_delivery_fee_enabled:!1,custom_delivery_fee:null}}async getCart(){if(!await Ce.getToken())throw new Error("User not authenticated");return this.getStoredCart()}async addToCart(t,n=1){if(!await Ce.getToken())throw new Error("User not authenticated");const i=this.getStoredCart(),a=i.items.find(o=>o.product.id===t);if(a)a.quantity+=n,a.total_price=a.product.price*a.quantity;else{const o=await this.fetchProductDetails(t),l={id:Date.now(),product:o,quantity:n,total_price:o.price*n};i.items.push(l)}return i.total_items=i.items.reduce((o,l)=>o+l.quantity,0),i.subtotal=i.items.reduce((o,l)=>o+l.total_price,0),this.saveCart(i),i}async updateCartItem(t,n){const r=this.getStoredCart(),i=r.items.find(a=>a.id===t);return i&&(i.quantity=n,i.total_price=i.product.price*n,r.total_items=r.items.reduce((a,o)=>a+o.quantity,0),r.subtotal=r.items.reduce((a,o)=>a+o.total_price,0),this.saveCart(r)),r}async removeFromCart(t){const n=this.getStoredCart();return n.items=n.items.filter(r=>r.id!==t),n.total_items=n.items.reduce((r,i)=>r+i.quantity,0),n.subtotal=n.items.reduce((r,i)=>r+i.total_price,0),this.saveCart(n),n}async clearCart(){localStorage.removeItem(this.CART_STORAGE_KEY)}}const ui=new Wz;class Gz{async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Ce.getToken()}`,"ngrok-skip-browser-warning":"true"}}async getCart(){if(!await Ce.getToken())throw new Error("User not authenticated");try{console.log("Fetching cart from:",`${Qe}cart/`);const n=await fetch(`${Qe}cart/`,{headers:await this.getAuthHeaders()});console.log("Cart response status:",n.status);const r=await n.json();if(console.log("Cart response data:",r),r.message&&r.message.includes("Welcome to Ezeyway Django API"))return console.log("Cart endpoints not implemented, using temporary cart service"),await ui.getCart();if(!n.ok)throw new Error(`Failed to fetch cart: ${n.status} - ${JSON.stringify(r)}`);return r}catch(n){return console.log("Cart API failed, using temporary cart service:",n),await ui.getCart()}}async addToCart(t,n=1){try{console.log("Adding to cart:",{productId:t,quantity:n}),console.log("Add to cart URL:",`${Qe}cart/add/`);const r=await fetch(`${Qe}cart/add/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({product_id:t,quantity:n})});console.log("Add to cart response status:",r.status);const i=await r.json();if(console.log("Add to cart response data:",i),i.message&&i.message.includes("Welcome to Ezeyway Django API"))return console.log("Cart endpoints not implemented, using temporary cart service"),await ui.addToCart(t,n);if(!r.ok)throw new Error(`Failed to add item to cart: ${r.status} - ${JSON.stringify(i)}`);return i.cart||i}catch(r){return console.log("Cart API failed, using temporary cart service:",r),await ui.addToCart(t,n)}}async updateCartItem(t,n){try{const r=await fetch(`${Qe}cart/items/${t}/update/`,{method:"PUT",headers:await this.getAuthHeaders(),body:JSON.stringify({quantity:n})}),i=await r.json();if(i.message&&i.message.includes("Welcome to Ezeyway Django API"))return await ui.updateCartItem(t,n);if(!r.ok)throw new Error("Failed to update cart item");return i.cart}catch{return await ui.updateCartItem(t,n)}}async removeFromCart(t){try{const n=await fetch(`${Qe}cart/items/${t}/remove/`,{method:"DELETE",headers:await this.getAuthHeaders()}),r=await n.json();if(r.message&&r.message.includes("Welcome to Ezeyway Django API"))return await ui.removeFromCart(t);if(!n.ok)throw new Error("Failed to remove item from cart");return r.cart}catch{return await ui.removeFromCart(t)}}async clearCart(){try{const t=await fetch(`${Qe}cart/clear/`,{method:"DELETE",headers:await this.getAuthHeaders()}),n=await t.json();if(n.message&&n.message.includes("Welcome to Ezeyway Django API"))return await ui.clearCart();if(!t.ok)throw new Error("Failed to clear cart")}catch{return await ui.clearCart()}}}const Fl=new Gz,PP=Object.freeze(Object.defineProperty({__proto__:null,cartService:Fl},Symbol.toStringTag,{value:"Module"})),AP=_.createContext(void 0),Kz=({children:e})=>{const[t,n]=_.useState(null),[r,i]=_.useState(!1),{toast:a}=ts(),o=async()=>{var u,m;try{if(!await Ce.getToken()){n(null);return}i(!0);const w=await Fl.getCart();n(w)}catch(p){(u=p.message)!=null&&u.includes("401")||(m=p.message)!=null&&m.includes("Unauthorized")?n(null):console.error("Failed to fetch cart:",p)}finally{i(!1)}},l=async(u,m=1)=>{try{if(!await Ce.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:u,quantity:m},path:"/cart",timestamp:Date.now()})),window.location.href="/login";return}const w=await Fl.addToCart(u,m);n(w),await o(),a({title:"Success",description:"Item added to cart"})}catch(p){console.error("Add to cart error:",p),a({title:"Error",description:"Failed to add item to cart",variant:"destructive"})}},d=async(u,m)=>{try{const p=await Fl.updateCartItem(u,m);n(p)}catch{a({title:"Error",description:"Failed to update item quantity",variant:"destructive"})}},h=async u=>{try{const m=await Fl.removeFromCart(u);n(m),a({title:"Success",description:"Item removed from cart"})}catch{a({title:"Error",description:"Failed to remove item",variant:"destructive"})}},f=async()=>{try{await Fl.clearCart(),n({...t,items:[],total_items:0,subtotal:0}),a({title:"Success",description:"Cart cleared"})}catch{a({title:"Error",description:"Failed to clear cart",variant:"destructive"})}};return _.useEffect(()=>{(async()=>{await Ce.getToken()?o():n(null)})();const m=p=>{p.detail?n(p.detail):o()};return window.addEventListener("cartUpdated",m),()=>{window.removeEventListener("cartUpdated",m)}},[]),s.jsx(AP.Provider,{value:{cart:t,loading:r,addToCart:l,updateCartItem:d,removeFromCart:h,clearCart:f,fetchCart:o},children:e})},$n=()=>{const e=_.useContext(AP);if(e===void 0)throw new Error("useCart must be used within a CartProvider");return e},OP=_.createContext(void 0),Zz=({children:e})=>{const[t,n]=_.useState(!1),r=i=>{console.log("setHomeDataLoaded called with:",i,"Previous state:",t),n(i)};return s.jsx(OP.Provider,{value:{isHomeDataLoaded:t,setHomeDataLoaded:r},children:e})},Yz=()=>{const e=_.useContext(OP);if(!e)throw new Error("useAppLoading must be used within AppLoadingProvider");return e},Xz=({children:e})=>{const{dispatch:t}=Fn(),[n,r]=_.useState(!1);return _.useEffect(()=>{(async()=>{try{await Ce.isAuthenticated()&&(await Ce.isSessionValid()||await Ce.clearAuth())}catch(a){console.error("Auth initialization failed:",a)}finally{r(!0)}})()},[t]),n?s.jsx(s.Fragment,{children:e}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})},Lr=({children:e})=>{const t=lt(),[n,r]=_.useState(!0),[i,a]=_.useState(!1),{state:o}=Fn();return _.useEffect(()=>{(async()=>{try{if(o.user){console.log("ProtectedRoute: Using context user:",o.user.user_type),a(!0),r(!1);return}if(!await Ce.isAuthenticated()){console.log("ProtectedRoute: Not authenticated, redirecting to login"),t("/login");return}const h=await Ce.getUser();if(!h){console.log("ProtectedRoute: No user data, redirecting to login"),t("/login");return}console.log("ProtectedRoute: Access granted for user:",h.user_type),a(!0)}catch(d){console.error("ProtectedRoute auth check failed:",d),t("/login")}finally{r(!1)}})()},[t,o.user]),n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i?s.jsx(s.Fragment,{children:e}):null},Jz="/assets/tihar.gif",Qz=({onComplete:e})=>{const[t,n]=_.useState(!0);return _.useEffect(()=>{console.log("AppSplashScreen mounted, starting timer");const r=setTimeout(()=>{console.log("Splash timer completed, hiding splash"),n(!1),setTimeout(()=>{console.log("Calling onComplete callback"),e()},300)},3e3);return()=>clearTimeout(r)},[e]),t?(console.log("Rendering splash screen"),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white",children:s.jsx("img",{src:Jz,alt:"Loading...",className:"max-w-full max-h-full object-contain"})})):(console.log("Splash screen not visible, returning null"),null)};class eV{constructor(){Ht(this,"hasTrackedCurrentPage",!1)}async trackPageVisit(t,n){try{if(this.hasTrackedCurrentPage)return;const r=t||window.location.href,i=n||document.title,a=await fetch(`${bn.BASE_URL}/analytics/track/`,{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},credentials:"include",body:JSON.stringify({page_url:r,page_title:i,referrer:document.referrer,timestamp:new Date().toISOString()})});if(a.ok){const o=await a.json();return console.log("Analytics tracked:",o),this.hasTrackedCurrentPage=!0,setTimeout(()=>{this.hasTrackedCurrentPage=!1},1e3),o}}catch(r){console.error("Analytics tracking failed:",r)}}trackRouteChange(t){this.hasTrackedCurrentPage=!1,this.trackPageVisit(window.location.origin+t)}}const Gd=new eV,tV=()=>{const e=Dn();return _.useEffect(()=>{Gd.trackPageVisit()},[e.pathname]),{trackPageVisit:Gd.trackPageVisit.bind(Gd),trackRouteChange:Gd.trackRouteChange.bind(Gd)}},ua="/assets/ezeywaylogo.png";function sV(){const e=lt();return _.useEffect(()=>{(async()=>{try{const{simplePersistentAuth:n}=await ze(async()=>{const{simplePersistentAuth:l}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:l}},void 0);if(await n.isVendorLoggedIn()){console.log(" Vendor already logged in, redirecting to dashboard"),e("/vendor/dashboard");return}const{authService:i}=await ze(async()=>{const{authService:l}=await Promise.resolve().then(()=>ra);return{authService:l}},void 0),a=await i.isAuthenticated(),o=await i.getUser();if(a&&o&&o.user_type==="customer"){console.log(" Customer already logged in, redirecting to home"),e("/home");return}console.log(" No authentication found, redirecting to home"),e("/home")}catch(n){console.error("Error checking authentication:",n),e("/home")}})()},[e]),s.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:ua,alt:"ezeyway",className:"w-32 h-32 mx-auto animate-pulse object-contain"}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"flex justify-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})})}const nV=Nh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",brand:"gradient-primary text-primary-foreground font-semibold shadow-brand hover:scale-105 transition-bounce",accent:"gradient-accent text-accent-foreground font-semibold shadow-brand hover:scale-105 transition-bounce",premium:"bg-primary-dark text-primary-foreground border border-primary-light/20 shadow-lg hover:bg-primary hover:shadow-brand transition-smooth"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),se=_.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},a)=>{const o=r?WD:"button";return s.jsx(o,{className:at(nV({variant:t,size:n,className:e})),ref:a,...i})});se.displayName="Button";const _e=_.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:at("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));_e.displayName="Input";const RP=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",rV=()=>{if(!RP())return;const e=document.createElement("div");e.innerHTML=`
    <div style="
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #f59e0b;
      color: white;
      padding: 8px 16px;
      text-align: center;
      z-index: 9999;
      font-size: 14px;
      font-weight: 500;
    ">
       Backend server not running on localhost:8000. Please start your Django server.
      <button onclick="this.parentElement.parentElement.remove()" style="
        background: none;
        border: none;
        color: white;
        margin-left: 16px;
        cursor: pointer;
        font-size: 16px;
      "></button>
    </div>
  `,document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},1e4)};let I1=!1,Kd=!1;const Vm=async(e=!0,t=!1,n="")=>{const r={"ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"};if(t||(r["Content-Type"]="application/json"),e){let i=await Ce.getToken();console.log(" Main token for",n,":",i?`${i.substring(0,10)}...`:"NO TOKEN");const a=n.includes("vendor"),o=window.location.pathname.startsWith("/vendor");if(a&&o&&!i)try{const{simplePersistentAuth:l}=await ze(async()=>{const{simplePersistentAuth:h}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:h}},void 0),d=await l.getVendorAuth();d!=null&&d.token?(i=d.token,console.log(" Using vendor token for:",n,`${i.substring(0,10)}...`),await Ce.setAuth(d.token,d.user),console.log(" Synced vendor token to main auth")):console.log(" No vendor token available for vendor endpoint")}catch(l){console.error("Failed to get vendor token:",l)}i?r.Authorization=`Token ${i}`:console.log(" No token available for:",n)}return r},Ve=async(e,t={},n=!0)=>{var l,d,h,f,u;let r=TP(e);if(r.includes("/vendors/settings")||r.includes("/vendor-profiles/settings"))return console.log(" BLOCKED: Removing call to non-existent endpoint:",e),Promise.resolve({response:{ok:!0,status:200,json:()=>Promise.resolve({}),headers:new Headers({"content-type":"application/json"})},data:{results:[]}});const i=`${bn.BASE_URL}${r}`,a=t.body instanceof FormData,o={headers:await Vm(n,a,e),...t};if(console.log(" API Request:",e,"Auth:",n),console.log(" Full URL:",i),e.includes("accept")&&(console.log(" ORDER ACCEPT REQUEST DETECTED!"),console.log(" Original endpoint:",e),console.log(" Normalized endpoint:",r),console.log(" API_CONFIG.BASE_URL:",bn.BASE_URL),console.log(" Final URL:",i)),e.includes("switch-role")||e.includes("switch")){console.log(" SWITCH ROLE REQUEST DETECTED!"),console.log(" Full URL:",i),console.log(" Include Auth:",n),console.log(" Request Headers:",JSON.stringify(o.headers,null,2));const{authService:m}=await ze(async()=>{const{authService:b}=await Promise.resolve().then(()=>ra);return{authService:b}},void 0),p=await m.getToken();console.log(" Token from authService:",p?`${p.substring(0,10)}...`:"NO TOKEN");const w=typeof localStorage<"u"?localStorage.getItem("token"):"NO LOCALSTORAGE";console.log(" localStorage token:",w?`${w.substring(0,10)}...`:"NO TOKEN IN LOCALSTORAGE");const y=((l=o.headers)==null?void 0:l.Authorization)||((d=o.headers)==null?void 0:d.authorization);console.log(" Authorization header:",y?`${y.substring(0,15)}...`:"NO AUTH HEADER")}t.headers&&(o.headers={...o.headers,...t.headers},a&&o.headers["Content-Type"]&&delete o.headers["Content-Type"]);try{const m=await fetch(i,o);if(m.status===401&&n&&!Kd){Kd=!0,console.log(" 401 error, attempting token refresh...");try{const y=e.includes("vendor"),b=window.location.pathname.startsWith("/vendor");if(y&&b){const{simplePersistentAuth:g}=await ze(async()=>{const{simplePersistentAuth:j}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:j}},void 0),x=await g.getVendorAuth();if(x!=null&&x.token){console.log(" Found vendor auth, attempting refresh with vendor token"),await Ce.setAuth(x.token,x.user);const j=await Vm(!0,a,e),N=await fetch(i,{...o,headers:j});if(N.ok){console.log(" Token refresh successful"),Kd=!1;const S=N.clone(),C=N.headers.get("content-type");if(C&&C.includes("application/json")){const T=await N.json();return{response:S,data:T}}return{response:S,data:null}}else console.log(" Retry with vendor token also failed:",N.status),await g.clearVendorAuth()}else console.log(" No vendor auth available for token refresh")}else console.log(" Not a vendor endpoint, skipping vendor auth refresh");return console.log(" Token refresh failed"),Kd=!1,{response:m,data:{error:"Authentication required"}}}catch(y){return console.error("Token refresh error:",y),Kd=!1,{response:m,data:{error:"Authentication required"}}}}const p=m.clone(),w=m.headers.get("content-type");if(w&&w.includes("application/json"))try{const y=await m.json();return{response:p,data:y}}catch(y){return console.warn("Failed to parse JSON response:",y),{response:p,data:null}}else return console.warn("API returned non-JSON response:",m.status,m.statusText),{response:p,data:null}}catch(m){if(console.error("API request failed:",m),RP()&&!I1&&((h=m.message)!=null&&h.includes("fetch"))&&(I1=!0,rV()),i.includes("ngrok-free.app")&&((f=m.message)!=null&&f.includes("Unable to resolve host")||(u=m.message)!=null&&u.includes("UnknownHostException"))){console.log("Ngrok failed, trying fallback URLs...");for(let p=1;p<My.length;p++){const y=`${My[p]}${normalizedEndpoint}`;try{console.log(`Trying fallback URL: ${y}`);const b=await fetch(y,{...o,headers:{...o.headers,"ngrok-skip-browser-warning":void 0,"x-ngrok-skip-browser-warning":void 0}}),g=b.clone(),x=b.headers.get("content-type");if(x&&x.includes("application/json"))try{const j=await b.json();return console.log(`Fallback URL ${y} succeeded`),{response:g,data:j}}catch{return console.log(`Fallback URL ${y} succeeded (non-JSON)`),{response:g,data:null}}else return console.log(`Fallback URL ${y} succeeded (non-JSON)`),{response:g,data:null}}catch(b){console.error(`Fallback URL ${y} failed:`,b);continue}}}throw m}},us=Object.freeze(Object.defineProperty({__proto__:null,apiRequest:Ve,createApiHeaders:Vm},Symbol.toStringTag,{value:"Module"}));class iV{constructor(){Ht(this,"pendingAction",null)}setPendingAction(t){this.pendingAction=t,localStorage.setItem("pendingAction",JSON.stringify(t))}getPendingAction(){if(this.pendingAction)return this.pendingAction;const t=localStorage.getItem("pendingAction");if(t)try{return this.pendingAction=JSON.parse(t),this.pendingAction}catch(n){console.error("Error parsing pending action:",n)}return null}clearPendingAction(){this.pendingAction=null,localStorage.removeItem("pendingAction")}async executePendingAction(){const t=this.getPendingAction();if(!t)return console.log("No pending action to execute"),!1;const{authService:n}=await ze(async()=>{const{authService:i}=await Promise.resolve().then(()=>ra);return{authService:i}},void 0),r=await n.getToken();if(!r)return console.log("No token found, clearing pending action"),this.clearPendingAction(),!1;console.log("Executing pending action:",t);try{switch(t.type){case"add_to_cart":if(t.data){console.log("Executing add_to_cart action:",t.data);const{cartService:i}=await ze(async()=>{const{cartService:a}=await Promise.resolve().then(()=>PP);return{cartService:a}},void 0);try{const a=await i.addToCart(t.data.productId,t.data.quantity||1);console.log("Added to cart successfully:",a),window.dispatchEvent(new CustomEvent("cartUpdated",{detail:a}));try{const{toast:o}=await ze(async()=>{const{toast:l}=await Promise.resolve().then(()=>GN);return{toast:l}},void 0);o({title:"Added to Cart",description:"Product added successfully"})}catch{console.log("Toast not available, but item added successfully")}return this.clearPendingAction(),window.location.href=t.path||"/cart",!0}catch(a){return console.error("Failed to add to cart:",a),this.clearPendingAction(),!1}}break;case"buy_now":if(t.data){localStorage.setItem("buyNowProduct",JSON.stringify(t.data)),this.clearPendingAction();const i=new URL("/checkout",window.location.origin);return i.searchParams.set("directBuy","true"),window.location.href=i.toString(),!0}break;case"toggleFavorite":if(t.data){console.log("Executing toggleFavorite action:",t.data);try{const i=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${r}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:t.data.productId})});if(i.ok){const a=await i.json();console.log("Favorite toggled successfully:",a);try{const{toast:o}=await ze(async()=>{const{toast:l}=await Promise.resolve().then(()=>GN);return{toast:l}},void 0);o({title:a.is_favorite?"Added to Favorites":"Removed from Favorites",description:a.message})}catch{console.log("Toast not available, but favorite toggled successfully")}return this.clearPendingAction(),window.location.href=t.path||"/wishlist",!0}else console.error("Failed to toggle favorite:",i.status)}catch(i){console.error("Failed to toggle favorite:",i)}return this.clearPendingAction(),!1}break;case"view_orders":return window.location.href="/orders",this.clearPendingAction(),!0;case"view_profile":return window.location.href="/profile",this.clearPendingAction(),!0;case"navigate":if(t.path)return window.location.href=t.path,this.clearPendingAction(),!0;break}}catch(i){console.error("Error executing pending action:",i),this.clearPendingAction()}return this.clearPendingAction(),!1}redirectToLogin(t){const n=t||window.location.pathname+window.location.search;window.location.href=`/login?returnTo=${encodeURIComponent(n)}`}}const ju=new iV;function LP({currentType:e}){const t=lt(),n=Dn(),r=()=>{t(e==="customer"?"/vendor/login":"/login",{state:n.state})};return s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("button",{onClick:r,className:"flex items-center gap-2 px-3 py-1 text-sm font-medium text-gray-600 hover:text-blue-600 transition-colors underline",children:e==="customer"?s.jsxs(s.Fragment,{children:[s.jsx(xn,{className:"h-4 w-4"}),"Vendor Login"]}):s.jsxs(s.Fragment,{children:[s.jsx(Li,{className:"h-4 w-4"}),"Customer Login"]})})})}class aV{constructor(){Ht(this,"isInitialized",!1);Ht(this,"clientId","413898594267-m6kiake3vs83slgvp3e3uk6kcchlssf5.apps.googleusercontent.com");Ht(this,"isDevelopment",!1)}async setupPassword(t){try{const{response:n,data:r}=await Ve("/setup-password/",{method:"POST",body:JSON.stringify({password:t})});return n.ok&&r.success?{success:!0}:{success:!1,error:r.error||"Failed to setup password"}}catch(n){return{success:!1,error:n.message||"Network error during password setup"}}}async initialize(){if(!this.isInitialized)return this.isDevelopment&&this.clientId==="YOUR_GOOGLE_CLIENT_ID"?(console.warn("Google Auth: Using development mode - replace with real client ID"),this.isInitialized=!0,Promise.resolve(!0)):new Promise((t,n)=>{const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{window.google?(window.google.accounts.id.initialize({client_id:this.clientId,callback:this.handleCredentialResponse.bind(this),auto_select:!1,cancel_on_tap_outside:!0,ux_mode:"popup"}),this.isInitialized=!0,t(!0)):n(new Error("Google Identity Services failed to load"))},r.onerror=()=>{n(new Error("Failed to load Google Identity Services"))},document.head.appendChild(r)})}handleCredentialResponse(t){console.log("Google credential response:",t)}async signIn(){try{return await this.initialize(),this.showPopup()}catch(t){return{success:!1,error:t.message}}}async showPopup(){return new Promise(t=>{window.google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:"email profile",ux_mode:"popup",callback:async r=>{if(r.access_token)try{const i=await this.getUserInfo(r.access_token),a=await this.authenticateWithBackend(i);t(a)}catch(i){t({success:!1,error:i.message})}else r.error?t({success:!1,error:r.error}):t({success:!1,error:"No access token received"})}}).requestAccessToken()})}async getUserInfo(t){const n=await fetch(`https://www.googleapis.com/oauth2/v2/userinfo?access_token=${t}`);if(!n.ok)throw new Error("Failed to get user info from Google");return n.json()}async verifyGoogleToken(t){try{const{response:n,data:r}=await Ve("/auth/google/",{method:"POST",body:JSON.stringify({credential:t})},!1);return n.ok?{success:!0,user:r.user,token:r.token}:{success:!1,error:r.error||"Google authentication failed"}}catch(n){return{success:!1,error:n.message||"Network error during Google authentication"}}}async authenticateWithBackend(t){try{const{response:n,data:r}=await Ve("/auth/google/",{method:"POST",body:JSON.stringify({user_info:{email:t.email,name:t.name,google_id:t.id,picture:t.picture}})},!1);return n.ok&&r.success?{success:!0,user:{...r.user,available_roles:r.available_roles,profile_exists:r.profile_exists,is_approved:r.is_approved,is_rejected:r.is_rejected,rejection_reason:r.rejection_reason,rejection_date:r.rejection_date,user_created:r.user_created,needs_password_setup:r.needs_password_setup,google_login:r.google_login},token:r.token}:n.ok&&r.needs_privacy_agreement?{success:!1,needs_privacy_agreement:!0,user_id:r.user_id,user_type:r.user_type,has_vendor_profile:r.has_vendor_profile,error:r.message}:{success:!1,error:r.error||"Backend authentication failed"}}catch(n){return{success:!1,error:n.message||"Network error during backend authentication"}}}renderButton(t,n="outline",r="large"){if(!this.isInitialized){console.warn("Google Auth not initialized");return}window.google.accounts.id.renderButton(document.getElementById(t),{theme:n,size:r,type:"standard",shape:"rectangular",text:"continue_with",logo_alignment:"left",width:320})}}const Uc=new aV;class oV{constructor(){Ht(this,"isInitialized",!1);Ht(this,"appId","650860981240776");Ht(this,"isDevelopment",window.location.hostname==="localhost")}async initialize(){if(!this.isInitialized)return new Promise((t,n)=>{const r=document.createElement("script");r.src="https://connect.facebook.net/en_US/sdk.js",r.async=!0,r.defer=!0,r.onload=()=>{window.FB.init({appId:this.appId,cookie:!0,xfbml:!0,version:"v18.0"}),this.isInitialized=!0,t(!0)},r.onerror=()=>{n(new Error("Failed to load Facebook SDK"))},document.head.appendChild(r)})}async signIn(){try{return await this.initialize(),window.location.protocol==="http:"&&window.location.hostname!=="localhost"?{success:!1,error:"Facebook login requires HTTPS. Please use the ngrok URL: https://61229baf5ec0.ngrok-free.app"}:new Promise(t=>{window.FB.login(n=>{n.authResponse?this.getUserInfo().then(r=>this.authenticateWithBackend(r)).then(r=>t(r)).catch(r=>t({success:!1,error:r.message})):t({success:!1,error:"Facebook login cancelled"})},{scope:"email,public_profile"})})}catch(t){return{success:!1,error:t.message}}}async getUserInfo(){return new Promise((t,n)=>{window.FB.api("/me",{fields:"id,name,email,picture"},r=>{r&&!r.error?t(r):n(new Error("Failed to get user info from Facebook"))})})}async authenticateWithBackend(t){var n,r;try{const{response:i,data:a}=await Ve("/auth/facebook/",{method:"POST",body:JSON.stringify({user_info:{email:t.email,name:t.name,facebook_id:t.id,picture:(r=(n=t.picture)==null?void 0:n.data)==null?void 0:r.url}})},!1);return i.ok&&a.success?{success:!0,user:{...a.user,available_roles:a.available_roles,profile_exists:a.profile_exists,is_approved:a.is_approved,is_rejected:a.is_rejected,rejection_reason:a.rejection_reason,rejection_date:a.rejection_date,user_created:a.user_created,needs_password_setup:a.needs_password_setup,facebook_login:a.facebook_login},token:a.token}:{success:!1,error:a.error||"Backend authentication failed"}}catch(i){return{success:!1,error:i.message||"Network error during backend authentication"}}}}const IP=new oV;function MP({user:e,onComplete:t,onSkip:n}){const{updateUser:r}=Fn(),[i,a]=_.useState({phone_number:e.phone_number||"",address:e.address||"",password:"",confirmPassword:""}),[o,l]=_.useState(!1),[d,h]=_.useState(!1),[f,u]=_.useState(""),[m,p]=_.useState(1),w=x=>{const{name:j,value:N}=x.target;a(S=>({...S,[j]:N}))},y=async()=>{if(u(""),!i.phone_number){u("Phone number is required");return}if(i.phone_number.length<10){u("Please enter a valid phone number");return}h(!0);try{const{response:x,data:j}=await Ve("/profile/update/",{method:"PUT",body:JSON.stringify({phone_number:i.phone_number,address:i.address})});x.ok?(await r({...e,phone_number:i.phone_number,address:i.address}),p(2)):u(j.error||"Failed to update profile")}catch{u("Failed to update profile. Please try again.")}finally{h(!1)}},b=async()=>{if(u(""),i.password){if(i.password.length<6){u("Password must be at least 6 characters long");return}if(i.password!==i.confirmPassword){u("Passwords do not match");return}}h(!0);try{if(i.password){const x=await Uc.setupPassword(i.password);if(!x.success){u(x.error||"Failed to setup password"),h(!1);return}}t()}catch{u("Failed to setup password. Please try again.")}finally{h(!1)}},g=()=>{t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto",children:m===1?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Complete Your Profile"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Please provide some additional information to complete your account setup."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx(_e,{type:"email",value:e.email,disabled:!0,className:"bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),s.jsx(_e,{type:"tel",name:"phone_number",value:i.phone_number,onChange:w,placeholder:"Enter your phone number",className:"focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address (Optional)"}),s.jsx(_e,{type:"text",name:"address",value:i.address,onChange:w,placeholder:"Enter your address",className:"focus:ring-2 focus:ring-blue-500"})]}),f&&s.jsx("p",{className:"text-red-600 text-sm text-center",children:f}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(se,{onClick:n,variant:"outline",className:"flex-1",disabled:d,children:"Skip for now"}),s.jsx(se,{onClick:y,disabled:!i.phone_number||d,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:d?"Saving...":"Continue"})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Set Up Password (Optional)"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Create a password to login with email and password in the future."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password (Optional)"}),s.jsx(_e,{type:o?"text":"password",name:"password",value:i.password,onChange:w,placeholder:"Enter password (min 6 characters)",className:"pr-10 focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute inset-y-0 right-0 flex items-center pr-3 mt-6",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),i.password&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),s.jsx(_e,{type:"password",name:"confirmPassword",value:i.confirmPassword,onChange:w,placeholder:"Confirm password",className:"focus:ring-2 focus:ring-blue-500"})]}),f&&s.jsx("p",{className:"text-red-600 text-sm text-center",children:f}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(se,{onClick:g,variant:"outline",className:"flex-1",disabled:d,children:"Skip password"}),s.jsx(se,{onClick:b,disabled:d||i.password&&!i.confirmPassword,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:d?"Setting up...":"Complete Setup"})]})]}),s.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"You can always set up a password later from your profile settings."})]})})})}function sg(e){const t=_.useRef({value:e,previous:e});return _.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ng="Checkbox",[lV,Qie]=_n(ng),[cV,yw]=lV(ng);function dV(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:i,disabled:a,form:o,name:l,onCheckedChange:d,required:h,value:f="on",internal_do_not_use_render:u}=e,[m,p]=ei({prop:n,defaultProp:i??!1,onChange:d,caller:ng}),[w,y]=_.useState(null),[b,g]=_.useState(null),x=_.useRef(!1),j=w?!!o||!!w.closest("form"):!0,N={checked:m,disabled:a,setChecked:p,control:w,setControl:y,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:x,required:h,defaultChecked:Ja(i)?!1:i,isFormControl:j,bubbleInput:b,setBubbleInput:g};return s.jsx(cV,{scope:t,...N,children:uV(u)?u(N):r})}var DP="CheckboxTrigger",FP=_.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},i)=>{const{control:a,value:o,disabled:l,checked:d,required:h,setControl:f,setChecked:u,hasConsumerStoppedPropagationRef:m,isFormControl:p,bubbleInput:w}=yw(DP,e),y=jt(i,f),b=_.useRef(d);return _.useEffect(()=>{const g=a==null?void 0:a.form;if(g){const x=()=>u(b.current);return g.addEventListener("reset",x),()=>g.removeEventListener("reset",x)}},[a,u]),s.jsx(ut.button,{type:"button",role:"checkbox","aria-checked":Ja(d)?"mixed":d,"aria-required":h,"data-state":UP(d),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:y,onKeyDown:Ke(t,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:Ke(n,g=>{u(x=>Ja(x)?!0:!x),w&&p&&(m.current=g.isPropagationStopped(),m.current||g.stopPropagation())})})});FP.displayName=DP;var bw=_.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:d,onCheckedChange:h,form:f,...u}=e;return s.jsx(dV,{__scopeCheckbox:n,checked:i,defaultChecked:a,disabled:l,required:o,onCheckedChange:h,name:r,form:f,value:d,internal_do_not_use_render:({isFormControl:m})=>s.jsxs(s.Fragment,{children:[s.jsx(FP,{...u,ref:t,__scopeCheckbox:n}),m&&s.jsx(VP,{__scopeCheckbox:n})]})})});bw.displayName=ng;var $P="CheckboxIndicator",BP=_.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,a=yw($P,n);return s.jsx(hn,{present:r||Ja(a.checked)||a.checked===!0,children:s.jsx(ut.span,{"data-state":UP(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});BP.displayName=$P;var zP="CheckboxBubbleInput",VP=_.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:l,disabled:d,name:h,value:f,form:u,bubbleInput:m,setBubbleInput:p}=yw(zP,e),w=jt(n,p),y=sg(a),b=Hp(r);_.useEffect(()=>{const x=m;if(!x)return;const j=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(j,"checked").set,C=!i.current;if(y!==a&&S){const T=new Event("click",{bubbles:C});x.indeterminate=Ja(a),S.call(x,Ja(a)?!1:a),x.dispatchEvent(T)}},[m,y,a,i]);const g=_.useRef(Ja(a)?!1:a);return s.jsx(ut.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??g.current,required:l,disabled:d,name:h,value:f,form:u,...t,tabIndex:-1,ref:w,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});VP.displayName=zP;function uV(e){return typeof e=="function"}function Ja(e){return e==="indeterminate"}function UP(e){return Ja(e)?"indeterminate":e?"checked":"unchecked"}const Um=_.forwardRef(({className:e,...t},n)=>s.jsx(bw,{ref:n,className:at("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(BP,{className:at("flex items-center justify-center text-current"),children:s.jsx(Yu,{className:"h-4 w-4"})})}));Um.displayName=bw.displayName;function qP({userId:e,userType:t,hasVendorProfile:n,onComplete:r,onCancel:i}){const[a,o]=_.useState(!1),[l,d]=_.useState(!1),[h,f]=_.useState(""),{login:u}=Fn(),m=lt(),p=Dn();_.useEffect(()=>{const b=sessionStorage.getItem("privacyAgreementState");b&&JSON.parse(b).returnUrl===window.location.pathname&&sessionStorage.removeItem("privacyAgreementState")},[]);const w=async()=>{if(!a){f("You must agree to the privacy policy to continue");return}d(!0),f("");try{const{response:b,data:g}=await Ve("/agree-privacy-policy/",{method:"POST",body:JSON.stringify({user_id:e,agreed:!0})},!1);if(!b.ok)throw new Error((g==null?void 0:g.error)||"Failed to agree to privacy policy");if(g.success&&g.user&&g.token){const x={...g.user,available_roles:g.available_roles||["customer"],user_type:g.user.user_type||"customer",current_role:g.user.user_type||"customer"};await u(x,g.token),r(x,g.token),setTimeout(async()=>{var N,S;if(!await ju.executePendingAction()){const A=new URLSearchParams(window.location.search).get("returnTo")||((S=(N=p.state)==null?void 0:N.from)==null?void 0:S.pathname)||"/home";m(A,{replace:!0})}},100)}else throw new Error("Invalid response from server")}catch(b){f(b.message)}finally{d(!1)}},y=()=>{i?i():m("/login")};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Privacy Policy Agreement"}),s.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[s.jsx("p",{className:"mb-2",children:"Before you can continue, please read and agree to our privacy policy."}),n&&s.jsx("p",{className:"mb-2 text-blue-600 font-medium",children:"As a vendor, you need to agree to our privacy policy to access vendor features."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 max-h-48 overflow-y-auto text-sm",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Privacy Policy Summary"}),s.jsxs("div",{className:"space-y-2 text-gray-700",children:[s.jsx("p",{children:" We collect and process your personal information to provide our services"}),s.jsx("p",{children:" Your data is used to facilitate transactions between customers and vendors"}),s.jsx("p",{children:" We implement security measures to protect your information"}),s.jsx("p",{children:" You have rights regarding your personal data"}),s.jsx("p",{children:" We may share information as required by law or to provide services"}),s.jsx("p",{children:" Cookies and similar technologies are used to improve user experience"})]}),s.jsx("div",{className:"mt-3",children:s.jsx("button",{onClick:()=>{sessionStorage.setItem("privacyAgreementState",JSON.stringify({userId:e,userType:t,hasVendorProfile:n,returnUrl:window.location.pathname})),m("/privacy-policy")},className:"text-blue-600 hover:text-blue-700 text-sm underline",children:"Read Full Privacy Policy"})})]}),s.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[s.jsx(Um,{id:"privacy-agreement",checked:a,onCheckedChange:b=>o(b),className:"mt-1"}),s.jsxs("label",{htmlFor:"privacy-agreement",className:"text-sm text-gray-700 cursor-pointer",children:["I have read and agree to the"," ",s.jsx("button",{onClick:()=>{sessionStorage.setItem("privacyAgreementState",JSON.stringify({userId:e,userType:t,hasVendorProfile:n,returnUrl:window.location.pathname})),m("/privacy-policy")},className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})]})]}),h&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-red-600 text-sm",children:h})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(se,{onClick:y,variant:"outline",className:"flex-1",disabled:l,children:"Cancel"}),s.jsx(se,{onClick:w,disabled:!a||l,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:l?"Processing...":"Agree & Continue"})]})]})})})}function hV(){const e=lt(),t=Dn(),{login:n}=Fn(),[r,i]=_.useState("password"),[a,o]=_.useState(""),[l,d]=_.useState(""),[h,f]=_.useState(""),[u,m]=_.useState(!1),[p,w]=_.useState(!1),[y,b]=_.useState(!1),[g,x]=_.useState(""),[j,N]=_.useState(!1),[S,C]=_.useState(!1);_.useState(!1);const[T,A]=_.useState(!1),[I,P]=_.useState(null),[R,E]=_.useState(!1),[F,O]=_.useState(null);_.useEffect(()=>{const Y=sessionStorage.getItem("privacyAgreementState");if(Y){const G=JSON.parse(Y);O({userId:G.userId,userType:G.userType,hasVendorProfile:G.hasVendorProfile}),E(!0),sessionStorage.removeItem("privacyAgreementState");return}(async()=>{try{const G=localStorage.getItem("rememberedCredentials");if(G){const{phone:J,rememberMe:ie}=JSON.parse(G);ie&&(o(J),N(!0))}await Ce.isAuthenticated()&&(await Ce.isSessionValid()||await Ce.clearAuth())}catch(G){console.error("Session check failed:",G)}})(),Uc.initialize().catch(console.error),IP.initialize().catch(console.error)},[]);const M=async()=>{b(!0),x("");try{await Ce.clearAuth();const{response:Y,data:U}=await Ve("/login/",{method:"POST",body:JSON.stringify({username:a,password:l})},!1);if(!Y.ok)throw new Error((U==null?void 0:U.error)||"Login failed");if(U.needs_privacy_agreement){O({userId:U.user_id,userType:U.user_type,hasVendorProfile:U.has_vendor_profile}),E(!0);return}if(U.user&&U.token){const G={...U.user,available_roles:U.available_roles||["customer"],user_type:U.user.user_type||"customer",current_role:U.user.user_type||"customer"};await n(G,U.token),j?localStorage.setItem("rememberedCredentials",JSON.stringify({phone:a,rememberMe:!0})):localStorage.removeItem("rememberedCredentials"),setTimeout(async()=>{var J,ie;if(!await ju.executePendingAction()){const xe=new URLSearchParams(window.location.search),Se=xe.get("redirect"),ue=xe.get("returnTo"),he=Se||ue||((ie=(J=t.state)==null?void 0:J.from)==null?void 0:ie.pathname)||"/home";e(he,{replace:!0})}},100)}else throw new Error("Invalid login response")}catch(Y){x(Y.message)}finally{b(!1)}},Z=async()=>{b(!0),x("");try{const{response:Y,data:U}=await Ve("/send-otp/",{method:"POST",body:JSON.stringify({email:a})},!1);if(!Y.ok)throw new Error((U==null?void 0:U.error)||"Failed to send OTP");w(!0),x("OTP sent successfully")}catch(Y){x(Y.message)}finally{b(!1)}},X=async()=>{b(!0),x("");try{const{response:Y,data:U}=await Ve("/verify-otp/",{method:"POST",body:JSON.stringify({email:a,otp:h})},!1);if(!Y.ok)throw new Error((U==null?void 0:U.error)||"OTP verification failed");if(U.needs_privacy_agreement){O({userId:U.user_id,userType:U.user_type,hasVendorProfile:U.has_vendor_profile}),E(!0);return}if(U.user&&U.token){const G={...U.user,available_roles:U.available_roles||["customer"],user_type:U.user.user_type||"customer",current_role:U.user.user_type||"customer"};await n(G,U.token)}setTimeout(async()=>{var ne,J;if(!await ju.executePendingAction()){const ie=new URLSearchParams(window.location.search),xe=ie.get("redirect"),Se=ie.get("returnTo"),ue=xe||Se||((J=(ne=t.state)==null?void 0:ne.from)==null?void 0:J.pathname)||"/home";e(ue,{replace:!0})}},100)}catch(Y){x(Y.message)}finally{b(!1)}},z=()=>{e("/signup")},D=async()=>{C(!0),x("");try{const Y=await Uc.signIn();if(Y.success&&Y.user&&Y.token){const U={...Y.user,available_roles:Y.user.available_roles||["customer"],user_type:Y.user.user_type||"customer",current_role:Y.user.current_role||Y.user.user_type||"customer"};await n(U,Y.token),await Ce.setAuth(Y.token,U),j&&localStorage.setItem("rememberedCredentials",JSON.stringify({phone:Y.user.email,rememberMe:!0})),Y.user.user_created||!Y.user.phone_number?(P({userData:U,token:Y.token}),A(!0)):B()}else Y.needs_privacy_agreement?(O({userId:Y.user_id,userType:Y.user_type,hasVendorProfile:Y.has_vendor_profile}),E(!0)):x(Y.error||"Google login failed")}catch{x("Google login failed. Please try again.")}finally{C(!1)}},B=()=>{setTimeout(async()=>{var U,G;if(!await ju.executePendingAction()){const ne=new URLSearchParams(window.location.search),J=ne.get("redirect"),ie=ne.get("returnTo"),xe=J||ie||((G=(U=t.state)==null?void 0:U.from)==null?void 0:G.pathname)||"/home";e(xe,{replace:!0})}},100)},V=()=>{A(!1),B()},H=()=>{A(!1),B()},q=(Y,U)=>{E(!1),O(null)},W=()=>{E(!1),O(null),x("Privacy policy agreement is required to login")};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[s.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 left-4 w-8 h-8 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors z-10",children:s.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),s.jsx(LP,{currentType:"customer"}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("div",{className:"w-full max-w-80 mx-auto px-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsx("img",{src:ua,alt:"ezeyway",className:"w-16 h-16 mx-auto mb-6"})}),s.jsx("div",{className:"text-center mb-4",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 bg-blue-50 px-3 py-1 rounded-full",children:"Customer Login"})}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"flex space-x-8",children:[s.jsx("button",{onClick:()=>i("password"),className:`pb-2 text-sm font-medium transition-colors ${r==="password"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Password"}),s.jsx("button",{onClick:()=>i("otp"),className:`pb-2 text-sm font-medium transition-colors ${r==="otp"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"OTP"})]})}),r==="password"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(_e,{type:"text",value:a,onChange:Y=>o(Y.target.value),placeholder:"Phone Number or Email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"relative",children:[s.jsx(_e,{type:u?"text":"password",value:l,onChange:Y=>d(Y.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"rememberMe",checked:j,onChange:Y=>N(Y.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),s.jsx("label",{htmlFor:"rememberMe",className:"text-sm text-gray-700",children:"Remember my email"})]}),g&&s.jsx("p",{className:"text-red-600 text-center",children:g}),s.jsx(se,{onClick:M,disabled:!a||!l||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Logging in...":"Login"})]}),r==="otp"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(_e,{type:"text",value:a,onChange:Y=>o(Y.target.value),placeholder:"Enter your phone number or email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),g&&s.jsx("p",{className:"text-red-600 text-center",children:g}),p?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(_e,{type:"text",value:h,onChange:Y=>f(Y.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),s.jsx(se,{onClick:X,disabled:h.length!==6||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Verifying...":"Verify & Login"}),s.jsx("button",{onClick:Z,disabled:y,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}):s.jsx(se,{onClick:Z,disabled:!a||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Sending...":"Send OTP"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 to-indigo-100 text-gray-500",children:"or"})})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:D,disabled:S,className:"w-12 h-12 bg-white hover:bg-gray-50 border border-gray-300 rounded-full flex items-center justify-center transition-colors shadow-sm",children:S?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):s.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})})})]}),s.jsxs("div",{className:"text-center space-y-3 mt-6",children:[s.jsx("button",{onClick:z,className:"text-blue-600 hover:text-blue-700 text-sm font-medium block mx-auto",children:"Don't have an account? Sign up"}),s.jsx("button",{onClick:()=>e("/privacy-policy"),className:"text-gray-500 hover:text-gray-700 text-sm block mx-auto",children:"Privacy Policy"})]})]})})}),T&&I&&s.jsx(MP,{user:I.userData,onComplete:V,onSkip:H}),R&&F&&s.jsx(qP,{userId:F.userId,userType:F.userType,hasVendorProfile:F.hasVendorProfile,onComplete:q,onCancel:W})]})}const fV=Nh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ze({className:e,variant:t,...n}){return s.jsx("div",{className:at(fV({variant:t}),e),...n})}let Gv=null;const mV=async()=>{if(!Gv){const{notificationService:e}=await ze(async()=>{const{notificationService:t}=await Promise.resolve().then(()=>HP);return{notificationService:t}},void 0);Gv=e}return Gv};class pV{async getConversations(){try{const{response:t,data:n}=await Ve("messaging/conversations/");return t.ok?Array.isArray(n)?n:(n==null?void 0:n.results)||[]:[]}catch{return[]}}async getMessages(t){try{const{response:n,data:r}=await Ve(`messaging/conversations/${t}/messages/`);return n.ok?(console.log("Messages API response:",r),Array.isArray(r)?r:(r==null?void 0:r.results)||[]):(console.error(`Messages API error: ${n.status}`),[])}catch(n){return console.error("Messages API error:",n),[]}}async sendMessage(t){try{const n=new FormData;t.conversation_id&&n.append("conversation_id",t.conversation_id.toString()),t.recipient_id&&n.append("recipient_id",t.recipient_id.toString()),n.append("message_type",t.message_type),t.content&&n.append("content",t.content),t.file&&n.append("file",t.file);const{response:r,data:i}=await Ve("/messaging/messages/send/",{method:"POST",body:n});if(!r.ok)throw console.error(`Message send failed: ${r.status}`),new Error(`HTTP ${r.status}`);return console.log("Message sent successfully:",i),i}catch{console.warn("Backend not available, simulating message send");const r=await Ce.getUser();return{message:{id:Date.now(),sender:{id:(r==null?void 0:r.id)||0,username:(r==null?void 0:r.username)||"You"},message_type:t.message_type,content:t.content,status:"sent",is_pinned:!1,created_at:new Date().toISOString(),is_read:!1}}}}async handleIncomingMessage(t,n){try{(await mV()).showBrowserNotification(`New message from ${n}`,{body:t.content||"New message received",tag:`message-${t.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/messages"}}),window.dispatchEvent&&window.dispatchEvent(new CustomEvent("newMessage",{detail:{message:t,senderName:n}}))}catch(r){console.error("Failed to handle incoming message notification:",r)}}async getOrCreateConversation(t){try{const{response:n,data:r}=await Ve(`messaging/conversations/user/${t}/`);if(!n.ok)throw new Error(`HTTP ${n.status}`);return r||this.createMockConversation(t)}catch{return console.warn("Backend not available, creating mock conversation"),this.createMockConversation(t)}}createMockConversation(t){return{id:t,participants:[],last_message:void 0,unread_count:0,other_participant:{id:t,username:t===1?"EzzeYway Support":`User ${t}`,profile_picture:void 0}}}}const rr=new pV;typeof window<"u"&&window.addEventListener("message",async e=>{var t,n;if(((t=e.data)==null?void 0:t.type)==="new_message"){const{message:r}=e.data;await rr.handleIncomingMessage(r,((n=r.sender)==null?void 0:n.username)||"Unknown")}});class gV{constructor(){Ht(this,"audio",null);Ht(this,"isInitialized",!1)}async initialize(){if(!this.isInitialized){if(this.audio=null,"serviceWorker"in navigator&&!gt.isNativePlatform())try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered successfully"),navigator.serviceWorker.addEventListener("message",n=>{n.data&&n.data.type==="SHOW_ORDER_MODAL"&&window.dispatchEvent(new CustomEvent("showOrderModal",{detail:n.data.data}))}),document.addEventListener("visibilitychange",()=>{navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"VISIBILITY_CHANGE",hidden:document.hidden})}),"sync"in t&&t.sync.register("background-sync-orders")}catch(t){console.error("Service Worker registration failed:",t)}!gt.isNativePlatform()&&"Notification"in window&&(Notification.permission==="default"?await Notification.requestPermission()==="granted"?(console.log("Notification permission granted"),this.showTestNotification()):console.warn("Notification permission denied"):Notification.permission==="granted"&&console.log("Notification permission already granted")),console.log("Notification service initialized for:",gt.isNativePlatform()?"mobile":"web"),this.isInitialized=!0}}async initializeMobileNotifications(){try{if(gt.isNativePlatform()){const{LocalNotifications:t}=await ze(async()=>{const{LocalNotifications:a}=await import("./index-B040m1d6.js");return{LocalNotifications:a}},[]),{PushNotifications:n}=await ze(async()=>{const{PushNotifications:a}=await Promise.resolve().then(()=>Z4);return{PushNotifications:a}},void 0),{Haptics:r,ImpactStyle:i}=await ze(async()=>{const{Haptics:a,ImpactStyle:o}=await import("./index-C5Sw6Z7J.js");return{Haptics:a,ImpactStyle:o}},[]);await t.requestPermissions(),await n.requestPermissions(),await n.register(),n.addListener("pushNotificationReceived",async a=>{console.log("Push notification received:",a),await this.handleMobileOrderNotification(a.data)}),n.addListener("pushNotificationActionPerformed",async a=>{console.log("Push notification tapped:",a);const o=a.notification.data;(o==null?void 0:o.type)==="order"&&(await r.impact({style:i.Heavy}),this.openOrderModal(o))}),t.addListener("localNotificationActionPerformed",async a=>{console.log("Local notification tapped:",a);const o=a.notification.extra;(o==null?void 0:o.type)==="order"&&(await r.impact({style:i.Heavy}),this.openOrderModal(o))})}}catch(t){console.error("Failed to initialize mobile notifications:",t)}}async playNotificationSound(){this.createBeepSound()}createBeepSound(){try{const t=new(window.AudioContext||window.webkitAudioContext);this.playBeep(t,523,.2,.3),setTimeout(()=>this.playBeep(t,659,.2,.3),200),setTimeout(()=>this.playBeep(t,784,.3,.4),400)}catch(t){console.warn("Web Audio API not supported:",t)}}playBeep(t,n,r,i){const a=t.createOscillator(),o=t.createGain();a.connect(o),o.connect(t.destination),a.frequency.value=n,a.type="sine",o.gain.setValueAtTime(0,t.currentTime),o.gain.linearRampToValueAtTime(i,t.currentTime+.05),o.gain.exponentialRampToValueAtTime(.01,t.currentTime+r),a.start(t.currentTime),a.stop(t.currentTime+r)}async showTestNotification(){if(!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const t=new Notification("Notifications Enabled!",{body:"You will now receive order notifications even when the app is in the background.",icon:"/favicon.ico",badge:"/favicon.ico",tag:"test-notification",requireInteraction:!1});setTimeout(()=>t.close(),3e3)}}async showOrderNotification(t,n,r){if(!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const i=new Notification(" New Order Received!",{body:`Order #${t} - ${n}
Tap to view and respond`,icon:"/favicon.ico",tag:`order-${r}`,requireInteraction:!0});i.onclick=()=>{window.focus(),this.openOrderModal({orderId:r,orderNumber:t,amount:n}),i.close()},setTimeout(()=>i.close(),15e3)}gt.isNativePlatform()&&("vibrate"in navigator&&navigator.vibrate([300,100,300,100,500]),this.openOrderModal({orderId:r,orderNumber:t,amount:n}))}async showBrowserNotification(t,n,r,i){if(!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const a=new Notification(t,{body:n,icon:"/favicon.ico",badge:"/favicon.ico",tag:`message-${r}`,requireInteraction:!0,data:{conversationId:r,userType:i}});a.onclick=()=>{window.focus(),this.navigateToConversation(r,i),a.close()},setTimeout(()=>a.close(),1e4)}}async showMobileOrderNotification(t,n,r){if(gt.isNativePlatform())try{const{LocalNotifications:i}=await ze(async()=>{const{LocalNotifications:l}=await import("./index-B040m1d6.js");return{LocalNotifications:l}},[]),{Haptics:a,ImpactStyle:o}=await ze(async()=>{const{Haptics:l,ImpactStyle:d}=await import("./index-C5Sw6Z7J.js");return{Haptics:l,ImpactStyle:d}},[]);await a.impact({style:o.Heavy}),await i.schedule({notifications:[{title:" New Order Received!",body:`Order #${t} - ${n}
Tap to accept/reject`,id:Date.now(),sound:"default",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF6B35",actionTypeId:"OPEN_ORDER",extra:{type:"order",orderId:r,orderNumber:t,amount:n,autoOpen:!0}}]})}catch(i){console.error("Failed to show mobile order notification:",i)}}async showMobileNotification(t,n,r,i){if(gt.isNativePlatform())try{const{LocalNotifications:a}=await ze(async()=>{const{LocalNotifications:o}=await import("./index-B040m1d6.js");return{LocalNotifications:o}},[]);await a.schedule({notifications:[{title:t,body:n,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"default",attachments:[],actionTypeId:"OPEN_MESSAGE",extra:{conversationId:r,userType:i}}]})}catch(a){console.error("Failed to show mobile notification:",a)}}openOrderModal(t){if(window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t})),gt.isNativePlatform()){const n=window.location.pathname;!n.includes("/vendor/orders")&&!n.includes("/vendor/dashboard")&&(window.location.href="/vendor/orders")}}async handleMobileOrderNotification(t){try{const{Haptics:n,ImpactStyle:r}=await ze(async()=>{const{Haptics:i,ImpactStyle:a}=await import("./index-C5Sw6Z7J.js");return{Haptics:i,ImpactStyle:a}},[]);await n.impact({style:r.Heavy}),await this.playNotificationSound(),this.openOrderModal(t)}catch(n){console.error("Error handling mobile order notification:",n)}}navigateToConversation(t,n){const i={vendor:`/vendor/messages/${t}`,customer:`/messages/${t}`,superadmin:`/accounts/superadmin/messages/${t}/`}[n];i&&(window.location.href=i)}async notifyNewMessage(t,n,r,i){await this.initialize();const a=`New message from ${t}`,o=n.length>50?n.substring(0,50)+"...":n;await this.playNotificationSound(),await this.showBrowserNotification(a,o,r,i),await this.showMobileNotification(a,o,r,i)}async requestPermissions(){return await this.initialize(),!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"}async requestPermission(){return this.requestPermissions()}async getNotifications(){try{const{apiRequest:t}=await ze(async()=>{const{apiRequest:i}=await Promise.resolve().then(()=>us);return{apiRequest:i}},void 0),{response:n,data:r}=await t("/vendor-notifications/");return n.ok&&r?r.results||r||[]:[]}catch(t){return console.warn("Notifications API not available:",t.message),[]}}async getUnreadCount(){try{return(await this.getNotifications()).filter(n=>!n.read).length}catch(t){return console.warn("Failed to get unread count:",t.message),0}}async markAsRead(t){try{const{apiRequest:n}=await ze(async()=>{const{apiRequest:i}=await Promise.resolve().then(()=>us);return{apiRequest:i}},void 0),{response:r}=await n(`/notifications/${t}/read/`,{method:"POST"});r.ok&&console.log("Notification marked as read:",t)}catch(n){console.error("Failed to mark notification as read:",n)}}async markAllAsRead(){try{const{apiRequest:t}=await ze(async()=>{const{apiRequest:r}=await Promise.resolve().then(()=>us);return{apiRequest:r}},void 0),{response:n}=await t("/notifications/mark-all-read/",{method:"POST"});n.ok&&console.log("All notifications marked as read")}catch(t){console.error("Failed to mark all notifications as read:",t)}}async showBrowserNotificationCompat(t,n){if(await this.playNotificationSound(),!gt.isNativePlatform()&&"Notification"in window&&Notification.permission==="granted"){const r=new Notification(t,{body:n.body,icon:"/favicon.ico",badge:"/favicon.ico",tag:n.tag,requireInteraction:n.requireInteraction,data:n.data,silent:!1});r.onclick=()=>{var i;window.focus(),(i=n.data)!=null&&i.actionUrl&&(window.location.href=n.data.actionUrl),r.close()},setTimeout(()=>r.close(),1e4)}}}const ds=new gV,HP=Object.freeze(Object.defineProperty({__proto__:null,notificationService:ds},Symbol.toStringTag,{value:"Module"}));function WP(){const[e,t]=_.useState([]),[n,r]=_.useState(0),[i,a]=_.useState(!1),o=async()=>{var h,f;try{const{authService:u}=await ze(async()=>{const{authService:y}=await Promise.resolve().then(()=>ra);return{authService:y}},void 0);if(!await u.getToken())return;a(!0);const[p,w]=await Promise.all([ds.getNotifications(),ds.getUnreadCount()]);t(p),r(w)}catch(u){(h=u.message)!=null&&h.includes("401")||(f=u.message)!=null&&f.includes("Unauthorized")?(t([]),r(0)):console.error("Failed to load notifications:",u)}finally{a(!1)}},l=async h=>{try{await ds.markAsRead(h),r(f=>Math.max(0,f-1)),t(f=>f.map(u=>u.id===h?{...u,read:!0}:u))}catch(f){console.error("Failed to mark notification as read:",f)}},d=async()=>{try{await ds.markAllAsRead(),r(0),t(h=>h.map(f=>({...f,read:!0})))}catch(h){console.error("Failed to mark all notifications as read:",h)}};return _.useEffect(()=>{o();const h=setInterval(o,1e4);return()=>clearInterval(h)},[]),_.useEffect(()=>{ds.requestPermission()},[]),{notifications:e,unreadCount:n,isLoading:i,markAsRead:l,markAllAsRead:d,refreshNotifications:o}}const po=()=>{const e=lt(),{user:t,state:n}=Fn(),r=async(l,d)=>{if(!(t&&n.isAuthenticated)){console.log("User not authenticated, redirecting to login"),d&&ju.setPendingAction(d);const f=window.location.pathname+window.location.search;e(`/login?returnTo=${encodeURIComponent(f)}`);return}console.log("User authenticated, executing action");try{await l()}catch(f){console.error("Error executing authenticated action:",f)}};return{executeWithAuth:r,addToCartWithAuth:(l,d=1)=>r(async()=>{const{cartService:h}=await ze(async()=>{const{cartService:f}=await Promise.resolve().then(()=>PP);return{cartService:f}},void 0);await h.addToCart(l,d)},{type:"add_to_cart",data:{productId:l,quantity:d}}),buyNowWithAuth:l=>r(async()=>{console.log("useAuthAction - Setting buyNowProduct in localStorage:",l),localStorage.setItem("buyNowProduct",JSON.stringify(l)),console.log("useAuthAction - Navigating to checkout with directBuy=true"),e("/checkout?directBuy=true")},{type:"buy_now",data:l}),navigateWithAuth:l=>r(()=>e(l),{type:"navigate",path:l}),isAuthenticated:!!(t&&n.isAuthenticated)}};var vV=_.createContext(void 0);function hd(e){const t=_.useContext(vV);return e||t||"ltr"}var Kv=0;function ww(){_.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??M1()),document.body.insertAdjacentElement("beforeend",e[1]??M1()),Kv++,()=>{Kv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Kv--}},[])}function M1(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Zv="focusScope.autoFocusOnMount",Yv="focusScope.autoFocusOnUnmount",D1={bubbles:!1,cancelable:!0},xV="FocusScope",rg=_.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,d]=_.useState(null),h=ks(i),f=ks(a),u=_.useRef(null),m=jt(t,y=>d(y)),p=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let y=function(j){if(p.paused||!l)return;const N=j.target;l.contains(N)?u.current=N:Ea(u.current,{select:!0})},b=function(j){if(p.paused||!l)return;const N=j.relatedTarget;N!==null&&(l.contains(N)||Ea(u.current,{select:!0}))},g=function(j){if(document.activeElement===document.body)for(const S of j)S.removedNodes.length>0&&Ea(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const x=new MutationObserver(g);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),x.disconnect()}}},[r,l,p.paused]),_.useEffect(()=>{if(l){$1.add(p);const y=document.activeElement;if(!l.contains(y)){const g=new CustomEvent(Zv,D1);l.addEventListener(Zv,h),l.dispatchEvent(g),g.defaultPrevented||(yV(NV(GP(l)),{select:!0}),document.activeElement===y&&Ea(l))}return()=>{l.removeEventListener(Zv,h),setTimeout(()=>{const g=new CustomEvent(Yv,D1);l.addEventListener(Yv,f),l.dispatchEvent(g),g.defaultPrevented||Ea(y??document.body,{select:!0}),l.removeEventListener(Yv,f),$1.remove(p)},0)}}},[l,h,f,p]);const w=_.useCallback(y=>{if(!n&&!r||p.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,g=document.activeElement;if(b&&g){const x=y.currentTarget,[j,N]=bV(x);j&&N?!y.shiftKey&&g===N?(y.preventDefault(),n&&Ea(j,{select:!0})):y.shiftKey&&g===j&&(y.preventDefault(),n&&Ea(N,{select:!0})):g===x&&y.preventDefault()}},[n,r,p.paused]);return s.jsx(ut.div,{tabIndex:-1,...o,ref:m,onKeyDown:w})});rg.displayName=xV;function yV(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Ea(r,{select:t}),document.activeElement!==n)return}function bV(e){const t=GP(e),n=F1(t,e),r=F1(t.reverse(),e);return[n,r]}function GP(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function F1(e,t){for(const n of e)if(!wV(n,{upTo:t}))return n}function wV(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function _V(e){return e instanceof HTMLInputElement&&"select"in e}function Ea(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&_V(e)&&t&&e.select()}}var $1=jV();function jV(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=B1(e,t),e.unshift(t)},remove(t){var n;e=B1(e,t),(n=e[0])==null||n.resume()}}}function B1(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function NV(e){return e.filter(t=>t.tagName!=="A")}var Xv="rovingFocusGroup.onEntryFocus",SV={bubbles:!1,cancelable:!0},Ph="RovingFocusGroup",[Dy,KP,kV]=Ip(Ph),[CV,fd]=_n(Ph,[kV]),[EV,TV]=CV(Ph),ZP=_.forwardRef((e,t)=>s.jsx(Dy.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Dy.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(PV,{...e,ref:t})})}));ZP.displayName=Ph;var PV=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...u}=e,m=_.useRef(null),p=jt(t,m),w=hd(a),[y,b]=ei({prop:o,defaultProp:l??null,onChange:d,caller:Ph}),[g,x]=_.useState(!1),j=ks(h),N=KP(n),S=_.useRef(!1),[C,T]=_.useState(0);return _.useEffect(()=>{const A=m.current;if(A)return A.addEventListener(Xv,j),()=>A.removeEventListener(Xv,j)},[j]),s.jsx(EV,{scope:n,orientation:r,dir:w,loop:i,currentTabStopId:y,onItemFocus:_.useCallback(A=>b(A),[b]),onItemShiftTab:_.useCallback(()=>x(!0),[]),onFocusableItemAdd:_.useCallback(()=>T(A=>A+1),[]),onFocusableItemRemove:_.useCallback(()=>T(A=>A-1),[]),children:s.jsx(ut.div,{tabIndex:g||C===0?-1:0,"data-orientation":r,...u,ref:p,style:{outline:"none",...e.style},onMouseDown:Ke(e.onMouseDown,()=>{S.current=!0}),onFocus:Ke(e.onFocus,A=>{const I=!S.current;if(A.target===A.currentTarget&&I&&!g){const P=new CustomEvent(Xv,SV);if(A.currentTarget.dispatchEvent(P),!P.defaultPrevented){const R=N().filter(Z=>Z.focusable),E=R.find(Z=>Z.active),F=R.find(Z=>Z.id===y),M=[E,F,...R].filter(Boolean).map(Z=>Z.ref.current);JP(M,f)}}S.current=!1}),onBlur:Ke(e.onBlur,()=>x(!1))})})}),YP="RovingFocusGroupItem",XP=_.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...l}=e,d=Jr(),h=a||d,f=TV(YP,n),u=f.currentTabStopId===h,m=KP(n),{onFocusableItemAdd:p,onFocusableItemRemove:w,currentTabStopId:y}=f;return _.useEffect(()=>{if(r)return p(),()=>w()},[r,p,w]),s.jsx(Dy.ItemSlot,{scope:n,id:h,focusable:r,active:i,children:s.jsx(ut.span,{tabIndex:u?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:Ke(e.onMouseDown,b=>{r?f.onItemFocus(h):b.preventDefault()}),onFocus:Ke(e.onFocus,()=>f.onItemFocus(h)),onKeyDown:Ke(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){f.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const g=RV(b,f.orientation,f.dir);if(g!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let j=m().filter(N=>N.focusable).map(N=>N.ref.current);if(g==="last")j.reverse();else if(g==="prev"||g==="next"){g==="prev"&&j.reverse();const N=j.indexOf(b.currentTarget);j=f.loop?LV(j,N+1):j.slice(N+1)}setTimeout(()=>JP(j))}}),children:typeof o=="function"?o({isCurrentTabStop:u,hasTabStop:y!=null}):o})})});XP.displayName=YP;var AV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function OV(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function RV(e,t,n){const r=OV(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return AV[r]}function JP(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function LV(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var _w=ZP,jw=XP,IV=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Rl=new WeakMap,Cf=new WeakMap,Ef={},Jv=0,QP=function(e){return e&&(e.host||QP(e.parentNode))},MV=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=QP(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},DV=function(e,t,n,r){var i=MV(t,Array.isArray(e)?e:[e]);Ef[n]||(Ef[n]=new WeakMap);var a=Ef[n],o=[],l=new Set,d=new Set(i),h=function(u){!u||l.has(u)||(l.add(u),h(u.parentNode))};i.forEach(h);var f=function(u){!u||d.has(u)||Array.prototype.forEach.call(u.children,function(m){if(l.has(m))f(m);else try{var p=m.getAttribute(r),w=p!==null&&p!=="false",y=(Rl.get(m)||0)+1,b=(a.get(m)||0)+1;Rl.set(m,y),a.set(m,b),o.push(m),y===1&&w&&Cf.set(m,!0),b===1&&m.setAttribute(n,"true"),w||m.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",m,g)}})};return f(t),l.clear(),Jv++,function(){o.forEach(function(u){var m=Rl.get(u)-1,p=a.get(u)-1;Rl.set(u,m),a.set(u,p),m||(Cf.has(u)||u.removeAttribute(r),Cf.delete(u)),p||u.removeAttribute(n)}),Jv--,Jv||(Rl=new WeakMap,Rl=new WeakMap,Cf=new WeakMap,Ef={})}},Nw=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=IV(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),DV(r,i,n,"aria-hidden")):function(){return null}},xi=function(){return xi=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},xi.apply(this,arguments)};function eA(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function FV(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var em="right-scroll-bar-position",tm="width-before-scroll-bar",$V="with-scroll-bars-hidden",BV="--removed-body-scroll-bar-size";function Qv(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function zV(e,t){var n=_.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var VV=typeof window<"u"?_.useLayoutEffect:_.useEffect,z1=new WeakMap;function UV(e,t){var n=zV(null,function(r){return e.forEach(function(i){return Qv(i,r)})});return VV(function(){var r=z1.get(n);if(r){var i=new Set(r),a=new Set(e),o=n.current;i.forEach(function(l){a.has(l)||Qv(l,null)}),a.forEach(function(l){i.has(l)||Qv(l,o)})}z1.set(n,e)},[e]),n}function qV(e){return e}function HV(e,t){t===void 0&&(t=qV);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var d=function(){var f=o;o=[],f.forEach(a)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),n}}}};return i}function WV(e){e===void 0&&(e={});var t=HV(null);return t.options=xi({async:!0,ssr:!1},e),t}var tA=function(e){var t=e.sideCar,n=eA(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,xi({},n))};tA.isSideCarExport=!0;function GV(e,t){return e.useMedium(t),tA}var sA=WV(),ex=function(){},ig=_.forwardRef(function(e,t){var n=_.useRef(null),r=_.useState({onScrollCapture:ex,onWheelCapture:ex,onTouchMoveCapture:ex}),i=r[0],a=r[1],o=e.forwardProps,l=e.children,d=e.className,h=e.removeScrollBar,f=e.enabled,u=e.shards,m=e.sideCar,p=e.noRelative,w=e.noIsolation,y=e.inert,b=e.allowPinchZoom,g=e.as,x=g===void 0?"div":g,j=e.gapMode,N=eA(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,C=UV([n,t]),T=xi(xi({},N),i);return _.createElement(_.Fragment,null,f&&_.createElement(S,{sideCar:sA,removeScrollBar:h,shards:u,noRelative:p,noIsolation:w,inert:y,setCallbacks:a,allowPinchZoom:!!b,lockRef:n,gapMode:j}),o?_.cloneElement(_.Children.only(l),xi(xi({},T),{ref:C})):_.createElement(x,xi({},T,{className:d,ref:C}),l))});ig.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ig.classNames={fullWidth:tm,zeroRight:em};var KV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ZV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=KV();return t&&e.setAttribute("nonce",t),e}function YV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function XV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var JV=function(){var e=0,t=null;return{add:function(n){e==0&&(t=ZV())&&(YV(t,n),XV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},QV=function(){var e=JV();return function(t,n){_.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},nA=function(){var e=QV(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},e7={left:0,top:0,right:0,gap:0},tx=function(e){return parseInt(e||"",10)||0},t7=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[tx(n),tx(r),tx(i)]},s7=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return e7;var t=t7(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},n7=nA(),pc="data-scroll-locked",r7=function(e,t,n,r){var i=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat($V,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(pc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(em,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(tm,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(em," .").concat(em,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(tm," .").concat(tm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(pc,`] {
    `).concat(BV,": ").concat(l,`px;
  }
`)},V1=function(){var e=parseInt(document.body.getAttribute(pc)||"0",10);return isFinite(e)?e:0},i7=function(){_.useEffect(function(){return document.body.setAttribute(pc,(V1()+1).toString()),function(){var e=V1()-1;e<=0?document.body.removeAttribute(pc):document.body.setAttribute(pc,e.toString())}},[])},a7=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;i7();var a=_.useMemo(function(){return s7(i)},[i]);return _.createElement(n7,{styles:r7(a,!t,i,n?"":"!important")})},Fy=!1;if(typeof window<"u")try{var Tf=Object.defineProperty({},"passive",{get:function(){return Fy=!0,!0}});window.addEventListener("test",Tf,Tf),window.removeEventListener("test",Tf,Tf)}catch{Fy=!1}var Ll=Fy?{passive:!1}:!1,o7=function(e){return e.tagName==="TEXTAREA"},rA=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!o7(e)&&n[t]==="visible")},l7=function(e){return rA(e,"overflowY")},c7=function(e){return rA(e,"overflowX")},U1=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=iA(e,r);if(i){var a=aA(e,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},d7=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},u7=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},iA=function(e,t){return e==="v"?l7(t):c7(t)},aA=function(e,t){return e==="v"?d7(t):u7(t)},h7=function(e,t){return e==="h"&&t==="rtl"?-1:1},f7=function(e,t,n,r,i){var a=h7(e,window.getComputedStyle(t).direction),o=a*r,l=n.target,d=t.contains(l),h=!1,f=o>0,u=0,m=0;do{if(!l)break;var p=aA(e,l),w=p[0],y=p[1],b=p[2],g=y-b-a*w;(w||g)&&iA(e,l)&&(u+=g,m+=w);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!d&&l!==document.body||d&&(t.contains(l)||t===l));return(f&&(Math.abs(u)<1||!i)||!f&&(Math.abs(m)<1||!i))&&(h=!0),h},Pf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},q1=function(e){return[e.deltaX,e.deltaY]},H1=function(e){return e&&"current"in e?e.current:e},m7=function(e,t){return e[0]===t[0]&&e[1]===t[1]},p7=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},g7=0,Il=[];function v7(e){var t=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),i=_.useState(g7++)[0],a=_.useState(nA)[0],o=_.useRef(e);_.useEffect(function(){o.current=e},[e]),_.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var y=FV([e.lockRef.current],(e.shards||[]).map(H1),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=_.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var g=Pf(y),x=n.current,j="deltaX"in y?y.deltaX:x[0]-g[0],N="deltaY"in y?y.deltaY:x[1]-g[1],S,C=y.target,T=Math.abs(j)>Math.abs(N)?"h":"v";if("touches"in y&&T==="h"&&C.type==="range")return!1;var A=U1(T,C);if(!A)return!0;if(A?S=T:(S=T==="v"?"h":"v",A=U1(T,C)),!A)return!1;if(!r.current&&"changedTouches"in y&&(j||N)&&(r.current=S),!S)return!0;var I=r.current||S;return f7(I,b,y,I==="h"?j:N,!0)},[]),d=_.useCallback(function(y){var b=y;if(!(!Il.length||Il[Il.length-1]!==a)){var g="deltaY"in b?q1(b):Pf(b),x=t.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&m7(S.delta,g)})[0];if(x&&x.should){b.cancelable&&b.preventDefault();return}if(!x){var j=(o.current.shards||[]).map(H1).filter(Boolean).filter(function(S){return S.contains(b.target)}),N=j.length>0?l(b,j[0]):!o.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),h=_.useCallback(function(y,b,g,x){var j={name:y,delta:b,target:g,should:x,shadowParent:x7(g)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(N){return N!==j})},1)},[]),f=_.useCallback(function(y){n.current=Pf(y),r.current=void 0},[]),u=_.useCallback(function(y){h(y.type,q1(y),y.target,l(y,e.lockRef.current))},[]),m=_.useCallback(function(y){h(y.type,Pf(y),y.target,l(y,e.lockRef.current))},[]);_.useEffect(function(){return Il.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",d,Ll),document.addEventListener("touchmove",d,Ll),document.addEventListener("touchstart",f,Ll),function(){Il=Il.filter(function(y){return y!==a}),document.removeEventListener("wheel",d,Ll),document.removeEventListener("touchmove",d,Ll),document.removeEventListener("touchstart",f,Ll)}},[]);var p=e.removeScrollBar,w=e.inert;return _.createElement(_.Fragment,null,w?_.createElement(a,{styles:p7(i)}):null,p?_.createElement(a7,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function x7(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const y7=GV(sA,v7);var ag=_.forwardRef(function(e,t){return _.createElement(ig,xi({},e,{ref:t,sideCar:y7}))});ag.classNames=ig.classNames;var $y=["Enter"," "],b7=["ArrowDown","PageUp","Home"],oA=["ArrowUp","PageDown","End"],w7=[...b7,...oA],_7={ltr:[...$y,"ArrowRight"],rtl:[...$y,"ArrowLeft"]},j7={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ah="Menu",[ih,N7,S7]=Ip(Ah),[_l,lA]=_n(Ah,[S7,dd,fd]),og=dd(),cA=fd(),[k7,jl]=_l(Ah),[C7,Oh]=_l(Ah),dA=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=e,l=og(t),[d,h]=_.useState(null),f=_.useRef(!1),u=ks(a),m=hd(i);return _.useEffect(()=>{const p=()=>{f.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>f.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),s.jsx(dw,{...l,children:s.jsx(k7,{scope:t,open:n,onOpenChange:u,content:d,onContentChange:h,children:s.jsx(C7,{scope:t,onClose:_.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:f,dir:m,modal:o,children:r})})})};dA.displayName=Ah;var E7="MenuAnchor",Sw=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=og(n);return s.jsx(uw,{...i,...r,ref:t})});Sw.displayName=E7;var kw="MenuPortal",[T7,uA]=_l(kw,{forceMount:void 0}),hA=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,a=jl(kw,t);return s.jsx(T7,{scope:t,forceMount:n,children:s.jsx(hn,{present:n||a.open,children:s.jsx(_h,{asChild:!0,container:i,children:r})})})};hA.displayName=kw;var jr="MenuContent",[P7,Cw]=_l(jr),fA=_.forwardRef((e,t)=>{const n=uA(jr,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=jl(jr,e.__scopeMenu),o=Oh(jr,e.__scopeMenu);return s.jsx(ih.Provider,{scope:e.__scopeMenu,children:s.jsx(hn,{present:r||a.open,children:s.jsx(ih.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(A7,{...i,ref:t}):s.jsx(O7,{...i,ref:t})})})})}),A7=_.forwardRef((e,t)=>{const n=jl(jr,e.__scopeMenu),r=_.useRef(null),i=jt(t,r);return _.useEffect(()=>{const a=r.current;if(a)return Nw(a)},[]),s.jsx(Ew,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ke(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),O7=_.forwardRef((e,t)=>{const n=jl(jr,e.__scopeMenu);return s.jsx(Ew,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),R7=cl("MenuContent.ScrollLock"),Ew=_.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:u,onInteractOutside:m,onDismiss:p,disableOutsideScroll:w,...y}=e,b=jl(jr,n),g=Oh(jr,n),x=og(n),j=cA(n),N=N7(n),[S,C]=_.useState(null),T=_.useRef(null),A=jt(t,T,b.onContentChange),I=_.useRef(0),P=_.useRef(""),R=_.useRef(0),E=_.useRef(null),F=_.useRef("right"),O=_.useRef(0),M=w?ag:_.Fragment,Z=w?{as:R7,allowPinchZoom:!0}:void 0,X=D=>{var G,ne;const B=P.current+D,V=N().filter(J=>!J.disabled),H=document.activeElement,q=(G=V.find(J=>J.ref.current===H))==null?void 0:G.textValue,W=V.map(J=>J.textValue),Y=H7(W,B,q),U=(ne=V.find(J=>J.textValue===Y))==null?void 0:ne.ref.current;(function J(ie){P.current=ie,window.clearTimeout(I.current),ie!==""&&(I.current=window.setTimeout(()=>J(""),1e3))})(B),U&&setTimeout(()=>U.focus())};_.useEffect(()=>()=>window.clearTimeout(I.current),[]),ww();const z=_.useCallback(D=>{var V,H;return F.current===((V=E.current)==null?void 0:V.side)&&G7(D,(H=E.current)==null?void 0:H.area)},[]);return s.jsx(P7,{scope:n,searchRef:P,onItemEnter:_.useCallback(D=>{z(D)&&D.preventDefault()},[z]),onItemLeave:_.useCallback(D=>{var B;z(D)||((B=T.current)==null||B.focus(),C(null))},[z]),onTriggerLeave:_.useCallback(D=>{z(D)&&D.preventDefault()},[z]),pointerGraceTimerRef:R,onPointerGraceIntentChange:_.useCallback(D=>{E.current=D},[]),children:s.jsx(M,{...Z,children:s.jsx(rg,{asChild:!0,trapped:i,onMountAutoFocus:Ke(a,D=>{var B;D.preventDefault(),(B=T.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(id,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:u,onInteractOutside:m,onDismiss:p,children:s.jsx(_w,{asChild:!0,...j,dir:g.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:C,onEntryFocus:Ke(d,D=>{g.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(hw,{role:"menu","aria-orientation":"vertical","data-state":TA(b.open),"data-radix-menu-content":"",dir:g.dir,...x,...y,ref:A,style:{outline:"none",...y.style},onKeyDown:Ke(y.onKeyDown,D=>{const V=D.target.closest("[data-radix-menu-content]")===D.currentTarget,H=D.ctrlKey||D.altKey||D.metaKey,q=D.key.length===1;V&&(D.key==="Tab"&&D.preventDefault(),!H&&q&&X(D.key));const W=T.current;if(D.target!==W||!w7.includes(D.key))return;D.preventDefault();const U=N().filter(G=>!G.disabled).map(G=>G.ref.current);oA.includes(D.key)&&U.reverse(),U7(U)}),onBlur:Ke(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(I.current),P.current="")}),onPointerMove:Ke(e.onPointerMove,ah(D=>{const B=D.target,V=O.current!==D.clientX;if(D.currentTarget.contains(B)&&V){const H=D.clientX>O.current?"right":"left";F.current=H,O.current=D.clientX}}))})})})})})})});fA.displayName=jr;var L7="MenuGroup",Tw=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ut.div,{role:"group",...r,ref:t})});Tw.displayName=L7;var I7="MenuLabel",mA=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ut.div,{...r,ref:t})});mA.displayName=I7;var qm="MenuItem",W1="menu.itemSelect",lg=_.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,a=_.useRef(null),o=Oh(qm,e.__scopeMenu),l=Cw(qm,e.__scopeMenu),d=jt(t,a),h=_.useRef(!1),f=()=>{const u=a.current;if(!n&&u){const m=new CustomEvent(W1,{bubbles:!0,cancelable:!0});u.addEventListener(W1,p=>r==null?void 0:r(p),{once:!0}),Hb(u,m),m.defaultPrevented?h.current=!1:o.onClose()}};return s.jsx(pA,{...i,ref:d,disabled:n,onClick:Ke(e.onClick,f),onPointerDown:u=>{var m;(m=e.onPointerDown)==null||m.call(e,u),h.current=!0},onPointerUp:Ke(e.onPointerUp,u=>{var m;h.current||(m=u.currentTarget)==null||m.click()}),onKeyDown:Ke(e.onKeyDown,u=>{const m=l.searchRef.current!=="";n||m&&u.key===" "||$y.includes(u.key)&&(u.currentTarget.click(),u.preventDefault())})})});lg.displayName=qm;var pA=_.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=e,o=Cw(qm,n),l=cA(n),d=_.useRef(null),h=jt(t,d),[f,u]=_.useState(!1),[m,p]=_.useState("");return _.useEffect(()=>{const w=d.current;w&&p((w.textContent??"").trim())},[a.children]),s.jsx(ih.ItemSlot,{scope:n,disabled:r,textValue:i??m,children:s.jsx(jw,{asChild:!0,...l,focusable:!r,children:s.jsx(ut.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:h,onPointerMove:Ke(e.onPointerMove,ah(w=>{r?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ke(e.onPointerLeave,ah(w=>o.onItemLeave(w))),onFocus:Ke(e.onFocus,()=>u(!0)),onBlur:Ke(e.onBlur,()=>u(!1))})})})}),M7="MenuCheckboxItem",gA=_.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return s.jsx(wA,{scope:e.__scopeMenu,checked:n,children:s.jsx(lg,{role:"menuitemcheckbox","aria-checked":Hm(n)?"mixed":n,...i,ref:t,"data-state":Aw(n),onSelect:Ke(i.onSelect,()=>r==null?void 0:r(Hm(n)?!0:!n),{checkForDefaultPrevented:!1})})})});gA.displayName=M7;var vA="MenuRadioGroup",[D7,F7]=_l(vA,{value:void 0,onValueChange:()=>{}}),xA=_.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,a=ks(r);return s.jsx(D7,{scope:e.__scopeMenu,value:n,onValueChange:a,children:s.jsx(Tw,{...i,ref:t})})});xA.displayName=vA;var yA="MenuRadioItem",bA=_.forwardRef((e,t)=>{const{value:n,...r}=e,i=F7(yA,e.__scopeMenu),a=n===i.value;return s.jsx(wA,{scope:e.__scopeMenu,checked:a,children:s.jsx(lg,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Aw(a),onSelect:Ke(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});bA.displayName=yA;var Pw="MenuItemIndicator",[wA,$7]=_l(Pw,{checked:!1}),_A=_.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,a=$7(Pw,n);return s.jsx(hn,{present:r||Hm(a.checked)||a.checked===!0,children:s.jsx(ut.span,{...i,ref:t,"data-state":Aw(a.checked)})})});_A.displayName=Pw;var B7="MenuSeparator",jA=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ut.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});jA.displayName=B7;var z7="MenuArrow",NA=_.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=og(n);return s.jsx(fw,{...i,...r,ref:t})});NA.displayName=z7;var V7="MenuSub",[eae,SA]=_l(V7),ou="MenuSubTrigger",kA=_.forwardRef((e,t)=>{const n=jl(ou,e.__scopeMenu),r=Oh(ou,e.__scopeMenu),i=SA(ou,e.__scopeMenu),a=Cw(ou,e.__scopeMenu),o=_.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=a,h={__scopeMenu:e.__scopeMenu},f=_.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return _.useEffect(()=>f,[f]),_.useEffect(()=>{const u=l.current;return()=>{window.clearTimeout(u),d(null)}},[l,d]),s.jsx(Sw,{asChild:!0,...h,children:s.jsx(pA,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":TA(n.open),...e,ref:Lp(t,i.onTriggerChange),onClick:u=>{var m;(m=e.onClick)==null||m.call(e,u),!(e.disabled||u.defaultPrevented)&&(u.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ke(e.onPointerMove,ah(u=>{a.onItemEnter(u),!u.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ke(e.onPointerLeave,ah(u=>{var p,w;f();const m=(p=n.content)==null?void 0:p.getBoundingClientRect();if(m){const y=(w=n.content)==null?void 0:w.dataset.side,b=y==="right",g=b?-5:5,x=m[b?"left":"right"],j=m[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:u.clientX+g,y:u.clientY},{x,y:m.top},{x:j,y:m.top},{x:j,y:m.bottom},{x,y:m.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(u),u.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ke(e.onKeyDown,u=>{var p;const m=a.searchRef.current!=="";e.disabled||m&&u.key===" "||_7[r.dir].includes(u.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),u.preventDefault())})})})});kA.displayName=ou;var CA="MenuSubContent",EA=_.forwardRef((e,t)=>{const n=uA(jr,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=jl(jr,e.__scopeMenu),o=Oh(jr,e.__scopeMenu),l=SA(CA,e.__scopeMenu),d=_.useRef(null),h=jt(t,d);return s.jsx(ih.Provider,{scope:e.__scopeMenu,children:s.jsx(hn,{present:r||a.open,children:s.jsx(ih.Slot,{scope:e.__scopeMenu,children:s.jsx(Ew,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var u;o.isUsingKeyboardRef.current&&((u=d.current)==null||u.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ke(e.onFocusOutside,f=>{f.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ke(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ke(e.onKeyDown,f=>{var p;const u=f.currentTarget.contains(f.target),m=j7[o.dir].includes(f.key);u&&m&&(a.onOpenChange(!1),(p=l.trigger)==null||p.focus(),f.preventDefault())})})})})})});EA.displayName=CA;function TA(e){return e?"open":"closed"}function Hm(e){return e==="indeterminate"}function Aw(e){return Hm(e)?"indeterminate":e?"checked":"unchecked"}function U7(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function q7(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function H7(e,t,n){const i=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=q7(e,Math.max(a,0));i.length===1&&(o=o.filter(h=>h!==n));const d=o.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return d!==n?d:void 0}function W7(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],d=t[o],h=l.x,f=l.y,u=d.x,m=d.y;f>r!=m>r&&n<(u-h)*(r-f)/(m-f)+h&&(i=!i)}return i}function G7(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return W7(n,t)}function ah(e){return t=>t.pointerType==="mouse"?e(t):void 0}var K7=dA,Z7=Sw,Y7=hA,X7=fA,J7=Tw,Q7=mA,e9=lg,t9=gA,s9=xA,n9=bA,r9=_A,i9=jA,a9=NA,o9=kA,l9=EA,cg="DropdownMenu",[c9,tae]=_n(cg,[lA]),Bn=lA(),[d9,PA]=c9(cg),AA=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,d=Bn(t),h=_.useRef(null),[f,u]=ei({prop:i,defaultProp:a??!1,onChange:o,caller:cg});return s.jsx(d9,{scope:t,triggerId:Jr(),triggerRef:h,contentId:Jr(),open:f,onOpenChange:u,onOpenToggle:_.useCallback(()=>u(m=>!m),[u]),modal:l,children:s.jsx(K7,{...d,open:f,onOpenChange:u,dir:r,modal:l,children:n})})};AA.displayName=cg;var OA="DropdownMenuTrigger",RA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,a=PA(OA,n),o=Bn(n);return s.jsx(Z7,{asChild:!0,...o,children:s.jsx(ut.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Lp(t,a.triggerRef),onPointerDown:Ke(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Ke(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});RA.displayName=OA;var u9="DropdownMenuPortal",LA=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Bn(t);return s.jsx(Y7,{...r,...n})};LA.displayName=u9;var IA="DropdownMenuContent",MA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=PA(IA,n),a=Bn(n),o=_.useRef(!1);return s.jsx(X7,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:Ke(e.onCloseAutoFocus,l=>{var d;o.current||(d=i.triggerRef.current)==null||d.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ke(e.onInteractOutside,l=>{const d=l.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!i.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});MA.displayName=IA;var h9="DropdownMenuGroup",f9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(J7,{...i,...r,ref:t})});f9.displayName=h9;var m9="DropdownMenuLabel",DA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(Q7,{...i,...r,ref:t})});DA.displayName=m9;var p9="DropdownMenuItem",FA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(e9,{...i,...r,ref:t})});FA.displayName=p9;var g9="DropdownMenuCheckboxItem",$A=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(t9,{...i,...r,ref:t})});$A.displayName=g9;var v9="DropdownMenuRadioGroup",x9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(s9,{...i,...r,ref:t})});x9.displayName=v9;var y9="DropdownMenuRadioItem",BA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(n9,{...i,...r,ref:t})});BA.displayName=y9;var b9="DropdownMenuItemIndicator",zA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(r9,{...i,...r,ref:t})});zA.displayName=b9;var w9="DropdownMenuSeparator",VA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(i9,{...i,...r,ref:t})});VA.displayName=w9;var _9="DropdownMenuArrow",j9=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(a9,{...i,...r,ref:t})});j9.displayName=_9;var N9="DropdownMenuSubTrigger",UA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(o9,{...i,...r,ref:t})});UA.displayName=N9;var S9="DropdownMenuSubContent",qA=_.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Bn(n);return s.jsx(l9,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qA.displayName=S9;var k9=AA,C9=RA,E9=LA,HA=MA,WA=DA,GA=FA,KA=$A,ZA=BA,YA=zA,XA=VA,JA=UA,QA=qA;const qc=k9,Hc=C9,T9=_.forwardRef(({className:e,inset:t,children:n,...r},i)=>s.jsxs(JA,{ref:i,className:at("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(Fc,{className:"ml-auto h-4 w-4"})]}));T9.displayName=JA.displayName;const P9=_.forwardRef(({className:e,...t},n)=>s.jsx(QA,{ref:n,className:at("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));P9.displayName=QA.displayName;const ul=_.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(E9,{children:s.jsx(HA,{ref:r,sideOffset:t,className:at("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ul.displayName=HA.displayName;const To=_.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(GA,{ref:r,className:at("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));To.displayName=GA.displayName;const A9=_.forwardRef(({className:e,children:t,checked:n,...r},i)=>s.jsxs(KA,{ref:i,className:at("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(YA,{children:s.jsx(Yu,{className:"h-4 w-4"})})}),t]}));A9.displayName=KA.displayName;const O9=_.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(ZA,{ref:r,className:at("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(YA,{children:s.jsx(yT,{className:"h-2 w-2 fill-current"})})}),t]}));O9.displayName=ZA.displayName;const R9=_.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(WA,{ref:r,className:at("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));R9.displayName=WA.displayName;const L9=_.forwardRef(({className:e,...t},n)=>s.jsx(XA,{ref:n,className:at("-mx-1 my-1 h-px bg-muted",e),...t}));L9.displayName=XA.displayName;var eO={exports:{}},tO={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc=_;function I9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var M9=typeof Object.is=="function"?Object.is:I9,D9=Wc.useState,F9=Wc.useEffect,$9=Wc.useLayoutEffect,B9=Wc.useDebugValue;function z9(e,t){var n=t(),r=D9({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return $9(function(){i.value=n,i.getSnapshot=t,sx(i)&&a({inst:i})},[e,n,t]),F9(function(){return sx(i)&&a({inst:i}),e(function(){sx(i)&&a({inst:i})})},[e]),B9(n),n}function sx(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!M9(e,n)}catch{return!0}}function V9(e,t){return t()}var U9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?V9:z9;tO.useSyncExternalStore=Wc.useSyncExternalStore!==void 0?Wc.useSyncExternalStore:U9;eO.exports=tO;var q9=eO.exports;function H9(){return q9.useSyncExternalStore(W9,()=>!0,()=>!1)}function W9(){return()=>{}}var Ow="Avatar",[G9,sae]=_n(Ow),[K9,sO]=G9(Ow),nO=_.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,a]=_.useState("idle");return s.jsx(K9,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(ut.span,{...r,ref:t})})});nO.displayName=Ow;var rO="AvatarImage",iO=_.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=e,o=sO(rO,n),l=Z9(r,a),d=ks(h=>{i(h),o.onImageLoadingStatusChange(h)});return Is(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?s.jsx(ut.img,{...a,ref:t,src:r}):null});iO.displayName=rO;var aO="AvatarFallback",oO=_.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,a=sO(aO,n),[o,l]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(d)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(ut.span,{...i,ref:t}):null});oO.displayName=aO;function G1(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Z9(e,{referrerPolicy:t,crossOrigin:n}){const r=H9(),i=_.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,l]=_.useState(()=>G1(a,e));return Is(()=>{l(G1(a,e))},[a,e]),Is(()=>{const d=u=>()=>{l(u)};if(!a)return;const h=d("loaded"),f=d("error");return a.addEventListener("load",h),a.addEventListener("error",f),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",h),a.removeEventListener("error",f)}},[a,n,t]),o}var lO=nO,cO=iO,dO=oO;const ha=_.forwardRef(({className:e,...t},n)=>s.jsx(lO,{ref:n,className:at("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ha.displayName=lO.displayName;const Wr=_.forwardRef(({className:e,...t},n)=>s.jsx(cO,{ref:n,className:at("aspect-square h-full w-full",e),...t}));Wr.displayName=cO.displayName;const fa=_.forwardRef(({className:e,...t},n)=>s.jsx(dO,{ref:n,className:at("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));fa.displayName=dO.displayName;function Y9(){lt();const{navigateWithAuth:e}=po(),[t,n]=_.useState({city:"Getting location...",area:"Please wait"}),[r,i]=_.useState([]),[a,o]=_.useState(0),{notifications:l,unreadCount:d,markAsRead:h,markAllAsRead:f}=WP();_.useEffect(()=>{const w=async()=>{if(await Ce.isAuthenticated()){u();const b=setInterval(u,5e3);return()=>clearInterval(b)}};p(),w()},[]);const u=async()=>{var w,y;try{if(!await Ce.getToken())return;const g=await rr.getConversations(),x=Array.isArray(g)?g:(g==null?void 0:g.results)||[];r.length>0&&x.forEach(N=>{var C,T;const S=r.find(A=>A.id===N.id);S&&N.unread_count>S.unread_count&&m(`New message from ${(C=N.other_participant)==null?void 0:C.username}`,((T=N.last_message)==null?void 0:T.content)||"New message received")}),i(x);const j=x.reduce((N,S)=>N+(S.unread_count||0),0);o(j)}catch(b){(w=b.message)!=null&&w.includes("401")||(y=b.message)!=null&&y.includes("Unauthorized")?(i([]),o(0)):console.error("Failed to load conversations:",b)}},m=(w,y)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(w,{body:y,icon:"/favicon.ico"})},p=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async w=>{const{latitude:y,longitude:b}=w.coords;try{const x=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${y}&lon=${b}&addressdetails=1`)).json();if(x.address){const j=x.address.road||x.address.neighbourhood,N=x.address.neighbourhood||x.address.suburb||x.address.city||x.address.town||x.address.village||x.address.county;n({city:j||N||"Unknown City",area:`${x.address.neighbourhood||x.address.suburb||x.address.city||x.address.town||x.address.state||""}${x.address.city_district?`, ${x.address.city_district}`:""}`})}else n({city:"Location found",area:`${y.toFixed(4)}, ${b.toFixed(4)}`})}catch{n({city:"Location unavailable",area:"Service error"})}},w=>{n({city:"Location denied",area:"Enable location access"})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):n({city:"Location not supported",area:"Browser not compatible"})};return s.jsxs("div",{className:"sticky top-0 z-50 flex items-center justify-between px-3 py-1 bg-card/95 backdrop-blur-sm border-b border-border/30 min-h-[45px]",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("img",{src:ua,alt:"Ezeyway",className:"h-24 w-24 md:h-16 md:w-28 object-contain"})}),s.jsxs("div",{className:"flex items-center gap-1.5 cursor-pointer text-center",onClick:p,children:[s.jsx(Jt,{className:"h-3 w-3 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-foreground",children:t.city}),s.jsx("p",{className:"text-[10px] text-muted-foreground",children:t.area})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(qc,{children:[s.jsx(Hc,{asChild:!0,children:s.jsxs("button",{className:"p-1.5 hover:bg-muted rounded-lg transition-smooth relative",children:[s.jsx(Xr,{className:"h-5 w-5 text-foreground"}),a>0&&s.jsx("div",{className:"absolute -top-0.5 -right-0.5 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-white font-bold",children:a>9?"9+":a})})]})}),s.jsxs(ul,{align:"end",className:"w-80",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Messages"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/messages"),className:"text-xs",children:"View all"})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No messages"}):r.slice(0,5).map(w=>{var y,b,g,x,j,N;return s.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${w.unread_count>0?"bg-blue-50/50":""}`,onClick:()=>e(`/messages?conversation=${w.id}`),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(ha,{className:"h-8 w-8",children:[s.jsx(Wr,{src:(y=w.other_participant)==null?void 0:y.profile_picture}),s.jsx(fa,{children:(g=(b=w.other_participant)==null?void 0:b.username)==null?void 0:g.charAt(0)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:(x=w.other_participant)==null?void 0:x.username}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((j=w.last_message)==null?void 0:j.content)||((N=w.last_message)==null?void 0:N.file_name)||"No messages"})]}),w.unread_count>0&&s.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-white font-bold",children:w.unread_count})})]})},w.id)})})]})]}),s.jsxs(qc,{children:[s.jsx(Hc,{asChild:!0,children:s.jsxs("button",{className:"relative p-1.5 hover:bg-muted rounded-lg transition-smooth",children:[s.jsx(Gn,{className:"h-5 w-5 text-foreground"}),d>0&&s.jsx(Ze,{className:"absolute -top-0.5 -right-0.5 h-4 w-4 rounded-full p-0 text-[10px] flex items-center justify-center min-w-[16px] bg-destructive text-destructive-foreground",children:d>9?"9+":d})]})}),s.jsxs(ul,{align:"end",className:"w-80",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Notifications"}),s.jsxs("div",{className:"flex gap-2",children:[d>0&&s.jsx(se,{variant:"ghost",size:"sm",onClick:f,className:"text-xs",children:"Mark all read"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/notifications"),className:"text-xs",children:"View all"})]})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:l.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):l.slice(0,5).map(w=>s.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${w.read?"":"bg-blue-50/50"}`,onClick:()=>{h(w.id),w.action_url&&e(w.action_url)},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${w.read?"bg-transparent":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-medium ${w.read?"text-gray-700":"text-gray-900"}`,children:w.title}),s.jsx("p",{className:`text-sm ${w.read?"text-gray-600":"text-gray-700"}`,children:w.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(w.created_at).toLocaleString()})]}),s.jsx(Ze,{variant:"outline",className:`text-xs ${w.type==="order"?"border-green-200 text-green-700":w.type==="payment"?"border-blue-200 text-blue-700":w.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:w.type})]})},w.id))})]})]})]})]})}const X9=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3};function J9(){const[e,t]=_.useState(""),[n,r]=_.useState([]),[i,a]=_.useState(!1),[o,l]=_.useState(!1),d=lt();ts();const h=_.useRef(null),f=_.useRef(null);_.useEffect(()=>{const g=x=>{h.current&&!h.current.contains(x.target)&&f.current&&!f.current.contains(x.target)&&a(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),_.useEffect(()=>{e.trim().length>1?u(e.trim()):(r([]),a(!1))},[e]);const u=async g=>{l(!0);try{const x=await Ce.getToken(),j=x?{Authorization:`Token ${x}`}:{},N=ht.getLocation(),S=new URLSearchParams({search:g,page_size:"5"});N&&(S.append("latitude",N.latitude.toString()),S.append("longitude",N.longitude.toString()));const T=await(await fetch(`${Qe}search/products/?${S}`,{headers:j})).json(),A=m(T.results||[]);r(A),a(!0)}catch(x){console.error("Search error:",x)}finally{l(!1)}},m=g=>{const x=ht.getLocation();return g.map(j=>{var C,T;const N=((C=j.images)==null?void 0:C.find(A=>A.is_primary))||((T=j.images)==null?void 0:T[0]);let S="N/A";return x&&j.vendor_latitude&&j.vendor_longitude&&(S=`${X9(x.latitude,x.longitude,j.vendor_latitude,j.vendor_longitude).toFixed(1)} km`),{id:j.id,name:j.name,vendor:j.vendor_name||"Unknown Vendor",price:`${j.price}`,image:(N==null?void 0:N.image_url)||"/placeholder-product.jpg",distance:S,category:j.category}})},p=g=>{g.preventDefault(),e.trim()&&(d(`/search?q=${encodeURIComponent(e.trim())}`),a(!1))},w=g=>{t(g.target.value)},y=g=>{d(`/product/${g}`),a(!1),t("")},b=()=>{e.trim()&&(d(`/search?q=${encodeURIComponent(e.trim())}`),a(!1))};return s.jsxs("div",{className:"px-3 py-2 bg-background relative",children:[s.jsx("form",{onSubmit:p,className:"flex gap-2",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Yo,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx("input",{ref:f,type:"text",placeholder:"Search products, vendors...",value:e,onChange:w,className:"w-full pl-9 pr-3 py-2.5 bg-muted/50 border border-border/50 rounded-lg text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-smooth"})]})}),i&&s.jsx("div",{ref:h,className:"absolute top-full left-3 right-3 mt-1 bg-white border border-border rounded-lg shadow-lg z-50 max-h-80 overflow-y-auto",children:o?s.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Searching..."}):n.length>0?s.jsxs(s.Fragment,{children:[n.map(g=>s.jsxs("div",{onClick:()=>y(g.id),className:"flex items-center gap-3 p-3 hover:bg-muted/50 cursor-pointer border-b border-border/50 last:border-b-0",children:[s.jsx("img",{src:g.image,alt:g.name,className:"w-10 h-10 object-cover rounded",onError:x=>{x.target.src="/placeholder-product.jpg"}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-sm truncate",children:g.name}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:g.vendor}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"text-xs font-medium text-primary",children:g.price}),s.jsx("span",{className:"text-xs text-muted-foreground",children:g.distance})]})]})]},g.id)),s.jsx("div",{className:"p-3 border-t border-border",children:s.jsxs("button",{onClick:b,className:"w-full text-center text-sm text-primary hover:text-primary/80 font-medium",children:['View all results for "',e,'"']})})]}):e.trim().length>1?s.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:['No results found for "',e,'"']}):null})]})}const K1={Electronics:"",Fashion:"",Food:"",Home:"",Books:"",Sports:"",Beauty:"",Toys:"",Jewelry:"",Furniture:"",Automotive:"",Health:"","Pet Supplies":"",Stationery:"",Garden:"",Kids:"",Appliances:"",Hardware:"",Crafts:"",Travel:"",Grocery:"",Vegetables:"",Fruits:"",Dairy:"",Meat:"",Bakery:"",Beverages:"",Snacks:"",Organic:""};function Q9(){const[e,t]=_.useState([]),[n,r]=_.useState(!0),i=lt(),a=Qe.replace(/\/api\/?$/i,"");return _.useEffect(()=>{(async()=>{try{const l=await fetch(Qe+"categories/");if(!l.ok)throw new Error(`HTTP ${l.status}`);const d=await l.json();if(d.categories){const h=d.categories.map((f,u)=>{const m=f.icon||f.icon_url||"",p=m&&m.startsWith("/")?`${a}${m}`:m;return{id:f.id||u+1,name:f.name,icon:p||K1[f.name]||"",hasImage:!!m}});t(h)}else t([])}catch(l){console.error("Error fetching categories:",l),t([])}finally{r(!1)}})()},[]),n?s.jsx("div",{className:"px-2 py-2 bg-gray-50",children:s.jsx("div",{className:"flex gap-3 overflow-x-auto",children:[...Array(6)].map((o,l)=>s.jsx("div",{className:"flex-none w-16",children:s.jsxs("div",{className:"w-full p-1 rounded-xl bg-gray-200 animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-300 rounded mb-1"}),s.jsx("div",{className:"h-3 bg-gray-300 rounded"})]})},l))})}):e.length===0?s.jsx("div",{className:"px-2 py-2 bg-gray-50",children:s.jsx("div",{className:"text-center text-gray-500 text-sm py-4",children:"No categories available"})}):s.jsx("div",{className:"px-2 py-2 bg-gray-50",children:s.jsx("div",{className:"flex gap-3 overflow-x-auto overflow-y-hidden pb-2",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:e.map(o=>s.jsxs("button",{className:"flex-none px-3 py-1 rounded-xl font-medium text-center transition-all duration-200 bg-white text-gray-800 hover:bg-gray-100 active:scale-95 focus:outline-none min-w-16 touch-manipulation",onClick:()=>i(`/category/${encodeURIComponent(o.name)}`),children:[s.jsxs("div",{className:"mb-1 flex items-center justify-center h-8",children:[o.hasImage?s.jsx("img",{src:o.icon,alt:o.name,className:"w-8 h-8 object-contain",onError:l=>{const d=l.target;if(d){d.style.display="none";const h=d.nextSibling;h&&(h.style.display="block")}}}):s.jsx("div",{className:"text-2xl",children:o.icon}),o.hasImage&&s.jsx("div",{className:"text-2xl",style:{display:"none"},children:K1[o.name]||""})]}),s.jsx("div",{className:"text-xs font-semibold whitespace-nowrap",children:o.name})]},o.id))})})}const eU="/assets/banner-grocery.jpg",tU="/assets/banner-electronics.jpg",sU="/assets/banner-food.jpg",nU=[{id:1,image:eU,title:"Fresh Groceries",subtitle:"Same day delivery"},{id:2,image:tU,title:"Electronics & Gadgets",subtitle:"Best prices guaranteed"},{id:3,image:sU,title:"Traditional Food",subtitle:"Authentic Nepali cuisine"}];function rU(){const[e,t]=_.useState(1),[n,r]=_.useState(!1),[i,a]=_.useState(0),[o,l]=_.useState(0),[d,h]=_.useState([]),[f,u]=_.useState(!0),[m,p]=_.useState(!0),w=_.useRef(null),y=d.length>0?d.map(C=>({id:C.id,image:C.image_url,title:C.title,subtitle:C.description||"",link_url:C.link_url})):nU,b=y.length>0?[y[y.length-1],...y,y[0]]:[],g=C=>{r(!0),a(C.touches[0].clientX),l(C.touches[0].clientX)},x=C=>{n&&l(C.touches[0].clientX)},j=()=>{if(!n)return;const C=i-o;Math.abs(C)>50&&(C>0&&e<y.length?t(A=>A+1):C<0&&e>1&&t(A=>A-1)),r(!1),l(0)},N=C=>{C.link_url&&window.open(C.link_url,"_blank")};_.useEffect(()=>{if(y.length>0){const C=setInterval(()=>{t(T=>T+1)},4e3);return()=>clearInterval(C)}},[y.length]),_.useEffect(()=>{y.length>0&&(e===b.length-1?setTimeout(()=>{p(!1),t(1),setTimeout(()=>p(!0),50)},500):e===0&&setTimeout(()=>{p(!1),t(y.length),setTimeout(()=>p(!0),50)},500))},[e,y.length]),_.useEffect(()=>{(async()=>{try{const{API_BASE:T}=await ze(async()=>{const{API_BASE:E}=await Promise.resolve().then(()=>Hz);return{API_BASE:E}},void 0);let A="customer";window.location.pathname.startsWith("/vendor")&&(A="vendor"),console.log(` Fetching banners for user type: ${A}`);const P=await fetch(`${T}sliders/?user_type=${A}`),R=await P.json();if(console.log(" BannerCarousel API Response:",R),P.ok&&R&&R.sliders){console.log(" All sliders from API:",R.sliders),console.log(" Current userType:",A);const E=R.sliders.filter(F=>{const O=F.visibility||"both",M=O===A||O==="both";return console.log(` Slider "${F.title}": visibility="${O}", userType="${A}", shouldShow=${M}`),M});console.log(` BEFORE filtering: ${R.sliders.length} sliders`),console.log(` AFTER filtering: ${E.length} sliders for userType="${A}"`),console.log(" Filtered sliders:",E),h(E),E.length>0&&t(1)}else console.log(" No sliders data or API error"),h([])}catch(T){console.error("Error fetching sliders:",T),h([])}finally{u(!1)}})()},[]);const S=()=>{var T;if(window.innerWidth<768){if(n){const A=o-i,I=100,P=A/(((T=w.current)==null?void 0:T.offsetWidth)||1)*100,R=Math.max(-I,Math.min(I,P));return`translateX(calc(-${e*100}% + ${R}px))`}return`translateX(-${e*100}%)`}else return`translateX(calc(-${e*50}% + 25%))`};return f?s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"relative overflow-hidden rounded-2xl shadow-brand h-48 bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[s.jsx(Cs,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Loading banners..."})]})})}):s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative md:overflow-visible overflow-hidden md:px-8",children:[s.jsx("div",{ref:w,className:`flex ${m?"transition-transform duration-500 ease-in-out":""}`,style:{transform:S()},onTouchStart:g,onTouchMove:x,onTouchEnd:j,children:(b.length>0?b:y).map((C,T)=>{const A=window.innerWidth<768,I=!A&&T===e;return s.jsx("div",{className:`flex-shrink-0 relative cursor-pointer transition-all duration-300 ${A?"w-full rounded-2xl shadow-brand overflow-hidden":`${I?"scale-100 opacity-100 z-10":"scale-75 opacity-60 z-0"} rounded-lg overflow-hidden`}`,style:A?{}:{width:"50%"},onClick:()=>N(C),children:s.jsx("img",{src:C.image,alt:C.title,className:"w-full h-48 md:h-auto md:max-h-64 object-cover md:object-contain",onError:P=>{P.target.style.display="none",P.target.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}})},`${C.id}-${T}`)})}),y.length>1&&s.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-1",children:y.map((C,T)=>s.jsx("button",{onClick:()=>t(T+1),className:`w-2 h-2 rounded-full transition-colors ${T===(e-1+y.length)%y.length?"bg-blue-500":"bg-gray-300"}`},T))})]})})}const Rw=_.createContext({});function Lw(e){const t=_.useRef(null);return t.current===null&&(t.current=e()),t.current}const Iw=typeof window<"u",uO=Iw?_.useLayoutEffect:_.useEffect,dg=_.createContext(null);function Mw(e,t){e.indexOf(t)===-1&&e.push(t)}function Dw(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ma=(e,t,n)=>n>t?t:n<e?e:n;let Wm=()=>{};const pa={},hO=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function fO(e){return typeof e=="object"&&e!==null}const mO=e=>/^0[^.\s]+$/u.test(e);function Fw(e){let t;return()=>(t===void 0&&(t=e()),t)}const Nr=e=>e,iU=(e,t)=>n=>t(e(n)),Rh=(...e)=>e.reduce(iU),oh=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class $w{constructor(){this.subscriptions=[]}add(t){return Mw(this.subscriptions,t),()=>Dw(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ci=e=>e*1e3,Ei=e=>e/1e3;function pO(e,t){return t?e*(1e3/t):0}const gO=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,aU=1e-7,oU=12;function lU(e,t,n,r,i){let a,o,l=0;do o=t+(n-t)/2,a=gO(o,r,i)-e,a>0?n=o:t=o;while(Math.abs(a)>aU&&++l<oU);return o}function Lh(e,t,n,r){if(e===t&&n===r)return Nr;const i=a=>lU(a,0,1,e,n);return a=>a===0||a===1?a:gO(i(a),t,r)}const vO=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xO=e=>t=>1-e(1-t),yO=Lh(.33,1.53,.69,.99),Bw=xO(yO),bO=vO(Bw),wO=e=>(e*=2)<1?.5*Bw(e):.5*(2-Math.pow(2,-10*(e-1))),zw=e=>1-Math.sin(Math.acos(e)),_O=xO(zw),jO=vO(zw),cU=Lh(.42,0,1,1),dU=Lh(0,0,.58,1),NO=Lh(.42,0,.58,1),uU=e=>Array.isArray(e)&&typeof e[0]!="number",SO=e=>Array.isArray(e)&&typeof e[0]=="number",Z1={linear:Nr,easeIn:cU,easeInOut:NO,easeOut:dU,circIn:zw,circInOut:jO,circOut:_O,backIn:Bw,backInOut:bO,backOut:yO,anticipate:wO},hU=e=>typeof e=="string",Y1=e=>{if(SO(e)){Wm(e.length===4);const[t,n,r,i]=e;return Lh(t,n,r,i)}else if(hU(e))return Wm(Z1[e]!==void 0),Z1[e];return e},Af=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],X1={value:null,addProjectionMetrics:null};function fU(e,t){let n=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},d=0;function h(u){o.has(u)&&(f.schedule(u),e()),d++,u(l)}const f={schedule:(u,m=!1,p=!1)=>{const y=p&&i?n:r;return m&&o.add(u),y.has(u)||y.add(u),u},cancel:u=>{r.delete(u),o.delete(u)},process:u=>{if(l=u,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(h),t&&X1.value&&X1.value.frameloop[t].push(d),d=0,n.clear(),i=!1,a&&(a=!1,f.process(u))}};return f}const mU=40;function kO(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=Af.reduce((j,N)=>(j[N]=fU(a,t?N:void 0),j),{}),{setup:l,read:d,resolveKeyframes:h,preUpdate:f,update:u,preRender:m,render:p,postRender:w}=o,y=()=>{const j=pa.useManualTiming?i.timestamp:performance.now();n=!1,pa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(j-i.timestamp,mU),1)),i.timestamp=j,i.isProcessing=!0,l.process(i),d.process(i),h.process(i),f.process(i),u.process(i),m.process(i),p.process(i),w.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(y))},b=()=>{n=!0,r=!0,i.isProcessing||e(y)};return{schedule:Af.reduce((j,N)=>{const S=o[N];return j[N]=(C,T=!1,A=!1)=>(n||b(),S.schedule(C,T,A)),j},{}),cancel:j=>{for(let N=0;N<Af.length;N++)o[Af[N]].cancel(j)},state:i,steps:o}}const{schedule:ps,cancel:io,state:cn,steps:nx}=kO(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nr,!0);let sm;function pU(){sm=void 0}const Kn={now:()=>(sm===void 0&&Kn.set(cn.isProcessing||pa.useManualTiming?cn.timestamp:performance.now()),sm),set:e=>{sm=e,queueMicrotask(pU)}},CO=e=>t=>typeof t=="string"&&t.startsWith(e),Vw=CO("--"),gU=CO("var(--"),Uw=e=>gU(e)?vU.test(e.split("/*")[0].trim()):!1,vU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,md={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},lh={...md,transform:e=>ma(0,1,e)},Of={...md,default:1},Nu=e=>Math.round(e*1e5)/1e5,qw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xU(e){return e==null}const yU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Hw=(e,t)=>n=>!!(typeof n=="string"&&yU.test(n)&&n.startsWith(e)||t&&!xU(n)&&Object.prototype.hasOwnProperty.call(n,t)),EO=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,l]=r.match(qw);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},bU=e=>ma(0,255,e),rx={...md,transform:e=>Math.round(bU(e))},Fo={test:Hw("rgb","red"),parse:EO("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+rx.transform(e)+", "+rx.transform(t)+", "+rx.transform(n)+", "+Nu(lh.transform(r))+")"};function wU(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const By={test:Hw("#"),parse:wU,transform:Fo.transform},Ih=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ta=Ih("deg"),Ti=Ih("%"),xt=Ih("px"),_U=Ih("vh"),jU=Ih("vw"),J1={...Ti,parse:e=>Ti.parse(e)/100,transform:e=>Ti.transform(e*100)},ec={test:Hw("hsl","hue"),parse:EO("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ti.transform(Nu(t))+", "+Ti.transform(Nu(n))+", "+Nu(lh.transform(r))+")"},$s={test:e=>Fo.test(e)||By.test(e)||ec.test(e),parse:e=>Fo.test(e)?Fo.parse(e):ec.test(e)?ec.parse(e):By.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Fo.transform(e):ec.transform(e),getAnimatableNone:e=>{const t=$s.parse(e);return t.alpha=0,$s.transform(t)}},NU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function SU(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(qw))==null?void 0:t.length)||0)+(((n=e.match(NU))==null?void 0:n.length)||0)>0}const TO="number",PO="color",kU="var",CU="var(",Q1="${}",EU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ch(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const l=t.replace(EU,d=>($s.test(d)?(r.color.push(a),i.push(PO),n.push($s.parse(d))):d.startsWith(CU)?(r.var.push(a),i.push(kU),n.push(d)):(r.number.push(a),i.push(TO),n.push(parseFloat(d))),++a,Q1)).split(Q1);return{values:n,split:l,indexes:r,types:i}}function AO(e){return ch(e).values}function OO(e){const{split:t,types:n}=ch(e),r=t.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],i[o]!==void 0){const l=n[o];l===TO?a+=Nu(i[o]):l===PO?a+=$s.transform(i[o]):a+=i[o]}return a}}const TU=e=>typeof e=="number"?0:$s.test(e)?$s.getAnimatableNone(e):e;function PU(e){const t=AO(e);return OO(e)(t.map(TU))}const ao={test:SU,parse:AO,createTransformer:OO,getAnimatableNone:PU};function ix(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function AU({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,o=0;if(!t)i=a=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,d=2*n-l;i=ix(d,l,e+1/3),a=ix(d,l,e),o=ix(d,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Gm(e,t){return n=>n>0?t:e}const xs=(e,t,n)=>e+(t-e)*n,ax=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},OU=[By,Fo,ec],RU=e=>OU.find(t=>t.test(e));function eS(e){const t=RU(e);if(!t)return!1;let n=t.parse(e);return t===ec&&(n=AU(n)),n}const tS=(e,t)=>{const n=eS(e),r=eS(t);if(!n||!r)return Gm(e,t);const i={...n};return a=>(i.red=ax(n.red,r.red,a),i.green=ax(n.green,r.green,a),i.blue=ax(n.blue,r.blue,a),i.alpha=xs(n.alpha,r.alpha,a),Fo.transform(i))},zy=new Set(["none","hidden"]);function LU(e,t){return zy.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function IU(e,t){return n=>xs(e,t,n)}function Ww(e){return typeof e=="number"?IU:typeof e=="string"?Uw(e)?Gm:$s.test(e)?tS:FU:Array.isArray(e)?RO:typeof e=="object"?$s.test(e)?tS:MU:Gm}function RO(e,t){const n=[...e],r=n.length,i=e.map((a,o)=>Ww(a)(a,t[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function MU(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Ww(e[i])(e[i],t[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function DU(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],o=e.indexes[a][r[a]],l=e.values[o]??0;n[i]=l,r[a]++}return n}const FU=(e,t)=>{const n=ao.createTransformer(t),r=ch(e),i=ch(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?zy.has(e)&&!i.values.length||zy.has(t)&&!r.values.length?LU(e,t):Rh(RO(DU(r,i),i.values),n):Gm(e,t)};function LO(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?xs(e,t,n):Ww(e)(e,t)}const $U=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>ps.update(t,n),stop:()=>io(t),now:()=>cn.isProcessing?cn.timestamp:Kn.now()}},IO=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)r+=Math.round(e(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Km=2e4;function Gw(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Km;)t+=n,r=e.next(t);return t>=Km?1/0:t}function BU(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(Gw(r),Km);return{type:"keyframes",ease:a=>r.next(i*a).value/t,duration:Ei(i)}}const zU=5;function MO(e,t,n){const r=Math.max(t-zU,0);return pO(n-e(r),t-r)}const js={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ox=.001;function VU({duration:e=js.duration,bounce:t=js.bounce,velocity:n=js.velocity,mass:r=js.mass}){let i,a,o=1-t;o=ma(js.minDamping,js.maxDamping,o),e=ma(js.minDuration,js.maxDuration,Ei(e)),o<1?(i=h=>{const f=h*o,u=f*e,m=f-n,p=Vy(h,o),w=Math.exp(-u);return ox-m/p*w},a=h=>{const u=h*o*e,m=u*n+n,p=Math.pow(o,2)*Math.pow(h,2)*e,w=Math.exp(-u),y=Vy(Math.pow(h,2),o);return(-i(h)+ox>0?-1:1)*((m-p)*w)/y}):(i=h=>{const f=Math.exp(-h*e),u=(h-n)*e+1;return-ox+f*u},a=h=>{const f=Math.exp(-h*e),u=(n-h)*(e*e);return f*u});const l=5/e,d=qU(i,a,l);if(e=Ci(e),isNaN(d))return{stiffness:js.stiffness,damping:js.damping,duration:e};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:e}}}const UU=12;function qU(e,t,n){let r=n;for(let i=1;i<UU;i++)r=r-e(r)/t(r);return r}function Vy(e,t){return e*Math.sqrt(1-t*t)}const HU=["duration","bounce"],WU=["stiffness","damping","mass"];function sS(e,t){return t.some(n=>e[n]!==void 0)}function GU(e){let t={velocity:js.velocity,stiffness:js.stiffness,damping:js.damping,mass:js.mass,isResolvedFromDuration:!1,...e};if(!sS(e,WU)&&sS(e,HU))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*ma(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:js.mass,stiffness:i,damping:a}}else{const n=VU(e);t={...t,...n,mass:js.mass},t.isResolvedFromDuration=!0}return t}function Zm(e=js.visualDuration,t=js.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:d,damping:h,mass:f,duration:u,velocity:m,isResolvedFromDuration:p}=GU({...n,velocity:-Ei(n.velocity||0)}),w=m||0,y=h/(2*Math.sqrt(d*f)),b=o-a,g=Ei(Math.sqrt(d/f)),x=Math.abs(b)<5;r||(r=x?js.restSpeed.granular:js.restSpeed.default),i||(i=x?js.restDelta.granular:js.restDelta.default);let j;if(y<1){const S=Vy(g,y);j=C=>{const T=Math.exp(-y*g*C);return o-T*((w+y*g*b)/S*Math.sin(S*C)+b*Math.cos(S*C))}}else if(y===1)j=S=>o-Math.exp(-g*S)*(b+(w+g*b)*S);else{const S=g*Math.sqrt(y*y-1);j=C=>{const T=Math.exp(-y*g*C),A=Math.min(S*C,300);return o-T*((w+y*g*b)*Math.sinh(A)+S*b*Math.cosh(A))/S}}const N={calculatedDuration:p&&u||null,next:S=>{const C=j(S);if(p)l.done=S>=u;else{let T=S===0?w:0;y<1&&(T=S===0?Ci(w):MO(j,S,C));const A=Math.abs(T)<=r,I=Math.abs(o-C)<=i;l.done=A&&I}return l.value=l.done?o:C,l},toString:()=>{const S=Math.min(Gw(N),Km),C=IO(T=>N.next(S*T).value,S,30);return S+"ms "+C},toTransition:()=>{}};return N}Zm.applyToOptions=e=>{const t=BU(e,100,Zm);return e.ease=t.ease,e.duration=Ci(t.duration),e.type="keyframes",e};function Uy({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:d,restDelta:h=.5,restSpeed:f}){const u=e[0],m={done:!1,value:u},p=A=>l!==void 0&&A<l||d!==void 0&&A>d,w=A=>l===void 0?d:d===void 0||Math.abs(l-A)<Math.abs(d-A)?l:d;let y=n*t;const b=u+y,g=o===void 0?b:o(b);g!==b&&(y=g-u);const x=A=>-y*Math.exp(-A/r),j=A=>g+x(A),N=A=>{const I=x(A),P=j(A);m.done=Math.abs(I)<=h,m.value=m.done?g:P};let S,C;const T=A=>{p(m.value)&&(S=A,C=Zm({keyframes:[m.value,w(m.value)],velocity:MO(j,A,m.value),damping:i,stiffness:a,restDelta:h,restSpeed:f}))};return T(0),{calculatedDuration:null,next:A=>{let I=!1;return!C&&S===void 0&&(I=!0,N(A),T(A)),S!==void 0&&A>=S?C.next(A-S):(!I&&N(A),m)}}}function KU(e,t,n){const r=[],i=n||pa.mix||LO,a=e.length-1;for(let o=0;o<a;o++){let l=i(e[o],e[o+1]);if(t){const d=Array.isArray(t)?t[o]||Nr:t;l=Rh(d,l)}r.push(l)}return r}function ZU(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;if(Wm(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=KU(t,r,i),d=l.length,h=f=>{if(o&&f<e[0])return t[0];let u=0;if(d>1)for(;u<e.length-2&&!(f<e[u+1]);u++);const m=oh(e[u],e[u+1],f);return l[u](m)};return n?f=>h(ma(e[0],e[a-1],f)):h}function YU(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=oh(0,t,r);e.push(xs(n,1,i))}}function XU(e){const t=[0];return YU(t,e.length-1),t}function JU(e,t){return e.map(n=>n*t)}function QU(e,t){return e.map(()=>t||NO).splice(0,e.length-1)}function Su({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=uU(r)?r.map(Y1):Y1(r),a={done:!1,value:t[0]},o=JU(n&&n.length===t.length?n:XU(t),e),l=ZU(o,t,{ease:Array.isArray(i)?i:QU(t,i)});return{calculatedDuration:e,next:d=>(a.value=l(d),a.done=d>=e,a)}}const eq=e=>e!==null;function Kw(e,{repeat:t,repeatType:n="loop"},r,i=1){const a=e.filter(eq),l=i<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const tq={decay:Uy,inertia:Uy,tween:Su,keyframes:Su,spring:Zm};function DO(e){typeof e.type=="string"&&(e.type=tq[e.type])}class Zw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const sq=e=>e/100;class Yw extends Zw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Kn.now()&&this.tick(Kn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;DO(t);const{type:n=Su,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=t;let{keyframes:l}=t;const d=n||Su;d!==Su&&typeof l[0]!="number"&&(this.mixKeyframes=Rh(sq,LO(l[0],l[1])),l=[0,100]);const h=d({...t,keyframes:l});a==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...l].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=Gw(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:f,repeat:u,repeatType:m,repeatDelay:p,type:w,onUpdate:y,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const g=this.currentTime-h*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let j=this.currentTime,N=r;if(u){const A=Math.min(this.currentTime,i)/l;let I=Math.floor(A),P=A%1;!P&&A>=1&&(P=1),P===1&&I--,I=Math.min(I,u+1),!!(I%2)&&(m==="reverse"?(P=1-P,p&&(P-=p/l)):m==="mirror"&&(N=o)),j=ma(0,1,P)*l}const S=x?{done:!1,value:f[0]}:N.next(j);a&&(S.value=a(S.value));let{done:C}=S;!x&&d!==null&&(C=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return T&&w!==Uy&&(S.value=Kw(f,this.options,b,this.speed)),y&&y(S.value),T&&this.finish(),S}then(t,n){return this.finished.then(t,n)}get duration(){return Ei(this.calculatedDuration)}get time(){return Ei(this.currentTime)}set time(t){var n;t=Ci(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Kn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ei(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:t=$U,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function nq(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const $o=e=>e*180/Math.PI,qy=e=>{const t=$o(Math.atan2(e[1],e[0]));return Hy(t)},rq={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:qy,rotateZ:qy,skewX:e=>$o(Math.atan(e[1])),skewY:e=>$o(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Hy=e=>(e=e%360,e<0&&(e+=360),e),nS=qy,rS=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),iS=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),iq={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:rS,scaleY:iS,scale:e=>(rS(e)+iS(e))/2,rotateX:e=>Hy($o(Math.atan2(e[6],e[5]))),rotateY:e=>Hy($o(Math.atan2(-e[2],e[0]))),rotateZ:nS,rotate:nS,skewX:e=>$o(Math.atan(e[4])),skewY:e=>$o(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Wy(e){return e.includes("scale")?1:0}function Gy(e,t){if(!e||e==="none")return Wy(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=iq,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=rq,i=l}if(!i)return Wy(t);const a=r[t],o=i[1].split(",").map(oq);return typeof a=="function"?a(o):o[a]}const aq=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Gy(n,t)};function oq(e){return parseFloat(e.trim())}const pd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gd=new Set(pd),aS=e=>e===md||e===xt,lq=new Set(["x","y","z"]),cq=pd.filter(e=>!lq.has(e));function dq(e){const t=[];return cq.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Jo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Gy(t,"x"),y:(e,{transform:t})=>Gy(t,"y")};Jo.translateX=Jo.x;Jo.translateY=Jo.y;const Qo=new Set;let Ky=!1,Zy=!1,Yy=!1;function FO(){if(Zy){const e=Array.from(Qo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=dq(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{var l;(l=r.getValue(a))==null||l.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Zy=!1,Ky=!1,Qo.forEach(e=>e.complete(Yy)),Qo.clear()}function $O(){Qo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Zy=!0)})}function uq(){Yy=!0,$O(),FO(),Yy=!1}class Xw{constructor(t,n,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Qo.add(this),Ky||(Ky=!0,ps.read($O),ps.resolveKeyframes(FO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const a=i==null?void 0:i.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}nq(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Qo.delete(this)}cancel(){this.state==="scheduled"&&(Qo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const hq=e=>e.startsWith("--");function fq(e,t,n){hq(t)?e.style.setProperty(t,n):e.style[t]=n}const mq=Fw(()=>window.ScrollTimeline!==void 0),pq={};function gq(e,t){const n=Fw(e);return()=>pq[t]??n()}const BO=gq(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),lu=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,oS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lu([0,.65,.55,1]),circOut:lu([.55,0,1,.45]),backIn:lu([.31,.01,.66,-.59]),backOut:lu([.33,1.53,.69,.99])};function zO(e,t){if(e)return typeof e=="function"?BO()?IO(e,t):"ease-out":SO(e)?lu(e):Array.isArray(e)?e.map(n=>zO(n,t)||oS.easeOut):oS[e]}function vq(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:d}={},h=void 0){const f={[t]:n};d&&(f.offset=d);const u=zO(l,i);Array.isArray(u)&&(f.easing=u);const m={delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),e.animate(f,m)}function VO(e){return typeof e=="function"&&"applyToOptions"in e}function xq({type:e,...t}){return VO(e)&&BO()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class yq extends Zw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:d}=t;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=t,Wm(typeof t.type!="string");const h=xq(t);this.animation=vq(n,r,i,h,a),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=Kw(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(f):fq(n,r,f),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ei(Number(t))}get time(){return Ei(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ci(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&mq()?(this.animation.timeline=t,Nr):n(this)}}const UO={anticipate:wO,backInOut:bO,circInOut:jO};function bq(e){return e in UO}function wq(e){typeof e.ease=="string"&&bq(e.ease)&&(e.ease=UO[e.ease])}const lS=10;class _q extends yq{constructor(t){wq(t),DO(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new Yw({...o,autoplay:!1}),d=Ci(this.finishedTime??this.time);n.setWithVelocity(l.sample(d-lS).value,l.sample(d).value,lS),l.stop()}}const cS=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ao.test(e)||e==="0")&&!e.startsWith("url("));function jq(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Nq(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=cS(i,t),l=cS(a,t);return!o||!l?!1:jq(e)||(n==="spring"||VO(n))&&r}function Xy(e){e.duration=0,e.type}const Sq=new Set(["opacity","clipPath","filter","transform"]),kq=Fw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Cq(e){var f;const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!(((f=t==null?void 0:t.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=t.owner.getProps();return kq()&&n&&Sq.has(n)&&(n!=="transform"||!h)&&!d&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const Eq=40;class Tq extends Zw{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:d,motionValue:h,element:f,...u}){var w;super(),this.stop=()=>{var y,b;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Kn.now();const m={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,name:d,motionValue:h,element:f,...u},p=(f==null?void 0:f.KeyframeResolver)||Xw;this.keyframeResolver=new p(l,(y,b,g)=>this.onKeyframesResolved(y,b,m,!g),d,h,f),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:d,isHandoff:h,onUpdate:f}=r;this.resolvedAt=Kn.now(),Nq(t,a,o,l)||((pa.instantAnimations||!d)&&(f==null||f(Kw(t,r,n))),t[0]=t[t.length-1],Xy(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Eq?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!h&&Cq(m)?new _q({...m,element:m.motionValue.owner.current}):new Yw(m);p.finished.then(()=>this.notifyFinished()).catch(Nr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),uq()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Pq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Aq(e){const t=Pq.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function qO(e,t,n=1){const[r,i]=Aq(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const o=a.trim();return hO(o)?parseFloat(o):o}return Uw(i)?qO(i,t,n+1):i}function Jw(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const HO=new Set(["width","height","top","left","right","bottom",...pd]),Oq={test:e=>e==="auto",parse:e=>e},WO=e=>t=>t.test(e),GO=[md,xt,Ti,Ta,jU,_U,Oq],dS=e=>GO.find(WO(e));function Rq(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||mO(e):!0}const Lq=new Set(["brightness","contrast","saturate","opacity"]);function Iq(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(qw)||[];if(!r)return e;const i=n.replace(r,"");let a=Lq.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const Mq=/\b([a-z-]*)\(.*?\)/gu,Jy={...ao,getAnimatableNone:e=>{const t=e.match(Mq);return t?t.map(Iq).join(" "):e}},uS={...md,transform:Math.round},Dq={rotate:Ta,rotateX:Ta,rotateY:Ta,rotateZ:Ta,scale:Of,scaleX:Of,scaleY:Of,scaleZ:Of,skew:Ta,skewX:Ta,skewY:Ta,distance:xt,translateX:xt,translateY:xt,translateZ:xt,x:xt,y:xt,z:xt,perspective:xt,transformPerspective:xt,opacity:lh,originX:J1,originY:J1,originZ:xt},Qw={borderWidth:xt,borderTopWidth:xt,borderRightWidth:xt,borderBottomWidth:xt,borderLeftWidth:xt,borderRadius:xt,radius:xt,borderTopLeftRadius:xt,borderTopRightRadius:xt,borderBottomRightRadius:xt,borderBottomLeftRadius:xt,width:xt,maxWidth:xt,height:xt,maxHeight:xt,top:xt,right:xt,bottom:xt,left:xt,padding:xt,paddingTop:xt,paddingRight:xt,paddingBottom:xt,paddingLeft:xt,margin:xt,marginTop:xt,marginRight:xt,marginBottom:xt,marginLeft:xt,backgroundPositionX:xt,backgroundPositionY:xt,...Dq,zIndex:uS,fillOpacity:lh,strokeOpacity:lh,numOctaves:uS},Fq={...Qw,color:$s,backgroundColor:$s,outlineColor:$s,fill:$s,stroke:$s,borderColor:$s,borderTopColor:$s,borderRightColor:$s,borderBottomColor:$s,borderLeftColor:$s,filter:Jy,WebkitFilter:Jy},KO=e=>Fq[e];function ZO(e,t){let n=KO(e);return n!==Jy&&(n=ao),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const $q=new Set(["auto","none","0"]);function Bq(e,t,n){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!$q.has(a)&&ch(a).values.length&&(i=e[r]),r++}if(i&&n)for(const a of t)e[a]=ZO(n,i)}class zq extends Xw{constructor(t,n,r,i,a){super(t,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let h=t[d];if(typeof h=="string"&&(h=h.trim(),Uw(h))){const f=qO(h,n.current);f!==void 0&&(t[d]=f),d===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!HO.has(r)||t.length!==2)return;const[i,a]=t,o=dS(i),l=dS(a);if(o!==l)if(aS(o)&&aS(l))for(let d=0;d<t.length;d++){const h=t[d];typeof h=="string"&&(t[d]=parseFloat(h))}else Jo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||Rq(t[i]))&&r.push(i);r.length&&Bq(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Jo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([d,h])=>{t.getValue(d).set(h)}),this.resolveNoneKeyframes()}}function Vq(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const i=document.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const YO=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function XO(e){return fO(e)&&"offsetHeight"in e}const hS=30,Uq=e=>!isNaN(parseFloat(e));class qq{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const i=Kn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Kn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Uq(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new $w);const r=this.events[t].add(n);return t==="change"?()=>{r(),ps.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Kn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>hS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,hS);return pO(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gc(e,t){return new qq(e,t)}const{schedule:e_,cancel:nae}=kO(queueMicrotask,!1),Ir={x:!1,y:!1};function JO(){return Ir.x||Ir.y}function Hq(e){return e==="x"||e==="y"?Ir[e]?null:(Ir[e]=!0,()=>{Ir[e]=!1}):Ir.x||Ir.y?null:(Ir.x=Ir.y=!0,()=>{Ir.x=Ir.y=!1})}function QO(e,t){const n=Vq(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function fS(e){return!(e.pointerType==="touch"||JO())}function Wq(e,t,n={}){const[r,i,a]=QO(e,n),o=l=>{if(!fS(l))return;const{target:d}=l,h=t(d,l);if(typeof h!="function"||!d)return;const f=u=>{fS(u)&&(h(u),d.removeEventListener("pointerleave",f))};d.addEventListener("pointerleave",f,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),a}const eR=(e,t)=>t?e===t?!0:eR(e,t.parentElement):!1,t_=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Gq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Kq(e){return Gq.has(e.tagName)||e.tabIndex!==-1}const nm=new WeakSet;function mS(e){return t=>{t.key==="Enter"&&e(t)}}function lx(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Zq=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=mS(()=>{if(nm.has(n))return;lx(n,"down");const i=mS(()=>{lx(n,"up")}),a=()=>lx(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function pS(e){return t_(e)&&!JO()}function Yq(e,t,n={}){const[r,i,a]=QO(e,n),o=l=>{const d=l.currentTarget;if(!pS(l))return;nm.add(d);const h=t(d,l),f=(p,w)=>{window.removeEventListener("pointerup",u),window.removeEventListener("pointercancel",m),nm.has(d)&&nm.delete(d),pS(p)&&typeof h=="function"&&h(p,{success:w})},u=p=>{f(p,d===window||d===document||n.useGlobalTarget||eR(d,p.target))},m=p=>{f(p,!1)};window.addEventListener("pointerup",u,i),window.addEventListener("pointercancel",m,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),XO(l)&&(l.addEventListener("focus",h=>Zq(h,i)),!Kq(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function tR(e){return fO(e)&&"ownerSVGElement"in e}function Xq(e){return tR(e)&&e.tagName==="svg"}const yn=e=>!!(e&&e.getVelocity),Jq=[...GO,$s,ao],Qq=e=>Jq.find(WO(e)),s_=_.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class eH extends _.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=XO(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function tH({children:e,isPresent:t,anchorX:n,root:r}){const i=_.useId(),a=_.useRef(null),o=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=_.useContext(s_);return _.useInsertionEffect(()=>{const{width:d,height:h,top:f,left:u,right:m}=o.current;if(t||!a.current||!d||!h)return;const p=n==="left"?`left: ${u}`:`right: ${m}`;a.current.dataset.motionPopId=i;const w=document.createElement("style");l&&(w.nonce=l);const y=r??document.head;return y.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${p}px !important;
            top: ${f}px !important;
          }
        `),()=>{y.contains(w)&&y.removeChild(w)}},[t]),s.jsx(eH,{isPresent:t,childRef:a,sizeRef:o,children:_.cloneElement(e,{ref:a})})}const sH=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:l,root:d})=>{const h=Lw(nH),f=_.useId();let u=!0,m=_.useMemo(()=>(u=!1,{id:f,initial:t,isPresent:n,custom:i,onExitComplete:p=>{h.set(p,!0);for(const w of h.values())if(!w)return;r&&r()},register:p=>(h.set(p,!1),()=>h.delete(p))}),[n,h,r]);return a&&u&&(m={...m}),_.useMemo(()=>{h.forEach((p,w)=>h.set(w,!1))},[n]),_.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),o==="popLayout"&&(e=s.jsx(tH,{isPresent:n,anchorX:l,root:d,children:e})),s.jsx(dg.Provider,{value:m,children:e})};function nH(){return new Map}function sR(e=!0){const t=_.useContext(dg);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,a=_.useId();_.useEffect(()=>{if(e)return i(a)},[e]);const o=_.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,o]:[!0]}const Rf=e=>e.key||"";function gS(e){const t=[];return _.Children.forEach(e,n=>{_.isValidElement(n)&&t.push(n)}),t}const vS=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:l="left",root:d})=>{const[h,f]=sR(o),u=_.useMemo(()=>gS(e),[e]),m=o&&!h?[]:u.map(Rf),p=_.useRef(!0),w=_.useRef(u),y=Lw(()=>new Map),[b,g]=_.useState(u),[x,j]=_.useState(u);uO(()=>{p.current=!1,w.current=u;for(let C=0;C<x.length;C++){const T=Rf(x[C]);m.includes(T)?y.delete(T):y.get(T)!==!0&&y.set(T,!1)}},[x,m.length,m.join("-")]);const N=[];if(u!==b){let C=[...u];for(let T=0;T<x.length;T++){const A=x[T],I=Rf(A);m.includes(I)||(C.splice(T,0,A),N.push(A))}return a==="wait"&&N.length&&(C=N),j(gS(C)),g(u),null}const{forceRender:S}=_.useContext(Rw);return s.jsx(s.Fragment,{children:x.map(C=>{const T=Rf(C),A=o&&!h?!1:u===x||m.includes(T),I=()=>{if(y.has(T))y.set(T,!0);else return;let P=!0;y.forEach(R=>{R||(P=!1)}),P&&(S==null||S(),j(w.current),o&&(f==null||f()),r&&r())};return s.jsx(sH,{isPresent:A,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:d,onExitComplete:A?void 0:I,anchorX:l,children:C},T)})})},nR=_.createContext({strict:!1}),xS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Kc={};for(const e in xS)Kc[e]={isEnabled:t=>xS[e].some(n=>!!t[n])};function rH(e){for(const t in e)Kc[t]={...Kc[t],...e[t]}}const iH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ym(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||iH.has(e)}let rR=e=>!Ym(e);function aH(e){typeof e=="function"&&(rR=t=>t.startsWith("on")?!Ym(t):e(t))}try{aH(require("@emotion/is-prop-valid").default)}catch{}function oH(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(rR(i)||n===!0&&Ym(i)||!t&&!Ym(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const ug=_.createContext({});function hg(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function dh(e){return typeof e=="string"||Array.isArray(e)}const n_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],r_=["initial",...n_];function fg(e){return hg(e.animate)||r_.some(t=>dh(e[t]))}function iR(e){return!!(fg(e)||e.variants)}function lH(e,t){if(fg(e)){const{initial:n,animate:r}=e;return{initial:n===!1||dh(n)?n:void 0,animate:dh(r)?r:void 0}}return e.inherit!==!1?t:{}}function cH(e){const{initial:t,animate:n}=lH(e,_.useContext(ug));return _.useMemo(()=>({initial:t,animate:n}),[yS(t),yS(n)])}function yS(e){return Array.isArray(e)?e.join(" "):e}const uh={};function dH(e){for(const t in e)uh[t]=e[t],Vw(t)&&(uh[t].isCSSVariable=!0)}function aR(e,{layout:t,layoutId:n}){return gd.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!uh[e]||e==="opacity")}const uH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hH=pd.length;function fH(e,t,n){let r="",i=!0;for(let a=0;a<hH;a++){const o=pd[a],l=e[o];if(l===void 0)continue;let d=!0;if(typeof l=="number"?d=l===(o.startsWith("scale")?1:0):d=parseFloat(l)===0,!d||n){const h=YO(l,Qw[o]);if(!d){i=!1;const f=uH[o]||o;r+=`${f}(${h}) `}n&&(t[o]=h)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function i_(e,t,n){const{style:r,vars:i,transformOrigin:a}=e;let o=!1,l=!1;for(const d in t){const h=t[d];if(gd.has(d)){o=!0;continue}else if(Vw(d)){i[d]=h;continue}else{const f=YO(h,Qw[d]);d.startsWith("origin")?(l=!0,a[d]=f):r[d]=f}}if(t.transform||(o||n?r.transform=fH(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:d="50%",originY:h="50%",originZ:f=0}=a;r.transformOrigin=`${d} ${h} ${f}`}}const a_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oR(e,t,n){for(const r in t)!yn(t[r])&&!aR(r,n)&&(e[r]=t[r])}function mH({transformTemplate:e},t){return _.useMemo(()=>{const n=a_();return i_(n,t,e),Object.assign({},n.vars,n.style)},[t])}function pH(e,t){const n=e.style||{},r={};return oR(r,n,e),Object.assign(r,mH(e,t)),r}function gH(e,t){const n={},r=pH(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const vH={offset:"stroke-dashoffset",array:"stroke-dasharray"},xH={offset:"strokeDashoffset",array:"strokeDasharray"};function yH(e,t,n=1,r=0,i=!0){e.pathLength=1;const a=i?vH:xH;e[a.offset]=xt.transform(-r);const o=xt.transform(t),l=xt.transform(n);e[a.array]=`${o} ${l}`}function lR(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...l},d,h,f){if(i_(e,l,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:u,style:m}=e;u.transform&&(m.transform=u.transform,delete u.transform),(m.transform||u.transformOrigin)&&(m.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),m.transform&&(m.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete u.transformBox),t!==void 0&&(u.x=t),n!==void 0&&(u.y=n),r!==void 0&&(u.scale=r),i!==void 0&&yH(u,i,a,o,!1)}const cR=()=>({...a_(),attrs:{}}),dR=e=>typeof e=="string"&&e.toLowerCase()==="svg";function bH(e,t,n,r){const i=_.useMemo(()=>{const a=cR();return lR(a,t,dR(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};oR(a,e.style,e),i.style={...a,...i.style}}return i}const wH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function o_(e){return typeof e!="string"||e.includes("-")?!1:!!(wH.indexOf(e)>-1||/[A-Z]/u.test(e))}function _H(e,t,n,{latestValues:r},i,a=!1){const l=(o_(e)?bH:gH)(t,r,i,e),d=oH(t,typeof e=="string",a),h=e!==_.Fragment?{...d,...l,ref:n}:{},{children:f}=t,u=_.useMemo(()=>yn(f)?f.get():f,[f]);return _.createElement(e,{...h,children:u})}function bS(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function l_(e,t,n,r){if(typeof t=="function"){const[i,a]=bS(r);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=bS(r);t=t(n!==void 0?n:e.custom,i,a)}return t}function rm(e){return yn(e)?e.get():e}function jH({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:NH(n,r,i,e),renderState:t()}}function NH(e,t,n,r){const i={},a=r(e,{});for(const m in a)i[m]=rm(a[m]);let{initial:o,animate:l}=e;const d=fg(e),h=iR(e);t&&h&&!d&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const u=f?l:o;if(u&&typeof u!="boolean"&&!hg(u)){const m=Array.isArray(u)?u:[u];for(let p=0;p<m.length;p++){const w=l_(e,m[p]);if(w){const{transitionEnd:y,transition:b,...g}=w;for(const x in g){let j=g[x];if(Array.isArray(j)){const N=f?j.length-1:0;j=j[N]}j!==null&&(i[x]=j)}for(const x in y)i[x]=y[x]}}}return i}const uR=e=>(t,n)=>{const r=_.useContext(ug),i=_.useContext(dg),a=()=>jH(e,t,r,i);return n?a():Lw(a)};function c_(e,t,n){var a;const{style:r}=e,i={};for(const o in r)(yn(r[o])||t.style&&yn(t.style[o])||aR(o,e)||((a=n==null?void 0:n.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const SH=uR({scrapeMotionValuesFromProps:c_,createRenderState:a_});function hR(e,t,n){const r=c_(e,t,n);for(const i in e)if(yn(e[i])||yn(t[i])){const a=pd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}const kH=uR({scrapeMotionValuesFromProps:hR,createRenderState:cR}),CH=Symbol.for("motionComponentSymbol");function tc(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function EH(e,t,n){return _.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):tc(n)&&(n.current=r))},[t])}const d_=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),TH="framerAppearId",fR="data-"+d_(TH),mR=_.createContext({});function PH(e,t,n,r,i){var y,b;const{visualElement:a}=_.useContext(ug),o=_.useContext(nR),l=_.useContext(dg),d=_.useContext(s_).reducedMotion,h=_.useRef(null);r=r||o.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,u=_.useContext(mR);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&AH(h.current,n,i,u);const m=_.useRef(!1);_.useInsertionEffect(()=>{f&&m.current&&f.update(n,l)});const p=n[fR],w=_.useRef(!!p&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,p))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,p)));return uO(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),w.current&&f.animationState&&f.animationState.animateChanges())}),_.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,p)}),w.current=!1),f.enteringChildren=void 0)}),f}function AH(e,t,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:d,layoutRoot:h,layoutCrossfade:f}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:pR(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&tc(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:d,layoutRoot:h})}function pR(e){if(e)return e.options.allowProjection!==!1?e.projection:pR(e.parent)}function cx(e,{forwardMotionProps:t=!1}={},n,r){n&&rH(n);const i=o_(e)?kH:SH;function a(l,d){let h;const f={..._.useContext(s_),...l,layoutId:OH(l)},{isStatic:u}=f,m=cH(l),p=i(l,u);if(!u&&Iw){RH();const w=LH(f);h=w.MeasureLayout,m.visualElement=PH(e,p,f,r,w.ProjectionNode)}return s.jsxs(ug.Provider,{value:m,children:[h&&m.visualElement?s.jsx(h,{visualElement:m.visualElement,...f}):null,_H(e,l,EH(p,m.visualElement,d),p,u,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=_.forwardRef(a);return o[CH]=e,o}function OH({layoutId:e}){const t=_.useContext(Rw).id;return t&&e!==void 0?t+"-"+e:e}function RH(e,t){_.useContext(nR).strict}function LH(e){const{drag:t,layout:n}=Kc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function IH(e,t){if(typeof Proxy>"u")return cx;const n=new Map,r=(a,o)=>cx(a,o,e,t),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,cx(o,void 0,e,t)),n.get(o))})}function gR({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function MH({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function DH(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function dx(e){return e===void 0||e===1}function Qy({scale:e,scaleX:t,scaleY:n}){return!dx(e)||!dx(t)||!dx(n)}function Po(e){return Qy(e)||vR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function vR(e){return wS(e.x)||wS(e.y)}function wS(e){return e&&e!=="0%"}function Xm(e,t,n){const r=e-n,i=t*r;return n+i}function _S(e,t,n,r,i){return i!==void 0&&(e=Xm(e,i,r)),Xm(e,n,r)+t}function e0(e,t=0,n=1,r,i){e.min=_S(e.min,t,n,r,i),e.max=_S(e.max,t,n,r,i)}function xR(e,{x:t,y:n}){e0(e.x,t.translate,t.scale,t.originPoint),e0(e.y,n.translate,n.scale,n.originPoint)}const jS=.999999999999,NS=1.0000000000001;function FH(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,o;for(let l=0;l<i;l++){a=n[l],o=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&nc(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,xR(e,o)),r&&Po(a.latestValues)&&nc(e,a.latestValues))}t.x<NS&&t.x>jS&&(t.x=1),t.y<NS&&t.y>jS&&(t.y=1)}function sc(e,t){e.min=e.min+t,e.max=e.max+t}function SS(e,t,n,r,i=.5){const a=xs(e.min,e.max,i);e0(e,t,n,a,r)}function nc(e,t){SS(e.x,t.x,t.scaleX,t.scale,t.originX),SS(e.y,t.y,t.scaleY,t.scale,t.originY)}function yR(e,t){return gR(DH(e.getBoundingClientRect(),t))}function $H(e,t,n){const r=yR(e,n),{scroll:i}=t;return i&&(sc(r.x,i.offset.x),sc(r.y,i.offset.y)),r}const kS=()=>({translate:0,scale:1,origin:0,originPoint:0}),rc=()=>({x:kS(),y:kS()}),CS=()=>({min:0,max:0}),Ts=()=>({x:CS(),y:CS()}),t0={current:null},bR={current:!1};function BH(){if(bR.current=!0,!!Iw)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>t0.current=e.matches;e.addEventListener("change",t),t()}else t0.current=!1}const zH=new WeakMap;function VH(e,t,n){for(const r in t){const i=t[r],a=n[r];if(yn(i))e.addValue(r,i);else if(yn(a))e.addValue(r,Gc(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,Gc(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const ES=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class UH{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Kn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ps.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=fg(n),this.isVariantNode=iR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in u){const p=u[m];d[m]!==void 0&&yn(p)&&p.set(d[m])}}mount(t){var n;this.current=t,zH.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),bR.current||BH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:t0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),io(this.notifyUpdate),io(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=gd.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ps.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Kc){const n=Kc[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ts()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ES.length;r++){const i=ES[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=t[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=VH(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Gc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(hO(r)||mO(r))?r=parseFloat(r):!Qq(r)&&ao.test(n)&&(r=ZO(t,n)),this.setBaseTarget(t,yn(r)?r.get():r)),yn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=l_(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!yn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new $w),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){e_.render(this.render)}}class wR extends UH{constructor(){super(...arguments),this.KeyframeResolver=zq}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;yn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function _R(e,{style:t,vars:n},r,i){const a=e.style;let o;for(o in t)a[o]=t[o];i==null||i.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function qH(e){return window.getComputedStyle(e)}class HH extends wR{constructor(){super(...arguments),this.type="html",this.renderInstance=_R}readValueFromInstance(t,n){var r;if(gd.has(n))return(r=this.projection)!=null&&r.isProjecting?Wy(n):aq(t,n);{const i=qH(t),a=(Vw(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return yR(t,n)}build(t,n,r){i_(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return c_(t,n,r)}}const jR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function WH(e,t,n,r){_R(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(jR.has(i)?i:d_(i),t.attrs[i])}class GH extends wR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ts}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(gd.has(n)){const r=KO(n);return r&&r.default||0}return n=jR.has(n)?n:d_(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return hR(t,n,r)}build(t,n,r){lR(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){WH(t,n,r,i)}mount(t){this.isSVGTag=dR(t.tagName),super.mount(t)}}const KH=(e,t)=>o_(e)?new GH(t):new HH(t,{allowProjection:e!==_.Fragment});function gc(e,t,n){const r=e.getProps();return l_(r,t,n!==void 0?n:r.custom,e)}const s0=e=>Array.isArray(e);function ZH(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Gc(n))}function YH(e){return s0(e)?e[e.length-1]||0:e}function XH(e,t){const n=gc(e,t);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const l=YH(a[o]);ZH(e,o,l)}}function JH(e){return!!(yn(e)&&e.add)}function n0(e,t){const n=e.getValue("willChange");if(JH(n))return n.add(t);if(!n&&pa.WillChange){const r=new pa.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function NR(e){return e.props[fR]}const QH=e=>e!==null;function eW(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(QH),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const tW={type:"spring",stiffness:500,damping:25,restSpeed:10},sW=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),nW={type:"keyframes",duration:.8},rW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iW=(e,{keyframes:t})=>t.length>2?nW:gd.has(e)?e.startsWith("scale")?sW(t[1]):tW:rW;function aW({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:d,elapsed:h,...f}){return!!Object.keys(f).length}const u_=(e,t,n,r={},i,a)=>o=>{const l=Jw(r,e)||{},d=l.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Ci(d);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-h,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:i};aW(l)||Object.assign(f,iW(e,f)),f.duration&&(f.duration=Ci(f.duration)),f.repeatDelay&&(f.repeatDelay=Ci(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let u=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Xy(f),f.delay===0&&(u=!0)),(pa.instantAnimations||pa.skipAnimations)&&(u=!0,Xy(f),f.delay=0),f.allowFlatten=!l.type&&!l.ease,u&&!a&&t.get()!==void 0){const m=eW(f.keyframes,l);if(m!==void 0){ps.update(()=>{f.onUpdate(m),f.onComplete()});return}}return l.isSync?new Yw(f):new Tq(f)};function oW({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function SR(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(a=r);const d=[],h=i&&e.animationState&&e.animationState.getState()[i];for(const f in l){const u=e.getValue(f,e.latestValues[f]??null),m=l[f];if(m===void 0||h&&oW(h,f))continue;const p={delay:n,...Jw(a||{},f)},w=u.get();if(w!==void 0&&!u.isAnimating&&!Array.isArray(m)&&m===w&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const g=NR(e);if(g){const x=window.MotionHandoffAnimation(g,f,ps);x!==null&&(p.startTime=x,y=!0)}}n0(e,f),u.start(u_(f,u,m,e.shouldReduceMotion&&HO.has(f)?{type:!1}:p,e,y));const b=u.animation;b&&d.push(b)}return o&&Promise.all(d).then(()=>{ps.update(()=>{o&&XH(e,o)})}),d}function kR(e,t,n,r=0,i=1){const a=Array.from(e).sort((h,f)=>h.sortNodePosition(f)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(a,o):i===1?a*r:l-a*r}function r0(e,t,n={}){var d;const r=gc(e,t,n.type==="exit"?(d=e.presenceContext)==null?void 0:d.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(SR(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:u,staggerDirection:m}=i;return lW(e,t,h,f,u,m,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[h,f]=l==="beforeChildren"?[a,o]:[o,a];return h().then(()=>f())}else return Promise.all([a(),o(n.delay)])}function lW(e,t,n=0,r=0,i=0,a=1,o){const l=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),l.push(r0(d,t,{...o,delay:n+(typeof r=="function"?0:r)+kR(e.variantChildren,d,r,i,a)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(l)}function cW(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>r0(e,a,n));r=Promise.all(i)}else if(typeof t=="string")r=r0(e,t,n);else{const i=typeof t=="function"?gc(e,t,n.custom):t;r=Promise.all(SR(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function CR(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const dW=r_.length;function ER(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?ER(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<dW;n++){const r=r_[n],i=e.props[r];(dh(i)||i===!1)&&(t[r]=i)}return t}const uW=[...n_].reverse(),hW=n_.length;function fW(e){return t=>Promise.all(t.map(({animation:n,options:r})=>cW(e,n,r)))}function mW(e){let t=fW(e),n=TS(),r=!0;const i=d=>(h,f)=>{var m;const u=gc(e,f,d==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(u){const{transition:p,transitionEnd:w,...y}=u;h={...h,...y,...w}}return h};function a(d){t=d(e)}function o(d){const{props:h}=e,f=ER(e.parent)||{},u=[],m=new Set;let p={},w=1/0;for(let b=0;b<hW;b++){const g=uW[b],x=n[g],j=h[g]!==void 0?h[g]:f[g],N=dh(j),S=g===d?x.isActive:null;S===!1&&(w=b);let C=j===f[g]&&j!==h[g]&&N;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),x.protectedKeys={...p},!x.isActive&&S===null||!j&&!x.prevProp||hg(j)||typeof j=="boolean")continue;const T=pW(x.prevProp,j);let A=T||g===d&&x.isActive&&!C&&N||b>w&&N,I=!1;const P=Array.isArray(j)?j:[j];let R=P.reduce(i(g),{});S===!1&&(R={});const{prevResolvedValues:E={}}=x,F={...E,...R},O=X=>{A=!0,m.has(X)&&(I=!0,m.delete(X)),x.needsAnimating[X]=!0;const z=e.getValue(X);z&&(z.liveStyle=!1)};for(const X in F){const z=R[X],D=E[X];if(p.hasOwnProperty(X))continue;let B=!1;s0(z)&&s0(D)?B=!CR(z,D):B=z!==D,B?z!=null?O(X):m.add(X):z!==void 0&&m.has(X)?O(X):x.protectedKeys[X]=!0}x.prevProp=j,x.prevResolvedValues=R,x.isActive&&(p={...p,...R}),r&&e.blockInitialAnimation&&(A=!1);const M=C&&T;A&&(!M||I)&&u.push(...P.map(X=>{const z={type:g};if(typeof X=="string"&&r&&!M&&e.manuallyAnimateOnMount&&e.parent){const{parent:D}=e,B=gc(D,X);if(D.enteringChildren&&B){const{delayChildren:V}=B.transition||{};z.delay=kR(D.enteringChildren,e,V)}}return{animation:X,options:z}}))}if(m.size){const b={};if(typeof h.initial!="boolean"){const g=gc(e,Array.isArray(h.initial)?h.initial[0]:h.initial);g&&g.transition&&(b.transition=g.transition)}m.forEach(g=>{const x=e.getBaseTarget(g),j=e.getValue(g);j&&(j.liveStyle=!0),b[g]=x??null}),u.push({animation:b})}let y=!!u.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(u):Promise.resolve()}function l(d,h){var u;if(n[d].isActive===h)return Promise.resolve();(u=e.variantChildren)==null||u.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(d,h)}),n[d].isActive=h;const f=o(d);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=TS(),r=!0}}}function pW(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!CR(t,e):!1}function ko(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function TS(){return{animate:ko(!0),whileInView:ko(),whileHover:ko(),whileTap:ko(),whileDrag:ko(),whileFocus:ko(),exit:ko()}}class go{constructor(t){this.isMounted=!1,this.node=t}update(){}}class gW extends go{constructor(t){super(t),t.animationState||(t.animationState=mW(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();hg(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let vW=0;class xW extends go{constructor(){super(...arguments),this.id=vW++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const yW={animation:{Feature:gW},exit:{Feature:xW}};function hh(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Mh(e){return{point:{x:e.pageX,y:e.pageY}}}const bW=e=>t=>t_(t)&&e(t,Mh(t));function ku(e,t,n,r){return hh(e,t,bW(n),r)}const TR=1e-4,wW=1-TR,_W=1+TR,PR=.01,jW=0-PR,NW=0+PR;function Tn(e){return e.max-e.min}function SW(e,t,n){return Math.abs(e-t)<=n}function PS(e,t,n,r=.5){e.origin=r,e.originPoint=xs(t.min,t.max,e.origin),e.scale=Tn(n)/Tn(t),e.translate=xs(n.min,n.max,e.origin)-e.originPoint,(e.scale>=wW&&e.scale<=_W||isNaN(e.scale))&&(e.scale=1),(e.translate>=jW&&e.translate<=NW||isNaN(e.translate))&&(e.translate=0)}function Cu(e,t,n,r){PS(e.x,t.x,n.x,r?r.originX:void 0),PS(e.y,t.y,n.y,r?r.originY:void 0)}function AS(e,t,n){e.min=n.min+t.min,e.max=e.min+Tn(t)}function kW(e,t,n){AS(e.x,t.x,n.x),AS(e.y,t.y,n.y)}function OS(e,t,n){e.min=t.min-n.min,e.max=e.min+Tn(t)}function Eu(e,t,n){OS(e.x,t.x,n.x),OS(e.y,t.y,n.y)}function gr(e){return[e("x"),e("y")]}const AR=({current:e})=>e?e.ownerDocument.defaultView:null,RS=(e,t)=>Math.abs(e-t);function CW(e,t){const n=RS(e.x,t.x),r=RS(e.y,t.y);return Math.sqrt(n**2+r**2)}class OR{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=hx(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,w=CW(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!w)return;const{point:y}=m,{timestamp:b}=cn;this.history.push({...y,timestamp:b});const{onStart:g,onMove:x}=this.handlers;p||(g&&g(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=ux(p,this.transformPagePoint),ps.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:w,onSessionEnd:y,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=hx(m.type==="pointercancel"?this.lastMoveEventInfo:ux(p,this.transformPagePoint),this.history);this.startEvent&&w&&w(m,g),y&&y(m,g)},!t_(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=Mh(t),d=ux(l,this.transformPagePoint),{point:h}=d,{timestamp:f}=cn;this.history=[{...h,timestamp:f}];const{onSessionStart:u}=n;u&&u(t,hx(d,this.history)),this.removeListeners=Rh(ku(this.contextWindow,"pointermove",this.handlePointerMove),ku(this.contextWindow,"pointerup",this.handlePointerUp),ku(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),io(this.updatePoint)}}function ux(e,t){return t?{point:t(e.point)}:e}function LS(e,t){return{x:e.x-t.x,y:e.y-t.y}}function hx({point:e},t){return{point:e,delta:LS(e,RR(t)),offset:LS(e,EW(t)),velocity:TW(t,.1)}}function EW(e){return e[0]}function RR(e){return e[e.length-1]}function TW(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=RR(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Ci(t)));)n--;if(!r)return{x:0,y:0};const a=Ei(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function PW(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?xs(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?xs(n,e,r.max):Math.min(e,n)),e}function IS(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function AW(e,{top:t,left:n,bottom:r,right:i}){return{x:IS(e.x,n,i),y:IS(e.y,t,r)}}function MS(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function OW(e,t){return{x:MS(e.x,t.x),y:MS(e.y,t.y)}}function RW(e,t){let n=.5;const r=Tn(e),i=Tn(t);return i>r?n=oh(t.min,t.max-r,e.min):r>i&&(n=oh(e.min,e.max-i,t.min)),ma(0,1,n)}function LW(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const i0=.35;function IW(e=i0){return e===!1?e=0:e===!0&&(e=i0),{x:DS(e,"left","right"),y:DS(e,"top","bottom")}}function DS(e,t,n){return{min:FS(e,t),max:FS(e,n)}}function FS(e,t){return typeof e=="number"?e:e[t]||0}const MW=new WeakMap;class DW{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ts(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Mh(u).point)},o=(u,m)=>{const{drag:p,dragPropagation:w,onDragStart:y}=this.getProps();if(p&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Hq(p),!this.openDragLock))return;this.latestPointerEvent=u,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gr(g=>{let x=this.getAxisMotionValue(g).get()||0;if(Ti.test(x)){const{projection:j}=this.visualElement;if(j&&j.layout){const N=j.layout.layoutBox[g];N&&(x=Tn(N)*(parseFloat(x)/100))}}this.originPoint[g]=x}),y&&ps.postRender(()=>y(u,m)),n0(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(u,m)=>{this.latestPointerEvent=u,this.latestPanInfo=m;const{dragPropagation:p,dragDirectionLock:w,onDirectionLock:y,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:g}=m;if(w&&this.currentDirection===null){this.currentDirection=FW(g),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",m.point,g),this.updateAxis("y",m.point,g),this.visualElement.render(),b&&b(u,m)},d=(u,m)=>{this.latestPointerEvent=u,this.latestPanInfo=m,this.stop(u,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>gr(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)==null?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new OR(t,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:AR(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ps.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Lf(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=PW(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;t&&tc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=AW(r.layoutBox,t):this.constraints=!1,this.elastic=IW(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=LW(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!tc(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=$H(r,i.root,this.visualElement.getTransformPagePoint());let o=OW(i.layout.layoutBox,a);if(n){const l=n(MH(o));this.hasMutatedConstraints=!!l,l&&(o=gR(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},h=gr(f=>{if(!Lf(f,n,this.currentDirection))return;let u=d&&d[f]||{};o&&(u={min:0,max:0});const m=i?200:1e6,p=i?40:1e7,w={type:"inertia",velocity:r?t[f]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...u};return this.startAxisValueAnimation(f,w)});return Promise.all(h).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return n0(this.visualElement,t),r.start(u_(t,r,0,n,this.visualElement,!1))}stopAnimation(){gr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gr(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){gr(n=>{const{drag:r}=this.getProps();if(!Lf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];a.set(t[n]-xs(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!tc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};gr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const d=l.get();i[o]=RW({min:d,max:d},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),gr(o=>{if(!Lf(o,t,null))return;const l=this.getAxisMotionValue(o),{min:d,max:h}=this.constraints[o];l.set(xs(d,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;MW.set(this.visualElement,this);const t=this.visualElement.current,n=ku(t,"pointerdown",d=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();tc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ps.read(r);const o=hh(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(gr(f=>{const u=this.getAxisMotionValue(f);u&&(this.originPoint[f]+=d[f].translate,u.set(u.get()+d[f].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=i0,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function Lf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function FW(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class $W extends go{constructor(t){super(t),this.removeGroupControls=Nr,this.removeListeners=Nr,this.controls=new DW(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nr}unmount(){this.removeGroupControls(),this.removeListeners()}}const $S=e=>(t,n)=>{e&&ps.postRender(()=>e(t,n))};class BW extends go{constructor(){super(...arguments),this.removePointerDownListener=Nr}onPointerDown(t){this.session=new OR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:AR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:$S(t),onStart:$S(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&ps.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=ku(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const im={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function BS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Zd={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(xt.test(e))e=parseFloat(e);else return e;const n=BS(e,t.target.x),r=BS(e,t.target.y);return`${n}% ${r}%`}},zW={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=ao.parse(e);if(i.length>5)return r;const a=ao.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,d=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=d;const h=xs(l,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),a(i)}};let fx=!1;class VW extends _.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;dH(UW),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),fx&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),im.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,fx=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==a?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||ps.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),e_.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;fx=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function LR(e){const[t,n]=sR(),r=_.useContext(Rw);return s.jsx(VW,{...e,layoutGroup:r,switchLayoutGroup:_.useContext(mR),isPresent:t,safeToRemove:n})}const UW={borderRadius:{...Zd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zd,borderTopRightRadius:Zd,borderBottomLeftRadius:Zd,borderBottomRightRadius:Zd,boxShadow:zW};function qW(e,t,n){const r=yn(e)?e:Gc(e);return r.start(u_("",r,t,n)),r.animation}const HW=(e,t)=>e.depth-t.depth;class WW{constructor(){this.children=[],this.isDirty=!1}add(t){Mw(this.children,t),this.isDirty=!0}remove(t){Dw(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(HW),this.isDirty=!1,this.children.forEach(t)}}function GW(e,t){const n=Kn.now(),r=({timestamp:i})=>{const a=i-n;a>=t&&(io(r),e(a-t))};return ps.setup(r,!0),()=>io(r)}const IR=["TopLeft","TopRight","BottomLeft","BottomRight"],KW=IR.length,zS=e=>typeof e=="string"?parseFloat(e):e,VS=e=>typeof e=="number"||xt.test(e);function ZW(e,t,n,r,i,a){i?(e.opacity=xs(0,n.opacity??1,YW(r)),e.opacityExit=xs(t.opacity??1,0,XW(r))):a&&(e.opacity=xs(t.opacity??1,n.opacity??1,r));for(let o=0;o<KW;o++){const l=`border${IR[o]}Radius`;let d=US(t,l),h=US(n,l);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||VS(d)===VS(h)?(e[l]=Math.max(xs(zS(d),zS(h),r),0),(Ti.test(h)||Ti.test(d))&&(e[l]+="%")):e[l]=h}(t.rotate||n.rotate)&&(e.rotate=xs(t.rotate||0,n.rotate||0,r))}function US(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const YW=MR(0,.5,_O),XW=MR(.5,.95,Nr);function MR(e,t,n){return r=>r<e?0:r>t?1:n(oh(e,t,r))}function qS(e,t){e.min=t.min,e.max=t.max}function pr(e,t){qS(e.x,t.x),qS(e.y,t.y)}function HS(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function WS(e,t,n,r,i){return e-=t,e=Xm(e,1/n,r),i!==void 0&&(e=Xm(e,1/i,r)),e}function JW(e,t=0,n=1,r=.5,i,a=e,o=e){if(Ti.test(t)&&(t=parseFloat(t),t=xs(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=xs(a.min,a.max,r);e===a&&(l-=t),e.min=WS(e.min,t,n,l,i),e.max=WS(e.max,t,n,l,i)}function GS(e,t,[n,r,i],a,o){JW(e,t[n],t[r],t[i],t.scale,a,o)}const QW=["x","scaleX","originX"],eG=["y","scaleY","originY"];function KS(e,t,n,r){GS(e.x,t,QW,n?n.x:void 0,r?r.x:void 0),GS(e.y,t,eG,n?n.y:void 0,r?r.y:void 0)}function ZS(e){return e.translate===0&&e.scale===1}function DR(e){return ZS(e.x)&&ZS(e.y)}function YS(e,t){return e.min===t.min&&e.max===t.max}function tG(e,t){return YS(e.x,t.x)&&YS(e.y,t.y)}function XS(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function FR(e,t){return XS(e.x,t.x)&&XS(e.y,t.y)}function JS(e){return Tn(e.x)/Tn(e.y)}function QS(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class sG{constructor(){this.members=[]}add(t){Mw(this.members,t),t.scheduleRender()}remove(t){if(Dw(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function nG(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:u,rotateY:m,skewX:p,skewY:w}=n;h&&(r=`perspective(${h}px) ${r}`),f&&(r+=`rotate(${f}deg) `),u&&(r+=`rotateX(${u}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),w&&(r+=`skewY(${w}deg) `)}const l=e.x.scale*t.x,d=e.y.scale*t.y;return(l!==1||d!==1)&&(r+=`scale(${l}, ${d})`),r||"none"}const mx=["","X","Y","Z"],rG=1e3;let iG=0;function px(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function $R(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=NR(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ps,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&$R(r)}function BR({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t==null?void 0:t()){this.id=iG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(lG),this.nodes.forEach(hG),this.nodes.forEach(fG),this.nodes.forEach(cG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new WW)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new $w),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=tR(o)&&!Xq(o),this.instance=o;const{layoutId:l,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||l)&&(this.isLayoutDirty=!0),e){let f,u=0;const m=()=>this.root.updateBlockedByResize=!1;ps.read(()=>{u=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==u&&(u=p,this.root.updateBlockedByResize=!0,f&&f(),f=GW(m,250),im.hasAnimatedSinceResize&&(im.hasAnimatedSinceResize=!1,this.nodes.forEach(sk)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:u,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||xG,{onLayoutAnimationStart:y,onLayoutAnimationComplete:b}=h.getProps(),g=!this.targetLayout||!FR(this.targetLayout,p),x=!u&&m;if(this.options.layoutRoot||this.resumeFrom||x||u&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...Jw(w,"layout"),onPlay:y,onComplete:b};(h.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(f,x)}else u||sk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),io(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$R(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const u=this.path[f];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ek);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(tk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(uG),this.nodes.forEach(aG),this.nodes.forEach(oG)):this.nodes.forEach(tk),this.clearAllSnapshots();const l=Kn.now();cn.delta=ma(0,1e3/60,l-cn.timestamp),cn.timestamp=l,cn.isProcessing=!0,nx.update.process(cn),nx.preRender.process(cn),nx.render.process(cn),cn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,e_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dG),this.sharedNodes.forEach(pG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ps.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ps.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Tn(this.snapshot.measuredBox.x)&&!Tn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ts(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!DR(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&this.instance&&(l||Po(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),yG(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:o}=this.options;if(!o)return Ts();const l=o.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(bG))){const{scroll:f}=this.root;f&&(sc(l.x,f.offset.x),sc(l.y,f.offset.y))}return l}removeElementScroll(o){var d;const l=Ts();if(pr(l,o),(d=this.scroll)!=null&&d.wasRoot)return l;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:u,options:m}=f;f!==this.root&&u&&m.layoutScroll&&(u.wasRoot&&pr(l,o),sc(l.x,u.offset.x),sc(l.y,u.offset.y))}return l}applyTransform(o,l=!1){const d=Ts();pr(d,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&nc(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Po(f.latestValues)&&nc(d,f.latestValues)}return Po(this.latestValues)&&nc(d,this.latestValues),d}removeTransform(o){const l=Ts();pr(l,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Po(h.latestValues))continue;Qy(h.latestValues)&&h.updateSnapshot();const f=Ts(),u=h.measurePageBox();pr(f,u),KS(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Po(this.latestValues)&&KS(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:u}=this.options;if(!(!this.layout||!(f||u))){if(this.resolvedRelativeTargetAt=cn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ts(),this.relativeTargetOrigin=Ts(),Eu(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),pr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ts(),this.targetWithTransforms=Ts()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pr(this.target,this.layout.layoutBox),xR(this.target,this.targetDelta)):pr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ts(),this.relativeTargetOrigin=Ts(),Eu(this.relativeTargetOrigin,this.target,p.target),pr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Qy(this.parent.latestValues)||vR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===cn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;pr(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,m=this.treeScale.y;FH(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Ts());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(HS(this.prevProjectionDelta.x,this.projectionDelta.x),HS(this.prevProjectionDelta.y,this.projectionDelta.y)),Cu(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==u||this.treeScale.y!==m||!QS(this.projectionDelta.x,this.prevProjectionDelta.x)||!QS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rc(),this.projectionDelta=rc(),this.projectionDeltaWithTransform=rc()}setAnimationOrigin(o,l=!1){const d=this.snapshot,h=d?d.latestValues:{},f={...this.latestValues},u=rc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Ts(),p=d?d.source:void 0,w=this.layout?this.layout.source:void 0,y=p!==w,b=this.getStack(),g=!b||b.members.length<=1,x=!!(y&&!g&&this.options.crossfade===!0&&!this.path.some(vG));this.animationProgress=0;let j;this.mixTargetDelta=N=>{const S=N/1e3;nk(u.x,o.x,S),nk(u.y,o.y,S),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Eu(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gG(this.relativeTarget,this.relativeTargetOrigin,m,S),j&&tG(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Ts()),pr(j,this.relativeTarget)),y&&(this.animationValues=f,ZW(f,h,this.latestValues,S,x,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,d,h;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(h=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||h.stop(),this.pendingAnimation&&(io(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ps.update(()=>{im.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Gc(0)),this.currentAnimation=qW(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),o.onUpdate&&o.onUpdate(f)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(rG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:h,latestValues:f}=o;if(!(!l||!d||!h)){if(this!==o&&this.layout&&h&&zR(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Ts();const u=Tn(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+u;const m=Tn(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+m}pr(l,d),nc(l,f),Cu(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new sG),this.sharedNodes.get(o).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(l=!0),!l)return;const h={};d.z&&px("z",o,h,this.animationValues);for(let f=0;f<mx.length;f++)px(`rotate${mx[f]}`,o,h,this.animationValues),px(`skew${mx[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=rm(l==null?void 0:l.pointerEvents)||"",o.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=rm(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Po(this.latestValues)&&(o.transform=d?d({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let u=nG(this.projectionDeltaWithTransform,this.treeScale,f);d&&(u=d(f,u)),o.transform=u;const{x:m,y:p}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?o.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in uh){if(f[w]===void 0)continue;const{correct:y,applyTo:b,isCSSVariable:g}=uh[w],x=u==="none"?f[w]:y(f[w],h);if(b){const j=b.length;for(let N=0;N<j;N++)o[b[N]]=x}else g?this.options.visualElement.renderState.vars[w]=x:o[w]=x}this.options.layoutId&&(o.pointerEvents=h===this?rm(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(ek),this.root.sharedNodes.clear()}}}function aG(e){e.updateLayout()}function oG(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:a}=e.options,o=t.source!==e.layout.source;a==="size"?gr(u=>{const m=o?t.measuredBox[u]:t.layoutBox[u],p=Tn(m);m.min=r[u].min,m.max=m.min+p}):zR(a,t.layoutBox,r)&&gr(u=>{const m=o?t.measuredBox[u]:t.layoutBox[u],p=Tn(r[u]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+p)});const l=rc();Cu(l,r,t.layoutBox);const d=rc();o?Cu(d,e.applyTransform(i,!0),t.measuredBox):Cu(d,r,t.layoutBox);const h=!DR(l);let f=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:m,layout:p}=u;if(m&&p){const w=Ts();Eu(w,t.layoutBox,m.layoutBox);const y=Ts();Eu(y,r,p.layoutBox),FR(w,y)||(f=!0),u.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=w,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function lG(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function dG(e){e.clearSnapshot()}function ek(e){e.clearMeasurements()}function tk(e){e.isLayoutDirty=!1}function uG(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function sk(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function hG(e){e.resolveTargetDelta()}function fG(e){e.calcProjection()}function mG(e){e.resetSkewAndRotation()}function pG(e){e.removeLeadSnapshot()}function nk(e,t,n){e.translate=xs(t.translate,0,n),e.scale=xs(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function rk(e,t,n,r){e.min=xs(t.min,n.min,r),e.max=xs(t.max,n.max,r)}function gG(e,t,n,r){rk(e.x,t.x,n.x,r),rk(e.y,t.y,n.y,r)}function vG(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const xG={duration:.45,ease:[.4,0,.1,1]},ik=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ak=ik("applewebkit/")&&!ik("chrome/")?Math.round:Nr;function ok(e){e.min=ak(e.min),e.max=ak(e.max)}function yG(e){ok(e.x),ok(e.y)}function zR(e,t,n){return e==="position"||e==="preserve-aspect"&&!SW(JS(t),JS(n),.2)}function bG(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const wG=BR({attachResizeListener:(e,t)=>hh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gx={current:void 0},VR=BR({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!gx.current){const e=new wG({});e.mount(window),e.setOptions({layoutScroll:!0}),gx.current=e}return gx.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),_G={pan:{Feature:BW},drag:{Feature:$W,ProjectionNode:VR,MeasureLayout:LR}};function lk(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&ps.postRender(()=>a(t,Mh(t)))}class jG extends go{mount(){const{current:t}=this.node;t&&(this.unmount=Wq(t,(n,r)=>(lk(this.node,r,"Start"),i=>lk(this.node,i,"End"))))}unmount(){}}class NG extends go{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Rh(hh(this.node.current,"focus",()=>this.onFocus()),hh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ck(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&ps.postRender(()=>a(t,Mh(t)))}class SG extends go{mount(){const{current:t}=this.node;t&&(this.unmount=Yq(t,(n,r)=>(ck(this.node,r,"Start"),(i,{success:a})=>ck(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const a0=new WeakMap,vx=new WeakMap,kG=e=>{const t=a0.get(e.target);t&&t(e)},CG=e=>{e.forEach(kG)};function EG({root:e,...t}){const n=e||document;vx.has(n)||vx.set(n,{});const r=vx.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(CG,{root:e,...t})),r[i]}function TG(e,t,n){const r=EG(t);return a0.set(e,n),r.observe(e),()=>{a0.delete(e),r.unobserve(e)}}const PG={some:0,all:1};class AG extends go{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:PG[i]},l=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:u}=this.node.getProps(),m=h?f:u;m&&m(d)};return TG(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(OG(t,n))&&this.startObserver()}unmount(){}}function OG({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const RG={inView:{Feature:AG},tap:{Feature:SG},focus:{Feature:NG},hover:{Feature:jG}},LG={layout:{ProjectionNode:VR,MeasureLayout:LR}},IG={...yW,...RG,..._G,...LG},vc=IH(IG,KH),vo=(e,t)=>e.free_delivery?{isFreeDelivery:!0,deliveryFee:0,displayText:"Free Delivery",badgeColor:"bg-green-100 text-green-800"}:e.custom_delivery_fee_enabled&&e.custom_delivery_fee!==null&&e.custom_delivery_fee!==void 0?{isFreeDelivery:!1,deliveryFee:e.custom_delivery_fee,displayText:`${e.custom_delivery_fee} delivery`,badgeColor:"bg-blue-100 text-blue-800"}:{isFreeDelivery:!1,deliveryFee:null,displayText:"Delivery at checkout",badgeColor:"bg-orange-100 text-orange-800"},hl=e=>e?e.delivery_radius!=null?Number(e.delivery_radius):e.vendor&&e.vendor.delivery_radius!=null?Number(e.vendor.delivery_radius):e.vendor_delivery_radius!=null?Number(e.vendor_delivery_radius):null:null;class MG{async getProductReviews(t){try{const n=await fetch(Vc(`/products/${t}/reviews/`));if(!n.ok)throw new Error("Failed to fetch product reviews");return await n.json()}catch(n){return console.error("Error fetching product reviews:",n),{product_id:t,product_name:"",aggregate:{average_rating:0,total_reviews:0,average_quality:0,average_value:0,average_service:0},recent_reviews:[]}}}async getVendorReviews(t){try{const n=await fetch(Vc(`/vendors/${t}/reviews/`));if(!n.ok)throw new Error("Failed to fetch vendor reviews");return await n.json()}catch(n){return console.error("Error fetching vendor reviews:",n),{vendor_id:t,vendor_name:"",aggregate:{average_rating:0,total_reviews:0,average_quality:0,average_value:0,average_service:0},recent_reviews:[]}}}}const xo=new MG,xc=async e=>{var t,n;try{const r=await Ce.getUser();if(!r||!((t=r.available_roles)!=null&&t.includes("vendor")))return e;const{response:i,data:a}=await Ve("/vendor-profiles/");if(!i.ok||!((n=a==null?void 0:a.results)!=null&&n.length))return e;const l=a.results[0].id;return e.filter(d=>d.vendor_id!==l)}catch(r){return console.error("Error filtering own products:",r),e}},DG=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3};function FG({onDataLoaded:e}={}){const t=lt();$n();const{toast:n}=ts(),{addToCartWithAuth:r}=po(),[i,a]=_.useState([]),[o,l]=_.useState(!0),[d,h]=_.useState(ht.getLocation()),[f,u]=_.useState({});_.useEffect(()=>{const g=ht.subscribe(h);if(ht.startTracking(),ht.getLocation())m();else{const j=setTimeout(()=>{ht.getLocation()||(console.log(" No location available, fetching products without location filter"),m())},3e3);return()=>{clearTimeout(j),g()}}return g},[]),_.useEffect(()=>{d&&m()},[d]);const m=async()=>{var g;try{l(!0);const x={"ngrok-skip-browser-warning":"true"},j=ht.getLocation(),N=new URLSearchParams({page_size:"50"});j&&(N.append("latitude",j.latitude.toString()),N.append("longitude",j.longitude.toString()));const S=await fetch(`${Qe}search/products/?${N}`,{headers:x});if(!S.ok)throw new Error(`HTTP ${S.status}`);const C=await S.json();console.log(" TRENDING ITEMS - API Response:",{total_results:((g=C.results)==null?void 0:g.length)||0,query_params:Object.fromEntries(N),user_location:j,full_response:C});const T=await xc(C.results||[]);console.log(" TRENDING ITEMS - After filterOwnProducts:",{count:T.length,products:T.map(P=>({id:P.id,name:P.name,vendor_name:P.vendor_name,vendor_latitude:P.vendor_latitude,vendor_longitude:P.vendor_longitude,vendor_delivery_radius:P.vendor_delivery_radius,vendor_online:P.vendor_online}))});const A=w(T);if(console.log(" TRENDING ITEMS - After processProducts:",{count:A.length,products:A.map(P=>({id:P.id,name:P.name,vendor:P.vendor,distance:P.distance,distanceValue:P.distanceValue,deliveryRadius:P.deliveryRadius,vendorOnline:P.vendorOnline,included:P.vendorOnline&&(P.distanceValue===1/0||P.distanceValue<=P.deliveryRadius)}))}),A.length===0&&j){console.log("No products found with location filter, trying without location...");const P=new URLSearchParams({page_size:"50"}),R=await fetch(`${Qe}search/products/?${P}`,{headers:x});if(R.ok){const E=await R.json(),F=await xc(E.results||[]),O=w(F);console.log("Products without location filter:",O),a(O);const M=O.map(Z=>Z.id);p(M);return}}if(A.length===0){console.log("No trending products found, showing first 6 products...");const P=new URLSearchParams({page_size:"6"}),R=await fetch(`${Qe}search/products/?${P}`,{headers:x});if(R.ok){const E=await R.json(),F=await xc(E.results||[]),O=w(F);console.log("Fallback products:",O),a(O);const M=O.map(Z=>Z.id);p(M);return}}a(A);const I=A.map(P=>P.id);p(I)}catch(x){console.error("Error fetching trending items:",x),a([])}finally{l(!1),console.log("TrendingItems fetch completed, calling onDataLoaded"),e==null||e()}},p=async g=>{try{const x=g.map(S=>xo.getProductReviews(S)),N=(await Promise.all(x)).reduce((S,C)=>{var T,A;return S[C.product_id]={rating:((T=C.aggregate)==null?void 0:T.average_rating)||0,total:((A=C.aggregate)==null?void 0:A.total_reviews)||0},S},{});u(S=>({...S,...N}))}catch(x){console.error("Failed to load product reviews:",x)}},w=g=>{const x=ht.getLocation();console.log(" TRENDING ITEMS - processProducts called with:",{total_products:g.length,user_location:x,products_sample:g.slice(0,3).map(S=>({id:S.id,name:S.name,vendor_name:S.vendor_name,vendor_latitude:S.vendor_latitude,vendor_longitude:S.vendor_longitude,vendor_delivery_radius:S.vendor_delivery_radius,vendor_online:S.vendor_online}))});const j=S=>{if(S.reviews&&Array.isArray(S.reviews)&&S.reviews.length>0){const C=S.reviews.map(T=>Number(T.rating??T.stars??T.score??0)).filter(T=>!isNaN(T));if(C.length>0){const T=C.reduce((A,I)=>A+I,0);return Math.max(0,Math.min(5,T/C.length))}}return S.average_rating!=null?Number(S.average_rating):S.rating!=null?Number(S.rating):0};let N=g.map(S=>{var R,E;const C=((R=S.images)==null?void 0:R.find(F=>F.is_primary))||((E=S.images)==null?void 0:E[0]);let T="N/A",A=1/0;x&&S.vendor_latitude&&S.vendor_longitude&&(A=DG(x.latitude,x.longitude,S.vendor_latitude,S.vendor_longitude),T=`${A.toFixed(1)} km`);const I=vo(S,S.vendor_delivery_fee),P=hl(S)??5;return{id:S.id,name:S.name,vendor:S.vendor_name||"Unknown Vendor",vendor_id:S.vendor_id,distance:T,distanceValue:A,rating:j(S),price:`Rs ${S.price}`,priceValue:parseFloat(S.price),image:(C==null?void 0:C.image_url)||"/placeholder-product.jpg",inStock:S.quantity>0,category:S.category,totalSold:S.total_sold||0,deliveryInfo:I,vendorOnline:S.vendor_online!==!1,deliveryRadius:P,free_delivery:S.free_delivery,custom_delivery_fee_enabled:S.custom_delivery_fee_enabled,custom_delivery_fee:S.custom_delivery_fee}}).filter(S=>{const C=S.vendorOnline,T=S.distanceValue===1/0||S.distanceValue<=S.deliveryRadius;return console.log(` TRENDING ITEMS - Filtering product ${S.id} (${S.name}):`,{vendorOnline:S.vendorOnline,distanceValue:S.distanceValue,deliveryRadius:S.deliveryRadius,withinRadius:T,included:C&&T,reason:C?T?"Included":`Too far (${S.distanceValue}km > ${S.deliveryRadius}km)`:"Vendor offline"}),C&&T});return console.log(" TRENDING ITEMS - After filtering:",{total_filtered:N.length,filtered_products:N.map(S=>({id:S.id,name:S.name,vendor:S.vendor,distance:S.distance,vendorOnline:S.vendorOnline,deliveryRadius:S.deliveryRadius}))}),N.sort((S,C)=>C.totalSold-S.totalSold),N.length>0&&N[0].totalSold===0&&N.sort((S,C)=>C.rating-S.rating),N.slice(0,6)},y=g=>{t(`/product/${g}`)},b=async(g,x)=>{x.stopPropagation();const j=i.find(N=>N.id===g.id);t("/checkout",{state:{directBuy:!0,product:{id:g.id,name:g.name,price:g.price.replace("Rs ",""),quantity:1,vendor_name:g.vendor,vendor_id:j==null?void 0:j.vendor_id,images:[{image_url:g.image}],free_delivery:j==null?void 0:j.free_delivery,custom_delivery_fee_enabled:j==null?void 0:j.custom_delivery_fee_enabled,custom_delivery_fee:j==null?void 0:j.custom_delivery_fee}}})};return o?s.jsxs("section",{className:"px-4 sm:px-6 md:px-8 mb-6 lg:mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-foreground tracking-tight",children:"Trending Now "}),s.jsx(se,{variant:"outline",size:"sm",style:{borderColor:"#856043",color:"#856043",backgroundColor:"transparent"},className:"rounded-full hover:bg-[#856043] hover:text-white text-sm",onClick:()=>t("/trending-items"),children:"View All"})]}),s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Cs,{className:"h-8 w-8 animate-spin"})})]}):s.jsxs("section",{className:"px-4 sm:px-6 md:px-8 mb-6 lg:mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-foreground tracking-tight",children:"Trending Now "}),s.jsx(se,{variant:"ghost",size:"sm",className:"text-sm text-gray-600 hover:text-gray-800",onClick:()=>t("/trending-items"),children:"View All"})]}),s.jsx("div",{className:"flex gap-3 sm:gap-4 overflow-x-auto custom-scrollbar pb-3 snap-x snap-mandatory",children:i.map((g,x)=>{var j;return s.jsxs(vc.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,delay:x*.08,ease:"easeOut"},whileHover:{scale:1.03,boxShadow:"0 12px 24px rgba(0,0,0,0.15)"},whileTap:{scale:.97},className:"relative min-w-[180px] sm:min-w-[150px] md:min-w-[130px] bg-gradient-to-br from-card/90 to-card rounded-xl p-3 shadow-lg border border-border/20 hover:shadow-xl hover:border-primary/40 transition-all duration-300 cursor-pointer group snap-start",onClick:()=>y(g.id),"aria-label":`View ${g.name} from ${g.vendor}`,children:[s.jsxs(zv,{children:[s.jsx(Vv,{asChild:!0,children:s.jsx("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-full p-1 shadow-md group-hover:animate-bounce",children:s.jsx(GF,{className:"h-3 w-3"})})}),s.jsx(Qf,{side:"top",className:"text-xs",children:"Hot Item!"})]}),s.jsx("div",{className:"w-full h-20 mb-2 overflow-hidden rounded-md",children:s.jsx("img",{src:g.image,alt:g.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ease-in-out",onError:N=>{N.target.src="/placeholder-product.jpg"}})}),s.jsx("h3",{className:"font-semibold text-xs mb-1 text-foreground line-clamp-1",children:g.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-1 truncate",children:g.vendor}),s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(Rs,{className:"h-3 w-3 text-yellow-400"}),s.jsx("span",{children:(((j=f[g.id])==null?void 0:j.rating)??g.rating??0).toFixed(1)})]}),s.jsxs(zv,{children:[s.jsx(Vv,{asChild:!0,children:s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{className:"text-xs",children:g.distance})]})}),s.jsx(Qf,{side:"bottom",className:"text-xs",children:"Distance from you"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-primary text-sm",children:g.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[g.totalSold||0," sold"]})]}),s.jsxs(zv,{children:[s.jsx(Vv,{asChild:!0,children:s.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[s.jsx(Cr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1 py-0.5 rounded-full ${g.deliveryInfo.isFreeDelivery?"bg-green-100 text-green-700":g.deliveryInfo.deliveryFee===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:g.deliveryInfo.isFreeDelivery?"Free":g.deliveryInfo.deliveryFee===null?"TBD":`Rs ${g.deliveryInfo.deliveryFee}`})]})}),s.jsx(Qf,{side:"bottom",className:"text-xs",children:g.deliveryInfo.isFreeDelivery?"Free Delivery":g.deliveryInfo.deliveryFee===null?"Delivery fee determined at checkout":`Delivery: Rs ${g.deliveryInfo.deliveryFee}`})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(se,{variant:"outline",size:"sm",className:"w-6 h-6 p-0 border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white",disabled:!g.inStock,onClick:async N=>{if(N.stopPropagation(),!await Ce.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:g.id,quantity:1},path:"/cart",timestamp:Date.now()})),t("/login");return}try{await r(g.id.toString(),1),n({title:"Added to Cart",description:`${g.name} added to your cart`}),t("/cart")}catch(C){console.error("Error adding to cart:",C)}},children:s.jsx(nn,{className:"h-3 w-3"})}),s.jsx(se,{variant:"default",size:"sm",className:"flex-1 h-6 text-[10px] bg-green-600 hover:bg-green-700 text-white",disabled:!g.inStock,onClick:async N=>{if(N.stopPropagation(),!await Ce.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:{id:g.id,name:g.name,price:g.price.replace("Rs ",""),quantity:1,vendor_name:g.vendor,vendor_id:g.vendor_id,images:[{image_url:g.image}],free_delivery:g.free_delivery,custom_delivery_fee_enabled:g.custom_delivery_fee_enabled,custom_delivery_fee:g.custom_delivery_fee},path:"/checkout",timestamp:Date.now()})),t("/login");return}b(g,N)},children:"Buy"})]})]})]},g.id)})})]})}const $G=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3};function BG({onDataLoaded:e}={}){const t=lt();$n();const{toast:n}=ts(),{addToCartWithAuth:r}=po(),[i,a]=_.useState([]),[o,l]=_.useState(!0),[d,h]=_.useState(ht.getLocation()),[f,u]=_.useState({});_.useEffect(()=>{const g=ht.subscribe(h);if(ht.startTracking(),ht.getLocation())m();else{const j=setTimeout(()=>{ht.getLocation()||(console.log(" No location available, fetching products without location filter"),m())},3e3);return()=>{clearTimeout(j),g()}}return g},[]),_.useEffect(()=>{d&&m()},[d]);const m=async()=>{var g;try{l(!0);const x={"ngrok-skip-browser-warning":"true"},j=ht.getLocation(),N=new URLSearchParams({page_size:"20"});j&&(N.append("latitude",j.latitude.toString()),N.append("longitude",j.longitude.toString()));const C=await(await fetch(`${Qe}search/products/?${N}`,{headers:x})).json();console.log(" FEATURED PRODUCTS - API Response:",{total_results:((g=C.results)==null?void 0:g.length)||0,query_params:Object.fromEntries(N),user_location:j,full_response:C});const T=await xc(C.results||[]);console.log(" FEATURED PRODUCTS - After filterOwnProducts:",{count:T.length,products:T.map(P=>({id:P.id,name:P.name,vendor_name:P.vendor_name,vendor_latitude:P.vendor_latitude,vendor_longitude:P.vendor_longitude,vendor_delivery_radius:P.vendor_delivery_radius,vendor_online:P.vendor_online,featured:P.featured}))});const A=p(T);console.log(" FEATURED PRODUCTS - After processProducts:",{count:A.length,products:A.map(P=>({id:P.id,name:P.name,vendor:P.vendor,distance:P.distance,distanceValue:P.distanceValue,deliveryRadius:P.deliveryRadius,vendorOnline:P.vendorOnline,featured:P.featured,included:P.vendorOnline&&(P.distanceValue===1/0||P.distanceValue<=P.deliveryRadius)}))}),a(A);const I=A.map(P=>P.id);y(I)}catch(x){console.error("Error fetching featured products:",x)}finally{l(!1),console.log("FeaturedProducts fetch completed, calling onDataLoaded"),e==null||e()}},p=g=>{const x=ht.getLocation();console.log(" FEATURED PRODUCTS - processProducts called with:",{total_products:g.length,user_location:x,products_sample:g.slice(0,3).map(C=>({id:C.id,name:C.name,vendor_name:C.vendor_name,vendor_latitude:C.vendor_latitude,vendor_longitude:C.vendor_longitude,vendor_delivery_radius:C.vendor_delivery_radius,vendor_online:C.vendor_online,featured:C.featured}))});let j=g.filter(C=>C.featured===!0);console.log(" FEATURED PRODUCTS - After featured filter:",{total_featured:j.length,featured_products:j.map(C=>({id:C.id,name:C.name,vendor_name:C.vendor_name,featured:C.featured}))});const N=C=>{if(C.reviews&&Array.isArray(C.reviews)&&C.reviews.length>0){const T=C.reviews.map(A=>Number(A.rating??A.stars??A.score??0)).filter(A=>!isNaN(A));if(T.length>0){const A=T.reduce((I,P)=>I+P,0);return Math.max(0,Math.min(5,A/T.length))}}return C.average_rating!=null?Number(C.average_rating):C.rating!=null?Number(C.rating):0};let S=j.map(C=>{var R,E;const T=((R=C.images)==null?void 0:R.find(F=>F.is_primary))||((E=C.images)==null?void 0:E[0]);let A="N/A",I=1/0;x&&C.vendor_latitude&&C.vendor_longitude&&(I=$G(x.latitude,x.longitude,C.vendor_latitude,C.vendor_longitude),A=`${I.toFixed(1)} km`);const P=vo(C,C.vendor_delivery_fee);return{id:C.id,name:C.name,vendor:C.vendor_name||"Unknown Vendor",vendor_id:C.vendor_id,distance:A,distanceValue:I,rating:N(C),price:`Rs ${C.price}`,priceValue:parseFloat(C.price),image:(T==null?void 0:T.image_url)||"/placeholder-product.jpg",inStock:C.quantity>0,category:C.category,featured:C.featured,totalSold:C.total_sold||0,deliveryInfo:P,free_delivery:C.free_delivery,custom_delivery_fee_enabled:C.custom_delivery_fee_enabled,custom_delivery_fee:C.custom_delivery_fee,vendorOnline:C.vendor_online!==!1,deliveryRadius:hl(C)??1/0}}).filter(C=>{const T=C.vendorOnline,A=C.distanceValue===1/0||C.distanceValue<=C.deliveryRadius;return console.log(` FEATURED PRODUCTS - Filtering product ${C.id} (${C.name}):`,{vendorOnline:C.vendorOnline,distanceValue:C.distanceValue,deliveryRadius:C.deliveryRadius,withinRadius:A,included:T&&A,reason:T?A?"Included":`Too far (${C.distanceValue}km > ${C.deliveryRadius}km)`:"Vendor offline"}),T&&A});return console.log(" FEATURED PRODUCTS - After filtering:",{total_filtered:S.length,filtered_products:S.map(C=>({id:C.id,name:C.name,vendor:C.vendor,distance:C.distance,vendorOnline:C.vendorOnline,deliveryRadius:C.deliveryRadius,featured:C.featured}))}),S.sort((C,T)=>T.rating-C.rating),S.slice(0,6)},w=g=>{t(`/product/${g}`)},y=async g=>{try{const x=g.map(S=>xo.getProductReviews(S)),N=(await Promise.all(x)).reduce((S,C)=>{var T,A;return S[C.product_id]={rating:((T=C.aggregate)==null?void 0:T.average_rating)||0,total:((A=C.aggregate)==null?void 0:A.total_reviews)||0},S},{});u(S=>({...S,...N}))}catch(x){console.error("Failed to load product reviews:",x)}},b=async(g,x)=>{x==null||x.stopPropagation();const j=i.find(N=>N.id===g.id);t("/checkout",{state:{directBuy:!0,product:{id:g.id,name:g.name,price:g.price.replace("Rs ",""),quantity:1,vendor_name:g.vendor,vendor_id:j==null?void 0:j.vendor_id,images:[{image_url:g.image}],free_delivery:j==null?void 0:j.free_delivery,custom_delivery_fee_enabled:j==null?void 0:j.custom_delivery_fee_enabled,custom_delivery_fee:j==null?void 0:j.custom_delivery_fee}}})};return o?s.jsxs("section",{className:"px-4 py-3 mb-8 bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h2",{className:"text-xl md:text-2xl font-semibold tracking-tight text-black",children:"Featured Products"})}),s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Cs,{className:"h-8 w-8 animate-spin"})})]}):s.jsxs("section",{className:"px-4 py-3 mb-8 bg-gradient-to-br from-gray-50 to-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold tracking-tight text-black",children:"Featured Products"}),s.jsx(se,{variant:"ghost",size:"sm",className:"text-sm text-gray-600 hover:text-gray-800",onClick:()=>t("/featured-items"),children:"View All"})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-3 md:grid md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 md:overflow-visible md:pb-0",children:i.map((g,x)=>{var j,N,S,C;return s.jsxs(vc.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:x*.1,duration:.3},whileHover:{scale:1.02,rotate:.5},className:"relative flex-shrink-0 w-36 md:w-40 rounded-lg bg-white border border-gray-200 hover:border-[#856043] shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-300 overflow-visible group cursor-pointer",onClick:()=>w(g.id),children:[s.jsx(vc.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:x*.1+.2,duration:.2},className:"absolute top-2 left-2 bg-emerald-600 text-white text-xs px-2 py-0.5 rounded-full font-semibold shadow-sm",children:"Featured"}),s.jsx("div",{className:"w-full h-32 overflow-hidden",children:s.jsx("img",{src:g.image,alt:g.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:T=>{T.target.src="/placeholder-product.jpg"}})}),s.jsxs("div",{className:"p-3 flex flex-col justify-between min-h-[11rem]",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-sm text-gray-800 mb-1 line-clamp-2 leading-tight",children:g.name}),s.jsx("p",{className:"text-xs text-gray-600 mb-1 truncate",children:g.vendor})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"space-y-1 mb-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-sm text-[#856043]",children:g.price}),s.jsxs("span",{className:"text-xs font-medium text-green-600",children:[g.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:g.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Rs,{className:"h-3.5 w-3.5 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"font-medium",children:(((j=f[g.id])==null?void 0:j.rating)??g.rating??0).toFixed(1)}),((N=f[g.id])==null?void 0:N.total)!==void 0&&((S=f[g.id])==null?void 0:S.total)>0&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(C=f[g.id])==null?void 0:C.total,")"]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[s.jsx(Cr,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] ${g.deliveryInfo.isFreeDelivery?"bg-green-100 text-green-700":g.deliveryInfo.deliveryFee===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:g.deliveryInfo.isFreeDelivery?"Free":g.deliveryInfo.deliveryFee===null?"TBD":`Rs ${g.deliveryInfo.deliveryFee}`})]})]}),s.jsx("div",{className:"flex gap-2",children:g.inStock?s.jsxs(s.Fragment,{children:[s.jsx(se,{variant:"ghost",size:"sm",className:"w-8 h-7 p-0 text-muted-foreground hover:text-[#856043] hover:bg-transparent",onClick:async T=>{if(T.stopPropagation(),!await Ce.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:g.id,quantity:1},path:"/cart",timestamp:Date.now()})),t("/login");return}try{await r(g.id.toString(),1),n({title:"Added to Cart",description:`${g.name} added to your cart`}),t("/cart")}catch(I){console.error("Error adding to cart:",I)}},children:s.jsx(nn,{className:"h-3.5 w-3.5"})}),s.jsx(se,{variant:"default",className:"flex-1 text-xs py-1.5 shadow-sm h-7 bg-green-600 hover:bg-green-700 text-white",onClick:async T=>{if(T.stopPropagation(),!await Ce.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:{id:g.id,name:g.name,price:g.price.replace("Rs ",""),quantity:1,vendor_name:g.vendor,vendor_id:g.vendor_id,images:[{image_url:g.image}],free_delivery:g.free_delivery,custom_delivery_fee_enabled:g.custom_delivery_fee_enabled,custom_delivery_fee:g.custom_delivery_fee},path:"/checkout",timestamp:Date.now()})),t("/login");return}b(g,T)},children:"Buy"})]}):s.jsx(se,{disabled:!0,className:"w-full bg-gray-200 text-gray-500 cursor-not-allowed text-xs py-1.5 shadow-sm h-7",children:"Out of Stock"})})]})]})]},g.id)})}),i.length===0&&!o&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No featured products"}),s.jsx("p",{className:"text-muted-foreground",children:"Featured products will appear here when available"})]})]})}const zG=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3};function VG({onDataLoaded:e}={}){const t=lt();$n();const{toast:n}=ts(),{addToCartWithAuth:r}=po(),[i,a]=_.useState([]),[o,l]=_.useState(!0),[d,h]=_.useState(ht.getLocation()),[f,u]=_.useState({});_.useEffect(()=>{const g=ht.subscribe(h);if(ht.startTracking(),ht.getLocation())m();else{const j=setTimeout(()=>{ht.getLocation()||(console.log(" No location available, fetching products without location filter"),m())},3e3);return()=>{clearTimeout(j),g()}}return g},[]),_.useEffect(()=>{d&&m()},[d]);const m=async()=>{var g;try{l(!0);const x={"ngrok-skip-browser-warning":"true"},j=ht.getLocation(),N=new URLSearchParams({page_size:"40"});j&&(N.append("latitude",j.latitude.toString()),N.append("longitude",j.longitude.toString()));const C=await(await fetch(`${Qe}search/products/?${N}`,{headers:x})).json();console.log(" LATEST PRODUCTS - API Response:",{total_results:((g=C.results)==null?void 0:g.length)||0,query_params:Object.fromEntries(N),user_location:j,full_response:C});const T=await xc(C.results||[]);console.log(" LATEST PRODUCTS - After filterOwnProducts:",{count:T.length,products:T.map(P=>({id:P.id,name:P.name,vendor_name:P.vendor_name,vendor_latitude:P.vendor_latitude,vendor_longitude:P.vendor_longitude,vendor_delivery_radius:P.vendor_delivery_radius,vendor_online:P.vendor_online,created_at:P.created_at}))});const A=p(T);console.log(" LATEST PRODUCTS - After processProducts:",{count:A.length,products:A.map(P=>({id:P.id,name:P.name,vendor:P.vendor,distance:P.distance,distanceValue:P.distanceValue,deliveryRadius:P.deliveryRadius,vendorOnline:P.vendorOnline,createdAt:P.createdAt,included:P.vendorOnline&&(P.distanceValue===1/0||P.distanceValue<=P.deliveryRadius)}))}),a(A);const I=A.map(P=>P.id);y(I)}catch(x){console.error("Error fetching latest products:",x)}finally{l(!1),console.log("LatestProducts fetch completed, calling onDataLoaded"),e==null||e()}},p=g=>{const x=ht.getLocation();console.log(" LATEST PRODUCTS - processProducts called with:",{total_products:g.length,user_location:x,products_sample:g.slice(0,3).map(S=>({id:S.id,name:S.name,vendor_name:S.vendor_name,vendor_latitude:S.vendor_latitude,vendor_longitude:S.vendor_longitude,vendor_delivery_radius:S.vendor_delivery_radius,vendor_online:S.vendor_online,created_at:S.created_at}))});const j=S=>{if(S.reviews&&Array.isArray(S.reviews)&&S.reviews.length>0){const C=S.reviews.map(T=>Number(T.rating??T.stars??T.score??0)).filter(T=>!isNaN(T));if(C.length>0){const T=C.reduce((A,I)=>A+I,0);return Math.max(0,Math.min(5,T/C.length))}}return S.average_rating!=null?Number(S.average_rating):S.rating!=null?Number(S.rating):0};let N=g.map(S=>{var P,R;const C=((P=S.images)==null?void 0:P.find(E=>E.is_primary))||((R=S.images)==null?void 0:R[0]);let T="N/A",A=1/0;x&&S.vendor_latitude&&S.vendor_longitude&&(A=zG(x.latitude,x.longitude,S.vendor_latitude,S.vendor_longitude),T=`${A.toFixed(1)} km`);const I=vo(S,S.vendor_delivery_fee);return{id:S.id,name:S.name,vendor:S.vendor_name||"Unknown Vendor",vendor_id:S.vendor_id,distance:T,distanceValue:A,rating:j(S),price:`Rs ${S.price}`,priceValue:parseFloat(S.price),image:(C==null?void 0:C.image_url)||"/placeholder-product.jpg",inStock:S.quantity>0,category:S.category,totalSold:S.total_sold||0,deliveryInfo:I,createdAt:S.created_at,vendorOnline:S.vendor_online!==!1,deliveryRadius:hl(S)??1/0,free_delivery:S.free_delivery,custom_delivery_fee_enabled:S.custom_delivery_fee_enabled,custom_delivery_fee:S.custom_delivery_fee}}).filter(S=>{const C=S.vendorOnline,T=S.distanceValue===1/0||S.distanceValue<=S.deliveryRadius;return console.log(` LATEST PRODUCTS - Filtering product ${S.id} (${S.name}):`,{vendorOnline:S.vendorOnline,distanceValue:S.distanceValue,deliveryRadius:S.deliveryRadius,withinRadius:T,included:C&&T,reason:C?T?"Included":`Too far (${S.distanceValue}km > ${S.deliveryRadius}km)`:"Vendor offline"}),C&&T});return console.log(" LATEST PRODUCTS - After filtering:",{total_filtered:N.length,filtered_products:N.map(S=>({id:S.id,name:S.name,vendor:S.vendor,distance:S.distance,vendorOnline:S.vendorOnline,deliveryRadius:S.deliveryRadius,createdAt:S.createdAt}))}),N.sort((S,C)=>new Date(C.createdAt).getTime()-new Date(S.createdAt).getTime()),N.slice(0,40)},w=g=>{t(`/product/${g}`)},y=async g=>{try{const x=g.map(S=>xo.getProductReviews(S)),N=(await Promise.all(x)).reduce((S,C)=>{var T,A;return S[C.product_id]={rating:((T=C.aggregate)==null?void 0:T.average_rating)||0,total:((A=C.aggregate)==null?void 0:A.total_reviews)||0},S},{});u(S=>({...S,...N}))}catch(x){console.error("Failed to load product reviews:",x)}},b=async(g,x)=>{x.stopPropagation();try{await r(g.id.toString(),1),n({title:"Added to Cart",description:`${g.name} added to your cart`})}catch(j){console.error("Error adding to cart:",j)}};return o?s.jsxs("section",{className:"px-4 py-3 mb-8",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h2",{className:"text-lg font-semibold text-black",children:"Latest Products"})}),s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Cs,{className:"h-8 w-8 animate-spin"})})]}):s.jsxs("section",{className:"px-4 py-3 mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-black",children:"Latest Products"}),s.jsx(se,{variant:"ghost",size:"sm",className:"text-sm text-gray-600 hover:text-gray-800",onClick:()=>t("/latest-products"),children:"View All"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 lg:grid-cols-8 gap-2",children:i.map(g=>{var x;return s.jsxs("div",{className:"bg-white rounded-lg p-2 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>w(g.id),children:[s.jsx("div",{className:"w-full aspect-square overflow-hidden rounded-lg mb-2",children:s.jsx("img",{src:g.image,alt:g.name,className:"w-full h-full object-cover",onError:j=>{j.target.src="/placeholder-product.jpg"}})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-xs text-gray-900 line-clamp-2 mb-1",children:g.name}),s.jsx("p",{className:"text-[10px] text-gray-600 mb-1 truncate",children:g.vendor}),s.jsxs("div",{className:"flex items-center justify-between text-[10px] mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[s.jsx(Rs,{className:"h-2 w-2 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:(((x=f[g.id])==null?void 0:x.rating)??g.rating??0).toFixed(1)})]}),s.jsxs("span",{className:"text-green-600 font-medium",children:[g.totalSold," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[s.jsx(Jt,{className:"h-2 w-2"}),s.jsx("span",{className:"font-medium",children:g.distance})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-xs text-green-600",children:g.price}),s.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[s.jsx(Cr,{className:"h-3 w-3 text-gray-400"}),s.jsx("span",{className:`text-[10px] px-1 py-0.5 rounded-full ${g.deliveryInfo.isFreeDelivery?"bg-green-100 text-green-700":g.deliveryInfo.deliveryFee===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:g.deliveryInfo.isFreeDelivery?"Free":g.deliveryInfo.deliveryFee===null?"TBD":`Rs ${g.deliveryInfo.deliveryFee}`})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(se,{size:"sm",variant:"outline",className:"w-6 h-6 p-0 border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white",disabled:!g.inStock,onClick:j=>b(g,j),children:s.jsx(nn,{className:"h-2 w-2"})}),s.jsx(se,{size:"sm",className:"flex-1 h-6 text-[10px] bg-green-600 hover:bg-green-700 text-white",disabled:!g.inStock,onClick:j=>{j.stopPropagation(),t("/checkout",{state:{directBuy:!0,product:{id:g.id,name:g.name,price:g.price.replace("Rs ",""),quantity:1,vendor_name:g.vendor,vendor_id:g.vendor_id,images:[{image_url:g.image}],free_delivery:g.free_delivery,custom_delivery_fee_enabled:g.custom_delivery_fee_enabled,custom_delivery_fee:g.custom_delivery_fee}}})},children:"Buy"})]})]})]})]},g.id)})}),i.length===0&&!o&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No products yet"}),s.jsx("p",{className:"text-gray-600",children:"Latest products will appear here"})]})]})}const UG=e=>[{icon:Xb,label:"Home",id:"home",path:"/home"},{icon:Kt,label:"Product",id:"search",path:"/search"},{icon:nn,label:"Cart",id:"cart",path:"/cart",badge:e>0?e:void 0},{icon:HF,label:"Orders",id:"orders",path:"/orders"},{icon:Li,label:"Profile",id:"profile",path:"/profile"}];function jn(){const[e,t]=_.useState("home"),n=lt(),r=Dn(),{cart:i}=$n(),a=UG((i==null?void 0:i.total_items)||0);_.useEffect(()=>{const l=r.pathname,d=a.find(h=>h.path===l);d&&t(d.id)},[r.pathname]);const o=(l,d)=>{t(l),n(d)};return s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-200/50 z-50 shadow-[0_-2px_8px_rgba(0,0,0,0.05)]",children:[s.jsx("div",{className:"flex justify-around items-center h-20 md:h-14 max-w-lg mx-auto py-2 md:py-1",children:a.map(l=>{const d=e===l.id;return s.jsxs("button",{onClick:()=>o(l.id,l.path),className:`relative flex flex-col items-center justify-center p-4 md:p-2 transition-all duration-300 ease-in-out group ${d?"text-black":"text-gray-500 hover:text-black/80"}`,children:[s.jsxs("div",{className:"relative flex items-center justify-center",children:[s.jsx(l.icon,{className:`h-6 w-6 md:h-5 md:w-5 transition-all duration-300 ease-in-out ${d?"scale-110 drop-shadow-[0_0_6px_rgba(0,0,0,0.2)]":"group-hover:scale-105 group-hover:drop-shadow-[0_0_4px_rgba(0,0,0,0.1)]"}`}),l.badge&&s.jsx("span",{className:"absolute -top-2 -right-3 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold animate-bounce",children:l.badge})]}),s.jsx("span",{className:"text-xs font-semibold tracking-wide mt-1.5 font-sans",children:l.label}),d&&s.jsx("div",{className:"absolute bottom-0 w-10 h-1 bg-black rounded-full shadow-[0_0_6px_rgba(0,0,0,0.3)] animate-scale-in"}),s.jsx("div",{className:`absolute inset-0 rounded-full bg-black/5 transition-all duration-300 ${d?"opacity-10 scale-105":"opacity-0 group-hover:opacity-10 group-hover:scale-100"}`})]},l.id)})}),s.jsx("style",{children:`
        .animate-scale-in {
          animation: scale-in 0.3s ease-in-out;
        }
        @keyframes scale-in {
          from {
            transform: scaleX(0);
          }
          to {
            transform: scaleX(1);
          }
        }
        .animate-bounce {
          animation: bounce 1.8s ease-in-out infinite;
        }
        @keyframes bounce {
          0%, 100% {
            transform: translateY(-20%);
            animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
          }
          50% {
            transform: translateY(0);
            animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
          }
        }
      `})]})}function qG(){const e=lt();return s.jsx("footer",{className:"bg-gray-900 text-white py-8 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Download Our App"}),s.jsxs("div",{className:"flex justify-center gap-4",children:[s.jsxs(se,{variant:"outline",className:"bg-black text-white border-gray-600 hover:bg-gray-800 flex items-center gap-2",onClick:()=>window.open("#","_blank"),children:[s.jsx(s1,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-xs",children:"Download on"}),s.jsx("div",{className:"text-sm font-semibold",children:"Google Play"})]})]}),s.jsxs(se,{variant:"outline",className:"bg-black text-white border-gray-600 hover:bg-gray-800 flex items-center gap-2",onClick:()=>window.open("#","_blank"),children:[s.jsx(s1,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-xs",children:"Download on"}),s.jsx("div",{className:"text-sm font-semibold",children:"App Store"})]})]})]})]}),s.jsx("div",{className:"flex justify-center mb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:"font-semibold mb-3",children:"Quick Links"}),s.jsx("ul",{className:"space-y-2 text-sm text-gray-400",children:s.jsx("li",{children:s.jsxs("button",{onClick:()=>e("/privacy-policy"),className:"hover:text-white flex items-center gap-2 justify-center cursor-pointer",children:[s.jsx(Qn,{className:"h-3 w-3"}),"Privacy Policy"]})})})]})}),s.jsx("div",{className:"border-t border-gray-800 pt-4 text-center text-sm text-gray-400",children:s.jsx("p",{children:" 2024 Ezeyway. All rights reserved."})})]})})}function h_(){const e=lt(),[t]=tg(),[n,r]=_.useState(!1),[i,a]=_.useState([]),[o,l]=_.useState(""),[d,h]=_.useState(!1),[f,u]=_.useState(!1),[m,p]=_.useState(null),[w,y]=_.useState(null),b=_.useRef(null),g=()=>{var C;(C=b.current)==null||C.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{g()},[i]),_.useEffect(()=>{x();const C=t.get("support_message");C&&(l(decodeURIComponent(C)),r(!0))},[t]),_.useEffect(()=>{n&&f&&j()},[n,f]);const x=async()=>{const C=await Ce.isAuthenticated();if(u(C),C)try{if(localStorage.getItem("token")){const{response:A,data:I}=await Ve("/profile/");A.ok&&I&&y(I.id)}}catch(T){console.error("Failed to get user profile:",T)}},j=async()=>{try{const{response:C,data:T}=await Ve("/messaging/conversations/");if(C.ok&&(T!=null&&T.results)){const A=T.results.find(I=>{var P;return(P=I.participants)==null?void 0:P.some(R=>R.username==="ezeywaya"||R.email==="ezeywaya@gmail.com")});if(A){p(A.id);const{response:I,data:P}=await Ve(`/messaging/conversations/${A.id}/messages/`);I.ok&&(P!=null&&P.results)&&a(P.results.reverse())}}}catch(C){console.error("Failed to load messages:",C)}},N=async()=>{if(o.trim()){if(!f){e("/login?redirect="+encodeURIComponent(window.location.pathname));return}h(!0);try{let C=m;if(C)await Ve("/messaging/messages/send/",{method:"POST",body:JSON.stringify({conversation_id:C,content:o.trim(),message_type:"text"})});else{const{response:A,data:I}=await Ve("/messaging/conversations/create/",{method:"POST",body:JSON.stringify({message:o.trim()})});A.ok&&I&&(C=I.conversation_id,p(C))}const T={id:"current_user",user_type:"customer"};a(A=>[...A,{id:Date.now(),content:o.trim(),sender:T,created_at:new Date().toISOString()}]),l(""),setTimeout(()=>j(),1e3)}catch(C){console.error("Failed to send message:",C)}finally{h(!1)}}},S=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),N())};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed bottom-24 right-4 z-50",children:s.jsx(se,{onClick:()=>{if(!f){e("/login?redirect="+encodeURIComponent(window.location.pathname));return}r(!n)},className:"w-10 h-10 rounded-full bg-yellow-500 hover:bg-yellow-600 shadow-lg border-2 border-black",children:n?s.jsx(tn,{className:"h-4 w-4 text-black"}):s.jsx(Xr,{className:"h-4 w-4 text-black"})})}),n&&s.jsxs("div",{className:"fixed bottom-32 right-4 w-72 h-[500px] bg-white rounded-lg shadow-xl border-2 border-black z-50 flex flex-col",children:[s.jsxs("div",{className:"bg-yellow-500 text-black p-3 rounded-t-lg border-2 border-black border-b-0",children:[s.jsx("h3",{className:"font-semibold",children:"Chat with Support"}),s.jsx("p",{className:"text-xs opacity-75",children:"EzeyWay Customer Service"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[f?i.length===0?s.jsxs("div",{className:"text-center text-gray-500 text-sm mt-8",children:[s.jsx(Xr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"Start a conversation with our support team"})]}):i.map(C=>{var A,I;const T=((A=C.sender)==null?void 0:A.id)===w||((I=C.sender)==null?void 0:I.id)==="current_user";return s.jsx("div",{className:`flex ${T?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`max-w-xs px-3 py-2 rounded-lg text-sm border ${T?"bg-yellow-500 text-black border-black":"bg-gray-100 text-gray-800 border-gray-300"}`,children:C.content||C.message})},C.id)}):s.jsxs("div",{className:"text-center text-gray-500 text-sm mt-8",children:[s.jsx(Xr,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"mb-4",children:"Sign in to chat with support"}),s.jsx(se,{size:"sm",className:"bg-yellow-500 hover:bg-yellow-600 text-black border border-black",onClick:()=>e("/login?redirect="+encodeURIComponent(window.location.pathname)),children:"Sign In"})]}),s.jsx("div",{ref:b})]}),f&&s.jsx("div",{className:"p-3 border-t",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("textarea",{value:o,onChange:C=>l(C.target.value),onKeyPress:S,placeholder:"Type your message...",className:"w-[85%] resize-none border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent h-[100px] overflow-y-auto",disabled:d,rows:5}),s.jsxs("div",{className:"flex flex-col gap-1 w-[15%]",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",className:"hidden",id:"chat-file-upload"}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>document.getElementById("chat-file-upload").click(),className:"w-full h-8 p-0 text-base",children:""}),s.jsx(se,{onClick:N,disabled:!o.trim()||d,size:"sm",className:"bg-yellow-500 hover:bg-yellow-600 text-black border border-black w-full h-8 p-0",children:s.jsx($p,{className:"h-3 w-3"})})]})]})})]})]})}const am=mo("App",{web:()=>ze(()=>import("./web-D90fiYXq.js"),[]).then(e=>new e.AppWeb)}),o0=Object.freeze(Object.defineProperty({__proto__:null,App:am},Symbol.toStringTag,{value:"Module"}));class HG{static isNative(){return gt.isNativePlatform()}static getPlatform(){return gt.getPlatform()}static async setupAppStateListener(t){this.isNative()&&am.addListener("appStateChange",({isActive:n})=>{t(n)})}static async setupBackButtonHandler(t){this.isNative()&&am.addListener("backButton",t)}static removeAllListeners(){this.isNative()&&am.removeAllListeners()}}const dk=()=>{const{setHomeDataLoaded:e}=Yz(),[t,n]=_.useState(!1),[r,i]=_.useState(!1),[a,o]=_.useState(!1);return console.log("Index component rendered"),_.useEffect(()=>{console.log("useEffect triggered - checking loading states:",{trendingLoaded:t,featuredLoaded:r,latestLoaded:a}),t&&r&&a?(console.log("All components loaded, setting home data as loaded"),e(!0)):console.log("Not all components loaded yet")},[t,r,a,e]),_.useEffect(()=>{console.log("Index page - Loading states:",{trendingLoaded:t,featuredLoaded:r,latestLoaded:a})},[t,r,a]),console.log("Index component about to return JSX"),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[s.jsx(Y9,{}),s.jsx(J9,{}),s.jsx(Q9,{}),s.jsx(rU,{}),s.jsx(FG,{onDataLoaded:()=>{console.log("TrendingItems onDataLoaded callback called"),n(!0)}}),s.jsx(BG,{onDataLoaded:()=>{console.log("FeaturedProducts onDataLoaded callback called"),i(!0)}}),s.jsx(VG,{onDataLoaded:()=>{console.log("LatestProducts onDataLoaded callback called"),o(!0)}}),!HG.isNative()&&s.jsx(qG,{}),s.jsx(h_,{}),s.jsx(jn,{})]})})},is=e=>{if(!e)return"/placeholder-product.jpg";if(e.includes("ngrok-free.app")){const r=new URL(e);return r.searchParams.set("ngrok-skip-browser-warning","true"),r.toString()}if(e.startsWith("/media/")||e.startsWith("media/")){const r=`${bn.BASE_URL}${e.startsWith("/")?e:`/${e}`}`,i=new URL(r);return i.searchParams.set("ngrok-skip-browser-warning","true"),i.toString()}if(e.startsWith("http"))return e;const t=`${bn.BASE_URL}/media/${e}`,n=new URL(t);return n.searchParams.set("ngrok-skip-browser-warning","true"),n.toString()};function WG(){var ne,J,ie,xe,Se,ue,he,Q,ye,be,ce,ge,ee,ae,oe,ke;const e=lt(),{id:t}=eg();$n();const{toast:n}=ts(),{addToCartWithAuth:r,buyNowWithAuth:i}=po(),[a,o]=_.useState(1),[l,d]=_.useState(!1),[h,f]=_.useState(!1),[u,m]=_.useState(null),[p,w]=_.useState(!0),[y,b]=_.useState(""),[g,x]=_.useState(0),[j,N]=_.useState([]),[S,C]=_.useState({}),[T,A]=_.useState([]),[I,P]=_.useState(!1);_.useEffect(()=>(t&&B(),ht.subscribe(E)),[t]);const[R,E]=_.useState(ht.getLocation());_.useEffect(()=>{u&&F()},[u]);const F=async()=>{var de;if(u)try{const pe=await fetch(`${Qe}search/products/?page_size=50`,{headers:{"ngrok-skip-browser-warning":"true"}});if(pe.ok){const me=((de=(await pe.json()).results)==null?void 0:de.filter(Ee=>Ee.id!==u.id&&Ee.category===u.category&&Ee.quantity>0))||[],we=await xc(me),Re=O(we);N(Re.slice(0,8))}}catch(pe){console.error("Error fetching related products:",pe)}},O=de=>{const pe=ht.getLocation(),Pe=10;return de.map(me=>{var qe,re;const we=((qe=me.images)==null?void 0:qe.find(je=>je.is_primary))||((re=me.images)==null?void 0:re[0]);let Re="N/A",Ee=1/0;return pe&&me.vendor_latitude&&me.vendor_longitude&&(Ee=M(pe.latitude,pe.longitude,me.vendor_latitude,me.vendor_longitude),Re=`${Ee.toFixed(1)} km`),{id:me.id,name:me.name,vendor_name:me.vendor_name,price:`Rs ${me.price}`,image:(we==null?void 0:we.image_url)||"/placeholder-product.jpg",inStock:me.quantity>0,totalSold:me.total_sold||0,distance:Re,distanceValue:Ee,vendorOnline:me.vendor_online!==!1,deliveryRadius:me.delivery_radius||Pe}}).filter(me=>me.vendorOnline&&(me.distanceValue===1/0||me.distanceValue<=me.deliveryRadius)).sort((me,we)=>me.distanceValue-we.distanceValue)},M=(de,pe,Pe,me)=>{const Re=(Pe-de)*Math.PI/180,Ee=(me-pe)*Math.PI/180,qe=Math.sin(Re/2)*Math.sin(Re/2)+Math.cos(de*Math.PI/180)*Math.cos(Pe*Math.PI/180)*Math.sin(Ee/2)*Math.sin(Ee/2);return 6371*(2*Math.atan2(Math.sqrt(qe),Math.sqrt(1-qe)))},Z=async de=>{try{const pe=await xo.getProductReviews(de);C(Pe=>{var me,we;return{...Pe,[de]:{rating:((me=pe.aggregate)==null?void 0:me.average_rating)||0,total:((we=pe.aggregate)==null?void 0:we.total_reviews)||0}}}),A(pe.recent_reviews||[])}catch(pe){console.error("Failed to load product reviews:",pe),A([])}},X=de=>{var Oe,Ye,Ie,We;const pe=((Oe=de.images)==null?void 0:Oe.find(At=>At.is_primary))||((Ye=de.images)==null?void 0:Ye[0]),Pe=pe?is(pe.image_url):"/ezy-icon.svg",me=document.getElementById("og-title"),we=document.getElementById("og-description"),Re=document.getElementById("og-image"),Ee=document.getElementById("og-url");me&&(me.content=`${de.name} - Rs ${de.price} | ezeyway`),we&&(we.content=`${de.short_description||((Ie=de.description)==null?void 0:Ie.substring(0,150))+"..."} | ${de.quantity>0?`In Stock (${de.quantity} available)`:"Out of Stock"} | Same day delivery in Kathmandu Valley`),Re&&(Re.content=Pe),Ee&&(Ee.content=window.location.href);const qe=document.getElementById("twitter-title"),re=document.getElementById("twitter-description"),je=document.getElementById("twitter-image");qe&&(qe.content=`${de.name} - Rs ${de.price} | ezeyway`),re&&(re.content=`${de.short_description||((We=de.description)==null?void 0:We.substring(0,150))+"..."} | ${de.quantity>0?`In Stock (${de.quantity} available)`:"Out of Stock"}`),je&&(je.content=Pe),document.title=`${de.name} - Rs ${de.price} | ezeyway`},z=de=>{e(`/product/${de}`)},D=async(de,pe)=>{pe.stopPropagation();try{await r(de.toString(),1)}catch(Pe){console.error("Error adding to cart:",Pe)}},B=async()=>{var de,pe;try{w(!0);const Pe=await fetch(`${Qe}search/products/?page_size=1000`,{headers:{"ngrok-skip-browser-warning":"true"}});if(!Pe.ok)throw new Error("Failed to fetch products");const we=(de=(await Pe.json()).results)==null?void 0:de.find(Ee=>Ee.id===parseInt(t));if(!we)throw new Error("Product not found");m(we),X(we),Z(we.id);const Re=await Ce.getToken();if(Re)try{const Ee=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${Re}`,"ngrok-skip-browser-warning":"true"}});if(Ee.ok){const re=(pe=(await Ee.json()).results)==null?void 0:pe.some(je=>je.product.id===we.id);d(re||!1)}}catch(Ee){console.log("Could not fetch favorites:",Ee)}}catch(Pe){console.error("Error fetching product:",Pe),b("Failed to load product details")}finally{w(!1)}},V=de=>{o(Math.max(1,a+de))},H=async()=>{if(u){f(!0);try{await r(u.id.toString(),a),n({title:"Added to Cart",description:`${u.name} added to your cart`})}catch(de){console.error("Error adding to cart:",de),n({title:"Error",description:"Failed to add product to cart",variant:"destructive"})}finally{f(!1)}}},q=async()=>{if(!u)return;console.log("ProductDetail - Original product data:",u);const de={id:u.id,name:u.name,price:u.price,quantity:a,vendor_name:u.vendor_name,vendor_id:u.vendor_id,images:u.images,free_delivery:u.free_delivery,custom_delivery_fee_enabled:u.custom_delivery_fee_enabled,custom_delivery_fee:u.custom_delivery_fee,dynamic_fields:u.dynamic_fields||{}};console.log("ProductDetail - Prepared product data for buy now:",de),await i(de)},W=async()=>{if(!u)return;const de=await Ce.getToken();if(!de){localStorage.setItem("pendingAction",JSON.stringify({type:"toggleFavorite",data:{productId:u.id},path:"/wishlist",timestamp:Date.now()})),e("/login");return}try{const pe=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${de}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:u.id})});if(!pe.ok)throw new Error("Failed to toggle favorite");const Pe=await pe.json();d(Pe.is_favorite),n({title:Pe.is_favorite?"Added to Favorites":"Removed from Favorites",description:Pe.message}),Pe.is_favorite&&e("/wishlist")}catch(pe){console.error("Error toggling favorite:",pe),n({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},Y=async()=>{var me,we,Re;if(!u)return;const de=((me=u.images)==null?void 0:me.find(Ee=>Ee.is_primary))||((we=u.images)==null?void 0:we[0]);de&&is(de.image_url);const pe=`${u.name}

Price: Rs ${u.price}
${u.quantity>0?` In Stock (${u.quantity} available)`:" Out of Stock"}

${u.short_description||((Re=u.description)==null?void 0:Re.substring(0,150))+"..."}

Shop now at ezeyway - Same day delivery in Kathmandu Valley!`,Pe={title:`${u.name} - Rs ${u.price} | ezeyway`,text:pe,url:window.location.href};try{if(navigator.share)await navigator.share(Pe);else{const Ee=`${pe}

${window.location.href}`;await navigator.clipboard.writeText(Ee),n({title:"Link Copied",description:"Product details copied to clipboard for sharing"})}}catch(Ee){console.error("Error sharing:",Ee);try{await navigator.clipboard.writeText(window.location.href),n({title:"Link Copied",description:"Product link copied to clipboard"})}catch{n({title:"Error",description:"Failed to share product",variant:"destructive"})}}};if(p)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Cs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading product details..."})]})});if(y||!u)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:y||"Product not found"}),s.jsx(se,{onClick:()=>e(-1),children:"Go Back"})]})});const U=((ne=u.images)==null?void 0:ne.find(de=>de.is_primary))||((J=u.images)==null?void 0:J[0]),G=((ie=u.images)==null?void 0:ie[g])||U;return s.jsxs(s.Fragment,{children:[s.jsxs("title",{children:[u.name," - Rs ",u.price," | ezeyway Kathmandu Valley"]}),s.jsx("meta",{name:"description",content:`${u.name} - Rs ${u.price}. ${u.short_description||((xe=u.description)==null?void 0:xe.substring(0,150))+"..."} ${u.quantity>0?`In Stock (${u.quantity} available)`:"Out of Stock"}. Same day delivery in Kathmandu Valley. Shop at ${u.vendor_name}.`}),s.jsx("meta",{name:"keywords",content:`${u.name}, ${u.category}, ${u.vendor_name}, Kathmandu delivery, same day delivery Nepal, ${((Se=u.tags)==null?void 0:Se.join(", "))||""}, buy ${u.name} online, ${u.name} price Nepal, ${u.name} Kathmandu`}),s.jsx("link",{rel:"canonical",href:`https://ezeyway.com/product/${u.id}`}),s.jsx("meta",{property:"og:title",content:`${u.name} - Rs ${u.price} | ezeyway`}),s.jsx("meta",{property:"og:description",content:`${u.short_description||((ue=u.description)==null?void 0:ue.substring(0,150))+"..."}. ${u.quantity>0?`In Stock (${u.quantity} available)`:"Out of Stock"}. Same day delivery in Kathmandu Valley.`}),s.jsx("meta",{property:"og:image",content:U?is(U.image_url):"https://ezeyway.com/ezy-icon.svg"}),s.jsx("meta",{property:"og:url",content:`https://ezeyway.com/product/${u.id}`}),s.jsx("meta",{property:"og:type",content:"product"}),s.jsx("meta",{property:"og:site_name",content:"ezeyway"}),s.jsx("meta",{property:"product:price:amount",content:u.price}),s.jsx("meta",{property:"product:price:currency",content:"NPR"}),s.jsx("meta",{property:"product:availability",content:u.quantity>0?"in stock":"out of stock"}),s.jsx("meta",{property:"product:category",content:u.category}),s.jsx("meta",{property:"product:brand",content:u.vendor_name}),s.jsx("meta",{name:"twitter:title",content:`${u.name} - Rs ${u.price} | ezeyway`}),s.jsx("meta",{name:"twitter:description",content:`${u.short_description||((he=u.description)==null?void 0:he.substring(0,150))+"..."}. Same day delivery in Kathmandu Valley.`}),s.jsx("meta",{name:"twitter:image",content:U?is(U.image_url):"https://ezeyway.com/ezy-icon.svg"}),s.jsx("meta",{name:"robots",content:"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"}),s.jsx("meta",{name:"geo.region",content:"NP"}),s.jsx("meta",{name:"geo.placename",content:"Kathmandu Valley"}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Product",name:u.name,description:u.short_description||u.description,image:((Q=u.images)==null?void 0:Q.map(de=>is(de.image_url)))||[],sku:u.id.toString(),brand:{"@type":"Brand",name:u.vendor_name},category:u.category,offers:{"@type":"Offer",price:u.price,priceCurrency:"NPR",availability:u.quantity>0?"https://schema.org/InStock":"https://schema.org/OutOfStock",seller:{"@type":"Organization",name:u.vendor_name},priceValidUntil:new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0]},aggregateRating:((ye=S[u.id])==null?void 0:ye.total)>0?{"@type":"AggregateRating",ratingValue:((be=S[u.id])==null?void 0:be.rating)||0,reviewCount:((ce=S[u.id])==null?void 0:ce.total)||0,bestRating:5,worstRating:1}:void 0,additionalProperty:u.dynamic_fields?Object.entries(u.dynamic_fields).map(([de,pe])=>({"@type":"PropertyValue",name:de,value:Array.isArray(pe)?pe.join(", "):String(pe)})):[],areaServed:{"@type":"GeoCircle",geoMidpoint:{"@type":"GeoCoordinates",latitude:"27.7172",longitude:"85.3240"},geoRadius:"50000"}})}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://ezeyway.com"},{"@type":"ListItem",position:2,name:u.category,item:`https://ezeyway.com/category/${u.category.toLowerCase()}`},{"@type":"ListItem",position:3,name:u.name,item:`https://ezeyway.com/product/${u.id}`}]})}),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-md",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full hover:bg-gray-100",children:s.jsx(Ut,{className:"h-5 w-5 text-gray-800"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{variant:"ghost",size:"icon",onClick:W,className:"rounded-full hover:bg-gray-100",children:s.jsx(cr,{className:`h-5 w-5 ${l?"fill-red-500 text-red-500":"text-gray-800"}`})}),s.jsx(se,{variant:"ghost",size:"icon",onClick:Y,className:"rounded-full hover:bg-gray-100",children:s.jsx(XF,{className:"h-5 w-5 text-gray-800"})})]})]})}),s.jsxs("div",{className:"relative bg-white p-4",children:[s.jsxs("div",{className:"md:hidden",children:[s.jsx("div",{className:"aspect-square max-w-md mx-auto mb-4 border-t-2 border-b-2 border-gray-100",children:s.jsx("img",{src:is(G==null?void 0:G.image_url),alt:u.name,className:"w-full h-full object-cover",onError:de=>{de.target.src="/placeholder-product.jpg"}})}),u.images&&u.images.length>1&&s.jsx("div",{className:"border-t border-b border-gray-200 py-3",children:s.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-md mx-auto",children:u.images.slice(0,4).map((de,pe)=>s.jsx("button",{onClick:()=>x(pe),className:`aspect-square overflow-hidden border-2 transition-all duration-200 ${g===pe?"border-blue-500 shadow-md scale-105":"border-gray-300 hover:border-gray-400"}`,children:s.jsx("img",{src:is(de.image_url),alt:`${u.name} ${pe+1}`,className:"w-full h-full object-cover",onError:Pe=>{Pe.target.src="/placeholder-product.jpg"}})},de.id))})})]}),s.jsxs("div",{className:"hidden md:flex max-w-4xl mx-auto gap-6",children:[u.images&&u.images.length>1&&s.jsx("div",{className:"flex flex-col gap-3 w-20",children:u.images.slice(0,6).map((de,pe)=>s.jsx("button",{onClick:()=>x(pe),className:`aspect-square overflow-hidden border-2 transition-all duration-200 ${g===pe?"border-blue-500 shadow-md":"border-gray-300 hover:border-gray-400"}`,children:s.jsx("img",{src:is(de.image_url),alt:`${u.name} ${pe+1}`,className:"w-full h-full object-cover",onError:Pe=>{Pe.target.src="/placeholder-product.jpg"}})},de.id))}),s.jsx("div",{className:"flex-1 aspect-square max-w-lg",children:s.jsx("img",{src:is(G==null?void 0:G.image_url),alt:u.name,className:"w-full h-full object-cover border border-gray-200",onError:de=>{de.target.src="/placeholder-product.jpg"}})})]})]}),s.jsx("div",{className:"bg-white px-4 py-6 space-y-4 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4",children:u.name}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsxs("span",{className:"text-3xl md:text-4xl font-bold text-green-600",children:["Rs ",u.price]})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rs,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:(((ge=S[u.id])==null?void 0:ge.rating)??0).toFixed(1)}),((ee=S[u.id])==null?void 0:ee.total)!==void 0&&((ae=S[u.id])==null?void 0:ae.total)>0&&s.jsxs("span",{className:"text-sm text-gray-600 cursor-pointer hover:text-blue-600",onClick:()=>P(!0),children:["(",(oe=S[u.id])==null?void 0:oe.total," review",((ke=S[u.id])==null?void 0:ke.total)!==1?"s":"",")"]})]})})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(Ze,{variant:"secondary",className:"bg-blue-100 text-blue-800 capitalize text-sm px-3 py-1",children:u.category}),u.quantity>0?s.jsxs(Ze,{variant:"secondary",className:"bg-green-100 text-green-800 text-sm px-3 py-1",children:["In Stock (",u.quantity," available)"]}):s.jsx(Ze,{variant:"destructive",className:"text-sm px-3 py-1",children:"Out of Stock"}),(()=>{const de=vo(u,u.vendor_delivery_fee);return s.jsxs(Ze,{variant:"secondary",className:`flex items-center gap-1 text-sm px-3 py-1 ${de.isFreeDelivery?"bg-green-100 text-green-800":de.deliveryFee===null?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:[s.jsx(Cr,{className:"h-4 w-4"}),de.displayText]})})(),s.jsxs(Ze,{variant:"secondary",className:"bg-gray-100 text-gray-800 text-sm px-3 py-1",children:[u.total_sold||0," sold"]})]})]})}),s.jsx("div",{className:"bg-white px-4 py-6 space-y-4 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-3",children:"Product Description"}),u.short_description&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Quick Summary"}),s.jsx("p",{className:"text-blue-800 text-sm leading-relaxed",children:u.short_description})]}),s.jsx("div",{className:"text-gray-700 leading-relaxed prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:u.description}})]})}),u.dynamic_fields&&Object.keys(u.dynamic_fields).length>0&&s.jsx("div",{className:"bg-white px-4 py-6 space-y-3 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-3",children:"Product Details"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(u.dynamic_fields).map(([de,pe])=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide mb-1",children:de.replace("_"," ")}),s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Array.isArray(pe)?pe.join(", "):typeof pe=="boolean"?pe?"Yes":"No":String(pe)})]},de))})]})}),u.tags&&u.tags.length>0&&s.jsx("div",{className:"bg-white px-4 py-6 space-y-3 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-3",children:"Product Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((de,pe)=>s.jsxs(Ze,{variant:"outline",className:"text-sm border-gray-300 text-gray-700 px-3 py-1 hover:bg-gray-50",children:["#",de]},pe))})]})}),s.jsx("div",{className:"mx-4 my-4 bg-white shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e(`/vendor/${u.vendor_id}`),children:s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center text-3xl rounded-lg",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:u.vendor_name}),s.jsx(Qn,{className:"h-5 w-5 text-green-600"}),s.jsx(Ze,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs",children:"Active"})]}),s.jsx("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("span",{children:["Category: ",u.category]})})})]})]})})}),j.length>0&&s.jsx("div",{className:"bg-white px-4 py-6 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("h3",{className:"font-semibold text-lg text-gray-900 mb-4",children:["Similar Products in ",u.category]}),s.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:j.map(de=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>z(de.id),children:[s.jsx("div",{className:"aspect-square overflow-hidden rounded-t-lg",children:s.jsx("img",{src:is(de.image),alt:de.name,className:"w-full h-full object-cover",onError:pe=>{pe.currentTarget.src="/placeholder-product.jpg"}})}),s.jsxs("div",{className:"p-2",children:[s.jsx("h4",{className:"font-medium text-xs text-gray-900 line-clamp-2 mb-1",children:de.name}),s.jsx("p",{className:"text-[10px] text-gray-600 mb-1 truncate",children:de.vendor_name}),s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-bold text-green-600 text-xs",children:de.price}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[de.totalSold," sold"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-[10px] text-blue-600 flex items-center gap-1",children:[s.jsx(Jt,{className:"h-2 w-2"}),de.distance]}),s.jsxs(se,{size:"sm",variant:"outline",className:"h-5 text-[10px] px-1",disabled:!de.inStock,onClick:pe=>D(de.id,pe),children:[s.jsx(nn,{className:"h-2 w-2 mr-1"}),"Add"]})]})]})]},de.id))})]})}),s.jsx("div",{className:"bg-white px-4 py-6 shadow-sm",children:s.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:"Select Quantity"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(se,{variant:"outline",size:"icon",onClick:()=>V(-1),className:"h-10 w-10 rounded-full border-2",children:s.jsx(wT,{className:"h-5 w-5"})}),s.jsx("span",{className:"font-bold text-xl w-12 text-center bg-gray-50 py-2 rounded-lg",children:a}),s.jsx(se,{variant:"outline",size:"icon",onClick:()=>V(1),className:"h-10 w-10 rounded-full border-2",children:s.jsx(bs,{className:"h-5 w-5"})})]})]})}),I&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Product Reviews"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>P(!1),children:""})]}),s.jsx("div",{className:"space-y-4",children:T.length>0?T.map((de,pe)=>s.jsxs("div",{className:"border-b border-gray-200 pb-4 last:border-b-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((Pe,me)=>s.jsx(Rs,{className:`h-4 w-4 ${me<(de.rating||de.stars||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},me))}),s.jsxs("span",{className:"text-sm font-medium",children:[de.rating||de.stars||0,"/5"]})]}),s.jsx("p",{className:"text-gray-700 text-sm",children:de.comment||de.review||"No comment"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["By ",de.customer_name||de.user_name||"Anonymous","  ",new Date(de.created_at).toLocaleDateString()]})]},pe)):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No reviews yet for this product."})})})]})})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-3 max-w-md mx-auto",children:[s.jsx(se,{variant:"outline",className:"flex-1 h-12 rounded-lg text-gray-800 font-semibold",onClick:H,disabled:h||u.quantity===0,children:h?"Adding...":"Add to Cart"}),s.jsx(se,{className:"flex-1 h-12 rounded-lg bg-green-600 hover:bg-green-700 text-white font-semibold",onClick:q,disabled:h||u.quantity===0,children:h?"Processing...":"Buy Now"})]})})]})]})}const De=_.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:at("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));De.displayName="Card";const kt=_.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:at("flex flex-col space-y-1.5 p-6",e),...t}));kt.displayName="CardHeader";const Et=_.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:at("text-2xl font-semibold leading-none tracking-tight",e),...t}));Et.displayName="CardTitle";const GG=_.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:at("text-sm text-muted-foreground",e),...t}));GG.displayName="CardDescription";const $e=_.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:at("p-6 pt-0",e),...t}));$e.displayName="CardContent";const KG=_.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:at("flex items-center p-6 pt-0",e),...t}));KG.displayName="CardFooter";var mg="Tabs",[ZG,iae]=_n(mg,[fd]),UR=fd(),[YG,f_]=ZG(mg),qR=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:d="automatic",...h}=e,f=hd(l),[u,m]=ei({prop:r,onChange:i,defaultProp:a??"",caller:mg});return s.jsx(YG,{scope:n,baseId:Jr(),value:u,onValueChange:m,orientation:o,dir:f,activationMode:d,children:s.jsx(ut.div,{dir:f,"data-orientation":o,...h,ref:t})})});qR.displayName=mg;var HR="TabsList",WR=_.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,a=f_(HR,n),o=UR(n);return s.jsx(_w,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(ut.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});WR.displayName=HR;var GR="TabsTrigger",KR=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=e,o=f_(GR,n),l=UR(n),d=XR(o.baseId,r),h=JR(o.baseId,r),f=r===o.value;return s.jsx(jw,{asChild:!0,...l,focusable:!i,active:f,children:s.jsx(ut.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...a,ref:t,onMouseDown:Ke(e.onMouseDown,u=>{!i&&u.button===0&&u.ctrlKey===!1?o.onValueChange(r):u.preventDefault()}),onKeyDown:Ke(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(r)}),onFocus:Ke(e.onFocus,()=>{const u=o.activationMode!=="manual";!f&&!i&&u&&o.onValueChange(r)})})})});KR.displayName=GR;var ZR="TabsContent",YR=_.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=e,l=f_(ZR,n),d=XR(l.baseId,r),h=JR(l.baseId,r),f=r===l.value,u=_.useRef(f);return _.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(hn,{present:i||f,children:({present:m})=>s.jsx(ut.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!m,id:h,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:m&&a})})});YR.displayName=ZR;function XR(e,t){return`${e}-trigger-${t}`}function JR(e,t){return`${e}-content-${t}`}var XG=qR,QR=WR,eL=KR,tL=YR;const Fi=XG,ii=_.forwardRef(({className:e,...t},n)=>s.jsx(QR,{ref:n,className:at("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ii.displayName=QR.displayName;const Mt=_.forwardRef(({className:e,...t},n)=>s.jsx(eL,{ref:n,className:at("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Mt.displayName=eL.displayName;const bt=_.forwardRef(({className:e,...t},n)=>s.jsx(tL,{ref:n,className:at("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));bt.displayName=tL.displayName;const JG=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3};function QG(){var N,S;const e=lt(),{vendorId:t}=eg(),[n,r]=_.useState(!1),[i,a]=_.useState(null),[o,l]=_.useState([]),[d,h]=_.useState(!0),[f,u]=_.useState(null),[m,p]=_.useState(ht.getLocation()),[w,y]=_.useState("N/A"),{toast:b}=ts(),{addToCart:g}=$n();_.useEffect(()=>{const C=ht.subscribe(p);return ht.startTracking(),C},[]),_.useEffect(()=>{t&&x()},[t]);const x=async()=>{var C;try{h(!0),u(null);let T=await fetch(`${Qe}vendors/${t}/`,{headers:{"ngrok-skip-browser-warning":"true"}});if(!T.ok&&(T=await fetch(`${Qe}vendor-profiles/${t}/`,{headers:{"ngrok-skip-browser-warning":"true"}}),T.status===401)){const P=await Ce.getToken();P&&(T=await fetch(`${Qe}vendor-profiles/${t}/`,{headers:{Authorization:`Token ${P}`,"ngrok-skip-browser-warning":"true"}}))}if(!T.ok)throw T.status===404?new Error("Vendor not found"):T.status===500?new Error("Server error - vendor profile unavailable"):new Error("Failed to fetch vendor profile");const A=await T.json();if(!A)throw new Error("No vendor data received");a(A);const I=ht.getLocation();if(I&&A.latitude&&A.longitude){const P=JG(I.latitude,I.longitude,A.latitude,A.longitude);y(`${P.toFixed(1)} km`)}try{const P=await fetch(`${Qe}search/products/?search=${encodeURIComponent(A.business_name)}`,{headers:{"ngrok-skip-browser-warning":"true"}});if(P.ok){const E=((C=(await P.json()).results)==null?void 0:C.filter(F=>F.vendor_name===A.business_name))||[];l(E)}}catch(P){console.error("Error fetching products:",P),l([])}}catch(T){console.error("Error fetching vendor profile:",T),u(T.message),b({title:"Error",description:T.message||"Failed to load vendor profile",variant:"destructive"})}finally{h(!1)}},j=C=>{const T=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],A=[];for(const I of T){const P=`${I}_open`,R=`${I}_close`,E=`${I}_closed`;!C[E]&&C[P]&&C[R]&&A.push(`${I.charAt(0).toUpperCase()+I.slice(1)}: ${C[P]} - ${C[R]}`)}return A.length>0?A.join(", "):"Hours not specified"};return d?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Cs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading vendor profile..."})]})}):f||!i?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold",children:"Vendor Not Found"}),s.jsx("div",{className:"w-10"})]})}),s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsxs("div",{className:"text-center",children:[s.jsx(xn,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Vendor Not Found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"The vendor you're looking for doesn't exist or is not available."}),s.jsx(se,{onClick:()=>e("/search"),children:"Browse Vendors"})]})})]}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold truncate",children:i.business_name}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>r(!n),className:"p-2",children:s.jsx(cr,{className:`h-5 w-5 ${n?"fill-red-500 text-red-500":""}`})})]})}),s.jsx("div",{className:"p-4 bg-gradient-subtle",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:((N=i.shop_images)==null?void 0:N.length)>0?s.jsx("img",{src:is(i.shop_images[0].image_url),alt:i.business_name,className:"w-full h-full object-cover",onError:C=>{C.target.src="/placeholder-vendor.jpg"}}):(S=i.user_info)!=null&&S.profile_picture?s.jsx("img",{src:is(i.user_info.profile_picture),alt:i.business_name,className:"w-full h-full object-cover",onError:C=>{C.target.src="/placeholder-vendor.jpg"}}):s.jsx(xn,{className:"h-8 w-8 text-gray-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h2",{className:"text-lg font-bold",children:i.business_name}),i.is_approved&&s.jsx(Qn,{className:"h-5 w-5 text-green-500"}),s.jsx(Ze,{variant:i.is_active?"default":"destructive",className:"text-xs",children:i.is_active?"Open":"Closed"})]}),s.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Jt,{className:"h-4 w-4"}),s.jsx("span",{children:w})]})}),s.jsx("div",{className:"flex flex-wrap gap-2",children:i.categories&&i.categories.map((C,T)=>s.jsx(Ze,{variant:"secondary",className:"text-xs",children:C},T))})]})]})}),s.jsx("div",{className:"px-4 py-3 bg-card border-b border-border/50",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx(Yr,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery"}),s.jsx("p",{className:"text-sm font-medium",children:i.estimated_delivery_time||"30-45 mins"})]}),s.jsxs("div",{children:[s.jsx(xn,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Min Order"}),s.jsxs("p",{className:"text-sm font-medium",children:["",i.min_order_amount||"0"]})]}),s.jsxs("div",{children:[s.jsx(Jt,{className:"h-5 w-5 mx-auto mb-1 text-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Type"}),s.jsx("p",{className:"text-sm font-medium capitalize",children:i.business_type})]})]})}),s.jsxs("div",{className:"px-4 py-3 flex gap-3",children:[s.jsxs(se,{variant:"brand",className:"flex-1 h-10",onClick:()=>e(`/messages?vendor=${i.user}`),children:[s.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Message"]}),s.jsxs(se,{variant:"outline",className:"flex-1 h-10",onClick:()=>{if(i.latitude&&i.longitude&&m){const C=`https://www.google.com/maps/dir/${m.latitude},${m.longitude}/${i.latitude},${i.longitude}`;window.open(C,"_blank")}else if(i.latitude&&i.longitude){const C=`https://www.google.com/maps/place/${i.latitude},${i.longitude}`;window.open(C,"_blank")}},children:[s.jsx(Jt,{className:"h-4 w-4 mr-2"}),"View in Map"]})]}),s.jsx("div",{className:"flex-1",children:s.jsxs(Fi,{defaultValue:"products",className:"w-full",children:[s.jsxs(ii,{className:"grid w-full grid-cols-3 mx-4",children:[s.jsx(Mt,{value:"products",children:"Products"}),s.jsx(Mt,{value:"about",children:"About"}),s.jsx(Mt,{value:"gallery",children:"Gallery"})]}),s.jsx(bt,{value:"products",className:"p-4 space-y-3",children:o.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.map(C=>{var A,I;const T=((A=C.images)==null?void 0:A.find(P=>P.is_primary))||((I=C.images)==null?void 0:I[0]);return s.jsx(De,{className:"p-3 cursor-pointer hover:shadow-md transition-smooth",onClick:()=>e(`/product/${C.id}`),children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"aspect-square mb-2 bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:is(T==null?void 0:T.image_url),alt:C.name,className:"w-full h-full object-cover",onError:P=>{P.target.src="/placeholder-product.jpg"}})}),s.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:C.name}),s.jsxs("p",{className:"font-semibold text-primary text-sm mb-2",children:["",C.price]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(se,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",disabled:C.quantity===0,onClick:P=>{P.stopPropagation(),g(C.id,1)},children:s.jsx(nn,{className:"h-3 w-3"})}),s.jsxs(se,{size:"sm",className:"flex-1 h-7 text-xs bg-green-600 hover:bg-green-700",disabled:C.quantity===0,onClick:P=>{P.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:C.id,name:C.name,price:C.price,quantity:1,vendor_name:C.vendor_name,images:C.images}}})},children:[s.jsx(bs,{className:"h-3 w-3"}),"Buy"]})]})]})},C.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(xn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold mb-2",children:"No Products Available"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"This vendor hasn't added any products yet."})]})}),s.jsxs(bt,{value:"about",className:"p-4 space-y-4",children:[i.description&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),s.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:i.description})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Business Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xn,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Owner:"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:i.owner_name})]}),i.business_email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Email:"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:i.business_email})]}),i.business_phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium",children:"Phone:"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:i.business_phone})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Location"}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Jt,{className:"h-4 w-4 text-primary mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:i.business_address}),i.location_address&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i.location_address}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i.city,", ",i.state," - ",i.pincode]})]})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Operating Hours"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:j(i)})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Services"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.home_delivery&&s.jsx(Ze,{variant:"secondary",children:"Home Delivery"}),i.pickup_service&&s.jsx(Ze,{variant:"secondary",children:"Pickup Service"}),i.online_ordering&&s.jsx(Ze,{variant:"secondary",children:"Online Ordering"}),i.bulk_orders&&s.jsx(Ze,{variant:"secondary",children:"Bulk Orders"}),i.subscription_service&&s.jsx(Ze,{variant:"secondary",children:"Subscription"}),i.loyalty_program&&s.jsx(Ze,{variant:"secondary",children:"Loyalty Program"})]})]}),i.established_year&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Established"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i.established_year})]}),i.employee_count&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Team Size"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.employee_count," employees"]})]}),i.website&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Website"}),s.jsx("a",{href:i.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:i.website})]}),(i.facebook||i.instagram||i.twitter)&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Social Media"}),s.jsxs("div",{className:"flex gap-3",children:[i.facebook&&s.jsx("a",{href:i.facebook,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Facebook"}),i.instagram&&s.jsx("a",{href:i.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Instagram"}),i.twitter&&s.jsx("a",{href:i.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Twitter"})]})]})]}),s.jsx(bt,{value:"gallery",className:"p-4",children:i.shop_images&&i.shop_images.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Shop Gallery"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.shop_images.map((C,T)=>s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:s.jsx("img",{src:is(C.image_url),alt:`${i.business_name} shop image ${T+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300 cursor-pointer",onError:A=>{A.target.src="/placeholder-vendor.jpg"}})},C.id||T))})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(xn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"No gallery images available"})]})})]})})]})}function eK(){const e=lt();return _.useEffect(()=>{const t=setTimeout(()=>{e("/home")},2e3);return()=>clearTimeout(t)},[e]),s.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:ua,alt:"ezeyway",className:"w-20 h-20 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Page Not Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Redirecting to home..."}),s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})})}const tK=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3},uk=()=>{const[e,t]=_.useState([]),[n,r]=_.useState(!0),[i,a]=_.useState({}),{addToCart:o}=$n(),l=lt();_.useEffect(()=>{h()},[]);const d=async f=>{try{const u=f.map(w=>xo.getProductReviews(w)),p=(await Promise.all(u)).reduce((w,y)=>{var b,g;return w[y.product_id]={rating:((b=y.aggregate)==null?void 0:b.average_rating)||0,total:((g=y.aggregate)==null?void 0:g.total_reviews)||0},w},{});a(w=>({...w,...p}))}catch(u){console.error("Failed to load product reviews:",u)}},h=async()=>{try{const f={"ngrok-skip-browser-warning":"true"},u=ht.getLocation(),m=new URLSearchParams({page_size:"6"});u&&(m.append("latitude",u.latitude.toString()),m.append("longitude",u.longitude.toString()));const b=((await(await fetch(`${Qe}search/products/?${m}`,{headers:f})).json()).results||[]).map(x=>{var A,I;const j=((A=x.images)==null?void 0:A.find(P=>P.is_primary))||((I=x.images)==null?void 0:I[0]),N=10;let S="N/A",C=1/0;u&&x.vendor_latitude&&x.vendor_longitude&&(C=tK(u.latitude,u.longitude,x.vendor_latitude,x.vendor_longitude),S=`${C.toFixed(1)} km`);const T=vo(x,x.vendor_delivery_fee);return{id:x.id,name:x.name,vendor:x.vendor_name||"Unknown Vendor",price:x.price,image:(j==null?void 0:j.image_url)||"/placeholder-product.jpg",distance:S,distanceValue:C,inStock:x.quantity>0,vendorOnline:x.vendor_online!==!1,deliveryRadius:x.delivery_radius||N,totalSold:x.total_sold||0,deliveryInfo:T}}).filter(x=>x.vendorOnline&&(x.distanceValue===1/0||x.distanceValue<=x.deliveryRadius)).slice(0,6);t(b);const g=b.map(x=>x.id);d(g)}catch(f){console.error("Failed to fetch products:",f)}finally{r(!1)}};return n?s.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 md:grid-cols-3 md:gap-3",children:[...Array(6)].map((f,u)=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden animate-pulse",children:[s.jsx("div",{className:"h-24 bg-gray-200"}),s.jsxs("div",{className:"p-2 space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded"}),s.jsx("div",{className:"h-2 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},u))}):s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3 px-2",children:"Products Near You"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 md:grid-cols-3 md:gap-3 lg:flex lg:flex-row lg:overflow-x-auto lg:gap-3 lg:px-2",children:e.map(f=>{var u,m,p,w,y,b;return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:border-[#856043]/30 overflow-hidden shadow-sm flex-shrink-0 w-36 md:w-40 lg:w-36",children:[s.jsx("div",{className:"relative h-24 overflow-hidden bg-gray-100 cursor-pointer",onClick:()=>l(`/product/${f.id}`),children:s.jsx("img",{src:f.image,alt:f.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",onError:g=>{g.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),s.jsxs("div",{className:"p-2 space-y-1",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-900 line-clamp-2 leading-tight",children:f.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:f.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rs,{className:"h-2 w-2 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:(((u=i[f.id])==null?void 0:u.rating)??0).toFixed(1)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Jt,{className:"h-2 w-2"}),s.jsx("span",{children:f.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-xs font-bold text-[#856043]",children:["Rs ",f.price]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Cr,{className:"h-2 w-2 text-muted-foreground"}),s.jsx("span",{className:`text-[8px] px-1 py-0.5 rounded-full ${(m=f.deliveryInfo)!=null&&m.isFreeDelivery?"bg-green-100 text-green-700":((p=f.deliveryInfo)==null?void 0:p.deliveryFee)===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(w=f.deliveryInfo)!=null&&w.isFreeDelivery?"Free":((y=f.deliveryInfo)==null?void 0:y.deliveryFee)===null?"TBD":`Rs ${(b=f.deliveryInfo)==null?void 0:b.deliveryFee}`})]})]}),s.jsxs("p",{className:"text-[8px] text-gray-500",children:[f.totalSold||0," sold"]}),s.jsxs(se,{variant:"outline",size:"sm",className:"w-full border-[#856043] text-[#856043] hover:bg-[#856043] hover:text-white rounded-md text-[10px] py-1",disabled:!f.inStock,onClick:()=>o(f.id,1),children:[s.jsx(nn,{className:"w-2 h-2 mr-1"}),"Add to Cart"]})]})]},f.id)})})]})};function sK(){const{toast:e}=ts(),{cart:t,loading:n,updateCartItem:r,removeFromCart:i,fetchCart:a}=$n();_.useState("");const[o,l]=_.useState(0),[d,h]=_.useState([]),f=lt();_.useEffect(()=>{a()},[]);const u=[];_.useEffect(()=>{t!=null&&t.items&&h([])},[t]);const m=(t==null?void 0:t.items)||[],p=m.filter(R=>d.includes(R.id)),w=d.length===m.length&&m.length>0,y=R=>{h(R?m.map(E=>E.id):[])},b=R=>{h(E=>E.includes(R)?E.filter(F=>F!==R):[...E,R])},g=async(R,E)=>{const F=m.find(O=>O.id===R);if(F){const O=F.quantity+E;O>0&&await r(R,O)}},x=async R=>{await i(R)},j=async()=>{if(d.length!==0){for(const R of d)await i(R);h([])}},N=R=>{x(R.id),e({title:"Feature Coming Soon",description:"Save for later feature will be available soon"})},S=R=>{e({title:"Feature Coming Soon",description:"Move to cart feature will be available soon"})},T=p.reduce((R,E)=>R+parseFloat(E.total_price.toString()),0),A=T*.05,I=T*o,P=T+A-I;return n?s.jsx("div",{className:"min-h-screen bg-gray-50 font-sans flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(nn,{className:"mx-auto h-10 w-10 text-[#856043] mb-2 animate-pulse"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading cart..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-sm border-b py-2 px-3",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-2",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[s.jsx(nn,{className:"w-4 h-4 mr-1 text-[#856043]"}),"(",m.length,")"]}),s.jsx(se,{variant:"outline",className:"border-[#856043] text-[#856043] hover:bg-[#856043]/10 hover:text-[#856043] rounded-md text-xs font-medium py-1 px-2",onClick:()=>f("/search"),children:"Continue Shopping"})]})}),s.jsx("main",{className:"max-w-7xl mx-auto px-3 py-4 pb-52 overflow-y-auto",style:{height:"calc(100vh - 120px)"},children:m.length===0?s.jsxs("div",{children:[s.jsxs("div",{className:"text-center py-6",children:[s.jsx(nn,{className:"mx-auto h-10 w-10 text-[#856043] mb-2"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Your Cart is Empty"}),s.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"Discover products near you"})]}),s.jsx(uk,{})]}):s.jsxs("div",{className:"md:flex md:gap-4 space-y-2 md:space-y-0",children:[s.jsxs("div",{className:"md:w-1/2 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Um,{id:"select-all",checked:w,onCheckedChange:y,className:"data-[state=checked]:bg-[#856043] data-[state=checked]:border-[#856043]"}),s.jsxs("label",{htmlFor:"select-all",className:"text-sm font-medium text-gray-700 cursor-pointer",children:["Select all (",m.length,")"]})]}),s.jsxs(se,{variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50 text-xs px-3 py-1 rounded-md",onClick:j,disabled:d.length===0,children:[s.jsx(so,{className:"w-3 h-3 mr-1"}),"Delete (",d.length,")"]})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(vS,{children:m.map((R,E)=>{var F,O;return s.jsxs(vc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:E*.1},className:"bg-white p-3 flex items-center gap-3 rounded-lg border border-gray-200 shadow-sm hover:bg-gray-50 transition-colors",children:[s.jsx(Um,{checked:d.includes(R.id),onCheckedChange:()=>b(R.id),className:"data-[state=checked]:bg-[#856043] data-[state=checked]:border-[#856043] flex-shrink-0"}),s.jsx("div",{className:"w-12 h-12 flex-shrink-0 overflow-hidden rounded",children:s.jsx("img",{src:((O=(F=R.product.images)==null?void 0:F[0])==null?void 0:O.image_url)||"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200",alt:R.product.name,className:"w-full h-full object-cover",onError:M=>{M.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-xs font-medium text-gray-900 truncate",children:R.product.name}),s.jsxs("p",{className:"text-[10px] text-gray-500 truncate",children:["Sold by ",R.product.vendor_name]}),s.jsx("div",{className:"flex items-center gap-1 mt-1",children:s.jsxs("p",{className:"text-xs font-bold text-[#856043]",children:["Rs ",R.product.price]})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(se,{variant:"outline",size:"sm",className:"h-5 w-5 p-0 text-gray-600 border-gray-300 hover:border-[#856043] hover:text-[#856043]",onClick:()=>g(R.id,-1),children:"-"}),s.jsx("span",{className:"text-xs min-w-[1rem] text-center",children:R.quantity}),s.jsx(se,{variant:"outline",size:"sm",className:"h-5 w-5 p-0 text-gray-600 border-gray-300 hover:border-[#856043] hover:text-[#856043]",onClick:()=>g(R.id,1),children:"+"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(se,{variant:"ghost",size:"sm",className:"p-1 text-[#856043] hover:text-[#856043]/90 hover:bg-[#856043]/5",onClick:()=>N(R),children:s.jsx(cr,{className:"w-3 h-3"})}),s.jsx(se,{variant:"ghost",size:"sm",className:"p-1 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>x(R.id),children:s.jsx(so,{className:"w-3 h-3"})})]})]},R.id)})})}),u.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2 px-2",children:"Saved for Later"}),s.jsx(vS,{children:u.map((R,E)=>s.jsxs(vc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:E*.1},className:"bg-white p-2 flex items-center gap-2 border-b border-gray-300 hover:bg-gray-50",children:[s.jsx("div",{className:"w-12 h-12 flex-shrink-0 overflow-hidden rounded",children:s.jsx("img",{src:R.image,alt:R.name,className:"w-full h-full object-cover",onError:F=>{F.currentTarget.src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&q=80&w=200&h=200"}})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-xs font-medium text-gray-900 truncate",children:R.name}),s.jsxs("p",{className:"text-[10px] text-gray-500 truncate",children:["Sold by ",R.vendor]}),s.jsx("p",{className:"text-xs font-bold text-[#856043] mt-1",children:R.price})]}),s.jsx(se,{variant:"outline",size:"sm",className:"border-[#856043] text-[#856043] hover:bg-[#856043]/10 text-[10px] px-2 py-1",onClick:()=>S(),children:"Move to Cart"})]},R.id))})]})]}),s.jsx("div",{className:"md:w-1/2",children:s.jsx(uk,{})})]})}),m.length>0&&s.jsx(vc.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"fixed bottom-20 left-0 right-0 bg-white border-t border-gray-300 z-40",children:s.jsx("div",{className:"max-w-7xl mx-auto px-3",children:s.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"30vh"},children:s.jsx("div",{className:"py-2",children:s.jsxs("div",{className:"md:flex md:items-center md:justify-between md:gap-6",children:[s.jsxs("div",{className:"md:flex-1",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-xs mb-4 md:mb-0",children:[s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsxs("span",{children:["Subtotal (",p.length," items)"]}),s.jsxs("span",{className:"font-medium",children:["Rs ",T.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Taxes (5%)"}),s.jsxs("span",{className:"font-medium",children:["Rs ",A.toFixed(2)]})]}),s.jsx("hr",{className:"border-gray-300 my-2"}),s.jsxs("div",{className:"flex justify-between font-bold text-sm text-gray-900",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["Rs ",P.toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-1 text-gray-600 mt-2",children:[s.jsx(Cr,{className:"w-3 h-3"}),s.jsx("span",{className:"text-xs font-semibold",children:"Estimated delivery: Rs 50-60"})]})]})]}),s.jsx(se,{size:"lg",className:"w-full md:w-auto md:px-8 rounded-md bg-[#856043] text-white hover:bg-[#856043]/90 py-3 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed mb-2 md:mb-0",disabled:p.length===0,onClick:()=>f("/checkout",{state:{selectedItems:p}}),children:"Proceed to Checkout"})]})})})})}),s.jsx(jn,{})]})}const l0=({hasMore:e,isLoading:t,onLoadMore:n,threshold:r=200})=>{const i=_.useRef(null),a=_.useCallback(()=>{if(!e||t)return;const{scrollTop:o,scrollHeight:l,clientHeight:d}=document.documentElement;o+d>=l-r&&n()},[e,t,n,r]);return _.useEffect(()=>{const o=new IntersectionObserver(l=>{const[d]=l;d.isIntersecting&&e&&!t&&n()},{threshold:.1,rootMargin:`${r}px`});return i.current&&o.observe(i.current),window.addEventListener("scroll",a,{passive:!0}),()=>{o.disconnect(),window.removeEventListener("scroll",a)}},[e,t,n,a,r]),{sentinelRef:i}},Lo=class Lo{constructor(){Ht(this,"metrics",new Map)}static getInstance(){return Lo.instance||(Lo.instance=new Lo),Lo.instance}startTimer(t){this.metrics.set(t,performance.now())}endTimer(t){const n=this.metrics.get(t);if(!n)return 0;const r=performance.now()-n;return console.log(` ${t}: ${r.toFixed(2)}ms`),this.metrics.delete(t),r}measureAsync(t,n){return this.startTimer(t),n().finally(()=>{this.endTimer(t)})}measureSync(t,n){this.startTimer(t);try{return n()}finally{this.endTimer(t)}}logMemoryUsage(){if("memory"in performance){const t=performance.memory;console.log(" Memory Usage:",{used:`${(t.usedJSHeapSize/1024/1024).toFixed(2)} MB`,total:`${(t.totalJSHeapSize/1024/1024).toFixed(2)} MB`,limit:`${(t.jsHeapSizeLimit/1024/1024).toFixed(2)} MB`})}}logRenderMetrics(){if("getEntriesByType"in performance){performance.getEntriesByType("paint").forEach(r=>{console.log(` ${r.name}: ${r.startTime.toFixed(2)}ms`)});const n=performance.getEntriesByType("navigation");if(n.length>0){const r=n[0];console.log(" Navigation Timing:",{domContentLoaded:`${(r.domContentLoadedEventEnd-r.navigationStart).toFixed(2)}ms`,loadComplete:`${(r.loadEventEnd-r.navigationStart).toFixed(2)}ms`,firstByte:`${(r.responseStart-r.navigationStart).toFixed(2)}ms`})}}}};Ht(Lo,"instance");let c0=Lo;function nK(e,t,n){let r=null;return function(...a){const o=()=>{r=null,e(...a)};r&&clearTimeout(r),r=setTimeout(o,t)}}class rK{constructor(){Ht(this,"cache",new Set)}preload(t){const n=t.map(r=>this.cache.has(r)?Promise.resolve():new Promise((i,a)=>{const o=new Image;o.onload=()=>{this.cache.add(r),i()},o.onerror=a,o.src=r}));return Promise.all(n)}isPreloaded(t){return this.cache.has(t)}}const ka=c0.getInstance(),iK=new rK,sL=_.lazy(()=>ze(()=>import("./LazyImage-B-NNBFL1.js"),[])),hk=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3},aK=_.memo(({product:e,onProductClick:t,onToggleFavorite:n,onAddToCart:r,onBuyNow:i,isFavorite:a,productReviews:o})=>{var l,d,h,f,u,m;return s.jsxs(De,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>t(e.id),children:[s.jsxs("div",{className:"aspect-square md:aspect-[4/3] relative",children:[s.jsx(_.Suspense,{fallback:s.jsx("div",{className:"w-full h-full bg-gray-200 animate-pulse"}),children:s.jsx(sL,{src:e.image,alt:e.name,className:"w-full h-full object-cover",fallback:"/placeholder-product.jpg"})}),s.jsx(se,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:p=>n(e.id,p),children:s.jsx(cr,{className:`h-4 w-4 ${a?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Ze,{variant:e.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:e.inStock?"In Stock":"Out of Stock"})]}),s.jsxs($e,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:e.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:e.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:(((l=o[e.id])==null?void 0:l.rating)??e.rating??0).toFixed(1)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{children:e.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:e.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Cr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${(d=e.deliveryInfo)!=null&&d.isFreeDelivery?"bg-green-100 text-green-700":((h=e.deliveryInfo)==null?void 0:h.deliveryFee)===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(f=e.deliveryInfo)!=null&&f.isFreeDelivery?"Free":((u=e.deliveryInfo)==null?void 0:u.deliveryFee)===null?"TBD":`Rs ${(m=e.deliveryInfo)==null?void 0:m.deliveryFee}`})]})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(se,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!e.inStock,onClick:p=>{p.stopPropagation(),r(e.id,1)},children:[s.jsx(nn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(se,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!e.inStock,onClick:p=>i(p,e),children:[s.jsx(bs,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]})}),oK=_.memo(({vendor:e,onVendorClick:t})=>s.jsx(De,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t(e),children:s.jsx($e,{className:"p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(_.Suspense,{fallback:s.jsx("div",{className:"w-16 h-16 bg-gray-200 animate-pulse rounded-full"}),children:s.jsx(sL,{src:e.image,alt:e.name,className:"w-16 h-16 object-cover rounded-full",fallback:"/placeholder-vendor.jpg"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-base mb-1",children:e.name}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:e.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{children:e.distance})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Yr,{className:"h-3 w-3"}),s.jsx("span",{children:e.deliveryTime})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:e.categories.map((n,r)=>s.jsx(Ze,{variant:"secondary",className:"text-xs",children:n},r))})]})]})})}));function lK(){const e=lt(),[t,n]=tg(),[r,i]=_.useState(t.get("q")||""),[a,o]=_.useState({products:[],vendors:[]}),[l,d]=_.useState("all"),[h,f]=_.useState(!1),[u,m]=_.useState(!1),[p,w]=_.useState(ht.getLocation()),[y,b]=_.useState({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),[g,x]=_.useState(new Set),[j,N]=_.useState(!1),[S,C]=_.useState(""),[T,A]=_.useState([]),[I,P]=_.useState({}),{toast:R}=ts(),{addToCart:E}=$n();_.useEffect(()=>{(async()=>{const he=localStorage.getItem("pendingAction");if(he)try{const Q=JSON.parse(he),ye=await Ce.getToken();if(ye&&Q.timestamp>Date.now()-3e5){if(Q.type==="add_to_cart")await E(Q.data.productId,Q.data.quantity||1),R({title:"Added to Cart",description:"Product added successfully"}),e("/cart");else if(Q.type==="buy_now")e("/checkout",{state:{directBuy:!0,product:Q.data}});else if(Q.type==="toggleFavorite"){const be=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${ye}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:Q.productId})});if(be.ok){const ce=await be.json(),ge=new Set(g);ce.is_favorite?ge.add(Q.productId):ge.delete(Q.productId),x(ge),R({title:ce.is_favorite?"Added to Favorites":"Removed from Favorites",description:ce.message})}}localStorage.removeItem("pendingAction")}else localStorage.removeItem("pendingAction")}catch(Q){console.error("Failed to execute pending action:",Q),localStorage.removeItem("pendingAction")}})()},[E,g,R]);const[F,O]=_.useState([]),M=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}],Z=_.useCallback(async(ue=1,he="",Q="both")=>{const ye=ue===1,be=`fetch-${Q}-page-${ue}`;ka.startTimer(be),ye?f(!0):m(!0);try{const ce={"ngrok-skip-browser-warning":"true"},ge=ht.getLocation(),ee=de=>{const pe=new URLSearchParams({page:de.toString(),page_size:"20"});return he&&pe.append("search",he),S&&pe.append("sort",S),T.length>0&&pe.append("categories",T.join(",")),ge&&(pe.append("latitude",ge.latitude.toString()),pe.append("longitude",ge.longitude.toString())),pe},ae=[];if(Q==="both"||Q==="products"){const de=Q==="products"?ue:y.products.page;ae.push(fetch(`${Qe}search/products/?${ee(de)}`,{headers:ce}).then(pe=>{if(!pe.ok)throw new Error(`HTTP ${pe.status}: ${pe.statusText}`);return pe.json()}).then(pe=>({type:"products",data:pe,page:de})))}if(Q==="both"||Q==="vendors"){const de=Q==="vendors"?ue:y.vendors.page;ae.push(fetch(`${Qe}search/vendors/?${ee(de)}`,{headers:ce}).then(pe=>{if(!pe.ok)throw new Error(`HTTP ${pe.status}: ${pe.statusText}`);return pe.json()}).then(pe=>({type:"vendors",data:pe,page:de})))}const oe=await ka.measureAsync("api-requests",()=>Promise.allSettled(ae)),ke=[];oe.forEach(de=>{var we;if(de.status==="rejected"){console.error("API request failed:",de.reason);return}const{type:pe,data:Pe,page:me}=de.value;if(pe==="products"){const Re=z(Pe.results||[]);if(ye){const Ee=[...new Set(((we=Pe.results)==null?void 0:we.map(qe=>qe.category).filter(Boolean))||[])];O(Ee)}if(Re.forEach(Ee=>{Ee.image&&!ke.includes(Ee.image)&&ke.push(Ee.image)}),o(Ee=>({...Ee,products:me===1?Re:[...Ee.products,...Re]})),me===1){const Ee=Re.map(qe=>qe.id);ne(Ee)}b(Ee=>({...Ee,products:{page:me,hasMore:Pe.next!==null,total:Pe.count||0}}))}else if(pe==="vendors"){const Re=D(Pe.results||[]);Re.forEach(Ee=>{Ee.image&&!ke.includes(Ee.image)&&ke.push(Ee.image)}),o(Ee=>({...Ee,vendors:me===1?Re:[...Ee.vendors,...Re]})),b(Ee=>({...Ee,vendors:{page:me,hasMore:Pe.next!==null,total:Pe.count||0}}))}}),oe.forEach((de,pe)=>{if(de.status==="rejected"){const me=Q==="both"&&pe===1||Q==="vendors"?"vendors":"products";b(we=>({...we,[me]:{...we[me],hasMore:!1}}))}}),ke.length>0&&iK.preload(ke.slice(0,10)).catch(de=>console.warn("Image preload failed:",de))}catch(ce){console.error("Fetch error:",ce),R({title:"Error",description:"Failed to load search results",variant:"destructive"})}finally{f(!1),m(!1),ka.endTimer(be)}},[S,T,R]);_.useEffect(()=>{ka.startTimer("initial-load");const ue=ht.subscribe(w);return ht.startTracking(),Z(),J(),ka.endTimer("initial-load"),setTimeout(()=>{ka.logRenderMetrics()},1e3),ue},[]),_.useEffect(()=>{nK(()=>{ka.startTimer("search-query"),n(r?{q:r}:{}),b({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),Z(1,r),ka.endTimer("search-query")},300)()},[r,n]),_.useEffect(()=>{b({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),Z(1,r)},[S,T]),_.useEffect(()=>{p&&(b({products:{page:1,hasMore:!0,total:0},vendors:{page:1,hasMore:!0,total:0}}),Z(1,r))},[p]);const X=ue=>{if(!ue)return 0;if(ue.reviews&&Array.isArray(ue.reviews)&&ue.reviews.length>0){const he=ue.reviews.map(Q=>Number(Q.rating??Q.stars??Q.score??0)).filter(Q=>!isNaN(Q));if(he.length>0){const Q=he.reduce((ye,be)=>ye+be,0);return Math.max(0,Math.min(5,Q/he.length))}}return ue.average_rating!=null?Number(ue.average_rating):ue.rating!=null?Number(ue.rating):0},z=_.useCallback(ue=>{const he=ht.getLocation();return ue.map(Q=>{var ee,ae;const ye=((ee=Q.images)==null?void 0:ee.find(oe=>oe.is_primary))||((ae=Q.images)==null?void 0:ae[0]);let be="N/A",ce=1/0;he&&Q.vendor_latitude&&Q.vendor_longitude&&(ce=hk(he.latitude,he.longitude,Q.vendor_latitude,Q.vendor_longitude),be=`${ce.toFixed(1)} km`);const ge=vo(Q,Q.vendor_delivery_fee);return{id:Q.id,name:Q.name,vendor:Q.vendor_name||"Unknown Vendor",vendor_id:Q.vendor_id,price:`Rs ${Q.price}`,priceValue:parseFloat(Q.price),image:(ye==null?void 0:ye.image_url)||"/placeholder-product.jpg",rating:X(Q),distance:be,distanceValue:ce,deliveryTime:"30-45 mins",inStock:Q.quantity>0,category:Q.category,totalSold:Q.total_sold||0,deliveryInfo:ge,vendorOnline:Q.vendor_online!==!1,deliveryRadius:hl(Q)??1/0,free_delivery:Q.free_delivery,custom_delivery_fee_enabled:Q.custom_delivery_fee_enabled,custom_delivery_fee:Q.custom_delivery_fee}}).filter(Q=>Q.vendorOnline&&(Q.distanceValue===1/0||Q.distanceValue<=Q.deliveryRadius))},[]),D=_.useCallback(ue=>{const he=ht.getLocation();return ue.map(Q=>{var ce,ge,ee,ae,oe;let ye="N/A",be=1/0;return he&&Q.latitude&&Q.longitude&&(be=hk(he.latitude,he.longitude,Q.latitude,Q.longitude),ye=`${be.toFixed(1)} km`),{id:Q.id,name:Q.business_name,image:((ge=(ce=Q.shop_images)==null?void 0:ce.find(ke=>ke.is_primary))==null?void 0:ge.image_url)||((ae=(ee=Q.shop_images)==null?void 0:ee[0])==null?void 0:ae.image_url)||((oe=Q.user_info)==null?void 0:oe.profile_picture)||"/placeholder-vendor.jpg",rating:X(Q),distance:ye,distanceValue:be,deliveryTime:"30-45 mins",categories:Q.categories||[],isOnline:Q.is_online!==!1,deliveryRadius:hl(Q)??1/0}}).filter(Q=>Q.isOnline&&(Q.distanceValue===1/0||Q.distanceValue<=Q.deliveryRadius)).sort((Q,ye)=>Q.distanceValue-ye.distanceValue)},[]),B=_.useCallback(()=>{!u&&y.products.hasMore&&Z(y.products.page+1,r,"products")},[u,y.products.hasMore,y.products.page,r]),V=_.useCallback(()=>{!u&&y.vendors.hasMore&&Z(y.vendors.page+1,r,"vendors")},[u,y.vendors.hasMore,y.vendors.page,r]),{sentinelRef:H}=l0({hasMore:y.products.hasMore,isLoading:u,onLoadMore:B,threshold:300}),{sentinelRef:q}=l0({hasMore:y.vendors.hasMore,isLoading:u,onLoadMore:V,threshold:300}),W=_.useCallback(ue=>{e(`/product/${ue}`)},[e]),Y=_.useCallback(ue=>{e(`/vendor/${ue.id}`)},[e]),U=_.useCallback(async(ue,he=1)=>{if(!await Ce.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:ue,quantity:he},path:"/cart",timestamp:Date.now()})),e("/login",{state:{from:window.location.pathname}});return}try{await E(ue,he),R({title:"Added to Cart",description:"Product added successfully"}),e("/cart")}catch{R({title:"Error",description:"Failed to add product to cart",variant:"destructive"})}},[E,e,R]),G=_.useCallback(async(ue,he)=>{if(ue.stopPropagation(),!await Ce.getToken()){const ye={id:he.id,name:he.name,price:he.price.replace("",""),quantity:1,vendor_name:he.vendor,vendor_id:he.vendor_id,images:[{image_url:he.image}],free_delivery:he.free_delivery,custom_delivery_fee_enabled:he.custom_delivery_fee_enabled,custom_delivery_fee:he.custom_delivery_fee,dynamic_fields:he.dynamic_fields||{}};console.log("Search Buy Now - Product data:",ye),console.log("Search Buy Now - Delivery info:",he.deliveryInfo),localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:ye,path:"/checkout",timestamp:Date.now()})),e("/login",{state:{from:window.location.pathname}});return}e("/checkout",{state:{directBuy:!0,product:{id:he.id,name:he.name,price:he.price.replace("",""),quantity:1,vendor_name:he.vendor,vendor_id:he.vendor_id,images:[{image_url:he.image}],free_delivery:he.free_delivery,custom_delivery_fee_enabled:he.custom_delivery_fee_enabled,custom_delivery_fee:he.custom_delivery_fee,dynamic_fields:he.dynamic_fields||{}}}})},[e]),ne=async ue=>{try{const he=ue.map(be=>xo.getProductReviews(be)),ye=(await Promise.all(he)).reduce((be,ce)=>{var ge,ee;return be[ce.product_id]={rating:((ge=ce.aggregate)==null?void 0:ge.average_rating)||0,total:((ee=ce.aggregate)==null?void 0:ee.total_reviews)||0},be},{});P(be=>({...be,...ye}))}catch(he){console.error("Failed to load product reviews:",he)}},J=async()=>{var he;const ue=await Ce.getToken();if(ue)try{const Q=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${ue}`,"ngrok-skip-browser-warning":"true"}});if(Q.ok){const ye=await Q.json(),be=new Set(((he=ye.results)==null?void 0:he.map(ce=>ce.product.id))||[]);x(be)}}catch(Q){console.error("Failed to fetch favorites:",Q)}},ie=async(ue,he)=>{he.stopPropagation();const Q=await Ce.getToken();if(!Q){localStorage.setItem("pendingAction",JSON.stringify({type:"toggleFavorite",productId:ue,timestamp:Date.now()})),e("/login",{state:{from:"/search"}});return}try{const ye=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${Q}`,"ngrok-skip-browser-warning":"true"},body:JSON.stringify({product_id:ue})});if(ye.ok){const be=await ye.json(),ce=new Set(g);be.is_favorite?ce.add(ue):ce.delete(ue),x(ce),R({title:be.is_favorite?"Added to Favorites":"Removed from Favorites",description:be.message})}}catch{R({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},xe=_.useMemo(()=>a.products.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6",children:a.products.map((ue,he)=>s.jsx(aK,{product:ue,onProductClick:W,onToggleFavorite:ie,onAddToCart:U,onBuyNow:G,isFavorite:g.has(ue.id),productReviews:I},`${ue.id}-${he}`))}),y.products.hasMore&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{ref:H,className:"h-4"}),u&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(Cs,{className:"h-6 w-6 animate-spin mr-2"}),s.jsx("span",{children:"Loading more products..."})]})]})]}),[a.products,W,ie,E,G,g,y.products.hasMore,u,H]),Se=_.useMemo(()=>a.vendors.length===0?null:s.jsxs("div",{className:"space-y-3",children:[a.vendors.map((ue,he)=>s.jsx(oK,{vendor:ue,onVendorClick:Y},`${ue.id}-${he}`)),y.vendors.hasMore&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{ref:q,className:"h-4"}),u&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(Cs,{className:"h-6 w-6 animate-spin mr-2"}),s.jsx("span",{children:"Loading more vendors..."})]})]})]}),[a.vendors,Y,y.vendors.hasMore,u,q]);return s.jsxs(s.Fragment,{children:[s.jsx("title",{children:r?`${r} - Search Results | ezeyway Kathmandu Valley`:"Search Products & Vendors | ezeyway Kathmandu Valley"}),s.jsx("meta",{name:"description",content:r?`Find ${r} and similar products with same-day delivery in Kathmandu Valley. Shop groceries, electronics, fashion & more at ezeyway.`:"Search and discover products, vendors, and services with same-day delivery in Kathmandu Valley. Find groceries, electronics, fashion, food and more."}),s.jsx("meta",{name:"keywords",content:`search ${r||""}, Kathmandu delivery, same day delivery Nepal, instant shopping Kathmandu, groceries delivery, electronics delivery, fashion delivery, food delivery Kathmandu Valley, online shopping Nepal`}),s.jsx("link",{rel:"canonical",href:`https://ezeyway.com/search${r?`?q=${encodeURIComponent(r)}`:""}`}),s.jsx("meta",{property:"og:title",content:r?`${r} - Search Results | ezeyway`:"Search Products & Vendors | ezeyway Kathmandu Valley"}),s.jsx("meta",{property:"og:description",content:r?`Find ${r} and similar products with same-day delivery in Kathmandu Valley`:"Search and discover products, vendors, and services with same-day delivery in Kathmandu Valley"}),s.jsx("meta",{property:"og:image",content:"https://ezeyway.com/ezy-icon.svg"}),s.jsx("meta",{property:"og:url",content:`https://ezeyway.com/search${r?`?q=${encodeURIComponent(r)}`:""}`}),s.jsx("meta",{property:"og:type",content:"website"}),s.jsx("meta",{name:"twitter:title",content:r?`${r} - Search Results | ezeyway`:"Search Products & Vendors | ezeyway Kathmandu Valley"}),s.jsx("meta",{name:"twitter:description",content:r?`Find ${r} and similar products with same-day delivery in Kathmandu Valley`:"Search and discover products, vendors, and services with same-day delivery in Kathmandu Valley"}),s.jsx("meta",{name:"twitter:image",content:"https://ezeyway.com/ezy-icon.svg"}),s.jsx("meta",{name:"robots",content:"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"}),s.jsx("meta",{name:"geo.region",content:"NP"}),s.jsx("meta",{name:"geo.placename",content:"Kathmandu Valley"}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"SearchResultsPage",name:r?`${r} Search Results`:"Product Search",description:r?`Search results for ${r} in Kathmandu Valley`:"Search for products and vendors in Kathmandu Valley",url:`https://ezeyway.com/search${r?`?q=${encodeURIComponent(r)}`:""}`,mainEntity:{"@type":"ItemList",name:"Search Results",description:`Found ${y.products.total} products and ${y.vendors.total} vendors${r?` for "${r}"`:""}`}})}),s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Yo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(_e,{placeholder:"Search products, vendors...",value:r,onChange:ue=>i(ue.target.value),className:"pl-10 pr-4 py-2"})]}),s.jsx(se,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>N(!0),children:s.jsx(ri,{className:"h-5 w-5"})})]})}),s.jsx("div",{className:"px-4 py-3 border-b border-border/50",children:s.jsx("div",{className:"flex gap-2",children:[{id:"all",label:"All"},{id:"products",label:"Products"},{id:"vendors",label:"Vendors"}].map(ue=>s.jsx(se,{variant:l===ue.id?"default":"ghost",size:"sm",onClick:()=>d(ue.id),className:"flex-1",children:ue.label},ue.id))})}),s.jsxs("div",{className:"p-4 pb-20",children:[r&&s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:[l==="all"&&`Found ${y.products.total} products and ${y.vendors.total} vendors`,l==="products"&&`Found ${y.products.total} products`,l==="vendors"&&`Found ${y.vendors.total} vendors`,r&&" for ",s.jsxs("span",{className:"font-medium",children:['"',r,'"']})]}),(l==="all"||l==="products")&&s.jsx("div",{className:"mb-6",children:a.products.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Products"}),xe]})}),(l==="all"||l==="vendors")&&s.jsx("div",{children:a.vendors.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"font-semibold text-lg mb-3",children:"Vendors"}),Se]})}),r&&a.products.length===0&&a.vendors.length===0&&!h&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Yo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No results found"}),s.jsx("p",{className:"text-muted-foreground",children:"Try searching for products or vendors with different keywords"})]}),!r&&!h&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Yo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Search for anything"}),s.jsx("p",{className:"text-muted-foreground",children:"Find products, vendors, and more in your area"})]}),h&&a.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Cs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),j&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>N(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:ue=>ue.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>N(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:M.map(ue=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:ue.value,checked:S===ue.value,onChange:he=>C(he.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:ue.label})]},ue.value))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Categories"}),s.jsx("div",{className:"space-y-2",children:F.map(ue=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:T.includes(ue),onChange:he=>{he.target.checked?A([...T,ue]):A(T.filter(Q=>Q!==ue))},className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:ue})]},ue))})]}),s.jsx(se,{variant:"outline",className:"w-full",onClick:()=>{C(""),A([])},children:"Clear All Filters"})]})]})}),s.jsx(h_,{}),s.jsx(jn,{})]})]})}const fk=bn.BASE_URL;class cK{async getAuthHeaders(){return{"Content-Type":"application/json",Authorization:`Token ${await Ce.getToken()}`,"ngrok-skip-browser-warning":"true"}}async getFavorites(){try{const t=await fetch(`${fk}/favorites/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch favorites");const n=await t.json();return n.results||n}catch(t){throw console.error("Error fetching favorites:",t),t}}async toggleFavorite(t){try{const n=await fetch(`${fk}/favorites/toggle/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({product_id:t})});if(!n.ok)throw new Error("Failed to toggle favorite");return await n.json()}catch(n){throw console.error("Error toggling favorite:",n),n}}}const mk=new cK,dK=()=>{const e=lt();Fn();const{addToCart:t}=$n(),{toast:n}=ts(),[r,i]=_.useState([]),[a,o]=_.useState(!0),[l,d]=_.useState([]),[h,f]=_.useState(ht.getLocation());_.useEffect(()=>(m(),ht.subscribe(f)),[]),_.useEffect(()=>{r.length>0&&p()},[r,h]);const u=(C,T,A,I)=>{const R=z=>z*(Math.PI/180),E=R(A-C),F=R(I-T),O=R(C),M=R(A),Z=Math.sin(E/2)*Math.sin(E/2)+Math.cos(O)*Math.cos(M)*Math.sin(F/2)*Math.sin(F/2);return 6371*(2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z)))},m=async()=>{if(!await Ce.getToken()){o(!1);return}try{const T=await mk.getFavorites();i(T)}catch(T){console.error("Error fetching favorites:",T),n({title:"Error",description:"Failed to load favorites",variant:"destructive"})}finally{o(!1)}},p=async()=>{try{const C=[...new Set(r.map(F=>F.product.category).filter(Boolean))];if(C.length===0)return;const T=await Ce.getToken(),A=T?{Authorization:`Token ${T}`}:{},I=new URLSearchParams({page_size:"12"});h&&(I.append("latitude",h.latitude.toString()),I.append("longitude",h.longitude.toString()));const E=((await(await fetch(Vc(`/search/products/?${I}`),{headers:A})).json()).results||[]).filter(F=>C.includes(F.category)).map(F=>{var X,z;const O=((X=F.images)==null?void 0:X.find(D=>D.is_primary))||((z=F.images)==null?void 0:z[0]);let M="N/A",Z=1/0;return h&&F.vendor_latitude&&F.vendor_longitude&&(Z=u(h.latitude,h.longitude,F.vendor_latitude,F.vendor_longitude),M=`${Z.toFixed(1)} km`),{id:F.id,name:F.name,vendor:F.vendor_name||"Unknown Vendor",price:F.price,image:(O==null?void 0:O.image_url)||"/placeholder-product.jpg",distance:M,distanceValue:Z,inStock:F.quantity>0,category:F.category}}).sort((F,O)=>F.distanceValue-O.distanceValue).slice(0,8);d(E)}catch(C){console.error("Error fetching related products:",C)}},w=async C=>{try{await mk.toggleFavorite(C),i(T=>T.filter(A=>A.product.id!==C)),n({title:"Removed from Wishlist",description:"Item has been removed from your wishlist"})}catch{n({title:"Error",description:"Failed to remove from wishlist",variant:"destructive"})}},y=async(C,T)=>{T==null||T.stopPropagation();try{await t(C.product.id,1),n({title:"Added to Cart",description:`${C.product.name} has been added to your cart`})}catch{n({title:"Error",description:"Failed to add to cart",variant:"destructive"})}},b=async(C,T)=>{T==null||T.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:C.product.id,name:C.product.name,price:C.product.price,quantity:1,vendor_name:C.product.vendor_name,vendor_id:C.product.vendor_id,images:C.product.images}}})},g=C=>{e(`/product/${C}`)},[x,j]=_.useState(!1),[N,S]=_.useState(!0);return _.useEffect(()=>{(async()=>{const T=await Ce.getToken();j(!!T),S(!1)})()},[]),N?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):x?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Ut,{className:"h-6 w-6 text-gray-700"})}),s.jsx("div",{}),s.jsxs("span",{className:"bg-red-100 text-red-800 text-sm font-medium px-3 py-1 rounded-full",children:[r.length," items"]})]})}),s.jsxs("div",{className:"p-4 max-w-3xl mx-auto",children:[a?s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600"})}):r.length>0?s.jsx("div",{className:"space-y-4",children:r.map(C=>{var T,A;return s.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl border p-4 flex items-center transition-all duration-300 cursor-pointer hover:bg-gray-50",onClick:()=>g(C.product.id),children:[s.jsx("div",{className:"flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden bg-gray-100",children:s.jsx("img",{src:((A=(T=C.product.images)==null?void 0:T[0])==null?void 0:A.image_url)||"/placeholder-product.jpg",alt:C.product.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"ml-6 flex-1",children:[s.jsx("h3",{className:"font-semibold text-xl text-gray-900 truncate",children:C.product.name}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:C.product.vendor_name}),s.jsxs("p",{className:"font-bold text-2xl text-emerald-600 mt-1",children:["Rs ",parseFloat(C.product.price).toFixed(2)]}),s.jsx("div",{className:"flex items-center mt-2",children:C.product.quantity>0?s.jsx("span",{className:"text-green-600 text-sm font-medium bg-green-50 px-2 py-1 rounded-full",children:"In Stock"}):s.jsx("span",{className:"text-red-600 text-sm font-medium bg-red-50 px-2 py-1 rounded-full",children:"Out of Stock"})})]}),s.jsxs("div",{className:"flex flex-col justify-between items-end space-y-2",children:[s.jsx(se,{variant:"ghost",size:"icon",onClick:I=>{I.stopPropagation(),w(C.product.id)},className:"text-gray-500 hover:text-red-600 hover:bg-red-100 rounded-full",children:s.jsx(so,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{size:"sm",disabled:C.product.quantity<=0,onClick:I=>y(C,I),className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-full disabled:bg-gray-300 disabled:text-gray-500",children:s.jsx(nn,{className:"h-3 w-3 mr-1"})}),s.jsxs(se,{size:"sm",disabled:C.product.quantity<=0,onClick:I=>b(C,I),className:"bg-orange-600 hover:bg-orange-700 text-white rounded-full disabled:bg-gray-300 disabled:text-gray-500",children:[s.jsx(QF,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]})]},C.id)})}):s.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-lg border",children:[s.jsx(cr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your wishlist is empty"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start adding items you love!"}),s.jsx(se,{className:"bg-emerald-600 hover:bg-emerald-700 text-white rounded-full px-6 py-2",onClick:()=>e("/"),children:"Browse Products"})]}),l.length>0&&s.jsxs("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Products Near You"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map(C=>s.jsx(De,{className:"p-3 cursor-pointer hover:shadow-md transition-smooth",onClick:()=>e(`/product/${C.id}`),children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"aspect-square mb-2 bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:C.image,alt:C.name,className:"w-full h-full object-cover",onError:T=>{T.target.src="/placeholder-product.jpg"}})}),s.jsx("h3",{className:"font-medium text-sm mb-1 line-clamp-2",children:C.name}),s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:C.vendor}),s.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-500 mb-2",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{children:C.distance})]}),s.jsxs("p",{className:"font-semibold text-emerald-600 text-sm mb-2",children:["Rs ",C.price]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(se,{variant:"outline",size:"sm",className:"flex-1 h-7 text-xs",disabled:!C.inStock,onClick:T=>{T.stopPropagation(),t(C.id,1)},children:s.jsx(nn,{className:"h-3 w-3"})}),s.jsxs(se,{size:"sm",className:"flex-1 h-7 text-xs bg-green-600 hover:bg-green-700",disabled:!C.inStock,onClick:T=>{T.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:C.id,name:C.name,price:C.price,quantity:1,vendor_name:C.vendor,images:[{image_url:C.image}]}}})},children:[s.jsx(bs,{className:"h-3 w-3"}),"Buy"]})]})]})},C.id))})]})]}),s.jsx(jn,{})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(cr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Please Login"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"You need to login to view your wishlist"}),s.jsx(se,{onClick:()=>e("/login"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Login"})]})})},uK=async e=>{var t;try{const n=await Ce.getUser();return n?n.user_type===e?{success:!0}:(t=n.available_roles)!=null&&t.includes(e)?e==="vendor"?await m_():await nL():{success:!1,roleNotAvailable:!0}:{success:!1,needsLogin:!0}}catch(n){return console.error("Role ensure error:",n),{success:!1,error:n.message}}},m_=async()=>{var e;try{const t=await Ce.getUser();if(!((e=t==null?void 0:t.available_roles)!=null&&e.includes("vendor")))throw new Error("Vendor role not available");if(t.user_type==="vendor")return console.log(" Already in vendor role"),{success:!0,message:"Already in vendor role"};console.log(" Switching to vendor role...");const{response:n,data:r}=await Ve("/switch-role/",{method:"POST",body:JSON.stringify({role:"vendor"})});if(n.ok){console.log(" Role switch API call successful");const i=(r==null?void 0:r.token)||await Ce.getToken(),a={...t,user_type:"vendor",current_role:"vendor"};console.log(" Updating auth services with vendor role..."),await Ce.setAuth(i,a);const{simplePersistentAuth:o}=await ze(async()=>{const{simplePersistentAuth:l}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:l}},void 0);await o.saveVendorLogin(i,a),console.log(" Auth services updated successfully");try{const{response:l}=await Ve("/vendor-profiles/");if(l.ok){const d=await l.json();(!d.results||d.results.length===0)&&(console.log(" Creating vendor profile..."),await fK(t))}}catch(l){console.log("Profile check failed, will create on first access:",l)}return{success:!0,message:"Switched to vendor role",user:a}}else throw console.error(" Role switch API failed:",n.status,r),new Error((r==null?void 0:r.error)||"Role switch failed")}catch(t){return console.error(" Role switch error:",t),{success:!1,error:t.message}}},nL=async()=>{var e;try{const t=await Ce.getUser();if(!((e=t==null?void 0:t.available_roles)!=null&&e.includes("customer")))throw new Error("Customer role not available");if(t.user_type==="customer")return console.log(" Already in customer role"),{success:!0,message:"Already in customer role"};console.log(" Switching to customer role...");const{response:n,data:r}=await Ve("/switch-role/",{method:"POST",body:JSON.stringify({role:"customer"})});if(n.ok){console.log(" Role switch API call successful");const i=(r==null?void 0:r.token)||await Ce.getToken(),a={...t,user_type:"customer",current_role:"customer"};return console.log(" Updating auth services with customer role..."),await Ce.setAuth(i,a),console.log(" Auth services updated successfully"),{success:!0,message:"Switched to customer role",user:a}}else throw console.error(" Role switch API failed:",n.status,r),new Error((r==null?void 0:r.error)||"Role switch failed")}catch(t){return console.error(" Role switch error:",t),{success:!1,error:t.message}}},hK=async()=>{var e;try{const t=await Ce.getUser();return t?((e=t.available_roles)==null?void 0:e.includes("vendor"))?t.user_type==="customer"?{hasAccess:!0,needsRoleSwitch:!0}:{hasAccess:!0,needsRoleSwitch:!1}:{hasAccess:!1,needsOnboarding:!0}:{hasAccess:!1,needsLogin:!0}}catch(t){return console.error("Vendor access check error:",t),{hasAccess:!1,needsLogin:!0}}},fK=async e=>{try{const t={business_name:e.username||"My Business",owner_name:e.username||"Owner",business_email:e.email||"",business_phone:e.phone_number||"",business_address:"",city:"",state:"",pincode:"",business_type:"retailer",categories:[],description:"",is_active:!0},{response:n}=await Ve("/vendor-profiles/",{method:"POST",body:JSON.stringify(t)});n.ok&&console.log("Vendor profile created successfully")}catch(t){console.error("Failed to create vendor profile:",t)}};class mK{async saveVendorLogin(t,n){try{if(gt.isNativePlatform()){const{Preferences:r}=await ze(async()=>{const{Preferences:i}=await Promise.resolve().then(()=>Wv);return{Preferences:i}},void 0);await r.set({key:"vendor_token",value:t}),await r.set({key:"vendor_user",value:JSON.stringify(n)}),await r.set({key:"vendor_time",value:Date.now().toString()})}else localStorage.setItem("vendor_token",t),localStorage.setItem("vendor_user",JSON.stringify(n)),localStorage.setItem("vendor_time",Date.now().toString());console.log(" Vendor login saved")}catch(r){console.error("Save vendor login failed:",r)}}async getVendorAuth(){try{let t=null,n=null,r=null;if(console.log(" Getting vendor auth, isNative:",gt.isNativePlatform()),gt.isNativePlatform()){const{Preferences:d}=await ze(async()=>{const{Preferences:m}=await Promise.resolve().then(()=>Wv);return{Preferences:m}},void 0),h=await d.get({key:"vendor_token"}),f=await d.get({key:"vendor_user"}),u=await d.get({key:"vendor_time"});t=h.value,n=f.value,r=u.value}else t=localStorage.getItem("vendor_token"),n=localStorage.getItem("vendor_user"),r=localStorage.getItem("vendor_time");if(console.log(" Storage check:",{token:t?"exists":"missing",user:n?"exists":"missing",time:r?"exists":"missing"}),!t||!n||!r)return console.log(" Missing auth data in storage"),null;const i=parseInt(r),a=30*24*60*60*1e3,o=Date.now()-i;if(console.log(" Auth age check:",{loginTime:new Date(i).toISOString(),ageHours:Math.round(o/(1e3*60*60)),maxAgeHours:Math.round(a/(1e3*60*60)),isValid:o<=a}),o>a)return console.log(" Auth expired, clearing"),await this.clearVendorAuth(),null;const l=JSON.parse(n);return console.log(" Vendor auth found:",{username:l.username,user_type:l.user_type,available_roles:l.available_roles}),{token:t,user:l}}catch(t){return console.error(" Get vendor auth failed:",t),null}}async clearVendorAuth(){try{if(gt.isNativePlatform()){const{Preferences:t}=await ze(async()=>{const{Preferences:n}=await Promise.resolve().then(()=>Wv);return{Preferences:n}},void 0);await t.remove({key:"vendor_token"}),await t.remove({key:"vendor_user"}),await t.remove({key:"vendor_time"})}else localStorage.removeItem("vendor_token"),localStorage.removeItem("vendor_user"),localStorage.removeItem("vendor_time");console.log(" Vendor auth cleared")}catch(t){console.error("Clear vendor auth failed:",t)}}async isVendorLoggedIn(){var n;const t=await this.getVendorAuth();return t!==null&&((n=t.user)==null?void 0:n.user_type)==="vendor"}}const rL=new mK,Ws=Object.freeze(Object.defineProperty({__proto__:null,simplePersistentAuth:rL},Symbol.toStringTag,{value:"Module"}));function iL(){var l,d,h,f,u,m,p,w,y,b,g,x,j;const{state:e,login:t}=Fn(),n=lt();console.log(" RoleSwitcher rendered, user:",e.user),console.log(" Available roles:",(l=e.user)==null?void 0:l.available_roles),console.log(" Available roles length:",(h=(d=e.user)==null?void 0:d.available_roles)==null?void 0:h.length),console.log(" Current role:",(f=e.user)==null?void 0:f.user_type),console.log(" User type:",(u=e.user)==null?void 0:u.user_type),console.log(" Roles check condition:",!((m=e.user)!=null&&m.available_roles)||e.user.available_roles.length<=1);const r=async N=>{var S,C;console.log(" handleRoleSwitch called with role:",N);try{if(N==="vendor")if((C=(S=e.user)==null?void 0:S.available_roles)!=null&&C.includes("vendor")){console.log(" User has vendor role, switching...");const T=await m_();if(T.success){console.log(" Vendor role switch successful");const A=T.user||{...e.user,user_type:"vendor",current_role:"vendor"},I=await Ce.getToken();await t(A,I),await rL.saveVendorLogin(I,A),setTimeout(()=>{console.log(" Navigating to vendor dashboard"),n("/vendor/dashboard")},100)}else console.error(" Vendor role switch failed:",T.error)}else console.log(" Starting vendor onboarding for customer"),n("/vendor/onboarding");else{console.log(" Switching to customer role...");const T=await nL();if(T.success){console.log(" Customer role switch successful");const A=T.user||{...e.user,user_type:"customer",current_role:"customer"},I=await Ce.getToken();await t(A,I),setTimeout(()=>{console.log(" Navigating to customer home"),n("/home")},100)}else console.error(" Customer role switch failed:",T.error)}}catch(T){console.error(" Role switch error:",T)}};if(!((p=e.user)!=null&&p.available_roles)||e.user.available_roles.length<=1)return((w=e.user)==null?void 0:w.user_type)==="customer"&&!((b=(y=e.user)==null?void 0:y.available_roles)!=null&&b.includes("vendor"))?s.jsx("button",{onClick:()=>r("vendor"),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium w-full",children:"Become a Vendor"}):(console.log(" RoleSwitcher: Not showing button - insufficient roles"),console.log("Available roles:",(g=e.user)==null?void 0:g.available_roles),s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Role switching not available"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current role: ",((x=e.user)==null?void 0:x.user_type)||"Unknown"]})]}));const i=window.location.pathname.startsWith("/vendor"),a=i?"vendor":"customer",o=a==="vendor"?"customer":"vendor";return console.log(" Current page context:",{isOnVendorPage:i,currentRole:a,otherRole:o}),o?(console.log(" RoleSwitcher: Showing button for role switch to:",o),s.jsx("button",{onClick:()=>r(o),className:"px-6 py-3 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white rounded-xl hover:from-indigo-600 hover:via-purple-600 hover:to-pink-600 transition-all duration-300 text-sm font-semibold w-full shadow-lg hover:shadow-xl transform hover:scale-105 border border-white/20 backdrop-blur-sm",children:s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Switch to ",o==="customer"?"Customer":"Vendor"]})})):(console.log(" RoleSwitcher: No other role found"),s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"No other roles available"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current role: ",((j=e.user)==null?void 0:j.user_type)||"Unknown"]})]}))}function pK(){const[e,t]=_.useState(""),[n,r]=_.useState(""),[i,a]=_.useState(!1),[o,l]=_.useState(!1),[d,h]=_.useState(""),[f,u]=_.useState(""),[m,p]=_.useState(!1),[w,y]=_.useState(!1);_.useEffect(()=>{b()},[]);const b=async()=>{p(!1),y(!1)},g=async()=>{if(h(""),u(""),e.length<6){h("Password must be at least 6 characters long");return}if(e!==n){h("Passwords do not match");return}l(!0);try{const x=await Uc.setupPassword(e);x.success?(u("Password set successfully! You can now login with email and password."),p(!1),t(""),r("")):h(x.error||"Failed to setup password")}catch{h("Failed to setup password. Please try again.")}finally{l(!1)}};return!m||!w?null:s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Set Up Password for Traditional Login"}),s.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"You signed up with Google. Set up a password to also login with email and password."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(_e,{type:i?"text":"password",value:e,onChange:x=>t(x.target.value),placeholder:"Enter password (min 6 characters)",className:"pr-10 bg-white",size:"sm"}),s.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsx(_e,{type:"password",value:n,onChange:x=>r(x.target.value),placeholder:"Confirm password",className:"bg-white",size:"sm"}),d&&s.jsx("p",{className:"text-red-600 text-sm",children:d}),f&&s.jsx("p",{className:"text-green-600 text-sm",children:f}),s.jsx(se,{onClick:g,disabled:!e||!n||o,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:o?"Setting up...":"Set Password"})]})]})]})})}const gK=[{icon:jT,label:"My Orders",path:"/orders"},{icon:cr,label:"Wishlist",path:"/wishlist"},{icon:Li,label:"Personal Information",path:"/profile-edit"},{icon:Qn,label:"Privacy & Security",path:"/privacy"}],vK=()=>{const e=lt(),{logout:t,state:n,login:r}=Fn(),{navigateWithAuth:i}=po(),[a,o]=_.useState(null),[l,d]=_.useState(!0),[h,f]=_.useState("");_.useEffect(()=>{u()},[]);const u=async()=>{try{if(!await Ce.getToken()){i("/profile");return}const{response:y,data:b}=await Ve("/profile/");if(!y.ok&&b&&console.log("Profile API response:",b),y.status===401){console.log("Profile endpoint returned 401, using stored user data");const g=await Ce.getUser();if(g){o({email:g.email||g.username||"User",avatar:"/placeholder-avatar.jpg"});return}else{i("/profile");return}}if(!y.ok)throw new Error("Failed to fetch profile");if(n.user){const g={...n.user,available_roles:b.available_roles||n.user.available_roles,user_type:b.user_type||n.user.user_type},x=await Ce.getToken();await r(g,x)}o({email:b.email,avatar:b.profile_picture?b.profile_picture.startsWith("http")?b.profile_picture:`${Qe}media/${b.profile_picture}`:"/placeholder-avatar.jpg"})}catch(w){f(w.message),console.error("Error fetching profile:",w)}finally{d(!1)}},m=async()=>{try{await Ve("/logout/",{method:"POST"})}catch(w){console.error("Logout error:",w)}finally{await t(),e("/login")}},p=async w=>{if(w)try{const y=new FormData;y.append("profile_picture",w);const{response:b,data:g}=await Ve("/profile/upload-picture/",{method:"POST",body:y});b.ok&&g&&o(x=>({...x,avatar:g.profile_picture}))}catch(y){console.error("Profile image upload error:",y)}};return l?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):h||!a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:h||"Failed to load profile"}),s.jsx(se,{onClick:()=>e("/login"),children:"Go to Login"})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex flex-col items-center pt-6 pb-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden mb-3 cursor-pointer hover:bg-gray-300 transition-colors",onClick:()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=y=>{var g;const b=(g=y.target.files)==null?void 0:g[0];b&&p(b)},w.click()},children:a.avatar&&a.avatar!=="/placeholder-avatar.jpg"?s.jsx("img",{src:a.avatar,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-600 font-semibold text-lg",children:a.email?a.email.charAt(0).toUpperCase():"U"})}),s.jsx(se,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=y=>{var g;const b=(g=y.target.files)==null?void 0:g[0];b&&p(b)},w.click()},children:s.jsx(Si,{className:"h-3 w-3"})})]}),s.jsx("p",{className:"text-gray-800 text-base font-medium",children:a.email})]})}),s.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-100 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2 mb-1",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Account Type"]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Switch between your Customer and Vendor accounts"}),s.jsx(iL,{})]}),s.jsxs(se,{variant:"outline",className:"w-full flex items-center justify-center py-4 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:m,children:[s.jsx(Jb,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium",children:"Logout"})]})]}),s.jsx(pK,{}),s.jsxs(De,{children:[s.jsx(kt,{className:"pb-3",children:s.jsx(Et,{className:"text-base",children:"Account"})}),s.jsx($e,{className:"space-y-1",children:gK.map((w,y)=>{const b=w.icon;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>i(w.path),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:s.jsx(b,{className:"h-4 w-4 text-primary"})}),s.jsx("span",{className:"font-medium text-sm",children:w.label})]}),s.jsx("div",{className:"text-gray-400",children:""})]},y)})})]})]}),s.jsx(h_,{}),s.jsx(jn,{})]})};var xK="Label",aL=_.forwardRef((e,t)=>s.jsx(ut.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));aL.displayName=xK;var oL=aL;const yK=Nh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ve=_.forwardRef(({className:e,...t},n)=>s.jsx(oL,{ref:n,className:at(yK(),e),...t}));ve.displayName=oL.displayName;const Gs=_.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:at("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Gs.displayName="Textarea";const bK=()=>{const e=lt(),{toast:t}=ts(),[n,r]=_.useState(!1),[i,a]=_.useState(!0),[o,l]=_.useState(!1),[d,h]=_.useState({username:"",email:"",phone_number:"",address:"",date_of_birth:"",profile_picture:null});_.useEffect(()=>{f()},[]);const f=async()=>{try{const w=await Ce.getToken();if(!w){e("/login");return}const y=await fetch(Qe+"profile/",{headers:{Authorization:`Token ${w}`,"ngrok-skip-browser-warning":"true"}});if(!y.ok)throw new Error("Failed to fetch profile");const b=await y.json();h({username:b.username||"",email:b.email||"",phone_number:b.phone_number||"",address:b.address||"",date_of_birth:b.date_of_birth||"",profile_picture:b.profile_picture?b.profile_picture.startsWith("http")?b.profile_picture:`${Qe}media/${b.profile_picture}`:null})}catch(w){console.error("Error fetching profile:",w),t({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{a(!1)}},u=async()=>{l(!0);try{const w=await Ce.getToken();if(!w)return;if((await fetch(Qe+"profile/update/",{method:"PUT",headers:{Authorization:`Token ${w}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({username:d.username,phone_number:d.phone_number,address:d.address,date_of_birth:d.date_of_birth||null})})).ok)r(!1),t({title:"Success",description:"Profile updated successfully!"});else throw new Error("Failed to update profile")}catch(w){console.error("Error saving profile:",w),t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}finally{l(!1)}},m=async w=>{if(w)try{const y=await Ce.getToken();if(!y)return;const b=new FormData;b.append("profile_picture",w);const g=await fetch(Qe+"profile/upload-picture/",{method:"POST",headers:{Authorization:`Token ${y}`,"ngrok-skip-browser-warning":"true"},body:b});if(g.ok){const x=await g.json();h(j=>({...j,profile_picture:x.profile_picture})),t({title:"Success",description:"Profile picture updated successfully!"})}else throw new Error("Failed to upload image")}catch(y){console.error("Profile image upload error:",y),t({title:"Error",description:"Failed to upload profile picture",variant:"destructive"})}},p=(w,y)=>{h(b=>({...b,[w]:y}))};return i?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-100 sticky top-0 z-30",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/profile"),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("h1",{className:"text-lg font-semibold",children:"Personal Information"})]}),s.jsx(se,{onClick:()=>n?u():r(!0),size:"sm",className:"bg-blue-600 hover:bg-blue-700",disabled:o,children:n?s.jsxs(s.Fragment,{children:[s.jsx(ad,{className:"h-4 w-4 mr-2"}),o?"Saving...":"Save"]}):s.jsxs(s.Fragment,{children:[s.jsx(kh,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),s.jsx("div",{className:"p-4 pb-20",children:s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs(Et,{className:"flex items-center gap-2",children:[s.jsx(Li,{className:"h-5 w-5"}),"Profile Information"]})}),s.jsxs($e,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center overflow-hidden ${n?"cursor-pointer hover:bg-gray-200":""}`,onClick:n?()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=y=>{var g;const b=(g=y.target.files)==null?void 0:g[0];b&&m(b)},w.click()}:void 0,children:d.profile_picture?s.jsx("img",{src:d.profile_picture,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-600 font-semibold text-2xl",children:d.username?d.username.charAt(0).toUpperCase():"U"})}),n&&s.jsx(se,{size:"sm",className:"absolute -bottom-1 -right-1 w-8 h-8 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const w=document.createElement("input");w.type="file",w.accept="image/*",w.onchange=y=>{var g;const b=(g=y.target.files)==null?void 0:g[0];b&&m(b)},w.click()},children:s.jsx(Si,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n?"Click to change profile picture":"Profile Picture"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"username",children:"Username"}),s.jsx(_e,{id:"username",value:d.username,onChange:w=>p("username",w.target.value),disabled:!n,className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"email",children:"Email"}),s.jsx(_e,{id:"email",type:"email",value:d.email,disabled:!0,className:"mt-1 bg-gray-50"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"phone",children:"Phone Number"}),s.jsx(_e,{id:"phone",value:d.phone_number,onChange:w=>p("phone_number",w.target.value),disabled:!n,className:"mt-1",placeholder:"Enter your phone number"})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"address",children:"Address"}),s.jsx(Gs,{id:"address",value:d.address,onChange:w=>p("address",w.target.value),disabled:!n,className:"mt-1",placeholder:"Enter your address",rows:3})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"dob",children:"Date of Birth"}),s.jsx(_e,{id:"dob",type:"date",value:d.date_of_birth||"",onChange:w=>p("date_of_birth",w.target.value||null),disabled:!n,className:"mt-1"})]})]})]})]})}),s.jsx(jn,{})]})},wK=()=>{const e=lt(),{toast:t}=ts(),[n,r]=_.useState(!0),[i,a]=_.useState(""),[o,l]=_.useState(!1),[d,h]=_.useState(""),[f,u]=_.useState(!1);_.useEffect(()=>{(async()=>{try{const w=await Ce.getToken();if(!w){e("/login");return}const y=await fetch(Qe+"profile/",{headers:{Authorization:`Token ${w}`,"ngrok-skip-browser-warning":"true"}});if(!y.ok)throw new Error("Failed to fetch profile");const b=await y.json(),g=(b==null?void 0:b.plain_password)||"";a(g)}catch(w){console.error(w)}})()},[]);const m=async()=>{if(!d){t({title:"Error",description:"New password is required",variant:"destructive"});return}u(!0);try{const p=await Ce.getToken();if(!p){t({title:"Error",description:"You are not authenticated. Please log in.",variant:"destructive"}),e("/login");return}const w=await fetch(Qe+"change-password/simple/",{method:"POST",headers:{Authorization:`Token ${p}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({new_password:d})});if(!w.ok){const b=await w.json();throw new Error(b.error||"Failed to change password")}const y=await w.json();await Ce.setAuth(y.token,await Ce.getUser()),t({title:"Success",description:"Password changed successfully"}),a(d),h(""),l(!1)}catch(p){t({title:"Error",description:p instanceof Error?p.message:"Failed to change password",variant:"destructive"})}finally{u(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center gap-3 p-4",children:[s.jsx(se,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Privacy & Security"})]})}),s.jsx("div",{className:"p-4 space-y-6 pb-20",children:s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Qn,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"font-semibold",children:"Password"})]}),o?s.jsxs("div",{className:"space-y-4",children:[s.jsx(ve,{children:"New Password"}),s.jsx(_e,{type:"text",value:d,onChange:p=>h(p.target.value),placeholder:"Enter new password"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{onClick:m,disabled:f,children:f?"Saving...":"Save"}),s.jsx(se,{variant:"outline",onClick:()=>{l(!1),h("")},disabled:f,children:"Cancel"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx(ve,{children:"Your Password"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(_e,{type:n?"text":"password",value:i,disabled:!0,className:"bg-gray-100"}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>r(!n),children:n?s.jsx(Yb,{className:"h-4 w-4"}):s.jsx(en,{className:"h-4 w-4"})})]}),s.jsx(se,{onClick:()=>l(!0),disabled:f,children:"Change Password"})]})]})}),s.jsx(jn,{})]})};function _K(){const e=lt();return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 max-w-4xl mx-auto",children:[s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full hover:bg-gray-100",children:s.jsx(Ut,{className:"h-5 w-5 text-gray-800"})}),s.jsxs("h1",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(Qn,{className:"h-5 w-5 text-blue-600"}),"Privacy Policy"]}),s.jsx("div",{className:"w-10"})]})}),s.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[s.jsxs(De,{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx(Qn,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Privacy Policy"}),s.jsxs("p",{className:"text-gray-600",children:["Last updated: ",new Date().toLocaleDateString()]})]}),s.jsx("div",{className:"prose prose-sm max-w-none",children:s.jsx("p",{className:"text-gray-700 leading-relaxed",children:"At Ezeyway, we are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our marketplace platform and services."})})]}),s.jsxs(De,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(en,{className:"h-5 w-5 text-blue-600"}),"Information We Collect"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Personal Information"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 ml-4",children:[s.jsx("li",{children:"Name, email address, phone number"}),s.jsx("li",{children:"Delivery address and billing information"}),s.jsx("li",{children:"Profile picture and account preferences"}),s.jsx("li",{children:"Payment information (processed securely by third-party providers)"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Usage Information"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 ml-4",children:[s.jsx("li",{children:"Device information and IP address"}),s.jsx("li",{children:"Location data (with your permission)"}),s.jsx("li",{children:"App usage patterns and preferences"}),s.jsx("li",{children:"Search queries and product interactions"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Vendor Information"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 ml-4",children:[s.jsx("li",{children:"Business name, registration details, and tax information"}),s.jsx("li",{children:"Product listings, descriptions, and images"}),s.jsx("li",{children:"Bank account details for payments"}),s.jsx("li",{children:"Business location and operating hours"})]})]})]})]}),s.jsxs(De,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(zp,{className:"h-5 w-5 text-blue-600"}),"How We Use Your Information"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Service Provision"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Process orders and payments"}),s.jsx("li",{children:"Facilitate delivery services"}),s.jsx("li",{children:"Provide customer support"}),s.jsx("li",{children:"Manage user accounts"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Platform Improvement"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Analyze usage patterns"}),s.jsx("li",{children:"Improve app functionality"}),s.jsx("li",{children:"Personalize user experience"}),s.jsx("li",{children:"Develop new features"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Communication"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Send order updates"}),s.jsx("li",{children:"Notify about promotions"}),s.jsx("li",{children:"Provide important announcements"}),s.jsx("li",{children:"Respond to inquiries"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Legal Compliance"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Comply with regulations"}),s.jsx("li",{children:"Prevent fraud and abuse"}),s.jsx("li",{children:"Resolve disputes"}),s.jsx("li",{children:"Enforce terms of service"})]})]})]})]}),s.jsxs(De,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(t1,{className:"h-5 w-5 text-blue-600"}),"Information Sharing and Disclosure"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("p",{className:"text-blue-800 font-medium mb-2",children:"We do not sell your personal information to third parties."}),s.jsx("p",{className:"text-blue-700 text-sm",children:"We may share information only in the following circumstances:"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"With Vendors"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Order details and delivery information to fulfill your purchases"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Service Providers"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Payment processors, delivery partners, and technical service providers"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Legal Requirements"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"When required by law, court order, or government regulations"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Business Transfers"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"In case of merger, acquisition, or sale of business assets"})]})]})]})]}),s.jsxs(De,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(t1,{className:"h-5 w-5 text-green-600"}),"Data Security"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Technical Safeguards"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"SSL/TLS encryption for data transmission"}),s.jsx("li",{children:"Secure data storage with encryption"}),s.jsx("li",{children:"Regular security audits and updates"}),s.jsx("li",{children:"Access controls and authentication"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Operational Safeguards"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Limited employee access to personal data"}),s.jsx("li",{children:"Regular staff training on privacy"}),s.jsx("li",{children:"Incident response procedures"}),s.jsx("li",{children:"Data backup and recovery systems"})]})]})]})]}),s.jsxs(De,{className:"p-6",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(bi,{className:"h-5 w-5 text-purple-600"}),"Your Privacy Rights"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Access & Control"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"View your personal information"}),s.jsx("li",{children:"Update or correct your data"}),s.jsx("li",{children:"Delete your account"}),s.jsx("li",{children:"Export your data"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:"Communication Preferences"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1 text-sm",children:[s.jsx("li",{children:"Opt-out of marketing emails"}),s.jsx("li",{children:"Manage push notifications"}),s.jsx("li",{children:"Control location sharing"}),s.jsx("li",{children:"Adjust privacy settings"})]})]})]})]})]})]})}function jK(){const e=lt(),[t,n]=_.useState(1),[r,i]=_.useState(""),[a,o]=_.useState(""),[l,d]=_.useState(""),[h,f]=_.useState(""),[u,m]=_.useState(""),[p,w]=_.useState(""),[y,b]=_.useState(!1),[g,x]=_.useState(!1),[j,N]=_.useState(""),[S,C]=_.useState(!1),T=async()=>{var E,F,O;if(h!==u){N("Passwords do not match");return}x(!0),N("");try{const M=await fetch(Qe+"register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,email:l,password:h,user_type:"customer",phone_number:a})}),Z=await M.json();if(!M.ok){const X=((E=Z.username)==null?void 0:E[0])||((F=Z.email)==null?void 0:F[0])||Z.message||((O=Object.values(Z)[0])==null?void 0:O[0])||"Registration failed";throw new Error(X)}n(2)}catch(M){N(M.message)}finally{x(!1)}},A=E=>{w(E),E.length===6&&I(E)},I=async E=>{x(!0),N("");try{const F=await fetch(Qe+"verify-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,otp:E})}),O=await F.json();if(!F.ok)throw new Error(O.error||"Verification failed");localStorage.setItem("token",O.token),e("/home")}catch(F){N(F.message)}finally{x(!1)}},P=async()=>{x(!0),N("");try{const E=await fetch(Qe+"send-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})}),F=await E.json();if(!E.ok)throw new Error(F.error||"Failed to resend OTP");N("OTP resent successfully")}catch(E){N(E.message)}finally{x(!1)}},R=()=>{e("/login")};return s.jsx("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"w-full max-w-80 mx-auto px-4",children:[t===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:ua,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customer Signup"})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(_e,{type:"text",value:r,onChange:E=>i(E.target.value),placeholder:"Full Name",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(_e,{type:"tel",value:a,onChange:E=>o(E.target.value),placeholder:"Phone Number",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(_e,{type:"email",value:l,onChange:E=>d(E.target.value),placeholder:"Email Address",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"relative",children:[s.jsx(_e,{type:y?"text":"password",value:h,onChange:E=>f(E.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>b(!y),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsx(_e,{type:"password",value:u,onChange:E=>m(E.target.value),placeholder:"Confirm Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"flex items-start space-x-2 w-80",children:[s.jsx("input",{type:"checkbox",id:"agreeToTerms",checked:S,onChange:E=>C(E.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 mt-1"}),s.jsxs("label",{htmlFor:"agreeToTerms",className:"text-sm text-gray-700",children:["I agree to the"," ",s.jsx("button",{type:"button",onClick:()=>e("/privacy-policy"),className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})," ","and Terms & Conditions"]})]}),j&&s.jsx("p",{className:"text-red-600 text-center",children:j}),s.jsx(se,{onClick:T,disabled:!r||!a||!l||!h||!u||h!==u||!S||g,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:g?"Creating Account...":"Sign Up"})]}),s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:R,className:"text-blue-600 hover:text-blue-700 text-sm",children:"Already have an account? Login"})})]}),t===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:ua,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Email"}),s.jsxs("p",{className:"text-gray-600 mt-2",children:["Code sent to ",l]})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(_e,{type:"text",value:p,onChange:E=>A(E.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest w-80"}),g&&s.jsx("div",{className:"text-center text-blue-600",children:"Verifying..."}),j&&s.jsx("p",{className:"text-red-600 text-center",children:j}),s.jsx("button",{onClick:()=>n(1),className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Change details"}),s.jsx("button",{onClick:P,disabled:g,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend code"})]})]})]})})})}function NK(){const e=lt(),[t,n]=_.useState(""),r=o=>{o.preventDefault(),e("/login")},i=()=>{e("/login")},a=()=>{console.log("Resend link clicked")};return s.jsx("div",{className:"min-h-screen flex items-end justify-center bg-cover bg-center bg-no-repeat p-4 pb-12",style:{backgroundImage:"url(/images/forgot.png)"},children:s.jsxs("div",{className:"w-full max-w-sm bg-white rounded-lg shadow-lg p-4",style:{backgroundColor:"#856043"},children:[s.jsx("h2",{className:"text-xl font-bold text-white text-center mb-5",children:"Forgot Password"}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"email",className:"text-white font-medium",children:"Email or Phone Number"}),s.jsx(_e,{id:"email",type:"text",value:t,onChange:o=>n(o.target.value),placeholder:"Enter your email or phone",className:"mt-1 w-full rounded-md border-gray-300 focus:border-white focus:ring-white text-gray-900"})]}),s.jsx(se,{onClick:r,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Submit"}),s.jsx(se,{onClick:a,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Resend Link"}),s.jsx(se,{onClick:i,className:"w-full bg-[#a67c5b] text-white hover:bg-[#b88f6e] font-semibold transition-colors",children:"Back to Login"})]})]})})}var p_="Radio",[SK,lL]=_n(p_),[kK,CK]=SK(p_),cL=_.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:d,form:h,...f}=e,[u,m]=_.useState(null),p=jt(t,b=>m(b)),w=_.useRef(!1),y=u?h||!!u.closest("form"):!0;return s.jsxs(kK,{scope:n,checked:i,disabled:o,children:[s.jsx(ut.button,{type:"button",role:"radio","aria-checked":i,"data-state":fL(i),"data-disabled":o?"":void 0,disabled:o,value:l,...f,ref:p,onClick:Ke(e.onClick,b=>{i||d==null||d(),y&&(w.current=b.isPropagationStopped(),w.current||b.stopPropagation())})}),y&&s.jsx(hL,{control:u,bubbles:!w.current,name:r,value:l,checked:i,required:a,disabled:o,form:h,style:{transform:"translateX(-100%)"}})]})});cL.displayName=p_;var dL="RadioIndicator",uL=_.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...i}=e,a=CK(dL,n);return s.jsx(hn,{present:r||a.checked,children:s.jsx(ut.span,{"data-state":fL(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});uL.displayName=dL;var EK="RadioBubbleInput",hL=_.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...i},a)=>{const o=_.useRef(null),l=jt(o,a),d=sg(n),h=Hp(t);return _.useEffect(()=>{const f=o.current;if(!f)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(d!==n&&p){const w=new Event("click",{bubbles:r});p.call(f,n),f.dispatchEvent(w)}},[d,n,r]),s.jsx(ut.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});hL.displayName=EK;function fL(e){return e?"checked":"unchecked"}var TK=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pg="RadioGroup",[PK,aae]=_n(pg,[fd,lL]),mL=fd(),pL=lL(),[AK,OK]=PK(pg),gL=_.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:d,dir:h,loop:f=!0,onValueChange:u,...m}=e,p=mL(n),w=hd(h),[y,b]=ei({prop:a,defaultProp:i??null,onChange:u,caller:pg});return s.jsx(AK,{scope:n,name:r,required:o,disabled:l,value:y,onValueChange:b,children:s.jsx(_w,{asChild:!0,...p,orientation:d,dir:w,loop:f,children:s.jsx(ut.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":l?"":void 0,dir:w,...m,ref:t})})})});gL.displayName=pg;var vL="RadioGroupItem",xL=_.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...i}=e,a=OK(vL,n),o=a.disabled||r,l=mL(n),d=pL(n),h=_.useRef(null),f=jt(t,h),u=a.value===i.value,m=_.useRef(!1);return _.useEffect(()=>{const p=y=>{TK.includes(y.key)&&(m.current=!0)},w=()=>m.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",w)}},[]),s.jsx(jw,{asChild:!0,...l,focusable:!o,active:u,children:s.jsx(cL,{disabled:o,required:a.required,checked:u,...d,...i,name:a.name,ref:f,onCheck:()=>a.onValueChange(i.value),onKeyDown:Ke(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Ke(i.onFocus,()=>{var p;m.current&&((p=h.current)==null||p.click())})})})});xL.displayName=vL;var RK="RadioGroupIndicator",yL=_.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,i=pL(n);return s.jsx(uL,{...i,...r,ref:t})});yL.displayName=RK;var bL=gL,wL=xL,LK=yL;const _L=_.forwardRef(({className:e,...t},n)=>s.jsx(bL,{className:at("grid gap-2",e),...t,ref:n}));_L.displayName=bL.displayName;const d0=_.forwardRef(({className:e,...t},n)=>s.jsx(wL,{ref:n,className:at("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(LK,{className:"flex items-center justify-center",children:s.jsx(yT,{className:"h-2.5 w-2.5 fill-current text-current"})})}));d0.displayName=wL.displayName;var IK="Separator",pk="horizontal",MK=["horizontal","vertical"],jL=_.forwardRef((e,t)=>{const{decorative:n,orientation:r=pk,...i}=e,a=DK(r)?r:pk,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(ut.div,{"data-orientation":a,...l,...i,ref:t})});jL.displayName=IK;function DK(e){return MK.includes(e)}var NL=jL;const Pi=_.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},i)=>s.jsx(NL,{ref:i,decorative:n,orientation:t,className:at("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Pi.displayName=NL.displayName;function FK(e,t){const n=_.useRef(t);_.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function $K(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const BK=1;function zK(e){return Object.freeze({__version:BK,map:e})}function g_(e,t){return Object.freeze({...e,...t})}const SL=_.createContext(null),kL=SL.Provider;function v_(){const e=_.useContext(SL);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function CL(e){function t(n,r){const{instance:i,context:a}=e(n).current;return _.useImperativeHandle(r,()=>i),n.children==null?null:Ae.createElement(kL,{value:a},n.children)}return _.forwardRef(t)}function VK(e){function t(n,r){const{instance:i}=e(n).current;return _.useImperativeHandle(r,()=>i),null}return _.forwardRef(t)}function EL(e,t){const n=_.useRef();_.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function x_(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}var u0={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(Oi,function(n){var r="1.9.4";function i(c){var v,k,$,K;for(k=1,$=arguments.length;k<$;k++){K=arguments[k];for(v in K)c[v]=K[v]}return c}var a=Object.create||function(){function c(){}return function(v){return c.prototype=v,new c}}();function o(c,v){var k=Array.prototype.slice;if(c.bind)return c.bind.apply(c,k.call(arguments,1));var $=k.call(arguments,2);return function(){return c.apply(v,$.length?$.concat(k.call(arguments)):arguments)}}var l=0;function d(c){return"_leaflet_id"in c||(c._leaflet_id=++l),c._leaflet_id}function h(c,v,k){var $,K,te,fe;return fe=function(){$=!1,K&&(te.apply(k,K),K=!1)},te=function(){$?K=arguments:(c.apply(k,arguments),setTimeout(fe,v),$=!0)},te}function f(c,v,k){var $=v[1],K=v[0],te=$-K;return c===$&&k?c:((c-K)%te+te)%te+K}function u(){return!1}function m(c,v){if(v===!1)return c;var k=Math.pow(10,v===void 0?6:v);return Math.round(c*k)/k}function p(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function w(c){return p(c).split(/\s+/)}function y(c,v){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?a(c.options):{});for(var k in v)c.options[k]=v[k];return c.options}function b(c,v,k){var $=[];for(var K in c)$.push(encodeURIComponent(k?K.toUpperCase():K)+"="+encodeURIComponent(c[K]));return(!v||v.indexOf("?")===-1?"?":"&")+$.join("&")}var g=/\{ *([\w_ -]+) *\}/g;function x(c,v){return c.replace(g,function(k,$){var K=v[$];if(K===void 0)throw new Error("No value provided for variable "+k);return typeof K=="function"&&(K=K(v)),K})}var j=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function N(c,v){for(var k=0;k<c.length;k++)if(c[k]===v)return k;return-1}var S="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function C(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var T=0;function A(c){var v=+new Date,k=Math.max(0,16-(v-T));return T=v+k,window.setTimeout(c,k)}var I=window.requestAnimationFrame||C("RequestAnimationFrame")||A,P=window.cancelAnimationFrame||C("CancelAnimationFrame")||C("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function R(c,v,k){if(k&&I===A)c.call(v);else return I.call(window,o(c,v))}function E(c){c&&P.call(window,c)}var F={__proto__:null,extend:i,create:a,bind:o,get lastId(){return l},stamp:d,throttle:h,wrapNum:f,falseFn:u,formatNum:m,trim:p,splitWords:w,setOptions:y,getParamString:b,template:x,isArray:j,indexOf:N,emptyImageUrl:S,requestFn:I,cancelFn:P,requestAnimFrame:R,cancelAnimFrame:E};function O(){}O.extend=function(c){var v=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},k=v.__super__=this.prototype,$=a(k);$.constructor=v,v.prototype=$;for(var K in this)Object.prototype.hasOwnProperty.call(this,K)&&K!=="prototype"&&K!=="__super__"&&(v[K]=this[K]);return c.statics&&i(v,c.statics),c.includes&&(M(c.includes),i.apply(null,[$].concat(c.includes))),i($,c),delete $.statics,delete $.includes,$.options&&($.options=k.options?a(k.options):{},i($.options,c.options)),$._initHooks=[],$.callInitHooks=function(){if(!this._initHooksCalled){k.callInitHooks&&k.callInitHooks.call(this),this._initHooksCalled=!0;for(var te=0,fe=$._initHooks.length;te<fe;te++)$._initHooks[te].call(this)}},v},O.include=function(c){var v=this.prototype.options;return i(this.prototype,c),c.options&&(this.prototype.options=v,this.mergeOptions(c.options)),this},O.mergeOptions=function(c){return i(this.prototype.options,c),this},O.addInitHook=function(c){var v=Array.prototype.slice.call(arguments,1),k=typeof c=="function"?c:function(){this[c].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(k),this};function M(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=j(c)?c:[c];for(var v=0;v<c.length;v++)c[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(c,v,k){if(typeof c=="object")for(var $ in c)this._on($,c[$],v);else{c=w(c);for(var K=0,te=c.length;K<te;K++)this._on(c[K],v,k)}return this},off:function(c,v,k){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var $ in c)this._off($,c[$],v);else{c=w(c);for(var K=arguments.length===1,te=0,fe=c.length;te<fe;te++)K?this._off(c[te]):this._off(c[te],v,k)}return this},_on:function(c,v,k,$){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(c,v,k)===!1){k===this&&(k=void 0);var K={fn:v,ctx:k};$&&(K.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(K)}},_off:function(c,v,k){var $,K,te;if(this._events&&($=this._events[c],!!$)){if(arguments.length===1){if(this._firingCount)for(K=0,te=$.length;K<te;K++)$[K].fn=u;delete this._events[c];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var fe=this._listens(c,v,k);if(fe!==!1){var Ne=$[fe];this._firingCount&&(Ne.fn=u,this._events[c]=$=$.slice()),$.splice(fe,1)}}},fire:function(c,v,k){if(!this.listens(c,k))return this;var $=i({},v,{type:c,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var K=this._events[c];if(K){this._firingCount=this._firingCount+1||1;for(var te=0,fe=K.length;te<fe;te++){var Ne=K[te],Te=Ne.fn;Ne.once&&this.off(c,Te,Ne.ctx),Te.call(Ne.ctx||this,$)}this._firingCount--}}return k&&this._propagateEvent($),this},listens:function(c,v,k,$){typeof c!="string"&&console.warn('"string" type argument expected');var K=v;typeof v!="function"&&($=!!v,K=void 0,k=void 0);var te=this._events&&this._events[c];if(te&&te.length&&this._listens(c,K,k)!==!1)return!0;if($){for(var fe in this._eventParents)if(this._eventParents[fe].listens(c,v,k,$))return!0}return!1},_listens:function(c,v,k){if(!this._events)return!1;var $=this._events[c]||[];if(!v)return!!$.length;k===this&&(k=void 0);for(var K=0,te=$.length;K<te;K++)if($[K].fn===v&&$[K].ctx===k)return K;return!1},once:function(c,v,k){if(typeof c=="object")for(var $ in c)this._on($,c[$],v,!0);else{c=w(c);for(var K=0,te=c.length;K<te;K++)this._on(c[K],v,k,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[d(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[d(c)],this},_propagateEvent:function(c){for(var v in this._eventParents)this._eventParents[v].fire(c.type,i({layer:c.target,propagatedFrom:c.target},c),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var X=O.extend(Z);function z(c,v,k){this.x=k?Math.round(c):c,this.y=k?Math.round(v):v}var D=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(c){return this.clone()._add(B(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(B(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new z(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new z(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(c){c=B(c);var v=c.x-this.x,k=c.y-this.y;return Math.sqrt(v*v+k*k)},equals:function(c){return c=B(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=B(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function B(c,v,k){return c instanceof z?c:j(c)?new z(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new z(c.x,c.y):new z(c,v,k)}function V(c,v){if(c)for(var k=v?[c,v]:c,$=0,K=k.length;$<K;$++)this.extend(k[$])}V.prototype={extend:function(c){var v,k;if(!c)return this;if(c instanceof z||typeof c[0]=="number"||"x"in c)v=k=B(c);else if(c=H(c),v=c.min,k=c.max,!v||!k)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=k.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(k.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(k.y,this.max.y)),this},getCenter:function(c){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var v,k;return typeof c[0]=="number"||c instanceof z?c=B(c):c=H(c),c instanceof V?(v=c.min,k=c.max):v=k=c,v.x>=this.min.x&&k.x<=this.max.x&&v.y>=this.min.y&&k.y<=this.max.y},intersects:function(c){c=H(c);var v=this.min,k=this.max,$=c.min,K=c.max,te=K.x>=v.x&&$.x<=k.x,fe=K.y>=v.y&&$.y<=k.y;return te&&fe},overlaps:function(c){c=H(c);var v=this.min,k=this.max,$=c.min,K=c.max,te=K.x>v.x&&$.x<k.x,fe=K.y>v.y&&$.y<k.y;return te&&fe},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var v=this.min,k=this.max,$=Math.abs(v.x-k.x)*c,K=Math.abs(v.y-k.y)*c;return H(B(v.x-$,v.y-K),B(k.x+$,k.y+K))},equals:function(c){return c?(c=H(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function H(c,v){return!c||c instanceof V?c:new V(c,v)}function q(c,v){if(c)for(var k=v?[c,v]:c,$=0,K=k.length;$<K;$++)this.extend(k[$])}q.prototype={extend:function(c){var v=this._southWest,k=this._northEast,$,K;if(c instanceof Y)$=c,K=c;else if(c instanceof q){if($=c._southWest,K=c._northEast,!$||!K)return this}else return c?this.extend(U(c)||W(c)):this;return!v&&!k?(this._southWest=new Y($.lat,$.lng),this._northEast=new Y(K.lat,K.lng)):(v.lat=Math.min($.lat,v.lat),v.lng=Math.min($.lng,v.lng),k.lat=Math.max(K.lat,k.lat),k.lng=Math.max(K.lng,k.lng)),this},pad:function(c){var v=this._southWest,k=this._northEast,$=Math.abs(v.lat-k.lat)*c,K=Math.abs(v.lng-k.lng)*c;return new q(new Y(v.lat-$,v.lng-K),new Y(k.lat+$,k.lng+K))},getCenter:function(){return new Y((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Y(this.getNorth(),this.getWest())},getSouthEast:function(){return new Y(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof Y||"lat"in c?c=U(c):c=W(c);var v=this._southWest,k=this._northEast,$,K;return c instanceof q?($=c.getSouthWest(),K=c.getNorthEast()):$=K=c,$.lat>=v.lat&&K.lat<=k.lat&&$.lng>=v.lng&&K.lng<=k.lng},intersects:function(c){c=W(c);var v=this._southWest,k=this._northEast,$=c.getSouthWest(),K=c.getNorthEast(),te=K.lat>=v.lat&&$.lat<=k.lat,fe=K.lng>=v.lng&&$.lng<=k.lng;return te&&fe},overlaps:function(c){c=W(c);var v=this._southWest,k=this._northEast,$=c.getSouthWest(),K=c.getNorthEast(),te=K.lat>v.lat&&$.lat<k.lat,fe=K.lng>v.lng&&$.lng<k.lng;return te&&fe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,v){return c?(c=W(c),this._southWest.equals(c.getSouthWest(),v)&&this._northEast.equals(c.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function W(c,v){return c instanceof q?c:new q(c,v)}function Y(c,v,k){if(isNaN(c)||isNaN(v))throw new Error("Invalid LatLng object: ("+c+", "+v+")");this.lat=+c,this.lng=+v,k!==void 0&&(this.alt=+k)}Y.prototype={equals:function(c,v){if(!c)return!1;c=U(c);var k=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return k<=(v===void 0?1e-9:v)},toString:function(c){return"LatLng("+m(this.lat,c)+", "+m(this.lng,c)+")"},distanceTo:function(c){return ne.distance(this,U(c))},wrap:function(){return ne.wrapLatLng(this)},toBounds:function(c){var v=180*c/40075017,k=v/Math.cos(Math.PI/180*this.lat);return W([this.lat-v,this.lng-k],[this.lat+v,this.lng+k])},clone:function(){return new Y(this.lat,this.lng,this.alt)}};function U(c,v,k){return c instanceof Y?c:j(c)&&typeof c[0]!="object"?c.length===3?new Y(c[0],c[1],c[2]):c.length===2?new Y(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new Y(c.lat,"lng"in c?c.lng:c.lon,c.alt):v===void 0?null:new Y(c,v,k)}var G={latLngToPoint:function(c,v){var k=this.projection.project(c),$=this.scale(v);return this.transformation._transform(k,$)},pointToLatLng:function(c,v){var k=this.scale(v),$=this.transformation.untransform(c,k);return this.projection.unproject($)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var v=this.projection.bounds,k=this.scale(c),$=this.transformation.transform(v.min,k),K=this.transformation.transform(v.max,k);return new V($,K)},infinite:!1,wrapLatLng:function(c){var v=this.wrapLng?f(c.lng,this.wrapLng,!0):c.lng,k=this.wrapLat?f(c.lat,this.wrapLat,!0):c.lat,$=c.alt;return new Y(k,v,$)},wrapLatLngBounds:function(c){var v=c.getCenter(),k=this.wrapLatLng(v),$=v.lat-k.lat,K=v.lng-k.lng;if($===0&&K===0)return c;var te=c.getSouthWest(),fe=c.getNorthEast(),Ne=new Y(te.lat-$,te.lng-K),Te=new Y(fe.lat-$,fe.lng-K);return new q(Ne,Te)}},ne=i({},G,{wrapLng:[-180,180],R:6371e3,distance:function(c,v){var k=Math.PI/180,$=c.lat*k,K=v.lat*k,te=Math.sin((v.lat-c.lat)*k/2),fe=Math.sin((v.lng-c.lng)*k/2),Ne=te*te+Math.cos($)*Math.cos(K)*fe*fe,Te=2*Math.atan2(Math.sqrt(Ne),Math.sqrt(1-Ne));return this.R*Te}}),J=6378137,ie={R:J,MAX_LATITUDE:85.0511287798,project:function(c){var v=Math.PI/180,k=this.MAX_LATITUDE,$=Math.max(Math.min(k,c.lat),-k),K=Math.sin($*v);return new z(this.R*c.lng*v,this.R*Math.log((1+K)/(1-K))/2)},unproject:function(c){var v=180/Math.PI;return new Y((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*v,c.x*v/this.R)},bounds:function(){var c=J*Math.PI;return new V([-c,-c],[c,c])}()};function xe(c,v,k,$){if(j(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=v,this._c=k,this._d=$}xe.prototype={transform:function(c,v){return this._transform(c.clone(),v)},_transform:function(c,v){return v=v||1,c.x=v*(this._a*c.x+this._b),c.y=v*(this._c*c.y+this._d),c},untransform:function(c,v){return v=v||1,new z((c.x/v-this._b)/this._a,(c.y/v-this._d)/this._c)}};function Se(c,v,k,$){return new xe(c,v,k,$)}var ue=i({},ne,{code:"EPSG:3857",projection:ie,transformation:function(){var c=.5/(Math.PI*ie.R);return Se(c,.5,-c,.5)}()}),he=i({},ue,{code:"EPSG:900913"});function Q(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function ye(c,v){var k="",$,K,te,fe,Ne,Te;for($=0,te=c.length;$<te;$++){for(Ne=c[$],K=0,fe=Ne.length;K<fe;K++)Te=Ne[K],k+=(K?"L":"M")+Te.x+" "+Te.y;k+=v?Ue.svg?"z":"x":""}return k||"M0 0"}var be=document.documentElement.style,ce="ActiveXObject"in window,ge=ce&&!document.addEventListener,ee="msLaunchUri"in navigator&&!("documentMode"in document),ae=fs("webkit"),oe=fs("android"),ke=fs("android 2")||fs("android 3"),de=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pe=oe&&fs("Google")&&de<537&&!("AudioNode"in window),Pe=!!window.opera,me=!ee&&fs("chrome"),we=fs("gecko")&&!ae&&!Pe&&!ce,Re=!me&&fs("safari"),Ee=fs("phantom"),qe="OTransition"in be,re=navigator.platform.indexOf("Win")===0,je=ce&&"transition"in be,Oe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ke,Ye="MozPerspective"in be,Ie=!window.L_DISABLE_3D&&(je||Oe||Ye)&&!qe&&!Ee,We=typeof orientation<"u"||fs("mobile"),At=We&&ae,ss=We&&Oe,zs=!window.PointerEvent&&window.MSPointerEvent,rn=!!(window.PointerEvent||zs),Ks="ontouchstart"in window||!!window.TouchEvent,le=!window.L_NO_TOUCH&&(Ks||rn),nt=We&&Pe,Me=We&&we,et=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tt=function(){var c=!1;try{var v=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",u,v),window.removeEventListener("testPassiveEventSupport",u,v)}catch{}return c}(),Be=function(){return!!document.createElement("canvas").getContext}(),ft=!!(document.createElementNS&&Q("svg").createSVGRect),yt=!!ft&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Dt=!ft&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var v=c.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}}(),qt=navigator.platform.indexOf("Mac")===0,ns=navigator.platform.indexOf("Linux")===0;function fs(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var Ue={ie:ce,ielt9:ge,edge:ee,webkit:ae,android:oe,android23:ke,androidStock:pe,opera:Pe,chrome:me,gecko:we,safari:Re,phantom:Ee,opera12:qe,win:re,ie3d:je,webkit3d:Oe,gecko3d:Ye,any3d:Ie,mobile:We,mobileWebkit:At,mobileWebkit3d:ss,msPointer:zs,pointer:rn,touch:le,touchNative:Ks,mobileOpera:nt,mobileGecko:Me,retina:et,passiveEvents:tt,canvas:Be,svg:ft,vml:Dt,inlineSvg:yt,mac:qt,linux:ns},Zs=Ue.msPointer?"MSPointerDown":"pointerdown",Ys=Ue.msPointer?"MSPointerMove":"pointermove",er=Ue.msPointer?"MSPointerUp":"pointerup",zn=Ue.msPointer?"MSPointerCancel":"pointercancel",Bi={touchstart:Zs,touchmove:Ys,touchend:er,touchcancel:zn},ya={touchstart:uM,touchmove:$h,touchend:$h,touchcancel:$h},ba={},H_=!1;function aM(c,v,k){return v==="touchstart"&&dM(),ya[v]?(k=ya[v].bind(this,k),c.addEventListener(Bi[v],k,!1),k):(console.warn("wrong event specified:",v),u)}function oM(c,v,k){if(!Bi[v]){console.warn("wrong event specified:",v);return}c.removeEventListener(Bi[v],k,!1)}function lM(c){ba[c.pointerId]=c}function cM(c){ba[c.pointerId]&&(ba[c.pointerId]=c)}function W_(c){delete ba[c.pointerId]}function dM(){H_||(document.addEventListener(Zs,lM,!0),document.addEventListener(Ys,cM,!0),document.addEventListener(er,W_,!0),document.addEventListener(zn,W_,!0),H_=!0)}function $h(c,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var k in ba)v.touches.push(ba[k]);v.changedTouches=[v],c(v)}}function uM(c,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&an(v),$h(c,v)}function hM(c){var v={},k,$;for($ in c)k=c[$],v[$]=k&&k.bind?k.bind(c):k;return c=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var fM=200;function mM(c,v){c.addEventListener("dblclick",v);var k=0,$;function K(te){if(te.detail!==1){$=te.detail;return}if(!(te.pointerType==="mouse"||te.sourceCapabilities&&!te.sourceCapabilities.firesTouchEvents)){var fe=X_(te);if(!(fe.some(function(Te){return Te instanceof HTMLLabelElement&&Te.attributes.for})&&!fe.some(function(Te){return Te instanceof HTMLInputElement||Te instanceof HTMLSelectElement}))){var Ne=Date.now();Ne-k<=fM?($++,$===2&&v(hM(te))):$=1,k=Ne}}}return c.addEventListener("click",K),{dblclick:v,simDblclick:K}}function pM(c,v){c.removeEventListener("dblclick",v.dblclick),c.removeEventListener("click",v.simDblclick)}var Dg=Vh(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Sd=Vh(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),G_=Sd==="webkitTransition"||Sd==="OTransition"?Sd+"End":"transitionend";function K_(c){return typeof c=="string"?document.getElementById(c):c}function kd(c,v){var k=c.style[v]||c.currentStyle&&c.currentStyle[v];if((!k||k==="auto")&&document.defaultView){var $=document.defaultView.getComputedStyle(c,null);k=$?$[v]:null}return k==="auto"?null:k}function $t(c,v,k){var $=document.createElement(c);return $.className=v||"",k&&k.appendChild($),$}function gs(c){var v=c.parentNode;v&&v.removeChild(c)}function Bh(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function Nl(c){var v=c.parentNode;v&&v.lastChild!==c&&v.appendChild(c)}function Sl(c){var v=c.parentNode;v&&v.firstChild!==c&&v.insertBefore(c,v.firstChild)}function Fg(c,v){if(c.classList!==void 0)return c.classList.contains(v);var k=zh(c);return k.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(k)}function Tt(c,v){if(c.classList!==void 0)for(var k=w(v),$=0,K=k.length;$<K;$++)c.classList.add(k[$]);else if(!Fg(c,v)){var te=zh(c);$g(c,(te?te+" ":"")+v)}}function Es(c,v){c.classList!==void 0?c.classList.remove(v):$g(c,p((" "+zh(c)+" ").replace(" "+v+" "," ")))}function $g(c,v){c.className.baseVal===void 0?c.className=v:c.className.baseVal=v}function zh(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function hr(c,v){"opacity"in c.style?c.style.opacity=v:"filter"in c.style&&gM(c,v)}function gM(c,v){var k=!1,$="DXImageTransform.Microsoft.Alpha";try{k=c.filters.item($)}catch{if(v===1)return}v=Math.round(v*100),k?(k.Enabled=v!==100,k.Opacity=v):c.style.filter+=" progid:"+$+"(opacity="+v+")"}function Vh(c){for(var v=document.documentElement.style,k=0;k<c.length;k++)if(c[k]in v)return c[k];return!1}function wo(c,v,k){var $=v||new z(0,0);c.style[Dg]=(Ue.ie3d?"translate("+$.x+"px,"+$.y+"px)":"translate3d("+$.x+"px,"+$.y+"px,0)")+(k?" scale("+k+")":"")}function Ms(c,v){c._leaflet_pos=v,Ue.any3d?wo(c,v):(c.style.left=v.x+"px",c.style.top=v.y+"px")}function _o(c){return c._leaflet_pos||new z(0,0)}var Cd,Ed,Bg;if("onselectstart"in document)Cd=function(){St(window,"selectstart",an)},Ed=function(){rs(window,"selectstart",an)};else{var Td=Vh(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Cd=function(){if(Td){var c=document.documentElement.style;Bg=c[Td],c[Td]="none"}},Ed=function(){Td&&(document.documentElement.style[Td]=Bg,Bg=void 0)}}function zg(){St(window,"dragstart",an)}function Vg(){rs(window,"dragstart",an)}var Uh,Ug;function qg(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(qh(),Uh=c,Ug=c.style.outlineStyle,c.style.outlineStyle="none",St(window,"keydown",qh))}function qh(){Uh&&(Uh.style.outlineStyle=Ug,Uh=void 0,Ug=void 0,rs(window,"keydown",qh))}function Z_(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Hg(c){var v=c.getBoundingClientRect();return{x:v.width/c.offsetWidth||1,y:v.height/c.offsetHeight||1,boundingClientRect:v}}var vM={__proto__:null,TRANSFORM:Dg,TRANSITION:Sd,TRANSITION_END:G_,get:K_,getStyle:kd,create:$t,remove:gs,empty:Bh,toFront:Nl,toBack:Sl,hasClass:Fg,addClass:Tt,removeClass:Es,setClass:$g,getClass:zh,setOpacity:hr,testProp:Vh,setTransform:wo,setPosition:Ms,getPosition:_o,get disableTextSelection(){return Cd},get enableTextSelection(){return Ed},disableImageDrag:zg,enableImageDrag:Vg,preventOutline:qg,restoreOutline:qh,getSizedParentNode:Z_,getScale:Hg};function St(c,v,k,$){if(v&&typeof v=="object")for(var K in v)Gg(c,K,v[K],k);else{v=w(v);for(var te=0,fe=v.length;te<fe;te++)Gg(c,v[te],k,$)}return this}var oi="_leaflet_events";function rs(c,v,k,$){if(arguments.length===1)Y_(c),delete c[oi];else if(v&&typeof v=="object")for(var K in v)Kg(c,K,v[K],k);else if(v=w(v),arguments.length===2)Y_(c,function(Ne){return N(v,Ne)!==-1});else for(var te=0,fe=v.length;te<fe;te++)Kg(c,v[te],k,$);return this}function Y_(c,v){for(var k in c[oi]){var $=k.split(/\d/)[0];(!v||v($))&&Kg(c,$,null,null,k)}}var Wg={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Gg(c,v,k,$){var K=v+d(k)+($?"_"+d($):"");if(c[oi]&&c[oi][K])return this;var te=function(Ne){return k.call($||c,Ne||window.event)},fe=te;!Ue.touchNative&&Ue.pointer&&v.indexOf("touch")===0?te=aM(c,v,te):Ue.touch&&v==="dblclick"?te=mM(c,te):"addEventListener"in c?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?c.addEventListener(Wg[v]||v,te,Ue.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(te=function(Ne){Ne=Ne||window.event,Yg(c,Ne)&&fe(Ne)},c.addEventListener(Wg[v],te,!1)):c.addEventListener(v,fe,!1):c.attachEvent("on"+v,te),c[oi]=c[oi]||{},c[oi][K]=te}function Kg(c,v,k,$,K){K=K||v+d(k)+($?"_"+d($):"");var te=c[oi]&&c[oi][K];if(!te)return this;!Ue.touchNative&&Ue.pointer&&v.indexOf("touch")===0?oM(c,v,te):Ue.touch&&v==="dblclick"?pM(c,te):"removeEventListener"in c?c.removeEventListener(Wg[v]||v,te,!1):c.detachEvent("on"+v,te),c[oi][K]=null}function jo(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Zg(c){return Gg(c,"wheel",jo),this}function Pd(c){return St(c,"mousedown touchstart dblclick contextmenu",jo),c._leaflet_disable_click=!0,this}function an(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function No(c){return an(c),jo(c),this}function X_(c){if(c.composedPath)return c.composedPath();for(var v=[],k=c.target;k;)v.push(k),k=k.parentNode;return v}function J_(c,v){if(!v)return new z(c.clientX,c.clientY);var k=Hg(v),$=k.boundingClientRect;return new z((c.clientX-$.left)/k.x-v.clientLeft,(c.clientY-$.top)/k.y-v.clientTop)}var xM=Ue.linux&&Ue.chrome?window.devicePixelRatio:Ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Q_(c){return Ue.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/xM:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Yg(c,v){var k=v.relatedTarget;if(!k)return!0;try{for(;k&&k!==c;)k=k.parentNode}catch{return!1}return k!==c}var yM={__proto__:null,on:St,off:rs,stopPropagation:jo,disableScrollPropagation:Zg,disableClickPropagation:Pd,preventDefault:an,stop:No,getPropagationPath:X_,getMousePosition:J_,getWheelDelta:Q_,isExternalTarget:Yg,addListener:St,removeListener:rs},ej=X.extend({run:function(c,v,k,$){this.stop(),this._el=c,this._inProgress=!0,this._duration=k||.25,this._easeOutPower=1/Math.max($||.5,.2),this._startPos=_o(c),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(c){var v=+new Date-this._startTime,k=this._duration*1e3;v<k?this._runFrame(this._easeOut(v/k),c):(this._runFrame(1),this._complete())},_runFrame:function(c,v){var k=this._startPos.add(this._offset.multiplyBy(c));v&&k._round(),Ms(this._el,k),this.fire("step")},_complete:function(){E(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),It=X.extend({options:{crs:ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,v){v=y(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(U(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Sd&&Ue.any3d&&!Ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),St(this._proxy,G_,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,v,k){if(v=v===void 0?this._zoom:this._limitZoom(v),c=this._limitCenter(U(c),v,this.options.maxBounds),k=k||{},this._stop(),this._loaded&&!k.reset&&k!==!0){k.animate!==void 0&&(k.zoom=i({animate:k.animate},k.zoom),k.pan=i({animate:k.animate,duration:k.duration},k.pan));var $=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,v,k.zoom):this._tryAnimatedPan(c,k.pan);if($)return clearTimeout(this._sizeTimer),this}return this._resetView(c,v,k.pan&&k.pan.noMoveStart),this},setZoom:function(c,v){return this._loaded?this.setView(this.getCenter(),c,{zoom:v}):(this._zoom=c,this)},zoomIn:function(c,v){return c=c||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,v)},zoomOut:function(c,v){return c=c||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,v)},setZoomAround:function(c,v,k){var $=this.getZoomScale(v),K=this.getSize().divideBy(2),te=c instanceof z?c:this.latLngToContainerPoint(c),fe=te.subtract(K).multiplyBy(1-1/$),Ne=this.containerPointToLatLng(K.add(fe));return this.setView(Ne,v,{zoom:k})},_getBoundsCenterZoom:function(c,v){v=v||{},c=c.getBounds?c.getBounds():W(c);var k=B(v.paddingTopLeft||v.padding||[0,0]),$=B(v.paddingBottomRight||v.padding||[0,0]),K=this.getBoundsZoom(c,!1,k.add($));if(K=typeof v.maxZoom=="number"?Math.min(v.maxZoom,K):K,K===1/0)return{center:c.getCenter(),zoom:K};var te=$.subtract(k).divideBy(2),fe=this.project(c.getSouthWest(),K),Ne=this.project(c.getNorthEast(),K),Te=this.unproject(fe.add(Ne).divideBy(2).add(te),K);return{center:Te,zoom:K}},fitBounds:function(c,v){if(c=W(c),!c.isValid())throw new Error("Bounds are not valid.");var k=this._getBoundsCenterZoom(c,v);return this.setView(k.center,k.zoom,v)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,v){return this.setView(c,this._zoom,{pan:v})},panBy:function(c,v){if(c=B(c).round(),v=v||{},!c.x&&!c.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ej,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){Tt(this._mapPane,"leaflet-pan-anim");var k=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,k,v.duration||.25,v.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,v,k){if(k=k||{},k.animate===!1||!Ue.any3d)return this.setView(c,v,k);this._stop();var $=this.project(this.getCenter()),K=this.project(c),te=this.getSize(),fe=this._zoom;c=U(c),v=v===void 0?fe:v;var Ne=Math.max(te.x,te.y),Te=Ne*this.getZoomScale(fe,v),Fe=K.distanceTo($)||1,it=1.42,vt=it*it;function Ot(Ds){var sf=Ds?-1:1,o5=Ds?Te:Ne,l5=Te*Te-Ne*Ne+sf*vt*vt*Fe*Fe,c5=2*o5*vt*Fe,ov=l5/c5,Lj=Math.sqrt(ov*ov+1)-ov,d5=Lj<1e-9?-18:Math.log(Lj);return d5}function Nn(Ds){return(Math.exp(Ds)-Math.exp(-Ds))/2}function Xs(Ds){return(Math.exp(Ds)+Math.exp(-Ds))/2}function mr(Ds){return Nn(Ds)/Xs(Ds)}var Vn=Ot(0);function Al(Ds){return Ne*(Xs(Vn)/Xs(Vn+it*Ds))}function n5(Ds){return Ne*(Xs(Vn)*mr(Vn+it*Ds)-Nn(Vn))/vt}function r5(Ds){return 1-Math.pow(1-Ds,1.5)}var i5=Date.now(),Oj=(Ot(1)-Vn)/it,a5=k.duration?1e3*k.duration:1e3*Oj*.8;function Rj(){var Ds=(Date.now()-i5)/a5,sf=r5(Ds)*Oj;Ds<=1?(this._flyToFrame=R(Rj,this),this._move(this.unproject($.add(K.subtract($).multiplyBy(n5(sf)/Fe)),fe),this.getScaleZoom(Ne/Al(sf),fe),{flyTo:!0})):this._move(c,v)._moveEnd(!0)}return this._moveStart(!0,k.noMoveStart),Rj.call(this),this},flyToBounds:function(c,v){var k=this._getBoundsCenterZoom(c,v);return this.flyTo(k.center,k.zoom,v)},setMaxBounds:function(c){return c=W(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var v=this.options.minZoom;return this.options.minZoom=c,this._loaded&&v!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var v=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&v!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,v){this._enforcingBounds=!0;var k=this.getCenter(),$=this._limitCenter(k,this._zoom,W(c));return k.equals($)||this.panTo($,v),this._enforcingBounds=!1,this},panInside:function(c,v){v=v||{};var k=B(v.paddingTopLeft||v.padding||[0,0]),$=B(v.paddingBottomRight||v.padding||[0,0]),K=this.project(this.getCenter()),te=this.project(c),fe=this.getPixelBounds(),Ne=H([fe.min.add(k),fe.max.subtract($)]),Te=Ne.getSize();if(!Ne.contains(te)){this._enforcingBounds=!0;var Fe=te.subtract(Ne.getCenter()),it=Ne.extend(te).getSize().subtract(Te);K.x+=Fe.x<0?-it.x:it.x,K.y+=Fe.y<0?-it.y:it.y,this.panTo(this.unproject(K),v),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=i({animate:!1,pan:!0},c===!0?{animate:!0}:c);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var k=this.getSize(),$=v.divideBy(2).round(),K=k.divideBy(2).round(),te=$.subtract(K);return!te.x&&!te.y?this:(c.animate&&c.pan?this.panBy(te):(c.pan&&this._rawPanBy(te),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:k}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=i({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),k=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,k,c):navigator.geolocation.getCurrentPosition(v,k,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var v=c.code,k=c.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+k+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var v=c.coords.latitude,k=c.coords.longitude,$=new Y(v,k),K=$.toBounds(c.coords.accuracy*2),te=this._locateOptions;if(te.setView){var fe=this.getBoundsZoom(K);this.setView($,te.maxZoom?Math.min(fe,te.maxZoom):fe)}var Ne={latlng:$,bounds:K,timestamp:c.timestamp};for(var Te in c.coords)typeof c.coords[Te]=="number"&&(Ne[Te]=c.coords[Te]);this.fire("locationfound",Ne)}},addHandler:function(c,v){if(!v)return this;var k=this[c]=new v(this);return this._handlers.push(k),this.options[c]&&k.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),gs(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(E(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)gs(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,v){var k="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),$=$t("div",k,v||this._mapPane);return c&&(this._panes[c]=$),$},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),v=this.unproject(c.getBottomLeft()),k=this.unproject(c.getTopRight());return new q(v,k)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,v,k){c=W(c),k=B(k||[0,0]);var $=this.getZoom()||0,K=this.getMinZoom(),te=this.getMaxZoom(),fe=c.getNorthWest(),Ne=c.getSouthEast(),Te=this.getSize().subtract(k),Fe=H(this.project(Ne,$),this.project(fe,$)).getSize(),it=Ue.any3d?this.options.zoomSnap:1,vt=Te.x/Fe.x,Ot=Te.y/Fe.y,Nn=v?Math.max(vt,Ot):Math.min(vt,Ot);return $=this.getScaleZoom(Nn,$),it&&($=Math.round($/(it/100))*(it/100),$=v?Math.ceil($/it)*it:Math.floor($/it)*it),Math.max(K,Math.min(te,$))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,v){var k=this._getTopLeftPoint(c,v);return new V(k,k.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,v){var k=this.options.crs;return v=v===void 0?this._zoom:v,k.scale(c)/k.scale(v)},getScaleZoom:function(c,v){var k=this.options.crs;v=v===void 0?this._zoom:v;var $=k.zoom(c*k.scale(v));return isNaN($)?1/0:$},project:function(c,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(U(c),v)},unproject:function(c,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(B(c),v)},layerPointToLatLng:function(c){var v=B(c).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(c){var v=this.project(U(c))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(U(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(W(c))},distance:function(c,v){return this.options.crs.distance(U(c),U(v))},containerPointToLayerPoint:function(c){return B(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return B(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var v=this.containerPointToLayerPoint(B(c));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(c)))},mouseEventToContainerPoint:function(c){return J_(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var v=this._container=K_(c);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");St(v,"scroll",this._onScroll,this),this._containerId=d(v)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue.any3d,Tt(c,"leaflet-container"+(Ue.touch?" leaflet-touch":"")+(Ue.retina?" leaflet-retina":"")+(Ue.ielt9?" leaflet-oldie":"")+(Ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=kd(c,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ms(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Tt(c.markerPane,"leaflet-zoom-hide"),Tt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,v,k){Ms(this._mapPane,new z(0,0));var $=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var K=this._zoom!==v;this._moveStart(K,k)._move(c,v)._moveEnd(K),this.fire("viewreset"),$&&this.fire("load")},_moveStart:function(c,v){return c&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(c,v,k,$){v===void 0&&(v=this._zoom);var K=this._zoom!==v;return this._zoom=v,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),$?k&&k.pinch&&this.fire("zoom",k):((K||k&&k.pinch)&&this.fire("zoom",k),this.fire("move",k)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return E(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Ms(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[d(this._container)]=this;var v=c?rs:St;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),Ue.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){E(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,v){for(var k=[],$,K=v==="mouseout"||v==="mouseover",te=c.target||c.srcElement,fe=!1;te;){if($=this._targets[d(te)],$&&(v==="click"||v==="preclick")&&this._draggableMoved($)){fe=!0;break}if($&&$.listens(v,!0)&&(K&&!Yg(te,c)||(k.push($),K))||te===this._container)break;te=te.parentNode}return!k.length&&!fe&&!K&&this.listens(v,!0)&&(k=[this]),k},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var v=c.target||c.srcElement;if(!(!this._loaded||v._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(v))){var k=c.type;k==="mousedown"&&qg(v),this._fireDOMEvent(c,k)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,v,k){if(c.type==="click"){var $=i({},c);$.type="preclick",this._fireDOMEvent($,$.type,k)}var K=this._findEventTargets(c,v);if(k){for(var te=[],fe=0;fe<k.length;fe++)k[fe].listens(v,!0)&&te.push(k[fe]);K=te.concat(K)}if(K.length){v==="contextmenu"&&an(c);var Ne=K[0],Te={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var Fe=Ne.getLatLng&&(!Ne._radius||Ne._radius<=10);Te.containerPoint=Fe?this.latLngToContainerPoint(Ne.getLatLng()):this.mouseEventToContainerPoint(c),Te.layerPoint=this.containerPointToLayerPoint(Te.containerPoint),Te.latlng=Fe?Ne.getLatLng():this.layerPointToLatLng(Te.layerPoint)}for(fe=0;fe<K.length;fe++)if(K[fe].fire(v,Te,!0),Te.originalEvent._stopped||K[fe].options.bubblingMouseEvents===!1&&N(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,v=this._handlers.length;c<v;c++)this._handlers[c].disable()},whenReady:function(c,v){return this._loaded?c.call(v||this,{target:this}):this.on("load",c,v),this},_getMapPanePos:function(){return _o(this._mapPane)||new z(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,v){var k=c&&v!==void 0?this._getNewPixelOrigin(c,v):this.getPixelOrigin();return k.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,v){var k=this.getSize()._divideBy(2);return this.project(c,v)._subtract(k)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,v,k){var $=this._getNewPixelOrigin(k,v);return this.project(c,v)._subtract($)},_latLngBoundsToNewLayerBounds:function(c,v,k){var $=this._getNewPixelOrigin(k,v);return H([this.project(c.getSouthWest(),v)._subtract($),this.project(c.getNorthWest(),v)._subtract($),this.project(c.getSouthEast(),v)._subtract($),this.project(c.getNorthEast(),v)._subtract($)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,v,k){if(!k)return c;var $=this.project(c,v),K=this.getSize().divideBy(2),te=new V($.subtract(K),$.add(K)),fe=this._getBoundsOffset(te,k,v);return Math.abs(fe.x)<=1&&Math.abs(fe.y)<=1?c:this.unproject($.add(fe),v)},_limitOffset:function(c,v){if(!v)return c;var k=this.getPixelBounds(),$=new V(k.min.add(c),k.max.add(c));return c.add(this._getBoundsOffset($,v))},_getBoundsOffset:function(c,v,k){var $=H(this.project(v.getNorthEast(),k),this.project(v.getSouthWest(),k)),K=$.min.subtract(c.min),te=$.max.subtract(c.max),fe=this._rebound(K.x,-te.x),Ne=this._rebound(K.y,-te.y);return new z(fe,Ne)},_rebound:function(c,v){return c+v>0?Math.round(c-v)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(v))},_limitZoom:function(c){var v=this.getMinZoom(),k=this.getMaxZoom(),$=Ue.any3d?this.options.zoomSnap:1;return $&&(c=Math.round(c/$)*$),Math.max(v,Math.min(k,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Es(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,v){var k=this._getCenterOffset(c)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(k)?!1:(this.panBy(k,v),!0)},_createAnimProxy:function(){var c=this._proxy=$t("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(v){var k=Dg,$=this._proxy.style[k];wo(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),$===this._proxy.style[k]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){gs(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),v=this.getZoom();wo(this._proxy,this.project(c,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,v,k){if(this._animatingZoom)return!0;if(k=k||{},!this._zoomAnimated||k.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var $=this.getZoomScale(v),K=this._getCenterOffset(c)._divideBy(1-1/$);return k.animate!==!0&&!this.getSize().contains(K)?!1:(R(function(){this._moveStart(!0,k.noMoveStart||!1)._animateZoom(c,v,!0)},this),!0)},_animateZoom:function(c,v,k,$){this._mapPane&&(k&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=v,Tt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:v,noUpdate:$}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Es(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bM(c,v){return new It(c,v)}var Pr=O.extend({options:{position:"topright"},initialize:function(c){y(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var v=this._map;return v&&v.removeControl(this),this.options.position=c,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var v=this._container=this.onAdd(c),k=this.getPosition(),$=c._controlCorners[k];return Tt(v,"leaflet-control"),k.indexOf("bottom")!==-1?$.insertBefore(v,$.firstChild):$.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(gs(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),Ad=function(c){return new Pr(c)};It.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},v="leaflet-",k=this._controlContainer=$t("div",v+"control-container",this._container);function $(K,te){var fe=v+K+" "+v+te;c[K+te]=$t("div",fe,k)}$("top","left"),$("top","right"),$("bottom","left"),$("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)gs(this._controlCorners[c]);gs(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var tj=Pr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,v,k,$){return k<$?-1:$<k?1:0}},initialize:function(c,v,k){y(this,k),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var $ in c)this._addLayer(c[$],$);for($ in v)this._addLayer(v[$],$,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return Pr.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,v){return this._addLayer(c,v),this._map?this._update():this},addOverlay:function(c,v){return this._addLayer(c,v,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var v=this._getLayer(d(c));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){Tt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Tt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Es(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Es(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",v=this._container=$t("div",c),k=this.options.collapsed;v.setAttribute("aria-haspopup",!0),Pd(v),Zg(v);var $=this._section=$t("section",c+"-list");k&&(this._map.on("click",this.collapse,this),St(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var K=this._layersLink=$t("a",c+"-toggle",v);K.href="#",K.title="Layers",K.setAttribute("role","button"),St(K,{keydown:function(te){te.keyCode===13&&this._expandSafely()},click:function(te){an(te),this._expandSafely()}},this),k||this.expand(),this._baseLayersList=$t("div",c+"-base",$),this._separator=$t("div",c+"-separator",$),this._overlaysList=$t("div",c+"-overlays",$),v.appendChild($)},_getLayer:function(c){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&d(this._layers[v].layer)===c)return this._layers[v]},_addLayer:function(c,v,k){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:v,overlay:k}),this.options.sortLayers&&this._layers.sort(o(function($,K){return this.options.sortFunction($.layer,K.layer,$.name,K.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Bh(this._baseLayersList),Bh(this._overlaysList),this._layerControlInputs=[];var c,v,k,$,K=0;for(k=0;k<this._layers.length;k++)$=this._layers[k],this._addItem($),v=v||$.overlay,c=c||!$.overlay,K+=$.overlay?0:1;return this.options.hideSingleBase&&(c=c&&K>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=v&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var v=this._getLayer(d(c.target)),k=v.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;k&&this._map.fire(k,v)},_createRadioElement:function(c,v){var k='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(v?' checked="checked"':"")+"/>",$=document.createElement("div");return $.innerHTML=k,$.firstChild},_addItem:function(c){var v=document.createElement("label"),k=this._map.hasLayer(c.layer),$;c.overlay?($=document.createElement("input"),$.type="checkbox",$.className="leaflet-control-layers-selector",$.defaultChecked=k):$=this._createRadioElement("leaflet-base-layers_"+d(this),k),this._layerControlInputs.push($),$.layerId=d(c.layer),St($,"click",this._onInputClick,this);var K=document.createElement("span");K.innerHTML=" "+c.name;var te=document.createElement("span");v.appendChild(te),te.appendChild($),te.appendChild(K);var fe=c.overlay?this._overlaysList:this._baseLayersList;return fe.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,v,k,$=[],K=[];this._handlingClick=!0;for(var te=c.length-1;te>=0;te--)v=c[te],k=this._getLayer(v.layerId).layer,v.checked?$.push(k):v.checked||K.push(k);for(te=0;te<K.length;te++)this._map.hasLayer(K[te])&&this._map.removeLayer(K[te]);for(te=0;te<$.length;te++)this._map.hasLayer($[te])||this._map.addLayer($[te]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,v,k,$=this._map.getZoom(),K=c.length-1;K>=0;K--)v=c[K],k=this._getLayer(v.layerId).layer,v.disabled=k.options.minZoom!==void 0&&$<k.options.minZoom||k.options.maxZoom!==void 0&&$>k.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,St(c,"click",an),this.expand();var v=this;setTimeout(function(){rs(c,"click",an),v._preventClick=!1})}}),wM=function(c,v,k){return new tj(c,v,k)},Xg=Pr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var v="leaflet-control-zoom",k=$t("div",v+" leaflet-bar"),$=this.options;return this._zoomInButton=this._createButton($.zoomInText,$.zoomInTitle,v+"-in",k,this._zoomIn),this._zoomOutButton=this._createButton($.zoomOutText,$.zoomOutTitle,v+"-out",k,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),k},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,v,k,$,K){var te=$t("a",k,$);return te.innerHTML=c,te.href="#",te.title=v,te.setAttribute("role","button"),te.setAttribute("aria-label",v),Pd(te),St(te,"click",No),St(te,"click",K,this),St(te,"click",this._refocusOnMap,this),te},_updateDisabled:function(){var c=this._map,v="leaflet-disabled";Es(this._zoomInButton,v),Es(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Tt(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Tt(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});It.mergeOptions({zoomControl:!0}),It.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xg,this.addControl(this.zoomControl))});var _M=function(c){return new Xg(c)},sj=Pr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var v="leaflet-control-scale",k=$t("div",v),$=this.options;return this._addScales($,v+"-line",k),c.on($.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),k},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,v,k){c.metric&&(this._mScale=$t("div",v,k)),c.imperial&&(this._iScale=$t("div",v,k))},_update:function(){var c=this._map,v=c.getSize().y/2,k=c.distance(c.containerPointToLatLng([0,v]),c.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(k)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var v=this._getRoundNum(c),k=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,k,v/c)},_updateImperial:function(c){var v=c*3.2808399,k,$,K;v>5280?(k=v/5280,$=this._getRoundNum(k),this._updateScale(this._iScale,$+" mi",$/k)):(K=this._getRoundNum(v),this._updateScale(this._iScale,K+" ft",K/v))},_updateScale:function(c,v,k){c.style.width=Math.round(this.options.maxWidth*k)+"px",c.innerHTML=v},_getRoundNum:function(c){var v=Math.pow(10,(Math.floor(c)+"").length-1),k=c/v;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:1,v*k}}),jM=function(c){return new sj(c)},NM='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Jg=Pr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ue.inlineSvg?NM+" ":"")+"Leaflet</a>"},initialize:function(c){y(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=$t("div","leaflet-control-attribution"),Pd(this._container);for(var v in c._layers)c._layers[v].getAttribution&&this.addAttribution(c._layers[v].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var v in this._attributions)this._attributions[v]&&c.push(v);var k=[];this.options.prefix&&k.push(this.options.prefix),c.length&&k.push(c.join(", ")),this._container.innerHTML=k.join(' <span aria-hidden="true">|</span> ')}}});It.mergeOptions({attributionControl:!0}),It.addInitHook(function(){this.options.attributionControl&&new Jg().addTo(this)});var SM=function(c){return new Jg(c)};Pr.Layers=tj,Pr.Zoom=Xg,Pr.Scale=sj,Pr.Attribution=Jg,Ad.layers=wM,Ad.zoom=_M,Ad.scale=jM,Ad.attribution=SM;var li=O.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});li.addTo=function(c,v){return c.addHandler(v,this),this};var kM={Events:Z},nj=Ue.touch?"touchstart mousedown":"mousedown",wa=X.extend({options:{clickTolerance:3},initialize:function(c,v,k,$){y(this,$),this._element=c,this._dragStartTarget=v||c,this._preventOutline=k},enable:function(){this._enabled||(St(this._dragStartTarget,nj,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(wa._dragging===this&&this.finishDrag(!0),rs(this._dragStartTarget,nj,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Fg(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){wa._dragging===this&&this.finishDrag();return}if(!(wa._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(wa._dragging=this,this._preventOutline&&qg(this._element),zg(),Cd(),!this._moving)){this.fire("down");var v=c.touches?c.touches[0]:c,k=Z_(this._element);this._startPoint=new z(v.clientX,v.clientY),this._startPos=_o(this._element),this._parentScale=Hg(k);var $=c.type==="mousedown";St(document,$?"mousemove":"touchmove",this._onMove,this),St(document,$?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var v=c.touches&&c.touches.length===1?c.touches[0]:c,k=new z(v.clientX,v.clientY)._subtract(this._startPoint);!k.x&&!k.y||Math.abs(k.x)+Math.abs(k.y)<this.options.clickTolerance||(k.x/=this._parentScale.x,k.y/=this._parentScale.y,an(c),this._moved||(this.fire("dragstart"),this._moved=!0,Tt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Tt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(k),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Ms(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Es(document.body,"leaflet-dragging"),this._lastTarget&&(Es(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rs(document,"mousemove touchmove",this._onMove,this),rs(document,"mouseup touchend touchcancel",this._onUp,this),Vg(),Ed();var v=this._moved&&this._moving;this._moving=!1,wa._dragging=!1,v&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function rj(c,v,k){var $,K=[1,4,2,8],te,fe,Ne,Te,Fe,it,vt,Ot;for(te=0,it=c.length;te<it;te++)c[te]._code=So(c[te],v);for(Ne=0;Ne<4;Ne++){for(vt=K[Ne],$=[],te=0,it=c.length,fe=it-1;te<it;fe=te++)Te=c[te],Fe=c[fe],Te._code&vt?Fe._code&vt||(Ot=Hh(Fe,Te,vt,v,k),Ot._code=So(Ot,v),$.push(Ot)):(Fe._code&vt&&(Ot=Hh(Fe,Te,vt,v,k),Ot._code=So(Ot,v),$.push(Ot)),$.push(Te));c=$}return c}function ij(c,v){var k,$,K,te,fe,Ne,Te,Fe,it;if(!c||c.length===0)throw new Error("latlngs not passed");fr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var vt=U([0,0]),Ot=W(c),Nn=Ot.getNorthWest().distanceTo(Ot.getSouthWest())*Ot.getNorthEast().distanceTo(Ot.getNorthWest());Nn<1700&&(vt=Qg(c));var Xs=c.length,mr=[];for(k=0;k<Xs;k++){var Vn=U(c[k]);mr.push(v.project(U([Vn.lat-vt.lat,Vn.lng-vt.lng])))}for(Ne=Te=Fe=0,k=0,$=Xs-1;k<Xs;$=k++)K=mr[k],te=mr[$],fe=K.y*te.x-te.y*K.x,Te+=(K.x+te.x)*fe,Fe+=(K.y+te.y)*fe,Ne+=fe*3;Ne===0?it=mr[0]:it=[Te/Ne,Fe/Ne];var Al=v.unproject(B(it));return U([Al.lat+vt.lat,Al.lng+vt.lng])}function Qg(c){for(var v=0,k=0,$=0,K=0;K<c.length;K++){var te=U(c[K]);v+=te.lat,k+=te.lng,$++}return U([v/$,k/$])}var CM={__proto__:null,clipPolygon:rj,polygonCenter:ij,centroid:Qg};function aj(c,v){if(!v||!c.length)return c.slice();var k=v*v;return c=PM(c,k),c=TM(c,k),c}function oj(c,v,k){return Math.sqrt(Od(c,v,k,!0))}function EM(c,v,k){return Od(c,v,k)}function TM(c,v){var k=c.length,$=typeof Uint8Array<"u"?Uint8Array:Array,K=new $(k);K[0]=K[k-1]=1,ev(c,K,v,0,k-1);var te,fe=[];for(te=0;te<k;te++)K[te]&&fe.push(c[te]);return fe}function ev(c,v,k,$,K){var te=0,fe,Ne,Te;for(Ne=$+1;Ne<=K-1;Ne++)Te=Od(c[Ne],c[$],c[K],!0),Te>te&&(fe=Ne,te=Te);te>k&&(v[fe]=1,ev(c,v,k,$,fe),ev(c,v,k,fe,K))}function PM(c,v){for(var k=[c[0]],$=1,K=0,te=c.length;$<te;$++)AM(c[$],c[K])>v&&(k.push(c[$]),K=$);return K<te-1&&k.push(c[te-1]),k}var lj;function cj(c,v,k,$,K){var te=$?lj:So(c,k),fe=So(v,k),Ne,Te,Fe;for(lj=fe;;){if(!(te|fe))return[c,v];if(te&fe)return!1;Ne=te||fe,Te=Hh(c,v,Ne,k,K),Fe=So(Te,k),Ne===te?(c=Te,te=Fe):(v=Te,fe=Fe)}}function Hh(c,v,k,$,K){var te=v.x-c.x,fe=v.y-c.y,Ne=$.min,Te=$.max,Fe,it;return k&8?(Fe=c.x+te*(Te.y-c.y)/fe,it=Te.y):k&4?(Fe=c.x+te*(Ne.y-c.y)/fe,it=Ne.y):k&2?(Fe=Te.x,it=c.y+fe*(Te.x-c.x)/te):k&1&&(Fe=Ne.x,it=c.y+fe*(Ne.x-c.x)/te),new z(Fe,it,K)}function So(c,v){var k=0;return c.x<v.min.x?k|=1:c.x>v.max.x&&(k|=2),c.y<v.min.y?k|=4:c.y>v.max.y&&(k|=8),k}function AM(c,v){var k=v.x-c.x,$=v.y-c.y;return k*k+$*$}function Od(c,v,k,$){var K=v.x,te=v.y,fe=k.x-K,Ne=k.y-te,Te=fe*fe+Ne*Ne,Fe;return Te>0&&(Fe=((c.x-K)*fe+(c.y-te)*Ne)/Te,Fe>1?(K=k.x,te=k.y):Fe>0&&(K+=fe*Fe,te+=Ne*Fe)),fe=c.x-K,Ne=c.y-te,$?fe*fe+Ne*Ne:new z(K,te)}function fr(c){return!j(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function dj(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fr(c)}function uj(c,v){var k,$,K,te,fe,Ne,Te,Fe;if(!c||c.length===0)throw new Error("latlngs not passed");fr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var it=U([0,0]),vt=W(c),Ot=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Ot<1700&&(it=Qg(c));var Nn=c.length,Xs=[];for(k=0;k<Nn;k++){var mr=U(c[k]);Xs.push(v.project(U([mr.lat-it.lat,mr.lng-it.lng])))}for(k=0,$=0;k<Nn-1;k++)$+=Xs[k].distanceTo(Xs[k+1])/2;if($===0)Fe=Xs[0];else for(k=0,te=0;k<Nn-1;k++)if(fe=Xs[k],Ne=Xs[k+1],K=fe.distanceTo(Ne),te+=K,te>$){Te=(te-$)/K,Fe=[Ne.x-Te*(Ne.x-fe.x),Ne.y-Te*(Ne.y-fe.y)];break}var Vn=v.unproject(B(Fe));return U([Vn.lat+it.lat,Vn.lng+it.lng])}var OM={__proto__:null,simplify:aj,pointToSegmentDistance:oj,closestPointOnSegment:EM,clipSegment:cj,_getEdgeIntersection:Hh,_getBitCode:So,_sqClosestPointOnSegment:Od,isFlat:fr,_flat:dj,polylineCenter:uj},tv={project:function(c){return new z(c.lng,c.lat)},unproject:function(c){return new Y(c.y,c.x)},bounds:new V([-180,-90],[180,90])},sv={R:6378137,R_MINOR:6356752314245179e-9,bounds:new V([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var v=Math.PI/180,k=this.R,$=c.lat*v,K=this.R_MINOR/k,te=Math.sqrt(1-K*K),fe=te*Math.sin($),Ne=Math.tan(Math.PI/4-$/2)/Math.pow((1-fe)/(1+fe),te/2);return $=-k*Math.log(Math.max(Ne,1e-10)),new z(c.lng*v*k,$)},unproject:function(c){for(var v=180/Math.PI,k=this.R,$=this.R_MINOR/k,K=Math.sqrt(1-$*$),te=Math.exp(-c.y/k),fe=Math.PI/2-2*Math.atan(te),Ne=0,Te=.1,Fe;Ne<15&&Math.abs(Te)>1e-7;Ne++)Fe=K*Math.sin(fe),Fe=Math.pow((1-Fe)/(1+Fe),K/2),Te=Math.PI/2-2*Math.atan(te*Fe)-fe,fe+=Te;return new Y(fe*v,c.x*v/k)}},RM={__proto__:null,LonLat:tv,Mercator:sv,SphericalMercator:ie},LM=i({},ne,{code:"EPSG:3395",projection:sv,transformation:function(){var c=.5/(Math.PI*sv.R);return Se(c,.5,-c,.5)}()}),hj=i({},ne,{code:"EPSG:4326",projection:tv,transformation:Se(1/180,1,-1/180,.5)}),IM=i({},G,{projection:tv,transformation:Se(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,v){var k=v.lng-c.lng,$=v.lat-c.lat;return Math.sqrt(k*k+$*$)},infinite:!0});G.Earth=ne,G.EPSG3395=LM,G.EPSG3857=ue,G.EPSG900913=he,G.EPSG4326=hj,G.Simple=IM;var Ar=X.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[d(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[d(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var v=c.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var k=this.getEvents();v.on(k,this),this.once("remove",function(){v.off(k,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});It.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var v=d(c);return this._layers[v]?this:(this._layers[v]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var v=d(c);return this._layers[v]?(this._loaded&&c.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return d(c)in this._layers},eachLayer:function(c,v){for(var k in this._layers)c.call(v,this._layers[k]);return this},_addLayers:function(c){c=c?j(c)?c:[c]:[];for(var v=0,k=c.length;v<k;v++)this.addLayer(c[v])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[d(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var v=d(c);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,v=-1/0,k=this._getZoomSpan();for(var $ in this._zoomBoundLayers){var K=this._zoomBoundLayers[$].options;c=K.minZoom===void 0?c:Math.min(c,K.minZoom),v=K.maxZoom===void 0?v:Math.max(v,K.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=c===1/0?void 0:c,k!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var kl=Ar.extend({initialize:function(c,v){y(this,v),this._layers={};var k,$;if(c)for(k=0,$=c.length;k<$;k++)this.addLayer(c[k])},addLayer:function(c){var v=this.getLayerId(c);return this._layers[v]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var v=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(c){var v=typeof c=="number"?c:this.getLayerId(c);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var v=Array.prototype.slice.call(arguments,1),k,$;for(k in this._layers)$=this._layers[k],$[c]&&$[c].apply($,v);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,v){for(var k in this._layers)c.call(v,this._layers[k]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return d(c)}}),MM=function(c,v){return new kl(c,v)},zi=kl.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),kl.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),kl.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new q;for(var v in this._layers){var k=this._layers[v];c.extend(k.getBounds?k.getBounds():k.getLatLng())}return c}}),DM=function(c,v){return new zi(c,v)},Cl=O.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){y(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,v){var k=this._getIconUrl(c);if(!k){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var $=this._createImg(k,v&&v.tagName==="IMG"?v:null);return this._setIconStyles($,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&($.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),$},_setIconStyles:function(c,v){var k=this.options,$=k[v+"Size"];typeof $=="number"&&($=[$,$]);var K=B($),te=B(v==="shadow"&&k.shadowAnchor||k.iconAnchor||K&&K.divideBy(2,!0));c.className="leaflet-marker-"+v+" "+(k.className||""),te&&(c.style.marginLeft=-te.x+"px",c.style.marginTop=-te.y+"px"),K&&(c.style.width=K.x+"px",c.style.height=K.y+"px")},_createImg:function(c,v){return v=v||document.createElement("img"),v.src=c,v},_getIconUrl:function(c){return Ue.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function FM(c){return new Cl(c)}var Rd=Cl.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof Rd.imagePath!="string"&&(Rd.imagePath=this._detectIconPath()),(this.options.imagePath||Rd.imagePath)+Cl.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var v=function(k,$,K){var te=$.exec(k);return te&&te[K]};return c=v(c,/^url\((['"])?(.+)\1\)$/,2),c&&v(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=$t("div","leaflet-default-icon-path",document.body),v=kd(c,"background-image")||kd(c,"backgroundImage");if(document.body.removeChild(c),v=this._stripUrl(v),v)return v;var k=document.querySelector('link[href$="leaflet.css"]');return k?k.href.substring(0,k.href.length-11-1):""}}),fj=li.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new wa(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Tt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Es(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var v=this._marker,k=v._map,$=this._marker.options.autoPanSpeed,K=this._marker.options.autoPanPadding,te=_o(v._icon),fe=k.getPixelBounds(),Ne=k.getPixelOrigin(),Te=H(fe.min._subtract(Ne).add(K),fe.max._subtract(Ne).subtract(K));if(!Te.contains(te)){var Fe=B((Math.max(Te.max.x,te.x)-Te.max.x)/(fe.max.x-Te.max.x)-(Math.min(Te.min.x,te.x)-Te.min.x)/(fe.min.x-Te.min.x),(Math.max(Te.max.y,te.y)-Te.max.y)/(fe.max.y-Te.max.y)-(Math.min(Te.min.y,te.y)-Te.min.y)/(fe.min.y-Te.min.y)).multiplyBy($);k.panBy(Fe,{animate:!1}),this._draggable._newPos._add(Fe),this._draggable._startPos._add(Fe),Ms(v._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=R(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(E(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,c)))},_onDrag:function(c){var v=this._marker,k=v._shadow,$=_o(v._icon),K=v._map.layerPointToLatLng($);k&&Ms(k,$),v._latlng=K,c.latlng=K,c.oldLatLng=this._oldLatLng,v.fire("move",c).fire("drag",c)},_onDragEnd:function(c){E(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),Wh=Ar.extend({options:{icon:new Rd,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,v){y(this,v),this._latlng=U(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var v=this._latlng;return this._latlng=U(c),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),k=c.icon.createIcon(this._icon),$=!1;k!==this._icon&&(this._icon&&this._removeIcon(),$=!0,c.title&&(k.title=c.title),k.tagName==="IMG"&&(k.alt=c.alt||"")),Tt(k,v),c.keyboard&&(k.tabIndex="0",k.setAttribute("role","button")),this._icon=k,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&St(k,"focus",this._panOnFocus,this);var K=c.icon.createShadow(this._shadow),te=!1;K!==this._shadow&&(this._removeShadow(),te=!0),K&&(Tt(K,v),K.alt=""),this._shadow=K,c.opacity<1&&this._updateOpacity(),$&&this.getPane().appendChild(this._icon),this._initInteraction(),K&&te&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rs(this._icon,"focus",this._panOnFocus,this),gs(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&gs(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Ms(this._icon,c),this._shadow&&Ms(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(Tt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fj)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fj(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&hr(this._icon,c),this._shadow&&hr(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var v=this.options.icon.options,k=v.iconSize?B(v.iconSize):B(0,0),$=v.iconAnchor?B(v.iconAnchor):B(0,0);c.panInside(this._latlng,{paddingTopLeft:$,paddingBottomRight:k.subtract($)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $M(c,v){return new Wh(c,v)}var _a=Ar.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return y(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Gh=_a.extend({options:{fill:!0,radius:10},initialize:function(c,v){y(this,v),this._latlng=U(c),this._radius=this.options.radius},setLatLng:function(c){var v=this._latlng;return this._latlng=U(c),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var v=c&&c.radius||this._radius;return _a.prototype.setStyle.call(this,c),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,v=this._radiusY||c,k=this._clickTolerance(),$=[c+k,v+k];this._pxBounds=new V(this._point.subtract($),this._point.add($))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function BM(c,v){return new Gh(c,v)}var nv=Gh.extend({initialize:function(c,v,k){if(typeof v=="number"&&(v=i({},k,{radius:v})),y(this,v),this._latlng=U(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new q(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:_a.prototype.setStyle,_project:function(){var c=this._latlng.lng,v=this._latlng.lat,k=this._map,$=k.options.crs;if($.distance===ne.distance){var K=Math.PI/180,te=this._mRadius/ne.R/K,fe=k.project([v+te,c]),Ne=k.project([v-te,c]),Te=fe.add(Ne).divideBy(2),Fe=k.unproject(Te).lat,it=Math.acos((Math.cos(te*K)-Math.sin(v*K)*Math.sin(Fe*K))/(Math.cos(v*K)*Math.cos(Fe*K)))/K;(isNaN(it)||it===0)&&(it=te/Math.cos(Math.PI/180*v)),this._point=Te.subtract(k.getPixelOrigin()),this._radius=isNaN(it)?0:Te.x-k.project([Fe,c-it]).x,this._radiusY=Te.y-fe.y}else{var vt=$.unproject($.project(this._latlng).subtract([this._mRadius,0]));this._point=k.latLngToLayerPoint(this._latlng),this._radius=this._point.x-k.latLngToLayerPoint(vt).x}this._updateBounds()}});function zM(c,v,k){return new nv(c,v,k)}var Vi=_a.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,v){y(this,v),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var v=1/0,k=null,$=Od,K,te,fe=0,Ne=this._parts.length;fe<Ne;fe++)for(var Te=this._parts[fe],Fe=1,it=Te.length;Fe<it;Fe++){K=Te[Fe-1],te=Te[Fe];var vt=$(c,K,te,!0);vt<v&&(v=vt,k=$(c,K,te))}return k&&(k.distance=Math.sqrt(v)),k},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return uj(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,v){return v=v||this._defaultShape(),c=U(c),v.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new q,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return fr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var v=[],k=fr(c),$=0,K=c.length;$<K;$++)k?(v[$]=U(c[$]),this._bounds.extend(v[$])):v[$]=this._convertLatLngs(c[$]);return v},_project:function(){var c=new V;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),v=new z(c,c);this._rawPxBounds&&(this._pxBounds=new V([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(c,v,k){var $=c[0]instanceof Y,K=c.length,te,fe;if($){for(fe=[],te=0;te<K;te++)fe[te]=this._map.latLngToLayerPoint(c[te]),k.extend(fe[te]);v.push(fe)}else for(te=0;te<K;te++)this._projectLatlngs(c[te],v,k)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,k,$,K,te,fe,Ne,Te;for(k=0,K=0,te=this._rings.length;k<te;k++)for(Te=this._rings[k],$=0,fe=Te.length;$<fe-1;$++)Ne=cj(Te[$],Te[$+1],c,$,!0),Ne&&(v[K]=v[K]||[],v[K].push(Ne[0]),(Ne[1]!==Te[$+1]||$===fe-2)&&(v[K].push(Ne[1]),K++))}},_simplifyPoints:function(){for(var c=this._parts,v=this.options.smoothFactor,k=0,$=c.length;k<$;k++)c[k]=aj(c[k],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,v){var k,$,K,te,fe,Ne,Te=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(k=0,te=this._parts.length;k<te;k++)for(Ne=this._parts[k],$=0,fe=Ne.length,K=fe-1;$<fe;K=$++)if(!(!v&&$===0)&&oj(c,Ne[K],Ne[$])<=Te)return!0;return!1}});function VM(c,v){return new Vi(c,v)}Vi._flat=dj;var El=Vi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ij(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var v=Vi.prototype._convertLatLngs.call(this,c),k=v.length;return k>=2&&v[0]instanceof Y&&v[0].equals(v[k-1])&&v.pop(),v},_setLatLngs:function(c){Vi.prototype._setLatLngs.call(this,c),fr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,v=this.options.weight,k=new z(v,v);if(c=new V(c.min.subtract(k),c.max.add(k)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var $=0,K=this._rings.length,te;$<K;$++)te=rj(this._rings[$],c,!0),te.length&&this._parts.push(te)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var v=!1,k,$,K,te,fe,Ne,Te,Fe;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(te=0,Te=this._parts.length;te<Te;te++)for(k=this._parts[te],fe=0,Fe=k.length,Ne=Fe-1;fe<Fe;Ne=fe++)$=k[fe],K=k[Ne],$.y>c.y!=K.y>c.y&&c.x<(K.x-$.x)*(c.y-$.y)/(K.y-$.y)+$.x&&(v=!v);return v||Vi.prototype._containsPoint.call(this,c,!0)}});function UM(c,v){return new El(c,v)}var Ui=zi.extend({initialize:function(c,v){y(this,v),this._layers={},c&&this.addData(c)},addData:function(c){var v=j(c)?c:c.features,k,$,K;if(v){for(k=0,$=v.length;k<$;k++)K=v[k],(K.geometries||K.geometry||K.features||K.coordinates)&&this.addData(K);return this}var te=this.options;if(te.filter&&!te.filter(c))return this;var fe=Kh(c,te);return fe?(fe.feature=Xh(c),fe.defaultOptions=fe.options,this.resetStyle(fe),te.onEachFeature&&te.onEachFeature(c,fe),this.addLayer(fe)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=i({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(v){this._setLayerStyle(v,c)},this)},_setLayerStyle:function(c,v){c.setStyle&&(typeof v=="function"&&(v=v(c.feature)),c.setStyle(v))}});function Kh(c,v){var k=c.type==="Feature"?c.geometry:c,$=k?k.coordinates:null,K=[],te=v&&v.pointToLayer,fe=v&&v.coordsToLatLng||rv,Ne,Te,Fe,it;if(!$&&!k)return null;switch(k.type){case"Point":return Ne=fe($),mj(te,c,Ne,v);case"MultiPoint":for(Fe=0,it=$.length;Fe<it;Fe++)Ne=fe($[Fe]),K.push(mj(te,c,Ne,v));return new zi(K);case"LineString":case"MultiLineString":return Te=Zh($,k.type==="LineString"?0:1,fe),new Vi(Te,v);case"Polygon":case"MultiPolygon":return Te=Zh($,k.type==="Polygon"?1:2,fe),new El(Te,v);case"GeometryCollection":for(Fe=0,it=k.geometries.length;Fe<it;Fe++){var vt=Kh({geometry:k.geometries[Fe],type:"Feature",properties:c.properties},v);vt&&K.push(vt)}return new zi(K);case"FeatureCollection":for(Fe=0,it=k.features.length;Fe<it;Fe++){var Ot=Kh(k.features[Fe],v);Ot&&K.push(Ot)}return new zi(K);default:throw new Error("Invalid GeoJSON object.")}}function mj(c,v,k,$){return c?c(v,k):new Wh(k,$&&$.markersInheritOptions&&$)}function rv(c){return new Y(c[1],c[0],c[2])}function Zh(c,v,k){for(var $=[],K=0,te=c.length,fe;K<te;K++)fe=v?Zh(c[K],v-1,k):(k||rv)(c[K]),$.push(fe);return $}function iv(c,v){return c=U(c),c.alt!==void 0?[m(c.lng,v),m(c.lat,v),m(c.alt,v)]:[m(c.lng,v),m(c.lat,v)]}function Yh(c,v,k,$){for(var K=[],te=0,fe=c.length;te<fe;te++)K.push(v?Yh(c[te],fr(c[te])?0:v-1,k,$):iv(c[te],$));return!v&&k&&K.length>0&&K.push(K[0].slice()),K}function Tl(c,v){return c.feature?i({},c.feature,{geometry:v}):Xh(v)}function Xh(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var av={toGeoJSON:function(c){return Tl(this,{type:"Point",coordinates:iv(this.getLatLng(),c)})}};Wh.include(av),nv.include(av),Gh.include(av),Vi.include({toGeoJSON:function(c){var v=!fr(this._latlngs),k=Yh(this._latlngs,v?1:0,!1,c);return Tl(this,{type:(v?"Multi":"")+"LineString",coordinates:k})}}),El.include({toGeoJSON:function(c){var v=!fr(this._latlngs),k=v&&!fr(this._latlngs[0]),$=Yh(this._latlngs,k?2:v?1:0,!0,c);return v||($=[$]),Tl(this,{type:(k?"Multi":"")+"Polygon",coordinates:$})}}),kl.include({toMultiPoint:function(c){var v=[];return this.eachLayer(function(k){v.push(k.toGeoJSON(c).geometry.coordinates)}),Tl(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(c){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(c);var k=v==="GeometryCollection",$=[];return this.eachLayer(function(K){if(K.toGeoJSON){var te=K.toGeoJSON(c);if(k)$.push(te.geometry);else{var fe=Xh(te);fe.type==="FeatureCollection"?$.push.apply($,fe.features):$.push(fe)}}}),k?Tl(this,{geometries:$,type:"GeometryCollection"}):{type:"FeatureCollection",features:$}}});function pj(c,v){return new Ui(c,v)}var qM=pj,Jh=Ar.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,v,k){this._url=c,this._bounds=W(v),y(this,k)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Tt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){gs(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&Nl(this._image),this},bringToBack:function(){return this._map&&Sl(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=W(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",v=this._image=c?this._url:$t("img");if(Tt(v,"leaflet-image-layer"),this._zoomAnimated&&Tt(v,"leaflet-zoom-animated"),this.options.className&&Tt(v,this.options.className),v.onselectstart=u,v.onmousemove=u,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(c){var v=this._map.getZoomScale(c.zoom),k=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;wo(this._image,k,v)},_reset:function(){var c=this._image,v=new V(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),k=v.getSize();Ms(c,v.min),c.style.width=k.x+"px",c.style.height=k.y+"px"},_updateOpacity:function(){hr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),HM=function(c,v,k){return new Jh(c,v,k)},gj=Jh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",v=this._image=c?this._url:$t("video");if(Tt(v,"leaflet-image-layer"),this._zoomAnimated&&Tt(v,"leaflet-zoom-animated"),this.options.className&&Tt(v,this.options.className),v.onselectstart=u,v.onmousemove=u,v.onloadeddata=o(this.fire,this,"load"),c){for(var k=v.getElementsByTagName("source"),$=[],K=0;K<k.length;K++)$.push(k[K].src);this._url=k.length>0?$:[v.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var te=0;te<this._url.length;te++){var fe=$t("source");fe.src=this._url[te],v.appendChild(fe)}}});function WM(c,v,k){return new gj(c,v,k)}var vj=Jh.extend({_initImage:function(){var c=this._image=this._url;Tt(c,"leaflet-image-layer"),this._zoomAnimated&&Tt(c,"leaflet-zoom-animated"),this.options.className&&Tt(c,this.options.className),c.onselectstart=u,c.onmousemove=u}});function GM(c,v,k){return new vj(c,v,k)}var ci=Ar.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,v){c&&(c instanceof Y||j(c))?(this._latlng=U(c),y(this,v)):(y(this,c),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&hr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&hr(this._container,1),this.bringToFront(),this.options.interactive&&(Tt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(hr(this._container,0),this._removeTimeout=setTimeout(o(gs,void 0,this._container),200)):gs(this._container),this.options.interactive&&(Es(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=U(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Nl(this._container),this},bringToBack:function(){return this._map&&Sl(this._container),this},_prepareOpen:function(c){var v=this._source;if(!v._map)return!1;if(v instanceof zi){v=null;var k=this._source._layers;for(var $ in k)if(k[$]._map){v=k[$];break}if(!v)return!1;this._source=v}if(!c)if(v.getCenter)c=v.getCenter();else if(v.getLatLng)c=v.getLatLng();else if(v.getBounds)c=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")c.innerHTML=v;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),v=B(this.options.offset),k=this._getAnchor();this._zoomAnimated?Ms(this._container,c.add(k)):v=v.add(c).add(k);var $=this._containerBottom=-v.y,K=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=$+"px",this._container.style.left=K+"px"}},_getAnchor:function(){return[0,0]}});It.include({_initOverlay:function(c,v,k,$){var K=v;return K instanceof c||(K=new c($).setContent(v)),k&&K.setLatLng(k),K}}),Ar.include({_initOverlay:function(c,v,k,$){var K=k;return K instanceof c?(y(K,$),K._source=this):(K=v&&!$?v:new c($,this),K.setContent(k)),K}});var Qh=ci.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,ci.prototype.openOn.call(this,c)},onAdd:function(c){ci.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _a||this._source.on("preclick",jo))},onRemove:function(c){ci.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _a||this._source.off("preclick",jo))},getEvents:function(){var c=ci.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",v=this._container=$t("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),k=this._wrapper=$t("div",c+"-content-wrapper",v);if(this._contentNode=$t("div",c+"-content",k),Pd(v),Zg(this._contentNode),St(v,"contextmenu",jo),this._tipContainer=$t("div",c+"-tip-container",v),this._tip=$t("div",c+"-tip",this._tipContainer),this.options.closeButton){var $=this._closeButton=$t("a",c+"-close-button",v);$.setAttribute("role","button"),$.setAttribute("aria-label","Close popup"),$.href="#close",$.innerHTML='<span aria-hidden="true">&#215;</span>',St($,"click",function(K){an(K),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,v=c.style;v.width="",v.whiteSpace="nowrap";var k=c.offsetWidth;k=Math.min(k,this.options.maxWidth),k=Math.max(k,this.options.minWidth),v.width=k+1+"px",v.whiteSpace="",v.height="";var $=c.offsetHeight,K=this.options.maxHeight,te="leaflet-popup-scrolled";K&&$>K?(v.height=K+"px",Tt(c,te)):Es(c,te),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),k=this._getAnchor();Ms(this._container,v.add(k))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,v=parseInt(kd(this._container,"marginBottom"),10)||0,k=this._container.offsetHeight+v,$=this._containerWidth,K=new z(this._containerLeft,-k-this._containerBottom);K._add(_o(this._container));var te=c.layerPointToContainerPoint(K),fe=B(this.options.autoPanPadding),Ne=B(this.options.autoPanPaddingTopLeft||fe),Te=B(this.options.autoPanPaddingBottomRight||fe),Fe=c.getSize(),it=0,vt=0;te.x+$+Te.x>Fe.x&&(it=te.x+$-Fe.x+Te.x),te.x-it-Ne.x<0&&(it=te.x-Ne.x),te.y+k+Te.y>Fe.y&&(vt=te.y+k-Fe.y+Te.y),te.y-vt-Ne.y<0&&(vt=te.y-Ne.y),(it||vt)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([it,vt]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),KM=function(c,v){return new Qh(c,v)};It.mergeOptions({closePopupOnClick:!0}),It.include({openPopup:function(c,v,k){return this._initOverlay(Qh,c,v,k).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),Ar.include({bindPopup:function(c,v){return this._popup=this._initOverlay(Qh,this._popup,c,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof zi||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){No(c);var v=c.layer||c.target;if(this._popup._source===v&&!(v instanceof _a)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=v,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var ef=ci.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){ci.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){ci.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=ci.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",v=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$t("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var v,k,$=this._map,K=this._container,te=$.latLngToContainerPoint($.getCenter()),fe=$.layerPointToContainerPoint(c),Ne=this.options.direction,Te=K.offsetWidth,Fe=K.offsetHeight,it=B(this.options.offset),vt=this._getAnchor();Ne==="top"?(v=Te/2,k=Fe):Ne==="bottom"?(v=Te/2,k=0):Ne==="center"?(v=Te/2,k=Fe/2):Ne==="right"?(v=0,k=Fe/2):Ne==="left"?(v=Te,k=Fe/2):fe.x<te.x?(Ne="right",v=0,k=Fe/2):(Ne="left",v=Te+(it.x+vt.x)*2,k=Fe/2),c=c.subtract(B(v,k,!0)).add(it).add(vt),Es(K,"leaflet-tooltip-right"),Es(K,"leaflet-tooltip-left"),Es(K,"leaflet-tooltip-top"),Es(K,"leaflet-tooltip-bottom"),Tt(K,"leaflet-tooltip-"+Ne),Ms(K,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&hr(this._container,c)},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(v)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ZM=function(c,v){return new ef(c,v)};It.include({openTooltip:function(c,v,k){return this._initOverlay(ef,c,v,k).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Ar.include({bindTooltip:function(c,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ef,this._tooltip,c,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var v=c?"off":"on",k={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?k.add=this._openTooltip:(k.mouseover=this._openTooltip,k.mouseout=this.closeTooltip,k.click=this._openTooltip,this._map?this._addFocusListeners():k.add=this._addFocusListeners),this._tooltip.options.sticky&&(k.mousemove=this._moveTooltip),this[v](k),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof zi||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var v=typeof c.getElement=="function"&&c.getElement();v&&(St(v,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),St(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var v=typeof c.getElement=="function"&&c.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var v=c.latlng,k,$;this._tooltip.options.sticky&&c.originalEvent&&(k=this._map.mouseEventToContainerPoint(c.originalEvent),$=this._map.containerPointToLayerPoint(k),v=this._map.layerPointToLatLng($)),this._tooltip.setLatLng(v)}});var xj=Cl.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var v=c&&c.tagName==="DIV"?c:document.createElement("div"),k=this.options;if(k.html instanceof Element?(Bh(v),v.appendChild(k.html)):v.innerHTML=k.html!==!1?k.html:"",k.bgPos){var $=B(k.bgPos);v.style.backgroundPosition=-$.x+"px "+-$.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function YM(c){return new xj(c)}Cl.Default=Rd;var Ld=Ar.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){y(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),gs(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Nl(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Sl(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof z?c:new z(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var v=this.getPane().children,k=-c(-1/0,1/0),$=0,K=v.length,te;$<K;$++)te=v[$].style.zIndex,v[$]!==this._container&&te&&(k=c(k,+te));isFinite(k)&&(this.options.zIndex=k+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ue.ielt9){hr(this._container,this.options.opacity);var c=+new Date,v=!1,k=!1;for(var $ in this._tiles){var K=this._tiles[$];if(!(!K.current||!K.loaded)){var te=Math.min(1,(c-K.loaded)/200);hr(K.el,te),te<1?v=!0:(K.active?k=!0:this._onOpaqueTile(K),K.active=!0)}}k&&!this._noPrune&&this._pruneTiles(),v&&(E(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=$t("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,v=this.options.maxZoom;if(c!==void 0){for(var k in this._levels)k=Number(k),this._levels[k].el.children.length||k===c?(this._levels[k].el.style.zIndex=v-Math.abs(c-k),this._onUpdateLevel(k)):(gs(this._levels[k].el),this._removeTilesAtZoom(k),this._onRemoveLevel(k),delete this._levels[k]);var $=this._levels[c],K=this._map;return $||($=this._levels[c]={},$.el=$t("div","leaflet-tile-container leaflet-zoom-animated",this._container),$.el.style.zIndex=v,$.origin=K.project(K.unproject(K.getPixelOrigin()),c).round(),$.zoom=c,this._setZoomTransform($,K.getCenter(),K.getZoom()),u($.el.offsetWidth),this._onCreateLevel($)),this._level=$,$}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var c,v,k=this._map.getZoom();if(k>this.options.maxZoom||k<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)v=this._tiles[c],v.retain=v.current;for(c in this._tiles)if(v=this._tiles[c],v.current&&!v.active){var $=v.coords;this._retainParent($.x,$.y,$.z,$.z-5)||this._retainChildren($.x,$.y,$.z,$.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var v in this._tiles)this._tiles[v].coords.z===c&&this._removeTile(v)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)gs(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,v,k,$){var K=Math.floor(c/2),te=Math.floor(v/2),fe=k-1,Ne=new z(+K,+te);Ne.z=+fe;var Te=this._tileCoordsToKey(Ne),Fe=this._tiles[Te];return Fe&&Fe.active?(Fe.retain=!0,!0):(Fe&&Fe.loaded&&(Fe.retain=!0),fe>$?this._retainParent(K,te,fe,$):!1)},_retainChildren:function(c,v,k,$){for(var K=2*c;K<2*c+2;K++)for(var te=2*v;te<2*v+2;te++){var fe=new z(K,te);fe.z=k+1;var Ne=this._tileCoordsToKey(fe),Te=this._tiles[Ne];if(Te&&Te.active){Te.retain=!0;continue}else Te&&Te.loaded&&(Te.retain=!0);k+1<$&&this._retainChildren(K,te,k+1,$)}},_resetView:function(c){var v=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var v=this.options;return v.minNativeZoom!==void 0&&c<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<c?v.maxNativeZoom:c},_setView:function(c,v,k,$){var K=Math.round(v);this.options.maxZoom!==void 0&&K>this.options.maxZoom||this.options.minZoom!==void 0&&K<this.options.minZoom?K=void 0:K=this._clampZoom(K);var te=this.options.updateWhenZooming&&K!==this._tileZoom;(!$||te)&&(this._tileZoom=K,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),K!==void 0&&this._update(c),k||this._pruneTiles(),this._noPrune=!!k),this._setZoomTransforms(c,v)},_setZoomTransforms:function(c,v){for(var k in this._levels)this._setZoomTransform(this._levels[k],c,v)},_setZoomTransform:function(c,v,k){var $=this._map.getZoomScale(k,c.zoom),K=c.origin.multiplyBy($).subtract(this._map._getNewPixelOrigin(v,k)).round();Ue.any3d?wo(c.el,K,$):Ms(c.el,K)},_resetGrid:function(){var c=this._map,v=c.options.crs,k=this._tileSize=this.getTileSize(),$=this._tileZoom,K=this._map.getPixelWorldBounds(this._tileZoom);K&&(this._globalTileRange=this._pxBoundsToTileRange(K)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,v.wrapLng[0]],$).x/k.x),Math.ceil(c.project([0,v.wrapLng[1]],$).x/k.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([v.wrapLat[0],0],$).y/k.x),Math.ceil(c.project([v.wrapLat[1],0],$).y/k.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var v=this._map,k=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),$=v.getZoomScale(k,this._tileZoom),K=v.project(c,this._tileZoom).floor(),te=v.getSize().divideBy($*2);return new V(K.subtract(te),K.add(te))},_update:function(c){var v=this._map;if(v){var k=this._clampZoom(v.getZoom());if(c===void 0&&(c=v.getCenter()),this._tileZoom!==void 0){var $=this._getTiledPixelBounds(c),K=this._pxBoundsToTileRange($),te=K.getCenter(),fe=[],Ne=this.options.keepBuffer,Te=new V(K.getBottomLeft().subtract([Ne,-Ne]),K.getTopRight().add([Ne,-Ne]));if(!(isFinite(K.min.x)&&isFinite(K.min.y)&&isFinite(K.max.x)&&isFinite(K.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Fe in this._tiles){var it=this._tiles[Fe].coords;(it.z!==this._tileZoom||!Te.contains(new z(it.x,it.y)))&&(this._tiles[Fe].current=!1)}if(Math.abs(k-this._tileZoom)>1){this._setView(c,k);return}for(var vt=K.min.y;vt<=K.max.y;vt++)for(var Ot=K.min.x;Ot<=K.max.x;Ot++){var Nn=new z(Ot,vt);if(Nn.z=this._tileZoom,!!this._isValidTile(Nn)){var Xs=this._tiles[this._tileCoordsToKey(Nn)];Xs?Xs.current=!0:fe.push(Nn)}}if(fe.sort(function(Vn,Al){return Vn.distanceTo(te)-Al.distanceTo(te)}),fe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var mr=document.createDocumentFragment();for(Ot=0;Ot<fe.length;Ot++)this._addTile(fe[Ot],mr);this._level.el.appendChild(mr)}}}},_isValidTile:function(c){var v=this._map.options.crs;if(!v.infinite){var k=this._globalTileRange;if(!v.wrapLng&&(c.x<k.min.x||c.x>k.max.x)||!v.wrapLat&&(c.y<k.min.y||c.y>k.max.y))return!1}if(!this.options.bounds)return!0;var $=this._tileCoordsToBounds(c);return W(this.options.bounds).overlaps($)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var v=this._map,k=this.getTileSize(),$=c.scaleBy(k),K=$.add(k),te=v.unproject($,c.z),fe=v.unproject(K,c.z);return[te,fe]},_tileCoordsToBounds:function(c){var v=this._tileCoordsToNwSe(c),k=new q(v[0],v[1]);return this.options.noWrap||(k=this._map.wrapLatLngBounds(k)),k},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var v=c.split(":"),k=new z(+v[0],+v[1]);return k.z=+v[2],k},_removeTile:function(c){var v=this._tiles[c];v&&(gs(v.el),delete this._tiles[c],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Tt(c,"leaflet-tile");var v=this.getTileSize();c.style.width=v.x+"px",c.style.height=v.y+"px",c.onselectstart=u,c.onmousemove=u,Ue.ielt9&&this.options.opacity<1&&hr(c,this.options.opacity)},_addTile:function(c,v){var k=this._getTilePos(c),$=this._tileCoordsToKey(c),K=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(K),this.createTile.length<2&&R(o(this._tileReady,this,c,null,K)),Ms(K,k),this._tiles[$]={el:K,coords:c,current:!0},v.appendChild(K),this.fire("tileloadstart",{tile:K,coords:c})},_tileReady:function(c,v,k){v&&this.fire("tileerror",{error:v,tile:k,coords:c});var $=this._tileCoordsToKey(c);k=this._tiles[$],k&&(k.loaded=+new Date,this._map._fadeAnimated?(hr(k.el,0),E(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(k.active=!0,this._pruneTiles()),v||(Tt(k.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:k.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ue.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var v=new z(this._wrapX?f(c.x,this._wrapX):c.x,this._wrapY?f(c.y,this._wrapY):c.y);return v.z=c.z,v},_pxBoundsToTileRange:function(c){var v=this.getTileSize();return new V(c.min.unscaleBy(v).floor(),c.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function XM(c){return new Ld(c)}var Pl=Ld.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,v){this._url=c,v=y(this,v),v.detectRetina&&Ue.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,v){return this._url===c&&v===void 0&&(v=!0),this._url=c,v||this.redraw(),this},createTile:function(c,v){var k=document.createElement("img");return St(k,"load",o(this._tileOnLoad,this,v,k)),St(k,"error",o(this._tileOnError,this,v,k)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(k.referrerPolicy=this.options.referrerPolicy),k.alt="",k.src=this.getTileUrl(c),k},getTileUrl:function(c){var v={r:Ue.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var k=this._globalTileRange.max.y-c.y;this.options.tms&&(v.y=k),v["-y"]=k}return x(this._url,i(v,this.options))},_tileOnLoad:function(c,v){Ue.ielt9?setTimeout(o(c,this,null,v),0):c(null,v)},_tileOnError:function(c,v,k){var $=this.options.errorTileUrl;$&&v.getAttribute("src")!==$&&(v.src=$),c(k,v)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,v=this.options.maxZoom,k=this.options.zoomReverse,$=this.options.zoomOffset;return k&&(c=v-c),c+$},_getSubdomain:function(c){var v=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var c,v;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(v=this._tiles[c].el,v.onload=u,v.onerror=u,!v.complete)){v.src=S;var k=this._tiles[c].coords;gs(v),delete this._tiles[c],this.fire("tileabort",{tile:v,coords:k})}},_removeTile:function(c){var v=this._tiles[c];if(v)return v.el.setAttribute("src",S),Ld.prototype._removeTile.call(this,c)},_tileReady:function(c,v,k){if(!(!this._map||k&&k.getAttribute("src")===S))return Ld.prototype._tileReady.call(this,c,v,k)}});function yj(c,v){return new Pl(c,v)}var bj=Pl.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,v){this._url=c;var k=i({},this.defaultWmsParams);for(var $ in v)$ in this.options||(k[$]=v[$]);v=y(this,v);var K=v.detectRetina&&Ue.retina?2:1,te=this.getTileSize();k.width=te.x*K,k.height=te.y*K,this.wmsParams=k},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,Pl.prototype.onAdd.call(this,c)},getTileUrl:function(c){var v=this._tileCoordsToNwSe(c),k=this._crs,$=H(k.project(v[0]),k.project(v[1])),K=$.min,te=$.max,fe=(this._wmsVersion>=1.3&&this._crs===hj?[K.y,K.x,te.y,te.x]:[K.x,K.y,te.x,te.y]).join(","),Ne=Pl.prototype.getTileUrl.call(this,c);return Ne+b(this.wmsParams,Ne,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+fe},setParams:function(c,v){return i(this.wmsParams,c),v||this.redraw(),this}});function JM(c,v){return new bj(c,v)}Pl.WMS=bj,yj.wms=JM;var qi=Ar.extend({options:{padding:.1},initialize:function(c){y(this,c),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Tt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,v){var k=this._map.getZoomScale(v,this._zoom),$=this._map.getSize().multiplyBy(.5+this.options.padding),K=this._map.project(this._center,v),te=$.multiplyBy(-k).add(K).subtract(this._map._getNewPixelOrigin(c,v));Ue.any3d?wo(this._container,te,k):Ms(this._container,te)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,v=this._map.getSize(),k=this._map.containerPointToLayerPoint(v.multiplyBy(-c)).round();this._bounds=new V(k,k.add(v.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),wj=qi.extend({options:{tolerance:0},getEvents:function(){var c=qi.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");St(c,"mousemove",this._onMouseMove,this),St(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),St(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){E(this._redrawRequest),delete this._ctx,gs(this._container),rs(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var v in this._layers)c=this._layers[v],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qi.prototype._update.call(this);var c=this._bounds,v=this._container,k=c.getSize(),$=Ue.retina?2:1;Ms(v,c.min),v.width=$*k.x,v.height=$*k.y,v.style.width=k.x+"px",v.style.height=k.y+"px",Ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){qi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[d(c)]=c;var v=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var v=c._order,k=v.next,$=v.prev;k?k.prev=$:this._drawLast=$,$?$.next=k:this._drawFirst=k,delete c._order,delete this._layers[d(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var v=c.options.dashArray.split(/[, ]+/),k=[],$,K;for(K=0;K<v.length;K++){if($=Number(v[K]),isNaN($))return;k.push($)}c.options._dashArray=k}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var v=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new V,this._redrawBounds.extend(c._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(c._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var v=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,v=this._redrawBounds;if(this._ctx.save(),v){var k=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,k.x,k.y),this._ctx.clip()}this._drawing=!0;for(var $=this._drawFirst;$;$=$.next)c=$.layer,(!v||c._pxBounds&&c._pxBounds.intersects(v))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,v){if(this._drawing){var k,$,K,te,fe=c._parts,Ne=fe.length,Te=this._ctx;if(Ne){for(Te.beginPath(),k=0;k<Ne;k++){for($=0,K=fe[k].length;$<K;$++)te=fe[k][$],Te[$?"lineTo":"moveTo"](te.x,te.y);v&&Te.closePath()}this._fillStroke(Te,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var v=c._point,k=this._ctx,$=Math.max(Math.round(c._radius),1),K=(Math.max(Math.round(c._radiusY),1)||$)/$;K!==1&&(k.save(),k.scale(1,K)),k.beginPath(),k.arc(v.x,v.y/K,$,0,Math.PI*2,!1),K!==1&&k.restore(),this._fillStroke(k,c)}},_fillStroke:function(c,v){var k=v.options;k.fill&&(c.globalAlpha=k.fillOpacity,c.fillStyle=k.fillColor||k.color,c.fill(k.fillRule||"evenodd")),k.stroke&&k.weight!==0&&(c.setLineDash&&c.setLineDash(v.options&&v.options._dashArray||[]),c.globalAlpha=k.opacity,c.lineWidth=k.weight,c.strokeStyle=k.color,c.lineCap=k.lineCap,c.lineJoin=k.lineJoin,c.stroke())},_onClick:function(c){for(var v=this._map.mouseEventToLayerPoint(c),k,$,K=this._drawFirst;K;K=K.next)k=K.layer,k.options.interactive&&k._containsPoint(v)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(k))&&($=k);this._fireEvent($?[$]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,v)}},_handleMouseOut:function(c){var v=this._hoveredLayer;v&&(Es(this._container,"leaflet-interactive"),this._fireEvent([v],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,v){if(!this._mouseHoverThrottled){for(var k,$,K=this._drawFirst;K;K=K.next)k=K.layer,k.options.interactive&&k._containsPoint(v)&&($=k);$!==this._hoveredLayer&&(this._handleMouseOut(c),$&&(Tt(this._container,"leaflet-interactive"),this._fireEvent([$],c,"mouseover"),this._hoveredLayer=$)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,v,k){this._map._fireDOMEvent(v,k||v.type,c)},_bringToFront:function(c){var v=c._order;if(v){var k=v.next,$=v.prev;if(k)k.prev=$;else return;$?$.next=k:k&&(this._drawFirst=k),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(c)}},_bringToBack:function(c){var v=c._order;if(v){var k=v.next,$=v.prev;if($)$.next=k;else return;k?k.prev=$:$&&(this._drawLast=$),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(c)}}});function _j(c){return Ue.canvas?new wj(c):null}var Id=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),QM={_initContainer:function(){this._container=$t("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qi.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var v=c._container=Id("shape");Tt(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",c._path=Id("path"),v.appendChild(c._path),this._updateStyle(c),this._layers[d(c)]=c},_addPath:function(c){var v=c._container;this._container.appendChild(v),c.options.interactive&&c.addInteractiveTarget(v)},_removePath:function(c){var v=c._container;gs(v),c.removeInteractiveTarget(v),delete this._layers[d(c)]},_updateStyle:function(c){var v=c._stroke,k=c._fill,$=c.options,K=c._container;K.stroked=!!$.stroke,K.filled=!!$.fill,$.stroke?(v||(v=c._stroke=Id("stroke")),K.appendChild(v),v.weight=$.weight+"px",v.color=$.color,v.opacity=$.opacity,$.dashArray?v.dashStyle=j($.dashArray)?$.dashArray.join(" "):$.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=$.lineCap.replace("butt","flat"),v.joinstyle=$.lineJoin):v&&(K.removeChild(v),c._stroke=null),$.fill?(k||(k=c._fill=Id("fill")),K.appendChild(k),k.color=$.fillColor||$.color,k.opacity=$.fillOpacity):k&&(K.removeChild(k),c._fill=null)},_updateCircle:function(c){var v=c._point.round(),k=Math.round(c._radius),$=Math.round(c._radiusY||k);this._setPath(c,c._empty()?"M0 0":"AL "+v.x+","+v.y+" "+k+","+$+" 0,"+65535*360)},_setPath:function(c,v){c._path.v=v},_bringToFront:function(c){Nl(c._container)},_bringToBack:function(c){Sl(c._container)}},tf=Ue.vml?Id:Q,Md=qi.extend({_initContainer:function(){this._container=tf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=tf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){gs(this._container),rs(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qi.prototype._update.call(this);var c=this._bounds,v=c.getSize(),k=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,k.setAttribute("width",v.x),k.setAttribute("height",v.y)),Ms(k,c.min),k.setAttribute("viewBox",[c.min.x,c.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(c){var v=c._path=tf("path");c.options.className&&Tt(v,c.options.className),c.options.interactive&&Tt(v,"leaflet-interactive"),this._updateStyle(c),this._layers[d(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){gs(c._path),c.removeInteractiveTarget(c._path),delete this._layers[d(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var v=c._path,k=c.options;v&&(k.stroke?(v.setAttribute("stroke",k.color),v.setAttribute("stroke-opacity",k.opacity),v.setAttribute("stroke-width",k.weight),v.setAttribute("stroke-linecap",k.lineCap),v.setAttribute("stroke-linejoin",k.lineJoin),k.dashArray?v.setAttribute("stroke-dasharray",k.dashArray):v.removeAttribute("stroke-dasharray"),k.dashOffset?v.setAttribute("stroke-dashoffset",k.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),k.fill?(v.setAttribute("fill",k.fillColor||k.color),v.setAttribute("fill-opacity",k.fillOpacity),v.setAttribute("fill-rule",k.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(c,v){this._setPath(c,ye(c._parts,v))},_updateCircle:function(c){var v=c._point,k=Math.max(Math.round(c._radius),1),$=Math.max(Math.round(c._radiusY),1)||k,K="a"+k+","+$+" 0 1,0 ",te=c._empty()?"M0 0":"M"+(v.x-k)+","+v.y+K+k*2+",0 "+K+-k*2+",0 ";this._setPath(c,te)},_setPath:function(c,v){c._path.setAttribute("d",v)},_bringToFront:function(c){Nl(c._path)},_bringToBack:function(c){Sl(c._path)}});Ue.vml&&Md.include(QM);function jj(c){return Ue.svg||Ue.vml?new Md(c):null}It.include({getRenderer:function(c){var v=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var v=this._paneRenderers[c];return v===void 0&&(v=this._createRenderer({pane:c}),this._paneRenderers[c]=v),v},_createRenderer:function(c){return this.options.preferCanvas&&_j(c)||jj(c)}});var Nj=El.extend({initialize:function(c,v){El.prototype.initialize.call(this,this._boundsToLatLngs(c),v)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=W(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function e5(c,v){return new Nj(c,v)}Md.create=tf,Md.pointsToPath=ye,Ui.geometryToLayer=Kh,Ui.coordsToLatLng=rv,Ui.coordsToLatLngs=Zh,Ui.latLngToCoords=iv,Ui.latLngsToCoords=Yh,Ui.getFeature=Tl,Ui.asFeature=Xh,It.mergeOptions({boxZoom:!0});var Sj=li.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){St(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){rs(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){gs(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Cd(),zg(),this._startPoint=this._map.mouseEventToContainerPoint(c),St(document,{contextmenu:No,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=$t("div","leaflet-zoom-box",this._container),Tt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var v=new V(this._point,this._startPoint),k=v.getSize();Ms(this._box,v.min),this._box.style.width=k.x+"px",this._box.style.height=k.y+"px"},_finish:function(){this._moved&&(gs(this._box),Es(this._container,"leaflet-crosshair")),Ed(),Vg(),rs(document,{contextmenu:No,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});It.addInitHook("addHandler","boxZoom",Sj),It.mergeOptions({doubleClickZoom:!0});var kj=li.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var v=this._map,k=v.getZoom(),$=v.options.zoomDelta,K=c.originalEvent.shiftKey?k-$:k+$;v.options.doubleClickZoom==="center"?v.setZoom(K):v.setZoomAround(c.containerPoint,K)}});It.addInitHook("addHandler","doubleClickZoom",kj),It.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cj=li.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new wa(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Tt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Es(this._map._container,"leaflet-grab"),Es(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=W(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var v=this._lastTime=+new Date,k=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(k),this._times.push(v),this._prunePositions(v)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,v){return c-(c-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;c.x<v.min.x&&(c.x=this._viscousLimit(c.x,v.min.x)),c.y<v.min.y&&(c.y=this._viscousLimit(c.y,v.min.y)),c.x>v.max.x&&(c.x=this._viscousLimit(c.x,v.max.x)),c.y>v.max.y&&(c.y=this._viscousLimit(c.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,v=Math.round(c/2),k=this._initialWorldOffset,$=this._draggable._newPos.x,K=($-v+k)%c+v-k,te=($+v+k)%c-v-k,fe=Math.abs(K+k)<Math.abs(te+k)?K:te;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=fe},_onDragEnd:function(c){var v=this._map,k=v.options,$=!k.inertia||c.noInertia||this._times.length<2;if(v.fire("dragend",c),$)v.fire("moveend");else{this._prunePositions(+new Date);var K=this._lastPos.subtract(this._positions[0]),te=(this._lastTime-this._times[0])/1e3,fe=k.easeLinearity,Ne=K.multiplyBy(fe/te),Te=Ne.distanceTo([0,0]),Fe=Math.min(k.inertiaMaxSpeed,Te),it=Ne.multiplyBy(Fe/Te),vt=Fe/(k.inertiaDeceleration*fe),Ot=it.multiplyBy(-vt/2).round();!Ot.x&&!Ot.y?v.fire("moveend"):(Ot=v._limitOffset(Ot,v.options.maxBounds),R(function(){v.panBy(Ot,{duration:vt,easeLinearity:fe,noMoveStart:!0,animate:!0})}))}}});It.addInitHook("addHandler","dragging",Cj),It.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ej=li.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),St(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),rs(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,v=document.documentElement,k=c.scrollTop||v.scrollTop,$=c.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo($,k)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var v=this._panKeys={},k=this.keyCodes,$,K;for($=0,K=k.left.length;$<K;$++)v[k.left[$]]=[-1*c,0];for($=0,K=k.right.length;$<K;$++)v[k.right[$]]=[c,0];for($=0,K=k.down.length;$<K;$++)v[k.down[$]]=[0,c];for($=0,K=k.up.length;$<K;$++)v[k.up[$]]=[0,-1*c]},_setZoomDelta:function(c){var v=this._zoomKeys={},k=this.keyCodes,$,K;for($=0,K=k.zoomIn.length;$<K;$++)v[k.zoomIn[$]]=c;for($=0,K=k.zoomOut.length;$<K;$++)v[k.zoomOut[$]]=-c},_addHooks:function(){St(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){rs(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var v=c.keyCode,k=this._map,$;if(v in this._panKeys){if(!k._panAnim||!k._panAnim._inProgress)if($=this._panKeys[v],c.shiftKey&&($=B($).multiplyBy(3)),k.options.maxBounds&&($=k._limitOffset(B($),k.options.maxBounds)),k.options.worldCopyJump){var K=k.wrapLatLng(k.unproject(k.project(k.getCenter()).add($)));k.panTo(K)}else k.panBy($)}else if(v in this._zoomKeys)k.setZoom(k.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&k._popup&&k._popup.options.closeOnEscapeKey)k.closePopup();else return;No(c)}}});It.addInitHook("addHandler","keyboard",Ej),It.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Tj=li.extend({addHooks:function(){St(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){rs(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var v=Q_(c),k=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var $=Math.max(k-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),$),No(c)},_performZoom:function(){var c=this._map,v=c.getZoom(),k=this._map.options.zoomSnap||0;c._stop();var $=this._delta/(this._map.options.wheelPxPerZoomLevel*4),K=4*Math.log(2/(1+Math.exp(-Math.abs($))))/Math.LN2,te=k?Math.ceil(K/k)*k:K,fe=c._limitZoom(v+(this._delta>0?te:-te))-v;this._delta=0,this._startTime=null,fe&&(c.options.scrollWheelZoom==="center"?c.setZoom(v+fe):c.setZoomAround(this._lastMousePos,v+fe))}});It.addInitHook("addHandler","scrollWheelZoom",Tj);var t5=600;It.mergeOptions({tapHold:Ue.touchNative&&Ue.safari&&Ue.mobile,tapTolerance:15});var Pj=li.extend({addHooks:function(){St(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){rs(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var v=c.touches[0];this._startPos=this._newPos=new z(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(St(document,"touchend",an),St(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),t5),St(document,"touchend touchcancel contextmenu",this._cancel,this),St(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){rs(document,"touchend",an),rs(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),rs(document,"touchend touchcancel contextmenu",this._cancel,this),rs(document,"touchmove",this._onMove,this)},_onMove:function(c){var v=c.touches[0];this._newPos=new z(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,v){var k=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});k._simulated=!0,v.target.dispatchEvent(k)}});It.addInitHook("addHandler","tapHold",Pj),It.mergeOptions({touchZoom:Ue.touch,bounceAtZoomLimits:!0});var Aj=li.extend({addHooks:function(){Tt(this._map._container,"leaflet-touch-zoom"),St(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Es(this._map._container,"leaflet-touch-zoom"),rs(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var v=this._map;if(!(!c.touches||c.touches.length!==2||v._animatingZoom||this._zooming)){var k=v.mouseEventToContainerPoint(c.touches[0]),$=v.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(k.add($)._divideBy(2))),this._startDist=k.distanceTo($),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),St(document,"touchmove",this._onTouchMove,this),St(document,"touchend touchcancel",this._onTouchEnd,this),an(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var v=this._map,k=v.mouseEventToContainerPoint(c.touches[0]),$=v.mouseEventToContainerPoint(c.touches[1]),K=k.distanceTo($)/this._startDist;if(this._zoom=v.getScaleZoom(K,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&K<1||this._zoom>v.getMaxZoom()&&K>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,K===1)return}else{var te=k._add($)._divideBy(2)._subtract(this._centerPoint);if(K===1&&te.x===0&&te.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(te),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),E(this._animRequest);var fe=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(fe,this,!0),an(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,E(this._animRequest),rs(document,"touchmove",this._onTouchMove,this),rs(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});It.addInitHook("addHandler","touchZoom",Aj),It.BoxZoom=Sj,It.DoubleClickZoom=kj,It.Drag=Cj,It.Keyboard=Ej,It.ScrollWheelZoom=Tj,It.TapHold=Pj,It.TouchZoom=Aj,n.Bounds=V,n.Browser=Ue,n.CRS=G,n.Canvas=wj,n.Circle=nv,n.CircleMarker=Gh,n.Class=O,n.Control=Pr,n.DivIcon=xj,n.DivOverlay=ci,n.DomEvent=yM,n.DomUtil=vM,n.Draggable=wa,n.Evented=X,n.FeatureGroup=zi,n.GeoJSON=Ui,n.GridLayer=Ld,n.Handler=li,n.Icon=Cl,n.ImageOverlay=Jh,n.LatLng=Y,n.LatLngBounds=q,n.Layer=Ar,n.LayerGroup=kl,n.LineUtil=OM,n.Map=It,n.Marker=Wh,n.Mixin=kM,n.Path=_a,n.Point=z,n.PolyUtil=CM,n.Polygon=El,n.Polyline=Vi,n.Popup=Qh,n.PosAnimation=ej,n.Projection=RM,n.Rectangle=Nj,n.Renderer=qi,n.SVG=Md,n.SVGOverlay=vj,n.TileLayer=Pl,n.Tooltip=ef,n.Transformation=xe,n.Util=F,n.VideoOverlay=gj,n.bind=o,n.bounds=H,n.canvas=_j,n.circle=zM,n.circleMarker=BM,n.control=Ad,n.divIcon=YM,n.extend=i,n.featureGroup=DM,n.geoJSON=pj,n.geoJson=qM,n.gridLayer=XM,n.icon=FM,n.imageOverlay=HM,n.latLng=U,n.latLngBounds=W,n.layerGroup=MM,n.map=bM,n.marker=$M,n.point=B,n.polygon=UM,n.polyline=VM,n.popup=KM,n.rectangle=e5,n.setOptions=y,n.stamp=d,n.svg=jj,n.svgOverlay=GM,n.tileLayer=yj,n.tooltip=ZM,n.transformation=Se,n.version=r,n.videoOverlay=WM;var s5=window.L;n.noConflict=function(){return window.L=s5,this},window.L=n})})(u0,u0.exports);var vd=u0.exports;const Dh=vl(vd);function gg(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function y_(e,t){return t==null?function(r,i){const a=_.useRef();return a.current||(a.current=e(r,i)),a}:function(r,i){const a=_.useRef();a.current||(a.current=e(r,i));const o=_.useRef(r),{instance:l}=a.current;return _.useEffect(function(){o.current!==r&&(t(l,r,o.current),o.current=r)},[l,r,i]),a}}function TL(e,t){_.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var a;(a=t.layerContainer)==null||a.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function PL(e){return function(n){const r=v_(),i=e(x_(n,r),r);return FK(r.map,n.attribution),EL(i.current,n.eventHandlers),TL(i.current,r),i}}function UK(e,t){const n=_.useRef();_.useEffect(function(){if(t.pathOptions!==n.current){const i=t.pathOptions??{};e.instance.setStyle(i),n.current=i}},[e,t])}function qK(e){return function(n){const r=v_(),i=e(x_(n,r),r);return EL(i.current,n.eventHandlers),TL(i.current,r),UK(i.current,n),i}}function HK(e,t){const n=y_(e,t),r=PL(n);return CL(r)}function AL(e,t){const n=y_(e,t),r=qK(n);return CL(r)}function WK(e,t){const n=y_(e,t),r=PL(n);return VK(r)}function GK(e,t,n){const{opacity:r,zIndex:i}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),i!=null&&i!==n.zIndex&&e.setZIndex(i)}function OL(){return v_().map}function RL(e){const t=OL();return _.useEffect(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}const KK=AL(function({center:t,children:n,...r},i){const a=new vd.Circle(t,r);return gg(a,g_(i,{overlayContainer:a}))},$K);function h0(){return h0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h0.apply(this,arguments)}function ZK({bounds:e,boundsOptions:t,center:n,children:r,className:i,id:a,placeholder:o,style:l,whenReady:d,zoom:h,...f},u){const[m]=_.useState({className:i,id:a,style:l}),[p,w]=_.useState(null);_.useImperativeHandle(u,()=>(p==null?void 0:p.map)??null,[p]);const y=_.useCallback(g=>{if(g!==null&&p===null){const x=new vd.Map(g,f);n!=null&&h!=null?x.setView(n,h):e!=null&&x.fitBounds(e,t),d!=null&&x.whenReady(d),w(zK(x))}},[]);_.useEffect(()=>()=>{p==null||p.map.remove()},[p]);const b=p?Ae.createElement(kL,{value:p},r):o??null;return Ae.createElement("div",h0({},m,{ref:y}),b)}const b_=_.forwardRef(ZK),fh=HK(function({position:t,...n},r){const i=new vd.Marker(t,n);return gg(i,g_(r,{overlayContainer:i}))},function(t,n,r){n.position!==r.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),YK=AL(function({positions:t,...n},r){const i=new vd.Polyline(t,n);return gg(i,g_(r,{overlayContainer:i}))},function(t,n,r){n.positions!==r.positions&&t.setLatLngs(n.positions)}),w_=WK(function({url:t,...n},r){const i=new vd.TileLayer(t,x_(n,r));return gg(i,r)},function(t,n,r){GK(t,n,r);const{url:i}=n;i!=null&&i!==r.url&&t.setUrl(i)}),XK=Dh.divIcon({className:"custom-marker",html:'<div style="background-color: #ef4444; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]}),JK=Dh.divIcon({className:"vendor-marker",html:'<div style="background-color: #10b981; width: 24px; height: 24px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 0 8px rgba(0,0,0,0.3);"></div>',iconSize:[24,24],iconAnchor:[12,12]}),QK=({onLocationSelect:e,onClose:t,vendorLocation:n,maxRadius:r=10,vendorName:i="Vendor"})=>{const[a,o]=_.useState(null),[l,d]=_.useState(""),[h,f]=_.useState([]),[u,m]=_.useState(!0),[p,w]=_.useState(""),[y,b]=_.useState([27.7172,85.324]),g=()=>(RL({click(I){const{lat:P,lng:R}=I.latlng;N(P,R),x(P,R)}}),null),x=async(I,P)=>{try{const E=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${I}&lon=${P}&addressdetails=1`)).json();if(E.address){const F=E.address.road||E.address.neighbourhood,O=E.address.neighbourhood||E.address.suburb||E.address.city||E.address.town,M=`${F||O||"Unknown Location"}, ${E.address.city||E.address.town||E.address.state||""}`;w(M)}}catch(R){console.error("Error fetching address:",R),w(`${I.toFixed(4)}, ${P.toFixed(4)}`)}};_.useEffect(()=>{n&&b([n.lat,n.lng])},[n]);const j=(I,P,R,E)=>{const O=(R-I)*Math.PI/180,M=(E-P)*Math.PI/180,Z=Math.sin(O/2)*Math.sin(O/2)+Math.cos(I*Math.PI/180)*Math.cos(R*Math.PI/180)*Math.sin(M/2)*Math.sin(M/2);return 6371*(2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z)))},N=(I,P)=>{if(o({lat:I,lng:P}),n){const R=j(I,P,n.lat,n.lng);m(R<=r)}},S=()=>{a&&u&&e(a.lat,a.lng,p||`${a.lat.toFixed(4)}, ${a.lng.toFixed(4)}`)};_.useEffect(()=>{const I=setTimeout(()=>{l.trim()?C():f([])},300);return()=>clearTimeout(I)},[l]);const C=async()=>{if(!l.trim()){f([]);return}try{const P=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}&limit=5&addressdetails=1`)).json();f(P)}catch(I){console.error("Geocoding error:",I),f([])}},T=I=>{const P=parseFloat(I.lat),R=parseFloat(I.lon);b([P,R]),N(P,R),w(I.display_name),f([]),d("")},A=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(I=>{const{latitude:P,longitude:R}=I.coords;b([P,R]),N(P,R),x(P,R)},I=>{console.error("Geolocation error:",I)})};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[95vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Select Delivery Location"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(tn,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(_e,{placeholder:"Search for an address...",value:l,onChange:I=>d(I.target.value)}),h.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-10 max-h-32 overflow-y-auto",children:h.map((I,P)=>s.jsx("div",{className:"p-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>T(I),children:s.jsx("p",{className:"text-xs font-medium text-gray-900",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:I.display_name})},P))})]}),s.jsx(se,{onClick:A,size:"sm",variant:"outline",children:s.jsx(_T,{className:"h-4 w-4"})})]})}),s.jsx("div",{className:"h-64 rounded-lg overflow-hidden border",children:s.jsxs(b_,{center:y,zoom:13,style:{height:"100%",width:"100%"},children:[s.jsx(w_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),n&&s.jsxs(s.Fragment,{children:[s.jsx(fh,{position:[n.lat,n.lng],icon:JK}),s.jsx(KK,{center:[n.lat,n.lng],radius:r*1e3,pathOptions:{color:"#10b981",fillColor:"#10b981",fillOpacity:.1,weight:2}})]}),a&&s.jsx(fh,{position:[a.lat,a.lng],icon:XK}),s.jsx(g,{})]},`${y[0]}-${y[1]}`)}),a&&s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Selected Location:"}),s.jsx("p",{className:"text-sm text-gray-600",children:p}),n&&s.jsxs("p",{className:`text-sm mt-2 ${u?"text-green-600":"text-red-600"}`,children:["Distance from ",i,": ",j(a.lat,a.lng,n.lat,n.lng).toFixed(1),"km",!u&&` (exceeds ${r}km delivery limit)`]})]})]}),s.jsxs("div",{className:"flex gap-2 p-4 border-t flex-shrink-0",children:[s.jsx(se,{variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),s.jsx(se,{onClick:S,disabled:!a||!u,className:"flex-1",children:"Confirm Location"})]})]})})};class eZ{async getAuthHeaders(){var r;const t=await Ce.getToken(),n=await Ce.getUser();return(n==null?void 0:n.user_type)==="vendor"&&((r=n==null?void 0:n.available_roles)!=null&&r.includes("customer"))?{"Content-Type":"application/json","ngrok-skip-browser-warning":"true",...t&&{Authorization:`Token ${t}`}}:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true",...t&&{Authorization:`Token ${t}`}}}async createOrder(t){const n=await fetch(`${Qe}orders/create/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const i=await n.json();throw new Error(i.message||"Failed to create order")}const r=await n.json();return this.notifyVendorOfNewOrder(r.order),r}notifyVendorOfNewOrder(t){window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderCreated",{detail:{order:t}}))}async getOrders(){const t=await fetch(`${Qe}orders/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch orders");const n=await t.json();return n.results||n}async getOrdersPaginated(t=1,n=10){if(!await Ce.isAuthenticated())return{results:[],next:null,count:0};const i=new URLSearchParams({page:t.toString(),page_size:n.toString()}),a=await fetch(`${Qe}orders/?${i}`,{headers:await this.getAuthHeaders()});if(!a.ok){if(a.status===401)return{results:[],next:null,count:0};throw new Error("Failed to fetch orders")}return a.json()}async getOrder(t){const n=await fetch(`${Qe}orders/${t}/`,{headers:await this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch order");return n.json()}async cancelOrder(t,n="Cancelled by customer"){const r=await fetch(`${Qe}orders/${t}/cancel/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({reason:n})});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to cancel order")}return r.json()}async createReview(t,n){const r=await fetch(`${Qe}orders/${t}/review/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to create review")}return r.json()}async requestRefund(t,n){const r=await fetch(`${Qe}orders/${t}/refund/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to request refund")}return r.json()}async getPendingOrders(){const t=await fetch(`${Qe}orders/vendor/pending/`,{headers:await this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch pending orders");return t.json()}async acceptOrder(t){const n=await fetch(`${Qe}orders/${t}/accept/`,{method:"POST",headers:await this.getAuthHeaders()});if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to accept order")}const r=await n.json();return this.notifyCustomerOfOrderUpdate(r.order,"accepted"),r}notifyCustomerOfOrderUpdate(t,n){window.dispatchEvent&&window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{order:t,status:n}}))}async rejectOrder(t,n="Rejected by vendor"){const r=await fetch(`${Qe}orders/${t}/reject/`,{method:"POST",headers:await this.getAuthHeaders(),body:JSON.stringify({reason:n})});if(!r.ok){const a=await r.json();throw new Error(a.error||"Failed to reject order")}const i=await r.json();return this.notifyCustomerOfOrderUpdate(i.order,"rejected"),i}}const Jm=new eZ,tZ=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3};function sZ(){var pe,Pe;const e=lt(),{cart:t}=$n();Fn();const{toast:n}=ts(),[r,i]=_.useState("cash_on_delivery"),[a,o]=_.useState("current"),[l,d]=_.useState(null),[h,f]=_.useState("Detecting location..."),[u,m]=_.useState({lat:null,lng:null,address:""}),[p,w]=_.useState(!1),[y,b]=_.useState(null),[g,x]=_.useState({phone:"",instructions:""}),[j,N]=_.useState(null),[S,C]=_.useState("options"),[T,A]=_.useState(""),[I,P]=_.useState([]),[R,E]=_.useState(!1),[F,O]=_.useState({});_.useState({});const[M,Z]=_.useState({});_.useEffect(()=>{var Re;const me=ht.getLocation();if(me)d(me),z(me.latitude,me.longitude).then(f);else return ht.startTracking(),ht.subscribe(async qe=>{if(qe){d(qe);const re=await z(qe.latitude,qe.longitude);f(re)}});((Re=t==null?void 0:t.items)==null?void 0:Re.length)>0&&D(t.items[0].product.vendor_id),(async()=>{await Ce.getToken()&&X()})()},[t]);const X=async()=>{try{const me=await Ce.getToken(),we=await fetch(`${Qe}profile/`,{headers:{Authorization:`Token ${me}`,"ngrok-skip-browser-warning":"true"}});if(we.ok){const Re=await we.json();N(Re),x(Ee=>({...Ee,phone:Re.phone_number||""}))}}catch(me){console.error("Failed to fetch user info:",me)}},z=async(me,we)=>{try{const Ee=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${me}&lon=${we}&addressdetails=1`)).json();if(Ee.address){const qe=Ee.address.road||Ee.address.neighbourhood,re=Ee.address.neighbourhood||Ee.address.suburb||Ee.address.city||Ee.address.town;return`${qe||re||"Unknown Location"}, ${Ee.address.city||Ee.address.town||Ee.address.state||""}`}return`${me.toFixed(4)}, ${we.toFixed(4)}`}catch{return`${me.toFixed(4)}, ${we.toFixed(4)}`}},D=async me=>{try{const we=await fetch(`${Qe}vendors/${me}/`,{headers:{"ngrok-skip-browser-warning":"true"}});if(we.ok){const Re=await we.json();b(Re)}}catch(we){console.error("Failed to fetch vendor info:",we)}},B=Dn(),H=new URLSearchParams(window.location.search).get("directBuy")==="true",q=H?JSON.parse(localStorage.getItem("buyNowProduct")||"null"):null,W=(pe=B.state)!=null&&pe.directBuy?B.state:H&&q?{directBuy:!0,product:q}:null,Y=(Pe=B.state)==null?void 0:Pe.selectedItems;console.log("Checkout - Location state:",B.state),console.log("Checkout - URL params directBuy:",H),console.log("Checkout - buyNowProduct from localStorage:",q),console.log("Checkout - Final directBuyData:",W);const U=W?[{id:"direct",product:{id:W.product.id,name:W.product.name,price:W.product.price,vendor_name:W.product.vendor_name,vendor_id:W.product.vendor_id,images:W.product.images,free_delivery:W.product.free_delivery,custom_delivery_fee_enabled:W.product.custom_delivery_fee_enabled,custom_delivery_fee:W.product.custom_delivery_fee,dynamic_fields:W.product.dynamic_fields||{}},quantity:W.product.quantity,total_price:(parseFloat(W.product.price)*W.product.quantity).toString()}]:Y||(t==null?void 0:t.items)||[];console.log("Checkout - Cart items:",U),console.log("Checkout - Direct buy data:",W),console.log("Checkout - Buy now product from localStorage:",q);const G=U.reduce((me,we)=>{const Re=`${we.product.id}_${we.id||"direct"}`,qe=Object.values(M[Re]||{}).reduce((je,Oe)=>je+Oe,0)||we.quantity,re=parseFloat(we.product.price||we.total_price||0);return console.log(`Checkout - Item: ${we.product.name}, Price: ${we.product.price}, Total: ${we.total_price}, Calculated: ${re}, Quantity: ${qe}`),me+re*qe},0),J=(()=>{let me=0,we=!1;return console.log("Checkout - Calculating delivery fee for items:",U),U.forEach(Re=>{const Ee=Re.product;if(console.log("Checkout - Processing item:",{name:Ee.name,free_delivery:Ee.free_delivery,custom_delivery_fee_enabled:Ee.custom_delivery_fee_enabled,custom_delivery_fee:Ee.custom_delivery_fee}),Ee.free_delivery===!0){console.log("Checkout - Free delivery for:",Ee.name);return}else if(Ee.custom_delivery_fee_enabled===!0&&Ee.custom_delivery_fee!==null&&Ee.custom_delivery_fee!==void 0){const qe=parseFloat(Ee.custom_delivery_fee.toString());console.log("Checkout - Custom delivery fee for:",Ee.name,"Fee:",qe),me+=qe}else console.log("Checkout - Undetermined delivery fee for:",Ee.name),we=!0}),console.log("Checkout - Final delivery calculation:",{fee:me,hasUndetermined:we}),{fee:me,hasUndetermined:we}})(),ie=J.fee,xe=J.hasUndetermined,Se=G+ie,ue=me=>/^(98|97)\d{8}$/.test(me.replace(/\s+/g,"")),he=(me,we)=>{if(me==="phone"){const Re=we.replace(/[^0-9]/g,"");Re.length<=10&&x(Ee=>({...Ee,[me]:Re}))}else x(Re=>({...Re,[me]:we}))},Q=(me,we)=>{if(!y||!y.latitude||!y.longitude||!y.delivery_radius)return{valid:!0,distance:0};const Re=tZ(me,we,y.latitude,y.longitude);return{valid:Re<=y.delivery_radius,distance:Re,maxRadius:y.delivery_radius}},ye=me=>{o(me),me==="custom"&&y?w(!0):me==="custom"&&!y&&n({title:"Vendor Information Loading",description:"Please wait for vendor information to load before selecting map location",variant:"destructive"})},be=(me,we,Re)=>{const Ee=Q(me,we);if(!Ee.valid){n({title:"Location Out of Range",description:`This location is ${Ee.distance.toFixed(1)}km away. Maximum delivery range is ${Ee.maxRadius}km.`,variant:"destructive"});return}m({lat:me,lng:we,address:Re}),w(!1),n({title:"Location Selected",description:`Delivery location set (${Ee.distance.toFixed(1)}km from vendor)`})},ce=()=>{const me=a==="current"?l:u.lat,we=(j==null?void 0:j.phone_number)||g.phone,Re=we&&ue(we);return me&&Re},ge=()=>U.every(me=>{if((me.product.dynamic_fields?Object.entries(me.product.dynamic_fields).filter(([re,je])=>Array.isArray(je)&&je.length>0):[]).length===0)return!0;const Re=`${me.product.id}_${me.id||"direct"}`,Ee=M[Re]||{};return Object.values(Ee).reduce((re,je)=>re+je,0)>0}),ee=async()=>{var re;if(!await Ce.getToken()){n({title:"Login Required",description:"Please login to place an order",variant:"destructive"}),e("/login");return}if(!ce()){n({title:"Missing Information",description:"Please complete delivery information",variant:"destructive"}),C("delivery");return}if(!ge()){n({title:"Product Options Required",description:"Please select all required product options",variant:"destructive"});return}const we=a==="current"?l:u;if(!we||!we.latitude&&!we.lat){n({title:"Location Required",description:"Please select a delivery location",variant:"destructive"});return}const Re=we.latitude||we.lat,Ee=we.longitude||we.lng,qe=Q(Re,Ee);if(!qe.valid){n({title:"Delivery Not Available",description:`Selected location is outside delivery range (${qe.distance.toFixed(1)}km > ${qe.maxRadius}km)`,variant:"destructive"});return}try{if(console.log("Checkout - About to create order with cartItems:",U),!U||U.length===0){n({title:"No Items",description:"No items found to place order. Please add items to cart first.",variant:"destructive"});return}const je={items:U.map(We=>{const At=`${We.product.id}_${We.id||"direct"}`,ss=F[At]||{},rn=Object.values(M[At]||{}).reduce((le,nt)=>le+nt,0)||We.quantity,Ks={};return M[At]&&Object.entries(M[At]).forEach(([le,nt])=>{if(nt>0){const Me=le.split("-");(We.product.dynamic_fields?Object.entries(We.product.dynamic_fields).filter(([tt,Be])=>Array.isArray(Be)&&Be.length>0):[]).forEach(([tt],Be)=>{Ks[tt]||(Ks[tt]=[]);for(let ft=0;ft<nt;ft++)Ks[tt].push(Me[Be])})}}),{product_id:We.product.id,quantity:rn,unit_price:parseFloat(We.product.price||We.total_price||0),price:parseFloat(We.product.price||We.total_price||0),delivery_fee:We.product.free_delivery===!0?0:We.product.custom_delivery_fee_enabled===!0&&We.product.custom_delivery_fee!==null&&We.product.custom_delivery_fee!==void 0?parseFloat(We.product.custom_delivery_fee.toString()):0,product_selections:Object.keys(Ks).length>0?Ks:ss,product_name:We.product.name,vendor_name:We.product.vendor_name}}),delivery_name:(j==null?void 0:j.username)||(j==null?void 0:j.first_name)||"Customer",delivery_phone:(j==null?void 0:j.phone_number)||g.phone,delivery_address:a==="current"?h:u.address,delivery_latitude:Re,delivery_longitude:Ee,delivery_instructions:g.instructions,payment_method:r,total_amount:Se,subtotal:G,delivery_fee:ie,delivery_distance:qe.distance,notes:`Distance: ${qe.distance.toFixed(1)}km from vendor. Items: ${U.map(We=>`${We.product.name} (${We.quantity}x)`).join(", ")}`},Oe=await Jm.createOrder(je),Ye=Oe.order?[Oe.order]:[],Ie=Ye.length;if(n({title:"Order Placed Successfully!",description:Ie>1?`${Ie} orders created for different vendors`:"Order has been placed successfully."}),"Notification"in window&&Notification.permission==="granted"&&"serviceWorker"in navigator){const We=Ye[0];navigator.serviceWorker.getRegistration().then(At=>{At&&At.showNotification("New Order Placed!",{body:Ie>1?`${Ie} orders created for Rs ${Ye.reduce((ss,zs)=>ss+parseFloat(zs.total_amount),0).toFixed(2)}`:`Order #${(We==null?void 0:We.order_number)||(We==null?void 0:We.id)} for Rs ${We.total_amount}`,icon:"/favicon.ico",tag:`order-${We.id}`,requireInteraction:!0})})}if(window.dispatchEvent&&Ye.forEach(We=>{window.dispatchEvent(new CustomEvent("orderCreated",{detail:{order:We}}))}),W&&H&&localStorage.removeItem("buyNowProduct"),!W&&Y){const We=await Ce.getToken();for(const At of Y)try{await fetch(`${Qe}cart/items/${At.id}/remove/`,{method:"DELETE",headers:{Authorization:`Token ${We}`,"ngrok-skip-browser-warning":"true"}})}catch(ss){console.error("Error removing cart item:",ss)}}Ie===1?e(`/order-confirmation/${(re=Ye[0])==null?void 0:re.id}`,{state:{order:Ye[0]}}):e("/orders",{state:{message:`${Ie} orders created successfully`,newOrders:Ye}})}catch(je){console.error("Order creation error:",je),n({title:"Order Failed",description:je.message||"Network error. Please try again.",variant:"destructive"})}},ae=()=>l?h:"Detecting location...",oe=()=>u.lat?u.address||`Custom Location (${u.lat.toFixed(4)}, ${u.lng.toFixed(4)})`:"Select on map",ke=async me=>{if(!me.trim()){P([]),E(!1);return}try{const Re=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(me)}&limit=5&addressdetails=1`)).json();P(Re),E(!0)}catch(we){console.error("Location search error:",we),P([]),E(!1)}},de=async me=>{const we=parseFloat(me.lat),Re=parseFloat(me.lon),Ee=me.display_name,qe=Q(we,Re);if(!qe.valid){n({title:"Location Out of Range",description:`This location is ${qe.distance.toFixed(1)}km away. Maximum delivery range is ${qe.maxRadius}km.`,variant:"destructive"});return}m({lat:we,lng:Re,address:Ee}),o("custom"),A(""),P([]),E(!1),n({title:"Location Selected",description:`Delivery location set (${qe.distance.toFixed(1)}km from vendor)`})};return _.useEffect(()=>{const me=setTimeout(()=>{T.trim()?ke(T):(P([]),E(!1))},300);return()=>clearTimeout(me)},[T]),_.useEffect(()=>{const me={...F};let we=!1;U.forEach(Re=>{const Ee=Re.product.dynamic_fields?Object.entries(Re.product.dynamic_fields).filter(([re,je])=>Array.isArray(je)&&je.length>0):[],qe=`${Re.product.id}_${Re.id||"direct"}`;Ee.forEach(([re,je])=>{var Oe;je.length===1&&!((Oe=me[qe])!=null&&Oe[re])&&(me[qe]||(me[qe]={}),me[qe][re]=je[0],we=!0)})}),we&&O(me)},[U]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 font-sans",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-all",children:s.jsx(Ut,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Checkout"}),s.jsx("div",{className:"w-6"})," "]})}),s.jsx("main",{className:"max-w-4xl mx-auto p-6 pb-32",children:s.jsxs(Fi,{value:S,onValueChange:C,className:"space-y-6",children:[s.jsxs(ii,{className:"grid w-full grid-cols-3",children:[s.jsxs(Mt,{value:"options",className:"flex items-center gap-2",children:[ge()&&s.jsx(Yu,{className:"h-4 w-4"}),"Options"]}),s.jsxs(Mt,{value:"delivery",className:"flex items-center gap-2",children:[ce()&&s.jsx(Yu,{className:"h-4 w-4"}),"Delivery"]}),s.jsx(Mt,{value:"summary",children:"Summary"})]}),s.jsx(bt,{value:"options",className:"space-y-6",children:s.jsxs(De,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[s.jsx(kt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Et,{className:"flex items-center gap-3 text-xl font-semibold text-gray-800",children:"Product Options"})}),s.jsxs($e,{className:"p-6 space-y-6",children:[U.map(me=>{var Ee,qe;const we=me.product.dynamic_fields?Object.entries(me.product.dynamic_fields).filter(([re,je])=>Array.isArray(je)&&je.length>0):[],Re=`${me.product.id}_${me.id||"direct"}`;return console.log("Rendering item:",me.product.name,"ItemKey:",Re),console.log("Dynamic fields:",me.product.dynamic_fields),console.log("Multi-select fields:",we),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("img",{src:is((qe=(Ee=me.product.images)==null?void 0:Ee[0])==null?void 0:qe.image_url),alt:me.product.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-lg text-gray-800",children:me.product.name}),s.jsx("p",{className:"text-sm text-gray-500",children:me.product.vendor_name}),s.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Rs ",parseFloat(me.product.price||me.total_price||0).toFixed(2)," each"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx(ve,{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Total Quantity"}),s.jsx("div",{className:"bg-emerald-50 px-3 py-2 rounded-lg border border-emerald-200",children:s.jsx("span",{className:"font-medium text-lg text-emerald-800",children:Object.values(M[Re]||{}).reduce((re,je)=>re+je,0)||me.quantity})})]}),we.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(ve,{className:"text-sm font-medium text-gray-600 mb-2 block",children:"Product Variants"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3 mb-3",children:we.map(([re,je])=>{var Oe;return s.jsxs("div",{children:[s.jsx(ve,{className:"text-xs text-gray-500 capitalize",children:re}),s.jsxs("select",{className:"w-full mt-1 p-2 border border-gray-200 rounded text-sm",value:((Oe=F[Re])==null?void 0:Oe[re])||"",onChange:Ye=>{O(Ie=>({...Ie,[Re]:{...Ie[Re],[re]:Ye.target.value}}))},children:[s.jsxs("option",{value:"",children:["Select ",re]}),je.map(Ye=>s.jsx("option",{value:Ye,children:Ye},Ye))]})]},re)})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{const re=F[Re];if(!re||!Object.values(re).every(Oe=>Oe))return;const je=Object.values(re).join("-");Z(Oe=>{var Ye;return{...Oe,[Re]:{...Oe[Re],[je]:(((Ye=Oe[Re])==null?void 0:Ye[je])||0)-1}}})},className:"h-8 w-8 rounded-full",children:s.jsx(wT,{className:"h-4 w-4"})}),s.jsx("span",{className:"w-8 text-center text-sm",children:(()=>{var Oe;const re=F[Re];if(!re||!Object.values(re).every(Ye=>Ye))return 0;const je=Object.values(re).join("-");return((Oe=M[Re])==null?void 0:Oe[je])||0})()}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{const re=F[Re];if(!re||!Object.values(re).every(Oe=>Oe))return;const je=Object.values(re).join("-");Z(Oe=>{var Ye;return{...Oe,[Re]:{...Oe[Re],[je]:(((Ye=Oe[Re])==null?void 0:Ye[je])||0)+1}}})},className:"h-8 w-8 rounded-full",children:s.jsx(bs,{className:"h-4 w-4"})})]}),s.jsx(se,{size:"sm",onClick:()=>{const re=F[Re];if(!re||!Object.values(re).every(Oe=>Oe))return;const je=Object.values(re).join("-");Z(Oe=>{var Ye;return{...Oe,[Re]:{...Oe[Re],[je]:(((Ye=Oe[Re])==null?void 0:Ye[je])||0)+1}}})},disabled:!F[Re]||!Object.values(F[Re]).every(re=>re),className:"text-xs px-3",children:"Add Variant"})]})]}),M[Re]&&Object.entries(M[Re]).filter(([re,je])=>je>0).length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{className:"text-xs text-gray-500",children:"Added Variants:"}),Object.entries(M[Re]).filter(([re,je])=>je>0).map(([re,je])=>{const Oe=re.split("-");return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-emerald-50 rounded border border-emerald-200",children:[s.jsx("span",{className:"text-sm",children:we.map(([Ye],Ie)=>s.jsxs("span",{className:"capitalize",children:[Ye,": ",Oe[Ie],Ie<we.length-1&&", "]},Ye))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Qty: ",je]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{Z(Ye=>({...Ye,[Re]:{...Ye[Re],[re]:0}}))},className:"h-6 w-6 rounded-full text-red-600",children:""})]})]},re)})]})]})]}),we.length===0&&s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No additional options for this product"})]},me.id)}),s.jsx("div",{className:"flex justify-end",children:s.jsx(se,{onClick:()=>C("delivery"),className:"px-8 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl",children:"Continue to Delivery"})})]})]})}),s.jsx(bt,{value:"delivery",className:"space-y-6",children:s.jsxs(De,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[s.jsx(kt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsxs(Et,{className:"flex items-center gap-3 text-xl font-semibold text-gray-800",children:[s.jsx(Jt,{className:"h-6 w-6 text-emerald-600"}),"Delivery Location"]})}),s.jsxs($e,{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jt,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Delivery Location"}),s.jsx("p",{className:"text-base font-semibold text-gray-800",children:a==="current"?ae():oe()}),(a==="current"&&l||a==="custom"&&u.lat)&&y&&s.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[a==="current"?Q(l.latitude,l.longitude).distance.toFixed(1):Q(u.lat,u.lng).distance.toFixed(1),"km from ",y.business_name]})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{className:"text-sm font-medium text-gray-700",children:"Search Location"}),s.jsxs("div",{className:"relative",children:[s.jsx(_e,{placeholder:"Search for an address...",value:T,onChange:me=>A(me.target.value),onFocus:()=>T&&E(!0),className:"border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl"}),R&&I.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-xl shadow-lg z-10 max-h-48 overflow-y-auto mt-1",children:I.map((me,we)=>s.jsx("div",{className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 first:rounded-t-xl last:rounded-b-xl",onMouseDown:Re=>Re.preventDefault(),onClick:()=>de(me),children:s.jsx("p",{className:"text-sm font-medium text-gray-900",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:me.display_name})},we))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(ve,{className:"text-sm font-medium text-gray-700",children:"Choose Delivery Location *"}),s.jsxs(_L,{value:a,onValueChange:ye,className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all cursor-pointer",children:[s.jsx(d0,{value:"current",id:"current",className:"text-emerald-600 border-gray-300"}),s.jsxs(ve,{htmlFor:"current",className:"flex items-center gap-3 flex-1 cursor-pointer",children:[s.jsx(_T,{className:"h-5 w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-base font-medium text-gray-800",children:"Use Current Location"}),s.jsx("p",{className:"text-sm text-gray-500",children:ae()}),l&&y&&s.jsxs("p",{className:"text-xs text-emerald-600",children:[Q(l.latitude,l.longitude).distance.toFixed(1),"km from vendor"]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 p-4 border border-gray-200 rounded-xl hover:bg-gray-50 transition-all cursor-pointer",children:[s.jsx(d0,{value:"custom",id:"custom",className:"text-emerald-600 border-gray-300"}),s.jsxs(ve,{htmlFor:"custom",className:"flex items-center gap-3 flex-1 cursor-pointer",children:[s.jsx(ZF,{className:"h-5 w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-base font-medium text-gray-800",children:"Choose on Map"}),s.jsx("p",{className:"text-sm text-gray-500",children:oe()}),u.lat&&y&&s.jsxs("p",{className:"text-xs text-emerald-600",children:[Q(u.lat,u.lng).distance.toFixed(1),"km from vendor"]})]})]})]}),a==="custom"&&!u.lat&&s.jsx("div",{className:"ml-8",children:s.jsx(se,{onClick:()=>y?w(!0):null,disabled:!y,variant:"outline",className:"text-sm px-4 py-2 rounded-lg",children:y?"Open Map":"Loading vendor info..."})})]})]}),!(j!=null&&j.phone_number)&&s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"Phone Number *"}),s.jsx(_e,{id:"phone",placeholder:"98XXXXXXXX or 97XXXXXXXX",value:g.phone,onChange:me=>he("phone",me.target.value),className:`mt-1 border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl transition-all ${g.phone&&!ue(g.phone)?"border-red-300 focus:border-red-500 focus:ring-red-500":""}`}),g.phone&&!ue(g.phone)&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please enter a valid Nepali mobile number (98XXXXXXXX or 97XXXXXXXX)"})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"instructions",className:"text-sm font-medium text-gray-700",children:"Delivery Instructions (Optional)"}),s.jsx(Gs,{id:"instructions",placeholder:"Any special instructions for delivery",value:g.instructions,onChange:me=>he("instructions",me.target.value),rows:3,className:"mt-1 border-gray-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-xl transition-all"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(se,{onClick:()=>C("summary"),className:"px-8 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl",children:"Continue to Summary"})})]})]})}),s.jsx(bt,{value:"summary",className:"space-y-6",children:s.jsxs(De,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden",children:[s.jsx(kt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Et,{className:"text-xl font-semibold text-gray-800",children:"Order Summary"})}),s.jsxs($e,{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-4 rounded-xl border border-emerald-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jt,{className:"h-5 w-5 text-emerald-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Delivery Location"}),s.jsx("p",{className:"text-base font-semibold text-gray-800",children:a==="current"?ae():oe()}),(a==="current"&&l||a==="custom"&&u.lat)&&y&&s.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[a==="current"?Q(l.latitude,l.longitude).distance.toFixed(1):Q(u.lat,u.lng).distance.toFixed(1),"km from ",y.business_name]})]})]})}),s.jsx(Pi,{className:"my-4 bg-gray-200"}),U.map(me=>{var qe,re;const we=me.product.dynamic_fields?Object.entries(me.product.dynamic_fields).filter(([je,Oe])=>Array.isArray(Oe)&&Oe.length>0):[],Re=we.length>0,Ee=`${me.product.id}_${me.id||"direct"}`;return s.jsxs("div",{className:"py-4 border-b border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:is((re=(qe=me.product.images)==null?void 0:qe[0])==null?void 0:re.image_url),alt:me.product.name,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 shadow-sm"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-semibold text-lg text-gray-800",children:me.product.name}),s.jsx("p",{className:"text-sm text-gray-500",children:me.product.vendor_name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Total Quantity: ",Object.values(M[Ee]||{}).reduce((je,Oe)=>je+Oe,0)||me.quantity]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Price: Rs ",parseFloat(me.product.price||me.total_price||0).toFixed(2)," each"]}),me.product.free_delivery===!0&&s.jsx("p",{className:"text-xs text-green-600 font-medium",children:" Free Delivery"}),me.product.custom_delivery_fee_enabled===!0&&me.product.custom_delivery_fee!==null&&me.product.custom_delivery_fee!==void 0&&me.product.free_delivery!==!0&&s.jsxs("p",{className:"text-xs text-orange-600",children:["Delivery: Rs ",parseFloat(me.product.custom_delivery_fee.toString()).toFixed(2)]}),me.product.free_delivery!==!0&&(me.product.custom_delivery_fee_enabled!==!0||me.product.custom_delivery_fee===null||me.product.custom_delivery_fee===void 0)&&s.jsx("p",{className:"text-xs text-orange-600",children:"Delivery: To be determined"})]}),s.jsxs("p",{className:"font-semibold text-lg text-gray-800",children:["Rs ",(parseFloat(me.product.price||me.total_price||0)*(Object.values(M[Ee]||{}).reduce((je,Oe)=>je+Oe,0)||me.quantity)).toFixed(2)]})]}),Re&&M[Ee]&&Object.entries(M[Ee]).filter(([je,Oe])=>Oe>0).length>0&&s.jsxs("div",{className:"mt-4 p-4 bg-emerald-50 rounded-lg border border-emerald-200",children:[s.jsx("p",{className:"text-sm font-medium text-emerald-800 mb-3",children:"Selected Variants:"}),s.jsx("div",{className:"space-y-2",children:Object.entries(M[Ee]).filter(([je,Oe])=>Oe>0).map(([je,Oe])=>{const Ye=je.split("-"),Ie=parseFloat(me.product.price||me.total_price||0)*Oe;return s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-emerald-200",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:we.map(([We],At)=>s.jsxs("span",{className:"capitalize",children:[We,": ",Ye[At],At<we.length-1&&", "]},We))}),s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[" ",Oe]})]}),s.jsxs("span",{className:"text-sm font-semibold text-emerald-700",children:["Rs ",Ie.toFixed(2)]})]},je)})})]})]},me.id)}),s.jsx(Pi,{className:"my-4 bg-gray-200"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[s.jsx("h4",{className:"font-semibold text-emerald-800 mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-base text-gray-700",children:[s.jsxs("span",{children:["Subtotal (",U.reduce((me,we)=>{const Re=`${we.product.id}_${we.id||"direct"}`,Ee=Object.values(M[Re]||{}).reduce((qe,re)=>qe+re,0);return me+(Ee||we.quantity)},0)," items)"]}),s.jsxs("span",{className:"font-semibold",children:["Rs ",G.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-base text-gray-700",children:[s.jsx("span",{children:"Delivery Fee"}),s.jsx("span",{className:"font-semibold",children:ie===0&&!xe?s.jsx("span",{className:"text-green-600",children:"Free"}):xe?s.jsx("span",{className:"text-orange-600",children:"To be determined"}):`Rs ${ie.toFixed(2)}`})]}),(ie>0||xe)&&s.jsx("p",{className:"text-xs text-gray-500",children:xe?"Delivery fee will be determined based on your location":"Delivery fees are set by individual vendors"})]})]}),s.jsx(Pi,{className:"my-2 bg-gray-200"}),s.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-800",children:[s.jsx("span",{children:"Total Amount"}),s.jsxs("span",{children:["Rs ",Se.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx(se,{variant:"outline",onClick:()=>C("options"),className:"px-6 py-2 rounded-xl",children:"Back to Options"}),s.jsx(se,{variant:"outline",onClick:()=>C("delivery"),className:"px-6 py-2 rounded-xl",children:"Back to Delivery"})]})]})]})})]})}),S==="summary"&&s.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-2xl py-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:["Rs ",Se.toFixed(2)]})]}),s.jsx(se,{onClick:ee,disabled:!ce()||!ge(),className:"px-10 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-bold text-lg transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:"Place Order"})]})}),p&&y&&s.jsx(QK,{onLocationSelect:be,onClose:()=>w(!1),vendorLocation:{lat:y.latitude,lng:y.longitude},maxRadius:y.delivery_radius,vendorName:y.business_name})]})}function nZ(){var u,m;const e=lt(),{orderId:t}=eg(),n=Dn(),{toast:r}=ts(),[i,a]=_.useState(((u=n.state)==null?void 0:u.order)||null),[o,l]=_.useState(!i);_.useEffect(()=>{!i&&t&&d()},[t,i]);const d=async()=>{try{const p=await Jm.getOrder(parseInt(t));a(p)}catch(p){console.error("Error fetching order:",p),r({title:"Error",description:p.message||"Failed to load order details",variant:"destructive"}),e("/")}finally{l(!1)}},h=p=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",out_for_delivery:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[p]||"bg-gray-100 text-gray-800",f=p=>({pending:"Order Placed",confirmed:"Confirmed",preparing:"Preparing",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"})[p]||p;return o?s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})}):i?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Ut,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Order Confirmation"}),s.jsx("div",{className:"w-6"})]})}),s.jsxs("main",{className:"max-w-4xl mx-auto p-6 pb-32",children:[s.jsx(De,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:s.jsxs($e,{className:"p-8 text-center",children:[s.jsx(Sh,{className:"h-16 w-16 mx-auto mb-4 text-emerald-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Order Placed Successfully!"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Your order #",i.order_number," has been placed and is being processed."]}),s.jsx(Ze,{className:`${h(i.status)} px-4 py-2 text-sm font-medium`,children:f(i.status)})]})}),s.jsxs(De,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:[s.jsx(kt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Et,{className:"text-xl font-semibold text-gray-800",children:"Order Details"})}),s.jsx($e,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Order Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Number:"}),s.jsxs("span",{className:"font-medium",children:["#",i.order_number]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Date:"}),s.jsx("span",{className:"font-medium",children:new Date(i.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),s.jsx("span",{className:"font-medium capitalize",children:i.payment_method})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),s.jsxs("span",{className:"font-bold text-emerald-600",children:["Rs ",parseFloat(i.total_amount).toFixed(2)]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Delivery Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Jt,{className:"h-4 w-4 text-emerald-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:i.delivery_name}),s.jsx("p",{className:"text-gray-600",children:i.delivery_address})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ch,{className:"h-4 w-4 text-emerald-600"}),s.jsx("span",{className:"text-gray-600",children:i.delivery_phone})]}),i.delivery_instructions&&s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Yr,{className:"h-4 w-4 text-emerald-600 mt-0.5"}),s.jsx("p",{className:"text-gray-600 text-xs",children:i.delivery_instructions})]})]})]})]})})]}),s.jsxs(De,{className:"border-none shadow-xl rounded-2xl bg-white overflow-hidden mb-6",children:[s.jsx(kt,{className:"bg-gradient-to-r from-emerald-50 to-teal-50 p-6",children:s.jsx(Et,{className:"text-xl font-semibold text-gray-800",children:"Order Items"})}),s.jsxs($e,{className:"p-6",children:[s.jsx("div",{className:"space-y-4",children:(m=i.items)==null?void 0:m.map(p=>{var w,y,b;return s.jsxs("div",{className:"flex items-center gap-4 py-4 border-b border-gray-100 last:border-b-0",children:[s.jsx("img",{src:((b=(y=(w=p.product_details)==null?void 0:w.images)==null?void 0:y[0])==null?void 0:b.image_url)||"/placeholder-product.jpg",alt:p.product_name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:p.product_name}),s.jsx("p",{className:"text-sm text-gray-600",children:p.vendor_name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",p.quantity]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-gray-800",children:["Rs ",parseFloat(p.total_price).toFixed(2)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Rs ",parseFloat(p.unit_price).toFixed(2)," each"]})]})]},p.id)})}),s.jsx(Pi,{className:"my-4"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-200",children:[s.jsxs("h4",{className:"font-semibold text-emerald-800 mb-2",children:["Bill Amount (Paid via ",i.payment_method,")"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsxs("span",{className:"font-medium",children:["Rs ",parseFloat(i.subtotal).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Tax:"}),s.jsxs("span",{className:"font-medium",children:["Rs ",parseFloat(i.tax_amount).toFixed(2)]})]}),s.jsx(Pi,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between text-base font-bold",children:[s.jsx("span",{children:"Bill Total (Paid):"}),s.jsxs("span",{className:"text-emerald-600",children:["Rs ",(parseFloat(i.subtotal)+parseFloat(i.tax_amount)).toFixed(2)]})]})]})]}),s.jsx("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-orange-800 text-lg",children:"Delivery Fee"}),s.jsx("p",{className:"text-sm text-orange-700",children:"Pay on delivery"})]}),s.jsxs("span",{className:"font-bold text-xl text-orange-600",children:["Rs ",parseFloat(i.delivery_fee).toFixed(2)]})]})}),s.jsx(Pi,{className:"my-2"}),s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"Grand Total:"}),s.jsxs("span",{className:"text-gray-800",children:["Rs ",parseFloat(i.total_amount).toFixed(2)]})]})]})]})]}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx(se,{variant:"outline",onClick:()=>e("/orders"),className:"px-8 py-3 rounded-xl",children:"View All Orders"}),s.jsx(se,{onClick:()=>e("/search"),className:"px-8 py-3 rounded-xl bg-emerald-600 hover:bg-emerald-700",children:"Continue Shopping"})]})]})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Kt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Order not found"}),s.jsx(se,{onClick:()=>e("/home"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Go Home"})]})})}var vg="Dialog",[LL,oae]=_n(vg),[rZ,ai]=LL(vg),IL=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=_.useRef(null),d=_.useRef(null),[h,f]=ei({prop:r,defaultProp:i??!1,onChange:a,caller:vg});return s.jsx(rZ,{scope:t,triggerRef:l,contentRef:d,contentId:Jr(),titleId:Jr(),descriptionId:Jr(),open:h,onOpenChange:f,onOpenToggle:_.useCallback(()=>f(u=>!u),[f]),modal:o,children:n})};IL.displayName=vg;var ML="DialogTrigger",DL=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ai(ML,n),a=jt(t,i.triggerRef);return s.jsx(ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":N_(i.open),...r,ref:a,onClick:Ke(e.onClick,i.onOpenToggle)})});DL.displayName=ML;var __="DialogPortal",[iZ,FL]=LL(__,{forceMount:void 0}),$L=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,a=ai(__,t);return s.jsx(iZ,{scope:t,forceMount:n,children:_.Children.map(r,o=>s.jsx(hn,{present:n||a.open,children:s.jsx(_h,{asChild:!0,container:i,children:o})}))})};$L.displayName=__;var Qm="DialogOverlay",BL=_.forwardRef((e,t)=>{const n=FL(Qm,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=ai(Qm,e.__scopeDialog);return a.modal?s.jsx(hn,{present:r||a.open,children:s.jsx(oZ,{...i,ref:t})}):null});BL.displayName=Qm;var aZ=cl("DialogOverlay.RemoveScroll"),oZ=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ai(Qm,n);return s.jsx(ag,{as:aZ,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(ut.div,{"data-state":N_(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),fl="DialogContent",zL=_.forwardRef((e,t)=>{const n=FL(fl,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=ai(fl,e.__scopeDialog);return s.jsx(hn,{present:r||a.open,children:a.modal?s.jsx(lZ,{...i,ref:t}):s.jsx(cZ,{...i,ref:t})})});zL.displayName=fl;var lZ=_.forwardRef((e,t)=>{const n=ai(fl,e.__scopeDialog),r=_.useRef(null),i=jt(t,n.contentRef,r);return _.useEffect(()=>{const a=r.current;if(a)return Nw(a)},[]),s.jsx(VL,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ke(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ke(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Ke(e.onFocusOutside,a=>a.preventDefault())})}),cZ=_.forwardRef((e,t)=>{const n=ai(fl,e.__scopeDialog),r=_.useRef(!1),i=_.useRef(!1);return s.jsx(VL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var d,h;(d=e.onInteractOutside)==null||d.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((h=n.triggerRef.current)==null?void 0:h.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),VL=_.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=ai(fl,n),d=_.useRef(null),h=jt(t,d);return ww(),s.jsxs(s.Fragment,{children:[s.jsx(rg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(id,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":N_(l.open),...o,ref:h,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(dZ,{titleId:l.titleId}),s.jsx(hZ,{contentRef:d,descriptionId:l.descriptionId})]})]})}),j_="DialogTitle",UL=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ai(j_,n);return s.jsx(ut.h2,{id:i.titleId,...r,ref:t})});UL.displayName=j_;var qL="DialogDescription",HL=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ai(qL,n);return s.jsx(ut.p,{id:i.descriptionId,...r,ref:t})});HL.displayName=qL;var WL="DialogClose",GL=_.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=ai(WL,n);return s.jsx(ut.button,{type:"button",...r,ref:t,onClick:Ke(e.onClick,()=>i.onOpenChange(!1))})});GL.displayName=WL;function N_(e){return e?"open":"closed"}var KL="DialogTitleWarning",[lae,ZL]=qD(KL,{contentName:fl,titleName:j_,docsSlug:"dialog"}),dZ=({titleId:e})=>{const t=ZL(KL),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return _.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},uZ="DialogDescriptionWarning",hZ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ZL(uZ).contentName}}.`;return _.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},YL=IL,XL=DL,JL=$L,xg=BL,yg=zL,bg=UL,wg=HL,QL=GL;const yc=YL,eI=XL,fZ=JL,tI=_.forwardRef(({className:e,...t},n)=>s.jsx(xg,{ref:n,className:at("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));tI.displayName=xg.displayName;const el=_.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(fZ,{children:[s.jsx(tI,{}),s.jsxs(yg,{ref:r,className:at("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(QL,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(tn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));el.displayName=yg.displayName;const tl=({className:e,...t})=>s.jsx("div",{className:at("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});tl.displayName="DialogHeader";const sl=_.forwardRef(({className:e,...t},n)=>s.jsx(bg,{ref:n,className:at("text-lg font-semibold leading-none tracking-tight",e),...t}));sl.displayName=bg.displayName;const sI=_.forwardRef(({className:e,...t},n)=>s.jsx(wg,{ref:n,className:at("text-sm text-muted-foreground",e),...t}));sI.displayName=wg.displayName;const Zn=YL,mZ=XL,pZ=JL,nI=_.forwardRef(({className:e,...t},n)=>s.jsx(xg,{className:at("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));nI.displayName=xg.displayName;const gZ=Nh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Pn=_.forwardRef(({side:e="right",className:t,children:n,...r},i)=>s.jsxs(pZ,{children:[s.jsx(nI,{}),s.jsxs(yg,{ref:i,className:at(gZ({side:e}),t),...r,children:[n,s.jsxs(QL,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(tn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pn.displayName=yg.displayName;const An=({className:e,...t})=>s.jsx("div",{className:at("flex flex-col space-y-2 text-center sm:text-left",e),...t});An.displayName="SheetHeader";const On=_.forwardRef(({className:e,...t},n)=>s.jsx(bg,{ref:n,className:at("text-lg font-semibold text-foreground",e),...t}));On.displayName=bg.displayName;const vZ=_.forwardRef(({className:e,...t},n)=>s.jsx(wg,{ref:n,className:at("text-sm text-muted-foreground",e),...t}));vZ.displayName=wg.displayName;function f0(e,[t,n]){return Math.min(n,Math.max(t,e))}var xZ=[" ","Enter","ArrowUp","ArrowDown"],yZ=[" ","Enter"],ml="Select",[_g,jg,bZ]=Ip(ml),[xd,cae]=_n(ml,[bZ,dd]),Ng=dd(),[wZ,yo]=xd(ml),[_Z,jZ]=xd(ml),rI=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:d,dir:h,name:f,autoComplete:u,disabled:m,required:p,form:w}=e,y=Ng(t),[b,g]=_.useState(null),[x,j]=_.useState(null),[N,S]=_.useState(!1),C=hd(h),[T,A]=ei({prop:r,defaultProp:i??!1,onChange:a,caller:ml}),[I,P]=ei({prop:o,defaultProp:l,onChange:d,caller:ml}),R=_.useRef(null),E=b?w||!!b.closest("form"):!0,[F,O]=_.useState(new Set),M=Array.from(F).map(Z=>Z.props.value).join(";");return s.jsx(dw,{...y,children:s.jsxs(wZ,{required:p,scope:t,trigger:b,onTriggerChange:g,valueNode:x,onValueNodeChange:j,valueNodeHasChildren:N,onValueNodeHasChildrenChange:S,contentId:Jr(),value:I,onValueChange:P,open:T,onOpenChange:A,dir:C,triggerPointerDownPosRef:R,disabled:m,children:[s.jsx(_g.Provider,{scope:t,children:s.jsx(_Z,{scope:e.__scopeSelect,onNativeOptionAdd:_.useCallback(Z=>{O(X=>new Set(X).add(Z))},[]),onNativeOptionRemove:_.useCallback(Z=>{O(X=>{const z=new Set(X);return z.delete(Z),z})},[]),children:n})}),E?s.jsxs(EI,{"aria-hidden":!0,required:p,tabIndex:-1,name:f,autoComplete:u,value:I,onChange:Z=>P(Z.target.value),disabled:m,form:w,children:[I===void 0?s.jsx("option",{value:""}):null,Array.from(F)]},M):null]})})};rI.displayName=ml;var iI="SelectTrigger",aI=_.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,a=Ng(n),o=yo(iI,n),l=o.disabled||r,d=jt(t,o.onTriggerChange),h=jg(n),f=_.useRef("touch"),[u,m,p]=PI(y=>{const b=h().filter(j=>!j.disabled),g=b.find(j=>j.value===o.value),x=AI(b,y,g);x!==void 0&&o.onValueChange(x.value)}),w=y=>{l||(o.onOpenChange(!0),p()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return s.jsx(uw,{asChild:!0,...a,children:s.jsx(ut.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":TI(o.value)?"":void 0,...i,ref:d,onClick:Ke(i.onClick,y=>{y.currentTarget.focus(),f.current!=="mouse"&&w(y)}),onPointerDown:Ke(i.onPointerDown,y=>{f.current=y.pointerType;const b=y.target;b.hasPointerCapture(y.pointerId)&&b.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(w(y),y.preventDefault())}),onKeyDown:Ke(i.onKeyDown,y=>{const b=u.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&m(y.key),!(b&&y.key===" ")&&xZ.includes(y.key)&&(w(),y.preventDefault())})})})});aI.displayName=iI;var oI="SelectValue",lI=_.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...l}=e,d=yo(oI,n),{onValueNodeHasChildrenChange:h}=d,f=a!==void 0,u=jt(t,d.onValueNodeChange);return Is(()=>{h(f)},[h,f]),s.jsx(ut.span,{...l,ref:u,style:{pointerEvents:"none"},children:TI(d.value)?s.jsx(s.Fragment,{children:o}):a})});lI.displayName=oI;var NZ="SelectIcon",cI=_.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return s.jsx(ut.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});cI.displayName=NZ;var SZ="SelectPortal",dI=e=>s.jsx(_h,{asChild:!0,...e});dI.displayName=SZ;var pl="SelectContent",uI=_.forwardRef((e,t)=>{const n=yo(pl,e.__scopeSelect),[r,i]=_.useState();if(Is(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?fo.createPortal(s.jsx(hI,{scope:e.__scopeSelect,children:s.jsx(_g.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(fI,{...e,ref:t})});uI.displayName=pl;var Mr=10,[hI,bo]=xd(pl),kZ="SelectContentImpl",CZ=cl("SelectContent.RemoveScroll"),fI=_.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:u,collisionBoundary:m,collisionPadding:p,sticky:w,hideWhenDetached:y,avoidCollisions:b,...g}=e,x=yo(pl,n),[j,N]=_.useState(null),[S,C]=_.useState(null),T=jt(t,G=>N(G)),[A,I]=_.useState(null),[P,R]=_.useState(null),E=jg(n),[F,O]=_.useState(!1),M=_.useRef(!1);_.useEffect(()=>{if(j)return Nw(j)},[j]),ww();const Z=_.useCallback(G=>{const[ne,...J]=E().map(Se=>Se.ref.current),[ie]=J.slice(-1),xe=document.activeElement;for(const Se of G)if(Se===xe||(Se==null||Se.scrollIntoView({block:"nearest"}),Se===ne&&S&&(S.scrollTop=0),Se===ie&&S&&(S.scrollTop=S.scrollHeight),Se==null||Se.focus(),document.activeElement!==xe))return},[E,S]),X=_.useCallback(()=>Z([A,j]),[Z,A,j]);_.useEffect(()=>{F&&X()},[F,X]);const{onOpenChange:z,triggerPointerDownPosRef:D}=x;_.useEffect(()=>{if(j){let G={x:0,y:0};const ne=ie=>{var xe,Se;G={x:Math.abs(Math.round(ie.pageX)-(((xe=D.current)==null?void 0:xe.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((Se=D.current)==null?void 0:Se.y)??0))}},J=ie=>{G.x<=10&&G.y<=10?ie.preventDefault():j.contains(ie.target)||z(!1),document.removeEventListener("pointermove",ne),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",J,{capture:!0})}}},[j,z,D]),_.useEffect(()=>{const G=()=>z(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[z]);const[B,V]=PI(G=>{const ne=E().filter(xe=>!xe.disabled),J=ne.find(xe=>xe.ref.current===document.activeElement),ie=AI(ne,G,J);ie&&setTimeout(()=>ie.ref.current.focus())}),H=_.useCallback((G,ne,J)=>{const ie=!M.current&&!J;(x.value!==void 0&&x.value===ne||ie)&&(I(G),ie&&(M.current=!0))},[x.value]),q=_.useCallback(()=>j==null?void 0:j.focus(),[j]),W=_.useCallback((G,ne,J)=>{const ie=!M.current&&!J;(x.value!==void 0&&x.value===ne||ie)&&R(G)},[x.value]),Y=r==="popper"?m0:mI,U=Y===m0?{side:l,sideOffset:d,align:h,alignOffset:f,arrowPadding:u,collisionBoundary:m,collisionPadding:p,sticky:w,hideWhenDetached:y,avoidCollisions:b}:{};return s.jsx(hI,{scope:n,content:j,viewport:S,onViewportChange:C,itemRefCallback:H,selectedItem:A,onItemLeave:q,itemTextRefCallback:W,focusSelectedItem:X,selectedItemText:P,position:r,isPositioned:F,searchRef:B,children:s.jsx(ag,{as:CZ,allowPinchZoom:!0,children:s.jsx(rg,{asChild:!0,trapped:x.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:Ke(i,G=>{var ne;(ne=x.trigger)==null||ne.focus({preventScroll:!0}),G.preventDefault()}),children:s.jsx(id,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:s.jsx(Y,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:G=>G.preventDefault(),...g,...U,onPlaced:()=>O(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:Ke(g.onKeyDown,G=>{const ne=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!ne&&G.key.length===1&&V(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let ie=E().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(G.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const xe=G.target,Se=ie.indexOf(xe);ie=ie.slice(Se+1)}setTimeout(()=>Z(ie)),G.preventDefault()}})})})})})})});fI.displayName=kZ;var EZ="SelectItemAlignedPosition",mI=_.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,a=yo(pl,n),o=bo(pl,n),[l,d]=_.useState(null),[h,f]=_.useState(null),u=jt(t,T=>f(T)),m=jg(n),p=_.useRef(!1),w=_.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:g,focusSelectedItem:x}=o,j=_.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&h&&y&&b&&g){const T=a.trigger.getBoundingClientRect(),A=h.getBoundingClientRect(),I=a.valueNode.getBoundingClientRect(),P=g.getBoundingClientRect();if(a.dir!=="rtl"){const xe=P.left-A.left,Se=I.left-xe,ue=T.left-Se,he=T.width+ue,Q=Math.max(he,A.width),ye=window.innerWidth-Mr,be=f0(Se,[Mr,Math.max(Mr,ye-Q)]);l.style.minWidth=he+"px",l.style.left=be+"px"}else{const xe=A.right-P.right,Se=window.innerWidth-I.right-xe,ue=window.innerWidth-T.right-Se,he=T.width+ue,Q=Math.max(he,A.width),ye=window.innerWidth-Mr,be=f0(Se,[Mr,Math.max(Mr,ye-Q)]);l.style.minWidth=he+"px",l.style.right=be+"px"}const R=m(),E=window.innerHeight-Mr*2,F=y.scrollHeight,O=window.getComputedStyle(h),M=parseInt(O.borderTopWidth,10),Z=parseInt(O.paddingTop,10),X=parseInt(O.borderBottomWidth,10),z=parseInt(O.paddingBottom,10),D=M+Z+F+z+X,B=Math.min(b.offsetHeight*5,D),V=window.getComputedStyle(y),H=parseInt(V.paddingTop,10),q=parseInt(V.paddingBottom,10),W=T.top+T.height/2-Mr,Y=E-W,U=b.offsetHeight/2,G=b.offsetTop+U,ne=M+Z+G,J=D-ne;if(ne<=W){const xe=R.length>0&&b===R[R.length-1].ref.current;l.style.bottom="0px";const Se=h.clientHeight-y.offsetTop-y.offsetHeight,ue=Math.max(Y,U+(xe?q:0)+Se+X),he=ne+ue;l.style.height=he+"px"}else{const xe=R.length>0&&b===R[0].ref.current;l.style.top="0px";const ue=Math.max(W,M+y.offsetTop+(xe?H:0)+U)+J;l.style.height=ue+"px",y.scrollTop=ne-W+y.offsetTop}l.style.margin=`${Mr}px 0`,l.style.minHeight=B+"px",l.style.maxHeight=E+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,l,h,y,b,g,a.dir,r]);Is(()=>j(),[j]);const[N,S]=_.useState();Is(()=>{h&&S(window.getComputedStyle(h).zIndex)},[h]);const C=_.useCallback(T=>{T&&w.current===!0&&(j(),x==null||x(),w.current=!1)},[j,x]);return s.jsx(PZ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:s.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(ut.div,{...i,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});mI.displayName=EZ;var TZ="SelectPopperPosition",m0=_.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Mr,...a}=e,o=Ng(n);return s.jsx(hw,{...o,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});m0.displayName=TZ;var[PZ,S_]=xd(pl,{}),p0="SelectViewport",pI=_.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,a=bo(p0,n),o=S_(p0,n),l=jt(t,a.onViewportChange),d=_.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(_g.Slot,{scope:n,children:s.jsx(ut.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ke(i.onScroll,h=>{const f=h.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&u){const p=Math.abs(d.current-f.scrollTop);if(p>0){const w=window.innerHeight-Mr*2,y=parseFloat(u.style.minHeight),b=parseFloat(u.style.height),g=Math.max(y,b);if(g<w){const x=g+p,j=Math.min(w,x),N=x-j;u.style.height=j+"px",u.style.bottom==="0px"&&(f.scrollTop=N>0?N:0,u.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});pI.displayName=p0;var gI="SelectGroup",[AZ,OZ]=xd(gI),RZ=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Jr();return s.jsx(AZ,{scope:n,id:i,children:s.jsx(ut.div,{role:"group","aria-labelledby":i,...r,ref:t})})});RZ.displayName=gI;var vI="SelectLabel",xI=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=OZ(vI,n);return s.jsx(ut.div,{id:i.id,...r,ref:t})});xI.displayName=vI;var ep="SelectItem",[LZ,yI]=xd(ep),bI=_.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=e,l=yo(ep,n),d=bo(ep,n),h=l.value===r,[f,u]=_.useState(a??""),[m,p]=_.useState(!1),w=jt(t,x=>{var j;return(j=d.itemRefCallback)==null?void 0:j.call(d,x,r,i)}),y=Jr(),b=_.useRef("touch"),g=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(LZ,{scope:n,value:r,disabled:i,textId:y,isSelected:h,onItemTextChange:_.useCallback(x=>{u(j=>j||((x==null?void 0:x.textContent)??"").trim())},[]),children:s.jsx(_g.ItemSlot,{scope:n,value:r,disabled:i,textValue:f,children:s.jsx(ut.div,{role:"option","aria-labelledby":y,"data-highlighted":m?"":void 0,"aria-selected":h&&m,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:w,onFocus:Ke(o.onFocus,()=>p(!0)),onBlur:Ke(o.onBlur,()=>p(!1)),onClick:Ke(o.onClick,()=>{b.current!=="mouse"&&g()}),onPointerUp:Ke(o.onPointerUp,()=>{b.current==="mouse"&&g()}),onPointerDown:Ke(o.onPointerDown,x=>{b.current=x.pointerType}),onPointerMove:Ke(o.onPointerMove,x=>{var j;b.current=x.pointerType,i?(j=d.onItemLeave)==null||j.call(d):b.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ke(o.onPointerLeave,x=>{var j;x.currentTarget===document.activeElement&&((j=d.onItemLeave)==null||j.call(d))}),onKeyDown:Ke(o.onKeyDown,x=>{var N;((N=d.searchRef)==null?void 0:N.current)!==""&&x.key===" "||(yZ.includes(x.key)&&g(),x.key===" "&&x.preventDefault())})})})})});bI.displayName=ep;var cu="SelectItemText",wI=_.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...a}=e,o=yo(cu,n),l=bo(cu,n),d=yI(cu,n),h=jZ(cu,n),[f,u]=_.useState(null),m=jt(t,g=>u(g),d.onItemTextChange,g=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,g,d.value,d.disabled)}),p=f==null?void 0:f.textContent,w=_.useMemo(()=>s.jsx("option",{value:d.value,disabled:d.disabled,children:p},d.value),[d.disabled,d.value,p]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=h;return Is(()=>(y(w),()=>b(w)),[y,b,w]),s.jsxs(s.Fragment,{children:[s.jsx(ut.span,{id:d.textId,...a,ref:m}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?fo.createPortal(a.children,o.valueNode):null]})});wI.displayName=cu;var _I="SelectItemIndicator",jI=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return yI(_I,n).isSelected?s.jsx(ut.span,{"aria-hidden":!0,...r,ref:t}):null});jI.displayName=_I;var g0="SelectScrollUpButton",NI=_.forwardRef((e,t)=>{const n=bo(g0,e.__scopeSelect),r=S_(g0,e.__scopeSelect),[i,a]=_.useState(!1),o=jt(t,r.onScrollButtonChange);return Is(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollTop>0;a(h)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(kI,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});NI.displayName=g0;var v0="SelectScrollDownButton",SI=_.forwardRef((e,t)=>{const n=bo(v0,e.__scopeSelect),r=S_(v0,e.__scopeSelect),[i,a]=_.useState(!1),o=jt(t,r.onScrollButtonChange);return Is(()=>{if(n.viewport&&n.isPositioned){let l=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;a(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(kI,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});SI.displayName=v0;var kI=_.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,a=bo("SelectScrollButton",n),o=_.useRef(null),l=jg(n),d=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>d(),[d]),Is(()=>{var f;const h=l().find(u=>u.ref.current===document.activeElement);(f=h==null?void 0:h.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),s.jsx(ut.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Ke(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ke(i.onPointerMove,()=>{var h;(h=a.onItemLeave)==null||h.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ke(i.onPointerLeave,()=>{d()})})}),IZ="SelectSeparator",CI=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(ut.div,{"aria-hidden":!0,...r,ref:t})});CI.displayName=IZ;var x0="SelectArrow",MZ=_.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Ng(n),a=yo(x0,n),o=bo(x0,n);return a.open&&o.position==="popper"?s.jsx(fw,{...i,...r,ref:t}):null});MZ.displayName=x0;var DZ="SelectBubbleInput",EI=_.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=_.useRef(null),a=jt(r,i),o=sg(t);return _.useEffect(()=>{const l=i.current;if(!l)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&f){const u=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(u)}},[o,t]),s.jsx(ut.select,{...n,style:{...WE,...n.style},ref:a,defaultValue:t})});EI.displayName=DZ;function TI(e){return e===""||e===void 0}function PI(e){const t=ks(e),n=_.useRef(""),r=_.useRef(0),i=_.useCallback(o=>{const l=n.current+o;t(l),function d(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(l)},[t]),a=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function AI(e,t,n){const i=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=FZ(e,Math.max(a,0));i.length===1&&(o=o.filter(h=>h!==n));const d=o.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==n?d:void 0}function FZ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var $Z=rI,OI=aI,BZ=lI,zZ=cI,VZ=dI,RI=uI,UZ=pI,LI=xI,II=bI,qZ=wI,HZ=jI,MI=NI,DI=SI,FI=CI;const Zt=$Z,Yt=BZ,Wt=_.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(OI,{ref:r,className:at("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(zZ,{asChild:!0,children:s.jsx(vT,{className:"h-4 w-4 opacity-50"})})]}));Wt.displayName=OI.displayName;const $I=_.forwardRef(({className:e,...t},n)=>s.jsx(MI,{ref:n,className:at("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(VF,{className:"h-4 w-4"})}));$I.displayName=MI.displayName;const BI=_.forwardRef(({className:e,...t},n)=>s.jsx(DI,{ref:n,className:at("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(vT,{className:"h-4 w-4"})}));BI.displayName=DI.displayName;const Gt=_.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>s.jsx(VZ,{children:s.jsxs(RI,{ref:i,className:at("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx($I,{}),s.jsx(UZ,{className:at("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(BI,{})]})}));Gt.displayName=RI.displayName;const WZ=_.forwardRef(({className:e,...t},n)=>s.jsx(LI,{ref:n,className:at("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));WZ.displayName=LI.displayName;const st=_.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(II,{ref:r,className:at("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(HZ,{children:s.jsx(Yu,{className:"h-4 w-4"})})}),s.jsx(qZ,{children:t})]}));st.displayName=II.displayName;const GZ=_.forwardRef(({className:e,...t},n)=>s.jsx(FI,{ref:n,className:at("-mx-1 my-1 h-px bg-muted",e),...t}));GZ.displayName=FI.displayName;function KZ(e,t){return _.useReducer((n,r)=>t[n][r]??n,e)}var k_="ScrollArea",[zI,dae]=_n(k_),[ZZ,Er]=zI(k_),VI=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,d]=_.useState(null),[h,f]=_.useState(null),[u,m]=_.useState(null),[p,w]=_.useState(null),[y,b]=_.useState(null),[g,x]=_.useState(0),[j,N]=_.useState(0),[S,C]=_.useState(!1),[T,A]=_.useState(!1),I=jt(t,R=>d(R)),P=hd(i);return s.jsx(ZZ,{scope:n,type:r,dir:P,scrollHideDelay:a,scrollArea:l,viewport:h,onViewportChange:f,content:u,onContentChange:m,scrollbarX:p,onScrollbarXChange:w,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:y,onScrollbarYChange:b,scrollbarYEnabled:T,onScrollbarYEnabledChange:A,onCornerWidthChange:x,onCornerHeightChange:N,children:s.jsx(ut.div,{dir:P,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});VI.displayName=k_;var UI="ScrollAreaViewport",qI=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=e,o=Er(UI,n),l=_.useRef(null),d=jt(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(ut.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});qI.displayName=UI;var $i="ScrollAreaScrollbar",C_=_.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Er($i,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return _.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?s.jsx(YZ,{...r,ref:t,forceMount:n}):i.type==="scroll"?s.jsx(XZ,{...r,ref:t,forceMount:n}):i.type==="auto"?s.jsx(HI,{...r,ref:t,forceMount:n}):i.type==="always"?s.jsx(E_,{...r,ref:t}):null});C_.displayName=$i;var YZ=_.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Er($i,e.__scopeScrollArea),[a,o]=_.useState(!1);return _.useEffect(()=>{const l=i.scrollArea;let d=0;if(l){const h=()=>{window.clearTimeout(d),o(!0)},f=()=>{d=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(hn,{present:n||a,children:s.jsx(HI,{"data-state":a?"visible":"hidden",...r,ref:t})})}),XZ=_.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Er($i,e.__scopeScrollArea),a=e.orientation==="horizontal",o=kg(()=>d("SCROLL_END"),100),[l,d]=KZ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(l==="idle"){const h=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(h)}},[l,i.scrollHideDelay,d]),_.useEffect(()=>{const h=i.viewport,f=a?"scrollLeft":"scrollTop";if(h){let u=h[f];const m=()=>{const p=h[f];u!==p&&(d("SCROLL"),o()),u=p};return h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,a,d,o]),s.jsx(hn,{present:n||l!=="hidden",children:s.jsx(E_,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ke(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Ke(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),HI=_.forwardRef((e,t)=>{const n=Er($i,e.__scopeScrollArea),{forceMount:r,...i}=e,[a,o]=_.useState(!1),l=e.orientation==="horizontal",d=kg(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?h:f)}},10);return Zc(n.viewport,d),Zc(n.content,d),s.jsx(hn,{present:r||a,children:s.jsx(E_,{"data-state":a?"visible":"hidden",...i,ref:t})})}),E_=_.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=Er($i,e.__scopeScrollArea),a=_.useRef(null),o=_.useRef(0),[l,d]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=YI(l.viewport,l.content),f={...r,sizes:l,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function u(m,p){return nY(m,o.current,l,p)}return n==="horizontal"?s.jsx(JZ,{...f,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollLeft,p=gk(m,l,i.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollLeft=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollLeft=u(m,i.dir))}}):n==="vertical"?s.jsx(QZ,{...f,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const m=i.viewport.scrollTop,p=gk(m,l);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{i.viewport&&(i.viewport.scrollTop=m)},onDragScroll:m=>{i.viewport&&(i.viewport.scrollTop=u(m))}}):null}),JZ=_.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=Er($i,e.__scopeScrollArea),[o,l]=_.useState(),d=_.useRef(null),h=jt(t,d,a.onScrollbarXChange);return _.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),s.jsx(GI,{"data-orientation":"horizontal",...i,ref:h,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Sg(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,u)=>{if(a.viewport){const m=a.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),JI(m,u)&&f.preventDefault()}},onResize:()=>{d.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:sp(o.paddingLeft),paddingEnd:sp(o.paddingRight)}})}})}),QZ=_.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=Er($i,e.__scopeScrollArea),[o,l]=_.useState(),d=_.useRef(null),h=jt(t,d,a.onScrollbarYChange);return _.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),s.jsx(GI,{"data-orientation":"vertical",...i,ref:h,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Sg(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,u)=>{if(a.viewport){const m=a.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),JI(m,u)&&f.preventDefault()}},onResize:()=>{d.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:sp(o.paddingTop),paddingEnd:sp(o.paddingBottom)}})}})}),[eY,WI]=zI($i),GI=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:f,onResize:u,...m}=e,p=Er($i,n),[w,y]=_.useState(null),b=jt(t,I=>y(I)),g=_.useRef(null),x=_.useRef(""),j=p.viewport,N=r.content-r.viewport,S=ks(f),C=ks(d),T=kg(u,10);function A(I){if(g.current){const P=I.clientX-g.current.left,R=I.clientY-g.current.top;h({x:P,y:R})}}return _.useEffect(()=>{const I=P=>{const R=P.target;(w==null?void 0:w.contains(R))&&S(P,N)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[j,w,N,S]),_.useEffect(C,[r,C]),Zc(w,T),Zc(p.content,T),s.jsx(eY,{scope:n,scrollbar:w,hasThumb:i,onThumbChange:ks(a),onThumbPointerUp:ks(o),onThumbPositionChange:C,onThumbPointerDown:ks(l),children:s.jsx(ut.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:Ke(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),g.current=w.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),A(I))}),onPointerMove:Ke(e.onPointerMove,A),onPointerUp:Ke(e.onPointerUp,I=>{const P=I.target;P.hasPointerCapture(I.pointerId)&&P.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=x.current,p.viewport&&(p.viewport.style.scrollBehavior=""),g.current=null})})})}),tp="ScrollAreaThumb",KI=_.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=WI(tp,e.__scopeScrollArea);return s.jsx(hn,{present:n||i.hasThumb,children:s.jsx(tY,{ref:t,...r})})}),tY=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,a=Er(tp,n),o=WI(tp,n),{onThumbPositionChange:l}=o,d=jt(t,u=>o.onThumbChange(u)),h=_.useRef(void 0),f=kg(()=>{h.current&&(h.current(),h.current=void 0)},100);return _.useEffect(()=>{const u=a.viewport;if(u){const m=()=>{if(f(),!h.current){const p=rY(u,l);h.current=p,l()}};return l(),u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,f,l]),s.jsx(ut.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ke(e.onPointerDownCapture,u=>{const p=u.target.getBoundingClientRect(),w=u.clientX-p.left,y=u.clientY-p.top;o.onThumbPointerDown({x:w,y})}),onPointerUp:Ke(e.onPointerUp,o.onThumbPointerUp)})});KI.displayName=tp;var T_="ScrollAreaCorner",ZI=_.forwardRef((e,t)=>{const n=Er(T_,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?s.jsx(sY,{...e,ref:t}):null});ZI.displayName=T_;var sY=_.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=Er(T_,n),[a,o]=_.useState(0),[l,d]=_.useState(0),h=!!(a&&l);return Zc(i.scrollbarX,()=>{var u;const f=((u=i.scrollbarX)==null?void 0:u.offsetHeight)||0;i.onCornerHeightChange(f),d(f)}),Zc(i.scrollbarY,()=>{var u;const f=((u=i.scrollbarY)==null?void 0:u.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),h?s.jsx(ut.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function sp(e){return e?parseInt(e,10):0}function YI(e,t){const n=e/t;return isNaN(n)?0:n}function Sg(e){const t=YI(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function nY(e,t,n,r="ltr"){const i=Sg(n),a=i/2,o=t||a,l=i-o,d=n.scrollbar.paddingStart+o,h=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,u=r==="ltr"?[0,f]:[f*-1,0];return XI([d,h],u)(e)}function gk(e,t,n="ltr"){const r=Sg(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-r,d=n==="ltr"?[0,o]:[o*-1,0],h=f0(e,d);return XI([0,o],[0,l])(h)}function XI(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function JI(e,t){return e>0&&e<t}var rY=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function kg(e,t){const n=ks(e),r=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),_.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Zc(e,t){const n=ks(t);Is(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}var QI=VI,iY=qI,aY=ZI;const P_=_.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(QI,{ref:r,className:at("relative overflow-hidden",e),...n,children:[s.jsx(iY,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(e4,{}),s.jsx(aY,{})]}));P_.displayName=QI.displayName;const e4=_.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(C_,{ref:r,orientation:t,className:at("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(KI,{className:"relative flex-1 rounded-full bg-border"})}));e4.displayName=C_.displayName;class oY{constructor(){Ht(this,"fcmToken",null)}async initialize(){if(gt.isNativePlatform())try{const{PushNotifications:t}=await ze(async()=>{const{PushNotifications:o}=await Promise.resolve().then(()=>Z4);return{PushNotifications:o}},void 0),{LocalNotifications:n}=await ze(async()=>{const{LocalNotifications:o}=await import("./index-B040m1d6.js");return{LocalNotifications:o}},[]),{App:r}=await ze(async()=>{const{App:o}=await Promise.resolve().then(()=>o0);return{App:o}},void 0);let i=await t.requestPermissions(),a=await n.requestPermissions();if(i.receive!=="granted"||a.display!=="granted"){console.warn("Push or local notification permission denied");return}await n.createChannel({id:"order-emergency",name:"Order Emergency Alerts",description:"CRITICAL: New orders - interrupts video calls and all activities",sound:"default",importance:5,visibility:1,vibration:!0,lights:!0}),await n.createChannel({id:"order-max-emergency",name:"MAXIMUM Order Alerts",description:"MAXIMUM PRIORITY: Interrupts video calls, games, and all activities",sound:"default",importance:5,visibility:1,vibration:!0,lights:!0}),console.log(" Emergency notification channel created"),await t.register(),t.addListener("registration",o=>{console.log(" FCM Token:",o.value),this.fcmToken=o.value,this.sendTokenToBackend(o.value)}),t.addListener("pushNotificationReceived",async o=>{var l;console.log(" Push received:",o),(l=o.data)!=null&&l.orderId&&(await this.showEmergencyLocalNotification(o.data.orderId,o.data.orderNumber,o.data.amount),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(o.data.orderId),orderNumber:o.data.orderNumber,amount:o.data.amount,fromPush:!0}})))}),t.addListener("pushNotificationActionPerformed",o=>{var d;console.log(" Push notification tapped - app opening:",o);const l=(d=o.notification.data)==null?void 0:d.orderId;l&&(window.location.href="/vendor/orders",setTimeout(()=>{var h,f;window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(l),orderNumber:(h=o.notification.data)==null?void 0:h.orderNumber,amount:(f=o.notification.data)==null?void 0:f.amount,autoOpened:!0,fromPush:!0}}))},1500))}),n.addListener("localNotificationActionPerformed",async o=>{console.log(" MAXIMUM PRIORITY EMERGENCY NOTIFICATION TAPPED - FORCE APP OPEN:",o);const l=o.notification.extra;l!=null&&l.orderId&&(this.playMobileEmergencySound(),window.location.href="/vendor/orders",setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:l.orderId,orderNumber:l.orderNumber,amount:l.amount,fromMaxEmergencyNotification:!0,maxPriority:!0,emergency:!0,tappedFromBackground:!0,soundPlayed:!0}})),n.cancel({notifications:[{id:o.notification.id},{id:o.notification.id+1},{id:o.notification.id+2}]}).catch(d=>console.warn("Could not clear notifications:",d))},1e3))}),r.addListener("appStateChange",({isActive:o})=>{o&&(console.log(" App resumed from push notification"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))}),console.log(" Real push notifications initialized with emergency alerts")}catch(t){console.error(" Push notifications setup failed:",t)}}async sendTokenToBackend(t){try{console.log(" SENDING FCM TOKEN TO BACKEND (WHATSAPP-STYLE):",t.substring(0,20)+"...");const n=await fetch("/api/accounts/register-fcm-token/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},body:JSON.stringify({fcm_token:t,platform:"web",device_type:"pwa"})});if(n.ok)console.log(" FCM TOKEN REGISTERED - WHATSAPP-STYLE BACKGROUND NOTIFICATIONS ENABLED!"),console.log(" Now notifications will work even when browser is completely closed!");else{console.error(" FCM TOKEN REGISTRATION FAILED:",n.status,n.statusText);const r=await n.text();console.error(" Error details:",r)}}catch(n){console.error(" Failed to send FCM token to backend:",n),console.error(" This means background notifications WONT work when browser is closed!")}}async showEmergencyLocalNotification(t,n,r){try{const{LocalNotifications:i}=await ze(async()=>{const{LocalNotifications:o}=await import("./index-B040m1d6.js");return{LocalNotifications:o}},[]),a=[];a.push({title:" ORDER EMERGENCY! ",body:`CRITICAL: Order #${n} - ${r}
 INTERRUPTS VIDEO CALLS!
 TAP NOW - BUSINESS URGENT!`,id:Date.now(),schedule:{at:new Date(Date.now()+50)},sound:"default",attachments:void 0,actionTypeId:"MAX_EMERGENCY_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF0000",channelId:"order-max-emergency",summaryText:"CRITICAL BUSINESS ALERT",extra:{orderId:parseInt(t),orderNumber:n,amount:r,emergency:!0,maxPriority:!0,timestamp:Date.now()}}),a.push({title:" MONEY ALERT! ",body:`Order #${n} waiting!
${r} potential earnings
 Don't miss this order!`,id:Date.now()+1,schedule:{at:new Date(Date.now()+2050)},sound:"default",attachments:void 0,actionTypeId:"EMERGENCY_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#00FF00",channelId:"order-emergency",summaryText:"EARNINGS OPPORTUNITY",extra:{orderId:parseInt(t),orderNumber:n,amount:r,emergency:!0,backup:!0,timestamp:Date.now()}}),a.push({title:" ORDER STILL WAITING ",body:`Order #${n} (${r}) needs attention!
 Customer waiting for response`,id:Date.now()+2,schedule:{at:new Date(Date.now()+5050)},sound:"default",attachments:void 0,actionTypeId:"EMERGENCY_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FFFF00",channelId:"order-emergency",summaryText:"CUSTOMER WAITING",extra:{orderId:parseInt(t),orderNumber:n,amount:r,emergency:!0,followup:!0,timestamp:Date.now()}}),await i.schedule({notifications:a}),console.log(" MAXIMUM PRIORITY EMERGENCY NOTIFICATIONS SCHEDULED - CUTS THROUGH VIDEO CALLS!"),"vibrate"in navigator&&(navigator.vibrate([1500,200,1500,200,1500,500,1e3,200,1e3,200,1e3]),console.log(" INTENSE EMERGENCY VIBRATION PATTERN ACTIVATED")),this.playMobileEmergencySound()}catch(i){console.error(" Failed to show maximum priority emergency notifications:",i)}}async playMobileEmergencySound(){console.log(" MOBILE EMERGENCY SOUND: Trying multiple strategies...");try{const t=new(window.AudioContext||window.webkitAudioContext);t.state==="suspended"&&(await t.resume(),console.log(" Audio context resumed"));const n=(r,i,a,o=1)=>{setTimeout(()=>{try{const l=t.createOscillator(),d=t.createGain();l.connect(d),d.connect(t.destination),l.frequency.value=r,l.type="sawtooth",d.gain.setValueAtTime(o,t.currentTime),d.gain.exponentialRampToValueAtTime(.01,t.currentTime+i),l.start(t.currentTime),l.stop(t.currentTime+i)}catch(l){console.warn("Web Audio beep failed:",l)}},a)};n(1200,.15,0,1),n(800,.15,200,1),n(1200,.2,400,1),n(1e3,.3,700,1),console.log(" MOBILE EMERGENCY SOUND: Web Audio strategy successful")}catch(t){console.warn(" MOBILE EMERGENCY SOUND: Web Audio failed:",t);try{const n="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",r=new Audio(n);r.volume=1;const i=r.play();i!==void 0&&i.then(()=>{console.log(" MOBILE EMERGENCY SOUND: HTML5 Audio successful")}).catch(a=>{console.warn(" MOBILE EMERGENCY SOUND: HTML5 Audio blocked:",a),this.forceAudioUnlock()})}catch(n){console.warn(" MOBILE EMERGENCY SOUND: HTML5 Audio failed:",n),this.forceAudioUnlock()}}}forceAudioUnlock(){console.log(" FORCE AUDIO UNLOCK: Simulating user interaction...");try{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createBuffer(1,1,22050),r=t.createBufferSource();r.buffer=n,r.connect(t.destination),t.state==="suspended"?t.resume().then(()=>{r.start(),console.log(" AUDIO UNLOCKED: Silent buffer played")}):r.start(),setTimeout(()=>{this.playMobileEmergencySound()},100)}catch(t){console.warn(" AUDIO UNLOCK FAILED:",t)}}async testEmergencyNotification(t="123",n="TEST-001",r="100"){console.log(" TESTING EMERGENCY NOTIFICATION..."),await this.showEmergencyLocalNotification(t,n,r)}async testMobileSound(){console.log(" TESTING MOBILE SOUND FUNCTIONALITY..."),await this.playMobileEmergencySound()}getFCMToken(){return this.fcmToken}async checkFCMStatus(){console.log(" CHECKING FCM STATUS FOR WHATSAPP-STYLE NOTIFICATIONS...");const t=this.getFCMToken();if(t){console.log(" FCM Token exists:",t.substring(0,20)+"..."),console.log(" Background notifications SHOULD work when browser is closed");try{const n=await fetch("/api/accounts/test-fcm-notification/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")||""}`},body:JSON.stringify({title:"Test Notification",body:"Testing FCM background notifications",test:!0})});n.ok?console.log(" FCM test notification sent - check if you receive it!"):console.warn(" FCM test failed:",n.status)}catch(n){console.warn(" FCM test error:",n)}}else console.error(" NO FCM TOKEN - Background notifications WONT work!"),console.error(" User needs to grant notification permissions and refresh");return{hasToken:!!t,token:(t==null?void 0:t.substring(0,20))+"...",platform:gt.isNativePlatform()?"native":"web"}}}const t4=new oY,A_=Object.freeze(Object.defineProperty({__proto__:null,realPushNotifications:t4},Symbol.toStringTag,{value:"Module"}));class lY{constructor(){Ht(this,"persistentIntervals",new Map);this.setupNotificationHandlers(),this.initializePushNotifications(),this.initializeBrowserNotifications()}async initializePushNotifications(){gt.isNativePlatform()&&await t4.initialize()}async setupNotificationHandlers(){if(gt.isNativePlatform())try{const{LocalNotifications:t}=await ze(async()=>{const{LocalNotifications:r}=await import("./index-B040m1d6.js");return{LocalNotifications:r}},[]),{App:n}=await ze(async()=>{const{App:r}=await Promise.resolve().then(()=>o0);return{App:r}},void 0);t.addListener("localNotificationActionPerformed",async r=>{var i;console.log(" NOTIFICATION TAPPED - AUTO OPENING APP:",r);try{const{App:a}=await ze(async()=>{const{App:d}=await Promise.resolve().then(()=>o0);return{App:d}},void 0),o=await a.getState();if(console.log(" Current app state:",o),!o.isActive){console.log(" App was in background - bringing to foreground"),window.focus(),document.body.click();try{await a.minimizeApp(),setTimeout(()=>{window.focus()},100)}catch{console.log("Minimize/restore not available")}}const l=parseInt(((i=r.notification.extra)==null?void 0:i.orderId)||"0");l&&(console.log(" Opening order:",l),window.location.href="/vendor/orders",setTimeout(()=>{var d,h;window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:l,orderNumber:(d=r.notification.extra)==null?void 0:d.orderNumber,amount:(h=r.notification.extra)==null?void 0:h.amount,autoOpened:!0,fromNotification:!0}}))},1500))}catch(a){console.error(" Failed to open app:",a),window.location.href="/vendor/orders"}}),n.addListener("appStateChange",({isActive:r})=>{r&&(console.log(" App resumed - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))})}catch(t){console.warn("Could not setup notification handlers:",t)}}async showOrderNotification(t,n,r){console.log(" ULTIMATE ORDER ALERT! ACTIVATING ALL NOTIFICATION SYSTEMS:",t,"Amount:",n,"OrderID:",r);const i=await this.checkAndRequestPermissions();if(console.log(" Notification permission status:",i),!i){console.warn(" Notification permission denied");return}try{console.log(" Sending FCM push notification to backend...");const{pushNotificationService:a}=await ze(async()=>{const{pushNotificationService:o}=await import("./pushNotificationService-jhlLnG7M.js");return{pushNotificationService:o}},[]);await a.showOrderNotification(t,n,r),console.log(" FCM push notification sent - will work even when browser closed!")}catch(a){console.warn(" FCM push notification failed:",a)}try{console.log(" Triggering Service Worker background notification..."),this.sendToServiceWorker("ORDER_ALERT",{orderNumber:t,amount:n,orderId:r,timestamp:Date.now()})}catch(a){console.warn(" Service Worker notification failed:",a)}await this.activateUltimateOrderAlert(t,n,r),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n}})),console.log(" Order notification sequence completed")}async checkAndRequestPermissions(){if(console.log(" Checking notification permissions..."),gt.isNativePlatform())try{const{LocalNotifications:t}=await ze(async()=>{const{LocalNotifications:r}=await import("./index-B040m1d6.js");return{LocalNotifications:r}},[]),n=await t.checkPermissions();if(console.log(" Mobile notification permission:",n),n.display!=="granted"){const r=await t.requestPermissions();return console.log(" Mobile permission request result:",r),r.display==="granted"}return!0}catch(t){return console.warn(" Mobile notifications not available:",t),!1}if("Notification"in window){if(console.log(" Current notification permission:",Notification.permission),Notification.permission==="granted")return console.log(" Browser notifications already granted"),!0;if(Notification.permission==="denied")return console.warn(" Browser notifications denied by user"),alert(` Notifications blocked! Please enable notifications in browser settings:

1. Click lock icon in address bar
2. Allow notifications
3. Refresh page`),!1;console.log(" Requesting browser notification permission...");try{const t=await Notification.requestPermission();return console.log(" Permission request result:",t),t==="granted"?(console.log(" Browser notifications granted!"),alert(" Notifications enabled! You will now receive order alerts."),!0):(console.warn(" Browser notifications denied"),alert(" Notifications denied. You won't receive order alerts."),!1)}catch(t){return console.warn(" Error requesting permissions:",t),!1}}return console.warn(" Notifications not supported in this browser"),!1}async requestBackendPushNotification(t,n,r){try{(await fetch("/api/vendor/send-order-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendorId:localStorage.getItem("vendor_id"),orderId:r,orderNumber:t,amount:n,title:" NEW ORDER RECEIVED",body:`Order #${t} - ${n}`,data:{orderId:r.toString(),orderNumber:t,amount:n,action:"openOrder"}})})).ok?console.log(" Backend push notification requested"):console.warn(" Backend push notification failed")}catch(i){console.warn("Backend push notification error:",i)}}async showPushNotification(t,n,r){try{console.log(" Simulating push notification for auto-opening")}catch(i){console.warn("Push notification failed, using local fallback:",i)}}async showLocalNotification(t,n,r){try{const{LocalNotifications:i}=await ze(async()=>{const{LocalNotifications:o}=await import("./index-B040m1d6.js");return{LocalNotifications:o}},[]);if((await i.requestPermissions()).display!=="granted"){console.warn("Notification permission not granted");return}try{await i.createChannel({id:"order-alerts",name:"Order Alerts - ALARM MODE",description:"URGENT: High priority order notifications that work on lock screen",sound:"default",importance:5,visibility:1,lights:!0,vibration:!0}),console.log(" ALARM notification channel created with MAXIMUM priority")}catch(o){console.warn("Could not create alarm channel:",o)}await i.schedule({notifications:[{title:" NEW ORDER - ALARM MODE! ",body:`Order #${t} - ${n}
 SOUND EVERY 2s | VIBRATION EVERY 3s
 TAP TO ACCEPT/REJECT`,id:r,schedule:{at:new Date(Date.now()+100)},sound:"default",attachments:void 0,actionTypeId:"OPEN_ORDER",smallIcon:"ic_stat_icon_config_sample",iconColor:"#FF0000",channelId:"order-alerts",summaryText:"ALARM MODE: Order needs immediate response",extra:{orderId:r.toString(),orderNumber:t,amount:n,autoOpen:!0,action:"openApp",deepLink:"vendor://order/"+r,alarmMode:!0,soundEvery:"2s",vibrationEvery:"3s"}}]}),console.log(" ALARM-style local notification scheduled for order:",r)}catch(i){console.warn("Local notifications not available:",i)}}showWebNotification(t,n,r){if("Notification"in window&&Notification.permission==="granted"){const i=new Notification(" New Order!",{body:`Order #${t} - ${n}`,icon:"/favicon.ico",tag:`order-${r}`,requireInteraction:!0});i.onclick=()=>{window.focus(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n}})),i.close()},setTimeout(()=>i.close(),3e4)}}startPersistentAlert(t,n,r){this.stopPersistentAlert(r);const i=setInterval(()=>{console.log(" ALARM SOUND for order:",t),this.playOrderAlertSound()},2e3),a=setInterval(()=>{console.log(" ALARM VIBRATION for order:",t),"vibrate"in navigator&&navigator.vibrate([2e3,500,2e3,500,2e3]),this.triggerAlarmHaptics()},3e3);this.persistentIntervals.set(r,i),this.persistentIntervals.set(r+1e6,a),setTimeout(()=>{this.stopPersistentAlert(r)},6e5)}stopPersistentAlert(t){const n=this.persistentIntervals.get(t);n&&(clearInterval(n),this.persistentIntervals.delete(t),console.log(" Stopped sound alert for order:",t));const r=this.persistentIntervals.get(t+1e6);r&&(clearInterval(r),this.persistentIntervals.delete(t+1e6),console.log(" Stopped vibration alert for order:",t))}async clearNotification(t){if(this.stopPersistentAlert(t),gt.isNativePlatform())try{const{LocalNotifications:n}=await ze(async()=>{const{LocalNotifications:r}=await import("./index-B040m1d6.js");return{LocalNotifications:r}},[]);await n.cancel({notifications:[{id:t}]}),console.log(" Cleared background notification for order:",t)}catch(n){console.warn("Could not clear notification:",n)}}async requestPermissions(){if(gt.isNativePlatform())try{const{LocalNotifications:t}=await ze(async()=>{const{LocalNotifications:r}=await import("./index-B040m1d6.js");return{LocalNotifications:r}},[]),n=await t.requestPermissions();console.log(" Notification permissions:",n);try{await t.createChannel({id:"order-alerts",name:" ORDER ALARMS - MAXIMUM PRIORITY",description:"ALARM MODE: Sound every 2s | Vibration every 3s | Works on lock screen",sound:"default",importance:5,visibility:1,lights:!0,vibration:!0}),console.log(" ALARM notification channel created with MAXIMUM priority for lock screen")}catch(r){console.warn("Could not create alarm notification channel:",r)}return n.display==="granted"}catch(t){return console.warn("Local notifications not available:",t),!1}if("Notification"in window){if(Notification.permission==="default"){console.log(" REQUESTING BROWSER NOTIFICATION PERMISSION...");const t=await Notification.requestPermission();return console.log(" Browser notification permission result:",t),t==="granted"?(console.log(" Browser notifications enabled! You will now get instant notifications even when the tab is not active."),setTimeout(()=>{const n=new Notification(" Notifications Enabled!",{body:`You will now receive instant order alerts even when this tab is not active.

Test notification - you can dismiss this.`,icon:"/favicon.ico",tag:"permission-test",requireInteraction:!1});setTimeout(()=>n.close(),5e3)},1e3),setTimeout(()=>{this.showNotificationSettingsInstructions()},3e3)):console.warn(" Browser notifications denied. You may not receive notifications when the tab is not active."),t==="granted"}return Notification.permission==="granted"}return!1}async initializeBrowserNotifications(){!gt.isNativePlatform()&&"Notification"in window&&setTimeout(async()=>{Notification.permission==="default"&&(console.log(" Auto-requesting notification permissions for instant alerts..."),await this.requestPermissions())},3e3)}showNotificationSettingsInstructions(){const t=`
 To Enable Floating Notifications on Windows:

1. Click the notification bell icon in taskbar
2. Click "Manage notifications"
3. Find your browser (Chrome/Firefox/Edge)
4. Make sure notifications are ON
5. Set to "Show notification banners"
6. Enable "Play a sound when a notification arrives"
7. Enable "Show notifications on lock screen" (optional)

This will make notifications appear as floating popups over any screen!
    `;if(console.log(t),"Notification"in window&&Notification.permission==="granted"){const n=new Notification(" How to Enable Floating Notifications",{body:"Click here for instructions on enabling floating popup notifications on Windows",icon:"/favicon.ico",tag:"settings-instructions",requireInteraction:!0});n.onclick=()=>{alert(t),n.close()},setTimeout(()=>n.close(),3e4)}}playBeepSound(){try{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value=800,n.type="square",r.gain.setValueAtTime(.3,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+.3),n.start(t.currentTime),n.stop(t.currentTime+.3),console.log(" Beep sound played")}catch(t){console.warn("Audio not available:",t)}}playMobileSound(){try{const t=new(window.AudioContext||window.webkitAudioContext);for(let n=0;n<3;n++)setTimeout(()=>{const r=t.createOscillator(),i=t.createGain();r.connect(i),i.connect(t.destination),r.frequency.value=1e3+n*200,r.type="sine",i.gain.setValueAtTime(.5,t.currentTime),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),r.start(t.currentTime),r.stop(t.currentTime+.2)},n*300);console.log(" Mobile sound sequence played")}catch(t){console.warn("Mobile audio not available:",t)}}playOrderAlertSound(){try{console.log("  ORDER ALERT! Playing LOUD notification sequence");const t=new(window.AudioContext||window.webkitAudioContext),n=(r,i,a,o=.8)=>{setTimeout(()=>{const l=t.createOscillator(),d=t.createGain();l.connect(d),d.connect(t.destination),l.frequency.value=r,l.type="square",d.gain.setValueAtTime(o,t.currentTime),d.gain.exponentialRampToValueAtTime(.01,t.currentTime+i),l.start(t.currentTime),l.stop(t.currentTime+i)},a)};n(1200,.15,0,.9),n(800,.15,200,.9),n(1200,.15,400,.9),n(1e3,.3,700,1),n(1200,.15,1200,.8),n(800,.15,1400,.8),n(1200,.2,1600,.8),console.log(" ORDER ALERT SOUND SEQUENCE PLAYED - VENDOR SHOULD NOTICE!")}catch(t){console.warn("Order alert sound not available:",t),this.playBeepSound()}}async activateUltimateOrderAlert(t,n,r){console.log(" ACTIVATING ULTIMATE ORDER ALERT SYSTEM - IMPOSSIBLE TO MISS!"),this.emergencyWakeUp(),this.showUltimateVisualAlerts(t,n,r),this.playUltimateSoundAlerts(r),this.triggerUltimateHapticAlerts(),this.showBrowserNotifications(t,n,r),this.startPersistentOrderAlerts(t,n,r),this.showDesktopSystemNotifications(t,n,r),this.broadcastToAllTabs(t,n,r),this.emergencyBroadcast(t,n,r),console.log(" ULTIMATE ALERT SYSTEM ACTIVATED - VENDOR WILL DEFINITELY NOTICE!")}showUltimateVisualAlerts(t,n,r){console.log(" ACTIVATING VISUAL ALERTS"),this.flashDocumentTitle(` NEW ORDER ${t}!`,10),this.flashFavicon(),this.highlightPageBackground()}playUltimateSoundAlerts(t){console.log(" ACTIVATING ULTIMATE SOUND SYSTEM"),this.playOrderAlertSound(),this.playMobileSound(),this.playSystemSound();let n=0;const r=setInterval(()=>{n<10?(this.playOrderAlertSound(),n++):clearInterval(r)},3e3)}triggerUltimateHapticAlerts(){console.log(" ACTIVATING HAPTIC ALERTS"),"vibrate"in navigator&&(navigator.vibrate([1e3,200,1e3,200,1e3]),setTimeout(()=>navigator.vibrate([800,200,800,200,800]),2e3),setTimeout(()=>navigator.vibrate([600,200,600,200,600]),4e3))}showBrowserNotifications(t,n,r){if(console.log(" ACTIVATING BROWSER NOTIFICATIONS - ALARM-STYLE FORCING"),"Notification"in window&&Notification.permission==="default"){console.log(" Requesting notification permission..."),Notification.requestPermission().then(i=>{console.log(" Notification permission result:",i),i==="granted"&&this.showBrowserNotifications(t,n,r)});return}if("Notification"in window&&Notification.permission==="granted"){const i=document.title.split(" - ")[0]||"EzyWay Vendor",a=window.location.hostname;this.requestWakeLock(),this.forceAlarmVibration();for(let d=0;d<8;d++)setTimeout(()=>{const h=new Notification(` ${i}: ORDER ALERT! `,{body:`ORDER #${t} - ${n}
 ${a}
 TAP NOW - DON'T MISS!`,icon:"/alert-icon.svg",badge:"/alert-icon.svg",tag:`alarm-order-${r}-${d}`,requireInteraction:!0,silent:!1,data:{orderId:r,orderNumber:t,amount:n,site:i,url:a,alarm:!0}});h.onclick=()=>{this.releaseWakeLock(),window.focus(),document.body.click(),document.body.focus(),window.location.pathname!=="/vendor/orders"&&(window.location.href="/vendor/orders"),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,fromAlarmNotification:!0}})),h.close()},setTimeout(()=>h.close(),6e5)},d*150);setTimeout(()=>{const d=new Notification(` ${i} - URGENT ORDER!`,{body:`Order #${t} - ${n}
 ${a}
 Works on lock screen too!`,icon:"/alert-icon.svg",tag:`lockscreen-order-${r}`,requireInteraction:!0,silent:!1,data:{orderId:r,orderNumber:t,amount:n,site:i,url:a,lockScreen:!0}});d.onclick=()=>{this.releaseWakeLock(),window.focus(),document.body.click(),window.location.pathname!=="/vendor/orders"&&(window.location.href="/vendor/orders"),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,fromLockScreenNotification:!0}})),d.close()},setTimeout(()=>d.close(),9e5)},2e3);let o=0;const l=setInterval(()=>{if(o<10){const d=new Notification(` ${i}: ORDER WAITING!`,{body:`Order #${t} (${n}) still pending!
 ${a}
 ${o+1}/10 reminders`,icon:"/alert-icon.svg",tag:`followup-alarm-${r}-${o}`,requireInteraction:!0,silent:!1,data:{orderId:r,orderNumber:t,amount:n,site:i,url:a,followup:o+1}});d.onclick=()=>{clearInterval(l),this.releaseWakeLock(),window.focus(),document.body.click(),window.location.pathname!=="/vendor/orders"&&(window.location.href="/vendor/orders"),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,fromFollowUpAlarm:!0}})),d.close()},setTimeout(()=>d.close(),3e4),o++}else clearInterval(l),this.releaseWakeLock()},3e4)}else console.warn(" Browser notifications not available or permission denied")}async requestWakeLock(){try{if("wakeLock"in navigator){const t=await navigator.wakeLock.request("screen");console.log(" Wake lock acquired - screen will stay awake like alarms"),window.currentWakeLock=t,t.addEventListener("release",()=>{console.log(" Wake lock released")})}}catch(t){console.warn(" Wake lock not available:",t)}}releaseWakeLock(){try{window.currentWakeLock&&(window.currentWakeLock.release(),window.currentWakeLock=null)}catch(t){console.warn("Error releasing wake lock:",t)}}forceAlarmVibration(){if("vibrate"in navigator){const t=[2e3,500,2e3,500,2e3,2e3,500,500,500,500,500];let n=0;const r=setInterval(()=>{navigator.vibrate(t),console.log(" ALARM vibration pattern triggered:",n+1),n++,n>=50&&clearInterval(r)},1e4)}}async triggerAlarmHaptics(){if(gt.isNativePlatform())try{const{Haptics:t,ImpactStyle:n}=await ze(async()=>{const{Haptics:r,ImpactStyle:i}=await import("./index-C5Sw6Z7J.js");return{Haptics:r,ImpactStyle:i}},[]);await t.impact({style:n.Heavy}),setTimeout(async()=>{await t.impact({style:n.Heavy})},1e3),setTimeout(async()=>{await t.impact({style:n.Heavy})},2e3),console.log(" ALARM HAPTICS TRIGGERED")}catch(t){console.warn("Haptics not available:",t)}}startPersistentOrderAlerts(t,n,r){console.log(" STARTING PERSISTENT ALERTS"),this.stopPersistentAlert(r);const i=setInterval(()=>{console.log(" PERSISTENT ORDER ALERT:",t),this.flashDocumentTitle(` ORDER ${t}!`,2),this.playBeepSound(),"vibrate"in navigator&&navigator.vibrate(200)},5e3);this.persistentIntervals.set(r,i),setTimeout(()=>{this.stopPersistentAlert(r)},3e5)}showDesktopSystemNotifications(t,n,r){if(console.log(" ACTIVATING DESKTOP SYSTEM NOTIFICATIONS - FORCE FLOATING"),"Notification"in window)try{const i=document.title.split(" - ")[0]||"EzyWay Vendor",a=window.location.hostname,o=this.getBrowserInfo();for(let l=0;l<3;l++)setTimeout(()=>{const d=new Notification(` ${i}: ORDER #${t} `,{body:`${n} - CRITICAL!
 ${a} (${o})
 REQUIRES IMMEDIATE ATTENTION
 Click to open NOW!`,icon:"/alert-icon.svg",tag:`desktop-critical-${r}-${l}`,requireInteraction:!0,silent:!1,data:{orderId:r,orderNumber:t,amount:n,system:!0,site:i,url:a,browser:o}});d.onclick=()=>{window.focus(),document.body.click(),window.location.pathname!=="/vendor/orders"&&(window.location.href="/vendor/orders"),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,fromDesktopNotification:!0}})),d.close()},setTimeout(()=>d.close(),18e4)},l*500);setTimeout(()=>{const l=new Notification(` ${i}: ORDER STILL PENDING!`,{body:`Order #${t} (${n}) waiting!
 ${a}
 Respond immediately!`,icon:"/alert-icon.svg",tag:`desktop-followup-${r}`,requireInteraction:!0,silent:!1,data:{orderId:r,orderNumber:t,amount:n,followup:!0,site:i,url:a}});l.onclick=()=>{window.focus(),document.body.click(),window.location.pathname!=="/vendor/orders"&&(window.location.href="/vendor/orders"),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,fromFollowUpNotification:!0}})),l.close()},setTimeout(()=>l.close(),12e4)},45e3)}catch(i){console.warn("Desktop notification failed:",i)}}getBrowserInfo(){const t=navigator.userAgent;return t.includes("Chrome")?"Chrome":t.includes("Firefox")?"Firefox":t.includes("Safari")&&!t.includes("Chrome")?"Safari":t.includes("Edge")?"Edge":t.includes("Opera")?"Opera":"Browser"}broadcastToAllTabs(t,n,r){console.log(" BROADCASTING TO ALL BROWSER TABS");const i={type:"ultimate_order_alert",orderId:r,orderNumber:t,amount:n,timestamp:Date.now()};localStorage.setItem("ultimate_order_alert",JSON.stringify(i)),this.sendToServiceWorker("ORDER_ALERT",{orderNumber:t,amount:n,orderId:r}),window.addEventListener("storage",a=>{if(a.key==="ultimate_order_alert"&&a.newValue){const o=JSON.parse(a.newValue);o.type==="ultimate_order_alert"&&o.orderId===r&&(this.showBrowserNotifications(o.orderNumber,o.amount,o.orderId),this.playOrderAlertSound())}})}async sendToServiceWorker(t,n){"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:t,...n})}flashDocumentTitle(t,n){const r=document.title;let i=0;const a=()=>{document.title=i%2===0?t:r,i++,i<n*2?setTimeout(a,500):document.title=r};a()}showScreenOverlayAlert(t,n){const r=document.createElement("div");r.id="ultimate-order-overlay",r.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 0, 0, 0.9);
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 999999;
      font-size: 2rem;
      font-weight: bold;
      text-align: center;
      animation: pulse 0.5s infinite alternate;
    `,r.innerHTML=`
      <div> URGENT ORDER ALERT! </div>
      <div style="font-size: 1.5rem; margin: 20px 0;">Order #${t}</div>
      <div style="font-size: 1.2rem;">${n}</div>
      <div style="font-size: 1rem; margin-top: 20px;">TAP ANYWHERE TO DISMISS</div>
    `;const i=document.createElement("style");i.textContent=`
      @keyframes pulse {
        0% { background: rgba(255, 0, 0, 0.9); }
        100% { background: rgba(255, 0, 0, 1); }
      }
    `,document.head.appendChild(i),r.onclick=()=>{document.body.removeChild(r),document.head.removeChild(i)},document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&(document.body.removeChild(r),document.head.removeChild(i))},1e4)}flashFavicon(){const t=document.querySelector("link[rel*='icon']");if(t){const n=t.href;t.href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="red"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="30">!</text></svg>',setTimeout(()=>{t.href=n},2e3)}}highlightPageBackground(){const t=document.body.style.backgroundColor;document.body.style.backgroundColor="#ffcccc";let n=0;const r=()=>{document.body.style.backgroundColor=n%2===0?"#ff6666":"#ffcccc",n++,n<6?setTimeout(r,300):document.body.style.backgroundColor=t};r()}playSystemSound(){try{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination),n.frequency.value=440,n.type="sawtooth",r.gain.setValueAtTime(.1,t.currentTime),r.gain.exponentialRampToValueAtTime(.01,t.currentTime+1),n.start(t.currentTime),n.stop(t.currentTime+1)}catch{console.warn("System sound not available")}}emergencyWakeUp(){console.log(" EMERGENCY WAKE-UP ACTIVATED");try{window.focus();const t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});document.body.dispatchEvent(t);const n=new(window.AudioContext||window.webkitAudioContext);n.state==="suspended"&&n.resume(),Object.defineProperty(document,"hidden",{value:!1,writable:!1}),Object.defineProperty(document,"visibilityState",{value:"visible",writable:!1}),window.dispatchEvent(new Event("visibilitychange"))}catch(t){console.warn("Emergency wake-up failed:",t)}}emergencyBroadcast(t,n,r){console.log(" EMERGENCY BROADCAST - MAXIMUM ALERT LEVEL");const i={type:"EMERGENCY_ORDER_ALERT",orderId:r,orderNumber:t,amount:n,timestamp:Date.now(),priority:"MAXIMUM"};try{if(localStorage.setItem("emergency_order_alert",JSON.stringify(i)),this.sendToServiceWorker("EMERGENCY_ALERT",i),window.dispatchEvent(new CustomEvent("emergencyOrderAlert",{detail:i})),window.parent!==window&&window.parent.postMessage(i,"*"),"BroadcastChannel"in window){const a=new BroadcastChannel("order-alerts");a.postMessage(i),a.close()}}catch(a){console.warn("Emergency broadcast failed:",a)}setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:r,orderNumber:t,amount:n,emergency:!0}}))},1e3)}}const Ua=new lY,nl=Object.freeze(Object.defineProperty({__proto__:null,simpleNotificationService:Ua},Symbol.toStringTag,{value:"Module"}));function Cg(){const[e,t]=_.useState([]),[n,r]=_.useState(!1),[i,a]=_.useState(0),o=_.useRef(null),l=_.useRef(null),d=_.useRef(0),h=5;_.useEffect(()=>{Ua.requestPermissions()},[]);const f=async()=>{let g=await Ce.getToken();if(g||(g=localStorage.getItem("token")),!g){console.warn("No authentication token found for WebSocket connection");return}const x=window.location.href;if(x.includes("ngrok")||x.includes("ngrok-free.app")){console.log("Ngrok detected - using HTTP polling instead of WebSocket"),m();return}console.log(" ENABLING WEBSOCKET FOR REAL-TIME ORDER UPDATES");try{const j=`${EP("/ws/notifications/")}?token=${g}`;console.log("Attempting WebSocket connection to:",j);const N=new WebSocket(j);o.current=N;const S=setTimeout(()=>{var C;((C=o.current)==null?void 0:C.readyState)===WebSocket.CONNECTING&&(console.log("WebSocket connection timeout, closing..."),o.current.close(),r(!1))},1e4);o.current.onopen=()=>{var T;clearTimeout(S),console.log(" Notification WebSocket connected successfully"),r(!0),d.current=0,(T=o.current)==null||T.send(JSON.stringify({type:"authenticate",token:g}));const C=setInterval(()=>{var A;if(((A=o.current)==null?void 0:A.readyState)===WebSocket.OPEN)try{o.current.send(JSON.stringify({type:"ping"}))}catch(I){console.error("Error sending ping:",I),clearInterval(C)}else clearInterval(C)},3e4)},o.current.onmessage=C=>{try{const T=JSON.parse(C.data);u(T)}catch(T){console.error("Error parsing WebSocket message:",T)}},o.current.onclose=C=>{if(clearTimeout(S),console.log(" Notification WebSocket disconnected:",{code:C.code,reason:C.reason,wasClean:C.wasClean}),r(!1),C.code===1e3){console.log("Normal WebSocket closure");return}if(C.code===1006){console.error("WebSocket closed abnormally (1006) - likely backend not running or incorrect configuration");return}(async()=>{const A=await Ce.getToken();if(A&&d.current<h){const I=Math.min(1e3*Math.pow(2,d.current),3e4);l.current=setTimeout(()=>{d.current++,console.log(` Attempting to reconnect... (${d.current}/${h})`),f()},I)}else A?d.current>=h&&(console.warn(" Max WebSocket reconnection attempts reached, switching to polling"),m()):console.warn(" Cannot reconnect WebSocket: No authentication token")})()},o.current.onerror=C=>{clearTimeout(S),console.error(" Notification WebSocket error:",C),r(!1)}}catch(j){console.error(" Failed to create WebSocket connection:",j),r(!1)}},u=g=>{if(console.log(" WEBSOCKET MESSAGE RECEIVED:",g),g.type==="connection_established"){console.log(" Notification service connected:",g.message);return}if(g.type!=="pong"){if(g.type==="order_update"||g.type==="order_status_change"){console.log(" ORDER STATUS UPDATE VIA WEBSOCKET:",g),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:g.order_id||g.orderId,status:g.status||g.new_status,type:g.action||"websocket_update",websocket:!0}})),window.dispatchEvent(new CustomEvent("websocket_message",{detail:g}));return}if(g.type==="refund_update"){console.log(" REFUND UPDATE VIA WEBSOCKET:",g),window.dispatchEvent(new CustomEvent("websocket_message",{detail:g}));return}if(g.type==="order_notification"||g.type==="notification"){const x=g.notification||g;if(x){const j={id:x.id||`notification_${Date.now()}`,type:x.type||"system",title:x.title,message:x.message,data:x.data,action_url:x.action_url,timestamp:new Date().toISOString()};t(N=>[j,...N.slice(0,49)]),a(N=>N+1),Ua.showOrderNotification(x.title,x.message,parseInt(j.id)),window.dispatchEvent(new CustomEvent("newNotification",{detail:j}))}}}},m=()=>{console.log(" Starting HTTP polling fallback for notifications"),r(!0);const g=setInterval(async()=>{try{const x=await Ce.getToken();if(!x){console.warn("No token for HTTP polling"),clearInterval(g);return}const j=await fetch(`${Vc("/notifications/")}`,{headers:{Authorization:`Token ${x}`,"Content-Type":"application/json"}});if(j.ok){const N=await j.json();N&&N.length>0&&console.log(" HTTP Polling: New notifications found")}}catch(x){console.warn("HTTP polling error:",x)}},3e4);l.current&&clearInterval(l.current),l.current=g};_.useEffect(()=>((async()=>{setTimeout(async()=>{await f()},1e3)})(),()=>{if(o.current){try{o.current.close(1e3,"Component unmounting")}catch(x){console.warn("Error closing WebSocket:",x)}o.current=null}if(l.current){try{clearTimeout(l.current)}catch(x){console.warn("Error clearing timeout:",x)}l.current=null}}),[]),_.useEffect(()=>{console.log("Initial notification fetch disabled")},[]);const p=async g=>{console.log("Mark as read:",g),a(x=>Math.max(0,x-1))},w=async()=>{console.log("Mark all as read"),a(0)},y=g=>{o.current&&o.current.readyState===WebSocket.OPEN?(o.current.send(JSON.stringify(g)),console.log(" WebSocket message sent:",g)):console.warn(" WebSocket not connected, cannot send message")};return _.useEffect(()=>{const g=x=>{y(x.detail)};return window.addEventListener("websocket_send",g),()=>window.removeEventListener("websocket_send",g)},[]),{notifications:e,unreadCount:i,isConnected:n,markAsRead:p,markAllAsRead:w,clearNotifications:()=>{t([]),a(0)},sendMessage:y}}function vk({className:e=""}){lt();const{navigateWithAuth:t}=po(),{notifications:n,unreadCount:r,markAsRead:i,markAllAsRead:a,clearNotifications:o,isConnected:l}=Cg(),[d,h]=_.useState(!1),f=w=>{switch(w){case"order":return s.jsx(Kt,{className:"h-4 w-4 text-blue-600"});case"payment":return s.jsx(bl,{className:"h-4 w-4 text-green-600"});case"system":return s.jsx(Xu,{className:"h-4 w-4 text-orange-600"});default:return s.jsx(Gn,{className:"h-4 w-4 text-gray-600"})}},u=w=>{switch(w){case"order":return"border-l-blue-500 bg-blue-50";case"payment":return"border-l-green-500 bg-green-50";case"system":return"border-l-orange-500 bg-orange-50";default:return"border-l-gray-500 bg-gray-50"}},m=w=>{w.read||i(w.id),w.action_url&&(t(w.action_url),h(!1))},p=w=>{const y=new Date(w),g=Math.floor((new Date().getTime()-y.getTime())/(1e3*60));return g<1?"Just now":g<60?`${g}m ago`:g<1440?`${Math.floor(g/60)}h ago`:y.toLocaleDateString()};return s.jsxs(Zn,{open:d,onOpenChange:h,children:[s.jsx(mZ,{asChild:!0,children:s.jsxs(se,{variant:"ghost",size:"sm",className:`relative p-2 hover:bg-gray-100 rounded-full ${e}`,children:[s.jsx(Gn,{className:`h-5 w-5 ${l?"text-gray-700":"text-gray-400"}`}),r>0&&s.jsx(Ze,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:r>99?"99+":r}),!l&&s.jsx("div",{className:"absolute -bottom-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})]})}),s.jsxs(Pn,{side:"right",className:"w-full sm:w-96",children:[s.jsxs(An,{className:"pb-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(On,{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),"Notifications",r>0&&s.jsxs(Ze,{variant:"secondary",className:"ml-2",children:[r," new"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!l&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[s.jsx("div",{className:"h-2 w-2 bg-red-500 rounded-full animate-pulse"}),"Offline"]}),n.length>0&&s.jsx(se,{variant:"ghost",size:"sm",onClick:o,className:"text-xs",children:"Clear All"})]})]}),r>0&&s.jsxs(se,{variant:"outline",size:"sm",onClick:a,className:"w-full",children:[s.jsx(en,{className:"h-4 w-4 mr-2"}),"Mark All as Read"]})]}),s.jsx(P_,{className:"h-[calc(100vh-120px)]",children:n.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(Gn,{className:"h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"You're all caught up! New notifications will appear here."})]}):s.jsx("div",{className:"space-y-2",children:n.map(w=>s.jsx("div",{onClick:()=>m(w),className:`
                    p-4 rounded-lg border-l-4 cursor-pointer transition-all hover:shadow-md
                    ${u(w.type)}
                    ${w.read?"opacity-75":"ring-2 ring-blue-100"}
                  `,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:f(w.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:w.title}),!w.read&&s.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full flex-shrink-0 ml-2"})]}),s.jsx("p",{className:"text-sm text-gray-700 mb-2 line-clamp-2",children:w.message}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(Yr,{className:"h-3 w-3"}),p(w.timestamp||new Date().toISOString())]}),w.action_url&&s.jsx(se,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-blue-600 hover:text-blue-800",onClick:y=>{y.stopPropagation(),m(w)},children:"View"})]})]})]})},w.id))})}),s.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:s.jsxs("div",{className:`
            flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-xs
            ${l?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}
          `,children:[s.jsx("div",{className:`h-2 w-2 rounded-full ${l?"bg-green-500":"bg-red-500 animate-pulse"}`}),l?"Connected to notification service":"Reconnecting..."]})})]})]})}function cY({children:e,redirectTo:t="/login"}){const[n,r]=_.useState(!0),[i,a]=_.useState(!1);lt();const{state:o}=Fn();_.useEffect(()=>{l()},[o.user]);const l=async()=>{var d,h;try{const f=o.user;if(f){if(!((d=f.available_roles)!=null&&d.includes("customer"))){console.log("CustomerAuthGuard: Customer role not available, user type:",f.user_type),a(!1);return}console.log("CustomerAuthGuard: Access granted for user:",f.user_type),a(!0);return}if(!await Ce.isAuthenticated()){console.log("CustomerAuthGuard: Not authenticated"),a(!1);return}const m=await Ce.getUser();if(!m){console.log("CustomerAuthGuard: No user data"),a(!1);return}if(!((h=m.available_roles)!=null&&h.includes("customer"))){console.log("CustomerAuthGuard: Customer role not available, user type:",m.user_type),a(!1);return}console.log("CustomerAuthGuard: Access granted for user:",m.user_type),a(!0)}catch(f){console.error("Customer auth guard error:",f),a(!1)}finally{r(!1)}};return n?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600 mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Checking authentication..."})]}):s.jsx(s.Fragment,{children:e})}function dY(){var rn,Ks;const e=lt(),{toast:t}=ts(),{navigateWithAuth:n}=po(),[r,i]=_.useState(!1),[a,o]=_.useState([]),[l,d]=_.useState(!0),[h,f]=_.useState(!1),[u,m]=_.useState({page:1,hasMore:!0,total:0}),[p,w]=_.useState("all"),[y,b]=_.useState("");_.useState("");const[g,x]=_.useState(!1),[j,N]=_.useState(null),[S,C]=_.useState({}),[T,A]=_.useState(!1),[I,P]=_.useState(null),[R,E]=_.useState(0),[F,O]=_.useState(""),[M,Z]=_.useState(!1),[X,z]=_.useState(!1),[D,B]=_.useState(null),[V,H]=_.useState(""),[q,W]=_.useState(""),[Y,U]=_.useState(""),[G,ne]=_.useState(""),[J,ie]=_.useState(""),[xe,Se]=_.useState(""),[ue,he]=_.useState(""),[Q,ye]=_.useState(""),[be,ce]=_.useState([]),[ge,ee]=_.useState(!1),[ae,oe]=_.useState(null),[ke,de]=_.useState(!1),[pe,Pe]=_.useState("");Cg(),_.useEffect(()=>{const le=nt=>{const Me=nt.detail;(Me.type==="order_update"||Me.type==="order_status_change"||Me.type==="refund_update")&&(console.log("WebSocket order update:",Me),Ie.current(1,!0))};return window.addEventListener("websocket_message",le),()=>window.removeEventListener("websocket_message",le)},[]);const me=_.useRef(null),we=_.useCallback(async(le=1,nt=!1)=>{try{if(!await Ce.isAuthenticated()){d(!1),f(!1);return}le===1?d(!0):f(!0);const et=await Jm.getOrdersPaginated(le,10);o(nt||le===1?et.results||[]:ft=>[...ft,...et.results||[]]),m({page:le,hasMore:!!et.next,total:et.count||0});const tt={},Be=[...new Set((et.results||[]).map(ft=>{var yt,Dt,qt;return(qt=(Dt=(yt=ft.items)==null?void 0:yt[0])==null?void 0:Dt.product_details)==null?void 0:qt.vendor_name}).filter(Boolean))];for(const ft of Be)tt[ft]=await Oe(ft);C(ft=>({...ft,...tt}))}catch(Me){console.error("Error fetching orders:",Me),await Ce.getToken()&&t({title:"Error",description:Me.message||"Failed to load orders",variant:"destructive"})}finally{d(!1),f(!1)}},[n,t]);_.useEffect(()=>{(async()=>{const Be=await Ce.isAuthenticated();i(Be),Be?Ie.current(1,!0):d(!1)})();const nt=Be=>{Be.detail.type==="order"&&!document.hidden&&(me.current&&clearTimeout(me.current),me.current=setTimeout(()=>{document.hidden||Ie.current(1,!0)},2e3))},Me=Be=>{const{orderId:ft,status:yt,type:Dt}=Be.detail;console.log("Order status update received:",{orderId:ft,status:yt,type:Dt}),Ie.current(1,!0)},et=()=>{document.hidden||Ie.current(1,!0)};window.addEventListener("newNotification",nt),window.addEventListener("orderStatusUpdated",Me),document.addEventListener("visibilitychange",et);const tt=setInterval(()=>{document.hidden||Ie.current(1,!0)},3e4);return()=>{window.removeEventListener("newNotification",nt),window.removeEventListener("orderStatusUpdated",Me),document.removeEventListener("visibilitychange",et),clearInterval(tt),me.current&&clearTimeout(me.current)}},[]);const Re=le=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",preparing:"bg-orange-100 text-orange-800",out_for_delivery:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[le]||"bg-gray-100 text-gray-800",Ee=le=>({pending:"Order Placed",confirmed:"Confirmed",preparing:"Preparing",out_for_delivery:"Out for Delivery",delivered:"Delivered",cancelled:"Cancelled"})[le]||le,qe=le=>le==="all"?a:a.filter(nt=>nt.status===le),re=async()=>{if(!y.trim()){t({title:"Reason Required",description:"Please provide a valid reason for cancellation",variant:"destructive"});return}try{await Jm.cancelOrder(j,y),t({title:"Order Cancelled",description:"Your order has been cancelled successfully."}),x(!1),b(""),Ie.current(1,!0)}catch(le){console.error("Error cancelling order:",le),t({title:"Cancellation Failed",description:le.message||"Failed to cancel order",variant:"destructive"})}},je=_.useRef(new Map),Oe=_.useCallback(async le=>{var nt;if(je.current.has(le)){const Me=je.current.get(le);if(Date.now()-Me.timestamp<3e5)return Me.status}try{const{response:Me,data:et}=await Ve(`search/vendors/?search=${encodeURIComponent(le)}`);if(!Me.ok)return!1;const tt=(nt=et==null?void 0:et.results)==null?void 0:nt.find(ft=>ft.business_name===le),Be=(tt==null?void 0:tt.is_active)||!1;return je.current.set(le,{status:Be,timestamp:Date.now()}),Be}catch(Me){return console.error("Error checking vendor status:",Me),!1}},[]),Ye=async le=>{var nt,Me,et;try{const tt=(et=(Me=(nt=le.items)==null?void 0:nt[0])==null?void 0:Me.product_details)==null?void 0:et.vendor_name;if(tt&&!await Oe(tt)){t({title:"Vendor Offline",description:"This vendor is currently offline. Cannot reorder at this time.",variant:"destructive"});return}for(const Be of le.items);t({title:"Items Added",description:"Order items added to cart"}),e("/cart")}catch{t({title:"Reorder Failed",description:"Failed to add items to cart",variant:"destructive"})}},Ie=_.useRef(we);Ie.current=we;const We=_.useCallback(()=>{!h&&u.hasMore&&Ie.current(u.page+1)},[h,u.hasMore,u.page]),{sentinelRef:At}=l0({hasMore:u.hasMore,isLoading:h,onLoadMore:We,threshold:300}),ss=_.memo(({order:le})=>{var nt,Me,et,tt,Be,ft,yt,Dt,qt,ns,fs;return s.jsxs(De,{className:"cursor-pointer hover:shadow-md transition-shadow mb-4",onClick:()=>{oe(le),ee(!0)},children:[s.jsx(kt,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs(Et,{className:"text-lg",children:["Order #",le.order_number]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(le.created_at).toLocaleDateString()})]}),s.jsx(Ze,{className:`${Re(le.status)} px-3 py-1`,children:Ee(le.status)})]})}),s.jsx($e,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2",children:[(nt=le.items)==null?void 0:nt.length," item",((Me=le.items)==null?void 0:Me.length)!==1?"s":""]}),s.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[(et=le.items)==null?void 0:et.slice(0,3).map(Ue=>{var Zs,Ys,er,zn;return s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("img",{src:is((er=(Ys=(Zs=Ue.product_details)==null?void 0:Zs.images)==null?void 0:Ys[0])==null?void 0:er.image_url),alt:Ue.product_name,className:"w-12 h-12 object-cover rounded-lg border"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-xs text-gray-800 font-medium truncate max-w-[100px]",children:Ue.product_name}),s.jsx("p",{className:"text-xs text-gray-600 truncate max-w-[100px] capitalize",children:(zn=Ue.product_details)==null?void 0:zn.category}),Ue.product_selections&&Object.keys(Ue.product_selections).length>0&&s.jsx("div",{className:"text-xs text-blue-600 truncate max-w-[80px]",children:Object.entries(Ue.product_selections).map(([Bi,ya])=>s.jsxs("div",{className:"capitalize",children:[Bi,": ",Array.isArray(ya)?ya.join(", "):ya]},Bi)).slice(0,2)})]})]},Ue.id)}),((tt=le.items)==null?void 0:tt.length)>3&&s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center flex-shrink-0",children:s.jsxs("span",{className:"text-xs text-gray-600",children:["+",le.items.length-3]})})]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 mb-1",children:[s.jsx(xn,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("button",{onClick:Ue=>{var Ys,er,zn;Ue.stopPropagation();const Zs=(zn=(er=(Ys=le.items)==null?void 0:Ys[0])==null?void 0:er.product_details)==null?void 0:zn.vendor_id;Zs&&e(`/vendor/${Zs}`)},className:"text-blue-600 hover:underline text-xs font-medium truncate min-w-0",children:((yt=(ft=(Be=le.items)==null?void 0:Be[0])==null?void 0:ft.product_details)==null?void 0:yt.vendor_name)||"Vendor"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[s.jsx(Jt,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate text-gray-700 min-w-0",children:le.delivery_address})]}),le.status==="out_for_delivery"&&s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cr,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium text-blue-800",children:"Shipping Details"})]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Vehicle:"})," ",le.vehicle_number||"TBA"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Vehicle Color:"})," ",le.vehicle_color||"N/A"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Driver Phone:"})," ",le.delivery_boy_phone||"TBA"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"ETA:"})," ",le.estimated_delivery_time||"TBA"]}),le.delivery_fee>0&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Delivery Fee:"})," Rs ",parseFloat(le.delivery_fee).toFixed(2)]})]})]}),le.status==="cancelled"&&le.cancel_reason&&s.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(tn,{className:"h-4 w-4 text-red-600"}),s.jsx("span",{className:"font-medium text-red-800",children:"Cancellation Reason"})]}),s.jsx("p",{className:"text-sm text-red-700",children:le.cancel_reason}),le.refund_status&&s.jsxs("p",{className:"text-sm text-red-600 mt-1",children:[s.jsx("span",{className:"font-medium",children:"Refund:"})," ",le.refund_status]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mb-2 flex-wrap",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:Ue=>{var Ys;Ue.stopPropagation();const Zs=(Ys=le.vendor_details)==null?void 0:Ys.user;Zs?(console.log("Navigating to vendor user:",Zs,"for order:",le.id),e(`/messages?vendor=${Zs}&order_id=${le.id}&customer_name=${encodeURIComponent(le.delivery_name||"Customer")}`)):console.log("No vendor user ID found for order:",le.id)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:s.jsx(Fp,{className:"h-4 w-4"})}),le.status==="pending"&&s.jsx(se,{variant:"outline",size:"sm",onClick:Ue=>{Ue.stopPropagation(),N(le.id),x(!0)},className:"text-red-600 border-red-200 hover:bg-red-50 px-3 py-1 text-xs h-8 min-w-[60px]",children:"Cancel"}),le.status==="delivered"&&!((Dt=le.refunds)!=null&&Dt.some(Ue=>["requested","approved","rejected","appeal","processed","completed"].includes(Ue.status)))&&(()=>{const Ue=new Date(le.delivered_at);return(new Date-Ue)/(1e3*60*60)<=24})()&&s.jsx(se,{variant:"outline",size:"sm",onClick:Ue=>{Ue.stopPropagation(),B(le),z(!0)},className:"text-orange-600 border-orange-200 hover:bg-orange-50 px-3 py-1 text-xs h-8",children:"Return"}),le.status==="delivered"&&!le.review&&s.jsxs(se,{variant:"outline",size:"sm",onClick:Ue=>{Ue.stopPropagation(),P(le),E(0),O(""),Z(!1),A(!0)},className:"text-emerald-600 border-emerald-200 hover:bg-emerald-50 px-3 py-1 text-xs h-8",children:[s.jsx(Rs,{className:"h-3 w-3 mr-1"}),"Review"]}),le.status==="delivered"&&le.review&&s.jsxs(se,{variant:"outline",size:"sm",onClick:Ue=>{Ue.stopPropagation(),P(le),E(le.review.overall_rating),O(le.review.review_text||""),Z(!0),A(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50 px-3 py-1 text-xs h-8",children:[s.jsx(Rs,{className:"h-3 w-3 mr-1"}),"Edit"]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[(()=>{var Bi;const Ue=((Bi=le.items)==null?void 0:Bi.reduce((ya,ba)=>ya+parseFloat(ba.delivery_fee||0),0))||0,Zs=parseFloat(le.delivery_fee||0),Ys=Math.max(Ue,Zs),er=parseFloat(le.total_amount||0),zn=er+Ys;return s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["Rs ",zn.toFixed(2)]}),Ys>0&&s.jsxs("span",{className:"text-xs text-gray-500",children:["(Bill: Rs ",er.toFixed(2)," + Delivery: Rs ",Ys.toFixed(2),")"]})]})})(),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[le.status==="out_for_delivery"&&s.jsx(se,{variant:"outline",size:"sm",onClick:async Ue=>{Ue.stopPropagation();try{const Zs=await Ce.getToken(),{response:Ys}=await Ve(`/api/orders/${le.id}/status/`,{method:"POST",body:JSON.stringify({status:"delivered",notes:"Marked as received by customer"})});Ys.ok&&(o(er=>er.map(zn=>zn.id===le.id?{...zn,status:"delivered",delivered_at:new Date().toISOString()}:zn)),window.websocket&&window.websocket.readyState===WebSocket.OPEN&&window.websocket.send(JSON.stringify({type:"order_update",action:"order_received",order_id:le.id,timestamp:new Date().toISOString()})),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:le.id,status:"delivered",type:"customer_received"}})))}catch(Zs){console.error("Error marking as received:",Zs)}},className:"text-green-600 border-green-200 hover:bg-green-50",children:"Received"}),(le.status==="cancelled"||le.status==="pending"||le.status==="delivered")&&S[(fs=(ns=(qt=le.items)==null?void 0:qt[0])==null?void 0:ns.product_details)==null?void 0:fs.vendor_name]&&s.jsx(se,{variant:"outline",size:"sm",onClick:Ue=>{Ue.stopPropagation(),Ye(le)},className:"text-green-600 border-green-200 hover:bg-green-50",children:s.jsx(Ro,{className:"h-4 w-4"})})]})]})]})})]},le.id)}),zs=()=>s.jsxs(De,{className:"mb-4",children:[s.jsx(kt,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse w-32"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"})]}),s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-20"})]})}),s.jsx($e,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg animate-pulse"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-1/2"})]})]}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-full"}),s.jsxs("div",{className:"flex justify-between items-center pt-2",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-20"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-16"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-16"})]})]})]})})]});return l&&a.length===0?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Ut,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Orders"}),s.jsx(vk,{})]})}),s.jsx("main",{className:"max-w-4xl mx-auto p-4 pt-2",children:s.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((le,nt)=>s.jsx(zs,{},nt))})})]}):s.jsx(cY,{children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-20",children:[s.jsx("header",{className:"sticky top-0 z-50 bg-white shadow-lg border-b py-4 px-6",children:s.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full",children:s.jsx(Ut,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Orders"}),s.jsx(vk,{})]})}),s.jsx("main",{className:"max-w-4xl mx-auto p-4 pt-2",children:a.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Kt,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No orders yet"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Start shopping to see your orders here"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(se,{onClick:()=>e("/"),className:"bg-emerald-600 hover:bg-emerald-700",children:"Start Shopping"}),!r&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Need to sign in?"}),s.jsx(se,{variant:"outline",onClick:()=>e("/login?redirect=/orders"),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Sign In"})]})]})]}):s.jsxs(Fi,{value:p,onValueChange:w,className:"space-y-6",children:[s.jsx("div",{className:"mb-4",children:u.total>0&&s.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Showing ",a.length," of ",u.total," orders"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(ii,{className:"flex w-max min-w-full gap-1",children:[s.jsxs(Mt,{value:"all",className:"flex-shrink-0 px-2",children:["All ",s.jsxs("span",{className:"font-bold",children:["(",a.length,")"]})]}),s.jsxs(Mt,{value:"pending",className:"flex-shrink-0 px-2",children:["Pending ",s.jsxs("span",{className:"font-bold",children:["(",qe("pending").length,")"]})]}),s.jsxs(Mt,{value:"confirmed",className:"flex-shrink-0 px-2",children:["Confirmed ",s.jsxs("span",{className:"font-bold",children:["(",qe("confirmed").concat(qe("preparing")).length,")"]})]}),s.jsxs(Mt,{value:"shipped",className:"flex-shrink-0 px-2",children:["Shipped ",s.jsxs("span",{className:"font-bold",children:["(",qe("out_for_delivery").length,")"]})]}),s.jsxs(Mt,{value:"delivered",className:"flex-shrink-0 px-2",children:["Delivered ",s.jsxs("span",{className:"font-bold",children:["(",qe("delivered").length,")"]})]}),s.jsxs(Mt,{value:"returns",className:"flex-shrink-0 px-2",children:["Returns ",s.jsxs("span",{className:"font-bold",children:["(",a.filter(le=>{var nt;return((nt=le.refunds)==null?void 0:nt.length)>0}).length,")"]})]}),s.jsxs(Mt,{value:"reviewed",className:"flex-shrink-0 px-2",children:["Reviewed ",s.jsxs("span",{className:"font-bold",children:["(",a.filter(le=>le.review).length,")"]})]}),s.jsxs(Mt,{value:"cancelled",className:"flex-shrink-0 px-2",children:["Cancelled ",s.jsxs("span",{className:"font-bold",children:["(",qe("cancelled").length,")"]})]})]})}),s.jsxs(bt,{value:"all",className:"space-y-4",children:[a.map(le=>s.jsx(ss,{order:le},le.id)),u.hasMore&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{ref:At,className:"h-4"}),h&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-emerald-600 mr-2"}),s.jsx("span",{className:"text-gray-600",children:"Loading more orders..."})]})]})]}),s.jsx(bt,{value:"pending",className:"space-y-4",children:qe("pending").map(le=>s.jsx(ss,{order:le},le.id))}),s.jsx(bt,{value:"confirmed",className:"space-y-4",children:qe("confirmed").concat(qe("preparing")).map(le=>s.jsx(ss,{order:le},le.id))}),s.jsx(bt,{value:"shipped",className:"space-y-4",children:qe("out_for_delivery").map(le=>s.jsx(ss,{order:le},le.id))}),s.jsx(bt,{value:"delivered",className:"space-y-4",children:qe("delivered").map(le=>s.jsxs("div",{children:[s.jsx(ss,{order:le}),le.status==="delivered"&&le.delivered_at&&s.jsx("div",{className:"mt-2 px-4 py-2 bg-gray-50 rounded text-xs text-gray-600",children:(()=>{var Be;const nt=new Date(le.delivered_at),tt=24-(new Date-nt)/(1e3*60*60);return(Be=le.refunds)!=null&&Be.some(ft=>["requested","approved","rejected","appeal","processed","completed"].includes(ft.status))?"Return request already submitted":tt>0?`Return available for ${Math.floor(tt)} hours ${Math.floor(tt%1*60)} minutes`:"Return window expired (24 hours after delivery)"})()})]},le.id))}),s.jsx(bt,{value:"returns",className:"space-y-4",children:a.filter(le=>{var nt;return((nt=le.refunds)==null?void 0:nt.length)>0}).length>0?a.filter(le=>{var nt;return((nt=le.refunds)==null?void 0:nt.length)>0}).map(le=>{var nt,Me,et,tt;return s.jsx("div",{className:"bg-white rounded-lg border",children:s.jsxs("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>{oe(le),ee(!0)},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("h3",{className:"font-semibold text-sm text-gray-900",children:["Order #",le.order_number]})}),s.jsxs(Ze,{className:"bg-orange-100 text-orange-800 flex items-center gap-1 text-xs px-2 py-1",children:[s.jsx(Ro,{className:"h-3 w-3"}),"Return Request"]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(xn,{className:"h-4 w-4"}),s.jsx("span",{className:"truncate",children:((et=(Me=(nt=le.items)==null?void 0:nt[0])==null?void 0:Me.product_details)==null?void 0:et.vendor_name)||"Vendor"})]}),(tt=le.refunds)==null?void 0:tt.map(Be=>{var ft;return s.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium",children:"Return Reason:"}),s.jsx(Ze,{className:`text-xs ${Be.status==="requested"?"bg-yellow-100 text-yellow-800":Be.status==="approved"?"bg-green-100 text-green-800":Be.status==="rejected"?"bg-red-100 text-red-800":Be.status==="appeal"?"bg-purple-100 text-purple-800":Be.status==="processed"?"bg-blue-100 text-blue-800":Be.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:Be.status.charAt(0).toUpperCase()+Be.status.slice(1)})]}),s.jsx("p",{className:"text-xs text-gray-700 capitalize",children:Be.reason.replace("_"," ")}),Be.customer_notes&&s.jsxs("p",{className:"text-xs text-gray-600",children:['"',Be.customer_notes,'"']}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Amount:"})," Rs ",Be.requested_amount]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Method:"})," ",Be.refund_method]}),((ft=Be.evidence_photos)==null?void 0:ft.length)>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium mb-1",children:"Evidence Documents:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:Be.evidence_photos.map((yt,Dt)=>{var fs;const qt=(fs=yt.filename)==null?void 0:fs.match(/\.(jpg|jpeg|png|gif|webp)$/i);let ns;return yt.filename.startsWith("http")?ns=yt.filename:yt.filename.startsWith("/media/")?ns=`${bn.BASE_URL}${yt.filename}`:ns=`${bn.BASE_URL}/media/${yt.filename}`,s.jsxs("div",{className:"bg-blue-100 p-2 rounded text-xs cursor-pointer hover:bg-blue-200 transition-colors flex items-center gap-1",onClick:Ue=>{Ue.stopPropagation(),qt?(Pe(ns),de(!0)):window.open(ns,"_blank")},children:[qt?s.jsx(en,{className:"h-3 w-3 text-blue-600"}):s.jsx(Kt,{className:"h-3 w-3 text-blue-600"}),s.jsx("span",{className:"text-blue-800",children:yt.filename||`Document ${Dt+1}`})]},Dt)})})]}),Be.status==="completed"&&s.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded p-2 mt-2",children:[s.jsx("p",{className:"text-xs text-emerald-800 font-medium mb-2",children:" Refund Completed"}),s.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"*Delivery charges are not included in refund amount"}),!Be.customer_received_refund&&!Be.support_contacted&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(se,{size:"sm",variant:"outline",className:"w-full text-orange-600 border-orange-200 hover:bg-orange-50",onClick:yt=>{yt.stopPropagation();const Dt=` REFUND ISSUE REPORT

Order: #${le.order_number}
Refund ID: ${Be.id}
Amount: Rs ${Be.requested_amount}
Status: ${Be.status}
Method: ${Be.refund_method}

Issue: I have not received my refund or there is an issue with the refund process. Please help resolve this matter.`;e(`/?support_message=${encodeURIComponent(Dt)}`)},children:"Report & Contact Support"}),s.jsx(se,{size:"sm",variant:"outline",className:"w-full text-green-600 border-green-200 hover:bg-green-50",onClick:async yt=>{yt.stopPropagation();try{const{response:Dt}=await Ve(`/refunds/${Be.id}/mark-received/`,{method:"POST"});Dt.ok&&(t({title:"Marked as Received",description:"Thank you for confirming receipt of your refund."}),we(1,!0))}catch{t({title:"Error",description:"Failed to mark refund as received.",variant:"destructive"})}},children:"Mark Received"})]}),Be.customer_received_refund&&s.jsxs("p",{className:"text-xs text-green-700 font-medium",children:[" Marked as received on ",new Date(Be.customer_received_at).toLocaleDateString()]}),Be.support_contacted&&s.jsxs("div",{className:"text-xs text-orange-700",children:[s.jsxs("p",{className:"font-medium",children:[" Support contacted on ",new Date(Be.support_contacted_at).toLocaleDateString()]}),s.jsx("p",{className:"mt-1 bg-white p-1 rounded",children:Be.support_notes})]})]}),Be.status==="processed"&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mt-2",children:[s.jsx("p",{className:"text-xs text-blue-800 font-medium",children:" Money Transferred"}),s.jsx("p",{className:"text-xs text-gray-600",children:"*Delivery charges are not included in refund amount"})]}),Be.admin_notes&&s.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[s.jsx("span",{className:"font-medium",children:"Response:"})," ",Be.admin_notes]}),Be.status==="rejected"&&s.jsx(se,{size:"sm",variant:"outline",className:"w-full mt-2",onClick:async yt=>{yt.stopPropagation();try{const Dt=await Ce.getToken(),{response:qt}=await Ve(`/api/refunds/${Be.id}/appeal/`,{method:"POST",body:JSON.stringify({customer_notes:"Appealing the rejection decision"})});qt.ok&&(t({title:"Appeal Submitted",description:"Your appeal has been submitted for review."}),we(1,!0),window.websocket&&window.websocket.readyState===WebSocket.OPEN&&window.websocket.send(JSON.stringify({type:"refund_update",action:"appeal_submitted",order_id:le.id,refund_id:Be.id,timestamp:new Date().toISOString()})),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:le.id,status:"appeal_submitted",type:"appeal"}})))}catch{t({title:"Error",description:"Failed to submit appeal.",variant:"destructive"})}},children:"Appeal Decision"})]},Be.id)}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[(()=>{var ns;const Be=((ns=le.items)==null?void 0:ns.reduce((fs,Ue)=>fs+parseFloat(Ue.delivery_fee||0),0))||0,ft=parseFloat(le.delivery_fee||0),yt=Math.max(Be,ft),qt=parseFloat(le.total_amount||0)+yt;return s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["Rs ",qt.toFixed(2)]})})(),s.jsxs(se,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:Be=>{Be.stopPropagation(),oe(le),ee(!0)},children:[s.jsx(en,{className:"h-3 w-3 mr-1"}),"View Details"]})]})]})]})},le.id)}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Ro,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No returns yet"}),s.jsx("p",{className:"text-gray-500",children:"Your return requests will appear here"})]})}),s.jsx(bt,{value:"reviewed",className:"space-y-4",children:a.filter(le=>le.review).length>0?a.filter(le=>le.review).map(le=>{var nt;return s.jsx(De,{className:"mb-4",children:s.jsxs($e,{className:"p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg",children:["Order #",le.order_number]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(le.created_at).toLocaleDateString()})]}),s.jsx(Ze,{className:"bg-green-100 text-green-800 px-3 py-1",children:"Reviewed"})]}),s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"flex gap-3 overflow-x-auto",children:(nt=le.items)==null?void 0:nt.slice(0,3).map(Me=>{var et,tt,Be,ft;return s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("img",{src:((Be=(tt=(et=Me.product_details)==null?void 0:et.images)==null?void 0:tt[0])==null?void 0:Be.image_url)||"/placeholder-product.jpg",alt:Me.product_name,className:"w-12 h-12 object-cover rounded-lg border"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:Me.product_name}),s.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:(ft=Me.product_details)==null?void 0:ft.category})]})]},Me.id)})})}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Your Review"}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(Me=>s.jsx(Rs,{className:`h-4 w-4 ${Me<=le.review.overall_rating?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},Me))})]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{P(le),E(le.review.overall_rating),O(le.review.review_text||""),Z(!0),A(!0)},className:"h-7 text-xs",children:"Edit"})]}),le.review.review_text&&s.jsx("p",{className:"text-sm text-gray-700",children:le.review.review_text}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Reviewed on ",new Date(le.review.created_at).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t mt-3",children:[(()=>{var yt;const Me=((yt=le.items)==null?void 0:yt.reduce((Dt,qt)=>Dt+parseFloat(qt.delivery_fee||0),0))||0,et=parseFloat(le.delivery_fee||0),tt=Math.max(Me,et),ft=parseFloat(le.total_amount||0)+tt;return s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["Rs ",ft.toFixed(2)]})})(),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{oe(le),ee(!0)},className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"View Details"})]})]})},le.id)}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Rs,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No reviews yet"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Complete your orders and share your experience"})]})}),s.jsx(bt,{value:"cancelled",className:"space-y-4",children:qe("cancelled").map(le=>s.jsx(ss,{order:le},le.id))})]})}),s.jsx(jn,{}),s.jsx(yc,{open:g,onOpenChange:x,children:s.jsxs(el,{className:"sm:max-w-md",children:[s.jsx(tl,{children:s.jsx(sl,{children:"Cancel Order"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"reason",children:"Reason for Cancellation *"}),s.jsxs(Zt,{value:y,onValueChange:b,children:[s.jsx(Wt,{children:s.jsx(Yt,{placeholder:"Select a reason"})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"changed_mind",children:"Changed my mind"}),s.jsx(st,{value:"found_better_price",children:"Found better price elsewhere"}),s.jsx(st,{value:"delivery_too_long",children:"Delivery time too long"}),s.jsx(st,{value:"ordered_by_mistake",children:"Ordered by mistake"}),s.jsx(st,{value:"payment_issues",children:"Payment issues"}),s.jsx(st,{value:"other",children:"Other reason"})]})]})]}),y==="other"&&s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"custom_reason",children:"Please specify"}),s.jsx(Gs,{id:"custom_reason",placeholder:"Enter your reason...",value:y,onChange:le=>b(le.target.value)})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(se,{variant:"outline",onClick:()=>x(!1),className:"flex-1",children:"Keep Order"}),s.jsx(se,{onClick:re,className:"flex-1 bg-red-600 hover:bg-red-700",disabled:!y,children:"Cancel Order"})]})]})]})}),s.jsx(yc,{open:T,onOpenChange:A,children:s.jsxs(el,{className:"sm:max-w-md",children:[s.jsx(tl,{children:s.jsx(sl,{children:M?"Edit Review":"Rate & Review Order"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Rating *"}),s.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,3,4,5].map(le=>s.jsx("button",{onClick:()=>E(le),className:`text-2xl ${le<=R?"text-yellow-400":"text-gray-300"}`,children:""},le))})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"review",children:"Review (Optional)"}),s.jsx(Gs,{id:"review",placeholder:"Share your experience...",value:F,onChange:le=>O(le.target.value),rows:3})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(se,{variant:"outline",onClick:()=>{A(!1),E(0),O(""),Z(!1)},className:"flex-1",children:"Cancel"}),s.jsx(se,{onClick:async()=>{if(R)try{const le=await Ce.getToken(),nt="POST",{response:Me,data:et}=await Ve(`/api/orders/${I.id}/review/`,{method:nt,body:JSON.stringify({overall_rating:R,review_text:F})});if(Me.ok&&et){const tt={overall_rating:R,review_text:F,created_at:new Date().toISOString()};o(Be=>Be.map(ft=>ft.id===I.id?{...ft,review:tt}:ft)),A(!1),E(0),O(""),Z(!1),t({title:M?"Review Updated":"Review Submitted",description:"Thank you for your feedback!"}),window.websocket&&window.websocket.readyState===WebSocket.OPEN&&window.websocket.send(JSON.stringify({type:"order_update",action:"review_submitted",order_id:I.id,timestamp:new Date().toISOString()})),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:I.id,status:"reviewed",type:"review"}}))}}catch(le){console.error("Error submitting review:",le),t({title:"Error",description:"Failed to submit review. Please try again.",variant:"destructive"})}},className:"flex-1 bg-emerald-600 hover:bg-emerald-700",disabled:!R,children:M?"Update Review":"Submit Review"})]})]})]})}),s.jsx(Zn,{open:X,onOpenChange:z,children:s.jsxs(Pn,{side:"bottom",className:"h-[80vh] rounded-t-xl",children:[s.jsx(An,{className:"pb-4",children:s.jsxs(On,{className:"text-left flex items-center gap-2",children:[s.jsx(Ro,{className:"h-5 w-5"}),"Return Order #",D==null?void 0:D.order_number]})}),s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Return Reason *"}),s.jsxs(Zt,{value:V,onValueChange:H,children:[s.jsx(Wt,{children:s.jsx(Yt,{placeholder:"Select reason for return"})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"defective_product",children:"Defective/Damaged Product"}),s.jsx(st,{value:"wrong_item",children:"Wrong Item Delivered"}),s.jsx(st,{value:"quality_issue",children:"Quality Issue"}),s.jsx(st,{value:"not_as_described",children:"Not as Described"}),s.jsx(st,{value:"expired_product",children:"Expired Product"}),s.jsx(st,{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Additional Notes"}),s.jsx(Gs,{placeholder:"Describe the issue in detail...",value:q,onChange:le=>W(le.target.value),rows:3})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Evidence Photos/Documents *"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Please provide evidence to support your return request"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[s.jsx(Bp,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload photos or documents as proof"}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:le=>ce(Array.from(le.target.files)),className:"hidden",id:"evidence-upload"}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>document.getElementById("evidence-upload").click(),className:"mt-2",children:"Choose Files"})]}),be.length>0&&s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[be.length," file(s) selected:"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:be.map((le,nt)=>s.jsxs("div",{className:"bg-gray-50 p-2 rounded text-xs flex items-center justify-between",children:[s.jsx("span",{className:"truncate",children:le.name}),s.jsx("button",{onClick:()=>ce(Me=>Me.filter((et,tt)=>tt!==nt)),className:"text-red-500 hover:text-red-700 ml-2",children:""})]},nt))})]})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Refund Method *"}),s.jsxs(Zt,{value:Y,onValueChange:U,children:[s.jsx(Wt,{children:s.jsx(Yt,{placeholder:"Select refund method"})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"esewa",children:"eSewa"}),s.jsx(st,{value:"khalti",children:"Khalti"}),s.jsx(st,{value:"bank",children:"Bank Transfer"})]})]})]}),Y==="esewa"&&s.jsxs("div",{children:[s.jsx(ve,{children:"eSewa Number *"}),s.jsx(_e,{placeholder:"98XXXXXXXX",value:G,onChange:le=>ne(le.target.value)})]}),Y==="khalti"&&s.jsxs("div",{children:[s.jsx(ve,{children:"Khalti Number *"}),s.jsx(_e,{placeholder:"98XXXXXXXX",value:J,onChange:le=>ie(le.target.value)})]}),Y==="bank"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Account Holder Name *"}),s.jsx(_e,{placeholder:"Full name as per bank account",value:xe,onChange:le=>Se(le.target.value)})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Account Number *"}),s.jsx(_e,{placeholder:"Bank account number",value:ue,onChange:le=>he(le.target.value)})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Bank Branch *"}),s.jsx(_e,{placeholder:"Branch name",value:Q,onChange:le=>ye(le.target.value)})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Xu,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Return Policy"}),s.jsxs("ul",{className:"text-xs space-y-1",children:[s.jsx("li",{children:" Returns are processed within 3-5 business days"}),s.jsx("li",{children:" Refund will be processed after vendor approval"}),s.jsx("li",{children:" You can appeal if your return is rejected"}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Delivery charges are not included in refund amount"})]})]})]})]})})]}),s.jsxs("div",{className:"fixed bottom-4 left-4 right-4 flex gap-2",children:[s.jsx(se,{variant:"outline",className:"flex-1",onClick:()=>{z(!1),H(""),W(""),U(""),ne(""),ie(""),Se(""),he(""),ye(""),ce([])},children:"Cancel"}),s.jsx(se,{className:"flex-1 bg-orange-600 hover:bg-orange-700",disabled:!V||!Y||be.length===0||Y==="esewa"&&!G||Y==="khalti"&&!J||Y==="bank"&&(!xe||!ue||!Q),onClick:async()=>{try{const le=await Ce.getToken(),nt=new FormData;nt.append("reason",V),nt.append("customer_notes",q),nt.append("refund_method",Y),nt.append("requested_amount",D.total_amount),Y==="esewa"&&nt.append("esewa_number",G),Y==="khalti"&&nt.append("khalti_number",J),Y==="bank"&&(nt.append("bank_account_name",xe),nt.append("bank_account_number",ue),nt.append("bank_branch",Q)),be.forEach((et,tt)=>{nt.append(`evidence_${tt}`,et)}),(await fetch(`${bn.BASE_URL}/orders/${D.id}/return/`,{method:"POST",headers:{Authorization:`Token ${le}`,"ngrok-skip-browser-warning":"true","x-ngrok-skip-browser-warning":"true"},body:nt})).ok&&(t({title:"Return Requested",description:"Your return request has been submitted successfully."}),z(!1),we(1,!0))}catch{t({title:"Error",description:"Failed to submit return request.",variant:"destructive"})}},children:"Submit Return Request"})]})]})}),s.jsx(Zn,{open:ge,onOpenChange:ee,children:s.jsxs(Pn,{side:"bottom",className:"h-[90vh] rounded-t-xl",children:[s.jsx(An,{className:"pb-4",children:s.jsxs(On,{className:"text-left",children:["Order Details - #",ae==null?void 0:ae.order_number]})}),ae&&s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Order Items"}),s.jsx("div",{className:"space-y-2",children:((rn=ae.items)==null?void 0:rn.map((le,nt)=>{var Me,et,tt;return s.jsxs("div",{className:"py-1 border-b border-gray-100 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("img",{src:((tt=(et=(Me=le.product_details)==null?void 0:Me.images)==null?void 0:et[0])==null?void 0:tt.image_url)||"/placeholder-product.jpg",alt:le.product_name,className:"w-8 h-8 object-cover rounded"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:le.product_name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",le.quantity]}),s.jsxs("p",{className:"text-sm font-semibold text-emerald-600 mt-1",children:["Rs ",le.total_price]})]})]}),le.product_selections&&Object.keys(le.product_selections).length>0&&s.jsxs("div",{className:"text-xs text-blue-600 mt-2 bg-blue-50 p-2 rounded border border-blue-200",children:[s.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"Selected Variants:"}),(()=>{const Be=le.product_selections,ft=Object.keys(Be);if(ft.length===0)return null;const yt=ft[0];return(Array.isArray(Be[yt])?Be[yt]:[Be[yt]]).map((qt,ns)=>s.jsxs("div",{className:"mb-1 p-1 bg-white rounded border",children:[s.jsxs("span",{className:"font-medium text-blue-900",children:["Item ",ns+1,":"]}),ft.map(fs=>{const Ue=Array.isArray(Be[fs])?Be[fs]:[Be[fs]];return s.jsxs("span",{className:"ml-2 capitalize",children:[fs,": ",s.jsx("span",{className:"font-medium",children:Ue[ns]||Ue[0]})]},fs)})]},ns))})()]})]},nt)}))||[]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Delivery Information"}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Address:"})," ",ae.delivery_address]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Phone:"})," ",ae.delivery_phone]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Name:"})," ",ae.delivery_name]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-3",children:"Payment Details"}),(()=>{var yt;const le=((yt=ae.items)==null?void 0:yt.reduce((Dt,qt)=>Dt+parseFloat(qt.delivery_fee||0),0))||0,nt=parseFloat(ae.delivery_fee||0),Me=Math.max(le,nt),et=parseFloat(ae.subtotal||0),tt=parseFloat(ae.tax_amount||0),Be=et+tt,ft=Be+Me;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-emerald-50 p-3 rounded-lg border border-emerald-200 mb-3",children:[s.jsxs("h4",{className:"font-semibold text-emerald-800 text-sm mb-2",children:["Bill Amount (Paid via ",ae.payment_method,")"]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["Rs ",et.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax:"}),s.jsxs("span",{children:["Rs ",tt.toFixed(2)]})]}),s.jsx("hr",{className:"my-1"}),s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx("span",{children:"Bill Total (Paid):"}),s.jsxs("span",{className:"text-emerald-600",children:["Rs ",Be.toFixed(2)]})]})]})]}),Me>0&&s.jsx("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200 mb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-orange-800 text-base",children:"Delivery Fee"}),s.jsx("p",{className:"text-xs text-orange-700",children:ae.status==="delivered"?"Paid on delivery":"Pay on delivery"})]}),s.jsxs("span",{className:"font-bold text-lg text-orange-600",children:["Rs ",Me.toFixed(2)]})]})}),s.jsx("hr",{className:"my-2"}),s.jsxs("div",{className:"flex justify-between font-semibold text-sm",children:[s.jsx("span",{children:"Grand Total:"}),s.jsxs("span",{children:["Rs ",ft.toFixed(2)]})]})]})})(),s.jsxs("div",{className:"mt-3 pt-2 border-t space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Payment Method:"}),s.jsx("span",{className:"capitalize",children:ae.payment_method})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Payment Status:"}),s.jsx(Ze,{variant:ae.payment_status==="paid"?"default":"secondary",className:"text-xs",children:ae.payment_status})]})]})]}),((Ks=ae.refunds)==null?void 0:Ks.map(le=>{var nt;return s.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-3 flex items-center gap-2",children:[s.jsx(Ro,{className:"h-4 w-4"}),"Return/Refund Details"]}),s.jsxs("div",{className:"space-y-3 text-xs",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Status:"}),s.jsx(Ze,{className:`text-xs ${le.status==="requested"?"bg-yellow-100 text-yellow-800":le.status==="approved"?"bg-green-100 text-green-800":le.status==="rejected"?"bg-red-100 text-red-800":le.status==="appeal"?"bg-purple-100 text-purple-800":le.status==="processed"?"bg-blue-100 text-blue-800":le.status==="completed"?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:le.status.charAt(0).toUpperCase()+le.status.slice(1)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Reason:"}),s.jsx("p",{className:"text-gray-600 capitalize",children:le.reason.replace("_"," ")})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Requested Amount:"}),s.jsxs("p",{className:"text-gray-600",children:["Rs ",le.requested_amount]})]}),le.approved_amount&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Approved Amount:"}),s.jsxs("p",{className:"text-gray-600",children:["Rs ",le.approved_amount]})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2",children:[s.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Your Refund Details:"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Method:"})," ",le.refund_method]}),le.refund_method==="esewa"&&le.esewa_number&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"eSewa Number:"})," ",le.esewa_number]}),le.refund_method==="khalti"&&le.khalti_number&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Khalti Number:"})," ",le.khalti_number]}),le.refund_method==="bank"&&s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Account Name:"})," ",le.bank_account_name]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Account Number:"})," ",le.bank_account_number]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Branch:"})," ",le.bank_branch]})]})]})]}),le.customer_notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Your Notes:"}),s.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:le.customer_notes})]}),le.admin_notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Vendor Response:"}),s.jsx("p",{className:"text-gray-600 bg-white p-2 rounded",children:le.admin_notes})]}),((nt=le.evidence_photos)==null?void 0:nt.length)>0&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Evidence Documents:"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:le.evidence_photos.map((Me,et)=>{var ft;const tt=(ft=Me.filename)==null?void 0:ft.match(/\.(jpg|jpeg|png|gif|webp)$/i);let Be;return Me.filename.startsWith("http")?Be=Me.filename:Be=is(Me.filename),s.jsxs("div",{className:"bg-white p-2 rounded border hover:shadow-md transition-shadow",children:[tt?s.jsxs("div",{className:"cursor-pointer mb-2 group",onClick:()=>{Pe(Be),de(!0)},children:[s.jsxs("div",{className:"relative overflow-hidden rounded",children:[s.jsx("img",{src:Be,alt:Me.filename,className:"w-full h-20 object-cover rounded mb-1 group-hover:scale-105 transition-transform",onError:yt=>{yt.currentTarget.src="/placeholder-image.svg",yt.currentTarget.alt="Image not found"}}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all flex items-center justify-center",children:s.jsx(en,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),s.jsx("p",{className:"text-xs text-blue-600 font-medium",children:" Click to enlarge"})]}):s.jsx("div",{className:"w-full h-20 bg-gray-100 rounded mb-2 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>{window.open(Be,"_blank")},children:s.jsxs("div",{className:"text-center",children:[s.jsx(Kt,{className:"h-6 w-6 text-gray-400 mx-auto mb-1"}),s.jsx("span",{className:"text-xs text-gray-500",children:"Document"})]})}),s.jsx("p",{className:"font-medium text-xs truncate",title:Me.filename,children:Me.filename||`Document ${et+1}`}),s.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",Me.uploaded_by]}),s.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",new Date(Me.uploaded_at).toLocaleDateString()]})]},et)})})]}),le.status==="completed"&&s.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded p-2 mt-2",children:[s.jsx("p",{className:"text-xs text-emerald-800 font-medium mb-2",children:" Refund Completed"}),s.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"*Delivery charges are not included in refund amount"}),!le.customer_received_refund&&!le.support_contacted&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(se,{size:"sm",variant:"outline",className:"w-full text-orange-600 border-orange-200 hover:bg-orange-50",onClick:()=>{const Me=` REFUND ISSUE REPORT

Order: #${ae.order_number}
Refund ID: ${le.id}
Amount: Rs ${le.requested_amount}
Status: ${le.status}
Method: ${le.refund_method}

Issue: I have not received my refund or there is an issue with the refund process. Please help resolve this matter.`;e(`/?support_message=${encodeURIComponent(Me)}`)},children:"Report & Contact Support"}),s.jsx(se,{size:"sm",variant:"outline",className:"w-full text-green-600 border-green-200 hover:bg-green-50",onClick:async()=>{try{const{response:Me}=await Ve(`/refunds/${le.id}/mark-received/`,{method:"POST"});Me.ok&&(t({title:"Marked as Received",description:"Thank you for confirming receipt of your refund."}),we(1,!0),ee(!1))}catch{t({title:"Error",description:"Failed to mark refund as received.",variant:"destructive"})}},children:"Mark Received"})]}),le.customer_received_refund&&s.jsxs("p",{className:"text-xs text-green-700 font-medium",children:[" Marked as received on ",new Date(le.customer_received_at).toLocaleDateString()]}),le.support_contacted&&s.jsxs("div",{className:"text-xs text-orange-700",children:[s.jsxs("p",{className:"font-medium",children:[" Support contacted on ",new Date(le.support_contacted_at).toLocaleDateString()]}),s.jsx("p",{className:"mt-1 bg-white p-1 rounded",children:le.support_notes})]})]}),le.status==="processed"&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mt-2",children:[s.jsx("p",{className:"text-xs text-blue-800 font-medium",children:" Money Transferred"}),s.jsx("p",{className:"text-xs text-gray-600",children:"*Delivery charges are not included in refund amount"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500 border-t pt-2",children:[s.jsx("div",{children:s.jsxs("p",{children:["Requested: ",new Date(le.requested_at).toLocaleDateString()]})}),le.approved_at&&s.jsx("div",{children:s.jsxs("p",{children:["Approved: ",new Date(le.approved_at).toLocaleDateString()]})}),le.processed_at&&s.jsx("div",{children:s.jsxs("p",{children:["Processed: ",new Date(le.processed_at).toLocaleDateString()]})}),le.completed_at&&s.jsx("div",{children:s.jsxs("p",{children:["Completed: ",new Date(le.completed_at).toLocaleDateDate()]})}),le.appeal_at&&s.jsx("div",{children:s.jsxs("p",{children:["Appealed: ",new Date(le.appeal_at).toLocaleDateString()]})})]})]})]},le.id)}))||[]]})]})}),s.jsx(yc,{open:ke,onOpenChange:de,children:s.jsxs(el,{className:"max-w-5xl max-h-[95vh] p-4",children:[s.jsx(tl,{className:"pb-4",children:s.jsxs(sl,{className:"flex items-center gap-2",children:[s.jsx(en,{className:"h-5 w-5"}),"Evidence Document Preview"]})}),s.jsx("div",{className:"flex justify-center items-center bg-gray-50 rounded-lg p-4",children:s.jsx("img",{src:pe,alt:"Evidence Preview",className:"max-w-full max-h-[75vh] object-contain rounded shadow-lg",onError:le=>{le.currentTarget.src="/placeholder-image.svg",le.currentTarget.alt="Image not found"}})}),s.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>window.open(pe,"_blank"),children:[s.jsx(Eh,{className:"h-4 w-4 mr-2"}),"Open in New Tab"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{const le=document.createElement("a");le.href=pe,le.download="evidence-document",le.click()},children:[s.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})})]})})}const uY=[{id:1,type:"home",label:"Home",name:"John Doe",phone:"+977 9841234567",address:"123 Thamel Street, Thamel",city:"Kathmandu",landmark:"Near Durbar Square",isDefault:!0},{id:2,type:"work",label:"Office",name:"John Doe",phone:"+977 9841234567",address:"456 Lazimpat Road, Lazimpat",city:"Kathmandu",landmark:"Opposite British Embassy",isDefault:!1}],hY=e=>{switch(e){case"home":return s.jsx(Xb,{className:"h-5 w-5"});case"work":return s.jsx(FF,{className:"h-5 w-5"});case"other":return s.jsx(cr,{className:"h-5 w-5"});default:return s.jsx(Jt,{className:"h-5 w-5"})}};function fY(){const e=lt(),[t,n]=_.useState(uY),r=()=>{console.log("Add new address")},i=l=>{console.log("Edit address",l)},a=l=>{n(t.filter(d=>d.id!==l))},o=l=>{n(t.map(d=>({...d,isDefault:d.id===l})))};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"My Addresses"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:s.jsx(bs,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[t.length>0?t.map(l=>s.jsxs(De,{className:"hover:shadow-md transition-shadow",children:[s.jsx(kt,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:hY(l.type)}),s.jsx("div",{children:s.jsxs(Et,{className:"text-base flex items-center gap-2",children:[l.label,l.isDefault&&s.jsx(Ze,{variant:"secondary",className:"text-xs",children:"Default"})]})})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>i(l.id),className:"p-2",children:s.jsx(kh,{className:"h-4 w-4"})}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>a(l.id),className:"p-2 text-red-600 hover:text-red-700",children:s.jsx(so,{className:"h-4 w-4"})})]})]})}),s.jsxs($e,{className:"space-y-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:l.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:l.phone}),s.jsx("p",{className:"text-sm",children:l.address}),s.jsx("p",{className:"text-sm",children:l.city}),l.landmark&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Landmark: ",l.landmark]})]}),!l.isDefault&&s.jsx(se,{variant:"outline",size:"sm",onClick:()=>o(l.id),className:"w-full mt-3",children:"Set as Default"})]})]},l.id)):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Jt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No addresses found"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Add your delivery addresses to make ordering faster"}),s.jsxs(se,{onClick:r,children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add New Address"]})]}),t.length>0&&s.jsx(De,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:s.jsx($e,{className:"p-6 text-center",children:s.jsxs(se,{variant:"ghost",onClick:r,className:"w-full h-16 flex flex-col items-center gap-2",children:[s.jsx(bs,{className:"h-6 w-6"}),s.jsx("span",{children:"Add New Address"})]})})})]}),s.jsx(jn,{})]})}const mY=[{id:1,type:"card",last4:"4242",brand:"Visa",expiryMonth:12,expiryYear:2026,isDefault:!0,cardholderName:"John Doe"},{id:2,type:"card",last4:"8888",brand:"Mastercard",expiryMonth:8,expiryYear:2025,isDefault:!1,cardholderName:"John Doe"}],pY=e=>s.jsx(bl,{className:"h-5 w-5"}),gY=e=>`   ${e}`;function vY(){const e=lt(),[t,n]=_.useState(mY),r=()=>{console.log("Add new payment method")},i=l=>{console.log("Edit payment method",l)},a=l=>{n(t.filter(d=>d.id!==l))},o=l=>{n(t.map(d=>({...d,isDefault:d.id===l})))};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Payment Methods"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:s.jsx(bs,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[t.length>0?t.map(l=>s.jsxs(De,{className:"hover:shadow-md transition-shadow",children:[s.jsx(kt,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:pY(l.brand)}),s.jsxs("div",{children:[s.jsxs(Et,{className:"text-base flex items-center gap-2",children:[l.brand," ",gY(l.last4),l.isDefault&&s.jsx(Ze,{variant:"secondary",className:"text-xs",children:"Default"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires ",String(l.expiryMonth).padStart(2,"0"),"/",l.expiryYear]})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>i(l.id),className:"p-2",children:s.jsx(kh,{className:"h-4 w-4"})}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>a(l.id),className:"p-2 text-red-600 hover:text-red-700",children:s.jsx(so,{className:"h-4 w-4"})})]})]})}),s.jsxs($e,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Qn,{className:"h-4 w-4"}),s.jsx("span",{children:"Secured with 256-bit SSL encryption"})]}),!l.isDefault&&s.jsx(se,{variant:"outline",size:"sm",onClick:()=>o(l.id),className:"w-full",children:"Set as Default"})]})]},l.id)):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(bl,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No payment methods"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Add a payment method to make checkout faster"}),s.jsxs(se,{onClick:r,children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Payment Method"]})]}),t.length>0&&s.jsx(De,{className:"border-dashed border-2 hover:border-primary/50 transition-colors",children:s.jsx($e,{className:"p-6 text-center",children:s.jsxs(se,{variant:"ghost",onClick:r,className:"w-full h-16 flex flex-col items-center gap-2",children:[s.jsx(bs,{className:"h-6 w-6"}),s.jsx("span",{children:"Add New Payment Method"})]})})}),s.jsx(De,{className:"bg-green-50 border-green-200",children:s.jsx($e,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Qn,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-800 text-sm",children:"Secure Payments"}),s.jsx("p",{className:"text-green-700 text-xs",children:"All payment information is encrypted and secure"})]})]})})})]}),s.jsx(jn,{})]})}const xY=[{id:"orders",title:"Orders & Delivery",icon:Yr,description:"Track orders, delivery issues, cancellations",articles:["How to track my order?","Delivery time and charges","Cancel or modify order","Refund policy"]},{id:"payment",title:"Payment & Billing",icon:Rs,description:"Payment methods, billing, refunds",articles:["Payment methods accepted","Failed payment issues","Refund process","Billing disputes"]},{id:"account",title:"Account & Profile",icon:UF,description:"Account settings, profile management",articles:["Update profile information","Change password","Manage addresses","Privacy settings"]},{id:"technical",title:"Technical Support",icon:Ch,description:"App issues, login problems, bugs",articles:["App not working","Login issues","Payment errors","Report a bug"]}],yY=[{icon:Xr,title:"Live Chat",description:"Chat with our support team",action:"Start Chat",available:!0},{icon:Ch,title:"Phone Support",description:"Call us for immediate help",action:"Call Now",available:!0},{icon:KF,title:"Email Support",description:"Send us an email",action:"Send Email",available:!0}];function bY(){const e=lt(),[t,n]=_.useState(""),r=a=>{switch(a){case"Start Chat":console.log("Starting live chat");break;case"Call Now":window.open("tel:+977-1-234567");break;case"Send Email":window.open("mailto:support@kathsnap.com");break}},i=xY.filter(a=>a.title.toLowerCase().includes(t.toLowerCase())||a.description.toLowerCase().includes(t.toLowerCase())||a.articles.some(o=>o.toLowerCase().includes(t.toLowerCase())));return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white shadow-sm border-b",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Help & Support"}),s.jsx("div",{className:"w-10"})," "]})}),s.jsx("div",{className:"p-4 bg-white border-b",children:s.jsxs("div",{className:"relative",children:[s.jsx(Yo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(_e,{placeholder:"Search help articles...",value:t,onChange:a=>n(a.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"p-4 space-y-4 pb-20",children:[i.map(a=>{const o=a.icon;return s.jsxs(De,{className:"hover:shadow-md transition-shadow",children:[s.jsx(kt,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:s.jsx(o,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Et,{className:"text-base",children:a.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]}),s.jsx(Fc,{className:"h-5 w-5 text-muted-foreground"})]})}),s.jsx($e,{children:s.jsxs("div",{className:"space-y-2",children:[a.articles.slice(0,2).map((l,d)=>s.jsxs("div",{className:"text-sm text-muted-foreground hover:text-primary cursor-pointer",children:[" ",l]},d)),a.articles.length>2&&s.jsxs("div",{className:"text-sm text-primary font-medium cursor-pointer",children:["View all ",a.articles.length," articles"]})]})})]},a.id)}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{className:"text-base",children:"Contact Support"})}),s.jsx($e,{className:"space-y-3",children:yY.map((a,o)=>{const l=a.icon;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>r(a.action),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:s.jsx(l,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:a.title}),s.jsx("div",{className:"text-xs text-muted-foreground",children:a.description})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[a.available&&s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx(Fc,{className:"h-4 w-4 text-muted-foreground"})]})]},o)})})]}),s.jsx(De,{className:"bg-primary/5 border-primary/20",children:s.jsx($e,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Yr,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-primary text-sm",children:"Support Hours"}),s.jsx("p",{className:"text-primary/80 text-xs",children:"Monday - Sunday: 6:00 AM - 10:00 PM"})]})]})})})]}),s.jsx(jn,{})]})}const xk=()=>{var D,B,V,H;const e=lt(),[t]=tg(),n=t.get("vendor"),r=t.get("conversation");_.useEffect(()=>{(async()=>{if(!await Ce.getToken()){const Y=window.location.pathname+window.location.search;e(`/login?redirect=${encodeURIComponent(Y)}`)}})()},[e]);const[i,a]=_.useState(null),[o,l]=_.useState([]),[d,h]=_.useState([]),[f,u]=_.useState(""),[m,p]=_.useState(!0),[w,y]=_.useState(1),[b,g]=_.useState(!1),[x,j]=_.useState(!1),[N,S]=_.useState(null),[C,T]=_.useState(0),A=_.useRef(null),I=_.useRef(null);_.useEffect(()=>{(async()=>{await P(),await R(),ds.initialize(),n&&Z(parseInt(n)),r&&X(parseInt(r))})();const W=Y=>{if(Y.key==="newMessage"&&Y.newValue){const U=JSON.parse(Y.newValue);U.sender!==(N==null?void 0:N.username)&&ds.notifyNewMessage(U.sender,U.content,U.conversationId.toString(),"customer")}};return window.addEventListener("storage",W),()=>window.removeEventListener("storage",W)},[n,r]);const P=async()=>{try{if(!await Ce.getToken())return;const{response:W,data:Y}=await Ve("/profile/");W.ok&&Y&&S(Y)}catch(q){console.error("Failed to fetch current user:",q)}};_.useEffect(()=>{i&&F(i.id)},[i]),_.useEffect(()=>{if(!i)return;const q=async()=>{try{const U=await rr.getMessages(i.id);let G=[];Array.isArray(U)?G=U.reverse():U!=null&&U.results&&Array.isArray(U.results)&&(G=U.results.reverse()),G.length!==C&&(h(G),T(G.length))}catch(U){console.error("Failed to refresh messages:",U)}};q();const W=setInterval(q,5e3),Y=async()=>{document.hidden||q()};return document.addEventListener("visibilitychange",Y),()=>{clearInterval(W),document.removeEventListener("visibilitychange",Y)}},[i,C]);const R=async(q=1,W=!1)=>{try{const{response:Y,data:U}=await Ve(`messaging/conversations/?page=${q}&page_size=20`);if(!Y.ok)throw new Error("Failed to fetch conversations");let G=(U==null?void 0:U.results)||[];q===1&&(G.some(J=>{var ie,xe;return((ie=J.other_participant)==null?void 0:ie.username)==="admin"||((xe=J.other_participant)==null?void 0:xe.id)===1})||(G=[{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}},...G])),l(W?ne=>[...ne,...G]:G),g(!!(U!=null&&U.next)),y(q)}catch(Y){console.error("Failed to load conversations:",Y),q===1&&l([{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}}])}finally{p(!1),j(!1)}},E=async()=>{x||!b||(j(!0),await R(w+1,!0))},F=async q=>{try{const W=await rr.getMessages(q);let Y=[];Array.isArray(W)?Y=W.reverse():W!=null&&W.results&&Array.isArray(W.results)&&(Y=W.results.reverse()),h(Y),T(Y.length)}catch(W){console.error("Failed to load messages:",W),h([]),T(0)}},O=async()=>{if(!(!f.trim()||!i))try{const q=await rr.sendMessage({conversation_id:i.id,message_type:"text",content:f});h(Y=>[...Y,q.message]);const W={conversationId:i.id,sender:(N==null?void 0:N.username)||"Unknown",content:f,timestamp:new Date().toISOString()};localStorage.setItem("newMessage",JSON.stringify(W)),setTimeout(()=>localStorage.removeItem("newMessage"),100);try{const Y=`${bn.BASE_URL}/broadcast/`;await fetch(Y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:(N==null?void 0:N.username)||"Unknown",content:f,conversation_id:i.id})})}catch(Y){console.log("Cross-domain broadcast failed:",Y)}u("")}catch(q){console.error("Failed to send message:",q)}},M=async q=>{var Y;const W=(Y=q.target.files)==null?void 0:Y[0];if(!(!W||!i))try{const U=await rr.sendMessage({conversation_id:i.id,message_type:W.type.startsWith("image/")?"image":"file",file:W});h(G=>[...G,U.message])}catch(U){console.error("Failed to send file:",U)}},Z=async q=>{try{const W=await rr.getOrCreateConversation(q);a(W)}catch(W){console.error("Failed to create conversation:",W)}},X=async q=>{try{await new Promise(Y=>{const U=()=>{o.length>0||!m?Y(!0):setTimeout(U,100)};U()});const W=o.find(Y=>Y.id===q);W&&a(W)}catch(W){console.error("Failed to open conversation:",W)}},z=()=>{var q;(q=A.current)==null||q.scrollIntoView({behavior:"smooth"})};return _.useEffect(()=>{z()},[d]),m?s.jsx("div",{className:"h-screen bg-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),s.jsx("p",{children:"Loading conversations..."})]})}):i?s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{a(null),e("/messages",{replace:!0})},children:s.jsx(Ut,{className:"h-4 w-4"})}),s.jsxs(ha,{className:"h-10 w-10",children:[s.jsx(Wr,{src:is((D=i.other_participant)==null?void 0:D.profile_picture)}),s.jsx(fa,{children:(V=(B=i.other_participant)==null?void 0:B.username)==null?void 0:V.charAt(0)})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-sm",children:(H=i.other_participant)==null?void 0:H.username}),s.jsx("p",{className:"text-xs text-gray-500",children:"Online"})]}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>F(i.id),className:"p-2",children:s.jsx(Ri,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.map(q=>{const W=N&&q.sender.id===N.id;return s.jsx("div",{className:`w-full flex ${W?"justify-end":"justify-start"} mb-2`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow ${W?"bg-blue-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[q.message_type==="text"&&s.jsx("p",{className:"text-sm",children:q.content}),q.message_type==="image"&&s.jsx("div",{className:"space-y-2",children:s.jsx("img",{src:is(q.file_url),alt:"Shared image",className:"rounded max-w-full h-auto"})}),q.message_type==="file"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jy,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:q.file_name})]}),s.jsxs("div",{className:"flex items-center justify-end mt-1 gap-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(q.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),W&&s.jsx("span",{className:`text-xs ${q.is_read?"text-blue-500":"text-gray-400"}`,children:q.is_read?"":""})]})]})},q.id)}),s.jsx("div",{ref:A})]}),s.jsxs("div",{className:"bg-white border-t p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{var q;return(q=I.current)==null?void 0:q.click()},children:s.jsx(jy,{className:"h-4 w-4"})}),s.jsx(_e,{value:f,onChange:q=>u(q.target.value),placeholder:"Type a message...",className:"flex-1",onKeyPress:q=>q.key==="Enter"&&O()}),s.jsx(se,{onClick:O,disabled:!f.trim(),children:s.jsx($p,{className:"h-4 w-4"})})]}),s.jsx("input",{ref:I,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:M,className:"hidden"})]})]}):s.jsxs("div",{className:"h-screen bg-white flex flex-col",children:[s.jsx("div",{className:"border-b p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/home"),children:s.jsx(Ut,{className:"h-4 w-4"})}),s.jsx("h2",{className:"text-lg font-semibold",children:"Messages"})]})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[o.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(Fp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No conversations yet"}),s.jsx("p",{className:"text-sm",children:"Start messaging with vendors!"})]}):o.map((q,W)=>{var Y,U,G,ne,J,ie;return s.jsxs("div",{className:"flex items-center gap-3 p-4 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{q.id===0?Z(1):a(q)},children:[s.jsxs("div",{className:"relative",children:[s.jsxs(ha,{className:"h-12 w-12",children:[s.jsx(Wr,{src:is((Y=q.other_participant)==null?void 0:Y.profile_picture)}),s.jsx(fa,{children:(G=(U=q.other_participant)==null?void 0:U.username)==null?void 0:G.charAt(0)})]}),s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm truncate",children:(ne=q.other_participant)==null?void 0:ne.username}),s.jsx("span",{className:"text-xs text-gray-500",children:q.last_message?new Date(q.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:((J=q.last_message)==null?void 0:J.content)||((ie=q.last_message)==null?void 0:ie.file_name)||"Start conversation"})]}),q.unread_count>0&&s.jsx(Ze,{className:"bg-blue-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center",children:q.unread_count})]},q.id)}),b&&s.jsx("div",{className:"p-4 text-center",children:s.jsx(se,{onClick:E,disabled:x,variant:"outline",className:"w-full",children:x?"Loading...":"Load More Conversations"})})]})]})},wY=`
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
`;if(typeof document<"u"){const e=document.createElement("style");e.textContent=wY,document.head.appendChild(e)}const y0=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3},_Y=()=>{const e=27.6398805,t=85.3303725,n=27.66424179701499,r=85.3465231243003,i=y0(e,t,n,r);console.log(` Your coordinates test: ${i.toFixed(3)} km (Google shows: 5.1 km)`);const a={lat:40.7128,lon:-74.006},o={lat:34.0522,lon:-118.2437},l=y0(a.lat,a.lon,o.lat,o.lon);console.log(`Test: NYC to LA = ${l.toFixed(2)} km (Google: ~3944 km)`),console.log(` Verify on Google Maps: https://www.google.com/maps/dir/${e},${t}/${n},${r}`)};function jY(){const e=lt(),{categoryName:t}=eg(),[n,r]=_.useState({products:[]}),[i,a]=_.useState(!1),[o,l]=_.useState(ht.getLocation()),[d,h]=_.useState({page:1,hasMore:!0}),[f,u]=_.useState(new Set),[m,p]=_.useState(!1),[w,y]=_.useState(""),[b,g]=_.useState([]),[x,j]=_.useState(""),[N,S]=_.useState({}),{addToCart:C}=$n(),{toast:T}=ts(),A=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];_.useEffect(()=>{const z=ht.subscribe(l);return ht.startTracking(),_Y(),P(),O(),I(),z},[t]),_.useEffect(()=>{P(1)},[w,t,x]),_.useEffect(()=>{o&&(console.log(" Location updated, refetching data:",o),P(1))},[o]);const I=async()=>{try{console.log(" Fetching subcategories for:",t);const D=await(await fetch(`${Qe}categories/`)).json();console.log(" Categories API response:",D);const V=(D.categories||D.results||[]).find(H=>H.name.toLowerCase()===t.toLowerCase());if(console.log(" Found category:",V),V!=null&&V.subcategories)console.log(" Setting subcategories:",V.subcategories),g(V.subcategories);else{console.log(" No subcategories found for category, trying alternative endpoint");const H=await fetch(`${Qe}categories/${t}/subcategories/`);if(H.ok){const q=await H.json();console.log(" Subcategories API response:",q),g(q.subcategories||q.results||q||[])}}}catch(z){console.error("Failed to fetch subcategories:",z)}},P=async(z=1)=>{a(!0);try{const D=localStorage.getItem("token"),B=D?{Authorization:`Token ${D}`}:{},V=ht.getLocation();console.log(" Frontend location check:",{userLocation:o,currentLocation:V});const H=new URLSearchParams({page:z.toString(),page_size:"100"});V?(H.append("latitude",V.latitude.toString()),H.append("longitude",V.longitude.toString()),console.log(" Sending location to API:",V)):console.log(" No location available for API call");const W=await(await fetch(`${Qe}search/products/?${H}`,{headers:B})).json(),Y=R(W.results||[]);if(z===1){r({products:Y});const ne=Y.map(J=>J.id);M(ne)}else r(ne=>({products:[...ne.products,...Y]}));const G=(W.results||[]).filter(ne=>{const J=ne.category&&ne.category.toLowerCase()===t.toLowerCase(),ie=!x||ne.subcategory&&ne.subcategory.toLowerCase()===x.toLowerCase();return J&&ie}).length;h({page:z,hasMore:W.next!==null&&G>=10})}catch(D){console.error("Fetch error:",D)}finally{a(!1)}},R=z=>{const D=ht.getLocation(),B=q=>{if(!q)return 0;if(q.reviews&&Array.isArray(q.reviews)&&q.reviews.length>0){const W=q.reviews.map(Y=>Number(Y.rating??Y.stars??Y.score??0)).filter(Y=>!isNaN(Y));if(W.length>0){const Y=W.reduce((U,G)=>U+G,0);return Math.max(0,Math.min(5,Y/W.length))}}return q.average_rating!=null?Number(q.average_rating):q.rating!=null?Number(q.rating):0};let H=z.filter(q=>{const W=q.category&&q.category.toLowerCase()===t.toLowerCase(),Y=!x||q.subcategory&&q.subcategory.toLowerCase()===x.toLowerCase();return W&&Y}).map(q=>{var ne,J;const W=((ne=q.images)==null?void 0:ne.find(ie=>ie.is_primary))||((J=q.images)==null?void 0:J[0]);let Y="N/A",U=1/0;D&&q.vendor_latitude&&q.vendor_longitude&&(U=y0(D.latitude,D.longitude,q.vendor_latitude,q.vendor_longitude),Y=`${U.toFixed(1)} km`);const G=vo(q,q.vendor_delivery_fee);return{id:q.id,name:q.name,vendor:q.vendor_name||"Unknown Vendor",vendor_id:q.vendor_id,price:`${q.price}`,priceValue:parseFloat(q.price),image:(W==null?void 0:W.image_url)||"/placeholder-product.jpg",rating:B(q),distance:Y,distanceValue:U,deliveryTime:"30-45 mins",inStock:q.quantity>0,category:q.category,totalSold:q.total_sold||0,deliveryInfo:G,vendorOnline:q.vendor_online!==!1,deliveryRadius:hl(q)??1/0,free_delivery:q.free_delivery,custom_delivery_fee_enabled:q.custom_delivery_fee_enabled,custom_delivery_fee:q.custom_delivery_fee}}).filter(q=>q.inStock?q.vendorOnline?q.distanceValue!==1/0&&q.distanceValue>q.deliveryRadius?(console.log(` Excluding product ${q.name} - outside delivery radius (${q.distanceValue.toFixed(1)}km > ${q.deliveryRadius}km)`),!1):!0:(console.log(` Excluding product ${q.name} - vendor offline`),!1):(console.log(` Excluding product ${q.name} - out of stock`),!1));return w==="price_low"?H.sort((q,W)=>q.priceValue-W.priceValue):w==="price_high"?H.sort((q,W)=>W.priceValue-q.priceValue):H.sort((q,W)=>q.distanceValue-W.distanceValue),H},E=()=>{!i&&d.hasMore&&P(d.page+1)},F=z=>{e(`/product/${z}`)},O=async()=>{var D;const z=localStorage.getItem("token");if(z)try{const B=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${z}`}});if(B.ok){const V=await B.json(),H=new Set(((D=V.results)==null?void 0:D.map(q=>q.product.id))||[]);u(H)}}catch(B){console.error("Failed to fetch favorites:",B)}},M=async z=>{try{const D=z.map(H=>xo.getProductReviews(H)),V=(await Promise.all(D)).reduce((H,q)=>{var W,Y;return H[q.product_id]={rating:((W=q.aggregate)==null?void 0:W.average_rating)||0,total:((Y=q.aggregate)==null?void 0:Y.total_reviews)||0},H},{});S(H=>({...H,...V}))}catch(D){console.error("Failed to load product reviews:",D)}},Z=async(z,D)=>{D.stopPropagation();const B=localStorage.getItem("token");if(!B){T({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const V=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${B}`},body:JSON.stringify({product_id:z})});if(V.ok){const H=await V.json(),q=new Set(f);H.is_favorite?q.add(z):q.delete(z),u(q),T({title:H.is_favorite?"Added to Favorites":"Removed from Favorites",description:H.message})}}catch{T({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},X=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:n.products.map(z=>{var D,B,V,H,q,W;return s.jsxs(De,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>F(z.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:z.image,alt:z.name,className:"w-full h-full object-cover",onError:Y=>{Y.target.src="/placeholder-product.jpg"}}),s.jsx(se,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:Y=>Z(z.id,Y),children:s.jsx(cr,{className:`h-4 w-4 ${f.has(z.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Ze,{variant:z.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:z.inStock?"In Stock":"Out of Stock"})]}),s.jsxs($e,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:z.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:z.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:(((D=N[z.id])==null?void 0:D.rating)??z.rating??0).toFixed(1)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{children:z.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:z.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[z.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Cr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${(B=z.deliveryInfo)!=null&&B.isFreeDelivery?"bg-green-100 text-green-700":((V=z.deliveryInfo)==null?void 0:V.deliveryFee)===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(H=z.deliveryInfo)!=null&&H.isFreeDelivery?"Free":((q=z.deliveryInfo)==null?void 0:q.deliveryFee)===null?"TBD":`${(W=z.deliveryInfo)==null?void 0:W.deliveryFee}`})]})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(se,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!z.inStock,onClick:async Y=>{if(Y.stopPropagation(),!await Ce.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:z.id,quantity:1},path:"/cart",timestamp:Date.now()})),e("/login");return}try{await C(z.id,1),T({title:"Added to Cart",description:`${z.name} added to your cart`}),e("/cart")}catch(G){console.error("Error adding to cart:",G)}},children:[s.jsx(nn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(se,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!z.inStock,onClick:async Y=>{if(Y.stopPropagation(),!await Ce.getToken()){const G={id:z.id,name:z.name,price:z.price.replace("",""),quantity:1,vendor_name:z.vendor,vendor_id:z.vendor_id,images:[{image_url:z.image}],free_delivery:z.free_delivery,custom_delivery_fee_enabled:z.custom_delivery_fee_enabled,custom_delivery_fee:z.custom_delivery_fee};localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:G,path:"/checkout",timestamp:Date.now()})),e("/login");return}e("/checkout",{state:{directBuy:!0,product:{id:z.id,name:z.name,price:z.price.replace("",""),quantity:1,vendor_name:z.vendor,vendor_id:z.vendor_id,images:[{image_url:z.image}],free_delivery:z.free_delivery,custom_delivery_fee_enabled:z.custom_delivery_fee_enabled,custom_delivery_fee:z.custom_delivery_fee}}})},children:[s.jsx(bs,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},z.id)})}),d.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(se,{onClick:E,disabled:i,variant:"outline",children:[i?s.jsx(Cs,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:t}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.products.length," products found"]})]}),s.jsx(se,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>p(!0),children:s.jsx(ri,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-3 pb-3",children:s.jsxs("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide no-scrollbar",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[s.jsx(se,{variant:x===""?"default":"outline",size:"sm",className:"whitespace-nowrap h-8 text-xs flex-shrink-0 min-w-fit px-3",onClick:()=>j(""),children:"All"}),Array.isArray(b)&&b.map((z,D)=>s.jsx(se,{variant:x===(z.name||z)?"default":"outline",size:"sm",className:"whitespace-nowrap h-8 text-xs flex-shrink-0 min-w-fit px-3",onClick:()=>j(z.name||z),children:z.name||z},z.id||z.name||D))]})})]}),s.jsxs("div",{className:"p-4 pb-20 pt-32",children:[n.products.length>0&&s.jsx("div",{className:"mb-6",children:X()}),n.products.length===0&&!i&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No products found"}),s.jsxs("p",{className:"text-muted-foreground",children:["No products available in ",t," category"]})]}),i&&n.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Cs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),m&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>p(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:z=>z.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>p(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:A.map(z=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:z.value,checked:w===z.value,onChange:D=>y(D.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:z.label})]},z.value))})]}),s.jsx(se,{variant:"outline",className:"w-full",onClick:()=>{y("")},children:"Clear All Filters"})]})]})}),s.jsx(jn,{})]})}const NY=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3};function SY(){const e=lt(),[t,n]=_.useState({products:[]}),[r,i]=_.useState(!1),[a,o]=_.useState(ht.getLocation()),[l,d]=_.useState({page:1,hasMore:!0}),[h,f]=_.useState(new Set),[u,m]=_.useState(!1),[p,w]=_.useState(""),[y,b]=_.useState({}),{addToCart:g}=$n(),{toast:x}=ts(),j=[{value:"",label:"Default"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];_.useEffect(()=>{const E=ht.subscribe(o);return N(),I(),E},[]),_.useEffect(()=>{N(1)},[p]),_.useEffect(()=>{a&&(console.log(" Location updated, refetching data:",a),N(1))},[a]);const N=async(E=1)=>{i(!0);try{const F=localStorage.getItem("token"),O=F?{Authorization:`Token ${F}`}:{},M=ht.getLocation();console.log(" Frontend location check:",{userLocation:a,currentLocation:M});const Z=new URLSearchParams({page:E.toString(),page_size:"20"});M?(Z.append("latitude",M.latitude.toString()),Z.append("longitude",M.longitude.toString()),console.log(" Sending location to API:",M)):console.log(" No location available for API call");const z=await(await fetch(`${Qe}search/products/?${Z}`,{headers:O})).json(),D=S(z.results||[]);if(E===1){n({products:D});const B=D.map(V=>V.id);A(B)}else n(B=>({products:[...B.products,...D]}));d({page:E,hasMore:z.next!==null})}catch(F){console.error("Fetch error:",F)}finally{i(!1)}},S=E=>{const F=ht.getLocation();let O=E.filter(X=>X.featured===!0);const M=X=>{if(!X)return 0;if(X.reviews&&Array.isArray(X.reviews)&&X.reviews.length>0){const z=X.reviews.map(D=>Number(D.rating??D.stars??D.score??0)).filter(D=>!isNaN(D));if(z.length>0){const D=z.reduce((B,V)=>B+V,0);return Math.max(0,Math.min(5,D/z.length))}}return X.average_rating!=null?Number(X.average_rating):X.rating!=null?Number(X.rating):0};let Z=O.map(X=>{var V,H;const z=((V=X.images)==null?void 0:V.find(q=>q.is_primary))||((H=X.images)==null?void 0:H[0]);let D="N/A",B=1/0;return F&&X.vendor_latitude&&X.vendor_longitude&&(B=NY(F.latitude,F.longitude,X.vendor_latitude,X.vendor_longitude),D=`${B.toFixed(1)} km`),{id:X.id,name:X.name,vendor:X.vendor_name||"Unknown Vendor",distance:D,distanceValue:B,rating:M(X),price:`${X.price}`,priceValue:parseFloat(X.price),image:(z==null?void 0:z.image_url)||"/placeholder-product.jpg",inStock:X.quantity>0,category:X.category,featured:X.featured}});return p==="price_low"?Z.sort((X,z)=>X.priceValue-z.priceValue):p==="price_high"?Z.sort((X,z)=>z.priceValue-X.priceValue):Z.sort((X,z)=>X.distanceValue-z.distanceValue),Z},C=()=>{!r&&l.hasMore&&N(l.page+1)},T=E=>{e(`/product/${E}`)},A=async E=>{try{const F=E.map(Z=>xo.getProductReviews(Z)),M=(await Promise.all(F)).reduce((Z,X)=>{var z,D;return Z[X.product_id]={rating:((z=X.aggregate)==null?void 0:z.average_rating)||0,total:((D=X.aggregate)==null?void 0:D.total_reviews)||0},Z},{});b(Z=>({...Z,...M}))}catch(F){console.error("Failed to load product reviews:",F)}},I=async()=>{var F;const E=localStorage.getItem("token");if(E)try{const O=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${E}`}});if(O.ok){const M=await O.json(),Z=new Set(((F=M.results)==null?void 0:F.map(X=>X.product.id))||[]);f(Z)}}catch(O){console.error("Failed to fetch favorites:",O)}},P=async(E,F)=>{F.stopPropagation();const O=localStorage.getItem("token");if(!O){x({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const M=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${O}`},body:JSON.stringify({product_id:E})});if(M.ok){const Z=await M.json(),X=new Set(h);Z.is_favorite?X.add(E):X.delete(E),f(X),x({title:Z.is_favorite?"Added to Favorites":"Removed from Favorites",description:Z.message})}}catch{x({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},R=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:t.products.map(E=>{var F;return s.jsxs(De,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>T(E.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:E.image,alt:E.name,className:"w-full h-full object-cover",onError:O=>{O.target.src="/placeholder-product.jpg"}}),s.jsx(se,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:O=>P(E.id,O),children:s.jsx(cr,{className:`h-4 w-4 ${h.has(E.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Ze,{variant:E.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:E.inStock?"In Stock":"Out of Stock"})]}),s.jsxs($e,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:E.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:E.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:(((F=y[E.id])==null?void 0:F.rating)??E.rating??0).toFixed(1)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{children:E.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:E.price}),s.jsx("span",{className:"text-xs text-muted-foreground",children:E.deliveryTime})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(se,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!E.inStock,onClick:O=>{O.stopPropagation(),g(E.id,1)},children:[s.jsx(nn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(se,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!E.inStock,onClick:O=>{O.stopPropagation(),e("/checkout",{state:{directBuy:!0,product:{id:E.id,name:E.name,price:E.price.replace("",""),quantity:1,vendor_name:E.vendor,images:[{image_url:E.image}]}}})},children:[s.jsx(bs,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},E.id)})}),l.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(se,{onClick:C,disabled:r,variant:"outline",children:[r?s.jsx(Cs,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Featured Products"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),s.jsx(se,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>m(!0),children:s.jsx(ri,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&s.jsx("div",{className:"mb-6",children:R()}),t.products.length===0&&!r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No featured products"}),s.jsx("p",{className:"text-muted-foreground",children:"Featured products will appear here when available"})]}),r&&t.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Cs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),u&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>m(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:E=>E.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:j.map(E=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:E.value,checked:p===E.value,onChange:F=>w(F.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:E.label})]},E.value))})]}),s.jsx(se,{variant:"outline",className:"w-full",onClick:()=>{w("")},children:"Clear All Filters"})]})]})}),s.jsx(jn,{})]})}const kY=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3};function CY(){const e=lt(),[t,n]=_.useState({products:[]}),[r,i]=_.useState(!1),[a,o]=_.useState(ht.getLocation()),[l,d]=_.useState({page:1,hasMore:!0}),[h,f]=_.useState(new Set),[u,m]=_.useState(!1),[p,w]=_.useState(""),{addToCart:y}=$n(),{toast:b}=ts(),g=[{value:"",label:"Default (Rating)"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];_.useEffect(()=>{const I=ht.subscribe(o);return x(),C(),I},[]),_.useEffect(()=>{x(1)},[p]),_.useEffect(()=>{a&&(console.log(" Location updated, refetching data:",a),x(1))},[a]);const x=async(I=1)=>{i(!0);try{const P=localStorage.getItem("token"),R=P?{Authorization:`Token ${P}`,"ngrok-skip-browser-warning":"true"}:{"ngrok-skip-browser-warning":"true"},E=ht.getLocation();console.log(" Frontend location check:",{userLocation:a,currentLocation:E});const F=new URLSearchParams({page:I.toString(),page_size:"20"});E?(F.append("latitude",E.latitude.toString()),F.append("longitude",E.longitude.toString()),console.log(" Sending location to API:",E)):console.log(" No location available for API call");const M=await(await fetch(`${Qe}search/products/?${F}`,{headers:R})).json(),Z=j(M.results||[]);n(I===1?{products:Z}:X=>({products:[...X.products,...Z]})),d({page:I,hasMore:M.next!==null})}catch(P){console.error("Fetch error:",P)}finally{i(!1)}},j=I=>{const P=ht.getLocation(),R=F=>{if(!F)return 0;if(F.reviews&&Array.isArray(F.reviews)&&F.reviews.length>0){const O=F.reviews.map(M=>Number(M.rating??M.stars??M.score??0)).filter(M=>!isNaN(M));if(O.length>0){const M=O.reduce((Z,X)=>Z+X,0);return Math.max(0,Math.min(5,M/O.length))}}return F.average_rating!=null?Number(F.average_rating):F.rating!=null?Number(F.rating):0};let E=I.map(F=>{var X,z;const O=((X=F.images)==null?void 0:X.find(D=>D.is_primary))||((z=F.images)==null?void 0:z[0]);let M="N/A",Z=1/0;return P&&F.vendor_latitude&&F.vendor_longitude&&(Z=kY(P.latitude,P.longitude,F.vendor_latitude,F.vendor_longitude),M=`${Z.toFixed(1)} km`),{id:F.id,name:F.name,vendor:F.vendor_name||"Unknown Vendor",distance:M,distanceValue:Z,rating:R(F),price:`${F.price}`,priceValue:parseFloat(F.price),image:(O==null?void 0:O.image_url)||"/placeholder-product.jpg",inStock:F.quantity>0,category:F.category}});return p==="price_low"?E.sort((F,O)=>F.priceValue-O.priceValue):p==="price_high"?E.sort((F,O)=>O.priceValue-F.priceValue):E.sort((F,O)=>O.rating-F.rating),E},N=()=>{!r&&l.hasMore&&x(l.page+1)},S=I=>{e(`/product/${I}`)},C=async()=>{var P;const I=localStorage.getItem("token");if(I)try{const R=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${I}`}});if(R.ok){const E=await R.json(),F=new Set(((P=E.results)==null?void 0:P.map(O=>O.product.id))||[]);f(F)}}catch(R){console.error("Failed to fetch favorites:",R)}},T=async(I,P)=>{P.stopPropagation();const R=localStorage.getItem("token");if(!R){b({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const E=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${R}`},body:JSON.stringify({product_id:I})});if(E.ok){const F=await E.json(),O=new Set(h);F.is_favorite?O.add(I):O.delete(I),f(O),b({title:F.is_favorite?"Added to Favorites":"Removed from Favorites",description:F.message})}}catch{b({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},A=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:t.products.map(I=>s.jsxs(De,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>S(I.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:I.image,alt:I.name,className:"w-full h-full object-cover",onError:P=>{P.target.src="/placeholder-product.jpg"}}),s.jsx(se,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:P=>T(I.id,P),children:s.jsx(cr,{className:`h-4 w-4 ${h.has(I.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Ze,{variant:I.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:I.inStock?"In Stock":"Out of Stock"})]}),s.jsxs($e,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:I.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:I.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:I.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{children:I.distance})]})]}),s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsx("span",{className:"font-bold text-primary text-sm",children:I.price})})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(se,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!I.inStock,onClick:async P=>{if(P.stopPropagation(),!localStorage.getItem("token")){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:I.id,quantity:1},path:"/cart",timestamp:Date.now()})),e("/login");return}y(I.id,1)},children:[s.jsx(nn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(se,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!I.inStock,onClick:async P=>{if(P.stopPropagation(),!localStorage.getItem("token")){const E={id:I.id,name:I.name,price:I.price.replace("",""),quantity:1,vendor_name:I.vendor,images:[{image_url:I.image}]};localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:E,path:"/checkout",timestamp:Date.now()})),e("/login");return}e("/checkout",{state:{directBuy:!0,product:{id:I.id,name:I.name,price:I.price.replace("",""),quantity:1,vendor_name:I.vendor,images:[{image_url:I.image}]}}})},children:[s.jsx(bs,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},I.id))}),l.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(se,{onClick:N,disabled:r,variant:"outline",children:[r?s.jsx(Cs,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Trending Products"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),s.jsx(se,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>m(!0),children:s.jsx(ri,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&s.jsx("div",{className:"mb-6",children:A()}),t.products.length===0&&!r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No trending products"}),s.jsx("p",{className:"text-muted-foreground",children:"Trending products will appear here when available"})]}),r&&t.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Cs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),u&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>m(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:I=>I.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:g.map(I=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:I.value,checked:p===I.value,onChange:P=>w(P.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:I.label})]},I.value))})]}),s.jsx(se,{variant:"outline",className:"w-full",onClick:()=>{w("")},children:"Clear All Filters"})]})]})}),s.jsx(jn,{})]})}const EY=(e,t,n,r)=>{const i=parseFloat(e),a=parseFloat(t),o=parseFloat(n),l=parseFloat(r),d=6371e3,h=b=>b*(Math.PI/180),f=h(o-i),u=h(l-a),m=h(i),p=h(o),w=Math.sin(f/2)*Math.sin(f/2)+Math.cos(m)*Math.cos(p)*Math.sin(u/2)*Math.sin(u/2),y=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return d*y/1e3};function TY(){const e=lt(),[t,n]=_.useState({products:[]}),[r,i]=_.useState(!1),[a,o]=_.useState(ht.getLocation()),[l,d]=_.useState({page:1,hasMore:!0}),[h,f]=_.useState(new Set),[u,m]=_.useState(!1),[p,w]=_.useState(""),{addToCart:y}=$n(),{toast:b}=ts(),g=[{value:"",label:"Default (Newest)"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}];_.useEffect(()=>{const I=ht.subscribe(o);return x(),C(),I},[]),_.useEffect(()=>{x(1)},[p]),_.useEffect(()=>{a&&(console.log(" Location updated, refetching data:",a),x(1))},[a]);const x=async(I=1)=>{i(!0);try{const P=localStorage.getItem("token"),R=P?{Authorization:`Token ${P}`}:{},E=ht.getLocation();console.log(" Frontend location check:",{userLocation:a,currentLocation:E});const F=new URLSearchParams({page:I.toString(),page_size:"100"});E?(F.append("latitude",E.latitude.toString()),F.append("longitude",E.longitude.toString()),console.log(" Sending location to API:",E)):console.log(" No location available for API call");const M=await(await fetch(`${Qe}search/products/?${F}`,{headers:R})).json(),Z=j(M.results||[]);n(I===1?{products:Z}:X=>({products:[...X.products,...Z]})),d({page:I,hasMore:M.next!==null})}catch(P){console.error("Fetch error:",P)}finally{i(!1)}},j=I=>{const P=ht.getLocation(),R=F=>{if(!F)return 0;if(F.reviews&&Array.isArray(F.reviews)&&F.reviews.length>0){const O=F.reviews.map(M=>Number(M.rating??M.stars??M.score??0)).filter(M=>!isNaN(M));if(O.length>0){const M=O.reduce((Z,X)=>Z+X,0);return Math.max(0,Math.min(5,M/O.length))}}return F.average_rating!=null?Number(F.average_rating):F.rating!=null?Number(F.rating):0};let E=I.map(F=>{var z,D;const O=((z=F.images)==null?void 0:z.find(B=>B.is_primary))||((D=F.images)==null?void 0:D[0]);let M="N/A",Z=1/0;P&&F.vendor_latitude&&F.vendor_longitude&&(Z=EY(P.latitude,P.longitude,F.vendor_latitude,F.vendor_longitude),M=`${Z.toFixed(1)} km`);const X=vo(F,F.vendor_delivery_fee);return{id:F.id,name:F.name,vendor:F.vendor_name||"Unknown Vendor",vendor_id:F.vendor_id,price:`Rs ${F.price}`,priceValue:parseFloat(F.price),image:(O==null?void 0:O.image_url)||"/placeholder-product.jpg",rating:R(F),distance:M,distanceValue:Z,deliveryTime:"30-45 mins",inStock:F.quantity>0,category:F.category,totalSold:F.total_sold||0,deliveryInfo:X,vendorOnline:F.vendor_online!==!1,deliveryRadius:hl(F)??1/0,free_delivery:F.free_delivery,custom_delivery_fee_enabled:F.custom_delivery_fee_enabled,custom_delivery_fee:F.custom_delivery_fee,createdAt:F.created_at}}).filter(F=>F.inStock?F.vendorOnline?!0:(console.log(` Excluding product ${F.name} - vendor offline`),!1):(console.log(` Excluding product ${F.name} - out of stock`),!1));return p==="price_low"?E.sort((F,O)=>F.priceValue-O.priceValue):p==="price_high"?E.sort((F,O)=>O.priceValue-F.priceValue):E.sort((F,O)=>new Date(O.createdAt).getTime()-new Date(F.createdAt).getTime()),E},N=()=>{!r&&l.hasMore&&x(l.page+1)},S=I=>{e(`/product/${I}`)},C=async()=>{var P;const I=localStorage.getItem("token");if(I)try{const R=await fetch(`${Qe}favorites/`,{headers:{Authorization:`Token ${I}`}});if(R.ok){const E=await R.json(),F=new Set(((P=E.results)==null?void 0:P.map(O=>O.product.id))||[]);f(F)}}catch(R){console.error("Failed to fetch favorites:",R)}},T=async(I,P)=>{P.stopPropagation();const R=localStorage.getItem("token");if(!R){b({title:"Login Required",description:"Please login to add favorites",variant:"destructive"});return}try{const E=await fetch(`${Qe}favorites/toggle/`,{method:"POST",headers:{Authorization:`Token ${R}`},body:JSON.stringify({product_id:I})});if(E.ok){const F=await E.json(),O=new Set(h);F.is_favorite?O.add(I):O.delete(I),f(O),b({title:F.is_favorite?"Added to Favorites":"Removed from Favorites",description:F.message})}}catch{b({title:"Error",description:"Failed to update favorites",variant:"destructive"})}},A=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:t.products.map(I=>{var P,R,E,F,O;return s.jsxs(De,{className:"overflow-hidden",children:[s.jsxs("div",{className:"cursor-pointer",onClick:()=>S(I.id),children:[s.jsxs("div",{className:"aspect-square relative",children:[s.jsx("img",{src:I.image,alt:I.name,className:"w-full h-full object-cover",onError:M=>{M.target.src="/placeholder-product.jpg"}}),s.jsx(se,{variant:"ghost",size:"sm",className:"absolute top-2 left-2 p-1 h-8 w-8 bg-white/80 hover:bg-white rounded-full shadow-sm",onClick:M=>T(I.id,M),children:s.jsx(cr,{className:`h-4 w-4 ${h.has(I.id)?"fill-red-500 text-red-500":"text-gray-600"}`})}),s.jsx(Ze,{variant:I.inStock?"default":"destructive",className:"absolute top-2 right-2 text-xs",children:I.inStock?"In Stock":"Out of Stock"})]}),s.jsxs($e,{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:I.name}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:I.vendor}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:I.rating})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{children:I.distance})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-primary text-sm",children:I.price}),s.jsxs("p",{className:"text-xs text-gray-500",children:[I.totalSold||0," sold"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Cr,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${(P=I.deliveryInfo)!=null&&P.isFreeDelivery?"bg-green-100 text-green-700":((R=I.deliveryInfo)==null?void 0:R.deliveryFee)===null?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:(E=I.deliveryInfo)!=null&&E.isFreeDelivery?"Free":((F=I.deliveryInfo)==null?void 0:F.deliveryFee)===null?"TBD":`Rs ${(O=I.deliveryInfo)==null?void 0:O.deliveryFee}`})]})]})]})]}),s.jsxs("div",{className:"px-3 pb-3 flex gap-2",children:[s.jsxs(se,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",disabled:!I.inStock,onClick:async M=>{if(M.stopPropagation(),!await Ce.getToken()){localStorage.setItem("pendingAction",JSON.stringify({type:"add_to_cart",data:{productId:I.id,quantity:1},path:"/cart",timestamp:Date.now()})),e("/login");return}try{await y(I.id,1),b({title:"Added to Cart",description:`${I.name} added to your cart`}),e("/cart")}catch(X){console.error("Error adding to cart:",X)}},children:[s.jsx(nn,{className:"h-3 w-3 mr-1"}),"Cart"]}),s.jsxs(se,{size:"sm",className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700",disabled:!I.inStock,onClick:async M=>{if(M.stopPropagation(),!await Ce.getToken()){const X={id:I.id,name:I.name,price:I.price.replace("Rs ",""),quantity:1,vendor_name:I.vendor,vendor_id:I.vendor_id,images:[{image_url:I.image}],free_delivery:I.free_delivery,custom_delivery_fee_enabled:I.custom_delivery_fee_enabled,custom_delivery_fee:I.custom_delivery_fee};localStorage.setItem("pendingAction",JSON.stringify({type:"buy_now",data:X,path:"/checkout",timestamp:Date.now()})),e("/login");return}e("/checkout",{state:{directBuy:!0,product:{id:I.id,name:I.name,price:I.price.replace("Rs ",""),quantity:1,vendor_name:I.vendor,vendor_id:I.vendor_id,images:[{image_url:I.image}],free_delivery:I.free_delivery,custom_delivery_fee_enabled:I.custom_delivery_fee_enabled,custom_delivery_fee:I.custom_delivery_fee}}})},children:[s.jsx(bs,{className:"h-3 w-3 mr-1"}),"Buy"]})]})]},I.id)})}),l.hasMore&&s.jsx("div",{className:"text-center py-4",children:s.jsxs(se,{onClick:N,disabled:r,variant:"outline",children:[r?s.jsx(Cs,{className:"h-4 w-4 animate-spin mr-2"}):null,"Load More Products"]})})]});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center gap-3 p-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/home"),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:"Latest Products"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.products.length," products found"]})]}),s.jsx(se,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>m(!0),children:s.jsx(ri,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"p-4 pb-20",children:[t.products.length>0&&s.jsx("div",{className:"mb-6",children:A()}),t.products.length===0&&!r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No products found"}),s.jsx("p",{className:"text-muted-foreground",children:"Latest products will appear here when available"})]}),r&&t.products.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Cs,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})]}),u&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:()=>m(!1),children:s.jsxs("div",{className:"fixed right-0 top-0 h-full w-[55%] bg-white shadow-lg transform transition-transform duration-300",onClick:I=>I.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:""})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Sort By"}),s.jsx("div",{className:"space-y-2",children:g.map(I=>s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"sort",value:I.value,checked:p===I.value,onChange:P=>w(P.target.value),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:I.label})]},I.value))})]}),s.jsx(se,{variant:"outline",className:"w-full",onClick:()=>{w("")},children:"Clear All Filters"})]})]})}),s.jsx(jn,{})]})}function PY(){const e=lt(),[t,n]=_.useState([]),[r,i]=_.useState(""),[a,o]=_.useState(!1),[l,d]=_.useState(!1),[h,f]=_.useState(null),[u,m]=_.useState(!0),p=_.useRef(null),w=()=>{var S;(S=p.current)==null||S.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{w()},[t]),_.useEffect(()=>{y()},[]),_.useEffect(()=>{l&&b()},[l]);const y=async()=>{const S=await Ce.isAuthenticated();d(S)},b=async()=>{try{m(!0);const{response:S,data:C}=await Ve("/messaging/conversations/");if(S.ok&&(C!=null&&C.results)){console.log("Conversations data:",C);const T=C.results.find(A=>{var I;return(I=A.participants)==null?void 0:I.some(P=>P.username==="ezeywaya"||P.email==="ezeywaya@gmail.com")});if(console.log("Looking for ezeywaya conversation:",T),console.log("All conversations:",C.results.map(A=>{var I;return{id:A.id,participants:(I=A.participants)==null?void 0:I.map(P=>({username:P.username,email:P.email,user_type:P.user_type}))}})),console.log("Superuser conversation found:",T),T){f(T.id);const{response:A,data:I}=await Ve(`/messaging/conversations/${T.id}/messages/`);console.log("Messages response:",A,I),A.ok&&(I!=null&&I.results)&&(console.log("All messages in admin conversation:",I.results),n(I.results.reverse()))}else console.log("No superuser conversation found")}}catch(S){console.error("Failed to load messages:",S)}finally{m(!1)}},g=async()=>{if(r.trim()){if(!l){e("/login?redirect=/support");return}o(!0);try{let S=h;if(S)await Ve("/messaging/messages/send/",{method:"POST",body:JSON.stringify({conversation_id:S,content:r.trim(),message_type:"text"})});else{const{response:C,data:T}=await Ve("/messaging/conversations/create/",{method:"POST",body:JSON.stringify({message:r.trim()})});C.ok&&T&&(S=T.conversation_id,f(S))}n(C=>[...C,{id:Date.now(),message:r.trim(),sender:{user_type:"customer"},created_at:new Date().toISOString()}]),i(""),setTimeout(()=>b(),1e3)}catch(S){console.error("Failed to send message:",S)}finally{o(!1)}}},x=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),g())},j=S=>new Date(S).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),N=S=>{const C=new Date(S),T=new Date,A=new Date(T);return A.setDate(A.getDate()-1),C.toDateString()===T.toDateString()?"Today":C.toDateString()===A.toDateString()?"Yesterday":C.toLocaleDateString()};return l?s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold",children:"Customer Support"}),s.jsx("div",{className:"w-10"})]})}),s.jsxs("div",{className:"flex flex-col h-[calc(100vh-120px)]",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading messages..."})]}):t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Xr,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Welcome to Support"}),s.jsx("p",{className:"text-muted-foreground",children:"Send us a message and we'll get back to you as soon as possible."})]}):t.map((S,C)=>{const T=C===0||N(S.created_at)!==N(t[C-1].created_at);return s.jsxs("div",{children:[T&&s.jsx("div",{className:"text-center my-4",children:s.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded-full",children:N(S.created_at)})}),s.jsx("div",{className:"flex justify-start mb-2",children:s.jsxs("div",{className:"flex items-start gap-2 max-w-xs",children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-primary text-primary-foreground",children:s.jsx(Li,{className:"h-4 w-4"})}),s.jsxs("div",{className:"rounded-lg px-3 py-2 bg-primary text-primary-foreground",children:[s.jsx("p",{className:"text-sm",children:S.content||S.message}),s.jsx("p",{className:"text-xs mt-1 text-primary-foreground/70",children:j(S.created_at)})]})]})})]},S.id)}),s.jsx("div",{ref:p})]}),s.jsx("div",{className:"border-t bg-card p-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(_e,{value:r,onChange:S=>i(S.target.value),onKeyPress:x,placeholder:"Type your message...",className:"flex-1",disabled:a}),s.jsx(se,{onClick:g,disabled:!r.trim()||a,className:"px-4",children:a?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):s.jsx($p,{className:"h-4 w-4"})})]})})]}),s.jsx(jn,{})]}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-card/95 backdrop-blur-sm border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold",children:"Customer Support"}),s.jsx("div",{className:"w-10"})]})}),s.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:s.jsx(De,{className:"w-full max-w-md mx-4",children:s.jsxs($e,{className:"p-6 text-center",children:[s.jsx(Xr,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Sign In Required"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Please sign in to access customer support"}),s.jsx(se,{onClick:()=>e("/login?redirect=/support"),className:"w-full",children:"Sign In"})]})})})]})}function AY(){const e=lt(),t=Dn(),{login:n}=Fn(),[r,i]=_.useState("password"),[a,o]=_.useState(""),[l,d]=_.useState(""),[h,f]=_.useState(""),[u,m]=_.useState(""),[p,w]=_.useState(!1),[y,b]=_.useState(!1),[g,x]=_.useState(!1),[j,N]=_.useState(""),[S,C]=_.useState(""),[T,A]=_.useState(!1),[I,P]=_.useState(null),[R,E]=_.useState(!1);_.useState(!1);const[F,O]=_.useState(!1),[M,Z]=_.useState(null),[X,z]=_.useState(!1),[D,B]=_.useState(null);_.useEffect(()=>{var he;const ue=sessionStorage.getItem("privacyAgreementState");if(ue){const Q=JSON.parse(ue);B({userId:Q.userId,userType:Q.userType,hasVendorProfile:Q.hasVendorProfile}),z(!0),sessionStorage.removeItem("privacyAgreementState");return}(he=t.state)!=null&&he.successMessage&&(C(t.state.successMessage),window.history.replaceState({},document.title)),V(),Uc.initialize().catch(console.error),IP.initialize().catch(console.error)},[t.state]);const V=async()=>{var ue;try{if(await Ce.isAuthenticated()){const Q=await Ce.getUser();console.log("Existing user:",Q),(Q==null?void 0:Q.user_type)==="vendor"&&((ue=Q==null?void 0:Q.available_roles)!=null&&ue.includes("vendor"))&&e("/vendor/dashboard")}}catch(he){console.log("No existing auth or error:",he)}},H=async()=>{var ue;x(!0),N("");try{await Ce.clearAuth();const{response:he,data:Q}=await Ve("/login/",{method:"POST",body:JSON.stringify({username:a,password:l})},!1);if(!he.ok)throw new Error((Q==null?void 0:Q.error)||"Login failed");if(Q.needs_privacy_agreement){B({userId:Q.user_id,userType:Q.user_type,hasVendorProfile:Q.has_vendor_profile}),z(!0);return}if(Q.needs_verification)A(!0),P(Q.user_id),b(!0),N("Email not verified. Please verify your email with the OTP sent.");else{const ye={...Q.user,available_roles:Q.available_roles||["customer"],current_role:Q.user.user_type||"customer"};ye.user_type==="customer"&&ye.available_roles.includes("vendor")&&(ye.user_type="vendor"),await n(ye,Q.token),await Ce.setAuth(Q.token,ye),await(await ze(()=>Promise.resolve().then(()=>Ws),void 0)).simplePersistentAuth.saveVendorLogin(Q.token,ye),console.log("Login response:",Q),console.log("profile_exists:",Q.profile_exists,"is_approved:",Q.is_approved),Q.profile_exists?Q.profile_exists&&Q.is_approved?(console.log("Profile exists and approved, redirecting to dashboard"),e("/vendor/dashboard")):Q.profile_exists&&Q.is_rejected?(console.log("Profile exists but rejected"),e("/vendor/rejection",{state:{rejectionReason:Q.rejection_reason,rejectionDate:Q.rejection_date}})):Q.profile_exists&&!Q.is_approved&&(console.log("Profile exists but not approved"),N("Your vendor application is pending approval. You will be notified once approved."),await Ce.clearAuth()):(console.log("No profile exists, redirecting to onboarding"),e("/vendor/onboarding"))}}catch(he){console.error("Vendor login error:",he),(ue=he.message)!=null&&ue.includes("fetch")?N("Connection failed. Please check if the server is running on localhost:8000"):N(he.message||"Login failed. Please try again.")}finally{x(!1)}},q=async()=>{x(!0),N("");try{const{response:ue,data:he}=await Ve("/send-otp/",{method:"POST",body:JSON.stringify({email:a})},!1);if(!ue.ok)throw new Error((he==null?void 0:he.error)||"Failed to send OTP");b(!0),N("OTP sent successfully")}catch(ue){N(ue.message)}finally{x(!1)}},W=async()=>{x(!0),N("");try{const{response:ue,data:he}=await Ve("/verify-otp/",{method:"POST",body:JSON.stringify({email:a,otp:h})},!1);if(!ue.ok)throw new Error((he==null?void 0:he.error)||"OTP verification failed");if(he.needs_privacy_agreement){B({userId:he.user_id,userType:he.user_type,hasVendorProfile:he.has_vendor_profile}),z(!0);return}const Q={...he.user||{id:he.user_id,email:a,user_type:"vendor"},available_roles:he.available_roles||["vendor"],user_type:he.user.user_type||"vendor",current_role:he.user.user_type||"vendor"};await n(Q,he.token),await Ce.setAuth(he.token,Q),await(await ze(()=>Promise.resolve().then(()=>Ws),void 0)).simplePersistentAuth.saveVendorLogin(he.token,Q),console.log("OTP verification response:",he),console.log("profile_exists:",he.profile_exists,"is_approved:",he.is_approved),he.profile_exists?he.profile_exists&&he.is_approved?(console.log("Profile exists and approved, redirecting to dashboard"),e("/vendor/dashboard")):he.profile_exists&&he.is_rejected?(console.log("Profile exists but rejected"),e("/vendor/rejection",{state:{rejectionReason:he.rejection_reason,rejectionDate:he.rejection_date}})):he.profile_exists&&!he.is_approved&&(console.log("Profile exists but not approved"),N("Your vendor application is pending approval. You will be notified once approved."),await Ce.clearAuth()):(console.log("No profile exists, redirecting to onboarding"),e("/vendor/onboarding"))}catch(ue){console.error("Vendor OTP verification error:",ue),N(ue.message||"OTP verification failed. Please try again.")}finally{x(!1)}},Y=async()=>{var ue;E(!0),N("");try{const he=await Uc.signIn();if(he.success&&he.user&&he.token){let Q={...he.user,available_roles:he.user.available_roles||["customer"],current_role:he.user.current_role||he.user.user_type||"customer"};if(Q.user_type==="customer"&&Q.available_roles.includes("vendor")&&(Q.user_type="vendor"),await n(Q,he.token),await Ce.setAuth(he.token,Q),await n(Q,he.token),(ue=Q.available_roles)!=null&&ue.includes("vendor")){const{simplePersistentAuth:ye}=await ze(async()=>{const{simplePersistentAuth:be}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:be}},void 0);await ye.saveVendorLogin(he.token,Q)}he.user.user_created||!he.user.phone_number?(Z({userData:Q,token:he.token,profileData:he.user}),O(!0)):U(he.user)}else he.needs_privacy_agreement?(B({userId:he.user_id,userType:he.user_type,hasVendorProfile:he.has_vendor_profile}),z(!0)):N(he.error||"Google login failed")}catch{N("Google login failed. Please try again.")}finally{E(!1)}},U=ue=>{ue.profile_exists?ue.profile_exists&&ue.is_approved?e("/vendor/dashboard"):ue.profile_exists&&ue.is_rejected?e("/vendor/rejection",{state:{rejectionReason:ue.rejection_reason,rejectionDate:ue.rejection_date}}):ue.profile_exists&&!ue.is_approved&&(N("Your vendor application is pending approval. You will be notified once approved."),Ce.clearAuth()):e("/vendor/onboarding")},G=()=>{O(!1),M!=null&&M.profileData&&U(M.profileData)},ne=()=>{O(!1),M!=null&&M.profileData&&U(M.profileData)},J=(ue,he)=>{z(!1),B(null),U(ue)},ie=()=>{z(!1),B(null),N("Privacy policy agreement is required to login")},xe=async()=>{x(!0),N("");try{const{response:ue,data:he}=await Ve("/update-email/",{method:"POST",body:JSON.stringify({email:u,user_id:I})},!1);if(!ue.ok)throw new Error((he==null?void 0:he.error)||"Failed to update email");o(u),m(""),b(!0),N("Email updated. OTP sent to new email.")}catch(ue){N(ue.message)}finally{x(!1)}},Se=()=>{e("/vendor/signup")};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4 relative",children:[s.jsx("button",{onClick:()=>e("/"),className:"absolute top-4 left-4 w-8 h-8 bg-white/80 backdrop-blur-sm rounded-full flex items-center justify-center shadow-sm hover:bg-white transition-colors z-10",children:s.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),s.jsx(LP,{currentType:"vendor"}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx("div",{className:"w-full max-w-80 mx-auto px-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsx("img",{src:ua,alt:"ezeyway",className:"w-16 h-16 mx-auto mb-6"})}),s.jsx("div",{className:"text-center mb-4",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 bg-blue-50 px-3 py-1 rounded-full",children:"Vendor Login"})}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"flex space-x-8",children:[s.jsx("button",{onClick:()=>i("password"),className:`pb-2 text-sm font-medium transition-colors ${r==="password"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Password"}),s.jsx("button",{onClick:()=>i("otp"),className:`pb-2 text-sm font-medium transition-colors ${r==="otp"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"OTP"})]})}),r==="password"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(_e,{type:"text",value:a,onChange:ue=>o(ue.target.value),placeholder:"Username or Email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),!T&&s.jsxs("div",{className:"relative",children:[s.jsx(_e,{type:p?"text":"password",value:l,onChange:ue=>d(ue.target.value),placeholder:"Password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>w(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),S&&s.jsx("p",{className:"text-green-600 text-center",children:S}),j&&s.jsx("p",{className:"text-red-600 text-center",children:j}),T&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(_e,{type:"email",value:u,onChange:ue=>m(ue.target.value),placeholder:"Update email if incorrect",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(se,{onClick:xe,disabled:!u||g,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:g?"Updating...":"Update Email and Resend OTP"}),s.jsx(_e,{type:"text",value:h,onChange:ue=>f(ue.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),s.jsx(se,{onClick:W,disabled:h.length!==6||g,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:g?"Verifying...":"Verify OTP"}),s.jsx("button",{onClick:q,disabled:g,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}),!T&&s.jsx(se,{onClick:H,disabled:!a||!l||g,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:g?"Logging in...":"Login"})]}),r==="otp"&&s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(_e,{type:"email",value:a,onChange:ue=>o(ue.target.value),placeholder:"Enter your email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),y?s.jsxs(s.Fragment,{children:[s.jsx(_e,{type:"text",value:h,onChange:ue=>f(ue.target.value),placeholder:"Enter OTP",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center tracking-widest w-80"}),S&&s.jsx("p",{className:"text-green-600 text-center",children:S}),j&&s.jsx("p",{className:"text-red-600 text-center",children:j}),s.jsx(se,{onClick:W,disabled:h.length!==6||g,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:g?"Verifying...":"Verify & Login"}),s.jsx("button",{onClick:q,disabled:g,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend OTP"})]}):s.jsx(se,{onClick:q,disabled:!a||g,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:g?"Sending...":"Send OTP"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-gradient-to-br from-blue-50 to-indigo-100 text-gray-500",children:"or"})})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:Y,disabled:R,className:"w-12 h-12 bg-white hover:bg-gray-50 border border-gray-300 rounded-full flex items-center justify-center transition-colors shadow-sm",children:R?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}):s.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})})})]}),s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("button",{onClick:Se,className:"text-blue-600 hover:text-blue-700 text-sm block mx-auto",children:"Don't have an account? Sign up"}),s.jsx("button",{onClick:()=>e("/privacy-policy"),className:"text-gray-500 hover:text-gray-700 text-xs block mx-auto",children:"Privacy Policy"})]})]})})}),F&&M&&s.jsx(MP,{user:M.userData,onComplete:G,onSkip:ne}),X&&D&&s.jsx(qP,{userId:D.userId,userType:D.userType,hasVendorProfile:D.hasVendorProfile,onComplete:J,onCancel:ie})]})}function OY(){const e=lt(),[t,n]=_.useState(1),[r,i]=_.useState(""),[a,o]=_.useState(""),[l,d]=_.useState(""),[h,f]=_.useState(""),[u,m]=_.useState(""),[p,w]=_.useState(!1),[y,b]=_.useState(!1),[g,x]=_.useState(""),[j,N]=_.useState(!1),S=async()=>{var P,R,E;b(!0),x("");try{const F=await fetch(Qe+"register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:r,password:l,user_type:"vendor"})}),O=await F.json();if(!F.ok){const M=((P=O.username)==null?void 0:P[0])||((R=O.email)==null?void 0:R[0])||O.message||((E=Object.values(O)[0])==null?void 0:E[0])||"Failed to register";throw new Error(M)}n(2)}catch(F){x(F.message)}finally{b(!1)}},C=async P=>{b(!0),x("");try{const R=await fetch(Qe+"verify-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,otp:P})}),E=await R.json();if(!R.ok)throw new Error(E.error||"Verification failed");localStorage.setItem("token",E.token),e("/vendor/onboarding")}catch(R){x(R.message)}finally{b(!1)}},T=P=>{m(P),P.length===6&&C(P)},A=async()=>{b(!0),x("");try{const P=await fetch(Qe+"send-otp/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})}),R=await P.json();if(!P.ok)throw new Error(R.error||"Failed to resend OTP");x("OTP resent successfully")}catch(P){x(P.message)}finally{b(!1)}},I=()=>{e("/vendor/login")};return s.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[s.jsx("button",{onClick:I,className:"absolute top-4 left-4 text-gray-600 hover:text-gray-800 transition-colors",children:" Back"}),s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"w-full max-w-80 mx-auto px-4",children:[t===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:ua,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Join as Seller"})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(_e,{type:"email",value:r,onChange:P=>i(P.target.value),placeholder:"Enter your email",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsx(_e,{type:"text",value:a,onChange:P=>o(P.target.value),placeholder:"Choose username",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"relative",children:[s.jsx(_e,{type:p?"text":"password",value:l,onChange:P=>d(P.target.value),placeholder:"Create password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 pr-10 w-80"}),s.jsx("button",{type:"button",onClick:()=>w(!p),className:"absolute inset-y-0 right-0 flex items-center pr-3",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"}):s.jsxs(s.Fragment,{children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})})]}),s.jsx(_e,{type:"password",value:h,onChange:P=>f(P.target.value),placeholder:"Confirm password",className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 w-80"}),s.jsxs("div",{className:"flex items-start space-x-2 w-80",children:[s.jsx("input",{type:"checkbox",id:"agreeToTerms",checked:j,onChange:P=>N(P.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 mt-1"}),s.jsxs("label",{htmlFor:"agreeToTerms",className:"text-sm text-gray-700",children:["I agree to the"," ",s.jsx("button",{type:"button",onClick:()=>e("/privacy-policy"),className:"text-blue-600 hover:text-blue-700 underline",children:"Privacy Policy"})," ","and Terms & Conditions"]})]}),g&&s.jsx("p",{className:"text-red-600 text-center",children:g}),s.jsx(se,{onClick:S,disabled:!r||!a||!l||!h||l!==h||!j||y,className:"w-80 mx-auto bg-blue-600 hover:bg-blue-700",children:y?"Creating Account...":"Join as Seller"})]})]}),t===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:ua,alt:"ezeyway",className:"w-24 h-24 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Verify Email"}),s.jsxs("p",{className:"text-gray-600 mt-2",children:["Code sent to ",r]})]}),s.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[s.jsx(_e,{type:"text",value:u,onChange:P=>T(P.target.value),placeholder:"Enter 6-digit code",maxLength:6,className:"bg-white border-0 shadow-sm focus:ring-2 focus:ring-blue-500 text-center text-lg tracking-widest w-80"}),y&&s.jsx("div",{className:"text-center text-blue-600",children:"Verifying..."}),g&&s.jsx("p",{className:"text-red-600 text-center",children:g}),s.jsx("button",{onClick:()=>n(1),className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Change details"}),s.jsx("button",{onClick:A,disabled:y,className:"w-80 mx-auto block text-blue-600 hover:text-blue-700 text-sm",children:"Resend code"})]})]})]})})]})}const RY=Dh.divIcon({className:"custom-marker",html:'<div style="background-color: #ff0000; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]});function LY(){var E,F;const e=lt(),n=(E=Dn().state)==null?void 0:E.isUpdate,[r,i]=_.useState(0),[a,o]=_.useState({location:{lat:27.7172,lng:85.324,address:""},shopName:"",ownerName:"",phone:"",email:"",shopAddress:"",city:"",state:"",pincode:"",shopRegDoc:null,citizenshipFront:null,citizenshipBack:null,shopImages:[],existingDocuments:{panReg:null,citizenshipFront:null,citizenshipBack:null},existingShopImages:[],bankAccount:"",accountHolderName:"",bankName:"",ifscCode:"",gstNumber:"",panNumber:"",deliveryRadius:"",minOrderAmount:"",vendorType:"",categories:[],description:"",referralCode:""}),[l,d]=_.useState(""),[h,f]=_.useState(!1),[u,m]=_.useState(""),[p,w]=_.useState(""),[y,b]=_.useState([]),g=["Location","Shop Info","Address","Documents","Shop Images","Payment","Business Type","Categories","Review"],x=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"manufacturer",label:"Manufacturer"},{value:"service_provider",label:"Service Provider"},{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"}];_.useEffect(()=>{const O=async()=>{try{const Z=await fetch(Qe+"categories/"),X=await Z.json();Z.ok&&b(X.categories.map(z=>z.name))}catch(Z){console.error("Error fetching categories:",Z)}},M=async()=>{if(n)try{const Z=localStorage.getItem("token"),X=await fetch(Qe+"vendor-profiles/",{headers:{Authorization:`Token ${Z}`}});if(X.ok){const z=await X.json(),D=z.results&&z.results.length>0?z.results[0]:null;D&&o(B=>{var V,H,q,W;return{...B,shopName:D.business_name||"",ownerName:D.owner_name||"",phone:D.business_phone||"",email:D.business_email||"",shopAddress:D.business_address||"",city:D.city||"",state:D.state||"",pincode:D.pincode||"",panNumber:D.pan_number||"",gstNumber:D.gst_number||"",bankAccount:D.account_number||"",accountHolderName:D.account_holder_name||"",bankName:D.bank_name||"",ifscCode:D.ifsc_code||"",deliveryRadius:D.delivery_radius||"",minOrderAmount:D.min_order_amount||"",vendorType:D.business_type||"",categories:D.categories||[],description:D.description||"",location:{lat:D.latitude||27.7172,lng:D.longitude||85.324,address:D.location_address||""},existingDocuments:{panReg:D.business_license_file_url||null,citizenshipFront:((H=(V=D.documents)==null?void 0:V.find(Y=>{var U;return(U=Y.document_url)==null?void 0:U.includes("citizenship_front")}))==null?void 0:H.document_url)||null,citizenshipBack:((W=(q=D.documents)==null?void 0:q.find(Y=>{var U;return(U=Y.document_url)==null?void 0:U.includes("citizenship_back")}))==null?void 0:W.document_url)||null},existingShopImages:D.shop_images||[]}})}}catch(Z){console.error("Error fetching profile:",Z)}};O(),M()},[n]);const j=({lat:O,lng:M})=>(OL().setView([O,M],13),null),N=()=>(RL({click(O){const{lat:M,lng:Z}=O.latlng;o(X=>({...X,location:{...X.location,lat:M,lng:Z}})),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${M}&lon=${Z}`).then(X=>X.json()).then(X=>{X.display_name&&o(z=>({...z,location:{...z.location,address:X.display_name}}))}).catch(X=>console.error("Error fetching address:",X))}}),null),S=()=>{d(""),navigator.geolocation?navigator.geolocation.getCurrentPosition(O=>{const{latitude:M,longitude:Z}=O.coords;o(X=>({...X,location:{...X.location,lat:M,lng:Z}})),fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${M}&lon=${Z}`).then(X=>X.json()).then(X=>{X.display_name&&o(z=>({...z,location:{...z.location,address:X.display_name}}))}).catch(X=>{console.error("Error fetching address:",X),d("Unable to fetch address for this location.")})},O=>{switch(console.error("Geolocation error:",O),O.code){case O.PERMISSION_DENIED:d("Location access denied. Please allow location permissions.");break;case O.POSITION_UNAVAILABLE:d("Location information is unavailable.");break;case O.TIMEOUT:d("The request to get your location timed out.");break;default:d("An unknown error occurred while fetching your location.");break}}):d("Geolocation is not supported by your browser.")},C=()=>{const O=[{field:"shopName",label:"Shop Name"},{field:"ownerName",label:"Owner Name"},{field:"email",label:"Email"},{field:"phone",label:"Phone"},{field:"panNumber",label:"PAN Number"},{field:"shopAddress",label:"Shop Address"},{field:"city",label:"City"},{field:"state",label:"State"},{field:"pincode",label:"PIN Code"},{field:"vendorType",label:"Business Type"}];for(const{field:Z,label:X}of O)if(!a[Z])return m(`${X} is required.`),!1;return a.location.address?a.shopImages.length+(n?a.existingShopImages.length:0)<4?(m("Please ensure you have at least 4 shop images total."),!1):a.panNumber.length!==9?(m("PAN number must be exactly 9 characters."),!1):!0:(m("Location address is required."),!1)},T=()=>{switch(m(""),r){case 0:if(!a.location.address)return m("Please select a location."),!1;break;case 1:if(!a.shopName||!a.ownerName||!a.phone||!a.email||!a.panNumber)return m("Please fill in all required shop information including PAN number."),!1;if(a.panNumber.length!==9)return m("PAN number must be exactly 9 characters."),!1;break;case 2:if(!a.shopAddress||!a.city||!a.state||!a.pincode)return m("Please fill in all address fields."),!1;break;case 4:if(a.shopImages.length+(n?a.existingShopImages.length:0)<4)return m("Please ensure you have at least 4 shop images total."),!1;break;case 6:if(!a.vendorType)return m("Please select a business type."),!1;break;case 7:if(a.categories.length===0)return m("Please select at least one category."),!1;break}return!0},A=async()=>{if(r<g.length-1)T()&&i(r+1);else{if(console.log("Starting form submission..."),!C()){console.log("Validation failed:",u);return}f(!0),m(""),w("");const O=new FormData;O.append("business_name",a.shopName),O.append("owner_name",a.ownerName),O.append("business_email",a.email),O.append("business_phone",a.phone),O.append("business_address",a.shopAddress),O.append("location_address",a.location.address),O.append("city",a.city),O.append("state",a.state),O.append("pincode",a.pincode),O.append("latitude",a.location.lat.toString()),O.append("longitude",a.location.lng.toString()),O.append("business_type",a.vendorType),O.append("categories",JSON.stringify(a.categories)),O.append("description",a.description||""),O.append("account_number",a.bankAccount||""),O.append("account_holder_name",a.accountHolderName||""),O.append("bank_name",a.bankName||""),O.append("ifsc_code",a.ifscCode||""),O.append("gst_number",a.gstNumber||""),O.append("pan_number",a.panNumber||""),O.append("delivery_radius",a.deliveryRadius||""),O.append("min_order_amount",a.minOrderAmount||""),a.referralCode&&O.append("referral_code",a.referralCode),a.shopRegDoc&&O.append("business_license_file",a.shopRegDoc),a.citizenshipFront&&O.append("citizenship_front",a.citizenshipFront),a.citizenshipBack&&O.append("citizenship_back",a.citizenshipBack),a.shopImages.length>0&&a.shopImages.forEach((M,Z)=>{O.append(`shop_image_${Z}`,M)});try{let M=localStorage.getItem("token");console.log(n?"Updating vendor profile...":"Submitting complete vendor onboarding...");const Z="complete-onboarding/";let X=await fetch(Qe+Z,{method:"POST",headers:{Authorization:`Token ${M}`},body:O});if(X.status===401){console.log(" 401 error, attempting token refresh...");try{const{simplePersistentAuth:D}=await ze(async()=>{const{simplePersistentAuth:V}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:V}},void 0),B=await D.getVendorAuth();if(B!=null&&B.token)M=B.token,localStorage.setItem("token",M),X=await fetch(Qe+Z,{method:"POST",headers:{Authorization:`Token ${M}`},body:O}),console.log(" Retry with refreshed token successful");else{m("Session expired. Please login again."),setTimeout(()=>e("/vendor/login"),2e3);return}}catch(D){console.error("Token refresh failed:",D),m("Session expired. Please login again."),setTimeout(()=>e("/vendor/login"),2e3);return}}const z=await X.json();if(console.log("Complete onboarding response:",X.status,z),!X.ok){let D="Failed to submit vendor application.";if(z.detail)D=z.detail;else if(z.error)D=z.error;else if(z.user)D=z.user;else if(typeof z=="object"){const B=Object.entries(z).map(([V,H])=>`${V}: ${Array.isArray(H)?H.join(", "):H}`).join("; ");B&&(D=B)}m(D),console.error("Complete onboarding failed:",z);return}console.log(n?"Vendor profile updated successfully":"Vendor onboarding completed successfully"),z.is_approved?(w(n?"Profile updated and approved successfully!":"Vendor profile submitted and approved successfully!"),console.log("Vendor approved. Navigating to dashboard..."),setTimeout(()=>{e("/vendor/dashboard")},3e3)):(w(n?"Your profile has been updated successfully and is pending approval. You will be notified once approved by the admin.":"Your vendor application has been submitted successfully and is pending approval. You will be notified once approved by the admin."),console.log("Vendor not approved yet. Redirecting to login page."),setTimeout(()=>{e("/vendor/login",{state:{successMessage:n?"Profile updated successfully! Pending admin approval.":"Application submitted successfully! Pending admin approval."}})},3e3))}catch(M){console.error("Submission error:",M),m("An unexpected error occurred. Please try again.")}finally{f(!1)}}},I=()=>{r>0&&i(r-1)},P=(O,M)=>{o(Z=>({...Z,[O]:M}))},R=O=>{const M=a.categories.includes(O)?a.categories.filter(Z=>Z!==O):[...a.categories,O];P("categories",M)};return s.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n?"Update Your Application":"Complete Your Setup"}),s.jsxs("p",{className:"text-gray-600 text-sm mt-2",children:["Step ",r+1," of ",g.length]}),n&&s.jsx("p",{className:"text-orange-600 text-sm mt-1",children:"Update your information and resubmit for approval"})]}),s.jsx("div",{className:"flex overflow-x-auto mb-8 pb-2",children:g.map((O,M)=>s.jsxs("button",{onClick:()=>i(M),className:`flex-shrink-0 px-4 py-2 text-xs font-medium whitespace-nowrap ${M===r?"text-blue-600 border-b-2 border-blue-600":M<r?"text-green-600":"text-gray-400"}`,children:[M<r?"":M+1,". ",O]},O))}),s.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[h&&s.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsx("p",{className:"text-blue-600",children:"Submitting your application..."})}),u&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600",children:u})}),p&&s.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsx("p",{className:"text-green-600",children:p})}),r===0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Choose Your Location"}),s.jsx("div",{className:"h-48 rounded-lg",children:s.jsxs(b_,{center:[a.location.lat,a.location.lng],zoom:13,style:{height:"100%",width:"100%",borderRadius:"0.5rem"},children:[s.jsx(w_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),s.jsx(fh,{position:[a.location.lat,a.location.lng],icon:RY}),s.jsx(N,{}),s.jsx(j,{lat:a.location.lat,lng:a.location.lng})]})}),s.jsx(se,{onClick:S,className:"w-full bg-blue-600 hover:bg-blue-700",children:"Use Live Location"}),l&&s.jsx("p",{className:"text-red-500 text-sm",children:l}),s.jsx(_e,{placeholder:"Selected address will appear here",value:a.location.address,onChange:O=>P("location",{...a.location,address:O.target.value})})]}),r===1&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Shop Information"}),s.jsx(_e,{placeholder:"Shop Name",value:a.shopName,onChange:O=>P("shopName",O.target.value)}),s.jsx(_e,{placeholder:"Owner Name",value:a.ownerName,onChange:O=>P("ownerName",O.target.value)}),s.jsx(_e,{placeholder:"Phone Number",value:a.phone,onChange:O=>P("phone",O.target.value)}),s.jsx(_e,{placeholder:"Email Address",value:a.email,onChange:O=>P("email",O.target.value)}),s.jsx(_e,{placeholder:"PAN Number *",value:a.panNumber,onChange:O=>{const M=O.target.value;M.length<=9&&P("panNumber",M)},maxLength:9,required:!0}),s.jsx(_e,{placeholder:"Referral Code (Optional)",value:a.referralCode,onChange:O=>P("referralCode",O.target.value.toUpperCase()),maxLength:8}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter a referral code from another vendor to get bonus points"})]}),r===2&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Shop Address"}),s.jsx(_e,{placeholder:"Full Shop Address",value:a.shopAddress,onChange:O=>P("shopAddress",O.target.value)}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(_e,{placeholder:"City",value:a.city,onChange:O=>P("city",O.target.value)}),s.jsx(_e,{placeholder:"State",value:a.state,onChange:O=>P("state",O.target.value)})]}),s.jsx(_e,{placeholder:"PIN Code",value:a.pincode,onChange:O=>P("pincode",O.target.value)})]}),r===3&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Upload Documents"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Registration"}),n&&a.existingDocuments.panReg&&!a.shopRegDoc&&s.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),s.jsx("img",{src:a.existingDocuments.panReg,alt:"Current PAN",className:"w-32 h-20 object-cover rounded border mt-1"})]}),s.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>P("shopRegDoc",O.target.files[0])}),!n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document"}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),a.shopRegDoc&&s.jsx("div",{className:"mt-2",children:a.shopRegDoc.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(a.shopRegDoc),alt:"PAN Registration",className:"w-32 h-20 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-green-700",children:[" ",a.shopRegDoc.name]})})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Citizenship (Front)"}),n&&a.existingDocuments.citizenshipFront&&!a.citizenshipFront&&s.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),s.jsx("img",{src:a.existingDocuments.citizenshipFront,alt:"Current Citizenship Front",className:"w-32 h-20 object-cover rounded border mt-1"})]}),s.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>P("citizenshipFront",O.target.files[0])}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),a.citizenshipFront&&s.jsx("div",{className:"mt-2",children:a.citizenshipFront.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(a.citizenshipFront),alt:"Citizenship Front",className:"w-32 h-20 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-green-700",children:[" ",a.citizenshipFront.name]})})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Citizenship (Back)"}),n&&a.existingDocuments.citizenshipBack&&!a.citizenshipBack&&s.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("p",{className:"text-sm text-blue-700",children:" Current document uploaded"}),s.jsx("img",{src:a.existingDocuments.citizenshipBack,alt:"Current Citizenship Back",className:"w-32 h-20 object-cover rounded border mt-1"})]}),s.jsx("input",{type:"file",accept:"image/*,.pdf",className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>P("citizenshipBack",O.target.files[0])}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload new document to replace existing"}),a.citizenshipBack&&s.jsx("div",{className:"mt-2",children:a.citizenshipBack.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(a.citizenshipBack),alt:"Citizenship Back",className:"w-32 h-20 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-green-700",children:[" ",a.citizenshipBack.name]})})})]})]})]}),r===4&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Shop Images"}),s.jsx("p",{className:"text-sm text-gray-600",children:n?"Current images shown below. Upload new images to add more.":"Upload at least 4 images of your shop (interior, exterior, products, etc.)"}),n&&a.existingShopImages.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Current Shop Images (",a.existingShopImages.length,")"]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.existingShopImages.map((O,M)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:O.image_url,alt:`Existing shop image ${M+1}`,className:"w-full h-full object-cover"})}),O.is_primary&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Existing Image"})]},M))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"w-full text-sm border border-gray-300 rounded-md p-2",onChange:O=>{const M=Array.from(O.target.files);if(M.length+a.shopImages.length>10){alert("Maximum 10 images allowed");return}P("shopImages",[...a.shopImages,...M])}}),s.jsx(se,{type:"button",variant:"outline",className:"w-full",onClick:()=>{const O=document.createElement("input");O.type="file",O.accept="image/*",O.capture="environment",O.onchange=M=>{const Z=M.target.files[0];if(Z){if(a.shopImages.length>=10){alert("Maximum 10 images allowed");return}P("shopImages",[...a.shopImages,Z])}},O.click()},children:" Take Photo"})]}),a.shopImages.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[n?"New Images to Add":"Uploaded Images"," (",a.shopImages.length,"/10)"]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:a.shopImages.map((O,M)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:URL.createObjectURL(O),alt:`Shop image ${M+1}`,className:"w-full h-full object-cover"})}),s.jsx("button",{type:"button",onClick:()=>{const Z=a.shopImages.filter((X,z)=>z!==M);P("shopImages",Z)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:""}),s.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:O.name})]},M))}),!n&&a.shopImages.length<4&&s.jsx("p",{className:"text-sm text-orange-600",children:"Please upload at least 4 images of your shop"}),n&&a.shopImages.length+a.existingShopImages.length<4&&s.jsx("p",{className:"text-sm text-orange-600",children:"Total images (existing + new) should be at least 4"})]})]}),r===5&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Payment Details"}),s.jsx(_e,{placeholder:"Bank Account Number",value:a.bankAccount,onChange:O=>P("bankAccount",O.target.value)}),s.jsx(_e,{placeholder:"Account Holder/Organization Name",value:a.accountHolderName,onChange:O=>P("accountHolderName",O.target.value)}),s.jsx(_e,{placeholder:"Bank Name",value:a.bankName,onChange:O=>P("bankName",O.target.value)}),s.jsx(_e,{placeholder:"Minimum Order Amount (Optional)",value:a.minOrderAmount,onChange:O=>P("minOrderAmount",O.target.value)})]}),r===6&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Business Type"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.map(O=>s.jsx("button",{onClick:()=>P("vendorType",O.value),className:`p-3 text-sm rounded-lg border ${a.vendorType===O.value?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:O.label},O.value))})]}),r===7&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Product Categories"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Select categories you'll sell"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.length>0?y.map(O=>s.jsx("button",{onClick:()=>R(O),className:`p-3 text-sm rounded-lg border ${a.categories.includes(O)?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-200 hover:border-gray-300"}`,children:O},O)):s.jsx("div",{className:"col-span-2 text-center text-gray-500 py-4",children:"No categories available. Please contact admin."})}),s.jsx(_e,{placeholder:"Business Description (Optional)",value:a.description,onChange:O=>P("description",O.target.value)})]}),r===8&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Review & Submit"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Shop Information"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Shop Name:"})," ",a.shopName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Owner Name:"})," ",a.ownerName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",a.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",a.email]}),s.jsxs("p",{children:[s.jsx("strong",{children:"PAN Number:"})," ",a.panNumber||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Referral Code:"})," ",a.referralCode||"None"]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Shop Address:"})," ",a.shopAddress]}),s.jsxs("p",{children:[s.jsx("strong",{children:"City:"})," ",a.city]}),s.jsxs("p",{children:[s.jsx("strong",{children:"State:"})," ",a.state]}),s.jsxs("p",{children:[s.jsx("strong",{children:"PIN Code:"})," ",a.pincode]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Location:"})," ",a.location.address]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Documents"}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"PAN Registration:"})," ",a.shopRegDoc||a.existingDocuments.panReg?" Available":" Not uploaded"]}),a.shopRegDoc?s.jsx("div",{className:"mt-2",children:a.shopRegDoc.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(a.shopRegDoc),alt:"New PAN Registration",className:"w-24 h-16 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:s.jsxs("p",{className:"text-xs text-green-700",children:[" ",a.shopRegDoc.name," (New)"]})})}):a.existingDocuments.panReg?s.jsxs("div",{className:"mt-2",children:[s.jsx("img",{src:a.existingDocuments.panReg,alt:"Current PAN Registration",className:"w-24 h-16 object-cover rounded border"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Citizenship (Front):"})," ",a.citizenshipFront||a.existingDocuments.citizenshipFront?" Available":" Not uploaded"]}),a.citizenshipFront?s.jsx("div",{className:"mt-2",children:a.citizenshipFront.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(a.citizenshipFront),alt:"New Citizenship Front",className:"w-24 h-16 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:s.jsxs("p",{className:"text-xs text-green-700",children:[" ",a.citizenshipFront.name," (New)"]})})}):a.existingDocuments.citizenshipFront?s.jsxs("div",{className:"mt-2",children:[s.jsx("img",{src:a.existingDocuments.citizenshipFront,alt:"Current Citizenship Front",className:"w-24 h-16 object-cover rounded border"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Citizenship (Back):"})," ",a.citizenshipBack||a.existingDocuments.citizenshipBack?" Available":" Not uploaded"]}),a.citizenshipBack?s.jsx("div",{className:"mt-2",children:a.citizenshipBack.type.startsWith("image/")?s.jsx("img",{src:URL.createObjectURL(a.citizenshipBack),alt:"New Citizenship Back",className:"w-24 h-16 object-cover rounded border"}):s.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-md w-fit",children:s.jsxs("p",{className:"text-xs text-green-700",children:[" ",a.citizenshipBack.name," (New)"]})})}):a.existingDocuments.citizenshipBack?s.jsxs("div",{className:"mt-2",children:[s.jsx("img",{src:a.existingDocuments.citizenshipBack,alt:"Current Citizenship Back",className:"w-24 h-16 object-cover rounded border"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Current document"})]}):null]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Shop Images"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Images:"})," ",a.shopImages.length+a.existingShopImages.length,"/10"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Existing:"})," ",a.existingShopImages.length," | ",s.jsx("strong",{children:"New:"})," ",a.shopImages.length]}),a.shopImages.length+a.existingShopImages.length>=4?s.jsx("p",{className:"text-green-600 mb-3",children:" Minimum requirement met"}):s.jsx("p",{className:"text-red-600 mb-3",children:" Need at least 4 images total"}),a.existingShopImages.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-600 mb-2",children:"Current Images:"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.existingShopImages.slice(0,4).map((O,M)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:O.image_url,alt:`Current shop ${M+1}`,className:"w-16 h-16 object-cover rounded border"}),O.is_primary&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"})]},M)),a.existingShopImages.length>4&&s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border flex items-center justify-center",children:s.jsxs("span",{className:"text-xs text-gray-500",children:["+",a.existingShopImages.length-4]})})]})]}),a.shopImages.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-600 mb-2",children:"New Images to Add:"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.shopImages.slice(0,4).map((O,M)=>s.jsx("div",{className:"relative",children:s.jsx("img",{src:URL.createObjectURL(O),alt:`New shop ${M+1}`,className:"w-16 h-16 object-cover rounded border"})},M)),a.shopImages.length>4&&s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border flex items-center justify-center",children:s.jsxs("span",{className:"text-xs text-gray-500",children:["+",a.shopImages.length-4]})})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Payment Details"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Bank Account:"})," ",a.bankAccount||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Account Holder:"})," ",a.accountHolderName||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Bank Name:"})," ",a.bankName||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"IFSC Code:"})," ",a.ifscCode||"N/A"]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Business Details"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Business Type:"})," ",((F=x.find(O=>O.value===a.vendorType))==null?void 0:F.label)||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Categories:"})," ",a.categories.length>0?a.categories.join(", "):"None selected"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Description:"})," ",a.description||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"GST Number:"})," ",a.gstNumber||"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Delivery Radius:"})," ",a.deliveryRadius||"N/A"," km"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Minimum Order Amount:"})," ",a.minOrderAmount||"N/A"]})]})]}),s.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800",children:"Your application will be reviewed within 24-48 hours. You'll receive an email notification once approved."})}),u&&s.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:u})})]})]}),s.jsxs("div",{className:"flex justify-between mt-6",children:[s.jsx(se,{onClick:I,disabled:r===0,variant:"outline",className:"px-6",children:"Previous"}),s.jsx(se,{onClick:A,disabled:h,className:"px-6 bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:h?"Submitting...":r===g.length-1?"Submit for Approval":"Next"})]})]})})}function IY(){const e=Dn(),t=lt(),{rejectionReason:n,rejectionDate:r}=e.state||{},i=()=>{t("/vendor/onboarding",{state:{isUpdate:!0}})};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-2xl w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:s.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Application Rejected"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your vendor application has been rejected. Please review the feedback below and update your application."})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rejection Details"}),r&&s.jsxs("div",{className:"mb-4",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Rejected on: "}),s.jsx("span",{className:"text-sm text-gray-900",children:new Date(r).toLocaleDateString()})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Reason for rejection:"}),s.jsx("div",{className:"mt-2 p-4 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-sm text-red-800",children:n||"No specific reason provided. Please contact support for more details."})})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"What's next?"}),s.jsx("div",{className:"mt-2 text-sm text-blue-700",children:s.jsx("p",{children:"Please review the rejection reason above and update your application accordingly. You can modify your business information, upload new documents, or make any other necessary changes before resubmitting."})})]})]})}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx(se,{onClick:i,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"Update Application"}),s.jsx(se,{onClick:()=>t("/vendor/login"),variant:"outline",className:"flex-1",children:"Back to Login"})]})]})]})})}var Fh=e=>e.type==="checkbox",Bo=e=>e instanceof Date,Cn=e=>e==null;const s4=e=>typeof e=="object";var Ls=e=>!Cn(e)&&!Array.isArray(e)&&s4(e)&&!Bo(e),n4=e=>Ls(e)&&e.target?Fh(e.target)?e.target.checked:e.target.value:e,MY=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,r4=(e,t)=>e.has(MY(t)),DY=e=>{const t=e.constructor&&e.constructor.prototype;return Ls(t)&&t.hasOwnProperty("isPrototypeOf")},O_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Vs(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(O_&&(e instanceof Blob||r))&&(n||Ls(e)))if(t=n?[]:{},!n&&!DY(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Vs(e[i]));else return e;return t}var Eg=e=>/^\w*$/.test(e),As=e=>e===void 0,R_=e=>Array.isArray(e)?e.filter(Boolean):[],L_=e=>R_(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Je=(e,t,n)=>{if(!t||!Ls(e))return n;const r=(Eg(t)?[t]:L_(t)).reduce((i,a)=>Cn(i)?i:i[a],e);return As(r)||r===e?As(e[t])?n:e[t]:r},sr=e=>typeof e=="boolean",Xt=(e,t,n)=>{let r=-1;const i=Eg(t)?[t]:L_(t),a=i.length,o=a-1;for(;++r<a;){const l=i[r];let d=n;if(r!==o){const h=e[l];d=Ls(h)||Array.isArray(h)?h:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=d,e=e[l]}};const np={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},qr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Wi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},i4=Ae.createContext(null);i4.displayName="HookFormContext";const I_=()=>Ae.useContext(i4);var a4=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==qr.all&&(t._proxyFormState[o]=!r||qr.all),n&&(n[o]=!0),e[o]}});return i};const M_=typeof window<"u"?Ae.useLayoutEffect:Ae.useEffect;function FY(e){const t=I_(),{control:n=t.control,disabled:r,name:i,exact:a}=e||{},[o,l]=Ae.useState(n._formState),d=Ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return M_(()=>n._subscribe({name:i,formState:d.current,exact:a,callback:h=>{!r&&l({...n._formState,...h})}}),[i,r,a]),Ae.useEffect(()=>{d.current.isValid&&n._setValid(!0)},[n]),Ae.useMemo(()=>a4(o,n,d.current,!1),[o,n])}var _i=e=>typeof e=="string",o4=(e,t,n,r,i)=>_i(e)?(r&&t.watch.add(e),Je(n,e,i)):Array.isArray(e)?e.map(a=>(r&&t.watch.add(a),Je(n,a))):(r&&(t.watchAll=!0),n),b0=e=>Cn(e)||!s4(e);function Qi(e,t,n=new WeakSet){if(b0(e)||b0(t))return e===t;if(Bo(e)&&Bo(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const a of r){const o=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const l=t[a];if(Bo(o)&&Bo(l)||Ls(o)&&Ls(l)||Array.isArray(o)&&Array.isArray(l)?!Qi(o,l,n):o!==l)return!1}}return!0}function $Y(e){const t=I_(),{control:n=t.control,name:r,defaultValue:i,disabled:a,exact:o,compute:l}=e||{},d=Ae.useRef(i),h=Ae.useRef(l),f=Ae.useRef(void 0);h.current=l;const u=Ae.useMemo(()=>n._getWatch(r,d.current),[n,r]),[m,p]=Ae.useState(h.current?h.current(u):u);return M_(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:w=>{if(!a){const y=o4(r,n._names,w.values||n._formValues,!1,d.current);if(h.current){const b=h.current(y);Qi(b,f.current)||(p(b),f.current=b)}else p(y)}}}),[n,a,r,o]),Ae.useEffect(()=>n._removeUnmounted()),m}function BY(e){const t=I_(),{name:n,disabled:r,control:i=t.control,shouldUnregister:a,defaultValue:o}=e,l=r4(i._names.array,n),d=Ae.useMemo(()=>Je(i._formValues,n,Je(i._defaultValues,n,o)),[i,n,o]),h=$Y({control:i,name:n,defaultValue:d,exact:!0}),f=FY({control:i,name:n,exact:!0}),u=Ae.useRef(e),m=Ae.useRef(i.register(n,{...e.rules,value:h,...sr(e.disabled)?{disabled:e.disabled}:{}}));u.current=e;const p=Ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Je(f.errors,n)},isDirty:{enumerable:!0,get:()=>!!Je(f.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Je(f.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Je(f.validatingFields,n)},error:{enumerable:!0,get:()=>Je(f.errors,n)}}),[f,n]),w=Ae.useCallback(x=>m.current.onChange({target:{value:n4(x),name:n},type:np.CHANGE}),[n]),y=Ae.useCallback(()=>m.current.onBlur({target:{value:Je(i._formValues,n),name:n},type:np.BLUR}),[n,i._formValues]),b=Ae.useCallback(x=>{const j=Je(i._fields,n);j&&x&&(j._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:N=>x.setCustomValidity(N),reportValidity:()=>x.reportValidity()})},[i._fields,n]),g=Ae.useMemo(()=>({name:n,value:h,...sr(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:w,onBlur:y,ref:b}),[n,r,f.disabled,w,y,b,h]);return Ae.useEffect(()=>{const x=i._options.shouldUnregister||a;i.register(n,{...u.current.rules,...sr(u.current.disabled)?{disabled:u.current.disabled}:{}});const j=(N,S)=>{const C=Je(i._fields,N);C&&C._f&&(C._f.mount=S)};if(j(n,!0),x){const N=Vs(Je(i._options.defaultValues,n));Xt(i._defaultValues,n,N),As(Je(i._formValues,n))&&Xt(i._formValues,n,N)}return!l&&i.register(n),()=>{(l?x&&!i._state.action:x)?i.unregister(n):j(n,!1)}},[n,i,l,a]),Ae.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),Ae.useMemo(()=>({field:g,formState:f,fieldState:p}),[g,f,p])}const pt=e=>e.render(BY(e));var l4=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},Tu=e=>Array.isArray(e)?e:[e],yk=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},Un=e=>Ls(e)&&!Object.keys(e).length,D_=e=>e.type==="file",Hr=e=>typeof e=="function",rp=e=>{if(!O_)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},c4=e=>e.type==="select-multiple",F_=e=>e.type==="radio",zY=e=>F_(e)||Fh(e),xx=e=>rp(e)&&e.isConnected;function VY(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=As(e)?r++:e[t[r++]];return e}function UY(e){for(const t in e)if(e.hasOwnProperty(t)&&!As(e[t]))return!1;return!0}function Fs(e,t){const n=Array.isArray(t)?t:Eg(t)?[t]:L_(t),r=n.length===1?e:VY(e,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(Ls(r)&&Un(r)||Array.isArray(r)&&UY(r))&&Fs(e,n.slice(0,-1)),e}var d4=e=>{for(const t in e)if(Hr(e[t]))return!0;return!1};function ip(e,t={}){const n=Array.isArray(e);if(Ls(e)||n)for(const r in e)Array.isArray(e[r])||Ls(e[r])&&!d4(e[r])?(t[r]=Array.isArray(e[r])?[]:{},ip(e[r],t[r])):Cn(e[r])||(t[r]=!0);return t}function u4(e,t,n){const r=Array.isArray(e);if(Ls(e)||r)for(const i in e)Array.isArray(e[i])||Ls(e[i])&&!d4(e[i])?As(t)||b0(n[i])?n[i]=Array.isArray(e[i])?ip(e[i],[]):{...ip(e[i])}:u4(e[i],Cn(t)?{}:t[i],n[i]):n[i]=!Qi(e[i],t[i]);return n}var Yd=(e,t)=>u4(e,t,ip(t));const bk={value:!1,isValid:!1},wk={value:!0,isValid:!0};var h4=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!As(e[0].attributes.value)?As(e[0].value)||e[0].value===""?wk:{value:e[0].value,isValid:!0}:wk:bk}return bk},f4=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>As(e)?e:t?e===""?NaN:e&&+e:n&&_i(e)?new Date(e):r?r(e):e;const _k={isValid:!1,value:null};var m4=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,_k):_k;function jk(e){const t=e.ref;return D_(t)?t.files:F_(t)?m4(e.refs).value:c4(t)?[...t.selectedOptions].map(({value:n})=>n):Fh(t)?h4(e.refs).value:f4(As(t.value)?e.ref.value:t.value,e)}var qY=(e,t,n,r)=>{const i={};for(const a of e){const o=Je(t,a);o&&Xt(i,a,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},ap=e=>e instanceof RegExp,Xd=e=>As(e)?e:ap(e)?e.source:Ls(e)?ap(e.value)?e.value.source:e.value:e,Nk=e=>({isOnSubmit:!e||e===qr.onSubmit,isOnBlur:e===qr.onBlur,isOnChange:e===qr.onChange,isOnAll:e===qr.all,isOnTouch:e===qr.onTouched});const Sk="AsyncFunction";var HY=e=>!!e&&!!e.validate&&!!(Hr(e.validate)&&e.validate.constructor.name===Sk||Ls(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Sk)),WY=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),kk=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Pu=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const a=Je(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(Pu(l,t))break}else if(Ls(l)&&Pu(l,t))break}}};function Ck(e,t,n){const r=Je(e,n);if(r||Eg(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Je(t,a),l=Je(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};i.pop()}return{name:n}}var GY=(e,t,n,r)=>{n(e);const{name:i,...a}=e;return Un(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!r||qr.all))},KY=(e,t,n)=>!e||!t||e===t||Tu(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),ZY=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,YY=(e,t)=>!R_(Je(e,t)).length&&Fs(e,t),XY=(e,t,n)=>{const r=Tu(Je(e,n));return Xt(r,"root",t[n]),Xt(e,n,r),e},om=e=>_i(e);function Ek(e,t,n="validate"){if(om(e)||Array.isArray(e)&&e.every(om)||sr(e)&&!e)return{type:n,message:om(e)?e:"",ref:t}}var Ml=e=>Ls(e)&&!ap(e)?e:{value:e,message:""},Tk=async(e,t,n,r,i,a)=>{const{ref:o,refs:l,required:d,maxLength:h,minLength:f,min:u,max:m,pattern:p,validate:w,name:y,valueAsNumber:b,mount:g}=e._f,x=Je(n,y);if(!g||t.has(y))return{};const j=l?l[0]:o,N=E=>{i&&j.reportValidity&&(j.setCustomValidity(sr(E)?"":E||""),j.reportValidity())},S={},C=F_(o),T=Fh(o),A=C||T,I=(b||D_(o))&&As(o.value)&&As(x)||rp(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,P=l4.bind(null,y,r,S),R=(E,F,O,M=Wi.maxLength,Z=Wi.minLength)=>{const X=E?F:O;S[y]={type:E?M:Z,message:X,ref:o,...P(E?M:Z,X)}};if(a?!Array.isArray(x)||!x.length:d&&(!A&&(I||Cn(x))||sr(x)&&!x||T&&!h4(l).isValid||C&&!m4(l).isValid)){const{value:E,message:F}=om(d)?{value:!!d,message:d}:Ml(d);if(E&&(S[y]={type:Wi.required,message:F,ref:j,...P(Wi.required,F)},!r))return N(F),S}if(!I&&(!Cn(u)||!Cn(m))){let E,F;const O=Ml(m),M=Ml(u);if(!Cn(x)&&!isNaN(x)){const Z=o.valueAsNumber||x&&+x;Cn(O.value)||(E=Z>O.value),Cn(M.value)||(F=Z<M.value)}else{const Z=o.valueAsDate||new Date(x),X=B=>new Date(new Date().toDateString()+" "+B),z=o.type=="time",D=o.type=="week";_i(O.value)&&x&&(E=z?X(x)>X(O.value):D?x>O.value:Z>new Date(O.value)),_i(M.value)&&x&&(F=z?X(x)<X(M.value):D?x<M.value:Z<new Date(M.value))}if((E||F)&&(R(!!E,O.message,M.message,Wi.max,Wi.min),!r))return N(S[y].message),S}if((h||f)&&!I&&(_i(x)||a&&Array.isArray(x))){const E=Ml(h),F=Ml(f),O=!Cn(E.value)&&x.length>+E.value,M=!Cn(F.value)&&x.length<+F.value;if((O||M)&&(R(O,E.message,F.message),!r))return N(S[y].message),S}if(p&&!I&&_i(x)){const{value:E,message:F}=Ml(p);if(ap(E)&&!x.match(E)&&(S[y]={type:Wi.pattern,message:F,ref:o,...P(Wi.pattern,F)},!r))return N(F),S}if(w){if(Hr(w)){const E=await w(x,n),F=Ek(E,j);if(F&&(S[y]={...F,...P(Wi.validate,F.message)},!r))return N(F.message),S}else if(Ls(w)){let E={};for(const F in w){if(!Un(E)&&!r)break;const O=Ek(await w[F](x,n),j,F);O&&(E={...O,...P(F,O.message)},N(O.message),r&&(S[y]=E))}if(!Un(E)&&(S[y]={ref:j,...E},!r))return S}}return N(!0),S};const JY={mode:qr.onSubmit,reValidateMode:qr.onChange,shouldFocusError:!0};function QY(e={}){let t={...JY,...e},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Hr(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},i=Ls(t.defaultValues)||Ls(t.values)?Vs(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Vs(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...f};const m={array:yk(),state:yk()},p=t.criteriaMode===qr.all,w=ee=>ae=>{clearTimeout(h),h=setTimeout(ee,ae)},y=async ee=>{if(!t.disabled&&(f.isValid||u.isValid||ee)){const ae=t.resolver?Un((await T()).errors):await I(r,!0);ae!==n.isValid&&m.state.next({isValid:ae})}},b=(ee,ae)=>{!t.disabled&&(f.isValidating||f.validatingFields||u.isValidating||u.validatingFields)&&((ee||Array.from(l.mount)).forEach(oe=>{oe&&(ae?Xt(n.validatingFields,oe,ae):Fs(n.validatingFields,oe))}),m.state.next({validatingFields:n.validatingFields,isValidating:!Un(n.validatingFields)}))},g=(ee,ae=[],oe,ke,de=!0,pe=!0)=>{if(ke&&oe&&!t.disabled){if(o.action=!0,pe&&Array.isArray(Je(r,ee))){const Pe=oe(Je(r,ee),ke.argA,ke.argB);de&&Xt(r,ee,Pe)}if(pe&&Array.isArray(Je(n.errors,ee))){const Pe=oe(Je(n.errors,ee),ke.argA,ke.argB);de&&Xt(n.errors,ee,Pe),YY(n.errors,ee)}if((f.touchedFields||u.touchedFields)&&pe&&Array.isArray(Je(n.touchedFields,ee))){const Pe=oe(Je(n.touchedFields,ee),ke.argA,ke.argB);de&&Xt(n.touchedFields,ee,Pe)}(f.dirtyFields||u.dirtyFields)&&(n.dirtyFields=Yd(i,a)),m.state.next({name:ee,isDirty:R(ee,ae),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Xt(a,ee,ae)},x=(ee,ae)=>{Xt(n.errors,ee,ae),m.state.next({errors:n.errors})},j=ee=>{n.errors=ee,m.state.next({errors:n.errors,isValid:!1})},N=(ee,ae,oe,ke)=>{const de=Je(r,ee);if(de){const pe=Je(a,ee,As(oe)?Je(i,ee):oe);As(pe)||ke&&ke.defaultChecked||ae?Xt(a,ee,ae?pe:jk(de._f)):O(ee,pe),o.mount&&y()}},S=(ee,ae,oe,ke,de)=>{let pe=!1,Pe=!1;const me={name:ee};if(!t.disabled){if(!oe||ke){(f.isDirty||u.isDirty)&&(Pe=n.isDirty,n.isDirty=me.isDirty=R(),pe=Pe!==me.isDirty);const we=Qi(Je(i,ee),ae);Pe=!!Je(n.dirtyFields,ee),we?Fs(n.dirtyFields,ee):Xt(n.dirtyFields,ee,!0),me.dirtyFields=n.dirtyFields,pe=pe||(f.dirtyFields||u.dirtyFields)&&Pe!==!we}if(oe){const we=Je(n.touchedFields,ee);we||(Xt(n.touchedFields,ee,oe),me.touchedFields=n.touchedFields,pe=pe||(f.touchedFields||u.touchedFields)&&we!==oe)}pe&&de&&m.state.next(me)}return pe?me:{}},C=(ee,ae,oe,ke)=>{const de=Je(n.errors,ee),pe=(f.isValid||u.isValid)&&sr(ae)&&n.isValid!==ae;if(t.delayError&&oe?(d=w(()=>x(ee,oe)),d(t.delayError)):(clearTimeout(h),d=null,oe?Xt(n.errors,ee,oe):Fs(n.errors,ee)),(oe?!Qi(de,oe):de)||!Un(ke)||pe){const Pe={...ke,...pe&&sr(ae)?{isValid:ae}:{},errors:n.errors,name:ee};n={...n,...Pe},m.state.next(Pe)}},T=async ee=>{b(ee,!0);const ae=await t.resolver(a,t.context,qY(ee||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return b(ee),ae},A=async ee=>{const{errors:ae}=await T(ee);if(ee)for(const oe of ee){const ke=Je(ae,oe);ke?Xt(n.errors,oe,ke):Fs(n.errors,oe)}else n.errors=ae;return ae},I=async(ee,ae,oe={valid:!0})=>{for(const ke in ee){const de=ee[ke];if(de){const{_f:pe,...Pe}=de;if(pe){const me=l.array.has(pe.name),we=de._f&&HY(de._f);we&&f.validatingFields&&b([ke],!0);const Re=await Tk(de,l.disabled,a,p,t.shouldUseNativeValidation&&!ae,me);if(we&&f.validatingFields&&b([ke]),Re[pe.name]&&(oe.valid=!1,ae))break;!ae&&(Je(Re,pe.name)?me?XY(n.errors,Re,pe.name):Xt(n.errors,pe.name,Re[pe.name]):Fs(n.errors,pe.name))}!Un(Pe)&&await I(Pe,ae,oe)}}return oe.valid},P=()=>{for(const ee of l.unMount){const ae=Je(r,ee);ae&&(ae._f.refs?ae._f.refs.every(oe=>!xx(oe)):!xx(ae._f.ref))&&G(ee)}l.unMount=new Set},R=(ee,ae)=>!t.disabled&&(ee&&ae&&Xt(a,ee,ae),!Qi(B(),i)),E=(ee,ae,oe)=>o4(ee,l,{...o.mount?a:As(ae)?i:_i(ee)?{[ee]:ae}:ae},oe,ae),F=ee=>R_(Je(o.mount?a:i,ee,t.shouldUnregister?Je(i,ee,[]):[])),O=(ee,ae,oe={})=>{const ke=Je(r,ee);let de=ae;if(ke){const pe=ke._f;pe&&(!pe.disabled&&Xt(a,ee,f4(ae,pe)),de=rp(pe.ref)&&Cn(ae)?"":ae,c4(pe.ref)?[...pe.ref.options].forEach(Pe=>Pe.selected=de.includes(Pe.value)):pe.refs?Fh(pe.ref)?pe.refs.forEach(Pe=>{(!Pe.defaultChecked||!Pe.disabled)&&(Array.isArray(de)?Pe.checked=!!de.find(me=>me===Pe.value):Pe.checked=de===Pe.value||!!de)}):pe.refs.forEach(Pe=>Pe.checked=Pe.value===de):D_(pe.ref)?pe.ref.value="":(pe.ref.value=de,pe.ref.type||m.state.next({name:ee,values:Vs(a)})))}(oe.shouldDirty||oe.shouldTouch)&&S(ee,de,oe.shouldTouch,oe.shouldDirty,!0),oe.shouldValidate&&D(ee)},M=(ee,ae,oe)=>{for(const ke in ae){if(!ae.hasOwnProperty(ke))return;const de=ae[ke],pe=ee+"."+ke,Pe=Je(r,pe);(l.array.has(ee)||Ls(de)||Pe&&!Pe._f)&&!Bo(de)?M(pe,de,oe):O(pe,de,oe)}},Z=(ee,ae,oe={})=>{const ke=Je(r,ee),de=l.array.has(ee),pe=Vs(ae);Xt(a,ee,pe),de?(m.array.next({name:ee,values:Vs(a)}),(f.isDirty||f.dirtyFields||u.isDirty||u.dirtyFields)&&oe.shouldDirty&&m.state.next({name:ee,dirtyFields:Yd(i,a),isDirty:R(ee,pe)})):ke&&!ke._f&&!Cn(pe)?M(ee,pe,oe):O(ee,pe,oe),kk(ee,l)&&m.state.next({...n,name:ee}),m.state.next({name:o.mount?ee:void 0,values:Vs(a)})},X=async ee=>{o.mount=!0;const ae=ee.target;let oe=ae.name,ke=!0;const de=Je(r,oe),pe=we=>{ke=Number.isNaN(we)||Bo(we)&&isNaN(we.getTime())||Qi(we,Je(a,oe,we))},Pe=Nk(t.mode),me=Nk(t.reValidateMode);if(de){let we,Re;const Ee=ae.type?jk(de._f):n4(ee),qe=ee.type===np.BLUR||ee.type===np.FOCUS_OUT,re=!WY(de._f)&&!t.resolver&&!Je(n.errors,oe)&&!de._f.deps||ZY(qe,Je(n.touchedFields,oe),n.isSubmitted,me,Pe),je=kk(oe,l,qe);Xt(a,oe,Ee),qe?(de._f.onBlur&&de._f.onBlur(ee),d&&d(0)):de._f.onChange&&de._f.onChange(ee);const Oe=S(oe,Ee,qe),Ye=!Un(Oe)||je;if(!qe&&m.state.next({name:oe,type:ee.type,values:Vs(a)}),re)return(f.isValid||u.isValid)&&(t.mode==="onBlur"?qe&&y():qe||y()),Ye&&m.state.next({name:oe,...je?{}:Oe});if(!qe&&je&&m.state.next({...n}),t.resolver){const{errors:Ie}=await T([oe]);if(pe(Ee),ke){const We=Ck(n.errors,r,oe),At=Ck(Ie,r,We.name||oe);we=At.error,oe=At.name,Re=Un(Ie)}}else b([oe],!0),we=(await Tk(de,l.disabled,a,p,t.shouldUseNativeValidation))[oe],b([oe]),pe(Ee),ke&&(we?Re=!1:(f.isValid||u.isValid)&&(Re=await I(r,!0)));ke&&(de._f.deps&&D(de._f.deps),C(oe,Re,we,Oe))}},z=(ee,ae)=>{if(Je(n.errors,ae)&&ee.focus)return ee.focus(),1},D=async(ee,ae={})=>{let oe,ke;const de=Tu(ee);if(t.resolver){const pe=await A(As(ee)?ee:de);oe=Un(pe),ke=ee?!de.some(Pe=>Je(pe,Pe)):oe}else ee?(ke=(await Promise.all(de.map(async pe=>{const Pe=Je(r,pe);return await I(Pe&&Pe._f?{[pe]:Pe}:Pe)}))).every(Boolean),!(!ke&&!n.isValid)&&y()):ke=oe=await I(r);return m.state.next({...!_i(ee)||(f.isValid||u.isValid)&&oe!==n.isValid?{}:{name:ee},...t.resolver||!ee?{isValid:oe}:{},errors:n.errors}),ae.shouldFocus&&!ke&&Pu(r,z,ee?de:l.mount),ke},B=ee=>{const ae={...o.mount?a:i};return As(ee)?ae:_i(ee)?Je(ae,ee):ee.map(oe=>Je(ae,oe))},V=(ee,ae)=>({invalid:!!Je((ae||n).errors,ee),isDirty:!!Je((ae||n).dirtyFields,ee),error:Je((ae||n).errors,ee),isValidating:!!Je(n.validatingFields,ee),isTouched:!!Je((ae||n).touchedFields,ee)}),H=ee=>{ee&&Tu(ee).forEach(ae=>Fs(n.errors,ae)),m.state.next({errors:ee?n.errors:{}})},q=(ee,ae,oe)=>{const ke=(Je(r,ee,{_f:{}})._f||{}).ref,de=Je(n.errors,ee)||{},{ref:pe,message:Pe,type:me,...we}=de;Xt(n.errors,ee,{...we,...ae,ref:ke}),m.state.next({name:ee,errors:n.errors,isValid:!1}),oe&&oe.shouldFocus&&ke&&ke.focus&&ke.focus()},W=(ee,ae)=>Hr(ee)?m.state.subscribe({next:oe=>"values"in oe&&ee(E(void 0,ae),oe)}):E(ee,ae,!0),Y=ee=>m.state.subscribe({next:ae=>{KY(ee.name,ae.name,ee.exact)&&GY(ae,ee.formState||f,be,ee.reRenderRoot)&&ee.callback({values:{...a},...n,...ae,defaultValues:i})}}).unsubscribe,U=ee=>(o.mount=!0,u={...u,...ee.formState},Y({...ee,formState:u})),G=(ee,ae={})=>{for(const oe of ee?Tu(ee):l.mount)l.mount.delete(oe),l.array.delete(oe),ae.keepValue||(Fs(r,oe),Fs(a,oe)),!ae.keepError&&Fs(n.errors,oe),!ae.keepDirty&&Fs(n.dirtyFields,oe),!ae.keepTouched&&Fs(n.touchedFields,oe),!ae.keepIsValidating&&Fs(n.validatingFields,oe),!t.shouldUnregister&&!ae.keepDefaultValue&&Fs(i,oe);m.state.next({values:Vs(a)}),m.state.next({...n,...ae.keepDirty?{isDirty:R()}:{}}),!ae.keepIsValid&&y()},ne=({disabled:ee,name:ae})=>{(sr(ee)&&o.mount||ee||l.disabled.has(ae))&&(ee?l.disabled.add(ae):l.disabled.delete(ae))},J=(ee,ae={})=>{let oe=Je(r,ee);const ke=sr(ae.disabled)||sr(t.disabled);return Xt(r,ee,{...oe||{},_f:{...oe&&oe._f?oe._f:{ref:{name:ee}},name:ee,mount:!0,...ae}}),l.mount.add(ee),oe?ne({disabled:sr(ae.disabled)?ae.disabled:t.disabled,name:ee}):N(ee,!0,ae.value),{...ke?{disabled:ae.disabled||t.disabled}:{},...t.progressive?{required:!!ae.required,min:Xd(ae.min),max:Xd(ae.max),minLength:Xd(ae.minLength),maxLength:Xd(ae.maxLength),pattern:Xd(ae.pattern)}:{},name:ee,onChange:X,onBlur:X,ref:de=>{if(de){J(ee,ae),oe=Je(r,ee);const pe=As(de.value)&&de.querySelectorAll&&de.querySelectorAll("input,select,textarea")[0]||de,Pe=zY(pe),me=oe._f.refs||[];if(Pe?me.find(we=>we===pe):pe===oe._f.ref)return;Xt(r,ee,{_f:{...oe._f,...Pe?{refs:[...me.filter(xx),pe,...Array.isArray(Je(i,ee))?[{}]:[]],ref:{type:pe.type,name:ee}}:{ref:pe}}}),N(ee,!1,void 0,pe)}else oe=Je(r,ee,{}),oe._f&&(oe._f.mount=!1),(t.shouldUnregister||ae.shouldUnregister)&&!(r4(l.array,ee)&&o.action)&&l.unMount.add(ee)}}},ie=()=>t.shouldFocusError&&Pu(r,z,l.mount),xe=ee=>{sr(ee)&&(m.state.next({disabled:ee}),Pu(r,(ae,oe)=>{const ke=Je(r,oe);ke&&(ae.disabled=ke._f.disabled||ee,Array.isArray(ke._f.refs)&&ke._f.refs.forEach(de=>{de.disabled=ke._f.disabled||ee}))},0,!1))},Se=(ee,ae)=>async oe=>{let ke;oe&&(oe.preventDefault&&oe.preventDefault(),oe.persist&&oe.persist());let de=Vs(a);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:pe,values:Pe}=await T();n.errors=pe,de=Vs(Pe)}else await I(r);if(l.disabled.size)for(const pe of l.disabled)Fs(de,pe);if(Fs(n.errors,"root"),Un(n.errors)){m.state.next({errors:{}});try{await ee(de,oe)}catch(pe){ke=pe}}else ae&&await ae({...n.errors},oe),ie(),setTimeout(ie);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Un(n.errors)&&!ke,submitCount:n.submitCount+1,errors:n.errors}),ke)throw ke},ue=(ee,ae={})=>{Je(r,ee)&&(As(ae.defaultValue)?Z(ee,Vs(Je(i,ee))):(Z(ee,ae.defaultValue),Xt(i,ee,Vs(ae.defaultValue))),ae.keepTouched||Fs(n.touchedFields,ee),ae.keepDirty||(Fs(n.dirtyFields,ee),n.isDirty=ae.defaultValue?R(ee,Vs(Je(i,ee))):R()),ae.keepError||(Fs(n.errors,ee),f.isValid&&y()),m.state.next({...n}))},he=(ee,ae={})=>{const oe=ee?Vs(ee):i,ke=Vs(oe),de=Un(ee),pe=de?i:ke;if(ae.keepDefaultValues||(i=oe),!ae.keepValues){if(ae.keepDirtyValues){const Pe=new Set([...l.mount,...Object.keys(Yd(i,a))]);for(const me of Array.from(Pe))Je(n.dirtyFields,me)?Xt(pe,me,Je(a,me)):Z(me,Je(pe,me))}else{if(O_&&As(ee))for(const Pe of l.mount){const me=Je(r,Pe);if(me&&me._f){const we=Array.isArray(me._f.refs)?me._f.refs[0]:me._f.ref;if(rp(we)){const Re=we.closest("form");if(Re){Re.reset();break}}}}if(ae.keepFieldsRef)for(const Pe of l.mount)Z(Pe,Je(pe,Pe));else r={}}a=t.shouldUnregister?ae.keepDefaultValues?Vs(i):{}:Vs(pe),m.array.next({values:{...pe}}),m.state.next({values:{...pe}})}l={mount:ae.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!ae.keepIsValid||!!ae.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:ae.keepSubmitCount?n.submitCount:0,isDirty:de?!1:ae.keepDirty?n.isDirty:!!(ae.keepDefaultValues&&!Qi(ee,i)),isSubmitted:ae.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:de?{}:ae.keepDirtyValues?ae.keepDefaultValues&&a?Yd(i,a):n.dirtyFields:ae.keepDefaultValues&&ee?Yd(i,ee):ae.keepDirty?n.dirtyFields:{},touchedFields:ae.keepTouched?n.touchedFields:{},errors:ae.keepErrors?n.errors:{},isSubmitSuccessful:ae.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Q=(ee,ae)=>he(Hr(ee)?ee(a):ee,ae),ye=(ee,ae={})=>{const oe=Je(r,ee),ke=oe&&oe._f;if(ke){const de=ke.refs?ke.refs[0]:ke.ref;de.focus&&(de.focus(),ae.shouldSelect&&Hr(de.select)&&de.select())}},be=ee=>{n={...n,...ee}},ge={control:{register:J,unregister:G,getFieldState:V,handleSubmit:Se,setError:q,_subscribe:Y,_runSchema:T,_focusError:ie,_getWatch:E,_getDirty:R,_setValid:y,_setFieldArray:g,_setDisabledField:ne,_setErrors:j,_getFieldArray:F,_reset:he,_resetDefaultValues:()=>Hr(t.defaultValues)&&t.defaultValues().then(ee=>{Q(ee,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:xe,_subjects:m,_proxyFormState:f,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(ee){o=ee},get _defaultValues(){return i},get _names(){return l},set _names(ee){l=ee},get _formState(){return n},get _options(){return t},set _options(ee){t={...t,...ee}}},subscribe:U,trigger:D,register:J,handleSubmit:Se,watch:W,setValue:Z,getValues:B,reset:Q,resetField:ue,clearErrors:H,unregister:G,setError:q,setFocus:ye,getFieldState:V};return{...ge,formControl:ge}}function p4(e={}){const t=Ae.useRef(void 0),n=Ae.useRef(void 0),[r,i]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:Hr(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Hr(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!Hr(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=QY(e);t.current={...l,formState:r}}const a=t.current.control;return a._options=e,M_(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),Ae.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Ae.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),Ae.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),Ae.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),Ae.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),Ae.useEffect(()=>{e.values&&!Qi(e.values,n.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[a,e.values]),Ae.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=a4(r,a),t.current}const Pk=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Je(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},g4=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?Pk(r.ref,n,e):r.refs&&r.refs.forEach(i=>Pk(i,n,e))}},eX=(e,t)=>{t.shouldUseNativeValidation&&g4(e,t);const n={};for(const r in e){const i=Je(t.fields,r),a=Object.assign(e[r]||{},{ref:i&&i.ref});if(tX(t.names||Object.keys(e),r)){const o=Object.assign({},Je(n,r));Xt(o,"root",a),Xt(n,r,o)}else Xt(n,r,a)}return n},tX=(e,t)=>e.some(n=>n.startsWith(t+"."));var sX=function(e,t){for(var n={};e.length;){var r=e[0],i=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(u){return e.push(u)})}),t){var d=n[o].types,h=d&&d[r.code];n[o]=l4(o,t,n,i,h?[].concat(h,r.message):r.message)}e.shift()}return n},v4=function(e,t,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,l){try{var d=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(h){return a.shouldUseNativeValidation&&g4({},a),{errors:{},values:n.raw?r:h}})}catch(h){return l(h)}return d&&d.then?d.then(void 0,l):d}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:eX(sX(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Vt;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Vt||(Vt={}));var Ak;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(Ak||(Ak={}));const dt=Vt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oa=e=>{switch(typeof e){case"undefined":return dt.undefined;case"string":return dt.string;case"number":return Number.isNaN(e)?dt.nan:dt.number;case"boolean":return dt.boolean;case"function":return dt.function;case"bigint":return dt.bigint;case"symbol":return dt.symbol;case"object":return Array.isArray(e)?dt.array:e===null?dt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?dt.promise:typeof Map<"u"&&e instanceof Map?dt.map:typeof Set<"u"&&e instanceof Set?dt.set:typeof Date<"u"&&e instanceof Date?dt.date:dt.object;default:return dt.unknown}},Ge=Vt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ga extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,d=0;for(;d<o.path.length;){const h=o.path[d];d===o.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(n(o))):l[h]=l[h]||{_errors:[]},l=l[h],d++}}};return i(this),r}static assert(t){if(!(t instanceof ga))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Vt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(t(i))}else r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ga.create=e=>new ga(e);const w0=(e,t)=>{let n;switch(e.code){case Ge.invalid_type:e.received===dt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Ge.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Vt.jsonStringifyReplacer)}`;break;case Ge.unrecognized_keys:n=`Unrecognized key(s) in object: ${Vt.joinValues(e.keys,", ")}`;break;case Ge.invalid_union:n="Invalid input";break;case Ge.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Vt.joinValues(e.options)}`;break;case Ge.invalid_enum_value:n=`Invalid enum value. Expected ${Vt.joinValues(e.options)}, received '${e.received}'`;break;case Ge.invalid_arguments:n="Invalid function arguments";break;case Ge.invalid_return_type:n="Invalid function return type";break;case Ge.invalid_date:n="Invalid date";break;case Ge.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Vt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Ge.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Ge.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Ge.custom:n="Invalid input";break;case Ge.invalid_intersection_types:n="Intersection results could not be merged";break;case Ge.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Ge.not_finite:n="Number must be finite";break;default:n=t.defaultError,Vt.assertNever(e)}return{message:n}};let nX=w0;function rX(){return nX}const iX=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const d=r.filter(h=>!!h).slice().reverse();for(const h of d)l=h(o,{data:t,defaultError:l}).message;return{...i,path:a,message:l}};function rt(e,t){const n=rX(),r=iX({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===w0?void 0:w0].filter(i=>!!i)});e.common.issues.push(r)}class Ln{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return _t;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return Ln.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return _t;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:t.value,value:r}}}const _t=Object.freeze({status:"aborted"}),du=e=>({status:"dirty",value:e}),Tr=e=>({status:"valid",value:e}),Ok=e=>e.status==="aborted",Rk=e=>e.status==="dirty",Yc=e=>e.status==="valid",op=e=>typeof Promise<"u"&&e instanceof Promise;var mt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(mt||(mt={}));class Mi{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Lk=(e,t)=>{if(Yc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ga(e.common.issues);return this._error=n,this._error}}};function Pt(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{const{message:d}=e;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:d??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:d??n??l.defaultError}},description:i}}class Lt{get description(){return this._def.description}_getType(t){return Oa(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Oa(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ln,ctx:{common:t.parent.common,data:t.data,parsedType:Oa(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(op(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Oa(t)},i=this._parseSync({data:t,path:r.path,parent:r});return Lk(r,i)}"~validate"(t){var r,i;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Oa(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:n});return Yc(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(i=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(a=>Yc(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Oa(t)},i=this._parse({data:t,path:r.path,parent:r}),a=await(op(i)?i:Promise.resolve(i));return Lk(r,a)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=t(i),l=()=>a.addIssue({code:Ge.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new lo({schema:this,typeName:wt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Qa.create(this,this._def)}nullable(){return td.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ai.create(this)}promise(){return up.create(this,this._def)}or(t){return lp.create([this,t],this._def)}and(t){return cp.create(this,t,this._def)}transform(t){return new lo({...Pt(this._def),schema:this,typeName:wt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new L0({...Pt(this._def),innerType:this,defaultValue:n,typeName:wt.ZodDefault})}brand(){return new EX({typeName:wt.ZodBranded,type:this,...Pt(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new I0({...Pt(this._def),innerType:this,catchValue:n,typeName:wt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return $_.create(this,t)}readonly(){return D0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const aX=/^c[^\s-]{8,}$/i,oX=/^[0-9a-z]+$/,lX=/^[0-9A-HJKMNP-TV-Z]{26}$/i,cX=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,dX=/^[a-z0-9_-]{21}$/i,uX=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,hX=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fX=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,mX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let yx;const pX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,vX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,xX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,yX=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,bX=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,x4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",wX=new RegExp(`^${x4}$`);function y4(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const n=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${n}`}function _X(e){return new RegExp(`^${y4(e)}$`)}function jX(e){let t=`${x4}T${y4(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function NX(e,t){return!!((t==="v4"||!t)&&pX.test(e)||(t==="v6"||!t)&&vX.test(e))}function SX(e,t){if(!uX.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function kX(e,t){return!!((t==="v4"||!t)&&gX.test(e)||(t==="v6"||!t)&&xX.test(e))}class sa extends Lt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==dt.string){const a=this._getOrReturnCtx(t);return rt(a,{code:Ge.invalid_type,expected:dt.string,received:a.parsedType}),_t}const r=new Ln;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),rt(i,{code:Ge.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),rt(i,{code:Ge.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,l=t.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?rt(i,{code:Ge.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&rt(i,{code:Ge.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")fX.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"email",code:Ge.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")yx||(yx=new RegExp(mX,"u")),yx.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"emoji",code:Ge.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")cX.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"uuid",code:Ge.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")dX.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"nanoid",code:Ge.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")aX.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"cuid",code:Ge.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")oX.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"cuid2",code:Ge.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")lX.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"ulid",code:Ge.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),rt(i,{validation:"url",code:Ge.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"regex",code:Ge.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),rt(i,{code:Ge.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),rt(i,{code:Ge.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),rt(i,{code:Ge.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?jX(a).test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{code:Ge.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?wX.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{code:Ge.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?_X(a).test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{code:Ge.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?hX.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"duration",code:Ge.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?NX(t.data,a.version)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"ip",code:Ge.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?SX(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"jwt",code:Ge.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?kX(t.data,a.version)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"cidr",code:Ge.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?yX.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"base64",code:Ge.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?bX.test(t.data)||(i=this._getOrReturnCtx(t,i),rt(i,{validation:"base64url",code:Ge.invalid_string,message:a.message}),r.dirty()):Vt.assertNever(a);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:Ge.invalid_string,...mt.errToObj(r)})}_addCheck(t){return new sa({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...mt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...mt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...mt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...mt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...mt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...mt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...mt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...mt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...mt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...mt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...mt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...mt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...mt.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...mt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...mt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...mt.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...mt.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...mt.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...mt.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...mt.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...mt.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...mt.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...mt.errToObj(n)})}nonempty(t){return this.min(1,mt.errToObj(t))}trim(){return new sa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new sa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new sa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}sa.create=e=>new sa({checks:[],typeName:wt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...Pt(e)});function CX(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(e.toFixed(i).replace(".","")),o=Number.parseInt(t.toFixed(i).replace(".",""));return a%o/10**i}class Xc extends Lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==dt.number){const a=this._getOrReturnCtx(t);return rt(a,{code:Ge.invalid_type,expected:dt.number,received:a.parsedType}),_t}let r;const i=new Ln;for(const a of this._def.checks)a.kind==="int"?Vt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),rt(r,{code:Ge.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ge.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ge.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?CX(t.data,a.value)!==0&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ge.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),rt(r,{code:Ge.not_finite,message:a.message}),i.dirty()):Vt.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,mt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,mt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,mt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,mt.toString(n))}setLimit(t,n,r,i){return new Xc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:mt.toString(i)}]})}_addCheck(t){return new Xc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:mt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:mt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:mt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:mt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:mt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:mt.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:mt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:mt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:mt.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Vt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Xc.create=e=>new Xc({checks:[],typeName:wt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Pt(e)});class Jc extends Lt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==dt.bigint)return this._getInvalidInput(t);let r;const i=new Ln;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ge.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ge.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),rt(r,{code:Ge.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Vt.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return rt(n,{code:Ge.invalid_type,expected:dt.bigint,received:n.parsedType}),_t}gte(t,n){return this.setLimit("min",t,!0,mt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,mt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,mt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,mt.toString(n))}setLimit(t,n,r,i){return new Jc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:mt.toString(i)}]})}_addCheck(t){return new Jc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:mt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:mt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:mt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:mt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:mt.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Jc.create=e=>new Jc({checks:[],typeName:wt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...Pt(e)});class _0 extends Lt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==dt.boolean){const r=this._getOrReturnCtx(t);return rt(r,{code:Ge.invalid_type,expected:dt.boolean,received:r.parsedType}),_t}return Tr(t.data)}}_0.create=e=>new _0({typeName:wt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Pt(e)});class mh extends Lt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==dt.date){const a=this._getOrReturnCtx(t);return rt(a,{code:Ge.invalid_type,expected:dt.date,received:a.parsedType}),_t}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return rt(a,{code:Ge.invalid_date}),_t}const r=new Ln;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),rt(i,{code:Ge.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),rt(i,{code:Ge.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Vt.assertNever(a);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new mh({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:mt.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:mt.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}mh.create=e=>new mh({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:wt.ZodDate,...Pt(e)});class j0 extends Lt{_parse(t){if(this._getType(t)!==dt.symbol){const r=this._getOrReturnCtx(t);return rt(r,{code:Ge.invalid_type,expected:dt.symbol,received:r.parsedType}),_t}return Tr(t.data)}}j0.create=e=>new j0({typeName:wt.ZodSymbol,...Pt(e)});class N0 extends Lt{_parse(t){if(this._getType(t)!==dt.undefined){const r=this._getOrReturnCtx(t);return rt(r,{code:Ge.invalid_type,expected:dt.undefined,received:r.parsedType}),_t}return Tr(t.data)}}N0.create=e=>new N0({typeName:wt.ZodUndefined,...Pt(e)});class S0 extends Lt{_parse(t){if(this._getType(t)!==dt.null){const r=this._getOrReturnCtx(t);return rt(r,{code:Ge.invalid_type,expected:dt.null,received:r.parsedType}),_t}return Tr(t.data)}}S0.create=e=>new S0({typeName:wt.ZodNull,...Pt(e)});class k0 extends Lt{constructor(){super(...arguments),this._any=!0}_parse(t){return Tr(t.data)}}k0.create=e=>new k0({typeName:wt.ZodAny,...Pt(e)});class C0 extends Lt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Tr(t.data)}}C0.create=e=>new C0({typeName:wt.ZodUnknown,...Pt(e)});class oo extends Lt{_parse(t){const n=this._getOrReturnCtx(t);return rt(n,{code:Ge.invalid_type,expected:dt.never,received:n.parsedType}),_t}}oo.create=e=>new oo({typeName:wt.ZodNever,...Pt(e)});class E0 extends Lt{_parse(t){if(this._getType(t)!==dt.undefined){const r=this._getOrReturnCtx(t);return rt(r,{code:Ge.invalid_type,expected:dt.void,received:r.parsedType}),_t}return Tr(t.data)}}E0.create=e=>new E0({typeName:wt.ZodVoid,...Pt(e)});class Ai extends Lt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==dt.array)return rt(n,{code:Ge.invalid_type,expected:dt.array,received:n.parsedType}),_t;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(rt(n,{code:o?Ge.too_big:Ge.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(rt(n,{code:Ge.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(rt(n,{code:Ge.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new Mi(n,o,n.path,l)))).then(o=>Ln.mergeArray(r,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new Mi(n,o,n.path,l)));return Ln.mergeArray(r,a)}get element(){return this._def.type}min(t,n){return new Ai({...this._def,minLength:{value:t,message:mt.toString(n)}})}max(t,n){return new Ai({...this._def,maxLength:{value:t,message:mt.toString(n)}})}length(t,n){return new Ai({...this._def,exactLength:{value:t,message:mt.toString(n)}})}nonempty(t){return this.min(1,t)}}Ai.create=(e,t)=>new Ai({type:e,minLength:null,maxLength:null,exactLength:null,typeName:wt.ZodArray,...Pt(t)});function $l(e){if(e instanceof Ns){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Qa.create($l(r))}return new Ns({...e._def,shape:()=>t})}else return e instanceof Ai?new Ai({...e._def,type:$l(e.element)}):e instanceof Qa?Qa.create($l(e.unwrap())):e instanceof td?td.create($l(e.unwrap())):e instanceof gl?gl.create(e.items.map(t=>$l(t))):e}class Ns extends Lt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Vt.objectKeys(t);return this._cached={shape:t,keys:n},this._cached}_parse(t){if(this._getType(t)!==dt.object){const h=this._getOrReturnCtx(t);return rt(h,{code:Ge.invalid_type,expected:dt.object,received:h.parsedType}),_t}const{status:r,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof oo&&this._def.unknownKeys==="strip"))for(const h in i.data)o.includes(h)||l.push(h);const d=[];for(const h of o){const f=a[h],u=i.data[h];d.push({key:{status:"valid",value:h},value:f._parse(new Mi(i,u,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof oo){const h=this._def.unknownKeys;if(h==="passthrough")for(const f of l)d.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(h==="strict")l.length>0&&(rt(i,{code:Ge.unrecognized_keys,keys:l}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const f of l){const u=i.data[f];d.push({key:{status:"valid",value:f},value:h._parse(new Mi(i,u,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const f of d){const u=await f.key,m=await f.value;h.push({key:u,value:m,alwaysSet:f.alwaysSet})}return h}).then(h=>Ln.mergeObjectSync(r,h)):Ln.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(t){return mt.errToObj,new Ns({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,o;const i=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:mt.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new Ns({...this._def,unknownKeys:"strip"})}passthrough(){return new Ns({...this._def,unknownKeys:"passthrough"})}extend(t){return new Ns({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Ns({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:wt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Ns({...this._def,catchall:t})}pick(t){const n={};for(const r of Vt.objectKeys(t))t[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Ns({...this._def,shape:()=>n})}omit(t){const n={};for(const r of Vt.objectKeys(this.shape))t[r]||(n[r]=this.shape[r]);return new Ns({...this._def,shape:()=>n})}deepPartial(){return $l(this)}partial(t){const n={};for(const r of Vt.objectKeys(this.shape)){const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}return new Ns({...this._def,shape:()=>n})}required(t){const n={};for(const r of Vt.objectKeys(this.shape))if(t&&!t[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Qa;)a=a._def.innerType;n[r]=a}return new Ns({...this._def,shape:()=>n})}keyof(){return b4(Vt.objectKeys(this.shape))}}Ns.create=(e,t)=>new Ns({shape:()=>e,unknownKeys:"strip",catchall:oo.create(),typeName:wt.ZodObject,...Pt(t)});Ns.strictCreate=(e,t)=>new Ns({shape:()=>e,unknownKeys:"strict",catchall:oo.create(),typeName:wt.ZodObject,...Pt(t)});Ns.lazycreate=(e,t)=>new Ns({shape:e,unknownKeys:"strip",catchall:oo.create(),typeName:wt.ZodObject,...Pt(t)});class lp extends Lt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new ga(l.ctx.common.issues));return rt(n,{code:Ge.invalid_union,unionErrors:o}),_t}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const d of r){const h={...n,common:{...n.common,issues:[]},parent:null},f=d._parseSync({data:n.data,path:n.path,parent:h});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(d=>new ga(d));return rt(n,{code:Ge.invalid_union,unionErrors:l}),_t}}get options(){return this._def.options}}lp.create=(e,t)=>new lp({options:e,typeName:wt.ZodUnion,...Pt(t)});function T0(e,t){const n=Oa(e),r=Oa(t);if(e===t)return{valid:!0,data:e};if(n===dt.object&&r===dt.object){const i=Vt.objectKeys(t),a=Vt.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of a){const d=T0(e[l],t[l]);if(!d.valid)return{valid:!1};o[l]=d.data}return{valid:!0,data:o}}else if(n===dt.array&&r===dt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],l=t[a],d=T0(o,l);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return n===dt.date&&r===dt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class cp extends Lt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(a,o)=>{if(Ok(a)||Ok(o))return _t;const l=T0(a.value,o.value);return l.valid?((Rk(a)||Rk(o))&&n.dirty(),{status:n.value,value:l.data}):(rt(r,{code:Ge.invalid_intersection_types}),_t)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}cp.create=(e,t,n)=>new cp({left:e,right:t,typeName:wt.ZodIntersection,...Pt(n)});class gl extends Lt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==dt.array)return rt(r,{code:Ge.invalid_type,expected:dt.array,received:r.parsedType}),_t;if(r.data.length<this._def.items.length)return rt(r,{code:Ge.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_t;!this._def.rest&&r.data.length>this._def.items.length&&(rt(r,{code:Ge.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const d=this._def.items[l]||this._def.rest;return d?d._parse(new Mi(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Ln.mergeArray(n,o)):Ln.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new gl({...this._def,rest:t})}}gl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new gl({items:e,typeName:wt.ZodTuple,rest:null,...Pt(t)})};class dp extends Lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==dt.object)return rt(r,{code:Ge.invalid_type,expected:dt.object,received:r.parsedType}),_t;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:a._parse(new Mi(r,l,r.path,l)),value:o._parse(new Mi(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?Ln.mergeObjectAsync(n,i):Ln.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Lt?new dp({keyType:t,valueType:n,typeName:wt.ZodRecord,...Pt(r)}):new dp({keyType:sa.create(),valueType:t,typeName:wt.ZodRecord,...Pt(n)})}}class P0 extends Lt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==dt.map)return rt(r,{code:Ge.invalid_type,expected:dt.map,received:r.parsedType}),_t;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,d],h)=>({key:i._parse(new Mi(r,l,r.path,[h,"key"])),value:a._parse(new Mi(r,d,r.path,[h,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const d of o){const h=await d.key,f=await d.value;if(h.status==="aborted"||f.status==="aborted")return _t;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(h.value,f.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const d of o){const h=d.key,f=d.value;if(h.status==="aborted"||f.status==="aborted")return _t;(h.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(h.value,f.value)}return{status:n.value,value:l}}}}P0.create=(e,t,n)=>new P0({valueType:t,keyType:e,typeName:wt.ZodMap,...Pt(n)});class Qc extends Lt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==dt.set)return rt(r,{code:Ge.invalid_type,expected:dt.set,received:r.parsedType}),_t;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(rt(r,{code:Ge.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(rt(r,{code:Ge.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(d){const h=new Set;for(const f of d){if(f.status==="aborted")return _t;f.status==="dirty"&&n.dirty(),h.add(f.value)}return{status:n.value,value:h}}const l=[...r.data.values()].map((d,h)=>a._parse(new Mi(r,d,r.path,h)));return r.common.async?Promise.all(l).then(d=>o(d)):o(l)}min(t,n){return new Qc({...this._def,minSize:{value:t,message:mt.toString(n)}})}max(t,n){return new Qc({...this._def,maxSize:{value:t,message:mt.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Qc.create=(e,t)=>new Qc({valueType:e,minSize:null,maxSize:null,typeName:wt.ZodSet,...Pt(t)});class A0 extends Lt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}A0.create=(e,t)=>new A0({getter:e,typeName:wt.ZodLazy,...Pt(t)});class O0 extends Lt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return rt(n,{received:n.data,code:Ge.invalid_literal,expected:this._def.value}),_t}return{status:"valid",value:t.data}}get value(){return this._def.value}}O0.create=(e,t)=>new O0({value:e,typeName:wt.ZodLiteral,...Pt(t)});function b4(e,t){return new ed({values:e,typeName:wt.ZodEnum,...Pt(t)})}class ed extends Lt{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return rt(n,{expected:Vt.joinValues(r),received:n.parsedType,code:Ge.invalid_type}),_t}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return rt(n,{received:n.data,code:Ge.invalid_enum_value,options:r}),_t}return Tr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return ed.create(t,{...this._def,...n})}exclude(t,n=this._def){return ed.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}ed.create=b4;class R0 extends Lt{_parse(t){const n=Vt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==dt.string&&r.parsedType!==dt.number){const i=Vt.objectValues(n);return rt(r,{expected:Vt.joinValues(i),received:r.parsedType,code:Ge.invalid_type}),_t}if(this._cache||(this._cache=new Set(Vt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Vt.objectValues(n);return rt(r,{received:r.data,code:Ge.invalid_enum_value,options:i}),_t}return Tr(t.data)}get enum(){return this._def.values}}R0.create=(e,t)=>new R0({values:e,typeName:wt.ZodNativeEnum,...Pt(t)});class up extends Lt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==dt.promise&&n.common.async===!1)return rt(n,{code:Ge.invalid_type,expected:dt.promise,received:n.parsedType}),_t;const r=n.parsedType===dt.promise?n.data:Promise.resolve(n.data);return Tr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}up.create=(e,t)=>new up({type:e,typeName:wt.ZodPromise,...Pt(t)});class lo extends Lt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===wt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{rt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return _t;const d=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return d.status==="aborted"?_t:d.status==="dirty"||n.value==="dirty"?du(d.value):d});{if(n.value==="aborted")return _t;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?_t:l.status==="dirty"||n.value==="dirty"?du(l.value):l}}if(i.type==="refinement"){const o=l=>{const d=i.refinement(l,a);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?_t:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?_t:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Yc(o))return _t;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Yc(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):_t);Vt.assertNever(i)}}lo.create=(e,t,n)=>new lo({schema:e,typeName:wt.ZodEffects,effect:t,...Pt(n)});lo.createWithPreprocess=(e,t,n)=>new lo({schema:t,effect:{type:"preprocess",transform:e},typeName:wt.ZodEffects,...Pt(n)});class Qa extends Lt{_parse(t){return this._getType(t)===dt.undefined?Tr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Qa.create=(e,t)=>new Qa({innerType:e,typeName:wt.ZodOptional,...Pt(t)});class td extends Lt{_parse(t){return this._getType(t)===dt.null?Tr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}td.create=(e,t)=>new td({innerType:e,typeName:wt.ZodNullable,...Pt(t)});class L0 extends Lt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===dt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}L0.create=(e,t)=>new L0({innerType:e,typeName:wt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Pt(t)});class I0 extends Lt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return op(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ga(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ga(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}I0.create=(e,t)=>new I0({innerType:e,typeName:wt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Pt(t)});class M0 extends Lt{_parse(t){if(this._getType(t)!==dt.nan){const r=this._getOrReturnCtx(t);return rt(r,{code:Ge.invalid_type,expected:dt.nan,received:r.parsedType}),_t}return{status:"valid",value:t.data}}}M0.create=e=>new M0({typeName:wt.ZodNaN,...Pt(e)});class EX extends Lt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class $_ extends Lt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?_t:a.status==="dirty"?(n.dirty(),du(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?_t:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new $_({in:t,out:n,typeName:wt.ZodPipeline})}}class D0 extends Lt{_parse(t){const n=this._def.innerType._parse(t),r=i=>(Yc(i)&&(i.value=Object.freeze(i.value)),i);return op(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}D0.create=(e,t)=>new D0({innerType:e,typeName:wt.ZodReadonly,...Pt(t)});Ns.lazycreate;var wt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(wt||(wt={}));const Ps=sa.create,yi=Xc.create;M0.create;Jc.create;const bc=_0.create;mh.create;j0.create;N0.create;S0.create;const F0=k0.create;C0.create;oo.create;E0.create;const hp=Ai.create,w4=Ns.create;Ns.strictCreate;lp.create;cp.create;gl.create;const _4=dp.create;P0.create;Qc.create;A0.create;O0.create;const j4=ed.create;R0.create;up.create;lo.create;Qa.create;td.create;lo.createWithPreprocess;function TX(){this.__data__=[],this.size=0}var PX=TX;function AX(e,t){return e===t||e!==e&&t!==t}var N4=AX,OX=N4;function RX(e,t){for(var n=e.length;n--;)if(OX(e[n][0],t))return n;return-1}var Tg=RX,LX=Tg,IX=Array.prototype,MX=IX.splice;function DX(e){var t=this.__data__,n=LX(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():MX.call(t,n,1),--this.size,!0}var FX=DX,$X=Tg;function BX(e){var t=this.__data__,n=$X(t,e);return n<0?void 0:t[n][1]}var zX=BX,VX=Tg;function UX(e){return VX(this.__data__,e)>-1}var qX=UX,HX=Tg;function WX(e,t){var n=this.__data__,r=HX(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var GX=WX,KX=PX,ZX=FX,YX=zX,XX=qX,JX=GX;function yd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}yd.prototype.clear=KX;yd.prototype.delete=ZX;yd.prototype.get=YX;yd.prototype.has=XX;yd.prototype.set=JX;var Pg=yd,QX=Pg;function eJ(){this.__data__=new QX,this.size=0}var tJ=eJ;function sJ(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var nJ=sJ;function rJ(e){return this.__data__.get(e)}var iJ=rJ;function aJ(e){return this.__data__.has(e)}var oJ=aJ,lJ=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,S4=lJ,cJ=S4,dJ=typeof self=="object"&&self&&self.Object===Object&&self,uJ=cJ||dJ||Function("return this")(),xa=uJ,hJ=xa,fJ=hJ.Symbol,B_=fJ,Ik=B_,k4=Object.prototype,mJ=k4.hasOwnProperty,pJ=k4.toString,Jd=Ik?Ik.toStringTag:void 0;function gJ(e){var t=mJ.call(e,Jd),n=e[Jd];try{e[Jd]=void 0;var r=!0}catch{}var i=pJ.call(e);return r&&(t?e[Jd]=n:delete e[Jd]),i}var vJ=gJ,xJ=Object.prototype,yJ=xJ.toString;function bJ(e){return yJ.call(e)}var wJ=bJ,Mk=B_,_J=vJ,jJ=wJ,NJ="[object Null]",SJ="[object Undefined]",Dk=Mk?Mk.toStringTag:void 0;function kJ(e){return e==null?e===void 0?SJ:NJ:Dk&&Dk in Object(e)?_J(e):jJ(e)}var Ag=kJ;function CJ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var C4=CJ,EJ=Ag,TJ=C4,PJ="[object AsyncFunction]",AJ="[object Function]",OJ="[object GeneratorFunction]",RJ="[object Proxy]";function LJ(e){if(!TJ(e))return!1;var t=EJ(e);return t==AJ||t==OJ||t==PJ||t==RJ}var E4=LJ,IJ=xa,MJ=IJ["__core-js_shared__"],DJ=MJ,bx=DJ,Fk=function(){var e=/[^.]+$/.exec(bx&&bx.keys&&bx.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function FJ(e){return!!Fk&&Fk in e}var $J=FJ,BJ=Function.prototype,zJ=BJ.toString;function VJ(e){if(e!=null){try{return zJ.call(e)}catch{}try{return e+""}catch{}}return""}var T4=VJ,UJ=E4,qJ=$J,HJ=C4,WJ=T4,GJ=/[\\^$.*+?()[\]{}|]/g,KJ=/^\[object .+?Constructor\]$/,ZJ=Function.prototype,YJ=Object.prototype,XJ=ZJ.toString,JJ=YJ.hasOwnProperty,QJ=RegExp("^"+XJ.call(JJ).replace(GJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eQ(e){if(!HJ(e)||qJ(e))return!1;var t=UJ(e)?QJ:KJ;return t.test(WJ(e))}var tQ=eQ;function sQ(e,t){return e==null?void 0:e[t]}var nQ=sQ,rQ=tQ,iQ=nQ;function aQ(e,t){var n=iQ(e,t);return rQ(n)?n:void 0}var bd=aQ,oQ=bd,lQ=xa,cQ=oQ(lQ,"Map"),z_=cQ,dQ=bd,uQ=dQ(Object,"create"),Og=uQ,$k=Og;function hQ(){this.__data__=$k?$k(null):{},this.size=0}var fQ=hQ;function mQ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var pQ=mQ,gQ=Og,vQ="__lodash_hash_undefined__",xQ=Object.prototype,yQ=xQ.hasOwnProperty;function bQ(e){var t=this.__data__;if(gQ){var n=t[e];return n===vQ?void 0:n}return yQ.call(t,e)?t[e]:void 0}var wQ=bQ,_Q=Og,jQ=Object.prototype,NQ=jQ.hasOwnProperty;function SQ(e){var t=this.__data__;return _Q?t[e]!==void 0:NQ.call(t,e)}var kQ=SQ,CQ=Og,EQ="__lodash_hash_undefined__";function TQ(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=CQ&&t===void 0?EQ:t,this}var PQ=TQ,AQ=fQ,OQ=pQ,RQ=wQ,LQ=kQ,IQ=PQ;function wd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}wd.prototype.clear=AQ;wd.prototype.delete=OQ;wd.prototype.get=RQ;wd.prototype.has=LQ;wd.prototype.set=IQ;var MQ=wd,Bk=MQ,DQ=Pg,FQ=z_;function $Q(){this.size=0,this.__data__={hash:new Bk,map:new(FQ||DQ),string:new Bk}}var BQ=$Q;function zQ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var VQ=zQ,UQ=VQ;function qQ(e,t){var n=e.__data__;return UQ(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Rg=qQ,HQ=Rg;function WQ(e){var t=HQ(this,e).delete(e);return this.size-=t?1:0,t}var GQ=WQ,KQ=Rg;function ZQ(e){return KQ(this,e).get(e)}var YQ=ZQ,XQ=Rg;function JQ(e){return XQ(this,e).has(e)}var QQ=JQ,eee=Rg;function tee(e,t){var n=eee(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var see=tee,nee=BQ,ree=GQ,iee=YQ,aee=QQ,oee=see;function _d(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_d.prototype.clear=nee;_d.prototype.delete=ree;_d.prototype.get=iee;_d.prototype.has=aee;_d.prototype.set=oee;var P4=_d,lee=Pg,cee=z_,dee=P4,uee=200;function hee(e,t){var n=this.__data__;if(n instanceof lee){var r=n.__data__;if(!cee||r.length<uee-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new dee(r)}return n.set(e,t),this.size=n.size,this}var fee=hee,mee=Pg,pee=tJ,gee=nJ,vee=iJ,xee=oJ,yee=fee;function jd(e){var t=this.__data__=new mee(e);this.size=t.size}jd.prototype.clear=pee;jd.prototype.delete=gee;jd.prototype.get=vee;jd.prototype.has=xee;jd.prototype.set=yee;var bee=jd,wee="__lodash_hash_undefined__";function _ee(e){return this.__data__.set(e,wee),this}var jee=_ee;function Nee(e){return this.__data__.has(e)}var See=Nee,kee=P4,Cee=jee,Eee=See;function fp(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new kee;++t<n;)this.add(e[t])}fp.prototype.add=fp.prototype.push=Cee;fp.prototype.has=Eee;var Tee=fp;function Pee(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Aee=Pee;function Oee(e,t){return e.has(t)}var Ree=Oee,Lee=Tee,Iee=Aee,Mee=Ree,Dee=1,Fee=2;function $ee(e,t,n,r,i,a){var o=n&Dee,l=e.length,d=t.length;if(l!=d&&!(o&&d>l))return!1;var h=a.get(e),f=a.get(t);if(h&&f)return h==t&&f==e;var u=-1,m=!0,p=n&Fee?new Lee:void 0;for(a.set(e,t),a.set(t,e);++u<l;){var w=e[u],y=t[u];if(r)var b=o?r(y,w,u,t,e,a):r(w,y,u,e,t,a);if(b!==void 0){if(b)continue;m=!1;break}if(p){if(!Iee(t,function(g,x){if(!Mee(p,x)&&(w===g||i(w,g,n,r,a)))return p.push(x)})){m=!1;break}}else if(!(w===y||i(w,y,n,r,a))){m=!1;break}}return a.delete(e),a.delete(t),m}var A4=$ee,Bee=xa,zee=Bee.Uint8Array,Vee=zee;function Uee(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}var qee=Uee;function Hee(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Wee=Hee,zk=B_,Vk=Vee,Gee=N4,Kee=A4,Zee=qee,Yee=Wee,Xee=1,Jee=2,Qee="[object Boolean]",ete="[object Date]",tte="[object Error]",ste="[object Map]",nte="[object Number]",rte="[object RegExp]",ite="[object Set]",ate="[object String]",ote="[object Symbol]",lte="[object ArrayBuffer]",cte="[object DataView]",Uk=zk?zk.prototype:void 0,wx=Uk?Uk.valueOf:void 0;function dte(e,t,n,r,i,a,o){switch(n){case cte:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case lte:return!(e.byteLength!=t.byteLength||!a(new Vk(e),new Vk(t)));case Qee:case ete:case nte:return Gee(+e,+t);case tte:return e.name==t.name&&e.message==t.message;case rte:case ate:return e==t+"";case ste:var l=Zee;case ite:var d=r&Xee;if(l||(l=Yee),e.size!=t.size&&!d)return!1;var h=o.get(e);if(h)return h==t;r|=Jee,o.set(e,t);var f=Kee(l(e),l(t),r,i,a,o);return o.delete(e),f;case ote:if(wx)return wx.call(e)==wx.call(t)}return!1}var ute=dte;function hte(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var fte=hte,mte=Array.isArray,V_=mte,pte=fte,gte=V_;function vte(e,t,n){var r=t(e);return gte(e)?r:pte(r,n(e))}var xte=vte;function yte(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var bte=yte;function wte(){return[]}var _te=wte,jte=bte,Nte=_te,Ste=Object.prototype,kte=Ste.propertyIsEnumerable,qk=Object.getOwnPropertySymbols,Cte=qk?function(e){return e==null?[]:(e=Object(e),jte(qk(e),function(t){return kte.call(e,t)}))}:Nte,Ete=Cte;function Tte(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Pte=Tte;function Ate(e){return e!=null&&typeof e=="object"}var Lg=Ate,Ote=Ag,Rte=Lg,Lte="[object Arguments]";function Ite(e){return Rte(e)&&Ote(e)==Lte}var Mte=Ite,Hk=Mte,Dte=Lg,O4=Object.prototype,Fte=O4.hasOwnProperty,$te=O4.propertyIsEnumerable,Bte=Hk(function(){return arguments}())?Hk:function(e){return Dte(e)&&Fte.call(e,"callee")&&!$te.call(e,"callee")},zte=Bte,mp={exports:{}};function Vte(){return!1}var Ute=Vte;mp.exports;(function(e,t){var n=xa,r=Ute,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,l=o?n.Buffer:void 0,d=l?l.isBuffer:void 0,h=d||r;e.exports=h})(mp,mp.exports);var R4=mp.exports,qte=9007199254740991,Hte=/^(?:0|[1-9]\d*)$/;function Wte(e,t){var n=typeof e;return t=t??qte,!!t&&(n=="number"||n!="symbol"&&Hte.test(e))&&e>-1&&e%1==0&&e<t}var Gte=Wte,Kte=9007199254740991;function Zte(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Kte}var L4=Zte,Yte=Ag,Xte=L4,Jte=Lg,Qte="[object Arguments]",ese="[object Array]",tse="[object Boolean]",sse="[object Date]",nse="[object Error]",rse="[object Function]",ise="[object Map]",ase="[object Number]",ose="[object Object]",lse="[object RegExp]",cse="[object Set]",dse="[object String]",use="[object WeakMap]",hse="[object ArrayBuffer]",fse="[object DataView]",mse="[object Float32Array]",pse="[object Float64Array]",gse="[object Int8Array]",vse="[object Int16Array]",xse="[object Int32Array]",yse="[object Uint8Array]",bse="[object Uint8ClampedArray]",wse="[object Uint16Array]",_se="[object Uint32Array]",cs={};cs[mse]=cs[pse]=cs[gse]=cs[vse]=cs[xse]=cs[yse]=cs[bse]=cs[wse]=cs[_se]=!0;cs[Qte]=cs[ese]=cs[hse]=cs[tse]=cs[fse]=cs[sse]=cs[nse]=cs[rse]=cs[ise]=cs[ase]=cs[ose]=cs[lse]=cs[cse]=cs[dse]=cs[use]=!1;function jse(e){return Jte(e)&&Xte(e.length)&&!!cs[Yte(e)]}var Nse=jse;function Sse(e){return function(t){return e(t)}}var kse=Sse,pp={exports:{}};pp.exports;(function(e,t){var n=S4,r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,o=a&&n.process,l=function(){try{var d=i&&i.require&&i.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(pp,pp.exports);var Cse=pp.exports,Ese=Nse,Tse=kse,Wk=Cse,Gk=Wk&&Wk.isTypedArray,Pse=Gk?Tse(Gk):Ese,I4=Pse,Ase=Pte,Ose=zte,Rse=V_,Lse=R4,Ise=Gte,Mse=I4,Dse=Object.prototype,Fse=Dse.hasOwnProperty;function $se(e,t){var n=Rse(e),r=!n&&Ose(e),i=!n&&!r&&Lse(e),a=!n&&!r&&!i&&Mse(e),o=n||r||i||a,l=o?Ase(e.length,String):[],d=l.length;for(var h in e)(t||Fse.call(e,h))&&!(o&&(h=="length"||i&&(h=="offset"||h=="parent")||a&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Ise(h,d)))&&l.push(h);return l}var Bse=$se,zse=Object.prototype;function Vse(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||zse;return e===n}var Use=Vse;function qse(e,t){return function(n){return e(t(n))}}var Hse=qse,Wse=Hse,Gse=Wse(Object.keys,Object),Kse=Gse,Zse=Use,Yse=Kse,Xse=Object.prototype,Jse=Xse.hasOwnProperty;function Qse(e){if(!Zse(e))return Yse(e);var t=[];for(var n in Object(e))Jse.call(e,n)&&n!="constructor"&&t.push(n);return t}var ene=Qse,tne=E4,sne=L4;function nne(e){return e!=null&&sne(e.length)&&!tne(e)}var rne=nne,ine=Bse,ane=ene,one=rne;function lne(e){return one(e)?ine(e):ane(e)}var cne=lne,dne=xte,une=Ete,hne=cne;function fne(e){return dne(e,hne,une)}var mne=fne,Kk=mne,pne=1,gne=Object.prototype,vne=gne.hasOwnProperty;function xne(e,t,n,r,i,a){var o=n&pne,l=Kk(e),d=l.length,h=Kk(t),f=h.length;if(d!=f&&!o)return!1;for(var u=d;u--;){var m=l[u];if(!(o?m in t:vne.call(t,m)))return!1}var p=a.get(e),w=a.get(t);if(p&&w)return p==t&&w==e;var y=!0;a.set(e,t),a.set(t,e);for(var b=o;++u<d;){m=l[u];var g=e[m],x=t[m];if(r)var j=o?r(x,g,m,t,e,a):r(g,x,m,e,t,a);if(!(j===void 0?g===x||i(g,x,n,r,a):j)){y=!1;break}b||(b=m=="constructor")}if(y&&!b){var N=e.constructor,S=t.constructor;N!=S&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof S=="function"&&S instanceof S)&&(y=!1)}return a.delete(e),a.delete(t),y}var yne=xne,bne=bd,wne=xa,_ne=bne(wne,"DataView"),jne=_ne,Nne=bd,Sne=xa,kne=Nne(Sne,"Promise"),Cne=kne,Ene=bd,Tne=xa,Pne=Ene(Tne,"Set"),Ane=Pne,One=bd,Rne=xa,Lne=One(Rne,"WeakMap"),Ine=Lne,$0=jne,B0=z_,z0=Cne,V0=Ane,U0=Ine,M4=Ag,Nd=T4,Zk="[object Map]",Mne="[object Object]",Yk="[object Promise]",Xk="[object Set]",Jk="[object WeakMap]",Qk="[object DataView]",Dne=Nd($0),Fne=Nd(B0),$ne=Nd(z0),Bne=Nd(V0),zne=Nd(U0),Ao=M4;($0&&Ao(new $0(new ArrayBuffer(1)))!=Qk||B0&&Ao(new B0)!=Zk||z0&&Ao(z0.resolve())!=Yk||V0&&Ao(new V0)!=Xk||U0&&Ao(new U0)!=Jk)&&(Ao=function(e){var t=M4(e),n=t==Mne?e.constructor:void 0,r=n?Nd(n):"";if(r)switch(r){case Dne:return Qk;case Fne:return Zk;case $ne:return Yk;case Bne:return Xk;case zne:return Jk}return t});var Vne=Ao,_x=bee,Une=A4,qne=ute,Hne=yne,e2=Vne,t2=V_,s2=R4,Wne=I4,Gne=1,n2="[object Arguments]",r2="[object Array]",If="[object Object]",Kne=Object.prototype,i2=Kne.hasOwnProperty;function Zne(e,t,n,r,i,a){var o=t2(e),l=t2(t),d=o?r2:e2(e),h=l?r2:e2(t);d=d==n2?If:d,h=h==n2?If:h;var f=d==If,u=h==If,m=d==h;if(m&&s2(e)){if(!s2(t))return!1;o=!0,f=!1}if(m&&!f)return a||(a=new _x),o||Wne(e)?Une(e,t,n,r,i,a):qne(e,t,d,n,r,i,a);if(!(n&Gne)){var p=f&&i2.call(e,"__wrapped__"),w=u&&i2.call(t,"__wrapped__");if(p||w){var y=p?e.value():e,b=w?t.value():t;return a||(a=new _x),i(y,b,n,r,a)}}return m?(a||(a=new _x),Hne(e,t,n,r,i,a)):!1}var Yne=Zne,Xne=Yne,a2=Lg;function D4(e,t,n,r,i){return e===t?!0:e==null||t==null||!a2(e)&&!a2(t)?e!==e&&t!==t:Xne(e,t,n,r,D4,i)}var Jne=D4,Qne=Jne;function ere(e,t){return Qne(e,t)}var tre=ere,F4={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(r,i){e.exports=i()})(typeof self<"u"?self:Oi,function(){return function(n){var r={};function i(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(a,o,l){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:l})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(17),o=i(18),l=i(19),d=i(45),h=i(46),f=i(47),u=i(48),m=i(49),p=i(12),w=i(32),y=i(33),b=i(31),g=i(1),x={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:a.default,Format:o.default,Leaf:l.default,Embed:u.default,Scroll:d.default,Block:f.default,Inline:h.default,Text:m.default,Attributor:{Attribute:p.default,Class:w.default,Style:y.default,Store:b.default}};r.default=x},function(n,r,i){var a=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var j in x)x.hasOwnProperty(j)&&(g[j]=x[j])};return function(g,x){b(g,x);function j(){this.constructor=g}g.prototype=x===null?Object.create(x):(j.prototype=x.prototype,new j)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(b){a(g,b);function g(x){var j=this;return x="[Parchment] "+x,j=b.call(this,x)||this,j.message=x,j.name=j.constructor.name,j}return g}(Error);r.ParchmentError=o;var l={},d={},h={},f={};r.DATA_KEY="__blot";var u;(function(b){b[b.TYPE=3]="TYPE",b[b.LEVEL=12]="LEVEL",b[b.ATTRIBUTE=13]="ATTRIBUTE",b[b.BLOT=14]="BLOT",b[b.INLINE=7]="INLINE",b[b.BLOCK=11]="BLOCK",b[b.BLOCK_BLOT=10]="BLOCK_BLOT",b[b.INLINE_BLOT=6]="INLINE_BLOT",b[b.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",b[b.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",b[b.ANY=15]="ANY"})(u=r.Scope||(r.Scope={}));function m(b,g){var x=w(b);if(x==null)throw new o("Unable to create "+b+" blot");var j=x,N=b instanceof Node||b.nodeType===Node.TEXT_NODE?b:j.create(g);return new j(N,g)}r.create=m;function p(b,g){return g===void 0&&(g=!1),b==null?null:b[r.DATA_KEY]!=null?b[r.DATA_KEY].blot:g?p(b.parentNode,g):null}r.find=p;function w(b,g){g===void 0&&(g=u.ANY);var x;if(typeof b=="string")x=f[b]||l[b];else if(b instanceof Text||b.nodeType===Node.TEXT_NODE)x=f.text;else if(typeof b=="number")b&u.LEVEL&u.BLOCK?x=f.block:b&u.LEVEL&u.INLINE&&(x=f.inline);else if(b instanceof HTMLElement){var j=(b.getAttribute("class")||"").split(/\s+/);for(var N in j)if(x=d[j[N]],x)break;x=x||h[b.tagName]}return x==null?null:g&u.LEVEL&x.scope&&g&u.TYPE&x.scope?x:null}r.query=w;function y(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];if(b.length>1)return b.map(function(N){return y(N)});var x=b[0];if(typeof x.blotName!="string"&&typeof x.attrName!="string")throw new o("Invalid definition");if(x.blotName==="abstract")throw new o("Cannot register abstract class");if(f[x.blotName||x.attrName]=x,typeof x.keyName=="string")l[x.keyName]=x;else if(x.className!=null&&(d[x.className]=x),x.tagName!=null){Array.isArray(x.tagName)?x.tagName=x.tagName.map(function(N){return N.toUpperCase()}):x.tagName=x.tagName.toUpperCase();var j=Array.isArray(x.tagName)?x.tagName:[x.tagName];j.forEach(function(N){(h[N]==null||x.className==null)&&(h[N]=x)})}return x}r.register=y},function(n,r,i){var a=i(51),o=i(11),l=i(3),d=i(20),h="\0",f=function(u){Array.isArray(u)?this.ops=u:u!=null&&Array.isArray(u.ops)?this.ops=u.ops:this.ops=[]};f.prototype.insert=function(u,m){var p={};return u.length===0?this:(p.insert=u,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p))},f.prototype.delete=function(u){return u<=0?this:this.push({delete:u})},f.prototype.retain=function(u,m){if(u<=0)return this;var p={retain:u};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p)},f.prototype.push=function(u){var m=this.ops.length,p=this.ops[m-1];if(u=l(!0,{},u),typeof p=="object"){if(typeof u.delete=="number"&&typeof p.delete=="number")return this.ops[m-1]={delete:p.delete+u.delete},this;if(typeof p.delete=="number"&&u.insert!=null&&(m-=1,p=this.ops[m-1],typeof p!="object"))return this.ops.unshift(u),this;if(o(u.attributes,p.attributes)){if(typeof u.insert=="string"&&typeof p.insert=="string")return this.ops[m-1]={insert:p.insert+u.insert},typeof u.attributes=="object"&&(this.ops[m-1].attributes=u.attributes),this;if(typeof u.retain=="number"&&typeof p.retain=="number")return this.ops[m-1]={retain:p.retain+u.retain},typeof u.attributes=="object"&&(this.ops[m-1].attributes=u.attributes),this}}return m===this.ops.length?this.ops.push(u):this.ops.splice(m,0,u),this},f.prototype.chop=function(){var u=this.ops[this.ops.length-1];return u&&u.retain&&!u.attributes&&this.ops.pop(),this},f.prototype.filter=function(u){return this.ops.filter(u)},f.prototype.forEach=function(u){this.ops.forEach(u)},f.prototype.map=function(u){return this.ops.map(u)},f.prototype.partition=function(u){var m=[],p=[];return this.forEach(function(w){var y=u(w)?m:p;y.push(w)}),[m,p]},f.prototype.reduce=function(u,m){return this.ops.reduce(u,m)},f.prototype.changeLength=function(){return this.reduce(function(u,m){return m.insert?u+d.length(m):m.delete?u-m.delete:u},0)},f.prototype.length=function(){return this.reduce(function(u,m){return u+d.length(m)},0)},f.prototype.slice=function(u,m){u=u||0,typeof m!="number"&&(m=1/0);for(var p=[],w=d.iterator(this.ops),y=0;y<m&&w.hasNext();){var b;y<u?b=w.next(u-y):(b=w.next(m-y),p.push(b)),y+=d.length(b)}return new f(p)},f.prototype.compose=function(u){var m=d.iterator(this.ops),p=d.iterator(u.ops),w=[],y=p.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var b=y.retain;m.peekType()==="insert"&&m.peekLength()<=b;)b-=m.peekLength(),w.push(m.next());y.retain-b>0&&p.next(y.retain-b)}for(var g=new f(w);m.hasNext()||p.hasNext();)if(p.peekType()==="insert")g.push(p.next());else if(m.peekType()==="delete")g.push(m.next());else{var x=Math.min(m.peekLength(),p.peekLength()),j=m.next(x),N=p.next(x);if(typeof N.retain=="number"){var S={};typeof j.retain=="number"?S.retain=x:S.insert=j.insert;var C=d.attributes.compose(j.attributes,N.attributes,typeof j.retain=="number");if(C&&(S.attributes=C),g.push(S),!p.hasNext()&&o(g.ops[g.ops.length-1],S)){var T=new f(m.rest());return g.concat(T).chop()}}else typeof N.delete=="number"&&typeof j.retain=="number"&&g.push(N)}return g.chop()},f.prototype.concat=function(u){var m=new f(this.ops.slice());return u.ops.length>0&&(m.push(u.ops[0]),m.ops=m.ops.concat(u.ops.slice(1))),m},f.prototype.diff=function(u,m){if(this.ops===u.ops)return new f;var p=[this,u].map(function(x){return x.map(function(j){if(j.insert!=null)return typeof j.insert=="string"?j.insert:h;var N=x===u?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),w=new f,y=a(p[0],p[1],m),b=d.iterator(this.ops),g=d.iterator(u.ops);return y.forEach(function(x){for(var j=x[1].length;j>0;){var N=0;switch(x[0]){case a.INSERT:N=Math.min(g.peekLength(),j),w.push(g.next(N));break;case a.DELETE:N=Math.min(j,b.peekLength()),b.next(N),w.delete(N);break;case a.EQUAL:N=Math.min(b.peekLength(),g.peekLength(),j);var S=b.next(N),C=g.next(N);o(S.insert,C.insert)?w.retain(N,d.attributes.diff(S.attributes,C.attributes)):w.push(C).delete(N);break}j-=N}}),w.chop()},f.prototype.eachLine=function(u,m){m=m||`
`;for(var p=d.iterator(this.ops),w=new f,y=0;p.hasNext();){if(p.peekType()!=="insert")return;var b=p.peek(),g=d.length(b)-p.peekLength(),x=typeof b.insert=="string"?b.insert.indexOf(m,g)-g:-1;if(x<0)w.push(p.next());else if(x>0)w.push(p.next(x));else{if(u(w,p.next(1).attributes||{},y)===!1)return;y+=1,w=new f}}w.length()>0&&u(w,{},y)},f.prototype.transform=function(u,m){if(m=!!m,typeof u=="number")return this.transformPosition(u,m);for(var p=d.iterator(this.ops),w=d.iterator(u.ops),y=new f;p.hasNext()||w.hasNext();)if(p.peekType()==="insert"&&(m||w.peekType()!=="insert"))y.retain(d.length(p.next()));else if(w.peekType()==="insert")y.push(w.next());else{var b=Math.min(p.peekLength(),w.peekLength()),g=p.next(b),x=w.next(b);if(g.delete)continue;x.delete?y.push(x):y.retain(b,d.attributes.transform(g.attributes,x.attributes,m))}return y.chop()},f.prototype.transformPosition=function(u,m){m=!!m;for(var p=d.iterator(this.ops),w=0;p.hasNext()&&w<=u;){var y=p.peekLength(),b=p.peekType();if(p.next(),b==="delete"){u-=Math.min(y,u-w);continue}else b==="insert"&&(w<u||!m)&&(u+=y);w+=y}return u},n.exports=f},function(n,r){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d=function(p){return typeof Array.isArray=="function"?Array.isArray(p):a.call(p)==="[object Array]"},h=function(p){if(!p||a.call(p)!=="[object Object]")return!1;var w=i.call(p,"constructor"),y=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!w&&!y)return!1;var b;for(b in p);return typeof b>"u"||i.call(p,b)},f=function(p,w){o&&w.name==="__proto__"?o(p,w.name,{enumerable:!0,configurable:!0,value:w.newValue,writable:!0}):p[w.name]=w.newValue},u=function(p,w){if(w==="__proto__")if(i.call(p,w)){if(l)return l(p,w).value}else return;return p[w]};n.exports=function m(){var p,w,y,b,g,x,j=arguments[0],N=1,S=arguments.length,C=!1;for(typeof j=="boolean"&&(C=j,j=arguments[1]||{},N=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});N<S;++N)if(p=arguments[N],p!=null)for(w in p)y=u(j,w),b=u(p,w),j!==b&&(C&&b&&(h(b)||(g=d(b)))?(g?(g=!1,x=y&&d(y)?y:[]):x=y&&h(y)?y:{},f(j,{name:w,newValue:m(C,x,b)})):typeof b<"u"&&f(j,{name:w,newValue:b}));return j}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var a=function(){function R(E,F){for(var O=0;O<F.length;O++){var M=F[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(E,M.key,M)}}return function(E,F,O){return F&&R(E.prototype,F),O&&R(E,O),E}}(),o=function R(E,F,O){E===null&&(E=Function.prototype);var M=Object.getOwnPropertyDescriptor(E,F);if(M===void 0){var Z=Object.getPrototypeOf(E);return Z===null?void 0:R(Z,F,O)}else{if("value"in M)return M.value;var X=M.get;return X===void 0?void 0:X.call(O)}},l=i(3),d=j(l),h=i(2),f=j(h),u=i(0),m=j(u),p=i(16),w=j(p),y=i(6),b=j(y),g=i(7),x=j(g);function j(R){return R&&R.__esModule?R:{default:R}}function N(R,E){if(!(R instanceof E))throw new TypeError("Cannot call a class as a function")}function S(R,E){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:R}function C(R,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);R.prototype=Object.create(E&&E.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(R,E):R.__proto__=E)}var T=1,A=function(R){C(E,R);function E(){return N(this,E),S(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return a(E,[{key:"attach",value:function(){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,d.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(O,M){var Z=m.default.query(O,m.default.Scope.BLOCK_ATTRIBUTE);Z!=null&&this.attributes.attribute(Z,M)}},{key:"formatAt",value:function(O,M,Z,X){this.format(Z,X)}},{key:"insertAt",value:function(O,M,Z){if(typeof M=="string"&&M.endsWith(`
`)){var X=m.default.create(I.blotName);this.parent.insertBefore(X,O===0?this:this.next),X.insertAt(0,M.slice(0,-1))}else o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,O,M,Z)}}]),E}(m.default.Embed);A.scope=m.default.Scope.BLOCK_BLOT;var I=function(R){C(E,R);function E(F){N(this,E);var O=S(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,F));return O.cache={},O}return a(E,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function(O,M){return M.length()===0?O:O.insert(M.value(),P(M))},new f.default).insert(`
`,P(this))),this.cache.delta}},{key:"deleteAt",value:function(O,M){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,O,M),this.cache={}}},{key:"formatAt",value:function(O,M,Z,X){M<=0||(m.default.query(Z,m.default.Scope.BLOCK)?O+M===this.length()&&this.format(Z,X):o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,O,Math.min(M,this.length()-O-1),Z,X),this.cache={})}},{key:"insertAt",value:function(O,M,Z){if(Z!=null)return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,O,M,Z);if(M.length!==0){var X=M.split(`
`),z=X.shift();z.length>0&&(O<this.length()-1||this.children.tail==null?o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,Math.min(O,this.length()-1),z):this.children.tail.insertAt(this.children.tail.length(),z),this.cache={});var D=this;X.reduce(function(B,V){return D=D.split(B,!0),D.insertAt(0,V),V.length},O+z.length)}}},{key:"insertBefore",value:function(O,M){var Z=this.children.head;o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,O,M),Z instanceof w.default&&Z.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"length",this).call(this)+T),this.cache.length}},{key:"moveChildren",value:function(O,M){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"moveChildren",this).call(this,O,M),this.cache={}}},{key:"optimize",value:function(O){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,O),this.cache={}}},{key:"path",value:function(O){return o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,O,!0)}},{key:"removeChild",value:function(O){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"removeChild",this).call(this,O),this.cache={}}},{key:"split",value:function(O){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(M&&(O===0||O>=this.length()-T)){var Z=this.clone();return O===0?(this.parent.insertBefore(Z,this),this):(this.parent.insertBefore(Z,this.next),Z)}else{var X=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"split",this).call(this,O,M);return this.cache={},X}}}]),E}(m.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[b.default,m.default.Embed,x.default];function P(R){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R==null||(typeof R.formats=="function"&&(E=(0,d.default)(E,R.formats())),R.parent==null||R.parent.blotName=="scroll"||R.parent.statics.scope!==R.statics.scope)?E:P(R.parent,E)}r.bubbleFormats=P,r.BlockEmbed=A,r.default=I},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},o=function(){function D(B,V){var H=[],q=!0,W=!1,Y=void 0;try{for(var U=B[Symbol.iterator](),G;!(q=(G=U.next()).done)&&(H.push(G.value),!(V&&H.length===V));q=!0);}catch(ne){W=!0,Y=ne}finally{try{!q&&U.return&&U.return()}finally{if(W)throw Y}}return H}return function(B,V){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return D(B,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function D(B,V){for(var H=0;H<V.length;H++){var q=V[H];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(B,q.key,q)}}return function(B,V,H){return V&&D(B.prototype,V),H&&D(B,H),B}}();i(50);var d=i(2),h=P(d),f=i(14),u=P(f),m=i(8),p=P(m),w=i(9),y=P(w),b=i(0),g=P(b),x=i(15),j=P(x),N=i(3),S=P(N),C=i(10),T=P(C),A=i(34),I=P(A);function P(D){return D&&D.__esModule?D:{default:D}}function R(D,B,V){return B in D?Object.defineProperty(D,B,{value:V,enumerable:!0,configurable:!0,writable:!0}):D[B]=V,D}function E(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")}var F=(0,T.default)("quill"),O=function(){l(D,null,[{key:"debug",value:function(V){V===!0&&(V="log"),T.default.level(V)}},{key:"find",value:function(V){return V.__quill||g.default.find(V)}},{key:"import",value:function(V){return this.imports[V]==null&&F.error("Cannot import "+V+". Are you sure it was registered?"),this.imports[V]}},{key:"register",value:function(V,H){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof V!="string"){var Y=V.attrName||V.blotName;typeof Y=="string"?this.register("formats/"+Y,V,H):Object.keys(V).forEach(function(U){q.register(U,V[U],H)})}else this.imports[V]!=null&&!W&&F.warn("Overwriting "+V+" with",H),this.imports[V]=H,(V.startsWith("blots/")||V.startsWith("formats/"))&&H.blotName!=="abstract"?g.default.register(H):V.startsWith("modules")&&typeof H.register=="function"&&H.register()}}]);function D(B){var V=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E(this,D),this.options=M(B,H),this.container=this.options.container,this.container==null)return F.error("Invalid Quill container",B);this.options.debug&&D.debug(this.options.debug);var q=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new u.default(this.scroll),this.selection=new j.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(Y){Y===p.default.events.TEXT_CHANGE&&V.root.classList.toggle("ql-blank",V.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(Y,U){var G=V.selection.lastRange,ne=G&&G.length===0?G.index:void 0;Z.call(V,function(){return V.editor.update(null,U,ne)},Y)});var W=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+q+"<p><br></p></div>");this.setContents(W),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(D,[{key:"addContainer",value:function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof V=="string"){var q=V;V=document.createElement("div"),V.classList.add(q)}return this.container.insertBefore(V,H),V}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(V,H,q){var W=this,Y=X(V,H,q),U=o(Y,4);return V=U[0],H=U[1],q=U[3],Z.call(this,function(){return W.editor.deleteText(V,H)},q,V,-1*H)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(V),this.container.classList.toggle("ql-disabled",!V)}},{key:"focus",value:function(){var V=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=V,this.scrollIntoView()}},{key:"format",value:function(V,H){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return Z.call(this,function(){var Y=q.getSelection(!0),U=new h.default;if(Y==null)return U;if(g.default.query(V,g.default.Scope.BLOCK))U=q.editor.formatLine(Y.index,Y.length,R({},V,H));else{if(Y.length===0)return q.selection.format(V,H),U;U=q.editor.formatText(Y.index,Y.length,R({},V,H))}return q.setSelection(Y,p.default.sources.SILENT),U},W)}},{key:"formatLine",value:function(V,H,q,W,Y){var U=this,G=void 0,ne=X(V,H,q,W,Y),J=o(ne,4);return V=J[0],H=J[1],G=J[2],Y=J[3],Z.call(this,function(){return U.editor.formatLine(V,H,G)},Y,V,0)}},{key:"formatText",value:function(V,H,q,W,Y){var U=this,G=void 0,ne=X(V,H,q,W,Y),J=o(ne,4);return V=J[0],H=J[1],G=J[2],Y=J[3],Z.call(this,function(){return U.editor.formatText(V,H,G)},Y,V,0)}},{key:"getBounds",value:function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=void 0;typeof V=="number"?q=this.selection.getBounds(V,H):q=this.selection.getBounds(V.index,V.length);var W=this.container.getBoundingClientRect();return{bottom:q.bottom-W.top,height:q.height,left:q.left-W.left,right:q.right-W.left,top:q.top-W.top,width:q.width}}},{key:"getContents",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,q=X(V,H),W=o(q,2);return V=W[0],H=W[1],this.editor.getContents(V,H)}},{key:"getFormat",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof V=="number"?this.editor.getFormat(V,H):this.editor.getFormat(V.index,V.length)}},{key:"getIndex",value:function(V){return V.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(V){return this.scroll.leaf(V)}},{key:"getLine",value:function(V){return this.scroll.line(V)}},{key:"getLines",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof V!="number"?this.scroll.lines(V.index,V.length):this.scroll.lines(V,H)}},{key:"getModule",value:function(V){return this.theme.modules[V]}},{key:"getSelection",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return V&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,q=X(V,H),W=o(q,2);return V=W[0],H=W[1],this.editor.getText(V,H)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(V,H,q){var W=this,Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:D.sources.API;return Z.call(this,function(){return W.editor.insertEmbed(V,H,q)},Y,V)}},{key:"insertText",value:function(V,H,q,W,Y){var U=this,G=void 0,ne=X(V,0,q,W,Y),J=o(ne,4);return V=J[0],G=J[2],Y=J[3],Z.call(this,function(){return U.editor.insertText(V,H,G)},Y,V,H.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(V,H,q){this.clipboard.dangerouslyPasteHTML(V,H,q)}},{key:"removeFormat",value:function(V,H,q){var W=this,Y=X(V,H,q),U=o(Y,4);return V=U[0],H=U[1],q=U[3],Z.call(this,function(){return W.editor.removeFormat(V,H)},q,V)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(V){var H=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Z.call(this,function(){V=new h.default(V);var W=H.getLength(),Y=H.editor.deleteText(0,W),U=H.editor.applyDelta(V),G=U.ops[U.ops.length-1];G!=null&&typeof G.insert=="string"&&G.insert[G.insert.length-1]===`
`&&(H.editor.deleteText(H.getLength()-1,1),U.delete(1));var ne=Y.compose(U);return ne},q)}},{key:"setSelection",value:function(V,H,q){if(V==null)this.selection.setRange(null,H||D.sources.API);else{var W=X(V,H,q),Y=o(W,4);V=Y[0],H=Y[1],q=Y[3],this.selection.setRange(new x.Range(V,H),q),q!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,q=new h.default().insert(V);return this.setContents(q,H)}},{key:"update",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,H=this.scroll.update(V);return this.selection.update(V),H}},{key:"updateContents",value:function(V){var H=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Z.call(this,function(){return V=new h.default(V),H.editor.applyDelta(V,q)},q,!0)}}]),D}();O.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},O.events=p.default.events,O.sources=p.default.sources,O.version="1.3.7",O.imports={delta:h.default,parchment:g.default,"core/module":y.default,"core/theme":I.default};function M(D,B){if(B=(0,S.default)(!0,{container:D,modules:{clipboard:!0,keyboard:!0,history:!0}},B),!B.theme||B.theme===O.DEFAULTS.theme)B.theme=I.default;else if(B.theme=O.import("themes/"+B.theme),B.theme==null)throw new Error("Invalid theme "+B.theme+". Did you register it?");var V=(0,S.default)(!0,{},B.theme.DEFAULTS);[V,B].forEach(function(W){W.modules=W.modules||{},Object.keys(W.modules).forEach(function(Y){W.modules[Y]===!0&&(W.modules[Y]={})})});var H=Object.keys(V.modules).concat(Object.keys(B.modules)),q=H.reduce(function(W,Y){var U=O.import("modules/"+Y);return U==null?F.error("Cannot load "+Y+" module. Are you sure you registered it?"):W[Y]=U.DEFAULTS||{},W},{});return B.modules!=null&&B.modules.toolbar&&B.modules.toolbar.constructor!==Object&&(B.modules.toolbar={container:B.modules.toolbar}),B=(0,S.default)(!0,{},O.DEFAULTS,{modules:q},V,B),["bounds","container","scrollingContainer"].forEach(function(W){typeof B[W]=="string"&&(B[W]=document.querySelector(B[W]))}),B.modules=Object.keys(B.modules).reduce(function(W,Y){return B.modules[Y]&&(W[Y]=B.modules[Y]),W},{}),B}function Z(D,B,V,H){if(this.options.strict&&!this.isEnabled()&&B===p.default.sources.USER)return new h.default;var q=V==null?null:this.getSelection(),W=this.editor.delta,Y=D();if(q!=null&&(V===!0&&(V=q.index),H==null?q=z(q,Y,B):H!==0&&(q=z(q,V,H,B)),this.setSelection(q,p.default.sources.SILENT)),Y.length()>0){var U,G=[p.default.events.TEXT_CHANGE,Y,W,B];if((U=this.emitter).emit.apply(U,[p.default.events.EDITOR_CHANGE].concat(G)),B!==p.default.sources.SILENT){var ne;(ne=this.emitter).emit.apply(ne,G)}}return Y}function X(D,B,V,H,q){var W={};return typeof D.index=="number"&&typeof D.length=="number"?typeof B!="number"?(q=H,H=V,V=B,B=D.length,D=D.index):(B=D.length,D=D.index):typeof B!="number"&&(q=H,H=V,V=B,B=0),(typeof V>"u"?"undefined":a(V))==="object"?(W=V,q=H):typeof V=="string"&&(H!=null?W[V]=H:q=V),q=q||p.default.sources.API,[D,B,W,q]}function z(D,B,V,H){if(D==null)return null;var q=void 0,W=void 0;if(B instanceof h.default){var Y=[D.index,D.index+D.length].map(function(J){return B.transformPosition(J,H!==p.default.sources.USER)}),U=o(Y,2);q=U[0],W=U[1]}else{var G=[D.index,D.index+D.length].map(function(J){return J<B||J===B&&H===p.default.sources.USER?J:V>=0?J+V:Math.max(B,J+V)}),ne=o(G,2);q=ne[0],W=ne[1]}return new x.Range(q,W-q)}r.expandConfig=M,r.overload=X,r.default=O},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function b(g,x){for(var j=0;j<x.length;j++){var N=x[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}return function(g,x,j){return x&&b(g.prototype,x),j&&b(g,j),g}}(),o=function b(g,x,j){g===null&&(g=Function.prototype);var N=Object.getOwnPropertyDescriptor(g,x);if(N===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:b(S,x,j)}else{if("value"in N)return N.value;var C=N.get;return C===void 0?void 0:C.call(j)}},l=i(7),d=u(l),h=i(0),f=u(h);function u(b){return b&&b.__esModule?b:{default:b}}function m(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function p(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function w(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var y=function(b){w(g,b);function g(){return m(this,g),p(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"formatAt",value:function(j,N,S,C){if(g.compare(this.statics.blotName,S)<0&&f.default.query(S,f.default.Scope.BLOT)){var T=this.isolate(j,N);C&&T.wrap(S,C)}else o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,j,N,S,C)}},{key:"optimize",value:function(j){if(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,j),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(j,N){var S=g.order.indexOf(j),C=g.order.indexOf(N);return S>=0||C>=0?S-C:j===N?0:j<N?-1:1}}]),g}(f.default.Inline);y.allowedChildren=[y,f.default.Embed,d.default],y.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=l(a);function l(m){return m&&m.__esModule?m:{default:m}}function d(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function h(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){f(p,m);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default.Text);r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function x(j,N){for(var S=0;S<N.length;S++){var C=N[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(j,C.key,C)}}return function(j,N,S){return N&&x(j.prototype,N),S&&x(j,S),j}}(),o=function x(j,N,S){j===null&&(j=Function.prototype);var C=Object.getOwnPropertyDescriptor(j,N);if(C===void 0){var T=Object.getPrototypeOf(j);return T===null?void 0:x(T,N,S)}else{if("value"in C)return C.value;var A=C.get;return A===void 0?void 0:A.call(S)}},l=i(54),d=u(l),h=i(10),f=u(h);function u(x){return x&&x.__esModule?x:{default:x}}function m(x,j){if(!(x instanceof j))throw new TypeError("Cannot call a class as a function")}function p(x,j){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:x}function w(x,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);x.prototype=Object.create(j&&j.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(x,j):x.__proto__=j)}var y=(0,f.default)("quill:events"),b=["selectionchange","mousedown","mouseup","click"];b.forEach(function(x){document.addEventListener(x,function(){for(var j=arguments.length,N=Array(j),S=0;S<j;S++)N[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(C){if(C.__quill&&C.__quill.emitter){var T;(T=C.__quill.emitter).handleDOM.apply(T,N)}})})});var g=function(x){w(j,x);function j(){m(this,j);var N=p(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));return N.listeners={},N.on("error",y.error),N}return a(j,[{key:"emit",value:function(){y.log.apply(y,arguments),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var C=arguments.length,T=Array(C>1?C-1:0),A=1;A<C;A++)T[A-1]=arguments[A];(this.listeners[S.type]||[]).forEach(function(I){var P=I.node,R=I.handler;(S.target===P||P.contains(S.target))&&R.apply(void 0,[S].concat(T))})}},{key:"listenDOM",value:function(S,C,T){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:C,handler:T})}}]),j}(d.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},r.default=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function a(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}var o=function l(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,l),this.quill=d,this.options=h};o.DEFAULTS={},r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=["error","warn","log","info"],o="warn";function l(h){if(a.indexOf(h)<=a.indexOf(o)){for(var f,u=arguments.length,m=Array(u>1?u-1:0),p=1;p<u;p++)m[p-1]=arguments[p];(f=console)[h].apply(f,m)}}function d(h){return a.reduce(function(f,u){return f[u]=l.bind(console,u,h),f},{})}l.level=d.level=function(h){o=h},r.default=d},function(n,r,i){var a=Array.prototype.slice,o=i(52),l=i(53),d=n.exports=function(m,p,w){return w||(w={}),m===p?!0:m instanceof Date&&p instanceof Date?m.getTime()===p.getTime():!m||!p||typeof m!="object"&&typeof p!="object"?w.strict?m===p:m==p:u(m,p,w)};function h(m){return m==null}function f(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function u(m,p,w){var y,b;if(h(m)||h(p)||m.prototype!==p.prototype)return!1;if(l(m))return l(p)?(m=a.call(m),p=a.call(p),d(m,p,w)):!1;if(f(m)){if(!f(p)||m.length!==p.length)return!1;for(y=0;y<m.length;y++)if(m[y]!==p[y])return!1;return!0}try{var g=o(m),x=o(p)}catch{return!1}if(g.length!=x.length)return!1;for(g.sort(),x.sort(),y=g.length-1;y>=0;y--)if(g[y]!=x[y])return!1;for(y=g.length-1;y>=0;y--)if(b=g[y],!d(m[b],p[b],w))return!1;return typeof m==typeof p}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=function(){function l(d,h,f){f===void 0&&(f={}),this.attrName=d,this.keyName=h;var u=a.Scope.TYPE&a.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&a.Scope.LEVEL|u:this.scope=a.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return l.keys=function(d){return[].map.call(d.attributes,function(h){return h.name})},l.prototype.add=function(d,h){return this.canAdd(d,h)?(d.setAttribute(this.keyName,h),!0):!1},l.prototype.canAdd=function(d,h){var f=a.query(d,a.Scope.BLOT&(this.scope|a.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof h=="string"?this.whitelist.indexOf(h.replace(/["']/g,""))>-1:this.whitelist.indexOf(h)>-1},l.prototype.remove=function(d){d.removeAttribute(this.keyName)},l.prototype.value=function(d){var h=d.getAttribute(this.keyName);return this.canAdd(d,h)&&h?h:""},l}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var a=function(){function A(I,P){var R=[],E=!0,F=!1,O=void 0;try{for(var M=I[Symbol.iterator](),Z;!(E=(Z=M.next()).done)&&(R.push(Z.value),!(P&&R.length===P));E=!0);}catch(X){F=!0,O=X}finally{try{!E&&M.return&&M.return()}finally{if(F)throw O}}return R}return function(I,P){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return A(I,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function A(I,P){for(var R=0;R<P.length;R++){var E=P[R];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(I,E.key,E)}}return function(I,P,R){return P&&A(I.prototype,P),R&&A(I,R),I}}(),l=function A(I,P,R){I===null&&(I=Function.prototype);var E=Object.getOwnPropertyDescriptor(I,P);if(E===void 0){var F=Object.getPrototypeOf(I);return F===null?void 0:A(F,P,R)}else{if("value"in E)return E.value;var O=E.get;return O===void 0?void 0:O.call(R)}},d=i(2),h=x(d),f=i(0),u=x(f),m=i(4),p=x(m),w=i(6),y=x(w),b=i(7),g=x(b);function x(A){return A&&A.__esModule?A:{default:A}}function j(A,I){if(!(A instanceof I))throw new TypeError("Cannot call a class as a function")}function N(A,I){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:A}function S(A,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);A.prototype=Object.create(I&&I.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(A,I):A.__proto__=I)}var C=function(A){S(I,A);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I}(y.default);C.blotName="code",C.tagName="CODE";var T=function(A){S(I,A);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"delta",value:function(){var R=this,E=this.domNode.textContent;return E.endsWith(`
`)&&(E=E.slice(0,-1)),E.split(`
`).reduce(function(F,O){return F.insert(O).insert(`
`,R.formats())},new h.default)}},{key:"format",value:function(R,E){if(!(R===this.statics.blotName&&E)){var F=this.descendant(g.default,this.length()-1),O=a(F,1),M=O[0];M!=null&&M.deleteAt(M.length()-1,1),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,R,E)}}},{key:"formatAt",value:function(R,E,F,O){if(E!==0&&!(u.default.query(F,u.default.Scope.BLOCK)==null||F===this.statics.blotName&&O===this.statics.formats(this.domNode))){var M=this.newlineIndex(R);if(!(M<0||M>=R+E)){var Z=this.newlineIndex(R,!0)+1,X=M-Z+1,z=this.isolate(Z,X),D=z.next;z.format(F,O),D instanceof I&&D.formatAt(0,R-Z+E-X,F,O)}}}},{key:"insertAt",value:function(R,E,F){if(F==null){var O=this.descendant(g.default,R),M=a(O,2),Z=M[0],X=M[1];Z.insertAt(X,E)}}},{key:"length",value:function(){var R=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?R:R+1}},{key:"newlineIndex",value:function(R){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return this.domNode.textContent.slice(0,R).lastIndexOf(`
`);var F=this.domNode.textContent.slice(R).indexOf(`
`);return F>-1?R+F:-1}},{key:"optimize",value:function(R){this.domNode.textContent.endsWith(`
`)||this.appendChild(u.default.create("text",`
`)),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,R);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===E.statics.formats(E.domNode)&&(E.optimize(R),E.moveChildren(this),E.remove())}},{key:"replace",value:function(R){l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,R),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(E){var F=u.default.find(E);F==null?E.parentNode.removeChild(E):F instanceof u.default.Embed?F.remove():F.unwrap()})}}],[{key:"create",value:function(R){var E=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,R);return E.setAttribute("spellcheck",!1),E}},{key:"formats",value:function(){return!0}}]),I}(p.default);T.blotName="code-block",T.tagName="PRE",T.TAB="  ",r.Code=C,r.default=T},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},o=function(){function D(B,V){var H=[],q=!0,W=!1,Y=void 0;try{for(var U=B[Symbol.iterator](),G;!(q=(G=U.next()).done)&&(H.push(G.value),!(V&&H.length===V));q=!0);}catch(ne){W=!0,Y=ne}finally{try{!q&&U.return&&U.return()}finally{if(W)throw Y}}return H}return function(B,V){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return D(B,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function D(B,V){for(var H=0;H<V.length;H++){var q=V[H];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(B,q.key,q)}}return function(B,V,H){return V&&D(B.prototype,V),H&&D(B,H),B}}(),d=i(2),h=E(d),f=i(20),u=E(f),m=i(0),p=E(m),w=i(13),y=E(w),b=i(24),g=E(b),x=i(4),j=E(x),N=i(16),S=E(N),C=i(21),T=E(C),A=i(11),I=E(A),P=i(3),R=E(P);function E(D){return D&&D.__esModule?D:{default:D}}function F(D,B,V){return B in D?Object.defineProperty(D,B,{value:V,enumerable:!0,configurable:!0,writable:!0}):D[B]=V,D}function O(D,B){if(!(D instanceof B))throw new TypeError("Cannot call a class as a function")}var M=/^[ -~]*$/,Z=function(){function D(B){O(this,D),this.scroll=B,this.delta=this.getDelta()}return l(D,[{key:"applyDelta",value:function(V){var H=this,q=!1;this.scroll.update();var W=this.scroll.length();return this.scroll.batchStart(),V=z(V),V.reduce(function(Y,U){var G=U.retain||U.delete||U.insert.length||1,ne=U.attributes||{};if(U.insert!=null){if(typeof U.insert=="string"){var J=U.insert;J.endsWith(`
`)&&q&&(q=!1,J=J.slice(0,-1)),Y>=W&&!J.endsWith(`
`)&&(q=!0),H.scroll.insertAt(Y,J);var ie=H.scroll.line(Y),xe=o(ie,2),Se=xe[0],ue=xe[1],he=(0,R.default)({},(0,x.bubbleFormats)(Se));if(Se instanceof j.default){var Q=Se.descendant(p.default.Leaf,ue),ye=o(Q,1),be=ye[0];he=(0,R.default)(he,(0,x.bubbleFormats)(be))}ne=u.default.attributes.diff(he,ne)||{}}else if(a(U.insert)==="object"){var ce=Object.keys(U.insert)[0];if(ce==null)return Y;H.scroll.insertAt(Y,ce,U.insert[ce])}W+=G}return Object.keys(ne).forEach(function(ge){H.scroll.formatAt(Y,G,ge,ne[ge])}),Y+G},0),V.reduce(function(Y,U){return typeof U.delete=="number"?(H.scroll.deleteAt(Y,U.delete),Y):Y+(U.retain||U.insert.length||1)},0),this.scroll.batchEnd(),this.update(V)}},{key:"deleteText",value:function(V,H){return this.scroll.deleteAt(V,H),this.update(new h.default().retain(V).delete(H))}},{key:"formatLine",value:function(V,H){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(W).forEach(function(Y){if(!(q.scroll.whitelist!=null&&!q.scroll.whitelist[Y])){var U=q.scroll.lines(V,Math.max(H,1)),G=H;U.forEach(function(ne){var J=ne.length();if(!(ne instanceof y.default))ne.format(Y,W[Y]);else{var ie=V-ne.offset(q.scroll),xe=ne.newlineIndex(ie+G)-ie+1;ne.formatAt(ie,xe,Y,W[Y])}G-=J})}}),this.scroll.optimize(),this.update(new h.default().retain(V).retain(H,(0,T.default)(W)))}},{key:"formatText",value:function(V,H){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(W).forEach(function(Y){q.scroll.formatAt(V,H,Y,W[Y])}),this.update(new h.default().retain(V).retain(H,(0,T.default)(W)))}},{key:"getContents",value:function(V,H){return this.delta.slice(V,V+H)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(V,H){return V.concat(H.delta())},new h.default)}},{key:"getFormat",value:function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=[],W=[];H===0?this.scroll.path(V).forEach(function(U){var G=o(U,1),ne=G[0];ne instanceof j.default?q.push(ne):ne instanceof p.default.Leaf&&W.push(ne)}):(q=this.scroll.lines(V,H),W=this.scroll.descendants(p.default.Leaf,V,H));var Y=[q,W].map(function(U){if(U.length===0)return{};for(var G=(0,x.bubbleFormats)(U.shift());Object.keys(G).length>0;){var ne=U.shift();if(ne==null)return G;G=X((0,x.bubbleFormats)(ne),G)}return G});return R.default.apply(R.default,Y)}},{key:"getText",value:function(V,H){return this.getContents(V,H).filter(function(q){return typeof q.insert=="string"}).map(function(q){return q.insert}).join("")}},{key:"insertEmbed",value:function(V,H,q){return this.scroll.insertAt(V,H,q),this.update(new h.default().retain(V).insert(F({},H,q)))}},{key:"insertText",value:function(V,H){var q=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return H=H.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(V,H),Object.keys(W).forEach(function(Y){q.scroll.formatAt(V,H.length,Y,W[Y])}),this.update(new h.default().retain(V).insert(H,(0,T.default)(W)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var V=this.scroll.children.head;return V.statics.blotName!==j.default.blotName||V.children.length>1?!1:V.children.head instanceof S.default}},{key:"removeFormat",value:function(V,H){var q=this.getText(V,H),W=this.scroll.line(V+H),Y=o(W,2),U=Y[0],G=Y[1],ne=0,J=new h.default;U!=null&&(U instanceof y.default?ne=U.newlineIndex(G)-G+1:ne=U.length()-G,J=U.delta().slice(G,G+ne-1).insert(`
`));var ie=this.getContents(V,H+ne),xe=ie.diff(new h.default().insert(q).concat(J)),Se=new h.default().retain(V).concat(xe);return this.applyDelta(Se)}},{key:"update",value:function(V){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,W=this.delta;if(H.length===1&&H[0].type==="characterData"&&H[0].target.data.match(M)&&p.default.find(H[0].target)){var Y=p.default.find(H[0].target),U=(0,x.bubbleFormats)(Y),G=Y.offset(this.scroll),ne=H[0].oldValue.replace(g.default.CONTENTS,""),J=new h.default().insert(ne),ie=new h.default().insert(Y.value()),xe=new h.default().retain(G).concat(J.diff(ie,q));V=xe.reduce(function(Se,ue){return ue.insert?Se.insert(ue.insert,U):Se.push(ue)},new h.default),this.delta=W.compose(V)}else this.delta=this.getDelta(),(!V||!(0,I.default)(W.compose(V),this.delta))&&(V=W.diff(this.delta,q));return V}}]),D}();function X(D,B){return Object.keys(B).reduce(function(V,H){return D[H]==null||(B[H]===D[H]?V[H]=B[H]:Array.isArray(B[H])?B[H].indexOf(D[H])<0&&(V[H]=B[H].concat([D[H]])):V[H]=[B[H],D[H]]),V},{})}function z(D){return D.reduce(function(B,V){if(V.insert===1){var H=(0,T.default)(V.attributes);return delete H.image,B.insert({image:V.attributes.image},H)}if(V.attributes!=null&&(V.attributes.list===!0||V.attributes.bullet===!0)&&(V=(0,T.default)(V),V.attributes.list?V.attributes.list="ordered":(V.attributes.list="bullet",delete V.attributes.bullet)),typeof V.insert=="string"){var q=V.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return B.insert(q,V.attributes)}return B.push(V)},new h.default)}r.default=Z},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var a=function(){function A(I,P){var R=[],E=!0,F=!1,O=void 0;try{for(var M=I[Symbol.iterator](),Z;!(E=(Z=M.next()).done)&&(R.push(Z.value),!(P&&R.length===P));E=!0);}catch(X){F=!0,O=X}finally{try{!E&&M.return&&M.return()}finally{if(F)throw O}}return R}return function(I,P){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return A(I,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function A(I,P){for(var R=0;R<P.length;R++){var E=P[R];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(I,E.key,E)}}return function(I,P,R){return P&&A(I.prototype,P),R&&A(I,R),I}}(),l=i(0),d=g(l),h=i(21),f=g(h),u=i(11),m=g(u),p=i(8),w=g(p),y=i(10),b=g(y);function g(A){return A&&A.__esModule?A:{default:A}}function x(A){if(Array.isArray(A)){for(var I=0,P=Array(A.length);I<A.length;I++)P[I]=A[I];return P}else return Array.from(A)}function j(A,I){if(!(A instanceof I))throw new TypeError("Cannot call a class as a function")}var N=(0,b.default)("quill:selection"),S=function A(I){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;j(this,A),this.index=I,this.length=P},C=function(){function A(I,P){var R=this;j(this,A),this.emitter=P,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=d.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){R.mouseDown||setTimeout(R.update.bind(R,w.default.sources.USER),1)}),this.emitter.on(w.default.events.EDITOR_CHANGE,function(E,F){E===w.default.events.TEXT_CHANGE&&F.length()>0&&R.update(w.default.sources.SILENT)}),this.emitter.on(w.default.events.SCROLL_BEFORE_UPDATE,function(){if(R.hasFocus()){var E=R.getNativeRange();E!=null&&E.start.node!==R.cursor.textNode&&R.emitter.once(w.default.events.SCROLL_UPDATE,function(){try{R.setNativeRange(E.start.node,E.start.offset,E.end.node,E.end.offset)}catch{}})}}),this.emitter.on(w.default.events.SCROLL_OPTIMIZE,function(E,F){if(F.range){var O=F.range,M=O.startNode,Z=O.startOffset,X=O.endNode,z=O.endOffset;R.setNativeRange(M,Z,X,z)}}),this.update(w.default.sources.SILENT)}return o(A,[{key:"handleComposition",value:function(){var P=this;this.root.addEventListener("compositionstart",function(){P.composing=!0}),this.root.addEventListener("compositionend",function(){if(P.composing=!1,P.cursor.parent){var R=P.cursor.restore();if(!R)return;setTimeout(function(){P.setNativeRange(R.startNode,R.startOffset,R.endNode,R.endOffset)},1)}})}},{key:"handleDragging",value:function(){var P=this;this.emitter.listenDOM("mousedown",document.body,function(){P.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){P.mouseDown=!1,P.update(w.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(P,R){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[P])){this.scroll.update();var E=this.getNativeRange();if(!(E==null||!E.native.collapsed||d.default.query(P,d.default.Scope.BLOCK))){if(E.start.node!==this.cursor.textNode){var F=d.default.find(E.start.node,!1);if(F==null)return;if(F instanceof d.default.Leaf){var O=F.split(E.start.offset);F.parent.insertBefore(this.cursor,O)}else F.insertBefore(this.cursor,E.start.node);this.cursor.attach()}this.cursor.format(P,R),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(P){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=this.scroll.length();P=Math.min(P,E-1),R=Math.min(P+R,E-1)-P;var F=void 0,O=this.scroll.leaf(P),M=a(O,2),Z=M[0],X=M[1];if(Z==null)return null;var z=Z.position(X,!0),D=a(z,2);F=D[0],X=D[1];var B=document.createRange();if(R>0){B.setStart(F,X);var V=this.scroll.leaf(P+R),H=a(V,2);if(Z=H[0],X=H[1],Z==null)return null;var q=Z.position(X,!0),W=a(q,2);return F=W[0],X=W[1],B.setEnd(F,X),B.getBoundingClientRect()}else{var Y="left",U=void 0;return F instanceof Text?(X<F.data.length?(B.setStart(F,X),B.setEnd(F,X+1)):(B.setStart(F,X-1),B.setEnd(F,X),Y="right"),U=B.getBoundingClientRect()):(U=Z.domNode.getBoundingClientRect(),X>0&&(Y="right")),{bottom:U.top+U.height,height:U.height,left:U[Y],right:U[Y],top:U.top,width:0}}}},{key:"getNativeRange",value:function(){var P=document.getSelection();if(P==null||P.rangeCount<=0)return null;var R=P.getRangeAt(0);if(R==null)return null;var E=this.normalizeNative(R);return N.info("getNativeRange",E),E}},{key:"getRange",value:function(){var P=this.getNativeRange();if(P==null)return[null,null];var R=this.normalizedToRange(P);return[R,P]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(P){var R=this,E=[[P.start.node,P.start.offset]];P.native.collapsed||E.push([P.end.node,P.end.offset]);var F=E.map(function(Z){var X=a(Z,2),z=X[0],D=X[1],B=d.default.find(z,!0),V=B.offset(R.scroll);return D===0?V:B instanceof d.default.Container?V+B.length():V+B.index(z,D)}),O=Math.min(Math.max.apply(Math,x(F)),this.scroll.length()-1),M=Math.min.apply(Math,[O].concat(x(F)));return new S(M,O-M)}},{key:"normalizeNative",value:function(P){if(!T(this.root,P.startContainer)||!P.collapsed&&!T(this.root,P.endContainer))return null;var R={start:{node:P.startContainer,offset:P.startOffset},end:{node:P.endContainer,offset:P.endOffset},native:P};return[R.start,R.end].forEach(function(E){for(var F=E.node,O=E.offset;!(F instanceof Text)&&F.childNodes.length>0;)if(F.childNodes.length>O)F=F.childNodes[O],O=0;else if(F.childNodes.length===O)F=F.lastChild,O=F instanceof Text?F.data.length:F.childNodes.length+1;else break;E.node=F,E.offset=O}),R}},{key:"rangeToNative",value:function(P){var R=this,E=P.collapsed?[P.index]:[P.index,P.index+P.length],F=[],O=this.scroll.length();return E.forEach(function(M,Z){M=Math.min(O-1,M);var X=void 0,z=R.scroll.leaf(M),D=a(z,2),B=D[0],V=D[1],H=B.position(V,Z!==0),q=a(H,2);X=q[0],V=q[1],F.push(X,V)}),F.length<2&&(F=F.concat(F)),F}},{key:"scrollIntoView",value:function(P){var R=this.lastRange;if(R!=null){var E=this.getBounds(R.index,R.length);if(E!=null){var F=this.scroll.length()-1,O=this.scroll.line(Math.min(R.index,F)),M=a(O,1),Z=M[0],X=Z;if(R.length>0){var z=this.scroll.line(Math.min(R.index+R.length,F)),D=a(z,1);X=D[0]}if(!(Z==null||X==null)){var B=P.getBoundingClientRect();E.top<B.top?P.scrollTop-=B.top-E.top:E.bottom>B.bottom&&(P.scrollTop+=E.bottom-B.bottom)}}}}},{key:"setNativeRange",value:function(P,R){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,O=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",P,R,E,F),!(P!=null&&(this.root.parentNode==null||P.parentNode==null||E.parentNode==null))){var M=document.getSelection();if(M!=null)if(P!=null){this.hasFocus()||this.root.focus();var Z=(this.getNativeRange()||{}).native;if(Z==null||O||P!==Z.startContainer||R!==Z.startOffset||E!==Z.endContainer||F!==Z.endOffset){P.tagName=="BR"&&(R=[].indexOf.call(P.parentNode.childNodes,P),P=P.parentNode),E.tagName=="BR"&&(F=[].indexOf.call(E.parentNode.childNodes,E),E=E.parentNode);var X=document.createRange();X.setStart(P,R),X.setEnd(E,F),M.removeAllRanges(),M.addRange(X)}}else M.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(P){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w.default.sources.API;if(typeof R=="string"&&(E=R,R=!1),N.info("setRange",P),P!=null){var F=this.rangeToNative(P);this.setNativeRange.apply(this,x(F).concat([R]))}else this.setNativeRange(null);this.update(E)}},{key:"update",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w.default.sources.USER,R=this.lastRange,E=this.getRange(),F=a(E,2),O=F[0],M=F[1];if(this.lastRange=O,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(R,this.lastRange)){var Z;!this.composing&&M!=null&&M.native.collapsed&&M.start.node!==this.cursor.textNode&&this.cursor.restore();var X=[w.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(R),P];if((Z=this.emitter).emit.apply(Z,[w.default.events.EDITOR_CHANGE].concat(X)),P!==w.default.sources.SILENT){var z;(z=this.emitter).emit.apply(z,X)}}}}]),A}();function T(A,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),A.contains(I)}r.Range=S,r.default=C},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(y,b){for(var g=0;g<b.length;g++){var x=b[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}return function(y,b,g){return b&&w(y.prototype,b),g&&w(y,g),y}}(),o=function w(y,b,g){y===null&&(y=Function.prototype);var x=Object.getOwnPropertyDescriptor(y,b);if(x===void 0){var j=Object.getPrototypeOf(y);return j===null?void 0:w(j,b,g)}else{if("value"in x)return x.value;var N=x.get;return N===void 0?void 0:N.call(g)}},l=i(0),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function u(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function m(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var p=function(w){m(y,w);function y(){return f(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"insertInto",value:function(g,x){g.children.length===0?o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertInto",this).call(this,g,x):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),y}(d.default.Embed);p.blotName="break",p.tagName="BR",r.default=p},function(n,r,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var w in p)p.hasOwnProperty(w)&&(m[w]=p[w])};return function(m,p){u(m,p);function w(){this.constructor=m}m.prototype=p===null?Object.create(p):(w.prototype=p.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),l=i(30),d=i(1),h=function(u){a(m,u);function m(p){var w=u.call(this,p)||this;return w.build(),w}return m.prototype.appendChild=function(p){this.insertBefore(p)},m.prototype.attach=function(){u.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},m.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(w){try{var y=f(w);p.insertBefore(y,p.children.head||void 0)}catch(b){if(b instanceof d.ParchmentError)return;throw b}})},m.prototype.deleteAt=function(p,w){if(p===0&&w===this.length())return this.remove();this.children.forEachAt(p,w,function(y,b,g){y.deleteAt(b,g)})},m.prototype.descendant=function(p,w){var y=this.children.find(w),b=y[0],g=y[1];return p.blotName==null&&p(b)||p.blotName!=null&&b instanceof p?[b,g]:b instanceof m?b.descendant(p,g):[null,-1]},m.prototype.descendants=function(p,w,y){w===void 0&&(w=0),y===void 0&&(y=Number.MAX_VALUE);var b=[],g=y;return this.children.forEachAt(w,y,function(x,j,N){(p.blotName==null&&p(x)||p.blotName!=null&&x instanceof p)&&b.push(x),x instanceof m&&(b=b.concat(x.descendants(p,j,g))),g-=N}),b},m.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),u.prototype.detach.call(this)},m.prototype.formatAt=function(p,w,y,b){this.children.forEachAt(p,w,function(g,x,j){g.formatAt(x,j,y,b)})},m.prototype.insertAt=function(p,w,y){var b=this.children.find(p),g=b[0],x=b[1];if(g)g.insertAt(x,w,y);else{var j=y==null?d.create("text",w):d.create(w,y);this.appendChild(j)}},m.prototype.insertBefore=function(p,w){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(y){return p instanceof y}))throw new d.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,w)},m.prototype.length=function(){return this.children.reduce(function(p,w){return p+w.length()},0)},m.prototype.moveChildren=function(p,w){this.children.forEach(function(y){p.insertBefore(y,w)})},m.prototype.optimize=function(p){if(u.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var w=d.create(this.statics.defaultChild);this.appendChild(w),w.optimize(p)}else this.remove()},m.prototype.path=function(p,w){w===void 0&&(w=!1);var y=this.children.find(p,w),b=y[0],g=y[1],x=[[this,p]];return b instanceof m?x.concat(b.path(g,w)):(b!=null&&x.push([b,g]),x)},m.prototype.removeChild=function(p){this.children.remove(p)},m.prototype.replace=function(p){p instanceof m&&p.moveChildren(this),u.prototype.replace.call(this,p)},m.prototype.split=function(p,w){if(w===void 0&&(w=!1),!w){if(p===0)return this;if(p===this.length())return this.next}var y=this.clone();return this.parent.insertBefore(y,this.next),this.children.forEachAt(p,this.length(),function(b,g,x){b=b.split(g,w),y.appendChild(b)}),y},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(p,w){var y=this,b=[],g=[];p.forEach(function(x){x.target===y.domNode&&x.type==="childList"&&(b.push.apply(b,x.addedNodes),g.push.apply(g,x.removedNodes))}),g.forEach(function(x){if(!(x.parentNode!=null&&x.tagName!=="IFRAME"&&document.body.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var j=d.find(x);j!=null&&(j.domNode.parentNode==null||j.domNode.parentNode===y.domNode)&&j.detach()}}),b.filter(function(x){return x.parentNode==y.domNode}).sort(function(x,j){return x===j?0:x.compareDocumentPosition(j)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(x){var j=null;x.nextSibling!=null&&(j=d.find(x.nextSibling));var N=f(x);(N.next!=j||N.next==null)&&(N.parent!=null&&N.parent.removeChild(y),y.insertBefore(N,j||void 0))})},m}(l.default);function f(u){var m=d.find(u);if(m==null)try{m=d.create(u)}catch{m=d.create(d.Scope.INLINE),[].slice.call(u.childNodes).forEach(function(w){m.domNode.appendChild(w)}),u.parentNode&&u.parentNode.replaceChild(m.domNode,u),m.attach()}return m}r.default=h},function(n,r,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var w in p)p.hasOwnProperty(w)&&(m[w]=p[w])};return function(m,p){u(m,p);function w(){this.constructor=m}m.prototype=p===null?Object.create(p):(w.prototype=p.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),l=i(31),d=i(17),h=i(1),f=function(u){a(m,u);function m(p){var w=u.call(this,p)||this;return w.attributes=new l.default(w.domNode),w}return m.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},m.prototype.format=function(p,w){var y=h.query(p);y instanceof o.default?this.attributes.attribute(y,w):w&&y!=null&&(p!==this.statics.blotName||this.formats()[p]!==w)&&this.replaceWith(p,w)},m.prototype.formats=function(){var p=this.attributes.values(),w=this.statics.formats(this.domNode);return w!=null&&(p[this.statics.blotName]=w),p},m.prototype.replaceWith=function(p,w){var y=u.prototype.replaceWith.call(this,p,w);return this.attributes.copy(y),y},m.prototype.update=function(p,w){var y=this;u.prototype.update.call(this,p,w),p.some(function(b){return b.target===y.domNode&&b.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(p,w){var y=u.prototype.wrap.call(this,p,w);return y instanceof m&&y.statics.scope===this.statics.scope&&this.attributes.move(y),y},m}(d.default);r.default=f},function(n,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var m in u)u.hasOwnProperty(m)&&(f[m]=u[m])};return function(f,u){h(f,u);function m(){this.constructor=f}f.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),l=i(1),d=function(h){a(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.value=function(u){return!0},f.prototype.index=function(u,m){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},f.prototype.position=function(u,m){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return u>0&&(p+=1),[this.parent.domNode,p]},f.prototype.value=function(){var u;return u={},u[this.statics.blotName]=this.statics.value(this.domNode)||!0,u},f.scope=l.Scope.INLINE_BLOT,f}(o.default);r.default=d},function(n,r,i){var a=i(11),o=i(3),l={attributes:{compose:function(h,f,u){typeof h!="object"&&(h={}),typeof f!="object"&&(f={});var m=o(!0,{},f);u||(m=Object.keys(m).reduce(function(w,y){return m[y]!=null&&(w[y]=m[y]),w},{}));for(var p in h)h[p]!==void 0&&f[p]===void 0&&(m[p]=h[p]);return Object.keys(m).length>0?m:void 0},diff:function(h,f){typeof h!="object"&&(h={}),typeof f!="object"&&(f={});var u=Object.keys(h).concat(Object.keys(f)).reduce(function(m,p){return a(h[p],f[p])||(m[p]=f[p]===void 0?null:f[p]),m},{});return Object.keys(u).length>0?u:void 0},transform:function(h,f,u){if(typeof h!="object")return f;if(typeof f=="object"){if(!u)return f;var m=Object.keys(f).reduce(function(p,w){return h[w]===void 0&&(p[w]=f[w]),p},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(h){return new d(h)},length:function(h){return typeof h.delete=="number"?h.delete:typeof h.retain=="number"?h.retain:typeof h.insert=="string"?h.insert.length:1}};function d(h){this.ops=h,this.index=0,this.offset=0}d.prototype.hasNext=function(){return this.peekLength()<1/0},d.prototype.next=function(h){h||(h=1/0);var f=this.ops[this.index];if(f){var u=this.offset,m=l.length(f);if(h>=m-u?(h=m-u,this.index+=1,this.offset=0):this.offset+=h,typeof f.delete=="number")return{delete:h};var p={};return f.attributes&&(p.attributes=f.attributes),typeof f.retain=="number"?p.retain=h:typeof f.insert=="string"?p.insert=f.insert.substr(u,h):p.insert=f.insert,p}else return{retain:1/0}},d.prototype.peek=function(){return this.ops[this.index]},d.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},d.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},d.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var h=this.offset,f=this.index,u=this.next(),m=this.ops.slice(this.index);return this.offset=h,this.index=f,[u].concat(m)}else return[]},n.exports=l},function(n,r){var i=function(){function a(y,b){return b!=null&&y instanceof b}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var d;try{d=Promise}catch{d=function(){}}function h(y,b,g,x,j){typeof b=="object"&&(g=b.depth,x=b.prototype,j=b.includeNonEnumerable,b=b.circular);var N=[],S=[],C=typeof Buffer<"u";typeof b>"u"&&(b=!0),typeof g>"u"&&(g=1/0);function T(A,I){if(A===null)return null;if(I===0)return A;var P,R;if(typeof A!="object")return A;if(a(A,o))P=new o;else if(a(A,l))P=new l;else if(a(A,d))P=new d(function(B,V){A.then(function(H){B(T(H,I-1))},function(H){V(T(H,I-1))})});else if(h.__isArray(A))P=[];else if(h.__isRegExp(A))P=new RegExp(A.source,w(A)),A.lastIndex&&(P.lastIndex=A.lastIndex);else if(h.__isDate(A))P=new Date(A.getTime());else{if(C&&Buffer.isBuffer(A))return Buffer.allocUnsafe?P=Buffer.allocUnsafe(A.length):P=new Buffer(A.length),A.copy(P),P;a(A,Error)?P=Object.create(A):typeof x>"u"?(R=Object.getPrototypeOf(A),P=Object.create(R)):(P=Object.create(x),R=x)}if(b){var E=N.indexOf(A);if(E!=-1)return S[E];N.push(A),S.push(P)}a(A,o)&&A.forEach(function(B,V){var H=T(V,I-1),q=T(B,I-1);P.set(H,q)}),a(A,l)&&A.forEach(function(B){var V=T(B,I-1);P.add(V)});for(var F in A){var O;R&&(O=Object.getOwnPropertyDescriptor(R,F)),!(O&&O.set==null)&&(P[F]=T(A[F],I-1))}if(Object.getOwnPropertySymbols)for(var M=Object.getOwnPropertySymbols(A),F=0;F<M.length;F++){var Z=M[F],X=Object.getOwnPropertyDescriptor(A,Z);X&&!X.enumerable&&!j||(P[Z]=T(A[Z],I-1),X.enumerable||Object.defineProperty(P,Z,{enumerable:!1}))}if(j)for(var z=Object.getOwnPropertyNames(A),F=0;F<z.length;F++){var D=z[F],X=Object.getOwnPropertyDescriptor(A,D);X&&X.enumerable||(P[D]=T(A[D],I-1),Object.defineProperty(P,D,{enumerable:!1}))}return P}return T(y,g)}h.clonePrototype=function(b){if(b===null)return null;var g=function(){};return g.prototype=b,new g};function f(y){return Object.prototype.toString.call(y)}h.__objToStr=f;function u(y){return typeof y=="object"&&f(y)==="[object Date]"}h.__isDate=u;function m(y){return typeof y=="object"&&f(y)==="[object Array]"}h.__isArray=m;function p(y){return typeof y=="object"&&f(y)==="[object RegExp]"}h.__isRegExp=p;function w(y){var b="";return y.global&&(b+="g"),y.ignoreCase&&(b+="i"),y.multiline&&(b+="m"),b}return h.__getRegExpFlags=w,h}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function P(R,E){var F=[],O=!0,M=!1,Z=void 0;try{for(var X=R[Symbol.iterator](),z;!(O=(z=X.next()).done)&&(F.push(z.value),!(E&&F.length===E));O=!0);}catch(D){M=!0,Z=D}finally{try{!O&&X.return&&X.return()}finally{if(M)throw Z}}return F}return function(R,E){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return P(R,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function P(R,E){for(var F=0;F<E.length;F++){var O=E[F];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,O.key,O)}}return function(R,E,F){return E&&P(R.prototype,E),F&&P(R,F),R}}(),l=function P(R,E,F){R===null&&(R=Function.prototype);var O=Object.getOwnPropertyDescriptor(R,E);if(O===void 0){var M=Object.getPrototypeOf(R);return M===null?void 0:P(M,E,F)}else{if("value"in O)return O.value;var Z=O.get;return Z===void 0?void 0:Z.call(F)}},d=i(0),h=N(d),f=i(8),u=N(f),m=i(4),p=N(m),w=i(16),y=N(w),b=i(13),g=N(b),x=i(25),j=N(x);function N(P){return P&&P.__esModule?P:{default:P}}function S(P,R){if(!(P instanceof R))throw new TypeError("Cannot call a class as a function")}function C(P,R){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:P}function T(P,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);P.prototype=Object.create(R&&R.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(P,R):P.__proto__=R)}function A(P){return P instanceof p.default||P instanceof m.BlockEmbed}var I=function(P){T(R,P);function R(E,F){S(this,R);var O=C(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,E));return O.emitter=F.emitter,Array.isArray(F.whitelist)&&(O.whitelist=F.whitelist.reduce(function(M,Z){return M[Z]=!0,M},{})),O.domNode.addEventListener("DOMNodeInserted",function(){}),O.optimize(),O.enable(),O}return o(R,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(F,O){var M=this.line(F),Z=a(M,2),X=Z[0],z=Z[1],D=this.line(F+O),B=a(D,1),V=B[0];if(l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,F,O),V!=null&&X!==V&&z>0){if(X instanceof m.BlockEmbed||V instanceof m.BlockEmbed){this.optimize();return}if(X instanceof g.default){var H=X.newlineIndex(X.length(),!0);if(H>-1&&(X=X.split(H+1),X===V)){this.optimize();return}}else if(V instanceof g.default){var q=V.newlineIndex(0);q>-1&&V.split(q+1)}var W=V.children.head instanceof y.default?null:V.children.head;X.moveChildren(V,W),X.remove()}this.optimize()}},{key:"enable",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",F)}},{key:"formatAt",value:function(F,O,M,Z){this.whitelist!=null&&!this.whitelist[M]||(l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,F,O,M,Z),this.optimize())}},{key:"insertAt",value:function(F,O,M){if(!(M!=null&&this.whitelist!=null&&!this.whitelist[O])){if(F>=this.length())if(M==null||h.default.query(O,h.default.Scope.BLOCK)==null){var Z=h.default.create(this.statics.defaultChild);this.appendChild(Z),M==null&&O.endsWith(`
`)&&(O=O.slice(0,-1)),Z.insertAt(0,O,M)}else{var X=h.default.create(O,M);this.appendChild(X)}else l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,F,O,M);this.optimize()}}},{key:"insertBefore",value:function(F,O){if(F.statics.scope===h.default.Scope.INLINE_BLOT){var M=h.default.create(this.statics.defaultChild);M.appendChild(F),F=M}l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,F,O)}},{key:"leaf",value:function(F){return this.path(F).pop()||[null,-1]}},{key:"line",value:function(F){return F===this.length()?this.line(F-1):this.descendant(A,F)}},{key:"lines",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,M=function Z(X,z,D){var B=[],V=D;return X.children.forEachAt(z,D,function(H,q,W){A(H)?B.push(H):H instanceof h.default.Container&&(B=B.concat(Z(H,q,V))),V-=W}),B};return M(this,F,O)}},{key:"optimize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,F,O),F.length>0&&this.emitter.emit(u.default.events.SCROLL_OPTIMIZE,F,O))}},{key:"path",value:function(F){return l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,F).slice(1)}},{key:"update",value:function(F){if(this.batch!==!0){var O=u.default.sources.USER;typeof F=="string"&&(O=F),Array.isArray(F)||(F=this.observer.takeRecords()),F.length>0&&this.emitter.emit(u.default.events.SCROLL_BEFORE_UPDATE,O,F),l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"update",this).call(this,F.concat([])),F.length>0&&this.emitter.emit(u.default.events.SCROLL_UPDATE,O,F)}}}]),R}(h.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[p.default,m.BlockEmbed,j.default],r.default=I},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(G,ne){var J=[],ie=!0,xe=!1,Se=void 0;try{for(var ue=G[Symbol.iterator](),he;!(ie=(he=ue.next()).done)&&(J.push(he.value),!(ne&&J.length===ne));ie=!0);}catch(Q){xe=!0,Se=Q}finally{try{!ie&&ue.return&&ue.return()}finally{if(xe)throw Se}}return J}return function(G,ne){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return U(G,ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function U(G,ne){for(var J=0;J<ne.length;J++){var ie=ne[J];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(G,ie.key,ie)}}return function(G,ne,J){return ne&&U(G.prototype,ne),J&&U(G,J),G}}(),d=i(21),h=P(d),f=i(11),u=P(f),m=i(3),p=P(m),w=i(2),y=P(w),b=i(20),g=P(b),x=i(0),j=P(x),N=i(5),S=P(N),C=i(10),T=P(C),A=i(9),I=P(A);function P(U){return U&&U.__esModule?U:{default:U}}function R(U,G,ne){return G in U?Object.defineProperty(U,G,{value:ne,enumerable:!0,configurable:!0,writable:!0}):U[G]=ne,U}function E(U,G){if(!(U instanceof G))throw new TypeError("Cannot call a class as a function")}function F(U,G){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:U}function O(U,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);U.prototype=Object.create(G&&G.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(U,G):U.__proto__=G)}var M=(0,T.default)("quill:keyboard"),Z=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",X=function(U){O(G,U),l(G,null,[{key:"match",value:function(J,ie){return ie=Y(ie),["altKey","ctrlKey","metaKey","shiftKey"].some(function(xe){return!!ie[xe]!==J[xe]&&ie[xe]!==null})?!1:ie.key===(J.which||J.keyCode)}}]);function G(ne,J){E(this,G);var ie=F(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,ne,J));return ie.bindings={},Object.keys(ie.options.bindings).forEach(function(xe){xe==="list autofill"&&ne.scroll.whitelist!=null&&!ne.scroll.whitelist.list||ie.options.bindings[xe]&&ie.addBinding(ie.options.bindings[xe])}),ie.addBinding({key:G.keys.ENTER,shiftKey:null},H),ie.addBinding({key:G.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ie.addBinding({key:G.keys.BACKSPACE},{collapsed:!0},D),ie.addBinding({key:G.keys.DELETE},{collapsed:!0},B)):(ie.addBinding({key:G.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},D),ie.addBinding({key:G.keys.DELETE},{collapsed:!0,suffix:/^.?$/},B)),ie.addBinding({key:G.keys.BACKSPACE},{collapsed:!1},V),ie.addBinding({key:G.keys.DELETE},{collapsed:!1},V),ie.addBinding({key:G.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},D),ie.listen(),ie}return l(G,[{key:"addBinding",value:function(J){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Se=Y(J);if(Se==null||Se.key==null)return M.warn("Attempted to add invalid keyboard binding",Se);typeof ie=="function"&&(ie={handler:ie}),typeof xe=="function"&&(xe={handler:xe}),Se=(0,p.default)(Se,ie,xe),this.bindings[Se.key]=this.bindings[Se.key]||[],this.bindings[Se.key].push(Se)}},{key:"listen",value:function(){var J=this;this.quill.root.addEventListener("keydown",function(ie){if(!ie.defaultPrevented){var xe=ie.which||ie.keyCode,Se=(J.bindings[xe]||[]).filter(function(Ee){return G.match(ie,Ee)});if(Se.length!==0){var ue=J.quill.getSelection();if(!(ue==null||!J.quill.hasFocus())){var he=J.quill.getLine(ue.index),Q=o(he,2),ye=Q[0],be=Q[1],ce=J.quill.getLeaf(ue.index),ge=o(ce,2),ee=ge[0],ae=ge[1],oe=ue.length===0?[ee,ae]:J.quill.getLeaf(ue.index+ue.length),ke=o(oe,2),de=ke[0],pe=ke[1],Pe=ee instanceof j.default.Text?ee.value().slice(0,ae):"",me=de instanceof j.default.Text?de.value().slice(pe):"",we={collapsed:ue.length===0,empty:ue.length===0&&ye.length()<=1,format:J.quill.getFormat(ue),offset:be,prefix:Pe,suffix:me},Re=Se.some(function(Ee){if(Ee.collapsed!=null&&Ee.collapsed!==we.collapsed||Ee.empty!=null&&Ee.empty!==we.empty||Ee.offset!=null&&Ee.offset!==we.offset)return!1;if(Array.isArray(Ee.format)){if(Ee.format.every(function(qe){return we.format[qe]==null}))return!1}else if(a(Ee.format)==="object"&&!Object.keys(Ee.format).every(function(qe){return Ee.format[qe]===!0?we.format[qe]!=null:Ee.format[qe]===!1?we.format[qe]==null:(0,u.default)(Ee.format[qe],we.format[qe])}))return!1;return Ee.prefix!=null&&!Ee.prefix.test(we.prefix)||Ee.suffix!=null&&!Ee.suffix.test(we.suffix)?!1:Ee.handler.call(J,ue,we)!==!0});Re&&ie.preventDefault()}}}})}}]),G}(I.default);X.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},X.DEFAULTS={bindings:{bold:W("bold"),italic:W("italic"),underline:W("underline"),indent:{key:X.keys.TAB,format:["blockquote","indent","list"],handler:function(G,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:X.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(G,ne){if(ne.collapsed&&ne.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:X.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(G,ne){ne.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):ne.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":q(!0),"outdent code-block":q(!1),"remove tab":{key:X.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(G){this.quill.deleteText(G.index-1,1,S.default.sources.USER)}},tab:{key:X.keys.TAB,handler:function(G){this.quill.history.cutoff();var ne=new y.default().retain(G.index).delete(G.length).insert("	");this.quill.updateContents(ne,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(G.index+1,S.default.sources.SILENT)}},"list empty enter":{key:X.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(G,ne){this.quill.format("list",!1,S.default.sources.USER),ne.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:X.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(G){var ne=this.quill.getLine(G.index),J=o(ne,2),ie=J[0],xe=J[1],Se=(0,p.default)({},ie.formats(),{list:"checked"}),ue=new y.default().retain(G.index).insert(`
`,Se).retain(ie.length()-xe-1).retain(1,{list:"unchecked"});this.quill.updateContents(ue,S.default.sources.USER),this.quill.setSelection(G.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:X.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(G,ne){var J=this.quill.getLine(G.index),ie=o(J,2),xe=ie[0],Se=ie[1],ue=new y.default().retain(G.index).insert(`
`,ne.format).retain(xe.length()-Se-1).retain(1,{header:null});this.quill.updateContents(ue,S.default.sources.USER),this.quill.setSelection(G.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(G,ne){var J=ne.prefix.length,ie=this.quill.getLine(G.index),xe=o(ie,2),Se=xe[0],ue=xe[1];if(ue>J)return!0;var he=void 0;switch(ne.prefix.trim()){case"[]":case"[ ]":he="unchecked";break;case"[x]":he="checked";break;case"-":case"*":he="bullet";break;default:he="ordered"}this.quill.insertText(G.index," ",S.default.sources.USER),this.quill.history.cutoff();var Q=new y.default().retain(G.index-ue).delete(J+1).retain(Se.length()-2-ue).retain(1,{list:he});this.quill.updateContents(Q,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(G.index-J,S.default.sources.SILENT)}},"code exit":{key:X.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(G){var ne=this.quill.getLine(G.index),J=o(ne,2),ie=J[0],xe=J[1],Se=new y.default().retain(G.index+ie.length()-xe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Se,S.default.sources.USER)}},"embed left":z(X.keys.LEFT,!1),"embed left shift":z(X.keys.LEFT,!0),"embed right":z(X.keys.RIGHT,!1),"embed right shift":z(X.keys.RIGHT,!0)}};function z(U,G){var ne,J=U===X.keys.LEFT?"prefix":"suffix";return ne={key:U,shiftKey:G,altKey:null},R(ne,J,/^$/),R(ne,"handler",function(xe){var Se=xe.index;U===X.keys.RIGHT&&(Se+=xe.length+1);var ue=this.quill.getLeaf(Se),he=o(ue,1),Q=he[0];return Q instanceof j.default.Embed?(U===X.keys.LEFT?G?this.quill.setSelection(xe.index-1,xe.length+1,S.default.sources.USER):this.quill.setSelection(xe.index-1,S.default.sources.USER):G?this.quill.setSelection(xe.index,xe.length+1,S.default.sources.USER):this.quill.setSelection(xe.index+xe.length+1,S.default.sources.USER),!1):!0}),ne}function D(U,G){if(!(U.index===0||this.quill.getLength()<=1)){var ne=this.quill.getLine(U.index),J=o(ne,1),ie=J[0],xe={};if(G.offset===0){var Se=this.quill.getLine(U.index-1),ue=o(Se,1),he=ue[0];if(he!=null&&he.length()>1){var Q=ie.formats(),ye=this.quill.getFormat(U.index-1,1);xe=g.default.attributes.diff(Q,ye)||{}}}var be=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(G.prefix)?2:1;this.quill.deleteText(U.index-be,be,S.default.sources.USER),Object.keys(xe).length>0&&this.quill.formatLine(U.index-be,be,xe,S.default.sources.USER),this.quill.focus()}}function B(U,G){var ne=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(G.suffix)?2:1;if(!(U.index>=this.quill.getLength()-ne)){var J={},ie=0,xe=this.quill.getLine(U.index),Se=o(xe,1),ue=Se[0];if(G.offset>=ue.length()-1){var he=this.quill.getLine(U.index+1),Q=o(he,1),ye=Q[0];if(ye){var be=ue.formats(),ce=this.quill.getFormat(U.index,1);J=g.default.attributes.diff(be,ce)||{},ie=ye.length()}}this.quill.deleteText(U.index,ne,S.default.sources.USER),Object.keys(J).length>0&&this.quill.formatLine(U.index+ie-1,ne,J,S.default.sources.USER)}}function V(U){var G=this.quill.getLines(U),ne={};if(G.length>1){var J=G[0].formats(),ie=G[G.length-1].formats();ne=g.default.attributes.diff(ie,J)||{}}this.quill.deleteText(U,S.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(U.index,1,ne,S.default.sources.USER),this.quill.setSelection(U.index,S.default.sources.SILENT),this.quill.focus()}function H(U,G){var ne=this;U.length>0&&this.quill.scroll.deleteAt(U.index,U.length);var J=Object.keys(G.format).reduce(function(ie,xe){return j.default.query(xe,j.default.Scope.BLOCK)&&!Array.isArray(G.format[xe])&&(ie[xe]=G.format[xe]),ie},{});this.quill.insertText(U.index,`
`,J,S.default.sources.USER),this.quill.setSelection(U.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(G.format).forEach(function(ie){J[ie]==null&&(Array.isArray(G.format[ie])||ie!=="link"&&ne.quill.format(ie,G.format[ie],S.default.sources.USER))})}function q(U){return{key:X.keys.TAB,shiftKey:!U,format:{"code-block":!0},handler:function(ne){var J=j.default.query("code-block"),ie=ne.index,xe=ne.length,Se=this.quill.scroll.descendant(J,ie),ue=o(Se,2),he=ue[0],Q=ue[1];if(he!=null){var ye=this.quill.getIndex(he),be=he.newlineIndex(Q,!0)+1,ce=he.newlineIndex(ye+Q+xe),ge=he.domNode.textContent.slice(be,ce).split(`
`);Q=0,ge.forEach(function(ee,ae){U?(he.insertAt(be+Q,J.TAB),Q+=J.TAB.length,ae===0?ie+=J.TAB.length:xe+=J.TAB.length):ee.startsWith(J.TAB)&&(he.deleteAt(be+Q,J.TAB.length),Q-=J.TAB.length,ae===0?ie-=J.TAB.length:xe-=J.TAB.length),Q+=ee.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(ie,xe,S.default.sources.SILENT)}}}}function W(U){return{key:U[0].toUpperCase(),shortKey:!0,handler:function(ne,J){this.quill.format(U,!J.format[U],S.default.sources.USER)}}}function Y(U){if(typeof U=="string"||typeof U=="number")return Y({key:U});if((typeof U>"u"?"undefined":a(U))==="object"&&(U=(0,h.default)(U,!1)),typeof U.key=="string")if(X.keys[U.key.toUpperCase()]!=null)U.key=X.keys[U.key.toUpperCase()];else if(U.key.length===1)U.key=U.key.toUpperCase().charCodeAt(0);else return null;return U.shortKey&&(U[Z]=U.shortKey,delete U.shortKey),U}r.default=X,r.SHORTKEY=Z},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function g(x,j){var N=[],S=!0,C=!1,T=void 0;try{for(var A=x[Symbol.iterator](),I;!(S=(I=A.next()).done)&&(N.push(I.value),!(j&&N.length===j));S=!0);}catch(P){C=!0,T=P}finally{try{!S&&A.return&&A.return()}finally{if(C)throw T}}return N}return function(x,j){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return g(x,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function g(x,j,N){x===null&&(x=Function.prototype);var S=Object.getOwnPropertyDescriptor(x,j);if(S===void 0){var C=Object.getPrototypeOf(x);return C===null?void 0:g(C,j,N)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(N)}},l=function(){function g(x,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(x,S.key,S)}}return function(x,j,N){return j&&g(x.prototype,j),N&&g(x,N),x}}(),d=i(0),h=m(d),f=i(7),u=m(f);function m(g){return g&&g.__esModule?g:{default:g}}function p(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function w(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function y(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var b=function(g){y(x,g),l(x,null,[{key:"value",value:function(){}}]);function x(j,N){p(this,x);var S=w(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,j));return S.selection=N,S.textNode=document.createTextNode(x.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return l(x,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,S){if(this._length!==0)return o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,N,S);for(var C=this,T=0;C!=null&&C.statics.scope!==h.default.Scope.BLOCK_BLOT;)T+=C.offset(C.parent),C=C.parent;C!=null&&(this._length=x.CONTENTS.length,C.optimize(),C.formatAt(T,x.CONTENTS.length,N,S),this._length=0)}},{key:"index",value:function(N,S){return N===this.textNode?0:o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,N,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,S=this.selection.getNativeRange(),C=void 0,T=void 0,A=void 0;if(S!=null&&S.start.node===N&&S.end.node===N){var I=[N,S.start.offset,S.end.offset];C=I[0],T=I[1],A=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==x.CONTENTS){var P=this.textNode.data.split(x.CONTENTS).join("");this.next instanceof u.default?(C=this.next.domNode,this.next.insertAt(0,P),this.textNode.data=x.CONTENTS):(this.textNode.data=P,this.parent.insertBefore(h.default.create(this.textNode),this),this.textNode=document.createTextNode(x.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),T!=null){var R=[T,A].map(function(F){return Math.max(0,Math.min(C.data.length,F-1))}),E=a(R,2);return T=E[0],A=E[1],{startNode:C,startOffset:T,endNode:C,endOffset:A}}}}},{key:"update",value:function(N,S){var C=this;if(N.some(function(A){return A.type==="characterData"&&A.target===C.textNode})){var T=this.restore();T&&(S.range=T)}}},{key:"value",value:function(){return""}}]),x}(h.default.Embed);b.blotName="cursor",b.className="ql-cursor",b.tagName="span",b.CONTENTS="\uFEFF",r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=h(a),l=i(4),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function u(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function m(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var p=function(w){m(y,w);function y(){return f(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return y}(o.default.Container);p.allowedChildren=[d.default,l.BlockEmbed,p],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var a=function(){function b(g,x){for(var j=0;j<x.length;j++){var N=x[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}return function(g,x,j){return x&&b(g.prototype,x),j&&b(g,j),g}}(),o=function b(g,x,j){g===null&&(g=Function.prototype);var N=Object.getOwnPropertyDescriptor(g,x);if(N===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:b(S,x,j)}else{if("value"in N)return N.value;var C=N.get;return C===void 0?void 0:C.call(j)}},l=i(0),d=h(l);function h(b){return b&&b.__esModule?b:{default:b}}function f(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function u(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function m(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var p=function(b){m(g,b);function g(){return f(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"value",value:function(j){var N=o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,j);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):N}}]),g}(d.default.Attributor.Style),w=new d.default.Attributor.Class("color","ql-color",{scope:d.default.Scope.INLINE}),y=new p("color","color",{scope:d.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=w,r.ColorStyle=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var a=function(){function y(b,g){for(var x=0;x<g.length;x++){var j=g[x];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,g,x){return g&&y(b.prototype,g),x&&y(b,x),b}}(),o=function y(b,g,x){b===null&&(b=Function.prototype);var j=Object.getOwnPropertyDescriptor(b,g);if(j===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:y(N,g,x)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(x)}},l=i(6),d=h(l);function h(y){return y&&y.__esModule?y:{default:y}}function f(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function u(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function m(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var p=function(y){m(b,y);function b(){return f(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"format",value:function(x,j){if(x!==this.statics.blotName||!j)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,x,j);j=this.constructor.sanitize(j),this.domNode.setAttribute("href",j)}}],[{key:"create",value:function(x){var j=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,x);return x=this.sanitize(x),j.setAttribute("href",x),j.setAttribute("rel","noopener noreferrer"),j.setAttribute("target","_blank"),j}},{key:"formats",value:function(x){return x.getAttribute("href")}},{key:"sanitize",value:function(x){return w(x,this.PROTOCOL_WHITELIST)?x:this.SANITIZED_URL}}]),b}(d.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function w(y,b){var g=document.createElement("a");g.href=y;var x=g.href.slice(0,g.href.indexOf(":"));return b.indexOf(x)>-1}r.default=p,r.sanitize=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},o=function(){function b(g,x){for(var j=0;j<x.length;j++){var N=x[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}return function(g,x,j){return x&&b(g.prototype,x),j&&b(g,j),g}}(),l=i(23),d=u(l),h=i(107),f=u(h);function u(b){return b&&b.__esModule?b:{default:b}}function m(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}var p=0;function w(b,g){b.setAttribute(g,b.getAttribute(g)!=="true")}var y=function(){function b(g){var x=this;m(this,b),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){x.togglePicker()}),this.label.addEventListener("keydown",function(j){switch(j.keyCode){case d.default.keys.ENTER:x.togglePicker();break;case d.default.keys.ESCAPE:x.escape(),j.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(b,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),w(this.label,"aria-expanded"),w(this.options,"aria-hidden")}},{key:"buildItem",value:function(x){var j=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),x.hasAttribute("value")&&N.setAttribute("data-value",x.getAttribute("value")),x.textContent&&N.setAttribute("data-label",x.textContent),N.addEventListener("click",function(){j.selectItem(N,!0)}),N.addEventListener("keydown",function(S){switch(S.keyCode){case d.default.keys.ENTER:j.selectItem(N,!0),S.preventDefault();break;case d.default.keys.ESCAPE:j.escape(),S.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var x=document.createElement("span");return x.classList.add("ql-picker-label"),x.innerHTML=f.default,x.tabIndex="0",x.setAttribute("role","button"),x.setAttribute("aria-expanded","false"),this.container.appendChild(x),x}},{key:"buildOptions",value:function(){var x=this,j=document.createElement("span");j.classList.add("ql-picker-options"),j.setAttribute("aria-hidden","true"),j.tabIndex="-1",j.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",j.id),this.options=j,[].slice.call(this.select.options).forEach(function(N){var S=x.buildItem(N);j.appendChild(S),N.selected===!0&&x.selectItem(S)}),this.container.appendChild(j)}},{key:"buildPicker",value:function(){var x=this;[].slice.call(this.select.attributes).forEach(function(j){x.container.setAttribute(j.name,j.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var x=this;this.close(),setTimeout(function(){return x.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(x){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(x!==N&&(N!=null&&N.classList.remove("ql-selected"),x!=null&&(x.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(x.parentNode.children,x),x.hasAttribute("data-value")?this.label.setAttribute("data-value",x.getAttribute("data-value")):this.label.removeAttribute("data-value"),x.hasAttribute("data-label")?this.label.setAttribute("data-label",x.getAttribute("data-label")):this.label.removeAttribute("data-label"),j))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":a(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var x=void 0;if(this.select.selectedIndex>-1){var j=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];x=this.select.options[this.select.selectedIndex],this.selectItem(j)}else this.selectItem(null);var N=x!=null&&x!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),b}();r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=M(a),l=i(5),d=M(l),h=i(4),f=M(h),u=i(16),m=M(u),p=i(25),w=M(p),y=i(24),b=M(y),g=i(35),x=M(g),j=i(6),N=M(j),S=i(22),C=M(S),T=i(7),A=M(T),I=i(55),P=M(I),R=i(42),E=M(R),F=i(23),O=M(F);function M(Z){return Z&&Z.__esModule?Z:{default:Z}}d.default.register({"blots/block":f.default,"blots/block/embed":h.BlockEmbed,"blots/break":m.default,"blots/container":w.default,"blots/cursor":b.default,"blots/embed":x.default,"blots/inline":N.default,"blots/scroll":C.default,"blots/text":A.default,"modules/clipboard":P.default,"modules/history":E.default,"modules/keyboard":O.default}),o.default.register(f.default,m.default,b.default,N.default,C.default,A.default),r.default=d.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=function(){function l(d){this.domNode=d,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(d){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var h;return Array.isArray(this.tagName)?(typeof d=="string"&&(d=d.toUpperCase(),parseInt(d).toString()===d&&(d=parseInt(d))),typeof d=="number"?h=document.createElement(this.tagName[d-1]):this.tagName.indexOf(d)>-1?h=document.createElement(d):h=document.createElement(this.tagName[0])):h=document.createElement(this.tagName),this.className&&h.classList.add(this.className),h},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var d=this.domNode.cloneNode(!1);return a.create(d)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},l.prototype.deleteAt=function(d,h){var f=this.isolate(d,h);f.remove()},l.prototype.formatAt=function(d,h,f,u){var m=this.isolate(d,h);if(a.query(f,a.Scope.BLOT)!=null&&u)m.wrap(f,u);else if(a.query(f,a.Scope.ATTRIBUTE)!=null){var p=a.create(this.statics.scope);m.wrap(p),p.format(f,u)}},l.prototype.insertAt=function(d,h,f){var u=f==null?a.create("text",h):a.create(h,f),m=this.split(d);this.parent.insertBefore(u,m)},l.prototype.insertInto=function(d,h){h===void 0&&(h=null),this.parent!=null&&this.parent.children.remove(this);var f=null;d.children.insertBefore(this,h),h!=null&&(f=h.domNode),(this.domNode.parentNode!=d.domNode||this.domNode.nextSibling!=f)&&d.domNode.insertBefore(this.domNode,f),this.parent=d,this.attach()},l.prototype.isolate=function(d,h){var f=this.split(d);return f.split(h),f},l.prototype.length=function(){return 1},l.prototype.offset=function(d){return d===void 0&&(d=this.parent),this.parent==null||this==d?0:this.parent.children.offset(this)+this.parent.offset(d)},l.prototype.optimize=function(d){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(d){d.parent!=null&&(d.parent.insertBefore(this,d.next),d.remove())},l.prototype.replaceWith=function(d,h){var f=typeof d=="string"?a.create(d,h):d;return f.replace(this),f},l.prototype.split=function(d,h){return d===0?this:this.next},l.prototype.update=function(d,h){},l.prototype.wrap=function(d,h){var f=typeof d=="string"?a.create(d,h):d;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},l.blotName="abstract",l}();r.default=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(12),o=i(32),l=i(33),d=i(1),h=function(){function f(u){this.attributes={},this.domNode=u,this.build()}return f.prototype.attribute=function(u,m){m?u.add(this.domNode,m)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])},f.prototype.build=function(){var u=this;this.attributes={};var m=a.default.keys(this.domNode),p=o.default.keys(this.domNode),w=l.default.keys(this.domNode);m.concat(p).concat(w).forEach(function(y){var b=d.query(y,d.Scope.ATTRIBUTE);b instanceof a.default&&(u.attributes[b.attrName]=b)})},f.prototype.copy=function(u){var m=this;Object.keys(this.attributes).forEach(function(p){var w=m.attributes[p].value(m.domNode);u.format(p,w)})},f.prototype.move=function(u){var m=this;this.copy(u),Object.keys(this.attributes).forEach(function(p){m.attributes[p].remove(m.domNode)}),this.attributes={}},f.prototype.values=function(){var u=this;return Object.keys(this.attributes).reduce(function(m,p){return m[p]=u.attributes[p].value(u.domNode),m},{})},f}();r.default=h},function(n,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var m in u)u.hasOwnProperty(m)&&(f[m]=u[m])};return function(f,u){h(f,u);function m(){this.constructor=f}f.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function l(h,f){var u=h.getAttribute("class")||"";return u.split(/\s+/).filter(function(m){return m.indexOf(f+"-")===0})}var d=function(h){a(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.keys=function(u){return(u.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},f.prototype.add=function(u,m){return this.canAdd(u,m)?(this.remove(u),u.classList.add(this.keyName+"-"+m),!0):!1},f.prototype.remove=function(u){var m=l(u,this.keyName);m.forEach(function(p){u.classList.remove(p)}),u.classList.length===0&&u.removeAttribute("class")},f.prototype.value=function(u){var m=l(u,this.keyName)[0]||"",p=m.slice(this.keyName.length+1);return this.canAdd(u,p)?p:""},f}(o.default);r.default=d},function(n,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var m in u)u.hasOwnProperty(m)&&(f[m]=u[m])};return function(f,u){h(f,u);function m(){this.constructor=f}f.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function l(h){var f=h.split("-"),u=f.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return f[0]+u}var d=function(h){a(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.keys=function(u){return(u.getAttribute("style")||"").split(";").map(function(m){var p=m.split(":");return p[0].trim()})},f.prototype.add=function(u,m){return this.canAdd(u,m)?(u.style[l(this.keyName)]=m,!0):!1},f.prototype.remove=function(u){u.style[l(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")},f.prototype.value=function(u){var m=u.style[l(this.keyName)];return this.canAdd(u,m)?m:""},f}(o.default);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function d(h,f){for(var u=0;u<f.length;u++){var m=f[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(h,m.key,m)}}return function(h,f,u){return f&&d(h.prototype,f),u&&d(h,u),h}}();function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function(){function d(h,f){o(this,d),this.quill=h,this.options=f,this.modules={}}return a(d,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(u){f.modules[u]==null&&f.addModule(u)})}},{key:"addModule",value:function(f){var u=this.quill.constructor.import("modules/"+f);return this.modules[f]=new u(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),d}();l.DEFAULTS={modules:{}},l.themes={default:l},r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function g(x,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(x,S.key,S)}}return function(x,j,N){return j&&g(x.prototype,j),N&&g(x,N),x}}(),o=function g(x,j,N){x===null&&(x=Function.prototype);var S=Object.getOwnPropertyDescriptor(x,j);if(S===void 0){var C=Object.getPrototypeOf(x);return C===null?void 0:g(C,j,N)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(N)}},l=i(0),d=u(l),h=i(7),f=u(h);function u(g){return g&&g.__esModule?g:{default:g}}function m(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function p(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function w(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var y="\uFEFF",b=function(g){w(x,g);function x(j){m(this,x);var N=p(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,j));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(S){N.contentNode.appendChild(S)}),N.leftGuard=document.createTextNode(y),N.rightGuard=document.createTextNode(y),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return a(x,[{key:"index",value:function(N,S){return N===this.leftGuard?0:N===this.rightGuard?1:o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,N,S)}},{key:"restore",value:function(N){var S=void 0,C=void 0,T=N.data.split(y).join("");if(N===this.leftGuard)if(this.prev instanceof f.default){var A=this.prev.length();this.prev.insertAt(A,T),S={startNode:this.prev.domNode,startOffset:A+T.length}}else C=document.createTextNode(T),this.parent.insertBefore(d.default.create(C),this),S={startNode:C,startOffset:T.length};else N===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,T),S={startNode:this.next.domNode,startOffset:T.length}):(C=document.createTextNode(T),this.parent.insertBefore(d.default.create(C),this.next),S={startNode:C,startOffset:T.length}));return N.data=y,S}},{key:"update",value:function(N,S){var C=this;N.forEach(function(T){if(T.type==="characterData"&&(T.target===C.leftGuard||T.target===C.rightGuard)){var A=C.restore(T.target);A&&(S.range=A)}})}}]),x}(d.default.Embed);r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var a=i(0),o=l(a);function l(m){return m&&m.__esModule?m:{default:m}}var d={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},h=new o.default.Attributor.Attribute("align","align",d),f=new o.default.Attributor.Class("align","ql-align",d),u=new o.default.Attributor.Style("align","text-align",d);r.AlignAttribute=h,r.AlignClass=f,r.AlignStyle=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var a=i(0),o=d(a),l=i(26);function d(u){return u&&u.__esModule?u:{default:u}}var h=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),f=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=h,r.BackgroundStyle=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var a=i(0),o=l(a);function l(m){return m&&m.__esModule?m:{default:m}}var d={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},h=new o.default.Attributor.Attribute("direction","dir",d),f=new o.default.Attributor.Class("direction","ql-direction",d),u=new o.default.Attributor.Style("direction","direction",d);r.DirectionAttribute=h,r.DirectionClass=f,r.DirectionStyle=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var a=function(){function g(x,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(x,S.key,S)}}return function(x,j,N){return j&&g(x.prototype,j),N&&g(x,N),x}}(),o=function g(x,j,N){x===null&&(x=Function.prototype);var S=Object.getOwnPropertyDescriptor(x,j);if(S===void 0){var C=Object.getPrototypeOf(x);return C===null?void 0:g(C,j,N)}else{if("value"in S)return S.value;var T=S.get;return T===void 0?void 0:T.call(N)}},l=i(0),d=h(l);function h(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function u(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function m(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p={scope:d.default.Scope.INLINE,whitelist:["serif","monospace"]},w=new d.default.Attributor.Class("font","ql-font",p),y=function(g){m(x,g);function x(){return f(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return a(x,[{key:"value",value:function(N){return o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),x}(d.default.Attributor.Style),b=new y("font","font-family",p);r.FontStyle=b,r.FontClass=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var a=i(0),o=l(a);function l(f){return f&&f.__esModule?f:{default:f}}var d=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),h=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=d,r.SizeStyle=h},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var a=function(){function j(N,S){for(var C=0;C<S.length;C++){var T=S[C];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(N,T.key,T)}}return function(N,S,C){return S&&j(N.prototype,S),C&&j(N,C),N}}(),o=i(0),l=m(o),d=i(5),h=m(d),f=i(9),u=m(f);function m(j){return j&&j.__esModule?j:{default:j}}function p(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function w(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function y(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var b=function(j){y(N,j);function N(S,C){p(this,N);var T=w(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S,C));return T.lastRecorded=0,T.ignoreChange=!1,T.clear(),T.quill.on(h.default.events.EDITOR_CHANGE,function(A,I,P,R){A!==h.default.events.TEXT_CHANGE||T.ignoreChange||(!T.options.userOnly||R===h.default.sources.USER?T.record(I,P):T.transform(I))}),T.quill.keyboard.addBinding({key:"Z",shortKey:!0},T.undo.bind(T)),T.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},T.redo.bind(T)),/Win/i.test(navigator.platform)&&T.quill.keyboard.addBinding({key:"Y",shortKey:!0},T.redo.bind(T)),T}return a(N,[{key:"change",value:function(C,T){if(this.stack[C].length!==0){var A=this.stack[C].pop();this.stack[T].push(A),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(A[C],h.default.sources.USER),this.ignoreChange=!1;var I=x(A[C]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(C,T){if(C.ops.length!==0){this.stack.redo=[];var A=this.quill.getContents().diff(T),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var P=this.stack.undo.pop();A=A.compose(P.undo),C=P.redo.compose(C)}else this.lastRecorded=I;this.stack.undo.push({redo:C,undo:A}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(C){this.stack.undo.forEach(function(T){T.undo=C.transform(T.undo,!0),T.redo=C.transform(T.redo,!0)}),this.stack.redo.forEach(function(T){T.undo=C.transform(T.undo,!0),T.redo=C.transform(T.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N}(u.default);b.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(j){var N=j.ops[j.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(S){return l.default.query(S,l.default.Scope.BLOCK)!=null}):!1}function x(j){var N=j.reduce(function(C,T){return C+=T.delete||0,C},0),S=j.length()-N;return g(j)&&(S-=1),S}r.default=b,r.getLastChangeIndex=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var a=function(){function H(q,W){for(var Y=0;Y<W.length;Y++){var U=W[Y];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(q,U.key,U)}}return function(q,W,Y){return W&&H(q.prototype,W),Y&&H(q,Y),q}}(),o=function H(q,W,Y){q===null&&(q=Function.prototype);var U=Object.getOwnPropertyDescriptor(q,W);if(U===void 0){var G=Object.getPrototypeOf(q);return G===null?void 0:H(G,W,Y)}else{if("value"in U)return U.value;var ne=U.get;return ne===void 0?void 0:ne.call(Y)}},l=i(3),d=I(l),h=i(2),f=I(h),u=i(8),m=I(u),p=i(23),w=I(p),y=i(34),b=I(y),g=i(59),x=I(g),j=i(60),N=I(j),S=i(28),C=I(S),T=i(61),A=I(T);function I(H){return H&&H.__esModule?H:{default:H}}function P(H,q){if(!(H instanceof q))throw new TypeError("Cannot call a class as a function")}function R(H,q){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:H}function E(H,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);H.prototype=Object.create(q&&q.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(H,q):H.__proto__=q)}var F=[!1,"center","right","justify"],O=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],M=[!1,"serif","monospace"],Z=["1","2","3",!1],X=["small",!1,"large","huge"],z=function(H){E(q,H);function q(W,Y){P(this,q);var U=R(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,W,Y)),G=function ne(J){if(!document.body.contains(W.root))return document.body.removeEventListener("click",ne);U.tooltip!=null&&!U.tooltip.root.contains(J.target)&&document.activeElement!==U.tooltip.textbox&&!U.quill.hasFocus()&&U.tooltip.hide(),U.pickers!=null&&U.pickers.forEach(function(ie){ie.container.contains(J.target)||ie.close()})};return W.emitter.listenDOM("click",document.body,G),U}return a(q,[{key:"addModule",value:function(Y){var U=o(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"addModule",this).call(this,Y);return Y==="toolbar"&&this.extendToolbar(U),U}},{key:"buildButtons",value:function(Y,U){Y.forEach(function(G){var ne=G.getAttribute("class")||"";ne.split(/\s+/).forEach(function(J){if(J.startsWith("ql-")&&(J=J.slice(3),U[J]!=null))if(J==="direction")G.innerHTML=U[J][""]+U[J].rtl;else if(typeof U[J]=="string")G.innerHTML=U[J];else{var ie=G.value||"";ie!=null&&U[J][ie]&&(G.innerHTML=U[J][ie])}})})}},{key:"buildPickers",value:function(Y,U){var G=this;this.pickers=Y.map(function(J){if(J.classList.contains("ql-align"))return J.querySelector("option")==null&&V(J,F),new N.default(J,U.align);if(J.classList.contains("ql-background")||J.classList.contains("ql-color")){var ie=J.classList.contains("ql-background")?"background":"color";return J.querySelector("option")==null&&V(J,O,ie==="background"?"#ffffff":"#000000"),new x.default(J,U[ie])}else return J.querySelector("option")==null&&(J.classList.contains("ql-font")?V(J,M):J.classList.contains("ql-header")?V(J,Z):J.classList.contains("ql-size")&&V(J,X)),new C.default(J)});var ne=function(){G.pickers.forEach(function(ie){ie.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,ne)}}]),q}(b.default);z.DEFAULTS=(0,d.default)(!0,{},b.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var q=this,W=this.container.querySelector("input.ql-image[type=file]");W==null&&(W=document.createElement("input"),W.setAttribute("type","file"),W.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),W.classList.add("ql-image"),W.addEventListener("change",function(){if(W.files!=null&&W.files[0]!=null){var Y=new FileReader;Y.onload=function(U){var G=q.quill.getSelection(!0);q.quill.updateContents(new f.default().retain(G.index).delete(G.length).insert({image:U.target.result}),m.default.sources.USER),q.quill.setSelection(G.index+1,m.default.sources.SILENT),W.value=""},Y.readAsDataURL(W.files[0])}}),this.container.appendChild(W)),W.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var D=function(H){E(q,H);function q(W,Y){P(this,q);var U=R(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,W,Y));return U.textbox=U.root.querySelector('input[type="text"]'),U.listen(),U}return a(q,[{key:"listen",value:function(){var Y=this;this.textbox.addEventListener("keydown",function(U){w.default.match(U,"enter")?(Y.save(),U.preventDefault()):w.default.match(U,"escape")&&(Y.cancel(),U.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),U!=null?this.textbox.value=U:Y!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Y)||""),this.root.setAttribute("data-mode",Y)}},{key:"restoreFocus",value:function(){var Y=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Y}},{key:"save",value:function(){var Y=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var U=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Y,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Y,m.default.sources.USER)),this.quill.root.scrollTop=U;break}case"video":Y=B(Y);case"formula":{if(!Y)break;var G=this.quill.getSelection(!0);if(G!=null){var ne=G.index+G.length;this.quill.insertEmbed(ne,this.root.getAttribute("data-mode"),Y,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ne+1," ",m.default.sources.USER),this.quill.setSelection(ne+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),q}(A.default);function B(H){var q=H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return q?(q[1]||"https")+"://www.youtube.com/embed/"+q[2]+"?showinfo=0":(q=H.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(q[1]||"https")+"://player.vimeo.com/video/"+q[2]+"/":H}function V(H,q){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;q.forEach(function(Y){var U=document.createElement("option");Y===W?U.setAttribute("selected","selected"):U.setAttribute("value",Y),H.appendChild(U)})}r.BaseTooltip=D,r.default=z},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var d,h=this.iterator();d=h();)if(d===l)return!0;return!1},o.prototype.insertBefore=function(l,d){l&&(l.next=d,d!=null?(l.prev=d.prev,d.prev!=null&&(d.prev.next=l),d.prev=l,d===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var d=0,h=this.head;h!=null;){if(h===l)return d;d+=h.length(),h=h.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var d=l;return l!=null&&(l=l.next),d}},o.prototype.find=function(l,d){d===void 0&&(d=!1);for(var h,f=this.iterator();h=f();){var u=h.length();if(l<u||d&&l===u&&(h.next==null||h.next.length()!==0))return[h,l];l-=u}return[null,0]},o.prototype.forEach=function(l){for(var d,h=this.iterator();d=h();)l(d)},o.prototype.forEachAt=function(l,d,h){if(!(d<=0))for(var f=this.find(l),u=f[0],m=f[1],p,w=l-m,y=this.iterator(u);(p=y())&&w<l+d;){var b=p.length();l>w?h(p,l-w,Math.min(d,w+b-l)):h(p,0,Math.min(b,l+d-w)),w+=b}},o.prototype.map=function(l){return this.reduce(function(d,h){return d.push(l(h)),d},[])},o.prototype.reduce=function(l,d){for(var h,f=this.iterator();h=f();)d=l(d,h);return d},o}();r.default=a},function(n,r,i){var a=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var w in p)p.hasOwnProperty(w)&&(m[w]=p[w])};return function(m,p){u(m,p);function w(){this.constructor=m}m.prototype=p===null?Object.create(p):(w.prototype=p.prototype,new w)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),l=i(1),d={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},h=100,f=function(u){a(m,u);function m(p){var w=u.call(this,p)||this;return w.scroll=w,w.observer=new MutationObserver(function(y){w.update(y)}),w.observer.observe(w.domNode,d),w.attach(),w}return m.prototype.detach=function(){u.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(p,w){this.update(),p===0&&w===this.length()?this.children.forEach(function(y){y.remove()}):u.prototype.deleteAt.call(this,p,w)},m.prototype.formatAt=function(p,w,y,b){this.update(),u.prototype.formatAt.call(this,p,w,y,b)},m.prototype.insertAt=function(p,w,y){this.update(),u.prototype.insertAt.call(this,p,w,y)},m.prototype.optimize=function(p,w){var y=this;p===void 0&&(p=[]),w===void 0&&(w={}),u.prototype.optimize.call(this,w);for(var b=[].slice.call(this.observer.takeRecords());b.length>0;)p.push(b.pop());for(var g=function(S,C){C===void 0&&(C=!0),!(S==null||S===y)&&S.domNode.parentNode!=null&&(S.domNode[l.DATA_KEY].mutations==null&&(S.domNode[l.DATA_KEY].mutations=[]),C&&g(S.parent))},x=function(S){S.domNode[l.DATA_KEY]==null||S.domNode[l.DATA_KEY].mutations==null||(S instanceof o.default&&S.children.forEach(x),S.optimize(w))},j=p,N=0;j.length>0;N+=1){if(N>=h)throw new Error("[Parchment] Maximum optimize iterations reached");for(j.forEach(function(S){var C=l.find(S.target,!0);C!=null&&(C.domNode===S.target&&(S.type==="childList"?(g(l.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(T){var A=l.find(T,!1);g(A,!1),A instanceof o.default&&A.children.forEach(function(I){g(I,!1)})})):S.type==="attributes"&&g(C.prev)),g(C))}),this.children.forEach(x),j=[].slice.call(this.observer.takeRecords()),b=j.slice();b.length>0;)p.push(b.pop())}},m.prototype.update=function(p,w){var y=this;w===void 0&&(w={}),p=p||this.observer.takeRecords(),p.map(function(b){var g=l.find(b.target,!0);return g==null?null:g.domNode[l.DATA_KEY].mutations==null?(g.domNode[l.DATA_KEY].mutations=[b],g):(g.domNode[l.DATA_KEY].mutations.push(b),null)}).forEach(function(b){b==null||b===y||b.domNode[l.DATA_KEY]==null||b.update(b.domNode[l.DATA_KEY].mutations||[],w)}),this.domNode[l.DATA_KEY].mutations!=null&&u.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,w),this.optimize(p,w)},m.blotName="scroll",m.defaultChild="block",m.scope=l.Scope.BLOCK_BLOT,m.tagName="DIV",m}(o.default);r.default=f},function(n,r,i){var a=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var p in m)m.hasOwnProperty(p)&&(u[p]=m[p])};return function(u,m){f(u,m);function p(){this.constructor=u}u.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),l=i(1);function d(f,u){if(Object.keys(f).length!==Object.keys(u).length)return!1;for(var m in f)if(f[m]!==u[m])return!1;return!0}var h=function(f){a(u,f);function u(){return f!==null&&f.apply(this,arguments)||this}return u.formats=function(m){if(m.tagName!==u.tagName)return f.formats.call(this,m)},u.prototype.format=function(m,p){var w=this;m===this.statics.blotName&&!p?(this.children.forEach(function(y){y instanceof o.default||(y=y.wrap(u.blotName,!0)),w.attributes.copy(y)}),this.unwrap()):f.prototype.format.call(this,m,p)},u.prototype.formatAt=function(m,p,w,y){if(this.formats()[w]!=null||l.query(w,l.Scope.ATTRIBUTE)){var b=this.isolate(m,p);b.format(w,y)}else f.prototype.formatAt.call(this,m,p,w,y)},u.prototype.optimize=function(m){f.prototype.optimize.call(this,m);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var w=this.next;w instanceof u&&w.prev===this&&d(p,w.formats())&&(w.moveChildren(this),w.remove())},u.blotName="inline",u.scope=l.Scope.INLINE_BLOT,u.tagName="SPAN",u}(o.default);r.default=h},function(n,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var m in u)u.hasOwnProperty(m)&&(f[m]=u[m])};return function(f,u){h(f,u);function m(){this.constructor=f}f.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),l=i(1),d=function(h){a(f,h);function f(){return h!==null&&h.apply(this,arguments)||this}return f.formats=function(u){var m=l.query(f.blotName).tagName;if(u.tagName!==m)return h.formats.call(this,u)},f.prototype.format=function(u,m){l.query(u,l.Scope.BLOCK)!=null&&(u===this.statics.blotName&&!m?this.replaceWith(f.blotName):h.prototype.format.call(this,u,m))},f.prototype.formatAt=function(u,m,p,w){l.query(p,l.Scope.BLOCK)!=null?this.format(p,w):h.prototype.formatAt.call(this,u,m,p,w)},f.prototype.insertAt=function(u,m,p){if(p==null||l.query(m,l.Scope.INLINE)!=null)h.prototype.insertAt.call(this,u,m,p);else{var w=this.split(u),y=l.create(m,p);w.parent.insertBefore(y,w)}},f.prototype.update=function(u,m){navigator.userAgent.match(/Trident/)?this.build():h.prototype.update.call(this,u,m)},f.blotName="block",f.scope=l.Scope.BLOCK_BLOT,f.tagName="P",f}(o.default);r.default=d},function(n,r,i){var a=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var u in f)f.hasOwnProperty(u)&&(h[u]=f[u])};return function(h,f){d(h,f);function u(){this.constructor=h}h.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),l=function(d){a(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.formats=function(f){},h.prototype.format=function(f,u){d.prototype.formatAt.call(this,0,this.length(),f,u)},h.prototype.formatAt=function(f,u,m,p){f===0&&u===this.length()?this.format(m,p):d.prototype.formatAt.call(this,f,u,m,p)},h.prototype.formats=function(){return this.statics.formats(this.domNode)},h}(o.default);r.default=l},function(n,r,i){var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var m in u)u.hasOwnProperty(m)&&(f[m]=u[m])};return function(f,u){h(f,u);function m(){this.constructor=f}f.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),l=i(1),d=function(h){a(f,h);function f(u){var m=h.call(this,u)||this;return m.text=m.statics.value(m.domNode),m}return f.create=function(u){return document.createTextNode(u)},f.value=function(u){var m=u.data;return m.normalize&&(m=m.normalize()),m},f.prototype.deleteAt=function(u,m){this.domNode.data=this.text=this.text.slice(0,u)+this.text.slice(u+m)},f.prototype.index=function(u,m){return this.domNode===u?m:-1},f.prototype.insertAt=function(u,m,p){p==null?(this.text=this.text.slice(0,u)+m+this.text.slice(u),this.domNode.data=this.text):h.prototype.insertAt.call(this,u,m,p)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(u){h.prototype.optimize.call(this,u),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(u,m){return[this.domNode,u]},f.prototype.split=function(u,m){if(m===void 0&&(m=!1),!m){if(u===0)return this;if(u===this.length())return this.next}var p=l.create(this.domNode.splitText(u));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},f.prototype.update=function(u,m){var p=this;u.some(function(w){return w.type==="characterData"&&w.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=l.Scope.INLINE_BLOT,f}(o.default);r.default=d},function(n,r,i){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,d){return arguments.length>1&&!this.contains(l)==!d?d:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,d){return d=d||0,this.substr(d,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,d){var h=this.toString();(typeof d!="number"||!isFinite(d)||Math.floor(d)!==d||d>h.length)&&(d=h.length),d-=l.length;var f=h.indexOf(l,d);return f!==-1&&f===d}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("predicate must be a function");for(var h=Object(this),f=h.length>>>0,u=arguments[1],m,p=0;p<f;p++)if(m=h[p],d.call(u,m,p,h))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,a=1,o=0;function l(N,S,C){if(N==S)return N?[[o,N]]:[];(C<0||N.length<C)&&(C=null);var T=u(N,S),A=N.substring(0,T);N=N.substring(T),S=S.substring(T),T=m(N,S);var I=N.substring(N.length-T);N=N.substring(0,N.length-T),S=S.substring(0,S.length-T);var P=d(N,S);return A&&P.unshift([o,A]),I&&P.push([o,I]),w(P),C!=null&&(P=g(P,C)),P=x(P),P}function d(N,S){var C;if(!N)return[[a,S]];if(!S)return[[i,N]];var T=N.length>S.length?N:S,A=N.length>S.length?S:N,I=T.indexOf(A);if(I!=-1)return C=[[a,T.substring(0,I)],[o,A],[a,T.substring(I+A.length)]],N.length>S.length&&(C[0][0]=C[2][0]=i),C;if(A.length==1)return[[i,N],[a,S]];var P=p(N,S);if(P){var R=P[0],E=P[1],F=P[2],O=P[3],M=P[4],Z=l(R,F),X=l(E,O);return Z.concat([[o,M]],X)}return h(N,S)}function h(N,S){for(var C=N.length,T=S.length,A=Math.ceil((C+T)/2),I=A,P=2*A,R=new Array(P),E=new Array(P),F=0;F<P;F++)R[F]=-1,E[F]=-1;R[I+1]=0,E[I+1]=0;for(var O=C-T,M=O%2!=0,Z=0,X=0,z=0,D=0,B=0;B<A;B++){for(var V=-B+Z;V<=B-X;V+=2){var H=I+V,q;V==-B||V!=B&&R[H-1]<R[H+1]?q=R[H+1]:q=R[H-1]+1;for(var W=q-V;q<C&&W<T&&N.charAt(q)==S.charAt(W);)q++,W++;if(R[H]=q,q>C)X+=2;else if(W>T)Z+=2;else if(M){var Y=I+O-V;if(Y>=0&&Y<P&&E[Y]!=-1){var U=C-E[Y];if(q>=U)return f(N,S,q,W)}}}for(var G=-B+z;G<=B-D;G+=2){var Y=I+G,U;G==-B||G!=B&&E[Y-1]<E[Y+1]?U=E[Y+1]:U=E[Y-1]+1;for(var ne=U-G;U<C&&ne<T&&N.charAt(C-U-1)==S.charAt(T-ne-1);)U++,ne++;if(E[Y]=U,U>C)D+=2;else if(ne>T)z+=2;else if(!M){var H=I+O-G;if(H>=0&&H<P&&R[H]!=-1){var q=R[H],W=I+q-H;if(U=C-U,q>=U)return f(N,S,q,W)}}}}return[[i,N],[a,S]]}function f(N,S,C,T){var A=N.substring(0,C),I=S.substring(0,T),P=N.substring(C),R=S.substring(T),E=l(A,I),F=l(P,R);return E.concat(F)}function u(N,S){if(!N||!S||N.charAt(0)!=S.charAt(0))return 0;for(var C=0,T=Math.min(N.length,S.length),A=T,I=0;C<A;)N.substring(I,A)==S.substring(I,A)?(C=A,I=C):T=A,A=Math.floor((T-C)/2+C);return A}function m(N,S){if(!N||!S||N.charAt(N.length-1)!=S.charAt(S.length-1))return 0;for(var C=0,T=Math.min(N.length,S.length),A=T,I=0;C<A;)N.substring(N.length-A,N.length-I)==S.substring(S.length-A,S.length-I)?(C=A,I=C):T=A,A=Math.floor((T-C)/2+C);return A}function p(N,S){var C=N.length>S.length?N:S,T=N.length>S.length?S:N;if(C.length<4||T.length*2<C.length)return null;function A(X,z,D){for(var B=X.substring(D,D+Math.floor(X.length/4)),V=-1,H="",q,W,Y,U;(V=z.indexOf(B,V+1))!=-1;){var G=u(X.substring(D),z.substring(V)),ne=m(X.substring(0,D),z.substring(0,V));H.length<ne+G&&(H=z.substring(V-ne,V)+z.substring(V,V+G),q=X.substring(0,D-ne),W=X.substring(D+G),Y=z.substring(0,V-ne),U=z.substring(V+G))}return H.length*2>=X.length?[q,W,Y,U,H]:null}var I=A(C,T,Math.ceil(C.length/4)),P=A(C,T,Math.ceil(C.length/2)),R;if(!I&&!P)return null;P?I?R=I[4].length>P[4].length?I:P:R=P:R=I;var E,F,O,M;N.length>S.length?(E=R[0],F=R[1],O=R[2],M=R[3]):(O=R[0],M=R[1],E=R[2],F=R[3]);var Z=R[4];return[E,F,O,M,Z]}function w(N){N.push([o,""]);for(var S=0,C=0,T=0,A="",I="",P;S<N.length;)switch(N[S][0]){case a:T++,I+=N[S][1],S++;break;case i:C++,A+=N[S][1],S++;break;case o:C+T>1?(C!==0&&T!==0&&(P=u(I,A),P!==0&&(S-C-T>0&&N[S-C-T-1][0]==o?N[S-C-T-1][1]+=I.substring(0,P):(N.splice(0,0,[o,I.substring(0,P)]),S++),I=I.substring(P),A=A.substring(P)),P=m(I,A),P!==0&&(N[S][1]=I.substring(I.length-P)+N[S][1],I=I.substring(0,I.length-P),A=A.substring(0,A.length-P))),C===0?N.splice(S-T,C+T,[a,I]):T===0?N.splice(S-C,C+T,[i,A]):N.splice(S-C-T,C+T,[i,A],[a,I]),S=S-C-T+(C?1:0)+(T?1:0)+1):S!==0&&N[S-1][0]==o?(N[S-1][1]+=N[S][1],N.splice(S,1)):S++,T=0,C=0,A="",I="";break}N[N.length-1][1]===""&&N.pop();var R=!1;for(S=1;S<N.length-1;)N[S-1][0]==o&&N[S+1][0]==o&&(N[S][1].substring(N[S][1].length-N[S-1][1].length)==N[S-1][1]?(N[S][1]=N[S-1][1]+N[S][1].substring(0,N[S][1].length-N[S-1][1].length),N[S+1][1]=N[S-1][1]+N[S+1][1],N.splice(S-1,1),R=!0):N[S][1].substring(0,N[S+1][1].length)==N[S+1][1]&&(N[S-1][1]+=N[S+1][1],N[S][1]=N[S][1].substring(N[S+1][1].length)+N[S+1][1],N.splice(S+1,1),R=!0)),S++;R&&w(N)}var y=l;y.INSERT=a,y.DELETE=i,y.EQUAL=o,n.exports=y;function b(N,S){if(S===0)return[o,N];for(var C=0,T=0;T<N.length;T++){var A=N[T];if(A[0]===i||A[0]===o){var I=C+A[1].length;if(S===I)return[T+1,N];if(S<I){N=N.slice();var P=S-C,R=[A[0],A[1].slice(0,P)],E=[A[0],A[1].slice(P)];return N.splice(T,1,R,E),[T+1,N]}else C=I}}throw new Error("cursor_pos is out of bounds!")}function g(N,S){var C=b(N,S),T=C[1],A=C[0],I=T[A],P=T[A+1];if(I==null)return N;if(I[0]!==o)return N;if(P!=null&&I[1]+P[1]===P[1]+I[1])return T.splice(A,2,P,I),j(T,A,2);if(P!=null&&P[1].indexOf(I[1])===0){T.splice(A,2,[P[0],I[1]],[0,I[1]]);var R=P[1].slice(I[1].length);return R.length>0&&T.splice(A+2,0,[P[0],R]),j(T,A,3)}else return N}function x(N){for(var S=!1,C=function(P){return P.charCodeAt(0)>=56320&&P.charCodeAt(0)<=57343},T=function(P){return P.charCodeAt(P.length-1)>=55296&&P.charCodeAt(P.length-1)<=56319},A=2;A<N.length;A+=1)N[A-2][0]===o&&T(N[A-2][1])&&N[A-1][0]===i&&C(N[A-1][1])&&N[A][0]===a&&C(N[A][1])&&(S=!0,N[A-1][1]=N[A-2][1].slice(-1)+N[A-1][1],N[A][1]=N[A-2][1].slice(-1)+N[A][1],N[A-2][1]=N[A-2][1].slice(0,-1));if(!S)return N;for(var I=[],A=0;A<N.length;A+=1)N[A][1].length>0&&I.push(N[A]);return I}function j(N,S,C){for(var T=S+C-1;T>=0&&T>=S-1;T--)if(T+1<N.length){var A=N[T],I=N[T+1];A[0]===I[1]&&N.splice(T,2,[A[0],A[1]+I[1]])}return N}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(a){var o=[];for(var l in a)o.push(l);return o}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?a:o,r.supported=a;function a(l){return Object.prototype.toString.call(l)=="[object Arguments]"}r.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,a="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(a=!1));function l(h,f,u){this.fn=h,this.context=f,this.once=u||!1}function d(){this._events=new o,this._eventsCount=0}d.prototype.eventNames=function(){var f=[],u,m;if(this._eventsCount===0)return f;for(m in u=this._events)i.call(u,m)&&f.push(a?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(u)):f},d.prototype.listeners=function(f,u){var m=a?a+f:f,p=this._events[m];if(u)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var w=0,y=p.length,b=new Array(y);w<y;w++)b[w]=p[w].fn;return b},d.prototype.emit=function(f,u,m,p,w,y){var b=a?a+f:f;if(!this._events[b])return!1;var g=this._events[b],x=arguments.length,j,N;if(g.fn){switch(g.once&&this.removeListener(f,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,m),!0;case 4:return g.fn.call(g.context,u,m,p),!0;case 5:return g.fn.call(g.context,u,m,p,w),!0;case 6:return g.fn.call(g.context,u,m,p,w,y),!0}for(N=1,j=new Array(x-1);N<x;N++)j[N-1]=arguments[N];g.fn.apply(g.context,j)}else{var S=g.length,C;for(N=0;N<S;N++)switch(g[N].once&&this.removeListener(f,g[N].fn,void 0,!0),x){case 1:g[N].fn.call(g[N].context);break;case 2:g[N].fn.call(g[N].context,u);break;case 3:g[N].fn.call(g[N].context,u,m);break;case 4:g[N].fn.call(g[N].context,u,m,p);break;default:if(!j)for(C=1,j=new Array(x-1);C<x;C++)j[C-1]=arguments[C];g[N].fn.apply(g[N].context,j)}}return!0},d.prototype.on=function(f,u,m){var p=new l(u,m||this),w=a?a+f:f;return this._events[w]?this._events[w].fn?this._events[w]=[this._events[w],p]:this._events[w].push(p):(this._events[w]=p,this._eventsCount++),this},d.prototype.once=function(f,u,m){var p=new l(u,m||this,!0),w=a?a+f:f;return this._events[w]?this._events[w].fn?this._events[w]=[this._events[w],p]:this._events[w].push(p):(this._events[w]=p,this._eventsCount++),this},d.prototype.removeListener=function(f,u,m,p){var w=a?a+f:f;if(!this._events[w])return this;if(!u)return--this._eventsCount===0?this._events=new o:delete this._events[w],this;var y=this._events[w];if(y.fn)y.fn===u&&(!p||y.once)&&(!m||y.context===m)&&(--this._eventsCount===0?this._events=new o:delete this._events[w]);else{for(var b=0,g=[],x=y.length;b<x;b++)(y[b].fn!==u||p&&!y[b].once||m&&y[b].context!==m)&&g.push(y[b]);g.length?this._events[w]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new o:delete this._events[w]}return this},d.prototype.removeAllListeners=function(f){var u;return f?(u=a?a+f:f,this._events[u]&&(--this._eventsCount===0?this._events=new o:delete this._events[u])):(this._events=new o,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prototype.setMaxListeners=function(){return this},d.prefixed=a,d.EventEmitter=d,typeof n<"u"&&(n.exports=d)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},o=function(){function ce(ge,ee){var ae=[],oe=!0,ke=!1,de=void 0;try{for(var pe=ge[Symbol.iterator](),Pe;!(oe=(Pe=pe.next()).done)&&(ae.push(Pe.value),!(ee&&ae.length===ee));oe=!0);}catch(me){ke=!0,de=me}finally{try{!oe&&pe.return&&pe.return()}finally{if(ke)throw de}}return ae}return function(ge,ee){if(Array.isArray(ge))return ge;if(Symbol.iterator in Object(ge))return ce(ge,ee);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function ce(ge,ee){for(var ae=0;ae<ee.length;ae++){var oe=ee[ae];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(ge,oe.key,oe)}}return function(ge,ee,ae){return ee&&ce(ge.prototype,ee),ae&&ce(ge,ae),ge}}(),d=i(3),h=E(d),f=i(2),u=E(f),m=i(0),p=E(m),w=i(5),y=E(w),b=i(10),g=E(b),x=i(9),j=E(x),N=i(36),S=i(37),C=i(13),T=E(C),A=i(26),I=i(38),P=i(39),R=i(40);function E(ce){return ce&&ce.__esModule?ce:{default:ce}}function F(ce,ge,ee){return ge in ce?Object.defineProperty(ce,ge,{value:ee,enumerable:!0,configurable:!0,writable:!0}):ce[ge]=ee,ce}function O(ce,ge){if(!(ce instanceof ge))throw new TypeError("Cannot call a class as a function")}function M(ce,ge){if(!ce)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ge&&(typeof ge=="object"||typeof ge=="function")?ge:ce}function Z(ce,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ge);ce.prototype=Object.create(ge&&ge.prototype,{constructor:{value:ce,enumerable:!1,writable:!0,configurable:!0}}),ge&&(Object.setPrototypeOf?Object.setPrototypeOf(ce,ge):ce.__proto__=ge)}var X=(0,g.default)("quill:clipboard"),z="__ql-matcher",D=[[Node.TEXT_NODE,be],[Node.TEXT_NODE,he],["br",xe],[Node.ELEMENT_NODE,he],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,Q],[Node.ELEMENT_NODE,J],[Node.ELEMENT_NODE,ye],["li",ue],["b",ne.bind(ne,"bold")],["i",ne.bind(ne,"italic")],["style",Se]],B=[N.AlignAttribute,I.DirectionAttribute].reduce(function(ce,ge){return ce[ge.keyName]=ge,ce},{}),V=[N.AlignStyle,S.BackgroundStyle,A.ColorStyle,I.DirectionStyle,P.FontStyle,R.SizeStyle].reduce(function(ce,ge){return ce[ge.keyName]=ge,ce},{}),H=function(ce){Z(ge,ce);function ge(ee,ae){O(this,ge);var oe=M(this,(ge.__proto__||Object.getPrototypeOf(ge)).call(this,ee,ae));return oe.quill.root.addEventListener("paste",oe.onPaste.bind(oe)),oe.container=oe.quill.addContainer("ql-clipboard"),oe.container.setAttribute("contenteditable",!0),oe.container.setAttribute("tabindex",-1),oe.matchers=[],D.concat(oe.options.matchers).forEach(function(ke){var de=o(ke,2),pe=de[0],Pe=de[1];!ae.matchVisual&&Pe===Q||oe.addMatcher(pe,Pe)}),oe}return l(ge,[{key:"addMatcher",value:function(ae,oe){this.matchers.push([ae,oe])}},{key:"convert",value:function(ae){if(typeof ae=="string")return this.container.innerHTML=ae.replace(/\>\r?\n +\</g,"><"),this.convert();var oe=this.quill.getFormat(this.quill.selection.savedRange.index);if(oe[T.default.blotName]){var ke=this.container.innerText;return this.container.innerHTML="",new u.default().insert(ke,F({},T.default.blotName,oe[T.default.blotName]))}var de=this.prepareMatching(),pe=o(de,2),Pe=pe[0],me=pe[1],we=G(this.container,Pe,me);return Y(we,`
`)&&we.ops[we.ops.length-1].attributes==null&&(we=we.compose(new u.default().retain(we.length()-1).delete(1))),X.log("convert",this.container.innerHTML,we),this.container.innerHTML="",we}},{key:"dangerouslyPasteHTML",value:function(ae,oe){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof ae=="string")this.quill.setContents(this.convert(ae),oe),this.quill.setSelection(0,y.default.sources.SILENT);else{var de=this.convert(oe);this.quill.updateContents(new u.default().retain(ae).concat(de),ke),this.quill.setSelection(ae+de.length(),y.default.sources.SILENT)}}},{key:"onPaste",value:function(ae){var oe=this;if(!(ae.defaultPrevented||!this.quill.isEnabled())){var ke=this.quill.getSelection(),de=new u.default().retain(ke.index),pe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(y.default.sources.SILENT),setTimeout(function(){de=de.concat(oe.convert()).delete(ke.length),oe.quill.updateContents(de,y.default.sources.USER),oe.quill.setSelection(de.length()-ke.length,y.default.sources.SILENT),oe.quill.scrollingContainer.scrollTop=pe,oe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ae=this,oe=[],ke=[];return this.matchers.forEach(function(de){var pe=o(de,2),Pe=pe[0],me=pe[1];switch(Pe){case Node.TEXT_NODE:ke.push(me);break;case Node.ELEMENT_NODE:oe.push(me);break;default:[].forEach.call(ae.container.querySelectorAll(Pe),function(we){we[z]=we[z]||[],we[z].push(me)});break}}),[oe,ke]}}]),ge}(j.default);H.DEFAULTS={matchers:[],matchVisual:!0};function q(ce,ge,ee){return(typeof ge>"u"?"undefined":a(ge))==="object"?Object.keys(ge).reduce(function(ae,oe){return q(ae,oe,ge[oe])},ce):ce.reduce(function(ae,oe){return oe.attributes&&oe.attributes[ge]?ae.push(oe):ae.insert(oe.insert,(0,h.default)({},F({},ge,ee),oe.attributes))},new u.default)}function W(ce){if(ce.nodeType!==Node.ELEMENT_NODE)return{};var ge="__ql-computed-style";return ce[ge]||(ce[ge]=window.getComputedStyle(ce))}function Y(ce,ge){for(var ee="",ae=ce.ops.length-1;ae>=0&&ee.length<ge.length;--ae){var oe=ce.ops[ae];if(typeof oe.insert!="string")break;ee=oe.insert+ee}return ee.slice(-1*ge.length)===ge}function U(ce){if(ce.childNodes.length===0)return!1;var ge=W(ce);return["block","list-item"].indexOf(ge.display)>-1}function G(ce,ge,ee){return ce.nodeType===ce.TEXT_NODE?ee.reduce(function(ae,oe){return oe(ce,ae)},new u.default):ce.nodeType===ce.ELEMENT_NODE?[].reduce.call(ce.childNodes||[],function(ae,oe){var ke=G(oe,ge,ee);return oe.nodeType===ce.ELEMENT_NODE&&(ke=ge.reduce(function(de,pe){return pe(oe,de)},ke),ke=(oe[z]||[]).reduce(function(de,pe){return pe(oe,de)},ke)),ae.concat(ke)},new u.default):new u.default}function ne(ce,ge,ee){return q(ee,ce,!0)}function J(ce,ge){var ee=p.default.Attributor.Attribute.keys(ce),ae=p.default.Attributor.Class.keys(ce),oe=p.default.Attributor.Style.keys(ce),ke={};return ee.concat(ae).concat(oe).forEach(function(de){var pe=p.default.query(de,p.default.Scope.ATTRIBUTE);pe!=null&&(ke[pe.attrName]=pe.value(ce),ke[pe.attrName])||(pe=B[de],pe!=null&&(pe.attrName===de||pe.keyName===de)&&(ke[pe.attrName]=pe.value(ce)||void 0),pe=V[de],pe!=null&&(pe.attrName===de||pe.keyName===de)&&(pe=V[de],ke[pe.attrName]=pe.value(ce)||void 0))}),Object.keys(ke).length>0&&(ge=q(ge,ke)),ge}function ie(ce,ge){var ee=p.default.query(ce);if(ee==null)return ge;if(ee.prototype instanceof p.default.Embed){var ae={},oe=ee.value(ce);oe!=null&&(ae[ee.blotName]=oe,ge=new u.default().insert(ae,ee.formats(ce)))}else typeof ee.formats=="function"&&(ge=q(ge,ee.blotName,ee.formats(ce)));return ge}function xe(ce,ge){return Y(ge,`
`)||ge.insert(`
`),ge}function Se(){return new u.default}function ue(ce,ge){var ee=p.default.query(ce);if(ee==null||ee.blotName!=="list-item"||!Y(ge,`
`))return ge;for(var ae=-1,oe=ce.parentNode;!oe.classList.contains("ql-clipboard");)(p.default.query(oe)||{}).blotName==="list"&&(ae+=1),oe=oe.parentNode;return ae<=0?ge:ge.compose(new u.default().retain(ge.length()-1).retain(1,{indent:ae}))}function he(ce,ge){return Y(ge,`
`)||(U(ce)||ge.length()>0&&ce.nextSibling&&U(ce.nextSibling))&&ge.insert(`
`),ge}function Q(ce,ge){if(U(ce)&&ce.nextElementSibling!=null&&!Y(ge,`

`)){var ee=ce.offsetHeight+parseFloat(W(ce).marginTop)+parseFloat(W(ce).marginBottom);ce.nextElementSibling.offsetTop>ce.offsetTop+ee*1.5&&ge.insert(`
`)}return ge}function ye(ce,ge){var ee={},ae=ce.style||{};return ae.fontStyle&&W(ce).fontStyle==="italic"&&(ee.italic=!0),ae.fontWeight&&(W(ce).fontWeight.startsWith("bold")||parseInt(W(ce).fontWeight)>=700)&&(ee.bold=!0),Object.keys(ee).length>0&&(ge=q(ge,ee)),parseFloat(ae.textIndent||0)>0&&(ge=new u.default().insert("	").concat(ge)),ge}function be(ce,ge){var ee=ce.data;if(ce.parentNode.tagName==="O:P")return ge.insert(ee.trim());if(ee.trim().length===0&&ce.parentNode.classList.contains("ql-clipboard"))return ge;if(!W(ce.parentNode).whiteSpace.startsWith("pre")){var ae=function(ke,de){return de=de.replace(/[^\u00a0]/g,""),de.length<1&&ke?" ":de};ee=ee.replace(/\r\n/g," ").replace(/\n/g," "),ee=ee.replace(/\s\s+/g,ae.bind(ae,!0)),(ce.previousSibling==null&&U(ce.parentNode)||ce.previousSibling!=null&&U(ce.previousSibling))&&(ee=ee.replace(/^\s+/,ae.bind(ae,!1))),(ce.nextSibling==null&&U(ce.parentNode)||ce.nextSibling!=null&&U(ce.nextSibling))&&(ee=ee.replace(/\s+$/,ae.bind(ae,!1)))}return ge.insert(ee)}r.default=H,r.matchAttributor=J,r.matchBlot=ie,r.matchNewline=he,r.matchSpacing=Q,r.matchText=be},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(y,b){for(var g=0;g<b.length;g++){var x=b[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}return function(y,b,g){return b&&w(y.prototype,b),g&&w(y,g),y}}(),o=function w(y,b,g){y===null&&(y=Function.prototype);var x=Object.getOwnPropertyDescriptor(y,b);if(x===void 0){var j=Object.getPrototypeOf(y);return j===null?void 0:w(j,b,g)}else{if("value"in x)return x.value;var N=x.get;return N===void 0?void 0:N.call(g)}},l=i(6),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function u(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function m(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var p=function(w){m(y,w);function y(){return f(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,[{key:"optimize",value:function(g){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),y}(d.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var a=function(){function R(E,F){var O=[],M=!0,Z=!1,X=void 0;try{for(var z=E[Symbol.iterator](),D;!(M=(D=z.next()).done)&&(O.push(D.value),!(F&&O.length===F));M=!0);}catch(B){Z=!0,X=B}finally{try{!M&&z.return&&z.return()}finally{if(Z)throw X}}return O}return function(E,F){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return R(E,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function R(E,F){for(var O=0;O<F.length;O++){var M=F[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(E,M.key,M)}}return function(E,F,O){return F&&R(E.prototype,F),O&&R(E,O),E}}(),l=i(2),d=g(l),h=i(0),f=g(h),u=i(5),m=g(u),p=i(10),w=g(p),y=i(9),b=g(y);function g(R){return R&&R.__esModule?R:{default:R}}function x(R,E,F){return E in R?Object.defineProperty(R,E,{value:F,enumerable:!0,configurable:!0,writable:!0}):R[E]=F,R}function j(R,E){if(!(R instanceof E))throw new TypeError("Cannot call a class as a function")}function N(R,E){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:R}function S(R,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);R.prototype=Object.create(E&&E.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(R,E):R.__proto__=E)}var C=(0,w.default)("quill:toolbar"),T=function(R){S(E,R);function E(F,O){j(this,E);var M=N(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,F,O));if(Array.isArray(M.options.container)){var Z=document.createElement("div");I(Z,M.options.container),F.container.parentNode.insertBefore(Z,F.container),M.container=Z}else typeof M.options.container=="string"?M.container=document.querySelector(M.options.container):M.container=M.options.container;if(!(M.container instanceof HTMLElement)){var X;return X=C.error("Container required for toolbar",M.options),N(M,X)}return M.container.classList.add("ql-toolbar"),M.controls=[],M.handlers={},Object.keys(M.options.handlers).forEach(function(z){M.addHandler(z,M.options.handlers[z])}),[].forEach.call(M.container.querySelectorAll("button, select"),function(z){M.attach(z)}),M.quill.on(m.default.events.EDITOR_CHANGE,function(z,D){z===m.default.events.SELECTION_CHANGE&&M.update(D)}),M.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var z=M.quill.selection.getRange(),D=a(z,1),B=D[0];M.update(B)}),M}return o(E,[{key:"addHandler",value:function(O,M){this.handlers[O]=M}},{key:"attach",value:function(O){var M=this,Z=[].find.call(O.classList,function(z){return z.indexOf("ql-")===0});if(Z){if(Z=Z.slice(3),O.tagName==="BUTTON"&&O.setAttribute("type","button"),this.handlers[Z]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Z]==null){C.warn("ignoring attaching to disabled format",Z,O);return}if(f.default.query(Z)==null){C.warn("ignoring attaching to nonexistent format",Z,O);return}}var X=O.tagName==="SELECT"?"change":"click";O.addEventListener(X,function(z){var D=void 0;if(O.tagName==="SELECT"){if(O.selectedIndex<0)return;var B=O.options[O.selectedIndex];B.hasAttribute("selected")?D=!1:D=B.value||!1}else O.classList.contains("ql-active")?D=!1:D=O.value||!O.hasAttribute("value"),z.preventDefault();M.quill.focus();var V=M.quill.selection.getRange(),H=a(V,1),q=H[0];if(M.handlers[Z]!=null)M.handlers[Z].call(M,D);else if(f.default.query(Z).prototype instanceof f.default.Embed){if(D=prompt("Enter "+Z),!D)return;M.quill.updateContents(new d.default().retain(q.index).delete(q.length).insert(x({},Z,D)),m.default.sources.USER)}else M.quill.format(Z,D,m.default.sources.USER);M.update(q)}),this.controls.push([Z,O])}}},{key:"update",value:function(O){var M=O==null?{}:this.quill.getFormat(O);this.controls.forEach(function(Z){var X=a(Z,2),z=X[0],D=X[1];if(D.tagName==="SELECT"){var B=void 0;if(O==null)B=null;else if(M[z]==null)B=D.querySelector("option[selected]");else if(!Array.isArray(M[z])){var V=M[z];typeof V=="string"&&(V=V.replace(/\"/g,'\\"')),B=D.querySelector('option[value="'+V+'"]')}B==null?(D.value="",D.selectedIndex=-1):B.selected=!0}else if(O==null)D.classList.remove("ql-active");else if(D.hasAttribute("value")){var H=M[z]===D.getAttribute("value")||M[z]!=null&&M[z].toString()===D.getAttribute("value")||M[z]==null&&!D.getAttribute("value");D.classList.toggle("ql-active",H)}else D.classList.toggle("ql-active",M[z]!=null)})}}]),E}(b.default);T.DEFAULTS={};function A(R,E,F){var O=document.createElement("button");O.setAttribute("type","button"),O.classList.add("ql-"+E),F!=null&&(O.value=F),R.appendChild(O)}function I(R,E){Array.isArray(E[0])||(E=[E]),E.forEach(function(F){var O=document.createElement("span");O.classList.add("ql-formats"),F.forEach(function(M){if(typeof M=="string")A(O,M);else{var Z=Object.keys(M)[0],X=M[Z];Array.isArray(X)?P(O,Z,X):A(O,Z,X)}}),R.appendChild(O)})}function P(R,E,F){var O=document.createElement("select");O.classList.add("ql-"+E),F.forEach(function(M){var Z=document.createElement("option");M!==!1?Z.setAttribute("value",M):Z.setAttribute("selected","selected"),O.appendChild(Z)}),R.appendChild(O)}T.DEFAULTS={container:null,handlers:{clean:function(){var E=this,F=this.quill.getSelection();if(F!=null)if(F.length==0){var O=this.quill.getFormat();Object.keys(O).forEach(function(M){f.default.query(M,f.default.Scope.INLINE)!=null&&E.quill.format(M,!1)})}else this.quill.removeFormat(F,m.default.sources.USER)},direction:function(E){var F=this.quill.getFormat().align;E==="rtl"&&F==null?this.quill.format("align","right",m.default.sources.USER):!E&&F==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",E,m.default.sources.USER)},indent:function(E){var F=this.quill.getSelection(),O=this.quill.getFormat(F),M=parseInt(O.indent||0);if(E==="+1"||E==="-1"){var Z=E==="+1"?1:-1;O.direction==="rtl"&&(Z*=-1),this.quill.format("indent",M+Z,m.default.sources.USER)}},link:function(E){E===!0&&(E=prompt("Enter link URL:")),this.quill.format("link",E,m.default.sources.USER)},list:function(E){var F=this.quill.getSelection(),O=this.quill.getFormat(F);E==="check"?O.list==="checked"||O.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",E,m.default.sources.USER)}}},r.default=T,r.addControls=I},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(y,b){for(var g=0;g<b.length;g++){var x=b[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}return function(y,b,g){return b&&w(y.prototype,b),g&&w(y,g),y}}(),o=function w(y,b,g){y===null&&(y=Function.prototype);var x=Object.getOwnPropertyDescriptor(y,b);if(x===void 0){var j=Object.getPrototypeOf(y);return j===null?void 0:w(j,b,g)}else{if("value"in x)return x.value;var N=x.get;return N===void 0?void 0:N.call(g)}},l=i(28),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function u(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function m(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var p=function(w){m(y,w);function y(b,g){f(this,y);var x=u(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,b));return x.label.innerHTML=g,x.container.classList.add("ql-color-picker"),[].slice.call(x.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(j){j.classList.add("ql-primary")}),x}return a(y,[{key:"buildItem",value:function(g){var x=o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"buildItem",this).call(this,g);return x.style.backgroundColor=g.getAttribute("value")||"",x}},{key:"selectItem",value:function(g,x){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,g,x);var j=this.label.querySelector(".ql-color-label"),N=g&&g.getAttribute("data-value")||"";j&&(j.tagName==="line"?j.style.stroke=N:j.style.fill=N)}}]),y}(d.default);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(y,b){for(var g=0;g<b.length;g++){var x=b[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}return function(y,b,g){return b&&w(y.prototype,b),g&&w(y,g),y}}(),o=function w(y,b,g){y===null&&(y=Function.prototype);var x=Object.getOwnPropertyDescriptor(y,b);if(x===void 0){var j=Object.getPrototypeOf(y);return j===null?void 0:w(j,b,g)}else{if("value"in x)return x.value;var N=x.get;return N===void 0?void 0:N.call(g)}},l=i(28),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function u(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function m(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var p=function(w){m(y,w);function y(b,g){f(this,y);var x=u(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,b));return x.container.classList.add("ql-icon-picker"),[].forEach.call(x.container.querySelectorAll(".ql-picker-item"),function(j){j.innerHTML=g[j.getAttribute("data-value")||""]}),x.defaultItem=x.container.querySelector(".ql-selected"),x.selectItem(x.defaultItem),x}return a(y,[{key:"selectItem",value:function(g,x){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"selectItem",this).call(this,g,x),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),y}(d.default);r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function d(h,f){for(var u=0;u<f.length;u++){var m=f[u];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(h,m.key,m)}}return function(h,f,u){return f&&d(h.prototype,f),u&&d(h,u),h}}();function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}var l=function(){function d(h,f){var u=this;o(this,d),this.quill=h,this.boundsContainer=f||document.body,this.root=h.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){u.root.style.marginTop=-1*u.quill.root.scrollTop+"px"}),this.hide()}return a(d,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var u=f.left+f.width/2-this.root.offsetWidth/2,m=f.bottom+this.quill.root.scrollTop;this.root.style.left=u+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),w=this.root.getBoundingClientRect(),y=0;if(w.right>p.right&&(y=p.right-w.right,this.root.style.left=u+y+"px"),w.left<p.left&&(y=p.left-w.left,this.root.style.left=u+y+"px"),w.bottom>p.bottom){var b=w.bottom-w.top,g=f.bottom-f.top+b;this.root.style.top=m-g+"px",this.root.classList.add("ql-flip")}return y}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),d}();r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function P(R,E){var F=[],O=!0,M=!1,Z=void 0;try{for(var X=R[Symbol.iterator](),z;!(O=(z=X.next()).done)&&(F.push(z.value),!(E&&F.length===E));O=!0);}catch(D){M=!0,Z=D}finally{try{!O&&X.return&&X.return()}finally{if(M)throw Z}}return F}return function(R,E){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return P(R,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function P(R,E,F){R===null&&(R=Function.prototype);var O=Object.getOwnPropertyDescriptor(R,E);if(O===void 0){var M=Object.getPrototypeOf(R);return M===null?void 0:P(M,E,F)}else{if("value"in O)return O.value;var Z=O.get;return Z===void 0?void 0:Z.call(F)}},l=function(){function P(R,E){for(var F=0;F<E.length;F++){var O=E[F];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(R,O.key,O)}}return function(R,E,F){return E&&P(R.prototype,E),F&&P(R,F),R}}(),d=i(3),h=j(d),f=i(8),u=j(f),m=i(43),p=j(m),w=i(27),y=j(w),b=i(15),g=i(41),x=j(g);function j(P){return P&&P.__esModule?P:{default:P}}function N(P,R){if(!(P instanceof R))throw new TypeError("Cannot call a class as a function")}function S(P,R){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:P}function C(P,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);P.prototype=Object.create(R&&R.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(P,R):P.__proto__=R)}var T=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],A=function(P){C(R,P);function R(E,F){N(this,R),F.modules.toolbar!=null&&F.modules.toolbar.container==null&&(F.modules.toolbar.container=T);var O=S(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,E,F));return O.quill.container.classList.add("ql-snow"),O}return l(R,[{key:"extendToolbar",value:function(F){F.container.classList.add("ql-snow"),this.buildButtons([].slice.call(F.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(F.container.querySelectorAll("select")),x.default),this.tooltip=new I(this.quill,this.options.bounds),F.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(O,M){F.handlers.link.call(F,!M.format.link)})}}]),R}(p.default);A.DEFAULTS=(0,h.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){if(R){var E=this.quill.getSelection();if(E==null||E.length==0)return;var F=this.quill.getText(E);/^\S+@\S+\.\S+$/.test(F)&&F.indexOf("mailto:")!==0&&(F="mailto:"+F);var O=this.quill.theme.tooltip;O.edit("link",F)}else this.quill.format("link",!1)}}}}});var I=function(P){C(R,P);function R(E,F){N(this,R);var O=S(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,E,F));return O.preview=O.root.querySelector("a.ql-preview"),O}return l(R,[{key:"listen",value:function(){var F=this;o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(O){F.root.classList.contains("ql-editing")?F.save():F.edit("link",F.preview.textContent),O.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(O){if(F.linkRange!=null){var M=F.linkRange;F.restoreFocus(),F.quill.formatText(M,"link",!1,u.default.sources.USER),delete F.linkRange}O.preventDefault(),F.hide()}),this.quill.on(u.default.events.SELECTION_CHANGE,function(O,M,Z){if(O!=null){if(O.length===0&&Z===u.default.sources.USER){var X=F.quill.scroll.descendant(y.default,O.index),z=a(X,2),D=z[0],B=z[1];if(D!=null){F.linkRange=new b.Range(O.index-B,D.length());var V=y.default.formats(D.domNode);F.preview.textContent=V,F.preview.setAttribute("href",V),F.show(),F.position(F.quill.getBounds(F.linkRange));return}}else delete F.linkRange;F.hide()}})}},{key:"show",value:function(){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),R}(m.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(29),o=oe(a),l=i(36),d=i(38),h=i(64),f=i(65),u=oe(f),m=i(66),p=oe(m),w=i(67),y=oe(w),b=i(37),g=i(26),x=i(39),j=i(40),N=i(56),S=oe(N),C=i(68),T=oe(C),A=i(27),I=oe(A),P=i(69),R=oe(P),E=i(70),F=oe(E),O=i(71),M=oe(O),Z=i(72),X=oe(Z),z=i(73),D=oe(z),B=i(13),V=oe(B),H=i(74),q=oe(H),W=i(75),Y=oe(W),U=i(57),G=oe(U),ne=i(41),J=oe(ne),ie=i(28),xe=oe(ie),Se=i(59),ue=oe(Se),he=i(60),Q=oe(he),ye=i(61),be=oe(ye),ce=i(108),ge=oe(ce),ee=i(62),ae=oe(ee);function oe(ke){return ke&&ke.__esModule?ke:{default:ke}}o.default.register({"attributors/attribute/direction":d.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":b.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":d.DirectionClass,"attributors/class/font":x.FontClass,"attributors/class/size":j.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":b.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":d.DirectionStyle,"attributors/style/font":x.FontStyle,"attributors/style/size":j.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":d.DirectionClass,"formats/indent":h.IndentClass,"formats/background":b.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":x.FontClass,"formats/size":j.SizeClass,"formats/blockquote":u.default,"formats/code-block":V.default,"formats/header":p.default,"formats/list":y.default,"formats/bold":S.default,"formats/code":B.Code,"formats/italic":T.default,"formats/link":I.default,"formats/script":R.default,"formats/strike":F.default,"formats/underline":M.default,"formats/image":X.default,"formats/video":D.default,"formats/list/item":w.ListItem,"modules/formula":q.default,"modules/syntax":Y.default,"modules/toolbar":G.default,"themes/bubble":ge.default,"themes/snow":ae.default,"ui/icons":J.default,"ui/picker":xe.default,"ui/icon-picker":Q.default,"ui/color-picker":ue.default,"ui/tooltip":be.default},!0),r.default=o.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var a=function(){function y(b,g){for(var x=0;x<g.length;x++){var j=g[x];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,j.key,j)}}return function(b,g,x){return g&&y(b.prototype,g),x&&y(b,x),b}}(),o=function y(b,g,x){b===null&&(b=Function.prototype);var j=Object.getOwnPropertyDescriptor(b,g);if(j===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:y(N,g,x)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(x)}},l=i(0),d=h(l);function h(y){return y&&y.__esModule?y:{default:y}}function f(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function u(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function m(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var p=function(y){m(b,y);function b(){return f(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return a(b,[{key:"add",value:function(x,j){if(j==="+1"||j==="-1"){var N=this.value(x)||0;j=j==="+1"?N+1:N-1}return j===0?(this.remove(x),!0):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"add",this).call(this,x,j)}},{key:"canAdd",value:function(x,j){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,x,j)||o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,x,parseInt(j))}},{key:"value",value:function(x){return parseInt(o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,x))||void 0}}]),b}(d.default.Attributor.Class),w=new p("indent","ql-indent",{scope:d.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(4),o=l(a);function l(m){return m&&m.__esModule?m:{default:m}}function d(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function h(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){f(p,m);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="blockquote",u.tagName="blockquote",r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function p(w,y){for(var b=0;b<y.length;b++){var g=y[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(w,g.key,g)}}return function(w,y,b){return y&&p(w.prototype,y),b&&p(w,b),w}}(),o=i(4),l=d(o);function d(p){return p&&p.__esModule?p:{default:p}}function h(p,w){if(!(p instanceof w))throw new TypeError("Cannot call a class as a function")}function f(p,w){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:p}function u(p,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);p.prototype=Object.create(w&&w.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(p,w):p.__proto__=w)}var m=function(p){u(w,p);function w(){return h(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return a(w,null,[{key:"formats",value:function(b){return this.tagName.indexOf(b.tagName)+1}}]),w}(l.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var a=function(){function N(S,C){for(var T=0;T<C.length;T++){var A=C[T];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(S,A.key,A)}}return function(S,C,T){return C&&N(S.prototype,C),T&&N(S,T),S}}(),o=function N(S,C,T){S===null&&(S=Function.prototype);var A=Object.getOwnPropertyDescriptor(S,C);if(A===void 0){var I=Object.getPrototypeOf(S);return I===null?void 0:N(I,C,T)}else{if("value"in A)return A.value;var P=A.get;return P===void 0?void 0:P.call(T)}},l=i(0),d=p(l),h=i(4),f=p(h),u=i(25),m=p(u);function p(N){return N&&N.__esModule?N:{default:N}}function w(N,S,C){return S in N?Object.defineProperty(N,S,{value:C,enumerable:!0,configurable:!0,writable:!0}):N[S]=C,N}function y(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function b(N,S){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:N}function g(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);N.prototype=Object.create(S&&S.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(N,S):N.__proto__=S)}var x=function(N){g(S,N);function S(){return y(this,S),b(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return a(S,[{key:"format",value:function(T,A){T===j.blotName&&!A?this.replaceWith(d.default.create(this.statics.scope)):o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,T,A)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(T,A){return this.parent.isolate(this.offset(this.parent),this.length()),T===this.parent.statics.blotName?(this.parent.replaceWith(T,A),this):(this.parent.unwrap(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,T,A))}}],[{key:"formats",value:function(T){return T.tagName===this.tagName?void 0:o(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,T)}}]),S}(f.default);x.blotName="list-item",x.tagName="LI";var j=function(N){g(S,N),a(S,null,[{key:"create",value:function(T){var A=T==="ordered"?"OL":"UL",I=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,A);return(T==="checked"||T==="unchecked")&&I.setAttribute("data-checked",T==="checked"),I}},{key:"formats",value:function(T){if(T.tagName==="OL")return"ordered";if(T.tagName==="UL")return T.hasAttribute("data-checked")?T.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(C){y(this,S);var T=b(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,C)),A=function(P){if(P.target.parentNode===C){var R=T.statics.formats(C),E=d.default.find(P.target);R==="checked"?E.format("list","unchecked"):R==="unchecked"&&E.format("list","checked")}};return C.addEventListener("touchstart",A),C.addEventListener("mousedown",A),T}return a(S,[{key:"format",value:function(T,A){this.children.length>0&&this.children.tail.format(T,A)}},{key:"formats",value:function(){return w({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(T,A){if(T instanceof x)o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,T,A);else{var I=A==null?this.length():A.offset(this),P=this.split(I);P.parent.insertBefore(T,P)}}},{key:"optimize",value:function(T){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,T);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&A.domNode.tagName===this.domNode.tagName&&A.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(A.moveChildren(this),A.remove())}},{key:"replace",value:function(T){if(T.statics.blotName!==this.statics.blotName){var A=d.default.create(this.statics.defaultChild);T.moveChildren(A),this.appendChild(A)}o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,T)}}]),S}(m.default);j.blotName="list",j.scope=d.default.Scope.BLOCK_BLOT,j.tagName=["OL","UL"],j.defaultChild="list-item",j.allowedChildren=[x],r.ListItem=x,r.default=j},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(56),o=l(a);function l(m){return m&&m.__esModule?m:{default:m}}function d(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function h(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){f(p,m);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="italic",u.tagName=["EM","I"],r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function w(y,b){for(var g=0;g<b.length;g++){var x=b[g];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(y,x.key,x)}}return function(y,b,g){return b&&w(y.prototype,b),g&&w(y,g),y}}(),o=function w(y,b,g){y===null&&(y=Function.prototype);var x=Object.getOwnPropertyDescriptor(y,b);if(x===void 0){var j=Object.getPrototypeOf(y);return j===null?void 0:w(j,b,g)}else{if("value"in x)return x.value;var N=x.get;return N===void 0?void 0:N.call(g)}},l=i(6),d=h(l);function h(w){return w&&w.__esModule?w:{default:w}}function f(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function u(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function m(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var p=function(w){m(y,w);function y(){return f(this,y),u(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return a(y,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),y}(d.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=l(a);function l(m){return m&&m.__esModule?m:{default:m}}function d(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function h(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){f(p,m);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="strike",u.tagName="S",r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=l(a);function l(m){return m&&m.__esModule?m:{default:m}}function d(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function h(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var u=function(m){f(p,m);function p(){return d(this,p),h(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);u.blotName="underline",u.tagName="U",r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function b(g,x){for(var j=0;j<x.length;j++){var N=x[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}return function(g,x,j){return x&&b(g.prototype,x),j&&b(g,j),g}}(),o=function b(g,x,j){g===null&&(g=Function.prototype);var N=Object.getOwnPropertyDescriptor(g,x);if(N===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:b(S,x,j)}else{if("value"in N)return N.value;var C=N.get;return C===void 0?void 0:C.call(j)}},l=i(0),d=f(l),h=i(27);function f(b){return b&&b.__esModule?b:{default:b}}function u(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function m(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function p(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var w=["alt","height","width"],y=function(b){p(g,b);function g(){return u(this,g),m(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"format",value:function(j,N){w.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,j);return typeof j=="string"&&N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return w.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"match",value:function(j){return/\.(jpe?g|gif|png)$/.test(j)||/^data:image\/.+;base64/.test(j)}},{key:"sanitize",value:function(j){return(0,h.sanitize)(j,["http","https","data"])?j:"//:0"}},{key:"value",value:function(j){return j.getAttribute("src")}}]),g}(d.default.Embed);y.blotName="image",y.tagName="IMG",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function b(g,x){for(var j=0;j<x.length;j++){var N=x[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}return function(g,x,j){return x&&b(g.prototype,x),j&&b(g,j),g}}(),o=function b(g,x,j){g===null&&(g=Function.prototype);var N=Object.getOwnPropertyDescriptor(g,x);if(N===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:b(S,x,j)}else{if("value"in N)return N.value;var C=N.get;return C===void 0?void 0:C.call(j)}},l=i(4),d=i(27),h=f(d);function f(b){return b&&b.__esModule?b:{default:b}}function u(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function m(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function p(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var w=["height","width"],y=function(b){p(g,b);function g(){return u(this,g),m(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return a(g,[{key:"format",value:function(j,N){w.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,j);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return w.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"sanitize",value:function(j){return h.default.sanitize(j)}},{key:"value",value:function(j){return j.getAttribute("src")}}]),g}(l.BlockEmbed);y.blotName="video",y.className="ql-video",y.tagName="IFRAME",r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var a=function(){function j(N,S){for(var C=0;C<S.length;C++){var T=S[C];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(N,T.key,T)}}return function(N,S,C){return S&&j(N.prototype,S),C&&j(N,C),N}}(),o=function j(N,S,C){N===null&&(N=Function.prototype);var T=Object.getOwnPropertyDescriptor(N,S);if(T===void 0){var A=Object.getPrototypeOf(N);return A===null?void 0:j(A,S,C)}else{if("value"in T)return T.value;var I=T.get;return I===void 0?void 0:I.call(C)}},l=i(35),d=p(l),h=i(5),f=p(h),u=i(9),m=p(u);function p(j){return j&&j.__esModule?j:{default:j}}function w(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function y(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function b(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var g=function(j){b(N,j);function N(){return w(this,N),y(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return a(N,null,[{key:"create",value:function(C){var T=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,C);return typeof C=="string"&&(window.katex.render(C,T,{throwOnError:!1,errorColor:"#f00"}),T.setAttribute("data-value",C)),T}},{key:"value",value:function(C){return C.getAttribute("data-value")}}]),N}(d.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var x=function(j){b(N,j),a(N,null,[{key:"register",value:function(){f.default.register(g,!0)}}]);function N(){w(this,N);var S=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return N}(m.default);r.FormulaBlot=g,r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var a=function(){function C(T,A){for(var I=0;I<A.length;I++){var P=A[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(T,P.key,P)}}return function(T,A,I){return A&&C(T.prototype,A),I&&C(T,I),T}}(),o=function C(T,A,I){T===null&&(T=Function.prototype);var P=Object.getOwnPropertyDescriptor(T,A);if(P===void 0){var R=Object.getPrototypeOf(T);return R===null?void 0:C(R,A,I)}else{if("value"in P)return P.value;var E=P.get;return E===void 0?void 0:E.call(I)}},l=i(0),d=y(l),h=i(5),f=y(h),u=i(9),m=y(u),p=i(13),w=y(p);function y(C){return C&&C.__esModule?C:{default:C}}function b(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")}function g(C,T){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:C}function x(C,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);C.prototype=Object.create(T&&T.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(C,T):C.__proto__=T)}var j=function(C){x(T,C);function T(){return b(this,T),g(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return a(T,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var P=this.domNode.textContent;this.cachedText!==P&&((P.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(P),this.domNode.normalize(),this.attach()),this.cachedText=P)}}]),T}(w.default);j.className="ql-syntax";var N=new d.default.Attributor.Class("token","hljs",{scope:d.default.Scope.INLINE}),S=function(C){x(T,C),a(T,null,[{key:"register",value:function(){f.default.register(N,!0),f.default.register(j,!0)}}]);function T(A,I){b(this,T);var P=g(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,A,I));if(typeof P.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var R=null;return P.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(R),R=setTimeout(function(){P.highlight(),R=null},P.options.interval)}),P.highlight(),P}return a(T,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var P=this.quill.getSelection();this.quill.scroll.descendants(j).forEach(function(R){R.highlight(I.options.highlight)}),this.quill.update(f.default.sources.SILENT),P!=null&&this.quill.setSelection(P,f.default.sources.SILENT)}}}]),T}(m.default);S.DEFAULTS={highlight:function(){return window.hljs==null?null:function(C){var T=window.hljs.highlightAuto(C);return T.value}}(),interval:1e3},r.CodeBlock=j,r.CodeToken=N,r.default=S},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var a=function T(A,I,P){A===null&&(A=Function.prototype);var R=Object.getOwnPropertyDescriptor(A,I);if(R===void 0){var E=Object.getPrototypeOf(A);return E===null?void 0:T(E,I,P)}else{if("value"in R)return R.value;var F=R.get;return F===void 0?void 0:F.call(P)}},o=function(){function T(A,I){for(var P=0;P<I.length;P++){var R=I[P];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,I,P){return I&&T(A.prototype,I),P&&T(A,P),A}}(),l=i(3),d=b(l),h=i(8),f=b(h),u=i(43),m=b(u),p=i(15),w=i(41),y=b(w);function b(T){return T&&T.__esModule?T:{default:T}}function g(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}function x(T,A){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:T}function j(T,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);T.prototype=Object.create(A&&A.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(T,A):T.__proto__=A)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=function(T){j(A,T);function A(I,P){g(this,A),P.modules.toolbar!=null&&P.modules.toolbar.container==null&&(P.modules.toolbar.container=N);var R=x(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,I,P));return R.quill.container.classList.add("ql-bubble"),R}return o(A,[{key:"extendToolbar",value:function(P){this.tooltip=new C(this.quill,this.options.bounds),this.tooltip.root.appendChild(P.container),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),y.default)}}]),A}(m.default);S.DEFAULTS=(0,d.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){A?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var C=function(T){j(A,T);function A(I,P){g(this,A);var R=x(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,I,P));return R.quill.on(f.default.events.EDITOR_CHANGE,function(E,F,O,M){if(E===f.default.events.SELECTION_CHANGE)if(F!=null&&F.length>0&&M===f.default.sources.USER){R.show(),R.root.style.left="0px",R.root.style.width="",R.root.style.width=R.root.offsetWidth+"px";var Z=R.quill.getLines(F.index,F.length);if(Z.length===1)R.position(R.quill.getBounds(F));else{var X=Z[Z.length-1],z=R.quill.getIndex(X),D=Math.min(X.length()-1,F.index+F.length-z),B=R.quill.getBounds(new p.Range(z,D));R.position(B)}}else document.activeElement!==R.textbox&&R.quill.hasFocus()&&R.hide()}),R}return o(A,[{key:"listen",value:function(){var P=this;a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){P.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!P.root.classList.contains("ql-hidden")){var R=P.quill.getSelection();R!=null&&P.position(P.quill.getBounds(R))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(P){var R=a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"position",this).call(this,P),E=this.root.querySelector(".ql-tooltip-arrow");if(E.style.marginLeft="",R===0)return R;E.style.marginLeft=-1*R-E.offsetWidth/2+"px"}}]),A}(u.BaseTooltip);C.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=C,r.default=S},function(n,r,i){n.exports=i(63)}]).default})})(F4);var sre=F4.exports,nre=Oi&&Oi.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gp=Oi&&Oi.__assign||function(){return gp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},gp.apply(this,arguments)},rre=Oi&&Oi.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,l=a.length;o<l;o++,i++)r[i]=a[o];return r},Ig=Oi&&Oi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},hi=Ig(_),ire=Ig(fo),Qd=Ig(tre),o2=Ig(sre),are=function(e){nre(t,e);function t(n){var r=e.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(a,o,l,d){var h,f,u,m;a==="text-change"?(f=(h=r).onEditorChangeText)===null||f===void 0||f.call(h,r.editor.root.innerHTML,o,d,r.unprivilegedEditor):a==="selection-change"&&((m=(u=r).onEditorChangeSelection)===null||m===void 0||m.call(u,o,d,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return t.prototype.validateProps=function(n){var r;if(hi.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(hi.default.Children.count(n.children)){var i=hi.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(n,r){var i=this,a;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var o=this.getEditorContents(),l=(a=n.value,a??"");this.isEqualValue(l,o)||this.setEditorContents(this.editor,l)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),rre(this.cleanProps,this.dirtyProps).some(function(d){return!Qd.default(n[d],i.props[d])})},t.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!Qd.default(n[i],r.props[i])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var a=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:a,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var l=this.regenerationSnapshot,a=l.delta,d=l.selection;delete this.regenerationSnapshot,this.instantiateEditor();var h=this.editor;h.setContents(a),l2(function(){return i.setEditorSelection(h,d)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(n,r){var i=new o2.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},t.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(n){return n&&n.ops},t.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?Qd.default(n.ops,r.ops):Qd.default(n,r)},t.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var a=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),l2(function(){return i.setEditorSelection(n,a)})},t.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},t.prototype.setEditorTabIndex=function(n,r){var i,a;!((a=(i=n)===null||i===void 0?void 0:i.scroll)===null||a===void 0)&&a.domNode&&(n.scroll.domNode.tabIndex=r)},t.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},t.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=ire.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},t.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,a=r.preserveWhitespace,o=this.state.generation,l={key:o,ref:function(d){n.editingArea=d}};return hi.default.Children.count(i)?hi.default.cloneElement(hi.default.Children.only(i),l):a?hi.default.createElement("pre",gp({},l)):hi.default.createElement("div",gp({},l))},t.prototype.render=function(){var n;return hi.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(n,r,i,a){var o,l;if(this.editor){var d=this.isDelta(this.value)?a.getContents():a.getHTML();d!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=d,(l=(o=this.props).onChange)===null||l===void 0||l.call(o,n,r,i,a))}},t.prototype.onEditorChangeSelection=function(n,r,i){var a,o,l,d,h,f;if(this.editor){var u=this.getEditorSelection(),m=!u&&n,p=u&&!n;Qd.default(n,u)||(this.selection=n,(o=(a=this.props).onChangeSelection)===null||o===void 0||o.call(a,n,r,i),m?(d=(l=this.props).onFocus)===null||d===void 0||d.call(l,n,r,i):p&&((f=(h=this.props).onBlur)===null||f===void 0||f.call(h,u,r,i)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=o2.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(hi.default.Component);function l2(e){Promise.resolve().then(e)}var ore=are;const $4=vl(ore);var Mg="Switch",[lre,uae]=_n(Mg),[cre,dre]=lre(Mg),B4=_.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:d="on",onCheckedChange:h,form:f,...u}=e,[m,p]=_.useState(null),w=jt(t,j=>p(j)),y=_.useRef(!1),b=m?f||!!m.closest("form"):!0,[g,x]=ei({prop:i,defaultProp:a??!1,onChange:h,caller:Mg});return s.jsxs(cre,{scope:n,checked:g,disabled:l,children:[s.jsx(ut.button,{type:"button",role:"switch","aria-checked":g,"aria-required":o,"data-state":q4(g),"data-disabled":l?"":void 0,disabled:l,value:d,...u,ref:w,onClick:Ke(e.onClick,j=>{x(N=>!N),b&&(y.current=j.isPropagationStopped(),y.current||j.stopPropagation())})}),b&&s.jsx(U4,{control:m,bubbles:!y.current,name:r,value:d,checked:g,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});B4.displayName=Mg;var z4="SwitchThumb",V4=_.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=dre(z4,n);return s.jsx(ut.span,{"data-state":q4(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});V4.displayName=z4;var ure="SwitchBubbleInput",U4=_.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...i},a)=>{const o=_.useRef(null),l=jt(o,a),d=sg(n),h=Hp(t);return _.useEffect(()=>{const f=o.current;if(!f)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(d!==n&&p){const w=new Event("click",{bubbles:r});p.call(f,n),f.dispatchEvent(w)}},[d,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});U4.displayName=ure;function q4(e){return e?"checked":"unchecked"}var H4=B4,hre=V4;const zt=_.forwardRef(({className:e,...t},n)=>s.jsx(H4,{className:at("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(hre,{className:at("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));zt.displayName=H4.displayName;const W4=({productData:e})=>{const{name:t,category:n,price:r,comparePrice:i,images:a,description:o,tags:l,dynamicFields:d,shortDescription:h,featured:f,status:u}=e,m=i&&r?Math.round((i-r)/i*100):0;return s.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[s.jsx(De,{children:s.jsx($e,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"space-y-4",children:a&&a.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:s.jsx("img",{src:a[0],alt:t,className:"w-full h-full object-cover"})}),a.length>1&&s.jsx("div",{className:"grid grid-cols-4 gap-2",children:a.slice(1,5).map((p,w)=>s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:s.jsx("img",{src:p,alt:`${t} ${w+2}`,className:"w-full h-full object-cover cursor-pointer hover:opacity-80"})},w))})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ze,{variant:"outline",children:n}),f&&s.jsx(Ze,{className:"bg-yellow-100 text-yellow-800",children:"Featured"}),s.jsx(Ze,{variant:u==="active"?"default":"secondary",children:u})]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:t}),h&&s.jsx("p",{className:"text-gray-600 mb-4",children:h})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((p,w)=>s.jsx(Rs,{className:"h-4 w-4 fill-current"},w))}),s.jsx("span",{className:"text-sm text-gray-600",children:"(4.8) 124 reviews"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["",r==null?void 0:r.toLocaleString()]}),i&&i>r&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-lg text-gray-500 line-through",children:["",i.toLocaleString()]}),s.jsxs(Ze,{className:"bg-green-100 text-green-800",children:[m,"% OFF"]})]})]}),s.jsx("p",{className:"text-sm text-green-600",children:"Inclusive of all taxes"})]}),s.jsx(Pi,{}),d&&Object.keys(d).length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Product Details"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(d).map(([p,w])=>w?s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600 capitalize",children:[p.replace(/([A-Z])/g," $1").trim(),":"]}),s.jsx("span",{className:"font-medium",children:Array.isArray(w)?w.join(", "):String(w)})]},p):null)})]}),s.jsx(Pi,{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(se,{className:"flex-1",children:[s.jsx(nn,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),s.jsx(se,{variant:"outline",size:"icon",children:s.jsx(cr,{className:"h-4 w-4"})}),s.jsx(se,{variant:"outline",size:"icon",children:s.jsx(Eh,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(Cr,{className:"h-6 w-6 mx-auto mb-1 text-blue-600"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Free Delivery"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(Qn,{className:"h-6 w-6 mx-auto mb-1 text-green-600"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Secure Payment"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx(Ro,{className:"h-6 w-6 mx-auto mb-1 text-orange-600"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Easy Returns"})]})]})]})]})})}),o&&s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{children:"Product Description"})}),s.jsx($e,{children:s.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:o}})})]}),l&&l.length>0&&s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{children:"Tags"})}),s.jsx($e,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(p=>s.jsx(Ze,{variant:"secondary",children:p},p))})})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{children:"Similar Products"})}),s.jsx($e,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(p=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg"}),s.jsxs("p",{className:"text-sm font-medium",children:["Similar Product ",p]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["",(r*(.8+Math.random()*.4)).toFixed(0)]})]},p))})})]})]})},Ur={electronics:{name:"Electronics",description:"Electronic devices and gadgets",icon:"",fields:[{name:"brand",label:"Brand",type:"text",placeholder:"e.g., Samsung, Apple"},{name:"model",label:"Model",type:"text",placeholder:"e.g., Galaxy S24"},{name:"warranty",label:"Warranty",type:"select",options:["No Warranty","6 months","1 year","2 years"]}]},clothing:{name:"Clothing & Fashion",description:"Apparel and fashion accessories",icon:"",fields:[{name:"brand",label:"Brand",type:"text",placeholder:"Brand name"},{name:"size",label:"Sizes",type:"multiselect",options:["XS","S","M","L","XL","XXL"]},{name:"color",label:"Colors",type:"multiselect",options:["Black","White","Red","Blue","Green","Gray","Brown"]},{name:"material",label:"Material",type:"text",placeholder:"e.g., Cotton, Polyester"}]},food:{name:"Food & Beverages",description:"Fresh food and beverages",icon:"",fields:[{name:"cuisine",label:"Cuisine",type:"select",options:["Nepali","Indian","Chinese","Continental","Italian","Other"]},{name:"spiceLevel",label:"Spice Level",type:"select",options:["Mild","Medium","Hot"]},{name:"dietaryInfo",label:"Dietary",type:"multiselect",options:["Vegetarian","Vegan","Gluten-Free"]},{name:"servingSize",label:"Serving Size",type:"text",placeholder:"e.g., 1 plate, 250ml"}]},baby:{name:"Baby & Kids",description:"Products for babies and children",icon:"",fields:[{name:"ageGroup",label:"Age Group",type:"select",options:["0-6 months","6-12 months","1-2 years","2-4 years","4+ years"]},{name:"safetyFeatures",label:"Safety",type:"multiselect",options:["BPA Free","Non-Toxic","Organic"]}]},grocery:{name:"Grocery & Household",description:"Daily essentials and household items",icon:"",fields:[{name:"weight",label:"Weight/Volume",type:"text",placeholder:"e.g., 1kg, 500ml"},{name:"expiryDate",label:"Expiry Date",type:"date"},{name:"organic",label:"Organic",type:"boolean"}]},meat:{name:"Meat & Seafood",description:"Fresh meat and seafood",icon:"",fields:[{name:"cut",label:"Cut Type",type:"select",options:["Whole","Pieces","Minced","Fillet"]},{name:"freshness",label:"Freshness",type:"select",options:["Fresh","Frozen"]}]},medicine:{name:"Medicine & Health",description:"Medicines and health products",icon:"",fields:[{name:"dosage",label:"Dosage",type:"text",placeholder:"e.g., 500mg, 10ml"},{name:"form",label:"Form",type:"select",options:["Tablet","Capsule","Syrup","Injection","Cream","Drops"]},{name:"prescription",label:"Prescription Required",type:"boolean"}]}},fre=()=>Object.entries(Ur).map(([e,t])=>({value:e,label:t.name,description:t.description,icon:t.icon})),c2=e=>({meat:"kg",grocery:"piece",medicine:"unit",food:"plate",electronics:"piece",clothing:"piece",baby:"piece"})[e]||"piece",mre=w4({name:Ps().min(1,"Product name is required"),category:Ps().min(1,"Category is required"),subcategory:Ps().optional(),price:yi().min(0,"Price must be positive"),comparePrice:yi().optional(),costPrice:yi().optional(),sku:Ps().optional(),barcode:Ps().optional(),trackQuantity:bc().default(!0),quantity:yi().min(0,"Quantity must be positive"),lowStockThreshold:yi().min(0).optional(),description:Ps().min(1,"Description is required"),shortDescription:Ps().optional(),tags:hp(Ps()).default([]),images:hp(Ps()).min(1,"At least one image is required"),status:j4(["active","draft","archived"]).default("active"),featured:bc().default(!1),freeDelivery:bc().default(!1),seoTitle:Ps().optional(),seoDescription:Ps().optional(),dynamicFields:_4(F0()).default({})}),pre=()=>{const[e,t]=_.useState(""),[n,r]=_.useState([]),[i,a]=_.useState([]),[o,l]=_.useState(""),[d,h]=_.useState(!1),[f,u]=_.useState(!1),[m,p]=_.useState([]),[w,y]=_.useState([]),b=p4({resolver:v4(mre),defaultValues:{name:"",category:"",price:0,quantity:0,description:"",tags:[],images:[],status:"active",featured:!1,freeDelivery:!1,trackQuantity:!0,dynamicFields:{}}}),{control:g,handleSubmit:x,watch:j,setValue:N,formState:{errors:S}}=b,C=j("category");_.useEffect(()=>{var M;t(C),C&&((M=Ur[C])!=null&&M.subcategories)?y(Ur[C].subcategories):y([]),N("subcategory","")},[C,N]),_.useEffect(()=>{(async()=>{try{const{response:Z,data:X}=await Ve("/vendor-profiles/");if(Z.ok&&X&&X.length>0){const D=X[0].categories||[];p(D)}}catch(Z){console.error("Error fetching vendor profile:",Z)}})()},[N]);const T=M=>{const Z=M.target.files;if(Z){const X=Array.from(Z).map(z=>URL.createObjectURL(z));r(z=>[...z,...X]),N("images",[...n,...X])}},A=M=>{const Z=n.filter((X,z)=>z!==M);r(Z),N("images",Z)},I=()=>{if(o.trim()&&!i.includes(o.trim())){const M=[...i,o.trim()];a(M),N("tags",M),l("")}},P=M=>{const Z=i.filter(X=>X!==M);a(Z),N("tags",Z)},R=M=>{console.log("Product Data:",M)},E=M=>{const Z=`dynamicFields.${M.name}`;switch(M.type){case"text":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:g,rules:{required:M.required},render:({field:X})=>s.jsx(_e,{...X,placeholder:`Enter ${M.label.toLowerCase()}`})})]},M.name);case"number":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:g,rules:{required:M.required},render:({field:X})=>s.jsx(_e,{...X,type:"number",placeholder:`Enter ${M.label.toLowerCase()}`,onChange:z=>X.onChange(Number(z.target.value))})})]},M.name);case"select":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:g,rules:{required:M.required},render:({field:X})=>{var z;return s.jsxs(Zt,{onValueChange:X.onChange,value:X.value,children:[s.jsx(Wt,{children:s.jsx(Yt,{placeholder:`Select ${M.label.toLowerCase()}`})}),s.jsx(Gt,{children:(z=M.options)==null?void 0:z.map(D=>s.jsx(st,{value:D,children:D},D))})]})}})]},M.name);case"multiselect":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:g,rules:{required:M.required},render:({field:X})=>{var D;const z=X.value||[];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Zt,{onValueChange:B=>{z.includes(B)||X.onChange([...z,B])},children:[s.jsx(Wt,{children:s.jsx(Yt,{placeholder:`Select ${M.label.toLowerCase()}`})}),s.jsx(Gt,{children:(D=M.options)==null?void 0:D.map(B=>s.jsx(st,{value:B,children:B},B))})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(B=>s.jsxs(Ze,{variant:"secondary",className:"flex items-center gap-1",children:[B,s.jsx(tn,{className:"h-3 w-3 cursor-pointer",onClick:()=>{X.onChange(z.filter(V=>V!==B))}})]},B))})]})}})]},M.name);case"textarea":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:g,rules:{required:M.required},render:({field:X})=>s.jsx(Gs,{...X,placeholder:`Enter ${M.label.toLowerCase()}`})})]},M.name);case"boolean":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:Z,control:g,render:({field:X})=>s.jsx(zt,{checked:X.value,onCheckedChange:X.onChange})}),s.jsx(ve,{htmlFor:M.name,children:M.label})]},M.name);case"date":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:M.name,children:[M.label," ",M.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:Z,control:g,rules:{required:M.required},render:({field:X})=>s.jsx(_e,{...X,type:"date"})})]},M.name);default:return null}},F=()=>f?s.jsx(W4,{productData:j()}):s.jsxs("form",{onSubmit:x(R),className:"space-y-6",children:[s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs(Et,{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"h-5 w-5"}),"Basic Information"]})}),s.jsxs($e,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:"name",children:["Product Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"name",control:g,render:({field:M})=>s.jsx(_e,{...M,placeholder:"Enter product name"})}),S.name&&s.jsx("p",{className:"text-red-500 text-sm",children:S.name.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:"category",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"category",control:g,render:({field:M})=>s.jsxs(Zt,{onValueChange:M.onChange,value:M.value,children:[s.jsx(Wt,{children:s.jsx(Yt,{placeholder:"Select category"})}),s.jsx(Gt,{children:m.map(Z=>{const X=fre().find(z=>z.value===Z);return X?s.jsx(st,{value:Z,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:X.icon}),s.jsx("span",{children:X.label})]})},Z):null})})]})}),S.category&&s.jsx("p",{className:"text-red-500 text-sm",children:S.category.message})]}),w.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"subcategory",children:"Subcategory"}),s.jsx(pt,{name:"subcategory",control:g,render:({field:M})=>s.jsxs(Zt,{onValueChange:M.onChange,value:M.value,children:[s.jsx(Wt,{children:s.jsx(Yt,{placeholder:"Select subcategory"})}),s.jsx(Gt,{children:w.map(Z=>s.jsx(st,{value:Z,children:Z},Z))})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"shortDescription",children:"Short Description"}),s.jsx(pt,{name:"shortDescription",control:g,render:({field:M})=>s.jsx(Gs,{...M,placeholder:"Brief product description",rows:2})})]})]})]}),e&&Ur[e]&&s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs(Et,{className:"flex items-center gap-2",children:[s.jsx(Xf,{className:"h-5 w-5"}),s.jsx("span",{className:"mr-2",children:Ur[e].icon}),Ur[e].name," Details"]})}),s.jsx($e,{className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ur[e].fields.map(E)})})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{children:"Pricing & Inventory"})}),s.jsxs($e,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:"price",children:["Selling Price ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"price",control:g,render:({field:M})=>s.jsx(_e,{...M,type:"number",step:"0.01",placeholder:"0.00",onChange:Z=>M.onChange(Number(Z.target.value))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"comparePrice",children:"Compare Price"}),s.jsx(pt,{name:"comparePrice",control:g,render:({field:M})=>s.jsx(_e,{...M,type:"number",step:"0.01",placeholder:"0.00",onChange:Z=>M.onChange(Number(Z.target.value))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"costPrice",children:"Cost Price"}),s.jsx(pt,{name:"costPrice",control:g,render:({field:M})=>s.jsx(_e,{...M,type:"number",step:"0.01",placeholder:"0.00",onChange:Z=>M.onChange(Number(Z.target.value))})})]})]}),s.jsx(Pi,{}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:"trackQuantity",control:g,render:({field:M})=>s.jsx(zt,{checked:M.value,onCheckedChange:M.onChange})}),s.jsx(ve,{children:"Track Quantity"})]}),j("trackQuantity")&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:"quantity",children:["Quantity ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"quantity",control:g,render:({field:M})=>s.jsx(_e,{...M,type:"number",placeholder:"0",onChange:Z=>M.onChange(Number(Z.target.value))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"lowStockThreshold",children:"Low Stock Alert"}),s.jsx(pt,{name:"lowStockThreshold",control:g,render:({field:M})=>s.jsx(_e,{...M,type:"number",placeholder:"5",onChange:Z=>M.onChange(Number(Z.target.value))})})]})]})]})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs(Et,{className:"flex items-center gap-2",children:[s.jsx(Si,{className:"h-5 w-5"}),"Product Images"]})}),s.jsxs($e,{className:"space-y-4",children:[s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:T,className:"hidden",id:"image-upload"}),s.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[s.jsx(Bp,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload images or drag and drop"}),s.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG, GIF up to 10MB"})]})]}),n.length>0&&s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:n.map((M,Z)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:M,alt:`Product ${Z+1}`,className:"w-full h-24 object-cover rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>A(Z),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(tn,{className:"h-3 w-3"})}),Z===0&&s.jsx(Ze,{className:"absolute bottom-1 left-1 text-xs",children:"Main"})]},Z))})]})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs(Et,{className:"flex items-center gap-2",children:[s.jsx(bT,{className:"h-5 w-5"}),"Product Description"]})}),s.jsx($e,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ve,{htmlFor:"description",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"description",control:g,render:({field:M})=>s.jsx($4,{theme:"snow",value:M.value,onChange:M.onChange,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link","image"],["clean"]]},style:{minHeight:"200px"}})}),S.description&&s.jsx("p",{className:"text-red-500 text-sm",children:S.description.message})]})})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{children:"Product Tags"})}),s.jsxs($e,{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(_e,{value:o,onChange:M=>l(M.target.value),placeholder:"Add a tag",onKeyPress:M=>M.key==="Enter"&&(M.preventDefault(),I())}),s.jsx(se,{type:"button",onClick:I,variant:"outline",children:s.jsx(bs,{className:"h-4 w-4"})})]}),i.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(M=>s.jsxs(Ze,{variant:"secondary",className:"flex items-center gap-1",children:[M,s.jsx(tn,{className:"h-3 w-3 cursor-pointer",onClick:()=>P(M)})]},M))})]})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{children:"SEO & Settings"})}),s.jsxs($e,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"sku",children:"SKU"}),s.jsx(pt,{name:"sku",control:g,render:({field:M})=>s.jsx(_e,{...M,placeholder:"Product SKU"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"barcode",children:"Barcode"}),s.jsx(pt,{name:"barcode",control:g,render:({field:M})=>s.jsx(_e,{...M,placeholder:"Product barcode"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"seoTitle",children:"SEO Title"}),s.jsx(pt,{name:"seoTitle",control:g,render:({field:M})=>s.jsx(_e,{...M,placeholder:"SEO optimized title"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"seoDescription",children:"SEO Description"}),s.jsx(pt,{name:"seoDescription",control:g,render:({field:M})=>s.jsx(Gs,{...M,placeholder:"SEO meta description",rows:3})})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:"featured",control:g,render:({field:M})=>s.jsx(zt,{checked:M.value,onCheckedChange:M.onChange})}),s.jsx(ve,{children:"Featured Product"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:"freeDelivery",control:g,render:({field:M})=>s.jsx(zt,{checked:M.value,onCheckedChange:M.onChange})}),s.jsx(ve,{children:"Free Delivery"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"status",children:"Status"}),s.jsx(pt,{name:"status",control:g,render:({field:M})=>s.jsxs(Zt,{onValueChange:M.onChange,value:M.value,children:[s.jsx(Wt,{className:"w-32",children:s.jsx(Yt,{})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"active",children:"Active"}),s.jsx(st,{value:"draft",children:"Draft"}),s.jsx(st,{value:"archived",children:"Archived"})]})]})})]})]})]})]}),s.jsxs("div",{className:"flex gap-4 sticky bottom-4 bg-white p-4 border-t",children:[s.jsxs(se,{type:"button",variant:"outline",className:"flex-1",onClick:()=>u(!f),children:[s.jsx(en,{className:"h-4 w-4 mr-2"}),f?"Edit":"Preview"]}),s.jsx(se,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{N("status","draft"),x(R)()},children:"Save as Draft"}),s.jsxs(se,{type:"submit",className:"flex-1",children:[s.jsx(ad,{className:"h-4 w-4 mr-2"}),"Publish Product"]})]})]});if(d)return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:s.jsx(Ut,{className:"h-4 w-4"})}),s.jsx("h1",{className:"text-xl font-semibold",children:"Add New Product"})]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>u(!f),children:[s.jsx(en,{className:"h-4 w-4 mr-2"}),f?"Edit":"Preview"]})]})}),s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsx(P_,{className:"h-[calc(100vh-80px)]",children:s.jsx(F,{})})})]});const O=lt();return s.jsx("button",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-full shadow-xl flex items-center justify-center transition-all duration-300 hover:scale-110 border-4 border-white","aria-label":"Add Product",onClick:()=>O("/vendor/add-product"),children:s.jsx(bs,{className:"h-7 w-7"})})},d2=[{title:"Home",url:"/vendor/dashboard",icon:Xb},{title:"Orders",url:"/vendor/orders",icon:jT},{title:"Products",url:"/vendor/products",icon:Kt},{title:"Settings",url:"/vendor/settings",icon:YF}],gre=({children:e})=>s.jsx(s.Fragment,{children:e}),vre=()=>{const e=Dn(),t=lt();return s.jsxs("div",{className:"fixed bottom-0 left-0 w-full z-50",children:[s.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 -top-6 z-10",children:s.jsx(pre,{})}),s.jsxs("nav",{className:"bg-gradient-to-r from-slate-50 to-white shadow-2xl border-t border-gray-100 relative overflow-hidden backdrop-blur-sm pb-safe-bottom",children:[s.jsx("div",{className:"absolute inset-0 bg-white",style:{clipPath:"polygon(0 0, calc(50% - 32px) 0, calc(50% - 24px) 16px, calc(50% + 24px) 16px, calc(50% + 32px) 0, 100% 0, 100% 100%, 0 100%)"}}),s.jsxs("div",{className:"relative flex justify-around items-center px-safe-x py-1 pt-3 md:py-1 md:pt-2",children:[d2.slice(0,2).map(n=>{const r=n.icon,i=e.pathname===n.url;return s.jsxs("button",{onClick:()=>t(n.url),className:`flex flex-col items-center justify-center p-2 md:p-1 rounded-lg transition-all duration-200 min-w-[60px] ${i?"text-orange-600 bg-orange-50":"text-gray-600 hover:text-orange-500 hover:bg-gray-50"}`,"aria-label":n.title,children:[s.jsx(r,{className:"h-5 w-5 mb-1 md:mb-0"}),s.jsx("span",{className:"text-xs font-medium",children:n.title})]},n.title)}),s.jsx("div",{className:"w-16"}),d2.slice(2).map(n=>{const r=n.icon,i=e.pathname===n.url;return s.jsxs("button",{onClick:()=>t(n.url),className:`flex flex-col items-center justify-center p-2 md:p-1 rounded-lg transition-all duration-200 min-w-[60px] ${i?"text-orange-600 bg-orange-50":"text-gray-600 hover:text-orange-500 hover:bg-gray-50"}`,"aria-label":n.title,children:[s.jsx(r,{className:"h-5 w-5 mb-1 md:mb-0"}),s.jsx("span",{className:"text-xs font-medium",children:n.title})]},n.title)})]})]})]})},xre=async()=>{console.log(" AUTH DEBUG START");const e=await Ce.getToken(),t=await Ce.getUser(),n=await Ce.isAuthenticated();console.log(" Auth Status:",{hasToken:!!e,tokenLength:(e==null?void 0:e.length)||0,tokenPreview:e?`${e.substring(0,10)}...`:"null",hasUser:!!t,userId:t==null?void 0:t.id,userType:t==null?void 0:t.user_type,isAuthenticated:n});const r=localStorage.getItem("token"),i=localStorage.getItem("user");return console.log(" Direct Storage:",{directToken:r?`${r.substring(0,10)}...`:"null",directUser:i?"exists":"null",allKeys:Object.keys(localStorage)}),console.log(" AUTH DEBUG END"),{token:e,user:t,isAuth:n}};function yre({title:e,subtitle:t,headerActions:n}){const r=lt(),{toast:i}=ts(),[a,o]=_.useState([]),[l,d]=_.useState([]),[h,f]=_.useState(!0),[u,m]=_.useState(null),[p,w]=_.useState(0),[y,b]=_.useState(0),[g,x]=_.useState(!0),j=a.filter(O=>!O.read).length,N=l.reduce((O,M)=>O+(M.unread_count||0),0),S=!1;_.useEffect(()=>{console.log(" VendorHeader initializing..."),I(),P(),A(),C(),T();const O=setInterval(C,3e4),M=setInterval(T,3e4),Z=setInterval(P,6e4),X=H=>{const q=H.detail;o(W=>[q,...W])},z=H=>{const{order:q}=H.detail,W={id:Date.now(),type:"order",title:"New Order Received!",message:`Order #${q.order_number} for ${q.total_amount}`,data:{orderId:q.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(Y=>[W,...Y]),ds.playNotificationSound(),ds.showBrowserNotificationCompat(W.title,{body:W.message,tag:`order-${q.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/orders"}}),i({title:W.title,description:W.message,duration:5e3})},D=H=>{const{refund:q}=H.detail,W={id:Date.now(),type:"refund_request",title:"Refund Request Received!",message:`Refund request for Order #${q.order_number} - ${q.amount}`,data:{refundId:q.id,orderId:q.order_id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(Y=>[W,...Y]),ds.playNotificationSound(),ds.showBrowserNotificationCompat(W.title,{body:W.message,tag:`refund-${q.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/orders"}}),i({title:W.title,description:W.message,duration:5e3})},B=H=>{const{product:q}=H.detail,W={id:Date.now(),type:"stock_alert",title:"Low Stock Alert!",message:`${q.name} is running low (${q.stock} left)`,data:{productId:q.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/products"};o(Y=>[W,...Y]),ds.playNotificationSound(),ds.showBrowserNotificationCompat(W.title,{body:W.message,tag:`stock-${q.id}`,requireInteraction:!0,data:{actionUrl:"/vendor/products"}}),i({title:W.title,description:W.message,duration:5e3})},V=H=>{const{order:q,oldStatus:W,newStatus:Y}=H.detail,U={id:Date.now(),type:"order_status",title:"Order Status Updated!",message:`Order #${q.order_number} changed from ${W} to ${Y}`,data:{orderId:q.id},read:!1,created_at:new Date().toISOString(),action_url:"/vendor/orders"};o(G=>[U,...G]),ds.playNotificationSound(),ds.showBrowserNotificationCompat(U.title,{body:U.message,tag:`status-${q.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/orders"}}),i({title:U.title,description:U.message,duration:4e3})};return window.addEventListener("newNotification",X),window.addEventListener("orderCreated",z),window.addEventListener("refundRequest",D),window.addEventListener("stockAlert",B),window.addEventListener("orderStatusChange",V),()=>{clearInterval(O),clearInterval(M),clearInterval(Z),window.removeEventListener("newNotification",X),window.removeEventListener("orderCreated",z),window.removeEventListener("refundRequest",D),window.removeEventListener("stockAlert",B),window.removeEventListener("orderStatusChange",V)}},[]);const C=async()=>{try{const O=await rr.getConversations(),Z=(Array.isArray(O)?O:(O==null?void 0:O.results)||[]).reduce((X,z)=>{var V,H,q;const D=(V=z.other_participant)==null?void 0:V.id;if(!D)return X;const B=X.find(W=>{var Y;return((Y=W.other_participant)==null?void 0:Y.id)===D});if(!B)X.push(z);else{const W=((H=z.last_message)==null?void 0:H.created_at)||z.updated_at,Y=((q=B.last_message)==null?void 0:q.created_at)||B.updated_at;if(new Date(W)>new Date(Y)){const U=X.findIndex(G=>{var ne;return((ne=G.other_participant)==null?void 0:ne.id)===D});X[U]=z}}return X},[]);l.length>0&&Z.forEach(X=>{var D,B;const z=l.find(V=>{var H,q;return((H=V.other_participant)==null?void 0:H.id)===((q=X.other_participant)==null?void 0:q.id)});z&&X.unread_count>z.unread_count&&ds.showBrowserNotification(`New message from ${(D=X.other_participant)==null?void 0:D.username}`,{body:((B=X.last_message)==null?void 0:B.content)||"New message received",tag:`message-${X.id}`,requireInteraction:!1,data:{actionUrl:"/vendor/messages"}})}),d(Z)}catch(O){console.error("Failed to load conversations:",O)}},T=async()=>{try{const{response:O,data:M}=await Ve("/vendor-notifications/");if(O.ok&&M){const Z=Array.isArray(M)?M:M.results||[];a.length>0&&Z.forEach(X=>{if(!a.find(D=>D.id===X.id)){ds.playNotificationSound();let D="/vendor/orders",B=!0;switch(X.type){case"order":D="/vendor/orders";break;case"refund":case"refund_request":D="/vendor/orders";break;case"stock_alert":case"low_stock":D="/vendor/products";break;case"order_status":case"status_change":D="/vendor/orders";break;case"payment":D="/vendor/wallet";break;case"message":D="/vendor/messages",B=!1;break;default:D="/vendor/orders"}ds.showBrowserNotificationCompat(X.title,{body:X.message,tag:`notification-${X.id}`,requireInteraction:B,data:{actionUrl:D}}),i({title:X.title,description:X.message,duration:5e3})}}),o(Z)}}catch(O){console.error("Failed to load notifications:",O),a.length===0&&o([])}},A=async()=>{await ds.requestPermission()},I=async()=>{console.log(" Fetching vendor status...");const O=Date.now();if(O-p<3e4&&u!==null){console.log(" Using cached vendor status");return}try{w(O);const M=await Ce.isAuthenticated();if(console.log(" Authentication check for fetch:",M),!M){console.log(" Not authenticated");return}const Z=await Ce.getUser(),{response:X,data:z}=await Ve("/vendor-profiles/");if(console.log(" Fetch vendor status response:",{status:X.status,statusText:X.statusText,data:z,headers:Object.fromEntries(X.headers.entries())}),X.status===401||X.status===403){console.log(" Authentication error in fetch - user may not have vendor profile"),console.log("User authenticated but no vendor profile found");return}if(X.status!==200&&X.status!==201)throw console.log(" Unexpected status in fetch:",X.status),new Error((z==null?void 0:z.error)||(z==null?void 0:z.message)||"Failed to fetch vendor status");if(z&&z.results&&z.results.length>0){const D=z.results.find(B=>B.user===(Z==null?void 0:Z.id))||z.results[0];console.log(" Profile found:",{id:D.id,user:D.user,is_active:D.is_active}),m(D.id),f(D.is_active||!1)}else console.log(" No profile found in response"),console.log(" User may need to switch to vendor role or complete onboarding")}catch(M){console.error(" Error fetching vendor status:",M),i({title:"Error",description:"Failed to load vendor status",variant:"destructive"})}},P=async()=>{try{const{response:O,data:M}=await Ve("/vendor-wallet/");if(O.ok&&M){const Z=M.balance||0,X=y;b(Z),x(Z>=100),Z<100&&h&&(f(!1),localStorage.getItem("lowBalanceWarningShown")||(localStorage.setItem("lowBalanceWarningShown","true"),i({title:"Status Changed",description:"Automatically set to offline due to low wallet balance (< 100 points)",variant:"destructive"}))),Z>=100&&X<100&&!h&&(f(!0),localStorage.removeItem("lowBalanceWarningShown"),i({title:"Status Changed",description:"Automatically set to online - wallet balance restored",variant:"default"}))}}catch(O){console.error("Failed to fetch wallet balance:",O)}},R=async()=>{var O;if(console.log(" Toggle status started"),!h&&y<100){i({title:"Insufficient Balance",description:`Minimum 100 points required to go online. Current balance: ${y}`,variant:"destructive"});return}await xre();try{const M=await Ce.isAuthenticated();if(console.log(" Authentication check:",M),!M){console.log(" Not authenticated");return}if(!u)throw console.log(" No profile ID found"),new Error("Profile ID not found");const Z=!h;console.log(" Toggling status from",h,"to",Z,"for profile",u);const X={is_active:Z};console.log(" Request body:",X);const z=await Vm();console.log(" Request headers:",z);const{response:D,data:B}=await Ve(`/vendor-profiles/${u}/toggle-status/`,{method:"POST",body:JSON.stringify(X)});if(console.log(" Toggle status response:",{status:D.status,statusText:D.statusText,data:B,headers:Object.fromEntries(D.headers.entries())}),console.log(" Response details:",{ok:D.ok,status:D.status,dataSuccess:B==null?void 0:B.success,dataError:B==null?void 0:B.error,dataMessage:B==null?void 0:B.message}),D.status===400&&((O=B==null?void 0:B.error)!=null&&O.includes("wallet balance"))){f(!1),x(!1),b(B.wallet_balance||0),i({title:"Insufficient Balance",description:B.error,variant:"destructive"});return}if(D.status===401||D.status===403){console.log(" Authentication error - but not clearing auth yet"),i({title:"Permission Error",description:"You don't have permission to perform this action",variant:"destructive"});return}if(D.status===200||D.status===201)if(console.log(" Success response received"),B&&B.success!==!1){const H=B.is_active!==void 0?B.is_active:Z;console.log(" Setting status to:",H),f(H),i({title:"Success",description:B.message||`Status set to ${H?"Online":"Offline"}`}),console.log(" Toggle completed successfully");return}else throw console.log(" API returned success: false"),new Error((B==null?void 0:B.error)||(B==null?void 0:B.message)||"Failed to toggle status");console.log(" Unexpected status code:",D.status);const V=(B==null?void 0:B.error)||(B==null?void 0:B.detail)||(B==null?void 0:B.message)||`Server returned status ${D.status}`;throw new Error(V)}catch(M){console.error(" Error toggling status:",M),i({title:"Error",description:M instanceof Error?M.message:"Failed to toggle status",variant:"destructive"})}},E=async O=>{await ds.markAsRead(O),o(M=>M.map(Z=>Z.id===O?{...Z,read:!0}:Z))},F=async()=>{await ds.markAllAsRead(),o(O=>O.map(M=>({...M,read:!0})))};return s.jsx("header",{className:"fixed top-0 z-50 w-full max-w-full border-b bg-gradient-to-r from-gray-50 to-white shadow-lg overflow-hidden",children:s.jsxs("div",{className:"flex h-14 sm:h-16 items-center px-3 sm:px-4 max-w-full",children:[s.jsx("div",{className:"flex-1 flex items-center gap-2 min-w-0",children:s.jsx("div",{className:"flex items-center gap-2 min-w-0",children:s.jsx("img",{src:"/assets/ezeywaylogo.png",alt:"Ezeyway",className:"h-32 w-32 sm:h-36 sm:w-36 object-contain flex-shrink-0"})})}),s.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 border border-gray-300 rounded-full px-3 py-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-xs font-medium ${h?"text-green-700":"text-gray-700"}`,children:h?"Online":"Offline"}),!g&&s.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Low Balance"}),S]}),s.jsx("button",{onClick:R,disabled:!g&&!h,title:g?"":`Minimum 100 points required. Current: ${y}`,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-gray-300 ${!g&&!h?"bg-red-400 cursor-not-allowed opacity-50":h?"bg-green-500":"bg-gray-400"}`,children:s.jsx("span",{className:`inline-block h-3 w-3 transform rounded-full bg-white transition-transform shadow-sm ${h?"translate-x-5":"translate-x-1"}`})})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[s.jsxs(qc,{children:[s.jsx(Hc,{asChild:!0,children:s.jsxs(se,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10 text-gray-700 hover:bg-gray-100",children:[s.jsx(Xr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),N>0&&s.jsx(Ze,{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 text-[10px] sm:text-xs flex items-center justify-center min-w-[16px] sm:min-w-[20px] bg-red-500 text-white border-2 border-white",children:N>9?"9+":N}),s.jsx("span",{className:"sr-only",children:"Messages"})]})}),s.jsxs(ul,{align:"end",className:"w-72 sm:w-80 mr-2 sm:mr-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Messages"}),s.jsx("div",{className:"flex gap-2",children:s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>r("/vendor/messages"),className:"text-xs",children:"View all"})})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:l.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No messages"}):l.slice(0,5).map(O=>{var M,Z,X,z,D,B;return s.jsx("div",{className:`p-3 border-b hover:bg-muted/50 cursor-pointer ${O.unread_count>0?"bg-blue-50/50":""}`,onClick:()=>r("/vendor/messages"),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(ha,{className:"h-8 w-8",children:[s.jsx(Wr,{src:(M=O.other_participant)==null?void 0:M.profile_picture}),s.jsx(fa,{children:(X=(Z=O.other_participant)==null?void 0:Z.username)==null?void 0:X.charAt(0)})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:(z=O.other_participant)==null?void 0:z.username}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:((D=O.last_message)==null?void 0:D.content)||((B=O.last_message)==null?void 0:B.file_name)||"No messages"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:O.last_message?new Date(O.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),O.unread_count>0&&s.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-white font-bold",children:O.unread_count})})]})},O.id)})})]})]}),n,!n&&s.jsxs(qc,{children:[s.jsx(Hc,{asChild:!0,children:s.jsxs(se,{variant:"ghost",size:"icon",className:"relative h-9 w-9 sm:h-10 sm:w-10 text-gray-700 hover:bg-gray-100",children:[s.jsx(Gn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),j>0&&s.jsx(Ze,{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 h-4 w-4 sm:h-5 sm:w-5 rounded-full p-0 text-[10px] sm:text-xs flex items-center justify-center min-w-[16px] sm:min-w-[20px] bg-red-500 text-white border-2 border-white",children:j>9?"9+":j}),s.jsx("span",{className:"sr-only",children:"Notifications"})]})}),s.jsxs(ul,{align:"end",className:"w-72 sm:w-80 mr-2 sm:mr-0",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h4",{className:"font-semibold",children:"Notifications"}),j>0&&s.jsx(se,{variant:"ghost",size:"sm",onClick:F,className:"text-xs",children:"Mark all read"})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:a.length===0?s.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):a.map(O=>s.jsx("div",{className:`p-4 border-b last:border-b-0 hover:bg-muted/50 cursor-pointer ${O.read?"":"bg-blue-50/50"}`,onClick:()=>{switch(E(O.id),O.type){case"order":case"refund":case"refund_request":case"order_status":case"status_change":r("/vendor/orders");break;case"stock_alert":case"low_stock":r("/vendor/products");break;case"payment":r("/vendor/wallet");break;case"message":r("/vendor/messages");break;default:r("/vendor/orders")}},children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${O.read?"bg-transparent":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-medium ${O.read?"text-gray-700":"text-gray-900"}`,children:O.title}),s.jsx("p",{className:`text-sm ${O.read?"text-gray-600":"text-gray-700"}`,children:O.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(O.created_at).toLocaleString()})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Ze,{variant:"outline",className:`text-xs ${O.type==="order"?"border-green-200 text-green-700":O.type==="refund"||O.type==="refund_request"?"border-red-200 text-red-700":O.type==="stock_alert"||O.type==="low_stock"?"border-orange-200 text-orange-700":O.type==="order_status"||O.type==="status_change"||O.type==="payment"?"border-blue-200 text-blue-700":O.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:O.type==="refund_request"?"refund":O.type==="stock_alert"?"stock":O.type==="order_status"?"status":O.type})})]})},O.id))}),s.jsx("div",{className:"p-2 border-t",children:s.jsx(se,{variant:"ghost",className:"w-full text-sm",onClick:()=>r("/vendor/notifications"),children:"View all notifications"})})]})]})]})]})})}const bre=Dh.divIcon({className:"vendor-marker",html:'<div style="background-color: #10b981; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]}),wre=Dh.divIcon({className:"delivery-marker",html:'<div style="background-color: #ef4444; width: 20px; height: 20px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>',iconSize:[20,20],iconAnchor:[10,10]}),u2=async(e,t,n,r)=>{try{const a=await(await fetch(`https://router.project-osrm.org/route/v1/driving/${e},${t};${n},${r}?overview=full&geometries=geojson`)).json();if(a.routes&&a.routes.length>0){const o=a.routes[0];return{coordinates:o.geometry.coordinates.map(d=>[d[1],d[0]]),distance:o.distance/1e3,duration:o.duration/60}}}catch(i){console.error("Error fetching route:",i)}return null};function _re({isOpen:e,orders:t,onAccept:n,onReject:r}){const[i,a]=_.useState({}),[o,l]=_.useState(null),[d,h]=_.useState({}),f=_.useRef(null),{toast:u}=ts(),m=_.useRef({});_.useEffect(()=>{const b=async()=>{try{const{response:g,data:x}=await Ve("vendor-profiles/");if(g.ok&&x.results&&x.results.length>0){const j=x.results[0];if(j.latitude&&j.longitude){l({lat:j.latitude,lng:j.longitude,radius:j.delivery_radius||50});const N={};for(const S of t)if(S.delivery_latitude&&S.delivery_longitude){const C=await u2(j.longitude,j.latitude,S.delivery_longitude,S.delivery_latitude);C&&(N[S.id]=C)}h(N)}}}catch(g){console.error("Error fetching vendor location:",g)}};if(e&&t.length>0){b(),(async()=>{if(f.current)try{f.current.volume=.8,await f.current.play(),setTimeout(()=>{f.current&&(f.current.pause(),f.current.currentTime=0)},3e3)}catch(j){console.warn("Audio autoplay blocked:",j);try{const N=new(window.AudioContext||window.webkitAudioContext),S=N.createOscillator(),C=N.createGain();S.connect(C),C.connect(N.destination),S.frequency.setValueAtTime(800,N.currentTime),S.type="square",C.gain.setValueAtTime(.3,N.currentTime),C.gain.exponentialRampToValueAtTime(.01,N.currentTime+.5),S.start(N.currentTime),S.stop(N.currentTime+.5)}catch(N){console.warn("Web Audio API also failed:",N)}}})(),"Notification"in window&&Notification.permission==="default"?Notification.requestPermission().then(j=>{j==="granted"&&p()}):"Notification"in window&&Notification.permission==="granted"&&p(),t.forEach(j=>{m.current[j.id]||(m.current[j.id]=new Date(j.created_at))});const x=setInterval(()=>{const j={};t.forEach(N=>{if(m.current[N.id]){const C=Math.floor((new Date().getTime()-m.current[N.id].getTime())/1e3);j[N.id]=C}}),a(j)},1e3);return()=>clearInterval(x)}},[e,t]),_.useEffect(()=>{o&&t.length>0&&(async()=>{const g={};for(const x of t)if(x.delivery_latitude&&x.delivery_longitude&&!d[x.id]){const j=await u2(o.lng,o.lat,x.delivery_longitude,x.delivery_latitude);j&&(g[x.id]=j)}Object.keys(g).length>0&&h(x=>({...x,...g}))})()},[t,o]);const p=()=>{t.forEach(b=>{new Notification("New Order Received!",{body:`Order #${b.order_number} - ${b.total_amount}`,icon:"/favicon.ico",tag:`order-${b.id}`,requireInteraction:!0})})};if(!e||t.length===0)return null;const w=b=>{const g=t.find(x=>x.id===b);n(b),u({title:"Order Accepted",description:`Order #${g==null?void 0:g.order_number} has been accepted`})},y=b=>{const g=t.find(x=>x.id===b);r(b),u({title:"Order Rejected",description:`Order #${g==null?void 0:g.order_number} has been rejected`,variant:"destructive"})};return s.jsxs(s.Fragment,{children:[s.jsx("audio",{ref:f,preload:"auto",loop:!0,children:s.jsx("source",{src:"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT",type:"audio/wav"})}),s.jsx("div",{className:"fixed inset-0 bg-white z-[9999] flex flex-col",children:s.jsx("div",{className:"flex-1 flex flex-col w-full h-full",children:s.jsxs("div",{className:"p-4 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center animate-pulse",children:s.jsx(Gn,{className:"h-4 w-4 text-red-600 animate-bounce"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-lg font-bold text-red-900",children:" New Orders Received!"}),s.jsxs("p",{className:"text-sm text-red-600 font-medium",children:[t.length," order",t.length>1?"s":""," waiting for response"]}),s.jsx("p",{className:"text-xs text-red-500 font-bold mt-1",children:" MUST ACCEPT OR REJECT - NO DISMISSAL ALLOWED"})]})]}),s.jsx("div",{className:"text-sm text-red-600 font-bold animate-pulse ml-4",children:"URGENT"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-4",children:t.map(b=>{const g=i[b.id]||0;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("p",{className:"text-xs font-bold text-gray-900",children:["#",b.order_number]}),s.jsxs("p",{className:"text-xs font-bold text-green-600",children:["",b.total_amount]}),s.jsxs("p",{className:"text-xs text-blue-600",children:[Math.floor(g/60),":",(g%60).toString().padStart(2,"0")]})]}),s.jsxs("div",{className:`border rounded-lg p-2 mb-2 ${parseFloat(b.delivery_fee||"0")===0?"bg-green-50 border-green-200":parseFloat(b.delivery_fee||"0")<50?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Kt,{className:"h-3 w-3 text-gray-600"}),s.jsx("p",{className:"text-xs font-bold text-gray-800",children:"Delivery Fee:"})]}),s.jsx("p",{className:`text-sm font-bold ${parseFloat(b.delivery_fee||"0")===0?"text-green-700":parseFloat(b.delivery_fee||"0")<50?"text-blue-700":"text-orange-700"}`,children:parseFloat(b.delivery_fee||"0")===0?"FREE DELIVERY":`${b.delivery_fee}`})]}),parseFloat(b.delivery_fee||"0")>0&&s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[" You earn ",b.delivery_fee," from this delivery"]}),parseFloat(b.delivery_fee||"0")===0&&s.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Free delivery - customer pays nothing extra"})]}),s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:b.customer_name}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-1",children:[s.jsxs("div",{className:"flex items-start gap-1",children:[s.jsx(Jt,{className:"h-2 w-2 text-gray-500 mt-0.5"}),s.jsx("p",{className:"text-xs text-gray-900",children:b.delivery_address})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ch,{className:"h-2 w-2 text-gray-500"}),s.jsx("p",{className:"text-xs text-gray-900",children:b.delivery_phone})]})]}),d[b.id]&&o&&s.jsxs("div",{className:`border rounded-lg p-2 mb-2 ${d[b.id].distance>o.radius?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:[s.jsxs("div",{className:"flex items-center justify-between text-center",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-blue-800",children:" Distance"}),s.jsxs("p",{className:`text-sm font-bold ${d[b.id].distance>o.radius?"text-red-900":"text-blue-900"}`,children:[d[b.id].distance.toFixed(1),"km"]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-green-800",children:" Radius"}),s.jsxs("p",{className:"text-sm font-bold text-green-900",children:[o.radius,"km"]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700",children:" Time"}),s.jsxs("p",{className:"text-sm font-bold text-gray-900",children:[Math.round(d[b.id].duration),"min"]})]})]}),d[b.id].distance>o.radius&&s.jsx("p",{className:"text-xs font-bold text-red-600 mt-1 text-center",children:" Exceeds radius!"})]}),o&&b.delivery_latitude&&b.delivery_longitude&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"h-64 rounded-lg overflow-hidden border relative",children:[s.jsxs(b_,{center:[(o.lat+b.delivery_latitude)/2,(o.lng+b.delivery_longitude)/2],zoom:12,style:{height:"100%",width:"100%"},zoomControl:!1,attributionControl:!1,children:[s.jsx(w_,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.jsx(fh,{position:[o.lat,o.lng],icon:bre}),s.jsx(fh,{position:[b.delivery_latitude,b.delivery_longitude],icon:wre}),d[b.id]&&s.jsx(YK,{positions:d[b.id].coordinates,pathOptions:{color:"#3b82f6",weight:4,opacity:.8}})]}),d[b.id]&&s.jsxs("div",{className:"absolute top-2 left-2 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-1 shadow-lg",children:[s.jsxs("div",{className:"text-sm font-semibold text-gray-800",children:[" ",d[b.id].distance.toFixed(1)," km"]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[" ",Math.round(d[b.id].duration)," min"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Your Location"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Delivery Location"})]})]})]}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("p",{className:"text-xs font-medium text-gray-700 mb-1",children:["Items (",b.items.length,")"]}),s.jsx("div",{className:"space-y-1 max-h-16 overflow-y-auto",children:b.items.map(x=>{var j,N,S;return s.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white rounded",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded overflow-hidden flex-shrink-0",children:s.jsx("img",{src:((S=(N=(j=x.product_details)==null?void 0:j.images)==null?void 0:N[0])==null?void 0:S.image_url)||"/placeholder-product.jpg",alt:x.product_name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:x.product_name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",x.quantity]})]}),s.jsxs("p",{className:"text-xs font-medium text-gray-900",children:["",x.total_price]})]},x.id)})})]}),b.delivery_instructions&&s.jsxs("div",{className:"mb-1",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Instructions:"}),s.jsx("p",{className:"text-xs text-gray-600 italic",children:b.delivery_instructions})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(se,{onClick:()=>y(b.id),variant:"outline",size:"sm",className:"flex-1 border-red-200 text-red-600 hover:bg-red-50 text-xs h-6",children:[s.jsx(tn,{className:"h-2 w-2 mr-1"}),"Reject"]}),s.jsxs(se,{onClick:()=>w(b.id),size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 text-xs h-6",children:[s.jsx(Sh,{className:"h-2 w-2 mr-1"}),"Accept"]})]})]},b.id)})})]})})})]})}function G4(){const[e,t]=_.useState(!1),[n,r]=_.useState(null);return _.useEffect(()=>{if(!gt.isNativePlatform())return;const i=a=>{r(a.detail),t(!0),setTimeout(()=>{t(!1)},5e3)};return window.addEventListener("showOrderModal",i),()=>{window.removeEventListener("showOrderModal",i)}},[]),!gt.isNativePlatform()||!e?null:s.jsx("div",{className:"fixed top-4 left-4 right-4 z-[10000] animate-in slide-in-from-top duration-300",children:s.jsx(De,{className:"border-orange-200 bg-orange-50 shadow-lg",children:s.jsx($e,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center animate-pulse",children:s.jsx(Gn,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-bold text-orange-900",children:" New Order Received!"}),n&&s.jsxs("p",{className:"text-xs text-orange-700",children:["Order #",n.orderNumber," - ",n.amount]}),s.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Tap anywhere to view and respond"})]})]})})})})}function jre(){const[e,t]=_.useState([]),[n,r]=_.useState(!1);_.useRef(null);const i=_.useRef(new Set),a=_.useRef(0),{notifications:o,unreadCount:l,isConnected:d}=Cg();_.useEffect(()=>{const m=p=>{const w=p.detail;w.type==="order"&&w.title.includes("New Order")&&h()};return window.addEventListener("newNotification",m),()=>{window.removeEventListener("newNotification",m)}},[]);const h=async()=>{try{const{authService:m}=await ze(async()=>{const{authService:g}=await Promise.resolve().then(()=>ra);return{authService:g}},void 0),p=await m.getToken();if(!p){console.log("No token found for pending orders");return}console.log(" Mobile: Fetching pending orders with token:",p?`${p.substring(0,10)}...`:"NO TOKEN"),console.log(" Mobile: API URL:",Vc("orders/vendor/pending/"));const{apiRequest:w}=await ze(async()=>{const{apiRequest:g}=await Promise.resolve().then(()=>us);return{apiRequest:g}},void 0),{response:y,data:b}=await w("orders/vendor/pending/");console.log(" Mobile: Pending orders response:",y.status,y.ok),y.ok&&b?(console.log("Pending orders received:",b.length,b),b.length!==a.current?(console.log(` Order count changed: ${a.current}  ${b.length}`),t(b),r(b.length>0),a.current=b.length,b.length>0&&(console.log(" Mobile: Showing order notification for",b.length,"orders"),ze(async()=>{const{simpleNotificationService:g}=await Promise.resolve().then(()=>nl);return{simpleNotificationService:g}},void 0).then(({simpleNotificationService:g})=>{b.forEach(x=>{i.current.has(x.id)||(console.log(" Processing NEW order:",x.order_number,x.total_amount),i.current.add(x.id),g.showOrderNotification(x.order_number,x.total_amount,x.id))})}))):console.log(" No change in order count, skipping update")):console.error("Failed to fetch pending orders:",y.status,y.statusText)}catch(m){console.error("Error fetching pending orders:",m)}};return _.useEffect(()=>{(async()=>{const{authService:x}=await ze(async()=>{const{authService:N}=await Promise.resolve().then(()=>ra);return{authService:N}},void 0);await x.getToken()&&h()})();const p=async()=>{try{const{authService:x}=await ze(async()=>{const{authService:N}=await Promise.resolve().then(()=>ra);return{authService:N}},void 0);if(!await x.getToken())return;console.log(" Auto-refreshing pending orders..."),await h()}catch(x){console.error("Failed to auto-refresh orders:",x)}};let w,y;const b=()=>{w&&clearInterval(w),y&&clearInterval(y),w=setInterval(()=>{document.hidden||(console.log(" AGGRESSIVE POLLING: Page visible - checking for urgent orders"),p())},3e3),y=setInterval(()=>{document.hidden&&(console.log(" BACKGROUND POLLING: Page hidden - still checking for orders"),p())},1e4)};b();const g=()=>{console.log(` Visibility changed: ${document.hidden?"hidden":"visible"}`),document.hidden||(console.log(" Page became visible - IMMEDIATE order refresh!"),p(),b())};if(document.addEventListener("visibilitychange",g),gt.isNativePlatform()){const x=async j=>{var S;const N=((S=j==null?void 0:j.detail)==null?void 0:S.isActive)??!0;console.log(` MOBILE App state changed: ${N?"ACTIVE":"INACTIVE"}`),N&&(console.log(" MOBILE App ACTIVE - IMMEDIATE order refresh!"),await p(),b())};return document.addEventListener("appStateChange",x),document.addEventListener("resume",()=>{console.log(" MOBILE App RESUMED - IMMEDIATE order refresh!"),p(),b()}),()=>{w&&clearInterval(w),y&&clearInterval(y),document.removeEventListener("visibilitychange",g),document.removeEventListener("appStateChange",x),document.removeEventListener("resume",x)}}return()=>{w&&clearInterval(w),y&&clearInterval(y),document.removeEventListener("visibilitychange",g)}},[]),{pendingOrders:e,isModalOpen:n,acceptOrder:async m=>{try{const{apiRequest:p}=await ze(async()=>{const{apiRequest:y}=await Promise.resolve().then(()=>us);return{apiRequest:y}},void 0),{response:w}=await p(`/orders/${m}/accept/`,{method:"POST"});if(w.ok){const{simpleNotificationService:y}=await ze(async()=>{const{simpleNotificationService:b}=await Promise.resolve().then(()=>nl);return{simpleNotificationService:b}},void 0);return y.clearNotification(m),i.current.delete(m),t(b=>b.filter(g=>g.id!==m)),e.length<=1&&r(!1),window.dispatchEvent(new CustomEvent("orderAccepted",{detail:{orderId:m}})),!0}}catch(p){console.error("Error accepting order:",p)}return!1},rejectOrder:async m=>{try{const{apiRequest:p}=await ze(async()=>{const{apiRequest:y}=await Promise.resolve().then(()=>us);return{apiRequest:y}},void 0),{response:w}=await p(`/orders/${m}/reject/`,{method:"POST",body:JSON.stringify({reason:"Rejected by vendor"})});if(w.ok){const{simpleNotificationService:y}=await ze(async()=>{const{simpleNotificationService:b}=await Promise.resolve().then(()=>nl);return{simpleNotificationService:b}},void 0);return y.clearNotification(m),i.current.delete(m),t(b=>b.filter(g=>g.id!==m)),e.length<=1&&r(!1),!0}}catch(p){console.error("Error rejecting order:",p)}return!1},notifications:o,unreadCount:l,isConnected:d}}const K4=_.createContext(void 0);function Nre({children:e}){const{pendingOrders:t,isModalOpen:n,acceptOrder:r,rejectOrder:i}=jre(),[a,o]=_.useState(!1);_.useEffect(()=>{(async()=>{await Ua.requestPermissions(),console.log("Notification service initialized for platform:",gt.isNativePlatform()?"mobile":"web")})()},[]),_.useEffect(()=>{o(n)},[n]),_.useEffect(()=>{t.length>0&&t.forEach(h=>{Ua.showOrderNotification(h.order_number,h.total_amount,h.id),gt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([300,100,300])})},[t]),_.useEffect(()=>{const h=async f=>{console.log("Order modal event received:",f.detail);const u=f.detail;o(!0),(u!=null&&u.startBeeping||u!=null&&u.autoOpened||u!=null&&u.fromPush)&&(console.log(" Starting beeping for auto-opened notification"),await l()),gt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([200,100,200])};return window.addEventListener("showOrderModal",h),()=>{window.removeEventListener("showOrderModal",h)}},[]);const l=async()=>{try{console.log(" Starting order notification beeping sequence..."),await Ua.playNotificationSound();let h=0;const f=10,u=setInterval(async()=>{h<f&&a?(await Ua.playNotificationSound(),gt.isNativePlatform()&&"vibrate"in navigator&&navigator.vibrate([150,50,150]),h++,console.log(` Beep ${h}/${f}`)):(clearInterval(u),console.log(" Beeping sequence completed"))},2e3);window.orderBeepInterval=u}catch(h){console.error("Failed to start order beeping:",h)}};_.useEffect(()=>{gt.isNativePlatform()&&document.addEventListener("visibilitychange",()=>{document.hidden||(console.log("Page visible - checking for pending orders"),window.dispatchEvent(new CustomEvent("refreshPendingOrders")))})},[]);const d=()=>{o(!1),window.orderBeepInterval&&(clearInterval(window.orderBeepInterval),window.orderBeepInterval=null,console.log(" Stopped beeping - modal closed"))};return s.jsxs(K4.Provider,{value:{pendingOrdersCount:t.length,isModalOpen:a,closeModal:d},children:[e,s.jsx(G4,{}),s.jsx(_re,{isOpen:a,orders:t,onAccept:r,onReject:i})]})}function Sre(){const e=_.useContext(K4);return e===void 0?{pendingOrdersCount:0,isModalOpen:!1,closeModal:()=>{}}:e}function kre({children:e,title:t,subtitle:n,headerActions:r}){return s.jsx(Nre,{children:s.jsx(gre,{children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 safe-area-inset max-w-full overflow-x-hidden",children:[s.jsx(G4,{}),s.jsx("div",{className:"pt-safe-top",children:s.jsx(yre,{title:t,subtitle:n,headerActions:r})}),s.jsx("main",{className:"flex-1 pb-20 px-safe-x max-w-full overflow-x-hidden pt-14 sm:pt-16",children:e}),s.jsx(vre,{})]})})})}function es({children:e,title:t,subtitle:n,headerActions:r}){return s.jsx(kre,{title:t,subtitle:n,headerActions:r,children:e})}const Cre=()=>{const[e,t]=_.useState({}),[n,r]=_.useState(!1);return _.useEffect(()=>{(async()=>{try{const a=await Ce.getToken(),o=await Ce.getUser(),l=await Ce.isAuthenticated(),d=await Ce.isSessionValid(),h=gt.isNativePlatform();let f="Not checked",u=null;if(a&&(o==null?void 0:o.user_type)==="vendor")try{const{response:m,data:p}=await Ve("/vendor-profiles/");f=`${m.status} - ${m.ok?"Success":"Failed"}`,m.ok||(u=(p==null?void 0:p.error)||m.statusText)}catch(m){f="Error",u=m.message}else a&&(o==null?void 0:o.user_type)!=="vendor"&&(f="Not a vendor user");t({isNative:h,platform:gt.getPlatform(),token:a?`${a.substring(0,10)}...`:"None",user:o?{id:o.id,user_type:o.user_type,email:o.email}:"None",isAuthenticated:l,isSessionValid:d,vendorProfileStatus:f,vendorProfileError:u,timestamp:new Date().toISOString()})}catch(a){t({error:a.message,timestamp:new Date().toISOString()})}})()},[]),n?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-md w-full max-h-96 overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Vendor Debug Info"}),s.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),s.jsx("pre",{className:"text-xs bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(e,null,2)}),s.jsx("button",{onClick:()=>{var i;(i=navigator.clipboard)==null||i.writeText(JSON.stringify(e,null,2)),alert("Debug info copied to clipboard")},className:"mt-2 bg-blue-500 text-white px-3 py-1 rounded text-xs w-full",children:"Copy to Clipboard"})]})}):s.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 right-4 bg-red-500 text-white px-3 py-1 rounded text-xs z-50",children:"Debug"})},Oo=mo("PushNotifications",{}),Z4=Object.freeze(Object.defineProperty({__proto__:null,PushNotifications:Oo},Symbol.toStringTag,{value:"Module"}));class Ere{constructor(){Ht(this,"fcmToken",null)}async initialize(){if(!gt.isNativePlatform()){console.log(" Not on native platform, skipping FCM initialization");return}try{console.log(" Initializing FCM Service..."),this.checkForAutoOpenOrder(),this.setupListeners(),console.log(" Requesting push notification permissions...");const t=await Oo.requestPermissions();if(console.log(" Permission result:",t),t.receive!=="granted"){console.warn(" Push notification permission denied");return}console.log(" Registering for push notifications..."),await Oo.register();try{console.log(" FCM Community plugin initialized")}catch(n){console.warn(" FCM Community plugin not available:",n)}await this.getFCMToken(),console.log(" FCM Service initialized successfully")}catch(t){console.error(" FCM initialization failed:",t)}}checkForAutoOpenOrder(){try{const t=localStorage.getItem("autoOpenOrder");if(t){const n=JSON.parse(t);Date.now()-n.timestamp<3e4?(console.log(" AUTO-OPENING ORDER FROM NOTIFICATION:",n),localStorage.removeItem("autoOpenOrder"),this.startOrderBeeping(),setTimeout(()=>{this.showOrderModalImmediately(n)},1e3)):localStorage.removeItem("autoOpenOrder")}window.addEventListener("autoOpenedFromBackground",n=>{console.log(" APP AUTO-OPENED FROM BACKGROUND SERVICE:",n.detail),this.startOrderBeeping(),setTimeout(()=>{this.showOrderModalImmediately(n.detail)},500)})}catch(t){console.error("Error checking for auto-open order:",t)}}async getFCMToken(){try{return gt.isNativePlatform()?new Promise(t=>{Oo.addListener("registration",n=>{this.fcmToken=n.value,console.log(" FCM Token (Native):",n.value),this.sendTokenToBackend(),t(n.value)})}):null}catch(t){return console.error("Failed to get FCM token:",t),null}}setupListeners(){Oo.addListener("pushNotificationReceived",t=>{var n,r,i;if(console.log(" Push notification received:",t),console.log(" Notification data:",t.data),((n=t.data)==null?void 0:n.autoOpen)==="true"||((r=t.data)==null?void 0:r.action)==="autoOpenOrder"){console.log(" AGGRESSIVE AUTO-OPENING APP FROM DATA MESSAGE!"),this.forceAppToForeground(),this.startOrderBeeping(),this.showOrderModalImmediately({orderId:parseInt(t.data.orderId),orderNumber:t.data.orderNumber,amount:t.data.amount,autoOpened:!0,fromPush:!0,startBeeping:!0,aggressive:!0}),this.triggerBackgroundAutoOpen(t.data);return}(i=t.data)!=null&&i.orderId?(console.log(` Showing order modal for order: ${t.data.orderId}`),this.startOrderBeeping(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:parseInt(t.data.orderId),orderNumber:t.data.orderNumber,amount:t.data.amount,fromPush:!0,startBeeping:!0}}))):console.warn(" No orderId in notification data")}),Oo.addListener("pushNotificationActionPerformed",t=>{var r,i,a;console.log(" WHATSAPP-STYLE NOTIFICATION TAPPED - INSTANT OPEN LIKE MESSAGING APP:",t),console.log(" Notification data:",t.notification.data);const n=(r=t.notification.data)==null?void 0:r.orderId;n?(console.log(` WHATSAPP-STYLE INSTANT OPEN FOR ORDER: ${n}`),this.whatsappStyleInstantOpen({orderId:parseInt(n),orderNumber:(i=t.notification.data)==null?void 0:i.orderNumber,amount:(a=t.notification.data)==null?void 0:a.amount})):(console.warn(" No orderId found in notification data"),window.location.href="/vendor/orders")}),Oo.addListener("registrationError",t=>{console.error(" Push registration error:",t)}),console.log(" FCM listeners set up successfully")}async sendTokenToBackend(){if(!this.fcmToken){console.warn("No FCM token available to send");return}try{await this.waitForAuth();const{apiRequest:t}=await ze(async()=>{const{apiRequest:r}=await Promise.resolve().then(()=>us);return{apiRequest:r}},void 0),{response:n}=await t("/api/register-fcm-token/",{method:"POST",body:JSON.stringify({fcm_token:this.fcmToken,platform:gt.getPlatform()})});n.ok?console.log(" FCM token sent to backend successfully"):console.warn(" Failed to register FCM token:",n.status)}catch(t){console.warn(" Failed to send FCM token:",t),setTimeout(()=>this.sendTokenToBackend(),5e3)}}async waitForAuth(t=1e4){const n=Date.now();for(;Date.now()-n<t;){try{const{authService:r}=await ze(async()=>{const{authService:a}=await Promise.resolve().then(()=>ra);return{authService:a}},void 0);if(r.getToken()){console.log(" Authentication ready for FCM token registration");return}}catch{}await new Promise(r=>setTimeout(r,500))}console.warn(" Authentication not ready, sending FCM token anyway")}showOrderModalImmediately(t){console.log(" SHOWING ORDER MODAL IMMEDIATELY:",t),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t})),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t}))},500),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:t}))},1500)}async forceAppToForeground(){try{console.log(" FORCING APP TO FOREGROUND..."),window.focus&&window.focus(),document.hidden&&document.dispatchEvent(new Event("visibilitychange")),Object.defineProperty(document,"hidden",{value:!1,writable:!1}),Object.defineProperty(document,"visibilityState",{value:"visible",writable:!1}),window.dispatchEvent(new Event("focus")),document.dispatchEvent(new Event("visibilitychange"))}catch(t){console.warn("Could not force app focus:",t)}}triggerBackgroundAutoOpen(t){try{if(gt.isNativePlatform()){const n={action:"com.ezeyway.app.AUTO_OPEN_ORDER",extras:{orderId:t.orderId,orderNumber:t.orderNumber,amount:t.amount,autoOpened:!0}};console.log(" Triggering background auto-open:",n)}}catch(n){console.error("Failed to trigger background auto-open:",n)}}async triggerAggressiveAutoOpen(t){try{console.log(" TRIGGERING AGGRESSIVE AUTO-OPEN..."),this.forceAppToForeground(),window.location.replace("/vendor/orders");for(let n=0;n<5;n++)setTimeout(()=>{this.showOrderModalImmediately({...t,autoOpened:!0,fromPush:!0,startBeeping:!0,aggressive:!0})},n*500)}catch(n){console.error("Failed to trigger aggressive auto-open:",n)}}async whatsappStyleInstantOpen(t){console.log(" WHATSAPP-STYLE INSTANT OPEN - LIKE MESSAGING APP");try{window.location.href="/vendor/orders",localStorage.setItem("whatsappInstantOrder",JSON.stringify({...t,whatsappStyle:!0,instantOpen:!0,timestamp:Date.now()})),this.startContinuousSoundForOrder(t.orderId,t),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{...t,whatsappStyle:!0,instantOpen:!0,keepSoundPlaying:!0}}))},1e3)}catch(n){console.error("WhatsApp-style instant open failed:",n),window.location.href="/vendor/orders"}}startContinuousSoundForOrder(t,n){console.log(" STARTING CONTINUOUS SOUND FOR ORDER - LIKE WHATSAPP"),this.stopContinuousSound(t);const r=setInterval(()=>{console.log(" CONTINUOUS ORDER SOUND - NEVER STOP"),Ua.showOrderNotification((n==null?void 0:n.orderNumber)||"UNKNOWN",(n==null?void 0:n.amount)||"0",(n==null?void 0:n.orderId)||t),"vibrate"in navigator&&navigator.vibrate(500)},2e3);window.orderSoundIntervals=window.orderSoundIntervals||new Map,window.orderSoundIntervals.set(t,r),console.log(" CONTINUOUS SOUND STARTED - WILL PLAY FOREVER UNTIL STOPPED")}stopContinuousSound(t){const n=window.orderSoundIntervals;n&&n.has(t)&&(clearInterval(n.get(t)),n.delete(t),console.log(" STOPPED CONTINUOUS SOUND FOR ORDER:",t))}async startOrderBeeping(){try{console.log(" Starting order notification beeping...");const{notificationService:t}=await ze(async()=>{const{notificationService:i}=await Promise.resolve().then(()=>HP);return{notificationService:i}},void 0);await t.playNotificationSound();try{const{Haptics:i,ImpactStyle:a}=await ze(async()=>{const{Haptics:d,ImpactStyle:h}=await import("./index-C5Sw6Z7J.js");return{Haptics:d,ImpactStyle:h}},[]);await i.impact({style:a.Heavy});let o=0;const l=setInterval(async()=>{o<5?(await i.impact({style:a.Medium}),o++):clearInterval(l)},2e3)}catch(i){console.warn("Haptics not available:",i)}let n=0;const r=setInterval(async()=>{n<5?(await t.playNotificationSound(),n++):clearInterval(r)},3e3)}catch(t){console.error("Failed to start order beeping:",t)}}getFCMTokenValue(){return this.fcmToken}async registerToken(){this.fcmToken?await this.sendTokenToBackend():console.warn("No FCM token available to register")}}const vp=new Ere,Tre=Object.freeze(Object.defineProperty({__proto__:null,fcmService:vp},Symbol.toStringTag,{value:"Module"})),h2=()=>{var U,G,ne;const e=lt(),[t,n]=_.useState(!0),[r,i]=_.useState(!1),{pendingOrdersCount:a,isModalOpen:o}=Sre(),[l,d]=_.useState(null),[h,f]=_.useState(0),[u,m]=_.useState({totalOrders:0,totalRevenue:0,totalProducts:0,totalCustomers:0,monthlyEarnings:0,monthlyGrowth:0,todaysEarnings:0}),[p,w]=_.useState([]),[y,b]=_.useState([]),[g,x]=_.useState([]),[j,N]=_.useState([]),[S,C]=_.useState([0,0,0,0,0,0]),[T,A]=_.useState([]),[I,P]=_.useState(!0),[R,E]=_.useState(1),[F,O]=_.useState(!0),[M,Z]=_.useState(0),[X,z]=_.useState(0),D=T.length>0?[T[T.length-1],...T,T[0]]:[];_.useEffect(()=>{if(T.length>0){const J=setInterval(()=>{E(ie=>ie+1)},4e3);return()=>clearInterval(J)}},[T.length]),_.useEffect(()=>{T.length>0&&(R===D.length-1?setTimeout(()=>{O(!1),E(1),setTimeout(()=>O(!0),50)},500):R===0&&setTimeout(()=>{O(!1),E(T.length),setTimeout(()=>O(!0),50)},500))},[R,T.length]);const B=J=>{z(0),Z(J.targetTouches[0].clientX)},V=J=>{z(J.targetTouches[0].clientX)},H=()=>{if(!M||!X)return;const J=M-X,ie=J>50,xe=J<-50;ie&&R<T.length&&E(Se=>Se+1),xe&&R>1&&E(Se=>Se-1)};_.useEffect(()=>{i(!0),n(!1),gt.isNativePlatform()&&vp.initialize().then(()=>{console.log(" FCM Service initialized on vendor home"),setTimeout(()=>{vp.registerToken()},2e3)}).catch(ie=>{console.error(" FCM Service initialization failed:",ie)}),q(),W();const J=()=>{console.log("Order accepted - refreshing dashboard data"),q()};return window.addEventListener("orderAccepted",J),()=>{window.removeEventListener("orderAccepted",J)}},[]);const q=async()=>{var J;try{const{apiRequest:ie}=await ze(async()=>{const{apiRequest:ge}=await Promise.resolve().then(()=>us);return{apiRequest:ge}},void 0),{response:xe,data:Se}=await ie("/vendor-profiles/");xe.ok&&((J=Se==null?void 0:Se.results)!=null&&J[0])&&d(Se.results[0]);const{response:ue,data:he}=await ie("vendor-wallet/");ue.ok&&he&&f(parseFloat(he.balance)||0);const{response:Q,data:ye}=await ie("/vendor/orders/");if(console.log("Vendor orders response:",Q.ok,ye),Q.ok&&ye){const ge=ye.results||ye||[];console.log("Vendor orders found:",ge.length,ge);const ee=ge.length,ae=ge.filter(Ie=>Ie.status==="confirmed"||Ie.status==="delivered");console.log("Confirmed and delivered orders:",ae.length,ae);const oe=ae.reduce((Ie,We)=>Ie+parseFloat(We.total_amount||0),0),ke=new Date().toDateString(),de=ge.filter(Ie=>new Date(Ie.created_at).toDateString()===ke),Pe=ge.filter(Ie=>new Date(Ie.created_at).toDateString()===ke&&(Ie.status==="confirmed"||Ie.status==="delivered")).reduce((Ie,We)=>Ie+parseFloat(We.total_amount||0),0);console.log("Today earnings:",Pe,"Total revenue:",oe);const me=new Date().getMonth(),we=new Date().getFullYear(),Ee=ge.filter(Ie=>{const We=new Date(Ie.created_at);return We.getMonth()===me&&We.getFullYear()===we&&(Ie.status==="confirmed"||Ie.status==="delivered")}).reduce((Ie,We)=>Ie+parseFloat(We.total_amount||0),0),qe=[];for(let Ie=5;Ie>=0;Ie--){const We=new Date;We.setMonth(We.getMonth()-Ie);const ss=ge.filter(zs=>{const rn=new Date(zs.created_at);return rn.getMonth()===We.getMonth()&&rn.getFullYear()===We.getFullYear()&&(zs.status==="confirmed"||zs.status==="delivered")}).reduce((zs,rn)=>zs+parseFloat(rn.total_amount||0),0);qe.push(ss)}const re=new Set;ge.forEach(Ie=>{var We;(We=Ie.customer_details)!=null&&We.id?re.add(Ie.customer_details.id):Ie.delivery_phone&&re.add(Ie.delivery_phone)});const je=re.size;m({totalOrders:ee,totalRevenue:oe,totalProducts:0,totalCustomers:je,monthlyEarnings:Ee,monthlyGrowth:15,todaysEarnings:Pe}),C(qe),w(de.slice(0,5));const Oe={};ae.forEach(Ie=>{var We;(We=Ie.items)==null||We.forEach(At=>{var zs,rn,Ks;const ss=((zs=At.product_details)==null?void 0:zs.id)||At.product_name;Oe[ss]||(Oe[ss]={id:ss,name:At.product_name,price:At.unit_price,sold:0,rating:4.5,images:((rn=At.product_details)==null?void 0:rn.images)||[],quantity:((Ks=At.product_details)==null?void 0:Ks.quantity)||0}),Oe[ss].sold+=parseInt(At.quantity)||0})});const Ye=Object.values(Oe).sort((Ie,We)=>We.sold-Ie.sold).slice(0,6);b(Ye)}const{response:be,data:ce}=await ie("products/");if(be.ok&&ce){const ee=(ce.results||ce||[]).filter(oe=>{var ke;return((ke=oe.vendor_details)==null?void 0:ke.id)===(l==null?void 0:l.id)||oe.vendor_id===(l==null?void 0:l.id)});N(ee.slice(0,6)),m(oe=>({...oe,totalProducts:ee.length}));const ae=ee.filter(oe=>oe.featured).slice(0,6);x(ae)}}catch(ie){console.warn("Dashboard data fetch error:",ie)}},W=async()=>{try{const{apiRequest:J}=await ze(async()=>{const{apiRequest:Se}=await Promise.resolve().then(()=>us);return{apiRequest:Se}},void 0),{response:ie,data:xe}=await J("sliders/?user_type=vendor");if(console.log(" VendorHome API Response:",xe),ie.ok&&xe&&xe.sliders){const Se=xe.sliders.filter(ue=>{const he=ue.visibility||"both",Q=he==="vendor"||he==="both";return console.log(` VendorHome Slider "${ue.title}": visibility="${he}", shouldShow=${Q}`),Q});console.log(` VendorHome: BEFORE filtering: ${xe.sliders.length} sliders`),console.log(` VendorHome: AFTER filtering: ${Se.length} sliders`),A(Se),Se.length>0&&E(1)}}catch(J){console.warn("Sliders fetch error:",J)}finally{P(!1)}},Y=J=>{switch(J){case"pending":return{icon:Zb,color:"red",bgColor:"red-50",textColor:"red-600",label:"Action Required"};case"confirmed":case"preparing":return{icon:Yr,color:"orange",bgColor:"orange-50",textColor:"orange-600",label:"Processing"};case"delivered":return{icon:Sh,color:"green",bgColor:"green-50",textColor:"green-600",label:"Completed"};default:return{icon:Yr,color:"blue",bgColor:"blue-50",textColor:"blue-600",label:"In Progress"}}};return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Cs,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Verifying your account..."})]})}):r?s.jsxs(s.Fragment,{children:[s.jsx(Cre,{}),o&&s.jsx("div",{className:"fixed inset-0 bg-black/20 z-[9998] pointer-events-none"}),s.jsx(es,{title:"Dashboard",children:s.jsxs("div",{className:`space-y-4 pb-16 max-w-full overflow-x-hidden ${o?"pointer-events-none":""}`,children:[s.jsxs("div",{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ha,{className:"h-10 w-10",children:[s.jsx(Wr,{src:(U=l==null?void 0:l.user_info)==null?void 0:U.profile_picture}),s.jsx(fa,{className:"bg-[#A98D7E] text-white",children:((G=l==null?void 0:l.business_name)==null?void 0:G[0])||((ne=l==null?void 0:l.owner_name)==null?void 0:ne[0])||"V"})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:(l==null?void 0:l.business_name)||"My Store"}),s.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1",children:[s.jsx(Im,{className:"h-3 w-3"})," Rs",(h||0).toFixed(2)," Available"]})]})]}),s.jsxs(se,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto flex items-center gap-1",onClick:()=>e("/vendor/wallet"),children:[s.jsx(Im,{className:"h-3 w-3"}),"Wallet"]})]}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"grid grid-cols-4 gap-1 sm:gap-2",children:[s.jsx(De,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=orders"),children:s.jsx($e,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(Kt,{className:"h-2.5 w-2.5 text-teal-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Orders"}),s.jsx("p",{className:"text-xs font-bold text-gray-900",children:u.totalOrders})]})})}),s.jsx(De,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=revenue"),children:s.jsx($e,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(ti,{className:"h-2.5 w-2.5 text-blue-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Revenue"}),s.jsxs("p",{className:"text-xs font-bold text-gray-900",children:["Rs",u.totalRevenue.toFixed(2)]})]})})}),s.jsx(De,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=products"),children:s.jsx($e,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(xn,{className:"h-2.5 w-2.5 text-purple-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Products"}),s.jsx("p",{className:"text-xs font-bold text-gray-900",children:u.totalProducts})]})})}),s.jsx(De,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/vendor/summary?type=customers"),children:s.jsx($e,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-5 h-5 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-1",children:s.jsx(zp,{className:"h-2.5 w-2.5 text-orange-600"})}),s.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:"Customers"}),s.jsx("p",{className:"text-xs font-bold text-gray-900",children:u.totalCustomers})]})})})]})}),s.jsx("div",{className:"mb-6",children:I?s.jsx("div",{className:"relative overflow-hidden rounded-2xl shadow-lg h-48 bg-gray-100 flex items-center justify-center mx-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[s.jsx(Cs,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Loading banners..."})]})}):T.length>0?s.jsxs("div",{className:"relative md:overflow-visible overflow-hidden md:px-8 mx-4 md:mx-0",children:[s.jsx("div",{className:`flex ${F?"transition-transform duration-500 ease-in-out":""}`,style:{transform:typeof window<"u"&&window.innerWidth<768?`translateX(calc(-${R*100}% + 100%))`:`translateX(calc(-${R*50}% + 25%))`},onTouchStart:B,onTouchMove:V,onTouchEnd:H,children:D.map((J,ie)=>{const xe=typeof window<"u"&&window.innerWidth<768,Se=!xe&&ie===R;return s.jsx("div",{className:`flex-shrink-0 relative cursor-pointer transition-all duration-300 ${xe?"w-full rounded-2xl shadow-lg overflow-hidden":`${Se?"scale-100 opacity-100 z-10":"scale-75 opacity-60 z-0"} rounded-lg overflow-hidden`}`,style:xe?{}:{width:"50%"},onClick:()=>{J.link_url&&window.open(J.link_url,"_blank")},children:s.jsx("div",{className:"relative h-48",children:J.image_url?s.jsx("img",{src:J.image_url,alt:J.title,className:"w-full h-full object-cover md:object-contain",onError:ue=>{const he=ue.target;he.style.display="none",he.parentElement&&(he.parentElement.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)")}}):s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/80 to-purple-600/80 flex items-center justify-center",children:s.jsx("h3",{className:"text-white text-lg font-bold text-center px-4",children:J.title})})})},`${J.id}-${ie}`)})}),T.length>1&&s.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-1",children:T.map((J,ie)=>s.jsx("button",{onClick:()=>E(ie+1),className:`w-2 h-2 rounded-full transition-colors ${ie===(R-1+T.length)%T.length?"bg-blue-500":"bg-gray-300"}`},ie))})]}):s.jsx("div",{className:"h-48 bg-gray-100 rounded-2xl shadow-lg flex items-center justify-center mx-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx(Kt,{className:"h-6 w-6 text-gray-400"})}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No promotional banners available"})]})})}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Earnings"}),s.jsxs(se,{variant:"outline",className:"text-gray-700 text-sm px-3 py-2 h-auto flex items-center gap-2",onClick:()=>e("/vendor/sales"),children:[s.jsx(ti,{className:"h-4 w-4"}),"View Transactions",s.jsx(pT,{className:"h-4 w-4"})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Today's Earnings"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rs",(u.todaysEarnings||0).toFixed(2)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Earnings"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["Rs",(u.totalRevenue||0).toFixed(2)]})]})]}),s.jsx(De,{children:s.jsx($e,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Earning in ",new Date().toLocaleDateString("en-US",{month:"long"})]}),s.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["Rs",u.monthlyEarnings.toFixed(2)," ",s.jsxs("span",{className:"text-green-600",children:["+",u.monthlyGrowth,"%"]})]})]}),s.jsx("div",{className:"flex items-end gap-1 h-8",children:S.map((J,ie)=>{const xe=Math.max(...S,1),Se=J>0?Math.max(4,J/xe*24):2,ue=ie===S.length-1;return s.jsx("div",{className:`w-2 rounded-t ${ue?"bg-green-500":J>0?"bg-blue-400":"bg-gray-200"}`,style:{height:`${Se}px`}},ie)})})]})})})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Today's Orders"}),s.jsx(se,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",onClick:()=>e("/vendor/orders"),children:"View All"})]}),s.jsx("div",{className:`space-y-3 ${p.length>7?"max-h-96 overflow-y-auto":""}`,children:p.length===0?s.jsx(De,{children:s.jsxs($e,{className:"p-6 text-center",children:[s.jsx(Kt,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No orders today"})]})}):p.map(J=>{var he;const ie=Y(J.status),xe=ie.icon,Se=J.created_at?new Date(J.created_at):new Date,ue=Math.floor((Date.now()-Se.getTime())/(1e3*60));return s.jsx(De,{className:`border-l-4 border-l-${ie.color}-500 cursor-pointer hover:shadow-md transition-shadow`,onClick:()=>e(`/vendor/orders?tab=${J.status}&orderId=${J.id}`),children:s.jsxs($e,{className:"p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{className:`h-4 w-4 text-${ie.color}-500`}),s.jsx("span",{className:`text-xs font-medium text-${ie.textColor} bg-${ie.bgColor} px-2 py-1 rounded-full`,children:ie.label})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["#",J.order_number]})]}),s.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:J.status==="pending"?"New order received":J.status==="delivered"?"Order delivered successfully":"Order in progress"}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(J.total_amount||0).toFixed(2),"  ",((he=J.items)==null?void 0:he.length)||0," items  ",ue<60?`${ue} min ago`:`${Math.floor(ue/60)} hours ago`]})]})},J.id)})})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Best Selling Products"}),s.jsx(se,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",children:"View All"})]}),s.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-3 overflow-x-auto md:overflow-visible",children:s.jsx("div",{className:"flex gap-3 pb-2 md:contents",children:y.map(J=>{var ie,xe;return s.jsx(De,{className:"w-32 flex-shrink-0 md:w-auto md:flex-shrink",children:s.jsx($e,{className:"md:p-2 p-3",children:s.jsxs("div",{className:"md:space-y-1 space-y-2",children:[s.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:((xe=(ie=J.images)==null?void 0:ie[0])==null?void 0:xe.image_url)||"/api/placeholder/80/80",alt:J.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:J.name}),s.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(J.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between md:text-[10px] text-xs",children:[s.jsxs("span",{className:"text-green-600 font-medium",children:[J.sold," sold"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Rs,{className:"md:h-2 md:w-2 h-3 w-3 text-yellow-400 fill-current"}),s.jsx("span",{className:"text-gray-600",children:J.rating})]})]}),s.jsxs("div",{className:"md:text-[10px] text-xs text-gray-500",children:["Stock: ",J.quantity]})]})})},J.id)})})})]}),g.length>0&&s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Featured Products"}),s.jsx(se,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto",children:"View All"})]}),s.jsx("div",{className:"md:grid md:grid-cols-4 md:gap-3 overflow-x-auto md:overflow-visible",children:s.jsx("div",{className:"flex gap-3 pb-2 md:contents",children:g.map(J=>{var ie,xe;return s.jsx(De,{className:"w-32 flex-shrink-0 relative md:w-auto md:flex-shrink",children:s.jsx($e,{className:"md:p-2 p-3",children:s.jsxs("div",{className:"md:space-y-1 space-y-2",children:[s.jsxs("div",{className:"w-full aspect-square bg-gray-100 rounded-lg overflow-hidden relative",children:[s.jsx("img",{src:((xe=(ie=J.images)==null?void 0:ie[0])==null?void 0:xe.image_url)||"/api/placeholder/80/80",alt:J.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white md:text-[10px] text-xs px-1 py-0.5 rounded-full font-bold shadow-md",children:""})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:J.name}),s.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(J.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between md:text-[10px] text-xs",children:[s.jsxs("span",{className:"text-blue-600 font-medium",children:[J.total_sold||0," sold"]}),s.jsx("span",{className:`px-1 py-0.5 rounded md:text-[10px] text-xs ${J.quantity>10?"bg-green-100 text-green-700":J.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:J.quantity>10?"In Stock":J.quantity>0?"Low":"Out"})]})]})})},J.id)})})})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Products"}),s.jsxs(se,{variant:"outline",className:"text-gray-700 text-xs px-2 py-1 h-auto flex items-center gap-1",onClick:()=>e("/vendor/products"),children:[s.jsx(en,{className:"h-3 w-3"}),"Manage"]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-w-full",children:j.map(J=>{var ie,xe;return s.jsx(De,{className:"overflow-hidden",children:s.jsx($e,{className:"md:p-2 p-3",children:s.jsxs("div",{className:"md:space-y-1 space-y-2",children:[s.jsx("div",{className:"w-full aspect-square bg-gray-100 rounded overflow-hidden",children:s.jsx("img",{src:((xe=(ie=J.images)==null?void 0:ie[0])==null?void 0:xe.image_url)||"/api/placeholder/60/60",alt:J.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"md:text-xs text-sm font-medium text-gray-900 truncate",children:J.name}),s.jsxs("p",{className:"md:text-[10px] text-xs text-gray-600",children:["Rs",parseFloat(J.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"md:text-[10px] text-xs text-gray-500",children:["Stock: ",J.quantity]}),s.jsx("span",{className:`md:text-[10px] text-xs px-2 py-1 rounded-full ${J.quantity>10?"bg-green-100 text-green-700":J.quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:J.quantity>10?"Active":J.quantity>0?"Low Stock":"Out of Stock"})]})]})})},J.id)})})]})]})})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Yr,{className:"h-8 w-8 text-yellow-600"})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Account Under Review"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Your vendor application is being reviewed by our team. You'll receive an email notification once approved."}),s.jsx(se,{onClick:()=>e("/vendor/onboarding"),variant:"outline",className:"w-full",children:"Back to Application"})]})})},Y4=_.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:at("w-full caption-bottom text-sm",e),...t})}));Y4.displayName="Table";const X4=_.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:at("[&_tr]:border-b",e),...t}));X4.displayName="TableHeader";const J4=_.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:at("[&_tr:last-child]:border-0",e),...t}));J4.displayName="TableBody";const Pre=_.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:at("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Pre.displayName="TableFooter";const q0=_.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:at("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));q0.displayName="TableRow";const Ki=_.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:at("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Ki.displayName="TableHead";const Zi=_.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:at("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Zi.displayName="TableCell";const Are=_.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:at("mt-4 text-sm text-muted-foreground",e),...t}));Are.displayName="TableCaption";const eu=[{id:"ORD-001",customer:"John Doe",product:"Wireless Headphones",quantity:2,amount:"4,998",status:"Pending",date:"2024-01-15",address:"123 Main St, City"},{id:"ORD-002",customer:"Jane Smith",product:"Smart Watch",quantity:1,amount:"12,999",status:"Processing",date:"2024-01-14",address:"456 Oak Ave, City"},{id:"ORD-003",customer:"Mike Johnson",product:"Laptop Stand",quantity:3,amount:"2,997",status:"Shipped",date:"2024-01-13",address:"789 Pine Rd, City"},{id:"ORD-004",customer:"Sarah Wilson",product:"Bluetooth Speaker",quantity:1,amount:"3,499",status:"Delivered",date:"2024-01-12",address:"321 Elm St, City"}],f2={Pending:"bg-yellow-100 text-yellow-800",Processing:"bg-blue-100 text-blue-800",Shipped:"bg-purple-100 text-purple-800",Delivered:"bg-green-100 text-green-800"};function Ore(){const e=lt(),[t,n]=_.useState(""),[r,i]=_.useState("all"),[a,o]=_.useState(!1),[l,d]=_.useState("Tools"),h=eu.filter(f=>{const u=f.customer.toLowerCase().includes(t.toLowerCase())||f.product.toLowerCase().includes(t.toLowerCase())||f.id.toLowerCase().includes(t.toLowerCase()),m=r==="all"||f.status.toLowerCase()===r.toLowerCase();return u&&m});return s.jsx(es,{title:"Tools",children:s.jsxs("div",{className:"min-h-screen bg-gray-50 p-3 pt-1 pb-16",children:[s.jsx("div",{className:"bg-white p-4 border-b mb-4",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:s.jsx(bs,{className:"h-6 w-6 text-gray-600"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Business Tools"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Manage your products, orders, and business operations"})]})]}),s.jsxs(yc,{open:a,onOpenChange:o,children:[s.jsx(eI,{asChild:!0,children:s.jsxs(se,{size:"sm",children:[s.jsx(bs,{className:"mr-2 h-4 w-4"})," Create Order"]})}),s.jsxs(el,{className:"sm:max-w-[500px] rounded-lg",children:[s.jsxs(tl,{children:[s.jsx(sl,{className:"text-lg font-semibold",children:"Create New Order"}),s.jsx(sI,{className:"text-sm text-gray-600",children:"Fill in the details below to create a new order for your customer."})]}),s.jsxs("div",{className:"grid gap-3 py-3",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"customer",className:"text-sm font-medium",children:"Customer Name"}),s.jsx(_e,{id:"customer",placeholder:"Enter customer name",className:"h-9"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"product",className:"text-sm font-medium",children:"Product"}),s.jsxs(Zt,{children:[s.jsx(Wt,{className:"h-9",children:s.jsx(Yt,{placeholder:"Select product"})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"headphones",children:"Wireless Headphones"}),s.jsx(st,{value:"watch",children:"Smart Watch"}),s.jsx(st,{value:"stand",children:"Laptop Stand"}),s.jsx(st,{value:"speaker",children:"Bluetooth Speaker"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"quantity",className:"text-sm font-medium",children:"Quantity"}),s.jsx(_e,{id:"quantity",type:"number",placeholder:"1",className:"h-9"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"amount",className:"text-sm font-medium",children:"Amount"}),s.jsx(_e,{id:"amount",placeholder:"0.00",className:"h-9"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"address",className:"text-sm font-medium",children:"Delivery Address"}),s.jsx(Gs,{id:"address",placeholder:"Enter delivery address",className:"h-20"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{htmlFor:"notes",className:"text-sm font-medium",children:"Notes"}),s.jsx(Gs,{id:"notes",placeholder:"Any special instructions...",className:"h-16"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>o(!1),children:"Cancel"}),s.jsx(se,{size:"sm",onClick:()=>o(!1),children:"Create Order"})]})]})]})]})}),s.jsxs(De,{className:"mb-4 border border-gray-200",children:[s.jsx(kt,{className:"bg-gray-50 border-b border-gray-200 p-3",children:s.jsxs(Et,{className:"flex items-center gap-2 text-base",children:[s.jsx("div",{className:"p-1.5 bg-white rounded-md shadow-sm",children:s.jsx(bs,{className:"h-4 w-4 text-gray-700"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-900 font-bold text-sm",children:"Business Functions"}),s.jsx("p",{className:"text-xs text-gray-600 font-normal mt-0.5",children:"Manage your core business operations"})]})]})}),s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-2",children:[s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/add-products"),children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Add Products"}),s.jsx(Ze,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full text-[10px]",children:"New"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/products"),children:[s.jsx("div",{className:"bg-gradient-to-br from-green-100 to-green-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-green-200 group-hover:to-green-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Products"}),s.jsx(Ze,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full text-[10px]",children:"New"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/orders"),children:[s.jsx("div",{className:"bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-purple-200 group-hover:to-purple-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Orders"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/return-orders"),children:[s.jsx("div",{className:"bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-orange-200 group-hover:to-orange-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Return Order"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/reviews"),children:[s.jsx("div",{className:"bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-yellow-200 group-hover:to-yellow-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"Manage Reviews"})]}),s.jsxs("div",{className:"group text-center cursor-pointer p-2 rounded-md hover:bg-gray-50 transition-all duration-150 hover:shadow-sm hover:scale-105 border border-transparent hover:border-gray-200",onClick:()=>e("/vendor/income"),children:[s.jsx("div",{className:"bg-gradient-to-br from-emerald-100 to-emerald-200 rounded-lg p-2 mx-auto w-12 h-12 flex items-center justify-center mb-1 group-hover:from-emerald-200 group-hover:to-emerald-300 transition-all duration-150",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("p",{className:"text-xs text-gray-800 font-semibold mb-0.5 leading-tight",children:"My Income"})]})]})})]}),s.jsxs(De,{className:"mb-4 rounded-lg border border-gray-200",children:[s.jsx(kt,{className:"bg-gray-50 p-3 border-b border-gray-200",children:s.jsx(Et,{className:"text-base font-semibold text-gray-900",children:"Business Upgrading"})}),s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-lg p-2 flex-shrink-0",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-gray-700 font-medium",children:"Business Advisor"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Get expert guidance"})]}),s.jsx(Ze,{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"New"})]})})]}),s.jsx(De,{className:"mb-4 rounded-lg border border-gray-200",children:s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Yo,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),s.jsx(_e,{placeholder:"Search orders...",value:t,onChange:f=>n(f.target.value),className:"pl-8 h-9 text-sm"})]})}),s.jsxs(Zt,{value:r,onValueChange:i,children:[s.jsxs(Wt,{className:"w-full sm:w-[160px] h-9 text-sm",children:[s.jsx(ri,{className:"mr-2 h-3 w-3"}),s.jsx(Yt,{placeholder:"Filter by status"})]}),s.jsxs(Gt,{children:[s.jsx(st,{value:"all",children:"All Status"}),s.jsx(st,{value:"pending",children:"Pending"}),s.jsx(st,{value:"processing",children:"Processing"}),s.jsx(st,{value:"shipped",children:"Shipped"}),s.jsx(st,{value:"delivered",children:"Delivered"})]})]})]})})}),s.jsxs(De,{className:"hidden md:block mb-4 rounded-lg border border-gray-200",children:[s.jsx(kt,{className:"p-4",children:s.jsx(Et,{className:"text-base font-semibold",children:"Recent Orders"})}),s.jsx($e,{className:"p-4",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Y4,{children:[s.jsx(X4,{children:s.jsxs(q0,{children:[s.jsx(Ki,{className:"text-xs",children:"Order ID"}),s.jsx(Ki,{className:"text-xs",children:"Customer"}),s.jsx(Ki,{className:"text-xs",children:"Product"}),s.jsx(Ki,{className:"text-xs",children:"Qty"}),s.jsx(Ki,{className:"text-xs",children:"Amount"}),s.jsx(Ki,{className:"text-xs",children:"Status"}),s.jsx(Ki,{className:"text-xs",children:"Date"}),s.jsx(Ki,{className:"text-right text-xs",children:"Actions"})]})}),s.jsx(J4,{children:h.slice(0,3).map(f=>s.jsxs(q0,{className:"h-12",children:[s.jsx(Zi,{className:"text-sm font-medium",children:f.id}),s.jsx(Zi,{className:"text-sm",children:f.customer}),s.jsx(Zi,{className:"text-sm",children:f.product}),s.jsx(Zi,{className:"text-sm",children:f.quantity}),s.jsx(Zi,{className:"text-sm",children:f.amount}),s.jsx(Zi,{children:s.jsx(Ze,{className:`${f2[f.status]} text-xs px-2 py-1`,children:f.status})}),s.jsx(Zi,{className:"text-sm",children:f.date}),s.jsx(Zi,{className:"text-right",children:s.jsxs(qc,{children:[s.jsx(Hc,{asChild:!0,children:s.jsx(se,{variant:"ghost",className:"h-6 w-6 p-0",children:s.jsx(e1,{className:"h-3 w-3"})})}),s.jsxs(ul,{align:"end",children:[s.jsxs(To,{className:"text-xs",children:[s.jsx(Lm,{className:"mr-2 h-3 w-3"})," Edit"]}),s.jsx(To,{className:"text-xs",children:"View Details"}),s.jsxs(To,{className:"text-red-600 text-xs",children:[s.jsx(so,{className:"mr-2 h-3 w-3"})," Delete"]})]})]})})]},f.id))})]})})})]}),s.jsxs("div",{className:"md:hidden space-y-3",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Recent Orders"}),h.slice(0,2).map(f=>s.jsxs(De,{className:"p-3 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:f.id}),s.jsx("p",{className:"text-xs text-gray-600",children:f.customer})]}),s.jsx(Ze,{className:`${f2[f.status]} text-xs px-2 py-1`,children:f.status})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Product:"}),s.jsx("span",{className:"font-medium",children:f.product})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Qty:"}),s.jsx("span",{className:"font-medium",children:f.quantity})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600",children:"Amount:"}),s.jsx("span",{className:"font-semibold text-orange-600",children:f.amount})]})]}),s.jsx("div",{className:"flex justify-end mt-3",children:s.jsxs(qc,{children:[s.jsx(Hc,{asChild:!0,children:s.jsxs(se,{variant:"outline",size:"sm",className:"h-7 text-xs border-gray-300",children:[s.jsx(e1,{className:"h-3 w-3 mr-1"})," Actions"]})}),s.jsxs(ul,{align:"end",children:[s.jsxs(To,{className:"text-xs",children:[s.jsx(Lm,{className:"mr-2 h-3 w-3"})," Edit"]}),s.jsx(To,{className:"text-xs",children:"View Details"}),s.jsxs(To,{className:"text-red-600 text-xs",children:[s.jsx(so,{className:"mr-2 h-3 w-3"})," Delete"]})]})]})})]},f.id))]}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-4 mb-4",children:[s.jsxs(De,{className:"rounded-lg border border-gray-200",children:[s.jsx(kt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Et,{className:"text-xs font-medium text-gray-900",children:"Total Orders"})}),s.jsxs($e,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:eu.length}),s.jsx("p",{className:"text-xs text-gray-600",children:"+2 from yesterday"})]})]}),s.jsxs(De,{className:"rounded-lg border border-gray-200",children:[s.jsx(kt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Et,{className:"text-xs font-medium text-gray-900",children:"Pending"})}),s.jsxs($e,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:eu.filter(f=>f.status==="Pending").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Requires attention"})]})]}),s.jsxs(De,{className:"rounded-lg border border-gray-200",children:[s.jsx(kt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Et,{className:"text-xs font-medium text-gray-900",children:"Processing"})}),s.jsxs($e,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:eu.filter(f=>f.status==="Processing").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"In progress"})]})]}),s.jsxs(De,{className:"rounded-lg border border-gray-200",children:[s.jsx(kt,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-3",children:s.jsx(Et,{className:"text-xs font-medium text-gray-900",children:"Completed"})}),s.jsxs($e,{className:"p-3 pt-0",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:eu.filter(f=>f.status==="Delivered").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Successfully delivered"})]})]})]}),s.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 md:hidden flex justify-around items-center p-3 shadow-md",children:[s.jsxs("button",{onClick:()=>d("Home"),className:`flex flex-col items-center text-gray-500 ${l==="Home"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),s.jsxs("button",{onClick:()=>d("Tools"),className:`flex flex-col items-center text-gray-500 ${l==="Tools"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Tools"})]}),s.jsxs("button",{onClick:()=>d("Messages"),className:`flex flex-col items-center text-gray-500 ${l==="Messages"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Messages"})]}),s.jsxs("button",{onClick:()=>d("Me"),className:`flex flex-col items-center text-gray-500 ${l==="Me"?"text-orange-500":""}`,children:[s.jsx("span",{className:"text-xl",children:""}),s.jsx("span",{className:"text-xs font-medium",children:"Me"})]})]})]})})}const Rre=()=>{const[e,t]=_.useState([]),[n,r]=_.useState(!0),[i,a]=_.useState("all"),[o,l]=_.useState(!1),[d,h]=_.useState(""),[f,u]=_.useState(""),[m,p]=_.useState(1),[w,y]=_.useState(1),[b,g]=_.useState(0),x=20,[j,N]=_.useState({totalSales:0,totalRefunds:0,netEarnings:0,todaySales:0,monthSales:0});_.useEffect(()=>{C()},[d,f,m]);const S=M=>{p(M)},C=async()=>{try{r(!0);const M=new URLSearchParams({page:m.toString(),page_size:x.toString()});d&&M.append("date_from",d),f&&M.append("date_to",f);const{response:Z,data:X}=await Ve(`/vendor/orders/?${M}`);if(Z.ok&&X){const z=X.results||X||[];y(Math.ceil((X.count||z.length)/x)),g(X.count||z.length);const D=[];z.forEach(J=>{var ie,xe,Se;(J.status==="confirmed"||J.status==="delivered")&&D.push({id:J.id,order_number:J.order_number,customer_name:((ie=J.customer_details)==null?void 0:ie.username)||J.delivery_name,amount:parseFloat(J.total_amount),type:"sale",status:J.status==="delivered"?"completed":"confirmed",created_at:J.confirmed_at||J.created_at,items_count:((xe=J.items)==null?void 0:xe.length)||0}),((Se=J.refunds)==null?void 0:Se.length)>0&&J.refunds.forEach(ue=>{var he,Q;ue.status==="completed"&&D.push({id:`refund-${ue.id}`,order_number:J.order_number,customer_name:((he=J.customer_details)==null?void 0:he.username)||J.delivery_name,amount:-parseFloat(ue.approved_amount||ue.requested_amount),type:"refund",status:"completed",created_at:ue.completed_at||ue.created_at,items_count:((Q=J.items)==null?void 0:Q.length)||0})})}),D.sort((J,ie)=>new Date(ie.created_at).getTime()-new Date(J.created_at).getTime());let B=D;if(d&&f){const J=new Date(d),ie=new Date(f);ie.setHours(23,59,59,999),B=D.filter(xe=>{const Se=new Date(xe.created_at);return Se>=J&&Se<=ie})}t(B);const V=D.filter(J=>J.type==="sale").reduce((J,ie)=>J+ie.amount,0),H=Math.abs(D.filter(J=>J.type==="refund").reduce((J,ie)=>J+ie.amount,0)),q=V-H,W=new Date().toDateString(),Y=D.filter(J=>new Date(J.created_at).toDateString()===W&&J.type==="sale").reduce((J,ie)=>J+ie.amount,0),U=new Date().getMonth(),G=new Date().getFullYear(),ne=D.filter(J=>{const ie=new Date(J.created_at);return ie.getMonth()===U&&ie.getFullYear()===G&&J.type==="sale"}).reduce((J,ie)=>J+ie.amount,0);N({totalSales:V,totalRefunds:H,netEarnings:q,todaySales:Y,monthSales:ne})}}catch(M){console.error("Error fetching sales data:",M)}finally{r(!1)}},T=M=>M==="all"?e:M==="sales"?e.filter(Z=>Z.type==="sale"):M==="refunds"?e.filter(Z=>Z.type==="refund"):e,A=()=>{const M=[["Date","Time","Type","Order Number","Customer","Amount","Status","Items"].join(","),...e.map(D=>[F(D.created_at),O(D.created_at),D.type,D.order_number,`"${D.customer_name}"`,Math.abs(D.amount).toFixed(2),D.status,D.items_count].join(","))].join(`
`),Z=new Blob([M],{type:"text/csv"}),X=window.URL.createObjectURL(Z),z=document.createElement("a");z.href=X,z.download=`sales-report-${d||"all"}-${f||new Date().toISOString().split("T")[0]}.csv`,z.click(),window.URL.revokeObjectURL(X)},I=()=>{const M=new Date().toLocaleDateString(),Z=d&&f?`${d} to ${f}`:"All Time",X=`
===========================================
           SALES & EARNINGS REPORT
===========================================
Generated: ${M}
Period: ${Z}

SUMMARY
-------------------------------------------
Total Sales: Rs${j.totalSales.toFixed(2)}
Total Refunds: Rs${j.totalRefunds.toFixed(2)}
Net Earnings: Rs${j.netEarnings.toFixed(2)}
Today's Sales: Rs${j.todaySales.toFixed(2)}
This Month: Rs${j.monthSales.toFixed(2)}

TRANSACTIONS (${e.length} records)
-------------------------------------------
${e.map(D=>`${F(D.created_at)} ${O(D.created_at)} | ${D.type.toUpperCase().padEnd(6)} | ${D.order_number.padEnd(12)} | Rs${Math.abs(D.amount).toFixed(2).padStart(8)} | ${D.customer_name}`).join(`
`)}

===========================================
    `,z=window.open("","_blank");z==null||z.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${X}</pre>`),z==null||z.print()},P=()=>{const M=`Sales Report

Total Sales: Rs ${j.totalSales.toFixed(2)}
Total Refunds: Rs ${j.totalRefunds.toFixed(2)}
Net Earnings: Rs ${j.netEarnings.toFixed(2)}

Transactions: ${e.length}`;if(navigator.share)navigator.share({title:"Sales Report",text:M});else{const Z=`https://wa.me/?text=${encodeURIComponent(M)}`;window.open(Z,"_blank")}},R=()=>{p(1),C(),l(!1)},E=()=>{h(""),u(""),p(1),C(),l(!1)},F=M=>new Date(M).toLocaleDateString(),O=M=>new Date(M).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return s.jsx(es,{title:"Sales & Earnings",children:s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(De,{children:s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ti,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Total Sales"}),s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",j.totalSales.toFixed(2)]})]})]})})}),s.jsx(De,{children:s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(NT,{className:"h-4 w-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Total Refunds"}),s.jsxs("p",{className:"text-sm font-bold text-red-600",children:["Rs",j.totalRefunds.toFixed(2)]})]})]})})})]}),s.jsx(De,{children:s.jsx($e,{className:"p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Net Earnings"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["Rs",j.netEarnings.toFixed(2)]}),s.jsxs("div",{className:"flex justify-between mt-3 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Today"}),s.jsxs("p",{className:"font-semibold",children:["Rs",j.todaySales.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"This Month"}),s.jsxs("p",{className:"font-semibold",children:["Rs",j.monthSales.toFixed(2)]})]})]})]})})})]}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Sales Transactions"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:I,children:s.jsx(Qb,{className:"h-4 w-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:A,children:s.jsx(uc,{className:"h-4 w-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:P,children:s.jsx(Eh,{className:"h-4 w-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>l(!0),children:s.jsx(ri,{className:"h-4 w-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:C,children:s.jsx(Ri,{className:"h-4 w-4"})})]})]}),s.jsxs(Fi,{value:i,onValueChange:a,className:"w-full",children:[s.jsx("div",{className:"border-b border-gray-100 overflow-x-auto",children:s.jsxs(ii,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[s.jsxs(Mt,{value:"all",className:"text-xs py-2 px-3",children:["All (",e.length,")"]}),s.jsxs(Mt,{value:"sales",className:"text-xs py-2 px-3",children:["Sales (",e.filter(M=>M.type==="sale").length,")"]}),s.jsxs(Mt,{value:"refunds",className:"text-xs py-2 px-3",children:["Refunds (",e.filter(M=>M.type==="refund").length,")"]})]})}),s.jsx(bt,{value:"all",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:n?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Ri,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading transactions..."})]}):T("all").length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Kt,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No transactions found"})]}):T("all").map(M=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${M.type==="sale"?"bg-green-100":"bg-red-100"}`,children:M.type==="sale"?s.jsx(Ku,{className:"h-5 w-5 text-green-600"}):s.jsx(Zu,{className:"h-5 w-5 text-red-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[M.type==="sale"?"Sale":"Refund"," - ",M.order_number]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[M.customer_name,"  ",M.items_count," items"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[F(M.created_at)," at ",O(M.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:`text-sm font-bold ${M.type==="sale"?"text-green-600":"text-red-600"}`,children:[M.type==="sale"?"+":"","Rs",Math.abs(M.amount).toFixed(2)]}),s.jsx(Ze,{variant:"default",className:"text-xs",children:M.status})]})]})},M.id))})}),s.jsx(bt,{value:"sales",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:T("sales").map(M=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ku,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Sale - ",M.order_number]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[M.customer_name,"  ",M.items_count," items"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[F(M.created_at)," at ",O(M.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+Rs",M.amount.toFixed(2)]}),s.jsx(Ze,{variant:"default",className:"text-xs",children:"completed"})]})]})},M.id))})}),s.jsx(bt,{value:"refunds",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:T("refunds").map(M=>s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(Zu,{className:"h-5 w-5 text-red-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Refund - ",M.order_number]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[M.customer_name,"  ",M.items_count," items"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:[F(M.created_at)," at ",O(M.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-red-600",children:["Rs",Math.abs(M.amount).toFixed(2)]}),s.jsx(Ze,{variant:"secondary",className:"text-xs",children:"refunded"})]})]})},M.id))})})]})]})}),w>1&&s.jsx("div",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(m-1)*x+1," to ",Math.min(m*x,b)," of ",b," transactions"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>S(m-1),disabled:m===1,children:"Previous"}),s.jsxs("span",{className:"text-sm font-medium",children:[m," of ",w]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>S(m+1),disabled:m===w,children:"Next"})]})]})}),s.jsx(Zn,{open:o,onOpenChange:l,children:s.jsxs(Pn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(An,{className:"pb-4",children:s.jsx(On,{children:"Filter by Date Range"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"From Date"}),s.jsx(_e,{type:"date",value:d,onChange:M=>h(M.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{children:[s.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"To Date"}),s.jsx(_e,{type:"date",value:f,onChange:M=>u(M.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(se,{onClick:R,className:"flex-1",children:"Apply Filter"}),s.jsx(se,{variant:"outline",onClick:E,className:"flex-1",children:"Clear"})]}),(d||f)&&s.jsx("div",{className:"pt-4 border-t",children:s.jsx("p",{className:"text-sm text-gray-600",children:d&&f?`Showing: ${d} to ${f}`:d?`From: ${d}`:f?`Until: ${f}`:""})})]})]})})]})})},Lre=async()=>{var e;try{console.log(" Starting authentication verification...");const t=await Ce.getToken(),n=await Ce.getUser();console.log(" Main Auth Service:",{hasToken:!!t,tokenPreview:t?`${t.substring(0,10)}...`:"NO TOKEN",hasUser:!!n,userType:n==null?void 0:n.user_type,availableRoles:n==null?void 0:n.available_roles});try{const{simplePersistentAuth:r}=await ze(async()=>{const{simplePersistentAuth:a}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:a}},void 0),i=await r.getVendorAuth();console.log(" Vendor Persistent Auth:",{hasVendorAuth:!!i,tokenPreview:i!=null&&i.token?`${i.token.substring(0,10)}...`:"NO TOKEN",hasUser:!!(i!=null&&i.user),userType:(e=i==null?void 0:i.user)==null?void 0:e.user_type,isVendorLoggedIn:await r.isVendorLoggedIn()}),t&&(i!=null&&i.token)&&t!==i.token&&(console.log(" TOKEN MISMATCH DETECTED!"),console.log("Main token:",t.substring(0,15)+"..."),console.log("Vendor token:",i.token.substring(0,15)+"..."),window.location.pathname.startsWith("/vendor")&&(console.log(" Syncing main auth with vendor token..."),await Ce.setAuth(i.token,i.user)))}catch(r){console.error(" Error checking vendor auth:",r)}if(typeof localStorage<"u"){const r=localStorage.getItem("token"),i=localStorage.getItem("user"),a=localStorage.getItem("vendor_token"),o=localStorage.getItem("vendor_user");console.log(" LocalStorage Direct Check:",{hasLocalToken:!!r,hasLocalUser:!!i,hasVendorToken:!!a,hasVendorUser:!!o,localTokenPreview:r?`${r.substring(0,10)}...`:"NO TOKEN",vendorTokenPreview:a?`${a.substring(0,10)}...`:"NO TOKEN"})}return{mainAuth:{token:t,user:n},isAuthenticated:!!(t&&n)}}catch(t){return console.error(" Authentication verification failed:",t),{mainAuth:{token:null,user:null},isAuthenticated:!1,error:t.message}}},Ire=async()=>{try{console.log(" Attempting to fix authentication issues...");const{simplePersistentAuth:e}=await ze(async()=>{const{simplePersistentAuth:n}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:n}},void 0),t=await e.getVendorAuth();return t!=null&&t.token&&(t!=null&&t.user)?(console.log(" Found vendor auth, syncing with main auth..."),await Ce.setAuth(t.token,t.user),console.log(" Auth sync completed"),!0):(console.log(" No valid vendor auth found to sync"),!1)}catch(e){return console.error(" Failed to fix authentication issues:",e),!1}},Mre=[{category:"Account",items:[{id:"profile",title:"Profile Management",subtitle:"Complete profile setup and management",icon:Li,action:"navigate"},{id:"company",title:"Company Information",subtitle:"Business details and verification",icon:xn,action:"navigate"},{id:"security",title:"Security & Login",subtitle:"Password and authentication",icon:Qn,action:"navigate"}]},{category:"Business",items:[{id:"products",title:"Product Management",subtitle:"Inventory, pricing, and catalog",icon:Kt,action:"navigate"},{id:"analytics",title:"Business Analytics",subtitle:"Sales reports and insights",icon:gT,action:"navigate"}]}];function Dre(){const e=lt(),[t,n]=_.useState(null),[r,i]=_.useState(!0),[a,o]=_.useState(""),[l,d]=_.useState({businessName:"",ownerName:"",email:"",phone:"",address:"",description:"",avatar:"/api/placeholder/120/120",isOnline:!0,autoOnlineTime:"09:00",autoOfflineTime:"22:00",totalProducts:0,activeProducts:0,totalSales:0,monthlyRevenue:0});_.useEffect(()=>{h()},[]);const h=async()=>{var p,w;try{console.log(" Verifying authentication before profile fetch..."),await Lre();const{simplePersistentAuth:y}=await ze(async()=>{const{simplePersistentAuth:C}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:C}},void 0);if(!await y.isVendorLoggedIn()&&(console.log(" No vendor login found, attempting to fix auth issues..."),!await Ire())){console.log(" Could not fix auth issues, redirecting to login"),e("/vendor/login");return}const g=await y.getVendorAuth();if(g)console.log(" Restoring vendor auth for API calls"),await Ce.setAuth(g.token,g.user);else{console.log(" No vendor auth found, redirecting to login"),e("/vendor/login");return}const{response:x,data:j}=await Ve("/profile/");if(!x.ok){if(x.status===401){console.log(" Authentication failed, clearing auth and redirecting"),await Ce.clearAuth(),await y.clearVendorAuth(),e("/vendor/login");return}throw new Error("Failed to fetch user profile")}const{response:N,data:S}=await Ve("/vendor-profiles/");if(N.ok&&S){if(S.results&&S.results.length>0){const C=S.results[0];d({businessName:C.business_name||"N/A",ownerName:C.owner_name||j.username,email:C.business_email||j.email,phone:C.business_phone||j.phone_number||"N/A",address:C.business_address||"N/A",description:C.description||"No description",avatar:j.profile_picture?(j.profile_picture.startsWith("http"),j.profile_picture):"/api/placeholder/120/120",isOnline:!0,autoOnlineTime:"09:00",autoOfflineTime:"22:00",totalProducts:24,activeProducts:22,totalSales:1250,monthlyRevenue:45e3})}}else d(C=>({...C,businessName:j.username,ownerName:j.username,email:j.email,phone:j.phone_number||"N/A",avatar:j.profile_picture?(j.profile_picture.startsWith("http"),j.profile_picture):"/api/placeholder/120/120"}))}catch(y){if(console.error("Error fetching profile:",y),(p=y.message)!=null&&p.includes("Authentication")||(w=y.message)!=null&&w.includes("401")){console.log(" Authentication error, redirecting to login");const{simplePersistentAuth:b}=await ze(async()=>{const{simplePersistentAuth:g}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:g}},void 0);await Ce.clearAuth(),await b.clearVendorAuth(),e("/vendor/login");return}o("Failed to load profile data")}finally{i(!1)}},[f,u]=_.useState({esewa:{enabled:!1,merchantId:"",secretKey:""},khalti:{enabled:!1,publicKey:"",secretKey:""}}),m=p=>{p==="profile"?e("/vendor/profile"):p==="security"?e("/vendor/security"):p==="company"?e("/vendor/company"):p==="products"?e("/vendor/products"):p==="analytics"?e("/vendor/analytics"):n(p)};return t?s.jsx(es,{title:"Settings",children:s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"p-4",children:[s.jsx(se,{variant:"ghost",onClick:()=>n(null),className:"mb-4",children:" Back to Settings"}),t==="analytics"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Business Analytics"}),s.jsx(De,{children:s.jsxs($e,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Revenue Overview"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",l.monthlyRevenue.toLocaleString()]}),s.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),s.jsx("p",{className:"text-xs text-green-600",children:"+12% from last month"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",(l.monthlyRevenue*.85).toLocaleString()]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Last Month"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Previous period"})]})]})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Sales Metrics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Kt,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Total Orders"})]}),s.jsx("p",{className:"text-xl font-bold",children:l.totalSales}),s.jsx("p",{className:"text-xs text-gray-600",children:"This month"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ti,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium",children:"Avg Order Value"})]}),s.jsxs("p",{className:"text-xl font-bold",children:["",Math.round(l.monthlyRevenue/l.totalSales)]}),s.jsx("p",{className:"text-xs text-gray-600",children:"Per order"})]})]})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Product Performance"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Active Products"}),s.jsx("span",{className:"font-semibold",children:l.activeProducts})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Total Products"}),s.jsx("span",{className:"font-semibold",children:l.totalProducts})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Best Seller"}),s.jsx("span",{className:"font-semibold text-green-600",children:"Chicken Momo"})]})]})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Weekly Sales"}),s.jsx("div",{className:"flex items-end justify-between h-32 gap-2",children:[65,45,78,52,89,67,43].map((p,w)=>{const y=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],b=p/100*100;return s.jsxs("div",{className:"flex flex-col items-center flex-1",children:[s.jsx("div",{className:"w-full bg-blue-500 rounded-t mb-1",style:{height:`${b}px`}}),s.jsx("span",{className:"text-xs text-gray-600",children:y[w]})]},w)})})]})})]}),t==="payment"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Payment Settings"}),s.jsx(De,{children:s.jsxs($e,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-green-600 font-bold text-lg",children:"eS"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"eSewa Integration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive payments through eSewa"})]})]}),s.jsx(zt,{checked:f.esewa.enabled,onCheckedChange:p=>u(w=>({...w,esewa:{...w.esewa,enabled:p}}))})]}),f.esewa.enabled&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-sm font-medium",children:"Merchant ID"}),s.jsx(_e,{placeholder:"Enter your eSewa Merchant ID",value:f.esewa.merchantId,onChange:p=>u(w=>({...w,esewa:{...w.esewa,merchantId:p.target.value}}))})]}),s.jsxs("div",{children:[s.jsx(ve,{className:"text-sm font-medium",children:"Secret Key"}),s.jsx(_e,{type:"password",placeholder:"Enter your eSewa Secret Key",value:f.esewa.secretKey,onChange:p=>u(w=>({...w,esewa:{...w.esewa,secretKey:p.target.value}}))})]}),s.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," You can get your eSewa API credentials from your eSewa merchant dashboard."]})})]})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-purple-600 font-bold text-lg",children:"K"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Khalti Integration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive payments through Khalti"})]})]}),s.jsx(zt,{checked:f.khalti.enabled,onCheckedChange:p=>u(w=>({...w,khalti:{...w.khalti,enabled:p}}))})]}),f.khalti.enabled&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-sm font-medium",children:"Public Key"}),s.jsx(_e,{placeholder:"Enter your Khalti Public Key",value:f.khalti.publicKey,onChange:p=>u(w=>({...w,khalti:{...w.khalti,publicKey:p.target.value}}))})]}),s.jsxs("div",{children:[s.jsx(ve,{className:"text-sm font-medium",children:"Secret Key"}),s.jsx(_e,{type:"password",placeholder:"Enter your Khalti Secret Key",value:f.khalti.secretKey,onChange:p=>u(w=>({...w,khalti:{...w.khalti,secretKey:p.target.value}}))})]}),s.jsx("div",{className:"bg-purple-50 p-3 rounded-lg",children:s.jsxs("p",{className:"text-sm text-purple-800",children:[s.jsx("strong",{children:"Note:"})," You can get your Khalti API credentials from your Khalti merchant dashboard."]})})]})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Payment Status"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"eSewa Status"}),s.jsx(Ze,{className:f.esewa.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:f.esewa.enabled?"Active":"Inactive"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Khalti Status"}),s.jsx(Ze,{className:f.khalti.enabled?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800",children:f.khalti.enabled?"Active":"Inactive"})]})]})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(se,{className:"bg-blue-600 hover:bg-blue-700",children:"Save Payment Settings"})})]}),t==="notifications"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Notification Settings"}),s.jsx(De,{children:s.jsxs($e,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Notification Preferences"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"New Orders"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Get notified when you receive new orders"})]}),s.jsx(zt,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Payment Updates"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Notifications for payment confirmations"})]}),s.jsx(zt,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"Low Stock Alerts"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Alert when products are running low"})]}),s.jsx(zt,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium",children:"System Updates"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Important system and policy updates"})]}),s.jsx(zt,{})]})]})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Delivery Methods"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Push Notifications"}),s.jsx(zt,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Email Notifications"}),s.jsx(zt,{defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"SMS Notifications"}),s.jsx(zt,{})]})]})]})})]})]})})}):r?s.jsx(es,{title:"Settings",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):a?s.jsx(es,{title:"Settings",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:a}),s.jsx(se,{onClick:h,children:"Retry"})]})})}):s.jsx(es,{title:"Settings",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b",children:s.jsxs("div",{className:"p-4 flex items-center gap-3",children:[s.jsxs(ha,{className:"h-14 w-14",children:[s.jsx(Wr,{src:l.avatar}),s.jsx(fa,{className:"text-lg font-bold",children:l.businessName?l.businessName.charAt(0):"U"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-lg font-semibold",children:l.businessName||"Business Name"}),s.jsx("p",{className:"text-gray-500 text-xs",children:l.email})]}),s.jsx(Ze,{className:l.isOnline?"bg-green-100 text-green-800 text-xs":"bg-gray-100 text-gray-800 text-xs",children:l.isOnline?"Online":"Offline"})]})}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-100",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Account Type"]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Switch between your Customer and Vendor accounts"})]})}),s.jsx(iL,{})]}),s.jsxs(se,{variant:"outline",className:"w-full flex items-center justify-center py-4 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:async()=>{const{simplePersistentAuth:p}=await ze(async()=>{const{simplePersistentAuth:w}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:w}},void 0);await Ce.clearAuth(),await p.clearVendorAuth(),e("/vendor/login")},children:[s.jsx(Jb,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium",children:"Logout"})]}),Mre.map(p=>s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b bg-gray-50",children:s.jsx("h2",{className:"font-semibold text-gray-900",children:p.category})}),s.jsx("div",{className:"divide-y",children:p.items.map(w=>{const y=w.icon;return s.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>m(w.id),"data-section":w.id,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(y,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:w.title}),s.jsx("p",{className:"text-sm text-gray-600",children:w.subtitle})]})]}),s.jsx(Fc,{className:"h-5 w-5 text-gray-400"})]})},w.id)})})]},p.category))]})]})})}const m2=()=>{var O,M,Z,X,z;const[e,t]=_.useState(null),[n,r]=_.useState([]),[i,a]=_.useState([]),[o,l]=_.useState(""),[d,h]=_.useState(!0),[f,u]=_.useState(1),[m,p]=_.useState(!1),[w,y]=_.useState(!1),[b,g]=_.useState(null),[x,j]=_.useState(0),N=_.useRef(null),S=_.useRef(null);_.useEffect(()=>{C(),T();const B=new URLSearchParams(window.location.search).get("start_conversation");B&&setTimeout(()=>{E(parseInt(B))},500)},[]);const C=async()=>{try{if(!localStorage.getItem("token"))return;const{response:B,data:V}=await Ve("/profile/");B.ok&&V&&g(V)}catch(D){console.error("Failed to fetch current user:",D)}};_.useEffect(()=>{e&&I(e.id)},[e]),_.useEffect(()=>{if(e){const D=setInterval(async()=>{try{const B=await rr.getMessages(e.id),V=Array.isArray(B)?B.reverse():[];a(V),j(V.length)}catch(B){console.error("Failed to fetch messages:",B)}},5e3);return()=>clearInterval(D)}},[e]);const T=async(D=1,B=!1)=>{try{const{response:V,data:H}=await Ve(`messaging/conversations/?page=${D}&page_size=20`);if(!V.ok)throw new Error("Failed to fetch conversations");const W=((H==null?void 0:H.results)||[]).filter((Y,U,G)=>U===G.findIndex(ne=>{var J,ie;return((J=ne.other_participant)==null?void 0:J.id)===((ie=Y.other_participant)==null?void 0:ie.id)}));if(D===1&&!W.some(U=>{var G,ne,J;return((G=U.other_participant)==null?void 0:G.username)==="admin"||((ne=U.other_participant)==null?void 0:ne.id)===1||((J=U.other_participant)==null?void 0:J.username)==="EzzeYway Support"})){const U={id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}};W.unshift(U)}r(B?Y=>[...Y,...W].filter((G,ne,J)=>ne===J.findIndex(ie=>{var xe,Se;return((xe=ie.other_participant)==null?void 0:xe.id)===((Se=G.other_participant)==null?void 0:Se.id)})):W),p(!!(H!=null&&H.next)),u(D)}catch(V){console.error("Failed to load conversations:",V),D===1&&r([{id:0,participants:[],last_message:null,unread_count:0,other_participant:{id:1,username:"EzzeYway Support",profile_picture:null}}])}finally{h(!1),y(!1)}},A=async()=>{w||!m||(y(!0),await T(f+1,!0))},I=async D=>{try{const B=await rr.getMessages(D),V=Array.isArray(B)?B.reverse():[];a(V),j(V.length)}catch(B){console.error("Failed to load messages:",B),a([]),j(0)}},P=async()=>{if(!(!o.trim()||!e))try{const D=await rr.sendMessage({conversation_id:e.id,message_type:"text",content:o});a(B=>[...B,D.message]),l("")}catch(D){console.error("Failed to send message:",D)}},R=async D=>{var V;const B=(V=D.target.files)==null?void 0:V[0];if(!(!B||!e))try{const H=await rr.sendMessage({conversation_id:e.id,message_type:B.type.startsWith("image/")?"image":"file",file:B});a(q=>[...q,H.message])}catch(H){console.error("Failed to send file:",H)}},E=async D=>{try{const B=await rr.getOrCreateConversation(D);t(B);const V=new URL(window.location.href);V.searchParams.delete("start_conversation"),V.searchParams.delete("customer_name"),V.searchParams.delete("order_id"),window.history.replaceState({},"",V.toString())}catch(B){console.error("Failed to create conversation:",B)}},F=()=>{var D;(D=N.current)==null||D.scrollIntoView({behavior:"smooth"})};return _.useEffect(()=>{F()},[i]),d?s.jsx(es,{title:"Messages",children:s.jsx("div",{className:"h-screen bg-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),s.jsx("p",{children:"Loading conversations..."})]})})}):e?s.jsxs("div",{className:"h-screen bg-gray-50 flex flex-col",children:[s.jsxs("div",{className:"bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>t(null),children:s.jsx(Ut,{className:"h-4 w-4"})}),s.jsxs(ha,{className:"h-10 w-10",children:[((O=e.other_participant)==null?void 0:O.username)==="EzzeYway Support"?s.jsx(Wr,{src:"/logo.png"}):s.jsx(Wr,{src:is((M=e.other_participant)==null?void 0:M.profile_picture)}),s.jsx(fa,{children:(X=(Z=e.other_participant)==null?void 0:Z.username)==null?void 0:X.charAt(0)})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-sm",children:(z=e.other_participant)==null?void 0:z.username}),s.jsx("p",{className:"text-xs text-gray-500",children:"Online"})]}),s.jsx(se,{variant:"ghost",size:"sm",children:s.jsx(WF,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.map(D=>{const B=b&&D.sender.id===b.id;return s.jsx("div",{className:`w-full flex ${B?"justify-end":"justify-start"} mb-2`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow ${B?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-800 rounded-bl-none"}`,children:[D.message_type==="text"&&s.jsx("p",{className:"text-sm",children:D.content}),D.message_type==="image"&&s.jsx("div",{className:"space-y-2",children:s.jsx("img",{src:is(D.file_url),alt:"Shared image",className:"rounded max-w-full h-auto"})}),D.message_type==="file"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bi,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:D.file_name})]}),s.jsxs("div",{className:"flex items-center justify-end mt-1 gap-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(D.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),B&&s.jsx("span",{className:`text-xs ${D.is_read?"text-blue-500":"text-gray-400"}`,children:D.is_read?"":""})]})]})},D.id)}),s.jsx("div",{ref:N})]}),s.jsxs("div",{className:"bg-white border-t p-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{var D;return(D=S.current)==null?void 0:D.click()},children:s.jsx(jy,{className:"h-4 w-4"})}),s.jsx(_e,{value:o,onChange:D=>l(D.target.value),placeholder:"Type a message...",className:"flex-1",onKeyPress:D=>D.key==="Enter"&&P()}),s.jsx(se,{onClick:P,disabled:!o.trim(),children:s.jsx($p,{className:"h-4 w-4"})})]}),s.jsx("input",{ref:S,type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:R,className:"hidden"})]})]}):s.jsx(es,{title:"Messages",children:s.jsxs("div",{className:"h-screen bg-white flex flex-col",children:[s.jsx("div",{className:"border-b p-4",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h2",{className:"text-lg font-semibold",children:"Messages"})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(Fp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No conversations yet"}),s.jsx("p",{className:"text-sm",children:"Customers will message you here!"})]}):n.map(D=>{var B,V,H,q,W,Y,U;return s.jsxs("div",{className:"flex items-center gap-3 p-4 border-b hover:bg-gray-50 cursor-pointer",onClick:()=>{D.id===0?E(1):t(D)},children:[s.jsxs("div",{className:"relative",children:[s.jsxs(ha,{className:"h-12 w-12",children:[((B=D.other_participant)==null?void 0:B.username)==="EzzeYway Support"?s.jsx(Wr,{src:"/logo.png"}):s.jsx(Wr,{src:is((V=D.other_participant)==null?void 0:V.profile_picture)}),s.jsx(fa,{children:(q=(H=D.other_participant)==null?void 0:H.username)==null?void 0:q.charAt(0)})]}),s.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-sm truncate",children:(W=D.other_participant)==null?void 0:W.username}),s.jsx("span",{className:"text-xs text-gray-500",children:D.last_message?new Date(D.last_message.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:((Y=D.last_message)==null?void 0:Y.content)||((U=D.last_message)!=null&&U.file_name?` ${D.last_message.file_name}`:"")||(D.id===0?"Start conversation":"No messages yet")})]}),D.unread_count>0&&s.jsx(Ze,{className:"bg-blue-500 text-white text-xs min-w-[20px] h-5 flex items-center justify-center",children:D.unread_count})]},D.id)}),m&&s.jsx("div",{className:"p-4 text-center",children:s.jsx(se,{onClick:A,disabled:w,variant:"outline",className:"w-full",children:w?"Loading...":"Load More Conversations"})})]})]})})},Fre=()=>{var M,Z,X;const[e,t]=_.useState(null),[n,r]=_.useState(2);_.useState(!1),_.useState(""),_.useState(""),_.useState(""),_.useState(""),_.useState(""),_.useState(!1),_.useState("");const[i,a]=_.useState("all"),[o,l]=_.useState(1),[d,h]=_.useState([]),f=10,[u,m]=_.useState(!0),[p,w]=_.useState(!1),[y,b]=_.useState(""),[g,x]=_.useState(!1),[j,N]=_.useState(new Set);Cg(),_.useEffect(()=>{const z=()=>{const D=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768;x(D)};return z(),window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]),_.useEffect(()=>{const z=V=>{V.detail.type==="order"&&(console.log(" New order notification received, refreshing..."),setTimeout(()=>S(),1e3))},D=V=>{const{orderId:H,status:q,type:W}=V.detail;console.log(" Order status update received:",{orderId:H,status:q,type:W}),W==="review"?setTimeout(()=>{S()},1e3):setTimeout(()=>{S()},500)},B=V=>{const H=V.detail;(H.type==="order_update"||H.type==="order_status_change"||H.type==="refund_update")&&(console.log(" WebSocket order update received:",H.type),H.action&&H.order_id&&setTimeout(()=>S(),500))};return window.addEventListener("newNotification",z),window.addEventListener("orderStatusUpdated",D),window.addEventListener("websocket_message",B),()=>{window.removeEventListener("newNotification",z),window.removeEventListener("orderStatusUpdated",D),window.removeEventListener("websocket_message",B)}},[]),_.useEffect(()=>{console.log(" Loading initial orders..."),S()},[]);const S=async()=>{try{m(!0);const{apiRequest:z}=await ze(async()=>{const{apiRequest:W}=await Promise.resolve().then(()=>us);return{apiRequest:W}},void 0),D=new AbortController,B=setTimeout(()=>D.abort(),g?8e3:3e4),V=g?"/vendor/orders/?limit=50":"/vendor/orders/",{response:H,data:q}=await z(V,{signal:D.signal});if(clearTimeout(B),H.ok&&q){const W=q.results||q||[];console.log(" Orders received:",W.length);const Y=W.filter(J=>J.status==="pending"),U=new Set(Y.map(J=>Number(J.id))),G=[...U].filter(J=>!j.has(J)),ne=Y.filter(J=>G.includes(Number(J.id)));if(ne.length>0){console.log(" New orders detected:",ne.length,"orders");const{simpleNotificationService:J}=await ze(async()=>{const{simpleNotificationService:ie}=await Promise.resolve().then(()=>nl);return{simpleNotificationService:ie}},void 0);for(const ie of ne)try{await J.showOrderNotification(ie.order_number,ie.total_amount,ie.id)}catch(xe){console.error("Failed to show notification for order:",ie.order_number,xe)}}N(U),h(W)}else console.error("Failed to fetch orders:",H.status,q),h([])}catch(z){console.error("Error fetching vendor orders:",z),h([])}finally{m(!1)}},C=z=>{switch(z){case"new":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-orange-100 text-orange-800";case"pending":return"bg-yellow-100 text-yellow-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-gray-100 text-gray-800";case"returned":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=z=>{switch(z){case"new":return s.jsx(Gn,{className:"h-3 w-3"});case"confirmed":return s.jsx(Kt,{className:"h-3 w-3"});case"pending":return s.jsx(Cr,{className:"h-3 w-3"});case"delivered":return s.jsx(Sh,{className:"h-3 w-3"});case"cancelled":return s.jsx(qF,{className:"h-3 w-3"});case"returned":return s.jsx(Ro,{className:"h-3 w-3"});default:return s.jsx(Kt,{className:"h-3 w-3"})}},A=z=>z==="all"?d:z==="new"?d.filter(D=>D.status==="pending"):z==="pending"?d.filter(D=>D.status==="out_for_delivery"):d.filter(D=>D.status===z),I=(z,D,B)=>{h(V=>V.map(H=>H.id===z?{...H,status:D,isNew:D==="new",estimatedTime:"Ready for delivery",...B}:H))},P=z=>{const D=g?15:f;if(i==="new")return g?z.slice(0,D):z;const B=(o-1)*D,V=B+D;return z.slice(B,V)},R=z=>Math.ceil(z.length/f),E=z=>{l(z)},F=({orders:z})=>{if(i==="new")return null;const D=R(z);return D<=1?null:s.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(o-1)*f+1,"-",Math.min(o*f,z.length)," of ",z.length," orders"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>E(o-1),disabled:o===1,className:"h-7 w-7 p-0",children:s.jsx(xT,{className:"h-3 w-3"})}),s.jsx("div",{className:"flex gap-1",children:Array.from({length:D},(B,V)=>V+1).map(B=>s.jsx(se,{variant:o===B?"default":"outline",size:"sm",onClick:()=>E(B),className:"h-7 w-7 p-0 text-xs",children:B},B))}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>E(o+1),disabled:o===D,className:"h-7 w-7 p-0",children:s.jsx(Fc,{className:"h-3 w-3"})})]})]})},O=({order:z})=>{var D,B,V,H,q,W;return s.jsxs("div",{className:`p-4 ${z.status==="pending"?"bg-blue-50 border-l-4 border-blue-500":((D=z.refunds)==null?void 0:D.length)>0?"bg-orange-50 border-l-4 border-orange-400":"bg-white"} cursor-pointer hover:bg-gray-50 min-h-[120px]`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:z.order_number}),z.status==="pending"&&s.jsx(Gn,{className:"h-3 w-3 text-blue-500 animate-pulse"})]}),s.jsxs(Ze,{className:`${C(z.status)} flex items-center gap-1 text-xs px-2 py-1`,children:[T(z.status),z.status.charAt(0).toUpperCase()+z.status.slice(1)]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-800 mb-2",children:[((B=z.items)==null?void 0:B.length)||0," item",((V=z.items)==null?void 0:V.length)!==1?"s":""]}),s.jsxs("div",{className:"flex gap-3 overflow-x-auto",children:[(H=z.items)==null?void 0:H.slice(0,g?2:3).map((Y,U)=>{var G,ne,J,ie;return s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center overflow-hidden",children:(J=(ne=(G=Y.product_details)==null?void 0:G.images)==null?void 0:ne[0])!=null&&J.image_url?s.jsx("img",{src:is(Y.product_details.images[0].image_url),alt:Y.product_name,className:"w-full h-full object-cover",loading:"lazy",onError:xe=>{xe.currentTarget.style.display="none",xe.currentTarget.parentElement.innerHTML='<span class="text-xs text-gray-400"></span>'}}):s.jsx("span",{className:"text-xs text-gray-400",children:""})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-700 font-medium truncate max-w-[80px]",children:Y.product_name}),s.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[80px] capitalize",children:((ie=Y.product_details)==null?void 0:ie.category)||"Item"}),Y.product_selections&&Object.keys(Y.product_selections).length>0&&s.jsx("div",{className:"text-xs text-blue-600 truncate max-w-[80px] mt-1",children:Object.entries(Y.product_selections).map(([xe,Se])=>s.jsxs("div",{className:"capitalize",children:[xe,": ",Array.isArray(Se)?Se.join(", "):String(Se)]},xe)).slice(0,1)})]})]},U)}),((q=z.items)==null?void 0:q.length)>(g?2:3)&&s.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg border flex items-center justify-center flex-shrink-0",children:s.jsxs("span",{className:"text-xs text-gray-600",children:["+",z.items.length-(g?2:3)]})})]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[s.jsx(Li,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate text-gray-700 min-w-0",children:((W=z.customer_details)==null?void 0:W.username)||z.delivery_name})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[s.jsx(Jt,{className:"h-4 w-4 flex-shrink-0"}),s.jsx("span",{className:"truncate text-gray-700 min-w-0",children:z.delivery_address})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[s.jsx("div",{className:"flex flex-col",children:s.jsxs("span",{className:"font-semibold text-lg text-emerald-600",children:["",parseFloat(z.total_amount||0).toFixed(2)]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(se,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>t(z),children:[s.jsx(en,{className:"h-3 w-3 mr-1"}),"View"]}),z.status==="pending"&&s.jsx(se,{size:"sm",className:"h-7 text-xs bg-green-600 hover:bg-green-700",onClick:async Y=>{Y.stopPropagation();try{const{response:U}=await Ve(`/orders/${z.id}/accept/`,{method:"POST"});U.ok&&(I(z.id,"confirmed"),r(G=>Math.max(0,G-1)),window.dispatchEvent(new CustomEvent("orderStatusUpdated",{detail:{orderId:z.id,status:"confirmed",type:"accept"}})),window.dispatchEvent(new CustomEvent("newNotification",{detail:{type:"order",title:`Order #${z.order_number} Accepted`,message:"Order has been accepted by vendor",data:{orderId:z.id,status:"confirmed"}}})),setTimeout(()=>S(),1e3))}catch(U){console.error("Error accepting order:",U)}},children:"Accept"})]})]})]})]})};return s.jsx(es,{title:"Orders",children:s.jsxs("div",{className:"bg-gray-50 min-h-screen pb-20 max-w-full overflow-x-hidden",children:[u?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading..."})]}):d.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Kt,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),s.jsx("p",{className:"text-gray-500",children:"Orders will appear here when customers place them."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"flex gap-3 pb-2",children:[s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center border-l-4 border-blue-500",children:[s.jsx("p",{className:"text-xl font-bold text-blue-600",children:d.filter(z=>z.status==="pending").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"New Orders"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-yellow-600",children:d.filter(z=>z.status==="out_for_delivery").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Shipped"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-orange-600",children:d.filter(z=>z.status==="confirmed").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Confirmed"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-green-600",children:d.filter(z=>z.status==="delivered").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Delivered"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-gray-600",children:d.filter(z=>z.status==="cancelled").length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Cancelled"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-orange-600",children:d.filter(z=>{var D;return((D=z.refunds)==null?void 0:D.length)>0}).length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Returns"})]}),s.jsxs("div",{className:"min-w-[120px] bg-white rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-gray-600",children:d.length}),s.jsx("p",{className:"text-xs text-gray-600",children:"Total"})]})]})})}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"})}),s.jsxs(Fi,{value:i,onValueChange:z=>{a(z),l(1)},className:"w-full",children:[s.jsx("div",{className:"border-b border-gray-100 overflow-x-auto scrollbar-hide",children:s.jsxs(ii,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[s.jsxs(Mt,{value:"all",className:"text-xs py-2 px-3 data-[state=active]:bg-gray-50 data-[state=active]:text-gray-600 data-[state=active]:border-b-2 data-[state=active]:border-gray-600 rounded-none whitespace-nowrap flex-shrink-0",children:["All ",s.jsxs("span",{className:"font-bold ml-2",children:["(",d.length,")"]})]}),s.jsxs(Mt,{value:"new",className:"text-xs py-2 px-3 data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 data-[state=active]:border-b-2 data-[state=active]:border-blue-600 rounded-none whitespace-nowrap flex-shrink-0",children:["New ",s.jsxs("span",{className:"font-bold ml-2",children:["(",d.filter(z=>z.status==="pending").length,")"]})]}),s.jsxs(Mt,{value:"confirmed",className:"text-xs py-2 px-3 data-[state=active]:bg-orange-50 data-[state=active]:text-orange-600 data-[state=active]:border-b-2 data-[state=active]:border-orange-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Confirmed ",s.jsxs("span",{className:"font-bold ml-2",children:["(",d.filter(z=>z.status==="confirmed").length,")"]})]}),s.jsxs(Mt,{value:"delivered",className:"text-xs py-2 px-3 data-[state=active]:bg-green-50 data-[state=active]:text-green-600 data-[state=active]:border-b-2 data-[state=active]:border-green-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Delivered ",s.jsxs("span",{className:"font-bold ml-2",children:["(",d.filter(z=>z.status==="delivered").length,")"]})]}),s.jsxs(Mt,{value:"cancelled",className:"text-xs py-2 px-3 data-[state=active]:bg-gray-50 data-[state=active]:text-gray-600 data-[state=active]:border-b-2 data-[state=active]:border-gray-600 rounded-none whitespace-nowrap flex-shrink-0",children:["Cancelled ",s.jsxs("span",{className:"font-bold ml-2",children:["(",d.filter(z=>z.status==="cancelled").length,")"]})]})]})}),s.jsxs(bt,{value:"all",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:P(d).map(z=>s.jsx(O,{order:z},z.id))}),s.jsx(F,{orders:d})]}),s.jsxs(bt,{value:"new",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:P(A("new")).map(z=>s.jsx(O,{order:z},z.id))}),s.jsx(F,{orders:A("new")})]}),s.jsxs(bt,{value:"confirmed",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:P(A("confirmed")).map(z=>s.jsx(O,{order:z},z.id))}),s.jsx(F,{orders:A("confirmed")})]}),s.jsxs(bt,{value:"delivered",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:P(A("delivered")).map(z=>s.jsx(O,{order:z},z.id))}),s.jsx(F,{orders:A("delivered")})]}),s.jsxs(bt,{value:"cancelled",className:"mt-0",children:[s.jsx("div",{className:"divide-y divide-gray-100",children:P(A("cancelled")).map(z=>s.jsx(O,{order:z},z.id))}),s.jsx(F,{orders:A("cancelled")})]})]})]})})]}),s.jsx(Zn,{open:!!e,onOpenChange:()=>t(null),children:s.jsxs(Pn,{side:"bottom",className:"h-[90vh] rounded-t-xl",children:[s.jsx(An,{className:"pb-4",children:s.jsxs(On,{className:"text-left",children:["Order Details - ",e==null?void 0:e.order_number]})}),e&&s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.jsx(Li,{className:"h-4 w-4"}),"Customer Information"]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Name:"})," ",((M=e.customer_details)==null?void 0:M.username)||e.delivery_name]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(Ch,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:"Phone:"})," ",((Z=e.customer_details)==null?void 0:Z.phone_number)||e.delivery_phone]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(Jt,{className:"h-3 w-3"}),s.jsx("span",{className:"font-medium",children:"Address:"})," ",e.delivery_address]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.jsx(Kt,{className:"h-4 w-4"}),"Order Items"]}),s.jsx("div",{className:"space-y-2",children:((X=e.items)==null?void 0:X.map((z,D)=>{var B,V,H;return s.jsx("div",{className:"py-1 border-b border-gray-100 last:border-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center overflow-hidden flex-shrink-0",children:(H=(V=(B=z.product_details)==null?void 0:B.images)==null?void 0:V[0])!=null&&H.image_url?s.jsx("img",{src:is(z.product_details.images[0].image_url),alt:z.product_name,className:"w-full h-full object-cover",loading:"lazy",onError:q=>{q.currentTarget.style.display="none",q.currentTarget.parentElement.innerHTML='<span class="text-xs text-gray-400"></span>'}}):s.jsx("span",{className:"text-xs text-gray-400",children:""})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 break-words",children:z.product_name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",z.quantity]}),s.jsxs("p",{className:"text-sm font-semibold text-emerald-600 mt-1",children:["",z.total_price]})]})]})},D)}))||[]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsx("h3",{className:"font-semibold text-sm mb-3",children:"Payment Details"}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["",parseFloat(e.subtotal||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["",parseFloat(e.total_amount||0).toFixed(2)]})]})]})]}),s.jsxs("div",{className:"bg-white border rounded-lg p-3",children:[s.jsxs("h3",{className:"font-semibold text-sm mb-2 flex items-center gap-2",children:[s.jsx($F,{className:"h-4 w-4"}),"Order Timeline"]}),s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Ordered:"})," ",new Date(e.created_at).toLocaleDateString()," at ",new Date(e.created_at).toLocaleTimeString()]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx(Ze,{className:`${C(e.status)} text-xs`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]})]})]})]})}),s.jsx(yc,{open:p,onOpenChange:w,children:s.jsxs(el,{className:"max-w-5xl max-h-[95vh] p-4",children:[s.jsx(tl,{className:"pb-4",children:s.jsxs(sl,{className:"flex items-center gap-2",children:[s.jsx(en,{className:"h-5 w-5"}),"Image Preview"]})}),s.jsx("div",{className:"flex justify-center items-center bg-gray-50 rounded-lg p-4",children:s.jsx("img",{src:y,alt:"Preview",className:"max-w-full max-h-[75vh] object-contain rounded shadow-lg",onError:z=>{z.currentTarget.src="/placeholder-image.svg",z.currentTarget.alt="Image not found"}})})]})})]})})},Bl={getProducts:async()=>{const{response:e,data:t}=await Ve("/products/");if(!e.ok)throw new Error("Failed to fetch products");return t},getProduct:async e=>{const{response:t,data:n}=await Ve(`/products/${e}/`);if(!t.ok)throw new Error("Failed to fetch product");return n},createProduct:async e=>{const t=new FormData;Object.entries(e).forEach(([i,a])=>{i==="image_files"&&Array.isArray(a)?a.forEach((o,l)=>{o instanceof File&&t.append("image_files",o)}):typeof a=="object"?t.append(i,JSON.stringify(a)):t.append(i,String(a))});const{response:n,data:r}=await Ve("/products/",{method:"POST",body:t});if(!n.ok)throw new Error("Failed to create product");return r},updateProduct:async(e,t)=>{const n=new FormData;Object.entries(t).forEach(([a,o])=>{a==="image_files"&&Array.isArray(o)?o.forEach(l=>{l instanceof File&&n.append("image_files",l)}):typeof o=="boolean"?n.append(a,o?"true":"false"):typeof o=="object"&&o!==null?n.append(a,JSON.stringify(o)):o!=null&&n.append(a,String(o))});const{response:r,data:i}=await Ve(`/products/${e}/`,{method:"PATCH",body:n});if(!r.ok)throw console.error("Update failed:",r.status),new Error(`Failed to update product: ${r.status}`);return i},deleteProduct:async e=>{const{response:t}=await Ve(`/products/${e}/`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete product")}},$re=({message:e,show:t,onClose:n,duration:r=3e3})=>{const[i,a]=_.useState(!1);return _.useEffect(()=>{if(t){a(!0);const o=setTimeout(()=>{a(!1),setTimeout(n,300)},r);return()=>clearTimeout(o)}},[t,r,n]),!t&&!i?null:s.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-all duration-300 ${i?"opacity-100":"opacity-0"}`,children:[s.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl border border-green-200 p-6 mx-4 max-w-sm w-full pointer-events-auto transform transition-all duration-300 ${i?"scale-100 translate-y-0":"scale-95 translate-y-4"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Sh,{className:"h-6 w-6 text-green-600"})})}),s.jsx("div",{className:"flex-1",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Success!"})})]}),s.jsx("button",{onClick:()=>{a(!1),setTimeout(n,300)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(tn,{className:"h-5 w-5"})})]}),s.jsx("p",{className:"text-gray-600 text-center",children:e}),s.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-1",children:s.jsx("div",{className:"bg-green-500 h-1 rounded-full transition-all duration-300 ease-linear",style:{animation:i?`shrink ${r}ms linear`:"none"}})})]}),s.jsx("style",{jsx:!0,children:`
        @keyframes shrink {
          from { width: 100%; }
          to { width: 0%; }
        }
      `})]})};class Bre extends Ae.Component{constructor(n){super(n);Ht(this,"resetError",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){if(this.state.hasError){if(this.props.fallback){const n=this.props.fallback;return s.jsx(n,{error:this.state.error,resetError:this.resetError})}return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",children:[s.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"We encountered an unexpected error. Please try refreshing the page."}),s.jsx("button",{onClick:this.resetError,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors",children:"Try Again"})]})})}return this.props.children}}const zre=w4({name:Ps().min(1,"Product name is required"),category:Ps().min(1,"Category is required"),subcategory:Ps().optional(),price:yi().min(0,"Price must be positive"),cost_price:yi().nullable().optional().transform(e=>e===void 0?null:e),sku:Ps().optional(),barcode:Ps().optional(),quantity:yi().min(0,"Quantity must be positive"),low_stock_threshold:yi().min(0).optional(),description:Ps().min(1,"Description is required"),short_description:Ps().optional(),tags:hp(Ps()).default([]),image_files:hp(F0()).min(1,"At least one image is required"),status:j4(["active","draft","archived"]).default("active"),featured:bc().default(!1),free_delivery:bc().default(!1),custom_delivery_fee_enabled:bc().default(!1),custom_delivery_fee:yi().min(0).nullable().optional(),seo_title:Ps().optional(),seo_description:Ps().optional(),dynamic_fields:_4(F0()).default({})}).refine(e=>e.free_delivery?!0:!(e.custom_delivery_fee_enabled&&(e.custom_delivery_fee===null||e.custom_delivery_fee===void 0)),{message:"Custom delivery fee is required when custom delivery fee is enabled and free delivery is disabled",path:["custom_delivery_fee"]}),Vre=()=>{const e=lt(),[t,n]=_.useState(""),[r,i]=_.useState([]),[a,o]=_.useState([]),[l,d]=_.useState([]),[h,f]=_.useState(""),[u,m]=_.useState(!1),[p,w]=_.useState(!1),[y,b]=_.useState(""),[g,x]=_.useState([]),[j,N]=_.useState([]),[S,C]=_.useState([]),[T,A]=_.useState(!1),[I,P]=_.useState(!0),[R,E]=_.useState([]),[F,O]=_.useState([]),[M,Z]=_.useState(!1),X=p4({resolver:v4(zre),defaultValues:{name:"",category:"",price:"",cost_price:null,quantity:"",description:"",tags:[],image_files:[],status:"active",featured:!1,free_delivery:!1,custom_delivery_fee_enabled:!1,custom_delivery_fee:void 0,dynamic_fields:{}}}),{control:z,handleSubmit:D,watch:B,setValue:V,formState:{errors:H}}=X,q=B("category");_.useEffect(()=>{n(q),V("subcategory",""),q?(Y(q,!1),U(q)):(C([]),E([]))},[q,V]);const W=B("subcategory");_.useEffect(()=>{W?G(W):O([])},[W]);const Y=async(Q,ye=!1)=>{try{A(!0);const{apiRequest:be}=await ze(async()=>{const{apiRequest:ee}=await Promise.resolve().then(()=>us);return{apiRequest:ee}},void 0),{response:ce,data:ge}=await be(`categories/${encodeURIComponent(Q)}/subcategories/`);if(ce.ok&&ge){const ae=(ge.subcategories||[]).map((oe,ke)=>typeof oe=="string"?{id:ke+1,name:oe}:oe);C(ae),ye&&ae.length>0&&V("subcategory",ae[0].name)}else C([])}catch(be){console.error("Error fetching subcategories:",be),C([])}finally{A(!1)}},U=async Q=>{var ye;try{Z(!0);const be=(ye=j.find(ae=>ae.name===Q))==null?void 0:ye.id;if(!be)return;const{apiRequest:ce}=await ze(async()=>{const{apiRequest:ae}=await Promise.resolve().then(()=>us);return{apiRequest:ae}},void 0),{response:ge,data:ee}=await ce(`/accounts/categories/parameters/?target_id=${be}&target_type=category`);ge.ok&&(ee!=null&&ee.parameters)?E(ee.parameters):E([])}catch(be){console.error("Error fetching category parameters:",be),E([])}finally{Z(!1)}},G=async Q=>{try{Z(!0);const ye=S.find(ee=>ee.name===Q);if(!(ye!=null&&ye.id))return;const{apiRequest:be}=await ze(async()=>{const{apiRequest:ee}=await Promise.resolve().then(()=>us);return{apiRequest:ee}},void 0),{response:ce,data:ge}=await be(`/accounts/categories/parameters/?target_id=${ye.id}&target_type=subcategory`);ce.ok&&(ge!=null&&ge.parameters)?O(ge.parameters):O([])}catch(ye){console.error("Error fetching subcategory parameters:",ye),O([])}finally{Z(!1)}};_.useEffect(()=>{(async()=>{try{const{apiRequest:ye}=await ze(async()=>{const{apiRequest:ae}=await Promise.resolve().then(()=>us);return{apiRequest:ae}},void 0),{response:be,data:ce}=await ye("/categories/");be.ok&&(ce!=null&&ce.categories)&&N(ce.categories);const{response:ge,data:ee}=await ye("/vendor-profiles/");if(console.log("Vendor profile response:",{response:ge.ok,data:ee}),ge.ok&&ee&&ee.results&&ee.results.length>0){const oe=ee.results[0].categories||[];console.log("Vendor categories:",oe),x(oe);const ke=oe.length>0?oe:(ce==null?void 0:ce.categories)||[];if(ke.length>0){const de=typeof ke[0]=="string"?ke[0]:ke[0].name;V("category",de),n(de),Y(de,!0)}}}catch(ye){console.error("Error fetching data:",ye)}finally{P(!1)}})()},[V]);const ne=Q=>{const ye=Q.target.files;if(ye){const be=Array.from(ye),ce=be.map(ge=>URL.createObjectURL(ge));i(ge=>[...ge,...be]),o(ge=>[...ge,...ce]),V("image_files",[...r,...be])}},J=Q=>{URL.revokeObjectURL(a[Q]);const ye=r.filter((ce,ge)=>ge!==Q),be=a.filter((ce,ge)=>ge!==Q);i(ye),o(be),V("image_files",ye)},ie=()=>{if(h.trim()&&!l.includes(h.trim())){const Q=[...l,h.trim()];d(Q),V("tags",Q),f("")}},xe=Q=>{const ye=l.filter(be=>be!==Q);d(ye),V("tags",ye)},Se=async Q=>{try{const ye={...Q};(ye.cost_price===null||ye.cost_price===void 0)&&delete ye.cost_price,(ye.free_delivery||!ye.custom_delivery_fee_enabled)&&delete ye.custom_delivery_fee,await Bl.createProduct(ye),b("Product created successfully!"),w(!0),X.reset(),a.forEach(ce=>URL.revokeObjectURL(ce)),i([]),o([]),d([]);const be=g.length>0?g:j;if(be.length>0){const ce=typeof be[0]=="string"?be[0]:be[0].name;V("category",ce),n(ce)}}catch(ye){ln.error("Failed to create product. Please try again."),console.error("Error creating product:",ye)}},ue=Q=>{if(!Q||!Q.name||!Q.field_type)return null;const ye=`dynamic_fields.${Q.name}`;switch(Q.field_type){case"text":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.is_required},render:({field:be})=>s.jsx(_e,{...be,placeholder:Q.placeholder,className:"h-8 text-xs"})})]},Q.name);case"number":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.is_required},render:({field:be})=>s.jsx(_e,{...be,type:"number",placeholder:Q.placeholder,className:"h-8 text-xs",onChange:ce=>be.onChange(Number(ce.target.value))})})]},Q.name);case"select":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.is_required},render:({field:be})=>{var ce;return s.jsxs(Zt,{onValueChange:be.onChange,value:be.value,children:[s.jsx(Wt,{className:"h-8 text-xs",children:s.jsx(Yt,{placeholder:`Select ${Q.label.toLowerCase()}`})}),s.jsx(Gt,{children:(ce=Q.options)==null?void 0:ce.map((ge,ee)=>s.jsx(st,{value:ge,className:"text-xs",children:ge},`${Q.name}-${ge}-${ee}`))})]})}})]},Q.name);case"multiselect":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.is_required},render:({field:be})=>{var ge;const ce=be.value||[];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Zt,{onValueChange:ee=>{ce.includes(ee)||be.onChange([...ce,ee])},children:[s.jsx(Wt,{className:"h-8 text-xs",children:s.jsx(Yt,{placeholder:`Select ${Q.label.toLowerCase()}`})}),s.jsx(Gt,{children:(ge=Q.options)==null?void 0:ge.map((ee,ae)=>s.jsx(st,{value:ee,className:"text-xs",children:ee},`${Q.name}-multiselect-${ee}-${ae}`))})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:ce.map((ee,ae)=>s.jsxs(Ze,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[ee,s.jsx(tn,{className:"h-2 w-2 cursor-pointer",onClick:()=>{be.onChange(ce.filter(oe=>oe!==ee))}})]},`${Q.name}-badge-${ee}-${ae}`))})]})}})]},Q.name);case"textarea":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.is_required},render:({field:be})=>s.jsx(Gs,{...be,placeholder:Q.placeholder,className:"text-xs",rows:2})})]},Q.name);case"boolean":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:ye,control:z,render:({field:be})=>s.jsx(zt,{checked:be.value,onCheckedChange:be.onChange})}),s.jsx(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:Q.label})]},Q.name);case"date":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.is_required},render:({field:be})=>s.jsx(_e,{...be,type:"date",className:"h-8 text-xs"})})]},Q.name);case"color":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.is_required},render:({field:be})=>s.jsx(_e,{...be,type:"color",className:"h-8 text-xs"})})]},Q.name);case"range":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.is_required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.is_required},render:({field:be})=>s.jsx(_e,{...be,type:"range",min:Q.min_value||0,max:Q.max_value||100,step:Q.step||1,className:"h-8 text-xs"})})]},Q.name);default:return null}},he=Q=>{if(!Q||!Q.name||!Q.type)return null;const ye=`dynamic_fields.${Q.name}`;switch(Q.type){case"text":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.required},render:({field:be})=>s.jsx(_e,{...be,placeholder:Q.placeholder,className:"h-8 text-xs"})})]},Q.name);case"number":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.required},render:({field:be})=>s.jsx(_e,{...be,type:"number",placeholder:Q.placeholder,className:"h-8 text-xs",onChange:ce=>be.onChange(Number(ce.target.value))})})]},Q.name);case"select":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.required},render:({field:be})=>{var ce;return s.jsxs(Zt,{onValueChange:be.onChange,value:be.value,children:[s.jsx(Wt,{className:"h-8 text-xs",children:s.jsx(Yt,{placeholder:`Select ${Q.label.toLowerCase()}`})}),s.jsx(Gt,{children:(ce=Q.options)==null?void 0:ce.filter(ge=>ge!=null).map((ge,ee)=>s.jsx(st,{value:ge,className:"text-xs",children:ge},`${Q.name}-${ge}-${ee}`))})]})}})]},Q.name);case"multiselect":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.required},render:({field:be})=>{var ge;const ce=be.value||[];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Zt,{onValueChange:ee=>{ce.includes(ee)||be.onChange([...ce,ee])},children:[s.jsx(Wt,{className:"h-8 text-xs",children:s.jsx(Yt,{placeholder:`Select ${Q.label.toLowerCase()}`})}),s.jsx(Gt,{children:(ge=Q.options)==null?void 0:ge.filter(ee=>ee!=null).map((ee,ae)=>s.jsx(st,{value:ee,className:"text-xs",children:ee},`${Q.name}-multiselect-${ee}-${ae}`))})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:ce.map((ee,ae)=>s.jsxs(Ze,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[ee,s.jsx(tn,{className:"h-2 w-2 cursor-pointer",onClick:()=>{be.onChange(ce.filter(oe=>oe!==ee))}})]},`${Q.name}-badge-${ee}-${ae}`))})]})}})]},Q.name);case"textarea":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.required},render:({field:be})=>s.jsx(Gs,{...be,placeholder:Q.placeholder,className:"text-xs",rows:2})})]},Q.name);case"boolean":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:ye,control:z,render:({field:be})=>s.jsx(zt,{checked:be.value,onCheckedChange:be.onChange})}),s.jsx(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:Q.label})]},Q.name);case"date":return s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:Q.name,className:"text-xs font-medium text-gray-700",children:[Q.label," ",Q.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:ye,control:z,rules:{required:Q.required},render:({field:be})=>s.jsx(_e,{...be,type:"date",className:"h-8 text-xs"})})]},Q.name);default:return null}};return u?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>m(!1),children:s.jsx(Ut,{className:"h-4 w-4"})}),s.jsx("h1",{className:"text-lg font-semibold",children:"Product Preview"})]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>m(!1),children:"Edit"})]})}),s.jsx(W4,{productData:B()})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("style",{children:`
        input, textarea, select {
          font-size: 16px !important;
          transform: translateZ(0);
        }
        @media screen and (max-width: 768px) {
          input:focus, textarea:focus, select:focus {
            font-size: 16px !important;
            zoom: 1 !important;
          }
        }
      `}),s.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>e("/vendor/dashboard"),children:s.jsx(Ut,{className:"h-4 w-4"})}),s.jsx("h1",{className:"text-lg font-semibold",children:"Add New Product"})]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>m(!0),children:[s.jsx(en,{className:"h-4 w-4 mr-1"}),"Preview"]})]})}),s.jsx("div",{className:"max-w-2xl mx-auto p-4",children:s.jsxs("form",{onSubmit:D(Se),className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Kt,{className:"h-4 w-4 text-blue-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Basic Information"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"col-span-2 space-y-1",children:[s.jsxs(ve,{htmlFor:"name",className:"text-xs font-medium text-gray-700",children:["Product Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"name",control:z,render:({field:Q})=>s.jsx(_e,{...Q,placeholder:"Enter product name",className:"h-8 text-xs"})}),H.name&&s.jsx("p",{className:"text-red-500 text-xs",children:H.name.message})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:"category",className:"text-xs font-medium text-gray-700",children:["Category ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"category",control:z,render:({field:Q})=>s.jsxs(Zt,{onValueChange:Q.onChange,value:Q.value,children:[s.jsx(Wt,{className:"h-8 text-xs",children:s.jsx(Yt,{placeholder:"Select category"})}),s.jsx(Gt,{children:I?s.jsx(st,{value:"loading",disabled:!0,className:"text-xs",children:"Loading..."}):g.length>0?g.map(ye=>s.jsxs(st,{value:ye,className:"text-xs",children:[" ",ye]},ye)):j.map(ye=>s.jsxs(st,{value:ye.name,className:"text-xs",children:[" ",ye.name]},ye.id))})]})}),H.category&&s.jsx("p",{className:"text-red-500 text-xs",children:H.category.message})]}),S.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(ve,{className:"text-xs font-medium text-gray-700",children:"Subcategory"}),s.jsx(pt,{name:"subcategory",control:z,render:({field:Q})=>s.jsxs(Zt,{onValueChange:Q.onChange,value:Q.value,disabled:T,children:[s.jsx(Wt,{className:"h-8 text-xs",children:s.jsx(Yt,{placeholder:T?"Loading...":"Select subcategory"})}),s.jsx(Gt,{children:S.map(ye=>s.jsx(st,{value:ye.name,className:"text-xs",children:ye.name},ye.id))})]})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(ve,{className:"text-xs font-medium text-gray-700",children:"Unit"}),s.jsx(_e,{value:t?c2(t):"piece",disabled:!0,className:"h-8 text-xs bg-gray-50"})]})]})]}),R.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Xf,{className:"h-4 w-4 text-green-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Category Details"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:R.map(ue)})]}),F.length>0&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Xf,{className:"h-4 w-4 text-blue-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Subcategory Details"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:F.map(ue)})]}),t&&Ur[t]&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Xf,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"mr-1",children:Ur[t].icon}),s.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:[Ur[t].name," Details"]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ur[t].fields.map(he)})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Pricing & Inventory"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:"price",className:"text-xs font-medium text-gray-700",children:["Selling Price ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"price",control:z,render:({field:Q})=>s.jsx(_e,{...Q,type:"number",step:"0.01",placeholder:"0.00",className:"h-8 text-xs",onChange:ye=>Q.onChange(Number(ye.target.value))})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(ve,{htmlFor:"cost_price",className:"text-xs font-medium text-gray-700",children:"Cost Price"}),s.jsx(pt,{name:"cost_price",control:z,render:({field:Q})=>s.jsx(_e,{type:"number",step:"0.01",placeholder:"0.00",className:"h-8 text-xs",value:Q.value??"",onChange:ye=>{const be=ye.target.value;Q.onChange(be?Number(be):null)}})})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:"quantity",className:"text-xs font-medium text-gray-700",children:["Quantity ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"quantity",control:z,render:({field:Q})=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(_e,{type:"number",placeholder:"0",className:"h-8 text-xs flex-1",value:Q.value||"",onChange:ye=>Q.onChange(ye.target.value?Number(ye.target.value):"")}),s.jsx("span",{className:"text-xs text-gray-500 flex items-center px-2",children:t?c2(t):"piece"})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:"free_delivery",control:z,render:({field:Q})=>s.jsx(zt,{checked:Q.value,onCheckedChange:ye=>{Q.onChange(ye),ye&&(V("custom_delivery_fee_enabled",!1),V("custom_delivery_fee",void 0))}})}),s.jsx(ve,{className:"text-xs font-medium text-gray-700",children:"Free Delivery"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pt,{name:"custom_delivery_fee_enabled",control:z,render:({field:Q})=>s.jsx(zt,{checked:Q.value&&!B("free_delivery"),disabled:B("free_delivery"),onCheckedChange:ye=>{Q.onChange(ye),ye||V("custom_delivery_fee",void 0)}})}),s.jsx(ve,{className:"text-xs font-medium text-gray-700",children:"Custom Delivery Fee"})]}),B("custom_delivery_fee_enabled")&&!B("free_delivery")&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(ve,{htmlFor:"custom_delivery_fee",className:"text-xs font-medium text-gray-700",children:"Delivery Fee Amount"}),s.jsx(pt,{name:"custom_delivery_fee",control:z,render:({field:Q})=>s.jsx(_e,{type:"number",step:"0.01",placeholder:"Enter delivery fee",className:"h-8 text-xs",value:Q.value||"",onChange:ye=>{const be=ye.target.value;Q.onChange(be?Number(be):void 0)}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Si,{className:"h-4 w-4 text-purple-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Images"})]}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ne,className:"hidden",id:"image-upload"}),s.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer",children:[s.jsx(Bp,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Click to upload images"})]})]}),a.length>0&&s.jsx("div",{className:"grid grid-cols-4 gap-2",children:a.map((Q,ye)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:Q,alt:`Product ${ye+1}`,className:"w-full h-12 object-cover rounded-lg"}),s.jsx("button",{type:"button",onClick:()=>J(ye),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(tn,{className:"h-3 w-3"})}),ye===0&&s.jsx(Ze,{className:"absolute bottom-0 left-0 text-xs px-1 py-0",children:"Main"})]},ye))})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bT,{className:"h-4 w-4 text-orange-600"}),s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Description"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs(ve,{htmlFor:"description",className:"text-xs font-medium text-gray-700",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(pt,{name:"description",control:z,render:({field:Q})=>{const ye=Ae.useRef(null);return s.jsx($4,{ref:ye,theme:"snow",value:Q.value,onChange:Q.onChange,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},style:{minHeight:"120px",fontSize:"12px"}})}}),H.description&&s.jsx("p",{className:"text-red-500 text-xs",children:H.description.message})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 space-y-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Product Tags"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(_e,{value:h,onChange:Q=>f(Q.target.value),placeholder:"Add a tag",className:"h-8 text-xs",onKeyPress:Q=>Q.key==="Enter"&&(Q.preventDefault(),ie())}),s.jsx(se,{type:"button",onClick:ie,variant:"outline",size:"sm",children:s.jsx(bs,{className:"h-3 w-3"})})]}),l.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:l.map((Q,ye)=>s.jsxs(Ze,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[Q,s.jsx(tn,{className:"h-2 w-2 cursor-pointer",onClick:()=>xe(Q)})]},`tag-${Q}-${ye}`))})]}),s.jsxs("div",{className:"flex gap-3 sticky bottom-4 bg-white p-3 border border-gray-200 rounded-lg",children:[s.jsx(se,{type:"button",variant:"outline",className:"flex-1 h-9 text-xs",onClick:()=>{V("status","draft"),D(Se)()},children:"Save as Draft"}),s.jsxs(se,{type:"submit",className:"flex-1 h-9 text-xs",children:[s.jsx(ad,{className:"h-3 w-3 mr-1"}),"Publish Product"]})]})]})}),s.jsx($re,{message:y,show:p,onClose:()=>w(!1),duration:3e3})]})},Ure=()=>s.jsx(Bre,{children:s.jsx(Vre,{})}),qre=()=>{const[e,t]=_.useState(!1),[n,r]=_.useState("khalti"),[i,a]=_.useState(""),[o,l]=_.useState(!0),[d,h]=_.useState("all"),[f,u]=_.useState(""),[m,p]=_.useState(""),[w,y]=_.useState(null),[b,g]=_.useState([]),[x,j]=_.useState(!1),[N,S]=_.useState(!0),[C,T]=_.useState(!1),[A,I]=_.useState(null),[P,R]=_.useState(1),[E,F]=_.useState(1),[O,M]=_.useState(0),Z=20,X=async()=>{try{const{response:G,data:ne}=await Ve("vendor-wallet/");G.ok&&ne?y(ne):ln.error("Failed to fetch wallet data")}catch(G){console.error("Error fetching wallet data:",G),ln.error("Error loading wallet data")}finally{S(!1)}},z=async()=>{try{const G=new URLSearchParams({date_filter:d,page:P.toString(),page_size:Z.toString()});d==="custom"&&f&&m&&(G.append("date_from",f),G.append("date_to",m));const{response:ne,data:J}=await Ve(`wallet/transactions/?${G}`);ne.ok&&J?(g(J.transactions),F(J.total_pages),M(J.total_count)):ln.error("Failed to fetch transactions")}catch(G){console.error("Error fetching transactions:",G),ln.error("Error loading transactions")}};_.useEffect(()=>{X();const G=()=>{X()};return window.addEventListener("walletUpdated",G),()=>{window.removeEventListener("walletUpdated",G)}},[]),_.useEffect(()=>{w&&z()},[w,d,P,f,m]),_.useEffect(()=>{const G=()=>{X(),z()};return window.addEventListener("walletUpdated",G),()=>{window.removeEventListener("walletUpdated",G)}},[]),_.useEffect(()=>{const G=new URLSearchParams(window.location.search);if(G.get("payment_complete")==="1"){const ne=G.get("pidx");ne?D(ne):(ln.success("Payment completed successfully!"),X()),window.history.replaceState({},document.title,window.location.pathname)}},[]);const D=async G=>{try{const{response:ne,data:J}=await Ve("wallet/khalti-verify/",{method:"POST",body:JSON.stringify({pidx:G})});ne.ok&&J&&J.success?(ln.success(`Payment verified! Rs${J.amount} added to wallet`),X()):ln.error((J==null?void 0:J.error)||"Payment verification failed")}catch(ne){console.error("Error verifying payment:",ne),ln.error("Error verifying payment")}},B=async()=>{if(!n||!i)return;const{simplePersistentAuth:G}=await ze(async()=>{const{simplePersistentAuth:J}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:J}},void 0);if(!await G.isVendorLoggedIn()){ln.error("Please login to continue");return}if(j(!0),n==="khalti")try{const{response:J,data:ie}=await Ve("wallet/khalti-payment/",{method:"POST",body:JSON.stringify({amount:parseFloat(i)})});J.ok&&ie&&ie.success?window.location.href=ie.payment_url:(ln.error((ie==null?void 0:ie.error)||"Failed to initiate payment"),j(!1))}catch(J){console.error("Error initiating payment:",J),ln.error("Error processing payment"),j(!1)}t(!1),a("")},V=()=>b.filter(G=>G.transaction_type==="credit").reduce((G,ne)=>G+parseFloat(ne.amount),0),H=()=>b.filter(G=>G.transaction_type==="debit").reduce((G,ne)=>G+parseFloat(ne.amount),0),q=G=>new Date(G).toLocaleDateString(),W=G=>new Date(G).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Y=()=>{const ne=`
===========================================
           WALLET TRANSACTION SUMMARY
===========================================
Generated: ${new Date().toLocaleDateString()}
Store: ${(w==null?void 0:w.business_name)||"N/A"}
Period: ${d==="custom"?`${f} to ${m}`:d.toUpperCase()}

BALANCE OVERVIEW
-------------------------------------------
Current Balance: Rs ${(w==null?void 0:w.balance)||"0.00"}
Total Credit: Rs ${V().toFixed(2)}
Total Debit: Rs ${H().toFixed(2)}
Net Amount: Rs ${(V()-H()).toFixed(2)}

TRANSACTION DETAILS (${b.length} transactions)
-------------------------------------------
${b.map(ie=>`${q(ie.created_at)} ${W(ie.created_at)} | ${ie.transaction_type.toUpperCase().padEnd(6)} | Rs ${parseFloat(ie.amount).toFixed(2).padStart(8)} | ${ie.description}`).join(`
`)}

===========================================
    `,J=window.open("","_blank");J==null||J.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${ne}</pre>`),J==null||J.print()},U=()=>{const G=[["Date","Time","Type","Amount","Description","Method","Status"].join(","),...b.map(xe=>[q(xe.created_at),W(xe.created_at),xe.transaction_type,parseFloat(xe.amount).toFixed(2),`"${xe.description}"`,xe.payment_method||"N/A",xe.status].join(","))].join(`
`),ne=new Blob([G],{type:"text/csv"}),J=window.URL.createObjectURL(ne),ie=document.createElement("a");ie.href=J,ie.download=`wallet-transactions-${d}-${new Date().toISOString().split("T")[0]}.csv`,ie.click(),window.URL.revokeObjectURL(J)};return s.jsx(es,{title:"Wallet",children:s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 pb-20",children:[s.jsxs("div",{className:"bg-white border-b p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Im,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"My Wallet"}),s.jsx("p",{className:"text-gray-600 text-sm",children:(w==null?void 0:w.business_name)||"Loading..."})]})]}),s.jsx(se,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100",onClick:()=>l(!o),children:o?s.jsx(en,{className:"h-4 w-4"}):s.jsx(Yb,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Available Balance"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-3",children:o?`Rs ${(w==null?void 0:w.balance)||"0.00"}`:"Rs ****.**"}),s.jsxs(se,{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium",onClick:()=>t(!0),disabled:!0,children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Money"]})]})]}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(De,{className:"bg-white shadow-sm",children:s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ti,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"This Month"}),s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["+Rs ",(w==null?void 0:w.total_earned)||"0.00"]})]})]})})}),s.jsx(De,{className:"bg-white shadow-sm",children:s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(NT,{className:"h-4 w-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Expenses"}),s.jsxs("p",{className:"text-sm font-bold text-red-600",children:["-Rs ",(w==null?void 0:w.total_spent)||"0.00"]})]})]})})})]})}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Transactions"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:Y,children:[s.jsx(Qb,{className:"h-4 w-4 mr-1"}),"Print"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:U,children:[s.jsx(uc,{className:"h-4 w-4 mr-1"}),"Export"]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>T(!0),children:s.jsx(ri,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{key:"all",label:"All"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"custom",label:"Custom"}].map(G=>s.jsx(se,{variant:d===G.key?"default":"outline",size:"sm",className:"whitespace-nowrap",onClick:()=>h(G.key),children:G.label},G.key))})]}),s.jsx("div",{className:"px-4 space-y-2",children:N?s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx(Ri,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading transactions..."})]}):b.length>0?b.map(G=>s.jsx(De,{className:"bg-white shadow-sm cursor-pointer hover:bg-gray-50",onClick:()=>I(G),children:s.jsx($e,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${G.transaction_type==="credit"?"bg-green-100":"bg-red-100"}`,children:G.transaction_type==="credit"?s.jsx(Ku,{className:"h-5 w-5 text-green-600"}):s.jsx(Zu,{className:"h-5 w-5 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:G.description}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[s.jsxs("span",{children:[q(G.created_at)," at ",W(G.created_at)]}),s.jsx(Ze,{variant:G.status==="completed"?"default":"secondary",className:"text-xs",children:G.status})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:`text-sm font-bold ${G.transaction_type==="credit"?"text-green-600":"text-red-600"}`,children:[G.transaction_type==="credit"?"+":"-","Rs ",parseFloat(G.amount).toFixed(2)]}),s.jsx("p",{className:"text-xs text-gray-500",children:G.payment_method||"N/A"})]})]})})},G.id)):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Im,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No transactions found"})]})}),E>1&&s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",(P-1)*Z+1,"-",Math.min(P*Z,O)," of ",O," transactions"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>R(P-1),disabled:P===1,className:"h-8 w-8 p-0",children:s.jsx(xT,{className:"h-4 w-4"})}),s.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,E)},(G,ne)=>{const J=P<=3?ne+1:P-2+ne;return J>E?null:s.jsx(se,{variant:P===J?"default":"outline",size:"sm",onClick:()=>R(J),className:"h-8 w-8 p-0 text-xs",children:J},J)})}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>R(P+1),disabled:P===E,className:"h-8 w-8 p-0",children:s.jsx(Fc,{className:"h-4 w-4"})})]})]})}),s.jsx(Zn,{open:e,onOpenChange:t,children:s.jsxs(Pn,{side:"bottom",className:"h-[80vh] rounded-t-3xl",children:[s.jsx(An,{className:"pb-6",children:s.jsx(On,{className:"text-center text-xl",children:"Add Money to Wallet"})}),s.jsxs("div",{className:"space-y-6 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(ve,{className:"text-sm font-medium",children:"Enter Amount"}),s.jsx(_e,{type:"number",placeholder:"Rs 0.00",value:i,onChange:G=>a(G.target.value),className:"h-12 text-lg text-center"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:[500,1e3,2e3].map(G=>s.jsxs(se,{variant:"outline",onClick:()=>a(G.toString()),className:"h-10",children:["Rs ",G]},G))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ve,{className:"text-sm font-medium",children:"Payment Method"}),s.jsx(De,{className:"cursor-pointer transition-all ring-2 ring-purple-500 bg-purple-50",onClick:()=>r("khalti"),children:s.jsx($e,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(bl,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Khalti"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Secure digital payment gateway"})]})]})})})]}),s.jsx("div",{className:"fixed bottom-4 left-4 right-4",children:s.jsx(se,{className:"w-full h-12 text-lg font-medium",disabled:!n||!i||x,onClick:B,children:x?s.jsxs(s.Fragment,{children:[s.jsx(Ri,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Add Rs ${i||"0"}`})})]})]})}),s.jsx(Zn,{open:C,onOpenChange:T,children:s.jsxs(Pn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(An,{className:"pb-4",children:s.jsxs(On,{className:"flex items-center justify-between",children:["Filter Transactions",s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>T(!1),children:s.jsx(tn,{className:"h-4 w-4"})})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"Date Range"}),s.jsx("div",{className:"space-y-2",children:[{key:"all",label:"All Time"},{key:"today",label:"Today"},{key:"week",label:"This Week"},{key:"custom",label:"Custom Range"}].map(G=>s.jsx(se,{variant:d===G.key?"default":"outline",size:"sm",className:"w-full justify-start",onClick:()=>{h(G.key),R(1)},children:G.label},G.key))})]}),d==="custom"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-xs font-medium",children:"From Date"}),s.jsx(_e,{type:"date",value:f,onChange:G=>{u(G.target.value),R(1)},className:"h-9 text-sm mt-1"})]}),s.jsxs("div",{children:[s.jsx(ve,{className:"text-xs font-medium",children:"To Date"}),s.jsx(_e,{type:"date",value:m,onChange:G=>{p(G.target.value),R(1)},className:"h-9 text-sm mt-1"})]})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:["Total Transactions: ",O]}),s.jsxs("p",{children:["Total Credit: Rs ",V().toFixed(2)]}),s.jsxs("p",{children:["Total Debit: Rs ",H().toFixed(2)]}),s.jsxs("p",{className:"font-medium",children:["Net: Rs ",(V()-H()).toFixed(2)]})]})})]})]})}),s.jsx(Zn,{open:!!A,onOpenChange:()=>I(null),children:s.jsxs(Pn,{side:"bottom",className:"h-[70vh] rounded-t-xl",children:[s.jsx(An,{className:"pb-4",children:s.jsx(On,{className:"text-left",children:"Transaction Details"})}),A&&s.jsxs("div",{className:"space-y-4 overflow-y-auto h-full pb-20",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${A.transaction_type==="credit"?"bg-green-100":"bg-red-100"}`,children:A.transaction_type==="credit"?s.jsx(Ku,{className:"h-6 w-6 text-green-600"}):s.jsx(Zu,{className:"h-6 w-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-lg",children:A.description}),s.jsxs("p",{className:`text-xl font-bold ${A.transaction_type==="credit"?"text-green-600":"text-red-600"}`,children:[A.transaction_type==="credit"?"+":"-","Rs ",parseFloat(A.amount).toFixed(2)]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Transaction ID"}),s.jsxs("p",{className:"font-medium",children:["TXN-",A.id]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Status"}),s.jsx(Ze,{variant:A.status==="completed"?"default":"secondary",children:A.status})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Date & Time"}),s.jsxs("p",{className:"font-medium",children:[q(A.created_at)," at ",W(A.created_at)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Method"}),s.jsx("p",{className:"font-medium",children:A.payment_method||"N/A"})]})]})]}),(A.order_amount||A.reference_id)&&s.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[s.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[s.jsx(bi,{className:"h-4 w-4"}),"Additional Details"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[A.order_amount&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Order Amount:"}),s.jsxs("span",{className:"font-medium",children:["Rs ",parseFloat(A.order_amount).toFixed(2)]})]}),A.reference_id&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Reference ID:"}),s.jsx("span",{className:"font-medium",children:A.reference_id})]})]})]})]})]})})]})})};function Hre({requiredRole:e,currentPage:t}){const{state:n}=Fn(),r=lt(),i=n.user,a=i==null?void 0:i.user_type,l=((i==null?void 0:i.available_roles)||[]).includes(e);return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs(De,{className:"max-w-md w-full",children:[s.jsxs(kt,{className:"text-center",children:[s.jsx(Zb,{className:"h-12 w-12 text-orange-500 mx-auto mb-4"}),s.jsx(Et,{children:"Role Access Required"})]}),s.jsxs($e,{className:"space-y-4",children:[s.jsxs("div",{className:"text-center text-gray-600",children:[s.jsxs("p",{children:["You need ",s.jsx("strong",{children:e})," access to view this page."]}),s.jsxs("p",{className:"text-sm mt-2",children:["Current role: ",s.jsx("span",{className:"font-medium",children:a})]})]}),l?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[s.jsx(JF,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Good news!"})]}),s.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["You have ",e," access available. Switch your role to continue."]})]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[s.jsx("span",{children:a}),s.jsx(pT,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:e})]}),s.jsxs(se,{onClick:()=>{r(e==="vendor"?"/vendor/onboarding":"/home")},className:"w-full",children:["Switch to ",e==="vendor"?"Vendor":"Customer"]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"bg-orange-50 p-3 rounded-lg",children:s.jsxs("p",{className:"text-sm text-orange-700",children:["You don't have ",e," access yet."]})}),e==="vendor"?s.jsx(se,{onClick:()=>r("/vendor/onboarding"),className:"w-full",children:"Complete Vendor Onboarding"}):s.jsx(se,{onClick:()=>r("/home"),className:"w-full",children:"Go to Customer Area"})]}),s.jsx("div",{className:"pt-2 border-t",children:s.jsx(se,{variant:"outline",onClick:()=>r(-1),className:"w-full",children:"Go Back"})})]})]})})}function Wre({children:e,redirectTo:t="/vendor/login"}){const[n,r]=_.useState(!0),[i,a]=_.useState(!1),o=lt();_.useEffect(()=>{l()},[]);const l=async()=>{try{const d=await uK("vendor");d.success?a(!0):d.needsLogin?o(t):d.roleNotAvailable?o("/vendor/onboarding"):o(t)}catch(d){console.error("Vendor auth guard error:",d),o(t)}finally{r(!1)}};return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i?s.jsx(s.Fragment,{children:e}):null}const Gre=()=>{var D;const e=lt(),{toast:t}=ts(),{logout:n,state:r,login:i}=Fn(),[a,o]=_.useState("personal"),[l,d]=_.useState(!1),[h,f]=_.useState(!0),[u,m]=_.useState("");_.useState(null);const[p,w]=_.useState(null),[y,b]=_.useState(!1),[g,x]=_.useState(""),[j,N]=_.useState(null),[S,C]=_.useState({businessName:"",ownerName:"",email:"",phone:"",address:"",locationAddress:"",city:"",state:"",pincode:"",latitude:null,longitude:null,businessType:"",categories:[],description:"",bankName:"",accountNumber:"",ifscCode:"",accountHolderName:"",gstNumber:"",panNumber:"",businessLicense:null,citizenshipFront:null,citizenshipBack:null,shopImages:[],deliveryRadius:"",minOrderAmount:"",profileImage:null,referralCode:null});_.useEffect(()=>{T(),A(),P()},[]),_.useEffect(()=>{var B;((B=r.user)==null?void 0:B.user_type)==="vendor"&&T()},[(D=r.user)==null?void 0:D.user_type]);const T=async()=>{var B,V,H,q,W,Y,U,G,ne,J,ie,xe;try{const Se=await hK();if(Se.needsLogin){e("/vendor/login");return}if(Se.needsOnboarding){m("You don't have access to vendor features. Please complete vendor onboarding first.");return}if(Se.needsRoleSwitch){if(!(await m_()).success){m("Failed to switch to vendor role. Please try logging in again.");return}const ye=await Ce.getUser();if(ye){const be=await Ce.getToken();await i(ye,be)}}let{response:ue,data:he}=await Ve("/vendor-profiles/");if(ue.status===401||ue.status===403){console.log("Auth error, attempting to refresh and retry...");const Q=await Ce.getUser();if(Q&&Q.user_type==="vendor"){const ye=await Ve("/vendor-profiles/");ue=ye.response,he=ye.data}if(ue.status===401||ue.status===403){m("You don't have access to vendor features. Please complete vendor onboarding first.");return}}if(!ue.ok)throw new Error("Failed to fetch profile data");if(he&&he.results&&he.results.length>0){const Q=he.results[0];let ye=((B=Q.user_info)==null?void 0:B.referral_code)||null;if(!ye)try{const{response:be,data:ce}=await Ve("/generate-referral-code/",{method:"POST"});be.ok&&ce.success&&(ye=ce.referral_code,console.log("Auto-generated referral code:",ye))}catch(be){console.error("Failed to auto-generate referral code:",be)}C({businessName:Q.business_name||"",ownerName:Q.owner_name||"",email:Q.business_email||"",phone:Q.business_phone||"",address:Q.business_address||"",locationAddress:Q.location_address||"",city:Q.city||"",state:Q.state||"",pincode:Q.pincode||"",latitude:Q.latitude||null,longitude:Q.longitude||null,businessType:Q.business_type||"",categories:Array.isArray(Q.categories)?Q.categories:[],description:Q.description||"",bankName:Q.bank_name||"",accountNumber:Q.account_number||"",ifscCode:Q.ifsc_code||"",accountHolderName:Q.account_holder_name||"",gstNumber:Q.gst_number||"",panNumber:Q.pan_number||"",businessLicense:Q.business_license_file_url?{name:"PAN Registration",url:Q.business_license_file_url}:null,citizenshipFront:(V=Q.documents)!=null&&V.find(be=>{var ce;return(ce=be.document_url)==null?void 0:ce.includes("citizenship_front")})?{name:"Citizenship Front",url:Q.documents.find(be=>{var ce;return(ce=be.document_url)==null?void 0:ce.includes("citizenship_front")}).document_url}:null,citizenshipBack:(H=Q.documents)!=null&&H.find(be=>{var ce;return(ce=be.document_url)==null?void 0:ce.includes("citizenship_back")})?{name:"Citizenship Back",url:Q.documents.find(be=>{var ce;return(ce=be.document_url)==null?void 0:ce.includes("citizenship_back")}).document_url}:null,shopImages:Q.shop_images||[],deliveryRadius:((q=Q.delivery_radius)==null?void 0:q.toString())||"",minOrderAmount:Q.min_order_amount||"",profileImage:((W=Q.user_info)==null?void 0:W.profile_picture)||null,referralCode:ye})}else{console.log("No vendor profile found, creating one...");const Q=await Ce.getUser();if(Q)if(await I(Q)){const be=await Ve("/vendor-profiles/");if(be.response.ok&&((U=(Y=be.data)==null?void 0:Y.results)==null?void 0:U.length)>0){const ce=be.data.results[0];let ge=((G=ce.user_info)==null?void 0:G.referral_code)||null;if(!ge)try{const{response:ee,data:ae}=await Ve("/generate-referral-code/",{method:"POST"});ee.ok&&ae.success&&(ge=ae.referral_code,console.log("Auto-generated referral code for new profile:",ge))}catch(ee){console.error("Failed to auto-generate referral code for new profile:",ee)}C({businessName:ce.business_name||"",ownerName:ce.owner_name||"",email:ce.business_email||"",phone:ce.business_phone||"",address:ce.business_address||"",locationAddress:ce.location_address||"",city:ce.city||"",state:ce.state||"",pincode:ce.pincode||"",latitude:ce.latitude||null,longitude:ce.longitude||null,businessType:ce.business_type||"",categories:Array.isArray(ce.categories)?ce.categories:[],description:ce.description||"",bankName:ce.bank_name||"",accountNumber:ce.account_number||"",ifscCode:ce.ifsc_code||"",accountHolderName:ce.account_holder_name||"",gstNumber:ce.gst_number||"",panNumber:ce.pan_number||"",businessLicense:ce.business_license_file_url?{name:"PAN Registration",url:ce.business_license_file_url}:null,citizenshipFront:(ne=ce.documents)!=null&&ne.find(ee=>{var ae;return(ae=ee.document_url)==null?void 0:ae.includes("citizenship_front")})?{name:"Citizenship Front",url:ce.documents.find(ee=>{var ae;return(ae=ee.document_url)==null?void 0:ae.includes("citizenship_front")}).document_url}:null,citizenshipBack:(J=ce.documents)!=null&&J.find(ee=>{var ae;return(ae=ee.document_url)==null?void 0:ae.includes("citizenship_back")})?{name:"Citizenship Back",url:ce.documents.find(ee=>{var ae;return(ae=ee.document_url)==null?void 0:ae.includes("citizenship_back")}).document_url}:null,shopImages:ce.shop_images||[],deliveryRadius:((ie=ce.delivery_radius)==null?void 0:ie.toString())||"",minOrderAmount:ce.min_order_amount||"",profileImage:((xe=ce.user_info)==null?void 0:xe.profile_picture)||null,referralCode:ge})}else C({...S,businessName:Q.username||"My Business",ownerName:Q.username||"Owner",email:Q.email||""})}else m("Failed to create vendor profile");else m("User not found")}}catch(Se){console.error("Error fetching profile:",Se),m("Failed to load profile data")}finally{f(!1)}},A=async()=>{try{if(!await Ce.isAuthenticated())return;const{response:V,data:H}=await Ve("/profile/");if(V.ok&&H){const q={...r.user,available_roles:H.available_roles,current_role:H.current_role};console.log("Updated user data:",q)}}catch(B){console.error("Error fetching user profile:",B)}},I=async B=>{try{const V={business_name:B.username||"My Business",owner_name:B.username||"Owner",business_email:B.email||"",business_phone:B.phone_number||"",business_address:"",city:"",state:"",pincode:"",business_type:"retailer",categories:[],description:"",is_active:!0},{response:H}=await Ve("/vendor-profiles/",{method:"POST",body:JSON.stringify(V)});return H.ok?(console.log("Vendor profile created successfully"),!0):!1}catch(V){return console.error("Failed to create vendor profile:",V),!1}},P=async()=>{try{const{response:B,data:V}=await Ve("/delivery-radius/");B.ok&&V&&N(V.delivery_radius)}catch(B){console.error("Error fetching admin delivery radius:",B)}},R=[{value:"retailer",label:"Retailer"},{value:"wholesaler",label:"Wholesaler"},{value:"manufacturer",label:"Manufacturer"},{value:"service_provider",label:"Service Provider"},{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"}],E=(B,V)=>{C(H=>({...H,[B]:V}))},F=async B=>{if(B)try{if(!await Ce.isAuthenticated())return;const H=new FormData;H.append("profile_picture",B);const{response:q,data:W}=await Ve("/profile/upload-picture/",{method:"POST",body:H});if(q.ok&&W)console.log("Upload result:",W),console.log("Profile picture URL:",W.profile_picture),C(Y=>({...Y,profileImage:W.profile_picture||null})),t({title:"Success",description:"Profile image updated successfully!"}),setTimeout(()=>{T()},500);else{const Y=await q.json();throw console.error("Profile image upload error:",Y),new Error("Profile image upload failed")}}catch(V){console.error("Profile image upload error:",V),t({title:"Error",description:"Failed to upload profile image. Please try again.",variant:"destructive"})}},O=async(B,V,H)=>{var W;if(!V)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(V.type)){t({title:"Error",description:"Please upload only PDF, JPG, JPEG, or PNG files.",variant:"destructive"});return}if(V.size>5*1024*1024){t({title:"Error",description:"File size must be less than 5MB.",variant:"destructive"});return}w(B);try{if(!await Ce.isAuthenticated())return;const U=new FormData;U.append(B,V),U.append("business_name",S.businessName),U.append("business_email",S.email),U.append("business_phone",S.phone),U.append("business_address",S.address),U.append("city",S.city),U.append("state",S.state),U.append("pincode",S.pincode),U.append("business_type",S.businessType);const{response:G,data:ne}=await Ve("/vendor-profiles/");if(!G.ok)throw new Error("Failed to get profile");const J=(W=ne.results[0])==null?void 0:W.id;if(!J)throw new Error("Profile not found");const{response:ie,data:xe}=await Ve(`/vendor-profiles/${J}/`,{method:"PATCH",body:U});if(!ie.ok)throw new Error("Upload failed");B==="business_license_file"?E("businessLicense",{name:"Business License",url:xe.business_license_file_url}):B==="gst_certificate"?E("gstCertificate",{name:"GST Certificate",url:xe.gst_certificate_url}):B==="fssai_license"&&E("fssaiLicense",{name:"FSSAI License",url:xe.fssai_license_url}),t({title:"Success",description:"Document uploaded successfully!"}),B==="additionalDocs"&&(b(!1),x(""),T())}catch(Y){console.error("Upload error:",Y),t({title:"Error",description:"Failed to upload document. Please try again.",variant:"destructive"})}finally{w(null)}},M=({title:B,docType:V,document:H,onUpload:q})=>s.jsxs("div",{children:[s.jsx(ve,{children:B}),s.jsxs("div",{className:"mt-2 p-4 border border-gray-300 rounded-lg bg-gray-50",children:[s.jsx(bi,{className:"h-6 w-6 mx-auto mb-2 text-gray-500"}),H?s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx("p",{className:"text-sm text-green-600",children:" Uploaded"}),s.jsxs(yc,{children:[s.jsx(eI,{asChild:!0,children:s.jsxs(se,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",children:[s.jsx(en,{className:"h-3 w-3 mr-1"}),"View"]})}),s.jsxs(el,{className:"max-w-4xl w-full h-[80vh]",children:[s.jsx(tl,{children:s.jsx(sl,{children:B})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("img",{src:H.url,alt:B,className:"w-full h-full object-contain"})})]})]})]}):s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Not uploaded"}),s.jsxs(se,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",onClick:()=>{const W=H.createElement("input");W.type="file",W.accept=".pdf,.jpg,.jpeg,.png",W.onchange=Y=>{var G;const U=(G=Y.target.files)==null?void 0:G[0];U&&q(U)},W.click()},disabled:p===V,children:[p===V?s.jsx(Ri,{className:"h-3 w-3 mr-1 animate-spin"}):s.jsx(Bp,{className:"h-3 w-3 mr-1"}),"Upload"]})]})]})]}),Z=async()=>{try{if(!await Ce.isAuthenticated())return;const V={business_name:S.businessName,owner_name:S.ownerName,business_email:S.email,business_phone:S.phone,business_address:S.address,location_address:S.locationAddress,city:S.city,state:S.state,pincode:S.pincode,latitude:S.latitude,longitude:S.longitude,business_type:S.businessType,categories:S.categories,description:S.description,bank_name:S.bankName,account_number:S.accountNumber,account_holder_name:S.accountHolderName,ifsc_code:S.ifscCode,gst_number:S.gstNumber,pan_number:S.panNumber,delivery_radius:S.deliveryRadius?parseFloat(S.deliveryRadius):null,min_order_amount:S.minOrderAmount},{response:H,data:q}=await Ve("/vendor-profiles/");if(H.ok&&q){if(q.results&&q.results.length>0){const W=q.results[0].id,{response:Y}=await Ve(`/vendor-profiles/${W}/`,{method:"PUT",body:JSON.stringify(V)});if(Y.ok)d(!1),t({title:"Success",description:"Profile updated successfully!",variant:"default"}),T();else{const U=await Y.json();throw console.error("Update error:",U),new Error("Failed to update profile")}}}else throw new Error("Failed to fetch profile for update")}catch(B){console.error("Error saving profile:",B),t({title:"Error",description:"Failed to save profile. Please try again.",variant:"destructive"})}},X=async()=>{try{await Ce.getToken()&&await Ve("/logout/",{method:"POST"})}catch(B){console.error("Logout error:",B)}finally{await n(),e("/vendor/login")}},z=[{id:"personal",label:"Personal",icon:Li},{id:"business",label:"Business",icon:xn},{id:"address",label:"Address",icon:Jt},{id:"banking",label:"Banking",icon:bl},{id:"documents",label:"Documents",icon:bi}];return h?s.jsx(es,{title:"My Profile",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):u&&u.includes("vendor features")?s.jsx(Hre,{requiredRole:"vendor",currentPage:"vendor-profile"}):u?s.jsx(es,{title:"My Profile",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[s.jsx(Zb,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-red-600 mb-4",children:u}),s.jsx("div",{className:"space-y-2",children:s.jsx(se,{onClick:T,variant:"outline",children:"Retry"})})]})})}):s.jsx(Wre,{children:s.jsx(es,{title:"My Profile",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-100 fixed top-14 sm:top-16 left-0 right-0 z-30",children:s.jsxs("div",{className:"flex items-center justify-between p-3 mx-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-lg overflow-hidden ${l?"cursor-pointer hover:bg-gray-200":""}`,onClick:l?()=>{const B=document.createElement("input");B.type="file",B.accept="image/*",B.onchange=V=>{var q;const H=(q=V.target.files)==null?void 0:q[0];H&&F(H)},B.click()}:void 0,children:S.profileImage?s.jsx("img",{src:S.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-gray-600 font-semibold",children:S.businessName?S.businessName.charAt(0).toUpperCase():"V"})}),l&&s.jsx(se,{size:"sm",className:"absolute -bottom-0.5 -right-0.5 w-5 h-5 rounded-full p-0 bg-blue-600 hover:bg-blue-700",onClick:()=>{const B=document.createElement("input");B.type="file",B.accept="image/*",B.onchange=V=>{var q;const H=(q=V.target.files)==null?void 0:q[0];H&&F(H)},B.click()},children:s.jsx(Si,{className:"h-2.5 w-2.5"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"font-medium text-base truncate",children:S.businessName||"Business Name"}),s.jsx("p",{className:"text-gray-500 text-sm truncate",children:S.ownerName||"Owner Name"})]})]}),s.jsx(se,{onClick:()=>l?Z():d(!0),size:"sm",className:"bg-green-600 hover:bg-green-700",children:l?s.jsxs(s.Fragment,{children:[s.jsx(ad,{className:"h-3 w-3 mr-1"}),"Save"]}):s.jsxs(s.Fragment,{children:[s.jsx(kh,{className:"h-3 w-3 mr-1"}),"Edit"]})})]})}),s.jsx("div",{className:"bg-white pt-16",children:s.jsxs(Fi,{value:a,onValueChange:o,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(ii,{className:"grid grid-cols-5 w-full",children:z.map(B=>s.jsxs(Mt,{value:B.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(B.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:B.label})]},B.id))})}),s.jsx(bt,{value:"personal",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"ownerName",children:"Full Name *"}),s.jsx(_e,{id:"ownerName",value:S.ownerName,onChange:B=>E("ownerName",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"email",children:"Email *"}),s.jsx(_e,{id:"email",type:"email",value:S.email,onChange:B=>E("email",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"phone",children:"Phone Number *"}),s.jsx(_e,{id:"phone",value:S.phone,onChange:B=>E("phone",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"referralCode",children:"My Referral Code"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(_e,{id:"referralCode",value:S.referralCode||(h?"Generating...":"Not available"),disabled:!0,className:"bg-gray-50 font-mono text-center text-lg font-semibold text-blue-600"}),S.referralCode?s.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(S.referralCode),t({title:"Copied!",description:"Referral code copied to clipboard"})},disabled:h,children:"Copy"}):s.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:async()=>{try{const{response:B,data:V}=await Ve("/generate-referral-code/",{method:"POST"});if(B.ok&&V.success)C(H=>({...H,referralCode:V.referral_code})),t({title:"Success!",description:"Referral code generated successfully"});else throw new Error(V.message||"Failed to generate referral code")}catch(B){console.error("Failed to generate referral code:",B),t({title:"Error",description:"Failed to generate referral code. Please try again.",variant:"destructive"})}},disabled:h,children:"Generate"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Share this code with customers to earn referral rewards"})]})]})}),s.jsxs(bt,{value:"business",className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"businessName",children:"Business Name *"}),s.jsx(_e,{id:"businessName",value:S.businessName,onChange:B=>E("businessName",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"businessType",children:"Business Type *"}),s.jsxs(Zt,{value:S.businessType,onValueChange:B=>E("businessType",B),disabled:!l,children:[s.jsx(Wt,{children:s.jsx(Yt,{})}),s.jsx(Gt,{children:R.map(B=>s.jsx(st,{value:B.value,children:B.label},B.value))})]})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"gstNumber",children:"GST Number"}),s.jsx(_e,{id:"gstNumber",value:S.gstNumber,onChange:B=>E("gstNumber",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"panNumber",children:"PAN Number"}),s.jsx(_e,{id:"panNumber",value:S.panNumber,onChange:B=>E("panNumber",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"deliveryRadius",children:"Delivery Radius (km)"}),s.jsx(_e,{id:"deliveryRadius",value:j?`${j} (Set by Admin)`:S.deliveryRadius,disabled:!0,className:"bg-gray-100 text-gray-600"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Delivery radius is set by the administrator"})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"minOrderAmount",children:"Min Order Amount ()"}),s.jsx(_e,{id:"minOrderAmount",value:S.minOrderAmount,onChange:B=>E("minOrderAmount",B.target.value),disabled:!l})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ve,{children:"Selected Categories"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:S.categories.length>0?S.categories.map(B=>s.jsx("span",{className:"px-3 py-1 text-sm bg-blue-50 text-blue-600 border border-blue-200 rounded-lg",children:B},B)):s.jsx("span",{className:"text-sm text-gray-500",children:"No categories selected"})}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Categories are set during vendor onboarding and cannot be changed here."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ve,{htmlFor:"description",children:"Business Description"}),s.jsx(Gs,{id:"description",value:S.description,onChange:B=>E("description",B.target.value),rows:3,disabled:!l})]})]}),s.jsx(bt,{value:"address",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ve,{htmlFor:"address",children:"Shop Address *"}),s.jsx(Gs,{id:"address",value:S.address,onChange:B=>E("address",B.target.value),disabled:!l,rows:2})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ve,{htmlFor:"locationAddress",children:"Location Address (from Map)"}),s.jsx(Gs,{id:"locationAddress",value:S.locationAddress,onChange:B=>E("locationAddress",B.target.value),disabled:!l,rows:2})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"city",children:"City *"}),s.jsx(_e,{id:"city",value:S.city,onChange:B=>E("city",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"state",children:"State *"}),s.jsx(_e,{id:"state",value:S.state,onChange:B=>E("state",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"pincode",children:"Pincode *"}),s.jsx(_e,{id:"pincode",value:S.pincode,onChange:B=>E("pincode",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Coordinates"}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Lat: ",S.latitude||"N/A",", Lng: ",S.longitude||"N/A"]})]})]})}),s.jsx(bt,{value:"banking",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"bankName",children:"Bank Name *"}),s.jsx(_e,{id:"bankName",value:S.bankName,onChange:B=>E("bankName",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"accountHolderName",children:"Account Holder Name *"}),s.jsx(_e,{id:"accountHolderName",value:S.accountHolderName,onChange:B=>E("accountHolderName",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"accountNumber",children:"Account Number *"}),s.jsx(_e,{id:"accountNumber",value:S.accountNumber,onChange:B=>E("accountNumber",B.target.value),disabled:!l})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"ifscCode",children:"IFSC Code *"}),s.jsx(_e,{id:"ifscCode",value:S.ifscCode,onChange:B=>E("ifscCode",B.target.value),disabled:!l})]})]})}),s.jsx(bt,{value:"documents",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(M,{title:"PAN Registration",docType:"business_license_file",document:S.businessLicense,onUpload:B=>O("business_license_file",B)}),s.jsx(M,{title:"Citizenship (Front)",docType:"citizenship_front",document:S.citizenshipFront,onUpload:B=>O("citizenship_front",B)}),s.jsx(M,{title:"Citizenship (Back)",docType:"citizenship_back",document:S.citizenshipBack,onUpload:B=>O("citizenship_back",B)})]}),s.jsxs("div",{children:[s.jsx(ve,{className:"text-lg font-medium",children:"Shop Images"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Images of your shop (interior, exterior, products, etc.)"}),S.shopImages.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:S.shopImages.map((B,V)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:B.image_url,alt:`Shop image ${V+1}`,className:"w-full h-full object-cover"})}),B.is_primary&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Primary"})]},V))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Si,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No shop images uploaded"})]})]})]})})]})}),s.jsx("div",{className:"p-4 pb-20",children:s.jsxs(se,{variant:"outline",className:"w-full flex items-center justify-center py-6 bg-red-50/40 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",onClick:X,children:[s.jsx(Jb,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium text-base",children:"Logout"})]})})]})})})},Kre=()=>{const[e,t]=_.useState("basic"),[n,r]=_.useState(!1),[i,a]=_.useState(!1),[o,l]=_.useState(null),[d,h]=_.useState(!0),[f,u]=_.useState(null),[m,p]=_.useState([]),[w,y]=_.useState([]),[b,g]=_.useState({businessName:"Fresh Farm Valley",ownerName:"Ram Sharma",email:"ram@freshfarm.com",phone:"+977 9841234567",whatsapp:"+977 9841234567",avatar:"",businessType:"grocery",description:"Certified organic farm serving Kathmandu Valley for 10+ years. We specialize in fresh vegetables, fruits, and dairy products.",categories:["Vegetables","Fruits","Dairy","Organic"],establishedYear:"2014",gstNumber:"27AABCU9603R1ZX",panNumber:"AABCU9603R",address:"Balkumari, Lalitpur",city:"Kathmandu",state:"Bagmati",pincode:"44700",landmark:"Near Balkumari Temple",deliveryRadius:"5",minOrderAmount:"200",deliveryFee:"50",freeDeliveryAbove:"500",estimatedDeliveryTime:"30-45",isOpen:!0,openingHours:{monday:{open:"06:00",close:"21:00",closed:!1},tuesday:{open:"06:00",close:"21:00",closed:!1},wednesday:{open:"06:00",close:"21:00",closed:!1},thursday:{open:"06:00",close:"21:00",closed:!1},friday:{open:"06:00",close:"21:00",closed:!1},saturday:{open:"06:00",close:"21:00",closed:!1},sunday:{open:"07:00",close:"20:00",closed:!1}},bankName:"Nepal Bank Limited",accountNumber:"1234567890123456",ifscCode:"NBLNPKA",accountHolderName:"Ram Sharma",upiId:"ram@nbl",businessLicense:"",gstCertificate:"",fssaiLicense:"",autoAcceptOrders:!1,notificationSettings:{orderAlerts:!0,messageAlerts:!0,promotionalEmails:!1}}),x=[{value:"grocery",label:"Grocery Store"},{value:"restaurant",label:"Restaurant"},{value:"pharmacy",label:"Pharmacy"},{value:"electronics",label:"Electronics"},{value:"clothing",label:"Clothing"},{value:"bakery",label:"Bakery"},{value:"meat",label:"Meat Shop"},{value:"dairy",label:"Dairy Products"}],[j,N]=_.useState([]);_.useEffect(()=>{(async()=>{try{const{response:F,data:O}=await Ve("/categories/");F.ok&&O.categories?N(O.categories.map(M=>M.name)):N(["Vegetables","Fruits","Dairy","Meat","Bakery","Beverages","Snacks","Organic","Frozen","Spices","Grains","Oil","Electronics","Decoration"])}catch(F){console.error("Error fetching categories:",F),N(["Vegetables","Fruits","Dairy","Meat","Bakery","Beverages","Snacks","Organic","Frozen","Spices","Grains","Oil","Electronics","Decoration"])}})()},[]);const S=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],C=(E,F)=>{g(O=>({...O,[E]:F}))},T=(E,F,O)=>{g(M=>({...M,[E]:{...M[E],[F]:O}}))};_.useEffect(()=>{A()},[]);const A=async()=>{var E,F,O,M;try{if(h(!0),!localStorage.getItem("token")){u("No authentication token found");return}const{response:X,data:z}=await Ve("/vendor-profiles/");if(X.ok&&z)if(console.log("Full API Response:",z),z.results&&z.results.length>0){const D=z.results[0];console.log("Vendor Profile:",D),console.log("Documents:",D.documents),console.log("Shop Images:",D.shop_images),console.log("Categories:",D.categories),p(D.documents||[]),y(D.shop_images||[]),g({businessName:D.business_name||"",ownerName:D.owner_name||"",email:D.business_email||"",phone:D.business_phone||"",whatsapp:D.business_phone||"",avatar:"",businessType:D.business_type||"grocery",description:D.description||"",categories:D.categories||[],establishedYear:D.established_year||"",gstNumber:D.gst_number||"",panNumber:D.pan_number||"",address:D.business_address||"",city:D.city||"",state:D.state||"",pincode:D.pincode||"",landmark:D.landmark||"",deliveryRadius:((E=D.delivery_radius)==null?void 0:E.toString())||"5",minOrderAmount:((F=D.min_order_amount)==null?void 0:F.toString())||"200",deliveryFee:((O=D.delivery_fee)==null?void 0:O.toString())||"50",freeDeliveryAbove:((M=D.free_delivery_above)==null?void 0:M.toString())||"500",estimatedDeliveryTime:D.estimated_delivery_time||"30-45",isOpen:D.is_active||!1,openingHours:{monday:{open:D.monday_open||"06:00",close:D.monday_close||"21:00",closed:D.monday_closed||!1},tuesday:{open:D.tuesday_open||"06:00",close:D.tuesday_close||"21:00",closed:D.tuesday_closed||!1},wednesday:{open:D.wednesday_open||"06:00",close:D.wednesday_close||"21:00",closed:D.wednesday_closed||!1},thursday:{open:D.thursday_open||"06:00",close:D.thursday_close||"21:00",closed:D.thursday_closed||!1},friday:{open:D.friday_open||"06:00",close:D.friday_close||"21:00",closed:D.friday_closed||!1},saturday:{open:D.saturday_open||"06:00",close:D.saturday_close||"21:00",closed:D.saturday_closed||!1},sunday:{open:D.sunday_open||"07:00",close:D.sunday_close||"20:00",closed:D.sunday_closed||!1}},bankName:D.bank_name||"",accountNumber:D.account_number||"",ifscCode:D.ifsc_code||"",accountHolderName:D.account_holder_name||"",upiId:D.upi_id||"",businessLicense:D.business_license_file_url||D.business_license_file||"",gstCertificate:D.gst_certificate_url||D.gst_certificate||"",fssaiLicense:D.fssai_license_url||D.fssai_license||"",autoAcceptOrders:D.auto_accept_orders||!1,notificationSettings:{orderAlerts:!0,messageAlerts:!0,promotionalEmails:!1}})}else a(!0);else throw new Error("Failed to fetch vendor profile")}catch(Z){console.error("Error fetching vendor profile:",Z),u("Failed to load vendor profile")}finally{h(!1)}},I=async()=>{var E,F,O;try{if(!localStorage.getItem("token"))return;const Z={business_name:b.businessName,owner_name:b.ownerName,business_email:b.email,business_phone:b.phone,business_type:b.businessType,description:b.description,categories:b.categories,established_year:b.establishedYear,gst_number:b.gstNumber,pan_number:b.panNumber,business_address:b.address,city:b.city,state:b.state,pincode:b.pincode,landmark:b.landmark,delivery_radius:parseFloat(b.deliveryRadius),min_order_amount:parseFloat(b.minOrderAmount),delivery_fee:parseFloat(b.deliveryFee),free_delivery_above:parseFloat(b.freeDeliveryAbove),estimated_delivery_time:b.estimatedDeliveryTime,is_active:b.isOpen,monday_open:b.openingHours.monday.open,monday_close:b.openingHours.monday.close,monday_closed:b.openingHours.monday.closed,tuesday_open:b.openingHours.tuesday.open,tuesday_close:b.openingHours.tuesday.close,tuesday_closed:b.openingHours.tuesday.closed,wednesday_open:b.openingHours.wednesday.open,wednesday_close:b.openingHours.wednesday.close,wednesday_closed:b.openingHours.wednesday.closed,thursday_open:b.openingHours.thursday.open,thursday_close:b.openingHours.thursday.close,thursday_closed:b.openingHours.thursday.closed,friday_open:b.openingHours.friday.open,friday_close:b.openingHours.friday.close,friday_closed:b.openingHours.friday.closed,saturday_open:b.openingHours.saturday.open,saturday_close:b.openingHours.saturday.close,saturday_closed:b.openingHours.saturday.closed,sunday_open:b.openingHours.sunday.open,sunday_close:b.openingHours.sunday.close,sunday_closed:b.openingHours.sunday.closed,bank_name:b.bankName,account_number:b.accountNumber,ifsc_code:b.ifscCode,account_holder_name:b.accountHolderName,upi_id:b.upiId,auto_accept_orders:b.autoAcceptOrders},X=i?null:(O=(F=(E=(await Ve("/vendor-profiles/")).data)==null?void 0:E.results)==null?void 0:F[0])==null?void 0:O.id,z=i?"/vendor-profiles/":`/vendor-profiles/${X}/`,D=i?"POST":"PATCH",{response:B}=await Ve(z,{method:D,body:JSON.stringify(Z)});if(B.ok)r(!1),a(!1),alert("Profile saved successfully!");else throw new Error("Failed to save profile")}catch(M){console.error("Error saving profile:",M),alert("Failed to save profile. Please try again.")}},P=async(E,F)=>{var M,Z,X;if(!E)return;if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(E.type)){alert("Please upload only PDF, JPG, JPEG, or PNG files.");return}if(E.size>5*1024*1024){alert("File size must be less than 5MB.");return}l(F);try{const z=new FormData;z.append(F,E);const B=(X=(Z=(M=(await Ve("/vendor-profiles/")).data)==null?void 0:M.results)==null?void 0:Z[0])==null?void 0:X.id;if(!B)throw new Error("Vendor profile not found");const{response:V,data:H}=await Ve(`/vendor-profiles/${B}/`,{method:"PATCH",body:z});if(!V.ok)throw new Error("Upload failed");const q=H[`${F}_url`]||H[F];C(F,q),alert("Document uploaded successfully!"),await A()}catch(z){console.error("Upload error:",z),alert("Failed to upload document. Please try again.")}finally{l(null)}},R=[{id:"basic",label:"Basic Info",icon:Li},{id:"business",label:"Business",icon:xn},{id:"location",label:"Location",icon:Jt},{id:"operations",label:"Operations",icon:Kt},{id:"timing",label:"Timing",icon:Yr},{id:"banking",label:"Banking",icon:bl},{id:"documents",label:"Documents",icon:bi},{id:"debug",label:"Debug",icon:Qn},{id:"settings",label:"Settings",icon:Qn}];return d?s.jsx(es,{title:"Profile Management",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})})}):f?s.jsx(es,{title:"Profile Management",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:f}),s.jsx(se,{onClick:A,children:"Retry"})]})})}):s.jsx(es,{title:"Profile Management",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(se,{variant:"ghost",size:"sm",className:"p-2",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-semibold text-lg",children:"Profile Management"}),i&&s.jsx("p",{className:"text-sm text-gray-600",children:"Complete your profile setup"})]})]}),s.jsx(se,{onClick:()=>n?I():r(!0),className:"bg-green-600 hover:bg-green-700",children:n?s.jsxs(s.Fragment,{children:[s.jsx(ad,{className:"h-4 w-4 mr-2"}),"Save"]}):s.jsxs(s.Fragment,{children:[s.jsx(kh,{className:"h-4 w-4 mr-2"}),"Edit"]})})]})}),s.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl",children:b.avatar}),n&&s.jsx(se,{size:"sm",className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full p-0",children:s.jsx(Si,{className:"h-3 w-3"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"font-semibold text-lg",children:b.businessName}),s.jsx("p",{className:"text-gray-600 text-sm",children:b.ownerName}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Ze,{variant:b.isOpen?"default":"destructive",className:"text-xs",children:b.isOpen?"Open":"Closed"}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(Rs,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),s.jsx("span",{children:"4.8 (342 reviews)"})]})]})]})]})}),s.jsx("div",{className:"bg-white",children:s.jsxs(Fi,{value:e,onValueChange:t,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(ii,{className:"grid grid-cols-4 lg:grid-cols-9 w-full min-w-max",children:R.map(E=>s.jsxs(Mt,{value:E.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(E.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:E.label})]},E.id))})}),s.jsx(bt,{value:"basic",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"businessName",children:"Business Name *"}),s.jsx(_e,{id:"businessName",value:b.businessName,onChange:E=>C("businessName",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"ownerName",children:"Owner Name *"}),s.jsx(_e,{id:"ownerName",value:b.ownerName,onChange:E=>C("ownerName",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"email",children:"Email *"}),s.jsx(_e,{id:"email",type:"email",value:b.email,onChange:E=>C("email",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"phone",children:"Phone Number *"}),s.jsx(_e,{id:"phone",value:b.phone,onChange:E=>C("phone",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"whatsapp",children:"WhatsApp Number"}),s.jsx(_e,{id:"whatsapp",value:b.whatsapp,onChange:E=>C("whatsapp",E.target.value),disabled:!n})]})]})}),s.jsxs(bt,{value:"business",className:"p-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"businessType",children:"Business Type *"}),s.jsxs(Zt,{value:b.businessType,onValueChange:E=>C("businessType",E),disabled:!n,children:[s.jsx(Wt,{children:s.jsx(Yt,{})}),s.jsx(Gt,{children:x.map(E=>s.jsx(st,{value:E.value,children:E.label},E.value))})]})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"establishedYear",children:"Established Year"}),s.jsx(_e,{id:"establishedYear",value:b.establishedYear,onChange:E=>C("establishedYear",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"gstNumber",children:"GST Number"}),s.jsx(_e,{id:"gstNumber",value:b.gstNumber,onChange:E=>C("gstNumber",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"panNumber",children:"PAN Number"}),s.jsx(_e,{id:"panNumber",value:b.panNumber,onChange:E=>C("panNumber",E.target.value),disabled:!n})]})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"description",children:"Business Description *"}),s.jsx(Gs,{id:"description",value:b.description,onChange:E=>C("description",E.target.value),disabled:!n,rows:3})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Categories"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[b.categories.map(E=>s.jsxs(Ze,{variant:"default",className:"cursor-pointer",onClick:()=>{if(!n)return;const F=b.categories.filter(O=>O!==E);C("categories",F)},children:[E," ",n&&""]},E)),j.filter(E=>!b.categories.includes(E)).map(E=>s.jsx(Ze,{variant:"outline",className:"cursor-pointer",onClick:()=>{if(!n)return;const F=[...b.categories,E];C("categories",F)},children:E},E))]}),b.categories.length===0&&s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"No categories selected"})]})]}),s.jsx(bt,{value:"location",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ve,{htmlFor:"address",children:"Full Address *"}),s.jsx(Gs,{id:"address",value:b.address,onChange:E=>C("address",E.target.value),disabled:!n,rows:2})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"city",children:"City *"}),s.jsx(_e,{id:"city",value:b.city,onChange:E=>C("city",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"state",children:"State *"}),s.jsx(_e,{id:"state",value:b.state,onChange:E=>C("state",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"pincode",children:"Pincode *"}),s.jsx(_e,{id:"pincode",value:b.pincode,onChange:E=>C("pincode",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"landmark",children:"Landmark"}),s.jsx(_e,{id:"landmark",value:b.landmark,onChange:E=>C("landmark",E.target.value),disabled:!n})]})]})}),s.jsx(bt,{value:"operations",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"deliveryRadius",children:"Delivery Radius (km) *"}),s.jsx(_e,{id:"deliveryRadius",value:b.deliveryRadius,onChange:E=>C("deliveryRadius",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"minOrderAmount",children:"Minimum Order Amount () *"}),s.jsx(_e,{id:"minOrderAmount",value:b.minOrderAmount,onChange:E=>C("minOrderAmount",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"deliveryFee",children:"Delivery Fee () *"}),s.jsx(_e,{id:"deliveryFee",value:b.deliveryFee,onChange:E=>C("deliveryFee",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"freeDeliveryAbove",children:"Free Delivery Above ()"}),s.jsx(_e,{id:"freeDeliveryAbove",value:b.freeDeliveryAbove,onChange:E=>C("freeDeliveryAbove",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"estimatedDeliveryTime",children:"Estimated Delivery Time (mins) *"}),s.jsx(_e,{id:"estimatedDeliveryTime",value:b.estimatedDeliveryTime,onChange:E=>C("estimatedDeliveryTime",E.target.value),disabled:!n})]})]})}),s.jsxs(bt,{value:"timing",className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(ve,{children:"Store Status"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm",children:"Closed"}),s.jsx(zt,{checked:b.isOpen,onCheckedChange:E=>C("isOpen",E),disabled:!n}),s.jsx("span",{className:"text-sm",children:"Open"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ve,{children:"Opening Hours"}),S.map(E=>s.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg",children:[s.jsx("div",{className:"w-20 text-sm font-medium capitalize",children:E}),s.jsx(zt,{checked:!b.openingHours[E].closed,onCheckedChange:F=>T("openingHours",E,{...b.openingHours[E],closed:!F}),disabled:!n}),!b.openingHours[E].closed&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_e,{type:"time",value:b.openingHours[E].open,onChange:F=>T("openingHours",E,{...b.openingHours[E],open:F.target.value}),disabled:!n,className:"w-32"}),s.jsx("span",{className:"text-sm",children:"to"}),s.jsx(_e,{type:"time",value:b.openingHours[E].close,onChange:F=>T("openingHours",E,{...b.openingHours[E],close:F.target.value}),disabled:!n,className:"w-32"})]}),b.openingHours[E].closed&&s.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},E))]})]}),s.jsx(bt,{value:"banking",className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"bankName",children:"Bank Name *"}),s.jsx(_e,{id:"bankName",value:b.bankName,onChange:E=>C("bankName",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"accountHolderName",children:"Account Holder Name *"}),s.jsx(_e,{id:"accountHolderName",value:b.accountHolderName,onChange:E=>C("accountHolderName",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"accountNumber",children:"Account Number *"}),s.jsx(_e,{id:"accountNumber",value:b.accountNumber,onChange:E=>C("accountNumber",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"ifscCode",children:"IFSC Code *"}),s.jsx(_e,{id:"ifscCode",value:b.ifscCode,onChange:E=>C("ifscCode",E.target.value),disabled:!n})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"upiId",children:"UPI ID"}),s.jsx(_e,{id:"upiId",value:b.upiId,onChange:E=>C("upiId",E.target.value),disabled:!n})]})]})}),s.jsxs(bt,{value:"documents",className:"p-4 space-y-4",children:[b.businessName&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Uploaded Documents"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Additional Documents (",m.length,")"]}),s.jsx("div",{className:"space-y-2",children:m.length>0?m.map((E,F)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("span",{className:"text-sm",children:["Document ",F+1]}),s.jsx("a",{href:E.document_url||E.document,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-sm hover:underline",children:"View"})]},E.id||F)):s.jsx("p",{className:"text-sm text-gray-600",children:"No additional documents uploaded"})})]}),s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("h4",{className:"font-medium mb-2",children:["Shop Images (",w.length,")"]}),s.jsx("div",{className:"space-y-2",children:w.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-2",children:w.map((E,F)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:E.image_url||E.image,alt:`Shop ${F+1}`,className:"w-full h-20 object-cover rounded border",onError:O=>{O.currentTarget.style.display="none"}}),E.is_primary&&s.jsx(Ze,{className:"absolute top-1 left-1 text-xs",children:"Primary"})]},E.id||F))}):s.jsx("p",{className:"text-sm text-gray-600",children:"No shop images uploaded"})})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-base font-medium",children:"Business License"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload your business registration certificate"})]}),s.jsx(Ze,{variant:b.businessLicense?"default":"outline",children:b.businessLicense?"Uploaded":"Required"})]}),b.businessLicense?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"Business License Document"}),n&&s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{const E=document.createElement("input");E.type="file",E.accept=".pdf,.jpg,.jpeg,.png",E.onchange=F=>{var M;const O=(M=F.target.files)==null?void 0:M[0];O&&P(O,"business_license_file")},E.click()},disabled:o==="business_license_file",children:o==="business_license_file"?"Uploading...":"Replace"})]}):s.jsxs(se,{variant:"outline",className:"w-full",onClick:()=>{const E=document.createElement("input");E.type="file",E.accept=".pdf,.jpg,.jpeg,.png",E.onchange=F=>{var M;const O=(M=F.target.files)==null?void 0:M[0];O&&P(O,"business_license_file")},E.click()},disabled:o==="business_license_file",children:[s.jsx(bi,{className:"h-4 w-4 mr-2"}),o==="business_license_file"?"Uploading...":"Upload Business License"]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-base font-medium",children:"GST Certificate"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload your GST registration certificate"})]}),s.jsx(Ze,{variant:b.gstCertificate?"default":"outline",children:b.gstCertificate?"Uploaded":"Optional"})]}),b.gstCertificate?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"GST Certificate Document"}),n&&s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{const E=document.createElement("input");E.type="file",E.accept=".pdf,.jpg,.jpeg,.png",E.onchange=F=>{var M;const O=(M=F.target.files)==null?void 0:M[0];O&&P(O,"gst_certificate")},E.click()},disabled:o==="gst_certificate",children:o==="gst_certificate"?"Uploading...":"Replace"})]}):s.jsxs(se,{variant:"outline",className:"w-full",onClick:()=>{const E=document.createElement("input");E.type="file",E.accept=".pdf,.jpg,.jpeg,.png",E.onchange=F=>{var M;const O=(M=F.target.files)==null?void 0:M[0];O&&P(O,"gst_certificate")},E.click()},disabled:o==="gst_certificate",children:[s.jsx(bi,{className:"h-4 w-4 mr-2"}),o==="gst_certificate"?"Uploading...":"Upload GST Certificate"]})]}),s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-base font-medium",children:"FSSAI License"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Upload your food safety license (for food businesses)"})]}),s.jsx(Ze,{variant:b.fssaiLicense?"default":"outline",children:b.fssaiLicense?"Uploaded":"Optional"})]}),b.fssaiLicense?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 p-2 bg-gray-50 rounded border text-sm",children:"FSSAI License Document"}),n&&s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{const E=document.createElement("input");E.type="file",E.accept=".pdf,.jpg,.jpeg,.png",E.onchange=F=>{var M;const O=(M=F.target.files)==null?void 0:M[0];O&&P(O,"fssai_license")},E.click()},disabled:o==="fssai_license",children:o==="fssai_license"?"Uploading...":"Replace"})]}):s.jsxs(se,{variant:"outline",className:"w-full",onClick:()=>{const E=document.createElement("input");E.type="file",E.accept=".pdf,.jpg,.jpeg,.png",E.onchange=F=>{var M;const O=(M=F.target.files)==null?void 0:M[0];O&&P(O,"fssai_license")},E.click()},disabled:o==="fssai_license",children:[s.jsx(bi,{className:"h-4 w-4 mr-2"}),o==="fssai_license"?"Uploading...":"Upload FSSAI License"]})]}),s.jsx("div",{className:"text-center py-2 text-gray-500 text-xs",children:"Supported formats: PDF, JPG, JPEG, PNG (Max 5MB)"})]})]}),s.jsx(bt,{value:"debug",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold",children:"API Response Debug"}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-lg overflow-auto max-h-96",children:s.jsx("pre",{className:"text-xs",children:JSON.stringify({documents:m,shopImages:w,categories:b.categories,availableCategories:j},null,2)})})]})}),s.jsx(bt,{value:"settings",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Auto Accept Orders"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Automatically accept new orders"})]}),s.jsx(zt,{checked:b.autoAcceptOrders,onCheckedChange:E=>C("autoAcceptOrders",E),disabled:!n})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ve,{children:"Notification Settings"}),s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Order Alerts"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified for new orders"})]}),s.jsx(zt,{checked:b.notificationSettings.orderAlerts,onCheckedChange:E=>T("notificationSettings","orderAlerts",E),disabled:!n})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Message Alerts"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified for new messages"})]}),s.jsx(zt,{checked:b.notificationSettings.messageAlerts,onCheckedChange:E=>T("notificationSettings","messageAlerts",E),disabled:!n})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Promotional Emails"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive promotional emails"})]}),s.jsx(zt,{checked:b.notificationSettings.promotionalEmails,onCheckedChange:E=>T("notificationSettings","promotionalEmails",E),disabled:!n})]})]})]})})]})}),i&&s.jsxs("div",{className:"fixed bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-lg p-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Profile Completion"}),s.jsx("span",{className:"text-sm text-gray-600",children:"6/8 sections"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"75%"}})}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Complete all sections to activate your store"})]})]})})},Zre=()=>{const e=lt(),[t,n]=_.useState(!0),[r,i]=_.useState(""),[a,o]=_.useState(!1),[l,d]=_.useState(""),[h,f]=_.useState(!1);_.useEffect(()=>{(async()=>{var p;try{if(!await Ce.isAuthenticated())return;const y=1,{response:b,data:g}=await Ve(`/vendor-profiles/${y}/`);if(!b.ok)throw new Error("Failed to fetch profile");const x=((p=g==null?void 0:g.user_info)==null?void 0:p.plain_password)||"";i(x)}catch(w){console.error(w)}})()},[]);const u=async()=>{if(!l){wu.error("New password is required");return}f(!0);try{const{simplePersistentAuth:m}=await ze(async()=>{const{simplePersistentAuth:g}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:g}},void 0);if(!await m.isVendorLoggedIn()){e("/vendor/login");return}const w=await m.getVendorAuth();w&&await Ce.setAuth(w.token,w.user);const{response:y,data:b}=await Ve("/change-password/simple/",{method:"POST",body:JSON.stringify({new_password:l})});if(!y.ok)throw new Error(b.error||"Failed to change password");await Ce.setAuth(b.token,await Ce.getUser()),wu.success("Password changed successfully"),i(l),d(""),o(!1)}catch(m){wu.error(m instanceof Error?m.message:"Failed to change password")}finally{f(!1)}};return s.jsx(es,{title:"Security & Login",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center gap-3 p-4",children:[s.jsx(se,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("h1",{className:"font-semibold text-lg",children:"Security & Login"})]})}),s.jsx("div",{className:"p-4 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Qn,{className:"h-5 w-5 text-blue-600"}),s.jsx("h2",{className:"font-semibold",children:"Password"})]}),a?s.jsxs("div",{className:"space-y-4",children:[s.jsx(ve,{children:"New Password"}),s.jsx(_e,{type:"text",value:l,onChange:m=>d(m.target.value)}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{onClick:u,disabled:h,children:"Save"}),s.jsx(se,{variant:"outline",onClick:()=>o(!1),disabled:h,children:"Cancel"})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx(ve,{children:"Your Password"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(_e,{type:"text",value:r,disabled:!0,className:"bg-gray-100"}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>n(!t),children:t?s.jsx(Yb,{className:"h-4 w-4"}):s.jsx(en,{className:"h-4 w-4"})})]}),s.jsx(se,{onClick:()=>o(!0),disabled:h,children:"Change Password"})]})]})})]})})},Yre=()=>{const e=lt(),{toast:t}=ts(),[n,r]=_.useState("business"),[i,a]=_.useState(!1),[o,l]=_.useState(!0),[d,h]=_.useState(!1),[f,u]=_.useState(""),[m,p]=_.useState(null),[w,y]=_.useState([]),[b,g]=_.useState({businessName:"Business Name",ownerName:"Owner Name",categories:[],operatingHours:{monday:{open:"06:00",close:"21:00",closed:!1},tuesday:{open:"06:00",close:"21:00",closed:!1},wednesday:{open:"06:00",close:"21:00",closed:!1},thursday:{open:"06:00",close:"21:00",closed:!1},friday:{open:"06:00",close:"21:00",closed:!1},saturday:{open:"06:00",close:"21:00",closed:!1},sunday:{open:"07:00",close:"20:00",closed:!1}},deliverySettings:{deliveryRadius:"5",minOrderAmount:"200"},profileImage:null,isActive:!1,statusOverride:!1}),x=R=>{if(!R)return"";const[E,F]=R.split(":").map(Number),O=E>=12?"PM":"AM";return`${E%12||12}:${F.toString().padStart(2,"0")} ${O}`};_.useEffect(()=>{N(),j()},[]);const j=async()=>{try{const{response:R,data:E}=await Ve("/categories/");R.ok&&E.categories&&y(E.categories.map(F=>F.name))}catch(R){console.error("Failed to fetch categories:",R)}},N=async()=>{var R,E,F;try{const{simplePersistentAuth:O}=await ze(async()=>{const{simplePersistentAuth:D}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:D}},void 0);if(!await O.isVendorLoggedIn()){e("/vendor/login");return}const Z=await O.getVendorAuth();Z&&await Ce.setAuth(Z.token,Z.user);const{response:X,data:z}=await Ve("/vendor-profiles/");if(!X.ok)throw new Error("Failed to fetch company data");if(z.results&&z.results.length>0){const D=z.results[0];p(D.id),g({businessName:D.business_name||"Business Name",ownerName:D.owner_name||"Owner Name",categories:Array.isArray(D.categories)?D.categories:typeof D.categories=="string"?JSON.parse(D.categories||"[]"):[],operatingHours:{monday:{open:D.monday_open||"",close:D.monday_close||"",closed:D.monday_closed||!1},tuesday:{open:D.tuesday_open||"",close:D.tuesday_close||"",closed:D.tuesday_closed||!1},wednesday:{open:D.wednesday_open||"",close:D.wednesday_close||"",closed:D.wednesday_closed||!1},thursday:{open:D.thursday_open||"",close:D.thursday_close||"",closed:D.thursday_closed||!1},friday:{open:D.friday_open||"",close:D.friday_close||"",closed:D.friday_closed||!1},saturday:{open:D.saturday_open||"",close:D.saturday_close||"",closed:D.saturday_closed||!1},sunday:{open:D.sunday_open||"",close:D.sunday_close||"",closed:D.sunday_closed||!1}},deliverySettings:{deliveryRadius:((R=D.delivery_radius)==null?void 0:R.toString())||"5",minOrderAmount:((E=D.min_order_amount)==null?void 0:E.toString())||"200"},profileImage:((F=D.user_info)==null?void 0:F.profile_picture)||null,isActive:D.is_active||!1,statusOverride:D.status_override||!1})}}catch(O){console.error("Error fetching company data:",O),u("Failed to load company data")}finally{l(!1)}},S=async()=>{try{h(!0);const{simplePersistentAuth:R}=await ze(async()=>{const{simplePersistentAuth:M}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:M}},void 0);if(!await R.isVendorLoggedIn()){e("/vendor/login");return}if(!m)throw new Error("Profile ID not found");const F=new FormData;F.append("business_name",b.businessName),F.append("owner_name",b.ownerName),F.append("categories",JSON.stringify(b.categories)),F.append("delivery_radius",b.deliverySettings.deliveryRadius),F.append("min_order_amount",b.deliverySettings.minOrderAmount);const{response:O}=await Ve(`/vendor-profiles/${m}/`,{method:"PUT",body:F});if(!O.ok){const M=await O.json();throw new Error(M.detail||"Failed to update company data")}t({title:"Success",description:"Company information updated successfully!"}),a(!1),N()}catch(R){console.error("Error saving company data:",R),t({title:"Error",description:R instanceof Error?R.message:"Failed to save company data",variant:"destructive"})}finally{h(!1)}},C=async()=>{try{const{simplePersistentAuth:R}=await ze(async()=>{const{simplePersistentAuth:Z}=await Promise.resolve().then(()=>Ws);return{simplePersistentAuth:Z}},void 0);if(!await R.isVendorLoggedIn()){e("/vendor/login");return}if(!m)throw new Error("Profile ID not found");const F=!b.isActive,{response:O,data:M}=await Ve(`/vendor-profiles/${m}/toggle-status/`,{method:"POST",body:JSON.stringify({is_active:F})});if(!O.ok)throw new Error((M==null?void 0:M.error)||"Failed to toggle status");g(Z=>({...Z,isActive:M.vendor.is_active,statusOverride:M.vendor.status_override})),t({title:"Success",description:`Status set to ${F?"Active":"Inactive"}`})}catch(R){console.error("Error toggling status:",R),t({title:"Error",description:R instanceof Error?R.message:"Failed to toggle status",variant:"destructive"})}},T=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],A=[{id:"business",label:"Business Details",icon:xn},{id:"timing",label:"Timing",icon:Yr}],I=(R,E)=>{g(F=>({...F,[R]:E}))},P=(R,E,F)=>{g(O=>({...O,[R]:{...O[R],[E]:F}}))};return o?s.jsx(es,{title:"Company Information",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading company information..."})]})})}):f?s.jsx(es,{title:"Company Information",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-red-600 mb-4",children:f}),s.jsx(se,{onClick:N,children:"Retry"})]})})}):s.jsx(es,{title:"Company Information",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(se,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsx("div",{children:s.jsx("h1",{className:"font-semibold text-lg",children:"Company Information"})})]}),s.jsx(se,{onClick:()=>i?S():a(!0),disabled:d,className:"bg-green-600 hover:bg-green-700",children:d?"Saving...":i?"Save Changes":"Edit"})]})}),s.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"relative",children:b.profileImage?s.jsx("img",{src:b.profileImage||"/images/default-profile.png",alt:"Business Profile",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200",onError:R=>{console.error("Image failed to load:",R.currentTarget.src),R.currentTarget.src="/images/default-profile.png"}}):s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center text-2xl border-2 border-gray-200",children:""})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"font-semibold text-lg",children:b.businessName}),s.jsx("p",{className:"text-gray-600 text-sm",children:b.ownerName}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(ve,{children:"Status:"}),s.jsx(zt,{checked:b.isActive,onCheckedChange:C,disabled:!i}),s.jsxs("span",{className:"text-sm",children:[b.isActive?"Active":"Inactive",b.statusOverride&&" (Overridden)"]})]})]})]})}),s.jsx("div",{className:"bg-white",children:s.jsxs(Fi,{value:n,onValueChange:r,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(ii,{className:"grid grid-cols-2 w-full min-w-max",children:A.map(R=>s.jsxs(Mt,{value:R.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(R.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:R.label})]},R.id))})}),s.jsxs(bt,{value:"business",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"space-y-4 max-w-3xl",children:[s.jsx(ve,{children:"Business Categories"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:w.map(R=>s.jsx(Ze,{variant:b.categories.includes(R)?"default":"outline",className:"cursor-pointer",onClick:()=>{if(!i)return;const E=b.categories.includes(R)?b.categories.filter(F=>F!==R):[...b.categories,R];I("categories",E)},children:R},R))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Delivery Radius (km) *"}),s.jsx(_e,{value:b.deliverySettings.deliveryRadius,onChange:R=>P("deliverySettings","deliveryRadius",R.target.value),disabled:!i,className:"max-w-xs"})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Minimum Order Amount (Rs) *"}),s.jsx(_e,{value:b.deliverySettings.minOrderAmount,onChange:R=>P("deliverySettings","minOrderAmount",R.target.value),disabled:!i,className:"max-w-xs"})]})]})]}),s.jsx(bt,{value:"timing",className:"p-4 space-y-4",children:s.jsxs("div",{className:"space-y-3 max-w-3xl",children:[s.jsx(ve,{children:"Operating Hours"}),T.map(R=>s.jsxs("div",{className:"flex items-center gap-4 p-3 border border-gray-200 rounded-lg flex-wrap",children:[s.jsx("div",{className:"w-20 text-sm font-medium capitalize",children:R}),s.jsx(zt,{checked:!b.operatingHours[R].closed,onCheckedChange:E=>P("operatingHours",R,{...b.operatingHours[R],closed:!E}),disabled:!i}),!b.operatingHours[R].closed&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(_e,{type:"time",value:x(b.operatingHours[R].open),onChange:E=>P("operatingHours",R,{...b.operatingHours[R],open:E.target.value}),disabled:!i,className:"w-32"}),s.jsx("span",{className:"text-sm",children:"to"}),s.jsx(_e,{type:"time",value:x(b.operatingHours[R].close),onChange:E=>P("operatingHours",R,{...b.operatingHours[R],close:E.target.value}),disabled:!i,className:"w-32"})]}),b.operatingHours[R].closed&&s.jsx("span",{className:"text-sm text-gray-500",children:"Closed"})]},R))]})})]})})]})})},Xre=()=>{const[e,t]=_.useState(""),[n,r]=_.useState(!1),[i,a]=_.useState(null),[o,l]=_.useState([]),[d,h]=_.useState(!0),[f,u]=_.useState(!1),[m,p]=_.useState({}),[w,y]=_.useState([]),[b,g]=_.useState([]),[x,j]=_.useState([]),[N,S]=_.useState([]),[C,T]=_.useState([]),[A,I]=_.useState([]),[P,R]=_.useState(!1),[E,F]=_.useState(!1),[O,M]=_.useState(null),[Z,X]=_.useState([]),[z,D]=_.useState(null),[B,V]=_.useState(new Date().toISOString().split("T")[0]),[H,q]=_.useState(!1),[W,Y]=_.useState(!1),U=lt(),[G,ne]=_.useState({category:"all",status:"all",stock:"all",sortBy:"name"});_.useEffect(()=>{he(),J()},[]),_.useEffect(()=>{f&&i&&(i.category&&xe(i.category),i.subcategory&&Se(i.subcategory))},[f,i]);const J=async()=>{var re;try{const{apiRequest:je}=await ze(async()=>{const{apiRequest:Ye}=await Promise.resolve().then(()=>us);return{apiRequest:Ye}},void 0),{data:Oe}=await je("/categories/");j(((re=Oe.categories)==null?void 0:re.map(Ye=>Ye.name))||[])}catch(je){console.error("Failed to fetch categories:",je)}},ie=async re=>{try{const{apiRequest:je}=await ze(async()=>{const{apiRequest:We}=await Promise.resolve().then(()=>us);return{apiRequest:We}},void 0),{data:Oe}=await je(`/categories/${re}/subcategories/`),Ie=(Oe.subcategories||[]).map((We,At)=>typeof We=="string"?{id:At+1,name:We}:We);S(Ie)}catch(je){console.error("Failed to fetch subcategories:",je),S([])}},xe=async re=>{var je;try{const{apiRequest:Oe}=await ze(async()=>{const{apiRequest:We}=await Promise.resolve().then(()=>us);return{apiRequest:We}},void 0),{data:Ye}=await Oe("/categories/"),Ie=(je=Ye.categories)==null?void 0:je.find(We=>We.name===re);if(Ie!=null&&Ie.id){const{data:We}=await Oe(`/accounts/categories/parameters/?target_id=${Ie.id}&target_type=category`);T(We.parameters||[])}else T([])}catch(Oe){console.error("Failed to fetch category parameters:",Oe),T([])}},Se=async re=>{var je;try{const{apiRequest:Oe}=await ze(async()=>{const{apiRequest:At}=await Promise.resolve().then(()=>us);return{apiRequest:At}},void 0),Ye=m.category||(i==null?void 0:i.category);if(!Ye)return;const{data:Ie}=await Oe(`/categories/${Ye}/subcategories/`),We=(je=Ie.subcategories)==null?void 0:je.indexOf(re);if(We!==-1){const At=We+1,{data:ss}=await Oe(`/accounts/categories/parameters/?target_id=${At}&target_type=subcategory`);I(ss.parameters||[])}else I([])}catch(Oe){console.error("Failed to fetch subcategory parameters:",Oe),I([])}},ue=async()=>{try{const{apiRequest:re}=await ze(async()=>{const{apiRequest:Oe}=await Promise.resolve().then(()=>us);return{apiRequest:Oe}},void 0),{data:je}=await re("/featured-packages/");X(je.packages||[])}catch(re){console.error("Failed to fetch featured packages:",re),X([])}},he=async()=>{try{h(!0);const re=await Bl.getProducts(),je=(re==null?void 0:re.results)||re||[];l(Array.isArray(je)?je:[])}catch(re){console.error("Failed to fetch products:",re),l([])}finally{h(!1)}},Q=async(re,je)=>{try{await Bl.updateProduct(re,je),await he()}catch(Oe){console.error("Failed to update product:",Oe)}},ye=async re=>{if(window.confirm("Are you sure you want to delete this product?"))try{await Bl.deleteProduct(re),await he(),a(null)}catch(je){console.error("Failed to delete product:",je)}},be=async re=>{if(re.featured)try{const{apiRequest:je}=await ze(async()=>{const{apiRequest:Ye}=await Promise.resolve().then(()=>us);return{apiRequest:Ye}},void 0),{data:Oe}=await je(`/products/${re.id}/featured-info/`);if(!Oe.can_modify){ln.error("Cannot Cancel Featured",{description:"Featured period has already started and cannot be cancelled.",duration:4e3});return}M(re),F(!0)}catch(je){console.error("Failed to check featured info:",je)}else M(re),await ue(),R(!0)},ce=re=>{D(re)},ge=async()=>{if(O)try{Y(!0);const{apiRequest:re}=await ze(async()=>{const{apiRequest:Ye}=await Promise.resolve().then(()=>us);return{apiRequest:Ye}},void 0),{response:je,data:Oe}=await re(`/products/${O.id}/reschedule-featured/`,{method:"POST",body:JSON.stringify({start_date:B})});if(!je.ok)throw new Error(Oe.error||"Failed to reschedule");await he(),F(!1),M(null),V(new Date().toISOString().split("T")[0]),ln.success("Featured Package Rescheduled!",{description:`Start date updated to ${new Date(B).toLocaleDateString()}`,duration:4e3})}catch(re){console.error("Failed to reschedule featured package:",re),ln.error("Reschedule Failed",{description:re.message||"Failed to reschedule package",duration:4e3})}finally{Y(!1)}},ee=async()=>{if(!(!O||!z))try{q(!0);const{apiRequest:re}=await ze(async()=>{const{apiRequest:Ye}=await Promise.resolve().then(()=>us);return{apiRequest:Ye}},void 0),{response:je,data:Oe}=await re("/featured-packages/purchase/",{method:"POST",body:JSON.stringify({product_id:O.id,package_id:z.id,start_date:B})});if(!je.ok)throw new Error(Oe.error||"Failed to purchase package");await he(),R(!1),M(null),D(null),V(new Date().toISOString().split("T")[0]),ln.success("Featured Package Purchased!",{description:`${O.name} is now featured until ${new Date(Oe.end_date).toLocaleDateString()}. Wallet balance: Rs ${Oe.new_wallet_balance}`,duration:5e3})}catch(re){console.error("Failed to purchase featured package:",re),ln.error("Purchase Failed",{description:re.message||"Failed to purchase package",duration:4e3})}finally{q(!1)}},ae=async()=>{if(i!=null&&i.id&&m)try{const re={...m};w.length>0&&(re.image_files=w),await Q(i.id,re),u(!1),p({}),y([]),g([]),a(null)}catch(re){console.error("Failed to save changes:",re)}},oe=re=>{const je=re.target.files;if(je){const Oe=Array.from(je),Ye=Oe.map(Ie=>URL.createObjectURL(Ie));y(Ie=>[...Ie,...Oe]),g(Ie=>[...Ie,...Ye])}},ke=re=>{URL.revokeObjectURL(b[re]),y(je=>je.filter((Oe,Ye)=>Ye!==re)),g(je=>je.filter((Oe,Ye)=>Ye!==re))},de=async re=>{if(i!=null&&i.id)try{const{apiRequest:je}=await ze(async()=>{const{apiRequest:Ye}=await Promise.resolve().then(()=>us);return{apiRequest:Ye}},void 0);await je(`/products/${i.id}/images/${re}/`,{method:"DELETE"}),await he();const Oe=await Bl.getProduct(i.id);a(Oe)}catch(je){console.error("Failed to delete image:",je)}},pe=async re=>{if(i!=null&&i.id)try{const{apiRequest:je}=await ze(async()=>{const{apiRequest:Ye}=await Promise.resolve().then(()=>us);return{apiRequest:Ye}},void 0);await je(`/products/${i.id}/images/${re}/set-primary/`,{method:"POST"}),await he();const Oe=await Bl.getProduct(i.id);a(Oe)}catch(je){console.error("Failed to set primary image:",je)}},Pe=Array.isArray(o)?o.filter(re=>{const je=re.name.toLowerCase().includes(e.toLowerCase())||re.sku&&re.sku.toLowerCase().includes(e.toLowerCase()),Oe=G.category==="all"||re.category===G.category,Ye=G.status==="all"||re.status===G.status,Ie=G.stock==="all"||G.stock==="low"&&re.quantity<=5&&re.quantity>0||G.stock==="out"&&re.quantity===0||G.stock==="available"&&re.quantity>0;return je&&Oe&&Ye&&Ie}).sort((re,je)=>{switch(G.sortBy){case"price":return je.price-re.price;case"stock":return je.quantity-re.quantity;default:return re.name.localeCompare(je.name)}}):[],me=re=>{switch(re){case"active":return s.jsx("span",{className:"text-xs font-medium text-green-600",children:"Active"});case"draft":return s.jsx("span",{className:"text-xs font-medium text-yellow-600",children:"Draft"});case"archived":return s.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Archived"});default:return s.jsx("span",{className:"text-xs font-medium text-gray-600",children:re})}},we=re=>re===0?s.jsx("span",{className:"text-xs font-medium text-red-600",children:"Out of Stock"}):re<=5?s.jsx("span",{className:"text-xs font-medium text-orange-600",children:"Low Stock"}):s.jsx("span",{className:"text-xs font-medium text-green-600",children:"In Stock"}),Re=re=>{if(!re)return"";const je=document.createElement("div");return je.innerHTML=re,je.textContent||je.innerText||""},Ee=re=>re.images&&re.images.length>0?(re.images.find(Oe=>Oe.is_primary)||re.images[0]).image_url:null,qe=re=>({Vegetables:"",Fruits:"",Dairy:"",Meat:"",Bakery:"",Beverages:"",Snacks:"",Grains:""})[re]||"";return s.jsx(es,{title:"Product Management",children:s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsx(De,{className:"",children:s.jsx($e,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Kt,{className:"h-4 w-4 mx-auto mb-0.5 text-blue-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Total"})]})})}),s.jsx(De,{className:"",children:s.jsx($e,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ti,{className:"h-4 w-4 mx-auto mb-0.5 text-green-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(re=>re.status==="active").length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Active"})]})})}),s.jsx(De,{className:"",children:s.jsx($e,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xu,{className:"h-4 w-4 mx-auto mb-0.5 text-orange-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(re=>re.quantity<=5&&re.quantity>0).length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Low"})]})})}),s.jsx(De,{className:"",children:s.jsx($e,{className:"p-1.5",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xu,{className:"h-4 w-4 mx-auto mb-0.5 text-red-500"}),s.jsx("p",{className:"text-xs font-bold",children:(o==null?void 0:o.filter(re=>re.quantity===0).length)||0}),s.jsx("p",{className:"text-[10px] text-gray-600",children:"Out"})]})})})]}),s.jsx(De,{children:s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Yo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(_e,{placeholder:"Search products...",value:e,onChange:re=>t(re.target.value),className:"pl-10"})]}),s.jsx(se,{variant:"outline",size:"icon",onClick:()=>r(!0),children:s.jsx(ri,{className:"h-4 w-4"})})]})})}),s.jsx("div",{children:d?s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx(Cs,{className:"h-6 w-6 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Loading products..."})]}):Pe.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Pe.map(re=>s.jsx(De,{className:"overflow-hidden",children:s.jsx($e,{className:"p-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-center relative",children:[Ee(re)?s.jsx("img",{src:Ee(re),alt:re.name,className:"w-12 h-12 mx-auto object-cover rounded"}):s.jsx("div",{className:"text-xl",children:qe(re.category)}),re.featured&&s.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-500 text-white text-xs px-1 py-0.5 rounded-full font-bold shadow-md",children:"FEATURED"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:re.name}),s.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Rs ",re.price]}),re.cost_price&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Cost: Rs ",re.cost_price]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs text-gray-600",children:["Stock: ",re.quantity]}),we(re.quantity)]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-600",children:re.category}),me(re.status)]}),re.subcategory&&s.jsx("div",{className:"text-xs text-gray-500 truncate",children:re.subcategory}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Sold: ",re.total_sold||0]}),s.jsxs("div",{className:"flex gap-1 mt-1",children:[re.featured&&s.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1 rounded",children:""}),re.free_delivery&&s.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-1 rounded",children:" Free"}),re.custom_delivery_fee_enabled&&re.custom_delivery_fee&&s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-1 rounded",children:[" Rs ",re.custom_delivery_fee]})]})]}),s.jsxs("div",{className:"flex gap-1 pt-1",children:[s.jsx(se,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>{a(re),u(!1),p({})},children:s.jsx(en,{className:"h-3 w-3"})}),s.jsx(se,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>{a(re),u(!0),p({...re,dynamic_fields:re.dynamic_fields||{}}),re.category&&ie(re.category)},children:s.jsx(Lm,{className:"h-3 w-3"})}),s.jsx(se,{variant:"outline",size:"sm",className:"flex-1 p-1",onClick:()=>ye(re.id),children:s.jsx(so,{className:"h-3 w-3"})})]}),s.jsxs(se,{variant:re.featured?"default":"outline",size:"sm",className:"w-full mt-1 p-1",onClick:()=>be(re),children:[s.jsx(Rs,{className:`h-3 w-3 mr-1 ${re.featured?"fill-current":""}`}),re.featured?"Reschedule":"Mark Featured"]})]})})},re.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Kt,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No products found"}),s.jsxs(se,{className:"mt-4",onClick:()=>U("/vendor/add-product"),children:[s.jsx(bs,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})]})}),s.jsx(Zn,{open:n,onOpenChange:r,children:s.jsxs(Pn,{side:"bottom",className:"h-[400px]",children:[s.jsx(An,{children:s.jsx(On,{children:"Filter Products"})}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Category"}),s.jsxs(Zt,{value:G.category,onValueChange:re=>ne({...G,category:re}),children:[s.jsx(Wt,{children:s.jsx(Yt,{})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"all",children:"All Categories"}),Array.from(new Set((o||[]).map(re=>re.category))).map(re=>s.jsx(st,{value:re,children:re},re))]})]})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Status"}),s.jsxs(Zt,{value:G.status,onValueChange:re=>ne({...G,status:re}),children:[s.jsx(Wt,{children:s.jsx(Yt,{})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"all",children:"All Status"}),s.jsx(st,{value:"active",children:"Active"}),s.jsx(st,{value:"draft",children:"Draft"}),s.jsx(st,{value:"archived",children:"Archived"})]})]})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Stock Level"}),s.jsxs(Zt,{value:G.stock,onValueChange:re=>ne({...G,stock:re}),children:[s.jsx(Wt,{children:s.jsx(Yt,{})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"all",children:"All Stock Levels"}),s.jsx(st,{value:"available",children:"In Stock"}),s.jsx(st,{value:"low",children:"Low Stock"}),s.jsx(st,{value:"out",children:"Out of Stock"})]})]})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Sort By"}),s.jsxs(Zt,{value:G.sortBy,onValueChange:re=>ne({...G,sortBy:re}),children:[s.jsx(Wt,{children:s.jsx(Yt,{})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"name",children:"Name"}),s.jsx(st,{value:"price",children:"Price"}),s.jsx(st,{value:"stock",children:"Stock"})]})]})]})]})]})}),s.jsx(Zn,{open:P,onOpenChange:re=>{R(re),re||(D(null),V(new Date().toISOString().split("T")[0]))},children:s.jsxs(Pn,{side:"bottom",className:"h-[70vh] overflow-y-auto",children:[s.jsx(An,{children:s.jsx(On,{children:"Choose Featured Package"})}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Select a package to feature your product: ",s.jsx("strong",{children:O==null?void 0:O.name})]}),z?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50",children:[s.jsx("h3",{className:"font-semibold text-blue-900",children:z.name}),s.jsxs("p",{className:"text-sm text-blue-700",children:[z.duration_days," days - Rs ",z.amount]})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"start-date",children:"Start Date"}),s.jsx(_e,{id:"start-date",type:"date",value:B,min:new Date().toISOString().split("T")[0],onChange:re=>V(re.target.value)}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Featured until: ",new Date(new Date(B).getTime()+z.duration_days*24*60*60*1e3).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{variant:"outline",className:"flex-1",onClick:()=>D(null),disabled:H,children:"Back"}),s.jsx(se,{className:"flex-1",onClick:ee,disabled:H,children:H?s.jsxs(s.Fragment,{children:[s.jsx(Cs,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):`Pay Rs ${z.amount}`})]})]}):Z.length>0?s.jsx("div",{className:"grid grid-cols-1 gap-3",children:Z.map(re=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:re.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[re.duration_days," days"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-lg font-bold text-green-600",children:["Rs ",re.amount]}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:re.package_type})]})]}),re.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:re.description}),s.jsx(se,{className:"w-full",onClick:()=>ce(re),children:"Select This Package"})]},re.id))}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No featured packages available"})})]})]})}),s.jsx(Zn,{open:E,onOpenChange:re=>{F(re),re||V(new Date().toISOString().split("T")[0])},children:s.jsxs(Pn,{side:"bottom",className:"h-[40vh]",children:[s.jsx(An,{children:s.jsx(On,{children:"Reschedule Featured Package"})}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Update the start date for: ",s.jsx("strong",{children:O==null?void 0:O.name})]}),s.jsxs("div",{children:[s.jsx(ve,{htmlFor:"reschedule-date",children:"New Start Date"}),s.jsx(_e,{id:"reschedule-date",type:"date",value:B,min:new Date().toISOString().split("T")[0],onChange:re=>V(re.target.value)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{variant:"outline",className:"flex-1",onClick:()=>F(!1),disabled:W,children:"Cancel"}),s.jsx(se,{className:"flex-1",onClick:ge,disabled:W,children:W?s.jsxs(s.Fragment,{children:[s.jsx(Cs,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):"Update Date"})]})]})]})}),s.jsx(Zn,{open:!!i,onOpenChange:()=>{a(null),u(!1),p({}),y([]),g([])},children:s.jsxs(Pn,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[s.jsx(An,{children:s.jsxs(On,{className:"flex items-center justify-between",children:[s.jsx("span",{children:f?"Edit Product":"Product Details"}),s.jsx("div",{className:"flex gap-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{u(!1),p({}),y([]),g([])},children:"Cancel"}),s.jsxs(se,{size:"sm",onClick:ae,children:[s.jsx(ad,{className:"h-4 w-4 mr-1"}),"Save"]})]}):s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{u(!0),p({...i,dynamic_fields:(i==null?void 0:i.dynamic_fields)||{}}),i!=null&&i.category&&ie(i.category)},children:[s.jsx(Lm,{className:"h-4 w-4 mr-1"}),"Edit"]})})]})}),i&&s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Product Images"}),i.images&&i.images.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:i.images.map((re,je)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:re.image_url,alt:`Product ${je+1}`,className:"w-full h-20 object-cover rounded border",onError:Oe=>{var Ye;console.log("Image failed to load:",re.image_url),Oe.currentTarget.style.display="none",(Ye=Oe.currentTarget.nextElementSibling)==null||Ye.classList.remove("hidden")}}),s.jsx("div",{className:"hidden w-full h-20 bg-gray-100 rounded border flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Si,{className:"h-6 w-6 mx-auto mb-1 text-gray-400"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Failed to load"})]})}),f&&s.jsx("button",{type:"button",onClick:Oe=>{Oe.preventDefault(),Oe.stopPropagation(),de(re.id)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",children:s.jsx(tn,{className:"h-3 w-3"})}),re.is_primary?s.jsx("div",{className:"absolute top-1 left-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Main"}):f?s.jsx("button",{type:"button",onClick:Oe=>{Oe.preventDefault(),Oe.stopPropagation(),pe(re.id)},className:"absolute top-1 left-1 bg-gray-500 hover:bg-blue-500 text-white text-xs px-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Set Main"}):null]},`existing-image-${re.id}`))}):s.jsxs("div",{className:"text-center py-4 text-gray-500",children:[s.jsx(Si,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm",children:"No images uploaded"})]}),b.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"New Images:"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:b.map((re,je)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:re,alt:`New ${je+1}`,className:"w-full h-20 object-cover rounded border"}),s.jsx("button",{type:"button",onClick:Oe=>{Oe.preventDefault(),Oe.stopPropagation(),ke(je)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:s.jsx(tn,{className:"h-3 w-3"})})]},`new-image-${je}`))})]}),f&&s.jsxs("div",{className:"mt-2",children:[s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:oe,className:"hidden",id:"image-upload"}),s.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-gray-400 transition-colors",children:[s.jsx(Si,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Add More Images"})]})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Product Name"}),f?s.jsx(_e,{value:m.name||"",onChange:re=>p({...m,name:re.target.value})}):s.jsx("p",{className:"text-sm font-medium",children:i.name})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Selling Price"}),f?s.jsx(_e,{type:"number",value:m.price||"",onChange:re=>p({...m,price:Number(re.target.value)})}):s.jsxs("p",{className:"text-sm font-medium",children:["Rs ",i.price]})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Stock Quantity"}),f?s.jsx(_e,{type:"number",value:m.quantity||"",onChange:re=>p({...m,quantity:Number(re.target.value)})}):s.jsx("p",{className:"text-sm font-medium",children:i.quantity})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Category"}),f?s.jsxs(Zt,{value:m.category||i.category,onValueChange:re=>{p({...m,category:re,subcategory:""}),ie(re),xe(re),I([])},children:[s.jsx(Wt,{children:s.jsx(Yt,{})}),s.jsx(Gt,{children:x.map(re=>s.jsx(st,{value:re,children:re},re))})]}):s.jsx("p",{className:"text-sm font-medium",children:i.category})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Subcategory"}),f?s.jsxs(Zt,{value:m.subcategory||i.subcategory||"",onValueChange:re=>{p({...m,subcategory:re}),Se(re)},children:[s.jsx(Wt,{children:s.jsx(Yt,{placeholder:"Select subcategory"})}),s.jsx(Gt,{children:N.map(re=>s.jsx(st,{value:re.name,children:re.name},re.id))})]}):s.jsx("p",{className:"text-sm font-medium",children:i.subcategory||"N/A"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx(ve,{children:"Cost Price"}),f?s.jsx(_e,{type:"number",value:m.cost_price||"",onChange:re=>p({...m,cost_price:Number(re.target.value)||void 0})}):s.jsx("p",{className:"text-sm font-medium",children:i.cost_price?`Rs ${i.cost_price}`:"N/A"})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"SKU"}),f?s.jsx(_e,{value:m.sku||"",onChange:re=>p({...m,sku:re.target.value})}):s.jsx("p",{className:"text-sm font-medium",children:i.sku||"N/A"})]})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Status"}),f?s.jsxs(Zt,{value:m.status||i.status,onValueChange:re=>p({...m,status:re}),children:[s.jsx(Wt,{children:s.jsx(Yt,{})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"active",children:"Active"}),s.jsx(st,{value:"draft",children:"Draft"}),s.jsx(st,{value:"archived",children:"Archived"})]})]}):s.jsx("div",{children:me(i.status)})]}),s.jsxs("div",{children:[s.jsx(ve,{children:"Description"}),f?s.jsx(Gs,{value:Re(m.description||""),onChange:re=>p({...m,description:re.target.value}),rows:3}):s.jsx("p",{className:"text-sm text-gray-600",children:Re(i.description)})]}),f&&C.length>0&&s.jsxs("div",{children:[s.jsx(ve,{children:"Category Details"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:C.map(re=>{var Oe,Ye;const je=((Oe=m.dynamic_fields)==null?void 0:Oe[re.name])||"";return s.jsxs("div",{children:[s.jsx(ve,{className:"text-xs",children:re.label}),re.field_type==="text"||re.field_type==="number"?s.jsx(_e,{type:re.field_type,value:je,placeholder:re.placeholder,onChange:Ie=>p({...m,dynamic_fields:{...m.dynamic_fields,[re.name]:re.field_type==="number"?Number(Ie.target.value):Ie.target.value}})}):re.field_type==="select"?s.jsxs(Zt,{value:je,onValueChange:Ie=>p({...m,dynamic_fields:{...m.dynamic_fields,[re.name]:Ie}}),children:[s.jsx(Wt,{children:s.jsx(Yt,{placeholder:`Select ${re.label}`})}),s.jsx(Gt,{children:(Ye=re.options)==null?void 0:Ye.map(Ie=>s.jsx(st,{value:Ie,children:Ie},Ie))})]}):re.field_type==="boolean"?s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx(zt,{checked:!!je,onCheckedChange:Ie=>p({...m,dynamic_fields:{...m.dynamic_fields,[re.name]:Ie}})}),s.jsx(ve,{className:"text-xs",children:re.label})]}):s.jsx(_e,{value:Array.isArray(je)?je.join(", "):String(je),onChange:Ie=>p({...m,dynamic_fields:{...m.dynamic_fields,[re.name]:Ie.target.value}})})]},re.name)})})]}),f&&A.length>0&&s.jsxs("div",{children:[s.jsx(ve,{children:"Subcategory Details"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:A.map(re=>{var Oe,Ye;const je=((Oe=m.dynamic_fields)==null?void 0:Oe[re.name])||"";return s.jsxs("div",{children:[s.jsx(ve,{className:"text-xs",children:re.label}),re.field_type==="text"||re.field_type==="number"?s.jsx(_e,{type:re.field_type,value:je,placeholder:re.placeholder,onChange:Ie=>p({...m,dynamic_fields:{...m.dynamic_fields,[re.name]:re.field_type==="number"?Number(Ie.target.value):Ie.target.value}})}):re.field_type==="select"?s.jsxs(Zt,{value:je,onValueChange:Ie=>p({...m,dynamic_fields:{...m.dynamic_fields,[re.name]:Ie}}),children:[s.jsx(Wt,{children:s.jsx(Yt,{placeholder:`Select ${re.label}`})}),s.jsx(Gt,{children:(Ye=re.options)==null?void 0:Ye.map(Ie=>s.jsx(st,{value:Ie,children:Ie},Ie))})]}):re.field_type==="boolean"?s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx(zt,{checked:!!je,onCheckedChange:Ie=>p({...m,dynamic_fields:{...m.dynamic_fields,[re.name]:Ie}})}),s.jsx(ve,{className:"text-xs",children:re.label})]}):s.jsx(_e,{value:Array.isArray(je)?je.join(", "):String(je),onChange:Ie=>p({...m,dynamic_fields:{...m.dynamic_fields,[re.name]:Ie.target.value}})})]},re.name)})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ve,{children:"Free Delivery"}),f?s.jsx(zt,{checked:m.free_delivery??i.free_delivery,onCheckedChange:re=>{p({...m,free_delivery:re,custom_delivery_fee_enabled:re?!1:m.custom_delivery_fee_enabled,custom_delivery_fee:re?null:m.custom_delivery_fee})}}):s.jsx(zt,{checked:i.free_delivery,disabled:!0})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ve,{children:"Custom Delivery Fee"}),f?s.jsx(zt,{checked:(m.custom_delivery_fee_enabled??i.custom_delivery_fee_enabled)&&!(m.free_delivery??i.free_delivery),disabled:m.free_delivery??i.free_delivery,onCheckedChange:re=>{p({...m,custom_delivery_fee_enabled:re,custom_delivery_fee:re?m.custom_delivery_fee:null})}}):s.jsx(zt,{checked:i.custom_delivery_fee_enabled&&!i.free_delivery,disabled:!0})]}),f&&(m.custom_delivery_fee_enabled??i.custom_delivery_fee_enabled)&&!(m.free_delivery??i.free_delivery)&&s.jsxs("div",{children:[s.jsx(ve,{children:"Delivery Fee Amount"}),s.jsx(_e,{type:"number",step:"0.01",placeholder:"Enter delivery fee",value:m.custom_delivery_fee??i.custom_delivery_fee??"",onChange:re=>{const je=re.target.value;p({...m,custom_delivery_fee:je?Number(je):null})}})]}),!f&&i.custom_delivery_fee_enabled&&i.custom_delivery_fee&&!i.free_delivery&&s.jsxs("div",{children:[s.jsx(ve,{children:"Delivery Fee Amount"}),s.jsxs("p",{className:"text-sm font-medium",children:["Rs ",i.custom_delivery_fee]})]})]}),i.dynamic_fields&&Object.keys(i.dynamic_fields).length>0&&s.jsxs("div",{children:[s.jsx(ve,{children:"Product Parameters"}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:Object.entries(i.dynamic_fields).map(([re,je])=>s.jsxs("div",{className:"border rounded p-2",children:[s.jsx(ve,{className:"text-xs text-gray-600",children:re.replace("_"," ").toUpperCase()}),s.jsx("p",{className:"text-sm font-medium",children:Array.isArray(je)?je.join(", "):typeof je=="boolean"?je?"Yes":"No":String(je)})]},re))})]}),i.tags&&i.tags.length>0&&s.jsxs("div",{children:[s.jsx(ve,{children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i.tags.map((re,je)=>s.jsx(Ze,{variant:"secondary",className:"text-xs",children:re},je))})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2 border-t",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-xs text-gray-500",children:"Total Sold"}),s.jsxs("p",{className:"text-sm font-medium",children:[i.total_sold||0," units"]})]}),s.jsxs("div",{children:[s.jsx(ve,{className:"text-xs text-gray-500",children:"Created"}),s.jsx("p",{className:"text-xs",children:i.created_at?new Date(i.created_at).toLocaleDateString():"N/A"})]}),s.jsxs("div",{children:[s.jsx(ve,{className:"text-xs text-gray-500",children:"Updated"}),s.jsx("p",{className:"text-xs",children:i.updated_at?new Date(i.updated_at).toLocaleDateString():"N/A"})]})]})]})]})]})})]})})},Jre=()=>{const e=lt(),{toast:t}=ts(),[n,r]=_.useState([]),[i,a]=_.useState(!0);_.useEffect(()=>{o();const u=m=>{const p=m.detail;r(w=>[p,...w])};return window.addEventListener("newNotification",u),()=>{window.removeEventListener("newNotification",u)}},[]);const o=async()=>{try{a(!0);const u=await ds.getNotifications();r(u)}catch(u){console.error("Failed to load notifications:",u),t({title:"Error",description:"Failed to load notifications",variant:"destructive"})}finally{a(!1)}},l=async u=>{if(u.read||(await ds.markAsRead(u.id),r(m=>m.map(p=>p.id===u.id?{...p,read:!0}:p))),u.action_url)e(u.action_url);else switch(u.type){case"order":case"refund":case"refund_request":case"order_status":case"status_change":e("/vendor/orders");break;case"stock_alert":case"low_stock":e("/vendor/products");break;case"payment":e("/vendor/wallet");break;case"message":e("/vendor/messages");break;default:e("/vendor/orders")}},d=async()=>{try{await ds.markAllAsRead(),r(u=>u.map(m=>({...m,read:!0}))),t({title:"Success",description:"All notifications marked as read"})}catch{t({title:"Error",description:"Failed to mark notifications as read",variant:"destructive"})}},h=u=>{switch(u){case"order":return s.jsx(Kt,{className:"h-5 w-5 text-green-600"});case"refund":case"refund_request":return s.jsx(Ri,{className:"h-5 w-5 text-red-600"});case"stock_alert":case"low_stock":return s.jsx(Xu,{className:"h-5 w-5 text-orange-600"});case"order_status":case"status_change":return s.jsx(ti,{className:"h-5 w-5 text-blue-600"});case"payment":return s.jsx(bl,{className:"h-5 w-5 text-green-600"});case"message":return s.jsx(Fp,{className:"h-5 w-5 text-purple-600"});default:return s.jsx(Gn,{className:"h-5 w-5 text-gray-600"})}},f=n.filter(u=>!u.read).length;return i?s.jsx(es,{title:"Notifications",children:s.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(u=>s.jsx(De,{className:"animate-pulse",children:s.jsx($e,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})})},u))})}):s.jsx(es,{title:"Notifications",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"All Notifications"}),f>0&&s.jsxs(Ze,{variant:"secondary",children:[f," unread"]})]}),f>0&&s.jsx(se,{variant:"outline",size:"sm",onClick:d,children:"Mark all as read"})]}),s.jsx("div",{className:"space-y-3",children:n.length===0?s.jsx(De,{children:s.jsxs($e,{className:"p-8 text-center",children:[s.jsx(Gn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-gray-500",children:"You're all caught up! New notifications will appear here."})]})}):n.map(u=>s.jsx(De,{className:`cursor-pointer transition-colors hover:bg-gray-50 ${u.read?"":"border-l-4 border-l-blue-500 bg-blue-50"}`,onClick:()=>l(u),children:s.jsx($e,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-1",children:h(u.type)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h3",{className:`font-medium text-sm ${u.read?"text-gray-700":"text-gray-900"}`,children:u.title}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(u.created_at).toLocaleString()})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.message}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsx(Ze,{variant:"outline",className:`text-xs ${u.type==="order"?"border-green-200 text-green-700":u.type==="refund"||u.type==="refund_request"?"border-red-200 text-red-700":u.type==="stock_alert"||u.type==="low_stock"?"border-orange-200 text-orange-700":u.type==="order_status"||u.type==="status_change"?"border-blue-200 text-blue-700":u.type==="payment"?"border-green-200 text-green-700":u.type==="message"?"border-purple-200 text-purple-700":"border-gray-200 text-gray-700"}`,children:u.type==="refund_request"?"refund":u.type==="stock_alert"?"stock":u.type==="order_status"?"status":u.type}),!u.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})]})})},u.id))})]})})},Qre=()=>{const[e]=tg();lt();const t=e.get("type")||"orders",[n,r]=_.useState([]),[i,a]=_.useState(!0),[o,l]=_.useState("all"),[d,h]=_.useState(!1),[f,u]=_.useState(""),[m,p]=_.useState(""),[w,y]=_.useState(1),[b,g]=_.useState(1),[x,j]=_.useState(0),N=20,[S,C]=_.useState({total:0,active:0,pending:0,completed:0});_.useEffect(()=>{A()},[t,f,m,w]);const T=V=>{y(V)},A=async()=>{try{if(a(!0),t==="orders"){const V=new URLSearchParams({page:w.toString(),page_size:N.toString()});f&&V.append("date_from",f),m&&V.append("date_to",m);const{response:H,data:q}=await Ve(`/vendor/orders/?${V}`);if(H.ok&&q){let W=q.results||q||[];if(g(Math.ceil((q.count||W.length)/N)),j(q.count||W.length),f&&m){const Y=new Date(f),U=new Date(m);U.setHours(23,59,59,999),W=W.filter(G=>{const ne=new Date(G.created_at);return ne>=Y&&ne<=U})}r(W),C({total:W.length,pending:W.filter(Y=>Y.status==="pending").length,completed:W.filter(Y=>Y.status==="delivered").length,active:W.filter(Y=>["confirmed","out_for_delivery"].includes(Y.status)).length})}}else if(t==="products"){const V=new URLSearchParams({page:w.toString(),page_size:N.toString()}),{response:H,data:q}=await Ve(`/products/?${V}`);if(H.ok&&q){const W=q.results||q||[];g(Math.ceil((q.count||W.length)/N)),j(q.count||W.length),r(W),C({total:W.length,active:W.filter(Y=>Y.quantity>10).length,pending:W.filter(Y=>Y.quantity>0&&Y.quantity<=10).length,completed:W.filter(Y=>Y.quantity===0).length})}}else if(t==="revenue"){const{response:V,data:H}=await Ve("/vendor/orders/");if(V.ok&&H){let q=H.results||H||[];const W=q.filter(U=>U.status==="confirmed"||U.status==="delivered");if(f&&m){const U=new Date(f),G=new Date(m);G.setHours(23,59,59,999),q=W.filter(ne=>{const J=new Date(ne.created_at);return J>=U&&J<=G})}else q=W;r(q);const Y=q.reduce((U,G)=>U+parseFloat(G.total_amount||0),0);C({total:Y,active:q.length,pending:Y>0?Y/q.length:0,completed:q.filter(U=>new Date(U.created_at).getMonth()===new Date().getMonth()).length})}}else if(t==="customers"){const{response:V,data:H}=await Ve("/vendor/orders/");if(V.ok&&H){const q=H.results||H||[],W=new Map;q.forEach(U=>{var J,ie;const G=((J=U.customer_details)==null?void 0:J.id)||U.delivery_phone;W.has(G)||W.set(G,{id:G,name:((ie=U.customer_details)==null?void 0:ie.username)||U.delivery_name,phone:U.delivery_phone,orders:0,totalSpent:0,lastOrder:U.created_at});const ne=W.get(G);ne.orders+=1,U.status==="delivered"&&(ne.totalSpent+=parseFloat(U.total_amount||0))});const Y=Array.from(W.values());r(Y),C({total:Y.length,active:Y.filter(U=>U.orders>1).length,pending:Y.filter(U=>U.orders===1).length,completed:Y.filter(U=>U.totalSpent>0).length})}}}catch(V){console.error("Error fetching data:",V)}finally{a(!1)}},I=()=>{switch(t){case"orders":return"Orders Management";case"revenue":return"Revenue Analytics";case"products":return"Products Overview";case"customers":return"Customer Insights";default:return"Summary"}},P=()=>{switch(t){case"orders":return{total:"Total Orders",active:"Processing",pending:"Pending",completed:"Delivered"};case"products":return{total:"Total Products",active:"In Stock",pending:"Low Stock",completed:"Out of Stock"};case"revenue":return{total:"Total Revenue",active:"Orders",pending:"Avg Order",completed:"This Month"};case"customers":return{total:"Total Customers",active:"Repeat Buyers",pending:"New Customers",completed:"Paid Customers"};default:return{total:"Total",active:"Active",pending:"Pending",completed:"Completed"}}},R=(V,H)=>t==="revenue"&&(V==="total"||V==="pending")?`Rs${H.toFixed(2)}`:H.toString(),E=()=>{let V="",H="";t==="orders"?(V=[["Date","Order Number","Customer","Amount","Status","Items"].join(","),...n.map(U=>{var G;return[new Date(U.created_at).toLocaleDateString(),U.order_number,`"${U.delivery_name||"N/A"}"`,parseFloat(U.total_amount||0).toFixed(2),U.status,((G=U.items)==null?void 0:G.length)||0].join(",")})].join(`
`),H="orders-report"):t==="products"?(V=[["Name","Price","Stock","Status","Category"].join(","),...n.map(U=>[`"${U.name}"`,parseFloat(U.price).toFixed(2),U.quantity,U.quantity>10?"In Stock":U.quantity>0?"Low Stock":"Out of Stock",`"${U.category||"N/A"}"`].join(","))].join(`
`),H="products-report"):t==="revenue"?(V=[["Date","Order Number","Customer","Revenue"].join(","),...n.map(U=>[new Date(U.created_at).toLocaleDateString(),U.order_number,`"${U.delivery_name||"N/A"}"`,parseFloat(U.total_amount||0).toFixed(2)].join(","))].join(`
`),H="revenue-report"):t==="customers"&&(V=[["Name","Phone","Orders","Total Spent","Last Order"].join(","),...n.map(U=>[`"${U.name}"`,U.phone,U.orders,U.totalSpent.toFixed(2),new Date(U.lastOrder).toLocaleDateString()].join(","))].join(`
`),H="customers-report");const q=new Blob([V],{type:"text/csv"}),W=window.URL.createObjectURL(q),Y=document.createElement("a");Y.href=W,Y.download=`${H}-${f||"all"}-${m||new Date().toISOString().split("T")[0]}.csv`,Y.click(),window.URL.revokeObjectURL(W)},F=()=>{const V=new Date().toLocaleDateString(),H=f&&m?`${f} to ${m}`:"All Time",q=P(),W=`
===========================================
           ${I().toUpperCase()}
===========================================
Generated: ${V}
Period: ${H}

SUMMARY
-------------------------------------------
${q.total}: ${R("total",S.total)}
${q.active}: ${R("active",S.active)}
${q.pending}: ${R("pending",S.pending)}
${q.completed}: ${R("completed",S.completed)}

DETAILS (${n.length} records)
-------------------------------------------
${t==="orders"?n.map(U=>`${new Date(U.created_at).toLocaleDateString()} | ${U.order_number} | ${U.delivery_name} | Rs${parseFloat(U.total_amount||0).toFixed(2)} | ${U.status}`).join(`
`):t==="products"?n.map(U=>`${U.name} | Rs${parseFloat(U.price).toFixed(2)} | Stock: ${U.quantity}`).join(`
`):t==="revenue"?n.map(U=>`${new Date(U.created_at).toLocaleDateString()} | ${U.order_number} | Rs${parseFloat(U.total_amount||0).toFixed(2)}`).join(`
`):n.map(U=>`${U.name} | ${U.phone} | ${U.orders} orders | Rs${U.totalSpent.toFixed(2)}`).join(`
`)}

===========================================
    `,Y=window.open("","_blank");Y==null||Y.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${W}</pre>`),Y==null||Y.print()},O=()=>{const V=P(),H=`${I()}\\n\\n${V.total}: ${R("total",S.total)}\\n${V.active}: ${R("active",S.active)}\\n${V.pending}: ${R("pending",S.pending)}\\n${V.completed}: ${R("completed",S.completed)}\\n\\nTotal Records: ${n.length}`;if(navigator.share)navigator.share({title:I(),text:H});else{const q=`https://wa.me/?text=${encodeURIComponent(H)}`;window.open(q,"_blank")}},M=()=>{y(1),A(),h(!1)},Z=()=>{u(""),p(""),y(1),A(),h(!1)},X=V=>{if(V==="all")return n;if(t==="orders"){if(V==="pending")return n.filter(H=>H.status==="pending");if(V==="active")return n.filter(H=>["confirmed","out_for_delivery"].includes(H.status));if(V==="completed")return n.filter(H=>H.status==="delivered")}else if(t==="products"){if(V==="active")return n.filter(H=>H.quantity>10);if(V==="pending")return n.filter(H=>H.quantity>0&&H.quantity<=10);if(V==="completed")return n.filter(H=>H.quantity===0)}return n},z=V=>new Date(V).toLocaleDateString(),D=V=>new Date(V).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),B=P();return s.jsx(es,{title:I(),children:s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[s.jsx("div",{className:"p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(De,{children:s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(ti,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:B.total}),s.jsx("p",{className:"text-sm font-bold text-blue-600",children:R("total",S.total)})]})]})})}),s.jsx(De,{children:s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(Ku,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:B.active}),s.jsx("p",{className:"text-sm font-bold text-green-600",children:R("active",S.active)})]})]})})}),s.jsx(De,{children:s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx(Zu,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:B.pending}),s.jsx("p",{className:"text-sm font-bold text-orange-600",children:R("pending",S.pending)})]})]})})}),s.jsx(De,{children:s.jsx($e,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(Kt,{className:"h-4 w-4 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:B.completed}),s.jsx("p",{className:"text-sm font-bold text-purple-600",children:R("completed",S.completed)})]})]})})})]})}),s.jsx("div",{className:"px-4",children:s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:I()}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:F,children:s.jsx(Qb,{className:"h-4 w-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:E,children:s.jsx(uc,{className:"h-4 w-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:O,children:s.jsx(Eh,{className:"h-4 w-4"})}),(t==="orders"||t==="revenue")&&s.jsx(se,{variant:"outline",size:"sm",onClick:()=>h(!0),children:s.jsx(ri,{className:"h-4 w-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:A,children:s.jsx(Ri,{className:"h-4 w-4"})})]})]}),s.jsxs(Fi,{value:o,onValueChange:l,className:"w-full",children:[s.jsx("div",{className:"border-b border-gray-100 overflow-x-auto",children:s.jsxs(ii,{className:"flex w-max bg-transparent h-auto p-2 gap-3",children:[s.jsxs(Mt,{value:"all",className:"text-xs py-2 px-3",children:["All (",n.length,")"]}),t==="orders"&&s.jsxs(s.Fragment,{children:[s.jsxs(Mt,{value:"pending",className:"text-xs py-2 px-3",children:["Pending (",S.pending,")"]}),s.jsxs(Mt,{value:"active",className:"text-xs py-2 px-3",children:["Processing (",S.active,")"]}),s.jsxs(Mt,{value:"completed",className:"text-xs py-2 px-3",children:["Delivered (",S.completed,")"]})]}),t==="products"&&s.jsxs(s.Fragment,{children:[s.jsxs(Mt,{value:"active",className:"text-xs py-2 px-3",children:["In Stock (",S.active,")"]}),s.jsxs(Mt,{value:"pending",className:"text-xs py-2 px-3",children:["Low Stock (",S.pending,")"]}),s.jsxs(Mt,{value:"completed",className:"text-xs py-2 px-3",children:["Out of Stock (",S.completed,")"]})]})]})}),s.jsx(bt,{value:"all",className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:i?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Ri,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Loading data..."})]}):X("all").length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Kt,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"No data found"})]}):X("all").map((V,H)=>s.jsxs("div",{className:"p-4",children:[t==="orders"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Kt,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",V.order_number]}),s.jsx("p",{className:"text-xs text-gray-600",children:V.delivery_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[z(V.created_at)," at ",D(V.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(V.total_amount||0).toFixed(2)]}),s.jsx(Ze,{variant:"default",className:"text-xs",children:V.status})]})]}),t==="products"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(xn,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:V.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(V.price).toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",V.quantity]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx(Ze,{className:`text-xs ${V.quantity>10?"bg-green-100 text-green-800":V.quantity>0?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:V.quantity>10?"In Stock":V.quantity>0?"Low Stock":"Out of Stock"})})]}),t==="revenue"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(ti,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",V.order_number]}),s.jsx("p",{className:"text-xs text-gray-600",children:V.delivery_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[z(V.created_at)," at ",D(V.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(V.total_amount||0).toFixed(2)]}),s.jsx(Ze,{variant:"default",className:"text-xs",children:"revenue"})]})]}),t==="customers"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx(zp,{className:"h-5 w-5 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:V.name}),s.jsx("p",{className:"text-xs text-gray-600",children:V.phone}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Last order: ",z(V.lastOrder)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",V.totalSpent.toFixed(2)]}),s.jsxs(Ze,{variant:"default",className:"text-xs",children:[V.orders," orders"]})]})]})]},V.id||H))})}),(t==="orders"||t==="products")&&["pending","active","completed"].map(V=>s.jsx(bt,{value:V,className:"mt-0",children:s.jsx("div",{className:"divide-y divide-gray-100",children:X(V).map((H,q)=>s.jsxs("div",{className:"p-4",children:[t==="orders"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx(Kt,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",H.order_number]}),s.jsx("p",{className:"text-xs text-gray-600",children:H.delivery_name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[z(H.created_at)," at ",D(H.created_at)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm font-bold text-green-600",children:["Rs",parseFloat(H.total_amount||0).toFixed(2)]}),s.jsx(Ze,{variant:"default",className:"text-xs",children:H.status})]})]}),t==="products"&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx(xn,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:H.name}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Rs",parseFloat(H.price).toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Stock: ",H.quantity]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx(Ze,{className:`text-xs ${H.quantity>10?"bg-green-100 text-green-800":H.quantity>0?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:H.quantity>10?"In Stock":H.quantity>0?"Low Stock":"Out of Stock"})})]})]},H.id||q))})},V))]})]})}),b>1&&s.jsx("div",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",(w-1)*N+1," to ",Math.min(w*N,x)," of ",x," records"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>T(w-1),disabled:w===1,children:"Previous"}),s.jsxs("span",{className:"text-sm font-medium",children:[w," of ",b]}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>T(w+1),disabled:w===b,children:"Next"})]})]})}),s.jsx(Zn,{open:d,onOpenChange:h,children:s.jsxs(Pn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(An,{className:"pb-4",children:s.jsx(On,{children:"Filter by Date Range"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"From Date"}),s.jsx(_e,{type:"date",value:f,onChange:V=>u(V.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{children:[s.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"To Date"}),s.jsx(_e,{type:"date",value:m,onChange:V=>p(V.target.value),className:"h-9 text-sm"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(se,{onClick:M,className:"flex-1",children:"Apply Filter"}),s.jsx(se,{variant:"outline",onClick:Z,className:"flex-1",children:"Clear"})]}),(f||m)&&s.jsx("div",{className:"pt-4 border-t",children:s.jsx("p",{className:"text-sm text-gray-600",children:f&&m?`Showing: ${f} to ${m}`:f?`From: ${f}`:m?`Until: ${m}`:""})})]})]})})]})})};function eie(){const e=lt(),{toast:t}=ts(),[n,r]=_.useState("dashboard"),[i,a]=_.useState(!0),[o,l]=_.useState("30"),[d,h]=_.useState(""),[f,u]=_.useState(""),[m,p]=_.useState("all"),[w,y]=_.useState(!1),[b,g]=_.useState("csv"),[x,j]=_.useState([]),[N,S]=_.useState([]),[C,T]=_.useState([]),[A,I]=_.useState({totalRevenue:0,totalOrders:0,avgOrderValue:0,topProducts:[],revenueChart:[],orderChart:[],productPerformance:[],customerInsights:{totalCustomers:0,returningCustomers:0,newCustomers:0}});_.useEffect(()=>{P()},[o,d,f,m]);const P=async()=>{try{a(!0);const{response:W,data:Y}=await Ve("/orders/");if(W.ok){const U=Y.results||Y||[];j(U);const{response:G,data:ne}=await Ve("/products/");if(G.ok){const J=ne.results||ne||[];S(J),R(U,J),X(U)}}}catch(W){console.error("Error fetching data:",W),t({title:"Error",description:"Failed to load analytics data",variant:"destructive"})}finally{a(!1)}},R=(W,Y)=>{const U=E(W),G=U.filter(Q=>Q.status==="delivered"),ne=G.reduce((Q,ye)=>Q+parseFloat(ye.total_amount||0),0),J=U.length,ie=J>0?ne/G.length:0,xe=F(G),Se=O(U),ue=M(G),he=Z(U);I({totalRevenue:ne,totalOrders:J,avgOrderValue:ie,topProducts:ue.slice(0,5),revenueChart:xe,orderChart:Se,productPerformance:ue,customerInsights:he})},E=W=>{let Y=W;if(o!=="custom"){const U=parseInt(o),G=new Date;G.setDate(G.getDate()-U),Y=W.filter(ne=>new Date(ne.created_at)>=G)}else d&&f&&(Y=W.filter(U=>{const G=new Date(U.created_at);return G>=new Date(d)&&G<=new Date(f)}));return m!=="all"&&(Y=Y.filter(U=>{var G;return(G=U.items)==null?void 0:G.some(ne=>{var J;return((J=ne.product_details)==null?void 0:J.id)===parseInt(m)})})),Y},F=W=>{const Y=[];for(let U=29;U>=0;U--){const G=new Date;G.setDate(G.getDate()-U);const ne=W.filter(ie=>new Date(ie.created_at).toDateString()===G.toDateString()),J=ne.reduce((ie,xe)=>ie+parseFloat(xe.total_amount||0),0);Y.push({date:G.toLocaleDateString("en-US",{month:"short",day:"numeric"}),revenue:J,orders:ne.length})}return Y},O=W=>{const Y={pending:0,confirmed:0,preparing:0,out_for_delivery:0,delivered:0,cancelled:0};return W.forEach(U=>{Y.hasOwnProperty(U.status)&&Y[U.status]++}),Object.entries(Y).map(([U,G])=>({status:U.replace("_"," ").replace(/\b\w/g,ne=>ne.toUpperCase()),count:G,percentage:W.length>0?(G/W.length*100).toFixed(1):0}))},M=(W,Y)=>{const U={};return W.forEach(G=>{var ne;(ne=G.items)==null||ne.forEach(J=>{var xe;const ie=(xe=J.product_details)==null?void 0:xe.id;ie&&(U[ie]||(U[ie]={id:ie,name:J.product_name,totalSold:0,totalRevenue:0,orders:0}),U[ie].totalSold+=J.quantity,U[ie].totalRevenue+=parseFloat(J.total_price||0),U[ie].orders++)})}),Object.values(U).sort((G,ne)=>ne.totalRevenue-G.totalRevenue)},Z=W=>{const Y=new Set,U={};W.forEach(ne=>{var ie;const J=((ie=ne.customer_details)==null?void 0:ie.id)||ne.delivery_phone;Y.add(J),U[J]||(U[J]=[]),U[J].push(ne)});const G=Object.values(U).filter(ne=>ne.length>1).length;return{totalCustomers:Y.size,returningCustomers:G,newCustomers:Y.size-G}},X=W=>{const Y=[];W.forEach(U=>{var G,ne,J;U.status==="delivered"&&Y.push({id:U.id,type:"sale",order_number:U.order_number,customer_name:((G=U.customer_details)==null?void 0:G.username)||U.delivery_name,amount:parseFloat(U.total_amount),date:U.created_at,items:((ne=U.items)==null?void 0:ne.length)||0}),((J=U.refunds)==null?void 0:J.length)>0&&U.refunds.forEach(ie=>{var xe,Se;ie.status==="completed"&&Y.push({id:`refund-${ie.id}`,type:"refund",order_number:U.order_number,customer_name:((xe=U.customer_details)==null?void 0:xe.username)||U.delivery_name,amount:-parseFloat(ie.approved_amount||ie.requested_amount),date:ie.completed_at||ie.created_at,items:((Se=U.items)==null?void 0:Se.length)||0})})}),T(Y.sort((U,G)=>new Date(G.date).getTime()-new Date(U.date).getTime()))},z=()=>{const W={summary:{totalRevenue:A.totalRevenue,totalOrders:A.totalOrders,avgOrderValue:A.avgOrderValue,totalCustomers:A.customerInsights.totalCustomers,dateRange:o==="custom"?`${d} to ${f}`:`Last ${o} days`},transactions:C,products:A.productPerformance,revenueChart:A.revenueChart};b==="csv"?D(W):b==="pdf"?V(W):B(W),y(!1)},D=W=>{const Y=[["Analytics Report"],["Generated:",new Date().toLocaleDateString()],["Period:",W.summary.dateRange],[""],["SUMMARY"],["Total Revenue",`Rs ${W.summary.totalRevenue.toFixed(2)}`],["Total Orders",W.summary.totalOrders],["Average Order Value",`Rs ${W.summary.avgOrderValue.toFixed(2)}`],["Total Customers",W.summary.totalCustomers],[""],["TOP PRODUCTS"],["Product Name","Units Sold","Revenue","Orders"],...W.products.slice(0,10).map(J=>[J.name,J.totalSold,`Rs ${J.totalRevenue.toFixed(2)}`,J.orders]),[""],["DAILY REVENUE"],["Date","Revenue","Orders"],...W.revenueChart.map(J=>[J.date,`Rs ${J.revenue.toFixed(2)}`,J.orders])].map(J=>J.join(",")).join(`
`),U=new Blob([Y],{type:"text/csv"}),G=window.URL.createObjectURL(U),ne=document.createElement("a");ne.href=G,ne.download=`analytics-report-${new Date().toISOString().split("T")[0]}.csv`,ne.click(),window.URL.revokeObjectURL(G)},B=W=>{const Y=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),U=window.URL.createObjectURL(Y),G=document.createElement("a");G.href=U,G.download=`analytics-data-${new Date().toISOString().split("T")[0]}.json`,G.click(),window.URL.revokeObjectURL(U)},V=W=>{const Y=`
===========================================
        BUSINESS ANALYTICS REPORT
===========================================
Generated: ${new Date().toLocaleDateString()}
Period: ${W.summary.dateRange}

SUMMARY
-------------------------------------------
Total Revenue: Rs ${W.summary.totalRevenue.toFixed(2)}
Total Orders: ${W.summary.totalOrders}
Average Order Value: Rs ${W.summary.avgOrderValue.toFixed(2)}
Total Customers: ${W.summary.totalCustomers}

TOP PRODUCTS
-------------------------------------------
${W.products.slice(0,10).map((G,ne)=>`${ne+1}. ${G.name} - ${G.totalSold} units - Rs ${G.totalRevenue.toFixed(2)}`).join(`
`)}

DAILY REVENUE TREND
-------------------------------------------
${W.revenueChart.slice(-14).map(G=>`${G.date}: Rs ${G.revenue.toFixed(2)} (${G.orders} orders)`).join(`
`)}

===========================================
    `,U=window.open("","_blank");U==null||U.document.write(`<pre style="font-family: monospace; font-size: 12px; line-height: 1.4;">${Y}</pre>`),U==null||U.print()},H=()=>{var Y;const W=`Business Analytics Report

Total Revenue: Rs ${A.totalRevenue.toFixed(2)}
Total Orders: ${A.totalOrders}
Average Order Value: Rs ${A.avgOrderValue.toFixed(2)}
Total Customers: ${A.customerInsights.totalCustomers}

Top Product: ${((Y=A.topProducts[0])==null?void 0:Y.name)||"N/A"}`;if(navigator.share)navigator.share({title:"Business Analytics Report",text:W});else{const U=`https://wa.me/?text=${encodeURIComponent(W)}`;window.open(U,"_blank")}},q=[{id:"dashboard",label:"Dashboard",icon:gT},{id:"sales",label:"Sales Report",icon:ti},{id:"products",label:"Product Analytics",icon:Kt},{id:"customers",label:"Customer Insights",icon:zp},{id:"statements",label:"Statements",icon:bi}];return i?s.jsx(es,{title:"Business Analytics",children:s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})})}):s.jsx(es,{title:"Business Analytics",children:s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(se,{variant:"ghost",size:"sm",className:"p-2",onClick:()=>e(-1),children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-semibold text-lg",children:"Business Analytics"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive business insights"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>y(!0),children:[s.jsx(uc,{className:"h-4 w-4 mr-1"}),"Export"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:H,children:[s.jsx(Eh,{className:"h-4 w-4 mr-1"}),"Share"]}),s.jsx(se,{variant:"outline",size:"sm",onClick:P,children:s.jsx(Ri,{className:"h-4 w-4"})})]})]})}),s.jsx("div",{className:"bg-white p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ri,{className:"h-4 w-4 text-gray-600"}),s.jsx(ve,{className:"text-sm font-medium",children:"Filters:"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"text-sm",children:"Period:"}),s.jsxs(Zt,{value:o,onValueChange:l,children:[s.jsx(Wt,{className:"w-32",children:s.jsx(Yt,{})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"7",children:"Last 7 days"}),s.jsx(st,{value:"30",children:"Last 30 days"}),s.jsx(st,{value:"90",children:"Last 3 months"}),s.jsx(st,{value:"365",children:"Last year"}),s.jsx(st,{value:"custom",children:"Custom"})]})]})]}),o==="custom"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"text-sm",children:"From:"}),s.jsx(_e,{type:"date",value:d,onChange:W=>h(W.target.value),className:"w-36"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"text-sm",children:"To:"}),s.jsx(_e,{type:"date",value:f,onChange:W=>u(W.target.value),className:"w-36"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"text-sm",children:"Product:"}),s.jsxs(Zt,{value:m,onValueChange:p,children:[s.jsx(Wt,{className:"w-40",children:s.jsx(Yt,{})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"all",children:"All Products"}),N.map(W=>s.jsx(st,{value:W.id.toString(),children:W.name},W.id))]})]})]})]})}),s.jsx("div",{className:"bg-white",children:s.jsxs(Fi,{value:n,onValueChange:r,className:"w-full",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsx(ii,{className:"grid grid-cols-5 w-full min-w-max",children:q.map(W=>s.jsxs(Mt,{value:W.id,className:"flex items-center gap-2 text-xs",children:[s.jsx(W.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:W.label})]},W.id))})}),s.jsxs(bt,{value:"dashboard",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(De,{children:s.jsxs($e,{className:"p-4 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["Rs ",A.totalRevenue.toFixed(0)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.totalOrders}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["Rs ",A.avgOrderValue.toFixed(0)]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Avg Order Value"})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:A.customerInsights.totalCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]})})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs(Et,{className:"flex items-center gap-2",children:[s.jsx(ti,{className:"h-5 w-5"}),"Revenue Trend"]})}),s.jsx($e,{children:s.jsx("div",{className:"h-64 flex items-end justify-between gap-1",children:A.revenueChart.map((W,Y)=>{const U=Math.max(...A.revenueChart.map(ne=>ne.revenue),1),G=W.revenue/U*200;return s.jsxs("div",{className:"flex flex-col items-center flex-1",children:[s.jsx("div",{className:"bg-green-500 rounded-t w-full min-h-[4px] hover:bg-green-600 transition-colors cursor-pointer",style:{height:`${G}px`},title:`${W.date}: Rs ${W.revenue.toFixed(0)}`}),s.jsx("div",{className:"text-xs text-gray-600 mt-1 transform -rotate-45 origin-left",children:W.date})]},Y)})})})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs(Et,{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"h-5 w-5"}),"Top Performing Products"]})}),s.jsx($e,{children:s.jsx("div",{className:"space-y-3",children:A.topProducts.map((W,Y)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-sm font-bold text-blue-600",children:Y+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:W.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[W.totalSold," units sold"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-green-600",children:["Rs ",W.totalRevenue.toFixed(0)]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[W.orders," orders"]})]})]},W.id))})})]})]}),s.jsx(bt,{value:"sales",className:"p-4 space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{children:"Order Status Distribution"})}),s.jsx($e,{children:s.jsx("div",{className:"space-y-3",children:A.orderChart.map(W=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${W.status==="Delivered"?"bg-green-500":W.status==="Pending"?"bg-yellow-500":W.status==="Cancelled"?"bg-red-500":"bg-blue-500"}`}),s.jsx("span",{className:"text-sm",children:W.status})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:W.count}),s.jsxs("span",{className:"text-sm text-gray-600",children:["(",W.percentage,"%)"]})]})]},W.status))})})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{children:"Daily Sales Summary"})}),s.jsx($e,{children:s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:A.revenueChart.slice(-7).reverse().map((W,Y)=>s.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:W.date}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-medium",children:["Rs ",W.revenue.toFixed(0)]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[W.orders," orders"]})]})]},Y))})})]})]})}),s.jsx(bt,{value:"products",className:"p-4 space-y-6",children:s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{children:"Product Performance Report"})}),s.jsx($e,{children:s.jsx("div",{className:"space-y-3",children:A.productPerformance.map((W,Y)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center text-white font-bold",children:Y+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:W.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[W.totalSold," units  ",W.orders," orders"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-green-600",children:["Rs ",W.totalRevenue.toFixed(0)]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["Rs ",(W.totalRevenue/W.totalSold).toFixed(0)," per unit"]})]})]},W.id))})})]})}),s.jsxs(bt,{value:"customers",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(De,{children:s.jsxs($e,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:A.customerInsights.totalCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Customers"})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:A.customerInsights.returningCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"Returning Customers"})]})}),s.jsx(De,{children:s.jsxs($e,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:A.customerInsights.newCustomers}),s.jsx("div",{className:"text-sm text-gray-600",children:"New Customers"})]})})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsx(Et,{children:"Customer Insights"})}),s.jsx($e,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Customer Retention Rate"}),s.jsxs("span",{className:"font-bold text-green-600",children:[A.customerInsights.totalCustomers>0?(A.customerInsights.returningCustomers/A.customerInsights.totalCustomers*100).toFixed(1):0,"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Average Orders per Customer"}),s.jsx("span",{className:"font-bold text-blue-600",children:A.customerInsights.totalCustomers>0?(A.totalOrders/A.customerInsights.totalCustomers).toFixed(1):0})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Average Revenue per Customer"}),s.jsxs("span",{className:"font-bold text-purple-600",children:["Rs ",A.customerInsights.totalCustomers>0?(A.totalRevenue/A.customerInsights.totalCustomers).toFixed(0):0]})]})]})})]})]}),s.jsxs(bt,{value:"statements",className:"p-4 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs(Et,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Sales Summary"}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>y(!0),children:[s.jsx(uc,{className:"h-4 w-4 mr-1"}),"Export"]})]})}),s.jsx($e,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total Sales"}),s.jsxs("span",{className:"font-bold text-green-600",children:["Rs ",A.totalRevenue.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total Orders"}),s.jsx("span",{className:"font-bold text-blue-600",children:A.totalOrders})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Average Order Value"}),s.jsxs("span",{className:"font-bold text-purple-600",children:["Rs ",A.avgOrderValue.toFixed(2)]})]})]})})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs(Et,{className:"flex items-center gap-2",children:[s.jsx(BF,{className:"h-5 w-5"}),"Order Distribution"]})}),s.jsx($e,{children:s.jsx("div",{className:"space-y-3",children:A.orderChart.map((W,Y)=>{const U=["bg-green-500","bg-yellow-500","bg-red-500","bg-blue-500","bg-purple-500"];return s.jsxs("div",{className:"flex items-center justify-between p-2 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${U[Y%U.length]}`}),s.jsx("span",{className:"text-sm",children:W.status})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"font-medium text-sm",children:W.count}),s.jsxs("span",{className:"text-xs text-gray-600 ml-1",children:["(",W.percentage,"%)"]})]})]},W.status)})})})]})]}),s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs(Et,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Recent Transactions"}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>e("/vendor/sales"),children:[s.jsx(en,{className:"h-4 w-4 mr-1"}),"View All"]})})]})}),s.jsx($e,{children:s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:C.slice(0,20).map(W=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${W.type==="sale"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:W.type==="sale"?"":""}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-sm",children:[W.type==="sale"?"Sale":"Refund"," - ",W.order_number]}),s.jsxs("div",{className:"text-xs text-gray-600",children:[W.customer_name,"  ",new Date(W.date).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`font-bold text-sm ${W.type==="sale"?"text-green-600":"text-red-600"}`,children:[W.type==="sale"?"+":"","Rs ",Math.abs(W.amount).toFixed(2)]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[W.items," items"]})]})]},W.id))})})]})]})]})}),s.jsx(Zn,{open:w,onOpenChange:y,children:s.jsxs(Pn,{side:"right",className:"w-full sm:w-80",children:[s.jsx(An,{className:"pb-4",children:s.jsx(On,{children:"Export Analytics Report"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ve,{className:"text-sm font-medium mb-2 block",children:"Export Format"}),s.jsxs(Zt,{value:b,onValueChange:g,children:[s.jsx(Wt,{children:s.jsx(Yt,{})}),s.jsxs(Gt,{children:[s.jsx(st,{value:"csv",children:"CSV Spreadsheet"}),s.jsx(st,{value:"json",children:"JSON Data"}),s.jsx(st,{value:"pdf",children:"PDF Report"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ve,{className:"text-sm font-medium",children:"Report Includes:"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsx("div",{children:" Sales summary and metrics"}),s.jsx("div",{children:" Top performing products"}),s.jsx("div",{children:" Daily revenue trends"}),s.jsx("div",{children:" Customer insights"}),s.jsx("div",{children:" Order distribution"})]})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsxs(se,{onClick:z,className:"flex-1",children:[s.jsx(uc,{className:"h-4 w-4 mr-2"}),"Export Report"]}),s.jsx(se,{variant:"outline",onClick:()=>y(!1),className:"flex-1",children:"Cancel"})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs("p",{className:"text-xs text-gray-500",children:["Report will include data for the selected time period: ",o==="custom"?`${d} to ${f}`:`Last ${o} days`]})})]})]})})]})})}function tie(){const e=lt(),{notifications:t,unreadCount:n,markAsRead:r,markAllAsRead:i,refreshNotifications:a}=WP();_.useEffect(()=>{(async()=>{const{authService:f}=await ze(async()=>{const{authService:m}=await Promise.resolve().then(()=>ra);return{authService:m}},void 0);if(!await f.getToken()){const m=window.location.pathname+window.location.search;e(`/login?redirect=${encodeURIComponent(m)}`)}})()},[e]);const o=h=>{h.read||r(h.id),h.action_url&&e(h.action_url)},l=h=>{switch(h){case"order":return"";case"payment":return"";case"message":return"";default:return""}},d=h=>{switch(h){case"order":return"border-green-200 text-green-700 bg-green-50";case"payment":return"border-blue-200 text-blue-700 bg-blue-50";case"message":return"border-purple-200 text-purple-700 bg-purple-50";default:return"border-gray-200 text-gray-700 bg-gray-50"}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsxs("div",{className:"sticky top-0 z-50 bg-white border-b px-4 py-3 flex items-center gap-3",children:[s.jsxs(se,{variant:"ghost",onClick:()=>e(-1),className:"flex items-center gap-2",children:[s.jsx(Ut,{className:"h-4 w-4"}),"Back"]}),s.jsx("h1",{className:"text-lg font-semibold",children:"Notifications"})]}),s.jsx("div",{className:"max-w-4xl mx-auto p-4",children:s.jsxs(De,{children:[s.jsx(kt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Gn,{className:"h-6 w-6 text-blue-600"}),s.jsx(Et,{className:"text-2xl",children:"Notifications"}),n>0&&s.jsxs(Ze,{className:"bg-red-500 text-white",children:[n," unread"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:a,children:"Refresh"}),n>0&&s.jsxs(se,{variant:"outline",size:"sm",onClick:i,className:"flex items-center gap-2",children:[s.jsx(zF,{className:"h-4 w-4"}),"Mark all read"]})]})]})}),s.jsx($e,{children:t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),s.jsx("p",{className:"text-gray-500",children:"You're all caught up! Check back later for updates."})]}):s.jsx("div",{className:"space-y-3",children:t.map(h=>s.jsx("div",{className:`p-4 rounded-lg border cursor-pointer transition-all hover:shadow-md ${h.read?"bg-white border-gray-200":"bg-blue-50/50 border-blue-200"}`,onClick:()=>o(h),children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"text-2xl",children:l(h.type)}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`font-medium ${h.read?"text-gray-700":"text-gray-900"}`,children:h.title}),s.jsx("p",{className:`text-sm mt-1 ${h.read?"text-gray-600":"text-gray-700"}`,children:h.message}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(h.created_at).toLocaleString()})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{variant:"outline",className:`text-xs ${d(h.type)}`,children:h.type}),!h.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})})]})},h.id))})})]})})]})}const sie=()=>{lt();const[e,t]=_.useState(!1),n=()=>{t(!0)};return e?s.jsx(nie,{onBack:()=>t(!1)}):s.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center p-8",children:s.jsx("button",{onClick:n,className:"bg-pink-500 hover:bg-pink-600 text-white px-8 py-3 rounded-full font-bold text-lg shadow-lg transform hover:scale-105 transition-all duration-200",children:"Take a CV Tour"})})},nie=({onBack:e})=>{const[t,n]=_.useState(0),[r,i]=_.useState({}),[a,o]=_.useState(!1),l=[{title:"Personal Basics",subtitle:"These go at the top of the CV. Keep it simple.",fields:[{name:"fullName",label:"Full Name?",type:"text",placeholder:"e.g., Aarti Sharma  Just confirm spelling."},{name:"phone",label:"Phone Number?",type:"text",placeholder:"Nepal format: 98X-XXXXXXX"},{name:"email",label:"Email?",type:"email",placeholder:"Professional one, like firstname.lastname@gmail.com"},{name:"linkedin",label:"LinkedIn/Profile?",type:"select",options:["Yes","No  If no, suggest making one later."]},{name:"address",label:"Address?",type:"text",placeholder:"Current: Biratnagar?"},{name:"relocate",label:"Willing to relocate to Kathmandu?",type:"select",options:["Yes","No","Preferences"]},{name:"dob",label:"Date of Birth?",type:"date",placeholder:"For age calc  e.g., YYYY-MM-DD"},{name:"nationality",label:"Nationality?",type:"text",placeholder:"Nepali? Any other?"},{name:"languages",label:"Languages?",type:"multiselect",options:["Nepali  Fluent","Nepali  Basic","English  Fluent","English  Basic","Hindi  Fluent","Hindi  Basic","Others? Rate 1-5 for speaking/reading/writing."]}]},{title:"Education & Academics",subtitle:"Focus on her BSclist subjects to show depth for pharma/lab jobs.",fields:[{name:"degree",label:"Degree Details?",type:"text",placeholder:"BSc Microbiology from [College/Uni Name], Biratnagar, Nepal."},{name:"year",label:"Year?",type:"text",placeholder:"202X"},{name:"gpa",label:"GPA/Percentage?",type:"text",placeholder:"X% or Division (First/Second)"},{name:"subjects",label:"Key Subjects Studied?",type:"multiselect",options:["Core: Microbiology (Bacteriology/Virology/Mycology/Parasitology)","Biochemistry","Immunology","Genetics","Molecular Biology","Lab-Focused: Medical Microbiology","Clinical Pathology","Hematology","Microbiology Techniques","Others: Biotechnology","Environmental Microbiology","Food Microbiology","Pharmacology","Anatomy/Physiology"]},{name:"electives",label:"Any electives/specializations?",type:"text",placeholder:"e.g., Hospital Infection Control, Public Health Micro."},{name:"projects",label:"Projects/Thesis?",type:"textarea",placeholder:'Yes/No  If yes: Topic? (e.g., "Antibiotic Resistance in Hospital Bacteria"  Short desc: What did you do? Tools used?)'},{name:"extracurriculars",label:"Extracurriculars?",type:"textarea",placeholder:"Yes/No (e.g., Science club, lab workshops, online courses like Coursera on Micro basics?)"},{name:"awards",label:"Awards/Scholarships?",type:"textarea",placeholder:"Yes/No (e.g., Merit for lab skills?)"}]},{title:"Professional Experience",subtitle:'Her Nobel Hospital internship is goldbreak it down to quantify (e.g., "Handled 50+ samples/day").',fields:[{name:"internship",label:"Internship Confirmation?",type:"text",placeholder:"3 months at Nobel Hospital, Biratnagar (Dates: From-To?). Role: Microbiology Intern/Lab Assistant?"},{name:"sampleHandling",label:"Sample Handling?",type:"multiselect",options:["Collected/processed blood/urine/swabs? (How many/day? Used centrifuges/pipettes?)"]},{name:"cultures",label:"Cultures & Testing?",type:"multiselect",options:["Prepared bacterial/fungal cultures?","Gram staining?","Antibiotic sensitivity tests (e.g., Kirby-Bauer method)?","Types of media used (Agar plates? Broths?)?"]},{name:"microscopy",label:"Microscopy/ID?",type:"multiselect",options:["Microscope work for bacteria/parasites?","Identified pathogens (e.g., E. coli, TB)?"]},{name:"qualityControl",label:"Quality Control?",type:"multiselect",options:["Sterilized equipment?","Followed lab safety (PPE, biohazard protocols)?","Calibrated instruments?"]},{name:"reporting",label:"Reporting?",type:"multiselect",options:["Recorded results in logs?","Used software (e.g., Excel for data entry)?","Shared with doctors?"]},{name:"otherWork",label:"Other Hospital Lab Work?",type:"multiselect",options:["Helped in hematology/chemistry sections?","PCR/ELISA tests?","Inventory of reagents?"]},{name:"achievements",label:"Achievements/Impacts?",type:"textarea",placeholder:'Yes/No (e.g., "Reduced contamination errors by X%?" or "Trained juniors on staining?")'},{name:"supervisors",label:"Supervisors/Team?",type:"textarea",placeholder:"Reported to whom? Team size? Any feedback/letter available? Yes/No."},{name:"otherExperience",label:"Other Experience?",type:"textarea",placeholder:"Yes/No (e.g., Volunteer lab work, family clinic help, part-time jobs?)"}]},{title:"Skills Inventory",subtitle:"She's vague on skills, so this is a yes/no checklist of 50+ common Microbiology skills for Nepal jobs.",fields:[{name:"technicalSkills",label:"Technical/Lab Skills (Rate Y/S/N - Essential for Lab Tech/QC roles)?",type:"skillselect",options:["Microscopy (Light/Fluorescence) - Used in hospital labs for pathogen ID?","Gram Staining/KOH Prep - Basic bacterial identification technique?","Culture Techniques (Aerobic/Anaerobic) - Growing bacteria for testing?","Media Preparation (Nutrient Agar/Blood Agar) - Making culture plates?","Biochemical Tests (Catalase/Oxidase/IMViC) - Bacterial species identification?","Antibiotic Susceptibility Testing - Kirby-Bauer disk diffusion method?","Serology (Widal/VDRL Tests) - Blood tests for infections?","ELISA/PCR Basics - Molecular diagnostic techniques?","Hematology (CBC via Autoanalyzer) - Blood cell counting machines?","Sample Collection (Venipuncture/Swab) - Drawing blood/taking swabs?","Sterilization/Autoclaving - Equipment sterilization protocols?","Biosafety Level Handling (BSL-2) - Safe handling of infectious materials?","pH/Electrolyte Testing - Chemical analysis of body fluids?","Water/Food Microbiology Testing - Testing for contamination?","Molecular Techniques (DNA Extraction) - Genetic material isolation?","Microbial Enumeration (Colony Counting) - Counting bacterial colonies?","Antimicrobial Resistance Testing - Checking drug resistance?","Fungal Culture Techniques - Growing and identifying fungi?","Parasitology Techniques - Identifying parasites in samples?","Clinical Chemistry Analyzers - Automated blood chemistry testing?","Urine Analysis (Dipstick/Microscopy) - Testing urine samples?","Stool Examination - Analyzing fecal samples for pathogens?","Blood Banking Techniques - Blood typing/cross-matching?","Quality Control Testing - Ensuring test accuracy/reliability?","Instrument Calibration/Maintenance - Keeping lab equipment working?","Lab Safety Protocols (PPE Usage) - Personal protective equipment?","Biohazard Waste Management - Safe disposal of infectious waste?","Temperature Monitoring (Incubators/Refrigerators) - Maintaining sample conditions?","Documentation/Record Keeping - Maintaining lab logs/reports?","Internal Quality Assurance - Lab quality management systems?","External Quality Assessment - Participating in proficiency testing?"]},{name:"softSkills",label:"Soft/Workflow Skills (Rate Y/S/N - Important for hospital/pharma teamwork)?",type:"skillselect",options:["Data Entry/Reporting (Excel/Logs) - Recording test results accurately?","Team Collaboration (With Doctors/Nurses) - Working with healthcare staff?","Time Management (Handling Rush Hours) - Managing urgent test requests?","Problem-Solving (e.g., Contaminated Samples) - Troubleshooting lab issues?","Attention to Detail (Error-Free Results) - Ensuring accuracy in testing?","Patient Interaction (Explaining Tests) - Communicating with patients?","Inventory Management (Reagents/Supplies) - Stocking lab materials?","Communication Skills (Verbal/Written) - Explaining results clearly?","Adaptability (New Procedures/Equipment) - Learning new lab techniques?","Work Ethics (Punctuality/Reliability) - Being dependable at work?","Critical Thinking (Result Interpretation) - Analyzing test outcomes?","Multitasking (Multiple Tests Simultaneously) - Handling several tasks?","Stress Management (High-Pressure Situations) - Working under pressure?","Training/Orientation Skills - Teaching new lab staff?","Customer Service Orientation - Serving patients/doctors well?","Confidentiality Maintenance - Keeping patient data private?","Continuous Learning Mindset - Staying updated with lab advances?","Quality Focus (Zero Error Tolerance) - Maintaining high standards?","Safety Consciousness - Prioritizing lab/hospital safety?","Interpersonal Skills (Building Relationships) - Working well with colleagues?"]},{name:"techSkills",label:"Tech/Digital Skills (Rate Y/S/N - Growing importance in modern labs)?",type:"skillselect",options:["MS Office (Word/Excel for Reports) - Creating documents/spreadsheets?","Basic Lab Software (LIS  Lab Info Systems) - Lab management software?","Google Workspace (Docs/Sheets/Drive) - Cloud-based office tools?","Online Research (PubMed for Protocols) - Finding scientific literature?","Any Coding/Data Tools (e.g., Simple stats in Excel) - Basic programming?","Statistical Analysis Software (SPSS/R) - Data analysis tools?","Presentation Software (PowerPoint) - Creating training presentations?","Email Communication - Professional email usage?","Database Management - Organizing lab data?","Digital Microscopy Software - Analyzing microscope images?","Electronic Health Records (EHR) - Hospital patient systems?","Telemedicine Platforms - Remote healthcare tools?","Social Media for Professional Networking - LinkedIn usage?","Online Learning Platforms (Coursera/edX) - Continuing education?","Video Conferencing (Zoom/Teams) - Virtual meetings?","Mobile Apps for Lab Work - Lab-related mobile applications?","Cloud Storage Solutions - Secure data storage?","Cybersecurity Awareness - Protecting sensitive data?","Digital Documentation Tools - Electronic lab notebooks?","Automation Software Knowledge - Robotic lab equipment?"]},{name:"industrySkills",label:"Nepal-Specific/Industry Skills (Rate Y/S/N - Tailored for Nepal job market)?",type:"skillselect",options:["GMP/GLP Compliance - Good Manufacturing/Lab Practices?","Quality Assurance in Labs - Ensuring lab quality standards?","Infection Control (Hospital Protocols) - Hospital infection prevention?","Public Health Surveillance (e.g., Outbreak Tracking) - Disease monitoring?","Vaccine/Drug Testing Basics - Pharmaceutical testing knowledge?","Environmental Sampling (Air/Water) - Environmental testing?","Bioinformatics Basics (Sequence Analysis) - Biological data analysis?","Nepali Health System Knowledge - Understanding local healthcare?","Tribhuvan University Teaching Hospital Procedures - Kathmandu hospital experience?","Patan Hospital Protocols - Major hospital workflows?","Nepal Pharmaceuticals Lab Standards - Pharma company requirements?","Private Lab Clinic Operations - Diagnostic center procedures?","Government Hospital Compliance - Public sector lab standards?","Biotech Lab Research Methods - Research laboratory techniques?","Public Health Lab Testing - Government health lab procedures?","Medical College Lab Training - Academic lab experience?","Pharmacy Lab Quality Control - Drug testing procedures?","Food Safety Testing - Food microbiology standards?","Water Quality Analysis - Drinking water testing?","Air Quality Monitoring - Environmental air testing?","Epidemiological Data Collection - Disease pattern tracking?","Health Education/Promotion - Community health awareness?","Medical Waste Management - Healthcare waste handling?","Emergency Response Protocols - Crisis situation handling?","Cultural Competence in Healthcare - Understanding patient diversity?","Nepali Language Medical Terminology - Local medical terms?","Rural Health Camp Experience - Community health outreach?","Mobile Health (mHealth) Solutions - Digital health innovations?","Traditional Medicine Integration - Ayurvedic/modern medicine blend?","Health Insurance Procedures - Insurance claim processes?","Medical Equipment Maintenance - Lab instrument upkeep?"]},{name:"topSkills",label:"Pick Top 8-10 Strongest Skills?",type:"multiselect",options:[]}]},{title:"Certifications & Extras",subtitle:"These boost credibility for Kathmandu jobs.",fields:[{name:"certifications",label:"Certifications?",type:"textarea",placeholder:"Yes/No (e.g., Lab Technician Cert from CTEVT? Biosafety Training? First Aid?)"},{name:"workshops",label:"Workshops/Seminars?",type:"textarea",placeholder:"Yes/No (e.g., Attended Micro conference? Online from WHO/Nepal Health?)"},{name:"memberships",label:"Memberships?",type:"textarea",placeholder:"Yes/No (e.g., Nepal Microbiology Society? Student chapter?)"},{name:"hobbies",label:"Hobbies/Interests?",type:"textarea",placeholder:"Tie to job: e.g., Reading science journals? Volunteering health camps?"},{name:"references",label:"References?",type:"textarea",placeholder:"Yes/No (e.g., Nobel supervisor contact? 2-3 names/emails.)"}]},{title:"Job Targeting",subtitle:"To tailor CV versions for different Kathmandu roles.",fields:[{name:"dreamRoles",label:"Dream Roles?",type:"multiselect",options:["Hospital Lab Tech","Pharma QC Analyst","Research Asst","Public Health Inspector","Biotech Lab","Teaching Asst","Sales Rep (Med Devices)"]},{name:"employers",label:"Preferred Employers?",type:"textarea",placeholder:"e.g., Govt: Sukraraj Tropical Hospital; Private: Grande City Lab, Asian Pharma; Orgs: Nepal Red Cross."},{name:"salary",label:"Salary Expectation?",type:"text",placeholder:"For CV summary: Entry-level NPR 20k-30k? Don't put exact # in CV."},{name:"availability",label:"Availability?",type:"select",options:["Immediate?","Notice period?"]},{name:"gaps",label:"Any Gaps/Weaknesses?",type:"textarea",placeholder:"e.g., No car? Willing to learn tech?  Frame positively in CV."}]}],d=(p,w)=>{i(y=>({...y,[p]:w}))},h=()=>{t<l.length-1&&n(t+1)},f=()=>{o(!0)},u=()=>{t>0&&n(t-1)},m=p=>{switch(p.type){case"text":case"email":case"date":return s.jsx("input",{type:p.type,placeholder:p.placeholder,value:r[p.name]||"",onChange:w=>d(p.name,w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"});case"textarea":return s.jsx("textarea",{placeholder:p.placeholder,value:r[p.name]||"",onChange:w=>d(p.name,w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent h-24"});case"select":return s.jsxs("select",{value:r[p.name]||"",onChange:w=>d(p.name,w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select..."}),p.options.map(w=>s.jsx("option",{value:w,children:w},w))]});case"multiselect":return s.jsx("div",{className:"space-y-2",children:p.options.map(w=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:(r[p.name]||[]).includes(w),onChange:y=>{const b=r[p.name]||[];y.target.checked?d(p.name,[...b,w]):d(p.name,b.filter(g=>g!==w))},className:"rounded border-gray-300 text-pink-600 focus:ring-pink-500"}),s.jsx("span",{className:"text-sm",children:w})]},w))});case"skillselect":return s.jsx("div",{className:"space-y-3",children:p.options.map(w=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-sm flex-1",children:w}),s.jsx("div",{className:"flex space-x-2",children:["Yes (Proficient)","Somewhat","No"].map(y=>{var b;return s.jsxs("label",{className:"flex items-center space-x-1",children:[s.jsx("input",{type:"radio",name:`${p.name}-${w}`,value:y,checked:((b=r[p.name])==null?void 0:b[w])===y,onChange:g=>{const x=r[p.name]||{};d(p.name,{...x,[w]:g.target.value})},className:"text-pink-600 focus:ring-pink-500"}),s.jsx("span",{className:"text-xs",children:y.split(" ")[0]})]},y)})})]},w))});default:return null}};return a?s.jsx(rie,{formData:r,onBack:()=>o(!1)}):s.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("button",{onClick:e,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium",children:" Back"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"CV Builder for Aarti"}),s.jsxs("div",{className:"text-sm text-gray-600",children:[t+1," / ",l.length]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-6",children:s.jsx("div",{className:"bg-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${(t+1)/l.length*100}%`}})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:l[t].title}),l[t].subtitle&&s.jsx("p",{className:"text-sm text-gray-600 mb-4 italic",children:l[t].subtitle}),s.jsx("div",{className:"space-y-4 mb-6",children:l[t].fields.map(p=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:p.label}),m(p)]},p.name))}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:u,disabled:t===0,className:"bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed text-gray-800 px-6 py-2 rounded-lg font-medium transition-colors",children:"Previous"}),s.jsx("button",{onClick:t===l.length-1?f:h,className:"bg-pink-500 hover:bg-pink-600 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:t===l.length-1?"Generate CV Preview":"Next"})]})]})})},rie=({formData:e,onBack:t})=>{const n=()=>{var p;const i=e.fullName||"Aarti Sharma",a=e.phone||"",o=e.email||"",l=e.address||"",d=e.linkedin||"",h=e.dob||"",f=e.nationality||"",u=e.languages||[];return`
${i.toUpperCase()}
${l}
Phone: ${a} | Email: ${o}${d==="Yes"?" | LinkedIn: Available":""}

PERSONAL INFORMATION
Date of Birth: ${h}
Nationality: ${f}
Languages: ${u.join(", ")}

PROFESSIONAL SUMMARY
${e.fullName||"Aarti"} is a BSc Microbiology graduate with ${e.internship?"3-month hands-on internship experience at Nobel Hospital, Biratnagar":"strong academic foundation in microbiology"}. Seeking entry-level position in medical laboratory technology, quality control analyst, or research assistance in Kathmandu's healthcare and pharmaceutical sector. ${e.relocate==="Yes"?"Willing to relocate to Kathmandu.":""}

EDUCATION
${e.degree||"BSc Microbiology"}
Institution: ${(p=e.degree)!=null&&p.includes("Biratnagar")?"Biratnagar, Nepal":"College/University, Biratnagar, Nepal"}
${e.year?`Graduation Year: ${e.year}`:""}
${e.gpa?`GPA/Percentage: ${e.gpa}`:""}

KEY SUBJECTS STUDIED:
${(e.subjects||[]).map(w=>` ${w}`).join(`
`)}

${e.electives?`ELECTIVES/SPECIALIZATIONS:
 ${e.electives}`:""}

${e.projects?`PROJECTS/THESIS:
${e.projects}`:""}

${e.extracurriculars?`EXTRACURRICULAR ACTIVITIES:
${e.extracurriculars}`:""}

${e.awards?`AWARDS/SCHOLARSHIPS:
${e.awards}`:""}

PROFESSIONAL EXPERIENCE
${e.internship||"Microbiology Laboratory Intern"}
${e.dates||"3 Months"}
${e.role||"Nobel Hospital, Biratnagar, Nepal"}

KEY RESPONSIBILITIES & ACHIEVEMENTS:
${e.sampleHandling?`SAMPLE HANDLING:
${(e.sampleHandling||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.cultures?`CULTURES & TESTING:
${(e.cultures||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.microscopy?`MICROSCOPY & IDENTIFICATION:
${(e.microscopy||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.qualityControl?`QUALITY CONTROL & SAFETY:
${(e.qualityControl||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.reporting?`REPORTING & DOCUMENTATION:
${(e.reporting||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.otherWork?`ADDITIONAL RESPONSIBILITIES:
${(e.otherWork||[]).map(w=>` ${w}`).join(`
`)}`:""}

${e.achievements?`KEY ACHIEVEMENTS:
 ${e.achievements}`:""}

${e.supervisors?`SUPERVISION & TEAM:
${e.supervisors}`:""}

${e.otherExperience?`ADDITIONAL EXPERIENCE:
${e.otherExperience}`:""}

SKILLS INVENTORY

TECHNICAL/LABORATORY SKILLS:
${Object.entries(e.technicalSkills||{}).filter(([w,y])=>y==="Yes (Proficient)").map(([w,y])=>` ${w} (Proficient)`).join(`
`)}
${Object.entries(e.technicalSkills||{}).filter(([w,y])=>y==="Somewhat").map(([w,y])=>` ${w} (Basic Knowledge)`).join(`
`)}

SOFT/WORKFLOW SKILLS:
${Object.entries(e.softSkills||{}).filter(([w,y])=>y==="Yes (Proficient)").map(([w,y])=>` ${w} (Proficient)`).join(`
`)}
${Object.entries(e.softSkills||{}).filter(([w,y])=>y==="Somewhat").map(([w,y])=>` ${w} (Developing)`).join(`
`)}

TECHNICAL/DIGITAL SKILLS:
${Object.entries(e.techSkills||{}).filter(([w,y])=>y==="Yes (Proficient)").map(([w,y])=>` ${w} (Proficient)`).join(`
`)}
${Object.entries(e.techSkills||{}).filter(([w,y])=>y==="Somewhat").map(([w,y])=>` ${w} (Basic)`).join(`
`)}

NEPAL-SPECIFIC/INDUSTRY SKILLS:
${Object.entries(e.industrySkills||{}).filter(([w,y])=>y==="Yes (Proficient)").map(([w,y])=>` ${w} (Proficient)`).join(`
`)}
${Object.entries(e.industrySkills||{}).filter(([w,y])=>y==="Somewhat").map(([w,y])=>` ${w} (Familiar)`).join(`
`)}

TOP SKILLS (Most Relevant for Job Applications):
${(e.topSkills||[]).slice(0,10).map(w=>` ${w}`).join(`
`)}

CERTIFICATIONS, TRAINING & EXTRAS

${e.certifications?`CERTIFICATIONS:
${e.certifications}`:`CERTIFICATIONS:
 Laboratory Safety Training
 Biosafety Level 2 Training`}

${e.workshops?`WORKSHOPS/SEMINARS:
${e.workshops}`:""}

${e.memberships?`MEMBERSHIPS:
${e.memberships}`:""}

${e.hobbies?`HOBBIES/INTERESTS:
${e.hobbies}`:""}

JOB TARGETING & PREFERENCES

TARGET ROLES:
${(e.dreamRoles||[]).map(w=>` ${w}`).join(`
`)}

PREFERRED EMPLOYERS:
${e.employers||` Tribhuvan University Teaching Hospital
 Patan Hospital
 Grande International Hospital
 Nepal Pharmaceuticals Laboratory
 Private diagnostic labs in Kathmandu`}

SALARY EXPECTATION:
${e.salary||"Entry-level: NPR 20,000 - 30,000 per month"}

AVAILABILITY:
${e.availability||"Immediate"}

${e.gaps?`ADDITIONAL NOTES:
${e.gaps}`:""}

REFERENCES
${e.references||"Available upon request from Nobel Hospital supervisors and academic mentors."}

DECLARATION
I hereby declare that the information provided above is true and accurate to the best of my knowledge.

Date: _______________
${i}
`},r=()=>{const i=n(),a=new Blob([i],{type:"text/plain"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`${e.fullName||"Aarti"}_CV.txt`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)};return s.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("button",{onClick:t,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium",children:" Back to Form"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"CV Preview"}),s.jsx("button",{onClick:r,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium",children:" Download CV"})]}),s.jsx("div",{className:"bg-white shadow-lg rounded-lg p-8 font-mono text-sm leading-relaxed",children:s.jsx("pre",{className:"whitespace-pre-wrap text-gray-800",children:n()})}),s.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:" CV Tips for Aarti:"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:" Customize this CV for each job application"}),s.jsx("li",{children:" Use keywords from job descriptions"}),s.jsx("li",{children:" Quantify achievements with numbers where possible"}),s.jsx("li",{children:" Keep it to 1 page for entry-level positions"}),s.jsx("li",{children:" Proofread carefully before submitting"}),s.jsx("li",{children:" Consider having it professionally designed"})]})]})]})})};var iie=typeof Element<"u",aie=typeof Map=="function",oie=typeof Set=="function",lie=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function lm(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!lm(e[r],t[r]))return!1;return!0}var a;if(aie&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;for(a=e.entries();!(r=a.next()).done;)if(!lm(r.value[1],t.get(r.value[0])))return!1;return!0}if(oie&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(r=a.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(lie&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(iie&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!lm(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var cie=function(t,n){try{return lm(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const die=vl(cie);var uie=function(e,t,n,r,i,a,o,l){if(!e){var d;if(t===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[n,r,i,a,o,l],f=0;d=new Error(t.replace(/%s/g,function(){return h[f++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}},hie=uie;const p2=vl(hie);var fie=function(t,n,r,i){var a=r?r.call(i,t,n):void 0;if(a!==void 0)return!!a;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var o=Object.keys(t),l=Object.keys(n);if(o.length!==l.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(n),h=0;h<o.length;h++){var f=o[h];if(!d(f))return!1;var u=t[f],m=n[f];if(a=r?r.call(i,u,m,f):void 0,a===!1||a===void 0&&u!==m)return!1}return!0};const mie=vl(fie);var Q4=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(Q4||{}),jx={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},g2=Object.values(Q4),U_={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},pie=Object.entries(U_).reduce((e,[t,n])=>(e[n]=t,e),{}),Gr="data-rh",wc={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},_c=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},gie=e=>{let t=_c(e,"title");const n=_c(e,wc.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,()=>t);const r=_c(e,wc.DEFAULT_TITLE);return t||r||void 0},vie=e=>_c(e,wc.ON_CHANGE_CLIENT_STATE)||(()=>{}),Nx=(e,t)=>t.filter(n=>typeof n[e]<"u").map(n=>n[e]).reduce((n,r)=>({...n,...r}),{}),xie=(e,t)=>t.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const i=Object.keys(r);for(let a=0;a<i.length;a+=1){const l=i[a].toLowerCase();if(e.indexOf(l)!==-1&&r[l])return n.concat(r)}}return n},[]),yie=e=>console&&typeof console.warn=="function"&&console.warn(e),tu=(e,t,n)=>{const r={};return n.filter(i=>Array.isArray(i[e])?!0:(typeof i[e]<"u"&&yie(`Helmet: ${e} should be of type "Array". Instead found type "${typeof i[e]}"`),!1)).map(i=>i[e]).reverse().reduce((i,a)=>{const o={};a.filter(d=>{let h;const f=Object.keys(d);for(let m=0;m<f.length;m+=1){const p=f[m],w=p.toLowerCase();t.indexOf(w)!==-1&&!(h==="rel"&&d[h].toLowerCase()==="canonical")&&!(w==="rel"&&d[w].toLowerCase()==="stylesheet")&&(h=w),t.indexOf(p)!==-1&&(p==="innerHTML"||p==="cssText"||p==="itemprop")&&(h=p)}if(!h||!d[h])return!1;const u=d[h].toLowerCase();return r[h]||(r[h]={}),o[h]||(o[h]={}),r[h][u]?!1:(o[h][u]=!0,!0)}).reverse().forEach(d=>i.push(d));const l=Object.keys(o);for(let d=0;d<l.length;d+=1){const h=l[d],f={...r[h],...o[h]};r[h]=f}return i},[]).reverse()},bie=(e,t)=>{if(Array.isArray(e)&&e.length){for(let n=0;n<e.length;n+=1)if(e[n][t])return!0}return!1},wie=e=>({baseTag:xie(["href"],e),bodyAttributes:Nx("bodyAttributes",e),defer:_c(e,wc.DEFER),encode:_c(e,wc.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Nx("htmlAttributes",e),linkTags:tu("link",["rel","href"],e),metaTags:tu("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:tu("noscript",["innerHTML"],e),onChangeClientState:vie(e),scriptTags:tu("script",["src","innerHTML"],e),styleTags:tu("style",["cssText"],e),title:gie(e),titleAttributes:Nx("titleAttributes",e),prioritizeSeoTags:bie(e,wc.PRIORITIZE_SEO_TAGS)}),eM=e=>Array.isArray(e)?e.join(""):e,_ie=(e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1},Sx=(e,t)=>Array.isArray(e)?e.reduce((n,r)=>(_ie(r,t)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:e,priority:[]},v2=(e,t)=>({...e,[t]:void 0}),jie=["noscript","script","style"],H0=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),tM=e=>Object.keys(e).reduce((t,n)=>{const r=typeof e[n]<"u"?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${r}`:r},""),Nie=(e,t,n,r)=>{const i=tM(n),a=eM(t);return i?`<${e} ${Gr}="true" ${i}>${H0(a,r)}</${e}>`:`<${e} ${Gr}="true">${H0(a,r)}</${e}>`},Sie=(e,t,n=!0)=>t.reduce((r,i)=>{const a=i,o=Object.keys(a).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,f)=>{const u=typeof a[f]>"u"?f:`${f}="${H0(a[f],n)}"`;return h?`${h} ${u}`:u},""),l=a.innerHTML||a.cssText||"",d=jie.indexOf(e)===-1;return`${r}<${e} ${Gr}="true" ${o}${d?"/>":`>${l}</${e}>`}`},""),sM=(e,t={})=>Object.keys(e).reduce((n,r)=>{const i=U_[r];return n[i||r]=e[r],n},t),kie=(e,t,n)=>{const r={key:t,[Gr]:!0},i=sM(n,r);return[Ae.createElement("title",i,t)]},cm=(e,t)=>t.map((n,r)=>{const i={key:r,[Gr]:!0};return Object.keys(n).forEach(a=>{const l=U_[a]||a;if(l==="innerHTML"||l==="cssText"){const d=n.innerHTML||n.cssText;i.dangerouslySetInnerHTML={__html:d}}else i[l]=n[a]}),Ae.createElement(e,i)}),vr=(e,t,n=!0)=>{switch(e){case"title":return{toComponent:()=>kie(e,t.title,t.titleAttributes),toString:()=>Nie(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>sM(t),toString:()=>tM(t)};default:return{toComponent:()=>cm(e,t),toString:()=>Sie(e,t,n)}}},Cie=({metaTags:e,linkTags:t,scriptTags:n,encode:r})=>{const i=Sx(e,jx.meta),a=Sx(t,jx.link),o=Sx(n,jx.script);return{priorityMethods:{toComponent:()=>[...cm("meta",i.priority),...cm("link",a.priority),...cm("script",o.priority)],toString:()=>`${vr("meta",i.priority,r)} ${vr("link",a.priority,r)} ${vr("script",o.priority,r)}`},metaTags:i.default,linkTags:a.default,scriptTags:o.default}},Eie=e=>{const{baseTag:t,bodyAttributes:n,encode:r=!0,htmlAttributes:i,noscriptTags:a,styleTags:o,title:l="",titleAttributes:d,prioritizeSeoTags:h}=e;let{linkTags:f,metaTags:u,scriptTags:m}=e,p={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:p,linkTags:f,metaTags:u,scriptTags:m}=Cie(e)),{priority:p,base:vr("base",t,r),bodyAttributes:vr("bodyAttributes",n,r),htmlAttributes:vr("htmlAttributes",i,r),link:vr("link",f,r),meta:vr("meta",u,r),noscript:vr("noscript",a,r),script:vr("script",m,r),style:vr("style",o,r),title:vr("title",{title:l,titleAttributes:d},r)}},W0=Eie,Mf=[],nM=!!(typeof window<"u"&&window.document&&window.document.createElement),G0=class{constructor(e,t){Ht(this,"instances",[]);Ht(this,"canUseDOM",nM);Ht(this,"context");Ht(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Mf:this.instances,add:e=>{(this.canUseDOM?Mf:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Mf:this.instances).indexOf(e);(this.canUseDOM?Mf:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=W0({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Tie={},rM=Ae.createContext(Tie),Go,Pie=(Go=class extends _.Component{constructor(n){super(n);Ht(this,"helmetData");this.helmetData=new G0(this.props.context||{},Go.canUseDOM)}render(){return Ae.createElement(rM.Provider,{value:this.helmetData.value},this.props.children)}},Ht(Go,"canUseDOM",nM),Go),Dl=(e,t)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${e}[${Gr}]`),i=[].slice.call(r),a=[];let o;return t&&t.length&&t.forEach(l=>{const d=document.createElement(e);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h))if(h==="innerHTML")d.innerHTML=l.innerHTML;else if(h==="cssText")d.styleSheet?d.styleSheet.cssText=l.cssText:d.appendChild(document.createTextNode(l.cssText));else{const f=h,u=typeof l[f]>"u"?"":l[f];d.setAttribute(h,u)}d.setAttribute(Gr,"true"),i.some((h,f)=>(o=f,d.isEqualNode(h)))?i.splice(o,1):a.push(d)}),i.forEach(l=>{var d;return(d=l.parentNode)==null?void 0:d.removeChild(l)}),a.forEach(l=>n.appendChild(l)),{oldTags:i,newTags:a}},K0=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const r=n.getAttribute(Gr),i=r?r.split(","):[],a=[...i],o=Object.keys(t);for(const l of o){const d=t[l]||"";n.getAttribute(l)!==d&&n.setAttribute(l,d),i.indexOf(l)===-1&&i.push(l);const h=a.indexOf(l);h!==-1&&a.splice(h,1)}for(let l=a.length-1;l>=0;l-=1)n.removeAttribute(a[l]);i.length===a.length?n.removeAttribute(Gr):n.getAttribute(Gr)!==o.join(",")&&n.setAttribute(Gr,o.join(","))},Aie=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=eM(e)),K0("title",t)},x2=(e,t)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:i,linkTags:a,metaTags:o,noscriptTags:l,onChangeClientState:d,scriptTags:h,styleTags:f,title:u,titleAttributes:m}=e;K0("body",r),K0("html",i),Aie(u,m);const p={baseTag:Dl("base",n),linkTags:Dl("link",a),metaTags:Dl("meta",o),noscriptTags:Dl("noscript",l),scriptTags:Dl("script",h),styleTags:Dl("style",f)},w={},y={};Object.keys(p).forEach(b=>{const{newTags:g,oldTags:x}=p[b];g.length&&(w[b]=g),x.length&&(y[b]=p[b].oldTags)}),t&&t(),d(e,w,y)},su=null,Oie=e=>{su&&cancelAnimationFrame(su),e.defer?su=requestAnimationFrame(()=>{x2(e,()=>{su=null})}):(x2(e),su=null)},Rie=Oie,y2=class extends _.Component{constructor(){super(...arguments);Ht(this,"rendered",!1)}shouldComponentUpdate(t){return!mie(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:n}=this.props.context;let r=null;const i=wie(t.get().map(a=>{const o={...a.props};return delete o.context,o}));Pie.canUseDOM?Rie(i):W0&&(r=W0(i)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},kx,q_=(kx=class extends _.Component{shouldComponentUpdate(e){return!die(v2(this.props,"helmetData"),v2(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,r){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,n,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach(r=>{n={...n,[r]:e[r]}}),n}warnOnInvalidChildren(e,t){return p2(g2.some(n=>e.type===n),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${g2.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),p2(!t||typeof t=="string"||Array.isArray(t)&&!t.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return Ae.Children.forEach(e,r=>{if(!r||!r.props)return;const{children:i,...a}=r.props,o=Object.keys(a).reduce((d,h)=>(d[pie[h]||h]=a[h],d),{});let{type:l}=r;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(r,i),l){case"Symbol(react.fragment)":t=this.mapChildrenToProps(i,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,o,i);break;default:t=this.mapObjectTypeChildren(r,t,o,i);break}}),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:r}=t;if(e&&(n=this.mapChildrenToProps(e,n)),r&&!(r instanceof G0)){const i=r;r=new G0(i.context,!0),delete n.helmetData}return r?Ae.createElement(y2,{...n,context:r.value}):Ae.createElement(rM.Consumer,null,i=>Ae.createElement(y2,{...n,context:i}))}},Ht(kx,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),kx);const Lie=()=>s.jsxs(s.Fragment,{children:[s.jsxs(q_,{children:[s.jsx("title",{children:"Same Day Delivery in Kathmandu | ezeyway - Instant Shopping & Delivery"}),s.jsx("meta",{name:"description",content:"Get same-day delivery in Kathmandu Valley. Shop groceries, electronics, fashion & more with instant delivery within 2 hours. Connect with trusted local vendors."}),s.jsx("meta",{name:"keywords",content:"Kathmandu delivery, same day delivery Kathmandu, instant delivery Nepal, Kathmandu Valley shopping, local delivery service Kathmandu"}),s.jsx("link",{rel:"canonical",href:"https://ezeyway.com/kathmandu-delivery"}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Service",name:"Kathmandu Same-Day Delivery Service",description:"Same-day delivery service covering all areas of Kathmandu Valley",provider:{"@type":"Organization",name:"ezeyway"},areaServed:{"@type":"City",name:"Kathmandu",addressCountry:"NP"},serviceType:"Delivery Service",offers:{"@type":"Offer",description:"Same-day delivery within 2 hours"}})})]}),s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Same Day Delivery in Kathmandu"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Why Choose ezeyway in Kathmandu?"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Same-day delivery within 2 hours"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Connect with verified local vendors"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Fresh products and best prices"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Covers entire Kathmandu Valley"})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Areas We Serve"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Thamel"," Boudha","Swayambhu","Durbar Square","New Road","Putalisadak","Baneshwor","Koteshwor","Jawalakhel","Lazimpat","Maharajgunj","Baluwatar"].map(e=>s.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:e},e))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Kathmandu Delivery Zones"}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"border rounded-lg p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Core Kathmandu"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Central business districts with fastest delivery"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Delivery: Within 1 hour"})]}),s.jsxs("div",{className:"border rounded-lg p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Extended Valley"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Lalitpur, Bhaktapur, and nearby areas"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Delivery: Within 2 hours"})]}),s.jsxs("div",{className:"border rounded-lg p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Premium Service"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Express delivery for urgent orders"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Delivery: Within 30 minutes"})]})]})]}),s.jsx("div",{className:"text-center",children:s.jsx("a",{href:"/search",className:"inline-block bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors",children:"Start Shopping in Kathmandu"})})]})})]}),Iie=()=>s.jsxs(s.Fragment,{children:[s.jsxs(q_,{children:[s.jsx("title",{children:"Same Day Delivery in Lalitpur | ezeyway - Instant Shopping & Delivery"}),s.jsx("meta",{name:"description",content:"Get same-day delivery in Lalitpur, Nepal. Shop groceries, electronics, fashion & more with instant delivery within 2 hours. Connect with trusted local vendors."}),s.jsx("meta",{name:"keywords",content:"Lalitpur delivery, same day delivery Lalitpur, instant delivery Nepal, Patan shopping, local delivery service Lalitpur"}),s.jsx("link",{rel:"canonical",href:"https://ezeyway.com/lalitpur-delivery"}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Service",name:"Lalitpur Same-Day Delivery Service",description:"Same-day delivery service covering all areas of Lalitpur (Patan)",provider:{"@type":"Organization",name:"ezeyway"},areaServed:{"@type":"City",name:"Lalitpur",alternateName:"Patan",addressCountry:"NP"},serviceType:"Delivery Service",offers:{"@type":"Offer",description:"Same-day delivery within 2 hours"}})})]}),s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Same Day Delivery in Lalitpur (Patan)"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Why Choose ezeyway in Lalitpur?"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Same-day delivery within 2 hours"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Connect with verified local vendors"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Fresh products and best prices"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Covers all Lalitpur neighborhoods"})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Areas We Serve in Lalitpur"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Patan Durbar Square","Jawalakhel","Pulchowk","Sanepa","Lagankhel","Bakhundole","Kupandole","Ekantakuna","Gwarko","Imadol","Nakhu","Thecho"].map(e=>s.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:e},e))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Lalitpur Delivery Information"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Popular Shopping Areas"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:" Pulchowk - Electronics & Fashion"}),s.jsx("li",{children:" Jawalakhel - Restaurants & Groceries"}),s.jsx("li",{children:" Kupandole - Modern Shopping"}),s.jsx("li",{children:" Lagankhel - Traditional Markets"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Delivery Times"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:" Standard Delivery: 1-2 hours"}),s.jsx("li",{children:" Express Service: 30-45 minutes"}),s.jsx("li",{children:" Operating Hours: 6 AM - 10 PM"}),s.jsx("li",{children:" Weekend Service: Available"})]})]})]})]}),s.jsx("div",{className:"text-center",children:s.jsx("a",{href:"/search",className:"inline-block bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors",children:"Start Shopping in Lalitpur"})})]})})]}),Mie=()=>s.jsxs(s.Fragment,{children:[s.jsxs(q_,{children:[s.jsx("title",{children:"Same Day Delivery in Bhaktapur | ezeyway - Instant Shopping & Delivery"}),s.jsx("meta",{name:"description",content:"Get same-day delivery in Bhaktapur, Nepal. Shop groceries, electronics, fashion & more with instant delivery within 2 hours. Connect with trusted local vendors."}),s.jsx("meta",{name:"keywords",content:"Bhaktapur delivery, same day delivery Bhaktapur, instant delivery Nepal, Bhadgaon shopping, local delivery service Bhaktapur"}),s.jsx("link",{rel:"canonical",href:"https://ezeyway.com/bhaktapur-delivery"}),s.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Service",name:"Bhaktapur Same-Day Delivery Service",description:"Same-day delivery service covering all areas of Bhaktapur (Bhadgaon)",provider:{"@type":"Organization",name:"ezeyway"},areaServed:{"@type":"City",name:"Bhaktapur",alternateName:"Bhadgaon",addressCountry:"NP"},serviceType:"Delivery Service",offers:{"@type":"Offer",description:"Same-day delivery within 2 hours"}})})]}),s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Same Day Delivery in Bhaktapur (Bhadgaon)"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Why Choose ezeyway in Bhaktapur?"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Same-day delivery within 2 hours"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Connect with verified local vendors"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Fresh products and best prices"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:""}),s.jsx("span",{children:"Covers all Bhaktapur neighborhoods"})]})]})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Areas We Serve in Bhaktapur"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Durbar Square","Taumadhi","Dattatreya","Pottery Square","Siddha Pokhari","Bode","Katunje","Thimi","Madhyapur","Suryabinayak","Balkot","Chyamhasingh"].map(e=>s.jsx("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:e},e))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Bhaktapur Delivery Information"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Local Specialties"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:" Traditional Pottery & Crafts"}),s.jsx("li",{children:" Local Juju Dhau (Yogurt)"}),s.jsx("li",{children:" Fresh Vegetables & Spices"}),s.jsx("li",{children:" Handmade Goods"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Delivery Times"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:" Standard Delivery: 1-2 hours"}),s.jsx("li",{children:" Express Service: 45-60 minutes"}),s.jsx("li",{children:" Operating Hours: 6 AM - 10 PM"}),s.jsx("li",{children:" Weekend Service: Available"})]})]})]})]}),s.jsx("div",{className:"text-center",children:s.jsx("a",{href:"/search",className:"inline-block bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors",children:"Start Shopping in Bhaktapur"})})]})})]}),Die=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Compose New Message"}),s.jsx("p",{children:"Coming soon..."})]}),Fie=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Customer Management"}),s.jsx("p",{children:"Coming soon..."})]}),$ie=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Search Messages"}),s.jsx("p",{children:"Coming soon..."})]}),Bie=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Message Settings"}),s.jsx("p",{children:"Coming soon..."})]}),zie=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add New Products"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Product Statistics"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"24"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Products"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Categories"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"8"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Active Categories"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Approvals"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"3"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Awaiting Review"})]})]})]}),Vie=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Return Order Management"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Return Requests"}),s.jsx("p",{className:"text-3xl font-bold text-red-600",children:"7"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pending review"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Approved Returns"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"12"}),s.jsx("p",{className:"text-sm text-gray-600",children:"This month"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Refund Amount"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"8,450"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Processed"})]})]})]}),Uie=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Review Management"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Average Rating"}),s.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:"4.7"}),s.jsx("p",{className:"text-sm text-gray-600",children:""})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Total Reviews"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"89"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Customer feedback"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Response"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"5"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Need attention"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Positive Reviews"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"76"}),s.jsx("p",{className:"text-sm text-gray-600",children:"85% positive"})]})]})]}),qie=()=>s.jsxs("div",{className:"p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Income Dashboard"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Today's Earnings"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"2,450"}),s.jsx("p",{className:"text-sm text-gray-600",children:"+12% from yesterday"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"This Week"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:"18,320"}),s.jsx("p",{className:"text-sm text-gray-600",children:"7 days total"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"This Month"}),s.jsx("p",{className:"text-3xl font-bold text-purple-600",children:"72,850"}),s.jsx("p",{className:"text-sm text-gray-600",children:"30 days total"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pending Payout"}),s.jsx("p",{className:"text-3xl font-bold text-orange-600",children:"5,200"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Available for withdrawal"})]})]})]}),Hie=new _B,Wie=()=>{tV();const e=Dn();return _.useEffect(()=>{window.scrollTo(0,0)},[e.pathname]),s.jsxs(mz,{children:[s.jsx(ct,{path:"/",element:s.jsx(dk,{})}),s.jsx(ct,{path:"/splash",element:s.jsx(sV,{})}),s.jsx(ct,{path:"/login",element:s.jsx(hV,{})}),s.jsx(ct,{path:"/home",element:s.jsx(dk,{})}),s.jsx(ct,{path:"/search",element:s.jsx(lK,{})}),s.jsx(ct,{path:"/cart",element:s.jsx(sK,{})}),s.jsx(ct,{path:"/wishlist",element:s.jsx(Lr,{children:s.jsx(dK,{})})}),s.jsx(ct,{path:"/profile",element:s.jsx(Lr,{children:s.jsx(vK,{})})}),s.jsx(ct,{path:"/profile-edit",element:s.jsx(Lr,{children:s.jsx(bK,{})})}),s.jsx(ct,{path:"/privacy",element:s.jsx(wK,{})}),s.jsx(ct,{path:"/privacy-policy",element:s.jsx(_K,{})}),s.jsx(ct,{path:"/product/:id",element:s.jsx(WG,{})}),s.jsx(ct,{path:"/vendor/:vendorId",element:s.jsx(QG,{})}),s.jsx(ct,{path:"/checkout",element:s.jsx(Lr,{children:s.jsx(sZ,{})})}),s.jsx(ct,{path:"/order-confirmation/:orderId",element:s.jsx(Lr,{children:s.jsx(nZ,{})})}),s.jsx(ct,{path:"/orders",element:s.jsx(dY,{})}),s.jsx(ct,{path:"/addresses",element:s.jsx(Lr,{children:s.jsx(fY,{})})}),s.jsx(ct,{path:"/payments",element:s.jsx(Lr,{children:s.jsx(vY,{})})}),s.jsx(ct,{path:"/help",element:s.jsx(bY,{})}),s.jsx(ct,{path:"/support",element:s.jsx(Lr,{children:s.jsx(PY,{})})}),s.jsx(ct,{path:"/messages",element:s.jsx(Lr,{children:s.jsx(xk,{})})}),s.jsx(ct,{path:"/order/:orderId/messages",element:s.jsx(Lr,{children:s.jsx(xk,{})})}),s.jsx(ct,{path:"/signup",element:s.jsx(jK,{})}),s.jsx(ct,{path:"/forgot-password",element:s.jsx(NK,{})}),s.jsx(ct,{path:"/category/:categoryName",element:s.jsx(jY,{})}),s.jsx(ct,{path:"/featured-items",element:s.jsx(SY,{})}),s.jsx(ct,{path:"/trending-items",element:s.jsx(CY,{})}),s.jsx(ct,{path:"/latest-products",element:s.jsx(TY,{})}),s.jsx(ct,{path:"/vendor/login",element:s.jsx(AY,{})}),s.jsx(ct,{path:"/vendor/signup",element:s.jsx(OY,{})}),s.jsx(ct,{path:"/vendor/onboarding",element:s.jsx(LY,{})}),s.jsx(ct,{path:"/vendor/rejection",element:s.jsx(IY,{})}),s.jsx(ct,{path:"/vendor/dashboard",element:s.jsx(h2,{})}),s.jsx(ct,{path:"/vendor/home",element:s.jsx(h2,{})}),s.jsx(ct,{path:"/vendor/place-order",element:s.jsx(Ore,{})}),s.jsx(ct,{path:"/vendor/sales",element:s.jsx(Rre,{})}),s.jsx(ct,{path:"/vendor/messages",element:s.jsx(m2,{})}),s.jsx(ct,{path:"/vendor/order/:orderId/messages",element:s.jsx(m2,{})}),s.jsx(ct,{path:"/vendor/messages/compose",element:s.jsx(Die,{})}),s.jsx(ct,{path:"/vendor/messages/search",element:s.jsx($ie,{})}),s.jsx(ct,{path:"/vendor/messages/settings",element:s.jsx(Bie,{})}),s.jsx(ct,{path:"/vendor/customers",element:s.jsx(Fie,{})}),s.jsx(ct,{path:"/vendor/add-products",element:s.jsx(zie,{})}),s.jsx(ct,{path:"/vendor/products",element:s.jsx(Xre,{})}),s.jsx(ct,{path:"/vendor/add-product",element:s.jsx(Ure,{})}),s.jsx(ct,{path:"/vendor/orders",element:s.jsx(Fre,{})}),s.jsx(ct,{path:"/vendor/return-orders",element:s.jsx(Vie,{})}),s.jsx(ct,{path:"/vendor/reviews",element:s.jsx(Uie,{})}),s.jsx(ct,{path:"/vendor/income",element:s.jsx(qie,{})}),s.jsx(ct,{path:"/vendor/wallet",element:s.jsx(qre,{})}),s.jsx(ct,{path:"/vendor/profile",element:s.jsx(Gre,{})}),s.jsx(ct,{path:"/vendor/profile-management",element:s.jsx(Kre,{})}),s.jsx(ct,{path:"/vendor/company",element:s.jsx(Yre,{})}),s.jsx(ct,{path:"/vendor/security",element:s.jsx(Zre,{})}),s.jsx(ct,{path:"/vendor/notifications",element:s.jsx(Jre,{})}),s.jsx(ct,{path:"/vendor/settings",element:s.jsx(Dre,{})}),s.jsx(ct,{path:"/vendor/summary",element:s.jsx(Qre,{})}),s.jsx(ct,{path:"/vendor/analytics",element:s.jsx(eie,{})}),s.jsx(ct,{path:"/notifications",element:s.jsx(Lr,{children:s.jsx(tie,{})})}),s.jsx(ct,{path:"/aarti",element:s.jsx(sie,{})}),s.jsx(ct,{path:"/kathmandu-delivery",element:s.jsx(Lie,{})}),s.jsx(ct,{path:"/lalitpur-delivery",element:s.jsx(Iie,{})}),s.jsx(ct,{path:"/bhaktapur-delivery",element:s.jsx(Mie,{})}),s.jsx(ct,{path:"*",element:s.jsx(eK,{})})]})},Gie=()=>(Bz(),_.useEffect(()=>{(async()=>{try{await Lz.requestAllPermissions(),console.log("All permissions requested successfully")}catch(t){console.error("Failed to request permissions:",t)}})()},[]),s.jsx(xz,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(Wie,{})})),Kie=()=>{const[e,t]=_.useState(!0),n=()=>{console.log("Splash screen completed, hiding splash"),t(!1)};return e?(console.log("Showing splash screen"),s.jsx(Qz,{onComplete:n})):(console.log("Splash completed, rendering main app"),s.jsx($z,{children:s.jsx(Kz,{children:s.jsx(Q8,{children:s.jsxs(Xz,{children:[s.jsx(I6,{}),s.jsx(f$,{}),s.jsx(Gie,{})]})})})}))},iM=()=>s.jsx(NB,{client:Hie,children:s.jsx(Zz,{children:s.jsx(Kie,{})})});console.log(" Initializing ULTIMATE Notification System...");(async()=>{try{const{appInitializer:e}=await ze(async()=>{const{appInitializer:t}=await import("./appInitializer-Cvq-47FZ.js");return{appInitializer:t}},[]);e.initialize().then(()=>{console.log(" App initialized with persistent vendor sessions")}).catch(t=>{console.error(" App initialization failed:",t)})}catch(e){console.error(" Failed to initialize app:",e)}})();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log(" Service Worker registered for ultimate notifications:",e)}).catch(e=>{console.error(" Service Worker registration failed:",e)})});gt.isNativePlatform()&&vp.initialize().then(()=>{console.log(" FCM Service initialized on app startup")}).catch(e=>{console.error(" FCM Service initialization failed:",e)});window.addEventListener("storage",e=>{if(e.key==="ultimate_order_alert"&&e.newValue)try{const t=JSON.parse(e.newValue);if(t.type==="ultimate_order_alert"){console.log(" CROSS-TAB ALERT RECEIVED:",t);const{simpleNotificationService:n}=require("./services/simpleNotificationService");n.showOrderNotification(t.orderNumber,t.amount,t.orderId)}}catch(t){console.error(" Error processing cross-tab alert:",t)}if(e.key==="whatsappInstantOrder"&&e.newValue)try{const t=JSON.parse(e.newValue);console.log(" WHATSAPP-STYLE INSTANT ORDER RECEIVED:",t);const{fcmService:n}=require("./services/fcmService");n.startContinuousSoundForOrder(t.orderId,t),setTimeout(()=>{window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{...t,whatsappStyle:!0,instantOpen:!0,keepSoundPlaying:!0}}))},500)}catch(t){console.error(" Error processing WhatsApp instant order:",t)}});"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",e=>{if(console.log(" Message from Service Worker:",e.data),e.data&&e.data.type==="PLAY_ORDER_SOUND"){const{orderId:t,orderNumber:n,amount:r,emergency:i}=e.data;console.log(" Service Worker requested sound playback for order:",n);const{simpleNotificationService:a}=require("./services/simpleNotificationService");i?a.showOrderNotification(n,r,t):a.playOrderAlertSound()}});document.addEventListener("visibilitychange",()=>{if(!document.hidden){console.log(" Page became visible - checking for pending ultimate alerts");const e=localStorage.getItem("ultimate_order_alert");if(e)try{const t=JSON.parse(e);if(Date.now()-t.timestamp<3e5){console.log(" Showing pending ultimate alert on page visibility");const{simpleNotificationService:i}=require("./services/simpleNotificationService");i.showOrderNotification(t.orderNumber,t.amount,t.orderId)}else localStorage.removeItem("ultimate_order_alert")}catch(t){console.error(" Error processing pending alert:",t),localStorage.removeItem("ultimate_order_alert")}}});qb(document.getElementById("root")).render(s.jsx(iM,{}));window.testNotifications=async function(){console.log(" GLOBAL TEST: Testing notification system..."),alert(" Testing notification system from console...");try{const{simpleNotificationService:e}=await ze(async()=>{const{simpleNotificationService:t}=await Promise.resolve().then(()=>nl);return{simpleNotificationService:t}},void 0);await e.showOrderNotification("TEST-"+Date.now().toString().slice(-4),"99.99",999999),console.log(" Global test completed")}catch(e){console.error(" Global test failed:",e),alert(" Test failed: "+e.message)}};window.checkNotificationPermissions=async function(){console.log(" Checking notification permissions..."),"Notification"in window?(console.log(" Notification permission:",Notification.permission),alert("Notification permission: "+Notification.permission)):(console.log(" Notifications not supported"),alert(" Notifications not supported in this browser"));try{const{simpleNotificationService:e}=await ze(async()=>{const{simpleNotificationService:n}=await Promise.resolve().then(()=>nl);return{simpleNotificationService:n}},void 0),t=await e.checkAndRequestPermissions();console.log(" Permission check result:",t)}catch(e){console.error(" Permission check failed:",e)}};window.showTestOrder=function(){console.log(" Showing test order modal..."),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:999999,orderNumber:"TEST-"+Date.now().toString().slice(-4),amount:"99.99",test:!0}})),alert(" Test order modal should appear")};window.checkForNewOrders=async function(){console.log(" Manually checking for new orders...");try{const{apiRequest:e}=await ze(async()=>{const{apiRequest:r}=await Promise.resolve().then(()=>us);return{apiRequest:r}},void 0),{response:t,data:n}=await e("/vendor/orders/?limit=20");if(t.ok&&n){const r=n.results||n||[],i=r.filter(a=>a.status==="pending");if(console.log(" Total orders:",r.length),console.log(" Pending orders:",i.length),i.length>0){alert(` Found ${i.length} pending orders:

${i.map(o=>` Order #${o.order_number} - ${o.total_amount}`).join(`
`)}

Triggering notifications...`);const{simpleNotificationService:a}=await ze(async()=>{const{simpleNotificationService:o}=await Promise.resolve().then(()=>nl);return{simpleNotificationService:o}},void 0);for(const o of i)console.log(" Triggering notification for pending order:",o.order_number),await a.showOrderNotification(o.order_number,o.total_amount,o.id)}else alert(" No pending orders found")}else alert(" Failed to fetch orders")}catch(e){console.error(" Error checking orders:",e),alert(" Error: "+e.message)}};window.testMobileSound=async function(){console.log(" Testing mobile sound functionality..."),alert(" Testing mobile sound - you should hear emergency beeps");try{const{realPushNotifications:e}=await ze(async()=>{const{realPushNotifications:t}=await Promise.resolve().then(()=>A_);return{realPushNotifications:t}},void 0);await e.testMobileSound(),console.log(" Mobile sound test completed")}catch(e){console.error(" Mobile sound test failed:",e),alert(" Sound test failed: "+e.message)}};window.testEmergencyNotification=async function(){console.log(" Testing emergency notification..."),alert(" Testing emergency notification system");try{const{realPushNotifications:e}=await ze(async()=>{const{realPushNotifications:t}=await Promise.resolve().then(()=>A_);return{realPushNotifications:t}},void 0);await e.testEmergencyNotification(),console.log(" Emergency notification test completed")}catch(e){console.error(" Emergency notification test failed:",e),alert(" Emergency notification test failed: "+e.message)}};window.checkFCMStatus=async function(){console.log(" Checking FCM status for WhatsApp-style notifications...");try{const{realPushNotifications:e}=await ze(async()=>{const{realPushNotifications:r}=await Promise.resolve().then(()=>A_);return{realPushNotifications:r}},void 0),t=await e.checkFCMStatus(),n=`
 FCM STATUS CHECK:
 Has Token: ${t.hasToken}
 Token: ${t.token||"NONE"}
 Platform: ${t.platform}

${t.hasToken?" Background notifications SHOULD work when browser is closed!":" NO FCM TOKEN - Background notifications WONT work when browser is closed!"}
    `;console.log(n),alert(n.trim())}catch(e){console.error(" FCM status check failed:",e),alert(" FCM status check failed: "+e.message)}};console.log(" Global test functions available:");console.log("  - testNotifications() - Test full notification system");console.log("  - checkNotificationPermissions() - Check permission status");console.log("  - showTestOrder() - Show test order modal");console.log("  - checkForNewOrders() - Manually check and trigger notifications for pending orders");console.log("  - testMobileSound() - Test mobile sound functionality");console.log("  - testEmergencyNotification() - Test emergency notification");console.log("  - checkFCMStatus() - Check FCM token for WhatsApp-style background notifications");console.log("");console.log(" To test notifications:");console.log("  1. Open browser console (F12)");console.log("  2. Run: checkNotificationPermissions()");console.log("  3. Run: checkFCMStatus() - CRITICAL: Check if background notifications work");console.log("  4. Run: testNotifications()");console.log("  5. Run: testMobileSound() - Test if sound works on mobile");console.log('  6. Or click the orange " TEST" button in vendor orders');console.log("  7. Run: checkForNewOrders() to check for real pending orders");console.log("");console.log(" WHATSAPP-STYLE TESTING:");console.log("  1. Run: checkFCMStatus() - Ensure FCM token is registered");console.log("  2. Close browser completely");console.log("  3. Place test order - should receive notification even when closed!");qb(document.getElementById("root")).render(s.jsx(iM,{}));export{gt as C,xw as W,ze as _,_ as a,ra as b,us as c,vp as f,o0 as i,s as j,mo as r,nl as s};
