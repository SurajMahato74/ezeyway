import{a as r,j as t}from"./index-JjaIH_pX.js";const b=({src:o,alt:l,className:u="",fallback:d="/placeholder.jpg",placeholder:f})=>{const[g,a]=r.useState(f||""),[n,m]=r.useState(!1),[p,c]=r.useState(!1),e=r.useRef(null);r.useEffect(()=>{const s=new IntersectionObserver(x=>{x.forEach(i=>{i.isIntersecting&&(a(o),s.unobserve(i.target))})},{threshold:.1,rootMargin:"50px"});return e.current&&s.observe(e.current),()=>s.disconnect()},[o]);const h=()=>{m(!0),c(!1)},v=()=>{c(!0),a(d),e.current&&(e.current.onerror=null)};return t.jsxs("div",{className:`relative overflow-hidden ${u}`,children:[!n&&!p&&t.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),t.jsx("img",{ref:e,src:g,alt:l,className:`w-full h-full object-cover transition-opacity duration-300 ${n?"opacity-100":"opacity-0"}`,onLoad:h,onError:v,loading:"lazy"})]})};export{b as default};
